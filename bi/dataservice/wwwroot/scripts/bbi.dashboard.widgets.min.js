/*!
*  filename: bbi.dashboard.widgets.min.js
*  version : 6.7.11
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
var InternalContainerPropertyItem=function(){function n(n){this.containerSettings=null;this.filterSettings=null;this.controlContainer=null;this.controlHeader=null;this.filterConfigInfo=null;this.hierarchicalConfigInfo=null;this.dataGroupInfo=null;this.locale=null;this.designerInstance=n;this.bbdesigner$=this.designerInstance.bbdesigner$;this.designerId=n._id;this.locale=n.getLocalizationContent();this.filterConfigInfo=this.designerInstance.modules.masterSlaveFilter;this.hierarchicalConfigInfo=this.designerInstance.modules.dataConfiguration;this.widgetHelper=this.designerInstance.modules.widgetHelper}return n.prototype.updatePropertyChange=function(n,t,i,r,u){var o=!1,e=this.widgetHelper.getCurrentWidgetInstance(),s,h,c,f,l;switch(n){case"ContainerTitleAlign":this.updateContainerTitleAlign(i,this.controlHeader);break;case"ContainerTitleColor":this.updateContainerTitleColor(i,this.controlHeader);break;case"ShowBorder":this.updateShowBorder(i,this.controlContainer);break;case"CornerRadius":this.updateCornerRadius(i,this.controlContainer);(e.type==="NumberCard"||e.type==="KPICard")&&e.updateCornerRadius(this.controlContainer);break;case"ShowMaximize":this.updateShowMaximize(i);break;case"CSVExport":this.updateCSVExport(i);break;case"ExcelExport":this.updateExcelExport(i);break;case"ImageExport":this.updateImageExport(i);break;case"PDFExport":this.updatePDFExport(i);break;case"EnableComment":this.updateEnableComment(i);break;case"ActAsMasterWidget":this.updateActAsMasterWidget(i,r);break;case"IgnoreFilterActions":this.updateIgnoreFilterActions(i);break;case"ShowLinkIcon":this.updateShowLinkIcon(i);break;case"HierarchicalFilter":this.updateHierarchicalFilter(i);break;case"ViewData":this.updateViewData(i);break;case"PinWidget":this.containerSettings.PinWidget=i;break;case"ShowHeader":this.updateShowHeaderSection(i,r,this.designerInstance);break;case"ShowWidgetBackgroundImage":this.updateBackgroundImageVisibility(i,r);break;case"WidgetBackgroundImageMode":this.updateBackgroundImageMode(i,r);break;case"WidgetBackgroundImageSource":this.resetBackgroundImageProperties(u,r);this.updateBackgroundImageSource(i,r);break;case"WidgetBackgroundImageURL":this.updateBackgroundImageURL(i,r);break;case"WidgetBackgroundColor":this.updateBackgroundColor(i,r);break;case"WidgetTransparency":this.updateBackgroundTransparency(i,r);break;case"WidgetLevelTitleAutoFontSize":this.updateWidgetLevelTitleFontSizeOption(i,r);break;case"WidgetLevelTitleFontSize":this.updateWidgetTitleFontSize(i,r);break;case"WidgetLevelSubTitleAutoFontSize":this.updateWidgetLevelSubTitleFontSizeOption(i,r);break;case"WidgetLevelSubTitleFontSize":this.updateWidgetSubTitleFontSize(i,r);break;case"WidgetLevelAutoPadding":this.updateWidgetLevelAutoPadding(i,r);break;case"WidgetLevelPadding":this.updateWidgetLevelPadding(i,r);break;case"ShowShadow":this.updateShowShadow(i,this.controlContainer);break;default:o=!0}o||(s=this.designerInstance.designerPanel,h=r.ControlContainer,s.selectedReportItems.length>0&&BoldBIDashboardDesigner.editManager.isPerformAction?(c=this.designerInstance.modules.propertyPanel,h.attr("id")===this.controlContainer.attr("id")&&(f=this.bbdesigner$.extend(!0,{},u),f.categoryName=u.categoryName,f.valueList=u.valueList,c.updatePropertyValue(f,r.Type,i))):(l=r.getJson(),BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ContainerPropertyChanged,"updatePropertyChange",r.RootCss,this.designerInstance._id+"_"+l.UniqueName,[n,i,t,r,u],[n,t,i,r,u])))},n.prototype.getContainerSettingItems=function(n,t,i,r){this.controlContainer=t;this.controlHeader=i;this.containerSettings=n;this.dataGroupInfo=r;var u=this.widgetHelper.getCurrentWidgetInstance();return{CategoryName:"Container Appearance",DisplayName:this.locale.propertyPanel.containerAppearanceText,Items:[{name:"ContainerTitleAlign",isVisible:!0,displayName:this.locale.propertyPanel.containerApperance.containerTitleAlignText,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.containerSettings.TextAlignment),itemType:"dropdown",valueList:[{text:this.locale.propertyPanel.containerApperance.containerTitleAlign.leftText,value:"Left"},{text:this.locale.propertyPanel.containerApperance.containerTitleAlign.centerText,value:"Center"},{text:this.locale.propertyPanel.containerApperance.containerTitleAlign.rightText,value:"Right"}]},{name:"ContainerTitleColor",isVisible:!0,displayName:this.locale.propertyPanel.containerApperance.containerTitleColorText,value:this.containerSettings.TextColor,itemType:"color"},{name:"widgetTitleFont",displayName:this.locale.propertyPanel.fontSettings.widgetTitle,itemType:"fontSettings",isTitleVisible:!1,autoFontSettingsInfo:{name:"WidgetLevelTitleAutoFontSize",displayName:this.locale.propertyPanel.containerApperance.widgetTitleAutoFontSize,isVisible:!0,value:this.containerSettings.WidgetTitleFontInfo.AutoFontSize},fontSizeInfo:{name:"WidgetLevelTitleFontSize",isVisible:!0,isDisable:this.containerSettings.WidgetTitleFontInfo.AutoFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.containerSettings.WidgetTitleFontInfo.AutoFontSize?22:this.containerSettings.WidgetTitleFontInfo.FontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:MaximumFontValues.widgetTitle,unitType:"px"}},{name:"widgetSubtitleFont",displayName:this.locale.propertyPanel.fontSettings.widgetSubTitle,itemType:"fontSettings",isTitleVisible:!1,autoFontSettingsInfo:{name:"WidgetLevelSubTitleAutoFontSize",displayName:this.locale.propertyPanel.containerApperance.widgetSubTitleAutoFontSize,isVisible:!0,value:this.containerSettings.WidgetSubTitleFontInfo.AutoFontSize},fontSizeInfo:{name:"WidgetLevelSubTitleFontSize",isVisible:!0,isDisable:this.containerSettings.WidgetSubTitleFontInfo.AutoFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.containerSettings.WidgetSubTitleFontInfo.AutoFontSize?16:this.containerSettings.WidgetSubTitleFontInfo.FontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:MaximumFontValues.widgetSubTitle,unitType:"px"}},{name:"widgetPadding",displayName:this.locale.propertyPanel.containerApperance.widgetPaddingInfo.autoPaddingSetting,itemType:"fontSettings",isTitleVisible:!1,autoFontSettingsInfo:{name:"WidgetLevelAutoPadding",displayName:this.locale.propertyPanel.containerApperance.widgetPaddingInfo.autoPadding,isVisible:this.updatePaddingSettingVisibility(u),value:this.containerSettings.WidgetPaddingInfo.AutoPadding},fontSizeInfo:{name:"WidgetLevelPadding",isVisible:this.updatePaddingSettingVisibility(u),isDisable:this.containerSettings.WidgetPaddingInfo.AutoPadding,displayName:this.locale.propertyPanel.containerApperance.widgetPaddingInfo.paddingText,value:this.containerSettings.WidgetPaddingInfo.Padding,itemType:"float",decimalPlaces:0,minimum:0,maximum:25,unitType:"px"}},{name:"ShowBorder",displayName:this.locale.propertyPanel.containerApperance.showBorderText,value:this.containerSettings.ShowBorder,itemType:"bool"},{name:"CornerRadius",displayName:this.locale.propertyPanel.containerApperance.cornerRadiusText,value:this.containerSettings.CornerRadius,itemType:"float",decimalPlaces:0,minimum:0,maximum:10,unitType:"pt"},{name:"ShowWidgetBackgroundImage",displayName:this.locale.propertyPanel.containerApperance.showBackgroundImage,value:this.containerSettings.BackgroundSettings.Image.Visibility,itemType:"bool",isVisible:!0},{name:"WidgetBackgroundImageSource",isDisable:!1,isVisible:this.containerSettings.BackgroundSettings.Image.Visibility,displayName:this.locale.propertyPanel.containerApperance.backgroundImageSource,value:this.containerSettings.BackgroundSettings.Image.ImageSource,itemType:"dropdown",valueList:[{text:this.locale.propertyPanel.containerApperance.backgroundSource.local,value:"Local"},{text:this.locale.propertyPanel.containerApperance.backgroundSource.url,value:"URL"}]},{name:"WidgetBackgroundImageBrowse",displayName:this.locale.propertyPanel.containerApperance.backgroundImageBrowse,isVisible:this.containerSettings.BackgroundSettings.Image.Visibility&&this.containerSettings.BackgroundSettings.Image.ImageSource==="Local"?!0:!1,itemType:"object",callbackInstance:this,callbackMethod:"renderBackgroundImageBrowseBox"},{name:"WidgetBackgroundImageURL",displayName:this.locale.propertyPanel.containerApperance.backgroundImageURL,itemType:"string",value:this.containerSettings.BackgroundSettings.Image.ImageUrl,isVisible:this.containerSettings.BackgroundSettings.Image.Visibility&&this.containerSettings.BackgroundSettings.Image.ImageSource==="URL"?!0:!1},{name:"WidgetBackgroundImageMode",isDisable:!1,isVisible:this.containerSettings.BackgroundSettings.Image.Visibility,displayName:this.locale.propertyPanel.containerApperance.backgroundImageMode,value:this.containerSettings.BackgroundSettings.Image.ImageMode,itemType:"dropdown",valueList:[{text:this.locale.propertyPanel.containerApperance.backgroundMode.default,value:"Default"},{text:this.locale.propertyPanel.containerApperance.backgroundMode.fill,value:"Fill"},{text:this.locale.propertyPanel.containerApperance.backgroundMode.uniform,value:"Uniform"},{text:this.locale.propertyPanel.containerApperance.backgroundMode.uniformToFill,value:"Uniform To Fill"}]},{name:"WidgetBackgroundColor",isVisible:!0,displayName:this.locale.propertyPanel.containerApperance.backgroundColor,value:this.containerSettings.BackgroundSettings.Color,itemType:"color",isDisable:this.containerSettings.BackgroundSettings.Image.Visibility},{name:"WidgetTransparency",isVisible:!0,displayName:this.locale.propertyPanel.containerApperance.transparency,value:this.containerSettings.BackgroundSettings.Transparency,decimalPlaces:1,itemType:"float",minimum:0,maximum:1,interval:.1,unitType:"pt"},{name:"ShowShadow",displayName:this.locale.propertyPanel.containerApperance.showShadowText,value:this.containerSettings.ShowShadow,isVisible:!0,itemType:"bool"}]}},n.prototype.getContainerActionsItems=function(n,t,i,r){this.controlContainer=t;this.controlHeader=i;this.containerSettings=n;this.dataGroupInfo=r;return{CategoryName:"Container Actions",DisplayName:this.locale.propertyPanel.containerActionsText,Items:[{name:"ShowHeader",isVisible:!0,displayName:this.locale.propertyPanel.containerActions.showHeaderText,value:this.containerSettings.ShowHeader,itemType:"bool"},{name:"ShowMaximize",isVisible:!0,displayName:this.locale.propertyPanel.containerActions.showMaximizeText,value:this.containerSettings.ShowMaximize,itemType:"bool",isDisable:!BoldBIDashboard.isNullOrUndefined(this.containerSettings.CombineWidgetId)&&this.containerSettings.CombineWidgetId!==""?!0:!1},{name:"CSVExport",isVisible:!0,displayName:this.locale.propertyPanel.containerActions.csvExportText,value:this.containerSettings.EnableCsvExport,itemType:"bool"},{name:"ExcelExport",isVisible:this.designerInstance.model.export.Excel,displayName:this.locale.propertyPanel.containerActions.excelExportText,value:this.containerSettings.EnableExcelExport,itemType:"bool"},{name:"ImageExport",isVisible:this.designerInstance.model.export.Image,displayName:this.locale.propertyPanel.containerActions.imageExportText,value:this.containerSettings.EnableImageExport,itemType:"bool"},{name:"PDFExport",isVisible:this.designerInstance.model.export.Pdf,displayName:this.locale.propertyPanel.containerActions.pdfExportText,value:this.containerSettings.EnablePdfExport,itemType:"bool"},{name:"EnableComment",displayName:this.locale.propertyPanel.containerActions.enableCommentText,value:this.containerSettings.EnableComment,itemType:"bool"},{name:"ShowLinkIcon",isVisible:!1,displayName:this.locale.propertyPanel.containerActions.showLinkIconText,value:this.containerSettings.ShowLinkIcon,itemType:"bool"},{name:"ViewData",isVisible:!0,displayName:this.locale.propertyPanel.containerActions.viewDataText,value:this.containerSettings.ViewData,itemType:"bool"},{name:"PinWidget",isVisible:!0,displayName:this.locale.propertyPanel.containerActions.pinWidgetText,value:this.containerSettings.PinWidget,itemType:"bool",isDisable:!BoldBIDashboard.isNullOrUndefined(this.containerSettings.CombineWidgetId)&&this.containerSettings.CombineWidgetId!==""?!0:!1},]}},n.prototype.getFilterSettingsItems=function(n,t,i,r){this.controlContainer=t;this.controlHeader=i;this.filterSettings=n;this.dataGroupInfo=r;var u=this.widgetHelper.getCurrentWidgetInstance(),f=!0,e=!0;return BoldBIDashboard.isNullOrUndefined(u)||(f=u.canUseWidgetAsMaster(),e=u.isIgnoreFilterActionVisible(),this.filterSettings.ActAsMasterWidget=f?this.filterSettings.ActAsMasterWidget:!1),{CategoryName:"Filter",DisplayName:this.locale.propertyPanel.filterText,Items:[{name:"ActAsMasterWidget",isDisable:!1,displayName:this.locale.propertyPanel.filter.actAsMasterWidget,isVisible:f,value:this.filterSettings.ActAsMasterWidget,itemType:"bool"},{name:"IgnoreFilterActions",displayName:this.locale.propertyPanel.filter.ignoreFilterActions,value:this.filterSettings.IgnoreFilterActions,isVisible:e,itemType:"bool"},{name:"HierarchicalFilter",displayName:this.locale.propertyPanel.filter.hierarchicalFilter,isVisible:!0,value:this.filterSettings.HierarchicalFilter,itemType:"bool"}]}},n.prototype.updateContainerTitleAlign=function(n,t){var i=this.bbdesigner$(t).siblings(".bbi-dbrd-control-sub-header"),r=this.bbdesigner$(t).find(".bbi-dbrd-controlIcon-container"),u=10;this.containerSettings.TextAlignment=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(TextAlignment,n);this.bbdesigner$(t).find(".bbi-dbrd-control-title-wrapper").css({"justify-content":this.getContainerTitleAlignmentValue(n)});u=r.outerWidth(!0)+10;this.bbdesigner$(t).find(".bbi-dbrd-control-title-wrapper").css({width:"calc(100%)"});i.find(".bbi-dbrd-control-sub-title").css({"justify-content":this.getContainerTitleAlignmentValue(n)})},n.prototype.getContainerTitleAlignmentValue=function(n){var t=null;switch(n){case"Center":t="Center";break;case"Left":t="flex-start";break;case"Right":t="flex-end";break;default:t="flex-start"}return t},n.prototype.updateContainerTitleColor=function(n,t){this.containerSettings.TextColor=n;this.bbdesigner$(t).find(".bbi-dbrd-control-title").css({color:n})},n.prototype.updateShowBorder=function(n,t){this.containerSettings.ShowBorder=n;this.containerSettings.ShowBorder?this.bbdesigner$(t).css({border:"1px solid "+BoldBIDashboard.Dashboard.WidgetContainerHelper.getThemeVariablesForWidgets(this.widgetHelper.getCurrentWidgetInstance().Type,!1,!1)}):this.bbdesigner$(t).css({border:"0px"})},n.prototype.updateShowShadow=function(n,t){this.containerSettings.ShowShadow=n;var i=!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.widgetContainerSettings)&&!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(this.designerInstance.model.widgetContainerSettings.boxShadow)?this.designerInstance.model.widgetContainerSettings.boxShadow:null;BoldBIDashboard.Dashboard.WidgetContainerHelper.updateWidgetShadow(n,t,i)},n.prototype.updateCornerRadius=function(n,t){this.containerSettings.CornerRadius=n;this.bbdesigner$(t).css("border-radius",n+"px");this.bbdesigner$(t).find(".bbi-dbrd-control-background").css("border-radius",n+"px");this.bbdesigner$(t).find(".bbi-dbrd-content-container").css({"border-bottom-left-radius":n,"border-bottom-right-radius":n})},n.prototype.updateShowMaximize=function(n){this.containerSettings.ShowMaximize=n;n?(this.controlContainer.find(".bbi-dbrd-maxim-toggle").css("display","block"),this.controlContainer.find(".bbi-dbrd-maxim-toggle").addClass("bbi-dbrd-maxim")):(this.controlContainer.find(".bbi-dbrd-maxim-toggle").css("display","none"),this.controlContainer.find(".bbi-dbrd-maxim-toggle").removeClass("bbi-dbrd-maxim"))},n.prototype.updateCSVExport=function(n){this.containerSettings.EnableCsvExport=n},n.prototype.updateActAsMasterWidget=function(n,t){this.filterSettings.ActAsMasterWidget=n;this.filterConfigInfo.ActAsMasterPropertyChangeInFilterConfigInfo(n,t)},n.prototype.updateIgnoreFilterActions=function(n){this.filterSettings.IgnoreFilterActions=n;this.filterConfigInfo.IgnoreFilterActionPropertyChange(n)},n.prototype.updateHierarchicalFilter=function(n){var i,r,f,u,t;if(this.filterSettings.HierarchicalFilter=n,i=this.widgetHelper.getCurrentWidgetInstance(),!BoldBIDashboard.isNullOrUndefined(i.DataGroupInfo)&&i.DataGroupInfo.FieldContainers.length!==0){for(r=0;r<i.DataGroupInfo.FieldContainers.length;r++)for(f=i.DataGroupInfo.FieldContainers[r],u=0;u<f.FieldInfos.length;u++)t=f.FieldInfos[u],BoldBIDashboard.isNullOrUndefined(t.FilterInfo)||BoldBIDashboard.isNullOrUndefined(t.FilterInfo.DimensionFilterInfo)||!t.FilterInfo.DimensionFilterInfo.IsTopNFilteringApplied||BoldBIDashboard.isNullOrUndefined(t.FilterInfo.DimensionFilterInfo.TopNFilterInfo)||(t.FilterInfo.DimensionFilterInfo.TopNFilterInfo.IsHierarchicalFilter=n);this.hierarchicalConfigInfo.postDraggedFields()}},n.prototype.updateExcelExport=function(n){this.containerSettings.EnableExcelExport=n},n.prototype.updateImageExport=function(n){this.containerSettings.EnableImageExport=n},n.prototype.updatePDFExport=function(n){this.containerSettings.EnablePdfExport=n},n.prototype.updateEnableComment=function(n){this.containerSettings.EnableComment=n},n.prototype.updateShowLinkIcon=function(n){this.containerSettings.ShowLinkIcon=n},n.prototype.updateViewData=function(n){this.containerSettings.ViewData=n},n.prototype.updateShowHeaderSection=function(n,t,i){var o,f,e;if(this.containerSettings.ShowHeader=n,o={controlTitle:this.containerSettings.Title,controlId:t.ControlContainer.attr("data-name"),isMaximizeEnable:!1,isFilterIconEnable:t.getJson().FilterSettings.ActAsMasterWidget},this.containerSettings.ShowHeader){t.ControlContainer.find(".bbi-dbrd-control-header").remove();BoldBIDashboard.Dashboard.WidgetContainerHelper.getControlHeader(o,t,i);BoldBIDashboard.Dashboard.WidgetContainerHelper.getControlSubHeader(t);var r=this.bbdesigner$(t.ControlContainer).find(".bbi-dbrd-control-title"),u=t.getJson().ContainerSettings.Title,s=this.designerInstance.modules.labelParameter;u=s.getResultantParameterString(u,t.getJson().Data.Id);r.html(u);this.widgetHelper.updateConditionBasedWidgetTitleFont(this.containerSettings.WidgetTitleFontInfo.AutoFontSize,this.containerSettings.WidgetTitleFontInfo.FontSize,t);this.widgetHelper.updateConditionBasedWidgetSubTitleFont(this.containerSettings.WidgetSubTitleFontInfo.AutoFontSize,this.containerSettings.WidgetSubTitleFontInfo.FontSize,t);r.attr("data-tooltip",r.text());s.adjustParameterColumn(this.bbdesigner$(t.ControlContainer).find(".bbi-dbrd-control-title-wrapper"));f=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.containerSettings.TextAlignment);this.bbdesigner$(t.ControlContainer).find(".bbi-dbrd-control-title-wrapper").css({"justify-content":this.getContainerTitleAlignmentValue(f)});this.bbdesigner$(t.ControlContainer).find(".bbi-dbrd-control-sub-title").css({"justify-content":this.getContainerTitleAlignmentValue(f)});e=t.ControlContainer.find(".bbi-dbrd-control-header").height();t.getJson().ContainerSettings.SubTitle!==""&&t.ControlContainer.find(".bbi-dbrd-control-sub-header").css("display")!=="none"&&(e=t.ControlContainer.find(".bbi-dbrd-control-header").height()+t.ControlContainer.find(".bbi-dbrd-control-sub-header").outerHeight());t.ContentContainer.css("height","calc(100% - "+e+"px)");t.IsRendered&&t.updateSize(t.CellInfo)}else BoldBIDashboard.Dashboard.WidgetContainerHelper.disableHeader(t,i),t.IsRendered&&BoldBIDashboard.Dashboard.WidgetHelper.isFilterWidgets&&t.updateSize(t.CellInfo)},n.prototype.renderBackgroundImageBrowseBox=function(n,t,i,r){var e=this.designerInstance.modules.propertyPanel,u,f;BoldBIDashboard.isNullOrUndefined(n)?(e.updateItemVisibility(r,"ContainerAppearance","WidgetBackgroundImageBrowse",i.isVisible),this.resetBackgroundImageConfiguration()):(u=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%",display:BoldBIDashboard.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designerId+"_"+t+"_"+i.name+"_container"}),u.addClass("bbi-dbrd-designer-hoverable"),u.attr("data-tooltip","<span>"+this.locale.propertyPanel.containerApperance.backgroundImage.recommendedFiles+":<b>"+this.locale.propertyPanel.containerApperance.backgroundImage.files+"<\/b> <\/span> <br> <span>"+this.locale.propertyPanel.containerApperance.backgroundImage.recommendedSizes+":<b>"+this.locale.propertyPanel.containerApperance.backgroundImage.size+"<\/b> <\/span>"),f=BoldBIDashboard.buildTag("table.bbi-designer-dsconfig-table","",{width:"100%",height:"50px"},{unselectable:"on",id:this.designerId+"_"+t+"_image_local_table"}),this.renderBackgroundImageBrowseTable(f,t),this.renderBackgroundImageUploadBox(),u.append(f),n.append(u))},n.prototype.renderBackgroundImageBrowseTable=function(n,t){var r=BoldBIDashboard.buildTag("tr","",{}),s=BoldBIDashboard.buildTag("td","",{}),i=BoldBIDashboard.buildTag("table","",{unselectable:"on"}),u=BoldBIDashboard.buildTag("tr","",{},{}),f=BoldBIDashboard.buildTag("tr","",{},{}),k=BoldBIDashboard.buildTag("td","",{}),d=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label","",{float:"left"},{id:this.designerId+"_"+t+"_backgroundimage_progress_tr"}),h=BoldBIDashboard.buildTag("td","",{},{id:this.designerId+"_"+t+"_image_path_error_icon_td"}),c=BoldBIDashboard.buildTag("td","",{},{colspan:"2"});this.designerInstance.modules.util.renderErrIndictor(h,this.designerId);var e=BoldBIDashboard.buildTag("tr","",{height:"22.5px"},{id:this.designerId+"_"+t+"_image_path_td"}),l=BoldBIDashboard.buildTag("tr.e-progresserrmsg","",{height:"22.5px",display:"none"},{id:this.designerId+"_"+t+"_image_progresserr_tr"}),a=BoldBIDashboard.buildTag("td","",{}),g=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label","",{"font-size":"12px","font-weight":"normal"},{id:this.designerId+"_"+t+"_image_progresserr_td"}),v=BoldBIDashboard.buildTag("td","",{},{colspan:"2"}),y=BoldBIDashboard.buildTag("td","",{},{}),p=BoldBIDashboard.buildTag("td","",{float:"right",width:"172px"},{}),w=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-content-label","",{height:"25px","border-right":"0px","padding-bottom":"0.5px","padding-top":"0.5px",width:"213px","margin-left":"4px"},{id:this.designerId+"_"+t+"_backgroundimage_path",type:"text",readonly:"readonly"});BoldBIDashboard.isNullOrUndefined(this.containerSettings.BackgroundSettings.Image.ImageName)||w.val(this.containerSettings.BackgroundSettings.Image.ImageName);var o=BoldBIDashboard.buildTag("div.bbi-dbrd-btn-secondary bbi-dbrd-btn-small e-dbrd-browse-image-button","",{display:"inline-block","margin-left":"-41px","min-width":"0px"},{id:this.designerId+"_"+t+"_file_datasource_browse"}),nt=BoldBIDashboard.buildTag("span.bbi-designer-horizontal-browse bbi-designer-browse-icon","",{"font-size":"16px","line-height":"28px"}),b=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-top":"13px"});b.text(this.locale.propertyPanel.containerApperance.backgroundImageBrowse);p.append(b);n.append(r);r.append(p);s.append(i);r.append(s);i.append(u);u.append(k);u.append(h);i.append(e,f.clone(),f);v.append(w);e.append(v);e.append(y);y.append(o);c.append(d);f.append(c);a.append(g);l.append(a);o.on("click",this.bbdesigner$.proxy(this.onBackgroundImageBrowseClick,this));o.append(nt);i.append(l)},n.prototype.renderBackgroundImageUploadBox=function(){var t=this,i=this.designerInstance.element.find("#"+this.designerId+"_widget_backgroundimage_upload"),n;(BoldBIDashboard.isNullOrUndefined(i)||i.length===0)&&(n=BoldBIDashboard.buildTag("div","",{height:"0px"},{id:this.designerId+"_widget_backgroundimage_upload"}),this.designerInstance.element.append(n),this.backgroundImageEjUploadBox=n.BoldBIDashboardUploadbox({width:"0px",height:"0px",uploadName:"image",extensionsAllow:".jpg,.png,.gif,.jpeg,.bmp,.emf,.jfif,.jpe,.rle,.tif,.tiff,.wmf,.dib,.ico",autoUpload:!0,showFileDetails:!1,dialogAction:{content:this.designerInstance.element},fileSize:52428800,saveUrl:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.uploadimage,fileSelect:this.bbdesigner$.proxy(this.onBackgroundImagefileSelect,this),error:this.bbdesigner$.proxy(this.onBackgroundImageuploadError,this),success:this.bbdesigner$.proxy(this.onBackgroundImageuploadSuccess,this),inProgress:this.bbdesigner$.proxy(this.backgroundimagefileProgress,this),beforeSend:this.bbdesigner$.proxy(function(n){t.designerInstance.beforeSendRequestForUploadbox(t.designerInstance,"UploadAction",n)},this)}).data("BoldBIDashboardUploadbox"),this.designerInstance.element.find("#"+this.designerId+"_widget_backgroundimage_upload_SelectButton").hide())},n.prototype.resetBackgroundImageConfiguration=function(){var n=this.widgetHelper.getCurrentWidgetInstance();this.designerInstance.element.find("#"+this.designerId+"_"+n.Type+"_ContainerAppearance_backgroundimage_path").val(this.containerSettings.BackgroundSettings.Image.ImageName);this.designerInstance.element.find("#"+this.designerId+"_"+n.Type+"_ContainerAppearance_backgroundimage_progress_tr").css("display","none")},n.prototype.onBackgroundImageBrowseClick=function(){this.designerInstance.element.find("#"+this.designerId+"_widget_backgroundimage_upload .e-uploadinput").click()},n.prototype.onBackgroundImagefileSelect=function(n){this.resetBackgroundImageConfiguration();var i=this.widgetHelper.getCurrentWidgetInstance(),t=this.designerInstance.element.find("#"+this.designerId+"_"+i.Type+"_ContainerAppearance_backgroundimage_progress_tr"),r=this.designerInstance.element.find("#"+this.designerId+"_"+i.Type+"_ContainerAppearance_backgroundimage_path");n.files.length!==0&&(n.files[0].size>n.model.fileSize?(n.cancel=!0,t.text("")):(t.css("display","inline-block"),t.text(this.locale.propertyPanel.containerApperance.backgroundImage.initiatingUpload),r.val(n.files[0].name)));BoldBIDashboard.browserInfo().name!=="msie"&&this.backgroundImageEjUploadBox._uploadFileListDelete()},n.prototype.onBackgroundImageuploadError=function(){var n=this.widgetHelper.getCurrentWidgetInstance();this.designerInstance.element.find("#"+this.designerId+"_"+n.Type+"_ContainerAppearance_backgroundimage_progress_tr").text(this.locale.propertyPanel.containerApperance.backgroundImage.uploadFailed)},n.prototype.onBackgroundImageuploadSuccess=function(n){var i=this.widgetHelper.getCurrentWidgetInstance(),t,r;this.designerInstance.element.find("#"+this.designerId+"_"+i.Type+"_ContainerAppearance_backgroundimage_progress_tr").css("display","none");t=JSON.parse(n.responseText);t&&t.Status?(this.containerSettings.BackgroundSettings.Image.FilePath=t.Data.fileId+t.Data.ext,this.containerSettings.BackgroundSettings.Image.ImageName=t.Data.fileName,r="data:image/"+t.Data.ext+";base64,"+t.Data.source,BoldBIDashboard.Dashboard.Resource.addImage(this.containerSettings.BackgroundSettings.Image.FilePath,r),i.backgroundInfo.Image=r,this.updateControlBackground(i),this.designerInstance.modules.serialization.notifyChange()):this.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.upload,this.locale.errorMessage.failedToUploadFile,IconType.errors,AlertType.Alert,!1,t?t.Message:null)},n.prototype.backgroundimagefileProgress=function(n){var t=this.widgetHelper.getCurrentWidgetInstance();this.designerInstance.element.find("#"+this.designerId+"_"+t.Type+"_ContainerAppearance_backgroundimage_progress_tr").text(this.locale.propertyPanel.containerApperance.backgroundImage.uploading+n.percentage+"%")},n.prototype.updateControlBackground=function(n){var t=n.ControlContainer.find(">.bbi-dbrd-control-background");!BoldBIDashboard.isNullOrUndefined(t)&&t.length!==0&&n.isBackgroundInfoNeeded&&(n.backgroundInfo.ShowImage?t.css({"background-image":"url("+n.backgroundInfo.Image+")"}):t.css({"background-image":"none"}),this.designerInstance.isViewMode&&n.backgroundInfo.Color==="#ffffff"?t.css("background-color",this.designerInstance.modules.themeHelper.getWidgetTileBackground(n.Type)):t.css("background-color",n.backgroundInfo.Color),n.updateIconContainerBackground(),this.designerInstance.isDarkTypeTheme()?t.css("opacity",1):t.css("opacity",n.backgroundInfo.Opacity),this.updateBackgroundImageSize(t,n.backgroundInfo.Mode,n.backgroundInfo.Image));n.IsExistinBgAvailable&&n.updateIconContainerBackground();this.updateCombineWidgetBackground(n)},n.prototype.updateCombineWidgetBackground=function(n){if(!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n.getContainerSettings().CombineWidgetId)&&(n.backgroundInfo.Color!==""||!BoldBIDashboard.isNullOrUndefined(n.backgroundInfo.Image)&&n.backgroundInfo.ShowImage)&&(n.ControlContainer.css("background-color",this.designerInstance.modules.themeHelper.getWidgetTileBackground(null)),n.isBackgroundInfoNeeded)){var t=n.ControlContainer.find(">.bbi-dbrd-control-background");this.designerInstance.isViewMode&&n.backgroundInfo.Color==="#ffffff"?t.css("background-color",this.designerInstance.modules.themeHelper.getWidgetTileBackground(n.Type)):t.css("background-color",n.backgroundInfo.Color);this.designerInstance.isDarkTypeTheme()&&n.backgroundInfo.Opacity!==0?t.css("opacity",1):t.css("opacity",n.backgroundInfo.Opacity)}},n.prototype.updateBackgroundImageSize=function(n,t,i){if(!BoldBIDashboard.isNullOrUndefined(i))switch(t){case"Fill":n.addClass("e-control-image-fill");n.removeClass("e-control-image-default e-control-image-uniform e-control-image-uniformtofill");break;case"Uniform":n.addClass("e-control-image-uniform");n.removeClass("e-control-image-default e-control-image-fill e-control-image-uniformtofill");break;case"Uniform To Fill":n.addClass("e-control-image-uniformtofill");n.removeClass("e-control-image-default e-control-image-fill e-control-image-uniform");break;default:n.addClass("e-control-image-default");n.removeClass("e-control-image-fill e-control-image-uniform e-control-image-uniformtofill")}},n.prototype.resetBackgroundImageProperties=function(n,t){this.containerSettings.BackgroundSettings.Image.FilePath="";this.containerSettings.BackgroundSettings.Image.ImageName="";this.containerSettings.BackgroundSettings.Image.ImageUrl="";this.designerInstance.element.find("#"+this.designerId+"_"+t.Type+"_"+n.categoryName+"_backgroundimage_path").val("");this.designerInstance.element.find("#"+this.designerId+"_"+t.Type+"_"+n.categoryName+"_WidgetBackgroundImageURL").val("")},n.prototype.updateBackgroundImageVisibility=function(n,t){var i=this.designerInstance.modules.propertyPanel;n?(i.updateItemDisable("color",t.Type,"ContainerAppearance","WidgetBackgroundColor",!0),i.updateItemVisibility(t.Type,"ContainerAppearance","WidgetBackgroundImageMode",!0),i.updateItemVisibility(t.Type,"ContainerAppearance","WidgetBackgroundImageSource",!0),this.containerSettings.BackgroundSettings.Image.ImageSource==="Local"?(i.updateItemVisibility(t.Type,"ContainerAppearance","WidgetBackgroundImageURL",!1),i.updateItemVisibility(t.Type,"ContainerAppearance","WidgetBackgroundImageBrowse",!0)):this.containerSettings.BackgroundSettings.Image.ImageSource==="URL"&&(i.updateItemVisibility(t.Type,"ContainerAppearance","WidgetBackgroundImageBrowse",!1),i.updateItemVisibility(t.Type,"ContainerAppearance","WidgetBackgroundImageURL",!0))):(i.updateItemDisable("color",t.Type,"ContainerAppearance","WidgetBackgroundColor",!1),i.updateItemVisibility(t.Type,"ContainerAppearance","WidgetBackgroundImageMode",!1),i.updateItemVisibility(t.Type,"ContainerAppearance","WidgetBackgroundImageSource",!1),i.updateItemVisibility(t.Type,"ContainerAppearance","WidgetBackgroundImageBrowse",!1),i.updateItemVisibility(t.Type,"ContainerAppearance","WidgetBackgroundImageURL",!1));this.containerSettings.BackgroundSettings.Image.Visibility=n;i.refreshScroller();t.backgroundInfo.ShowImage=n;this.updateControlBackground(t)},n.prototype.updateBackgroundImageMode=function(n,t){this.containerSettings.BackgroundSettings.Image.ImageMode=n;t.backgroundInfo.Mode=n;this.updateControlBackground(t)},n.prototype.updateBackgroundImageSource=function(n,t){this.containerSettings.BackgroundSettings.Image.ImageSource=n;var i=this.designerInstance.modules.propertyPanel;switch(n){case"Local":i.updateItemVisibility(t.Type,"ContainerAppearance","WidgetBackgroundImageURL",!1);i.updateItemVisibility(t.Type,"ContainerAppearance","WidgetBackgroundImageBrowse",!0);t.backgroundInfo.Image="";break;case"URL":i.updateItemVisibility(t.Type,"ContainerAppearance","WidgetBackgroundImageBrowse",!1);i.updateItemVisibility(t.Type,"ContainerAppearance","WidgetBackgroundImageURL",!0);t.backgroundInfo.Image=""}this.updateControlBackground(t)},n.prototype.updateBackgroundImageURL=function(n,t){this.containerSettings.BackgroundSettings.Image.ImageUrl=n;t.backgroundInfo.Image=n;this.updateControlBackground(t)},n.prototype.updateBackgroundColor=function(n,t){this.containerSettings.BackgroundSettings.Color=n;t.backgroundInfo.Color=n;this.updateControlBackground(t)},n.prototype.updateBackgroundTransparency=function(n,t,i){i===void 0&&(i=!0);i&&(this.containerSettings.BackgroundSettings.Transparency=n);t.backgroundInfo.Opacity=n;this.updateControlBackground(t)},n.prototype.updateBackgroundInfo=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)){var t=n.getJson();BoldBIDashboard.isNullOrUndefined(t.ContainerSettings.BackgroundSettings)||n.isBackgroundInfoNeeded&&(n.backgroundInfo.Color=t.ContainerSettings.BackgroundSettings.Color,n.backgroundInfo.Mode=t.ContainerSettings.BackgroundSettings.Image.ImageMode,n.backgroundInfo.Opacity=t.ContainerSettings.BackgroundSettings.Transparency,n.backgroundInfo.ShowImage=t.ContainerSettings.BackgroundSettings.Image.Visibility,n.backgroundInfo.Image=t.ContainerSettings.BackgroundSettings.Image.ImageSource==="URL"?t.ContainerSettings.BackgroundSettings.Image.ImageUrl:BoldBIDashboard.Dashboard.Resource.getImage(t.ContainerSettings.BackgroundSettings.Image.FilePath),this.updateControlBackground(n))}},n.prototype.updateWidgetTitleFontSize=function(n,t){BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(t.ControlHeader)||(t.ControlHeader.find(".bbi-dbrd-control-title .e-title-text").css("font-size",n),this.containerSettings.WidgetTitleFontInfo.FontSize=n,t.ControlHeader.css("height",n+WidgetHeaderFontSizeFactor.title+"px"),this.widgetHelper.updateContentContainerHeight(t))},n.prototype.updateWidgetSubTitleFontSize=function(n,t){BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(t.ControlSubHeader)||(t.ControlSubHeader.find(".bbi-dbrd-control-sub-title .e-title-text").css("font-size",n),this.containerSettings.WidgetSubTitleFontInfo.FontSize=n,t.ControlSubHeader.css("height",n+WidgetHeaderFontSizeFactor.subTitle+"px"),this.widgetHelper.updateContentContainerHeight(t))},n.prototype.updateWidgetLevelTitleFontSizeOption=function(n,t){var i=this.designerInstance.modules.propertyPanel;i.updateItemDisable("float",t.Type,"ContainerAppearance","WidgetLevelTitleFontSize",n);this.containerSettings.WidgetTitleFontInfo.AutoFontSize=n;this.widgetHelper.updateConditionBasedWidgetTitleFont(this.containerSettings.WidgetTitleFontInfo.AutoFontSize,this.containerSettings.WidgetTitleFontInfo.FontSize,t)},n.prototype.updateWidgetLevelSubTitleFontSizeOption=function(n,t){var i=this.designerInstance.modules.propertyPanel;i.updateItemDisable("float",t.Type,"ContainerAppearance","WidgetLevelSubTitleFontSize",n);this.containerSettings.WidgetSubTitleFontInfo.AutoFontSize=n;this.widgetHelper.updateConditionBasedWidgetSubTitleFont(this.containerSettings.WidgetSubTitleFontInfo.AutoFontSize,this.containerSettings.WidgetSubTitleFontInfo.FontSize,t)},n.prototype.updateFontSettings=function(n,t,i){BoldBIDashboard.isNullOrUndefined(n)||(n.name==="widgetTitleFont"?this.updateWidgetLevelTitleFontSizeOption(n.autoFontSettingsInfo.value,i):n.name==="widgetSubtitleFont"&&this.updateWidgetLevelSubTitleFontSizeOption(n.autoFontSettingsInfo.value,i))},n.prototype.updateWidgetLevelAutoPadding=function(n,t){var i=this.designerInstance.modules.propertyPanel;i.updateItemDisable("float",t.Type,"ContainerAppearance","WidgetLevelPadding",n);this.containerSettings.WidgetPaddingInfo.AutoPadding=n;t.updateControlContainerPadding();t.updateSize(t.cellInfo)},n.prototype.updateWidgetLevelPadding=function(n,t){this.containerSettings.WidgetPaddingInfo.Padding=n;t.updateControlContainerPadding();t.updateSize(t.cellInfo)},n.prototype.updatePaddingSettingVisibility=function(n){if(BoldBIDashboard.isNullOrUndefined(n))return!1;var t=n.Type.toLocaleLowerCase();return!(t==="kpicard"||t==="numbercard"||t==="listbox"||t==="combobox"||t==="rangeslider"||t==="datepicker"||t==="rangenavigator"||t==="periodoverperiod"||t==="richtexteditor"||t==="combinewidget")},n}(),InternalWidgetsTypes,TileType,LegendAlignment,LabelIntersectAction,UrlLink,ColumnUrl,LinkType,UrlLinkType,WidgetLink,LinkedWidgetList,WidgetLinkType,DimensionConditionType,ConditionalFormatType,MeasureFormatType,ColorType,PoPProperties,RangeSliderProperties,RangeSliderType,RangeSliderOrientation,ListBoxProperties,GaugeSettings,GaugeTypes,RangeValueType,GaugeRangeSettings,GaugeFontSettings,GaugeDirection,ValuePointers,TargetPointers,TicksPosition,ValueLabelPosition,ScaleLabelPosition,RangeWidth,LabelType,PrimaryValueType,SparkLineSettings,SparkLineType,RadarPolarType,AxisRange,LineStyleInformation,LineStyles,ForecastSettings,ForecastProperties,ConfidenceBandStyle,ChartColumnSettinng,ValueLabelRotations,ValueLabelPlacement,EmptyPointMode,LegendPositions,ChartSeriesShape,LegendTextOverFlow,ColorMappingType,LegendShape,SortSetting,ChartTypes,LabelOverFlowMode,DataLabel,CustomLegendType,ImageProperties,PaddingSettings,ImageMode,DataSource,ImgSource,ImageRotations,LinkProperties,LinkSetting,WidgetType,DefaultFormatType,ValueType,InternalBubbleMapReportItem,InternalBubbleScatterChartReportItem,InternalCardReportItem,InternalKPICardItem,InternalNumberCardItem,InternalCustomWidgetReportItem,InternalChartProperties,InternalChartReportItem,InternalChartHelper,InternalChoroplethMapReportItem,MapType,InternalLabelReportItem,FontWeight,FontStyle,TextDecoration,TextHorizontalAlignment,InternalListBoxReportItem,InternalRadialGaugeReportItem,ColorCustomizationProperty,InternalComboChartReportItem,InternalTextFilter,InternalValueLabelSettings,InternalResource,InternalChartTypeAndAxis,InternalLineStyleSettings,InternalCustomLegendSettings,InternalImageReportItem,InternalDatePickerReportItems,InternalPeriodComparisonItem,InternalGridColumnCustomize,InternalGridReportItem,InternalGridSummaryRowHelper,InternalGridSummaryExpressionHelper,InternalPivotViewReportItem,BoldBIDashboard,InternalRangeSliderReportItem,InternalEditColumnNames,InternalRangeNavigatorReportItem,InternalRTEReportItem,InternalCombineItem,InternalLineReportItem,InternalTabbedItem,InternalTreeMapReportItem,InternalHeatMapReportItem,__extends,InternalRadarPolarChartReportItem,InternalTrendLineWindow;window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.ContainerPropertyItem",InternalContainerPropertyItem,window);InternalWidgetsTypes=function(){function n(){}return n.getWidgetsTypes=function(){return this.Widgets},Object.defineProperty(n,"Widgets",{get:function(){return this.widgets},enumerable:!1,configurable:!0}),n.registerWidgets=function(n){try{BoldBIDashboard.isNullOrUndefined(n)||(this.widgets=this.widgets.concat(n))}catch(t){console.error("Unable to register Widgets"+t)}},n.widgets=[],n}();BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes",InternalWidgetsTypes,window);var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),ComboBoxProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ComboBoxProperties",i.EnableMultiSelection=!1,i.AllowFilter=!1,i.SelectFirstItemByDefault=!1,i.DefaultSelectedIndices="0",i.UrlLink=null,i.IsAllSelected=!1,i.ParameterFieldSelected=[],i}return __extends(t,n),t}(WidgetProperties),TextFilterProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.TextFilterProperties",i}return __extends(t,n),t}(WidgetProperties),GridProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.GridProperties",i.AllowSorting=!0,i.AllowPaging=!1,i.FitContent=!1,i.ShowTooltip=!0,i.AllowFilter=!1,i.HorizontalGridLine=!0,i.VerticalGridLine=!1,i.EnableAlternativeRowColor=!1,i.RawData=!1,i.ShowHeader=!0,i.ShowBorder=!0,i.IsAutoHeaderFontSize=!0,i.HeaderFontSize=16,i.IsAutoRowFontSize=!0,i.RowFontSize=16,i.HeaderPadding=11,i.ContentPadding=11,i.EnableDataGrouping=!0,i.GridTemplate=[],i.HeaderSettings=new HeaderSettings,i.PoPSlaveSettings=new PoPSlaveSettings,i.HeaderHeight=42,i.RowHeight=32,i.AllowTextWrap=!1,i.ColumnAlignments=[],i.AlternativeRow=new ColorProperty,i.GridValueSection=new ColorProperty,i.NewHeaderSettings=new ColorProperty,i.AlternativeRow.Foreground.Color="#000000",i.AlternativeRow.Background.Color="#f7f7f7",i.GridValueSection.Foreground.Color="#000000",i.GridValueSection.Background.Color="#ffffff",i.NewHeaderSettings.Foreground.Color="#2D3748FF",i.NewHeaderSettings.Background.Color="#F3F7FAFF",i.PageSize=100,i.DisableVirtualization=!1,i.SummaryRowSettings=new SummaryRowSettings,i}return __extends(t,n),t}(TableWidgetProperties),ColumnAlignments=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.ColumnAlignments";this.HeaderAlign=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,TextAlignment.Left);this.TextAlign=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,TextAlignment.Left);this.ColumnWidth="";this.IsColumnWidthModified=!1}return n}(),PoPSlaveSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.Grid.PoPSlaveSettings";this.PoPColumnSettings=[];this.PrimaryBackground="#CCFAFF";this.SecondaryBackground="#C0F2DC"}return n}(),PoPColumnSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.Grid.PoPColumnSettings";this.IsSlaveForPop=!0;this.PopType="Absolute Difference"}return n}(),GridColumnSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.GridColumnSetting"}return n}(),HeaderSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.HeaderSettings";this.Foreground="#2D3748FF";this.Background="#F3F7FAFF"}return n}(),ColorProperty=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.ColorProperty";this.Foreground=new ColorSet;this.Background=new ColorSet}return n}(),ColorSet=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.ColorSet";this.Color="";this.IsEdited=!1}return n}(),SummaryRowSettings=function(){function n(){this.EnableSummaryRow=!1;this.SummaryColumn=[];this.BackgroundColor=new ColorSet;this.BackgroundColor.Color="#F3F7FAFF";this.IsAutoHeight=!0;this.IsAutoPadding=!0;this.IsAutoFontSize=!0;this.Height=50;this.Padding=15;this.FontSize=12}return n}(),SummaryColumn=function(){function n(){this.SummaryRow=[]}return n}(),SummaryRow=function(){function n(){this.UniqueColumnName="";this.UniqueRowName="";this.Name="";this.Id="";this.Color="";this.SummaryType=SummaryType.SUM;this.ShowValue=!0;this.CustomExp="";this.MeasureFormat=new MeasureFormatting;this.Title=new ColorSet;this.Value=new ColorSet}return n}(),HeatMapProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMapProperties",i.CellSettings=new CellSettings,i.XAxisSettings=new AxisSettings,i.YAxisSettings=new AxisSettings,i.LegendSettings=new LegendSettings,i.ColorSettings=new ColorSettings,i.DefaultColor=new DefaultColorSet,i.SortSettings=new SortSettings,i.ColorGradientMode=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ColorGradientMode,ColorGradientMode.Table),i.EnableDrilldown=!1,i}return __extends(t,n),t}(VisualWidgetProperties),PivotViewProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotViewProperties",i.GroupBarSettings=new GroupBarSettings,i.GroupBarSettings.GroupPanelBackgroundColor.Color="#F3F7FA",i.BasicSettings=new BasicSettings,i.GrandTotalSettings=new GrandTotalSettings,i.FieldSettings=new FieldSettings,i.DrilledMembers=[],i.SelectionCellInfo=new SelectionCellInfo,i.HeaderSettings=new PivotHeaderSettings,i.ContentSettings=new ContentSettings,i.IsAutoHeaderFontSize=!0,i.HeaderFontSize=16,i.IsAutoContentFontSize=!0,i.ContentFontSize=16,i.NewHeaderSettings=new ColorProperty,i.NewHeaderSettings.Foreground.Color="#2D3748",i.NewHeaderSettings.Background.Color="#F3F7FA",i.AlignmentSettings=new PivotAlignmentSettings,i}return __extends(t,n),t}(TableWidgetProperties),DrilledMembers=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.DrilledMembers";this.Name="";this.Items=[]}return n}(),PivotHeaderSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.PivotHeaderSettings";this.Row=new HeaderColorSettings;this.Column=new HeaderColorSettings}return n}(),HeaderColorSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.HeaderColorSettings";this.Foreground="#2D3748";this.Background="#F3F7FA"}return n}(),ContentSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.ContentSettings";this.RowHeight=48;this.ColumWidth=110;this.HeaderColumWidth=250}return n}(),PivotAlignmentSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.PivotAlignmentSettings";this.RowHeader="Left";this.ColumnHeader="Left";this.Value="Right"}return n}(),GroupBarSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.GroupBarSettings";this.ShowSortIcon=!0;this.ShowFilterIcon=!0;this.ShowGroupBar=!0;this.GroupPanelBackgroundColor=new ColorSet;this.GroupPanelBackgroundColor.Color="#F3F7FA"}return n}(),BasicSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.BasicSettings";this.EnableValueSorting=!0;this.ExpandAllNode=!1;this.ShowNoDataItems=!1;this.ShowTooltip=!0;this.AllowTextWrap=!1;this.AllowColumnResize=!1;this.AllowContentToFit=!1;this.ShowValuesInRowAxis=!1;this.EnablePersistence=!1;this.HideEmptyHeaders=!1;this.EmptyCellsContent=""}return n}(),SelectionCellInfo=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.SelectionCellInfo";this.IsSelected=!1}return n}(),GrandTotalSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.GrandTotalSettings";this.ShowRowGrandTotals=!0;this.ShowColumnGrandTotals=!0;this.ShowRowSubTotals=!0;this.ShowColumnSubTotals=!0;this.RowGrandTotalText="";this.ColumnGrandTotalText=""}return n}(),FieldSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.FieldSettings";this.CustomFieldSettings=[]}return n}(),PivotViewFieldSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.PivotViewColumnSetting";this.DisplayName="";this.UniqueColumnName="";this.IsEdited=!1;this.CaptionName="";this.ShowNoDataItem=!1}return n}(),ColorSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.HeatMap";this.MinColor="";this.MaxColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0].substring(1)+"#FF"}return n}(),AxisSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMap.AxisSettings";this.AxisTitle="";this.ShowAxisLabel=!0;this.ShowAxisTitle=!0;this.InversedAxis=!1;this.OpposedAxis=!1;this.LabelIntersectAction=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LabelIntersectAction,LabelIntersectAction.Trim);this.LabelRotation=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelRotations,ValueLabelRotations.Auto);this.EnableTrim=!1;this.MaximumLabelLength=100}return n}(),LegendSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMap.LegendSettings";this.ShowLegend=!1;this.Position=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Auto)}return n}(),SortSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.HeatMap.SortSettings";this.XAxis=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortSetting,SortSetting.Auto);this.YAxis=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortSetting,SortSetting.Auto)}return n}(),CellSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMap.CellSettings";this.CellBorder=1;this.CellRadius=3;this.ShowDataLabel=!1;this.ShowTooltip=!0;this.TileType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TileType,TileType.Rect);this.LabelColor=new ColorSet;this.LabelColor.Color="#505D6F";this.XAxisLabelColor=new ColorSet;this.XAxisLabelColor.Color="#505D6F";this.YAxisLabelColor=new ColorSet;this.YAxisLabelColor.Color="#505D6F"}return n}(),ColorGradientMode;(function(n){n[n.Table="Table"]="Table";n[n.Column="Column"]="Column";n[n.Row="Row"]="Row"})(ColorGradientMode||(ColorGradientMode={})),function(n){n[n.Bubble="Bubble"]="Bubble";n[n.Rect="Rect"]="Rect"}(TileType||(TileType={})),function(n){n[n.Center="Center"]="Center";n[n.Near="Near"]="Near";n[n.Far="Far"]="Far"}(LegendAlignment||(LegendAlignment={})),function(n){n[n.None="None"]="None";n[n.Trim="Trim"]="Trim"}(LabelIntersectAction||(LabelIntersectAction={}));UrlLink=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.UrlLink";this.EnableLink=!1;this.EscapeSpecialCharacter=!1;this.EnableParameterEncryption=!1;this.PassingParameters=[];this.ColumnUrlDetails=[];this.UrlPath="";this.LinkType=LinkType.Url;this.GridUrlType=UrlLinkType.Row;this.TargetTypeInfo="_Blank";this.Height=100;this.Width=100;this.Title=""}return n}();ColumnUrl=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.ColumnUrl"}return n}(),function(n){n[n.Dashboard=0]="Dashboard";n[n.Tab=1]="Tab";n[n.Url=2]="Url"}(LinkType||(LinkType={})),function(n){n[n.Row=0]="Row";n[n.Column=1]="Column";n[n.Value=2]="Value"}(UrlLinkType||(UrlLinkType={}));WidgetLink=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.WidgetLink";this.Enable=!1;this.WidgetList=[]}return n}();LinkedWidgetList=function(){function n(){this.Widget="";this.LinkType=WidgetLinkType.Default;this.CustomIndex=""}return n}(),function(n){n[n.Default=0]="Default";n[n.Custom=1]="Custom"}(WidgetLinkType||(WidgetLinkType={}));var GridTemplate=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.gridTemplate";this.DisplayType=DisplayType.Value}return n}(),ConditionalFormatting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.ConditionalFormatting";this.TargetMeasureColumn=new Column;this.MeasureConditionType=MeasureConditionType.Equals;this.DimensionConditionType=DimensionConditionType.Equals;this.FormatType=ConditionalFormatType.Column;this.ColorStyle=ColorType.SingleColor}return n}(),Column=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.Column"}return n}(),MeasureConditionType;(function(n){n[n.Equals="Equals"]="Equals";n[n.LessThan="Less Than"]="LessThan";n[n.LessThanOrEqual="Less Than Or Equal To"]="LessThanOrEqual";n[n.GreaterThanOrEqual="Greater Than Or Equal To"]="GreaterThanOrEqual";n[n.GreaterThan="Greater Than"]="GreaterThan";n[n.NotEquals="Does Not Equal"]="NotEquals";n[n.Between="Between"]="Between"})(MeasureConditionType||(MeasureConditionType={})),function(n){n[n.Equals="Equals"]="Equals";n[n.NotEquals="Does Not Equal"]="NotEquals";n[n.Contains="Contains"]="Contains";n[n.NotContains="Does Not Contains"]="NotContains";n[n.StartsWith="Starts With"]="StartsWith";n[n.EndsWith="Ends With"]="EndsWith"}(DimensionConditionType||(DimensionConditionType={})),function(n){n[n.Column="Column"]="Column";n[n.Row="Row"]="Row";n[n.Indication="Indication"]="Indication"}(ConditionalFormatType||(ConditionalFormatType={})),function(n){n[n.Number="Number"]="Number";n[n.Currency="Currency"]="Currency";n[n.Percentage="Percentage"]="Percentage"}(MeasureFormatType||(MeasureFormatType={})),function(n){n[n.SingleColor="Single Color"]="SingleColor";n[n.GradientColor="Gradient Color"]="GradientColor"}(ColorType||(ColorType={}));var Styles=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.Styles"}return n}(),FontFormats=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.FontFormats"}return n}(),TreeMapProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.TreeMapProperties",i.ShowLegend=!1,i.ShowValueLabel=!1,i.EnableDrilldown=!1,i.ShowTooltip=!0,i.IsCustomRange=null,i.SaturatedColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0].substring(1)+"#FF",i.MaxColor="#FBCB43FF",i.MidColor="#E57368FF",i.MinColor="#77A7FBFF",i.LabelColor="#1E1E1E",i.UrlLink=new UrlLink,i.DefaultColor=new DefaultColorSet,i}return __extends(t,n),t}(VisualWidgetProperties),CustomWidgetProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.CustomWidgetProperties",i.UrlLink=new UrlLink,i.CustomProperties=[],i}return __extends(t,n),t}(VisualWidgetProperties),CustomProperty=function(){function n(){}return n}(),MapsCommonProp=function(n){function t(t){var i=n.call(this,t)||this;return i.ShapeData="WorldMap_Countries",i.ShapePropertyPath="name",i.ShapeType="Country",i}return __extends(t,n),t}(VisualWidgetProperties),BubbleMapProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleMapProperties",i.BubbleColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0].substring(1)+"#FF",i}return __extends(t,n),t}(MapsCommonProp),ChoroplethMapProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChoroplethMapProperties",i.ShowLegend=!1,i.IsPaletteColor=!0,i.MaxColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0].substring(1)+"#FF",i.MinColor="#fae8eaFF",i}return __extends(t,n),t}(MapsCommonProp),MapProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.MapProperties",i.ShowLegend=!1,i.ShowLegendTitle=!0,i.LegendTitle="",i.ShowTooltip=!0,i.IsPaletteColor=!0,i.MaxColor="#F6727FFF",i.MinColor="#FFC2D8FF",i.UrlLink=new UrlLink,i.MapType="Choropleth",i.MarkerShape="Balloon",i.MarkerShapeColor="#494ca2",i.ShowLabel=!1,i.ImageUrl=null,i.EnableColorSettings=!1,i.MarkerWidth=10,i.MarkerHeight=15,i.IsEnableDrillDown=!1,i.LegendPosition="Top",i.ImageSource="Local",i.ImageName=null,i.URLPattern="{0}",i.ImageSrc=null,i.ImageLocalUrl=null,i.MarkerCustomization=new MarkerCustomizeSettings,i.EnableMultiSelection=!1,i.DefaultColor=new DefaultColorSet,i.LabelColor=new ColorSet,i.LabelColor.Color="#000000",i.LegendType="Layers",i.DefaultMarkerZoom=!1,i}return __extends(t,n),t}(MapsCommonProp),MarkerCustomizeSettings=function(){function n(){this.MarkerShape="";this.MarkerImage=null;this.MarkerColor="";this.MarkerHeight=0;this.MarkerWidth=0;this.DefaultImageUrl=null;this.DefaultMarkerColor="#494ca2";this.DefaultMarkerHeight=15;this.DefaultMarkerWidth=10;this.DefaultMarkerShape="Balloon"}return n}(),BingMapProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BingMapProperties",i.MapType="r",i.ShowZoomIcon=!1,i.ShowTooltip=!0,i.DisableZoomAndPan=!1,i.ShapeType="CountryRegion",i.MapShape="Choropleth",i.MarkerShape="Round",i.MarkerShapeColor="#494ca2",i.MarkerSize=14,i.MarkerImage="Local",i.MarkerImageUrl=null,i.MarkerUrlPattern="{0}",i.MarkerLocalImageName=null,i.MarkerLocalImageUrl=null,i.DefaultColor=new DefaultColorSet,i.DefaultColor.Color="#F6727F",i.MarkerCustomization=new MarkerCustomizeSettings,i.UrlLink=new UrlLink,i.InitialZoomState="",i}return __extends(t,n),t}(VisualWidgetProperties),LabelProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.LabelProperties",i.Name="Label1",i.LineCollection=[],i.LabelBackgroundColor="#ffffff",i}return __extends(t,n),t}(WidgetProperties),LineProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.LineProperties";this.TextCollections=[];this.LineStyleProperties=new LineStyleProperties}return n}(),TextCollectionProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.TextCollectionProperties";this.Text=[]}return n}(),TextProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.TextProperties";this.Content="";this.TextStyle=new TextStyleProperties}return n}(),TextStyleProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.TextStyleProperties";this.FontSize="10px";this.FontFamily="Arial";this.FontColor="Black";this.FontStyle="Normal";this.TextDecoration="Normal";this.FontWeight="Normal";this.TextHighlightColor="#f5ea14"}return n}(),LineStyleProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.LineStyleProperties";this.LineTextAlignment="Left"}return n}(),DatePickerProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.DatePickerProperties",i.LimitDates=!0,i.Type=DatePickerType.Single,i.HighlightAvailableDates=!1,i.UrlLink=null,i.ShowLatestDate=!1,i.EnableFixedCalendarSelection=!1,i}return __extends(t,n),t}(WidgetProperties),DatePickerType;(function(n){n[n.Single=0]="Single";n[n.Range=1]="Range"})(DatePickerType||(DatePickerType={}));PoPProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PoPProperties",i.FilterSettings.ActAsMasterWidget=!0,i.FilterSettings.IgnoreFilterActions=!0,i.UrlLink=null,i}return __extends(t,n),t}(WidgetProperties);RangeSliderProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RangeSliderProperties",i.Type=RangeSliderType.Range,i.Orientation=RangeSliderOrientation.Auto,i.UrlLink=null,i.LabelColor=new ColorSet,i.SliderColor=new ColorSet,i.LabelColor.Color="#505D6F",i.SliderColor.Color=BoldBIDashboard.DashboardUtil.defaultColorPalette[0],i}return __extends(t,n),t}(WidgetProperties),function(n){n[n.MinRange=0]="MinRange";n[n.Range=1]="Range"}(RangeSliderType||(RangeSliderType={})),function(n){n[n.Horizontal=0]="Horizontal";n[n.Vertical=1]="Vertical";n[n.Auto=2]="Auto"}(RangeSliderOrientation||(RangeSliderOrientation={}));ListBoxProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ListBoxProperties",i.EnableMultiSelection=!1,i.UrlLink=null,i}return __extends(t,n),t}(WidgetProperties);GaugeSettings=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.GaugeProperties",i.RangeColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0],i.ScaleColor="#E0E0E0",i.Direction=GaugeDirection.HighIsGood,i.MinValue=0,i.MaxValue=100,i.CustomTarget=70,i.RangeCollection=[new GaugeRangeSettings(0,33,"#FF6C40","Range-1",""),new GaugeRangeSettings(33,66,"#FFE700","Range-2",""),new GaugeRangeSettings(66,100,"#2CD9C5","Range-3","")],i.RangeValueType=RangeValueType.DefaultColor,i.RangeLabelType=RangeValueType.DefaultColor,i.GaugeType=GaugeTypes.HorseShoe,i.RangeWidth=RangeWidth.Medium,i.TicksPosition=TicksPosition.Outside,i.ValuePointer=ValuePointers.RangePointer,i.TargetPointer=TargetPointers.InvertedTriangle,i.ValueLabelPosition=ValueLabelPosition.Inside,i.ScaleLabelPosition=ScaleLabelPosition.Outside,i.ShowValueLabel=!0,i.ShowScaleLabel=!0,i.ShowActualValue=!0,i.ShowDifferenceValue=!0,i.ShowTicks=!1,i.EnableAnimation=!1,i.ShowTooltip=!0,i.TicksHeight=5,i.TicksWidth=1,i.ScaleWidth=40,i.ShowRange=!1,i.NeedlePointerHeight=60,i.LabelType=LabelType.ValueLabel,i.TargetPointerColor="#424242",i.NeedlePointerColor="#505D6F",i.BackgroundColor="transparent",i.ValueColor="#505D6F",i.TitleColor="#000000",i.LabelColor="#505D6F",i.PercentValueColor="#000000",i.PercentValueSize=15,i.HighColor="#2CD9C5",i.LowColor="#FF6C40",i.MediumColor="#FFE700",i.IsCustomRange=!1,i.DefaultColor=new DefaultColorSet,i.GaugeFontSettings=new GaugeFontSettings,i}return __extends(t,n),t}(VisualWidgetProperties),function(n){n[n.HalfRadialGauge="Half Circle"]="HalfRadialGauge";n[n.HorseShoe="Horse Shoe"]="HorseShoe";n[n.FullRadialGauge="Full Circle"]="FullRadialGauge";n[n.Auto="Auto"]="Auto"}(GaugeTypes||(GaugeTypes={})),function(n){n[n.DefaultColor="Default Color"]="DefaultColor";n[n.RangeColor="Range Color"]="RangeColor"}(RangeValueType||(RangeValueType={}));GaugeRangeSettings=function(){function n(n,t,i,r,u){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Gauge.GaugeRangeSettings";this.Start=n;this.End=t;this.Color=i;this.Name=r;this.Label=u}return n}();GaugeFontSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Gauge.GaugeFontSettings";this.IsAutoScaleLabelFontSize=!0;this.ScaleLabelFontSize=12;this.IsAutoActualValueFontSize=!0;this.ActualValueFontSize=16;this.IsAutoDifferenceValueFontSize=!0;this.DifferenceValueFontSize=10;this.IsAutoSeriesTitleFontSize=!0;this.SeriesTitleFontSize=10}return n}(),function(n){n[n.HighIsGood=0]="HighIsGood";n[n.LowIsGood=1]="LowIsGood"}(GaugeDirection||(GaugeDirection={})),function(n){n[n.RangePointer="Range Pointer"]="RangePointer";n[n.NeedlePointer="Needle Pointer"]="NeedlePointer";n[n.RangeWithNeedle="Range with Needle"]="RangeWithNeedle"}(ValuePointers||(ValuePointers={})),function(n){n[n.Triangle="Triangle"]="Triangle";n[n.InvertedTriangle="Inverted Triangle"]="InvertedTriangle";n[n.Line="Line"]="Line"}(TargetPointers||(TargetPointers={})),function(n){n[n.Inside=0]="Inside";n[n.Outside=1]="Outside"}(TicksPosition||(TicksPosition={})),function(n){n[n.Inside=0]="Inside";n[n.Outside=1]="Outside"}(ValueLabelPosition||(ValueLabelPosition={})),function(n){n[n.Inside=0]="Inside";n[n.Outside=1]="Outside"}(ScaleLabelPosition||(ScaleLabelPosition={})),function(n){n[n.Thin=0]="Thin";n[n.Medium=1]="Medium";n[n.Thick=2]="Thick"}(RangeWidth||(RangeWidth={})),function(n){n[n.ValueLabel="Value Label"]="ValueLabel";n[n.RangeLabel="Range Label"]="RangeLabel"}(LabelType||(LabelType={}));var VirtualScrollSettings=function(){function n(){this.PageSize=100;this.StartIndex=1;this.FieldLastRecord=[]}return n}(),CardProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.CardProperties",i.PrimaryValueType=PrimaryValueType.PercentOfTarget,i.SecondaryValueType="Variation",i.ActualValueForeground="#686262",i.TitleSettings=new TitleSetting,i.SubTitleSettings=new SubTitleSetting,i.CustomRangeSettings=new CardCustomRangeSetting,i.ActualValuePrefix="",i.TargetValuePrefix="",i.Direction=!0,i.HasCustomTitle=!1,i.ValueAlignment=TextAlignment.Right,i.ShowIndicatorOnly=!1,i.EnableCompactView=!1,i.ShowActualValue=!0,i.ShowSecondaryValue=!0,i.ShowPrimaryValue=!0,i.ShowIndicator=!0,i.UniformSizing=!1,i.SparklineSettings=new SparkLineSettings,i.ActualValueTextAlignment=TextAlignment.Right,i.AdditionalValueAlignment=TextAlignment.Right,i.SecondaryValueAlignment=TextAlignment.Right,i.PrimaryValueAlignment=TextAlignment.Right,i}return __extends(t,n),t}(WidgetProperties),TitleSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.TitleSetting";this.Visibility=!0;this.Alignment=TextAlignment.Left;this.Color="#686262"}return n}(),SubTitleSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.SubTitleSetting";this.Visibility=!1;this.Color="#686262"}return n}(),CardCustomRangeSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.CardCustomRangeSetting";this.Type=CustomRangeType.Absolute;this.Ranges=[]}return n}(),CustomRangeType;(function(n){n[n.Absolute=0]="Absolute";n[n.Percent=1]="Percent"})(CustomRangeType||(CustomRangeType={})),function(n){n[n.AbsoluteDifference="Absolute Difference"]="AbsoluteDifference";n[n.PercentOfDifference="Percent of Difference"]="PercentOfDifference";n[n.PercentOfTarget="Percent of Target"]="PercentOfTarget";n[n.ActualValue="Actual Value"]="ActualValue";n[n.PercentOfChange="Percent of Change"]="PercentOfChange"}(PrimaryValueType||(PrimaryValueType={}));SparkLineSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.SparkLineSettings";this.LowValueColor="#1F497D";this.HighValueColor="#FFC000";this.ShowMarker=!0;this.Opacity=1;this.Type=SparkLineType.Line}return n}(),function(n){n[n.Line=0]="Line";n[n.Area=1]="Area";n[n.Column=2]="Column"}(SparkLineType||(SparkLineType={}));var CardCustomRange=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.CardCustomRange"}return n}(),KPICardProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICardProperties",i.TitleSettings=new KPICardTitleSettings,i.IndicatorSettings=new IndicatorSettings,i.KPIValueSettings=new KPIValueSettings,i.LeftValueSettings=new ValueSettings(!0),i.RightValueSettings=new ValueSettings(!1),i.LeftCaptionSettings=new CaptionSettings,i.RightCaptionSettings=new CaptionSettings,i.ImageSettings=new CardImageSettings,i.BackgroundSettings=new BackgroundSettings,i.SparklineSettings=new SparklineSettings,i.ColorSettings=new KPICardColorSettings,i.Direction="High is Good",i.ShowTooltip=!0,i.SeparatorSettings=new SeparatorSettings,i.FormatSettings=new MeasureFormatting,i.UrlLink=new UrlLink,i.AnimationSettings=new AnimationSettings,i.SeriesSettings=new SeriesSettings,i.IsFixedLayout=!1,i.ResponsiveMargin=!1,i}return __extends(t,n),t}(VisualWidgetProperties),KPICardTitleSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.KPICardTitleSettings";this.Visibility=!0;this.Color="#505D6FFF";this.AutoFontSize=!0;this.FontSize=16}return n}(),IndicatorSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.IndicatorSettings";this.LowValueType="PointerDown";this.HighValueType="PointerUp";this.WarningType="Round";this.Visibility=!0;this.Color="Green";this.AutoFontSize=!0;this.FontSize=24;this.ColorType="Direction Color";this.Placement="KPI Value";this.Position="Left"}return n}(),KPIValueSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.KPIValueSettings";this.ValueType="Absolute Difference";this.Visibility=!0;this.Color="#505D6FFF";this.AutoFontSize=!0;this.FontSize=64;this.ColorType="Custom Color"}return n}(),ValueSettings=function(){function n(n){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.ValueSettings";this.AutoFontSize=!0;this.FontSize=16;this.Color="#505D6FFF";this.Visibility=!0;this.ValueType=n?"Actual Value":"Target Value";this.ColorType="Custom Color"}return n}(),CaptionSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.CaptionSettings";this.Color="#505D6FFF";this.AutoFontSize=!0;this.FontSize=16;this.Visibility=!0;this.ColorType="Custom Color"}return n}(),CardImageSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.CardImageSettings";this.ImageMode="Uniform";this.ImageUrl="";this.ImageSource="Local";this.URLPattern="{0}";this.Visibility=!1;this.FilePath="";this.ImageName="";this.ImagePosition="Left"}return n}(),BackgroundSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.BackgroundColorSettings";this.Color="#ffffffff";this.PlotArea="KPI Background";this.Image=new CardImageSettings;this.Transparency=.5}return n}(),SparklineSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.SparklineSettings";this.Fill="#0d9948FF";this.Visibility=!0;this.ColorType="Direction Color";this.Opacity=1}return n}(),KPICardColorSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.KPICardColorSettings";this.HighValueColor="#2CD9C5FF";this.LowValueColor="#FF6C40FF";this.NeutralColor="#e5ed00FF";this.Direction="High is Good"}return n}(),SeparatorSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.SeparatorSettings";this.Color="#9AA1A9FF"}return n}(),ComboChartProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ComboChartProperties",i.ChartType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ChartTypes,ChartTypes.ComboChart),i.EnableAnimation=!1,i.ShowLegend=!0,i.ShowTooltip=!0,i.IsAutoLegendFontSize=!0,i.LegendFontSize=16,i.DefaultColors=[],i.ShowValueLabels=!1,i.EnableSmoothScroll=!1,i.ValueLabelRotation=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelRotations,ValueLabelRotations.None),i.LegendPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Auto),i.LegendTitle="",i.IsAutoLegendTitleFontSize=!0,i.LegendTitleFontSize=16,i.ShowValueLabelSuffix=!1,i.ValueLabelSuffix="",i.PrimaryValueGridLines=!0,i.SecondaryValueGridLines=!1,i.CategoryGridLines=!1,i.ShowMarker=!0,i.ShowNoDataItem=!1,i.Axis=new Axis,i.DataLabel=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DataLabel,DataLabel.Percentage),i.IsEnableDrillDown=!1,i.DisplayNames=[],i.IsBasicChartType=!1,i.CustomLegendBtnVisibilty=!1,i.CustomLegendInfo=new CustomLegendSettings,i.CustomValueLabels=[],i.IsCustomLegend=!1,i.IsColorPaletteCategoryVisible=!1,i.IsDefaultColorPalette=!0,i.ColorPaletteModel=[],i.TrendLineSettings=[],i.ChartSeriesTypeInfo=[],i.LineStyleInfo=null,i.PrimaryAxisRange=new AxisRange,i.SecondaryAxisRange=new AxisRange,i.ForecastProperties=new ForecastProperties,i.LegendShape=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendShape,LegendShape.Circle),i.ColumnSpacing=.2,i.ColumnWidth=.7,i.ValueLabel=new ColorSet,i.LegendLabel=new ColorSet,i.AxisTitle=new ColorSet,i.AxisLabel=new ColorSet,i.ValueLabel.Color="#000000",i.LegendLabel.Color="#000000",i.AxisTitle.Color="#000000",i.AxisLabel.Color="#000000",i.EnableMultiSelection=!1,i.IsAutoValueLabelFontSize=!0,i.ValueLabelFontSize=16,i.ValueLabelPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelPlacement,ValueLabelPlacement.Auto),i}return __extends(t,n),t}(VisualWidgetProperties),ChartSeriesType=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ChartSeriesType";this.UniqueColumnName="";this.ChartType="";this.IsSecondaryAxis=!1;this.FieldName=""}return n}(),BubbleScatterChartProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleScatterChartProperties",i.EnableAnimation=!1,i.ShowLegend=!0,i.ShowTooltip=!0,i.LegendPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Auto),i.ChartSeriesType=[],i.CustomLegendInfo=new CustomLegendSettings,i.IsCustomLegend=!1,i.ShowValueLabel=!1,i.PrimaryValueGridLines=!0,i.CategoryAxisGridLines=!1,i.DefaultColors=[],i.ColorPaletteModel=[],i.UrlLink=new UrlLink,i.CategoryAxisSettings=new BubbleScatterCategoryAxis,i.PrimaryValueAxisSettings=new BubbleScatterPrimaryValueAxis,i.IsDefaultColorPalette=!0,i}return __extends(t,n),t}(VisualWidgetProperties),RadarPolarChartProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RadarPolarChartProperties",i.DrawType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DrawType,DrawType.Polar),i.ChartType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(RadarPolarType,RadarPolarType.Area),i.EnableAnimation=!1,i.ShowMarker=!0,i.ShowLegend=!0,i.ShowTooltip=!0,i.LegendPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPosition,LegendPosition.Bottom),i.EditLegend=new CustomLegendSettings,i.ShowValueLabel=!1,i.UrlLink=new UrlLink,i.Inversed=!1,i.PrimaryAxisRange=new AxisRange,i.CustomLegendBtnVisibilty=!1,i.IsCustomLegend=!1,i.IsDefaultColorPalette=!0,i.ColorPaletteModel=[],i.DefaultColors=[],i.CategoryAxisSettings=new RadarPolarCategoryAxis,i.PrimaryValueAxisSettings=new RadarPolarPrimaryValueAxis,i.PrimaryValueGridLines=!0,i.CategoryAxisGridLines=!0,i.LegendShape=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendShape,LegendShape.Circle),i}return __extends(t,n),t}(WidgetProperties),DrawType;(function(n){n[n.Radar="Radar"]="Radar";n[n.Polar="Polar"]="Polar"})(DrawType||(DrawType={}));var RadarPolarPrimaryValueAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RadarPolarPrimaryValueAxis";this.IsEnabled=!0;this.InverseAxis=!1}return n}(),RadarPolarCategoryAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RadarPolarCategoryAxis";this.IsEnabled=!0;this.InverseAxis=!1}return n}(),BubbleScatterCategoryAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleScatter.BubbleScatterCategoryAxis";this.IsEnabled=!0;this.IsEnableTitle=!0;this.Title="";this.LabelRotation=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelRotations,ValueLabelRotations.Auto);this.IsCustomTitle=!1;this.Format=new MeasureFormatting}return n}(),BubbleScatterPrimaryValueAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleScatter.BubbleScatterPrimaryValueAxis";this.IsEnabled=!0;this.IsEnableTitle=!0;this.Title="";this.IsCustomTitle=!1;this.OpposedAxis=!1;this.Format=new MeasureFormatting}return n}(),LegendPosition;(function(n){n[n.Bottom="Bottom"]="Bottom";n[n.Right="Right"]="Right";n[n.Left="Left"]="Left";n[n.Top="Top"]="Top"})(LegendPosition||(LegendPosition={})),function(n){n[n.Line="Line"]="Line";n[n.Column="Column"]="Column";n[n.Area="Area"]="Area";n[n.Spline="Spline"]="Spline";n[n.Scatter="Scatter"]="Scatter";n[n.StackedArea="Stacked Area"]="StackedArea";n[n.Stackedcolumn="Stacked Column"]="Stackedcolumn"}(RadarPolarType||(RadarPolarType={}));var NumberCardProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCardProperties",i.TitleSettings=new NumberCardTitleSettings,i.MeasureSettings=new MeasureSettings,i.ShowTooltip=!0,i.ImageSettings=new NumberCardImageSettings,i.BackgroundSettings=new NumberCardBackgroundSettings,i.SparklineSettings=new NumberCardSparklineSettings,i.FormatSettings=new MeasureFormatting,i.UrlLink=new UrlLink,i.AnimationSettings=new AnimationSettings,i.SeriesSettings=new SeriesSettings,i.AlignmentSettings=new AlignmentSettings,i.ResponsiveMargin=!1,i}return __extends(t,n),t}(VisualWidgetProperties),AlignmentSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.AlignmentSettings";this.HorizontalAlignment="Left";this.VerticalAlignment="Center";this.AutoFontSize=!1;this.ScalingFactor=1}return n}(),SeriesSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.SeriesSettings";this.IsFixedRowsAndColumns=!1;this.RowCount=1;this.ColumnCount=1}return n}(),AnimationSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.AnimationSettings";this.EnableAnimation=!1;this.AnimationDuration=1500}return n}(),NumberCardTitleSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCard.NumberCardTitleSettings";this.Visibility=!0;this.AutoFontSize=!0;this.Color="#505D6FFF";this.FontSize=16;this.Text="Card Title";this.Position="Bottom";this.EnableWrap=!1}return n}(),MeasureSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCard.MeasureSettings";this.AutoFontSize=!0;this.FontSize=64;this.Color="#505D6FFF";this.Visibility=!0;this.EnableAnimation=!1}return n}(),NumberCardImageSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCard.NumberCardImageSettings";this.ImageMode="Uniform";this.ImageUrl="";this.ImageSource="Local";this.URLPattern="{0}";this.Visibility=!1;this.FilePath="";this.ImageName="";this.ImagePosition="Right"}return n}(),NumberCardBackgroundSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCard.NumberCardBackgroundSettings";this.Color="#ffffffff";this.PlotArea="Card Background";this.Image=new CardImageSettings;this.Transparency=.5}return n}(),NumberCardSparklineSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCard.SparklineSettings";this.Fill="#F29D38FF";this.Visibility=!0;this.Opacity=1}return n}(),RTEProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RTEProperties",i.Value="",i.VerticalAlign=null,i}return __extends(t,n),t}(WidgetProperties),DateBucketProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.DateBucketProperties",i.selectedValue="Date",i.ConfiguredWidgetList=[],i}return __extends(t,n),t}(WidgetProperties),CombineProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.CombineProperties",i.DraggedWidgetList=[],i.FilterSettings.IgnoreFilterActions=!0,i}return __extends(t,n),t}(VisualWidgetProperties),LineWidgetProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.LineWidgetProperties",i.IsHorizontal=!0,i.Thickness=2,i.Padding=10,i.LineType="Solid",i.Color="#dbdbdb",i.FilterSettings.IgnoreFilterActions=!0,i}return __extends(t,n),t}(WidgetProperties),ChartProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties",i.ChartType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ChartTypes,ChartTypes.Column),i.EnableAnimation=!1,i.Radius=.4,i.LineWidth=1,i.ShowLegend=!0,i.ShowLegendAsDropDown=!1,i.IsLegendDropdownAllSelected=!0,i.UnselectedLegendList=[],i.ShowTooltip=!0,i.IsAutoLegendFontSize=!0,i.LegendFontSize=16,i.Chartsize=.8,i.DefaultColors=[],i.ShowValueLabels=!1,i.EnableSmoothScroll=!1,i.ValueLabelRotation=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelRotations,ValueLabelRotations.None),i.LegendPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Auto),i.LegendTitle="",i.LegendTextOverFlow=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendTextOverFlow,LegendTextOverFlow.None),i.ColorMappingType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ColorMappingType,ColorMappingType.Data),i.LegendTextWidth=100,i.IsAutoLegendTitleFontSize=!0,i.LegendTitleFontSize=16,i.ShowValueLabelSuffix=!1,i.ValueLabelSuffix="",i.PrimaryValueGridLines=!0,i.SecondaryValueGridLines=!1,i.CategoryGridLines=!1,i.ShowMarker=!0,i.ShowNoDataItem=!1,i.Axis=new Axis,i.DataLabel=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DataLabel,DataLabel.Category),i.IsEnableDrillDown=!1,i.DisplayNames=[],i.IsBasicChartType=!1,i.CustomLegendBtnVisibilty=!1,i.CustomLegendInfo=new CustomLegendSettings,i.CustomValueLabels=[],i.IsCustomLegend=!1,i.IsColorPaletteCategoryVisible=!1,i.IsDefaultColorPalette=!0,i.ColorPaletteModel=[],i.IndexColorPalette=[],i.TrendLineSettings=[],i.ChartSeriesTypeInfo=[],i.LineStyleInfo=null,i.PrimaryAxisRange=new AxisRange,i.SecondaryAxisRange=new AxisRange,i.ForecastProperties=new ForecastProperties,i.LegendShape=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendShape,LegendShape.Circle),i.ColumnSpacing=.2,i.ColumnWidth=.7,i.ValueLabel=new ColorSet,i.LegendLabel=new ColorSet,i.AxisTitle=new ColorSet,i.AxisLabel=new ColorSet,i.ValueLabel.Color="#000000",i.LegendLabel.Color="#000000",i.AxisTitle.Color="#000000",i.AxisLabel.Color="#000000",i.EnableMultiSelection=!1,i.IsAutoValueLabelFontSize=!0,i.ValueLabelFontSize=16,i.IsInversed=!1,i.ValueLabelPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelPlacement,ValueLabelPlacement.Auto),i.EmptyPointMode=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(EmptyPointMode,EmptyPointMode.Gap),i.PageSize=200,i.ShowValueInTooltip=!1,i.FixedSeriesSettings=new SeriesSettings,i}return __extends(t,n),t}(VisualWidgetProperties),ChartLegendDropdownList=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ChartLegendDropdownList";this.SeriesUniqueID="";this.SeriesLegendName=""}return n}(),ColorPaletteModelSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ColorPaletteModelSetting";this.Name="";this.Value="";this.IsModified=!1;this.Id="";this.DefaultValue=""}return n}(),TrendLineSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.TrendLineSettings";this.CustomName="";this.LineColor="#77A7FB";this.LineStyle="";this.LineType="Linear";this.LineVisible=!0;this.LineWidth=1;this.Order=0;this.Name="";this.UniqueName="";this.Id=""}return n}(),CustomLegendSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.CustomLegendSettings";this.Type=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CustomLegendType,CustomLegendType.Individual);this.Format="{{:Row}}({{:Value}})";this.SingleValues=[];this.GroupValues=new CustomLegendsForGroup}return n}(),CustomValueLabels=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ValueLabels";this.Name="";this.IsEnabled=!1;this.UniqueColumnName=""}return n}(),ScatterChartSeriesType=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleScatter.ScatterSeriesType";this.Name="";this.Shape=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ChartSeriesShape,ChartSeriesShape.Circle);this.UniqueColumnName=""}return n}(),CustomLegendsForIndividual=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.CustomLegendsForIndividual";this.Name="";this.Caption="";this.Value="";this.IsModified=!1;this.Id=""}return n}(),CustomLegendsForGroup=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.CustomLegendsForGroup";this.Values=[];this.Series=[]}return n}(),Axis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.Axis";this.CategoryAxis=new CategoryAxis;this.PrimaryValueAxis=new PrimaryValueAxis;this.SecondaryValueAxis=new SecondaryValueAxis}return n}(),CategoryAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.CategoryAxis";this.IsEnabled=!0;this.LabelOverflowMode=LabelOverFlowMode.Auto.toString();this.LabelRotation="Auto";this.ShowTitle=!0;this.Title="";this.IsCustomTitle=!1;this.MaxLabelWidth=100;this.EnableTrim=!1;this.IsAutoCategoryAxisLabelFontSize=!0;this.CategoryAxisLabelFontSize=16;this.IsAutoCategoryAxisTitleFontSize=!0;this.CategoryAxisTitleFontSize=16;this.IsAutoInterval=!0;this.Interval=1}return n}(),PrimaryValueAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.PrimaryValueAxis";this.IsEnabled=!0;this.ShowTitle=!0;this.Title="";this.IsCustomTitle=!1;this.AxisType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Linear);this.Format=new MeasureFormatting;this.IsAutoPrimaryAxisLabelFontSize=!0;this.PrimaryLabelFontSize=16;this.IsAutoPrimaryAxisTitleFontSize=!0;this.PrimaryTitleFontSize=16;this.InverseAxis=!1}return n}(),SecondaryValueAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.SecondaryValueAxis";this.IsEnabled=!0;this.ShowTitle=!0;this.Title="";this.IsCustomTitle=!1;this.AxisType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Linear);this.Format=new MeasureFormatting;this.IsAutoSecondaryAxisLabelFontSize=!0;this.SecondaryLabelFontSize=16;this.IsAutoSecondaryAxisTitleFontSize=!0;this.SecondaryTitleFontSize=16;this.InverseAxis=!1}return n}(),AxisType;(function(n){n[n.Linear="Linear"]="Linear";n[n.Logarithmic="Logarithmic"]="Logarithmic"})(AxisType||(AxisType={}));AxisRange=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.Chart.AxisRange";this.MinValue="";this.MaxValue="";this.Interval=""}return n}();LineStyleInformation=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.LineStyleInformation";this.Series="Default";this.LineStyle=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LineStyles,LineStyles.Solid);this.LineWidth=1}return n}(),function(n){n[n.Solid="Solid"]="Solid";n[n.Dot="Dot"]="Dot";n[n.Dash="Dash"]="Dash";n[n.DotDash="DotDash"]="DotDash";n[n.LongDash="LongDash"]="LongDash";n[n.LongDashDotDot="LongDashDotDot"]="LongDashDotDot"}(LineStyles||(LineStyles={}));ForecastSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ForecastSettings";this.IsEnable=!1;this.Length=10;this.ConfidenceInterval=95;this.Seasonality=0}return n}();ForecastProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ForecastProperties";this.ForecastSettings=new ForecastSettings;this.ShowForecast=!0;this.ForecastColor="#000000";this.ShowConfidence=!0;this.ConfidenceColor="#f5e4e4";this.LegendText="Upper and Lower Bounds";this.ConfidenceBandStyle=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ConfidenceBandStyle,ConfidenceBandStyle.Fill)}return n}(),function(n){n[n.Line="Line"]="Line";n[n.Fill="Fill"]="Fill";n[n.Dot="Dot"]="Dot"}(ConfidenceBandStyle||(ConfidenceBandStyle={}));ChartColumnSettinng=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ChartColumnSetting"}return n}(),function(n){n[n.Auto="Auto"]="Auto";n[n.None="None"]="None";n[n.Plus45="+45"]="Plus45";n[n.Minus45="-45"]="Minus45";n[n.Plus90="+90"]="Plus90";n[n.Minus90="-90"]="Minus90"}(ValueLabelRotations||(ValueLabelRotations={})),function(n){n[n.Auto="Auto"]="Auto";n[n.Bottom="Bottom"]="Bottom";n[n.Middle="Middle"]="Middle";n[n.Top="Top"]="Top"}(ValueLabelPlacement||(ValueLabelPlacement={})),function(n){n[n.Gap="Gap"]="Gap";n[n.Zero="Zero"]="Zero";n[n.Average="Average"]="Average";n[n.Connect="Connect"]="Connect"}(EmptyPointMode||(EmptyPointMode={})),function(n){n[n.Auto="Auto"]="Auto";n[n.Bottom="Bottom"]="Bottom";n[n.Right="Right"]="Right";n[n.Left="Left"]="Left";n[n.Top="Top"]="Top"}(LegendPositions||(LegendPositions={})),function(n){n[n.Circle="Circle"]="Circle";n[n.Triangle="Triangle"]="Triangle";n[n.Rectangle="Rectangle"]="Rectangle";n[n.Diamond="Diamond"]="Diamond"}(ChartSeriesShape||(ChartSeriesShape={})),function(n){n[n.None="None"]="None";n[n.Trim="Trim"]="Trim";n[n.Wrap="Wrap"]="Wrap";n[n.WrapAndTrim="WrapAndTrim"]="WrapAndTrim"}(LegendTextOverFlow||(LegendTextOverFlow={})),function(n){n[n.Data="Data"]="Data";n[n.Index="Index"]="Index"}(ColorMappingType||(ColorMappingType={})),function(n){n[n.SeriesType="Series Type"]="SeriesType";n[n.Circle="Circle"]="Circle"}(LegendShape||(LegendShape={})),function(n){n[n.Auto="Auto"]="Auto";n[n.Ascending="Ascending"]="Ascending";n[n.Descending="Descending"]="Descending"}(SortSetting||(SortSetting={})),function(n){n[n.Column="Column"]="Column";n[n.Bar="Bar"]="Bar";n[n.Line="Line"]="Line";n[n.Area="Area"]="Area";n[n.Spline="Spline"]="Spline";n[n.SplineArea="Spline Area"]="SplineArea";n[n.StackedColumn="Stacked Column"]="StackedColumn";n[n.StackedBar="Stacked Bar"]="StackedBar";n[n.StackedArea="Stacked Area"]="StackedArea";n[n.PercentStackedColumn="100% Stacked Column"]="PercentStackedColumn";n[n.PercentStackedBar="100% Stacked Bar"]="PercentStackedBar";n[n.PercentStackedArea="100% Stacked Area"]="PercentStackedArea";n[n.Pie="Pie"]="Pie";n[n.Doughnut="Doughnut"]="Doughnut";n[n.Pyramid="Pyramid"]="Pyramid";n[n.Funnel="Funnel"]="Funnel";n[n.ComboChart="Combo Chart"]="ComboChart";n[n.Bubble="Bubble"]="Bubble";n[n.Scatter="Scatter"]="Scatter"}(ChartTypes||(ChartTypes={})),function(n){n[n.Trim="Trim"]="Trim";n[n.Hide="Hide"]="Hide";n[n.Auto="Auto"]="Auto"}(LabelOverFlowMode||(LabelOverFlowMode={})),function(n){n[n.Category="Category"]="Category";n[n.Value="Value"]="Value";n[n.Percentage="Percentage"]="Percentage";n[n.CategoryAndValue="Category And Value"]="CategoryAndValue";n[n.CategoryAndPercentage="Category And Percentage"]="CategoryAndPercentage";n[n.ValueAndPercentage="Value And Percentage"]="ValueAndPercentage";n[n.AllDetails="All Details"]="AllDetails"}(DataLabel||(DataLabel={})),function(n){n.Individual="Individual";n.Group="Group"}(CustomLegendType||(CustomLegendType={}));ImageProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ImageProperties",i.EnableImageExport=!0,i.EnablePdfExport=!0,i.IgnoreFilterActions=!0,i.BindFromDatasource=!0,i.Stretch=ImageMode.Default,i.ImageSource=ImgSource.Local,i.PaddingSettings=new PaddingSettings,i.ImageRotation=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImageRotations,ImageRotations.ZeroDeg),i.DataSource=DataSource.BinaryData,i.URLPattern="{0}",i.ImageUrl=null,i.ImagePath=null,i.IsURL=!1,i.IsImageExist=!1,i.BindDataIsChecked=!1,i.ImageName=null,i.IsInPackage=!1,i.Name="",i.UniqueName=null,i.imageSrc=null,i}return __extends(t,n),t}(WidgetProperties);PaddingSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.Image.PaddingSettings";this.Bottom=0;this.Left=0;this.Right=0;this.Top=0}return n}(),function(n){n[n.Default="Default"]="Default";n[n.Fill="Fill"]="Fill";n[n.Uniform="Uniform"]="Uniform";n[n.UniformToFill="Uniform To Fill"]="UniformToFill"}(ImageMode||(ImageMode={})),function(n){n[n.BinaryData="Binary Data"]="BinaryData";n[n.URI="URI"]="URI"}(DataSource||(DataSource={})),function(n){n[n.Local="Local"]="Local";n[n.URL="URL"]="URL";n[n.ParameterizedURL="Parameterized URL"]="ParameterizedURL"}(ImgSource||(ImgSource={})),function(n){n[n.ZeroDeg="0"]="ZeroDeg";n[n.NinetyDeg="90"]="NinetyDeg";n[n.OneEightyDeg="180"]="OneEightyDeg";n[n.TwoSeventyDeg="270"]="TwoSeventyDeg"}(ImageRotations||(ImageRotations={}));LinkProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.LinkProperties";this.Linking=new LinkSetting}return n}();LinkSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.LinkSetting"}return n}(),function(n){n[n.Filter=0]="Filter";n[n.NonFilter=1]="NonFilter"}(WidgetType||(WidgetType={}));var ColorCustomization=function(){function n(){this.__type="Syncfusion.Dashboard.Core.CustomColor.ColorCustomization";this.DefaultColor="#A8E1F4";this.Type=ColorCustomizationType.Gradient;this.GradientSettings=new GradientSettings;this.SolidColorInfo=[];this.RuleRangeSettings=new RuleRangeSettings}return n}(),GradientColorInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Core.CustomColor.GradientColorInfo";this.HasMidColor=!1;this.Low=new GradientColorSettings;this.Mid=new GradientColorSettings;this.High=new GradientColorSettings;this.DefaultFormatColor=new GradientColorSettings;this.Low.Color="#fd2e56";this.Mid.Color="#e5ed00";this.High.Color="#4cd766";this.DefaultFormatColor.Color="#F67280"}return n}(),GradientSettings=function(){function n(){this.BasedOn=new ColorFieldInfo;this.GradientColorInfo=new GradientColorInfo}return n}(),RuleRangeSettings=function(){function n(){this.BasedOn=new ColorFieldInfo;this.RangeColorInfo=[]}return n}(),SolidColorSet=function(){function n(){this.BasedOn=new ColorFieldInfo;this.DefaultColorSets=[];this.ColorMappingType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ColorMappingType,ColorMappingType.Data);this.IndexColorPalette=[]}return n}(),ColorFieldInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Core.CustomColor.ColorFieldInfo";this.SummaryType=SummaryType.SUM;this.FieldId="";this.UniqueColumnName="";this.ValueType=ValueType.Value;this.IsDefaultFormat=!1;this.DefaultFormatType=DefaultFormatType.Default}return n}(),GradientColorSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Core.CustomColor.GradientColorSettings";this.IsCustom=!1;this.Value=null;this.Color="#A8E1F4"}return n}(),ColorCustomizationType;(function(n){n[n.Gradient=0]="Gradient";n[n.Rule=1]="Rule";n[n.Individual=2]="Individual"})(ColorCustomizationType||(ColorCustomizationType={})),function(n){n[n.Default=0]="Default";n[n.AsZero=1]="AsZero";n[n.Specific=2]="Specific"}(DefaultFormatType||(DefaultFormatType={})),function(n){n[n.Value=0]="Value";n[n.Percentage=1]="Percentage"}(ValueType||(ValueType={}));var RangeColorSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Core.CustomColor.RangeColorSettings";this.StartRange=0;this.EndRange=0;this.IsCaseSensitive=!0;this.RangeLabel="";this.DimensionConditionalValue="";this.MeasureCondition=CMeasureConditionType.CEquals;this.DimensionCondition=CDimensionConditionType.Startswith;this.PropertyColorPair=[]}return n}(),PropertyColorSettings=function(){function n(){}return n}(),TableWidgetCustomColors=function(){function n(){this.SourceColorField=new ColorFieldInfo;this.ColorCustomization=new ColorCustomization;this.EnableAsBar=!1;this.BarCustomization=new BarCustomization}return n}(),BarCustomization=function(){function n(){this.__type="Syncfusion.Dashboard.Core.CustomColor.BarCustomization";this.Minimum=new MinMaxCustomization;this.Maximum=new MinMaxCustomization;this.PositiveColor=new BarColor;this.NegativeColor=new BarColor;this.BarTextColor=new BarColor;this.DisableValue=!1;this.PositiveColor.RgbColor="rgba(44,217,197,1)";this.PositiveColor.HexColor="#2CD9C5";this.NegativeColor.RgbColor="rgba(255,108,64,1)";this.NegativeColor.HexColor="#FF6C40";this.BarTextColor.RgbColor="rgba(255,255,255,1)";this.BarTextColor.HexColor="#FFFFFF";this.EnableRTL=!1;this.FieldName="";this.BarShape=BarShapeType.Cylinder}return n}(),BarShapeType;(function(n){n[n.Cylinder=0]="Cylinder";n[n.Rectangle=1]="Rectangle"})(BarShapeType||(BarShapeType={}));var MinMaxCustomization=function(){function n(){this.__type="Syncfusion.Dashboard.Core.CustomColor.MinMaxCustomization";this.Value=0;this.IsEdited=!1}return n}(),BarColor=function(){function n(){this.__type="Syncfusion.Dashboard.Core.CustomColor.BarColor";this.IsEdited=!1}return n}(),RangeNavigatorProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RangeNavigatorProperties",i.SeriesType=[],i.DefaultColors=[],i.LabelColor=new ColorSet,i.LabelColor.Color="#505D6F",i}return __extends(t,n),t}(WidgetProperties),RangeNavigatorSeriesType=function(){function n(){this.Type=RangeNavigatorType.Area;this.Name=""}return n}(),RangeNavigatorType;(function(n){n[n.Area=0]="Area";n[n.Line=1]="Line";n[n.StepLine=2]="StepLine"})(RangeNavigatorType||(RangeNavigatorType={}));var ScriptInfo=function(){function n(){this.ScriptName=null;this.NameSpace=null}return n}(),RequiredScripts=function(){function n(){this.MainScript=null;this.DependentScripts=[]}return n}(),WidgetElementsVisibility=function(){function n(){this.ShowLegend=!1;this.ShowXAxisLabels=!1;this.ShowXAxisTitle=!1;this.ShowYAxisTitle=!1;this.ShowYAxisLabels=!1}return n}(),DaConditionalResult=function(){function n(){this.ConditionalInformations=new DaConditionalInformations;this.OverallResult=!1}return n}(),DaConditionalInformations=function(){function n(){this.ConditionalInfoColleciton=[];this.GlobalFilters=[]}return n}(),DaConditionalInfo=function(){function n(){this.Filters=[]}return n}(),DaFilter=function(){function n(){this.StringCondition=new DaStringCondition}return n}(),DaMeasureFieldInfo=function(){function n(){}return n}(),DaDatasourceFieldInfo=function(){function n(){}return n}(),DaStringCondition=function(){function n(){this.Values=[];this.DateInfo=null}return n}(),DaDateFilterInfo=function(){function n(){this.DateFormatInfo=null;this.FilterValues=[];this.RelativeDateFilter=null}return n}(),DaDashboardArguments=function(){function n(){}return n}(),DaCustomExpression=function(){function n(){}return n}(),DaCustomExpressionDialogArguments=function(){function n(){}return n}(),DataAlertArgs=function(){function n(){}return n}(),ConfiguredWidgetInfo=function(){function n(){}return n}(),FilterModel=function(){function n(){}return n}(),TabbedProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.TabbedProperties",i.ActiveTabId="",i.HideHeader=!1,i.WidgetsList=[],i.HeaderColor="#0565FF",i.HeaderFontSize=12,i.TabInfo=[],i.FilterSettings.IgnoreFilterActions=!0,i}return __extends(t,n),t}(VisualWidgetProperties),WidgetList=function(){function n(){this.TabId="";this.WidgetIds=[]}return n}(),TabInfo=function(){function n(){this.DisplayText="";this.UniqueText=""}return n}(),BoldBIDashboard;(function(n){var t;(function(t){var r=function(){function t(n,t,r){this.showSubtitle=!0;this.isRendered=!1;this.isCustomWidgetRendered=!1;this.isPoPWidget=!1;this.isPoPSupportedWidget=!1;this.isSupportHierarchyField=!1;this.isBackgroundInfoNeeded=!0;this.widgetOrder=100;this.isPropertyPanelRequired=!0;this.isVisualWidget=!0;this.rootCss=r;this.type=t;this.designerInstance=n;this.bbdesigner$=this.designerInstance.bbdesigner$;this.themeHelper=n.modules.themeHelper;this.cellInfo=new i;this.widgetJson=new WidgetProperties(n);this.containerPropertyItem=this.designerInstance.modules.containerPropertyItem;this.designPanelInstance=this.designerInstance.designerPanel;this.widgetHelper=this.designerInstance.modules.widgetHelper;this.widgetContainerHelper=this.designerInstance.modules.widgetContainerHelper;this.backgroundInfo=new BackgroundInfo;this.themeHelper=this.designerInstance.modules.themeHelper}return Object.defineProperty(t.prototype,"RootCss",{get:function(){return this.rootCss},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Type",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"PluginId",{get:function(){return this.pluginId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"EventHelper",{get:function(){return this.eventHelper},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Name",{get:function(){return this.name},set:function(n){this.widgetJson.UniqueName=this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsPoPWidget",{get:function(){return this.isPoPWidget},set:function(n){this.isPoPWidget=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsPoPSupportedWidget",{get:function(){return this.isPoPSupportedWidget},set:function(n){this.isPoPSupportedWidget=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsSupportHierarchyField",{get:function(){return this.isSupportHierarchyField},set:function(n){this.isSupportHierarchyField=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Id",{get:function(){return this.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ActAsMasterByDefault",{get:function(){return this.actAsMasterByDefault},set:function(n){this.actAsMasterByDefault=n},enumerable:!1,configurable:!0}),t.prototype.getRequiredScripts=function(){return new RequiredScripts},Object.defineProperty(t.prototype,"IsRendered",{get:function(){return this.isRendered},set:function(n){this.isRendered=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsCustomWidgetRendered",{get:function(){return this.isCustomWidgetRendered},set:function(n){this.isCustomWidgetRendered=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CellInfo",{get:function(){return this.cellInfo},set:function(n){this.cellInfo=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"NoDataDispalyContainer",{get:function(){return this.nodataDispalyContainer},set:function(t){n.isNullOrUndefined(this.nodataDispalyContainer)&&(this.nodataDispalyContainer=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ContentContainer",{get:function(){return this.contentContainer},set:function(t){n.isNullOrUndefined(this.contentContainer)&&(this.contentContainer=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ControlContainer",{get:function(){return this.controlContainer},set:function(t){n.isNullOrUndefined(this.controlContainer)&&(this.controlContainer=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ShowSubtitle",{get:function(){return this.showSubtitle},set:function(n){this.showSubtitle=n},enumerable:!1,configurable:!0}),t.prototype.isDefaultDataWidget=function(){return!1},Object.defineProperty(t.prototype,"ControlHeader",{get:function(){return this.controlHeader},set:function(t){n.isNullOrUndefined(this.controlHeader)&&(this.controlHeader=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ControlSubHeader",{get:function(){return this.controlSubHeader},set:function(t){n.isNullOrUndefined(this.controlSubHeader)&&(this.controlSubHeader=t)},enumerable:!1,configurable:!0}),t.prototype.allowWidgetMove=function(){return!0},t.prototype.init=function(){throw new Error("Method not implemented.");},t.prototype.dispose=function(){var t=this.widgetJson.UniqueName;try{n.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.isPerformAction?this.widgetJson.FilterSettings.ActAsMasterWidget&&this.designPanelInstance.filterObject.ActAsMasterPropertyChangeInFilterConfigInfo(!1):n.DashboardUtil.IsStringNullorWhiteSpace(this.getContainerSettings().CombineWidgetId)?BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderWidgetOnUndoAction","DesignPanel",this.designerInstance._id+"_"+t,[this.widgetJson],null):BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderCombineWidgetOnUndoAction","DesignPanel",this.designerInstance._id+"_"+t,[[this.widgetJson],this.getContainerSettings().CombineWidgetId],null);this.designerInstance.modules.containerTypeWidgetHelper.updateWidgetOnDraggedOutOfContainerWidget(this);this.bbdesigner$("#"+this.designerInstance._id+"_"+t).removeData("widgetInstance").remove();this.designPanelInstance.selectedReportItems=[];this.cellInfo=null;this.containerPropertyItem=null;this.ContentContainer=null;this.ControlContainer=null;this.ControlHeader=null;this.ControlSubHeader=null;n.isNullOrUndefined(this.EventHelper)||this.eventHelper.clear();this.NoDataDispalyContainer=null;this.widgetJson=null}catch(i){this.designPanelInstance.logError({Source:t,Error:i,Type:i.name})}this.designPanelInstance=null},t.prototype.updateSize=function(t){n.isNullOrUndefined(t)||(this.cellInfo=t,this.designPanelInstance.updateWidgetItem(t,this.controlContainer,this.widgetJson,CommandAction.ItemResize,"updateSize",this.RootCss))},t.prototype.updateContainerPadding=function(){if(!n.Dashboard.WidgetHelper.isContainerWidget(this)&&this.isVisualWidget&&!n.isNullOrUndefined(this.contentContainer)&&this.contentContainer.length>0){var t=4;this.contentContainer[0].style.padding=this.cellInfo.RowSpan>=6*t&&this.cellInfo.ColumnSpan>=6*t?"24px 0px 0px 0px":this.cellInfo.RowSpan>=5*t&&this.cellInfo.ColumnSpan>=5*t?"20px 0px 0px 0px":this.cellInfo.RowSpan>=4*t&&this.cellInfo.ColumnSpan>=4*t?"16px 0px 0px 0px":this.cellInfo.RowSpan>=3*t&&this.cellInfo.ColumnSpan>=3*t?"16px 0px 0px 0px":this.cellInfo.RowSpan>=2*t&&this.cellInfo.ColumnSpan>=2*t?"12px 0px 0px 0px":"8px 0px 0px 0px"}},t.prototype.updateControlContainerPadding=function(){if(!n.Dashboard.WidgetHelper.isContainerWidget(this)&&this.isVisualWidget&&!n.isNullOrUndefined(this.controlContainer)&&this.controlContainer.length>0){var t=this.controlContainer.find(".bbi-dbrd-control-container-wrapper");n.isNullOrUndefined(this.getContainerSettings().WidgetPaddingInfo)&&(this.getContainerSettings().WidgetPaddingInfo=new WidgetPaddingInfo,this.getContainerSettings().WidgetPaddingInfo.AutoPadding=!0,this.getContainerSettings().WidgetPaddingInfo.Padding=this.getControlContainerPaddingValue());n.isNullOrUndefined(this.getContainerSettings().WidgetPaddingInfo)||n.isNullOrUndefined(this.getContainerSettings().WidgetPaddingInfo.AutoPadding)||this.getContainerSettings().WidgetPaddingInfo.Padding!==-1||(this.getContainerSettings().WidgetPaddingInfo.Padding=this.getControlContainerPaddingValue());t[0].style.padding=n.isNullOrUndefined(this.getContainerSettings().WidgetPaddingInfo)||n.isNullOrUndefined(this.getContainerSettings().WidgetPaddingInfo.AutoPadding)||this.getContainerSettings().WidgetPaddingInfo.AutoPadding||n.isNullOrUndefined(this.getContainerSettings().WidgetPaddingInfo.Padding)?this.getControlContainerPaddingValue()+"px":this.getContainerSettings().WidgetPaddingInfo.Padding+"px"}},t.prototype.getControlContainerPaddingValue=function(){var n=4;return this.cellInfo.RowSpan>=6*n&&this.cellInfo.ColumnSpan>=6*n?24:this.cellInfo.RowSpan>=5*n&&this.cellInfo.ColumnSpan>=5*n?16:this.cellInfo.RowSpan>4*n&&this.cellInfo.ColumnSpan>4*n?16:this.cellInfo.RowSpan>=3*n&&this.cellInfo.ColumnSpan>=3*n?12:this.cellInfo.RowSpan>=2*n&&this.cellInfo.ColumnSpan>=2*n?12:8},t.prototype.updateIconContainerBackground=function(){var t,i,r;n.Dashboard.WidgetHelper.isContainerWidget(this)||(t=this.ControlContainer.find(".bbi-dbrd-controlIcon-container"),!n.isNullOrUndefined(t)&&t.length>0&&this.widgetJson.ContainerSettings.ShowHeader&&(i=this.designerInstance.isViewMode()&&this.designerInstance.isDarkTypeTheme()?1:this.widgetJson.ContainerSettings.BackgroundSettings.Transparency,r=i===1?this.widgetJson.ContainerSettings.BackgroundSettings.Color:this.getTransparentHexColor(this.widgetJson.ContainerSettings.BackgroundSettings.Color,i),t.css({"background-color":this.designerInstance.isViewMode()&&r==="#ffffff"?"transparent":r})))},t.prototype.getTransparentHexColor=function(t,i){var r="#ffffff",u=function(n){return("0"+n.toString(16)).slice(-2)},f=n.parseInt(t.slice(1,3),16),e=n.parseInt(t.slice(3,5),16),o=n.parseInt(t.slice(5,7),16),s=n.parseInt(r.slice(1,3),16),h=n.parseInt(r.slice(3,5),16),c=n.parseInt(r.slice(5,7),16),l=Math.round(f*i+s*(1-i)),a=Math.round(e*i+h*(1-i)),v=Math.round(o*i+c*(1-i));return"#".concat(u(l)).concat(u(a)).concat(u(v))},t.prototype.updateSubTitleForContainer=function(){if(this.getContainerSettings().ShowHeader&&!n.isNullOrUndefined(this.getContainerSettings().SubTitle)&&this.getContainerSettings().SubTitle!==""&&!((this.type==="NumberCard"||this.type==="KPICard")&&n.isNullOrUndefined(this.controlHeader))){var t=this.controlContainer.find(".bbi-dbrd-control-header").height();this.cellInfo.RowSpan<=8?(this.controlContainer.find(".bbi-dbrd-control-sub-header").css("display","none"),t=this.controlContainer.find(".bbi-dbrd-control-header").outerHeight()):(this.controlContainer.find(".bbi-dbrd-control-sub-header").css("display","block"),t=t+this.controlContainer.find(".bbi-dbrd-control-sub-header").outerHeight());this.contentContainer.css("height","calc(100% - "+t+"px)");this.IsRendered&&this.updateSize(this.cellInfo)}},t.prototype.updatePosition=function(t){n.isNullOrUndefined(t)||(this.cellInfo=t,this.designPanelInstance.updateWidgetItem(this.cellInfo,this.controlContainer,this.widgetJson,CommandAction.ItemMove,"updatePosition",this.rootCss))},t.prototype.getMobileViewHeight=function(){throw new Error("Method not implemented.");},t.prototype.setJson=function(n){this.widgetJson=n},t.prototype.getJson=function(){return this.widgetJson},t.prototype.initialize=function(){},t.prototype.updatePropertyChange=function(n,t,i){switch(n){case"ItemLink":this.widgetJson.UrlLink.TargetTypeInfo=i.TargetTypeInfo;this.widgetJson.UrlLink.Height=i.Height;this.widgetJson.UrlLink.Width=i.Width;this.widgetJson.UrlLink.Title=i.Title}},t.prototype.refresh=function(){throw new Error("Method not implemented.");},t.prototype.canUseWidgetAsMaster=function(){return!0},t.prototype.isIgnoreFilterActionVisible=function(){return!0},t.prototype.getCurrentWidgetConfiguration=function(){},t.prototype.getContainerSettings=function(){return this.getJson().ContainerSettings},t.prototype.getContainerProperty=function(){return this.containerPropertyItem},t.prototype.getSettingsButtonIcon=function(){return{className:"bbi-designer-selection-move e-moveicon bbi-toolbarfonticonbasic",pathLength:3}},t.prototype.showSettingsIcon=function(){return!0},t.prototype.onWidgetSelect=function(){},t.prototype.onWidgetUnSelect=function(){},t.prototype.updateLink=function(n){var t=this.getJson().UrlLink;t.EnableLink=n.EnableLink;t.LinkType=n.LinkType;t.GridUrlType=n.GridUrlType;t.PassingParameters=n.PassingParameters;t.UrlPath=n.UrlPath;t.TargetTypeInfo=n.TargetTypeInfo;t.Height=n.Height;t.Width=n.Width;t.Title=n.Title},t.prototype.updateNoDataContainerSettings=function(n){var t=this.getContainerSettings().NoDataContainerSettings;t.CustomMsg=n.CustomMsg;t.HideDefaultIcon=n.HideDefaultIcon;t.ImageInfo=n.ImageInfo;t.FontColor=n.FontColor},t.prototype.onWidgetSettingsIconClick=function(){},t.prototype.urlLinkingAction=function(n,t,i){var r=this.designerInstance.modules.reportAction;r.renderAction(n,t,i)},t.prototype.applyWidgetTheme=function(){},t.prototype.useExistingLink=function(){return n.isNullOrUndefined(this.getJson().UrlLink)||n.isNullOrUndefined(this.getJson().UrlLink.LinkType)||this.getJson().UrlLink.LinkType.toString()!==LinkType[LinkType.Url]&&this.getJson().UrlLink.LinkType!==LinkType.Url?(this.resetUrlLink(),null):this.getJson().UrlLink},t.prototype.resetUrlLink=function(){this.getJson().UrlLink=new UrlLink},t.prototype.clone=function(){return this},t.prototype.getNoDataContainerSettings=function(){return n.isNullOrUndefined(this.getContainerSettings().NoDataContainerSettings)&&(this.getContainerSettings().NoDataContainerSettings=new NoDataContainerSettings),this.getContainerSettings().NoDataContainerSettings},t.prototype.designerEventListener=function(){return!1},t.prototype.getPropertyPanelItems=function(){return null},t.prototype.getPropertyPanelMessage=function(){},t.prototype.getValue=function(){return""},t.prototype.updateWidgetBounds=function(n){this.widgetJson.ContainerSettings.Bounds.Column=n.Column;this.widgetJson.ContainerSettings.Bounds.Row=n.Row;this.widgetJson.ContainerSettings.Bounds.RowSpan=n.RowSpan;this.widgetJson.ContainerSettings.Bounds.ColumnSpan=n.ColumnSpan},t.prototype.updateWidgetCellInfo=function(t){n.isNullOrUndefined(t)||(this.CellInfo.Row=t.Row,this.CellInfo.Column=t.Column,this.CellInfo.ColumnSpan=t.ColumnSpan,this.CellInfo.RowSpan=t.RowSpan)},t.prototype.updateWidgetSettings=function(){},t.prototype.resetProperties=function(){},t.prototype.updatePoPSettings=function(){},t.prototype.isFieldBoundInUnsupportedSection=function(){return!1},t.prototype.getFontSizeBasedOnResolution=function(t){return window.screen.width<1920?this.isVisualWidget?n.isNullOrUndefined(t)?"12px":"16px":"12px":window.screen.width<3840?this.isVisualWidget?n.isNullOrUndefined(t)?"16px":"22px":"14px":this.isVisualWidget?n.isNullOrUndefined(t)?"32px":"44px":"28px"},t.prototype.getIconFontSizeBasedOnResolution=function(){return window.screen.width<1920?"12px":window.screen.width<3840?"16px":"32px"},t.prototype.getBackgroundForControlContainer=function(){var t="#FFFFFF",i;n.Dashboard.WidgetHelper.isContainerWidget(this)&&(this.designerInstance.model.mode===n.Designer.mode.design?(i=getComputedStyle(document.querySelector(":root")),t=i.getPropertyValue("--widget-primary-background").replace(/"/g,"")+"b3"):t=this.designerInstance.modules.themeHelper.getWidgetTileBackground(null),this.ControlContainer.css("background",t))},t.prototype.performSelectedWidgetAction=function(){},t.prototype.processFilterInformation=function(){return!1},t.prototype.isApplicableDateTypeWidgetForAPIFiltering=function(){return!1},t.prototype.isAllTypeDataFilterSupported=function(){return!1},t.prototype.getMinMobileHeight=function(){return"200px"},t.prototype.updatePositionWithinContainerWidget=function(n,t,i){this.designerInstance.modules.containerTypeWidgetHelper.updateChildWidgetPosition(this,n,t,i)},t.prototype.canCombineRequest=function(){return!1},t.prototype.useExistingWidgetLinking=function(){return n.isNullOrUndefined(this.getJson().WidgetLink)?null:this.getJson().WidgetLink},t.prototype.updateWidgetLink=function(t){n.isNullOrUndefined(this.widgetJson.WidgetLink)&&(this.getJson().WidgetLink=new WidgetLink);this.widgetJson.WidgetLink.Enable=t.Enable;this.widgetJson.WidgetLink.WidgetList=t.WidgetList},t.prototype.resetTabWidgetResize=function(){return!1},t.prototype.isParamSupported=function(){return!1},t}(),i;t.Widget=r;i=function(){function n(){}return n}();t.CellInfo=i})(t=n.Dashboard||(n.Dashboard={}))})(BoldBIDashboard||(BoldBIDashboard={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(t){function i(i,r,u){var f=t.call(this,i,r,u)||this;return f.scriptTimer=null,f.timerCount=0,f.isControlInitialized=!1,f.isCurrentMaster=!1,f.isClearFilter=!0,f.labelParametervalues=null,f.dataGroupInfo=new n.Dashboard.DataGroupInfo,f.dataConfigurationInstance=f.designerInstance.modules.dataConfiguration,f.masterFilterWindowInstance=f.designerInstance.modules.masterSlaveFilter,f}return __extends(i,t),Object.defineProperty(i.prototype,"DrillLevelInfo",{get:function(){return this.drillLevelInfo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"IsExistinBgAvailable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"VirtualScrollSettings",{get:function(){return this.virtualScrollSettings},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"IsConfigured",{get:function(){return this.isConfigured},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"DataGroupInfo",{get:function(){return this.dataGroupInfo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"DataColumnBindings",{get:function(){return this.dataColumnBindings},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"DataRequiredMessage",{get:function(){return"Necessary Data is not configured to render."},enumerable:!1,configurable:!0}),i.prototype.update=function(t){var r,u,i;if(this.labelParametervalues=n.isNullOrUndefined(t.labelParameterValData)?null:JSON.parse(t.labelParameterValData),!n.isNullOrUndefined(t.Running)&&!n.isNullOrUndefined(this.VirtualScrollSettings)){for(r=[],u=Object.keys(t.Running),i=0;i<u.length;i++)r.push({key:t.Running[i].Key,value:t.Running[i].Value});this.VirtualScrollSettings.FieldLastRecord=r}},i.prototype.updateDataColumnBindings=function(n){this.dataColumnBindings=n},i.prototype.getWidgetImage=function(){throw new Error("Method not implemented.");},i.prototype.clearFilter=function(){},i.prototype.updateInitialSelection=function(){},i.prototype.getWidgetInfo=function(t,i){return!n.isNullOrUndefined(i)&&i||n.isNullOrUndefined(this.VirtualScrollSettings)||(this.VirtualScrollSettings.StartIndex=1),{Id:this.Name,Name:this.Name,WidgetName:this.widgetJson.ContainerSettings.Title,ControlType:this.Type,DataGroupInfo:this.DataGroupInfo.FieldContainers,VirtualScrollSettings:n.isNullOrUndefined(this.VirtualScrollSettings)?null:this.VirtualScrollSettings}},i.prototype.onFieldSettingsClick=function(n,t){return t},i.prototype.updateDataGroupInfo=function(n){this.dataGroupInfo=n},i.prototype.getDefaultMeasureFormat=function(){return new MeasureFormatting},i.prototype.getWidgetSpecificInfoForExport=function(){return null},i.prototype.getFieldView=function(t,i){return[{name:"Measures",displayName:this.designerInstance.getLocalizationContent().dataconfiguration.fieldView.MeasureFieldDisplayName,supportedDataTypes:!n.isNullOrUndefined(t)&&t.length>0?t:[]},{name:"Dimensions",displayName:this.designerInstance.getLocalizationContent().dataconfiguration.fieldView.DimensionFieldDisplayName,supportedDataTypes:!n.isNullOrUndefined(i)&&i.length>0?i:[]}]},i.prototype.getFilterColumn=function(){var t=new n.Dashboard.FieldContainerForUI;return t.Name="FilterColumn",t.DisplayName=this.designerInstance.getLocalizationContent().dataconfiguration.filedContainer.filterColumnTitle,t.ContainerType=FieldContainerType.None,t.Required=!1,t.Visibility=Visibility.Show,t.IsDrillSection=!1,t.HasCustomDate=!1,t.CategoryCount=null,t.canUseInLinking=!1,t},i.prototype.getParameterColumnContainer=function(n){return{name:"Parameters",displayName:this.designerInstance.getLocalizationContent().dataconfiguration.fieldView.ParameterFieldDisplayName,supportedDataTypes:n}},i.hasCustomDate=function(t){return!n.isNullOrUndefined(t)&&t.FilterInfo!=null&&t.FilterInfo.CustomDateSettingsInfo!=null},i.prototype.getFieldContainer=function(){return[]},i.prototype.supportedColumnsForFiltering=function(){var f=[],e=this.designerInstance.modules.filterConfiguration,u,i,t,r;if(!n.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length>0)for(u=this.DataGroupInfo.FieldContainers,i=0;i<u.length;i++)for(t=0;t<u[i].FieldInfos.length;t++)r=u[i].FieldInfos,r[t].FieldType!==FieldType.Dimensions&&(r[t].FieldType!==FieldType.Measures||e.isDuplicate(f,r[t].Name))||f.push(r[t]);return f},i.prototype.getColumnInfo=function(n){return n},i.prototype.isFieldValid=function(){return!0},i.prototype.clone=function(){return t.prototype.clone.call(this)},i.prototype.onFieldDragDrop=function(t,i){return n.isNullOrUndefined(i)?!(t.ContainerType===FieldContainerType.Non_Numeric&&t.FieldType===FieldType.Measures):!0},i.prototype.getLabelParamValues=function(t){var r,i;if(!n.isNullOrUndefined(this.labelParametervalues)&&!n.isNullOrUndefined(t))for(r=Object.keys(this.labelParametervalues),i=0;i<r.length;i++)t=t.replace(r[i],this.labelParametervalues[r[i]]);return t},i.prototype.getDefaultDateFormat=function(){return DateTimeFormat.None},i.prototype.getDefaultSummaryType=function(n,t,i){var r;return t===FieldContainerType.Numeric?n===FieldType.Measures?r=i?SummaryType.CUSTOM:SummaryType.SUM:n===FieldType.Dimensions&&(r=SummaryType.COUNT):r=t===FieldContainerType.None&&n===FieldType.Measures?i?SummaryType.CUSTOM:SummaryType.SUM:SummaryType.NONE,r},i.prototype.beforeUtilityDialogOpen=function(n){return n},i.prototype.performInteraction=function(t,i,r){var u=t.getJson();this.masterFilterWindowInstance.configureSelectedFilterInfo(u,i,r);u.SelectedFilterValues.length===0?t.clearFilter(!0):(n.Dashboard.WidgetHelper.enableClearFilter(this),this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(t),this.masterFilterWindowInstance.doInteraction(u.UniqueName),this.designerInstance.modules.serialization.notifyChange())},i.prototype.generateLinkData=function(t,i){var r=t.getJson(),f={isEnabled:!1,parameterDetails:[],url:"",urlLinkInfo:[]},o,e,u,s;if(!n.isNullOrUndefined(r)&&(o=this.designerInstance.modules.util.getSourceData(this.DataGroupInfo,!1),!n.isNullOrUndefined(r.UrlLink.UrlPath)&&r.UrlLink.UrlPath!==""))for(e=o.filter(function(n){return r.UrlLink.PassingParameters.indexOf(n.Value)!==-1}),f.url=r.UrlLink.UrlPath,f.isEnabled=!0,u=0;u<e.length;u++)s=Array.isArray(i.selectedItem.Data)?i.selectedItem.Data[0][e[u].Id]:i.selectedItem.Data[e[u].Id],f.parameterDetails.push({parameter:e[u].Value,value:s});return f.urlLinkInfo=r.UrlLink,f},i.prototype.performLinking=function(t){if(t.parameterDetails.length>0||t.url!==" "){var i=new UrlLinkingWidgetInfo;i={widgetId:n.isNullOrUndefined(this.widgetJson)?"":this.widgetJson.UniqueId,widgetName:n.isNullOrUndefined(this.widgetJson)?"":this.widgetJson.ContainerSettings.Title};this.designerInstance.modules.util.loadNavigation(t,i)}},i.prototype.dispose=function(){t.prototype.dispose.call(this);this.virtualScrollSettings=null;this.drillLevelInfo=null;this.dataGroupInfo=null},i.prototype.getColumnForWidgetFilterAPI=function(t,i,r){for(var h,o,f,e,v,s=[],c={},l=[],a=!1,u=0;u<t.length;u++)if(h=!1,!n.isNullOrUndefined(t[u].columnName))if(t[u].columnName!==""){for(o=0;o<i.length;o++){if(f=i[o].FieldInfos,!n.isNullOrUndefined(f))for(e=0;e<f.length;e++)if(v=f[e].IsDisplayNameEdited?f[e].DisplayName:f[e].Name,v.toLowerCase()===t[u].columnName.toLowerCase()&&(h=!0,t[u].values.length>0)){s.push(f[e]);c[f[e].UniqueColumnName]=!n.isNullOrUndefined(r)&&r?t[u].values:t[u].values[0];break}if(t.length===s.length)break}h||l.push(t[u].columnName)}else a=!0;return[s,c,l,a]},i.prototype.isDefaultDataWidget=function(){return!1},i.prototype.initializeVirtualScrollSettings=function(t,i){this.virtualScrollSettings=new VirtualScrollSettings;n.isNullOrUndefined(t)||(this.virtualScrollSettings.PageSize=t);n.isNullOrUndefined(i)||(this.virtualScrollSettings.StartIndex=i)},i.prototype.removeAllDrillElements=function(){},i.prototype.clearSelection=function(){},i.prototype.clearVirtualScrollSettings=function(){this.virtualScrollSettings=null},i.prototype.renderViewModeWidget=function(n){this.renderWidgetWithData(n)},i.prototype.renderWidgetWithData=function(t){var i,u,f;try{this.isControlInitialized||(this.init("",this.widgetJson),n.Dashboard.WidgetContainerHelper.hideWidgetContainerImage(this.ContentContainer),n.Dashboard.WidgetContainerHelper.removeAlertMessageForData(this.ContentContainer),this.isControlInitialized=!0);this.updateDataColumnBindings(n.DashboardUtil.getColumnBindings(this));i=t[this.widgetJson.UniqueName];this.designerInstance.modules.resource.updateColorCodeInfo(i);this.update(i);this.updateWidgetSettings();u={widgetId:this.widgetJson.UniqueId,widgetName:this.widgetJson.ContainerSettings.Title};this.designerInstance.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.renderWidget,this.controlContainer,u);this.designerInstance.addToWidgetCacheCollection(this.widgetJson.UniqueName,i,!1);f=this.controlContainer.attr("data-prevent-loading-indicator");n.isNullOrUndefined(f)&&this.designerInstance.modules.util.hideLoadingIndicator(this.controlContainer)}catch(r){this.designerInstance.designerPanel.logError({Source:"bindWidgetData",Error:r,Type:r.name});this.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").is(":visible")||(n.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.designerInstance.designerPanel.showControlError(this.ContentContainer,r,this.CellInfo,this.designerInstance.getLocalizationContent().errorMessage.widgetCustomizeFailed))}},i.prototype.getControlInstance=function(t){var u=t.split("."),i=window[u[0]],r;if(!n.isNullOrUndefined(i))for(r=1;r<u.length;r++){if(n.isNullOrUndefined(i))return null;i=i[u[r]]}return i},i.prototype.renderWidget=function(t,i){n.isNullOrUndefined(this.getControlInstance(i))?this.waitandLoadWidget(t,i):(this.renderWidgetWithData(t),this.clearTimer(this.scriptTimer))},i.prototype.isNecessaryDataConfigured=function(){if(this.DataGroupInfo.FieldContainers.length>0){for(var n=0;n<this.DataGroupInfo.FieldContainers.length;n++)if(this.dataGroupInfo.FieldContainers[n].Required&&this.dataGroupInfo.FieldContainers[n].FieldInfos.length===0)return!1;return!0}return!1},i.prototype.waitandLoadWidget=function(t,i){var r=this;this.scriptTimer=setTimeout(function(t,i,u){if(n.isNullOrUndefined(r.getControlInstance(i)))if(u.timerCount++,u.timerCount<100)u.waitandLoadWidget(t,i);else{u.clearTimer(u.scriptTimer);var f=u.controlContainer.attr("data-prevent-loading-indicator");n.isNullOrUndefined(f)&&r.designerInstance.modules.util.hideLoadingIndicator(u.controlContainer);n.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(u);r.widgetContainerHelper.showControlError(u,"")}else u.renderWidgetWithData(t),u.clearTimer(u.scriptTimer)},100,t,i,this)},i.prototype.clearTimer=function(n){this.timerCount=0;clearTimeout(n)},i.prototype.doInteractionWithMasterFields=function(t,i){!n.isNullOrUndefined(i)&&i?this.masterFilterWindowInstance.doInteraction(t.UniqueName,this.masterFieldDetails(t)):this.masterFilterWindowInstance.doInteraction(t.UniqueName)},i.prototype.masterFieldDetails=function(n){for(var i=[],t=0;t<n.Data.Containers.length;t++)n.Data.Containers[t].Name==="FilterColumn"&&n.Data.Containers[t].FieldInfos.length>0&&(i=this.widgetJson.Data.Containers[t].FieldInfos);return i},i.prototype.getExportingWidgetTitle=function(n){return this.bbdesigner$(n).find(".bbi-dbrd-control-title").clone().children(".bbi-dbrd-label-parameter-text").remove().end().text()},i}(n.Dashboard.Widget);t.DataWidget=i})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),Object.defineProperty(i.prototype,"hasMultipleRegion",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.updateChildWidgetOnDrop=function(n,t,i){var r=this,u=this.getChildWidgetPosition(this),f;return t.Column=Math.abs(u.Column-t.Column),t.Row=Math.abs(u.Row-t.Row),this.appendWidget(n.ControlContainer,i),f=this.designerInstance.modules.Mode.designCanvas.find("#"+this.designerInstance._id+"_"+n.getJson().UniqueName),f.each(function(n,t){r.bbdesigner$(t).hasClass("bbi-canvas")&&r.bbdesigner$(t).remove()}),t},i.prototype.positionChildWidget=function(n,t,i,r){n.ControlContainer.css({left:t.left-i,top:t.top-r})},i.prototype.isWidgetWithinContainerWidget=function(t,i){if(n.isNullOrUndefined(i))return!1;var r=t.getContainerSettings().CombineWidgetId===i.getJson().UniqueId;if(n.Dashboard.WidgetHelper.isContainerWidget(i)){if(r)return!r;if(!n.isNullOrUndefined(i))return!(t.ControlContainer.parents("#"+i.ControlContainer[0].id).length>0)}else return!1},i.prototype.isWidgetItemRestricted=function(t,i,r,u){return i.Row<t.Row||i.Row+i.RowSpan>t.Row+t.RowSpan||i.Column<t.Column||i.Column+i.ColumnSpan>t.Column+t.ColumnSpan?n.isNullOrUndefined(u)?!0:!(r.ControlContainer.parents("#"+u.ControlContainer[0].id).length>0):!1},i.prototype.getChildWidgetPosition=function(n){return this.designerInstance.modules.containerTypeWidgetHelper.getRootPosition(n)},i.prototype.updateContainerPosition=function(n){var o=this.designerInstance.isMobileLayout(),t=10,s=o?this.designerInstance.element.find("#"+this.designerInstance._id+"_designSurfaceContainer").height():this.controlContainer.height(),h=this.designerInstance.designerPanel.rowsLength>this.designerInstance.designerPanel.singlePageRowLength,c=this.designerInstance.designerPanel.getWidgetItemHeight(this.CellInfo.RowSpan),f=this.designerInstance.designerPanel.getWidgetItemHeight(n.CellInfo.RowSpan),l=(s-t)*(f/c),a=this.designerInstance.designerPanel.getWidgetItemWidth(this.CellInfo.ColumnSpan),e=this.designerInstance.designerPanel.getWidgetItemWidth(n.CellInfo.ColumnSpan),r=this.designerInstance.modules.Mode.designCanvas.width()-(h?0:t),i,u;r=r*(e/a);i=this.validateCombinewidgetMorethan24Rows(this.designerInstance.model.dashboardFromData.isControl);u=i?this.designerInstance.designerPanel.getWidgetItemPosition(n.CellInfo.Row,n.CellInfo.Column):this.designerInstance.designerPanel.getWidgetItemPosition(Math.floor(n.CellInfo.Row*(24/this.CellInfo.RowSpan)),Math.floor(n.CellInfo.Column*(48/this.CellInfo.ColumnSpan)));n.ControlContainer.css({left:u.left-this.designerInstance.designerPanel.cellMargin,top:u.top-this.designerInstance.designerPanel.cellMargin,height:i?f:l-t,width:i?e:r-t});n.updateSize()},i.prototype.validateCombinewidgetMorethan24Rows=function(t){var u=this,i,r;if(t)for(i=this.designerInstance.rdlParser.rdlJsonObj.WidgetData.filter(function(n){return n.UniqueName===u.designerInstance.model.dashboardFromData.reportName}),r=0;r<i.length;r++)if(n.Dashboard.WidgetHelper.isContainerWidget(this.designerInstance.designerPanel.getWidgetInstanceFromPropNameSpace(i[0].__type))&&i[r].ContainerSettings.Bounds.RowSpan>this.designerInstance.designerPanel.singlePageRowLength)return!0;return!1},i.prototype.updateChildForMobileMode=function(n){var t=this.ControlContainer.width()/(this.CellInfo.ColumnSpan*2),i=this.ControlContainer.height()/(this.CellInfo.RowSpan*2);n.ControlContainer.css({height:n.CellInfo.RowSpan*i*2,width:n.CellInfo.ColumnSpan*t*2,left:n.CellInfo.Column*t*2,top:n.CellInfo.Row*i*2})},i.prototype.isMasterPresentInChild=function(){return!1},i.prototype.getChildWidgetList=function(){return[]},i.prototype.showAlert=function(){},i.prototype.updateDraggedWidgetList=function(){},i.prototype.appendWidget=function(){},i.prototype.updateCellForBottomResize=function(n){return n},i.prototype.updateSizeOfWidgetNotConfigured=function(){},i.prototype.addLatestCache=function(){return null},i.prototype.showLoadingIndicator=function(){},i.prototype.hideLoadingIndicator=function(){},i.prototype.showActiveRegion=function(){},i.prototype.onWidgetRefresh=function(){},i.prototype.revertInteractionForDesigner=function(){},i.prototype.getContainerRegions=function(){return 0},i.prototype.positionChildWidgetsOnUndo=function(){},i.prototype.updateChildList=function(){},i.prototype.updateWidgetsInCombineWidget=function(){},i.prototype.updateChildCellRows=function(n){return n},i.prototype.clearWidgetList=function(){},i.prototype.exportControl=function(){},i}(n.Dashboard.Widget);n.ContainerWidget=t}(BoldBIDashboard||(BoldBIDashboard={}));window.bbicustom=window.bbicustom||{},function(n){var r=$,t,u,i;if(window.bb$!==undefined&&(r=window.bb$),t={},t.registeredWidgets={},t.onLoadingWidgets=[],t.registerWidget=function(n){for(var i,r=Object.keys(this.registeredWidgets),t=0;t<r.length;t++)if(r[t]==n.guid)return;i=function(){};n.dependentWidgets=[];i.prototype=n;this.registeredWidgets[n.guid]={proto:i}},t.getWidgetInstance=function(n){try{return n.plugindata}catch(t){throw t.message+"\n"+t.stack;}},t.selectedFilterInfo=function(){this.UniqueColumnName="";this.ReportName="";this.DateFilterInfo={Action:"Include",DateFilterList:[],DateFilterType:"Basic"};this.DimensionFilterInfo={Conditions:0,IsBoolean:!1,ClearAllSelection:!1,Text:[],SelectedBoolValues:[],SelectedIndex:0};this.MeasureFilterInfo={Conditions:"IsBetween",Values:[]}},t.selectedColumnInfo=function(){this.uniqueColumnName="";this.condition="";this.values=[]},t.setProperty=function(t,i){var r={},u=n.dashboard.getWidgetInstance(t),f;r[i.name]=i.value;f=n.dashboard.parseProperty(r);i.value=f[i.name];u.model.properties[i.name]=i.value;u.update({type:"propertyChange",property:i})},t.parseProperty=function(n){for(var i=Object.keys(n),t=0;t<i.length;t++)try{n[i[t]]=JSON.parse(n[i[t]])}catch(r){n[i[t]]=n[i[t]]}return n},t.createWidgetInstance=function(t,i,r){var f=n.dashboard.registeredWidgets[t].proto,u=new f;u.element=i;u.model=r;i.classList.add("dbrd-widget");i.plugindata=u},t.filterData=function(t,i){for(var e,u=r(t.element).closest(".bbi-dbrditem").data("widgetInstance"),o=[],f=0;f<u.dataGroupInfo.FieldContainers.length;f++)for(e=0;e<u.dataGroupInfo.FieldContainers[f].FieldInfos.length;e++)o.push(u.dataGroupInfo.FieldContainers[f].FieldInfos[e]);u.designerInstance.triggerActionBeginForWidgetFilterInteraction(u)||(u.widgetJson.SelectedFilterValues=[],n.dashboard.performCustomWidgetInteraction(u,o,i))},t.performCustomWidgetInteraction=function(t,i,r){var c,f,a,p,w;if(!BoldBIDashboard.isNullOrUndefined(t.widgetJson)&&!BoldBIDashboard.isNullOrUndefined(r)){for(c=0;c<i.length;c++){var u=i[c],o=[],v=[],h=[],l=(u.FieldActualType==="bbi-designer-dataset-string"||u.FieldActualType==="bbi-designer-dataset-boolean"||u.FieldActualType==="bbi-designer-dataset-number")&&u.FieldType===FieldType.Dimensions,y=(u.FieldActualType==="bbi-designer-dataset-datetime"||u.FieldActualType==="bbi-designer-dataset-time")&&u.FieldType===FieldType.Dimensions,b=u.FieldActualType==="bbi-designer-dataset-number"&&u.FieldType===FieldType.Measures,k=l?"bbi-designer-dataset-string":u.FieldActualType,e="",s=[];for(f=0;f<r.length;f++)if(r[f].uniqueColumnName===u.UniqueColumnName){if(e=l?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,n.dashboard.convertStringtoEnum(r[f].condition)):y?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,n.dashboard.convertDateFilterStringtoEnum(r[f].condition)):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,n.dashboard.convertStringtoEnum(r[f].condition)),Array.isArray(r[f].values))for(a=0;a<r[f].values.length;a++)s.push(r[f].values[a]);else s=Array.isArray(r[u.UniqueColumnName])?r[f].values:[r[f].values];l?(o=s,e=o.length>0?e:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains)):y?(h=s,v=u.DateTimeFormat===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.Default)?t.masterFilterWindowInstance.getDateFilterList(h,!0):h,o={DateFormat:!BoldBIDashboard.isNullOrUndefined(u.DateBucketInfo)&&!BoldBIDashboard.isNullOrUndefined(u.DateBucketInfo.DateBucketFormat)?u.DateBucketInfo.DateBucketFormat:u.DateTimeFormat,DisplayFilterList:h,DateFilterList:v},e=h.length>0?e:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include)):b&&(o=s,e=o.length>0?e:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.Equals));(o.length>0||!BoldBIDashboard.isNullOrUndefined(o.DateFilterList))&&(p={FilterInfo:o,Action:e,IsStdDateTime:!1,IsMultiSelection:l&&s.length>1?!0:!1,IsRange:e==="IsBetween"||e==="IsNotBetween"||e==="Range"?!0:!1},t.widgetJson.SelectedFilterValues.push(t.masterFilterWindowInstance.updateInitialFiltersForFilterControls(u,t.widgetJson.UniqueName,k,p)))}}t.isCurrentMaster=!0;w=t.getJson();BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(t);t.designerInstance.modules.serialization.notifyChange();t.designerInstance.triggerActionCompleteForWidgetFilterInteraction(t);t.masterFilterWindowInstance.doInteraction(w.UniqueName)}},t.convertStringtoEnum=function(n){switch(n){case"greaterthan":return InitialMeasureFilterCondition.GreaterThan;case"isbetween":return InitialMeasureFilterCondition.IsBetween;case"notequals":return InitialMeasureFilterCondition.NotEquals;case"lessthan":return InitialMeasureFilterCondition.LessThan;case"lessthanorequals":return InitialMeasureFilterCondition.LessThanOrEquals;case"greaterthanorequals":return InitialMeasureFilterCondition.GreaterThanOrEquals;case"isnotbetween":return InitialMeasureFilterCondition.IsNotBetween;case"equals":return InitialMeasureFilterCondition.Equals;case"contains":return InitialDimensionFilterCondition.Contains;case"include":return InitialDimensionFilterCondition.Include;case"exclude":return InitialDimensionFilterCondition.Exclude;case"startswith":return InitialDimensionFilterCondition.StartsWith;case"endswith":return InitialDimensionFilterCondition.EndsWith;case"notcontains":return InitialDimensionFilterCondition.NotContains}},t.convertDateFilterStringtoEnum=function(n){switch(n){case"include":return InitialDateFilterCondition.Include;case"exclude":return InitialDateFilterCondition.Exclude;case"range":return InitialDateFilterCondition.Range}},t.addCulture=function(t,i){for(var u=Object.keys(i),r=0;r<u.length;r++)n.dashboard.loadCldr(i[u[r]])},t.navigateThroughLinking=function(t,i,u){for(var s,e=[],o=[],f=0;f<i.length;f++)o.push({Column:i[f].uniqueColumnName,Value:i[f].values});e.push({Items:o});t.model.isIFrameEnable?n.dashboard.postMessageToViewer({action:"linking",selectedData:e,dashboardId:t.model.dashboardId,widgetId:t.model.widgetId,url:u}):BoldBIDashboard.isNullOrUndefined(t.model.dashboardId)||(s=r("#"+t.model.dashboardId).data("ejDashboardViewer"),s._navigationThroughLinking(e,u,t.model.widgetId))},t.viewData=function(t,i){var u=n.dashboard.formatSelectedColumn(t,i),f;t.model.isIFrameEnable?n.dashboard.postMessageToViewer({action:"viewData",selectedData:u,dashboardId:t.model.dashboardId,widgetId:t.model.widgetId}):BoldBIDashboard.isNullOrUndefined(t.model.dashboardId)||(f=r("#"+t.model.dashboardId).data("ejDashboardViewer"),f._getViewData(t.model.widgetId,u))},t.getFilterInfo=function(t,i){var r=new n.dashboard.selectedFilterInfo,u,f,o,e;for(r.ReportName=t.model.widgetId,r.uniqueColumnName=i.uniqueColumnName,u=0;u<Object.keys(t.model.boundColumns).length;u++)for(f=0;f<t.model.boundColumns[Object.keys(t.model.boundColumns)[u]].length;f++)if(t.model.boundColumns[Object.keys(t.model.boundColumns)[u]][f].uniqueColumnName===i.uniqueColumnName){o=t.model.boundColumns[Object.keys(t.model.boundColumns)[u]][f];e=o.valueType;e==="dimension"&&o.dataType==="datetime"&&(e="datetime");switch(e){case"dimension":switch(i.condition){case"startswith":r.DimensionFilterInfo.Conditions="StartsWith";break;case"contains":r.DimensionFilterInfo.Conditions="Contains";break;case"endswith":r.DimensionFilterInfo.Conditions="EndsWith";break;case"notcontains":r.DimensionFilterInfo.Conditions="NotContains";break;case"include":r.DimensionFilterInfo.Conditions="Include";break;case"exclude":r.DimensionFilterInfo.Conditions="Exclude"}r.DimensionFilterInfo.Text=i.values;break;case"measure":r.MeasureFilterInfo.Conditions=i.condition;r.MeasureFilterInfo.Values=i.values;break;case"datetime":switch(i.condition){case"range":r.DateFilterInfo.Action="Range";r.DateFilterInfo.DateFilterType="Exact";r.DateFilterInfo.DateFilterList=i.values;break;case"include":r.DateFilterInfo.Action="Include";r.DateFilterInfo.DateFilterType="Basic";r.DateFilterInfo.DateFilterList=i.values;break;case"exclude":r.DateFilterInfo.Action="Exclude";r.DateFilterInfo.DateFilterType="Basic";r.DateFilterInfo.DateFilterList=i.values;break;case"relative":r.DateFilterInfo.DateFilterType="Relative";r.DateFilterInfo.DateFilterList=i.values}}}return r},t.formatSelectedColumn=function(t,i){for(var u=[],r=0;r<i.length;r++)u.push(n.dashboard.getFilterInfo(t,i[r]));return u},n.dashboard!==undefined)for(u=Object.keys(t),i=0;i<u.length;i++)n.dashboard[u[i]]=t[u[i]];else n.dashboard=t}(window.bbicustom),function(n){var t=function(){function t(n){this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$}return t.prototype.isDraggedIntoContainerWidget=function(t,i,r,u){var s=this,e,h=this.dashboardDesigner.modules.Mode.designCanvas,o,f,c;return e=this.getAllContainerWidgets(h,this.dashboardDesigner.designerPanel.selectedReportItems[0]),r&&(e=this.getAllContainerWidgets(h)),o=!1,c=t,e.each(function(t,u){var h=n.Dashboard.WidgetHelper.getWidgetInstance(s.bbdesigner$(u)),e=JSON.parse(JSON.stringify(h.CellInfo)),l,a;if(n.DashboardUtil.IsStringNullorWhiteSpace(h.getContainerSettings().CombineWidgetId)||(l=s.dashboardDesigner.modules.containerTypeWidgetHelper.getContainerWidget(h),a=l.getChildWidgetPosition(h),e=a),(e.Row>=i.Row||e.Row+e.RowSpan>i.Row)&&e.Row<i.Row+i.RowSpan&&(e.Column>=i.Column||e.Column+e.ColumnSpan>i.Column)&&e.Column<i.Column+i.ColumnSpan){if(n.Dashboard.WidgetHelper.isContainerWidget(h)&&(r||c.ControlContainer.find("#"+h.ControlContainer[0].id).length===0)){if(o=!0,r)return!0;f=h}if(n.isNullOrUndefined(f))return!1}}),n.isNullOrUndefined(f)||(n.DashboardUtil.IsStringNullorWhiteSpace(t.getContainerSettings().CombineWidgetId)&&t.getContainerSettings().ShowHeader&&(n.Dashboard.WidgetContainerHelper.disableHeader(t,this.dashboardDesigner),t.getContainerSettings().ShowHeader=!1,t.IsRendered&&n.Dashboard.WidgetHelper.isFilterWidgets(t)&&t.updateSize()),t.getContainerSettings().CombineWidgetId=f.getJson().UniqueId,t.ControlContainer.removeClass("bbi-canvas"),this.dashboardDesigner.modules.containerTypeWidgetHelper.getContainerWidget(t).updateDraggedWidgetList(t,!1,!1,u),t.getContainerSettings().PinWidget=!1,t.getContainerSettings().ShowMaximize=!1),o},t.prototype.updateWidgetOnDraggedOutOfContainerWidget=function(t){if(!n.isNullOrUndefined(t.getContainerSettings().CombineWidgetId)&&t.getContainerSettings().CombineWidgetId!==""){var i=this.dashboardDesigner.modules.containerTypeWidgetHelper.getContainerWidget(t),r=i.ControlContainer.find(t.ControlContainer);r.length>0&&(t.ControlContainer.addClass("bbi-canvas"),t.ControlContainer.css("box-shadow","0px 3px 8px rgba(112, 120, 135, 0.24)"),i.updateDraggedWidgetList(t,!1,!0),n.Dashboard.WidgetHelper.updateWidgetContainerPosition(t,0),this.dashboardDesigner.modules.Mode.designCanvas.append(t.ControlContainer),t.getContainerSettings().CombineWidgetId="",t.getContainerSettings().PinWidget=!0)}},t.prototype.updateChildWidgetPosition=function(t,i,r,u){var f=n.isNullOrUndefined(i[0])?i:i[0],e;n.isNullOrUndefined(r)?(this.updateWidgetOnDraggedOutOfContainerWidget(t),t.getContainerSettings().CombineWidgetId=""):(t.getContainerSettings().CombineWidgetId=r,e=this.getContainerWidget(t),f.Column+=e.cellInfo.Column,f.Row+=e.cellInfo.Row,this.isDraggedIntoContainerWidget(t,f,null,u)&&(f=e.updateChildCellRows(f),f=e.updateChildWidgetOnDrop(t,f,u)));t.updatePosition(f)},t.prototype.getContainerWidget=function(n){return this.getContainerWidgetWithId(n.getContainerSettings().CombineWidgetId)},t.prototype.getContainerWidgetWithId=function(n){var t=this.dashboardDesigner.modules.widgetHelper.getAllWidgets().filter(function(t){return t.getJson().UniqueId===n})[0];return this.getWidgetAsContainerWidget(t)},t.prototype.getWidgetAsContainerWidget=function(n){return n},t.prototype.getAllContainerWidgets=function(t,i){return(i===void 0&&(i=null),!n.isNullOrUndefined(i))?t.find(".bbi-container-widget").not(i):t.find(".bbi-container-widget")},t.prototype.getAllWidgets=function(){for(var i,r=n.Dashboard.WidgetHelper.getAllWidgetElements(this.dashboardDesigner._id,this.dashboardDesigner.modules.Mode.designCanvas,".bbi-dbrditem"),u=[],t=0;t<r.length;t++)i=n.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(r[t])),n.Dashboard.WidgetHelper.isContainerWidget(i)&&u.push(this.getWidgetAsContainerWidget(i));return u},t.prototype.addContainerClass=function(n){n.ControlContainer.addClass("bbi-container-widget")},t.prototype.updateRdlParserForContainerWidget=function(t){for(var r,s,h,u,f,c,e=[],o=[],i=0;i<t.rdlJsonObj.WidgetData.length;i++)r=t.rdlJsonObj.WidgetData[i],(r.__type==="Syncfusion.Dashboard.Web.Serialization.Model.DOM.CombineProperties"||r.__type==="Syncfusion.Dashboard.Web.Serialization.Model.DOM.TabbedProperties")&&i>0&&e.push(r),n.DashboardUtil.IsStringNullorWhiteSpace(r.ContainerSettings.CombineWidgetId)||o.push(r);for(i=0;i<e.length;i++)for(s=e[i],h=t.rdlJsonObj.WidgetData.indexOf(s),u=0;u<o.length;u++)f=o[u],s.UniqueId===f.ContainerSettings.CombineWidgetId&&(c=t.rdlJsonObj.WidgetData.indexOf(f),c<h&&(t.rdlJsonObj.WidgetData.splice(c,1),t.rdlJsonObj.WidgetData.splice(h,0,f)));return t},t.prototype.getRootPosition=function(t){var r=JSON.parse(JSON.stringify(t.CellInfo)),i=this.dashboardDesigner.modules.containerTypeWidgetHelper.getContainerWidget(t);if(n.isNullOrUndefined(i))return r;while(!n.isNullOrUndefined(i))r.Column+=i.CellInfo.Column,r.Row+=i.CellInfo.Row,i=t.designerInstance.modules.containerTypeWidgetHelper.getContainerWidget(i);return r},t.prototype.refreshContainerWidgets=function(){var t=this.dashboardDesigner.modules.widgetHelper.getAllWidgets().filter(function(t){return t instanceof n.ContainerWidget&&t.hasMultipleRegion});t.forEach(function(n){n.onWidgetRefresh()})},t.prototype.updateCacheForContainerWidgets=function(){for(var t=this.dashboardDesigner.modules.containerTypeWidgetHelper.getAllWidgets(),n=0;n<t.length;n++)t[n].addLatestCache()},t.prototype.includeChildWidgetsForRefresh=function(t,i){var f,r,e,u;if(!n.isNullOrUndefined(t))for(f=t.getChildWidgetList(),r=0;r<f.length;r++)e=this.dashboardDesigner.modules.util.getWidgetInstanceByGuid(f[r]),n.isNullOrUndefined(e)||(u=e.getJson(),n.isNullOrUndefined(u)||i.indexOf(u.UniqueName)!==-1||i.push(u.UniqueName));return i},t.prototype.updateContainerWidgetsOnRender=function(){for(var t,r=this.dashboardDesigner.widgetHelper.getAllWidgets(),i=0;i<r.length;i++)t=r[i],n.isNullOrUndefined(t.getContainerSettings().CombineWidgetId)||t.getContainerSettings().CombineWidgetId===""||this.updateWidgetsInContainer(t,!0)},t.prototype.updateCurrentChildToParentContainer=function(t){var i=n.Dashboard.WidgetHelper.getWidgetInstance(t[t.length-1]);n.isNullOrUndefined(i.getContainerSettings().CombineWidgetId)||i.getContainerSettings().CombineWidgetId===""||this.updateWidgetsInContainer(i,!0)},t.prototype.updateWidgetsInContainer=function(t,i,r){var f=this.dashboardDesigner.modules.containerTypeWidgetHelper.getContainerWidget(t),u,e,o,s;if(!n.isNullOrUndefined(f)){t.ControlContainer.removeClass("bbi-canvas");var h=this.dashboardDesigner.designerPanel.getWidgetItemPosition(t.CellInfo.Row,t.CellInfo.Column),c=!n.isNullOrUndefined(this.dashboardDesigner.model.widgetContainerSettings.margin)&&!this.dashboardDesigner.isDesignMode()?this.dashboardDesigner.designerPanel.cellVerticalMargin:this.dashboardDesigner.designerPanel.cellVerticalMargin===0?this.dashboardDesigner.designerPanel.cellMargin:this.dashboardDesigner.designerPanel.cellVerticalMargin,l=!n.isNullOrUndefined(this.dashboardDesigner.model.widgetContainerSettings.margin)&&!this.dashboardDesigner.isDesignMode()?this.dashboardDesigner.designerPanel.cellHorizontalMargin:this.dashboardDesigner.designerPanel.cellHorizontalMargin===0?this.dashboardDesigner.designerPanel.cellMargin:this.dashboardDesigner.designerPanel.cellHorizontalMargin;f.positionChildWidget(t,h,c,l);u=new n.Dashboard.CellInfo;u=JSON.parse(JSON.stringify(t.CellInfo));i&&(e=this.dashboardDesigner.modules.containerTypeWidgetHelper.getContainerWidget(t),o=e.getChildWidgetPosition(e),u.Column+=o.Column,u.Row+=o.Row);f.updateChildWidgetOnDrop(t,u);f.updateDraggedWidgetList(t,i,!1,r);this.dashboardDesigner.modules.containerPropertyItem.updateCombineWidgetBackground(t);this.dashboardDesigner.designerPanel.isMobileView&&!n.DashboardUtil.IsStringNullorWhiteSpace(t.getContainerSettings().CombineWidgetId)&&(s=this.dashboardDesigner.modules.containerTypeWidgetHelper.getContainerWidget(t),s.updateChildForMobileMode(t))}},t.prototype.getContainerIdFromCopiedItems=function(t,i){for(var o,f,e,u=[],r=0;r<t.length;r++)if(o=this.bbdesigner$.extend(!0,{},t[r].item),!n.isNullOrUndefined(o.WidgetsList)){u=o.WidgetsList;break}if(u.length===0)return null;for(r=0;r<u.length;r++)for(f=u[r],e=0;e<f.WidgetIds.length;e++)if(f.WidgetIds[e]===i)return f.TabId},t.prototype.getContainerIdsForChildWidgets=function(n,t){var e,o,i,r,u,f;if(!(t instanceof TabbedProperties))return[];for(e=[],o=t,i=0;i<n.length;i++)for(r=0;r<o.WidgetsList.length;r++)for(u=o.WidgetsList[r],f=0;f<u.WidgetIds.length;f++)u.WidgetIds[f]===n[i].UniqueId&&e.push(u.TabId);return e},t.prototype.handleControlLevelExport=function(){var t=this;!n.isNullOrUndefined(this.dashboardDesigner.model.dashboardFromData)&&this.dashboardDesigner.model.dashboardFromData.loadFromData&&this.dashboardDesigner.model.dashboardFromData.isControl&&this.dashboardDesigner.widgetHelper.getAllWidgets().filter(function(t){return n.Dashboard.WidgetHelper.isContainerWidget(t)===!0}).length>0&&this.dashboardDesigner.widgetHelper.getAllWidgets().forEach(function(i){n.Dashboard.WidgetHelper.isContainerWidget(i)&&t.getWidgetAsContainerWidget(i).exportControl()})},t.prototype.isDragRestricted=function(n,t,i){return n.hasClass("e-tab-header e-control")||n.parents(".e-tab-header").length>0?!0:i},t.prototype.doInterWidgetLinking=function(t,i){for(var r=t.getJson().WidgetLink,f=this.dashboardDesigner.modules.widgetHelper.getAllWidgets().filter(function(t){return t instanceof n.ContainerWidget&&t.hasMultipleRegion}),e=function(t){var u=f.filter(function(n){return n.Name===r.WidgetList[t].Widget});n.isNullOrUndefined(u)||(r.WidgetList[t].LinkType===WidgetLinkType.Default?u[0].showActiveRegion(i):u[0].showActiveRegion(Number(r.WidgetList[t].CustomIndex)-1))},u=0;u<r.WidgetList.length;u++)e(u)},t.prototype.getChildWidgetCell=function(t,i){if(!n.DashboardUtil.IsStringNullorWhiteSpace(t.getContainerSettings().CombineWidgetId)){var r=this.getContainerWidget(t);return r.getChildWidgetPosition(i?r:t)}return t.CellInfo},t}();n.ContainerWidgetHelper=t}(BoldBIDashboard||(BoldBIDashboard={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalBubbleMapReportItem=function(n){function t(t){var i=n.call(this,t,"BubbleMap","e-bubblemap-item")||this;return i.field=null,i.dataValues=null,i.layerType="geometry",i.shapeColor="#E5E5E5",i.hoverColor="gray",i.strokeThickness=.75,i.strokeColor="#ffffff",i.mapNameSpace="BoldBIDashboard.datavisualization.Map",i.requiredScriptFile="ej1.map.all.min.js",i.bbdesigner$=i.designerInstance.bbdesigner$,i.widgetJson=new BubbleMapProperties(t),i.designerId=i.designerInstance._id,i.propertyPanel=t.modules.propertyPanel,i.isShapeLoaded=!0,i.mapHelper=new MapCommonHelper(i.designerInstance),i.designerInstance.isViewMode()&&(i.isWidgetRenderedInViewMode=!1),i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.relation,GroupId:"c55f5601-8e79-4a16-94d6-ddd4cc051306",Items:[{id:"9ea7c153-2f82-4b34-a3ef-2686be50f998",widgetName:"BubbleMap",widgetDisplayName:n.itemPanel.widgetTitle.bubbleMap,cssClass:"bbi-widgeticon bbi-designer-widget-bubblemap",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.BubbleMapItem",searchCategory:["bubblemap","Relationship"],widgetconfiginfo:null,useIconTemplate:!0,hide:!0,iconTemplate:"<span class='path1' ><\/span><span class='path2' ><\/span><span class='path3' ><\/span><span class='path4'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.bubbleMap,description:n.itemPanel.widgetDescription.bubbleMapDesc,dataRequirement:n.itemPanel.widgetDataRequirements.bubbleMapDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleMapProperties"}]};BoldBIDashboardDesigner.widgetItems.push(t)},t.prototype.init=function(n,t){BoldBIDashboard.isNullOrUndefined(ejdashboard[this.getMapProperties().ShapeData])?(this.controlContainer.data("widgetInstance",this),this.controlContainer.attr({"data-prevent-loading-indicator":!0})):this.renderBubbleMap(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.bubbleMapElement)||this.updateBubbleMapSize()},t.prototype.update=function(n){this.IsRendered=!1;this.updateBubbleMapData(n)},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:this.requiredScriptFile,NameSpace:this.mapNameSpace},DependentScripts:[]}},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,this.mapNameSpace)},t.prototype.getFieldContainer=function(){return this.mapHelper.getFieldContainer()},t.prototype.onFieldSettingsClick=function(n,t){return this.mapHelper.onFieldSettingsClick(n,t)},t.prototype.getJson=function(){return this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t);this.isDataUpdated=!1;BoldBIDashboard.isNullOrUndefined(ejdashboard[this.getMapProperties().ShapeData])&&(this.mapHelper.downloadMapJsonData(this.getMapProperties().ShapeData),this.mapHelper.setTimerToDwnldMapFile({widgetJson:this.getMapProperties(),mapObj:this,controlType:"BubbleMap",shapeData:this.getMapProperties().ShapeData},!1))},t.prototype.getPropertyPanelItems=function(){return this.bubbleMapPropertyPanel()},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateBubbleMapProperties(n,t,i,r)},t.prototype.updateInitialSelection=function(){this.initialSelectionForBubbleMap()},t.prototype.clearFilter=function(n){BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this);this.getMapProperties().SelectedFilterValues=[];this.designerInstance.modules.serialization.notifyChange();BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName);var t=this.bubbleMapElement.data("BoldBIDashboardMap");BoldBIDashboard.isNullOrUndefined(t)||(t.model.layers[0].selectedItems=[],this.refresh())},t.prototype.getMobileViewHeight=function(){return 3*this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.refresh=function(){this.bubbleMapElement.BoldBIDashboardMap("refresh")},t.prototype.dispose=function(){this.disposeBubbleMap();n.prototype.dispose.call(this)},t.prototype.getFieldView=function(){var t=[BoldBIDashboard.Dashboard.SupportedDataType.Number,BoldBIDashboard.Dashboard.SupportedDataType.Boolean,BoldBIDashboard.Dashboard.SupportedDataType.String];return n.prototype.getFieldView.call(this,[],t)},t.prototype.canCombineRequest=function(){return!0},t.prototype.isShapeFileAvailable=function(){return!BoldBIDashboard.isNullOrUndefined(ejdashboard[this.getMapProperties().ShapeData])},t.prototype.isScriptFilesAvailable=function(){return!BoldBIDashboard.isNullOrUndefined(this.getControlInstance(this.mapNameSpace))},t.prototype.renderBubbleMap=function(t){try{var i=void 0;i=this.designerInstance.isDesignMode()?!0:!this.isWidgetRenderedInViewMode;this.isShapeFileAvailable()&&this.isScriptFilesAvailable()&&i&&(BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t))),this.renderbubbleMapElement(),this.isWidgetRenderedInViewMode=!0,!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer),this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.BubbleMap))}catch(r){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:r,Type:r.name})}},t.prototype.renderbubbleMapElement=function(){this.createbubbleMapElement();this.layerType="geometry";this.shapeDataPath="Country";this.hoverColor="gray";this.shapeColor="#E5E5E5";this.bubbleMapElement.BoldBIDashboardMap({zoomSettings:{maxValue:30,factor:.1},mouseover:this.bbdesigner$.proxy(this.setCursorType,this),layers:[{layerType:this.layerType,dataSource:[],shapeDataPath:this.shapeDataPath,shapePropertyPath:this.getMapProperties().ShapePropertyPath,shapeData:ejdashboard[this.getMapProperties().ShapeData],enableMouseHover:!0,enableSelection:!1,shapeSettings:{fill:this.shapeColor,highlightColor:this.hoverColor,strokeThickness:this.strokeThickness,stroke:this.strokeColor}}],shapeSelected:this.bbdesigner$.proxy(this.bubbleMapItemSelected,this),onRenderComplete:this.bbdesigner$.proxy(this.actionComplete,this)})},t.prototype.actionComplete=function(){var n=this.bubbleMapElement.data("BoldBIDashboardMap");!BoldBIDashboard.isNullOrUndefined(n)&&this.isMapLoaded&&this.designerInstance.modules.util.hideLoadingIndicator(this.controlContainer);this.IsRendered=!0},t.prototype.createbubbleMapElement=function(){this.bubbleMapItem=BoldBIDashboard.buildTag("div.e-bubblemapitem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder,overflow:"hidden"},{id:this.designerId+"bubblemapItem"+this.widgetJson.UniqueName});this.bubbleMapElement=BoldBIDashboard.buildTag("div.e-bubblemap-element","",{width:"100%",height:"100%",position:"relative","background-color":"white","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designerId+"bubblemapElement"+this.widgetJson.UniqueName});this.contentContainer.append(this.bubbleMapItem);this.controlContainer.data("widgetInstance",this);BoldBIDashboard.isNullOrUndefined(ejdashboard[this.getMapProperties().ShapeData])&&this.controlContainer.attr({"data-prevent-loading-indicator":!0});this.bubbleMapItem.append(this.bubbleMapElement)},t.prototype.updateBubbleMapData=function(n){var e,r,o,u;if(this.dataValues=n,this.isDataUpdated=!0,this.isShapeFileAvailable()&&this.isScriptFilesAvailable()){this.isMapLoaded=!0;BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this);this.bubbleMapItem.show();BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this);var t=this.bubbleMapElement.data("BoldBIDashboardMap"),i=null,f=null;this.designerInstance.modules.serialization.updateWidgetData(this.getMapProperties(),this.DataGroupInfo);BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error?BoldBIDashboard.isNullOrUndefined(n.Message)||(this.hideWidgetNotConfigured(),this.widgetContainerHelper.showControlError(this,n)):(n.noDataAvailable?(this.bubbleMapItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this),this.IsRendered=!0):(this.bubbleMapItem.show(),BoldBIDashboard.isNullOrUndefined(n)||n.data==="[]"||!BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)||typeof n=="string"&&n.indexOf("Sf_Exception")!==-1?(n.data==="[]"&&n.columnBindings==="{}"||!BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty)&&(this.clearBubbleMapData(t),this.showWidgetNotConfigured()):(i=JSON.parse(n.data),f=JSON.parse(n.columnBindings),e=this.getColumnList(i),r=this.controlContainer.height()<this.controlContainer.width()?this.controlContainer.height():this.controlContainer.width(),e.length>1?(this.generateTooltip(f),o=this.DataGroupInfo.FieldContainers[0].FieldInfos[0].UniqueColumnName,u=this.DataGroupInfo.FieldContainers[1].FieldInfos[0].UniqueColumnName,t.model.layers[0].bubbleSettings.showBubble=!0,t.model.layers[0].bubbleSettings.valuePath=o,t.model.layers[0].shapeSettings.valuePath=u,t.model.layers[0].bubbleSettings.minValue=r*.005,t.model.layers[0].bubbleSettings.maxValue=r*.05,t.model.layers[0].bubbleSettings.color=this.getMapProperties().BubbleColor,t.model.layers[0].bubbleSettings.bubbleOpacity=.6,t.model.layers[0].dataSource=i,t.model.layers[0].shapeDataPath=u,t.model.layers[0].showTooltip=!0,t.model.layers[0].enableMouseHover=!0,t.model.layers[0].tooltipTemplate="template"+this.bbdesigner$(this.bubbleMapElement).attr("id")+"_tooltip",this.hideWidgetNotConfigured()):(this.clearBubbleMapData(t),this.showWidgetNotConfigured()))),this.designerInstance.modules.util.updateAction("BubbleMap","Link","Link"));this.refresh();this.updateInitialSelection()}},t.prototype.clearBubbleMapData=function(n){n.model.layers[0].dataSource=[];n.model.layers[0].shapeDataPath=this.shapeDataPath;n.model.layers[0].showTooltip=!1;n.model.layers[0].enableMouseHover=!0;n.model.layers[0].bubbleSettings.showBubble=!1},t.prototype.showWidgetNotConfigured=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this)},t.prototype.hideWidgetNotConfigured=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this)},t.prototype.getColumnList=function(n){for(var i=Object.keys(n[0]),r=[],t=0;t<i.length;t++)r.push({id:i[t],text:i[t]});return r},t.prototype.generateTooltip=function(n){var e,o,s,u,f=[],t,i,r,h;if(u='<script id="template'+this.bbdesigner$(this.bubbleMapElement).attr("id")+'_tooltip" type="application/jsrender">',t="template"+this.bbdesigner$(this.bubbleMapElement).attr("id")+"_tooltip",t="#"+t,this.bbdesigner$(t).length>0&&this.bbdesigner$(t).remove(),f.push((e={},e[n[this.DataGroupInfo.FieldContainers[1].FieldInfos[0].UniqueColumnName]]="{{:(#data['"+this.DataGroupInfo.FieldContainers[1].FieldInfos[0].UniqueColumnName+"'])}}",e)),f.push((o={},o[n[this.DataGroupInfo.FieldContainers[0].FieldInfos[0].UniqueColumnName]]=this.getFormattedToolTipString(this.DataGroupInfo.FieldContainers[0].FieldInfos[0]),o)),i=BoldBIDashboard.DashboardUtil.getToolTipFieldInfos(this),!BoldBIDashboard.isNullOrUndefined(i))for(r=0;r<i.length;r++)h=this.getFormattedToolTipString(i[r]),f.push((s={},s[n[i[r].UniqueColumnName]]=h,s));u+=this.widgetHelper.generateToolTipTemplate(f,this.bbdesigner$(this.bubbleMapElement).attr("id"),1e3);u+="<\/script>";this.bbdesigner$(this.bubbleMapItem).append(u)},t.prototype.getFormattedToolTipString=function(t){var i=n.prototype.getDefaultMeasureFormat.call(this),f="false",r,u,e,o;return t.MeasureFormatting!==null&&(i=t.MeasureFormatting,f="true"),r=i.DecimalSeparator.AliasValue,u=i.GroupSeparator.AliasValue,r==="'"?r="&#39;":u==="'"&&(u="&#39;"),e=this.designerInstance.model.localeSettings.culture,o="{{: ~formatTooltip(#data['"+t.UniqueColumnName+"'], '"+i.Culture+"', '"+i.DecimalPoints+"', '"+i.FormatType+"', '"+r+"', '"+u+"', '"+i.Prefix+"', '"+i.Suffix+"', '"+i.Unit+"', '"+f+"', '"+e+"', '"+i.EnableLakhsAndCroreRep+"')}}",o},t.prototype.setCursorType=function(n){this.getMapProperties().UrlLink.EnableLink||this.getMapProperties().FilterSettings.ActAsMasterWidget?(n.model.layers[0].enableSelection=!0,this.bbdesigner$(n.originalEvent.shape).css("cursor","pointer")):(this.bbdesigner$(n.originalEvent.shape).css("cursor","default"),n.model.layers[0].enableSelection=!1)},t.prototype.bubbleMapPropertyPanel=function(){BoldBIDashboard.isNullOrUndefined(this.field)&&(this.field=this.getShapeColumnValues(ejdashboard[this.getMapProperties().ShapeData]));var t=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.getMapProperties().FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo,this.widgetJson.ContainerSettings);return this.containerPropertyItem=t.containerProperties,t.propertyGridItems.Header=this.widgetJson.ContainerSettings.Title,t.propertyGridItems.SubTitle=this.widgetJson.ContainerSettings.SubTitle,t.propertyGridItems.Description=this.widgetJson.ContainerSettings.Description,t.propertyGridItems.Type=this.Type,t.linkingProperty.Items[0].value=n.prototype.useExistingLink.call(this),this.bbdesigner$.each(t.containerSettingsProperty.Items,function(n,t){(t.name==="ShowWidgetBackgroundImage"||t.name==="WidgetBackgroundImageMode"||t.name==="WidgetBackgroundImageSource"||t.name==="WidgetBackgroundImageBrowse"||t.name==="WidgetBackgroundImageURL")&&(t.isVisible=!1)}),t.propertyGridItems.Items=[{CategoryName:"Basic Settings",Items:[{name:"BubbleColor",displayName:"Bubble Color",value:this.getMapProperties().BubbleColor,itemType:"color"},{name:"ShapeData",displayName:"Map",value:this.getMapProperties().ShapeData,itemType:"dropdown",enableFilterSearch:!0,valueList:this.mapHelper.getShapeDateValueList()},{name:"shapePropertyPath",displayName:"Column",value:this.getMapProperties().ShapePropertyPath,itemType:"dropdown",valueList:BoldBIDashboard.isNullOrUndefined(ejdashboard[this.getMapProperties().ShapeData])?[this.getMapProperties().ShapePropertyPath]:this.field}]},t.linkingProperty,t.filterSettingsProperty,t.containerSettingsProperty,t.containerActionsProperty,t.noDataContainerActionsProperty],t.propertyGridItems},t.prototype.updateBubbleMapProperties=function(t,i,r,u){var s=!1,f,e,h,o;switch(t){case"Name":this.widgetJson.ContainerSettings.Title=r;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,r);break;case"BubbleColor":this.updatePropertyAsync(this.updateBubbleColor,r);break;case"HoverColor":this.updatePropertyAsync(this.updateHoverColor,r);break;case"ShapeData":this.getMapProperties().ShapeData=r;BoldBIDashboard.isNullOrUndefined(ejdashboard[r])?(this.mapHelper.downloadMapJsonData(r),this.mapHelper.setTimerToDwnldMapFile({widgetJson:this.getMapProperties(),mapObj:this,controlType:this.Type},!0)):this.updatePropertyAsync(this.updateShapeData,r);break;case"shapePropertyPath":this.updatePropertyAsync(this.updateShapePropertyPath,r);break;case"ItemLink":n.prototype.updateLink.call(this,r);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,r);break;default:s=!0}if(!s){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(f=this.designPanelInstance.selectedReportItems,f.length>0))for(e=0;e<f.length;e++)h=f[e],h.attr("id")===this.controlContainer.attr("id")&&(o=this.bbdesigner$.extend(!0,{},u),o.categoryName=u.categoryName,o.valueList=u.valueList,this.propertyPanel.updatePropertyValue(o,this.Type,r));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-bubblemap-item",this.designerId+"_"+this.widgetJson.UniqueName,[t,r,i,u],[t,i,r,u])}},t.prototype.updatePropertyAsync=function(n,t){var i=this,r;this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer);r=this;setTimeout(function(){i.bbdesigner$.proxy(n,r,t).call();i.designerInstance.designerPanel.hideLoadingIndicator(i.controlContainer);i.designerInstance.modules.serialization.notifyChange()},0)},t.prototype.updateBubbleColor=function(n){if(this.getMapProperties().BubbleColor=n,!BoldBIDashboard.isNullOrUndefined(this.bubbleMapElement)){var t=this.bubbleMapElement.data("BoldBIDashboardMap");t.model.layers[0].bubbleSettings.color=n;this.bubbleMapElement.BoldBIDashboardMap("refresh")}},t.prototype.updateHoverColor=function(n){var t=this.bubbleMapElement.data("BoldBIDashboardMap");t.model.layers[0].shapeSettings.highlightColor=n;this.hoverColor=n;this.bubbleMapElement.BoldBIDashboardMap("refresh")},t.prototype.updateShapeData=function(n){var t,i;BoldBIDashboard.isNullOrUndefined(this.bubbleMapElement)&&!BoldBIDashboard.isNullOrUndefined(ejdashboard[n])&&(this.contentContainer.find(".e-map-file-err").remove(),this.renderBubbleMap(this.getMapProperties()),this.dataConfigurationInstance.postDraggedFields());t=BoldBIDashboard.isNullOrUndefined(this.bubbleMapElement)?null:this.bubbleMapElement.data("BoldBIDashboardMap");BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(ejdashboard[n])||(t.model.layers[0].shapeData=ejdashboard[n],this.field=this.getShapeColumnValues(ejdashboard[n]),this.bubbleMapElement.BoldBIDashboardMap({baseMapIndex:1}),this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.view&&(i=this.designerInstance.element.find("#"+this.designerId+"_BubbleMap_BasicSettings_shapePropertyPath").data("BoldBIDashboardDropDownList"),i.setModel({dataSource:this.field})),this.getMapProperties().ShapePropertyPath=this.field.indexOf("name")!==-1?"name":this.field.indexOf("NAME")!==-1?"NAME":this.field[0],this.updateShapePropertyPath(this.getMapProperties().ShapePropertyPath),this.setPropertyElement("BasicSettings","shapePropertyPath",this.getMapProperties().ShapePropertyPath));BoldBIDashboard.isNullOrUndefined(ejdashboard[n])&&(BoldBIDashboard.isNullOrUndefined(t)||t.destroy(),BoldBIDashboard.isNullOrUndefined(this.bubbleMapItem)||this.bubbleMapItem.remove(),this.bubbleMapElement=null,this.mapHelper.showMapFileErr(this,this.getMapProperties(),this.Type))},t.prototype.getShapeColumnValues=function(n){var r=[],u,i,t;if(!BoldBIDashboard.isNullOrUndefined(n))for(u="features",i=Object.keys(n[u][0].properties),t=0;t<i.length;t++)r.push(i[t]);return r},t.prototype.updateShapePropertyPath=function(n){var t=this.bubbleMapElement.data("BoldBIDashboardMap");t.model.layers[0].shapePropertyPath=n;this.getMapProperties().ShapePropertyPath=n;this.refresh()},t.prototype.setPropertyElement=function(n,t,i,r){this.propertyPanel.canUpdate=!1;var f=this.propertyPanel.getPropertyElement(this.bubbleMapPropertyPanel(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r),u=this.bbdesigner$.extend(!0,{},f);u.categoryName=n;this.propertyPanel.updatePropertyValue(u,this.Type,i);this.propertyPanel.canUpdate=!0},t.prototype.bubbleMapItemSelected=function(t){var f,e,i,o,s,a;if(this.getMapProperties().FilterSettings.ActAsMasterWidget){if(!BoldBIDashboard.isNullOrUndefined(t)){if(this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;this.getMapProperties().SelectedFilterValues=[];var r=[],u=[],c=[],h="",l=this.DataGroupInfo.FieldContainers;for(f=0;f<l.length;f++)e=l[f].FieldInfos[0],BoldBIDashboard.isNullOrUndefined(e)||e.FieldActualType==="bbi-designer-dataset-number"||r.push(e);if(!BoldBIDashboard.isNullOrUndefined(t.originalEvent)&&t.originalEvent.length>0)for(i=0;i<t.originalEvent.length;i++)if(BoldBIDashboard.isNullOrUndefined(t.originalEvent[i].data)){if(BoldBIDashboard.isNullOrUndefined(t.originalEvent[i].data)&&!BoldBIDashboard.isNullOrUndefined(t.model.layers[0].dataSource)){for(o=0;o<t.model.layers[0].dataSource.length;o++)for(s=0;s<r.length;s++)h=r[s].UniqueColumnName,c.push(t.model.layers[0].dataSource[o][h]);u[h]=c;u.action=InitialDimensionFilterCondition.Exclude}}else u=t.originalEvent[i].data;n.prototype.performInteraction.call(this,this,r,u)}}else!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().UrlLink)&&this.getMapProperties().UrlLink.EnableLink&&(a=n.prototype.generateLinkData.call(this,this,t),n.prototype.performLinking.call(this,a))},t.prototype.updateBubbleMapSize=function(){var t,n,i;this.contentContainer.find(".e-map-file-err").length===1&&(t=this.contentContainer.find(".e-map-file-err"),t.css({top:this.contentContainer.height()/2-t.height()+"px"}));BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this)?this.widgetContainerHelper.showControlError(this,this.dataValues):BoldBIDashboard.isNullOrUndefined(this.bubbleMapElement)||(n=this.bubbleMapElement.data("BoldBIDashboardMap"),i=this.controlContainer.height()<this.controlContainer.width()?this.controlContainer.height():this.controlContainer.width(),n.model.layers[0].bubbleSettings.showBubble&&(n.model.layers[0].bubbleSettings.minValue=i*.005,n.model.layers[0].bubbleSettings.maxValue=i*.05),n.option("width","100%"),n.option("height","100%"),this.refresh())},t.prototype.initialSelectionForBubbleMap=function(){var n=this.getMapProperties().SelectedFilterValues,t=this.bubbleMapElement.data("BoldBIDashboardMap"),u,f,i,e,r;if(!BoldBIDashboard.isNullOrUndefined(t)&&this.getMapProperties().FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0){for(u=t.model.shapeSelected,t.model.shapeSelected=null,f=n.length,i=0;i<f;i++)for(e=n[i].InitialDimensionFilter.Text.length,r=0;r<e;r++)t.selectShape(n[i].InitialDimensionFilter.Text[r].toString());t.model.shapeSelected=u;BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this)}else BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this)},t.prototype.getMapProperties=function(){return this.widgetJson},t.prototype.disposeBubbleMap=function(){var n=this.bubbleMapElement.data("BoldBIDashboardMap");BoldBIDashboard.isNullOrUndefined(n)||n.destroy();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.BubbleMap)},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.BubbleMapItem",InternalBubbleMapReportItem,window);BoldBIDashboard.DashboardDesignerUtility.BubbleMapItem.prototype.initialize();__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalBubbleScatterChartReportItem=function(n){function t(t){var i=n.call(this,t,"ScatterChart","e-bubblescatter-item")||this;return i.bubbleScatterchartJson=null,i.bubbleScatterChartObj=null,i.controlContainer=null,i.locale=null,i.defaultColorPalette=[],i.bubbleScatterChartItem=null,i.bubbleScatterChartElement=null,i.dataValues=null,i.colorFields=[],i.locale=t.getLocalizationContent(),i.widgetJson=new BubbleScatterChartProperties(t),i.propertyPanel=t.modules.propertyPanel,i.designerId=i.designerInstance._id,i.defaultColorPalette=BoldBIDashboard.DashboardUtil.defaultColorPalette,i.dashboardDesigner=t,i.colorFields=i.getColorFields(),n.prototype.initializeVirtualScrollSettings.call(i,1e3,1),i.unwireEvents(),i.wireEvents(),i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.distribution,GroupId:"8f1a018f-e7df-4f4d-933f-d9f6e22f6f96",Items:[{id:"8f1a018f-e7df-4f4d-933f-d9f6e22f6f96",widgetName:"ScatterChart",widgetDisplayName:n.itemPanel.widgetTitle.scatterChart,cssClass:"bbi-widgeticon bbi-designer-bubblescatter-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.BubbleScatterChartItem",searchCategory:["distribution","scatter","bubble"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.scatterChart+" Chart",description:n.itemPanel.widgetDescription.scatterChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.scatterChartDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleScatterChartProperties"}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){this.createBubbleScatterContainer(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);this.updateBubbleScatterSize()},t.prototype.resetProperties=function(){this.propertyPanel.updateItemVisibility(this.Type,"LegendSettings","CustomLegend",!1);this.propertyPanel.updateCategoryVisibility(this.Type,"SeriesPalette",!1);this.getBubbleScatterProperties().DefaultColors=[];this.getBubbleScatterProperties().ColorPaletteModel=[];this.getBubbleScatterProperties().IsDefaultColorPalette=!0},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej2.chart.all.min.js",NameSpace:"ejdashboard.charts.Chart"},DependentScripts:[]}},t.prototype.update=function(n){this.IsRendered=!1;this.updateTitleSubTitleFontTheme();this.updateBubbleScatterChartData(n)},t.prototype.getWidgetImage=function(){return'<?xml version="1.0" encoding="UTF-8"?><svg width="100%" height="100%" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Widget-Icons-/-scatter-initial-image" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Group"><polygon id="Path-5" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero" points="1.55555556 -2.84217094e-14 1.555 26.111 27.6666667 26.1111111 27.6666667 27.2222222 0.444444444 27.2222222 0.444444444 -2.84217094e-14"><\/polygon><g id="Group-9" transform="translate(4.111111, 0.444444)" opacity="0.8"><circle id="Oval-4-Copy-6" fill="var(--widget-notconfigured-image-background2)" cx="2.33333333" cy="21" r="2.33333333"><\/circle><circle id="Oval-4-Copy-15" fill="var(--widget-notconfigured-image-background2)" cx="2.33333333" cy="5.44444444" r="2.33333333"><\/circle><circle id="Oval-4-Copy-16" fill="var(--widget-notconfigured-image-background2)" cx="5.44444444" cy="16.3333333" r="2.33333333"><\/circle><circle id="Oval-4-Copy-17" fill="var(--widget-notconfigured-image-background2)" cx="13.2222222" cy="10.1111111" r="2.33333333"><\/circle><circle id="Oval-4-Copy-18" fill="var(--widget-notconfigured-image-background2)" cx="17.8888889" cy="2.33333333" r="2.33333333"><\/circle><circle id="Oval-4-Copy-19" fill="var(--widget-notconfigured-image-background2)" cx="16.3333333" cy="14.7777778" r="2.33333333"><\/circle><rect id="Rectangle-Copy-22" fill="var(--widget-notconfigured-image-background1)" transform="translate(6.410943, 9.522054) scale(-1, -1) rotate(-315.000000) translate(-6.410943, -9.522054) " x="4.8553872" y="7.96649831" width="3.11111111" height="3.11111111"><\/rect><rect id="Rectangle-Copy-29" fill="var(--widget-notconfigured-image-background1)" transform="translate(12.633165, 3.299832) scale(-1, -1) rotate(-315.000000) translate(-12.633165, -3.299832) " x="11.0776094" y="1.74427609" width="3.11111111" height="3.11111111"><\/rect><rect id="Rectangle-Copy-30" fill="var(--widget-notconfigured-image-background1)" transform="translate(20.410943, 11.077609) scale(-1, -1) rotate(-315.000000) translate(-20.410943, -11.077609) " x="18.8553872" y="9.52205387" width="3.11111111" height="3.11111111"><\/rect><rect id="Rectangle-Copy-31" fill="var(--widget-notconfigured-image-background1)" transform="translate(20.410943, 18.855387) scale(-1, -1) rotate(-315.000000) translate(-20.410943, -18.855387) " x="18.8553872" y="17.2998316" width="3.11111111" height="3.11111111"><\/rect><rect id="Rectangle-Copy-32" fill="var(--widget-notconfigured-image-background1)" transform="translate(11.077609, 18.855387) scale(-1, -1) rotate(-315.000000) translate(-11.077609, -18.855387) " x="9.52205387" y="17.2998316" width="3.11111111" height="3.11111111"><\/rect><\/g><\/g><\/g><\/svg>'},t.prototype.getFieldContainer=function(){var f=new BoldBIDashboard.Dashboard.FieldContainerForUI,t,i,r,e,u,o,s;return f.Name="YAxis",f.DisplayName=this.locale.fieldContainer.yAxis,f.ContainerType=FieldContainerType.Numeric,f.CategoryCount=1,f.Required=!0,f.QueryOrder=0,t=new BoldBIDashboard.Dashboard.FieldContainerForUI,t.Name="XAxis",t.CategoryCount=1,t.DisplayName=this.locale.fieldContainer.xAxis,t.ContainerType=FieldContainerType.None,t.Required=!0,t.HasCustomDate=!0,t.QueryOrder=1,i=new BoldBIDashboard.Dashboard.FieldContainerForUI,i.Name="Label",i.DisplayName=this.locale.fieldContainer.label,i.ContainerType=FieldContainerType.Non_Numeric,i.CategoryCount=1,i.HasCustomDate=!0,i.QueryOrder=4,r=new BoldBIDashboard.Dashboard.FieldContainerForUI,r.Name="Row",r.DisplayName=this.locale.fieldContainer.row,r.ContainerType=FieldContainerType.None,r.CategoryCount=1,r.HasCustomDate=!0,r.QueryOrder=3,e=new BoldBIDashboard.Dashboard.FieldContainerForUI,e.Name="Size",e.DisplayName=this.locale.fieldContainer.size,e.ContainerType=FieldContainerType.Numeric,e.CategoryCount=1,e.QueryOrder=2,u=new BoldBIDashboard.Dashboard.FieldContainerForUI,u.Name="HiddenColumn",u.DisplayName=this.locale.dataconfiguration.filedContainer.hiddenColumnName,u.ContainerType=FieldContainerType.None,u.QueryOrder=0,u.ShowDescriptionIcon=!0,u.TooltipText=this.locale.fieldContainer.hiddenColumnMessage.bubbleSactterChart,o=n.prototype.getFilterColumn.call(this),o.HasCustomDate=!0,s=BoldBIDashboard.DashboardUtil.getToolTipFieldsDefaultContainer(),[f,t,i,r,e,u,o,s]},t.prototype.onFieldSettingsClick=function(n,t){for(var r,i=0;i<t.length;i++){if((n.ContainerName==="XAxis"||n.ContainerName==="YAxis")&&(r=t[i].Name,r===SummaryType.NONE)){t[i].IsVisible=!0;break}n.ContainerName==="HiddenColumn"&&(t[i].Name==="Sort"||t[i].Name==="DimensionFilters"||t[i].Name==="MeasureFilter"||t[i].Name==="RelativeDateFilter"||t[i].Name==="MeasureFormat")&&(t[i].IsVisible=!1)}return t},t.prototype.getJson=function(){return this.widgetJson},t.prototype.destroy=function(){this.unwireEvents()},t.prototype.clearFilter=function(n){BoldBIDashboard.isNullOrUndefined(this.bubbleScatterChartObj)||(BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this),this.getBubbleScatterProperties().SelectedFilterValues=[],this.isCurrentMaster=!1,this.designerInstance.modules.serialization.notifyChange(),BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this),this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName),this.bubbleScatterChartObj.selectedDataIndexes.length>0&&(this.bubbleScatterChartObj.selectedDataIndexes=[]),this.bubbleScatterChartObj.refresh())},t.prototype.getMobileViewHeight=function(){return this.designerInstance.modules.Mode.designCanvas.width()>this.designerInstance.modules.Mode.designCanvas.height()?this.designerInstance.modules.Mode.designCanvas.height():this.designerInstance.modules.Mode.designCanvas.width()},t.prototype.refresh=function(){this.updateBubbleScatterSize()},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t)},t.prototype.getPropertyPanelItems=function(){return this.getBubbleScatterChartPropertyPanel()},t.prototype.updatePropertyChange=function(n,t,i,r){this.bubbleScatterChartPropertyChange(n,t,i,r)},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,"ejdashboard.charts.Chart")},t.prototype.wireEvents=function(){this.dashboardDesigner.element.on("click","#"+this.designerId+"_SeriesShape_settings_ok",this.bbdesigner$.proxy(this.updateSeriesType,this));this.dashboardDesigner.element.on("click","#"+this.designerId+"_SeriesShape_settings_cancel",this.bbdesigner$.proxy(this.closeSeriesShapeSettings,this));this.dashboardDesigner.element.on("click","#"+this.designerId+"_ScatterChart_Formatting_Formatting_color_settings_button",this.bbdesigner$.proxy(this.openAdvancedColorSettings,this))},t.prototype.unwireEvents=function(){this.dashboardDesigner.element.off("click","#"+this.designerId+"_SeriesShape_settings_ok",this.bbdesigner$.proxy(this.updateSeriesType,this));this.dashboardDesigner.element.off("click","#"+this.designerId+"_SeriesShape_settings_cancel",this.bbdesigner$.proxy(this.closeSeriesShapeSettings,this));this.dashboardDesigner.element.off("click","#"+this.designerId+"_ScatterChart_Formatting_Formatting_color_settings_button",this.bbdesigner$.proxy(this.openAdvancedColorSettings,this))},t.prototype.createBubbleScatterContainer=function(t){BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));try{this.bubbleScatterChartItem=BoldBIDashboard.buildTag("div.e-bubblescatterchartitem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder,"background-color":"transparent"},{id:this.designerId+"bubbleScatterChartItem"+this.widgetJson.UniqueName});this.bubbleScatterChartElement=BoldBIDashboard.buildTag("div.chartElement","",{width:"100%",height:"100%","background-color":"transparent","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"100"},{id:this.designerId+"bubbleScatterChartElement"+this.widgetJson.UniqueName});this.bubbleScatterChartItem.append(this.bubbleScatterChartElement);this.contentContainer.append(this.bubbleScatterChartItem);this.controlContainer.data("widgetInstance",this);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.BubbleScatterChart)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.dispose=function(){this.bubbleScatterChartItemDispose();n.prototype.dispose.call(this)},t.prototype.performSelectedWidgetAction=function(t,i,r,u){var a=!0,v=this.getHiddenColumnContainer(),e=[],o=[],h,c,l,s,f,y,p,w;if(!this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))if(this.getBubbleScatterProperties().FilterSettings.ActAsMasterWidget&&i.DataGroupInfo.FieldContainers.length>0&&i.getYAxisContainer().FieldInfos.length>0&&i.getXAxisContainer().FieldInfos.length>0&&this.bubbleScatterChartObj.selectedDataIndexes.length>0&&this.bubbleScatterChartObj.selectedDataIndexes[0].point===r.pointIndex&&(a=!1,this.bubbleScatterChartObj.selectedDataIndexes=[],this.widgetJson.SelectedFilterValues=[]),a&&this.getBubbleScatterProperties().FilterSettings.ActAsMasterWidget&&i.DataGroupInfo.FieldContainers.length>0&&i.getYAxisContainer().FieldInfos.length>0&&i.getXAxisContainer().FieldInfos.length>0||!BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().UrlLink)&&this.getBubbleScatterProperties().UrlLink.EnableLink&&!this.getBubbleScatterProperties().FilterSettings.ActAsMasterWidget||this.widgetJson.ContainerSettings.ViewData)switch(t){case WidgetAction.Filter.toString():if(i.isCurrentMaster=!0,this.bubbleScatterChartObj.selectedDataIndexes=[{point:r.pointIndex}],this.getBubbleScatterProperties().SelectedFilterValues=[],!BoldBIDashboard.isNullOrUndefined(this.getLabelContainer().FieldInfos)&&this.getLabelContainer().FieldInfos.length?(h=this.getLabelContainer().FieldInfos[0],e.push(h),o[h.UniqueColumnName]=r.point.label):(c=this.getXAxisContainer().FieldInfos[0],e.push(c),o[c.UniqueColumnName]=r.point.x),!BoldBIDashboard.isNullOrUndefined(this.getRowContainer().FieldInfos)&&this.getRowContainer().FieldInfos.length&&(l=this.getRowContainer().FieldInfos[0],e.push(l),o[l.UniqueColumnName]=r.point.rowField),!BoldBIDashboard.isNullOrUndefined(v))for(s=v.FieldInfos,f=0;f<s.length;f++)o[s[f].UniqueColumnName]=this.getHiddenColumnData(r,s[f].UniqueColumnName),e.push(s[f]);n.prototype.performInteraction.call(this,i,e,o);break;case WidgetAction.Linking.toString():i.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(this.bubbleScatterChartObj.selectedDataIndexes=[{point:r.pointIndex}],y=this.getLinkingDataforBubbleScatter(r),n.prototype.performLinking.call(this,y),this.bubbleScatterChartObj.selectedDataIndexes=[],this.bubbleScatterChartObj.refresh());break;case WidgetAction.ViewData.toString():i.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(p=u.modules.viewDataDialog,w=this.showSelectItemsInViewData(r),p.showViewDataPopup(i,!1,w,!0),this.bubbleScatterChartObj.refresh())}else this.getBubbleScatterProperties().FilterSettings.ActAsMasterWidget&&this.bubbleScatterChartObj.selectedDataIndexes.length===0&&(BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(i),this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this),i.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName),this.designerInstance.modules.serialization.notifyChange())},t.prototype.processFilterInformation=function(n){var u=n.filters,s=this.DataGroupInfo.FieldContainers,i=this.getColumnForWidgetFilterAPI(u,s),t=i[0],r=i[1],f=i[2],h=i[3],e,o;return f.length>0?(t=[],r={},console.error("Given column name(s) ["+f+"] were not found in "+this.widgetJson.ContainerSettings.Title),!1):h&&(console.error("ColumnName should not be empty for API filtering"),t.length===0)?!1:(t.length===0&&f.length===0&&(!BoldBIDashboard.isNullOrUndefined(this.getLabelContainer().FieldInfos)&&this.getLabelContainer().FieldInfos.length?(e=this.getLabelContainer().FieldInfos[0],t.push(e),r[e.UniqueColumnName]=u[0].values[0]):(o=this.getXAxisContainer().FieldInfos[0],t.push(o),r[o.UniqueColumnName]=u[0].values[0])),this.widgetJson.SelectedFilterValues=[],this.masterFilterWindowInstance.configureSelectedFilterInfo(this.getJson(),t,r),!0)},t.prototype.isNecessaryDataConfigured=function(){return this.DataGroupInfo.FieldContainers.length>0&&this.getXAxisContainer().FieldInfos.length>0&&this.getYAxisContainer().FieldInfos.length>0?!0:!1},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(this.contentContainer),this.locale.itemPanel.widgetDataRequiredMessage.bubbleScatterDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.onFieldDragDrop=function(n,t){var r,u,i;if(BoldBIDashboard.isNullOrUndefined(t))return!0;if(r=!0,u="",!BoldBIDashboard.isNullOrUndefined(n.FieldType)&&n.FieldType===FieldType.Dimensions)for(i=0;i<this.DataGroupInfo.FieldContainers.length;i++)if(u=this.DataGroupInfo.FieldContainers[i].Name===n.ContainerName?n.ContainerName.toLowerCase():"",u.toLowerCase()==="label"){r=!0;break}return r},t.prototype.getWidgetInfo=function(t,i){var r=n.prototype.getWidgetInfo.call(this,t,i);return r.WidgetAction="WidgetAction",r.ColorCustomization=this.getBubbleScatterProperties().ColorCustomization,r},t.prototype.updateDataGroupInfo=function(t,i){n.prototype.updateDataGroupInfo.call(this,t,i);this.updateChartDataGroupInfo(t,i)},t.prototype.canCombineRequest=function(){var n=this.dataGroupBindedColumnInfo(this.DataGroupInfo),t=n.rowLength;return t>0?!1:!0},t.prototype.updateBubbleScatterSize=function(){var n=150,t=this.isValidDataConfiguration();if(!t){if(this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design){BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this);BoldBIDashboard.Dashboard.WidgetContainerHelper.showAlertMessageForData(this.locale.itemPanel.widgetDataRequiredMessage.scatterAlertMessage,this.contentContainer,this.getContainerSettings().CombineWidgetId);BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this);this.bubbleScatterChartItem.hide();return}BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(this.contentContainer);BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this);BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this);return}if(!BoldBIDashboard.isNullOrUndefined(this.bubbleScatterChartObj)){if(this.bubbleScatterChartObj.primaryXAxis.valueType=!BoldBIDashboard.isNullOrUndefined(this.getRowContainer())&&this.getRowContainer().FieldInfos.length>0&&this.getXAxisContainer().FieldInfos[0].FieldActualType==="bbi-designer-dataset-number"?"Double":"Category",BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this))this.widgetContainerHelper.showControlError(this,this.dataValues);else if(BoldBIDashboard.isNullOrUndefined(this.dataValues)||BoldBIDashboard.isNullOrUndefined(this.dataValues.noDataAvailable)||!this.dataValues.noDataAvailable)this.ControlContainer.width()<n||this.ControlContainer.height()<n?(this.bubbleScatterChartObj.primaryXAxis.visible=!1,this.bubbleScatterChartObj.primaryYAxis.visible=!1,this.bubbleScatterChartObj.legendSettings.visible=this.ControlContainer.height()>150&&this.ControlContainer.width()>150&&this.getBubbleScatterProperties().ShowLegend,this.bubbleScatterChartObj.legendSettings.position=this.getResponsiveLegendPosition(this.getBubbleScatterProperties().LegendPosition),this.bubbleScatterChartObj.margin.left=0,this.bubbleScatterChartObj.margin.top=0,this.bubbleScatterChartObj.margin.bottom=0,this.bubbleScatterChartObj.margin.right=0):(this.bubbleScatterChartObj.primaryXAxis.visible=this.getBubbleScatterProperties().CategoryAxisSettings.IsEnabled,this.bubbleScatterChartObj.primaryYAxis.visible=this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsEnabled,this.bubbleScatterChartObj.legendSettings.visible=this.ControlContainer.height()>150&&this.ControlContainer.width()>150&&this.getBubbleScatterProperties().ShowLegend,!this.getBubbleScatterProperties().EnableColorSettings||this.getBubbleScatterProperties().ColorCustomization.Type!==ColorCustomizationType.Individual&&(BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().ColorCustomization.RuleRangeSettings)||BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().ColorCustomization.RuleRangeSettings.RangeColorInfo[0].DimensionConditionalValue))||(this.bubbleScatterChartObj.legendSettings.visible=!1),this.bubbleScatterChartObj.legendSettings.position=this.getResponsiveLegendPosition(this.getBubbleScatterProperties().LegendPosition),this.bubbleScatterChartObj.margin.left=10,this.bubbleScatterChartObj.margin.top=10,this.bubbleScatterChartObj.margin.bottom=10,this.bubbleScatterChartObj.margin.right=10);else return;this.bubbleScatterChartObj.refresh()}},t.prototype.updateChartDataGroupInfo=function(){if(!BoldBIDashboard.isNullOrUndefined(this.getLabelContainer().FieldInfos)&&this.getLabelContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getXAxisContainer().FieldInfos)&&this.getXAxisContainer().FieldInfos.length>0&&BoldBIDashboard.isNullOrUndefined(this.getXAxisContainer().FieldInfos[0].CustomSorting)){var n=this.getLabelContainer().FieldInfos[0].FieldActualType==="bbi-designer-dataset-datetime"||this.getLabelContainer().FieldInfos[0].FieldActualType==="bbi-designer-dataset-time";this.getLabelContainer().FieldInfos[0].CustomSorting={CustomSortType:n?CustomSortType[CustomSortType.Alphabetic]:CustomSortType[CustomSortType.Field],CustomSortOrder:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,SortingOrder.Ascending),FieldName:this.getXAxisContainer().FieldInfos[0].Name,FieldId:this.getXAxisContainer().FieldInfos[0].Id,SummaryType:this.getXAxisContainer().FieldInfos[0].SummaryType}}},t.prototype.updateBubbleScatterChartData=function(n){var t,i,r,u;if(this.dataValues=n,t=[],i=this.dataGroupBindedColumnInfo(this.DataGroupInfo),this.contentContainer.css({display:"block"}),BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this),this.bubbleScatterChartElement.show(),BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this),this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo),r=this.isValidDataConfiguration(),r)BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(this.contentContainer);else{if(this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design){BoldBIDashboard.Dashboard.WidgetContainerHelper.showAlertMessageForData(this.locale.itemPanel.widgetDataRequiredMessage.scatterAlertMessage,this.contentContainer,this.getContainerSettings().CombineWidgetId);BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this);this.updateDefaultJsonProperties();this.bubbleScatterChartItem.hide();return}BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this);BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this);return}BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error?BoldBIDashboard.isNullOrUndefined(this.dataValues.Message)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.widgetContainerHelper.showControlError(this,this.dataValues)):(this.contentContainer.find(".bbi-dbrd-control-error").remove(),this.bubbleScatterChartItem.show(),this.dataValues.noDataAvailable?(this.bubbleScatterChartItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this),this.IsRendered=!0):BoldBIDashboard.isNullOrUndefined(this.dataValues)||this.dataValues.data==="[]"||!BoldBIDashboard.isNullOrUndefined(this.dataValues.isDataSetEmpty)||typeof this.dataValues=="string"&&this.dataValues.indexOf("Sf_Exception")!==-1?(this.dataValues.data==="[]"&&this.dataValues.columnBindings==="{}"||!BoldBIDashboard.isNullOrUndefined(this.dataValues.isDataSetEmpty)&&this.dataValues.isDataSetEmpty)&&(this.propertyPanel.updateItemVisibility(this.Type,"LegendSettings","CustomLegend",!1),this.propertyPanel.updateCategoryVisibility(this.Type,"SeriesPalette",!1),this.getBubbleScatterProperties().DefaultColors=[]):(this.DataGroupInfo.FieldContainers.length>0&&this.getXAxisContainer().FieldInfos.length>0&&this.getYAxisContainer().FieldInfos.length>0&&(u=n.widgetData.length,BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.updateDefaultColorsToProperty(this),this.generateChartseries(n,u,t),BoldBIDashboard.isNullOrUndefined(this.bubbleScatterChartObj)?this.renderBubbleScatterWidget(t):(this.bubbleScatterChartObj.series=t,this.setBubbleScatterInitialSelection(n),this.updateCustomLegendSettingsValue(),this.setColorCustomization(this.getBubbleScatterProperties(),this.bubbleScatterChartObj,this.dataValues),this.updateSeriesColorPalette(this.bubbleScatterChartObj),this.updateSeriesShapeInfos(this.bubbleScatterChartObj),this.bubbleScatterChartObj.refresh(),this.primaryAxisTitleUpdateWithDefaultValue(),this.categoryAxisTitleUpdateWithDefaultValue(),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.setPropertyElement("Formatting","ColorSettings",i.rowLength===0),this.propertyPanel.updateItemVisibility(this.Type,"BasicSettings","ChartSeriesShape",this.getSizeContainer().FieldInfos.length>0?!1:!0)),this.updateBubbleScatterSize())),this.generateTooltip()),this.designerInstance.modules.util.updateAction(this.Type,"Link","Link"))},t.prototype.generateChartseries=function(n,t,i){for(var r,e,u,f=0;f<t;f++){if(r=JSON.parse(n.widgetData[f]),e=this.themeHelper.getBubbleScatterDataLabelFont(),r.type=this.getSizeContainer().FieldInfos.length>0?"Bubble":"Scatter",!BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().DefaultColors)&&this.getBubbleScatterProperties().DefaultColors.length>0)for(u=0;u<this.getBubbleScatterProperties().DefaultColors.length;u++)r.id===this.getBubbleScatterProperties().DefaultColors[u].Name&&(r.fill=this.getBubbleScatterProperties().DefaultColors[u].Color);else BoldBIDashboard.isNullOrUndefined(this.bubbleScatterChartObj)&&(r.fill="#F67280");r.xName="x";r.yName="y";r.size="size";r.text="label";r.marker={visible:!0,height:12,width:12,dataLabel:{visible:this.getBubbleScatterProperties().ShowValueLabel,font:{size:e.size,fontWeight:e.weight,fontFamily:e.family,color:this.themeHelper.getBubbleScatterDataLabelFontColor()},margin:{left:5,right:5,top:5,bottom:5},alignment:"Near",position:"Auto"}};r.minRadius=2;r.maxRadius=5;r.animation={enable:this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage?!1:this.getBubbleScatterProperties().EnableAnimation};i.push(r)}},t.prototype.renderBubbleScatterWidget=function(n){var o=this.getResponsiveLegendPosition(this.getBubbleScatterProperties().LegendPosition),t=150,s=this.getBubbleScatterProperties().CategoryAxisSettings.LabelRotation!=="None"?this.getResponsiveLabelRotation(this.getBubbleScatterProperties().CategoryAxisSettings.LabelRotation):0,i=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode(),r=this.themeHelper.getBubbleScatterAxisLabelFont(),u=this.themeHelper.getBubbleScatterAxisTitleFont(),f=this.themeHelper.getBubbleScatterLegendFont(),e=this.dataGroupBindedColumnInfo(this.DataGroupInfo);this.bubbleScatterChartObj=new ejdashboard.charts.Chart({chartArea:{background:"transparent",border:{width:.5},opacity:.3},margin:{top:this.ContentContainer.height()<t||this.ContentContainer.height()<t?0:10,right:this.ContentContainer.height()<t||this.ContentContainer.height()<t?0:10,bottom:this.ContentContainer.height()<t||this.ContentContainer.height()<t?0:10,left:this.ContentContainer.height()<t||this.ContentContainer.height()<t?0:10},background:"transparent",primaryXAxis:{valueType:!BoldBIDashboard.isNullOrUndefined(this.getRowContainer())&&this.getRowContainer().FieldInfos.length>0&&this.getXAxisContainer().FieldInfos[0].FieldActualType==="bbi-designer-dataset-number"?"Double":"Category",visible:this.ContentContainer.height()<t||this.ContentContainer.height()<t?!1:this.getBubbleScatterProperties().CategoryAxisSettings.IsEnabled,labelStyle:{size:r.size,fontFamily:i?r.family:"var(--designer-font)",fontWeight:i?r.weight:"400",color:this.themeHelper.getBubbleScatterAxisLabelFontColor()},majorGridLines:{width:this.getBubbleScatterProperties().CategoryAxisGridLines?1:0,color:this.themeHelper.getBubbleScatterMajorGridLinesColor()},lineStyle:{width:.3},titleStyle:{size:u.size,fontFamily:i?u.family:"var(--designer-font)",fontWeight:i?u.weight:"Bold",opacity:1,color:this.themeHelper.getBubbleScatterTitleFontColor()},title:this.getBubbleScatterProperties().CategoryAxisSettings.Title,labelRotation:s,labelIntersectAction:"Hide",majorTickLines:{width:0},minorTickLines:{width:0}},primaryYAxis:{visible:this.ContentContainer.height()<t||this.ContentContainer.height()<t?!1:this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsEnabled,labelStyle:{size:r.size,fontFamily:i?r.family:"var(--designer-font)",fontWeight:i?r.weight:"400",color:this.themeHelper.getBubbleScatterAxisLabelFontColor()},majorGridLines:{width:this.getBubbleScatterProperties().PrimaryValueGridLines?1:0,color:this.themeHelper.getBubbleScatterMajorGridLinesColor()},titleStyle:{size:u.size,fontFamily:i?u.family:"var(--designer-font)",fontWeight:i?u.weight:"Bold",opacity:1,color:this.themeHelper.getBubbleScatterTitleFontColor()},title:this.getBubbleScatterProperties().PrimaryValueAxisSettings.Title,lineStyle:{width:.3},majorTickLines:{width:0},minorTickLines:{width:0},opposedPosition:this.getBubbleScatterProperties().PrimaryValueAxisSettings.OpposedAxis},series:n,legendSettings:{visible:this.ContentContainer.height()<t||this.ContentContainer.height()<t?!1:!0,position:o,padding:12,textStyle:{size:f.size,fontFamily:i?f.family:"var(--designer-font)",fontWeight:i?f.weight:"500",color:this.themeHelper.getBubbleScatterLegendFontColor()},titleStyle:{size:f.size,fontWeight:i?f.weight:"Bold",fontFamily:i?f.family:"var(--designer-font)",color:this.themeHelper.getBubbleScatterLegendFontColor(),opacity:1}},tooltip:{enable:this.getBubbleScatterProperties().ShowTooltip,template:"#template_"+this.bbdesigner$(this.bubbleScatterChartElement).attr("id")+"_tooltip",fadeOutDuration:10},isMultiSelect:!1,loaded:this.bbdesigner$.proxy(this.renderComplete,this),tooltipRender:this.bbdesigner$.proxy(this.setTooltipValues,this),pointClick:this.bbdesigner$.proxy(this.pointRegionClick,this),axisLabelRender:this.bbdesigner$.proxy(this.chartAxisFormatter,this),textRender:this.bbdesigner$.proxy(this.valueLabelFormatter,this),legendRender:this.bbdesigner$.proxy(this.gradientLegendRendering,this),selectionMode:this.widgetJson.FilterSettings.ActAsMasterWidget?"Point":"None",highlightMode:this.widgetJson.FilterSettings.ActAsMasterWidget?"Point":"None"});this.updateCustomLegendSettingsValue();this.setBubbleScatterInitialSelection(this.dataValues);this.bubbleScatterChartObj.appendTo(this.bubbleScatterChartElement[0]);this.generateTooltip();this.updateDefaultColorsToProperty(this);this.updateSeriesShapeInfos(this.bubbleScatterChartObj);this.setColorCustomization(this.getBubbleScatterProperties(),this.bubbleScatterChartObj,this.dataValues);this.updateSeriesColorPalette(this.bubbleScatterChartObj);this.categoryAxisTitleUpdateWithDefaultValue();this.primaryAxisTitleUpdateWithDefaultValue();this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.view&&(this.propertyPanel.updateCategoryVisibility(this.Type,"SeriesPalette",e.rowLength===1),this.setPropertyElement("Formatting","ColorSettings",e.rowLength===0),this.propertyPanel.updateItemVisibility(this.Type,"BasicSettings","ChartSeriesShape",this.getSizeContainer().FieldInfos.length>0?!1:!0))},t.prototype.applyWidgetTheme=function(n){var t=BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this);t||BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this);BoldBIDashboard.isNullOrUndefined(this.bubbleScatterChartObj)||(this.updateTitleSubTitleFontTheme(),this.applyPrimaryXandYAxisTheme(n),this.applyLegendTheme(n),this.applyDataLabelTheme(n),this.generateTooltip(),this.bubbleScatterChartObj.refresh())},t.prototype.updateTitleSubTitleFontTheme=function(){var n=this.designerInstance.modules.themeHelper.getBubbleScatterHeaderTitle(),t=this.designerInstance.modules.themeHelper.getBubbleScatterHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getBubbleScatterProperties().ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.applyPrimaryXandYAxisTheme=function(){var n,t,i,r;BoldBIDashboard.isNullOrUndefined(this.bubbleScatterChartObj)||(n=this.bubbleScatterChartObj.primaryXAxis,t=this.bubbleScatterChartObj.primaryYAxis,n.majorGridLines.color=t.majorGridLines.color=this.themeHelper.getBubbleScatterMajorGridLinesColor(),n.labelStyle.color=t.labelStyle.color=this.themeHelper.getBubbleScatterAxisLabelFontColor(),n.titleStyle.color=t.titleStyle.color=this.themeHelper.getBubbleScatterTitleFontColor(),i=this.themeHelper.getBubbleScatterAxisLabelFont(),r=this.themeHelper.getBubbleScatterAxisTitleFont(),n.labelStyle.size=t.labelStyle.size=i.size,n.labelStyle.fontWeight=t.labelStyle.fontWeight=i.weight,n.labelStyle.fontFamily=t.labelStyle.fontFamily=i.family,n.titleStyle.size=t.titleStyle.size=r.size,n.titleStyle.fontWeight=t.titleStyle.fontWeight=r.weight,n.titleStyle.fontFamily=t.titleStyle.fontFamily=r.family)},t.prototype.applyLegendTheme=function(){if(!BoldBIDashboard.isNullOrUndefined(this.bubbleScatterChartObj)){this.bubbleScatterChartObj.legendSettings.textStyle.color=this.themeHelper.getBubbleScatterLegendFontColor();var n=this.themeHelper.getBubbleScatterLegendFont();this.bubbleScatterChartObj.legendSettings.textStyle.size=this.bubbleScatterChartObj.legendSettings.titleStyle.size=n.size;this.bubbleScatterChartObj.legendSettings.textStyle.fontWeight=this.bubbleScatterChartObj.legendSettings.titleStyle.fontWeight=n.weight;this.bubbleScatterChartObj.legendSettings.textStyle.fontFamily=this.bubbleScatterChartObj.legendSettings.titleStyle.fontFamily=n.family}},t.prototype.applyDataLabelTheme=function(){var t,n;if(this.getBubbleScatterProperties().ShowValueLabel&&(t=this.themeHelper.getBubbleScatterDataLabelFont(),!BoldBIDashboard.isNullOrUndefined(this.bubbleScatterChartObj)))for(n=0;n<this.bubbleScatterChartObj.series.length;n++)this.bubbleScatterChartObj.series[n].marker.dataLabel.font.color=this.themeHelper.getBubbleScatterDataLabelFontColor(),this.bubbleScatterChartObj.series[n].marker.dataLabel.font.size=t.size,this.bubbleScatterChartObj.series[n].marker.dataLabel.font.fontWeight=t.weight,this.bubbleScatterChartObj.series[n].marker.dataLabel.font.fontFamily=t.family},t.prototype.bubbleScatterChartItemDispose=function(){BoldBIDashboard.isNullOrUndefined(this.bubbleScatterChartObj)||(this.bubbleScatterChartObj.destroy(),this.bubbleScatterChartObj=null);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.BubbleScatterChart)},t.prototype.getBubbleScatterChartPropertyPanel=function(){var i=!BoldBIDashboard.isNullOrUndefined(this.getRowContainer())&&this.getRowContainer().FieldInfos.length!==0,t={Header:this.widgetJson.ContainerSettings.Title,SubTitle:this.widgetJson.ContainerSettings.SubTitle,Description:this.widgetJson.ContainerSettings.Description,Type:"ScatterChart",Items:[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"ShowTooltip",displayName:this.locale.propertyPanel.basicSettings.showTooltip,isVisible:!0,value:this.getBubbleScatterProperties().ShowTooltip,itemType:"bool"},{name:"EnableAnimation",displayName:this.locale.propertyPanel.basicSettings.enableAnimation,isVisible:!1,value:this.getBubbleScatterProperties().EnableAnimation,itemType:"bool"},{name:"ShowValueLabel",displayName:this.locale.propertyPanel.basicSettings.showValueLabels,isVisible:!0,value:this.getBubbleScatterProperties().ShowValueLabel,itemType:"bool"},{name:"ChartSeriesShape",displayName:this.locale.propertyPanel.basicSettings.chartSeriesShapeText,isVisible:!BoldBIDashboard.isNullOrUndefined(this.getSizeContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getSizeContainer().FieldInfos)&&this.getSizeContainer().FieldInfos.length>0?!1:!0,itemType:"button",buttonText:"Customize",callbackInstance:this,callbackMethod:"renderSeriesShapeLabel"}]},{CategoryName:"Legend Settings",DisplayName:this.locale.propertyPanel.legendSettingsText,Items:[{name:"ShowLegend",displayName:this.locale.propertyPanel.basicSettings.showLegend,value:BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().ShowLegend)?!1:this.getBubbleScatterProperties().ShowLegend,itemType:"bool"},{name:"LegendPosition",displayName:this.locale.propertyPanel.basicSettings.position,isVisible:this.getBubbleScatterProperties().ShowLegend,value:this.getBubbleScatterProperties().LegendPosition,itemType:"dropdown",valueList:["Auto","Bottom","Left","Right","Top"]},{name:"CustomLegend",displayName:this.locale.propertyPanel.basicSettings.legend,isVisible:!BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().ShowLegend)&&this.getBubbleScatterProperties().ShowLegend?!0:!1,itemType:"button",buttonText:this.locale.propertyPanel.customizeBtnText,callbackInstance:this,callbackMethod:"onCustomLegendClick"},]},{CategoryName:"X-Axis",DisplayName:this.locale.propertyPanel.xAxisSettingsText,Items:[{name:"ShowXAxis",displayName:this.locale.propertyPanel.bubbleScatterAxisSettings.showXAxis,value:BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().CategoryAxisSettings.IsEnabled)?!1:this.getBubbleScatterProperties().CategoryAxisSettings.IsEnabled,itemType:"bool"},{name:"CategoryAxisTitle",displayName:this.locale.propertyPanel.bubbleScatterAxisSettings.showAxisTitle,isVisible:this.getBubbleScatterProperties().CategoryAxisSettings.IsEnabled,value:this.getBubbleScatterProperties().CategoryAxisSettings.IsEnableTitle,itemType:"bool"},{name:"CategoryAxisTitleValue",displayName:this.locale.propertyPanel.bubbleScatterAxisSettings.axisTitle,isVisible:this.getBubbleScatterProperties().CategoryAxisSettings.IsEnabled&&this.getBubbleScatterProperties().CategoryAxisSettings.IsEnableTitle,value:this.getBubbleScatterProperties().CategoryAxisSettings.IsCustomTitle?this.getBubbleScatterProperties().CategoryAxisSettings.Title:"",placeHolder:this.locale.common.auto,itemType:"string"},{name:"CategoryAxisLabelRotation",displayName:this.locale.propertyPanel.bubbleScatterAxisSettings.labelRotation,isVisible:this.getBubbleScatterProperties().CategoryAxisSettings.IsEnabled?!0:!1,itemType:"dropdown",value:this.getBubbleScatterProperties().CategoryAxisSettings.LabelRotation==="Auto"?this.getBubbleScatterProperties().CategoryAxisSettings.LabelRotation:this.getBubbleScatterProperties().CategoryAxisSettings.LabelRotation==="None"?"0"+String.fromCharCode(176):this.getBubbleScatterProperties().CategoryAxisSettings.LabelRotation+String.fromCharCode(176),valueList:["Auto","-90"+String.fromCharCode(176),"-45"+String.fromCharCode(176),"0"+String.fromCharCode(176),"+45"+String.fromCharCode(176),"+90"+String.fromCharCode(176)]},{name:"XAxisFormat",displayName:this.locale.propertyPanel.axisSettings.axisFormatText,isVisible:this.getBubbleScatterProperties().CategoryAxisSettings.IsEnabled,value:this.getBubbleScatterProperties().CategoryAxisSettings.Format,itemType:"button",buttonText:this.locale.propertyPanel.axisSettings.axisFormatButtonText,callbackInstance:this,callbackMethod:"onXAxisFormatClick"},]},{CategoryName:"Y-Axis",DisplayName:this.locale.propertyPanel.yAxisSettingsText,Items:[{name:"ShowYAxis",displayName:this.locale.propertyPanel.bubbleScatterAxisSettings.showYAxis,value:BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsEnabled)?!1:this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsEnabled,itemType:"bool"},{name:"PrimaryAxisTitle",displayName:this.locale.propertyPanel.bubbleScatterAxisSettings.showAxisTitle,isVisible:this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsEnabled,value:this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsEnableTitle,itemType:"bool"},{name:"PrimaryAxisTitleValue",displayName:this.locale.propertyPanel.bubbleScatterAxisSettings.axisTitle,isVisible:this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsEnabled&&this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsEnableTitle,value:this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsCustomTitle?this.getBubbleScatterProperties().PrimaryValueAxisSettings.Title:"",placeHolder:this.locale.common.auto,itemType:"string"},{name:"YAxisFormat",displayName:this.locale.propertyPanel.axisSettings.axisFormatText,isVisible:this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsEnabled,value:this.getBubbleScatterProperties().PrimaryValueAxisSettings.Format,itemType:"button",buttonText:this.locale.propertyPanel.axisSettings.axisFormatButtonText,callbackInstance:this,callbackMethod:"onYAxisFormatClick"},{name:"OpposedAxis",displayName:this.locale.propertyPanel.heatMapAxisSettings.opposedAxis,value:this.getBubbleScatterProperties().PrimaryValueAxisSettings.OpposedAxis,itemType:"bool"}]},{CategoryName:"Grid Lines",DisplayName:this.locale.propertyPanel.gridLinesText,Items:[{name:"CategoryGridLines",displayName:this.locale.propertyPanel.gridLineSettings.categoryAxis,value:this.getBubbleScatterProperties().CategoryAxisGridLines,itemType:"bool"},{name:"PrimaryValueGridLines",displayName:this.locale.propertyPanel.gridLineSettings.primaryValueAxis,value:this.getBubbleScatterProperties().PrimaryValueGridLines,itemType:"bool"}]},{CategoryName:"Formatting",DisplayName:this.locale.propertyPanel.formattingText,IsVisible:i?!1:!0,Items:[{name:"ColorSettings",isVisible:!BoldBIDashboard.isNullOrUndefined(this.getRowContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getRowContainer().FieldInfos)&&this.getRowContainer().FieldInfos.length===0,callbackInstance:this,callbackMethod:"renderDefaultColorSettings",itemType:"object",elementType:"ScatterChart"},]},{CategoryName:"Series Palette",DisplayName:this.locale.propertyPanel.seriesPaletteText,IsVisible:this.DataGroupInfo.FieldContainers.length>0&&this.getYAxisContainer().FieldInfos.length>0&&this.getXAxisContainer().FieldInfos.length>0&&i?!0:!1,Items:[{name:"UseDefaultPalette",isVisible:!BoldBIDashboard.isNullOrUndefined(this.getRowContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getRowContainer().FieldInfos)&&this.getRowContainer().FieldInfos.length>0,displayName:this.locale.propertyPanel.seriesPaletteSettings.useDefaultPalette,value:this.getBubbleScatterProperties().IsDefaultColorPalette,itemType:"bool"},{name:"ColorPalette",itemType:"object",isVisible:!BoldBIDashboard.isNullOrUndefined(this.getRowContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getRowContainer().FieldInfos)&&this.getRowContainer().FieldInfos.length>0&&!this.getBubbleScatterProperties().IsDefaultColorPalette,callbackInstance:this,callbackMethod:"openColorPalette"}]},{CategoryName:"Link",DisplayName:this.locale.propertyPanel.linkText,Items:[{name:"Link",value:n.prototype.useExistingLink.call(this),category:"Item",itemType:"link",enableMode:LinkEnableMode.Row}]},]};return t.Items.push(this.containerPropertyItem.getFilterSettingsItems(this.widgetJson.FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo)),t.Items.push(this.containerPropertyItem.getContainerSettingItems(this.widgetJson.ContainerSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo)),t.Items.push(this.containerPropertyItem.getContainerActionsItems(this.widgetJson.ContainerSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo)),t.Items.push(BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem.getNoDataContainerActionsProperty(this.locale.propertyPanel.noDataContainerText)),t},t.prototype.bubbleScatterChartPropertyChange=function(t,i,r){switch(t){case"Name":this.widgetJson.ContainerSettings.Title=r;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,r);break;case"ItemLink":n.prototype.updateLink.call(this,r);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,r);break;case"EnableAnimation":this.updateBubbleScatterChartAnimation(r);break;case"ShowLegend":this.updateBubbleScatterChartLegendVisiblity(r);break;case"LegendPosition":this.updateLegendPosition(r);break;case"ShowValueLabel":this.updateShowValueLabel(r);break;case"ShowTooltip":this.updateShowTooltip(r);break;case"ShowXAxis":this.updateXAxisVisibility(r);break;case"CategoryAxisTitle":this.updateXAxisTitleVisibility(r);break;case"CategoryAxisTitleValue":this.updateXAxisTitleValue(r);break;case"CategoryAxisLabelRotation":this.updateCategoryLabelRotation(r);break;case"ShowYAxis":this.updateYAxisVisibility(r);break;case"PrimaryAxisTitle":this.updateYAxisTitleVisibility(r);break;case"PrimaryAxisTitleValue":this.updateYAxisTitleValue(r);break;case"OpposedAxis":this.updateOpposedAxis(r);break;case"CategoryGridLines":this.updateCategoryGridLines(r);break;case"PrimaryValueGridLines":this.updatePrimaryGridLines(r);break;case"UseDefaultPalette":this.updateDefaultPaletteVisibility(r);break;case"ActAsMasterWidget":this.getBubbleScatterProperties().FilterSettings.ActAsMasterWidget=r;this.updateMasterWidget(r);break;case"FieldNameChange":this.updateDisplayTextBasedProperties()}},t.prototype.getBubbleScatterProperties=function(){return this.widgetJson},t.prototype.renderComplete=function(){this.IsRendered=!0},t.prototype.setTooltipValues=function(n){this.bbdesigner$(this.bubbleScatterChartElement[0]).css({overflow:"initial","z-index":"1000"});this.DataGroupInfo.FieldContainers.length>0&&this.getXAxisContainer().FieldInfos.length>0&&(n.point.seriesIndex=n.series.dataSource[n.point.index].x,n.point.xAxisInfo=this.getXAxisContainer().FieldInfos[0],n.point.seriesInfo=this.getLabelContainer().FieldInfos[0],n.point.label=n.series.dataSource[n.point.index].label,n.point.columnBindings=this.DataColumnBindings,n.point.toolTipFields=n.series.dataSource[n.point.index].toolTipFields,n.point.toolTipColumns=this.getToolipContainer().FieldInfos,n.point.yField=n.series.dataSource[n.point.index].y,n.point.yAxisInfo=this.getYAxisContainer().FieldInfos[0],n.point.sizeField=n.series.dataSource[n.point.index].size,n.point.sizeFieldInfo=this.getSizeContainer().FieldInfos[0],n.point.rowField=n.series.dataSource[n.point.index].rowValue,n.point.designer=this.designerInstance,n.point.dataSourceName=this.DataGroupInfo.DataSourceName,n.point.scatterInstance=this)},t.prototype.generateTooltip=function(){var r,u,f,e,o,s=0,i,n=[],t;if(i='<script id="template_'+this.bbdesigner$(this.bubbleScatterChartElement).attr("id")+'_tooltip" type="text/x-template">',this.bubbleScatterChartElement.find("#template_"+this.bbdesigner$(this.bubbleScatterChartElement).attr("id")+"_tooltip").remove(),this.DataGroupInfo.FieldContainers.length>s&&this.getXAxisContainer().FieldInfos.length>s&&this.getYAxisContainer().FieldInfos.length>s)for(n.push((r={},r[this.getXAxisContainer().FieldInfos[0].DisplayName]="${  BoldBIDashboardDesigner.bbdesignerstatic$.views.helpers.formatBubbleScatterXFieldTooltip(seriesIndex, xAxisInfo, designer, dataSourceName)}",r)),n.push((u={},u[this.getYAxisContainer().FieldInfos[0].DisplayName]="${  BoldBIDashboardDesigner.bbdesignerstatic$.views.helpers.formatBubbleScatterYFieldTooltip(yField, yAxisInfo, designer, dataSourceName)}",u)),!BoldBIDashboard.isNullOrUndefined(this.getLabelContainer().FieldInfos)&&this.getLabelContainer().FieldInfos.length>0&&n.push({"${  BoldBIDashboardDesigner.bbdesignerstatic$.views.helpers.getBubbleScatterChartSeriesName(seriesInfo,columnBindings)}":"${  BoldBIDashboardDesigner.bbdesignerstatic$.views.helpers.formatBubbleScatterChartTooltip(label, seriesInfo, designer, dataSourceName, scatterInstance)}"}),!BoldBIDashboard.isNullOrUndefined(this.getRowContainer().FieldInfos)&&this.getRowContainer().FieldInfos.length>0&&n.push((f={},f[this.getRowContainer().FieldInfos[0].DisplayName]="${ rowField }",f)),!BoldBIDashboard.isNullOrUndefined(this.getSizeContainer().FieldInfos)&&this.getSizeContainer().FieldInfos.length>0&&n.push((e={},e[this.getSizeContainer().FieldInfos[0].DisplayName]="${ BoldBIDashboardDesigner.bbdesignerstatic$.views.helpers.formatBubbleScatterSizeTooltip(sizeField, sizeFieldInfo, designer, dataSourceName) }",e)),t=0;t<this.getToolipContainer().FieldInfos.length;t++)n.push((o={},o[this.getToolipContainer().FieldInfos[t].DisplayName]="${ BoldBIDashboardDesigner.bbdesignerstatic$.views.helpers.formatBubbleScatterChartAdditionalTooltip(toolTipFields,toolTipColumns,index="+t+" )}",o));else n.push({"${x}":"${y}"});i+=this.widgetHelper.generateToolTipTemplate(n,this.bbdesigner$(this.bubbleScatterChartElement).attr("id"),1e3);i+="<\/script>";this.bbdesigner$(this.bubbleScatterChartElement).append(i)},t.prototype.setBubbleScatterInitialSelection=function(n){var t=this.getBubbleScatterProperties().SelectedFilterValues,u,i,r;if(!BoldBIDashboard.isNullOrUndefined(this.bubbleScatterChartObj)&&this.getBubbleScatterProperties().FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0){if(n.widgetData.length>0)for(u=JSON.parse(n.widgetData[0]),i=0;i<u.dataSource.length;i++)if(r=null,t[0].InitialDimensionFilter!==null&&t[0].InitialDimensionFilter.Text.length>0&&(r=t[0].InitialDimensionFilter.Text[0].toString()),t[0].InitialDateFilter!==null&&t[0].InitialDateFilter.DisplayDateFilterList.length>0&&(r=t[0].InitialDateFilter.DateFilterList[0]),u.dataSource[i].x===r||u.dataSource[i].label===r){this.bubbleScatterChartObj.selectedDataIndexes=[{point:i}];break}BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this)}else BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this),this.bubbleScatterChartObj.selectedDataIndexes.length>0&&(this.bubbleScatterChartObj.selectedDataIndexes=[])},t.prototype.setPropertyElement=function(n,t,i){var r,u;this.propertyPanel.canUpdate=!1;r=this.propertyPanel.getPropertyElement(this.getBubbleScatterChartPropertyPanel(),t,n,-1);r.isVisible=i;u=this.bbdesigner$.extend(!0,{},r);u.categoryName=n;this.propertyPanel.updatePropertyValue(u,this.Type,i);this.propertyPanel.canUpdate=!0},t.prototype.pointRegionClick=function(n){var i=[n.pageX,n.pageY],t=[];this.getBubbleScatterProperties().FilterSettings.ActAsMasterWidget&&t.push(WidgetAction.Filter);this.getBubbleScatterProperties().UrlLink&&this.getBubbleScatterProperties().UrlLink.EnableLink&&t.push(WidgetAction.Linking);this.widgetJson.ContainerSettings.ViewData&&t.push(WidgetAction.ViewData);BoldBIDashboard.Dashboard.WidgetHelper.createWidgetActionContextMenu(this.designerInstance,this,this.Name,t,n,i)},t.prototype.chartAxisFormatter=function(n){if(n.axis.valueType!=="Category"&&n.axis.propName==="primaryYAxis"){if(this.DataGroupInfo.FieldContainers.length>0&&this.getYAxisContainer().FieldInfos.length>0){var t=this.getBubbleScatterProperties().PrimaryValueAxisSettings.Format,i=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Prefix),this.DataGroupInfo.DataSourceName),r=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Suffix),this.DataGroupInfo.DataSourceName);n.text=BoldBIDashboard.DashboardUtil.formattedText(n.value,t.Culture,t.DecimalPoints,t.FormatType,t.DecimalSeparator,t.GroupSeparator,i,r,t.Unit,!0,this.designerInstance,t.EnableLakhsAndCroreRep)}}else if(n.axis.propName==="primaryXAxis"&&this.getXAxisContainer().FieldInfos.length>0&&this.getXAxisContainer().FieldInfos[0].FieldActualType==="bbi-designer-dataset-number"&&this.DataGroupInfo.FieldContainers.length>0&&this.getXAxisContainer().FieldInfos.length>0){var t=this.getBubbleScatterProperties().CategoryAxisSettings.Format,i=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Prefix),this.DataGroupInfo.DataSourceName),r=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Suffix),this.DataGroupInfo.DataSourceName);n.text=BoldBIDashboard.DashboardUtil.formattedText(Number(n.text),t.Culture,t.DecimalPoints,t.FormatType,t.DecimalSeparator,t.GroupSeparator,i,r,t.Unit,!0,this.designerInstance,t.EnableLakhsAndCroreRep)}},t.prototype.valueLabelFormatter=function(n){if(this.DataGroupInfo.FieldContainers.length>0&&this.getYAxisContainer().FieldInfos.length>0&&this.getXAxisContainer().FieldInfos.length>0){var t=this.getYAxisContainer().FieldInfos[0].MeasureFormatting,i=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Prefix),this.DataGroupInfo.DataSourceName),r=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Suffix),this.DataGroupInfo.DataSourceName);n.text=BoldBIDashboard.DashboardUtil.formattedText(parseFloat(n.text),t.Culture,t.DecimalPoints,t.FormatType,t.DecimalSeparator,t.GroupSeparator,i,r,t.Unit,!0,this.designerInstance,t.EnableLakhsAndCroreRep)}},t.prototype.gradientLegendRendering=function(n){if(this.getBubbleScatterProperties().EnableColorSettings&&!BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().ColorCustomization)&&this.getBubbleScatterProperties().ColorCustomization.Type===ColorCustomizationType.Gradient){var t=this.getYAxisContainer().FieldInfos[0].MeasureFormatting,i=isNaN(parseInt(t.FormatType,10))?t.FormatType:BoldBIDashboard.DashboardDesignerUtility.Serialization.getDataValueFormat(t.FormatType),r=isNaN(parseInt(t.Unit,10))?t.Unit:BoldBIDashboard.DashboardDesignerUtility.Serialization.getNumberFormat(t.Unit);n.text=!BoldBIDashboard.isNullOrUndefined(n.text)&&n.text.length>0?BoldBIDashboard.DashboardUtil.formattedText(n.text,t.Culture,t.DecimalPoints,i,t.DecimalSeparator,t.GroupSeparator,t.Prefix,t.Suffix,r,!0,this.designerInstance,t.EnableLakhsAndCroreRep):n.text}},t.prototype.getLinkingDataforBubbleScatter=function(n){var u=this.getJson(),s=this.getYAxisContainer(),h=this.getXAxisContainer(),f=this.getLabelContainer(),e=this.getSizeContainer(),o=this.getRowContainer(),c=this.getHiddenColumnContainer(),i={isEnabled:!1,parameterDetails:[],url:"",urlLinkInfo:[]},l,r,t;if(!BoldBIDashboard.isNullOrUndefined(u)&&(l=this.designerInstance.modules.util.getSourceData(this.DataGroupInfo,!1,!1,!0),!BoldBIDashboard.isNullOrUndefined(u.UrlLink.UrlPath)&&u.UrlLink.UrlPath!==""))for(r=l.filter(function(n){return u.UrlLink.PassingParameters.indexOf(n.Value)!==-1}),i.url=u.UrlLink.UrlPath,i.isEnabled=!0,t=0;t<r.length;t++)if(r[t].Id===s.FieldInfos[0].UniqueColumnName){i.parameterDetails.push({parameter:s.FieldInfos[0].Name,value:n.point.y});continue}else if(r[t].Id===h.FieldInfos[0].UniqueColumnName){i.parameterDetails.push({parameter:h.FieldInfos[0].Name,value:n.series.dataSource[n.pointIndex].x});continue}else if(!BoldBIDashboard.isNullOrUndefined(f.FieldInfos[0])&&f.FieldInfos.length>0&&r[t].Id===f.FieldInfos[0].UniqueColumnName){i.parameterDetails.push({parameter:f.FieldInfos[0].Name,value:n.series.dataSource[n.pointIndex].label});continue}else if(!BoldBIDashboard.isNullOrUndefined(e.FieldInfos[0])&&e.FieldInfos.length>0&&r[t].Id===e.FieldInfos[0].UniqueColumnName){i.parameterDetails.push({parameter:e.FieldInfos[0].Name,value:n.series.dataSource[n.pointIndex].size});continue}else if(!BoldBIDashboard.isNullOrUndefined(o.FieldInfos[0])&&o.FieldInfos.length>0&&r[t].Id===o.FieldInfos[0].UniqueColumnName){i.parameterDetails.push({parameter:o.FieldInfos[0].Name,value:n.series.dataSource[n.pointIndex].rowValue});continue}else c.FieldInfos.length>0&&r[t].Id===c.FieldInfos[0].UniqueColumnName&&i.parameterDetails.push({parameter:r[t].Value,value:this.getHiddenColumnData(n,r[t].Id)});return i.urlLinkInfo=u.UrlLink,i},t.prototype.getHiddenColumnData=function(n,t){var r=this.getXAxisContainer(),u=this.getYAxisContainer(),f=JSON.parse(this.dataValues.data),i=f.filter(function(t){return t[r.FieldInfos[0].UniqueColumnName]===n.series.dataSource[n.pointIndex].x&&t[u.FieldInfos[0].UniqueColumnName]===n.series.dataSource[n.pointIndex].y});return i.length>0?i[0][t]:""},t.prototype.showSelectItemsInViewData=function(n){var i=[],t;if(!BoldBIDashboard.isNullOrUndefined(n)&&(!BoldBIDashboard.isNullOrUndefined(this.getLabelContainer())&&this.getLabelContainer().FieldInfos.length>0&&i.push({selectedItem:n.point.label,columnId:this.getLabelContainer().FieldInfos[0].Id,UniqueColumnName:this.getLabelContainer().FieldInfos[0].UniqueColumnName}),(this.getXAxisContainer().FieldInfos[0].FieldActualType==="bbi-designer-dataset-datetime"||this.getXAxisContainer().FieldInfos[0].FieldActualType==="bbi-designer-dataset-string"||this.getXAxisContainer().FieldInfos[0].FieldActualType==="bbi-designer-dataset-time")&&i.push({selectedItem:n.point.x,columnId:this.getXAxisContainer().FieldInfos[0].Id,UniqueColumnName:this.getXAxisContainer().FieldInfos[0].UniqueColumnName}),!BoldBIDashboard.isNullOrUndefined(this.getToolipContainer())&&this.getToolipContainer().FieldInfos.length>0))for(t=0;t<this.getToolipContainer().FieldInfos.length;t++)BoldBIDashboard.isNullOrUndefined(n.point.toolTipFields[this.getToolipContainer().FieldInfos[t].UniqueColumnName])||(this.getToolipContainer().FieldInfos[0].FieldActualType==="bbi-designer-dataset-datetime"||this.getToolipContainer().FieldInfos[0].FieldActualType==="bbi-designer-dataset-string"||this.getToolipContainer().FieldInfos[0].FieldActualType==="bbi-designer-dataset-time")&&i.push({selectedItem:n.point.toolTipFields[this.getToolipContainer().FieldInfos[t].UniqueColumnName],columnId:this.getToolipContainer().FieldInfos[t].Id,UniqueColumnName:this.getToolipContainer().FieldInfos[t].UniqueColumnName});return i},t.prototype.onCustomLegendClick=function(){this.dashboardDesigner.modules.customLegendSettings.openLegendSettings(this,"updateCustomLegend",this.getBubbleScatterProperties().CustomLegendInfo)},t.prototype.updateCustomLegend=function(n){if(this.getBubbleScatterProperties().IsCustomLegend=!0,this.getBubbleScatterProperties().CustomLegendInfo=n,!BoldBIDashboard.isNullOrUndefined(this.bubbleScatterChartObj)){for(var t=0;t<this.bubbleScatterChartObj.series.length;t++)this.updateCustomLegendValuesToChartObj(this.bubbleScatterChartObj);this.bubbleScatterChartObj.refresh()}this.designerInstance.modules.serialization.notifyChange();BoldBIDashboardDesigner.editManager.setMergeAction(!1)},t.prototype.updateCustomLegendValuesToChartObj=function(n){var i,t,r;if(!BoldBIDashboard.isNullOrUndefined(this.bubbleScatterChartObj))for(i=n.series.length,t=0;t<i;t++)r=this.getBubbleScatterProperties().CustomLegendInfo.GroupValues.Values,n.series[t].name=this.getCustomLegendItem(n.series[t],r)},t.prototype.getSeriesCustomLegendItem=function(n,t){for(var i=0;i<n.length;i++)if(n[i].LegendName===t)return n[i].CustomLegendName;return t},t.prototype.updateBubbleScatterChartAnimation=function(n){var t,i;if(this.getBubbleScatterProperties().EnableAnimation=n,t=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart"),!BoldBIDashboard.isNullOrUndefined(t)){for(i=0;i<t.series.length;i++)t.series[i].animation.enable=n;t.refresh()}},t.prototype.updateShowValueLabel=function(n){var t,i;if(this.getBubbleScatterProperties().ShowValueLabel=n,t=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart"),!BoldBIDashboard.isNullOrUndefined(t)){for(i=0;i<t.series.length;i++)t.series[i].marker.dataLabel.visible=n;t.refresh()}},t.prototype.updateShowTooltip=function(n){var t,i;if(this.getBubbleScatterProperties().ShowTooltip=n,t=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart"),!BoldBIDashboard.isNullOrUndefined(t)){for(i=0;i<t.series.length;i++)t.tooltip.enable=n;t.refresh()}},t.prototype.updateBubbleScatterChartLegendVisiblity=function(n){this.getBubbleScatterProperties().ShowLegend=n;var t=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart");BoldBIDashboard.isNullOrUndefined(t)||(t.legendSettings.visible=this.ControlContainer.width()<150||this.ControlContainer.height()<150?!1:n);this.propertyPanel.updateItemVisibility(this.Type,"LegendSettings","LegendPosition",n);this.propertyPanel.updateItemVisibility(this.Type,"LegendSettings","CustomLegend",n&&this.DataGroupInfo.FieldContainers.length>0&&this.getYAxisContainer().FieldInfos.length>0&&this.getXAxisContainer().FieldInfos.length>0)},t.prototype.updateLegendPosition=function(n){this.getBubbleScatterProperties().LegendPosition=n;var t=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart");BoldBIDashboard.isNullOrUndefined(t)||(t.legendSettings.position=this.getResponsiveLegendPosition(n))},t.prototype.updateCustomLegendSettingsValue=function(){this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.getXAxisContainer().FieldInfos.length>0&&this.getYAxisContainer().FieldInfos.length>0&&this.getRowContainer().FieldInfos.length>0?this.bindChartLegendsToLegendInfo(this.bubbleScatterChartObj,"Values"):this.getXAxisContainer().FieldInfos.length>0&&this.getYAxisContainer().FieldInfos.length>0&&this.bindChartLegendsToLegendInfo(this.bubbleScatterChartObj,"Values"));this.updateCustomLegendValuesToChartObj(this.bubbleScatterChartObj)},t.prototype.bindChartLegendsToLegendInfo=function(n,t){var c=n.series.length,u=this.getBubbleScatterProperties().CustomLegendInfo.GroupValues.Values,e=[],r,o,s,h,i,f,l;if(u.length>0)if(BoldBIDashboard.isNullOrUndefined(this.getRowContainer())||BoldBIDashboard.isNullOrUndefined(this.getRowContainer().FieldInfos)||this.getRowContainer().FieldInfos.length!==1){if(t==="Values")for(r=0;r<u.length;r++)for(i=0;i<c;i++)o=JSON.parse(this.dataValues.widgetData[i]),s=o.id,s===u[r].Id&&u[r].IsModified&&e.indexOf(s)===-1&&e.push(o.id)}else for(r=0;r<u.length;r++)for(i=0;i<c;i++)o=JSON.parse(this.dataValues.widgetData[i]),o.legendName===u[r].Name&&u[r].IsModified&&e.indexOf(o.legendName)===-1&&e.push(o.legendName);for(h=[],i=0;i<this.dataValues.widgetData.length;i++)f=JSON.parse(this.dataValues.widgetData[i]),l={Name:!BoldBIDashboard.isNullOrUndefined(this.getRowContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getRowContainer().FieldInfos)&&this.getRowContainer().FieldInfos.length===1?f.legendName:f.name,Caption:f.legendCaption,Value:this.getModifiedValuesForLegend(u,f,e,t),IsModified:!BoldBIDashboard.isNullOrUndefined(this.getRowContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getRowContainer().FieldInfos)&&this.getRowContainer().FieldInfos.length===1?e.indexOf(f.legendName)>-1:e.indexOf(f.id)>-1,Id:f.id},h.push(l);t==="Values"&&this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.getBubbleScatterProperties().CustomLegendInfo.GroupValues.Values=h)},t.prototype.getModifiedValuesForLegend=function(n,t,i){for(var u=!BoldBIDashboard.isNullOrUndefined(this.getRowContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getRowContainer().FieldInfos)&&this.getRowContainer().FieldInfos.length===1?!0:!1,f=u?t.legendCaption:t.name,r=0;r<n.length;r++)if(u?i.indexOf(n[r].Name)>-1&&n[r].Name===t.legendName:i.indexOf(n[r].Id)>-1&&n[r].Id===t.id){f=n[r].Value;break}return f},t.prototype.getCustomLegendItem=function(n,t){if(t.length>0)for(var i=0;i<t.length;i++)if(BoldBIDashboard.isNullOrUndefined(this.getRowContainer())||BoldBIDashboard.isNullOrUndefined(this.getRowContainer().FieldInfos)||this.getRowContainer().FieldInfos.length!==1){if(t[i].Id===n.id)return t[i].Value}else if(t[i].Name===n.legendName)return t[i].Value},t.prototype.getResponsiveLegendPosition=function(n){return n==="Auto"?this.CellInfo.ColumnSpan>=4*this.CellInfo.RowSpan?"Right":"Bottom":n},t.prototype.updateXAxisVisibility=function(n){this.getBubbleScatterProperties().CategoryAxisSettings.IsEnabled=n;var t=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart");BoldBIDashboard.isNullOrUndefined(t)||(t.primaryXAxis.visible=n);this.propertyPanel.updateItemVisibility(this.Type,"X-Axis","CategoryAxisTitle",n);this.propertyPanel.updateItemVisibility(this.Type,"X-Axis","CategoryAxisTitleValue",this.getBubbleScatterProperties().CategoryAxisSettings.IsEnableTitle&&n);this.propertyPanel.updateItemVisibility(this.Type,"X-Axis","CategoryAxisLabelRotation",n)},t.prototype.updateXAxisTitleVisibility=function(n){this.getBubbleScatterProperties().CategoryAxisSettings.IsEnableTitle=n;this.getBubbleScatterProperties().CategoryAxisSettings.IsCustomTitle||this.categoryAxisTitleUpdateWithDefaultValue();this.propertyPanel.updateItemVisibility(this.Type,"X-Axis","CategoryAxisTitleValue",n)},t.prototype.updateXAxisTitleValue=function(n){BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n)?(this.getBubbleScatterProperties().CategoryAxisSettings.IsCustomTitle=!1,n=this.getXAxisContainer().FieldInfos[0].DisplayName):this.getBubbleScatterProperties().CategoryAxisSettings.IsCustomTitle=!0;this.getBubbleScatterProperties().CategoryAxisSettings.Title=n;var t=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart");BoldBIDashboard.isNullOrUndefined(t)||(t.primaryXAxis.title=n)},t.prototype.categoryAxisTitleUpdateWithDefaultValue=function(){var n=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart");BoldBIDashboard.isNullOrUndefined(n)||(n.primaryXAxis.title=this.getBubbleScatterProperties().CategoryAxisSettings.Title=this.getBubbleScatterProperties().CategoryAxisSettings.IsCustomTitle?this.getBubbleScatterProperties().CategoryAxisSettings.Title:this.getBubbleScatterProperties().CategoryAxisSettings.IsEnableTitle?this.getXAxisContainer().FieldInfos[0].DisplayName:"")},t.prototype.updateCategoryLabelRotation=function(n){var t=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart");this.getBubbleScatterProperties().CategoryAxisSettings.LabelRotation=n.replace(new RegExp(String.fromCharCode(176),"g"),"");BoldBIDashboard.isNullOrUndefined(t)||(t.primaryXAxis.labelRotation=this.getResponsiveLabelRotation(this.getBubbleScatterProperties().CategoryAxisSettings.LabelRotation),t.refresh())},t.prototype.getResponsiveLabelRotation=function(n){return n==="Auto"?this.CellInfo.RowSpan>this.CellInfo.ColumnSpan?"90":"0":n==="None"?"0":n},t.prototype.updateYAxisVisibility=function(n){this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsEnabled=n;var t=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart");BoldBIDashboard.isNullOrUndefined(t)||(t.primaryYAxis.visible=n);this.propertyPanel.updateItemVisibility(this.Type,"Y-Axis","PrimaryAxisTitle",n);this.propertyPanel.updateItemVisibility(this.Type,"Y-Axis","PrimaryAxisTitleValue",this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsEnableTitle&&n)},t.prototype.updateYAxisTitleVisibility=function(n){this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsEnableTitle=n;this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsCustomTitle||this.primaryAxisTitleUpdateWithDefaultValue();this.propertyPanel.updateItemVisibility(this.Type,"Y-Axis","PrimaryAxisTitleValue",n)},t.prototype.updateYAxisTitleValue=function(n){BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n)?(this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsCustomTitle=!1,n=this.getYAxisContainer().FieldInfos[0].DisplayName):this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsCustomTitle=!0;this.getBubbleScatterProperties().PrimaryValueAxisSettings.Title=n;var t=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart");BoldBIDashboard.isNullOrUndefined(t)||(t.primaryYAxis.title=n)},t.prototype.primaryAxisTitleUpdateWithDefaultValue=function(){var n=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart");BoldBIDashboard.isNullOrUndefined(n)||(n.primaryYAxis.title=this.getBubbleScatterProperties().PrimaryValueAxisSettings.Title=this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsCustomTitle?this.getBubbleScatterProperties().PrimaryValueAxisSettings.Title:this.getBubbleScatterProperties().PrimaryValueAxisSettings.IsEnableTitle?this.getYAxisContainer().FieldInfos[0].DisplayName:"")},t.prototype.updateOpposedAxis=function(n){this.getBubbleScatterProperties().PrimaryValueAxisSettings.OpposedAxis=n;var t=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart");BoldBIDashboard.isNullOrUndefined(t)||(t.primaryYAxis.opposedPosition=n)},t.prototype.onYAxisFormatClick=function(){var i=this,n=BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().PrimaryValueAxisSettings.Format)?new MeasureFormatting:JSON.parse(JSON.stringify(this.getBubbleScatterProperties().PrimaryValueAxisSettings.Format)),t;n.FormatType=isNaN(parseInt(n.FormatType,10))?n.FormatType:BoldBIDashboard.DashboardDesignerUtility.Serialization.getDataValueFormat(n.FormatType);n.Unit=isNaN(parseInt(n.Unit,10))?n.Unit:BoldBIDashboard.DashboardDesignerUtility.Serialization.getNumberFormat(n.Unit);t=this.widgetHelper.getCurrentWidgetInstance();this.dashboardDesigner.modules.formatDialog.openFormatDialog(n,t.dataGroupInfo.DataSourceName,function(n){var r=i.getBubbleScatterProperties().PrimaryValueAxisSettings.Format;r.Culture=n.Culture;r.DecimalPoints=n.DecimalPoints;r.DecimalSeparator=n.DecimalSeparator;r.GroupSeparator=n.GroupSeparator;r.FormatType=n.FormatType;r.Unit=n.Unit;r.Prefix=n.Prefix;r.Suffix=n.Suffix;t.getBubbleScatterProperties().PrimaryValueAxisSettings.Format=r;i.designerInstance.modules.serialization.notifyChange();t.refresh()})},t.prototype.onXAxisFormatClick=function(){var i=this,n=BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().CategoryAxisSettings.Format)?new MeasureFormatting:JSON.parse(JSON.stringify(this.getBubbleScatterProperties().CategoryAxisSettings.Format)),t;n.FormatType=isNaN(parseInt(n.FormatType,10))?n.FormatType:BoldBIDashboard.DashboardDesignerUtility.Serialization.getDataValueFormat(n.FormatType);n.Unit=isNaN(parseInt(n.Unit,10))?n.Unit:BoldBIDashboard.DashboardDesignerUtility.Serialization.getNumberFormat(n.Unit);t=this.widgetHelper.getCurrentWidgetInstance();this.dashboardDesigner.modules.formatDialog.openFormatDialog(n,t.dataGroupInfo.DataSourceName,function(n){var r=i.getBubbleScatterProperties().CategoryAxisSettings.Format;r.Culture=n.Culture;r.DecimalPoints=n.DecimalPoints;r.DecimalSeparator=n.DecimalSeparator;r.GroupSeparator=n.GroupSeparator;r.FormatType=n.FormatType;r.Unit=n.Unit;r.Prefix=n.Prefix;r.Suffix=n.Suffix;t.getBubbleScatterProperties().CategoryAxisSettings.Format=r;i.designerInstance.modules.serialization.notifyChange();t.refresh()})},t.prototype.updateCategoryGridLines=function(n){var t=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart");this.getBubbleScatterProperties().CategoryAxisGridLines=n;BoldBIDashboard.isNullOrUndefined(t)||(t.primaryXAxis.majorGridLines.width=n?1:0)},t.prototype.updatePrimaryGridLines=function(n){var t=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart");this.getBubbleScatterProperties().PrimaryValueGridLines=n;BoldBIDashboard.isNullOrUndefined(t)||(t.primaryYAxis.majorGridLines.width=n?1:0)},t.prototype.updateMasterWidget=function(n){BoldBIDashboard.isNullOrUndefined(this.bubbleScatterChartObj)||(n?(this.bubbleScatterChartObj.selectionMode="Point",this.bubbleScatterChartObj.highlightMode="Point"):(this.bubbleScatterChartObj.selectionMode="None",this.bubbleScatterChartObj.highlightMode="None"),this.bubbleScatterChartObj.refresh())},t.prototype.updateDefaultPaletteVisibility=function(n,t){t===void 0&&(t=!1);this.getBubbleScatterProperties().IsDefaultColorPalette=n;var i=this.getModifiedColorPalette();t||this.updateColorPaletteToChartWidget(i);n||this.updateColorPaletteModel();this.propertyPanel.updateItemVisibility(this.Type,"SeriesPalette","ColorPalette",!n);this.propertyPanel.refreshScroller()},t.prototype.updateDisplayTextBasedProperties=function(){this.categoryAxisTitleUpdateWithDefaultValue();this.primaryAxisTitleUpdateWithDefaultValue();this.generateTooltip()},t.prototype.getRowContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Row")},t.prototype.getLabelContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Label")},t.prototype.getSizeContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Size")},t.prototype.getXAxisContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"XAxis")},t.prototype.getYAxisContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"YAxis")},t.prototype.getToolipContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Tooltip")},t.prototype.getHiddenColumnContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"HiddenColumn")},t.prototype.isValidDataConfiguration=function(){var n=!0;return(this.getXAxisContainer().FieldInfos.length>0&&this.getXAxisContainer().FieldInfos[0].SummaryType===SummaryType.NONE||this.getYAxisContainer().FieldInfos.length>0&&this.getYAxisContainer().FieldInfos[0].SummaryType===SummaryType.NONE)&&this.getLabelContainer().FieldInfos.length>0&&(n=!1),n},t.prototype.updateDefaultJsonProperties=function(){this.getBubbleScatterProperties().CustomLegendInfo.SingleValues=[];this.getBubbleScatterProperties().CustomLegendInfo.GroupValues.Series=[];this.getBubbleScatterProperties().CustomLegendInfo.GroupValues.Values=[];this.getBubbleScatterProperties().ColorPaletteModel=[];this.getBubbleScatterProperties().IsDefaultColorPalette=!0;this.getBubbleScatterProperties().IsCustomLegend=!1;this.getBubbleScatterProperties().ColorCustomization=null;this.getBubbleScatterProperties().DefaultColors=null;this.getBubbleScatterProperties().EnableColorSettings=!1},t.prototype.dataGroupBindedColumnInfo=function(n){var i=0,r=0,u=0,f=0,e=0,o=0,s=0,h=0,t;if(!BoldBIDashboard.isNullOrUndefined(n.FieldContainers))for(t=0;t<n.FieldContainers.length;t++)switch(n.FieldContainers[t].Name){case"YAxis":i=n.FieldContainers[t].FieldInfos.length;e=t;break;case"Row":o=n.FieldContainers[t].FieldInfos.length;f=t;break;case"Label":u=n.FieldContainers[t].FieldInfos.length;h=t;break;case"XAxis":r=n.FieldContainers[t].FieldInfos.length;s=t}return{yaxisLength:i,xaxisLength:r,rowLength:o,rowIndex:f,yaxisIndex:e,xaxisIndex:s,labelLength:u,labelIndex:h}},t.prototype.renderDefaultColorSettings=function(n,t,i){var r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),o=this.getBubbleScatterProperties(),s,u,f,c,v,d;if(!BoldBIDashboard.isNullOrUndefined(r))if(s=this.dataGroupBindedColumnInfo(r.DataGroupInfo),r.categoryId=this.designerId+"_"+t+"_"+i.categoryName,this.defaultPaletteContainer=this.designerInstance.element.find("#"+r.categoryId),this.defaultPaletteContainer.length!==0||BoldBIDashboard.isNullOrUndefined(n)){if(!BoldBIDashboard.isNullOrUndefined(this.defaultPaletteContainer)&&this.defaultPaletteContainer.length>0){var a=this.defaultPaletteContainer.find("#"+r.categoryId+"_palatte_body"),k=r.defaultPaletteContainer.find("#"+r.categoryId+"_palatte_button"),l=r.defaultPaletteContainer.find("#"+r.categoryId+"_color_settings_button"),e=r.defaultPaletteContainer.find("#"+r.categoryId+"_advance_color_palatte_body_element");if(a.empty(),!BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().DefaultColors)){for(u=0;u<this.getBubbleScatterProperties().DefaultColors.length;u++)f=this.getBubbleScatterProperties().DefaultColors[u],c={name:this.getFieldNameForColorPalette(f.Name),color:f.Color,isEdited:f.IsEdited},this.renderDefaultColorPaletteRow(c,a,u);v=r.defaultPaletteContainer.find("#"+r.categoryId+"_advance_color_palatte_check_element");BoldBIDashboard.isNullOrUndefined(v)||(d=v.data("BoldBIDashboardCheckBox"),d.option("checked",o.EnableColorSettings));a.css({height:50*o.DefaultColors.length+"px"});this.isAdvanceColorSupported(s)&&s.rowLength===0?(e.css("display","block"),this.updateAdvanceButtonVisibility(k,l,o.EnableColorSettings)):(e.css("display","none"),k.css("display","none"))}}}else{this.defaultPaletteContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-designer-scroll-style-3","",{width:"460px"},{id:r.categoryId});var y=BoldBIDashboard.buildTag("div","",{},{id:r.categoryId+"_palatte_body"}),e=BoldBIDashboard.buildTag("div","",{},{id:r.categoryId+"_advance_color_palatte_body_element"}),h=BoldBIDashboard.buildTag("div","",{},{id:r.categoryId+"_palatte_button"}),p=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily e-dbrd-property-advance-color","",{},{id:r.categoryId+"_advance_color_palatte_text_element"}),w=BoldBIDashboard.buildTag("div","",{},{id:r.categoryId+"_advance_color_palatte_check_element"});if(e.append(p,w),this.defaultPaletteContainer.append(y,e,h),p.text(this.locale.propertyPanel.formatting.colorSettings.advancedSettingText),w.BoldBIDashboardCheckBox({checked:o.EnableColorSettings,change:this.bbdesigner$.proxy(r.showAdvanceColorPalette,r),width:(r.propertyPanel.propertyPanelContainer.width()-33)*57/100-15+"px",cssClass:"e-designer-prop-checkbox"}),n.append(this.defaultPaletteContainer),!BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().DefaultColors))for(u=0;u<this.getBubbleScatterProperties().DefaultColors.length;u++)f=this.getBubbleScatterProperties().DefaultColors[u],c={name:this.getFieldNameForColorPalette(f.Name),color:f.Color,isEdited:f.IsEdited},this.renderDefaultColorPaletteRow(c,y,u);var b=BoldBIDashboard.buildTag("div.e-advance-option-wrap","",{"margin-left":"205px"},{}),l=BoldBIDashboard.buildTag("button.e-scatterchart-widget-color-settings-button e-advanced-color-settings-button e-advanced-color-settings-button-alignment bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.propertyPanel.customizeBtnText,{width:"160px"},{id:r.categoryId+"_color_settings_button",type:"button"});b.append(l);h.append(b);h.css("display","none");this.isAdvanceColorSupported(s)&&s.rowLength===0?(e.css("display","block"),this.updateAdvanceButtonVisibility(h,l,o.EnableColorSettings)):(e.css("display","none"),h.css("display","none"))}},t.prototype.showAdvanceColorPalette=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),u=t.dataGroupBindedColumnInfo(t.DataGroupInfo),r,i;t.isAdvanceColorSupported(u)&&u.rowLength===0&&n.isInteraction&&(r=t.defaultPaletteContainer.find("#"+t.categoryId+"_color_settings_button"),n.isChecked?(r.removeAttr("disabled"),t.openAdvancedColorSettings(null)):(r.attr("disabled","disabled"),t.widgetJson.EnableColorSettings=!1,BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties())||(i=t.bubbleScatterChartObj,i.rangeColorSettings=[],i.series[0].pointColorMapping="",i.refresh())),t.showConfigureColorPalette(n.isChecked))},t.prototype.showConfigureColorPalette=function(n){var i,t;if(this.getBubbleScatterProperties().EnableColorSettings=n,this.getBubbleScatterProperties().ColorCustomization=n?this.getBubbleScatterProperties().ColorCustomization:null,n&&!BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().ColorCustomization))!BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().ColorCustomization.SolidColorInfo)&&this.getBubbleScatterProperties().ColorCustomization.SolidColorInfo.length>0?this.updateModifiedColorToWidget(this.getBubbleScatterProperties().ColorCustomization):BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().ColorCustomization.GradientSettings)&&BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().ColorCustomization.RuleRangeSettings)||this.updateAdvancedColorSettings(this.getBubbleScatterProperties().ColorCustomization,!1);else if(!BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().DefaultColors)&&this.getBubbleScatterProperties().DefaultColors.length>0)for(i=[],t=0;t<this.getBubbleScatterProperties().DefaultColors.length;t++)i.push(this.getBubbleScatterProperties().DefaultColors[t].Color);this.designerInstance.modules.serialization.notifyChange();n||this.dataConfigurationInstance.postDraggedFields()},t.prototype.updateModifiedColorToWidget=function(n,t){var f,u,r,e,s,o,i;if(t===void 0&&(t=null),f=this.dataGroupBindedColumnInfo(this.DataGroupInfo),(BoldBIDashboard.isNullOrUndefined(n)||n.Type===ColorCustomizationType.Individual)&&this.isAdvanceColorSupported(f))if(this.getBubbleScatterProperties().EnableColorSettings&&!BoldBIDashboard.isNullOrUndefined(n)&&n.SolidColorInfo.length!==0){if(u=[],r=this.getDataGroupID(),r.length<n.SolidColorInfo.length){for(e=[],s=function(t){e.push(n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===r[t].UniqueColumnName})[0])},i=0;i<r.length;i++)s(i);n.SolidColorInfo=e}u=n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===r[0].UniqueColumnName}).length>0?n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===r[0].UniqueColumnName})[0].DefaultColorSets:u;BoldBIDashboard.isNullOrUndefined(t)||this.updateColorPaletteName(u,t)}else if(!BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().DefaultColors)&&this.getBubbleScatterProperties().DefaultColors.length>0&&f.rowLength===0){for(o=[],i=0;i<this.getBubbleScatterProperties().DefaultColors.length;i++)o.push(this.getBubbleScatterProperties().DefaultColors[i].Color);this.updateChartColor(o)}},t.prototype.updateColorPaletteName=function(n,t){for(var r=JSON.parse(t),i=0;i<r.length;i++)n[i].Name=this.getDataGroupID().length>0?r[i][this.getDataGroupID()[0].UniqueColumnName]:"",n[i].IsEdited=!0},t.prototype.updateAdvanceButtonVisibility=function(n,t,i){n.css("display","block");t.css("display","block");i?t.removeAttr("disabled"):t.attr("disabled","disabled")},t.prototype.isAdvanceColorSupported=function(n){return!BoldBIDashboard.isNullOrUndefined(n)&&n.rowLength===0?!0:!1},t.prototype.getFieldNameForColorPalette=function(n){var u=this.DataGroupInfo,e="",i,t,f,o,r;if(!BoldBIDashboard.isNullOrUndefined(u.FieldContainers)&&u.FieldContainers.length>0)for(i=u.FieldContainers,t=0;t<i.length;t++)for(f=0;f<i[t].FieldInfos.length;f++)if(o=i[t].FieldInfos,r=o.filter(function(t){return t.UniqueColumnName===n}),!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0){e=r[0].Name;break}return e},t.prototype.renderDefaultColorPaletteRow=function(n,t,i){var f=BoldBIDashboard.buildTag("div","",{height:"50px",width:"100%"},{id:this.designerId+"_color_scale_row_"+i}),e=BoldBIDashboard.buildTag("div","",{width:"202.1px",float:"left","margin-top":"8.5px","margin-left":"3px"}),o=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"}),r,u;o.text(n.name);e.append(o);r=BoldBIDashboard.buildTag("div","",{width:"100px",display:"inline-block",float:"left","margin-top":"3px"});u=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:this.designerId+"_default_color_"+i});r.append(u);u.BoldBIDashboardColorPicker({value:n.color,width:"100px",cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label",select:this.bbdesigner$.proxy(this.updateDefaultPalette,this,i),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});f.append(e,r);t.append(f)},t.prototype.updateDefaultPalette=function(n,t){var f=this.getYAxisContainer().FieldInfos,r,i,u;if(this.getBubbleScatterProperties().DefaultColors.length>n&&(this.getBubbleScatterProperties().DefaultColors[n].Color!==t.value&&(this.getBubbleScatterProperties().DefaultColors[n].IsEdited=!0),this.getBubbleScatterProperties().DefaultColors[n].Color=t.value,this.getBubbleScatterProperties().DefaultColors[n].Name=f[n].UniqueColumnName),!BoldBIDashboard.isNullOrUndefined(this.bubbleScatterChartObj))for(r=this.bubbleScatterChartObj.series.length,i=0;i<r;i++)u=this.getDefaultColorSettings(this.bubbleScatterChartObj.series[i].id),this.bubbleScatterChartObj.series[i].fill=u.Color,this.bubbleScatterChartObj.refresh();this.designerInstance.modules.serialization.notifyChange();BoldBIDashboardDesigner.editManager.setMergeAction(!1)},t.prototype.getDefaultColorSettings=function(n){this.getBubbleScatterProperties().DefaultColors=BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().DefaultColors)?[]:this.getBubbleScatterProperties().DefaultColors;for(var t=0;t<this.getBubbleScatterProperties().DefaultColors.length;t++)if(this.getBubbleScatterProperties().DefaultColors[t].Name===n)return this.getBubbleScatterProperties().DefaultColors[t];return null},t.prototype.updateDefaultColorsToProperty=function(n){var u=[],r=this.getYAxisContainer().FieldInfos,f=this.getRowContainer().FieldInfos,i;if(BoldBIDashboard.isNullOrUndefined(n.getBubbleScatterProperties().DefaultColors)&&(n.getBubbleScatterProperties().DefaultColors=[]),f.length===0)for(i=0;i<r.length;i++){var e=this.getColumnId(r[i].UniqueColumnName,n.DataGroupInfo.FieldContainers),t=this.getDefaultColorSettings(r[i].UniqueColumnName),o=BoldBIDashboard.Dashboard.WidgetHelper.getColorCode(n,e,t);BoldBIDashboard.isNullOrUndefined(t)||!t.IsEdited?(t=new DefaultColorSet,t.Color=o,t.Name=r[i].UniqueColumnName,t.IsEdited=!1,u.push(t)):u.push(t)}n.getBubbleScatterProperties().DefaultColors=u},t.prototype.updateColorPaletteModel=function(){var n=this.propertyPanel.getPropertyElement(this.getBubbleScatterChartPropertyPanel(),"ColorPalette","SeriesPalette",-1);this.openColorPalette(null,"Chart_SeriesPalette",n)},t.prototype.openColorPalette=function(n,t,i){if(this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design)if(this.getBubbleScatterProperties().IsDefaultColorPalette&&BoldBIDashboard.isNullOrUndefined(n)){var r=this.designerInstance.element.find(".e-color-palette-container");r.css("display","none")}else this.dashboardDesigner.modules.colorPalette.openColorPalette(n,t,i,this,"updateColorPalette",this.getBubbleScatterProperties().ColorPaletteModel)},t.prototype.updateColorPalette=function(n){var i=[],r,t;BoldBIDashboard.isNullOrUndefined(n.textValue)||(r=n.textValue,t=n.rowIndex,i=this.getModifiedColorPalette(),i[t]=this.getBubbleScatterProperties().ColorPaletteModel[t].Value=r,this.getBubbleScatterProperties().ColorPaletteModel[t].IsModified=!0,this.updateChartColor(i),this.designerInstance.modules.serialization.notifyChange(),BoldBIDashboardDesigner.editManager.setMergeAction(!1))},t.prototype.updateChartColor=function(n){this.updateColorPaletteToChartWidget(n)},t.prototype.updateColorPaletteToChartWidget=function(n){var t=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart"),i,r;if(!BoldBIDashboard.isNullOrUndefined(t)){for(t.palette=n,i=0;i<t.series.length;i++)for(r=0;r<this.getBubbleScatterProperties().ColorPaletteModel.length;r++)t.series[i].legendName===this.getBubbleScatterProperties().ColorPaletteModel[r].Name&&(t.series[i].fill=n[r]);t.refresh()}},t.prototype.getModifiedColorPalette=function(){var n=[],t=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart");return BoldBIDashboard.isNullOrUndefined(t)||(n=this.getColorPaletteValue(t.series)),n},t.prototype.getColorPaletteValue=function(n){var r=[],i,t;if(this.getBubbleScatterProperties().IsDefaultColorPalette){if(r=this.bbdesigner$.extend(!0,[],this.defaultColorPalette),n.length>this.defaultColorPalette.length)for(t=this.defaultColorPalette.length;t<n.length;t++)r[t]=this.defaultColorPalette[t%this.defaultColorPalette.length]}else{for(i=0;i<this.defaultColorPalette.length;i++)r[i]=BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().ColorPaletteModel[i])?this.defaultColorPalette[i]:this.getBubbleScatterProperties().ColorPaletteModel[i].Value;if(n.length>this.defaultColorPalette.length)for(t=this.defaultColorPalette.length;t<n.length;t++)r[t]=BoldBIDashboard.isNullOrUndefined(this.getBubbleScatterProperties().ColorPaletteModel[t])?this.defaultColorPalette[t%this.defaultColorPalette.length]:this.getBubbleScatterProperties().ColorPaletteModel[t].Value}return r},t.prototype.openAdvancedColorSettings=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),t=new ColorCustomization,f=new BoldBIDashboard.DashboardDesignerUtility.AdvancedColorCustomization(this.designerInstance),e=this.getDataGroupID().length===0?["Gradient","Rule"]:null,o=n.getBubbleScatterProperties().DefaultColors.length>0?n.getBubbleScatterProperties().DefaultColors[0].Color:BoldBIDashboard.DashboardUtil.defaultColorPalette[0],i,r,u;BoldBIDashboard.isNullOrUndefined(n.getBubbleScatterProperties().ColorCustomization)?t.Type=ColorCustomizationType.Gradient:t=this.bbdesigner$.extend(!0,{},n.getBubbleScatterProperties().ColorCustomization);i=n.DataGroupInfo;r=i.FieldContainers[0].FieldInfos[0];t=this.getSolidColorInfo(t,n);u={colorCustomizationObj:t,DataGroupInfo:n.DataGroupInfo,colorFields:n.colorFields,colorTypeCollection:e,defaultBasedOnField:r,defaultColorFill:o,isDefaultFormat:!0};f.populateUI(u,n,"updateAdvancedColorSettings")},t.prototype.getSolidColorInfo=function(n,t){var i=this.getDataGroupID(),e=BoldBIDashboard.isNullOrUndefined(n.SolidColorInfo)?[]:JSON.parse(JSON.stringify(n.SolidColorInfo)),u,f,r;for(n.SolidColorInfo=[],u=function(r){BoldBIDashboard.isNullOrUndefined(n.SolidColorInfo[r])&&(n.SolidColorInfo.push(new SolidColorSet),n.SolidColorInfo[r].BasedOn.FieldId=i[r].DataId,n.SolidColorInfo[r].BasedOn.SummaryType=SummaryType.NONE,n.SolidColorInfo[r].BasedOn.UniqueColumnName=i[r].UniqueColumnName,f.getDefaultColorSets(n.SolidColorInfo[r].DefaultColorSets,t));var u=e.filter(function(n){return n.BasedOn.UniqueColumnName===i[r].UniqueColumnName});u.length>0&&(n.SolidColorInfo.splice(r,1),n.SolidColorInfo.push(u[0]))},f=this,r=0;r<i.length;r++)u(r);return n},t.prototype.getDefaultColorSets=function(n,t){for(var i=0;i<t.defaultColorPalette.length;i++)n.push({Name:"color_"+(i+1),IsEdited:!1,Color:t.defaultColorPalette[i%t.defaultColorPalette.length]})},t.getDefaultColorSets=function(n,t){for(var i=0;i<t.defaultColorPalette.length;i++)n.push({Name:"color_"+(i+1),IsEdited:!1,Color:t.defaultColorPalette[i%t.defaultColorPalette.length]})},t.prototype.getDataGroupID=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),i,r,t;for(n=BoldBIDashboard.isNullOrUndefined(n)?this:n,i=n.DataGroupInfo.FieldContainers[2].FieldInfos.length!==0?n.DataGroupInfo.FieldContainers[2].FieldInfos:n.DataGroupInfo.FieldContainers[1].FieldInfos.length!==0?n.DataGroupInfo.FieldContainers[1].FieldInfos[0].FieldActualType!=="bbi-designer-dataset-number"?n.DataGroupInfo.FieldContainers[1].FieldInfos:[]:[],r=[],t=0;t<i.length;t++)r.push({DataId:i[t].Id,UniqueColumnName:i[t].UniqueColumnName,Field:i[t].Name});return r},t.prototype.updateAdvancedColorSettings=function(n,t){var i=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.dashboardDesigner.designerPanel.selectedReportItems[0])),e,o,r,u,f;!t&&i.getBubbleScatterProperties().EnableColorSettings?(i.getBubbleScatterProperties().ColorCustomization=n,e=i.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(i.DataGroupInfo,i),o={action:"ColorCustomization",fieldInfoList:e},i.isExistingChart=!1,this.WidgetDataFetch(o,i,this.dashboardDesigner),this.dashboardDesigner.modules.serialization.notifyChange()):BoldBIDashboard.isNullOrUndefined(i.getBubbleScatterProperties().ColorCustomization)&&(i.getBubbleScatterProperties().EnableColorSettings=!1,r=i.defaultPaletteContainer.find("#"+i.categoryId+"_advance_color_palatte_check_element"),u=i.defaultPaletteContainer.find("#"+i.categoryId+"_color_settings_button"),u.length>0&&u.attr("disabled","disabled"),r.length>0&&(f=r.data("BoldBIDashboardCheckBox"),BoldBIDashboard.isNullOrUndefined(f)||f.option("checked",!1)),i.showConfigureColorPalette(!t));BoldBIDashboardDesigner.editManager.setMergeAction(!1)},t.prototype.WidgetDataFetch=function(n,t,i){var r,f=t.getBubbleScatterProperties(),u=t.masterFilterWindowInstance.getSelectedValuesForWidgetRequest(),e=i.model.mode!==BoldBIDashboard.Designer.mode.design;r={Id:t.Name,Name:t.Name,ControlType:t.Type,DataGroupInfo:t.DataGroupInfo.FieldContainers,WidgetAction:n.action,ColorCustomization:this.getBubbleScatterProperties().EnableColorSettings?this.getBubbleScatterProperties().ColorCustomization:null,ChartSeriesTypeInfo:f.ChartSeriesTypeInfo};i.modules.util.doAjaxPost("POST",t.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.WidgetAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,fieldInfo:n.fieldInfoList,dataset:t.DataGroupInfo.DataSourceID,widgetInfo:r,request:AjaxRequest.Widget.toString(),selectedValuesList:BoldBIDashboard.isNullOrUndefined(u)?"":JSON.stringify(u),isDataSampleForViewMode:e})},{fnction:this.bbdesigner$.proxy(this.updateColorSettings,this,i,n),indicator:[BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.showLoadingIndicator,this,t),BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.hideLoadingIndicator,this,t)]})},t.prototype.updateColorSettings=function(n,t,i){n.modules.resource.updateColorCodeInfo(i);this.update(i)},t.prototype.setColorCustomization=function(n,t,i){var s=this.dataGroupBindedColumnInfo(this.DataGroupInfo),u;if(!BoldBIDashboard.isNullOrUndefined(n.ColorCustomization)&&this.isAdvanceColorSupported(s)){var f=null,e=null,r=n.ColorCustomization,o=r.Type===ColorCustomizationType.Gradient?r.GradientSettings.BasedOn:r.Type===ColorCustomizationType.Rule?r.RuleRangeSettings.BasedOn:null;BoldBIDashboard.isNullOrUndefined(i.minMaxValues)||BoldBIDashboard.isNullOrUndefined(o)||(u=JSON.parse(i.minMaxValues),Object.keys(u).length>0&&(f=Number(u["Min_"+o.FieldId.substring(15)+"_Color"]),e=Number(u["Max_"+o.FieldId.substring(15)+"_Color"])));n.ColorCustomization.Type===ColorCustomizationType.Gradient?(t.legendSettings.alignment="Center",t.legendSettings.mode="Gradient",t.series[0].colorName="colorName",t.legendSettings.title=n.ColorCustomization.GradientSettings.GradientColorInfo.legendText,t.rangeColorSettings=this.getGradientRangeColorMapping(r,f,e)):n.ColorCustomization.Type===ColorCustomizationType.Rule?BoldBIDashboard.isNullOrUndefined(r.RuleRangeSettings.RangeColorInfo[0].DimensionConditionalValue)?(t.legendSettings.mode="Range",t.series[0].colorName="colorName",t.series[0].legendShape=LegendShape.Circle,t.rangeColorSettings=this.getRuleRangeColorMapping(r,f,e)):(t.rangeColorSettings=[],t.legendSettings.visible=!1,t.series[0].colorName=""):n.ColorCustomization.Type===ColorCustomizationType.Individual&&(t.rangeColorSettings=[],t.series[0].colorName="",t.legendSettings.visible=!1,t.legendSettings.mode="Point")}else this.getBubbleScatterProperties().ColorCustomization=null,this.getBubbleScatterProperties().EnableColorSettings=!1,this.resetChartColorUpdateProperties(t,n);t.refresh()},t.prototype.getGradientRangeColorMapping=function(n,t,i){var r=n.GradientSettings,u=[],f=r.GradientColorInfo.Low.IsCustom?Number(r.GradientColorInfo.Low.Value):t,e=r.GradientColorInfo.High.IsCustom?Number(r.GradientColorInfo.High.Value):i,o;return t!==i?r.GradientColorInfo.HasMidColor?(o=r.GradientColorInfo.Mid.IsCustom?Number(r.GradientColorInfo.Mid.Value):(t+i)/2,u.push({start:f,end:o,colors:[r.GradientColorInfo.Low.Color,r.GradientColorInfo.Mid.Color]}),u.push({start:o,end:e,colors:[r.GradientColorInfo.Mid.Color,r.GradientColorInfo.High.Color]})):u.push({start:f,end:e,colors:[r.GradientColorInfo.Low.Color,r.GradientColorInfo.High.Color]}):u.push({start:f,end:e,colors:[r.GradientColorInfo.High.Color,r.GradientColorInfo.High.Color]}),u},t.prototype.getRuleRangeColorMapping=function(n,t,i){for(var s=n.RuleRangeSettings,u=[],h=1e-6,l=0;l<s.RangeColorInfo.length;l++){var c=l,e=this.getRangeColors(s.RangeColorInfo[c].PropertyColorPair),o=BoldBIDashboard.isNullOrUndefined(s.RangeColorInfo[c].RangeLabel)?"":s.RangeColorInfo[c].RangeLabel,r=[s.RangeColorInfo[c].StartRange,s.RangeColorInfo[c].EndRange],f=[];BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(i)?f.push(494065645841247e-338,17976931348623157e292):s.BasedOn.ValueType===ValueType.Value?f.push(t,i):f.push(0,100);switch(s.RangeColorInfo[c].MeasureCondition){case 0:u.push({start:r[0]+h,end:f[1],colors:e,label:o});break;case 1:u.push({start:r[0],end:f[1],colors:e,label:o});break;case 2:u.push({start:f[0],end:r[0]-h,colors:e,label:o});break;case 3:u.push({start:f[0],end:r[0],colors:e,label:o});break;case 4:u.push({start:r[0],end:r[0],colors:e,label:o});break;case 5:u.push({start:f[0],end:r[0]-h,Color:e,label:o});u.push({start:r[0]+h,end:f[1],colors:e,label:o});break;case 6:u.push({start:r[0]+h,end:r[1]-h,colors:e,label:o});break;case 7:u.push({start:f[0],end:r[0]-h,colors:e,label:o});u.push({start:r[1]+h,end:f[1],colors:e,label:o})}}return u},t.prototype.getRangeColors=function(n){for(var i=[],t=0;t<n.length;t++)if(n[t].WidgetProperties===0){i.push(n[t].Color);break}return i},t.prototype.resetChartColorUpdateProperties=function(n){n.legendSettings.mode="Series";n.rangeColorSettings=[];n.legendSettings.visible=this.ControlContainer.height()>150&&this.ControlContainer.width()>150&&this.getBubbleScatterProperties().ShowLegend},t.prototype.showLoadingIndicator=function(n){n.controlContainer.find(".bbi-background-waiting-popup").show()},t.prototype.hideLoadingIndicator=function(n){n.controlContainer.find(".bbi-background-waiting-popup").hide()},t.prototype.updateSeriesColorPalette=function(n){var p=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart"),e=p.series,r,u,l,o,a,s,h,t,f,i;if(!BoldBIDashboard.isNullOrUndefined(this.getRowContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getRowContainer().FieldInfos)&&this.getRowContainer().FieldInfos.length>0){if(r=[],u=[],!BoldBIDashboard.isNullOrUndefined(this.getRowContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getRowContainer().FieldInfos)&&this.getRowContainer().FieldInfos.length>0&&(r=this.getBubbleScatterProperties().CustomLegendInfo.GroupValues.Values),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design){for(l=function(n){var t=[],i;BoldBIDashboard.isNullOrUndefined(o.getBubbleScatterProperties().ColorPaletteModel[n])||BoldBIDashboard.isNullOrUndefined(o.getBubbleScatterProperties().ColorPaletteModel[n].Value)||(t=o.getBubbleScatterProperties().ColorPaletteModel.filter(function(t){return t.Name===r[n].Name}));i=!BoldBIDashboard.isNullOrUndefined(t[0])&&!BoldBIDashboard.isNullOrUndefined(t[0].Value)&&!o.getBubbleScatterProperties().IsDefaultColorPalette?t[0].Value:o.defaultColorPalette[n%o.defaultColorPalette.length];u.push({Name:r[n].Name,Value:i,IsModified:!1,Id:r[n].Id})},o=this,t=0;t<r.length;t++)l(t);this.getBubbleScatterProperties().ColorPaletteModel=u}else for(a=function(n){var t=s.getBubbleScatterProperties().ColorPaletteModel.filter(function(t){return t.Name===r[n].Name}),i=!BoldBIDashboard.isNullOrUndefined(t[0])&&!BoldBIDashboard.isNullOrUndefined(t[0].Value)?t[0].Value:s.defaultColorPalette[n%s.defaultColorPalette.length];u.push({Name:r[n].Name,Value:i,IsModified:!1,Id:r[n].Id})},s=this,t=0;t<r.length;t++)a(t);if(this.getBubbleScatterProperties().IsDefaultColorPalette||this.updateColorPaletteModel(),u.length>0)for(t=0;t<e.length;t++)for(i=0;i<u.length;i++)e[t].legendName===u[i].Name&&(e[t].fill=u[i].Value)}else if(this.getBubbleScatterProperties().EnableColorSettings){for(h=this.getColorFieldInfo(this.getBubbleScatterProperties().ColorCustomization,this.getBubbleScatterProperties().EnableColorSettings,this),t=0;t<e.length;t++)if(f=e[t].dataSource,!BoldBIDashboard.isNullOrUndefined(h)&&h.length>0)for(i=0;i<f.length;i++){var v=this.getLabelContainer().FieldInfos.length>0?f[i].label:f[i].x,c=this.getColorForIndividualSection(v,h),y=this.getColumnValueFillColor(this,this.getBubbleScatterProperties().ColorCustomization.SolidColorInfo[0].BasedOn.UniqueColumnName,v);c.IsEdited||(c.Color=y);f[i].fill=c.Color===""?y:c.Color}}else for(t=0;t<e.length;t++)for(f=e[t].dataSource,i=0;i<f.length;i++)f[i].fill=null;n.refresh()},t.prototype.getColumnValueFillColor=function(n,t,i){var r=this.getColumnId(t,n.dataGroupInfo.FieldContainers);return n.designerInstance.modules.resource.getColumnValueColorCode(r,i.toString())},t.prototype.getColorForIndividualSection=function(n,t){for(var r=new DefaultColorSet,i=0;i<t.length;i++)if(t[i].Name.toString()===n.toString()&&t[i].IsEdited)return t[i];return r},t.prototype.getColorFieldInfo=function(n,t,i,r){var f,u,o,s,e;if(r===void 0&&(r=null),t&&!BoldBIDashboard.isNullOrUndefined(n)&&n.Type===ColorCustomizationType.Individual&&n.SolidColorInfo.length!==0){if(f=void 0,u=this.getDataGroupID(),u.length<n.SolidColorInfo.length){for(o=[],s=function(t){o.push(n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===u[t].UniqueColumnName})[0])},e=0;e<u.length;e++)s(e);n.SolidColorInfo=o}return f=n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===u[0].UniqueColumnName}).length>0?n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===u[0].UniqueColumnName})[0].DefaultColorSets:f,i.isExistingChart&&!BoldBIDashboard.isNullOrUndefined(r)&&i.updateColorPaletteName(f,r),f}},t.prototype.updateSeriesShapeInfos=function(n){var f=this.dataValues,t=this.getBubbleScatterProperties().ChartSeriesType,e=f.widgetData.length,s,i,o,r,u;if((this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design||BoldBIDashboard.isNullOrUndefined(t)||t.length===0)&&((BoldBIDashboard.isNullOrUndefined(t)||t.length!==e)&&(t=[]),!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0))for(s=function(n){var i=JSON.parse(f.widgetData[n]);t.filter(function(n){return n.Name===i.legendCaption&&n.UniqueColumnName===i.id}).length===0&&(t=[])},i=0;i<e;i++)s(i);if(BoldBIDashboard.isNullOrUndefined(t)||t.length===0)for(t=[],i=0;i<e;i++)o=JSON.parse(f.widgetData[i]),t.push({Name:o.legendCaption,Shape:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ChartSeriesShape,ChartSeriesShape.Circle),UniqueColumnName:o.id});if(this.getBubbleScatterProperties().ChartSeriesType=t,!BoldBIDashboard.isNullOrUndefined(n)){for(r=0;r<n.series.length;r++)for(u=0;u<t.length;u++)n.series[r].legendCaption===t[u].Name&&(n.series[r].marker.shape=t[u].Shape);n.refresh()}},t.prototype.renderSeriesShapeLabel=function(){this.openSeriesShapeSettings(this,"updateSeriesShape",this.getBubbleScatterProperties().ChartSeriesType)},t.prototype.getColumnId=function(n,t){for(var i,r=0;r<t.length;r++)if(t[r].FieldInfos.length>0&&(i=t[r].FieldInfos.filter(function(t){return t.UniqueColumnName===n}),i.length>0))return i[0].FieldActualType==="bbi-designer-dataset-datetime"?i[0].Id+"_"+i[0].DateTimeFormat:i[0].Id;return""},t.prototype.updateSeriesShape=function(n){var t,i,r;if(this.getBubbleScatterProperties().ChartSeriesType=n,t=ejdashboard.base.getComponent(this.bubbleScatterChartElement[0],"chart"),!BoldBIDashboard.isNullOrUndefined(t)){for(i=0;i<t.series.length;i++)for(r=0;r<n.length;r++)t.series[i].legendCaption===n[r].Name&&(t.series[i].marker.shape=n[r].Shape);t.refresh()}this.designerInstance.modules.serialization.notifyChange()},t.prototype.openSeriesShapeSettings=function(){this.renderSeriesShapeSettings();this.seriesShapeScrollElement.empty();this.customSeriesShapeSettingsDialog.data("BoldBIDashboardDialog").open();this.populateSeriesShapeInfo()},t.prototype.renderSeriesShapeSettings=function(){var t,n,i,r,u,f,e;this.customSeriesShapeSettingsDialog=BoldBIDashboard.buildTag("div.e-userselect","",{},{id:this.designerId+"_SeriesShape_settings"});t=BoldBIDashboard.buildTag("div","",{});n=BoldBIDashboard.buildTag("table","",{width:"100%"},{id:this.designerId+"_SeriesShape_settings_title"});this.initializeSeriesTypeTitle(n);i=BoldBIDashboard.buildTag("div","",{height:"256px",width:"100%"},{});n.append(i);this.seriesShapeContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{height:"255px",width:"100%",display:"block"},{id:this.designerId+"_SeriesShape_settings_container"});r=BoldBIDashboard.buildTag("div","",{});this.seriesShapeScrollElement=BoldBIDashboard.buildTag("div","",{height:"252px",width:"100%"},{id:this.designerId+"_SeriesShape_settings_elements"});u=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.dashboardDesigner.getLocalizationContent().dialogOptions.cancelButtonText,{float:"right"},{id:this.designerId+"_SeriesShape_settings_cancel"});f=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.dashboardDesigner.getLocalizationContent().dialogOptions.okButtonText,{float:"right"},{id:this.designerId+"_SeriesShape_settings_ok"});r.append(this.seriesShapeScrollElement);this.seriesShapeContainer.append(r);i.append(this.seriesShapeContainer);t.append(n);this.customSeriesShapeSettingsDialog.append(t);this.dashboardDesigner.element.append(this.customSeriesShapeSettingsDialog);this.customSeriesShapeSettingsDialog.BoldBIDashboardDialog({title:"Chart Series Shape Settings",width:400,minWidth:400,height:"auto",minHeight:320,enableResize:!1,containment:"#"+this.designerId,target:"#"+this.designerId,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"bbi-designer-dialog bbi-flat-mode boldbi-dashboarddesigner",close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),closeIconTooltip:this.dashboardDesigner.getLocalizationContent().dialogOptions.closeButtonText});e=this.dashboardDesigner.element.find("#"+this.designerId+"_SeriesShape_settings_foot");e.append(u).append(f);this.seriesShapeContainer.BoldBIDashboardScroller({height:"252px",scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,enableTouchScroll:!0,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize})},t.prototype.populateSeriesShapeInfo=function(){var i=BoldBIDashboard.buildTag("table","",{"border-collapse":"collapse",width:"100%","table-layout":"fixed"},{}),t=this.bubbleScatterChartObj.series,n,r;if(!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0)for(n=0;n<t.length;n++)r=t[n],this.renderRowElement(i,r,n,this.getBubbleScatterProperties().ChartSeriesType[n]);this.seriesShapeScrollElement.append(i);this.scrollerRefresh(this.seriesShapeContainer)},t.prototype.scrollerRefresh=function(n){n.data("BoldBIDashboardScroller")&&n.data("BoldBIDashboardScroller").refresh()},t.prototype.renderRowElement=function(n,t,i,r){var f=BoldBIDashboard.buildTag("tr","",{width:"100%",height:"50px"},{id:this.designerId+"_chart_label_row"+i}),h=BoldBIDashboard.buildTag("td.boldbi-dashboarddesigner-chart-shape-series-column bbi-designer-fontfamily","",{},{}),e=BoldBIDashboard.buildTag("span.e-chart-series-name",t.legendCaption,{},{uniquecolumnname:t.UniqueColumnName}),l=this.dashboardDesigner.measureText(t.FieldName,150,{size:"12",fontStyle:"Normal",fontFamily:"var(--designer-font)"}).width+1>150,o,u,s,c;l&&(e.addClass("bbi-dbrd-designer-hoverable"),e.attr({"data-tooltip":t.legendCaption}));h.append(e);f.append(h);o=BoldBIDashboard.buildTag("td.boldbi-dashboarddesigner-chart-valuelabel-charttype-column bbi-designer-fontfamily","",{},{});u=BoldBIDashboard.buildTag("input.e-chart-series-checkbox","",{},{id:this.designerId+"_chart_secondary_axis"+i});o.append(u);f.append(o);n.append(f);s=this.getDefaultDataSource();c=this.getIndexValueForGivenChartType(s,r.Shape);u.BoldBIDashboardDropDownList({dataSource:s,fields:{text:"text",value:"value"},selectedIndex:c,width:"172px",height:"26px",popupHeight:"120px",popupWidth:"172px",showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-border bbi-designer-ejwidgets bbi-dbrd-control",change:this.bbdesigner$.proxy(this.onChartTypeChange,u,r)})},t.prototype.getDefaultDataSource=function(){return[{text:"Circle",value:"Circle"},{text:"Rectangle",value:"Rectangle"},{text:"Triangle",value:"Triangle"},{text:"Diamond",value:"Diamond"}]},t.prototype.updateSeriesType=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),t=n.getSeriesShapeInfo(n.bubbleScatterChartObj.series);BoldBIDashboard.isNullOrUndefined(n)||(BoldBIDashboard.DashboardUtil.invokeMethod(n,"updateSeriesShape",[t]),n.customSeriesShapeSettingsDialog.data("BoldBIDashboardDialog").close())},t.prototype.onChartTypeChange=function(n,t){n.Shape=t.selectedValue},t.prototype.closeSeriesShapeSettings=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0]));n.customSeriesShapeSettingsDialog.data("BoldBIDashboardDialog").close()},t.prototype.getSeriesShapeInfo=function(n){var i=[],r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),t;if(!BoldBIDashboard.isNullOrUndefined(r.seriesShapeScrollElement))for(t=0;t<n.length;t++)i.push({Name:n[t].legendCaption,Shape:r.getBubbleScatterProperties().ChartSeriesType[t].Shape,UniqueColumnName:n[t].id});return i},t.prototype.getIndexValueForGivenChartType=function(n,t){for(var i=0,i=0;i<n.length;i++)if(n[i].value.toLowerCase()===t.toLowerCase())break;return i},t.prototype.initializeSeriesTypeTitle=function(n){var t=BoldBIDashboard.buildTag("table","",{"border-collapse":"collapse",width:"100%"},{}),i=BoldBIDashboard.buildTag("th.boldbi-dashboarddesigner-chart-valuelabel-title bbi-designer-fontfamily","Series Name",{},{}),r=BoldBIDashboard.buildTag("th.boldbi-dashboarddesigner-chart-valuelabel-charttype-column bbi-designer-fontfamily","Series Shape",{},{});t.append(i);t.append(r);n.append(t)},t.prototype.getColorFields=function(){return[{Name:WidgetProperty.FillColor,DisplayName:"Fill",ColorPicker:ColorSetColorPickers.NormalColorPicker}]},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.BubbleScatterChartItem",InternalBubbleScatterChartReportItem,window);BoldBIDashboard.DashboardDesignerUtility.BubbleScatterChartItem.prototype.initialize();BoldBIDashboardDesigner.bbdesignerstatic$.views.helpers({formatBubbleScatterChartTooltip:function(n,t,i,r,u){if(BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(t)||t.FieldActualType!=="bbi-designer-dataset-number")return n;var f=t.MeasureFormatting,e=i.checkAndUpdateParameterValue(u.getLabelParamValues(f.Prefix),r),o=i.checkAndUpdateParameterValue(u.getLabelParamValues(f.Suffix),r);return BoldBIDashboard.DashboardUtil.formattedText(Number(n),f.Culture,f.DecimalPoints,f.FormatType,f.DecimalSeparator,f.GroupSeparator,e,o,f.Unit,!0,i,f.EnableLakhsAndCroreRep)},formatBubbleScatterXFieldTooltip:function(n,t,i,r){if(BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(t)||t.FieldActualType!=="bbi-designer-dataset-number")return n;var u=t.MeasureFormatting,f=i.checkAndUpdateParameterValue(u.Prefix,r),e=i.checkAndUpdateParameterValue(u.Suffix,r);return BoldBIDashboard.DashboardUtil.formattedText(Number(n),u.Culture,u.DecimalPoints,u.FormatType,u.DecimalSeparator,u.GroupSeparator,f,e,u.Unit,!0,i,u.EnableLakhsAndCroreRep)},formatBubbleScatterYFieldTooltip:function(n,t,i,r){if(BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(t)||t.FieldActualType!=="bbi-designer-dataset-number")return n;var u=t.MeasureFormatting,f=i.checkAndUpdateParameterValue(u.Prefix,r),e=i.checkAndUpdateParameterValue(u.Suffix,r);return BoldBIDashboard.DashboardUtil.formattedText(n,u.Culture,u.DecimalPoints,u.FormatType,u.DecimalSeparator,u.GroupSeparator,f,e,u.Unit,!0,i,u.EnableLakhsAndCroreRep)},formatBubbleScatterSizeTooltip:function(n,t,i,r){if(BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(t)||t.FieldActualType!=="bbi-designer-dataset-number")return n;var u=t.MeasureFormatting,f=i.checkAndUpdateParameterValue(u.Prefix,r),e=i.checkAndUpdateParameterValue(u.Suffix,r);return BoldBIDashboard.DashboardUtil.formattedText(n,u.Culture,u.DecimalPoints,u.FormatType,u.DecimalSeparator,u.GroupSeparator,f,e,u.Unit,!0,i,u.EnableLakhsAndCroreRep)},formatBubbleScatterChartAdditionalTooltip:function(n,t,i){var r=t[i];return n[r.UniqueColumnName]},getBubbleScatterChartSeriesName:function(n,t){return t[n.UniqueColumnName]}});__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalCardReportItem=function(n){function t(t){var i=n.call(this,t,"Card","e-card-item")||this;return i.cardItem=null,i.cardElement=null,i.cardContent=null,i.isOpenReport=!1,i.isColorSupportForText=!1,i.setTimeoutCardSeriesArray=[],i.setTimeoutForResizeCard=[],i.titleValue=null,i.subTitleValue=null,i.columnBinding=[],i.dataValues=null,i.colorDataForExport=null,i.colorCustomization=null,i.colorFields=[],i.labelParameter=null,i.locale=null,i.bbdesigner$=i.designerInstance.bbdesigner$,i.widgetJson=new CardProperties(t),i.locale=t.getLocalizationContent(),i.getContainerSettings().ShowHeader=!1,i.colorFields=i.getColorFields(),i.designerId=i.designerInstance._id,i.propertyPanel=t.modules.propertyPanel,i.colorCustomization=i.designerInstance.modules.colorCustomization,i.labelParameter=t.modules.labelParameter,i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.deviation,GroupId:"eb520ddb-5d82-4bf8-858c-cabf3317229e",Items:[{id:"f48aed7c-c972-43c1-8668-a0c9b89c1899",widgetName:"Card",widgetDisplayName:n.itemPanel.widgetTitle.card,cssClass:"bbi-widgeticon bbi-designer-widget-card",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.CardItem",searchCategory:["card","deviation"],widgetconfiginfo:null,useIconTemplate:!1,hide:!0,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.card,description:n.itemPanel.widgetDescription.cardDesc,dataRequirement:n.itemPanel.widgetDataRequirements.cardDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.CardProperties",minColSpan:4,minRowSpan:3}]};BoldBIDashboardDesigner.widgetItems.push(t)},t.prototype.init=function(n,t){this.renderCardItem(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.cardItem)||this.updateCardSize()},t.prototype.update=function(n){this.updateCardData(n);this.IsRendered=!0},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej1.card.all.min.js",NameSpace:"BoldBIDashboard.Card"},DependentScripts:[]}},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,"BoldBIDashboard.Card")},t.prototype.getFieldContainer=function(){var n=[];return n.push(this.generateFieldContainer("ActualValue",this.locale.fieldContainer.actualValue,FieldContainerType.Numeric)),n.push(this.generateFieldContainer("TargetValue",this.locale.fieldContainer.targetValue,FieldContainerType.Numeric)),n.push(this.generateFieldContainer("Series",this.locale.fieldContainer.series,FieldContainerType.Non_Numeric)),n.push(this.generateFieldContainer("CustomValue",this.locale.fieldContainer.customValue,FieldContainerType.Numeric)),n.push(this.generateFieldContainer("Sparkline",this.locale.fieldContainer.sparkline,FieldContainerType.Non_Numeric)),n},t.prototype.onFieldSettingsClick=function(n,t){for(var i=0;i<t.length;i++)if(t[i].Name==="MeasureFormat"){t[i].IsDisable=this.isMeasureFormatDisable(n);break}return t},t.prototype.getPropertyPanelItems=function(){return this.getPropertyPanelForCard()},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateCardItemPropertyChange(n,t,i,r)},t.prototype.clearFilter=function(n){var t=this.controlContainer;t.find(".e-dbrd-selected-card").remove();t.find(".e-card-Selected").removeClass("e-card-Selected");BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this);this.widgetJson.SelectedFilterValues=[];this.designerInstance.modules.serialization.notifyChange();BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName)},t.prototype.getMobileViewHeight=function(){var n=this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor;return this.widgetJson.ContainerSettings.ShowHeader?3*n:2*n},t.prototype.refresh=function(){this.cardResize()},t.prototype.dispose=function(){this.cardItemDispose();n.prototype.dispose.call(this)},t.prototype.getDefaultMeasureFormat=function(){var n=new MeasureFormatting;return n.Unit=NumberFormat.Ones,n},t.prototype.updateDataGroupInfo=function(t,i){n.prototype.updateDataGroupInfo.call(this,t,i);this.updateReportItemDataGroupInfo(t,i)},t.prototype.canCombineRequest=function(){return!0},t.prototype.renderCardItem=function(t){try{this.renderCardElement();BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)),this.isOpenReport=!0,this.updateCornerRadius(this.widgetJson.ContainerSettings.CornerRadius),this.isOpenReport&&(this.updateLabelParameterValue(this.cardElement.find(".e-title")),this.updateLabelParameterValue(this.cardElement.find(".e-subtitle")),this.updateTitle(this.cardElement),this.updateSubTitle(this.cardElement)));this.getCardProperties().TitleSettings.Text=this.widgetJson.ContainerSettings.Title=this.bbdesigner$(this.cardElement).find(".e-title").html();!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Card)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.renderCardElement=function(){this.cardItem=BoldBIDashboard.buildTag("div.e-carditem e-dbrd-widget bbi-dbrd-control e-Card-Single","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder,overflow:"hidden"},{id:this.designerId+"cardItem"+this.widgetJson.UniqueName});this.cardElement=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%",position:"relative","font-size":this.getCardProperties().UniformSizing?this.contentContainer.height()/8+"px":"10pt","background-color":"white"},{id:this.designerId+"cardElement"+this.widgetJson.UniqueName});this.contentContainer.append(this.cardItem);this.controlContainer.data("widgetInstance",this);this.cardItem.append(this.cardElement);this.cardItem.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designerId+"_designer_waiting_popup bbi-designer-loader",template:this.designerInstance.getWaitingPopupTemplate()});this.cardElement.BoldBIDashboardCard({actualValue:{color:"#686262",name:"Actual",position:"right",value:"100"},targetValue:{color:"#686262",name:"Target",position:"right",value:"90"},size:{width:this.cardItem.width(),height:this.cardItem.height()},headers:{visible:this.getCardProperties().TitleSettings.Visibility},customHeader:{visible:!BoldBIDashboard.isNullOrUndefined(this.getCardProperties().TitleSettings.Text),color:BoldBIDashboard.isNullOrUndefined(this.getCardProperties().TitleSettings.Color)?"":this.getCardProperties().TitleSettings.Color,text:BoldBIDashboard.isNullOrUndefined(this.getCardProperties().TitleSettings.Text)?"":this.getCardProperties().TitleSettings.Text},subTitle:{visible:this.getCardProperties().SubTitleSettings.Visibility,color:BoldBIDashboard.isNullOrUndefined(this.getCardProperties().SubTitleSettings.Color)?"":this.getCardProperties().SubTitleSettings.Color,text:BoldBIDashboard.isNullOrUndefined(this.getCardProperties().SubTitleSettings.Text)?"":this.getCardProperties().SubTitleSettings.Text},uniformFontSize:this.getCardProperties().UniformSizing,customVisibility:{compactView:this.getCardProperties().EnableCompactView},primaryValue:{color:""},selected:this.bbdesigner$.proxy(this.cardItemSelected,this)});this.setPropertyElement("BasicSettings","TitleValue",this.widgetJson.ContainerSettings.Title)},t.prototype.updateCardSize=function(){this.contentContainer.find(".bbi-dbrd-control-error").length===1?this.widgetContainerHelper.showControlError(this,this.dataValues):this.refresh()},t.prototype.cardResize=function(){for(var t,i,n=this,r=0;r<this.setTimeoutForResizeCard.length;r++)clearTimeout(this.setTimeoutForResizeCard[r]);if(this.setTimeoutForResizeCard=[],this.cardItem.data("BoldBIDashboardScroller")&&this.cardItem.BoldBIDashboardScroller("destroy"),this.cardItem.css({width:"100%",height:"100%"}),t=null,BoldBIDashboard.isNullOrUndefined(this.cardContent))t=this.cardElement.data("BoldBIDashboardCard"),this.getCardProperties().UniformSizing&&(this.cardElement[0].style.fontSize=this.contentContainer.height()/8+"px"),t.model.size={width:this.cardItem.width(),height:this.cardItem.height()},t.redraw(),this.updateTitle(this.cardElement),this.updateSubTitle(this.cardElement),this.resizeSingleCardTitle(this.cardElement);else{this.showLoadingIndicator();this.cardContent.css({width:this.cardItem.width(),height:this.cardItem.height()});var u=this.getSizeForCard(this.cardContent.children().length),f=function(i){e.setTimeoutForResizeCard.push(setTimeout(function(){n.bbdesigner$(n.cardContent.children()[i]).hasClass("e-card")&&(n.cardContent.children()[i].style.fontSize=n.getCardProperties().UniformSizing?u.height/8+"px":"",t=n.bbdesigner$(n.cardContent.children()[i]).data("BoldBIDashboardCard"),t.model.size={width:u.width,height:u.height},t.redraw(),n.updateSubTitle(n.bbdesigner$(n.cardContent.children()[i])),n.bbdesigner$(n.cardContent.children()[i]).hasClass("e-card-Selected")&&n.updateSelectionContainer(n.bbdesigner$(n.cardContent.children()[i])),n.resizeSingleCardTitle(n.cardElement))},100))},e=this;for(i=0;i<this.cardContent.children().length;i++)f(i);setTimeout(function(){n.cardItem.BoldBIDashboardScroller({width:n.cardItem.width(),height:n.cardItem.height(),autoHide:!0,scrollerSize:n.designerInstance.scrollerSize.scrollSize,cssClass:"bbi-dbrd-designer-scroller bbi-dbrd-control"});n.hideLoadingIndicator()},100)}},t.prototype.updateCardData=function(n){var y=this,o,u,a,f,e,v,b,k,w;try{for(o=0;o<this.setTimeoutCardSeriesArray.length;o++)clearTimeout(this.setTimeoutCardSeriesArray[o]);this.setTimeoutCardSeriesArray=[];this.dataValues=n;BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this);this.cardItem.show();BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this);this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo);this.getContainerSettings().ShowHeader=!1;var p=this.DataGroupInfo.FieldContainers[0].FieldInfos.length,s=this.DataGroupInfo.FieldContainers[1].FieldInfos.length,h=this.DataGroupInfo.FieldContainers[2].FieldInfos.length,c=this.DataGroupInfo.FieldContainers[3].FieldInfos.length,l=this.DataGroupInfo.FieldContainers[4].FieldInfos.length,i=this.cardElement.data("BoldBIDashboardCard"),t=null,r=!1;if(this.updateCustomColorSettings(),r=!BoldBIDashboard.isNullOrUndefined(this.getCardProperties().ColorSets)&&this.getCardProperties().ColorSets.ColorSettingsList.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getCardProperties().ColorSets.ColorSettingsList[0].AdvancedColorSettings),this.cardItem.hasClass("e-Card-Single")||this.cardItem.addClass("e-Card-Single"),u={controlTitle:this.Name,controlId:this.Name,isControlMenuVisible:!1,isMaximizeEnable:!1,isFilterIconEnable:BoldBIDashboard.isNullOrUndefined(this.widgetJson.FilterSettings)?!1:this.widgetJson.FilterSettings.ActAsMasterWidget},r||(this.cardItem.data("BoldBIDashboardScroller")&&this.cardItem.BoldBIDashboardScroller("destroy"),BoldBIDashboard.isNullOrUndefined(this.controlHeader)||(this.controlHeader.remove(),this.controlSubHeader.remove(),this.controlHeader=this.controlSubHeader=null),BoldBIDashboard.isNullOrUndefined(i)||i.destroy(),this.cardElement.remove(),BoldBIDashboard.isNullOrUndefined(this.cardContent)||(this.cardContent.remove(),this.cardContent=null),this.setContainerHeight(10)),n.Error)BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.widgetContainerHelper.showControlError(this,n);else{if(n.noDataAvailable)this.cardItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this);else{if(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),n.data!=="[]"&&BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)){if(BoldBIDashboard.isNullOrUndefined(n.columnBindings)||(this.columnBinding=JSON.parse(n.columnBindings)),!BoldBIDashboard.isNullOrUndefined(n.data))for(t=JSON.parse(n.data),a=Object.keys(t[0]),f=0;f<t.length;f++)for(e=0;e<a.length;e++)t[f][a[e]]==="(Blanks)"&&(t[f][a[e]]=0);v=this.getColumns(t);n.widgetData[0].MeasureFormatting=this.applyCardMeasureFormatting(n.widgetData[0]);p>0&&s===0&&h===0&&c===0&&l===0?this.updateActualValue(i,v,t,n):s>0&&h===0&&l===0&&c===0?r?this.updateColorInfo(i,n,"targetValue",this.getCardProperties().ColorSets.ColorSettingsList,null,null,t):this.updateTargetValue(i,t,n,r,null):h>0?(BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos[0])&&BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[1].FieldInfos[0])?this.updateCardWithDefaultValue():r?this.updateColorInfo(i,n,"seriesValue",this.getCardProperties().ColorSets.ColorSettingsList,u,null,t):this.updateSeriesValue(u,t,i,n,r,null),this.propertyPanel.setTitle(this.widgetJson),this.propertyPanel.setSubTitle(this.widgetJson,this.widgetJson.ContainerSettings.SubTitle),b=this.bbdesigner$(this.controlContainer).find(".bbi-dbrd-control-title"),this.setLabelParameterId(b)):l>0?BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos[0])&&BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[1].FieldInfos[0])?this.updateCardWithDefaultValue():r?this.updateColorInfo(i,n,"sparkLine",this.getCardProperties().ColorSets.ColorSettingsList,u,null,t):this.updateSparkLineValue(u,t,i,n,r,null):c>0&&(p>0||s>0?r?this.updateColorInfo(i,n,"customValue",this.getCardProperties().ColorSets.ColorSettingsList,u,v,t):this.updateCustomValue(u,t,i,n,v,r,null):this.updateCardWithDefaultValue())}else(n.data==="[]"&&n.columnBindings==="{}"||!BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty)&&this.updateCardWithDefaultValue();this.updateContainerSettings();k=this.bbdesigner$(this.controlContainer).find(".bbi-dbrd-control-sub-title");this.setLabelParameterId(k)}this.updateActasMasterFilterProperty();this.cardItem.hasClass("e-Card-Single")&&this.cardItem.find(".e-card-series-element").length===0&&this.getCardProperties().SubTitleSettings.Text!==this.widgetJson.ContainerSettings.SubTitle&&(this.widgetJson.ContainerSettings.SubTitle=this.getCardProperties().SubTitleSettings.Text,this.propertyPanel.subHeaderInput.val(this.getCardProperties().SubTitleSettings.Text));this.designerInstance.modules.util.updateAction("Card","Link","Link");this.setPropertyElement("ColorSettings","ColorSettings",this.getCardProperties().ColorSets)}this.isOpenReport&&this.getCardProperties().SubTitleSettings.Visibility&&this.getCardProperties().SubTitleSettings.Text!==" "&&(this.updateSubHeading(this.getCardProperties().SubTitleSettings.Visibility),this.updateSubTitle(this.cardElement),this.updateTitle(this.cardElement));this.updatePropertyItems(p,s,h,l,c);this.isOpenReport=!1;r||setTimeout(function(){y.hideLoadingIndicator();y.controlContainer.find(".bbi-loader-background").remove();var n=y.cardItem.data("BoldBIDashboardScroller");BoldBIDashboard.isNullOrUndefined(n)||n.refresh()},100);this.resizeSingleCardTitle(this.cardElement)}catch(d){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:d,Type:d.name});w=this.cardItem.data("BoldBIDashboardWaitingPopup");!BoldBIDashboard.isNullOrUndefined(w)&&w.model.showOnInit&&this.hideLoadingIndicator()}},t.prototype.getPropertyPanelForCard=function(){var u=this,r=this.getBindedColumns(),t=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.widgetJson.FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo,this.widgetJson.ContainerSettings),i;return this.containerPropertyItem=t.containerProperties,t.propertyGridItems.Header=this.widgetJson.ContainerSettings.Title,t.propertyGridItems.SubTitle=this.widgetJson.ContainerSettings.SubTitle,t.propertyGridItems.Description=this.widgetJson.ContainerSettings.Description,t.propertyGridItems.Type="Card",t.linkingProperty.Items[0].value=n.prototype.useExistingLink.call(this),i=this.DataGroupInfo,this.bbdesigner$.each(t.containerSettingsProperty.Items,function(n,t){BoldBIDashboard.isNullOrUndefined(t.isVisible)||(t.isVisible=!1);(t.name==="ContainerTitleAlign"||t.name==="ContainerTitleColor")&&i.FieldContainers.length>2&&i.FieldContainers[2].FieldInfos.length!==0&&(t.isVisible=!0)}),this.bbdesigner$.each(t.containerActionsProperty.Items,function(n,t){BoldBIDashboard.isNullOrUndefined(t.isVisible)||(t.isVisible=!1);(t.name==="ShowMaximize"||t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ImageExport"||t.name==="PDFExport"||t.name==="ViewData")&&i.FieldContainers.length>2&&i.FieldContainers[2].FieldInfos.length!==0&&(t.isVisible=!0);i.FieldContainers.length>2&&i.FieldContainers[2].FieldInfos.length!==0&&((t.name==="CSVExport"||t.name==="ExcelExport")&&(t.isVisible=u.designerInstance.model.export.Excel),t.name==="ImageExport"&&(t.isVisible=u.designerInstance.model.export.Image),t.name==="PDFExport"&&(t.isVisible=u.designerInstance.model.export.Pdf));t.name==="ShowLinkIcon"&&(t.isVisible=!0)}),t.propertyGridItems.Items=[{CategoryName:"Basic Settings",Items:[{name:"ShowTitle",displayName:"Title",value:this.getCardProperties().TitleSettings.Visibility,itemType:"bool"},{name:"TitleValue",isDisable:this.getCardProperties().TitleSettings.Visibility?!1:!0,isVisible:this.DataGroupInfo.FieldContainers.length!==0?this.DataGroupInfo.FieldContainers[2].FieldInfos.length===0?!0:!1:!0,displayName:"",value:this.getCardProperties().TitleSettings.Text,itemType:"string"},{name:"TitleAlign",isVisible:this.getCardProperties().TitleSettings.Visibility?!0:!1,displayName:"Title Alignment",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.getCardProperties().TitleSettings.Alignment),itemType:"dropdown",valueList:["Left","Center","Right"]},{name:"TitleColor",isVisible:this.getCardProperties().TitleSettings.Visibility?!0:!1,displayName:"Title Color",value:this.getCardProperties().TitleSettings.Color,itemType:"color"},{name:"ShowSubHeading",isVisible:this.getCardProperties().TitleSettings.Visibility?!0:!1,displayName:"Subtitle",value:this.getCardProperties().SubTitleSettings.Visibility,itemType:"bool"},{name:"SubHeadingValue",isVisible:this.getCardProperties().TitleSettings.Visibility?!0:!1,isDisable:this.getCardProperties().SubTitleSettings.Visibility?!1:!0,displayName:"",value:this.getCardProperties().SubTitleSettings.Text,itemType:"string"},{name:"SubTitleColor",isVisible:this.getCardProperties().TitleSettings.Visibility?!0:!1,isDisable:this.getCardProperties().SubTitleSettings.Visibility?!1:!0,displayName:"Subtitle Foreground",value:this.getCardProperties().SubTitleSettings.Color,itemType:"color"},{name:"ValueAlign",displayName:"Value Alignment",isVisible:!1,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.getCardProperties().ValueAlignment),itemType:"dropdown",valueList:["Left","Center","Right"]},{name:"ActualValueColor",displayName:"Actual Value Foreground",value:this.getCardProperties().ActualValueForeground,itemType:"color"},{name:"SecondaryValueType",isDisable:this.DataGroupInfo.FieldContainers.length!==0?this.DataGroupInfo.FieldContainers[0].FieldInfos.length!==0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length!==0||this.DataGroupInfo.FieldContainers[0].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length===0?!1:!0:!1,displayName:"Secondary Value Type",value:this.getCardProperties().SecondaryValueType==="variance"||this.getCardProperties().SecondaryValueType==="Variation"?"Variation":"Target Value",itemType:"dropdown",valueList:["Variation","Target Value"]},{name:"ActualValuePrefix",displayName:"Actual Value Prefix",value:this.getCardProperties().ActualValuePrefix,itemType:"string"},{name:"TargetValuePrefix",isVisible:this.getCardProperties().SecondaryValueType==="target"?!0:!1,displayName:"Target Value Prefix",value:this.getCardProperties().TargetValuePrefix,itemType:"string"},]},t.linkingProperty,{CategoryName:"Behavior",IsVisible:this.DataGroupInfo.FieldContainers.length!==0?this.DataGroupInfo.FieldContainers[0].FieldInfos.length!==0||this.DataGroupInfo.FieldContainers[1].FieldInfos.length!==0?!0:!1:!0,Items:[{name:"HighValueGood",displayName:"High Value Is Good",value:this.getCardProperties().Direction,itemType:"bool",isVisible:this.DataGroupInfo.FieldContainers.length!==0?this.DataGroupInfo.FieldContainers[0].FieldInfos.length!==0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length!==0||this.DataGroupInfo.FieldContainers[0].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length===0||this.DataGroupInfo.FieldContainers[0].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length!==0?!0:!1:!0},{name:"ShowIndicator",displayName:"Show Indicator Only",value:this.getCardProperties().ShowIndicatorOnly,itemType:"bool",isVisible:this.DataGroupInfo.FieldContainers.length!==0?this.DataGroupInfo.FieldContainers[0].FieldInfos.length!==0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length!==0||this.DataGroupInfo.FieldContainers[0].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length===0||this.DataGroupInfo.FieldContainers[0].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length!==0?!0:!1:!0},{name:"PrimaryValueType",displayName:"Primary Value Type",value:this.getCardProperties().PrimaryValueType,itemType:"dropdown",valueList:["Absolute Difference","Percent of Difference","Percent of Target","Actual Value","Percent of Change"],isVisible:this.DataGroupInfo.FieldContainers.length!==0?this.DataGroupInfo.FieldContainers[0].FieldInfos.length!==0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length!==0||this.DataGroupInfo.FieldContainers[0].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length===0||this.DataGroupInfo.FieldContainers[0].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length!==0?!0:!1:!0},{name:"EnableCompactView",displayName:"Enable Compact View",value:this.getCardProperties().EnableCompactView,itemType:"bool",isVisible:!1},{name:"ShowPrimaryValue",displayName:"Primary Value",callbackInstance:this,callbackMethod:"renderShowValueProperties",elementType:"Card",itemType:"object",value:this.getCardProperties().ShowPrimaryValue,isVisible:this.DataGroupInfo.FieldContainers.length!==0?this.DataGroupInfo.FieldContainers[0].FieldInfos.length!==0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length!==0?!0:!1:!0},{name:"ShowActualValueVariation",displayName:"Actual Value/Variation %",callbackInstance:this,callbackMethod:"renderShowValueProperties",elementType:"Card",itemType:"object",isDisable:this.getCardProperties().ShowIndicatorOnly,value:this.getCardProperties().ShowActualValue,isVisible:this.DataGroupInfo.FieldContainers.length!==0?this.DataGroupInfo.FieldContainers[0].FieldInfos.length!==0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length!==0?!0:!1:!0},{name:"ShowSecondaryValue",displayName:"Secondary Value",isDisable:this.getCardProperties().ShowIndicatorOnly,callbackInstance:this,callbackMethod:"renderShowValueProperties",elementType:"Card",itemType:"object",value:this.getCardProperties().ShowSecondaryValue,isVisible:this.DataGroupInfo.FieldContainers.length!==0?this.DataGroupInfo.FieldContainers[0].FieldInfos.length!==0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length!==0?!0:!1:!0},{name:"Indicator",displayName:"Indicator",callbackInstance:this,callbackMethod:"renderShowValueProperties",elementType:"Card",itemType:"object",value:this.getCardProperties().ShowIndicator,isDisable:this.getCardProperties().ShowIndicatorOnly,isVisible:this.DataGroupInfo.FieldContainers.length!==0?this.DataGroupInfo.FieldContainers[0].FieldInfos.length!==0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length!==0?!0:!1:!0},{name:"EnableUniformSizing",displayName:"Enable Uniform Sizing",value:this.getCardProperties().UniformSizing,itemType:"bool"},]},{CategoryName:"Color Settings",IsVisible:!BoldBIDashboard.isNullOrUndefined(r.actualColumns)&&r.actualColumns.length>0&&!BoldBIDashboard.isNullOrUndefined(r.targetColumns)&&r.targetColumns.length>0,Items:[{name:"ColorSettings",callbackInstance:this,callbackMethod:"renderColorSettings",itemType:"object",elementType:"Card"},]},{CategoryName:"Sparkline",IsVisible:this.DataGroupInfo.FieldContainers.length!==0?this.DataGroupInfo.FieldContainers[4].FieldInfos.length!==0&&(this.DataGroupInfo.FieldContainers[0].FieldInfos.length!==0||this.DataGroupInfo.FieldContainers[1].FieldInfos.length!==0)?!0:!1:!1,Items:[{name:"SparklineType",displayName:"Sparkline Type",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SparkLineType,this.getCardProperties().SparklineSettings.Type),itemType:"dropdown",valueList:["Line","Area","Column"]},{name:"ShowMarker",displayName:"Show Marker",value:this.getCardProperties().SparklineSettings.ShowMarker,itemType:"bool"},{name:"LowValueColor",isDisable:!this.getCardProperties().SparklineSettings.ShowMarker,displayName:"Low Value Color",value:this.getCardProperties().SparklineSettings.LowValueColor,itemType:"color"},{name:"HighValueColor",displayName:"High Value Color",value:this.getCardProperties().SparklineSettings.HighValueColor,itemType:"color",isDisable:!this.getCardProperties().SparklineSettings.ShowMarker},{name:"Opacity",displayName:"Opacity",isDisable:!this.getCardProperties().SparklineSettings.ShowMarker,value:this.getCardProperties().SparklineSettings.Opacity,itemType:"float",decimalPlaces:1,minimum:0,maximum:1,interval:.1,unitType:"pt"}]},{CategoryName:"Alignment",Items:[{name:"PrimaryValueAlignment",displayName:"Primary Value",isDisable:this.isActualOnlyConfigured()||this.isTargetOnlyConfigured()?!0:this.getCardProperties().ShowIndicatorOnly,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.getCardProperties().PrimaryValueAlignment),itemType:"dropdown",valueList:["Left","Center","Right"]},{name:"ActualValueTextAlignment",displayName:"Actual Value/Variation %",isDisable:this.getCardProperties().ShowIndicatorOnly,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.getCardProperties().ValueAlignment),itemType:"dropdown",valueList:["Left","Center","Right"]},{name:"SecondaryValueAlignment",displayName:"Secondary Value",isDisable:this.isActualOnlyConfigured()||this.isTargetOnlyConfigured()?!0:this.getCardProperties().ShowIndicatorOnly,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.getCardProperties().SecondaryValueAlignment),itemType:"dropdown",valueList:["Left","Center","Right"]},{name:"AdditionalValueAlignment",displayName:"Custom Value",isDisable:this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[3].FieldInfos.length>0?this.getCardProperties().ShowIndicatorOnly:!0,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.getCardProperties().AdditionalValueAlignment),itemType:"dropdown",valueList:["Left","Center","Right"]},]},t.filterSettingsProperty,t.containerSettingsProperty,t.containerActionsProperty,t.noDataContainerActionsProperty],t.propertyGridItems},t.prototype.updateCardItemPropertyChange=function(t,i,r,u){var f=!1,e,o,h,s;switch(t){case"Name":r!==i&&(this.getCardProperties().HasCustomTitle=r!==""&&this.widgetJson.ContainerSettings.Title!==r);this.getCardProperties().TitleSettings.Text=this.widgetJson.ContainerSettings.Title=r;this.setPropertyElement("BasicSettings","TitleValue",this.widgetJson.ContainerSettings.Title);this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length!==0?this.propertyPanel.setTitle(this.widgetJson):this.updateTitleValue(r);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,r);break;case"HighValueGood":this.updateHighValueGood(r);break;case"ShowIndicator":r=BoldBIDashboard.isNullOrUndefined(r)?!1:r;this.updateShowIndicator(r);break;case"ShowTitle":this.updateShowTitle(r);break;case"TitleValue":this.updateTitleValue(r);break;case"TitleAlign":this.updateTitleAlign(r);break;case"TitleColor":this.updateTitleColor(r);break;case"ValueAlign":this.updateValueAlign(r);break;case"ActualValueColor":this.updateActualValueColor(r);break;case"SecondaryValueType":this.updateSecondaryValueType(r);break;case"ShowSubHeading":this.updateSubHeading(r);break;case"SubHeadingValue":this.updateSubHeadingValue(r);break;case"SubTitleColor":this.updateSubHeadingColor(r);break;case"PrimaryValueType":this.updatePrimaryValueType(r);break;case"ActualValuePrefix":this.updateActualValuePrefix(r);break;case"TargetValuePrefix":this.updateTargetValuePrefix(r);break;case"ItemLink":n.prototype.updateLink.call(this,r);this.updateCardUrlLink(r);break;case"SubTitle":this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length!==0?this.propertyPanel.setSubTitle(this.widgetJson,r):(this.getCardProperties().SubTitleSettings.Text=this.widgetJson.ContainerSettings.SubTitle=r,this.setPropertyElement("BasicSettings","SubHeadingValue",this.widgetJson.ContainerSettings.SubTitle),this.updateSubHeadingValue(r));break;case"SparklineType":case"HighValueColor":case"LowValueColor":case"ShowMarker":case"Opacity":this.updateSparkLine(t,r);break;case"EnableCompactView":case"EnableUniformSizing":case"ShowActualValueVariation":case"ShowSecondaryValue":case"ShowPrimaryValue":case"Indicator":this.updateCardBehaviorProperties(t,r);break;case"AdditionalValueAlignment":case"ActualValueTextAlignment":case"PrimaryValueAlignment":case"SecondaryValueAlignment":this.updateCardAlignmentProperties(t,r);break;case"ColorSet":f=!0;BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||(BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-card-item",this.designerId+"_"+this.widgetJson.UniqueName,[t,r,i,u],[t,i,r,u]),BoldBIDashboardDesigner.editManager.setMergeAction(!1));this.updateColorCustomInfo(r);this.designerInstance.modules.serialization.notifyChange();break;case"CornerRadius":f=!0;this.updateCornerRadius(r);break;case"ActAsMasterWidget":f=!0;!this.cardItem.hasClass("e-Card-Single")&&this.cardContent.length>0&&(r||this.widgetJson.UrlLink.EnableLink?this.cardContent.addClass("e-dbrd-master-widget"):this.cardContent.removeClass("e-dbrd-master-widget"));break;default:f=!0}if(!f){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(e=this.designPanelInstance.selectedReportItems,e.length>0))for(o=0;o<e.length;o++)h=e[o],h.attr("id")===this.controlContainer.attr("id")&&(s=this.bbdesigner$.extend(!0,{},u),s.categoryName=u.categoryName,s.valueList=u.valueList,this.propertyPanel.updatePropertyValue(s,"Card",r));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-card-item",this.designerId+"_"+this.widgetJson.UniqueName,[t,r,i,u],[t,i,r,u])}},t.prototype.cardItemDispose=function(){var n=null,t;if(BoldBIDashboard.isNullOrUndefined(this.cardContent))n=this.cardElement.data("BoldBIDashboardCard"),BoldBIDashboard.isNullOrUndefined(n)||n.destroy();else for(t=0;t<this.cardContent.children().length;t++)this.designerInstance.element.find("#"+this.designerId+"cardElement"+this.widgetJson.UniqueName+"_"+t+"_toolTip").remove(),n=this.bbdesigner$(this.cardContent.children()[t]).data("BoldBIDashboardCard"),BoldBIDashboard.isNullOrUndefined(n)||n.destroy();this.hideLoadingIndicator();this.designerInstance.element.find("#"+this.designerId+"cardElement"+this.widgetJson.UniqueName+"_toolTip").remove();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Card)},t.prototype.updateReportItemDataGroupInfo=function(){var n=this.getBindedColumns();!BoldBIDashboard.isNullOrUndefined(n.actualColumns)&&!BoldBIDashboard.isNullOrUndefined(n.rowColumns)&&n.actualColumns.length>0&&n.rowColumns.length>0&&BoldBIDashboard.isNullOrUndefined(n.rowColumns[0].CustomSorting)&&(n.rowColumns[0].CustomSorting={CustomSortType:CustomSortType[CustomSortType.Field],CustomSortOrder:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,SortingOrder.Descending),FieldName:n.actualColumns[0].Name,FieldId:n.actualColumns[0].Id,SummaryType:n.actualColumns[0].SummaryType})},t.prototype.getColorFields=function(){return[{Name:WidgetProperty.FillColor,DisplayName:"Font Color",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.BackgroundColor,DisplayName:"Fill Color",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.TitleColor,DisplayName:"Title",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.Icon,DisplayName:"Icon",ColorPicker:ColorSetColorPickers.IconColorPicker},]},t.prototype.renderColorSettings=function(n,t,i){var r={colorFields:this.colorFields,isBasicEnable:!1,isAdvanceEnable:!0,columns:this.getColorFieldListName(),widgetInstance:this,datasetId:this.DataGroupInfo.DataSourceID};this.colorCustomization.renderColorSettings(n,t,i,r)},t.prototype.getColorFieldListName=function(){for(var i,t=BoldBIDashboard.isNullOrUndefined(this.getCardProperties().ColorSets)?(new ColorSets).ColorSettingsList:this.getCardProperties().ColorSets.ColorSettingsList,r=[],u=[],f=[],n=0;n<t.length;n++)i=this.getFieldName(t[n].SelectedColumn.UniqueColumnName),i!==""&&(this.isColorSupportForText?this.isMeasure(t[n].SelectedColumn.UniqueColumnName)?u.push({DisplayName:i,UniqueColumnName:t[n].SelectedColumn.UniqueColumnName}):f.push({DisplayName:i,UniqueColumnName:t[n].SelectedColumn.UniqueColumnName}):r.push({DisplayName:i,UniqueColumnName:t[n].SelectedColumn.UniqueColumnName}));return{measureFields:u,dimensionFields:f,columns:r}},t.prototype.isMeasure=function(n){var u=this.DataGroupInfo,e=!1,i,t,f,o,r;if(!BoldBIDashboard.isNullOrUndefined(u.FieldContainers)&&u.FieldContainers.length>0)for(i=u.FieldContainers,t=0;t<i.length;t++)for(f=0;f<i[t].FieldInfos.length;f++)if(o=i[t].FieldInfos,r=o.filter(function(t){return t.UniqueColumnName===n}),!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0){e=r[0].FieldType===FieldType.Measures;break}return e},t.prototype.getFieldName=function(n){var f="",i,t,r,e,u;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length>0)for(i=this.DataGroupInfo.FieldContainers,t=0;t<i.length;t++)for(r=0;r<i[t].FieldInfos.length;r++)if(e=i[t].FieldInfos,u=e.filter(function(t){return t.UniqueColumnName===n}),!BoldBIDashboard.isNullOrUndefined(u)&&u.length>0){f=i[t].Name==="TargetValue"?"Primary Value":!1&&i[t].Name==="Series"?i[t].FieldInfos[0].Name:"";break}return f},t.prototype.renderShowValueProperties=function(n,t,i){this.propertyPanel.setObjectValues(n,i.categoryName,i,i.elementType)},t.prototype.isFieldValid=function(n,t,i){return!(t===FieldContainerType[FieldContainerType.Non_Numeric]&&i==="Series"&&n)},t.prototype.createCardElement=function(n,t){var i=Object.keys(t[0]),r=Object.keys(t[0]).map(function(n){return t[0][n]});return this.cardElement=BoldBIDashboard.buildTag("div.e-default-card-widget","",{"font-size":this.getCardProperties().UniformSizing?this.contentContainer.height()/8+"px":""},{id:this.designerId+"cardElement"+this.widgetJson.UniqueName}),this.cardItem.append(this.cardElement),this.cardElement.BoldBIDashboardCard({size:{width:this.cardItem.width(),height:this.cardElement.height()},selected:this.bbdesigner$.proxy(this.cardItemSelected,this)}),n=this.cardElement.data("BoldBIDashboardCard"),{key:i,Value:r,cardObj:n}},t.prototype.updateCustomColorSettings=function(){var u,t,o,f,s;BoldBIDashboard.isNullOrUndefined(this.getCardProperties().ColorSets)&&(this.getCardProperties().ColorSets=new ColorSets);var e=this.getBindedColumns(),r=[],n=e.targetColumns,i=e.rowColumns,h=e.actualColumns,c=function(t){if(n[t].FieldType===FieldType.Measures){var i=l.getCardProperties().ColorSets.ColorSettingsList.filter(function(i){return i.SelectedColumn.UniqueColumnName===n[t].UniqueColumnName})[0];h.length>0&&!BoldBIDashboard.isNullOrUndefined(i)&&!BoldBIDashboard.isNullOrUndefined(i.SelectedColumn)?(i.SelectedColumn.SummaryType!==n[t].SummaryType&&(i.SelectedColumn.SummaryType=n[t].SummaryType),r.push(i)):r.push({SelectedColumn:{UniqueColumnName:n[t].UniqueColumnName,Key:n[t].Id,SelectedColumnType:n[t].FieldType===FieldType.Measures?ColorColumnType.Measure:ColorColumnType.Dimension,SummaryType:n[t].SummaryType},DefaultSettings:null,AdvancedColorSettings:null})}},l=this;for(u=0;u<n.length;u++)c(u);if(this.isColorSupportForText)for(t=0;t<i.length;t++)i[t].FieldType!==FieldType.DateTime&&(o=[],f=this.getExistingColorSettings(i[t].UniqueColumnName),BoldBIDashboard.isNullOrUndefined(f)||BoldBIDashboard.isNullOrUndefined(f.SelectedColumn)?(s=JSON.stringify(o),r.push({SelectedColumn:{UniqueColumnName:i[t].UniqueColumnName,Key:i[t].Id,SelectedColumnType:i[t].FieldType===FieldType.Measures?ColorColumnType.Measure:ColorColumnType.Dimension,SummaryType:i[t].SummaryType},DefaultSettings:{DefaultColors:JSON.parse(s)},AdvancedColorSettings:null})):r.push(f));this.getCardProperties().ColorSets.ColorSettingsList=r;this.getCardProperties().ColorSets.IsMeasure=!0;this.getCardProperties().ColorSets.SelectedDatasource=this.DataGroupInfo.DataSourceName},t.prototype.getExistingColorSettings=function(n){for(var t=0;t<this.getCardProperties().ColorSets.ColorSettingsList.length;t++)if(this.getCardProperties().ColorSets.ColorSettingsList[t].SelectedColumn.UniqueColumnName===n)return this.getCardProperties().ColorSets.ColorSettingsList[t];return null},t.prototype.getSelectedValue=function(){for(var t=this.widgetJson.SelectedFilterValues,r=t.length,i="",n=0;n<r;n++)t[n].InitialDimensionFilter!==null&&t[n].InitialDimensionFilter.Text.length>0&&(i=t[n].InitialDimensionFilter.Text[0].toString()),t[n].InitialDateFilter!==null&&t[n].InitialDateFilter.DisplayDateFilterList.length>0&&(i=t[n].InitialDateFilter.DisplayDateFilterList[0]);return i},t.prototype.GenerateHeaderText=function(){var n="";return this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0?n=(this.DataGroupInfo.FieldContainers[0].FieldInfos[0].IsAggregatedExpression===!0?"AGG of ":this.GetAggregationText(this.DataGroupInfo.FieldContainers[0].FieldInfos[0].SummaryType))+this.DataGroupInfo.FieldContainers[0].FieldInfos[0].Name+" vs "+(this.DataGroupInfo.FieldContainers[1].FieldInfos[0].IsAggregatedExpression===!0?"AGG of ":this.GetAggregationText(this.DataGroupInfo.FieldContainers[1].FieldInfos[0].SummaryType))+this.DataGroupInfo.FieldContainers[1].FieldInfos[0].Name:this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0?n=(this.DataGroupInfo.FieldContainers[0].FieldInfos[0].IsAggregatedExpression===!0?"AGG of ":this.GetAggregationText(this.DataGroupInfo.FieldContainers[0].FieldInfos[0].SummaryType))+this.DataGroupInfo.FieldContainers[0].FieldInfos[0].Name:this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0?n=(this.DataGroupInfo.FieldContainers[1].FieldInfos[0].IsAggregatedExpression===!0?"AGG of ":this.GetAggregationText(this.DataGroupInfo.FieldContainers[1].FieldInfos[0].SummaryType))+this.DataGroupInfo.FieldContainers[1].FieldInfos[0].Name:this.DataGroupInfo.FieldContainers[0].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length===0&&(n="Actual vs Target"),n},t.prototype.GetAggregationText=function(n){switch(n){case SummaryType.SUM:return"Sum of ";case SummaryType.COUNT:return"Count of ";case SummaryType.AVG:return"Avg. ";case SummaryType.MAX:return"Max of ";case SummaryType.MIN:return"Min of ";case SummaryType.VAR:return"Variation of ";case SummaryType.COUNTD:return"Distinct Count of ";default:return" "}},t.prototype.updatePropertyItems=function(n,t,i,r,u){if(i!==0&&(n!==0||t!==0)?(this.propertyPanel.updateItemDisable("bool","Card","Filter","ActAsMasterWidget",!1),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ContainerTitleAlign",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ContainerTitleColor",!0),this.propertyPanel.updateItemVisibility("Card","ContainerActions","ShowMaximize",!0),this.propertyPanel.updateItemVisibility("Card","ContainerActions","CSVExport",!0),this.propertyPanel.updateItemVisibility("Card","ContainerActions","ExcelExport",!0),this.propertyPanel.updateItemVisibility("Card","ContainerActions","ImageExport",!0),this.propertyPanel.updateItemVisibility("Card","ContainerActions","PDFExport",!0),this.propertyPanel.refreshScroller()):i!==0&&n===0&&t===0&&(this.propertyPanel.updateItemDisable("bool","Card","Filter","ActAsMasterWidget",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ContainerTitleAlign",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ContainerTitleColor",!0),this.propertyPanel.updateItemVisibility("Card","ContainerActions","MaximizeView",!0),this.propertyPanel.updateItemVisibility("Card","ContainerActions","CSVExport",!0),this.propertyPanel.updateItemVisibility("Card","ContainerActions","ExcelExport",!0),this.propertyPanel.updateItemVisibility("Card","ContainerActions","ImageExport",!0),this.propertyPanel.updateItemVisibility("Card","ContainerActions","PDFExport",!0),this.propertyPanel.refreshScroller()),i===0&&(this.propertyPanel.updateItemDisable("bool","Card","Filter","ActAsMasterWidget",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ContainerTitleAlign",!1),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ContainerTitleColor",!1),this.propertyPanel.updateItemVisibility("Card","ContainerActions","ShowMaximize",!1),this.propertyPanel.updateItemVisibility("Card","ContainerActions","CSVExport",!1),this.propertyPanel.updateItemVisibility("Card","ContainerActions","ExcelExport",!1),this.propertyPanel.updateItemVisibility("Card","ContainerActions","ImageExport",!1),this.propertyPanel.updateItemVisibility("Card","ContainerActions","PDFExport",!1),this.propertyPanel.refreshScroller()),n!==0||t!==0){var f=n!==0&&t!==0||n===0&&t===0&&i===0||n===0&&t===0&&i!==0?!0:!1;this.propertyPanel.updateCategoryVisibility("Card","Behavior",!0);this.propertyPanel.updateItemVisibility("Card","Behavior","HighValueGood",f);this.propertyPanel.updateItemVisibility("Card","Behavior","ShowIndicator",f);this.propertyPanel.updateItemVisibility("Card","Behavior","PrimaryValueType",f);this.propertyPanel.updateItemVisibility("Card","Behavior","EnableUniformSizing",!0);this.propertyPanel.updateItemVisibility("Card","Behavior","ShowActualValueVariation",t!==0?!0:!1);this.propertyPanel.updateItemVisibility("Card","Behavior","ShowSecondaryValue",t!==0?!0:!1);this.propertyPanel.updateItemVisibility("Card","Behavior","ShowPrimaryValue",t!==0?!0:!1);this.propertyPanel.updateItemVisibility("Card","Behavior","Indicator",t!==0?!0:!1)}else this.propertyPanel.updateCategoryVisibility("Card","Behavior",!1);u===0||this.getCardProperties().ShowIndicatorOnly?this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","AdditionalValueAlignment",!0):this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","AdditionalValueAlignment",!1);n!==0&&t!==0||n===0&&t===0&&i===0?this.propertyPanel.updateItemDisable("dropdown","Card","BasicSettings","SecondaryValueType",!1):this.propertyPanel.updateItemDisable("dropdown","Card","BasicSettings","SecondaryValueType",!0);n!==0&&t!==0?this.propertyPanel.updateCategoryVisibility("Card","ColorSettings",!0):this.propertyPanel.updateCategoryVisibility("Card","ColorSettings",!1);(n!==0||t!==0)&&r!==0?this.propertyPanel.updateCategoryVisibility("Card","Sparkline",!0):this.propertyPanel.updateCategoryVisibility("Card","Sparkline",!1);this.getCardProperties().ShowIndicatorOnly?(this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowActualValueVariation",!0),this.propertyPanel.updateItemDisable("bool","Card","Behavior","Indicator",!0),this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowSecondaryValue",!0)):(this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowActualValueVariation",!1),this.propertyPanel.updateItemDisable("bool","Card","Behavior","Indicator",!1),this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowSecondaryValue",!1));this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","PrimaryValueAlignment",n>0&&t===0||n===0&&t>0);this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","SecondaryValueAlignment",n>0&&t===0||n===0&&t>0)},t.prototype.getColumns=function(n){for(var i=Object.keys(n[0]),r=[],t=0;t<i.length;t++)r.push({id:i[t],text:i[t]});return r},t.prototype.getSizeForCard=function(n){var u=this.bbdesigner$(this.cardItem).width(),r=this.bbdesigner$(this.cardItem).height(),h=this.DataGroupInfo.FieldContainers[2].FieldInfos.length,i=h>0?n:1,o,t,f,e,s;if(i===1)return{height:r-r*.0249,width:u-u*.016};o=116;t=Math.floor(u/i)<1?1:Math.floor((u-50)/o);i<t&&(t=i);s=Math.ceil(i/t);t=Math.round(u/i);(t>15||t<3)&&(t=10);t>i&&(t=i);do{if(e=u/t-20,f=e*.6,s=Math.ceil(i/t),t<=1){t=1;break}if(e>=o&&(r-f*s)*(100/r)<=45)break;t-=1}while(e<o||(r-f*s)*(100/r)>45);return i===1&&(e=u/t-20,f=r,f>r&&(f=r)),{height:f,width:e}},t.prototype.getProperties=function(n){var i=this.getCardProperties().TitleSettings.Text,t;n.model.customHeader.visible=this.getCardProperties().TitleSettings.Visibility;this.getCardProperties().HasCustomTitle&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length===0?n.model.customHeader.text=this.labelParameter.getResultantParameterString(this.getCardProperties().TitleSettings.Text,this.widgetJson.Data.Id):this.DataGroupInfo.FieldContainers[2].FieldInfos.length===0&&(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos)&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[1].FieldInfos)&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0?i=n.model.actualValue.name+" vs "+n.model.targetValue.name:!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos)&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0||!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[1].FieldInfos)&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0?i=this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0?n.model.actualValue.name:this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0?n.model.targetValue.name:"":BoldBIDashboard.isNullOrUndefined(this.getCardProperties().TitleSettings.Text)&&this.getCardProperties().TitleSettings.Text==="Actual vs Target"&&(i=this.getCardProperties().TitleSettings.Text),n.model.customHeader.text=this.labelParameter.getResultantParameterString(i,this.widgetJson.Data.Id));n.model.customHeader.color=this.getCardProperties().TitleSettings.Color;n.model.headers.visible=this.getCardProperties().TitleSettings.Visibility;n.model.headers.headerPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.getCardProperties().TitleSettings.Alignment);n.model.subTitle.visible=this.getCardProperties().SubTitleSettings.Visibility;this.getCardProperties().SubTitleSettings.Text!==""&&this.getCardProperties().SubTitleSettings.Text!=="Actual vs Target"&&(n.model.subTitle.text=this.isOpenReport&&this.getCardProperties().SubTitleSettings.Visibility?this.getCardProperties().SubTitleSettings.Text:this.labelParameter.getResultantParameterString(this.getCardProperties().SubTitleSettings.Text,this.widgetJson.Data.Id));n.model.subTitle.color=this.getCardProperties().SubTitleSettings.Color;n.model.actualValue.position=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.getCardProperties().ValueAlignment).toString().toLocaleLowerCase();n.model.actualValue.color=this.getCardProperties().ActualValueForeground;n.model.additionalValue.position=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.getCardProperties().AdditionalValueAlignment).toString().toLocaleLowerCase();n.model.primaryValuePosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.getCardProperties().PrimaryValueAlignment).toString().toLocaleLowerCase();n.model.secondaryValuePosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.getCardProperties().SecondaryValueAlignment).toString().toLocaleLowerCase();t=this.getCardProperties().PrimaryValueType.toLowerCase();t=t.replace(/[^A-Z0-9]/ig,"");t==="absolutedifference"&&(t="absolute");n.model.valueRepresentation.variationType=t;BoldBIDashboard.isNullOrUndefined(n.model.additionalValueRepresentation)||(n.model.additionalValueRepresentation.variationType=t);n.model.uniformFontSize=this.getCardProperties().UniformSizing;n.model.customVisibility.compactView=this.getCardProperties().EnableCompactView;n.model.customVisibility.actualValue=this.getCardProperties().ShowActualValue;n.model.customVisibility.secondaryValue=this.getCardProperties().ShowSecondaryValue;n.model.customVisibility.indicator=this.getCardProperties().ShowIndicator;n.model.customVisibility.primaryValue=this.getCardProperties().ShowPrimaryValue;n.model.secondaryValueType=this.getCardProperties().SecondaryValueType==="Variation"||this.getCardProperties().SecondaryValueType==="variance"?"variance":"target";n.model.higherValueGood=this.getCardProperties().Direction;n.model.showIndicatorOnly=this.getCardProperties().ShowIndicatorOnly;n.model.actualValue.customText=this.getCardProperties().ActualValuePrefix;n.model.targetValue.customText=this.getCardProperties().TargetValuePrefix},t.prototype.showLoadingIndicator=function(){this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer)},t.prototype.hideLoadingIndicator=function(){this.designerInstance.modules.util.hideLoadingIndicator(this.controlContainer)},t.prototype.performLinkingOperation=function(n){var i=this.getLinkingData(n),t;i.isEnabled&&(t=new UrlLinkingWidgetInfo,t={widgetId:BoldBIDashboard.isNullOrUndefined(this.widgetJson)?"":this.widgetJson.UniqueId,widgetName:BoldBIDashboard.isNullOrUndefined(this.widgetJson)?"":this.widgetJson.ContainerSettings.Title},this.designerInstance.modules.util.loadNavigation(i,t))},t.prototype.getLinkingData=function(n){var e=this,t={isEnabled:!1,parameterDetails:[],url:"",urlLinkInfo:[]},u,r,i,f;if(!BoldBIDashboard.isNullOrUndefined(this.widgetJson)&&(u=this.getSourceDataCard(!1),this.widgetJson.UrlLink.EnableLink&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.UrlLink.GridUrlType)&&this.widgetJson.UrlLink.GridUrlType.toString()===UrlLinkType[UrlLinkType.Row]&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.UrlLink.UrlPath)&&this.widgetJson.UrlLink.UrlPath!==""))for(r=u.filter(function(n){return e.widgetJson.UrlLink.PassingParameters.indexOf(n.Value)!==-1}),t.url=this.widgetJson.UrlLink.UrlPath,t.isEnabled=!0,i=0;i<r.length;i++)f=this.getItemValue(r[i].Category,n),t.parameterDetails.push({parameter:r[i].Value,value:f});return t.urlLinkInfo=this.widgetJson.UrlLink,t},t.prototype.getItemValue=function(n,t){var i;return!BoldBIDashboard.isNullOrUndefined(t.model)&&t.model[n]&&(i=t.model[n].value),i},t.prototype.getSourceDataCard=function(n){var s=[],f,r,t,i,u;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length>0)for(f=this.DataGroupInfo.FieldContainers,r=0;r<f.length;r++)if(!n||f[r].Name.toLowerCase()!=="hiddencolumn")for(t=0;t<f[r].FieldInfos.length;t++)if(i=f[r].FieldInfos,u=this.DataGroupInfo.FieldContainers[r],!this.isDuplicate(s,i[t].Name)&&(!n||i[t].FieldType===FieldType.Dimensions)){var h=i[t].SummaryType,c=i[t].DateTimeFormat,e=c!==DateTimeFormat[DateTimeFormat.None]?c:h!==SummaryType[SummaryType.NONE]?h:"",l=i[t].Name+(e!==""?"("+e+")":""),a=e+(e.length>1?"(":"")+i[t].Name+(e.length>1?")":""),o=u.Name;u.Name==="Series"?o="customHeader":u.Name==="ActualValue"?o="actualValue":u.Name==="TargetValue"?o="targetValue":u.Name==="CustomValue"&&(o="additionalValue");s.push({Category:o,Name:l,Value:a,Id:i[t].UniqueColumnName,FieldName:i[t].Name})}return s},t.prototype.isDuplicate=function(n,t){for(var i=0;i<n.length;i++)if(n[i].Name===t)return!0;return!1},t.prototype.processFilterInfo=function(t){var u;if(this.DataGroupInfo.FieldContainers[2].FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.isNullOrUndefined(t.currentTarget)){if(this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;this.widgetJson.SelectedFilterValues=[];var i=this.bbdesigner$(t.currentTarget),f=[],o=[],s=[],r=i.parents(".e-carditem").find(".e-card-Selected"),e=this.DataGroupInfo.FieldContainers;for(u=0;u<e.length;u++)if(e[u].Name==="Series"){f=e[u].FieldInfos[0];s[f.UniqueColumnName]=i.attr("data-value");o.push(f);break}r.length>0?(r.removeClass("e-card-Selected"),i.parents(".e-carditem").find(".e-dbrd-selected-card").remove(),i[0].id!==r[0].id&&i.addClass("e-card-Selected"),r=i.parents(".e-carditem").find(".e-card-Selected")):(i.addClass("e-card-Selected"),r=i.parents(".e-carditem").find(".e-card-Selected"));n.prototype.performInteraction.call(this,this,o,s)}},t.prototype.applyCardMeasureFormatting=function(n){var t=null;return BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(n.MeasureFormatting)||(t={Culture:n.MeasureFormatting.Culture,DecimalPoints:n.MeasureFormatting.DecimalPoints,FormatType:isNaN(parseInt(n.MeasureFormatting.FormatType,10))?n.MeasureFormatting.FormatType:BoldBIDashboard.DashboardDesignerUtility.Serialization.getDataValueFormat(n.MeasureFormatting.FormatType).toLowerCase(),DecimalSeparator:n.MeasureFormatting.DecimalSeparator,GroupSeparator:n.MeasureFormatting.GroupSeparator,Prefix:n.MeasureFormatting.Prefix,Suffix:n.MeasureFormatting.Suffix,Unit:isNaN(parseInt(n.MeasureFormatting.Unit,10))?n.MeasureFormatting.Unit:BoldBIDashboard.DashboardDesignerUtility.Serialization.getNumberFormat(n.MeasureFormatting.Unit).toLowerCase()}),t},t.prototype.updateHighValueGood=function(n){var t,i;if(this.getCardProperties().Direction=n,t=[],BoldBIDashboard.isNullOrUndefined(this.cardContent))t=this.cardElement.data("BoldBIDashboardCard"),this.updateCardProperty("higherValueGood",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=this.bbdesigner$(this.cardContent.children()[i]).data("BoldBIDashboardCard"),this.updateCardProperty("higherValueGood",t,n)},t.prototype.updateShowIndicator=function(n){var t,i;if(this.getCardProperties().ShowIndicatorOnly=n,this.getCardProperties().ShowIndicatorOnly?(this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowActualValueVariation",!0),this.propertyPanel.updateItemDisable("bool","Card","Behavior","Indicator",!0),this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowSecondaryValue",!0),this.propertyPanel.updateItemOpacity("bool","Card","Behavior","ShowActualValueVariation",!0),this.propertyPanel.updateItemOpacity("bool","Card","Behavior","Indicator",!0),this.propertyPanel.updateItemOpacity("bool","Card","Behavior","ShowSecondaryValue",!0),this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","AdditionalValueAlignment",!0),this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","SecondaryValueAlignment",!0),this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","ActualValueTextAlignment",!0),this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","PrimaryValueAlignment",!0)):(this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowActualValueVariation",!1),this.propertyPanel.updateItemDisable("bool","Card","Behavior","Indicator",!1),this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowSecondaryValue",!1),this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowPrimaryValue",!1),this.propertyPanel.updateItemOpacity("bool","Card","Behavior","ShowActualValueVariation",!1),this.propertyPanel.updateItemOpacity("bool","Card","Behavior","ShowSecondaryValue",!1),this.propertyPanel.updateItemOpacity("bool","Card","Behavior","Indicator",!1),this.propertyPanel.updateItemOpacity("bool","Card","Behavior","ShowPrimaryValue",!1),this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","AdditionalValueAlignment",!1),this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","SecondaryValueAlignment",!1),this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","ActualValueTextAlignment",!1),this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","PrimaryValueAlignment",!1)),t=[],BoldBIDashboard.isNullOrUndefined(this.cardContent))t=this.cardElement.data("BoldBIDashboardCard"),this.updateCardProperty("showIndicatorOnly",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=this.bbdesigner$(this.cardContent.children()[i]).data("BoldBIDashboardCard"),this.updateCardProperty("showIndicatorOnly",t,n)},t.prototype.updateShowTitle=function(n){var t=[],i;if(this.getCardProperties().TitleSettings.Visibility=n,this.getCardProperties().HasCustomTitle=!n&&this.getCardProperties().HasCustomTitle,BoldBIDashboard.isNullOrUndefined(this.cardContent))t=this.cardElement.data("BoldBIDashboardCard"),this.getCardProperties().TitleSettings.Visibility?(t.model.headers={visible:!0},this.getCardProperties().TitleSettings.Text===""&&BoldBIDashboard.isNullOrUndefined(this.titleValue)?(t.model.customHeader.visible=!0,t.model.customHeader.text="Actual vs Target"):this.getCardProperties().TitleSettings.Text===""?(t.model.customHeader.visible=!0,t.model.customHeader.text=this.titleValue):(t.model.customHeader.visible=!0,t.model.customHeader.text=this.labelParameter.getResultantParameterString(this.getCardProperties().TitleSettings.Text,this.widgetJson.Data.Id)),t.redraw(),this.propertyPanel.updateItemDisable("string","Card","BasicSettings","TitleValue",!n)):(t.model.headers.visible=!1,t.model.customHeader.visible=!1,t.redraw(),this.propertyPanel.updateItemDisable("string","Card","BasicSettings","TitleValue",!n));else for(this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleValue",!1),i=0;i<this.cardContent.children().length;i++)t=this.bbdesigner$(this.cardContent.children()[i]).data("BoldBIDashboardCard"),t.model.headers.visible=n,t.model.customHeader.visible=n,t.redraw();this.getCardProperties().TitleSettings.Visibility?(this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleAlign",n),this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleColor",n),this.propertyPanel.updateItemVisibility("Card","BasicSettings","ShowSubHeading",n),this.propertyPanel.updateItemVisibility("Card","BasicSettings","SubHeadingValue",n),this.propertyPanel.updateItemVisibility("Card","BasicSettings","SubTitleColor",n),this.propertyPanel.refreshScroller()):(this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleAlign",n),this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleColor",n),this.propertyPanel.updateItemVisibility("Card","BasicSettings","ShowSubHeading",n),this.propertyPanel.updateItemVisibility("Card","BasicSettings","SubHeadingValue",n),this.propertyPanel.updateItemVisibility("Card","BasicSettings","SubTitleColor",n),this.propertyPanel.refreshScroller())},t.prototype.updateTitleValue=function(n){var t=this.cardElement.data("BoldBIDashboardCard");BoldBIDashboard.isNullOrUndefined(t)||(n===""?(t.model.customHeader.visible=!0,this.getCardProperties().HasCustomTitle=!1,this.DataGroupInfo.FieldContainers.length>0?this.DataGroupInfo.FieldContainers[2].FieldInfos.length===0&&(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos)&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[1].FieldInfos)&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0?t.model.customHeader.text=this.widgetJson.ContainerSettings.Title=this.getCardProperties().TitleSettings.Text=t.model.actualValue.name+" vs "+t.model.targetValue.name:!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos)&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0?t.model.customHeader.text=this.widgetJson.ContainerSettings.Title=this.getCardProperties().TitleSettings.Text=t.model.actualValue.name:!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[1].FieldInfos)&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0?t.model.customHeader.text=this.widgetJson.ContainerSettings.Title=this.getCardProperties().TitleSettings.Text=t.model.targetValue.name:BoldBIDashboard.isNullOrUndefined(this.getCardProperties().TitleSettings.Text)&&this.getCardProperties().TitleSettings.Text==="Actual vs Target"&&(t.model.customHeader.text=this.getCardProperties().TitleSettings.Text)):this.getCardProperties().ContainerSettings.Title=this.getCardProperties().TitleSettings.Text=t.model.customHeader.text="Actual vs Target",this.setPropertyElement("BasicSettings","TitleValue",this.getCardProperties().TitleSettings.Text),t.redraw()):this.getCardProperties().TitleSettings.Text!==n&&(this.getCardProperties().HasCustomTitle=!0,this.getCardProperties().ContainerSettings.Title=this.getCardProperties().TitleSettings.Text=n),this.getCardProperties().TitleSettings.Visibility&&n!==""&&(t.model.customHeader.visible=!0,t.model.customHeader.text=this.labelParameter.getResultantParameterString(n,this.widgetJson.Data.Id),t.redraw()),!BoldBIDashboard.isNullOrUndefined(this.propertyPanel.headerInput)&&this.designPanelInstance.selectedReportItems.length>0&&this.Name===this.designPanelInstance.selectedReportItems[0].attr("name")&&this.propertyPanel.headerInput.val(this.widgetJson.ContainerSettings.Title));!BoldBIDashboard.isNullOrUndefined(this.cardContent)},t.prototype.updateTitleAlign=function(n){var t=[],r,i;if(this.getCardProperties().TitleSettings.Alignment=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(TextAlignment,n),BoldBIDashboard.isNullOrUndefined(this.cardContent))t=this.cardElement.data("BoldBIDashboardCard"),this.updateCardProperty("headers.headerPosition",t,n);else for(r=this.cardContent.children(),i=0;i<r.length;i++)t=r.eq(i).data("BoldBIDashboardCard"),BoldBIDashboard.isNullOrUndefined(t)||this.updateCardProperty("headers.headerPosition",t,n)},t.prototype.updateTitleColor=function(n){var t,i;if(this.getCardProperties().TitleSettings.Color=n,t=[],BoldBIDashboard.isNullOrUndefined(this.cardContent))t=this.cardElement.data("BoldBIDashboardCard"),this.updateCardProperty("customHeader.color",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=this.bbdesigner$(this.cardContent.children()[i]).data("BoldBIDashboardCard"),this.updateCardProperty("customHeader.color",t,n)},t.prototype.updateValueAlign=function(n){var t,i;if(this.getCardProperties().ValueAlignment=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(TextAlignment,n),t=[],BoldBIDashboard.isNullOrUndefined(this.cardContent))t=this.cardElement.data("BoldBIDashboardCard"),this.updateCardProperty("actualValue.position",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=this.bbdesigner$(this.cardContent.children()[i]).data("BoldBIDashboardCard"),this.updateCardProperty("actualValue.position",t,n)},t.prototype.updateActualValueColor=function(n){var r,t,i;if(this.getCardProperties().ActualValueForeground=n,r=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.getCardProperties().ValueAlignment),t=[],BoldBIDashboard.isNullOrUndefined(this.cardContent))t=this.cardElement.data("BoldBIDashboardCard"),t.model.actualValue.position=r.toLocaleLowerCase(),t.model.actualValue.color=n,t.redraw();else for(i=0;i<this.cardContent.children().length;i++)t=this.bbdesigner$(this.cardContent.children()[i]).data("BoldBIDashboardCard"),t.model.actualValue.position=r.toLocaleLowerCase(),t.model.actualValue.color=n,t.redraw()},t.prototype.updateSecondaryValueType=function(n){var t=[],i;if(n==="Variation"?(n="variance",this.propertyPanel.updateItemVisibility("Card","BasicSettings","TargetValuePrefix",!1)):(n="target",this.propertyPanel.updateItemVisibility("Card","BasicSettings","TargetValuePrefix",!0)),this.getCardProperties().SecondaryValueType=n,BoldBIDashboard.isNullOrUndefined(this.cardContent))t=this.cardElement.data("BoldBIDashboardCard"),this.updateCardProperty("secondaryValueType",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=this.bbdesigner$(this.cardContent.children()[i]).data("BoldBIDashboardCard"),this.updateCardProperty("secondaryValueType",t,n)},t.prototype.updateSubHeading=function(n){var t,i;if(this.getCardProperties().SubTitleSettings.Visibility=n,t=[],this.getCardProperties().SubTitleSettings.Visibility){if(BoldBIDashboard.isNullOrUndefined(this.cardContent))t=this.cardElement.data("BoldBIDashboardCard"),t.model.subTitle.visible=n,t.model.subTitle.text=BoldBIDashboard.isNullOrUndefined(this.getCardProperties().SubTitleSettings.Text)?this.getCardProperties().SubTitleSettings.Text:this.labelParameter.getResultantParameterString(this.getCardProperties().SubTitleSettings.Text,this.widgetJson.Data.Id),t.model.subTitle.color=this.getCardProperties().SubTitleSettings.Color,t.redraw();else for(i=0;i<this.cardContent.children().length;i++)t=this.bbdesigner$(this.cardContent.children()[i]).data("BoldBIDashboardCard"),t.model.subTitle.visible=n,t.model.subTitle.text=BoldBIDashboard.isNullOrUndefined(this.getCardProperties().SubTitleSettings.Text)?this.getCardProperties().SubTitleSettings.Text:this.labelParameter.getResultantParameterString(this.getCardProperties().SubTitleSettings.Text,this.widgetJson.Data.Id),t.model.subTitle.color=this.getCardProperties().SubTitleSettings.Color,t.redraw();this.propertyPanel.updateItemDisable("string","Card","BasicSettings","SubHeadingValue",!n);this.propertyPanel.updateItemDisable("color","Card","BasicSettings","SubTitleColor",!n)}else{if(BoldBIDashboard.isNullOrUndefined(this.cardContent))t=this.cardElement.data("BoldBIDashboardCard"),this.updateCardProperty("subTitle.visible",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=this.bbdesigner$(this.cardContent.children()[i]).data("BoldBIDashboardCard"),this.updateCardProperty("subTitle.visible",t,n);this.propertyPanel.updateItemDisable("string","Card","BasicSettings","SubHeadingValue",!n);this.propertyPanel.updateItemDisable("color","Card","BasicSettings","SubTitleColor",!n)}},t.prototype.updateSubHeadingValue=function(n){var t,i;if(this.getCardProperties().SubTitleSettings.Text=n,t=[],BoldBIDashboard.isNullOrUndefined(this.cardContent))t=this.cardElement.data("BoldBIDashboardCard"),t.model.subTitle.text=this.getCardProperties().SubTitleSettings.Visibility?this.labelParameter.getResultantParameterString(n,this.widgetJson.Data.Id):n,t.model.subTitle.visible=this.getCardProperties().SubTitleSettings.Visibility,t.redraw(),!BoldBIDashboard.isNullOrUndefined(this.propertyPanel.subHeaderInput)&&this.designPanelInstance.selectedReportItems.length>0&&this.Name===this.designPanelInstance.selectedReportItems[0].attr("name")&&this.propertyPanel.subHeaderInput.val(this.getCardProperties().SubTitleSettings.Text);else for(i=0;i<this.cardContent.children().length;i++)t=this.bbdesigner$(this.cardContent.children()[i]).data("BoldBIDashboardCard"),t.model.subTitle.visible=this.getCardProperties().SubTitleSettings.Visibility,t.model.subTitle.text=this.getCardProperties().SubTitleSettings.Visibility?this.labelParameter.getResultantParameterString(n,this.widgetJson.Data.Id):n,t.redraw();this.subTitleValue=n},t.prototype.updatePrimaryValueType=function(n){var t,r,i;if(this.getCardProperties().PrimaryValueType=n,t=[],r=!BoldBIDashboard.isNullOrUndefined(this.getCardProperties().ColorSets)&&this.getCardProperties().ColorSets.ColorSettingsList.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getCardProperties().ColorSets.ColorSettingsList[0].AdvancedColorSettings),BoldBIDashboard.isNullOrUndefined(this.cardContent)){t=this.cardElement.data("BoldBIDashboardCard");switch(n){case PrimaryValueType.AbsoluteDifference:t.model.valueRepresentation.variationType="absolute";break;case PrimaryValueType.PercentOfDifference:t.model.valueRepresentation.variationType="percentofdifference";break;case PrimaryValueType.PercentOfTarget:t.model.valueRepresentation.variationType="percentoftarget";break;case PrimaryValueType.ActualValue:t.model.valueRepresentation.variationType="actualvalue";break;case PrimaryValueType.PercentOfChange:t.model.valueRepresentation.variationType="percentofchange"}r||t.redraw()}else for(i=0;i<this.cardContent.children().length;i++){t=this.bbdesigner$(this.cardContent.children()[i]).data("BoldBIDashboardCard");switch(n){case PrimaryValueType.AbsoluteDifference:t.model.valueRepresentation.variationType="absolute";break;case PrimaryValueType.PercentOfDifference:t.model.valueRepresentation.variationType="percentofdifference";break;case PrimaryValueType.PercentOfTarget:t.model.valueRepresentation.variationType="percentoftarget";break;case PrimaryValueType.ActualValue:t.model.valueRepresentation.variationType="actualvalue";break;case PrimaryValueType.PercentOfChange:t.model.valueRepresentation.variationType="percentofchange"}r||t.redraw()}this.updateColorCustomInfo(this.getCardProperties().ColorSets.ColorSettingsList)},t.prototype.updateSubHeadingColor=function(n){var t,i;if(this.getCardProperties().SubTitleSettings.Color=n,t=[],BoldBIDashboard.isNullOrUndefined(this.cardContent))t=this.cardElement.data("BoldBIDashboardCard"),this.updateCardProperty("subTitle.color",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=this.bbdesigner$(this.cardContent.children()[i]).data("BoldBIDashboardCard"),this.updateCardProperty("subTitle.color",t,n)},t.prototype.updateActualValuePrefix=function(n){var t,i;if(this.getCardProperties().ActualValuePrefix=n,t=[],BoldBIDashboard.isNullOrUndefined(this.cardContent))t=this.cardElement.data("BoldBIDashboardCard"),this.updateCardProperty("actualValue.customText",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=this.bbdesigner$(this.cardContent.children()[i]).data("BoldBIDashboardCard"),this.updateCardProperty("actualValue.customText",t,n)},t.prototype.updateTargetValuePrefix=function(n){var t,i;if(this.getCardProperties().TargetValuePrefix=n,t=[],BoldBIDashboard.isNullOrUndefined(this.cardContent))t=this.cardElement.data("BoldBIDashboardCard"),this.updateCardProperty("targetValue.customText",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=this.bbdesigner$(this.cardContent.children()[i]).data("BoldBIDashboardCard"),this.updateCardProperty("targetValue.customText",t,n)},t.prototype.updateCardProperty=function(n,t,i){var u,r,f;if(t){for(u=t.model,r=n.split("."),f=0;f<r.length-1;f++)u=u[r[f]];u[r[r.length-1]]=i;t.redraw()}},t.prototype.updateCardUrlLink=function(n){!this.cardItem.hasClass("e-Card-Single")&&this.cardContent.length>0&&(this.widgetJson.FilterSettings.ActAsMasterWidget||n.EnableLink?this.cardContent.addClass("e-dbrd-master-widget"):this.cardContent.removeClass("e-dbrd-master-widget"))},t.prototype.updateSparkLine=function(n,t){switch(n){case"SparklineType":this.getCardProperties().SparklineSettings.Type=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(SparkLineType,t);this.renderCardAfterChangingProperties("sparkLine.Type",t);break;case"HighValueColor":this.getCardProperties().SparklineSettings.HighValueColor=t;this.renderCardAfterChangingProperties("sparkLine.HighValueColor",t);break;case"LowValueColor":this.getCardProperties().SparklineSettings.LowValueColor=t;this.renderCardAfterChangingProperties("sparkLine.LowValueColor",t);break;case"Opacity":this.getCardProperties().SparklineSettings.Opacity=t;this.renderCardAfterChangingProperties("sparkLine.Opacity",t);break;case"ShowMarker":this.getCardProperties().SparklineSettings.ShowMarker=t;this.getCardProperties().SparklineSettings.ShowMarker?(this.propertyPanel.updateItemDisable("color","Card","Sparkline","LowValueColor",!1),this.propertyPanel.updateItemDisable("color","Card","Sparkline","HighValueColor",!1),this.propertyPanel.updateItemDisable("float","Card","Sparkline","Opacity",!1)):(this.propertyPanel.updateItemDisable("color","Card","Sparkline","LowValueColor",!0),this.propertyPanel.updateItemDisable("color","Card","Sparkline","HighValueColor",!0),this.propertyPanel.updateItemDisable("float","Card","Sparkline","Opacity",!0));this.renderCardAfterChangingProperties("sparkLine.ShowMarker",t)}},t.prototype.updateCardBehaviorProperties=function(n,t){switch(n){case"EnableCompactView":this.getCardProperties().EnableCompactView=t;this.renderCardAfterChangingProperties("customVisibility.compactView",t);break;case"EnableUniformSizing":if(this.getCardProperties().UniformSizing=t,t)if(BoldBIDashboard.isNullOrUndefined(this.cardContent))this.cardElement[0].style.fontSize=this.contentContainer.height()/8+"px";else for(var i=0;i<this.cardContent.children().length;i++)this.cardContent.children()[i].style.fontSize=this.bbdesigner$(this.cardContent.children()[i]).height()/8+"px";this.renderCardAfterChangingProperties("uniformFontSize",t);break;case"ShowActualValueVariation":this.getCardProperties().ShowActualValue=t;this.renderCardAfterChangingProperties("customVisibility.actualValue",t);this.getCardProperties().ShowIndicatorOnly?this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowActualValueVariation",!0):this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowActualValueVariation",!1);break;case"Indicator":this.getCardProperties().ShowIndicator=t;this.renderCardAfterChangingProperties("customVisibility.indicator",t);this.getCardProperties().ShowIndicatorOnly?this.propertyPanel.updateItemDisable("bool","Card","Behavior","Indicator",!0):this.propertyPanel.updateItemDisable("bool","Card","Behavior","Indicator",!1);break;case"ShowSecondaryValue":this.getCardProperties().ShowSecondaryValue=t;this.renderCardAfterChangingProperties("customVisibility.secondaryValue",t);this.getCardProperties().ShowIndicatorOnly?this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowSecondaryValue",!0):this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowSecondaryValue",!1);break;case"ShowPrimaryValue":this.getCardProperties().ShowPrimaryValue=t;this.renderCardAfterChangingProperties("customVisibility.primaryValue",t)}},t.prototype.updateCardAlignmentProperties=function(n,t){switch(n){case"AdditionalValueAlignment":this.getCardProperties().AdditionalValueAlignment=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(TextAlignment,t);this.renderCardAfterChangingProperties("additionalValue.position",t.toString().toLocaleLowerCase());break;case"ActualValueTextAlignment":this.getCardProperties().ValueAlignment=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(TextAlignment,t);this.renderCardAfterChangingProperties("actualValue.position",t.toString().toLocaleLowerCase());break;case"PrimaryValueAlignment":this.getCardProperties().PrimaryValueAlignment=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(TextAlignment,t);this.renderCardAfterChangingProperties("primaryValuePosition",t.toString().toLocaleLowerCase());break;case"SecondaryValueAlignment":this.getCardProperties().SecondaryValueAlignment=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(TextAlignment,t);this.renderCardAfterChangingProperties("secondaryValuePosition",t.toString().toLocaleLowerCase())}},t.prototype.renderCardAfterChangingProperties=function(n,t){var i=[],r;if(BoldBIDashboard.isNullOrUndefined(this.cardContent))i=this.cardElement.data("BoldBIDashboardCard"),this.updateCardProperty(n,i,t);else for(r=0;r<this.cardContent.children().length;r++)i=this.bbdesigner$(this.cardContent.children()[r]).data("BoldBIDashboardCard"),this.updateCardProperty(n,i,t)},t.prototype.updateColorCustomInfo=function(n){var t;if(!BoldBIDashboard.isNullOrUndefined(this.getCardProperties().ColorSets.ColorSettingsList[0].AdvancedColorSettings)&&BoldBIDashboard.isNullOrUndefined(n[0].AdvancedColorSettings)&&this.resetToDefaultColors(),this.getCardProperties().ColorSets.ColorSettingsList=n,t=0,BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[1].FieldInfos)||(t=this.DataGroupInfo.FieldContainers[1].FieldInfos.length),t>0&&!BoldBIDashboard.isNullOrUndefined(n[0].AdvancedColorSettings)){this.showLoadingIndicator();var i=this.DataGroupInfo,u=BoldBIDashboard.isNullOrUndefined(this.dataConfigurationInstance)?[]:this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(i,this),f=this.getWidgetInfo(i),r=this.masterFilterWindowInstance.getSelectedValuesForWidgetRequest();this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.getcolorparameter,{action:"fetchData",data:JSON.stringify({designerAction:"fetchData",fieldInfo:u,dataset:i.DataSourceID,request:AjaxRequest.Widget.toString(),valuetype:this.getCardProperties().PrimaryValueType,colorSet:this.getCardProperties().ColorSets,controlType:this.Type,widgetInfo:f,widgetName:this.widgetJson.UniqueName,selectedValuesList:BoldBIDashboard.isNullOrUndefined(r)?"":JSON.stringify(r)})},{fnction:this.bbdesigner$.proxy(this.bindData,this)})}},t.prototype.bindData=function(n){var f=this,t,r,e,u,i;if(this.updateAndGetColorData(n,!1),t=JSON.parse(n["data"]),r=JSON.parse(n["icon"]),BoldBIDashboard.isNullOrUndefined(this.cardContent))this.applySeriesCardSettings(this.cardElement,0,t,r),this.cardElement.data("BoldBIDashboardCard").redraw();else for(e=function(n){var i=u.bbdesigner$(u.cardContent.children()[n]);setTimeout(function(){f.applySeriesCardSettings(i,n,t,r);i.data("BoldBIDashboardCard").redraw()},100)},u=this,i=0;i<t.length;i++)e(i);setTimeout(function(){f.hideLoadingIndicator()},100)},t.prototype.resetToDefaultColors=function(){var u=this,r,t,n,i;if(this.showLoadingIndicator(),BoldBIDashboard.isNullOrUndefined(this.cardContent))i=this.cardElement.data("BoldBIDashboardCard"),this.resetCardObject(i),i.redraw();else for(r=function(n){var i=t.bbdesigner$(t.cardContent.children()[n]).data("BoldBIDashboardCard");setTimeout(function(){u.resetCardObject(i);i.redraw()},100)},t=this,n=0;n<this.cardContent.children().length;n++)r(n);this.hideLoadingIndicator()},t.prototype.resetCardObject=function(n){n.model.primaryValue.color="";n.model.background.color="#ffffff";n.model.customHeader.color=this.getCardProperties().TitleSettings.Color;n.model.icon.path=""},t.prototype.updateActasMasterFilterProperty=function(){if(this.widgetJson.FilterSettings.ActAsMasterWidget=this.canUseWidgetAsMaster()?this.widgetJson.FilterSettings.ActAsMasterWidget:!1,this.propertyPanel.isVisible()){var n={name:"ActAsMasterWidget",value:this.widgetJson.FilterSettings.ActAsMasterWidget};this.propertyPanel.setBoolean(null,null,"Filter",n,"Card")}this.propertyPanel.updateItemVisibility("Card","Filter","ActAsMasterWidget",this.canUseWidgetAsMaster())},t.prototype.canUseWidgetAsMaster=function(){return!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)&&this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[2].Name==="Series"&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length>0&&(this.DataGroupInfo.FieldContainers[0].Name==="ActualValue"&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0||this.DataGroupInfo.FieldContainers[1].Name==="TargetValue"&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0)},t.prototype.updateContainerSettings=function(){var n=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.widgetJson.ContainerSettings.TextAlignment),t=this.containerPropertyItem.getContainerTitleAlignmentValue(n);this.controlContainer.find(".bbi-dbrd-control-title").css({"text-align":n});this.controlContainer.find(".bbi-dbrd-control-title").css({color:this.widgetJson.ContainerSettings.TextColor});BoldBIDashboard.isNullOrUndefined(this.controlHeader)||this.controlHeader.find(".bbi-dbrd-control-title-wrapper").css({"justify-content":t});BoldBIDashboard.isNullOrUndefined(this.controlSubHeader)||this.controlSubHeader.find(".bbi-dbrd-control-sub-title").css({"justify-content":t})},t.prototype.isActualOnlyConfigured=function(){var n=this.getBindedColumns(),t=BoldBIDashboard.isNullOrUndefined(n.actualColumns)?null:n.actualColumns.length,i=BoldBIDashboard.isNullOrUndefined(n.targetColumns)?null:n.targetColumns.length;return t>0&&i===0},t.prototype.isTargetOnlyConfigured=function(){var n=this.getBindedColumns(),t=BoldBIDashboard.isNullOrUndefined(n.actualColumns)?null:n.actualColumns.length,i=BoldBIDashboard.isNullOrUndefined(n.targetColumns)?null:n.targetColumns.length;return t===0&&i>0},t.prototype.getBindedColumns=function(){var i,r,u,n,t;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers))for(n=0;n<this.DataGroupInfo.FieldContainers.length;n++)t=this.getFieldContainer(),this.DataGroupInfo.FieldContainers[n].Name===t[0].Name?i=this.DataGroupInfo.FieldContainers[n].FieldInfos:this.DataGroupInfo.FieldContainers[n].Name===t[1].Name?r=this.DataGroupInfo.FieldContainers[n].FieldInfos:this.DataGroupInfo.FieldContainers[n].Name===t[2].Name&&(u=this.DataGroupInfo.FieldContainers[n].FieldInfos);return{actualColumns:i,targetColumns:r,rowColumns:u}},t.prototype.updateActualValue=function(n,t,i,r){this.cardElement=BoldBIDashboard.buildTag("div.e-default-card-widget","",{"font-size":this.getCardProperties().UniformSizing?this.contentContainer.height()/8+"px":""},{id:this.designerId+"cardElement"+this.widgetJson.UniqueName});this.cardItem.append(this.cardElement);this.cardElement.BoldBIDashboardCard({size:{width:this.cardElement.width(),height:this.cardElement.height()},primaryValue:{color:""},selected:this.bbdesigner$.proxy(this.cardItemSelected,this)});n=this.cardElement.data("BoldBIDashboardCard");n.model.actualValue={name:this.columnBinding[t[0].id],value:Object.keys(i[0]).map(function(n){return i[0][n]}).toString()};this.updateMeasureFormatting(n,r);this.getProperties(n);n.redraw();this.updateSubTitle(this.cardElement);this.setTitleForCardElement();this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleValue",!0);this.setTitleForCardJson();this.setPropertyElement("BasicSettings","TitleValue",this.getCardProperties().TitleSettings.Text);!BoldBIDashboard.isNullOrUndefined(this.propertyPanel.headerInput)&&this.designPanelInstance.selectedReportItems.length>0&&this.Name===this.designPanelInstance.selectedReportItems[0].attr("name")&&this.propertyPanel.headerInput.val(this.widgetJson.ContainerSettings.Title)},t.prototype.updateColorInfo=function(n,t,i,r,u,f,e){var h=!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.dashboardFromData)&&this.designerInstance.model.dashboardFromData.loadFromData;if(h)this.updateAndGetColorData(null,!0),this.updateCardWithColor(i,u,n,t,f,e,this.colorDataForExport);else{this.controlContainer.attr({"data-prevent-loading-indicator":!0});this.controlContainer.find(".bbi-background-waiting-popup").is(":visible")||this.showLoadingIndicator();var o=this.DataGroupInfo,c=BoldBIDashboard.isNullOrUndefined(this.dataConfigurationInstance)?[]:this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(o,this),l=this.getWidgetInfo(o),s=this.masterFilterWindowInstance.getSelectedValuesForWidgetRequest();this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.getcolorparameter,{action:"fetchData",data:JSON.stringify({designerAction:"fetchData",fieldInfo:c,dataset:o.DataSourceID,request:AjaxRequest.Widget.toString(),valuetype:this.getCardProperties().PrimaryValueType,colorSet:this.getCardProperties().ColorSets,controlType:this.Type,widgetInfo:l,widgetName:this.widgetJson.UniqueName,selectedValuesList:BoldBIDashboard.isNullOrUndefined(s)?"":JSON.stringify(s)})},{fnction:this.bbdesigner$.proxy(this.updateCardWithColor,this,i,u,n,t,f,e)})}},t.prototype.updateCardWithColor=function(n,t,i,r,u,f,e){var o=this,s=!0,a=this.bbdesigner$(this.controlContainer).find(".bbi-dbrd-control-header"),v=this.bbdesigner$(this.controlContainer).find(".bbi-dbrd-control-sub-header"),l,h,c;this.cardItem.data("BoldBIDashboardScroller")&&this.cardItem.BoldBIDashboardScroller("destroy");this.bbdesigner$(a).remove();this.bbdesigner$(v).remove();BoldBIDashboard.isNullOrUndefined(i)||i.destroy();this.cardElement.remove();BoldBIDashboard.isNullOrUndefined(this.cardContent)||(this.cardContent.remove(),this.cardContent=null);l=!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.dashboardFromData)&&this.designerInstance.model.dashboardFromData.loadFromData;l||this.updateAndGetColorData(e,!1);this.setContainerHeight(10);switch(n){case"seriesValue":this.updateSeriesValue(t,f,i,r,s,e);break;case"sparkLine":this.updateSparkLineValue(t,f,i,r,s,e);break;case"customValue":this.updateCustomValue(t,f,i,r,u,s,e);break;default:this.updateTargetValue(i,f,r,s,e)}this.resizeSingleCardTitle(this.cardElement);h=this.bbdesigner$(this.controlContainer).find(".bbi-dbrd-control-title");this.setLabelParameterId(h);c=this.bbdesigner$(this.controlContainer).find(".bbi-dbrd-control-sub-title");this.setLabelParameterId(c);this.labelParameter.resetTooltipForLabelParameters(h);this.labelParameter.resetTooltipForLabelParameters(c);setTimeout(function(){o.controlContainer.removeAttr("data-prevent-loading-indicator");o.controlContainer.find(".bbi-loader-background").remove();o.hideLoadingIndicator();var n=o.cardItem.data("BoldBIDashboardScroller");BoldBIDashboard.isNullOrUndefined(n)||n.refresh()},100)},t.prototype.updateAndGetColorData=function(n,t){for(var r,i=0;i<this.designerInstance.modules.widgetCache.length;i++)r=this.designerInstance.modules.widgetCache[i].Name,r===this.Name&&(t?this.colorDataForExport=typeof this.designerInstance.modules.widgetCache[i].colorCustomizeData=="string"?JSON.parse(this.designerInstance.modules.widgetCache[i].colorCustomizeData):this.designerInstance.modules.widgetCache[i].colorCustomizeData:this.designerInstance.modules.widgetCache[i].colorCustomizeData=JSON.stringify(n))},t.prototype.updateTargetValue=function(n,t,i,r,u){var s=[],h=[],c,l,f;r&&(c="data",l="icon",s=JSON.parse(u[l]),h=JSON.parse(u[c]));var o=this.createCardElement(n,t),e=o.key,a=o.Value;for(n=o.cardObj,f=0;f<e.length;f++)BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos[0])||e[f]!==this.DataGroupInfo.FieldContainers[0].FieldInfos[0].UniqueColumnName||(n.model.actualValue={name:this.columnBinding[e[f]],value:a[f].toString()}),BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[1].FieldInfos[0])||e[f]!==this.DataGroupInfo.FieldContainers[1].FieldInfos[0].UniqueColumnName||(n.model.targetValue={name:this.columnBinding[e[f]],value:a[f].toString()});this.updateMeasureFormatting(n,i);this.getProperties(n);r&&this.applySeriesCardSettings(this.cardElement,0,h,s);n.redraw();this.updateSubTitle(this.cardElement);this.setTitleForCardElement();this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleValue",!0);this.setTitleForCardJson();this.setPropertyElement("BasicSettings","TitleValue",this.getCardProperties().TitleSettings.Text);!BoldBIDashboard.isNullOrUndefined(this.propertyPanel.headerInput)&&this.designPanelInstance.selectedReportItems.length>0&&this.Name===this.designPanelInstance.selectedReportItems[0].attr("name")&&this.propertyPanel.headerInput.val(this.widgetJson.ContainerSettings.Title)},t.prototype.updateSeriesValue=function(n,t,i,r,u,f){var e=this,v,l,y,p,b,k,h,c,d,g,a;this.getContainerSettings().ShowHeader=!0;n.controlTitle=this.widgetJson.ContainerSettings.Title;BoldBIDashboard.Dashboard.WidgetContainerHelper.getControlHeader(n,this,this.designerInstance);BoldBIDashboard.Dashboard.WidgetContainerHelper.getControlSubHeader(this);var o=[],s=[],w="";for(this.cardItem.hasClass("e-Card-Single")&&this.cardItem.removeClass("e-Card-Single"),v=this.controlHeader.outerHeight(!0),!BoldBIDashboard.isNullOrUndefined(this.widgetJson.ContainerSettings.SubTitle)&&this.widgetJson.ContainerSettings.SubTitle.trim().length>0?(v+=this.controlSubHeader.outerHeight(!0),this.controlSubHeader.css("display","block")):this.controlSubHeader.css("display","none"),l=this.cardItem.parents(".bbi-dbrd-control-container").find(".bbi-dbrd-control-header"),this.widgetJson.FilterSettings.ActAsMasterWidget&&l.length!==0&&(l.find(".bbi-dbrd-controlIcon-container").css("display","block"),l.find(".bbi-remove-control-filter").css("display","block")),y=[],p=[],u&&(b="data",k="icon",y=JSON.parse(f[k]),p=JSON.parse(f[b])),this.contentContainer.css({height:this.getContainerSettings().ShowHeader?"calc(100% - "+v+"px)":"100%"}),h=this.getSizeForCard(t.length),this.cardContent=BoldBIDashboard.buildTag("div.cardContent","",{width:"100%",height:"100%",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"}),this.cardItem.append(this.cardContent),(this.widgetJson.FilterSettings.ActAsMasterWidget||this.widgetJson.UrlLink.EnableLink)&&this.cardContent.addClass("e-dbrd-master-widget"),c="",this.widgetJson.FilterSettings.ActAsMasterWidget&&this.widgetJson.SelectedFilterValues.length>0&&(c=this.getSelectedValue()),t.length===1?this.controlContainer.addClass("e-series-single"):this.controlContainer.removeClass("e-series-single"),this.controlContainer.attr({"data-prevent-loading-indicator":!0}),d=function(n){g.setTimeoutCardSeriesArray.push(setTimeout(function(){var l,f;for(o=Object.keys(t[n]),s=Object.keys(t[n]).map(function(i){return t[n][i]}),e.DataGroupInfo.FieldContainers[2].FieldInfos.length!==0&&(w=e.DataGroupInfo.FieldContainers[2].FieldInfos[0].UniqueColumnName),e.cardElement=BoldBIDashboard.buildTag("div.e-card-series-element","",{width:h.width,height:h.height,"font-size":e.getCardProperties().UniformSizing?h.height/8+"px":""},{id:e.designerId+"cardElement"+e.widgetJson.UniqueName+"_"+n,"data-value":t[n][w]}),e.cardContent.append(e.cardElement),e.cardElement.BoldBIDashboardCard({size:{width:h.width,height:h.height},primaryValue:{color:""},selected:e.bbdesigner$.proxy(e.cardItemSelected,e)}),i=e.cardElement.data("BoldBIDashboardCard"),l=null,f=0;f<o.length;f++)BoldBIDashboard.isNullOrUndefined(e.DataGroupInfo.FieldContainers[0].FieldInfos[0])||o[f]!==e.DataGroupInfo.FieldContainers[0].FieldInfos[0].UniqueColumnName||(i.model.actualValue={name:e.columnBinding[o[f]],value:s[f].toString()}),BoldBIDashboard.isNullOrUndefined(e.DataGroupInfo.FieldContainers[1].FieldInfos[0])||o[f]!==e.DataGroupInfo.FieldContainers[1].FieldInfos[0].UniqueColumnName||(i.model.targetValue={name:e.columnBinding[o[f]],value:s[f].toString()}),o[f]===e.DataGroupInfo.FieldContainers[2].FieldInfos[0].UniqueColumnName&&(i.model.customHeader={visible:"true",text:BoldBIDashboard.isNullOrUndefined(s[f])?e.locale.dataconfiguration.menuItems.nulldata:s[f],value:s[f]}),BoldBIDashboard.isNullOrUndefined(e.DataGroupInfo.FieldContainers[3].FieldInfos[0])||o[f]!==e.DataGroupInfo.FieldContainers[3].FieldInfos[0].UniqueColumnName||(i.model.additionalValue={value:s[f].toString(),name:e.columnBinding[o[f]],color:e.getCardProperties().ActualValueForeground.toString(),customText:e.getCardProperties().ActualValuePrefix!=null&&!BoldBIDashboard.isNullOrUndefined(e.getCardProperties().ActualValuePrefix.toString().trim())?e.getCardProperties().ActualValuePrefix:"",position:e.getCardProperties().AdditionalValueAlignment.toString().toLocaleLowerCase()}),BoldBIDashboard.isNullOrUndefined(r.sparkLineData)||o[f]!==e.DataGroupInfo.FieldContainers[2].FieldInfos[0].UniqueColumnName||(l=r.sparkLineData[s[f].toString()]);if(!BoldBIDashboard.isNullOrUndefined(l)){var a=JSON.parse(l),v=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SparkLineType,e.getCardProperties().SparklineSettings.Type),b={Data:a,Type:v,LowValueColor:e.getCardProperties().SparklineSettings.LowValueColor,HighValueColor:e.getCardProperties().SparklineSettings.HighValueColor,Opacity:e.getCardProperties().SparklineSettings.Opacity,ShowMarker:e.getCardProperties().SparklineSettings.ShowMarker,SparklineName:e.DataGroupInfo.FieldContainers[4].FieldInfos[0].Name};i.model.sparkLine=b;i.model.hasSparkLine=!0}e.updateMeasureFormatting(i,r);e.DataGroupInfo.FieldContainers[3].FieldInfos.length>0&&e.setAdditionalValueMeasureFormatting(r,i);e.getProperties(i);u&&e.applySeriesCardSettings(e.cardElement,n,p,y);i.redraw();e.updateSubTitle(e.cardElement);BoldBIDashboard.isNullOrUndefined(c)||c===""||(BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(e),i.model.customHeader.text.toString()===c&&(e.bbdesigner$(i.element[0]).addClass("e-card-Selected"),e.updateSelectionContainer(e.bbdesigner$(i.element[0]))));n===t.length-1?e.controlContainer.find(".bbi-background-waiting-popup").hide():n===0&&e.controlContainer.removeAttr("data-prevent-loading-indicator")},100))},g=this,a=0;a<t.length;a++)d(a);this.getCardProperties().HasCustomTitle||(this.widgetJson.ContainerSettings.Title=this.getCardProperties().TitleSettings.Text=this.GenerateHeaderText());!BoldBIDashboard.isNullOrUndefined(this.propertyPanel.headerInput)&&this.designPanelInstance.selectedReportItems.length>0&&this.Name===this.designPanelInstance.selectedReportItems[0].attr("name")&&this.propertyPanel.headerInput.val(this.widgetJson.ContainerSettings.Title);this.propertyPanel.setTitle(this.widgetJson);this.propertyPanel.setSubTitle(this.widgetJson,this.widgetJson.ContainerSettings.SubTitle);this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleValue",!1);this.cardItem.data("BoldBIDashboardScroller")&&this.cardItem.BoldBIDashboardScroller("destroy");this.cardItem.BoldBIDashboardScroller({width:this.cardItem.width(),height:this.cardItem.height(),autoHide:!0,scrollerSize:this.designerInstance.scrollerSize.scrollSize,cssClass:"bbi-dbrd-designer-scroller bbi-dbrd-control"});this.cardContent.height("100%")},t.prototype.updateSparkLineValue=function(n,t,i,r,u,f){var c=[],l=[],a,v,e,y,p;u&&(a="data",v="icon",c=JSON.parse(f[v]),l=JSON.parse(f[a]));var s=this.createCardElement(i,t),o=s.key,h=s.Value;for(i=s.cardObj,e=0;e<o.length;e++)BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos[0])||o[e]!==this.DataGroupInfo.FieldContainers[0].FieldInfos[0].UniqueColumnName||(i.model.actualValue={name:this.columnBinding[o[e]],value:h[e].toString()}),BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[1].FieldInfos[0])||o[e]!==this.DataGroupInfo.FieldContainers[1].FieldInfos[0].UniqueColumnName||(i.model.targetValue={name:this.columnBinding[o[e]],value:h[e].toString()}),BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[3].FieldInfos[0])||o[e]!==this.DataGroupInfo.FieldContainers[3].FieldInfos[0].UniqueColumnName||(i.model.additionalValue={value:h[e].toString(),name:this.columnBinding[o[e]],color:this.getCardProperties().ActualValueForeground.toString(),customText:this.getCardProperties().ActualValuePrefix!=null&&!BoldBIDashboard.isNullOrUndefined(this.getCardProperties().ActualValuePrefix.toString().trim())?this.getCardProperties().ActualValuePrefix:"",position:this.getCardProperties().AdditionalValueAlignment.toString().toLocaleLowerCase()});r.sparkLineData!=null&&(y=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SparkLineType,this.getCardProperties().SparklineSettings.Type),p={Data:r.sparkLineData,Type:y,LowValueColor:this.getCardProperties().SparklineSettings.LowValueColor,HighValueColor:this.getCardProperties().SparklineSettings.HighValueColor,Opacity:this.getCardProperties().SparklineSettings.Opacity,ShowMarker:this.getCardProperties().SparklineSettings.ShowMarker,SparklineName:this.DataGroupInfo.FieldContainers[4].FieldInfos[0].Name},i.model.sparkLine=p,i.model.hasSparkLine=!0);this.updateMeasureFormatting(i,r);this.DataGroupInfo.FieldContainers[3].FieldInfos.length>0&&this.setAdditionalValueMeasureFormatting(r,i);this.getProperties(i);u&&this.applySeriesCardSettings(this.cardElement,0,l,c);i.redraw();this.updateSubTitle(this.cardElement);this.setTitleForCardElement();this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleValue",!0);this.setTitleForCardJson();this.setPropertyElement("BasicSettings","TitleValue",this.getCardProperties().TitleSettings.Text);BoldBIDashboard.isNullOrUndefined(this.propertyPanel.headerInput)||this.propertyPanel.headerInput.val(this.widgetJson.ContainerSettings.Title)},t.prototype.updateCustomValue=function(n,t,i,r,u,f,e){var l=[],a=[],v,y,o;f&&(v="data",y="icon",l=JSON.parse(e[y]),a=JSON.parse(e[v]));var h=this.createCardElement(i,t),s=h.key,c=h.Value;for(i=h.cardObj,o=0;o<s.length;o++)BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos[0])||s[o]!==this.DataGroupInfo.FieldContainers[0].FieldInfos[0].UniqueColumnName||(i.model.actualValue={name:this.columnBinding[s[o]],value:c[o].toString()}),BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[1].FieldInfos[0])||s[o]!==this.DataGroupInfo.FieldContainers[1].FieldInfos[0].UniqueColumnName||(i.model.targetValue={name:this.columnBinding[s[o]],value:c[o].toString()}),BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[3].FieldInfos[0])||s[o]!==this.DataGroupInfo.FieldContainers[3].FieldInfos[0].UniqueColumnName||(i.model.additionalValue={value:c[o].toString(),name:this.columnBinding[s[o]],color:this.getCardProperties().ActualValueForeground.toString(),customText:this.getCardProperties().ActualValuePrefix!=null&&!BoldBIDashboard.isNullOrUndefined(this.getCardProperties().ActualValuePrefix.toString().trim())?this.getCardProperties().ActualValuePrefix:"",position:this.getCardProperties().AdditionalValueAlignment.toString().toLocaleLowerCase()});this.updateMeasureFormatting(i,r);this.DataGroupInfo.FieldContainers[3].FieldInfos.length>0&&this.setAdditionalValueMeasureFormatting(r,i);this.getProperties(i);f&&this.applySeriesCardSettings(this.cardElement,0,a,l);i.redraw();this.updateSubTitle(this.cardElement);this.setTitleForCardElement();this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleValue",!0);this.setTitleForCardJson();this.setPropertyElement("BasicSettings","TitleValue",this.getCardProperties().TitleSettings.Text);BoldBIDashboard.isNullOrUndefined(this.propertyPanel.headerInput)||this.propertyPanel.headerInput.val(this.widgetJson.ContainerSettings.Title);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.CustomValue,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Card)},t.prototype.setTitleForCardElement=function(){var n=this.bbdesigner$(this.cardElement).find(".e-title"),i=n.html(),t;if(n.children().length>0){for(t=0;t<n.children().length;t++)i=this.bbdesigner$(this.bbdesigner$(n.children()[t])[0]).hasClass("bbi-dbrd-label-parameter-value")?i.replace(this.bbdesigner$(n.children()[t])[0].outerHTML.toString(),""):i.replace(this.bbdesigner$(n.children()[t])[0].outerHTML.toString(),this.bbdesigner$(n.children()[t])[0].innerText);this.titleValue=i;this.updateTitle(this.cardElement)}else this.titleValue=i},t.prototype.applySeriesCardSettings=function(n,t,i,r){var f=n.data("BoldBIDashboardCard"),u;if(f.model.primaryValue.color=BoldBIDashboard.isNullOrUndefined(i[t].PrimaryValueColumn_FillColor)?"":i[t].PrimaryValueColumn_FillColor,f.model.background.color=BoldBIDashboard.isNullOrUndefined(i[t].PrimaryValueColumn_BackgroundColor)?"#ffffff":i[t].PrimaryValueColumn_BackgroundColor,f.model.customHeader.color=BoldBIDashboard.isNullOrUndefined(i[t].PrimaryValueColumn_TitleColor)?this.getCardProperties().TitleSettings.Color:i[t].PrimaryValueColumn_TitleColor,BoldBIDashboard.isNullOrUndefined(i[t].PrimaryValueColumn_BorderColor)||(n.style.borderColor=i[t].PrimaryValueColumn_BorderColor),BoldBIDashboard.isNullOrUndefined(i[t].PrimaryValueColumn_Icon))f.model.icon.path="";else{var s=String.fromCharCode(127),e=i[t].PrimaryValueColumn_Icon.split(s),o=e[1];if(e[0]==="Embedded")for(u=0;u<r.length;u++)if(r[u].fileName===o){o="data:image/"+r[u].ext+";base64,"+r[u].source;break}f.model.icon={type:e[0],path:o,color:e[2]}}},t.prototype.setAdditionalValueMeasureFormatting=function(n,t){var r=this,i=n.widgetData.filter(function(n){return n.UniqueColumnName===r.DataGroupInfo.FieldContainers[3].FieldInfos[0].UniqueColumnName})[0];BoldBIDashboard.isNullOrUndefined(i)||i.MeasureFormatting==null?t.model.additionalValueRepresentation.abbreviationType="once":(t.model.additionalValueRepresentation.currencyCulture=i.MeasureFormatting.Culture,t.model.additionalValueRepresentation.numberOfDecimals=i.MeasureFormatting.DecimalPoints,t.model.additionalValueRepresentation.format=i.MeasureFormatting.FormatType,t.model.valueRepresentation.decimalSeparator=i.MeasureFormatting.DecimalSeparator,t.model.valueRepresentation.groupSeparator=i.MeasureFormatting.GroupSeparator,t.model.additionalValueRepresentation.prefix=i.MeasureFormatting.Prefix?i.MeasureFormatting.Prefix:"",t.model.additionalValueRepresentation.suffix=i.MeasureFormatting.Suffix?i.MeasureFormatting.Suffix:"",t.model.additionalValueRepresentation.abbreviationType=i.MeasureFormatting.Unit)},t.prototype.updateMeasureFormatting=function(n,t){var r=this.getBindedColumns(),u=!BoldBIDashboard.isNullOrUndefined(r.actualColumns)&&r.actualColumns.length>0?r.actualColumns[0].UniqueColumnName:r.targetColumns[0].UniqueColumnName,f=t.widgetData.filter(function(n){return n.UniqueColumnName===u})[0],i=this.applyCardMeasureFormatting(f);BoldBIDashboard.isNullOrUndefined(i)?n.model.valueRepresentation.abbreviationType="once":(n.model.valueRepresentation.currencyCulture=i.Culture,n.model.valueRepresentation.numberOfDecimals=i.DecimalPoints,n.model.valueRepresentation.format=i.FormatType,n.model.valueRepresentation.decimalSeparator=i.DecimalSeparator,n.model.valueRepresentation.groupSeparator=i.GroupSeparator,n.model.valueRepresentation.prefix=i.Prefix?i.Prefix:"",n.model.valueRepresentation.suffix=i.Suffix?i.Suffix:"",n.model.valueRepresentation.abbreviationType=i.Unit)},t.prototype.setTitleForCardJson=function(){var n,i,t;if(this.cardItem.find(".e-title").length===1)if(n=this.cardItem.find(".e-title"),i=n.html(),n.children().length>0){for(t=0;t<n.children().length;t++)i=this.bbdesigner$(this.bbdesigner$(n.children()[t])[0]).hasClass("bbi-dbrd-label-parameter-value")?i.replace(this.bbdesigner$(n.children()[t])[0].outerHTML.toString(),""):i.replace(this.bbdesigner$(n.children()[t])[0].outerHTML.toString(),this.bbdesigner$(n.children()[t])[0].innerText);this.widgetJson.ContainerSettings.Title=this.getCardProperties().TitleSettings.Text=i}else this.widgetJson.ContainerSettings.Title=this.getCardProperties().TitleSettings.Text=i},t.prototype.updateSelectionContainer=function(n){var e,o;if(!BoldBIDashboard.isNullOrUndefined(n)){var f=4,i=n.parents(".e-carditem").find(".cardContent"),t=n,s=n.parents(".e-carditem"),r=i.find(".e-dbrd-selected-card"),u=i.find(".e-corner-triangle");r.length===0&&(r=BoldBIDashboard.buildTag("div.e-dbrd-selected-card"),u.length===0&&(u=BoldBIDashboard.buildTag("div.e-corner-triangle"),r.append(u)));u.css({left:t.width()-8});e=t.offset().left-t.offsetParent().offset().left;o=t.offsetParent().scrollTop()+t.offset().top-t.offsetParent().offset().top;r.css({top:o,left:e,display:"block",width:t.width()+f+"px",height:t.height()+f+"px"});s.animate({scrollTop:t.position().top-10});i.find(".e-dbrd-selected-card").length===0&&(i.append(r),i.css({position:"relative"}))}},t.prototype.updateCardWithDefaultValue=function(){this.cardElement=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%",position:"relative","font-size":this.getCardProperties().UniformSizing?this.contentContainer.height()/8+"px":"10pt","background-color":"white"},{id:this.designerId+"cardElement"+this.widgetJson.UniqueName});this.cardItem.append(this.cardElement);this.cardElement.BoldBIDashboardCard({actualValue:{color:"#686262",name:"Actual",position:"right",value:"100"},targetValue:{color:"#686262",name:"Target",position:"right",value:"90"},size:{width:this.cardItem.width(),height:this.cardItem.height()},subTitle:{visible:this.getCardProperties().SubTitleSettings.Visibility,color:BoldBIDashboard.isNullOrUndefined(this.getCardProperties().SubTitleSettings.Color)?"":this.getCardProperties().SubTitleSettings.Color,text:BoldBIDashboard.isNullOrUndefined(this.getCardProperties().SubTitleSettings.Text)?"":this.getCardProperties().SubTitleSettings.Text},uniformFontSize:this.getCardProperties().UniformSizing,customVisibility:{compactView:this.getCardProperties().EnableCompactView},primaryValue:{color:""},selected:this.bbdesigner$.proxy(this.cardItemSelected,this)});this.getCardProperties().HasCustomTitle=!1;this.getCardProperties().TitleSettings.Text=this.widgetJson.ContainerSettings.Title=this.cardItem.find(".e-title").html();this.setPropertyElement("BasicSettings","TitleValue",this.getCardProperties().TitleSettings.Text);!BoldBIDashboard.isNullOrUndefined(this.propertyPanel.headerInput)&&this.designPanelInstance.selectedReportItems.length>0&&this.Name===this.designPanelInstance.selectedReportItems[0].attr("name")&&this.propertyPanel.headerInput.val(this.widgetJson.ContainerSettings.Title);BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this)},t.prototype.cardItemSelected=function(t){if(this.getCardProperties().FilterSettings.ActAsMasterWidget)this.processFilterInfo(t);else if(!BoldBIDashboard.isNullOrUndefined(this.getCardProperties().UrlLink)&&this.getCardProperties().UrlLink.EnableLink){var i=this.getLinkingData(t);n.prototype.performLinking.call(this,i)}},t.prototype.resizeSingleCardTitle=function(n){if(!BoldBIDashboard.isNullOrUndefined(this.widgetJson)&&!this.widgetJson.ContainerSettings.ShowHeader){var t=n.parents(".bbi-dbrditem"),r=t.find(".e-dbrd-single-card-controlIcon"),i=t.find(".e-title");i.css({"max-width":i.width()-r.width()+"px",width:"auto"})}},t.prototype.setContainerHeight=function(n){this.getContainerSettings().ShowHeader&&(n=this.controlHeader.outerHeight(!0),!BoldBIDashboard.isNullOrUndefined(this.widgetJson.ContainerSettings.SubTitle)&&this.widgetJson.ContainerSettings.SubTitle.trim().length>0?(n+=this.controlSubHeader.outerHeight(!0),this.controlSubHeader.css("display","block")):this.controlSubHeader.css("display","none"));this.contentContainer.css({height:this.getContainerSettings().ShowHeader?"calc(100% - "+n+"px)":"100%"});this.cardItem.css({height:this.getContainerSettings().ShowHeader?"calc(100% - "+n+"px)":"100%"})},t.prototype.updateCornerRadius=function(n){this.cardItem.hasClass("e-Card-Single")&&this.controlContainer.find(".bbi-dbrd-content-container").css("border-radius",n+"px")},t.prototype.updateLabelParameterValue=function(n){var t=n.html();this.labelParameter.isLabelParameterPresent(t,this.widgetJson.Data.Id)&&(n[0].innerHTML=this.labelParameter.getResultantParameterString(t,this.widgetJson.Data.Id))},t.prototype.updateSubTitle=function(n){var t=this.bbdesigner$(n).find(".e-subtitle");this.setLabelParameterId(t)},t.prototype.updateTitle=function(n){var t=this.bbdesigner$(n).find(".e-title");this.setLabelParameterId(t)},t.prototype.setLabelParameterId=function(n){var i,t,r;if(n.find(".bbi-dbrd-label-parameter-text").length>=1)for(i=n.find(".bbi-dbrd-label-parameter-text"),t=0;t<i.length;t++)r=this.labelParameter.generateIdForLabelParameterElement(i[t]),this.bbdesigner$(i[t]).attr("data-labelparameterid",r),this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(this.labelParameter.setValueForLabelParameter(i[t]),this.bbdesigner$(i[t]).css({display:"none"}))},t.prototype.setPropertyElement=function(n,t,i,r){var u,f;this.designPanelInstance.selectedReportItems.length>0&&this.Name===this.designPanelInstance.selectedReportItems[0].attr("name")&&(this.propertyPanel.canUpdate=!1,u=this.propertyPanel.getPropertyElement(this.getPropertyPanelForCard(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r),u.value=i,f=this.bbdesigner$.extend(!0,{},u),f.categoryName=n,this.propertyPanel.updatePropertyValue(f,"Card",i),this.propertyPanel.canUpdate=!0)},t.prototype.getCardProperties=function(){return this.widgetJson},t.prototype.generateFieldContainer=function(n,t,i){var r=new BoldBIDashboard.Dashboard.FieldContainerForUI;return r.Name=n,r.DisplayName=t,r.ContainerType=i,r.CategoryCount=1,r},t.prototype.isMeasureFormatDisable=function(n){return n.ContainerName==="TargetValue"&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0])?!(this.DataGroupInfo.FieldContainers[0].FieldInfos.length===0):!1},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.CardItem",InternalCardReportItem,window);BoldBIDashboard.DashboardDesignerUtility.CardItem.prototype.initialize();__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalKPICardItem=function(n){function t(t){var i=n.call(this,t,"KPICard","e-kpicard-item")||this;return i.kpiCardItem=null,i.kpiCardElement=null,i.isActAsSlaveForAnyPoP=!1,i.locale=null,i.defaultColorPalette=[],i.lightBackgroundColor="#ffffffff",i.lightTitleColor="#505D6FFF",i.lightRightValueColor="#505D6FFF",i.lightRightCaptionTextColor="#505D6FFF",i.lightLeftValueColor="#505D6FFF",i.lightLeftCaptionTextColor="#505D6FFF",i.lightSeparatorColor="#9AA1A9FF",i.lightKPIValueColor="#505D6FFF",i.popColorPalette=["#1C852E","#0062CC"],i.bbdesigner$=i.designerInstance.bbdesigner$,i.locale=t.getLocalizationContent(),i.widgetJson=new KPICardProperties(t),i.designerId=i.designerInstance._id,i.IsPoPSupportedWidget=!0,i.propertyPanel=t.modules.propertyPanel,i.colorFields=i.getColorFields(),i.defaultColorPalette=BoldBIDashboard.DashboardUtil.defaultColorPalette,i.isBackgroundInfoNeeded=!1,i.unwireEvents(),i.wireEvents(),i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.card,GroupId:"eb520ddb-5d82-4bf8-858c-msdf3317230e",Items:[{id:"f48aed7c-c972-43c1-8668-a0d9b89c1901",widgetName:"KPI Card",widgetDisplayName:n.itemPanel.widgetTitle.kpiCard,cssClass:"bbi-widgeticon bbi-designer-widget-kpicard",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.KPICardItem",searchCategory:["KPICard","card"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.kpiCard,description:n.itemPanel.widgetDescription.kpiCardDesc,dataRequirement:n.itemPanel.widgetDataRequirements.kpiCardDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICardProperties",minRowSpan:7,minColSpan:9}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){this.createKPICardConatiner(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.kpiCardElement)||this.updateKPICardSize()},t.prototype.update=function(n){this.updateTitleSubtitleTheme();this.updateKPIData(n);this.IsRendered=!0;this.updateThemeInWidget()},t.prototype.updateContainerPadding=function(){BoldBIDashboard.isNullOrUndefined(this.getContainerSettings().WidgetPaddingInfo)&&(this.getContainerSettings().WidgetPaddingInfo=new WidgetPaddingInfo,this.getContainerSettings().WidgetPaddingInfo.AutoPadding=!0,this.getContainerSettings().WidgetPaddingInfo.Padding=this.getControlContainerPaddingValue());!BoldBIDashboard.isNullOrUndefined(this.contentContainer)&&this.contentContainer.length>0&&(this.contentContainer[0].style.padding="0px",!BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)&&this.kpiCardContent.length>0&&(this.contentContainer[0].style.paddingTop=this.kpiCardContent.length===1&&!this.widgetJson.ContainerSettings.ShowHeader?"0px":this.getControlContainerPadding()))},t.prototype.updateControlContainerPadding=function(){var n=this.controlContainer.find(".bbi-dbrd-control-container-wrapper");!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0&&(n[0].style.padding="0px",!BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)&&this.kpiCardContent.length>0&&(n[0].style.paddingTop=this.kpiCardContent.length===1&&!this.widgetJson.ContainerSettings.ShowHeader?"0px":this.getControlContainerPadding()))},t.prototype.updateIconContainerBackground=function(){var n=this.ControlContainer.find(".bbi-dbrd-controlIcon-container");if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0&&this.isSeriesCardWithHeader){var i=!BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)&&this.kpiCardContent.length>0,r=i?this.designerInstance.isViewMode()&&this.designerInstance.isDarkTypeTheme()?1:this.getKPICardProperties().BackgroundSettings.Transparency:this.getKPICardProperties().BackgroundSettings.Transparency,t=r===1?this.widgetJson.ContainerSettings.BackgroundSettings.Color:this.getTransparentHexColor(this.widgetJson.ContainerSettings.BackgroundSettings.Color,r);n.css({"background-color":i||this.designerInstance.isViewMode()&&(t.toLocaleLowerCase()==="#ffffff"||t.toLocaleLowerCase()==="#ffffffff")?this.designerInstance.modules.themeHelper.getWidgetTileBackground(null):t})}},t.prototype.applyWidgetTheme=function(){this.updateTitleSubtitleTheme();this.updateThemeInWidget();this.updateKPICardSize()},t.prototype.canCombineRequest=function(){var n=this.getBindedColumnIndex(this.DataGroupInfo),t=!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[n.seriesValueIndex])&&this.DataGroupInfo.FieldContainers[n.seriesValueIndex].FieldInfos.length>0,i=!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[n.sparklineValueIndex])&&this.DataGroupInfo.FieldContainers[n.sparklineValueIndex].FieldInfos.length>0;return t||i?!1:!0},t.prototype.canApplyCustomThemeInDesigner=function(n){var t=this.getKPICardProperties();if(!t.EnableColorSettings&&this.designerInstance.isEnableCustomDashboardTheme())switch(n){case"Title":return t.TitleSettings.Color==="#505D6F";case"Background":return t.BackgroundSettings.Color==="#ffffff";case"LeftValue":return t.LeftValueSettings.Color==="#505D6F";case"LeftCaption":return t.LeftCaptionSettings.Color==="#505D6F";case"RightValue":return t.RightValueSettings.Color==="#505D6F";case"KPIValue":return t.KPIValueSettings.Color==="#505D6F";case"RightCaption":return t.RightCaptionSettings.Color==="#505D6F";case"Separator":return t.SeparatorSettings.Color==="#9AA1A9";default:return!1}else return!1},t.prototype.updateThemeInWidget=function(){if(BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getKPICardProperties().ContainerSettings.TextColor,this.designerInstance.modules.themeHelper.getKPICardHeaderTitle()),BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)){var n=this.designerInstance.isDarkTypeTheme(),t=this.designerInstance.modules.themeHelper.getWidgetDataBackground(),i=this.designerInstance.modules.themeHelper.getKPICardTitleTextColor(),r=this.designerInstance.modules.themeHelper.getKPICardRightLabelTextColor(),u=this.designerInstance.modules.themeHelper.getKPICardLeftLabelTextColor(),f=this.designerInstance.modules.themeHelper.getKPICardRightValueTextColor(),e=this.designerInstance.modules.themeHelper.getKPICardLeftValueTextColor(),o=this.designerInstance.modules.themeHelper.getKPICardKPIValueTextColor(),s=this.designerInstance.modules.themeHelper.getKPICardSeparatorColor();(this.canCustomThemeApplied("Title")||this.canApplyCustomThemeInDesigner("Title"))&&this.updateTitleColor(i,!1);(this.canCustomThemeApplied("Background")||this.canApplyCustomThemeInDesigner("Background"))&&this.updateBackgroundColor(t,!1);this.updateControlBackgroundForSeriesCard(this.isSeriesCardWithHeader);this.updateBackgroundTransparency(this.getKPICardProperties().BackgroundSettings.Transparency,!1);this.updateSparklineOpacity(this.getKPICardProperties().SparklineSettings.Opacity,!1);(this.canCustomThemeApplied("LeftValue")||this.canApplyCustomThemeInDesigner("LeftValue"))&&this.updateLeftValueColor(e,!1);(this.canCustomThemeApplied("LeftCaption")||this.canApplyCustomThemeInDesigner("LeftCaption"))&&this.updateLeftCaptionColor(u,!1);(this.canCustomThemeApplied("RightValue")||this.canApplyCustomThemeInDesigner("RightValue"))&&this.updateRightValueColor(f,!1);(this.canCustomThemeApplied("KPIValue")||this.canApplyCustomThemeInDesigner("KPIValue"))&&this.updatePrimaryValueColor(o,!1);(this.canCustomThemeApplied("RightCaption")||this.canApplyCustomThemeInDesigner("RightCaption"))&&this.updateRightCaptionColor(r,!1);(this.canCustomThemeApplied("Separator")||this.canApplyCustomThemeInDesigner("Separator"))&&this.updateSeparatorColor(s,!1);this.applyKPICardFontStyle();this.applyCardBorderStyle(n);this.kpiCardElement.css("background","transparent")}else BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this)},t.prototype.updateTitleSubtitleTheme=function(){var n=this.designerInstance.modules.themeHelper.getKPICardHeaderTitle(),t=this.designerInstance.modules.themeHelper.getKPICardHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getKPICardProperties().ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.applyCardBorderStyle=function(){if(!BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)){var n=this.designerInstance.modules.themeHelper.getKPICardBorder();this.kpiCardContent.find(".e-kpicard-border-right").css("border-right-color",n);this.kpiCardContent.find(".e-kpicard-border-top").css("border-top-color",n);this.kpiCardContent.find(".e-kpicard-border-bottom").css("border-bottom-color",n)}},t.prototype.applyKPICardFontStyle=function(){var o=this,n=this.designerInstance.modules.themeHelper.getKPICardLeftLabelFont(),h=this.getKPICardProperties().LeftCaptionSettings.AutoFontSize?BoldBIDashboard.isNullOrUndefined(n.size)||n.size===""?this.getFontSizeBasedOnResolution().split("px")[0]:n.size.split("px")[0]:this.getKPICardProperties().LeftCaptionSettings.FontSize,c=n.weight,l=n.family,t=this.designerInstance.modules.themeHelper.getKPICardLeftValueFont(),a=this.getKPICardProperties().LeftValueSettings.AutoFontSize?BoldBIDashboard.isNullOrUndefined(t.size)||t.size===""?this.getFontSizeBasedOnResolution().split("px")[0]:t.size.split("px")[0]:this.getKPICardProperties().LeftValueSettings.FontSize,v=t.weight,y=t.family,i=this.designerInstance.modules.themeHelper.getKPICardRightValueFont(),p=this.getKPICardProperties().RightValueSettings.AutoFontSize?BoldBIDashboard.isNullOrUndefined(i.size)||i.size===""?this.getFontSizeBasedOnResolution().split("px")[0]:i.size.split("px")[0]:this.getKPICardProperties().RightValueSettings.FontSize,w=i.weight,b=i.family,r=this.designerInstance.modules.themeHelper.getKPICardRightLabelFont(),k=this.getKPICardProperties().RightCaptionSettings.AutoFontSize?BoldBIDashboard.isNullOrUndefined(r.size)||r.size===""?this.getFontSizeBasedOnResolution().split("px")[0]:r.size.split("px")[0]:this.getKPICardProperties().RightCaptionSettings.FontSize,d=r.weight,g=r.family,u=this.designerInstance.modules.themeHelper.getKPICardKPIValueFont(),nt=this.getKPICardProperties().KPIValueSettings.AutoFontSize?BoldBIDashboard.isNullOrUndefined(u.size)||u.size===""?this.getKPIFontSizeBasedOnResolution():u.size.split("px")[0]:this.getKPICardProperties().KPIValueSettings.FontSize,tt=u.weight,it=u.family,f=this.designerInstance.modules.themeHelper.getKPICardTitleFont(),rt=this.getKPICardProperties().TitleSettings.AutoFontSize?BoldBIDashboard.isNullOrUndefined(f.size)||f.size===""?this.getFontSizeBasedOnResolution().split("px")[0]:f.size.split("px")[0]:this.getKPICardProperties().TitleSettings.FontSize,ut=f.weight,ft=f.family,et=this.getKPICardProperties().IndicatorSettings.AutoFontSize?this.getIndicatorFontSizeBasedOnResolution():this.getKPICardProperties().IndicatorSettings.FontSize,s={title:{fontSize:rt,fontWeight:ut,fontFamily:ft},leftValue:{fontSize:a,fontWeight:v,fontFamily:y,captionFontSize:h,captionFontFamily:l,captionFontWeight:c},rightValue:{fontSize:p,fontWeight:w,fontFamily:b,captionFontSize:k,captionFontFamily:g,captionFontWeight:d},kpiValue:{fontSize:nt,fontWeight:tt,fontFamily:it},icon:{fontSize:et}},e;BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(e=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(e)||e.setModel(s)):(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.resizeKPICard(),this.updateSeriesCardProperty(s),setTimeout(function(n){BoldBIDashboard.isNullOrUndefined(n.model)||o.designerInstance.designerPanel.hideLoadingIndicator(o.controlContainer)},100,this.designerInstance))},t.prototype.getKPIFontSizeBasedOnResolution=function(){return window.screen.width<1920?"32":window.screen.width<3840?"64":"72"},t.prototype.getIndicatorFontSizeBasedOnResolution=function(){return window.screen.width<1920?"16":window.screen.width<3840?"24":"40"},t.prototype.canCustomThemeApplied=function(n){var t=this.getKPICardProperties();if(t.EnableColorSettings)return!1;switch(n){case"Title":return t.TitleSettings.Color.toLocaleLowerCase()===this.lightTitleColor.toLocaleLowerCase()||t.TitleSettings.Color.toLocaleLowerCase()==="#333333ff";case"Background":return t.BackgroundSettings.Color.toLocaleLowerCase()===this.lightBackgroundColor.toLocaleLowerCase();case"LeftValue":return t.LeftValueSettings.Color.toLocaleLowerCase()===this.lightLeftValueColor.toLocaleLowerCase()||t.LeftValueSettings.Color.toLocaleLowerCase()==="#333333ff";case"LeftCaption":return t.LeftCaptionSettings.Color.toLocaleLowerCase()===this.lightLeftCaptionTextColor.toLocaleLowerCase()||t.LeftCaptionSettings.Color.toLocaleLowerCase()==="#333333ff";case"RightValue":return t.RightValueSettings.Color.toLocaleLowerCase()===this.lightRightValueColor.toLocaleLowerCase()||t.RightValueSettings.Color.toLocaleLowerCase()==="#333333ff";case"KPIValue":return t.KPIValueSettings.Color.toLocaleLowerCase()===this.lightKPIValueColor.toLocaleLowerCase()||t.KPIValueSettings.Color.toLocaleLowerCase()==="#333333";case"RightCaption":return t.RightCaptionSettings.Color.toLocaleLowerCase()===this.lightRightCaptionTextColor.toLocaleLowerCase()||t.RightCaptionSettings.Color.toLocaleLowerCase()==="#333333ff";case"Separator":return t.SeparatorSettings.Color.toLocaleLowerCase()===this.lightSeparatorColor.toLocaleLowerCase()||t.SeparatorSettings.Color.toLocaleLowerCase()==="#333333ff"}return!0},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej1.card.all.min.js",NameSpace:"BoldBIDashboard.Card"},DependentScripts:[]}},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,"BoldBIDashboard.Card")},t.prototype.getFieldContainer=function(){var u=new BoldBIDashboard.Dashboard.FieldContainerForUI,i,r,f,t,e,o;return u.Name="ActualValue",u.DisplayName=this.locale.fieldContainer.actualValue,u.ContainerType=FieldContainerType.Numeric,u.CategoryCount=1,u.Required=!0,i=new BoldBIDashboard.Dashboard.FieldContainerForUI,i.Name="TargetValue",i.DisplayName=this.locale.fieldContainer.targetValue,i.ContainerType=FieldContainerType.Numeric,i.CategoryCount=1,i.Required=!0,r=new BoldBIDashboard.Dashboard.FieldContainerForUI,r.Name="Series",r.DisplayName=this.locale.fieldContainer.series,r.ContainerType=FieldContainerType.Non_Numeric,r.QueryOrder=3,r.CategoryCount=1,f=new BoldBIDashboard.Dashboard.FieldContainerForUI,f.Name="Tooltip",f.DisplayName=this.locale.fieldContainer.hiddenColumns,f.ContainerType=FieldContainerType.Numeric,f.QueryOrder=1,t=new BoldBIDashboard.Dashboard.FieldContainerForUI,t.Name="Sparkline",t.DisplayName=this.locale.fieldContainer.sparkline,t.ContainerType=FieldContainerType.Non_Numeric,t.CategoryCount=1,t.QueryOrder=2,t.canUseInLinking=!1,e=new BoldBIDashboard.Dashboard.FieldContainerForUI,e.Name="Image",e.DisplayName=this.locale.fieldContainer.image,e.ContainerType=FieldContainerType.Non_Numeric,e.canUseInLinking=!1,o=new BoldBIDashboard.Dashboard.FieldContainerForUI,o.Name="BackgroundImage",o.DisplayName=this.locale.fieldContainer.backgroundImage,o.ContainerType=FieldContainerType.Non_Numeric,o.canUseInLinking=!1,[u,i,r,f,t,e,o,n.prototype.getFilterColumn.call(this)]},t.prototype.onFieldSettingsClick=function(n,t){return n.ContainerName==="TargetValue"&&(t.filter(function(n){return n.Name==="MeasureFormat"})[0].IsDisable=!0),(n.ContainerName==="Image"||n.ContainerName==="BackgroundImage")&&(t.filter(function(n){return n.Name==="DimensionFilters"})[0].Items.filter(function(n){return n.Name==="ClearDimensionFilter"})[0].IsDisable=!0),n.ContainerName==="Tooltip"&&(t.filter(function(n){return n.Name==="MeasureFormat"})[0].IsVisible=!1),BoldBIDashboard.DashboardUtil.hideRenameMenuOption(t)},t.prototype.getJson=function(){return this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t);BoldBIDashboard.isNullOrUndefined(this.getKPICardProperties().AnimationSettings)&&(this.getKPICardProperties().AnimationSettings=new AnimationSettings)},t.prototype.onFieldDragDrop=function(n,t,i){return this.onFieldDragAndDrop(n,t,i)},t.prototype.getPropertyPanelItems=function(){return this.KPICardPropertyPanel()},t.prototype.updatePropertyChange=function(t,i,r,u){n.prototype.updatePropertyChange.call(this,t,i,r,u);this.updateKPICardProperties(t,i,r,u)},t.prototype.clearFilter=function(n){var t=this.controlContainer;t.find(".e-dbrd-selected-kpicard").remove();t.find(".bbi-kpicard-selected").removeClass("bbi-kpicard-selected");BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this);this.widgetJson.SelectedFilterValues=[];this.isCurrentMaster=!1;this.designerInstance.modules.serialization.notifyChange();BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName)},t.prototype.getMobileViewHeight=function(){var n=this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor;return this.isSeriesCardWithHeader?3*n:2*n},t.prototype.refresh=function(){this.resizeKPICard()},t.prototype.dispose=function(){this.kpiCardDispose();n.prototype.dispose.call(this)},t.prototype.isNecessaryDataConfigured=function(){var t=this.getBindedColumnIndex(this.DataGroupInfo);return(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[t.actualValueIndex])&&this.DataGroupInfo.FieldContainers[t.actualValueIndex].FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[t.targetValueIndex])&&this.DataGroupInfo.FieldContainers[t.targetValueIndex].FieldInfos.length===0?this.IsPoPSupportedWidget=!0:!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[t.targetValueIndex])&&this.DataGroupInfo.FieldContainers[t.targetValueIndex].FieldInfos.length>0&&(this.IsPoPSupportedWidget=!1),this.updatePoPSlaveInfo(),this.isActAsSlaveForAnyPoP)?!0:n.prototype.isNecessaryDataConfigured.call(this)},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.locale.itemPanel.widgetDataRequiredMessage.kpicardDataRequiredMessage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsExistinBgAvailable",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.updatePoPSettings=function(n){var t=n&&this.isActAsSlaveForAnyPoP!==n;this.isActAsSlaveForAnyPoP=n;n?(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.showAlertMessageForData(this.locale.popNotification.slaveWidgetNoVirtualColumText,this.ContentContainer,this.getContainerSettings().CombineWidgetId)):(this.removeAlertMessageForData(this.ContentContainer),BoldBIDashboard.Dashboard.WidgetContainerHelper.showAlertMessageForData(this.locale.itemPanel.widgetDataRequiredMessage.kpicardDataRequiredMessage,this.contentContainer,this.getContainerSettings().CombineWidgetId));this.updatePoPColorSettings(n,t)},t.prototype.updatePoPSlaveInfo=function(){var e=this.getBindedColumnIndex(this.DataGroupInfo),t,n,u,i,f,r;if(BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[e.targetValueIndex])||this.DataGroupInfo.FieldContainers[e.targetValueIndex].FieldInfos.length!==0)this.isActAsSlaveForAnyPoP=!1;else if(!BoldBIDashboard.isNullOrUndefined(this.masterFilterWindowInstance)&&!BoldBIDashboard.isNullOrUndefined(this.masterFilterWindowInstance.filterObject)&&!BoldBIDashboard.isNullOrUndefined(this.masterFilterWindowInstance.filterObject.filterConfigurationModel)&&!BoldBIDashboard.isNullOrUndefined(this.masterFilterWindowInstance.filterObject.filterConfigurationModel.MastersCollection)){for(t=this.masterFilterWindowInstance.filterObject.filterConfigurationModel.MastersCollection,n=0;n<t.length;n++)if(t[n].MasterInfo.IsPoP)for(u=t[n].ProfileManager,i=0;i<u.length;i++)for(f=u[i].WidgetInfo,r=0;r<f.length;r++)if(f[r].ID===this.widgetJson.UniqueName){this.isActAsSlaveForAnyPoP=!0;break}this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.isActAsSlaveForAnyPoP?(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.showWidgetContainerImage(this),this.showAlertMessageForData(this.locale.popNotification.slaveWidgetNoVirtualColumText,this.ContentContainer,this.getContainerSettings().CombineWidgetId)):(this.removeAlertMessageForData(this.ContentContainer),BoldBIDashboard.Dashboard.WidgetContainerHelper.hideWidgetContainerImage(this.contentContainer),BoldBIDashboard.Dashboard.WidgetContainerHelper.showAlertMessageForData(this.locale.itemPanel.widgetDataRequiredMessage.kpicardDataRequiredMessage,this.contentContainer,this.getContainerSettings().CombineWidgetId)))}},t.prototype.showAlertMessageForData=function(n,t,i,r){var f=150,e;BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this);BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(t);e=r?"table":"block";this.removeAlertMessageForData(this.ContentContainer);var u=BoldBIDashboard.buildTag("div.bbi-dbrd-necessary-data-not-configured","",{display:e},{}),s=r?"bbi-dbrd-widget-not-configured-header-combine":"bbi-dbrd-widget-not-configured-header",o=BoldBIDashboard.buildTag("div."+s+" bbi-dbrd-designer-hoverable","",{},{"data-tooltip":n}),h=r?"bbi-information-icon-combine":"bbi-dbrd-necessary-data-not-configured-icon",c=BoldBIDashboard.buildTag("div."+h+" bbi-dbrd-designer-hoverable","",{},{"data-tooltip":n}),l=BoldBIDashboard.buildTag("div.bbi-dbrd-widget-not-necessary-data-configured-content",n,{display:t.height()<f||t.width()<f?"none":"block"},{});o.append(c,l);u.append(o);t.append(u);BoldBIDashboard.Dashboard.WidgetContainerHelper.updateNoNecessaryDataContainerSize(t);BoldBIDashboard.Dashboard.WidgetContainerHelper.updateZIndexInCW(t,u,i)},t.prototype.removeAlertMessageForData=function(n){n.find(".bbi-dbrd-necessary-data-not-configured").remove()},t.prototype.updatePoPColorSettings=function(n,t){var i,r,o,s,u,f;if(n){if(!BoldBIDashboard.isNullOrUndefined(this.popColorPalette)){var h=this.getBindedColumnIndex(this.DataGroupInfo),i=this.getKPICardProperties(),e=this.DataGroupInfo.FieldContainers[h.actualValueIndex];t&&(i.LeftValueSettings.Color=i.LeftCaptionSettings.Color=this.popColorPalette[0],i.RightValueSettings.Color=i.RightCaptionSettings.Color=this.popColorPalette[1],i.LeftCaptionSettings.Text=e.FieldInfos[0].DisplayName+"-Primary",i.RightCaptionSettings.Text=e.FieldInfos[0].DisplayName+"-Secondary");u={leftValue:{foreground:i.LeftValueSettings.Color,captionForeground:i.LeftCaptionSettings.Color,caption:e.FieldInfos[0].DisplayName+"-Primary"},rightValue:{foreground:i.RightValueSettings.Color,captionForeground:i.RightCaptionSettings.Color,caption:e.FieldInfos[0].DisplayName+"-Secondary"}};this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(f=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(f)||f.setModel(u)):this.updateSeriesCardProperty(u))}}else i=this.getKPICardProperties(),r="#505D6FFF",i.LeftValueSettings.Color=i.LeftCaptionSettings.Color=r,i.RightValueSettings.Color=i.RightCaptionSettings.Color=r,o="Actual Value",s="Target Value",i.LeftCaptionSettings.Text=o,i.RightCaptionSettings.Text=s,u={leftValue:{foreground:r,captionForeground:r,caption:o},rightValue:{foreground:r,captionForeground:r,caption:s}},this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(f=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(f)||f.setModel(u)):this.updateSeriesCardProperty(u))},t.prototype.isFieldBoundInUnsupportedSection=function(){if(this.getKPICardProperties().Data.Containers.filter(function(n){return n.Name==="TargetValue"}).length>0){var n=this.getKPICardProperties().Data.Containers.filter(function(n){return n.Name==="TargetValue"})[0];return n.FieldInfos.length>0}return!1},t.prototype.updateDataGroupInfo=function(n,t){this.updateItemDatGroupInfo(n,t)},t.prototype.getWidgetImage=function(){return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="KPI-Card" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <polygon id="Path-3" fill="var(--widget-notconfigured-image-background1)" points="59.0936655 196.097275 312.000013 196.097275 312.000013 65.3280389 290.392219 116.840071 242.380239 132.326442 174.067699 135.320991 153.46436 152.198677 97.2389191 152.198677 72.7523288 175.370459 40.32622 181.202644 12 196.097275"><\/polygon>        <path d="M244.43891,13.0377981 L265.818228,55.7964342 C266.312207,56.7843912 265.911758,57.9857373 264.923801,58.4797158 C264.64609,58.6185712 264.339864,58.6908614 264.029374,58.6908614 L221.270737,58.6908614 C220.166168,58.6908614 219.270737,57.7954309 219.270737,56.6908614 C219.270737,56.3803712 219.343028,56.0741451 219.481883,55.7964342 L240.861201,13.0377981 C241.35518,12.0498411 242.556526,11.6493924 243.544483,12.1433709 C243.931538,12.3368983 244.245383,12.6507433 244.43891,13.0377981 Z" id="Triangle" fill="var(--widget-notconfigured-image-background3)"><\/path>        <path d="M67.6350106,15.7315548 L89.0143283,58.4901902 C89.5083068,59.4781472 89.1078581,60.6794933 88.1199011,61.1734718 C87.8421902,61.3123272 87.5359641,61.3846174 87.2254739,61.3846174 L44.4668385,61.3846174 C43.362269,61.3846174 42.4668385,60.4891869 42.4668385,59.3846174 C42.4668385,59.0741272 42.5391287,58.7679011 42.6779841,58.4901902 L64.0573018,15.7315548 C64.5512803,14.7435978 65.7526264,14.3431491 66.7405834,14.8371276 C67.1276382,15.030655 67.4414832,15.3445 67.6350106,15.7315548 Z" id="Triangle" fill="var(--widget-notconfigured-image-background2)" transform="translate(65.846156, 36.769232) rotate(-180.000000) translate(-65.846156, -36.769232) "><\/path>    <\/g><\/svg>'},t.prototype.getWidgetInfo=function(t,i){var r=n.prototype.getWidgetInfo.call(this,t,i);return this.updateColorCustomization(),r.ColorCustomization=this.getKPICardProperties().ColorCustomization,r.KPIValueType=this.getKPICardProperties().KPIValueSettings.ValueType,this.updatePoPSlaveInfo(),r},t.prototype.beforeUtilityDialogOpen=function(n,t,i){if(t==="dimensionFilterDialog"&&(i.ContainerName==="Image"||i.ContainerName==="BackgroundImage")){var r=n;return r.TopNFilter.Rank.Enable=!1,r.TopNFilter.Count.Enable=!1,r.TopNFilter.InfoText=this.locale.CardImageRestrictionInfo.text,r}return n},t.prototype.canUseWidgetAsMaster=function(){var n=this.getBindedColumnIndex(this.DataGroupInfo);return!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)&&this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[n.seriesValueIndex].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[n.actualValueIndex].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[n.targetValueIndex].FieldInfos.length>0},t.prototype.updateCornerRadius=function(){this.kpiCardItem.hasClass("e-kpicard-single")&&this.kpiCardItem.css("border-radius",this.widgetJson.ContainerSettings.CornerRadius===4?BoldBIDashboard.Dashboard.WidgetContainerHelper.getThemeVariablesForWidgets(this.Type,!0,!1):this.widgetJson.ContainerSettings.CornerRadius+"px")},t.prototype.getDefaultMeasureFormat=function(){var n=new MeasureFormatting;return n.Unit=NumberFormat.Ones,n},t.prototype.createKPICardConatiner=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(this.isOpenReport=!0,BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));this.updateBackWardCompatability();this.renderKPICardItem();this.renderKPICardElement();BoldBIDashboard.isNullOrUndefined(this.getKPICardProperties().TitleSettings.Text)&&(this.getKPICardProperties().TitleSettings.Text=this.widgetJson.ContainerSettings.Title=BoldBIDashboard.isNullOrUndefined(this.bbdesigner$(this.kpiCardElement).find(".e-kpi-card-title-text").html())?"Card Title":this.bbdesigner$(this.kpiCardElement).find(".e-kpi-card-title-text").html());!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);BoldBIDashboard.Dashboard.WidgetContainerHelper.disableHeader(this,this.designerInstance);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.KPICard)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.updateBackWardCompatability=function(){BoldBIDashboard.isNullOrUndefined(this.getKPICardProperties().SeriesSettings)&&(this.getKPICardProperties().SeriesSettings=new SeriesSettings)},t.prototype.renderKPICardItem=function(){this.kpiCardItem=BoldBIDashboard.buildTag("div.bbi-kpicarditem e-dbrd-widget bbi-dbrd-control e-kpicard-single","",{"z-index":this.widgetOrder},{id:this.designerId+"KPICardItem"+this.widgetJson.UniqueName})},t.prototype.renderKPICardElement=function(){this.kpiCardElement=BoldBIDashboard.buildTag("div.bbi-kpicard-element","",{"background-color":"transparent"},{id:this.designerId+"kpiCardElement"+this.widgetJson.UniqueName});this.contentContainer.append(this.kpiCardItem);this.controlContainer.data("widgetInstance",this);this.kpiCardItem.append(this.kpiCardElement);this.kpiCardItem.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designerId+"_designer_waiting_popup bbi-designer-loader",template:this.designerInstance.getWaitingPopupTemplate()})},t.prototype.renderControl=function(t,i,r,u,f){u===void 0&&(u="");f===void 0&&(f=null);var s=this.getBindedColumnIndex(this.DataGroupInfo),o=this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[s.actualValueIndex].FieldInfos.length!==0&&this.DataGroupInfo.FieldContainers[s.targetValueIndex].FieldInfos.length!==0?this.DataGroupInfo.FieldContainers[s.actualValueIndex].FieldInfos[0].MeasureFormatting:this.isActAsSlaveForAnyPoP?this.DataGroupInfo.FieldContainers[s.actualValueIndex].FieldInfos[0].MeasureFormatting:n.prototype.getDefaultMeasureFormat.call(this),h=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(o.Prefix),this.DataGroupInfo.DataSourceName),c=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(o.Suffix),this.DataGroupInfo.DataSourceName),e=this.getKPICardProperties(),l=BoldBIDashboard.DashboardUtil.encodeText(h),a=BoldBIDashboard.DashboardUtil.encodeText(c),v=BoldBIDashboard.DashboardUtil.encodeText(e.LeftCaptionSettings.Text),y=BoldBIDashboard.DashboardUtil.encodeText(e.RightCaptionSettings.Text),p=BoldBIDashboard.DashboardUtil.encodeText(e.TitleSettings.Text);this.kpiCardElement.BoldBIDashboardKPICard({actualValue:t,targetValue:i,hiddenColumns:r,animationSettings:{enableAnimation:this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage?!1:this.getKPICardProperties().AnimationSettings.EnableAnimation,animationDuration:this.getKPICardProperties().AnimationSettings.AnimationDuration},title:{text:u!==""?u:BoldBIDashboard.isNullOrUndefined(e.TitleSettings.Text)?"Card Title":p,foreground:this.IsCardConfigured()&&e.ColorCustomization!=null?this.validateColor(this.getConditionalFormattedColor(WidgetProperty[4],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u),e.TitleSettings.Color):e.TitleSettings.Color,visibility:this.getKPICardProperties().TitleSettings.Visibility,fontSize:this.getKPICardProperties().TitleSettings.FontSize,isColorCustomized:this.IsCardConfigured()&&!BoldBIDashboard.isNullOrUndefined(e.ColorCustomization)&&this.isCustomized(WidgetProperty[4])&&!BoldBIDashboard.isNullOrUndefined(this.getConditionalFormattedColor(WidgetProperty[4],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u)),fontSettings:this.IsCardConfigured()&&e.ColorCustomization!=null?JSON.parse(this.validateColor(this.getConditionalFormattedColor(WidgetProperty[6],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u),null)):null},leftValue:{caption:!BoldBIDashboard.isNullOrUndefined(e.LeftCaptionSettings.Text)&&e.LeftCaptionSettings.Text!==""?v:"Actual Value",type:e.LeftValueSettings.ValueType,visibility:e.LeftValueSettings.Visibility,captionVisibility:e.LeftCaptionSettings.Visibility,fontSize:e.LeftValueSettings.FontSize,captionFontSize:e.LeftCaptionSettings.FontSize,foreground:e.LeftValueSettings.Color,captionForeground:e.LeftCaptionSettings.Color,isValueFollowDirectionColor:e.LeftValueSettings.ColorType==="Direction Color",isCaptionFollowDirectionColor:e.LeftCaptionSettings.ColorType==="Direction Color"},rightValue:{caption:!BoldBIDashboard.isNullOrUndefined(e.RightCaptionSettings.Text)&&e.RightCaptionSettings.Text!==""?y:"Target Value",type:e.RightValueSettings.ValueType,visibility:e.RightValueSettings.Visibility,captionVisibility:e.RightCaptionSettings.Visibility,fontSize:e.RightValueSettings.FontSize,captionFontSize:e.RightCaptionSettings.FontSize,foreground:e.RightValueSettings.Color,captionForeground:e.RightCaptionSettings.Color,isValueFollowDirectionColor:e.RightValueSettings.ColorType==="Direction Color",isCaptionFollowDirectionColor:e.RightCaptionSettings.ColorType==="Direction Color"},icon:{visibility:e.IndicatorSettings.Visibility,color:this.IsCardConfigured()&&e.ColorCustomization!=null?this.validateColor(this.getCustomizedIcon(this.getConditionalFormattedColor(WidgetProperty[5],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u),2),e.IndicatorSettings.Color):e.IndicatorSettings.Color,followDirectionColor:e.IndicatorSettings.ColorType==="Direction Color",lowValueIcon:this.designerInstance.modules.util.getIconClassName(e.IndicatorSettings.LowValueType),highValueIcon:this.designerInstance.modules.util.getIconClassName(e.IndicatorSettings.HighValueType),neutralValueIcon:this.designerInstance.modules.util.getIconClassName(e.IndicatorSettings.WarningType),fontSize:e.IndicatorSettings.FontSize,placement:e.IndicatorSettings.Placement,position:e.IndicatorSettings.Position,customizedIcon:this.IsCardConfigured()&&e.ColorCustomization!=null?this.designerInstance.modules.util.getIconClassName(this.getCustomizedIcon(this.getConditionalFormattedColor(WidgetProperty[5],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u),1)):null,mode:this.IsCardConfigured()&&e.ColorCustomization!=null?this.validateColor(this.getCustomizedIcon(this.getConditionalFormattedColor(WidgetProperty[5],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u),0),"Default"):"Default",isIconCustomized:this.IsCardConfigured()&&!BoldBIDashboard.isNullOrUndefined(e.ColorCustomization)&&this.isCustomized(WidgetProperty[5])&&!BoldBIDashboard.isNullOrUndefined(this.getConditionalFormattedColor(WidgetProperty[5],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u))},kpiValue:{type:e.KPIValueSettings.ValueType,visibility:e.KPIValueSettings.Visibility,higherValueIsGood:!0,followDirectionColor:e.KPIValueSettings.ColorType==="Direction Color",fontSize:e.KPIValueSettings.FontSize,foreground:this.IsCardConfigured()&&e.ColorCustomization!=null?this.validateColor(this.getConditionalFormattedColor(WidgetProperty[2],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u),e.KPIValueSettings.Color):e.KPIValueSettings.Color,isColorCustomized:this.IsCardConfigured()&&!BoldBIDashboard.isNullOrUndefined(e.ColorCustomization)&&this.isCustomized(WidgetProperty[2])&&!BoldBIDashboard.isNullOrUndefined(this.getConditionalFormattedColor(WidgetProperty[2],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u))},valueRepresentation:{format:o.FormatType,representation:o.Unit,numberOfDecimals:BoldBIDashboard.isNullOrUndefined(o.DecimalPoints)?0:o.DecimalPoints,currencyCulture:o.Culture,decimalSeparator:{CurrentValue:o.DecimalSeparator.CurrentValue,AliasValue:o.DecimalSeparator.AliasValue},groupSeparator:{CurrentValue:o.GroupSeparator.CurrentValue,AliasValue:o.GroupSeparator.AliasValue},negativeValueFormat:"default",prefix:BoldBIDashboard.isNullOrUndefined(h)?"":l,suffix:BoldBIDashboard.isNullOrUndefined(c)?"":a,enableLakhsAndCroreRep:o.EnableLakhsAndCroreRep},size:{width:BoldBIDashboard.isNullOrUndefined(f)?this.kpiCardItem.width():f.width,height:BoldBIDashboard.isNullOrUndefined(f)?this.kpiCardItem.height():f.height},colorSettings:{highColor:e.ColorSettings.HighValueColor,lowColor:e.ColorSettings.LowValueColor,neutralColor:e.ColorSettings.NeutralColor},informationIcon:{visibility:this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.view},tooltip:{"class":e.ShowTooltip?"bbi-dbrd-designer-hoverable":"",attribute:"data-tooltip",text:"Expand the card horizontally to view the image."},separator:{color:e.SeparatorSettings.Color},sparkline:{data:this.getSparklineValue(u),type:"area",fill:this.IsCardConfigured()&&e.ColorCustomization!=null?this.validateColor(this.getConditionalFormattedColor(WidgetProperty[0],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u),e.SparklineSettings.Fill):e.SparklineSettings.Fill,visibility:e.SparklineSettings.Visibility,opacity:e.SparklineSettings.Opacity,followDirectionColor:e.SparklineSettings.ColorType==="Direction Color",isColorCustomized:this.IsCardConfigured()&&!BoldBIDashboard.isNullOrUndefined(e.ColorCustomization)&&this.isCustomized(WidgetProperty[0])&&!BoldBIDashboard.isNullOrUndefined(this.getConditionalFormattedColor(WidgetProperty[0],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u))},image:{mode:e.ImageSettings.ImageMode,data:this.IsCardConfigured()&&e.ColorCustomization!=null?this.validateColor(this.getCustomizedImage(this.getConditionalFormattedColor(WidgetProperty[7],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u)),this.getImageValue(u)):this.getImageValue(u),visibility:e.ImageSettings.Visibility,position:!BoldBIDashboard.isNullOrUndefined(e.ImageSettings.ImagePosition)&&e.ImageSettings.ImagePosition!==""?e.ImageSettings.ImagePosition:"Left",isImageCustomized:this.IsCardConfigured()&&!BoldBIDashboard.isNullOrUndefined(e.ColorCustomization)&&this.isCustomized(WidgetProperty[7])&&!BoldBIDashboard.isNullOrUndefined(this.getConditionalFormattedColor(WidgetProperty[7],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u))},backgroundSettings:{mode:e.BackgroundSettings.Image.ImageMode,image:this.IsCardConfigured()&&e.ColorCustomization!=null?this.validateColor(this.getCustomizedImage(this.getConditionalFormattedColor(WidgetProperty[8],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u)),this.getBackgroundImageValue(u)):this.getBackgroundImageValue(u),showImage:e.BackgroundSettings.Image.Visibility,color:this.IsCardConfigured()&&e.ColorCustomization!=null?this.validateColor(this.getConditionalFormattedColor(WidgetProperty[1],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u),e.BackgroundSettings.Color):e.BackgroundSettings.Color,opacity:e.BackgroundSettings.Transparency,isColorCustomized:this.IsCardConfigured()&&!BoldBIDashboard.isNullOrUndefined(e.ColorCustomization)&&this.isCustomized(WidgetProperty[1])&&!BoldBIDashboard.isNullOrUndefined(this.getConditionalFormattedColor(WidgetProperty[1],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u)),isImageCustomized:this.IsCardConfigured()&&!BoldBIDashboard.isNullOrUndefined(e.ColorCustomization)&&this.isCustomized(WidgetProperty[8])&&!BoldBIDashboard.isNullOrUndefined(this.getConditionalFormattedColor(WidgetProperty[8],e.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,u))},selected:this.bbdesigner$.proxy(this.onClick,this),isFixedLayout:e.IsFixedLayout,responsiveMargin:e.ResponsiveMargin})},t.prototype.onClick=function(n){var i=[n.PageX,n.PageY],t=[];this.getKPICardProperties().FilterSettings.ActAsMasterWidget&&t.push(WidgetAction.Filter);this.getKPICardProperties().UrlLink&&this.getKPICardProperties().UrlLink.EnableLink&&t.push(WidgetAction.Linking);this.widgetJson.ContainerSettings.ViewData&&t.push(WidgetAction.ViewData);BoldBIDashboard.Dashboard.WidgetHelper.createWidgetActionContextMenu(this.designerInstance,this,this.Name,t,n,i)},t.prototype.performSelectedWidgetAction=function(t,i,r,u){var f,e,o;switch(t){case WidgetAction.Filter.toString():i.isCurrentMaster=!0;this.performFilterAction(r);break;case WidgetAction.Linking.toString():u.model.mode!==BoldBIDashboard.Designer.mode.design&&(f=this.getLinkingData(r),n.prototype.performLinking.call(this,f));break;case WidgetAction.ViewData.toString():i.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(e=u.modules.viewDataDialog,o=this.showSelectItemsInViewData(r),e.showViewDataPopup(i,!1,o,!0))}},t.prototype.showSelectItemsInViewData=function(n){var t=[];return this.DataGroupInfo.FieldContainers[2].FieldInfos.length>0&&t.push({selectedItem:n.model.title.text,columnId:this.DataGroupInfo.FieldContainers[2].FieldInfos[0].Id,UniqueColumnName:this.DataGroupInfo.FieldContainers[2].FieldInfos[0].UniqueColumnName}),t},t.prototype.getLinkingData=function(n){var e=this,i={isEnabled:!1,parameterDetails:[],url:"",urlLinkInfo:[]},u,r,t,f;if(!BoldBIDashboard.isNullOrUndefined(this.widgetJson)&&(u=this.getConfiguredColumnsInfo(!1),this.widgetJson.UrlLink.EnableLink&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.UrlLink.GridUrlType)&&this.widgetJson.UrlLink.GridUrlType.toString()===UrlLinkType[UrlLinkType.Row]&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.UrlLink.UrlPath)&&this.widgetJson.UrlLink.UrlPath!==""))for(r=u.filter(function(n){return e.widgetJson.UrlLink.PassingParameters.indexOf(n.Value)!==-1}),i.url=this.widgetJson.UrlLink.UrlPath,i.isEnabled=!0,t=0;t<r.length;t++)f=this.getItemValue(r[t].Category,r[t].Id,n),i.parameterDetails.push({parameter:r[t].Value,value:f});return i.urlLinkInfo=this.widgetJson.UrlLink,i},t.prototype.getConfiguredColumnsInfo=function(n){var o=[],s,f,t,r,i;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length>0)for(s=this.DataGroupInfo.FieldContainers,f=0;f<s.length;f++)for(t=s[f].FieldInfos,r=this.DataGroupInfo.FieldContainers[f],i=0;i<t.length;i++)if(t.length>0&&!this.isDuplicate(o,t[i].DataField)&&(!n||t[i].FieldType==="Dimensions")){var h=t[i].SummaryType,c=t[i].DateTimeFormat,e=c!==DateTimeFormat[DateTimeFormat.None]?c:h!==SummaryType[SummaryType.NONE]?h:"",l=t[i].Name+(e!==""?"("+e+")":""),a=e+(e.length>1?"(":"")+t[i].Name+(e.length>1?")":""),u=r.Name;r.Name==="Series"?u="title":r.Name==="ActualValue"?u="actualValue":r.Name==="TargetValue"?u="targetValue":r.Name==="Tooltip"?u="hiddenColumns":r.Name==="Image"?u="Image":r.Name==="BackgroundImage"&&(u="BackgroundImage");o.push({Category:u,Name:l,Value:a,Id:t[i].UniqueColumnName,FieldName:t[i].Name})}return o},t.prototype.isDuplicate=function(n,t){for(var i=0;i<n.length;i++)if(n[i].Name===t)return!0;return!1},t.prototype.getItemValue=function(n,t,i){var u,r;if(!BoldBIDashboard.isNullOrUndefined(i.model))if(n==="hiddenColumns")for(r=0;r<i.model.hiddenColumns.length;r++)t===i.model.hiddenColumns[r].uniqueColumnName&&(u=i.model[n][r].value);else u=i.model[n].text;return u},t.prototype.performFilterAction=function(t){var u;if(!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.isNullOrUndefined(t.currentTarget)){if(this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;this.widgetJson.SelectedFilterValues=[];var i=this.bbdesigner$(t.currentTarget),f=[],o=[],s=[],r=i.parents(".bbi-kpicarditem").find(".bbi-kpicard-selected"),e=this.DataGroupInfo.FieldContainers;for(u=0;u<e.length;u++)if(e[u].Name==="Series"){f=e[u].FieldInfos[0];s[f.UniqueColumnName]=i.attr("data-value");o.push(f);break}r.length>0?(r.removeClass("bbi-kpicard-selected"),i.parents(".bbi-kpicarditem").find(".e-dbrd-selected-kpicard").remove(),i[0].id!==r[0].id&&i.addClass("bbi-kpicard-selected"),r=i.parents(".bbi-kpicarditem").find(".bbi-kpicard-selected")):(i.addClass("bbi-kpicard-selected"),r=i.parents(".bbi-kpicarditem").find(".bbi-kpicard-selected"));n.prototype.performInteraction.call(this,this,o,s)}},t.prototype.processFilterInformation=function(n){var r=this.DataGroupInfo.FieldContainers,s=n.filters,u=this.getColumnForWidgetFilterAPI(s,r),t=u[0],e=u[1],o=u[2],h=u[3],f,i;if(o.length>0)return t=[],e={},console.error("Given column name(s) ["+o+"] were not found in "+this.widgetJson.ContainerSettings.Title),!1;if(h&&(console.error("ColumnName should not be empty for API filtering"),t.length===0))return!1;if(t.length===0&&o.length===0)for(f=[],i=0;i<r.length;i++)if(r[i].Name==="Series"){f=r[i].FieldInfos[0];e[f.UniqueColumnName]=s[0].values[0];t.push(f);break}return this.widgetJson.SelectedFilterValues=[],this.masterFilterWindowInstance.configureSelectedFilterInfo(this.getJson(),t,e),!0},t.prototype.getSparklineValue=function(n){n===void 0&&(n="");var t=this.getBindedColumnIndex(this.DataGroupInfo);return this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[t.actualValueIndex].FieldInfos.length!==0&&this.DataGroupInfo.FieldContainers[t.targetValueIndex].FieldInfos.length!==0||this.isActAsSlaveForAnyPoP?this.DataGroupInfo.FieldContainers[t.seriesValueIndex].FieldInfos.length>0?this.DataGroupInfo.FieldContainers[t.sparklineValueIndex].FieldInfos.length>0?JSON.parse(this.dataValues.sparklineData[n]):null:this.DataGroupInfo.FieldContainers[t.sparklineValueIndex].FieldInfos.length>0?this.dataValues.sparklineData:null:[1,5,8,7,6,5,2,3,8,1]},t.prototype.gethiddencolumn=function(){for(var f=[],i=JSON.parse(this.dataValues.data),r=[],e=[],n=this.getBindedColumnIndex(this.DataGroupInfo),o=function(u){var s,o;for(r=Object.keys(i[u]),e=Object.keys(i[u]).map(function(n){return i[u][n]}),s=0;s<r.length;s++)for(o=0;o<t.DataGroupInfo.FieldContainers[n.hiddenColumnIndex].FieldInfos.length;o++)if(!BoldBIDashboard.isNullOrUndefined(t.DataGroupInfo.FieldContainers[n.hiddenColumnIndex].FieldInfos[o])&&r[s]===t.DataGroupInfo.FieldContainers[n.hiddenColumnIndex].FieldInfos[o].UniqueColumnName){var h=t.DataGroupInfo.FieldContainers[n.hiddenColumnIndex].FieldInfos[o].Name,c=t.DataGroupInfo.FieldContainers[n.hiddenColumnIndex].FieldInfos[o].UniqueColumnName,l=e[s];f.push({DisplayName:h,value:l,uniqueColumnName:c})}},t=this,u=0;u<i.length;u++)o(u);return f},t.prototype.getImageValue=function(n){n===void 0&&(n="");var t=this.getBindedColumnIndex(this.DataGroupInfo),i=this.IsCardConfigured();switch(this.getKPICardProperties().ImageSettings.ImageSource){case"URL":return this.getKPICardProperties().ImageSettings.ImageUrl;case"Parameterized URL":return this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[t.imageIndex].FieldInfos.length>0?i&&this.DataGroupInfo.FieldContainers[t.seriesValueIndex].FieldInfos.length>0?this.getImageForSeriesCard(this.getKPICardProperties().ImageSettings.URLPattern,this.dataValues.imageData,n,this.DataGroupInfo.FieldContainers[t.imageIndex].FieldInfos):this.getImageForSingleCard(this.getKPICardProperties().ImageSettings.URLPattern,this.dataValues.imageData,this.DataGroupInfo.FieldContainers[t.imageIndex].FieldInfos):this.getKPICardProperties().ImageSettings.URLPattern;case"Local":return BoldBIDashboard.Dashboard.Resource.getImage(this.getKPICardProperties().ImageSettings.FilePath)}},t.prototype.getBackgroundImageValue=function(n){n===void 0&&(n="");var t=this.getBindedColumnIndex(this.DataGroupInfo),i=this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[t.actualValueIndex].FieldInfos.length!==0&&this.DataGroupInfo.FieldContainers[t.targetValueIndex].FieldInfos.length!==0;switch(this.getKPICardProperties().BackgroundSettings.Image.ImageSource){case"URL":return this.getKPICardProperties().BackgroundSettings.Image.ImageUrl;case"Parameterized URL":return this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[t.backgroundImageIndex].FieldInfos.length>0?i&&this.DataGroupInfo.FieldContainers[t.seriesValueIndex].FieldInfos.length>0?this.getImageForSeriesCard(this.getKPICardProperties().BackgroundSettings.Image.URLPattern,this.dataValues.backgroundImageData,n,this.DataGroupInfo.FieldContainers[t.backgroundImageIndex].FieldInfos):this.getImageForSingleCard(this.getKPICardProperties().BackgroundSettings.Image.URLPattern,this.dataValues.backgroundImageData,this.DataGroupInfo.FieldContainers[t.backgroundImageIndex].FieldInfos):this.getKPICardProperties().BackgroundSettings.Image.URLPattern;case"Local":return BoldBIDashboard.Dashboard.Resource.getImage(this.getKPICardProperties().BackgroundSettings.Image.FilePath)}},t.prototype.getImageForSingleCard=function(n,t,i){for(var r=0;r<t.length;r++)n=BoldBIDashboard.isNullOrUndefined(JSON.parse(t[r])[0])?"":n.replace("{"+r+"}",JSON.parse(t[r])[0][i[r].UniqueColumnName]);return n},t.prototype.getImageForSeriesCard=function(n,t,i,r){for(var f,o=this.getBindedColumnIndex(this.DataGroupInfo),e,u=0;u<t.length;u++)for(e=JSON.parse(t[u]),f=0;f<e.length;f++)e[f][this.DataGroupInfo.FieldContainers[o.seriesValueIndex].FieldInfos[0].UniqueColumnName]===i&&(n=n.replace("{"+u+"}",e[f][r[u].UniqueColumnName]));return n},t.prototype.checkValidPattern=function(n,t){for(var u=!1,r=n.split(/{|}/),i=0;i<r.length;i++)if(!BoldBIDashboard.isNullOrUndefined(r[i])&&r[i]!==""&&!isNaN(r[i]))if(parseInt(r[i])<t.length)u=!0;else return!1;return u},t.prototype.validateBackgroundImagePattern=function(){var n=this.getBindedColumnIndex(this.DataGroupInfo),t=!1,i;this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[n.backgroundImageIndex].FieldInfos.length>0&&(i=this.DataGroupInfo.FieldContainers[n.backgroundImageIndex].FieldInfos,t=this.checkValidPattern(this.getKPICardProperties().BackgroundSettings.Image.URLPattern,i));t||this.designerInstance.modules.util.alertDialog("Dashboard Designer",this.locale.alertWindowMesages.imageURLPatternValidationMessage,IconType.information,AlertType.Alert,!1,"")},t.prototype.validateImagePattern=function(){var n=this.getBindedColumnIndex(this.DataGroupInfo),t=!1,i;this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[n.imageIndex].FieldInfos.length>0&&(i=this.DataGroupInfo.FieldContainers[n.imageIndex].FieldInfos,t=this.checkValidPattern(this.getKPICardProperties().ImageSettings.URLPattern,i));t||this.designerInstance.modules.util.alertDialog("Dashboard Designer",this.locale.alertWindowMesages.imageURLPatternValidationMessage,IconType.information,AlertType.Alert,!1,"")},t.prototype.updateKPICardSize=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this)?this.widgetContainerHelper.showControlError(this,this.dataValues):this.resizeKPICard()},t.prototype.updateItemDatGroupInfo=function(t,i){var o,u,f,e,r;if(n.prototype.updateDataGroupInfo.call(this,t,i),o=this.getBindedColumns(),u=this.getBindedColumnIndex(this.DataGroupInfo),!BoldBIDashboard.isNullOrUndefined(t.FieldContainers[u.imageIndex])&&t.FieldContainers[u.imageIndex].FieldInfos.length>0&&(f=t.FieldContainers[u.imageIndex].FieldInfos,t.FieldContainers[u.imageIndex].Name==="Image"))for(r=0;r<f.length;r++)(BoldBIDashboard.isNullOrUndefined(f[r].FilterInfo)||!BoldBIDashboard.isNullOrUndefined(f[r].FilterInfo.DimensionFilterInfo)&&BoldBIDashboard.isNullOrUndefined(f[r].FilterInfo.DimensionFilterInfo.TopNFilterInfo))&&!f[r].IsShowAllRecords&&t.FieldContainers[u.actualValueIndex].FieldInfos.length>0?(f[r].FilterInfo={},f[r].FilterInfo.DimensionFilterInfo=this.getDimensionFilterForImageAndBgImageField(t.FieldContainers[u.actualValueIndex],f[r])):BoldBIDashboard.isNullOrUndefined(f[r].FilterInfo)||BoldBIDashboard.isNullOrUndefined(f[r].FilterInfo.DimensionFilterInfo)||BoldBIDashboard.isNullOrUndefined(f[r].FilterInfo.DimensionFilterInfo.TopNFilterInfo)||t.FieldContainers[u.actualValueIndex].FieldInfos.length!==0||(f[r].FilterInfo=null);if(!BoldBIDashboard.isNullOrUndefined(t.FieldContainers[u.backgroundImageIndex])&&t.FieldContainers[u.backgroundImageIndex].FieldInfos.length>0&&(e=t.FieldContainers[u.backgroundImageIndex].FieldInfos,t.FieldContainers[u.backgroundImageIndex].Name==="BackgroundImage"))for(r=0;r<e.length;r++)(BoldBIDashboard.isNullOrUndefined(e[r].FilterInfo)||!BoldBIDashboard.isNullOrUndefined(e[r].FilterInfo.DimensionFilterInfo)&&BoldBIDashboard.isNullOrUndefined(e[r].FilterInfo.DimensionFilterInfo.TopNFilterInfo))&&!e[r].IsShowAllRecords&&t.FieldContainers[u.actualValueIndex].FieldInfos.length>0?(e[r].FilterInfo={},e[r].FilterInfo.DimensionFilterInfo=this.getDimensionFilterForImageAndBgImageField(t.FieldContainers[u.actualValueIndex],e[r])):BoldBIDashboard.isNullOrUndefined(e[r].FilterInfo)||BoldBIDashboard.isNullOrUndefined(e[r].FilterInfo.DimensionFilterInfo)||BoldBIDashboard.isNullOrUndefined(e[r].FilterInfo.DimensionFilterInfo.TopNFilterInfo)||t.FieldContainers[u.actualValueIndex].FieldInfos.length!==0||(e[r].FilterInfo=null);!BoldBIDashboard.isNullOrUndefined(o.actual)&&!BoldBIDashboard.isNullOrUndefined(o.series)&&o.actual.length>0&&o.series.length>0&&BoldBIDashboard.isNullOrUndefined(o.series[0].CustomSorting)&&(o.series[0].CustomSorting={CustomSortType:CustomSortType[CustomSortType.Field],CustomSortOrder:SortingOrder[SortingOrder.Descending],FieldName:o.actual[0].Name,FieldId:o.actual[0].Id,SummaryType:o.actual[0].SummaryType})},t.prototype.getDimensionFilterForImageAndBgImageField=function(n,t){return{IsAllowFilteringApplied:!1,IsConditionFilteringApplied:!1,IsTopNFilteringApplied:!0,AllowFilterInfo:{IsCheckAll:!0,IsInclude:!0,FilterValues:null},ConditionFilterInfo:{ColumnName:t.Name,SummaryType:SummaryType.SUM,ConditionSummaryType:NumberFilterOption.Equals,Values:["0"]},TopNFilterInfo:n.FieldInfos.length>0?{Mode:RankType.Top,NoOfRecords:1,ColumnName:n.FieldInfos.length>0?n.FieldInfos[0].Name:t.Name,ColumnId:n.FieldInfos.length>0?n.FieldInfos[0].Id:t.Id,SummaryType:n.FieldInfos.length>0?n.FieldInfos[0].SummaryType===SummaryType.NONE?SummaryType.SUM:n.FieldInfos[0].SummaryType:SummaryType.COUNT,IsBasedOnDateAndTimeField:!1,DateFormat:DateTimeFormatForFilter.Year}:null}},t.prototype.getBindedColumns=function(){var i,r,u,n,t;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers))for(n=0;n<this.DataGroupInfo.FieldContainers.length;n++)t=this.getFieldContainer(),this.DataGroupInfo.FieldContainers[n].Name===t[0].Name?i=this.DataGroupInfo.FieldContainers[n].FieldInfos:this.DataGroupInfo.FieldContainers[n].Name===t[1].Name?r=this.DataGroupInfo.FieldContainers[n].FieldInfos:this.DataGroupInfo.FieldContainers[n].Name===t[2].Name&&(u=this.DataGroupInfo.FieldContainers[n].FieldInfos);return{actual:i,target:r,series:u}},t.prototype.getBindedColumnIndex=function(n){var i=0,r=0,u=0,f=0,e=0,o=0,s=0,t;if(!BoldBIDashboard.isNullOrUndefined(n.FieldContainers))for(t=0;t<n.FieldContainers.length;t++)switch(n.FieldContainers[t].Name){case"ActualValue":i=t;break;case"TargetValue":r=t;break;case"Series":u=t;break;case"Tooltip":f=t;break;case"Sparkline":e=t;break;case"Image":o=t;break;case"BackgroundImage":s=t}return{actualValueIndex:i,targetValueIndex:r,seriesValueIndex:u,hiddenColumnIndex:f,sparklineValueIndex:e,imageIndex:o,backgroundImageIndex:s}},t.prototype.updateKPIData=function(n){var o=this.IsCardConfigured(),t=this.getBindedColumnIndex(this.DataGroupInfo),f,i,r,u,e;this.dataValues=n;BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this);this.kpiCardItem.show();BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this);this.designerInstance.modules.serialization.updateWidgetData(this.getKPICardProperties(),this.DataGroupInfo);this.isSeriesCardWithHeader=!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[t.seriesValueIndex])&&this.DataGroupInfo.FieldContainers[t.seriesValueIndex].FieldInfos.length>0&&this.widgetJson.ContainerSettings.ShowHeader;f={controlTitle:this.Name,controlId:this.Name,isControlMenuVisible:!1,isMaximizeEnable:!1,isFilterIconEnable:BoldBIDashboard.isNullOrUndefined(this.widgetJson.FilterSettings)?!1:this.widgetJson.FilterSettings.ActAsMasterWidget};this.kpiCardItem.hasClass("e-kpicard-single")||this.kpiCardItem.addClass("e-kpicard-single");this.kpiCardItem.data("BoldBIDashboardScroller")&&this.kpiCardItem.BoldBIDashboardScroller("destroy");this.destroyKPICard();this.updateControlContainerPadding();BoldBIDashboard.isNullOrUndefined(this.controlHeader)||(this.controlHeader[0].style.paddingLeft="0px",this.controlSubHeader[0].style.paddingLeft="0px",this.controlHeader.remove(),this.controlSubHeader.remove(),this.controlHeader=this.controlSubHeader=null);this.setContainerHeight();n.Error?(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.designPanelInstance.showControlError(this.contentContainer,n,this.CellInfo,n.OuterMessage)):(n.noDataAvailable?(this.kpiCardItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this)):(this.kpiCardItem.show(),o?(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),i=JSON.parse(n.data),r=Object.keys(JSON.parse(n.columnBindings)),this.isActAsSlaveForAnyPoP&&this.updatePoPColorSettings(this.isActAsSlaveForAnyPoP),this.DataGroupInfo.FieldContainers[t.seriesValueIndex].FieldInfos.length>0?(this.updateSeriesValue(f,i,r),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.propertyPanel.updateItemVisibility("KPICard","Title","TitleText",!1)):(this.widgetJson.ContainerSettings.Title=this.getKPICardProperties().TitleSettings.Text,this.updateTitleHeaderText(),this.renderKPICardElement(),this.renderControl(this.getActualValue(i,r),this.getTargetValue(i,r),this.gethiddencolumn()),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.propertyPanel.updateItemVisibility("KPICard","Title","TitleText",!0),this.updateHeaderForSingleCard(),this.updateCornerRadius(this.controlContainer)),u=this.kpiCardItem.data("BoldBIDashboardScroller"),BoldBIDashboard.isNullOrUndefined(u)||u.refresh(),this.updateContainerSettings(),this.updateIconContainerBackground()):(BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this),this.getKPICardProperties().EnableColorSettings=!1,this.renderKPICardElement(),this.updatePoPSlaveInfo(),this.isActAsSlaveForAnyPoP||this.renderControl(100,90,[]))),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.designerInstance.modules.util.updateAction("KPICard","Link","Link"),BoldBIDashboard.isNullOrUndefined(this.widgetJson.UrlLink)||!this.widgetJson.UrlLink.EnableLink||BoldBIDashboard.isNullOrUndefined(this.kpiCardItem)?this.kpiCardItem.removeClass("e-kpicard-cursor-pointer"):this.kpiCardItem.addClass("e-kpicard-cursor-pointer"));this.updateActasMasterFilterProperty();this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.updateContainerProperties(),this.setPropertyElement("Formatting","ColorSettings",this.getKPICardProperties().ColorCustomization),this.propertyPanel.updateCategoryVisibility("KPICard","Formatting",this.IsCardConfigured()),e=!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[t.seriesValueIndex])&&this.DataGroupInfo.FieldContainers[t.seriesValueIndex].FieldInfos.length>0,this.propertyPanel.updateCategoryVisibility("KPICard","SeriesSettings",e),this.propertyPanel.updateItemDisable("float","KPICard","RightValue","RightValueFontSize",this.getKPICardProperties().RightValueSettings.AutoFontSize),this.propertyPanel.updateItemDisable("float","KPICard","RightValue","RightCaptionFontSize",this.getKPICardProperties().RightCaptionSettings.AutoFontSize),this.propertyPanel.updateItemDisable("float","KPICard","LeftValue","LeftCaptionFontSize",this.getKPICardProperties().LeftCaptionSettings.AutoFontSize),this.propertyPanel.updateItemDisable("float","KPICard","LeftValue","LeftValueFontSize",this.getKPICardProperties().LeftValueSettings.AutoFontSize),this.propertyPanel.updateItemDisable("float","KPICard","KPIValue","KPIFontSize",this.getKPICardProperties().KPIValueSettings.AutoFontSize),this.propertyPanel.updateItemDisable("float","KPICard","Title","TitleFontSize",this.getKPICardProperties().TitleSettings.AutoFontSize),this.propertyPanel.updateItemDisable("float","KPICard","Indicator","IconFontSize",this.getKPICardProperties().IndicatorSettings.AutoFontSize))},t.prototype.updateHeaderForSingleCard=function(){if(this.ContentContainer.find(".bbi-dbrd-control-header").length===0){var n={controlTitle:this.widgetJson.ContainerSettings.Title,controlId:this.Name,isMaximizeEnable:!1,isFilterIconEnable:this.widgetJson.FilterSettings.ActAsMasterWidget};BoldBIDashboard.Dashboard.WidgetContainerHelper.iconContainerForNoHeader(n,this,this.designerInstance)}},t.prototype.updateTitleHeaderText=function(){!BoldBIDashboard.isNullOrUndefined(this.propertyPanel.headerInput)&&this.designerInstance.designerPanel.selectedReportItems[0]&&this.Name===this.designerInstance.designerPanel.selectedReportItems[0].attr("data-name")&&this.propertyPanel.headerInput.val(this.widgetJson.ContainerSettings.Title)},t.prototype.updateContainerSettings=function(){var n=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.widgetJson.ContainerSettings.TextAlignment),t=this.containerPropertyItem.getContainerTitleAlignmentValue(n);this.controlContainer.find(".bbi-dbrd-control-title").css({"text-align":n});this.controlContainer.find(".bbi-dbrd-control-title").css({color:this.widgetJson.ContainerSettings.TextColor});BoldBIDashboard.isNullOrUndefined(this.controlHeader)||this.controlHeader.find(".bbi-dbrd-control-title-wrapper").css({"justify-content":t});BoldBIDashboard.isNullOrUndefined(this.controlSubHeader)||this.controlSubHeader.find(".bbi-dbrd-control-sub-title").css({"justify-content":t})},t.prototype.updateSeriesValue=function(n,t){var v,f=[],u=[],y,p,l,w=[],s,r=this.getBindedColumnIndex(this.DataGroupInfo),ut=r.hiddenColumnIndex,b,o,k,h,e,d,i,c;for(n.controlTitle=this.widgetJson.ContainerSettings.Title,this.ContentContainer.find(".bbi-dbrd-control-header").remove(),BoldBIDashboard.Dashboard.WidgetContainerHelper.getControlHeader(n,this,this.designerInstance),BoldBIDashboard.Dashboard.WidgetContainerHelper.getControlSubHeader(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.updateTitleForHigherResolution(this),b=this.controlContainer.find(".bbi-dbrd-control-container-wrapper"),b[0].style.paddingTop=t.length===1&&!this.widgetJson.ContainerSettings.ShowHeader?"0px":this.getControlContainerPadding(),this.ControlHeader[0].style.marginLeft="12px",this.ControlHeader[0].style.marginRight="12px",this.controlSubHeader[0].style.marginLeft="12px",this.ControlHeader[0].style.width="Calc(100% - 24px)",this.ControlSubHeader[0].style.width="Calc(100% - 12px)",this.kpiCardItem.hasClass("e-kpicard-single")&&this.kpiCardItem.removeClass("e-kpicard-single"),o=this.kpiCardItem.parents(".bbi-dbrd-control-container").find(".bbi-dbrd-control-header"),o.find(".bbi-dbrd-controlIcon-container").css({"margin-right":"8px"}),this.widgetJson.FilterSettings.ActAsMasterWidget&&o.length!==0&&(o.find(".bbi-dbrd-controlIcon-container").css("display","block"),o.find(".bbi-remove-control-filter").css("display","block")),this.propertyPanel.setTitle(this.widgetJson),this.propertyPanel.setSubTitle(this.widgetJson,this.widgetJson.ContainerSettings.SubTitle),k=this.controlHeader.outerHeight(!0)+this.getControlSubHeaderHeight(),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getKPICardProperties().ContainerSettings.TextColor),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer),this.contentContainer.css({height:this.isSeriesCardWithHeader?"calc(100% - "+k+"px)":"100%","padding-top":t.length===1?"0px":this.getControlContainerPadding()}),this.widgetJson.ContainerSettings.ShowHeader||BoldBIDashboard.Dashboard.WidgetContainerHelper.disableHeader(this,this.designerInstance),h=this.getKPICardProperties().SeriesSettings,e=h.IsFixedRowsAndColumns&&t.length>=h.RowCount*h.ColumnCount?this.getFixedSizeOfSingleCard(t.length):this.getSizeOfSingleCard(t.length),this.kpiCardContent=BoldBIDashboard.buildTag("div.e-kpicardContent","",""),this.DataGroupInfo.FieldContainers[r.seriesValueIndex].FieldInfos.length!==0&&(v=this.DataGroupInfo.FieldContainers[r.seriesValueIndex].FieldInfos[0].UniqueColumnName),this.kpiCardItem.append(this.kpiCardContent),this.widgetJson.FilterSettings.ActAsMasterWidget&&this.widgetJson.SelectedFilterValues.length>0&&(s=this.getSelectedValue()),d=function(n){var o,c,h;for(i.kpiCardElement=BoldBIDashboard.buildTag("div.e-kpicard-series-element","",{width:e.width,height:e.height},{id:i.designerId+"kpicardElement"+i.widgetJson.UniqueName+"_"+n,"data-value":t[n][v]}),i.kpiCardContent.append(i.kpiCardElement),f=Object.keys(t[n]),u=Object.keys(t[n]).map(function(i){return t[n][i]}),o=0;o<f.length;o++)if(c=i.isActAsSlaveForAnyPoP?i.DataGroupInfo.FieldContainers[r.actualValueIndex].FieldInfos[0].UniqueColumnName+"_secondary":i.DataGroupInfo.FieldContainers[r.targetValueIndex].FieldInfos[0].UniqueColumnName,BoldBIDashboard.isNullOrUndefined(i.DataGroupInfo.FieldContainers[r.actualValueIndex].FieldInfos[0])||f[o]!==i.DataGroupInfo.FieldContainers[r.actualValueIndex].FieldInfos[0].UniqueColumnName)if(BoldBIDashboard.isNullOrUndefined(i.DataGroupInfo.FieldContainers[r.targetValueIndex].FieldInfos[0]||i.isActAsSlaveForAnyPoP)||f[o]!==c)if(BoldBIDashboard.isNullOrUndefined(i.DataGroupInfo.FieldContainers[r.seriesValueIndex].FieldInfos[0])||f[o]!==i.DataGroupInfo.FieldContainers[r.seriesValueIndex].FieldInfos[0].UniqueColumnName){if(i.DataGroupInfo.FieldContainers[ut].Name==="Tooltip")for(h=0;h<i.DataGroupInfo.FieldContainers[r.hiddenColumnIndex].FieldInfos.length;h++)if(!BoldBIDashboard.isNullOrUndefined(i.DataGroupInfo.FieldContainers[r.hiddenColumnIndex].FieldInfos[h])&&f[o]===i.DataGroupInfo.FieldContainers[r.hiddenColumnIndex].FieldInfos[h].UniqueColumnName){var a=i.DataGroupInfo.FieldContainers[r.hiddenColumnIndex].FieldInfos[h].Name,b=i.DataGroupInfo.FieldContainers[r.hiddenColumnIndex].FieldInfos[h].UniqueColumnName,k=u[o];w.push({DisplayName:a,value:k,uniqueColumnName:b})}}else l=u[o];else p=u[o]!=="(Blanks)"?u[o]:0;else y=u[o]!=="(Blanks)"?u[o]:0;BoldBIDashboard.isNullOrUndefined(s)||s===""||(BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(i),s===l&&i.bbdesigner$(i.kpiCardElement).addClass("bbi-kpicard-selected"));i.renderControl(y,p,w,l,e);(i.rowCount!==1||i.columnCount!==1)&&i.updateBorders(n+1,i.kpiCardElement,t.length)},i=this,c=0;c<t.length;c++)d(c);if(BoldBIDashboard.Dashboard.WidgetHelper.setLabelParameterId(this.controlHeader,this.designerInstance),BoldBIDashboard.Dashboard.WidgetHelper.setLabelParameterId(this.ControlSubHeader,this.designerInstance),this.kpiCardItem.data("BoldBIDashboardScroller")&&this.kpiCardItem.BoldBIDashboardScroller("destroy"),t.length>1&&this.kpiCardItem.BoldBIDashboardScroller({height:this.kpiCardItem.height(),autoHide:!0,scrollerSize:this.designerInstance.scrollerSize.scrollSize,cssClass:"bbi-dbrd-designer-scroller bbi-dbrd-control"}),this.designerInstance.model.dashboardFromData.isWidgetSpecific){var g=this.controlContainer.height(),ft=this.designerInstance.modules.Mode.designer.element.parent().height()-10-this.designerInstance.modules.Mode.designPanelTag.find(".bbi-dashboarddesigner-bannerPanel").height()==g,et=this.widgetHelper.getFirstWidgetHeight()==g,ot=this.designerInstance.modules.Mode.designCanvas.width()-10,nt=Math.round(ot/e.width),st=t.length/nt+t.length%nt,tt=st*e.height,a=this.designerInstance.modules.Mode.designer.element.parent().height()-10;this.contentContainer.css({height:tt});this.controlContainer.css({height:tt});var ht=this.controlContainer.height()%a,ct=a-ht,it=this.controlContainer.height()+ct,rt=this.controlContainer.height()/a*10-8;this.controlContainer.css({height:ft||et?it+rt-this.designerInstance.modules.Mode.designPanelTag.find(".bbi-dashboarddesigner-bannerPanel").height():it+rt})}},t.prototype.getSelectedValue=function(){for(var t=this.widgetJson.SelectedFilterValues,r=t.length,i="",n=0;n<r;n++)t[n].InitialDimensionFilter!==null&&t[n].InitialDimensionFilter.Text.length>0&&(i=t[n].InitialDimensionFilter.Text[0].toString()),t[n].InitialDateFilter!==null&&t[n].InitialDateFilter.DisplayDateFilterList.length>0&&(i=t[n].InitialDateFilter.DisplayDateFilterList[0]);return i},t.prototype.updateActasMasterFilterProperty=function(){if(this.widgetJson.FilterSettings.ActAsMasterWidget=this.canUseWidgetAsMaster()?this.widgetJson.FilterSettings.ActAsMasterWidget:!1,this.propertyPanel.isVisible()){var n={name:"ActAsMasterWidget",value:this.widgetJson.FilterSettings.ActAsMasterWidget};this.propertyPanel.setBoolean(null,null,"Filter",n,"KPICard")}this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.propertyPanel.updateItemVisibility("KPICard","Filter","ActAsMasterWidget",this.canUseWidgetAsMaster())},t.prototype.updateContainerProperties=function(){var n=this.getBindedColumnIndex(this.DataGroupInfo);this.propertyPanel.updateItemVisibility("KPICard","ContainerActions","CSVExport",!0);this.propertyPanel.updateItemVisibility("KPICard","ContainerActions","ExcelExport",!0);this.propertyPanel.updateItemVisibility("KPICard","ContainerActions","ImageExport",!0);this.propertyPanel.updateItemVisibility("KPICard","ContainerActions","PDFExport",!0);this.IsCardConfigured()&&this.DataGroupInfo.FieldContainers[n.seriesValueIndex].FieldInfos.length>0?(this.propertyPanel.updateItemVisibility("KPICard","ContainerAppearance","ContainerTitleAlign",!0),this.propertyPanel.updateItemVisibility("KPICard","ContainerAppearance","ContainerTitleColor",!0),this.propertyPanel.updateItemVisibility("KPICard","ContainerActions","ShowHeader",!0),this.propertyPanel.refreshScroller()):(this.propertyPanel.updateItemVisibility("KPICard","ContainerAppearance","ContainerTitleAlign",!1),this.propertyPanel.updateItemVisibility("KPICard","ContainerAppearance","ContainerTitleColor",!1),this.propertyPanel.updateItemVisibility("KPICard","ContainerActions","ShowHeader",!1),this.propertyPanel.refreshScroller())},t.prototype.onFieldDragAndDrop=function(n,t,i){var f=!0,u,e,r;if(!BoldBIDashboard.isNullOrUndefined(t))if(u="",BoldBIDashboard.isNullOrUndefined(n.FieldType)||n.FieldType!==FieldType.Dimensions){if(this.isActAsSlaveForAnyPoP)for(r=0;r<this.DataGroupInfo.FieldContainers.length;r++)u=this.DataGroupInfo.FieldContainers[r].Name===n.ContainerName?n.ContainerName.toLocaleLowerCase():"",u==="targetvalue"&&(this.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.SlaveWidgetOverrideTitle,this.locale.alertWindowMesages.resetKPIPoPMessage,IconType.question,AlertType.Confirm,!1,"",{height:140,width:500,method:"getDialogOutput",instance:this.designerInstance.modules.util,dataInfo:{eventObj:i,droppedItem:t}}),f=!1)}else for(r=0;r<this.DataGroupInfo.FieldContainers.length;r++)u=this.DataGroupInfo.FieldContainers[r].Name===n.ContainerName?n.ContainerName.toLocaleLowerCase():"",u==="image"?this.getKPICardProperties().ImageSettings.ImageSource==="Local"&&this.getKPICardProperties().ImageSettings.ImageName!==""||this.getKPICardProperties().ImageSettings.ImageSource==="URL"&&this.getKPICardProperties().ImageSettings.ImageUrl!==""?(this.designerInstance.modules.util.alertDialog(this.locale.kpiCardImageSettingsReset.titleText,this.locale.kpiCardImageSettingsReset.dialogContentText,IconType.question,AlertType.Confirm,!1,"",{height:140,width:500,method:"canResetImageSettings",instance:this,dataInfo:{eventObject:i,droppedItem:t,fieldInfo:n}}),f=!1):(e={categoryName:"Image"},this.resetImageProperties(e),this.updateImageSource("Parameterized URL"),this.setPropertyElement("Image","ImageSource","Parameterized URL"),this.setPropertyElement("Image","ShowImage",!0),this.updateImageVisibility(!0)):u==="backgroundimage"&&(this.getKPICardProperties().BackgroundSettings.Image.ImageSource==="Local"&&this.getKPICardProperties().BackgroundSettings.Image.ImageName!==""||this.getKPICardProperties().BackgroundSettings.Image.ImageSource==="URL"&&this.getKPICardProperties().BackgroundSettings.Image.ImageUrl!==""?(this.designerInstance.modules.util.alertDialog(this.locale.kPICardBackgroundImageSettingsReset.titleText,this.locale.kPICardBackgroundImageSettingsReset.dialogContentText,IconType.question,AlertType.Confirm,!1,"",{height:140,width:500,method:"canResetImageSettings",instance:this,dataInfo:{eventObject:i,droppedItem:t,fieldInfo:n}}),f=!1):(e={categoryName:"Background"},this.resetBackgroundImageProperties(e),this.updateBackgroundImageSource("Parameterized URL"),this.setPropertyElement("Background","BackgroundImageSource","Parameterized URL"),this.setPropertyElement("Background","ShowBackgroundImage",!0),this.backgroundImageVisibility(!0)));return f},t.prototype.canResetImageSettings=function(n,t){var r,i;n&&(r=this.getBindedColumnIndex(this.DataGroupInfo),this.designerInstance.dragDropHelper.dragStop(t.eventObject,n,t.droppedItem),t.fieldInfo.ContainerName.toLowerCase()==="image"?(n=this.DataGroupInfo.FieldContainers[r.imageIndex].FieldInfos.length>0?!1:n,i={categoryName:"Image"},this.resetImageProperties(i),this.updateImageSource("Parameterized URL"),this.setPropertyElement("Image","ImageSource","Parameterized URL"),this.setPropertyElement("Image","ShowImage",!0),this.updateImageVisibility(!0)):t.fieldInfo.ContainerName.toLowerCase()==="backgroundimage"&&(n=this.DataGroupInfo.FieldContainers[r.backgroundImageIndex].FieldInfos.length>0?!1:n,i={categoryName:"Background"},this.resetBackgroundImageProperties(i),this.updateBackgroundImageSource("Parameterized URL"),this.setPropertyElement("Background","BackgroundImageSource","Parameterized URL"),this.setPropertyElement("Background","ShowBackgroundImage",!0),this.backgroundImageVisibility(!0)))},t.prototype.setPropertyElement=function(n,t,i,r){var u,f;this.designPanelInstance.selectedReportItems.length>0&&this.Name===this.designPanelInstance.selectedReportItems[0].attr("data-name")&&(this.propertyPanel.canUpdate=!1,u=this.propertyPanel.getPropertyElement(this.KPICardPropertyPanel(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r),u.value=i,f=this.bbdesigner$.extend(!0,{},u),f.categoryName=n,this.propertyPanel.updatePropertyValue(f,"KPICard",i),this.propertyPanel.canUpdate=!0)},t.prototype.updateSeriesCardProperty=function(n){for(var i,t=0;t<this.kpiCardContent.children().length;t++)i=this.bbdesigner$(this.kpiCardContent.children()[t]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(n)},t.prototype.resizeKPICard=function(){var r=this.designerInstance.modules.themeHelper.getKPICardLeftLabelFont(),a=this.getKPICardProperties().LeftCaptionSettings.AutoFontSize?BoldBIDashboard.isNullOrUndefined(r.size)||r.size===""?this.getFontSizeBasedOnResolution().split("px")[0]:r.size.split("px")[0]:this.getKPICardProperties().LeftCaptionSettings.FontSize,u=this.designerInstance.modules.themeHelper.getKPICardLeftValueFont(),v=this.getKPICardProperties().LeftValueSettings.AutoFontSize?BoldBIDashboard.isNullOrUndefined(u.size)||u.size===""?this.getFontSizeBasedOnResolution().split("px")[0]:u.size.split("px")[0]:this.getKPICardProperties().LeftValueSettings.FontSize,f=this.designerInstance.modules.themeHelper.getKPICardRightValueFont(),y=this.getKPICardProperties().RightValueSettings.AutoFontSize?BoldBIDashboard.isNullOrUndefined(f.size)||f.size===""?this.getFontSizeBasedOnResolution().split("px")[0]:f.size.split("px")[0]:this.getKPICardProperties().RightValueSettings.FontSize,e=this.designerInstance.modules.themeHelper.getKPICardRightLabelFont(),p=this.getKPICardProperties().RightCaptionSettings.AutoFontSize?BoldBIDashboard.isNullOrUndefined(e.size)||e.size===""?this.getFontSizeBasedOnResolution().split("px")[0]:e.size.split("px")[0]:this.getKPICardProperties().RightCaptionSettings.FontSize,o=this.designerInstance.modules.themeHelper.getKPICardKPIValueFont(),w=this.getKPICardProperties().KPIValueSettings.AutoFontSize?BoldBIDashboard.isNullOrUndefined(o.size)||o.size===""?this.getKPIFontSizeBasedOnResolution():o.size.split("px")[0]:this.getKPICardProperties().KPIValueSettings.FontSize,s=this.designerInstance.modules.themeHelper.getKPICardTitleFont(),b=this.getKPICardProperties().TitleSettings.AutoFontSize?BoldBIDashboard.isNullOrUndefined(s.size)||s.size===""?this.getFontSizeBasedOnResolution().split("px")[0]:s.size.split("px")[0]:this.getKPICardProperties().TitleSettings.FontSize,k=this.getKPICardProperties().IndicatorSettings.AutoFontSize?this.getIndicatorFontSizeBasedOnResolution():this.getKPICardProperties().IndicatorSettings.FontSize,n,t,i,l;if(this.kpiCardContent!=null){this.kpiCardItem.css({width:"100%",height:"100%"});var h=this.kpiCardContent.children().length,c=this.getKPICardProperties().SeriesSettings,l={size:c.IsFixedRowsAndColumns&&c.RowCount*c.ColumnCount<=h?this.getFixedSizeOfSingleCard(h):this.getSizeOfSingleCard(h),title:{fontSize:b},leftValue:{fontSize:v,captionFontSize:a},rightValue:{fontSize:y,captionFontSize:p},kpiValue:{fontSize:w},icon:{fontSize:k}};for(this.kpiCardContent.css({width:this.kpiCardItem.width(),height:this.kpiCardItem.height()}),n=0;n<this.kpiCardContent.children().length;n++)this.bbdesigner$(this.kpiCardContent.children()[n]).hasClass("e-kpicard")&&((this.rowCount!==1||this.columnCount!==1)&&this.updateBorders(n+1,this.bbdesigner$(this.kpiCardContent.children()[n]),this.kpiCardContent.children().length),i=this.bbdesigner$(this.kpiCardContent.children()[n]).data("BoldBIDashboardKPICard"),i.setModel(l));this.updateControlContainerPadding();t=this.kpiCardItem.data("BoldBIDashboardScroller");BoldBIDashboard.isNullOrUndefined(t)||(t.model.height=this.kpiCardItem.height(),t.model.scrollerSize=this.designerInstance.scrollerSize.scrollSize,t.model.autoHide=!0,t.refresh())}else i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||(l={size:{height:this.kpiCardItem.height(),width:this.kpiCardItem.width()},title:{fontSize:b},leftValue:{fontSize:v,captionFontSize:a},rightValue:{fontSize:y,captionFontSize:p},kpiValue:{fontSize:w},icon:{fontSize:k}},i.setModel(l))},t.prototype.getControlContainerPadding=function(){var n=4;return this.cellInfo.RowSpan>=6*n&&this.cellInfo.ColumnSpan>=6*n?"24px":this.cellInfo.RowSpan>=5*n&&this.cellInfo.ColumnSpan>=5*n?"16px":this.cellInfo.RowSpan>4*n&&this.cellInfo.ColumnSpan>4*n?"16px":this.cellInfo.RowSpan>=3*n&&this.cellInfo.ColumnSpan>=3*n?"12px":this.cellInfo.RowSpan>=2*n&&this.cellInfo.ColumnSpan>=2*n?"12px":"8px"},t.prototype.updateBorders=function(n,t,i){var r,u;t.hasClass("e-kpicard-border-right")&&t.removeClass("e-kpicard-border-right");t.hasClass("e-kpicard-border-top")&&t.removeClass("e-kpicard-border-top");t.hasClass("e-kpicard-border-bottom")&&t.removeClass("e-kpicard-border-bottom");this.isWidthExceed?(r=this.columnCount===1?this.rowCount-1:this.rowCount===1?this.columnCount-1:i%this.columnCount==0?i-this.columnCount:i-i%this.columnCount,this.columnCount>=n&&!0&&t.addClass("e-kpicard-border-top"),this.rowCount!==1&&(r>=n||this.columnCount>=n)&&t.addClass("e-kpicard-border-bottom"),n%this.columnCount!=0&&t.addClass("e-kpicard-border-right")):(u=this.isPrime(i),r=this.columnCount===1?this.rowCount-1:this.rowCount===1?this.columnCount-1:u?i-i%this.columnCount:i-this.columnCount,n<=this.columnCount&&!0&&t.addClass("e-kpicard-border-top"),(this.rowCount!==1&&(r>=n||n<=this.columnCount)||this.columnCount===1&&this.rowCount!==n)&&t.addClass("e-kpicard-border-bottom"),this.designerInstance.model.dashboardFromData.isWidgetSpecific&&(r=i,(this.rowCount!==1&&(r>=n||n<=this.columnCount)||this.columnCount===1&&this.rowCount!==n)&&t.addClass("e-numbercard-border-bottom")),(n<this.columnCount||n%this.columnCount!=0||this.columnCount!==1&&this.rowCount!==1&&n===i&&u)&&t.addClass("e-kpicard-border-right"));t.hasClass("e-kpicard-margin-right")&&t.removeClass("e-kpicard-margin-right");t.hasClass("e-kpicard-margin-left")&&t.removeClass("e-kpicard-margin-left");n%this.columnCount==0&&t.addClass("e-kpicard-margin-right");(n===1||n%this.columnCount==1||this.columnCount===1)&&t.addClass("e-kpicard-margin-left")},t.prototype.isPrime=function(n){for(var t=2;t<n;t++)if(n%t==0)return!1;return!0},t.prototype.getFixedSizeOfSingleCard=function(n){var i=this.bbdesigner$(this.kpiCardItem).width()-14,r=this.bbdesigner$(this.kpiCardItem).height(),t=this.getKPICardProperties().SeriesSettings,u=i/t.ColumnCount,f=r/t.RowCount;return this.columnCount=t.ColumnCount,this.rowCount=n%this.columnCount==0?n/this.columnCount:n/this.columnCount+n%this.columnCount,{height:f,width:u}},t.prototype.getSizeOfSingleCard=function(n){var h,o,f;this.isWidthExceed=!1;var c=this.getBindedColumnIndex(this.DataGroupInfo),l=this.DataGroupInfo.FieldContainers[c.seriesValueIndex].FieldInfos.length,t=l>0?n:1,i,r=this.bbdesigner$(this.kpiCardItem).width()-14,s=this.getKPICardProperties().ImageSettings.Visibility?300:192,u=r<s?r:s,e=Math.floor(r/u);if(i=this.getWidth(t,e),i>534&&(this.isWidthExceed=!0,this.columnCount=r/u>t?t:Math.floor(r/u),this.rowCount=t%this.columnCount==0?Math.floor(t/this.columnCount):Math.floor(t/this.columnCount)+1,h=(r-u*this.columnCount)/this.columnCount,i=u+h),o=this.bbdesigner$(this.kpiCardItem).height(),f=this.getHeight(o),f>i)while(f>i){if(e--,e===0)break;i=this.getWidth(t,e);f=this.getHeight(o)}return{height:f,width:i}},t.prototype.getHeight=function(n){var r,u=this.getFontBasedHeight(),t=n<u?n:u,i=Math.floor(n/t),f=n%t,e;return i>this.rowCount?r=t+(n-this.rowCount*t)/this.rowCount:i<this.rowCount?r=t+f/i:(e=f/i,r=t+e),this.visibleRowsCount=i,r},t.prototype.getFontBasedHeight=function(){var e,o,t=1.5,n=this.getKPICardProperties(),v=n.LeftValueSettings.Visibility||n.LeftCaptionSettings.Visibility||n.RightValueSettings.Visibility||n.LeftCaptionSettings.Visibility||(n.IndicatorSettings.Placement==="Left"||n.IndicatorSettings.Placement==="Right")&&n.IndicatorSettings.Visibility,h=n.KPIValueSettings.Visibility||n.ImageSettings.Visibility||n.IndicatorSettings.Visibility&&n.IndicatorSettings.Placement==="KPI Value",c=v&&(h||n.TitleSettings.Visibility)?36:10,s,i,a;h&&n.TitleSettings.Visibility&&(c+=8);s=n.ImageSettings.Visibility?40:0;i=n.KPIValueSettings.Visibility?n.KPIValueSettings.FontSize*t:0;i=s>i?s:i;var y=n.TitleSettings.Visibility?n.TitleSettings.FontSize*t:0,p=n.LeftCaptionSettings.Visibility?n.LeftCaptionSettings.FontSize*t:0,u=n.LeftValueSettings.Visibility?n.LeftValueSettings.FontSize*t:0,w=n.RightCaptionSettings.Visibility?n.RightCaptionSettings.FontSize*t:0,f=n.RightValueSettings.Visibility?n.RightValueSettings.FontSize*t:0,l=this.getBindedColumnIndex(this.DataGroupInfo),b=!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[l.sparklineValueIndex])&&this.DataGroupInfo.FieldContainers[l.sparklineValueIndex].FieldInfos.length>0,k=n.SparklineSettings.Visibility&&b?37:0,r=n.IndicatorSettings.Visibility?n.IndicatorSettings.FontSize*t:0;switch(n.IndicatorSettings.Placement){case"Left Value":u=u>r?u:r;break;case"Right Value":f=f>r?f:r*t;break;default:i=i>r?i:r}return e=p+u,o=w+f,a=e>o?e:o,y+i+a+c+k},t.prototype.getWidth=function(n,t){var r,u,i=this.bbdesigner$(this.kpiCardItem).width()-14,o=this.getKPICardProperties().ImageSettings.Visibility?382:192,f=i<o?i:o,s,e,h,c;if(this.rowCount=Math.floor(n/t),s=i%f,e=n===1?!1:this.isPrime(n),n>t){for(n=e?n-1:n,r=n%t;r!==0;)t--,r=n%t;u=(i-(t-1))/t;this.rowCount=e?Math.floor(n/t)+1:Math.floor(n/t);this.columnCount=t}else h=t-n,c=h*f,this.rowCount=1,this.columnCount=n,u=f+c/n+s/n;return u},t.prototype.getActualValue=function(n,t){for(var r,u=this.getBindedColumnIndex(this.DataGroupInfo),i=0;i<t.length;i++)this.DataGroupInfo.FieldContainers[u.actualValueIndex].FieldInfos[0].UniqueColumnName===t[i]&&(r=n[0][t[i]]!=="(Blanks)"&&n[0][t[i]]!==null?n[0][t[i]]:0);return r},t.prototype.getTargetValue=function(n,t){for(var f,r,u=this.getBindedColumnIndex(this.DataGroupInfo),i=0;i<t.length;i++)f=this.isActAsSlaveForAnyPoP?this.DataGroupInfo.FieldContainers[u.actualValueIndex].FieldInfos[0].UniqueColumnName+"_secondary":this.DataGroupInfo.FieldContainers[u.targetValueIndex].FieldInfos[0].UniqueColumnName,f===t[i]&&(r=this.isActAsSlaveForAnyPoP?n[0][t[i]]:n[0][t[i]]!=="(Blanks)"&&n[0][t[i]]!==null?n[0][t[i]]:0);return r},t.prototype.setContainerHeight=function(){var n=10;!BoldBIDashboard.isNullOrUndefined(this.controlHeader)&&this.isSeriesCardWithHeader&&(n=this.controlHeader.outerHeight(!0)+this.getControlSubHeaderHeight());this.contentContainer.css({height:this.isSeriesCardWithHeader?"calc(100% - "+n+"px)":"100%"});this.kpiCardItem.css({height:this.isSeriesCardWithHeader?"calc(100% - "+n+"px)":"100%"})},t.prototype.getControlSubHeaderHeight=function(){var n=0;return!BoldBIDashboard.isNullOrUndefined(this.widgetJson.ContainerSettings.SubTitle)&&this.widgetJson.ContainerSettings.SubTitle.trim().length>0&&this.widgetJson.ContainerSettings.Bounds.RowSpan>8?(n=this.controlSubHeader.outerHeight(!0),this.controlSubHeader.css("display","block")):this.controlSubHeader.css("display","none"),n},t.prototype.destroyKPICard=function(){var n=this.kpiCardElement.data("BoldBIDashboardKPICard");BoldBIDashboard.isNullOrUndefined(n)||n.destroy();this.kpiCardElement.remove();BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)||(this.kpiCardContent.remove(),this.kpiCardContent=null)},t.prototype.getKPICardProperties=function(){return this.widgetJson},t.prototype.KPICardPropertyPanel=function(){var f=this,t=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.widgetJson.FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo,this.widgetJson.ContainerSettings),i=this.getBindedColumnIndex(this.DataGroupInfo),r,u;return this.containerPropertyItem=t.containerProperties,t.propertyGridItems.Header=this.widgetJson.ContainerSettings.Title,t.propertyGridItems.SubTitle=this.widgetJson.ContainerSettings.SubTitle,t.propertyGridItems.Description=this.widgetJson.ContainerSettings.Description,t.propertyGridItems.Type="KPICard",t.linkingProperty.Items[0].value=n.prototype.useExistingLink.call(this),r=BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem.getInterWidgetLinkingProperty(this.locale.propertyPanel.linking.interWidgetLinkingText,!0),r.Items[0].value=n.prototype.useExistingWidgetLinking.call(this),u=this.DataGroupInfo,this.bbdesigner$.each(t.containerActionsProperty.Items,function(n,t){BoldBIDashboard.isNullOrUndefined(t.isVisible)||(t.isVisible=!1);(t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ImageExport"||t.name==="PDFExport"||t.name==="ViewData"||t.name==="ShowMaximize"||t.name==="PinWidget")&&(t.isVisible=!0);t.name==="ShowHeader"&&!BoldBIDashboard.isNullOrUndefined(f.DataGroupInfo.FieldContainers[i.seriesValueIndex])&&f.DataGroupInfo.FieldContainers[i.seriesValueIndex].FieldInfos.length>0&&(t.isVisible=!0)}),this.bbdesigner$.each(t.containerSettingsProperty.Items,function(n,t){BoldBIDashboard.isNullOrUndefined(t.isVisible)||(t.isVisible=!1);(t.name==="ContainerTitleAlign"||t.name==="ContainerTitleColor")&&u.FieldContainers.length>2&&u.FieldContainers[i.seriesValueIndex].FieldInfos.length!==0&&(t.isVisible=!0);t.name==="ShowShadow"&&(t.isVisible=!0)}),t.propertyGridItems.Items=[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"ShowTooltip",displayName:this.locale.propertyPanel.basicSettings.showTooltip,value:this.getKPICardProperties().ShowTooltip,itemType:"bool"},{name:"FixedLayout",displayName:this.locale.propertyPanel.kpiBasicSettings.fixedLayout,value:this.getKPICardProperties().IsFixedLayout,itemType:"bool"},{name:"ResponsiveMargin",displayName:this.locale.propertyPanel.kpiBasicSettings.responsiveMargin,value:this.getKPICardProperties().ResponsiveMargin,isVisible:this.getKPICardProperties().IsFixedLayout,itemType:"bool"}]},{CategoryName:"Color Settings",DisplayName:this.locale.propertyPanel.colorSettingsText,Items:[{name:"Direction",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.colorSettings.direction,value:this.getKPICardProperties().Direction,itemType:"dropdown",valueList:["High is Good","Low is Good"]},{name:"HighValueColor",isVisible:!0,displayName:this.locale.propertyPanel.colorSettings.highColor,value:this.getKPICardProperties().ColorSettings.HighValueColor,itemType:"color"},{name:"NeutralColor",isVisible:!0,displayName:this.locale.propertyPanel.colorSettings.mediumColor,value:this.getKPICardProperties().ColorSettings.NeutralColor,itemType:"color"},{name:"LowValueColor",isVisible:!0,displayName:this.locale.propertyPanel.colorSettings.lowColor,value:this.getKPICardProperties().ColorSettings.LowValueColor,itemType:"color"},{name:"SeparatorColor",isVisible:!0,displayName:this.locale.propertyPanel.colorSettings.separatorColor,value:this.getKPICardProperties().SeparatorSettings.Color,itemType:"color"}]},{CategoryName:"Formatting",DisplayName:this.locale.propertyPanel.formattingCategoryText,IsVisible:this.IsCardConfigured(),Items:[{name:"ColorSettings",callbackInstance:this,callbackMethod:"renderDefaultColorSettings",itemType:"object",elementType:"KPICard"},]},{CategoryName:"Title",DisplayName:this.locale.propertyPanel.titleCategoryText,Items:[{name:"ShowTitle",displayName:this.locale.propertyPanel.cardTitleSettings.showTitle,value:this.getKPICardProperties().TitleSettings.Visibility,itemType:"bool"},{name:"TitleText",isDisable:!1,isVisible:this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[i.seriesValueIndex].FieldInfos.length!==0?!1:!0,displayName:this.locale.propertyPanel.cardTitleSettings.titleText,value:BoldBIDashboard.isNullOrUndefined(this.getKPICardProperties().TitleSettings.Text)||this.getKPICardProperties().TitleSettings.Text===""?"Card Title":this.getKPICardProperties().TitleSettings.Text,itemType:"string"},{name:"TitleColor",isVisible:!0,displayName:this.locale.propertyPanel.cardTitleSettings.titleColor,value:this.getKPICardProperties().TitleSettings.Color,itemType:"color"},{name:"TitleAutoFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,value:this.getKPICardProperties().TitleSettings.AutoFontSize,itemType:"bool"},{name:"TitleFontSize",isVisible:!0,displayName:this.locale.propertyPanel.cardTitleSettings.titleFontSize,isDisable:this.getKPICardProperties().TitleSettings.AutoFontSize,value:this.getKPICardProperties().TitleSettings.FontSize,itemType:"float",decimalPlaces:0,minimum:8,maximum:72,unitType:"px"},]},{CategoryName:"SeriesSettings",DisplayName:this.locale.propertyPanel.seriesSettingsCategory,IsVisible:this.IsCardConfigured()&&this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[i.seriesValueIndex].FieldInfos.length>0,Items:[{name:"EnableFixedSeries",displayName:this.locale.propertyPanel.seriesSettings.fixedRowsAndColumnsText,value:this.getKPICardProperties().SeriesSettings.IsFixedRowsAndColumns,itemType:"bool"},{name:"FixedRowCount",isVisible:this.getKPICardProperties().SeriesSettings.IsFixedRowsAndColumns,displayName:this.locale.propertyPanel.seriesSettings.rowCountText,value:this.getKPICardProperties().SeriesSettings.RowCount,itemType:"float",decimalPlaces:0,interval:1,minimum:1,maximum:15},{name:"FixedColumnCount",isVisible:this.getKPICardProperties().SeriesSettings.IsFixedRowsAndColumns,displayName:this.locale.propertyPanel.seriesSettings.columnCountText,value:this.getKPICardProperties().SeriesSettings.ColumnCount,itemType:"float",decimalPlaces:0,interval:1,minimum:1,maximum:15},]},{CategoryName:"Animation Settings",DisplayName:this.locale.propertyPanel.animationText,Items:[{name:"EnableAnimation",displayName:this.locale.propertyPanel.animationSettings.enableAnimation,value:this.getKPICardProperties().AnimationSettings.EnableAnimation,itemType:"bool"},{name:"AnimationDuration",displayName:this.locale.propertyPanel.animationSettings.animationDuration,value:this.getKPICardProperties().AnimationSettings.AnimationDuration,itemType:"float",decimalPlaces:0,minimum:1e3,maximum:5e3,unitType:"px"},]},{CategoryName:"KPI Value",DisplayName:this.locale.propertyPanel.kpiValueText,Items:[{name:"ShowKPI",displayName:this.locale.propertyPanel.kpiValueSettings.showKPI,value:this.getKPICardProperties().KPIValueSettings.Visibility,itemType:"bool"},{name:"KPIType",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.kpiValueSettings.kpiType,value:this.getKPICardProperties().KPIValueSettings.ValueType,itemType:"dropdown",valueList:["Absolute Difference","Percent of Difference","Percent of Target","Actual Value","Target Value","Percent of Change"]},{name:"KPIValueColorOption",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.kpiValueSettings.kpiValueColorOption,value:this.getKPICardProperties().KPIValueSettings.ColorType,itemType:"dropdown",valueList:["Direction Color","Custom Color"]},{name:"KPIValueColor",isVisible:this.getKPICardProperties().KPIValueSettings.ColorType==="Custom Color",displayName:this.locale.propertyPanel.kpiValueSettings.kpiValueColor,value:this.getKPICardProperties().KPIValueSettings.Color,itemType:"color"},{name:"KPIAutoFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,value:this.getKPICardProperties().KPIValueSettings.AutoFontSize,itemType:"bool"},{name:"KPIFontSize",isVisible:!0,isDisable:this.getKPICardProperties().KPIValueSettings.AutoFontSize,displayName:this.locale.propertyPanel.kpiValueSettings.kpiFontSize,value:this.getKPICardProperties().KPIValueSettings.FontSize,itemType:"float",decimalPlaces:0,minimum:8,maximum:72,unitType:"px"},]},{CategoryName:"Indicator",DisplayName:this.locale.propertyPanel.indicator,Items:[{name:"showIcon",displayName:this.locale.propertyPanel.indicatorSettings.showIcon,value:this.getKPICardProperties().IndicatorSettings.Visibility,itemType:"bool"},{name:"IndicatorPlacement",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.indicatorSettings.indicatorPlacement,value:this.getKPICardProperties().IndicatorSettings.Placement,itemType:"dropdown",valueList:["Left Value","Right Value","KPI Value"]},{name:"IndicatorPosition",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.indicatorSettings.indicatorPosition,value:this.getKPICardProperties().IndicatorSettings.Position,itemType:"dropdown",valueList:["Left","Right"]},{name:"IndicatorColorOption",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.indicatorSettings.indicatorColorOption,value:this.getKPICardProperties().IndicatorSettings.ColorType,itemType:"dropdown",valueList:["Direction Color","Custom Color"]},{name:"IndicatorColor",isVisible:this.getKPICardProperties().IndicatorSettings.ColorType==="Custom Color",displayName:this.locale.propertyPanel.indicatorSettings.indicatorColor,value:this.getKPICardProperties().IndicatorSettings.Color,itemType:"color"},{name:"HighValueIcon",displayName:this.locale.propertyPanel.indicatorSettings.highValueIcon,isVisible:!0,itemType:"object",callbackInstance:this,callbackMethod:"renderHighValueIconDropDown"},{name:"LowValueIcon",displayName:this.locale.propertyPanel.indicatorSettings.lowValueIcon,isVisible:!0,itemType:"object",callbackInstance:this,callbackMethod:"renderLowValueIconDropDown"},{name:"NeutralValueIcon",displayName:this.locale.propertyPanel.indicatorSettings.neutralValueIcon,isVisible:!0,itemType:"object",callbackInstance:this,callbackMethod:"renderNeutralValueIconDropDown"},{name:"IconAutoFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,value:this.getKPICardProperties().IndicatorSettings.AutoFontSize,itemType:"bool"},{name:"IconFontSize",isVisible:!0,displayName:this.locale.propertyPanel.indicatorSettings.iconFontSize,isDisable:this.getKPICardProperties().IndicatorSettings.AutoFontSize,value:this.getKPICardProperties().IndicatorSettings.FontSize,itemType:"float",decimalPlaces:0,minimum:8,maximum:72,unitType:"px"},]},{CategoryName:"Left Value",DisplayName:this.locale.propertyPanel.leftValueSettings.categoryText,Items:[{name:"LeftValueType",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.leftValueSettings.leftValueType,value:this.getKPICardProperties().LeftValueSettings.ValueType,itemType:"dropdown",valueList:["Absolute Difference","Percent of Difference","Percent of Target","Actual Value","Target Value","Percent of Change"]},{name:"ShowLeftValue",displayName:this.locale.propertyPanel.leftValueSettings.showLeftValue,value:this.getKPICardProperties().LeftValueSettings.Visibility,itemType:"bool"},{name:"LeftValueColorOption",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.leftValueSettings.leftValueColorOption,value:this.getKPICardProperties().LeftValueSettings.ColorType,itemType:"dropdown",valueList:["Direction Color","Custom Color"]},{name:"LeftValueColor",isVisible:this.getKPICardProperties().LeftValueSettings.ColorType==="Custom Color",displayName:this.locale.propertyPanel.leftValueSettings.leftValueColor,value:this.getKPICardProperties().LeftValueSettings.Color,itemType:"color"},{name:"LeftValueAutoFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,value:this.getKPICardProperties().LeftValueSettings.AutoFontSize,itemType:"bool"},{name:"LeftValueFontSize",isVisible:!0,isDisable:this.getKPICardProperties().LeftValueSettings.AutoFontSize,displayName:this.locale.propertyPanel.leftValueSettings.leftValueFontSize,value:this.getKPICardProperties().LeftValueSettings.FontSize,itemType:"float",decimalPlaces:0,minimum:8,maximum:72,unitType:"px"},{name:"ShowLeftCaption",displayName:this.locale.propertyPanel.leftValueSettings.showLeftCaption,value:this.getKPICardProperties().LeftCaptionSettings.Visibility,itemType:"bool"},{name:"LeftCaptionText",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.leftValueSettings.leftCaptionText,value:BoldBIDashboard.isNullOrUndefined(this.getKPICardProperties().LeftCaptionSettings.Text)||this.getKPICardProperties().LeftCaptionSettings.Text===""?"Actual Value":this.getKPICardProperties().LeftCaptionSettings.Text,itemType:"string"},{name:"LeftCaptionColorOption",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.leftValueSettings.leftCaptionColorOption,value:this.getKPICardProperties().LeftCaptionSettings.ColorType,itemType:"dropdown",valueList:["Direction Color","Custom Color"]},{name:"LeftCaptionColor",isVisible:this.getKPICardProperties().LeftCaptionSettings.ColorType==="Custom Color",displayName:this.locale.propertyPanel.leftValueSettings.leftCaptionColor,value:this.getKPICardProperties().LeftCaptionSettings.Color,itemType:"color"},{name:"LeftCaptionAutoFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,value:this.getKPICardProperties().LeftCaptionSettings.AutoFontSize,itemType:"bool"},{name:"LeftCaptionFontSize",isVisible:!0,isDisable:this.getKPICardProperties().LeftCaptionSettings.AutoFontSize,displayName:this.locale.propertyPanel.leftValueSettings.leftCaptionFontSize,value:this.getKPICardProperties().LeftCaptionSettings.FontSize,itemType:"float",decimalPlaces:0,minimum:8,maximum:72,unitType:"px"},]},{CategoryName:"Right Value",DisplayName:this.locale.propertyPanel.rightValueSettings.categoryText,Items:[{name:"RightValueType",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.rightValueSettings.rightValueType,value:this.getKPICardProperties().RightValueSettings.ValueType,itemType:"dropdown",valueList:["Absolute Difference","Percent of Difference","Percent of Target","Actual Value","Target Value","Percent of Change"]},{name:"ShowRightValue",displayName:this.locale.propertyPanel.rightValueSettings.showRightValue,value:this.getKPICardProperties().RightValueSettings.Visibility,itemType:"bool"},{name:"RightValueColorOption",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.rightValueSettings.rightValueColorOption,value:this.getKPICardProperties().RightValueSettings.ColorType,itemType:"dropdown",valueList:["Direction Color","Custom Color"]},{name:"RightValueColor",isVisible:this.getKPICardProperties().RightValueSettings.ColorType==="Custom Color",displayName:this.locale.propertyPanel.rightValueSettings.rightValueColor,value:this.getKPICardProperties().RightValueSettings.Color,itemType:"color"},{name:"RightValueAutoFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,value:this.getKPICardProperties().RightValueSettings.AutoFontSize,itemType:"bool"},{name:"RightValueFontSize",isVisible:!0,isDisable:this.getKPICardProperties().RightValueSettings.AutoFontSize,displayName:this.locale.propertyPanel.rightValueSettings.rightValueFontSize,value:this.getKPICardProperties().RightValueSettings.FontSize,itemType:"float",decimalPlaces:0,minimum:8,maximum:72,unitType:"px"},{name:"ShowRightCaption",displayName:this.locale.propertyPanel.rightValueSettings.showRightCaption,value:this.getKPICardProperties().RightCaptionSettings.Visibility,itemType:"bool"},{name:"RightCaptionText",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.rightValueSettings.rightCaptionText,value:BoldBIDashboard.isNullOrUndefined(this.getKPICardProperties().RightCaptionSettings.Text)||this.getKPICardProperties().RightCaptionSettings.Text===""?"Target Value":this.getKPICardProperties().RightCaptionSettings.Text,itemType:"string"},{name:"RightCaptionColorOption",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.rightValueSettings.rightCaptionColorOption,value:this.getKPICardProperties().LeftCaptionSettings.ColorType,itemType:"dropdown",valueList:["Direction Color","Custom Color"]},{name:"RightCaptionColor",isVisible:this.getKPICardProperties().RightCaptionSettings.ColorType==="Custom Color",displayName:this.locale.propertyPanel.rightValueSettings.rightCaptionColor,value:this.getKPICardProperties().RightCaptionSettings.Color,itemType:"color"},{name:"RightCaptionAutoFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,value:this.getKPICardProperties().RightCaptionSettings.AutoFontSize,itemType:"bool"},{name:"RightCaptionFontSize",isVisible:!0,isDisable:this.getKPICardProperties().RightCaptionSettings.AutoFontSize,displayName:this.locale.propertyPanel.rightValueSettings.rightCaptionFontSize,value:this.getKPICardProperties().RightCaptionSettings.FontSize,itemType:"float",decimalPlaces:0,minimum:8,maximum:72,unitType:"px"},]},{CategoryName:"Image",DisplayName:this.locale.propertyPanel.backgroundSettings.categoryText,Items:[{name:"ShowImage",displayName:this.locale.propertyPanel.backgroundSettings.showBackgroundImage,value:this.getKPICardProperties().ImageSettings.Visibility,itemType:"bool"},{name:"ImageMode",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.backgroundSettings.backgroundImageMode,value:this.getKPICardProperties().ImageSettings.ImageMode,itemType:"dropdown",valueList:["Default","Fill","Uniform","Uniform To Fill"]},{name:"ImagePosition",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.imageSettings.imagePosition,value:!BoldBIDashboard.isNullOrUndefined(this.getKPICardProperties().ImageSettings.ImagePosition)&&this.getKPICardProperties().ImageSettings.ImagePosition!==""?this.getKPICardProperties().ImageSettings.ImagePosition:"Left",itemType:"dropdown",valueList:["Left","Right"]},{name:"ImageSource",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.backgroundSettings.backgroundImageSource,value:this.getKPICardProperties().ImageSettings.ImageSource,itemType:"dropdown",valueList:["Local","URL","Parameterized URL"]},{name:"Browse",displayName:this.locale.propertyPanel.backgroundSettings.backgroundImageBrowse,isVisible:this.getKPICardProperties().ImageSettings.ImageSource==="Local"?!0:!1,itemType:"object",callbackInstance:this,callbackMethod:"renderImageBrowseBox"},{name:"ImageURL",displayName:this.locale.propertyPanel.backgroundSettings.backgroundImageUrl,itemType:"string",value:this.getKPICardProperties().ImageSettings.ImageUrl,isVisible:this.getKPICardProperties().ImageSettings.ImageSource==="URL"?!0:!1},{name:"Pattern",displayName:this.locale.propertyPanel.backgroundSettings.backgroundImagePattern,itemType:"string",value:this.getKPICardProperties().ImageSettings.URLPattern,isVisible:this.getKPICardProperties().ImageSettings.ImageSource==="Parameterized URL"?!0:!1}]},{CategoryName:"Background",DisplayName:this.locale.propertyPanel.backgroundText,Items:[{name:"ShowBackgroundImage",displayName:this.locale.propertyPanel.backgroundSettings.showBackgroundImage,value:this.getKPICardProperties().BackgroundSettings.Image.Visibility,itemType:"bool"},{name:"BackgroundImageMode",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.backgroundSettings.backgroundImageMode,value:this.getKPICardProperties().BackgroundSettings.Image.ImageMode,itemType:"dropdown",valueList:["Default","Fill","Uniform","Uniform To Fill"]},{name:"BackgroundImageSource",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.backgroundSettings.backgroundImageSource,value:this.getKPICardProperties().BackgroundSettings.Image.ImageSource,itemType:"dropdown",valueList:["Local","URL","Parameterized URL"]},{name:"BackgroundImageBrowse",displayName:this.locale.propertyPanel.backgroundSettings.backgroundImageBrowse,isVisible:this.getKPICardProperties().BackgroundSettings.Image.ImageSource==="Local"?!0:!1,itemType:"object",callbackInstance:this,callbackMethod:"renderBackgroundImageBrowseBox"},{name:"BackgroundImageURL",displayName:this.locale.propertyPanel.backgroundSettings.backgroundImageURL,itemType:"string",value:this.getKPICardProperties().BackgroundSettings.Image.ImageUrl,isVisible:this.getKPICardProperties().BackgroundSettings.Image.ImageSource==="URL"?!0:!1},{name:"BackgroundImagePattern",displayName:this.locale.propertyPanel.backgroundSettings.backgroundImagePattern,itemType:"string",value:this.getKPICardProperties().BackgroundSettings.Image.URLPattern,isVisible:this.getKPICardProperties().BackgroundSettings.Image.ImageSource==="Parameterized URL"?!0:!1},{name:"BackgroundColor",isVisible:!0,displayName:this.locale.propertyPanel.backgroundSettings.backgroundColor,value:this.getKPICardProperties().BackgroundSettings.Color,itemType:"color"},{name:"Transparency",isVisible:!0,displayName:this.locale.propertyPanel.backgroundSettings.transparency,value:this.getKPICardProperties().BackgroundSettings.Transparency,decimalPlaces:1,itemType:"float",minimum:0,maximum:1,interval:.1,unitType:"pt"},]},{CategoryName:"Sparkline",DisplayName:this.locale.propertyPanel.sparklineText,Items:[{name:"ShowSparkline",displayName:this.locale.propertyPanel.sparkLineSettings.showSparkline,value:this.getKPICardProperties().SparklineSettings.Visibility,itemType:"bool"},{name:"SparklineColorOption",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.sparkLineSettings.sparklineColorOption,value:this.getKPICardProperties().IndicatorSettings.ColorType,itemType:"dropdown",valueList:["Direction Color","Custom Color"]},{name:"SparklineColor",isVisible:this.getKPICardProperties().SparklineSettings.ColorType==="Custom Color",displayName:this.locale.propertyPanel.sparkLineSettings.sparklineColor,value:this.getKPICardProperties().SparklineSettings.Fill,itemType:"color"},{name:"SparklineOpacity",isVisible:!0,displayName:this.locale.propertyPanel.sparkLineSettings.sparklineOpacity,value:this.getKPICardProperties().SparklineSettings.Opacity,itemType:"float",decimalPlaces:1,minimum:0,maximum:1,interval:.1,unitType:"pt"},]},t.linkingProperty,t.filterSettingsProperty,t.containerSettingsProperty,t.containerActionsProperty,r,t.noDataContainerActionsProperty],t.propertyGridItems},t.prototype.updateKPICardProperties=function(n,t,i,r){var s=!1,o=this.getBindedColumnIndex(this.DataGroupInfo),u,f,h,e;switch(n){case"Name":this.updateContainerTitle(i);break;case"SubTitle":this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[o.seriesValueIndex].FieldInfos.length!==0&&this.DataGroupInfo.FieldContainers[o.actualValueIndex].FieldInfos.length&&this.DataGroupInfo.FieldContainers[o.targetValueIndex].FieldInfos.length?this.propertyPanel.setSubTitle(this.widgetJson,i):this.widgetJson.ContainerSettings.SubTitle=i;break;case"Description":this.propertyPanel.setDescription(this.widgetJson,i);break;case"ShowTitle":this.updateTitleVisibility(i);break;case"TitleText":this.updateTitleText(i);break;case"TitleColor":this.updateTitleColor(i);break;case"TitleAutoFontSize":this.updateTitleAutoFontSize(i);break;case"TitleFontSize":this.updateTitleFontSize(i);break;case"BackgroundColor":this.updateBackgroundColor(i);break;case"ShowKPI":this.updateKPIValueVisibility(i);break;case"EnableAnimation":this.updateAnimation(i);break;case"AnimationDuration":this.updateAnimationDuration(i);break;case"EnableFixedSeries":this.updateFixedSeries(i);break;case"FixedRowCount":this.updateFixedRows(i);break;case"FixedColumnCount":this.updateFixedColumns(i);break;case"KPIType":this.updateKPIValueType(i);break;case"KPIValueColorOption":this.updatePrimaryValueColorOption(i);break;case"KPIValueColor":this.updatePrimaryValueColor(i);break;case"KPIAutoFontSize":this.updateKPIAutoFontSize(i);break;case"KPIFontSize":this.updateKPIFontSize(i);break;case"showIcon":this.updateIndicatorVisibility(i);break;case"IndicatorColorOption":this.updateIndicatorColorType(i);break;case"IndicatorPlacement":this.updateIndicatorPlacement(i);break;case"IndicatorPosition":this.updateIndicatorPosition(i);break;case"IndicatorColor":this.updateIndicatorColor(i);break;case"IconAutoFontSize":this.updateIconAutoFontSize(i);break;case"IconFontSize":this.updateIndicatorFontSize(i);break;case"ShowLeftValue":this.updateLeftValueVisibility(i);break;case"LeftValueColorOption":this.updateLeftValueColorOption(i);break;case"LeftValueColor":this.updateLeftValueColor(i);break;case"LeftValueType":this.updateLeftValueType(i);break;case"LeftValueAutoFontSize":this.updateLeftValueAutoFontSize(i);break;case"LeftValueFontSize":this.updateLeftValueFontSize(i);break;case"ShowLeftCaption":this.updateLeftCaptionVisibility(i);break;case"LeftCaptionColorOption":this.updateLeftCaptionColorType(i);break;case"LeftCaptionColor":this.updateLeftCaptionColor(i);break;case"LeftCaptionText":this.updateLeftCaptionText(i);break;case"LeftCaptionAutoFontSize":this.updateLeftCaptionAutoFontSize(i);break;case"LeftCaptionFontSize":this.updateLeftCaptionFontSize(i);break;case"ShowRightValue":this.updateRightValueVisibility(i);break;case"RightValueColorOption":this.updateRightValueColorOption(i);break;case"RightValueColor":this.updateRightValueColor(i);break;case"RightValueType":this.updateRightValueType(i);break;case"RightValueAutoFontSize":this.updateRightValueAutoFontSize(i);break;case"RightValueFontSize":this.updateRightValueFontSize(i);break;case"ShowRightCaption":this.updateRightCaptionVisibility(i);break;case"RightCaptionColorOption":this.updateRightCaptionColorType(i);break;case"RightCaptionColor":this.updateRightCaptionColor(i);break;case"RightCaptionText":this.updateRightCaptionText(i);break;case"RightCaptionAutoFontSize":this.updateRightCaptionAutoFontSize(i);break;case"RightCaptionFontSize":this.updateRightCaptionFontSize(i);break;case"Direction":this.udpateDirection(i);break;case"ShowTooltip":this.updateShowToolTip(i);break;case"ShowImage":this.updateImageVisibility(i);this.updateInformationIconVisibility(i);break;case"ShowSparkline":this.updateSparklineVisibility(i);break;case"ImageMode":this.updateImageMode(i);break;case"ImagePosition":this.updateImagePosition(i);break;case"ImageSource":this.resetImageProperties(r);i==="Parameterized URL"&&this.validateImagePattern();this.updateImageSource(i);break;case"ImageURL":this.updateImageURL(i);break;case"Pattern":this.getKPICardProperties().ImageSettings.URLPattern=i;this.validateImagePattern();this.updateImageParameterizedURL();break;case"BackgroundImageURL":this.updateBackgroundImageURL(i);break;case"BackgroundImagePattern":this.getKPICardProperties().BackgroundSettings.Image.URLPattern=i;this.validateBackgroundImagePattern();i==="Parameterized URL"&&this.validateBackgroundImagePattern();this.updateBackgroundImageParameterizedURL();break;case"BackgroundImageSource":this.resetBackgroundImageProperties(r);this.updateBackgroundImageSource(i);break;case"SparklineColorOption":this.updateSparklineColorOption(i);break;case"SparklineColor":this.updateSparklineColor(i);break;case"SparklineOpacity":this.updateSparklineOpacity(i);break;case"HighValueColor":this.updateHighValueColor(i);break;case"LowValueColor":this.updateLowValueColor(i);break;case"NeutralColor":this.updateNeutralColor(i);break;case"BackgroundImageMode":this.updateBackgroundImageMode(i);break;case"Transparency":this.updateBackgroundTransparency(i);break;case"ShowBackgroundImage":this.backgroundImageVisibility(i);break;case"SeparatorColor":this.updateSeparatorColor(i);break;case"FixedLayout":this.updateFixedlayout(i);break;case"ResponsiveMargin":this.updateResponsiveMargin(i);break;case"ItemLink":this.UpdateLink(i);break;case"ActAsMasterWidget":s=!0;!this.kpiCardItem.hasClass("e-kpicard-single")&&this.kpiCardContent.length>0&&(i||this.widgetJson.UrlLink.EnableLink?this.kpiCardContent.addClass("e-dbrd-master-widget"):this.kpiCardContent.removeClass("e-dbrd-master-widget"))}if(!s){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(u=this.designPanelInstance.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)h=u[f],h.attr("id")===this.controlContainer.attr("id")&&(e=this.bbdesigner$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"KPICard",i));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-kpicard-item",this.designerId+"_"+this.widgetJson.UniqueName,[n,i,t,r],[n,t,i,r])}},t.prototype.updateFixedSeries=function(n){this.getKPICardProperties().SeriesSettings.IsFixedRowsAndColumns=n;this.propertyPanel.updateItemVisibility(this.Type.toString(),"SeriesSettings","FixedRowCount",n);this.propertyPanel.updateItemVisibility(this.Type.toString(),"SeriesSettings","FixedColumnCount",n);this.setPropertyElement("SeriesSettings","FixedRowCount",this.visibleRowsCount);this.setPropertyElement("SeriesSettings","FixedColumnCount",this.columnCount);this.getKPICardProperties().SeriesSettings.RowCount=this.visibleRowsCount;this.getKPICardProperties().SeriesSettings.ColumnCount=this.columnCount;this.resizeKPICard()},t.prototype.updateFixedRows=function(n){this.getKPICardProperties().SeriesSettings.RowCount=n;this.resizeKPICard()},t.prototype.updateFixedColumns=function(n){this.getKPICardProperties().SeriesSettings.ColumnCount=n;this.resizeKPICard()},t.prototype.updateContainerTitle=function(n){var t=this.getBindedColumnIndex(this.DataGroupInfo);this.widgetJson.ContainerSettings.Title=n;this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[t.seriesValueIndex].FieldInfos.length!==0?(this.propertyPanel.setTitle(this.widgetJson),this.getKPICardProperties().TitleSettings.Text=n,this.setPropertyElement("Title","TitleText",n)):(this.getKPICardProperties().TitleSettings.Text=n,this.setPropertyElement("Title","TitleText",n),this.updateTitleText(n))},t.prototype.updateTitleText=function(n){var t,i;this.getKPICardProperties().TitleSettings.Text=this.widgetJson.ContainerSettings.Title=n;t=this.kpiCardElement.data("BoldBIDashboardKPICard");BoldBIDashboard.isNullOrUndefined(t)||(i={title:{text:BoldBIDashboard.DashboardUtil.encodeText(n)}},t.setModel(i));this.updateTitleHeaderText()},t.prototype.updateTitleVisibility=function(n){var t,i;this.getKPICardProperties().TitleSettings.Visibility=n;t={title:{visibility:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.updateSeriesCardProperty(t),this.resizeKPICard())},t.prototype.updateTitleColor=function(n,t){var u,r,i;if(t===void 0&&(t=!0),t&&(this.getKPICardProperties().TitleSettings.Color=n),u={title:{foreground:n}},BoldBIDashboard.isNullOrUndefined(this.kpiCardContent))i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.title.isColorCustomized||i.setModel(u);else for(r=0;r<this.kpiCardContent.children().length;r++)i=this.bbdesigner$(this.kpiCardContent.children()[r]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.title.isColorCustomized||i.setModel(u)},t.prototype.updateTitleAutoFontSize=function(n){this.getKPICardProperties().TitleSettings.AutoFontSize=n;var t=n?this.getFontSizeBasedOnResolution().split("px")[0]:this.getKPICardProperties().TitleSettings.FontSize;this.updateTitleFontSize(t);this.propertyPanel.updateItemDisable("float","KPICard","Title","TitleFontSize",n)},t.prototype.updateTitleFontSize=function(n){var r=this,t,i;this.getKPICardProperties().TitleSettings.FontSize=n;t={title:{fontSize:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.resizeKPICard(),this.updateSeriesCardProperty(t),setTimeout(function(){r.designerInstance.designerPanel.hideLoadingIndicator(r.controlContainer)},100))},t.prototype.updateBackgroundColor=function(n,t){var u,r,i;if(t===void 0&&(t=!0),t&&(this.getKPICardProperties().BackgroundSettings.Color=n),u={backgroundSettings:{color:n}},BoldBIDashboard.isNullOrUndefined(this.kpiCardContent))i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.backgroundSettings.isColorCustomized||i.setModel(u);else for(r=0;r<this.kpiCardContent.children().length;r++)i=this.bbdesigner$(this.kpiCardContent.children()[r]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.backgroundSettings.isColorCustomized||i.setModel(u)},t.prototype.updateControlBackgroundForSeriesCard=function(n){var t=this.ControlContainer.find(">.bbi-dbrd-control-background");t.css("background-color",n?this.designerInstance.modules.themeHelper.getWidgetTileBackground(this.Type):"transparent")},t.prototype.updateKPIValueVisibility=function(n){var t,i;this.getKPICardProperties().KPIValueSettings.Visibility=n;t={kpiValue:{visibility:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.updateSeriesCardProperty(t),this.resizeKPICard())},t.prototype.updateShowToolTip=function(n){var t,i;this.getKPICardProperties().ShowTooltip=n;t={tooltip:{"class":n?"bbi-dbrd-designer-hoverable":""}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.updateSeriesCardProperty(t),this.resizeKPICard())},t.prototype.updateAnimation=function(n){var t,i;this.getKPICardProperties().AnimationSettings.EnableAnimation=n;t={animationSettings:{enableAnimation:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateAnimationDuration=function(n){var t,i;this.getKPICardProperties().AnimationSettings.AnimationDuration=n;t={animationSettings:{animationDuration:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateKPIValueType=function(n){var t,i;this.getKPICardProperties().KPIValueSettings.ValueType=n;this.IsCardConfigured()&&!BoldBIDashboard.isNullOrUndefined(this.getKPICardProperties().ColorCustomization)?this.dataConfigurationInstance.postDraggedFields():(t={kpiValue:{type:n}},BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t))},t.prototype.updatePrimaryValueColorOption=function(n){var t,i;this.getKPICardProperties().KPIValueSettings.ColorType=n;n==="Custom Color"?(this.propertyPanel.updateItemVisibility("KPICard","KPIValue","KPIValueColor",!0),this.updatePrimaryValueColor(this.getKPICardProperties().KPIValueSettings.Color)):this.propertyPanel.updateItemVisibility("KPICard","KPIValue","KPIValueColor",!1);t={kpiValue:{followDirectionColor:n==="Direction Color"}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updatePrimaryValueColor=function(n,t){var u,r,i;if(t===void 0&&(t=!0),t&&(this.getKPICardProperties().KPIValueSettings.Color=n),u={kpiValue:{foreground:n}},BoldBIDashboard.isNullOrUndefined(this.kpiCardContent))i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.kpiValue.isColorCustomized||i.setModel(u);else for(r=0;r<this.kpiCardContent.children().length;r++)i=this.bbdesigner$(this.kpiCardContent.children()[r]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.kpiValue.isColorCustomized||i.setModel(u)},t.prototype.updateKPIAutoFontSize=function(n){this.getKPICardProperties().KPIValueSettings.AutoFontSize=n;var t=n?this.getKPIFontSizeBasedOnResolution():this.getKPICardProperties().KPIValueSettings.FontSize;this.updateKPIFontSize(t);this.propertyPanel.updateItemDisable("float","KPICard","KPIValue","KPIFontSize",n)},t.prototype.updateKPIFontSize=function(n){var r=this,t,i;this.getKPICardProperties().KPIValueSettings.FontSize=n;t={kpiValue:{fontSize:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.resizeKPICard(),this.updateSeriesCardProperty(t),setTimeout(function(){r.designerInstance.designerPanel.hideLoadingIndicator(r.controlContainer)},100))},t.prototype.updateIndicatorVisibility=function(n){var t,i;this.getKPICardProperties().IndicatorSettings.Visibility=n;t={icon:{visibility:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.updateSeriesCardProperty(t),this.resizeKPICard())},t.prototype.updateIndicatorColorType=function(n){var t,i;this.getKPICardProperties().IndicatorSettings.ColorType=n;n==="Custom Color"?(this.propertyPanel.updateItemVisibility("KPICard","Indicator","IndicatorColor",!0),this.updateIndicatorColor(this.getKPICardProperties().IndicatorSettings.Color)):this.propertyPanel.updateItemVisibility("KPICard","Indicator","IndicatorColor",!1);t={icon:{followDirectionColor:n==="Direction Color"}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateIndicatorPlacement=function(n){var t,i;this.getKPICardProperties().IndicatorSettings.Placement=n;t={icon:{placement:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateIndicatorPosition=function(n){var t,i;this.getKPICardProperties().IndicatorSettings.Position=n;t={icon:{position:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateIndicatorColor=function(n){var r,i,t;if(this.getKPICardProperties().IndicatorSettings.Color=n,r={icon:{color:n}},BoldBIDashboard.isNullOrUndefined(this.kpiCardContent))t=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.icon.isIconCustomized||t.setModel(r);else for(i=0;i<this.kpiCardContent.children().length;i++)t=this.bbdesigner$(this.kpiCardContent.children()[i]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.icon.isIconCustomized||t.setModel(r)},t.prototype.updateIconAutoFontSize=function(n){this.getKPICardProperties().IndicatorSettings.AutoFontSize=n;var t=n?this.getIndicatorFontSizeBasedOnResolution():this.getKPICardProperties().IndicatorSettings.FontSize;this.updateIndicatorFontSize(t);this.propertyPanel.updateItemDisable("float","KPICard","Indicator","IconFontSize",n)},t.prototype.updateIndicatorFontSize=function(n){var r=this,t,i;this.getKPICardProperties().IndicatorSettings.FontSize=n;t={icon:{fontSize:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.resizeKPICard(),this.updateSeriesCardProperty(t),setTimeout(function(){r.designerInstance.designerPanel.hideLoadingIndicator(r.controlContainer)},100))},t.prototype.updateLeftValueVisibility=function(n){var t,i;this.getKPICardProperties().LeftValueSettings.Visibility=n;t={leftValue:{visibility:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.updateSeriesCardProperty(t),this.resizeKPICard())},t.prototype.updateLeftValueColorOption=function(n){var t,i;this.getKPICardProperties().LeftValueSettings.ColorType=n;n==="Custom Color"?(this.propertyPanel.updateItemVisibility("KPICard","LeftValue","LeftValueColor",!0),this.updateLeftValueColor(this.getKPICardProperties().LeftValueSettings.Color)):this.propertyPanel.updateItemVisibility("KPICard","LeftValue","LeftValueColor",!1);t={leftValue:{isValueFollowDirectionColor:n==="Direction Color"}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateLeftValueColor=function(n,t){var i,r;t===void 0&&(t=!0);t&&(this.getKPICardProperties().LeftValueSettings.Color=n);i={leftValue:{foreground:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(r=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(r)||r.setModel(i)):this.updateSeriesCardProperty(i)},t.prototype.updateLeftValueType=function(n){var t,i;this.getKPICardProperties().LeftValueSettings.ValueType=n;t={leftValue:{type:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateLeftValueAutoFontSize=function(n){this.getKPICardProperties().LeftValueSettings.AutoFontSize=n;var t=n?this.getFontSizeBasedOnResolution().split("px")[0]:this.getKPICardProperties().LeftValueSettings.FontSize;this.updateLeftValueFontSize(t);this.propertyPanel.updateItemDisable("float","KPICard","LeftValue","LeftValueFontSize",n)},t.prototype.updateLeftValueFontSize=function(n){var r=this,t,i;this.getKPICardProperties().LeftValueSettings.FontSize=n;t={leftValue:{fontSize:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.resizeKPICard(),this.updateSeriesCardProperty(t),setTimeout(function(){r.designerInstance.designerPanel.hideLoadingIndicator(r.controlContainer)},100))},t.prototype.updateLeftCaptionVisibility=function(n){var t,i;this.getKPICardProperties().LeftCaptionSettings.Visibility=n;t={leftValue:{captionVisibility:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.updateSeriesCardProperty(t),this.resizeKPICard())},t.prototype.updateLeftCaptionColorType=function(n){var t,i;this.getKPICardProperties().LeftCaptionSettings.ColorType=n;n==="Custom Color"?(this.propertyPanel.updateItemVisibility("KPICard","LeftValue","LeftCaptionColor",!0),this.updateLeftCaptionColor(this.getKPICardProperties().LeftCaptionSettings.Color)):this.propertyPanel.updateItemVisibility("KPICard","LeftValue","LeftCaptionColor",!1);t={leftValue:{isCaptionFollowDirectionColor:n==="Direction Color"}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateLeftCaptionColor=function(n,t){var i,r;t===void 0&&(t=!0);t&&(this.getKPICardProperties().LeftCaptionSettings.Color=n);i={leftValue:{captionForeground:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(r=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(r)||r.setModel(i)):this.updateSeriesCardProperty(i)},t.prototype.updateLeftCaptionText=function(n){var t,i;this.getKPICardProperties().LeftCaptionSettings.Text=n;t={leftValue:{caption:BoldBIDashboard.DashboardUtil.encodeText(n)}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateLeftCaptionAutoFontSize=function(n){this.getKPICardProperties().LeftCaptionSettings.AutoFontSize=n;var t=n?this.getFontSizeBasedOnResolution().split("px")[0]:this.getKPICardProperties().LeftCaptionSettings.FontSize;this.updateLeftCaptionFontSize(t);this.propertyPanel.updateItemDisable("float","KPICard","LeftValue","LeftCaptionFontSize",n)},t.prototype.updateLeftCaptionFontSize=function(n){var r=this,t,i;this.getKPICardProperties().LeftCaptionSettings.FontSize=n;t={leftValue:{captionFontSize:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.resizeKPICard(),this.updateSeriesCardProperty(t),setTimeout(function(){r.designerInstance.designerPanel.hideLoadingIndicator(r.controlContainer)},100))},t.prototype.updateRightValueVisibility=function(n){var t,i;this.getKPICardProperties().RightValueSettings.Visibility=n;t={rightValue:{visibility:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.updateSeriesCardProperty(t),this.resizeKPICard())},t.prototype.updateRightValueColorOption=function(n){var t,i;this.getKPICardProperties().RightValueSettings.ColorType=n;n==="Custom Color"?(this.propertyPanel.updateItemVisibility("KPICard","RightValue","RightValueColor",!0),this.updateRightValueColor(this.getKPICardProperties().RightValueSettings.Color)):this.propertyPanel.updateItemVisibility("KPICard","RightValue","RightValueColor",!1);t={rightValue:{isValueFollowDirectionColor:n==="Direction Color"}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateRightValueColor=function(n,t){var i,r;t===void 0&&(t=!0);t&&(this.getKPICardProperties().RightValueSettings.Color=n);i={rightValue:{foreground:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(r=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(r)||r.setModel(i)):this.updateSeriesCardProperty(i)},t.prototype.updateRightValueType=function(n){var t,i;this.getKPICardProperties().RightValueSettings.ValueType=n;t={rightValue:{type:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateRightValueAutoFontSize=function(n){this.getKPICardProperties().RightValueSettings.AutoFontSize=n;var t=n?this.getFontSizeBasedOnResolution().split("px")[0]:this.getKPICardProperties().RightValueSettings.FontSize;this.updateRightValueFontSize(t);this.propertyPanel.updateItemDisable("float","KPICard","RightValue","RightValueFontSize",n)},t.prototype.updateRightValueFontSize=function(n){var r=this,t,i;this.getKPICardProperties().RightValueSettings.FontSize=n;t={rightValue:{fontSize:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.resizeKPICard(),this.updateSeriesCardProperty(t),setTimeout(function(){r.designerInstance.designerPanel.hideLoadingIndicator(r.controlContainer)},100))},t.prototype.updateRightCaptionVisibility=function(n){var t,i;this.getKPICardProperties().RightCaptionSettings.Visibility=n;t={rightValue:{captionVisibility:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.updateSeriesCardProperty(t),this.resizeKPICard())},t.prototype.updateRightCaptionColorType=function(n){var t,i;this.getKPICardProperties().RightCaptionSettings.ColorType=n;n==="Custom Color"?(this.propertyPanel.updateItemVisibility("KPICard","RightValue","RightCaptionColor",!0),this.updateRightCaptionColor(this.getKPICardProperties().RightCaptionSettings.Color)):this.propertyPanel.updateItemVisibility("KPICard","RightValue","RightCaptionColor",!1);t={rightValue:{isCaptionFollowDirectionColor:n==="Direction Color"}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateRightCaptionColor=function(n,t){var i,r;t===void 0&&(t=!0);t&&(this.getKPICardProperties().RightCaptionSettings.Color=n);i={rightValue:{captionForeground:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(r=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(r)||r.setModel(i)):this.updateSeriesCardProperty(i)},t.prototype.updateRightCaptionText=function(n){var t,i;this.getKPICardProperties().RightCaptionSettings.Text=n;t={rightValue:{caption:BoldBIDashboard.DashboardUtil.encodeText(n)}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateRightCaptionAutoFontSize=function(n){this.getKPICardProperties().RightCaptionSettings.AutoFontSize=n;var t=n?this.getFontSizeBasedOnResolution().split("px")[0]:this.getKPICardProperties().RightCaptionSettings.FontSize;this.updateRightCaptionFontSize(t);this.propertyPanel.updateItemDisable("float","KPICard","RightValue","RightCaptionFontSize",n)},t.prototype.updateRightCaptionFontSize=function(n){var r=this,t,i;this.getKPICardProperties().RightCaptionSettings.FontSize=n;t={rightValue:{captionFontSize:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.resizeKPICard(),this.updateSeriesCardProperty(t),setTimeout(function(){r.designerInstance.designerPanel.hideLoadingIndicator(r.controlContainer)},100))},t.prototype.udpateDirection=function(n){if(this.getKPICardProperties().Direction!==n){this.getKPICardProperties().Direction=n;var t=this.getKPICardProperties().ColorSettings.LowValueColor,i=this.getKPICardProperties().ColorSettings.HighValueColor;this.setPropertyElement("ColorSettings","HighValueColor",t);this.setPropertyElement("ColorSettings","LowValueColor",i);this.updateLowValueColor(i);this.updateHighValueColor(t)}},t.prototype.updateImageVisibility=function(n){var t,i;this.getKPICardProperties().ImageSettings.Visibility=n;t={image:{visibility:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.updateSeriesCardProperty(t),this.resizeKPICard())},t.prototype.updateInformationIconVisibility=function(n){var i={informationIcon:{visibility:n}},t;BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(t=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.setModel(i)):this.updateSeriesCardProperty(i)},t.prototype.updateSparklineVisibility=function(n){var t,i;this.getKPICardProperties().SparklineSettings.Visibility=n;t={sparkline:{visibility:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateImageMode=function(n){var t,i;this.getKPICardProperties().ImageSettings.ImageMode=n;t={image:{mode:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateImagePosition=function(n){var t,i;this.getKPICardProperties().ImageSettings.ImagePosition=n;t={image:{position:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.resetImageProperties=function(n){this.getKPICardProperties().ImageSettings.FilePath="";this.getKPICardProperties().ImageSettings.ImageName="";this.getKPICardProperties().ImageSettings.ImageUrl="";this.getKPICardProperties().ImageSettings.URLPattern="{0}";this.bbdesigner$(this.filePath).val("");this.designerInstance.element.find("#"+this.designerId+"_"+this.Type+"_"+n.categoryName+"_ImageURL").val("");this.designerInstance.element.find("#"+this.designerId+"_"+this.Type+"_"+n.categoryName+"_Pattern").val("{0}")},t.prototype.updateImageSource=function(n){var r,i,t;this.getKPICardProperties().ImageSettings.ImageSource=n;switch(n){case"Local":if(this.propertyPanel.updateItemVisibility("KPICard","Image","ImageURL",!1),this.propertyPanel.updateItemVisibility("KPICard","Image","Pattern",!1),this.propertyPanel.updateItemVisibility("KPICard","Image","Browse",!0),this.propertyPanel.updateCategoryVisibility("KPICard","Filter",!1),r={image:{type:"base64",data:""}},BoldBIDashboard.isNullOrUndefined(this.kpiCardContent))t=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.image.isImageCustomized||t.setModel(r);else for(i=0;i<this.kpiCardContent.children().length;i++)t=this.bbdesigner$(this.kpiCardContent.children()[i]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.image.isImageCustomized||t.setModel(r);break;case"URL":if(this.propertyPanel.updateItemVisibility("KPICard","Image","Pattern",!1),this.propertyPanel.updateItemVisibility("KPICard","Image","Browse",!1),this.propertyPanel.updateItemVisibility("KPICard","Image","ImageURL",!0),this.propertyPanel.updateCategoryVisibility("Image","Filter",!1),r={image:{type:"url",data:""}},BoldBIDashboard.isNullOrUndefined(this.kpiCardContent))t=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.image.isImageCustomized||t.setModel(r);else for(i=0;i<this.kpiCardContent.children().length;i++)t=this.bbdesigner$(this.kpiCardContent.children()[i]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.image.isImageCustomized||t.setModel(r);break;case"Parameterized URL":this.propertyPanel.updateItemVisibility("KPICard","Image","Browse",!1);this.propertyPanel.updateItemVisibility("KPICard","Image","ImageURL",!1);this.propertyPanel.updateItemVisibility("KPICard","Image","Pattern",!0);this.propertyPanel.updateCategoryVisibility("KPICard","Filter",!0);this.updateImageParameterizedURL()}},t.prototype.updateImageURL=function(n){var r,i,t;if(this.getKPICardProperties().ImageSettings.ImageUrl=n,r={image:{data:n}},BoldBIDashboard.isNullOrUndefined(this.kpiCardContent))t=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.image.isImageCustomized||t.setModel(r);else for(i=0;i<this.kpiCardContent.children().length;i++)t=this.bbdesigner$(this.kpiCardContent.children()[i]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.image.isImageCustomized||t.setModel(r)},t.prototype.updateImageParameterizedURL=function(){var t,u=this.getBindedColumnIndex(this.DataGroupInfo),f=this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[u.imageIndex].FieldInfos.length>0?this.DataGroupInfo.FieldContainers[u.imageIndex].FieldInfos:[],i,r,n;if(BoldBIDashboard.isNullOrUndefined(this.dataValues)||BoldBIDashboard.isNullOrUndefined(this.dataValues.imageData)||BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo))n=this.kpiCardElement.data("BoldBIDashboardKPICard"),n!=null&&(t={image:{type:"url",data:this.getKPICardProperties().ImageSettings.URLPattern}},BoldBIDashboard.isNullOrUndefined(n)||n.model.image.isImageCustomized||n.setModel(t));else if(i="",this.kpiCardContent!=null&&this.DataGroupInfo.FieldContainers[u.seriesValueIndex].FieldInfos.length>0)for(r=0;r<this.kpiCardContent.children().length;r++)n=this.bbdesigner$(this.kpiCardContent.children()[r]).data("BoldBIDashboardKPICard"),i=this.getImageForSeriesCard(this.getKPICardProperties().ImageSettings.URLPattern,this.dataValues.imageData,n.model.title.text,f),t={image:{type:"url",data:i}},BoldBIDashboard.isNullOrUndefined(n)||n.model.image.isImageCustomized||n.setModel(t);else n=this.kpiCardElement.data("BoldBIDashboardKPICard"),i=this.getImageForSingleCard(this.getKPICardProperties().ImageSettings.URLPattern,this.dataValues.imageData,f),n!=null&&(t={image:{type:"url",data:i}},BoldBIDashboard.isNullOrUndefined(n)||n.model.image.isImageCustomized||n.setModel(t))},t.prototype.updateBackgroundImageURL=function(n){var r,i,t;if(this.getKPICardProperties().BackgroundSettings.Image.ImageUrl=n,r={backgroundSettings:{image:n}},BoldBIDashboard.isNullOrUndefined(this.kpiCardContent))t=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.backgroundSettings.isImageCustomized||t.setModel(r);else for(i=0;i<this.kpiCardContent.children().length;i++)t=this.bbdesigner$(this.kpiCardContent.children()[i]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.backgroundSettings.isImageCustomized||t.setModel(r)},t.prototype.updateBackgroundImageParameterizedURL=function(){var t,u=this.getBindedColumnIndex(this.DataGroupInfo),f=this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[u.backgroundImageIndex].FieldInfos.length>0?this.DataGroupInfo.FieldContainers[u.backgroundImageIndex].FieldInfos:[],i,r,n;if(BoldBIDashboard.isNullOrUndefined(this.dataValues)||BoldBIDashboard.isNullOrUndefined(this.dataValues.backgroundImageData)||BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo))n=this.kpiCardElement.data("BoldBIDashboardKPICard"),n!=null&&(t={backgroundSettings:{type:"url",image:this.getKPICardProperties().BackgroundSettings.Image.URLPattern}},BoldBIDashboard.isNullOrUndefined(n)||n.model.backgroundSettings.isImageCustomized||n.setModel(t));else if(i="",this.kpiCardContent!=null&&this.DataGroupInfo.FieldContainers[u.seriesValueIndex].FieldInfos.length>0)for(r=0;r<this.kpiCardContent.children().length;r++)n=this.bbdesigner$(this.kpiCardContent.children()[r]).data("BoldBIDashboardKPICard"),i=this.getImageForSeriesCard(this.getKPICardProperties().BackgroundSettings.Image.URLPattern,this.dataValues.backgroundImageData,n.model.title.text,f),t={backgroundSettings:{type:"url",image:i}},BoldBIDashboard.isNullOrUndefined(n)||n.model.backgroundSettings.isImageCustomized||n.setModel(t);else n=this.kpiCardElement.data("BoldBIDashboardKPICard"),n!=null&&(i=this.getImageForSingleCard(this.getKPICardProperties().BackgroundSettings.Image.URLPattern,this.dataValues.backgroundImageData,f),t={backgroundSettings:{type:"url",image:i}},BoldBIDashboard.isNullOrUndefined(n)||n.model.backgroundSettings.isImageCustomized||n.setModel(t))},t.prototype.resetBackgroundImageProperties=function(n){this.getKPICardProperties().BackgroundSettings.Image.FilePath="";this.getKPICardProperties().BackgroundSettings.Image.ImageName="";this.getKPICardProperties().BackgroundSettings.Image.ImageUrl="";this.getKPICardProperties().BackgroundSettings.Image.URLPattern="{0}";this.bbdesigner$(this.backgroundImageFilePath).val("");this.designerInstance.element.find("#"+this.designerId+"_"+this.Type+"_"+n.categoryName+"_BackgroundImageURL").val("");this.designerInstance.element.find("#"+this.designerId+"_"+this.Type+"_"+n.categoryName+"_BackgroundImagePattern").val("{0}")},t.prototype.updateBackgroundImageSource=function(n){var r,i,t;this.getKPICardProperties().BackgroundSettings.Image.ImageSource=n;switch(n){case"Local":if(this.propertyPanel.updateItemVisibility("KPICard","Background","BackgroundImageURL",!1),this.propertyPanel.updateItemVisibility("KPICard","Background","BackgroundImagePattern",!1),this.propertyPanel.updateItemVisibility("KPICard","Background","BackgroundImageBrowse",!0),this.propertyPanel.updateCategoryVisibility("KPICard","Filter",!1),r={backgroundSettings:{type:"base64",image:""}},BoldBIDashboard.isNullOrUndefined(this.kpiCardContent))t=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.backgroundSettings.isImageCustomized||t.setModel(r);else for(i=0;i<this.kpiCardContent.children().length;i++)t=this.bbdesigner$(this.kpiCardContent.children()[i]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.backgroundSettings.isImageCustomized||t.setModel(r);break;case"URL":if(this.propertyPanel.updateItemVisibility("KPICard","Background","BackgroundImagePattern",!1),this.propertyPanel.updateItemVisibility("KPICard","Background","BackgroundImageBrowse",!1),this.propertyPanel.updateItemVisibility("KPICard","Background","BackgroundImageURL",!0),this.propertyPanel.updateCategoryVisibility("Image","Filter",!1),r={backgroundSettings:{type:"url",image:""}},BoldBIDashboard.isNullOrUndefined(this.kpiCardContent))t=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.backgroundSettings.isImageCustomized||t.setModel(r);else for(i=0;i<this.kpiCardContent.children().length;i++)t=this.bbdesigner$(this.kpiCardContent.children()[i]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.backgroundSettings.isImageCustomized||t.setModel(r);break;case"Parameterized URL":this.propertyPanel.updateItemVisibility("KPICard","Background","BackgroundImageBrowse",!1);this.propertyPanel.updateItemVisibility("KPICard","Background","BackgroundImageURL",!1);this.propertyPanel.updateItemVisibility("KPICard","Background","BackgroundImagePattern",!0);this.propertyPanel.updateCategoryVisibility("KPICard","Filter",!0);this.updateBackgroundImageParameterizedURL()}},t.prototype.updateSparklineColorOption=function(n){var t,i;this.getKPICardProperties().SparklineSettings.ColorType=n;n==="Custom Color"?(this.propertyPanel.updateItemVisibility("KPICard","Sparkline","SparklineColor",!0),this.updateSparklineColor(this.getKPICardProperties().SparklineSettings.Fill)):this.propertyPanel.updateItemVisibility("KPICard","Sparkline","SparklineColor",!1);t={sparkline:{followDirectionColor:n==="Direction Color"}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateSparklineColor=function(n){var r,i,t;if(this.getKPICardProperties().SparklineSettings.Fill=n,r={sparkline:{fill:n}},BoldBIDashboard.isNullOrUndefined(this.kpiCardContent))t=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.sparkline.isColorCustomized||t.setModel(r);else for(i=0;i<this.kpiCardContent.children().length;i++)t=this.bbdesigner$(this.kpiCardContent.children()[i]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.sparkline.isColorCustomized||t.setModel(r)},t.prototype.updateSparklineOpacity=function(n,t){var i,r;t===void 0&&(t=!0);t&&(this.getKPICardProperties().SparklineSettings.Opacity=n);i={sparkline:{opacity:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(r=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(r)||r.setModel(i)):this.updateSeriesCardProperty(i)},t.prototype.updateHighValueColor=function(n){var t,i;this.getKPICardProperties().ColorSettings.HighValueColor=n;t={colorSettings:{highColor:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateLowValueColor=function(n){var t,i;this.getKPICardProperties().ColorSettings.LowValueColor=n;t={colorSettings:{lowColor:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateNeutralColor=function(n){var t,i;this.getKPICardProperties().ColorSettings.NeutralColor=n;t={colorSettings:{neutralColor:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateBackgroundImageMode=function(n){var t,i;this.getKPICardProperties().BackgroundSettings.Image.ImageMode=n;t={backgroundSettings:{mode:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateBackgroundTransparency=function(n,t){var i,r;t===void 0&&(t=!0);t&&(this.getKPICardProperties().BackgroundSettings.Transparency=n);i={backgroundSettings:{opacity:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(r=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(r)||r.setModel(i)):this.updateSeriesCardProperty(i)},t.prototype.backgroundImageVisibility=function(n){var t,i;this.getKPICardProperties().BackgroundSettings.Image.Visibility=n;t={backgroundSettings:{showImage:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateSeparatorColor=function(n,t){var i,r;t===void 0&&(t=!0);t&&(this.getKPICardProperties().SeparatorSettings.Color=n);i={separator:{color:n}};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(r=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(r)||r.setModel(i)):this.updateSeriesCardProperty(i)},t.prototype.updateFixedlayout=function(n){var t,i;this.getKPICardProperties().IsFixedLayout=n;this.propertyPanel.updateItemVisibility("KPICard","BasicSettings","ResponsiveMargin",n);t={isFixedLayout:n};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateResponsiveMargin=function(n){var t,i;this.getKPICardProperties().ResponsiveMargin=n;t={responsiveMargin:n};BoldBIDashboard.isNullOrUndefined(this.kpiCardContent)?(i=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.UpdateLink=function(n){this.widgetJson.UrlLink.EnableLink=n.EnableLink;this.widgetJson.UrlLink.LinkType=n.LinkType;this.widgetJson.UrlLink.GridUrlType=n.GridUrlType;this.widgetJson.UrlLink.PassingParameters=n.PassingParameters;this.widgetJson.UrlLink.UrlPath=n.UrlPath;!BoldBIDashboard.isNullOrUndefined(this.kpiCardItem)&&n.EnableLink?this.kpiCardItem.addClass("e-kpicard-cursor-pointer"):this.kpiCardItem.removeClass("e-kpicard-cursor-pointer");!this.kpiCardItem.hasClass("e-kpicard-single")&&this.kpiCardContent.length>0&&(this.widgetJson.FilterSettings.ActAsMasterWidget||n.EnableLink?this.kpiCardContent.addClass("e-dbrd-master-widget"):this.kpiCardContent.removeClass("e-dbrd-master-widget"))},t.prototype.renderHighValueIconDropDown=function(n,t,i){var r=this.widgetHelper.getCurrentWidgetInstance();BoldBIDashboard.isNullOrUndefined(n)?this.updateIconDropDownElement(t,i,r):this.renderIconDropDownElement(n,t,i,r)},t.prototype.renderLowValueIconDropDown=function(n,t,i){var r=this.widgetHelper.getCurrentWidgetInstance();BoldBIDashboard.isNullOrUndefined(n)?this.updateIconDropDownElement(t,i,r):this.renderIconDropDownElement(n,t,i,r)},t.prototype.renderNeutralValueIconDropDown=function(n,t,i){var r=this.widgetHelper.getCurrentWidgetInstance();BoldBIDashboard.isNullOrUndefined(n)?this.updateIconDropDownElement(t,i,r):this.renderIconDropDownElement(n,t,i,r)},t.prototype.renderImageBrowseBox=function(n,t,i){BoldBIDashboard.isNullOrUndefined(n)?(this.propertyPanel.updateItemVisibility("KPICard","Image","Browse",i.isVisible),this.resetImageConfiguration()):(this.sampleContainer=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%",display:BoldBIDashboard.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designerId+"_"+t+"_"+i.name+"_container"}),this.sampleContainer.addClass("bbi-dbrd-designer-hoverable"),this.sampleContainer.attr("data-tooltip","<span> Recommended files: <b> png, jpeg, jpg <\/b> <\/span> <br> <span> Recommended size: <b> Maximum 5 MB <\/b> <\/span>"),this.localFieldTable=BoldBIDashboard.buildTag("table.bbi-designer-dsconfig-table","",{width:"100%",height:"50px"},{unselectable:"on",id:this.designerId+"_image_local_table"}),this.renderImageBrowseTable(),this.renderImageUploadBox(),this.sampleContainer.append(this.localFieldTable),n.append(this.sampleContainer))},t.prototype.renderBackgroundImageBrowseBox=function(n,t,i){BoldBIDashboard.isNullOrUndefined(n)?(this.propertyPanel.updateItemVisibility("KPICard","Background","BackgroundImageBrowse",i.isVisible),this.resetBackgroundImageConfiguration()):(this.backgroundImageSampleContainer=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%",display:BoldBIDashboard.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designerId+"_"+t+"_"+i.name+"_container"}),this.backgroundImageSampleContainer.addClass("bbi-dbrd-designer-hoverable"),this.backgroundImageSampleContainer.attr("data-tooltip","<span> Recommended files: <b> png, jpeg, jpg <\/b> <\/span> <br> <span> Recommended size: <b> Maximum 5 MB <\/b> <\/span>"),this.backgroundImageLocalFieldTable=BoldBIDashboard.buildTag("table.bbi-designer-dsconfig-table","",{width:"100%",height:"50px"},{unselectable:"on",id:this.designerId+"_image_local_table"}),this.renderBackgroundImageBrowseTable(),this.renderBackgroundImageUploadBox(),this.backgroundImageSampleContainer.append(this.backgroundImageLocalFieldTable),n.append(this.backgroundImageSampleContainer))},t.prototype.renderIconDropDownElement=function(n,t,i,r){var f=BoldBIDashboard.buildTag("div","",{"margin-bottom":"15px",display:"inline-block"},{id:this.designerId+"_"+t+"_"+i.name+"_container"}),e=BoldBIDashboard.buildTag("div.e-kpi-card-layout-settings-icon-name-div","",{width:(this.propertyPanel.propertyPanelContainer.width()-33)*47/100+"px"}),o=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily e-kpi-card-layout-settings-icon-name-text","",{}),c;o.text(i.name==="HighValueIcon"?"High":i.name==="LowValueIcon"?"Low":"Neutral");e.append(o);f.append(e);var s=BoldBIDashboard.buildTag("div","",{width:(this.propertyPanel.propertyPanelContainer.width()-33)*57/100+"px",display:"inline-block","margin-top":"3px"}),u=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:this.designerId+"_"+t+"_"+i.name+"_dropdown","data-icon-id":i.name}),h=BoldBIDashboard.buildTag("div","",{},{id:this.designerId+"_"+t+"_"+i.name+"_dropdown_icon_list"});h.append(this.designerInstance.modules.util.getDropDownContentForIcon(!0));u.append(h);s.append(u);f.append(s);n.append(f);u.BoldBIDashboardDropDownList({targetID:this.designerId+"_"+t+"_"+i.name+"_dropdown_icon_list",cssClass:"bbi-dbrd-control bbi-dbrd-designer-icon-drpdwn bbi-dbrd-designer-icon-drpdwn-popup",popupWidth:200,popupHeight:210,width:"43px",height:"28px",select:this.bbdesigner$.proxy(this.selectionChanged,u,this)});c=u.data("BoldBIDashboardDropDownList");this.selectIconByIndex(c,i.name,r)},t.prototype.updateIconDropDownElement=function(n,t,i){if(!BoldBIDashboard.isNullOrUndefined(i)){var r=i.designerInstance.element.find("#"+this.designerId+"_"+n+"_"+t.name+"_dropdown").data("BoldBIDashboardDropDownList");this.selectIconByIndex(r,t.name,i)}},t.prototype.selectionChanged=function(n,t){if(!BoldBIDashboard.isNullOrUndefined(t.model)){var e=n.widgetHelper.getCurrentWidgetInstance(),o=t.model.targetID,s=n.designerInstance.element.find("#"+o),i=n.bbdesigner$(s[0].parentElement);if(i.removeAttr("icon-type"),i.removeAttr("data-type"),i.removeAttr("data-value"),!t.model.showCheckbox&&t.model.multiSelectMode==="none"){n.bbdesigner$(i[0].parentElement).find("#"+i[0].parentElement.id+"_selectedIcon").length>0&&n.bbdesigner$(i[0].parentElement).find("#"+i[0].parentElement.id+"_selectedIcon").remove();n.bbdesigner$(i).css({display:"none"});var r=BoldBIDashboard.buildTag("span.e-selected-drpdwn-icon","",{},{id:i[0].parentElement.id+"_selectedIcon"}),u=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ColorIconType,t.itemId),h=n.designerInstance.modules.util.getIconClassName(u),f=BoldBIDashboard.buildTag("div","",{"padding-left":"3px"},{"class":"e-icon-collection e-color-custom-icon"});r.append(f);f.addClass(h);n.bbdesigner$(r).insertBefore(i);e.updateIndicatorIconType(u,i.attr("data-icon-id"))}}},t.prototype.updateIndicatorIconType=function(n,t){var i=!1;switch(t){case"HighValueIcon":this.getKPICardProperties().IndicatorSettings.HighValueType!==n&&(this.updateHighValueIconForIndicator(n),i=!0);break;case"LowValueIcon":this.getKPICardProperties().IndicatorSettings.LowValueType!==n&&(this.updateLowValueIconForIndicator(n),i=!0);break;case"NeutralValueIcon":this.getKPICardProperties().IndicatorSettings.WarningType!==n&&(this.updateNeutralValueIconForIndicator(n),i=!0)}i&&this.designerInstance.modules.serialization.notifyChange()},t.prototype.updateHighValueIconForIndicator=function(n){var r,i,t;if(this.getKPICardProperties().IndicatorSettings.HighValueType=n,r={icon:{highValueIcon:this.designerInstance.modules.util.getIconClassName(this.getKPICardProperties().IndicatorSettings.HighValueType)}},BoldBIDashboard.isNullOrUndefined(this.kpiCardContent))t=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.icon.isIconCustomized||t.setModel(r);else for(i=0;i<this.kpiCardContent.children().length;i++)t=this.bbdesigner$(this.kpiCardContent.children()[i]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.icon.isIconCustomized||t.setModel(r)},t.prototype.updateLowValueIconForIndicator=function(n){var r,i,t;if(this.getKPICardProperties().IndicatorSettings.LowValueType=n,r={icon:{lowValueIcon:this.designerInstance.modules.util.getIconClassName(this.getKPICardProperties().IndicatorSettings.LowValueType)}},BoldBIDashboard.isNullOrUndefined(this.kpiCardContent))t=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.icon.isIconCustomized||t.setModel(r);else for(i=0;i<this.kpiCardContent.children().length;i++)t=this.bbdesigner$(this.kpiCardContent.children()[i]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.icon.isIconCustomized||t.setModel(r)},t.prototype.updateNeutralValueIconForIndicator=function(n){var r,i,t;if(this.getKPICardProperties().IndicatorSettings.WarningType=n,r={icon:{neutralValueIcon:this.designerInstance.modules.util.getIconClassName(this.getKPICardProperties().IndicatorSettings.WarningType)}},BoldBIDashboard.isNullOrUndefined(this.kpiCardContent))t=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.icon.isIconCustomized||t.setModel(r);else for(i=0;i<this.kpiCardContent.children().length;i++)t=this.bbdesigner$(this.kpiCardContent.children()[i]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.icon.isIconCustomized||t.setModel(r)},t.prototype.selectIconByIndex=function(n,t,i){if(!BoldBIDashboard.isNullOrUndefined(n)){n.items.parents("ul").css({"grid-template-rows":"19% 19% 19% 19% 19%",height:"200px"});var r=t==="HighValueIcon"?i.getKPICardProperties().IndicatorSettings.HighValueType:t==="LowValueIcon"?i.getKPICardProperties().IndicatorSettings.LowValueType:i.getKPICardProperties().IndicatorSettings.WarningType,u=n.items.parents("ul").find("li[data-icon-id="+r+"]"),f=this.bbdesigner$(n.items).index(u);n.selectItemByIndex(f)}},t.prototype.renderImageBrowseTable=function(){var t=BoldBIDashboard.buildTag("tr","",{}),s=BoldBIDashboard.buildTag("td","",{}),n=BoldBIDashboard.buildTag("table","",{unselectable:"on"}),i=BoldBIDashboard.buildTag("tr","",{},{}),r=BoldBIDashboard.buildTag("tr","",{},{}),p=BoldBIDashboard.buildTag("td","",{}),u,f;this.progressTxt=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label","",{float:"left"},{id:this.designerId+"_image_progress_tr"});u=BoldBIDashboard.buildTag("td","",{},{id:this.designerId+"_image_path_error_icon_td"});f=BoldBIDashboard.buildTag("td","",{},{colspan:"2"});this.designerInstance.modules.util.renderErrIndictor(u,this.designerId);var e=BoldBIDashboard.buildTag("tr","",{height:"22.5px"},{id:this.designerId+"_image_path_td"}),h=BoldBIDashboard.buildTag("tr.e-progresserrmsg","",{height:"22.5px",display:"none"},{id:this.designerId+"_image_progresserr_tr"}),c=BoldBIDashboard.buildTag("td","",{}),w=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label","",{"font-size":"12px","font-weight":"normal"},{id:this.designerId+"_image_progresserr_tr"}),l=BoldBIDashboard.buildTag("td","",{},{colspan:"2"}),a=BoldBIDashboard.buildTag("td","",{},{}),v=BoldBIDashboard.buildTag("td","",{float:"right",width:"172px"},{});this.filePath=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-content-label","",{height:"25px","border-right":"0px","padding-bottom":"0.5px","padding-top":"0.5px",width:"213px","margin-left":"4px"},{id:this.designerId+"KpiCard_image_path",type:"text",readonly:"readonly"});BoldBIDashboard.isNullOrUndefined(this.getKPICardProperties().ImageSettings.ImageName)||this.filePath.val(this.getKPICardProperties().ImageSettings.ImageName);var o=BoldBIDashboard.buildTag("div.bbi-dbrd-btn-secondary bbi-dbrd-btn-small e-dbrd-browse-image-button","",{display:"inline-block","margin-left":"-41px","min-width":"0px"},{id:this.designerId+"_file_datasource_browse"}),b=BoldBIDashboard.buildTag("span.bbi-designer-horizontal-browse bbi-designer-browse-icon","",{"font-size":"16px","line-height":"28px"}),y=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-top":"13px"});y.text("Browse Image");v.append(y);this.localFieldTable.append(t);t.append(v);s.append(n);t.append(s);n.append(i);i.append(p);i.append(u);n.append(e,r.clone(),r);l.append(this.filePath);e.append(l);e.append(a);a.append(o);f.append(this.progressTxt);r.append(f);c.append(w);h.append(c);o.on("click",this.bbdesigner$.proxy(this.onImageBrowseClick,this));o.append(b);n.append(h)},t.prototype.renderImageUploadBox=function(){var n=this,t=BoldBIDashboard.buildTag("div","",{height:"0px"},{id:this.designerId+"kpiCard_image_upload"});this.designerInstance.element.append(t);this.ejUploadBox=t.BoldBIDashboardUploadbox({width:"0px",height:"0px",uploadName:"image",extensionsAllow:".jpg,.png,.gif,.jpeg,.bmp,.emf,.jfif,.jpe,.rle,.tif,.tiff,.wmf,.dib,.ico",autoUpload:!0,showFileDetails:!1,dialogAction:{content:this.designerInstance.element},fileSize:52428800,saveUrl:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.uploadimage,fileSelect:this.bbdesigner$.proxy(this.onImagefileSelect,this),error:this.bbdesigner$.proxy(this.onImageuploadError,this),success:this.bbdesigner$.proxy(this.onImageuploadSuccess,this),inProgress:this.bbdesigner$.proxy(this.imagefileProgress,this),beforeSend:this.bbdesigner$.proxy(function(t){n.designerInstance.beforeSendRequestForUploadbox(n.designerInstance,"UploadAction",t)},this)}).data("BoldBIDashboardUploadbox");this.designerInstance.element.find(this.designerId+"_img_upload_SelectButton").hide()},t.prototype.resetImageConfiguration=function(){var n=this.widgetHelper.getCurrentWidgetInstance();this.designerInstance.element.find("#"+this.designerId+"KpiCard_image_path").val(n.getKPICardProperties().ImageSettings.ImageName);this.designerInstance.element.find("#"+this.designerId+"_image_progress_tr").css("display","none")},t.prototype.onImageBrowseClick=function(){this.designerInstance.element.find("#"+this.designerId+"kpiCard_image_upload .e-uploadinput").click()},t.prototype.onImagefileSelect=function(n){this.resetImageConfiguration();n.files.length!==0&&(n.files[0].size>n.model.fileSize?(n.cancel=!0,this.progressTxt.text("")):(this.designerInstance.element.find("#"+this.designerId+"_image_progress_tr").css("display","inline-block"),this.progressTxt.text("Initiating upload..."),this.fileName=this.fileExt=null,this.filePath.val(n.files[0].name)));BoldBIDashboard.browserInfo().name!=="msie"&&this.ejUploadBox._uploadFileListDelete()},t.prototype.onImageuploadError=function(){this.progressTxt.text("Upload failed.")},t.prototype.onImageuploadSuccess=function(n){var r=this.widgetHelper.getCurrentWidgetInstance(),t,f,e,u,i;if(this.progressTxt.css("display","none"),t=JSON.parse(n.responseText),t&&t.Status){if(r.getKPICardProperties().ImageSettings.FilePath=t.Data.fileId+t.Data.ext,r.getKPICardProperties().ImageSettings.ImageName=t.Data.fileName,f="data:image/"+t.Data.ext+";base64,"+t.Data.source,e={image:{data:f}},BoldBIDashboard.Dashboard.Resource.addImage(r.getKPICardProperties().ImageSettings.FilePath,f),BoldBIDashboard.isNullOrUndefined(r.kpiCardContent))i=r.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.image.isImageCustomized||i.setModel(e);else for(u=0;u<r.kpiCardContent.children().length;u++)i=this.bbdesigner$(r.kpiCardContent.children()[u]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.image.isImageCustomized||i.setModel(e);this.designerInstance.modules.serialization.notifyChange()}else this.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.upload,this.locale.errorMessage.failedToUploadFile,IconType.errors,AlertType.Alert,!1,t?t.Message:null)},t.prototype.imagefileProgress=function(n){this.progressTxt.text("Uploading..."+n.percentage+"%")},t.prototype.renderBackgroundImageBrowseTable=function(){var t=BoldBIDashboard.buildTag("tr","",{}),s=BoldBIDashboard.buildTag("td","",{}),n=BoldBIDashboard.buildTag("table","",{unselectable:"on"}),i=BoldBIDashboard.buildTag("tr","",{},{}),r=BoldBIDashboard.buildTag("tr","",{},{}),p=BoldBIDashboard.buildTag("td","",{}),u,f;this.backgroundImageProgressTxt=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label","",{float:"left"},{id:this.designerId+"_backgroundimage_progress_tr"});u=BoldBIDashboard.buildTag("td","",{},{id:this.designerId+"_image_path_error_icon_td"});f=BoldBIDashboard.buildTag("td","",{},{colspan:"2"});this.designerInstance.modules.util.renderErrIndictor(u,this.designerId);var e=BoldBIDashboard.buildTag("tr","",{height:"22.5px"},{id:this.designerId+"_image_path_td"}),h=BoldBIDashboard.buildTag("tr.e-progresserrmsg","",{height:"22.5px",display:"none"},{id:this.designerId+"_image_progresserr_tr"}),c=BoldBIDashboard.buildTag("td","",{}),w=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label","",{"font-size":"12px","font-weight":"normal"},{id:this.designerId+"_image_progresserr_tr"}),l=BoldBIDashboard.buildTag("td","",{},{colspan:"2"}),a=BoldBIDashboard.buildTag("td","",{},{}),v=BoldBIDashboard.buildTag("td","",{float:"right",width:"172px"},{});this.backgroundImageFilePath=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-content-label","",{height:"25px","border-right":"0px","padding-bottom":"0.5px","padding-top":"0.5px",width:"213px","margin-left":"4px"},{id:this.designerId+"_backgroundimage_path",type:"text",readonly:"readonly"});BoldBIDashboard.isNullOrUndefined(this.getKPICardProperties().BackgroundSettings.Image.ImageName)||this.backgroundImageFilePath.val(this.getKPICardProperties().BackgroundSettings.Image.ImageName);var o=BoldBIDashboard.buildTag("div.bbi-dbrd-btn-secondary bbi-dbrd-btn-small e-dbrd-browse-image-button","",{display:"inline-block","margin-left":"-41px","min-width":"0px"},{id:this.designerId+"_file_datasource_browse"}),b=BoldBIDashboard.buildTag("span.bbi-designer-horizontal-browse bbi-designer-browse-icon","",{"font-size":"16px","line-height":"28px"}),y=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-top":"13px"});y.text("Browse Image");v.append(y);this.backgroundImageLocalFieldTable.append(t);t.append(v);s.append(n);t.append(s);n.append(i);i.append(p);i.append(u);n.append(e,r.clone(),r);l.append(this.backgroundImageFilePath);e.append(l);e.append(a);a.append(o);f.append(this.backgroundImageProgressTxt);r.append(f);c.append(w);h.append(c);o.on("click",this.bbdesigner$.proxy(this.onBackgroundImageBrowseClick,this));o.append(b);n.append(h)},t.prototype.renderBackgroundImageUploadBox=function(){var n=this,t=BoldBIDashboard.buildTag("div","",{height:"0px"},{id:this.designerId+"kpiCard_backgroundimage_upload"});this.designerInstance.element.append(t);this.backgroundImageEjUploadBox=t.BoldBIDashboardUploadbox({width:"0px",height:"0px",uploadName:"image",extensionsAllow:".jpg,.png,.gif,.jpeg,.bmp,.emf,.jfif,.jpe,.rle,.tif,.tiff,.wmf,.dib,.ico",autoUpload:!0,showFileDetails:!1,dialogAction:{content:this.designerInstance.element},fileSize:52428800,saveUrl:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.uploadimage,fileSelect:this.bbdesigner$.proxy(this.onBackgroundImagefileSelect,this),error:this.bbdesigner$.proxy(this.onBackgroundImageuploadError,this),success:this.bbdesigner$.proxy(this.onBackgroundImageuploadSuccess,this),inProgress:this.bbdesigner$.proxy(this.backgroundimagefileProgress,this),beforeSend:this.bbdesigner$.proxy(function(t){n.designerInstance.beforeSendRequestForUploadbox(n.designerInstance,"UploadAction",t)},this)}).data("BoldBIDashboardUploadbox");this.designerInstance.element.find(this.designerId+"_img_upload_SelectButton").hide()},t.prototype.resetBackgroundImageConfiguration=function(){var n=this.widgetHelper.getCurrentWidgetInstance();this.designerInstance.element.find("#"+this.designerId+"_backgroundimage_path").val(n.getKPICardProperties().BackgroundSettings.Image.ImageName);this.designerInstance.element.find("#"+this.designerId+"_backgroundimage_progress_tr").css("display","none")},t.prototype.onBackgroundImageBrowseClick=function(){this.designerInstance.element.find("#"+this.designerId+"kpiCard_backgroundimage_upload .e-uploadinput").click()},t.prototype.onBackgroundImagefileSelect=function(n){this.resetBackgroundImageConfiguration();n.files.length!==0&&(n.files[0].size>n.model.fileSize?(n.cancel=!0,this.backgroundImageProgressTxt.text("")):(this.designerInstance.element.find("#"+this.designerId+"_backgroundimage_progress_tr").css("display","inline-block"),this.backgroundImageProgressTxt.text("Initiating upload..."),this.backgroundImageFileName=this.backgroundImageFileExt=null,this.backgroundImageFilePath.val(n.files[0].name)));BoldBIDashboard.browserInfo().name!=="msie"&&this.ejUploadBox._uploadFileListDelete()},t.prototype.onBackgroundImageuploadError=function(){this.backgroundImageProgressTxt.text("Upload failed.")},t.prototype.onBackgroundImageuploadSuccess=function(n){var r=this.widgetHelper.getCurrentWidgetInstance(),t,f,e,u,i;if(this.backgroundImageProgressTxt.css("display","none"),t=JSON.parse(n.responseText),t&&t.Status){if(r.getKPICardProperties().BackgroundSettings.Image.FilePath=t.Data.fileId+t.Data.ext,r.getKPICardProperties().BackgroundSettings.Image.ImageName=t.Data.fileName,f="data:image/"+t.Data.ext+";base64,"+t.Data.source,e={backgroundSettings:{image:f}},BoldBIDashboard.Dashboard.Resource.addImage(r.getKPICardProperties().BackgroundSettings.Image.FilePath,f),BoldBIDashboard.isNullOrUndefined(r.kpiCardContent))i=r.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.backgroundSettings.isImageCustomized||i.setModel(e);else for(u=0;u<r.kpiCardContent.children().length;u++)i=this.bbdesigner$(r.kpiCardContent.children()[u]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.backgroundSettings.isImageCustomized||i.setModel(e);this.designerInstance.modules.serialization.notifyChange()}else this.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.upload,this.locale.errorMessage.failedToUploadFile,IconType.errors,AlertType.Alert,!1,t?t.Message:null)},t.prototype.backgroundimagefileProgress=function(n){this.backgroundImageProgressTxt.text("Uploading..."+n.percentage+"%")},t.prototype.kpiCardDispose=function(){var n=null,t;if(BoldBIDashboard.isNullOrUndefined(this.kpiCardContent))n=this.kpiCardElement.data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(n)||n.destroy();else for(t=0;t<this.kpiCardContent.children().length;t++)n=this.bbdesigner$(this.kpiCardContent.children()[t]).data("BoldBIDashboardKPICard"),BoldBIDashboard.isNullOrUndefined(n)||n.destroy();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.KPICard)},t.prototype.wireEvents=function(){this.designerInstance.element.on("click",".e-kpicard-widget-color-settings-button",this.bbdesigner$.proxy(this.openAdvancedColorSettings,this))},t.prototype.unwireEvents=function(){this.designerInstance.element.off("click",".e-kpicard-widget-color-settings-button",this.bbdesigner$.proxy(this.openAdvancedColorSettings,this))},t.prototype.IsCardConfigured=function(){var n=this.getBindedColumnIndex(this.DataGroupInfo);return this.isActAsSlaveForAnyPoP?this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[n.actualValueIndex].FieldInfos.length>0&&this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design:this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[n.actualValueIndex].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[n.targetValueIndex].FieldInfos.length>0},t.prototype.getColorFields=function(){return[{Name:WidgetProperty.Font,DisplayName:""},{Name:WidgetProperty.TitleColor,DisplayName:"Title",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.BackgroundColor,DisplayName:"Background",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.FillColor,DisplayName:"Sparkline",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.Icon,DisplayName:"Icon",ColorPicker:ColorSetColorPickers.IconColorPicker,IncludeIconAlignment:!1},{Name:WidgetProperty.PrimaryValueColor,DisplayName:"KPI Value",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.Image,DisplayName:"Image"},{Name:WidgetProperty.BackgroundImage,DisplayName:"Background Image"}]},t.prototype.renderDefaultColorSettings=function(n,t,i){var u=this.widgetHelper.getCurrentWidgetInstance(),o,s,e,h,v;if(!BoldBIDashboard.isNullOrUndefined(u))if(o=this.IsCardConfigured(),this.categoryId=this.designerId+"_"+t+"_"+i.categoryName,this.defaultPaletteContainer=this.designerInstance.element.find("#"+this.categoryId),this.defaultPaletteContainer.length!==0||BoldBIDashboard.isNullOrUndefined(n)){if(!BoldBIDashboard.isNullOrUndefined(this.defaultPaletteContainer)&&this.defaultPaletteContainer.length>0){var y=this.defaultPaletteContainer.find("#"+this.categoryId+"_palatte_body"),a=this.defaultPaletteContainer.find("#"+this.categoryId+"_palatte_button"),e=this.defaultPaletteContainer.find("#"+this.categoryId+"_color_settings_button"),r=this.defaultPaletteContainer.find("#"+this.categoryId+"_advance_color_palatte_body_element");y.empty();h=u.defaultPaletteContainer.find("#"+this.categoryId+"_advance_color_palatte_check_element");BoldBIDashboard.isNullOrUndefined(h)||(v=h.data("BoldBIDashboardCheckBox"),v.option("checked",u.getKPICardProperties().EnableColorSettings));o?(r.css("display","block"),this.updateAdvanceButtonVisibility(a,e,u.getKPICardProperties().EnableColorSettings)):(r.css("display","none"),a.css("display","none"))}}else{this.defaultPaletteContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-designer-scroll-style-3","",{width:"460px"},{id:this.categoryId});var r=BoldBIDashboard.buildTag("div","",{},{id:this.categoryId+"_advance_color_palatte_body_element"}),f=BoldBIDashboard.buildTag("div","",{},{id:this.categoryId+"_palatte_button"}),c=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily e-dbrd-property-advance-color","",{},{id:this.categoryId+"_advance_color_palatte_text_element"}),l=BoldBIDashboard.buildTag("div","",{},{id:this.categoryId+"_advance_color_palatte_check_element"});r.append(c,l);this.defaultPaletteContainer.append(r,f);c.text(this.locale.propertyPanel.seriesPaletteSettings.advancedSetting);l.BoldBIDashboardCheckBox({checked:this.getKPICardProperties().EnableColorSettings,change:this.bbdesigner$.proxy(this.showAdvanceColorPalette,u),width:(this.propertyPanel.propertyPanelContainer.width()-33)*57/100-15+"px",cssClass:"e-designer-prop-checkbox"});n.append(this.defaultPaletteContainer);s=BoldBIDashboard.buildTag("div.e-advance-option-wrap","",{"margin-left":"205px"},{});e=BoldBIDashboard.buildTag("button.e-kpicard-widget-color-settings-button e-advanced-color-settings-button e-advanced-color-settings-button-alignment bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.propertyPanel.customizeBtnText,{},{id:this.categoryId+"_color_settings_button",type:"button"});s.append(e);f.append(s);o?(r.css("display","block"),this.updateAdvanceButtonVisibility(f,e,this.getKPICardProperties().EnableColorSettings)):(r.css("display","none"),f.css("display","none"))}},t.prototype.updateAdvanceButtonVisibility=function(n,t,i){n.css("display","block");i?t.removeAttr("disabled"):t.attr("disabled","disabled")},t.prototype.showAdvanceColorPalette=function(n){var t=this.widgetHelper.getCurrentWidgetInstance(),i;n.isInteraction&&!0&&(i=t.defaultPaletteContainer.find("#"+t.categoryId+"_color_settings_button"),n.isChecked?(i.removeAttr("disabled"),t.openAdvancedColorSettings(null)):(i.attr("disabled","disabled"),t.getKPICardProperties().ColorCustomization=null,this.dataConfigurationInstance.postDraggedFields()),t.getKPICardProperties().EnableColorSettings=n.isChecked,this.designerInstance.modules.serialization.notifyChange())},t.prototype.openAdvancedColorSettings=function(){var n=this.widgetHelper.getCurrentWidgetInstance(),t=new ColorCustomization,u=new BoldBIDashboard.DashboardDesignerUtility.AdvancedColorCustomization(this.designerInstance),i,r;BoldBIDashboard.isNullOrUndefined(n.getKPICardProperties().ColorCustomization)?t.Type=ColorCustomizationType.Rule:t=this.bbdesigner$.extend(!0,{},n.getKPICardProperties().ColorCustomization);i=null;i={text:"KPI Value",value:"KPIValue",type:"Numeric",id:"KPIValue",SummaryType:"SUM",isMeasure:!0,isAggregated:!1};t=this.getSolidColorInfo(t,n);r={colorCustomizationObj:t,DataGroupInfo:n.DataGroupInfo,colorFields:n.colorFields,colorTypeCollection:["Rule"],defaultBasedOnField:i,isKPICard:!0,ignoreCustomIcon:!0};u.populateUI(r,n,"updateAdvancedColorSettings")},t.prototype.getSolidColorInfo=function(n,t){var i=this.getDataGroupID(),f=BoldBIDashboard.isNullOrUndefined(n.SolidColorInfo)?[]:JSON.parse(JSON.stringify(n.SolidColorInfo)),u,r;for(n.SolidColorInfo=[],u=function(r){BoldBIDashboard.isNullOrUndefined(n.SolidColorInfo[r])&&(n.SolidColorInfo.push(new SolidColorSet),n.SolidColorInfo[r].BasedOn.FieldId=i[r].DataId,n.SolidColorInfo[r].BasedOn.SummaryType=SummaryType.NONE,n.SolidColorInfo[r].BasedOn.UniqueColumnName=i[r].UniqueColumnName,t.getDefaultColorSets(n.SolidColorInfo[r].DefaultColorSets));var u=f.filter(function(n){return n.BasedOn.UniqueColumnName===i[r].UniqueColumnName});u.length>0&&(n.SolidColorInfo.splice(r,1),n.SolidColorInfo.push(u[0]))},r=0;r<i.length;r++)u(r);return n},t.prototype.getDataGroupID=function(){var n=this.widgetHelper.getCurrentWidgetInstance(),t;n=BoldBIDashboard.isNullOrUndefined(n)?this:n;var r=this.getBindedColumnIndex(n.DataGroupInfo),i=n.DataGroupInfo.FieldContainers[r.targetValueIndex].length!==0?n.DataGroupInfo.FieldContainers[r.targetValueIndex].FieldInfos:[],u=[];for(t=0;t<i.length;t++)u.push({DataId:i[t].Id,UniqueColumnName:i[t].UniqueColumnName,Field:i[t].Name});return u},t.prototype.getDefaultColorSets=function(n){for(var t=0;t<this.defaultColorPalette.length;t++)n.push({Name:"color_"+(t+1),IsEdited:!1,Color:this.defaultColorPalette[t%this.defaultColorPalette.length]})},t.prototype.updateAdvancedColorSettings=function(n,t){var i=this.widgetHelper.getCurrentWidgetInstance(),u,r,f;t?BoldBIDashboard.isNullOrUndefined(i.getKPICardProperties().ColorCustomization)&&(u=i.defaultPaletteContainer.find("#"+i.categoryId+"_color_settings_button"),r=i.defaultPaletteContainer.find("#"+this.categoryId+"_advance_color_palatte_check_element"),BoldBIDashboard.isNullOrUndefined(r)||(f=r.data("BoldBIDashboardCheckBox"),f.option("checked",!t)),u.attr("disabled","disabled"),i.getKPICardProperties().EnableColorSettings=!t):(i.getKPICardProperties().ColorCustomization=n,this.dataConfigurationInstance.postDraggedFields())},t.prototype.updateColorCustomization=function(){var n=this.getKPICardProperties(),t=this.getBindedColumnIndex(this.DataGroupInfo);if(!BoldBIDashboard.isNullOrUndefined(n.ColorCustomization)){if(n.ColorCustomization=!this.IsCardConfigured()||n.ColorCustomization.RuleRangeSettings.BasedOn.SummaryType===SummaryType.NONE&&this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[t.seriesValueIndex].FieldInfos.length===0?null:n.ColorCustomization,this.DataGroupInfo.FieldContainers[t.seriesValueIndex].FieldInfos.length>0){var i=this.DataGroupInfo.FieldContainers[t.seriesValueIndex].FieldInfos[0].Id,r=this.DataGroupInfo.FieldContainers[t.sparklineValueIndex].FieldInfos.length>0?this.DataGroupInfo.FieldContainers[t.sparklineValueIndex].FieldInfos[0].Id:"",u=this.DataGroupInfo.FieldContainers[t.imageIndex].FieldInfos.length>0?this.DataGroupInfo.FieldContainers[t.imageIndex].FieldInfos[0].Id:"",f=this.DataGroupInfo.FieldContainers[t.backgroundImageIndex].FieldInfos.length>0?this.DataGroupInfo.FieldContainers[t.backgroundImageIndex].FieldInfos[0].Id:"";n.ColorCustomization=(i===r||i===u||i===f)&&i===n.ColorCustomization.RuleRangeSettings.BasedOn.FieldId&&n.ColorCustomization.RuleRangeSettings.BasedOn.SummaryType!==SummaryType.NONE?null:n.ColorCustomization}BoldBIDashboard.isNullOrUndefined(n.ColorCustomization)&&(this.getKPICardProperties().EnableColorSettings=!1);BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.setMergeAction(!1)}},t.prototype.getConditionalFormattedColor=function(n,t,i){if(BoldBIDashboard.isNullOrUndefined(this.dataValues))return null;var u=this.getBindedColumnIndex(this.DataGroupInfo),r=JSON.parse(this.dataValues.data);return t=t==="KPIValue"?t:t.substring(15),this.DataGroupInfo.FieldContainers[u.seriesValueIndex].FieldInfos.length>0?this.getColorForSeries(r,n,t,i):r[0][t+"_Color_"+n]},t.prototype.getColorForSeries=function(n,t,i,r){for(var f=this.getBindedColumnIndex(this.DataGroupInfo),u=0;u<n.length;u++)if(n[u][this.DataGroupInfo.FieldContainers[f.seriesValueIndex].FieldInfos[0].UniqueColumnName]===r)return n[u][i+"_Color_"+t]},t.prototype.getCustomizedIcon=function(n,t){var r=String.fromCharCode(127),i;return BoldBIDashboard.isNullOrUndefined(n)?n:(i=n.split(r),i[t])},t.prototype.getCustomizedImage=function(n){var i=String.fromCharCode(127),t;return BoldBIDashboard.isNullOrUndefined(n)?n:(t=n.split(i),t[0]==="Embedded"?BoldBIDashboard.Dashboard.Resource.getImage(t[1]):t[1])},t.prototype.validateColor=function(n,t){return BoldBIDashboard.isNullOrUndefined(n)?t:n},t.prototype.isCustomized=function(n){for(var r,t,u=this.getKPICardProperties(),i=0;i<u.ColorCustomization.RuleRangeSettings.RangeColorInfo.length;i++)for(r=u.ColorCustomization.RuleRangeSettings.RangeColorInfo[i],t=0;t<r.PropertyColorPair.length;t++)if(WidgetProperty[r.PropertyColorPair[t].WidgetProperties]===n)return!0;return!1},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.KPICardItem",InternalKPICardItem,window);BoldBIDashboard.DashboardDesignerUtility.KPICardItem.prototype.initialize();__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalNumberCardItem=function(n){function t(t){var i=n.call(this,t,"NumberCard","e-numbercard-item")||this;return i.numberCardItem=null,i.numberCardElement=null,i.dataValues=null,i.defaultColorPalette=[],i.locale=null,i.lightBackgroundColor="#ffffffff",i.lightTitleColor="#505D6FFF",i.lightValueColor="#505D6FFF",i.bbdesigner$=i.designerInstance.bbdesigner$,i.locale=t.getLocalizationContent(),i.widgetJson=new NumberCardProperties(t),i.designerId=i.designerInstance._id,i.propertyPanel=t.modules.propertyPanel,i.colorFields=i.getColorFields(),i.isBackgroundInfoNeeded=!1,i.unwireEvents(),i.wireEvents(),i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.card,GroupId:"eb520ddb-5d82-4bf8-858c-srtf3317230e",Items:[{id:"y12aed7c-c972-43c1-1981-m4m9b89c1901",widgetName:"Number Card",widgetDisplayName:n.itemPanel.widgetTitle.numberCard,cssClass:"bbi-widgeticon bbi-designer-widget-numbercard",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.NumberCardItem",searchCategory:["NumberCard","card"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.numberCard,description:n.itemPanel.widgetDescription.numberCardDesc,dataRequirement:n.itemPanel.widgetDataRequirements.numberCardDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCardProperties",minRowSpan:5,minColSpan:6}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){this.createCardContainer(n,t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.numberCardElement)||this.updateCardSize()},t.prototype.update=function(n){this.updateTitleSubtitleTheme();this.updateNumberCardData(n);this.IsRendered=!0;this.updateThemeInWidget(this.designerInstance.isDarkTypeTheme())},t.prototype.updateContainerPadding=function(){!BoldBIDashboard.isNullOrUndefined(this.contentContainer)&&this.contentContainer.length>0&&(this.contentContainer[0].style.padding="0px",!BoldBIDashboard.isNullOrUndefined(this.numberCardContent)&&this.numberCardContent.length>0&&(this.contentContainer[0].style.paddingTop=this.numberCardContent.length===1&&!this.widgetJson.ContainerSettings.ShowHeader?"0px":this.getControlContainerPadding()))},t.prototype.updateIconContainerBackground=function(){var n=this.ControlContainer.find(".bbi-dbrd-controlIcon-container");if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0&&this.isSeriesCardWithHeader){var i=!BoldBIDashboard.isNullOrUndefined(this.numberCardContent)&&this.numberCardContent.length>0,r=i?this.designerInstance.isViewMode()&&this.designerInstance.isDarkTypeTheme()?1:this.getNumberCardProperties().BackgroundSettings.Transparency:this.getNumberCardProperties().BackgroundSettings.Transparency,t=r===1?this.widgetJson.ContainerSettings.BackgroundSettings.Color:this.getTransparentHexColor(this.widgetJson.ContainerSettings.BackgroundSettings.Color,r);n.css({"background-color":i||this.designerInstance.isViewMode()&&(t.toLocaleLowerCase()==="#ffffff"||t.toLocaleLowerCase()==="#ffffffff")?this.designerInstance.modules.themeHelper.getWidgetTileBackground(null):t})}},t.prototype.updateControlContainerPadding=function(){BoldBIDashboard.isNullOrUndefined(this.getContainerSettings().WidgetPaddingInfo)&&(this.getContainerSettings().WidgetPaddingInfo=new WidgetPaddingInfo,this.getContainerSettings().WidgetPaddingInfo.AutoPadding=!0,this.getContainerSettings().WidgetPaddingInfo.Padding=this.getControlContainerPaddingValue());var n=this.controlContainer.find(".bbi-dbrd-control-container-wrapper");!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0&&(n[0].style.padding="0px",!BoldBIDashboard.isNullOrUndefined(this.numberCardContent)&&this.numberCardContent.length>0&&(n[0].style.paddingTop=this.numberCardContent.length===1&&!this.widgetJson.ContainerSettings.ShowHeader?"0px":this.getControlContainerPadding()))},t.prototype.applyWidgetTheme=function(n){this.updateTitleSubtitleTheme();this.updateThemeInWidget(n);this.updateCardSize()},t.prototype.canCombineRequest=function(){var n=this.getBindedColumnIndex(this.DataGroupInfo),t=!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[n.seriesIndex])&&this.DataGroupInfo.FieldContainers[n.seriesIndex].FieldInfos.length>0,i=!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[n.sparklineIndex])&&this.DataGroupInfo.FieldContainers[n.sparklineIndex].FieldInfos.length>0;return t||i?!1:!0},t.prototype.canApplyCustomThemeInDesigner=function(n){var t=this.getNumberCardProperties();if(!t.EnableColorSettings&&this.designerInstance.isEnableCustomDashboardTheme())switch(n){case"Title":return t.TitleSettings.Color==="#505D6F";case"Background":return t.BackgroundSettings.Color==="#ffffff";case"Value":return t.MeasureSettings.Color==="#505D6F";default:return!1}else return!1},t.prototype.updateThemeInWidget=function(n){var r=this.designerInstance.modules.themeHelper.getWidgetTileBackground(null),u=this.designerInstance.modules.themeHelper.getNumberCardTitleTextColor(),i,t;BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getNumberCardProperties().ContainerSettings.TextColor,this.designerInstance.modules.themeHelper.getNumberCardHeaderTitle());BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)?((this.canCustomThemeApplied("Title")||this.canApplyCustomThemeInDesigner("Title"))&&this.updateTitleColor(u,!1),(this.canCustomThemeApplied("Background")||this.canApplyCustomThemeInDesigner("Background"))&&this.updateBackgroundColor(r,!1),this.updateControlBackgroundForSeriesCard(this.isSeriesCardWithHeader),this.updateTransparency(this.getNumberCardProperties().BackgroundSettings.Transparency,!1),this.updateSparklineOpacity(this.getNumberCardProperties().SparklineSettings.Opacity,!1),(this.canCustomThemeApplied("Value")||this.canApplyCustomThemeInDesigner("Value"))&&this.updateMeasureColor(this.designerInstance.modules.themeHelper.getNumberCardRightValueTextColor(),!1),BoldBIDashboard.isNullOrUndefined(this.numberCardContent)&&(i={description:{color:this.themeHelper.getWidgetIconColor()}},t=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(t)||t.setModel(i)),this.applyNumberCardFontStyle(),this.applyCardBorderStyle(n),this.numberCardElement.css("background","transparent")):BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this)},t.prototype.updateTitleSubtitleTheme=function(){var n=this.designerInstance.modules.themeHelper.getNumberCardHeaderTitle(),t=this.designerInstance.modules.themeHelper.getNumberCardHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getNumberCardProperties().ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.applyCardBorderStyle=function(){if(!BoldBIDashboard.isNullOrUndefined(this.numberCardContent)){var n=this.designerInstance.modules.themeHelper.getNumberCardBorder();this.numberCardContent.find(".e-numbercard-border-right").css("border-right-color",n);this.numberCardContent.find(".e-numbercard-border-top").css("border-top-color",n);this.numberCardContent.find(".e-numbercard-border-bottom").css("border-bottom-color",n)}},t.prototype.canCustomThemeApplied=function(n){var t=this.getNumberCardProperties();if(t.EnableColorSettings)return!1;switch(n){case"Title":return t.TitleSettings.Color.toLocaleLowerCase()===this.lightTitleColor.toLocaleLowerCase()||t.TitleSettings.Color.toLocaleLowerCase()==="#333333ff";case"Background":return t.BackgroundSettings.Color.toLocaleLowerCase()===this.lightBackgroundColor.toLocaleLowerCase();case"Value":return t.MeasureSettings.Color.toLocaleLowerCase()===this.lightValueColor.toLocaleLowerCase()||t.MeasureSettings.Color.toLocaleLowerCase()==="#333333ff"}return!0},t.prototype.applyNumberCardFontStyle=function(){var r=this,n=this.designerInstance.modules.themeHelper.getNumberCardRightValueFont(),f=this.getNumberCardProperties().MeasureSettings.AutoFontSize?BoldBIDashboard.isNullOrUndefined(n.size)||n.size===""?this.getMeasureFontSizeBasedOnResolution():Number(n.size.split("px")[0]):this.getNumberCardProperties().MeasureSettings.FontSize,e=n.weight,o=n.family,t=this.designerInstance.modules.themeHelper.getNumberCardTitleFont(),s=this.getNumberCardProperties().TitleSettings.AutoFontSize?BoldBIDashboard.isNullOrUndefined(t.size)||t.size===""?Number(this.getFontSizeBasedOnResolution().split("px")[0]):Number(t.size.split("px")[0]):this.getNumberCardProperties().TitleSettings.FontSize,h=t.weight,c=t.family,u={title:{fontSize:s,fontWeight:h,fontFamily:c},measure:{fontSize:f,fontWeight:e,fontFamily:o}},i;BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(u)):(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.resizeCard(),this.updateSeriesCardProperty(u),setTimeout(function(n){BoldBIDashboard.isNullOrUndefined(n.model)||r.designerInstance.designerPanel.hideLoadingIndicator(r.controlContainer)},100,this.designerInstance))},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej1.card.all.min.js",NameSpace:"BoldBIDashboard.Card"},DependentScripts:[]}},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,"BoldBIDashboard.Card")},t.prototype.getFieldContainer=function(){var o=new BoldBIDashboard.Dashboard.FieldContainerForUI,i,r,u,t,f,e;return o.Name="Measure",o.DisplayName=this.locale.fieldContainer.measure,o.ContainerType=FieldContainerType.Numeric,o.CategoryCount=1,i=new BoldBIDashboard.Dashboard.FieldContainerForUI,i.Name="Dimension",i.DisplayName=this.locale.fieldContainer.dimension,i.ContainerType=FieldContainerType.Non_Numeric,i.CategoryCount=1,i.Visibility=Visibility.hidden,r=new BoldBIDashboard.Dashboard.FieldContainerForUI,r.Name="Series",r.DisplayName=this.locale.fieldContainer.series,r.ContainerType=FieldContainerType.Non_Numeric,r.QueryOrder=3,r.CategoryCount=1,u=new BoldBIDashboard.Dashboard.FieldContainerForUI,u.Name="Tooltip",u.DisplayName=this.locale.fieldContainer.hiddenColumns,u.ContainerType=FieldContainerType.Numeric,u.QueryOrder=1,t=new BoldBIDashboard.Dashboard.FieldContainerForUI,t.Name="Sparkline",t.DisplayName=this.locale.fieldContainer.sparkline,t.ContainerType=FieldContainerType.Non_Numeric,t.CategoryCount=1,t.QueryOrder=2,t.canUseInLinking=!1,f=new BoldBIDashboard.Dashboard.FieldContainerForUI,f.Name="Image",f.DisplayName=this.locale.fieldContainer.image,f.ContainerType=FieldContainerType.Non_Numeric,f.canUseInLinking=!1,e=new BoldBIDashboard.Dashboard.FieldContainerForUI,e.Name="BackgroundImage",e.DisplayName=this.locale.fieldContainer.backgroundImage,e.ContainerType=FieldContainerType.Non_Numeric,e.canUseInLinking=!1,[o,i,r,u,t,f,e,n.prototype.getFilterColumn.call(this)]},t.prototype.onFieldSettingsClick=function(n,t){return(n.ContainerName==="Image"||n.ContainerName==="BackgroundImage")&&(t.filter(function(n){return n.Name==="DimensionFilters"})[0].Items.filter(function(n){return n.Name==="ClearDimensionFilter"})[0].IsDisable=!0),n.ContainerName==="Tooltip"&&(t.filter(function(n){return n.Name==="MeasureFormat"})[0].IsVisible=!1),BoldBIDashboard.DashboardUtil.hideRenameMenuOption(t)},t.prototype.getJson=function(){return this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t);BoldBIDashboard.isNullOrUndefined(this.getNumberCardProperties().AnimationSettings)&&(this.getNumberCardProperties().AnimationSettings=new AnimationSettings)},t.prototype.onFieldDragDrop=function(n,t,i){return this.onFieldDragAndDrop(n,t,i)},t.prototype.getPropertyPanelItems=function(){return this.numberCardPropertyPanel()},t.prototype.updatePropertyChange=function(t,i,r,u){n.prototype.updatePropertyChange.call(this,t,i,r,u);this.updateNumberCardProperties(t,i,r,u)},t.prototype.clearFilter=function(n){var t=this.controlContainer;t.find(".e-dbrd-selected-numbercard").remove();t.find(".bbi-numbercard-selected").removeClass("bbi-numbercard-selected");BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this);this.widgetJson.SelectedFilterValues=[];this.isCurrentMaster=!1;this.designerInstance.modules.serialization.notifyChange();BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName)},t.prototype.getMobileViewHeight=function(){var n=this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor;return this.isSeriesCardWithHeader?3*n:this.getMobileViewCardSize(n)},t.prototype.getMobileViewCardSize=function(n){var t=this.getNumberCardProperties();if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)&&this.DataGroupInfo.FieldContainers.length>0){if(t.MeasureSettings.Visibility&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&t.TitleSettings.Visibility&&this.getNumberCardProperties().SparklineSettings.Visibility&&this.DataGroupInfo.FieldContainers[4].FieldInfos.length>0)return 200;if((!t.TitleSettings.Visibility||t.MeasureSettings.Visibility&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0||t.SparklineSettings.Visibility&&this.DataGroupInfo.FieldContainers[4].FieldInfos.length>0)&&(!t.MeasureSettings.Visibility||!(this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0)||t.TitleSettings.Visibility||t.SparklineSettings.Visibility&&this.DataGroupInfo.FieldContainers[4].FieldInfos.length>0)){if(t.TitleSettings.Visibility&&t.MeasureSettings.Visibility&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&(!t.SparklineSettings.Visibility||!(this.DataGroupInfo.FieldContainers[4].FieldInfos.length>0)))return 150;if(t.TitleSettings.Visibility&&t.SparklineSettings.Visibility&&this.DataGroupInfo.FieldContainers[4].FieldInfos.length>0&&(!t.MeasureSettings.Visibility||!(this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0))||t.MeasureSettings.Visibility&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&!t.TitleSettings.Visibility&&t.SparklineSettings.Visibility&&this.DataGroupInfo.FieldContainers[4].FieldInfos.length>0)return 175}else return 100}return 2*n},t.prototype.getMinMobileHeight=function(){return"100px"},t.prototype.refresh=function(){this.resizeCard()},t.prototype.dispose=function(){this.numberCardDispose();n.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"IsExistinBgAvailable",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.updateDataGroupInfo=function(n,t){this.updateItemDatGroupInfo(n,t)},t.prototype.getWidgetInfo=function(t,i){var r=n.prototype.getWidgetInfo.call(this,t,i);return this.updateColorCustomization(),r.ColorCustomization=this.getNumberCardProperties().ColorCustomization,r},t.prototype.beforeUtilityDialogOpen=function(n,t,i){if(t==="dimensionFilterDialog"&&(i.ContainerName==="Image"||i.ContainerName==="BackgroundImage")){var r=n;return r.TopNFilter.Rank.Enable=!1,r.TopNFilter.Count.Enable=!1,r.TopNFilter.InfoText=this.locale.CardImageRestrictionInfo.text,r}return n},t.prototype.isNecessaryDataConfigured=function(){var n=this.getBindedColumnIndex(this.DataGroupInfo);return this.DataGroupInfo.FieldContainers.length>0&&(this.DataGroupInfo.FieldContainers[n.measureIndex].FieldInfos.length>0||this.DataGroupInfo.FieldContainers[n.dimensionIndex].FieldInfos.length>0)},t.prototype.getWidgetImage=function(){return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Number-Card" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="KPI-Card" transform="translate(12.000000, 39.000000)" fill="var(--widget-notconfigured-image-background1)">            <g id="Group">                <polygon id="Path-3" points="47.0936655 156.752521 300.000013 156.752521 300.000013 0.0761713955 278.392219 61.7934179 230.380239 80.3478435 162.067699 83.935652 141.46436 104.15703 85.2389191 104.15703 60.7523288 131.919448 28.32622 138.907066 0 156.752521"><\/polygon>            <\/g>        <\/g>        <path d="M125.825822,55.0130261 L127.700661,39.4418838 L145.913383,39.4418838 L145.913383,44.5130261 L132.990385,44.5130261 L132.186883,51.0991984 C133.719497,50.3276515 135.348805,49.9418838 137.074856,49.9418838 C140.169844,49.9418838 142.595207,50.8466843 144.351017,52.6563126 C146.106828,54.4659409 146.98472,56.9979797 146.98472,60.252505 C146.98472,62.2304708 146.542054,64.0014952 145.656709,65.5656313 C144.771364,67.1297673 143.502884,68.3431821 141.851232,69.2059118 C140.19958,70.0686416 138.250362,70.5 136.00352,70.5 C134.039393,70.5 132.216651,70.1247533 130.535239,69.3742485 C128.853827,68.6237437 127.52583,67.5681431 126.551206,66.2074148 C125.576583,64.8466866 125.059519,63.2966019 125,61.5571142 L131.383381,61.5571142 C131.517298,62.8336737 131.989723,63.8261488 132.80067,64.5345691 C133.611616,65.2429895 134.671782,65.5971944 135.9812,65.5971944 C137.439416,65.5971944 138.56282,65.1027104 139.351447,64.1137275 C140.140073,63.1247446 140.534381,61.7254599 140.534381,59.9158317 C140.534381,58.176344 140.080555,56.843692 139.17289,55.9178357 C138.265226,54.9919793 136.978147,54.5290581 135.311615,54.5290581 C133.779001,54.5290581 132.53656,54.9078118 131.584256,55.6653307 L130.95931,56.2124248 L125.825822,55.0130261 Z M174.019487,57.4118236 C174.019487,61.6483178 173.089516,64.8887663 171.229548,67.1332665 C169.369579,69.3777667 166.646626,70.5 163.060606,70.5 C159.519226,70.5 156.811152,69.3988086 154.936304,67.1963928 C153.061455,64.993977 152.101726,61.8376959 152.057086,57.7274549 L152.057086,52.0881764 C152.057086,47.8095978 152.998216,44.5621353 154.880505,42.3456914 C156.762793,40.1292474 159.474587,39.0210421 163.015967,39.0210421 C166.557347,39.0210421 169.265421,40.1187265 171.14027,42.3141283 C173.015118,44.50953 173.974847,47.6623041 174.019487,51.7725451 L174.019487,57.4118236 Z M167.569148,51.2254509 C167.569148,48.6863601 167.200879,46.8381821 166.464332,45.6808617 C165.727784,44.5235413 164.578341,43.9448898 163.015967,43.9448898 C161.498233,43.9448898 160.378548,44.4954855 159.65688,45.5966934 C158.935213,46.6979013 158.552065,48.419828 158.507426,50.7625251 L158.507426,58.2114228 C158.507426,60.7084293 158.868254,62.5636212 159.589922,63.7770541 C160.31159,64.990487 161.468473,65.5971944 163.060606,65.5971944 C164.637859,65.5971944 165.776143,65.0150359 166.475491,63.8507014 C167.17484,62.6863669 167.539388,60.9048216 167.569148,58.506012 L167.569148,51.2254509 Z M179.337368,45.3336673 C179.337368,43.4538984 179.984627,41.9283626 181.279166,40.757014 C182.573704,39.5856655 184.26997,39 186.368014,39 C188.495819,39 190.206964,39.5786515 191.501502,40.7359719 C192.79604,41.8932924 193.4433,43.460912 193.4433,45.4388778 L193.4433,46.9539078 C193.4433,48.8477049 192.79604,50.3697337 191.501502,51.5200401 C190.206964,52.6703464 188.510698,53.245491 186.412653,53.245491 C184.299729,53.245491 182.592303,52.6668395 181.290325,51.509519 C179.988347,50.3521986 179.337368,48.791593 179.337368,46.8276553 L179.337368,45.3336673 Z M183.622714,46.9539078 C183.622714,47.7955954 183.879386,48.4724423 184.392738,48.9844689 C184.906089,49.4964955 185.579387,49.752505 186.412653,49.752505 C187.245919,49.752505 187.908058,49.4929886 188.39909,48.9739479 C188.890122,48.4549072 189.135634,47.7605254 189.135634,46.8907816 L189.135634,45.3336673 C189.135634,44.4919798 188.890122,43.8116258 188.39909,43.2925852 C187.908058,42.7735445 187.23104,42.5140281 186.368014,42.5140281 C185.549628,42.5140281 184.887489,42.7700375 184.381578,43.2820641 C183.875666,43.7940907 183.622714,44.5060075 183.622714,45.4178357 L183.622714,46.9539078 Z M194.871749,62.5671343 C194.871749,60.6733372 195.526448,59.1478014 196.835866,57.990481 C198.145284,56.8331605 199.84155,56.254509 201.924715,56.254509 C204.037639,56.254509 205.745065,56.8261466 207.047043,57.9694389 C208.349021,59.1127312 209,60.6873647 209,62.6933868 L209,64.2084168 C209,66.0881858 208.36018,67.6067076 207.080522,68.7640281 C205.800863,69.9213485 204.097158,70.5 201.969354,70.5 C199.82667,70.5 198.108084,69.9178415 196.813546,68.753507 C195.519008,67.5891725 194.871749,66.0461018 194.871749,64.1242485 L194.871749,62.5671343 Z M199.157095,64.2084168 C199.157095,64.9799638 199.424926,65.6392758 199.960597,66.1863727 C200.496268,66.7334697 201.165847,67.007014 201.969354,67.007014 C203.784683,67.007014 204.692334,66.0601297 204.692334,64.1663327 L204.692334,62.5671343 C204.692334,61.7254467 204.439382,61.0485998 203.933471,60.5365731 C203.427559,60.0245465 202.757981,59.7685371 201.924715,59.7685371 C201.091449,59.7685371 200.42187,60.0245465 199.915958,60.5365731 C199.410047,61.0485998 199.157095,61.7464886 199.157095,62.6302605 L199.157095,64.2084168 Z M187.684866,67.7855711 L184.537814,66.1863727 L200.406988,42.240481 L203.554039,43.8396794 L187.684866,67.7855711 Z" id="50%" fill="var(--widget-notconfigured-image-background3)" fill-rule="nonzero"><\/path>    <\/g><\/svg>'},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.locale.itemPanel.widgetDataRequiredMessage.numberCardDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.getDefaultMeasureFormat=function(){var n=new MeasureFormatting;return n.Unit=NumberFormat.Ones,n},t.prototype.canUseWidgetAsMaster=function(){var n=this.getBindedColumnIndex(this.DataGroupInfo);return!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)&&this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[n.seriesIndex].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[n.measureIndex].FieldInfos.length>0},t.prototype.wireEvents=function(){this.designerInstance.element.on("click",".e-numbercard-widget-color-settings-button",this.bbdesigner$.proxy(this.openAdvancedColorSettings,this))},t.prototype.unwireEvents=function(){this.designerInstance.element.off("click",".e-numbercard-widget-color-settings-button",this.bbdesigner$.proxy(this.openAdvancedColorSettings,this))},t.prototype.onFieldDragAndDrop=function(n,t,i){var e=!0,r,u,f;if(!BoldBIDashboard.isNullOrUndefined(t)&&(r="",!BoldBIDashboard.isNullOrUndefined(n.FieldType)&&n.FieldType===FieldType.Dimensions))for(u=0;u<this.DataGroupInfo.FieldContainers.length;u++)r=this.DataGroupInfo.FieldContainers[u].Name===n.ContainerName?n.ContainerName.toLocaleLowerCase():"",r==="image"?this.getNumberCardProperties().ImageSettings.ImageSource==="Local"&&this.getNumberCardProperties().ImageSettings.ImageName!==""||this.getNumberCardProperties().ImageSettings.ImageSource==="URL"&&this.getNumberCardProperties().ImageSettings.ImageUrl!==""?(this.designerInstance.modules.util.alertDialog(this.locale.kpiCardImageSettingsReset.titleText,this.locale.kpiCardImageSettingsReset.dialogContentText,IconType.question,AlertType.Confirm,!1,"",{height:140,width:500,method:"canResetImageSettings",instance:this,dataInfo:{eventObject:i,droppedItem:t,fieldInfo:n}}),e=!1):(f={categoryName:"Image"},this.resetImageProperties(f),this.updateImageSource("Parameterized URL"),this.setPropertyElement("Image","ImageSource","Parameterized URL"),this.setPropertyElement("Image","ShowImage",!0),this.updateImageVisibility(!0)):r==="backgroundimage"?this.getNumberCardProperties().BackgroundSettings.Image.ImageSource==="Local"&&this.getNumberCardProperties().BackgroundSettings.Image.ImageName!==""||this.getNumberCardProperties().BackgroundSettings.Image.ImageSource==="URL"&&this.getNumberCardProperties().BackgroundSettings.Image.ImageUrl!==""?(this.designerInstance.modules.util.alertDialog(this.locale.kPICardBackgroundImageSettingsReset.titleText,this.locale.kPICardBackgroundImageSettingsReset.dialogContentText,IconType.question,AlertType.Confirm,!1,"",{height:140,width:500,method:"canResetImageSettings",instance:this,dataInfo:{eventObject:i,droppedItem:t,fieldInfo:n}}),e=!1):(f={categoryName:"Background"},this.resetBackgroundImageProperties(f),this.updateBackgroundImageSource("Parameterized URL"),this.setPropertyElement("Background","BackgroundImageSource","Parameterized URL"),this.setPropertyElement("Background","ShowBackgroundImage",!0),this.updateBackgroundImageVisibility(!0)):r==="series"&&(this.getNumberCardProperties().TitleSettings.EnableWrap=!1);return e},t.prototype.canResetImageSettings=function(n,t){var i;n&&(this.designerInstance.dragDropHelper.dragStop(t.eventObject,n,t.droppedItem),t.fieldInfo.ContainerName.toLowerCase()==="image"?(i={categoryName:"Image"},this.resetImageProperties(i),this.updateImageSource("Parameterized URL"),this.setPropertyElement("Image","ImageSource","Parameterized URL"),this.setPropertyElement("Image","ShowImage",!0),this.updateImageVisibility(!0)):t.fieldInfo.ContainerName.toLowerCase()==="backgroundimage"&&(i={categoryName:"Background"},this.resetBackgroundImageProperties(i),this.updateBackgroundImageSource("Parameterized URL"),this.setPropertyElement("Background","BackgroundImageSource","Parameterized URL"),this.setPropertyElement("Background","ShowBackgroundImage",!0),this.updateBackgroundImageVisibility(!0)))},t.prototype.updateItemDatGroupInfo=function(t,i){var o,u,f,e,r;if(n.prototype.updateDataGroupInfo.call(this,t,i),o=this.getBindedColumns(),u=this.getBindedColumnIndex(this.DataGroupInfo),!BoldBIDashboard.isNullOrUndefined(t.FieldContainers[u.imageIndex])&&t.FieldContainers[u.imageIndex].FieldInfos.length>0&&(f=t.FieldContainers[u.imageIndex].FieldInfos,t.FieldContainers[u.imageIndex].Name==="Image"))for(r=0;r<f.length;r++)(BoldBIDashboard.isNullOrUndefined(f[r].FilterInfo)||!BoldBIDashboard.isNullOrUndefined(f[r].FilterInfo.DimensionFilterInfo)&&BoldBIDashboard.isNullOrUndefined(f[r].FilterInfo.DimensionFilterInfo.TopNFilterInfo))&&!f[r].IsShowAllRecords&&t.FieldContainers[u.measureIndex].FieldInfos.length>0?(f[r].FilterInfo={},f[r].FilterInfo.DimensionFilterInfo=this.getDimensionFilterForImageAndBgImageField(t.FieldContainers[u.measureIndex],f[r])):BoldBIDashboard.isNullOrUndefined(f[r].FilterInfo)||BoldBIDashboard.isNullOrUndefined(f[r].FilterInfo.DimensionFilterInfo)||BoldBIDashboard.isNullOrUndefined(f[r].FilterInfo.DimensionFilterInfo.TopNFilterInfo)||t.FieldContainers[u.measureIndex].FieldInfos.length!==0||(f[r].FilterInfo=null);if(!BoldBIDashboard.isNullOrUndefined(t.FieldContainers[u.backgroundImageIndex])&&t.FieldContainers[u.backgroundImageIndex].FieldInfos.length>0&&(e=t.FieldContainers[u.backgroundImageIndex].FieldInfos,t.FieldContainers[u.backgroundImageIndex].Name==="BackgroundImage"))for(r=0;r<e.length;r++)(BoldBIDashboard.isNullOrUndefined(e[r].FilterInfo)||!BoldBIDashboard.isNullOrUndefined(e[r].FilterInfo.DimensionFilterInfo)&&BoldBIDashboard.isNullOrUndefined(e[r].FilterInfo.DimensionFilterInfo.TopNFilterInfo))&&!e[r].IsShowAllRecords&&t.FieldContainers[u.measureIndex].FieldInfos.length>0?(e[r].FilterInfo={},e[r].FilterInfo.DimensionFilterInfo=this.getDimensionFilterForImageAndBgImageField(t.FieldContainers[u.measureIndex],e[r])):BoldBIDashboard.isNullOrUndefined(e[r].FilterInfo)||BoldBIDashboard.isNullOrUndefined(e[r].FilterInfo.DimensionFilterInfo)||BoldBIDashboard.isNullOrUndefined(e[r].FilterInfo.DimensionFilterInfo.TopNFilterInfo)||t.FieldContainers[u.measureIndex].FieldInfos.length!==0||(e[r].FilterInfo=null);!BoldBIDashboard.isNullOrUndefined(o.actual)&&!BoldBIDashboard.isNullOrUndefined(o.series)&&o.actual.length>0&&o.series.length>0&&BoldBIDashboard.isNullOrUndefined(o.series[0].CustomSorting)&&(o.series[0].CustomSorting={CustomSortType:CustomSortType[CustomSortType.Field],CustomSortOrder:SortingOrder[SortingOrder.Descending],FieldName:o.actual[0].Name,FieldId:o.actual[0].Id,SummaryType:o.actual[0].SummaryType})},t.prototype.getBindedColumns=function(){var i,r,u,n,t;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers))for(n=0;n<this.DataGroupInfo.FieldContainers.length;n++)t=this.getFieldContainer(),this.DataGroupInfo.FieldContainers[n].Name===t[0].Name?i=this.DataGroupInfo.FieldContainers[n].FieldInfos:this.DataGroupInfo.FieldContainers[n].Name===t[1].Name?r=this.DataGroupInfo.FieldContainers[n].FieldInfos:this.DataGroupInfo.FieldContainers[n].Name===t[2].Name&&(u=this.DataGroupInfo.FieldContainers[n].FieldInfos);return{actual:i,target:r,series:u}},t.prototype.getBindedColumnIndex=function(n){var i=0,r=0,u=0,f=0,e=0,o=0,s=0,t;if(!BoldBIDashboard.isNullOrUndefined(n.FieldContainers))for(t=0;t<n.FieldContainers.length;t++)switch(n.FieldContainers[t].Name){case"Measure":i=t;break;case"Dimension":r=t;break;case"Series":u=t;break;case"Tooltip":f=t;break;case"Sparkline":e=t;break;case"Image":o=t;break;case"BackgroundImage":s=t}return{measureIndex:i,dimensionIndex:r,seriesIndex:u,hiddenColumnIndex:f,sparklineIndex:e,imageIndex:o,backgroundImageIndex:s}},t.prototype.getDimensionFilterForImageAndBgImageField=function(n,t){return{IsAllowFilteringApplied:!1,IsConditionFilteringApplied:!1,IsTopNFilteringApplied:!0,AllowFilterInfo:{IsCheckAll:!0,IsInclude:!0,FilterValues:null},ConditionFilterInfo:{ColumnName:t.Name,SummaryType:SummaryType.SUM,ConditionSummaryType:NumberFilterOption.Equals,Values:["0"]},TopNFilterInfo:n.FieldInfos.length>0?{Mode:RankType.Top,NoOfRecords:1,ColumnName:n.FieldInfos.length>0?n.FieldInfos[0].Name:t.Name,ColumnId:n.FieldInfos.length>0?n.FieldInfos[0].Id:t.Id,SummaryType:n.FieldInfos.length>0?n.FieldInfos[0].SummaryType===SummaryType.NONE?SummaryType.SUM:n.FieldInfos[0].SummaryType:SummaryType.COUNT,IsBasedOnDateAndTimeField:!1,DateFormat:DateTimeFormatForFilter.Year}:null}},t.prototype.updateNumberCardData=function(n){var o=this.isNecessaryDataConfigured(),t,u,f,i,r,e;this.dataValues=n;BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this);this.numberCardItem.show();BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this);this.designerInstance.modules.serialization.updateWidgetData(this.getNumberCardProperties(),this.DataGroupInfo);t=this.getBindedColumnIndex(this.DataGroupInfo);this.isSeriesCardWithHeader=!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[t.seriesIndex])&&this.DataGroupInfo.FieldContainers[t.seriesIndex].FieldInfos.length>0&&this.widgetJson.ContainerSettings.ShowHeader;u={controlTitle:this.Name,controlId:this.Name,isControlMenuVisible:!1,isMaximizeEnable:!1,isFilterIconEnable:BoldBIDashboard.isNullOrUndefined(this.widgetJson.FilterSettings)?!1:this.widgetJson.FilterSettings.ActAsMasterWidget};this.numberCardItem.hasClass("e-numbercard-single")||this.numberCardItem.addClass("e-numbercard-single");this.numberCardItem.data("BoldBIDashboardScroller")&&this.numberCardItem.BoldBIDashboardScroller("destroy");this.destroyNumberCard();this.updateControlContainerPadding();BoldBIDashboard.isNullOrUndefined(this.controlHeader)||(this.controlHeader[0].style.paddingLeft="0px",this.controlSubHeader[0].style.paddingLeft="0px",this.controlHeader.remove(),this.controlSubHeader.remove(),this.controlHeader=this.controlSubHeader=null);this.setContainerHeight();n.Error?(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.designPanelInstance.showControlError(this.contentContainer,n,this.CellInfo,n.OuterMessage)):(n.noDataAvailable?(this.numberCardItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this)):(this.numberCardItem.show(),o?(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),f=JSON.parse(n.data),this.columnBindings=JSON.parse(n.columnBindings),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(i=this.getDefaultTitle(),this.isTitleEdited=this.isFromDraft?i!==this.getNumberCardProperties().TitleSettings.Text:this.isTitleEdited,this.isTitleEdited||(this.widgetJson.ContainerSettings.Title=this.getNumberCardProperties().TitleSettings.Text=i,this.setPropertyElement("Title","TitleText",i),this.updateTitleHeaderText(),this.propertyPanel.setPropertyHeaderValue(i))),!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[t.seriesIndex])&&this.DataGroupInfo.FieldContainers[t.seriesIndex].FieldInfos.length>0?(this.updateSeriesValue(u,f),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.propertyPanel.updateItemVisibility("NumberCard","Title","TitleText",!1),this.propertyPanel.updateItemVisibility("NumberCard","Title","EnableWrap",!1))):(this.renderNumberCardElement(),this.renderControl(this.getMeasure(),"",this.gethiddencolumn()),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.propertyPanel.updateItemVisibility("NumberCard","Title","TitleText",!0),this.propertyPanel.updateItemVisibility("NumberCard","Title","EnableWrap",!0)),this.updateHeaderForSingleCard(),this.updateCornerRadius(this.controlContainer)),r=this.numberCardItem.data("BoldBIDashboardScroller"),BoldBIDashboard.isNullOrUndefined(r)||r.refresh(),this.updateContainerSettings(),this.updateIconContainerBackground()):(BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.widgetJson.ContainerSettings.Title=this.getNumberCardProperties().TitleSettings.Text=this.isTitleEdited?this.widgetJson.ContainerSettings.Title:"Card Title",this.setPropertyElement("Title","TitleText",this.widgetJson.ContainerSettings.Title),this.updateTitleHeaderText(),this.renderNumberCardElement(),this.renderControl(100,"",[])))),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.designerInstance.modules.util.updateAction("NumberCard","Link","Link"),BoldBIDashboard.isNullOrUndefined(this.numberCardItem)||BoldBIDashboard.isNullOrUndefined(this.widgetJson.UrlLink)||!this.widgetJson.UrlLink.EnableLink?this.numberCardItem.removeClass("e-numbercard-cursor-pointer"):this.numberCardItem.addClass("e-numbercard-cursor-pointer"));this.updateActasMasterFilterProperty();this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.updateContainerProperties(),this.setPropertyElement("Formatting","ColorSettings",this.getNumberCardProperties().ColorCustomization),this.propertyPanel.updateCategoryVisibility("NumberCard","Formatting",this.isNecessaryDataConfigured()),e=!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[t.seriesIndex])&&this.DataGroupInfo.FieldContainers[t.seriesIndex].FieldInfos.length>0,this.propertyPanel.updateCategoryVisibility("NumberCard","SeriesSettings",e),this.propertyPanel.updateItemDisable("float","NumberCard","Measure","MeasureFontSize",this.getNumberCardProperties().MeasureSettings.AutoFontSize),this.propertyPanel.updateItemDisable("float","NumberCard","Title","TitleFontSize",this.getNumberCardProperties().TitleSettings.AutoFontSize));this.isFromDraft=!1},t.prototype.updateHeaderForSingleCard=function(){if(this.ContentContainer.find(".bbi-dbrd-control-header").length===0){var n={controlTitle:this.widgetJson.ContainerSettings.Title,controlId:this.Name,isMaximizeEnable:!1,isFilterIconEnable:this.widgetJson.FilterSettings.ActAsMasterWidget};BoldBIDashboard.Dashboard.WidgetContainerHelper.iconContainerForNoHeader(n,this,this.designerInstance)}},t.prototype.getDefaultTitle=function(){var n=this.getBindedColumnIndex(this.DataGroupInfo);return this.columnBindings[this.DataGroupInfo.FieldContainers[n.measureIndex].FieldInfos[0].UniqueColumnName]},t.prototype.updateSeriesValue=function(n,t){var y,u=[],f=[],p,w,a,b=[],h,r=this.getBindedColumnIndex(this.DataGroupInfo),o=r.seriesIndex,ot=r.hiddenColumnIndex,k=r.measureIndex,d=r.dimensionIndex,g,s,nt,c,e,tt,i,l;for(n.controlTitle=this.widgetJson.ContainerSettings.Title,this.ContentContainer.find(".bbi-dbrd-control-header").remove(),BoldBIDashboard.Dashboard.WidgetContainerHelper.getControlHeader(n,this,this.designerInstance),BoldBIDashboard.Dashboard.WidgetContainerHelper.getControlSubHeader(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.updateTitleForHigherResolution(this),g=this.controlContainer.find(".bbi-dbrd-control-container-wrapper"),g[0].style.paddingTop=t.length===1&&!this.widgetJson.ContainerSettings.ShowHeader?"0px":this.getControlContainerPadding(),this.ControlHeader[0].style.marginLeft="12px",this.ControlHeader[0].style.marginRight="12px",this.controlSubHeader[0].style.marginLeft="12px",this.ControlHeader[0].style.width="Calc(100% - 24px)",this.ControlSubHeader[0].style.width="Calc(100% - 12px)",this.numberCardItem.hasClass("e-numbercard-single")&&this.numberCardItem.removeClass("e-numbercard-single"),s=this.numberCardItem.parents(".bbi-dbrd-control-container").find(".bbi-dbrd-control-header"),s.find(".bbi-dbrd-controlIcon-container").css({"margin-right":"8px"}),this.widgetJson.FilterSettings.ActAsMasterWidget&&s.length!==0&&(s.find(".bbi-dbrd-controlIcon-container").css("display","block"),s.find(".bbi-remove-control-filter").css("display","block")),this.propertyPanel.setTitle(this.widgetJson),this.propertyPanel.setSubTitle(this.widgetJson,this.widgetJson.ContainerSettings.SubTitle),nt=this.controlHeader.outerHeight(!0)+this.getControlSubHeaderHeight(),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getNumberCardProperties().ContainerSettings.TextColor),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer),this.contentContainer.css({height:this.isSeriesCardWithHeader?"calc(100% - "+nt+"px)":"100%","padding-top":t.length===1?"0px":this.getControlContainerPadding()}),this.widgetJson.ContainerSettings.ShowHeader||BoldBIDashboard.Dashboard.WidgetContainerHelper.disableHeader(this,this.designerInstance),c=this.getNumberCardProperties().SeriesSettings,e=c.IsFixedRowsAndColumns&&t.length>=c.RowCount*c.ColumnCount?this.getFixedSizeOfSingleCard(t.length):this.getSizeOfSingleCard(t.length),this.numberCardContent=BoldBIDashboard.buildTag("div.e-numbercard-content",""),BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[o])||this.DataGroupInfo.FieldContainers[o].FieldInfos.length===0||(y=this.DataGroupInfo.FieldContainers[o].FieldInfos[0].UniqueColumnName),this.numberCardItem.append(this.numberCardContent),this.widgetJson.FilterSettings.ActAsMasterWidget&&this.widgetJson.SelectedFilterValues.length>0&&(h=this.getSelectedValue()),tt=function(n){var s,c;for(i.numberCardElement=BoldBIDashboard.buildTag("div.e-kpicard-series-element","",{width:e.width,height:e.height},{id:i.designerId+"numbercardElement"+i.widgetJson.UniqueName+"_"+n,"data-value":t[n][y]}),i.numberCardContent.append(i.numberCardElement),u=Object.keys(t[n]),f=Object.keys(t[n]).map(function(i){return t[n][i]}),s=0;s<u.length;s++)if(BoldBIDashboard.isNullOrUndefined(i.DataGroupInfo.FieldContainers[k].FieldInfos[0])||u[s]!==i.DataGroupInfo.FieldContainers[k].FieldInfos[0].UniqueColumnName)if(BoldBIDashboard.isNullOrUndefined(i.DataGroupInfo.FieldContainers[d].FieldInfos[0])||u[s]!==i.DataGroupInfo.FieldContainers[d].FieldInfos[0].UniqueColumnName)if(BoldBIDashboard.isNullOrUndefined(i.DataGroupInfo.FieldContainers[o].FieldInfos[0])||u[s]!==i.DataGroupInfo.FieldContainers[o].FieldInfos[0].UniqueColumnName){if(i.DataGroupInfo.FieldContainers[ot].Name==="Tooltip")for(c=0;c<i.DataGroupInfo.FieldContainers[r.hiddenColumnIndex].FieldInfos.length;c++)if(!BoldBIDashboard.isNullOrUndefined(i.DataGroupInfo.FieldContainers[r.hiddenColumnIndex].FieldInfos[c])&&u[s]===i.DataGroupInfo.FieldContainers[r.hiddenColumnIndex].FieldInfos[c].UniqueColumnName){var l=i.DataGroupInfo.FieldContainers[r.hiddenColumnIndex].FieldInfos[c].Name,v=i.DataGroupInfo.FieldContainers[r.hiddenColumnIndex].FieldInfos[c].UniqueColumnName,g=f[s];b.push({DisplayName:l,value:g,uniqueColumnName:v})}}else a=f[s];else w=f[s];else p=f[s]!=="(Blanks)"?f[s]:0;BoldBIDashboard.isNullOrUndefined(h)||h===""||(BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(i),h===a&&i.bbdesigner$(i.numberCardElement).addClass("bbi-numbercard-selected"));i.renderControl(p,w,b,a,e);(i.rowCount!==1||i.columnCount!==1)&&i.updateBorders(n+1,i.numberCardElement,t.length)},i=this,l=0;l<t.length;l++)tt(l);if(BoldBIDashboard.Dashboard.WidgetHelper.setLabelParameterId(this.controlHeader,this.designerInstance),BoldBIDashboard.Dashboard.WidgetHelper.setLabelParameterId(this.ControlSubHeader,this.designerInstance),this.numberCardItem.data("BoldBIDashboardScroller")&&this.numberCardItem.BoldBIDashboardScroller("destroy"),t.length>1&&this.numberCardItem.BoldBIDashboardScroller({height:this.numberCardItem.height(),autoHide:!0,scrollerSize:this.designerInstance.scrollerSize.scrollSize,cssClass:"bbi-dbrd-designer-scroller bbi-dbrd-control"}),this.designerInstance.model.dashboardFromData.isWidgetSpecific){var it=this.controlContainer.height(),st=this.designerInstance.modules.Mode.designer.element.parent().height()-10-this.designerInstance.modules.Mode.designPanelTag.find(".bbi-dashboarddesigner-bannerPanel").height()==it,ht=this.widgetHelper.getFirstWidgetHeight()==it,ct=this.designerInstance.modules.Mode.designCanvas.width()-10,rt=Math.round(ct/e.width),lt=t.length/rt+t.length%rt,ut=lt*e.height,v=this.designerInstance.modules.Mode.designer.element.parent().height()-10;this.contentContainer.css({height:ut});this.controlContainer.css({height:ut});var at=this.controlContainer.height()%v,vt=v-at,ft=this.controlContainer.height()+vt,et=this.controlContainer.height()/v*10-8;this.controlContainer.css({height:st||ht?ft+et-this.designerInstance.modules.Mode.designPanelTag.find(".bbi-dashboarddesigner-bannerPanel").height():ft+et})}},t.prototype.updateCornerRadius=function(){this.numberCardItem.hasClass("e-numbercard-single")&&this.numberCardItem.css("border-radius",this.widgetJson.ContainerSettings.CornerRadius===4?BoldBIDashboard.Dashboard.WidgetContainerHelper.getThemeVariablesForWidgets(this.Type,!0,!1):this.widgetJson.ContainerSettings.CornerRadius+"px")},t.prototype.createCardContainer=function(t,i){try{BoldBIDashboard.isNullOrUndefined(i)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,i):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},i)),this.isFromDraft=!0);this.updateBackWardCompatability();this.renderNumberCardItem();this.renderNumberCardElement();BoldBIDashboard.isNullOrUndefined(this.getNumberCardProperties().TitleSettings.Text)&&(this.getNumberCardProperties().TitleSettings.Text=this.widgetJson.ContainerSettings.Title=BoldBIDashboard.isNullOrUndefined(this.bbdesigner$(this.numberCardElement).find(".e-number-card-title-text").html())?"Card Title":this.bbdesigner$(this.numberCardElement).find(".e-number-card-title-text").html());!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);BoldBIDashboard.Dashboard.WidgetContainerHelper.disableHeader(this,this.designerInstance);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.NumberCard)}catch(r){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:r,Type:r.name})}},t.prototype.updateBackWardCompatability=function(){BoldBIDashboard.isNullOrUndefined(this.getNumberCardProperties().SeriesSettings)&&(this.getNumberCardProperties().SeriesSettings=new SeriesSettings);(BoldBIDashboard.isNullOrUndefined(this.getNumberCardProperties().TitleSettings.Position)||this.getNumberCardProperties().TitleSettings.Position==="")&&(this.getNumberCardProperties().TitleSettings.Position="Bottom");BoldBIDashboard.isNullOrUndefined(this.getNumberCardProperties().AlignmentSettings)&&(this.getNumberCardProperties().AlignmentSettings=new AlignmentSettings);(BoldBIDashboard.isNullOrUndefined(this.getNumberCardProperties().AlignmentSettings.VerticalAlignment)||this.getNumberCardProperties().AlignmentSettings.VerticalAlignment==="")&&(this.getNumberCardProperties().AlignmentSettings.VerticalAlignment="Center");this.getNumberCardProperties().AlignmentSettings.ScalingFactor===0&&(this.getNumberCardProperties().AlignmentSettings.ScalingFactor=1)},t.prototype.renderNumberCardItem=function(){this.numberCardItem=BoldBIDashboard.buildTag("div.e-numbercarditem e-dbrd-widget bbi-dbrd-control e-numbercard-single","",{"z-index":this.widgetOrder},{id:this.designerId+"NumberCardItem"+this.widgetJson.UniqueName})},t.prototype.renderNumberCardElement=function(){this.numberCardElement=BoldBIDashboard.buildTag("div.bbi-numbercard-element","",{"background-color":"transparent"},{id:this.designerId+"numberCardElement"+this.widgetJson.UniqueName});this.contentContainer.append(this.numberCardItem);this.controlContainer.data("widgetInstance",this);this.numberCardItem.append(this.numberCardElement);this.numberCardItem.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designerId+"_designer_waiting_popup bbi-designer-loader",template:this.designerInstance.getWaitingPopupTemplate()})},t.prototype.renderControl=function(t,i,r,u,f){u===void 0&&(u="");f===void 0&&(f=null);var s=this.getBindedColumnIndex(this.DataGroupInfo),o=this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[s.measureIndex].FieldInfos.length!==0?this.DataGroupInfo.FieldContainers[s.measureIndex].FieldInfos[0].MeasureFormatting:n.prototype.getDefaultMeasureFormat.call(this),h=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(o.Prefix),this.DataGroupInfo.DataSourceName),c=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(o.Suffix),this.DataGroupInfo.DataSourceName),e=this.getNumberCardProperties(),l=BoldBIDashboard.DashboardUtil.encodeText(e.TitleSettings.Text),a=BoldBIDashboard.DashboardUtil.encodeText(h),v=BoldBIDashboard.DashboardUtil.encodeText(c);this.numberCardElement.BoldBIDashboardNumberCard({size:{width:BoldBIDashboard.isNullOrUndefined(f)?this.numberCardItem.width():f.width,height:BoldBIDashboard.isNullOrUndefined(f)?this.numberCardItem.height():f.height},title:{text:u!==""?u:BoldBIDashboard.isNullOrUndefined(e.TitleSettings.Text)?"Card Title":l,fontSize:e.TitleSettings.FontSize,foreground:this.getColor(WidgetProperty[4],e.TitleSettings.Color,u),visibility:e.TitleSettings.Visibility,isColorCustomized:this.isPropertyCustomized(WidgetProperty[4],u),fontSettings:JSON.parse(this.getColor(WidgetProperty[6],null,u)),position:e.TitleSettings.Position,enableWrap:e.TitleSettings.EnableWrap},description:{visibility:BoldBIDashboard.isNullOrUndefined(this.numberCardContent)&&!BoldBIDashboard.isNullOrUndefined(e.ContainerSettings.Description)&&e.ContainerSettings.Description.trim().length>0,text:e.ContainerSettings.Description,color:this.themeHelper.getWidgetIconColor()},animationSettings:{enableAnimation:this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage?!1:e.AnimationSettings.EnableAnimation,animationDuration:e.AnimationSettings.AnimationDuration},measure:{text:t,fontSize:e.MeasureSettings.FontSize,foreground:this.getColor(WidgetProperty[2],e.MeasureSettings.Color,u),visibility:e.MeasureSettings.Visibility,isColorCustomized:this.isPropertyCustomized(WidgetProperty[2],u)},hiddenColumns:r,image:{mode:e.ImageSettings.ImageMode,data:this.getImage(WidgetProperty[7],this.getImageValue(u),u),visibility:e.ImageSettings.Visibility,position:!BoldBIDashboard.isNullOrUndefined(e.ImageSettings.ImagePosition)&&e.ImageSettings.ImagePosition!==""?e.ImageSettings.ImagePosition:"Right",isImageCustomized:this.isPropertyCustomized(WidgetProperty[7],u)},background:{mode:e.BackgroundSettings.Image.ImageMode,image:this.getImage(WidgetProperty[8],this.getBackgroundImageValue(u),u),showImage:e.BackgroundSettings.Image.Visibility,color:this.getColor(WidgetProperty[1],e.BackgroundSettings.Color,u),opacity:e.BackgroundSettings.Transparency,isColorCustomized:this.isPropertyCustomized(WidgetProperty[1],u),isImageCustomized:this.isPropertyCustomized(WidgetProperty[8],u)},sparkline:{data:this.getSparklineValue(u),fill:this.getColor(WidgetProperty[0],e.SparklineSettings.Fill,u),type:"area",visibility:e.SparklineSettings.Visibility,opacity:e.SparklineSettings.Opacity,isColorCustomized:this.isPropertyCustomized(WidgetProperty[0],u)},informationIcon:{visibility:this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.view},valueRepresentation:{format:o.FormatType,representation:o.Unit,numberOfDecimals:BoldBIDashboard.isNullOrUndefined(o.DecimalPoints)?0:o.DecimalPoints,currencyCulture:o.Culture,decimalSeparator:{CurrentValue:o.DecimalSeparator.CurrentValue,AliasValue:o.DecimalSeparator.AliasValue},groupSeparator:{CurrentValue:o.GroupSeparator.CurrentValue,AliasValue:o.GroupSeparator.AliasValue},negativeValueFormat:"default",prefix:BoldBIDashboard.isNullOrUndefined(h)?"":a,suffix:BoldBIDashboard.isNullOrUndefined(c)?"":v,enableLakhsAndCroreRep:o.EnableLakhsAndCroreRep},tooltip:{"class":e.ShowTooltip?"bbi-dbrd-designer-hoverable":"",attribute:"data-tooltip",text:"Expand the card horizontally to view the image."},alignment:{horizontal:e.AlignmentSettings.HorizontalAlignment,vertical:e.AlignmentSettings.VerticalAlignment},autoFontSize:{enable:e.AlignmentSettings.AutoFontSize,fontSizeFactor:e.AlignmentSettings.ScalingFactor},responsiveMargin:e.ResponsiveMargin,selected:this.bbdesigner$.proxy(this.onClick,this)})},t.prototype.getMeasureFontSizeBasedOnResolution=function(){return window.screen.width<1920?32:window.screen.width<3840?64:72},t.prototype.isPropertyCustomized=function(n,t){var i=this.getNumberCardProperties();return this.isNecessaryDataConfigured()&&!BoldBIDashboard.isNullOrUndefined(i.ColorCustomization)&&this.isCustomized(n,i)&&!BoldBIDashboard.isNullOrUndefined(this.getConditionalFormattedValue(n,i.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,t))},t.prototype.isCustomized=function(n,t){for(var u,r,i=0;i<t.ColorCustomization.RuleRangeSettings.RangeColorInfo.length;i++)for(u=t.ColorCustomization.RuleRangeSettings.RangeColorInfo[i],r=0;r<u.PropertyColorPair.length;r++)if(WidgetProperty[u.PropertyColorPair[r].WidgetProperties]===n)return!0;return!1},t.prototype.getImage=function(n,t,i){var u=this.getNumberCardProperties(),r;return this.isNecessaryDataConfigured()&&!BoldBIDashboard.isNullOrUndefined(u.ColorCustomization)?(r=this.getConditionalFormattedValue(n,u.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,i),r=this.getCustomizedImage(r),this.validateValue(r,t)):t},t.prototype.getCustomizedImage=function(n){var i=String.fromCharCode(127),t;return BoldBIDashboard.isNullOrUndefined(n)?n:(t=n.split(i),t[0]==="Embedded"?BoldBIDashboard.Dashboard.Resource.getImage(t[1]):t[1])},t.prototype.getColor=function(n,t,i){var r=this.getNumberCardProperties(),u;return this.isNecessaryDataConfigured()&&!BoldBIDashboard.isNullOrUndefined(r.ColorCustomization)?(u=this.getConditionalFormattedValue(n,r.ColorCustomization.RuleRangeSettings.BasedOn.FieldId,i),this.validateValue(u,t)):t},t.prototype.getConditionalFormattedValue=function(n,t,i){if(BoldBIDashboard.isNullOrUndefined(this.dataValues))return null;var u=this.getBindedColumnIndex(this.DataGroupInfo),r=JSON.parse(this.dataValues.data);return this.DataGroupInfo.FieldContainers[u.seriesIndex].FieldInfos.length>0?this.getColorForSeries(r,n,t,i):r[0][t.substring(15)+"_Color_"+n]},t.prototype.getColorForSeries=function(n,t,i,r){for(var f=this.getBindedColumnIndex(this.DataGroupInfo),u=0;u<n.length;u++)if(n[u][this.DataGroupInfo.FieldContainers[f.seriesIndex].FieldInfos[0].UniqueColumnName]===r)return n[u][i.substring(15)+"_Color_"+t]},t.prototype.validateValue=function(n,t){return BoldBIDashboard.isNullOrUndefined(n)?t:n},t.prototype.destroyNumberCard=function(){var n=this.numberCardElement.data("BoldBIDashboardNumberCard");BoldBIDashboard.isNullOrUndefined(n)||n.destroy();this.numberCardElement.remove();BoldBIDashboard.isNullOrUndefined(this.numberCardContent)||(this.numberCardContent.remove(),this.numberCardContent=null)},t.prototype.getMeasure=function(){for(var i,r=JSON.parse(this.dataValues.data),t=Object.keys(JSON.parse(this.dataValues.columnBindings)),n=0;n<t.length;n++)this.DataGroupInfo.FieldContainers[0].FieldInfos[0].UniqueColumnName===t[n]&&(i=r[0][t[n]]!=="(Blanks)"?r[0][t[n]]:0);return i},t.prototype.getResolutionBasedFontSize=function(n){return this.getNumberCardProperties().AlignmentSettings?n+this.getNumberCardProperties().AlignmentSettings.ScalingFactor/100*window.screen.width:n},t.prototype.getSelectedValue=function(){for(var t=this.widgetJson.SelectedFilterValues,r=t.length,i="",n=0;n<r;n++)!BoldBIDashboard.isNullOrUndefined(t[n].InitialDimensionFilter)&&t[n].InitialDimensionFilter.Text.length>0&&(i=t[n].InitialDimensionFilter.Text[0].toString()),!BoldBIDashboard.isNullOrUndefined(t[n].InitialDateFilter)&&t[n].InitialDateFilter.DisplayDateFilterList.length>0&&(i=t[n].InitialDateFilter.DisplayDateFilterList[0]);return i},t.prototype.getSparklineValue=function(n){n===void 0&&(n="");var t=this.getBindedColumnIndex(this.DataGroupInfo);return this.isNecessaryDataConfigured()?this.DataGroupInfo.FieldContainers[t.seriesIndex].FieldInfos.length>0?this.DataGroupInfo.FieldContainers[t.sparklineIndex].FieldInfos.length>0?JSON.parse(this.dataValues.sparklineData[n]):null:this.DataGroupInfo.FieldContainers[t.sparklineIndex].FieldInfos.length>0?this.dataValues.sparklineData:null:[1,5,8,7,6,5,2,3,8,1]},t.prototype.gethiddencolumn=function(){for(var f=[],i=JSON.parse(this.dataValues.data),r=[],e=[],n=this.getBindedColumnIndex(this.DataGroupInfo),o=function(u){var s,o;for(r=Object.keys(i[u]),e=Object.keys(i[u]).map(function(n){return i[u][n]}),s=0;s<r.length;s++)for(o=0;o<t.DataGroupInfo.FieldContainers[n.hiddenColumnIndex].FieldInfos.length;o++)if(!BoldBIDashboard.isNullOrUndefined(t.DataGroupInfo.FieldContainers[n.hiddenColumnIndex].FieldInfos[o])&&r[s]===t.DataGroupInfo.FieldContainers[n.hiddenColumnIndex].FieldInfos[o].UniqueColumnName){var h=t.DataGroupInfo.FieldContainers[n.hiddenColumnIndex].FieldInfos[o].Name,c=t.DataGroupInfo.FieldContainers[n.hiddenColumnIndex].FieldInfos[o].UniqueColumnName,l=e[s];f.push({DisplayName:h,value:l,uniqueColumnName:c})}},t=this,u=0;u<i.length;u++)o(u);return f},t.prototype.getImageValue=function(n){var i=this.isNecessaryDataConfigured(),t=this.getBindedColumnIndex(this.DataGroupInfo);switch(this.getNumberCardProperties().ImageSettings.ImageSource){case"URL":return this.getNumberCardProperties().ImageSettings.ImageUrl;case"Local":return BoldBIDashboard.Dashboard.Resource.getImage(this.getNumberCardProperties().ImageSettings.FilePath);case"Parameterized URL":return this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[t.imageIndex].FieldInfos.length>0?i&&this.DataGroupInfo.FieldContainers[t.seriesIndex].FieldInfos.length>0?this.getImageForSeriesCard(this.getNumberCardProperties().ImageSettings.URLPattern,this.dataValues.imageData,n,this.DataGroupInfo.FieldContainers[t.imageIndex].FieldInfos):this.getImageForSingleCard(this.getNumberCardProperties().ImageSettings.URLPattern,this.dataValues.imageData,this.DataGroupInfo.FieldContainers[t.imageIndex].FieldInfos):this.getNumberCardProperties().ImageSettings.URLPattern}},t.prototype.getBackgroundImageValue=function(n){var i=this.isNecessaryDataConfigured(),t=this.getBindedColumnIndex(this.DataGroupInfo);switch(this.getNumberCardProperties().BackgroundSettings.Image.ImageSource){case"URL":return this.getNumberCardProperties().BackgroundSettings.Image.ImageUrl;case"Local":return BoldBIDashboard.Dashboard.Resource.getImage(this.getNumberCardProperties().BackgroundSettings.Image.FilePath);case"Parameterized URL":return this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[t.backgroundImageIndex].FieldInfos.length>0?i&&this.DataGroupInfo.FieldContainers[t.seriesIndex].FieldInfos.length>0?this.getImageForSeriesCard(this.getNumberCardProperties().BackgroundSettings.Image.URLPattern,this.dataValues.backgroundImageData,n,this.DataGroupInfo.FieldContainers[t.backgroundImageIndex].FieldInfos):this.getImageForSingleCard(this.getNumberCardProperties().BackgroundSettings.Image.URLPattern,this.dataValues.backgroundImageData,this.DataGroupInfo.FieldContainers[t.backgroundImageIndex].FieldInfos):this.getNumberCardProperties().BackgroundSettings.Image.URLPattern}},t.prototype.getImageForSingleCard=function(n,t,i){for(var r=0;r<t.length;r++)n=BoldBIDashboard.isNullOrUndefined(JSON.parse(t[r])[0])?"":n.replace("{"+r+"}",JSON.parse(t[r])[0][i[r].UniqueColumnName]);return n},t.prototype.getImageForSeriesCard=function(n,t,i,r){for(var f,o=this.getBindedColumnIndex(this.DataGroupInfo),e,u=0;u<t.length;u++)for(e=JSON.parse(t[u]),f=0;f<e.length;f++)e[f][this.DataGroupInfo.FieldContainers[o.seriesIndex].FieldInfos[0].UniqueColumnName]===i&&(n=n.replace("{"+u+"}",e[f][r[u].UniqueColumnName]));return n},t.prototype.updateCardSize=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this)?this.widgetContainerHelper.showControlError(this,this.dataValues):this.resizeCard()},t.prototype.resizeCard=function(){var r=this.designerInstance.modules.themeHelper.getNumberCardRightValueFont(),s=this.getNumberCardProperties().MeasureSettings.AutoFontSize?BoldBIDashboard.isNullOrUndefined(r.size)||r.size===""?this.getMeasureFontSizeBasedOnResolution():Number(r.size.split("px")[0]):this.getNumberCardProperties().MeasureSettings.FontSize,u=this.designerInstance.modules.themeHelper.getNumberCardTitleFont(),h=this.getNumberCardProperties().TitleSettings.AutoFontSize?BoldBIDashboard.isNullOrUndefined(u.size)||u.size===""?Number(this.getFontSizeBasedOnResolution().split("px")[0]):Number(u.size.split("px")[0]):this.getNumberCardProperties().TitleSettings.FontSize,n,i,t,o;if(this.numberCardContent!=null){this.numberCardItem.css({width:"100%",height:"100%"});var f=this.numberCardContent.children().length,e=this.getNumberCardProperties().SeriesSettings,o={size:e.IsFixedRowsAndColumns&&e.RowCount*e.ColumnCount<=f?this.getFixedSizeOfSingleCard(f):this.getSizeOfSingleCard(f),title:{fontSize:h},measure:{fontSize:s}};for(this.numberCardContent.css({width:this.numberCardItem.width(),height:this.numberCardItem.height()}),n=0;n<this.numberCardContent.children().length;n++)this.bbdesigner$(this.numberCardContent.children()[n]).hasClass("e-numbercard")&&((this.rowCount!==1||this.columnCount!==1)&&this.updateBorders(n+1,this.bbdesigner$(this.numberCardContent.children()[n]),this.numberCardContent.children().length),t=this.bbdesigner$(this.numberCardContent.children()[n]).data("BoldBIDashboardNumberCard"),t.setModel(o));this.applyCardBorderStyle(this.designerInstance.isDarkTypeTheme());this.updateControlContainerPadding();i=this.numberCardItem.data("BoldBIDashboardScroller");BoldBIDashboard.isNullOrUndefined(i)||(i.model.height=this.numberCardItem.height(),i.refresh())}else t=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(t)||(o={size:{height:this.numberCardItem.height(),width:this.numberCardItem.width()},title:{fontSize:h},measure:{fontSize:s}},t.setModel(o))},t.prototype.getControlContainerPadding=function(){var n=4;return this.cellInfo.RowSpan>=6*n&&this.cellInfo.ColumnSpan>=6*n?"24px":this.cellInfo.RowSpan>=5*n&&this.cellInfo.ColumnSpan>=5*n?"16px":this.cellInfo.RowSpan>4*n&&this.cellInfo.ColumnSpan>4*n?"16px":this.cellInfo.RowSpan>=3*n&&this.cellInfo.ColumnSpan>=3*n?"12px":this.cellInfo.RowSpan>=2*n&&this.cellInfo.ColumnSpan>=2*n?"12px":"8px"},t.prototype.updateBorders=function(n,t,i){var r,u;t.hasClass("e-numbercard-border-right")&&t.removeClass("e-numbercard-border-right");t.hasClass("e-numbercard-border-top")&&t.removeClass("e-numbercard-border-top");t.hasClass("e-numbercard-border-bottom")&&t.removeClass("e-numbercard-border-bottom");this.isWidthExceed?(r=this.columnCount===1?this.rowCount-1:this.rowCount===1?this.columnCount-1:i%this.columnCount==0?i-this.columnCount:i-i%this.columnCount,this.columnCount>=n&&!0&&t.addClass("e-numbercard-border-top"),this.rowCount!==1&&(r>=n||this.columnCount>=n)&&t.addClass("e-numbercard-border-bottom"),n%this.columnCount!=0&&t.addClass("e-numbercard-border-right")):(u=this.isPrime(i),r=this.columnCount===1?this.rowCount-1:this.rowCount===1?this.columnCount-1:u||this.getNumberCardProperties().SeriesSettings.IsFixedRowsAndColumns?i-i%this.columnCount:i-this.columnCount,n<=this.columnCount&&!0&&t.addClass("e-numbercard-border-top"),(this.rowCount!==1&&(r>=n||n<=this.columnCount)||this.columnCount===1&&this.rowCount!==n)&&t.addClass("e-numbercard-border-bottom"),this.designerInstance.model.dashboardFromData.isWidgetSpecific&&(r=i,(this.rowCount!==1&&(r>=n||n<=this.columnCount)||this.columnCount===1&&this.rowCount!==n)&&t.addClass("e-numbercard-border-bottom")),(n<this.columnCount||n%this.columnCount!=0||this.columnCount!==1&&this.rowCount!==1&&n===i&&u)&&t.addClass("e-numbercard-border-right"));t.hasClass("e-numbercard-margin-right")&&t.removeClass("e-numbercard-margin-right");t.hasClass("e-numbercard-margin-left")&&t.removeClass("e-numbercard-margin-left");n%this.columnCount==0&&t.addClass("e-numbercard-margin-right");(n===1||n%this.columnCount==1||this.columnCount===1)&&t.addClass("e-numbercard-margin-left")},t.prototype.isPrime=function(n){for(var t=2;t<n;t++)if(n%t==0)return!1;return!0},t.prototype.getFixedSizeOfSingleCard=function(n){var i=this.bbdesigner$(this.numberCardItem).width()-14,r=this.bbdesigner$(this.numberCardItem).height(),t=this.getNumberCardProperties().SeriesSettings,u=i/t.ColumnCount,f=r/t.RowCount;return this.columnCount=t.ColumnCount,this.rowCount=n%this.columnCount==0?n/this.columnCount:n/this.columnCount+n%this.columnCount,{height:f,width:u}},t.prototype.getSizeOfSingleCard=function(n){var h,o,f;this.isWidthExceed=!1;var c=this.getBindedColumnIndex(this.DataGroupInfo),l=this.DataGroupInfo.FieldContainers[c.seriesIndex].FieldInfos.length,t=l>0?n:1,i,r=this.bbdesigner$(this.numberCardItem).width()-14,s=this.getNumberCardProperties().ImageSettings.Visibility?218:192,u=r<s?r:s,e=Math.floor(r/u);if(i=this.getWidth(t,e),i>534&&(this.isWidthExceed=!0,this.columnCount=r/u>t?t:Math.floor(r/u),this.rowCount=t%this.columnCount==0?Math.floor(t/this.columnCount):Math.floor(t/this.columnCount)+1,h=(r-u*this.columnCount)/this.columnCount,i=u+h),o=this.bbdesigner$(this.numberCardItem).height(),f=this.getHeight(o),f>i)while(f>i){if(e--,e===0)break;i=this.getWidth(t,e);f=this.getHeight(o)}return{height:f,width:i}},t.prototype.getHeight=function(n){var r,u=this.getFontBasedHeight(),t=n<u?n:u,i=Math.floor(n/t),f=n%t,e;return i>this.rowCount?r=t+(n-this.rowCount*t)/this.rowCount:i<this.rowCount?r=t+f/i:(e=f/i,r=t+e),this.visibleRowsCount=i,r},t.prototype.getFontBasedHeight=function(){var n=this.getNumberCardProperties(),t=1.25,e=window.screen.width<1920?10:31,o=window.screen.width<1920?10:18,s=(n.MeasureSettings.Visibility||n.ImageSettings.Visibility)&&n.TitleSettings.Visibility?window.screen.width<1920?10:14:0,i=this.getBindedColumnIndex(this.DataGroupInfo),r=n.SparklineSettings.Visibility&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[i.sparklineIndex])&&this.DataGroupInfo.FieldContainers[i.sparklineIndex].FieldInfos.length>0,h=r?47:0,c=(r?o:e)+s+2,u=n.MeasureSettings.Visibility?this.getResolutionBasedFontSize(n.MeasureSettings.FontSize)*t:0,l=n.TitleSettings.Visibility?this.getResolutionBasedFontSize(n.TitleSettings.FontSize)*t:0,f=n.ImageSettings.Visibility?40:0;return l+(u>f?u:f)+c+h},t.prototype.getWidth=function(n,t){var r,u,i=this.bbdesigner$(this.numberCardItem).width()-14,o=this.getNumberCardProperties().ImageSettings.Visibility?382:192,f=i<o?i:o,s,e,h,c;if(this.rowCount=Math.floor(n/t),s=i%f,e=n===1?!1:this.isPrime(n),n>t){for(n=e?n-1:n,r=n%t;r!==0;)t--,r=n%t;u=(i-(t-1))/t;this.rowCount=e?Math.floor(n/t)+1:Math.floor(n/t);this.columnCount=t}else h=t-n,c=h*f,this.rowCount=1,this.columnCount=n,u=f+c/n+s/n;return u},t.prototype.setContainerHeight=function(){var n=10;!BoldBIDashboard.isNullOrUndefined(this.controlHeader)&&this.isSeriesCardWithHeader&&(n=this.controlHeader.outerHeight(!0)+this.getControlSubHeaderHeight());this.contentContainer.css({height:this.isSeriesCardWithHeader?"calc(100% - "+n+"px)":"100%"});this.numberCardItem.css({height:this.isSeriesCardWithHeader?"calc(100% - "+n+"px)":"100%"})},t.prototype.getControlSubHeaderHeight=function(){var n=0;return!BoldBIDashboard.isNullOrUndefined(this.widgetJson.ContainerSettings.SubTitle)&&this.widgetJson.ContainerSettings.SubTitle.trim().length>0&&this.widgetJson.ContainerSettings.Bounds.RowSpan>8?(n=this.controlSubHeader.outerHeight(!0),this.controlSubHeader.css("display","block")):this.controlSubHeader.css("display","none"),n},t.prototype.updateContainerSettings=function(){var n=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.widgetJson.ContainerSettings.TextAlignment),t=this.containerPropertyItem.getContainerTitleAlignmentValue(n);this.controlContainer.find(".bbi-dbrd-control-title").css({"text-align":n});this.controlContainer.find(".bbi-dbrd-control-title").css({color:this.widgetJson.ContainerSettings.TextColor});BoldBIDashboard.isNullOrUndefined(this.controlHeader)||this.controlHeader.find(".bbi-dbrd-control-title-wrapper").css({"justify-content":t});BoldBIDashboard.isNullOrUndefined(this.controlSubHeader)||this.controlSubHeader.find(".bbi-dbrd-control-sub-title").css({"justify-content":t})},t.prototype.updateActasMasterFilterProperty=function(){if(this.widgetJson.FilterSettings.ActAsMasterWidget=this.canUseWidgetAsMaster()?this.widgetJson.FilterSettings.ActAsMasterWidget:!1,this.propertyPanel.isVisible()){var n={name:"ActAsMasterWidget",value:this.widgetJson.FilterSettings.ActAsMasterWidget};this.propertyPanel.setBoolean(null,null,"Filter",n,"NumberCard")}this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.propertyPanel.updateItemVisibility("NumberCard","Filter","ActAsMasterWidget",this.canUseWidgetAsMaster())},t.prototype.onClick=function(n){var i=[n.PageX,n.PageY],t=[];this.getNumberCardProperties().FilterSettings.ActAsMasterWidget&&t.push(WidgetAction.Filter);this.getNumberCardProperties().UrlLink&&this.getNumberCardProperties().UrlLink.EnableLink&&t.push(WidgetAction.Linking);this.widgetJson.ContainerSettings.ViewData&&t.push(WidgetAction.ViewData);BoldBIDashboard.Dashboard.WidgetHelper.createWidgetActionContextMenu(this.designerInstance,this,this.Name,t,n,i)},t.prototype.performSelectedWidgetAction=function(t,i,r,u){var f,e,o;switch(t){case WidgetAction.Filter.toString():i.isCurrentMaster=!0;this.performFilterAction(r);break;case WidgetAction.Linking.toString():u.model.mode!==BoldBIDashboard.Designer.mode.design&&(f=this.getLinkingData(r),n.prototype.performLinking.call(this,f));break;case WidgetAction.ViewData.toString():i.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(e=u.modules.viewDataDialog,o=this.showSelectItemsInViewData(r),e.showViewDataPopup(i,!1,o,!0))}},t.prototype.showSelectItemsInViewData=function(n){for(var i=[],t=0;t<this.DataGroupInfo.FieldContainers.length;t++)this.DataGroupInfo.FieldContainers[t].Name==="Series"&&this.DataGroupInfo.FieldContainers[t].FieldInfos.length>0&&i.push({selectedItem:n.model.title.text,columnId:this.DataGroupInfo.FieldContainers[t].FieldInfos[0].Id,UniqueColumnName:this.DataGroupInfo.FieldContainers[t].FieldInfos[0].UniqueColumnName});return i},t.prototype.updateContainerProperties=function(){var n=this.getBindedColumnIndex(this.DataGroupInfo);this.propertyPanel.updateItemVisibility("NumberCard","ContainerActions","CSVExport",!0);this.propertyPanel.updateItemVisibility("NumberCard","ContainerActions","ExcelExport",!0);this.propertyPanel.updateItemVisibility("NumberCard","ContainerActions","ImageExport",!0);this.propertyPanel.updateItemVisibility("NumberCard","ContainerActions","PDFExport",!0);this.isNecessaryDataConfigured()&&this.DataGroupInfo.FieldContainers[n.seriesIndex].FieldInfos.length>0?(this.propertyPanel.updateItemVisibility("NumberCard","ContainerAppearance","ContainerTitleAlign",!0),this.propertyPanel.updateItemVisibility("NumberCard","ContainerAppearance","ContainerTitleColor",!0),this.propertyPanel.updateItemVisibility("NumberCard","ContainerActions","ShowHeader",!0),this.propertyPanel.refreshScroller()):(this.propertyPanel.updateItemVisibility("NumberCard","ContainerAppearance","ContainerTitleAlign",!1),this.propertyPanel.updateItemVisibility("NumberCard","ContainerAppearance","ContainerTitleColor",!1),this.propertyPanel.updateItemVisibility("NumberCard","ContainerActions","ShowHeader",!1),this.propertyPanel.refreshScroller())},t.prototype.performFilterAction=function(t){var u;if(!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.isNullOrUndefined(t.currentTarget)){if(this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;this.widgetJson.SelectedFilterValues=[];var i=this.bbdesigner$(t.currentTarget),f=[],o=[],s=[],r=i.parents(".e-numbercarditem").find(".bbi-numbercard-selected"),e=this.DataGroupInfo.FieldContainers;for(u=0;u<e.length;u++)if(e[u].Name==="Series"){f=e[u].FieldInfos[0];s[f.UniqueColumnName]=i.attr("data-value");o.push(f);break}r.length>0?(r.removeClass("bbi-numbercard-selected"),i.parents(".e-numbercarditem").find(".e-dbrd-selected-numbercard").remove(),i[0].id!==r[0].id&&i.addClass("bbi-numbercard-selected"),r=i.parents(".bbi-numbercarditem").find(".bbi-numbercard-selected")):(i.addClass("bbi-numbercard-selected"),r=i.parents(".e-numbercarditem").find(".bbi-numbercard-selected"));n.prototype.performInteraction.call(this,this,o,s)}},t.prototype.processFilterInformation=function(n){var r=this.DataGroupInfo.FieldContainers,s=n.filters,u=this.getColumnForWidgetFilterAPI(s,r),t=u[0],e=u[1],o=u[2],h=u[3],f,i;if(o.length>0)return t=[],e={},console.error("Given column name(s) ["+o+"] were not found in "+this.widgetJson.ContainerSettings.Title),!1;if(h&&(console.error("ColumnName should not be empty for API filtering"),t.length===0))return!1;if(t.length===0&&o.length===0)for(f=[],i=0;i<r.length;i++)if(r[i].Name==="Series"){f=r[i].FieldInfos[0];e[f.UniqueColumnName]=s[0].values[0];t.push(f);break}return this.widgetJson.SelectedFilterValues=[],this.masterFilterWindowInstance.configureSelectedFilterInfo(this.getJson(),t,e),!0},t.prototype.getLinkingData=function(n){var e=this,i={isEnabled:!1,parameterDetails:[],url:"",urlLinkInfo:[]},u,r,t,f;if(!BoldBIDashboard.isNullOrUndefined(this.widgetJson)&&(u=this.getConfiguredColumnsInfo(!1),this.widgetJson.UrlLink.EnableLink&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.UrlLink.GridUrlType)&&this.widgetJson.UrlLink.GridUrlType.toString()===UrlLinkType[UrlLinkType.Row]&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.UrlLink.UrlPath)&&this.widgetJson.UrlLink.UrlPath!==""))for(r=u.filter(function(n){return e.widgetJson.UrlLink.PassingParameters.indexOf(n.Value)!==-1}),i.url=this.widgetJson.UrlLink.UrlPath,i.isEnabled=!0,t=0;t<r.length;t++)f=this.getItemValue(r[t].Category,r[t].Id,n),i.parameterDetails.push({parameter:r[t].Value,value:f});return i.urlLinkInfo=this.widgetJson.UrlLink,i},t.prototype.getConfiguredColumnsInfo=function(n){var o=[],s,f,t,r,i;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length>0)for(s=this.DataGroupInfo.FieldContainers,f=0;f<s.length;f++)for(t=s[f].FieldInfos,r=this.DataGroupInfo.FieldContainers[f],i=0;i<t.length;i++)if(t.length>0&&!this.isDuplicate(o,t[i].DataField)&&(!n||t[i].FieldType==="Dimensions")){var h=t[i].SummaryType,c=t[i].DateTimeFormat,e=c!==DateTimeFormat[DateTimeFormat.None]?c:h!==SummaryType[SummaryType.NONE]?h:"",l=t[i].Name+(e!==""?"("+e+")":""),a=e+(e.length>1?"(":"")+t[i].Name+(e.length>1?")":""),u=r.Name;r.Name==="Series"?u="title":r.Name==="Measure"?u="measure":r.Name==="Dimension"?u="dimension":r.Name==="Tooltip"?u="hiddenColumns":r.Name==="Image"?u="image":r.Name==="BackgroundImage"&&(u="BackgroundImage");o.push({Category:u,Name:l,Value:a,Id:t[i].UniqueColumnName,FieldName:t[i].Name})}return o},t.prototype.getItemValue=function(n,t,i){var u,r;if(!BoldBIDashboard.isNullOrUndefined(i.model))if(n==="hiddenColumns")for(r=0;r<i.model.hiddenColumns.length;r++)t===i.model.hiddenColumns[r].uniqueColumnName&&(u=i.model[n][r].value);else u=i.model[n].text;return u},t.prototype.isDuplicate=function(n,t){for(var i=0;i<n.length;i++)if(n[i].Name===t)return!0;return!1},t.prototype.checkValidPattern=function(n,t){for(var u=!1,r=n.split(/{|}/),i=0;i<r.length;i++)if(!BoldBIDashboard.isNullOrUndefined(r[i])&&r[i]!==""&&!isNaN(r[i]))if(parseInt(r[i])<t.length)u=!0;else return!1;return u},t.prototype.validateBackgroundImagePattern=function(){var n=this.getBindedColumnIndex(this.DataGroupInfo),t=!1,i;this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[n.backgroundImageIndex].FieldInfos.length>0&&(i=this.DataGroupInfo.FieldContainers[n.backgroundImageIndex].FieldInfos,t=this.checkValidPattern(this.getNumberCardProperties().BackgroundSettings.Image.URLPattern,i));t||this.designerInstance.modules.util.alertDialog("Dashboard Designer",this.locale.alertWindowMesages.imageURLPatternValidationMessage,IconType.information,AlertType.Alert,!1,"")},t.prototype.validateImagePattern=function(){var n=this.getBindedColumnIndex(this.DataGroupInfo),t=!1,i;this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[n.imageIndex].FieldInfos.length>0&&(i=this.DataGroupInfo.FieldContainers[n.imageIndex].FieldInfos,t=this.checkValidPattern(this.getNumberCardProperties().ImageSettings.URLPattern,i));t||this.designerInstance.modules.util.alertDialog("Dashboard Designer",this.locale.alertWindowMesages.imageURLPatternValidationMessage,IconType.information,AlertType.Alert,!1,"")},t.prototype.numberCardPropertyPanel=function(){var f=this,t=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.widgetJson.FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo,this.widgetJson.ContainerSettings),i=this.getBindedColumnIndex(this.DataGroupInfo),r,u;return this.containerPropertyItem=t.containerProperties,t.propertyGridItems.Header=this.widgetJson.ContainerSettings.Title,t.propertyGridItems.SubTitle=this.widgetJson.ContainerSettings.SubTitle,t.propertyGridItems.Description=this.widgetJson.ContainerSettings.Description,t.propertyGridItems.Type="NumberCard",t.linkingProperty.Items[0].value=n.prototype.useExistingLink.call(this),r=BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem.getInterWidgetLinkingProperty(this.locale.propertyPanel.linking.interWidgetLinkingText,!0),r.Items[0].value=n.prototype.useExistingWidgetLinking.call(this),u=this.DataGroupInfo,this.bbdesigner$.each(t.containerActionsProperty.Items,function(n,t){BoldBIDashboard.isNullOrUndefined(t.isVisible)||(t.isVisible=!1);(t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ImageExport"||t.name==="PDFExport"||t.name==="ViewData"||t.name==="ShowMaximize"||t.name==="PinWidget")&&(t.isVisible=!0);t.name==="ShowHeader"&&!BoldBIDashboard.isNullOrUndefined(f.DataGroupInfo.FieldContainers[i.seriesIndex])&&f.DataGroupInfo.FieldContainers[i.seriesIndex].FieldInfos.length>0&&(t.isVisible=!0)}),this.bbdesigner$.each(t.containerSettingsProperty.Items,function(n,t){BoldBIDashboard.isNullOrUndefined(t.isVisible)||(t.isVisible=!1);(t.name==="ContainerTitleAlign"||t.name==="ContainerTitleColor")&&u.FieldContainers.length>2&&u.FieldContainers[i.seriesIndex].FieldInfos.length!==0&&(t.isVisible=!0);t.name==="ShowShadow"&&(t.isVisible=!0)}),t.propertyGridItems.Items=[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"ShowTooltip",displayName:this.locale.propertyPanel.basicSettings.showTooltip,value:this.getNumberCardProperties().ShowTooltip,itemType:"bool"},]},{CategoryName:"Formatting",DisplayName:this.locale.propertyPanel.formattingText,IsVisible:this.isNecessaryDataConfigured(),Items:[{name:"ColorSettings",callbackInstance:this,callbackMethod:"renderDefaultColorSettings",itemType:"object",elementType:"NumberCard"},]},{CategoryName:"Appearance",DisplayName:this.locale.propertyPanel.cardAppearanceCategory,Items:[{name:"HorizontalAlignment",isVisible:!0,displayName:this.locale.propertyPanel.appearanceSettings.horizontalAlignment,value:this.getNumberCardProperties().AlignmentSettings.HorizontalAlignment,itemType:"dropdown",valueList:["Left","Center","Right"]},{name:"VerticalAlignment",isVisible:!0,displayName:this.locale.propertyPanel.appearanceSettings.verticalAlignment,value:this.getNumberCardProperties().AlignmentSettings.VerticalAlignment,itemType:"dropdown",valueList:["Top","Center","Bottom"]},{name:"AutoFontSize",displayName:this.locale.propertyPanel.appearanceSettings.autoFontSize,value:this.getNumberCardProperties().AlignmentSettings.AutoFontSize,itemType:"bool"},{name:"ScalingFactor",displayName:this.locale.propertyPanel.appearanceSettings.scalingFactor,isDisable:!this.getNumberCardProperties().AlignmentSettings.AutoFontSize,value:this.getNumberCardProperties().AlignmentSettings.ScalingFactor,itemType:"float",decimalPlaces:1,minimum:.1,maximum:5,interval:.1},{name:"ResponsiveMargin",isVisible:!1,displayName:this.locale.propertyPanel.responsiveMargin,value:this.getNumberCardProperties().ResponsiveMargin,itemType:"bool"},]},{CategoryName:"Measure",DisplayName:this.locale.propertyPanel.cardMeasureCategory,Items:[{name:"ShowMeasure",displayName:this.locale.propertyPanel.cardMeasureSettings.showMeasure,value:this.getNumberCardProperties().MeasureSettings.Visibility,itemType:"bool"},{name:"MeasureColor",isVisible:!0,displayName:this.locale.propertyPanel.cardMeasureSettings.measureColor,value:this.getNumberCardProperties().MeasureSettings.Color,itemType:"color"},{name:"MeasureAutoFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,value:this.getNumberCardProperties().MeasureSettings.AutoFontSize,itemType:"bool"},{name:"MeasureFontSize",isVisible:!0,displayName:this.locale.propertyPanel.cardMeasureSettings.measureFontSize,isDisable:this.getNumberCardProperties().MeasureSettings.AutoFontSize,value:this.getNumberCardProperties().MeasureSettings.FontSize,itemType:"float",decimalPlaces:0,minimum:8,maximum:72,unitType:"px"},]},{CategoryName:"Title",DisplayName:this.locale.propertyPanel.cardTitleCategory,Items:[{name:"ShowTitle",displayName:this.locale.propertyPanel.cardTitleSettings.showTitle,value:this.getNumberCardProperties().TitleSettings.Visibility,itemType:"bool"},{name:"TitleText",isDisable:!1,isVisible:this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[i.seriesIndex].FieldInfos.length!==0?!1:!0,displayName:this.locale.propertyPanel.cardTitleSettings.titleText,value:BoldBIDashboard.isNullOrUndefined(this.getNumberCardProperties().TitleSettings.Text)||this.getNumberCardProperties().TitleSettings.Text===""?"Card Title":this.getNumberCardProperties().TitleSettings.Text,itemType:"string"},{name:"EnableWrap",displayName:this.locale.propertyPanel.cardTitleSettings.enableWrap,value:this.getNumberCardProperties().TitleSettings.EnableWrap,isVisible:this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[i.seriesIndex].FieldInfos.length===0,itemType:"bool"},{name:"TitleColor",isVisible:!0,displayName:this.locale.propertyPanel.cardTitleSettings.titleColor,value:this.getNumberCardProperties().TitleSettings.Color,itemType:"color"},{name:"TitleAutoFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,value:this.getNumberCardProperties().TitleSettings.AutoFontSize,itemType:"bool"},{name:"TitleFontSize",isVisible:!0,displayName:this.locale.propertyPanel.cardTitleSettings.titleFontSize,isDisable:this.getNumberCardProperties().TitleSettings.AutoFontSize,value:this.getNumberCardProperties().TitleSettings.FontSize,itemType:"float",decimalPlaces:0,minimum:8,maximum:72,unitType:"px"},{name:"TitlePosition",isVisible:!0,displayName:this.locale.propertyPanel.cardTitleSettings.titlePosition,value:this.getNumberCardProperties().TitleSettings.Position,itemType:"dropdown",valueList:["Top","Bottom"]}]},{CategoryName:"SeriesSettings",DisplayName:this.locale.propertyPanel.seriesSettingsCategory,IsVisible:this.isNecessaryDataConfigured()&&this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[i.seriesIndex].FieldInfos.length>0,Items:[{name:"EnableFixedSeries",displayName:this.locale.propertyPanel.seriesSettings.fixedRowsAndColumnsText,value:this.getNumberCardProperties().SeriesSettings.IsFixedRowsAndColumns,itemType:"bool"},{name:"FixedRowCount",isVisible:this.getNumberCardProperties().SeriesSettings.IsFixedRowsAndColumns,displayName:this.locale.propertyPanel.seriesSettings.rowCountText,value:this.getNumberCardProperties().SeriesSettings.RowCount,itemType:"float",decimalPlaces:0,interval:1,minimum:1,maximum:15},{name:"FixedColumnCount",isVisible:this.getNumberCardProperties().SeriesSettings.IsFixedRowsAndColumns,displayName:this.locale.propertyPanel.seriesSettings.columnCountText,value:this.getNumberCardProperties().SeriesSettings.ColumnCount,itemType:"float",decimalPlaces:0,interval:1,minimum:1,maximum:15},]},{CategoryName:"Animation Settings",DisplayName:this.locale.propertyPanel.animationText,Items:[{name:"EnableAnimation",displayName:this.locale.propertyPanel.animationSettings.enableAnimation,value:this.getNumberCardProperties().AnimationSettings.EnableAnimation,itemType:"bool"},{name:"AnimationDuration",displayName:this.locale.propertyPanel.animationSettings.animationDuration,value:this.getNumberCardProperties().AnimationSettings.AnimationDuration,itemType:"float",decimalPlaces:0,interval:1,minimum:1e3,maximum:5e3,unitType:"px"},]},{CategoryName:"Image",DisplayName:this.locale.propertyPanel.imageText,Items:[{name:"ShowImage",displayName:this.locale.propertyPanel.imageSettings.showImage,value:this.getNumberCardProperties().ImageSettings.Visibility,itemType:"bool"},{name:"ImageMode",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.imageSettings.imageMode,value:this.getNumberCardProperties().ImageSettings.ImageMode,itemType:"dropdown",valueList:["Default","Fill","Uniform","Uniform To Fill"]},{name:"ImagePosition",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.imageSettings.imagePosition,value:!BoldBIDashboard.isNullOrUndefined(this.getNumberCardProperties().ImageSettings.ImagePosition)&&this.getNumberCardProperties().ImageSettings.ImagePosition!==""?this.getNumberCardProperties().ImageSettings.ImagePosition:"Right",itemType:"dropdown",valueList:["Left","Right"]},{name:"ImageSource",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.imageSettings.imageSource,value:this.getNumberCardProperties().ImageSettings.ImageSource,itemType:"dropdown",valueList:["Local","URL","Parameterized URL"]},{name:"ImageBrowse",displayName:this.locale.propertyPanel.imageSettings.imageBrowse,isVisible:this.getNumberCardProperties().ImageSettings.ImageSource==="Local"?!0:!1,itemType:"object",callbackInstance:this,callbackMethod:"renderImageBrowseBox"},{name:"ImageURL",displayName:this.locale.propertyPanel.imageSettings.imageURL,itemType:"string",value:this.getNumberCardProperties().ImageSettings.ImageUrl,isVisible:this.getNumberCardProperties().ImageSettings.ImageSource==="URL"?!0:!1},{name:"ImagePattern",displayName:this.locale.propertyPanel.imageSettings.imagePattern,itemType:"string",value:this.getNumberCardProperties().ImageSettings.URLPattern,isVisible:this.getNumberCardProperties().ImageSettings.ImageSource==="Parameterized URL"?!0:!1}]},{CategoryName:"Background",DisplayName:this.locale.propertyPanel.backgroundText,Items:[{name:"ShowBackgroundImage",displayName:this.locale.propertyPanel.backgroundSettings.showBackgroundImage,value:this.getNumberCardProperties().BackgroundSettings.Image.Visibility,itemType:"bool"},{name:"BackgroundImageMode",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.backgroundSettings.backgroundImageMode,value:this.getNumberCardProperties().BackgroundSettings.Image.ImageMode,itemType:"dropdown",valueList:["Default","Fill","Uniform","Uniform To Fill"]},{name:"BackgroundImageSource",isDisable:!1,isVisible:!0,displayName:this.locale.propertyPanel.backgroundSettings.backgroundImageSource,value:this.getNumberCardProperties().BackgroundSettings.Image.ImageSource,itemType:"dropdown",valueList:["Local","URL","Parameterized URL"]},{name:"BackgroundImageBrowse",displayName:this.locale.propertyPanel.backgroundSettings.backgroundImageBrowse,isVisible:this.getNumberCardProperties().BackgroundSettings.Image.ImageSource==="Local"?!0:!1,itemType:"object",callbackInstance:this,callbackMethod:"renderBackgroundImageBrowseBox"},{name:"BackgroundImageURL",displayName:this.locale.propertyPanel.backgroundSettings.backgroundImageURL,itemType:"string",value:this.getNumberCardProperties().BackgroundSettings.Image.ImageUrl,isVisible:this.getNumberCardProperties().BackgroundSettings.Image.ImageSource==="URL"?!0:!1},{name:"BackgroundImagePattern",displayName:this.locale.propertyPanel.backgroundSettings.backgroundImagePattern,itemType:"string",value:this.getNumberCardProperties().BackgroundSettings.Image.URLPattern,isVisible:this.getNumberCardProperties().BackgroundSettings.Image.ImageSource==="Parameterized URL"?!0:!1},{name:"BackgroundColor",isVisible:!0,displayName:this.locale.propertyPanel.backgroundSettings.backgroundColor,value:this.getNumberCardProperties().BackgroundSettings.Color,itemType:"color"},{name:"Transparency",isVisible:!0,displayName:this.locale.propertyPanel.backgroundSettings.transparency,value:this.getNumberCardProperties().BackgroundSettings.Transparency,decimalPlaces:1,itemType:"float",minimum:0,maximum:1,interval:.1,unitType:"pt"},]},{CategoryName:"Sparkline",DisplayName:this.locale.propertyPanel.sparklineText,Items:[{name:"ShowSparkline",displayName:this.locale.propertyPanel.sparkLineSettings.showSparkline,value:this.getNumberCardProperties().SparklineSettings.Visibility,itemType:"bool"},{name:"SparklineColor",isVisible:!0,displayName:this.locale.propertyPanel.sparkLineSettings.sparklineColor,value:this.getNumberCardProperties().SparklineSettings.Fill,itemType:"color"},{name:"SparklineOpacity",isVisible:!0,displayName:this.locale.propertyPanel.sparkLineSettings.sparklineOpacity,value:this.getNumberCardProperties().SparklineSettings.Opacity,itemType:"float",decimalPlaces:1,minimum:0,maximum:1,interval:.1,unitType:"pt"},]},t.linkingProperty,t.filterSettingsProperty,t.containerSettingsProperty,t.containerActionsProperty,r,t.noDataContainerActionsProperty],t.propertyGridItems},t.prototype.setPropertyElement=function(n,t,i,r){var u,f;this.designPanelInstance.selectedReportItems.length>0&&this.Name===this.designPanelInstance.selectedReportItems[0].attr("data-name")&&(this.propertyPanel.canUpdate=!1,u=this.propertyPanel.getPropertyElement(this.numberCardPropertyPanel(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r),u.value=i,f=this.bbdesigner$.extend(!0,{},u),f.categoryName=n,this.propertyPanel.updatePropertyValue(f,"NumberCard",i),this.propertyPanel.canUpdate=!0)},t.prototype.updateNumberCardProperties=function(n,t,i,r){var o=!1,s=this.getBindedColumnIndex(this.DataGroupInfo),u,f,c,e;switch(n){case"Name":this.updateContainerTitle(i);break;case"SubTitle":this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[s.seriesIndex].FieldInfos.length!==0&&this.DataGroupInfo.FieldContainers[s.measureIndex].FieldInfos.length!==0?this.propertyPanel.setSubTitle(this.widgetJson,i):this.widgetJson.ContainerSettings.SubTitle=i;break;case"Description":if(BoldBIDashboard.isNullOrUndefined(this.numberCardContent)){var l=!BoldBIDashboard.isNullOrUndefined(i)&&i.trim().length>0,a={description:{visibility:l,text:i}},h=this.numberCardElement.data("BoldBIDashboardNumberCard");BoldBIDashboard.isNullOrUndefined(h)||h.setModel(a)}this.propertyPanel.setDescription(this.widgetJson,i);break;case"HorizontalAlignment":this.updateHorizontalAlignment(i);break;case"ShowTooltip":this.updateShowToolTip(i);break;case"VerticalAlignment":this.updateVerticalAlignment(i);break;case"AutoFontSize":this.updateAutoFontSize(i);break;case"ScalingFactor":this.updateScalingFactor(i);break;case"ResponsiveMargin":this.updateResponsiveMargin(i);break;case"ShowMeasure":this.updateMeasureVisibility(i);break;case"EnableAnimation":this.updateAnimation(i);break;case"AnimationDuration":this.updateAnimationDuration(i);break;case"EnableFixedSeries":this.updateFixedSeries(i);break;case"FixedRowCount":this.updateFixedRows(i);break;case"FixedColumnCount":this.updateFixedColumns(i);break;case"MeasureColor":this.updateMeasureColor(i);break;case"MeasureAutoFontSize":this.updateMeasureAutoFontSize(i);break;case"MeasureFontSize":this.updateMeasureFontSize(i);break;case"ShowTitle":this.updateTitleVisibility(i);break;case"TitleColor":this.updateTitleColor(i);break;case"TitleText":this.updateTitleText(i);break;case"EnableWrap":this.updateTitleWrap(i);break;case"TitleAutoFontSize":this.updateTitleAutoFontSize(i);break;case"TitleFontSize":this.updateTitleFontSize(i);break;case"TitlePosition":this.updateTitlePosition(i);break;case"BackgroundColor":this.updateBackgroundColor(i);break;case"Transparency":this.updateTransparency(i);break;case"ShowSparkline":this.updateSparklineVisibility(i);break;case"SparklineColor":this.updateSparklineColor(i);break;case"SparklineOpacity":this.updateSparklineOpacity(i);break;case"ShowImage":this.updateImageVisibility(i);break;case"ImageMode":this.updateImageMode(i);break;case"ImagePosition":this.updateImagePosition(i);break;case"ImageSource":this.resetImageProperties(r);i==="Parameterized URL"&&this.validateImagePattern();this.updateImageSource(i);break;case"ImageURL":this.updateImageURL(i);break;case"ImagePattern":this.getNumberCardProperties().ImageSettings.URLPattern=i;this.validateImagePattern();this.updateImageParameterizedURL();break;case"ShowBackgroundImage":this.updateBackgroundImageVisibility(i);break;case"BackgroundImageMode":this.updateBackgroundImageMode(i);break;case"BackgroundImageSource":this.resetBackgroundImageProperties(r);i==="Parameterized URL"&&this.validateBackgroundImagePattern();this.updateBackgroundImageSource(i);break;case"BackgroundImageURL":this.updateBackgroundImageURL(i);break;case"BackgroundImagePattern":this.getNumberCardProperties().BackgroundSettings.Image.URLPattern=i;this.validateBackgroundImagePattern();this.updateBackgroundImageParameterizedURL();break;case"ItemLink":this.UpdateLink(i);break;case"ActAsMasterWidget":o=!0;!this.numberCardItem.hasClass("e-numbercard-single")&&this.numberCardContent.length>0&&(i||this.widgetJson.UrlLink.EnableLink?this.numberCardContent.addClass("e-dbrd-master-widget"):this.numberCardContent.removeClass("e-dbrd-master-widget"))}if(!o){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(u=this.designPanelInstance.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)c=u[f],c.attr("id")===this.controlContainer.attr("id")&&(e=this.bbdesigner$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"NumberCard",i));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-numbercard-item",this.designerId+"_"+this.widgetJson.UniqueName,[n,i,t,r],[n,t,i,r])}},t.prototype.updateContainerTitle=function(n){var t=this.getBindedColumnIndex(this.DataGroupInfo);this.widgetJson.ContainerSettings.Title=n;this.DataGroupInfo.FieldContainers.length!==0&&this.DataGroupInfo.FieldContainers[t.seriesIndex].FieldInfos.length!==0?(this.propertyPanel.setTitle(this.widgetJson),this.getNumberCardProperties().TitleSettings.Text=this.widgetJson.ContainerSettings.Title=n,this.setPropertyElement("Title","TitleText",n),this.isTitleEdited=!0):(this.getNumberCardProperties().TitleSettings.Text=n,this.setPropertyElement("Title","TitleText",n),this.updateTitleText(n))},t.prototype.UpdateLink=function(n){this.widgetJson.UrlLink.EnableLink=n.EnableLink;this.widgetJson.UrlLink.LinkType=n.LinkType;this.widgetJson.UrlLink.GridUrlType=n.GridUrlType;this.widgetJson.UrlLink.PassingParameters=n.PassingParameters;this.widgetJson.UrlLink.UrlPath=n.UrlPath;!BoldBIDashboard.isNullOrUndefined(this.numberCardElement)&&n.EnableLink?this.numberCardItem.addClass("e-numbercard-cursor-pointer"):this.numberCardItem.removeClass("e-numbercard-cursor-pointer");!this.numberCardItem.hasClass("e-numbercard-single")&&this.numberCardContent.length>0&&(this.widgetJson.FilterSettings.ActAsMasterWidget||n.EnableLink?this.numberCardContent.addClass("e-dbrd-master-widget"):this.numberCardContent.removeClass("e-dbrd-master-widget"))},t.prototype.updateHorizontalAlignment=function(n){var t,i;this.getNumberCardProperties().AlignmentSettings.HorizontalAlignment=n;t={alignment:{horizontal:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.updateSeriesCardProperty(t),this.resizeCard())},t.prototype.updateVerticalAlignment=function(n){var t,i;this.getNumberCardProperties().AlignmentSettings.VerticalAlignment=n;t={alignment:{vertical:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.updateSeriesCardProperty(t),this.resizeCard())},t.prototype.updateAutoFontSize=function(n){var r=this,t,i;this.getNumberCardProperties().AlignmentSettings.AutoFontSize=n;this.propertyPanel.updateItemDisable("float",this.Type.toString(),"Appearance","ScalingFactor",!n);t={autoFontSize:{enable:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.resizeCard(),this.updateSeriesCardProperty(t),setTimeout(function(){r.designerInstance.designerPanel.hideLoadingIndicator(r.controlContainer)},100))},t.prototype.updateResponsiveMargin=function(n){var r=this,t,i;this.getNumberCardProperties().ResponsiveMargin=n;t={responsiveMargin:n};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.resizeCard(),this.updateSeriesCardProperty(t),setTimeout(function(){r.designerInstance.designerPanel.hideLoadingIndicator(r.controlContainer)},100))},t.prototype.updateScalingFactor=function(n){var r=this,t,i;this.getNumberCardProperties().AlignmentSettings.ScalingFactor=n;t={autoFontSize:{fontSizeFactor:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.resizeCard(),this.updateSeriesCardProperty(t),setTimeout(function(){r.designerInstance.designerPanel.hideLoadingIndicator(r.controlContainer)},100))},t.prototype.updateMeasureVisibility=function(n){var t,i;this.getNumberCardProperties().MeasureSettings.Visibility=n;t={measure:{visibility:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.updateSeriesCardProperty(t),this.resizeCard())},t.prototype.updateShowToolTip=function(n){var t,i;this.getNumberCardProperties().ShowTooltip=n;t={tooltip:{"class":n?"bbi-dbrd-designer-hoverable":""}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.updateSeriesCardProperty(t),this.resizeCard())},t.prototype.updateAnimation=function(n){var t,i;this.getNumberCardProperties().AnimationSettings.EnableAnimation=n;t={animationSettings:{enableAnimation:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateAnimationDuration=function(n){var t,i;this.getNumberCardProperties().AnimationSettings.AnimationDuration=n;t={animationSettings:{animationDuration:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateFixedSeries=function(n){this.getNumberCardProperties().SeriesSettings.IsFixedRowsAndColumns=n;this.propertyPanel.updateItemVisibility(this.Type.toString(),"SeriesSettings","FixedRowCount",n);this.propertyPanel.updateItemVisibility(this.Type.toString(),"SeriesSettings","FixedColumnCount",n);this.setPropertyElement("SeriesSettings","FixedRowCount",this.visibleRowsCount);this.setPropertyElement("SeriesSettings","FixedColumnCount",this.columnCount);this.getNumberCardProperties().SeriesSettings.RowCount=this.visibleRowsCount;this.getNumberCardProperties().SeriesSettings.ColumnCount=this.columnCount;this.resizeCard()},t.prototype.updateFixedRows=function(n){this.getNumberCardProperties().SeriesSettings.RowCount=n;this.resizeCard()},t.prototype.updateFixedColumns=function(n){this.getNumberCardProperties().SeriesSettings.ColumnCount=n;this.resizeCard()},t.prototype.updateMeasureColor=function(n,t){var u,r,i;if(t===void 0&&(t=!0),t&&(this.getNumberCardProperties().MeasureSettings.Color=n),u={measure:{foreground:n}},BoldBIDashboard.isNullOrUndefined(this.numberCardContent))i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.measure.isColorCustomized||i.setModel(u);else for(r=0;r<this.numberCardContent.children().length;r++)i=this.bbdesigner$(this.numberCardContent.children()[r]).data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.measure.isColorCustomized||i.setModel(u)},t.prototype.updateMeasureAutoFontSize=function(n){this.getNumberCardProperties().MeasureSettings.AutoFontSize=n;var t=n?this.getMeasureFontSizeBasedOnResolution():this.getNumberCardProperties().MeasureSettings.FontSize;this.updateMeasureFontSize(t);this.propertyPanel.updateItemDisable("float","NumberCard","Measure","MeasureFontSize",n)},t.prototype.updateMeasureFontSize=function(n){var r=this,t,i;this.getNumberCardProperties().MeasureSettings.FontSize=n;t={measure:{fontSize:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.resizeCard(),this.updateSeriesCardProperty(t),setTimeout(function(){r.designerInstance.designerPanel.hideLoadingIndicator(r.controlContainer)},100))},t.prototype.updateTitleVisibility=function(n){var t,i;this.getNumberCardProperties().TitleSettings.Visibility=n;t={title:{visibility:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.updateSeriesCardProperty(t),this.resizeCard())},t.prototype.updateTitleColor=function(n,t){var u,r,i;if(t===void 0&&(t=!0),t&&(this.getNumberCardProperties().TitleSettings.Color=n),u={title:{foreground:n}},BoldBIDashboard.isNullOrUndefined(this.numberCardContent))i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.title.isColorCustomized||i.setModel(u);else for(r=0;r<this.numberCardContent.children().length;r++)i=this.bbdesigner$(this.numberCardContent.children()[r]).data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.title.isColorCustomized||i.setModel(u)},t.prototype.updateTitleAutoFontSize=function(n){this.getNumberCardProperties().TitleSettings.AutoFontSize=n;var t=n?Number(this.getFontSizeBasedOnResolution().split("px")[0]):this.getNumberCardProperties().TitleSettings.FontSize;this.updateTitleFontSize(t);this.propertyPanel.updateItemDisable("float","NumberCard","Title","TitleFontSize",n)},t.prototype.updateTitleFontSize=function(n){var r=this,t,i;this.getNumberCardProperties().TitleSettings.FontSize=n;t={title:{fontSize:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.resizeCard(),this.updateSeriesCardProperty(t),setTimeout(function(){r.designerInstance.designerPanel.hideLoadingIndicator(r.controlContainer)},100))},t.prototype.updateTitlePosition=function(n){var r=this,t,i;this.getNumberCardProperties().TitleSettings.Position=n;t={title:{position:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.updateSeriesCardProperty(t),setTimeout(function(){r.designerInstance.designerPanel.hideLoadingIndicator(r.controlContainer)},100))},t.prototype.updateTitleText=function(n){this.getNumberCardProperties().TitleSettings.Text=this.widgetJson.ContainerSettings.Title=n;this.isTitleEdited=!0;var i={title:{text:BoldBIDashboard.DashboardUtil.encodeText(n)}},t=this.numberCardElement.data("BoldBIDashboardNumberCard");BoldBIDashboard.isNullOrUndefined(t)||t.setModel(i);this.updateTitleHeaderText()},t.prototype.updateTitleWrap=function(n){this.getNumberCardProperties().TitleSettings.EnableWrap=n;this.isTitleEdited=!0;var i={title:{enableWrap:n}},t=this.numberCardElement.data("BoldBIDashboardNumberCard");BoldBIDashboard.isNullOrUndefined(t)||t.setModel(i)},t.prototype.updateTitleHeaderText=function(){!BoldBIDashboard.isNullOrUndefined(this.propertyPanel.headerInput)&&this.designerInstance.designerPanel.selectedReportItems[0]&&this.Name===this.designerInstance.designerPanel.selectedReportItems[0].attr("data-name")&&this.propertyPanel.headerInput.val(this.widgetJson.ContainerSettings.Title)},t.prototype.updateBackgroundColor=function(n,t){var u,r,i;if(t===void 0&&(t=!0),t&&(this.getNumberCardProperties().BackgroundSettings.Color=n),u={background:{color:n}},BoldBIDashboard.isNullOrUndefined(this.numberCardContent))i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.background.isColorCustomized||i.setModel(u);else for(r=0;r<this.numberCardContent.children().length;r++)i=this.bbdesigner$(this.numberCardContent.children()[r]).data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.background.isColorCustomized||i.setModel(u)},t.prototype.updateControlBackgroundForSeriesCard=function(n){var t=this.ControlContainer.find(">.bbi-dbrd-control-background");t.css("background-color",n?this.designerInstance.modules.themeHelper.getWidgetTileBackground(this.Type):"transparent")},t.prototype.updateTransparency=function(n,t){var i,r;t===void 0&&(t=!0);t&&(this.getNumberCardProperties().BackgroundSettings.Transparency=n);i={background:{opacity:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(r=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(r)||r.setModel(i)):this.updateSeriesCardProperty(i)},t.prototype.updateSparklineVisibility=function(n){var t,i;this.getNumberCardProperties().SparklineSettings.Visibility=n;t={sparkline:{visibility:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateSparklineColor=function(n){var r,i,t;if(this.getNumberCardProperties().SparklineSettings.Fill=n,r={sparkline:{fill:n}},BoldBIDashboard.isNullOrUndefined(this.numberCardContent))t=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.sparkline.isColorCustomized||t.setModel(r);else for(i=0;i<this.numberCardContent.children().length;i++)t=this.bbdesigner$(this.numberCardContent.children()[i]).data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.sparkline.isColorCustomized||t.setModel(r)},t.prototype.updateSparklineOpacity=function(n,t){var i,r;t===void 0&&(t=!0);t&&(this.getNumberCardProperties().SparklineSettings.Opacity=n);i={sparkline:{opacity:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(r=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(r)||r.setModel(i)):this.updateSeriesCardProperty(i)},t.prototype.resetImageProperties=function(n){this.getNumberCardProperties().ImageSettings.FilePath="";this.getNumberCardProperties().ImageSettings.ImageName="";this.getNumberCardProperties().ImageSettings.ImageUrl="";this.getNumberCardProperties().ImageSettings.URLPattern="{0}";this.bbdesigner$(this.filePath).val("");this.designerInstance.element.find("#"+this.designerId+"_"+this.Type+"_"+n.categoryName+"_ImageURL").val("");this.designerInstance.element.find("#"+this.designerId+"_"+this.Type+"_"+n.categoryName+"_ImagePattern").val("{0}")},t.prototype.updateImageSource=function(n){var r,i,t;this.getNumberCardProperties().ImageSettings.ImageSource=n;r=null;switch(n){case"Local":if(this.propertyPanel.updateItemVisibility("NumberCard","Image","ImageURL",!1),this.propertyPanel.updateItemVisibility("NumberCard","Image","ImagePattern",!1),this.propertyPanel.updateItemVisibility("NumberCard","Image","ImageBrowse",!0),r={image:{type:"base64",data:""}},BoldBIDashboard.isNullOrUndefined(this.numberCardContent))t=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.image.isImageCustomized||t.setModel(r);else for(i=0;i<this.numberCardContent.children().length;i++)t=this.bbdesigner$(this.numberCardContent.children()[i]).data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.image.isImageCustomized||t.setModel(r);break;case"URL":if(this.propertyPanel.updateItemVisibility("NumberCard","Image","ImagePattern",!1),this.propertyPanel.updateItemVisibility("NumberCard","Image","ImageBrowse",!1),this.propertyPanel.updateItemVisibility("NumberCard","Image","ImageURL",!0),r={image:{type:"url",data:""}},BoldBIDashboard.isNullOrUndefined(this.numberCardContent))t=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.image.isImageCustomized||t.setModel(r);else for(i=0;i<this.numberCardContent.children().length;i++)t=this.bbdesigner$(this.numberCardContent.children()[i]).data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.image.isImageCustomized||t.setModel(r);break;case"Parameterized URL":this.propertyPanel.updateItemVisibility("NumberCard","Image","ImageBrowse",!1);this.propertyPanel.updateItemVisibility("NumberCard","Image","ImageURL",!1);this.propertyPanel.updateItemVisibility("NumberCard","Image","ImagePattern",!0);this.updateImageParameterizedURL()}},t.prototype.updateImageParameterizedURL=function(){var t,u=this.getBindedColumnIndex(this.DataGroupInfo),f=this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[u.imageIndex].FieldInfos.length>0?this.DataGroupInfo.FieldContainers[u.imageIndex].FieldInfos:[],i,r,n;if(BoldBIDashboard.isNullOrUndefined(this.dataValues)||BoldBIDashboard.isNullOrUndefined(this.dataValues.imageData)||BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo))n=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(n)||n.model.image.isImageCustomized||(t={image:{type:"url",data:this.getNumberCardProperties().ImageSettings.URLPattern}},n.setModel(t));else if(i="",this.numberCardContent!=null&&this.DataGroupInfo.FieldContainers[u.seriesIndex].FieldInfos.length>0)for(r=0;r<this.numberCardContent.children().length;r++)n=this.bbdesigner$(this.numberCardContent.children()[r]).data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(n)||n.model.image.isImageCustomized||(i=this.getImageForSeriesCard(this.getNumberCardProperties().ImageSettings.URLPattern,this.dataValues.imageData,n.model.title.text,f),t={image:{type:"url",data:i}},n.setModel(t));else n=this.numberCardElement.data("BoldBIDashboardNumberCard"),i=this.getImageForSingleCard(this.getNumberCardProperties().ImageSettings.URLPattern,this.dataValues.imageData,f),BoldBIDashboard.isNullOrUndefined(n)||n.model.image.isImageCustomized||(t={image:{type:"url",data:i}},n.setModel(t))},t.prototype.updateImageURL=function(n){var r,i,t;if(this.getNumberCardProperties().ImageSettings.ImageUrl=n,r={image:{data:n}},BoldBIDashboard.isNullOrUndefined(this.numberCardContent))t=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.image.isImageCustomized||t.setModel(r);else for(i=0;i<this.numberCardContent.children().length;i++)t=this.bbdesigner$(this.numberCardContent.children()[i]).data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.image.isImageCustomized||t.setModel(r)},t.prototype.updateImageMode=function(n){var t,i;this.getNumberCardProperties().ImageSettings.ImageMode=n;t={image:{mode:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateImagePosition=function(n){var t,i;this.getNumberCardProperties().ImageSettings.ImagePosition=n;t={image:{position:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateImageVisibility=function(n){var t,i;this.getNumberCardProperties().ImageSettings.Visibility=n;t={image:{visibility:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):(this.updateSeriesCardProperty(t),this.resizeCard())},t.prototype.resetBackgroundImageProperties=function(n){this.getNumberCardProperties().BackgroundSettings.Image.FilePath="";this.getNumberCardProperties().BackgroundSettings.Image.ImageName="";this.getNumberCardProperties().BackgroundSettings.Image.ImageUrl="";this.getNumberCardProperties().BackgroundSettings.Image.URLPattern="{0}";this.bbdesigner$(this.backgroundImageFilePath).val("");this.designerInstance.element.find("#"+this.designerId+"_"+this.Type+"_"+n.categoryName+"_BackgroundImageURL").val("");this.designerInstance.element.find("#"+this.designerId+"_"+this.Type+"_"+n.categoryName+"_BackgroundImagePattern").val("{0}")},t.prototype.updateBackgroundImageSource=function(n){var r,i,t;this.getNumberCardProperties().BackgroundSettings.Image.ImageSource=n;r=null;switch(n){case"Local":if(this.propertyPanel.updateItemVisibility("NumberCard","Background","BackgroundImageURL",!1),this.propertyPanel.updateItemVisibility("NumberCard","Background","BackgroundImagePattern",!1),this.propertyPanel.updateItemVisibility("NumberCard","Background","BackgroundImageBrowse",!0),r={background:{type:"base64",image:""}},BoldBIDashboard.isNullOrUndefined(this.numberCardContent))t=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.background.isImageCustomized||t.setModel(r);else for(i=0;i<this.numberCardContent.children().length;i++)t=this.bbdesigner$(this.numberCardContent.children()[i]).data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.background.isImageCustomized||t.setModel(r);break;case"URL":if(this.propertyPanel.updateItemVisibility("NumberCard","Background","BackgroundImagePattern",!1),this.propertyPanel.updateItemVisibility("NumberCard","Background","BackgroundImageBrowse",!1),this.propertyPanel.updateItemVisibility("NumberCard","Background","BackgroundImageURL",!0),r={background:{type:"url",image:""}},BoldBIDashboard.isNullOrUndefined(this.numberCardContent))t=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.background.isImageCustomized||t.setModel(r);else for(i=0;i<this.numberCardContent.children().length;i++)t=this.bbdesigner$(this.numberCardContent.children()[i]).data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.background.isImageCustomized||t.setModel(r);break;case"Parameterized URL":this.propertyPanel.updateItemVisibility("NumberCard","Background","BackgroundImageBrowse",!1);this.propertyPanel.updateItemVisibility("NumberCard","Background","BackgroundImageURL",!1);this.propertyPanel.updateItemVisibility("NumberCard","Background","BackgroundImagePattern",!0);this.updateBackgroundImageParameterizedURL()}},t.prototype.updateBackgroundImageParameterizedURL=function(){var t,u=this.getBindedColumnIndex(this.DataGroupInfo),f=this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[u.backgroundImageIndex].FieldInfos.length>0?this.DataGroupInfo.FieldContainers[u.backgroundImageIndex].FieldInfos:[],i,r,n;if(BoldBIDashboard.isNullOrUndefined(this.dataValues)||BoldBIDashboard.isNullOrUndefined(this.dataValues.backgroundImageData)||BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo))n=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(n)||n.model.background.isImageCustomized||(t={background:{type:"url",image:this.getNumberCardProperties().BackgroundSettings.Image.URLPattern}},n.setModel(t));else if(i="",this.numberCardContent!=null&&this.DataGroupInfo.FieldContainers[u.seriesIndex].FieldInfos.length>0)for(r=0;r<this.numberCardContent.children().length;r++)n=this.bbdesigner$(this.numberCardContent.children()[r]).data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(n)||n.model.background.isImageCustomized||(i=this.getImageForSeriesCard(this.getNumberCardProperties().BackgroundSettings.Image.URLPattern,this.dataValues.backgroundImageData,n.model.title.text,f),t={background:{type:"url",image:i}},n.setModel(t));else n=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(n)||n.model.background.isImageCustomized||(i=this.getImageForSingleCard(this.getNumberCardProperties().BackgroundSettings.Image.URLPattern,this.dataValues.backgroundImageData,f),t={background:{type:"url",image:i}},n.setModel(t))},t.prototype.updateBackgroundImageURL=function(n){var r,i,t;if(this.getNumberCardProperties().BackgroundSettings.Image.ImageUrl=n,r={background:{image:n}},BoldBIDashboard.isNullOrUndefined(this.numberCardContent))t=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.background.isImageCustomized||t.setModel(r);else for(i=0;i<this.numberCardContent.children().length;i++)t=this.bbdesigner$(this.numberCardContent.children()[i]).data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(t)||t.model.background.isImageCustomized||t.setModel(r)},t.prototype.updateBackgroundImageMode=function(n){var t,i;this.getNumberCardProperties().BackgroundSettings.Image.ImageMode=n;t={background:{mode:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateBackgroundImageVisibility=function(n){var t,i;this.getNumberCardProperties().BackgroundSettings.Image.Visibility=n;t={background:{showImage:n}};BoldBIDashboard.isNullOrUndefined(this.numberCardContent)?(i=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(t)):this.updateSeriesCardProperty(t)},t.prototype.updateSeriesCardProperty=function(n){for(var i,t=0;t<this.numberCardContent.children().length;t++)i=this.bbdesigner$(this.numberCardContent.children()[t]).data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.setModel(n)},t.prototype.renderImageBrowseBox=function(n,t,i){BoldBIDashboard.isNullOrUndefined(n)?(this.propertyPanel.updateItemVisibility("NumberCard","Image","ImageBrowse",i.isVisible),this.resetImageConfiguration()):(this.sampleContainer=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%",display:BoldBIDashboard.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designerId+"_"+t+"_"+i.name+"_container"}),this.sampleContainer.addClass("bbi-dbrd-designer-hoverable"),this.sampleContainer.attr("data-tooltip","<span>"+this.locale.propertyPanel.containerApperance.backgroundImage.recommendedFiles+": <b> "+this.locale.propertyPanel.containerApperance.backgroundImage.files+" <\/b> <\/span> <br> <span> "+this.locale.propertyPanel.containerApperance.backgroundImage.recommendedSizes+": <b> "+this.locale.propertyPanel.containerApperance.backgroundImage.size+" <\/b> <\/span>"),this.localFieldTable=BoldBIDashboard.buildTag("table.bbi-designer-dsconfig-table","",{width:"100%",height:"50px"},{unselectable:"on",id:this.designerId+"_image_local_table"}),this.renderImageBrowseTable(),this.renderImageUploadBox(),this.sampleContainer.append(this.localFieldTable),n.append(this.sampleContainer))},t.prototype.renderImageBrowseTable=function(){var t=BoldBIDashboard.buildTag("tr","",{}),s=BoldBIDashboard.buildTag("td","",{}),n=BoldBIDashboard.buildTag("table","",{unselectable:"on"}),i=BoldBIDashboard.buildTag("tr","",{},{}),r=BoldBIDashboard.buildTag("tr","",{},{}),p=BoldBIDashboard.buildTag("td","",{}),u,f;this.progressTxt=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label","",{float:"left"},{id:this.designerId+"_image_progress_tr"});u=BoldBIDashboard.buildTag("td","",{},{id:this.designerId+"_image_path_error_icon_td"});f=BoldBIDashboard.buildTag("td","",{},{colspan:"2"});this.designerInstance.modules.util.renderErrIndictor(u,this.designerId);var e=BoldBIDashboard.buildTag("tr","",{height:"22.5px"},{id:this.designerId+"_image_path_td"}),h=BoldBIDashboard.buildTag("tr.e-progresserrmsg","",{height:"22.5px",display:"none"},{id:this.designerId+"_image_progresserr_tr"}),c=BoldBIDashboard.buildTag("td","",{}),w=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label","",{"font-size":"12px","font-weight":"normal"},{id:this.designerId+"_image_progresserr_tr"}),l=BoldBIDashboard.buildTag("td","",{},{colspan:"2"}),a=BoldBIDashboard.buildTag("td","",{},{}),v=BoldBIDashboard.buildTag("td","",{float:"right",width:"172px"},{});this.filePath=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-content-label","",{height:"25px","border-right":"0px","padding-bottom":"0.5px","padding-top":"0.5px",width:"213px","margin-left":"4px"},{id:this.designerId+"numberCard_image_path",type:"text",readonly:"readonly"});BoldBIDashboard.isNullOrUndefined(this.getNumberCardProperties().ImageSettings.ImageName)||this.filePath.val(this.getNumberCardProperties().ImageSettings.ImageName);var o=BoldBIDashboard.buildTag("div.bbi-dbrd-btn-secondary bbi-dbrd-btn-small e-dbrd-browse-image-button","",{display:"inline-block","margin-left":"-41px","min-width":"0px"},{id:this.designerId+"_file_datasource_browse"}),b=BoldBIDashboard.buildTag("span.bbi-designer-horizontal-browse bbi-designer-browse-icon","",{"font-size":"16px","line-height":"28px"}),y=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-top":"13px"});y.text("Browse Image");v.append(y);this.localFieldTable.append(t);t.append(v);s.append(n);t.append(s);n.append(i);i.append(p);i.append(u);n.append(e,r.clone(),r);l.append(this.filePath);e.append(l);e.append(a);a.append(o);f.append(this.progressTxt);r.append(f);c.append(w);h.append(c);o.on("click",this.bbdesigner$.proxy(this.onImageBrowseClick,this));o.append(b);n.append(h)},t.prototype.renderImageUploadBox=function(){var n=this,t=BoldBIDashboard.buildTag("div","",{height:"0px"},{id:this.designerId+"numberCard_image_upload"});this.designerInstance.element.append(t);this.ejUploadBox=t.BoldBIDashboardUploadbox({width:"0px",height:"0px",uploadName:"image",extensionsAllow:".jpg,.png,.gif,.jpeg,.bmp,.emf,.jfif,.jpe,.rle,.tif,.tiff,.wmf,.dib,.ico",autoUpload:!0,showFileDetails:!1,dialogAction:{content:this.designerInstance.element},fileSize:52428800,saveUrl:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.uploadimage,fileSelect:this.bbdesigner$.proxy(this.onImagefileSelect,this),error:this.bbdesigner$.proxy(this.onImageuploadError,this),success:this.bbdesigner$.proxy(this.onImageuploadSuccess,this),inProgress:this.bbdesigner$.proxy(this.imagefileProgress,this),beforeSend:this.bbdesigner$.proxy(function(t){n.designerInstance.beforeSendRequestForUploadbox(n.designerInstance,"UploadAction",t)},this)}).data("BoldBIDashboardUploadbox");this.designerInstance.element.find(this.designerId+"_img_upload_SelectButton").hide()},t.prototype.resetImageConfiguration=function(){var n=this.widgetHelper.getCurrentWidgetInstance();this.designerInstance.element.find("#"+this.designerId+"numberCard_image_path").val(n.getNumberCardProperties().ImageSettings.ImageName);this.designerInstance.element.find("#"+this.designerId+"_image_progress_tr").css("display","none")},t.prototype.onImageBrowseClick=function(){this.designerInstance.element.find("#"+this.designerId+"numberCard_image_upload .e-uploadinput").click()},t.prototype.onImagefileSelect=function(n){this.resetImageConfiguration();n.files.length!==0&&(n.files[0].size>n.model.fileSize?(n.cancel=!0,this.progressTxt.text("")):(this.designerInstance.element.find("#"+this.designerId+"_image_progress_tr").css("display","inline-block"),this.progressTxt.text("Initiating upload..."),this.fileName=this.fileExt=null,this.filePath.val(n.files[0].name)));BoldBIDashboard.browserInfo().name!=="msie"&&this.ejUploadBox._uploadFileListDelete()},t.prototype.onImageuploadError=function(){this.progressTxt.text("Upload failed.")},t.prototype.onImageuploadSuccess=function(n){var i=this.widgetHelper.getCurrentWidgetInstance(),t,f,e,u,r;if(this.progressTxt.css("display","none"),t=JSON.parse(n.responseText),t&&t.Status){if(i.getNumberCardProperties().ImageSettings.FilePath=t.Data.fileId+t.Data.ext,i.getNumberCardProperties().ImageSettings.ImageName=t.Data.fileName,f="data:image/"+t.Data.ext+";base64,"+t.Data.source,e={image:{data:f}},BoldBIDashboard.Dashboard.Resource.addImage(i.getNumberCardProperties().ImageSettings.FilePath,f),BoldBIDashboard.isNullOrUndefined(i.numberCardContent))r=i.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(r)||r.model.image.isImageCustomized||r.setModel(e);else{for(u=0;u<i.numberCardContent.children().length;u++)r=this.bbdesigner$(i.numberCardContent.children()[u]).data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(r)||r.model.image.isImageCustomized||r.setModel(e);i.resizeCard()}this.designerInstance.modules.serialization.notifyChange()}else this.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.upload,this.locale.errorMessage.failedToUploadFile,IconType.errors,AlertType.Alert,!1,t?t.Message:null)},t.prototype.imagefileProgress=function(n){this.progressTxt.text("Uploading..."+n.percentage+"%")},t.prototype.renderBackgroundImageBrowseBox=function(n,t,i){BoldBIDashboard.isNullOrUndefined(n)?(this.propertyPanel.updateItemVisibility("NumberCard","Background","BackgroundImageBrowse",i.isVisible),this.resetBackgroundImageConfiguration()):(this.backgroundImageSampleContainer=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%",display:BoldBIDashboard.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designerId+"_"+t+"_"+i.name+"_container"}),this.backgroundImageSampleContainer.addClass("bbi-dbrd-designer-hoverable"),this.backgroundImageSampleContainer.attr("data-tooltip","<span>     files: <b> png, jpeg, jpg <\/b> <\/span> <br> <span> Recommended size: <b> Maximum 5 MB <\/b> <\/span>"),this.backgroundImageLocalFieldTable=BoldBIDashboard.buildTag("table.bbi-designer-dsconfig-table","",{width:"100%",height:"50px"},{unselectable:"on",id:this.designerId+"_image_local_table"}),this.renderBackgroundImageBrowseTable(),this.renderBackgroundImageUploadBox(),this.backgroundImageSampleContainer.append(this.backgroundImageLocalFieldTable),n.append(this.backgroundImageSampleContainer))},t.prototype.renderBackgroundImageBrowseTable=function(){var t=BoldBIDashboard.buildTag("tr","",{}),s=BoldBIDashboard.buildTag("td","",{}),n=BoldBIDashboard.buildTag("table","",{unselectable:"on"}),i=BoldBIDashboard.buildTag("tr","",{},{}),r=BoldBIDashboard.buildTag("tr","",{},{}),p=BoldBIDashboard.buildTag("td","",{}),u,f;this.backgroundImageProgressTxt=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label","",{float:"left"},{id:this.designerId+"_backgroundimage_progress_tr"});u=BoldBIDashboard.buildTag("td","",{},{id:this.designerId+"_image_path_error_icon_td"});f=BoldBIDashboard.buildTag("td","",{},{colspan:"2"});this.designerInstance.modules.util.renderErrIndictor(u,this.designerId);var e=BoldBIDashboard.buildTag("tr","",{height:"22.5px"},{id:this.designerId+"_image_path_td"}),h=BoldBIDashboard.buildTag("tr.e-progresserrmsg","",{height:"22.5px",display:"none"},{id:this.designerId+"_image_progresserr_tr"}),c=BoldBIDashboard.buildTag("td","",{}),w=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label","",{"font-size":"12px","font-weight":"normal"},{id:this.designerId+"_image_progresserr_tr"}),l=BoldBIDashboard.buildTag("td","",{},{colspan:"2"}),a=BoldBIDashboard.buildTag("td","",{},{}),v=BoldBIDashboard.buildTag("td","",{float:"right",width:"172px"},{});this.backgroundImageFilePath=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-content-label","",{height:"25px","border-right":"0px","padding-bottom":"0.5px","padding-top":"0.5px",width:"213px","margin-left":"4px"},{id:this.designerId+"_backgroundimage_path",type:"text",readonly:"readonly"});BoldBIDashboard.isNullOrUndefined(this.getNumberCardProperties().BackgroundSettings.Image.ImageName)||this.backgroundImageFilePath.val(this.getNumberCardProperties().BackgroundSettings.Image.ImageName);var o=BoldBIDashboard.buildTag("div.bbi-dbrd-btn-secondary bbi-dbrd-btn-small e-dbrd-browse-image-button","",{display:"inline-block","margin-left":"-41px","min-width":"0px"},{id:this.designerId+"_file_datasource_browse"}),b=BoldBIDashboard.buildTag("span.bbi-designer-horizontal-browse bbi-designer-browse-icon","",{"font-size":"16px","line-height":"28px"}),y=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-top":"13px"});y.text("Browse Image");v.append(y);this.backgroundImageLocalFieldTable.append(t);t.append(v);s.append(n);t.append(s);n.append(i);i.append(p);i.append(u);n.append(e,r.clone(),r);l.append(this.backgroundImageFilePath);e.append(l);e.append(a);a.append(o);f.append(this.backgroundImageProgressTxt);r.append(f);c.append(w);h.append(c);o.on("click",this.bbdesigner$.proxy(this.onBackgroundImageBrowseClick,this));o.append(b);n.append(h)},t.prototype.renderBackgroundImageUploadBox=function(){var n=this,t=BoldBIDashboard.buildTag("div","",{height:"0px"},{id:this.designerId+"numberCard_backgroundimage_upload"});this.designerInstance.element.append(t);this.backgroundImageEjUploadBox=t.BoldBIDashboardUploadbox({width:"0px",height:"0px",uploadName:"image",extensionsAllow:".jpg,.png,.gif,.jpeg,.bmp,.emf,.jfif,.jpe,.rle,.tif,.tiff,.wmf,.dib,.ico",autoUpload:!0,showFileDetails:!1,dialogAction:{content:this.designerInstance.element},fileSize:52428800,saveUrl:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.uploadimage,fileSelect:this.bbdesigner$.proxy(this.onBackgroundImagefileSelect,this),error:this.bbdesigner$.proxy(this.onBackgroundImageuploadError,this),success:this.bbdesigner$.proxy(this.onBackgroundImageuploadSuccess,this),inProgress:this.bbdesigner$.proxy(this.backgroundimagefileProgress,this),beforeSend:this.bbdesigner$.proxy(function(t){n.designerInstance.beforeSendRequestForUploadbox(n.designerInstance,"UploadAction",t)},this)}).data("BoldBIDashboardUploadbox");this.designerInstance.element.find(this.designerId+"_img_upload_SelectButton").hide()},t.prototype.resetBackgroundImageConfiguration=function(){var n=this.widgetHelper.getCurrentWidgetInstance();this.designerInstance.element.find("#"+this.designerId+"_backgroundimage_path").val(n.getNumberCardProperties().BackgroundSettings.Image.ImageName);this.designerInstance.element.find("#"+this.designerId+"_backgroundimage_progress_tr").css("display","none")},t.prototype.onBackgroundImageBrowseClick=function(){this.designerInstance.element.find("#"+this.designerId+"numberCard_backgroundimage_upload .e-uploadinput").click()},t.prototype.onBackgroundImagefileSelect=function(n){this.resetBackgroundImageConfiguration();n.files.length!==0&&(n.files[0].size>n.model.fileSize?(n.cancel=!0,this.backgroundImageProgressTxt.text("")):(this.designerInstance.element.find("#"+this.designerId+"_backgroundimage_progress_tr").css("display","inline-block"),this.backgroundImageProgressTxt.text("Initiating upload..."),this.backgroundImageFileName=this.backgroundImageFileExt=null,this.backgroundImageFilePath.val(n.files[0].name)));BoldBIDashboard.browserInfo().name!=="msie"&&this.backgroundImageEjUploadBox._uploadFileListDelete()},t.prototype.onBackgroundImageuploadError=function(){this.backgroundImageProgressTxt.text("Upload failed.")},t.prototype.onBackgroundImageuploadSuccess=function(n){var r=this.widgetHelper.getCurrentWidgetInstance(),t,f,e,u,i;if(this.backgroundImageProgressTxt.css("display","none"),t=JSON.parse(n.responseText),t&&t.Status){if(r.getNumberCardProperties().BackgroundSettings.Image.FilePath=t.Data.fileId+t.Data.ext,r.getNumberCardProperties().BackgroundSettings.Image.ImageName=t.Data.fileName,f="data:image/"+t.Data.ext+";base64,"+t.Data.source,e={background:{image:f}},BoldBIDashboard.Dashboard.Resource.addImage(r.getNumberCardProperties().BackgroundSettings.Image.FilePath,f),BoldBIDashboard.isNullOrUndefined(r.numberCardContent))i=r.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.background.isImageCustomized||i.setModel(e);else for(u=0;u<r.numberCardContent.children().length;u++)i=this.bbdesigner$(r.numberCardContent.children()[u]).data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(i)||i.model.background.isImageCustomized||i.setModel(e);this.designerInstance.modules.serialization.notifyChange()}else this.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.upload,this.locale.errorMessage.failedToUploadFile,IconType.errors,AlertType.Alert,!1,t?t.Message:null)},t.prototype.backgroundimagefileProgress=function(n){this.backgroundImageProgressTxt.text("Uploading..."+n.percentage+"%")},t.prototype.getNumberCardProperties=function(){return this.widgetJson},t.prototype.numberCardDispose=function(){var n=null,t;if(BoldBIDashboard.isNullOrUndefined(this.numberCardContent))n=this.numberCardElement.data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(n)||n.destroy();else for(t=0;t<this.numberCardContent.children().length;t++)n=this.bbdesigner$(this.numberCardContent.children()[t]).data("BoldBIDashboardNumberCard"),BoldBIDashboard.isNullOrUndefined(n)||n.destroy();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.NumberCard)},t.prototype.getColorFields=function(){return[{Name:WidgetProperty.Font,DisplayName:""},{Name:WidgetProperty.TitleColor,DisplayName:"Title",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.BackgroundColor,DisplayName:"Background",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.FillColor,DisplayName:"Sparkline",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.PrimaryValueColor,DisplayName:"Measure",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.Image,DisplayName:"Image"},{Name:WidgetProperty.BackgroundImage,DisplayName:"Background Image"}]},t.prototype.renderDefaultColorSettings=function(n,t,i){var r=this.widgetHelper.getCurrentWidgetInstance(),o,s,e,h,v;if(!BoldBIDashboard.isNullOrUndefined(r))if(o=r.isNecessaryDataConfigured(),this.categoryId=this.designerId+"_"+t+"_"+i.categoryName,this.defaultPaletteContainer=this.designerInstance.element.find("#"+this.categoryId),this.defaultPaletteContainer.length!==0||BoldBIDashboard.isNullOrUndefined(n)){if(!BoldBIDashboard.isNullOrUndefined(this.defaultPaletteContainer)&&this.defaultPaletteContainer.length>0){var y=this.defaultPaletteContainer.find("#"+this.categoryId+"_palatte_body"),a=this.defaultPaletteContainer.find("#"+this.categoryId+"_palatte_button"),e=this.defaultPaletteContainer.find("#"+this.categoryId+"_color_settings_button"),u=this.defaultPaletteContainer.find("#"+this.categoryId+"_advance_color_palatte_body_element");y.empty();h=r.defaultPaletteContainer.find("#"+this.categoryId+"_advance_color_palatte_check_element");BoldBIDashboard.isNullOrUndefined(h)||(v=h.data("BoldBIDashboardCheckBox"),v.option("checked",r.getNumberCardProperties().EnableColorSettings));o?(u.css("display","block"),this.updateAdvanceButtonVisibility(a,e,r.getNumberCardProperties().EnableColorSettings)):(u.css("display","none"),a.css("display","none"))}}else{this.defaultPaletteContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-designer-scroll-style-3","",{width:"460px"},{id:this.categoryId});var u=BoldBIDashboard.buildTag("div","",{},{id:this.categoryId+"_advance_color_palatte_body_element"}),f=BoldBIDashboard.buildTag("div","",{},{id:this.categoryId+"_palatte_button"}),c=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily e-dbrd-property-advance-color","",{},{id:this.categoryId+"_advance_color_palatte_text_element"}),l=BoldBIDashboard.buildTag("div","",{},{id:this.categoryId+"_advance_color_palatte_check_element"});u.append(c,l);this.defaultPaletteContainer.append(u,f);c.text(this.locale.propertyPanel.formatting.colorSettings.advancedSettingText);l.BoldBIDashboardCheckBox({checked:this.getNumberCardProperties().EnableColorSettings,change:this.bbdesigner$.proxy(this.showAdvanceColorPalette,r),width:(this.propertyPanel.propertyPanelContainer.width()-33)*57/100-15+"px",cssClass:"e-designer-prop-checkbox"});n.append(this.defaultPaletteContainer);s=BoldBIDashboard.buildTag("div.e-advance-option-wrap","",{"margin-left":"205px"},{});e=BoldBIDashboard.buildTag("button.e-numbercard-widget-color-settings-button e-advanced-color-settings-button e-advanced-color-settings-button-alignment bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.propertyPanel.customizeBtnText,{},{id:this.categoryId+"_color_settings_button",type:"button"});s.append(e);f.append(s);o?(u.css("display","block"),this.updateAdvanceButtonVisibility(f,e,this.getNumberCardProperties().EnableColorSettings)):(u.css("display","none"),f.css("display","none"))}},t.prototype.updateAdvanceButtonVisibility=function(n,t,i){n.css("display","block");i?t.removeAttr("disabled"):t.attr("disabled","disabled")},t.prototype.showAdvanceColorPalette=function(n){var t=this.widgetHelper.getCurrentWidgetInstance(),i;n.isInteraction&&!0&&(i=t.defaultPaletteContainer.find("#"+t.categoryId+"_color_settings_button"),n.isChecked?(i.removeAttr("disabled"),t.openAdvancedColorSettings(null)):(i.attr("disabled","disabled"),t.getNumberCardProperties().ColorCustomization=null,this.dataConfigurationInstance.postDraggedFields()),t.getNumberCardProperties().EnableColorSettings=n.isChecked,this.designerInstance.modules.serialization.notifyChange())},t.prototype.openAdvancedColorSettings=function(){var n=this.widgetHelper.getCurrentWidgetInstance(),u=n.getBindedColumnIndex(n.DataGroupInfo),t=new ColorCustomization,f=new BoldBIDashboard.DashboardDesignerUtility.AdvancedColorCustomization(this.designerInstance),i,r;BoldBIDashboard.isNullOrUndefined(n.getNumberCardProperties().ColorCustomization)?t.Type=ColorCustomizationType.Rule:t=this.bbdesigner$.extend(!0,{},n.getNumberCardProperties().ColorCustomization);i=null;i=n.DataGroupInfo.FieldContainers[u.measureIndex].FieldInfos[0];t=this.getSolidColorInfo(t,n);r={colorCustomizationObj:t,DataGroupInfo:n.DataGroupInfo,colorFields:n.colorFields,colorTypeCollection:["Rule"],defaultBasedOnField:i,isNumberCard:!0,controlType:"NumberCard",ignoreCustomIcon:!0};f.populateUI(r,n,"updateAdvancedColorSettings")},t.prototype.getSolidColorInfo=function(n,t){var i=this.getDataGroupID(),f=BoldBIDashboard.isNullOrUndefined(n.SolidColorInfo)?[]:JSON.parse(JSON.stringify(n.SolidColorInfo)),u,r;for(n.SolidColorInfo=[],u=function(r){BoldBIDashboard.isNullOrUndefined(n.SolidColorInfo[r])&&(n.SolidColorInfo.push(new SolidColorSet),n.SolidColorInfo[r].BasedOn.FieldId=i[r].DataId,n.SolidColorInfo[r].BasedOn.SummaryType=SummaryType.NONE,n.SolidColorInfo[r].BasedOn.UniqueColumnName=i[r].UniqueColumnName,t.getDefaultColorSets(n.SolidColorInfo[r].DefaultColorSets));var u=f.filter(function(n){return n.BasedOn.UniqueColumnName===i[r].UniqueColumnName});u.length>0&&(n.SolidColorInfo.splice(r,1),n.SolidColorInfo.push(u[0]))},r=0;r<i.length;r++)u(r);return n},t.prototype.getDataGroupID=function(){var n=this.widgetHelper.getCurrentWidgetInstance(),t;n=BoldBIDashboard.isNullOrUndefined(n)?this:n;var r=this.getBindedColumnIndex(n.DataGroupInfo),i=n.DataGroupInfo.FieldContainers[r.measureIndex].length!==0?n.DataGroupInfo.FieldContainers[r.measureIndex].FieldInfos:[],u=[];for(t=0;t<i.length;t++)u.push({DataId:i[t].Id,UniqueColumnName:i[t].UniqueColumnName,Field:i[t].Name});return u},t.prototype.getDefaultColorSets=function(n){for(var t=0;t<this.defaultColorPalette.length;t++)n.push({Name:"color_"+(t+1),IsEdited:!1,Color:this.defaultColorPalette[t%this.defaultColorPalette.length]})},t.prototype.updateAdvancedColorSettings=function(n,t){var i=this.widgetHelper.getCurrentWidgetInstance(),u,r,f;t?BoldBIDashboard.isNullOrUndefined(i.getNumberCardProperties().ColorCustomization)&&(u=i.defaultPaletteContainer.find("#"+i.categoryId+"_color_settings_button"),r=i.defaultPaletteContainer.find("#"+i.categoryId+"_advance_color_palatte_check_element"),BoldBIDashboard.isNullOrUndefined(r)||(f=r.data("BoldBIDashboardCheckBox"),f.option("checked",!t)),u.attr("disabled","disabled"),i.getNumberCardProperties().EnableColorSettings=!t):(i.getNumberCardProperties().ColorCustomization=n,this.dataConfigurationInstance.postDraggedFields())},t.prototype.updateColorCustomization=function(){var n=this.getNumberCardProperties(),t=this.getBindedColumnIndex(this.DataGroupInfo);if(!BoldBIDashboard.isNullOrUndefined(n.ColorCustomization)){if(n.ColorCustomization=!this.isNecessaryDataConfigured()||n.ColorCustomization.RuleRangeSettings.BasedOn.SummaryType===SummaryType.NONE&&this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[t.seriesIndex].FieldInfos.length===0?null:n.ColorCustomization,this.DataGroupInfo.FieldContainers[t.seriesIndex].FieldInfos.length>0){var i=this.DataGroupInfo.FieldContainers[t.seriesIndex].FieldInfos[0].Id,r=this.DataGroupInfo.FieldContainers[t.sparklineIndex].FieldInfos.length>0?this.DataGroupInfo.FieldContainers[t.sparklineIndex].FieldInfos[0].Id:"",u=this.DataGroupInfo.FieldContainers[t.imageIndex].FieldInfos.length>0?this.DataGroupInfo.FieldContainers[t.imageIndex].FieldInfos[0].Id:"",f=this.DataGroupInfo.FieldContainers[t.backgroundImageIndex].FieldInfos.length>0?this.DataGroupInfo.FieldContainers[t.backgroundImageIndex].FieldInfos[0].Id:"";n.ColorCustomization=(i===r||i===u||i===f)&&i===n.ColorCustomization.RuleRangeSettings.BasedOn.FieldId&&n.ColorCustomization.RuleRangeSettings.BasedOn.SummaryType!==SummaryType.NONE?null:n.ColorCustomization}BoldBIDashboard.isNullOrUndefined(n.ColorCustomization)&&(this.getNumberCardProperties().EnableColorSettings=!1);BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.setMergeAction(!1)}},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.NumberCardItem",InternalNumberCardItem,window);BoldBIDashboard.DashboardDesignerUtility.NumberCardItem.prototype.initialize();__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalCustomWidgetReportItem=function(n){function t(t){var i=n.call(this,t,"CustomWidget","e-customwidget-item")||this;return i.isFromDraft=!1,i.customWidgetsCollection=[],i.customWidgetObj=null,i.isDependenciesLoaded=!1,i.dataValues=null,i.customWidgetItems=[],i.defaultProperties=[],i.designer=t,i.bbdesigner$=i.designer.bbdesigner$,i.designerId=i.designerInstance._id,i.customWidgetItems=i.designerInstance.modules.widgetHelper.customWidgetItems,i.customWidgetsCollection=i.designerInstance.modules.widgetHelper.customWidgetsCollection,i.widgetJson=new CustomWidgetProperties(t),i.propertyPanel=t.modules.propertyPanel,i}return __extends(t,n),t.prototype.loadCustomWidgets=function(n){var r=this,t=this.designerInstance.getLocalizationContent(),i=this.designerInstance.model.widgetGuids,u=this.designerInstance.model.serviceAuthorizationToken;this.bbdesigner$.each(n,function(n,f){var e={},s=!1,h,c,o,l;if(e=e[f.guid]=f,h="",c=e.dataFields.length,c>0)for(o=0;o<c;o++)e.dataFields[o].optional||(h+=e.dataFields[o].max===1?t.itemPanel.widgetDataRequirements.customWidgetOne+" "+e.dataFields[o].displayName+" "+t.itemPanel.widgetDataRequirements.customWidgetAnd:t.itemPanel.widgetDataRequirements.customWidgetOneOrMore+" "+e.dataFields[o].displayName+" "+t.itemPanel.widgetDataRequirements.customWidgetAnd);u===""||BoldBIDashboard.isNullOrUndefined(i)||r.designerInstance.model.environment===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(BoldBIDashboard.Environment,BoldBIDashboard.Environment.cloud)?s=!0:i.length===0&&(s=!0);!BoldBIDashboard.isNullOrUndefined(i)&&u!==""&&i.length>0&&(s=i.includes(f.guid));l=t.itemPanel.groupItems[f.category.toLocaleLowerCase()]!==undefined?t.itemPanel.groupItems[f.category.toLocaleLowerCase()]:f.category;r.customWidgetsCollection.push({GroupName:l,GroupId:"c55f5601-8e79-4a16-94d6-ddd4cc051406",Items:[{id:f.guid,widgetName:f.widgetName,widgetDisplayName:f.displayName,cssClass:"",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.CustomWidgetItem",searchCategory:[],widgetconfiginfo:null,useIconTemplate:!0,hide:!s,iconTemplate:'<img src ="data:image/'+f.extension+";base64,"+f.icon+'" style ="max-height: 40px; max-width: 40px;">',tooltip:{title:f.displayName,description:f.description,dataRequirement:h.slice(0,h.length-4)+"."},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.CustomWidgetProperties"}]});r.customWidgetItems.push(e)});this.designerInstance.modules.widgetHelper.customWidgetsCollection=this.customWidgetsCollection;this.designerInstance.modules.widgetHelper.customWidgetItems=this.customWidgetItems;this.designerInstance.isViewMode()?BoldBIDashboardDesigner.widgetItems=BoldBIDashboardDesigner.widgetItems.concat(this.customWidgetsCollection):this.designerInstance.itemPanel.appendCustomWidget(this.customWidgetsCollection)},t.prototype.getCustomWidgetsJson=function(n){var t,i,r;if(this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.view||BoldBIDashboard.isNullOrUndefined(this.designerInstance.previewFeaturesJson))i=this.designerInstance.model.environment,r=n,this.designerInstance.modules.designerRequests.push(this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.getCustomWidgets,{action:BoldBIDashboard.DashboardUtil.DesignerAction.GetCustomWidgets,data:JSON.stringify({environment:i,CustomWidgets:r})},{fnction:this.bbdesigner$.proxy(this.saveCustomWidgetsJson,this)},!0,!0));else for(t=0;t<this.designerInstance.previewFeaturesJson.length;t++)if(this.designerInstance.previewFeaturesJson[t].FeatureName==="CustomWidgets"){this.loadCustomWidgets(JSON.parse(this.designerInstance.previewFeaturesJson[t].Value));break}},t.prototype.saveCustomWidgetsJson=function(n){n.Status&&this.loadCustomWidgets(JSON.parse(n.Data))},t.prototype.getCustomWidgets=function(){return this.customWidgetsCollection},t.prototype.isNecessaryDataConfigured=function(){return!0},t.prototype.init=function(n,t){n===""||BoldBIDashboard.isNullOrUndefined(JSON.parse(n).guid)||(this.getCustomWidgetProperties().GUID=JSON.parse(n).guid);this.widgetConfigurationJSON=this.getCurrentWidgetConfiguration();this.removeWidgetNotConfigured();BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(this.contentContainer);BoldBIDashboard.Dashboard.WidgetContainerHelper.hideWidgetContainerImage(this.contentContainer);this.createCustomWidgetContainer(t)},t.prototype.update=function(n){var f,r,i,t,u;if(this.IsRendered=!1,this.removeWidgetNotConfigured(),this.contentContainer.find(".bbi-dbrd-control-error").remove(),this.contentContainer.css({display:"block"}),this.customWidgetItem.show(),this.contentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").css("display","none"),n.Error)this.removeWidgetNotConfigured(),this.designPanelInstance.showControlError(this.contentContainer,n,this.CellInfo,n.OuterMessage);else if(n.noDataAvailable)this.customWidgetItem.hide(),this.contentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").css("display","block"),this.removeWidgetNotConfigured();else if(BoldBIDashboard.isNullOrUndefined(bbicustom.dashboard.registeredWidgets)||BoldBIDashboard.isNullOrUndefined(bbicustom.dashboard.registeredWidgets[this.widgetConfigurationJSON.guid])||BoldBIDashboard.isNullOrUndefined(bbicustom.dashboard.registeredWidgets[this.widgetConfigurationJSON.guid].proto.prototype.isDependenciesLoaded)||!bbicustom.dashboard.registeredWidgets[this.widgetConfigurationJSON.guid].proto.prototype.isDependenciesLoaded)this.dataValues=n;else if(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(this.contentContainer),BoldBIDashboard.Dashboard.WidgetContainerHelper.hideWidgetContainerImage(this.contentContainer),this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo),this.customWidgetItem.show(),this.customWidgetObj!=null){if(this.customWidgetObj.model.boundColumns=[],BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(n.widgetData)||(this.customWidgetObj.model.dataSource=JSON.parse(n.widgetData)),this.DataGroupInfo.FieldContainers.length>0)for(t=0;t<this.DataGroupInfo.FieldContainers.length;t++){for(f=this.DataGroupInfo.FieldContainers[t],r=[],i=0;i<f.FieldInfos.length;i++)r.push({columnName:this.DataGroupInfo.FieldContainers[t].FieldInfos[i].Name,uniqueColumnName:this.DataGroupInfo.FieldContainers[t].FieldInfos[i].UniqueColumnName});this.customWidgetObj.model.boundColumns[this.DataGroupInfo.FieldContainers[t].Name]=r}else for(t=0;t<this.widgetConfigurationJSON.dataFields.length;t++)this.customWidgetObj.model.boundColumns[this.widgetConfigurationJSON.dataFields[t].name]=[];this.customWidgetObj.update({type:"refresh",data:this.customWidgetObj.model.dataSource});u=this.widgetJson.SelectedFilterValues;this.widgetJson.FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(u)&&u.length>0?BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this):BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this);this.IsRendered=!0}},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);this.customWidgetObj!=null&&this.customWidgetObj.update({type:"resize",size:{height:this.contentContainer.parent().height()-this.contentContainer.parent().find(".bbi-dbrd-control-header").height(),width:this.contentContainer.parent().width()}})},t.prototype.getWidgetImage=function(){return""},t.prototype.startRenderingWidget=function(n){var e,u,i,t,f;if(this.customWidgetItem.show(),bbicustom.dashboard.createWidgetInstance(this.getCustomWidgetProperties().GUID,this.customWidgetElement[0],{dashboardId:"dashboard1",widgetId:n.name,baseURL:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.downloadCustomWidgetFile+"?path="+this.widgetConfigurationJSON.guid}),this.customWidgetObj=bbicustom.dashboard.getWidgetInstance(this.customWidgetElement[0]),this.customWidgetObj.model.boundColumns=[],this.customWidgetObj.model.dataSource=[],this.DataGroupInfo.FieldContainers.length>0)for(t=0;t<this.DataGroupInfo.FieldContainers.length;t++){for(e=this.DataGroupInfo.FieldContainers[t],u=[],i=0;i<e.FieldInfos.length;i++)u.push({columnName:this.DataGroupInfo.FieldContainers[t].FieldInfos[i].Name,uniqueColumnName:this.DataGroupInfo.FieldContainers[t].FieldInfos[i].UniqueColumnName});this.customWidgetObj.model.boundColumns[this.DataGroupInfo.FieldContainers[t].Name]=u}else for(t=0;t<this.widgetConfigurationJSON.dataFields.length;t++)this.customWidgetObj.model.boundColumns[this.widgetConfigurationJSON.dataFields[t].name]=[];this.setWidgetProperties(null);this.customWidgetObj.model.isIFrameEnable=!1;this.customWidgetObj.model.customThemeSettings=null;this.customWidgetObj.model.enableLinking=!1;this.customWidgetObj.model.linkSettings={enableTabularUrlLinking:!1,urlPatterns:null};this.customWidgetObj.model.isDataBound=!1;this.customWidgetObj.model.initMode="runtime";f=!BoldBIDashboard.isNullOrUndefined(this.designer.model.dashboardFromData)&&this.designer.model.dashboardFromData.loadFromData;try{f?(this.customWidgetObj.model.initMode="export",this.customWidgetObj.model.exportParameters=this.designer.model.dashboardFromData.isControl?this.designer.model.dashboardFromData.exportParameters:BoldBIDashboard.isNullOrUndefined(this.designer.model.dashboardFromData.exportParameters[this.Name])?null:JSON.parse(this.designer.model.dashboardFromData.exportParameters[this.Name])):this.customWidgetObj.model.exportParameters=null;this.customWidgetObj.init();this.IsRendered=!0;(BoldBIDashboard.isNullOrUndefined(this.dataValues)||BoldBIDashboard.isNullOrUndefined(this.dataValues.widgetData)||Object.keys(this.dataValues).length===0)&&(this.IsCustomWidgetRendered=!0)}catch(r){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:r,Type:r.name});this.IsCustomWidgetRendered=!0}if(BoldBIDashboard.isNullOrUndefined(this.dataValues)||BoldBIDashboard.isNullOrUndefined(this.dataValues.widgetData))f&&this.customWidgetElement.attr("CustomWidgetsRendered","true");else{this.IsRendered=!1;this.customWidgetObj.model.dataSource=BoldBIDashboard.isNullOrUndefined(this.dataValues)||BoldBIDashboard.isNullOrUndefined(this.dataValues.widgetData)||Object.keys(this.dataValues).length===0?null:JSON.parse(this.dataValues.widgetData);try{this.customWidgetObj.update({type:"refresh",data:this.customWidgetObj.model.dataSource})}catch(r){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:r,Type:r.name})}this.customWidgetElement.attr("CustomWidgetsRendered","true");this.IsRendered=!0;this.IsCustomWidgetRendered=!0}},t.prototype.supportedColumnsForFiltering=function(){var r=[],f=this.designerInstance.modules.filterConfiguration,i,n,t,u;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length>0)for(i=this.DataGroupInfo.FieldContainers,n=0;n<i.length;n++)for(t=0;t<i[n].FieldInfos.length;t++)u=i[n].FieldInfos,f.isDuplicate(r,u[t].DataField)||r.push(u[t]);return r},t.prototype.referCustomWidgetDependencies=function(){var e,n,u,o,t,f;for(this.widgetConfigurationJSON=this.getCurrentWidgetConfiguration(),e=!1,n=0;n<bbicustom.dashboard.onLoadingWidgets.length;n++)if(bbicustom.dashboard.onLoadingWidgets[n].GUID===this.widgetConfigurationJSON.guid){e=!0;break}if(e)if(this.isDependenciesLoaded=!0,BoldBIDashboard.isNullOrUndefined(bbicustom.dashboard.registeredWidgets[this.getCustomWidgetProperties().GUID])||BoldBIDashboard.isNullOrUndefined(bbicustom.dashboard.registeredWidgets[this.getCustomWidgetProperties().GUID].proto.prototype.isDependenciesLoaded))for(this.controlContainer.attr({"data-prevent-loading-indicator":!0}),n=0;n<bbicustom.dashboard.onLoadingWidgets.length;n++)bbicustom.dashboard.onLoadingWidgets[n].GUID===this.widgetConfigurationJSON.guid&&bbicustom.dashboard.onLoadingWidgets[n].dependentWidgets.push(this.bbdesigner$(this.controlContainer).attr("id"));else this.customWidgetItem.show(),this.startRenderingWidget(this,this.dataValues);else if(!BoldBIDashboard.isNullOrUndefined(this.widgetConfigurationJSON.dependencies)){var i=[],s=this.widgetConfigurationJSON.dependencies.scripts,r=this.designerInstance.model.environment===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(BoldBIDashboard.Environment,BoldBIDashboard.Environment.cloud)?this.widgetConfigurationJSON.widgetName:this.widgetConfigurationJSON.guid;for(t=0;t<s.length;t++)u=s[t],this.validURL(u)?i.push(u):!BoldBIDashboard.isNullOrUndefined(this.designer.model.dashboardFromData)&&this.designer.model.dashboardFromData.loadFromData&&this.designer.model.isScheduling?i.push(this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.downloadCustomWidgetFile+"?path="+r+"/"+u+"&url="+(BoldBIDashboard.isNullOrUndefined(this.designer.model.tenantId)?"&id=":"&id="+this.designer.model.tenantId)):i.push(this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.downloadCustomWidgetFile+"?path="+r+"/"+u+(BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.serverUrl)?"&url=":"&url="+this.designerInstance.model.serverUrl)+"&id=");if(!BoldBIDashboard.isNullOrUndefined(this.designer.model.dashboardFromData)&&this.designer.model.dashboardFromData.loadFromData&&this.designer.model.isScheduling?i.push(this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.downloadCustomWidgetFile+"?path="+r+"/"+this.widgetConfigurationJSON.srcFile+"&url="+(BoldBIDashboard.isNullOrUndefined(this.designer.model.tenantId)?"&id=":"&id="+this.designer.model.tenantId)):i.push(this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.downloadCustomWidgetFile+"?path="+r+"/"+this.widgetConfigurationJSON.srcFile+(BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.serverUrl)?"&url=":"&url="+this.designerInstance.model.serverUrl)+"&id="),e||bbicustom.dashboard.onLoadingWidgets.push({GUID:this.widgetConfigurationJSON.guid,dependentWidgets:[]}),this.getScripts(i,this.startRenderingWidget,this),!BoldBIDashboard.isNullOrUndefined(this.widgetConfigurationJSON.dependencies.styles))for(o=this.widgetConfigurationJSON.dependencies.styles,t=0;t<o.length;t++)f=o[t],this.validURL(f)?this.bbdesigner$("head").append('<link rel="stylesheet" href="'+f+'" type="text/css" />'):!BoldBIDashboard.isNullOrUndefined(this.designer.model.dashboardFromData)&&this.designer.model.dashboardFromData.loadFromData&&this.designer.model.isScheduling?this.bbdesigner$("head").append('<link rel="stylesheet" href="'+this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.downloadCustomWidgetFile+"?path="+r+"/"+f+(BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.serverUrl)?"&url=":"&url="+this.designerInstance.model.serverUrl)+'&id=" type="text/css" />'):this.bbdesigner$("head").append('<link rel="stylesheet" href="'+this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.downloadCustomWidgetFile+"?path="+r+"/"+f+(BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.serverUrl)?"&url=":"&url="+this.designerInstance.model.serverUrl)+(BoldBIDashboard.isNullOrUndefined(this.designer.model.tenantId)?"&id=":"&id="+this.designer.model.tenantId)+'" type="text/css" />')}},t.prototype.validURL=function(n){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(n)},t.prototype.removeWidgetNotConfigured=function(){this.contentContainer.find(".bbi-widget-not-configured-text ").closest(".bbi-dbrd-control-container").removeClass("bbi-show-widget-not-configured")},t.prototype.getScripts=function(n,t,i){var u=this,r,f;this.bbdesigner$.ajaxSetup({cache:!0});r=this;f=0;this.controlContainer.attr({"data-prevent-loading-indicator":!0});n.forEach(function(e){u.bbdesigner$.getScript(e,function(){var e,h,o,s;if(f+=1,f===n.length)try{for(bbicustom.dashboard.registeredWidgets[i.widgetConfigurationJSON.guid].proto.prototype.isDependenciesLoaded=!0,e=0;e<bbicustom.dashboard.onLoadingWidgets.length;e++)if(bbicustom.dashboard.onLoadingWidgets[e].GUID===u.widgetConfigurationJSON.guid){for(h=bbicustom.dashboard.onLoadingWidgets[e].dependentWidgets,o=0;o<h.length;o++)s=u.bbdesigner$("#"+h[o]).data("widgetInstance"),s.designerInstance.modules.util.hideLoadingIndicator(s.controlContainer),s.referCustomWidgetDependencies();bbicustom.dashboard.registeredWidgets[i.widgetConfigurationJSON.guid].proto.prototype.dependentWidgets=[];break}r.isDependenciesLoaded=!0;r.designerInstance.modules.util.hideLoadingIndicator(r.controlContainer);t.apply(r,[i,r.dataValues])}catch(c){r.IsCustomWidgetRendered=!0}})})},t.prototype.getCurrentWidgetConfiguration=function(){for(var n=0;n<this.customWidgetItems.length;n++)if(this.customWidgetItems[n].guid===this.getCustomWidgetProperties().GUID)return this.customWidgetItems[n]},t.prototype.getDefaultMeasureFormat=function(){var n=new MeasureFormatting;return n.Unit=NumberFormat.Ones,n},t.prototype.getFieldContainer=function(){var n=[],t=this.getCurrentWidgetConfiguration();return BoldBIDashboard.isNullOrUndefined(t)||this.bbdesigner$.each(t.dataFields,function(t,i){var r=new BoldBIDashboard.Dashboard.FieldContainerForUI;r.Name=i.name;r.DisplayName=i.displayName;r.ContainerType=i.valueType==="measure"?FieldContainerType.Numeric:i.valueType==="dimension"?FieldContainerType.Non_Numeric:FieldContainerType.None;r.CategoryCount=i.max;r.Required=!i.optional;n.push(r)}),n},t.prototype.onFieldSettingsClick=function(n,t){for(var r,i=0;i<t.length;i++)if(r=t[i].Name,r===SummaryType.NONE){t[i].IsVisible=!0;break}return t},t.prototype.getJson=function(){return this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t)},t.prototype.getPropertyPanelItems=function(){return this.getCustomWidgetPropertyPanel()},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateCustomWidgetProperties(n,t,i,r)},t.prototype.clearFilter=function(n){this.bbdesigner$(this.customWidgetElement[0]).hasClass("e-customwidget-element")&&(BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this),this.getCustomWidgetProperties().SelectedFilterValues=[],this.isCurrentMaster=!1,this.isClearFilter&&this.customWidgetObj.update({type:"clearFilter",data:this.customWidgetObj.model.dataSource}),this.designerInstance.modules.serialization.notifyChange(),BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this),this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName))},t.prototype.getMinMobileHeight=function(){for(var t=200,n=0;n<this.customWidgetItems.length;n++)if(this.customWidgetItems[n].guid===this.getCustomWidgetProperties().GUID&&this.customWidgetItems[n].mobileModeHeight!==null&&this.customWidgetItems[n].mobileModeHeight!==undefined&&this.customWidgetItems[n].mobileModeHeight>0){t=this.customWidgetItems[n].mobileModeHeight;break}return t+"px"},t.prototype.getMobileViewHeight=function(){for(var t=3*this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor,n=0;n<this.customWidgetItems.length;n++)if(this.customWidgetItems[n].guid===this.getCustomWidgetProperties().GUID&&this.customWidgetItems[n].mobileModeHeight!==null&&this.customWidgetItems[n].mobileModeHeight!==undefined&&this.customWidgetItems[n].mobileModeHeight>0){t=this.customWidgetItems[n].mobileModeHeight;break}return t},t.prototype.refresh=function(){},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.designer.getLocalizationContent().itemPanel.widgetDataRequiredMessage.heatMapDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.getWidgetInfo=function(t,i){for(var r,f=n.prototype.getWidgetInfo.call(this,t,i),u=0;u<this.customWidgetItems.length;u++)if(this.getCustomWidgetProperties().GUID===this.customWidgetItems[u].guid&&(r=this.customWidgetItems[u],!BoldBIDashboard.isNullOrUndefined(r.dataFiltration))){BoldBIDashboard.isNullOrUndefined(r.dataFiltration.top)?BoldBIDashboard.isNullOrUndefined(r.dataFiltration.bottom)||this.initializeVirtualScrollSettings(r.dataFiltration.bottom.count,1):this.initializeVirtualScrollSettings(r.dataFiltration.top.count,1);f.VirtualScrollSettings=this.VirtualScrollSettings;break}return f},t.prototype.createCustomWidgetContainer=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)),this.isFromDraft=!0);this.renderCustomWidgetElement();this.referCustomWidgetDependencies();!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.CustomWidget)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.renderCustomWidgetElement=function(){this.customWidgetItem=BoldBIDashboard.buildTag("div.e-customwidgetitem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder,overflow:"hidden"},{id:this.designerId+"customwidgetItem_"+this.widgetJson.UniqueName});this.customWidgetElement=BoldBIDashboard.buildTag("div.e-customwidget-element","",{width:"100%",height:"100%",position:"relative","background-color":"white","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designerId+"customwidgetElement_"+this.widgetJson.UniqueName});this.customWidgetItem.append(this.customWidgetElement);this.contentContainer.append(this.customWidgetItem);this.controlContainer.data("widgetInstance",this)},t.prototype.getCustomWidgetPropertyPanel=function(){var n={Header:this.widgetJson.ContainerSettings.Title,SubTitle:this.widgetJson.ContainerSettings.SubTitle,Description:this.widgetJson.ContainerSettings.Description,Type:this.Type,Items:[]};return this.setWidgetProperties(n),n.Items.push(this.containerPropertyItem.getFilterSettingsItems(this.getCustomWidgetProperties().FilterSettings,this.controlContainer,this.ControlHeader,this.DataGroupInfo)),n.Items.push(this.containerPropertyItem.getContainerSettingItems(this.getCustomWidgetProperties().ContainerSettings,this.controlContainer,this.ControlHeader,this.DataGroupInfo)),n.Items.push(this.containerPropertyItem.getContainerActionsItems(this.getCustomWidgetProperties().ContainerSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo)),n},t.prototype.setWidgetProperties=function(n){var a=[],r,u,f,o,t,i,h,c,e,l,s;if(this.customWidgetObj.model.properties=[],this.defaultProperties=[],r=this.getCustomWidgetProperties().CustomProperties,!BoldBIDashboard.isNullOrUndefined(this.widgetConfigurationJSON.functionalities)){for(u=0;u<this.widgetConfigurationJSON.functionalities.length;u++){for(f={CategoryName:this.widgetConfigurationJSON.functionalities[u].header,Items:[]},o=0;o<this.widgetConfigurationJSON.functionalities[u].properties.length;o++){if(t=this.widgetConfigurationJSON.functionalities[u].properties[o],i=new CustomProperty,i.PropertyName=t.name,h=!1,c=t.controlType==="checkbox"||t.controlType==="bool",!BoldBIDashboard.isNullOrUndefined(r))for(e=0;e<r.length;e++)if(r[e].PropertyName===t.name){h=!0;i.PropertyValue=c?JSON.parse(r[e].PropertyValue.toString()):r[e].PropertyValue;break}h||(i.PropertyValue=c?JSON.parse(t.defaultValue):t.defaultValue);this.defaultProperties.push(i);switch(this.widgetConfigurationJSON.functionalities[u].properties[o].controlType){case"bool":f.Items.push({name:t.name,displayName:t.displayName,isVisible:!0,value:i.PropertyValue,itemType:"bool"});break;case"text":f.Items.push({name:t.name,displayName:t.displayName,isVisible:!0,value:i.PropertyValue,itemType:"string"});break;case"enumeration":f.Items.push({name:t.name,displayName:t.displayName,isVisible:!0,value:i.PropertyValue,itemType:"dropdown",valueList:t.listItems});break;case"color":f.Items.push({name:t.name,displayName:t.displayName,isVisible:!0,value:i.PropertyValue,itemType:"color"});break;case"number":l=0;t.max===l&&t.min===l&&(t.min=-999999999999,t.max=999999999999);f.Items.push({name:t.name,displayName:t.displayName,isVisible:!0,value:i.PropertyValue,itemType:"float",minimum:t.min,maximum:t.max})}}a.push(f)}for(n!=null&&(n.Items=a),this.getCustomWidgetProperties().CustomProperties=this.defaultProperties,this.getCustomWidgetProperties().FilterSettings=this.updateFilterSettings(!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0),s=0;s<this.getCustomWidgetProperties().CustomProperties.length;s++)this.customWidgetObj.model.properties[this.getCustomWidgetProperties().CustomProperties[s].PropertyName]=this.getCustomWidgetProperties().CustomProperties[s].PropertyValue}},t.prototype.updateFilterSettings=function(n){var t=this.getCustomWidgetProperties().FilterSettings,i;return BoldBIDashboard.isNullOrUndefined(this.widgetConfigurationJSON.filterSettings)||(i=this.canUseWidgetAsMaster(),t.ActAsMasterWidget=i?n?t.ActAsMasterWidget:this.widgetConfigurationJSON.filterSettings.masterFilter.defaultValue:!1,t.IgnoreFilterActions=n?t.IgnoreFilterActions:this.widgetConfigurationJSON.filterSettings.ignoreMasterFilter.defaultValue),t},t.prototype.isIgnoreFilterActionVisible=function(){return!BoldBIDashboard.isNullOrUndefined(this.widgetConfigurationJSON)&&!BoldBIDashboard.isNullOrUndefined(this.widgetConfigurationJSON.filterSettings)&&this.widgetConfigurationJSON.filterSettings.ignoreMasterFilter.visible},t.prototype.canUseWidgetAsMaster=function(){return!BoldBIDashboard.isNullOrUndefined(this.widgetConfigurationJSON)&&!BoldBIDashboard.isNullOrUndefined(this.widgetConfigurationJSON.filterSettings)&&this.widgetConfigurationJSON.filterSettings.masterFilter.visible},t.prototype.onFieldDragDrop=function(){return!0},t.prototype.getDefaultSummaryType=function(n,t,i){var r;return t===FieldContainerType.Numeric?n===FieldType.Measures?r=i?SummaryType.CUSTOM:SummaryType.SUM:n===FieldType.Dimensions&&(r=SummaryType.COUNT):r=t===FieldContainerType.None&&n===FieldType.Measures?i?SummaryType.CUSTOM:SummaryType.NONE:SummaryType.NONE,r},t.prototype.updateCustomWidgetProperties=function(n,t,i,r){var s,h=!1,u,f,e,c,o;if(r.categoryName==="General")switch(n){case"Name":this.widgetJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,i)}else if(r.categoryName==="ContainerAppearance"||r.categoryName==="Filter")h=!0;else for(u=0;u<this.getCustomWidgetProperties().CustomProperties.length;u++)this.getCustomWidgetProperties().CustomProperties[u].PropertyName===n&&(this.getCustomWidgetProperties().CustomProperties[u].PropertyValue=i,this.customWidgetObj.model.properties[n]=i,this.customWidgetObj.update({type:"propertyChange",property:{name:n,value:i}}));if(BoldBIDashboard.isNullOrUndefined(s)||(t=s),!h){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(f=this.designPanelInstance.selectedReportItems,f.length>0))for(e=0;e<f.length;e++)c=f[e],c.attr("id")===this.controlContainer.attr("id")&&(o=this.bbdesigner$.extend(!0,{},r),o.categoryName=r.categoryName,o.valueList=r.valueList,this.propertyPanel.updatePropertyValue(o,"CustomWidget",i));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-customwidget-item",this.designerId+"_"+this.widgetJson.UniqueName,[n,i,t,r],[n,t,i,r])}},t.prototype.setPropertyElement=function(n,t,i,r){var u,f;this.propertyPanel.canUpdate=!1;u=this.propertyPanel.getPropertyElement(this.getCustomWidgetPropertyPanel(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r);u.isVisible=i;f=this.bbdesigner$.extend(!0,{},u);f.categoryName=n;this.propertyPanel.updatePropertyValue(f,"CustomWidget",i);this.propertyPanel.canUpdate=!0},t.prototype.getCustomWidgetProperties=function(){return this.widgetJson},t.prototype.dispose=function(){try{BoldBIDashboard.isNullOrUndefined(this.customWidgetObj.__proto__.destroy)||this.customWidgetObj.destroy();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.CustomWidget)}catch(t){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:t,Type:t.name})}n.prototype.dispose.call(this)},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.CustomWidgetItem",InternalCustomWidgetReportItem,window);InternalChartProperties=function(){function n(n,t){this.selectedGridData=null;this.trendLineEdit=!1;this.isColorSupportForText=!1;this.chartModel=null;this.widgetJson=null;this.colorFields=[];this.locale=null;this.legendDropDownWrapper=null;this.legendDropdownContainer=null;this.unselectedLegendInstance=[];this.isLegendDropdownAllSelected=!1;this.isLegendListInteraction=!1;this.designer=n;this.bbdesigner$=this.designer.bbdesigner$;this.locale=n.getLocalizationContent();this.chartModel=t;this.widgetJson=t.getChartProperties();this.designerInstance=t.designerInstance;this.chartHelper=new BoldBIDashboard.DashboardDesignerUtility.ChartHelper(n);this.colorFields=this.getColorFields();this.unwireEvents();this.wireEvents()}return n.prototype.getColorFields=function(){return[{Name:WidgetProperty.FillColor,DisplayName:"Fill",ColorPicker:ColorSetColorPickers.NormalColorPicker}]},n.prototype.updateChartProperties=function(n,t,i,r){var s=!1,o,u,f,h,e;switch(n){case"Name":this.widgetJson.ContainerSettings.Title=i;this.chartModel.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.chartModel.propertyPanel.setDescription(this.widgetJson,i);break;case"ChartType":this.updateChartType(i);break;case"EnableAnimation":this.updateChartAnimation(i);break;case"EnableMultiSelection":this.updateMultiSelection(i);break;case"Radius":this.updateDoughnutRadius(i);break;case"Chartsize":this.widgetJson.ChartType===ChartTypes.Pie.toString()?this.updatepieChartsize(i):this.widgetJson.ChartType===ChartTypes.Doughnut.toString()&&this.updateDoughnutChartsize(i);break;case"ShowLegend":this.updateLegendVisibility(i);break;case"ShowValueInTooltip":this.updateShowValueInTooltip(i);break;case"ShowLegendAsDropDown":this.updateLegendVisiblityDropdown(i);break;case"ShowTooltip":this.updateShowTooltip(i);break;case"IsAutoLegendFontSize":case"IsAutoLegendTitleFontSize":this.updateAutoLegendFontSize(i,n);break;case"LegendFontSize":case"LegendTitleFontSize":this.updateLegendFontSize(i,n);break;case"LegendLabelForground":this.updateLegendForeground(i);break;case"LegendPosition":this.updateLegendPosition(i);break;case"LegendTitle":this.updateLegendTitle(i);break;case"LegendTextOverFlow":this.updateLegendTextOverFlow(i);break;case"LegendTextwidth":this.updateLegendTextwidth(i);break;case"ShowValueLabels":this.updateValueLabels(i);break;case"AutoValueLabelFontSize":this.updateAutoValueLabelFontSize(i);break;case"ValueLabelFontSize":this.updateValueLabelFontSize(i);break;case"ValueLabelForground":this.updateValueLabelColor(i);break;case"ValueLabelPosition":this.updateValueLabelPosition(i);break;case"ValueLabelRotation":this.updateValueLabelRotation(i);break;case"ShowValueLabelSuffix":this.updateValueLabelSuffixVisibilty(i);break;case"ValueLabelSuffix":this.updateValueLabelSuffix(i);break;case"PrimaryAxisType":this.updatePrimaryAxisType(i);break;case"SecondaryAxisType":this.updateSecondaryAxisType(i);break;case"AxisTitleForeground":this.updateAxisTitleForegroound(i);break;case"AxisLabelForeground":this.updateAxisLabelForegroound(i);break;case"CategoryAxis":this.updateCategoryAxisVisibilty(i);break;case"IsAutoCategoryAxisLabelFontSize":this.updateIsAutoCategoryAxisLabelFontSize(i);break;case"CategoryAxisLabelFontSize":this.updateCategoryAxisLabelFontSize(i);break;case"CategoryAxisTitle":this.updateCategoryAxisTitleVisibility(i);break;case"CategoryAxisTitleValue":this.updateCategoryAxisTitleValue(i);break;case"IsAutoCategoryAxisTitleFontSize":this.updateIsAutoCategoryAxisTitleFontSize(i);break;case"CategoryAxisTitleFontSize":this.updateCategoryAxisTitleFontSize(i);break;case"CategoryAxisLabelRotation":this.updateCategoryLabelRotation(i);break;case"IsAutoInterval":this.updateIsAutoInterval(i);break;case"Interval":this.updateInterval(i);break;case"PrimaryValueAxis":case"SecondaryValueAxis":this.updateAxisVisibilty(i,n);break;case"PrimaryInverseAxis":case"SecondaryInverseAxis":this.updateInverseValue(i,n);break;case"PrimaryAxisTitle":case"SecondaryAxisTitle":this.updateAxisTitleVisibility(i,n);break;case"PrimaryAxisTitleValue":case"SecondaryAxisTitleValue":this.updateAxisTitleValue(i,n);break;case"IsAutoPrimaryAxisLabelFontSize":case"IsAutoSecondaryAxisLabelFontSize":this.updateIsAutoAxisLabelFontSize(i,n);break;case"PrimaryLabelFontSize":case"SecondaryLabelFontSize":this.updateAxisLabelFontSize(i,n);break;case"IsAutoPrimaryAxisTitleFontSize":case"IsAutoSecondaryAxisTitleFontSize":this.updateIsAutoAxisTitleFontSize(i,n);break;case"PrimaryTitleFontSize":case"SecondaryTitleFontSize":this.updateAxisTitleFontSize(i,n);break;case"LableOverflowMode":this.updateLabelOverFlowMode(i);break;case"CategoryAxisLabelTrim":this.updateCategoryAxisLabelTrim(i);break;case"LabelMaximumWidth":this.updateLabelMaxWidth(i);break;case"CategoryGridLines":this.updateCategoryGridLines(i);break;case"PrimaryValueGridLines":case"SecondaryValueGridLines":this.updateGridLinesValue(i,n);break;case"ShowMarker":this.updateMarkerVisibility(i);break;case"ShowNoDataItem":this.widgetJson.ShowNoDataItem=i;BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateShowNoDataItem(this.chartModel);break;case"EmptyPointMode":this.updateEmptyPointMode(i);break;case"DataLabel":this.widgetJson.DataLabel=i;this.updateValueLabelSuffix(this.widgetJson.ValueLabelSuffix);break;case"UseDefaultPalette":this.updateDefaultPaletteVisibility(i);break;case"ColorMappingType":this.updateColorMappingType(i);break;case"AdvanceColorPalette":this.showConfigureColorPalette(i);break;case"ItemLink":this.chartModel.updateLink(i);break;case"SubTitle":this.chartModel.propertyPanel.setSubTitle(this.widgetJson,i);break;case"ActAsMasterWidget":this.widgetJson.FilterSettings.ActAsMasterWidget=i;o=this.chartModel.dataGroupBindedColumnInfo();i&&o.rowLength===0&&o.columnLength===1?this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","EnableMultiSelection",!0):this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","EnableMultiSelection",!1);BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateActAsMasterWidget(this.chartModel);break;case"IsEnableForecast":this.chartHelper.updateForecastProperties(n,i);this.chartHelper.updateForecastSettingsProperties(this.chartModel,i);this.chartHelper.updateSinglePointForeCast(this.chartModel.dataValues,this.chartModel);break;case"ConfidenceInterval":case"ConfidenceBandStyle":this.chartHelper.updateForecastProperties(n,i);break;case"LegendText":this.chartHelper.updateForecastProperties(n,i);i.trim()===""&&this.chartHelper.updateForecastrenameproperties(this.chartModel);break;case"FieldNameChange":this.chartModel.updateDisplayTextBasedProperties();break;case"LegendShape":BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateLegendShape(i,this.chartModel);break;case"ColumnSpacing":BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateColumnSpacing(i,this.chartModel);break;case"ColumnWidth":BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateColumnWidth(i,this.chartModel);break;case"IsInversed":this.updateIsInversed(i);break;case"EnableSmoothScroll":this.updateEnableSmoothScroll(i);break;case"PageSize":this.updatePageSize(i);break;case"EnableFixedSeries":this.updateFixedSeries(i,this.chartModel);break;case"FixedRowCount":this.updateFixedRows(i,this.chartModel);break;case"FixedColumnCount":this.updateFixedColumns(i,this.chartModel);break;default:s=!0}if(!s){if(BoldBIDashboardDesigner.editManager.isPerformAction&&(u=this.designerInstance.designerPanel.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)h=u[f],h.attr("id")===this.chartModel.ControlContainer.attr("id")&&(e=this.bbdesigner$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.chartModel.propertyPanel.updatePropertyValue(e,"Chart",i));n!=="Series"&&BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-chart-bar",this.chartModel.designerId+"_"+this.widgetJson.UniqueName,[n,i,t,r],[n,t,i,r])}},n.prototype.setPropertyElement=function(n,t,i,r){var u,f;this.chartModel.propertyPanel.canUpdate=!1;u=this.chartModel.propertyPanel.getPropertyElement(this.getChartPropertyPanel(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r);u.isVisible=i;f=this.bbdesigner$.extend(!0,{},u);f.categoryName=n;this.chartModel.propertyPanel.updatePropertyValue(f,"Chart",i);this.chartModel.propertyPanel.canUpdate=!0},n.prototype.updateChartType=function(n){var r=this.chartModel.getChartType(n),u=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),i,t,f,e,o;for(this.widgetJson.ChartType=n,i=0;i<u.length;i++)t=this.bbdesigner$(u[i]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(t)||(t.option("commonSeriesOptions.type",r),r==="pie"?t.option("commonSeriesOptions.pieCoefficient",this.widgetJson.Chartsize):r==="doughnut"&&t.option("commonSeriesOptions.doughnutSize",this.widgetJson.Chartsize),f=this.widgetJson.ChartType===ChartTypes.Doughnut.toString()||this.widgetJson.ChartType===ChartTypes.Pie.toString(),this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","Chartsize",f),this.updateChart(this.widgetJson.ValueLabelSuffix));e=this.widgetJson.ChartType===ChartTypes.Pyramid.toString()||this.widgetJson.ChartType===ChartTypes.Funnel.toString()?!1:!0;o=this.widgetJson.ChartType===ChartTypes.Doughnut.toString()?!0:!1;this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","EnableAnimation",e);this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","ShowMarker",!1);this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","Radius",o);this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","ShowNoDataItem",this.chartModel.isCartesianChartType(this.widgetJson.ChartType));this.setPropertyElement("Formatting","ColorSettings",this.widgetJson.ColorCustomization);this.chartModel.propertyPanel.updateCategoryVisibility("Chart","Formatting",!1)},n.prototype.updateChartAnimation=function(n){var r,t,i;for(this.widgetJson.EnableAnimation=n,r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||(i.option("commonSeriesOptions.enableAnimation",this.widgetJson.EnableAnimation),i.animate())},n.prototype.updateShowTooltip=function(n){var r,t,i;for(this.widgetJson.ShowTooltip=n,r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||(i.option("commonSeriesOptions.tooltip.visible",this.widgetJson.ShowTooltip),i.redraw());this.chartModel.getVisibilityForShowValueAndPercent()&&this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","ShowValueInTooltip",n)},n.prototype.updateShowValueInTooltip=function(n){this.widgetJson.ShowValueInTooltip=n},n.prototype.setPropertyPanelElement=function(n,t,i,r){var u=this.chartModel.propertyPanel.getPropertyElement(this.getChartPropertyPanel(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r);this.chartModel.propertyPanel.setDropDown(null,null,n,u,i)},n.prototype.updateMultiSelection=function(n){var i,t,r;for(this.widgetJson.EnableMultiSelection=n,i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(r)||r.option("commonSeriesOptions.selectionSettings.type",n?"multiple":"single")},n.prototype.updateDoughnutRadius=function(n){var r,t,i;if(this.widgetJson.ChartType===ChartTypes.Doughnut.toString())for(this.widgetJson.Radius=n,r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||(i.option("commonSeriesOptions.doughnutCoefficient",this.widgetJson.Radius),i.redraw())},n.prototype.updatepieChartsize=function(n){var r,t,i;for(this.widgetJson.Chartsize=n,r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||(i.option("commonSeriesOptions.pieCoefficient",this.widgetJson.Chartsize),i.redraw())},n.prototype.updateDoughnutChartsize=function(n){var r,t,i;for(this.widgetJson.Chartsize=n,r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||(i.option("commonSeriesOptions.doughnutSize",this.widgetJson.Chartsize),i.redraw())},n.prototype.updateLegendVisibility=function(n){var r,i,t;for(this.widgetJson.ShowLegend=n,r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),!BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(this.widgetJson.ChartType)&&this.widgetJson.ShowLegendAsDropDown&&(n?this.renderLegendDropdownList():this.destroyDropdowLegendContainer()),i=0;i<r.length;i++)t=this.bbdesigner$(r[i]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(t)||(t.model.legend.visible=this.widgetJson.ShowLegend,this.updateCartesianLegendVisiblity(t),t.redraw());this.chartModel.propertyPanel.updateItemVisibility("Chart","LegendSettings","CustomLegend",this.widgetJson.ShowLegend&&this.widgetJson.CustomLegendBtnVisibilty);this.chartModel.propertyPanel.updateItemVisibility("Chart","LegendSettings","LegendPosition",this.widgetJson.ShowLegend);this.chartModel.propertyPanel.updateItemVisibility("Chart","LegendSettings","LegendShape",this.widgetJson.ShowLegend);this.chartModel.propertyPanel.updateItemVisibility("Chart","LegendSettings","LegendTitle",this.widgetJson.ShowLegend);this.chartModel.propertyPanel.updateItemVisibility("Chart","LegendSettings","LegendLabelForground",this.widgetJson.ShowLegend);this.chartModel.propertyPanel.updateItemVisibility("Chart","LegendSettings","LegendTextOverFlow",this.widgetJson.ShowLegend);this.chartModel.propertyPanel.updateItemVisibility("Chart","LegendSettings","LegendTextwidth",this.widgetJson.ShowLegend);this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings","IsAutoLegendFontSize",this.widgetJson.ShowLegend);this.updateTitleVisibility("Chart","FontSettings","Legend",this.widgetJson.ShowLegend);this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings","IsAutoLegendTitleFontSize",this.widgetJson.ShowLegend);this.updateTitleVisibility("Chart","FontSettings","LegendTitleFont",this.widgetJson.ShowLegend);this.chartModel.propertyPanel.updateItemDisable("float","Chart","FontSettings","LegendFontSize",this.widgetJson.IsAutoLegendFontSize);this.chartModel.propertyPanel.updateItemDisable("float","Chart","FontSettings","LegendTitleFontSize",this.widgetJson.IsAutoLegendTitleFontSize);this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings","LegendFontSize",this.widgetJson.ShowLegend);this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings","LegendTitleFontSize",this.widgetJson.ShowLegend);this.updateLegendPropertyDisablity();this.chartModel.propertyPanel.refreshScroller()},n.prototype.updateLegendVisiblityDropdown=function(n){var r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),i,t;for(this.widgetJson.ShowLegendAsDropDown=n,BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(this.widgetJson.ChartType)||this.renderLegendDropdownList(),i=0;i<r.length;i++)t=this.bbdesigner$(r[i]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(t)||(t.model.legend.visible=!this.widgetJson.ShowLegendAsDropDown,this.updateCartesianLegendVisiblity(t),t.redraw());this.updateLegendPropertyDisablity()},n.prototype.updateLegendPropertyDisablity=function(){this.chartModel.propertyPanel.updateItemDisable("dropdown","Chart","LegendSettings","LegendPosition",this.widgetJson.ShowLegendAsDropDown&&!this.widgetJson.EnableColorSettings);this.chartModel.propertyPanel.updateItemDisable("dropdown","Chart","LegendSettings","LegendShape",this.widgetJson.ShowLegendAsDropDown&&!this.widgetJson.EnableColorSettings);this.chartModel.propertyPanel.updateItemDisable("color","Chart","LegendSettings","LegendLabelForground",this.widgetJson.ShowLegendAsDropDown&&!this.widgetJson.EnableColorSettings);this.chartModel.propertyPanel.updateItemDisable("dropdown","Chart","LegendSettings","LegendTextOverFlow",this.widgetJson.ShowLegendAsDropDown&&!this.widgetJson.EnableColorSettings);this.chartModel.propertyPanel.updateItemDisable("float","Chart","LegendSettings","LegendTextwidth",this.widgetJson.ShowLegendAsDropDown&&!this.widgetJson.EnableColorSettings)},n.prototype.updateAutoLegendFontSize=function(n,t){var i=t==="IsAutoLegendTitleFontSize",r,u;i?(this.chartModel.propertyPanel.updateItemDisable("float","Chart","FontSettings","LegendTitleFontSize",n),this.updateTitleVisibility("Chart","FontSettings","LegendTitleFont",this.chartModel.getChartProperties().ShowLegend),this.chartModel.getChartProperties().IsAutoLegendTitleFontSize=n):(this.chartModel.propertyPanel.updateItemDisable("float","Chart","FontSettings","LegendFontSize",n),this.updateTitleVisibility("Chart","FontSettings","Legend",this.chartModel.getChartProperties().ShowLegend),this.chartModel.getChartProperties().IsAutoLegendFontSize=n);r=i?this.chartModel.getChartProperties().LegendTitleFontSize:this.chartModel.getChartProperties().LegendFontSize;u=t==="IsAutoLegendTitleFontSize"?"LegendTitleFontSize":"LegendFontSize";this.updateLegendFontSize(r,u)},n.prototype.updateLegendFontSize=function(n,t){var f=t==="LegendTitleFontSize",u,r,i;for(f?this.chartModel.getChartProperties().LegendTitleFontSize=n:this.chartModel.getChartProperties().LegendFontSize=n,u=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),r=0;r<u.length;r++)i=this.bbdesigner$(u[r]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||(f?i.model.legend.title.font.size=this.chartModel.getChartProperties().IsAutoLegendTitleFontSize?this.chartModel.getFontSizeBasedOnResolution():this.chartModel.getChartProperties().LegendTitleFontSize+"px":i.model.legend.font.size=this.chartModel.getChartProperties().IsAutoLegendFontSize?this.chartModel.getFontSizeBasedOnResolution():this.chartModel.getChartProperties().LegendFontSize+"px",i.redraw())},n.prototype.updateLegendForeground=function(n){var r,i,t;for(this.widgetJson.LegendLabel.Color=n,this.widgetJson.LegendLabel.IsEdited=!0,r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),i=0;i<r.length;i++)t=this.bbdesigner$(r[i]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(t)||(t.model.legend.font.color=n,t.model.legend.title.font.color=n,t.redraw())},n.prototype.updateLegendPosition=function(n){var r,t,i;for(this.widgetJson.LegendPosition=n,r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||(i.model.legend.position=this.chartModel.getResponsiveLegendPosition(this.widgetJson.LegendPosition),i.redraw())},n.prototype.updateValueLabels=function(n){var i,r,t,u,f;for(this.widgetJson.ShowValueLabels=n,i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),r=this.isShapeChartType(this.widgetJson.ChartType)?BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getChartSeries(this.chartModel):this.chartModel.chartObj.model.series,t=0;t<i.length;t++)u=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(u)||(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateValueLabelVisibility(n,this.chartModel,this.widgetJson.CustomValueLabels,r),u.redraw());this.isShapeChartType(this.widgetJson.ChartType)?this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","DataLabel",n):this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","ValueLabelRotation",n);this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","ValueLabelForground",n);this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","ShowValueLabelSuffix",n);this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings","AutoValueLabelFontSize",n);this.updateTitleVisibility("Chart","FontSettings","ValueLabel",n);this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings","AutoValueLabelFontSize",n);this.updateTitleVisibility("Chart","FontSettings","ValueLabel",n);this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings","ValueLabelFontSize",n);this.chartModel.propertyPanel.updateItemDisable("float","Chart","FontSettings","ValueLabelFontSize",this.chartModel.getChartProperties().IsAutoValueLabelFontSize);this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","ValueLabelPosition",BoldBIDashboard.DashboardDesignerUtility.ChartHelper.ValueLabelPositionVisibility(this.widgetJson));n?this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","ValueLabelSuffix",this.widgetJson.ShowValueLabelSuffix):this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","ValueLabelSuffix",n);f=this.designerInstance.element.find("#"+this.chartModel.designerId+"_Chart_BasicSettings_valueLabelbutton_container");n&&r.length!==1?f.css("display","block"):f.css("display","none")},n.prototype.updateAutoValueLabelFontSize=function(n){this.chartModel.getChartProperties().IsAutoValueLabelFontSize=n;this.chartModel.propertyPanel.updateItemDisable("float","Chart","FontSettings","ValueLabelFontSize",n);this.updateValueLabelFontSize(this.chartModel.getChartProperties().ValueLabelFontSize)},n.prototype.updateValueLabelFontSize=function(n){var f,t,i,r,u;for(this.chartModel.getChartProperties().ValueLabelFontSize=n,f=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=this.isShapeChartType(this.widgetJson.ChartType)?BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getChartSeries(this.chartModel):this.chartModel.chartObj.model.series,i=0;i<f.length;i++)if(r=this.bbdesigner$(f[i]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(r)){if(r.model.commonSeriesOptions.marker.dataLabel.font.size=this.chartModel.getChartProperties().IsAutoValueLabelFontSize?this.chartModel.getFontSizeBasedOnResolution():this.chartModel.getChartProperties().ValueLabelFontSize+"px",!BoldBIDashboard.isNullOrUndefined(t))for(u=0;u<t.length;u++)t[u].marker.dataLabel.font.size=this.chartModel.getChartProperties().IsAutoValueLabelFontSize?this.chartModel.getFontSizeBasedOnResolution():this.chartModel.getChartProperties().ValueLabelFontSize+"px";r.redraw()}},n.prototype.updateValueLabelColor=function(n){var r,t,i;for(this.widgetJson.ValueLabel.Color=n,this.widgetJson.ValueLabel.IsEdited=!0,r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||(i.option("commonSeriesOptions.marker.dataLabel.font.color",n),i.redraw())},n.prototype.updateValueLabelPosition=function(n){var u,r,t,i;for(this.widgetJson.ValueLabelPosition=n,u=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),r=0;r<u.length;r++)if(t=this.bbdesigner$(u[r]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(t)){for(i=0;i<t.model.series.length;i++)t.model.series[i].marker.dataLabel.textPosition=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getValueLabelPosition(t.model.series[i].type,n);t.redraw()}},n.prototype.updateValueLabelRotation=function(n){var u,i,t,r;for(this.widgetJson.ValueLabelRotation=n.replace(new RegExp(String.fromCharCode(176),"g"),""),u=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),i=0;i<u.length;i++)if(t=this.bbdesigner$(u[i]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(t)){for(t.model.commonSeriesOptions.marker.dataLabel.angle=this.widgetJson.ValueLabelRotation,r=0;r<t.model.series.length;r++)t.model.series[r].marker.dataLabel.angle=this.widgetJson.ValueLabelRotation;t.redraw()}},n.prototype.updateValueLabelSuffixVisibilty=function(n){this.widgetJson.ShowValueLabels&&(this.widgetJson.ShowValueLabelSuffix=n);this.updateValueLabelSuffix(this.widgetJson.ValueLabelSuffix);this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","ValueLabelSuffix",n)},n.prototype.updateChart=function(n){for(var f,i,t,r,e=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),o,u=0;u<e.length;u++)for(f=BoldBIDashboardDesigner.bbdesignerstatic$(e[u]).data("BoldBIDashboardChart"),i=f.model.series,t=0;t<f.model.series.length;t++){var s=i[t].points,h=i[t].total,c=this.chartModel.getDecimalPoints(i[t].id);if(this.isShapeChartType(this.widgetJson.ChartType)&&this.chartModel.DataGroupInfo.FieldContainers.length>0&&this.chartModel.DataGroupInfo.FieldContainers[0].Name==="YValue"&&this.chartModel.DataGroupInfo.FieldContainers[0].FieldInfos.length>0)for(o=this.widgetJson.DataLabel,r=0;r<s.length;r++)BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateDataLabelValueToPoint(i[t],r,h,c,o,this.chartModel);BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateValueLabels(n,this.chartModel,this.designerInstance.checkAndUpdateParameterValue(n,this.chartModel.DataGroupInfo.DataSourceName))}},n.prototype.updateValueLabelSuffix=function(n){this.isShapeChartType(this.widgetJson.ChartType)&&this.updateDataLabel(this.widgetJson.DataLabel);BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateValueLabelSuffix(n,this.chartModel,this.designerInstance.checkAndUpdateParameterValue(n,this.chartModel.DataGroupInfo.DataSourceName))},n.prototype.updatePrimaryAxisType=function(n){var r,t,i;for(this.widgetJson.Axis.PrimaryValueAxis.AxisType=n,r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),i.model.primaryYAxis.valueType=n===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Logarithmic)&&this.chartModel.axisTypevisible(i.model.series,!1)?"logarithmic":"double",i.redraw()},n.prototype.updateSecondaryAxisType=function(n){var i,t,r;for(this.widgetJson.Axis.SecondaryValueAxis.AxisType=n,i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.axes[0].valueType=n===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Logarithmic)?"logarithmic":"double",r.redraw()},n.prototype.updateAxisTitleForegroound=function(n){var r,i,t;for(this.widgetJson.AxisTitle.Color=n,this.widgetJson.AxisTitle.IsEdited=!0,r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),i=0;i<r.length;i++)t=this.bbdesigner$(r[i]).data("BoldBIDashboardChart"),t.model.primaryXAxis.title.font.color=n,t.model.primaryYAxis.title.font.color=n,!BoldBIDashboard.isNullOrUndefined(this.widgetJson.ChartSeriesTypeInfo)&&this.widgetJson.ChartSeriesTypeInfo.length>0&&this.widgetJson.ChartSeriesTypeInfo.filter(function(n){return n.IsSecondaryAxis}).length>0&&(BoldBIDashboard.isNullOrUndefined(t.model.axes[0])||(t.model.axes[0].title.font.color=n)),t.redraw()},n.prototype.updateAxisLabelForegroound=function(n){var r,i,t;for(this.widgetJson.AxisLabel.Color=n,this.widgetJson.AxisLabel.IsEdited=!0,r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),i=0;i<r.length;i++)t=this.bbdesigner$(r[i]).data("BoldBIDashboardChart"),t.model.primaryXAxis.font.color=n,t.model.primaryYAxis.font.color=n,!BoldBIDashboard.isNullOrUndefined(this.widgetJson.ChartSeriesTypeInfo)&&this.widgetJson.ChartSeriesTypeInfo.length>0&&this.widgetJson.ChartSeriesTypeInfo.filter(function(n){return n.IsSecondaryAxis}).length>0&&(BoldBIDashboard.isNullOrUndefined(t.model.axes[0])||(t.model.axes[0].font.color=n)),t.redraw()},n.prototype.updateCategoryAxisVisibilty=function(n){for(var i,u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.chartModel.CellInfo,!1,BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isXaxisLabelVisible(this.chartModel)),r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),this.widgetJson.Axis.CategoryAxis.IsEnabled=n,i.model.primaryXAxis.visible=u.ShowXAxisLabels?this.widgetJson.Axis.CategoryAxis.IsEnabled:!1,i.redraw();this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis","CategoryAxisTitle",n);this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis","LableOverflowMode",n);this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis","CategoryAxisLabelTrim",n);this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis","LabelMaximumWidth",n);this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis","CategoryAxisLabelRotation",n);this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis","IsAutoInterval",n);this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis","Interval",n);this.chartModel.propertyPanel.updateItemDisable("float","Chart","Axis","Interval",!this.widgetJson.Axis.CategoryAxis.IsAutoInterval);this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings","IsAutoCategoryAxisLabelFontSize",n);this.updateTitleVisibility("Chart","FontSettings","CategoryAxisLabelFont",n);this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings","CategoryAxisLabelFontSize",n);this.chartModel.propertyPanel.updateItemDisable("float","Chart","FontSettings","CategoryAxisLabelFontSize",this.widgetJson.Axis.CategoryAxis.IsAutoCategoryAxisLabelFontSize);this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings","IsAutoCategoryAxisTitleFontSize",n&&this.widgetJson.Axis.CategoryAxis.ShowTitle);this.updateTitleVisibility("Chart","FontSettings","CategoryAxisTitleFont",n&&this.widgetJson.Axis.CategoryAxis.ShowTitle);this.chartModel.propertyPanel.updateItemDisable("float","Chart","FontSettings","CategoryAxisTitleFontSize",this.widgetJson.Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize);this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings","CategoryAxisTitleFontSize",n&&this.widgetJson.Axis.CategoryAxis.ShowTitle);this.updateCategoryAxisTitleVisibility(this.widgetJson.Axis.CategoryAxis.ShowTitle)},n.prototype.updateIsAutoCategoryAxisLabelFontSize=function(n){this.chartModel.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisLabelFontSize=n;this.chartModel.propertyPanel.updateItemDisable("float","Chart","FontSettings","CategoryAxisLabelFontSize",n);this.updateCategoryAxisLabelFontSize(this.chartModel.getChartProperties().Axis.CategoryAxis.CategoryAxisLabelFontSize)},n.prototype.updateCategoryAxisLabelFontSize=function(n){var i,t,r;for(this.chartModel.getChartProperties().Axis.CategoryAxis.CategoryAxisLabelFontSize=n,i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryXAxis.font.size=this.chartModel.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisLabelFontSize?this.chartModel.getFontSizeBasedOnResolution():n+"px",r.redraw()},n.prototype.updateCategoryAxisTitleVisibility=function(n){var i,u,t,r;for(this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis","CategoryAxisTitleValue",n&&this.widgetJson.Axis.CategoryAxis.IsEnabled&&!this.widgetJson.IsEnableDrillDown),this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings","IsAutoCategoryAxisTitleFontSize",n&&this.widgetJson.Axis.CategoryAxis.IsEnabled),this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings","CategoryAxisTitleFontSize",n&&this.widgetJson.Axis.CategoryAxis.IsEnabled),this.updateTitleVisibility("Chart","FontSettings","CategoryAxisTitleFont",n&&this.widgetJson.Axis.CategoryAxis.IsEnabled),this.chartModel.propertyPanel.updateItemDisable("float","Chart","FontSettings","CategoryAxisTitleFontSize",this.widgetJson.Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize),i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.chartModel.CellInfo),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),this.widgetJson.Axis.CategoryAxis.ShowTitle=n,r.model.primaryXAxis.title.visible=u.ShowXAxisTitle?this.widgetJson.Axis.CategoryAxis.ShowTitle:!1,r.redraw()},n.prototype.updateCategoryAxisTitleValue=function(n){var i,t,r;if(this.chartModel.dataGroupBindedColumnInfo().columnLength>0)for(BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n)?(this.widgetJson.Axis.CategoryAxis.IsCustomTitle=!1,n=this.chartModel.DataGroupInfo.FieldContainers[this.chartModel.dataGroupBindedColumnInfo().columnIndex].FieldInfos[0].DisplayName):this.widgetJson.Axis.CategoryAxis.IsCustomTitle=!0,this.widgetJson.Axis.CategoryAxis.Title=n,i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryXAxis.title.text=n,r.redraw();else this.setPropertyElement("Axis","CategoryAxisTitleValue",""),this.widgetJson.Axis.CategoryAxis.IsCustomTitle=!1},n.prototype.updateIsAutoCategoryAxisTitleFontSize=function(n){this.chartModel.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize=n;this.chartModel.propertyPanel.updateItemDisable("float","Chart","FontSettings","CategoryAxisTitleFontSize",this.widgetJson.Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize);this.updateCategoryAxisTitleFontSize(this.chartModel.getChartProperties().Axis.CategoryAxis.CategoryAxisTitleFontSize)},n.prototype.updateCategoryAxisTitleFontSize=function(n){var i,t,r;for(this.chartModel.getChartProperties().Axis.CategoryAxis.CategoryAxisTitleFontSize=n,i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryXAxis.title.font.size=this.chartModel.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize?this.chartModel.getFontSizeBasedOnResolution():n+"px",r.redraw()},n.prototype.updateLegendTitle=function(n){var r,t,i;for(this.widgetJson.LegendTitle=n,r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),i.model.legend.title.text=n,BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(this.widgetJson.ChartType)||this.renderLegendDropdownList(i.model.series),i.redraw()},n.prototype.updateLegendTextOverFlow=function(n){var i,t,r;for(this.widgetJson.LegendTextOverFlow=n,i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.legend.textOverflow=n.toLowerCase(),r.redraw();this.updateLegendTextwidth(this.widgetJson.LegendTextWidth)},n.prototype.updateLegendTextwidth=function(n){var i,t,r;for(this.widgetJson.LegendTextWidth=n,i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.legend.textWidth=n,r.redraw()},n.prototype.updateIsAutoInterval=function(n){this.widgetJson.Axis.CategoryAxis.IsAutoInterval=n;this.updateInterval(this.widgetJson.Axis.CategoryAxis.Interval);this.chartModel.propertyPanel.updateItemDisable("float","Chart","Axis","Interval",n)},n.prototype.updateInterval=function(n){var i,t,r;for(this.widgetJson.Axis.CategoryAxis.Interval=n,i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryXAxis.range.interval=this.widgetJson.Axis.CategoryAxis.IsAutoInterval?null:n,r.redraw()},n.prototype.updateAxisVisibilty=function(n,t){var i=t==="SecondaryValueAxis",l=i?"SecondaryAxisTitle":"PrimaryAxisTitle",a=i?"SecondaryAxisTitleValue":"PrimaryAxisTitleValue",v=i?"SecondaryInverseAxis":"PrimaryInverseAxis",r=i?this.widgetJson.Axis.SecondaryValueAxis.ShowTitle:this.widgetJson.Axis.PrimaryValueAxis.ShowTitle,y=i?"SecondaryAxisRange":"PrimaryAxisRange",p=i?"SecondaryAxisFormat":"PrimaryAxisFormat",w=i?"SecondaryAxisType":"PrimaryAxisType",b=i?"IsAutoSecondaryAxisLabelFontSize":"IsAutoPrimaryAxisLabelFontSize",k=i?"SecondaryAxisLabelFont":"PrimaryAxisLabelFont",o=i?"SecondaryLabelFontSize":"PrimaryLabelFontSize",s=i?"IsAutoSecondaryAxisTitleFontSize":"IsAutoPrimaryAxisTitleFontSize",d=i?"SecondaryAxisTitleFont":"PrimaryAxisTitleFont",h=i?"SecondaryTitleFontSize":"PrimaryTitleFontSize",g=i?this.widgetJson.Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize:this.widgetJson.Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize,nt=i?this.widgetJson.Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize:this.widgetJson.Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize,c=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.chartModel.CellInfo),e,u,f;for(i?this.widgetJson.Axis.SecondaryValueAxis.IsEnabled=n:this.widgetJson.Axis.PrimaryValueAxis.IsEnabled=n,this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis",l,n),this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis",a,r&&n),this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis",y,n),this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis",p,n),this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis",w,n&&this.chartModel.axisTypevisible(this.chartModel.chartObj.model.series,i?!0:!1)),this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis",v,n),this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings",b,n),this.updateTitleVisibility("Chart","FontSettings",k,n),this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings",o,n),this.chartModel.propertyPanel.updateItemDisable("float","Chart","FontSettings",o,g),this.updateTitleVisibility("Chart","FontSettings",s,n&&r),this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings",s,n&&r),this.updateTitleVisibility("Chart","FontSettings",d,n&&r),this.chartModel.propertyPanel.updateItemDisable("float","Chart","FontSettings",h,nt),this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings",h,n&&r),e=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),u=0;u<e.length;u++)f=this.bbdesigner$(e[u]).data("BoldBIDashboardChart"),i?f.model.axes[0].visible=c.ShowYAxisLabels?n:!1:f.model.primaryYAxis.visible=c.ShowYAxisLabels?n:!1,f.redraw()},n.prototype.updateAxisTitleVisibility=function(n,t){var e=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.chartModel.CellInfo),i=t==="SecondaryAxisTitle",s=i?"SecondaryAxisTitleValue":"PrimaryAxisTitleValue",h=i?"IsAutoSecondaryAxisTitleFontSize":"IsAutoPrimaryAxisTitleFontSize",c=i?"SecondaryAxisTitleFont":"PrimaryAxisTitleFont",o=i?"SecondaryTitleFontSize":"PrimaryTitleFontSize",l=i?this.widgetJson.Axis.SecondaryValueAxis.IsEnabled:this.widgetJson.Axis.PrimaryValueAxis.IsEnabled,a=i?this.widgetJson.Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize:this.widgetJson.Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize,f,r,u;for(i?this.widgetJson.Axis.SecondaryValueAxis.ShowTitle=n:this.widgetJson.Axis.PrimaryValueAxis.ShowTitle=n,this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis",s,l&&n),this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings",h,n),this.updateTitleVisibility("Chart","FontSettings",c,n),this.chartModel.propertyPanel.updateItemDisable("float","Chart","FontSettings",o,a),this.chartModel.propertyPanel.updateItemVisibility("Chart","FontSettings",o,n),f=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),r=0;r<f.length;r++)u=this.bbdesigner$(f[r]).data("BoldBIDashboardChart"),i?u.model.axes[0].title.visible=e.ShowYAxisLabels?n:!1:u.model.primaryYAxis.title.visible=e.ShowYAxisLabels?n:!1,u.redraw()},n.prototype.updateInverseValue=function(n,t){for(var i,u=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),r=0;r<u.length;r++)i=this.bbdesigner$(u[r]).data("BoldBIDashboardChart"),t==="SecondaryInverseAxis"?(this.widgetJson.Axis.SecondaryValueAxis.InverseAxis=n,i.model.axes[0].isInversed=this.widgetJson.Axis.SecondaryValueAxis.InverseAxis):(this.widgetJson.Axis.PrimaryValueAxis.InverseAxis=n,i.model.primaryYAxis.isInversed=this.widgetJson.Axis.PrimaryValueAxis.InverseAxis),i.redraw()},n.prototype.updateAxisTitleValue=function(n,t){var o=t==="SecondaryAxisTitleValue",c=o?"SecondaryAxisTitleValue":"PrimaryAxisTitleValue",s,i,r,u,h,f,e;if(this.chartModel.dataGroupBindedColumnInfo().valueLength>0){for(i=[],r=[],u=0;u<this.widgetJson.ChartSeriesTypeInfo.length;u++)this.widgetJson.ChartSeriesTypeInfo[u].IsSecondaryAxis?r.push(this.widgetJson.ChartSeriesTypeInfo[u]):i.push(this.widgetJson.ChartSeriesTypeInfo[u]);for(h=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),f=0;f<h.length;f++)e=this.bbdesigner$(h[f]).data("BoldBIDashboardChart"),o?(n=BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n)?r.length===1?this.chartModel.columnBindings[r[0].UniqueColumnName]:"Values":n,e.model.axes[0].title.text=n):(n=BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n)?i.length===1?this.chartModel.columnBindings[i[0].UniqueColumnName]:"Values":n,e.model.primaryYAxis.title.text=n),e.redraw();o?(this.widgetJson.Axis.SecondaryValueAxis.Title=n,this.widgetJson.Axis.SecondaryValueAxis.IsCustomTitle=BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n)?!1:r.length===1&&n===this.chartModel.columnBindings[r[0].UniqueColumnName]?!1:r.length>1&&n==="Values"?!1:!0,s=this.widgetJson.Axis.SecondaryValueAxis.IsCustomTitle):(this.widgetJson.Axis.PrimaryValueAxis.Title=n,this.widgetJson.Axis.PrimaryValueAxis.IsCustomTitle=BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n)?!1:i.length===1&&n===this.chartModel.columnBindings[i[0].UniqueColumnName]?!1:i.length>1&&n==="Values"?!1:!0,s=this.widgetJson.Axis.PrimaryValueAxis.IsCustomTitle);this.setPropertyElement("Axis",c,s?n:"")}else this.setPropertyElement("Axis",c,"")},n.prototype.updateIsAutoAxisLabelFontSize=function(n,t){var i=t==="IsAutoSecondaryAxisLabelFontSize",r=i?"SecondaryLabelFontSize":"PrimaryLabelFontSize",u;i?this.widgetJson.Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize=n:this.widgetJson.Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize=n;this.chartModel.propertyPanel.updateItemDisable("float","Chart","FontSettings",r,n);u=i?this.widgetJson.Axis.SecondaryValueAxis.SecondaryLabelFontSize:this.widgetJson.Axis.PrimaryValueAxis.PrimaryLabelFontSize;this.updateAxisLabelFontSize(u,r)},n.prototype.updateAxisLabelFontSize=function(n,t){for(var i,f=t==="SecondaryLabelFontSize",u=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),r=0;r<u.length;r++)i=this.bbdesigner$(u[r]).data("BoldBIDashboardChart"),f?(this.widgetJson.Axis.SecondaryValueAxis.SecondaryLabelFontSize=n,i.model.axes[0].font.size=this.widgetJson.Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize?this.chartModel.getFontSizeBasedOnResolution():n+"px"):(this.widgetJson.Axis.PrimaryValueAxis.PrimaryLabelFontSize=n,i.model.primaryYAxis.font.size=this.widgetJson.Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize?this.chartModel.getFontSizeBasedOnResolution():n+"px"),i.redraw()},n.prototype.updateIsAutoAxisTitleFontSize=function(n,t){var i=t==="IsAutoSecondaryAxisTitleFontSize",r=i?"SecondaryTitleFontSize":"PrimaryTitleFontSize",u;i?this.widgetJson.Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize=n:this.widgetJson.Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize=n;this.chartModel.propertyPanel.updateItemDisable("float","Chart","FontSettings",r,n);u=i?this.widgetJson.Axis.SecondaryValueAxis.SecondaryTitleFontSize:this.widgetJson.Axis.PrimaryValueAxis.PrimaryTitleFontSize;this.updateAxisTitleFontSize(u,r)},n.prototype.updateAxisTitleFontSize=function(n,t){for(var i,f=t==="SecondaryTitleFontSize",u=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),r=0;r<u.length;r++)i=this.bbdesigner$(u[r]).data("BoldBIDashboardChart"),f?(this.widgetJson.Axis.SecondaryValueAxis.SecondaryTitleFontSize=n,i.model.axes[0].title.font.size=this.widgetJson.Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize?this.chartModel.getFontSizeBasedOnResolution():n):(this.widgetJson.Axis.PrimaryValueAxis.PrimaryTitleFontSize=n,i.model.primaryYAxis.title.font.size=this.widgetJson.Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize?this.chartModel.getFontSizeBasedOnResolution():n),i.redraw()},n.prototype.updateLabelOverFlowMode=function(n){var u,i,t,r;for(this.widgetJson.Axis.CategoryAxis.LabelOverflowMode=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LabelOverFlowMode,n),u=this.chartModel.getResponsiveLabelnteresect(this.widgetJson.Axis.CategoryAxis.LabelOverflowMode),i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryXAxis.labelIntersectAction=u.toLocaleLowerCase(),r.redraw()},n.prototype.updateCategoryAxisLabelTrim=function(n){var i,t,r;for(this.widgetJson.Axis.CategoryAxis.EnableTrim=n,this.chartModel.propertyPanel.updateItemDisable("float","Chart","Axis","LabelMaximumWidth",!n),i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryXAxis.enableTrim=n,r.redraw()},n.prototype.updateLabelMaxWidth=function(n){var i,t,r;for(this.widgetJson.Axis.CategoryAxis.MaxLabelWidth=n,i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryXAxis.maximumLabelWidth=this.widgetJson.Axis.CategoryAxis.MaxLabelWidth,r.redraw()},n.prototype.updateCategoryLabelRotation=function(n){var r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t,i;for(this.widgetJson.Axis.CategoryAxis.LabelRotation=n.replace(new RegExp(String.fromCharCode(176),"g"),""),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),i.model.primaryXAxis.labelRotation=this.chartModel.getResponsiveLabelRotation(this.widgetJson.Axis.CategoryAxis.LabelRotation),i.model.primaryXAxis.labelIntersectAction=this.chartModel.getResponsiveLabelnteresect(this.widgetJson.Axis.CategoryAxis.LabelOverflowMode).toLocaleLowerCase(),i.redraw()},n.prototype.updateCategoryGridLines=function(n){var r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.chartModel.CellInfo,!1,BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isXaxisLabelVisible(this.chartModel)),t,i;for(this.widgetJson.CategoryGridLines=n,t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),i.model.primaryXAxis.majorGridLines.visible=this.widgetJson.CategoryGridLines,i.redraw()},n.prototype.updateGridLinesValue=function(n,t){var u=t==="SecondaryValueGridLines",e=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.chartModel.CellInfo),f=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),i,r;for(u?this.widgetJson.SecondaryValueGridLines=n:this.widgetJson.PrimaryValueGridLines=n,i=0;i<f.length;i++)r=this.bbdesigner$(f[i]).data("BoldBIDashboardChart"),u?r.model.axes[0].majorGridLines.visible=this.widgetJson.SecondaryValueGridLines:r.model.primaryYAxis.majorGridLines.visible=this.widgetJson.PrimaryValueGridLines,r.redraw()},n.prototype.updateMarkerVisibility=function(n){for(var t,i,u=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),r=0;r<u.length;r++){for(t=this.bbdesigner$(u[r]).data("BoldBIDashboardChart"),i=0;i<t.model.series.length;i++)t.model.series[i].marker.visible=this.chartModel.isDistributionType(t.model.series[i].type)?this.widgetJson.ShowMarker=n:!1;t.redraw()}},n.prototype.updateEmptyPointMode=function(n){var u,r,t,i;for(this.widgetJson.EmptyPointMode=n.replace(new RegExp(String.fromCharCode(176),"g"),""),u=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),r=0;r<u.length;r++)if(t=this.bbdesigner$(u[r]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(t)){for(t.model.commonSeriesOptions.emptyPointSettings.displayMode=n.toLocaleLowerCase(),i=0;i<t.model.series.length;i++)t.model.series[i].emptyPointSettings.visible=n.toLocaleLowerCase()!==this.locale.propertyPanel.emptyPointMode.connect.toLocaleLowerCase(),n.toLocaleLowerCase()!==this.locale.propertyPanel.emptyPointMode.connect.toLocaleLowerCase()&&(t.model.series[i].emptyPointSettings.displayMode=n.toLocaleLowerCase());BoldBIDashboard.DashboardDesignerUtility.ChartHelper.setRangePaddingValue(this.chartModel.getChartProperties(),t.model);t.redraw()}},n.prototype.updateDataLabel=function(n){var i,t,r;if(this.chartModel.DataGroupInfo.FieldContainers.length>0&&this.chartModel.DataGroupInfo.FieldContainers[0].Name==="YValue"&&this.chartModel.DataGroupInfo.FieldContainers[0].FieldInfos.length>0)for(this.widgetJson.DataLabel=n,i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(r)||this.updateDataLabelValues(n,r)},n.prototype.updateIsInversed=function(n){var i,t,r;for(this.widgetJson.IsInversed=n,i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryXAxis.isInversed=this.widgetJson.IsInversed,r.redraw()},n.prototype.updateEnableSmoothScroll=function(n){this.widgetJson.EnableSmoothScroll=n;this.chartModel.dataConfigurationInstance.postDraggedFields()},n.prototype.updatePageSize=function(n){this.widgetJson.PageSize=n;this.chartModel.dataConfigurationInstance.postDraggedFields()},n.prototype.updateFixedSeries=function(n,t){this.widgetJson.FixedSeriesSettings.IsFixedRowsAndColumns=n;this.chartModel.propertyPanel.updateItemVisibility("Chart","SeriesSettings","FixedRowCount",n);this.chartModel.propertyPanel.updateItemVisibility("Chart","SeriesSettings","FixedColumnCount",n);this.setPropertyElement("SeriesSettings","FixedRowCount",t.rowCount);this.setPropertyElement("SeriesSettings","FixedColumnCount",t.columnCount);this.widgetJson.FixedSeriesSettings.RowCount=t.rowCount;this.widgetJson.FixedSeriesSettings.ColumnCount=t.columnCount;t.updateSize()},n.prototype.updateFixedRows=function(n,t){this.widgetJson.FixedSeriesSettings.RowCount=n;t.updateSize()},n.prototype.updateFixedColumns=function(n,t){this.widgetJson.FixedSeriesSettings.ColumnCount=n;t.updateSize()},n.prototype.updateDefaultPaletteVisibility=function(n,t){t===void 0&&(t=!1);this.widgetJson.IsDefaultColorPalette=n;var i=this.getModifiedColorPalette();t||this.updateColorPaletteToChartWidget(i);n||this.updateColorPaletteModel();this.chartModel.propertyPanel.updateItemVisibility("Chart","SeriesPalette","ColorPalette",!n);this.chartModel.propertyPanel.updateItemVisibility("Chart","SeriesPalette","ColorMappingType",!n&&!this.isShapeChartType(this.widgetJson.ChartType));this.chartModel.propertyPanel.refreshScroller()},n.prototype.getModifiedColorPalette=function(){for(var t,i=[],r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),n=0;n<r.length;n++)t=this.bbdesigner$(r[n]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(t)||(i=this.getColorPaletteValue(t.model.series));return i},n.prototype.getColorPaletteValue=function(n){var r=[],i,t;if(this.widgetJson.IsDefaultColorPalette){if(r=this.bbdesigner$.extend(!0,[],this.chartModel.defaultColorPalette),n.length>this.chartModel.defaultColorPalette.length)for(t=this.chartModel.defaultColorPalette.length;t<n.length;t++)r[t]=this.chartModel.defaultColorPalette[t%this.chartModel.defaultColorPalette.length]}else{for(i=0;i<this.chartModel.defaultColorPalette.length;i++)this.widgetJson.ColorMappingType==="Data"?r[i]=BoldBIDashboard.isNullOrUndefined(this.widgetJson.ColorPaletteModel[i])?this.chartModel.defaultColorPalette[i]:this.widgetJson.ColorPaletteModel[i].Value:this.widgetJson.ColorMappingType==="Index"&&(r[i]=BoldBIDashboard.isNullOrUndefined(this.widgetJson.IndexColorPalette[i])?this.chartModel.defaultColorPalette[i]:this.widgetJson.IndexColorPalette[i].Value);if(n.length>this.chartModel.defaultColorPalette.length)for(t=this.chartModel.defaultColorPalette.length;t<n.length;t++)r[t]=BoldBIDashboard.isNullOrUndefined(this.widgetJson.ColorPaletteModel[t])?this.chartModel.defaultColorPalette[t%this.chartModel.defaultColorPalette.length]:this.widgetJson.ColorPaletteModel[t].Value}return r},n.prototype.updateColorMappingType=function(n){this.widgetJson.ColorMappingType=n;this.chartModel.updateSeriesColorPalette(this.getChartObject().model.series);this.updateChartColor(this.getModifiedColorPalette());this.designerInstance.modules.serialization.notifyChange()},n.prototype.updateColorPaletteModel=function(){var n=this.chartModel.propertyPanel.getPropertyElement(this.getChartPropertyPanel(),"ColorPalette","SeriesPalette",-1);this.openColorPalette(null,"Chart_SeriesPalette",n)},n.prototype.updateDataLabelValues=function(n,t){for(var u,r=t.model.series,i=0;i<t.model.series.length;i++){var f=r[i].points,e=r[i].total,o=this.chartModel.getDecimalPoints(r[i].id);for(u=0;u<f.length;u++)BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateDataLabelValueToPoint(r[i],u,e,o,n,this.chartModel)}t.redraw()},n.prototype.renderAxisRange=function(n,t,i,r){var s=r?"SecondaryAxisRangeElement":"PrimaryAxisRangeElement",f=r?"SecondaryAxisRange":"PrimaryAxisRange",u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0])),y=this.chartModel.getUpdatedSeriesAxisCount(),h=y.primaryValueLength>0||this.widgetJson.ChartSeriesTypeInfo.length===0,c=y.secondaryValueLength>0,d=r?c:h,e=!BoldBIDashboard.isNullOrUndefined(u)&&u.Type===ControlType.Chart&&!BoldBIDashboard.isNullOrUndefined(u.getChartProperties().Axis.SecondaryValueAxis)&&u.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,l,a,v,b,o,k;if(BoldBIDashboard.isNullOrUndefined(n))this.chartModel.isOpenReport||BoldBIDashboard.isNullOrUndefined(u)||u.Type!==ControlType.Chart||(o=u.designerInstance.element.find("#"+this.chartModel.designerId+"_Chart_"+i.categoryName+"_"+s+"_container"),!BoldBIDashboard.isNullOrUndefined(o)&&o.length>0&&(k=o.find("#"+this.chartModel.designerId+"_chart_"+i.categoryName+"_"+i.name).data("BoldBIDashboardCheckBox"),k.option("checked",r?e:u.getChartProperties().Axis.PrimaryValueAxis.IsEnabled)),this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis",f,r?c&&e:h&&u.getChartProperties().Axis.PrimaryValueAxis.IsEnabled),this.chartModel.propertyPanel.updateItemVisibility("Chart","Axis",s,r?c:h));else{var p=BoldBIDashboard.buildTag("div.e-dbrd-axis-range-row-element","",{display:d?"inline-block":"none"},{id:this.chartModel.designerId+"_Chart_"+i.categoryName+"_"+s+"_container"}),w=BoldBIDashboard.buildTag("div.e-dbrd-axis-range-label-container","",{width:(this.chartModel.propertyPanel.propertyPanelContainer.width()-33)*47/100+"px"}),g=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily e-dbrd-axis-range-label-element",r?this.locale.propertyPanel.axisSettings.showSecondaryValueAxis:this.locale.propertyPanel.axisSettings.showPrimaryValueAxis,{"max-width":(this.chartModel.propertyPanel.propertyPanelContainer.width()-33)*47/100-15+"px"},{id:this.chartModel.designerId+"_chart_"+i.categoryName+"_"+i.name+"_childElement","for":this.chartModel.designerId+"_chart_"+i.categoryName+"_"+i.name});w.append(g);l=BoldBIDashboard.buildTag("div.e-dbrd-axis-range-check-box-container","",{},{id:this.chartModel.designerId+"_chart_"+i.categoryName+"_"+i.name+"_parent"});a=BoldBIDashboard.buildTag("input","",{},{id:this.chartModel.designerId+"_chart_"+i.categoryName+"_"+i.name,type:"checkbox"});l.append(a);v=BoldBIDashboard.buildTag("div.e-dbrd--axis-range-button-container","",{width:(this.chartModel.propertyPanel.propertyPanelContainer.width()-33)*47/100+"px",display:"inline-block"},{id:this.chartModel.designerId+"_"+t+"_"+i.categoryName+"_"+f+"_container"});b=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-small e-chart-axis-range-button "+f,this.locale.propertyPanel.axisSettings.primaryAxisEditRangeText,{display:r?e?"inline-block":"none":u.getChartProperties().Axis.PrimaryValueAxis.IsEnabled?"inline-block":"none"},{id:this.chartModel.designerId+"_"+t+"_"+f+"_container"});v.append(b);a.BoldBIDashboardCheckBox({checked:r?e:u.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,change:this.bbdesigner$.proxy(this.chartModel.propertyPanel.onValueChange,this.chartModel.propertyPanel,i,"Axis","Chart"),width:(this.chartModel.propertyPanel.propertyPanelContainer.width()-33)*57/100-15+"px",cssClass:"e-designer-prop-checkbox"});p.append(w,l,v);n.append(p)}},n.prototype.updateLegendDropdownMarginPosition=function(){var n=230,i=200,t=this.chartModel.ControlContainer.width()-30,r=this.widgetJson.LegendTitle===""?n:n+i,u=0;return r<t?u=t-r:r>t&&(n=i=t/2),{dropdownWidth:n,titleWidth:i,marginLeft:u}},n.prototype.renderLegendDropdownList=function(n){var f,e;if(n===void 0&&(n=null),BoldBIDashboard.isNullOrUndefined(this.legendDropDownWrapper)||(BoldBIDashboard.isNullOrUndefined(this.legendDropdownContainer)||BoldBIDashboard.isNullOrUndefined(this.legendDropdownContainer.data("BoldBIDashboardDropDownList"))||this.legendDropdownContainer.data("BoldBIDashboardDropDownList").destroy(),this.legendDropDownWrapper.remove(),this.legendDropDownWrapper=null),this.widgetJson.ShowLegendAsDropDown&&(this.chartModel.getBindedColumns().yValueColumns.length>1||this.chartModel.getBindedColumns().rowColumns.length>0)){var o=this.widgetJson.ShowLegendAsDropDown&&!this.widgetJson.EnableColorSettings?this.chartModel.ControlContainer.find(".bbi-dbrd-control-header").height()+this.chartModel.ControlContainer.find(".e-dbrd-control-sub-header").outerHeight()+this.chartModel.ControlContainer.find(".e-dbrd-legend-dropdown-wrapper").outerHeight():this.chartModel.ControlContainer.find(".bbi-dbrd-control-header").height()+this.chartModel.ControlContainer.find(".bbi-dbrd-control-sub-header").outerHeight(),t=this.chartModel.ControlContainer.attr("id")+"_Chart_BasicSettings_legenddropdown_wrapper",i=this.updateLegendDropdownMarginPosition();this.legendDropDownWrapper=BoldBIDashboard.buildTag("div.e-dbrd-legend-dropdown-wrapper","",{height:"20px",position:"relative","margin-left":i.marginLeft+"px"},{id:t});var r=BoldBIDashboard.buildTag("div.e-dbrd-legend-dropdown-title-container","",{width:i.titleWidth+"px"},{id:t+"_title_container"}),s=BoldBIDashboard.buildTag("div.e-dbrd-legend-dropdown-title-label-container",this.widgetJson.LegendTitle,{},{type:"label",title:this.widgetJson.LegendTitle,id:t+"_title_label_container"}),u=BoldBIDashboard.buildTag("div.e-dbrd-legend-dropdown-parent-container e-dbrd-widget","",{width:i.dropdownWidth+"px",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"100",overflow:"hidden",float:"right"},{id:t+"_dropdown_parent_container"});this.legendDropdownContainer=BoldBIDashboard.buildTag("input.e-dbrd-legend-dropdown-field-container","",{position:"relative","font-size":"12px","background-color":this.designerInstance.modules.themeHelper.getWidgetTileBackground(null)},{id:t+"_dropdown_container"});f='<div class ="e-chart-dropdown-all-element-wrapper" id="'+this.chartModel.designerId+"LegendDropDownAllElementWrap"+this.widgetJson.UniqueName+'" ><input class ="e-combobox-all-element" id ="'+this.chartModel.designerId+"LegendDropDownAllElementCheckBox"+this.widgetJson.UniqueName+'" type="checkbox"/><\/div>';e={watermarkText:this.locale.common.all,dataSource:this.getLegendSeriesDisplayName(n),fields:{id:"id",text:"text",value:"value"},showCheckbox:!0,change:this.bbdesigner$.proxy(this.legendDropDownItemSelected,this),width:"100%",height:"20",cssClass:"e-dbrd-control e-legend-dropdown-control",headerTemplate:f};u.append(this.legendDropdownContainer);r.append(s);this.legendDropDownWrapper.append(r,u);this.legendDropDownWrapper.insertBefore(this.chartModel.ContentContainer);this.legendDropdownContainer.BoldBIDashboardDropDownList(e).appendTo(this.legendDropdownContainer[0]);this.unselectedLegendInstance=this.unselectedLegendInstance.length>0&&this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design?this.unselectedLegendInstance:this.isLegendDropdownAllSelected&&this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design?[]:this.widgetJson.UnselectedLegendList;this.bbdesigner$("#"+this.chartModel.designerId+"LegendDropDownAllElementCheckBox"+this.widgetJson.UniqueName).BoldBIDashboardCheckBox({text:this.locale.common.all,checked:(this.widgetJson.IsLegendDropdownAllSelected||this.isLegendDropdownAllSelected)&&this.unselectedLegendInstance.length===0,change:this.bbdesigner$.proxy(this.updateLegendDropdownAllSelection,this),cssClass:"e-legend-dropdown-all-element"});this.bbdesigner$("#"+this.chartModel.designerId+"LegendDropDownAllElementWrap"+this.widgetJson.UniqueName).on("click",this.bbdesigner$.proxy(this.updateLegendDropdownAllSelection,this));this.bbdesigner$("#"+this.chartModel.designerId+"LegendDropDownAllElementWrap"+this.widgetJson.UniqueName).off("click",this.bbdesigner$.proxy(this.updateLegendDropdownAllSelection,this));this.chartModel.ContentContainer.css("height","calc(100% - "+o+"px)");this.updateUnselectedListItem(this.unselectedLegendInstance);this.updateLegendDropdownAllTextBox(this.unselectedLegendInstance);this.widgetJson.EnableColorSettings&&this.legendDropDownWrapper.hide()}else this.destroyDropdowLegendContainer()},n.prototype.destroyDropdowLegendContainer=function(){var t=this.chartModel.chartElement.find(".e-datavisualization-chart"),n=this.bbdesigner$(t[this.chartModel.DrillLevelInfo.length]).data("BoldBIDashboardChart");BoldBIDashboard.isNullOrUndefined(this.legendDropDownWrapper)||(BoldBIDashboard.isNullOrUndefined(this.legendDropdownContainer)||BoldBIDashboard.isNullOrUndefined(this.legendDropdownContainer.data("BoldBIDashboardDropDownList"))||this.legendDropdownContainer.data("BoldBIDashboardDropDownList").destroy(),this.legendDropDownWrapper.remove(),this.legendDropDownWrapper=null);BoldBIDashboard.isNullOrUndefined(n)||this.showHideLegendSeriesVisibility(n.model.series,"",!0,!0);this.widgetJson.UnselectedLegendList=this.unselectedLegendInstance=[];this.widgetJson.IsLegendDropdownAllSelected=!0},n.prototype.getLegendSeriesDisplayName=function(n){var t;n===void 0&&(n=null);var u=this.chartModel.chartElement.find(".e-datavisualization-chart"),i=this.bbdesigner$(u[this.chartModel.DrillLevelInfo.length]).data("BoldBIDashboardChart"),r=[];if(!BoldBIDashboard.isNullOrUndefined(i)||!BoldBIDashboard.isNullOrUndefined(n))for(n=BoldBIDashboard.isNullOrUndefined(n)?i.model.series:n,t=0;t<n.length;t++)r.push({id:n[t].id,text:n[t].name,value:n[t].id});return r},n.prototype.legendDropDownItemSelected=function(n){var t;if(n.isInteraction&&this.isLegendListInteraction){var u=this.chartModel.chartElement.find(".e-datavisualization-chart"),r=this.bbdesigner$(u[this.chartModel.DrillLevelInfo.length]).data("BoldBIDashboardChart"),i=this.unselectedLegendInstance.filter(function(t){return t.SeriesUniqueID===n.value&&t.SeriesLegendName===n.selectedText});if(!BoldBIDashboard.isNullOrUndefined(r)){if(n.isChecked||i.length!==0){if(n.isChecked&&i.length>0)for(t=0;t<this.unselectedLegendInstance.length;t++)this.unselectedLegendInstance[t].SeriesUniqueID===i[0].SeriesUniqueID&&this.unselectedLegendInstance[t].SeriesLegendName===i[0].SeriesLegendName&&this.unselectedLegendInstance.splice(t,1)}else this.unselectedLegendInstance.push({SeriesUniqueID:n.value,SeriesLegendName:n.selectedText});this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.widgetJson.IsLegendDropdownAllSelected=this.unselectedLegendInstance.length===0,this.widgetJson.UnselectedLegendList=this.bbdesigner$.extend(!0,[],this.unselectedLegendInstance));this.showHideLegendSeriesVisibility(r.model.series,n.selectedText,n.isChecked);this.updateLegendDropdownAllTextBox(this.unselectedLegendInstance);r.redraw();this.designerInstance.modules.serialization.notifyChange()}}},n.prototype.showHideLegendSeriesVisibility=function(n,t,i,r){for(var u=0;u<n.length;u++)(t===n[u].name||r)&&(n[u].visibility=i?"visible":"hidden")},n.prototype.updateLegendDropdown=function(){this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.legendDropdownContainer.data("BoldBIDashboardDropDownList").option("dataSource",this.getLegendSeriesDisplayName()),this.updateUnselectedListItem(this.widgetJson.UnselectedLegendList),this.updateLegendDropdownAllTextBox(this.widgetJson.UnselectedLegendList))},n.prototype.updateUnselectedListItem=function(n){var i=this.chartModel.dataGroupBindedColumnInfo(),t;for(this.legendDropdownContainer.data("BoldBIDashboardDropDownList").checkAll(),this.isLegendListInteraction=!1,t=0;t<n.length;t++)i.rowLength>0?this.legendDropdownContainer.data("BoldBIDashboardDropDownList").unselectItemByText(n[t].SeriesLegendName):this.legendDropdownContainer.data("BoldBIDashboardDropDownList").unselectItemByValue(n[t].SeriesUniqueID);this.isLegendListInteraction=!0},n.prototype.updateLegendDropdownAllTextBox=function(n){this.bbdesigner$("#"+this.chartModel.designerId+"LegendDropDownAllElementCheckBox"+this.widgetJson.UniqueName).data("BoldBIDashboardCheckBox").option("checked",n.length===0);var t=this.updateLegendDropdownAllTextboxElement();n.length===0?t.text(this.locale.common.all):t.remove()},n.prototype.updateLegendDropdownAllSelection=function(n){var i,t;if(n.isInteraction){this.widgetJson.IsLegendDropdownAllSelected=this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design?n.isChecked:this.widgetJson.IsLegendDropdownAllSelected;var u=this.legendDropdownContainer.data("BoldBIDashboardDropDownList"),f=this.updateLegendDropdownAllTextboxElement(),e=this.chartModel.chartElement.find(".e-datavisualization-chart"),r=this.bbdesigner$(e[this.chartModel.DrillLevelInfo.length]).data("BoldBIDashboardChart"),o=BoldBIDashboard.isNullOrUndefined(r.model)?[]:r.model.series;if(this.unselectedLegendInstance=[],n.isChecked)f.text(this.locale.common.all),u.checkAll();else{for(i=this.getLegendSeriesDisplayName(),t=0;t<i.length;t++)this.unselectedLegendInstance.push({SeriesUniqueID:i[t].id,SeriesLegendName:i[t].text});u.unCheckAll();f.remove()}this.isLegendDropdownAllSelected=n.isChecked;this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.widgetJson.IsLegendDropdownAllSelected=n.isChecked,this.widgetJson.UnselectedLegendList=this.bbdesigner$.extend(!0,[],this.unselectedLegendInstance));this.showHideLegendSeriesVisibility(o,"",n.isChecked,!0);r.redraw();this.designerInstance.modules.serialization.notifyChange()}},n.prototype.updateLegendDropdownAllTextboxElement=function(){var t=this.legendDropdownContainer.parent().find("#LegendDropdownAllTextboxElement"+this.widgetJson.UniqueName),n;return t.length===0?(n=this.bbdesigner$('<span id="LegendDropdownAllTextboxElement'+this.widgetJson.UniqueName+'" class="e-chart-dropdown-all-text-box-element e-designer-fontfamily" style="color:'+this.designerInstance.modules.themeHelper.getDDWidgetDDLTextColor("combobox")+'"><\/span>'),this.legendDropdownContainer[0].insertAdjacentElement("afterend",n[0]),n):t},n.prototype.renderTrendLines=function(n,t,i){var r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0])),p,w,nt,e,o;if(BoldBIDashboard.isNullOrUndefined(n))o=this.designerInstance.element.find("#"+this.chartModel.designerId+"_Chart_trendline_grid_col").data("BoldBIDashboardGrid"),BoldBIDashboard.isNullOrUndefined(o)||(o.setModel({dataSource:this.widgetJson.TrendLineSettings}),this.chartModel.propertyPanel.updateItemVisibility("Chart","Trendline","Trendline",i.isVisible),r.trendLineEdit=!1,r.selectedGridData=null,r.chartProperties.designerInstance.element.find("#"+r.designerId+"_trendline_editicon").css("opacity","0.5").attr("disabled","disabled"),r.chartProperties.designerInstance.element.find("#"+r.designerId+"_trendline_delicon").css("opacity","0.5").attr("disabled","disabled"));else{var f=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-trendline-container","",{display:BoldBIDashboard.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.chartModel.designerId+"_"+t+"_"+i.name+"_container"}),s=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-trendline-leftdiv","",{},{id:this.chartModel.designerId+"_trendlineleft"}),h=BoldBIDashboard.buildTag("table.e-designer-table","",{},{unselectable:"on"}),c=BoldBIDashboard.buildTag("tr","",{display:"block"}),l=BoldBIDashboard.buildTag("td","",{}),tt=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-trendline-label",this.locale.chartTrendLineDialog.trendline,{},{type:"label"}),a=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-trendline-rightdiv","",{},{id:this.chartModel.designerId+"_trendlineright"}),v=BoldBIDashboard.buildTag("table.e-designer-table","",{"padding-right":"5px"},{unselectable:"on"}),y=BoldBIDashboard.buildTag("tr","",{display:"block"}),u=BoldBIDashboard.buildTag("td.e-toolbar","",{border:"none",display:"flex"});this.addDiv=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-chart-trendline boldbi-dashboarddesigner-chart-adddiv boldbi-dashboard-trendline-add","",{},{id:this.chartModel.designerId+"_trendline_addicon"});p=BoldBIDashboard.buildTag("span.e-icon e-plus bbi-designer-add-icon bbi-dbrd-designer-hoverable bbi-dbrd-background-theme","",{float:"right","font-size":"14px",padding:"4px 0px 0px 2px"},{id:this.chartModel.designerId+"_add_span","data-tooltip":this.locale.chartTrendLineDialog.Add});this.editDiv=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-chart-trendline boldbi-dashboarddesigner-chart-editdiv boldbi-dashboard-trendline-edit","",{},{id:this.chartModel.designerId+"_trendline_editicon",disabled:"disabled"});w=BoldBIDashboard.buildTag("span.bbi-designer-parameter-edit bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable bbi-dbrd-icon-background-theme","",{float:"right","font-size":"14px",padding:"3px"},{id:this.chartModel.designerId+"_edit_span","data-tooltip":this.locale.chartTrendLineDialog.Edit});this.deleteDiv=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-chart-trendline boldbi-dashboarddesigner-chart-deletediv boldbi-dashboard-trendline-delete","",{},{id:this.chartModel.designerId+"_trendline_delicon",disabled:"disabled"});var it=BoldBIDashboard.buildTag("span.bbi-designer-toolbar-delete bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable bbi-dbrd-icon-background-theme","",{float:"right","font-size":"14px",padding:"3px"},{id:this.chartModel.designerId+"_del_span","data-tooltip":this.locale.chartTrendLineDialog.Delete}),b=BoldBIDashboard.buildTag("div","",{},{id:this.chartModel.designerId+"_trendline_grid"}),k=BoldBIDashboard.buildTag("table.e-designer-table","",{width:"435px"},{unselectable:"on"}),d=BoldBIDashboard.buildTag("tr","",{}),g=BoldBIDashboard.buildTag("td","",{},{id:this.chartModel.designerId+"_Chart_trendline_grid_col"}),rt=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-separator e-horizontal","",{},{id:this.chartModel.designerId+"_trendline_separator1"}),ut=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-separator e-horizontal","",{},{id:this.chartModel.designerId+"_trendline_separator2"});n.append(f);f.append(s);s.append(h);h.append(c);c.append(l);l.append(tt);f.append(a);a.append(v);v.append(y);y.append(u);u.append(this.addDiv);this.addDiv.append(p);u.append(ut);u.append(this.editDiv);this.editDiv.append(w);u.append(rt);u.append(this.deleteDiv);this.deleteDiv.append(it);f.append(b);b.append(k);k.append(d);d.append(g);nt=this.widgetJson.TrendLineSettings;e=428/3;g.BoldBIDashboardGrid({dataSource:nt,columns:[{field:"Name",headerText:this.locale.chartTrendLineDialog.series,width:e},{field:"LineType",headerText:this.locale.chartTrendLineDialog.type,width:e},{field:"LineColor",headerText:this.locale.chartTrendLineDialog.color,width:e}],allowSelection:!0,allowResizing:!0,allowScrolling:!0,allowPaging:!1,scrollSettings:{allowVirtualScrolling:!1,virtualScrollMode:"normal",enableTouchScroll:!1,autoHide:!0,height:120},rowSelected:this.bbdesigner$.proxy(this.gridRowSelected,this),enableAltRow:!1})}},n.prototype.wireEvents=function(){this.designerInstance.element.on("click",".boldbi-dashboard-trendline-add",this.bbdesigner$.proxy(this.addTrendLine,this));this.designerInstance.element.on("click",".boldbi-dashboard-trendline-edit",this.bbdesigner$.proxy(this.editTrendLine,this));this.designerInstance.element.on("click",".boldbi-dashboard-trendline-delete",this.bbdesigner$.proxy(this.deleteTrendLine,this));this.designerInstance.element.on("click",".e-chart-axis-range-button",this.bbdesigner$.proxy(this.onAxisRangeClick,this));this.designerInstance.element.on("click",".e-chart-valueLabel-button",this.bbdesigner$.proxy(this.onValueLabelCustomize,this));this.designerInstance.element.on("click",".e-chart-widget-color-settings-button",this.bbdesigner$.proxy(this.openAdvancedColorSettings,this));this.designerInstance.element.on("click",".e-prop-chart-widget-color-settings-button",this.bbdesigner$.proxy(this.renderSeriesColorPalette,this))},n.prototype.unwireEvents=function(){this.designerInstance.element.off("click",".boldbi-dashboard-trendline-add",this.bbdesigner$.proxy(this.addTrendLine,this));this.designerInstance.element.off("click",".boldbi-dashboard-trendline-edit",this.bbdesigner$.proxy(this.editTrendLine,this));this.designerInstance.element.off("click",".boldbi-dashboard-trendline-delete",this.bbdesigner$.proxy(this.deleteTrendLine,this));this.designerInstance.element.off("click",".e-chart-axis-range-button",this.bbdesigner$.proxy(this.onAxisRangeClick,this));this.designerInstance.element.off("click",".e-chart-valueLabel-button",this.bbdesigner$.proxy(this.onValueLabelCustomize,this));this.designerInstance.element.off("click",".e-chart-widget-color-settings-button",this.bbdesigner$.proxy(this.openAdvancedColorSettings,this));this.designerInstance.element.off("click",".e-prop-chart-widget-color-settings-button",this.bbdesigner$.proxy(this.renderSeriesColorPalette,this))},n.prototype.addTrendLine=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0]));n.trendLineEdit=!1;n.trendLineId=BoldBIDashboard.getGuid("");n.chartProperties.designerInstance.element.find("#"+n.designerId+"_legendtext_drop").attr("textEdited","false");this.designer.modules.trendLineWindow.openTrendlineDialog(null,n,"updateTrendLineInfo")},n.prototype.editTrendLine=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0]));n.selectedGridData!==null&&(n.trendLineEdit=!0,this.designer.modules.trendLineWindow.openTrendlineDialog(n.selectedGridData,n,"updateTrendLineInfo"))},n.prototype.deleteTrendLine=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0]));n.selectedGridData!==null&&(n.selectedTrendlineIndex=n.chartProperties.designerInstance.element.find("#"+n.designerId+"_Chart_trendline_grid_col").data("BoldBIDashboardGrid").option("selectedRowIndex"),n.selectedTrendlineIndex!==-1&&n.getChartProperties().TrendLineSettings.splice(n.selectedTrendlineIndex,1),this.updateTrendLineInfo(n.getChartProperties().TrendLineSettings),n.chartProperties.designerInstance.element.find("#"+n.designerId+"_trendline_editicon").css("opacity","0.5").attr("disabled","disabled"),n.chartProperties.designerInstance.element.find("#"+n.designerId+"_trendline_delicon").css("opacity","0.5").attr("disabled","disabled"))},n.prototype.gridRowSelected=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0]));this.designerInstance.element.find("#"+this.chartModel.designerId+"_trendline_editicon").css("opacity","1").removeAttr("disabled");this.designerInstance.element.find("#"+this.chartModel.designerId+"_trendline_delicon").css("opacity","1").removeAttr("disabled");t.selectedGridData=n.data},n.prototype.onValueLabelCustomize=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0])),t=n.widgetJson.ForecastProperties.ForecastSettings.IsEnable;BoldBIDashboard.isNullOrUndefined(n)||n.Type!==ControlType.Chart||this.designer.modules.customValueLabelSettings.openValueLabelsettings(n,"updateValueLabelInfo",n.widgetJson.CustomValueLabels,t)},n.prototype.updateTrendLineInfo=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0])),i;if(n.length===undefined)if(t.trendLineEdit)for(i=0;i<t.getChartProperties().TrendLineSettings.length;i++)t.getChartProperties().TrendLineSettings[i].Id===n.Id&&(t.getChartProperties().TrendLineSettings[i]=n);else t.getChartProperties().TrendLineSettings.push(n);t.trendLineEdit=!1;BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateTrendLineToAllSeries(t,t.chartObj.model.series);t.chartObj.redraw();t.chartProperties.designerInstance.element.find("#"+t.designerId+"_Chart_trendline_grid_col").data("BoldBIDashboardGrid").setModel({dataSource:t.getChartProperties().TrendLineSettings});this.chartModel.propertyPanel.refreshScroller();t.chartProperties.designerInstance.element.find("#"+t.designerId+"_trendline_editicon").css("opacity","0.5").attr("disabled","disabled");t.chartProperties.designerInstance.element.find("#"+t.designerId+"_trendline_delicon").css("opacity","0.5").attr("disabled","disabled");t.selectedGridData=null;this.designerInstance.modules.serialization.notifyChange()},n.prototype.updateDataGroupPropertyVisibility=function(n,t){this.widgetJson.CustomLegendBtnVisibilty=n;this.widgetJson.IsColorPaletteCategoryVisible=t;this.chartModel.propertyPanel.updateItemVisibility("Chart","LegendSettings","CustomLegend",n&&this.widgetJson.ShowLegend);this.chartModel.propertyPanel.updateCategoryVisibility("Chart","SeriesPalette",t&&n);this.setPropertyElement("SeriesPalette","UseDefaultPalette",this.widgetJson.IsDefaultColorPalette);this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","ChartType",this.isShapeChartType(this.widgetJson.ChartType));this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","ChartTypeAndAxis",n&&!this.isShapeChartType(this.widgetJson.ChartType));this.chartModel.propertyPanel.updateItemVisibility("Chart","BasicSettings","ShowMarker",!BoldBIDashboard.isNullOrUndefined(this.getChartObject())&&this.chartModel.isMarkerVisible(this.getChartObject().model.series))},n.prototype.updatePropertyItems=function(n,t,i){n!==0&&t!==0||n!==0&&i!==0?this.chartModel.propertyPanel.updateItemDisable("bool","Chart","Filter","ActAsMasterWidget",!1):this.chartModel.propertyPanel.updateItemDisable("bool","Chart","Filter","ActAsMasterWidget",!0)},n.prototype.updateAdvanceColorPropertyVisiblity=function(){if(this.isShapeChartType(this.widgetJson.ChartType)){var n=this.chartModel.dataGroupBindedColumnInfo().columnLength>0;this.chartModel.propertyPanel.updateItemVisibility("Chart","SeriesPalette","AdvanceColorPalette",n);this.chartModel.propertyPanel.updateItemVisibility("Chart","SeriesPalette","SeriesColorPalette",this.widgetJson.EnableColorSettings);this.chartModel.propertyPanel.updateItemVisibility("Chart","SeriesPalette","UseDefaultPalette",!n);n&&this.updateDefaultPaletteVisibility(!0,n)}},n.prototype.onCustomLegendClick=function(){this.designer.modules.customLegendSettings.openLegendSettings(this,"updateCustomLegend",this.widgetJson.CustomLegendInfo)},n.prototype.updateCustomLegend=function(n){var i,t,r;for(this.widgetJson.IsCustomLegend=!0,this.widgetJson.CustomLegendInfo=n,i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),this.updateCustomLegendValuesToChartObj(r,!0);this.designerInstance.modules.serialization.notifyChange();BoldBIDashboardDesigner.editManager.setMergeAction(!1)},n.prototype.updateChartSettingsForDrilledCharts=function(){for(var i,t=this.chartModel.chartElement.find(".e-datavisualization-chart"),n=0;n<t.length;n++)i=this.bbdesigner$(t[n]).data("BoldBIDashboardChart"),this.updateCustomLegendValuesToChartObj(i)},n.prototype.updateCustomLegendValuesToChartObj=function(n,t){var u=this.chartModel.dataGroupBindedColumnInfo(),l,r,s,f,i,a,y,h,e,o,p,v,c;if(!BoldBIDashboard.isNullOrUndefined(n)&&u.valueLength>0&&u.rowLength===0||this.isShapeChartType(this.widgetJson.ChartType)){var f=n.model.series,w=this.widgetJson.ForecastProperties.ForecastSettings.IsEnable,b=w?1:n.model.series.length;for(i=0;i<b;i++)if(this.isShapeChartType(this.widgetJson.ChartType)){if(l=this.chartModel.dataGroupBindedColumnInfo(),l.valueLength>0&&l.columnLength===0)for(r=0;r<n.model.series[i].points.length;r++)s=this.widgetJson.CustomLegendInfo.GroupValues.Values,n.model.series[i].points[r].text=this.chartModel.DataColumnBindings[f[i].points[r].id],n.model.series[i].points[r].x=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getCustomLegendItem(f[i].points[r].id,s)}else s=this.widgetJson.CustomLegendInfo.GroupValues.Values,n.model.series[i].name=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getCustomLegendItem(f[i].id,s)}else if(!this.isShapeChartType(this.widgetJson.ChartType)&&!BoldBIDashboard.isNullOrUndefined(this.chartModel.chartObj)&&u.valueLength>0&&u.rowLength>0&&this.widgetJson.CustomLegendInfo.Type===CustomLegendType.Individual)for(f=n.model.series,i=0;i<f.length;i++)a=n.model.series[i].rowValue+" ("+BoldBIDashboard.DashboardUtil.getFieldBasedonUniqueColumnName(n.model.series[i].id,this.chartModel.DataGroupInfo).DisplayName+")",n.model.series[i].legendName=a,n.model.series[i].name=this.getSingleCustomLegendItem(a);else if(!this.isShapeChartType(this.widgetJson.ChartType)&&!BoldBIDashboard.isNullOrUndefined(this.chartModel.chartObj)&&u.valueLength>0&&u.rowLength>0&&this.widgetJson.CustomLegendInfo.Type===CustomLegendType.Group){for(y=this.widgetJson.CustomLegendInfo.Format,h=[],e=0;e<this.widgetJson.CustomLegendInfo.GroupValues.Series.length;e++)for(o=0;o<this.widgetJson.CustomLegendInfo.GroupValues.Values.length;o++){var k=this.widgetJson.CustomLegendInfo.GroupValues.Values[o].Value,d=this.widgetJson.CustomLegendInfo.GroupValues.Series[e].Value,g=this.widgetJson.CustomLegendInfo.GroupValues.Values[o].Name,nt=this.widgetJson.CustomLegendInfo.GroupValues.Series[e].Name,tt=nt+" ("+g+")",it=y.replace(new RegExp("{{:Row}}","g"),d).replace(new RegExp("{{:Value}}","g"),k);h.push({LegendName:tt,CustomLegendName:it})}for(p=function(t){var i=n.model.series[t].rowValue+" ("+BoldBIDashboard.DashboardUtil.getFieldBasedonUniqueColumnName(n.model.series[t].id,v.chartModel.DataGroupInfo).DisplayName+")";n.model.series[t].name=v.getSeriesCustomLegendItem(h,i);n.model.series[t].legendName=h.filter(function(n){return n.LegendName===i})[0].LegendName},v=this,c=0;c<n.model.series.length;c++)p(c)}t&&this.destroyDropdowLegendContainer();BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateLegendDropdownDataToChart(this.widgetJson,n,this.chartModel);n.redraw()},n.prototype.getSingleCustomLegendItem=function(n){for(var t=0;t<this.widgetJson.CustomLegendInfo.SingleValues.length;t++)if(this.widgetJson.CustomLegendInfo.SingleValues[t].Name===n)return this.widgetJson.CustomLegendInfo.SingleValues[t].Value;return n},n.prototype.getSeriesCustomLegendItem=function(n,t){for(var i=0;i<n.length;i++)if(n[i].LegendName===t)return n[i].CustomLegendName;return t},n.prototype.openColorPalette=function(n,t,i){if(this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design)if(this.chartModel.getChartProperties().IsDefaultColorPalette&&BoldBIDashboard.isNullOrUndefined(n)){var r=this.chartModel.designerInstance.element.find(".e-color-palette-container");r.css("display","none")}else this.designer.modules.colorPalette.openColorPalette(n,t,i,this,"updateColorPalette",this.widgetJson.ColorMappingType.toLocaleLowerCase()==="data"?this.widgetJson.ColorPaletteModel:this.widgetJson.IndexColorPalette)},n.prototype.updateModifiedColorToWidget=function(n,t){var h,o,l,f,s,r;if(t===void 0&&(t=null),h=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(this.chartModel.DataGroupInfo),(BoldBIDashboard.isNullOrUndefined(n)||n.Type===ColorCustomizationType.Individual)&&(this.chartModel.isAdvanceColorSupported()||this.isShapeChartType(this.widgetJson.ChartType)))if(this.widgetJson.EnableColorSettings&&!BoldBIDashboard.isNullOrUndefined(n)&&n.SolidColorInfo.length!==0){var i=[],e=this.chartModel.getBreadcrumbDatasource(),c=e.length>0,u=this.getDataGroupID();if(u.length<n.SolidColorInfo.length){for(o=[],l=function(t){o.push(n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===u[t].UniqueColumnName})[0])},r=0;r<u.length;r++)l(r);n.SolidColorInfo=o}c?n.SolidColorInfo.length>0&&(n.SolidColorInfo[0].ColorMappingType==="Data"?(f=n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===e[e.length-1].columnId}),i=f.length>0?f[0].DefaultColorSets:i):n.SolidColorInfo[0].ColorMappingType==="Index"&&(f=n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===e[e.length-1].columnId}),i=f.length>0?f[0].IndexColorPalette:i)):n.SolidColorInfo[0].ColorMappingType==="Data"?i=n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===u[0].UniqueColumnName}).length>0?n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===u[0].UniqueColumnName})[0].DefaultColorSets:i:n.SolidColorInfo[0].ColorMappingType==="Index"&&(i=n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===u[0].UniqueColumnName}).length>0?n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===u[0].UniqueColumnName})[0].IndexColorPalette:i);this.chartModel.isExistingChart&&!BoldBIDashboard.isNullOrUndefined(t)&&c&&this.updateColorPaletteName(i,t);this.isShapeChartType(this.widgetJson.ChartType)?i.length===0?this.updateChartColor(this.getModifiedColorPalette()):this.updateProportionChartColorBasedOnValue(i):this.updateCartesianColor(i)}else if(!BoldBIDashboard.isNullOrUndefined(this.widgetJson.DefaultColors)&&this.widgetJson.DefaultColors.length>0&&h.rowLength===0){for(s=[],r=0;r<this.widgetJson.DefaultColors.length;r++)s.push(this.widgetJson.DefaultColors[r].Color);this.updateChartColor(s)}},n.prototype.updateProportionChartColorBasedOnValue=function(n){for(var i,t,f,u=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),r=0;r<u.length;r++){if(i=this.bbdesigner$(u[r]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(i))for(i.model.palette=this.bbdesigner$.extend(!0,[],BoldBIDashboard.DashboardUtil.defaultColorPalette),t=0;t<i.model.series[0].points.length;t++)f=i.model.series[0].points[t].x,i.model.series[0].points[t].fill=this.widgetJson.ColorCustomization.SolidColorInfo[0].ColorMappingType==="Data"?this.getColorForIndividualSection(f,n):!BoldBIDashboard.isNullOrUndefined(n[t])&&!BoldBIDashboard.isNullOrUndefined(n[t].Color)?n[t].Color:n[t%n.length].Color,BoldBIDashboard.isNullOrUndefined(i.model.palette[t])||i.model.series[0].points[t].fill===""||(i.model.palette[t]=i.model.series[0].points[t].fill);i.redraw()}},n.prototype.getColorForIndividualSection=function(n,t){for(var r="",i=0;i<t.length;i++)if(t[i].Name.toString()===n.toString()){r=t[i].Color;break}return r},n.prototype.updateColorPaletteName=function(n,t){for(var r=JSON.parse(t),u=BoldBIDashboard.isNullOrUndefined(this.chartModel.DrillLevelInfo)?0:this.chartModel.DrillLevelInfo.length,i=0;i<r.length;i++)n[i].Name=this.getDataGroupID().length>0?r[i][this.getDataGroupID()[u].UniqueColumnName]:"",n[i].IsEdited=!0},n.prototype.updateExistingChartColor=function(){var t=[],e=this.widgetJson.ColorPaletteModel,o=this.chartModel.dataValues.data.length>0?JSON.parse(this.chartModel.dataValues.data):[],i=BoldBIDashboard.isNullOrUndefined(this.widgetJson.ColorCustomization)?new ColorCustomization:this.widgetJson.ColorCustomization,r,u,n,f;for(this.getSolidColorInfo(i,this.chartModel),r=0;r<i.SolidColorInfo.length;r++){for(t=i.SolidColorInfo[r].DefaultColorSets,u=0;u<e.length;u++)t[u].Color=e[u].Value;for(n=0;n<o.length;n++)n>=t.length&&(f=new DefaultColorSet,f.Color=this.chartModel.defaultColorPalette[n%this.chartModel.defaultColorPalette.length],t.push(f)),t[n].Name=this.getDataGroupID().length>0?o[n][this.getDataGroupID()[0].UniqueColumnName]:"",t[n].IsEdited=r===0?!0:!1}i.Type=ColorCustomizationType.Individual;this.widgetJson.ColorCustomization=i;this.widgetJson.ColorPaletteModel=[];this.chartModel.isExistingChart=!0;this.widgetJson.IsDefaultColorPalette=!0;this.widgetJson.EnableColorSettings=!0;this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.designerInstance.modules.serialization.notifyChange()},n.prototype.updateColorPalette=function(n){var r=[],i,t;this.widgetJson.EnableColorSettings&&BoldBIDashboard.isNullOrUndefined(n.textValue)?(this.updateModifiedColorToWidget(n),this.widgetJson.ColorCustomization=n):(i=n.textValue,t=n.rowIndex,r=this.getModifiedColorPalette(),r[t]=i,this.widgetJson.ColorMappingType==="Data"?(this.widgetJson.ColorPaletteModel[t].Value=i,this.widgetJson.ColorPaletteModel[t].IsModified=!0):this.widgetJson.ColorMappingType==="Index"&&(this.widgetJson.IndexColorPalette[t].Value=i,this.widgetJson.IndexColorPalette[t].IsModified=!0),this.updateChartColor(r),this.designerInstance.modules.serialization.notifyChange(),BoldBIDashboardDesigner.editManager.setMergeAction(!1))},n.prototype.updateChartColor=function(n){this.updateColorPaletteToChartWidget(n)},n.prototype.updateColorPaletteToChartWidget=function(n){for(var u=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),i=this.widgetJson.ColorMappingType==="Data"?this.widgetJson.ColorPaletteModel:this.widgetJson.IndexColorPalette,f=function(r){var f=t.bbdesigner$(u[r]).data("BoldBIDashboardChart"),o,e;if(!BoldBIDashboard.isNullOrUndefined(f)){for(f.model.palette=n,o=function(r){for(var o,u,e=0;e<i.length;e++)if(t.widgetJson.ColorMappingType==="Data"){if(o=t.chartModel.getChartProperties().CustomLegendInfo.Type!==CustomLegendType.Group?t.isShapeChartType(t.widgetJson.ChartType)?f.model.series[r].name:t.widgetJson.CustomLegendInfo.SingleValues.filter(function(n){return n.Name===f.model.series[r].legendName}).length>0?t.widgetJson.CustomLegendInfo.SingleValues.filter(function(n){return n.Name===f.model.series[r].legendName})[0].Name:f.model.series[r].Name:f.model.series[r].legendName,o===i[e].Name){if(f.model.series[r].fill=n[e],t.isShapeChartType(t.widgetJson.ChartType)||t.chartModel.isAdvanceColorSupported()){for(u=0;u<f.model.series[r].points.length;u++)t.widgetJson.IsDefaultColorPalette||(f.model.series[r].points[u].fill=null),f.model.legend.title.text=t.widgetJson.LegendTitle;t.resetLegendProperty(f,!0)}}else if(t.isShapeChartType(t.widgetJson.ChartType)&&t.widgetJson.IsDefaultColorPalette){for(u=0;u<f.model.series[r].points.length;u++)f.model.series[r].points[u].fill=n[u];t.resetLegendProperty(f,!0)}}else if(t.widgetJson.ColorMappingType==="Index"){if(f.model.series[r].fill=!BoldBIDashboard.isNullOrUndefined(i[r%i.length])&&!BoldBIDashboard.isNullOrUndefined(i[r%i.length].Value)?i[r%i.length].Value:i[r%i.length].Value,t.isShapeChartType(t.widgetJson.ChartType)||t.chartModel.isAdvanceColorSupported()){for(u=0;u<f.model.series[r].points.length;u++)t.widgetJson.IsDefaultColorPalette||(f.model.series[r].points[u].fill=null),f.model.legend.title.text=t.widgetJson.LegendTitle;t.resetLegendProperty(f,!0)}}else if(t.isShapeChartType(t.widgetJson.ChartType)&&t.widgetJson.IsDefaultColorPalette)for(u=0;u<f.model.series[r].points.length;u++)f.model.series[r].points[u].fill=n[u]},e=0;e<f.model.series.length;e++)o(e);t.updateCartesianLegendVisiblity(f)}f.redraw()},t=this,r=0;r<u.length;r++)f(r)},n.prototype.updateCartesianLegendVisiblity=function(n){var i=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.chartModel.CellInfo),t;BoldBIDashboard.isNullOrUndefined(n)||(n=BoldBIDashboard.isNullOrUndefined(n.model)?n:n.model,t=!this.widgetJson.EnableColorSettings&&this.widgetJson.ShowLegend&&!this.widgetJson.ShowLegendAsDropDown&&i.ShowLegend&&(n.series.length>1||this.chartModel.getBindedColumns().rowColumns.length>0),!BoldBIDashboard.isNullOrUndefined(this.widgetJson.ColorCustomization)&&this.chartModel.isAdvanceColorSupported()&&this.widgetJson.EnableColorSettings&&this.widgetJson.ColorCustomization.Type===ColorCustomizationType.Individual&&this.widgetJson.ShowLegend?n.legend.visible=t:this.widgetJson.EnableColorSettings||BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(this.widgetJson.ChartType)||(n.legend.visible=t))},n.prototype.updateCartesianColor=function(n,t){var h,c,l,r,i,a,o,s,f;if(t===void 0&&(t=!1),h=this.chartModel.dataGroupBindedColumnInfo(),c=this.chartModel.DrillLevelInfo.length,h.rowLength>0)if(this.widgetJson.DefaultColors.length>0){for(s=[],f=0;f<this.widgetJson.DefaultColors.length;f++)s.push(this.widgetJson.DefaultColors[f].Color);this.updateChartColor(s)}else this.updateChartColor(this.chartModel.defaultColorPalette);else{if(l=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),r=this.bbdesigner$(l[c]).data("BoldBIDashboardChart"),this.resetLegendProperty(r,t),!BoldBIDashboard.isNullOrUndefined(r)){var e=r.model.series,u=e.length!==0?e[0].points:[],v=this.widgetJson.DefaultColors.length>0?this.widgetJson.DefaultColors[0].Color:this.chartModel.defaultColorPalette[0];for(r.model.palette=BoldBIDashboard.DashboardUtil.defaultColorPalette,e[0].fill=v,i=0;i<u.length;i++)if(a=u[i].x,n.length>0)for(o=0;o<n.length;o++){u[i].fill=this.widgetJson.ColorCustomization.SolidColorInfo[0].ColorMappingType==="Data"?this.getColorForIndividualSection(a,n):!BoldBIDashboard.isNullOrUndefined(n[i])&&!BoldBIDashboard.isNullOrUndefined(n[i].Color)?n[i].Color:n[i%n.length].Color;break}else u[i].fill=null,r.model.legend.mode="series",r.model.legend.title.text=this.widgetJson.LegendTitle}this.updateCartesianLegendVisiblity(r);r.redraw()}},n.prototype.resetLegendProperty=function(n,t){t?(n.model.legend.mode="series",n.model.legend.enableMultiRange=!1,n.model.legend.shape=this.widgetJson.LegendShape.replace(/\s/g,""),n.model.legend.toggleSeriesVisibility=!0,n.model.rangeColorMapping=[]):BoldBIDashboard.isNullOrUndefined(this.widgetJson.ColorCustomization)||this.widgetJson.ColorCustomization.Type!==ColorCustomizationType.Individual||(n.model.rangeColorMapping=[],n.model.legend.mode="point",n.model.legend.toggleSeriesVisibility=this.widgetJson.ColorCustomization.Type===ColorCustomizationType.Individual)},n.prototype.getChartPropertyPanel=function(){var u=this.chartModel.getUpdatedSeriesAxisCount(),t=u.primaryValueLength>0||this.widgetJson.ChartSeriesTypeInfo.length===0,i=u.secondaryValueLength>0,o=BoldBIDashboard.DashboardUtil.getConfiguredColumns(this.chartModel.DataGroupInfo),s=this.chartModel.dataGroupBindedColumnInfo().rowLength!==0,h=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isForecastApplicable(this.chartModel)&&!this.chartModel.isActAsSlaveForAnyPoP,e=this.chartModel.dataGroupBindedColumnInfo(),f=this.isShapeChartType(this.widgetJson.ChartType)&&e.columnLength>0,n=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designer,this.widgetJson.FilterSettings,this.chartModel.ControlContainer,this.chartModel.ControlHeader,this.chartModel.DataGroupInfo,this.widgetJson.ContainerSettings),r=this.getChartObject();return this.chartModel.setContainerProperty(n.containerProperties),n.propertyGridItems.Header=this.widgetJson.ContainerSettings.Title,n.propertyGridItems.SubTitle=this.widgetJson.ContainerSettings.SubTitle,n.propertyGridItems.Description=this.widgetJson.ContainerSettings.Description,n.propertyGridItems.Type="Chart",n.linkingProperty.Items[0].value=this.chartModel.useExistingLink(),n.propertyGridItems.Items=[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"ShowTooltip",displayName:this.locale.propertyPanel.basicSettings.showTooltip,value:this.widgetJson.ShowTooltip,itemType:"bool"},{name:"ShowValueInTooltip",displayName:this.locale.propertyPanel.basicSettings.showValueInTooltip,value:this.widgetJson.ShowValueInTooltip,itemType:"bool",isVisible:this.widgetJson.ShowTooltip&&this.chartModel.getVisibilityForShowValueAndPercent()},{name:"ChartType",displayName:this.locale.propertyPanel.basicSettings.chartType,value:this.widgetJson.ChartType,itemType:"dropdown",valueList:["Pie","Doughnut","Pyramid","Funnel"],isVisible:this.isShapeChartType(this.widgetJson.ChartType)},{name:"ChartTypeAndAxis",displayName:this.locale.propertyPanel.basicSettings.chartTypeandAxis,isVisible:!this.isShapeChartType(this.widgetJson.ChartType)&&this.chartModel.DrillLevelInfo.length===0&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.ChartSeriesTypeInfo)&&this.widgetJson.ChartSeriesTypeInfo.length>0,itemType:"button",buttonText:this.locale.propertyPanel.changeButtonText,callbackInstance:this,callbackMethod:"renderChartSeriesTypeDialog"},{name:"EnableAnimation",displayName:this.locale.propertyPanel.basicSettings.enableAnimation,isVisible:this.widgetJson.ChartType===ChartTypes.Pyramid.toString()||this.widgetJson.ChartType===ChartTypes.Funnel.toString()?!1:!0,value:this.widgetJson.EnableAnimation,itemType:"bool"},{name:"EnableMultiSelection",displayName:this.locale.propertyPanel.basicSettings.enableMultiSelect,value:this.widgetJson.EnableMultiSelection,itemType:"bool",isVisible:this.widgetJson.FilterSettings.ActAsMasterWidget&&e.rowLength===0&&e.columnLength===1},{name:"Radius",displayName:this.locale.propertyPanel.basicSettings.doughnutRadiusText,isVisible:this.widgetJson.ChartType===ChartTypes.Doughnut.toString()?!0:!1,value:this.widgetJson.Radius,decimalPlaces:1,itemType:"float",minimum:.1,maximum:.9,interval:.1,unitType:"pt"},{name:"ShowValueLabels",displayName:this.locale.propertyPanel.basicSettings.showValueLabels,value:this.widgetJson.ShowValueLabels,itemType:"object",callbackInstance:this,callbackMethod:"renderValueLabelsSetting"},{name:"ValueLabelForground",displayName:this.locale.propertyPanel.basicSettings.chartLabelColor,isVisible:this.widgetJson.ShowValueLabels,value:this.isStackedTypeChart(this.widgetJson.ChartType)&&!this.widgetJson.ValueLabel.IsEdited?"#ffffff":this.widgetJson.ValueLabel.Color,itemType:"color"},{name:"ValueLabelPosition",displayName:this.locale.propertyPanel.basicSettings.valueLabelPosition,isVisible:BoldBIDashboard.DashboardDesignerUtility.ChartHelper.ValueLabelPositionVisibility(this.widgetJson),itemType:"dropdown",value:this.widgetJson.ValueLabelPosition,valueList:[this.locale.propertyPanel.valueLabelPlacement.auto,this.locale.propertyPanel.valueLabelPlacement.top,this.locale.propertyPanel.valueLabelPlacement.middle,this.locale.propertyPanel.valueLabelPlacement.bottom]},{name:"ValueLabelRotation",displayName:this.locale.propertyPanel.basicSettings.valueLabelRotation,isVisible:!this.isShapeChartType(this.widgetJson.ChartType)&&this.widgetJson.ShowValueLabels,itemType:"dropdown",value:this.widgetJson.ValueLabelRotation==="None"?"0"+String.fromCharCode(176):this.widgetJson.ValueLabelRotation+String.fromCharCode(176),valueList:["-90"+String.fromCharCode(176),"-45"+String.fromCharCode(176),"0"+String.fromCharCode(176),"+45"+String.fromCharCode(176),"+90"+String.fromCharCode(176)]},{name:"DataLabel",displayName:this.locale.propertyPanel.basicSettings.dataLabel,isVisible:this.isShapeChartType(this.widgetJson.ChartType)&&this.widgetJson.ShowValueLabels,itemType:"dropdown",value:this.widgetJson.DataLabel,valueList:["Category","Value","Percentage","Category And Value","Category And Percentage","Value And Percentage","All Details"]},{name:"ShowValueLabelSuffix",displayName:this.locale.propertyPanel.basicSettings.valueLabelSuffix,isVisible:this.widgetJson.ShowValueLabels,value:this.widgetJson.ShowValueLabelSuffix,itemType:"bool"},{name:"ValueLabelSuffix",displayName:this.locale.propertyPanel.basicSettings.suffixValue,value:this.widgetJson.ValueLabelSuffix,itemType:"string",isVisible:this.widgetJson.ShowValueLabels&&this.widgetJson.ShowValueLabelSuffix,bindParameterMethod:"wireEventsForPropertyItem",callbackInstance:this},{name:"ShowMarker",displayName:this.locale.propertyPanel.basicSettings.showMarker,value:this.widgetJson.ShowMarker,isVisible:!BoldBIDashboard.isNullOrUndefined(r)&&this.chartModel.isMarkerVisible(r.model.series),itemType:"bool"},{name:"ShowNoDataItem",displayName:this.locale.propertyPanel.basicSettings.showItemsWithNoData,value:this.widgetJson.ShowNoDataItem,isVisible:this.chartModel.isCartesianChartType(this.widgetJson.ChartType),itemType:"bool"},{name:"EmptyPointMode",displayName:this.locale.propertyPanel.basicSettings.emptyPointMode,value:BoldBIDashboard.DashboardDesignerUtility.ChartHelper.emptyPointmodeFillVisibilty(this.widgetJson.ChartSeriesTypeInfo)?this.widgetJson.EmptyPointMode:this.widgetJson.EmptyPointMode==this.locale.propertyPanel.emptyPointMode.connect?EmptyPointMode.Gap:this.widgetJson.EmptyPointMode,isVisible:this.chartModel.isCartesianChartType(this.widgetJson.ChartType),itemType:"dropdown",valueList:BoldBIDashboard.DashboardDesignerUtility.ChartHelper.emptyPointmodeFillVisibilty(this.widgetJson.ChartSeriesTypeInfo)?[this.locale.propertyPanel.emptyPointMode.gap,this.locale.propertyPanel.emptyPointMode.zero,this.locale.propertyPanel.emptyPointMode.average,this.locale.propertyPanel.emptyPointMode.connect]:[this.locale.propertyPanel.emptyPointMode.gap,this.locale.propertyPanel.emptyPointMode.zero,this.locale.propertyPanel.emptyPointMode.average]},{name:"ColumnWidth",isVisible:BoldBIDashboard.DashboardDesignerUtility.ChartHelper.columnSpacingAndWidthVisibilty(this.widgetJson.ChartSeriesTypeInfo),displayName:this.locale.propertyPanel.basicSettings.chartSeriesColumnWidth,value:this.widgetJson.ColumnWidth,itemType:"float",decimalPlaces:1,minimum:.1,maximum:1,interval:.1,unitType:"pt"},{name:"ColumnSpacing",isVisible:BoldBIDashboard.DashboardDesignerUtility.ChartHelper.columnSpacingAndWidthVisibilty(this.widgetJson.ChartSeriesTypeInfo),displayName:this.locale.propertyPanel.basicSettings.chartSeriesColumnSpacing,value:this.widgetJson.ColumnSpacing,itemType:"float",decimalPlaces:1,minimum:0,maximum:1,interval:.1,unitType:"pt"},{name:"EnableSmoothScroll",displayName:this.locale.propertyPanel.basicSettings.enableSmoothScroll,value:this.widgetJson.EnableSmoothScroll,isVisible:!this.isShapeChartType(this.widgetJson.ChartType),itemType:"bool"},{name:"PageSize",isVisible:!0,displayName:this.locale.propertyPanel.basicSettings.pageSize,value:this.widgetJson.PageSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:Number.MAX_VALUE,unitType:"pt"},{name:"Chartsize",displayName:this.locale.propertyPanel.basicSettings.chartSize,isVisible:this.widgetJson.ChartType===ChartTypes.Pie.toString()||this.widgetJson.ChartType===ChartTypes.Doughnut.toString(),value:this.widgetJson.Chartsize,decimalPlaces:1,itemType:"float",minimum:.1,maximum:1,interval:.1,unitType:"pt"},{name:"LineStyle",displayName:this.locale.propertyPanel.chartLineStyleSettings.lineStyleText,isVisible:this.widgetJson.ChartType===ChartTypes.Line.toString()||this.widgetJson.ChartType===ChartTypes.Spline.toString(),itemType:"button",buttonText:this.locale.propertyPanel.chartLineStyleSettings.lineStyleCustomizeBtnText,callbackInstance:this,callbackMethod:"renderLineStyleCustomization"}]},{CategoryName:"SeriesSettings",DisplayName:this.locale.propertyPanel.seriesSettingsCategory,IsVisible:this.isShapeChartType(this.widgetJson.ChartType)&&this.chartModel.getFixedSeriesSettingsVisibility(),Items:[{name:"EnableFixedSeries",displayName:this.locale.propertyPanel.seriesSettings.fixedRowsAndColumnsText,value:this.widgetJson.FixedSeriesSettings.IsFixedRowsAndColumns,itemType:"bool"},{name:"FixedRowCount",isVisible:this.widgetJson.FixedSeriesSettings.IsFixedRowsAndColumns,displayName:this.locale.propertyPanel.seriesSettings.rowCountText,value:this.widgetJson.FixedSeriesSettings.RowCount,itemType:"float",decimalPlaces:0,interval:1,minimum:1,maximum:15},{name:"FixedColumnCount",isVisible:this.widgetJson.FixedSeriesSettings.IsFixedRowsAndColumns,displayName:this.locale.propertyPanel.seriesSettings.columnCountText,value:this.widgetJson.FixedSeriesSettings.ColumnCount,itemType:"float",decimalPlaces:0,interval:1,minimum:1,maximum:15},]},{CategoryName:"Legend Settings",DisplayName:this.locale.propertyPanel.legendSettingsText,Items:[{name:"ShowLegend",displayName:this.locale.propertyPanel.basicSettings.showLegend,value:BoldBIDashboard.isNullOrUndefined(this.widgetJson.ShowLegend)?!1:this.widgetJson.ShowLegend,itemType:"bool"},{name:"ShowLegendAsDropDown",displayName:this.locale.propertyPanel.basicSettings.showLegendAsDropDown,value:this.widgetJson.ShowLegendAsDropDown,isDisable:this.widgetJson.EnableColorSettings,itemType:"bool",isVisible:!1},{name:"LegendLabelForground",displayName:this.locale.propertyPanel.basicSettings.chartLabelColor,isVisible:BoldBIDashboard.isNullOrUndefined(this.widgetJson.ShowLegend)?!1:this.widgetJson.ShowLegend,isDisable:this.widgetJson.ShowLegendAsDropDown&&!this.widgetJson.EnableColorSettings,value:this.widgetJson.LegendLabel.Color,itemType:"color"},{name:"CustomLegend",displayName:this.locale.propertyPanel.basicSettings.legend,isVisible:!BoldBIDashboard.isNullOrUndefined(this.widgetJson.ShowLegend)&&this.widgetJson.ShowLegend&&this.widgetJson.CustomLegendBtnVisibilty?this.widgetJson.CustomLegendBtnVisibilty:!1,itemType:"button",buttonText:this.locale.propertyPanel.customizeBtnText,callbackInstance:this,callbackMethod:"onCustomLegendClick"},{name:"LegendPosition",displayName:this.locale.propertyPanel.basicSettings.legendPositioning,isVisible:!BoldBIDashboard.isNullOrUndefined(this.widgetJson.ShowLegend)&&this.widgetJson.ShowLegend,isDisable:this.widgetJson.ShowLegendAsDropDown&&!this.widgetJson.EnableColorSettings,itemType:"dropdown",value:this.widgetJson.LegendPosition,valueList:this.isShapeChartType(this.widgetJson.ChartType)?["Right","Left","Top","Bottom"]:["Auto","Top","Left","Right","Bottom"]},{name:"LegendShape",displayName:this.locale.propertyPanel.basicSettings.legendShapeListText,isVisible:!BoldBIDashboard.isNullOrUndefined(this.widgetJson.ShowLegend)&&this.widgetJson.ShowLegend,isDisable:this.widgetJson.ShowLegendAsDropDown&&!this.widgetJson.EnableColorSettings,itemType:"dropdown",value:this.widgetJson.LegendShape==="SeriesType"?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendShape,this.widgetJson.LegendShape):this.widgetJson.LegendShape,valueList:["Circle","Series Type"]},{name:"LegendTitle",displayName:this.locale.propertyPanel.basicSettings.legendTitleListText,isVisible:!BoldBIDashboard.isNullOrUndefined(this.widgetJson.ShowLegend)&&this.widgetJson.ShowLegend,value:this.widgetJson.LegendTitle,placeHolder:this.locale.common.auto,itemType:"string"},{name:"LegendTextOverFlow",displayName:this.locale.propertyPanel.basicSettings.legendTextOverFlow,isVisible:!BoldBIDashboard.isNullOrUndefined(this.widgetJson.ShowLegend)&&this.widgetJson.ShowLegend,isDisable:this.widgetJson.ShowLegendAsDropDown&&!this.widgetJson.EnableColorSettings,itemType:"dropdown",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendTextOverFlow,this.widgetJson.LegendTextOverFlow),valueList:["None","Trim","Wrap"]},{name:"LegendTextwidth",displayName:this.locale.propertyPanel.basicSettings.textwidth,isVisible:!BoldBIDashboard.isNullOrUndefined(this.widgetJson.ShowLegend)&&this.widgetJson.ShowLegend,value:this.widgetJson.LegendTextWidth,isDisable:this.widgetJson.ShowLegendAsDropDown&&!this.widgetJson.EnableColorSettings,decimalPlaces:0,itemType:"float",minimum:34,maximum:500,interval:1},]},{CategoryName:"Forecast Settings",DisplayName:this.locale.propertyPanel.forecastSettingsText,IsVisible:h,Items:[{name:"IsEnableForecast",displayName:this.locale.propertyPanel.forecastSettings.enable,value:this.widgetJson.ForecastProperties.ForecastSettings.IsEnable,itemType:"bool"},{name:"Length",displayName:this.locale.propertyPanel.forecastSettings.forecastPointLengthText,isVisible:this.widgetJson.ForecastProperties.ForecastSettings.IsEnable,value:this.widgetJson.ForecastProperties.ForecastSettings.Length,itemType:"object",callbackInstance:this,callbackMethod:"renderingForecastSettingsProperties"},{name:"ConfidenceInterval",displayName:this.locale.propertyPanel.forecastSettings.confidenceInterval,isVisible:this.widgetJson.ForecastProperties.ForecastSettings.IsEnable,itemType:"dropdown",value:this.widgetJson.ForecastProperties.ForecastSettings.ConfidenceInterval+String.fromCharCode(37),valueList:["75"+String.fromCharCode(37),"80"+String.fromCharCode(37),"85"+String.fromCharCode(37),"90"+String.fromCharCode(37),"95"+String.fromCharCode(37),"99"+String.fromCharCode(37)]},{name:"LegendText",displayName:this.locale.propertyPanel.forecastSettings.LegendText,isVisible:this.widgetJson.ForecastProperties.ForecastSettings.IsEnable&&this.widgetJson.ForecastProperties.LegendText,value:this.widgetJson.ForecastProperties.LegendText,itemType:"string"},{name:"Seasonality",displayName:this.locale.propertyPanel.forecastSettings.seasonalityText,isVisible:this.widgetJson.ForecastProperties.ForecastSettings.IsEnable,value:this.widgetJson.ForecastProperties.ForecastSettings.Length,itemType:"object",callbackInstance:this,callbackMethod:"renderingForecastSettingsProperties"},{name:"SubmitForecast",displayName:"",isVisible:this.widgetJson.ForecastProperties.ForecastSettings.IsEnable,itemType:"button",buttonText:this.locale.propertyPanel.forecastSettings.forecastSubmitBtnText,callbackInstance:this,callbackMethod:"submitForecastSettings"},{name:"ShowForecast",displayName:this.locale.propertyPanel.forecastSettings.showForecastText,isVisible:this.widgetJson.ForecastProperties.ForecastSettings.IsEnable,itemType:"object",callbackInstance:this,callbackMethod:"renderingForecastSeriesElement"},{name:"ShowConfidence",displayName:this.locale.propertyPanel.forecastSettings.showConfidenceText,isVisible:this.widgetJson.ForecastProperties.ForecastSettings.IsEnable,itemType:"object",callbackInstance:this,callbackMethod:"renderingForecastSeriesElement"},{name:"ConfidenceBandStyle",displayName:this.locale.propertyPanel.forecastSettings.confidenceBandStyle,isVisible:this.widgetJson.ForecastProperties.ForecastSettings.IsEnable&&this.widgetJson.ForecastProperties.ShowConfidence,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ConfidenceBandStyle,this.widgetJson.ForecastProperties.ConfidenceBandStyle),itemType:"dropdown",valueList:[ConfidenceBandStyle.Fill,ConfidenceBandStyle.Line,ConfidenceBandStyle.Dot]},{name:"DisableForecastProperty",isVisible:!1,itemType:"object",callbackInstance:this,callbackMethod:"disableForecastProperty"},]},n.linkingProperty,{CategoryName:"Axis",DisplayName:this.locale.propertyPanel.axisText,IsVisible:this.isShapeChartType(this.widgetJson.ChartType)?!1:!0,Items:[{name:"AxisTitleForeground",displayName:this.locale.propertyPanel.axisSettings.titleColor,isVisible:!0,value:this.widgetJson.AxisTitle.Color,itemType:"color"},{name:"AxisLabelForeground",displayName:this.locale.propertyPanel.axisSettings.labelColor,isVisible:!0,value:this.widgetJson.AxisLabel.Color,itemType:"color"},{name:"CategoryAxis",displayName:this.locale.propertyPanel.axisSettings.showCategoryAxis,value:this.widgetJson.Axis.CategoryAxis.IsEnabled,itemType:"bool"},{name:"CategoryAxisTitle",displayName:this.locale.propertyPanel.axisSettings.showAxisTitle,isVisible:this.widgetJson.Axis.CategoryAxis.IsEnabled,value:this.widgetJson.Axis.CategoryAxis.ShowTitle,itemType:"bool"},{name:"CategoryAxisTitleValue",displayName:this.locale.propertyPanel.axisSettings.axisTitle,isVisible:this.widgetJson.Axis.CategoryAxis.ShowTitle&&this.widgetJson.Axis.CategoryAxis.IsEnabled&&!this.widgetJson.IsEnableDrillDown,value:this.widgetJson.Axis.CategoryAxis.IsCustomTitle?this.widgetJson.Axis.CategoryAxis.Title:"",placeHolder:this.locale.common.auto,itemType:"string"},{name:"LableOverflowMode",displayName:this.locale.propertyPanel.axisSettings.labelOverflowMode,isVisible:this.widgetJson.Axis.CategoryAxis.IsEnabled,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LabelOverFlowMode,this.widgetJson.Axis.CategoryAxis.LabelOverflowMode),itemType:"dropdown",valueList:["Auto","Trim","Hide"]},{name:"CategoryAxisLabelTrim",displayName:this.locale.propertyPanel.axisSettings.enableTrim,isVisible:this.widgetJson.Axis.CategoryAxis.IsEnabled,value:this.widgetJson.Axis.CategoryAxis.EnableTrim,itemType:"bool"},{name:"LabelMaximumWidth",displayName:this.locale.propertyPanel.axisSettings.labelMaxWidth,isDisable:!this.widgetJson.Axis.CategoryAxis.EnableTrim,isVisible:this.widgetJson.Axis.CategoryAxis.IsEnabled,value:this.widgetJson.Axis.CategoryAxis.MaxLabelWidth,itemType:"float",decimalPlaces:0,interval:1,minimum:10,maximum:500,unitType:"px"},{name:"CategoryAxisLabelRotation",displayName:this.locale.propertyPanel.axisSettings.labelRotation,isVisible:this.widgetJson.Axis.CategoryAxis.IsEnabled?this.widgetJson.Axis.CategoryAxis.IsEnabled:!1,itemType:"dropdown",value:this.widgetJson.Axis.CategoryAxis.LabelRotation==="Auto"?this.widgetJson.Axis.CategoryAxis.LabelRotation:this.widgetJson.Axis.CategoryAxis.LabelRotation==="None"?"0"+String.fromCharCode(176):this.widgetJson.Axis.CategoryAxis.LabelRotation+String.fromCharCode(176),valueList:["Auto","-90"+String.fromCharCode(176),"-45"+String.fromCharCode(176),"0"+String.fromCharCode(176),"+45"+String.fromCharCode(176),"+90"+String.fromCharCode(176)]},{name:"IsAutoInterval",displayName:this.locale.propertyPanel.axisSettings.autoInterval,isVisible:this.widgetJson.Axis.CategoryAxis.IsEnabled,value:this.widgetJson.Axis.CategoryAxis.IsAutoInterval,itemType:"bool"},{name:"Interval",displayName:this.locale.propertyPanel.axisSettings.interval,isVisible:this.widgetJson.Axis.CategoryAxis.IsEnabled,isDisable:this.widgetJson.Axis.CategoryAxis.IsAutoInterval,value:this.widgetJson.Axis.CategoryAxis.Interval,itemType:"float",decimalPlaces:0,interval:1,minimum:1,maximum:10},{name:"PrimaryValueAxis",displayName:this.locale.propertyPanel.axisSettings.showPrimaryValueAxis,isVisible:t,value:this.widgetJson.Axis.PrimaryValueAxis.IsEnabled,itemType:"object",callbackInstance:this,callbackMethod:"renderPrimaryAxisRange"},{name:"PrimaryInverseAxis",displayName:this.locale.propertyPanel.axisSettings.negativeRegion,isVisible:t&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.Axis.PrimaryValueAxis)&&this.widgetJson.Axis.PrimaryValueAxis.IsEnabled,value:!BoldBIDashboard.isNullOrUndefined(this.widgetJson.Axis.PrimaryValueAxis)&&this.widgetJson.Axis.PrimaryValueAxis.InverseAxis,itemType:"bool"},{name:"PrimaryAxisTitle",displayName:this.locale.propertyPanel.axisSettings.showAxisTitle,isVisible:t&&this.widgetJson.Axis.PrimaryValueAxis.IsEnabled,value:this.widgetJson.Axis.PrimaryValueAxis.ShowTitle,itemType:"bool"},{name:"PrimaryAxisTitleValue",displayName:this.locale.propertyPanel.axisSettings.axisTitle,isVisible:t&&this.widgetJson.Axis.PrimaryValueAxis.ShowTitle&&this.widgetJson.Axis.PrimaryValueAxis.IsEnabled,value:this.widgetJson.Axis.PrimaryValueAxis.IsCustomTitle?this.widgetJson.Axis.PrimaryValueAxis.Title:"",placeHolder:this.locale.common.auto,itemType:"string"},{name:"PrimaryAxisType",displayName:this.locale.propertyPanel.axisSettings.axisType,isVisible:t&&this.widgetJson.Axis.PrimaryValueAxis.IsEnabled&&!BoldBIDashboard.isNullOrUndefined(r)&&this.chartModel.axisTypevisible(r.model.series,!1),value:this.widgetJson.Axis.PrimaryValueAxis.AxisType,itemType:"dropdown",valueList:[AxisType.Linear,AxisType.Logarithmic]},{name:"PrimaryAxisFormat",displayName:this.locale.propertyPanel.axisSettings.primaryAxisFormatText,isVisible:t&&this.widgetJson.Axis.PrimaryValueAxis.IsEnabled,value:this.widgetJson.Axis.PrimaryValueAxis.Format,itemType:"button",buttonText:this.locale.propertyPanel.axisSettings.axisFormatButtonText,callbackInstance:this,callbackMethod:"onPrimaryAxisFormatClick"},{name:"SecondaryValueAxis",displayName:this.locale.propertyPanel.axisSettings.showSecondaryValueAxis,value:!BoldBIDashboard.isNullOrUndefined(this.widgetJson.Axis.SecondaryValueAxis)&&this.widgetJson.Axis.SecondaryValueAxis.IsEnabled,isVisible:i,itemType:"object",callbackInstance:this,callbackMethod:"renderSecondaryAxisRange"},{name:"SecondaryInverseAxis",displayName:this.locale.propertyPanel.axisSettings.negativeRegion,isVisible:i&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.Axis.SecondaryValueAxis)&&this.widgetJson.Axis.SecondaryValueAxis.IsEnabled,value:!BoldBIDashboard.isNullOrUndefined(this.widgetJson.Axis.SecondaryValueAxis)&&this.widgetJson.Axis.SecondaryValueAxis.InverseAxis,itemType:"bool"},{name:"SecondaryAxisTitle",displayName:this.locale.propertyPanel.axisSettings.showAxisTitle,isVisible:i&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.Axis.SecondaryValueAxis)&&this.widgetJson.Axis.SecondaryValueAxis.IsEnabled,value:!BoldBIDashboard.isNullOrUndefined(this.widgetJson.Axis.SecondaryValueAxis)&&this.widgetJson.Axis.SecondaryValueAxis.ShowTitle,itemType:"bool"},{name:"SecondaryAxisTitleValue",displayName:this.locale.propertyPanel.axisSettings.axisTitle,isVisible:i&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.Axis.SecondaryValueAxis)&&this.widgetJson.Axis.SecondaryValueAxis.ShowTitle&&this.widgetJson.Axis.SecondaryValueAxis.IsEnabled,value:!BoldBIDashboard.isNullOrUndefined(this.widgetJson.Axis.SecondaryValueAxis)&&this.widgetJson.Axis.SecondaryValueAxis.IsCustomTitle?!BoldBIDashboard.isNullOrUndefined(this.widgetJson.Axis.SecondaryValueAxis)&&this.widgetJson.Axis.SecondaryValueAxis.Title:"",itemType:"string",placeHolder:this.locale.common.auto},{name:"SecondaryAxisType",displayName:this.locale.propertyPanel.axisSettings.axisType,isVisible:i&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.Axis.SecondaryValueAxis)&&this.widgetJson.Axis.SecondaryValueAxis.IsEnabled&&!BoldBIDashboard.isNullOrUndefined(r)&&this.chartModel.axisTypevisible(r.model.series,!0),value:this.widgetJson.Axis.SecondaryValueAxis.AxisType,itemType:"dropdown",valueList:[AxisType.Linear,AxisType.Logarithmic]},{name:"SecondaryAxisFormat",displayName:this.locale.propertyPanel.axisSettings.secondaryAxisFormatText,isVisible:i&&this.widgetJson.Axis.SecondaryValueAxis.IsEnabled,value:this.widgetJson.Axis.SecondaryValueAxis.Format,itemType:"button",buttonText:this.locale.propertyPanel.axisSettings.axisFormatButtonText,callbackInstance:this,callbackMethod:"onSecondaryAxisFormatClick"},]},{CategoryName:"Grid Lines",DisplayName:this.locale.propertyPanel.gridLinesText,IsVisible:this.isShapeChartType(this.widgetJson.ChartType)?!1:!0,Items:[{name:"PrimaryValueGridLines",displayName:this.locale.propertyPanel.gridLineSettings.primaryValueAxis,isDisable:u.primaryValueLength===0&&u.secondaryValueLength>0,value:this.widgetJson.PrimaryValueGridLines,itemType:"bool"},{name:"SecondaryValueGridLines",displayName:this.locale.propertyPanel.gridLineSettings.secondaryValueAxis,isDisable:u.secondaryValueLength===0&&u.primaryValueLength>0,value:this.widgetJson.SecondaryValueGridLines,itemType:"bool"},{name:"CategoryGridLines",displayName:this.locale.propertyPanel.gridLineSettings.categoryAxis,value:this.widgetJson.CategoryGridLines,itemType:"bool"}]},{CategoryName:"Trendline",DisplayName:this.locale.propertyPanel.trendLinesText,IsVisible:!this.isShapeChartType(this.widgetJson.ChartType)&&!BoldBIDashboard.isNullOrUndefined(r)&&this.chartModel.isTrendlineSupportChartType(r.model.series)&&this.chartModel.DataGroupInfo.FieldContainers.length>0&&this.chartModel.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&this.chartModel.DataGroupInfo.FieldContainers[1].FieldInfos.length===1&&this.chartModel.DataGroupInfo.FieldContainers[2].FieldInfos.length===0,Items:[{name:"Trendline",displayName:this.locale.propertyPanel.trendLinesText,isVisible:!this.isShapeChartType(this.widgetJson.ChartType)&&!BoldBIDashboard.isNullOrUndefined(r)&&this.chartModel.isTrendlineSupportChartType(r.model.series)&&this.chartModel.DataGroupInfo.FieldContainers.length>0&&this.chartModel.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&this.chartModel.DataGroupInfo.FieldContainers[1].FieldInfos.length===1&&this.chartModel.DataGroupInfo.FieldContainers[2].FieldInfos.length===0,itemType:"object",callbackInstance:this,callbackMethod:"renderTrendLines"},]},{CategoryName:"Series Palette",DisplayName:this.locale.propertyPanel.seriesPaletteText,IsVisible:this.widgetJson.IsColorPaletteCategoryVisible,Items:[{name:"UseDefaultPalette",isVisible:!f,displayName:this.locale.propertyPanel.seriesPaletteSettings.useDefaultPalette,value:this.widgetJson.IsDefaultColorPalette,itemType:"bool"},{name:"ColorMappingType",displayName:this.locale.propertyPanel.seriesPaletteSettings.colorMappingTypeText,isVisible:!this.widgetJson.IsDefaultColorPalette&&!f&&!this.isShapeChartType(this.widgetJson.ChartType),value:this.widgetJson.ColorMappingType,itemType:"dropdown",valueList:[ColorMappingType.Data,ColorMappingType.Index]},{name:"ColorPalette",itemType:"object",isVisible:!this.widgetJson.IsDefaultColorPalette&&!f,callbackInstance:this,callbackMethod:"openColorPalette"},{name:"AdvanceColorPalette",isVisible:f,displayName:this.locale.propertyPanel.seriesPaletteSettings.advancedSetting,value:this.widgetJson.EnableColorSettings,itemType:"bool"},{name:"SeriesColorPaletteButton",isVisible:f,callbackInstance:this,callbackMethod:"renderAdvanceButtonElement",itemType:"object",elementType:"Chart"}]},{CategoryName:"Formatting",DisplayName:this.locale.propertyPanel.formattingText,IsVisible:!BoldBIDashboard.isNullOrUndefined(o)&&o.length>0&&!s&&!this.isShapeChartType(this.widgetJson.ChartType)?!0:!1,Items:[{name:"ColorSettings",callbackInstance:this,callbackMethod:"renderDefaultColorSettings",itemType:"object",elementType:"Chart"},]},{CategoryName:"FontSettings",DisplayName:this.locale.propertyPanel.fontSettings.categoryDisplayName,Items:[{name:"Legend",displayName:this.locale.propertyPanel.fontSettings.legend,itemType:"fontSettings",isTitleVisible:this.widgetJson.ShowLegend,autoFontSettingsInfo:{name:"IsAutoLegendFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:this.widgetJson.ShowLegend,value:this.widgetJson.IsAutoLegendFontSize,itemType:"bool"},fontSizeInfo:{name:"LegendFontSize",isVisible:this.widgetJson.ShowLegend,isDisable:this.widgetJson.IsAutoLegendFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.widgetJson.LegendFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}},{name:"LegendTitleFont",displayName:this.locale.propertyPanel.fontSettings.legendTitle,itemType:"fontSettings",isTitleVisible:this.widgetJson.ShowLegend,autoFontSettingsInfo:{name:"IsAutoLegendTitleFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:this.widgetJson.ShowLegend,value:this.widgetJson.IsAutoLegendTitleFontSize,itemType:"bool"},fontSizeInfo:{name:"LegendTitleFontSize",isVisible:this.widgetJson.ShowLegend,isDisable:this.widgetJson.IsAutoLegendTitleFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.widgetJson.LegendTitleFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}},{name:"ValueLabel",displayName:this.locale.propertyPanel.fontSettings.valueLabel,itemType:"fontSettings",isTitleVisible:this.widgetJson.ShowValueLabels,autoFontSettingsInfo:{name:"AutoValueLabelFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:this.widgetJson.ShowValueLabels,value:this.widgetJson.IsAutoValueLabelFontSize,itemType:"bool"},fontSizeInfo:{name:"ValueLabelFontSize",isVisible:this.widgetJson.ShowValueLabels,isDisable:this.widgetJson.IsAutoValueLabelFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.widgetJson.ValueLabelFontSize,itemType:"float",decimalPlaces:0,minimum:1,maximum:60,unitType:"px"}},{name:"CategoryAxisLabelFont",displayName:this.locale.propertyPanel.fontSettings.categoryAxisLabel,itemType:"fontSettings",isTitleVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&this.widgetJson.Axis.CategoryAxis.IsEnabled,autoFontSettingsInfo:{name:"IsAutoCategoryAxisLabelFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&this.widgetJson.Axis.CategoryAxis.IsEnabled,value:this.widgetJson.Axis.CategoryAxis.IsAutoCategoryAxisLabelFontSize,itemType:"bool"},fontSizeInfo:{name:"CategoryAxisLabelFontSize",isVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&this.widgetJson.Axis.CategoryAxis.IsEnabled,isDisable:this.widgetJson.Axis.CategoryAxis.IsAutoCategoryAxisLabelFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.widgetJson.Axis.CategoryAxis.CategoryAxisLabelFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}},{name:"CategoryAxisTitleFont",displayName:this.locale.propertyPanel.fontSettings.categoryAxisTitle,itemType:"fontSettings",isTitleVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&this.widgetJson.Axis.CategoryAxis.IsEnabled&&this.widgetJson.Axis.CategoryAxis.ShowTitle,autoFontSettingsInfo:{name:"IsAutoCategoryAxisTitleFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&this.widgetJson.Axis.CategoryAxis.IsEnabled&&this.widgetJson.Axis.CategoryAxis.ShowTitle,value:this.widgetJson.Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize,itemType:"bool"},fontSizeInfo:{name:"CategoryAxisTitleFontSize",isVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&this.widgetJson.Axis.CategoryAxis.IsEnabled&&this.widgetJson.Axis.CategoryAxis.ShowTitle,isDisable:this.widgetJson.Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.widgetJson.Axis.CategoryAxis.CategoryAxisTitleFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}},{name:"PrimaryAxisLabelFont",displayName:this.locale.propertyPanel.fontSettings.primaryAxisLabel,itemType:"fontSettings",isTitleVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&t&&this.widgetJson.Axis.PrimaryValueAxis.IsEnabled,autoFontSettingsInfo:{name:"IsAutoPrimaryAxisLabelFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&t&&this.widgetJson.Axis.PrimaryValueAxis.IsEnabled,value:this.widgetJson.Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize,itemType:"bool"},fontSizeInfo:{name:"PrimaryLabelFontSize",isVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&t&&this.widgetJson.Axis.PrimaryValueAxis.IsEnabled,isDisable:this.widgetJson.Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.widgetJson.Axis.PrimaryValueAxis.PrimaryLabelFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}},{name:"PrimaryAxisTitleFont",displayName:this.locale.propertyPanel.fontSettings.primaryAxisTitle,itemType:"fontSettings",isTitleVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&t&&this.widgetJson.Axis.PrimaryValueAxis.IsEnabled&&this.widgetJson.Axis.PrimaryValueAxis.ShowTitle,autoFontSettingsInfo:{name:"IsAutoPrimaryAxisTitleFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&t&&this.widgetJson.Axis.PrimaryValueAxis.IsEnabled&&this.widgetJson.Axis.PrimaryValueAxis.ShowTitle,value:this.widgetJson.Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize,itemType:"bool"},fontSizeInfo:{name:"PrimaryTitleFontSize",isVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&t&&this.widgetJson.Axis.PrimaryValueAxis.IsEnabled&&this.widgetJson.Axis.PrimaryValueAxis.ShowTitle,isDisable:this.widgetJson.Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.widgetJson.Axis.PrimaryValueAxis.PrimaryTitleFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}},{name:"SecondaryAxisLabelFont",displayName:this.locale.propertyPanel.fontSettings.secondaryAxisLabel,itemType:"fontSettings",isTitleVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&i&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.Axis.SecondaryValueAxis)&&this.widgetJson.Axis.SecondaryValueAxis.IsEnabled,autoFontSettingsInfo:{name:"IsAutoSecondaryAxisLabelFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&i&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.Axis.SecondaryValueAxis)&&this.widgetJson.Axis.SecondaryValueAxis.IsEnabled,value:this.widgetJson.Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize,itemType:"bool"},fontSizeInfo:{name:"SecondaryLabelFontSize",isVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&i&&this.widgetJson.Axis.SecondaryValueAxis.IsEnabled,isDisable:this.widgetJson.Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.widgetJson.Axis.SecondaryValueAxis.SecondaryLabelFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}},{name:"SecondaryAxisTitleFont",displayName:this.locale.propertyPanel.fontSettings.secondaryAxisTitle,itemType:"fontSettings",isTitleVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&i&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.Axis.SecondaryValueAxis)&&this.widgetJson.Axis.SecondaryValueAxis.ShowTitle&&this.widgetJson.Axis.SecondaryValueAxis.IsEnabled,autoFontSettingsInfo:{name:"IsAutoSecondaryAxisTitleFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&i&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.Axis.SecondaryValueAxis)&&this.widgetJson.Axis.SecondaryValueAxis.ShowTitle&&this.widgetJson.Axis.SecondaryValueAxis.IsEnabled,value:this.widgetJson.Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize,itemType:"bool"},fontSizeInfo:{name:"SecondaryTitleFontSize",isVisible:!this.isShapeChartType(this.chartModel.getChartProperties().ChartType)&&i&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.Axis.SecondaryValueAxis)&&this.widgetJson.Axis.SecondaryValueAxis.ShowTitle&&this.widgetJson.Axis.SecondaryValueAxis.IsEnabled,isDisable:this.widgetJson.Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.widgetJson.Axis.SecondaryValueAxis.SecondaryTitleFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}}]},n.filterSettingsProperty,n.containerSettingsProperty,n.containerActionsProperty,n.noDataContainerActionsProperty],n.propertyGridItems},n.prototype.renderAdvanceButtonElement=function(n,t,i){var s=this.chartModel.dataGroupBindedColumnInfo(),h=this.isShapeChartType(this.widgetJson.ChartType)&&s.columnLength>0,r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0])),e,o,u,f;BoldBIDashboard.isNullOrUndefined(r)||r.Type!==ControlType.Chart||(e=r.dataGroupBindedColumnInfo(),this.buttonId=this.chartModel.designerId+"_"+t+"_"+i.categoryName,BoldBIDashboard.isNullOrUndefined(this.defaultProportionPaletteContainer)&&(this.defaultProportionPaletteContainer=this.chartModel.designerInstance.element.find("#"+this.buttonId)),this.defaultProportionPaletteContainer.length!==0||BoldBIDashboard.isNullOrUndefined(n)?!BoldBIDashboard.isNullOrUndefined(this.defaultProportionPaletteContainer)&&this.defaultProportionPaletteContainer.length>0&&(u=this.defaultProportionPaletteContainer.find("#"+this.buttonId+"_palatte_button"),f=this.defaultProportionPaletteContainer.find("#"+this.buttonId+"_color_settings_button"),e.columnLength>0&&r.isShapeChartType(r.getChartProperties().ChartType)?BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateAdvanceButtonVisibility(u,f,r.getChartProperties().EnableColorSettings):r.isShapeChartType(r.getChartProperties().ChartType)?(f.css("display","none"),r.getChartProperties().EnableColorSettings=!1):h||u.css("display","none")):(this.defaultProportionPaletteContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-designer-scroll-style-3","",{width:"460px"},{id:this.buttonId}),u=BoldBIDashboard.buildTag("div","",{},{id:this.buttonId+"_palatte_button"}),this.defaultProportionPaletteContainer.append(u),o=BoldBIDashboard.buildTag("div.e-advance-option-wrap","",{"margin-left":"205px"},{}),f=BoldBIDashboard.buildTag("button.e-prop-chart-widget-color-settings-button bbi-dbrd-btn-small bbi-dbrd-btn-primary","Customize",{},{id:this.buttonId+"_color_settings_button"}),o.append(f),u.append(o),e.columnLength>0&&r.isShapeChartType(r.getChartProperties().ChartType)?(u.css("display","block"),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateAdvanceButtonVisibility(u,f,r.getChartProperties().EnableColorSettings)):(u.css("display","none"),f.css("display","none")),n.append(this.defaultProportionPaletteContainer)))},n.prototype.showConfigureColorPalette=function(n){var i,t;if(this.widgetJson.EnableColorSettings=n,this.widgetJson.ColorCustomization=n?this.widgetJson.ColorCustomization:null,this.widgetJson.ShowLegendAsDropDown&&n&&!BoldBIDashboard.isNullOrUndefined(this.legendDropDownWrapper)?this.legendDropDownWrapper.hide():BoldBIDashboard.isNullOrUndefined(this.legendDropDownWrapper)||n||this.legendDropDownWrapper.show(),this.isShapeChartType(this.widgetJson.ChartType)&&(n&&this.renderSeriesColorPalette(null),this.setPropertyElement("SeriesPalette","SeriesColorPaletteButton",this.widgetJson.ColorCustomization)),n&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.ColorCustomization))!BoldBIDashboard.isNullOrUndefined(this.widgetJson.ColorCustomization.SolidColorInfo)&&this.widgetJson.ColorCustomization.SolidColorInfo.length>0?this.updateModifiedColorToWidget(this.widgetJson.ColorCustomization):BoldBIDashboard.isNullOrUndefined(this.widgetJson.ColorCustomization.GradientSettings)&&BoldBIDashboard.isNullOrUndefined(this.widgetJson.ColorCustomization.RuleRangeSettings)||this.updateAdvancedColorSettings(this.widgetJson.ColorCustomization,!1);else if(!BoldBIDashboard.isNullOrUndefined(this.widgetJson.DefaultColors)&&this.widgetJson.DefaultColors.length>0){for(i=[],t=0;t<this.widgetJson.DefaultColors.length;t++)i.push(this.widgetJson.DefaultColors[t].Color);this.updateChartColor(i)}else this.updateChartColor(this.chartModel.defaultColorPalette);this.designerInstance.modules.serialization.notifyChange()},n.prototype.onAxisRangeClick=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0])),i=n.target.classList.contains("SecondaryAxisRange");this.designer.modules.axisRangeSettings.openAxisRangeSettings("updateAxisRangeInfo",t,i)},n.prototype.onPrimaryAxisFormatClick=function(){var i=this,n=BoldBIDashboard.isNullOrUndefined(this.chartModel.getChartProperties().Axis.PrimaryValueAxis.Format)?new MeasureFormatting:JSON.parse(JSON.stringify(this.chartModel.getChartProperties().Axis.PrimaryValueAxis.Format)),t;n.FormatType=isNaN(parseInt(n.FormatType,10))?n.FormatType:BoldBIDashboard.DashboardDesignerUtility.Serialization.getDataValueFormat(n.FormatType);n.Unit=isNaN(parseInt(n.Unit,10))?n.Unit:BoldBIDashboard.DashboardDesignerUtility.Serialization.getNumberFormat(n.Unit);t=this.chartModel.widgetHelper.getCurrentWidgetInstance();this.designer.modules.formatDialog.openFormatDialog(n,t.dataGroupInfo.DataSourceName,function(n){var r=i.chartModel.getChartProperties().Axis.PrimaryValueAxis.Format;r.Culture=n.Culture;r.DecimalPoints=n.DecimalPoints;r.DecimalSeparator=n.DecimalSeparator;r.GroupSeparator=n.GroupSeparator;r.FormatType=n.FormatType;r.Unit=n.Unit;r.Prefix=n.Prefix;r.Suffix=n.Suffix;r.EnableLakhsAndCroreRep=n.EnableLakhsAndCroreRep;t.getChartProperties().Axis.PrimaryValueAxis.Format=r;i.designerInstance.modules.serialization.notifyChange();t.refresh()})},n.prototype.onSecondaryAxisFormatClick=function(){var i=this,n=BoldBIDashboard.isNullOrUndefined(this.chartModel.getChartProperties().Axis.SecondaryValueAxis.Format)?new MeasureFormatting:JSON.parse(JSON.stringify(this.chartModel.getChartProperties().Axis.SecondaryValueAxis.Format)),t;n.FormatType=isNaN(parseInt(n.FormatType,10))?n.FormatType:BoldBIDashboard.DashboardDesignerUtility.Serialization.getDataValueFormat(n.FormatType);n.Unit=isNaN(parseInt(n.Unit,10))?n.Unit:BoldBIDashboard.DashboardDesignerUtility.Serialization.getNumberFormat(n.Unit);t=this.chartModel.widgetHelper.getCurrentWidgetInstance();this.designer.modules.formatDialog.openFormatDialog(n,t.dataGroupInfo.DataSourceName,function(n){var r=i.chartModel.getChartProperties().Axis.SecondaryValueAxis.Format;r.Culture=n.Culture;r.DecimalPoints=n.DecimalPoints;r.DecimalSeparator=n.DecimalSeparator;r.GroupSeparator=n.GroupSeparator;r.FormatType=n.FormatType;r.Unit=n.Unit;r.Prefix=n.Prefix;r.Suffix=n.Suffix;r.EnableLakhsAndCroreRep=n.EnableLakhsAndCroreRep;t.getChartProperties().Axis.SecondaryValueAxis.Format=r;i.designerInstance.modules.serialization.notifyChange();t.refresh()})},n.prototype.updateTitleVisibility=function(n,t,i,r,u){var o=BoldBIDashboard.isNullOrUndefined(u)?BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0])):u,f=o.propertyPanel.propertyContainer.find("#"+o.designerId+"_propertyItemHeaderText_"+i),e;f.css("display",r?"inline-block":"none");f.length>0&&(e=f.data("BoldBIDashboardScroller"),BoldBIDashboard.isNullOrUndefined(e)||e.refresh())},n.prototype.updateAxisRangeInfo=function(n){var f=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0])),t=n.axisRangeInfo,u=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),i,r;if(n.isSecondaryAxis)for(f.getChartProperties().SecondaryAxisRange=t,i=0;i<u.length;i++)r=this.bbdesigner$(u[i]).data("BoldBIDashboardChart"),r.model.axes[0].range={min:t.MinValue!==""?Number(t.MinValue):null,max:t.MaxValue!==""?Number(t.MaxValue):null,interval:t.Interval!==""?Number(t.Interval):null},r.redraw();else for(f.getChartProperties().PrimaryAxisRange=t,i=0;i<u.length;i++)r=this.bbdesigner$(u[i]).data("BoldBIDashboardChart"),r.model.primaryYAxis.range={min:t.MinValue!==""?Number(t.MinValue):null,max:t.MaxValue!==""?Number(t.MaxValue):null,interval:t.Interval!==""?Number(t.Interval):null},r.redraw();this.designerInstance.modules.serialization.notifyChange()},n.prototype.renderDefaultColorSettings=function(n,t,i){var r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0]));BoldBIDashboard.isNullOrUndefined(r)||r.Type!==ControlType.Chart||this.chartHelper.renderColorSettings(n,t,i,r)},n.prototype.openAdvancedColorSettings=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0])),t=new ColorCustomization,f=new BoldBIDashboard.DashboardDesignerUtility.AdvancedColorCustomization(this.designer),e=this.getDataGroupID().length===0?["Gradient","Rule"]:null,o=n.getChartProperties().DefaultColors.length>0?n.getChartProperties().DefaultColors[0].Color:BoldBIDashboard.DashboardUtil.defaultColorPalette[0],i,r,u;BoldBIDashboard.isNullOrUndefined(n.getChartProperties().ColorCustomization)?t.Type=ColorCustomizationType.Gradient:t=this.bbdesigner$.extend(!0,{},n.getChartProperties().ColorCustomization);i=null;r=n.DataGroupInfo;n.isCartesianChartType(n.getChartProperties().ChartType)?i=r.FieldContainers[0].FieldInfos[0]:n.isShapeChartType(n.getChartProperties().ChartType)&&(i=r.FieldContainers[1].FieldInfos[0]);t=this.getSolidColorInfo(t,n);u={colorCustomizationObj:t,DataGroupInfo:n.DataGroupInfo,colorFields:n.chartProperties.colorFields,colorTypeCollection:e,defaultBasedOnField:i,defaultColorFill:o,isDefaultFormat:!0,colorMapping:!0};f.populateUI(u,n.chartProperties,"updateAdvancedColorSettings")},n.prototype.updateAdvancedColorSettings=function(n,t){this.chartHelper.updateAdvancedColorSettings(n,t)},n.prototype.renderSeriesColorPalette=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0])),i=[],r=new BoldBIDashboard.DashboardDesignerUtility.AdvancedColorCustomization(this.designer),t=BoldBIDashboard.isNullOrUndefined(n.getChartProperties().ColorCustomization)?new ColorCustomization:n.getChartProperties().ColorCustomization,u=n.DataGroupInfo;t=this.getSolidColorInfo(t,n);t.Type=ColorCustomizationType.Individual;i={colorCustomizationObj:t,DataGroupInfo:u,colorTypeCollection:["Individual"],colorMapping:!0};r.populateUI(i,n,"updateAdvanceColorPalette")},n.prototype.getSolidColorInfo=function(n,t){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getSolidColorInfo(n,t)},n.prototype.getDataGroupID=function(){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0])),i,r,n;for(t=BoldBIDashboard.isNullOrUndefined(t)?this.chartModel:t,i=t.DataGroupInfo.FieldContainers[1].length!==0?t.DataGroupInfo.FieldContainers[1].FieldInfos:[],r=[],n=0;n<i.length;n++)r.push({DataId:i[n].Id,UniqueColumnName:i[n].UniqueColumnName,Field:i[n].Name});return r},n.prototype.showLoadingIndicator=function(){this.chartModel.ContentContainer.find("#"+this.chartModel.designerId+"chartItem"+this.widgetJson.UniqueName).BoldBIDashboardWaitingPopup("show")},n.prototype.hideLoadingIndicator=function(){this.chartModel.ContentContainer.find("#"+this.chartModel.designerId+"chartItem"+this.widgetJson.UniqueName).BoldBIDashboardWaitingPopup("hide")},n.prototype.destroy=function(){this.unwireEvents()},n.prototype.renderChartSeriesTypeDialog=function(){var n=this.widgetJson.ForecastProperties.ForecastSettings.IsEnable;this.designer.modules.chartSeriesType.openChartSeriesTypeDialog(this,"updateAxisSettings",this.widgetJson.ChartSeriesTypeInfo,n)},n.prototype.renderLineStyleCustomization=function(){var n=this.widgetJson.ForecastProperties.ForecastSettings.IsEnable;this.designer.modules.chartLineStyleType.createLineStyleDialogElement(this.chartModel,n)},n.prototype.updateAxisSettings=function(n){this.chartModel.updateChartTypeAndAxisSettings(n)},n.prototype.getChartObject=function(){for(var t,i=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),n=0;n<i.length;n++)if(t=this.bbdesigner$(i[n]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(t))return t;return null},n.prototype.renderPrimaryAxisRange=function(n,t,i){this.renderAxisRange(n,t,i,!1)},n.prototype.renderSecondaryAxisRange=function(n,t,i){this.renderAxisRange(n,t,i,!0)},n.prototype.renderValueLabelsSetting=function(n,t,i){this.chartHelper.renderShowValueLabel(n,t,i)},n.prototype.submitForecastSettings=function(){this.chartHelper.submitForecastSettings()},n.prototype.renderingForecastSettingsProperties=function(n,t,i){this.chartHelper.renderingForecastSettingsProperties(n,t,i,this.chartModel)},n.prototype.renderingForecastSeriesElement=function(n,t,i){this.chartHelper.renderingForecastSeriesElement(n,t,i,this.chartModel)},n.prototype.disableForecastProperty=function(){this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.chartHelper.updateSinglePointForeCast(this.chartModel.dataValues,this.chartModel)},n.prototype.isShapeChartType=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(n)},n.prototype.isStackedTypeChart=function(n){return n.toLowerCase()===ChartTypes.StackedColumn.toString().toLowerCase()||n.toLowerCase()===ChartTypes.StackedBar.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedBar.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedColumn.toString().toLowerCase()},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.ChartProperties",InternalChartProperties,window);__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalChartReportItem=function(n){function t(t){var i=n.call(this,t,"Chart","e-chart-item")||this;return i.defaultColorPalette=[],i.popColorPalette=["#CCFAFF","#C0F2DC"],i.chartObj=null,i.dataValues=null,i.currentDataValue=null,i.selectedShapeItem=null,i.columnBindings=[],i.customLegendsForConditionalRange=[],i.timerCollection=[],i.selectedIndex=[],i.isActAsSlaveForAnyPoP=!1,i.multiSelectionFilter=[],i.chartElement=null,i.breadCrumbItem=null,i.chartItem=null,i.chartContent=null,i.isExistingChart=!1,i.multipleProportionChart=!1,i.isOpenReport=!1,i.defaultSeries=!1,i.propertyPanel=null,i.locale=null,i.isThemeSwitch=!1,i.bbdesigner$=i.designerInstance.bbdesigner$,i.IsPoPSupportedWidget=!0,i.IsSupportHierarchyField=!0,i.locale=t.getLocalizationContent(),i.drillLevelInfo=[],i.designerId=i.designerInstance._id,i.widgetJson=new ChartProperties(t),i.defaultColorPalette=BoldBIDashboard.DashboardUtil.defaultColorPalette,i.propertyPanel=i.designerInstance.modules.propertyPanel,i.chartProperties=new BoldBIDashboard.DashboardDesignerUtility.ChartProperties(i.designerInstance,i),i.chartHelper=new BoldBIDashboard.DashboardDesignerUtility.ChartHelper(i.designerInstance),i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.comparison,GroupId:"1475fcad-99eb-484d-a1af-369ded6937fb",Items:[{id:"cc349998-dd4b-4f7d-be36-f6a8111ee219",widgetName:"Bar",widgetDisplayName:n.itemPanel.widgetTitle.barChart,cssClass:"bbi-widgeticon bbi-designer-bar-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChartItem",searchCategory:["chart","comparison"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.barChart+n.itemPanel.widgetTitle.chart,description:n.itemPanel.widgetDescription.barChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties"},{id:"eea7416d-9391-4fcf-8887-8210fbfc89fe",widgetName:"Column",widgetDisplayName:n.itemPanel.widgetTitle.columnChart,cssClass:"bbi-widgeticon bbi-designer-column-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChartItem",searchCategory:["chart","comparison"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.columnChart+n.itemPanel.widgetTitle.chart,description:n.itemPanel.widgetDescription.columnChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties"},{id:"c24b1107-c86b-45fc-81d5-183e7cd5f7a3",widgetName:"Stacked Bar",widgetDisplayName:n.itemPanel.widgetTitle.stackedBar,cssClass:"bbi-widgeticon bbi-designer-stacked-bar-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChartItem",searchCategory:["chart","comparison"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.stackedBar+n.itemPanel.widgetTitle.chart,description:n.itemPanel.widgetDescription.stackedBarDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties"},{id:"05ba514a-2c00-4446-9917-0c8f5c51a16d",widgetName:"Stacked Column",widgetDisplayName:n.itemPanel.widgetTitle.stackedColumn,cssClass:"bbi-widgeticon bbi-designer-stacked-column-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChartItem",searchCategory:["chart","comparison"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.stackedColumn+n.itemPanel.widgetTitle.chart,description:n.itemPanel.widgetDescription.stackedColumnDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties"},{id:"98b72fe5-58df-4dfd-93c0-3d91f41f8d37",widgetName:"100% Stacked Bar",widgetDisplayName:n.itemPanel.widgetTitle.percentStackedBar,cssClass:"bbi-widgeticon bbi-designer-percent-stacked-bar-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChartItem",searchCategory:["chart","comparison"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.percentStackedBar+n.itemPanel.widgetTitle.chart,description:n.itemPanel.widgetDescription.percentStackedBarDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties"},{id:"118a4240-ceb6-4d33-9527-70d2f0932a4a",widgetName:"100% Stacked Column",widgetDisplayName:n.itemPanel.widgetTitle.percentStackedColumn,cssClass:"bbi-widgeticon bbi-designer-percent-stacked-column-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChartItem",searchCategory:["chart","comparison"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.percentStackedColumn+n.itemPanel.widgetTitle.chart,description:n.itemPanel.widgetDescription.percentStackedColumnDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties"}]},i={GroupName:n.itemPanel.groupItems.proportion,GroupId:"70c9a793-c397-49d7-a103-9832622b2a0a",Items:[{id:"5f14a998-59f1-43a6-b2cb-78b67543e5d3",widgetName:"Pie",widgetDisplayName:n.itemPanel.widgetTitle.pieChart,cssClass:"bbi-widgeticon bbi-designer-pie-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChartItem",searchCategory:["chart","proportion"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.pieChart+n.itemPanel.widgetTitle.chart,description:n.itemPanel.widgetDescription.pieChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties"},{id:"a0a39990-aa4b-4f2c-9a7c-a15b2ba345ab",widgetName:"Doughnut",widgetDisplayName:n.itemPanel.widgetTitle.doughnutChart,cssClass:"bbi-widgeticon bbi-designer-doughnut-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChartItem",searchCategory:["chart","proportion"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.doughnutChart+n.itemPanel.widgetTitle.chart,description:n.itemPanel.widgetDescription.doughnutChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties"},{id:"81f8c0e6-581e-4fcc-b5e2-ea69a01e997f",widgetName:"Pyramid",widgetDisplayName:n.itemPanel.widgetTitle.pyramidChart,cssClass:"bbi-widgeticon bbi-designer-pyramid-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChartItem",searchCategory:["chart","proportion"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.pyramidChart+n.itemPanel.widgetTitle.chart,description:n.itemPanel.widgetDescription.pyramidChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties"},{id:"68863a9e-1361-40ee-bc2b-8dbe019b0608",widgetName:"Funnel",widgetDisplayName:n.itemPanel.widgetTitle.funnelChart,cssClass:"bbi-widgeticon bbi-designer-funnel-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChartItem",searchCategory:["chart","proportion"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.funnelChart+n.itemPanel.widgetTitle.chart,description:n.itemPanel.widgetDescription.funnelChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties"},]},r={GroupName:n.itemPanel.groupItems.distribution,GroupId:"3bd22cb7-55db-40c1-993c-c273b92852b7",Items:[{id:"1aa075-fbce-4590-982c-5026cf9a6aab",widgetName:"Area",widgetDisplayName:n.itemPanel.widgetTitle.areaChart,cssClass:"bbi-widgeticon bbi-designer-area-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChartItem",searchCategory:["chart","distribution"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.areaChart+n.itemPanel.widgetTitle.chart,description:n.itemPanel.widgetDescription.areaChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties"},{id:"1ab492d3-e456-490c-aa73-f586988e0843",widgetName:"Stacked Area",widgetDisplayName:n.itemPanel.widgetTitle.stackedArea,cssClass:"bbi-widgeticon bbi-designer-stacked-area-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChartItem",searchCategory:["chart","distribution"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.stackedArea+n.itemPanel.widgetTitle.chart,description:n.itemPanel.widgetDescription.stackedAreaDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties"},{id:"2d847c74-2dd3-46c3-8180-ef152a2022cc",widgetName:"100% Stacked Area",widgetDisplayName:n.itemPanel.widgetTitle.percentStackedArea,cssClass:"bbi-widgeticon bbi-designer-percent-stacked-area-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChartItem",searchCategory:["chart","distribution"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.percentStackedArea+n.itemPanel.widgetTitle.chart,description:n.itemPanel.widgetDescription.percentStackedAreaDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties"},{id:"a59691b6-ede1-44df-8e8a-a38a7ac15573",widgetName:"Line",widgetDisplayName:n.itemPanel.widgetTitle.lineChart,cssClass:"bbi-widgeticon bbi-designer-line-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChartItem",searchCategory:["chart","distribution"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.lineChart+n.itemPanel.widgetTitle.chart,description:n.itemPanel.widgetDescription.lineChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties"},{id:"67c0232a-d802-4d16-a472-42d5ee63097b",widgetName:"Spline",widgetDisplayName:n.itemPanel.widgetTitle.splineChart,cssClass:"bbi-widgeticon bbi-designer-spline-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChartItem",searchCategory:["chart","distribution"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.splineChart+n.itemPanel.widgetTitle.chart,description:n.itemPanel.widgetDescription.splineChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties"},{id:"42fd538c-97dc-4d9c-afe5-fcc176b03e85",widgetName:"Spline Area",widgetDisplayName:n.itemPanel.widgetTitle.splineAreaChart,cssClass:"bbi-widgeticon bbi-designer-spline-area-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChartItem",searchCategory:["chart","distribution"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.splineAreaChart+n.itemPanel.widgetTitle.chart,description:n.itemPanel.widgetDescription.splineAreaChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties"},]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboardDesigner.widgetItems.push(i);BoldBIDashboardDesigner.widgetItems.push(r);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t),BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(i),BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(r))},t.prototype.init=function(n,t){this.createChartContainer(n,t)},t.prototype.applyWidgetTheme=function(n,t){var i,r;if(this.isThemeSwitch=!0,i=BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this),i||BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this),this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.updateTitleSubtitleTheme(),r=this.isShapeChartType(this.getChartProperties().ChartType),r)this.chartElement.css("background","transparent");else{if(BoldBIDashboard.isNullOrUndefined(this.chartObj)){this.designerInstance.designerPanel.hideLoadingIndicator(this.controlContainer);return}this.applyPrimaryXAxisTheme(this.chartObj);this.applyPrimaryYAxisTheme(this.chartObj);this.applySecondaryAxisTheme();this.applyChartAreaBackground();this.applyFontCustomization();this.applyLegendTheme()}this.applyDataLabelTheme(r,n,t);this.applyChartItemTheme();BoldBIDashboard.isNullOrUndefined(t)&&i&&(this.defaultColorPalette=this.designerInstance.modules.themeHelper.getColorPalette(),this.updateChartData(this.dataValues));this.designerInstance.designerPanel.hideLoadingIndicator(this.controlContainer);this.isThemeSwitch=!1},t.prototype.updateTitleSubtitleTheme=function(){var n=this.designerInstance.modules.themeHelper.getChartHeaderTitle(),t=this.designerInstance.modules.themeHelper.getChartHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getChartProperties().ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.canCombineRequest=function(){var n=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(this.DataGroupInfo),t=n.rowLength;return t>0?!1:!0},t.prototype.applyPrimaryXAxisTheme=function(n){var t=n.model.primaryXAxis;t.title.font.color=this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getChartAxisTitleFontColor();t.font.color=this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getChartAxisLabelFontColor();t.majorGridLines.color=this.themeHelper.getChartMajorGridLinesColor();t.majorTickLines.color=this.themeHelper.getChartMajorTickLinesColor();t.axisLine.color=this.themeHelper.getChartMajorGridLinesColor()},t.prototype.performSelectedWidgetAction=function(n,t,i,r){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.performSelectedAction(n,t,i,r)},t.prototype.processFilterInformation=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.processFilterInformation(n,this,this.DataGroupInfo)},t.prototype.applyPrimaryYAxisTheme=function(n){var t=n.model.primaryYAxis;t.title.font.color=this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getChartAxisTitleFontColor();t.font.color=this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getChartAxisLabelFontColor();t.majorGridLines.color=this.themeHelper.getChartMajorGridLinesColor();t.majorTickLines.color=this.themeHelper.getChartMajorTickLinesColor()},t.prototype.applySecondaryAxisTheme=function(){if(!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ChartSeriesTypeInfo)&&this.getChartProperties().ChartSeriesTypeInfo.length>0&&this.getChartProperties().ChartSeriesTypeInfo.filter(function(n){return n.IsSecondaryAxis}).length>0&&!BoldBIDashboard.isNullOrUndefined(this.chartObj.model.axes[0])){var n=this.chartObj.model.axes[0];n.title.font.color=this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getChartAxisTitleFontColor();n.font.color=this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getChartAxisLabelFontColor();n.majorGridLines.color=this.themeHelper.getChartMajorGridLinesColor();n.majorTickLines.color=this.themeHelper.getChartMajorTickLinesColor()}},t.prototype.applyLegendTheme=function(){this.chartObj.model.legend.font.color=this.getChartProperties().LegendLabel.IsEdited?this.getChartProperties().LegendLabel.Color:this.themeHelper.getChartLegendFontColor();this.chartObj.model.legend.title.font.color=this.getChartProperties().LegendLabel.IsEdited?this.getChartProperties().LegendLabel.Color:this.themeHelper.getChartLegendFontColor()},t.prototype.applyDataLabelTheme=function(n,t,i){for(var r,u,h,f,e,o,l=!BoldBIDashboard.isNullOrUndefined(this.drillLevelInfo)&&this.drillLevelInfo.length>0,c=this.ContentContainer.find(".e-datavisualization-chart"),s=0;s<c.length;s++)if(r=this.bbdesigner$(c[s]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(r))for(r.model.commonSeriesOptions.marker.dataLabel.font.color=this.getChartProperties().ValueLabel.IsEdited?this.getChartProperties().ValueLabel.Color:this.themeHelper.getChartDataLabelFontColor(),u=0;u<r.model.series.length;u++)h=this.themeHelper.getChartDataLabelFont(),r.model.series[u].marker.dataLabel.font.color=this.getChartProperties().ValueLabel.IsEdited?this.getChartProperties().ValueLabel.Color:this.themeHelper.getChartDataLabelFontColor(),r.model.series[u].marker.border.color=this.themeHelper.getChartMarkerColor(),n&&(r.model.title.font.color=this.themeHelper.getProportionChartTitleFontColor()),r.model.series[u].marker.dataLabel.font.size=this.getChartProperties().IsAutoValueLabelFontSize?h.size:this.getChartProperties().ValueLabelFontSize+"px",r.model.series[u].marker.dataLabel.font.fontFamily=h.family,r.model.series[u].marker.dataLabel.font.fontWeight=h.weight,r.model.legend.font.color=this.getChartProperties().LegendLabel.IsEdited?this.getChartProperties().LegendLabel.Color:this.themeHelper.getChartLegendFontColor(),r.model.legend.title.font.color=this.getChartProperties().LegendLabel.IsEdited?this.getChartProperties().LegendLabel.Color:this.themeHelper.getChartLegendFontColor(),l&&(f=r.model.primaryXAxis,f.title.font.color=this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getChartAxisTitleFontColor(),f.font.color=this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getChartAxisLabelFontColor(),f.majorGridLines.color=this.themeHelper.getChartMajorGridLinesColor(),f.majorTickLines.color=this.themeHelper.getChartMajorTickLinesColor(),e=r.model.primaryYAxis,e.title.font.color=this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getChartAxisTitleFontColor(),e.font.color=this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getChartAxisLabelFontColor(),e.majorGridLines.color=this.themeHelper.getChartMajorGridLinesColor(),e.majorTickLines.color=this.themeHelper.getChartMajorTickLinesColor(),!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ChartSeriesTypeInfo)&&this.getChartProperties().ChartSeriesTypeInfo.length>0&&this.getChartProperties().ChartSeriesTypeInfo.filter(function(n){return n.IsSecondaryAxis}).length>0&&(BoldBIDashboard.isNullOrUndefined(r.model.axes[0])||(o=r.model.axes[0],o.title.font.color=this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getChartAxisTitleFontColor(),o.font.color=this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getChartAxisLabelFontColor(),o.majorGridLines.color=this.themeHelper.getChartMajorGridLinesColor(),o.majorTickLines.color=this.themeHelper.getChartMajorTickLinesColor())),this.bbdesigner$(c[s]).css("background","transparent"),this.chartElement.css("background","transparent"),BoldBIDashboard.isNullOrUndefined(i)&&r.redraw(),this.applyBreadCrumbTheme(t))},t.prototype.applyFontCustomization=function(){for(var n,t,i,r,u,e=this.ContentContainer.find(".e-datavisualization-chart"),f=0;f<e.length;f++)n=this.bbdesigner$(e[f]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(n)||(t=this.themeHelper.getChartAxisTitleFont(),i=this.themeHelper.getChartAxisLabelFont(),n.model.primaryXAxis.title.font.size=this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize?t.size:this.getChartProperties().Axis.CategoryAxis.CategoryAxisTitleFontSize+"px",n.model.primaryYAxis.title.font.size=this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize?t.size:this.getChartProperties().Axis.PrimaryValueAxis.PrimaryTitleFontSize+"px",n.model.primaryXAxis.title.font.fontWeight=n.model.primaryYAxis.title.font.fontWeight=t.weight,n.model.primaryXAxis.title.font.fontFamily=n.model.primaryYAxis.title.font.fontFamily=t.family,n.model.primaryXAxis.font.size=this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisLabelFontSize?i.size:this.getChartProperties().Axis.CategoryAxis.CategoryAxisLabelFontSize+"px",n.model.primaryYAxis.font.size=this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize?i.size:this.getChartProperties().Axis.PrimaryValueAxis.PrimaryLabelFontSize+"px",n.model.primaryXAxis.font.fontWeight=n.model.primaryYAxis.font.fontWeight=i.weight,n.model.primaryXAxis.font.fontFamily=n.model.primaryYAxis.font.fontFamily=i.family,!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ChartSeriesTypeInfo)&&this.getChartProperties().ChartSeriesTypeInfo.length>0&&this.getChartProperties().ChartSeriesTypeInfo.filter(function(n){return n.IsSecondaryAxis}).length>0&&(BoldBIDashboard.isNullOrUndefined(n.model.axes[0])||(n.model.axes[0].title.font.size=this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize?t.size:this.getChartProperties().Axis.SecondaryValueAxis.SecondaryTitleFontSize+"px",n.model.axes[0].title.font.fontWeight=t.weight,n.model.axes[0].title.font.fontFamily=t.family,n.model.axes[0].font.size=this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize?i.size:this.getChartProperties().Axis.SecondaryValueAxis.SecondaryLabelFontSize+"px",n.model.axes[0].font.fontWeight=i.weight,n.model.axes[0].font.fontFamily=i.family)),r=this.themeHelper.getChartLegendFont(),u=this.themeHelper.getChartLegendTitleFont(),n.model.legend.font.size=this.getChartProperties().IsAutoLegendFontSize?r.size:this.getChartProperties().LegendFontSize+"px",n.model.legend.font.fontFamily=r.family,n.model.legend.font.fontWeight=r.weight,n.model.legend.title.font.size=this.getChartProperties().IsAutoLegendTitleFontSize?u.size:this.getChartProperties().LegendTitleFontSize+"px",n.model.legend.title.font.fontFamily=u.family,n.model.legend.title.font.fontWeight=u.weight)},t.prototype.applyBreadCrumbTheme=function(n){this.contentContainer.find(".Breadcrumb .e-current-drilldowntext").addClass("e-chart-dbrd-theme");this.contentContainer.find(".Breadcrumb .e-dashboardbreadcrumb-drillIconForward").addClass("e-chart-dbrd-theme");this.contentContainer.find(".e-breadcrumb").addClass("e-chart-dbrd-theme");n?(this.contentContainer.find(".Breadcrumb .e-current-drilldowntext").addClass("e-breadcrumb-dark"),this.contentContainer.find(".Breadcrumb .e-dashboardbreadcrumb-drillIconForward").addClass("e-breadcrumb-dark")):(this.contentContainer.find(".Breadcrumb .e-current-drilldowntext").removeClass("e-breadcrumb-dark"),this.contentContainer.find(".Breadcrumb .e-dashboardbreadcrumb-drillIconForward").removeClass("e-breadcrumb-dark"));var t=this.designerId+"chartElement"+this.widgetJson.UniqueName+"Breadcrumb";this.designerInstance.element.find("#"+t).css("background","transparent");this.designerInstance.element.find("#"+t+"_breadcrumbDiv").css("background","transparent")},t.prototype.applyChartAreaBackground=function(){this.chartObj.model.chartArea.background="transparent"},t.prototype.applyChartItemTheme=function(){this.chartItem.css("background","transparent")},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej1.chart.all.min.js",NameSpace:"BoldBIDashboard.datavisualization.Chart"},DependentScripts:[]}},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.chartElement)||this.updateChartSize()},t.prototype.updateSubTitleForContainer=function(){if(this.getContainerSettings().ShowHeader&&!BoldBIDashboard.isNullOrUndefined(this.getContainerSettings().SubTitle)&&this.getContainerSettings().SubTitle!==""){var n=this.controlContainer.find(".bbi-dbrd-control-header").height();this.cellInfo.RowSpan<=8?(this.controlContainer.find(".bbi-dbrd-control-sub-header").css("display","none"),n=this.getChartProperties().ShowLegendAsDropDown&&!this.getChartProperties().EnableColorSettings?this.controlContainer.find(".bbi-dbrd-control-sub-header").outerHeight()+this.controlContainer.find(".e-dbrd-legend-dropdown-wrapper").outerHeight():this.controlContainer.find(".bbi-dbrd-control-dbrd-control-sub-header").outerHeight()):(this.controlContainer.find(".bbi-dbrd-control-sub-header").css("display","block"),n=this.getChartProperties().ShowLegendAsDropDown&&!this.getChartProperties().EnableColorSettings?n+this.controlContainer.find(".bbi-dbrd-control-sub-header").outerHeight()+this.controlContainer.find(".e-dbrd-legend-dropdown-wrapper").outerHeight():n+this.controlContainer.find(".bbi-dbrd-control-dbrd-control-sub-header").outerHeight());this.contentContainer.css("height","calc(100% - "+n+"px)");this.IsRendered&&this.updateSize(this.cellInfo)}},t.prototype.getWidgetImage=function(n){var t=BoldBIDashboard.isNullOrUndefined(n)?this.getChartProperties().ChartType:n.subType;switch(t){case"Bar":return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Bar-thumbnail-" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="Group" transform="translate(12.000000, 12.000000)" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero">            <path d="M78.3431661,-73.6170706 L103.687598,-73.6170706 C105.609549,-73.6170706 107.167598,-72.0590216 107.167598,-70.1370707 L107.167598,107.075232 L107.167598,107.075232 L74.8631662,107.075232 L74.8631662,-70.1370707 C74.8631662,-72.0590216 76.4212153,-73.6170706 78.3431661,-73.6170706 Z" id="Rectangle" transform="translate(91.015382, 16.729081) rotate(90.000000) translate(-91.015382, -16.729081) "><\/path>            <path d="M91.7277811,14.7572709 L117.072213,14.7572709 C118.994164,14.7572709 120.552213,16.3153199 120.552213,18.2372708 L120.552213,222.218803 L120.552213,222.218803 L88.2477812,222.218803 L88.2477812,18.2372708 C88.2477812,16.3153199 89.8058303,14.7572709 91.7277811,14.7572709 Z" id="Rectangle-Copy-2" transform="translate(104.399997, 118.488037) rotate(90.000000) translate(-104.399997, -118.488037) "><\/path>            <path d="M113.812396,-58.2068221 L139.156828,-58.2068221 C141.078778,-58.2068221 142.636827,-56.6487731 142.636827,-54.7268222 L142.636827,193.42394 L142.636827,193.42394 L110.332396,193.42394 L110.332396,-54.7268222 C110.332396,-56.6487731 111.890445,-58.2068221 113.812396,-58.2068221 Z" id="Rectangle-Copy" transform="translate(126.484612, 67.608559) rotate(90.000000) translate(-126.484612, -67.608559) "><\/path>            <path d="M137.904703,18.5138366 L163.249135,18.5138366 C165.171085,18.5138366 166.729134,20.0718856 166.729134,21.9938365 L166.729134,316.990751 L166.729134,316.990751 L134.424703,316.990751 L134.424703,21.9938365 C134.424703,20.0718856 135.982752,18.5138366 137.904703,18.5138366 Z" id="Rectangle-Copy-3" transform="translate(150.576919, 167.752294) rotate(90.000000) translate(-150.576919, -167.752294) "><\/path>        <\/g>    <\/g><\/svg>';case"Column":return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Column-thumbnail-" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="100-%-Stacked-column" transform="translate(12.000000, 12.000000)" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero">            <path d="M4,92 L48.293578,92 C50.502717,92 52.293578,93.790861 52.293578,96 L52.293578,184 L52.293578,184 L0,184 L0,96 C-2.705415e-16,93.790861 1.790861,92 4,92 Z" id="Rectangle"><\/path>            <path d="M86.5688073,22.7012987 L130.862385,22.7012987 C133.071524,22.7012987 134.862385,24.4921597 134.862385,26.7012987 L134.862385,184 L134.862385,184 L82.5688073,184 L82.5688073,26.7012987 C82.5688073,24.4921597 84.3596683,22.7012987 86.5688073,22.7012987 Z" id="Rectangle"><\/path>            <path d="M170.513761,59.7402597 L214.807339,59.7402597 C217.016478,59.7402597 218.807339,61.5311207 218.807339,63.7402597 L218.807339,184 L218.807339,184 L166.513761,184 L166.513761,63.7402597 C166.513761,61.5311207 168.304622,59.7402597 170.513761,59.7402597 Z" id="Rectangle"><\/path>            <path d="M251.706422,0 L296,0 C298.209139,3.51840692e-15 300,1.790861 300,4 L300,184 L300,184 L247.706422,184 L247.706422,4 C247.706422,1.790861 249.497283,4.05812251e-16 251.706422,0 Z" id="Rectangle"><\/path>        <\/g>    <\/g><\/svg>';case"Stacked Bar":return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 61.2 (89653) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Stacked-bar-" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="100-%-Stacked-bar" transform="translate(12.000000, 12.000000)" fill-rule="nonzero">            <polygon id="Rectangle" fill="var(--widget-notconfigured-image-background2)" transform="translate(85.500000, 16.560000) rotate(90.000000) translate(-85.500000, -16.560000) " points="69.4 -68.9400004 101.6 -68.9400004 101.6 102.06 69.4 102.06"><\/polygon>            <path d="M185.196069,-6.72500178 L210.036069,-6.72500178 C212.068477,-6.72500178 213.716069,-5.07740966 213.716069,-3.04500178 L213.716069,141.274998 L213.716069,141.274998 L181.516069,141.274998 L181.516069,-3.04500178 C181.516069,-5.07740966 183.163661,-6.72500178 185.196069,-6.72500178 Z" id="Rectangle-Copy-5" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" transform="translate(197.616069, 67.274998) rotate(90.000000) translate(-197.616069, -67.274998) "><\/path>            <path d="M163.517497,70.4899969 L188.357497,70.4899969 C190.389905,70.4899969 192.037497,72.137589 192.037497,74.1699969 L192.037497,165.489997 L192.037497,165.489997 L159.837497,165.489997 L159.837497,74.1699969 C159.837497,72.137589 161.485089,70.4899969 163.517497,70.4899969 Z" id="Rectangle-Copy-6" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" transform="translate(175.937497, 117.989997) rotate(90.000000) translate(-175.937497, -117.989997) "><\/path>            <path d="M201.597852,82.0896407 L226.437852,82.0896407 C228.47026,82.0896407 230.117852,83.7372328 230.117852,85.7696407 L230.117852,253.25035 L230.117852,253.25035 L197.917852,253.25035 L197.917852,85.7696407 C197.917852,83.7372328 199.565444,82.0896407 201.597852,82.0896407 Z" id="Rectangle-Copy-8" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" transform="translate(214.017852, 167.669996) rotate(90.000000) translate(-214.017852, -167.669996) "><\/path>            <polygon id="Rectangle-Copy-2" fill="var(--widget-notconfigured-image-background2)" transform="translate(81.000000, 117.989997) rotate(90.000000) translate(-81.000000, -117.989997) " points="64.9 36.9899969 97.1 36.9899969 97.1 198.989997 64.9 198.989997"><\/polygon>            <polygon id="Rectangle-Copy" fill="var(--widget-notconfigured-image-background2)" transform="translate(95.500000, 67.274998) rotate(90.000000) translate(-95.500000, -67.274998) " points="79.4 -28.2250018 111.6 -28.2250018 111.6 162.774998 79.4 162.774998"><\/polygon>            <polygon id="Rectangle-Copy-3" fill="var(--widget-notconfigured-image-background2)" transform="translate(74.000000, 167.669996) rotate(90.000000) translate(-74.000000, -167.669996) " points="57.9 93.6699956 90.1 93.6699956 90.1 241.669996 57.9 241.669996"><\/polygon>            <path d="M195.508564,-20.4400004 L220.348564,-20.4400004 C222.380971,-20.4400004 224.028564,-18.7924083 224.028564,-16.7600004 L224.028564,53.5599996 L224.028564,53.5599996 L191.828564,53.5599996 L191.828564,-16.7600004 C191.828564,-18.7924083 193.476156,-20.4400004 195.508564,-20.4400004 Z" id="Rectangle-Copy-4" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" transform="translate(207.928564, 16.560000) rotate(90.000000) translate(-207.928564, -16.560000) "><\/path>        <\/g>    <\/g><\/svg>';case"Stacked Column":return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Stacked-Coloumn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g transform="translate(12.000000, 12.000000)" fill-rule="nonzero">            <rect id="Rectangle" fill="var(--widget-notconfigured-image-background2)" x="0" y="107.862069" width="52.293578" height="76.137931"><\/rect>            <path d="M4,0 L48.293578,0 C50.502717,-4.05812251e-16 52.293578,1.790861 52.293578,4 L52.293578,107.862069 L52.293578,107.862069 L0,107.862069 L0,4 C-2.705415e-16,1.790861 1.790861,4.05812251e-16 4,0 Z" id="Rectangle" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)"><\/path>            <path d="M86.5688073,36.8 L130.862385,36.8 C133.071524,36.8 134.862385,38.590861 134.862385,40.8 L134.862385,76.137931 L134.862385,76.137931 L82.5688073,76.137931 L82.5688073,40.8 C82.5688073,38.590861 84.3596683,36.8 86.5688073,36.8 Z" id="Rectangle" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)"><\/path>            <path d="M170.513761,13.9586207 L214.807339,13.9586207 C217.016478,13.9586207 218.807339,15.7494817 218.807339,17.9586207 L218.807339,72.3310345 L218.807339,72.3310345 L166.513761,72.3310345 L166.513761,17.9586207 C166.513761,15.7494817 168.304622,13.9586207 170.513761,13.9586207 Z" id="Rectangle" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)"><\/path>            <path d="M251.706422,36.8 L296,36.8 C298.209139,36.8 300,38.590861 300,40.8 L300,85.0206897 L300,85.0206897 L247.706422,85.0206897 L247.706422,40.8 C247.706422,38.590861 249.497283,36.8 251.706422,36.8 Z" id="Rectangle" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)"><\/path>            <rect id="Rectangle-Copy-2" fill="var(--widget-notconfigured-image-background2)" x="166.513761" y="72.3310345" width="52.293578" height="111.668966"><\/rect>            <rect id="Rectangle-Copy" fill="var(--widget-notconfigured-image-background2)" x="82.5688073" y="76.137931" width="52.293578" height="107.862069"><\/rect>            <rect id="Rectangle-Copy-3" fill="var(--widget-notconfigured-image-background2)" x="247.706422" y="82.4827586" width="52.293578" height="101.517241"><\/rect>        <\/g>    <\/g><\/svg>';case"100% Stacked Bar":return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="100-%-Stacked-bar" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g transform="translate(12.000000, 12.000000)" fill-rule="nonzero">            <polygon id="Rectangle" fill="var(--widget-notconfigured-image-background2)" transform="translate(74.129462, 16.560000) rotate(90.000000) translate(-74.129462, -16.560000) " points="58.0294623 -57.5694628 90.2294623 -57.5694628 90.2294623 90.6894619 58.0294623 90.6894619"><\/polygon>            <path d="M211.173744,-58.7748199 L236.013744,-58.7748199 C238.046152,-58.7748199 239.693744,-57.1272278 239.693744,-55.0948199 L239.693744,91.894819 L239.693744,91.894819 L207.493744,91.894819 L207.493744,-55.0948199 C207.493744,-57.1272278 209.141336,-58.7748199 211.173744,-58.7748199 Z" id="Rectangle-Copy-4" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" transform="translate(223.593744, 16.560000) rotate(90.000000) translate(-223.593744, -16.560000) "><\/path>            <path d="M199.187138,-20.7160709 L224.027138,-20.7160709 C226.059546,-20.7160709 227.707138,-19.0684788 227.707138,-17.0360709 L227.707138,155.266067 L227.707138,155.266067 L195.507138,155.266067 L195.507138,-17.0360709 C195.507138,-19.0684788 197.15473,-20.7160709 199.187138,-20.7160709 Z" id="Rectangle-Copy-5" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" transform="translate(211.607138, 67.274998) rotate(90.000000) translate(-211.607138, -67.274998) "><\/path>            <path d="M201.597852,32.409642 L226.437852,32.409642 C228.47026,32.409642 230.117852,34.0572341 230.117852,36.089642 L230.117852,203.570352 L230.117852,203.570352 L197.917852,203.570352 L197.917852,36.089642 C197.917852,34.0572341 199.565444,32.409642 201.597852,32.409642 Z" id="Rectangle-Copy-6" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" transform="translate(214.017852, 117.989997) rotate(90.000000) translate(-214.017852, -117.989997) "><\/path>            <path d="M201.597852,82.0896407 L226.437852,82.0896407 C228.47026,82.0896407 230.117852,83.7372328 230.117852,85.7696407 L230.117852,253.25035 L230.117852,253.25035 L197.917852,253.25035 L197.917852,85.7696407 C197.917852,83.7372328 199.565444,82.0896407 201.597852,82.0896407 Z" id="Rectangle-Copy-8" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" transform="translate(214.017852, 167.669996) rotate(90.000000) translate(-214.017852, -167.669996) "><\/path>            <polygon id="Rectangle-Copy-2" fill="var(--widget-notconfigured-image-background2)" transform="translate(74.129462, 117.989997) rotate(90.000000) translate(-74.129462, -117.989997) " points="58.0294623 43.8605346 90.2294623 43.8605346 90.2294623 192.119459 58.0294623 192.119459"><\/polygon>            <polygon id="Rectangle-Copy" fill="var(--widget-notconfigured-image-background2)" transform="translate(106.674104, 67.102501) rotate(90.000000) translate(-106.674104, -67.102501) " points="90.5741043 -39.3707136 122.774104 -39.3707136 122.774104 173.575715 90.5741043 173.575715"><\/polygon>            <polygon id="Rectangle-Copy-3" fill="var(--widget-notconfigured-image-background2)" transform="translate(112.098211, 167.669996) rotate(90.000000) translate(-112.098211, -167.669996) " points="95.9982113 55.5717842 128.198211 55.5717842 128.198211 279.768207 95.9982113 279.768207"><\/polygon>        <\/g>    <\/g><\/svg>';case"100% Stacked Column":return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="100-%-Stacked-column" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g transform="translate(12.000000, 12.000000)" fill-rule="nonzero">            <rect id="Rectangle" fill="var(--widget-notconfigured-image-background2)" x="0" y="85.6986301" width="52.293578" height="98.3013699"><\/rect>            <path d="M4,1.26027397 L48.293578,1.26027397 C50.502717,1.26027397 52.293578,3.05113497 52.293578,5.26027397 L52.293578,85.6986301 L52.293578,85.6986301 L0,85.6986301 L0,5.26027397 C-2.705415e-16,3.05113497 1.790861,1.26027397 4,1.26027397 Z" id="Rectangle" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)"><\/path>            <path d="M86.5688073,0 L130.862385,0 C133.071524,-4.33003142e-15 134.862385,1.790861 134.862385,4 L134.862385,39.0684932 L134.862385,39.0684932 L82.5688073,39.0684932 L82.5688073,4 C82.5688073,1.790861 84.3596683,4.05812251e-16 86.5688073,0 Z" id="Rectangle" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)"><\/path>            <path d="M170.513761,1.26027397 L214.807339,1.26027397 C217.016478,1.26027397 218.807339,3.05113497 218.807339,5.26027397 L218.807339,83.1780822 L218.807339,83.1780822 L166.513761,83.1780822 L166.513761,5.26027397 C166.513761,3.05113497 168.304622,1.26027397 170.513761,1.26027397 Z" id="Rectangle" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)"><\/path>            <path d="M251.706422,0 L296,0 C298.209139,3.51840692e-15 300,1.790861 300,4 L300,47.890411 L300,47.890411 L247.706422,47.890411 L247.706422,4 C247.706422,1.790861 249.497283,4.05812251e-16 251.706422,0 Z" id="Rectangle" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)"><\/path>            <rect id="Rectangle-Copy-2" fill="var(--widget-notconfigured-image-background2)" x="166.513761" y="83.1780822" width="52.293578" height="100.821918"><\/rect>            <rect id="Rectangle-Copy" fill="var(--widget-notconfigured-image-background2)" x="82.5688073" y="39.0684932" width="52.293578" height="144.931507"><\/rect>            <rect id="Rectangle-Copy-3" fill="var(--widget-notconfigured-image-background2)" x="247.706422" y="47.890411" width="52.293578" height="136.109589"><\/rect>        <\/g>    <\/g><\/svg>';case"Area":return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Area" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g transform="translate(12.000000, 12.000000)" fill-rule="nonzero">            <polygon id="Path-12" fill-opacity="0.5" fill="var(--widget-notconfigured-image-background1)" points="0 105.9381 137.080019 128.097633 199.58843 50.2928125 299.531242 38.12374 299.531242 182.279132 0 182.279132"><\/polygon>            <polygon id="Path-11" fill="var(--widget-notconfigured-image-background1)" points="0 95.4234186 89.5909757 0 199.955892 117.73732 299.531242 73.4031203 299.531242 182.279132 0 182.279132"><\/polygon>            <polygon id="Path-13" fill="var(--widget-notconfigured-image-background2)" points="0 117.945321 199.743597 161.488448 299.531242 139.716884 299.531242 183.470499 0 183.470499"><\/polygon>        <\/g>    <\/g><\/svg>';case"Stacked Area":return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Stacked-Area" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g transform="translate(12.000000, 12.000000)" fill-rule="nonzero">            <polygon id="Path-14" fill-opacity="0.5" fill="var(--widget-notconfigured-image-background1)" points="0 42.9250709 99.6858989 0 211.441815 42.9250709 300 10.2558525 300 182.32073 0 182.32073"><\/polygon>            <polygon id="Path-15" fill="var(--widget-notconfigured-image-background1)" points="0 87.8445135 96.0633848 47.0195567 209.783527 67.4320351 300 47.0195567 300 183.280313 0 183.280313"><\/polygon>            <polygon id="Path-18" fill="var(--widget-notconfigured-image-background2)" points="0 129.717236 97.7194033 162.103724 204.17534 109.52102 300 97.8774446 300 183.280313 0 183.280313"><\/polygon>        <\/g>    <\/g><\/svg>';case"100% Stacked Area":return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="100-Stacked-Area" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="Group" transform="translate(12.000000, 12.000000)">            <polygon id="Path-6" fill="var(--widget-notconfigured-image-background3)" opacity="0.800939" transform="translate(149.998963, 92.000000) scale(-1, -1) translate(-149.998963, -92.000000) " points="8.52651283e-14 184 299.997925 184 299.997925 80.9502997 0.35087439 1.02318154e-12"><\/polygon>            <polygon id="Path-11" fill="var(--widget-notconfigured-image-background1)" fill-rule="nonzero" points="-0.00207472407 78.0940736 85.7230247 0 200.270681 116.837858 299.804487 56.7583174 299.997925 184 -5.68434189e-14 184"><\/polygon>            <polygon id="Path-13" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero" points="0 107.462187 199.820825 158.323487 299.647051 132.892837 299.647051 184 0 184"><\/polygon>        <\/g>    <\/g><\/svg>';case"Line":return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Line" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="Group" transform="translate(12.000000, 12.000000)">            <g id="Line" transform="translate(11.500000, 12.500000)" stroke="#D8D8D8" stroke-linecap="round" stroke-width="6.12">                <polyline id="Path-8" points="0.422126339 159.35 62.8460706 0.65 109.642249 159.35 169.425247 40.0622837 216.777778 161.886741 279.277778 78.275"><\/polyline>            <\/g>            <circle id="Oval-Copy-9-Copy-4" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero" transform="translate(12.000000, 172.000000) scale(1, -1) translate(-12.000000, -172.000000) " cx="12" cy="172" r="11.5"><\/circle>            <circle id="Oval-Copy-9-Copy-5" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero" transform="translate(74.000000, 12.000000) scale(1, -1) translate(-74.000000, -12.000000) " cx="74" cy="12" r="11.5"><\/circle>            <circle id="Oval-Copy-9-Copy-6" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero" transform="translate(121.000000, 172.000000) scale(1, -1) translate(-121.000000, -172.000000) " cx="121" cy="172" r="11.5"><\/circle>            <circle id="Oval-Copy-9-Copy-7" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero" transform="translate(181.000000, 51.000000) scale(1, -1) translate(-181.000000, -51.000000) " cx="181" cy="51" r="11.5"><\/circle>            <circle id="Oval-Copy-9-Copy-8" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero" transform="translate(288.500000, 91.500000) scale(1, -1) translate(-288.500000, -91.500000) " cx="288.5" cy="91.5" r="11.5"><\/circle>            <circle id="Oval-Copy-9-Copy-9" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero" transform="translate(228.500000, 172.000000) scale(1, -1) translate(-228.500000, -172.000000) " cx="228.5" cy="172" r="11.5"><\/circle>        <\/g>    <\/g><\/svg>';case"Spline":return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Spiline-" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="Group-2" transform="translate(12.000000, 12.000000)">            <g id="Group" transform="translate(0.000000, 11.000000)">                <g id="c" transform="translate(142.500000, 82.000000) scale(1, -1) translate(-142.500000, -82.000000) " stroke="#D8D8D8" stroke-linecap="round" stroke-width="6.12244898">                    <path d="M0.896410361,139.289363 C21.4940881,62.6434513 19.6596031,-1.61115152 57.1312392,0.936991991 C94.6028754,3.48513551 86.0804126,164 137,164 C187.919587,164 170.655465,46.5225754 214.827725,46.5225754 C244.275898,46.5225754 267.666657,67.7351059 285,110.160167" id="Path-8"><\/path>                <\/g>                <circle id="Oval-Copy-9-Copy" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero" transform="translate(288.500000, 47.000000) scale(1, -1) translate(-288.500000, -47.000000) " cx="288.5" cy="47" r="11.5"><\/circle>                <circle id="Oval-Copy-9-Copy-2" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero" transform="translate(231.500000, 114.500000) scale(1, -1) translate(-231.500000, -114.500000) " cx="231.5" cy="114.5" r="11.5"><\/circle>            <\/g>            <circle id="Oval-Copy-9-Copy-3" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero" transform="translate(137.000000, 11.500000) scale(1, -1) translate(-137.000000, -11.500000) " cx="137" cy="11.5" r="11.5"><\/circle>            <circle id="Oval-Copy-9-Copy-4" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero" transform="translate(54.500000, 172.500000) scale(1, -1) translate(-54.500000, -172.500000) " cx="54.5" cy="172.5" r="11.5"><\/circle>        <\/g>    <\/g><\/svg>';case"Spline Area":return'<svg width="100%" height = "100%" viewBox = "0 0 324 208" version = "1.1" xmlns = "http://www.w3.org/2000/svg" xmlns: xlink = "http://www.w3.org/1999/xlink" >   <!--Generator: Sketch 63.1(92452) - https://sketch.com -->   <desc> Created with Sketch.<\/desc>   < g id = "Spline-Area" stroke = "none" stroke - width="1" fill = "none" fill - rule="evenodd" >        <path d="M12,172.360809 L12,104 C31.6342461,109.453304 53.5295022,108.294089 77.6857684,100.522355 C113.920168,88.8647556 115.662611,74.1922186 139.536828,72.3839533 C148.546586,71.7015422 155.427584,77.8598042 162.866355,85.5519724 C168.568511,91.448368 177.063887,114.090196 183.024819,114.090196 C188.985752,114.090196 193.444714,108.79263 198.554392,105.019882 C224.629836,85.7669931 220.940262,59.2345121 239.375376,48.9981132 C257.810491,38.7617143 277.790501,124.006331 286.189675,124.006331 C291.789124,124.006331 300.392566,107.401627 312,74.1922186 L312,158.317867 L12,172.360809 Z" id="Path-24" fill="var(--widget-notconfigured-image-background1)"><\/path>        <path d="M12,104.192097 C27.413984,61.039697 40.953419,37.9663967 52.618305,34.9721966 C70.1156342,30.4808966 85.4939668,101.704392 100.25161,110.297993 C115.009254,118.891593 133.847792,107.191026 149.056998,91.1299164 C164.266204,75.068807 175.680508,81.7519762 185.247973,81.7519762 C194.815437,81.7519762 209.5739,67.705705 214.217852,60.1216687 C223.874773,44.350953 214.217852,12 242.380157,12 C260.945812,12 278.183168,131.836301 287.146663,129.316242 C293.122326,127.636203 301.406772,102.379831 312,53.5471267 L312,196 L12,196 L12,104.192097 Z" id="Path-25" fill-opacity="0.5" fill="var(--widget-notconfigured-image-background1)"><\/path>        <path d="M12,157.514692 C12,145.268517 26.6319467,137.023772 42.3219098,136.36439 C58.011873,135.705008 58.8227456,147.638097 79.3491694,144.901738 C99.8755932,142.165378 125.437453,108.015746 143.079201,104.628592 C160.720948,101.241437 178.3636,118.176442 184.197381,117.662675 C190.031162,117.148909 228.880076,73.6497895 233.136515,70.685953 C234.875245,69.4752435 241.602581,61.9048621 249.830852,70.685953 C253.396303,74.49095 258.665133,86.323182 265.637343,106.182649 C274.143293,131.17837 280.685105,144.084732 285.26278,144.901738 C292.129293,146.127245 295.896637,144.901738 302.169007,131.63072 C306.350587,122.783376 309.627584,109.317519 312,91.2331506 L312,196 L12,196 C12,170.514778 12,157.686342 12,157.514692 Z" id="Path-23-Copy" fill="var(--widget-notconfigured-image-background2)"><\/path>      < /g>    < /svg>';case"Pie":return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Pie" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="Group" transform="translate(70.000000, 12.000000)">            <path d="M184,92 C184,142.810197 142.810197,184 92,184 C66.5933863,184 43.592158,173.701321 26.9431973,157.050845 L91.9838742,92 L184,92 Z M22.9954065,152.848756 C23.0490317,152.909522 23.102736,152.970217 23.1565191,153.030841 C23.1291151,152.999951 23.1017708,152.969088 23.074447,152.938206 Z M22.0916027,151.809099 C22.1338919,151.858483 22.1762325,151.907821 22.2186244,151.957114 C22.1944078,151.928955 22.170217,151.900792 22.1460429,151.872614 Z M17.6299397,146.168928 C17.7113026,146.280442 17.7929102,146.391767 17.8747618,146.5029 C17.8333219,146.446636 17.7919613,146.390345 17.7506633,146.334005 Z M15.2021536,142.67501 C15.2707876,142.778816 15.3396265,142.882474 15.4086697,142.985984 C15.3782124,142.940322 15.3478698,142.894744 15.3175668,142.849138 Z M6.09741243,125.004684 C6.13307562,125.097447 6.16888473,125.190137 6.2048395,125.282755 C6.1874089,125.237855 6.17004576,125.193023 6.15271674,125.148174 Z M4.19893079,119.559053 C4.22791025,119.651472 4.2570316,119.743828 4.28629459,119.836122 C4.27219717,119.791659 4.25824294,119.747531 4.24432109,119.703389 Z M3.78764953,118.211057 C3.81238505,118.294429 3.83723555,118.377753 3.86220085,118.461026 C3.84788209,118.413264 3.83369041,118.365786 3.81953606,118.318291 Z" id="Combined-Shape" fill="var(--widget-notconfigured-image-background3)"><\/path>            <path d="M184,92 L92,92 L92,0 C142.810197,0 184,41.189803 184,92 Z" id="Combined-Shape" fill="var(--widget-notconfigured-image-background1)"><\/path>            <path d="M26.9434072,157.051055 C10.296309,140.402548 0,117.40369 0,92 C0,41.189803 41.189803,0 92,0 L92,92 L91.9838742,92 L26.9434072,157.051055 L26.9434072,157.051055 Z" id="Combined-Shape" fill="var(--widget-notconfigured-image-background2)"><\/path>        <\/g>    <\/g><\/svg>';case"Doughnut":return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Doghnut" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="Group" transform="translate(70.000000, 12.000000)">            <path d="M184,92 C184,142.810197 142.810197,184 92,184 C66.5933863,184 43.592158,173.701321 26.9431973,157.050845 L60.1752297,123.814839 C68.31902,131.961156 79.5710674,137 92,137 C116.852814,137 137,116.852814 137,92 L184,92 Z M23.074447,152.938206 L22.9954065,152.848756 C23.0490317,152.909522 23.102736,152.970217 23.1565191,153.030841 L23.074447,152.938206 L23.074447,152.938206 L22.9954065,152.848756 Z M22.1546495,151.883 L22.1823177,151.914871 L22.1823177,151.914871 L22.2186244,151.957114 L22.2186244,151.957114 L22.1546495,151.883 Z M22.1460429,151.872614 L22.1460429,151.872614 L22.1546495,151.883 L22.0916027,151.809099 Z M15.3175668,142.849138 L15.2021536,142.67501 C15.2707876,142.778816 15.3396265,142.882474 15.4086697,142.985984 L15.3175668,142.849138 L15.3175668,142.849138 L15.2021536,142.67501 Z M3.81953606,118.318291 L3.83364953,118.366 L3.81953606,118.318291 L3.81953606,118.318291 L3.78764953,118.211057 Z" id="Combined-Shape" fill="var(--widget-notconfigured-image-background3)"><\/path>            <path d="M92,0 C142.810197,0 184,41.189803 184,92 L137,92 L137,92 C137,67.1471863 116.852814,47 92,47 L92,0 Z" id="Combined-Shape" fill="var(--widget-notconfigured-image-background1)"><\/path>            <path d="M92,-1.42108547e-14 L92.0010008,47 C92.0006672,47 92.0003336,47 92,47 C67.1471863,47 47,67.1471863 47,92 C47,104.423376 52.0343399,115.670919 60.1742368,123.813846 L26.9434072,157.051055 C10.296309,140.402548 7.10542736e-15,117.40369 7.10542736e-15,92 C7.10542736e-15,41.189803 41.189803,-1.42108547e-14 92,-1.42108547e-14 Z" id="Combined-Shape" fill="var(--widget-notconfigured-image-background2)"><\/path>        <\/g>    <\/g><\/svg>';case"Pyramid":return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Pyramid" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g transform="translate(70.000000, 12.000000)" fill-rule="nonzero" id="Combined-Shape">            <path d="M119.803354,53.8536585 L65.3185976,53.8536585 L89.0458612,5.96262435 C89.8711126,4.29693971 91.8904151,3.61563388 93.5560998,4.44088519 C94.1990948,4.75945241 94.7234488,5.27517957 95.052638,5.91280191 L119.803354,53.8536585 L119.803354,53.8536585 Z" fill-opacity="0.8" fill="var(--widget-notconfigured-image-background1)"><\/path>            <path d="M153.333334,123.414634 L181.52688,179.114079 C182.36639,180.772623 181.702431,182.797696 180.043887,183.637206 C179.572678,183.875719 179.051955,184 178.52382,184 L5.47617996,184 C3.61727032,184 2.11032631,182.493056 2.11032631,180.634146 C2.11032631,180.106012 2.23460726,179.585288 2.47312042,179.114079 L30.6666666,123.414634 L30.6666666,123.414634 L153.333334,123.414634 Z" fill="var(--widget-notconfigured-image-background2)"><\/path>            <polygon fill="var(--widget-notconfigured-image-background3)" points="153.333334 123.414634 30.6666666 123.414634 65.3185976 53.8536585 119.803354 53.8536585"><\/polygon>        <\/g>    <\/g><\/svg>';case"Funnel":return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Funnel" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g transform="translate(70.000000, 12.000000)" fill-rule="nonzero" id="Combined-Shape">            <path d="M38.3884892,45.0612245 L7.03147386,8.25369346 C5.23826562,6.14878752 5.49094654,2.98874161 7.59585248,1.19553337 C8.50168697,0.423836238 9.65276312,1.10677422e-15 10.8427432,0 L172.668624,0 C175.433805,-5.16591141e-14 177.675427,2.24162193 177.675427,5.00680272 C177.675427,6.25381864 177.210076,7.45595351 176.370445,8.37794489 L142.964029,45.0612245 L142.964029,45.0612245 L38.3884892,45.0612245 Z" fill-opacity="0.5" fill="var(--widget-notconfigured-image-background1)"><\/path>            <path d="M74.1294964,137.687075 L108.546763,137.687075 L108.546763,178.993197 C108.546763,181.758378 106.305141,184 103.53996,184 L79.1362991,184 C76.3711183,184 74.1294964,181.758378 74.1294964,178.993197 L74.1294964,137.687075 L74.1294964,137.687075 Z" fill="var(--widget-notconfigured-image-background2)"><\/path>            <polygon fill="var(--widget-notconfigured-image-background3)" points="74.1294964 137.687075 74.1294964 91.3741497 108.546763 91.3741497 108.546763 137.687075"><\/polygon>            <polygon fill="var(--widget-notconfigured-image-background2)" points="74.1294964 91.3741497 38.3884892 45.0612245 142.964029 45.0612245 108.546763 91.3741497"><\/polygon>        <\/g>    <\/g><\/svg>'}},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,"BoldBIDashboard.datavisualization.Chart")},t.prototype.update=function(t){this.updateTitleSubtitleTheme();n.prototype.update.call(this,t);this.IsRendered=!1;this.updateChartData(t)},t.prototype.updateDisplayTextBasedProperties=function(){this.columnBindings=this.DataColumnBindings;this.isShapeChartType(this.getChartProperties().ChartType)||this.updateAxisTitle();this.updateChartLegends();this.updateAxisLabelOnRenaming(this.chartObj.model);BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateBreadCrumbText(this);this.refresh()},t.prototype.updateAxisLabelOnRenaming=function(n){var r,t,i;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)&&this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0){var u=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(this.DataGroupInfo),f=u.valueLength,e=u.columnLength,o=u.rowLength;if(e===0&&f>0&&o>0)for(r=this.DataGroupInfo.FieldContainers[0].FieldInfos,t=0;t<r.length;t++)for(i=0;i<n.series.length;i++)n.series[i].id===r[t].UniqueColumnName&&(n.series[i].points[0].x=r[t].DisplayName)}},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.getChartProperties().ChartType+this.locale.itemPanel.widgetDataRequiredMessage.chartDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.resetProperties=function(){this.getChartProperties().ColorPalette=this.defaultColorPalette;this.getChartProperties().ColorPaletteModel=[];this.getChartProperties().IsDefaultColorPalette=!0},t.prototype.getFieldContainer=function(){var u=new BoldBIDashboard.Dashboard.FieldContainerForUI,t,r,i,f,e;return u.Name="YValue",u.DisplayName=this.locale.fieldContainer.values,u.ContainerType=FieldContainerType.Numeric,u.Required=!0,u.QueryOrder=0,t=new BoldBIDashboard.Dashboard.FieldContainerForUI,t.Name="Column",t.DisplayName=this.locale.fieldContainer.columns,t.ContainerType=FieldContainerType.Non_Numeric,t.IsDrillSection=!0,t.HasCustomDate=!0,t.QueryOrder=2,t.isCustomHierarchy=!0,r=new BoldBIDashboard.Dashboard.FieldContainerForUI,r.Name="HiddenColumn",r.DisplayName=this.locale.dataconfiguration.filedContainer.hiddenColumnName,r.ContainerType=FieldContainerType.None,r.QueryOrder=0,r.ShowDescriptionIcon=!0,r.TooltipText=this.locale.fieldContainer.hiddenColumnMessage.chart,i=new BoldBIDashboard.Dashboard.FieldContainerForUI,i.Name="Row",i.DisplayName=this.locale.fieldContainer.row,i.ContainerType=FieldContainerType.Non_Numeric,i.RestrictLargeData=!0,i.HasCustomDate=!0,i.CategoryCount=1,i.QueryOrder=1,f=n.prototype.getFilterColumn.call(this),f.HasCustomDate=!0,e=BoldBIDashboard.DashboardUtil.getToolTipFieldsDefaultContainer(),[u,t,i,r,f,e]},t.prototype.getValueContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"YValue")},t.prototype.getColumnContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Column")},t.prototype.getRowContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Row")},t.prototype.getHiddenColumnContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"HiddenColumn")},t.prototype.getPropertyPanelItems=function(){return this.updateFontsizeTitleVisibility(),this.getChartPropertyPanel()},t.prototype.updateFontsizeTitleVisibility=function(){var n=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getUpdatedSeriesAxisCount(this.getChartProperties().ChartSeriesTypeInfo);this.chartProperties.updateTitleVisibility("Chart","FontSettings","PrimaryAxisTitleFont",n.primaryValueLength>0&&!this.isShapeChartType(this.getChartProperties().ChartType)&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle,this);this.chartProperties.updateTitleVisibility("Chart","FontSettings","SecondaryAxisLabelFont",n.secondaryValueLength>0&&!this.isShapeChartType(this.getChartProperties().ChartType)&&n.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,this);this.chartProperties.updateTitleVisibility("Chart","FontSettings","SecondaryAxisTitleFont",n.secondaryValueLength>0&&!this.isShapeChartType(this.getChartProperties().ChartType)&&n.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle,this);this.chartProperties.updateTitleVisibility("Chart","FontSettings","PrimaryAxisLabelFont",n.primaryValueLength>0&&!this.isShapeChartType(this.getChartProperties().ChartType)&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,this);this.chartProperties.updateTitleVisibility("Chart","FontSettings","CategoryAxisLabelFont",!this.isShapeChartType(this.getChartProperties().ChartType)&&this.getChartProperties().Axis.CategoryAxis.IsEnabled);this.chartProperties.updateTitleVisibility("Chart","FontSettings","CategoryAxisTitleFont",!this.isShapeChartType(this.getChartProperties().ChartType)&&this.getChartProperties().Axis.CategoryAxis.IsEnabled&&this.getChartProperties().Axis.CategoryAxis.ShowTitle);this.chartProperties.updateTitleVisibility("Chart","FontSettings","Legend",this.getChartProperties().ShowLegend);this.chartProperties.updateTitleVisibility("Chart","FontSettings","LegendTitleFont",this.getChartProperties().ShowLegend);this.chartProperties.updateTitleVisibility("Chart","FontSettings","ValueLabel",this.getChartProperties().ShowValueLabels)},t.prototype.getJson=function(){return this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t);this.chartProperties.widgetJson=this.getChartProperties();this.getChartProperties().Axis.SecondaryValueAxis=BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)?new SecondaryValueAxis:this.getChartProperties().Axis.SecondaryValueAxis;this.getChartProperties().ForecastProperties=BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ForecastProperties)?new ForecastProperties:this.getChartProperties().ForecastProperties},t.prototype.updatePropertyChange=function(n,t,i,r){this.chartProperties.updateChartProperties(n,t,i,r)},t.prototype.onFieldSettingsClick=function(n,t){for(var r,i=0;i<t.length;i++)r=t[i].Name,n.ContainerName==="HiddenColumn"&&(t[i].Name==="Sort"||t[i].Name==="DimensionFilters"||t[i].Name==="MeasureFilter"||t[i].Name==="RelativeDateFilter"||t[i].Name==="MeasureFormat")?t[i].IsVisible=!1:r===SummaryType.NONE&&(t[i].IsVisible=!0);return t},t.prototype.updateInitialSelection=function(){},t.prototype.clearFilter=function(n){var r,t,i;if(this.isNecessaryDataConfigured()){for(BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this),this.widgetJson.SelectedFilterValues=[],this.isCurrentMaster=!1,this.designerInstance.modules.serialization.notifyChange(),BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this),this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName),r=this.chartElement.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||(i.model.selectedDataPointIndexes=[],this.multiSelectionFilter=[],i.redraw());this.isShapeChartType(this.getChartProperties().ChartType)&&!BoldBIDashboard.isNullOrUndefined(this.selectedIndex)&&this.selectedIndex.length!==0&&(this.selectedIndex=[])}},t.prototype.getMobileViewHeight=function(){return this.isShapeChartType(this.getChartProperties().ChartType)?this.designerInstance.modules.Mode.designCanvas.width()>this.designerInstance.modules.Mode.designCanvas.height()?this.designerInstance.modules.Mode.designCanvas.height():this.designerInstance.modules.Mode.designCanvas.width():3*this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.refresh=function(){this.chartObj.redraw()},t.prototype.dispose=function(){this.chartItemDispose();n.prototype.dispose.call(this)},t.prototype.onFieldDragDrop=function(n,t,i){return this.chartHelper.onFieldDragDropped(n,this.DataGroupInfo,this.isActAsSlaveForAnyPoP,t,i)},t.prototype.isFieldValid=function(n,t,i){return!(t===FieldContainerType[FieldContainerType.Non_Numeric]&&(i==="Column"||i==="Row")&&n)},t.prototype.getDefaultMeasureFormat=function(){var n=new MeasureFormatting;return n.FormatType=this.getChartProperties().ChartType==="100% Stacked Bar"||this.getChartProperties().ChartType==="100% Stacked Column"||this.getChartProperties().ChartType==="100% Stacked Area"?DataValueFormat.Percentage:DataValueFormat.Number,n},t.prototype.getColumnInfo=function(n,t){return t==="Row"&&(n.Sorting=SortingOrder.None),BoldBIDashboard.isNullOrUndefined(this.getJson())||(n.GroupName=""),n},t.prototype.getWidgetInfo=function(t,i){var r=n.prototype.getWidgetInfo.call(this,t,i);return r.ChartType=this.getChartProperties().ChartType,r.ChartSeriesTypeInfo=this.getChartProperties().ChartSeriesTypeInfo,r.WidgetAction="WidgetAction",r.EnableSmoothScroll=this.getChartProperties().EnableSmoothScroll,r.IsInversed=this.getChartProperties().IsInversed,r.ForecastSettings=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getWidgetForecastSettings(this),!this.isCartesianChartType(this.getChartProperties().ChartType)||BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[2])||this.isActAsSlaveForAnyPoP?n.prototype.clearVirtualScrollSettings.call(this):n.prototype.initializeVirtualScrollSettings.call(this,this.getChartProperties().PageSize,1),r.VirtualScrollSettings=this.VirtualScrollSettings,this.updatePoPSlaveInfo(),this.updateColorCustomizationSettings(this),r.ColorCustomization=this.getColorCustomization(),r},t.prototype.updateDataGroupInfo=function(t,i){n.prototype.updateDataGroupInfo.call(this,t,i);this.getChartProperties().UnselectedLegendList=this.chartProperties.unselectedLegendInstance=[];this.getChartProperties().IsLegendDropdownAllSelected=!0;this.updateChartDataGroup(t,i)},t.prototype.createChartContainer=function(t,i){try{if(BoldBIDashboard.isNullOrUndefined(i)){var u=JSON.parse(t);this.getChartProperties().ChartType=u.subType;this.getChartProperties().IsBasicChartType=this.isCartesianChartType(this.getChartProperties().ChartType)||this.isShapeChartType(this.getChartProperties().ChartType)?!0:!1;this.getChartProperties().CategoryGridLines=this.isPercentChartType(this.getChartProperties().ChartType)||BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isAreaChartType(this.getChartProperties().ChartType);this.getChartProperties().ShowValueLabels=this.isShapeChartType(this.getChartProperties().ChartType)?!0:this.getChartProperties().ShowValueLabels;this.getChartProperties().ShowLegend=this.isShapeChartType(this.getChartProperties().ChartType)?!1:this.getChartProperties().ShowLegend;this.getChartProperties().LegendPosition=this.isShapeChartType(this.getChartProperties().ChartType)?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Right):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Auto);this.renderChartItem()}else this.isOpenReport=!0,BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},i)):n.prototype.setJson.call(this,i),this.getChartProperties().Axis.SecondaryValueAxis=BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)?new SecondaryValueAxis:this.getChartProperties().Axis.SecondaryValueAxis,this.getChartProperties().ForecastProperties=BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ForecastProperties)?new ForecastProperties:this.getChartProperties().ForecastProperties,this.chartProperties.widgetJson=this.getChartProperties(),this.updateQueryOrder(this.getChartProperties().Data.Containers),this.renderChartItem(),!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,this.getChartSubTypes())}catch(r){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:r,Type:r.name})}},t.prototype.renderChartItem=function(){this.chartElement=BoldBIDashboard.buildTag("div.chartElement e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","background-color":"transparent","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder},{id:this.designerId+"chartElement"+this.widgetJson.UniqueName});this.chartItem=BoldBIDashboard.buildTag("div.chartitem","",{width:"100%",height:"100%",position:"relative","font-size":"10pt","background-color":"transparent"},{id:this.designerId+"chartItem"+this.widgetJson.UniqueName});this.chartElement.append(this.chartItem);this.contentContainer.css("overflow","hidden");this.contentContainer.append(this.chartElement);this.chartItem.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designerId+"_designer_waiting_popup bbi-designer-loader",template:this.designerInstance.getWaitingPopupTemplate()});this.controlContainer.data("widgetInstance",this)},t.prototype.updateQueryOrder=function(n){var t,i;if(this.isOpenReport&&!BoldBIDashboard.isNullOrUndefined(n))for(t=0;t<n.length;t++)if(BoldBIDashboard.isNullOrUndefined(n[t].QueryOrder)||n[t].QueryOrder===""){i=n[t].Id;switch(i){case"YValue":n[t].QueryOrder=0;break;case"Column":n[t].QueryOrder=2;break;case"Row":n[t].QueryOrder=1}}},t.prototype.setChartType=function(n,t){var r=this.isShapeChartType(this.getChartProperties().ChartType),i,e,f;if(r&&t.length<=1||!r){if(i=r?this.getProportionChartElement(this.getChartProperties()):this.getCartesianChartElement(this.getChartProperties()),i.series=t,i.width="100%",i.height="100%",r&&(i.commonSeriesOptions.type=this.getChartType(n)),r)i.commonSeriesOptions.highlightSettings.enable=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isHighlightEffectRequired(this),i.selectedDataPointIndexes=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getInitialSelection(t,this);else{e=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateHighlightOrSelectionSettings(this.DataGroupInfo);i.commonSeriesOptions.highlightSettings.mode=i.commonSeriesOptions.selectionSettings.mode=e;i.commonSeriesOptions.highlightSettings.enable=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isHighlightEffectRequired(this);i.commonSeriesOptions.selectionSettings.enable=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isSelectionEffectRequired(this);i.selectedDataPointIndexes=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getInitialSelection(t,this);var u=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(this.DataGroupInfo),o=u.valueLength,s=u.columnLength;!BoldBIDashboard.isNullOrUndefined(this.VirtualScrollSettings)&&this.dataValues.hasMoreRecords&&o!==0&&s!==0&&(f=this.dataValues.widgetData.Data.length>0?JSON.parse(this.dataValues.data):[],f.length===this.VirtualScrollSettings.PageSize&&(i.primaryXAxis.enableScrollbar=!0,i.primaryXAxis.pointsLength=this.getChartProperties().EnableSmoothScroll?this.maxRecordCount:2*this.getChartProperties().PageSize,i.primaryXAxis.maxPointLength=f.length,i.primaryXAxis._scrollLeft=0,i.primaryXAxis.zoomPosition=0,i.scrollChanged=this.bbdesigner$.proxy(this.scrollChanged,this)));i.primaryXAxis.labelIntersectAction=this.getResponsiveLabelnteresect(this.getChartProperties().Axis.CategoryAxis.LabelOverflowMode).toLocaleLowerCase();i.primaryXAxis.enableTrim=this.getChartProperties().Axis.CategoryAxis.EnableTrim;i.primaryXAxis.isInversed=this.getChartProperties().IsInversed;BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateAxisLabelFormat(this.getChartProperties(),i);BoldBIDashboard.DashboardDesignerUtility.ChartHelper.setRangePaddingValue(this.getChartProperties(),i);this.updateAxisLabelOnRenaming(i);u.rowLength===0&&this.isAdvanceColorSupported()&&this.getChartProperties().EnableColorSettings?(i.legend.title.text="",BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ColorCustomization)?(i.legend.mode="series",i.legend.enableMultiRange=!1,i.legend.shape=this.getChartProperties().LegendShape.replace(/\s/g,""),i.legend.toggleSeriesVisibility=!0,i.rangeColorMapping=[]):this.getChartProperties().ColorCustomization.Type===ColorCustomizationType.Gradient?(i.rangeColorMapping=this.dataValues.widgetData.RangeColorMapping,i.legend.mode="range",i.legend.toggleSeriesVisibility=!1,i.legend.enableMultiRange=!1,i.legend.title.text=this.getChartProperties().ColorCustomization.GradientSettings.GradientColorInfo.legendText):(i.rangeColorMapping=[],i.legend.mode="point",i.legend.shape=this.getChartProperties().LegendShape.replace(/\s/g,""),i.legend.toggleSeriesVisibility=this.getChartProperties().ColorCustomization.Type===ColorCustomizationType.Individual)):(i.legend.mode="series",i.legend.enableMultiRange=!1,i.legend.shape=this.getChartProperties().LegendShape.replace(/\s/g,""),i.legend.toggleSeriesVisibility=!0,i.rangeColorMapping=[],i.legend.title.text=this.getChartProperties().LegendTitle)}BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateLegendDropdownDataToChart(this.getChartProperties(),i,this);this.chartProperties.updateCartesianLegendVisiblity(i);this.chartItem.BoldBIDashboardChart(i);this.chartObj=this.chartItem.data("BoldBIDashboardChart");this.isShapeChartType(this.getChartProperties().ChartType)&&t.length<=1&&!this.getChartProperties().IsDefaultColorPalette&&!this.getChartProperties().EnableColorSettings&&(this.chartProperties.updateColorPaletteToChartWidget(this.chartProperties.getModifiedColorPalette()),this.refresh())}else this.renderMultipleProportionCharts(t)},t.prototype.getCartesianChartElement=function(n){var e=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.CellInfo,!1,BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isXaxisLabelVisible(this)),c=this.getBindedColumns(),l=!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ColorCustomization)&&this.isAdvanceColorSupported()&&this.getChartProperties().EnableColorSettings&&this.getChartProperties().ColorCustomization.Type!==ColorCustomizationType.Individual&&this.getChartProperties().ShowLegend||!this.getChartProperties().EnableColorSettings&&this.getChartProperties().ShowLegend&&e.ShowLegend&&(c.yValueColumns.length>1||c.rowColumns.length>0),i=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getUpdatedSeriesAxisCount(n.ChartSeriesTypeInfo),r=this.getFontSizeBasedOnResolution(),t=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode(),u=this.themeHelper.getChartAxisTitleFont(),f=this.themeHelper.getChartAxisLabelFont(),o=this.themeHelper.getChartLegendFont(),s=this.themeHelper.getChartLegendTitleFont(),h=this.themeHelper.getChartDataLabelFont();return{series:[],isResponsive:!1,chartArea:{background:"transparent"},primaryXAxis:{axisLine:{color:this.themeHelper.getChartMajorGridLinesColor()},title:{font:{size:this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize?t?u.size:r:this.getChartProperties().Axis.CategoryAxis.CategoryAxisTitleFontSize+"px",fontFamily:t?u.family:"var(--designer-font)",fontWeight:t?u.weight:"Bold",color:this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getChartAxisTitleFontColor(),opacity:1},text:n.Axis.CategoryAxis.Title,visible:n.Axis.CategoryAxis.ShowTitle?e.ShowXAxisTitle:!1,enableTrim:n.Axis.CategoryAxis.EnableTrim},font:{size:this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisLabelFontSize?t?f.size:r:this.getChartProperties().Axis.CategoryAxis.CategoryAxisLabelFontSize+"px",fontFamily:t?f.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?f.weight:"Regular",color:this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getChartAxisTitleFontColor()},range:{interval:n.Axis.CategoryAxis.IsAutoInterval?null:n.Axis.CategoryAxis.Interval},edgeLabelPlacement:"none",visible:!BoldBIDashboard.isNullOrUndefined(n.Axis)&&n.Axis.CategoryAxis.IsEnabled&&e.ShowXAxisLabels&&(i.primaryValueLength>0||i.secondaryValueLength>0),labelRotation:BoldBIDashboard.isNullOrUndefined(n.Axis)?0:n.Axis.CategoryAxis.LabelRotation!=="None"?this.getResponsiveLabelRotation(n.Axis.CategoryAxis.LabelRotation):0,labelIntersectAction:BoldBIDashboard.isNullOrUndefined(n.Axis)?"multipleRows":this.getResponsiveLabelnteresect(n.Axis.CategoryAxis.LabelOverflowMode).toLocaleLowerCase(),enableTrim:n.Axis.CategoryAxis.EnableTrim,majorGridLines:{visible:n.CategoryGridLines,color:this.themeHelper.getChartMajorGridLinesColor()},majorTickLines:{color:this.themeHelper.getChartMajorTickLinesColor()},valueType:"Category",maximumLabelWidth:BoldBIDashboard.isNullOrUndefined(n.Axis)?34:n.Axis.CategoryAxis.MaxLabelWidth},primaryYAxis:{axisLine:{width:0},majorGridLines:{visible:i.primaryValueLength>0&&n.PrimaryValueGridLines,color:this.themeHelper.getChartMajorGridLinesColor()},majorTickLines:{color:this.themeHelper.getChartMajorTickLinesColor()},valueType:i.primaryValueLength>0&&n.Axis.PrimaryValueAxis.AxisType===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Logarithmic)?"logarithmic":"double",title:{font:{size:this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize?t?u.size:r:this.getChartProperties().Axis.PrimaryValueAxis.PrimaryTitleFontSize+"px",fontFamily:t?u.family:"var(--designer-font)",fontWeight:t?u.weight:"Bold",color:this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getChartAxisTitleFontColor(),opacity:1},text:n.Axis.PrimaryValueAxis.Title,visible:n.Axis.PrimaryValueAxis.ShowTitle?e.ShowYAxisTitle:!1,enableTrim:!0},font:{size:this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize?t?f.size:r:this.getChartProperties().Axis.PrimaryValueAxis.PrimaryLabelFontSize+"px",fontFamily:t?f.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?f.weight:"Regular",color:this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getChartAxisLabelFontColor()},isInversed:!BoldBIDashboard.isNullOrUndefined(n.Axis.PrimaryValueAxis)&&n.Axis.PrimaryValueAxis.InverseAxis,edgeLabelPlacement:"shift",visible:n.Axis!==undefined&&i.primaryValueLength>0&&n.Axis.PrimaryValueAxis.IsEnabled&&e.ShowYAxisLabels,labelFormat:this.isPercentChartType(this.getChartProperties().ChartType)?"{value}%":"{value}",labelIntersectAction:"hide",range:BoldBIDashboard.isNullOrUndefined(n.PrimaryAxisRange)?{}:{min:n.PrimaryAxisRange.MinValue!==""?Number(n.PrimaryAxisRange.MinValue):null,max:n.PrimaryAxisRange.MaxValue!==""?Number(n.PrimaryAxisRange.MaxValue):null,interval:n.PrimaryAxisRange.Interval!==""?Number(n.PrimaryAxisRange.Interval):null}},axes:[{axisLine:{width:0},majorGridLines:{visible:i.secondaryValueLength>0&&n.SecondaryValueGridLines,color:this.themeHelper.getChartMajorGridLinesColor()},majorTickLines:{color:this.themeHelper.getChartMajorTickLinesColor()},opposedPosition:!0,name:"secondaryYAxis",valueType:i.secondaryValueLength>0&&!BoldBIDashboard.isNullOrUndefined(n.Axis.SecondaryValueAxis)&&n.Axis.SecondaryValueAxis.IsEnabled&&n.Axis.SecondaryValueAxis.AxisType===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Logarithmic)?"logarithmic":"double",title:{visible:!BoldBIDashboard.isNullOrUndefined(n.Axis.SecondaryValueAxis)&&e.ShowYAxisTitle&&i.secondaryValueLength>0&&n.Axis.SecondaryValueAxis.ShowTitle,text:!BoldBIDashboard.isNullOrUndefined(n.Axis.SecondaryValueAxis)&&n.Axis.SecondaryValueAxis.Title,enableTrim:!0,font:{size:this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize?t?u.size:r:this.getChartProperties().Axis.SecondaryValueAxis.SecondaryTitleFontSize+"px",fontFamily:t?u.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?u.weight:"Bold",color:this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getChartAxisTitleFontColor()}},font:{size:this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize?t?f.size:r:this.getChartProperties().Axis.SecondaryValueAxis.SecondaryLabelFontSize+"px",fontFamily:t?f.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?f.weight:"Regular",color:this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getChartAxisLabelFontColor()},isInversed:!BoldBIDashboard.isNullOrUndefined(n.Axis.SecondaryValueAxis)&&n.Axis.SecondaryValueAxis.InverseAxis,edgeLabelPlacement:"shift",labelFormat:this.isPercentChartType(this.getChartProperties().ChartType)?"{value}%":"{value}",visible:!BoldBIDashboard.isNullOrUndefined(n.Axis.SecondaryValueAxis)&&e.ShowYAxisTitle&&i.secondaryValueLength>0&&n.Axis.SecondaryValueAxis.IsEnabled,labelIntersectAction:"hide",range:BoldBIDashboard.isNullOrUndefined(n.SecondaryAxisRange)?{}:{min:n.SecondaryAxisRange.MinValue!==""?Number(n.SecondaryAxisRange.MinValue):null,max:n.SecondaryAxisRange.MaxValue!==""?Number(n.SecondaryAxisRange.MaxValue):null,interval:n.SecondaryAxisRange.Interval!==""?Number(n.SecondaryAxisRange.Interval):null}}],palette:this.defaultColorPalette,commonSeriesOptions:{highlightSettings:{enable:this.isHighlightEffectRequired(),opacity:.8,border:{width:1},mode:this.updateHighlightOrSelectionSettings(),pattern:"diagonalForward"},selectionSettings:{enable:this.widgetJson.FilterSettings.ActAsMasterWidget,opacity:.8,border:{width:1},mode:this.updateHighlightOrSelectionSettings(),pattern:"diagonalForward",type:BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isMultiSelectionEnabled(this)?"multiple":"single"},emptyPointSettings:{displayMode:n.EmptyPointMode.toLocaleLowerCase()!==this.locale.propertyPanel.emptyPointMode.connect.toLocaleLowerCase()?n.EmptyPointMode.toLocaleLowerCase():EmptyPointMode.Gap,visible:n.EmptyPointMode.toLocaleLowerCase()!==this.locale.propertyPanel.emptyPointMode.connect.toLocaleLowerCase()},enableAnimation:this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage?!1:n.EnableAnimation,width:n.LineWidth,enableSmartLabels:!0,tooltip:{visible:n.ShowTooltip,fill:"initial",opacity:1,border:{width:0}},marker:{dataLabel:{font:{size:this.getChartProperties().IsAutoValueLabelFontSize?t?h.size:r:this.getChartProperties().ValueLabelFontSize+"px",fontFamily:t?h.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?h.weight:"Regular",color:this.getChartProperties().ValueLabel.IsEdited?this.getChartProperties().ValueLabel.Color:this.themeHelper.getChartDataLabelFontColor()},horizontalTextAlignment:"middle",angle:n.ShowValueLabels?n.ValueLabelRotation!=="None"?n.ValueLabelRotation:0:0,enableWrap:!0},shape:"circle",border:{width:2},size:{height:4,width:4},enableSmartLabels:!0,labelPosition:this.isPercentChartType(this.getChartProperties().ChartType)?"inside":"outside",visible:n.ShowMarker}},showTooltip:!0,enableSmartLabels:!0,legend:{visible:l,shape:n.LegendShape.replace(/\s/g,""),itemPadding:12,position:this.getResponsiveLegendPosition(n.LegendPosition),alignment:"Center",font:{size:this.getChartProperties().IsAutoLegendFontSize?t?o.size:r:this.getChartProperties().LegendFontSize+"px",fontFamily:t?o.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?o.weight:"400",color:this.getChartProperties().LegendLabel.IsEdited?this.getChartProperties().LegendLabel.Color:this.themeHelper.getChartLegendFontColor()},textOverflow:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendTextOverFlow,this.getChartProperties().LegendTextOverFlow),textWidth:this.getChartProperties().LegendTextWidth,title:{font:{size:this.getChartProperties().IsAutoLegendTitleFontSize?t?s.size:r:this.getChartProperties().LegendTitleFontSize+"px",fontWeight:t?s.weight:"500",fontFamily:t?s.family:"var(--designer-font)",color:this.getChartProperties().LegendLabel.IsEdited?this.getChartProperties().LegendLabel.Color:this.themeHelper.getChartLegendFontColor()},text:n.LegendTitle,alignment:"Center"}},margin:{bottom:0,left:0,right:0,top:0},chartMouseMove:this.bbdesigner$.proxy(this.mouseMoveEvent,this),chartMouseLeave:this.bbdesigner$.proxy(this.mouseLeaveEvent,this),toolTipInitialize:this.bbdesigner$.proxy(this.toolTipForCartesianChart,this),axesLabelRendering:this.bbdesigner$.proxy(this.chartAxisRender,this),legendItemClick:this.bbdesigner$.proxy(this.chartLegendItemClick,this),pointRegionClick:this.bbdesigner$.proxy(this.selectActions,this),axisLabelClick:this.bbdesigner$.proxy(this.onAxisLabelClick,this),displayTextRendering:this.bbdesigner$.proxy(this.updateForcastLabelFormat,this),legendItemRendering:this.bbdesigner$.proxy(this.updateCustomLegendsForConditionalRange,this),axisLabelMouseMove:this.bbdesigner$.proxy(this.onAxisLabelMouseMove,this),preRender:this.bbdesigner$.proxy(this.chartPreRender,this),seriesRendering:this.bbdesigner$.proxy(this.seriesRender,this),loaded:this.bbdesigner$.proxy(this.renderComplete,this)}},t.prototype.getResponsiveLegendPosition=function(n){return n==="Auto"?this.CellInfo.ColumnSpan>=4*this.CellInfo.RowSpan?"Right":"Bottom":n},t.prototype.getResponsiveLabelRotation=function(n){return n==="Auto"?this.CellInfo.RowSpan>this.CellInfo.ColumnSpan?"90":"0":n==="None"?"0":n},t.prototype.getResponsiveLabelnteresect=function(n){if(n==="Auto"){var t=this.getResponsiveLabelRotation(this.getChartProperties().Axis.CategoryAxis.LabelRotation);return t!=="0"?"Trim":"Hide"}return n},t.prototype.renderComplete=function(n){var h=this,t,i,s,r,u,f;if(this.getChartProperties().ChartSeriesTypeInfo.filter(function(n){return h.isBarChartType(n.ChartType)}).length>0&&!BoldBIDashboard.isNullOrUndefined(n))for(t=0;t<n.model._axes.length;t++){var e=n.model._axes[t],o=e.orientation.toLowerCase(),c=o==="horizontal"?e.columnIndex:e.rowIndex;o==="vertical"&&(i=this.chartItem.find("#ScrollerParent_"+o+"_"+c+"_"+this.chartItem[0].id).find(".e-hscrollbar"),!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0&&i.attr("style","display: none !important"))}if(this.isShapeChartType(this.getChartProperties().ChartType)&&this.getChartProperties().ShowLegend)for(s=this.ContentContainer.find(".e-datavisualization-chart"),r=0;r<s.length;r++)u=this.bbdesigner$(s[r]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(u)||(f=this.bbdesigner$("#"+(u.legendContainer.length>0?u.legendContainer[0].id:"")),f.length>0&&f.BoldBIDashboardScroller({height:f.css("height"),autoHide:!0}));this.IsRendered=!0},t.prototype.getProportionChartElement=function(n){var r=this.getFontSizeBasedOnResolution(),t=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode(),i=this.designerInstance.modules.themeHelper.getChartDataLabelFont(),u=this.designerInstance.modules.themeHelper.getChartLegendFont(),f=this.designerInstance.modules.themeHelper.getChartLegendTitleFont();return{series:[],palette:this.defaultColorPalette,commonSeriesOptions:{highlightSettings:{enable:this.isHighlightEffectRequired(),opacity:.8,border:{width:1},mode:"point",pattern:"diagonalForward"},selectionSettings:{enable:this.isSelectionEffectRequired(),opacity:.8,border:{width:1},mode:"point",pattern:"diagonalForward",type:BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isMultiSelectionEnabled(this)?"multiple":"single"},enableAnimation:this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage?!1:n.EnableAnimation,doughnutCoefficient:n.ChartType===ChartTypes.Doughnut.toString()?n.Radius:.4,pieCoefficient:n.ChartType===ChartTypes.Pie.toString()?n.Chartsize:.8,doughnutChartsize:n.ChartType===ChartTypes.Doughnut.toString()?n.Chartsize:.8,enableSmartLabels:!0,tooltip:{visible:n.ShowTooltip,fill:"initial",opacity:1,border:{width:0}},labelPosition:"outside",marker:{dataLabel:{font:{size:this.getChartProperties().IsAutoValueLabelFontSize?t?i.size:r:this.getChartProperties().ValueLabelFontSize+"px",fontFamily:t?i.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?i.weight:"Regular",color:this.getChartProperties().ValueLabel.IsEdited?this.getChartProperties().ValueLabel.Color:this.themeHelper.getChartDataLabelFontColor()},textPosition:"top",horizontalTextAlignment:"middle",visible:this.getChartProperties().ShowValueLabels},shape:"circle",size:{height:6,width:6},visible:!1}},title:{font:{size:t?i.size:r,fontFamily:t?i.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?i.weight:"Bold",color:this.themeHelper.getProportionChartTitleFontColor()},visible:!0,enableTrim:!0,textOverflow:"trim"},isResponsive:!1,enableSmartLabels:!0,showTooltip:!0,legend:{visible:this.getChartProperties().ShowLegend?BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.CellInfo).ShowLegend&&this.ControlContainer.width()>190&&this.ControlContainer.height()>190:!1,shape:n.LegendShape.replace(/\s/g,""),itemPadding:12,position:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,this.getChartProperties().LegendPosition),alignment:"center",font:{size:this.getChartProperties().IsAutoLegendFontSize?t?u.size:r:this.getChartProperties().LegendFontSize+"px",fontFamily:t?u.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?u.weight:"400",color:this.getChartProperties().LegendLabel.IsEdited?this.getChartProperties().LegendLabel.Color:this.themeHelper.getChartLegendFontColor()},size:{width:null},textOverflow:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendTextOverFlow,this.getChartProperties().LegendTextOverFlow),textWidth:this.getChartProperties().LegendTextWidth,title:{font:{size:this.getChartProperties().IsAutoLegendTitleFontSize?t?f.size:r:this.getChartProperties().LegendTitleFontSize+"px",fontWeight:t?f.weight:"500",fontFamily:t?f.family:"var(--designer-font)",color:this.getChartProperties().LegendLabel.IsEdited?this.getChartProperties().LegendLabel.Color:this.themeHelper.getChartLegendFontColor()},text:n.LegendTitle,alignment:"Center"}},margin:{bottom:0,left:0,right:0,top:0},chartMouseMove:this.bbdesigner$.proxy(this.mouseMoveEvent,this),chartMouseLeave:this.bbdesigner$.proxy(this.mouseLeaveEvent,this),toolTipInitialize:this.bbdesigner$.proxy(this.toolTipForProportionChart,this),pointRegionClick:this.bbdesigner$.proxy(this.selectActions,this),legendItemRendering:this.bbdesigner$.proxy(this.updateCustomLegendsForShapeChartType,this),legendItemClick:this.bbdesigner$.proxy(this.chartLegendClickForAccumulation,this),loaded:this.bbdesigner$.proxy(this.renderComplete,this)}},t.prototype.seriesRender=function(n){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.seriesRendering(n,this,this.dataGroupBindedColumnInfo().rowLength!==0)},t.prototype.chartPreRender=function(n){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.chartPreRendering(n,this)},t.prototype.chartAxisRender=function(n){if(n.data.axis.valueType!=="Category"&&!n.data.axis.isStacked100&&n.data.axis.labelFormat!=="{value}%"&&n.data.axis.opposedPosition){var t=this.getChartProperties().Axis.SecondaryValueAxis.Format,i=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Prefix),this.DataGroupInfo.DataSourceName),r=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Suffix),this.DataGroupInfo.DataSourceName),u=isNaN(parseInt(t.FormatType,10))?t.FormatType:BoldBIDashboard.DashboardDesignerUtility.Serialization.getDataValueFormat(t.FormatType),f=isNaN(parseInt(t.Unit,10))?t.Unit:BoldBIDashboard.DashboardDesignerUtility.Serialization.getNumberFormat(t.Unit);n.data.label.Text=BoldBIDashboard.DashboardUtil.formattedText(n.data.label.Text,t.Culture,t.DecimalPoints,u,t.DecimalSeparator,t.GroupSeparator,i,r,f,!0,this.designerInstance,t.EnableLakhsAndCroreRep)}else if(n.data.axis.valueType!=="Category"&&!n.data.axis.isStacked100&&n.data.axis.labelFormat!=="{value}%"&&!n.data.axis.opposedPosition){var t=this.getChartProperties().Axis.PrimaryValueAxis.Format,i=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Prefix),this.DataGroupInfo.DataSourceName),r=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Suffix),this.DataGroupInfo.DataSourceName),u=isNaN(parseInt(t.FormatType,10))?t.FormatType:BoldBIDashboard.DashboardDesignerUtility.Serialization.getDataValueFormat(t.FormatType),f=isNaN(parseInt(t.Unit,10))?t.Unit:BoldBIDashboard.DashboardDesignerUtility.Serialization.getNumberFormat(t.Unit);n.data.label.Text=BoldBIDashboard.DashboardUtil.formattedText(n.data.label.Text,t.Culture,t.DecimalPoints,u,t.DecimalSeparator,t.GroupSeparator,i,r,f,!0,this.designerInstance,t.EnableLakhsAndCroreRep)}},t.prototype.updateForcastLabelFormat=function(n){if(!BoldBIDashboard.isNullOrUndefined(this.getChartProperties())&&this.getChartProperties().ForecastProperties.ConfidenceBandStyle==="Fill"&&this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable&&n.data.seriesIndex===3)n.data.text=this.getFormattedText(n.data.text),this.getChartProperties().ShowValueLabelSuffix&&(n.data.text=n.data.text+" "+this.getChartProperties().ValueLabelSuffix);else if(!BoldBIDashboard.isNullOrUndefined(this.getChartProperties())&&(this.getChartProperties().EmptyPointMode.toLocaleLowerCase()==="average"||this.getChartProperties().EmptyPointMode.toLocaleLowerCase()==="zero")){var t=this.DataGroupInfo.FieldContainers[0].FieldInfos.filter(function(t){return t.UniqueColumnName===n.model.series[n.data.seriesIndex].id}).length>0?this.DataGroupInfo.FieldContainers[0].FieldInfos.filter(function(t){return t.UniqueColumnName===n.model.series[n.data.seriesIndex].id})[0].MeasureFormatting:new MeasureFormatting,i=BoldBIDashboard.DashboardUtil.formattedText(n.data.text,t.Culture,t.DecimalPoints,t.FormatType,t.DecimalSeparator,t.GroupSeparator,t.Prefix,t.Suffix,t.Unit,!0,this.designerInstance,t.EnableLakhsAndCroreRep);n.data.text=i!==""?i:n.data.text}},t.prototype.getFormattedText=function(n){if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)&&this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0){var t=this.DataGroupInfo.FieldContainers[0].FieldInfos[0].MeasureFormatting;return BoldBIDashboard.DashboardUtil.formattedText(n,t.Culture,t.DecimalPoints,t.FormatType,t.DecimalSeparator,t.GroupSeparator,t.Prefix,t.Suffix,t.Unit,!0,this.designerInstance,t.EnableLakhsAndCroreRep)}},t.prototype.updateCustomLegendsForConditionalRange=function(n){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateCustomLegendsForConditionalRange(n,this)},t.prototype.chartLegendClickForAccumulation=function(n){var r,u;if(DataLabel.Percentage.toString()===this.getChartProperties().DataLabel||DataLabel.ValueAndPercentage.toString()===this.getChartProperties().DataLabel){var i=n.data.legendItem.LegendItem,t=n.model.series[i.SeriesIndex],f=t.points;BoldBIDashboard.isNullOrUndefined(n.data.legendItem)||BoldBIDashboard.isNullOrUndefined(n.data.legendItem.LegendItem)||(r=t.points[i.PointIndex],u=i.visibility==="visible"?t.total-Math.abs(r.y):t.total+Math.abs(r.y),t.total=u,this.getPercentageAndUpdateToPoints(f,u))}},t.prototype.getPercentageAndUpdateToPoints=function(n,t){for(var i,u,r=0;r<n.length;r++)i=n[r],u=(t===0?t:i.y/t*100==100?i.y/t*100:(i.y/t*100).toFixed(2))+"%",i.text=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DataLabel,DataLabel.Percentage)===this.getChartProperties().DataLabel?u:i.formattedtext+"("+u+")"},t.prototype.updateLegendForDrilledProportionChart=function(n){var t,i,r;if(!BoldBIDashboard.isNullOrUndefined(n))if(this.isShapeChartType(this.getChartProperties().ChartType)){for(t=n.model.series[0].points,i=0,r=0;r<t.length;r++)i+=Math.abs(t[r].y),t[r]._visibility="visible";DataLabel.Value.toString()!==this.getChartProperties().DataLabel&&n.model.series[0].total!==i&&(n.model.series[0].total=i,this.getPercentageAndUpdateToPoints(t,i),n.redraw())}else n.redraw()},t.prototype.getDefaultSeries=function(n){var f,e,i,t,r;this.defaultSeries=!0;var c=this.isStackedChartType(n)?2:1,s=this.isShapeChartType(n),l=this.getChartProperties().ChartType===ChartTypes.StackedArea.toString()||this.getChartProperties().ChartType===ChartTypes.SplineArea.toString()||this.getChartProperties().ChartType===ChartTypes.PercentStackedArea.toString()?.5:1,h=6,u=this.isDistributionType(this.getChartProperties().ChartType),o=[];for(f=0;f<c;f++){if(e=[],i=0,this.isPercentChartType(this.getChartProperties().ChartType))for(t=3;t<=6;t++)r={x:t+2,y:f===1?t:10-t,formattedtext:t.toString(),text:t.toString(),totalValue:10},e.push(r);else if(n.toLowerCase()===ChartTypes.Column.toString().toLowerCase())for(t=h;t>=1;t--)i+=u?Math.floor(Math.random()*50)+1:t,r={x:s?t:t,y:u?Math.floor(Math.random()*50)+1:t,formattedtext:t.toString(),text:t.toString(),totalValue:i},e.push(r);else for(t=1;t<=h;t++)i+=u?Math.floor(Math.random()*50)+1:t,r={x:s?t:t,y:u?Math.floor(Math.random()*50)+1:t,formattedtext:t.toString(),text:t.toString(),totalValue:i},e.push(r);o.push({points:e,name:"series"+f,opacity:l,total:i,type:this.getChartType(n),marker:{visible:u&&this.getChartProperties().ShowMarker}})}return this.isPercentChartType(this.getChartProperties().ChartType)?this.getPercentageValueForSeriesPoints(o):o},t.prototype.createDrilledChartElementForMultiSeriesChart=function(n,t){var i,r;this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer);this.chartElement.css({display:"none"});i=BoldBIDashboard.isNullOrUndefined(t)?this.designerId+"chartElement"+this.widgetJson.UniqueName+"drillLevel"+this.drillLevelInfo.length:t;this.chartElement=BoldBIDashboard.buildTag("div.chartElement e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:this.contentContainer.height()-this.breadCrumbItem.height(),"background-color":"transparent","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"100",overflow:"hidden"},{id:i});this.chartContent=BoldBIDashboard.buildTag("div.chartElementChild","",{width:"100%",height:this.contentContainer.height()-this.breadCrumbItem.height(),position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box",overflow:"hidden"},{id:i+"_chartContent"});this.chartElement.append(this.chartContent);this.contentContainer.append(this.chartElement);r=this.getChartProperties().FixedSeriesSettings.IsFixedRowsAndColumns&&n.length>1?this.getFixedSizeForProportionalChart(this.chartContent,n.length):this.getSizeForProportionCharts(this.chartContent,n.length);this.isShapeChartType(this.getChartProperties().ChartType)?this.chartElement.addClass("e-proportion-chartitem"):this.chartElement.addClass("chartitem");this.createMultipleProportionCharts(n,r,this.getChartType(this.getChartProperties().ChartType));this.addScrollerForMultipleCharts(this.chartElement)},t.prototype.updateChartSize=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this)?this.widgetContainerHelper.showControlError(this,this.dataValues):(this.updateSelectedIndex(),this.resizeChartElement())},t.prototype.resizeChartElement=function(){var f,r,i,n;if(this.destroyLegendScroll(),this.drillLevelInfo.length===0)this.multipleProportionChart?(n=this.getSeriesForRenderedCharts(),n.length>0&&this.renderMultipleProportionCharts(n),f=this.designerInstance.isDarkTypeTheme()||!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.dashboardThemeSettings)&&this.designerInstance.model.dashboardThemeSettings.appearance.toLowerCase()==="dark",this.applyWidgetTheme(f)):BoldBIDashboard.isNullOrUndefined(this.chartObj)||(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateChartElementsVisibility(this,this.chartObj),this.updateLegendDropdownPosition(),this.chartProperties.updateCartesianLegendVisiblity(this.chartObj),this.designerInstance.canApplyTheme()||this.designerInstance.isEnableCustomDashboardTheme||BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateFontStyle(this.chartObj,this.getFontSizeBasedOnResolution(),this),this.refresh());else for(r=this.getBreadcrumbDatasource(),i=0;i<r.length;i++){var e=r[i].id.split("_Breadcrumb")[0],u=this.contentContainer.find("#"+e),t=u.data("BoldBIDashboardChart");BoldBIDashboard.isNullOrUndefined(t)?(n=this.getSeriesForRenderedChartsFromId(u),u.remove(),n.length>0&&this.createDrilledChartElementForMultiSeriesChart(n,e)):BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateChartElementsVisibility(this,t),this.updateLegendDropdownPosition(),this.chartProperties.updateCartesianLegendVisiblity(t),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateFontStyleForBreadCrumb(this),this.designerInstance.canApplyTheme()||BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateFontStyle(t,this.getFontSizeBasedOnResolution(),this),t.redraw())}},t.prototype.updateLegendDropdownPosition=function(){if(this.getChartProperties().ShowLegendAsDropDown){var n="#"+this.ControlContainer.attr("id")+"_Chart_BasicSettings_legenddropdown_wrapper",t=this.chartProperties.updateLegendDropdownMarginPosition(),i=this.getChartProperties().ShowLegendAsDropDown&&!this.getChartProperties().EnableColorSettings?this.controlContainer.find(".bbi-dbrd-control-header").height()+this.controlContainer.find(".bbi-dbrd-control-sub-header").outerHeight()+this.controlContainer.find(".bbi-dbrd-legend-dropdown-wrapper").outerHeight():this.controlContainer.find(".bbi-dbrd-control-header").height()+this.controlContainer.find(".bbi-dbrd-control-sub-header").outerHeight();this.contentContainer.css("height","calc(100% - "+i+"px)");this.controlContainer.find(n).css("margin-left",t.marginLeft+"px");this.controlContainer.find(n+"_title_container").css("width",t.titleWidth+"px");this.controlContainer.find(n+"_dropdown_parent_container").css("width",t.dropdownWidth+"px");this.chartProperties.updateLegendDropdown()}},t.prototype.getSeriesForRenderedChartsFromId=function(n){for(var i,r=n.find(".e-datavisualization-chart"),u=[],t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||u.push(i.model.series[0]);return u},t.prototype.getSeriesForRenderedCharts=function(){for(var t,i=this.chartElement.find(".e-datavisualization-chart"),r=[],n=0;n<i.length;n++)t=this.bbdesigner$(i[n]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(t)||r.push(t.model.series[0]);return r},t.prototype.updateChartDataGroup=function(n){var r,f;if(this.updateAxisSeriesValue(),this.isShapeChartType(this.getChartProperties().ChartType)||this.getChartProperties().ChartType===ChartTypes.Bar.toString()||this.getChartProperties().ChartType===ChartTypes.Column.toString()||this.getChartProperties().ChartType===ChartTypes.StackedBar.toString()){var u=this.dataGroupBindedColumnInfo(),t=this.getBindedColumns(),i=n.FieldContainers[u.columnIndex].FieldInfos;if(n.FieldContainers[u.columnIndex].Name==="Column"&&this.isShapeChartType(this.getChartProperties().ChartType))for(r=0;r<i.length;r++)(BoldBIDashboard.isNullOrUndefined(i[r].FilterInfo)||!BoldBIDashboard.isNullOrUndefined(i[r].FilterInfo.DimensionFilterInfo)&&BoldBIDashboard.isNullOrUndefined(i[r].FilterInfo.DimensionFilterInfo.TopNFilterInfo))&&!i[r].IsShowAllRecords&&n.FieldContainers[0].FieldInfos.length>0?(i[r].FilterInfo={},i[r].FilterInfo.DimensionFilterInfo={IsAllowFilteringApplied:!1,IsConditionFilteringApplied:!1,IsTopNFilteringApplied:!0,AllowFilterInfo:{IsCheckAll:!0,IsInclude:!0,FilterValues:null},ConditionFilterInfo:{ColumnName:i[r].Id,SummaryType:SummaryType.SUM,ConditionSummaryType:NumberFilterOption.Equals,Values:["0"]},TopNFilterInfo:n.FieldContainers[0].FieldInfos.length>0?{Mode:RankType.Top,NoOfRecords:5,ColumnName:n.FieldContainers[u.valueIndex].FieldInfos.length>0?n.FieldContainers[u.valueIndex].FieldInfos[0].Name:i[r].Name,ColumnId:n.FieldContainers[u.valueIndex].FieldInfos.length>0?n.FieldContainers[u.valueIndex].FieldInfos[0].Id:i[r].Id,SummaryType:n.FieldContainers[u.valueIndex].FieldInfos.length>0?n.FieldContainers[u.valueIndex].FieldInfos[0].SummaryType===SummaryType.NONE?SummaryType.SUM:n.FieldContainers[u.valueIndex].FieldInfos[0].SummaryType:SummaryType.COUNT,IsBasedOnDateAndTimeField:!1,DateFormat:DateTimeFormatForFilter.Year}:null}):BoldBIDashboard.isNullOrUndefined(i[r].FilterInfo)||BoldBIDashboard.isNullOrUndefined(i[r].FilterInfo.DimensionFilterInfo)||BoldBIDashboard.isNullOrUndefined(i[r].FilterInfo.DimensionFilterInfo.TopNFilterInfo)||n.FieldContainers[0].FieldInfos.length!==0||(i[r].FilterInfo=null);this.isShapeChartType(this.getChartProperties().ChartType)&&!BoldBIDashboard.isNullOrUndefined(t.columnValue)&&!BoldBIDashboard.isNullOrUndefined(t.yValueColumns)&&t.columnValue.length>0&&t.yValueColumns.length>0&&BoldBIDashboard.isNullOrUndefined(t.columnValue[0].CustomSorting)&&(t.columnValue[0].CustomSorting={CustomSortType:CustomSortType[CustomSortType.Field],CustomSortOrder:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,SortingOrder.Descending),FieldName:t.yValueColumns[0].Name,FieldId:t.yValueColumns[0].Id,SummaryType:t.yValueColumns[0].SummaryType===SummaryType.NONE?SummaryType.SUM:t.yValueColumns[0].SummaryType});f=!1;!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0&&(f=i[0].FieldActualType==="bbi-designer-dataset-datetime"||i[0].FieldActualType==="bbi-designer-dataset-time");(this.getChartProperties().ChartType===ChartTypes.Bar.toString()||this.getChartProperties().ChartType===ChartTypes.Column.toString()||this.getChartProperties().ChartType===ChartTypes.StackedColumn.toString()||this.getChartProperties().ChartType===ChartTypes.StackedBar.toString())&&!BoldBIDashboard.isNullOrUndefined(t.columnValue)&&!BoldBIDashboard.isNullOrUndefined(t.yValueColumns)&&t.columnValue.length>0&&t.yValueColumns.length>0&&BoldBIDashboard.isNullOrUndefined(t.columnValue[0].CustomSorting)&&(t.columnValue[0].CustomSorting={CustomSortType:f?CustomSortType[CustomSortType.Alphabetic]:CustomSortType[CustomSortType.Field],CustomSortOrder:f||this.getChartProperties().ChartType===ChartTypes.Bar.toString()||this.getChartProperties().ChartType===ChartTypes.StackedBar.toString()?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,SortingOrder.Ascending):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,SortingOrder.Descending),FieldName:t.yValueColumns[0].Name,FieldId:t.yValueColumns[0].Id,SummaryType:t.yValueColumns[0].SummaryType===SummaryType.NONE?SummaryType.SUM:t.yValueColumns[0].SummaryType});u.valueLength===0&&this.getChartProperties().ShowLegendAsDropDown&&this.chartProperties.destroyDropdowLegendContainer()}},t.prototype.updateChartData=function(n){var i,t;if(this.dataValues=n,this.maxRecordCount=n.totalRecordsCount,BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this),this.getChartProperties().IsEnableDrillDown=this.dataGroupBindedColumnInfo().columnLength>1?!0:!1,BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this),this.designerInstance.modules.serialization.updateWidgetData(this.getChartProperties(),this.DataGroupInfo),BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error)BoldBIDashboard.isNullOrUndefined(n.Message)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.widgetContainerHelper.showControlError(this,n),this.IsRendered=!0);else{if(i=this.isShapeChartType(this.getChartProperties().ChartType),this.isOpenReport&&BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ChartSeriesTypeInfo)&&(this.getChartProperties().ChartSeriesTypeInfo=[],this.updateAxisSeriesValue()),n.noDataAvailable)return this.renderWidgetNoDataAvailableElement();if(n.widgetData.Data.length===0||BoldBIDashboard.DashboardUtil.IsColumnBindingsEmpty(this.DataColumnBindings))this.updateWidgetNotConfigured(!1);else{if(this.chartElement.show(),this.columnBindings=this.DataColumnBindings,BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.updatePoPSlaveInfo(),this.chartHelper.updateWidgetJsonProperties(this),(this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode())&&(this.defaultColorPalette=this.designerInstance.modules.themeHelper.getColorPalette()),t=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.generateChartTypeAndAxisSeries(n,this),this.defaultSeries=!1,BoldBIDashboard.isNullOrUndefined(t)||t.length===0||BoldBIDashboard.isNullOrUndefined(t[0].points)||t[0].points.length===0)return this.renderWidgetNoDataAvailableElement();BoldBIDashboard.isNullOrUndefined(this.chartObj)?(i&&t.length<=1&&(this.multipleProportionChart=!1,this.removeAllProportionChartElement()),this.setChartType(this.getChartProperties().ChartType,t)):i&&t.length>1?this.renderMultipleProportionCharts(t):(i?(this.multipleProportionChart=!1,this.removeAllProportionChartElement(),this.setChartType(this.getChartProperties().ChartType,t),this.chartObj=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.renderingShapeChartObj(this,t)):this.chartObj=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.renderingCartesianChartObj(this,t),this.refresh())}this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.chartHelper.updateChartPropertyPanelElement(this,n);this.isOpenReport=!1;this.hideScrollBar();this.isThemeSwitch||(this.applyChartItemTheme(),this.isShapeChartType(this.getChartProperties().ChartType)&&this.chartElement.css("background","transparent"),this.controlContainer.find(".bbi-dbrd-control-sub-title").css("color",this.themeHelper.getWidgetTileTextColor()),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getChartProperties().ContainerSettings.TextColor))}},t.prototype.resetAndUpdateData=function(){var n,t;this.getChartProperties().Data.Containers.filter(function(n){return n.Name==="Row"}).length>0&&(n=this.getChartProperties().Data.Containers.filter(function(n){return n.Name==="Row"})[0],n.FieldInfos=[],t=this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name==="Row"})[0],t.FieldInfos=[],this.designerInstance.modules.serialization.updateWidgetData(this.getJson(),this.DataGroupInfo),this.designerInstance.modules.serialization.notifyChange(),BoldBIDashboard.isNullOrUndefined(this.widgetHelper.getCurrentWidgetInstance())||this.widgetHelper.getCurrentWidgetInstance().Name!==this.Name||this.dataConfigurationInstance.resetDataGroupInfoForPoP(this,this.widgetJson.Data.Id,this.widgetJson.Data.DataSetName));this.dataConfigurationInstance.postDraggedFields(this.masterFilterWindowInstance.GetWidgetElementByReportName(this.widgetJson.UniqueName))},t.prototype.isFieldBoundInUnsupportedSection=function(){if(this.getChartProperties().Data.Containers.filter(function(n){return n.Name==="Row"}).length>0){var n=this.getChartProperties().Data.Containers.filter(function(n){return n.Name==="Row"})[0];return n.FieldInfos.length>0}return!1},t.prototype.updatePoPSlaveInfo=function(){var f,e,n,u,i,r,t;if(!BoldBIDashboard.isNullOrUndefined(this.masterFilterWindowInstance)&&!BoldBIDashboard.isNullOrUndefined(this.masterFilterWindowInstance.filterObject)&&!BoldBIDashboard.isNullOrUndefined(this.masterFilterWindowInstance.filterObject.filterConfigurationModel)&&!BoldBIDashboard.isNullOrUndefined(this.masterFilterWindowInstance.filterObject.filterConfigurationModel.MastersCollection)){for(f=this.masterFilterWindowInstance.filterObject.filterConfigurationModel.MastersCollection,n=0;n<f.length;n++)if(f[n].MasterInfo.IsPoP)for(u=f[n].ProfileManager,i=0;i<u.length;i++)for(r=u[i].WidgetInfo,t=0;t<r.length;t++)if(r[t].ID===this.widgetJson.UniqueName){this.isActAsSlaveForAnyPoP=!0;break}if(this.isActAsSlaveForAnyPoP&&this.isFieldBoundInUnsupportedSection()){for(e=this.masterFilterWindowInstance.filterObject.filterConfigurationModel.MastersCollection,n=0;n<e.length;n++)if(e[n].MasterInfo.IsPoP)for(u=e[n].ProfileManager,i=0;i<u.length;i++)for(r=u[i].WidgetInfo,t=0;t<r.length;t++)if(r[t].ID===this.widgetJson.UniqueName){r.splice(t,1);break}this.isActAsSlaveForAnyPoP=!1;this.masterFilterWindowInstance.masterSlaveFilterSerializer(this.masterFilterWindowInstance.filterObject.filterConfigurationModel.MastersCollection)}this.updateInfoIcon()}},t.prototype.updatePoPSettings=function(n){this.isActAsSlaveForAnyPoP!==n&&(this.isActAsSlaveForAnyPoP=n,BoldBIDashboard.isNullOrUndefined(this.dataValues)||(this.isFieldBoundInUnsupportedSection()&&n?this.resetAndUpdateData():this.dataConfigurationInstance.postDraggedFields(this.masterFilterWindowInstance.GetWidgetElementByReportName(this.widgetJson.UniqueName))));this.updateInfoIcon()},t.prototype.updateInfoIcon=function(){this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.isActAsSlaveForAnyPoP&&this.isNecessaryDataConfigured()?BoldBIDashboard.Dashboard.WidgetHelper.showInfoIcon(this.locale.popNotification.slaveWidgetNoVirtualColumText,this):BoldBIDashboard.Dashboard.WidgetHelper.hideInfoIcon(this)},t.prototype.getColorCustomization=function(){return this.getChartProperties().ColorCustomization},t.prototype.updateColorCustomizationSettings=function(n){n.isCustomColorSettingsApplicable(n.getChartProperties().ChartType)&&this.chartHelper.updateColorCustomizationSettings(n)},t.prototype.renderWidgetNoDataAvailableElement=function(){this.chartElement.hide();BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this);BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this);this.IsRendered=!0;BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this)},t.prototype.updateWidgetNotConfigured=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this);this.isShapeChartType(this.getChartProperties().ChartType)&&(this.multipleProportionChart=!1,this.removeAllProportionChartElement());this.chartObj.model.series=this.getDefaultSeries(this.getChartProperties().ChartType);BoldBIDashboard.DashboardDesignerUtility.ChartHelper.resetChartColorUpdateProperties(this.chartObj,this.getChartProperties());this.chartObj.option("palette",this.defaultColorPalette);this.isShapeChartType(this.getChartProperties().ChartType)||(this.chartElement.remove(),this.renderChartItem());this.chartObj.redraw();this.updateDefaultJsonProperties()},t.prototype.generateChartSeries=function(n,t){var r=[],f=this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable,u;this.isShapeChartType(this.getChartProperties().ChartType)||BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateDefaultColorsToProperty(this);var e=f?1:n.widgetData.Data.length,o=function(u){for(var v,w,h,y,c,e,p,o,s=[],l=[],f=JSON.parse(n.widgetData.Data[u]),a=0;a<f.points.length;a++)l.push(f.points[a]);if(!n.hasMoreRecords&&!BoldBIDashboard.isNullOrUndefined(t)&&(v=JSON.parse(n.data).length,v<i.getChartProperties().PageSize))for(w=i.getChartProperties().PageSize-v,h=t.chartObj.model.series[u].points.length-w;h<t.chartObj.model.series[u].points.length;h++)s.push(t.chartObj.model.series[u].points[h]);if(y=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getDefaultColorSettings(f.id,i.getChartProperties()),!i.isShapeChartType(i.getChartProperties().ChartType)&&(f=i.setChartTypeAndAxis(f),!BoldBIDashboard.isNullOrUndefined(i.getChartProperties().ColorPaletteModel)&&i.getChartProperties().ColorPaletteModel.length>0?(c=i.getChartProperties().ColorPaletteModel.filter(function(n){return n.Id===f.id&&n.Name===f.legendName}),BoldBIDashboard.isNullOrUndefined(c)||c.length!==1||(f.fill=c[0].Value)):BoldBIDashboard.isNullOrUndefined(y)||(f.fill=y.Color),f=i.ignoreEmptyPoints(n,u,f,i.getChartProperties().ShowNoDataItem),e=i.DataColumnBindings,f.name=BoldBIDashboard.isNullOrUndefined(f.rowValue)?e[f.id]:f.rowValue+"("+e[f.id]+")",f.legendName=BoldBIDashboard.isNullOrUndefined(f.rowValue)?e[f.id]:f.rowValue+"("+e[f.id]+")",f.title=BoldBIDashboard.isNullOrUndefined(f.rowValue)?e[f.id]:f.rowValue+"("+e[f.id]+")",f.valueFieldColName=e[f.id],s.length>0))for(p=0,o=0;o<s.length+l.length;o++)o<s.length?f.points[o]=s[o]:(f.points[o]=l[p],p++);r.push(f)},i=this;for(u=0;u<e;u++)o(u);return r=this.isShapeChartType(this.getChartProperties().ChartType)?r:this.getSortedSeriesList(this.getTotalPointsValueAsPercentType(r)),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.checkBarWithLineChart(this.getChartProperties().ChartSeriesTypeInfo,r,this),f&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateChartTypeAndAxisToForecastSeries(this,n,r),r},t.prototype.updateChartLegends=function(){var f,t,o,n,s,h,c,l,r,a,i,p;if(!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().CustomLegendInfo)){if(this.getChartProperties().CustomLegendInfo.GroupValues.Values.length>0)for(n=0;n<this.getChartProperties().CustomLegendInfo.GroupValues.Values.length;n++)f=this.getChartProperties().CustomLegendInfo.GroupValues.Values[n],t=BoldBIDashboard.DashboardUtil.getFieldBasedonUniqueColumnName(f.Id,this.DataGroupInfo),BoldBIDashboard.isNullOrUndefined(t)||(o=t.DisplayName,f.Name=o,f.IsModified||(f.Value=o));if(this.getChartProperties().CustomLegendInfo.SingleValues.length>0)for(n=0;n<this.getChartProperties().CustomLegendInfo.SingleValues.length;n++){var e=this.getChartProperties().CustomLegendInfo.SingleValues[n],t=BoldBIDashboard.DashboardUtil.getFieldBasedonUniqueColumnName(e.Id,this.DataGroupInfo),w="("+t.Name+(t.SummaryType!==SummaryType.NONE?"("+this.designerInstance.modules.util.getSummaryTypeLocalizedText(t.SummaryType)+"))":")"),v=e.Caption.replace(w,"");e.Name=v+"("+t.DisplayName+")";e.IsModified||(e.Value=v+"("+t.DisplayName+")")}}if(s=!0,h=this.isShapeChartType(this.getChartProperties().ChartType),h&&(c=this.dataGroupBindedColumnInfo(),(c.valueLength===0||c.columnLength>0)&&(s=!1)),s)if(h)for(a=this.ContentContainer.find(".e-datavisualization-chart"),i=0;i<a.length;i++)p=this.bbdesigner$(a[i]).data("BoldBIDashboardChart"),this.chartProperties.updateCustomLegendValuesToChartObj(p);else if(this.chartProperties.updateCustomLegendValuesToChartObj(this.chartObj),this.getChartProperties().ColorMappingType.toLocaleLowerCase()==="data"){l=this.dataGroupBindedColumnInfo();r=[];l.rowLength>0?r=this.getLegendCategory("SingleValues"):l.valueLength>0&&(r=this.getLegendCategory("Values"));var y=[],b=function(n){var t=[],i;t=u.getChartProperties().ColorPaletteModel.filter(function(t){return t.Name===r[n].Name});i=!BoldBIDashboard.isNullOrUndefined(t[0])&&!BoldBIDashboard.isNullOrUndefined(t[0].Value)&&!u.getChartProperties().IsDefaultColorPalette?t[0].Value:BoldBIDashboard.isNullOrUndefined(u.getChartProperties().ColorPaletteModel[n].Value)?u.defaultColorPalette[n%u.defaultColorPalette.length]:u.getChartProperties().ColorPaletteModel[n].Value;y.push({Name:r[n].Name,Value:i,IsModified:!1,Id:r[n].Id})},u=this;for(i=0;i<r.length;i++)b(i);this.getChartProperties().ColorPaletteModel=y}},t.prototype.resetChartColorUpdateProperties=function(){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.resetChartColorUpdateProperties(this.chartObj,this.getChartProperties())},t.prototype.getPercentageValueForSeriesPoints=function(n){for(var u,r,t,i=0;i<n.length;i++)if(u=this.getDecimalPoints(n[i].id),this.isPercentageMeasureFormat(n[i].id,this.DataGroupInfo))for(r=n[i].points,t=0;t<r.length;t++)this.defaultSeries?n[i].points[t].formattedtext=n[i].points[t].text=this.getPercetageValueForPoints(r[t],r[t].totalValue,u):n[i].points[t].text=this.getPercetageValueForPoints(r[t],r[t].totalValue,u);return n},t.prototype.updateDefaultJsonProperties=function(){this.getChartProperties().CustomLegendInfo.SingleValues=[];this.getChartProperties().CustomLegendInfo.GroupValues.Series=[];this.getChartProperties().CustomLegendInfo.GroupValues.Values=[];this.getChartProperties().ColorPalette=this.defaultColorPalette;this.getChartProperties().ColorPaletteModel=[];this.getChartProperties().IsDefaultColorPalette=!0;this.getChartProperties().IsCustomLegend=!1;this.getChartProperties().TrendLineSettings=[];this.getChartProperties().ColorCustomization=null;this.getChartProperties().DefaultColors=null;this.getChartProperties().EnableColorSettings=!1},t.prototype.renderMultipleProportionCharts=function(n){this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer);this.multipleProportionChart||BoldBIDashboard.isNullOrUndefined(this.chartObj)?(this.removeAllProportionChartElement(),this.chartItem.remove()):(this.chartObj.destroy(),this.chartObj=null);this.multipleProportionChart=!0;this.chartContent=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box",overflow:"hidden"},{id:this.chartElement.attr("id")+"_chartContent"});this.chartElement.append(this.chartContent);this.chartItem.remove();this.chartContent.parent().addClass("e-proportion-chartitem");var t=this.getChartProperties().FixedSeriesSettings.IsFixedRowsAndColumns&&n.length>1?this.getFixedSizeForProportionalChart(this.chartContent,n.length):this.getSizeForProportionCharts(this.chartContent,n.length);this.createMultipleProportionCharts(n,t,this.getChartType(this.getChartProperties().ChartType));this.addScrollerForMultipleCharts(this.chartElement)},t.prototype.addScrollerForMultipleCharts=function(n){var i=this,t=this;setTimeout(function(r){if(!BoldBIDashboard.isNullOrUndefined(r.model)){n.data("BoldBIDashboardScroller")&&n.BoldBIDashboardScroller("destroy");n.BoldBIDashboardScroller({width:n.width(),height:n.height(),autoHide:!0,scrollerSize:t.designerInstance.scrollerSize.scrollSize,cssClass:"bbi-dbrd-designer-scroller bbi-dbrd-control"});t.chartProperties.updateValueLabelSuffix(t.getChartProperties().ValueLabelSuffix);var f=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getBindedColumns(t),u=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getColorFieldInfo(t.getChartProperties().ColorCustomization,t.getChartProperties().EnableColorSettings,t);BoldBIDashboard.isNullOrUndefined(u)||u.length===0?f.columnValue.length>0&&!t.getChartProperties().EnableColorSettings?t.chartProperties.updateColorPaletteToChartWidget(t.defaultColorPalette):t.chartProperties.updateColorPaletteToChartWidget(t.chartProperties.getModifiedColorPalette()):t.chartProperties.updateProportionChartColorBasedOnValue(u);i.designerInstance.designerPanel.hideLoadingIndicator(t.controlContainer)}},0,this.designerInstance)},t.prototype.getSizeForProportionCharts=function(n,t){var s=0,e=1,h=10,c=15,i=1,u=1,l=t,r=null,f=null,o=this.bbdesigner$(n).width()-h;for(i=Math.round(o/l),(i>c||i<3)&&(i=10);;){if(r=o/i-h,f=r,u=Math.ceil(l/i),i<=e){i=1;break}if(r<200){i-=e;continue}if((this.bbdesigner$(n).height()-f*u)*(100/this.bbdesigner$(n).height())>c){i-=e;continue}break}return u<=s&&(u=1),i<=s&&(i=1),r=this.alignProportionChartControl(r,t,this.chartContent),this.columnCount=Math.floor(o/r),this.rowCount=Math.floor(this.bbdesigner$(n).height()/f),this.columnCount=this.columnCount===0?1:this.columnCount,this.rowCount=this.rowCount===0?1:this.rowCount,{height:f,width:r}},t.prototype.getFixedSizeForProportionalChart=function(n,t){var f,e,i=this.getChartProperties().FixedSeriesSettings,r,u,o,s;return t>=i.ColumnCount*i.RowCount?(r=i.ColumnCount,u=i.RowCount):(this.getSizeForProportionCharts(n,t),r=this.columnCount,u=this.rowCount),o=this.bbdesigner$(n).width()-10*r,s=this.bbdesigner$(n).height(),e=o/r-1,f=s/u-1,{height:f,width:e}},t.prototype.getFixedSeriesSettingsVisibility=function(){var n=this.dataGroupBindedColumnInfo();return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(this.getChartProperties().ChartType)&&(n.valueLength>1&&n.columnLength!==0||n.rowLength>0)},t.prototype.alignProportionChartControl=function(n,t,i){var r=Math.floor(i.width()/n),u,f;return t<r&&(u=(r-t)*(n+10),f=u/t,n=n+f),n},t.prototype.createMultipleProportionCharts=function(n,t,i){for(var f,e=this,r=this,u=0;u<n.length;u++)f="timer"+this.chartContent.attr("id")+u,BoldBIDashboard.isNullOrUndefined(this.timerCollection[f])||this.clearTimers(this.timerCollection[f]),this.timerCollection[f]=setTimeout(function(u,f,o){var h,s,c;BoldBIDashboard.isNullOrUndefined(o.model)||(h=r.bbdesigner$("<div>").attr({id:r.designerId+"series"+r.widgetJson.UniqueName+u+"drillLevel"+f+r.drillLevelInfo.length}).css({width:t.width,height:t.height,float:"left","margin-left":"10px"}),r.contentContainer.find("#"+f).append(h),s=r.getProportionChartElement(r.getChartProperties()),s.commonSeriesOptions.type=i,s.series=[n[u]],s.title.responsiveVisibility=!0,BoldBIDashboard.isNullOrUndefined(n[u].title)?(s.title.visible=!1,s.title.responsiveVisibility=!1):s.title.text=n[u].title,s.selectedDataPointIndexes=r.getInitialSelection([n[u]]),r.bbdesigner$(h).BoldBIDashboardChart(s),c=r.bbdesigner$(h).data("BoldBIDashboardChart"),e.setSelectedDataPointIndexes(c),r.chartProperties.updateCustomLegendValuesToChartObj(c))},0,u,this.chartContent.attr("id"),this.designerInstance)},t.prototype.clearTimers=function(n){clearTimeout(n);n=null},t.prototype.removeAllProportionChartElement=function(){var t,n,i;if(!BoldBIDashboard.isNullOrUndefined(this.chartElement)){for(BoldBIDashboard.isNullOrUndefined(this.chartElement.data("BoldBIDashboardScroller"))||this.chartElement.BoldBIDashboardScroller("destroy"),t=this.chartElement.find(".e-datavisualization-chart"),n=0;n<t.length;n++)i=this.bbdesigner$(t[n]).data("BoldBIDashboardChart"),i.destroy();this.contentContainer.find(".chartElement").remove();this.renderChartItem()}},t.prototype.updateAxisTitle=function(){var n,t,i;if(this.getChartProperties().ChartSeriesTypeInfo.length>0){if(!this.isOpenReport){var u=this.dataGroupBindedColumnInfo(),f=u.columnIndex,r=this.DataGroupInfo.FieldContainers[f].FieldInfos;for(r.length===1||r.length===1&&this.getChartProperties().Axis.CategoryAxis.Title===""||r.length>1?this.categoryAxisTitleUpdateWithDefaultValue(r):r.length===0&&(this.chartObj.model.primaryXAxis.title.text=this.getChartProperties().Axis.CategoryAxis.Title="",this.chartObj.model.primaryXAxis.title.visible=!1),n=[],t=[],i=0;i<this.getChartProperties().ChartSeriesTypeInfo.length;i++)this.getChartProperties().ChartSeriesTypeInfo[i].IsSecondaryAxis?t.push(this.getChartProperties().ChartSeriesTypeInfo[i]):n.push(this.getChartProperties().ChartSeriesTypeInfo[i]);n.length===0?this.getChartProperties().Axis.PrimaryValueAxis.IsCustomTitle=!1:this.getChartProperties().Axis.PrimaryValueAxis.Title=this.chartObj.model.primaryYAxis.title.text=this.getChartProperties().Axis.PrimaryValueAxis.IsCustomTitle&&this.getChartProperties().Axis.PrimaryValueAxis.Title!==this.columnBindings[n[0].UniqueColumnName]?this.getChartProperties().Axis.PrimaryValueAxis.Title:n.length>1?this.getChartProperties().Axis.PrimaryValueAxis.Title:n.length===1&&this.getChartProperties().Axis.PrimaryValueAxis.Title!==this.columnBindings[n[0].UniqueColumnName]?this.columnBindings[n[0].UniqueColumnName]:this.getChartProperties().Axis.PrimaryValueAxis.Title;t.length===0?this.getChartProperties().Axis.SecondaryValueAxis.IsCustomTitle=!1:this.getChartProperties().Axis.SecondaryValueAxis.Title=this.chartObj.model.axes[0].title.text=this.getChartProperties().Axis.SecondaryValueAxis.IsCustomTitle&&this.getChartProperties().Axis.SecondaryValueAxis.Title!==this.columnBindings[t[0].UniqueColumnName]?this.getChartProperties().Axis.SecondaryValueAxis.Title:t.length>1?this.getChartProperties().Axis.SecondaryValueAxis.Title:t.length===1&&this.getChartProperties().Axis.SecondaryValueAxis.Title!==this.columnBindings[t[0].UniqueColumnName]?this.columnBindings[t[0].UniqueColumnName]:this.getChartProperties().Axis.SecondaryValueAxis.Title}}else this.chartObj.model.primaryXAxis.title.text=this.getChartProperties().Axis.CategoryAxis.Title="",this.chartObj.model.primaryYAxis.title.text=this.getChartProperties().Axis.PrimaryValueAxis.Title="",this.chartObj.model.axes[0].title.text=this.getChartProperties().Axis.SecondaryValueAxis.Title="",this.getChartProperties().Axis.PrimaryValueAxis.IsCustomTitle=!1,this.getChartProperties().Axis.SecondaryValueAxis.IsCustomTitle=!1;this.chartProperties.setPropertyElement("Axis","CategoryAxisTitleValue",this.getChartProperties().Axis.CategoryAxis.IsCustomTitle?this.getChartProperties().Axis.CategoryAxis.Title:"");this.chartProperties.setPropertyElement("Axis","PrimaryAxisTitleValue",this.getChartProperties().Axis.PrimaryValueAxis.IsCustomTitle?this.getChartProperties().Axis.PrimaryValueAxis.Title:"");this.chartProperties.setPropertyElement("Axis","SecondaryAxisTitleValue",this.getChartProperties().Axis.SecondaryValueAxis.IsCustomTitle?this.getChartProperties().Axis.SecondaryValueAxis.Title:"")},t.prototype.categoryAxisTitleUpdateWithDefaultValue=function(n){this.chartObj.model.primaryXAxis.title.text=this.getChartProperties().Axis.CategoryAxis.Title=!this.getChartProperties().IsEnableDrillDown&&this.getChartProperties().Axis.CategoryAxis.Title!==""&&this.getChartProperties().Axis.CategoryAxis.IsCustomTitle?this.getChartProperties().Axis.CategoryAxis.Title:n[0].DisplayName;this.chartObj.model.primaryXAxis.title.visible=this.getChartProperties().Axis.CategoryAxis.IsEnabled&&this.getChartProperties().Axis.CategoryAxis.ShowTitle;this.propertyPanel.updateItemVisibility("Chart","Axis","CategoryAxisTitleValue",!this.getChartProperties().IsEnableDrillDown)},t.prototype.bindProportionChartMeasureValueToLegendInfo=function(n,t){for(var f,p,u,o,l,c,e,w,b=this.dataGroupBindedColumnInfo(),s=this.DataGroupInfo.FieldContainers[b.valueIndex].FieldInfos,i=[],a=[],h=[],v=[],r=this.bbdesigner$.extend(!0,[],this.getLegendCategory("Values")),y=0;y<n.length;y++)for(f=0;f<s.length;f++)i.indexOf(t[s[f].UniqueColumnName])===-1&&(p=s[f].Name+"("+s[f].SummaryType+")",i.push({Name:t[s[f].UniqueColumnName],Id:s[f].UniqueColumnName,Caption:p}));if(r.length>0){for(u=0;u<r.length;u++)for(o=0;o<i.length;o++)i[o].Id===r[u].Id&&h.indexOf(u)===-1&&(i[o].Name===r[u].Name?h.push(u):(r[u].Name=i[o].Name,r[u].Value=r[u].IsModified?r[u].Value:i[o].Name,h.push(u)));h.length>0?this.removedItemsFromLegendSettings(h,r):r=[]}for(l=0;l<r.length;l++)v.push(r[l].Id);for(c=0;c<i.length;c++)v.indexOf(i[c].Id)===-1&&a.push(i[c].Id);for(e=0;e<i.length;e++)a.indexOf(i[e].Id)!==-1&&(w={Name:i[e].Name,Caption:i[e].Caption,Value:i[e].Name,IsModified:!1,Id:i[e].Id},r[r.length]=w);this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.getChartProperties().CustomLegendInfo.GroupValues.Values=r)},t.prototype.bindProportionChartColumnValueToLegendInfo=function(n){for(var r,s,h,e,u,v,y=this.dataGroupBindedColumnInfo(),c=this.DataGroupInfo.FieldContainers[y.columnIndex].FieldInfos,t=[],l=[],o=[],a=[],i=this.bbdesigner$.extend(!0,[],this.getLegendCategory("Values")),f=0;f<n.length;f++)BoldBIDashboard.isNullOrUndefined(n[f][c[0].UniqueColumnName])||t.indexOf(n[f][c[0].UniqueColumnName])!==-1||t.push(n[f][c[0].UniqueColumnName].toString());if(i.length>0){for(r=0;r<i.length;r++)for(s=0;s<t.length;s++)t[s]===i[r].Name&&o.indexOf(r)===-1&&o.push(r);o.length>0?this.removedItemsFromLegendSettings(o,i):i=[]}for(h=0;h<i.length;h++)a.push(i[h].Name);for(e=0;e<t.length;e++)a.indexOf(t[e])===-1&&l.push(t[e]);for(u=0;u<t.length;u++)l.indexOf(t[u])!==-1&&(v={Name:t[u],Value:t[u],IsModified:!1,Id:"None"},i[i.length]=v);this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.getChartProperties().CustomLegendInfo.GroupValues.Values=i)},t.prototype.getModifiedValusForLegend=function(n,t,i,r){for(var f=this.isActAsSlaveForAnyPoP&&!BoldBIDashboard.isNullOrUndefined(t.id)?t.id.indexOf("_secondary")>-1?t.legendName+"-Secondary":t.legendName+"-Primary":t.legendName,u=0;u<n.length;u++)if(r!=="Values"?i.indexOf(n[u].Name)>-1&&n[u].Name===t.legendName:i.indexOf(n[u].Id)>-1&&n[u].Id===t.id){f=n[u].Value;break}return f},t.prototype.removedItemsFromLegendSettings=function(n,t){for(var i,u,e,o=t.length,r=[],f=0;f<n.length;f++)for(i=0;i<o;i++)n[f]!==i&&n.indexOf(i)===-1&&r.indexOf(i)===-1&&r.push(i);for(u=0;u<r.length;u++)e=t[r[u]],t.splice(t.indexOf(e),1)},t.prototype.getLegendCategory=function(n){var t="";switch(n){case"Values":t=this.getChartProperties().CustomLegendInfo.GroupValues.Values;break;case"SingleValues":t=this.getChartProperties().CustomLegendInfo.SingleValues;break;case"GroupSeries":t=this.getChartProperties().CustomLegendInfo.GroupValues.Series}return t},t.prototype.appendGroupInfoForCustomLegendSeries=function(n,t){this.getChartProperties().CustomLegendInfo.GroupValues.Values=this.getChartProperties().CustomLegendInfo.GroupValues.Series.length===0?[]:this.getChartProperties().CustomLegendInfo.GroupValues.Values;var i=this.dataGroupBindedColumnInfo(),r=this.DataGroupInfo.FieldContainers[i.valueIndex].FieldInfos,u=this.DataGroupInfo.FieldContainers[i.rowIndex].FieldInfos;this.addLegendItemForGroupValues(n,t,r);this.addLegendItemForGroupSeries(n,t,u)},t.prototype.addLegendItemForGroupValues=function(n,t,i){for(var h,s,r,c,e=this.bbdesigner$.extend(!0,[],this.getLegendCategory("Values")),o=[],f=[],u=0;u<i.length;u++)f.indexOf(n[i[u].UniqueColumnName])===-1&&(h=i[u].Name+(i[u].SummaryType!==SummaryType.NONE?"("+i[u].SummaryType+")":""),f.push({legendName:n[i[u].UniqueColumnName],id:i[u].UniqueColumnName,legendCaption:h}));for(u=0;u<e.length;u++)for(r=0;r<f.length;r++)f[r].id===e[u].Id&&e[u].IsModified&&o.indexOf(f[r].id)===-1&&o.push(f[r].id);for(s=[],r=0;r<f.length;r++)c={Caption:f[r].legendCaption,Name:f[r].legendName,Value:this.getModifiedValusForLegend(e,f[r],o,"Values"),IsModified:o.indexOf(f[r].id)>-1,Id:f[r].id},s.push(c);this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.getChartProperties().CustomLegendInfo.GroupValues.Values=s)},t.prototype.addLegendItemForGroupSeries=function(n,t,i){for(var f,o,c,r,a,s=[],h=this.bbdesigner$.extend(!0,[],this.getLegendCategory("GroupSeries")),l=[],u=[],e=0;e<t.length;e++)for(f=0;f<i.length;f++)l.indexOf(t[e][i[f].UniqueColumnName])===-1&&(u.push({legendName:t[e][i[f].UniqueColumnName]}),l.push(t[e][i[f].UniqueColumnName]));for(o=0;o<h.length;o++)for(r=0;r<u.length;r++)u[r].legendName===h[o].Name&&h[o].IsModified&&s.indexOf(u[r].legendName)===-1&&s.push(u[r].legendName);for(c=[],r=0;r<u.length;r++)a={Caption:u[r].legendName,Name:u[r].legendName,Value:this.getModifiedValusForLegend(h,u[r],s,"Series"),IsModified:s.indexOf(u[r].legendName)>-1,Id:"None"},c.push(a);this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.getChartProperties().CustomLegendInfo.GroupValues.Series=c)},t.prototype.updateValueLabelInfo=function(n){var f,e,o,s,r,t,u,i,c,h;for(this.getChartProperties().CustomValueLabels=n,f=!this.isShapeChartType(this.getChartProperties().ChartType)&&!BoldBIDashboard.isNullOrUndefined(this.chartObj)?this.chartObj.model.series:null,e=this.ContentContainer.find(".e-datavisualization-chart"),o=0;o<e.length;o++){if(s=this.bbdesigner$(e[o]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(n)){if(this.getChartProperties().ShowValueLabels)for(i=0;i<f.length;i++)if(this.getChartProperties().ChartType)f[i].marker.dataLabel.visible=!0;else if(c=this.bbdesigner$(e[i]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(c))for(h=0;h<c.model.series.length;h++)h[i].marker.dataLabel.visible=!0}else if(this.isShapeChartType(this.getChartProperties().ChartType)){if(r=this.bbdesigner$(e[o]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(r))for(t=0;t<n.length;t++)for(u=0;u<r.model.series.length;u++)n[t].Name===r.model.series[u].name&&n[t].UniqueColumnName===r.model.series[u].id&&(r.model.series[u].marker.dataLabel.visible=this.getChartProperties().ShowValueLabels?n[t].IsEnabled:!1)}else for(t=0;t<n.length;t++)for(i=0;i<s.model.series.length;i++)n[t].Name===f[i].legendCaption&&n[t].UniqueColumnName===f[i].id&&(s.model.series[i].marker.dataLabel.visible=this.getChartProperties().ShowValueLabels?n[t].IsEnabled:!1);s.redraw()}this.designerInstance.modules.serialization.notifyChange()},t.prototype.updateAdvanceColorPalette=function(n,t){var i=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designPanelInstance.selectedReportItems[0]));!t&&i.getChartProperties().EnableColorSettings?(i.getChartProperties().ColorCustomization=n,this.chartProperties.updateColorPalette(n),this.isExistingChart=!1):BoldBIDashboard.isNullOrUndefined(i.getChartProperties().ColorCustomization)&&(i.chartProperties.setPropertyElement("SeriesPalette","AdvanceColorPalette",!t),i.chartProperties.showConfigureColorPalette(!t));this.designerInstance.modules.serialization.notifyChange()},t.prototype.getChartPropertyPanel=function(){return this.chartProperties.getChartPropertyPanel()},t.prototype.setContainerProperty=function(n){this.containerPropertyItem=n},t.prototype.isShapeChartType=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(n)},t.prototype.isTrendlineSupportChartType=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isTrendlineSupportChartType(n)},t.prototype.isStackedChartType=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isStackedChartType(n)},t.prototype.isCartesianChartType=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCartesianChartType(n)},t.prototype.isCustomColorSettingsApplicable=function(n){return!this.isShapeChartType(n)},t.prototype.isPercentageMeasureFormat=function(n,t){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isPercentageMeasureFormat(n,t)},t.prototype.updateCustomLegendsForShapeChartType=function(n){var i=n.data.legendItem,r,t,u,f;if(this.getChartProperties().IsCustomLegend&&this.drillLevelInfo.length===0&&n.model.legend.responsiveVisibility&&!BoldBIDashboard.isNullOrUndefined(i)&&(r=this.dataGroupBindedColumnInfo(),r.valueLength>0&&r.rowLength===0||this.isShapeChartType(this.getChartProperties().ChartType)))for(t=0;t<this.getChartProperties().CustomLegendInfo.GroupValues.Values.length;t++)r.columnLength===0?(u=BoldBIDashboard.DashboardUtil.getFieldBasedonUniqueColumnName(this.getChartProperties().CustomLegendInfo.GroupValues.Values[t].Id,this.DataGroupInfo),BoldBIDashboard.isNullOrUndefined(u)||(f=this.designerInstance.modules.util.getDisplayName(u),i.Text===f&&(i.Text=this.getChartProperties().CustomLegendInfo.GroupValues.Values[t].Value))):i.Text===this.getChartProperties().CustomLegendInfo.GroupValues.Values[t].Name&&(i.Text=this.getChartProperties().CustomLegendInfo.GroupValues.Values[t].Value)},t.prototype.updateSelectedIndex=function(){if(this.isShapeChartType(this.getChartProperties().ChartType)&&!BoldBIDashboard.isNullOrUndefined(this.selectedShapeItem)){var t=this.designerInstance.element.find("."+this.selectedShapeItem),i=t.parents(".e-datavisualization-chart"),n=i.data("BoldBIDashboardChart");BoldBIDashboard.isNullOrUndefined(n)||(this.selectedIndex=n.model.selectedDataPointIndexes)}},t.prototype.setSelectedDataPointIndexes=function(n){if(this.isShapeChartType(this.getChartProperties().ChartType)&&!BoldBIDashboard.isNullOrUndefined(this.selectedIndex)&&this.selectedIndex.length!==0){var t=this.selectedIndex[0].event.currentTarget.id;t===n._id&&(n.model.selectedDataPointIndexes=this.selectedIndex)}return n},t.prototype.updateAxisSeriesValue=function(){var i,r,n,t;if(!this.isShapeChartType(this.getChartProperties().ChartType)){for(n=0;n<this.DataGroupInfo.FieldContainers[0].FieldInfos.length;n++){for(i=!1,t=0;t<this.getChartProperties().ChartSeriesTypeInfo.length;t++)if(this.getChartProperties().ChartSeriesTypeInfo[t].UniqueColumnName===this.DataGroupInfo.FieldContainers[0].FieldInfos[n].UniqueColumnName){i=!0;break}i||this.getChartProperties().ChartSeriesTypeInfo.push({ChartType:this.getChartSeriesType(!1),UniqueColumnName:this.DataGroupInfo.FieldContainers[0].FieldInfos[n].UniqueColumnName,IsSecondaryAxis:!1,FieldName:this.DataGroupInfo.FieldContainers[0].FieldInfos[n].Name})}for(r=[],n=0;n<this.getChartProperties().ChartSeriesTypeInfo.length;n++)for(t=0;t<this.DataGroupInfo.FieldContainers[0].FieldInfos.length;t++)if(this.getChartProperties().ChartSeriesTypeInfo[n].UniqueColumnName===this.DataGroupInfo.FieldContainers[0].FieldInfos[t].UniqueColumnName){r.push(this.getChartProperties().ChartSeriesTypeInfo[n]);break}this.getChartProperties().ChartSeriesTypeInfo=r}},t.prototype.getChartSeriesType=function(n){var i=this.getChartProperties().ChartType,t;if(this.getChartProperties().ChartSeriesTypeInfo.length>0)for(t=0;t<this.getChartProperties().ChartSeriesTypeInfo.length;t++)n===this.getChartProperties().ChartSeriesTypeInfo[t].IsSecondaryAxis&&(i=this.isPercentChartType(this.getChartProperties().ChartSeriesTypeInfo[t].ChartType)?this.getChartProperties().ChartSeriesTypeInfo[t].ChartType:this.isBarChartType(this.getChartProperties().ChartSeriesTypeInfo[t].ChartType)?this.isBarChartType(i)?i:this.getChartProperties().ChartSeriesTypeInfo[t].ChartType:this.isPercentChartType(i)||this.isBarChartType(i)?this.getChartProperties().ChartSeriesTypeInfo[t].ChartType:i);return i},t.prototype.UpdateAxisVisiblity=function(){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.CellInfo),i=this.dataGroupBindedColumnInfo(),r=i.valueLength,n;this.updateAxisTitle();r>0&&(this.updateAxisPropertyVisibility(),n=this.getUpdatedSeriesAxisCount(),this.chartObj.model.primaryYAxis.visible=t.ShowYAxisLabels?this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&n.primaryValueLength>0:!1,this.chartObj.model.axes[0].visible=t.ShowYAxisLabels?!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&n.secondaryValueLength>0:!1)},t.prototype.getSortedSeriesList=function(n){for(var t,r=[],i=0;i<n.length;i++)this.isDistributionType(n[i].type)||r.push(n[i]);for(t=0;t<n.length;t++)this.isDistributionType(n[t].type)&&r.push(n[t]);return r},t.prototype.updateAxisGridLines=function(n){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateVisibilityForGridLines(this,n);this.chartProperties.setPropertyElement("GridLines","PrimaryValueGridLines",this.getChartProperties().PrimaryValueGridLines);this.chartProperties.setPropertyElement("GridLines","SecondaryValueGridLines",this.getChartProperties().SecondaryValueGridLines);this.chartObj.redraw()},t.prototype.updateChartTypeAndAxisSettings=function(n){var i,r,l,u,f,y,t,s,h,e,w;if(!BoldBIDashboard.isNullOrUndefined(this.chartObj)){var o=this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable,c=this.getChartProperties().ChartSeriesTypeInfo.length,b=this.isAdvanceColorSupported();for(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.checkBarWithLineChart(n,this.chartObj.model.series,this),i=0;i<c;i++)for(r=0;r<n.length;r++)if(this.getChartProperties().ChartSeriesTypeInfo[i].UniqueColumnName===n[r].UniqueColumnName){this.getChartProperties().ChartSeriesTypeInfo[i].IsSecondaryAxis=n[r].IsSecondaryAxis;this.getChartProperties().ChartSeriesTypeInfo[i].ChartType=n[r].ChartType;break}l=!this.isAdvanceColorSupported()&&b&&this.dataGroupBindedColumnInfo().rowLength===0&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ColorCustomization);this.chartHelper.checkColorSettings(l,this);var a=this.dataGroupBindedColumnInfo(),k=a.valueLength!==0&&a.rowLength===0,d=!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ColorCustomization),v=[],g=o?this.getChartProperties().ChartSeriesTypeInfo[0].ChartType==="Spline"||this.getChartProperties().ChartSeriesTypeInfo[0].ChartType==="Line"?this.chartObj.model.series.length:1:this.chartObj.model.series.length;for(u=0;u<g;u++)for(f=0;f<this.getChartProperties().ChartSeriesTypeInfo.length;f++)if(this.chartObj.model.series[u].id===this.getChartProperties().ChartSeriesTypeInfo[f].UniqueColumnName){v.push(this.setChartTypeAndAxis(this.chartObj.model.series[u]));break}BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ColorCustomization)||(e=this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(this.DataGroupInfo,this),y={action:"ColorCustomization",fieldInfoList:e},BoldBIDashboard.DashboardDesignerUtility.ChartHelper.WidgetDataFetch(y,this,this.designerInstance));this.chartObj.model.series=this.getSortedSeriesList(this.getTotalPointsValueAsPercentType(v));this.chartObj.model.axes[0].orientation=this.getChartProperties().ChartSeriesTypeInfo.length>0&&this.isBarChartType(this.getChartProperties().ChartSeriesTypeInfo[0].ChartType)?"horizontal":"vertical";this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable=o?this.getChartProperties().ChartSeriesTypeInfo[0].ChartType==="Spline"||this.getChartProperties().ChartSeriesTypeInfo[0].ChartType==="Line"?!0:!1:!1;o&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateForecastSeries(this.getChartProperties().ForecastProperties,this.chartObj.model.series);BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateTrendLineBasedOnSeriesType(this,this.chartObj,!1);t=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getUpdatedSeriesAxisCount(this.getChartProperties().ChartSeriesTypeInfo);this.chartObj.model.primaryYAxis.valueType=t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.AxisType===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Logarithmic)&&this.axisTypevisible(this.chartObj.model.series,!1)?"logarithmic":"double";this.chartObj.model.axes[0].valueType=t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.AxisType===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Logarithmic)&&this.axisTypevisible(this.chartObj.model.series,!0)?"logarithmic":"double";t.secondaryValueLength>0&&(this.chartObj.model.axes[0].title.font.color=this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getChartAxisTitleFontColor(),this.chartObj.model.axes[0].font.color=this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getChartAxisLabelFontColor(),this.chartObj.model.axes[0].majorGridLines.color=this.themeHelper.getChartMajorGridLinesColor(),this.chartObj.model.axes[0].majorTickLines.color=this.themeHelper.getChartMajorTickLinesColor());this.setRangePaddingValue();this.updateAxisLabelFormat();this.chartProperties.updateValueLabelSuffix(this.getChartProperties().ValueLabelSuffix);this.chartProperties.updateLabelOverFlowMode(this.getChartProperties().Axis.CategoryAxis.LabelOverflowMode);this.updateAxisGridLines(this.defaultSeries);c===1&&n.length>0&&(this.getChartProperties().ChartType=n[0].ChartType);this.UpdateAxisVisiblity();BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateChartElementsVisibility(this,this.chartObj);BoldBIDashboard.DashboardDesignerUtility.ChartHelper.enableOrDisableForecastOption(this);BoldBIDashboard.isNullOrUndefined(this.designerInstance.element.find("#"+this.designerId+"_Chart_trendline_grid_col").data("BoldBIDashboardGrid"))||this.bbdesigner$(this.designerInstance.element.find("#"+this.designerId+"_Chart_trendline_grid_col")).data("BoldBIDashboardGrid").setModel({dataSource:this.getChartProperties().TrendLineSettings});var nt=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isLineStyleVisible(this.chartObj.model.series),tt=this.isMarkerVisible(this.chartObj.model.series),p=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.columnSpacingAndWidthVisibilty(this.getChartProperties().ChartSeriesTypeInfo),it=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.ValueLabelPositionVisibility(this.getChartProperties()),rt=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.LineWidthVisibilty(this.getChartProperties().ChartSeriesTypeInfo);this.propertyPanel.updateItemVisibility("Chart","BasicSettings","LineWidth",rt);this.propertyPanel.updateItemVisibility("Chart","BasicSettings","ShowMarker",tt);this.propertyPanel.updateItemVisibility("Chart","BasicSettings","LineStyle",nt);this.propertyPanel.updateItemVisibility("Chart","BasicSettings","ColumnWidth",p);this.propertyPanel.updateItemVisibility("Chart","BasicSettings","ColumnSpacing",p);this.propertyPanel.updateItemVisibility("Chart","BasicSettings","ValueLabelPosition",it);this.propertyPanel.updateItemVisibility("Chart","Axis","PrimaryAxisType",this.axisTypevisible(this.chartObj.model.series,!1));this.propertyPanel.updateItemVisibility("Chart","Axis","PrimaryAxisFormat",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled);this.propertyPanel.updateItemVisibility("Chart","Axis","PrimaryInverseAxis",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled);this.propertyPanel.updateItemVisibility("Chart","Axis","SecondaryInverseAxis",t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled);this.propertyPanel.updateItemVisibility("Chart","Axis","SecondaryAxisType",t.secondaryValueLength>0&&this.axisTypevisible(this.chartObj.model.series,!0));this.propertyPanel.updateItemVisibility("Chart","Axis","SecondaryAxisFormat",t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled);this.chartProperties.updateTitleVisibility("Chart","FontSettings","PrimaryAxisLabelFont",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,this);this.chartProperties.updateTitleVisibility("Chart","FontSettings","PrimaryAxisTitleFont",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle,this);this.chartProperties.updateTitleVisibility("Chart","FontSettings","SecondaryAxisLabelFont",t.secondaryValueLength>0&&t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,this);this.chartProperties.updateTitleVisibility("Chart","FontSettings","SecondaryAxisTitleFont",t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle,this);this.propertyPanel.updateItemVisibility("Chart","FontSettings","IsAutoPrimaryAxisLabelFontSize",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled);this.propertyPanel.updateItemDisable("float","Chart","FontSettings","PrimaryLabelFontSize",!(t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&!this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize));this.propertyPanel.updateItemVisibility("Chart","FontSettings","PrimaryLabelFontSize",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled);this.propertyPanel.updateItemVisibility("Chart","FontSettings","IsAutoPrimaryAxisTitleFontSize",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle);this.propertyPanel.updateItemDisable("float","Chart","FontSettings","PrimaryTitleFontSize",!(t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&!this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle));this.propertyPanel.updateItemVisibility("Chart","FontSettings","PrimaryTitleFontSize",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle);this.propertyPanel.updateItemVisibility("Chart","FontSettings","IsAutoSecondaryAxisLabelFontSize",t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled);this.propertyPanel.updateItemDisable("float","Chart","FontSettings","SecondaryLabelFontSize",!(t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&!this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize));this.propertyPanel.updateItemVisibility("Chart","FontSettings","SecondaryLabelFontSize",t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled);this.propertyPanel.updateItemVisibility("Chart","FontSettings","IsAutoSecondaryAxisTitleFontSize",t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle);this.propertyPanel.updateItemDisable("float","Chart","FontSettings","SecondaryTitleFontSize",!(t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&!this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle));this.propertyPanel.updateItemVisibility("Chart","BasicSettings","ShowValueInTooltip",this.getChartProperties().ShowTooltip&&this.getVisibilityForShowValueAndPercent());this.propertyPanel.updateItemVisibility("Chart","FontSettings","SecondaryTitleFontSize",t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle);this.chartProperties.setPropertyElement("Formatting","ColorSettings",this.getChartProperties().ColorCustomization);this.chartProperties.setPropertyPanelElement("BasicSettings","EmptyPointMode","Chart");this.propertyPanel.updateCategoryVisibility("Chart","Formatting",k);this.designerInstance.modules.serialization.notifyChange();s=this.defaultPaletteContainer.find("#"+this.categoryId+"_advance_color_palatte_body_element");h=this.defaultPaletteContainer.find("#"+this.categoryId+"_palatte_button");this.isAdvanceColorSupported()?(s.css("display","block"),h.css("display","block"),d?(this.initializeVirtualScrollSettings(),e=this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(this.DataGroupInfo,this),w={action:"ColorCustomization",fieldInfoList:e},BoldBIDashboard.DashboardDesignerUtility.ChartHelper.WidgetDataFetch(w,this,this.designerInstance)):this.chartObj.redraw()):(s.css("display","none"),h.css("display","none"),this.getChartProperties().ColorCustomization=null,this.resetChartColorUpdateProperties(),this.chartObj.redraw())}},t.prototype.updateAxisPropertyVisibility=function(){var t=this.getUpdatedSeriesAxisCount(),n=t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled;this.isShapeChartType(this.getChartProperties().ChartType)||(this.propertyPanel.updateItemVisibility("Chart","Axis","PrimaryValueAxis",t.primaryValueLength>0),this.chartProperties.setPropertyElement("Axis","PrimaryValueAxis",n),this.propertyPanel.updateItemVisibility("Chart","Axis","PrimaryAxisTitle",n),this.propertyPanel.updateItemVisibility("Chart","Axis","PrimaryAxisTitleValue",n&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle),this.propertyPanel.updateItemVisibility("Chart","Axis","PrimaryAxisType",n&&this.axisTypevisible(this.chartObj.model.series,!1)),this.propertyPanel.updateItemVisibility("Chart","Axis","PrimaryAxisFormat",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled),this.chartProperties.updateTitleVisibility("Chart","FontSettings","PrimaryAxisLabelFont",n,this),this.chartProperties.updateTitleVisibility("Chart","FontSettings","PrimaryAxisTitleFont",n&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle,this),this.propertyPanel.updateItemVisibility("Chart","FontSettings","IsAutoPrimaryAxisLabelFontSize",n),this.propertyPanel.updateItemVisibility("Chart","FontSettings","IsAutoPrimaryAxisTitleFontSize",n&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle),this.propertyPanel.updateItemDisable("float","Chart","FontSettings","PrimaryLabelFontSize",!(n&&!this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize)),this.propertyPanel.updateItemDisable("float","Chart","FontSettings","PrimaryTitleFontSize",!(n&&!this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle&&!this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize)),n=t.secondaryValueLength>0&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,this.propertyPanel.updateItemVisibility("Chart","Axis","SecondaryValueAxis",t.secondaryValueLength>0),this.chartProperties.updateTitleVisibility("Chart","FontSettings","SecondaryAxisLabelFont",n,this),this.chartProperties.updateTitleVisibility("Chart","FontSettings","SecondaryAxisTitleFont",n&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle,this),this.chartProperties.setPropertyElement("Axis","SecondaryValueAxis",n),this.propertyPanel.updateItemVisibility("Chart","Axis","SecondaryAxisTitle",n),this.propertyPanel.updateItemVisibility("Chart","Axis","SecondaryAxisTitleValue",n&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle),this.propertyPanel.updateItemVisibility("Chart","Axis","SecondaryAxisType",n&&this.axisTypevisible(this.chartObj.model.series,!0)),this.propertyPanel.updateItemVisibility("Chart","Axis","SecondaryAxisFormat",n),this.chartProperties.updateTitleVisibility("Chart","FontSettings","SecondaryAxisLabelFont",n,this),this.chartProperties.updateTitleVisibility("Chart","FontSettings","SecondaryAxisTitleFont",n&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle,this),this.propertyPanel.updateItemVisibility("Chart","FontSettings","IsAutoSecondaryAxisLabelFontSize",n),this.propertyPanel.updateItemVisibility("Chart","FontSettings","IsAutoSecondaryAxisTitleFontSize",n&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle),this.propertyPanel.updateItemDisable("float","Chart","FontSettings","SecondaryLabelFontSize",!(n&&!this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize)),this.propertyPanel.updateItemDisable("float","Chart","FontSettings","SecondaryTitleFontSize",!(n&&!this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle&&this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize)))},t.prototype.removeAllDrillElements=function(){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.removeAllDrillElementsForChart(this)},t.prototype.getDecimalPoints=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getDecimalPoints(n,this.DataGroupInfo)},t.prototype.getUpdatedSeriesAxisCount=function(){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getUpdatedSeriesAxisCount(this.getChartProperties().ChartSeriesTypeInfo)},t.prototype.getPercetageValueForPoints=function(n,t,i){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getPercetageValueForPoints(n,t,i)},t.prototype.isHighlightEffectRequired=function(){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isHighlightEffectRequired(this)},t.prototype.isSelectionEffectRequired=function(){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isSelectionEffectRequired(this)},t.prototype.isMarkerVisible=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isMarkerVisible(n)},t.prototype.axisTypevisible=function(n,t){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.axisTypevisible(n,this.getChartProperties().ChartSeriesTypeInfo,t)},t.prototype.isDistributionType=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isDistributionType(n)},t.prototype.isBarChartType=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isBarChartType(n)},t.prototype.dataGroupBindedColumnInfo=function(){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(this.DataGroupInfo)},t.prototype.getChartType=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getChartType(n)},t.prototype.onAxisLabelMouseMove=function(n){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.onAxisLabelMouseMove(n,this)},t.prototype.onAxisLabelClick=function(n){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.onAxisLabelClick(n,this,this.designerInstance)},t.prototype.setRangePaddingValue=function(){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.setRangePaddingValue(this.getChartProperties(),this.chartObj.model)},t.prototype.chartLegendItemClick=function(n){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.chartLegendItemClick(this.getChartProperties(),n,this.DataGroupInfo)},t.prototype.updateAxisLabelFormat=function(){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateAxisLabelFormat(this.getChartProperties(),this.chartObj.model)},t.prototype.isPercentChartType=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isPercentChartType(n)},t.prototype.getBreadcrumbDatasource=function(){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getBreadcrumbDatasource(this)},t.prototype.getBindedColumns=function(){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getBindedColumns(this)},t.prototype.setChartTypeAndAxis=function(n){var t=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(this),i=this.designerInstance.canApplyTheme()&&!this.designerInstance.canApplyDashboardTheme();return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.setChartTypeAndAxis(n,this.getChartProperties(),this.getFontSizeBasedOnResolution(),this.themeHelper,t,i)},t.prototype.getTotalPointsValueAsPercentType=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getTotalPointsValueAsPercentType(n,this.getChartProperties().ChartSeriesTypeInfo,this.DataGroupInfo)},t.prototype.selectActions=function(n){this.chartHelper.selectActionsInChart(n,this,this.Name,this.designerInstance)},t.prototype.updateHighlightOrSelectionSettings=function(){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateHighlightOrSelectionSettings(this.DataGroupInfo)},t.prototype.getInitialSelection=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getInitialSelection(n,this)},t.prototype.ignoreEmptyPoints=function(n,t,i,r){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.ignoreEmptyPoints(n,t,i,r)},t.prototype.isAdvanceColorSupported=function(){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isAdvanceColorSupported(this.getChartProperties().ChartSeriesTypeInfo)},t.prototype.addToCacheCollection=function(n){this.designerInstance.loadFromCache||this.designerInstance.addToWidgetCacheCollection(this.Name,n,!0)},t.prototype.toolTipForProportionChart=function(n){if(this.widgetHelper.isMobileMode()){n.data.currentText="";return}var i=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getTooltipForProportionalChart(n,this),r=this.chartElement[0].style.zIndex+"10000",t=this.widgetHelper.generateToolTipTemplate(i,this.chartElement.attr("id"),parseInt(r,10));BoldBIDashboard.isNullOrUndefined(t)||(n.data.currentText=t)},t.prototype.toolTipForCartesianChart=function(n){if(this.widgetHelper.isMobileMode()){n.data.currentText="";return}var i=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getTooltipforCartesianChart(n,this),r=this.chartElement[0].style.zIndex+"10000",t=this.widgetHelper.generateToolTipTemplate(i,this.chartObj._id,parseInt(r,10));BoldBIDashboard.isNullOrUndefined(t)||(n.data.currentText=t)},t.prototype.mouseMoveEvent=function(n){if(this.setCursorType(n),this.showScrollBar(),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.view){var t=this.isShapeChartType(this.getChartProperties().ChartType)?this.chartElement.attr("id"):this.chartItem.attr("id");BoldBIDashboard.DashboardDesignerUtility.ChartHelper.changeTooltipElementPosition(t,this)}},t.prototype.getVisibilityForShowValueAndPercent=function(){return this.getChartProperties().ChartType===ChartTypes.PercentStackedBar.toString()||this.getChartProperties().ChartType===ChartTypes.PercentStackedColumn.toString()},t.prototype.mouseLeaveEvent=function(){this.hideScrollBar()},t.prototype.showScrollBar=function(){BoldBIDashboard.isNullOrUndefined(this.contentContainer)||this.isShapeChartType(this.getChartProperties().ChartType)||this.contentContainer.find(".e-scroller").children(".e-scrollbar").show()},t.prototype.hideScrollBar=function(){BoldBIDashboard.isNullOrUndefined(this.contentContainer)||this.isShapeChartType(this.getChartProperties().ChartType)||this.contentContainer.find(".e-scroller").children(".e-scrollbar").hide()},t.prototype.setCursorType=function(n){var t,i;BoldBIDashboard.isNullOrUndefined(n.data.id)||n.data.id===""||(t=this.designerInstance.element.find("#"+n.data.id).parents(".e-datavisualization-chart"),!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0&&(i=t.find("#"+t.attr("id")+"_svg_SeriesCollection"),i.css({cursor:this.isCursorAsPointer(n)?"pointer":"default"})))},t.prototype.isCursorAsPointer=function(n){var t=this.getChartProperties().IsEnableDrillDown?this.drillLevelInfo.length<this.dataGroupBindedColumnInfo().columnLength-1:this.widgetJson.FilterSettings.ActAsMasterWidget?this.isSelectionEffectRequired():this.widgetJson.UrlLink.EnableLink;return t&&this.isDistributionType(this.getChartProperties().ChartType)?n.data.id.includes("Point")||n.data.id.includes("drillLevel"):t},t.prototype.scrollChanged=function(n){this.VirtualScrollSettings.StartIndex=n.data.startIndex+1;n.action="VirtualScroll";n.fieldInfoList=this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(this.DataGroupInfo,this);BoldBIDashboard.DashboardDesignerUtility.ChartHelper.WidgetDataFetch(n,this,this.designerInstance)},t.prototype.destroyLegendScroll=function(){BoldBIDashboard.isNullOrUndefined(this.chartObj)||this.chartObj.legendContainer.length!==1||this.isShapeChartType(this.getChartProperties().ChartType)||BoldBIDashboard.isNullOrUndefined(this.chartObj.legendContainer.data("BoldBIDashboardScroller"))||this.chartObj.legendContainer.BoldBIDashboardScroller("destroy")},t.prototype.getChartProperties=function(){return this.widgetJson},t.prototype.getChartSubTypes=function(){var n=this.getChartProperties().ChartType;switch(n){case"Column":return ActivityLogItemSubTypes.ColumnChart;case"Bar":return ActivityLogItemSubTypes.BarChart;case"Stacked Column":return ActivityLogItemSubTypes.StackedColumnChart;case"Stacked Bar":return ActivityLogItemSubTypes.StackedBarChart;case"100% Stacked Column":return ActivityLogItemSubTypes.PercentageStackedColumnChart;case"100% Stacked Bar":return ActivityLogItemSubTypes.PercentageStackedBarChart;case"Pie":return ActivityLogItemSubTypes.PieChart;case"Doughnut":return ActivityLogItemSubTypes.DoughnutChart;case"Pyramid":return ActivityLogItemSubTypes.PyramidChart;case"Funnel":return ActivityLogItemSubTypes.FunnelChart;case"Area":return ActivityLogItemSubTypes.AreaChart;case"Spline":return ActivityLogItemSubTypes.SplineChart;case"SplineArea":case"Spline Area":return ActivityLogItemSubTypes.SplineAreaChart;case"Stacked Area":return ActivityLogItemSubTypes.StackedAreaChart;case"Line":return ActivityLogItemSubTypes.LineChart;case"100% Stacked Area":return ActivityLogItemSubTypes.PercentageStackedAreaChart}},t.prototype.chartItemDispose=function(){var t,n,i;if(this.multipleProportionChart||BoldBIDashboard.isNullOrUndefined(this.chartObj))for(t=this.chartElement.find(".e-datavisualization-chart"),n=0;n<t.length;n++)i=this.bbdesigner$(t[n]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||i.destroy();else this.chartObj.destroy(),this.chartObj=null;this.contentContainer.find("#"+this.chartItem.attr("id")+"_toolTip").parent().remove();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,this.getChartSubTypes())},t.prototype.updateCustomLegendSettingsBasedOnValue=function(n){var i=JSON.parse(n.dataValues.data),r=n.columnBindings,u=n.dataValues,t=this.dataGroupBindedColumnInfo();t.valueLength>0&&t.rowLength===0||this.isShapeChartType(this.getChartProperties().ChartType)?(this.getChartProperties().CustomLegendInfo.GroupValues.Values=this.getChartProperties().CustomLegendInfo.GroupValues.Series.length>0?[]:this.getChartProperties().CustomLegendInfo.GroupValues.Values,this.isShapeChartType(this.getChartProperties().ChartType)?this.isShapeChartType(this.getChartProperties().ChartType)&&t.valueLength>0&&t.columnLength>0?this.bindProportionChartColumnValueToLegendInfo(i,r):this.isShapeChartType(this.getChartProperties().ChartType)&&t.valueLength>0&&t.columnLength===0&&this.bindProportionChartMeasureValueToLegendInfo(i,r):this.bindChartLegendsToLegendInfoBySeries(u,"Values"),this.getChartProperties().CustomLegendInfo.SingleValues=[],this.getChartProperties().CustomLegendInfo.GroupValues.Series=[]):!this.isShapeChartType(this.getChartProperties().ChartType)&&t.valueLength>0&&t.rowLength>0&&(this.bindChartLegendsToLegendInfoBySeries(u,"SingleValues"),this.appendGroupInfoForCustomLegendSeries(r,i))},t.prototype.bindChartLegendsToLegendInfoBySeries=function(n,t){var v=this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable,h=v?1:n.widgetData.Data.length,o=this.bbdesigner$.extend(!0,[],this.getLegendCategory(t)),s=[],c,e,u,r,l,f,a,i;if(o.length>0)if(t==="SingleValues")for(i=0;i<o.length;i++)for(u=0;u<h;u++)r=JSON.parse(n.widgetData.Data[u]),r.legendName===o[i].Name&&o[i].IsModified&&s.indexOf(r.legendName)===-1&&s.push(r.legendName);else if(t==="Values")for(i=0;i<o.length;i++)for(u=0;u<h;u++)r=JSON.parse(n.widgetData.Data[u]),c=r.id,c===o[i].Id&&o[i].IsModified&&s.indexOf(c)===-1&&s.push(r.id);for(e=[],u=0;u<h;u++)r=JSON.parse(n.widgetData.Data[u]),l={Caption:r.legendCaption,Name:r.legendName,Value:this.getModifiedValusForLegend(o,r,s,t),IsModified:t==="Values"?s.indexOf(r.id)>-1:s.indexOf(r.legendName)>-1,Id:r.id},e.push(l);if(this.isActAsSlaveForAnyPoP&&t==="Values")for(f=JSON.parse(JSON.stringify(e)),a=function(n){var i=o.filter(function(t){return t.Id===f[n].Id+"_secondary"}),t,r;s.indexOf(f[n].Id.replace("_secondary","")+"_secondary")<0&&(s.length>0&&o.length>0&&i.length>0?(t=e.filter(function(t){return t.Id===f[n].Id}),t.length>0&&(r={Caption:"Secondary -"+t[0].Caption,Name:t[0].Name,Value:i[0].Value,IsModified:i[0].IsModified,Id:i[0].Id},e.push(r),t[0].Caption="Primary -"+t[0].Caption)):e.filter(function(t){return t.Id===f[n].Id+"_secondary"}).length===0&&(f[n].Id=f[n].Id+"_secondary",f[n].IsModified=!1,f[n].Caption="Secondary -"+f[n].Caption,e[n].Caption="Primary -"+e[n].Caption,e.push(f[n])))},i=0;i<f.length;i++)a(i);t==="Values"&&this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design?this.getChartProperties().CustomLegendInfo.GroupValues.Values=e:t==="SingleValues"&&this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.getChartProperties().CustomLegendInfo.SingleValues=e)},t.prototype.updateValueLabelInfos=function(n){var u=n.dataValues,t=n.getChartProperties().CustomValueLabels,e,r,o,i,f;if(this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design||BoldBIDashboard.isNullOrUndefined(t)||t.length===0)if(this.isShapeChartType(this.getChartProperties().ChartType)){if(this.isShapeChartType(this.getChartProperties().ChartType)){if(r=u.widgetData.Data.length,(BoldBIDashboard.isNullOrUndefined(t)||t.length!==r)&&(t=[]),!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0)for(o=function(n){var i=JSON.parse(u.widgetData.Data[n]);t.filter(function(n){return n.Name===i.name&&n.UniqueColumnName===i.id}).length===0&&(t=[])},i=0;i<r;i++)o(i);if(t.length===0)for(i=0;i<r;i++)f=JSON.parse(u.widgetData.Data[i]),t.push({Name:f.name,IsEnabled:!0,UniqueColumnName:f.id});n.getChartProperties().CustomValueLabels=t}}else{if(r=n.getChartProperties().isEnableForecast?1:u.widgetData.Data.length,(BoldBIDashboard.isNullOrUndefined(t)||t.length!==r)&&(t=[]),!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0)for(e=function(n){var i=JSON.parse(u.widgetData.Data[n]);t.filter(function(n){return n.Name===i.legendCaption&&n.UniqueColumnName===i.id}).length===0&&(t=[])},i=0;i<r;i++)e(i);if(t.length===0)for(i=0;i<r;i++)f=JSON.parse(u.widgetData.Data[i]),t.push({Name:f.legendCaption,IsEnabled:!0,UniqueColumnName:f.id});n.getChartProperties().CustomValueLabels=t}},t.prototype.updateCustomLegendValuesToChartSeries=function(n){var t=this.dataGroupBindedColumnInfo(),u,e,o,f,i;if(!BoldBIDashboard.isNullOrUndefined(n)&&t.valueLength>0&&t.rowLength===0||this.isShapeChartType(this.getChartProperties().ChartType))u=this.getChartProperties().CustomLegendInfo.GroupValues.Values,this.isActAsSlaveForAnyPoP&&u.filter(function(t){return t.Id+"_secondary"===n.id}).length>0&&!this.isShapeChartType(this.getChartProperties().ChartType)?n.name=u.filter(function(t){return t.Id+"_secondary"===n.id})[0].Name+"-Secondary":this.isShapeChartType(this.getChartProperties().ChartType)||(e=this.getChartProperties().CustomLegendInfo.GroupValues.Values,n.name=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getCustomLegendItem(n.id,e));else if(!this.isShapeChartType(this.getChartProperties().ChartType)&&!BoldBIDashboard.isNullOrUndefined(n)&&t.valueLength>0&&t.rowLength>0&&this.getChartProperties().CustomLegendInfo.Type===CustomLegendType.Individual)n.name=this.chartProperties.getSingleCustomLegendItem(n.legendName);else if(!this.isShapeChartType(this.getChartProperties().ChartType)&&!BoldBIDashboard.isNullOrUndefined(n)&&t.valueLength>0&&t.rowLength>0&&this.getChartProperties().CustomLegendInfo.Type===CustomLegendType.Group){for(o=this.getChartProperties().CustomLegendInfo.Format,f=[],i=0;i<this.getChartProperties().CustomLegendInfo.GroupValues.Values.length;i++){var s=this.getChartProperties().CustomLegendInfo.GroupValues.Values[i].Value,h=this.getChartProperties().CustomLegendInfo.GroupValues.Values[i].Name,r=this.getChartProperties().CustomLegendInfo.GroupValues.Series.filter(function(t){return t.IsModified&&t.Name===n.rowValue}),c=r.length===1?r[0].Value:n.rowValue,l=r.length===1?r[0].Name:n.rowValue,a=l+" ("+h+")",v=o.replace(new RegExp("{{:Row}}","g"),c).replace(new RegExp("{{:Value}}","g"),s);f.push({LegendName:a,CustomLegendName:v})}n.name=this.chartProperties.getSeriesCustomLegendItem(f,n.legendName)}},t.prototype.updateSeriesColorPalette=function(n){var c=this.dataGroupBindedColumnInfo(),i=[],r=[],l,o,a,h,e,s,f,v,t,u;if(this.isCartesianChartType(this.getChartProperties().ChartType)){if(c.rowLength>0?i=this.getLegendCategory("SingleValues"):c.valueLength>0?i=this.getLegendCategory("Values"):this.getChartProperties().ColorPaletteModel=[],this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design){if(this.getChartProperties().ColorMappingType.toLocaleLowerCase()==="data"){for(l=function(n){var t=[],u;t=o.getChartProperties().ColorPaletteModel.filter(function(t){return t.Name===i[n].Name});u=!BoldBIDashboard.isNullOrUndefined(t[0])&&!BoldBIDashboard.isNullOrUndefined(t[0].Value)&&!o.getChartProperties().IsDefaultColorPalette?t[0].Value:o.defaultColorPalette[n%o.defaultColorPalette.length];r.push({Name:i[n].Name,Value:u,IsModified:!1,Id:i[n].Id})},o=this,e=0;e<i.length;e++)l(e);this.getChartProperties().ColorPaletteModel=r}else if(this.getChartProperties().ColorMappingType.toLocaleLowerCase()==="index"){for(t=0;t<this.defaultColorPalette.length;t++)u=!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().IndexColorPalette[t])&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().IndexColorPalette[t].Value)?this.getChartProperties().IndexColorPalette[t].Value:this.defaultColorPalette[t],s=!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().IndexColorPalette[t])&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().IndexColorPalette[t].IsModified)?this.getChartProperties().IndexColorPalette[t].IsModified:!1,r.push({Name:"Color"+(t+1),Value:u,IsModified:s,Id:null});this.getChartProperties().IndexColorPalette=r}}else if(this.getChartProperties().ColorMappingType.toLocaleLowerCase()==="data")for(a=function(n){var t=h.getChartProperties().ColorPaletteModel.filter(function(t){return t.Name===i[n].Name}),u=!BoldBIDashboard.isNullOrUndefined(t[0])&&!BoldBIDashboard.isNullOrUndefined(t[0].Value)?t[0].Value:h.defaultColorPalette[n%h.defaultColorPalette.length];r.push({Name:i[n].Name,Value:u,IsModified:!1,Id:i[n].Id})},h=this,e=0;e<i.length;e++)a(e);else if(this.getChartProperties().ColorMappingType.toLocaleLowerCase()==="index")for(t=0;t<this.defaultColorPalette.length;t++)u=!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().IndexColorPalette[t])&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().IndexColorPalette[t].Value)?this.getChartProperties().IndexColorPalette[t].Value:this.defaultColorPalette[t%this.defaultColorPalette.length],s=!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().IndexColorPalette[t])&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().IndexColorPalette[t].IsModified)?this.getChartProperties().IndexColorPalette[t].IsModified:!1,r.push({Name:"Color"+(t+1),Value:u,IsModified:s,Id:null})}else{if(n.length>this.defaultColorPalette.length)for(f=0;f<n.length;f++)u=!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ColorPaletteModel[f])&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ColorPaletteModel[f].Value)?this.getChartProperties().ColorPaletteModel[f].Value:this.defaultColorPalette[f],v=u===""?BoldBIDashboard.DashboardUtil.defaultColorPalette[f%BoldBIDashboard.DashboardUtil.defaultColorPalette.length]:u,r.push({Name:"Color"+(f+1),Value:v,IsModified:!1,Id:null});else for(t=0;t<this.defaultColorPalette.length;t++)u=!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ColorPaletteModel[t])&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ColorPaletteModel[t].Value)?this.getChartProperties().ColorPaletteModel[t].Value:this.defaultColorPalette[t],r.push({Name:"Color"+(t+1),Value:u,IsModified:!1,Id:null});this.getChartProperties().ColorPaletteModel=r}return this.getChartProperties().IsDefaultColorPalette||this.chartProperties.updateColorPaletteModel(),this.chartProperties.chartModel=this,r},t.prototype.showAdvanceColorPalette=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),u=t.dataGroupBindedColumnInfo(),r,i;t.isAdvanceColorSupported()&&u.rowLength===0&&n.isInteraction&&(r=[],i=t.defaultPaletteContainer.find("#"+t.categoryId+"_color_settings_button"),n.isChecked?(i.removeAttr("disabled"),t.chartProperties.openAdvancedColorSettings(null)):(i.attr("disabled","disabled"),t.widgetJson.EnableColorSettings=!1),t.chartProperties.updateCartesianColor(r,!n.isChecked),t.chartProperties.showConfigureColorPalette(n.isChecked))},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.ChartItem",InternalChartReportItem,window);BoldBIDashboard.DashboardDesignerUtility.ChartItem.prototype.initialize();InternalChartHelper=function(){function n(n){this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$}return n.setChartTypeAndAxis=function(n,t,i,r,u,f){var e=this.getChartTypeOfSeries(n.id,t.ChartSeriesTypeInfo);n.type=this.getChartType(e.ChartType);n.opacity=this.getOpacity(e.ChartType,t);n.yAxisName=e.IsSecondaryAxis?"secondaryYAxis":null;var o=this.updateDataLabelTextPosition(e.ChartType,t),s=f?u?r.getComboChartDataLabelFont().size:r.getChartDataLabelFont().size:i,h=0;return BoldBIDashboard.isNullOrUndefined(n.marker)?n.marker={shape:"circle",size:{height:6,width:6},visible:t.ShowMarker&&this.isDistributionType(e.ChartType.toLowerCase()),border:{color:u?r.getComboChartMarkerColor():r.getChartMarkerColor()},dataLabel:{textPosition:o,offset:h,visible:t.ShowValueLabels,font:{color:this.getDataLabelFontColor(f,t,e,r),size:t.IsAutoValueLabelFontSize?s:t.ValueLabelFontSize+"px"}}}:(n.marker.visible=t.ShowMarker&&this.isDistributionType(e.ChartType.toLowerCase()),n.marker.dataLabel.textPosition=o,n.marker.dataLabel.offset=h,n.marker.dataLabel.visible=t.ShowValueLabels,n.marker.border.color=r.getChartMarkerColor(),n.marker.dataLabel.font.color=this.getDataLabelFontColor(f,t,e,r),n.marker.dataLabel.font.size=t.IsAutoValueLabelFontSize?s:t.ValueLabelFontSize+"px"),this.setLineStyle(n,t.LineStyleInfo)},n.setLineStyle=function(n,t){var i,r;return(n.type==="line"||n.type==="spline")&&!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0&&(i=t.findIndex(function(t){return t.Series===n.name}),i!==-1?(n.dashArray=BoldBIDashboard.Dashboard.WidgetHelper.getLineStyle(t[i].LineStyle),n.width=t[i].LineWidth):(r=t.findIndex(function(n){return n.Series==="Default"}),r!==-1?(n.dashArray=BoldBIDashboard.Dashboard.WidgetHelper.getLineStyle(t[r].LineStyle),n.width=t[r].LineWidth):(n.dashArray=BoldBIDashboard.Dashboard.WidgetHelper.getLineStyle(LineStyles.Solid.toString()),n.width=1))),n},n.getDataLabelFontColor=function(n,t,i,r){return n&&!BoldBIDashboard.isNullOrUndefined(t.ValueLabel)&&!t.ValueLabel.IsEdited&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isStackedTypeChart(i.ChartType)?r.getStackedChartDataLabelFontColor():n&&!BoldBIDashboard.isNullOrUndefined(t.ValueLabel)&&!t.ValueLabel.IsEdited?r.getChartDataLabelFontColor():!BoldBIDashboard.isNullOrUndefined(t.ValueLabel)&&t.ValueLabel.IsEdited?t.ValueLabel.Color:this.getDataLabelColor(i.ChartType)},n.emptyPointmodeFillVisibilty=function(n){var i=!1,t;if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length!==0)for(t=0;t<n.length;t++)if(n[t].ChartType===ChartTypes.Line.toString()||n[t].ChartType===ChartTypes.Area.toString()||n[t].ChartType===ChartTypes.Spline.toString()||n[t].ChartType===ChartTypes.StackedArea.toString()||n[t].ChartType===ChartTypes.SplineArea.toString()){i=!0;break}return i},n.isStackedTypeChart=function(n){return n.toLowerCase()===ChartTypes.StackedColumn.toString().toLowerCase()||n.toLowerCase()===ChartTypes.StackedBar.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedBar.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedColumn.toString().toLowerCase()},n.getValueLabelPosition=function(n,t){return t.toLocaleLowerCase()===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelPlacement,ValueLabelPlacement.Auto).toLocaleLowerCase()?this.isDistributionType(n)&&this.isPercentChartType(n)?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelPlacement,ValueLabelPlacement.Bottom).toLocaleLowerCase():this.isDistributionType(n)?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelPlacement,ValueLabelPlacement.Top).toLocaleLowerCase():this.isPercentChartType(n)||this.isStackedChartType(n)?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelPlacement,ValueLabelPlacement.Middle).toLocaleLowerCase():BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelPlacement,ValueLabelPlacement.Top).toLocaleLowerCase():t.toLocaleLowerCase()},n.ValueLabelPositionVisibility=function(n){var r=!1,t=n.ChartSeriesTypeInfo,i;if(n.ShowValueLabels&&!BoldBIDashboard.isNullOrUndefined(t)&&t.length!==0)for(i=0;i<t.length;i++)if(this.isCartesianChartType(t[i].ChartType)){r=!0;break}return r},n.getOpacity=function(n,t){var i=1;return this.isAreaChartType(n)&&(t.ChartType.toLowerCase()!=="combochart"?(t.Data.Containers[2].FieldInfos.length!==0||t.ChartSeriesTypeInfo.length!==1)&&(i=.5):t.ChartSeriesTypeInfo.length!==1&&(i=.5)),i},n.getDataLabelColor=function(n){return n.toLowerCase()===ChartTypes.StackedColumn.toString().toLowerCase()||n.toLowerCase()===ChartTypes.StackedBar.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedBar.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedColumn.toString().toLowerCase()?"#ffffff":"var(--primary-text-normal-color)"},n.getChartType=function(n){var t=null;switch(n){case"Column":t="column";break;case"Stacked Column":t="stackingcolumn";break;case"100% Stacked Column":t="stackingcolumn100";break;case"Bar":t="bar";break;case"Stacked Bar":t="stackingbar";break;case"100% Stacked Bar":t="stackingbar100";break;case"Line":t="line";break;case"Smooth Line":case"Spline":t="spline";break;case"Spline Area":t="splinearea";break;case"Pie":t="pie";break;case"Doughnut":t="doughnut";break;case"Pyramid":t="pyramid";break;case"Funnel":t="funnel";break;case"Area":t="area";break;case"Stacked Area":t="stackingarea";break;case"100% Stacked Area":t="stackingarea100";break;case"Scatter":t="scatter";break;case"Bubble":t="bubble";break;case"Polar":t="polar";break;case"Radar":t="radar";break;default:t="column"}return t},n.setRangePaddingValue=function(n,t){for(var o,f="normal",e="normal",r=0,u=0,i=0;i<n.ChartSeriesTypeInfo.length;i++)this.isPercentChartType(n.ChartSeriesTypeInfo[i].ChartType)&&(f=n.ChartSeriesTypeInfo[i].IsSecondaryAxis?f:"round",e=n.ChartSeriesTypeInfo[i].IsSecondaryAxis?"round":e),n.ChartSeriesTypeInfo[i].ChartType!=="Line"&&(n.ChartSeriesTypeInfo[i].ChartType!=="Spline"||n.ChartType.toLowerCase()!=="combochart"&&(BoldBIDashboard.isNullOrUndefined(n.EmptyPointMode)||n.EmptyPointMode.toLocaleLowerCase()!==BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(EmptyPointMode,EmptyPointMode.Gap).toLocaleLowerCase()))||(r=n.ChartSeriesTypeInfo[i].IsSecondaryAxis?r:r+1,u=n.ChartSeriesTypeInfo[i].IsSecondaryAxis?u+1:u);o=this.getUpdatedSeriesAxisCount(n.ChartSeriesTypeInfo);t.primaryYAxis.rangePadding=o.primaryValueLength===r?"additional":f;t.axes[0].rangePadding=o.secondaryValueLength===u?"additional":e},n.updateAxisLabelFormat=function(n,t){for(var i=0;i<n.ChartSeriesTypeInfo.length;i++)n.ChartSeriesTypeInfo[i].IsSecondaryAxis?t.axes[0].labelFormat=this.isPercentChartType(n.ChartSeriesTypeInfo[i].ChartType)?"{value}%":"{value}":t.primaryYAxis.labelFormat=this.isPercentChartType(n.ChartSeriesTypeInfo[i].ChartType)?"{value}%":"{value}"},n.getPercetageValueForPoints=function(n,t,i){var r=t===0?t:parseFloat((n.y*100/t).toFixed(BoldBIDashboard.isNullOrUndefined(i)?2:i));return r+"%"},n.updateTotalValueToPoints=function(n,t){var r,i;if(t.length===0)return n;for(r=function(i){for(var u=function(r){var u=t.filter(function(t){return t.x===n[i].points[r].x});!BoldBIDashboard.isNullOrUndefined(u)&&u.length>0&&(BoldBIDashboard.isNullOrUndefined(n[i].points[r].visible)||!BoldBIDashboard.isNullOrUndefined(n[i].points[r].visible)&&n[i].points[r].visible)&&(n[i].points[r].totalValue=BoldBIDashboard.isNullOrUndefined(n[i].yAxisName)?u[0].primaryTotal:u[0].secondaryTotal)},r=0;r<n[i].points.length;r++)u(r)},i=0;i<n.length;i++)r(i);return n},n.getTotalPointsValueAsPercentType=function(n,t,i){for(var u,s,r,e,f=[],o=0;o<n.length;o++)if(u=n[o].points,BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isPercentChartType(n[o].type))for(s=this.getChartTypeOfSeries(n[o].id,t),r=0;r<u.length;r++)e=this.getIndexOfTotalPoints(f,u[r].x),e!==-1&&(BoldBIDashboard.isNullOrUndefined(u[r].visible)||!BoldBIDashboard.isNullOrUndefined(u[r].visible)&&u[r].visible)?(f[e].primaryTotal=s.IsSecondaryAxis?f[e].primaryTotal:f[e].primaryTotal+u[r].y,f[e].secondaryTotal=s.IsSecondaryAxis?f[e].secondaryTotal+u[r].y:f[e].secondaryTotal):f.push({x:u[r].x,primaryTotal:!s.IsSecondaryAxis&&u[r].y!==""?u[r].y:0,secondaryTotal:s.IsSecondaryAxis&&u[r].y!==""?u[r].y:0});return this.setPercentageValueForSeriesPoints(this.updateTotalValueToPoints(n,f),i)},n.getIndexOfTotalPoints=function(n,t){for(var r=-1,i=0;i<n.length;i++)if(n[i].x===t){r=i;break}return r},n.isAreaChartType=function(n){return n.toLowerCase()===ChartTypes.StackedArea.toString().toLowerCase()||n.toLowerCase()===ChartTypes.Area.toString().toLowerCase()||n.toLowerCase()===ChartTypes.SplineArea.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedArea.toString().toLowerCase()},n.isPercentChartType=function(n){return n==="stackingcolumn100"||n==="stackingarea100"||n==="stackingbar100"||n.toLowerCase()===ChartTypes.PercentStackedColumn.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedArea.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedBar.toString().toLowerCase()},n.isCartesianChartType=function(n){return n===ChartTypes.StackedArea.toString()||n===ChartTypes.Area.toString()||n===ChartTypes.PercentStackedArea.toString()||n===ChartTypes.Spline.toString()||n===ChartTypes.SplineArea.toString()||n===ChartTypes.Line.toString()||n===ChartTypes.StackedColumn.toString()||n===ChartTypes.StackedBar.toString()||n===ChartTypes.PercentStackedColumn.toString()||n===ChartTypes.PercentStackedBar.toString()||n===ChartTypes.Column.toString()||n===ChartTypes.Bar.toString()},n.isVirtualScrollSupportedChartType=function(n){return this.isCartesianChartType(n)||n===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ChartTypes,ChartTypes.ComboChart)},n.isShapeChartType=function(n){return n.toLowerCase()===ChartTypes.Pie.toString().toLowerCase()||n.toLowerCase()===ChartTypes.Doughnut.toString().toLowerCase()||n.toLowerCase()===ChartTypes.Pyramid.toString().toLowerCase()||n.toLowerCase()===ChartTypes.Funnel.toString().toLowerCase()},n.isDistributionType=function(n){return n.toLowerCase()===ChartTypes.StackedArea.toString().toLowerCase()||n.toLowerCase()===ChartTypes.Area.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedArea.toString().toLowerCase()||n.toLowerCase()===ChartTypes.Spline.toString().toLowerCase()||n.toLowerCase()===ChartTypes.SplineArea.toString().toLowerCase()||n.toLowerCase()===ChartTypes.Line.toString().toLowerCase()||n.toLowerCase()==="splinearea"||n.toLowerCase()==="stackingarea100"||n.toLowerCase()==="stackingarea"},n.isStackedChartType=function(n){return n.toLowerCase()===ChartTypes.StackedColumn.toString().toLowerCase()||n.toLowerCase()===ChartTypes.StackedArea.toString().toLowerCase()||n.toLowerCase()===ChartTypes.StackedBar.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedColumn.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedArea.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedBar.toString().toLowerCase()||n.toLowerCase()==="stackingarea"||n.toLowerCase()==="stackingcolumn"||n.toLowerCase()==="stackingbar"||n.toLowerCase()==="stackingcolumn100"||n.toLowerCase()==="stackingarea100"||n.toLowerCase()==="stackingbar100"},n.isBarChartType=function(n){return n.toLowerCase()===ChartTypes.Bar.toString().toLowerCase()||n.toLowerCase()===ChartTypes.StackedBar.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedBar.toString().toLowerCase()},n.isMarkerVisible=function(n){for(var i=!1,t=0;t<n.length;t++)if(this.isDistributionType(n[t].type)){i=!0;break}return i},n.isLineStyleVisible=function(n){for(var i=n.length,t=0;t<i;t++)if(n[t].type==="line"||n[t].type==="spline")return!0;return!1},n.axisTypevisible=function(n,t,i){var f=this,r,u;return i?(r=t.filter(function(n){return n.IsSecondaryAxis===!0}),u=r.length>0?r.every(function(n){return f.isPercentChartType(n.ChartType)})?!1:!0:!1,u):(r=t.filter(function(n){return n.IsSecondaryAxis===!1}),u=r.length>0?r.every(function(n){return f.isPercentChartType(n.ChartType)})?!1:!0:!1,u)},n.chartLegendItemClick=function(n,t,i){var s,r,v,l,e,a,y,o,u;if(!BoldBIDashboard.isNullOrUndefined(t)){var c=t.data.legendItem.LegendItem,f=t.model.series,h=f[c.SeriesIndex];if(this.isPercentChartType(h.type))for(s=h.points,r=0;r<s.length;r++)if(v=h.points[r].x,h.points[r].y!==0){for(l=c.visibility==="visible"?s[r].totalValue-Math.abs(s[r].y):s[r].totalValue+Math.abs(s[r].y),e=0;e<f.length;e++)if(a=this.getDecimalPoints(f[e].id,i),y=this.isPercentageMeasureFormat(f[e].id,i),y&&this.isPercentChartType(f[e].type)&&h.yAxisName===f[e].yAxisName)for(o=f[e].points,u=0;u<o.length;u++)o[u].x===v&&o[u].y!==0&&(o[u].totalValue=l,o[u].text=n.ShowValueLabelSuffix?this.getPercetageValueForPoints(o[u],l,a)+n.ValueLabelSuffix:this.getPercetageValueForPoints(o[u],l,a))}else continue;else n.ForecastProperties.ForecastSettings.IsEnable&&c.SeriesIndex===1&&(f[2].visibility=c.visibility==="visible"?"hidden":"visible")}},n.updateTrendLineToAllSeries=function(n,t){for(var r=n.getChartProperties(),u=r.TrendLineSettings,f=r.ForecastProperties.ForecastSettings.IsEnable,e=f?1:t.length,i=0;i<e;i++)BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateTrendLineToSeries(u,t[i])},n.isTrendlineSupportChartType=function(n){if(!BoldBIDashboard.isNullOrUndefined(n))for(var t=0;t<n.length;t++)if(this.isStackedChartType(n[t].type))return!1;return!0},n.updateTrendLineBasedOnSeriesType=function(n,t,i){var u=this.isTrendlineSupportChartType(t.model.series),r;if(u)this.updateTrendLineToAllSeries(n,t.model.series);else for(r=0;r<t.model.series.length;r++)t.model.series[r].trendlines=[];n.propertyPanel.updateCategoryVisibility(i?"ComboChart":"Chart","Trendline",u);n.propertyPanel.updateItemVisibility(i?"ComboChart":"Chart","Trendline","Trendline",u)},n.updateValueLabelVisibility=function(n,t,i,r){var f,u,e;if(!BoldBIDashboard.isNullOrUndefined(r))for(f=0;f<r.length;f++)if(!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0)if(this.isShapeChartType(t.getChartProperties().ChartType))for(u=0;u<i.length;u++)for(e=0;e<r.length;e++)i[u].Name===r[e].name&&i[u].UniqueColumnName===r[e].id&&(r[e].marker.dataLabel.visible=n?i[u].IsEnabled:!1);else for(u=0;u<i.length;u++)r[f].legendCaption===i[u].Name&&i[u].UniqueColumnName===r[f].id&&(r[f].marker.dataLabel.visible=n?i[u].IsEnabled:!1);else r[f].marker.dataLabel.visible=this.isShapeChartType(t.getChartProperties().ChartType)?n:n},n.updateValueLabels=function(n,t,i){var s,f,h,u,r,a,c,e;i===void 0&&(i=null);var v=this.isCombinationChart(t),o=t.getChartProperties(),l=t.DataGroupInfo;for(o.ValueLabelSuffix=n,s=t.contentContainer.find(".e-datavisualization-chart"),f=0;f<s.length;f++)if(h=BoldBIDashboardDesigner.bbdesignerstatic$(s[f]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(h))for(u=h.model.series,r=0;r<u.length;r++)for(a=this.getDecimalPoints(u[r].id,l),c=u[r].points,e=0;e<c.length;e++)BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateDataSuffixToPoint(v,u[r],c[e],a,l,o.ShowValueLabelSuffix,BoldBIDashboard.isNullOrUndefined(i)?o.ValueLabelSuffix:i)},n.updateValueLabelSuffix=function(n,t,i){var h,f,e,u,r,a,c,o;i===void 0&&(i=null);var v=this.isCombinationChart(t),s=t.getChartProperties(),l=t.DataGroupInfo;for(s.ValueLabelSuffix=n,h=t.contentContainer.find(".e-datavisualization-chart"),f=0;f<h.length;f++)if(e=BoldBIDashboardDesigner.bbdesignerstatic$(h[f]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(e)){for(u=e.model.series,r=0;r<u.length;r++)for(a=this.getDecimalPoints(u[r].id,l),c=u[r].points,o=0;o<c.length;o++)BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateDataSuffixToPoint(v,u[r],c[o],a,l,s.ShowValueLabelSuffix,BoldBIDashboard.isNullOrUndefined(i)?s.ValueLabelSuffix:i);e.redraw()}},n.getCustomLegendItem=function(n,t){if(t.length>0)for(var i=0;i<t.length;i++)if(t[i].Id===n)return t[i].Value},n.getDecimalPoints=function(n,t){return!BoldBIDashboard.isNullOrUndefined(t)&&t.FieldContainers.length>0&&t.FieldContainers[0].FieldInfos.length>0&&t.FieldContainers[0].FieldInfos.filter(function(t){return t.UniqueColumnName===n}).length>0?t.FieldContainers[0].FieldInfos.filter(function(t){return t.UniqueColumnName===n})[0].MeasureFormatting.DecimalPoints:2},n.getUpdatedSeriesAxisCount=function(n){for(var t={primaryValueLength:0,secondaryValueLength:0},i=0;i<n.length;i++)n[i].IsSecondaryAxis?t.secondaryValueLength+=1:t.primaryValueLength+=1;return t},n.updateTrendLineSettings=function(n,t,i){for(var r,u=0;u<t.length;u++)for(r=0;r<i.length;r++)i[r].id===t[u].id&&(i.splice(r,1),r--);for(u=0;u<i.length;u++)for(r=0;r<n.length;r++)n[r].UniqueName===i[u].id&&(n.splice(r,1),r--)},n.updateVisibilityForGridLines=function(n,t){var r=this.isCombinationChart(n),u=n.getChartProperties(),f=r?n.comboChartObj:n.chartObj,i=this.getUpdatedSeriesAxisCount(u.ChartSeriesTypeInfo),e=t||i.primaryValueLength>0?u.PrimaryValueGridLines:!1,o=t||i.secondaryValueLength>0?u.SecondaryValueGridLines:!1;n.propertyPanel.updateItemDisable("bool",r?"ComboChart":"Chart","GridLines","PrimaryValueGridLines",!t&&i.primaryValueLength===0);n.propertyPanel.updateItemDisable("bool",r?"ComboChart":"Chart","GridLines","SecondaryValueGridLines",!t&&i.secondaryValueLength===0);f.model.primaryYAxis.majorGridLines.visible=e;f.model.axes[0].majorGridLines.visible=o},n.prototype.onFieldDragDropped=function(n,t,i,r,u){var e,o,f;if(BoldBIDashboard.isNullOrUndefined(r))return!0;if(e=!0,o="",!BoldBIDashboard.isNullOrUndefined(n.FieldType)&&(n.FieldType===FieldType.Dimensions||n.FieldType===FieldType.Measures))for(f=0;f<t.FieldContainers.length;f++){if(o=t.FieldContainers[f].Name===n.ContainerName?n.ContainerName.toLowerCase():"",o==="column"&&t.FieldContainers[f].FieldInfos.length===0){e=!0;break}else o==="column"&&t.FieldContainers[f].FieldInfos.length===1&&(this.dashboardDesigner.modules.util.alertDialog(this.dashboardDesigner.getLocalizationContent().multiLevelDrillDialog.titleText,this.dashboardDesigner.getLocalizationContent().multiLevelDrillDialog.dialogContentText,IconType.question,AlertType.Confirm,!1,"",{height:140,width:500,method:"getDialogOutput",instance:this.dashboardDesigner.modules.util,dataInfo:{eventObj:u,droppedItem:r}}),e=!1);o==="row"&&i&&(this.dashboardDesigner.modules.util.alertDialog(this.dashboardDesigner.getLocalizationContent().alertDialogTitle.SlaveWidgetOverrideTitle,this.dashboardDesigner.getLocalizationContent().alertWindowMesages.resetPoPMessage,IconType.question,AlertType.Confirm,!1,"",{height:140,width:500,method:"getDialogOutput",instance:this.dashboardDesigner.modules.util,dataInfo:{eventObj:u,droppedItem:r}}),e=!1)}return e},n.updateActAsMasterWidget=function(n){var r,f,i,t,u;if(!BoldBIDashboard.isNullOrUndefined(n.contentContainer))for(r=n.contentContainer.find(".e-datavisualization-chart"),f=n.DataGroupInfo,i=0;i<r.length;i++)t=BoldBIDashboardDesigner.bbdesignerstatic$(r[i]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(t)||(u=this.updateHighlightOrSelectionSettings(f),t.option("commonSeriesOptions.highlightSettings.enable",this.isHighlightEffectRequired(n)),t.option("commonSeriesOptions.selectionSettings.enable",this.isSelectionEffectRequired(n)),t.option("commonSeriesOptions.highlightSettings.mode",u),t.option("commonSeriesOptions.selectionSettings.mode",u))},n.isHighlightEffectRequired=function(n){var t=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(n.DataGroupInfo),i=n.getChartProperties();return i.IsEnableDrillDown?n.drillLevelInfo.length<t.columnLength-1:i.FilterSettings.ActAsMasterWidget&&!(t.valueLength>0&&t.columnLength===0&&t.rowLength===0)},n.isSelectionEffectRequired=function(n){var t=n.getChartProperties();return t.FilterSettings.ActAsMasterWidget},n.dataGroupBindedColumnInfo=function(n){var r=0,i=0,u=0,f=0,e=0,o=0,s=0,h=0,t;if(!BoldBIDashboard.isNullOrUndefined(n.FieldContainers))for(t=0;t<n.FieldContainers.length;t++)switch(n.FieldContainers[t].Name){case"Column":r=n.FieldContainers[t].FieldInfos.length;e=t;break;case"Row":o=n.FieldContainers[t].FieldInfos.length;u=t;break;case"secondaryYValue":i=i+n.FieldContainers[t].FieldInfos.length;h=t;break;case"primaryYValue":i=i+n.FieldContainers[t].FieldInfos.length;s=t;break;case"YValue":i=i+n.FieldContainers[t].FieldInfos.length;f=t}return{columnLength:r,valueLength:i,rowLength:o,rowIndex:u,valueIndex:f,columnIndex:e,primaryValueIndex:s,secValueIndex:h}},n.updateHighlightOrSelectionSettings=function(n){var t=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(n);return t.valueLength===1&&t.columnLength===1&&t.rowLength===1?"single":t.valueLength>1&&(t.columnLength>0||t.columnLength===0&&t.rowLength===0)?"cluster":t.rowLength===1&&t.columnLength===0?"series":"point"},n.getBindedColumns=function(n){var c=this.isCombinationChart(n),i=n.DataGroupInfo,u=[],f=[],e=[],o=[],s=[],h=[],t,r;if(!BoldBIDashboard.isNullOrUndefined(i.FieldContainers))for(t=0;t<i.FieldContainers.length;t++)r=n.getFieldContainer(),i.FieldContainers[t].Name===r[0].Name?(e=i.FieldContainers[t].FieldInfos,u=i.FieldContainers[t].FieldInfos):i.FieldContainers[t].Name===r[1].Name?(f=i.FieldContainers[t].FieldInfos,o=i.FieldContainers[t].FieldInfos):i.FieldContainers[t].Name===r[2].Name&&(s=i.FieldContainers[t].FieldInfos,h=i.FieldContainers[t].FieldInfos);return c?{primaryYValue:u,secondaryYValue:f,columnValue:s}:{yValueColumns:e,rowColumns:h,columnValue:o}},n.prototype.selectActionsInChart=function(n,t,i,r){var e=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getLinkingData(n,t,r),o=[n.data.pageX,n.data.pageY],f=[],u;if(f=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.populateWidgetSelectionMenuItems(t,e.isEnabled),t.Name.indexOf("ComboChart")>-1){if(t.getChartProperties().IsEnableDrillDown&&t.DataGroupInfo.FieldContainers[2].FieldInfos.length-(BoldBIDashboard.isNullOrUndefined(t.drillLevelInfo)?0:t.drillLevelInfo.length)<=1)for(u=0;u<f.length;u++)f[u]===WidgetAction.DrillDown.toString()&&f.splice(u,1)}else if(t.getChartProperties().IsEnableDrillDown&&t.DataGroupInfo.FieldContainers[1].FieldInfos.length-(BoldBIDashboard.isNullOrUndefined(t.drillLevelInfo)?0:t.drillLevelInfo.length)<=1)for(u=0;u<f.length;u++)f[u]===WidgetAction.DrillDown.toString()&&f.splice(u,1);(t.getChartProperties().FilterSettings.ActAsMasterWidget||t.getChartProperties().IsEnableDrillDown)&&(n.cancel=!0,BoldBIDashboard.isNullOrUndefined(t.chartObj)?BoldBIDashboard.isNullOrUndefined(t.comboChartObj)||t.comboChartObj.option("commonSeriesOptions.selectionSettings.enable",!0):t.chartObj.option("commonSeriesOptions.selectionSettings.enable",!0));BoldBIDashboard.Dashboard.WidgetHelper.createWidgetActionContextMenu(r,t,i,f,n,o)},n.populateWidgetSelectionMenuItems=function(n,t){var i=[];return(n.getChartProperties().IsEnableDrillDown||n.getChartProperties().EnableDrilldown)&&i.push(WidgetAction.DrillDown),n.getChartProperties().FilterSettings.ActAsMasterWidget&&i.push(WidgetAction.Filter),t&&i.push(WidgetAction.Linking),n.getChartProperties().ContainerSettings.ViewData&&i.push(WidgetAction.ViewData),i},n.applyorRemoveSelectionInChart=function(n,t){n===WidgetAction.Filter.toString()?t.drillLevelInfo.length>0?BoldBIDashboard.isNullOrUndefined(t.drilledComboChartObj)?BoldBIDashboard.isNullOrUndefined(t.drilledChartObj)||t.drilledChartObj.option("commonSeriesOptions.selectionSettings.enable",!0):t.drilledComboChartObj.option("commonSeriesOptions.selectionSettings.enable",!0):BoldBIDashboard.isNullOrUndefined(t.comboChartObj)?BoldBIDashboard.isNullOrUndefined(t.chartObj)||t.chartObj.option("commonSeriesOptions.selectionSettings.enable",!0):t.comboChartObj.option("commonSeriesOptions.selectionSettings.enable",!0):t.drillLevelInfo.length>0?BoldBIDashboard.isNullOrUndefined(t.drilledComboChartObj)?BoldBIDashboard.isNullOrUndefined(t.drilledComboChartObj)||t.drilledChartObj.option("commonSeriesOptions.selectionSettings.enable",!1):t.drilledComboChartObj.option("commonSeriesOptions.selectionSettings.enable",!1):BoldBIDashboard.isNullOrUndefined(t.comboChartObj)?BoldBIDashboard.isNullOrUndefined(t.chartObj)||t.chartObj.option("commonSeriesOptions.selectionSettings.enable",!1):t.comboChartObj.option("commonSeriesOptions.selectionSettings.enable",!1)},n.performSelectedAction=function(n,t,i,r){var e,u,f,o,s;i.cancel=!1;e=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(t);switch(n){case WidgetAction.DrillDown.toString():this.applyorRemoveSelectionInChart(n,t,r);u=e?t.DataGroupInfo.FieldContainers[2]:t.DataGroupInfo.FieldContainers[1];BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isValidDataGroupInfoforDrillDown(t.DataGroupInfo,u)&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getBreadcrumbDatasource(t).length<u.FieldInfos.length&&this.chartDrillDownAction(i,!1,t,r);break;case WidgetAction.Filter.toString():t.isCurrentMaster=!0;this.applyorRemoveSelectionInChart(n,t,r);this.processFilterInfoForChart(i,t,r);break;case WidgetAction.Linking.toString():t.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(this.applyorRemoveSelectionInChart(n,t,r),f=this.getLinkingData(i,t,r),BoldBIDashboard.Dashboard.WidgetHelper.updateURLLinkingforDrillDown(f,t,t.widgetJson.IsEnableDrillDown),t.performLinking(f));break;case WidgetAction.ViewData.toString():t.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(BoldBIDashboard.isNullOrUndefined(t.comboChartObj)?BoldBIDashboard.isNullOrUndefined(t.chartObj)||t.chartObj.option("commonSeriesOptions.selectionSettings.enable",!1):t.comboChartObj.option("commonSeriesOptions.selectionSettings.enable",!1),o=r.modules.viewDataDialog,s=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.showSelectItemsInViewData(i,t),o.showViewDataPopup(t,!1,s,!1))}},n.showSelectItemsInViewData=function(n,t){var f=[],u,h,c;if(!BoldBIDashboard.isNullOrUndefined(n)){var s=this.isCombinationChart(t),r=BoldBIDashboard.isNullOrUndefined(n.model._seriesIndex)?0:n.model._seriesIndex,e=n.type==="axisLabelClick"||!BoldBIDashboard.isNullOrUndefined(n.originalEventType)&&n.originalEventType==="axisLabelClick"?BoldBIDashboard.isNullOrUndefined(n.data.index)?0:n.data.index:BoldBIDashboard.isNullOrUndefined(n.data.region.Region.PointIndex)?0:n.data.region.Region.PointIndex;var i=s?t.DataGroupInfo.FieldContainers[2].FieldInfos:t.DataGroupInfo.FieldContainers[1].FieldInfos,o=t.DataGroupInfo.FieldContainers[2].FieldInfos[0],l=InternalChartReportItem.hasCustomDate(o);if(!BoldBIDashboard.isNullOrUndefined(t.drillLevelInfo)&&t.drillLevelInfo.length>0){for(u=0;u<t.drillLevelInfo.length;u++)f.push({selectedItem:t.drillLevelInfo[u].selectedItem,columnId:t.drillLevelInfo[u].id,UniqueColumnName:i[u].UniqueColumnName});h=InternalChartReportItem.hasCustomDate(i[t.drillLevelInfo.length]);f.push({selectedItem:h?n.model._visibleSeries[r].points[e].customformatvalue:n.model._visibleSeries[r].points[e].x,columnId:i[t.drillLevelInfo.length].Id,UniqueColumnName:i[t.drillLevelInfo.length].UniqueColumnName})}else i.length>0&&(c=InternalChartReportItem.hasCustomDate(i[0]),f.push({selectedItem:c?n.model._visibleSeries[r].points[e].customformatvalue:n.model._visibleSeries[r].points[e].x,columnId:i[0].Id,UniqueColumnName:i[0].UniqueColumnName}));s||BoldBIDashboard.isNullOrUndefined(n.model._visibleSeries[r].rowValue)||f.push({selectedItem:l?n.model._visibleSeries[r].customformatvalue:n.model._visibleSeries[r].rowValue,columnId:o.Id,UniqueColumnName:o.UniqueColumnName})}return f},n.isCombinationChart=function(n){return!BoldBIDashboard.isNullOrUndefined(n)&&n instanceof InternalComboChartReportItem},n.loadVirtualData=function(n,t,i,r){var o,h,e,s,u;if(i.modules.resource.updateColorCodeInfo(r),!BoldBIDashboard.isNullOrUndefined(r.Running)&&!BoldBIDashboard.isNullOrUndefined(n.VirtualScrollSettings)){for(o=[],h=Object.keys(r.Running),e=0;e<h.length;e++)o.push({key:r.Running[e].Key,value:r.Running[e].Value});n.VirtualScrollSettings.FieldLastRecord=o}var f=n.generateChartSeries(r,n),c=this.isTrendlineSupportChartType(f),l=this.isCombinationChart(n);if(f.length>0&&c&&this.updateTrendLineToAllSeries(n,f),this.calculatePointsLength(n,r),s=this.getInitialSelection(f,n),l){for(n.comboChartObj.model.series=f,u=0;u<f.length;u++)n.comboChartObj.model.series[u].columnSpacing=n.getChartProperties().ColumnSpacing,n.comboChartObj.model.series[u].columnWidth=n.getChartProperties().ColumnWidth;n.updateCustomLegendValuesToChartObj(n.comboChartObj);n.comboChartObj.model.selectedDataPointIndexes=s;this.updateValueLabelSuffix(n.getChartProperties().ValueLabelSuffix,n)}else{for(n.chartObj.model.series=f,u=0;u<f.length;u++)n.chartObj.model.series[u].columnSpacing=n.getChartProperties().ColumnSpacing,n.chartObj.model.series[u].columnWidth=n.getChartProperties().ColumnWidth;this.isAdvanceColorSupported(n.getChartProperties().ChartSeriesTypeInfo)&&n.getChartProperties().EnableColorSettings&&(this.updateChartPropertiesBasedOnColorType(r,n.chartObj,n.getChartProperties()),n.chartProperties.updateModifiedColorToWidget(n.getChartProperties().ColorCustomization));n.chartProperties.updateCustomLegendValuesToChartObj(n.chartObj);n.chartObj.model.selectedDataPointIndexes=s;n.chartProperties.updateValueLabelSuffix(n.getChartProperties().ValueLabelSuffix)}},n.calculatePointsLength=function(n,t){var r=JSON.parse(t.data),i=0;i=t.hasMoreRecords&&r.length===n.VirtualScrollSettings.PageSize?this.isCombinationChart(n)?n.VirtualScrollSettings.StartIndex- -399:n.VirtualScrollSettings.StartIndex-1+2*n.getChartProperties().PageSize:n.VirtualScrollSettings.StartIndex-1+r.length;this.isCombinationChart(n)?n.comboChartObj.model.primaryXAxis.pointsLength=n.getChartProperties().EnableSmoothScroll?n.maxRecordCount:i:n.chartObj.model.primaryXAxis.pointsLength=n.getChartProperties().EnableSmoothScroll?n.maxRecordCount:i},n.getInitialSelection=function(n,t){var k=this.isCombinationChart(t),u=t.getChartProperties().SelectedFilterValues,d=t.getChartProperties().FilterSettings.ActAsMasterWidget,h=[],f,w,y,r,o,s,b;if(d&&!BoldBIDashboard.isNullOrUndefined(u)&&u.length>0){var c=[],l="",a=this.getBindedColumns(t),p=a.columnValue,v=BoldBIDashboard.isNullOrUndefined(a.rowColumns)?[]:a.rowColumns,i=-1,e=-1;for(f=0;f<u.length;f++)for(c=u[f].InitialDateFilter&&u[f].InitialDateFilter.DateFilterList.length>0?u[f].InitialDateFilter.DateFilterList:u[f].InitialDimensionFilter.Text,l=u[f].UniqueColumnName,w=k?[]:v.filter(function(n){return n.UniqueColumnName===l}),y=p.filter(function(n){return n.UniqueColumnName===l}),r=0;r<n.length;r++)if(w.length>0&&(i=this.isSelectedRow(c,n[r].rowValue)?r:i),this.isMultiSelectionEnabled(t)){if(o=[],y.length>0){for(o=this.getPointIndex(n[r].points,c,!0),s=0;s<o.length;s++)i=v.length>0?i:o[s]>-1?r:-1,h.push({seriesIndex:i,pointIndex:o[s]});break}}else if(y.length>0&&(e=this.getPointIndex(n[r].points,c,!1)),e=p.length===0?0:e,i=v.length>0?i:e>-1?r:-1,i!==-1&&e!==-1){h.push({seriesIndex:i,pointIndex:e});i=e=-1;break}BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(t)}else BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(t);return t.multiSelectionFilter=h,b=JSON.stringify(h),JSON.parse(b)},n.isMultiSelectionEnabled=function(n){var t=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(n.DataGroupInfo),i=this.isCombinationChart(n);return n.getChartProperties().EnableMultiSelection?i?t.columnLength===1:t.columnLength===1&&t.rowLength===0:!1},n.isSelectedRow=function(n,t){for(var i=null,r=0;r<n.length;r++)if(n[r].toString()===t){i=t;break}return t&&i&&(Date.parse(t).toString()==="NaN"&&Date.parse(i).toString()==="NaN"&&t===i||Date.parse(i).toString()!=="NaN"&&Date.parse(t).toString()!=="NaN"&&Date.parse(i)===Date.parse(t))?!0:!1},n.getPointIndex=function(n,t,i){for(var e,u,f=[],r=0;r<n.length;r++)for(e=n[r].x,u=0;u<t.length;u++)if(this.isSelectedPoint(t[u].toString(),e))if(i)f.push(r);else return r;return i?f:-1},n.isSelectedPoint=function(n,t){return t&&n&&(Date.parse(t).toString()==="NaN"&&Date.parse(n).toString()==="NaN"&&t===n||Date.parse(n).toString()!=="NaN"&&Date.parse(t).toString()!=="NaN"&&Date.parse(n)===Date.parse(t))?!0:!1},n.processFilterInfoForChart=function(n,t,i){var l=t.getChartProperties(),e,y,r,v,o,c,a,d,p;if(t.widgetJson.FilterSettings.ActAsMasterWidget&&(e=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(t.DataGroupInfo),y=this.isMultiSelectionEnabled(t),!BoldBIDashboard.isNullOrUndefined(n))){if(n.type==="axisLabelClick"){if(l.ForecastProperties.ForecastSettings.IsEnable&&n.model._seriesIndex!==0)return}else if(l.ForecastProperties.ForecastSettings.IsEnable&&n.data.region.SeriesIndex!==0)return;if(i.triggerActionBeginForWidgetFilterInteraction(t))return;t.widgetJson.SelectedFilterValues=[];var s=[],f=!0,u=t.multiSelectionFilter,h=null;for(r=0;r<u.length;r++)u!==null&&u.length>0&&(n.type==="axisLabelClick"?e.columnLength>0&&e.rowLength===0?u[r].pointIndex===n.data.index?f=!1:s.push({seriesIndex:u[r].seriesIndex,pointIndex:u[r].pointIndex}):e.columnLength===0&&e.rowLength>0?u[r].seriesIndex===n.model._seriesIndex?f=!1:s.push({seriesIndex:u[r].seriesIndex,pointIndex:u[r].pointIndex}):e.columnLength>0&&e.rowLength>0&&(u[r].pointIndex===n.data.index&&u[r].seriesIndex===n.model._seriesIndex?f=!1:s.push({seriesIndex:u[r].seriesIndex,pointIndex:u[r].pointIndex})):e.columnLength>0&&e.rowLength===0?u[r].pointIndex===n.data.region.Region.PointIndex?f=!1:s.push({seriesIndex:u[r].seriesIndex,pointIndex:u[r].pointIndex}):e.columnLength===0&&e.rowLength>0?u[r].seriesIndex===n.data.region.SeriesIndex?f=!1:s.push({seriesIndex:u[r].seriesIndex,pointIndex:u[r].pointIndex}):e.columnLength>0&&e.rowLength>0&&(u[r].pointIndex===n.data.region.Region.PointIndex&&u[r].seriesIndex===n.data.region.SeriesIndex?f=!1:s.push({seriesIndex:u[r].seriesIndex,pointIndex:u[r].pointIndex})),h=!f&&BoldBIDashboard.isNullOrUndefined(h)?r:h);if(y)if(n.type==="axisLabelClick"){if(e.rowLength===1)if(v=[],f){for(o=0;o<n.model.series.length;o++)c=n.model.series[o].points.find(function(t){return t.x===n.data.text}).xValue,v.push({seriesIndex:o,pointIndex:c});t.multiSelectionFilter=f?v:n.model.selectedDataPointIndexes=[]}else f||BoldBIDashboard.isNullOrUndefined(h)||t.multiSelectionFilter.splice(h,1);else c=n.model.series[0].points.find(function(t){return t.x===n.data.text}).xValue,f?t.multiSelectionFilter.push({seriesIndex:0,pointIndex:c}):f||BoldBIDashboard.isNullOrUndefined(h)||t.multiSelectionFilter.splice(h,1);a=JSON.stringify(t.multiSelectionFilter);n.model.selectedDataPointIndexes=JSON.parse(a);t.chartObj.redraw()}else f?t.multiSelectionFilter.push({seriesIndex:n.data.region.SeriesIndex,pointIndex:n.data.region.Region.PointIndex}):f||BoldBIDashboard.isNullOrUndefined(h)||(t.multiSelectionFilter.splice(h,1),a=JSON.stringify(t.multiSelectionFilter),n.model.selectedDataPointIndexes=JSON.parse(a));else if(n.type==="axisLabelClick"){if(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(l.ChartType)&&e.rowLength===1&&e.columnLength!==0){var w=t.designerInstance.element.find("#"+n.data.id),b=w.parents(".e-datavisualization-chart"),k=b.attr("id")+"SelectionStyleseries"+n.model._seriesIndex+"Point"+n.data.index;f=k!==t.selectedShapeItem}if(e.rowLength===1){for(v=[],o=0;o<n.model.series.length;o++)c=n.model.series[o].points.findIndex(function(t){return t.x===n.data.text}),n.model.series[o].highlightSettings.mode="Cluster",n.model.series[o].selectionSettings.mode="Cluster",v.push({seriesIndex:o,pointIndex:c});t.multiSelectionFilter=f?v:n.model.selectedDataPointIndexes=[];BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateSelectedShape(n,t)}else{for(o=0;o<n.model.series.length;o++)n.model.series[o].highlightSettings.mode=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateHighlightOrSelectionSettings(t.dataGroupInfo),n.model.series[o].selectionSettings.mode=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateHighlightOrSelectionSettings(t.dataGroupInfo);c=n.model.series[0].points.find(function(t){return t.x===n.data.text}).xValue;t.multiSelectionFilter=f?[{seriesIndex:0,pointIndex:c}]:n.model.selectedDataPointIndexes=[]}s=[];a=JSON.stringify(t.multiSelectionFilter);n.model.selectedDataPointIndexes=JSON.parse(a);t.chartObj.redraw()}else{if(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(l.ChartType)&&e.rowLength===1&&e.columnLength!==0){var w=t.designerInstance.element.find("#"+n.data.id),b=w.parents(".e-datavisualization-chart"),k=b.attr("id")+"SelectionStyleseries"+n.data.region.SeriesIndex+"Point"+n.data.region.Region.PointIndex;f=k!==t.selectedShapeItem}t.multiSelectionFilter=f?[{seriesIndex:n.data.region.SeriesIndex,pointIndex:n.data.region.Region.PointIndex}]:n.model.selectedDataPointIndexes=[];s=[]}(f||s.length>0)&&(y||(!BoldBIDashboard.isNullOrUndefined(t.selectedShapeItem)&&t.contentContainer.find("."+t.selectedShapeItem).length!==0&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(l.ChartType)&&(d=t.contentContainer.find("."+t.selectedShapeItem),d.attr("class","")),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateSelectedShape(n,t)),p=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.filterInformationGeneration(n,t.DataGroupInfo,t,f,s),t.masterFilterWindowInstance.configureSelectedFilterInfo(l,p.fields,p.selectedValues));l.SelectedFilterValues.length===0?BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(t):BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(t);t.designerInstance.triggerActionCompleteForWidgetFilterInteraction(t);t.masterFilterWindowInstance.doInteraction(t.widgetJson.UniqueName);i.modules.serialization.notifyChange()}},n.filterInformationGeneration=function(n,t,i,r,u){for(var c,l,b,nt,o,k,e,tt,f,a=[],h=[],d=i.getHiddenColumnContainer(),it=i.getColumnContainer(),g=t.FieldContainers,w=0;w<g.length;w++){var s=[],v=[],y=[],p=g[w];for(c=0;c<p.FieldInfos.length;c++){if(l=p.FieldInfos[c],b=InternalChartReportItem.hasCustomDate(l),p.Name==="Column"&&i.drillLevelInfo.length>=c){for(f=c;f<i.drillLevelInfo.length;f++)if(BoldBIDashboard.isNullOrUndefined(i.drillLevelInfo[f].selectedItem)){nt=n.model.series[0].points.find(function(t){return t.x===n.data.text}).xValue;s=(n.type==="axisLabelClick")?n.model._visibleSeries[n.model._seriesIndex].points[nt].x:n.model._visibleSeries[n.data.region.SeriesIndex].points[n.data.region.Region.PointIndex].x;break}else{s=i.drillLevelInfo[f].selectedItem;break}if(s=s.length===0?b?(n.type==="axisLabelClick")?n.model._visibleSeries[0].points[n.model.series[0].points.find(function(t){return t.x===n.data.text}).xValue].customformatvalue:n.model._visibleSeries[n.data.region.SeriesIndex].points[n.data.region.Region.PointIndex].customformatvalue:(n.type==="axisLabelClick")?n.model._visibleSeries[0].points[n.model.series[0].points.find(function(t){return t.x===n.data.text}).xValue].x:n.model._visibleSeries[n.data.region.SeriesIndex].points[n.data.region.Region.PointIndex].x:s,r){for(r&&v.push(s),f=0;f<u.length;f++)v.push(n.model._visibleSeries[u[f].seriesIndex].points[u[f].pointIndex].x);h[l.UniqueColumnName]=v;s=[];v=[];a.push(l)}if(!BoldBIDashboard.isNullOrUndefined(d))for(o=d.FieldInfos,k=it.FieldInfos,e=0;e<o.length;e++){if(u.length<1)h[o[e].UniqueColumnName]=this.getItemValue(o[e].UniqueColumnName,n,i);else{for(y=[],y.push(this.getItemValue(o[e].UniqueColumnName,n,i)),tt=function(t){var f=!BoldBIDashboard.isNullOrUndefined(i.drillLevelInfo)&&i.drillLevelInfo.length>0?k[i.drillLevelInfo.length].UniqueColumnName:k[0].UniqueColumnName;var s=!BoldBIDashboard.isNullOrUndefined(i.drillLevelInfo)&&i.drillLevelInfo.length>0?JSON.parse(i.currentDataValue.data):JSON.parse(i.dataValues.data),h=n.model._visibleSeries[u[t].seriesIndex].points[u[t].pointIndex].x,r=s.filter(function(n){return n[f]===h});y.push(r.length>0?r[0][o[e].UniqueColumnName]:"")},f=0;f<u.length;f++)tt(f);h[o[e].UniqueColumnName]=y}a.push(o[e])}}p.Name==="Row"&&(n.type==="axisLabelClick"||(h[l.UniqueColumnName]=b?n.model._visibleSeries[n.data.region.SeriesIndex].customformatvalue:n.model._visibleSeries[n.data.region.SeriesIndex].rowValue,a.push(l)))}}return h.IsMultiSelection=this.isMultiSelectionEnabled(i),{fields:a,selectedValues:h}},n.processFilterInformation=function(n,t,i){var y=t.getChartProperties(),a=n.filters,e=i.FieldContainers,v=t.getJson().EnableMultiSelection,o=t.getColumnForWidgetFilterAPI(a,e,v),r=o[0],s=o[1],h=o[2],p=o[3],u,c,f,l;if(h.length>0)return r=[],s={},console.error("Given column name(s) ["+h+"] were not found in "+t.widgetJson.ContainerSettings.Title),!1;if(p&&(console.error("ColumnName should not be empty for API filtering"),r.length===0))return!1;if(r.length===0&&h.length===0)for(u=0;u<e.length;u++)for(c=e[u],f=0;f<c.FieldInfos.length;f++)if(l=c.FieldInfos[f],e[u].Name==="Column"&&t.drillLevelInfo.length>=f){s[l.UniqueColumnName]=a[0].values;r.push(l);break}return s.IsMultiSelection=v,t.widgetJson.SelectedFilterValues=[],t.masterFilterWindowInstance.configureSelectedFilterInfo(y,r,s),!0},n.updateSelectedShape=function(n,t){var i,r;n.type==="axisLabelClick"?!BoldBIDashboard.isNullOrUndefined(t.widgetJson)&&this.isShapeChartType(t.getChartProperties().ChartType)&&(i=t.designerInstance.element.find("#"+n.data.id),r=i.parents(".e-datavisualization-chart"),t.selectedShapeItem=r.attr("id")+"SelectionStyleseries"+n.model._seriesIndex+"Point"+n.model.series[0].points.find(function(t){return t.x===n.data.text}).xValue):!BoldBIDashboard.isNullOrUndefined(t.widgetJson)&&this.isShapeChartType(t.getChartProperties().ChartType)&&(i=t.designerInstance.element.find("#"+n.data.id),r=i.parents(".e-datavisualization-chart"),t.selectedShapeItem=r.attr("id")+"SelectionStyleseries"+n.data.region.SeriesIndex+"Point"+n.data.region.Region.PointIndex)},n.getLinkingData=function(n,t,i){var r=t.widgetJson,f={isEnabled:!1,parameterDetails:[],url:"",urlLinkInfo:[]},s,e,u,o;if(!BoldBIDashboard.isNullOrUndefined(r)&&(s=i.modules.util.getSourceData(t.DataGroupInfo,!1,!1,!0),r.UrlLink.EnableLink&&!BoldBIDashboard.isNullOrUndefined(r.UrlLink.GridUrlType)&&r.UrlLink.GridUrlType.toString()===UrlLinkType[UrlLinkType.Row]&&!BoldBIDashboard.isNullOrUndefined(r.UrlLink.UrlPath)&&r.UrlLink.UrlPath!==""))for(e=s.filter(function(n){return r.UrlLink.PassingParameters.indexOf(n.Value)!==-1}),f.url=r.UrlLink.UrlPath,f.isEnabled=!0,u=0;u<e.length;u++)o=this.getItemValue(e[u].Id,n,t),f.parameterDetails.push({parameter:e[u].Value,value:BoldBIDashboard.isNullOrUndefined(o)?e[u].Value:o});return f.urlLinkInfo=r.UrlLink,f},n.getItemValue=function(n,t,i){for(var u,w,f,o,s,h=i.getColumnContainer(),r,b=i.DataGroupInfo,c="",l="",a="",v=!BoldBIDashboard.isNullOrUndefined(i.drillLevelInfo)&&i.drillLevelInfo.length>0?JSON.parse(i.currentDataValue.data):JSON.parse(i.dataValues.data),e=null,k=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(i),y=k?null:i.getRowContainer().FieldInfos,p=0;p<b.FieldContainers.length;p++)for(u=b.FieldContainers[p],w=0;w<b.FieldContainers[p].FieldInfos.length;w++)if(f=u.FieldInfos[w],n===f.UniqueColumnName)if(u.Name==="HiddenColumn"&&(h.FieldInfos.length>0?(c=t.type==="axisLabelClick"||t.type==="ejChartaxisLabelClick"?t.model._visibleSeries[t.model._seriesIndex].points[t.data.index].x:t.model._visibleSeries[t.data.region.SeriesIndex].points[t.data.region.Region.PointIndex].x,a=!BoldBIDashboard.isNullOrUndefined(i.drillLevelInfo)&&i.drillLevelInfo.length>0?h.FieldInfos[i.drillLevelInfo.length].UniqueColumnName:h.FieldInfos[0].UniqueColumnName,k?e=v.filter(function(n){return n[a]===c}):y.length===0?e=v.filter(function(n){return n[a]===c}):(l=BoldBIDashboard.isNullOrUndefined(t.model._visibleSeries[t.data.region.SeriesIndex].rowValue)?t.model._visibleSeries[t.data.region.SeriesIndex].name:t.model._visibleSeries[t.data.region.SeriesIndex].rowValue,e=v.filter(function(n){return n[a]===c&&n[y[0].UniqueColumnName]===l}))):!k&&h.FieldInfos.length===0&&y.length>0&&(l=BoldBIDashboard.isNullOrUndefined(t.model._visibleSeries[t.data.region.SeriesIndex].rowValue)?t.model._visibleSeries[t.data.region.SeriesIndex].name:t.model._visibleSeries[t.data.region.SeriesIndex].rowValue,e=v.filter(function(n){return n[y[0].UniqueColumnName]===l})),r=e.length>0?e[0][f.UniqueColumnName]:""),t.type==="axisLabelClick")if((u.Name==="primaryYValue"||u.Name==="YValue")&&t.model._visibleSeries[t.model._seriesIndex].id===f.UniqueColumnName)r=t.model._visibleSeries[t.model._seriesIndex].points[t.data.index].y;else if(u.Name==="secondaryYValue"&&t.model._visibleSeries[t.model._seriesIndex].id===f.UniqueColumnName)r=t.model._visibleSeries[t.model._seriesIndex].points[t.data.index].y;else if(u.Name==="YValue"&&t.model._visibleSeries[t.model._seriesIndex].id===f.UniqueColumnName)r=t.model._visibleSeries[t.model._seriesIndex].points[t.data.index].y;else if(u.Name==="Column"){if(!BoldBIDashboard.isNullOrUndefined(i.drillLevelInfo)&&i.drillLevelInfo.length>0)for(s=0;s<i.drillLevelInfo.length;s++)if(i.drillLevelInfo[s].id===f.Id){r=i.drillLevelInfo[s].selectedItem;break}r=BoldBIDashboard.isNullOrUndefined(r)?t.model._visibleSeries[t.model._seriesIndex].points[t.data.index].x:r}else u.Name==="Row"&&(r=BoldBIDashboard.isNullOrUndefined(t.model._visibleSeries[t.model._seriesIndex].rowValue)?t.model._visibleSeries[t.model._seriesIndex].name:t.model._visibleSeries[t.model._seriesIndex].rowValue);else if((u.Name==="primaryYValue"||u.Name==="YValue")&&t.model._visibleSeries[t.data.region.SeriesIndex].id===f.UniqueColumnName)r=t.model._visibleSeries[t.data.region.SeriesIndex].points[t.data.region.Region.PointIndex].y;else if(u.Name==="secondaryYValue"&&t.model._visibleSeries[t.data.region.SeriesIndex].id===f.UniqueColumnName)r=t.model._visibleSeries[t.data.region.SeriesIndex].points[t.data.region.Region.PointIndex].y;else if(u.Name==="YValue"&&t.model._visibleSeries[t.data.region.SeriesIndex].id===f.UniqueColumnName)r=t.model._visibleSeries[t.data.region.SeriesIndex].points[t.data.region.Region.PointIndex].y;else if(u.Name==="Column"){if(!BoldBIDashboard.isNullOrUndefined(i.drillLevelInfo)&&i.drillLevelInfo.length>0)for(o=0;o<i.drillLevelInfo.length;o++)if(i.drillLevelInfo[o].id===f.Id){r=i.drillLevelInfo[o].selectedItem;break}r=BoldBIDashboard.isNullOrUndefined(r)?t.model._visibleSeries[t.data.region.SeriesIndex].points[t.data.region.Region.PointIndex].x:r}else u.Name==="Row"&&(r=BoldBIDashboard.isNullOrUndefined(t.model._visibleSeries[t.data.region.SeriesIndex].rowValue)?t.model._visibleSeries[t.data.region.SeriesIndex].name:t.model._visibleSeries[t.data.region.SeriesIndex].rowValue);return r},n.isValidDataGroupInfoforDrillDown=function(n,t){return!BoldBIDashboard.isNullOrUndefined(n.FieldContainers)&&!BoldBIDashboard.isNullOrUndefined(n.FieldContainers[0])&&!BoldBIDashboard.isNullOrUndefined(n.FieldContainers[0].FieldInfos)&&n.FieldContainers[0].FieldInfos.length>0&&t.FieldInfos.length>1},n.updateBreadCrumbText=function(n){n.drillLevelInfo.length>0&&!BoldBIDashboard.isNullOrUndefined(n.breadCrumbItem)&&(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.removeBreadcrumb(n.breadCrumbItem),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.createBreadcrumb(n))},n.getBreadcrumbDatasource=function(n){var f=this.isCombinationChart(n),e=n.DataGroupInfo,u=[],t,i,r,h;if(n.drillLevelInfo.length>0&&(t=f?e.FieldContainers[2]:e.FieldContainers[1],!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.isNullOrUndefined(t.FieldInfos[0]))){var c=t.FieldInfos[0].DisplayName,o=n.widgetJson.UniqueName,s=f?"comboChartItem":n.multipleProportionChart?"chartElement":"chartItem";for(u.push({id:n.designerId+s+o+"_Breadcrumb",displayText:c,columnId:t.FieldInfos[0].UniqueColumnName}),i=0;i<n.drillLevelInfo.length;i++)r=i+1,h=BoldBIDashboard.isNullOrUndefined(t.FieldInfos[r])?"":t.FieldInfos[r].UniqueColumnName,u.push({id:n.designerId+s+o+"drillLevel"+r+"_Breadcrumb",displayText:n.drillLevelInfo[i].selectedItem.toString(),columnId:h})}return u},n.chartDrillDownAction=function(n,t,i,r){var a=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(i)?i.DataGroupInfo.FieldContainers[2]:i.DataGroupInfo.FieldContainers[1],f=n.type==="axisLabelClick"&&!BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(i)&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(i.DataGroupInfo).rowLength>0?i.DataGroupInfo.FieldContainers[2].FieldInfos[0]:null,u=i.drillLevelInfo,e=a.FieldInfos[u.length],o=InternalChartReportItem.hasCustomDate(e),s,h,c,l;n.type==="axisLabelClick"?u.push({id:e.Id,level:u.length,selectedItem:BoldBIDashboard.isNullOrUndefined(f)?o?n.data.axis.labels[n.model.series[0].points.find(function(t){return t.x===n.data.text}).customformatvalue]:n.data.axis.labels[n.model.series[0].points.find(function(t){return t.x===n.data.text}).xValue]:n.data.text,isClickOnAxisLabel:!0}):(s=BoldBIDashboard.isNullOrUndefined(n.data.region.SeriesIndex)?0:n.data.region.SeriesIndex,h=BoldBIDashboard.isNullOrUndefined(n.data.region.Region.PointIndex)?0:n.data.region.Region.PointIndex,u.push({id:e.Id,level:u.length,selectedItem:o?n.model._visibleSeries[s].points[h].customformatvalue:n.model._visibleSeries[s].points[h].x,rowText:o?n.model._visibleSeries[n.data.region.SeriesIndex].customformatvalue:n.model._visibleSeries[n.data.region.SeriesIndex].rowValue}));c=i.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(i.DataGroupInfo,i);l="DrillDown";BoldBIDashboard.isNullOrUndefined(f)||c.push(f);n.fieldInfoList=c;n.action=l;BoldBIDashboard.DashboardDesignerUtility.ChartHelper.WidgetDataFetch(n,i,r)},n.loadDrillDownData=function(n,t,i,r){var h;if(BoldBIDashboard.isNullOrUndefined(r.Message)){i.modules.resource.updateColorCodeInfo(r);var e=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(n),f=n.getChartProperties(),o=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(f.ChartType);if(r.noDataAvailable){BoldBIDashboard.isNullOrUndefined(n.chartElement)?e&&!BoldBIDashboard.isNullOrUndefined(n.comboChartElement)&&n.comboChartElement.hide():n.chartElement.hide();n.contentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").css("display","block");return}BoldBIDashboard.isNullOrUndefined(n.breadCrumbItem)?BoldBIDashboard.DashboardDesignerUtility.ChartHelper.createBreadcrumb(n):(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.removeBreadcrumb(n.breadCrumbItem),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.createBreadcrumb(n));n.currentDataValue=r;var u=n.generateChartSeries(r),s=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(n.DataGroupInfo),c=!o&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isTrendlineSupportChartType(u)&&s.rowLength===0&&!f.IsEnableDrillDown&&s.valueLength>0&&s.columnLength>0;u.length>0&&c&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateTrendLineToAllSeries(n,u);o?o&&(u.length===1?(this.createDrilledChartElementForSingleChart(u,n,r),n.chartProperties.updateModifiedColorToWidget(n.getChartProperties().ColorCustomization,r.data)):(this.showLoadingIndicator(n,null),n.createDrilledChartElementForMultiSeriesChart(u,null))):(this.createDrilledChartElementForSingleChart(u,n,r),h=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isMarkerVisible(u)?f.ShowMarker:!1,e?n.updateMarkerVisibility(h):(n.chartProperties.updateMarkerVisibility(h),n.chartProperties.updateModifiedColorToWidget(n.getChartProperties().ColorCustomization,r.data)));o||(e?BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateValueLabelSuffix(f.ValueLabelSuffix,n):n.chartProperties.updateValueLabelSuffix(f.ValueLabelSuffix),e?n.updateValueLabel(f.CustomValueLabels):n.updateValueLabelInfo(f.CustomValueLabels),this.updateChartSettingsForDrilledCharts(n));n.propertyPanel.updateItemVisibility(e?"ComboChart":"Chart","BasicSettings","ChartTypeAndAxis",!1);e?n.applyWidgetTheme(n.designerInstance.isDarkTypeTheme()):n.applyWidgetTheme(n.designerInstance.isDarkTypeTheme(),!0)}else i.modules.widgetContainerHelper.showControlError(n,r)},n.updateValueLabelForDrilledChart=function(n,t,i,r,u){var e,f,o;if(r&&i.DataGroupInfo.FieldContainers.length>0&&i.DataGroupInfo.FieldContainers[0].Name==="YValue"&&i.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(n)){for(e=n.model.series,f=0;f<n.model.series.length;f++){var s=e[f].points,c=e[f].total,h=i.getDecimalPoints(e[f].id);for(o=0;o<s.length;o++)BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateDataLabelValueToPoint(e[f],o,c,h,t.DataLabel,i),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateDataSuffixToPoint(u,e[f],s[o],h,i.DataGroupInfo,t.ShowValueLabelSuffix,t.ValueLabelSuffix)}i.chartProperties.updateCustomLegendValuesToChartObj(n)}},n.updateChartSettingsForDrilledCharts=function(n){for(var t,r=n.contentContainer.find(".e-datavisualization-chart"),i=0;i<r.length;i++)t=BoldBIDashboardDesigner.bbdesignerstatic$(r[i]).data("BoldBIDashboardChart"),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(n)?(n.updateLegendVisibilityObject(t),n.updateCustomLegendValuesToChartObj(t)):n.chartProperties.updateCustomLegendValuesToChartObj(t)},n.createDrilledChartElementForSingleChart=function(n,t,i){var u=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(t),y=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(t.CellInfo),r=t.getChartProperties(),s=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(r.ChartType),p=u?"comboChartElement":"chartElement",o=BoldBIDashboard.buildTag("div."+p,"",{width:"100%",height:"calc(100% - 20px)","background-color":"transparent","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"100",overflow:"hidden"},{id:t.designerId+(u?"comboChartItem":t.multipleProportionChart?"chartElement":"chartItem")+r.UniqueName+"drillLevel"+t.drillLevelInfo.length}),f=u?t.getComboChartObj(r):s?t.getProportionChartElement(r):t.getCartesianChartElement(r),c,a,v,e,l,h;if(f.series=n,f.width="100%",f.height="100%",!s){for(c=[],a=[],e=0;e<r.ChartSeriesTypeInfo.length;e++)r.ChartSeriesTypeInfo[e].IsSecondaryAxis?a.push(r.ChartSeriesTypeInfo[e]):c.push(r.ChartSeriesTypeInfo[e]);f.primaryYAxis.valueType=c.length>0&&r.Axis.PrimaryValueAxis.AxisType===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Logarithmic)&&t.axisTypevisible(n,!1)?"logarithmic":"double";f.axes[0].valueType=a.length>0&&!BoldBIDashboard.isNullOrUndefined(r.Axis.SecondaryValueAxis)&&r.Axis.SecondaryValueAxis.IsEnabled&&r.Axis.SecondaryValueAxis.AxisType===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Logarithmic)?"logarithmic":"double";f.primaryYAxis.visible=y.ShowYAxisLabels?r.Axis.PrimaryValueAxis.IsEnabled&&c.length>0:!1;f.primaryXAxis.enableTrim=r.Axis.CategoryAxis.EnableTrim;f.primaryXAxis.title.text=u?t.DataGroupInfo.FieldContainers[2].FieldInfos[t.drillLevelInfo.length].DisplayName:t.DataGroupInfo.FieldContainers[1].FieldInfos[t.drillLevelInfo.length].DisplayName}for(t.multipleProportionChart?(o.addClass("e-dbrd-widget bbi-dbrd-control"),t.contentContainer.append(o)):u?t.comboChartElement.append(o):t.chartElement.append(o),s?(t.contentContainer.children().addClass("e-proportion-chartitem"),f.commonSeriesOptions.type=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getChartType(r.ChartType)):t.contentContainer.children().addClass(u?"comboChartItem":"chartitem"),o.BoldBIDashboardChart(f),u?t.drilledComboChartObj=o.data("BoldBIDashboardChart"):t.drilledChartObj=o.data("BoldBIDashboardChart"),v=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getBreadcrumbDatasource(t),e=0;e<v.length-1;e++)l=v[e].id.split("_Breadcrumb")[0],t.multipleProportionChart?t.contentContainer.find("#"+l).css({display:"none"}):u?t.comboChartElement.find("#"+l).css({display:"none"}):t.chartElement.find("#"+l).css({display:"none"});s?this.updateValueLabelForDrilledChart(o.data("BoldBIDashboardChart"),r,t,s,u):(h=o.data("BoldBIDashboardChart"),u?t.updateComboChartElementsVisibility():BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateChartElementsVisibility(t,h),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.setRangePaddingValue(r,h.model),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateAxisLabelFormat(r,h.model),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isAdvanceColorSupported(r.ChartSeriesTypeInfo)&&r.EnableColorSettings&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateChartPropertiesBasedOnColorType(i,h,r));t.multipleProportionChart&&t.chartElement.css({display:"none"})},n.createBreadcrumb=function(n){var t=this.isCombinationChart(n),i=t?n.designerId+"comboChartElement"+n.widgetJson.UniqueName+"Breadcrumb":n.designerId+"chartElement"+n.widgetJson.UniqueName+"Breadcrumb";n.breadCrumbItem=BoldBIDashboard.buildTag("div.Breadcrumb","",{width:"100%",height:"20px",color:"#5997f9",background:"transparent","font-weight":"400","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"100"},{id:i});n.breadCrumbItem.BoldBIDashboardBreadcrumb({dataSource:this.getBreadcrumbDatasource(n),width:"100%",selected:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.drillUp,this,n)});t?n.comboChartElement.prepend(n.breadCrumbItem):n.multipleProportionChart?(n.breadCrumbItem.addClass("e-dbrd-widget e-dbrd-control"),n.contentContainer.prepend(n.breadCrumbItem)):n.chartElement.prepend(n.breadCrumbItem);n.designerInstance.element.find("#"+i+"_breadcrumbDiv").css("background","transparent");this.updateBreadCrumbStyle(n.drillLevelInfo,n)},n.updateBreadCrumbStyle=function(n,t){if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0){var i=n.length;BoldBIDashboardDesigner.bbdesignerstatic$(t.contentContainer.find(".e-dashboardbreadcrumb-drill")[i]).addClass("e-current-drilldowntext");this.updateFontStyleForBreadCrumb(t)}},n.drillUp=function(n,t){for(var o,s,r,v,h,c,l,b,y,p,f=this.isCombinationChart(n),a=n.getChartProperties(),e=1,i=0;i<t.model.dataSource.length;i++)if(t.model.dataSource[i].id===t.tabId){e=i+1;break}for(o=e;o<=n.drillLevelInfo.length;o++){for(s=t.model.dataSource[o].id.split("_Breadcrumb")[0],r=n.contentContainer.find("#"+s),BoldBIDashboard.isNullOrUndefined(r.data("BoldBIDashboardScroller"))||r.BoldBIDashboardScroller("destroy"),BoldBIDashboard.isNullOrUndefined(r.data("BoldBIDashboardChart"))||(h=r.data("BoldBIDashboardChart"),h.destroy()),v=r.find(".e-datavisualization-chart"),i=0;i<v.length;i++)h=BoldBIDashboardDesigner.bbdesignerstatic$(v[i]).data("BoldBIDashboardChart"),h.destroy();r.remove()}for(c=n.drillLevelInfo.length;c>=e;c--)n.drillLevelInfo.splice(c-1);if(e===1)if(n.multipleProportionChart){var s=t.model.dataSource[0].id.split("_Breadcrumb")[0],u=n.contentContainer.find("#"+s),w=u.find(".e-datavisualization-chart");for(l=0;l<w.length;l++)b=w.eq(l),n.updateLegendForDrilledProportionChart(b.data("BoldBIDashboardChart"));u.css({display:"block"});n.chartElement=u}else y=f?n.comboChartItem:n.chartItem,p=f?n.comboChartObj:n.chartObj,y.css({display:"block"}),p.redraw(),this.refreshScroller(y,p),n.drillLevelInfo=[];else{var s=t.model.dataSource[e-1].id.split("_Breadcrumb")[0],u=n.contentContainer.find("#"+s),k=u.data("BoldBIDashboardChart");BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(a.ChartType)?n.updateLegendForDrilledProportionChart(k):k.redraw();u.css({display:"block"});n.multipleProportionChart&&(n.chartElement=u)}f||(n.chartProperties.updateModifiedColorToWidget(a.ColorCustomization),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateLegendDropdownDataToChart(a,n.chartObj,n));this.removeBreadcrumb(n.breadCrumbItem);n.drillLevelInfo.length>0&&this.createBreadcrumb(n);n.propertyPanel.updateItemVisibility(f?"ComboChart":"Chart","BasicSettings","ChartTypeAndAxis",n.drillLevelInfo.length===0);f?n.applyWidgetTheme(n.designerInstance.isDarkTypeTheme()):n.applyWidgetTheme(n.designerInstance.isDarkTypeTheme(),!0)},n.refreshScroller=function(n,t){var u=n.find(".e-scroller"),i,f,h,e,r;if(!BoldBIDashboard.isNullOrUndefined(u)){for(i=0;i<u.length;i++)f=u[i].getAttribute("id"),f.indexOf("legend")<0&&(h=n.find("#"+f),e=h.data("BoldBIDashboardScroller"),BoldBIDashboard.isNullOrUndefined(e)||e.refresh());if(!BoldBIDashboard.isNullOrUndefined(t))for(r=0;r<t.model._axes.length;r++){var o=t.model._axes[r],s=o.orientation.toLowerCase(),c=s==="horizontal"?o.columnIndex:o.rowIndex;s==="horizontal"&&n.find("#ScrollerParent_"+s+"_"+c+"_"+t._id).find(".e-vscrollbar").remove()}}},n.removeBreadcrumb=function(n){BoldBIDashboard.isNullOrUndefined(n)||n.remove()},n.removeAllDrillElementsForChart=function(n){var i=this.isCombinationChart(n),e,o,r,h,t,s,f,u;if(i&&!BoldBIDashboard.isNullOrUndefined(n.comboChartItem)||!i&&!BoldBIDashboard.isNullOrUndefined(n.chartItem)){for(n.multipleProportionChart?(n.chartElement=n.contentContainer.find("#"+n.designerId+"chartElement"+n.widgetJson.UniqueName),n.chartElement.css({display:"block"})):(e=i?n.comboChartItem:n.chartItem,e.css({display:"block"}),this.refreshScroller(e,i?n.comboChartObj:n.chartObj)),this.removeBreadcrumb(n.breadCrumbItem),o=this.getBreadcrumbDatasource(n),r=1;r<o.length;r++){for(h=o[r].id.split("_Breadcrumb")[0],t=n.contentContainer.find("#"+h),BoldBIDashboard.isNullOrUndefined(t.data("BoldBIDashboardScroller"))||t.BoldBIDashboardScroller("destroy"),BoldBIDashboard.isNullOrUndefined(t.data("BoldBIDashboardChart"))||(u=t.data("BoldBIDashboardChart"),u.destroy()),s=t.find(".e-datavisualization-chart"),f=0;f<s.length;f++)u=BoldBIDashboardDesigner.bbdesignerstatic$(s[f]).data("BoldBIDashboardChart"),u.destroy();t.remove()}n.drillLevelInfo=[]}},n.onAxisLabelClick=function(n,t,i){var f,u;if(i.model.mode===BoldBIDashboard.Designer.mode.design)f=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(t)?t.DataGroupInfo.FieldContainers[2]:t.DataGroupInfo.FieldContainers[1],BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isValidDataGroupInfoforDrillDown(t.DataGroupInfo,f)&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getBreadcrumbDatasource(t).length<f.FieldInfos.length&&n.data.axis.valueType==="Category"&&this.chartDrillDownAction(n,!0,t,i);else if(n.data.axis.name==="PrimaryAxis"){var e=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getLinkingData(n,t,i),o=[n.data.pageX,n.data.pageY],r=[];if(r=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.populateWidgetSelectionMenuItems(t,e.isEnabled),r.length>=1){if(t.Name.indexOf("ComboChart")>-1){if(r=r.filter(function(n){return n!=="filter"}),t.getChartProperties().IsEnableDrillDown&&t.DataGroupInfo.FieldContainers[2].FieldInfos.length-(BoldBIDashboard.isNullOrUndefined(t.drillLevelInfo)?0:t.drillLevelInfo.length)<=1)for(u=0;u<r.length;u++)r[u]===WidgetAction.DrillDown.toString()&&r.splice(u,1)}else if(t.getChartProperties().IsEnableDrillDown&&t.DataGroupInfo.FieldContainers[1].FieldInfos.length-(BoldBIDashboard.isNullOrUndefined(t.drillLevelInfo)?0:t.drillLevelInfo.length)<=1)for(u=0;u<r.length;u++)r[u]===WidgetAction.DrillDown.toString()&&r.splice(u,1);(t.getChartProperties().FilterSettings.ActAsMasterWidget||t.getChartProperties().IsEnableDrillDown)&&(n.cancel=!0,BoldBIDashboard.isNullOrUndefined(t.chartObj)?BoldBIDashboard.isNullOrUndefined(t.comboChartObj)||t.comboChartObj.option("commonSeriesOptions.selectionSettings.enable",!0):t.chartObj.option("commonSeriesOptions.selectionSettings.enable",!0));BoldBIDashboard.Dashboard.WidgetHelper.createWidgetActionContextMenu(i,t,t.Name,r,n,o)}}},n.onAxisLabelMouseMove=function(n,t){var e=this.isCombinationChart(t)?t.DataGroupInfo.FieldContainers[2]:t.DataGroupInfo.FieldContainers[1],f=t.getChartProperties(),u,o,i,r;if(this.isValidDataGroupInfoforDrillDown(t.DataGroupInfo,e)&&this.getBreadcrumbDatasource(t).length<e.FieldInfos.length){if(!BoldBIDashboard.isNullOrUndefined(n.data.id)&&n.data.id!==""&&(i=t.designerInstance.element.find("#"+n.data.id).parents(".e-datavisualization-chart"),!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0)){for(r=f.ChartSeriesTypeInfo.filter(function(n){return n.ChartType===ChartTypes.Bar||n.ChartType===ChartTypes.StackedBar||n.ChartType===ChartTypes.PercentStackedBar}).length!==0,u=0;u<n.data.axis.visibleLabels.length;u++)o=i.find("#"+i.attr("id")+"_svg_"+n.data.axis.name+(r?"_YLabel_":"_XLabel_")+u).attr("class")?i.find("#"+i.attr("id")+"_svg_"+n.data.axis.name+(r?"_YLabel_":"_XLabel_")+u).attr("class"):"",o.indexOf("e-AxisLabelCustom")!==-1&&i.find("#"+i.attr("id")+"_svg_"+n.data.axis.name+(r?"_YLabel_":"_XLabel_")+u).attr("class","");i.find("#"+i.attr("id")+(r?"_svg_PrimaryAxis_YLabel_":"_svg_PrimaryAxis_XLabel_")+n.data.index).attr("class","e-AxisLabelCustom")}}else f.FilterSettings.ActAsMasterWidget&&!this.isCombinationChart(t)&&(i=t.designerInstance.element.find("#"+n.data.id).parents(".e-datavisualization-chart"),r=f.ChartSeriesTypeInfo.filter(function(n){return n.ChartType===ChartTypes.Bar||n.ChartType===ChartTypes.StackedBar||n.ChartType===ChartTypes.PercentStackedBar}).length!==0,i.find("#"+i.attr("id")+(r?"_svg_PrimaryAxis_YLabel_":"_svg_PrimaryAxis_XLabel_")+n.data.index).attr("class","e-AxisLabelCustom"))},n.WidgetDataFetch=function(n,t,i){var u,r=t.getChartProperties(),f=t.masterFilterWindowInstance.getSelectedValuesForWidgetRequest(),e=i.model.mode!==BoldBIDashboard.Designer.mode.design;u={Id:t.Name,Name:t.Name,WidgetName:t.widgetJson.ContainerSettings.Title,ControlType:t.Type,DataGroupInfo:t.DataGroupInfo.FieldContainers,WidgetAction:n.action,ColorCustomization:this.getColorCustomizationObj(t),ForecastSettings:BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getWidgetForecastSettings(t),EnableSmoothScroll:r.EnableSmoothScroll,GridTemplate:null,ChartType:r.ChartType,VirtualScrollSettings:this.getVirtualScrollSettings(t,r.ChartType,n.action),ChartSeriesTypeInfo:r.ChartSeriesTypeInfo};i.modules.util.doAjaxPost("POST",t.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.WidgetAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,fieldInfo:n.fieldInfoList,dataset:t.DataGroupInfo.DataSourceID,widgetInfo:u,request:AjaxRequest.Widget.toString(),selectedValuesList:BoldBIDashboard.isNullOrUndefined(f)?"":JSON.stringify(f),isDataSampleForViewMode:e,isShowAllRecords:t.drillLevelInfo.length>0&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isVirtualScrollSupportedChartType(r.ChartType)})},{fnction:this.getDataSuccessMethodInfo(n,t,i),indicator:[BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.showLoadingIndicator,this,t),BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.hideLoadingIndicator,this,t)]})},n.getVirtualScrollSettings=function(n,t,i){var r;return n.drillLevelInfo.length===0&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isVirtualScrollSupportedChartType(t)?(i==="ColorCustomization"&&n.initializeVirtualScrollSettings(n.getChartProperties().PageSize,1),r=n.virtualScrollSettings):r=null,r},n.getColorCustomizationObj=function(n){return BoldBIDashboard.isNullOrUndefined(n.getChartProperties())?null:n.getChartProperties().EnableColorSettings?n.getChartProperties().ColorCustomization:null},n.getDataSuccessMethodInfo=function(n,t,i){switch(n.action){case"VirtualScroll":return BoldBIDashboardDesigner.bbdesignerstatic$.proxy(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.loadVirtualData,BoldBIDashboard.DashboardDesignerUtility.ChartHelper,t,n,i);case"DrillDown":return BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.loadDrillDownData,this,t,n,i);case"ColorCustomization":return BoldBIDashboardDesigner.bbdesignerstatic$.proxy(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateColorSettings,BoldBIDashboard.DashboardDesignerUtility.ChartHelper,t,i);case"ForecastSettings":return BoldBIDashboardDesigner.bbdesignerstatic$.proxy(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateForeCastProperty,BoldBIDashboard.DashboardDesignerUtility.ChartHelper,t,i);default:return BoldBIDashboardDesigner.bbdesignerstatic$.proxy(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.loadVirtualData,BoldBIDashboard.DashboardDesignerUtility.ChartHelper,t,n,i)}},n.updateColorSettings=function(n,t,i){t.modules.resource.updateColorCodeInfo(i);this.calculatePointsLength(n,i);n.addToCacheCollection(i);n.update(i)},n.updateForeCastProperty=function(n,t,i){t.modules.resource.updateColorCodeInfo(i);n.addToCacheCollection(i);n.update(i)},n.showLoadingIndicator=function(n){n.controlContainer.find(".bbi-background-waiting-popup").show()},n.hideLoadingIndicator=function(n){n.controlContainer.find(".bbi-background-waiting-popup").hide()},n.setPercentageValueForSeriesPoints=function(n,t){for(var f,u,r,i=0;i<n.length;i++)if(this.isPercentageMeasureFormat(n[i].id,t))for(f=this.getDecimalPoints(n[i].id,t),u=n[i].points,r=0;r<u.length;r++)n[i].points[r].text=this.isPercentChartType(n[i].type)?this.getPercetageValueForPoints(u[r],u[r].totalValue,f):u[r].formattedtext;return n},n.updateDataLabelTextPosition=function(n,t){return this.isCartesianChartType(n)?this.getValueLabelPosition(n,t.ValueLabelPosition):"top"},n.getChartTypeOfSeries=function(n,t){var i,r;if(!BoldBIDashboard.isNullOrUndefined(n))for(i=0;i<t.length;i++){if(n.toLowerCase()===t[i].UniqueColumnName.toLowerCase())return t[i];if(n.toLowerCase().replace("_primary","")===t[i].UniqueColumnName.toLowerCase()||n.toLowerCase().replace("_secondary","")===t[i].UniqueColumnName.toLowerCase())return r=JSON.parse(JSON.stringify(t[i])),r.UniqueColumnName=n.toLowerCase(),r}return null},n.ignoreEmptyPoints=function(n,t,i,r){var u,e,f;return r||(u=n.widgetData.Data.filter(function(n){return n!==t}).map(function(n){return JSON.parse(n)}).filter(function(n){return n.points.some(function(n){return!n.isEmpty})}),e=u.filter(function(n){return!n.isAnyValueEmpty}),e.length===0&&(f={},u.forEach(function(n){n.points.forEach(function(n){n.isEmpty||(f[n.x]=!0)})}),i.points=i.points.filter(function(n){return!n.isEmpty||f[n.x]}))),i},n.updateShowNoDataItem=function(n){n.dataValues.widgetData.Data.length!==0&&(this.removeAllDrillElementsForChart(n),n.update(n.dataValues))},n.isPercentageMeasureFormat=function(n,t){return!BoldBIDashboard.isNullOrUndefined(t)&&t.FieldContainers.length>0&&((t.FieldContainers[0].FieldInfos.length>0&&t.FieldContainers[0].FieldInfos.filter(function(t){return t.UniqueColumnName===n}).length>0&&t.FieldContainers[0].FieldInfos.filter(function(t){return t.UniqueColumnName===n})[0].MeasureFormatting.FormatType==="Percentage"?!0:!1)||(t.FieldContainers[1].FieldInfos.length>0&&t.FieldContainers[1].Name==="secondaryYValue"&&t.FieldContainers[1].FieldInfos.filter(function(t){return t.UniqueColumnName===n}).length>0&&t.FieldContainers[1].FieldInfos.filter(function(t){return t.UniqueColumnName===n})[0].MeasureFormatting.FormatType==="Percentage"?!0:!1))},n.prototype.renderingForecastSettingsProperties=function(n,t,i,r){var e=r.getChartProperties(),y=e.ForecastProperties.ForecastSettings.IsEnable,u=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(r)?"ComboChart":"Chart",f=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.dashboardDesigner.designerPanel.selectedReportItems[0])),s,v,o;if(BoldBIDashboard.isNullOrUndefined(n))BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isForecastApplicable(r)&&(s=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(r)?r.designerInstance.element.find("#"+f.designerId+"_"+u+"_"+i.categoryName+"_"+i.name+"_container"):f.designerInstance.element.find("#"+f.designerId+"_"+u+"_"+i.categoryName+"_"+i.name+"_container"),BoldBIDashboard.isNullOrUndefined(s)||(v=s.find("#"+f.designerId+"_"+u+"_"+i.categoryName+"_"+i.name).data("ejNumericTextbox"),o=r.getChartProperties(),v.option("value",i.name==="Length"?o.ForecastProperties.ForecastSettings.Length===1?null:o.ForecastProperties.ForecastSettings.Length:o.ForecastProperties.ForecastSettings.Seasonality===0?null:o.ForecastProperties.ForecastSettings.Seasonality))),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.forecastSettingsVisiblity(f,f.getChartProperties().ForecastProperties.ForecastSettings.IsEnable);else{var h=BoldBIDashboard.buildTag("div.e-dbrd-forecast-row-element","",{display:y?"inline-block":"none"},{id:r.designerId+"_"+u+"_"+i.categoryName+"_"+i.name+"_container"}),c=BoldBIDashboard.buildTag("div.e-dbrd-forecast-label-container","",{width:(r.propertyPanel.propertyPanelContainer.width()-33)*47/100+"px"}),p=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily e-dbrd-forecast-label-element",i.name==="Length"?"Length":"Seasonality",{"max-width":(r.propertyPanel.propertyPanelContainer.width()-33)*47/100-15+"px"},{id:r.designerId+"_"+u+"_"+i.categoryName+"_"+i.name+"_childElement"});c.append(p);var l=BoldBIDashboard.buildTag("div.e-dbrd-forecast-input-box-container","",{width:r.propertyPanel.propertyPanelContainer.width()*47/100+"px",display:"inline-block"},{id:r.designerId+"_"+u+"_"+i.categoryName+"_"+i.name+"_parent"}),a=BoldBIDashboard.buildTag("input.e-textbox","",{height:"28px",width:(r.propertyPanel.propertyPanelContainer.width()-120)*47/100+"px","margin-left":"2px",float:"left"},{id:r.designerId+"_"+u+"_"+i.categoryName+"_"+i.name}),w=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily e-dbrd-forecast-point-element","Point(s)",{},{});l.append(a,w);h.append(c,l);n.append(h);a.ejNumericTextbox({minValue:i.name==="Length"?1:0,maxValue:i.name==="Length"?1e6:8784,value:i.name==="Length"?e.ForecastProperties.ForecastSettings.Length===1?null:e.ForecastProperties.ForecastSettings.Length:e.ForecastProperties.ForecastSettings.Seasonality===0?null:e.ForecastProperties.ForecastSettings.Seasonality,width:(r.propertyPanel.propertyPanelContainer.width()-110)*47/100+"px",cssClass:"bbi-dbrd-control",watermarkText:"Auto",change:this.bbdesigner$.proxy(this.onchangeForecastProperties,this,i.name)})}},n.prototype.renderingForecastSeriesElement=function(n,t,i,r){var u=r.getChartProperties(),k=u.ForecastProperties.ForecastSettings.IsEnable,d=i.name==="ShowForecast"?u.ForecastProperties.ForecastColor:u.ForecastProperties.ConfidenceColor,f=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(r)?"ComboChart":"Chart",h=i.name==="ShowForecast"?u.ForecastProperties.ShowForecast:u.ForecastProperties.ShowConfidence,o=i.name==="ShowForecast"?"ForecastColor":"ConfidenceColor",e=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.dashboardDesigner.designerPanel.selectedReportItems[0])),s,w,b;if(BoldBIDashboard.isNullOrUndefined(n))BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isForecastApplicable(r)&&(s=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(r)?r.designerInstance.element.find("#"+e.designerId+"_"+f+"_"+i.categoryName+"_"+i.name+"_container"):e.designerInstance.element.find("#"+e.designerId+"_"+f+"_"+i.categoryName+"_"+i.name+"_container"),BoldBIDashboard.isNullOrUndefined(s)||(w=s.find("#"+e.designerId+"_"+f+"_"+i.categoryName+"_"+i.name).data("BoldBIDashboardCheckBox"),w.option("checked",i.name==="ShowForecast"?u.ForecastProperties.ShowForecast:u.ForecastProperties.ShowConfidence),b=s.find("#"+e.designerId+"_"+f+"_"+i.categoryName+"_"+i.name+"_"+o+"_container").data("BoldBIDashboardColorPicker"),b.option("value",i.name==="ShowForecast"?u.ForecastProperties.ForecastColor:u.ForecastProperties.ConfidenceColor)));else{var c=BoldBIDashboard.buildTag("div.e-dbrd-forecast-row-element","",{display:k?"inline-block":"none"},{id:r.designerId+"_"+f+"_"+i.categoryName+"_"+i.name+"_container"}),l=BoldBIDashboard.buildTag("div.e-dbrd-forecast-label-container","",{width:(r.propertyPanel.propertyPanelContainer.width()-33)*47/100+"px"}),g=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily e-dbrd-forecast-label-element",i.name==="ShowForecast"?"Forecast":"Confidence",{"max-width":(r.propertyPanel.propertyPanelContainer.width()-33)*47/100-15+"px"},{id:r.designerId+"_"+f+"_"+i.categoryName+"_"+i.name+"_childElement"});l.append(g);var a=BoldBIDashboard.buildTag("div.e-dbrd-forecast-input-box-container","",{width:r.propertyPanel.propertyPanelContainer.width()*47/100+"px",display:"inline-block"},{id:r.designerId+"_"+f+"_"+i.categoryName+"_"+i.name+"_parent"}),v=BoldBIDashboard.buildTag("input","",{},{id:r.designerId+"_"+f+"_"+i.categoryName+"_"+i.name,type:"checkbox"}),y=BoldBIDashboard.buildTag("div","",{display:h?"inline-block":"none","margin-left":"20px"},{id:r.designerId+"_"+t+"_"+o+"_container"}),p=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:r.designerId+"_"+f+"_"+i.categoryName+"_"+i.name+"_"+o+"_container"});y.append(p);a.append(v,y);c.append(l,a);n.append(c);v.BoldBIDashboardCheckBox({checked:h,change:this.bbdesigner$.proxy(this.onchangeForecastProperties,this,i.name),width:(r.propertyPanel.propertyPanelContainer.width()-33)*57/100-15+"px",cssClass:"e-designer-prop-checkbox e-forecast-series-checkbox"});p.BoldBIDashboardColorPicker({value:d,width:"100px",cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label",select:this.bbdesigner$.proxy(this.onchangeForecastProperties,this,o),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown})}},n.prototype.onchangeForecastProperties=function(n,t){this.updateForecastProperties(n,t)},n.prototype.updateForecastProperties=function(n,t){var r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.dashboardDesigner.designerPanel.selectedReportItems[0])),i=r.getChartProperties().ForecastProperties,e=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(r)?"ComboChart":"Chart",o,u,f;switch(n){case"IsEnableForecast":i.ForecastSettings.IsEnable=t;BoldBIDashboard.DashboardDesignerUtility.ChartHelper.forecastSettingsVisiblity(r,t);this.submitForecastSettings();break;case"ConfidenceInterval":i.ForecastSettings.ConfidenceInterval=t.replace(new RegExp(String.fromCharCode(37),"g"),"");break;case"Length":i.ForecastSettings.Length=t.value===null?1:t.value;break;case"Seasonality":i.ForecastSettings.Seasonality=t.value===null?0:t.value;break;case"ShowForecast":r.propertyPanel.updateItemVisibility(e,"ForecastSettings","ForecastColor",t.isChecked);i.ShowForecast=t.isChecked;break;case"ShowConfidence":r.propertyPanel.updateItemVisibility(e,"ForecastSettings","ConfidenceColor",t.isChecked);r.propertyPanel.updateItemVisibility(e,"ForecastSettings","ConfidenceBandStyle",t.isChecked);i.ShowConfidence=t.isChecked;break;case"ConfidenceBandStyle":i.ConfidenceBandStyle=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ConfidenceBandStyle,t);break;case"LegendText":t.trim()!==""&&(i.LegendText=t);break;case"ForecastColor":i.ForecastColor=r.propertyPanel.getHexColorFromRGBA(t.RGBA);break;case"ConfidenceColor":i.ConfidenceColor=r.propertyPanel.getHexColorFromRGBA(t.RGBA)}if(r.getChartProperties().ForecastProperties=i,i.ForecastSettings.IsEnable)switch(n){case"ShowForecast":case"ShowConfidence":case"ConfidenceBandStyle":case"ForecastColor":case"LegendText":case"ConfidenceColor":for(o=r.contentContainer.find(".e-datavisualization-chart"),u=0;u<o.length;u++)f=this.bbdesigner$(o[u]).data("BoldBIDashboardChart"),f.model.series=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateForecastSeries(i,f.model.series),f.redraw()}this.dashboardDesigner.modules.serialization.notifyChange()},n.prototype.updateForecastSettingsProperties=function(n,t){if(t){var i=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.dashboardDesigner.designerPanel.selectedReportItems[0])),r=i.getChartProperties().ForecastProperties,u=n.designerInstance.element.find("#"+n.designerId+"_"+i.type+"_ForecastSettings_Length"),f=n.designerInstance.element.find("#"+n.designerId+"_"+i.type+"_ForecastSettings_Seasonality"),e=n.designerInstance.element.find("#"+n.designerId+"_"+i.type+"_ForecastSettings_ShowForecast"),o=n.designerInstance.element.find("#"+n.designerId+"_"+i.type+"_ForecastSettings_ShowConfidence"),s=n.designerInstance.element.find("#"+n.designerId+"_"+i.type+"_ForecastSettings_ShowForecast_ForecastColor_container"),h=n.designerInstance.element.find("#"+n.designerId+"_"+i.type+"_ForecastSettings_ShowConfidence_ConfidenceColor_container");u.ejNumericTextbox({value:r.ForecastSettings.Length});f.ejNumericTextbox({value:r.ForecastSettings.Seasonality});e.BoldBIDashboardCheckBox({checked:r.ShowForecast});o.BoldBIDashboardCheckBox({checked:r.ShowConfidence});s.BoldBIDashboardColorPicker({value:r.ForecastColor});h.BoldBIDashboardColorPicker({value:r.ConfidenceColor})}},n.prototype.updateForecastrenameproperties=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.dashboardDesigner.designerPanel.selectedReportItems[0])),i=t.getChartProperties().ForecastProperties;n.designerInstance.element.find("#"+n.designerId+"_"+t.type+"_ForecastSettings_LegendText").val(i.LegendText)},n.forecastSettingsVisiblity=function(n,t){var i=this.isCombinationChart(n)?"ComboChart":"Chart";n.propertyPanel.updateItemVisibility(i,"ForecastSettings","Length",t);n.propertyPanel.updateItemVisibility(i,"ForecastSettings","ConfidenceInterval",t);n.propertyPanel.updateItemVisibility(i,"ForecastSettings","Seasonality",t);n.propertyPanel.updateItemVisibility(i,"ForecastSettings","SubmitForecast",t);n.propertyPanel.updateItemVisibility(i,"ForecastSettings","ShowForecast",t);n.propertyPanel.updateItemVisibility(i,"ForecastSettings","ShowConfidence",t);n.propertyPanel.updateItemVisibility(i,"ForecastSettings","LegendText",t);n.propertyPanel.updateItemVisibility(i,"ForecastSettings","ConfidenceBandStyle",t&&n.getChartProperties().ForecastProperties.ShowConfidence)},n.prototype.submitForecastSettings=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.dashboardDesigner.designerPanel.selectedReportItems[0])),t,i;n.removeAllDrillElements();t=n.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(n.DataGroupInfo,n);i={action:"ForecastSettings",fieldInfoList:t};BoldBIDashboard.DashboardDesignerUtility.ChartHelper.WidgetDataFetch(i,n,this.dashboardDesigner);this.dashboardDesigner.modules.serialization.notifyChange()},n.getWidgetForecastSettings=function(n){var i=n.getChartProperties(),t;return i.ForecastProperties.ForecastSettings.IsEnable?(t=JSON.parse(JSON.stringify(i.ForecastProperties.ForecastSettings)),t.IsEnable=this.isForecastApplicable(n),t.IsEnable||(n.getChartProperties().ForecastProperties.ForecastSettings=t),t):i.ForecastProperties.ForecastSettings},n.enableOrDisableForecastOption=function(n){var r=this.isForecastApplicable(n),t=n.getChartProperties(),i;n.isActAsSlaveForAnyPoP&&(r=!1,t.ForecastProperties.ForecastSettings.IsEnable=!1);i=this.isCombinationChart(n);n.propertyPanel.updateCategoryVisibility(i?"ComboChart":"Chart","ForecastSettings",r);this.forecastSettingsVisiblity(n,t.ForecastProperties.ForecastSettings.IsEnable);i?n.setPropertyElement("ForecastSettings","IsEnableForecast",t.ForecastProperties.ForecastSettings.IsEnable):n.chartProperties.setPropertyElement("ForecastSettings","IsEnableForecast",t.ForecastProperties.ForecastSettings.IsEnable)},n.isForecastApplicable=function(n){var i=n.getChartProperties(),r=n.DataGroupInfo,t;return this.isShapeChartType(i.ChartType)?!1:!BoldBIDashboard.isNullOrUndefined(i.ChartSeriesTypeInfo)&&i.ChartSeriesTypeInfo.length!==0&&(i.ChartSeriesTypeInfo[0].ChartType===ChartTypes.Line.toString()||i.ChartSeriesTypeInfo[0].ChartType===ChartTypes.Spline.toString())?this.isCombinationChart(n)?(t=this.getBindedColumns(n),(t.primaryYValue.length===1&&t.secondaryYValue.length===0||t.primaryYValue.length===0&&t.secondaryYValue.length===1)&&t.columnValue.length===1&&BoldBIDashboard.DashboardUtil.isForecastSupportedDatatype(r.FieldContainers[2].FieldInfos[0])):(t=this.dataGroupBindedColumnInfo(r),t.valueLength===1&&t.columnLength===1&&t.rowLength===0&&BoldBIDashboard.DashboardUtil.isForecastSupportedDatatype(r.FieldContainers[1].FieldInfos[0])):!1},n.prototype.updateSinglePointForeCast=function(n,t){var u=t.getChartProperties(),i=u.ForecastProperties.ForecastSettings.IsEnable,f=t.designerId+"_tableElement_"+t.type+"_ForecastSettings",r=t.propertyPanel.propertyContainer.find("#"+f);this.isSinglePointData(n,i)?r.children().slice(1).addClass("e-disable-forecast-property"):i&&r.children().slice(1).removeClass("e-disable-forecast-property")},n.prototype.isSinglePointData=function(n,t){var u,i,r;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.widgetData)&&!BoldBIDashboard.isNullOrUndefined(n.widgetData.Data)&&t)for(u=1,i=0;i<u;i++)if(r=JSON.parse(n.widgetData.Data[i]),r.points.length>0&&JSON.stringify(r.points)!=="[{}]")return r.points.length===1},n.updateChartTypeAndAxisToForecastSeries=function(n,t,i){for(var u,r,f,o,s,h=n.getChartProperties().ForecastProperties,c=JSON.parse(t.widgetData.Data[0]),l=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(this),a=n.designerInstance.modules.themeHelper,v=n.designerInstance.canApplyTheme()||n.designerInstance.canApplyDashboardTheme()&&n.designerInstance.isViewMode(),e=1;e<t.widgetData.Data.length;e++)u=JSON.parse(t.widgetData.Data[e]),r=this.setChartTypeAndAxis(c,n.getChartProperties(),n.getFontSizeBasedOnResolution(),a,l,v),r.points=u.points,r.name=u.name,r.legendName=u.name,r.valueFieldColName=u.valueFieldColName,i.push(JSON.parse(JSON.stringify(r))),e===t.widgetData.Data.length-1&&i.push(JSON.parse(JSON.stringify(r)));i=this.updateForecastSeries(h,i);f=n.getChartProperties().LineStyleInfo;BoldBIDashboard.isNullOrUndefined(f)||(o=i.findIndex(function(n){return n.name==="Forecast"}),s=f.findIndex(function(n){return n.Series!=="Default"}),s!==-1&&o!==-1&&(i[o].dashArray=BoldBIDashboard.Dashboard.WidgetHelper.getLineStyle(f[s].LineStyle),i[o].width=f[s].LineWidth))},n.updateForecastSeries=function(n,t){for(var u,r,f,i=1;i<t.length;i++)if(i<t.length-1)if(t[i].marker.visible=!1,t[i].fill=n.ConfidenceColor,i<t.length-2)t[i].visibility=n.ShowConfidence?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ConfidenceBandStyle,ConfidenceBandStyle.Fill)===n.ConfidenceBandStyle?"hidden":"visible":"hidden",t[i].visibleOnLegend=n.ShowConfidence?i===t.length-3?"hidden":BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ConfidenceBandStyle,ConfidenceBandStyle.Fill)===n.ConfidenceBandStyle?"hidden":"visible":"hidden",t[i].dashArray=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ConfidenceBandStyle,ConfidenceBandStyle.Dot)===n.ConfidenceBandStyle?"2,2":"",t[i].name=i===t.length-3?t[i].name:n.LegendText;else{for(t[i].visibility=n.ShowConfidence?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ConfidenceBandStyle,ConfidenceBandStyle.Fill)===n.ConfidenceBandStyle?"visible":"hidden":"hidden",t[i].visibleOnLegend=n.ShowConfidence?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ConfidenceBandStyle,ConfidenceBandStyle.Fill)===n.ConfidenceBandStyle?"visible":"hidden":"hidden",u=[],r=0;r<t[i].points.length;r++)f={XValue:t[i].points[r].x,high:t[2].points[r].y,low:t[1].points[r].y},u.push(f);t[i].dataSource=u;t[i].xName="XValue";t[i].high="high";t[i].low="low";t[i].type=t[i].type==="line"||t[i].type==="rangearea"?"rangearea":"splinerangearea";t[i].name=n.LegendText}else t[i].visibility=n.ShowForecast?"visible":"hidden",t[i].visibleOnLegend=n.ShowForecast?"visible":"hidden",t[i].marker.border={width:2},t[i].marker.size={height:5,width:5},t[i].fill=n.ForecastColor,t[i].highlightSettings={enable:!1},t[i].selectionSettings={enable:!1};return t},n.getTooltipForProportionalChart=function(n,t){var y,p,w,b,k,d,g,nt,tt,it,u=[],s=t.DataGroupInfo,h=this.dataGroupBindedColumnInfo(s),o=t.getChartProperties(),r=h.columnLength,c=h.valueLength,ot=h.rowIndex,st=h.columnIndex,f=h.rowLength,i=n.model._visibleSeries[n.data.seriesIndex].visiblePoints[n.data.pointIndex],e=i.formattedtext,v,vt,yt,et,l,a,pt,wt;if(o.DataLabel===DataLabel.Category.toString()||o.DataLabel===DataLabel.Percentage.toString()||o.DataLabel===DataLabel.CategoryAndPercentage.toString()||o.DataLabel===DataLabel.ValueAndPercentage.toString()||o.DataLabel===DataLabel.AllDetails.toString()){var rt=n.model.series,ht=rt[n.data.seriesIndex].points,ct=rt[n.data.seriesIndex].total,lt=t.getDecimalPoints(rt[n.data.seriesIndex].id);switch(o.DataLabel){case DataLabel.Category.toString():case DataLabel.Percentage.toString():case DataLabel.CategoryAndPercentage.toString():e=this.getPercetageValueForPoints(ht[n.data.pointIndex],ct,lt);break;case DataLabel.ValueAndPercentage.toString():case DataLabel.AllDetails.toString():e=e+" ("+this.getPercetageValueForPoints(ht[n.data.pointIndex],ct,lt)+")"}}var at=r===1?s.FieldContainers[st].FieldInfos[0].DisplayName:r>0?s.FieldContainers[st].FieldInfos[t.drillLevelInfo.length].DisplayName:null,ut=f>0?n.model._visibleSeries[n.data.seriesIndex].rowValue:null,ft=r>0||f>0?n.model._visibleSeries[n.data.seriesIndex].valueFieldColName:null;if(c>1&&r>0&&!BoldBIDashboard.isNullOrUndefined(n.model.series)&&!BoldBIDashboard.isNullOrUndefined(n.data.seriesIndex)&&this.updateClusterName(n),i.id=i.id.replace("_secondary",""),c>0&&r===0&&f===0?(v=t.DataColumnBindings[i.id],u=[(y={},y[v]=e,y)]):c>0&&r>0&&f===0?(ft=t.DataColumnBindings[i.id],u=[(p={},p[at]=i.legendName,p),(w={},w[ft]=e,w)]):c>0&&r===0&&f>0?(ut=n.model._visibleSeries[n.data.seriesIndex].name,v=t.DataColumnBindings[i.id],vt=s.FieldContainers[ot].FieldInfos[0].DisplayName,u=[(b={},b[vt]=ut,b),(k={},k[v]=e,k)]):c>0&&r>0&&f>0?(yt=s.FieldContainers[ot].FieldInfos[f-1].DisplayName,u=[(d={},d[at]=i.legendName,d),(g={},g[yt]=ut,g),(nt={},nt[ft]=e,nt)]):(et=n.data.currentText.split(":"),u.push((tt={},tt[et[0]]=et[1],tt))),l=BoldBIDashboard.DashboardUtil.getToolTipFieldInfos(t),!BoldBIDashboard.isNullOrUndefined(l))for(a=0;a<l.length;a++)pt=l[a].DisplayName,wt=i.CustomToolTipFields[l[a].UniqueColumnName],u.push((it={},it[pt]=wt,it));return u},n.getTooltipforCartesianChart=function(n,t){var v,y,p,w,b,k,d,r=[],e=t.DataGroupInfo,o=this.dataGroupBindedColumnInfo(e),u=o.columnLength,s=o.valueLength,it=o.rowIndex,rt=o.columnIndex,f=o.rowLength,ut=!0,i=n.model._visibleSeries[n.data.seriesIndex]._visiblePoints[n.data.pointIndex],ft=u===1?e.FieldContainers[rt].FieldInfos[0].DisplayName:u>0?e.FieldContainers[rt].FieldInfos[t.drillLevelInfo.length].DisplayName:null,a=f>0?n.model._visibleSeries[n.data.seriesIndex].rowValue:null,et=null,ot=t.isActAsSlaveForAnyPoP&&i.xSecondary!==""?i.xSecondary:i.x,g,st,nt,ht,ct,lt,tt,h,c,l,at;if(s>1&&u>0&&!BoldBIDashboard.isNullOrUndefined(n.model.series)&&!BoldBIDashboard.isNullOrUndefined(n.data.seriesIndex)&&this.updateClusterName(n),s>0&&u===0&&f===0?(g="",g=t.getChartProperties().ShowValueInTooltip&&t.getVisibilityForShowValueAndPercent()?this.getValueAndPercentageTooltip(i.y,t)+" ("+i.text+")":BoldBIDashboard.isNullOrUndefined(i.text)?i.y:i.text,et=n.model._visibleSeries[n.data.seriesIndex].name,r=[(v={},v[et]=g,v)]):s>0&&u>0&&f===0?(r=[(y={},y[ft]=ot,y)],st=t.getChartProperties(),st.ForecastProperties.ForecastSettings.IsEnable?(nt=this.updateTooltipValueBasedOnForecast(n,i,r),r=nt.widgetTooltipCollection,ut=nt.showTooltipSectionData):this.updateTooltipValueBasedOnChartType(n,i,r,t)):s>0&&u===0&&f>0?(ht=e.FieldContainers[it].FieldInfos[0].DisplayName,r=[(p={},p[ht]=a,p)],this.updateTooltipValueBasedOnChartType(n,i,r,t)):s>0&&u>0&&f>0?(ct=e.FieldContainers[it].FieldInfos[f-1].DisplayName,lt=ot,r=[(w={},w[ft]=lt,w),(b={},b[ct]=a,b)],this.updateTooltipValueBasedOnChartType(n,i,r,t)):(tt=n.data.currentText.split(":"),r.push((k={},k[tt[0]]=tt[1],k))),h=BoldBIDashboard.DashboardUtil.getToolTipFieldInfos(t),!BoldBIDashboard.isNullOrUndefined(h))for(c=0;c<h.length;c++)l=h[c].DisplayName,l=BoldBIDashboard.isNullOrUndefined(a)?l:a+" ("+l+")",at=BoldBIDashboard.isNullOrUndefined(i.CustomToolTipFields)?"0":i.CustomToolTipFields[h[c].UniqueColumnName],ut&&r.push((d={},d[l]=at,d));return r},n.updateTooltipValueBasedOnChartType=function(n,t,i,r){var c,e=this,u="",s,l,a,h,p,v,w;if(u=r.getChartProperties().ShowValueInTooltip&&r.getVisibilityForShowValueAndPercent()?this.getValueAndPercentageTooltip(t.y,r)+" ("+t.text+")":BoldBIDashboard.isNullOrUndefined(t.text)?t.y:t.text,!BoldBIDashboard.isNullOrUndefined(r.getChartProperties().EmptyPointMode)&&(r.getChartProperties().EmptyPointMode.toLocaleLowerCase()==="average"||r.getChartProperties().EmptyPointMode.toLocaleLowerCase()==="zero")){var y=r.dataGroupInfo.FieldContainers[0].FieldInfos.filter(function(t){return t.UniqueColumnName===n.model.series[n.data.seriesIndex].id}),f=y.length>0?y[0].MeasureFormatting:new MeasureFormatting,b=BoldBIDashboard.DashboardUtil.formattedText(t.y,f.Culture,f.DecimalPoints,f.FormatType,f.DecimalSeparator,f.GroupSeparator,f.Prefix,f.Suffix,f.Unit,!0,r.designerInstance,f.EnableLakhsAndCroreRep);u=u==="0"||u===""?b:u}if(this.isDistributionType(n.model.series[n.data.seriesIndex].type)){var k=n.model._visibleSeries[n.data.seriesIndex].yAxisName,o=n.model.series.filter(function(n){return n.yAxisName===k}).filter(function(n){return n.type===e.getChartType(ChartTypes.Area.toString())||n.type===e.getChartType(ChartTypes.Line.toString())||n.type===e.getChartType(ChartTypes.Spline.toString())||n.type===e.getChartType(ChartTypes.StackedArea.toString())||n.type===e.getChartType(ChartTypes.SplineArea.toString())||n.type===e.getChartType(ChartTypes.PercentStackedArea.toString())||n.type===e.getChartType(ChartTypes.PercentStackedArea.toString())}),d=function(f){for(var l,s,v,a,y,h,c,e=0;e<o[f].points.length;e++)return t.x.toString()===o[f].points[e].x.toString()&&(o[f].points[e].text===u||o[f].points[e].y===u)?(l=r.getChartProperties().CustomLegendInfo.GroupValues.Values,s=r.isActAsSlaveForAnyPoP?n.model._visibleSeries[n.data.seriesIndex].name:r.DataColumnBindings[o[f].id],BoldBIDashboard.isNullOrUndefined(s)&&l.length>0&&(v=l.filter(function(n){return n.Id===o[f].id}),s=v[0].Value),{value:i.push((h={},h[s]=u,h))}):(a=BoldBIDashboard.DashboardUtil.getFieldBasedonUniqueColumnName(n.model._visibleSeries[n.data.seriesIndex].id,r.DataGroupInfo),y=r.isActAsSlaveForAnyPoP||BoldBIDashboard.isNullOrUndefined(a)?n.model._visibleSeries[n.data.seriesIndex].name:a.DisplayName,{value:i.push((c={},c[y]=u,c))})};for(s=0;s<o.length;s++)if(l=d(s),typeof l=="object")return l.value}else return a=r.getChartProperties().CustomLegendInfo.GroupValues.Values,h="",a.length>0&&(p=a.filter(function(t){return t.Id===n.model._visibleSeries[n.data.seriesIndex].id}),h=p[0].Value),v=BoldBIDashboard.DashboardUtil.getFieldBasedonUniqueColumnName(n.model._visibleSeries[n.data.seriesIndex].id,r.DataGroupInfo),w=r.isActAsSlaveForAnyPoP?n.model._visibleSeries[n.data.seriesIndex].name:BoldBIDashboard.isNullOrUndefined(v)?h.length>0?h:n.model._visibleSeries[n.data.seriesIndex].name:v.DisplayName,i.push((c={},c[w]=u,c));return i},n.getValueAndPercentageTooltip=function(n,t){var i=new MeasureFormatting,r=t.designerInstance.checkAndUpdateParameterValue(t.getLabelParamValues(i.Prefix),t.DataGroupInfo.DataSourceName),u=t.designerInstance.checkAndUpdateParameterValue(t.getLabelParamValues(i.Suffix),t.DataGroupInfo.DataSourceName);return BoldBIDashboard.DashboardUtil.formattedText(n,i.Culture,i.DecimalPoints,i.FormatType,i.DecimalSeparator,i.GroupSeparator,r,u,i.Unit,!0,t.designerInstance,i.EnableLakhsAndCroreRep)},n.updateTooltipValueBasedOnForecast=function(n,t,i){for(var f,e,u=n.model.series.filter(function(n){return n.type!=="rangearea"&&n.type!=="splinerangearea"}),o=!0,r=0;r<u.length;r++)for(f=0;f<u[r].points.length;f++)if(t.x===u[r].points[f].x){i.push((e={},e[u[r].legendName]=BoldBIDashboard.isNullOrUndefined(u[r].points[f].text)?u[r].points[f].y:u[r].points[f].text,e));u[r].name==="Forecast"&&(o=!1);break}return{widgetTooltipCollection:i,showTooltipSectionData:o}},n.updateClusterName=function(n){for(var r=n.model.series.length,i=n.model.series[n.data.seriesIndex].rowValue,t=0;t<r;t++)i===n.model.series[t].rowValue&&(n.model.series[t].clusterName=i)},n.getColorFieldInfo=function(n,t,i,r){var h,l,s,e;if(r===void 0&&(r=null),t&&!BoldBIDashboard.isNullOrUndefined(n)&&n.Type===ColorCustomizationType.Individual&&n.SolidColorInfo.length!==0){var u=void 0,o=i.getBreadcrumbDatasource(),c=o.length>0,f=this.getDataGroupID(i);if(f.length<n.SolidColorInfo.length){for(h=[],l=function(t){h.push(n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===f[t].UniqueColumnName})[0])},s=0;s<f.length;s++)l(s);n.SolidColorInfo=h}return c?n.SolidColorInfo.length>0&&(n.SolidColorInfo[0].ColorMappingType==="Data"?(e=n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===o[o.length-1].columnId}),u=e.length>0?e[0].DefaultColorSets:u):n.SolidColorInfo[0].ColorMappingType==="Index"&&(e=n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===o[o.length-1].columnId}),u=e.length>0?e[0].IndexColorPalette:u)):n.SolidColorInfo[0].ColorMappingType==="Data"?u=n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===f[0].UniqueColumnName}).length>0?n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===f[0].UniqueColumnName})[0].DefaultColorSets:u:n.SolidColorInfo[0].ColorMappingType==="Index"&&(u=n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===f[0].UniqueColumnName}).length>0?n.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===f[0].UniqueColumnName})[0].IndexColorPalette:u),i.chartProperties.isExistingChart&&!BoldBIDashboard.isNullOrUndefined(r)&&c&&i.chartProperties.updateColorPaletteName(u,r),u}},n.getDataGroupID=function(n){for(var i=this.isCombinationChart(n)?n.DataGroupInfo.FieldContainers[2].length!==0?n.DataGroupInfo.FieldContainers[2].FieldInfos:[]:n.DataGroupInfo.FieldContainers[1].length!==0?n.DataGroupInfo.FieldContainers[1].FieldInfos:[],r=[],t=0;t<i.length;t++)r.push({DataId:i[t].Id,UniqueColumnName:i[t].UniqueColumnName,Field:i[t].Name});return r},n.getColorForIndividualSection=function(n,t){for(var r=new DefaultColorSet,i=0;i<t.length;i++)if(t[i].Name.toString()===n.toString()&&t[i].IsEdited)return t[i];return r},n.generateChartTypeAndAxisSeries=function(n,t){for(var i,r=t.getChartProperties(),e=t.DataGroupInfo,u=[],o=r.ForecastProperties.ForecastSettings.IsEnable,s=o?1:n.widgetData.Data.length,h=t.designerInstance.modules.themeHelper,c=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(this),l=t.designerInstance.canApplyTheme()||t.designerInstance.canApplyDashboardTheme()&&t.designerInstance.isViewMode(),f=0;f<s;f++)i=JSON.parse(n.widgetData.Data[f]),i.points.length>0&&JSON.stringify(i.points)!=="[{}]"&&(this.isShapeChartType(r.ChartType)?i.type=this.getChartType(r.ChartType):(i=this.setChartTypeAndAxis(i,t.getChartProperties(),t.getFontSizeBasedOnResolution(),h,c,l),i.isAnyValueEmpty&&(i=this.ignoreEmptyPoints(n,f,i,t.getChartProperties().ShowNoDataItem))),i.columnSpacing=r.ColumnSpacing,i.columnWidth=r.ColumnWidth,u.push(i));return u.length>0&&(u=this.isShapeChartType(r.ChartType)?u:t.getSortedSeriesList(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getTotalPointsValueAsPercentType(u,r.ChartSeriesTypeInfo,e)),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateChartPropertiesToChartSeries(u,t,n)),u},n.checkBarWithLineChart=function(n,t,i){for(var u,r,f=0,e=0;e<n.length;e++)i.isBarChartType(n[e].ChartType)&&(f=++f);if(f>0)for(u=0;u<n.length;u++)for(r=0;r<t.length;r++)t[r].id===n[u].UniqueColumnName&&(t[r].isTransposed=n[u].ChartType===ChartTypes.Line||n[u].ChartType===ChartTypes.Spline?!0:!1);else for(r=0;r<t.length;r++)t[r].isTransposed=!1},n.updateChartPropertiesToChartSeries=function(n,t,i){var u=t.getChartProperties(),h=this.isShapeChartType(u.ChartType),k=this.isCombinationChart(t),y=t.DataGroupInfo,e=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(t.dataGroupInfo),d=!h&&this.isTrendlineRequired(u.ChartSeriesTypeInfo)&&e.rowLength===0&&!u.IsEnableDrillDown&&e.valueLength>0&&e.columnLength>0,g=u.ForecastProperties.ForecastSettings.IsEnable,nt=g?1:n.length,it,b,r,f,a,ft,v,l,et,w;h&&(!u.IsDefaultColorPalette&&!u.EnableColorSettings&&e.valueLength>0&&e.columnLength>0&&e.rowLength===0?t.chartProperties.updateExistingChartColor():u.EnableColorSettings&&e.columnLength===0&&(u.ColorCustomization=null));var p=u.EnableColorSettings,tt=t.getChartProperties().ColorCustomization,c=this.getColorFieldInfo(tt,p,t),o=[];(h||e.rowLength>0)&&(o=t.updateSeriesColorPalette(n));it=t.getChartProperties().ChartSeriesTypeInfo;b=it.filter(function(n){return t.isBarChartType(n.ChartType)});!BoldBIDashboard.isNullOrUndefined(b)&&b.length>0&&this.checkBarWithLineChart(t.getChartProperties().ChartSeriesTypeInfo,n,t);var ot=u.CustomLegendInfo.GroupValues.Values,rt=ot.filter(function(n){return n.IsModified===!0}),st=d&&!BoldBIDashboard.isNullOrUndefined(u.TrendLineSettings)&&u.TrendLineSettings.length>0||!h&&!BoldBIDashboard.isNullOrUndefined(rt)&&rt.length>0||e.rowLength>0;if(e.rowLength===0)for(r=0;r<nt;r++)n[r].fill=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getColumnFillColor(t,n[r].id);for(r=0;r<nt;r++){if(h||t.updateCustomLegendValuesToChartSeries(n[r]),st?d&&!BoldBIDashboard.isNullOrUndefined(u.TrendLineSettings)&&u.TrendLineSettings.length>0&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateTrendLineToSeries(u.TrendLineSettings,n[r]):t.updateCustomLegendValuesToChartSeries(n[r]),e.rowLength>0)if(!u.IsDefaultColorPalette&&o.length>0)if(t.getChartProperties().ColorMappingType==="Data")for(f=0;f<o.length;f++)n[r].legendName===o[f].Name&&(n[r].fill=o[f].Value);else t.getChartProperties().ColorMappingType==="Index"&&(n[r].fill=BoldBIDashboard.isNullOrUndefined(o[r])||BoldBIDashboard.isNullOrUndefined(o[r].Value)?o[r%o.length].Value:o[r].Value);else n[r].fill=BoldBIDashboard.isNullOrUndefined(t.defaultColorPalette[r])?t.defaultColorPalette[r%t.defaultColorPalette.length]:t.defaultColorPalette[r];var s=n[r].points,ht=n[r].total,ut=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getDecimalPoints(n[r].id,y);for(f=0;f<s.length;f++)h&&(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateDataLabelValueToPoint(n[r],f,ht,ut,u.DataLabel,t),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateDataSuffixToPoint(k,n[r],s[f],ut,y,u.ShowValueLabelSuffix,u.ValueLabelSuffix)),p&&!BoldBIDashboard.isNullOrUndefined(c)&&c.length>0&&(n[r].type.toLowerCase()===ChartTypes.Bar.toString().toLowerCase()||n[r].type.toLowerCase()===ChartTypes.Column.toString().toLowerCase()||this.isShapeChartType(u.ChartType))?(a=t.getChartProperties().ColorCustomization.SolidColorInfo[0].ColorMappingType==="Data"?this.getColorForIndividualSection(s[f].x,c):BoldBIDashboard.isNullOrUndefined(c[f])?c[f%c.length]:c[f],v=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getColumnValueFillColor(t,tt.SolidColorInfo[0].BasedOn.UniqueColumnName,s[f].x),(a.IsEdited||t.getChartProperties().ColorCustomization.SolidColorInfo[0].ColorMappingType!=="Data")&&(t.getChartProperties().ColorCustomization.SolidColorInfo[0].ColorMappingType!=="Index"||a.Color!=="")||(a.Color=v),s[f].fill=a.Color===""?v:a.Color):p||(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(u.ChartType)?e.columnLength!==0||e.rowLength!==0||u.IsDefaultColorPalette||(s[f].fill=o.length>0?o[f].Value:t.defaultColorPalette[f%t.defaultColorPalette.length]):s[f].fill=null),!p&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(u.ChartType)&&u.IsDefaultColorPalette&&e.columnLength>0&&(ft=t.dataGroupInfo.FieldContainers.filter(function(n){return n.Name==="Column"})[0].FieldInfos[0].UniqueColumnName,v=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getColumnValueFillColor(t,ft,s[f].x),s[f].fill=v)}if(g&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateChartTypeAndAxisToForecastSeries(t,i,n),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateValueLabel(t.getChartProperties().CustomValueLabels,n,t),!h&&u.ValueLabelSuffix)for(l=0;l<n.length;l++)for(et=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getDecimalPoints(n[l].id,y),w=0;w<n[l].points.length;w++)BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateDataSuffixToPoint(k,n[l],n[l].points[w],et,y,u.ShowValueLabelSuffix,u.ValueLabelSuffix)},n.updateValueLabel=function(n,t,i){var f=i.getChartProperties().ShowValueLabels,u,r,o,e;if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0)for(u=0;u<n.length;u++)for(r=0;r<t.length;r++)this.isCombinationChart(i)||!this.isShapeChartType(i.getChartProperties().ChartType)?n[u].Name===t[r].legendCaption&&n[u].UniqueColumnName===t[r].id&&(t[r].marker.dataLabel.visible=f?n[u].IsEnabled:!1):this.isShapeChartType(i.getChartProperties().ChartType)&&n[u].Name===t[r].name&&n[u].UniqueColumnName===t[r].id&&(BoldBIDashboard.isNullOrUndefined(t[r].marker)?t[r].marker={dataLabel:{visible:f?n[u].IsEnabled:!1}}:t[r].marker.dataLabel.visible=f?n[u].IsEnabled:!1);else if(i.getChartProperties().ShowValueLabels)for(r=0;r<t.length;r++)t[r].marker.dataLabel.visible=this.isShapeChartType(i.getChartProperties().ChartType)?!0:!0;i.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(o=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(i)?"ComboChart_BasicSettings":"Chart_BasicSettings",e=i.designerInstance.element.find("#"+i.designerId+"_"+o+"_valueLabelbutton_container"),i.getChartProperties().ShowValueLabels&&t.length!==1?e.css("display","block"):e.css("display","none"))},n.prototype.renderShowValueLabel=function(n,t,i){var r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.dashboardDesigner.designerPanel.selectedReportItems[0])),h=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(r.getChartProperties().ChartType)?BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getChartSeries(r):BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(r)?BoldBIDashboard.isNullOrUndefined(r.comboChartObj)?[]:r.comboChartObj.model.series:BoldBIDashboard.isNullOrUndefined(r.chartObj)?[]:r.chartObj.model.series,e,f,u,s;if(BoldBIDashboard.isNullOrUndefined(n))f=r.designerInstance.element.find("#"+r.designerId+"_"+t+"_valueLabelbutton_container"),u=r.designerInstance.element.find("#"+r.designerId+"_chart_"+i.categoryName+"_"+i.name),u.length>0&&(s=u.data("BoldBIDashboardCheckBox"),BoldBIDashboard.isNullOrUndefined(s)||s.option("checked",r.getChartProperties().ShowValueLabels)),r.getChartProperties().ShowValueLabels&&h.length!==1?f.css("display","block"):f.css("display","none");else{var c=BoldBIDashboard.buildTag("div.","",{display:"inline-block","margin-bottom":"15px"},{id:r.designerId+"_Chart_"+i.categoryName+"_valueLabel_container"}),l=BoldBIDashboard.buildTag("div.e-dbrd-value-label-container","",{width:(r.propertyPanel.propertyPanelContainer.width()-33)*47/100+"px"}),a=BoldBIDashboard.buildTag("label.e-dbrd-valuelabel-element",r.locale.propertyPanel.basicSettings.showValueLabel,{"max-width":(r.propertyPanel.propertyPanelContainer.width()-33)*47/100-15+"px","font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis",display:"block"},{id:r.designerId+"_chart_"+i.categoryName+"_"+i.name+"_childElement","for":r.designerId+"_chart_"+i.categoryName+"_"+i.name});l.append(a);e=BoldBIDashboard.buildTag("div.e-dbrd-valueLabel-check-box-container","",{},{id:r.designerId+"_chart_"+i.categoryName+"_"+i.name+"_parent"});u=BoldBIDashboard.buildTag("input","",{},{id:r.designerId+"_chart_"+i.categoryName+"_"+i.name,type:"checkbox"});e.append(u);var f=BoldBIDashboard.buildTag("div.e-dbrd-valueLabel-button-container","",{width:(r.propertyPanel.propertyPanelContainer.width()-33)*47/100+"px",display:"inline-block"},{id:r.designerId+"_"+t+"_"+i.categoryName+"_valueLabel_container"}),v=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(r)?"e-combochart-valueLabel-button":"e-chart-valueLabel-button",o=BoldBIDashboard.buildTag("button."+v+" bbi-dbrd-btn-primary bbi-dbrd-btn-small valueLabel","Customize",{display:"inline-block",width:"200px"},{id:r.designerId+"_"+t+"_valueLabelbutton_container"});f.append(o);r.getChartProperties().ShowValueLabels&&h.length!==1?o.css("display","block"):o.css("display","none");u.BoldBIDashboardCheckBox({checked:r.getChartProperties().ShowValueLabels,change:this.bbdesigner$.proxy(r.propertyPanel.onValueChange,r.propertyPanel,i,"Axis","Chart"),width:(r.propertyPanel.propertyPanelContainer.width()-33)*57/100-15+"px",cssClass:"e-designer-prop-checkbox"});c.append(l,e,f);n.append(c)}},n.getChartSeries=function(n){for(var i,r=[],u=n.ContentContainer.find(".e-datavisualization-chart"),t=0;t<u.length;t++)i=BoldBIDashboardDesigner.bbdesignerstatic$(u[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||r.push(i.model.series[0]);return r},n.getColumnId=function(n,t){for(var i,r=0;r<t.length;r++)if(t[r].FieldInfos.length>0&&(i=t[r].FieldInfos.filter(function(t){return t.UniqueColumnName===n}),i.length>0))return i[0].FieldActualType==="bbi-designer-dataset-datetime"?i[0].Id+"_"+i[0].DateTimeFormat:i[0].Id;return""},n.getColumnFillColor=function(n,t){var u=n.getChartProperties(),f=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getColumnId(t,n.dataGroupInfo.FieldContainers),i=this.getDefaultColorSettings(t,u),r=BoldBIDashboard.Dashboard.WidgetHelper.getColorCode(n,f,i);return BoldBIDashboard.isNullOrUndefined(i)?r:(i.IsEdited||n.isActAsSlaveForAnyPoP||(i.Color=r),i.Color)},n.getColumnValueFillColor=function(n,t,i){var r=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getColumnId(t,n.dataGroupInfo.FieldContainers);return n.designerInstance.modules.resource.getColumnValueColorCode(r,i.toString())},n.updateTrendLineToSeries=function(n,t){for(var f,u=[],r=n.filter(function(n){return n.UniqueName===t.id}),i=0;i<r.length;i++)f={fill:r[i].LineColor,polynomialOrder:r[i].Order,visibility:r[i].LineVisible?"visible":"",type:r[i].LineType,name:r[i].CustomName,dashArray:BoldBIDashboard.Dashboard.WidgetHelper.getLineStyle(r[i].LineStyle),width:r[i].LineWidth},u.push(f);t.trendlines=u},n.updateDataLabelValueToPoint=function(n,t,i,r,u,f){switch(u){case DataLabel.Category.toString():n.points[t].text=n.points[t].x;break;case DataLabel.Value.toString():n.points[t].text=n.points[t].formattedtext.toString();break;case DataLabel.Percentage.toString():n.points[t].text=f.getPercetageValueForPoints(n.points[t],i,r).toString();break;case DataLabel.ValueAndPercentage.toString():n.points[t].text="("+n.points[t].formattedtext+") ("+f.getPercetageValueForPoints(n.points[t],i,r).toString()+")";break;case DataLabel.CategoryAndValue.toString():n.points[t].text=n.points[t].x+" ("+n.points[t].formattedtext+")";break;case DataLabel.CategoryAndPercentage.toString():n.points[t].text=n.points[t].x+" ("+f.getPercetageValueForPoints(n.points[t],i,r).toString()+")";break;case DataLabel.AllDetails.toString():n.points[t].text=n.points[t].x+" ("+n.points[t].formattedtext+") ("+f.getPercetageValueForPoints(n.points[t],i,r).toString()+")"}},n.updateDataSuffixToPoint=function(n,t,i,r,u,f,e){var h=this.isPercentageMeasureFormat(t.id,u),c=this.isPercentChartType(t.type),o,s;c&&h?i.text=this.getPercetageValueForPoints(i,i.totalValue,r):this.isShapeChartType(t.type)||(i.text=BoldBIDashboard.isNullOrUndefined(i.formattedtext)?i.text:i.formattedtext);u.FieldContainers.length>0&&(o=n?u.FieldContainers[0].Name==="primaryYValue"||u.FieldContainers[1].Name==="secondaryYValue":u.FieldContainers[0].Name==="YValue",s=n?u.FieldContainers[0].FieldInfos.length>0||u.FieldContainers[1].FieldInfos.length>0:u.FieldContainers[0].FieldInfos.length>0,f?u.FieldContainers.length>0&&o&&s?i.text+=" "+e:i.text=i.formattedtext+" "+e:u.FieldContainers.length>0&&o&&s||(i.text=i.formattedtext))},n.renderingShapeChartObj=function(n,t){var r=this.isCombinationChart(n),i=r?n.comboChartObj:n.chartObj;return i.model.commonSeriesOptions.highlightSettings.enable=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isHighlightEffectRequired(n),i.model.commonSeriesOptions.selectionSettings.type=this.isMultiSelectionEnabled(n)?"multiple":"single",i.model.selectedDataPointIndexes=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getInitialSelection(t,n),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateChartElementsVisibility(n,i),i},n.renderingCartesianChartObj=function(n,t){var l=this.isCombinationChart(n),r=n.getChartProperties(),f=n.DataGroupInfo,e=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(f),a=e.valueLength,v=e.columnLength,i=l?n.comboChartObj:n.chartObj,s,u,h,c,o;return i.model.series=t,i.model.commonSeriesOptions.highlightSettings.mode=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateHighlightOrSelectionSettings(f),i.model.commonSeriesOptions.selectionSettings.mode=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateHighlightOrSelectionSettings(f),i.model.commonSeriesOptions.highlightSettings.enable=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isHighlightEffectRequired(n),i.model.commonSeriesOptions.selectionSettings.enable=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isSelectionEffectRequired(n),i.model.commonSeriesOptions.selectionSettings.type=this.isMultiSelectionEnabled(n)?"multiple":"single",i.model.selectedDataPointIndexes=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getInitialSelection(t,n),s=n.getResponsiveLabelnteresect(r.Axis.CategoryAxis.LabelOverflowMode),i.model.primaryXAxis.labelIntersectAction=s.toLocaleLowerCase(),i.model.primaryXAxis.enableTrim=r.Axis.CategoryAxis.EnableTrim,i.model.primaryXAxis.visible=r.Axis.CategoryAxis.IsEnabled,u=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getUpdatedSeriesAxisCount(r.ChartSeriesTypeInfo),i.model.primaryYAxis.visible=r.Axis.PrimaryValueAxis.IsEnabled&&u.primaryValueLength>0,i.model.axes[0].visible=!BoldBIDashboard.isNullOrUndefined(r.Axis.SecondaryValueAxis)&&r.Axis.SecondaryValueAxis.IsEnabled&&u.secondaryValueLength>0,i.model.primaryXAxis.title.visible=r.Axis.CategoryAxis.ShowTitle,i.model.primaryXAxis.title.text=r.Axis.CategoryAxis.Title,i.model.primaryYAxis.title.visible=r.Axis.PrimaryValueAxis.ShowTitle,i.model.primaryYAxis.title.text=r.Axis.PrimaryValueAxis.Title,i.model.axes[0].title.visible=r.Axis.SecondaryValueAxis.ShowTitle,i.model.axes[0].title.text=r.Axis.SecondaryValueAxis.Title,i.model.primaryYAxis.valueType=u.primaryValueLength>0&&r.Axis.PrimaryValueAxis.AxisType===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Logarithmic)&&n.axisTypevisible(i.model.series,!1)?"logarithmic":"double",i.model.axes[0].valueType=u.secondaryValueLength>0&&!BoldBIDashboard.isNullOrUndefined(r.Axis.SecondaryValueAxis)&&r.Axis.SecondaryValueAxis.IsEnabled&&r.Axis.SecondaryValueAxis.AxisType===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Logarithmic)&&n.axisTypevisible(i.model.series)?"logarithmic":"double",h=n.isDefaultData||u.primaryValueLength>0?r.PrimaryValueGridLines:!1,c=n.isDefaultData||u.secondaryValueLength>0?r.SecondaryValueGridLines:!1,i.model.primaryXAxis.majorGridLines.visible=r.CategoryGridLines,i.model.axes[0].majorGridLines.visible=c,i.model.primaryYAxis.majorGridLines.visible=h,i.model.primaryXAxis.enableScrollbar=!1,!BoldBIDashboard.isNullOrUndefined(n.VirtualScrollSettings)&&n.dataValues.hasMoreRecords&&a!==0&&v!==0&&(o=n.dataValues.widgetData.Data.length>0?JSON.parse(n.dataValues.data):[],o.length===n.VirtualScrollSettings.PageSize&&(i.model.primaryXAxis.enableScrollbar=!0,i.model.primaryXAxis.pointsLength=r.EnableSmoothScroll?n.maxRecordCount:2*r.PageSize,i.model.primaryXAxis.maxPointLength=o.length,i.model.primaryXAxis._scrollLeft=0,i.model.primaryXAxis.zoomPosition=0,i.model.scrollChanged=BoldBIDashboardDesigner.bbdesignerstatic$.proxy(n.scrollChanged,n))),e.rowLength===0&&this.isAdvanceColorSupported(n.getChartProperties().ChartSeriesTypeInfo)&&n.getChartProperties().EnableColorSettings?this.updateChartPropertiesBasedOnColorType(n.dataValues,i,n.getChartProperties()):this.resetChartColorUpdateProperties(i,n.getChartProperties()),this.updateChartElementsVisibility(n,i),n.chartProperties.updateCartesianLegendVisiblity(i),this.updateAxisLabelFormat(r,i.model),this.setRangePaddingValue(r,i.model),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateLegendDropdownDataToChart(r,i,n),n.updateAxisLabelOnRenaming(i.model),i},n.updateLegendDropdownDataToChart=function(n,t,i){var r,u;if(n.ShowLegendAsDropDown&&!BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(n.ChartType))for(i.chartProperties.unselectedLegendInstance=i.chartProperties.unselectedLegendInstance.length>0&&i.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design?i.chartProperties.unselectedLegendInstance:i.chartProperties.isLegendDropdownAllSelected&&i.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design?[]:n.UnselectedLegendList,t=BoldBIDashboard.isNullOrUndefined(t.model)?t:t.model,t.legend.visible=n.EnableColorSettings?n.ShowLegend:!n.ShowLegendAsDropDown,i.chartProperties.renderLegendDropdownList(t.series),r=0;r<i.chartProperties.unselectedLegendInstance.length;r++)u=i.chartProperties.unselectedLegendInstance[r].SeriesLegendName,i.chartProperties.showHideLegendSeriesVisibility(t.series,u,!1)},n.resetChartColorUpdateProperties=function(n,t){n.model.legend.mode="series";n.model.legend.enableMultiRange=!1;n.model.legend.shape=t.LegendShape.replace(/\s/g,"");n.model.legend.toggleSeriesVisibility=!0;n.model.rangeColorMapping=[];n.model.legend.title.text=t.LegendTitle},n.updateChartElementsVisibility=function(n,t){var i=n.getChartProperties(),r=this.getUpdatedSeriesAxisCount(i.ChartSeriesTypeInfo),u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(n.CellInfo,!1,BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isXaxisLabelVisible(n)),f;t.model.primaryYAxis.title.visible=u.ShowYAxisTitle?i.Axis.PrimaryValueAxis.ShowTitle:!1;t.model.primaryXAxis.title.visible=u.ShowXAxisTitle?i.Axis.CategoryAxis.ShowTitle:!1;t.model.primaryYAxis.visible=u.ShowYAxisLabels&&r.primaryValueLength>0?i.Axis.PrimaryValueAxis.IsEnabled:!1;t.model.primaryXAxis.visible=u.ShowXAxisLabels&&(r.primaryValueLength>0||r.secondaryValueLength>0)?i.Axis.CategoryAxis.IsEnabled:!1;t.model.legend.visible=this.isShapeChartType(i.ChartType)||i.EnableColorSettings||!i.ShowLegendAsDropDown||t.model.series.length!==1||n.getBindedColumns().rowColumns.length!==0?u.ShowLegend||!BoldBIDashboard.isNullOrUndefined(i.ColorCustomization)&&i.ColorCustomization.Type!==ColorCustomizationType.Individual?i.ShowLegend&&!i.ShowLegendAsDropDown:!1:!1;t.model.legend.position=n.getResponsiveLegendPosition(i.LegendPosition);this.isShapeChartType(i.ChartType)||(t.model.axes[0].title.visible=u.ShowYAxisTitle&&r.secondaryValueLength>0?i.Axis.SecondaryValueAxis.ShowTitle:!1,t.model.axes[0].visible=u.ShowYAxisTitle&&r.secondaryValueLength>0?i.Axis.SecondaryValueAxis.IsEnabled:!1,BoldBIDashboard.isNullOrUndefined(i.Axis)||(f=n.getResponsiveLabelnteresect(i.Axis.CategoryAxis.LabelOverflowMode),t.model.primaryXAxis.labelRotation=n.getResponsiveLabelRotation(i.Axis.CategoryAxis.LabelRotation),t.model.primaryXAxis.labelIntersectAction=f.toLocaleLowerCase(),t.model.primaryXAxis.enableTrim=i.Axis.CategoryAxis.EnableTrim),t.model.primaryXAxis.majorGridLines.visible=i.CategoryGridLines,t.model.primaryYAxis.majorGridLines.visible=r.primaryValueLength>0?i.PrimaryValueGridLines:!1,t.model.axes[0].majorGridLines.visible=r.secondaryValueLength>0?i.SecondaryValueGridLines:!1)},n.isXaxisLabelVisible=function(n){var i=n.contentContainer.find(".e-datavisualization-chart"),t;if(i.length>0){for(t=0;t<i.length;t++)if(BoldBIDashboardDesigner.bbdesignerstatic$(i[t]).is(":visible"))return BoldBIDashboardDesigner.bbdesignerstatic$(i[t]).height()>110}else return n.contentContainer.height()>110},n.isTrendlineRequired=function(n){if(!BoldBIDashboard.isNullOrUndefined(n))for(var t=0;t<n.length;t++)if(this.isStackedChartType(n[t].ChartType))return!1;return!0},n.updateTrendLineBasedOnFieldInfo=function(n){for(var t,u=n.DataGroupInfo.FieldContainers[0].FieldInfos,i=n.getChartProperties().TrendLineSettings,f=[],r=0;r<u.length;r++)for(t=0;t<i.length;t++)i[t].UniqueName===u[r].UniqueColumnName&&f.push(i[t]);n.getChartProperties().TrendLineSettings=f},n.prototype.updateChartPropertyPanelElement=function(n,t){var i=n.getChartProperties(),e=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(n),r=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(n.dataGroupInfo),u=!BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(i.ChartType)&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isTrendlineRequired(i.ChartSeriesTypeInfo)&&r.rowLength===0&&!i.IsEnableDrillDown&&r.valueLength>0&&r.columnLength>0,f;n.propertyPanel.updateCategoryVisibility("Chart","Trendline",u);n.propertyPanel.updateItemVisibility("Chart","Trendline","Trendline",u);u&&(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateTrendLineBasedOnFieldInfo(n),BoldBIDashboard.isNullOrUndefined(n.designerInstance.element.find("#"+n.designerId+"_Chart_trendline_grid_col").data("BoldBIDashboardGrid"))||n.designerInstance.element.find("#"+n.designerId+"_Chart_trendline_grid_col").data("BoldBIDashboardGrid").setModel({dataSource:n.getChartProperties().TrendLineSettings}));n.propertyPanel.updateItemVisibility("Chart","BasicSettings","ShowNoDataItem",BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCartesianChartType(i.ChartType));n.propertyPanel.updateItemVisibility("Chart","LegendSettings","CustomLegend",r.valueLength>0&&i.ShowLegend);n.propertyPanel.updateItemVisibility("Chart","BasicSettings","ChartType",BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(i.ChartType));n.propertyPanel.updateItemVisibility("Chart","BasicSettings","ChartTypeAndAxis",r.valueLength>0&&!BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(i.ChartType));n.propertyPanel.updateItemVisibility("Chart","BasicSettings","ShowMarker",i.ShowMarker&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isDistributionType(i.ChartType));n.propertyPanel.updateItemVisibility("Chart","Axis","CategoryAxisTitleValue",i.Axis.CategoryAxis.ShowTitle&&i.Axis.CategoryAxis.IsEnabled&&!i.IsEnableDrillDown);n.chartProperties.updateTitleVisibility("Chart","FontSettings","ValueLabel",i.ShowValueLabels,n);n.chartProperties.setPropertyElement("Axis","CategoryAxisTitleValue",i.Axis.CategoryAxis.IsCustomTitle?i.Axis.CategoryAxis.Title:"");n.chartProperties.setPropertyElement("Axis","PrimaryAxisTitleValue",i.Axis.PrimaryValueAxis.IsCustomTitle?i.Axis.PrimaryValueAxis.Title:"");n.chartProperties.setPropertyElement("Axis","SecondaryAxisTitleValue",i.Axis.SecondaryValueAxis.IsCustomTitle?i.Axis.SecondaryValueAxis.Title:"");n.updateAxisPropertyVisibility();f=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getUpdatedSeriesAxisCount(i.ChartSeriesTypeInfo);n.propertyPanel.updateItemDisable("bool",e?"ComboChart":"Chart","GridLines","PrimaryValueGridLines",!n.isDefaultData&&f.primaryValueLength===0);n.propertyPanel.updateItemDisable("bool",e?"ComboChart":"Chart","GridLines","SecondaryValueGridLines",!n.isDefaultData&&f.secondaryValueLength===0);this.dashboardDesigner.modules.util.updateAction("Chart","Link","Link");r.valueLength!==0&&r.columnLength!==0||r.valueLength!==0&&r.rowLength!==0?n.propertyPanel.updateItemDisable("bool","Chart","Filter","ActAsMasterWidget",!1):n.propertyPanel.updateItemDisable("bool","Chart","Filter","ActAsMasterWidget",!0);n.propertyPanel.updateItemVisibility("Chart","BasicSettings","EnableMultiSelection",i.FilterSettings.ActAsMasterWidget&&r.rowLength===0&&r.columnLength===1);n.propertyPanel.updateCategoryVisibility("Chart","SeriesSettings",n.getFixedSeriesSettingsVisibility());BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateColorSettingsPropertyVisibility(i,r,n);BoldBIDashboard.DashboardDesignerUtility.ChartHelper.enableOrDisableForecastOption(n);this.updateSinglePointForeCast(t,n);n.chartProperties.updateLegendPropertyDisablity()},n.updateColorSettingsPropertyVisibility=function(n,t,i){var u,r;i.isShapeChartType(n.ChartType)?(u=t.valueLength>0&&t.columnLength>0,i.propertyPanel.updateCategoryVisibility("Chart","SeriesPalette",t.valueLength!==0),i.propertyPanel.updateItemVisibility("Chart","SeriesPalette","AdvanceColorPalette",u),i.propertyPanel.updateItemVisibility("Chart","SeriesPalette","SeriesColorPaletteButton",n.EnableColorSettings),i.propertyPanel.updateItemVisibility("Chart","SeriesPalette","UseDefaultPalette",!u),i.propertyPanel.updateItemVisibility("Chart","SeriesPalette","ColorPalette",!n.IsDefaultColorPalette&&!u),i.propertyPanel.updateItemVisibility("Chart","SeriesPalette","ColorMappingType",!n.IsDefaultColorPalette&&!u&&!this.isShapeChartType(n.ChartType)),i.chartProperties.setPropertyElement("SeriesPalette","AdvanceColorPalette",n.EnableColorSettings),i.chartProperties.setPropertyElement("SeriesPalette","SeriesColorPaletteButton",n.ColorCustomization)):(r=t.valueLength!==0&&t.rowLength===0,i.propertyPanel.updateCategoryVisibility("Chart","SeriesPalette",t.valueLength>0&&!r),i.propertyPanel.updateCategoryVisibility("Chart","Formatting",r),i.propertyPanel.updateItemVisibility("Chart","SeriesPalette","UseDefaultPalette",!r),i.propertyPanel.updateItemVisibility("Chart","SeriesPalette","ColorPalette",!n.IsDefaultColorPalette&&!r),i.propertyPanel.updateItemVisibility("Chart","SeriesPalette","ColorMappingType",!n.IsDefaultColorPalette&&!r&&!this.isShapeChartType(n.ChartType)),i.chartProperties.setPropertyElement("Formatting","ColorSettings",n.ColorCustomization));i.chartProperties.setPropertyElement("SeriesPalette","UseDefaultPalette",n.IsDefaultColorPalette)},n.prototype.updateWidgetJsonProperties=function(n){var o=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(n),u=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(n.dataGroupInfo),e,t,i,r;if(n.updateCustomLegendSettingsBasedOnValue(n),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isShapeChartType(n.getChartProperties().ChartType))n.getChartProperties().IsColorPaletteCategoryVisible=u.valueLength!==0;else{if(e=u.valueLength!==0&&u.rowLength!==0,n.getChartProperties().ChartSeriesTypeInfo.length>0){var s=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(n.dataGroupInfo),h=s.columnIndex,c=n.DataGroupInfo,f=c.FieldContainers[h].FieldInfos;for(f.length===1||f.length===1&&n.getChartProperties().Axis.CategoryAxis.Title===""||f.length>1?n.getChartProperties().Axis.CategoryAxis.Title=n.getChartProperties().Axis.CategoryAxis.Title!==""&&n.getChartProperties().Axis.CategoryAxis.IsCustomTitle?n.getChartProperties().Axis.CategoryAxis.Title:f[0].DisplayName:f.length===0&&(n.getChartProperties().Axis.CategoryAxis.Title=""),t=[],i=[],r=0;r<n.getChartProperties().ChartSeriesTypeInfo.length;r++)n.getChartProperties().ChartSeriesTypeInfo[r].IsSecondaryAxis?i.push(n.getChartProperties().ChartSeriesTypeInfo[r]):t.push(n.getChartProperties().ChartSeriesTypeInfo[r]);t.length===0?n.getChartProperties().Axis.PrimaryValueAxis.IsCustomTitle=!1:n.getChartProperties().Axis.PrimaryValueAxis.Title=n.getChartProperties().Axis.PrimaryValueAxis.IsCustomTitle&&n.getChartProperties().Axis.PrimaryValueAxis.Title!==n.columnBindings[t[0].UniqueColumnName]?n.getChartProperties().Axis.PrimaryValueAxis.Title:t.length>1?n.getChartProperties().Axis.PrimaryValueAxis.Title:t.length===1&&n.getChartProperties().Axis.PrimaryValueAxis.Title!==n.columnBindings[t[0].UniqueColumnName]?n.columnBindings[t[0].UniqueColumnName]:n.getChartProperties().Axis.PrimaryValueAxis.Title;i.length===0?n.getChartProperties().Axis.SecondaryValueAxis.IsCustomTitle=!1:n.getChartProperties().Axis.SecondaryValueAxis.Title=n.getChartProperties().Axis.SecondaryValueAxis.IsCustomTitle&&n.getChartProperties().Axis.SecondaryValueAxis.Title!==n.columnBindings[i[0].UniqueColumnName]?n.getChartProperties().Axis.SecondaryValueAxis.Title:i.length>1?n.getChartProperties().Axis.SecondaryValueAxis.Title:i.length===1&&n.getChartProperties().Axis.SecondaryValueAxis.Title!==n.columnBindings[i[0].UniqueColumnName]?n.columnBindings[i[0].UniqueColumnName]:n.getChartProperties().Axis.SecondaryValueAxis.Title}else n.getChartProperties().Axis.CategoryAxis.Title="",n.getChartProperties().Axis.PrimaryValueAxis.Title="",n.getChartProperties().Axis.SecondaryValueAxis.Title="",n.getChartProperties().Axis.PrimaryValueAxis.IsCustomTitle=!1,n.getChartProperties().Axis.SecondaryValueAxis.IsCustomTitle=!1;u.rowLength>0?n.getChartProperties().ColorCustomization=null:(n.getChartProperties().ColorPaletteModel=[],this.updateColorCustomizationSettings(n));n.getChartProperties().IsColorPaletteCategoryVisible=e}n.getChartProperties().CustomLegendBtnVisibilty=u.valueLength>0;n.updateValueLabelInfos(n);o||(n.chartProperties.widgetJson=n.getChartProperties())},n.prototype.renderColorSettings=function(n,t,i,r){var l,u,f,e,o,c,y,g;if(r.categoryId=r.designerId+"_"+t+"_"+i.categoryName,r.defaultPaletteContainer=r.designerInstance.element.find("#"+r.categoryId),l=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.dataGroupBindedColumnInfo(r.dataGroupInfo),u=r.getChartProperties(),r.defaultPaletteContainer.length!==0||BoldBIDashboard.isNullOrUndefined(n))if(!BoldBIDashboard.isNullOrUndefined(r.defaultPaletteContainer)&&r.defaultPaletteContainer.length>0){var v=r.defaultPaletteContainer.find("#"+r.categoryId+"_palatte_body"),d=r.defaultPaletteContainer.find("#"+r.categoryId+"_palatte_button"),a=r.defaultPaletteContainer.find("#"+r.categoryId+"_color_settings_button"),s=r.defaultPaletteContainer.find("#"+r.categoryId+"_advance_color_palatte_body_element");if(v.empty(),!BoldBIDashboard.isNullOrUndefined(u.DefaultColors)){for(f=0;f<u.DefaultColors.length;f++)e=u.DefaultColors[f],o=this.getFieldName(e.Name,r.DataGroupInfo),r.isActAsSlaveForAnyPoP&&(o=o.length===0?this.getFieldName(e.Name.replace("_secondary",""),r.DataGroupInfo)+"- Secondary":o+"- Primary"),c={name:o,color:e.Color,isEdited:e.IsEdited},this.renderDefaultColorPaletteRow(c,v,f,r);y=r.defaultPaletteContainer.find("#"+r.categoryId+"_advance_color_palatte_check_element");BoldBIDashboard.isNullOrUndefined(y)||(g=y.data("BoldBIDashboardCheckBox"),g.option("checked",u.EnableColorSettings));v.css({height:50*u.DefaultColors.length+"px"});BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isAdvanceColorSupported(u.ChartSeriesTypeInfo)&&l.rowLength===0&&!r.isActAsSlaveForAnyPoP?(s.css("display","block"),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateAdvanceButtonVisibility(d,a,u.EnableColorSettings)):(s.css("display","none"),d.css("display","none"))}}else r.propertyPanel.updateItemVisibility("ComboChart","Formatting","ColorSettings",i.isVisible);else{r.defaultPaletteContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-designer-scroll-style-3","",{width:"460px"},{id:r.categoryId});var p=BoldBIDashboard.buildTag("div","",{height:50*u.DefaultColors.length+"px"},{id:r.categoryId+"_palatte_body"}),s=BoldBIDashboard.buildTag("div","",{},{id:r.categoryId+"_advance_color_palatte_body_element"}),h=BoldBIDashboard.buildTag("div","",{},{id:r.categoryId+"_palatte_button"}),w=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily e-dbrd-property-advance-color","",{},{id:r.categoryId+"_advance_color_palatte_text_element"}),b=BoldBIDashboard.buildTag("div","",{},{id:r.categoryId+"_advance_color_palatte_check_element"});if(s.append(w,b),r.defaultPaletteContainer.append(p,s,h),w.text(r.locale.propertyPanel.formatting.colorSettings.advancedSettingText),b.BoldBIDashboardCheckBox({checked:u.EnableColorSettings,change:this.bbdesigner$.proxy(r.showAdvanceColorPalette,r),width:(r.propertyPanel.propertyPanelContainer.width()-33)*57/100-15+"px",cssClass:"e-designer-prop-checkbox"}),n.append(r.defaultPaletteContainer),!BoldBIDashboard.isNullOrUndefined(u.DefaultColors))for(f=0;f<u.DefaultColors.length;f++)e=u.DefaultColors[f],o=this.getFieldName(e.Name,r.DataGroupInfo),r.isActAsSlaveForAnyPoP&&(o=o.length===0?this.getFieldName(e.Name.replace("_secondary",""),r.DataGroupInfo)+"- Secondary":o+"- Primary"),c={name:o,color:e.Color,isEdited:e.IsEdited},this.renderDefaultColorPaletteRow(c,p,f,r);var k=BoldBIDashboard.buildTag("div.e-advance-option-wrap","",{"margin-left":"205px"},{}),nt=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(r)?"e-advanced-comboChart-color-settings-button e-advanced-color-settings-button e-advanced-color-settings-button-alignment":"e-chart-widget-color-settings-button e-advanced-color-settings-button e-advanced-color-settings-button-alignment",a=BoldBIDashboard.buildTag("button."+nt+" bbi-dbrd-btn-small bbi-dbrd-btn-primary",r.locale.propertyPanel.customizeBtnText,{width:"160px"},{id:r.categoryId+"_color_settings_button"});k.append(a);h.append(k);h.css("display","none");BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isAdvanceColorSupported(u.ChartSeriesTypeInfo)&&l.rowLength===0&&!r.isActAsSlaveForAnyPoP?(s.css("display","block"),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateAdvanceButtonVisibility(h,a,u.EnableColorSettings)):(s.css("display","none"),h.css("display","none"))}},n.updateAdvanceButtonVisibility=function(n,t,i){n.css("display","block");t.css("display","block");i?t.removeAttr("disabled"):t.attr("disabled","disabled")},n.prototype.getFieldName=function(n,t){var e="",r,i,f,o,u;if(!BoldBIDashboard.isNullOrUndefined(t.FieldContainers)&&t.FieldContainers.length>0)for(r=t.FieldContainers,i=0;i<r.length;i++)for(f=0;f<r[i].FieldInfos.length;f++)if(o=r[i].FieldInfos,u=o.filter(function(t){return t.UniqueColumnName===n}),!BoldBIDashboard.isNullOrUndefined(u)&&u.length>0){e=u[0].Name;break}return e},n.isAdvanceColorSupported=function(n){var i=0,t;if(!BoldBIDashboard.isNullOrUndefined(n))for(t=0;t<n.length;t++)(n[t].ChartType.toLowerCase()===ChartTypes.Bar.toString().toLowerCase()||n[t].ChartType.toLowerCase()===ChartTypes.Column.toString().toLowerCase())&&(i=i+1);return i===1},n.prototype.renderDefaultColorPaletteRow=function(n,t,i,r){var e=BoldBIDashboard.buildTag("div","",{height:"50px",width:"100%"},{id:r.designerId+"_color_scale_row_"+i}),o=BoldBIDashboard.buildTag("div","",{width:"202.1px",float:"left","margin-top":"8.5px","margin-left":"3px"}),s=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"}),u,f;s.text(n.name);o.append(s);u=BoldBIDashboard.buildTag("div","",{width:"100px",display:"inline-block",float:"left","margin-top":"3px"});f=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:r.designerId+"_default_color_"+i});u.append(f);f.BoldBIDashboardColorPicker({value:n.color,width:"100px",cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label",select:this.bbdesigner$.proxy(this.updateDefaultPalette,this,i,r),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});e.append(o,u);t.append(e)},n.prototype.updateDefaultPalette=function(n,t,i){var r=t.getChartProperties(),o=this.dashboardDesigner.modules.propertyPanel.getHexColorFromRGBA(i.RGBA),s,h,e,u,c,l,f,a;for(r.DefaultColors.length>n&&(r.DefaultColors[n].Color!==o&&(r.DefaultColors[n].IsEdited=!0),r.DefaultColors[n].Color=o),s=t.ContentContainer.find(".e-datavisualization-chart"),h=BoldBIDashboard.isNullOrUndefined(t.DrillLevelInfo)?0:t.DrillLevelInfo.length,e=0;e<=h;e++)if(u=this.bbdesigner$(s[e]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(u))for(c=r.ForecastProperties.ForecastSettings.IsEnable&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isForecastApplicable(t),l=c?1:u.model.series.length,f=0;f<l;f++)a=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getDefaultColorSettings(u.model.series[f].id,r),u.model.series[f].fill=a.Color,u.redraw();this.dashboardDesigner.modules.serialization.notifyChange();BoldBIDashboardDesigner.editManager.setMergeAction(!1)},n.getDefaultColorSettings=function(n,t){t.DefaultColors=BoldBIDashboard.isNullOrUndefined(t.DefaultColors)?[]:t.DefaultColors;for(var i=0;i<t.DefaultColors.length;i++)if(t.DefaultColors[i].Name===n)return t.DefaultColors[i];return null},n.getColumnValueInfo=function(n){var t=this.getBindedColumns(n),i=[],r,u;if(this.isCombinationChart(n)){for(r=0;r<t.primaryYValue.length;r++)i.push(t.primaryYValue[r]);for(u=0;u<t.secondaryYValue.length;u++)i.push(t.secondaryYValue[u])}else i=t.yValueColumns;return i},n.prototype.updateAdvancedColorSettings=function(n,t){var i=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.dashboardDesigner.designerPanel.selectedReportItems[0])),e,o,r,u,f;!t&&i.getChartProperties().EnableColorSettings?(i.getChartProperties().ColorCustomization=n,BoldBIDashboard.DashboardDesignerUtility.ChartHelper.removeAllDrillElementsForChart(i),e=i.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(i.DataGroupInfo,i),o={action:"ColorCustomization",fieldInfoList:e},i.isExistingChart=!1,BoldBIDashboard.DashboardDesignerUtility.ChartHelper.WidgetDataFetch(o,i,this.dashboardDesigner),this.dashboardDesigner.modules.serialization.notifyChange()):BoldBIDashboard.isNullOrUndefined(i.getChartProperties().ColorCustomization)&&(i.getChartProperties().EnableColorSettings=!1,r=i.defaultPaletteContainer.find("#"+i.categoryId+"_advance_color_palatte_check_element"),u=i.defaultPaletteContainer.find("#"+i.categoryId+"_color_settings_button"),u.length>0&&u.attr("disabled","disabled"),r.length>0&&(f=r.data("BoldBIDashboardCheckBox"),BoldBIDashboard.isNullOrUndefined(f)||f.option("checked",!1)));BoldBIDashboardDesigner.editManager.setMergeAction(!1)},n.getSolidColorInfo=function(n,t){var i=this.getDataGroupID(t),e=BoldBIDashboard.isNullOrUndefined(n.SolidColorInfo)?[]:JSON.parse(JSON.stringify(n.SolidColorInfo)),u,f,r;for(n.SolidColorInfo=[],u=function(r){BoldBIDashboard.isNullOrUndefined(n.SolidColorInfo[r])&&(n.SolidColorInfo.push(new SolidColorSet),n.SolidColorInfo[r].BasedOn.FieldId=i[r].DataId,n.SolidColorInfo[r].BasedOn.SummaryType=SummaryType.NONE,n.SolidColorInfo[r].BasedOn.UniqueColumnName=i[r].UniqueColumnName,f.getDefaultColorSets(n.SolidColorInfo[r].DefaultColorSets,t));var u=e.filter(function(n){return n.BasedOn.UniqueColumnName===i[r].UniqueColumnName});u.length>0&&(n.SolidColorInfo.splice(r,1),n.SolidColorInfo.push(u[0]))},f=this,r=0;r<i.length;r++)u(r);return n},n.getDefaultColorSets=function(n,t){for(var i=0;i<t.defaultColorPalette.length;i++)n.push({Name:"color_"+(i+1),IsEdited:!1,Color:t.defaultColorPalette[i%t.defaultColorPalette.length]})},n.updateChartPropertiesBasedOnColorType=function(n,t,i){t.model.legend.title.text="";BoldBIDashboard.isNullOrUndefined(i.ColorCustomization)?(t.model.legend.mode="series",t.model.legend.enableMultiRange=!1,t.model.legend.shape=i.LegendShape.replace(/\s/g,""),t.model.legend.toggleSeriesVisibility=!0,t.model.rangeColorMapping=[]):i.ColorCustomization.Type===ColorCustomizationType.Gradient?(t.model.rangeColorMapping=n.widgetData.RangeColorMapping,t.model.legend.mode="range",t.model.legend.toggleSeriesVisibility=!1,t.model.legend.enableMultiRange=!1,t.model.legend.title.text=i.ColorCustomization.GradientSettings.GradientColorInfo.legendText):(t.model.rangeColorMapping=[],t.model.legend.mode="point",t.model.legend.shape=i.LegendShape.replace(/\s/g,""),t.model.legend.toggleSeriesVisibility=i.ColorCustomization.Type===ColorCustomizationType.Individual)},n.prototype.checkColorSettings=function(n,t){n&&this.dashboardDesigner.modules.util.alertDialog(t.designerInstance.locale.alertDialogTitle.dashboardDesigner,t.designerInstance.locale.alertWindowMesages.colorSettingsAdvanceSettingsWarningMessage,IconType.information,AlertType.Alert,!1,"")},n.prototype.updateColorCustomizationSettings=function(n){var c,e,l;BoldBIDashboard.isNullOrUndefined(n.getChartProperties().DefaultColors)&&(n.getChartProperties().DefaultColors=[]);var s=n.getBindedColumns(),i=n.getChartProperties(),u=s.rowColumns,o=s.columnValue,f=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(n)?n.comboChartObj:n.chartObj;if((!BoldBIDashboard.isNullOrUndefined(u)&&u.length>0||!BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isAdvanceColorSupported(i.ChartSeriesTypeInfo))&&(i.ColorCustomization=null,i.EnableColorSettings=!1,BoldBIDashboard.isNullOrUndefined(f)||(f.model.rangeColorMapping=[],f.model.legend.mode="series",f.model.legend.shape=n.getChartProperties().LegendShape.replace(/\s/g,""))),!BoldBIDashboard.isNullOrUndefined(i.ColorCustomization)){var r=!1,h=-1,t=i.ColorCustomization;if(o.length===0)switch(t.Type){case ColorCustomizationType.Individual:r=!0;break;case ColorCustomizationType.Rule:r=t.RuleRangeSettings.BasedOn.SummaryType===SummaryType.NONE}else switch(t.Type){case ColorCustomizationType.Individual:for(c=function(n){if(t.SolidColorInfo[n].BasedOn.SummaryType===SummaryType.NONE&&o.filter(function(i){return i.UniqueColumnName===t.SolidColorInfo[n].BasedOn.UniqueColumnName}).length===0)return h=n,r=!0,"break"},e=0;e<t.SolidColorInfo.length;e++)if(l=c(e),l==="break")break;break;case ColorCustomizationType.Rule:r=t.RuleRangeSettings.BasedOn.SummaryType===SummaryType.NONE&&o.filter(function(n){return n.Id===t.RuleRangeSettings.BasedOn.FieldId}).length===0}r&&(i.ColorCustomization.Type===ColorCustomizationType.Individual?(t.SolidColorInfo.splice(h,1),t.SolidColorInfo.length===0&&(i.ColorCustomization=null)):i.ColorCustomization=null)}BoldBIDashboard.isNullOrUndefined(u)||u.length!==0||(i.ColorPaletteModel=[]);BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateDefaultColorsToProperty(n);n.isOpenReport||n.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design||this.dashboardDesigner.modules.serialization.notifyChange();BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.setMergeAction(!1)},n.updateDefaultColorsToProperty=function(n){var u=[],f=n.getBindedColumns(),r,o,i,s,e,t;if(BoldBIDashboard.isNullOrUndefined(n.getChartProperties().DefaultColors)&&(n.getChartProperties().DefaultColors=[]),r=[],this.isCombinationChart(n)){for(i=0;i<f.primaryYValue.length;i++)r.push(f.primaryYValue[i]);for(o=0;o<f.secondaryYValue.length;o++)r.push(f.secondaryYValue[o])}else r=f.yValueColumns;for(i=0;i<r.length;i++){var c=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getColumnId(r[i].UniqueColumnName,n.DataGroupInfo.FieldContainers),t=this.getDefaultColorSettings(r[i].UniqueColumnName,n.getChartProperties()),h=BoldBIDashboard.Dashboard.WidgetHelper.getColorCode(n,c,t);BoldBIDashboard.isNullOrUndefined(t)||!t.IsEdited?(t=new DefaultColorSet,t.Color=n.isActAsSlaveForAnyPoP?n.popColorPalette[0]:BoldBIDashboard.isNullOrUndefined(h)?n.defaultColorPalette[i]:h,t.Name=r[i].UniqueColumnName,t.IsEdited=!1,u.push(t)):u.push(t)}if(n.isActAsSlaveForAnyPoP&&!this.isCombinationChart(n))for(s=JSON.parse(JSON.stringify(u)),e=0;e<s.length;e++)t=this.getDefaultColorSettings(s[e].Name+"_secondary",n.getChartProperties()),BoldBIDashboard.isNullOrUndefined(t)||!t.IsEdited?(t=new DefaultColorSet,t.Color=n.popColorPalette[1],t.Name=s[e].Name+"_secondary",t.IsEdited=!1,u.push(t)):u.push(t);n.getChartProperties().DefaultColors=u},n.seriesRendering=function(n,t,i){var u,r;if(this.isAdvanceColorSupported(t.getChartProperties().ChartSeriesTypeInfo)){if(!BoldBIDashboard.isNullOrUndefined(t.getChartProperties().ColorCustomization)&&t.getChartProperties().ColorCustomization.Type===ColorCustomizationType.Gradient&&n.data.series.type.toLowerCase()!==ChartTypes.Column.toString().toLowerCase()&&n.data.series.type.toLowerCase()!==ChartTypes.Bar.toString().toLowerCase())for(u=0;u<n.data.series.points.length;u++)for(r=0;r<t.getChartProperties().DefaultColors.length;r++)t.getChartProperties().DefaultColors[r].Name===n.data.series.id&&(n.data.series.points[u].fill=t.getChartProperties().DefaultColors[r].Color)}else if(!BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isForecastApplicable(t)&&!i&&!BoldBIDashboard.isNullOrUndefined(t.getChartProperties().DefaultColors)&&t.getChartProperties().DefaultColors.length>0)for(r=0;r<t.getChartProperties().DefaultColors.length;r++)t.getChartProperties().DefaultColors[r].Name===n.data.series.id&&(n.data.series.fill=t.getChartProperties().DefaultColors[r].Color)},n.chartPreRendering=function(n,t){var u,s,i,f,r,o,e;if(this.isAdvanceColorSupported(t.getChartProperties().ChartSeriesTypeInfo))if(u=t.getChartProperties().ColorCustomization,u!=null&&u.Type===ColorCustomizationType.Rule)for(s=[],t.customLegendsForConditionalRange=[],i=0;i<n.model.series.length;i++)for(f=0;f<n.model.series[i].points.length;f++)if(r=n.model.series[i].points[f].fill,!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0)if(s.indexOf(r)<0)for(s.push(r),o=0;o<u.RuleRangeSettings.RangeColorInfo.length;o++)e=u.RuleRangeSettings.RangeColorInfo[o].PropertyColorPair[0].Color,e=e.indexOf("#")<0?e:t.propertyPanel.hexToRGBA(e),e===r&&t.customLegendsForConditionalRange.push({name:u.RuleRangeSettings.RangeColorInfo[o].RangeLabel,color:r});else n.model.series[i].points[f].visibleOnLegend="hidden";else n.model.series[i].points[f].visibleOnLegend="hidden";else t.customLegendsForConditionalRange=[]},n.updateCustomLegendsForConditionalRange=function(n,t){var u,f,r,i;if(this.isAdvanceColorSupported(t.getChartProperties().ChartSeriesTypeInfo)&&(u=n.data.legendItem,f=t.getChartProperties().ColorCustomization,f!=null))if(f.Type===ColorCustomizationType.Rule)for(i=0;i<t.customLegendsForConditionalRange.length;i++)t.customLegendsForConditionalRange[i].color===u.LegendStyle.Color&&(u.Text=t.customLegendsForConditionalRange[i].name);else if(f.Type===ColorCustomizationType.Gradient)for(r=new MeasureFormatting,i=0;i<u.Text.length;i++)u.Text[i]=BoldBIDashboard.DashboardUtil.formattedText(u.Text[i],r.Culture,r.DecimalPoints,r.FormatType,r.DecimalSeparator,r.GroupSeparator,r.Prefix,r.Suffix,r.Unit,!0,t.designerInstance,r.EnableLakhsAndCroreRep)},n.updateFontStyle=function(n,t,i){if(!BoldBIDashboard.isNullOrUndefined(n)){n.model.primaryXAxis.font.size=i.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisLabelFontSize?t:i.getChartProperties().Axis.CategoryAxis.CategoryAxisLabelFontSize+"px";n.model.primaryXAxis.title.font.size=i.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize?t:i.getChartProperties().Axis.CategoryAxis.CategoryAxisTitleFontSize+"px";n.model.primaryYAxis.font.size=i.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize?t:i.getChartProperties().Axis.PrimaryValueAxis.PrimaryLabelFontSize+"px";n.model.primaryYAxis.title.font.size=i.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize?t:i.getChartProperties().Axis.PrimaryValueAxis.PrimaryTitleFontSize+"px";n.model.commonSeriesOptions.marker.dataLabel.font.size=i.getChartProperties().IsAutoValueLabelFontSize?t:i.getChartProperties().ValueLabelFontSizefontSize+"px";n.model.legend.font.size=i.getChartProperties().IsAutoLegendFontSize?t:i.getChartProperties().LegendFontSize+"px";n.model.legend.title.font.size=i.getChartProperties().IsAutoLegendTitleFontSize?t:i.getChartProperties().LegendTitleFontSize+"px";n.model.axes.length!==0&&(n.model.axes[0].font.size=i.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize?t:i.getChartProperties().Axis.SecondaryValueAxis.SecondaryLabelFontSize+"px",n.model.axes[0].title.font.size=i.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize?t:i.getChartProperties().Axis.SecondaryValueAxis.SecondaryTitleFontSize+"px");for(var r=0;r<n.model.series.length;r++)n.model.series[r].marker.dataLabel.font.size=i.getChartProperties().IsAutoValueLabelFontSize?t:i.getChartProperties().ValueLabelFontSize+"px"}},n.updateFontStyleForBreadCrumb=function(n){var t=n.getFontSizeBasedOnResolution(),r,i,u;for(n.contentContainer.find(".e-dashboardbreadcrumb-drillIconForward").css("font-size",t==="16px"?"12px":t==="32px"?"20px":"8px"),r=n.contentContainer.find(".e-dashboardbreadcrumb-drill"),n.contentContainer.find(".Breadcrumb").css("height",t==="32px"?"40px":"20px"),this.isCombinationChart(n)?n.comboChartElement.css("height",t==="32px"?"calc(100% - 40px)":"calc(100% - 20px)"):n.chartElement.css("height",t==="32px"?"calc(100% - 40px)":"calc(100% - 20px)"),i=0;i<r.length;i++)u=n.designerInstance.measureText(r.eq(i).html(),100,{size:t,fontStyle:"Normal",fontFamily:"var(--designer-font)"}),r.eq(i).css({"font-size":t,width:u.width+3+"px"})},n.updateLegendShape=function(n,t){var u,i,r;for(t.getChartProperties().LegendShape=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendShape,n),u=t.ContentContainer.find(".e-datavisualization-chart"),i=0;i<u.length;i++)r=BoldBIDashboardDesigner.bbdesignerstatic$(u[i]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(r)||(r.model.legend.shape=t.getChartProperties().LegendShape.replace(/\s/g,""),r.redraw())},n.updateColumnSpacing=function(n,t){var f,r,i,u;for(t.getChartProperties().ColumnSpacing=n,f=t.ContentContainer.find(".e-datavisualization-chart"),r=0;r<f.length;r++)if(i=BoldBIDashboardDesigner.bbdesignerstatic$(f[r]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(i)){for(u=0;u<i.model.series.length;u++)i.model.series[u].columnSpacing=n;i.redraw()}},n.updateColumnWidth=function(n,t){var f,r,i,u;for(t.getChartProperties().ColumnWidth=n,f=t.ContentContainer.find(".e-datavisualization-chart"),r=0;r<f.length;r++)if(i=BoldBIDashboardDesigner.bbdesignerstatic$(f[r]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(i)){for(u=0;u<i.model.series.length;u++)i.model.series[u].columnWidth=n;i.redraw()}},n.columnSpacingAndWidthVisibilty=function(n){var i=!1,t;if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length!==0)for(t=0;t<n.length;t++)if(!this.isDistributionType(n[t].ChartType)&&!this.isShapeChartType(n[t].ChartType)){i=!0;break}return i},n.LineWidthVisibilty=function(n){var i=!1,t;if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length!==0)for(t=0;t<n.length;t++)if(n[t].ChartType===ChartTypes.Line.toString()||n[t].ChartType===ChartTypes.Spline.toString()){i=!0;break}return i},n.changeTooltipElementPosition=function(n,t){var i=BoldBIDashboardDesigner.bbdesignerstatic$("#"+n+"_toolTip").parent(),r=t.designerInstance.element.parent(),u=t.designPanelInstance.banner.bannerPanel.find(".bbi-dashboarddesigner-bannerPanel-iconcontainer").children(".su-minimize").length>0;i.hasClass("BoldBIDashboardTooltip")&&t.designerInstance.element.find(i).length===0&&u?r.append(i):r.find(i).length>0&&!u&&t.designerInstance.element.parents("body").append(i)},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.ChartHelper",InternalChartHelper,window);__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalChoroplethMapReportItem=function(n){function t(t){var i=n.call(this,t,"ChoroplethMap","e-choroplethmap-item")||this;return i.field=null,i.layerType="geometry",i.shapeColor="#E5E5E5",i.hoverColor="gray",i.strokeThickness=.75,i.strokeColor="#ffffff",i.mapNameSpace="BoldBIDashboard.datavisualization.Map",i.requiredScriptFile="ej1.map.all.min.js",i.dataValues=null,i.locale=null,i.bbdesigner$=i.designerInstance.bbdesigner$,i.locale=t.getLocalizationContent(),i.widgetJson=new ChoroplethMapProperties(t),i.isShapeLoaded=!0,i.designerId=i.designerInstance._id,i.propertyPanel=t.modules.propertyPanel,i.mapHelper=new MapCommonHelper(i.designerInstance),i.designerInstance.isViewMode()&&(i.isWidgetRenderedInViewMode=!1),i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.relation,GroupId:"c55f5601-8e79-4a16-94d6-ddd4cc051306",Items:[{id:"e08ac19e-c619-4078-a56f-973f4ed083a1",widgetName:"ChoroplethMap",widgetDisplayName:n.itemPanel.widgetTitle.choroplethMap,cssClass:"bbi-widgeticon bbi-designer-widget-choroplethmap",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ChoroplethMapItem",searchCategory:["choroplethmap","relationship"],widgetconfiginfo:null,useIconTemplate:!1,hide:!0,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.choroplethMap,description:n.itemPanel.widgetDescription.choroplethMapDesc,dataRequirement:n.itemPanel.widgetDataRequirements.choroplethMapDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChoroplethMapProperties"}]};BoldBIDashboardDesigner.widgetItems.push(t)},t.prototype.init=function(n,t){BoldBIDashboard.isNullOrUndefined(ejdashboard[this.getMapProperties().ShapeData])?(this.controlContainer.data("widgetInstance",this),this.controlContainer.attr({"data-prevent-loading-indicator":!0})):this.renderChoroplethMap(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.choroplethMapElement)||this.updateChoroplethMapSize()},t.prototype.update=function(n){this.IsRendered=!1;this.updateChoroplethMapData(n)},t.prototype.getFieldContainer=function(){return this.mapHelper.getFieldContainer()},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:this.requiredScriptFile,NameSpace:this.mapNameSpace},DependentScripts:[]}},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,this.mapNameSpace)},t.prototype.onFieldSettingsClick=function(n,t){return this.mapHelper.onFieldSettingsClick(n,t)},t.prototype.getJson=function(){return this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t);this.isDataUpdated=!1;BoldBIDashboard.isNullOrUndefined(ejdashboard[this.getMapProperties().ShapeData])&&(this.mapHelper.downloadMapJsonData(this.getMapProperties().ShapeData),this.mapHelper.setTimerToDwnldMapFile({widgetJson:this.getMapProperties(),mapObj:this,controlType:"ChoroplethMap",shapeData:this.getMapProperties().ShapeData},!1))},t.prototype.getPropertyPanelItems=function(){return this.getChoroplethMapPropertyPanel()},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateChoroplethMapProperties(n,t,i,r)},t.prototype.updateInitialSelection=function(){this.initialSelectionForChoroplethMap()},t.prototype.clearFilter=function(n){BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this);this.getMapProperties().SelectedFilterValues=[];this.designerInstance.modules.serialization.notifyChange();BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName);var t=this.choroplethMapElement.data("BoldBIDashboardMap");BoldBIDashboard.isNullOrUndefined(t)||(t.model.layers[0].selectedItems=[],this.refresh())},t.prototype.getMobileViewHeight=function(){return 3*this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.refresh=function(){this.choroplethMapElement.BoldBIDashboardMap("refresh")},t.prototype.dispose=function(){this.disposeChoroplethMap();n.prototype.dispose.call(this)},t.prototype.getFieldView=function(){var t=[BoldBIDashboard.Dashboard.SupportedDataType.Number,BoldBIDashboard.Dashboard.SupportedDataType.Boolean,BoldBIDashboard.Dashboard.SupportedDataType.String];return n.prototype.getFieldView.call(this,[],t)},t.prototype.canCombineRequest=function(){return!0},t.prototype.renderMapReportElement=function(t){try{BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t));this.CellInfo=this.widgetJson.ContainerSettings.Bounds;this.renderchoroplethMapElement();!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.isShapeFileAvailable=function(){return!BoldBIDashboard.isNullOrUndefined(ejdashboard[this.getMapProperties().ShapeData])},t.prototype.isScriptFilesAvailable=function(){return!BoldBIDashboard.isNullOrUndefined(this.getControlInstance(this.mapNameSpace))},t.prototype.renderChoroplethMap=function(t){try{var i=void 0;i=this.designerInstance.isDesignMode()?!0:!this.isWidgetRenderedInViewMode;this.isShapeFileAvailable()&&this.isScriptFilesAvailable()&&i&&(BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t))),this.renderchoroplethMapElement(),this.isWidgetRenderedInViewMode=!0,!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer),this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.ChoroplethMap))}catch(r){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:r,Type:r.name})}},t.prototype.renderchoroplethMapElement=function(){this.choroplethMapItem=BoldBIDashboard.buildTag("div.e-choroplethmapitem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder,overflow:"hidden"},{id:this.designerId+"choroplethmapitem"+this.widgetJson.UniqueName});this.choroplethMapElement=BoldBIDashboard.buildTag("div.e-choroplethmap-element","",{width:"100%",height:"100%",position:"relative","background-color":"white","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designerId+"choroplethmapElement"+this.widgetJson.UniqueName});this.contentContainer.append(this.choroplethMapItem);this.controlContainer.data("widgetInstance",this);BoldBIDashboard.isNullOrUndefined(ejdashboard[this.getMapProperties().ShapeData])&&this.controlContainer.attr({"data-prevent-loading-indicator":!0});this.choroplethMapItem.append(this.choroplethMapElement);this.shapeDataPath="Country";this.choroplethMapElement.BoldBIDashboardMap({zoomSettings:{maxValue:30,factor:.1},mouseover:this.bbdesigner$.proxy(this.setCursorType,this),layers:[{layerType:this.layerType,dataSource:[],enableMouseHover:!0,shapeDataPath:this.shapeDataPath,legendSettings:{showLegend:!1,labelOrientation:"horizontal",mode:"interactive",dockOnMap:!0,dockPosition:"top",position:null},shapePropertyPath:this.getMapProperties().ShapePropertyPath,shapeData:ejdashboard[this.getMapProperties().ShapeData],shapeSettings:{fill:this.shapeColor,highlightColor:this.hoverColor,strokeThickness:this.strokeThickness,stroke:this.strokeColor,autoFill:!1,valuePath:"name",colorValuePath:"name",enableGradient:!0,colorMappings:{rangeColorMapping:[{from:1,to:10,gradientColors:[this.getMapProperties().MinColor,this.getMapProperties().MaxColor]}]}}}],shapeSelected:this.bbdesigner$.proxy(this.choroplethMapItemSelected,this),refreshed:this.bbdesigner$.proxy(this.refreshCompleted,this),onRenderComplete:this.bbdesigner$.proxy(this.actionComplete,this)})},t.prototype.actionComplete=function(){var n=this.choroplethMapElement.data("BoldBIDashboardMap");!BoldBIDashboard.isNullOrUndefined(n)&&this.isMapLoaded&&this.designerInstance.modules.util.hideLoadingIndicator(this.controlContainer);this.IsRendered=!0},t.prototype.updateChoroplethMapData=function(n){var h,r,e;if(this.dataValues=n,this.isDataUpdated=!0,this.isShapeFileAvailable()&&this.isScriptFilesAvailable()){this.isMapLoaded=!0;BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this);this.choroplethMapItem.show();BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this);var t=this.choroplethMapElement.data("BoldBIDashboardMap"),i=null,o=null,u=null,f=null,s=t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0];this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo);BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error?BoldBIDashboard.isNullOrUndefined(n.Message)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.widgetContainerHelper.showControlError(this,n)):n.noDataAvailable?(this.choroplethMapItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this),this.IsRendered=!0):(this.choroplethMapItem.show(),BoldBIDashboard.isNullOrUndefined(n)||n.data==="[]"||!BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)||typeof n=="string"&&n.indexOf("Sf_Exception")!==-1?(n.data==="[]"&&n.columnBindings==="{}"||!BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty)&&this.clearChoroplethMapData(t):(i=JSON.parse(n.data),o=JSON.parse(n.columnBindings),u=n.formattedData.formatminvalue,f=n.formattedData.formatmaxvalue,h=this.getColumns(i),h.length>1?(this.generateTooltip(o),r=this.DataGroupInfo.FieldContainers[0].FieldInfos[0].UniqueColumnName,e=this.DataGroupInfo.FieldContainers[1].FieldInfos[0].UniqueColumnName,t.model.layers[0].showTooltip=!0,t.model.layers[0].tooltipTemplate="template"+this.bbdesigner$(this.choroplethMapElement).attr("id")+"_tooltip",t.model.layers[0].dataSource=i,t.model.layers[0].shapeDataPath=e,t.model.layers[0].enableMouseHover=!0,t.model.layers[0].shapeSettings.valuePath=e,t.model.layers[0].shapeSettings.colorValuePath=r,t.model.layers[0].shapeSettings.enableGradient=!0,t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].from=this.getFromValue(i,r),t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].to=this.getToValue(i,r)+1,t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].gradientColors=[this.getMapProperties().MinColor,this.getMapProperties().MaxColor],t.model.layers[0].legendSettings.height=18,t.model.layers[0].legendSettings.width=170,t.model.layers[0].legendSettings.type="layers",t.model.layers[0].legendSettings.mode="interactive",t.model.layers[0].legendSettings.dockOnMap=!0,t.model.layers[0].legendSettings.dockPosition="top",t.model.layers[0].legendSettings.position=null,t.model.layers[0].legendSettings.title=this.DataGroupInfo.FieldContainers[0].FieldInfos[0].Name,t.model.layers[0].legendSettings.leftLabel=u!==null?String(u):String(s.from),t.model.layers[0].legendSettings.rightLabel=f!==null?String(f):String(s.to),BoldBIDashboard.isNullOrUndefined(t.model.layers[0].shapeData)&&(t.model.layers[0].shapeData=ejdashboard[this.getMapProperties().ShapeData]),t.model.layers[0].legendSettings.showLegend=this.controlContainer.width()<318||this.controlContainer.height()<318?!1:BoldBIDashboard.isNullOrUndefined(ejdashboard[this.getMapProperties().ShapeData])?!1:this.getMapProperties().ShowLegend,BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this)):this.clearChoroplethMapData(t)),this.designerInstance.modules.util.updateAction("ChoroplethMap","Link","Link"));this.refresh();this.updateInitialSelection()}},t.prototype.clearChoroplethMapData=function(n){n.model.layers[0].dataSource=[];n.model.layers[0].shapeDataPath=this.shapeDataPath;n.model.layers[0].enableMouseHover=!0;n.model.layers[0].shapeSettings.valuePath="name";n.model.layers[0].shapeSettings.colorValuePath="name";n.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].gradientColors=[this.getMapProperties().MinColor,this.getMapProperties().MaxColor];n.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].from=1;n.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].to=10;n.model.layers[0].legendSettings.showLegend=!1;BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this)},t.prototype.choroplethMapItemSelected=function(t){var f,e,i,o,s,a;if(this.getMapProperties().FilterSettings.ActAsMasterWidget)if(BoldBIDashboard.isNullOrUndefined(t))!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().UrlLink)&&this.getMapProperties().UrlLink.EnableLink&&(a=n.prototype.generateLinkData.call(this,this,t),n.prototype.performLinking.call(this,a));else{if(this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;this.getMapProperties().SelectedFilterValues=[];var r=[],u=[],c=[],h="",l=this.DataGroupInfo.FieldContainers;for(f=0;f<l.length;f++)e=l[f].FieldInfos[0],BoldBIDashboard.isNullOrUndefined(e)||e.FieldActualType==="bbi-designer-dataset-number"||r.push(e);if(!BoldBIDashboard.isNullOrUndefined(t.originalEvent)&&t.originalEvent.length>0)for(i=0;i<t.originalEvent.length;i++)if(BoldBIDashboard.isNullOrUndefined(t.originalEvent[i].data)){if(BoldBIDashboard.isNullOrUndefined(t.originalEvent[i].data)&&!BoldBIDashboard.isNullOrUndefined(t.model.layers[0].dataSource)){for(o=0;o<t.model.layers[0].dataSource.length;o++)for(s=0;s<r.length;s++)h=r[s].UniqueColumnName,c.push(t.model.layers[0].dataSource[o][h]);u[h]=c;u.action=InitialDimensionFilterCondition.Exclude}}else u=t.originalEvent[i].data;n.prototype.performInteraction.call(this,this,r,u)}},t.prototype.refreshCompleted=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)&&n.model.layers[0].legendSettings.showLegend){var t=this.choroplethMapElement.find(".ScrollLegendDiv");!BoldBIDashboard.isNullOrUndefined(t)&&t.hasClass("e-scroller")&&(t.removeClass("e-scroller"),t.find(".e-scrollbar").remove())}},t.prototype.getFromValue=function(n,t){for(var r=[],u=0,i=0;i<n.length;i++)r.push(n[i][t]);return u=Math.min.apply(null,r),parseFloat(u.toFixed(2))},t.prototype.getToValue=function(n,t){for(var r=[],u=0,i=0;i<n.length;i++)r.push(n[i][t]);return u=Math.max.apply(null,r),parseFloat(u.toFixed(2))},t.prototype.getColumns=function(n){for(var i=Object.keys(n[0]),r=[],t=0;t<i.length;t++)r.push({id:i[t],text:i[t]});return r},t.prototype.generateTooltip=function(n){var e,o,s,u,f=[],t,i,r,h;if(u='<script id="template'+this.bbdesigner$(this.choroplethMapElement).attr("id")+'_tooltip" type="application/jsrender">',t="template"+this.bbdesigner$(this.choroplethMapElement).attr("id")+"_tooltip",t="#"+t,this.bbdesigner$(t).length>0&&this.bbdesigner$(t).remove(),f.push((e={},e[n[this.DataGroupInfo.FieldContainers[1].FieldInfos[0].UniqueColumnName]]="{{:(#data['"+this.DataGroupInfo.FieldContainers[1].FieldInfos[0].UniqueColumnName+"'])}}",e)),f.push((o={},o[n[this.DataGroupInfo.FieldContainers[0].FieldInfos[0].UniqueColumnName]]=this.getFormattedToolTipString(this.DataGroupInfo.FieldContainers[0].FieldInfos[0]),o)),i=BoldBIDashboard.DashboardUtil.getToolTipFieldInfos(this),!BoldBIDashboard.isNullOrUndefined(i))for(r=0;r<i.length;r++)h=this.getFormattedToolTipString(i[r]),f.push((s={},s[n[i[r].UniqueColumnName]]=h,s));u+=this.widgetHelper.generateToolTipTemplate(f,this.bbdesigner$(this.choroplethMapElement).attr("id"),1e3);u+="<\/script>";this.bbdesigner$(this.choroplethMapItem).append(u)},t.prototype.getFormattedToolTipString=function(t){var i=n.prototype.getDefaultMeasureFormat.call(this),f="false",r,u,e,o;return t.MeasureFormatting!==null&&(i=t.MeasureFormatting,f="true"),r=i.DecimalSeparator.AliasValue,u=i.GroupSeparator.AliasValue,r==="'"?r="&#39;":u==="'"&&(u="&#39;"),e=this.designerInstance.model.localeSettings.culture,o="{{: ~formatTooltip(#data['"+t.UniqueColumnName+"'], '"+i.Culture+"', '"+i.DecimalPoints+"', '"+i.FormatType+"', '"+r+"', '"+u+"', '"+i.Prefix+"', '"+i.Suffix+"', '"+i.Unit+"', '"+f+"', '"+e+"')}}",o},t.prototype.setCursorType=function(n){this.getMapProperties().UrlLink.EnableLink||this.getMapProperties().FilterSettings.ActAsMasterWidget?(n.model.layers[0].enableSelection=!0,this.bbdesigner$(n.originalEvent.shape).css("cursor","pointer")):(this.bbdesigner$(n.originalEvent.shape).css("cursor","default"),n.model.layers[0].enableSelection=!1)},t.prototype.initialSelectionForChoroplethMap=function(){var n=this.getMapProperties().SelectedFilterValues,t=this.choroplethMapElement.data("BoldBIDashboardMap"),u,f,i,e,r;if(!BoldBIDashboard.isNullOrUndefined(t)&&this.getMapProperties().FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0){for(u=t.model.shapeSelected,t.model.shapeSelected=null,f=n.length,i=0;i<f;i++)for(e=n[i].InitialDimensionFilter.Text.length,r=0;r<e;r++)t.selectShape(n[i].InitialDimensionFilter.Text[r].toString());t.model.shapeSelected=u;BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this)}else BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this)},t.prototype.getChoroplethMapPropertyPanel=function(){var t=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.getMapProperties().FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo,this.widgetJson.ContainerSettings);return this.containerPropertyItem=t.containerProperties,t.propertyGridItems.Header=this.widgetJson.ContainerSettings.Title,t.propertyGridItems.SubTitle=this.widgetJson.ContainerSettings.SubTitle,t.propertyGridItems.Description=this.widgetJson.ContainerSettings.Description,t.propertyGridItems.Type=this.Type,t.linkingProperty.Items[0].value=n.prototype.useExistingLink.call(this),this.bbdesigner$.each(t.containerSettingsProperty.Items,function(n,t){(t.name==="ShowWidgetBackgroundImage"||t.name==="WidgetBackgroundImageMode"||t.name==="WidgetBackgroundImageSource"||t.name==="WidgetBackgroundImageBrowse"||t.name==="WidgetBackgroundImageURL")&&(t.isVisible=!1)}),t.propertyGridItems.Items=[{CategoryName:"Basic Settings",Items:[{name:"ShowLegend",displayName:"Show Legend",value:this.getMapProperties().ShowLegend,itemType:"bool"},{name:"ShapeData",displayName:"Map",value:this.getMapProperties().ShapeData,itemType:"dropdown",enableFilterSearch:!0,valueList:this.mapHelper.getShapeDateValueList()},{name:"shapePropertyPath",displayName:"Column",value:this.getMapProperties().ShapePropertyPath,itemType:"dropdown",valueList:this.getShapePropertyPathValue(ejdashboard[this.getMapProperties().ShapeData])},]},t.linkingProperty,{CategoryName:"Range Color Settings",Items:[{name:"GradientColor",displayName:"Monochromatic",value:this.getMapProperties().MaxColor,itemType:"color"}]},t.filterSettingsProperty,t.containerSettingsProperty,t.containerActionsProperty,t.noDataContainerActionsProperty],t.propertyGridItems},t.prototype.updateChoroplethMapProperties=function(t,i,r,u){var s=!1,f,e,h,o;switch(t){case"Name":this.widgetJson.ContainerSettings.Title=r;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,r);break;case"ShapeColor":this.updatePropertyAsync(this.updateShapeColor,r);break;case"HoverColor":this.updatePropertyAsync(this.updateHoverColor,r);break;case"ShapeData":this.getMapProperties().ShapeData=r;BoldBIDashboard.isNullOrUndefined(ejdashboard[r])?(this.mapHelper.downloadMapJsonData(r),this.mapHelper.setTimerToDwnldMapFile({widgetJson:this.getMapProperties(),mapObj:this,controlType:this.Type},!0)):this.updatePropertyAsync(this.updateShapeData,r);break;case"ShowLegend":this.updatePropertyAsync(this.updateShowLegend,r);break;case"shapePropertyPath":this.updatePropertyAsync(this.updateShapePropertyPath,r);break;case"GradientColor":this.updatePropertyAsync(this.updateGradientColors,r);break;case"ItemLink":n.prototype.updateLink.call(this,r);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,r);break;default:s=!0}if(!s){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(f=this.designPanelInstance.selectedReportItems,f.length>0))for(e=0;e<f.length;e++)h=f[e],h.attr("id")===this.controlContainer.attr("id")&&(o=this.bbdesigner$.extend(!0,{},u),o.categoryName=u.categoryName,o.valueList=u.valueList,this.propertyPanel.updatePropertyValue(o,"ChoroplethMap",r));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-choroplethmap-item",this.designerId+"_"+this.getMapProperties().UniqueName,[t,r,i,u],[t,i,r,u])}},t.prototype.updatePropertyAsync=function(n,t){var i=this,r;this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer);r=this;setTimeout(function(){i.bbdesigner$.proxy(n,r,t).call();i.designerInstance.designerPanel.hideLoadingIndicator(i.controlContainer);i.designerInstance.modules.serialization.notifyChange()},0)},t.prototype.getShapePropertyPathValue=function(n){for(var i=[],r=Object.keys(n["features"][0].properties),t=0;t<r.length;t++)i.push(r[t]);return i},t.prototype.updateShowLegend=function(n){this.getMapProperties().ShowLegend=n;var t=this.choroplethMapElement.data("BoldBIDashboardMap");t.model.layers[0].dataSource.length>0&&(t.model.layers[0].legendSettings.showLegend=this.controlContainer.width()<318||this.controlContainer.height()<318?!1:n,this.refresh())},t.prototype.updateGradientColors=function(n){var t=this.choroplethMapElement.data("BoldBIDashboardMap");t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].gradientColors[1]=n;t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].gradientColors[0]=this.ColorLuminance(n,.7);this.getMapProperties().MaxColor=n;this.getMapProperties().MinColor=t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].gradientColors[0];this.refresh()},t.prototype.updateShapeColor=function(n){if(this.shapeColor=n,!BoldBIDashboard.isNullOrUndefined(this.choroplethMapElement)){var t=this.choroplethMapElement.data("BoldBIDashboardMap");t.model.layers[0].shapeSettings.fill=n;this.refresh()}},t.prototype.updateHoverColor=function(n){var t=this.choroplethMapElement.data("BoldBIDashboardMap");t.model.layers[0].shapeSettings.highlightColor=n;this.hoverColor=n;this.refresh()},t.prototype.updateShapeData=function(n){var t,i;BoldBIDashboard.isNullOrUndefined(this.choroplethMapElement)&&!BoldBIDashboard.isNullOrUndefined(ejdashboard[n])&&(this.contentContainer.find(".e-map-file-err").remove(),this.renderMapReportElement(this.widgetJson),this.dataConfigurationInstance.postDraggedFields());t=this.choroplethMapElement.data("BoldBIDashboardMap");BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(ejdashboard[n])||(t.model.layers[0].shapeData=ejdashboard[n],this.field=this.getShapePropertyPathValue(ejdashboard[n]),this.choroplethMapElement.BoldBIDashboardMap({baseMapIndex:1}),this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.view&&(i=this.designerInstance.element.find("#"+this.designerId+"_ChoroplethMap_BasicSettings_shapePropertyPath").data("BoldBIDashboardDropDownList"),i.setModel({dataSource:this.field})),this.getMapProperties().ShapePropertyPath=this.field.indexOf("name")!==-1?"name":this.field.indexOf("NAME")!==-1?"NAME":this.field[0],this.updateShapePropertyPath(this.getMapProperties().ShapePropertyPath),this.setPropertyElement("BasicSettings","shapePropertyPath",this.getMapProperties().ShapePropertyPath));BoldBIDashboard.isNullOrUndefined(ejdashboard[n])&&(BoldBIDashboard.isNullOrUndefined(t)||t.destroy(),BoldBIDashboard.isNullOrUndefined(this.choroplethMapItem)||this.choroplethMapItem.remove(),this.choroplethMapElement=null,this.mapHelper.showMapFileErr(this,this.getMapProperties(),"ChoroplethMap"))},t.prototype.ColorLuminance=function(n,t){var u,i,r;for(n=String(n).replace(/[^0-9a-f]/gi,""),n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),t=t||0,u="#",r=0;r<3;r++)i=parseInt(n.substr(r*2,2),16),i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16),u+=("00"+i).substr(i.length);return u},t.prototype.setPropertyElement=function(n,t,i,r){this.propertyPanel.canUpdate=!1;var f=this.propertyPanel.getPropertyElement(this.getChoroplethMapPropertyPanel(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r),u=this.bbdesigner$.extend(!0,{},f);u.categoryName=n;this.propertyPanel.updatePropertyValue(u,"ChoroplethMap",i);this.propertyPanel.canUpdate=!0},t.prototype.updateShapePropertyPath=function(n){var t=this.choroplethMapElement.data("BoldBIDashboardMap");t.model.layers[0].shapePropertyPath=n;this.getMapProperties().ShapePropertyPath=n;this.refresh()},t.prototype.updateChoroplethMapSize=function(){if(BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this))this.widgetContainerHelper.showControlError(this,this.dataValues);else if(!BoldBIDashboard.isNullOrUndefined(this.choroplethMapElement)){var n=this.choroplethMapElement.data("BoldBIDashboardMap");n.model.layers[0].legendSettings.showLegend=this.controlContainer.width()<318||this.controlContainer.height()<318?!1:this.getMapProperties().ShowLegend;n.refresh()}},t.prototype.getMapProperties=function(){return this.widgetJson},t.prototype.disposeChoroplethMap=function(){var n=this.choroplethMapElement.data("BoldBIDashboardMap");BoldBIDashboard.isNullOrUndefined(n)||n.destroy();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.ChoroplethMap)},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.ChoroplethMapItem",InternalChoroplethMapReportItem,window);BoldBIDashboard.DashboardDesignerUtility.ChoroplethMapItem.prototype.initialize();BoldBIDashboardDesigner.bbdesignerstatic$.views.helpers({formatTooltip:function(n,t,i,r,u,f,e,o,s,h,c,l){return BoldBIDashboard.DashboardUtil.formattedText(n,t,i,r,u,f,e,o,s,h,null,l==="false"?!1:!0,c)}});var MapCommonHelper=function(){function n(n){this.mapFileDwnldTimer=null;this.mapFileTimerCount=0;this.locale=null;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent()}return n.prototype.setTimerToDwnldMapFile=function(n,t){BoldBIDashboard.isNullOrUndefined(ejdashboard[n.widgetJson.ShapeData])||t?(this.mapFileTimerCount=0,this.bbdesigner$(n.mapObj.controlContainer).find(".bbi-background-waiting-popup").show(),this.bbdesigner$(n.mapObj.controlContainer).attr("data-prevent-loading-indicator","true"),n.mapObj.isShapeLoaded=!1,this.addingTimerForMapFile(n.mapObj,n.widgetJson,n.controlType,t)):this.openMap(n.widgetJson,n.mapObj,n.controlType,t)},n.prototype.addingTimerForMapFile=function(n,t,i,r){var u=this;BoldBIDashboard.isNullOrUndefined(this.mapFileDwnldTimer)||this.clearTimer(this.mapFileDwnldTimer);this.mapFileDwnldTimer=setTimeout(function(n,t,i){var f=1,e;BoldBIDashboard.isNullOrUndefined(u.bbdesigner$(n.ControlContainer).attr("mapcounter"))?u.bbdesigner$(n.ControlContainer).attr("mapcounter",f):f=parseInt(u.bbdesigner$(n.ControlContainer).attr("mapcounter"),10);BoldBIDashboard.isNullOrUndefined(ejdashboard[t.ShapeData])?(f++,u.bbdesigner$(n.ControlContainer).attr("mapcounter",f),f<50?u.addingTimerForMapFile(n,t,i):BoldBIDashboard.isNullOrUndefined(ejdashboard[t.ShapeData])&&(u.designerInstance.modules.util.hideLoadingIndicator(n.ControlContainer),u.showMapFileErr(n,t,i),u.bbdesigner$(n.ControlContainer).removeAttr("mapcounter"),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(n),u.clearTimer(u.mapFileDwnldTimer))):(n.isShapeLoaded=!0,r||u.openMap(t,n,i,r),BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(n.ControlContainer)||(e=n.ControlContainer.find(".e-datavisualization-map").data("BoldBIDashboardMap"),(!BoldBIDashboard.isNullOrUndefined(e)&&BoldBIDashboard.isNullOrUndefined(e.model.layers[0].shapeData)||r)&&n.updatePropertyChange("ShapeData",t.ShapeData,t.ShapeData)),u.bbdesigner$(n.ControlContainer).removeAttr("mapcounter"),u.clearTimer(u.mapFileDwnldTimer))},300,n,t,i)},n.prototype.openMap=function(n,t){t.init("",n);t.isDataUpdated&&t.update(t.dataValues)},n.prototype.clearTimer=function(n){this.mapFileTimerCount=0;clearTimeout(n)},n.prototype.showMapFileErr=function(n,t,i){var r=BoldBIDashboard.buildTag("div.e-map-file-err","",{position:"relative","text-align":"center","vertical-align":"middle","z-index":"105",overflow:"hidden",color:"rgb(104, 98, 98)","font-size":"13px"},{id:this.dashboardDesigner.designerPanel.designId+"mapFileError"+t.UniqueName}).text(this.locale.errorMessage.mapFileDownloadingError),u=n.ControlContainer.find(".bbi-dbrd-control");!BoldBIDashboard.isNullOrUndefined(u)&&u.length>0&&u.remove();n.ControlContainer.data(i,n);n.ContentContainer.append(r);r.css({top:n.ContentContainer.height()/2-r.height()+"px"});this.dashboardDesigner.modules.serialization.updateWidgetData(t,n.DataGroupInfo)},n.prototype.downloadMapJsonData=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)&&BoldBIDashboard.isNullOrUndefined(ejdashboard[n])){var i=this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.downloadmapshape+n+"/",t=document.createElement("script");t.type="text/javascript";t.src=i;document.head.appendChild(t)}},n.prototype.getShapeDateValueList=function(){return[{category:"World",text:"Continents",value:"WorldMap_Continent"},{category:"World",text:"Countries",value:"WorldMap_Countries"},{category:"Continents",text:"Africa",value:"Africa"},{category:"Continents",text:"Asia",value:"Asia"},{category:"Continents",text:"Australia",value:"Australia_Territories"},{category:"Continents",text:"Europe",value:"Europe"},{category:"Continents",text:"North America",value:"NorthAmerica"},{category:"Continents",text:"South America",value:"SouthAmerica"},{category:"Countries",text:"Canada",value:"Canada"},{category:"Countries",text:"France",value:"France"},{category:"Countries",text:"Georgia",value:"Georgia"},{category:"Countries",text:"Germany",value:"Germany"},{category:"Countries",text:"India",value:"India"},{category:"Countries",text:"UK",value:"UnitedKingdom"},{category:"Countries",text:"USA",value:"USA_States"},{category:"States",text:"US - Alabama",value:"USA_Alabama"},{category:"States",text:"US - Alaska",value:"USA_Alaska"},{category:"States",text:"US - Arizona",value:"USA_Arizona"},{category:"States",text:"US - Arkansas",value:"USA_Arkansas"},{category:"States",text:"US - California",value:"USA_California"},{category:"States",text:"US - Colorado",value:"USA_Colorado"},{category:"States",text:"US - Connecticut",value:"USA_Connecticut"},{category:"States",text:"US - Delaware",value:"USA_Delaware"},{category:"States",text:"US - Florida",value:"USA_Florida"},{category:"States",text:"US - Georgia",value:"USA_Georgia"},{category:"States",text:"US - Hawaii",value:"USA_Hawaii"},{category:"States",text:"US - Idaho",value:"USA_Idaho"},{category:"States",text:"US - Illinois",value:"USA_Illinois"},{category:"States",text:"US - Indiana",value:"USA_Indiana"},{category:"States",text:"US - Iowa",value:"USA_Iowa"},{category:"States",text:"US - Kansas",value:"USA_Kansas"},{category:"States",text:"US - Kentucky",value:"USA_Kentucky"},{category:"States",text:"US - Louisiana",value:"USA_Louisiana"},{category:"States",text:"US - Maine",value:"USA_Maine"},{category:"States",text:"US - Maryland",value:"USA_Maryland"},{category:"States",text:"US - Massachusetts",value:"USA_Massachusetts"},{category:"States",text:"US - Michigan",value:"USA_Michigan"},{category:"States",text:"US - Minnesota",value:"USA_Minnesota"},{category:"States",text:"US - Mississippi",value:"USA_Mississippi"},{category:"States",text:"US - Missouri",value:"USA_Missouri"},{category:"States",text:"US - Montana",value:"USA_Montana"},{category:"States",text:"US - Nebraska",value:"USA_Nebraska"},{category:"States",text:"US - Nevada",value:"USA_Nevada"},{category:"States",text:"US - New Hampshire",value:"USA_New_Hampshire"},{category:"States",text:"US - New Jersey",value:"USA_New_Jersey"},{category:"States",text:"US - New Mexico",value:"USA_New_Mexico"},{category:"States",text:"US - New York",value:"USA_New_York"},{category:"States",text:"US - North Carolina",value:"USA_North_Carolina"},{category:"States",text:"US - North Dakota",value:"USA_North_Dakota"},{category:"States",text:"US - Ohio",value:"USA_Ohio"},{category:"States",text:"US - Oklahoma",value:"USA_Oklahoma"},{category:"States",text:"US - Oregon",value:"USA_Oregon"},{category:"States",text:"US - Pennsylvania",value:"USA_Pennsylvania"},{category:"States",text:"US - Puerto Rico",value:"USA_Puerto_Rico"},{category:"States",text:"US - Rhode Island",value:"USA_Rhode_Island"},{category:"States",text:"US - South Carolina",value:"USA_South_Carolina"},{category:"States",text:"US - South Dakota",value:"USA_South_Dakota"},{category:"States",text:"US - Tennessee",value:"USA_Tennessee"},{category:"States",text:"US - Texas",value:"USA_Texas"},{category:"States",text:"US - Utah",value:"USA_Utah"},{category:"States",text:"US - Vermont",value:"USA_Vermont"},{category:"States",text:"US - Virginia",value:"USA_Virginia"},{category:"States",text:"US - Washington",value:"USA_Washington"},{category:"States",text:"US - West Virginia",value:"USA_West_Virginia"},{category:"States",text:"US - Wisconsin",value:"USA_Wisconsin"},{category:"States",text:"US - Wyoming",value:"USA_Wyoming"}]},n.prototype.onFieldSettingsClick=function(n,t){for(var i=0;i<t.length;i++)if(t[i].Name==="Sort"){t[i].IsVisible=!1;break}return t},n.prototype.getFieldContainer=function(){var t=new BoldBIDashboard.Dashboard.FieldContainerForUI,n,i;return t.Name="Value",t.DisplayName=this.locale.fieldContainer.value,t.ContainerType=FieldContainerType.Numeric,t.CategoryCount=1,n=new BoldBIDashboard.Dashboard.FieldContainerForUI,n.Name="Shape",n.DisplayName=this.locale.fieldContainer.shape,n.CategoryCount=1,n.ContainerType=FieldContainerType.Non_Numeric,i=BoldBIDashboard.DashboardUtil.getToolTipFieldsDefaultContainer(),[t,n,i]},n}(),__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),InternalMapReportItem=function(n){function t(t){var i=n.call(this,t,"Map","e-map-item")||this;return i.mapObj=null,i.componentName="maps",i.mapNameSpace="ejdashboard.maps.Maps",i.colorContainer=null,i.isMarkerAvilable=!1,i.dataValues=null,i.mapItem=null,i.drillLevelInfo=[],i.breadCrumbItem=null,i.isDrillAction=!1,i.mapFileTimeCount=0,i.mapCommonFileTimerCount=0,i.isMarkerSelected=!1,i.markerElement=null,i.ejMaskEditObj={},i.isMapItem=!1,i.mapDataWithImage=null,i.locale=null,i.isLegendTitleEdited=!1,i.isFromDraft=!1,i.bbdesigner$=i.designerInstance.bbdesigner$,i.locale=t.getLocalizationContent(),i.designerId=i.designerInstance._id,i.propertyPanel=t.modules.propertyPanel,i.isShapeLoaded=!0,i.widgetJson=new MapProperties(t),i.markerFields=i.getMarkerFields(),i.mapHelper=new EJ2MapCommonHelper(i.designerInstance),i.designerInstance.isViewMode()&&(i.isWidgetRenderedInViewMode=!1),i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.relation,GroupId:"c55f5601-8e79-4a16-94d6-ddd4cc051306",Items:[{id:"e08ac19e-c619-4078-a56f-973f4ed083a1",widgetName:"Map",widgetDisplayName:n.itemPanel.widgetTitle.map,cssClass:"bbi-widgeticon bbi-designer-widget-map",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.MapItem",searchCategory:["map","relationship"],widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.map,description:n.itemPanel.widgetDescription.mapDesc,dataRequirement:n.itemPanel.widgetDataRequirements.mapDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.MapProperties"}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.getWidgetImage=function(){return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="0 0 324 208" version="1.1">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Maps" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g transform="translate(12.000000, 18.500000)" fill-rule="nonzero" id="Group">            <g transform="translate(149.774195, 85.202706) scale(-1, 1) rotate(-180.000000) translate(-149.774195, -85.202706) translate(0.274195, 0.202706)">                <path d="M116.691148,169.561969 C116.398674,169.504084 113.821244,169.21161 111.009226,169.034906 C106.028023,168.623614 105.854367,168.623614 106.204726,167.277014 C106.497201,165.988299 106.38143,165.930414 101.634816,165.695825 C97.8265567,165.461236 96.0107788,165.052991 93.2566459,163.761229 C91.3220504,162.822874 90.0942677,162.003337 90.502513,161.826634 C91.7912279,161.415342 91.2062793,160.65369 89.037095,159.892038 C87.8062657,159.480746 86.5754364,159.130386 86.2250765,159.130386 C85.9326023,159.072501 85.640128,158.837912 85.640128,158.484506 C85.640128,158.192031 86.7521396,157.899557 88.1596721,157.957443 C89.7987468,157.957443 90.6213307,157.722854 90.6213307,157.253676 C90.6213307,156.784499 89.6829757,156.434139 88.1596721,156.315321 L85.640128,156.138618 L87.2792026,155.026607 C88.4521464,154.264955 89.0949805,154.149184 89.6220436,154.557429 C90.0912211,154.968721 90.6761696,154.968721 91.2032327,154.6732 C91.6724102,154.32284 92.7844218,154.088252 93.6039591,154.088252 C94.892674,154.088252 95.2430338,153.737892 95.5964402,152.214588 C95.831029,151.160462 96.0077322,149.695044 95.8889145,148.933392 C95.831029,147.760448 96.0046856,147.644677 97.296447,147.995037 C99.2310426,148.464215 99.3468137,147.233385 97.5310358,146.471734 C96.769384,146.179259 96.4769097,145.944671 96.8272695,145.944671 C97.1197438,145.886785 97.9392812,145.533379 98.5272764,145.067248 C99.639288,144.24771 99.639288,144.189825 98.0002133,142.663475 C96.8882017,141.609349 96.4769097,140.847697 96.769384,140.14393 C97.0039728,139.616867 97.5310358,137.447683 97.8813956,135.339431 C98.4663442,131.707875 98.5851619,131.531172 100.282122,131.354469 C101.278363,131.235651 102.390374,130.885291 102.743781,130.534931 C103.505432,129.949983 103.740021,130.358228 106.667811,137.389798 C107.252759,138.736398 107.840755,139.14769 109.24524,139.263461 C110.241481,139.321347 112.176077,140.082998 113.580562,140.963468 C120.319658,145.122087 120.904606,145.64915 118.619651,146.002556 C117.915884,146.118327 117.212118,146.529619 117.096347,146.998797 C116.861758,147.644677 117.154233,147.702563 118.208359,147.410089 C118.970011,147.1755 120.258725,146.82514 121.078263,146.648437 C122.366978,146.298077 122.485795,146.413848 121.724143,147.233385 C121.020377,148.110808 121.078263,148.229626 121.958732,148.229626 C122.485795,148.229626 122.836155,148.5221 122.720384,148.933392 C122.604613,149.283752 122.954973,150.106336 123.539921,150.691285 C124.359459,151.510822 124.536162,152.272474 124.243688,154.088252 C123.893328,156.315321 123.951213,156.431093 125.416631,156.431093 C127.232409,156.431093 127.466998,157.369448 125.709106,157.896511 C124.597094,158.307803 124.536162,158.365688 125.532402,159.419814 C126.059465,160.065695 126.35194,160.708529 126.178283,160.943118 C125.532402,161.528066 128.697827,163.343844 129.870771,163.05137 C131.744434,162.524307 131.686549,163.928793 129.755,164.925033 C128.4084,165.570914 127.119685,165.744571 125.535449,165.452096 C123.015905,165.040804 123.015905,166.037045 125.535449,166.9754 C127.174524,167.621281 127.409112,168.675407 125.946741,168.791178 C124.307666,168.906949 120.965538,169.260355 119.033989,169.494944 C118.098681,169.622902 117.041508,169.680787 116.691148,169.561969 Z M123.076837,166.165002 C122.60766,164.934173 121.669305,164.75747 119.033989,165.519122 C116.337742,166.280774 117.099394,166.865722 120.907653,166.926654 C122.842248,166.98454 123.311426,166.810883 123.076837,166.165002 Z M121.084356,149.350777 C120.673064,148.704897 120.264819,148.296651 120.088115,148.473355 C119.618938,148.942532 120.38059,150.581607 121.084356,150.581607 C121.495648,150.581607 121.495648,150.2282 121.084356,149.350777 Z" id="Shape" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M75.7386546,166.926654 C72.0461667,166.341706 71.3454471,165.637939 72.749933,164.05675 C74.215351,162.475561 73.4536992,161.887566 71.9303956,163.41087 C70.3492065,164.992059 69.4108515,164.992059 68.4724965,163.41087 C67.8875479,162.533447 67.8266158,162.003337 68.2957933,161.537206 C68.6461531,161.186846 68.941674,160.425195 68.941674,159.837199 C68.941674,158.429667 70.8153374,158.490599 71.7536924,159.956017 C72.1649844,160.601898 72.9845217,161.128961 73.6273558,161.128961 C75.1506594,161.128961 75.1506594,160.190606 73.5694703,159.78236 C72.6311153,159.547772 72.4574587,159.13648 72.749933,158.259057 C73.0424073,157.262816 72.865704,157.028228 71.8115779,157.147045 C70.9341551,157.262816 70.4040454,156.970342 70.2303888,156.385393 C70.1146177,155.681627 70.407092,155.507971 71.4033326,155.681627 C72.1649844,155.797398 73.276996,155.504924 73.9228767,154.977861 C75.0348884,154.100438 74.8612317,154.039506 71.5800358,154.392912 C68.4176575,154.685387 68.1830688,154.627501 69.1793093,153.865849 C69.7642579,153.396672 71.6988535,152.811723 73.5146314,152.577134 C76.1499466,152.28466 76.8537128,152.342546 77.441708,153.162083 C77.853,153.689146 78.4379486,154.100438 78.8492405,154.100438 C79.9033666,154.100438 79.6108923,155.154564 78.4988807,155.447038 C77.7372289,155.623742 77.7951145,155.739513 78.791355,155.797398 C80.1379554,155.855284 82.3650252,157.90565 82.4229108,159.078594 C82.4229108,159.663543 84.5920951,160.952258 88.1048332,162.417676 C89.5123657,162.944739 89.9206111,163.413916 89.6860223,164.175568 C89.4514335,164.995105 89.7439078,165.229694 91.0326227,165.229694 C92.8484006,165.229694 94.6062929,166.107117 94.0213443,166.752998 C93.4303025,167.337946 78.9589184,167.511603 75.7386546,166.926654 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M155.593276,163.822162 C156.004567,163.352984 157.643642,162.649218 159.224831,162.298858 C161.625558,161.713909 162.506027,161.713909 163.618039,162.298858 C164.379691,162.768035 165.022525,163.295098 165.022525,163.471802 C165.022525,164.117682 161.799214,164.644745 158.167659,164.644745 C155.419619,164.641699 155.008327,164.525928 155.593276,163.822162 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M147.568512,163.352984 C146.630157,162.414629 146.691089,161.302617 147.745215,160.891325 C148.214393,160.714622 148.622638,160.013903 148.622638,159.368022 C148.622638,157.960489 148.857227,157.902604 150.673005,159.133433 C152.373012,160.245445 152.723372,159.249204 151.200068,157.552244 C150.145942,156.321415 150.554187,155.267289 152.138423,155.267289 C152.723372,155.267289 153.311367,154.974814 153.427138,154.563522 C153.777498,153.625167 155.066212,154.563522 155.066212,155.736466 C155.066212,156.263529 155.300801,157.083066 155.593276,157.552244 C156.062453,158.25601 156.297042,158.25601 157.116579,157.436473 C157.994002,156.498118 160.33989,156.02894 160.33989,156.790592 C160.33989,157.963536 158.700815,159.660496 156.531631,160.598851 C155.127145,161.244732 153.896315,162.237926 153.719612,162.883807 C153.30832,164.464996 151.550428,164.40711 151.550428,162.768035 C151.550428,161.656024 151.434657,161.595092 150.554187,162.417676 C148.857227,163.880047 148.269232,164.05675 147.568512,163.352984 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M185.005221,163.529687 C183.716506,162.71015 184.770633,161.595092 186.178165,162.298858 C186.824046,162.649218 187.174406,163.176281 186.997702,163.529687 C186.528525,164.172521 186.059347,164.172521 185.005221,163.529687 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M209.963027,162.475561 C209.728439,162.298858 209.551735,161.771795 209.551735,161.302617 C209.551735,160.775554 210.49009,160.540966 212.775046,160.540966 C216.056242,160.540966 216.875779,161.186846 214.883298,162.298858 C213.59763,162.941692 210.551023,163.118395 209.963027,162.475561 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M218.929192,157.143999 C218.929192,155.913169 216.467534,154.33198 215.471293,154.916929 C214.298349,155.678581 207.970546,153.277854 206.742764,151.635733 C206.331472,151.10867 205.627705,150.75831 205.161574,150.931967 C203.930745,151.401144 204.049563,149.993612 205.338278,149.058303 C206.276633,148.354537 206.276633,148.296651 205.338278,148.238766 C204.811215,148.238766 204.165334,148.53124 203.991677,148.823714 C203.345797,149.87784 201.941311,149.469595 201.941311,148.238766 C201.941311,147.592885 201.706722,147.065822 201.356362,147.065822 C201.063888,147.065822 200.771413,147.650771 200.771413,148.296651 C200.771413,149.350777 200.655642,149.408663 199.893991,148.823714 C199.132339,148.238766 198.781979,148.238766 197.843624,149.116189 C196.728566,150.112429 196.612795,150.112429 194.446657,147.592885 C192.161702,145.073341 192.161702,145.073341 189.876746,145.777107 C187.299316,146.538759 186.59555,146.246285 188.234625,145.015455 C189.230865,144.253804 189.054162,144.195918 186.068487,144.138033 C183.548943,144.138033 182.375999,143.787673 180.852696,142.672614 C178.860215,141.207196 177.92186,141.207196 177.92186,142.7305 C177.92186,143.199678 177.510568,143.550037 177.044437,143.550037 C176.578306,143.550037 176.167014,143.022974 176.167014,142.438026 C176.167014,141.326014 173.412881,138.864355 172.124166,138.864355 C171.773806,138.864355 171.478285,138.453064 171.478285,137.986933 C171.478285,137.520802 171.127926,137.10951 170.716634,137.10951 C169.604622,137.10951 168.547449,138.340339 168.547449,139.571168 C168.547449,140.448591 169.016627,140.625294 171.182764,140.625294 C172.648183,140.625294 173.81808,140.859883 173.81808,141.152357 C173.81808,141.914009 172.118073,143.553084 171.417353,143.553084 C170.363227,143.553084 165.793316,145.838039 165.031665,146.776394 C164.09331,147.949338 160.111394,147.949338 159.173039,146.776394 C158.761747,146.307217 158.118913,145.898971 157.707621,145.898971 C156.595609,145.898971 151.556521,141.740353 151.556521,140.801998 C151.556521,140.33282 150.091103,138.517042 148.275325,136.701264 C145.344489,133.889246 144.994129,133.304297 145.344489,131.720062 C145.521192,130.723821 145.694849,129.435106 145.694849,128.850158 C145.694849,128.146391 146.279797,127.619328 147.160267,127.38474 C148.68357,127.03438 148.976045,126.507317 148.214393,125.745665 C147.921919,125.511076 147.745215,124.749424 147.745215,124.045658 C147.745215,123.168235 147.218152,122.699058 145.871552,122.345651 C144.817426,122.053177 143.936956,121.526114 143.936956,121.114822 C143.936956,119.826107 140.479057,117.014089 137.08209,115.490785 C135.443016,114.729133 135.324198,113.675007 136.789616,113.675007 C138.255034,113.675007 140.012926,111.682526 139.720452,110.335926 C139.543749,109.516388 138.900915,109.223914 136.146782,109.105096 L132.8077,108.928393 L132.691929,106.759209 C132.634044,104.29755 132.8077,101.778006 133.103221,101.485532 C133.218992,101.369761 134.68441,101.193058 136.326532,101.135172 C139.549842,100.958469 141.012214,102.012595 141.012214,104.593071 C141.070099,106.701323 143.415987,108.812622 146.167073,109.162982 C148.452028,109.455456 148.628732,109.339685 148.336257,108.343445 C147.809194,106.820141 148.570846,103.596831 149.332498,104.066008 C149.624972,104.300597 149.801675,105.296838 149.682858,106.293078 L149.448269,108.166741 L151.967813,106.466735 C154.721946,104.650957 155.01442,104.066008 153.549002,103.243424 C152.903121,102.893064 152.78735,102.539658 153.195596,102.305069 C154.073019,101.778006 156.418906,104.178733 155.891843,105.001317 C155.599369,105.470494 155.776072,105.52838 156.418906,105.293791 C158.118913,104.64791 157.473032,105.409562 155.072306,106.932866 C153.549002,107.871221 152.729465,108.867461 152.729465,109.629113 C152.729465,110.741125 152.906168,110.683239 154.956535,108.925347 C157.652782,106.582506 159.176086,104.120847 159.176086,102.247184 C159.176086,101.193058 159.46856,100.781766 160.288097,100.781766 C161.226452,100.781766 161.461041,101.250943 161.634698,102.95095 C161.869286,105.470494 163.273772,106.408849 163.273772,104.005076 C163.273772,101.135172 164.270013,100.077999 166.963214,100.254703 C168.605335,100.370474 169.366987,100.196817 169.306054,99.7276396 C169.071466,98.731399 170.125592,98.8502167 170.536884,99.9043428 C170.948176,101.077287 172.060187,101.016354 172.060187,99.7855251 C172.060187,99.2584621 171.709828,97.9118617 171.356421,96.7968035 C170.652655,94.9231401 170.478998,94.8622079 168.544403,95.2156143 C167.432391,95.3923176 164.970732,95.7426774 163.097069,95.9193806 C160.285051,96.2118549 159.581284,96.0960838 158.93845,95.2156143 C158.234684,94.2193738 158.000095,94.2193738 154.779831,95.5659742 C151.382864,96.9735067 149.917446,98.7892846 150.679098,100.662948 C150.971572,101.540371 151.324979,101.540371 142.477632,100.370474 C140.543036,100.077999 138.611487,99.6667074 138.200195,99.3742331 C137.788903,99.1396444 137.085137,99.1975299 136.619006,99.6088219 C135.272406,100.720834 132.341569,98.0855183 131.872392,95.2734999 C131.637803,93.9268995 130.641563,92.0501895 129.587437,90.8802923 C126.833304,87.7179141 125.779178,84.2600149 125.779178,78.4013893 C125.779178,75.5893709 126.071652,73.1277123 126.364126,72.9540556 C126.714486,72.7194669 127.476138,71.5465231 128.122019,70.3187404 C129.822025,66.9217734 132.457341,65.5721264 136.384417,66.0413039 C138.14231,66.2180072 139.781384,66.7450702 140.015973,67.1533156 C140.543036,68.0916706 142.185157,68.2653272 142.185157,67.4457899 C142.185157,66.5074348 146.285891,65.3954232 147.047542,66.157075 C148.455075,67.5646075 148.805435,66.7420236 148.394143,62.9946968 C148.043783,59.6556153 148.159554,58.8939635 149.21368,57.4285454 C149.859561,56.5511226 150.386624,55.3781788 150.386624,54.8511158 C150.386624,54.3240527 150.679098,52.8007491 151.09039,51.3932166 C151.559568,49.5195532 151.559568,47.8195464 151.148276,45.0654135 C150.563327,41.5496288 150.621213,41.199269 151.967813,39.1489023 C152.78735,37.9759586 153.549002,35.8677064 153.725705,34.4632205 C153.902409,33.055688 154.66406,30.1278984 155.483598,27.9587141 C156.772313,24.3850439 157.122672,23.9737519 158.237731,24.2662262 C160.580571,24.8511748 166.204608,27.5474222 166.204608,28.0165997 C166.204608,28.309074 167.024146,29.5399033 167.962501,30.7707326 C168.958741,32.0015619 169.720393,33.4639333 169.720393,34.0519285 C169.720393,34.6368771 170.247456,35.459461 170.835451,35.8677064 C171.478285,36.3368839 172.182052,37.7413698 172.41664,38.9721991 C172.651229,40.4955027 173.589584,42.0766918 174.878299,43.3654067 C176.928666,45.4157733 176.928666,45.4736588 176.87078,50.396976 C176.87078,56.1398306 177.985838,60.0059751 180.328679,61.9405707 C182.613635,63.8751662 186.772253,70.4954436 186.891071,72.4269926 C187.006842,74.2427705 187.067774,74.2427705 182.497864,73.4811187 C180.563268,73.1886444 180.270794,73.3044155 179.451256,74.8277191 C178.982079,75.7660741 178.220427,76.8780857 177.693364,77.2893777 C176.697123,78.108915 174.412168,82.328466 174.412168,83.3247065 C174.412168,83.6750663 174.061808,84.2630615 173.592631,84.6134213 C172.773093,85.2593021 171.834738,89.067561 172.480619,89.067561 C173.007682,89.067561 174.354283,87.0750799 174.415215,86.2555426 C174.415215,85.8442506 175.469341,84.1472904 176.70017,82.4472836 C177.988885,80.7472768 179.219714,78.6969102 179.396417,77.8194873 C180.100184,75.0653544 180.977607,74.8307657 184.435506,76.4728869 C186.193398,77.2924243 187.95129,77.938305 188.362582,77.938305 C188.712942,77.938305 189.066349,78.2886648 189.066349,78.6999568 C189.066349,79.0503166 189.885886,79.8119684 190.882127,80.2811459 C191.878367,80.7503234 193.109196,81.8623351 193.578374,82.6818724 C194.455797,84.1472904 194.455797,84.320947 193.109196,86.0788394 C192.112956,87.3675542 191.293419,87.8367317 190.355064,87.6600285 C189.300937,87.4833253 188.773874,87.9525028 187.893405,89.7103952 C187.247524,90.9412245 186.427987,92.1111216 186.077627,92.3457104 C185.60845,92.5802991 185.666335,92.8727734 186.193398,93.2231332 C187.539998,94.0426706 187.835519,93.869014 189.063302,91.4073554 C189.824954,89.8840518 190.644491,89.0645144 191.406143,89.0645144 C192.048977,89.0645144 192.871561,88.5374514 193.279806,87.9525028 C193.806869,87.0750799 194.218161,86.9562623 195.037699,87.3675542 C197.206883,88.540498 203.123394,86.5480169 203.123394,84.6713069 C203.123394,84.2021294 203.534686,83.793884 204.000817,83.793884 C204.466948,83.793884 205.054943,83.0901177 205.231646,82.2126949 C205.466235,81.2743399 206.520361,78.9314989 207.635419,76.8811323 C208.689546,74.8307657 209.570015,72.4879247 209.570015,71.7262729 C209.570015,70.6142613 209.862489,70.321787 210.916615,70.321787 C212.031674,70.321787 212.439919,70.7909645 212.966982,72.6067424 C213.378274,73.8375717 213.670748,75.3029898 213.670748,75.8300528 C213.670748,76.3571159 214.843692,77.9992371 216.306064,79.5225407 C217.756249,80.978819 218.929192,82.3833049 218.929192,82.6178936 C218.929192,83.0291856 221.564508,84.375786 222.444977,84.375786 C223.264514,84.375786 225.022407,80.7442302 224.845703,79.5712864 C224.729932,78.7517491 225.138178,78.5171604 226.487825,78.5171604 C228.011128,78.5171604 228.303603,78.2825716 228.303603,77.17056 C228.303603,76.4089082 228.653962,75.4705532 229.007369,75.1201934 C229.418661,74.7089014 229.769021,73.0698267 229.826906,71.4277054 C229.884792,68.8502758 230.11938,68.2653272 231.877273,66.7420236 C234.104343,64.8683602 236.212595,63.4608277 235.801303,64.280365 C235.6246,64.5149537 235.097537,65.6848509 234.570474,66.8577947 C234.043411,67.9698063 233.105056,69.3773388 232.401289,70.0232195 C231.289278,71.0194601 230.643397,75.0044223 231.697523,75.0044223 C231.932112,75.0044223 232.928352,74.1848849 233.982478,73.2465299 C236.209548,71.1382778 237.32156,71.0194601 238.494504,72.7773524 C239.667447,74.3585416 239.783218,79.6901041 238.729092,79.6901041 C237.790737,79.6901041 236.444137,82.5021226 237.147903,82.9713001 C237.967441,83.4404776 238.84791,82.6788258 239.551676,80.978819 C240.136625,79.5134009 240.197557,79.4555154 240.605802,80.567527 C240.898277,81.3870643 240.782506,81.7983563 240.19451,81.9141274 C238.790025,82.2644872 240.54487,83.7877908 242.363695,83.7877908 C243.536639,83.7877908 244.356176,84.3727394 245.52912,86.0148606 C246.348657,87.2456899 247.052423,88.5344048 247.052423,88.8847646 C247.052423,89.2351244 247.402783,89.6464164 247.871961,89.8231196 C249.218561,90.3501827 249.395264,94.9200934 248.164435,97.1471633 C246.817834,99.4900042 246.756902,100.428359 247.929846,101.366714 C248.456909,101.778006 248.691498,102.597544 248.514795,103.182492 C248.280206,103.944144 248.456909,104.294504 248.983972,104.294504 C250.038098,104.294504 251.738105,102.42084 251.738105,101.247897 C251.738105,100.720834 252.149397,100.017067 252.67646,99.5478898 C254.083993,98.374946 254.784712,99.9591817 254.376467,103.298263 C254.026107,106.34487 254.668941,108.102763 256.368948,108.687711 C256.953897,108.864415 258.303544,110.387718 259.299784,112.026793 C260.999791,114.780926 261.173448,115.307989 260.765202,118.29671 C260.411796,121.343318 260.472728,121.520021 261.350151,120.404963 C261.819328,119.759082 262.288506,118.412481 262.288506,117.416241 C262.288506,116.477886 262.699798,115.131286 263.165929,114.485405 C263.985466,113.431279 263.985466,113.431279 264.043351,114.719994 C264.043351,115.481645 264.27794,115.892937 264.6283,115.716234 C265.740312,115.012468 265.213249,116.947063 263.750877,118.939544 C262.93134,120.051556 262.285459,121.516974 262.285459,122.22074 C262.285459,122.982392 262.05087,123.744044 261.700511,123.920747 C261.408036,124.09745 261.115562,124.039565 261.115562,123.744044 C261.115562,123.159095 256.722354,123.159095 256.076474,123.744044 C255.841885,124.036518 256.076474,124.682399 256.545651,125.209462 C257.014829,125.794411 257.599777,126.967354 257.834366,127.786892 C258.011069,128.725247 258.711789,129.486899 259.415555,129.660555 C260.938859,130.071847 266.328307,129.483852 266.681713,128.898903 C266.858417,128.664315 267.620068,128.606429 268.38172,128.7222 C269.435846,128.956789 269.905024,129.483852 270.020795,130.595864 C270.136566,131.64999 270.547858,132.119167 271.367395,132.119167 C272.013276,132.177053 272.890699,132.353756 273.301991,132.64623 C274.767409,133.523653 274.648591,132.588345 272.832813,129.188331 C270.840332,125.437958 270.724561,124.61842 271.894458,123.680065 C272.302704,123.329705 272.832813,122.214647 273.067402,121.279339 C273.244105,120.283098 273.652351,119.521446 273.944825,119.521446 C274.529773,119.521446 276.991432,123.213934 277.168135,124.383832 C277.226021,124.734191 277.46061,125.437958 277.753084,125.907135 C278.103444,126.434198 277.929787,126.903376 277.341792,127.19585 C276.168848,127.841731 276.695911,129.892097 278.219215,130.711635 C278.862049,131.061994 280.15381,131.238698 281.031233,131.004109 C282.262062,130.76952 282.73124,130.946223 282.965829,131.765761 C283.0816,132.411641 284.254544,133.112361 285.95455,133.581539 C288.824454,134.401076 289.177861,134.754482 287.770328,135.92438 C287.066562,136.509328 287.008676,136.862735 287.535739,137.447683 C288.413162,138.501809 290.055284,138.501809 290.993639,137.389798 C292.224468,135.92438 293.33648,136.335672 293.33648,138.209335 C293.33648,139.555935 292.98612,140.025113 291.578587,140.552176 C290.640232,140.84465 289.820695,141.371713 289.820695,141.664187 C289.820695,142.310068 286.012436,144.125846 284.665836,144.125846 C284.138772,144.125846 282.262062,144.652909 280.565102,145.29879 C276.58014,146.822093 275.526014,146.822093 275.937306,145.29879 C276.290712,144.010075 274.88318,143.598783 274.471888,144.829612 C274.295185,145.29879 273.125287,145.472446 271.132806,145.356675 C268.555377,145.240904 267.909496,145.414561 267.147844,146.410801 C266.270421,147.699516 264.393711,148.052923 263.750877,147.056682 C263.516288,146.706322 262.462162,146.937865 261.057676,147.641631 C259.768962,148.345397 258.480247,148.695757 258.187772,148.519054 C257.837413,148.34235 257.602824,148.461168 257.602824,148.753642 C257.602824,149.104002 257.252464,149.399523 256.783287,149.399523 C256.314109,149.399523 255.844932,149.634112 255.72916,149.926586 C255.671275,150.21906 254.440446,150.630352 253.093845,150.864941 C250.985593,151.215301 250.574301,151.09953 250.574301,150.337878 C250.574301,149.518341 249.696878,149.399523 244.831447,149.399523 C241.669068,149.399523 238.854003,149.576226 238.619415,149.810815 C238.211169,150.279993 230.945011,151.803296 228.483352,151.976953 C227.310409,152.034838 227.310409,152.092724 228.132993,153.088964 C229.010415,154.027319 229.010415,154.200976 227.779586,155.489691 C226.72546,156.601703 226.021694,156.836291 224.263801,156.601703 C222.740498,156.367114 221.863075,156.601703 221.332965,157.247583 C220.275793,158.548484 218.929192,158.432713 218.929192,157.143999 Z M200.180372,144.722981 C200.649549,144.430507 200.823206,144.019215 200.591664,143.784626 C200.357075,143.550037 199.714241,143.784626 199.184131,144.311689 C198.130005,145.365815 198.714954,145.658289 200.180372,144.722981 Z M160.105301,137.514708 C159.578238,136.810942 158.7587,135.641045 158.231637,134.937279 C157.177511,133.413975 157.527871,132.594438 159.520352,131.832786 C160.574478,131.421494 160.924838,130.836546 160.924838,129.429013 C160.924838,127.963595 160.748135,127.729006 160.163186,128.256069 C159.10906,129.075607 158.581997,128.490658 158.581997,126.498177 C158.581997,124.682399 157.820345,124.036518 155.651161,123.80193 C154.831624,123.744044 153.424091,123.567341 152.427851,123.45157 C150.904547,123.274867 150.612073,123.45157 149.966192,125.325233 C149.088769,127.844777 149.027837,128.313955 149.673718,128.313955 C149.966192,128.313955 150.612073,127.3756 151.139136,126.263588 C151.666199,125.151577 152.485736,124.213222 152.954914,124.213222 C154.301514,124.213222 156.23611,129.075607 155.824818,131.537265 C155.532343,133.237272 155.824818,133.998924 157.698481,136.457536 C158.92931,138.099657 160.16014,139.269554 160.452614,139.092851 C160.751181,138.922241 160.574478,138.160589 160.105301,137.514708 Z M164.148149,130.659842 C163.971445,130.367368 163.270726,130.074894 162.624845,130.074894 C161.978964,130.074894 161.628604,130.367368 161.805308,130.659842 C161.982011,131.010202 162.68273,131.244791 163.328611,131.244791 C163.971445,131.247838 164.324852,131.013249 164.148149,130.659842 Z M247.052423,103.709555 C247.052423,102.42084 246.641131,102.244137 245.352416,103.063674 C244.414061,103.648623 245.002057,104.879465 246.229839,104.879465 C246.699017,104.882499 247.052423,104.355436 247.052423,103.709555 Z" id="Shape" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M56.6364276,156.440232 C56.6364276,155.501877 56.2251356,155.267289 54.4672432,155.267289 C52.0665168,155.209403 49.4860405,153.859756 50.893573,153.332693 C51.304865,153.213875 51.4206361,152.863515 51.1860473,152.571041 C50.9514586,152.336452 49.955218,152.571041 49.0777951,153.098104 C48.1394401,153.625167 46.5003655,154.094345 45.3853072,154.094345 C43.6853004,154.094345 43.3349406,153.743985 42.3965856,151.809389 C41.400345,149.640205 41.5191627,147.650771 42.6890599,147.650771 C42.9815342,147.650771 43.9777747,148.062063 44.9161297,148.528193 C46.4394333,149.347731 46.6161365,149.347731 46.3236622,148.528193 C46.0890735,147.943245 46.3236622,147.650771 47.2010851,147.650771 C48.6665032,147.650771 48.8432064,146.65453 47.4356739,146.30417 C46.7319076,146.127467 46.9664964,145.892878 48.3130967,145.600404 C49.3093373,145.365815 50.1867602,144.954523 50.1867602,144.662049 C50.1867602,144.369575 51.3597039,144.250757 52.8220754,144.369575 C54.2874934,144.485346 55.4573906,144.311689 55.4573906,144.0771 C55.4573906,143.784626 55.2228018,143.550037 54.9303275,143.550037 C54.6378532,143.550037 54.5190356,143.022974 54.6957388,142.377094 C54.9882131,141.20415 54.2844468,140.795904 53.4649095,141.615442 C52.8799609,142.20039 46.6100433,144.134986 45.2634429,144.134986 C44.6175622,144.134986 43.6213217,144.604163 42.9784876,145.189112 C42.1010647,145.892878 41.7476583,146.008649 41.570955,145.481586 C41.1596631,144.42746 39.0514109,144.543231 39.0514109,145.600404 C39.0514109,146.419941 38.8747077,146.419941 37.7626961,145.658289 C36.1236214,144.604163 30.4965379,144.780867 22.6454312,146.185353 C16.1409249,147.297364 16.9025767,147.297364 12.0980771,146.30417 C7.35146314,145.365815 7.00110331,144.019215 11.1597221,142.672614 C12.2717337,142.38014 12.2138482,142.322255 10.9830189,141.3839 C10.105596,140.798951 9.45971531,140.680133 9.10935548,141.03354 C8.64017798,141.502717 3.83567845,140.506477 2.8394379,139.686939 C2.72366682,139.629054 3.36650094,138.867402 4.18603827,138.047865 C5.29804989,136.935853 6.29429044,136.524561 8.11006833,136.524561 C10.1025494,136.524561 10.3950237,136.40879 9.81007513,135.705024 C9.39878316,135.235846 7.7597085,134.53208 6.11758723,134.18172 C2.65968807,133.477954 1.54767645,132.716302 1.54767645,131.192999 C1.54767645,129.026861 5.17923221,124.161429 5.88299847,125.334373 C6.35217598,126.038139 8.57924583,126.272728 8.57924583,125.626847 C8.57924583,124.280247 5.70934186,121.056936 3.24768326,119.710336 C-0.325986969,117.659969 -1.08763876,116.313369 1.72437967,116.898318 C2.72062022,117.132906 3.83263184,117.544198 4.18603827,117.836673 C4.47851256,118.129147 5.0055756,118.363736 5.41686757,118.363736 C5.7672274,118.363736 7.35146314,119.594565 8.93265227,121.175754 C12.6830257,124.749424 14.4988036,126.156957 14.8491634,125.745665 C15.0258666,125.568962 14.7303457,124.749424 14.2032827,123.929887 C13.0303389,122.171995 13.4995164,122.114109 17.0731867,123.695298 C19.7085019,124.868242 19.8273196,124.984013 19.4769597,126.857677 C19.1265999,128.673454 19.242371,128.850158 20.9423778,129.200517 C22.3499103,129.550877 23.05063,129.316289 24.2814593,128.204277 C25.1588821,127.442625 26.5664147,126.446385 27.5047697,125.977207 C28.4431247,125.50803 29.3205475,124.453903 29.6130218,123.399777 C29.9054961,122.403537 30.1979704,122.053177 30.1979704,122.638126 C30.255856,123.165189 30.4904447,123.634366 30.782919,123.634366 C31.7791595,123.634366 32.1904515,115.079493 31.6603419,106.000604 L31.309982,100.376567 L33.1257599,98.2683147 C34.179886,97.1563031 35.4107153,94.9292333 35.9377784,93.3480441 C36.4648414,91.8247405 37.1686077,90.1247337 37.576853,89.6555562 C37.9850984,89.1863787 38.4542759,88.3089559 38.6309791,87.7818928 C38.8655679,87.1969442 39.4505164,86.7277667 39.9196939,86.7277667 C40.6813457,86.7277667 40.7971168,87.0781266 40.5046425,88.6623623 L40.0933506,90.5360257 L42.1437172,88.1931848 C43.316661,86.9044699 44.2519694,85.3811663 44.3129015,84.7962178 C44.370787,81.9841993 45.8940906,79.9917182 48.7670412,78.9375922 C50.3482303,78.4105291 52.3407114,77.9413516 53.2211809,77.9413516 C54.2174215,77.9413516 55.0369588,77.5300596 55.4482508,76.82934 C55.7407251,76.1865059 56.7948511,75.5406251 57.7910917,75.3060364 C58.7294467,75.0714476 60.0760471,74.2519103 60.7219278,73.432373 C62.7722944,70.8549433 65.5264273,69.0970509 66.4038502,69.8008172 C66.9887988,70.3278803 67.2812731,70.0932915 67.7504506,68.8624622 C68.3963313,67.1624554 68.0429249,64.8775 66.75421,62.945951 C65.5233807,61.0113555 66.3429181,55.8564961 67.9271538,55.3294331 C69.0391654,54.9790733 69.0391654,54.8602556 68.1617425,54.2174215 C66.6963245,53.1632954 66.9309132,51.1708143 68.63092,50.0588027 C69.4504574,49.5317396 70.0963381,48.7122023 70.0963381,48.2430248 C70.0963381,46.9543099 72.3812935,43.9655883 73.3196485,43.9655883 C74.9008376,43.9655883 75.8391926,40.8610956 75.8970782,35.529533 C75.8970782,32.659629 76.0737814,30.1979704 76.1895525,30.0212672 C76.3662557,29.9054961 76.1316669,29.0829122 75.720375,28.2054893 C74.5474312,25.9205339 74.1391858,20.5310858 75.1354264,20.5310858 C76.247438,20.5310858 76.1895525,18.3619015 75.0166087,17.9536561 C74.5474312,17.7769529 74.3128424,17.3077754 74.4895457,17.0153011 C74.7241344,16.6618947 74.9587232,14.907049 75.1354264,13.0303389 C75.4857862,7.40630207 75.720375,6.2333583 76.7745011,4.12510613 C78.1211014,1.48979091 79.9368793,0.082258394 81.9902926,0.0243728575 C83.9827737,0.0243728575 83.9827737,0.435664827 82.0481781,2.42509932 C80.58276,3.94840291 80.5248745,4.18299166 81.2286408,5.88299847 C81.6399327,6.87923902 82.4015845,7.93336511 82.9286476,8.2258394 C83.6902994,8.63713137 83.7481849,8.92960566 83.1053508,9.98373174 C82.5782877,10.8611546 82.5204022,11.5070353 83.0474652,12.3844582 C83.3978251,13.0882245 83.5745283,14.3769393 83.4587572,15.2543622 C83.282054,16.3663738 83.5166428,17.0701401 84.2782945,17.5393176 C84.8632431,17.8896774 85.3324206,18.5355581 85.3324206,19.0047356 C85.3324206,19.4160276 86.0361869,19.9430906 86.9714953,20.1167472 C89.7835137,20.762628 90.2526912,21.3475765 89.548925,23.3979432 C88.9030443,25.1558355 88.9639764,25.2137211 90.48728,25.2137211 C91.7759948,25.2137211 92.5955322,25.8565552 94.295539,28.1445572 C95.4684827,29.7257463 96.4647233,31.6603419 96.4647233,32.3641081 C96.5226088,34.1220005 98.3383867,36.2302526 100.449685,36.9919044 C102.323349,37.6377852 102.911344,39.1610888 103.203818,43.7309995 C103.319589,45.3121887 103.849699,46.6009035 104.842893,47.7159617 C107.773729,50.87834 108.827855,57.7362528 106.366197,57.7362528 C105.897019,57.7362528 104.785008,58.1475447 103.788767,58.6746078 C102.850412,59.2016708 100.800045,59.7866194 99.2767417,60.0212081 C97.7534381,60.2557969 96.3459056,60.6670889 96.172249,61.0174487 C95.9376602,61.309923 95.2948261,61.5445117 94.6489454,61.5445117 C93.8294081,61.5445117 93.5369338,61.9558037 93.5369338,63.1835864 C93.5369338,65.5264273 92.0136302,67.4031374 90.0790346,67.4031374 C88.4978455,67.4031374 86.5053644,68.9264409 86.5053644,70.1572702 C86.5053644,70.918922 82.0512247,72.9692887 80.6467388,72.8535176 C80.0617902,72.7956321 78.8888464,73.3805806 78.1271946,74.0843469 C77.0730686,75.0227019 76.4271878,75.2572907 76.0189425,74.8459987 C75.6076505,74.4347067 75.1994051,74.4347067 74.61141,74.9038842 C73.9655292,75.4309473 73.2648096,75.138473 71.330214,73.4963517 C68.9873731,71.4459851 68.8106699,71.3880996 68.0490181,72.4422256 C67.2873663,73.4963517 67.2294807,73.4963517 66.1753547,72.5001112 C65.5325205,71.9730481 64.8866398,71.5038706 64.6520511,71.5038706 C64.4753478,71.5038706 64.2407591,73.0271742 64.124988,74.9008376 C63.9482848,78.2399191 63.9482848,78.2399191 61.7242616,78.7669822 C60.0242548,79.1782741 59.6160094,79.5286339 59.9084837,80.2324002 C60.1430724,80.7594633 60.4355467,81.8745215 60.5543644,82.6940588 C60.7889532,84.0406592 60.6701355,84.2173624 58.9731753,84.2752479 C57.5656428,84.2752479 57.0385797,83.9827737 56.6303343,82.8677154 C56.0453858,81.3444118 54.4032645,80.994052 53.2333673,82.1639492 C52.8220754,82.5721945 52.5296011,84.5646756 52.5296011,87.0842198 C52.5296011,91.2428386 52.5296011,91.3037707 54.345379,92.0654225 C55.810797,92.6503711 56.5724488,92.6503711 57.9769347,92.123308 C59.207764,91.6541305 60.0273014,91.6541305 60.3776612,92.007537 C60.728021,92.3578968 61.9588503,92.5924856 63.1896796,92.5924856 C65.2400463,92.5924856 65.474635,92.4157823 65.8249948,90.8345932 C66.001698,89.8383527 66.5866466,88.7842266 67.1137097,88.5496378 C67.8753615,88.0804603 68.0520647,88.3150491 67.9911325,89.8383527 C67.933247,90.8924787 67.6986583,92.2390791 67.406184,92.8270743 C66.8212354,94.3503779 68.1678358,96.6353333 70.3949056,97.8661626 C71.3911462,98.4511112 72.0949124,99.3315806 72.0949124,99.8586437 C72.0370269,100.385707 72.3295012,100.796999 72.7407931,100.796999 C73.091153,100.796999 73.7949192,101.851125 74.2062112,103.081954 C74.7332742,104.724075 75.4370405,105.601498 76.6678698,106.128561 C77.8986991,106.597739 78.2490589,107.066916 78.0144702,107.886454 C77.6031782,109.059397 79.303185,110.405998 82.0573179,111.109764 C83.3460328,111.402238 83.638507,111.344353 83.2881472,110.81729 C83.0535585,110.348112 83.638507,110.46693 84.8114508,111.109764 C86.6851142,112.048119 86.7460464,112.106005 85.4573315,112.575182 C83.8761424,113.160131 83.7573247,114.860137 85.2806283,115.271429 C86.0422801,115.448133 86.2768689,115.914264 86.0422801,116.736847 C85.8655769,117.556385 85.9843946,117.848859 86.3926399,117.556385 C86.7429998,117.321796 87.858058,117.556385 88.7933664,118.083448 C89.7896069,118.552625 90.6670298,118.960871 90.9016186,118.960871 C91.6632704,118.960871 91.0783218,117.553338 89.6129037,115.798492 L88.0896001,113.982715 L89.6129037,113.806011 C90.4903266,113.69024 91.1940929,113.394719 91.1940929,113.160131 C91.1940929,112.867656 91.8399736,112.51425 92.6595109,112.398479 C93.9482258,112.106005 94.124929,112.221776 93.7715225,113.336834 C93.5369338,113.982715 93.0098707,115.094726 92.5985788,115.73756 C92.1294013,116.383441 91.7790414,118.141333 91.7790414,119.722523 C91.7790414,121.949592 91.6023382,122.534541 90.9595041,122.299952 C90.0211491,121.88866 88.2053712,124.292433 87.9707825,126.223982 C87.6204226,129.093886 85.3354672,132.140493 85.3354672,129.739767 C85.3354672,129.093886 84.8662897,128.92023 83.7542781,129.036001 C82.4076777,129.151772 82.0542713,129.505178 81.9385002,131.086367 C81.761797,132.667556 81.4114372,133.078848 79.1264818,133.956271 C77.5452927,134.54122 76.2565778,134.717923 75.9610569,134.425449 C75.2572907,133.721683 74.2610501,127.159291 74.6723421,126.105165 C74.9069308,125.459284 74.6144566,125.343513 73.5603305,125.693873 C72.7407931,125.870576 72.4483189,125.870576 72.8565642,125.575055 C73.3836273,125.163763 73.3836273,124.578814 72.7986787,122.878808 C71.7445526,119.774315 71.4520783,119.713383 70.6904265,122.40963 C70.1633635,124.344226 69.8130036,124.810357 68.6400599,124.810357 C65.5934527,124.810357 61.2002451,128.968975 62.2543712,130.845685 C63.1317941,132.368989 67.8205225,137.115603 68.4664033,137.115603 C68.7588776,137.115603 68.9355808,137.465963 68.7588776,137.93514 C68.5242888,138.520089 69.2280551,138.989266 71.2784217,139.458444 C73.9137369,140.104325 74.0904401,140.277981 74.3250289,142.154691 C74.5017321,143.562224 74.2671433,144.381761 73.6791482,144.790006 C73.0332674,145.201298 73.6791482,145.259184 75.7874003,145.082481 C79.1264818,144.790006 81.5302549,143.09 81.0031918,141.332107 C80.8264886,140.805044 79.714477,139.808804 78.4836477,139.162923 C75.7874003,137.697505 75.7295148,136.877968 78.3069445,136.643379 C79.4189561,136.524561 81.2956661,135.647138 82.4655633,134.708783 C83.638507,133.770428 84.9272219,133.008776 85.2196962,133.008776 C86.1580512,133.008776 86.6851142,135.235846 86.2159367,137.520802 C85.8655769,139.571168 85.8655769,139.571168 87.1542917,138.632813 C88.385121,137.813276 88.5008921,137.813276 89.2046584,139.217762 C90.2587845,141.152357 89.7317214,142.206484 87.3309949,142.968135 C85.7498058,143.495198 85.3963994,143.845558 85.9234624,144.433553 C86.919703,145.606497 85.3963994,147.656864 83.5806215,147.656864 C82.7031986,147.656864 81.7648436,148.183927 81.3535517,148.829808 C80.7686031,149.826048 80.24154,150.002751 78.6573043,149.70723 C77.1918862,149.414756 76.6069377,149.530527 76.3723489,150.234293 C76.0798746,150.93806 75.6685826,151.053831 74.4986855,150.584653 C73.3257417,150.173361 73.0332674,150.234293 73.0332674,150.877128 C73.0332674,152.28466 71.4520783,151.873368 70.1633635,150.231247 C68.2897,147.83052 68.6979454,145.076388 70.9250153,145.015455 C72.0370269,145.015455 71.8633703,143.726741 70.632541,142.614729 C69.4017117,141.502717 69.3438261,141.502717 69.7551181,142.672614 C69.9897069,143.492152 69.5205293,144.488392 67.9972258,146.069581 C65.0085041,149.235006 63.427315,148.704897 64.4814411,145.015455 C64.7160298,144.369575 64.5972121,143.434266 64.2468523,142.965089 C63.7197893,142.203437 63.5430861,142.203437 63.016023,143.141792 C62.4310744,144.138033 62.3122567,144.138033 60.9656564,143.26061 C59.7348271,142.498958 59.2656496,142.441072 57.9769347,143.083906 C55.6919793,144.195918 55.5152837,145.368862 57.742346,144.95757 C59.2656496,144.665096 59.5581239,144.780867 59.5581239,145.661336 C59.5581239,146.365102 60.4964789,147.361343 61.7851937,148.18088 C63.6009716,149.292892 64.0122636,149.823002 63.7776748,150.935013 C63.5430861,152.165842 63.1927262,152.342546 60.7889532,152.342546 C59.1468319,152.342546 57.3919861,151.873368 56.2190424,151.169602 C55.1649163,150.523721 54.2844468,150.292179 54.2844468,150.584653 C54.2844468,150.935013 53.7573838,151.169602 53.1115031,151.169602 C52.4656223,151.169602 51.9385593,151.580894 51.9385593,152.047025 C51.9385593,152.631973 52.5235079,152.924448 53.6385661,152.924448 C54.5769211,152.924448 56.392699,153.274807 57.6814138,153.743985 C59.0889463,154.271048 61.0204953,154.447751 62.4859134,154.271048 C64.8896864,153.920688 64.947572,153.978574 64.53628,155.325174 C63.8903993,157.317655 63.8903993,157.317655 61.6054439,156.263529 C58.9091965,154.974814 58.3821335,155.0327 58.3821335,156.440232 C58.3821335,157.086113 57.9708415,157.613176 57.5047106,157.613176 C57.0385797,157.613176 56.6364276,157.083066 56.6364276,156.440232 Z M59.859738,150.581607 C59.5672637,149.704184 59.7439669,149.408663 60.5056187,149.408663 C61.2672705,149.408663 61.325156,149.23196 60.7402074,148.53124 C59.8627846,147.477114 58.3973665,147.358296 58.3973665,148.415469 C58.3973665,149.880887 59.1590183,151.75455 59.6860814,151.75455 C59.9785556,151.751504 60.0364412,151.224441 59.859738,150.581607 Z M39.9989057,90.9381779 C39.4718427,90.4690003 38.4756021,91.5231264 38.4756021,92.4614814 C38.5334877,93.3389043 38.5913732,93.3389043 39.353025,92.3457104 C39.8222025,91.6998297 40.1146768,91.1118345 39.9989057,90.9381779 Z" id="Shape" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M188.697709,155.209403 C185.124039,154.097391 184.243569,153.33574 182.193203,149.466548 C181.139077,147.592885 181.196962,147.474067 183.131558,146.30417 C185.297696,145.073341 185.885691,145.834993 184.654861,148.177834 C183.481918,150.520675 183.54285,150.813149 185.416513,151.574801 C186.293936,151.92516 187.643583,152.628927 188.46312,153.15599 C189.282658,153.625167 190.632305,154.15223 191.451842,154.328934 C193.033031,154.679293 194.321746,156.498118 192.975146,156.3793 C192.563854,156.382347 190.629258,155.855284 188.697709,155.209403 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M248.399024,156.02894 C246.406542,155.678581 246.759949,154.271048 248.868201,153.862803 C251.153156,153.451511 252.67646,154.389866 251.68022,155.620695 C250.976453,156.440232 250.741865,156.498118 248.399024,156.02894 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M121.788122,140.326727 C121.142241,139.565075 121.203174,139.449304 122.022711,139.449304 C122.726477,139.449304 122.842248,139.272601 122.373071,138.687652 C121.261059,137.341052 123.6039,135.933519 126.415919,136.168108 C129.40464,136.460582 129.639229,136.753057 128.935463,138.745538 C128.466285,140.092138 128.05804,140.326727 126.239215,140.326727 C125.066272,140.326727 123.896374,140.50343 123.661786,140.795904 C123.076837,141.380853 122.668592,141.265082 121.788122,140.326727 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M69.9958001,136.518468 C68.8837884,135.229753 69.5845081,134.410216 71.1687438,135.110935 C71.6958069,135.345524 72.6920474,135.461295 73.3379281,135.345524 C74.5108719,135.226706 74.5108719,135.226706 73.3958137,136.457536 C71.9882812,137.983886 71.2266294,137.983886 69.9958001,136.518468 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M137.139976,129.605716 C136.789616,129.371127 136.378324,128.198184 136.201621,126.970401 C136.024918,125.270394 136.201621,124.569675 137.021158,124.158383 C138.13317,123.573434 137.840695,121.873427 136.551981,121.873427 C135.55574,121.873427 135.55574,121.815542 136.317392,119.880946 C136.786569,118.650117 136.728684,118.357643 135.9061,118.357643 C135.379037,118.357643 135.086563,118.180939 135.260219,118.007283 C135.494808,117.830579 136.841408,117.891512 138.306826,118.065168 C140.357193,118.415528 141.003074,118.711049 141.003074,119.588472 C141.003074,120.17342 141.237662,120.761416 141.530137,120.996004 C141.822611,121.172708 141.179777,122.988485 140.122604,125.038852 C138.715072,127.792985 138.364712,128.962882 138.833889,129.43206 C139.598588,130.190665 138.194102,130.367368 137.139976,129.605716 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M132.685836,123.570387 C131.104647,122.692965 131.339236,120.700483 133.036196,120.700483 C134.148208,120.700483 134.501614,121.050843 134.675271,122.458376 C134.970791,124.332039 134.443728,124.62756 132.685836,123.570387 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M262.870408,111.737365 C262.870408,111.326073 262.693704,110.44865 262.520048,109.80277 C262.227574,108.690758 262.40123,108.514055 264.043351,108.690758 C265.682426,108.806529 266.913255,109.686998 266.974188,110.79901 C266.974188,110.975713 266.035833,111.383959 264.923821,111.737365 C263.397471,112.206543 262.870408,112.206543 262.870408,111.737365 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M263.455356,105.232859 C263.455356,102.947903 263.220768,102.536611 261.228286,101.132125 C259.997457,100.312588 258.592971,99.6088219 258.062862,99.6088219 C256.832032,99.6088219 255.954609,98.3201071 256.889918,97.9697472 C257.886158,97.6772729 257.767341,96.6810324 256.655329,96.6810324 C256.186152,96.6810324 255.951563,96.3885581 256.128266,96.0351517 C256.42074,95.6238597 256.889918,95.8005629 257.65157,96.4464436 C258.236518,96.9735067 259.232759,97.4426842 259.759822,97.5005697 C260.34477,97.5584553 261.810188,98.0855183 263.041018,98.731399 C265.383859,99.9043428 265.502676,100.312588 264.856796,105.117088 C264.393711,108.514055 263.455356,108.629826 263.455356,105.232859 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M161.978964,99.7855251 C162.390256,99.6088219 162.917319,99.669754 163.090976,99.8434107 C163.325565,100.020114 162.975205,100.19377 162.329324,100.135885 C161.68649,100.135885 161.512833,99.9591817 161.978964,99.7855251 Z" id="Path" fill="#000000"/>                <path d="M248.341138,87.772753 C247.871961,87.3035755 247.871961,86.7765124 248.283253,86.0148606 C249.044904,84.6073281 249.983259,85.1953233 249.983259,87.0689867 C249.980213,88.5953369 249.45315,88.8878112 248.341138,87.772753 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M68.941674,87.3035755 C68.941674,87.0111012 69.2341483,86.7186269 69.5266226,86.7186269 C69.8769824,86.7186269 70.1115711,87.0111012 70.1115711,87.3035755 C70.1115711,87.6539353 69.8769824,87.8885241 69.5266226,87.8885241 C69.2341483,87.8915707 68.941674,87.6569819 68.941674,87.3035755 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M71.5769892,87.3035755 C71.7536924,87.0111012 72.2228699,86.7186269 72.5153442,86.7186269 C72.865704,86.7186269 72.9266362,87.0111012 72.749933,87.3035755 C72.5732297,87.6539353 72.1040522,87.8885241 71.8115779,87.8885241 C71.4612181,87.8915707 71.4033326,87.6569819 71.5769892,87.3035755 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M73.6273558,86.0148606 C73.6273558,85.0186201 75.735608,83.964494 76.3814887,84.6073281 C76.6160775,84.7840313 76.3814887,84.957688 75.9701968,84.957688 C75.5589048,84.957688 74.8581851,85.4268655 74.4468932,86.011814 C73.7461735,86.9532157 73.688288,86.9532157 73.6273558,86.0148606 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M63.6679969,85.0186201 C63.6679969,84.6682603 64.5454198,84.6073281 65.6025925,84.7840313 C67.010125,85.0186201 67.7717768,84.7840313 68.5913142,83.8456763 C69.2371949,83.1419101 70.407092,82.614847 71.3454471,82.614847 C72.5183908,82.614847 72.9266362,82.3802583 72.6920474,81.7953097 C72.3416876,80.8569547 74.0965333,80.2720061 76.2078321,80.6832981 C77.4386614,80.9178868 77.6153646,81.1524756 77.085255,81.7953097 C76.7348952,82.2644872 75.7386546,82.614847 74.9770028,82.614847 C74.1574655,82.614847 72.749933,83.2607277 71.7536924,84.0802651 C70.3461599,85.2532088 69.352966,85.5457125 66.8334218,85.5457125 C65.0755295,85.5487297 63.6679969,85.314141 63.6679969,85.0186201 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M249.395264,80.9178868 C249.395264,80.3329382 249.806556,79.5134009 250.272687,79.1021089 C251.034339,78.4562282 251.326813,78.5171604 252.030579,79.4524688 C253.37718,81.2103611 253.084705,82.029922 251.153156,82.029922 C249.803509,82.0329451 249.395264,81.7404708 249.395264,80.9178868 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M68.3567254,80.8600013 C68.3567254,80.567527 68.8837884,80.2750527 69.5875547,80.2750527 C70.2334354,80.2750527 70.5837953,80.567527 70.407092,80.8600013 C70.2303888,81.2103611 69.6454402,81.4449499 69.1762627,81.4449499 C68.7070852,81.4449499 68.3567254,81.2103611 68.3567254,80.8600013 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M78.9010329,80.5096415 C78.9010329,79.9825784 79.1935072,79.6901041 79.6047991,79.8058752 C80.6589252,80.156235 80.8356284,81.4449499 79.8393879,81.4449499 C79.3123248,81.4449499 78.9010329,81.0367045 78.9010329,80.5096415 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M119.033989,79.1021089 C118.857286,78.8096347 118.976104,78.5171604 119.268578,78.5171604 C119.618938,78.5171604 119.914459,78.8096347 119.914459,79.1021089 C119.914459,79.4524688 119.798688,79.6870575 119.67987,79.6870575 C119.503167,79.6901041 119.210693,79.4555154 119.033989,79.1021089 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M254.668941,76.232205 C254.668941,75.6472564 254.141878,75.0013757 253.495997,74.8277191 C252.850117,74.6510158 252.323054,74.2427705 252.323054,73.9502962 C252.323054,73.5968898 252.908002,73.4811187 253.611768,73.7157074 C254.608009,73.9502962 254.784712,73.8314785 254.489191,73.0698267 C254.077899,72.0157006 254.958369,71.6622942 255.543317,72.6585347 C255.720021,73.0088946 256.42074,73.2434833 257.066621,73.2434833 C258.355336,73.2434833 258.589925,74.2976094 257.30121,74.7667869 C256.832032,74.9434901 256.304969,75.5863243 256.128266,76.232205 C255.665182,77.6366909 254.668941,77.697623 254.668941,76.232205 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M214.066807,71.1352312 C213.832218,70.9006424 213.655515,70.1389906 213.655515,69.4961565 C213.655515,68.3841449 213.713401,68.3841449 214.651756,69.3194533 C215.355522,69.965334 215.471293,70.492397 215.063048,70.9006424 C214.709641,71.2510022 214.298349,71.3119344 214.066807,71.1352312 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M245.059942,67.5036754 C244.825353,66.9187268 243.655456,65.8615541 242.424627,65.1608345 C241.193798,64.4570682 240.0239,63.4608277 239.789312,62.9916501 C239.085545,61.0570546 242.543445,57.4254988 245.17876,57.4254988 C246.175,57.4254988 247.640418,60.9412835 247.640418,63.2841244 C247.640418,64.280365 247.990778,65.5690798 248.40207,66.2149606 C248.987019,67.2112011 248.929133,67.5036754 248.225367,67.9728529 C246.817834,68.8502758 245.410302,68.6735725 245.059942,67.5036754 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M227.130659,67.0314513 C227.130659,66.6232059 228.184785,65.2156734 229.4735,63.9269586 C230.762215,62.6382437 231.816341,61.1149401 231.816341,60.4111739 C231.816341,59.4149333 234.509541,56.8375036 235.6246,56.8375036 C235.859188,56.8375036 235.917074,57.7758586 235.740371,58.8878703 C235.158469,62.5803582 227.130659,70.1389906 227.130659,67.0314513 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M249.395264,62.1690662 C248.691498,60.7645803 248.633612,58.595396 249.337379,57.5412699 C249.687738,56.9563213 249.922327,57.0720924 250.156916,58.0683329 C250.44939,59.1803446 250.626093,59.2412767 251.445631,58.595396 C252.618575,57.5991554 253.145638,58.184104 252.383986,59.6495221 C251.564448,61.2307112 251.564448,61.5231855 252.618575,61.5231855 C253.965175,61.5231855 253.672701,62.519426 252.207283,62.9276714 C250.214801,63.4608277 250.09903,63.3998955 249.395264,62.1690662 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M258.181679,62.7570614 C258.181679,62.0532951 259.412509,61.6450498 260.701223,61.9954096 C262.340298,62.4067016 261.874167,63.2841244 259.939572,63.2841244 C259.004263,63.2841244 258.181679,63.0495357 258.181679,62.7570614 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M263.104996,60.8803514 C262.928293,60.5299915 262.108756,60.4111739 261.40499,60.5878771 C260.643338,60.7645803 259.823801,60.7036482 259.647097,60.3532883 C259.470394,60.060814 259.762868,59.7683397 260.350864,59.7683397 C261.932053,59.7104542 266.093718,56.663847 266.267375,55.3142 C266.444078,54.0254852 271.187645,52.1518218 271.541052,53.2638334 C271.833526,54.2021884 273.768122,54.0254852 274.587659,53.0292447 C274.998951,52.5600671 275.526014,52.1518218 275.760603,52.1518218 C276.698958,52.1518218 275.583899,54.4367772 273.944825,55.9021952 C273.00647,56.7796181 272.244818,57.7179731 272.244818,58.0104474 C272.244818,58.3608072 271.952344,58.595396 271.601984,58.595396 C271.30951,58.595396 270.020795,59.2382301 268.847851,60.060814 C266.620781,61.5841176 263.805716,61.9954096 263.104996,60.8803514 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M236.505069,55.5487888 C236.505069,54.6104338 244.941124,52.2097073 245.644891,52.9134736 C246.290771,53.5563077 244.471947,54.8480691 242.363695,55.2563145 C241.251683,55.4330177 239.432859,55.7833776 238.439665,56.0179663 C236.974247,56.3104406 236.505069,56.1946695 236.505069,55.5487888 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M268.729033,48.7548548 C268.729033,47.5240255 268.378674,46.0586074 267.967382,45.4736588 C267.263615,44.4774183 267.147844,44.4774183 265.332066,45.5315444 C263.2817,46.7044881 262.928293,47.6976821 264.454643,48.2856773 C266.212536,48.9894435 264.101237,49.8089809 260.70427,49.8089809 C258.419315,49.8089809 257.599777,49.5743921 257.599777,48.9894435 C257.599777,48.520266 256.838125,47.993203 255.89977,47.7586142 C253.965175,47.3473223 253.145638,46.5856705 252.795278,44.8277781 C252.679507,44.1240119 252.091511,43.6548343 251.448677,43.5969488 C248.517841,43.4202456 248.225367,43.3044745 248.225367,42.1924629 C248.225367,41.4308111 247.932893,41.1383368 247.40583,41.3729256 C246.820881,41.6075143 246.232886,41.0225657 245.705823,39.6729188 C245.120874,38.3263184 244.29829,37.5037344 243.30205,37.2691457 C241.778746,36.9187859 241.778746,36.7999682 242.190038,33.5187722 C242.366741,31.7029944 242.540398,28.9488615 242.540398,27.4255579 C242.540398,25.198488 242.774987,24.671425 243.713342,24.3789507 C244.359222,24.2022475 245.647937,24.4977684 246.52536,24.9638993 C247.402783,25.3751912 248.517841,25.7834366 248.987019,25.7834366 C249.456196,25.7834366 250.626093,26.1947286 251.506563,26.6608595 C252.444918,27.130037 254.318581,27.5382823 255.668228,27.5382823 C257.837413,27.5382823 258.245658,27.3036936 259.065195,25.78039 C259.711076,24.4916752 260.411796,24.0224977 261.465922,24.0224977 C262.812522,24.0224977 262.989225,23.7879089 262.754637,22.5570796 C262.520048,21.3841358 262.754637,21.033776 264.220055,20.506713 C266.797484,19.6292901 270.020795,19.8029467 271.367395,20.9758905 C272.890699,22.2646053 275.87942,26.6578129 276.875661,29.1194715 C277.929787,31.7547867 276.991432,37.4976412 275.468128,37.4976412 C274.529773,37.4976412 274.00271,38.7863561 274.00271,40.9524938 C274.00271,41.8299166 273.768122,42.7682717 273.475647,43.1216781 C272.537292,43.999101 269.901977,49.2148925 269.901977,50.1532475 C269.901977,50.5645394 269.667388,50.9728126 269.317029,50.9728126 C269.021508,50.978878 268.729033,49.9826375 268.729033,48.7548548 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M183.774392,48.2856773 C183.424032,47.2894367 182.366859,45.8849508 181.431551,45.1811845 C180.084951,44.2428295 179.673659,43.4232922 179.673659,42.0188063 C179.673659,40.9646802 179.557888,39.0879702 179.381184,37.7992553 C178.969892,34.8684192 179.496955,33.9909964 181.489437,34.4022883 C183.189443,34.6947626 183.424032,35.2797112 185.181925,43.2496356 C185.885691,46.4150605 185.885691,47.2345978 185.181925,48.5233126 L184.420273,50.1045018 L183.774392,48.2856773 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M294.509423,24.3210652 C294.509423,23.3248246 294.216949,22.212813 293.805657,21.801521 C293.33648,21.3323435 293.33648,20.9240981 293.863543,20.2782174 C294.271788,19.8090399 294.390606,19.1052737 294.156017,18.6970283 C293.921428,18.2887829 294.037199,18.1120797 294.564262,18.2887829 C295.03344,18.404554 295.737206,19.342909 296.206384,20.281264 C296.675561,21.219619 297.379327,22.2158596 297.845458,22.4504483 C299.018402,23.1542146 298.783813,24.0316375 297.376281,24.0316375 C296.672514,24.0316375 295.734159,24.500815 295.325914,25.0857636 C294.625194,25.9631864 294.567309,25.9053009 294.509423,24.3210652 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M287.770328,15.1233581 C284.431247,11.6654589 284.373361,11.5496878 285.662076,11.0226248 C287.18538,10.4955618 288.650798,11.3150991 288.650798,12.6616995 C288.650798,13.130877 288.943272,13.4812368 289.293632,13.4812368 C289.586106,13.4812368 290.701164,14.2428886 291.697405,15.1812436 C293.278594,16.6466617 293.455297,17.0579536 292.809417,17.8165588 C292.340239,18.3436219 291.871062,18.7549138 291.636473,18.7549138 C291.462816,18.7549138 289.704924,17.1158392 287.770328,15.1233581 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M266.093718,16.4120729 C266.85537,14.8887693 267.208776,14.7120661 268.144085,15.2391291 C268.786919,15.589489 269.317029,16.4120729 269.317029,16.9970215 C269.317029,17.9353765 268.905737,18.1699652 267.266662,18.1699652 L265.15841,18.1699652 L266.093718,16.4120729 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>            <\/g>        <\/g>    <\/g><\/svg>'},t.prototype.isNecessaryDataConfigured=function(){return this.DataGroupInfo.FieldContainers.length>0&&(this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0||this.DataGroupInfo.FieldContainers[3].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[4].FieldInfos.length>0)},t.prototype.init=function(n,t){BoldBIDashboard.isNullOrUndefined(t)||(this.isFromDraft=!0);BoldBIDashboard.isNullOrUndefined(ejdashboard[this.getMapProperties().ShapeData])?(this.controlContainer.data("widgetInstance",this),this.mapHelper.downloadMapJsonData(this.getMapProperties().ShapeData),this.mapHelper.setTimerToDwnldMapFile({widgetJson:this.getMapProperties(),mapObj:this,controlType:"Map",shapeData:this.getMapProperties().ShapeData},!1)):this.renderMapContainer(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.mapElement)||this.updateWidgetSize()},t.prototype.updateDataGroupInfo=function(t,i){n.prototype.updateDataGroupInfo.call(this,t,i);(BoldBIDashboard.isNullOrUndefined(this.getValueContainer())||this.getValueContainer().FieldInfos.length!==0)&&(BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())||this.getShapeContainer().FieldInfos.length!==0)&&(BoldBIDashboard.isNullOrUndefined(this.getLatitudeContainer())||this.getLatitudeContainer().FieldInfos.length!==0)&&(BoldBIDashboard.isNullOrUndefined(this.getLongitudeContainer())||this.getLongitudeContainer().FieldInfos.length!==0)||(this.getMapProperties().LegendType="Layers")},t.prototype.update=function(n){this.IsRendered=!1;this.updateTitleSubtitleTheme();this.updateReportItemData(n)},t.prototype.applyWidgetTheme=function(n){if(this.updateTitleSubtitleTheme(),BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)||BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this),!BoldBIDashboard.isNullOrUndefined(this.mapObj)){var t=this.themeHelper.getMapDataLabelFontText(),i=this.themeHelper.getMapLegendFontText(),r=this.themeHelper.getMapLegendTitleFontText();if(this.mapObj.legendSettings.textStyle.color=this.themeHelper.getMapLegendFontColor(),this.mapObj.legendSettings.titleStyle.color=this.themeHelper.getMapLegendFontColor(),this.mapObj.legendSettings.textStyle.size=i.size,this.mapObj.legendSettings.textStyle.fontWeight=i.weight,this.mapObj.legendSettings.textStyle.fontFamily=i.family,this.mapObj.legendSettings.titleStyle.size=r.size,this.mapObj.legendSettings.titleStyle.fontWeight=r.weight,this.mapObj.legendSettings.titleStyle.fontFamily=r.family,this.mapObj.layers[0].dataLabelSettings.textStyle.color=this.getMapProperties().LabelColor.IsEdited?this.getMapProperties().LabelColor.Color:this.themeHelper.getMapDataLabelFontColor(),this.mapObj.layers[0].dataLabelSettings.textStyle.size=t.size,this.mapObj.layers[0].dataLabelSettings.textStyle.weight=t.weight,this.mapObj.layers[0].dataLabelSettings.textStyle.fontFamily=t.family,this.mapObj.theme=n?"MaterialDark":"Material",this.mapObj.background="transparent",this.mapObj.mapsArea.background="transparent",this.mapElement.css("background","transparent"),BoldBIDashboard.isNullOrUndefined(this.dataValues)||!this.getMapProperties().EnableColorSettings||BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)||this.getMapProperties().ColorCustomization.Type!==ColorCustomizationType.Individual){if(!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().DefaultColor)&&!this.getMapProperties().DefaultColor.IsEdited&&!this.getMapProperties().EnableColorSettings){var u=this.getValueContainer(),f=u.FieldInfos.length>0?u.FieldInfos[0].UniqueColumnName:null,e=BoldBIDashboard.Dashboard.WidgetHelper.getGlobalColumnId(f,this.DataGroupInfo.FieldContainers),o=this.designerInstance.modules.resource.getColumnColorCodeBasedonTheme(e);this.updateGradientColors(o)}}else this.setColorCustomization(this.dataValues,this.mapObj);this.mapObj.refresh();!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getValueContainer().FieldInfos.length>0&&this.getShapeContainer().FieldInfos.length>0&&this.generateTooltip(this.DataColumnBindings)}},t.prototype.updateTitleSubtitleTheme=function(){var n=this.themeHelper.getMapHeaderTitle(),t=this.themeHelper.getMapHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getMapProperties().ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej2.map.all.min.js",NameSpace:this.mapNameSpace},DependentScripts:[]}},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,this.mapNameSpace)},t.prototype.canCombineRequest=function(){return!0},t.prototype.updateDisplayTextBasedProperties=function(){!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getValueContainer().FieldInfos.length>0&&this.getShapeContainer().FieldInfos.length>0&&(this.generateTooltip(this.DataColumnBindings),this.updateLegendTitle(this.mapObj));BoldBIDashboard.isNullOrUndefined(this.getMarkerContainer()&&this.getMarkerContainer().FieldInfos.length>0)||this.generateMarkerTooltip();this.drillLevelInfo.length>0&&!BoldBIDashboard.isNullOrUndefined(this.breadCrumbItem)&&(this.removeBreadcrumb(this.breadCrumbItem),this.createBreadcrumb());this.refresh()},t.prototype.getFieldContainer=function(){var t=[];return t.push(this.createFieldContaierForUI("Value","Location Value",FieldContainerType.Numeric,1)),t.push(this.createFieldContaierForUI("Shape","Location Name",FieldContainerType.Non_Numeric,null,!0)),t.push(this.createFieldContaierForUI("Tooltip","Location Tooltip",FieldContainerType.Numeric)),t.push(this.createFieldContaierForUI("Latitude","Marker Latitude",FieldContainerType.Non_Numeric,1)),t.push(this.createFieldContaierForUI("Longitude","Marker Longitude",FieldContainerType.Non_Numeric,1)),t.push(this.createFieldContaierForUI("Name","Marker Tooltip",FieldContainerType.None)),t.push(this.createFieldContaierForUI("MarkerImage","Marker Image",FieldContainerType.Non_Numeric)),t.push(this.createFieldContaierForUI("HiddenColumn","Hidden Column",FieldContainerType.None)),t.push(n.prototype.getFilterColumn.call(this)),t},t.prototype.onFieldSettingsClick=function(n,t){for(var r=n.ContainerName,i=0;i<t.length;i++)n.ContainerName==="HiddenColumn"&&(t[i].Name==="Sort"||t[i].Name==="DimensionFilters"||t[i].Name==="MeasureFilter"||t[i].Name==="RelativeDateFilter"||t[i].Name==="MeasureFormat")?t[i].IsVisible=!1:t[i].Name==="Sort"&&(t[i].IsVisible=!1);return t},t.prototype.getPropertyPanelItems=function(){return this.getPropertyPanelForMap()},t.prototype.isShapeFileAvailable=function(){return!BoldBIDashboard.isNullOrUndefined(ejdashboard[this.getMapProperties().ShapeData])},t.prototype.isScriptFilesAvailable=function(){return!BoldBIDashboard.isNullOrUndefined(this.getControlInstance(this.mapNameSpace))},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t);this.isDataUpdated=!1},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateMapItemPropertyChange(n,t,i,r)},t.prototype.allowWidgetMove=function(n){return!(this.bbdesigner$(n.target).hasClass("e-mapitem")||this.bbdesigner$(n.target).parents().hasClass("e-mapitem"))},t.prototype.updateInitialSelection=function(){var n=this.widgetJson.SelectedFilterValues,r,u,t,f,i;if(!BoldBIDashboard.isNullOrUndefined(this.mapObj)&&this.widgetJson.FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0){for(r=this.mapObj.shapeSelected,this.mapObj.shapeSelected=null,u=n.length,t=0;t<u;t++)for(f=n[t].InitialDimensionFilter.Text.length,i=0;i<f;i++)this.mapObj.shapeHighlight=n[t].InitialDimensionFilter.Text[i].toString(),BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())||this.getMapProperties().MapType!==MapType.Choropleth||this.getShapeContainer().FieldInfos.length!==1||this.mapObj.shapeSelection(0,this.getShapePropertyPathValue(ejdashboard[this.getMapProperties().ShapeData]),n[t].InitialDimensionFilter.Text[i].toString(),!0);this.mapObj.shapeSelected=r;BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this)}else BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this)},t.prototype.clearFilter=function(n){this.clearFilterObject(this.mapObj,n);this.removeShapeSelection()},t.prototype.removeShapeSelection=function(){BoldBIDashboard.isNullOrUndefined(this.mapObj)||(this.mapElement.find(".ShapeselectionMapStyle").length>0&&this.mapObj.removeShapeSelection(),this.mapObj.refresh())},t.prototype.getMobileViewHeight=function(){return 3*this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.refresh=function(){this.mapObj.refresh()},t.prototype.dispose=function(){this.mapItemDispose();n.prototype.dispose.call(this)},t.prototype.resetProperties=function(){BoldBIDashboard.isNullOrUndefined(this.colorContainer)||this.DataGroupInfo.FieldContainers[0].FieldInfos.length!==0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length!==0||(this.getMapProperties().EnableColorSettings=!1,this.getMapProperties().DefaultColor=new DefaultColorSet,this.propertyPanel.updateCategoryVisibility("Map","Formatting",!1),this.renderElements(),this.renderColorSettingsElement(),this.setPropertyElement("Formatting","ColorSettings",this.getMapProperties().EnableColorSettings?"Advanced":"Monochromatic"));(this.DataGroupInfo.FieldContainers[3].FieldInfos.length!==0||this.DataGroupInfo.FieldContainers[4].FieldInfos.length!==0)&&(this.getMapProperties().MarkerCustomization=null)},t.prototype.onFieldDragDrop=function(n,t,i){return this.onFieldDragDropped(n,this.DataGroupInfo,t,i)},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.locale.itemPanel.widgetDataRequiredMessage.mapDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.getWidgetInfo=function(t,i){var r=n.prototype.getWidgetInfo.call(this,t,i);return r.ColorCustomization=this.getColorCustomization(),r.MarkerCustomization=this.getMarkerCustomization(),r},t.prototype.beforeUtilityDialogOpen=function(n,t,i){if(t==="dimensionFilterDialog"&&i.ContainerName==="MarkerImage"){var r=n;return r.TopNFilter.Rank.Enable=!1,r.ConditionalFilter.Condition.Enable=!1,r}return n},t.prototype.getFieldView=function(){var t=[BoldBIDashboard.Dashboard.SupportedDataType.Number,BoldBIDashboard.Dashboard.SupportedDataType.Boolean,BoldBIDashboard.Dashboard.SupportedDataType.String];return n.prototype.getFieldView.call(this,[],t)},t.prototype.showSettingsIcon=function(n){return n.ContainerName==="Latitude"||n.ContainerName==="Longitude"?!1:!0},t.prototype.supportedColumnsForFiltering=function(){var u=[],f=this.designerInstance.modules.filterConfiguration,t,n,i,r;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length>0)for(t=this.DataGroupInfo.FieldContainers,n=0;n<t.length;n++)for(i=0;i<t[n].FieldInfos.length;i++)r=t[n].FieldInfos,r[i].FieldType!==FieldType.Dimensions&&(r[i].FieldType!==FieldType.Measures||t[n].Name!=="Longitude"&&t[n].Name!=="Latitude"&&t[n].Name!=="Name")||f.isDuplicate(u,r[i].Name)||u.push(r[i]);return u},t.prototype.getPropertyPanelForMap=function(){var t=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.widgetJson.FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo,this.getMapProperties().ContainerSettings);return this.containerPropertyItem=t.containerProperties,t.propertyGridItems.Header=this.widgetJson.ContainerSettings.Title,t.propertyGridItems.SubTitle=this.widgetJson.ContainerSettings.SubTitle,t.propertyGridItems.Description=this.widgetJson.ContainerSettings.Description,t.propertyGridItems.Type=this.Type,t.linkingProperty.Items[0].value=n.prototype.useExistingLink.call(this),this.bbdesigner$.each(t.containerSettingsProperty.Items,function(n,t){(t.name==="ShowWidgetBackgroundImage"||t.name==="WidgetBackgroundImageMode"||t.name==="WidgetBackgroundImageSource"||t.name==="WidgetBackgroundImageBrowse"||t.name==="WidgetBackgroundImageURL")&&(t.isVisible=!1)}),t.propertyGridItems.Items=[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"ShowTooltip",displayName:this.locale.propertyPanel.basicSettings.showTooltip,value:this.getMapProperties().ShowTooltip,itemType:"bool"},{name:"MapType",displayName:this.locale.propertyPanel.basicSettings.mapType,value:this.getMapProperties().MapType,itemType:"dropdown",valueList:this.mapHelper.getMapTypeValueList()},{name:"ShowLabel",displayName:this.locale.propertyPanel.basicSettings.showLabel,value:this.getMapProperties().ShowLabel,itemType:"bool",isVisible:!(this.getMapProperties().MapType===MapType.Bubble)&&this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getShapeContainer().FieldInfos.length>0},{name:"LabelColor",displayName:this.locale.propertyPanel.basicSettings.color,value:this.getMapProperties().LabelColor.Color,itemType:"color",isVisible:!(this.getMapProperties().MapType===MapType.Bubble)&&this.getMapProperties().ShowLabel&&this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getShapeContainer().FieldInfos.length>0},{name:"EnableMultiSelection",displayName:this.locale.propertyPanel.basicSettings.enableMultiSelection,value:this.getMapProperties().EnableMultiSelection,itemType:"bool",isDisable:!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getShapeContainer().FieldInfos.length===0&&!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0||this.getMapProperties().MapType===MapType.Bubble||!this.getMapProperties().FilterSettings.ActAsMasterWidget},{name:"ShapeType",displayName:this.locale.propertyPanel.basicSettings.shapeKind,value:this.getMapProperties().ShapeType,itemType:"dropdown",valueList:["Continent And Region","Country","State"]},{name:"ShapeData",displayName:this.locale.propertyPanel.basicSettings.shapeData,value:this.getMapProperties().ShapeData,itemType:"dropdown",enableFilterSearch:!0,valueList:this.mapHelper.getShapeListBasedOnType(this.getMapProperties().ShapeType)},]},{CategoryName:"Legend Settings",DisplayName:this.locale.propertyPanel.legendSettingsText,IsVisible:!(this.getMapProperties().MapType===MapType.Bubble),Items:[{name:"ShowLegend",displayName:this.locale.propertyPanel.basicSettings.showLegend,value:this.getMapProperties().ShowLegend,itemType:"bool",isVisible:!(this.getMapProperties().MapType===MapType.Bubble)},{name:"LegendType",displayName:this.locale.propertyPanel.basicSettings.legendType,value:this.getMapProperties().LegendType,itemType:"dropdown",isVisible:!(this.getMapProperties().MapType===MapType.Bubble)&&this.getMapProperties().ShowLegend&&this.getValueContainer().FieldInfos.length>0&&this.getShapeContainer().FieldInfos.length>0&&this.getLatitudeContainer().FieldInfos.length>0&&this.getLongitudeContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization),valueList:this.getLegendTypeList()},{name:"ShowLegendTitle",displayName:this.locale.propertyPanel.basicSettings.showLegendTitle,value:this.getMapProperties().ShowLegendTitle,itemType:"bool",isVisible:!(this.getMapProperties().MapType===MapType.Bubble)&&this.getMapProperties().ShowLegend},{name:"LegendTitle",displayName:this.locale.propertyPanel.basicSettings.legendTitleListText,value:this.getMapProperties().LegendTitle,itemType:"string",placeHolder:this.locale.common.auto,isVisible:!(this.getMapProperties().MapType===MapType.Bubble)&&this.getMapProperties().ShowLegend&&this.getMapProperties().ShowLegendTitle},{name:"LegendPosition",displayName:this.locale.propertyPanel.basicSettings.legendPositioning,value:this.getMapProperties().LegendPosition,itemType:"dropdown",isVisible:!(this.getMapProperties().MapType===MapType.Bubble)&&this.getMapProperties().ShowLegend,valueList:this.mapHelper.getLegendPositionList()},]},{CategoryName:"Formatting",DisplayName:this.locale.propertyPanel.formattingCategoryText,IsVisible:this.DataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getShapeContainer().FieldInfos.length>0?!0:!1,Items:[{name:"ColorSettings",displayName:this.locale.propertyPanel.formattingCategoryText,value:this.getMapProperties().EnableColorSettings?"Advanced":"Monochromatic",itemType:"dropdown",valueList:["Monochromatic","Advanced"]},{name:"EnablColorSettings",callbackInstance:this,callbackMethod:"renderColorSettings",itemType:"object",elementType:this.Type}]},{CategoryName:"Marker Settings",DisplayName:this.locale.propertyPanel.markerSettingsText,IsVisible:this.isMarkerAvilable,Items:[{name:"DefaultMarkerZoom",displayName:this.locale.propertyPanel.markerShapeSettings.markerDefaultZoom,value:this.getMapProperties().DefaultMarkerZoom,itemType:"bool"},{name:"MarkerShape",displayName:this.locale.propertyPanel.markerShapeSettings.markerShape,value:this.getMapProperties().MarkerShape,itemType:"dropdown",valueList:this.mapHelper.markerShapeList()},{name:"ImageSource",displayName:this.locale.propertyPanel.basicSettings.imageSource,value:this.getMapProperties().ImageSource,itemType:"dropdown",valueList:["Local","URL","Parameterized URL"],isVisible:this.getMapProperties().MarkerShape==="Image"?!0:!1},{name:"Browse",displayName:this.locale.propertyPanel.backgroundSettings.backgroundImageBrowse,isVisible:this.getMapProperties().MarkerShape==="Image"&&this.getMapProperties().ImageSource==="Local",itemType:"object",callbackInstance:this,callbackMethod:"renderBrowseBox"},{name:"ImageURL",displayName:this.locale.propertyPanel.backgroundSettings.backgroundImageUrl,itemType:"string",value:this.getMapProperties().ImageUrl,isVisible:this.getMapProperties().MarkerShape==="Image"&&this.getMapProperties().ImageSource==="URL",callbackInstance:this,callbackMethod:"renderMarkerImage"},{name:"Pattern",displayName:this.locale.propertyPanel.backgroundSettings.backgroundImagePattern,itemType:"string",value:this.getMapProperties().URLPattern,isVisible:this.getPatternVisibility()},{name:"MarkerColor",displayName:this.locale.propertyPanel.markerShapeSettings.markerColor,value:this.getMapProperties().MarkerShapeColor,itemType:"color",isVisible:this.getMapProperties().MarkerShape!=="Image"},{name:"MarkerWidth",displayName:this.locale.propertyPanel.markerShapeSettings.markerWidth,value:this.getMapProperties().MarkerWidth,itemType:"float",decimalPlaces:0,minimum:1,maximum:1500},{name:"MarkerHeight",displayName:this.locale.propertyPanel.markerShapeSettings.markerHeight,value:this.getMapProperties().MarkerHeight,itemType:"float",decimalPlaces:0,minimum:1,maximum:1500},{name:"MarkerCustomize",displayName:"",itemType:"object",callbackInstance:this,callbackMethod:"renderMarkerCustomizeButton"}]},t.filterSettingsProperty,t.linkingProperty,t.containerSettingsProperty,t.containerActionsProperty,t.noDataContainerActionsProperty],t.propertyGridItems},t.prototype.updateMapItemPropertyChange=function(t,i,r,u){var s=!1,f,e,h,o;switch(t){case"Name":this.widgetJson.ContainerSettings.Title=r;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,r);break;case"ShapeColor":this.updatePropertyAsync(this.updateShapeColor,r);break;case"HoverColor":this.updatePropertyAsync(this.updateHoverColor,r);break;case"ShapeData":this.isDrillAction||(this.getMapProperties().ShapeData=r,this.removeAllDrillElements());BoldBIDashboard.isNullOrUndefined(ejdashboard[r])?(this.mapHelper.downloadMapJsonData(r),this.mapHelper.setTimerToDwnldMapFile({widgetJson:this.widgetJson,mapObj:this,controlType:this.Type},!0)):this.updatePropertyAsync(this.updateShapeData,r);break;case"ShapeType":this.updateShapeType(r);break;case"ShowTooltip":this.updateShowToolTip(r);break;case"ShowLegend":this.getMapProperties().ShowLegend=r;(this.getMapProperties().MapType===MapType.Choropleth&&this.isLegendVisible()||!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization))&&this.updatePropertyAsync(this.updateShowLegend,r);r===!0?this.getValueContainer().FieldInfos.length>0&&this.getShapeContainer().FieldInfos.length>0&&this.getLatitudeContainer().FieldInfos.length>0&&this.getLongitudeContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)&&this.propertyPanel.updateItemVisibility("Map","LegendSettings","LegendType",r):this.propertyPanel.updateItemVisibility("Map","LegendSettings","LegendType",r);this.propertyPanel.updateItemVisibility("Map","LegendSettings","LegendPosition",r);this.propertyPanel.updateItemVisibility("Map","LegendSettings","ShowLegendTitle",r);this.propertyPanel.updateItemVisibility("Map","LegendSettings","LegendTitle",r);break;case"LegendType":this.updateLegendType(r);break;case"ShowLegendTitle":this.getMapProperties().ShowLegendTitle=r;this.getMapProperties().MapType===MapType.Choropleth&&this.isLegendVisible()&&this.updatePropertyAsync(this.updateShowLegendTitle,r);this.propertyPanel.updateItemVisibility("Map","LegendSettings","LegendTitle",r);break;case"LegendTitle":this.getMapProperties().MapType===MapType.Choropleth&&this.isLegendVisible()&&this.updatePropertyAsync(this.updateLegendTitleText,r);break;case"ShowLabel":this.updatePropertyAsync(this.updateMapLabel,r);break;case"LabelColor":this.updateLabelColor(r);break;case"EnableMultiSelection":this.updatePropertyAsync(this.updateMultiSelection,r);break;case"ItemLink":n.prototype.updateLink.call(this,r);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,r);break;case"MapType":this.updatePropertyAsync(this.updateMapType,r);break;case"ColorSettings":this.updateColorSettings(r);break;case"DefaultMarkerZoom":this.updatePropertyAsync(this.updateDefaultMarkerZoom,r);break;case"MarkerShape":this.updatePropertyAsync(this.updateMarkerShape,r);break;case"MarkerColor":this.updatePropertyAsync(this.updateMarkerColor,r);break;case"ImageURL":this.getMapProperties().ImageUrl=r;this.updatePropertyAsync(this.updateURLSource,r);break;case"MarkerWidth":this.updatePropertyAsync(this.updateMarkerWidth,r);break;case"MarkerHeight":this.updatePropertyAsync(this.updateMarkerHeight,r);break;case"FieldNameChange":this.updateDisplayTextBasedProperties();break;case"LegendPosition":this.getMapProperties().LegendPosition=r;this.getMapProperties().MapType===MapType.Choropleth&&this.isLegendVisible()&&this.updatePropertyAsync(this.updateLegendPosition,r);break;case"ImageSource":this.getMapProperties().ImageSource=r;this.resetImageProperties();this.updatePropertyAsync(this.updateImageSourceVisibility,r);break;case"ActAsMasterWidget":this.updateSelectionSettingOnMaster(r);s=!0;break;case"Pattern":this.getMapProperties().URLPattern=r;this.getUrlFormat();break;default:s=!0}if(!s){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(f=this.designPanelInstance.selectedReportItems,f.length>0))for(e=0;e<f.length;e++)h=f[e],h.attr("id")===this.controlContainer.attr("id")&&(o=this.bbdesigner$.extend(!0,{},u),o.categoryName=u.categoryName,o.valueList=u.valueList,this.propertyPanel.updatePropertyValue(o,"Map",r));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-map-item",this.designerId+"_"+this.widgetJson.UniqueName,[t,r,i,u],[t,i,r,u])}},t.prototype.updateSelectionSettingOnMaster=function(n){var t=this.isEnableSelectionHighlight()&&n;this.mapObj.layers[0].selectionSettings={enable:t};this.mapObj.layers[0].highlightSettings={enable:t};n?this.propertyPanel.updateItemDisable("bool","Map","BasicSettings","EnableMultiSelection",!1):this.propertyPanel.updateItemDisable("bool","Map","BasicSettings","EnableMultiSelection",!0);this.mapObj.refresh()},t.prototype.getShapePropertyPathValue=function(n){for(var i=[],r=Object.keys(n["features"][0].properties),t=0;t<r.length;t++)i.push(r[t]);return i},t.prototype.updatePropertyAsync=function(n,t){var i=this,r;this.widgetContainerHelper.showLoadingIndicator(this);r=this;setTimeout(function(){i.bbdesigner$.proxy(n,r,t).call();i.widgetContainerHelper.hideLoadingIndicator(i);i.designerInstance.modules.serialization.notifyChange()},0)},t.prototype.updateLabelColor=function(n){this.getMapProperties().LabelColor.Color=n;this.getMapProperties().LabelColor.IsEdited=!0;BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)&&(BoldBIDashboard.isNullOrUndefined(this.mapObj)||(this.mapObj.layers[0].dataLabelSettings.textStyle.color=this.getMapProperties().LabelColor.Color))},t.prototype.updateShapeColor=function(n){this.shapecolor=n;BoldBIDashboard.isNullOrUndefined(this.mapElement)||(this.mapObj.layers[0].shapeSettings.fill=n,this.mapObj.refresh())},t.prototype.updateHoverColor=function(n){this.mapObj.layers[0].highlightSettings.fill=n;this.hovercolor=n;this.mapObj.refresh()},t.prototype.updateShowToolTip=function(n){this.getMapProperties().ShowTooltip=n;BoldBIDashboard.isNullOrUndefined(this.mapObj)||(this.getMapProperties().MapType===MapType.Choropleth?this.mapObj.layers[0].tooltipSettings.visible=n:this.mapObj.layers[0].bubbleSettings[0].tooltipSettings.visible=n,this.mapObj.refresh())},t.prototype.updateShapeType=function(n){var t,i;this.getMapProperties().ShapeType=n;this.removeAllDrillElements();t=n==="Continent And Region"?this.mapHelper.getContinentList():n==="Country"?this.mapHelper.getCountryList():this.mapHelper.getStateList();this.getMapProperties().ShapeData=t[0].value;this.setPropertyElement("BasicSettings","ShapeData",this.getMapProperties().ShapeData);this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.view&&(i=this.designerInstance.element.find("#"+this.designerId+"_Map_BasicSettings_ShapeData").data("BoldBIDashboardDropDownList"),i.setModel({dataSource:t,selectedIndex:0}))},t.prototype.updateShapeData=function(n){BoldBIDashboard.isNullOrUndefined(this.mapElement)&&!BoldBIDashboard.isNullOrUndefined(ejdashboard[n])&&(this.contentContainer.find(".e-map-file-err").remove(),this.renderMapContainer(this.widgetJson),this.dataConfigurationInstance.postDraggedFields());var t=null;BoldBIDashboard.isNullOrUndefined(this.mapObj)||BoldBIDashboard.isNullOrUndefined(ejdashboard[n])||(this.mapObj.layers[0].shapeData=ejdashboard[n],t=this.getShapePropertyPathValue(ejdashboard[n]),this.mapObj.layers[0].shapePropertyPath=this.getShapePropertyPathValue(ejdashboard[n]),this.mapObj.refresh());BoldBIDashboard.isNullOrUndefined(ejdashboard[n])&&(BoldBIDashboard.isNullOrUndefined(this.mapObj)||this.mapObj.destroy(),BoldBIDashboard.isNullOrUndefined(this.mapItem)||this.mapItem.remove(),this.mapElement=null,this.mapHelper.showMapFileErr(this,this.getMapProperties(),"Map"))},t.prototype.updateGradientColors=function(n){var f;if(!BoldBIDashboard.isNullOrUndefined(this.dataValues)&&this.dataValues.data!=="[]"&&this.dataValues.data.length>0&&!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0){var r=this.getMapProperties().MapType===MapType.Choropleth?this.mapObj.layers[0].shapeSettings.colorValuePath:this.mapObj.layers[0].bubbleSettings[0].colorValuePath,u=JSON.parse(this.dataValues.data),t=this.getFromValue(u,r),i=this.getToValue(u,r);t===i&&(t-=1);this.getMapProperties().MapType===MapType.Choropleth?(f=this.monochromaticLowValueColorGeneration(n),this.mapObj.layers[0].shapeSettings.colorMapping=[{color:[f,n],maxOpacity:1,from:t,to:i}]):this.mapObj.layers[0].bubbleSettings[0].colorMapping=[{color:n,from:t,to:i}];this.mapObj.legendSettings.mode=this.getMarkerType(!0);this.updateLegendSettingsBasedOnPosition(this.mapObj);this.mapObj.refresh()}this.designerInstance.modules.serialization.notifyChange()},t.prototype.updateMapType=function(n){var t,i;this.getMapProperties().MapType=n;n===MapType.Bubble?(this.propertyPanel.updateCategoryVisibility("Map","LegendSettings",!1),this.propertyPanel.updateItemVisibility("Map","BasicSettings","ShowLabel",!1),this.propertyPanel.updateItemVisibility("Map","BasicSettings","LabelColor",!1),this.mapObj.layers[0].dataLabelSettings.visible=!1,this.mapObj.legendSettings.visible=!1,this.setPropertyElement("BasicSettings","EnableMultiSelection",!1),this.propertyPanel.updateItemDisable("bool","Map","BasicSettings","EnableMultiSelection",!0),this.mapObj.layers[0].selectionSettings.enableMultiSelect=!1,this.getMapProperties().EnableMultiSelection&&(this.clearFilter(),this.getMapProperties().EnableMultiSelection=!1)):(t=this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getShapeContainer().FieldInfos.length>0,this.getValueContainer().FieldInfos.length>0&&this.getShapeContainer().FieldInfos.length>0&&this.getLatitudeContainer().FieldInfos.length>0&&this.getLongitudeContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)&&this.propertyPanel.updateItemVisibility("Map","LegendSettings","LegendType",this.getMapProperties().ShowLegend),this.getValueContainer().FieldInfos.length>0&&this.getShapeContainer().FieldInfos.length>0&&this.getLatitudeContainer().FieldInfos.length>0&&this.getLongitudeContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)?this.propertyPanel.updateItemVisibility("Map","LegendSettings","LegendType",!0):this.propertyPanel.updateItemVisibility("Map","LegendSettings","LegendType",!1),this.propertyPanel.updateCategoryVisibility("Map","LegendSettings",!0),this.propertyPanel.updateItemVisibility("Map","LegendSettings","ShowLegend",!0),this.propertyPanel.updateItemVisibility("Map","LegendSettings","ShowLegendTitle",this.getMapProperties().ShowLegend),this.propertyPanel.updateItemVisibility("Map","LegendSettings","LegendTitle",this.getMapProperties().ShowLegend&&this.getMapProperties().ShowLegendTitle),this.propertyPanel.updateItemVisibility("Map","LegendSettings","LegendPosition",this.getMapProperties().ShowLegend),this.propertyPanel.updateItemVisibility("Map","BasicSettings","ShowLabel",t),this.propertyPanel.updateItemVisibility("Map","BasicSettings","LabelColor",t&&t&&this.getMapProperties().ShowLabel),this.propertyPanel.updateItemDisable("bool","Map","BasicSettings","EnableMultiSelection",!1),this.mapObj.layers[0].selectionSettings.enableMultiSelect=this.getMapProperties().EnableMultiSelection,this.mapObj.layers[0].dataLabelSettings.visible=t&&this.getMapProperties().ShowLabel,this.updateLegendVisibilityBasedOnSize(this.mapObj));this.DataGroupInfo.FieldContainers.length>1&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getShapeContainer().FieldInfos.length>0&&(n===MapType.Bubble?(i=this.controlContainer.height()<this.controlContainer.width()?this.controlContainer.height():this.controlContainer.width(),this.mapObj.layers[0].bubbleSettings=[{visible:!0,dataSource:this.mapObj.layers[0].dataSource,minRadius:i*.005,maxRadius:i*.05,opacity:.8,valuePath:this.getValueContainer().FieldInfos[0].UniqueColumnName,colorValuePath:this.mapObj.layers[0].shapeSettings.colorValuePath,colorMapping:this.getMapProperties().EnableColorSettings?this.mapObj.layers[0].shapeSettings.colorMapping:[{color:this.getMapProperties().DefaultColor.Color,to:this.mapObj.layers[0].shapeSettings.colorMapping[0].to,from:this.mapObj.layers[0].shapeSettings.colorMapping[0].from}],tooltipSettings:this.mapObj.layers[0].tooltipSettings}],this.mapObj.layers[0].dataSource=[]):(this.mapObj.layers[0].bubbleSettings[0].visible=!1,this.mapObj.layers[0].dataSource=this.mapObj.layers[0].bubbleSettings[0].dataSource,this.mapObj.layers[0].shapeSettings.colorValuePath=this.mapObj.layers[0].bubbleSettings[0].colorValuePath,this.getMapProperties().EnableColorSettings?this.mapObj.layers[0].shapeSettings.colorMapping=this.mapObj.layers[0].bubbleSettings[0].colorMapping:(this.mapObj.layers[0].shapeSettings.colorMapping[0].to=this.mapObj.layers[0].bubbleSettings[0].colorMapping[0].to,this.mapObj.layers[0].shapeSettings.colorMapping[0].from=this.mapObj.layers[0].bubbleSettings[0].colorMapping[0].from,this.updateGradientColors(this.getMapProperties().DefaultColor.Color)),this.mapObj.layers[0].bubbleSettings[0].dataSource=[]),this.mapObj.refresh())},t.prototype.updateMarkerColor=function(n){this.getMapProperties().MarkerShapeColor=n;BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)||(this.getMapProperties().MarkerCustomization.DefaultMarkerColor=n);this.updateMarkerSettings(this.getMapProperties().MarkerShape,this.getMapProperties().MarkerWidth,this.getMapProperties().MarkerHeight,n)},t.prototype.updateDefaultMarkerZoom=function(n){this.getMapProperties().DefaultMarkerZoom=n;BoldBIDashboard.isNullOrUndefined(this.mapObj)||(this.mapObj.zoomSettings.shouldZoomInitially=n,this.mapObj.refresh())},t.prototype.getDefaultZoomForMarkers=function(){return!BoldBIDashboard.isNullOrUndefined(this.getLatitudeContainer())&&this.getLatitudeContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getLongitudeContainer())&&this.getLongitudeContainer().FieldInfos.length>0?this.getMapProperties().DefaultMarkerZoom:!1},t.prototype.updateMarkerShape=function(n){this.getMapProperties().MarkerShape=n;n==="Balloon"?(this.getMapProperties().MarkerWidth=10,this.getMapProperties().MarkerHeight=15):(this.getMapProperties().MarkerHeight=12,this.getMapProperties().MarkerWidth=12);BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)||(this.getMapProperties().MarkerCustomization.DefaultMarkerShape=n,this.getMapProperties().MarkerCustomization.DefaultMarkerWidth=this.getMapProperties().MarkerWidth,this.getMapProperties().MarkerCustomization.DefaultMarkerHeight=this.getMapProperties().MarkerHeight);this.setPropertyElement("MarkerSettings","MarkerHeight",this.getMapProperties().MarkerHeight);this.setPropertyElement("MarkerSettings","MarkerWidth",this.getMapProperties().MarkerWidth);n==="Image"?(this.propertyPanel.updateItemVisibility("Map","MarkerSettings","ImageSource",!0),this.setPropertyElement("MarkerSettings","ImageSource",this.getMapProperties().ImageSource),this.propertyPanel.updateItemVisibility("Map","MarkerSettings","MarkerColor",!1),this.resetImageProperties(),this.updateImageSourceVisibility(this.getMapProperties().ImageSource)):(this.propertyPanel.updateItemVisibility("Map","MarkerSettings","ImageSource",!1),this.propertyPanel.updateItemVisibility("Map","MarkerSettings","MarkerColor",!0),this.updateImageSourceVisibility(),this.updateMarkerSettings(n,this.getMapProperties().MarkerWidth,this.getMapProperties().MarkerHeight,this.getMapProperties().MarkerShapeColor))},t.prototype.updateMarkerSettings=function(n,t,i,r,u){var f=this;BoldBIDashboard.isNullOrUndefined(this.mapObj)||(this.bbdesigner$.map(this.mapObj.layers[0].markerSettings,function(e){(BoldBIDashboard.isNullOrUndefined(f.getMapProperties().MarkerCustomization)||!e.isCondtionApplied)&&(e.shape=n,e.width=t,e.height=i,e.imageUrl=f.getMapProperties().MarkerShape==="Image"&&f.getMapProperties().ImageSource==="Parameterized URL"?e.imageUrl:f.getMapProperties().MarkerShape==="Image"&&f.getMapProperties().ImageSource==="Local"?BoldBIDashboard.Dashboard.Resource.getImage(u):u,e.fill=r,e.colorValuePath=BoldBIDashboard.isNullOrUndefined(f.getMapProperties().MarkerCustomization)?"":"colorValuePath",e.dataSource[0].colorValuePath=r)}),this.mapObj.refresh())},t.prototype.updateURLSource=function(n){this.getMapProperties().ImageUrl=n;BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)||(this.getMapProperties().MarkerCustomization.DefaultImageUrl=n);this.updateMarkerSettings(this.getMapProperties().MarkerShape,this.getMapProperties().MarkerWidth,this.getMapProperties().MarkerHeight,this.getMapProperties().MarkerShapeColor,this.getMapProperties().ImageUrl)},t.prototype.updateMarkerWidth=function(n){this.getMapProperties().MarkerWidth=n;BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)||(this.getMapProperties().MarkerCustomization.DefaultMarkerWidth=n);var t=this.getMapProperties().ImageSource==="URL"?this.getMapProperties().ImageUrl:this.getMapProperties().ImageSource==="Local"?this.getMapProperties().ImageLocalUrl:this.getMapProperties().ImageSrc;this.updateMarkerSettings(this.getMapProperties().MarkerShape,n,this.getMapProperties().MarkerHeight,this.getMapProperties().MarkerShapeColor,t)},t.prototype.updateMarkerHeight=function(n){this.getMapProperties().MarkerHeight=n;BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)||(this.getMapProperties().MarkerCustomization.DefaultMarkerHeight=n);var t=this.getMapProperties().ImageSource==="URL"?this.getMapProperties().ImageUrl:this.getMapProperties().ImageSource==="Local"?this.getMapProperties().ImageLocalUrl:this.getMapProperties().ImageSrc;this.updateMarkerSettings(this.getMapProperties().MarkerShape,this.getMapProperties().MarkerWidth,n,this.getMapProperties().MarkerShapeColor,t)},t.prototype.updateLegendPosition=function(){this.updateLegendSettingsBasedOnPosition(this.mapObj);this.mapObj.refresh()},t.prototype.updateLegendSettingsBasedOnPosition=function(n){var t=this.getMapProperties();t.ShowLegend&&!BoldBIDashboard.isNullOrUndefined(t.LegendPosition)&&(n.legendSettings.position=t.LegendPosition,t.LegendPosition==="Left"||t.LegendPosition==="Right"?(n.legendSettings.orientation="Vertical",n.legendSettings.height=n.legendSettings.mode==="Interactive"?"75%":"",n.legendSettings.width=n.legendSettings.mode==="Interactive"?"15":""):(n.legendSettings.orientation="Horizontal",n.legendSettings.height=n.legendSettings.mode==="Interactive"?"15":"",n.legendSettings.width=n.legendSettings.mode==="Interactive"?"75%":""))},t.prototype.updateMapLabel=function(n){this.getMapProperties().ShowLabel=n;this.mapObj.layers[0].dataLabelSettings={visible:n,labelPath:this.mapObj.layers[0].shapeSettings.valuePath,smartLabelMode:"Trim",textStyle:{size:this.getFontSizeBasedOnResolution(),fontWeight:"400"}};this.propertyPanel.updateItemVisibility("Map","BasicSettings","LabelColor",n);this.mapObj.refresh()},t.prototype.updateMultiSelection=function(n){this.getMapProperties().EnableMultiSelection=n;this.mapObj.layers[0].selectionSettings.enableMultiSelect=n;this.clearFilter()},t.prototype.updateLegendVisibilityBasedOnSize=function(n){var t=!BoldBIDashboard.isNullOrUndefined(ejdashboard[this.getMapProperties().ShapeData])&&this.getMapProperties().MapType===MapType.Choropleth&&this.isLegendVisible()&&this.getMapProperties().LegendType==="Layers"||!BoldBIDashboard.isNullOrUndefined(this.getLatitudeContainer().FieldInfos.length>0)&&!BoldBIDashboard.isNullOrUndefined(this.getLatitudeContainer().FieldInfos.length>0)&&!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)&&this.getMapProperties().LegendType==="Markers";n.legendSettings.visible=this.getMapProperties().ShowLegend&&this.getResponsiveLegendVisibility()?t:!1},t.prototype.getResponsiveLegendVisibility=function(){return this.widgetJson.ContainerSettings.Bounds.RowSpan>=8},t.prototype.getResponsiveLegendItemsVisibility=function(){return this.widgetJson.ContainerSettings.Bounds.RowSpan>=8},t.prototype.isLegendVisible=function(){var n=this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getShapeContainer().FieldInfos.length>0;return BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)?BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)||(n=!0&&this.getMapProperties().LegendType==="Markers"):n=this.getMapProperties().ColorCustomization.Type!==ColorCustomizationType.Individual&&this.getMapProperties().LegendType==="Layers",n},t.prototype.updateShowLegend=function(){this.mapObj.layers[0].dataSource.length>0?(this.updateLegendVisibilityBasedOnSize(this.mapObj),this.mapObj.refresh()):BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)||(this.updateLegendVisibilityBasedOnSize(this.mapObj),this.mapObj.legendSettings.type=this.getMarkerType(!1),this.mapObj.legendSettings.removeDuplicateLegend=!0,this.mapObj.legendSettings.mode=this.getMarkerType(!0),this.mapObj.refresh())},t.prototype.updateLegendType=function(n){this.getMapProperties().LegendType=n;this.mapObj.legendSettings.type=n;var t=this.getMapProperties().ColorCustomization;n==="Markers"?(this.mapObj.legendSettings.removeDuplicateLegend=!0,this.mapObj.legendSettings.title.text="",this.mapObj.legendSettings.mode="Default"):(this.mapObj.legendSettings.mode=t.Type===ColorCustomizationType.Gradient?"Interactive":"Default",this.mapObj.legendSettings.title.text=this.getLegendText());this.updateLegendVisibilityBasedOnSize(this.mapObj);this.updateLegendSettingsBasedOnPosition(this.mapObj);this.mapObj.refresh()},t.prototype.getLegendText=function(){return this.getResponsiveLegendItemsVisibility()&&this.getMarkerType(!1)!=="Markers"?this.getMapProperties().ShowLegendTitle?this.isLegendTitleEdited?this.getMapProperties().LegendTitle:!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0?this.getValueContainer().FieldInfos[0].DisplayName:"":"":""},t.prototype.getLegendTypeList=function(){return["Layers","Markers"]},t.prototype.getMarkerType=function(n){var t="Layers",i;return this.getValueContainer().FieldInfos.length===0||this.getShapeContainer().FieldInfos.length===0?this.getLatitudeContainer().FieldInfos.length>0&&this.getLongitudeContainer().FieldInfos.length>0&&(t="Markers"):this.getValueContainer().FieldInfos.length>0&&this.getShapeContainer().FieldInfos.length>0&&(t=this.getLatitudeContainer().FieldInfos.length>0&&this.getLongitudeContainer().FieldInfos.length>0?BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)?"Layers":this.getMapProperties().LegendType:"Layers"),n?(i=BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)?"Interactive":this.getMapProperties().ColorCustomization.Type===ColorCustomizationType.Gradient?"Interactive":"Default",t==="Markers"?"Default":i):t},t.prototype.updateShowLegendTitle=function(n){this.mapObj.legendSettings.title.text=n?this.getLegendText():""},t.prototype.updateLegendTitleText=function(n){n&&!/^\s+$/.test(n)&&(this.isLegendTitleEdited=!0,this.getMapProperties().LegendTitle=n,this.mapObj.legendSettings.title.text=this.getLegendText())},t.prototype.updateImageSourceVisibility=function(n,t){var i=this.designerInstance.isDesignMode();n==="URL"?(i&&(this.propertyPanel.updateItemVisibility("Map","MarkerSettings","Pattern",!1),this.propertyPanel.updateItemVisibility("Map","MarkerSettings","Browse",!1),this.propertyPanel.updateItemVisibility("Map","MarkerSettings","ImageURL",!0)),BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ImageUrl)||this.getMapProperties().ImageUrl===""||this.updateMarkerSettings("Image",this.getMapProperties().MarkerWidth,this.getMapProperties().MarkerHeight,this.getMapProperties().MarkerShapeColor,this.getMapProperties().ImageUrl)):n==="Local"?(i&&(this.propertyPanel.updateItemVisibility("Map","MarkerSettings","ImageURL",!1),this.propertyPanel.updateItemVisibility("Map","MarkerSettings","Browse",!0),this.propertyPanel.updateItemVisibility("Map","MarkerSettings","Pattern",!1)),BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ImageLocalUrl)||this.getMapProperties().ImageLocalUrl===""||this.updateMarkerSettings("Image",this.getMapProperties().MarkerWidth,this.getMapProperties().MarkerHeight,this.getMapProperties().MarkerShapeColor,this.getMapProperties().ImageLocalUrl)):n==="Parameterized URL"?(i&&(this.propertyPanel.updateItemVisibility("Map","MarkerSettings","Browse",!1),this.propertyPanel.updateItemVisibility("Map","MarkerSettings","ImageURL",!1),this.propertyPanel.updateItemVisibility("Map","MarkerSettings","Pattern",!0)),this.getUrlFormat(t)):i&&(this.propertyPanel.updateItemVisibility("Map","MarkerSettings","Browse",!1),this.propertyPanel.updateItemVisibility("Map","MarkerSettings","ImageURL",!1),this.propertyPanel.updateItemVisibility("Map","MarkerSettings","Pattern",!1))},t.prototype.updateMarkerImageProperties=function(){this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.setPropertyElement("MarkerSettings","MarkerShape",this.getMapProperties().MarkerShape),this.setPropertyElement("MarkerSettings","ImageSource",this.getMapProperties().ImageSource),this.getMapProperties().MarkerShape==="Image"&&this.getMapProperties().ImageSource==="Parameterized URL"?this.propertyPanel.updateItemVisibility("Map","MarkerSettings","Pattern",!0):this.propertyPanel.updateItemVisibility("Map","MarkerSettings","Pattern",!1),this.propertyPanel.updateItemVisibility("Map","MarkerSettings","Browse",!1),this.propertyPanel.updateItemVisibility("Map","MarkerSettings","ImageURL",!1))},t.prototype.resetImageProperties=function(){this.getMapProperties().ImageSrc="";this.getMapProperties().ImageName="";this.getMapProperties().ImageUrl="";this.getMapProperties().URLPattern="{0}";this.getMapProperties().ImageLocalUrl="";this.bbdesigner$(this.filePath).val("");this.designerInstance.element.find("#"+this.designerId+"_"+this.Type+"_MarkerSettings_ImageURL").val("");this.designerInstance.element.find("#"+this.designerId+"_"+this.Type+"_MarkerSettings_Pattern").val("{0}")},t.prototype.checkValidPattern=function(n,t){for(var u=!1,r=n.split(/{|}/),i=0;i<r.length;i++)if(!BoldBIDashboard.isNullOrUndefined(r[i])&&r[i]!==""&&!isNaN(r[i]))if(parseInt(r[i])<t.length)u=!0;else return!1;return u},t.prototype.getUrlFormat=function(n){var t=this,u=this.checkValidPattern(this.getMapProperties().URLPattern,this.getMarkerImageContainer().FieldInfos),r,i;!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().URLPattern)&&this.getMarkerImageContainer().FieldInfos.length>0&&u?(BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)||(this.getMapProperties().MarkerCustomization.DefaultImageUrl=this.getMarkerImageContainer().FieldInfos[0].UniqueColumnName),!BoldBIDashboard.isNullOrUndefined(this.mapDataWithImage)&&BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)?(this.getMapProperties().ImageSrc=this.getMarkerImageContainer().FieldInfos[0].UniqueColumnName,r=BoldBIDashboard.isNullOrUndefined(n)?this.mapObj:n,r.layers[0].markerSettings=JSON.parse(this.mapDataWithImage),i=this.getMapProperties().ImageSource==="Local"?this.getMapProperties().ImageLocalUrl:this.getMapProperties().ImageSource==="URL"?this.getMapProperties().ImageUrl:null,(BoldBIDashboard.isNullOrUndefined(i)||i==="")&&(this.getMapProperties().ImageSource="Parameterized URL"),this.bbdesigner$.map(r.layers[0].markerSettings,function(n){n.tooltipSettings={visible:t.getMarkerContainer().FieldInfos.length>0,valuePath:t.getLatitudeContainer().FieldInfos.length>0?"latitude":null,template:"#template"+t.bbdesigner$(t.mapElement).attr("id")+"_marker_tooltip"};n.fill=t.getMapProperties().MarkerShapeColor;n.height=t.getMapProperties().MarkerHeight;n.width=t.getMapProperties().MarkerWidth;n.imageUrl=BoldBIDashboard.isNullOrUndefined(i)||i===""?t.getImageUrl(t.getMapProperties().URLPattern,n.imageUrl):i}),BoldBIDashboard.isNullOrUndefined(this.mapObj)||this.mapObj.refresh()):this.updateMarkerSettings(this.getMapProperties().MarkerShape,this.getMapProperties().MarkerWidth,this.getMapProperties().MarkerHeight,this.getMapProperties().MarkerShapeColor)):!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().URLPattern)&&this.getMarkerImageContainer().FieldInfos.length>0&&!u&&this.designerInstance.modules.util.alertDialog("Dashboard Designer",this.locale.alertWindowMesages.imageURLPatternValidationMessage,IconType.information,AlertType.Alert,!1,"")},t.prototype.getImageUrl=function(n,t){for(var i=0;i<t.length;i++)n=n.replace("{".concat(i,"}"),t[i]);return n},t.prototype.setPropertyElement=function(n,t,i,r){var u,f;this.propertyPanel.canUpdate=!1;u=this.propertyPanel.getPropertyElement(this.getPropertyPanelForMap(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r);u.isVisible=i;f=this.bbdesigner$.extend(!0,{},u);f.categoryName=n;this.propertyPanel.updatePropertyValue(f,"Map",i);this.propertyPanel.canUpdate=!0},t.prototype.ColorLuminance=function(n,t){var u,i,r;for(n=String(n).replace(/[^0-9a-f]/gi,""),n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),t=t||0,u="#",r=0;r<3;r++)i=parseInt(n.substr(r*2,2),16),i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16),u+=("00"+i).substr(i.length);return u},t.prototype.renderMapContainer=function(t){try{var r=void 0;if(r=this.designerInstance.isDesignMode()?!0:!this.isWidgetRenderedInViewMode,this.isShapeFileAvailable()&&this.isScriptFilesAvailable()&&r){BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));this.updateBackWardCompatability();this.getMapProperties().FilterSettings.HierarchicalFilter=!0;this.mapItem=BoldBIDashboard.buildTag("div.e-mapitem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder,overflow:"hidden","background-color":"transparent"},{id:this.designerId+"mapItem"+this.widgetJson.UniqueName});this.contentContainer.append(this.mapItem);try{this.mapElement=BoldBIDashboard.buildTag("div.e-map-element","",{width:"100%",height:"100%",position:"relative","background-color":"transparent","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designerId+"mapElement"+this.widgetJson.UniqueName});this.mapItem.append(this.mapElement);this.controlContainer.data("widgetInstance",this)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}this.isWidgetRenderedInViewMode=!0;!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Map)}}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.setCursorType=function(n){this.widgetJson.UrlLink.EnableLink||this.widgetJson.FilterSettings.ActAsMasterWidget?(n.model.layers[0].enableSelection=!0,this.bbdesigner$(n.originalEvent.shape).css("cursor","pointer")):(this.bbdesigner$(n.originalEvent.shape).css("cursor","default"),n.model.layers[0].enableSelection=!1)},t.prototype.legendRendering=function(n){var u,t,i,e,r,o,f;if(!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model)&&!BoldBIDashboard.isNullOrUndefined(n.text)&&n.text!==""&&this.getMapProperties().MapType===MapType.Choropleth&&this.getMapProperties().ShowLegend&&!BoldBIDashboard.isNullOrUndefined(this.mapObj)&&this.mapObj.legendSettings.mode==="Interactive"&&(u=n.text.split("-"),t=this.getValueContainer(),!BoldBIDashboard.isNullOrUndefined(t)&&t.FieldInfos.length>0)){for(i="",e=t.FieldInfos[0].MeasureFormatting!==null?"true":"false",r=0;r<u.length;r++)o=parseFloat(u[r].replace(/\s/g,"")),f=this.getFormattingValue(t.FieldInfos[0].MeasureFormatting,o,e),i=i===""?f:i+" - "+f;n.text=this.getResponsiveLegendItemsVisibility()?i:""}},t.prototype.onMarkerMouseMove=function(n){this.getMapProperties().FilterSettings.ActAsMasterWidget&&this.designerInstance.element.find("#"+n.target).css("cursor","pointer")},t.prototype.onMarkerClick=function(n){this.mapItemClick(n)},t.prototype.mapItemClick=function(n){var r=[n.maps.mouseClickEvent.x,n.maps.mouseClickEvent.y],t=[],i;this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this)||(i=this.getMapProperties().EnableMultiSelection?!0:!this.isShapeSelected(n),i&&(this.getShapeContainer().FieldInfos.length-(BoldBIDashboard.isNullOrUndefined(this.drillLevelInfo)?0:this.drillLevelInfo.length)>1&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getShapeContainer().FieldInfos.length>1&&t.push(WidgetAction.DrillDown),this.getMapProperties().FilterSettings.ActAsMasterWidget&&i&&t.push(WidgetAction.Filter),this.getMapProperties().UrlLink&&this.getMapProperties().UrlLink.EnableLink&&t.push(WidgetAction.Linking),this.widgetJson.ContainerSettings.ViewData&&t.push(WidgetAction.ViewData),BoldBIDashboard.Dashboard.WidgetHelper.createWidgetActionContextMenu(this.designerInstance,this,this.Name,t,n,r)))},t.prototype.performSelectedWidgetAction=function(t,i,r,u){var y=this.getHiddenColumnContainer(),s,p,l,a,e,f,w,b,k;if(BoldBIDashboard.isNullOrUndefined(r)||BoldBIDashboard.isNullOrUndefined(r.data))this.getMapProperties().FilterSettings.ActAsMasterWidget&&(r.cancel=!0,i.clearFilter());else switch(t){case WidgetAction.DrillDown.toString():this.mapObj.removeShapeSelection();this.mapDrillDownAction(r);break;case WidgetAction.Filter.toString():i.isCurrentMaster=!0;this.getMapProperties().EnableMultiSelection||(this.widgetJson.SelectedFilterValues=[]);var h=[],c=[],o=i.DataGroupInfo.FieldContainers,v={};if(this.isMarkerSelected=r.name==="markerClick",this.isMarkerSelected&&(this.markerElement=this.bbdesigner$("#"+r.target)),this.updateMarkerOnSelection(),i.DrillLevelInfo.length===0){for(e=y.FieldInfos,f=0;f<o.length;f++)if(s=o[f].FieldInfos[0],!BoldBIDashboard.isNullOrUndefined(s))if(p=o[f].Name.toLowerCase(),o[f].Name!=="HiddenColumn")BoldBIDashboard.isNullOrUndefined(r.data[p])?s.FieldActualType!=="bbi-designer-dataset-number"&&s.SummaryType===SummaryType.NONE&&(v[s.UniqueColumnName]=r.data[s.UniqueColumnName],h.push(s)):(v[s.UniqueColumnName]=r.data[p],h.push(s));else for(l=0;l<e.length;l++)v[e[l].UniqueColumnName]=r.data[e[l].UniqueColumnName],h.push(e[l])}else{for(a=0;a<i.DrillLevelInfo.length;a++)h.push(o[1].FieldInfos[a]),c[o[1].FieldInfos[a].UniqueColumnName]=i.DrillLevelInfo[a].selectedItem;if(h.push(o[1].FieldInfos[i.DrillLevelInfo.length]),c[o[1].FieldInfos[i.DrillLevelInfo.length].UniqueColumnName]=r.data[o[1].FieldInfos[i.DrillLevelInfo.length].UniqueColumnName],!BoldBIDashboard.isNullOrUndefined(y))for(e=y.FieldInfos,f=0;f<e.length;f++)c[e[f].UniqueColumnName]=r.data[e[f].UniqueColumnName],h.push(e[f])}BoldBIDashboard.isNullOrUndefined(r.data)||(this.isMarkerSelected||!this.getMapProperties().EnableMultiSelection?(c=this.isMarkerSelected?v:i.DrillLevelInfo.length>0?c:r.data,n.prototype.performInteraction.call(this,this,h,c)):this.updateMultiSelectionData(c,r));break;case WidgetAction.Linking.toString():u.model.mode!==BoldBIDashboard.Designer.mode.design&&(this.mapObj.removeShapeSelection(),w=this.getLinkingData(r),BoldBIDashboard.Dashboard.WidgetHelper.updateURLLinkingforDrillDown(w,i,i.widgetJson.IsEnableDrillDown),n.prototype.performLinking.call(this,w));break;case WidgetAction.ViewData.toString():i.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(b=u.modules.viewDataDialog,k=this.showSelectItemsInViewData(r),b.showViewDataPopup(i,!1,k,!0))}},t.prototype.processFilterInformation=function(n){var f=this.DataGroupInfo.FieldContainers,e=n.filters,r=this.getColumnForWidgetFilterAPI(e,f),i=r[0],o=r[1],s=r[2],h=r[3],c=r[4],u,t;if(s.length>0)return i=[],o={},console.error("Given column name(s) ["+s+"] were not found in "+this.widgetJson.ContainerSettings.Title),!1;if(h)return console.error("Measure type column not supported for filtering"),!1;if(c&&(console.error("ColumnName should not be empty for API filtering"),i.length===0))return!1;if(i.length===0&&s.length===0&&this.DrillLevelInfo.length===0)for(u=0;u<f.length;u++)if(t=f[u].FieldInfos[0],!BoldBIDashboard.isNullOrUndefined(t)&&t.FieldActualType!=="bbi-designer-dataset-number"&&t.SummaryType===SummaryType.NONE){o[t.UniqueColumnName]=e[0].values[0];i.push(t);break}if(this.widgetJson.SelectedFilterValues=[],this.getMapProperties().EnableMultiSelection){if(t=i.length>0?i[0]:null,!BoldBIDashboard.isNullOrUndefined(t)){var l=t.FieldActualType,a=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Include),v=e[0].values,y={FilterInfo:v,Action:a,IsStdDateTime:!1,IsMultiSelection:this.getMapProperties().EnableMultiSelection,IsRange:!1};this.getMapProperties().SelectedFilterValues=[this.masterFilterWindowInstance.updateInitialFiltersForFilterControls(t,this.widgetJson.UniqueName,l,y)]}}else this.masterFilterWindowInstance.configureSelectedFilterInfo(this.getJson(),i,o);return!0},t.prototype.getColumnForWidgetFilterAPI=function(n,t){for(var o,f,i,r,a,s=[],h={},c=[],e=!1,l=!1,u=0;u<n.length;u++)if(o=!1,!BoldBIDashboard.isNullOrUndefined(n[u].columnName))if(n[u].columnName!==""){for(f=0;f<t.length;f++){if(i=t[f].FieldInfos,!BoldBIDashboard.isNullOrUndefined(i))for(r=0;r<i.length;r++)if(a=i[r].IsDisplayNameEdited?i[r].DisplayName:i[r].Name,a.toLowerCase()===n[u].columnName.toLowerCase())if(o=!0,i[r].FieldActualType!=="bbi-designer-dataset-number"&&i[r].SummaryType===SummaryType.NONE){if(n[u].values.length>0){s.push(i[r]);h[i[r].UniqueColumnName]=n[u].values[0];break}}else{e=!0;break}if(e)break}o||c.push(n[u].columnName)}else l=!0;return[s,h,c,e,l]},t.prototype.showSelectItemsInViewData=function(n){var i=[],r,t;if(!BoldBIDashboard.isNullOrUndefined(n)){if(!BoldBIDashboard.isNullOrUndefined(this.drillLevelInfo)&&this.drillLevelInfo.length>0)for(r=0;r<this.drillLevelInfo.length;r++)i.push({selectedItem:this.drillLevelInfo[r].selectedItem,columnId:this.drillLevelInfo[r].Id,UniqueColumnName:this.drillLevelInfo[r].UniqueColumnName});for(t=0;t<this.DataGroupInfo.FieldContainers[1].FieldInfos.length;t++)BoldBIDashboard.isNullOrUndefined(n.data[this.DataGroupInfo.FieldContainers[1].FieldInfos[t].UniqueColumnName])||i.push({selectedItem:n.data[this.DataGroupInfo.FieldContainers[1].FieldInfos[t].UniqueColumnName],columnId:this.DataGroupInfo.FieldContainers[1].FieldInfos[t].Id,UniqueColumnName:this.DataGroupInfo.FieldContainers[1].FieldInfos[t].UniqueColumnName});for(this.getLatitudeContainer().FieldInfos.length>0&&i.push({selectedItem:n.data.latitude,colunmnId:this.getLatitudeContainer().FieldInfos[0].Id,UniqueColumnName:this.getLatitudeContainer().FieldInfos[0].UniqueColumnName}),this.getLongitudeContainer().FieldInfos.length>0&&i.push({selectedItem:n.data.longitude,colunmnId:this.getLongitudeContainer().FieldInfos[0].Id,UniqueColumnName:this.getLongitudeContainer().FieldInfos[0].UniqueColumnName}),t=0;t<this.getMarkerContainer().FieldInfos.length;t++)BoldBIDashboard.isNullOrUndefined(n.data[this.getMarkerContainer().FieldInfos[t].UniqueColumnName])||i.push({selectedItem:n.data[this.getMarkerContainer().FieldInfos[t].UniqueColumnName],columnId:this.getMarkerContainer().FieldInfos[t].Id,UniqueColumnName:this.getMarkerContainer().FieldInfos[t].UniqueColumnName})}return i},t.prototype.updateMultiSelectionData=function(n,t){var a=this.getShapeContainer().FieldInfos[this.drillLevelInfo.length],v=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Include),i=[],h=!1,r=[],f=t.data[this.DataGroupInfo.FieldContainers[1].FieldInfos[this.drillLevelInfo.length].UniqueColumnName],s,c,u,e,o,l;for(this.getMapProperties().SelectedFilterValues.length!==0&&this.getMapProperties().SelectedFilterValues[0].InitialDimensionFilter.Text.length!==0&&(r=this.getMapProperties().SelectedFilterValues[0].InitialDimensionFilter.Text,r.indexOf(f)>=0&&(h=!0)),s=0;s<t.shapeDataCollection.length;s++)c=t.shapeDataCollection[s].name,i.indexOf(c)<0&&i.push(c);for(u=0;u<i.length;u++){for(e=[],o=0;o<r.length;o++)r[o]!==f&&e.push(r[o]);BoldBIDashboard.isNullOrUndefined(e[u])?i[u]=f:i[u]!==e[u]&&(i[u]=e[u])}BoldBIDashboard.isNullOrUndefined(r)?i=[f]:(i=h?i.filter(function(n){return n!==f}):i.filter(function(n){return n===f||r.indexOf(n)>=0}),!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0&&h&&(i=i.filter(function(n){return n!==f&&r.indexOf(n)>=0})));l={FilterInfo:i,Action:v,IsStdDateTime:!1,IsMultiSelection:this.getMapProperties().EnableMultiSelection,IsRange:!1};this.getMapProperties().SelectedFilterValues=[this.masterFilterWindowInstance.updateInitialFiltersForFilterControls(a,this.widgetJson.UniqueName,"bbi-designer-dataset-string",l)];i.length===0?this.clearFilter(!0):(BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this),this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this),this.masterFilterWindowInstance.doInteraction(this.getMapProperties().UniqueName),this.designerInstance.modules.serialization.notifyChange())},t.prototype.isShapeSelected=function(n){var t=!1,r=this.getMapProperties().SelectedFilterValues,u,i,f;if(this.getMapProperties().MapType===MapType.Choropleth&&r.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getShapeContainer().FieldInfos.length>0)for(u=this.getShapeContainer().FieldInfos[this.drillLevelInfo.length],i=0;i<r.length;i++)if(f=r[i].InitialDimensionFilter.Text[0],t=f===n.data[u.UniqueColumnName],t)return this.clearFilterObject(n.maps,!0),t;return t},t.prototype.clearFilterObject=function(n,t){n===void 0&&(n=null);BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this);this.widgetJson.SelectedFilterValues=[];this.markerElement=null;this.isCurrentMaster=!1;this.designerInstance.modules.serialization.notifyChange();BoldBIDashboard.isNullOrUndefined(t)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):t&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName);BoldBIDashboard.isNullOrUndefined(n)||(n.layers[0].selectedItems=[])},t.prototype.updateMarkerOnSelection=function(){BoldBIDashboard.isNullOrUndefined(this.markerElement)||(this.markerElement.css("opacity",1),this.isMarkerSelected?this.markerElement.siblings().css("opacity",.4):(this.markerElement.siblings().css("opacity",1),this.markerElement=null))},t.prototype.isEnableSelectionHighlight=function(){return this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0},t.prototype.getLinkingData=function(n){var e=this,t={isEnabled:!1,parameterDetails:[],url:"",urlLinkInfo:[]},u,r,i,f;if(!BoldBIDashboard.isNullOrUndefined(this.widgetJson)&&!BoldBIDashboard.isNullOrUndefined(n.data)&&(u=this.designerInstance.modules.util.getSourceData(this.DataGroupInfo,!1,!1,!0),this.widgetJson.UrlLink.EnableLink&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.UrlLink.GridUrlType)&&this.widgetJson.UrlLink.GridUrlType.toString()===UrlLinkType[UrlLinkType.Row]&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.UrlLink.UrlPath)&&this.widgetJson.UrlLink.UrlPath!==""))for(r=u.filter(function(n){return e.widgetJson.UrlLink.PassingParameters.indexOf(n.Value)!==-1}),t.url=this.widgetJson.UrlLink.UrlPath,t.isEnabled=!0,i=0;i<r.length;i++)f=n.data[r[i].Id],t.parameterDetails.push({parameter:r[i].Value,value:f});return t.urlLinkInfo=this.widgetJson.UrlLink,t},t.prototype.updateReportItemData=function(n){var o=this,e,i,nt,r,l,b,tt,u,k,h,c;if(this.dataValues=n,this.isDataUpdated=!0,e=this.designerInstance.isDesignMode(),i=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode(),this.isShapeFileAvailable()&&this.isScriptFilesAvailable()){this.isMapLoaded=!0;BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this);BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this);BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this);this.shapecolor="#E5E5E5";this.hovercolor="gray";var s=[],f=null,d=null,it=null,rt=null;if(this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo),this.removeAllDrillElements(),BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error)BoldBIDashboard.isNullOrUndefined(n.Message)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.widgetContainerHelper.showControlError(this,n),this.designerInstance.canApplyTheme()&&(h=this.themeHelper.getMapHeaderTitle(),c=this.themeHelper.getMapHeaderSubTitle(),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getMapProperties().ContainerSettings.TextColor,h),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,c)));else if(!n.noDataAvailable||!BoldBIDashboard.isNullOrUndefined(n.mapMarkerData)&&n.mapMarkerData.length>0){this.mapItem.show();var v=this.designerInstance.modules.themeHelper.getMapDataLabelFontText(),y=this.designerInstance.modules.themeHelper.getMapLegendFontText(),p=this.designerInstance.modules.themeHelper.getMapLegendTitleFontText(),a=this.controlContainer.height()<this.controlContainer.width()?this.controlContainer.height():this.controlContainer.width(),ut=!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.dashboardFromData.loadFromData)&&this.designerInstance.model.dashboardFromData.loadFromData,g={visible:!1,valuePath:null,template:"#template"+this.bbdesigner$(this.mapElement).attr("id")+"_tooltip_"+this.drillLevelInfo.length},w=this.getFontSizeBasedOnResolution(),ft=this.designerInstance.isDarkTypeTheme()||!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.dashboardThemeSettings)&&this.designerInstance.model.dashboardThemeSettings.appearance.toLowerCase()==="dark",t={height:"100%",width:"100%",zoomSettings:{enable:!ut,toolbars:["ZoomIn","ZoomOut","Reset"],pinchZooming:!0,shouldZoomInitially:this.getDefaultZoomForMarkers()},background:"transparent",legendSettings:{visible:!1,type:this.getMarkerType(!1),mode:this.getMarkerType(!0),useMarkerShape:!0,width:"75%",height:"15",title:{text:""},toggleLegendSettings:{enable:!0},removeDuplicateLegend:!0,textStyle:{size:i?y.size:w,fontWeight:i?y.weight:"500",fontFamily:i?y.family:"var(--designer-font)",color:this.themeHelper.getMapLegendFontColor()},titleStyle:{size:i?p.size:w,fontWeight:i?p.weight:"Bold",fontFamily:i?p.family:"var(--designer-font)",color:this.themeHelper.getMapLegendFontColor()}},mapsArea:{background:"transparent"},layers:[{shapeData:ejdashboard[this.getMapProperties().ShapeData],shapeDataPath:"Country",shapePropertyPath:this.getShapePropertyPathValue(ejdashboard[this.getMapProperties().ShapeData]),dataSource:[],highlightSettings:{enable:this.isEnableSelectionHighlight()&&this.getMapProperties().FilterSettings.ActAsMasterWidget,fill:this.hovercolor},selectionSettings:{enable:this.isEnableSelectionHighlight()&&this.getMapProperties().FilterSettings.ActAsMasterWidget,enableMultiSelect:this.getMapProperties().EnableMultiSelection,fill:"gray"},tooltipSettings:g,shapeSettings:{fill:this.shapecolor,border:{color:"#ffffff",width:.75},autofill:!1,valuePath:"name",colorValuePath:"name",colorMapping:[{from:1,to:10,color:[]}]},bubbleSettings:{visible:!1,dataSource:[],minRadius:a*.005,maxRadius:a*.05,opacity:.8,valuePath:"name",colorValuePath:"name",colorMapping:[{from:1,to:10,color:this.getMapProperties().DefaultColor.Color}],tooltipSettings:g},markerSettings:{visible:!1,dataSource:s,shape:this.getMapProperties().MarkerShape,imageUrl:this.getMapProperties().ImageSource==="Local"?BoldBIDashboard.Dashboard.Resource.getImage(this.getMapProperties().ImageLocalUrl):this.getMapProperties().ImageUrl,fill:this.getMapProperties().MarkerShapeColor,height:Number(this.getMapProperties().MarkerHeight),width:Number(this.getMapProperties().MarkerWidth),legendText:"legendText",tooltipSettings:{visible:this.getMarkerContainer().FieldInfos.length>0,valuePath:this.getLatitudeContainer().FieldInfos.length>0?"latitude":null,template:"#template"+this.bbdesigner$(this.mapElement).attr("id")+"_marker_tooltip"}}}],theme:ft?"MaterialDark":"Material",shapeSelected:this.bbdesigner$.proxy(this.mapItemClick,this),bubbleClick:this.bbdesigner$.proxy(this.mapItemClick,this),markerClick:this.bbdesigner$.proxy(this.onMarkerClick,this),markerMouseMove:this.bbdesigner$.proxy(this.onMarkerMouseMove,this),loaded:this.bbdesigner$.proxy(this.actionComplete,this),legendRendering:this.bbdesigner$.proxy(this.legendRendering,this),tooltipRender:this.bbdesigner$.proxy(this.tooltipRendered,this),resize:this.bbdesigner$.proxy(this.restrictControlResize,this)};BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)||BoldBIDashboard.isNullOrUndefined(n.mapMarkerData)||this.getMapProperties().LegendType!=="Markers"&&this.getMarkerType(!1)!=="Markers"||(s=this.colorOpacityInExport(JSON.parse(n.mapMarkerData)),t.layers[0].markerSettings=[{visible:!0,dataSource:s,legendText:"legendText",shape:this.getMapProperties().MarkerShape,imageUrl:this.getMapProperties().ImageSource==="Local"?BoldBIDashboard.Dashboard.Resource.getImage(this.getMapProperties().ImageLocalUrl):this.getMapProperties().ImageUrl,fill:this.getMapProperties().MarkerShapeColor,height:Number(this.getMapProperties().MarkerHeight),width:Number(this.getMapProperties().MarkerWidth),tooltipSettings:{visible:this.getMarkerContainer().FieldInfos.length>0,valuePath:this.getLatitudeContainer().FieldInfos.length>0?"latitude":null,template:"#template"+this.bbdesigner$(this.mapElement).attr("id")+"_marker_tooltip"}}],t.legendSettings.type=this.getMarkerType(!1),t.legendSettings.mode=this.getMarkerType(!0),t.legendSettings.removeDuplicateLegend=!0,t.legendSettings.visible=this.getMapProperties().ShowLegend,t.legendSettings.toggleLegendSettings.applyShapeSettings=!1,t.legendSettings.visible=this.getMapProperties().ShowLegend,t.legendSettings.position=this.getMapProperties().LegendPosition,this.updateLegendSettingsBasedOnPosition(t));BoldBIDashboard.isNullOrUndefined(n)||n.data==="[]"||!BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)||typeof n=="string"&&n.indexOf("Sf_Exception")!==-1?n.data==="[]"&&BoldBIDashboard.DashboardUtil.IsColumnBindingsEmpty(this.DataColumnBindings)||!BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty?(BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this),this.resetColorCustomization()):(b=!1,b=BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())?!0:BoldBIDashboard.isNullOrUndefined(this.getShapeContainer().FieldInfos)?!0:this.getShapeContainer().FieldInfos.length===0,b&&(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.resetColorCustomization())):(f=JSON.parse(n.data),d=this.DataColumnBindings,it=n.formattedData.formatminvalue,rt=n.formattedData.formatmaxvalue,nt=this.getColumns(f),nt.length>1&&!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getValueContainer().FieldInfos.length>0&&this.getShapeContainer().FieldInfos.length>0?(r=this.getValueContainer().FieldInfos[0].UniqueColumnName,l=this.getShapeContainer().FieldInfos[0].UniqueColumnName,this.setGlobalColor(),this.generateTooltip(d),this.getMapProperties().IsEnableDrillDown=this.getShapeContainer().FieldInfos.length>1,t.layers[0].shapeDataPath=l,t.layers[0].shapeSettings.valuePath=l,t.layers[0].shapeSettings.colorValuePath=r,t.layers[0].tooltipSettings.visible=this.getMapProperties().ShowTooltip,t.layers[0].tooltipSettings.valuePath=l,this.getMapProperties().MapType===MapType.Choropleth?(t.layers[0].dataSource=this.getLocationValuesAsFixed(f,r),t.layers[0].shapeSettings.colorMapping[0].from=this.getFromValue(f,r),t.layers[0].shapeSettings.colorMapping[0].to=this.getToValue(f,r),t.layers[0].shapeSettings.colorMapping[0].from===t.layers[0].shapeSettings.colorMapping[0].to&&(t.layers[0].shapeSettings.colorMapping[0].from-=1),t.layers[0].shapeSettings.colorMapping[0].color=[this.monochromaticLowValueColorGeneration(this.getMapProperties().DefaultColor.Color),this.getMapProperties().DefaultColor.Color],this.updateLegendTitle(t),t.legendSettings.position=!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().LegendPosition)&&this.getMapProperties().LegendPosition!==""?this.getMapProperties().LegendPosition:"Top",e&&this.propertyPanel.updateCategoryVisibility("Map","Color Settings",!0),t.layers[0].dataLabelSettings={visible:this.getMapProperties().ShowLabel,labelPath:l,smartLabelMode:"Trim",textStyle:{size:i?v.size:w,fontWeight:i?v.weight:"400",fontFamily:i?v.family:"var(--designer-font)",color:this.getMapProperties().LabelColor.IsEdited?this.getMapProperties().LabelColor.Color:this.themeHelper.getMapDataLabelFontColor()}},this.setColorCustomization(n,t),this.updateLegendSettingsBasedOnPosition(t)):(t.layers[0].bubbleSettings=[{visible:!0,dataSource:this.getLocationValuesAsFixed(f,r),minRadius:a*.005,maxRadius:a*.05,opacity:.8,valuePath:r,colorValuePath:r,colorMapping:[{color:this.getMapProperties().DefaultColor.Color,to:this.getToValue(f,r),from:this.getFromValue(f,r)}],tooltipSettings:t.layers[0].tooltipSettings}],t.layers[0].bubbleSettings[0].from===t.layers[0].bubbleSettings[0].to&&(t.layers[0].bubbleSettings[0].from-=1)),BoldBIDashboard.isNullOrUndefined(t.layers[0].shapeData)&&(t.layers[0].shapeData=ejdashboard[this.getMapProperties().ShapeData]),this.designerInstance.isDesignMode()&&(this.propertyPanel.updateCategoryVisibility("Map","Formatting",!0),this.propertyPanel.updateItemVisibility("Map","BasicSettings","ShowLabel",this.getMapProperties().MapType===MapType.Choropleth)),this.setColorCustomization(n,t),this.updateLegendVisibilityBasedOnSize(t),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.getMapProperties().LegendType==="Markers"&&(t.legendSettings.type="Markers",t.legendSettings.title.text="",t.legendSettings.removeDuplicateLegend=!0,t.legendSettings.mode="Default",t.legendSettings.visible=this.getMapProperties().ShowLegend,this.updateLegendSettingsBasedOnPosition(t))):(BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this),this.setMapObj(t),this.resetColorCustomization()));BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)||BoldBIDashboard.isNullOrUndefined(n.mapMarkerData)?BoldBIDashboard.isNullOrUndefined(n.mapMarkerData)?(t.layers[0].markerSettings=[{visible:!1,dataSource:[]}],this.isMarkerAvilable=!1,this.propertyPanel.updateCategoryVisibility("Map","MarkerSettings",!1),this.getMapProperties().MarkerCustomization=null,k=this.designerInstance.element.find("#"+this.designerId+"_Map_MarkerSettings_MarkerCustomize").data("BoldBIDashboardCheckBox"),BoldBIDashboard.isNullOrUndefined(k)||k.option("checked",!1)):(s=JSON.parse(n.mapMarkerData),u=this,this.generateMarkerTooltip(),this.getMarkerImageContainer().FieldInfos.length>0?(this.mapDataWithImage=n.mapMarkerData,this.getMapProperties().MarkerShape="Image",this.getMapProperties().ImageSource="Parameterized URL",this.updateMarkerImageProperties()):(e&&this.propertyPanel.updateItemVisibility("Map","MarkerSettings","ImageSource",!1),this.getMapProperties().ImageSource==="Parameterized URL"&&(this.getMapProperties().MarkerShape="Balloon",this.getMapProperties().ImageSource="Local"),this.updateMarkerImageProperties(),this.bbdesigner$.map(s,function(n){for(var i=Object.keys(n),t=0;t<i.length;t++)!BoldBIDashboard.isNullOrUndefined(u.getLatitudeContainer())&&u.getLatitudeContainer().FieldInfos.length>0&&i[t]===u.getLatitudeContainer().FieldInfos[0].UniqueColumnName?(n[u.getLatitudeContainer().Name.toLowerCase()]=n[i[t]],delete n[i[t]]):!BoldBIDashboard.isNullOrUndefined(u.getLongitudeContainer())&&u.getLongitudeContainer().FieldInfos.length>0&&i[t]===u.getLongitudeContainer().FieldInfos[0].UniqueColumnName&&(n[u.getLongitudeContainer().Name.toLowerCase()]=n[i[t]],delete n[i[t]]);return n}),t.layers[0].markerSettings=[{visible:!0,dataSource:s,legendText:"legendText",shape:this.getMapProperties().MarkerShape,imageUrl:this.getMapProperties().ImageSource==="Local"?BoldBIDashboard.Dashboard.Resource.getImage(this.getMapProperties().ImageLocalUrl):this.getMapProperties().ImageUrl,fill:this.getMapProperties().MarkerShapeColor,height:Number(this.getMapProperties().MarkerHeight),width:Number(this.getMapProperties().MarkerWidth),tooltipSettings:{visible:this.getMarkerContainer().FieldInfos.length>0,valuePath:this.getLatitudeContainer().FieldInfos.length>0?"latitude":null,template:"#template"+this.bbdesigner$(this.mapElement).attr("id")+"_marker_tooltip"}}]),this.isMarkerAvilable=!0,e&&this.propertyPanel.updateCategoryVisibility("Map","MarkerSettings",!0),this.getMapProperties().MarkerShape==="Image"&&(e&&(this.propertyPanel.updateItemVisibility("Map","MarkerSettings","ImageSource",!0),this.setPropertyElement("MarkerSettings","ImageSource",this.getMapProperties().ImageSource)),this.updateImageSourceVisibility(this.getMarkerImageContainer().FieldInfos.length>0?"Parameterized URL":this.getMapProperties().ImageSource,t)),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this)):(this.generateMarkerTooltip(),tt=this.getMapProperties().ImageSource==="Local"?BoldBIDashboard.Dashboard.Resource.getImage(this.getMapProperties().ImageLocalUrl):this.getMapProperties().ImageSource==="URL"?this.getMapProperties().ImageUrl:null,t.layers[0].markerSettings=this.colorOpacityInExport(JSON.parse(n.mapMarkerData)),this.bbdesigner$.map(t.layers[0].markerSettings,function(n){n.tooltipSettings={visible:o.getMarkerContainer().FieldInfos.length>0,valuePath:o.getLatitudeContainer().FieldInfos.length>0?"latitude":null,template:"#template"+o.bbdesigner$(o.mapElement).attr("id")+"_marker_tooltip"};n.imageUrl=BoldBIDashboard.isNullOrUndefined(n.imageType)?o.getMapProperties().MarkerShape==="Image"&&o.getMapProperties().ImageSource==="Parameterized URL"?n.markerImageUrl:tt:n.imageType==="URL"?n.imageUrl:BoldBIDashboard.Dashboard.Resource.getImage(n.imageUrl)}),this.isMarkerAvilable=!0,e&&this.propertyPanel.updateCategoryVisibility("Map","MarkerSettings",!0),this.getMapProperties().MarkerShape==="Image"&&(e&&(this.propertyPanel.updateItemVisibility("Map","MarkerSettings","ImageSource",!0),this.setPropertyElement("MarkerSettings","ImageSource",this.getMapProperties().ImageSource)),this.updateImageSourceVisibility(this.getMapProperties().ImageSource)),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this));this.designerInstance.isDesignMode()&&(!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getShapeContainer().FieldInfos.length>0&&this.getLatitudeContainer().FieldInfos.length>0&&this.getLongitudeContainer().FieldInfos.length>0?this.propertyPanel.updateItemVisibility("Map","LegendSettings","LegendType",this.getMapProperties().ShowLegend):this.propertyPanel.updateItemVisibility("Map","LegendSettings","LegendType",!1));this.updateLegendSettingsBasedOnPosition(t);BoldBIDashboard.isNullOrUndefined(this.mapObj)?this.setMapObj(t):(this.getMapProperties().FilterSettings.ActAsMasterWidget&&this.removeShapeSelection(),this.updateLegendSettingsBasedOnPosition(this.mapObj),this.mapObj.layers[0].dataSource=t.layers[0].dataSource,this.mapObj.layers[0].shapeData=t.layers[0].shapeData,this.mapObj.layers[0].shapeDataPath=t.layers[0].shapeDataPath,this.mapObj.layers[0].shapePropertyPath=t.layers[0].shapePropertyPath,this.mapObj.legendSettings.visible=t.legendSettings.visible&&this.getResponsiveLegendVisibility(),this.mapObj.legendSettings.mode=this.getMarkerType(!0),this.mapObj.legendSettings.type=this.getMarkerType(!1),this.mapObj.legendSettings.position=t.legendSettings.position===""?"Top":t.legendSettings.position,this.mapObj.legendSettings.title.text=this.getLegendText(),this.mapObj.layers[0].shapeSettings=t.layers[0].shapeSettings,this.mapObj.layers[0].tooltipSettings=t.layers[0].tooltipSettings,this.mapObj.layers[0].bubbleSettings=t.layers[0].bubbleSettings,this.mapObj.layers[0].markerSettings=t.layers[0].markerSettings,this.mapObj.layers[0].dataLabelSettings=t.layers[0].dataLabelSettings,this.mapObj.layers[0].selectionSettings.enableMultiSelect=t.layers[0].selectionSettings.enableMultiSelect,this.mapObj.zoomSettings.shouldZoomInitially=this.getDefaultZoomForMarkers(),this.mapObj.refresh());this.designerInstance.modules.util.updateAction("Map","Link","Link");BoldBIDashboard.isNullOrUndefined(this.colorContainer)||BoldBIDashboard.isNullOrUndefined(this.mapObj)||(this.renderElements(),this.renderColorSettingsElement(),this.setPropertyElement("Formatting","ColorSettings",this.getMapProperties().EnableColorSettings?"Advanced":"Monochromatic"));this.updateInitialSelection()}else this.mapItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this),this.designerInstance.modules.util.hideLoadingIndicator(this.ControlContainer),this.designerInstance.canApplyTheme()&&(h=this.themeHelper.getMapHeaderTitle(),c=this.themeHelper.getMapHeaderSubTitle(),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getMapProperties().ContainerSettings.TextColor,h),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,c)),this.IsRendered=!0}this.designerInstance.canApplyTheme()&&(h=this.themeHelper.getMapHeaderTitle(),c=this.themeHelper.getMapHeaderSubTitle(),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getMapProperties().ContainerSettings.TextColor,h),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,c));this.isFromDraft=!1},t.prototype.colorOpacityInExport=function(n){if(!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.dashboardFromData.loadFromData)&&this.designerInstance.model.dashboardFromData.loadFromData&&(this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage)&&!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0)for(var t=0;t<n.length;t++)!BoldBIDashboard.isNullOrUndefined(n[t].fill)&&n[t].fill.length>0&&(n[t].fill=this.propertyPanel.hexToRGBA(n[t].fill)),!BoldBIDashboard.isNullOrUndefined(n[t].dataSource)&&n[t].dataSource.length>0&&!BoldBIDashboard.isNullOrUndefined(n[t].dataSource[0].colorValuePath)&&(n[t].dataSource[0].colorValuePath=this.propertyPanel.hexToRGBA(n[t].dataSource[0].colorValuePath));return n},t.prototype.setMapObj=function(n){BoldBIDashboard.isNullOrUndefined(this.mapObj)&&(this.mapObj=new ejdashboard.maps.Maps(n),this.mapObj.appendTo(this.mapElement[0]))},t.prototype.updateLegendTitle=function(n){this.isLegendTitleEdited=this.getMapProperties().LegendTitle!=="";n.legendSettings.title.text=this.getLegendText()},t.prototype.getToValue=function(n,t){for(var r=[],u=0,i=0;i<n.length;i++)r.push(n[i][t]);return u=Math.max.apply(null,r),parseFloat(u.toFixed(2))},t.prototype.generateMarkerTooltip=function(){var r,i,u=[],n,t;for(i='<script id="template'+this.bbdesigner$(this.mapElement).attr("id")+'_marker_tooltip" type="application/jsrender">',n="template"+this.bbdesigner$(this.mapElement).attr("id")+"_marker_tooltip",n="#"+n,this.bbdesigner$(n).length>0&&this.bbdesigner$(n).remove(),t=0;t<this.getMarkerContainer().FieldInfos.length;t++)u.push((r={},r[this.DataColumnBindings[this.getMarkerContainer().FieldInfos[t].UniqueColumnName]]="${"+this.getMarkerContainer().FieldInfos[t].UniqueColumnName+"}",r));i+=this.widgetHelper.generateToolTipTemplate(u,this.bbdesigner$(this.mapElement).attr("id"),1e3);i+="<\/script>";this.bbdesigner$(this.mapItem).append(i)},t.prototype.getFromValue=function(n,t){for(var r=[],u=0,i=0;i<n.length;i++)r.push(n[i][t]);return u=Math.min.apply(null,r),parseFloat(u.toFixed(2))},t.prototype.getLocationValuesAsFixed=function(n,t){return this.bbdesigner$.map(n,function(n){n[t]=parseFloat(n[t].toFixed(2))}),n},t.prototype.actionComplete=function(){var n,t,i;if(!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model)){for(n=0;n<this.bbdesigner$(this.mapElement).find(".e-maps-toolbar").length;n++)this.bbdesigner$(this.bbdesigner$(this.mapElement).find(".e-maps-toolbar")[n]).children().first().attr("stroke",this.designerInstance.isDarkTypeTheme()?"#FFFFFF":"#0cbdf4").attr("stroke-width",2),this.bbdesigner$(this.bbdesigner$(this.mapElement).find(".e-maps-toolbar")[n]).children().last().css("display","none");t=this.mapElement[0].children.length>0?this.mapObj:null;!BoldBIDashboard.isNullOrUndefined(t)&&this.isMapLoaded&&this.designerInstance.modules.util.hideLoadingIndicator(this.controlContainer);!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.dashboardFromData)&&this.designerInstance.model.dashboardFromData.loadFromData&&(i=this.bbdesigner$("#mapsmeasuretext"),i.remove());this.IsRendered=!0}},t.prototype.tooltipRendered=function(n){var r,t,u,i,f;if(this.mapElement.find("#"+this.mapElement.attr("id")+"_Interactive_Legend").length>0&&this.mapElement.find("#"+this.mapElement.attr("id")+"_Interactive_Legend").hide(),!BoldBIDashboard.isNullOrUndefined(n.options.data)){for(!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0&&(r=this.getValueContainer().FieldInfos.length>0&&this.getValueContainer().FieldInfos[0].MeasureFormatting!==null?"true":"false",n.options.data[this.getValueContainer().FieldInfos[0].UniqueColumnName]=this.getFormattingValue(this.getValueContainer().FieldInfos[0].MeasureFormatting,n.options.data[this.getValueContainer().FieldInfos[0].UniqueColumnName],r)),t=0;t<this.getTooltipContainer().FieldInfos.length;t++)u=this.getTooltipContainer().FieldInfos.length>0&&this.getTooltipContainer().FieldInfos[t].MeasureFormatting!==null?"true":"false",this.getTooltipContainer().FieldInfos[t].SummaryType!==SummaryType.NONE&&(n.options.data[this.getTooltipContainer().FieldInfos[t].UniqueColumnName]=this.getFormattingValue(this.getTooltipContainer().FieldInfos[t].MeasureFormatting,n.options.data[this.getTooltipContainer().FieldInfos[t].UniqueColumnName],u));for(i=0;i<this.getMarkerContainer().FieldInfos.length;i++)this.getMarkerContainer().FieldInfos[i].FieldActualType==="bbi-designer-dataset-number"&&(f=this.getMarkerContainer().FieldInfos.length>0&&this.getMarkerContainer().FieldInfos[i].MeasureFormatting!==null?"true":"false",n.options.data[this.getMarkerContainer().FieldInfos[i].UniqueColumnName]=this.getFormattingValue(this.getMarkerContainer().FieldInfos[i].MeasureFormatting,n.options.data[this.getMarkerContainer().FieldInfos[i].UniqueColumnName],f))}},t.prototype.restrictControlResize=function(n){n.cancel=!0},t.prototype.getFormattingValue=function(n,t,i){var r=this.handlingSingleQuotes(n.DecimalSeparator.AliasValue),u=this.handlingSingleQuotes(n.GroupSeparator.AliasValue),f=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(n.Prefix),this.DataGroupInfo.DataSourceName),e=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(n.Suffix),this.DataGroupInfo.DataSourceName);return BoldBIDashboard.DashboardUtil.formattedText(t,n.Culture,n.DecimalPoints,n.FormatType,r,u,f,e,n.Unit,i,this.designerInstance,n.EnableLakhsAndCroreRep)},t.prototype.handlingSingleQuotes=function(n){return!BoldBIDashboard.isNullOrUndefined(n)&&n==="'"?"&#39;":n},t.prototype.updateWidgetSize=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this)?this.widgetContainerHelper.showControlError(this,this.dataValues):BoldBIDashboard.isNullOrUndefined(this.mapElement)||BoldBIDashboard.isNullOrUndefined(this.mapObj)||(this.mapObj.previousProjection="",this.updateLegendVisibilityBasedOnSize(this.mapObj),this.mapObj.legendSettings.title.text=this.getLegendText(),this.designerInstance.canApplyTheme()||this.designerInstance.isViewMode()||this.updateFontStyle(this.mapObj),this.updateFontStyleForBreadCrumb(this.contentContainer),this.mapObj.refresh(),this.updateInitialSelection())},t.prototype.updateFontStyle=function(n){BoldBIDashboard.isNullOrUndefined(n)||(n.legendSettings.textStyle.size=n.legendSettings.titleStyle.size=n.layers[0].dataLabelSettings.textStyle.size=this.getFontSizeBasedOnResolution())},t.prototype.getMapProperties=function(){return this.widgetJson},t.prototype.createFieldContaierForUI=function(n,t,i,r,u){var f=new BoldBIDashboard.Dashboard.FieldContainerForUI;return f.Name=n,f.DisplayName=t,f.ContainerType=i,BoldBIDashboard.isNullOrUndefined(r)||(f.CategoryCount=r),BoldBIDashboard.isNullOrUndefined(u)||(f.IsDrillSection=!0),n==="HiddenColumn"&&(f.QueryOrder=0,f.ShowDescriptionIcon=!0,f.TooltipText=this.locale.fieldContainer.hiddenColumnMessage.map),f},t.prototype.getColumns=function(n){for(var i=Object.keys(n[0]),r=[],t=0;t<i.length;t++)r.push({id:i[t],text:i[t]});return r},t.prototype.generateTooltip=function(n){var f,e,o,r,u=[],t,i;for(r='<script id="template'+this.bbdesigner$(this.mapElement).attr("id")+"_tooltip_"+this.drillLevelInfo.length+'" type="application/jsrender">',t="template"+this.bbdesigner$(this.mapElement).attr("id")+"_tooltip_"+this.drillLevelInfo.length,t="#"+t,this.bbdesigner$(t).length>0&&this.bbdesigner$(t).remove(),u.push((f={},f[n[this.getShapeContainer().FieldInfos[this.drillLevelInfo.length].UniqueColumnName]]="${"+this.getShapeContainer().FieldInfos[this.drillLevelInfo.length].UniqueColumnName+"}",f)),u.push((e={},e[n[this.getValueContainer().FieldInfos[0].UniqueColumnName]]="${"+this.getValueContainer().FieldInfos[0].UniqueColumnName+"}",e)),i=0;i<this.getTooltipContainer().FieldInfos.length;i++)u.push((o={},o[n[this.getTooltipContainer().FieldInfos[i].UniqueColumnName]]="${"+this.getTooltipContainer().FieldInfos[i].UniqueColumnName+"}",o));r+=this.widgetHelper.generateToolTipTemplate(u,this.bbdesigner$(this.mapElement).attr("id"),1e3);r+="<\/script>";this.bbdesigner$(this.mapItem).append(r)},t.prototype.mapItemDispose=function(){BoldBIDashboard.isNullOrUndefined(this.mapObj)||this.mapObj.destroy();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Map)},t.prototype.UpdateColorCustomization=function(n,t){if(t)!this.getMapProperties().EnableColorSettings&&t&&(this.renderElements(),this.setPropertyElement("Formatting","ColorSettings",this.getMapProperties().EnableColorSettings?"Advanced":"Monochromatic"),this.getMapProperties().EnableColorSettings=!1);else{if(this.getMapProperties().ColorCustomization=n,n.Type===ColorCustomizationType.Individual){var i=this.getShapeContainer().FieldInfos[0],r=this.getMapProperties().ColorCustomization.SolidColorInfo[0].BasedOn.UniqueColumnName==="";this.getMapProperties().ColorCustomization.SolidColorInfo[0].BasedOn.FieldId=i.Id;this.getMapProperties().ColorCustomization.SolidColorInfo[0].BasedOn.UniqueColumnName=i.UniqueColumnName;this.getMapProperties().ColorCustomization.SolidColorInfo[0].BasedOn.SummaryType=SummaryType.NONE;r&&this.updateEditedProperty(this.getMapProperties().ColorCustomization.SolidColorInfo[0],i)}this.getMapProperties().EnableColorSettings=!0;this.designerInstance.modules.serialization.notifyChange();this.dataConfigurationInstance.postDraggedFields()}},t.prototype.updateEditedProperty=function(n,t){for(var r=n.DefaultColorSets,i=0;i<r.length;i++){var u=r[i].Color.toString(),f=r[i].Name.toString(),e=t.FieldActualType==="bbi-designer-dataset-datetime"?t.Id+"_"+t.DateTimeFormat:t.Id,o=this.designerInstance.modules.resource.getColumnValueColorCode(e,f.toString());r[i].IsEdited=u!==o.toString()}},t.prototype.editColorCustomization=function(){var f=new BoldBIDashboard.DashboardDesignerUtility.AdvancedColorCustomization(this.designerInstance),i=BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)?new ColorCustomization:this.getMapProperties().ColorCustomization,n=new ColorFieldsInfo,t,r,u;n.ColorPicker=ColorSetColorPickers.NormalColorPicker;n.Name=WidgetProperty.FillColor;n.DisplayName="Fill color";t=[];t.push(n);r=this.getValueContainer().FieldInfos[0];u={colorCustomizationObj:i,DataGroupInfo:this.DataGroupInfo,showFirstDimension:!0,colorFields:t,hasDefaultColor:!0,defaultBasedOnField:r,defaultColorFill:i.DefaultColor,isDefaultFormat:!0};f.populateUI(u,this,"UpdateColorCustomization")},t.prototype.setDefaultColorCustomization=function(){this.getMapProperties().ColorCustomization=BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)&&this.DataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getShapeContainer().FieldInfos.length>0?this.getColorCustomization():null;this.getMapProperties().DefaultColor=new DefaultColorSet;this.getMapProperties().EnableColorSettings=!1;this.designerInstance.modules.serialization.notifyChange()},t.prototype.updateBackWardCompatability=function(){var n=this.getMapProperties().Data.Containers.filter(function(n){return n.Name==="Value"}),i,t;BoldBIDashboard.isNullOrUndefined(this.getMapProperties().DefaultColor)&&n.length>0&&(i=this.getMapProperties().MaxColor,n[0].FieldInfos.length===0&&(n=this.getMapProperties().Data.Containers.filter(function(n){return n.Name==="Name"})),t=n[0].FieldInfos,t.length>0&&(this.getMapProperties().DefaultColor=new DefaultColorSet,this.getMapProperties().DefaultColor.IsEdited=!0,this.getMapProperties().DefaultColor.Color=i,this.getMapProperties().DefaultColor.Name=t[0].UniqueColumnName))},t.prototype.monochromaticLowValueColorGeneration=function(n){n=n.replace(/^\s*#|\s*$/g,"");var t=parseInt(n.substr(0,2),16),i=parseInt(n.substr(2,2),16),r=parseInt(n.substr(4,2),16);return t=t*.4+255*.6,i=i*.4+255*.6,r=r*.4+255*.6,"#"+Math.floor(16777216+(t<<16)+(i<<8)+r).toString(16).slice(1)},t.prototype.setGlobalColor=function(){var n=this.getMapProperties().DefaultColor,r=this.getValueContainer(),i=r.FieldInfos.length>0?r.FieldInfos[0].UniqueColumnName:null,u=BoldBIDashboard.Dashboard.WidgetHelper.getGlobalColumnId(i,this.DataGroupInfo.FieldContainers),t=BoldBIDashboard.Dashboard.WidgetHelper.getColorCode(this,u,n);BoldBIDashboard.isNullOrUndefined(n.Color)||n.Name.length!==0?(t=BoldBIDashboard.isNullOrUndefined(t)?n.Color:t,n.Name===i?n.Color=n.IsEdited?n.Color:t:(n.Name=i,n.Color=t,n.IsEdited=!1)):(n.Name=i,n.Color=t,n.IsEdited=!1)},t.prototype.getColorCustomization=function(){var n=this.getMapProperties();return BoldBIDashboard.isNullOrUndefined(n.ColorCustomization)&&this.DataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getShapeContainer().FieldInfos.length>0||this.checkFieldIdPresent()?(this.getMapProperties().ColorCustomization=new ColorCustomization,this.getMapProperties().ColorCustomization.Type=ColorCustomizationType.Gradient):!BoldBIDashboard.isNullOrUndefined(n.ColorCustomization)&&this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length===0&&(this.getMapProperties().ColorCustomization=null),this.getMapProperties().ColorCustomization},t.prototype.getMarkerCustomization=function(){return this.getMapProperties().MarkerCustomization},t.prototype.checkFieldIdPresent=function(){return!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)&&this.getMapProperties().ColorCustomization.Type===ColorCustomizationType.Individual&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getShapeContainer().FieldInfos.length>0&&this.getMapProperties().ColorCustomization.SolidColorInfo[0].BasedOn.FieldId===this.getShapeContainer().FieldInfos[0].Id&&this.getMapProperties().ColorCustomization.SolidColorInfo[0].DefaultColorSets.length===0},t.prototype.setColorCustomization=function(n,t){var i,s,o,u;if(!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)){if(i=this.getMapProperties().ColorCustomization,s=this.doDataFieldChanged(i),s){this.resetColorCustomization();return}var h=null,c=null,e=i.Type===ColorCustomizationType.Gradient?i.GradientSettings.BasedOn:i.Type===ColorCustomizationType.Rule?i.RuleRangeSettings.BasedOn:i.SolidColorInfo[0].BasedOn,r=void 0,f=void 0;i.Type===ColorCustomizationType.Gradient?BoldBIDashboard.isNullOrUndefined(n.minMaxValues)||(o=JSON.parse(n.minMaxValues),Object.keys(o).length>0&&(h=Number(o["Min_"+e.FieldId.substring(15)+"_Color"]),c=Number(o["Max_"+e.FieldId.substring(15)+"_Color"]),r=this.getGradientColors(i,h,c),f=e.FieldId.substring(15)+"_Color",t.legendSettings.mode="Interactive")):i.Type===ColorCustomizationType.Individual?!BoldBIDashboard.isNullOrUndefined(i.SolidColorInfo[0].DefaultColorSets)&&i.SolidColorInfo[0].DefaultColorSets.length>0&&(BoldBIDashboard.Dashboard.WidgetHelper.updateIndividualColorBasedonTheme(this.getMapProperties().EnableColorSettings,i,this.getShapeContainer().FieldInfos,this.designerInstance),r=this.getIndividualColors(n,i.SolidColorInfo),u=this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name==="Shape"})[0].FieldInfos[0].UniqueColumnName,this.getMapProperties().MapType===MapType.Choropleth?t.layers[0].shapeSettings.colorValuePath=u:t.layers[0].bubbleSettings[0].colorValuePath=u,t.legendSettings.visible=!1):i.Type===ColorCustomizationType.Rule&&(BoldBIDashboard.isNullOrUndefined(i.RuleRangeSettings.RangeColorInfo[0].DimensionConditionalValue)?(r=this.getRangeColorMapping(i.RuleRangeSettings,JSON.parse(n.minMaxValues)),r.push({color:i.DefaultColor}),f=e.FieldId.substring(15)+"_Color"):(r=this.getTextBasedRangeColors(n,i.RuleRangeSettings),u=this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name==="Shape"})[0].FieldInfos[this.drillLevelInfo.length].UniqueColumnName,this.getMapProperties().MapType===MapType.Choropleth?t.layers[0].shapeSettings.colorValuePath=u:t.layers[0].bubbleSettings[0].colorValuePath=u),t.legendSettings.mode="Default");BoldBIDashboard.isNullOrUndefined(r)||(this.getMapProperties().MapType===MapType.Choropleth?t.layers[0].shapeSettings.colorMapping=r:t.layers[0].bubbleSettings[0].colorMapping=r);BoldBIDashboard.isNullOrUndefined(f)||(this.getMapProperties().MapType===MapType.Choropleth?t.layers[0].shapeSettings.colorValuePath=f:t.layers[0].bubbleSettings[0].colorValuePath=f)}},t.prototype.getLegendTitleBasedOnField=function(n){for(var r,u,i=this.designerInstance.modules.dataSet,t=0;t<i.datasets.length;t++)if(i.datasets[t].Id===this.DataGroupInfo.DataSourceID)for(r=0;r<i.datasets[t].Fields.length;r++)if(u=i.datasets[t].Fields[r],u.Id===n)return u.Name;return""},t.prototype.resetColorCustomization=function(){this.propertyPanel.updateCategoryVisibility("Map","Formatting",!1);BoldBIDashboard.isNullOrUndefined(this.colorContainer)||(this.updateGradientColors(this.getMapProperties().DefaultColor.Color),this.setDefaultColorCustomization(),this.renderElements(),this.setPropertyElement("Formatting","ColorSettings",this.getMapProperties().EnableColorSettings?"Advanced":"Monochromatic"))},t.prototype.doDataFieldChanged=function(n){var i=!1,u,r,t,f;if(n.Type===ColorCustomizationType.Rule){if(!BoldBIDashboard.isNullOrUndefined(n.RuleRangeSettings.RangeColorInfo[0].DimensionConditionalValue))for(u=this.getShapeContainer().FieldInfos,r=this.getMarkerContainer().FieldInfos,t=0;t<u.length;t++)if(n.RuleRangeSettings.BasedOn.FieldId===u[t].Id){i=!1;break}else if(r.length>0){for(f=0;f<r.length;t++)if(n.RuleRangeSettings.BasedOn.FieldId===r[t].Id){i=!1;break}}else i=!0}else n.Type===ColorCustomizationType.Individual&&(i=n.SolidColorInfo[0].BasedOn.FieldId!==this.getShapeContainer().FieldInfos[0].Id);return i},t.prototype.getGradientColors=function(n,t,i){var r=n.GradientSettings.GradientColorInfo,s=r.Low.Color,h=r.Mid.Color,f=r.High.Color,c=r.Low.Value,y=r.Mid.Value,e=r.High.Value,l=t,a=i;r.Low.IsCustom&&(l=c);r.High.IsCustom&&(a=e);var o=(l+a)/2,p=t,u=[],v=!1;return this.updateDefaultFormatColor(n,u),r.Low.IsCustom||r.Mid.IsCustom||r.High.IsCustom?(r.Low.IsCustom&&(v=t<c,t=c,v&&u.push({color:n.DefaultColor,from:p,to:t-1})),r.HasMidColor?(r.Mid.IsCustom&&(o=y),u.push({color:[s,h],from:t,to:o}),r.High.IsCustom?u.push({color:[h,f],from:o,to:e}):u.push({color:[h,f],from:o,to:i})):r.High.IsCustom&&t<e?u.push({color:[s,f],from:t,to:e}):u.push({color:[s,f],from:t,to:i}),r.High.IsCustom&&i>e&&u.push({color:n.DefaultColor,from:e+1,to:i})):t===i?u.push({color:[f,f],from:t-1e-6,to:i}):u=r.HasMidColor?[{color:[s,h],from:t,to:o},{color:[h,f],from:o,to:i}]:[{color:[s,f],from:t,to:i}],u},t.prototype.updateDefaultFormatColor=function(n,t){var i="",r=n.GradientSettings.GradientColorInfo,u=n.GradientSettings.BasedOn.DefaultFormatType;u===DefaultFormatType.Specific&&(i=r.DefaultFormatColor.Color,t.push({color:i,from:0,to:1}))},t.prototype.getRangeColorMapping=function(n,t){for(var h,a=[],i=[],r=0,c=1,e=1e-6,l=0;l<n.RangeColorInfo.length;l++){var u=l,s=this.getRangeColors(n.RangeColorInfo[u].PropertyColorPair),f=[n.RangeColorInfo[u].StartRange,n.RangeColorInfo[u].EndRange],o=[];BoldBIDashboard.isNullOrUndefined(t)?o.push(494065645841247e-338,17976931348623157e292):n.BasedOn.ValueType===ValueType.Value?o.push(Number(t["Min_"+n.BasedOn.FieldId.substring(15)+"_Color"]),Number(t["Max_"+n.BasedOn.FieldId.substring(15)+"_Color"])):o.push(0,100);switch(n.RangeColorInfo[u].MeasureCondition){case 0:i.push({StartRange:f[r]+e,EndRange:o[c]+e,Color:s,Label:n.RangeColorInfo[u].RangeLabel});break;case 1:i.push({StartRange:f[r],EndRange:o[c]+e,Color:s,Label:n.RangeColorInfo[u].RangeLabel});break;case 2:i.push({StartRange:o[r],EndRange:f[r]-e,Color:s,Label:n.RangeColorInfo[u].RangeLabel});break;case 3:i.push({StartRange:o[r],EndRange:f[r]+e,Color:s,Label:n.RangeColorInfo[u].RangeLabel});break;case 4:i.push({StartRange:f[r],EndRange:f[r],Color:s,Label:n.RangeColorInfo[u].RangeLabel});break;case 5:i.push({StartRange:o[r],EndRange:f[r]-e,Color:s});i.push({StartRange:f[r]+e,EndRange:o[c]+e,Color:s,Label:n.RangeColorInfo[u].RangeLabel});break;case 6:i.push({StartRange:f[r],EndRange:f[c],Color:s,Label:n.RangeColorInfo[u].RangeLabel});break;case 7:i.push({StartRange:o[r],EndRange:f[r]-e,Color:s});i.push({StartRange:f[c]+e,EndRange:o[c]+e,Color:s,Label:n.RangeColorInfo[u].RangeLabel})}}for(h=0;h<i.length;h++)a.push({from:i[h].StartRange,to:i[h].EndRange,color:i[h].Color[0],label:i[h].Label,showLegend:!BoldBIDashboard.isNullOrUndefined(i[h].Label)});return a},t.prototype.onFieldDragDropped=function(n,t,i,r){var f=!0,e="",u;if(!BoldBIDashboard.isNullOrUndefined(n.FieldType)&&n.FieldType===FieldType.Dimensions)for(u=0;u<t.FieldContainers.length;u++)if(e=t.FieldContainers[u].Name===n.ContainerName?n.ContainerName.toLowerCase():"",e==="shape"&&t.FieldContainers[u].FieldInfos.length===0){f=!0;break}else if(e==="shape"&&t.FieldContainers[u].FieldInfos.length===1){if(this.getMapProperties().ShapeType==="State")return!1;this.designerInstance.modules.util.alertDialog(this.locale.multiLevelDrillDialog.titleText,this.locale.multiLevelDrillDialog.dialogContentText,IconType.question,AlertType.Confirm,!1,"",{height:140,width:500,method:"getDialogOutput",instance:this.designerInstance.modules.util,dataInfo:{eventObj:r,droppedItem:i}});f=!1}return f},t.prototype.getRangeColors=function(n){for(var i=[],t=0;t<n.length;t++)if(n[t].WidgetProperties===0){i.push(n[t].Color);break}return i},t.prototype.getTextBasedRangeColors=function(n,t){var e=[],s=this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name==="Shape"})[0].FieldInfos[this.drillLevelInfo.length].UniqueColumnName,h=t.BasedOn.FieldId.substring(15)+"_CustomColor",r=JSON.parse(n.data),o=[],i,u,f;if(!BoldBIDashboard.isNullOrUndefined(t))for(i=0;i<r.length;i++)u=t.BasedOn.FieldId.substring(15)+"_Condition",f=this.isConditionLabelAdded(o,r[i][u]),e.push({color:r[i][h],value:r[i][s],showLegend:!f,label:r[i][u]==="DefaultColor"?"Others":r[i][u]}),f||o.push(r[i][u]);return e},t.prototype.isConditionLabelAdded=function(n,t){for(var i=0;i<n.length;i++)if(n[i]===t)return!0;return!1},t.prototype.getIndividualColors=function(n,t){var f=[],u=this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name==="Shape"})[0].FieldInfos[0].UniqueColumnName,e=t[0].BasedOn.FieldId.substring(15)+"_Color",r=JSON.parse(n.data),o=t.filter(function(n){return n.BasedOn.UniqueColumnName===u})[0].DefaultColorSets,i;if(!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0)for(i=0;i<r.length;i++)r[i][e]=this.getValidatedSolidColor(o,r[i][u]),f.push({color:r[i][e],value:r[i][u]});return f},t.prototype.getValidatedSolidColor=function(n,t){for(var i=0;i<n.length;i++)if(n[i].Name.toString()===t)return n[i].Color},t.prototype.renderColorSettings=function(n,t,i){if(this.categoryId=this.designerId+"_"+t+"_"+i.categoryName,this.colorContainer=this.designerInstance.element.find("#"+this.categoryId),this.colorContainer.length!==0||BoldBIDashboard.isNullOrUndefined(n))this.colorContainer.length>0&&(this.renderElements(),this.renderColorSettingsElement());else{this.colorContainer=BoldBIDashboard.buildTag("div.e-dashbrd-customcolor-container","",{},{id:this.categoryId});var r=BoldBIDashboard.buildTag("div","",{},{id:this.categoryId+"_wrap"}),u=BoldBIDashboard.buildTag("div.e-basic-advance-panel-wrap","",{width:"100%"},{id:this.designerId+"_"+t+"_basicAdvancePanel"}),f=this.getAdvance(this.categoryId);u.append(f);r.append(u);this.colorContainer.append(r);n.append(this.colorContainer);this.renderElements()}},t.prototype.getAdvance=function(n){var t=BoldBIDashboard.buildTag("div.e-advance-row","",{},{id:this.designerId+"_advanceRow_table"}),i=BoldBIDashboard.buildTag("div.e-advance-color-settings-button","",{},{}),r=BoldBIDashboard.buildTag("button.e-advanced-color-settings-button bbi-dbrd-btn-small bbi-dbrd-btn-primary","Customize",{width:"230px"},{id:n+"_advance_settings_button",type:"button"});return i.append(r),t.append(this.monochromaticSection()),t.append(i)},t.prototype.monochromaticSection=function(){var r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designerInstance.designerPanel.selectedReportItems[0]),n=BoldBIDashboard.buildTag("div.e-color-settings-monochromatic-wrap","",{"margin-left":"195px"},{id:this.designerId+"_"+this.Type+"_formatting_wrap"}),t=BoldBIDashboard.buildTag("div.e-color-settings-monochromatic-color-wrapper","",{}),i=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:this.designerId+"_"+this.Type+"_monochromatic_ColorPicker"});return t.append(i),i.BoldBIDashboardColorPicker({value:this.getMapProperties().DefaultColor.Color,cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label e-color-settings-monochromatic-color-picker",select:this.bbdesigner$.proxy(this.updateMonochromaticColorValue,r),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown}),n.append(t),n},t.prototype.renderElements=function(){var n=this.colorContainer.find(".e-color-settings-monochromatic-wrap"),t=this.colorContainer.find(".e-advance-color-settings-button"),i=this.colorContainer.find(".e-advanced-color-settings-button");this.getMapProperties().EnableColorSettings?(n.css("display","none"),t.css("display","block")):this.getMapProperties().EnableColorSettings||(n.css("display","block"),t.css("display","none"));i.off("click",this.bbdesigner$.proxy(this.editColorCustomization,this,!0));i.on("click",this.bbdesigner$.proxy(this.editColorCustomization,this,!0))},t.prototype.renderColorSettingsElement=function(){this.colorContainer.find("#"+this.designerId+"_"+this.Type+"_monochromatic_ColorPicker").BoldBIDashboardColorPicker({value:this.getMapProperties().DefaultColor.Color})},t.prototype.updateColorSettings=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designerInstance.designerPanel.selectedReportItems[0]),i=this.colorContainer.find(".e-color-settings-monochromatic-wrap"),r=this.colorContainer.find(".e-advance-color-settings-button");n==="Monochromatic"?((t.getMapProperties().ColorCustomization.Type!==ColorCustomizationType.Individual||t.getMapProperties().ColorCustomization.Type===ColorCustomizationType.Individual&&t.getMapProperties().ColorCustomization.SolidColorInfo[0].DefaultColorSets.length>0)&&(t.setDefaultColorCustomization(),t.dataConfigurationInstance.postDraggedFields()),t.getMapProperties().EnableColorSettings=!1,t.updateGradientColors(this.getMapProperties().DefaultColor.Color),i.css("display","block"),r.css("display","none")):n==="Advanced"&&(t.editColorCustomization(t),i.css("display","none"),r.css("display","block"))},t.prototype.updateMonochromaticColorValue=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designerInstance.designerPanel.selectedReportItems[0]),i=this.propertyPanel.getHexColorFromRGBA(n.RGBA),r;t.getMapProperties().EnableColorSettings||BoldBIDashboard.isNullOrUndefined(i)||(r=t.getMapProperties().DefaultColor.Color!==i,t.getMapProperties().DefaultColor.Color=i,t.getMapProperties().DefaultColor.IsEdited=r,t.updateGradientColors(i))},t.prototype.mapDrillDownAction=function(n){var u=this,i,r;if(this.drillLevelInfo.length!==this.getShapeContainer().FieldInfos.length-1){var e=n.maps.layers[0].shapeData,t=null,f=n.data[this.getShapeContainer().FieldInfos[this.drillLevelInfo.length].UniqueColumnName];if(BoldBIDashboard.isNullOrUndefined(n.shapeData)?this.bbdesigner$.map(n.maps.layersCollection[0].shapeData.features,function(i){for(var f=Object.keys(i.properties),r=0;r<f.length;r++)i.properties[f[r]]===n.data[u.getShapeContainer().FieldInfos[u.drillLevelInfo.length].UniqueColumnName]&&(t=i.properties.shapeName)}):t=n.shapeData.shapeName,BoldBIDashboard.isNullOrUndefined(t)){this.designerInstance.modules.util.alertDialog(this.locale.errorMessage.shapeDataInfo,this.locale.errorMessage.mapFileLoadingError,IconType.information,AlertType.Alert,!1,"");return}i=null;BoldBIDashboard.isNullOrUndefined(ejdashboard[t])&&(this.isDrillAction=!0,this.mapHelper.downloadMapJsonData(t),this.mapHelper.setTimerToDwnldMapFile({widgetJson:this.getMapProperties(),mapObj:this,controlType:"Map",shapeData:t},!0));this.getMapProperties().EnableColorSettings&&this.getMapProperties().ColorCustomization.Type===ColorCustomizationType.Individual&&this.bbdesigner$.map(this.getMapProperties().MapType===MapType.Bubble?n.maps.layers[0].bubbleSettings[0].colorMapping:n.maps.layers[0].shapeSettings.colorMapping,function(n){n.value===f&&(i=n.color)});r=JSON.parse(JSON.stringify(this.DataGroupInfo));this.drillLevelInfo.push({ColorMapping:this.getMapProperties().EnableColorSettings?this.getMapProperties().MapType===MapType.Bubble?n.maps.layers[0].bubbleSettings[0].colorMapping:n.maps.layers[0].shapeSettings.colorMapping:null,Level:this.drillLevelInfo.length,selectedItem:f,RowText:null,Id:r.FieldContainers[1].FieldInfos[this.drillLevelInfo.length].Id,ShapeData:e,DataSource:this.getMapProperties().MapType===MapType.Bubble?n.maps.layers[0].bubbleSettings[0].dataSource:n.maps.layers[0].dataSource,From:this.getMapProperties().MapType===MapType.Bubble?n.maps.layers[0].bubbleSettings[0].colorMapping[0].from:n.maps.layers[0].shapeSettings.colorMapping[0].from,To:this.getMapProperties().MapType===MapType.Bubble?n.maps.layers[0].bubbleSettings[0].colorMapping[0].to:n.maps.layers[0].shapeSettings.colorMapping[0].to,IndividualColor:i,CurrentShapeName:t});this.widgetDataFetch(r)}},t.prototype.widgetDataFetch=function(n){this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer);var i=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.controlContainer),r=this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(n,i),u=this.getWidgetInfo(this.DataGroupInfo),t=this.masterFilterWindowInstance.getSelectedValuesForWidgetRequest(),f=this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design;this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.WidgetAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,fieldInfo:r,dataset:n.DataSourceID,widgetInfo:u,request:AjaxRequest.Widget.toString(),getColumnListBasedOnVisibility:!1,selectedValuesList:BoldBIDashboard.isNullOrUndefined(t)?"":JSON.stringify(t),isDataSampleForViewMode:f})},{fnction:this.bbdesigner$.proxy(this.loadDrillDownData,this)})},t.prototype.loadDrillDownData=function(n){var t=this,i;BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error?BoldBIDashboard.isNullOrUndefined(n.Message)||this.designPanelInstance.showControlError(this.contentContainer,n,this.CellInfo,n.OuterMessage):(this.designerInstance.modules.resource.updateColorCodeInfo(n),i=this.drillLevelInfo[this.drillLevelInfo.length-1].CurrentShapeName,BoldBIDashboard.isNullOrUndefined(ejdashboard[i])?setTimeout(function(){BoldBIDashboard.isNullOrUndefined(ejdashboard[i])?(t.mapObj.mapCommonFileTimerCount++,t.mapObj.mapCommonFileTimerCount<6?t.loadDrillDownData(n):(t.mapFileTimeCount=0,t.designerInstance.modules.util.alertDialog(t.locale.errorMessage.shapeDataInfo,t.locale.errorMessage.mapFileLoadingError,IconType.information,AlertType.Alert,!1,""),t.drillLevelInfo.splice(t.drillLevelInfo.length-1,1),t.designerInstance.designerPanel.hideLoadingIndicator(t.controlContainer))):(t.mapObj.layers[0].shapeData=ejdashboard[i],t.mapObj.layers[0].shapePropertyPath=t.getShapePropertyPathValue(ejdashboard[i]),t.loadMapDrillData(t.mapObj,n))},6e3):(this.mapObj.layers[0].shapeData=ejdashboard[i],this.mapObj.layers[0].shapePropertyPath=this.getShapePropertyPathValue(ejdashboard[i]),this.loadMapDrillData(this.mapObj,n)))},t.prototype.loadMapDrillData=function(n,t){var i,f,e,r,u,o,h,s;BoldBIDashboard.isNullOrUndefined(this.breadCrumbItem)?this.createBreadcrumb():(this.removeBreadcrumb(this.breadCrumbItem),this.createBreadcrumb());i=JSON.parse(t.data);this.generateTooltip(this.DataColumnBindings);f=this.getValueContainer().FieldInfos[0].UniqueColumnName;e=this.getShapeContainer().FieldInfos[this.drillLevelInfo.length].UniqueColumnName;n.layers[0].shapeDataPath=e;n.layers[0].shapeSettings.valuePath=e;n.layers[0].tooltipSettings.valuePath=e;n.layers[0].dataLabelSettings.labelPath=e;r=this.getFromValue(i,f);u=this.getToValue(i,f);this.getMapProperties().MapType===MapType.Bubble&&(o=this.controlContainer.height()<this.controlContainer.width()?this.controlContainer.height():this.controlContainer.width(),n.layers[0].bubbleSettings=[{visible:!0,dataSource:i,minRadius:o*.005,maxRadius:o*.05,opacity:.8,valuePath:n.layers[0].shapeSettings.colorValuePath,colorValuePath:n.layers[0].shapeSettings.colorValuePath,colorMapping:[{color:this.getMapProperties().DefaultColor.Color,to:u,from:r}],tooltipSettings:n.layers[0].tooltipSettings}]);this.getMapProperties().EnableColorSettings?this.getMapProperties().ColorCustomization.Type===ColorCustomizationType.Individual?(h=this.drillLevelInfo.length===1?[this.ColorLuminance(this.drillLevelInfo[0].IndividualColor,.7),this.drillLevelInfo[0].IndividualColor]:n.layers[0].shapeSettings.colorMapping[0].color,s=void 0,this.getMapProperties().MapType===MapType.Bubble?(s=this.drillLevelInfo.length===1?this.drillLevelInfo[0].IndividualColor:n.layers[0].bubbleSettings[0].colorMapping[0].color,n.layers[0].bubbleSettings[0].colorMapping=[{from:r,to:u,color:s}],n.layers[0].bubbleSettings[0].colorValuePath=f):(n.layers[0].shapeSettings.colorMapping=[{from:r,to:u,color:h}],n.layers[0].shapeSettings.colorValuePath=f)):this.setColorCustomization(t,n):this.getMapProperties().MapType===MapType.Bubble?(n.layers[0].bubbleSettings[0].colorMapping=[{color:this.getMapProperties().DefaultColor.Color,to:u,from:r}],n.layers[0].bubbleSettings[0].colorMapping[0].from===n.layers[0].shapeSettings.colorMapping[0].to&&(n.layers[0].bubbleSettings[0].colorMapping[0].from-=1)):(n.layers[0].shapeSettings.colorMapping[0].from=r,n.layers[0].shapeSettings.colorMapping[0].to=u,n.layers[0].shapeSettings.colorMapping[0].from===n.layers[0].shapeSettings.colorMapping[0].to&&(n.layers[0].shapeSettings.colorMapping[0].from-=1));this.getMapProperties().MapType===MapType.Bubble?n.layers[0].bubbleSettings[0].dataSource=i:n.layers[0].dataSource=i;n.previousProjection="";n.layers[0].tooltipSettings.template="#template"+this.bbdesigner$(this.mapElement).attr("id")+"_tooltip_"+this.drillLevelInfo.length;n.refresh();this.designerInstance.designerPanel.hideLoadingIndicator(this.controlContainer)},t.prototype.removeBreadcrumb=function(n){BoldBIDashboard.isNullOrUndefined(n)||n.remove()},t.prototype.createBreadcrumb=function(){var n=this.designerId+"MapElement"+this.getMapProperties().UniqueName+"Breadcrumb";this.breadCrumbItem=BoldBIDashboard.buildTag("div.Breadcrumb","",{width:"100%",height:"20px",color:"#5997f9","font-weight":"400","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"100"},{id:n});this.breadCrumbItem.BoldBIDashboardBreadcrumb({dataSource:this.getBreadcrumbDatasource(),width:"100%",selected:this.bbdesigner$.proxy(this.drillUp,this)});this.mapElement.prepend(this.breadCrumbItem);this.updateBreadCrumbStyle(this.drillLevelInfo,this.contentContainer);this.designerInstance.element.find("#"+n+"_breadcrumbDiv").css("background","transparent")},t.prototype.updateBreadCrumbStyle=function(n,t){if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0){var i=n.length;this.bbdesigner$(t.find(".e-dashboardbreadcrumb-drill")[i]).addClass("e-current-drilldowntext");this.updateFontStyleForBreadCrumb(t)}},t.prototype.updateFontStyleForBreadCrumb=function(n){var i=this.getFontSizeBasedOnResolution(),r,t,u;for(n.find(".e-dashboardbreadcrumb-drillIconForward").css("font-size",i==="16px"?"12px":i==="32px"?"20px":"8px"),r=n.find(".e-dashboardbreadcrumb-drill"),t=0;t<r.length;t++)u=this.designerInstance.measureText(r.eq(t).html(),100,{size:i,fontStyle:"Normal",fontFamily:"var(--designer-font)"}),r.eq(t).css({"font-size":i,width:u.width+3+"px"})},t.prototype.getBreadcrumbDatasource=function(){var r=[],n,t,i,e;if(this.drillLevelInfo.length>0&&(n=this.getShapeContainer(),!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.FieldInfos.length>1))){var o=n.FieldInfos[0].DisplayName,u=this.getMapProperties().UniqueName,f="mapItem";for(r.push({id:this.designerId+f+u+"_Breadcrumb",displayText:o,columnId:n.FieldInfos[0].UniqueColumnName}),t=0;t<this.drillLevelInfo.length;t++)i=t+1,e=BoldBIDashboard.isNullOrUndefined(n.FieldInfos[i])?"":n.FieldInfos[i].UniqueColumnName,r.push({id:this.designerId+f+u+"drillLevel"+i+"_Breadcrumb",displayText:this.drillLevelInfo[t].selectedItem.toString(),columnId:e})}return r},t.prototype.drillUp=function(n){for(var u,s,f,r,e,o,t=1,i=0;i<n.model.dataSource.length;i++)if(n.model.dataSource[i].id===n.tabId){t=i+1;break}for(u=t;u<=this.drillLevelInfo.length;u++)s=n.model.dataSource[u].id.split("_Breadcrumb")[0],f=this.contentContainer.find("#"+s),BoldBIDashboard.isNullOrUndefined(f.data("BoldBIDashboardScroller"))||f.BoldBIDashboardScroller("destroy"),f.remove();if(this.mapObj.layers[0].shapeData=this.drillLevelInfo[t-1].ShapeData,this.mapObj.layers[0].shapePropertyPath=this.getShapePropertyPathValue(this.drillLevelInfo[t-1].ShapeData),this.mapObj.layers[0].shapeDataPath=n.model.dataSource[t-1].columnId,this.mapObj.layers[0].shapeSettings.valuePath=n.model.dataSource[t-1].columnId,this.mapObj.layers[0].tooltipSettings.valuePath=n.model.dataSource[t-1].columnId,this.mapObj.layers[0].dataLabelSettings.labelPath=n.model.dataSource[t-1].columnId,this.getMapProperties().EnableColorSettings){for(r=this.drillLevelInfo[t-1].ColorMapping,e=[],i=0;i<r.length;i++)e.push({from:r[i].from,to:r[i].to,color:r[i].color,label:r[i].label,value:r[i].value,showLegend:r[i].showLegend,maxOpacity:r[i].maxOpacity,minOpacity:r[i].minOpacity});this.getMapProperties().MapType===MapType.Choropleth?(this.mapObj.layers[0].shapeSettings.colorMapping=e,this.getMapProperties().ColorCustomization.Type===ColorCustomizationType.Individual&&t===1?this.mapObj.layers[0].shapeSettings.colorValuePath=n.model.dataSource[t-1].columnId:this.getMapProperties().ColorCustomization.Type!==ColorCustomizationType.Rule||BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization.RuleRangeSettings.RangeColorInfo[0].DimensionConditionalValue)||(this.mapObj.layers[0].shapeSettings.colorValuePath=n.model.dataSource[t-1].columnId)):(this.mapObj.layers[0].bubbleSettings[0].colorMapping=e,this.getMapProperties().ColorCustomization.Type===ColorCustomizationType.Individual&&t===1?this.mapObj.layers[0].bubbleSettings[0].colorValuePath=n.model.dataSource[t-1].columnId:this.getMapProperties().ColorCustomization.Type!==ColorCustomizationType.Rule||BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization.RuleRangeSettings.RangeColorInfo[0].DimensionConditionalValue)||(this.mapObj.layers[0].bubbleSettings[0].colorValuePath=n.model.dataSource[t-1].columnId))}else this.getMapProperties().MapType===MapType.Bubble?(this.mapObj.layers[0].bubbleSettings[0].colorMapping[0].from=this.drillLevelInfo[t-1].From,this.mapObj.layers[0].bubbleSettings[0].colorMapping[0].to=this.drillLevelInfo[t-1].To,this.mapObj.layers[0].bubbleSettings[0].colorMapping[0].from===this.mapObj.layers[0].bubbleSettings[0].colorMapping[0].to&&(this.mapObj.layers[0].bubbleSettings[0].colorMapping[0].from-=1)):(this.mapObj.layers[0].shapeSettings.colorMapping[0].from=this.drillLevelInfo[t-1].From,this.mapObj.layers[0].shapeSettings.colorMapping[0].to=this.drillLevelInfo[t-1].To,this.mapObj.layers[0].shapeSettings.colorMapping[0].from===this.mapObj.layers[0].shapeSettings.colorMapping[0].to&&(this.mapObj.layers[0].shapeSettings.colorMapping[0].from-=1));for(this.getMapProperties().MapType===MapType.Bubble?this.mapObj.layers[0].bubbleSettings[0].dataSource=this.drillLevelInfo[t-1].DataSource:this.mapObj.layers[0].dataSource=this.drillLevelInfo[t-1].DataSource,o=this.drillLevelInfo.length;o>=t;o--)this.drillLevelInfo.splice(o-1);this.removeBreadcrumb(this.breadCrumbItem);this.drillLevelInfo.length>0&&this.createBreadcrumb();this.mapObj.layers[0].tooltipSettings.template="#template"+this.bbdesigner$(this.mapElement).attr("id")+"_tooltip_"+this.drillLevelInfo.length;this.mapObj.previousProjection="";this.mapObj.refresh()},t.prototype.removeAllDrillElements=function(){var i,n,r,t;for(this.removeBreadcrumb(this.breadCrumbItem),i=this.getBreadcrumbDatasource(),n=1;n<i.length;n++)r=i[n].id.split("_Breadcrumb")[0],t=this.contentContainer.find("#"+r),BoldBIDashboard.isNullOrUndefined(t.data("BoldBIDashboardScroller"))||t.BoldBIDashboardScroller("destroy"),t.remove();this.drillLevelInfo=[]},t.prototype.getValueContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Value")},t.prototype.getShapeContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Shape")},t.prototype.getLatitudeContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Latitude")},t.prototype.getLongitudeContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Longitude")},t.prototype.getTooltipContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Tooltip")},t.prototype.getMarkerContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Name")},t.prototype.getMarkerImageContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"MarkerImage")},t.prototype.getHiddenColumnContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"HiddenColumn")},t.prototype.getMarkerFields=function(){return[{Name:WidgetProperty.MarkerCustomize,DisplayName:"Marker Shape"}]},t.prototype.getPatternVisibility=function(){return this.getMapProperties().MarkerShape==="Image"&&this.getMapProperties().ImageSource==="Parameterized URL"},t.prototype.renderBrowseBox=function(n,t,i){if(BoldBIDashboard.isNullOrUndefined(n))this.propertyPanel.updateItemVisibility("Map","MarkerSettings","Browse",i.isVisible),this.resetConfiguration();else{var r=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%",display:BoldBIDashboard.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designerId+"_"+t+"_"+i.name+"_container"});this.localFieldTable=BoldBIDashboard.buildTag("table.bbi-designer-dsconfig-table","",{width:"100%",height:"50px"},{unselectable:"on",id:this.designerId+"_image_local_table"});this.renderBrowseTable();this.renderUploadBox();r.append(this.localFieldTable);r.append(this.uploadbox);n.append(r)}},t.prototype.renderBrowseTable=function(){var t=BoldBIDashboard.buildTag("tr","",{}),s=BoldBIDashboard.buildTag("td","",{}),n=BoldBIDashboard.buildTag("table","",{unselectable:"on"}),i=BoldBIDashboard.buildTag("tr","",{},{}),r=BoldBIDashboard.buildTag("tr","",{},{}),p=BoldBIDashboard.buildTag("td","",{}),u,f;this.progressTxt=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label","",{float:"left"},{id:this.designerId+"_image_progress_tr"});u=BoldBIDashboard.buildTag("td","",{},{id:this.designerId+"_image_path_error_icon_td"});f=BoldBIDashboard.buildTag("td","",{},{colspan:"2"});this.designerInstance.modules.util.renderErrIndictor(u,this.designerId);var e=BoldBIDashboard.buildTag("tr","",{height:"22.5px"},{id:this.designerId+"_image_path_td"}),h=BoldBIDashboard.buildTag("tr.e-progresserrmsg","",{height:"22.5px",display:"none"},{id:this.designerId+"_image_progresserr_tr"}),c=BoldBIDashboard.buildTag("td","",{}),w=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label","",{"font-size":"12px","font-weight":"normal"},{id:this.designerId+"_image_progresserr_tr"}),l=BoldBIDashboard.buildTag("td","",{},{colspan:"2"}),a=BoldBIDashboard.buildTag("td","",{},{}),v=BoldBIDashboard.buildTag("td","",{float:"right",width:"172px"},{});this.filePath=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-content-label","",{height:"25px","border-right":"0px","padding-bottom":"0.5px","padding-top":"0.5px",width:"214px","margin-left":"4px"},{id:this.designerId+"map_image_path",type:"text",readonly:"readonly"});BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ImageName)||this.filePath.val(this.getMapProperties().ImageName);var o=BoldBIDashboard.buildTag("div.bbi-dbrd-btn-secondary bbi-dbrd-btn-small  e-dbrd-browse-image-button","",{display:"inline-block","margin-left":"-41px","min-width":"0px"},{id:this.designerId+"_file_datasource_browse"}),b=BoldBIDashboard.buildTag("span.bbi-designer-horizontal-browse bbi-designer-browse-icon","",{"font-size":"16px","line-height":"28px"}),y=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-top":"13px"});y.text("Browse Image");v.append(y);this.localFieldTable.append(t);t.append(v);s.append(n);t.append(s);n.append(i);i.append(p);i.append(u);n.append(e,r.clone(),r);l.append(this.filePath);e.append(l);e.append(a);a.append(o);f.append(this.progressTxt);r.append(f);c.append(w);h.append(c);o.on("click",this.bbdesigner$.proxy(this.onBrowseClick,this));o.append(b);n.append(h);this.uploadbox=BoldBIDashboard.buildTag("div","",{id:this.designerId+"map_image_upload"})},t.prototype.onBrowseClick=function(){this.designerInstance.element.find("#"+this.designerId+"map_image_upload .e-uploadinput").click()},t.prototype.renderUploadBox=function(){var n=this,t=BoldBIDashboard.buildTag("div","",{height:"0px"},{id:this.designerId+"map_image_upload"});this.designerInstance.element.append(t);this.ejUploadBox=t.BoldBIDashboardUploadbox({width:"0px",height:"0px",uploadName:"image",extensionsAllow:".jpg,.png,.gif,.jpeg,.bmp,.emf,.jfif,.jpe,.rle,.tif,.tiff,.wmf,.dib,.ico",autoUpload:!0,showFileDetails:!1,dialogAction:{content:this.designerInstance.element},fileSize:78643200,saveUrl:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.uploadimage,fileSelect:this.bbdesigner$.proxy(this.onfileSelect,this),error:this.bbdesigner$.proxy(this.onuploadError,this),success:this.bbdesigner$.proxy(this.onuploadSuccess,this),inProgress:this.bbdesigner$.proxy(this.fileProgress,this),beforeSend:this.bbdesigner$.proxy(function(t){n.designerInstance.beforeSendRequestForUploadbox(n.designerInstance,"UploadAction",t)},this)}).data("BoldBIDashboardUploadbox");this.designerInstance.element.find(this.designerId+"_img_upload_SelectButton").hide()},t.prototype.onfileSelect=function(n){this.resetConfiguration();n.files.length!==0&&(n.files[0].size>n.model.fileSize?(n.cancel=!0,this.progressTxt.text("")):(this.designerInstance.element.find("#"+this.designerId+"_image_progress_tr").css("display","inline-block"),this.progressTxt.text("Initiating upload..."),this.fileName=this.fileExt=null,this.filePath.val(n.files[0].name)));BoldBIDashboard.browserInfo().name!=="msie"&&this.ejUploadBox._uploadFileListDelete()},t.prototype.resetConfiguration=function(){var n=this.widgetHelper.getCurrentWidgetInstance();this.designerInstance.element.find("#"+this.designerId+"map_image_path").val(n.getMapProperties().ImageName);this.fileName=n.fileName;this.fileExt=n.fileExt;this.designerInstance.element.find("#"+this.designerId+"_image_progress_tr").css("display","none")},t.prototype.fileProgress=function(n){this.progressTxt.text("Uploading..."+n.percentage+"%")},t.prototype.onuploadError=function(){this.progressTxt.text("Upload failed.")},t.prototype.onuploadSuccess=function(n){var t=this.widgetHelper.getCurrentWidgetInstance(),i,r;this.contentContainer=this.designerInstance.designerPanel.selectedReportItems[0].find(".bbi-dbrd-content-container");this.progressTxt.css("display","none");i=JSON.parse(n.responseText);i&&i.Status?(t.fileExt=i.Data.ext,t.fileName=i.Data.fileId+i.Data.ext,t.fileId=i.Data.fileId,t.getMapProperties().ImageName=i.Data.fileName,r="data:image/"+i.Data.ext+";base64,"+i.Data.source,t.getMapProperties().ImageLocalUrl=i.Data.fileId+i.Data.ext,BoldBIDashboard.Dashboard.Resource.addImage(t.getMapProperties().ImageLocalUrl,r),BoldBIDashboard.isNullOrUndefined(t.getMapProperties().MarkerCustomization)||(t.getMapProperties().MarkerCustomization.DefaultImageUrl=t.getMapProperties().ImageLocalUrl),t.updateMarkerSettings(t.getMapProperties().MarkerShape,t.getMapProperties().MarkerWidth,t.getMapProperties().MarkerHeight,t.getMapProperties().MarkerShapeColor,t.getMapProperties().ImageLocalUrl),this.designerInstance.modules.serialization.notifyChange()):this.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.upload,this.locale.errorMessage.failedToUploadFile,IconType.errors,AlertType.Alert,!1,i?i.Message:null)},t.prototype.renderMarkerCustomizeButton=function(n,t,i){var r=this.widgetHelper.getCurrentWidgetInstance(),e,u,f;if(BoldBIDashboard.isNullOrUndefined(n))f=this.designerInstance.element.find("#"+this.designerId+"_"+t+"_"+i.name).data("BoldBIDashboardCheckBox"),this.checkBoxEle=f.model.id,f.option("checked",!BoldBIDashboard.isNullOrUndefined(r.getMapProperties().MarkerCustomization)&&r.isMarkerConfigured(r));else{e=BoldBIDashboard.buildTag("div","",{"margin-bottom":"15px",display:"inline-block",width:"190px"},{id:this.designerId+"_"+t+"_"+i.name+"_custom"});u=BoldBIDashboard.buildTag("div","",{width:"435px","margin-top":"3px","margin-left":"15px",border:"0px solid","border-color":"red",display:"inline-block"},{id:this.designerId+"_"+t+"_"+i.name+"_container"});this.markerCustomizebutton=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-small","Customize",{width:"150px"},{id:this.designerId+"_"+t+"_"+i.name+"_MarkerCustomize",type:"button"});var o=BoldBIDashboard.buildTag("div","",{width:"435px","margin-top":"3px","margin-left":"15px",border:"0px solid","border-color":"red",display:"inline-block"},{id:this.designerId+"_"+t+"_"+i.name+"_checkbox_container"}),c=BoldBIDashboard.buildTag("div","",{width:"190px",float:"left","margin-left":"3px","margin-top":"5.5px"}),l=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily","Advanced",{"margin-right":"14px","margin-bottom":"11px",display:"inline-block","font-size":"12px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",float:"right"},{id:this.designerId+"_"+t+"_"+i.name+"_custom_chkbox"}),s=BoldBIDashboard.buildTag("div.e-dbrd-axis-range-check-box-container","",{},{id:this.designerId+"_"+t+"_"+i.name+"_parent"}),h=BoldBIDashboard.buildTag("input","",{},{id:this.designerId+"_"+t+"_"+i.name,type:"checkbox"});s.append(h);h.BoldBIDashboardCheckBox({checked:!BoldBIDashboard.isNullOrUndefined(r.getMapProperties().MarkerCustomization)&&r.isMarkerConfigured(r),change:this.bbdesigner$.proxy(this.checkChange,this),width:(this.propertyPanel.propertyPanelContainer.width()-33)*57/100-15+"px",cssClass:"e-designer-prop-checkbox"});o.append(c.append(l),s);u.append(e,this.markerCustomizebutton);n.append(o);n.append(u);this.markerCustomizebutton.off("click",this.bbdesigner$.proxy(this.onMarkerCustomize,this));this.markerCustomizebutton.on("click",this.bbdesigner$.proxy(this.onMarkerCustomize,this));this.updateMarkerCustomzieBtnVisiblity(this.markerCustomizebutton,r)}},t.prototype.isMarkerConfigured=function(n){return!BoldBIDashboard.isNullOrUndefined(n.getLatitudeContainer())&&!BoldBIDashboard.isNullOrUndefined(n.getLongitudeContainer())?n.getLongitudeContainer().FieldInfos.length>0&&n.getLongitudeContainer().FieldInfos.length>0:!1},t.prototype.updateMarkerCustomzieBtnVisiblity=function(n,t){BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)||!this.isMarkerConfigured(t)?n.attr("disabled","disabled"):n.removeAttr("disabled")},t.prototype.checkChange=function(n){var t=this.widgetHelper.getCurrentWidgetInstance(),i;this.checkBoxEle=n.model.id;n.isChecked&&BoldBIDashboard.isNullOrUndefined(t.getMapProperties().MarkerCustomization)?(t.mapObj.legendSettings.title.text="",t.onMarkerCustomize(),this.markerCustomizebutton.removeAttr("disabled"),!BoldBIDashboard.isNullOrUndefined(t.getValueContainer())&&t.getValueContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(t.getShapeContainer())&&t.getShapeContainer().FieldInfos.length>0&&t.getLatitudeContainer().FieldInfos.length>0&&t.getLongitudeContainer().FieldInfos.length>0&&t.propertyPanel.updateItemVisibility("Map","LegendSettings","LegendType",t.getMapProperties().ShowLegend)):n.isChecked?BoldBIDashboard.isNullOrUndefined(t.getMapProperties().MarkerCustomization)||this.markerCustomizebutton.removeAttr("disabled"):(this.markerCustomizebutton.attr("disabled","disabled"),t.getMapProperties().MarkerCustomization=null,t.getMapProperties().LegendType="Layers",t.setPropertyElement("LegendSettings","LegendType",t.getMapProperties().LegendType),(BoldBIDashboard.isNullOrUndefined(t.getValueContainer())||t.getValueContainer().FieldInfos.length!==0)&&(BoldBIDashboard.isNullOrUndefined(t.getShapeContainer())||t.getShapeContainer().FieldInfos.length!==0)||(t.mapObj.legendSettings.visible=!1),t.propertyPanel.updateItemVisibility("Map","LegendSettings","LegendType",!1),BoldBIDashboard.isNullOrUndefined(t.mapObj)||(t.mapObj.legendSettings.title.text=t.getLegendText(),t.mapObj.legendSettings.type=t.getMarkerType(!1),t.mapObj.legendSettings.mode=t.getMarkerType(!0),t.updateLegendSettingsBasedOnPosition(t.mapObj)),i=t.getMapProperties().ImageSource==="URL"?t.getMapProperties().ImageUrl:t.getMapProperties().ImageSource==="Local"?t.getMapProperties().ImageLocalUrl:t.getMapProperties().ImageSrc,t.updateMarkerSettings(t.getMapProperties().MarkerShape,t.getMapProperties().MarkerWidth,t.getMapProperties().MarkerHeight,t.getMapProperties().MarkerShapeColor,i),t.designerInstance.modules.serialization.notifyChange())},t.prototype.renderMarkerImage=function(n,t,i){if(BoldBIDashboard.isNullOrUndefined(n))this.propertyPanel.updateItemVisibility("Map","MarkerSettings","ImageURL",i.isVisible);else{var u=BoldBIDashboard.buildTag("div","",{"margin-bottom":"15px",display:BoldBIDashboard.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designerId+"_"+t+"_"+i.name+"_container"}),o=BoldBIDashboard.buildTag("div","",{width:(this.propertyPanel.propertyPanelContainer.width()-33)*47/100+"px",float:"left","margin-left":"3px","margin-top":"8.5px"}),f=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"});f.text(i.name);o.append(f);BoldBIDashboard.isNullOrUndefined(i.displayName)||f.text(i.displayName);u.append(o);var e=BoldBIDashboard.buildTag("div","",{width:(this.propertyPanel.propertyPanelContainer.width()-33)*57/100+"px",display:"inline-block","margin-top":"3px",border:"0px solid","border-color":"red"},{id:this.designerId+"_"+t+"_"+i.name+"_parent"}),r=BoldBIDashboard.buildTag("input.e-textbox","",{height:"28px",width:(this.propertyPanel.propertyPanelContainer.width()-33)*57/100-15+"px","box-sizing":"border-box"},{id:this.designerId+"_"+t+"_"+i.name,type:"text"}),s=BoldBIDashboard.buildTag("label.editLabel bbi-designer-tile-content","Accepted file types: png, jpeg, jpg, svg",{float:"right","font-size":"12px",padding:"4px 15px 0 0"});r.val(i.value);e.append(r);e.append(s);r.bind("blur",this.bbdesigner$.proxy(this.textFocusOut,this,i,"MarkerSettings","Map"));r.bind("keyup",this.bbdesigner$.proxy(this.textKeyUp,this,i,"MarkerSettings","Map"));this.ejMaskEditObj[r.attr("id")]=r;u.append(e);n.append(u);this.propertyPanel.updateItemDisable(i.itemType,"Map","MarkerSettings",i.name,BoldBIDashboard.isNullOrUndefined(i.isDisable)?!1:i.isDisable?!0:!1)}},t.prototype.textFocusOut=function(n,t,i){var r=this.ejMaskEditObj[this.designerId+"_"+i+"_"+t+"_"+n.name].val();BoldBIDashboard.isNullOrUndefined(this.propertyPanel.labelLastModifiedInfo)||this.propertyPanel.labelLastModifiedInfo.item!==n||(this.propertyPanel.labelLastModifiedInfo=null);this.propertyPanel.onValueChange(n,t,i,{value:r})},t.prototype.textKeyUp=function(n,t,i,r){if(this.propertyPanel.labelLastModifiedInfo={item:n,categoryName:t,elementType:i},r.keyCode===13){var u=this.ejMaskEditObj[this.designerId+"_"+i+"_"+t+"_"+n.name].val();this.propertyPanel.onValueChange(n,t,i,{value:u})}},t.prototype.onMarkerCustomize=function(){var n=this.widgetHelper.getCurrentWidgetInstance(),t,i,r,u;n.isMapItem=!0;t=new ColorCustomization;i=new BoldBIDashboard.DashboardDesignerUtility.AdvancedColorCustomization(this.designerInstance);i.dialogObj._titleText.text("Marker Customization");r=["Rule"];BoldBIDashboard.isNullOrUndefined(n.getMapProperties().MarkerCustomization)?t.Type=ColorCustomizationType.Rule:t=this.bbdesigner$.extend(!0,{},n.getMapProperties().MarkerCustomization);u={colorCustomizationObj:t,DataGroupInfo:n.dataGroupInfo,colorFields:n.markerFields,colorTypeCollection:r,controlType:"Map"};i.populateUI(u,n,"updateMarkerCustomizeSettings")},t.prototype.updateMarkerCustomizeSettings=function(n,t){var i=this.widgetHelper.getCurrentWidgetInstance(),r;t?BoldBIDashboard.isNullOrUndefined(this.getMapProperties().MarkerCustomization)&&(r=this.designerInstance.element.find("#"+this.checkBoxEle).data("BoldBIDashboardCheckBox"),r.option("checked",!1)):(i.getMapProperties().MarkerCustomization=n,i.getMapProperties().MarkerCustomization.RuleRangeSettings.RangeColorInfo[0].PropertyColorPair[0].MarkerCustomization.DefaultMarkerShape=i.getMapProperties().MarkerShape,i.getMapProperties().MarkerCustomization.RuleRangeSettings.RangeColorInfo[0].PropertyColorPair[0].MarkerCustomization.DefaultImageUrl=i.getMapProperties().ImageSource==="URL"?this.getMapProperties().ImageUrl:i.getMapProperties().ImageSource==="Local"?this.getMapProperties().ImageLocalUrl:this.getMapProperties().ImageSrc,i.getMapProperties().MarkerCustomization.RuleRangeSettings.RangeColorInfo[0].PropertyColorPair[0].MarkerCustomization.DefaultMarkerColor=i.getMapProperties().MarkerShapeColor,i.getMapProperties().MarkerCustomization.RuleRangeSettings.RangeColorInfo[0].PropertyColorPair[0].MarkerCustomization.DefaultMarkerWidth=i.getMapProperties().MarkerWidth,i.getMapProperties().MarkerCustomization.RuleRangeSettings.RangeColorInfo[0].PropertyColorPair[0].MarkerCustomization.DefaultMarkerHeight=i.getMapProperties().MarkerHeight,this.designerInstance.modules.serialization.notifyChange(),this.dataConfigurationInstance.postDraggedFields());i.isMapItem=!1},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.MapItem",InternalMapReportItem,window);BoldBIDashboard.DashboardDesignerUtility.MapItem.prototype.initialize(),function(n){n.Choropleth="Choropleth";n.Bubble="Bubble"}(MapType||(MapType={}));BoldBIDashboardDesigner.bbdesignerstatic$.views.helpers({formatTooltip:function(n,t,i,r,u,f,e,o,s,h,c,l){return BoldBIDashboard.DashboardUtil.formattedText(n,t,i,r,u,f,e,o,s,h,null,l==="false"?!1:!0,c)}});var EJ2MapCommonHelper=function(){function n(n){this.mapFileDwnldTimer=null;this.mapFileTimerCount=0;this.locale=null;this.dashboardDesigner=n;this.bbdesigner$=n.bbdesigner$;this.locale=n.getLocalizationContent()}return n.prototype.setTimerToDwnldMapFile=function(n,t){BoldBIDashboard.isNullOrUndefined(ejdashboard[n.widgetJson.ShapeData])||t?(this.mapFileTimerCount=0,this.bbdesigner$(n.mapObj.controlContainer).attr("data-prevent-loading-indicator","true"),n.mapObj.isShapeLoaded=!1,this.addingTimerForMapFile(n.mapObj,n.widgetJson,n.controlType,t,n.shapeData)):this.openMap(n.widgetJson,n.mapObj,n.controlType,t)},n.prototype.addingTimerForMapFile=function(n,t,i,r,u){var e=this,f=this;BoldBIDashboard.isNullOrUndefined(this.mapFileDwnldTimer)||this.clearTimer(this.mapFileDwnldTimer);this.mapFileDwnldTimer=setTimeout(function(n,t,i,o){var s,h;if(!BoldBIDashboard.isNullOrUndefined(o.model))if(s=1,BoldBIDashboard.isNullOrUndefined(f.bbdesigner$(n.ControlContainer).attr("mapcounter"))?f.bbdesigner$(n.ControlContainer).attr("mapcounter",s):s=parseInt(f.bbdesigner$(n.ControlContainer).attr("mapcounter"),10),BoldBIDashboard.isNullOrUndefined(ejdashboard[t.ShapeData]))s++,f.bbdesigner$(n.ControlContainer).attr("mapcounter",s),s<50?f.addingTimerForMapFile(n,t,i,r,u):BoldBIDashboard.isNullOrUndefined(ejdashboard[BoldBIDashboard.isNullOrUndefined(u)?t.ShapeData:u])&&(e.dashboardDesigner.modules.util.hideLoadingIndicator(n.ControlContainer),n.mapCommonFileTimerCount=0,f.showMapFileErr(n,t,i),f.bbdesigner$(n.ControlContainer).removeAttr("mapcounter"),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(n),f.clearTimer(f.mapFileDwnldTimer));else{if(n.isDrillAction){n.isDrillAction=!1;f.bbdesigner$(n.ControlContainer).removeAttr("mapcounter");f.clearTimer(f.mapFileDwnldTimer);return}n.isShapeLoaded=!0;r||f.openMap(t,n,i,r);!BoldBIDashboard.isNullOrUndefined(n.mapElement)&&n.mapElement.length>0&&f.bbdesigner$(n.mapElement[0]).hasClass("e-maps")&&(h=ejdashboard.base.getComponent(n.mapElement[0],n.componentName),(!BoldBIDashboard.isNullOrUndefined(h)&&BoldBIDashboard.isNullOrUndefined(h.layers[0].shapeData)||r&&!n.isDrillAction)&&n.updatePropertyChange("ShapeData",BoldBIDashboard.isNullOrUndefined(u)?t.ShapeData:u,BoldBIDashboard.isNullOrUndefined(u)?t.ShapeData:u));f.bbdesigner$(n.ControlContainer).removeAttr("mapcounter");f.clearTimer(f.mapFileDwnldTimer)}},300,n,t,i,this.dashboardDesigner)},n.prototype.openMap=function(n,t){t.renderMapContainer(n);t.isDataUpdated?t.update(t.dataValues):BoldBIDashboard.isNullOrUndefined(t.mapItem)||t.mapItem.hide()},n.prototype.clearTimer=function(n){this.mapFileTimerCount=0;clearTimeout(n)},n.prototype.showMapFileErr=function(n,t,i){var r=BoldBIDashboard.buildTag("div.e-map-file-err","",{position:"relative","text-align":"center","vertical-align":"middle","z-index":"110",overflow:"hidden",color:"rgb(104, 98, 98)","font-size":"13px"},{id:this.dashboardDesigner.designerPanel.designId+"mapFileError"+t.UniqueName}).text(this.locale.errorMessage.mapFileDownloadingError),u=n.ControlContainer.find(".bbi-dbrd-control");!BoldBIDashboard.isNullOrUndefined(u)&&u.length>0&&u.remove();n.ControlContainer.data(i,n);n.ContentContainer.append(r);r.css({top:n.ContentContainer.height()/2-r.height()+"px"});this.dashboardDesigner.modules.serialization.updateWidgetData(t,n.DataGroupInfo)},n.prototype.downloadMapJsonData=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)&&BoldBIDashboard.isNullOrUndefined(ejdashboard[n])){var i=this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.downloadmapshape+n+"/",t=document.createElement("script");t.type="text/javascript";t.src=i;document.head.appendChild(t)}},n.prototype.getShapeListBasedOnType=function(n){return n==="Continent And Region"?this.getContinentList():n==="Country"?this.getCountryList():this.getStateList()},n.prototype.getCountryList=function(){return[{text:"All",value:"WorldMap_Countries"},{text:"Australia",value:"Australia"},{text:"Austria",value:"Austria"},{text:"Angola",value:"Angola"},{text:"Bangladesh",value:"Bangladesh"},{text:"Belgium",value:"Belgium"},{text:"Brazil",value:"Brazil"},{text:"Canada",value:"Canada"},{text:"Colombia",value:"Colombia"},{text:"Finland",value:"Finland"},{text:"France",value:"France"},{text:"Georgia",value:"Georgia"},{text:"Germany",value:"Germany"},{text:"India",value:"India"},{text:"Italy",value:"Italy"},{text:"Luxembourg",value:"Luxembourg"},{text:"Malaysia",value:"Malaysia"},{text:"Netherlands",value:"Netherlands"},{text:"Norway",value:"Norway"},{text:"Sweden",value:"Sweden"},{text:"South Africa",value:"South_Africa"},{text:"Switzerland",value:"Switzerland"},{text:"Thailand",value:"Thailand"},{text:"UAE",value:"United_Arab_Emirates"},{text:"UK",value:"UnitedKingdom"},{text:"USA",value:"USA_States"},]},n.prototype.getContinentList=function(){return[{text:"All",value:"WorldMap_Continent"},{text:"Africa",value:"Africa"},{text:"Asia",value:"Asia"},{text:"Australia",value:"Australia_Territories"},{text:"Caribbean",value:"Caribbean"},{text:"Europe",value:"Europe"},{text:"North America",value:"NorthAmerica"},{text:"South America",value:"SouthAmerica"},]},n.prototype.getStateList=function(){return[{text:"US - Alabama",value:"USA_Alabama"},{text:"US - Alaska",value:"USA_Alaska"},{text:"US - Arizona",value:"USA_Arizona"},{text:"US - Arkansas",value:"USA_Arkansas"},{text:"US - California",value:"USA_California"},{text:"US - Colorado",value:"USA_Colorado"},{text:"US - Connecticut",value:"USA_Connecticut"},{text:"US - Delaware",value:"USA_Delaware"},{text:"US - Florida",value:"USA_Florida"},{text:"US - Georgia",value:"USA_Georgia"},{text:"US - Hawaii",value:"USA_Hawaii"},{text:"US - Idaho",value:"USA_Idaho"},{text:"US - Illinois",value:"USA_Illinois"},{text:"US - Indiana",value:"USA_Indiana"},{text:"US - Iowa",value:"USA_Iowa"},{text:"US - Kansas",value:"USA_Kansas"},{text:"US - Kentucky",value:"USA_Kentucky"},{text:"US - Louisiana",value:"USA_Louisiana"},{text:"US - Maine",value:"USA_Maine"},{text:"US - Maryland",value:"USA_Maryland"},{text:"US - Massachusetts",value:"USA_Massachusetts"},{text:"US - Michigan",value:"USA_Michigan"},{text:"US - Minnesota",value:"USA_Minnesota"},{text:"US - Mississippi",value:"USA_Mississippi"},{text:"US - Missouri",value:"USA_Missouri"},{text:"US - Montana",value:"USA_Montana"},{text:"US - Nebraska",value:"USA_Nebraska"},{text:"US - Nevada",value:"USA_Nevada"},{text:"US - New Hampshire",value:"USA_New_Hampshire"},{text:"US - New Jersey",value:"USA_New_Jersey"},{text:"US - New Mexico",value:"USA_New_Mexico"},{text:"US - New York",value:"USA_New_York"},{text:"US - North Carolina",value:"USA_North_Carolina"},{text:"US - North Dakota",value:"USA_North_Dakota"},{text:"US - Ohio",value:"USA_Ohio"},{text:"US - Oklahoma",value:"USA_Oklahoma"},{text:"US - Oregon",value:"USA_Oregon"},{text:"US - Pennsylvania",value:"USA_Pennsylvania"},{text:"US - Puerto Rico",value:"USA_Puerto_Rico"},{text:"US - Rhode Island",value:"USA_Rhode_Island"},{text:"US - South Carolina",value:"USA_South_Carolina"},{text:"US - South Dakota",value:"USA_South_Dakota"},{text:"US - Tennessee",value:"USA_Tennessee"},{text:"US - Texas",value:"USA_Texas"},{text:"US - Utah",value:"USA_Utah"},{text:"US - Vermont",value:"USA_Vermont"},{text:"US - Virginia",value:"USA_Virginia"},{text:"US - Washington",value:"USA_Washington"},{text:"US - West Virginia",value:"USA_West_Virginia"},{text:"US - Wisconsin",value:"USA_Wisconsin"},{text:"US - Wyoming",value:"USA_Wyoming"}]},n.prototype.getMapTypeValueList=function(){return[{text:"Choropleth",value:"Choropleth"},{text:"Bubble",value:"Bubble"}]},n.prototype.markerShapeList=function(){return["Circle","Rectangle","Diamond","Star","Balloon","Triangle","Image"]},n.prototype.getLegendPositionList=function(){return[{text:"Top",value:"Top"},{text:"Bottom",value:"Bottom"},]},n}(),__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),InternalBingMapReportItem=function(n){function t(t){var i=n.call(this,t,"BingMap","e-bingmap-item")||this;return i.mapNameSpace="Microsoft.Maps",i.toolTipCollection=[],i.isBingMapInitialized=!1,i.locs=[],i.onErrorShapeCount=0,i.staticShapeCount=0,i.onSuccessShapeCount=0,i.markerShapeSvg={Triangle:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title>Triangle <\/title><path class="e-bing-marker-svg" d="M0 32h32l-16-32-16 32z" ><\/path><\/svg>',Diamond:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title>Diamond <\/title><path class="e-bing-marker-svg" d="M0.809 16l15.191 15.191 15.191-15.191-15.191-15.191-15.191 15.191z"><\/path><\/svg>',Circle:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title>Circle1 <\/title><path class="e-bing-marker-svg" d="M1 16l0.020 0.771 0.058 0.761 0.096 0.75 0.132 0.738 0.168 0.725 0.202 0.711 0.236 0.697 0.269 0.681 0.301 0.664 0.332 0.647 0.362 0.628 0.391 0.609 0.419 0.588 0.446 0.567 0.472 0.544 0.497 0.521 0.521 0.497 0.545 0.472 0.567 0.446 0.588 0.419 0.609 0.391 0.628 0.362 0.647 0.332 0.664 0.301 0.681 0.269 0.697 0.236 0.711 0.202 0.725 0.168 0.738 0.132 0.75 0.096 0.761 0.058 0.771 0.020 0.771-0.020 0.761-0.058 0.75-0.096 0.738-0.132 0.725-0.168 0.711-0.202 0.697-0.236 0.681-0.269 0.664-0.301 0.647-0.332 0.628-0.362 0.609-0.391 0.588-0.419 0.567-0.446 0.544-0.472 0.521-0.497 0.497-0.521 0.472-0.544 0.446-0.567 0.419-0.588 0.391-0.609 0.362-0.628 0.332-0.647 0.301-0.664 0.269-0.681 0.236-0.697 0.202-0.711 0.168-0.725 0.132-0.738 0.096-0.75 0.058-0.761 0.020-0.771-0.020-0.771-0.058-0.761-0.096-0.75-0.132-0.738-0.168-0.725-0.202-0.711-0.236-0.697-0.269-0.681-0.301-0.664-0.332-0.647-0.362-0.628-0.391-0.609-0.419-0.588-0.446-0.567-0.472-0.545-0.497-0.521-0.521-0.497-0.544-0.472-0.567-0.446-0.588-0.419-0.609-0.391-0.628-0.362-0.647-0.332-0.664-0.301-0.681-0.269-0.697-0.236-0.711-0.202-0.725-0.168-0.738-0.132-0.75-0.096-0.761-0.058-0.771-0.020-0.771 0.020-0.761 0.058-0.75 0.096-0.738 0.132-0.725 0.168-0.711 0.202-0.697 0.236-0.681 0.269-0.664 0.301-0.647 0.332-0.628 0.362-0.609 0.391-0.588 0.419-0.567 0.446-0.545 0.472-0.521 0.497-0.497 0.521-0.472 0.545-0.446 0.567-0.419 0.588-0.391 0.609-0.362 0.628-0.332 0.647-0.301 0.664-0.269 0.681-0.236 0.697-0.202 0.711-0.168 0.725-0.132 0.738-0.096 0.75-0.058 0.761-0.020 0.771z"><\/path><\/svg>',Star:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title > Star <\/title><path class="e-bing-marker-svg" d="M12.36 11.371l2.771-5.508c0.356-0.707 1.383-0.707 1.739 0l2.771 5.508 6.196 0.889c0.795 0.114 1.112 1.073 0.536 1.623l-4.483 4.284 1.058 6.052c0.136 0.777-0.696 1.37-1.407 1.003l-5.541-2.859-5.541 2.859c-0.711 0.367-1.543-0.226-1.407-1.003l1.058-6.052-4.483-4.284c-0.576-0.55-0.259-1.509 0.536-1.623l6.196-0.889z"><\/path><\/svg>',CircleSquare:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> CircleSquare <\/title><path class="e-bing-marker-svg" d="M4 16l0.016 0.618 0.046 0.609 0.076 0.601 0.106 0.591 0.134 0.581 0.162 0.569 0.189 0.558 0.215 0.545 0.24 0.532 0.265 0.517 0.289 0.503 0.312 0.487 0.335 0.47 0.356 0.453 0.377 0.435 0.397 0.417 0.417 0.397 0.435 0.377 0.453 0.356 0.47 0.335 0.487 0.312 0.503 0.289 0.517 0.265 0.532 0.24 0.545 0.215 0.558 0.189 0.569 0.162 0.581 0.134 0.591 0.106 0.601 0.076 0.609 0.046 0.618 0.016 0.618-0.016 0.609-0.046 0.601-0.076 0.591-0.106 0.581-0.134 0.569-0.162 0.558-0.189 0.545-0.215 0.532-0.24 0.517-0.265 0.503-0.289 0.487-0.312 0.47-0.335 0.453-0.356 0.435-0.377 0.417-0.397 0.397-0.417 0.377-0.435 0.356-0.453 0.335-0.47 0.312-0.487 0.289-0.503 0.265-0.517 0.24-0.532 0.215-0.545 0.189-0.558 0.162-0.569 0.134-0.581 0.106-0.591 0.076-0.601 0.046-0.609 0.016-0.618-0.016-0.618-0.046-0.609-0.076-0.601-0.106-0.591-0.134-0.581-0.162-0.569-0.189-0.558-0.215-0.545-0.24-0.532-0.265-0.517-0.289-0.503-0.312-0.487-0.335-0.47-0.356-0.453-0.377-0.435-0.397-0.417-0.417-0.397-0.435-0.377-0.453-0.356-0.47-0.335-0.487-0.312-0.503-0.289-0.517-0.265-0.532-0.24-0.545-0.215-0.558-0.189-0.569-0.162-0.581-0.134-0.591-0.106-0.601-0.076-0.609-0.046-0.618-0.016-0.618 0.016-0.609 0.046-0.601 0.076-0.591 0.106-0.581 0.134-0.569 0.162-0.558 0.189-0.545 0.215-0.532 0.24-0.517 0.265-0.503 0.289-0.487 0.312-0.47 0.335-0.453 0.356-0.435 0.377-0.417 0.397-0.397 0.417-0.377 0.435-0.356 0.453-0.335 0.47-0.312 0.487-0.289 0.503-0.265 0.517-0.24 0.532-0.215 0.545-0.189 0.558-0.162 0.569-0.134 0.581-0.106 0.591-0.076 0.601-0.046 0.609-0.016 0.618zM29 3v26h-26v-26h26zM1 31h30v-30h-30v30z"><\/path><\/svg>',Up:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> UpArrow <\/title><path class="e-bing-marker-svg" d="M2.089 14.831l4.331 4.253 6.519-6.406v18.044h6v-18.041l6.644 6.528 4.328-4.25-13.906-13.681-13.916 13.553z"><\/path><\/svg>',CircleSquareCut:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> SquareCircleCut <\/title><path class="e-bing-marker-svg" d="M26 16l-0.013 0.514-0.039 0.507-0.064 0.5-0.088 0.492-0.112 0.483-0.135 0.474-0.157 0.464-0.179 0.454-0.2 0.443-0.221 0.431-0.241 0.419-0.26 0.406-0.279 0.392-0.297 0.378-0.314 0.363-0.331 0.348-0.347 0.331-0.363 0.315-0.378 0.297-0.392 0.279-0.406 0.26-0.419 0.241-0.431 0.221-0.443 0.201-0.454 0.179-0.464 0.157-0.474 0.135-0.483 0.112-0.492 0.088-0.5 0.064-0.507 0.039-0.514 0.013-0.514-0.013-0.507-0.039-0.5-0.064-0.492-0.088-0.483-0.112-0.474-0.135-0.464-0.157-0.454-0.179-0.443-0.201-0.431-0.221-0.419-0.241-0.406-0.26-0.392-0.279-0.378-0.297-0.363-0.315-0.347-0.331-0.331-0.348-0.315-0.363-0.297-0.378-0.279-0.392-0.26-0.406-0.241-0.419-0.221-0.431-0.2-0.443-0.179-0.454-0.157-0.464-0.135-0.474-0.112-0.483-0.088-0.492-0.064-0.5-0.039-0.507-0.013-0.514 0.013-0.514 0.039-0.507 0.064-0.5 0.088-0.492 0.112-0.483 0.135-0.474 0.157-0.464 0.179-0.454 0.2-0.443 0.221-0.431 0.241-0.419 0.26-0.406 0.279-0.392 0.297-0.378 0.315-0.363 0.331-0.348 0.347-0.331 0.363-0.315 0.378-0.297 0.392-0.279 0.406-0.26 0.419-0.241 0.431-0.221 0.443-0.201 0.454-0.179 0.464-0.157 0.474-0.135 0.483-0.112 0.492-0.088 0.5-0.064 0.507-0.039 0.514-0.013 0.514 0.013 0.507 0.039 0.5 0.064 0.492 0.088 0.483 0.112 0.474 0.135 0.464 0.157 0.454 0.179 0.443 0.201 0.431 0.221 0.419 0.241 0.406 0.26 0.392 0.279 0.378 0.297 0.363 0.315 0.347 0.331 0.331 0.348 0.314 0.363 0.297 0.378 0.279 0.392 0.26 0.406 0.241 0.419 0.221 0.431 0.2 0.443 0.179 0.454 0.157 0.464 0.135 0.474 0.112 0.483 0.088 0.492 0.064 0.5 0.039 0.507 0.013 0.514zM1 31h30v-30h-30v30z"><\/path><\/svg>',Warning:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> Exclamatory <\/title><path class="e-bing-marker-svg" d="M12 31.5h8v-8h-8v8zM12 19.5h8v-19h-8v19z"><\/path><\/svg>',CircleTick:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> CircleTick <\/title><path class="e-bing-marker-svg" d="M25.578 10.759l-13.069 13.069-7.088-7.087 2.578-2.741 4.469 4.469 10.531-10.469 2.578 2.759zM0.5 16l0.020 0.796 0.060 0.786 0.099 0.775 0.137 0.763 0.173 0.749 0.209 0.735 0.244 0.72 0.278 0.704 0.311 0.686 0.343 0.668 0.374 0.649 0.404 0.629 0.433 0.608 0.461 0.586 0.488 0.563 0.514 0.539 0.539 0.514 0.563 0.488 0.586 0.461 0.608 0.433 0.629 0.404 0.649 0.374 0.668 0.343 0.686 0.311 0.704 0.278 0.72 0.244 0.735 0.209 0.749 0.173 0.763 0.137 0.775 0.099 0.786 0.060 0.796 0.020 0.796-0.020 0.786-0.060 0.775-0.099 0.763-0.137 0.749-0.173 0.735-0.209 0.72-0.244 0.704-0.278 0.686-0.311 0.668-0.343 0.649-0.374 0.629-0.404 0.608-0.433 0.586-0.461 0.563-0.488 0.539-0.514 0.514-0.539 0.488-0.563 0.461-0.586 0.433-0.608 0.404-0.629 0.374-0.649 0.343-0.668 0.311-0.686 0.278-0.704 0.244-0.72 0.209-0.735 0.173-0.749 0.137-0.763 0.099-0.775 0.060-0.786 0.020-0.796-0.020-0.796-0.060-0.786-0.099-0.775-0.137-0.763-0.173-0.749-0.209-0.735-0.244-0.72-0.278-0.704-0.311-0.686-0.343-0.668-0.374-0.649-0.404-0.629-0.433-0.608-0.461-0.586-0.488-0.563-0.514-0.539-0.539-0.514-0.563-0.488-0.586-0.461-0.608-0.433-0.629-0.404-0.649-0.374-0.668-0.343-0.686-0.311-0.704-0.278-0.72-0.244-0.735-0.209-0.749-0.173-0.763-0.137-0.775-0.099-0.786-0.060-0.796-0.020-0.796 0.020-0.786 0.060-0.775 0.099-0.763 0.137-0.749 0.173-0.735 0.209-0.72 0.244-0.704 0.278-0.686 0.311-0.668 0.343-0.649 0.374-0.629 0.404-0.608 0.433-0.586 0.461-0.563 0.488-0.539 0.514-0.514 0.539-0.488 0.563-0.461 0.586-0.433 0.608-0.404 0.629-0.374 0.649-0.343 0.668-0.311 0.686-0.278 0.704-0.244 0.72-0.209 0.735-0.173 0.749-0.137 0.763-0.099 0.775-0.060 0.786-0.020 0.796z"><\/path><\/svg>',CircleThreeQuarter:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> CircleThreeQuater <\/title><path class="e-bing-marker-svg" d="M16 16h-13l0.017-0.668 0.050-0.659 0.083-0.65 0.115-0.64 0.145-0.628 0.175-0.617 0.205-0.604 0.233-0.59 0.261-0.576 0.287-0.56 0.313-0.544 0.338-0.527 0.363-0.51 0.386-0.491 0.409-0.472 0.431-0.452 0.452-0.431 0.472-0.409 0.491-0.386 0.51-0.363 0.527-0.338 0.544-0.313 0.56-0.287 0.576-0.261 0.59-0.233 0.604-0.205 0.617-0.175 0.628-0.145 0.64-0.115 0.65-0.083 0.659-0.050 0.668-0.017v13zM1 16l0.008 0.508 0.025 0.503 0.042 0.499 0.058 0.494 0.074 0.489 0.089 0.484 0.104 0.478 0.12 0.473 0.134 0.466 0.149 0.46 0.163 0.453 0.177 0.447 0.191 0.439 0.204 0.432 0.218 0.424 0.231 0.416 0.243 0.408 0.256 0.4 0.268 0.391 0.28 0.382 0.594 0.735 0.639 0.696 0.681 0.655 0.721 0.611 0.375 0.289 0.384 0.277 0.393 0.265 0.402 0.253 0.313 0.184 0.316 0.178 0.322 0.169 0.325 0.163 0.331 0.153 0.334 0.147 0.338 0.137 0.344 0.131 0.347 0.122 0.35 0.113 0.353 0.106 0.356 0.097 0.363 0.087 0.366 0.078 0.369 0.072 0.372 0.063 0.375 0.053 0.378 0.044 0.378 0.034 0.381 0.025 0.772 0.019 0.387-0.006 0.384-0.016 0.381-0.025 0.378-0.034 0.378-0.044 0.375-0.053 0.372-0.063 0.369-0.072 0.366-0.078 0.363-0.087 0.356-0.097 0.353-0.106 0.35-0.113 0.347-0.122 0.344-0.131 0.337-0.137 0.334-0.147 0.331-0.153 0.325-0.163 0.322-0.169 0.316-0.178 0.313-0.184 0.401-0.253 0.392-0.265 0.383-0.277 0.374-0.288 0.72-0.611 0.68-0.654 0.638-0.696 0.594-0.735 0.28-0.382 0.268-0.391 0.256-0.399 0.243-0.408 0.231-0.416 0.218-0.424 0.204-0.432 0.191-0.439 0.177-0.446 0.163-0.453 0.149-0.46 0.134-0.466 0.12-0.472 0.105-0.478 0.089-0.484 0.074-0.489 0.058-0.494 0.042-0.499 0.025-0.503 0.008-0.508-0.006-0.387-0.016-0.384-0.025-0.381-0.034-0.378-0.044-0.378-0.053-0.375-0.063-0.372-0.072-0.369-0.078-0.366-0.087-0.363-0.097-0.356-0.106-0.353-0.113-0.35-0.122-0.347-0.131-0.344-0.137-0.338-0.147-0.334-0.153-0.331-0.163-0.325-0.169-0.322-0.178-0.316-0.184-0.313-0.191-0.306-0.2-0.303-0.206-0.297-0.212-0.291-0.219-0.287-0.225-0.281-0.231-0.275-0.238-0.269-0.244-0.263-0.25-0.256-0.256-0.25-0.262-0.244-0.269-0.237-0.275-0.231-0.281-0.225-0.288-0.219-0.291-0.212-0.297-0.206-0.303-0.2-0.306-0.191-0.313-0.184-0.316-0.178-0.322-0.169-0.325-0.163-0.331-0.153-0.334-0.147-0.337-0.138-0.344-0.131-0.347-0.122-0.35-0.113-0.353-0.106-0.356-0.097-0.363-0.087-0.366-0.078-0.369-0.072-0.372-0.063-0.375-0.053-0.378-0.044-0.378-0.034-0.381-0.025-0.384-0.016-0.387-0.006-0.772 0.020-0.761 0.058-0.75 0.096-0.738 0.132-0.726 0.168-0.712 0.202-0.697 0.236-0.681 0.269-0.664 0.301-0.647 0.331-0.628 0.361-0.608 0.39-0.588 0.418-0.567 0.445-0.544 0.472-0.521 0.497-0.497 0.521-0.471 0.544-0.445 0.567-0.418 0.588-0.39 0.609-0.361 0.628-0.331 0.647-0.3 0.664-0.269 0.681-0.236 0.697-0.202 0.712-0.167 0.726-0.132 0.739-0.095 0.751-0.058 0.762-0.020 0.772z"><\/path><\/svg>',Tick:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> Tick <\/title><path class="e-bing-marker-svg" d="M10.628 20.238l-6.338-6.341-4.291 4.291 10.644 10.644 21.356-21.356-4.306-4.306-17.066 17.069z"><\/path><\/svg>',CircleHalf:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> CircleHalf <\/title><path class="e-bing-marker-svg" d="M15.998 29.003l-0.668-0.017-0.659-0.050-0.65-0.083-0.64-0.114-0.628-0.145-0.617-0.175-0.604-0.205-0.59-0.233-0.576-0.261-0.56-0.287-0.544-0.313-0.527-0.338-0.51-0.363-0.491-0.386-0.472-0.409-0.452-0.431-0.431-0.452-0.409-0.472-0.386-0.491-0.363-0.51-0.338-0.527-0.313-0.544-0.287-0.56-0.261-0.576-0.233-0.59-0.205-0.604-0.175-0.616-0.145-0.628-0.115-0.64-0.083-0.65-0.050-0.659-0.017-0.668 0.017-0.668 0.050-0.659 0.083-0.65 0.115-0.64 0.145-0.628 0.175-0.617 0.205-0.604 0.233-0.59 0.261-0.576 0.287-0.56 0.313-0.544 0.338-0.527 0.363-0.51 0.386-0.491 0.409-0.472 0.431-0.452 0.452-0.431 0.472-0.409 0.491-0.386 0.51-0.363 0.527-0.338 0.544-0.313 0.56-0.287 0.576-0.261 0.59-0.233 0.604-0.205 0.617-0.175 0.628-0.145 0.64-0.115 0.65-0.083 0.659-0.050 0.668-0.017v26zM0.998 16.003l0.020 0.772 0.058 0.762 0.095 0.751 0.132 0.739 0.167 0.726 0.202 0.712 0.236 0.697 0.269 0.681 0.3 0.664 0.331 0.647 0.361 0.628 0.39 0.609 0.418 0.588 0.445 0.567 0.471 0.544 0.497 0.521 0.521 0.497 0.544 0.471 0.567 0.445 0.588 0.418 0.609 0.39 0.628 0.361 0.647 0.331 0.664 0.3 0.681 0.269 0.697 0.236 0.712 0.202 0.726 0.168 0.739 0.132 0.751 0.095 0.762 0.058 0.772 0.020 0.387-0.006 0.731-0.036 0.722-0.071 0.711-0.104 0.7-0.137 0.688-0.169 0.675-0.201 0.661-0.231 0.647-0.261 0.632-0.289 0.615-0.317 0.599-0.344 0.581-0.371 0.562-0.396 0.543-0.421 0.523-0.445 0.502-0.468 0.48-0.49 0.457-0.512 0.434-0.532 0.409-0.552 0.384-0.571 0.358-0.589 0.332-0.607 0.304-0.623 0.276-0.639 0.247-0.654 0.217-0.668 0.186-0.681 0.154-0.694 0.122-0.705 0.089-0.716 0.055-0.726 0.016-0.384 0.006-0.387-0.006-0.387-0.016-0.384-0.025-0.381-0.034-0.378-0.044-0.378-0.083-0.559-0.103-0.553-0.122-0.546-0.142-0.538-0.075-0.25-0.031-0.106-0.038-0.113-0.078-0.238-0.15-0.422-0.162-0.416-0.174-0.41-0.186-0.404-0.406-0.787-0.45-0.759-0.492-0.73-0.533-0.699-0.572-0.665-0.609-0.631-0.645-0.594-0.679-0.556-0.711-0.516-0.742-0.475-0.771-0.432-0.798-0.387-0.409-0.176-0.415-0.164-0.421-0.152-0.426-0.14-0.316-0.094-0.038-0.012-0.069-0.019-0.291-0.078-0.726-0.167-0.739-0.132-0.751-0.095-0.763-0.058-0.384-0.016-0.387-0.006-0.771 0.020-0.761 0.058-0.75 0.096-0.738 0.132-0.725 0.168-0.711 0.203-0.697 0.236-0.681 0.269-0.664 0.301-0.646 0.332-0.628 0.361-0.608 0.39-0.588 0.418-0.566 0.445-0.544 0.472-0.521 0.497-0.497 0.521-0.471 0.544-0.445 0.567-0.418 0.588-0.39 0.609-0.361 0.628-0.331 0.647-0.3 0.665-0.269 0.681-0.236 0.697-0.202 0.712-0.167 0.726-0.132 0.739-0.095 0.751-0.058 0.762-0.020 0.772z"><\/path><\/svg>',CircleQuarter:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title > CircleQuater <\/title><path class="e-bing-marker-svg" d="M28.734 13.384l-0.106-0.473-0.123-0.466-0.14-0.459-0.156-0.452-0.172-0.444-0.188-0.436-0.203-0.428-0.218-0.419v0l0.218 0.419 0.203 0.428 0.188 0.436 0.172 0.444 0.156 0.452 0.14 0.459 0.123 0.466 0.106 0.473zM16 16h13l-0.017 0.668-0.050 0.659-0.083 0.65-0.114 0.64-0.145 0.628-0.175 0.616-0.205 0.604-0.233 0.59-0.261 0.576-0.287 0.56-0.313 0.544-0.338 0.527-0.363 0.51-0.386 0.491-0.409 0.472-0.431 0.452-0.452 0.431-0.472 0.409-0.491 0.386-0.51 0.363-0.527 0.338-0.544 0.313-0.56 0.287-0.576 0.261-0.59 0.233-0.604 0.205-0.616 0.175-0.628 0.145-0.64 0.114-0.65 0.083-0.659 0.050-0.668 0.017-0.668-0.017-0.659-0.050-0.65-0.083-0.64-0.114-0.628-0.145-0.617-0.175-0.604-0.205-0.59-0.233-0.576-0.261-0.56-0.287-0.544-0.313-0.527-0.338-0.51-0.363-0.491-0.386-0.472-0.409-0.452-0.431-0.431-0.452-0.409-0.472-0.386-0.491-0.363-0.51-0.338-0.527-0.313-0.544-0.287-0.56-0.261-0.576-0.233-0.59-0.205-0.604-0.175-0.616-0.145-0.628-0.115-0.64-0.083-0.65-0.050-0.659-0.017-0.668 0.017-0.668 0.050-0.659 0.083-0.65 0.115-0.64 0.145-0.628 0.175-0.617 0.205-0.604 0.233-0.59 0.261-0.576 0.287-0.56 0.313-0.544 0.338-0.527 0.363-0.51 0.386-0.491 0.409-0.472 0.431-0.452 0.452-0.431 0.472-0.409 0.491-0.386 0.51-0.363 0.527-0.338 0.544-0.313 0.56-0.287 0.576-0.261 0.59-0.233 0.604-0.205 0.617-0.175 0.628-0.145 0.64-0.115 0.65-0.083 0.659-0.050 0.668-0.017v13zM1 16l0.020 0.772 0.058 0.762 0.095 0.751 0.132 0.739 0.167 0.726 0.202 0.712 0.236 0.697 0.269 0.681 0.3 0.664 0.331 0.647 0.361 0.628 0.39 0.609 0.418 0.588 0.445 0.567 0.471 0.544 0.497 0.521 0.521 0.497 0.544 0.471 0.567 0.445 0.588 0.418 0.609 0.39 0.628 0.361 0.647 0.331 0.664 0.3 0.681 0.269 0.697 0.236 0.712 0.202 0.726 0.168 0.739 0.132 0.751 0.095 0.762 0.058 0.772 0.020 0.772-0.020 0.762-0.058 0.751-0.095 0.739-0.132 0.726-0.168 0.712-0.202 0.697-0.236 0.681-0.269 0.664-0.3 0.647-0.331 0.628-0.361 0.609-0.39 0.588-0.418 0.567-0.445 0.544-0.471 0.521-0.497 0.497-0.521 0.471-0.544 0.445-0.567 0.418-0.588 0.39-0.609 0.361-0.628 0.331-0.647 0.3-0.664 0.269-0.681 0.236-0.697 0.202-0.712 0.168-0.726 0.132-0.739 0.095-0.751 0.058-0.762 0.020-0.772-0.020-0.772-0.058-0.762-0.095-0.751-0.132-0.739-0.168-0.726-0.202-0.712-0.236-0.697-0.269-0.681-0.3-0.664-0.331-0.647-0.361-0.628-0.39-0.609-0.418-0.588-0.445-0.567-0.471-0.544-0.497-0.521-0.521-0.497-0.544-0.471-0.567-0.445-0.588-0.418-0.609-0.39-0.628-0.361-0.647-0.331-0.664-0.3-0.681-0.269-0.697-0.236-0.712-0.202-0.726-0.167-0.739-0.132-0.751-0.095-0.762-0.058-0.772-0.020-0.772 0.020-0.762 0.058-0.751 0.095-0.739 0.132-0.726 0.167-0.712 0.202-0.697 0.236-0.681 0.269-0.664 0.3-0.647 0.331-0.628 0.361-0.609 0.39-0.588 0.418-0.567 0.445-0.544 0.471-0.521 0.497-0.497 0.521-0.471 0.544-0.445 0.567-0.418 0.588-0.39 0.609-0.361 0.628-0.331 0.647-0.3 0.664-0.269 0.681-0.236 0.697-0.202 0.712-0.167 0.726-0.132 0.739-0.095 0.751-0.058 0.762-0.020 0.772z"><\/path><\/svg>',Down:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> DownArrow <\/title><path class="e-bing-marker-svg" d="M13.063 19.341l-6.644-6.528-4.331 4.253 13.975 13.634 13.85-13.512-4.331-4.25-6.519 6.403v-18.041h-6v18.041z"><\/path><\/svg>',RightDownArrow:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> RightDownArrow <\/title><path class="e-bing-marker-svg" d="M4.058 8.366l13.462 13.619h-10.656v6.016h21.078v-20.069h-6.016l0.019 9.6-13.522-13.531-4.366 4.366z"><\/path><\/svg>',CircleExclamatory:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> CicleExclamatory <\/title><path class="e-bing-marker-svg" d="M19.166 24.75l-0.017 0.235-0.049 0.229-0.079 0.222-0.108 0.213-0.135 0.204-0.161 0.193-0.184 0.18-0.206 0.167-0.226 0.152-0.244 0.136-0.261 0.118-0.276 0.1-0.289 0.080-0.301 0.059-0.31 0.036-0.318 0.012-0.318-0.012-0.31-0.036-0.301-0.059-0.289-0.080-0.276-0.1-0.261-0.118-0.245-0.136-0.226-0.152-0.206-0.167-0.184-0.18-0.161-0.193-0.135-0.204-0.108-0.213-0.079-0.222-0.049-0.229-0.017-0.235 0.017-0.235 0.049-0.229 0.079-0.222 0.108-0.213 0.135-0.204 0.161-0.193 0.184-0.18 0.206-0.167 0.226-0.152 0.245-0.136 0.261-0.118 0.276-0.1 0.289-0.080 0.301-0.059 0.31-0.036 0.318-0.012 0.318 0.012 0.31 0.036 0.301 0.059 0.289 0.080 0.276 0.1 0.261 0.118 0.244 0.136 0.226 0.152 0.206 0.167 0.184 0.18 0.161 0.193 0.135 0.204 0.108 0.213 0.079 0.222 0.049 0.229 0.017 0.235zM18 4.916v13.834h-4v-13.834h4zM1 16l0.020 0.771 0.058 0.761 0.096 0.75 0.132 0.738 0.168 0.725 0.202 0.711 0.236 0.697 0.269 0.681 0.301 0.664 0.332 0.647 0.362 0.628 0.391 0.609 0.419 0.588 0.446 0.567 0.472 0.544 0.497 0.521 0.521 0.497 0.545 0.472 0.567 0.446 0.588 0.419 0.609 0.391 0.628 0.362 0.647 0.332 0.664 0.301 0.681 0.269 0.697 0.236 0.711 0.202 0.725 0.168 0.738 0.132 0.75 0.096 0.761 0.058 0.771 0.020 0.771-0.020 0.761-0.058 0.75-0.096 0.738-0.132 0.725-0.168 0.711-0.202 0.697-0.236 0.681-0.269 0.664-0.301 0.647-0.332 0.628-0.362 0.609-0.391 0.588-0.419 0.567-0.446 0.544-0.472 0.521-0.497 0.497-0.521 0.472-0.544 0.446-0.567 0.419-0.588 0.391-0.609 0.362-0.628 0.332-0.647 0.301-0.664 0.269-0.681 0.236-0.697 0.202-0.711 0.168-0.725 0.132-0.738 0.096-0.75 0.058-0.761 0.020-0.771-0.020-0.771-0.058-0.761-0.096-0.75-0.132-0.738-0.168-0.725-0.202-0.711-0.236-0.697-0.269-0.681-0.301-0.664-0.332-0.647-0.362-0.628-0.391-0.609-0.419-0.588-0.446-0.567-0.472-0.545-0.497-0.521-0.521-0.497-0.544-0.472-0.567-0.446-0.588-0.419-0.609-0.391-0.628-0.362-0.647-0.332-0.664-0.301-0.681-0.269-0.697-0.236-0.711-0.202-0.725-0.168-0.738-0.132-0.75-0.096-0.761-0.058-0.771-0.020-0.771 0.020-0.761 0.058-0.75 0.096-0.738 0.132-0.725 0.168-0.711 0.202-0.697 0.236-0.681 0.269-0.664 0.301-0.647 0.332-0.628 0.362-0.609 0.391-0.588 0.419-0.567 0.446-0.545 0.472-0.521 0.497-0.497 0.521-0.472 0.545-0.446 0.567-0.419 0.588-0.391 0.609-0.362 0.628-0.332 0.647-0.301 0.664-0.269 0.681-0.236 0.697-0.202 0.711-0.168 0.725-0.132 0.738-0.096 0.75-0.058 0.761-0.020 0.771z"><\/path><\/svg>',RightTopArrow:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> RightTopArrow <\/title><path class="e-bing-marker-svg" d="M6.862 10.016h10.656l-13.463 13.619 4.366 4.366 13.522-13.531-0.019 9.6h6.019v-20.069h-21.081v6.016z"><\/path><\/svg>',Close:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title > Cross <\/title><path class="e-bing-marker-svg" d="M1.002 5.806l10.188 10.194-10.188 10.194 4.813 4.809 10.187-10.191 10.188 10.191 4.809-4.813-10.188-10.191 10.188-10.194-4.809-4.809-10.188 10.191-10.188-10.191-4.813 4.809z"><\/path><\/svg>',Minus:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> Minimize <\/title><path class="e-bing-marker-svg" d="M1 21h30v-10h-30v10z"><\/path><\/svg>',PointerUp:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title > Up <\/title><path class="e-bing-marker-svg" d="M1.005 26.003h29.991l-14.994-20.006-14.997 20.006z"><\/path><\/svg>',PointerDown:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> Down <\/title><path class="e-bing-marker-svg" d="M16 26.002l14.994-20.003h-29.988l14.994 20.003z"><\/path><\/svg>',Right:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> RightArrow <\/title><path class="e-bing-marker-svg" d="M12.978 6.016l6.584 6.541-18.563-0.009 0.003 6.047 18.581 0.113-7.297 7.281 4.178 4.166 14.534-14.497-13.844-13.809-4.178 4.169z"><\/path><\/svg>',CircleClose:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> CircleClose <\/title><path class="e-bing-marker-svg" d="M16 13.037l6.206-6.209 2.962 2.963-6.206 6.209 6.206 6.212-2.962 2.962-6.206-6.212-6.206 6.212-2.963-2.962 6.206-6.213-6.206-6.213 2.962-2.963 6.206 6.213zM1 16l0.020 0.771 0.058 0.761 0.096 0.75 0.132 0.738 0.168 0.725 0.202 0.711 0.236 0.697 0.269 0.681 0.301 0.664 0.332 0.647 0.362 0.628 0.391 0.609 0.419 0.588 0.446 0.567 0.472 0.544 0.497 0.521 0.521 0.497 0.545 0.472 0.567 0.446 0.588 0.419 0.609 0.391 0.628 0.362 0.647 0.332 0.664 0.301 0.681 0.269 0.697 0.236 0.711 0.202 0.725 0.168 0.738 0.132 0.75 0.096 0.761 0.058 0.771 0.020 0.771-0.020 0.761-0.058 0.75-0.096 0.738-0.132 0.725-0.168 0.711-0.202 0.697-0.236 0.681-0.269 0.664-0.301 0.647-0.332 0.628-0.362 0.609-0.391 0.588-0.419 0.567-0.446 0.544-0.472 0.521-0.497 0.497-0.521 0.472-0.544 0.446-0.567 0.419-0.588 0.391-0.609 0.362-0.628 0.332-0.647 0.301-0.664 0.269-0.681 0.236-0.697 0.202-0.711 0.168-0.725 0.132-0.738 0.096-0.75 0.058-0.761 0.020-0.771-0.020-0.771-0.058-0.761-0.096-0.75-0.132-0.738-0.168-0.725-0.202-0.711-0.236-0.697-0.269-0.681-0.301-0.664-0.332-0.647-0.362-0.628-0.391-0.609-0.419-0.588-0.446-0.567-0.472-0.545-0.497-0.521-0.521-0.497-0.544-0.472-0.567-0.446-0.588-0.419-0.609-0.391-0.628-0.362-0.647-0.332-0.664-0.301-0.681-0.269-0.697-0.236-0.711-0.202-0.725-0.168-0.738-0.132-0.75-0.096-0.761-0.058-0.771-0.020-0.771 0.020-0.761 0.058-0.75 0.096-0.738 0.132-0.725 0.168-0.711 0.202-0.697 0.236-0.681 0.269-0.664 0.301-0.647 0.332-0.628 0.362-0.609 0.391-0.588 0.419-0.567 0.446-0.545 0.472-0.521 0.497-0.497 0.521-0.472 0.545-0.446 0.567-0.419 0.588-0.391 0.609-0.362 0.628-0.332 0.647-0.301 0.664-0.269 0.681-0.236 0.697-0.202 0.711-0.168 0.725-0.132 0.738-0.096 0.75-0.058 0.761-0.020 0.771z"><\/path><\/svg>',Flag:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> Flag <\/title><path class="e-bing-marker-svg" d="M5 16v16h2v-16h8v4h12v-16h-10v-4h-12v16z"><\/path><\/svg>',Polygon:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title> Polygon <\/title><path class="e-bing-marker-svg" d="M16 5.333l10.145 7.371-3.875 11.926h-12.539l-3.875-11.926z"><\/path><\/svg>'},i.colorContainer=null,i.isFromDraft=!1,i.colorString="color",i.from="from",i.to="to",i.locale=null,i.drillLevelInfo=[],i.breadCrumbItem=null,i.bingMapRendering=!1,i.addressSearch=null,i.bbdesigner$=i.designerInstance.bbdesigner$,i.locale=t.getLocalizationContent(),i.designerId=i.designerInstance._id,i.propertyPanel=t.modules.propertyPanel,i.widgetJson=new BingMapProperties(t),i.markerFields=i.getMarkerFields(),i.designerInstance.isViewMode()&&(i.isWidgetRenderedInViewMode=!1),i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.relation,GroupId:"c55f5601-8e79-4a16-94d6-ddd4cc051406",Items:[{id:"e08ac19e-c619-4078-a56f-973f4ed083a1",widgetName:"BingMap",widgetDisplayName:n.itemPanel.widgetTitle.bingMap,cssClass:"bbi-widgeticon bbi-designer-widget-bingmap",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.BingMapItem",searchCategory:["bing","bingmap","map","relationship"],widgetconfiginfo:null,useIconTemplate:!0,hide:!0,tooltip:{title:n.itemPanel.widgetTitle.bingMap,description:n.itemPanel.widgetDescription.bingmapsDesc,dataRequirement:n.itemPanel.widgetDataRequirements.bingMapsDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.BingMapProperties"}]};BoldBIDashboardDesigner.widgetItems.push(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t)},t.prototype.updateTitleSubtitleTheme=function(){var n=this.Type.toLowerCase(),t=this.designerInstance.modules.themeHelper.getDDWidgetHeaderTitle(n),i=this.designerInstance.modules.themeHelper.getDDWidgetHeaderSubTitle(n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getBingMapProperties().ContainerSettings.TextColor,t);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,i);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.applyWidgetTheme=function(){this.updateTitleSubtitleTheme()},t.prototype.update=function(n){this.bingKey=n.bingMapKey;this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo);this.isBingMapInitialized?this.updateReportItemData(n):(this.getBingMap(),this.updateReportItemData(n))},t.prototype.renderViewModeWidget=function(n){this.createMapContainer("",this.widgetJson);BoldBIDashboard.isNullOrUndefined(n[this.widgetJson.UniqueName])||(this.bingKey=n[this.widgetJson.UniqueName].bingMapKey);this.renderWidget(n,this.mapNameSpace)},t.prototype.getFieldContainer=function(){var t=[];return t.push(this.createFieldContaierForUI("Value",this.locale.fieldContainer.locationValue,FieldContainerType.Numeric,Visibility.Show,1)),t.push(this.createFieldContaierForUI("Shape",this.locale.fieldContainer.locationName,FieldContainerType.Non_Numeric,Visibility.Show,null,!0)),t.push(this.createFieldContaierForUI("ShapeTooltip",this.locale.fieldContainer.locationTooltip,FieldContainerType.None,Visibility.Show)),t.push(this.createFieldContaierForUI("Latitude",this.locale.fieldContainer.markerLatitude,FieldContainerType.Non_Numeric,Visibility.Show,1)),t.push(this.createFieldContaierForUI("Longitude",this.locale.fieldContainer.markerLongitude,FieldContainerType.Non_Numeric,Visibility.Show,1)),t.push(this.createFieldContaierForUI("Address",this.locale.fieldContainer.markerAddress,FieldContainerType.None,Visibility.Show,1)),t.push(this.createFieldContaierForUI("PostalCode",this.locale.fieldContainer.markerPostalCode,FieldContainerType.None,Visibility.Show,1)),t.push(this.createFieldContaierForUI("Name",this.locale.fieldContainer.markerTooltip,FieldContainerType.None,Visibility.Show)),t.push(this.createFieldContaierForUI("MarkerImage",this.locale.fieldContainer.markerImage,FieldContainerType.Non_Numeric,Visibility.Show)),t.push(this.createFieldContaierForUI("HiddenColumn",this.locale.dataconfiguration.filedContainer.hiddenColumnName,FieldContainerType.None,Visibility.Show,null)),t.push(n.prototype.getFilterColumn.call(this)),t},t.prototype.getPropertyPanelItems=function(){return this.getPropertyPanelForBingMap()},t.prototype.onFieldDragDrop=function(n,t,i){return this.onFieldDragDropped(n,this.DataGroupInfo,t,i)},t.prototype.onFieldSettingsClick=function(n,t){if(n.ContainerName==="HiddenColumn")for(var i=0;i<t.length;i++)(t[i].Name==="Sort"||t[i].Name==="DimensionFilters"||t[i].Name==="MeasureFilter"||t[i].Name==="RelativeDateFilter"||t[i].Name==="MeasureFormat")&&(t[i].IsVisible=!1);return t},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.locale.itemPanel.widgetDataRequiredMessage.bingMapDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.updatePropertyChange=function(n,t,i,r){this.updateMapItemPropertyChange(n,t,i,r)},t.prototype.getJson=function(){return this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t)},t.prototype.allowWidgetMove=function(n){return!(this.bbdesigner$(n.target).hasClass("e-bingmapitem")||this.bbdesigner$(n.target).parents().hasClass("e-bingmapitem"))},t.prototype.getWidgetInfo=function(t,i){var r=n.prototype.getWidgetInfo.call(this,t,i);return r.MarkerCustomization=this.getColorCustomization(),r.ColorCustomization=this.getShapeColorCustomization(),r},t.prototype.isNecessaryDataConfigured=function(){return!BoldBIDashboard.isNullOrUndefined(this.getLatitudeContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getLongitudeContainer())&&this.getLatitudeContainer().FieldInfos.length>0&&this.getLongitudeContainer().FieldInfos.length>0||!BoldBIDashboard.isNullOrUndefined(this.getAddressContainer())&&this.getAddressContainer().FieldInfos.length>0||!BoldBIDashboard.isNullOrUndefined(this.getPostalCodeContainer())&&this.getPostalCodeContainer().FieldInfos.length>0||!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getValueContainer().FieldInfos.length>0&&this.getShapeContainer().FieldInfos.length>0},t.prototype.getWidgetImage=function(){return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="0 0 324 208" version="1.1">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Maps" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g transform="translate(12.000000, 18.500000)" fill-rule="nonzero" id="Group">            <g transform="translate(149.774195, 85.202706) scale(-1, 1) rotate(-180.000000) translate(-149.774195, -85.202706) translate(0.274195, 0.202706)">                <path d="M116.691148,169.561969 C116.398674,169.504084 113.821244,169.21161 111.009226,169.034906 C106.028023,168.623614 105.854367,168.623614 106.204726,167.277014 C106.497201,165.988299 106.38143,165.930414 101.634816,165.695825 C97.8265567,165.461236 96.0107788,165.052991 93.2566459,163.761229 C91.3220504,162.822874 90.0942677,162.003337 90.502513,161.826634 C91.7912279,161.415342 91.2062793,160.65369 89.037095,159.892038 C87.8062657,159.480746 86.5754364,159.130386 86.2250765,159.130386 C85.9326023,159.072501 85.640128,158.837912 85.640128,158.484506 C85.640128,158.192031 86.7521396,157.899557 88.1596721,157.957443 C89.7987468,157.957443 90.6213307,157.722854 90.6213307,157.253676 C90.6213307,156.784499 89.6829757,156.434139 88.1596721,156.315321 L85.640128,156.138618 L87.2792026,155.026607 C88.4521464,154.264955 89.0949805,154.149184 89.6220436,154.557429 C90.0912211,154.968721 90.6761696,154.968721 91.2032327,154.6732 C91.6724102,154.32284 92.7844218,154.088252 93.6039591,154.088252 C94.892674,154.088252 95.2430338,153.737892 95.5964402,152.214588 C95.831029,151.160462 96.0077322,149.695044 95.8889145,148.933392 C95.831029,147.760448 96.0046856,147.644677 97.296447,147.995037 C99.2310426,148.464215 99.3468137,147.233385 97.5310358,146.471734 C96.769384,146.179259 96.4769097,145.944671 96.8272695,145.944671 C97.1197438,145.886785 97.9392812,145.533379 98.5272764,145.067248 C99.639288,144.24771 99.639288,144.189825 98.0002133,142.663475 C96.8882017,141.609349 96.4769097,140.847697 96.769384,140.14393 C97.0039728,139.616867 97.5310358,137.447683 97.8813956,135.339431 C98.4663442,131.707875 98.5851619,131.531172 100.282122,131.354469 C101.278363,131.235651 102.390374,130.885291 102.743781,130.534931 C103.505432,129.949983 103.740021,130.358228 106.667811,137.389798 C107.252759,138.736398 107.840755,139.14769 109.24524,139.263461 C110.241481,139.321347 112.176077,140.082998 113.580562,140.963468 C120.319658,145.122087 120.904606,145.64915 118.619651,146.002556 C117.915884,146.118327 117.212118,146.529619 117.096347,146.998797 C116.861758,147.644677 117.154233,147.702563 118.208359,147.410089 C118.970011,147.1755 120.258725,146.82514 121.078263,146.648437 C122.366978,146.298077 122.485795,146.413848 121.724143,147.233385 C121.020377,148.110808 121.078263,148.229626 121.958732,148.229626 C122.485795,148.229626 122.836155,148.5221 122.720384,148.933392 C122.604613,149.283752 122.954973,150.106336 123.539921,150.691285 C124.359459,151.510822 124.536162,152.272474 124.243688,154.088252 C123.893328,156.315321 123.951213,156.431093 125.416631,156.431093 C127.232409,156.431093 127.466998,157.369448 125.709106,157.896511 C124.597094,158.307803 124.536162,158.365688 125.532402,159.419814 C126.059465,160.065695 126.35194,160.708529 126.178283,160.943118 C125.532402,161.528066 128.697827,163.343844 129.870771,163.05137 C131.744434,162.524307 131.686549,163.928793 129.755,164.925033 C128.4084,165.570914 127.119685,165.744571 125.535449,165.452096 C123.015905,165.040804 123.015905,166.037045 125.535449,166.9754 C127.174524,167.621281 127.409112,168.675407 125.946741,168.791178 C124.307666,168.906949 120.965538,169.260355 119.033989,169.494944 C118.098681,169.622902 117.041508,169.680787 116.691148,169.561969 Z M123.076837,166.165002 C122.60766,164.934173 121.669305,164.75747 119.033989,165.519122 C116.337742,166.280774 117.099394,166.865722 120.907653,166.926654 C122.842248,166.98454 123.311426,166.810883 123.076837,166.165002 Z M121.084356,149.350777 C120.673064,148.704897 120.264819,148.296651 120.088115,148.473355 C119.618938,148.942532 120.38059,150.581607 121.084356,150.581607 C121.495648,150.581607 121.495648,150.2282 121.084356,149.350777 Z" id="Shape" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M75.7386546,166.926654 C72.0461667,166.341706 71.3454471,165.637939 72.749933,164.05675 C74.215351,162.475561 73.4536992,161.887566 71.9303956,163.41087 C70.3492065,164.992059 69.4108515,164.992059 68.4724965,163.41087 C67.8875479,162.533447 67.8266158,162.003337 68.2957933,161.537206 C68.6461531,161.186846 68.941674,160.425195 68.941674,159.837199 C68.941674,158.429667 70.8153374,158.490599 71.7536924,159.956017 C72.1649844,160.601898 72.9845217,161.128961 73.6273558,161.128961 C75.1506594,161.128961 75.1506594,160.190606 73.5694703,159.78236 C72.6311153,159.547772 72.4574587,159.13648 72.749933,158.259057 C73.0424073,157.262816 72.865704,157.028228 71.8115779,157.147045 C70.9341551,157.262816 70.4040454,156.970342 70.2303888,156.385393 C70.1146177,155.681627 70.407092,155.507971 71.4033326,155.681627 C72.1649844,155.797398 73.276996,155.504924 73.9228767,154.977861 C75.0348884,154.100438 74.8612317,154.039506 71.5800358,154.392912 C68.4176575,154.685387 68.1830688,154.627501 69.1793093,153.865849 C69.7642579,153.396672 71.6988535,152.811723 73.5146314,152.577134 C76.1499466,152.28466 76.8537128,152.342546 77.441708,153.162083 C77.853,153.689146 78.4379486,154.100438 78.8492405,154.100438 C79.9033666,154.100438 79.6108923,155.154564 78.4988807,155.447038 C77.7372289,155.623742 77.7951145,155.739513 78.791355,155.797398 C80.1379554,155.855284 82.3650252,157.90565 82.4229108,159.078594 C82.4229108,159.663543 84.5920951,160.952258 88.1048332,162.417676 C89.5123657,162.944739 89.9206111,163.413916 89.6860223,164.175568 C89.4514335,164.995105 89.7439078,165.229694 91.0326227,165.229694 C92.8484006,165.229694 94.6062929,166.107117 94.0213443,166.752998 C93.4303025,167.337946 78.9589184,167.511603 75.7386546,166.926654 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M155.593276,163.822162 C156.004567,163.352984 157.643642,162.649218 159.224831,162.298858 C161.625558,161.713909 162.506027,161.713909 163.618039,162.298858 C164.379691,162.768035 165.022525,163.295098 165.022525,163.471802 C165.022525,164.117682 161.799214,164.644745 158.167659,164.644745 C155.419619,164.641699 155.008327,164.525928 155.593276,163.822162 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M147.568512,163.352984 C146.630157,162.414629 146.691089,161.302617 147.745215,160.891325 C148.214393,160.714622 148.622638,160.013903 148.622638,159.368022 C148.622638,157.960489 148.857227,157.902604 150.673005,159.133433 C152.373012,160.245445 152.723372,159.249204 151.200068,157.552244 C150.145942,156.321415 150.554187,155.267289 152.138423,155.267289 C152.723372,155.267289 153.311367,154.974814 153.427138,154.563522 C153.777498,153.625167 155.066212,154.563522 155.066212,155.736466 C155.066212,156.263529 155.300801,157.083066 155.593276,157.552244 C156.062453,158.25601 156.297042,158.25601 157.116579,157.436473 C157.994002,156.498118 160.33989,156.02894 160.33989,156.790592 C160.33989,157.963536 158.700815,159.660496 156.531631,160.598851 C155.127145,161.244732 153.896315,162.237926 153.719612,162.883807 C153.30832,164.464996 151.550428,164.40711 151.550428,162.768035 C151.550428,161.656024 151.434657,161.595092 150.554187,162.417676 C148.857227,163.880047 148.269232,164.05675 147.568512,163.352984 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M185.005221,163.529687 C183.716506,162.71015 184.770633,161.595092 186.178165,162.298858 C186.824046,162.649218 187.174406,163.176281 186.997702,163.529687 C186.528525,164.172521 186.059347,164.172521 185.005221,163.529687 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M209.963027,162.475561 C209.728439,162.298858 209.551735,161.771795 209.551735,161.302617 C209.551735,160.775554 210.49009,160.540966 212.775046,160.540966 C216.056242,160.540966 216.875779,161.186846 214.883298,162.298858 C213.59763,162.941692 210.551023,163.118395 209.963027,162.475561 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M218.929192,157.143999 C218.929192,155.913169 216.467534,154.33198 215.471293,154.916929 C214.298349,155.678581 207.970546,153.277854 206.742764,151.635733 C206.331472,151.10867 205.627705,150.75831 205.161574,150.931967 C203.930745,151.401144 204.049563,149.993612 205.338278,149.058303 C206.276633,148.354537 206.276633,148.296651 205.338278,148.238766 C204.811215,148.238766 204.165334,148.53124 203.991677,148.823714 C203.345797,149.87784 201.941311,149.469595 201.941311,148.238766 C201.941311,147.592885 201.706722,147.065822 201.356362,147.065822 C201.063888,147.065822 200.771413,147.650771 200.771413,148.296651 C200.771413,149.350777 200.655642,149.408663 199.893991,148.823714 C199.132339,148.238766 198.781979,148.238766 197.843624,149.116189 C196.728566,150.112429 196.612795,150.112429 194.446657,147.592885 C192.161702,145.073341 192.161702,145.073341 189.876746,145.777107 C187.299316,146.538759 186.59555,146.246285 188.234625,145.015455 C189.230865,144.253804 189.054162,144.195918 186.068487,144.138033 C183.548943,144.138033 182.375999,143.787673 180.852696,142.672614 C178.860215,141.207196 177.92186,141.207196 177.92186,142.7305 C177.92186,143.199678 177.510568,143.550037 177.044437,143.550037 C176.578306,143.550037 176.167014,143.022974 176.167014,142.438026 C176.167014,141.326014 173.412881,138.864355 172.124166,138.864355 C171.773806,138.864355 171.478285,138.453064 171.478285,137.986933 C171.478285,137.520802 171.127926,137.10951 170.716634,137.10951 C169.604622,137.10951 168.547449,138.340339 168.547449,139.571168 C168.547449,140.448591 169.016627,140.625294 171.182764,140.625294 C172.648183,140.625294 173.81808,140.859883 173.81808,141.152357 C173.81808,141.914009 172.118073,143.553084 171.417353,143.553084 C170.363227,143.553084 165.793316,145.838039 165.031665,146.776394 C164.09331,147.949338 160.111394,147.949338 159.173039,146.776394 C158.761747,146.307217 158.118913,145.898971 157.707621,145.898971 C156.595609,145.898971 151.556521,141.740353 151.556521,140.801998 C151.556521,140.33282 150.091103,138.517042 148.275325,136.701264 C145.344489,133.889246 144.994129,133.304297 145.344489,131.720062 C145.521192,130.723821 145.694849,129.435106 145.694849,128.850158 C145.694849,128.146391 146.279797,127.619328 147.160267,127.38474 C148.68357,127.03438 148.976045,126.507317 148.214393,125.745665 C147.921919,125.511076 147.745215,124.749424 147.745215,124.045658 C147.745215,123.168235 147.218152,122.699058 145.871552,122.345651 C144.817426,122.053177 143.936956,121.526114 143.936956,121.114822 C143.936956,119.826107 140.479057,117.014089 137.08209,115.490785 C135.443016,114.729133 135.324198,113.675007 136.789616,113.675007 C138.255034,113.675007 140.012926,111.682526 139.720452,110.335926 C139.543749,109.516388 138.900915,109.223914 136.146782,109.105096 L132.8077,108.928393 L132.691929,106.759209 C132.634044,104.29755 132.8077,101.778006 133.103221,101.485532 C133.218992,101.369761 134.68441,101.193058 136.326532,101.135172 C139.549842,100.958469 141.012214,102.012595 141.012214,104.593071 C141.070099,106.701323 143.415987,108.812622 146.167073,109.162982 C148.452028,109.455456 148.628732,109.339685 148.336257,108.343445 C147.809194,106.820141 148.570846,103.596831 149.332498,104.066008 C149.624972,104.300597 149.801675,105.296838 149.682858,106.293078 L149.448269,108.166741 L151.967813,106.466735 C154.721946,104.650957 155.01442,104.066008 153.549002,103.243424 C152.903121,102.893064 152.78735,102.539658 153.195596,102.305069 C154.073019,101.778006 156.418906,104.178733 155.891843,105.001317 C155.599369,105.470494 155.776072,105.52838 156.418906,105.293791 C158.118913,104.64791 157.473032,105.409562 155.072306,106.932866 C153.549002,107.871221 152.729465,108.867461 152.729465,109.629113 C152.729465,110.741125 152.906168,110.683239 154.956535,108.925347 C157.652782,106.582506 159.176086,104.120847 159.176086,102.247184 C159.176086,101.193058 159.46856,100.781766 160.288097,100.781766 C161.226452,100.781766 161.461041,101.250943 161.634698,102.95095 C161.869286,105.470494 163.273772,106.408849 163.273772,104.005076 C163.273772,101.135172 164.270013,100.077999 166.963214,100.254703 C168.605335,100.370474 169.366987,100.196817 169.306054,99.7276396 C169.071466,98.731399 170.125592,98.8502167 170.536884,99.9043428 C170.948176,101.077287 172.060187,101.016354 172.060187,99.7855251 C172.060187,99.2584621 171.709828,97.9118617 171.356421,96.7968035 C170.652655,94.9231401 170.478998,94.8622079 168.544403,95.2156143 C167.432391,95.3923176 164.970732,95.7426774 163.097069,95.9193806 C160.285051,96.2118549 159.581284,96.0960838 158.93845,95.2156143 C158.234684,94.2193738 158.000095,94.2193738 154.779831,95.5659742 C151.382864,96.9735067 149.917446,98.7892846 150.679098,100.662948 C150.971572,101.540371 151.324979,101.540371 142.477632,100.370474 C140.543036,100.077999 138.611487,99.6667074 138.200195,99.3742331 C137.788903,99.1396444 137.085137,99.1975299 136.619006,99.6088219 C135.272406,100.720834 132.341569,98.0855183 131.872392,95.2734999 C131.637803,93.9268995 130.641563,92.0501895 129.587437,90.8802923 C126.833304,87.7179141 125.779178,84.2600149 125.779178,78.4013893 C125.779178,75.5893709 126.071652,73.1277123 126.364126,72.9540556 C126.714486,72.7194669 127.476138,71.5465231 128.122019,70.3187404 C129.822025,66.9217734 132.457341,65.5721264 136.384417,66.0413039 C138.14231,66.2180072 139.781384,66.7450702 140.015973,67.1533156 C140.543036,68.0916706 142.185157,68.2653272 142.185157,67.4457899 C142.185157,66.5074348 146.285891,65.3954232 147.047542,66.157075 C148.455075,67.5646075 148.805435,66.7420236 148.394143,62.9946968 C148.043783,59.6556153 148.159554,58.8939635 149.21368,57.4285454 C149.859561,56.5511226 150.386624,55.3781788 150.386624,54.8511158 C150.386624,54.3240527 150.679098,52.8007491 151.09039,51.3932166 C151.559568,49.5195532 151.559568,47.8195464 151.148276,45.0654135 C150.563327,41.5496288 150.621213,41.199269 151.967813,39.1489023 C152.78735,37.9759586 153.549002,35.8677064 153.725705,34.4632205 C153.902409,33.055688 154.66406,30.1278984 155.483598,27.9587141 C156.772313,24.3850439 157.122672,23.9737519 158.237731,24.2662262 C160.580571,24.8511748 166.204608,27.5474222 166.204608,28.0165997 C166.204608,28.309074 167.024146,29.5399033 167.962501,30.7707326 C168.958741,32.0015619 169.720393,33.4639333 169.720393,34.0519285 C169.720393,34.6368771 170.247456,35.459461 170.835451,35.8677064 C171.478285,36.3368839 172.182052,37.7413698 172.41664,38.9721991 C172.651229,40.4955027 173.589584,42.0766918 174.878299,43.3654067 C176.928666,45.4157733 176.928666,45.4736588 176.87078,50.396976 C176.87078,56.1398306 177.985838,60.0059751 180.328679,61.9405707 C182.613635,63.8751662 186.772253,70.4954436 186.891071,72.4269926 C187.006842,74.2427705 187.067774,74.2427705 182.497864,73.4811187 C180.563268,73.1886444 180.270794,73.3044155 179.451256,74.8277191 C178.982079,75.7660741 178.220427,76.8780857 177.693364,77.2893777 C176.697123,78.108915 174.412168,82.328466 174.412168,83.3247065 C174.412168,83.6750663 174.061808,84.2630615 173.592631,84.6134213 C172.773093,85.2593021 171.834738,89.067561 172.480619,89.067561 C173.007682,89.067561 174.354283,87.0750799 174.415215,86.2555426 C174.415215,85.8442506 175.469341,84.1472904 176.70017,82.4472836 C177.988885,80.7472768 179.219714,78.6969102 179.396417,77.8194873 C180.100184,75.0653544 180.977607,74.8307657 184.435506,76.4728869 C186.193398,77.2924243 187.95129,77.938305 188.362582,77.938305 C188.712942,77.938305 189.066349,78.2886648 189.066349,78.6999568 C189.066349,79.0503166 189.885886,79.8119684 190.882127,80.2811459 C191.878367,80.7503234 193.109196,81.8623351 193.578374,82.6818724 C194.455797,84.1472904 194.455797,84.320947 193.109196,86.0788394 C192.112956,87.3675542 191.293419,87.8367317 190.355064,87.6600285 C189.300937,87.4833253 188.773874,87.9525028 187.893405,89.7103952 C187.247524,90.9412245 186.427987,92.1111216 186.077627,92.3457104 C185.60845,92.5802991 185.666335,92.8727734 186.193398,93.2231332 C187.539998,94.0426706 187.835519,93.869014 189.063302,91.4073554 C189.824954,89.8840518 190.644491,89.0645144 191.406143,89.0645144 C192.048977,89.0645144 192.871561,88.5374514 193.279806,87.9525028 C193.806869,87.0750799 194.218161,86.9562623 195.037699,87.3675542 C197.206883,88.540498 203.123394,86.5480169 203.123394,84.6713069 C203.123394,84.2021294 203.534686,83.793884 204.000817,83.793884 C204.466948,83.793884 205.054943,83.0901177 205.231646,82.2126949 C205.466235,81.2743399 206.520361,78.9314989 207.635419,76.8811323 C208.689546,74.8307657 209.570015,72.4879247 209.570015,71.7262729 C209.570015,70.6142613 209.862489,70.321787 210.916615,70.321787 C212.031674,70.321787 212.439919,70.7909645 212.966982,72.6067424 C213.378274,73.8375717 213.670748,75.3029898 213.670748,75.8300528 C213.670748,76.3571159 214.843692,77.9992371 216.306064,79.5225407 C217.756249,80.978819 218.929192,82.3833049 218.929192,82.6178936 C218.929192,83.0291856 221.564508,84.375786 222.444977,84.375786 C223.264514,84.375786 225.022407,80.7442302 224.845703,79.5712864 C224.729932,78.7517491 225.138178,78.5171604 226.487825,78.5171604 C228.011128,78.5171604 228.303603,78.2825716 228.303603,77.17056 C228.303603,76.4089082 228.653962,75.4705532 229.007369,75.1201934 C229.418661,74.7089014 229.769021,73.0698267 229.826906,71.4277054 C229.884792,68.8502758 230.11938,68.2653272 231.877273,66.7420236 C234.104343,64.8683602 236.212595,63.4608277 235.801303,64.280365 C235.6246,64.5149537 235.097537,65.6848509 234.570474,66.8577947 C234.043411,67.9698063 233.105056,69.3773388 232.401289,70.0232195 C231.289278,71.0194601 230.643397,75.0044223 231.697523,75.0044223 C231.932112,75.0044223 232.928352,74.1848849 233.982478,73.2465299 C236.209548,71.1382778 237.32156,71.0194601 238.494504,72.7773524 C239.667447,74.3585416 239.783218,79.6901041 238.729092,79.6901041 C237.790737,79.6901041 236.444137,82.5021226 237.147903,82.9713001 C237.967441,83.4404776 238.84791,82.6788258 239.551676,80.978819 C240.136625,79.5134009 240.197557,79.4555154 240.605802,80.567527 C240.898277,81.3870643 240.782506,81.7983563 240.19451,81.9141274 C238.790025,82.2644872 240.54487,83.7877908 242.363695,83.7877908 C243.536639,83.7877908 244.356176,84.3727394 245.52912,86.0148606 C246.348657,87.2456899 247.052423,88.5344048 247.052423,88.8847646 C247.052423,89.2351244 247.402783,89.6464164 247.871961,89.8231196 C249.218561,90.3501827 249.395264,94.9200934 248.164435,97.1471633 C246.817834,99.4900042 246.756902,100.428359 247.929846,101.366714 C248.456909,101.778006 248.691498,102.597544 248.514795,103.182492 C248.280206,103.944144 248.456909,104.294504 248.983972,104.294504 C250.038098,104.294504 251.738105,102.42084 251.738105,101.247897 C251.738105,100.720834 252.149397,100.017067 252.67646,99.5478898 C254.083993,98.374946 254.784712,99.9591817 254.376467,103.298263 C254.026107,106.34487 254.668941,108.102763 256.368948,108.687711 C256.953897,108.864415 258.303544,110.387718 259.299784,112.026793 C260.999791,114.780926 261.173448,115.307989 260.765202,118.29671 C260.411796,121.343318 260.472728,121.520021 261.350151,120.404963 C261.819328,119.759082 262.288506,118.412481 262.288506,117.416241 C262.288506,116.477886 262.699798,115.131286 263.165929,114.485405 C263.985466,113.431279 263.985466,113.431279 264.043351,114.719994 C264.043351,115.481645 264.27794,115.892937 264.6283,115.716234 C265.740312,115.012468 265.213249,116.947063 263.750877,118.939544 C262.93134,120.051556 262.285459,121.516974 262.285459,122.22074 C262.285459,122.982392 262.05087,123.744044 261.700511,123.920747 C261.408036,124.09745 261.115562,124.039565 261.115562,123.744044 C261.115562,123.159095 256.722354,123.159095 256.076474,123.744044 C255.841885,124.036518 256.076474,124.682399 256.545651,125.209462 C257.014829,125.794411 257.599777,126.967354 257.834366,127.786892 C258.011069,128.725247 258.711789,129.486899 259.415555,129.660555 C260.938859,130.071847 266.328307,129.483852 266.681713,128.898903 C266.858417,128.664315 267.620068,128.606429 268.38172,128.7222 C269.435846,128.956789 269.905024,129.483852 270.020795,130.595864 C270.136566,131.64999 270.547858,132.119167 271.367395,132.119167 C272.013276,132.177053 272.890699,132.353756 273.301991,132.64623 C274.767409,133.523653 274.648591,132.588345 272.832813,129.188331 C270.840332,125.437958 270.724561,124.61842 271.894458,123.680065 C272.302704,123.329705 272.832813,122.214647 273.067402,121.279339 C273.244105,120.283098 273.652351,119.521446 273.944825,119.521446 C274.529773,119.521446 276.991432,123.213934 277.168135,124.383832 C277.226021,124.734191 277.46061,125.437958 277.753084,125.907135 C278.103444,126.434198 277.929787,126.903376 277.341792,127.19585 C276.168848,127.841731 276.695911,129.892097 278.219215,130.711635 C278.862049,131.061994 280.15381,131.238698 281.031233,131.004109 C282.262062,130.76952 282.73124,130.946223 282.965829,131.765761 C283.0816,132.411641 284.254544,133.112361 285.95455,133.581539 C288.824454,134.401076 289.177861,134.754482 287.770328,135.92438 C287.066562,136.509328 287.008676,136.862735 287.535739,137.447683 C288.413162,138.501809 290.055284,138.501809 290.993639,137.389798 C292.224468,135.92438 293.33648,136.335672 293.33648,138.209335 C293.33648,139.555935 292.98612,140.025113 291.578587,140.552176 C290.640232,140.84465 289.820695,141.371713 289.820695,141.664187 C289.820695,142.310068 286.012436,144.125846 284.665836,144.125846 C284.138772,144.125846 282.262062,144.652909 280.565102,145.29879 C276.58014,146.822093 275.526014,146.822093 275.937306,145.29879 C276.290712,144.010075 274.88318,143.598783 274.471888,144.829612 C274.295185,145.29879 273.125287,145.472446 271.132806,145.356675 C268.555377,145.240904 267.909496,145.414561 267.147844,146.410801 C266.270421,147.699516 264.393711,148.052923 263.750877,147.056682 C263.516288,146.706322 262.462162,146.937865 261.057676,147.641631 C259.768962,148.345397 258.480247,148.695757 258.187772,148.519054 C257.837413,148.34235 257.602824,148.461168 257.602824,148.753642 C257.602824,149.104002 257.252464,149.399523 256.783287,149.399523 C256.314109,149.399523 255.844932,149.634112 255.72916,149.926586 C255.671275,150.21906 254.440446,150.630352 253.093845,150.864941 C250.985593,151.215301 250.574301,151.09953 250.574301,150.337878 C250.574301,149.518341 249.696878,149.399523 244.831447,149.399523 C241.669068,149.399523 238.854003,149.576226 238.619415,149.810815 C238.211169,150.279993 230.945011,151.803296 228.483352,151.976953 C227.310409,152.034838 227.310409,152.092724 228.132993,153.088964 C229.010415,154.027319 229.010415,154.200976 227.779586,155.489691 C226.72546,156.601703 226.021694,156.836291 224.263801,156.601703 C222.740498,156.367114 221.863075,156.601703 221.332965,157.247583 C220.275793,158.548484 218.929192,158.432713 218.929192,157.143999 Z M200.180372,144.722981 C200.649549,144.430507 200.823206,144.019215 200.591664,143.784626 C200.357075,143.550037 199.714241,143.784626 199.184131,144.311689 C198.130005,145.365815 198.714954,145.658289 200.180372,144.722981 Z M160.105301,137.514708 C159.578238,136.810942 158.7587,135.641045 158.231637,134.937279 C157.177511,133.413975 157.527871,132.594438 159.520352,131.832786 C160.574478,131.421494 160.924838,130.836546 160.924838,129.429013 C160.924838,127.963595 160.748135,127.729006 160.163186,128.256069 C159.10906,129.075607 158.581997,128.490658 158.581997,126.498177 C158.581997,124.682399 157.820345,124.036518 155.651161,123.80193 C154.831624,123.744044 153.424091,123.567341 152.427851,123.45157 C150.904547,123.274867 150.612073,123.45157 149.966192,125.325233 C149.088769,127.844777 149.027837,128.313955 149.673718,128.313955 C149.966192,128.313955 150.612073,127.3756 151.139136,126.263588 C151.666199,125.151577 152.485736,124.213222 152.954914,124.213222 C154.301514,124.213222 156.23611,129.075607 155.824818,131.537265 C155.532343,133.237272 155.824818,133.998924 157.698481,136.457536 C158.92931,138.099657 160.16014,139.269554 160.452614,139.092851 C160.751181,138.922241 160.574478,138.160589 160.105301,137.514708 Z M164.148149,130.659842 C163.971445,130.367368 163.270726,130.074894 162.624845,130.074894 C161.978964,130.074894 161.628604,130.367368 161.805308,130.659842 C161.982011,131.010202 162.68273,131.244791 163.328611,131.244791 C163.971445,131.247838 164.324852,131.013249 164.148149,130.659842 Z M247.052423,103.709555 C247.052423,102.42084 246.641131,102.244137 245.352416,103.063674 C244.414061,103.648623 245.002057,104.879465 246.229839,104.879465 C246.699017,104.882499 247.052423,104.355436 247.052423,103.709555 Z" id="Shape" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M56.6364276,156.440232 C56.6364276,155.501877 56.2251356,155.267289 54.4672432,155.267289 C52.0665168,155.209403 49.4860405,153.859756 50.893573,153.332693 C51.304865,153.213875 51.4206361,152.863515 51.1860473,152.571041 C50.9514586,152.336452 49.955218,152.571041 49.0777951,153.098104 C48.1394401,153.625167 46.5003655,154.094345 45.3853072,154.094345 C43.6853004,154.094345 43.3349406,153.743985 42.3965856,151.809389 C41.400345,149.640205 41.5191627,147.650771 42.6890599,147.650771 C42.9815342,147.650771 43.9777747,148.062063 44.9161297,148.528193 C46.4394333,149.347731 46.6161365,149.347731 46.3236622,148.528193 C46.0890735,147.943245 46.3236622,147.650771 47.2010851,147.650771 C48.6665032,147.650771 48.8432064,146.65453 47.4356739,146.30417 C46.7319076,146.127467 46.9664964,145.892878 48.3130967,145.600404 C49.3093373,145.365815 50.1867602,144.954523 50.1867602,144.662049 C50.1867602,144.369575 51.3597039,144.250757 52.8220754,144.369575 C54.2874934,144.485346 55.4573906,144.311689 55.4573906,144.0771 C55.4573906,143.784626 55.2228018,143.550037 54.9303275,143.550037 C54.6378532,143.550037 54.5190356,143.022974 54.6957388,142.377094 C54.9882131,141.20415 54.2844468,140.795904 53.4649095,141.615442 C52.8799609,142.20039 46.6100433,144.134986 45.2634429,144.134986 C44.6175622,144.134986 43.6213217,144.604163 42.9784876,145.189112 C42.1010647,145.892878 41.7476583,146.008649 41.570955,145.481586 C41.1596631,144.42746 39.0514109,144.543231 39.0514109,145.600404 C39.0514109,146.419941 38.8747077,146.419941 37.7626961,145.658289 C36.1236214,144.604163 30.4965379,144.780867 22.6454312,146.185353 C16.1409249,147.297364 16.9025767,147.297364 12.0980771,146.30417 C7.35146314,145.365815 7.00110331,144.019215 11.1597221,142.672614 C12.2717337,142.38014 12.2138482,142.322255 10.9830189,141.3839 C10.105596,140.798951 9.45971531,140.680133 9.10935548,141.03354 C8.64017798,141.502717 3.83567845,140.506477 2.8394379,139.686939 C2.72366682,139.629054 3.36650094,138.867402 4.18603827,138.047865 C5.29804989,136.935853 6.29429044,136.524561 8.11006833,136.524561 C10.1025494,136.524561 10.3950237,136.40879 9.81007513,135.705024 C9.39878316,135.235846 7.7597085,134.53208 6.11758723,134.18172 C2.65968807,133.477954 1.54767645,132.716302 1.54767645,131.192999 C1.54767645,129.026861 5.17923221,124.161429 5.88299847,125.334373 C6.35217598,126.038139 8.57924583,126.272728 8.57924583,125.626847 C8.57924583,124.280247 5.70934186,121.056936 3.24768326,119.710336 C-0.325986969,117.659969 -1.08763876,116.313369 1.72437967,116.898318 C2.72062022,117.132906 3.83263184,117.544198 4.18603827,117.836673 C4.47851256,118.129147 5.0055756,118.363736 5.41686757,118.363736 C5.7672274,118.363736 7.35146314,119.594565 8.93265227,121.175754 C12.6830257,124.749424 14.4988036,126.156957 14.8491634,125.745665 C15.0258666,125.568962 14.7303457,124.749424 14.2032827,123.929887 C13.0303389,122.171995 13.4995164,122.114109 17.0731867,123.695298 C19.7085019,124.868242 19.8273196,124.984013 19.4769597,126.857677 C19.1265999,128.673454 19.242371,128.850158 20.9423778,129.200517 C22.3499103,129.550877 23.05063,129.316289 24.2814593,128.204277 C25.1588821,127.442625 26.5664147,126.446385 27.5047697,125.977207 C28.4431247,125.50803 29.3205475,124.453903 29.6130218,123.399777 C29.9054961,122.403537 30.1979704,122.053177 30.1979704,122.638126 C30.255856,123.165189 30.4904447,123.634366 30.782919,123.634366 C31.7791595,123.634366 32.1904515,115.079493 31.6603419,106.000604 L31.309982,100.376567 L33.1257599,98.2683147 C34.179886,97.1563031 35.4107153,94.9292333 35.9377784,93.3480441 C36.4648414,91.8247405 37.1686077,90.1247337 37.576853,89.6555562 C37.9850984,89.1863787 38.4542759,88.3089559 38.6309791,87.7818928 C38.8655679,87.1969442 39.4505164,86.7277667 39.9196939,86.7277667 C40.6813457,86.7277667 40.7971168,87.0781266 40.5046425,88.6623623 L40.0933506,90.5360257 L42.1437172,88.1931848 C43.316661,86.9044699 44.2519694,85.3811663 44.3129015,84.7962178 C44.370787,81.9841993 45.8940906,79.9917182 48.7670412,78.9375922 C50.3482303,78.4105291 52.3407114,77.9413516 53.2211809,77.9413516 C54.2174215,77.9413516 55.0369588,77.5300596 55.4482508,76.82934 C55.7407251,76.1865059 56.7948511,75.5406251 57.7910917,75.3060364 C58.7294467,75.0714476 60.0760471,74.2519103 60.7219278,73.432373 C62.7722944,70.8549433 65.5264273,69.0970509 66.4038502,69.8008172 C66.9887988,70.3278803 67.2812731,70.0932915 67.7504506,68.8624622 C68.3963313,67.1624554 68.0429249,64.8775 66.75421,62.945951 C65.5233807,61.0113555 66.3429181,55.8564961 67.9271538,55.3294331 C69.0391654,54.9790733 69.0391654,54.8602556 68.1617425,54.2174215 C66.6963245,53.1632954 66.9309132,51.1708143 68.63092,50.0588027 C69.4504574,49.5317396 70.0963381,48.7122023 70.0963381,48.2430248 C70.0963381,46.9543099 72.3812935,43.9655883 73.3196485,43.9655883 C74.9008376,43.9655883 75.8391926,40.8610956 75.8970782,35.529533 C75.8970782,32.659629 76.0737814,30.1979704 76.1895525,30.0212672 C76.3662557,29.9054961 76.1316669,29.0829122 75.720375,28.2054893 C74.5474312,25.9205339 74.1391858,20.5310858 75.1354264,20.5310858 C76.247438,20.5310858 76.1895525,18.3619015 75.0166087,17.9536561 C74.5474312,17.7769529 74.3128424,17.3077754 74.4895457,17.0153011 C74.7241344,16.6618947 74.9587232,14.907049 75.1354264,13.0303389 C75.4857862,7.40630207 75.720375,6.2333583 76.7745011,4.12510613 C78.1211014,1.48979091 79.9368793,0.082258394 81.9902926,0.0243728575 C83.9827737,0.0243728575 83.9827737,0.435664827 82.0481781,2.42509932 C80.58276,3.94840291 80.5248745,4.18299166 81.2286408,5.88299847 C81.6399327,6.87923902 82.4015845,7.93336511 82.9286476,8.2258394 C83.6902994,8.63713137 83.7481849,8.92960566 83.1053508,9.98373174 C82.5782877,10.8611546 82.5204022,11.5070353 83.0474652,12.3844582 C83.3978251,13.0882245 83.5745283,14.3769393 83.4587572,15.2543622 C83.282054,16.3663738 83.5166428,17.0701401 84.2782945,17.5393176 C84.8632431,17.8896774 85.3324206,18.5355581 85.3324206,19.0047356 C85.3324206,19.4160276 86.0361869,19.9430906 86.9714953,20.1167472 C89.7835137,20.762628 90.2526912,21.3475765 89.548925,23.3979432 C88.9030443,25.1558355 88.9639764,25.2137211 90.48728,25.2137211 C91.7759948,25.2137211 92.5955322,25.8565552 94.295539,28.1445572 C95.4684827,29.7257463 96.4647233,31.6603419 96.4647233,32.3641081 C96.5226088,34.1220005 98.3383867,36.2302526 100.449685,36.9919044 C102.323349,37.6377852 102.911344,39.1610888 103.203818,43.7309995 C103.319589,45.3121887 103.849699,46.6009035 104.842893,47.7159617 C107.773729,50.87834 108.827855,57.7362528 106.366197,57.7362528 C105.897019,57.7362528 104.785008,58.1475447 103.788767,58.6746078 C102.850412,59.2016708 100.800045,59.7866194 99.2767417,60.0212081 C97.7534381,60.2557969 96.3459056,60.6670889 96.172249,61.0174487 C95.9376602,61.309923 95.2948261,61.5445117 94.6489454,61.5445117 C93.8294081,61.5445117 93.5369338,61.9558037 93.5369338,63.1835864 C93.5369338,65.5264273 92.0136302,67.4031374 90.0790346,67.4031374 C88.4978455,67.4031374 86.5053644,68.9264409 86.5053644,70.1572702 C86.5053644,70.918922 82.0512247,72.9692887 80.6467388,72.8535176 C80.0617902,72.7956321 78.8888464,73.3805806 78.1271946,74.0843469 C77.0730686,75.0227019 76.4271878,75.2572907 76.0189425,74.8459987 C75.6076505,74.4347067 75.1994051,74.4347067 74.61141,74.9038842 C73.9655292,75.4309473 73.2648096,75.138473 71.330214,73.4963517 C68.9873731,71.4459851 68.8106699,71.3880996 68.0490181,72.4422256 C67.2873663,73.4963517 67.2294807,73.4963517 66.1753547,72.5001112 C65.5325205,71.9730481 64.8866398,71.5038706 64.6520511,71.5038706 C64.4753478,71.5038706 64.2407591,73.0271742 64.124988,74.9008376 C63.9482848,78.2399191 63.9482848,78.2399191 61.7242616,78.7669822 C60.0242548,79.1782741 59.6160094,79.5286339 59.9084837,80.2324002 C60.1430724,80.7594633 60.4355467,81.8745215 60.5543644,82.6940588 C60.7889532,84.0406592 60.6701355,84.2173624 58.9731753,84.2752479 C57.5656428,84.2752479 57.0385797,83.9827737 56.6303343,82.8677154 C56.0453858,81.3444118 54.4032645,80.994052 53.2333673,82.1639492 C52.8220754,82.5721945 52.5296011,84.5646756 52.5296011,87.0842198 C52.5296011,91.2428386 52.5296011,91.3037707 54.345379,92.0654225 C55.810797,92.6503711 56.5724488,92.6503711 57.9769347,92.123308 C59.207764,91.6541305 60.0273014,91.6541305 60.3776612,92.007537 C60.728021,92.3578968 61.9588503,92.5924856 63.1896796,92.5924856 C65.2400463,92.5924856 65.474635,92.4157823 65.8249948,90.8345932 C66.001698,89.8383527 66.5866466,88.7842266 67.1137097,88.5496378 C67.8753615,88.0804603 68.0520647,88.3150491 67.9911325,89.8383527 C67.933247,90.8924787 67.6986583,92.2390791 67.406184,92.8270743 C66.8212354,94.3503779 68.1678358,96.6353333 70.3949056,97.8661626 C71.3911462,98.4511112 72.0949124,99.3315806 72.0949124,99.8586437 C72.0370269,100.385707 72.3295012,100.796999 72.7407931,100.796999 C73.091153,100.796999 73.7949192,101.851125 74.2062112,103.081954 C74.7332742,104.724075 75.4370405,105.601498 76.6678698,106.128561 C77.8986991,106.597739 78.2490589,107.066916 78.0144702,107.886454 C77.6031782,109.059397 79.303185,110.405998 82.0573179,111.109764 C83.3460328,111.402238 83.638507,111.344353 83.2881472,110.81729 C83.0535585,110.348112 83.638507,110.46693 84.8114508,111.109764 C86.6851142,112.048119 86.7460464,112.106005 85.4573315,112.575182 C83.8761424,113.160131 83.7573247,114.860137 85.2806283,115.271429 C86.0422801,115.448133 86.2768689,115.914264 86.0422801,116.736847 C85.8655769,117.556385 85.9843946,117.848859 86.3926399,117.556385 C86.7429998,117.321796 87.858058,117.556385 88.7933664,118.083448 C89.7896069,118.552625 90.6670298,118.960871 90.9016186,118.960871 C91.6632704,118.960871 91.0783218,117.553338 89.6129037,115.798492 L88.0896001,113.982715 L89.6129037,113.806011 C90.4903266,113.69024 91.1940929,113.394719 91.1940929,113.160131 C91.1940929,112.867656 91.8399736,112.51425 92.6595109,112.398479 C93.9482258,112.106005 94.124929,112.221776 93.7715225,113.336834 C93.5369338,113.982715 93.0098707,115.094726 92.5985788,115.73756 C92.1294013,116.383441 91.7790414,118.141333 91.7790414,119.722523 C91.7790414,121.949592 91.6023382,122.534541 90.9595041,122.299952 C90.0211491,121.88866 88.2053712,124.292433 87.9707825,126.223982 C87.6204226,129.093886 85.3354672,132.140493 85.3354672,129.739767 C85.3354672,129.093886 84.8662897,128.92023 83.7542781,129.036001 C82.4076777,129.151772 82.0542713,129.505178 81.9385002,131.086367 C81.761797,132.667556 81.4114372,133.078848 79.1264818,133.956271 C77.5452927,134.54122 76.2565778,134.717923 75.9610569,134.425449 C75.2572907,133.721683 74.2610501,127.159291 74.6723421,126.105165 C74.9069308,125.459284 74.6144566,125.343513 73.5603305,125.693873 C72.7407931,125.870576 72.4483189,125.870576 72.8565642,125.575055 C73.3836273,125.163763 73.3836273,124.578814 72.7986787,122.878808 C71.7445526,119.774315 71.4520783,119.713383 70.6904265,122.40963 C70.1633635,124.344226 69.8130036,124.810357 68.6400599,124.810357 C65.5934527,124.810357 61.2002451,128.968975 62.2543712,130.845685 C63.1317941,132.368989 67.8205225,137.115603 68.4664033,137.115603 C68.7588776,137.115603 68.9355808,137.465963 68.7588776,137.93514 C68.5242888,138.520089 69.2280551,138.989266 71.2784217,139.458444 C73.9137369,140.104325 74.0904401,140.277981 74.3250289,142.154691 C74.5017321,143.562224 74.2671433,144.381761 73.6791482,144.790006 C73.0332674,145.201298 73.6791482,145.259184 75.7874003,145.082481 C79.1264818,144.790006 81.5302549,143.09 81.0031918,141.332107 C80.8264886,140.805044 79.714477,139.808804 78.4836477,139.162923 C75.7874003,137.697505 75.7295148,136.877968 78.3069445,136.643379 C79.4189561,136.524561 81.2956661,135.647138 82.4655633,134.708783 C83.638507,133.770428 84.9272219,133.008776 85.2196962,133.008776 C86.1580512,133.008776 86.6851142,135.235846 86.2159367,137.520802 C85.8655769,139.571168 85.8655769,139.571168 87.1542917,138.632813 C88.385121,137.813276 88.5008921,137.813276 89.2046584,139.217762 C90.2587845,141.152357 89.7317214,142.206484 87.3309949,142.968135 C85.7498058,143.495198 85.3963994,143.845558 85.9234624,144.433553 C86.919703,145.606497 85.3963994,147.656864 83.5806215,147.656864 C82.7031986,147.656864 81.7648436,148.183927 81.3535517,148.829808 C80.7686031,149.826048 80.24154,150.002751 78.6573043,149.70723 C77.1918862,149.414756 76.6069377,149.530527 76.3723489,150.234293 C76.0798746,150.93806 75.6685826,151.053831 74.4986855,150.584653 C73.3257417,150.173361 73.0332674,150.234293 73.0332674,150.877128 C73.0332674,152.28466 71.4520783,151.873368 70.1633635,150.231247 C68.2897,147.83052 68.6979454,145.076388 70.9250153,145.015455 C72.0370269,145.015455 71.8633703,143.726741 70.632541,142.614729 C69.4017117,141.502717 69.3438261,141.502717 69.7551181,142.672614 C69.9897069,143.492152 69.5205293,144.488392 67.9972258,146.069581 C65.0085041,149.235006 63.427315,148.704897 64.4814411,145.015455 C64.7160298,144.369575 64.5972121,143.434266 64.2468523,142.965089 C63.7197893,142.203437 63.5430861,142.203437 63.016023,143.141792 C62.4310744,144.138033 62.3122567,144.138033 60.9656564,143.26061 C59.7348271,142.498958 59.2656496,142.441072 57.9769347,143.083906 C55.6919793,144.195918 55.5152837,145.368862 57.742346,144.95757 C59.2656496,144.665096 59.5581239,144.780867 59.5581239,145.661336 C59.5581239,146.365102 60.4964789,147.361343 61.7851937,148.18088 C63.6009716,149.292892 64.0122636,149.823002 63.7776748,150.935013 C63.5430861,152.165842 63.1927262,152.342546 60.7889532,152.342546 C59.1468319,152.342546 57.3919861,151.873368 56.2190424,151.169602 C55.1649163,150.523721 54.2844468,150.292179 54.2844468,150.584653 C54.2844468,150.935013 53.7573838,151.169602 53.1115031,151.169602 C52.4656223,151.169602 51.9385593,151.580894 51.9385593,152.047025 C51.9385593,152.631973 52.5235079,152.924448 53.6385661,152.924448 C54.5769211,152.924448 56.392699,153.274807 57.6814138,153.743985 C59.0889463,154.271048 61.0204953,154.447751 62.4859134,154.271048 C64.8896864,153.920688 64.947572,153.978574 64.53628,155.325174 C63.8903993,157.317655 63.8903993,157.317655 61.6054439,156.263529 C58.9091965,154.974814 58.3821335,155.0327 58.3821335,156.440232 C58.3821335,157.086113 57.9708415,157.613176 57.5047106,157.613176 C57.0385797,157.613176 56.6364276,157.083066 56.6364276,156.440232 Z M59.859738,150.581607 C59.5672637,149.704184 59.7439669,149.408663 60.5056187,149.408663 C61.2672705,149.408663 61.325156,149.23196 60.7402074,148.53124 C59.8627846,147.477114 58.3973665,147.358296 58.3973665,148.415469 C58.3973665,149.880887 59.1590183,151.75455 59.6860814,151.75455 C59.9785556,151.751504 60.0364412,151.224441 59.859738,150.581607 Z M39.9989057,90.9381779 C39.4718427,90.4690003 38.4756021,91.5231264 38.4756021,92.4614814 C38.5334877,93.3389043 38.5913732,93.3389043 39.353025,92.3457104 C39.8222025,91.6998297 40.1146768,91.1118345 39.9989057,90.9381779 Z" id="Shape" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M188.697709,155.209403 C185.124039,154.097391 184.243569,153.33574 182.193203,149.466548 C181.139077,147.592885 181.196962,147.474067 183.131558,146.30417 C185.297696,145.073341 185.885691,145.834993 184.654861,148.177834 C183.481918,150.520675 183.54285,150.813149 185.416513,151.574801 C186.293936,151.92516 187.643583,152.628927 188.46312,153.15599 C189.282658,153.625167 190.632305,154.15223 191.451842,154.328934 C193.033031,154.679293 194.321746,156.498118 192.975146,156.3793 C192.563854,156.382347 190.629258,155.855284 188.697709,155.209403 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M248.399024,156.02894 C246.406542,155.678581 246.759949,154.271048 248.868201,153.862803 C251.153156,153.451511 252.67646,154.389866 251.68022,155.620695 C250.976453,156.440232 250.741865,156.498118 248.399024,156.02894 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M121.788122,140.326727 C121.142241,139.565075 121.203174,139.449304 122.022711,139.449304 C122.726477,139.449304 122.842248,139.272601 122.373071,138.687652 C121.261059,137.341052 123.6039,135.933519 126.415919,136.168108 C129.40464,136.460582 129.639229,136.753057 128.935463,138.745538 C128.466285,140.092138 128.05804,140.326727 126.239215,140.326727 C125.066272,140.326727 123.896374,140.50343 123.661786,140.795904 C123.076837,141.380853 122.668592,141.265082 121.788122,140.326727 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M69.9958001,136.518468 C68.8837884,135.229753 69.5845081,134.410216 71.1687438,135.110935 C71.6958069,135.345524 72.6920474,135.461295 73.3379281,135.345524 C74.5108719,135.226706 74.5108719,135.226706 73.3958137,136.457536 C71.9882812,137.983886 71.2266294,137.983886 69.9958001,136.518468 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M137.139976,129.605716 C136.789616,129.371127 136.378324,128.198184 136.201621,126.970401 C136.024918,125.270394 136.201621,124.569675 137.021158,124.158383 C138.13317,123.573434 137.840695,121.873427 136.551981,121.873427 C135.55574,121.873427 135.55574,121.815542 136.317392,119.880946 C136.786569,118.650117 136.728684,118.357643 135.9061,118.357643 C135.379037,118.357643 135.086563,118.180939 135.260219,118.007283 C135.494808,117.830579 136.841408,117.891512 138.306826,118.065168 C140.357193,118.415528 141.003074,118.711049 141.003074,119.588472 C141.003074,120.17342 141.237662,120.761416 141.530137,120.996004 C141.822611,121.172708 141.179777,122.988485 140.122604,125.038852 C138.715072,127.792985 138.364712,128.962882 138.833889,129.43206 C139.598588,130.190665 138.194102,130.367368 137.139976,129.605716 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M132.685836,123.570387 C131.104647,122.692965 131.339236,120.700483 133.036196,120.700483 C134.148208,120.700483 134.501614,121.050843 134.675271,122.458376 C134.970791,124.332039 134.443728,124.62756 132.685836,123.570387 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M262.870408,111.737365 C262.870408,111.326073 262.693704,110.44865 262.520048,109.80277 C262.227574,108.690758 262.40123,108.514055 264.043351,108.690758 C265.682426,108.806529 266.913255,109.686998 266.974188,110.79901 C266.974188,110.975713 266.035833,111.383959 264.923821,111.737365 C263.397471,112.206543 262.870408,112.206543 262.870408,111.737365 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M263.455356,105.232859 C263.455356,102.947903 263.220768,102.536611 261.228286,101.132125 C259.997457,100.312588 258.592971,99.6088219 258.062862,99.6088219 C256.832032,99.6088219 255.954609,98.3201071 256.889918,97.9697472 C257.886158,97.6772729 257.767341,96.6810324 256.655329,96.6810324 C256.186152,96.6810324 255.951563,96.3885581 256.128266,96.0351517 C256.42074,95.6238597 256.889918,95.8005629 257.65157,96.4464436 C258.236518,96.9735067 259.232759,97.4426842 259.759822,97.5005697 C260.34477,97.5584553 261.810188,98.0855183 263.041018,98.731399 C265.383859,99.9043428 265.502676,100.312588 264.856796,105.117088 C264.393711,108.514055 263.455356,108.629826 263.455356,105.232859 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M161.978964,99.7855251 C162.390256,99.6088219 162.917319,99.669754 163.090976,99.8434107 C163.325565,100.020114 162.975205,100.19377 162.329324,100.135885 C161.68649,100.135885 161.512833,99.9591817 161.978964,99.7855251 Z" id="Path" fill="#000000"/>                <path d="M248.341138,87.772753 C247.871961,87.3035755 247.871961,86.7765124 248.283253,86.0148606 C249.044904,84.6073281 249.983259,85.1953233 249.983259,87.0689867 C249.980213,88.5953369 249.45315,88.8878112 248.341138,87.772753 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M68.941674,87.3035755 C68.941674,87.0111012 69.2341483,86.7186269 69.5266226,86.7186269 C69.8769824,86.7186269 70.1115711,87.0111012 70.1115711,87.3035755 C70.1115711,87.6539353 69.8769824,87.8885241 69.5266226,87.8885241 C69.2341483,87.8915707 68.941674,87.6569819 68.941674,87.3035755 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M71.5769892,87.3035755 C71.7536924,87.0111012 72.2228699,86.7186269 72.5153442,86.7186269 C72.865704,86.7186269 72.9266362,87.0111012 72.749933,87.3035755 C72.5732297,87.6539353 72.1040522,87.8885241 71.8115779,87.8885241 C71.4612181,87.8915707 71.4033326,87.6569819 71.5769892,87.3035755 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M73.6273558,86.0148606 C73.6273558,85.0186201 75.735608,83.964494 76.3814887,84.6073281 C76.6160775,84.7840313 76.3814887,84.957688 75.9701968,84.957688 C75.5589048,84.957688 74.8581851,85.4268655 74.4468932,86.011814 C73.7461735,86.9532157 73.688288,86.9532157 73.6273558,86.0148606 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M63.6679969,85.0186201 C63.6679969,84.6682603 64.5454198,84.6073281 65.6025925,84.7840313 C67.010125,85.0186201 67.7717768,84.7840313 68.5913142,83.8456763 C69.2371949,83.1419101 70.407092,82.614847 71.3454471,82.614847 C72.5183908,82.614847 72.9266362,82.3802583 72.6920474,81.7953097 C72.3416876,80.8569547 74.0965333,80.2720061 76.2078321,80.6832981 C77.4386614,80.9178868 77.6153646,81.1524756 77.085255,81.7953097 C76.7348952,82.2644872 75.7386546,82.614847 74.9770028,82.614847 C74.1574655,82.614847 72.749933,83.2607277 71.7536924,84.0802651 C70.3461599,85.2532088 69.352966,85.5457125 66.8334218,85.5457125 C65.0755295,85.5487297 63.6679969,85.314141 63.6679969,85.0186201 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M249.395264,80.9178868 C249.395264,80.3329382 249.806556,79.5134009 250.272687,79.1021089 C251.034339,78.4562282 251.326813,78.5171604 252.030579,79.4524688 C253.37718,81.2103611 253.084705,82.029922 251.153156,82.029922 C249.803509,82.0329451 249.395264,81.7404708 249.395264,80.9178868 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M68.3567254,80.8600013 C68.3567254,80.567527 68.8837884,80.2750527 69.5875547,80.2750527 C70.2334354,80.2750527 70.5837953,80.567527 70.407092,80.8600013 C70.2303888,81.2103611 69.6454402,81.4449499 69.1762627,81.4449499 C68.7070852,81.4449499 68.3567254,81.2103611 68.3567254,80.8600013 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M78.9010329,80.5096415 C78.9010329,79.9825784 79.1935072,79.6901041 79.6047991,79.8058752 C80.6589252,80.156235 80.8356284,81.4449499 79.8393879,81.4449499 C79.3123248,81.4449499 78.9010329,81.0367045 78.9010329,80.5096415 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M119.033989,79.1021089 C118.857286,78.8096347 118.976104,78.5171604 119.268578,78.5171604 C119.618938,78.5171604 119.914459,78.8096347 119.914459,79.1021089 C119.914459,79.4524688 119.798688,79.6870575 119.67987,79.6870575 C119.503167,79.6901041 119.210693,79.4555154 119.033989,79.1021089 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M254.668941,76.232205 C254.668941,75.6472564 254.141878,75.0013757 253.495997,74.8277191 C252.850117,74.6510158 252.323054,74.2427705 252.323054,73.9502962 C252.323054,73.5968898 252.908002,73.4811187 253.611768,73.7157074 C254.608009,73.9502962 254.784712,73.8314785 254.489191,73.0698267 C254.077899,72.0157006 254.958369,71.6622942 255.543317,72.6585347 C255.720021,73.0088946 256.42074,73.2434833 257.066621,73.2434833 C258.355336,73.2434833 258.589925,74.2976094 257.30121,74.7667869 C256.832032,74.9434901 256.304969,75.5863243 256.128266,76.232205 C255.665182,77.6366909 254.668941,77.697623 254.668941,76.232205 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M214.066807,71.1352312 C213.832218,70.9006424 213.655515,70.1389906 213.655515,69.4961565 C213.655515,68.3841449 213.713401,68.3841449 214.651756,69.3194533 C215.355522,69.965334 215.471293,70.492397 215.063048,70.9006424 C214.709641,71.2510022 214.298349,71.3119344 214.066807,71.1352312 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M245.059942,67.5036754 C244.825353,66.9187268 243.655456,65.8615541 242.424627,65.1608345 C241.193798,64.4570682 240.0239,63.4608277 239.789312,62.9916501 C239.085545,61.0570546 242.543445,57.4254988 245.17876,57.4254988 C246.175,57.4254988 247.640418,60.9412835 247.640418,63.2841244 C247.640418,64.280365 247.990778,65.5690798 248.40207,66.2149606 C248.987019,67.2112011 248.929133,67.5036754 248.225367,67.9728529 C246.817834,68.8502758 245.410302,68.6735725 245.059942,67.5036754 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M227.130659,67.0314513 C227.130659,66.6232059 228.184785,65.2156734 229.4735,63.9269586 C230.762215,62.6382437 231.816341,61.1149401 231.816341,60.4111739 C231.816341,59.4149333 234.509541,56.8375036 235.6246,56.8375036 C235.859188,56.8375036 235.917074,57.7758586 235.740371,58.8878703 C235.158469,62.5803582 227.130659,70.1389906 227.130659,67.0314513 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M249.395264,62.1690662 C248.691498,60.7645803 248.633612,58.595396 249.337379,57.5412699 C249.687738,56.9563213 249.922327,57.0720924 250.156916,58.0683329 C250.44939,59.1803446 250.626093,59.2412767 251.445631,58.595396 C252.618575,57.5991554 253.145638,58.184104 252.383986,59.6495221 C251.564448,61.2307112 251.564448,61.5231855 252.618575,61.5231855 C253.965175,61.5231855 253.672701,62.519426 252.207283,62.9276714 C250.214801,63.4608277 250.09903,63.3998955 249.395264,62.1690662 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M258.181679,62.7570614 C258.181679,62.0532951 259.412509,61.6450498 260.701223,61.9954096 C262.340298,62.4067016 261.874167,63.2841244 259.939572,63.2841244 C259.004263,63.2841244 258.181679,63.0495357 258.181679,62.7570614 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M263.104996,60.8803514 C262.928293,60.5299915 262.108756,60.4111739 261.40499,60.5878771 C260.643338,60.7645803 259.823801,60.7036482 259.647097,60.3532883 C259.470394,60.060814 259.762868,59.7683397 260.350864,59.7683397 C261.932053,59.7104542 266.093718,56.663847 266.267375,55.3142 C266.444078,54.0254852 271.187645,52.1518218 271.541052,53.2638334 C271.833526,54.2021884 273.768122,54.0254852 274.587659,53.0292447 C274.998951,52.5600671 275.526014,52.1518218 275.760603,52.1518218 C276.698958,52.1518218 275.583899,54.4367772 273.944825,55.9021952 C273.00647,56.7796181 272.244818,57.7179731 272.244818,58.0104474 C272.244818,58.3608072 271.952344,58.595396 271.601984,58.595396 C271.30951,58.595396 270.020795,59.2382301 268.847851,60.060814 C266.620781,61.5841176 263.805716,61.9954096 263.104996,60.8803514 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M236.505069,55.5487888 C236.505069,54.6104338 244.941124,52.2097073 245.644891,52.9134736 C246.290771,53.5563077 244.471947,54.8480691 242.363695,55.2563145 C241.251683,55.4330177 239.432859,55.7833776 238.439665,56.0179663 C236.974247,56.3104406 236.505069,56.1946695 236.505069,55.5487888 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M268.729033,48.7548548 C268.729033,47.5240255 268.378674,46.0586074 267.967382,45.4736588 C267.263615,44.4774183 267.147844,44.4774183 265.332066,45.5315444 C263.2817,46.7044881 262.928293,47.6976821 264.454643,48.2856773 C266.212536,48.9894435 264.101237,49.8089809 260.70427,49.8089809 C258.419315,49.8089809 257.599777,49.5743921 257.599777,48.9894435 C257.599777,48.520266 256.838125,47.993203 255.89977,47.7586142 C253.965175,47.3473223 253.145638,46.5856705 252.795278,44.8277781 C252.679507,44.1240119 252.091511,43.6548343 251.448677,43.5969488 C248.517841,43.4202456 248.225367,43.3044745 248.225367,42.1924629 C248.225367,41.4308111 247.932893,41.1383368 247.40583,41.3729256 C246.820881,41.6075143 246.232886,41.0225657 245.705823,39.6729188 C245.120874,38.3263184 244.29829,37.5037344 243.30205,37.2691457 C241.778746,36.9187859 241.778746,36.7999682 242.190038,33.5187722 C242.366741,31.7029944 242.540398,28.9488615 242.540398,27.4255579 C242.540398,25.198488 242.774987,24.671425 243.713342,24.3789507 C244.359222,24.2022475 245.647937,24.4977684 246.52536,24.9638993 C247.402783,25.3751912 248.517841,25.7834366 248.987019,25.7834366 C249.456196,25.7834366 250.626093,26.1947286 251.506563,26.6608595 C252.444918,27.130037 254.318581,27.5382823 255.668228,27.5382823 C257.837413,27.5382823 258.245658,27.3036936 259.065195,25.78039 C259.711076,24.4916752 260.411796,24.0224977 261.465922,24.0224977 C262.812522,24.0224977 262.989225,23.7879089 262.754637,22.5570796 C262.520048,21.3841358 262.754637,21.033776 264.220055,20.506713 C266.797484,19.6292901 270.020795,19.8029467 271.367395,20.9758905 C272.890699,22.2646053 275.87942,26.6578129 276.875661,29.1194715 C277.929787,31.7547867 276.991432,37.4976412 275.468128,37.4976412 C274.529773,37.4976412 274.00271,38.7863561 274.00271,40.9524938 C274.00271,41.8299166 273.768122,42.7682717 273.475647,43.1216781 C272.537292,43.999101 269.901977,49.2148925 269.901977,50.1532475 C269.901977,50.5645394 269.667388,50.9728126 269.317029,50.9728126 C269.021508,50.978878 268.729033,49.9826375 268.729033,48.7548548 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M183.774392,48.2856773 C183.424032,47.2894367 182.366859,45.8849508 181.431551,45.1811845 C180.084951,44.2428295 179.673659,43.4232922 179.673659,42.0188063 C179.673659,40.9646802 179.557888,39.0879702 179.381184,37.7992553 C178.969892,34.8684192 179.496955,33.9909964 181.489437,34.4022883 C183.189443,34.6947626 183.424032,35.2797112 185.181925,43.2496356 C185.885691,46.4150605 185.885691,47.2345978 185.181925,48.5233126 L184.420273,50.1045018 L183.774392,48.2856773 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M294.509423,24.3210652 C294.509423,23.3248246 294.216949,22.212813 293.805657,21.801521 C293.33648,21.3323435 293.33648,20.9240981 293.863543,20.2782174 C294.271788,19.8090399 294.390606,19.1052737 294.156017,18.6970283 C293.921428,18.2887829 294.037199,18.1120797 294.564262,18.2887829 C295.03344,18.404554 295.737206,19.342909 296.206384,20.281264 C296.675561,21.219619 297.379327,22.2158596 297.845458,22.4504483 C299.018402,23.1542146 298.783813,24.0316375 297.376281,24.0316375 C296.672514,24.0316375 295.734159,24.500815 295.325914,25.0857636 C294.625194,25.9631864 294.567309,25.9053009 294.509423,24.3210652 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M287.770328,15.1233581 C284.431247,11.6654589 284.373361,11.5496878 285.662076,11.0226248 C287.18538,10.4955618 288.650798,11.3150991 288.650798,12.6616995 C288.650798,13.130877 288.943272,13.4812368 289.293632,13.4812368 C289.586106,13.4812368 290.701164,14.2428886 291.697405,15.1812436 C293.278594,16.6466617 293.455297,17.0579536 292.809417,17.8165588 C292.340239,18.3436219 291.871062,18.7549138 291.636473,18.7549138 C291.462816,18.7549138 289.704924,17.1158392 287.770328,15.1233581 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>                <path d="M266.093718,16.4120729 C266.85537,14.8887693 267.208776,14.7120661 268.144085,15.2391291 C268.786919,15.589489 269.317029,16.4120729 269.317029,16.9970215 C269.317029,17.9353765 268.905737,18.1699652 267.266662,18.1699652 L265.15841,18.1699652 L266.093718,16.4120729 Z" id="Path" fill="var(--widget-notconfigured-image-background2)"/>            <\/g>        <\/g>    <\/g><\/svg>'},t.prototype.init=function(n,t){BoldBIDashboard.isNullOrUndefined(this.bingMapItem)&&this.createMapContainer(n,t)},t.prototype.getMobileViewHeight=function(){return 3*this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.setGlobalColor=function(){var n=this.getBingMapProperties().DefaultColor,r=this.getValueContainer(),t=r.FieldInfos.length>0?r.FieldInfos[0].UniqueColumnName:null,u=BoldBIDashboard.Dashboard.WidgetHelper.getGlobalColumnId(t,this.DataGroupInfo.FieldContainers),i=BoldBIDashboard.Dashboard.WidgetHelper.getColorCode(this,u,n);BoldBIDashboard.isNullOrUndefined(n.Color)||n.Name.length!==0?n.Name===t?n.Color=n.IsEdited?n.Color:i:(n.Name=t,n.Color=i,n.IsEdited=!1):(n.Name=t,n.Color=i,n.IsEdited=!1)},t.prototype.resetProperties=function(){BoldBIDashboard.isNullOrUndefined(this.colorContainer)||this.DataGroupInfo.FieldContainers[0].FieldInfos.length!==0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length!==0||(this.getBingMapProperties().EnableColorSettings=!1,this.getBingMapProperties().DefaultColor=new DefaultColorSet,this.propertyPanel.updateCategoryVisibility("BingMap","Formatting",!1),this.renderElements(),this.renderColorSettingsElement(),this.setPropertyElement("Formatting","ColorSettings",this.getBingMapProperties().EnableColorSettings?"Advanced":"Monochromatic"));this.getLatitudeContainer().FieldInfos.length===0&&this.getLongitudeContainer().FieldInfos.length===0&&this.getAddressContainer().FieldInfos.length===0&&this.getPostalCodeContainer().FieldInfos.length===0&&(this.getBingMapProperties().ColorCustomization=null)},t.prototype.canCombineRequest=function(){return!0},t.prototype.createMapContainer=function(t,i){try{BoldBIDashboard.isNullOrUndefined(i)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,i):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},i)),this.isFromDraft=!0);this.updateBackWardCompatability();this.renderBingMapElement();!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.BingMap)}catch(r){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:r,Type:r.name})}},t.prototype.renderBingMapElement=function(){this.bingMapItem=BoldBIDashboard.buildTag("div.e-bingmapitem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder},{id:this.designerId+"bingmapitem"+this.widgetJson.UniqueName});this.bingMapElement=BoldBIDashboard.buildTag("div.e-bingmap-element","",{width:"100%",height:"100%",position:"relative","background-color":"transparent","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designerId+"bingMapElement"+this.widgetJson.UniqueName});this.contentContainer.append(this.bingMapItem);this.bingMapItem.append(this.bingMapElement);this.controlContainer.data("widgetInstance",this)},t.prototype.getBingMap=function(){var t=this.designerId+"bingMapElement"+this.widgetJson.UniqueName,n=new Microsoft.Maps.Map("#"+t,{credentials:this.bingKey,zoom:10,showZoomButtons:this.getBingMapProperties().ShowZoomIcon,disablePanning:this.getBingMapProperties().DisableZoomAndPan,disableScrollWheelZoom:this.getBingMapProperties().DisableZoomAndPan,showLocateMeButton:!1,showMapTypeSelector:!1,showScalebar:!1,showTermsLink:!1});n.setMapType(this.getBingMapProperties().MapType);this.isBingMapInitialized=!0;this.map=n;this.designerInstance.designerPanel.hideLoadingIndicator(this.controlContainer);Microsoft.Maps.Events.addHandler(n,"viewchangeend",this.bbdesigner$.proxy(this.viewChanged,this))},t.prototype.viewChanged=function(n){n.cause===0||!BoldBIDashboard.isNullOrUndefined(this.drillLevelInfo)&&this.drillLevelInfo.length>0||this.bingMapRendering||this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design||(this.getBingMapProperties().InitialZoomState=this.map.getCenter().latitude+","+this.map.getCenter().longitude+","+this.map.getZoom(),this.designerInstance.modules.serialization.notifyChange())},t.prototype.onFieldDragDropped=function(n,t,i,r){var e=!0,f="",u;if(!BoldBIDashboard.isNullOrUndefined(n.FieldType)&&n.FieldType===FieldType.Dimensions)for(u=0;u<t.FieldContainers.length;u++)if(f=t.FieldContainers[u].Name===n.ContainerName?n.ContainerName.toLowerCase():"",f==="markerimage"&&!BoldBIDashboard.isNullOrUndefined(this.getLatitudeContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getLongitudeContainer())&&this.getLatitudeContainer().FieldInfos.length>0&&this.getLongitudeContainer().FieldInfos.length>0&&BoldBIDashboard.isNullOrUndefined(this.getBingMapProperties().ColorCustomization)&&(this.getBingMapProperties().MarkerShape="Image",this.getBingMapProperties().MarkerImage="Parameterized URL",this.updateMarkerImageProperties()),f==="shape"&&t.FieldContainers[u].FieldInfos.length===0){e=!0;break}else f==="shape"&&t.FieldContainers[u].FieldInfos.length===1&&(this.designerInstance.modules.util.alertDialog(this.locale.multiLevelDrillDialog.titleText,this.locale.multiLevelDrillDialog.dialogContentText,IconType.question,AlertType.Confirm,!1,"",{height:140,width:500,method:"getDialogOutput",instance:this.designerInstance.modules.util,dataInfo:{eventObj:r,droppedItem:i}}),e=!1);return e},t.prototype.getPropertyPanelForBingMap=function(){var t=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.widgetJson.FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo,this.getBingMapProperties().ContainerSettings);return this.containerPropertyItem=t.containerProperties,t.propertyGridItems.Header=this.widgetJson.ContainerSettings.Title,t.propertyGridItems.SubTitle=this.widgetJson.ContainerSettings.SubTitle,t.propertyGridItems.Description=this.widgetJson.ContainerSettings.Description,t.propertyGridItems.Type=this.Type,t.linkingProperty.Items[0].value=n.prototype.useExistingLink.call(this),this.bbdesigner$.each(t.containerActionsProperty.Items,function(n,t){(t.name==="ImageExport"||t.name==="PDFExport")&&(t.isVisible=!0)}),this.bbdesigner$.each(t.containerSettingsProperty.Items,function(n,t){(t.name==="ShowWidgetBackgroundImage"||t.name==="WidgetBackgroundImageMode"||t.name==="WidgetBackgroundImageSource"||t.name==="WidgetBackgroundImageBrowse"||t.name==="WidgetBackgroundImageURL")&&(t.isVisible=!1)}),t.propertyGridItems.Items=[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"ShowTooltip",displayName:this.locale.propertyPanel.basicSettings.showTooltip,value:this.getBingMapProperties().ShowTooltip,itemType:"bool"},{name:"MapType",displayName:"Map Theme",value:this.getBingMapProperties().MapType,itemType:"dropdown",valueList:this.mapTypeList()},{name:"ZoomIcon",displayName:"Show Zoom Icon",value:this.getBingMapProperties().ShowZoomIcon,itemType:"bool"},{name:"DisableZoomAndPan",displayName:"Disable Zooming and Panning",value:this.getBingMapProperties().DisableZoomAndPan,itemType:"bool"},{name:"MapShape",displayName:"Map Shape",value:this.getBingMapProperties().MapShape,itemType:"dropdown",valueList:["Choropleth","Bubble"],isVisible:this.DataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getShapeContainer().FieldInfos.length>0}]},{CategoryName:"Formatting",IsVisible:this.DataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getShapeContainer().FieldInfos.length>0?!0:!1,Items:[{name:"ColorSettings",displayName:this.locale.propertyPanel.formattingCategoryText,value:this.getBingMapProperties().EnableColorSettings?"Advanced":"Monochromatic",itemType:"dropdown",valueList:["Monochromatic","Advanced"]},{name:"EnablColorSettings",callbackInstance:this,callbackMethod:"renderColorSettings",itemType:"object",elementType:this.Type}]},{CategoryName:"Marker Settings",IsVisible:this.DataGroupInfo.FieldContainers.length>0&&(!BoldBIDashboard.isNullOrUndefined(this.getLatitudeContainer())&&this.getLatitudeContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getLongitudeContainer())&&this.getLongitudeContainer().FieldInfos.length>0||!BoldBIDashboard.isNullOrUndefined(this.getAddressContainer())&&this.getAddressContainer().FieldInfos.length>0||!BoldBIDashboard.isNullOrUndefined(this.getPostalCodeContainer())&&this.getPostalCodeContainer().FieldInfos.length>0)?!0:!1,Items:[{name:"MarkerShape",displayName:"Marker Shape",value:this.getBingMapProperties().MarkerShape,itemType:"dropdown",valueList:this.markerShapeList()},{name:"MarkerImage",displayName:"Image Source",value:this.getBingMapProperties().MarkerImage,itemType:"dropdown",valueList:["Local","URL","Parameterized URL"],isVisible:this.getBingMapProperties().MarkerShape==="Image"?!0:!1},{name:"Browse",displayName:"Browse Image",isVisible:this.getBingMapProperties().MarkerShape==="Image"&&this.getBingMapProperties().MarkerImage==="Local",itemType:"object",callbackInstance:this,callbackMethod:"renderBrowseBox"},{name:"ImageURL",displayName:"URL",itemType:"string",value:this.getBingMapProperties().MarkerImageUrl,isVisible:this.getBingMapProperties().MarkerShape==="Image"&&this.getBingMapProperties().MarkerImage==="URL"},{name:"Pattern",displayName:"Pattern",itemType:"string",value:this.getBingMapProperties().MarkerUrlPattern,isVisible:this.getBingMapProperties().MarkerShape==="Image"&&this.getBingMapProperties().MarkerImage==="Parameterized URL"},{name:"MarkerColor",displayName:"Color",value:this.getBingMapProperties().MarkerShapeColor,itemType:"color"},{name:"MarkerSize",displayName:"Size",value:this.getBingMapProperties().MarkerSize,itemType:"float",decimalPlaces:0,minimum:1,maximum:1500},{name:"MarkerCustomize",displayName:"",isVisible:this.getMarkerCustomizeVisiblity(),itemType:"object",callbackInstance:this,callbackMethod:"renderMarkerCustomizeButton"}]},t.linkingProperty,t.filterSettingsProperty,t.containerSettingsProperty,t.containerActionsProperty,t.noDataContainerActionsProperty],t.propertyGridItems},t.prototype.updateMapItemPropertyChange=function(t,i,r,u){var s=!1,f,e,h,o;switch(t){case"Name":this.widgetJson.ContainerSettings.Title=r;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,r);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,r);break;case"MapType":this.updatePropertyAsync(this.updateMapType,r);break;case"ZoomIcon":this.updatePropertyAsync(this.updateZoomIcon,r);break;case"DisableZoomAndPan":this.updatePropertyAsync(this.updateZoomAndPanning,r);break;case"ShapeType":this.updatePropertyAsync(this.updateShapeType,r);break;case"ShowTooltip":this.updatePropertyAsync(this.updateShowTooltip,r);break;case"MapShape":this.updatePropertyAsync(this.updateMapShape,r);break;case"MarkerShape":case"MarkerColor":case"MarkerSize":this.updatePropertyAsync(this.updateMarker,r,t);break;case"MarkerImage":this.getBingMapProperties().MarkerImage=r;this.resetImageProperties();this.updatePropertyAsync(this.updateImageSourceVisibility,r);break;case"Pattern":this.updatePropertyAsync(this.updateMarkerUrlPattern,r);break;case"ImageURL":this.updatePropertyAsync(this.updateMarkerImgURLSource,r);break;case"ColorSettings":this.updateColorSettings(r);break;case"ItemLink":n.prototype.updateLink.call(this,r);break;case"FieldNameChange":this.updateDisplayTextBasedProperties();break;case"ActAsMasterWidget":this.getBingMapProperties().FilterSettings.ActAsMasterWidget=r;s=!0;break;default:s=!0}if(!s){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(f=this.designPanelInstance.selectedReportItems,f.length>0))for(e=0;e<f.length;e++)h=f[e],h.attr("id")===this.controlContainer.attr("id")&&(o=this.bbdesigner$.extend(!0,{},u),o.categoryName=u.categoryName,o.valueList=u.valueList,this.propertyPanel.updatePropertyValue(o,"BingMap",r));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-bingmap-item",this.designerId+"_"+this.widgetJson.UniqueName,[t,r,i,u],[t,i,r,u])}},t.prototype.updateFilter=function(){var n=this.widgetJson.SelectedFilterValues;this.widgetJson.FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0?BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this):BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this)},t.prototype.updatePropertyAsync=function(n,t,i){var r=this;this.widgetContainerHelper.showLoadingIndicator(this);setTimeout(function(){r.bbdesigner$.proxy(n,r,t,i).call();r.widgetContainerHelper.hideLoadingIndicator(r);r.designerInstance.modules.serialization.notifyChange()},0)},t.prototype.updateMapType=function(n){this.getBingMapProperties().MapType=n;this.map.setMapType(n)},t.prototype.updateZoomIcon=function(n){this.getBingMapProperties().ShowZoomIcon=n;this.map.setOptions({showZoomButtons:n})},t.prototype.updateZoomAndPanning=function(n){this.getBingMapProperties().DisableZoomAndPan=n;this.map.setOptions({disablePanning:n,disableScrollWheelZoom:n})},t.prototype.updateShapeType=function(n){var i,r,t;for(this.getBingMapProperties().ShapeType=n,i={},r={},t=0;t<this.map.entities.getLength();t++)i[this.map.entities.get(t).metadata.shapeName]=this.map.entities.get(t).metadata.shapeValue,r[this.map.entities.get(t).metadata.shapeName]=this.map.entities.get(t).metadata.shapeTooltip;this.renderChoroplethOrBubbleMap(i,r)},t.prototype.updateShowTooltip=function(n){this.getBingMapProperties().ShowTooltip=n},t.prototype.updateMapShape=function(n){var t;this.getBingMapProperties().MapShape=n;var i={},r=this.map.entities.getLength(),u={};for(t=0;t<r;t++)BoldBIDashboard.isNullOrUndefined(this.map.entities.get(t))||(BoldBIDashboard.isNullOrUndefined(this.map.entities.get(t).metadata.shapeName)||(i[this.map.entities.get(t).metadata.shapeName]=this.map.entities.get(t).metadata.shapeValue,u[this.map.entities.get(t).metadata.shapeName]=this.map.entities.get(t).metadata.shapeTooltip),(this.map.entities.get(t).metadata.markerType==="polygon"&&this.getBingMapProperties().MapShape==="Bubble"||this.map.entities.get(t).metadata.markerType==="Bubble"&&this.getBingMapProperties().MapShape==="Choropleth")&&(this.map.entities.removeAt(t),r--,t--));this.renderChoroplethOrBubbleMap(i,u)},t.prototype.getBubbleRadius=function(n,t,i){var u=100/(this.maxShapeValue-this.minShapeValue)*(i-this.minShapeValue),r=(t-n)/100*u+n;return this.maxShapeValue===this.minShapeValue&&(r=(t-n)/100+n),r*2},t.prototype.updateMarker=function(n,t){var i,r;switch(t){case"MarkerShape":this.getBingMapProperties().MarkerShape=n;this.resetImageProperties();break;case"MarkerColor":this.getBingMapProperties().MarkerShapeColor=n;break;case"MarkerSize":this.getBingMapProperties().MarkerSize=n}if(this.getBingMapProperties().MarkerShape==="Image")this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","MarkerImage",!0),this.setPropertyElement("MarkerSettings","MarkerImage",this.getBingMapProperties().MarkerImage),this.updateImageSourceVisibility(this.getBingMapProperties().MarkerImage);else for(this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","MarkerImage",!1),this.updateImageSourceVisibility(),this.createPushPinIcon(this.markerShapeSvg[this.getBingMapProperties().MarkerShape],this.getBingMapProperties().MarkerSize,this.getBingMapProperties().MarkerShapeColor),i=0;i<this.map.entities.getLength();i++)r=!BoldBIDashboard.isNullOrUndefined(this.map.entities.get(i).metadata)&&!BoldBIDashboard.isNullOrUndefined(this.map.entities.get(i).metadata.isCondtionApplied)&&this.map.entities.get(i).metadata.isCondtionApplied?this.map.entities.get(i).image.src:this.fontIcon,this.map.entities.get(i).setOptions({icon:r,anchor:new Microsoft.Maps.Point(this.getBingMapProperties().MarkerSize/2,this.getBingMapProperties().MarkerSize/2)})},t.prototype.updateDisplayTextBasedProperties=function(){!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getShapeContainer().FieldInfos.length>0&&this.getValueContainer().FieldInfos.length>0&&this.generatePolygonTooltip();BoldBIDashboard.isNullOrUndefined(this.getMarkerContainer()&&this.getMarkerContainer().FieldInfos.length>0)||this.generateMarkerTooltip()},t.prototype.updateMarkerImgURLSource=function(n){this.getBingMapProperties().MarkerImageUrl=n;this.updateMarkerImage(n)},t.prototype.updateMarkerUrlPattern=function(n){this.getBingMapProperties().MarkerUrlPattern=n;this.renderMarkerImageData()},t.prototype.updateMarkerImage=function(n){if(this.map.entities.getLength()===0)this.renderMarkerImageData();else for(var t=0;t<this.map.entities.getLength();t++)this.updateMarkerImageData(this.map.entities.get(t),n)},t.prototype.updateMarkerImageData=function(n,t){var i=new Image,r=!BoldBIDashboard.isNullOrUndefined(n.metadata.isCondtionApplied)&&n.metadata.isCondtionApplied?n.image.height:this.getBingMapProperties().MarkerSize,u=0;i.onload=function(){var t=document.createElement("canvas"),f;t.width=r;t.height=r;f=t.getContext("2d");f.drawImage(i,0,0,t.width,t.height);n.setOptions({icon:t.toDataURL(),anchor:new Microsoft.Maps.Point(t.width/2,t.height/2)});u++};i.crossOrigin="anonymous";i.src=!BoldBIDashboard.isNullOrUndefined(n.metadata.isCondtionApplied)&&n.metadata.isCondtionApplied?n.image.src:t},t.prototype.resetImageProperties=function(){this.getBingMapProperties().MarkerImageUrl="";this.getBingMapProperties().MarkerLocalImageUrl="";this.getBingMapProperties().MarkerLocalImageName="";this.bbdesigner$(this.filePath).val("");this.designerInstance.element.find("#"+this.designerId+"_"+this.Type+"_MarkerSettings_ImageURL").val("")},t.prototype.updateImageSourceVisibility=function(n){n==="URL"?(this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","Pattern",!1),this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","Browse",!1),this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","ImageURL",!0),BoldBIDashboard.isNullOrUndefined(this.getBingMapProperties().MarkerImageUrl)||this.updateMarkerImage(this.getBingMapProperties().MarkerImageUrl)):n==="Local"?(this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","ImageURL",!1),this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","Browse",!0),this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","Pattern",!1),BoldBIDashboard.isNullOrUndefined(this.getBingMapProperties().MarkerLocalImageUrl)||this.updateMarkerImage(BoldBIDashboard.Dashboard.Resource.getImage(this.getBingMapProperties().MarkerLocalImageUrl))):n==="Parameterized URL"?(this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","Browse",!1),this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","ImageURL",!1),this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","Pattern",!0),this.renderMarkerImageData()):(this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","Browse",!1),this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","ImageURL",!1),this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","Pattern",!1))},t.prototype.updateMarkerImageProperties=function(){this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.setPropertyElement("MarkerSettings","MarkerShape",this.getBingMapProperties().MarkerShape),this.setPropertyElement("MarkerSettings","MarkerImage",this.getBingMapProperties().MarkerImage),this.getBingMapProperties().MarkerShape==="Image"&&this.getBingMapProperties().MarkerImage==="Parameterized URL"?this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","Pattern",!0):this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","Pattern",!1),this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","Browse",!1),this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","ImageURL",!1))},t.prototype.getMarkerCustomizeVisiblity=function(){return!BoldBIDashboard.isNullOrUndefined(this.getBingMapProperties().ColorCustomization)||!BoldBIDashboard.isNullOrUndefined(this.getLatitudeContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getLongitudeContainer())&&this.getLatitudeContainer().FieldInfos.length>0&&this.getLongitudeContainer().FieldInfos.length>0||!BoldBIDashboard.isNullOrUndefined(this.getAddressContainer())&&this.getAddressContainer().FieldInfos.length>0||!BoldBIDashboard.isNullOrUndefined(this.getPostalCodeContainer())&&this.getPostalCodeContainer().FieldInfos.length>0},t.prototype.updateReportItemData=function(n){var b=this,o,u,s,f,w,t,i,e;if(this.contentContainer.find(".bbi-dbrd-control-error").remove(),this.bingMapItem.show(),this.bingMapElement[0].style.height=this.drillLevelInfo.length>0?"Calc(100% - 24px)":"100%",BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this),(BoldBIDashboard.isNullOrUndefined(n.mapMarkerData)||n.mapMarkerData.Error)&&BoldBIDashboard.isNullOrUndefined(n.data)||n.Error)BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.designPanelInstance.showControlError(this.contentContainer,n.mapMarkerData.data,this.CellInfo,n.mapMarkerData.data.OuterMessage);else{if((BoldBIDashboard.isNullOrUndefined(n.mapMarkerData)||n.mapMarkerData.noDataAvailable)&&n.noDataAvailable)this.bingMapItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this);else{if(this.bingMapItem.show(),this.map.entities.clear(),o={},this.propertyPanel.updateItemDisable("bool","BingMap","Filter","ActAsMasterWidget",!0),!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getValueContainer().FieldInfos.length>0&&this.getShapeContainer().FieldInfos.length>0){this.propertyPanel.updateItemDisable("bool","BingMap","Filter","ActAsMasterWidget",!1);BoldBIDashboard.isNullOrUndefined(this.getBingMapProperties().DefaultColor)&&(this.getBingMapProperties().DefaultColor=new DefaultColorSet,this.getBingMapProperties().DefaultColor.Color="#F6727F");this.setGlobalColor();u=JSON.parse(n.data);this.choroplethMapData=n;this.generatePolygonTooltip();var l=this.getValueContainer().FieldInfos[0].UniqueColumnName,a=this.getShapeContainer().FieldInfos[this.drillLevelInfo.length].UniqueColumnName,v={};for(i=0;i<u.length;i++){for(o[u[i][a]]=u[i][l],s=[],f=0;f<this.getShapeTooltipContainer().FieldInfos.length;f++)s.push(u[i][this.getShapeTooltipContainer().FieldInfos[f].UniqueColumnName]);v[u[i][a]]=s}this.getMinMaxValues(u,l);this.renderChoroplethOrBubbleMap(o,v);this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.propertyPanel.updateCategoryVisibility("BingMap","Formatting",!0),this.propertyPanel.updateItemVisibility("BingMap","BasicSettings","MapShape",!0),this.renderColorSettingsElement())}else this.propertyPanel.updateCategoryVisibility("BingMap","Formatting",!1),this.propertyPanel.updateItemVisibility("BingMap","BasicSettings","MapShape",!1);if(!BoldBIDashboard.isNullOrUndefined(this.getLatitudeContainer())&&!BoldBIDashboard.isNullOrUndefined(this.getLongitudeContainer())&&this.getLatitudeContainer().FieldInfos.length>0&&this.getLongitudeContainer().FieldInfos.length>0){this.mapDataWithImage=JSON.parse(n.mapMarkerData.data);var r=void 0,y=this.getLatitudeContainer().FieldInfos[0].UniqueColumnName,p=this.getLongitudeContainer().FieldInfos[0].UniqueColumnName;if(this.generateMarkerTooltip(),this.propertyPanel.updateCategoryVisibility("BingMap","MarkerSettings",!0),BoldBIDashboard.isNullOrUndefined(this.getBingMapProperties().ColorCustomization)){if(!BoldBIDashboard.isNullOrUndefined(this.getMarkerImageContainer())&&this.getMarkerImageContainer().FieldInfos.length===0||this.getBingMapProperties().MarkerShape!=="Image")for(this.locs=[],this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","MarkerImage",!1),this.getBingMapProperties().MarkerShape==="Image"&&this.getBingMapProperties().MarkerImage==="Parameterized URL"&&(this.getBingMapProperties().MarkerShape="Circle",this.getBingMapProperties().MarkerImage="Local"),this.updateMarkerImageProperties(),i=0;i<this.mapDataWithImage.length;i++){if(e=new Microsoft.Maps.Location(parseFloat(this.mapDataWithImage[i].location[0][y]),parseFloat(this.mapDataWithImage[i].location[0][p])),this.getBingMapProperties().MarkerShape==="Image"){var h=this.getBingMapProperties().MarkerLocalImageUrl,c=this.getBingMapProperties().MarkerImageUrl,k=this.getBingMapProperties().MarkerImage==="Local"&&!BoldBIDashboard.isNullOrUndefined(h)&&h!==""?BoldBIDashboard.Dashboard.Resource.getImage(h):this.getBingMapProperties().MarkerImage==="URL"&&!BoldBIDashboard.isNullOrUndefined(c)&&c!==""?c:"";this.renderPushPinWithImage(e,this.mapDataWithImage[i].location[0],k,this.getBingMapProperties().MarkerSize,function(n){return b.map.entities.push(n)},this.mapDataWithImage[i].isCondtionApplied)}else this.createPushPinIcon(this.markerShapeSvg[this.getBingMapProperties().MarkerShape],this.getBingMapProperties().MarkerSize,this.getBingMapProperties().MarkerShapeColor),r=new Microsoft.Maps.Pushpin(e,{icon:this.fontIcon,anchor:new Microsoft.Maps.Point(this.getBingMapProperties().MarkerSize/2,this.getBingMapProperties().MarkerSize/2)}),this.getTooltipCollection(this.mapDataWithImage[i].location[0]),r.metadata={title:this.toolTipCollection},this.map.entities.push(r);this.locs.push(e);this.getTooltipCollection(this.mapDataWithImage[i].location[0]);r.metadata={title:this.toolTipCollection,location:this.mapDataWithImage[i].location[0]};this.map.entities.push(r);Microsoft.Maps.Events.addHandler(r,"mouseover",this.bbdesigner$.proxy(this.showTooltip,this));Microsoft.Maps.Events.addHandler(r,"mouseout",this.bbdesigner$.proxy(this.closeTooltip,this));Microsoft.Maps.Events.addHandler(r,"click",this.bbdesigner$.proxy(this.markerClick,this))}}else for(this.locs=[],w=function(n){var f=new Microsoft.Maps.Location(parseFloat(t.mapDataWithImage[n].location[0][y]),parseFloat(t.mapDataWithImage[n].location[0][p])),o=t,i,u,h,c,e,l;if(t.mapDataWithImage[n].imageType===""||t.mapDataWithImage[n].imageType===1){var a=t.mapDataWithImage[n].isCondtionApplied?t.mapDataWithImage[n].fill:t.getBingMapProperties().MarkerShapeColor,e=t.mapDataWithImage[n].isCondtionApplied?t.mapDataWithImage[n].size:t.getBingMapProperties().MarkerSize,s=t.mapDataWithImage[n].isCondtionApplied?t.mapDataWithImage[n].shape:!BoldBIDashboard.isNullOrUndefined(t.getMarkerImageContainer())&&t.getMarkerImageContainer().FieldInfos.length>0?"Image":t.getBingMapProperties().MarkerShape;s==="Image"?(i=t.getBingMapProperties().MarkerLocalImageUrl,u=t.getBingMapProperties().MarkerImageUrl,t.getBingMapProperties().MarkerShape="Image",t.getBingMapProperties().MarkerImage=!BoldBIDashboard.isNullOrUndefined(i)&&i!==""||!BoldBIDashboard.isNullOrUndefined(u)&&u!==""?t.getBingMapProperties().MarkerImage:"Parameterized URL",t.updateMarkerImageProperties(),h=t.getBingMapProperties().MarkerImage==="Local"&&!BoldBIDashboard.isNullOrUndefined(i)&&i!==""?BoldBIDashboard.Dashboard.Resource.getImage(i):t.getBingMapProperties().MarkerImage==="URL"&&!BoldBIDashboard.isNullOrUndefined(u)&&u!==""?u:BoldBIDashboard.isNullOrUndefined(t.mapDataWithImage[n].markerImageUrl)?"":t.mapDataWithImage[n].markerImageUrl,c=t.mapDataWithImage[n].isCondtionApplied?t.mapDataWithImage[n].size:t.getBingMapProperties().MarkerSize,t.renderPushPinWithImage(f,t.mapDataWithImage[n].location[0],h,c,function(n){return o.map.entities.push(n)},t.mapDataWithImage[n].isCondtionApplied)):(t.createPushPinIcon(t.markerShapeSvg[s],e,a),t.getTooltipCollection(t.mapDataWithImage[n].location[0]),r=new Microsoft.Maps.Pushpin(f,{icon:t.fontIcon,anchor:new Microsoft.Maps.Point(t.getBingMapProperties().MarkerSize/2,t.getBingMapProperties().MarkerSize/2)}),r.metadata={isCondtionApplied:t.mapDataWithImage[n].isCondtionApplied,title:t.toolTipCollection,location:t.mapDataWithImage[n].location[0]},t.map.entities.push(r),Microsoft.Maps.Events.addHandler(r,"mouseover",t.bbdesigner$.proxy(t.showTooltip,t)),Microsoft.Maps.Events.addHandler(r,"mouseout",t.bbdesigner$.proxy(t.closeTooltip,t)),Microsoft.Maps.Events.addHandler(r,"click",t.bbdesigner$.proxy(t.markerClick,t)))}else e=t.mapDataWithImage[n].isCondtionApplied?t.mapDataWithImage[n].size:t.getBingMapProperties().MarkerSize,l=t.mapDataWithImage[n].imageType===ImageType.Embedded?BoldBIDashboard.Dashboard.Resource.getImage(t.mapDataWithImage[n].shape):t.mapDataWithImage[n].shape,t.renderPushPinWithImage(f,t.mapDataWithImage[n].location[0],l,e,function(n){return o.map.entities.push(n)},t.mapDataWithImage[n].isCondtionApplied);t.locs.push(f)},t=this,i=0;i<this.mapDataWithImage.length;i++)w(i);this.getBingMapProperties().MarkerShape==="Image"&&BoldBIDashboard.isNullOrUndefined(this.getBingMapProperties().ColorCustomization)&&(this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","MarkerImage",!0),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.setPropertyElement("MarkerSettings","MarkerImage",this.getBingMapProperties().MarkerImage),this.updateImageSourceVisibility(this.getMarkerImageContainer().FieldInfos.length>0?"Parameterized URL":this.getBingMapProperties().MarkerImage));this.map.setView({bounds:Microsoft.Maps.LocationRect.fromLocations(this.locs),padding:80});this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","MarkerCustomize",!0)}else BoldBIDashboard.isNullOrUndefined(n.mapMarkerData)||BoldBIDashboard.isNullOrUndefined(n.mapMarkerData.data)||!(!BoldBIDashboard.isNullOrUndefined(this.getAddressContainer())&&this.getAddressContainer().FieldInfos.length>0||!BoldBIDashboard.isNullOrUndefined(this.getPostalCodeContainer())&&this.getPostalCodeContainer().FieldInfos.length>0)?this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","MarkerCustomize",!1):(this.locs=[],this.addressSearch=null,this.mapDataWithImage=JSON.parse(n.mapMarkerData.data),this.generateMarkerTooltip(),this.callGeocodeService(this.mapDataWithImage),this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","MarkerCustomize",!0));this.updateFilter();this.hideWidgetNotConfigured();this.setBingMapCenterValue()}this.controlContainer.find(".bbi-dbrd-control-sub-title").css("color",this.themeHelper.getWidgetTileTextColor());BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getBingMapProperties().ContainerSettings.TextColor)}},t.prototype.setBingMapCenterValue=function(){if(!BoldBIDashboard.isNullOrUndefined(this.getBingMapProperties().InitialZoomState)&&this.getBingMapProperties().InitialZoomState.length!==0&&!(!BoldBIDashboard.isNullOrUndefined(this.drillLevelInfo)&&this.drillLevelInfo.length>0)){var n=this.getBingMapProperties().InitialZoomState.split(","),t=+n[0],i=+n[1],r=+n[2];this.map.setView({center:new Microsoft.Maps.Location(t,i),zoom:r})}},t.prototype.callGeocodeService=function(n){for(var t=0;t<n.length;t++){var i=!BoldBIDashboard.isNullOrUndefined(this.getPostalCodeContainer())&&this.getPostalCodeContainer().FieldInfos.length>0?n[t].location[0][this.getPostalCodeContainer().FieldInfos[0].UniqueColumnName]:"",r=!BoldBIDashboard.isNullOrUndefined(this.getAddressContainer())&&this.getAddressContainer().FieldInfos.length>0?n[t].location[0][this.getAddressContainer().FieldInfos[0].UniqueColumnName]:"",u=this.controlContainer[0].id+"*"+t,f=r+(i===""?"":r===""?i:","+i);this.geocodeQuery(f,u)}},t.prototype.geocodeQuery=function(n,t){var i=this,r;i.addressSearch?(r={where:n,callback:i.bbdesigner$.proxy(i.geocodeServiceCallback,i,t)},i.addressSearch.geocode(r)):Microsoft.Maps.loadModule(["Microsoft.Maps.SpatialDataService","Microsoft.Maps.Search"],function(){i.addressSearch=new Microsoft.Maps.Search.SearchManager(i.map);i.geocodeQuery(n,t)})},t.prototype.updateBackWardCompatability=function(){this.getBingMapProperties().InitialZoomState=BoldBIDashboard.isNullOrUndefined(this.getBingMapProperties().InitialZoomState)?"":this.getBingMapProperties().InitialZoomState;this.getBingMapProperties().MarkerShape.toLocaleLowerCase()==="round"&&(this.getBingMapProperties().MarkerShape="Circle")},t.prototype.geocodeServiceCallback=function(n,t){var u;if(!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.isNullOrUndefined(t.results)&&t.results.length>0){var f=t.results[0].location,e=new Microsoft.Maps.Location(f.latitude,f.longitude),i=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$("#"+n.split("*")[0])),r=i.mapDataWithImage[n.split("*")[1]],o=r.isCondtionApplied?i.markerShapeSvg[r.shape]:i.markerShapeSvg[i.getBingMapProperties().MarkerShape],s=r.isCondtionApplied?r.size:i.getBingMapProperties().MarkerSize,h=r.isCondtionApplied?r.fill:i.getBingMapProperties().MarkerShapeColor;i.createPushPinIcon(o,s,h);u=new Microsoft.Maps.Pushpin(e,{icon:i.fontIcon,anchor:new Microsoft.Maps.Point(i.getBingMapProperties().MarkerSize/2,i.getBingMapProperties().MarkerSize/2)});i.locs.push(e);i.getTooltipCollection(i.mapDataWithImage[n.split("*")[1]].location[0]);u.metadata={isCondtionApplied:r.isCondtionApplied,title:i.toolTipCollection,location:r.location[0]};i.map.entities.push(u);Microsoft.Maps.Events.addHandler(u,"mouseover",this.bbdesigner$.proxy(i.showTooltip,i));Microsoft.Maps.Events.addHandler(u,"mouseout",this.bbdesigner$.proxy(i.closeTooltip,i));Microsoft.Maps.Events.addHandler(u,"click",this.bbdesigner$.proxy(i.markerClick,i));i.mapDataWithImage.length===i.locs.length&&this.map.setView({bounds:Microsoft.Maps.LocationRect.fromLocations(this.locs),padding:80})}},t.prototype.renderChoroplethOrBubbleMap=function(n,t){var f=this,r=Object.keys(n).filter(function(n){return!BoldBIDashboard.isNullOrUndefined(n)&&n!==""&&n!=="(Null)"&&n!=="(Blanks)"}),i,u;this.locs=[];i=this;i.bingMapRendering=!0;i.staticShapeCount=r.length;i.onSuccessShapeCount=i.onErrorShapeCount=0;Microsoft.Maps.loadModule(["Microsoft.Maps.SpatialDataService","Microsoft.Maps.Search"],function(){var e=new Microsoft.Maps.Search.SearchManager(i.map);i.bingMapElement.attr("bingMapShapesRendered","false");e.geocode({where:r[0],count:10,callback:function(i){u=i.results[0].entityType;f.renderMap(r,u,n,t)},errorCallback:function(){u="";f.renderMap(r,u,n,t)}})})},t.prototype.renderMap=function(n,t,i,r){var u=this,f=this.controlContainer.height()<this.controlContainer.width()?this.controlContainer.height():this.controlContainer.width(),e=this.map;setTimeout(function(){var o={entityType:t,getAllPolygons:!0};Microsoft.Maps.SpatialDataService.GeoDataAPIManager.getBoundary(n,o,e,function(t){var e=t.location,s,c,o,l,a,h;if(t.results.length>0&&!BoldBIDashboard.isNullOrUndefined(t.results[0].Polygons)){if(s=Microsoft.Maps.LocationRect.fromShapes(t.results[0].Polygons),c=new Microsoft.Maps.Location(s.center.latitude,s.center.longitude),u.getBingMapProperties().MapShape==="Choropleth"){for(o=0;o<t.results[0].Polygons.length;o++)t.results[0].Polygons[o].setOptions({fillColor:u.getShapeColor(i[e],e),strokeColor:"black"}),t.results[0].Polygons[o].metadata={shapeName:e,shapeValue:i[e],markerType:"polygon",shapeTooltip:r[e]},u.mouseEventHandler(t.results[0].Polygons[o]);u.map.entities.push(t.results[0].Polygons)}else l=u.getBubbleRadius(f*.005,f*.05,parseInt(i[e])),a="Circle",u.createPushPinIcon(u.markerShapeSvg[a],l,u.getShapeColor(i[e],e)),h=new Microsoft.Maps.Pushpin(c,{icon:u.fontIcon,anchor:new Microsoft.Maps.Point(u.getBingMapProperties().MarkerSize/2,u.getBingMapProperties().MarkerSize/2)}),h.metadata={shapeName:e,shapeValue:i[e],markerType:"Bubble",shapeTooltip:r[e]},u.map.entities.push(h),u.mouseEventHandler(h);u.locs.push(c);u.bingMapRendering=!1;n.length===1?u.map.setView({bounds:s,padding:80}):(u.map.setView({bounds:Microsoft.Maps.LocationRect.fromLocations(u.locs),padding:80}),u.setBingMapCenterValue(),u.onSuccessShapeCount++,u.onSuccessShapeCount+u.onErrorShapeCount===u.staticShapeCount&&setTimeout(function(){u.bingMapElement.attr("bingMapShapesRendered","true")},1e3))}},{fillColor:""},function(){u.onErrorShapeCount++;u.onSuccessShapeCount+u.onErrorShapeCount===u.staticShapeCount&&setTimeout(function(){u.bingMapElement.attr("bingMapShapesRendered","true")},1e3)})},2e3)},t.prototype.mouseEventHandler=function(n){Microsoft.Maps.Events.addHandler(n,"click",this.bbdesigner$.proxy(this.shapeClick,this));Microsoft.Maps.Events.addHandler(n,"mouseover",this.bbdesigner$.proxy(this.showTooltip,this));Microsoft.Maps.Events.addHandler(n,"mouseout",this.bbdesigner$.proxy(this.closeTooltip,this))},t.prototype.getTooltipCollection=function(n){this.toolTipCollection=[];for(var t=0;t<this.getMarkerContainer().FieldInfos.length;t++)this.toolTipCollection.push(n[this.getMarkerContainer().FieldInfos[t].UniqueColumnName])},t.prototype.generateMarkerTooltip=function(){var i,r,n,t;for(this.tooltipElem=BoldBIDashboard.buildTag("div.bbi-designer-bingmap-tooltip","",{position:"absolute",display:"none"}),r=[],this.markerTooltipTemplate='<div id="template'+this.bbdesigner$(this.bingMapItem).attr("id")+'_marker_tooltip" style="display: none">',n="template"+this.bbdesigner$(this.bingMapItem).attr("id")+"_marker_tooltip",n="#"+n,this.bbdesigner$(n).length>0&&this.bbdesigner$(n).remove(),t=0;t<this.getMarkerContainer().FieldInfos.length;t++)r.push((i={},i[this.DataColumnBindings[this.getMarkerContainer().FieldInfos[t].UniqueColumnName]]="{"+this.getMarkerContainer().FieldInfos[t].UniqueColumnName+"}",i));this.markerTooltipTemplate+=this.widgetHelper.generateToolTipTemplate(r,this.bbdesigner$(this.bingMapItem).attr("id"),1e3);this.markerTooltipTemplate+="<\/div>";this.bbdesigner$(this.tooltipElem).append(this.markerTooltipTemplate);this.bbdesigner$("body").append(this.tooltipElem)},t.prototype.generatePolygonTooltip=function(){var r,u,f,t,i,n;if(this.tooltipElem=BoldBIDashboard.buildTag("div.bbi-designer-bingmap-tooltip","",{position:"absolute",display:"none"}),t=[],this.polygonTooltipTemplate='<div id="template'+this.bbdesigner$(this.bingMapItem).attr("id")+'_polygon_tooltip" style="display: none">',i="template"+this.bbdesigner$(this.bingMapItem).attr("id")+"_polygon_tooltip",i="#"+i,this.bbdesigner$(i).length>0&&this.bbdesigner$(i).remove(),this.getShapeContainer().FieldInfos.length>0)for(n=0;n<=this.drillLevelInfo.length;n++)BoldBIDashboard.isNullOrUndefined(this.getShapeContainer().FieldInfos[n])||t.push((r={},r[this.DataColumnBindings[this.getShapeContainer().FieldInfos[n].UniqueColumnName]]="{"+this.getShapeContainer().FieldInfos[n].UniqueColumnName+"}",r));for(n=0;n<this.getValueContainer().FieldInfos.length;n++)t.push((u={},u[this.DataColumnBindings[this.getValueContainer().FieldInfos[n].UniqueColumnName]]="{"+this.getValueContainer().FieldInfos[n].UniqueColumnName+"}",u));for(n=0;n<this.getShapeTooltipContainer().FieldInfos.length;n++)t.push((f={},f[this.DataColumnBindings[this.getShapeTooltipContainer().FieldInfos[n].UniqueColumnName]]="{"+this.getShapeTooltipContainer().FieldInfos[n].UniqueColumnName+"}",f));this.polygonTooltipTemplate+=this.widgetHelper.generateToolTipTemplate(t,this.bbdesigner$(this.bingMapItem).attr("id"),1e3);this.polygonTooltipTemplate+="<\/div>";this.bbdesigner$(this.tooltipElem).append(this.polygonTooltipTemplate);this.bbdesigner$("body").append(this.tooltipElem)},t.prototype.shapeClick=function(n){if(!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getShapeContainer().FieldInfos.length>0)if(this.designerInstance.isDesignMode()&&this.getShapeContainer().FieldInfos.length>1&&this.drillLevelInfo.length!==this.getShapeContainer().FieldInfos.length-1)this.onDrillDown(n);else{var i=[n.pageX,n.pageY],t=[];this.getBingMapProperties().UrlLink&&this.getBingMapProperties().UrlLink.EnableLink&&t.push(WidgetAction.Linking);this.getBingMapProperties().FilterSettings.ActAsMasterWidget&&t.push(WidgetAction.Filter);this.widgetJson.ContainerSettings.ViewData&&t.push(WidgetAction.ViewData);this.getShapeContainer().FieldInfos.length>1&&this.drillLevelInfo.length<this.getShapeContainer().FieldInfos.length-1&&t.push(WidgetAction.DrillDown);BoldBIDashboard.Dashboard.WidgetHelper.createWidgetActionContextMenu(this.designerInstance,this,this.Name,t,n,i)}},t.prototype.isShapeSelected=function(n){var t=!1,u=[],r=this.getBingMapProperties().SelectedFilterValues,f,i;if(n.targetType==="polygon"&&r.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getShapeContainer().FieldInfos.length>0)for(i=0;i<r.length;i++)if(f=r[i].InitialDimensionFilter.Text[0],t=f===n.target.metadata.shapeName,t)return this.clearFilter(!0),t;if(n.targetType==="pushpin"&&r.length>0){for(i=0;i<r.length;i++)u[r[i].UniqueColumnName]=r[i].InitialDimensionFilter.Text[0];if(this.getLatitudeContainer().FieldInfos.length>0&&this.getLongitudeContainer().FieldInfos.length>0&&(t=u[this.getLatitudeContainer().FieldInfos[0].UniqueColumnName]===n.target.metadata.location[this.getLatitudeContainer().FieldInfos[0].UniqueColumnName]&&u[this.getLongitudeContainer().FieldInfos[0].UniqueColumnName]===n.target.metadata.location[this.getLongitudeContainer().FieldInfos[0].UniqueColumnName]),this.getAddressContainer().FieldInfos.length>0&&(t=u[this.getAddressContainer().FieldInfos[0].UniqueColumnName]===n.target.metadata.location[this.getAddressContainer().FieldInfos[0].UniqueColumnName]),this.getPostalCodeContainer().FieldInfos.length>0&&(t=u[this.getPostalCodeContainer().FieldInfos[0].UniqueColumnName]===n.target.metadata.location[this.getPostalCodeContainer().FieldInfos[0].UniqueColumnName]),t)return this.clearFilter(!0),t}return t},t.prototype.onDrillDown=function(n){if(this.drillLevelInfo.length!==this.getShapeContainer().FieldInfos.length-1){var t=JSON.parse(JSON.stringify(this.DataGroupInfo)),i=n.target.metadata.shapeName;this.drillLevelInfo.push({Level:this.drillLevelInfo.length,selectedItem:i,Id:t.FieldContainers[1].FieldInfos[this.drillLevelInfo.length].Id});this.fetchdrillLevelData()}},t.prototype.drillUp=function(n){for(var i=0,t=0;t<n.model.dataSource.length;t++)if(n.model.dataSource[t].id===n.tabId){i=t;break}for(t=this.drillLevelInfo.length;t>i;t--)this.drillLevelInfo.splice(t-1);this.removeBreadcrumb(this.breadCrumbItem);this.drillLevelInfo.length>0&&this.createBreadcrumb();this.fetchdrillLevelData()},t.prototype.fetchdrillLevelData=function(){var n=JSON.parse(JSON.stringify(this.DataGroupInfo));this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer);var i=this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(n,this),r=this.getWidgetInfo(this.DataGroupInfo),t=this.masterFilterWindowInstance.getSelectedValuesForWidgetRequest(),u=this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design;this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.WidgetAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,fieldInfo:i,dataset:n.DataSourceID,widgetInfo:r,request:AjaxRequest.Widget.toString(),getColumnListBasedOnVisibility:!1,selectedValuesList:BoldBIDashboard.isNullOrUndefined(t)?"":JSON.stringify(t),isDataSampleForViewMode:u})},{fnction:this.bbdesigner$.proxy(this.loadDrillData,this)})},t.prototype.loadDrillData=function(n){var t=this;BoldBIDashboard.isNullOrUndefined(this.breadCrumbItem)&&this.drillLevelInfo.length>0?this.createBreadcrumb():this.drillLevelInfo.length>0&&(this.removeBreadcrumb(this.breadCrumbItem),this.createBreadcrumb());this.updateReportItemData(n);setTimeout(function(){t.designerInstance.designerPanel.hideLoadingIndicator(t.controlContainer)},2e3)},t.prototype.removeAllDrillElements=function(){this.removeBreadcrumb(this.breadCrumbItem);this.drillLevelInfo=[]},t.prototype.removeBreadcrumb=function(n){BoldBIDashboard.isNullOrUndefined(n)||n.remove()},t.prototype.createBreadcrumb=function(){var n=this.designerId+"MapElement"+this.getBingMapProperties().UniqueName+"Breadcrumb";this.breadCrumbItem=BoldBIDashboard.buildTag("div.Breadcrumb","",{width:"100%",height:"20px",color:"#5997f9","font-weight":"400","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"100","margin-left":"0px","maring-bottom":"4px"},{id:n});this.breadCrumbItem.BoldBIDashboardBreadcrumb({dataSource:this.getBreadcrumbDatasource(),width:"100%",selected:this.bbdesigner$.proxy(this.drillUp,this)});this.bingMapItem.prepend(this.breadCrumbItem);this.updateBreadCrumbStyle(this.drillLevelInfo,this.contentContainer)},t.prototype.updateBreadCrumbStyle=function(n,t){if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0){var i=n.length;this.bbdesigner$(t.find(".e-dashboardbreadcrumb-drill")[i]).addClass("e-current-drilldowntext");this.updateFontStyleForBreadCrumb(t)}},t.prototype.updateFontStyleForBreadCrumb=function(n){var i=this.getFontSizeBasedOnResolution(),r,t,u;for(n.find(".e-dashboardbreadcrumb-drillIconForward").css("font-size",i==="16px"?"12px":i==="32px"?"20px":"8px"),r=n.find(".e-dashboardbreadcrumb-drill"),t=0;t<r.length;t++)u=this.designerInstance.measureText(r.eq(t).html(),100,{size:i,fontStyle:"Normal",fontFamily:"var(--designer-font)"}),r.eq(t).css({"font-size":i,width:u.width+3+"px"})},t.prototype.getBreadcrumbDatasource=function(){var r=[],n,t,i,e;if(this.drillLevelInfo.length>0&&(n=this.getShapeContainer(),!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.FieldInfos.length>1))){var o=n.FieldInfos[0].Name,u=this.getBingMapProperties().UniqueName,f="mapItem";for(r.push({id:this.designerId+f+u+"_Breadcrumb",displayText:o,columnId:n.FieldInfos[0].UniqueColumnName}),t=0;t<this.drillLevelInfo.length;t++)i=t+1,e=BoldBIDashboard.isNullOrUndefined(n.FieldInfos[i])?"":n.FieldInfos[i].UniqueColumnName,r.push({id:this.designerId+f+u+"drillLevel"+i+"_Breadcrumb",displayText:this.drillLevelInfo[t].selectedItem.toString(),columnId:e})}return r},t.prototype.showTooltip=function(n){var i,t;if(this.getBingMapProperties().ShowTooltip){if(i=null,!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getShapeContainer().FieldInfos.length>0&&(n.targetType==="polygon"||!BoldBIDashboard.isNullOrUndefined(n.target.metadata.markerType)&&n.target.metadata.markerType==="Bubble")){if(i=this.polygonTooltipTemplate,this.getShapeContainer().FieldInfos.length>0)for(t=0;t<=this.drillLevelInfo.length;t++)BoldBIDashboard.isNullOrUndefined(this.getShapeContainer().FieldInfos[t])||(i=i.replace("{"+this.getShapeContainer().FieldInfos[t].UniqueColumnName+"}",t===this.drillLevelInfo.length?n.target.metadata.shapeName:this.drillLevelInfo[t].selectedItem));for(i=i.replace("{"+this.getValueContainer().FieldInfos[0].UniqueColumnName+"}",this.getFormattedValue(n.target.metadata.shapeValue)),t=0;t<this.getShapeTooltipContainer().FieldInfos.length;t++)i=i.replace("{"+this.getShapeTooltipContainer().FieldInfos[t].UniqueColumnName+"}",isNaN(n.target.metadata.shapeTooltip[t])?n.target.metadata.shapeTooltip[t]:this.getFormattedValue(n.target.metadata.shapeTooltip[t],!0,this.getShapeTooltipContainer().FieldInfos[t].MeasureFormatting))}if(BoldBIDashboard.isNullOrUndefined(i)&&!BoldBIDashboard.isNullOrUndefined(this.getMarkerContainer())&&this.getMarkerContainer().FieldInfos.length>0)for(i=this.markerTooltipTemplate,t=0;t<this.getMarkerContainer().FieldInfos.length;t++)i=i.replace("{"+this.getMarkerContainer().FieldInfos[t].UniqueColumnName+"}",isNaN(n.target.metadata.title[t])?n.target.metadata.title[t]:this.getFormattedValue(n.target.metadata.title[t],!0,this.getMarkerContainer().FieldInfos[t].MeasureFormatting));if(!BoldBIDashboard.isNullOrUndefined(i)){i=i.replace('style="display: none"',"");this.bbdesigner$(this.tooltipElem).html(i);var r=n.pageX+this.bbdesigner$(this.tooltipElem).width(),u=this.bbdesigner$(document).width(),f=n.pageY+this.bbdesigner$(this.tooltipElem).height(),e=this.bbdesigner$(document).height();r>u&&(n.pageX=n.pageX-this.bbdesigner$(this.tooltipElem).width());f>e&&(n.pageY=n.pageY-this.bbdesigner$(this.tooltipElem).height());this.tooltipElem.css({display:"block",top:"".concat(n.pageY,"px"),left:"".concat(n.pageX,"px"),"z-index":BoldBIDashboard.getMaxZindex()+1})}}},t.prototype.closeTooltip=function(){this.tooltipElem.css({display:"none"})},t.prototype.getFormattedValue=function(n,t,i){var r=new MeasureFormatting;return BoldBIDashboard.isNullOrUndefined(t)&&this.getValueContainer().FieldInfos.length>0?r=this.getValueContainer().FieldInfos[0].MeasureFormatting:t&&!BoldBIDashboard.isNullOrUndefined(i)&&(r=i),BoldBIDashboard.DashboardUtil.formattedText(parseFloat(n),r.Culture,r.DecimalPoints,r.FormatType,r.DecimalSeparator,r.GroupSeparator,r.Prefix,r.Suffix,r.Unit,!0,this.designerInstance,r.EnableLakhsAndCroreRep)},t.prototype.markerClick=function(n){var i=[n.pageX,n.pageY],t=[];this.getBingMapProperties().UrlLink&&this.getBingMapProperties().UrlLink.EnableLink&&t.push(WidgetAction.Linking);this.getBingMapProperties().FilterSettings.ActAsMasterWidget&&t.push(WidgetAction.Filter);this.widgetJson.ContainerSettings.ViewData&&t.push(WidgetAction.ViewData);BoldBIDashboard.Dashboard.WidgetHelper.createWidgetActionContextMenu(this.designerInstance,this,this.Name,t,n,i)},t.prototype.createPushPinIcon=function(n,t,i){var r=n.split("<path");r[0]+='<path fill="'+i+'"';n=r.join("");n='<svg height="'+t+'" width="'+t+'"'+n.substring(4);this.fontIcon=n},t.prototype.renderMarkerImageData=function(){var i,r,n,t;if(!BoldBIDashboard.isNullOrUndefined(this.getMarkerImageContainer())&&this.getMarkerImageContainer().FieldInfos.length>0)if(i=this.checkValidPattern(this.getBingMapProperties().MarkerUrlPattern,this.getMarkerImageContainer().FieldInfos),i)for(this.map.entities.clear(),this.locs=[],r=function(t){var o=n.getLatitudeContainer().FieldInfos[0].UniqueColumnName,s=n.getLongitudeContainer().FieldInfos[0].UniqueColumnName,r=new Microsoft.Maps.Location(parseFloat(n.mapDataWithImage[t].location[0][o]),parseFloat(n.mapDataWithImage[t].location[0][s])),u,i;if(n.locs.push(r),u=n,BoldBIDashboard.isNullOrUndefined(n.getBingMapProperties().ColorCustomization))n.renderPushPinWithImage(r,n.mapDataWithImage[t].location[0],n.mapDataWithImage[t].imageUrl,n.getBingMapProperties().MarkerSize,function(n){return u.map.entities.push(n)});else{var h=n.mapDataWithImage[t].isCondtionApplied?n.mapDataWithImage[t].fill:n.getBingMapProperties().MarkerShapeColor,f=n.mapDataWithImage[t].isCondtionApplied?n.mapDataWithImage[t].size:n.getBingMapProperties().MarkerSize,e=n.mapDataWithImage[t].isCondtionApplied?n.mapDataWithImage[t].shape:n.getBingMapProperties().MarkerShape;n.mapDataWithImage[t].imageType===""||n.mapDataWithImage[t].imageType===1?e==="Image"?n.renderPushPinWithImage(r,n.mapDataWithImage[t].location[0],n.mapDataWithImage[t].markerImageUrl,f,function(n){u.map.entities.push(n)},n.mapDataWithImage[t].isCondtionApplied):(n.createPushPinIcon(n.markerShapeSvg[e],f,h),n.getTooltipCollection(n.mapDataWithImage[t].location[0]),i=new Microsoft.Maps.Pushpin(r,{icon:n.fontIcon,anchor:new Microsoft.Maps.Point(n.getBingMapProperties().MarkerSize/2,n.getBingMapProperties().MarkerSize/2)}),i.metadata={isCondtionApplied:n.mapDataWithImage[t].isCondtionApplied,title:n.toolTipCollection,location:n.mapDataWithImage[t].location[0]},n.map.entities.push(i),Microsoft.Maps.Events.addHandler(i,"mouseover",n.bbdesigner$.proxy(n.showTooltip,n)),Microsoft.Maps.Events.addHandler(i,"mouseout",n.bbdesigner$.proxy(n.closeTooltip,n)),Microsoft.Maps.Events.addHandler(i,"click",n.bbdesigner$.proxy(n.markerClick,n))):n.renderPushPinWithImage(r,n.mapDataWithImage[t].location[0],n.mapDataWithImage[t].shape,f,function(n){return u.map.entities.push(n)},n.mapDataWithImage[t].isCondtionApplied)}},n=this,t=0;t<this.mapDataWithImage.length;t++)r(t);else this.designerInstance.modules.util.alertDialog("Dashboard Designer",this.locale.alertWindowMesages.imageURLPatternValidationMessage,IconType.information,AlertType.Alert,!1,"")},t.prototype.renderPushPinWithImage=function(n,t,i,r,u,f){var o=this,s=new Image,e=this;s.onload=function(){var i=document.createElement("canvas"),c,h;i.width=r;i.height=r;c=i.getContext("2d");e.getTooltipCollection(t);c.drawImage(s,0,0,i.width,i.height);h=new Microsoft.Maps.Pushpin(n,{icon:i.toDataURL(),anchor:new Microsoft.Maps.Point(i.width/2,i.height/2)});h.metadata={title:e.toolTipCollection,isCondtionApplied:f,location:t};Microsoft.Maps.Events.addHandler(h,"mouseover",o.bbdesigner$.proxy(e.showTooltip,e));Microsoft.Maps.Events.addHandler(h,"mouseout",o.bbdesigner$.proxy(e.closeTooltip,e));Microsoft.Maps.Events.addHandler(h,"click",o.bbdesigner$.proxy(o.markerClick,o));u&&u(h)};s.crossOrigin="anonymous";s.src=this.getBingMapProperties().MarkerImage==="Parameterized URL"?this.getImageUrl(this.getBingMapProperties().MarkerUrlPattern,i):i},t.prototype.refresh=function(){return null},t.prototype.checkValidPattern=function(n,t){for(var u=!1,r=n.split(/{|}/),i=0;i<r.length;i++)if(!BoldBIDashboard.isNullOrUndefined(r[i])&&r[i]!==""&&!isNaN(r[i]))if(parseInt(r[i])<t.length)u=!0;else return!1;return u},t.prototype.getImageUrl=function(n,t){for(var i=0;i<t.length;i++)n=n.replace("{".concat(i,"}"),t[i]);return n},t.prototype.getShapeColor=function(n,t){var f="",i={},u=[],r,e,o,s,h;if(this.getBingMapProperties().ShapeColorCustomization)if(this.getBingMapProperties().ShapeColorCustomization.Type===ColorCustomizationType.Gradient)for(u=this.getGradientColors(),r=0;r<u.length;r++)if(!BoldBIDashboard.isNullOrUndefined(u[r].from)&&!BoldBIDashboard.isNullOrUndefined(u[r].to)&&n>=u[r].from&&n<=u[r].to){i[this.colorString]=u[r].color;i[this.from]=u[r].from;i[this.to]=u[r].to;f=this.getColor(i,n);break}else f=this.getBingMapProperties().ShapeColorCustomization.DefaultColor;else this.getBingMapProperties().ShapeColorCustomization.Type===ColorCustomizationType.Individual?(e=this.getShapeContainer().FieldInfos[0].UniqueColumnName,o=this.getBingMapProperties().ShapeColorCustomization.SolidColorInfo[0].BasedOn.FieldId.substring(15)+"_Color",this.bbdesigner$.map(JSON.parse(this.choroplethMapData.data),function(n){n[e]===t&&(f=n[o])})):this.getBingMapProperties().ShapeColorCustomization.Type===ColorCustomizationType.Rule&&(BoldBIDashboard.isNullOrUndefined(this.getBingMapProperties().ShapeColorCustomization.RuleRangeSettings.RangeColorInfo[0].DimensionConditionalValue)?f=this.getRangeColorMapping(this.getBingMapProperties().ShapeColorCustomization.RuleRangeSettings,n):(s=this.getShapeContainer().FieldInfos[0].UniqueColumnName,h=this.getBingMapProperties().ShapeColorCustomization.RuleRangeSettings.BasedOn.FieldId.substring(15)+"_CustomColor",this.bbdesigner$.map(JSON.parse(this.choroplethMapData.data),function(n){n[s]===t&&(f=n[h])})));else i[this.colorString]=[this.getBingMapProperties().DefaultColor.Color,this.colorLuminance(this.getBingMapProperties().DefaultColor.Color,.7)],i[this.from]=this.minShapeValue,i[this.to]=this.maxShapeValue,f=!BoldBIDashboard.isNullOrUndefined(i.from)&&!BoldBIDashboard.isNullOrUndefined(i.to)&&n>=i.from&&n<=i.to?this.getColor(i,n):Object.prototype.toString.call(i.color)==="[object Array]"?i.color[0]:this.getBingMapProperties().DefaultColor.Color;return f},t.prototype.getColor=function(n,t){var i="",r;return t===n.from?i=n.color[0]:t===n.to?i=n.color[1]:(r=this.getGradientColor(Number(t),n),i=this.rgbToHex(r.r,r.g,r.b)),i},t.prototype.rgbToHex=function(n,t,i){return"#"+this.componentToHex(n)+this.componentToHex(t)+this.componentToHex(i)},t.prototype.componentToHex=function(n){var t=n.toString(16);return t.length===1?"0"+t:t},t.prototype.getGradientColor=function(n,t){var l=t.from,a=t.to,o=0,u="b",v=a-l,f,s,h,c,i;if(o=(n-l)/v,t.color.length<=2)s=t.color[0].charAt(0)==="#"?t.color[0]:this._colorNameToHex(t.color[0]),h=t.color[t.color.length-1].charAt(0)==="#"?t.color[t.color.length-1]:this._colorNameToHex(t.color[t.color.length-1]);else{s=t.color[0].charAt(0)==="#"?t.color[0]:this._colorNameToHex(t.color[0]);h=t.color[t.color.length-1].charAt(0)==="#"?t.color[t.color.length-1]:this._colorNameToHex(t.color[t.color.length-1]);var e=v/(t.color.length-1),y=void 0,p=void 0,b=t.color.length-1,r=[],w={};for(c=1;c<b;c++)p=c*e,y=l+p,w={b:y,color:t.color[c]},r.push(w);for(i=0;i<r.length;i++)l<=n&&n<=r[i][u]&&i===0?(f=r[i][this.colorString].charAt(0)==="#"?r[i][this.colorString]:this._colorNameToHex(r[i][this.colorString]),h=f,o=n<r[i][u]?1-Math.abs((n-r[i][u])/e):(n-r[i][u])/e):r[i][u]<=n&&n<=a&&i===r.length-1&&(f=r[i][this.colorString].charAt(0)==="#"?r[i][this.colorString]:this._colorNameToHex(r[i][this.colorString]),s=f,o=n<r[i][u]?1-Math.abs((n-r[i][u])/e):(n-r[i][u])/e),i!==r.length-1&&i<r.length&&r[i][u]<=n&&n<=r[i+1][u]&&(f=r[i][this.colorString].charAt(0)==="#"?r[i][this.colorString]:this._colorNameToHex(r[i][this.colorString]),s=f,h=r[i+1][this.colorString].charAt(0)==="#"?r[i+1][this.colorString]:this._colorNameToHex(r[i+1][this.colorString]),o=Math.abs(n-r[i+1][u])/e)}return this.getPercentageColor(o,s,h)},t.prototype.getPercentageColor=function(n,t,i){var r=i.split("#")[1],u=t.split("#")[1],f=this.getPercentage(n,parseInt(u.substr(0,2),16),parseInt(r.substr(0,2),16)),e=this.getPercentage(n,parseInt(u.substr(2,2),16),parseInt(r.substr(2,2),16)),o=this.getPercentage(n,parseInt(u.substr(4,2),16),parseInt(r.substr(4,2),16));return new ColorValue(f,e,o)},t.prototype.getPercentage=function(n,t,i){var r=i-t;return Math.round(t+r*n)},t.prototype._colorNameToHex=function(n){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",orchid:"#da70d6",papayawhip:"#ffefd5",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return Object.prototype.toString.call(n)==="[object Array]"?n:typeof t[n.toLowerCase()]!="undefined"?t[n.toLowerCase()]:n},t.prototype.colorLuminance=function(n,t){var u,i,r;for(n=String(n).replace(/[^0-9a-f]/gi,""),n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),t=t||0,u="#",r=0;r<3;r++)i=parseInt(n.substr(r*2,2),16),i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16),u+=("00"+i).substr(i.length);return u},t.prototype.getGradientColors=function(){var t=this.minShapeValue,u=this.maxShapeValue,n=this.getBingMapProperties().ShapeColorCustomization.GradientSettings.GradientColorInfo,e=n.Low.Color,o=n.Mid.Color,i=n.High.Color,s=n.Low.Value,a=n.Mid.Value,h=n.High.Value,c=t,l=u;n.Low.IsCustom&&(c=s);n.High.IsCustom&&(l=h);var f=(c+l)/2,r=[],v=!1;return n.Low.IsCustom||n.Mid.IsCustom||n.High.IsCustom?(n.Low.IsCustom&&(v=t<s,t=s),n.HasMidColor?(n.Mid.IsCustom&&(f=a),r.push({color:[e,o],from:t,to:f}),n.High.IsCustom?r.push({color:[o,i],from:f,to:h}):r.push({color:[o,i],from:f,to:u})):n.High.IsCustom?r.push({color:[e,i],from:t,to:h}):r.push({color:[e,i],from:t,to:u})):t===u?r.push({color:[i,i],from:t-1e-6,to:u}):r=n.HasMidColor?[{color:[e,o],from:t,to:f},{color:[o,i],from:f,to:u}]:[{color:[e,i],from:t,to:u}],r},t.prototype.getRangeColorMapping=function(n,t){for(var i,r=this.getBingMapProperties().ShapeColorCustomization.DefaultColor,u=0;u<n.RangeColorInfo.length;u++){i=u;switch(n.RangeColorInfo[i].MeasureCondition){case 0:t>n.RangeColorInfo[i].StartRange&&(r=n.RangeColorInfo[i].PropertyColorPair[0].Color);break;case 1:t>=n.RangeColorInfo[i].StartRange&&(r=n.RangeColorInfo[i].PropertyColorPair[0].Color);break;case 2:t<n.RangeColorInfo[i].StartRange&&(r=n.RangeColorInfo[i].PropertyColorPair[0].Color);break;case 3:t<=n.RangeColorInfo[i].StartRange&&(r=n.RangeColorInfo[i].PropertyColorPair[0].Color);break;case 4:t===n.RangeColorInfo[i].StartRange&&(r=n.RangeColorInfo[i].PropertyColorPair[0].Color);break;case 5:t!==n.RangeColorInfo[i].StartRange&&(r=n.RangeColorInfo[i].PropertyColorPair[0].Color);break;case 6:t>=n.RangeColorInfo[i].StartRange&&t<=n.RangeColorInfo[i].EndRange&&(r=n.RangeColorInfo[i].PropertyColorPair[0].Color);break;case 7:t>=n.RangeColorInfo[i].StartRange&&t<=n.RangeColorInfo[i].EndRange||(r=n.RangeColorInfo[i].PropertyColorPair[0].Color)}}return r},t.prototype.getBingMapProperties=function(){return this.widgetJson},t.prototype.mapTypeList=function(){return[{text:"Road",value:"r"},{text:"Aerial",value:"a"},{text:"Canvas Dark",value:"wd"},{text:"Canvas Light",value:"wl"},{text:"Gray Scale",value:"cg"}]},t.prototype.shapeList=function(){return[{text:"All",value:"CountryRegion"},{text:"Country",value:"AdminDivision1"},{text:"State",value:"AdminDivision2"}]},t.prototype.markerShapeList=function(){return["Circle","Diamond","Star","Triangle","Image"]},t.prototype.setPropertyElement=function(n,t,i,r){var u,f;this.propertyPanel.canUpdate=!1;u=this.propertyPanel.getPropertyElement(this.getPropertyPanelForBingMap(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r);u.isVisible=i;f=this.bbdesigner$.extend(!0,{},u);f.categoryName=n;this.propertyPanel.updatePropertyValue(f,"BingMap",i);this.propertyPanel.canUpdate=!0},t.prototype.renderColorSettings=function(n,t){if(this.categoryId=this.designerId+"_"+t,this.colorContainer=this.designerInstance.element.find("#"+this.categoryId),this.colorContainer.length!==0||BoldBIDashboard.isNullOrUndefined(n))this.colorContainer.length>0&&(this.renderElements(),this.renderColorSettingsElement());else{this.colorContainer=BoldBIDashboard.buildTag("div.e-dashbrd-customcolor-container","",{},{id:this.categoryId});var i=BoldBIDashboard.buildTag("div","",{},{id:this.categoryId+"_wrap"}),r=BoldBIDashboard.buildTag("div.e-basic-advance-panel-wrap","",{width:"100%"},{id:this.designerId+"_"+t+"_basicAdvancePanel"}),u=this.getAdvance(this.categoryId);r.append(u);i.append(r);this.colorContainer.append(i);n.append(this.colorContainer);this.renderElements()}},t.prototype.getAdvance=function(n){var t=BoldBIDashboard.buildTag("div.e-advance-row","",{},{id:this.designerId+"_advanceRow_table"}),i=BoldBIDashboard.buildTag("div.e-advance-color-settings-button","",{},{}),r=BoldBIDashboard.buildTag("button.e-advanced-color-settings-button bbi-dbrd-btn-small bbi-dbrd-btn-primary","Customize",{width:"230px"},{id:n+"_advance_settings_button",type:"button"});return i.append(r),t.append(this.monochromaticSection()),t.append(i)},t.prototype.monochromaticSection=function(){var r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designerInstance.designerPanel.selectedReportItems[0]),n=BoldBIDashboard.buildTag("div.e-color-settings-monochromatic-wrap","",{"margin-left":"195px"},{id:this.designerId+"_"+this.Type+"_formatting_wrap"}),t=BoldBIDashboard.buildTag("div.e-color-settings-monochromatic-color-wrapper","",{}),i=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:this.designerId+"_"+this.Type+"_monochromatic_ColorPicker"});return t.append(i),i.BoldBIDashboardColorPicker({value:this.getBingMapProperties().DefaultColor.Color,cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label e-color-settings-monochromatic-color-picker",select:this.bbdesigner$.proxy(this.updateMonochromaticColorValue,r),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown}),n.append(t),n},t.prototype.renderElements=function(){var n=this.colorContainer.find(".e-color-settings-monochromatic-wrap"),t=this.colorContainer.find(".e-advance-color-settings-button"),i=this.colorContainer.find(".e-advanced-color-settings-button");this.getBingMapProperties().EnableColorSettings?(n.css("display","none"),t.css("display","block")):(n.css("display","block"),t.css("display","none"));i.off("click",this.bbdesigner$.proxy(this.editColorCustomization,this,!0));i.on("click",this.bbdesigner$.proxy(this.editColorCustomization,this,!0))},t.prototype.renderColorSettingsElement=function(){BoldBIDashboard.isNullOrUndefined(this.colorContainer)||BoldBIDashboard.isNullOrUndefined(this.map)||this.colorContainer.find("#"+this.designerId+"_"+this.Type+"_monochromatic_ColorPicker").BoldBIDashboardColorPicker({value:this.getBingMapProperties().DefaultColor.Color})},t.prototype.updateColorSettings=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designerInstance.designerPanel.selectedReportItems[0]),i=this.colorContainer.find(".e-color-settings-monochromatic-wrap"),r=this.colorContainer.find(".e-advance-color-settings-button");n==="Monochromatic"?((t.getBingMapProperties().ShapeColorCustomization.Type!==ColorCustomizationType.Individual||t.getBingMapProperties().ShapeColorCustomization.Type===ColorCustomizationType.Individual&&t.getBingMapProperties().ShapeColorCustomization.SolidColorInfo[0].DefaultColorSets.length>0)&&(t.setDefaultColorCustomization(),t.dataConfigurationInstance.postDraggedFields()),t.getBingMapProperties().EnableColorSettings=!1,t.updateGradientColors(this.getBingMapProperties().DefaultColor.Color),i.css("display","block"),r.css("display","none")):n==="Advanced"&&(t.editColorCustomization(t),i.css("display","none"),r.css("display","block"))},t.prototype.updateMonochromaticColorValue=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designerInstance.designerPanel.selectedReportItems[0]),i=this.propertyPanel.getHexColorFromRGBA(n.RGBA),r;t.getBingMapProperties().EnableColorSettings||BoldBIDashboard.isNullOrUndefined(i)||(r=t.getBingMapProperties().DefaultColor.Color!==i,t.getBingMapProperties().DefaultColor.Color=i,t.getBingMapProperties().DefaultColor.IsEdited=r,t.updateGradientColors(i))},t.prototype.editColorCustomization=function(){var f=new BoldBIDashboard.DashboardDesignerUtility.AdvancedColorCustomization(this.designerInstance),i=BoldBIDashboard.isNullOrUndefined(this.getBingMapProperties().ShapeColorCustomization)?new ColorCustomization:this.getBingMapProperties().ShapeColorCustomization,n=new ColorFieldsInfo,t,r,u;n.ColorPicker=ColorSetColorPickers.NormalColorPicker;n.Name=WidgetProperty.FillColor;n.DisplayName="Fill color";t=[];t.push(n);r=this.getValueContainer().FieldInfos[0];u={colorCustomizationObj:i,DataGroupInfo:this.DataGroupInfo,showFirstDimension:!0,colorFields:t,hasDefaultColor:!0,defaultBasedOnField:r,defaultColorFill:i.DefaultColor,isDefaultFormat:!0};f.populateUI(u,this,"UpdateColorCustomization")},t.prototype.UpdateColorCustomization=function(n,t){if(t)!this.getBingMapProperties().EnableColorSettings&&t&&(this.renderElements(),this.setPropertyElement("Formatting","ColorSettings",this.getBingMapProperties().EnableColorSettings?"Advanced":"Monochromatic"),this.getBingMapProperties().EnableColorSettings=!1);else{if(this.getBingMapProperties().ShapeColorCustomization=n,n.Type===ColorCustomizationType.Individual){var i=this.getShapeContainer().FieldInfos[0];this.getBingMapProperties().ShapeColorCustomization.SolidColorInfo[0].BasedOn.FieldId=i.Id;this.getBingMapProperties().ShapeColorCustomization.SolidColorInfo[0].BasedOn.UniqueColumnName=i.UniqueColumnName;this.getBingMapProperties().ShapeColorCustomization.SolidColorInfo[0].BasedOn.SummaryType=SummaryType.NONE}this.getBingMapProperties().EnableColorSettings=!0;this.designerInstance.modules.serialization.notifyChange();this.dataConfigurationInstance.postDraggedFields()}},t.prototype.setDefaultColorCustomization=function(){this.getBingMapProperties().ShapeColorCustomization=BoldBIDashboard.isNullOrUndefined(this.getBingMapProperties().ShapeColorCustomization)&&this.DataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getShapeContainer())&&this.getShapeContainer().FieldInfos.length>0?this.getShapeColorCustomization():null;this.getBingMapProperties().DefaultColor.Color=BoldBIDashboard.DashboardUtil.defaultColorPalette[0];this.getBingMapProperties().EnableColorSettings=!1;BoldBIDashboard.isNullOrUndefined(this.colorContainer)||this.setPropertyElement("Formatting","ColorSettings","Monochromatic");this.designerInstance.modules.serialization.notifyChange()},t.prototype.updateGradientColors=function(n){var i,t;if(!BoldBIDashboard.isNullOrUndefined(n)){for(this.getBingMapProperties().DefaultColor.Color=n,i={},t=0;t<this.map.entities.getLength();t++)this.getBingMapProperties().MapShape==="Bubble"?i[this.map.entities.get(t).metadata.shapeName]=this.map.entities.get(t).metadata.shapeValue:this.map.entities.get(t).setOptions({fillColor:this.getShapeColor(this.map.entities.get(t).metadata.shapeValue,this.map.entities.get(t).metadata.shapeName)});this.getBingMapProperties().MapShape==="Bubble"&&this.updateReportItemData(this.choroplethMapData)}},t.prototype.renderBrowseBox=function(n,t,i){if(BoldBIDashboard.isNullOrUndefined(n))this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","Browse",i.isVisible),this.resetConfiguration();else{var r=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%",display:BoldBIDashboard.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designerId+"_"+t+"_"+i.name+"_container"});this.localFieldTable=BoldBIDashboard.buildTag("table.bbi-designer-dsconfig-table","",{width:"100%",height:"50px"},{unselectable:"on",id:this.designerId+"_image_local_table"});this.renderBrowseTable();this.renderUploadBox();r.append(this.localFieldTable);r.append(this.uploadbox);n.append(r)}},t.prototype.renderBrowseTable=function(){var t=BoldBIDashboard.buildTag("tr","",{}),s=BoldBIDashboard.buildTag("td","",{}),n=BoldBIDashboard.buildTag("table","",{unselectable:"on"}),i=BoldBIDashboard.buildTag("tr","",{},{}),r=BoldBIDashboard.buildTag("tr","",{},{}),p=BoldBIDashboard.buildTag("td","",{}),u,f;this.progressTxt=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label","",{float:"left"},{id:this.designerId+"_image_progress_tr"});u=BoldBIDashboard.buildTag("td","",{},{id:this.designerId+"_image_path_error_icon_td"});f=BoldBIDashboard.buildTag("td","",{},{colspan:"2"});this.designerInstance.modules.util.renderErrIndictor(u,this.designerId);var e=BoldBIDashboard.buildTag("tr","",{height:"22.5px"},{id:this.designerId+"_image_path_td"}),h=BoldBIDashboard.buildTag("tr.e-progresserrmsg","",{height:"22.5px",display:"none"},{id:this.designerId+"_image_progresserr_tr"}),c=BoldBIDashboard.buildTag("td","",{}),w=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label","",{"font-size":"12px","font-weight":"normal"},{id:this.designerId+"_image_progresserr_tr"}),l=BoldBIDashboard.buildTag("td","",{},{colspan:"2"}),a=BoldBIDashboard.buildTag("td","",{},{}),v=BoldBIDashboard.buildTag("td","",{float:"right",width:"170px"},{});this.filePath=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-content-label","",{height:"25px","border-right":"0px","padding-bottom":"0.5px","padding-top":"0.5px",width:"218px"},{id:this.designerId+"_image_path",type:"text",readonly:"readonly"});BoldBIDashboard.isNullOrUndefined(this.getBingMapProperties().MarkerLocalImageName)||this.filePath.val(this.getBingMapProperties().MarkerLocalImageName);var o=BoldBIDashboard.buildTag("div.bbi-dbrd-btn-secondary bbi-dbrd-btn-small","",{display:"inline-block","margin-left":"-41px","min-width":"0px"},{id:this.designerId+"_file_datasource_browse"}),b=BoldBIDashboard.buildTag("span.bbi-designer-horizontal-browse bbi-designer-browse-icon","",{"font-size":"16px","line-height":"28px"}),y=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-top":"13px"});y.text("Browse Image");v.append(y);this.localFieldTable.append(t);t.append(v);s.append(n);t.append(s);n.append(i);i.append(p);i.append(u);n.append(e,r.clone(),r);l.append(this.filePath);e.append(l);e.append(a);a.append(o);f.append(this.progressTxt);r.append(f);c.append(w);h.append(c);o.on("click",this.bbdesigner$.proxy(this.onBrowseClick,this));o.append(b);n.append(h);this.uploadbox=BoldBIDashboard.buildTag("div","",{id:this.designerId+"_image_upload"})},t.prototype.onBrowseClick=function(){this.designerInstance.element.find("#"+this.designerId+"_image_upload .e-uploadinput").click()},t.prototype.renderUploadBox=function(){var n=this,t=BoldBIDashboard.buildTag("div","",{height:"0px"},{id:this.designerId+"_image_upload"});this.designerInstance.element.append(t);this.ejUploadBox=t.BoldBIDashboardUploadbox({width:"0px",height:"0px",uploadName:"image",extensionsAllow:".jpg,.png,.gif,.jpeg,.bmp,.emf,.jfif,.jpe,.rle,.tif,.tiff,.wmf,.dib,.ico",autoUpload:!0,showFileDetails:!1,dialogAction:{content:this.designerInstance.element},fileSize:78643200,saveUrl:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.uploadimage,fileSelect:this.bbdesigner$.proxy(this.onfileSelect,this),error:this.bbdesigner$.proxy(this.onuploadError,this),success:this.bbdesigner$.proxy(this.onuploadSuccess,this),inProgress:this.bbdesigner$.proxy(this.fileProgress,this),beforeSend:this.bbdesigner$.proxy(function(t){n.designerInstance.beforeSendRequestForUploadbox(n.designerInstance,"UploadAction",t)},this)}).data("BoldBIDashboardUploadbox");this.designerInstance.element.find(this.designerId+"_img_upload_SelectButton").hide()},t.prototype.onfileSelect=function(n){this.resetConfiguration();n.files.length!==0&&(n.files[0].size>n.model.fileSize?(n.cancel=!0,this.progressTxt.text("")):(this.designerInstance.element.find("#"+this.designerId+"_image_progress_tr").css("display","inline-block"),this.progressTxt.text("Initiating upload..."),this.fileName=this.fileExt=null,this.filePath.val(n.files[0].name)));BoldBIDashboard.browserInfo().name!=="msie"&&this.ejUploadBox._uploadFileListDelete()},t.prototype.resetConfiguration=function(){var n=this.widgetHelper.getCurrentWidgetInstance();this.designerInstance.element.find("#"+this.designerId+"_image_path").val(this.getBingMapProperties().MarkerLocalImageName);this.fileName=n.fileName;this.fileExt=n.fileExt;this.designerInstance.element.find("#"+this.designerId+"_image_progress_tr").css("display","none")},t.prototype.fileProgress=function(n){this.progressTxt.text("Uploading..."+n.percentage+"%")},t.prototype.onuploadError=function(){this.progressTxt.text("Upload failed.")},t.prototype.onuploadSuccess=function(n){var i=this.widgetHelper.getCurrentWidgetInstance(),t,r;this.contentContainer=this.designerInstance.designerPanel.selectedReportItems[0].find(".bbi-dbrd-content-container");this.progressTxt.css("display","none");t=JSON.parse(n.responseText);t&&t.Status?(i.fileExt=t.Data.ext,i.fileName=t.Data.fileId+t.Data.ext,i.fileId=t.Data.fileId,i.getBingMapProperties().MarkerLocalImageName=t.Data.fileName,r="data:image/"+t.Data.ext+";base64,"+t.Data.source,i.getBingMapProperties().MarkerLocalImageUrl=t.Data.fileId+t.Data.ext,BoldBIDashboard.Dashboard.Resource.addImage(i.getBingMapProperties().MarkerLocalImageUrl,r),i.updateMarkerImage(r),i.designerInstance.modules.serialization.notifyChange()):this.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.upload,this.locale.errorMessage.failedToUploadFile,IconType.errors,AlertType.Alert,!1,t?t.Message:null)},t.prototype.performSelectedWidgetAction=function(t,i,r,u){var h=this.getHiddenColumnContainer(),c,l,a,e,s,v,o,f;if(!BoldBIDashboard.isNullOrUndefined(r))switch(t){case WidgetAction.Linking.toString():u.model.mode!==BoldBIDashboard.Designer.mode.design&&(c=this.getLinkingData(r),n.prototype.performLinking.call(this,c));break;case WidgetAction.ViewData.toString():i.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(l=u.modules.viewDataDialog,a=this.showSelectItemsInViewData(r),l.showViewDataPopup(i,!1,a,!0));break;case WidgetAction.Filter.toString():if(e=[],s=[],this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;if(v=!this.isShapeSelected(r),v){if(this.getBingMapProperties().SelectedFilterValues=[],r.targetType==="polygon"&&this.getShapeContainer().FieldInfos.length>0&&this.getValueContainer().FieldInfos.length>0&&(s.push(this.getShapeContainer().FieldInfos[this.drillLevelInfo.length]),e[this.getShapeContainer().FieldInfos[this.drillLevelInfo.length].UniqueColumnName]=r.target.metadata.shapeName,e[this.getValueContainer().FieldInfos[0].UniqueColumnName]=r.target.metadata.shapeValue,!BoldBIDashboard.isNullOrUndefined(h)))for(o=h.FieldInfos,f=0;f<o.length;f++)e[o[f].UniqueColumnName]=this.getHiddenColumnData(r,o[f].UniqueColumnName),s.push(o[f]);if(r.targetType==="pushpin"&&(this.getLatitudeContainer().FieldInfos.length>0&&this.getLongitudeContainer().FieldInfos.length>0&&(s.push(this.getLatitudeContainer().FieldInfos[0]),s.push(this.getLongitudeContainer().FieldInfos[0]),e[this.getLatitudeContainer().FieldInfos[0].UniqueColumnName]=r.target.metadata.location[this.getLatitudeContainer().FieldInfos[0].UniqueColumnName],e[this.getLongitudeContainer().FieldInfos[0].UniqueColumnName]=r.target.metadata.location[this.getLongitudeContainer().FieldInfos[0].UniqueColumnName]),this.getAddressContainer().FieldInfos.length>0&&(s.push(this.getAddressContainer().FieldInfos[0]),e[this.getAddressContainer().FieldInfos[0].UniqueColumnName]=r.target.metadata.location[this.getAddressContainer().FieldInfos[0].UniqueColumnName]),this.getPostalCodeContainer().FieldInfos.length>0&&(s.push(this.getPostalCodeContainer().FieldInfos[0]),e[this.getPostalCodeContainer().FieldInfos[0].UniqueColumnName]=r.target.metadata.location[this.getPostalCodeContainer().FieldInfos[0].UniqueColumnName]),!BoldBIDashboard.isNullOrUndefined(h)))for(o=h.FieldInfos,f=0;f<o.length;f++)e[o[f].UniqueColumnName]=this.getItemValue(o[f].UniqueColumnName,r),s.push(o[f])}i.isCurrentMaster=!0;n.prototype.performInteraction.call(this,this,s,e);break;case WidgetAction.DrillDown.toString():this.onDrillDown(r)}},t.prototype.showSelectItemsInViewData=function(n){var t=[],i;if(!BoldBIDashboard.isNullOrUndefined(n)&&(n.targetType==="polygon"||n.targetType==="pushpin")){if(this.drillLevelInfo.length>0)for(i=0;i<this.drillLevelInfo.length;i++)BoldBIDashboard.isNullOrUndefined(n.target.metadata.markerType)||n.target.metadata.markerType!=="polygon"||t.push({selectedItem:n.target.metadata.shapeName,columnId:this.getShapeContainer().FieldInfos[this.drillLevelInfo.length].Id,UniqueColumnName:this.getShapeContainer().FieldInfos[this.drillLevelInfo.length].UniqueColumnName});else BoldBIDashboard.isNullOrUndefined(n.target.metadata.markerType)||n.target.metadata.markerType!=="polygon"||t.push({selectedItem:n.target.metadata.shapeName,columnId:this.getShapeContainer().FieldInfos[this.drillLevelInfo.length].Id,UniqueColumnName:this.getShapeContainer().FieldInfos[this.drillLevelInfo.length].UniqueColumnName});this.getLatitudeContainer().FieldInfos.length>0&&this.getLongitudeContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(n.target.metadata.location)&&t.push({selectedItem:n.target.metadata.location[this.getLatitudeContainer().FieldInfos[0].UniqueColumnName],columnId:this.getLatitudeContainer().FieldInfos[0].Id,UniqueColumnName:this.getLatitudeContainer().FieldInfos[0].UniqueColumnName},{selectedItem:n.target.metadata.location[this.getLongitudeContainer().FieldInfos[0].UniqueColumnName],columnId:this.getLongitudeContainer().FieldInfos[0].Id,UniqueColumnName:this.getLongitudeContainer().FieldInfos[0].UniqueColumnName});this.getAddressContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(n.target.metadata.location)&&t.push({selectedItem:n.target.metadata.location[this.getAddressContainer().FieldInfos[0].UniqueColumnName],columnId:this.getAddressContainer().FieldInfos[0].Id});this.getPostalCodeContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(n.target.metadata.location)&&t.push({selectedItem:n.target.metadata.location[this.getPostalCodeContainer().FieldInfos[0].UniqueColumnName],columnId:this.getPostalCodeContainer().FieldInfos[0].Id})}return t},t.prototype.getLinkingData=function(n){var e=this,r={isEnabled:!1,parameterDetails:[],url:"",urlLinkInfo:[]},f,i,t,u;if(!BoldBIDashboard.isNullOrUndefined(this.widgetJson)&&!BoldBIDashboard.isNullOrUndefined(n)&&(f=this.designerInstance.modules.util.getSourceData(this.DataGroupInfo,!1,!1,!0),this.widgetJson.UrlLink.EnableLink&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.UrlLink.GridUrlType)&&this.widgetJson.UrlLink.GridUrlType.toString()===UrlLinkType[UrlLinkType.Row]&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.UrlLink.UrlPath)&&this.widgetJson.UrlLink.UrlPath!==""))for(i=f.filter(function(n){return e.widgetJson.UrlLink.PassingParameters.indexOf(n.Value)!==-1}),r.url=this.widgetJson.UrlLink.UrlPath,r.isEnabled=!0,t=0;t<i.length;t++)u="",u=n.targetType!=="polygon"&&(BoldBIDashboard.isNullOrUndefined(n.target.metadata.markerType)||n.target.metadata.markerType!=="Bubble")?this.getItemValue(i[t].Id,n):i[t].ValueInfoId==="HiddenColumn"?this.getHiddenColumnData(n,i[t].Id):this.getShapeValue(n.target.metadata.shapeName,n,i[t].Id),r.parameterDetails.push({parameter:i[t].Value,value:u});return r.urlLinkInfo=this.widgetJson.UrlLink,r},t.prototype.getHiddenColumnData=function(n,t){var i=this,u=JSON.parse(this.choroplethMapData.data),r=u.filter(function(t){return t[i.getValueContainer().FieldInfos[0].UniqueColumnName]===n.target.metadata.shapeValue&&t[i.getShapeContainer().FieldInfos[0].UniqueColumnName]===n.target.metadata.shapeName});return r.length>0?r[0][t]:""},t.prototype.getShapeValue=function(n,t,i){for(var r=0;r<this.getShapeContainer().FieldInfos.length;r++)if(this.getShapeContainer().FieldInfos[r].UniqueColumnName===i)return this.drillLevelInfo.length>r?this.drillLevelInfo[r].selectedItem:n;return""},t.prototype.getItemValue=function(n,t){for(var e,r,o,f,u=this.DataGroupInfo,i=0;i<u.FieldContainers.length;i++)for(e=u.FieldContainers[i],r=0;r<u.FieldContainers[i].FieldInfos.length;r++)o=e.FieldInfos[r],n===o.UniqueColumnName&&(f=t.target.metadata.location[n]);return f},t.prototype.renderMarkerCustomizeButton=function(n,t,i){var r=this.widgetHelper.getCurrentWidgetInstance(),f,e;if(BoldBIDashboard.isNullOrUndefined(n))f=this.designerInstance.element.find("#"+this.designerId+"_"+t+"_"+i.name).data("BoldBIDashboardCheckBox"),this.checkBoxEle=f.model.id,f.option("checked",!BoldBIDashboard.isNullOrUndefined(r.getBingMapProperties().ColorCustomization)),e=this.designerInstance.element.find("#"+this.designerId+"_"+t+"_"+i.name+"_MarkerCustomize"),r.getBingMapProperties().ColorCustomization?e.removeAttr("disabled"):e.attr("disabled","disabled"),this.propertyPanel.updateItemVisibility("BingMap","MarkerSettings","MarkerCustomize",i.isVisible);else{var u=BoldBIDashboard.buildTag("div","",{display:BoldBIDashboard.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designerId+"_"+t+"_"+i.name+"_container"}),l=BoldBIDashboard.buildTag("div","",{"margin-bottom":"15px",display:"inline-block",width:"190px"},{id:this.designerId+"_"+t+"_"+i.name+"_custom"}),o=BoldBIDashboard.buildTag("div","",{width:"435px","margin-top":"3px","margin-left":"15px",border:"0px solid","border-color":"red",display:"inline-block"},{id:this.designerId+"_"+t+"_"+i.name+"_button_container"});this.markerCustomizebutton=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-small","Customize",{width:"150px"},{id:this.designerId+"_"+t+"_"+i.name+"_MarkerCustomize",type:"button"});var s=BoldBIDashboard.buildTag("div","",{width:"435px","margin-top":"3px","margin-left":"15px",border:"0px solid","border-color":"red",display:"inline-block"},{id:this.designerId+"_"+t+"_"+i.name+"_checkbox_container"}),a=BoldBIDashboard.buildTag("div","",{width:"187px",float:"left","margin-left":"3px","margin-top":"5.5px"}),v=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily",this.locale.propertyPanel.formatting.colorSettings.advancedSettingText,{"margin-right":"10px","margin-bottom":"11px",display:"inline-block","font-size":"12px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",float:"right"},{id:this.designerId+"_"+t+"_"+i.name+"_custom_chkbox"}),h=BoldBIDashboard.buildTag("div.e-dbrd-axis-range-check-box-container","",{},{id:this.designerId+"_"+t+"_"+i.name+"_parent"}),c=BoldBIDashboard.buildTag("input","",{},{id:this.designerId+"_"+t+"_"+i.name,type:"checkbox"});h.append(c);c.BoldBIDashboardCheckBox({checked:!BoldBIDashboard.isNullOrUndefined(r.getBingMapProperties().ColorCustomization),change:this.bbdesigner$.proxy(this.checkChange,this),width:(this.propertyPanel.propertyPanelContainer.width()-33)*57/100-15+"px",cssClass:"e-designer-prop-checkbox"});s.append(a.append(v),h);o.append(l,this.markerCustomizebutton);u.append(s);u.append(o);n.append(u);this.markerCustomizebutton.off("click",this.bbdesigner$.proxy(this.onMarkerCustomize,this));this.markerCustomizebutton.on("click",this.bbdesigner$.proxy(this.onMarkerCustomize,this));this.updateMarkerCustomzieBtnVisiblity(this.markerCustomizebutton)}},t.prototype.checkChange=function(n){if(n.isInteraction){var t=this.widgetHelper.getCurrentWidgetInstance();this.checkBoxEle=n.model.id;n.isChecked&&BoldBIDashboard.isNullOrUndefined(t.getBingMapProperties().ColorCustomization)?(t.onMarkerCustomize(),this.markerCustomizebutton.removeAttr("disabled")):n.isChecked?BoldBIDashboard.isNullOrUndefined(t.getBingMapProperties().ColorCustomization)||this.markerCustomizebutton.removeAttr("disabled"):(this.markerCustomizebutton.attr("disabled","disabled"),t.getBingMapProperties().ColorCustomization=null,this.dataConfigurationInstance.postDraggedFields())}},t.prototype.onMarkerCustomize=function(){var n=this.widgetHelper.getCurrentWidgetInstance(),t=new ColorCustomization,i=new BoldBIDashboard.DashboardDesignerUtility.AdvancedColorCustomization(this.designerInstance),r,u;i.dialogObj._titleText.text("Marker Customization");r=["Rule"];BoldBIDashboard.isNullOrUndefined(n.getBingMapProperties().ColorCustomization)?t.Type=ColorCustomizationType.Rule:t=this.bbdesigner$.extend(!0,{},n.getBingMapProperties().ColorCustomization);u={colorCustomizationObj:t,DataGroupInfo:n.dataGroupInfo,colorFields:n.markerFields,colorTypeCollection:r,controlType:"BingMap"};i.populateUI(u,n,"updateMarkerCustomizeSettings")},t.prototype.updateMarkerCustomizeSettings=function(n,t){var r=this.widgetHelper.getCurrentWidgetInstance(),i;t?BoldBIDashboard.isNullOrUndefined(this.getBingMapProperties().ColorCustomization)&&(i=this.designerInstance.element.find("#"+this.checkBoxEle).data("BoldBIDashboardCheckBox"),i.option("checked",!1),this.markerCustomizebutton.attr("disabled","disabled")):(r.getBingMapProperties().ColorCustomization=n,this.designerInstance.modules.serialization.notifyChange(),this.dataConfigurationInstance.postDraggedFields())},t.prototype.getMarkerFields=function(){return[{Name:WidgetProperty.Icon,DisplayName:"Marker Shape",ColorPicker:ColorSetColorPickers.IconColorPicker,IncludeIconAlignment:!1},{Name:WidgetProperty.FillColor,DisplayName:"Marker Color",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.MarkerSize,DisplayName:"Marker Size"}]},t.prototype.getMinMaxValues=function(n,t){for(var i=[],r=0;r<n.length;r++)i.push(n[r][t]);this.maxShapeValue=parseFloat(Math.max.apply(null,i).toFixed(2));this.minShapeValue=parseFloat(Math.min.apply(null,i).toFixed(2))},t.prototype.getColorCustomization=function(){return this.getBingMapProperties().ColorCustomization},t.prototype.getShapeColorCustomization=function(){return this.getBingMapProperties().ShapeColorCustomization},t.prototype.updateMarkerCustomzieBtnVisiblity=function(n){BoldBIDashboard.isNullOrUndefined(this.getBingMapProperties().ColorCustomization)?n.attr("disabled","disabled"):n.removeAttr("disabled")},t.prototype.clearFilter=function(n){BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this);this.getBingMapProperties().SelectedFilterValues=[];this.isCurrentMaster=!1;this.designerInstance.modules.serialization.notifyChange();BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName)},t.prototype.createFieldContaierForUI=function(n,t,i,r,u,f){var e=new BoldBIDashboard.Dashboard.FieldContainerForUI;return e.Name=n,e.DisplayName=t,e.ContainerType=i,e.Visibility=r,BoldBIDashboard.isNullOrUndefined(u)||(e.CategoryCount=u),BoldBIDashboard.isNullOrUndefined(f)||(e.IsDrillSection=!0),n==="HiddenColumn"&&(e.QueryOrder=0,e.ShowDescriptionIcon=!0,e.TooltipText=this.locale.fieldContainer.hiddenColumnMessage.bingMap),e},t.prototype.getValueContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Value")},t.prototype.getShapeContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Shape")},t.prototype.getShapeTooltipContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"ShapeTooltip")},t.prototype.getLatitudeContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Latitude")},t.prototype.getLongitudeContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Longitude")},t.prototype.getMarkerContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Name")},t.prototype.getAddressContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Address")},t.prototype.getPostalCodeContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"PostalCode")},t.prototype.getMarkerImageContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"MarkerImage")},t.prototype.getHiddenColumnContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"HiddenColumn")},t.prototype.hideWidgetNotConfigured=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this)},t.prototype.dispose=function(){this.map&&(this.map.entities.clear(),this.map.dispose(),this.map=null);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.BingMap);n.prototype.dispose.call(this)},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.BingMapItem",InternalBingMapReportItem,window);BoldBIDashboard.DashboardDesignerUtility.BingMapItem.prototype.initialize();__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalLabelReportItem=function(n){function t(t){var i=n.call(this,t,"Label","e-label-item")||this;return i.fontColor="#000000",i.previousContent="<p><span><\/span><\/p>",i.textHighlightColor="None",i.editorManager=null,i.toolBar=null,i.labelParameter=null,i.propertyValue=new TextStyleProperties,i.isTextEdit=!1,i.isMouseUp=!1,i.textRange=null,i.labelSelection=null,i.textDecoration="None",i.textAlignment="Left",i.fontWeight="Normal",i.fontStyle="Normal",i.fontSize="12px",i.fontFamily="Heebo",i.locale=null,i.browserInfo=BoldBIDashboard.browserInfo(),i.bbdesigner$=i.designerInstance.bbdesigner$,i.widgetJson=new LabelProperties(t),i.locale=t.getLocalizationContent(),i.ShowSubtitle=!1,i.widgetJson.ContainerSettings.ShowHeader=!1,i.designerId=i.designerInstance._id,i.propertyPanel=t.modules.propertyPanel,i.labelParameter=t.modules.labelParameter,i.toolBar=i.designerInstance.rptToolbar,i.eventHelper=new BoldBIDashboard.Dashboard.DesignerEventHelper,i.EventHelper.addListener(BoldBIDashboard.Dashboard.Module.designPanel,BoldBIDashboard.Dashboard.EventType.mouseUp),i.isVisualWidget=!1,i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.miscellaneous,GroupId:"764ccc8f-f006-46ab-aef5-68973d12d2a6",Items:[{id:"5c5fbab6-55a5-477f-836d-c6d145d06ce9",widgetName:"Label",widgetDisplayName:n.itemPanel.widgetTitle.label,cssClass:"bbi-widgeticon bbi-designer-widget-textbox",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.LabelItem",searchCategory:["label","miscellaneous"],widgetconfiginfo:null,useIconTemplate:!1,hide:!0,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.label,description:n.itemPanel.widgetDescription.labelDesc,dataRequirement:n.itemPanel.widgetDataRequirements.labelDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.LabelProperties",minColSpan:2,minRowSpan:2}]};BoldBIDashboardDesigner.widgetItems.push(t)},t.prototype.init=function(n,t){this.setContainerDefaultProperties();this.renderLabelItem(t);this.IsRendered=!0},t.prototype.dispose=function(){this.labelItemDispose();n.prototype.dispose.call(this)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);this.updateLabelSize()},t.prototype.getMobileViewHeight=function(){return 2*this.designPanelInstance.cellHeight},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t)},t.prototype.getJson=function(){return this.widgetJson.ContainerSettings.ShowHeader=!1,this.widgetJson},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateLabelItemPropertyChange(n,t,i,r)},t.prototype.applyWidgetTheme=function(){BoldBIDashboard.isNullOrUndefined(this.labelDiv)||this.labelDiv.css("background",this.designerInstance.modules.themeHelper.getWidgetTileBackground(null))},t.prototype.refresh=function(){},t.prototype.getPropertyPanelItems=function(){return this.getPropertyPanelForLabel()},t.prototype.canUseWidgetAsMaster=function(){return!1},t.prototype.getSettingsButtonIcon=function(){return{className:"bbi-dashboarddesigner-label-editor bbi-dashboarddesigner-selection-edit e-moveicon bbi-toolbarfonticonbasic",pathLength:2}},t.prototype.onWidgetUnSelect=function(){this.designPanelInstance.selectedReportItems[0].hasClass("e-label-item")&&this.disableLabelEdit()},t.prototype.onWidgetSettingsIconClick=function(n){BoldBIDashboard.isNullOrUndefined(n.handled)||BoldBIDashboard.isNullOrUndefined(n.currentTarget)||(n.currentTarget.hasClass("bbi-dashboarddesigner-selection-edit")||n.currentTarget.parent()&&n.currentTarget.parent().hasClass("bbi-dashboarddesigner-selection-edit")?(n.handled=!0,this.enableLabelEdit()):(n.currentTarget.hasClass("bbi-dashboarddesigner-selection-ok")||n.currentTarget.parent()&&n.currentTarget.parent().hasClass("bbi-dashboarddesigner-selection-ok"))&&(n.hanlded=!0,this.disableLabelEdit()))},t.prototype.designerEventListener=function(n,t,i){return this.textSelectionChange(i),!1},t.prototype.updateWidgetSettings=function(){this.scrollerRefresh()},t.prototype.renderLabelItem=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));this.renderLabelElement();this.openLabelItem();!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.disableLabelEdit();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Label)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.renderLabelElement=function(){this.bbdesigner$(this.contentContainer).removeClass("e-dashboardviewer");this.labelDiv=BoldBIDashboard.buildTag("div.e-labelitem","",{"box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box",background:this.designerInstance.modules.themeHelper.getWidgetTileBackground(null)},{id:this.designerId+"labelDiv"+this.widgetJson.UniqueName});this.labelContent=BoldBIDashboard.buildTag("div.bbi-label-element","",{id:this.designerId+"labelContent"+this.widgetJson.UniqueName,spellcheck:"false"});this.scrollLabelDiv=BoldBIDashboard.buildTag("div.e-scroll-Label","",{id:this.designerId+"scrollDiv"+this.widgetJson.UniqueName});this.scrollLabelDiv.css({width:this.labelDiv.width(),height:this.labelDiv.height()});var n=this.bbdesigner$(document.createElement("p")),t=this.getSpanTag();n.css("margin-top","0px");n.append(t);this.labelContent.append(n);this.contentContainer.append(this.labelDiv);this.controlContainer.data("widgetInstance",this);this.labelDiv.append(this.scrollLabelDiv);this.scrollLabelDiv.append(this.labelContent);this.contentContainer.css({padding:"0px"});this.wireEvents();BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||(this.editorManager=new BoldBIDashboard.DashboardDesignerUtility.EditorManager(this.designerInstance,this.labelContent));this.scrollLabelDiv.BoldBIDashboardScroller({height:this.labelDiv.height(),width:this.labelDiv.width(),autoHide:!0,enableTouchScroll:!0,scrollerSize:this.designerInstance.scrollerSize.scrollSize})},t.prototype.wireEvents=function(){this.labelContent.bind("keydown",this.bbdesigner$.proxy(this.onKeyDown,this));this.labelContent.bind("keyup",this.bbdesigner$.proxy(this.onKeyUp,this));this.labelContent.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseDown,this.bbdesigner$.proxy(this.onMouseDown,this));this.labelContent.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseUp,this.bbdesigner$.proxy(this.onMouseUp,this));this.labelContent.bind("focusin",this.bbdesigner$.proxy(this.onFocusIn,this));this.labelContent.bind("focusout",this.bbdesigner$.proxy(this.onFocusOut,this))},t.prototype.openLabelItem=function(){this.openParagraph();this.previousContent=this.labelContent[0].innerHTML;this.scrollerRefresh()},t.prototype.openParagraph=function(){var e,t,r,u,o,i;if(this.getLabelProperties().LineCollection.length>0)for(this.labelContent.find("p").remove(),e=this.getLabelProperties().LineCollection.length,t=0;t<e;t++){for(r=this.bbdesigner$(document.createElement("p")),u=this.getLabelProperties().LineCollection[t].LineStyleProperties.LineTextAlignment,r.css({"text-align":u?u:this.textAlignment}),o=this.getLabelProperties().LineCollection[t].TextCollections[0].Text.length,i=0;i<o;i++){var f=this.bbdesigner$(document.createElement("span")),n=this.getLabelProperties().LineCollection[t].TextCollections[0].Text[i].TextStyle,v=n.FontFamily,s=n.FontColor?n.FontColor:this.fontColor,h=n.FontSize,c=n.FontStyle,l=n.FontWeight,a=n.TextDecoration,y=n.TextHighlightColor?n.TextHighlightColor:this.textHighlightColor;f.css({"white-space":"pre-wrap","font-family":v?n.FontFamily:this.fontFamily,color:s?s:this.fontColor,"font-size":h?h:this.fontSize,"font-style":c?this.getFontStyle(c):this.fontStyle,"font-weight":l?this.getFontWeight(l):this.fontWeight,"text-decoration":a?this.getTextDecoration(a):this.textDecoration,"background-color":y,height:this.fontSize});f.html(this.labelParameter.getResultantParameterString(this.getLabelProperties().LineCollection[t].TextCollections[0].Text[i].Content,null,!0));r.append(f)}this.labelContent.append(r)}},t.prototype.onMouseDown=function(){this.controlContainer.hasClass("bbi-selected-item")===!0&&this.setContentEditable()},t.prototype.onMouseUp=function(n){this.isMouseUp=!0;this.controlContainer.hasClass("bbi-selected-item")===!0&&this.isTextEdit&&this.textSelectionChange(n);this.isMouseUp=!1},t.prototype.onFocusIn=function(){this.labelContent.attr("contenteditable")==="true"&&(this.isTextEdit=!0,this.setContentEditable())},t.prototype.onFocusOut=function(){this.labelContent.attr("contenteditable")==="false"&&(this.isTextEdit=!1,this.updateElementFlow(),this.saveTextContent(this.previousContent,this.labelContent[0].innerHTML),this.controlContainer.hasClass("bbi-selected-item")===!1&&this.labelSelection&&this.labelSelection.removeAllRanges())},t.prototype.onKeyDown=function(n){var t,i,r;this.labelContent.find("p:first").css({margin:"0px"});this.labelContent.attr("contenteditable")==="true"&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0);n.ctrlKey&&n.keyCode===66&&(n.preventDefault(),t=this.propertyValue.FontWeight===FontWeight.Bold?FontWeight.Normal:FontWeight.Bold,this.updateSelectedFontWeight(t),this.propertyValue.FontWeight=t);n.ctrlKey&&n.keyCode===73&&(n.preventDefault(),i=this.propertyValue.FontStyle===FontStyle.Italic?FontStyle.Normal:FontStyle.Italic,this.updateSelectedFontStyle(i),this.propertyValue.FontStyle=i);n.ctrlKey&&n.keyCode===85&&(n.preventDefault(),r=this.propertyValue.TextDecoration===TextDecoration.Underline?TextDecoration.None:TextDecoration.Underline,this.updateSelectedTextDecoration(r),this.propertyValue.TextDecoration=r);n.ctrlKey&&n.keyCode===76&&(n.preventDefault(),this.updateSelectedTextHorizontalAlign(TextHorizontalAlignment.Left));n.ctrlKey&&n.keyCode===82&&(n.preventDefault(),this.updateSelectedTextHorizontalAlign(TextHorizontalAlignment.Right));n.ctrlKey&&n.keyCode===69&&(n.preventDefault(),this.updateSelectedTextHorizontalAlign(TextHorizontalAlignment.Center))},t.prototype.onKeyUp=function(n){if(this.labelContent.find("p:first").css({margin:"0px"}),this.textSelectionChange(n),n.keyCode===13&&this.labelSelection.focusNode.nodeName==="P"&&(n.preventDefault(),this.textRange.commonAncestorContainer.tagName==="P"&&this.bbdesigner$(this.textRange.commonAncestorContainer).prev().length>0&&this.bbdesigner$(this.textRange.commonAncestorContainer).prev().text().length===0)){var t=this.bbdesigner$(this.textRange.commonAncestorContainer).prev().html();this.bbdesigner$(this.textRange.commonAncestorContainer).html(t)}n.keyCode===13&&this.labelSelection.focusNode.nodeName==="SPAN"&&this.bbdesigner$(this.labelSelection.focusNode).hasClass("bbi-dbrd-label-parameter-text")&&(this.labelSelection.focusNode.parentElement.innerHTML=this.labelSelection.focusNode.innerHTML);this.updateElementFlow();this.labelContent.attr("contenteditable")==="true"&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0);this.scrollerRefresh()},t.prototype.setContentEditable=function(){var t=this.bbdesigner$(window.top).height()-(this.labelDiv.offset().top+2),i=this.labelDiv.height(),n=this.labelContent[0].scrollHeight+6;n>t?(n=t,this.labelContent.css({"overflow-y":"auto"})):(this.labelContent.css({"overflow-y":"hidden"}),n=n-3,n<i&&(n=i))},t.prototype.scrollerRefresh=function(){if(!BoldBIDashboard.isNullOrUndefined(this.scrollLabelDiv)){var n=this.scrollLabelDiv.data("BoldBIDashboardScroller");BoldBIDashboard.isNullOrUndefined(n)||n.refresh()}this.labelContent.css({"background-color":this.getLabelProperties().LabelBackgroundColor})},t.prototype.enableLabelEdit=function(){this.labelContent.attr("contenteditable","true").addClass("e-editable-area");var n=this.controlContainer.find(".bbi-dashboarddesigner-label-editor");!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0&&(n.removeClass("bbi-dashboarddesigner-selection-edit").addClass("bbi-dashboarddesigner-selection-ok bbi-dbrd-designer-hoverable"),n.attr("data-tooltip",this.locale.designPanel.updateLabel));this.labelContent.focus();this.designPanelInstance.setPropertyPanelItem();this.propertyPanel.isVisible()||this.propertyPanel.showProperty(!0);this.scrollerRefresh()},t.prototype.disableLabelEdit=function(){this.labelContent.attr("contenteditable","false").removeClass("e-editable-area");var n=this.controlContainer.find(".bbi-dashboarddesigner-label-editor");!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0&&(n.removeClass("bbi-dashboarddesigner-selection-ok").addClass("bbi-dashboarddesigner-selection-edit bbi-dbrd-designer-hoverable"),n.attr("data-tooltip",this.locale.designPanel.editLabel),this.saveTextContent(this.previousContent,this.labelContent[0].innerHTML));this.designerInstance.modules.serialization.notifyChange();this.designPanelInstance.setPropertyPanelItem()},t.prototype.saveTextContent=function(n,t){this.previousContent!==t&&(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(this.labelContent[0].innerHTML=t),this.saveReportItem(),BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.TextBoxContentUpdate,"saveTextContent","e-label-item",this.designerId+"_"+this.widgetJson.UniqueName,[t,n],[n,t]),this.previousContent=t)},t.prototype.textSelectionChange=function(n){this.textRange=this.getRange();this.textRange&&(this.isMouseUp?n.which!==3&&this.changePropertyPanelValue():(n.keyCode===37||n.keyCode===38||n.keyCode===39||n.keyCode===40)&&this.changePropertyPanelValue())},t.prototype.changePropertyPanelValue=function(){var n;if(this.textRange){var i=this.textRange.commonAncestorContainer,t=i.parentNode,r=this.bbdesigner$(i).closest("span");r.length>0?n=r[0].style:this.labelContent.find("span:first-child").length>0?n=this.labelContent.find("span:first-child")[0].style:t&&t.style&&(n=t.style)}n.fontFamily!==this.propertyValue.FontFamily&&(this.propertyValue.FontFamily=n.fontFamily,this.setPropertyElement("BasicSettings","FontFamily",this.getPropertyPanelFontFamily()));n.color!==this.propertyValue.FontColor&&(this.propertyValue.FontColor=n.color,this.setPropertyElement("BasicSettings","FontColor",this.getPropertyPanelFontColor()));this.setPropertyElement("BasicSettings","BackgroundColor",this.getPropertyPanelBackgroundColor());n.backgroundColor!==this.propertyValue.TextHighlightColor&&(this.propertyValue.TextHighlightColor=n.backgroundColor,this.setPropertyElement("BasicSettings","TextHighlightColor",this.getPropertyPanelTextHighlightColor()));n.fontSize!==this.propertyValue.FontSize&&(this.propertyValue.FontSize=n.fontSize,this.setPropertyElement("BasicSettings","FontSize",this.getPropertyPaneltFontSize()));n.fontStyle!==this.propertyValue.FontStyle&&(this.propertyValue.FontStyle=n.fontStyle,this.setPropertyElement("BasicSettings","FontStyle",this.getPropertyPaneltFontStyle()));n.fontWeight!==this.propertyValue.FontWeight&&(this.propertyValue.FontWeight=n.fontWeight,this.setPropertyElement("BasicSettings","FontWeight",this.getPropertyPanelFontWeight()));n.textDecoration!==this.propertyValue.TextDecoration&&(this.propertyValue.TextDecoration=n.textDecoration,this.setPropertyElement("BasicSettings","TextDecoration",this.getPropertyPanelTextDecoration()));this.setPropertyElement("BasicSettings","TextHorizontalAlign",this.getPropertyPanelTextAlignment())},t.prototype.setPropertyElement=function(n,t,i,r){this.propertyPanel.canUpdate=!1;var f=this.propertyPanel.getPropertyElement(this.getPropertyPanelForLabel(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r),u=this.bbdesigner$.extend(!0,{},f);u.categoryName=n;this.propertyPanel.updatePropertyValue(u,"Label",i);this.propertyPanel.canUpdate=!0},t.prototype.updateElementFlow=function(){var n,t,u,i,r;if(this.labelContent.find("p").length<1&&this.labelContent.append("<p><span><\/span><\/p>"),this.browserInfo.name!=="msie"&&this.browserInfo.name!=="webkit")if(n=this.labelContent[0].childNodes[0],n.nodeName==="#text"||this.labelContent.find("p:first")&&this.labelContent.find("p:first")[0].childNodes[0].nodeName==="#text")n.nodeName==="#text"?(this.labelContent.find("p:first").find("span:first").length>0?(this.labelContent.find("p:first").find("span:first").text(n.textContent),this.bbdesigner$(n).remove()):(t=this.getSpanTag(),this.labelContent.find("p:first").append(t),this.labelContent.find("p:first").find("span:first").text(n.textContent),this.bbdesigner$(n).remove()),this.labelContent.find("p:first")[0].childNodes[0].nodeName==="BR"?this.bbdesigner$(this.labelContent.find("p:first")[0].childNodes[0]).remove():this.labelContent[0].childNodes[0].nodeName==="BR"&&this.bbdesigner$(this.labelContent[0].childNodes[0]).remove()):(n=this.labelContent.find("p:first")[0].childNodes[0],this.labelContent.find("p:first").find("span:first").length>0?(this.labelContent.find("p:first").find("span:first").text(n.textContent),this.bbdesigner$(this.labelContent.find("p:first")[0].childNodes[0]).remove()):(t=this.getSpanTag(),this.labelContent.find("p:first").append(t),this.labelContent.find("p:first").find("span:first").text(n.textContent),this.bbdesigner$(this.labelContent.find("p:first")[0].childNodes[0]).remove())),this.textRange||(this.textRange=this.getRange()),u=this.labelContent[0].firstChild?this.labelContent[0].firstChild:document.body,this.textRange.setStart(u,1),this.textRange.collapse(!0),this.labelSelection.addRange(this.textRange);else for(i=0;i<this.labelContent[0].childNodes.length;i++)r=this.labelContent[0].childNodes[i],r.tagName==="SPAN"&&this.labelContent.find("p").append(this.bbdesigner$(r));this.scrollLabelDiv.BoldBIDashboardScroller({height:this.labelDiv.height(),width:this.labelDiv.width(),scrollSize:this.designerInstance.scrollerSize.scrollSize})},t.prototype.getRange=function(){var n,t,i;return this.labelSelection=window.getSelection?window.getSelection():document.getSelection(),n=null,this.browserInfo.name==="msie"&&this.browserInfo.version==="8.0"?(t=this.saveSelection(),n=this.textRange&&t.offsetLeft===0&&t.offsetTop===0&&t.boundingHeight===0?this.textRange:t):this.labelSelection&&this.labelSelection.rangeCount>0&&this.labelSelection.getRangeAt(0)?n=this.labelSelection.getRangeAt(0):(n=document.createRange(),i=this.labelContent[0].firstChild?this.labelContent[0].firstChild:document.body,n.setStart(i,0),n.setEnd(i,0)),n},t.prototype.getSpanTag=function(){var n=this.bbdesigner$(document.createElement("span"));return n.css({"white-space":"pre-wrap","font-family":this.fontFamily,color:this.fontColor,"font-size":this.fontSize,"font-style":this.fontStyle,"font-weight":this.fontWeight,"text-decoration":this.textDecoration,"background-color":this.textHighlightColor,height:this.fontSize}),n},t.prototype.saveSelection=function(){var n=null,t;return this.labelSelection&&(this.labelSelection.createRange?n=this.labelSelection.createRange():this.labelSelection.rangeCount>0&&this.labelSelection.getRangeAt(0)?n=this.labelSelection.getRangeAt(0):this.labelSelection.anchorNode&&this.labelSelection.focusNode?(n=document.createRange(),n.setStart(this.labelSelection.anchorNode,this.labelSelection.anchorOffset),n.setEnd(this.labelSelection.focusNode,this.labelSelection.focusOffset),n.collapsed!==this.labelSelection.isCollapsed&&(n.setStart(this.labelSelection.focusNode,this.labelSelection.focusOffset),n.setEnd(this.labelSelection.anchorNode,this.labelSelection.anchorOffset))):(n=document.createRange(),t=this.labelContent[0].firstChild?this.labelContent[0].firstChild:document.body,n.setStart(t,0),n.setEnd(t,0))),n},t.prototype.saveReportItem=function(){for(var n,u,f,t,i=[],r=0;r<this.labelContent[0].childNodes.length;r++)i=this.getParents(this.labelContent[0].childNodes[r],i);if(n=i.length,n>this.getLabelProperties().LineCollection.length)for(u=n-this.getLabelProperties().LineCollection.length,t=0;t<u;t++)this.getLabelProperties().LineCollection.push(new LineProperties);else if(n>0&&n<this.getLabelProperties().LineCollection.length)for(f=this.getLabelProperties().LineCollection.length-n,t=f;t>0;t--)this.getLabelProperties().LineCollection.splice(this.getLabelProperties().LineCollection.length-1,1);this.saveLine(i)},t.prototype.getParents=function(n,t){var u,r,i;if(n.childNodes.length<1&&(n.tagName==="P"||n.tagName==="DIV"))t.push(n);else if(n.tagName==="P"||n.tagName==="DIV"||n.tagName==="LI")if(this.bbdesigner$("p ~ ul").length>0||this.bbdesigner$("p ~ ol").length>0)for(u=0;u<n.childNodes.length;u++)if(r=n.childNodes[u],r.tagName==="UL"||r.tagName==="OL")for(i=0;i<r.childNodes.length;i++)r.childNodes[i].tagName==="LI"&&t.push(n.childNodes[i]);else t.push(n);else t.push(n);else if(n.tagName==="UL"||n.tagName==="OL")for(i=0;i<n.childNodes.length;i++)n.childNodes[i].tagName==="LI"&&t.push(n.childNodes[i]);return t},t.prototype.saveLine=function(n){for(var u,h,c,f,l,i,a,s,v=n.length,e=0;e<v;e++){var r=n[e],t=this.getLabelProperties().LineCollection[e],o=[];for(i=0;i<r.childNodes.length;i++)o=this.getChildrens(r.childNodes[i],o);if(u=o.length,u>t.TextCollections.length)for(t.TextCollections.push(new TextCollectionProperties),h=u-t.TextCollections[0].Text.length,f=0;f<h;f++)t.TextCollections[0].Text.push(new TextProperties);else if(u<t.TextCollections.length)for(c=t.TextCollections[0].Text.length-(u>1?u:1),f=c;f>0;f--)t.TextCollections[0].Text.splice(t.TextCollections[0].Text.length-1,1);for(t.LineStyleProperties=new LineStyleProperties,l=BoldBIDashboard.DashboardUtil.isEmptyString(r.style.textAlign)?this.textAlignment:r.style.textAlign,t.LineStyleProperties.LineTextAlignment=this.getJsonTextAlignment(l),this.saveText(o,t),i=0;i<r.children.length;i++)a=r.children[i],s=r.children[i].innerText,a.innerHTML=this.labelParameter.isLabelParameterPresent(s,null)?this.labelParameter.getResultantParameterString(s,null,!0):s}},t.prototype.getChildrens=function(n,t){if(n.childNodes.length>0)for(var i=0;i<n.childNodes.length;i++)this.getChildrens(n.childNodes[i],t);else t.push(n);return t},t.prototype.saveText=function(n,t){for(var o,u,e,i,r,f=0;f<n.length;f++)o=n[f],u=t.TextCollections[0].Text[f],BoldBIDashboard.isNullOrUndefined(u)||(e=[],u.Content=o.textContent,e=this.getChildrenStyle(o,e),u.TextStyle=new TextStyleProperties,e.length>0&&(i=e[0],r={fontColor:BoldBIDashboard.DashboardUtil.isEmptyString(i.color)?this.fontColor:i.color,fontFamily:BoldBIDashboard.DashboardUtil.isEmptyString(i.fontFamily)?this.fontFamily:i.fontFamily,fontSize:BoldBIDashboard.DashboardUtil.isEmptyString(i.fontSize)?this.fontSize:i.fontSize,fontStyle:BoldBIDashboard.DashboardUtil.isEmptyString(i.fontStyle)?this.fontStyle:i.fontStyle,fontWeight:BoldBIDashboard.DashboardUtil.isEmptyString(i.fontWeight)?this.fontWeight:i.fontWeight,textDecoration:BoldBIDashboard.DashboardUtil.isEmptyString(i.textDecoration)?this.textDecoration:i.textDecoration,textHighlightColor:BoldBIDashboard.DashboardUtil.isEmptyString(i.backgroundColor)?this.textHighlightColor:i.backgroundColor},u.TextStyle.FontFamily=r.fontFamily,u.TextStyle.FontColor=r.fontColor.search("rgb")!==-1?this.getHexColor(r.fontColor):r.fontColor,u.TextStyle.FontSize=r.fontSize,u.TextStyle.FontStyle=this.getJsonFontStyle(r.fontStyle),u.TextStyle.FontWeight=this.getJsonFontWeight(r.fontWeight),u.TextStyle.TextDecoration=this.getJsonTextDecoration(r.textDecoration),u.TextStyle.TextHighlightColor=r.textHighlightColor==="None"?"None":r.textHighlightColor.search("rgb")!==-1?this.getHexColor(r.textHighlightColor):r.textHighlightColor))},t.prototype.getHexColor=function(n){return n=n.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),n&&n.length===4?("#"+("0"+parseInt(n[1],10).toString(16)).slice(-2)+("0"+parseInt(n[2],10).toString(16)).slice(-2)+("0"+parseInt(n[3],10).toString(16)).slice(-2)).toUpperCase():""},t.prototype.getChildrenStyle=function(n,t){if(n.nodeName==="#text"&&n.parentNode.tagName==="SPAN")while(n.parentNode&&n.parentNode.tagName==="SPAN")this.bbdesigner$(n).hasClass("bbi-dbrd-label-parameter-text")?t.unshift(n.parentNode.style):t.push(n.parentNode.style),n=n.parentNode;else n.tagName==="SPAN"?t.push(n.style):(t.push(n.parentNode.style),n.parentNode.tagName==="EM"||n.parentNode.tagName==="I"?t[0].fontStyle="italic":n.parentNode.tagName==="STRONG"||n.parentNode.tagName==="B"?t[0].fontWeight="bold":n.parentNode.tagName==="U"?t[0].textDecoration="underline":(n.parentNode.tagName==="STRIKE"||n.parentNode.tagName==="S")&&(t[0].textDecoration="line-through"));return t},t.prototype.updateLabelItemPropertyChange=function(n,t,i,r){var u=!1;this.textRange||(this.labelContent.focus(),this.textRange=this.getRange(),this.textRange.setStart(this.labelContent[0].firstChild,0),this.textRange.setEnd(this.labelContent[0].firstChild,0),this.labelSelection.removeAllRanges(),this.labelSelection.addRange(this.textRange));this.isTextEdit=!0;switch(n){case"Name":this.widgetJson.UniqueName=i;this.getLabelProperties().Name=i;break;case"FontColor":this.updateSelectedFontColor(i);this.propertyValue.FontColor=i;break;case"BackgroundColor":this.updateSelectedBackgroundColor(i);break;case"TextHighlightColor":i=this.textRange.startOffset===this.textRange.endOffset?"None":i;this.updateSelectedTextHighlightColor(i);this.propertyValue.TextHighlightColor=i;break;case"FontFamily":this.updateSelectedFontFamily(i);this.propertyValue.FontFamily=i;break;case"FontSize":this.updateSelectedFontSize(i);this.propertyValue.FontSize=i;break;case"FontWeight":this.updateSelectedFontWeight(i);this.propertyValue.FontWeight=i;break;case"FontStyle":this.updateSelectedFontStyle(i);this.propertyValue.FontStyle=i;break;case"TextDecoration":this.updateSelectedTextDecoration(i);this.propertyValue.TextDecoration=i;break;case"TextHorizontalAlign":this.updateSelectedTextHorizontalAlign(i);break;default:u=!0}this.designerInstance.element.find("#"+this.designerId+"LabelContent"+this.getLabelProperties().Name+"span:empty").remove();this.textRange=this.getRange();this.focus();u||BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-label-item",this.designerId+"_"+this.widgetJson.UniqueName,[n,i,t,r],[n,t,i,r])},t.prototype.focus=function(){this.labelContent.focus();this.restoreSelection()},t.prototype.restoreSelection=function(){this.labelSelection||(this.labelSelection=window.getSelection?window.getSelection():document.getSelection());this.textRange&&(this.labelSelection?(this.labelSelection.removeAllRanges(),this.labelSelection.addRange(this.textRange)):this.textRange.select&&this.textRange.select())},t.prototype.getLabelProperties=function(){return this.getJson()},t.prototype.updateSelectedFontFamily=function(n){this.editorManager.execCommand(ExecCommand.Fontname,n,this.textRange)},t.prototype.updateSelectedFontColor=function(n){this.editorManager.execCommand(ExecCommand.Forecolor,n,this.textRange)},t.prototype.updateSelectedBackgroundColor=function(n){this.labelContent.css({"background-color":n});this.getLabelProperties().LabelBackgroundColor=n},t.prototype.updateSelectedTextHighlightColor=function(n){this.editorManager.execCommand(ExecCommand.Backgroundcolor,n,this.textRange)},t.prototype.updateSelectedFontSize=function(n){this.editorManager.execCommand(ExecCommand.Fontsize,n+"px",this.textRange)},t.prototype.updateSelectedFontStyle=function(n){var t=this.getFontStyle(n);this.editorManager.execCommand(ExecCommand.Fontstyle,t,this.textRange)},t.prototype.updateSelectedFontWeight=function(n){var t=this.getFontWeight(n);this.editorManager.execCommand(ExecCommand.Fontweight,t,this.textRange)},t.prototype.updateSelectedTextDecoration=function(n){var t=this.getTextDecoration(n);this.editorManager.execCommand(ExecCommand.Textdecoration,t,this.textRange)},t.prototype.updateSelectedTextHorizontalAlign=function(n){var t=this.getTextAlignment(n);this.editorManager.execCommand(ExecCommand.TextAlign,t,this.textRange)},t.prototype.getFontStyle=function(n){var t="";switch(n){case"Normal":t="normal";break;case"Italic":t="italic"}return t},t.prototype.getJsonFontWeight=function(n){var t;switch(n){case"normal":t="Normal";break;case"bold":t="Bold";break;default:t="Normal"}return t},t.prototype.getJsonFontStyle=function(n){var t="Default";switch(n){case"italic":t="Italic";break;case"normal":t="Normal";break;default:t="Normal"}return t},t.prototype.getJsonTextDecoration=function(n){var t;switch(n){case"none":t="None";break;case"underline":t="Underline";break;default:t="None"}return t},t.prototype.getTextDecoration=function(n){var t="";switch(n){case"None":t="none";break;case"Underline":t="underline"}return t},t.prototype.getJsonTextAlignment=function(n){var t;switch(n){case"left":t="Left";break;case"right":t="Right";break;case"center":t="Center";break;default:t="Left"}return t},t.prototype.getTextAlignment=function(n){var t="";switch(n){case"Left":t="left";break;case"Right":t="right";break;case"Center":t="center"}return t},t.prototype.getFontWeight=function(n){var t="";switch(n){case"Normal":t="normal";break;case"Bold":t="bold";break;default:t="normal"}return t},t.prototype.getPropertyPanelForLabel=function(){var n=!this.labelContent.hasClass("e-editable-area");return{Header:this.widgetJson.UniqueName,Type:"Label",Items:[{CategoryName:"Basic Settings",Items:[{name:"FontFamily",displayName:"Font Family",value:this.getPropertyPanelFontFamily(),itemType:"dropdown",valueList:BoldBIDashboard.DashboardUtil.getFontNames(),isDisable:n},{name:"FontColor",displayName:"Font Color",value:this.getPropertyPanelFontColor(),itemType:"color",isDisable:n},{name:"BackgroundColor",displayName:"Background Color",value:this.getPropertyPanelBackgroundColor(),itemType:"color",isDisable:n},{name:"TextHighlightColor",displayName:"Text Highlight Color",value:this.getPropertyPanelTextHighlightColor(),itemType:"color",isDisable:n},{name:"FontSize",displayName:"Font Size",value:this.getPropertyPaneltFontSize(),minimum:8,maximum:100,unitType:"pixel",itemType:"float",decimalPlaces:0,isDisable:n},{name:"FontStyle",displayName:"Font Style",value:this.getPropertyPaneltFontStyle(),itemType:"dropdown",valueList:["Normal","Italic"],isDisable:n},{name:"FontWeight",displayName:"Font Weight",value:this.getPropertyPanelFontWeight(),itemType:"dropdown",valueList:["Normal","Bold"],isDisable:n},{name:"TextDecoration",displayName:"Text Decoration",value:this.getPropertyPanelTextDecoration(),itemType:"dropdown",valueList:["None","Underline"],isDisable:n},{name:"TextHorizontalAlign",displayName:"Text Horizontal Alignment",value:this.getPropertyPanelTextAlignment(),itemType:"dropdown",valueList:["Left","Center","Right"],isDisable:n}]}]}},t.prototype.getPropertyPanelFontFamily=function(){var n="Roboto";if(this.labelContent.attr("contenteditable")==="true"&&this.textRange){var i=this.textRange.commonAncestorContainer,t=i.parentNode,r=this.bbdesigner$(i).closest("span");r.length>0?n=r.css("font-family"):this.labelContent.find("span:first-child").length>0?n=this.labelContent.find("span:first-child").css("font-family"):t&&t.style&&(n=t.style.fontFamily)}return n=n.replace(/['"]+/g,""),n=BoldBIDashboard.DashboardUtil.getFontNames().toString().search(n)!==-1?n:"Roboto",BoldBIDashboard.DashboardUtil.isEmptyString(n)?"Roboto":n},t.prototype.getPropertyPanelFontColor=function(){var n="#000000";if(this.labelContent.attr("contenteditable")==="true"&&this.textRange){var i=this.textRange.commonAncestorContainer,t=i.parentNode,r=this.bbdesigner$(i).closest("span");r.length>0?n=r.css("color"):this.labelContent.find("span:first-child").length>0?n=this.labelContent.find("span:first-child").css("color"):t&&t.style&&(n=t.style.color)}return n.search("rgb")!==-1&&(n=this.getHexColor(n)),!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.DashboardUtil.isEmptyString(n)?n:"#000000"},t.prototype.getPropertyPanelBackgroundColor=function(){var n=this.getLabelProperties().LabelBackgroundColor;return this.labelContent.attr("contenteditable")==="true"&&this.textRange&&(n=this.bbdesigner$(this.labelContent).css("background-color")),n.search("rgb")!==-1&&(n=this.getHexColor(n)),!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.DashboardUtil.isEmptyString(n)?n:"#ffffff"},t.prototype.getPropertyPanelTextHighlightColor=function(){var n="#f5ea14";return this.labelContent.attr("contenteditable")==="true"&&this.textRange&&(n=BoldBIDashboard.DashboardUtil.isEmptyString(this.propertyValue.TextHighlightColor)?"#f5ea14":this.propertyValue.TextHighlightColor),n.search("rgb")!==-1&&(n=this.getHexColor(n)),n},t.prototype.getPropertyPaneltFontSize=function(){var n=12;if(this.labelContent.attr("contenteditable")==="true"&&this.textRange){var i=this.textRange.commonAncestorContainer,t=i.parentNode,r=this.bbdesigner$(i).closest("span");r.length>0?n=r.css("font-size"):this.labelContent.find("span:first-child").length>0?n=this.labelContent.find("span:first-child").css("font-size"):t&&t.style&&(n=t.style.fontSize)}return n?n:12},t.prototype.getPropertyPaneltFontStyle=function(){var n="Normal";if(this.labelContent.attr("contenteditable")==="true"&&this.textRange){var i=this.textRange.commonAncestorContainer,t=i.parentNode,r=this.bbdesigner$(i).closest("span");r.length>0?n=this.getJsonFontStyle(r.css("font-style")):this.labelContent.find("span:first-child").length>0?n=this.getJsonFontStyle(this.labelContent.find("span:first-child").css("font-style")):t&&t.style&&(n=this.getJsonFontStyle(t.style.fontStyle))}return n},t.prototype.getPropertyPanelFontWeight=function(){var n="Normal";if(this.labelContent.attr("contenteditable")==="true"&&this.textRange){var i=this.textRange.commonAncestorContainer,t=i.parentNode,r=this.bbdesigner$(i).closest("span");r.length>0?n=this.getJsonFontWeight(r[0].style.fontWeight):this.labelContent.find("span:first-child").length>0?n=this.getJsonFontWeight(this.labelContent.find("span:first-child").css("font-weight")):t&&t.style&&(n=this.getJsonFontWeight(t.style.fontWeight))}return n},t.prototype.getPropertyPanelTextDecoration=function(){var n="None";if(this.labelContent.attr("contenteditable")==="true"&&this.textRange){var i=this.textRange.commonAncestorContainer,t=i.parentNode,r=this.bbdesigner$(i).closest("span");r.length>0?n=this.getJsonTextDecoration(r[0].style.textDecoration):this.labelContent.find("span:first-child").length>0?n=this.getJsonTextDecoration(this.labelContent.find("span:first-child").css("text-decoration")):t&&t.style&&(n=this.getJsonTextDecoration(t.style.textDecoration))}return n},t.prototype.getPropertyPanelTextAlignment=function(){var n="Left",u;if(this.labelContent.attr("contenteditable")==="true"&&this.textRange){var t=this.textRange.commonAncestorContainer,i=t.parentNode,r=this.bbdesigner$(t).closest("p");r.length>0?n=this.getJsonTextAlignment(r.css("text-align")):i&&(u=this.bbdesigner$(i).closest("p").css("text-align"),n=this.getJsonTextAlignment(u))}return n},t.prototype.updateLabelSize=function(){this.scrollLabelDiv.BoldBIDashboardScroller({height:this.labelDiv.height(),width:this.labelDiv.width(),scrollSize:this.designerInstance.scrollerSize.scrollSize});this.labelContent.css({"background-color":this.getLabelProperties().LabelBackgroundColor})},t.prototype.setContainerDefaultProperties=function(){var t=n.prototype.getContainerSettings.call(this);t.EnableImageExport=t.EnablePdfExport=t.EnableExcelExport=t.EnableCsvExport=!1;t.ShowMaximize=!1},t.prototype.labelItemDispose=function(){this.editorManager=null;this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Label)},t}(BoldBIDashboard.Dashboard.Widget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.LabelItem",InternalLabelReportItem,window);BoldBIDashboard.DashboardDesignerUtility.LabelItem.prototype.initialize(),function(n){n.Normal="Normal";n.Bold="Bold"}(FontWeight||(FontWeight={})),function(n){n.Normal="Normal";n.Italic="Italic"}(FontStyle||(FontStyle={})),function(n){n.Underline="Underline";n.None="None"}(TextDecoration||(TextDecoration={})),function(n){n.Left="Left";n.Right="Right";n.Center="Center"}(TextHorizontalAlignment||(TextHorizontalAlignment={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalListBoxReportItem=function(n){function t(t){var i=n.call(this,t,"ListBox","e-listbox-item")||this;return i.allSpecialChar="&ZeroWidthSpace;",i.isRefreshed=null,i.isUserDisableAll=!1,i.isDefaultRendering=!1,i.isInitialLoad=null,i.listBoxObj=null,i.isdesignerModeChanged=!1,i.currentData=null,i.updateselectedItems=[],i.multiSelectionTimer=null,i.fieldName=null,i.locale=null,i.bbdesigner$=i.designerInstance.bbdesigner$,i.locale=t.getLocalizationContent(),i.widgetJson=new ListBoxProperties(t),i.widgetJson.FilterSettings.ActAsMasterWidget=!0,i.designerId=i.designerInstance._id,i.propertyPanel=t.modules.propertyPanel,n.prototype.initializeVirtualScrollSettings.call(i),i.isVisualWidget=!1,i}return __extends(t,n),t.prototype.getWidgetImage=function(){return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="0 0 324 208" version="1.1">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Listbox" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="List-Box" transform="translate(12.000000, 12.000000)" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero">            <rect id="Rectangle" x="52.4271845" y="0" width="247.572816" height="31.0894169" rx="2.18446602"/>            <rect id="Rectangle-Copy-4" x="52.4271845" y="152.486188" width="247.572816" height="31.0894169" rx="2.18446602"/>            <rect id="Rectangle-Copy-4-Copy" x="52.4271845" y="76.2430939" width="247.572816" height="31.0894169" rx="2.18446602"/>            <rect id="Rectangle-Copy" x="0" y="0" width="30.5825243" height="31.0894169"/>            <rect id="Rectangle-Copy-5" x="0" y="152.486188" width="30.5825243" height="31.0894169"/>            <rect id="Rectangle-Copy-5-Copy" x="0" y="76.2430939" width="30.5825243" height="31.0894169"/>        <\/g>    <\/g><\/svg>'},t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.filters,GroupId:"1093107b-a5c1-4bd3-83cb-ec6ccd40a031",Items:[{id:"47b55968-2261-47d0-95ff-67f7a676358b",widgetName:"ListBox",widgetDisplayName:n.itemPanel.widgetTitle.listBox,cssClass:"bbi-widgeticon bbi-designer-widget-listbox",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ListBoxItem",searchCategory:["listbox","filters"],widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.listBox,description:n.itemPanel.widgetDescription.listBoxDesc,dataRequirement:n.itemPanel.widgetDataRequirements.filtersDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ListBoxProperties",minRowSpan:3}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){this.setContainerDefaultProperties();this.renderListBox(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.listBoxElement)||(this.updateListBoxSize(),this.designerInstance.canApplyTheme()||this.designerInstance.isViewMode()||this.updateFontStyle())},t.prototype.update=function(n){this.VirtualScrollSettings.StartIndex=1;this.updateTitleSubtitleTheme();this.updateListBoxData(n);this.checkAllForWidgetAPIFromInitialization();this.designerInstance.canApplyTheme()||this.updateFontStyle();this.IsRendered=!0;this.updateThemeInWidget(this.designerInstance.isDarkTypeTheme())},t.prototype.canCombineRequest=function(){return!0},t.prototype.getListBoxFontSize=function(){return window.screen.width<1920?"12px":window.screen.width<3840?"16px":"32px"},t.prototype.updateFontStyle=function(){if(this.listBoxElement&&this.listBoxElement.length>0){var n=this.getListBoxFontSize(),t=this.listBoxElement.attr("style"),i="font-size:"+n+" !important; font-weight: 400 !important;";this.listBoxElement.attr("style",this.designerInstance.modules.themeHelper.getStyleString(t,i))}},t.prototype.applyWidgetTheme=function(n){this.updateTitleSubtitleTheme();this.updateThemeInWidget(n);this.updateListBoxSize()},t.prototype.updateThemeInWidget=function(n){var e,o,s;if(BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)){var f=this.designerInstance.modules.themeHelper.getListBoxDDLBackground(),h=this.designerInstance.modules.themeHelper.getListBoxDDLTextColor(),c=this.designerInstance.modules.themeHelper.getListBoxDDLHoverBackground(),l=this.designerInstance.modules.themeHelper.getListBoxDDLHoverTextColor(),a=this.designerInstance.modules.themeHelper.getListBoxDDLSelectionBackground(),v=this.designerInstance.modules.themeHelper.getListBoxDDLSelectionTextColor(),t=[],i=this.designerInstance.modules.themeHelper.getListBoxDDLFontText(),r=this.listBoxElement.attr("style"),u="background-color:"+f+" !important;\tfont-size: "+i.size+" !important;\tfont-family: "+i.family+" !important;\tfont-weight: "+i.weight+" !important;color:"+h+"!important;";this.listBoxElement.attr("style",this.designerInstance.modules.themeHelper.getStyleString(r,u));r=this.contentContainer.find(".e-ddl-popup").attr("style");u="background-color:"+f+" !important;";this.contentContainer.find(".e-ddl-popup").attr("style",this.designerInstance.modules.themeHelper.getStyleString(r,u));e=".e-dashboardviewer .e-listbox.e-listbox-dbrd-theme li";o="font-family: "+i.family+" !important;";t.push({key:e,value:o});var y=this.designerInstance.modules.themeHelper.getListBoxDDLHoverFontText(),p="\tbackground-color: "+c+" !important;\n\tcolor:"+l+"!important;\n"+y;t.push({key:".e-dashboardviewer .e-listbox.e-listbox-dbrd-theme .e-hover",value:p+""});var w=this.designerInstance.modules.themeHelper.getListBoxDDLSelectFontText(),b="\tbackground-color: "+a+" !important;\n\tcolor:"+v+"!important;\n"+w;t.push({key:".e-dashboardviewer .e-listbox.e-listbox-dbrd-theme .e-select",value:b+""});s=this.designerInstance._id+"_ListboxStyle";this.designerInstance.modules.themeHelper.createandAppendCustomStyle(s,t);this.listBoxElement.addClass("e-listbox-dbrd-theme");this.contentContainer.find(".e-ddl-popup").addClass("e-ddl-popup-dbrd-theme");this.designerInstance.modules.themeHelper.applyListBoxCheckBoxTheme(n,this.designerInstance._id+"_ListBoxCheckBoxStyle")}else BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this)},t.prototype.updateTitleSubtitleTheme=function(){var n=this.designerInstance.modules.themeHelper.getListBoxHeaderTitle(),t=this.designerInstance.modules.themeHelper.getListBoxHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getListProperties().ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.getFieldContainer=function(){var t=[];return t.push(this.generateFieldContainer("Column",FieldContainerType.Non_Numeric,1,0,!0,this.locale.fieldContainer.value)),t.push(this.generateFieldContainer("DisplayColumn",FieldContainerType.None,1,1,!1,this.locale.fieldContainer.displayColumn)),t.push(n.prototype.getFilterColumn.call(this)),t},t.prototype.onFieldSettingsClick=function(n,t){for(var i=0;i<t.length;i++)n.FieldActualType==="bbi-designer-dataset-datetime"&&t[i].Name==="RelativeDateFilter"&&(t[i].IsVisible=!1),n.FieldActualType==="bbi-designer-dataset-datetime"&&t[i].Name==="RelativeDateOptions"&&n.ContainerName==="Column"&&(t[i].IsVisible=!0,t[i].IsDisable=this.getListProperties().EnableMultiSelection),n.FieldActualType!=="bbi-designer-dataset-datetime"||t[i].Name==="RelativeDateOptions"||n.ContainerName!=="Column"||BoldBIDashboard.isNullOrUndefined(this.dataValues)||BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?n.FieldActualType==="bbi-designer-dataset-datetime"&&t[i].Name!=="RelativeDateOptions"&&n.ContainerName==="Column"&&!BoldBIDashboard.isNullOrUndefined(this.dataValues)&&BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)&&(t[i].IsDisable=!1):t[i].IsDisable=!0;return BoldBIDashboard.DashboardUtil.hideRenameMenuOption(t)},t.prototype.getJson=function(){return this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t)},t.prototype.getPropertyPanelItems=function(){return this.getListBoxPropertyItems()},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateListBoxProperties(n,t,i,r)},t.prototype.updateInitialSelection=function(){this.updateInitialSelectionForList()},t.prototype.clearFilter=function(n,t){this.getListProperties().SelectedFilterValues=[];BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this);this.designerInstance.modules.serialization.notifyChange();this.removeSelection();BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.doInteractionWithMasterFields(this.widgetJson,t)},t.prototype.getMobileViewHeight=function(){return this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.refresh=function(){var n=this.listBoxElement.data("BoldBIDashboardListBox");n.refresh()},t.prototype.dispose=function(){this.disposeListBox();n.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.locale.itemPanel.widgetDataRequiredMessage.listBoxDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.isFieldValid=function(n,t,i){return!(t===FieldContainerType[FieldContainerType.Non_Numeric]&&i==="Column"&&n)},t.prototype.onFieldDragDrop=function(n){return this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos[0].FilterInfo)&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos[0].FilterInfo.RelativeDateOptions)&&n.ContainerName==="DisplayColumn"?(this.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.relativeDatesAlert,this.locale.relativeDateMessages.relativeDatesExist,IconType.warning,AlertType.Alert,!1,""),!1):!0},t.prototype.getDefaultMeasureFormat=function(){var n=new MeasureFormatting;return n.Unit=NumberFormat.Ones,n},t.prototype.getMinMobileHeight=function(){return"125px"},t.prototype.renderListBox=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));this.renderListBoxElement();!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.ListBox)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.renderListBoxElement=function(){var n=this.designerId+"listboxitem"+this.widgetJson.UniqueName;this.listBoxItem=BoldBIDashboard.buildTag("div.e-listboxitem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder,overflow:"hidden"},{id:n});this.listBoxElement=BoldBIDashboard.buildTag("ul","",{margin:"0px",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designerId+"listboxelement"+this.widgetJson.UniqueName});this.contentContainer.append(this.listBoxItem);this.controlContainer.data("widgetInstance",this);this.listBoxItem.append(this.listBoxElement)},t.prototype.updateListBoxData=function(n){var i,r,u,f,e,t;this.dataValues=n;BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this);BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this);BoldBIDashboard.isNullOrUndefined(this.dataValues)||BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&(this.DataGroupInfo.FieldContainers[0].FieldInfos[0].DisplayName=this.designerInstance.modules.util.getDisplayName(this.DataGroupInfo.FieldContainers[0].FieldInfos[0])):this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&(this.DataGroupInfo.FieldContainers[0].FieldInfos[0].DisplayName="Relative Dates("+this.DataGroupInfo.FieldContainers[0].FieldInfos[0].Name+")");this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo);BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error?BoldBIDashboard.isNullOrUndefined(n.Message)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.widgetContainerHelper.showControlError(this,n)):n.noDataAvailable?(this.listBoxItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this)):(this.listBoxItem.show(),this.isNecessaryDataConfigured()&&(n.data!=="[]"||n.columnBindings!=="{}")&&(BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)||!n.isDataSetEmpty)?!BoldBIDashboard.isNullOrUndefined(n)&&n.data!=="[]"&&BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)&&(this.currentData=BoldBIDashboard.isNullOrUndefined(n.RelativeDates)?JSON.parse(n.data):JSON.parse(n.RelativeDates),this.currentData=this.convertBooleanToString(this.currentData),this.fieldName=Object.keys(this.currentData[0]),t=this.getColumns(this.currentData),this.fieldName=t[0].text,i={},i[t[0].text]=this.allSpecialChar+"All",BoldBIDashboard.isNullOrUndefined(t[0].value)||(i[t[0].value]=this.allSpecialChar+"All"),this.currentData.unshift(i),this.isDefaultRendering=!1,BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this)):(this.clearFilter(!1),this.allStateCheck(),BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this)));BoldBIDashboard.isNullOrUndefined(this.currentData)||(r=void 0,u=null,n.data!=="[]"&&(t=this.getColumns(this.currentData),r={id:t[0].id,text:t[0].text,tooltipText:t[0].text,value:t[0].value}),this.allowVirtualScrolling=this.dataValues.hasMoreRecords,BoldBIDashboard.isNullOrUndefined(this.listBoxElement.data("BoldBIDashboardListBox"))||(this.listBoxElement.data("BoldBIDashboardListBox").destroy(),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.isdesignerModeChanged=!1)),this.allowVirtualScrolling?(this.isInitialLoad=!0,this.listBoxElement.BoldBIDashboardListBox({dataSource:this.updateDataManager(),fields:r,showCheckbox:this.getListProperties().EnableMultiSelection,width:this.listBoxItem.width().toString(),height:"100%",allowVirtualScrolling:!0,virtualScrollMode:"continuous",itemRequestCount:this.VirtualScrollSettings.PageSize,checkChange:this.bbdesigner$.proxy(this.listBoxItemSelected,this),select:this.bbdesigner$.proxy(this.listBoxItemSelected,this),change:this.bbdesigner$.proxy(this.listBoxItemSelected,this),create:this.bbdesigner$.proxy(this.createScrollBar,this),actionBegin:this.bbdesigner$.proxy(this.listBoxActionBegin,this),actionComplete:this.bbdesigner$.proxy(this.selectResponseData,this),enableWordWrap:!1})):(this.allowVirtualScrolling=!1,f=null,BoldBIDashboard.isNullOrUndefined(f)||(f=null),n.data!=="[]"&&this.isNecessaryDataConfigured()?(t=this.getColumns(this.currentData),e={id:t[0].id,text:t[0].text,value:t[0].value,tooltipText:t[0].text}):e={id:"itemId",text:"itemName"},this.listBoxElement.BoldBIDashboardListBox({dataSource:this.currentData,fields:e,showCheckbox:this.getListProperties().EnableMultiSelection,width:this.listBoxItem.width().toString(),height:"100%",allowVirtualScrolling:this.allowVirtualScrolling,checkChange:this.bbdesigner$.proxy(this.listBoxItemSelected,this),select:this.bbdesigner$.proxy(this.listBoxItemSelected,this),change:this.bbdesigner$.proxy(this.listBoxItemSelected,this),create:this.bbdesigner$.proxy(this.createScrollBar,this),actionBegin:this.bbdesigner$.proxy(this.listBoxActionBegin,this),actionComplete:this.bbdesigner$.proxy(this.selectResponseData,this),enableWordWrap:!1})),u=this.listBoxObj=this.listBoxElement.data("BoldBIDashboardListBox"),this.bbdesigner$(window).off("resize",this.bbdesigner$.proxy(BoldBIDashboard.ListBox.prototype._OnWindowResize,this)),this.checkAllTextState(),this.allStateCheck(),this.getListProperties().SelectedFilterValues.length===0&&this.getListProperties().EnableMultiSelection&&u.checkAll(),this.isInitialLoad&&(this.isInitialLoad=!1),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.isdesignerModeChanged=!1));this.listBoxItem.find(".e-ddl-popup").css("border","none")},t.prototype.updateDataManager=function(){var n=this,t=new BoldBIDashboard.Adaptor(null).extend({processQuery:this.bbdesigner$.proxy(this.processQuery,this),beforeSend:function(t,i){n.designerInstance.beforeSendRequestForDataManager("OnDemandDataAction",i)},processResponse:this.bbdesigner$.proxy(this.processResponse,this)});return new BoldBIDashboard.DataManager({url:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,adaptor:new t,crossDomain:!0})},t.prototype.processQuery=function(t){var i;if(this.isInitialLoad||this.isRefreshed)return t.cancel=!0,this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.designpreview&&(this.isdesignerModeChanged=!0),!1;i=this.listBoxElement.data("BoldBIDashboardListBox");this.VirtualScrollSettings.StartIndex=i._listSize;var r=this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(this.DataGroupInfo),u=n.prototype.getWidgetInfo.call(this,this.DataGroupInfo,!0),f=this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design;return{url:t.dataSource.url,type:"POST",contentType:"application/json",data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.WidgetAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,fieldInfo:r,dataset:this.DataGroupInfo.DataSourceID,widgetInfo:u,request:AjaxRequest.Widget.toString(),selectedValuesList:this.masterFilterWindowInstance.getSelectedValuesForWidgetRequest(),paramCollection:this.designerInstance.modules.dynamicParameterPanel.getParameterCollection(),isDataSampleForViewMode:f})}},t.prototype.processResponse=function(n){var t,i;if(!BoldBIDashboard.isNullOrUndefined(n)&&!n.Error&&n.data!=="[]"){if(this.designerInstance.modules.resource.updateColorCodeInfo(n),t=this.listBoxElement.data("BoldBIDashboardListBox"),this.currentData=JSON.parse(n.data),this.currentData=this.convertBooleanToString(this.currentData),this.fieldName=Object.keys(this.currentData[0]),t.model.totalItemsCount=n.hasMoreRecords?t._listSize+this.currentData.length+1:t._listSize+this.currentData.length,this.updateselectedItems=[],this.getListProperties().EnableMultiSelection&&!this.isUserDisableAll)for(i=t._listSize;this.updateselectedItems.length<this.currentData.length;i++)this.updateselectedItems.push(i);return this.currentData}return[]},t.prototype.convertBooleanToString=function(n){for(var i,r=Object.keys(n[0]),t=0;t<r.length;t++)if(typeof n[0][r[t]]=="boolean")for(i=0;i<n.length;i++)n[i][r[t]]=n[i][r[t]].toString();return n},t.prototype.listBoxActionBegin=function(n){if(this.isInitialLoad){n.cancel=!0;var t=this.listBoxElement.data("BoldBIDashboardListBox");t.model.totalItemsCount=this.isdesignerModeChanged?this.listBoxObj._listSize+1:this.currentData.length+1;t.mergeData(this.currentData,!0)}},t.prototype.isAllTypeDataFilterSupported=function(){return!0},t.prototype.checkIsSelectAllForFilterAPI=function(n){for(var i=n.filters,t=0;t<i.length;t++)if(!BoldBIDashboard.isNullOrUndefined(i[t].values)&&i[t].values.length>0&&i[t].values[0].toUpperCase()==="ALL")return!0;return!1},t.prototype.processFilterInformation=function(n){var e=n.filters,u,f;if(this.getListProperties().EnableMultiSelection&&this.checkIsSelectAllForFilterAPI(n))this.checkAllwithWidgetsAPI(),this.getListProperties().SelectedFilterValues=[];else{var i=[],t=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],r=this.fieldTypeHandler(t),o=r[0],s=r[1],h=r[2],c=r[3];i=e[0].values;u=null;h?u={DateFormat:!BoldBIDashboard.isNullOrUndefined(this.dataValues)&&!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.RelativeDate):!BoldBIDashboard.isNullOrUndefined(t.DateBucketInfo)&&!BoldBIDashboard.isNullOrUndefined(t.DateBucketInfo.DateBucketFormat)?t.DateBucketInfo.DateBucketFormat:t.DateTimeFormat,DisplayFilterList:i,DateFilterList:i,DateFilterType:!BoldBIDashboard.isNullOrUndefined(this.dataValues)&&!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Exact):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Basic),SelectedRangeforRelativeFilter:!BoldBIDashboard.isNullOrUndefined(this.dataValues)&&!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?i:null}:c&&(u=i);f={FilterInfo:u,Action:o,IsStdDateTime:!1,IsMultiSelection:this.getListProperties().EnableMultiSelection,IsRange:!1};this.getListProperties().SelectedFilterValues=[];this.getListProperties().SelectedFilterValues=[this.masterFilterWindowInstance.updateInitialFiltersForFilterControls(t,this.widgetJson.UniqueName,s,f)]}return!0},t.prototype.checkAllwithWidgetsAPI=function(){BoldBIDashboard.isNullOrUndefined(this.listBoxElement)||(BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this),this.listBoxObj.checkAll())},t.prototype.checkAllForWidgetAPIFromInitialization=function(){var t,n,i;if(!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.widgets)&&this.designerInstance.model.widgets.length>0&&this.designerInstance.model.widgets[0].id!==""&&this.getJson().SelectedFilterValues.length===0)for(t=this.designerInstance.model.widgets,n=0;n<t.length;n++)if(t[n].id===this.getJson().UniqueId)for(i=0;i<t[n].filters.length;i++)if(t[n].filters.length>0&&t[n].filters[i].values.length>0&&t[n].filters[i].values[0].toUpperCase()==="ALL"){this.listBoxObj.checkAll();break}},t.prototype.fieldTypeHandler=function(n){var t=n.FieldActualType==="bbi-designer-dataset-string"||n.FieldActualType==="bbi-designer-dataset-number"||n.FieldActualType==="bbi-designer-dataset-boolean",i=n.FieldActualType==="bbi-designer-dataset-datetime"||n.FieldActualType==="bbi-designer-dataset-time",r=t?"bbi-designer-dataset-string":n.FieldActualType,u=t?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Include):i&&!BoldBIDashboard.isNullOrUndefined(this.dataValues)&&!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Range):i?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains);return[u,r,i,t]},t.prototype.listBoxItemSelected=function(n){var i=this,r,t,u;if(this.isDefaultRendering){r=!BoldBIDashboard.isNullOrUndefined(n.event)&&(this.getListProperties().EnableMultiSelection?n.event.isInteraction:n.isInteraction);r&&this.allStateCheck(n);return}if(!BoldBIDashboard.isNullOrUndefined(n.event)&&n.isInteraction){if(!BoldBIDashboard.isNullOrUndefined(n.item)&&n.item.length>0&&n.item.attr("id").indexOf(this.allSpecialChar)!==-1&&this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;if(this.allStateCheck(n))return;t=this;u=this.getListProperties().EnableMultiSelection?1500:0;BoldBIDashboard.isNullOrUndefined(this.multiSelectionTimer)||clearTimeout(this.multiSelectionTimer);this.multiSelectionTimer=setTimeout(function(){var o=[],s=t.listBoxElement.data("BoldBIDashboardListBox"),v=t.getDisplayColumnContainer(),r=t.DataGroupInfo.FieldContainers[0].FieldInfos[0],h=i.fieldTypeHandler(r),f=h[0],b=h[1],l=h[2],y=h[3],p=[],e=[],a,u,c,w;(BoldBIDashboard.isNullOrUndefined(s)||(a=t.getListProperties().EnableMultiSelection?s.getCheckedItems():s.getSelectedItems(),u=[],BoldBIDashboard.isNullOrUndefined(i.dataValues.RelativeDates)?a.forEach(function(n){u.push(n.value)}):(a.forEach(function(n){u.push(n.value.split(","))}),u=u.flat(Infinity)),t.getListProperties().EnableMultiSelection?(c=t.getInitialSelectionFilterValues(s,f,u,!BoldBIDashboard.isNullOrUndefined(v)&&v.FieldInfos.length>0),f=c.Action,y?(o=c.FilterInfo,f=o.length>0?f:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains)):l&&(e=c.FilterInfo,e=e.length>0?e.filter(function(n){return n.indexOf(t.allSpecialChar)===-1}):e,p=r.DateTimeFormat===DateTimeFormat.Default?t.masterFilterWindowInstance.getDateFilterList(e,!0):e,o={DateFormat:!BoldBIDashboard.isNullOrUndefined(r.DateBucketInfo)&&!BoldBIDashboard.isNullOrUndefined(r.DateBucketInfo.DateBucketFormat)?r.DateBucketInfo.DateBucketFormat:r.DateTimeFormat,DisplayFilterList:e,DateFilterList:p},f=e.length>0?f:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include))):(f=u.length>0?f:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains),o=l?o={DateFormat:BoldBIDashboard.isNullOrUndefined(i.dataValues.RelativeDates)?!BoldBIDashboard.isNullOrUndefined(r.DateBucketInfo)&&!BoldBIDashboard.isNullOrUndefined(r.DateBucketInfo.DateBucketFormat)?r.DateBucketInfo.DateBucketFormat:r.DateTimeFormat:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.RelativeDate),DisplayFilterList:u,DateFilterList:u,DateFilterType:BoldBIDashboard.isNullOrUndefined(i.dataValues.RelativeDates)?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Basic):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Exact),SelectedRangeforRelativeFilter:BoldBIDashboard.isNullOrUndefined(i.dataValues.RelativeDates)?null:n.data.text}:u)),w={FilterInfo:o,Action:f,IsStdDateTime:!1,IsMultiSelection:t.getListProperties().EnableMultiSelection,IsRange:!BoldBIDashboard.isNullOrUndefined(i.dataValues.RelativeDates)},t.designerInstance.triggerActionBeginForWidgetFilterInteraction(t))||(t.getListProperties().SelectedFilterValues=[t.masterFilterWindowInstance.updateInitialFiltersForFilterControls(r,t.widgetJson.UniqueName,b,w)],y&&o.length>0||l&&o.DateFilterList.length>0?(BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(i),t.designerInstance.modules.serialization.notifyChange(),t.designerInstance.triggerActionCompleteForWidgetFilterInteraction(t),t.masterFilterWindowInstance.doInteraction(t.widgetJson.UniqueName,i.masterFieldDetails(i.widgetJson))):(t.clearFilter(!0),t.designerInstance.modules.serialization.notifyChange()))},u);t.updateInterWidgetLinking()}},t.prototype.updateInterWidgetLinking=function(){!BoldBIDashboard.isNullOrUndefined(this.getJson().WidgetLink)&&this.getJson().WidgetLink.Enable&&this.designerInstance.modules.containerTypeWidgetHelper.doInterWidgetLinking(this,this.listBoxObj.model.selectedIndices[0]-1)},t.prototype.getInitialSelectionFilterValues=function(n,t,i,r){var s=[],f=[],e,o,u;if(this.isUserDisableAll){for(o=n.element.find("li[id!='"+this.allSpecialChar+"All'] .e-chkbox-wrap.e-widget[aria-checked=true]"),u=0;u<o.length;u++)r?f.push(o[u].parentElement.id):f.push(o[u].parentElement.textContent);t=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Include)}else{for(e=n.element.find("li[id!='"+this.allSpecialChar+"All'] .e-chkbox-wrap.e-widget[aria-checked=false]"),u=0;u<e.length;u++)r?f.push(e[u].parentElement.id):f.push(e[u].parentElement.textContent);t=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Exclude)}return s=f,{Action:t,FilterInfo:f}},t.prototype.selectResponseData=function(){var n=this.listBoxElement.data("BoldBIDashboardListBox");BoldBIDashboard.isNullOrUndefined(n)||(this.getListProperties().EnableMultiSelection&&(this.getListProperties().SelectedFilterValues.length!==0||this.isUserDisableAll?this.updateselectedItems.length>0&&n.checkItemsByIndices(this.updateselectedItems):n.checkAll()),BoldBIDashboard.DashboardUtil.updateScrollerVisibility(this.listBoxItem.attr("id")),this.updateInitialSelection())},t.prototype.allStateCheck=function(n){var t=this.listBoxElement.data("BoldBIDashboardListBox"),i=!1,u=!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.isInteraction)&&n.isInteraction,r,f;return!BoldBIDashboard.isNullOrUndefined(t)&&this.getListProperties().EnableMultiSelection&&(BoldBIDashboard.isNullOrUndefined(n)||t.getIndexByText(n.text)!==0||n.item.attr("id").indexOf(this.allSpecialChar)===-1?(r=this.listBoxElement.find("li .e-chkbox-wrap").filter("[aria-checked = false]"),r.length===1?(f=r.parent("li"),f.index()===0&&f.attr("id").indexOf(this.allSpecialChar)!==-1?(t.checkItemByIndex(0),this.clearFilter(u,n.event.isChecked),i=!0):t.uncheckItemByIndex(0)):r.length>1?t.uncheckItemByIndex(0):i=!0):(n.event.isChecked?(this.clearFilter(u,n.event.isChecked),t.checkAll(),this.isUserDisableAll=!1):BoldBIDashboard.isNullOrUndefined(n.event.isChecked)&&n.item.attr("data-content")==="&ZeroWidthSpace;All"?t.checkedStatus?(this.clearFilter(u,n.event.isChecked),t.checkAll(),this.isUserDisableAll=!1):(t.unCheckAll(),this.isUserDisableAll=!0):(t.unCheckAll(),this.isUserDisableAll=!0),i=!0)),i},t.prototype.getListBoxPropertyItems=function(){var t=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.getListProperties().FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo,this.widgetJson.ContainerSettings);return this.containerPropertyItem=t.containerProperties,t.propertyGridItems.Header=this.widgetJson.ContainerSettings.Title,t.propertyGridItems.SubTitle=this.widgetJson.ContainerSettings.SubTitle,t.propertyGridItems.Description=this.widgetJson.ContainerSettings.Description,t.propertyGridItems.Type=this.Type,t.interWidgetLinkProperty.Items[0].value=n.prototype.useExistingWidgetLinking.call(this),this.bbdesigner$.each(t.containerActionsProperty.Items,function(n,t){(t.name==="ShowMaximize"||t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ImageExport"||t.name==="PDFExport"||t.name==="ViewData"||t.name==="PinWidget")&&(t.isVisible=!1)}),this.bbdesigner$.each(t.containerSettingsProperty.Items,function(n,t){(t.name==="ShowWidgetBackgroundImage"||t.name==="WidgetBackgroundImageMode"||t.name==="WidgetBackgroundImageSource"||t.name==="WidgetBackgroundImageBrowse"||t.name==="WidgetBackgroundImageURL")&&(t.isVisible=!1)}),t.propertyGridItems.Items=[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"EnableMultiSelect",displayName:this.locale.propertyPanel.basicSettings.enableMultiSelect,value:this.getListProperties().EnableMultiSelection,itemType:"bool"}]},t.filterSettingsProperty,t.containerSettingsProperty,t.containerActionsProperty,t.interWidgetLinkProperty,t.noDataContainerActionsProperty],t.propertyGridItems},t.prototype.updateListBoxProperties=function(n,t,i,r){var o=!1,u,f,s,e;switch(n){case"Name":this.widgetJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,i);break;case"EnableMultiSelect":this.updateEnableMultiSelect(i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,i);break;default:o=!0}if(!o){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(u=this.designPanelInstance.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)s=u[f],s.attr("id")===this.listBoxItem.attr("id")&&(e=this.bbdesigner$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"Line",i));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-listbox",this.designerId+"_"+this.widgetJson.UniqueName,[n,i,t,r],[n,t,i,r])}},t.prototype.updateEnableMultiSelect=function(n){var t=this.listBoxElement.data("BoldBIDashboardListBox"),i;this.getListProperties().EnableMultiSelection=n;BoldBIDashboard.isNullOrUndefined(t)||(i=t.getSelectedItems(),t.option("showCheckbox",n),this.checkAllTextState(),n?i.length>0?t.checkItemByIndex(t.getIndexByText(i[0].text)):t.checkAll():this.clearFilter(),!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)&&n&&(this.DataGroupInfo.FieldContainers[0].FieldInfos[0].FilterInfo.RelativeDateOptions=null,this.clearFilter()))},t.prototype.updateInitialSelectionForList=function(){var n=this.listBoxElement.data("BoldBIDashboardListBox");if(this.getListProperties().SelectedFilterValues=this.getSelectedFilterValue(this.getListProperties().SelectedFilterValues),this.getListProperties().FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.model)&&this.getListProperties().SelectedFilterValues.length>0){var t=[],f=this.getDisplayColumnContainer(),u=!BoldBIDashboard.isNullOrUndefined(f)&&f.FieldInfos.length>0;t=this.getSelectedItems();var i=[],r=[],e=n.model.checkChange,o=n.model.select,s=n.model.change;n.model.checkChange=null;n.model.select=null;n.model.change=null;this.getListProperties().EnableMultiSelection?(t.SelectedItems.length>0?i=this.getFilterdItemIndices(u,t.SelectedDisplayItems,t.SelectedItems):t.UnselectedItems.length>0&&(r=this.getFilterdItemIndices(u,t.UnselectedDisplayItems,t.UnselectedItems)),i.length>0&&(n.unCheckAll(),n.checkItemsByIndices(i)),r.length>0&&(n.checkAll(),r.push(0),n.uncheckItemsByIndices(r))):(n.unSelectAll(),i=this.getFilterdItemIndices(u,t.SelectedDisplayItems,t.SelectedItems),n.selectItemByIndex(i[0]));n.model.checkChange=e;n.model.change=s;n.model.select=o;BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this)}else this.removeSelection(),BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this)},t.prototype.getSelectedFilterValue=function(n){if(n.length>0&&!BoldBIDashboard.isNullOrUndefined(n[0].InitialDateFilter)&&!BoldBIDashboard.isNullOrUndefined(n[0].InitialDateFilter.DateFilterList)&&n[0].InitialDateFilter.DateFilterList.length===1&&!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates))return[];if(n.length>0&&!BoldBIDashboard.isNullOrUndefined(n[0].InitialDateFilter)&&!BoldBIDashboard.isNullOrUndefined(n[0].InitialDateFilter.DateFilterList)&&n[0].InitialDateFilter.DateFilterList.length===2&&!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)){for(var t=0;t<this.currentData.length;t++)if(n[0].InitialDateFilter.DisplayDateFilterList[0]===this.currentData[t].value[0]&&n[0].InitialDateFilter.DisplayDateFilterList[1]===this.currentData[t].value[1])return n;return[]}return n},t.prototype.getSelectedItems=function(){var n={UnselectedItems:[],SelectedItems:[]},e,u,i,f,h;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0])&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos)&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0)for(u=0;u<this.getListProperties().SelectedFilterValues.length;u++){var r=this.getListProperties().SelectedFilterValues[u],o=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],s=o.FieldActualType==="bbi-designer-dataset-string"||o.FieldActualType==="bbi-designer-dataset-number"||o.FieldActualType==="bbi-designer-dataset-boolean",t=s?this.getFilterInformationList(r.InitialDimensionFilter.Text):r.InitialDateFilter.DisplayDateFilterList;if(!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates))for(i=1;i<this.currentData.length;i++)this.currentData[i].value[0]===t[0]&&this.currentData[i].value[1]===t[1]&&(e=this.currentData[i].text);f=BoldBIDashboard.isNullOrUndefined(e)?this.getDisplayFilterData(t,r.UniqueColumnName):e;h=s?r.InitialDimensionFilter.DimesnionFilterCondition:r.InitialDateFilter.DateFilterCondition;switch(h){case BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Exclude):case BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Exclude):n.UnselectedItems=t;n.UnselectedDisplayItems=f;break;case BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Include):case BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include):n.SelectedItems=t;n.SelectedDisplayItems=f;break;case BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Range):n.SelectedItems=t;n.SelectedDisplayItems=f}}return n},t.prototype.getFilterInformationList=function(n){for(var i=n,t=0;t<n.length;t++)i[t]=n[t].toString();return i},t.prototype.getFilterdItemIndices=function(n,t,i){var r=[],s,e,u,h,o,f;if(BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates))for(h=function(u){var e=o.bbdesigner$,s=o.listBoxElement.find("li").filter(function(){return n?e(this).attr("id")===i[u]:e(this).text()===t[u]}),f;BoldBIDashboard.isNullOrUndefined(s)||(f=s.index(),f!==-1&&r.indexOf(f)===-1&&r.push(f))},o=this,f=0;f<i.length;f++)h(f);else s=this.bbdesigner$,e=this.listBoxElement.find("li").filter(function(){return s(this).text()===t}),BoldBIDashboard.isNullOrUndefined(e)||(u=e.index(),u!==-1&&r.indexOf(u)===-1&&r.push(u));return r},t.prototype.updateControlContainerPadding=function(){BoldBIDashboard.isNullOrUndefined(this.getContainerSettings().WidgetPaddingInfo)&&(this.getContainerSettings().WidgetPaddingInfo=new WidgetPaddingInfo,this.getContainerSettings().WidgetPaddingInfo.AutoPadding=!0,this.getContainerSettings().WidgetPaddingInfo.Padding=this.getControlContainerPaddingValue());var t=this.controlContainer.find(".bbi-dbrd-control-container-wrapper"),n=4;t[0].style.padding=this.cellInfo.RowSpan>=6*n&&this.cellInfo.ColumnSpan>=6*n?"24px":this.cellInfo.RowSpan>=5*n&&this.cellInfo.ColumnSpan>=5*n?"16px":this.cellInfo.RowSpan>4*n&&this.cellInfo.ColumnSpan>4*n?"16px":this.cellInfo.RowSpan>=3*n&&this.cellInfo.ColumnSpan>=3*n?"12px":this.cellInfo.RowSpan>=2*n&&this.cellInfo.ColumnSpan>=2*n?"12px":"8px"},t.prototype.updateContainerPadding=function(){var n=4;this.contentContainer[0].style.padding=this.cellInfo.RowSpan>=6*n&&this.cellInfo.ColumnSpan>=6*n?"24px 0px 0px 0px":this.cellInfo.RowSpan>=5*n&&this.cellInfo.ColumnSpan>=5*n?"20px 0px 0px 0px":this.cellInfo.RowSpan>=4*n&&this.cellInfo.ColumnSpan>=4*n?"16px 0px 0px 0px":this.cellInfo.RowSpan>=3*n&&this.cellInfo.ColumnSpan>=3*n?"16px 0px 0px 0px":this.cellInfo.RowSpan>=2*n&&this.cellInfo.ColumnSpan>=2*n?"12px 0px 0px 0px":"8px 0px 0px 0px";this.controlContainer.find(".bbi-dbrd-control-header").css("padding-left","9px");this.controlContainer.find(".bbi-dbrd-control-header").addClass("e-dbrd-listbox-header-align");this.controlContainer.find(".bbi-dbrd-control-header .bbi-dbrd-control-title-wrapper").addClass("e-dbrd-listbox-header-align")},t.prototype.updateListBoxSize=function(){var t,n;BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this)?this.widgetContainerHelper.showControlError(this,this.dataValues):(t=this.designerInstance.element.find("#"+this.designerId+"listboxelement"+this.widgetJson.UniqueName+"_container").data("BoldBIDashboardScroller"),BoldBIDashboard.isNullOrUndefined(t)||t.refresh(),n=this.listBoxElement.data("BoldBIDashboardListBox"),n&&(n.model.height="100%",n.model.width="100%",this.isRefreshed=!0,n.refresh(),this.checkAllTextState(),this.isRefreshed=!1))},t.prototype.checkAllTextState=function(){this.getListProperties().EnableMultiSelection?this.listBoxElement.BoldBIDashboardListBox("showItemsByIndices","0"):this.listBoxElement.BoldBIDashboardListBox("hideItemsByIndices","0")},t.prototype.removeSelection=function(){var t=this.listBoxElement.data("BoldBIDashboardListBox"),n,i,r;BoldBIDashboard.isNullOrUndefined(t)||(t.unSelectAll(),this.getListProperties().SelectedFilterValues.length===0&&(this.isUserDisableAll=!1,this.designerInstance.clearmasterFilter=!1,t.checkAll()),n=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(n.FilterInfo)||(i=!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)&&BoldBIDashboard.isNullOrUndefined(n.FilterInfo.RelativeDateOptions),i&&(this.dataValues.RelativeDates=null,r=this.dataValues,this.updateListBoxData(r))))},t.prototype.getColumns=function(n){var f=this,i=Object.keys(n[0]),r=[],t,u;return BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?(t=i.filter(function(n){return n===f.DataGroupInfo.FieldContainers[0].FieldInfos[0].UniqueColumnName}),u=this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0?i.filter(function(n){return n===f.DataGroupInfo.FieldContainers[1].FieldInfos[0].UniqueColumnName}):[],u.length>0?r.push({id:t[0],text:u[0],value:t[0]}):t.length>0&&r.push({id:t[0],text:t[0],value:null})):r.push({id:i[1],text:i[0],value:i[1]}),r},t.prototype.createScrollBar=function(){this.listBoxElement.BoldBIDashboardListBox("instance").listContainer.BoldBIDashboardScroller({enableTouchScroll:!0,cssClass:"bbi-dbrd-designer-scroller bbi-dbrd-control"})},t.prototype.getListProperties=function(){return this.widgetJson},t.prototype.setContainerDefaultProperties=function(){var t=n.prototype.getContainerSettings.call(this);t.EnableImageExport=t.EnablePdfExport=t.EnableExcelExport=t.EnableCsvExport=!1;t.ShowMaximize=!1;t.PinWidget=!1;t.ViewData=!1},t.prototype.disposeListBox=function(){var n=this.listBoxElement.data("BoldBIDashboardListBox");BoldBIDashboard.isNullOrUndefined(n)||n.destroy();this.bbdesigner$("#"+this.listBoxElement.attr("id")+"_container_Main").remove();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.ListBox)},t.prototype.generateFieldContainer=function(n,t,i,r,u,f){var e=new BoldBIDashboard.Dashboard.FieldContainerForUI;return e.Name=n,e.ContainerType=t,e.CategoryCount=i,e.QueryOrder=r,e.Required=u,BoldBIDashboard.isNullOrUndefined(f)||(e.DisplayName=f),e},t.prototype.getDisplayColumnContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"DisplayColumn")},t.prototype.getDisplayFilterData=function(n,t){var u=this.getDisplayColumnContainer(),f=[],r,i;if(!BoldBIDashboard.isNullOrUndefined(u)&&u.FieldInfos.length>0)for(r=0;r<n.length;r++)if(!BoldBIDashboard.isNullOrUndefined(this.currentData))for(i=0;i<this.currentData.length;i++)if(n[r]===this.currentData[i][t]){f.push(this.currentData[i][u.FieldInfos[0].UniqueColumnName]);break}return f.length>0?f:n},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.ListBoxItem",InternalListBoxReportItem,window);BoldBIDashboard.DashboardDesignerUtility.ListBoxItem.prototype.initialize();__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalRadialGaugeReportItem=function(n){function t(t){var i=n.call(this,t,"RadialGauge","e-radialgauge-item")||this;return i.isResponsive=!1,i.hasActual=!1,i.hasTarget=!1,i.hasStart=!1,i.hasEnd=!1,i.hasSeries=!1,i.isFromProp=!1,i.numberFormat="",i.dataValues=null,i.widgetDataObj=null,i.jsonData=null,i.targetRadius=null,i.range="Range 1",i.defaultScaleColor="#E0E0E0",i.customMin=0,i.customMax=100,i.locale=null,i.bbdesigner$=i.designerInstance.bbdesigner$,i.locale=t.getLocalizationContent(),i.designerId=i.designerInstance._id,i.widgetJson=new GaugeSettings(t),i.propertyPanel=t.modules.propertyPanel,i.unwireEvents(),i.wireEvents(),i.colorFields=i.getColorFields(),i}return __extends(t,n),t.prototype.getWidgetImage=function(){return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="0 0 324 208" version="1.1">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Radial-Gauge" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <path d="M260.473302,191.046078 C257.976747,194.892344 252.805871,196.005153 248.923827,193.531608 C245.041784,191.058062 243.918622,185.934842 246.415177,182.088576 C256.724261,166.206093 262.285714,147.732317 262.285714,128.421706 C262.285714,73.5458857 217.386271,29.0602437 162,29.0602437 C106.613729,29.0602437 61.7142858,73.5458857 61.7142858,128.421706 C61.7142858,147.979819 67.4197081,166.677906 77.9783709,182.690113 C80.5028319,186.518457 79.4169576,191.649561 75.553003,194.150756 C71.6890483,196.651952 66.5102142,195.576085 63.9857534,191.747741 C51.664396,173.062408 45,151.221527 45,128.421706 C45,64.3999157 97.3826843,12.5 162,12.5 C226.617316,12.5 279,64.3999157 279,128.421706 C279,150.93273 272.503785,172.511556 260.473302,191.046078 Z" id="Oval" fill="var(--widget-notconfigured-image-background1)" fill-rule="nonzero"/>        <g id="Group" transform="translate(144.000000, 92.000000)" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero">            <ellipse id="Oval" cx="18.6897698" cy="46.2544376" rx="13.7714094" ry="13.7779176"/>            <path d="M11.0308457,63.1604936 C8.42050502,65.6348846 4.28841775,65.5352752 1.80157035,62.9380088 C-0.68527695,60.3407424 -0.585165887,56.2293517 2.02517475,53.7549598 L56.8425289,1.79254694 C59.45287,-0.681844634 63.5849568,-0.582235013 66.0718038,2.01503137 C68.5586518,4.61229766 68.4585405,8.72368869 65.8482004,11.1980803 L11.0308457,63.1604936 Z" id="Path-6"/>        <\/g>    <\/g><\/svg>'},t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.deviation,GroupId:"eb520ddb-5d82-4bf8-858c-cabf3317229e",Items:[{id:"f48aed7c-c972-43c1-8668-a0c9b89c1809",widgetName:"RadialGauge",widgetDisplayName:n.itemPanel.widgetTitle.gauge,cssClass:"bbi-widgeticon bbi-designer-widget-gauge",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.RadialGaugeItem",searchCategory:["gauge","deviation"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.gauge,description:n.itemPanel.widgetDescription.gaugeDesc,dataRequirement:n.itemPanel.widgetDataRequirements.gaugeDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.GaugeProperties",minRowSpan:4}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.isNecessaryDataConfigured=function(){return this.DataGroupInfo.FieldContainers.length>0&&(this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0||this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0)},t.prototype.init=function(n,t){this.renderGaugeContainer(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.radialGaugeItem)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this)?this.widgetContainerHelper.showControlError(this,this.dataValues):this.updateControlResizeValue())},t.prototype.update=function(n){this.updateTitleSubtitleTheme();this.updateGaugeData(n);this.IsRendered=!0},t.prototype.getWidgetInfo=function(t,i){var r=n.prototype.getWidgetInfo.call(this,t,i);return r.ColorCustomization=this.getColorCustomization(),r},t.prototype.canCustomThemeApplied=function(n){var t=this.getGaugeProperties();if(t.EnableColorSettings)return!1;switch(n){case"Title":return t.TitleColor==="#000000";case"Background":return t.BackgroundColor==="#FFFFFF";case"Value":return(t.ValueColor==="#505D6F"||t.ValueColor==="#666666")&&(!t.ShowRange||t.ShowRange&&t.RangeValueType===RangeValueType.DefaultColor);case"Target":return t.TargetPointerColor==="#424242";case"Needle":return t.NeedlePointerColor==="#505D6F"||t.NeedlePointerColor==="#424242";case"Scale":return t.ScaleColor==="#E0E0E0";case"Label":return(t.LabelColor==="#505D6F"||t.LabelColor==="#000000")&&(!t.ShowRange||t.ShowRange&&t.RangeLabelType===RangeValueType.DefaultColor)}return!0},t.prototype.canApplyCustomThemeInDesigner=function(n){var t=this.getGaugeProperties();if(!t.EnableColorSettings&&this.designerInstance.isEnableCustomDashboardTheme())switch(n){case"Needle":return t.NeedlePointerColor==="#505D6F"||t.NeedlePointerColor==="#424242";case"Value":return(t.ValueColor==="#505D6F"||t.ValueColor==="#666666")&&(!t.ShowRange||t.ShowRange&&t.RangeValueType===RangeValueType.DefaultColor);case"Label":return(t.LabelColor==="#505D6F"||t.LabelColor==="#000000")&&(!t.ShowRange||t.ShowRange&&t.RangeLabelType===RangeValueType.DefaultColor);case"Target":return t.TargetPointerColor==="#424242FF";default:return!1}else return!1},t.prototype.applyWidgetTheme=function(){this.updateTitleSubtitleTheme();this.updateThemeInWidget()},t.prototype.updateThemeInWidget=function(){var r,u,t,f,n,i;if(BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)){if(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),r=!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1,r)for(u=this.widgetDataObj.length,t=0;t<u;t++)n=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(n)||(i=this.getRadialGaugeObj(n),this.applyCustomThemeForSingleGauge(i,n,t),f=this.bbdesigner$(n).attr("id"),this.bbdesigner$("#"+f).css({margin:"2px",background:"transparent"}));else n=this.radialGaugeElement[0],i=this.getRadialGaugeObj(n),this.applyCustomThemeForSingleGauge(i,n,0);this.radialGaugeElement.css("background","transparent");this.designerInstance.designerPanel.hideLoadingIndicator(this.controlContainer)}else BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this)},t.prototype.updateTitleSubtitleTheme=function(){var n=this.themeHelper.getGuageHeaderTitle(),t=this.themeHelper.getGuageHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getGaugeProperties().ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.canCombineRequest=function(){return!0},t.prototype.applyCustomThemeForSingleGauge=function(n,t,i){var o,s,f,u,r,e,h,c;if(!BoldBIDashboard.isNullOrUndefined(n)){if(this.canCustomThemeApplied("Title")&&(n.titleStyle.color=this.themeHelper.getGaugeTitleTextColor()),(this.canCustomThemeApplied("Value")||this.canApplyCustomThemeInDesigner("Value"))&&(o=this.bbdesigner$(t).attr("id"),this.updateAnnotation(t,i,o,this.themeHelper.getGaugeValueTextColor())),this.canCustomThemeApplied("Scale")&&(n.axes[0].ranges[0].color=this.themeHelper.getGaugeScaleBackground()),this.canCustomThemeApplied("Target")||this.canApplyCustomThemeInDesigner("Target"))for(s=this.themeHelper.getGaugeTargetPointerBackground(),u=n.axes[0].pointers.length,r=0;r<u;r++)n.axes[0].pointers[r].type==="Marker"&&n.axes[0].pointers[r].markerShape!=="Needle"&&(n.axes[0].pointers[r].color=s);if(this.canCustomThemeApplied("Needle")||this.canApplyCustomThemeInDesigner("Needle"))for(f=this.themeHelper.getGaugeNeedleBackground(),u=n.axes[0].pointers.length,r=0;r<u;r++)n.axes[0].pointers[r].type==="Needle"&&(n.axes[0].pointers[r].color=f,n.axes[0].pointers[r].cap.color=f);(this.canCustomThemeApplied("Label")||this.canApplyCustomThemeInDesigner("Label"))&&this.refreshTicks(n,this.themeHelper.getGaugeLabelTextColor());n.background="transparent";BoldBIDashboard.isNullOrUndefined(this.getGaugeProperties().DefaultColor)||this.getGaugeProperties().DefaultColor.IsEdited||(e=this.getDefaultBasedOnField(),BoldBIDashboard.isNullOrUndefined(e)||(h=BoldBIDashboard.Dashboard.WidgetHelper.getGlobalColumnId(e,this.DataGroupInfo.FieldContainers),c=this.designerInstance.modules.resource.getColumnColorCodeBasedonTheme(h),this.updateRangeColor(c,!1)));n.refresh()}},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej2.circulargauge.all.min.js",NameSpace:"ejdashboard.circulargauge.CircularGauge"},DependentScripts:[]}},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,"ejdashboard.circulargauge.CircularGauge")},t.prototype.getFieldContainer=function(){var e=new BoldBIDashboard.Dashboard.FieldContainerForUI,u,t,i,f,r;return e.Name="ActualValue",e.DisplayName=this.locale.fieldContainer.actualValue,e.ContainerType=FieldContainerType.Numeric,e.CategoryCount=1,u=new BoldBIDashboard.Dashboard.FieldContainerForUI,u.Name="TargetValue",u.DisplayName=this.locale.fieldContainer.targetValue,u.ContainerType=FieldContainerType.Numeric,u.CategoryCount=1,t=new BoldBIDashboard.Dashboard.FieldContainerForUI,t.Name="StartValue",t.DisplayName=this.locale.fieldContainer.startValue,t.ContainerType=FieldContainerType.Numeric,t.ShowDescriptionIcon=!0,t.TooltipText=this.locale.fieldContainer.minimumToolText,t.CategoryCount=1,i=new BoldBIDashboard.Dashboard.FieldContainerForUI,i.Name="EndValue",i.DisplayName=this.locale.fieldContainer.endValue,i.ContainerType=FieldContainerType.Numeric,i.ShowDescriptionIcon=!0,i.TooltipText=this.locale.fieldContainer.maximumToolText,i.CategoryCount=1,f=new BoldBIDashboard.Dashboard.FieldContainerForUI,f.Name="Series",f.DisplayName=this.locale.fieldContainer.series,f.ContainerType=FieldContainerType.Non_Numeric,f.CategoryCount=1,r=new BoldBIDashboard.Dashboard.FieldContainerForUI,r.Name="HiddenColumn",r.DisplayName=this.locale.dataconfiguration.filedContainer.hiddenColumnName,r.ContainerType=FieldContainerType.None,r.QueryOrder=0,r.ShowDescriptionIcon=!0,r.TooltipText=this.locale.fieldContainer.hiddenColumnMessage.circularGauge,[e,u,t,i,f,r,n.prototype.getFilterColumn.call(this)]},t.prototype.onFieldSettingsClick=function(n,t){for(var i=0;i<t.length;i++)n.ContainerName==="HiddenColumn"&&(t[i].Name==="Sort"||t[i].Name==="DimensionFilters"||t[i].Name==="MeasureFilter"||t[i].Name==="RelativeDateFilter"||t[i].Name==="MeasureFormat")?t[i].IsVisible=!1:t[i].Name==="MeasureFormat"&&(t[i].IsDisable=this.isMeasureFormatDisable(n));return t},t.prototype.getJson=function(){return this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t)},t.prototype.getPropertyPanelItems=function(){return this.updateFontSettingsVisibility(),this.getGaugePropertyPanel()},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateGaugeProperties(n,t,i,r)},t.prototype.updateInitialSelection=function(){},t.prototype.clearFilter=function(n){var t=this.controlContainer;t.find(".e-dbrd-selected-card").remove();t.find(".e-circularGauge-Selected").removeClass("e-circularGauge-Selected");BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this);this.getGaugeProperties().SelectedFilterValues=[];this.isCurrentMaster=!1;this.designerInstance.modules.serialization.notifyChange();BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName)},t.prototype.getMobileViewHeight=function(){return this.getGaugeProperties().GaugeType===GaugeTypes.HorseShoe?this.designerInstance.modules.Mode.designCanvas.width()>this.designerInstance.modules.Mode.designCanvas.height()?this.designerInstance.modules.Mode.designCanvas.height():this.designerInstance.modules.Mode.designCanvas.width():3*this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.refresh=function(){},t.prototype.dispose=function(){this.disposeGauge();n.prototype.dispose.call(this)},t.prototype.canUseWidgetAsMaster=function(){if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)&&this.DataGroupInfo.FieldContainers.length>0){var n=this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name==="Series"}),t=this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name==="ActualValue"}),i=this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name==="TargetValue"});return n.length>0&&n[0].FieldInfos.length>0&&(t.length>0&&t[0].FieldInfos.length>0||i.length>0&&i[0].FieldInfos.length>0)}return!1},t.prototype.renderGaugeContainer=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));this.updateBackWardCompatability();this.renderRadialGaugeElement();!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.RadialGauge)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.locale.itemPanel.widgetDataRequiredMessage.circularGaugeDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.renderRadialGaugeElement=function(n){n===void 0&&(n=!1);this.radialGaugeItem=BoldBIDashboard.buildTag("div.e-radialgaugeitem bbi-dbrd-control e-dbrd-widget","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder},{id:this.designerId+"Item"+this.widgetJson.UniqueName});this.contentContainer.append(this.radialGaugeItem);this.controlContainer.data("widgetInstance",this);n||this.createRadialGaugeElement()},t.prototype.createRadialGaugeElement=function(){this.radialGaugeElement=BoldBIDashboard.buildTag("div.e-radialgauge-element","",{width:"100%",height:"100%","box-sizing":"border-box",position:"relative","font-size":"12px","background-color":"transparent"},{id:this.designerId+"Element"+this.widgetJson.UniqueName});this.radialGaugeItem.append(this.radialGaugeElement);this.seriesWidth=this.contentContainer.width();this.seriesHeight=this.contentContainer.height()},t.prototype.showTooltip=function(n){var r,u,t,f,o;if(!BoldBIDashboard.isNullOrUndefined(n.tooltip)){if(t=0,BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)||!this.hasActual&&!this.hasTarget){f=[];f.push({Value:"40"});n.tooltip.template=this.widgetHelper.generateToolTipTemplate(f,this.bbdesigner$(n.gauge.element).attr("id"),1e3);return}this.widgetDataObj.length>1&&(o=this.bbdesigner$(n.gauge.element).attr("id"),t=+o.split("_").pop());var e=this.getDataGroupColumnInfo(),s=this.hasActual?this.widgetDataObj[t].formattedActualValue:this.widgetDataObj[t].formattedTargetValue,h=this.hasActual?e.actualValueCol:e.targetValueCol,i=[];i.push((r={},r[h]=s,r));this.hasActual&&this.hasTarget&&(i.push((u={},u[e.targetValueCol]=this.widgetDataObj[t].formattedTargetValue,u)),i.push({Variation:this.widgetDataObj[t].formattedVarience}),i.push({"Percent of Target":this.widgetDataObj[t].percentOfVarience}));n.tooltip.template=this.widgetHelper.generateToolTipTemplate(i,this.bbdesigner$(n.gauge.element).attr("id"),1e3);this.radialGaugeItem.find(".EJ2-CircularGauge-Tooltip").addClass("e-gauge-widget-tooltipIndex")}},t.prototype.getDataGroupColumnInfo=function(){var n;if(!BoldBIDashboard.isNullOrUndefined(this.dataValues)){var t=this.DataColumnBindings,u=!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length>0?this.DataGroupInfo.FieldContainers.length:0,i="",r="";for(n=0;n<u;n++)!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[n])&&this.DataGroupInfo.FieldContainers[n].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[n].Name==="ActualValue"?i=t[this.DataGroupInfo.FieldContainers[n].FieldInfos[0].UniqueColumnName]:!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[n])&&this.DataGroupInfo.FieldContainers[n].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[n].Name==="TargetValue"&&(r=t[this.DataGroupInfo.FieldContainers[n].FieldInfos[0].UniqueColumnName]);return{actualValueCol:i,targetValueCol:r}}return{actualValueCol:"",targetValueCol:""}},t.prototype.setRadius=function(n){var u,t,f,i,e;if(!BoldBIDashboard.isNullOrUndefined(n.axes[0].annotations)&&n.axes[0].annotations.length>1&&this.getGaugeProperties().ShowScaleLabel&&this.getGaugeProperties().GaugeType===GaugeTypes.HalfRadialGauge&&!this.getGaugeProperties().ShowTicks){u=this.getValueLabelFontSize();t=this.bbdesigner$('<span id="textWidth1" style="color:#666666; top: -100px; left: 0; visibility: hidden; font-family:var(--designer-font); whitespace:nowrap; font-size: '+u+'px">'+this.customMin+this.numberFormat+"<\/span>");this.bbdesigner$(n.element).append(t);f=t.width();this.bbdesigner$(n.element).append(t);i=this.bbdesigner$('<span id="textWidth2" style="color:#666666; top: -100px; left: 0; visibility: hidden; font-family:var(--designer-font); whitespace:nowrap; font-size: '+u+'px">'+this.customMax+this.numberFormat+"<\/span>");this.bbdesigner$(n.element).append(i);e=i.width();this.bbdesigner$(n.element).append(i);this.bbdesigner$(n.element).find("#textWidth1").remove();this.bbdesigner$(n.element).find("#textWidth2").remove();var r="currentRadius",o=n.axes[0][r]-f/2,s=n.axes[0][r]-e/2,h=Math.round(o/n.axes[0][r]*100),c=Math.round(s/n.axes[0][r]*100);n.axes[0].annotations[1].radius=h+"%";n.axes[0].annotations[2].radius=c+"%"}},t.prototype.updateGaugeData=function(n){var t,i,r;try{if(this.dataValues=n,BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this),this.updatePropertyItems(),this.checkDroppedFields(),this.getGaugeProperties().IsColumnBind=this.hasStart||this.hasEnd,t=null,this.widgetDataObj=null,this.seriesWidth=this.contentContainer.width(),this.seriesHeight=this.contentContainer.height(),this.designerInstance.modules.serialization.updateWidgetData(this.getGaugeProperties(),this.DataGroupInfo),BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error)BoldBIDashboard.isNullOrUndefined(n.Message)||(this.hideWidgetNotConfigured(),this.widgetContainerHelper.showControlError(this,n));else{if(BoldBIDashboard.isNullOrUndefined(n.noDataAvailable)||n.noDataAvailable)this.radialGaugeItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this);else{if(this.radialGaugeItem.show(),!this.hasSeries){this.radialGaugeItem.off("click",".e-circulargauge",this.bbdesigner$.proxy(this.gaugeItemClick,this));this.radialGaugeItem.on("click",".e-circulargauge",this.bbdesigner$.proxy(this.gaugeItemClick,this))}BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this);BoldBIDashboard.isNullOrUndefined(n.widgetData.data)||n.widgetData.data==="[]"&&n.data==="[]"&&BoldBIDashboard.DashboardUtil.IsColumnBindingsEmpty(this.DataColumnBindings)?(this.IsColorCustomizationEnabled()&&this.resetAdvanceColorSettings(),BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this)):n.data!=="[]"&&(this.widgetDataObj=this.getJsonData("WidgetData"),this.jsonData=this.getJsonData("Data"),this.setGlobalColor(),this.setPropertyElement("PointerSettings","RangeBarColor",this.getGaugeProperties().DefaultColor.Color),this.widgetDataObj.length>0&&this.hasSeries&&(this.hasActual||this.hasTarget)?(this.radialGaugeItem.empty(),this.destroy(),BoldBIDashboard.isNullOrUndefined(this.radialGaugeItem)&&this.renderRadialGaugeElement(!0),this.renderSeriesGauge()):this.hasActual||this.hasTarget?(t=this.getRadialGaugeObj(this.radialGaugeElement[0]),BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)||(this.destroy(),this.renderRadialGaugeElement(),t=this.getRadialGaugeObj(this.radialGaugeElement[0])),this.renderGaugeData(this.widgetDataObj[0],t,!1,0)):BoldBIDashboard.isNullOrUndefined(t)||this.showWidgetNotConfigured(),this.updateControlResizeValue())}this.getGaugeProperties().FilterSettings.ActAsMasterWidget&&this.getGaugeProperties().SelectedFilterValues.length===0&&BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this);this.updateActasMasterFilterProperty();this.designerInstance.modules.util.updateAction("RadialGauge","Link","Link")}this.designerInstance.canApplyTheme()&&!this.designerInstance.canApplyDashboardTheme()&&(BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this),i=this.designerInstance.modules.themeHelper.getGuageHeaderTitle(),r=this.designerInstance.modules.themeHelper.getGuageHeaderSubTitle(),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getGaugeProperties().ContainerSettings.TextColor,i),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,r));this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.setPropertyElement("Formatting","ColorSettings",this.getGaugeProperties().ColorCustomization),this.propertyPanel.updateCategoryVisibility("RadialGauge","Formatting",this.IsWidgetConfigured()),this.propertyPanel.updateItemVisibility(this.Type.toString(),"BasicSettings","TitleColor",this.getSeriesCount()>0),this.propertyPanel.updateItemVisibility(this.Type.toString(),"BasicSettings","ValueColor",this.IsWidgetConfigured()))}catch(u){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:u,Type:u.name})}},t.prototype.showWidgetNotConfigured=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this)},t.prototype.hideWidgetNotConfigured=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this)},t.prototype.setGlobalColor=function(){var n=this.getGaugeProperties().DefaultColor,t=this.getDefaultBasedOnField(),r,i;BoldBIDashboard.isNullOrUndefined(t)||(r=BoldBIDashboard.Dashboard.WidgetHelper.getGlobalColumnId(t,this.DataGroupInfo.FieldContainers),i=BoldBIDashboard.Dashboard.WidgetHelper.getColorCode(this,r,n),BoldBIDashboard.isNullOrUndefined(n.Color)||n.Name.length!==0?n.Name===t?n.Color=n.IsEdited?n.Color:i:(n.Name=t,n.Color=i,n.IsEdited=!1):(n.Name=t,n.Color=i,n.IsEdited=!1))},t.prototype.updateBackWardCompatability=function(){var n=this.getGaugeProperties().Data.Containers.filter(function(n){return n.Name==="ActualValue"}),t;n.length===0&&(n=this.getGaugeProperties().Data.Containers.filter(function(n){return n.Name==="TargetValue"}));BoldBIDashboard.isNullOrUndefined(this.getGaugeProperties().DefaultColor)&&n.length>0&&(t=n[0].FieldInfos,t.length>0&&(this.getGaugeProperties().DefaultColor=new DefaultColorSet,this.getGaugeProperties().DefaultColor.IsEdited=!0,this.getGaugeProperties().DefaultColor.Color=this.getGaugeProperties().RangeColor,this.getGaugeProperties().DefaultColor.Name=t[0].UniqueColumnName))},t.prototype.getDefaultBasedOnField=function(){return this.hasActual?this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name==="ActualValue"})[0].FieldInfos[0].UniqueColumnName:this.hasTarget?this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name==="TargetValue"})[0].FieldInfos[0].UniqueColumnName:null},t.prototype.renderGaugeData=function(n,t,i,r){var g=this,v=n.startValue,y=n.endValue,e=n.actualValue,o=n.targetValue,nt=n.maximumValue,tt=n.minimumValue,s=this.jsonData[r],u,p=this.hasActual?this.DataGroupInfo.FieldContainers[0].FieldInfos[0].MeasureFormatting:this.hasTarget?this.DataGroupInfo.FieldContainers[1].FieldInfos[0].MeasureFormatting:null,h,l,a,c;this.getGaugeProperties().IsCustomMin||this.getGaugeProperties().IsCustomMax?(h=this.customFormat(e,o,p),u={start:BoldBIDashboard.DashboardUtil.getFormattedValue(this.hasStart?v:this.getGaugeProperties().MinValue,h),end:BoldBIDashboard.DashboardUtil.getFormattedValue(this.hasEnd?y:this.getGaugeProperties().MaxValue,h),actual:BoldBIDashboard.DashboardUtil.getFormattedValue(e,h),target:BoldBIDashboard.DashboardUtil.getFormattedValue(o,h),numberFormat:h},u.end=u.start>=u.end?u.start+1:u.end):u=this.getMinAndMax(v,y,tt,nt,e,o,p);this.numberFormat=n.numberFormat=u.numberFormat;this.customMin=u.start;this.customMax=u.end;l=null;!this.hasActual&&this.hasTarget&&(e=o);var et=this.getFontSizeBasedOnResolution(),ot=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode(),st=this.designerInstance.modules.themeHelper.getGaugeLabelFont(),w=this.designerInstance.modules.themeHelper.getGaugeTitleFont();if(BoldBIDashboard.isNullOrUndefined(t)){c=this.bbdesigner$(this.radialGaugeElement).attr("id");this.getGaugeProperties().GaugeType===GaugeTypes.Auto&&(this.getGaugeProperties().GaugeType=this.seriesHeight>=this.seriesWidth*.9?GaugeTypes.HorseShoe:GaugeTypes.HalfRadialGauge);a=this.getGaugeAngle();this.radius=this.getRadius(this.seriesWidth,this.seriesHeight);this.rangeWidth=this.getRangeWidth(this.radius);this.targetRadius=this.getTargetPointerRadius(this.radius,this.rangeWidth);var f=this,b=this.getScaleOffset(this.rangeWidth),it=this.getStatusColor(e,o),rt=this.getStatusImage(e,o),ut=this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge?n.percentOfVarience:rt+"&nbsp;"+n.formattedVarience+"&nbsp;("+n.percentOfVarience+")",ft=this.hasActual?n.formattedActualValue:n.formattedTargetValue,k={resized:this.bbdesigner$.proxy(this.restrictControlResize,this),width:"100%",height:"100%",title:"",titleStyle:{color:this.canCustomThemeApplied("Title")?this.themeHelper.getGaugeTitleTextColor():this.getAdvancedCustomizedColor(s,ColorCustomizationProperty.TitleColor),size:this.getSeriesTitleFontSize(),fontWeight:w.weight,fontFamily:w.family},background:this.designerInstance.canApplyTheme()||this.designerInstance.isEnableCustomDashboardTheme()?"transparent":this.getGaugeProperties().BackgroundColor,loaded:function(n){var i,r,t;if(f.showValueLabel(n.gauge.element,f.getGaugeProperties().ShowValueLabel?"block":"none"),!BoldBIDashboard.isNullOrUndefined(f.designerInstance.model.dashboardFromData)&&f.designerInstance.model.dashboardFromData.loadFromData&&(i=g.bbdesigner$("#gauge-measuretext"),i.remove()),f.prevRadius===f.radius){f.prevRadius=0;return}r="currentRadius";t=n.gauge.axes[0][r];(f.radius!==t||n.gauge.axes[0].ranges[0].startWidth!==f.rangeWidth)&&(f.prevRadius=f.radius,f.radius=t,f.refreshRangeWidth(null,!1,n.gauge),f.setRadius(n.gauge),f.radius=f.getRadius(f.seriesWidth,f.seriesHeight),n.gauge.refresh())},tooltip:{enable:this.getGaugeProperties().ShowTooltip,showAtMousePosition:!0,enableAnimation:!1},tooltipRender:function(n){f.showTooltip(n)},moveToCenter:this.getGaugeProperties().GaugeType===GaugeTypes.HalfRadialGauge?!0:!1,useGroupingSeparator:!0,allowMargin:!1,margin:{left:0,top:0,bottom:0,right:0},axes:[{annotations:this.hasActual&&this.hasTarget?this.getStatusAnnotation(c,s,l,n,it,ut):this.getSingleAnnotation(c,s,l,ft),lineStyle:{width:0},startAngle:a.startAngle,endAngle:a.endAngle,radius:"100%",labelStyle:{font:{size:this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge||!this.getGaugeProperties().ShowScaleLabel?"0px":this.getScaleLabelFontSize(),fontWeight:"400",color:this.getGaugeProperties().LabelColor},offset:b.labelOffset,format:"{value}"+u.numberFormat,position:this.getGaugeProperties().ScaleLabelPosition},majorTicks:{interval:this.getInterval(u.start,u.end),width:this.getGaugeProperties().ShowTicks?this.getGaugeProperties().TicksWidth:0,height:this.getGaugeProperties().ShowTicks?this.getGaugeProperties().TicksHeight:0,offset:b.ticksOffset,position:this.getGaugeProperties().TicksPosition},minorTicks:{interval:this.getInterval(u.start,u.end),height:0,width:0},minimum:this.customMin,maximum:this.customMax,ranges:[{start:this.customMin,end:this.customMax,radius:"100%",startWidth:this.rangeWidth,endWidth:this.rangeWidth,color:this.canCustomThemeApplied("Scale")?this.themeHelper.getGaugeScaleBackground():this.getGaugeProperties().ScaleColor}],pointers:this.createPointers(u.actual,u.target,s)}]};this.updateRadialGaugeProperties(u,k,e,o,n,s,l,c,i);new ejdashboard.circulargauge.CircularGauge(k).appendTo(this.radialGaugeElement[0])}else{c=this.bbdesigner$(t.element).attr("id");try{t.axes[0].ranges[0].color=this.getGaugeProperties().ScaleColor;this.updateRadialGaugeProperties(u,t,e,o,n,s,l,c,i);t.axes[0].majorTicks.interval=this.getInterval(u.start,u.end);t.background=this.designerInstance.canApplyTheme()||this.designerInstance.isEnableCustomDashboardTheme()?"transparent":this.getGaugeProperties().BackgroundColor;t.axes[0].labelStyle.format="{value}"+u.numberFormat;this.setHalfCircleLabel(t);t.refresh();this.widgetDataObj.length===1&&(this.getGaugeProperties().IsCustomMin||this.getGaugeProperties().IsCustomMax||(this.getGaugeProperties().MinValue=BoldBIDashboard.Dashboard.GaugeHelper.getUnformattedMaxValue(this.customMin,this.numberFormat),this.minimumValueChange(this.getGaugeProperties().MinValue),this.getGaugeProperties().MaxValue=BoldBIDashboard.Dashboard.GaugeHelper.getUnformattedMaxValue(this.customMax,this.numberFormat),this.maximumValueChange(this.getGaugeProperties().MaxValue)),this.calculateRanges(t,t.axes[0].minimum,t.axes[0].maximum))}catch(d){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:d,Type:d.name})}}},t.prototype.updateRadialGaugeProperties=function(n,t,i,r,u,f,e,o,s){var h,l,p,c;if(this.hasActual&&this.hasTarget){n.actual=n.actual<=n.start?n.start+.1:n.actual;this.targetRadius=this.getTargetPointerRadius(this.radius,this.rangeWidth);var a=this.getStatusColor(i,r),v=this.getStatusImage(i,r),y=this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge?u.percentOfVarience:v+"&nbsp;"+u.formattedVarience+"&nbsp;("+u.percentOfVarience+")";this.getGaugeProperties().ShowRange?(this.calculateRanges(t,n.start,n.end),this.renderGaugeWithRange(t,n.actual,n.target)):t.axes[0].pointers=this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge?this.createRangeBar(n.actual,n.target,f):this.createPointers(n.actual,n.target,f);t.axes[0].annotations=this.getStatusAnnotation(o,f,e,u,a,y,this.getGaugeProperties().LabelColor,t)}else h=this.hasActual?n.actual:n.target,h=h<=n.start?n.start+.1:h,l=this.hasActual?u.formattedActualValue:u.formattedTargetValue,this.getGaugeProperties().ShowRange?(this.calculateRanges(t,n.start,n.end),this.renderGaugeWithRange(t,h,null)):t.axes[0].pointers=this.createPointers(h,null,f),t.axes[0].annotations=this.getSingleAnnotation(o,f,e,l,this.getGaugeProperties().LabelColor,t);s&&(p=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode(),c=this.designerInstance.modules.themeHelper.getGaugeTitleFont(),t.title=u.title,t.titleStyle.fontFamily=c.family,t.titleStyle.fontWeight=c.weight,t.titleStyle.size=this.getSeriesTitleFontSize(),t.titleStyle.color=this.getAdvancedCustomizedColor(f,ColorCustomizationProperty.TitleColor));this.getGaugeProperties().ShowRange?(t.axes[0].minimum=this.customMin,t.axes[0].maximum=this.customMax):(t.axes[0].ranges[0].start=t.axes[0].minimum=this.customMin,t.axes[0].ranges[0].end=t.axes[0].maximum=this.customMax)},t.prototype.renderSeriesGauge=function(){var t=null,i,u,r,n;for(this.radialGaugeItem.css({height:"100%"}),i=this.getSizeForGauge(this.widgetDataObj.length),u=this.designerInstance.isDarkTypeTheme(),this.radialGaugeContent=BoldBIDashboard.buildTag("div.radialGaugeContent","",{width:"100%",height:"100%",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"}),this.radialGaugeItem.append(this.radialGaugeContent),this.radialGaugeItem.off("click",".radialGaugeContent .e-circulargauge",this.bbdesigner$.proxy(this.gaugeItemClick,this)),r="",this.getGaugeProperties().FilterSettings.ActAsMasterWidget&&this.getGaugeProperties().SelectedFilterValues.length>0&&(r=this.getMasterData()),n=0;n<this.widgetDataObj.length;n++)this.radialGaugeElement=BoldBIDashboard.buildTag("div","",{width:i.width,height:i.height,position:"relative","font-size":"10pt","background-color":"transparent",float:"left"},{id:this.designerId+"Element"+this.widgetJson.UniqueName+"_"+n,"data-value":this.widgetDataObj[n].title}),this.updateGaugeBorderStyle(u),this.radialGaugeContent.append(this.radialGaugeElement),this.seriesWidth=i.width,this.seriesHeight=i.height,this.renderGaugeData(this.widgetDataObj[n],t,!0,n),BoldBIDashboard.isNullOrUndefined(r)||r===""||(t=this.getRadialGaugeObj(this.radialGaugeElement[0]),BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this),this.widgetDataObj[n].title===r&&(this.bbdesigner$(t.element).addClass("e-circularGauge-Selected"),this.updateSelectionContainer(this.bbdesigner$(t.element))),t=null);this.radialGaugeItem.on("click",".radialGaugeContent .e-circulargauge",this.bbdesigner$.proxy(this.gaugeItemClick,this));this.radialGaugeItem.data("BoldBIDashboardScroller")&&this.radialGaugeItem.BoldBIDashboardScroller("destroy");this.widgetDataObj.length>1&&this.radialGaugeItem.BoldBIDashboardScroller({width:this.radialGaugeItem.width(),height:this.radialGaugeItem.height(),autoHide:!0,scrollerSize:this.designerInstance.scrollerSize.scrollSize})},t.prototype.updateGaugeBorderStyle=function(){this.widgetDataObj.length>1&&this.bbdesigner$(this.radialGaugeElement).css({margin:"2px"})},t.prototype.gaugeItemClick=function(n){var i=[n.pageX,n.pageY],t=[];this.hasSeries&&this.getGaugeProperties().FilterSettings.ActAsMasterWidget&&t.push(WidgetAction.Filter);this.getGaugeProperties().UrlLink&&this.getGaugeProperties().UrlLink.EnableLink&&t.push(WidgetAction.Linking);this.widgetJson.ContainerSettings.ViewData&&t.push(WidgetAction.ViewData);BoldBIDashboard.Dashboard.WidgetHelper.createWidgetActionContextMenu(this.designerInstance,this,this.Name,t,n,i)},t.prototype.restrictControlResize=function(n){n.cancel=!0},t.prototype.performSelectedWidgetAction=function(t,i,r,u){var f,e,o;switch(t){case WidgetAction.Filter.toString():this.performFilterAction(i,r);break;case WidgetAction.Linking.toString():u.model.mode!==BoldBIDashboard.Designer.mode.design&&(f=this.getLinkingData(r),n.prototype.performLinking.call(this,f));break;case WidgetAction.ViewData.toString():i.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(e=u.modules.viewDataDialog,o=this.showSelectItemsInViewData(r),e.showViewDataPopup(i,!1,o,!0))}},t.prototype.showSelectItemsInViewData=function(n){for(var r=[],u=this.bbdesigner$(n.currentTarget),i=this.DataGroupInfo.FieldContainers,t=0;t<i.length;t++)if(i[t].Name==="Series"&&i[t].FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(u.attr("data-value"))){r.push({selectedItem:u.attr("data-value"),columnId:i[t].FieldInfos[0].Id,UniqueColumnName:i[t].FieldInfos[0].UniqueColumnName});break}return r},t.prototype.processFilterInformation=function(n){var r=this.DataGroupInfo.FieldContainers,s=n.filters,u=this.getColumnForWidgetFilterAPI(s,r),t=u[0],e=u[1],o=u[2],h=u[3],f,i;if(o.length>0)return t=[],e={},console.error("Given column name(s) ["+o+"] were not found in "+this.widgetJson.ContainerSettings.Title),!1;if(h&&(console.error("ColumnName should not be empty for API filtering"),t.length===0))return!1;if(t.length===0&&o.length===0)for(f=[],i=0;i<r.length;i++)if(r[i].Name==="Series"){f=r[i].FieldInfos[0];e[f.UniqueColumnName]=s[0].values[0];t.push(f);break}return this.widgetJson.SelectedFilterValues=[],this.masterFilterWindowInstance.configureSelectedFilterInfo(this.getJson(),t,e),!0},t.prototype.performFilterAction=function(t,i){var a=this.getHiddenColumnContainer(),u,o,f;if(!BoldBIDashboard.isNullOrUndefined(i)&&!BoldBIDashboard.isNullOrUndefined(i.currentTarget)){if(this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;this.getGaugeProperties().SelectedFilterValues=[];var r=this.bbdesigner$(i.currentTarget),h=[],c=[],l=[],e=r.parents(".e-radialgaugeitem").find(".e-circularGauge-Selected"),s=this.DataGroupInfo.FieldContainers;for(u=0;u<s.length;u++)if(s[u].Name==="Series"&&(h=s[u].FieldInfos[0],l[h.UniqueColumnName]=r.attr("data-value"),c.push(h)),s[u].Name==="HiddenColumn"&&!BoldBIDashboard.isNullOrUndefined(a)){for(o=a.FieldInfos,f=0;f<o.length;f++)l[o[f].UniqueColumnName]=this.getHiddenColumnData(this.getSeriesCount()>0,parseInt(i.currentTarget.id.split("_").pop(),0),o[f].UniqueColumnName),c.push(o[f]);break}e.length>0?(e.removeClass("e-circularGauge-Selected"),r.parents(".e-radialgaugeitem").find(".e-dbrd-selected-card").remove(),r[0].id!==e[0].id&&r.addClass("e-circularGauge-Selected"),e=r.parents(".e-radialgaugeitem").find(".e-circularGauge-Selected")):(r.addClass("e-circularGauge-Selected"),e=r.parents(".e-radialgaugeitem").find(".e-circularGauge-Selected"));t.isCurrentMaster=!0;n.prototype.performInteraction.call(this,this,c,l);this.getGaugeProperties().SelectedFilterValues.length>0&&this.updateSelectionContainer(r)}},t.prototype.getLinkingData=function(n){var s=this,r={isEnabled:!1,parameterDetails:[],url:"",urlLinkInfo:[]},u,i,f,e,t,o;if(!BoldBIDashboard.isNullOrUndefined(this.widgetJson)&&(u=this.getSourceDataGauge(!1),!BoldBIDashboard.isNullOrUndefined(this.getGaugeProperties().UrlLink.UrlPath)&&this.getGaugeProperties().UrlLink.UrlPath!==""))for(i=u.filter(function(n){return s.getGaugeProperties().UrlLink.PassingParameters.indexOf(n.Value)!==-1}),r.url=this.getGaugeProperties().UrlLink.UrlPath,r.isEnabled=!0,f=u.filter(function(n){return n.Category==="title"}).length>0?!0:!1,e=f?parseInt(n.currentTarget.id.split("_").pop(),0):0,t=0;t<i.length;t++)o="",o=i[t].Category==="HiddenColumn"?this.getHiddenColumnData(f,e,i[t].Id):this.widgetDataObj[e][i[t].Category],r.parameterDetails.push({parameter:i[t].Value,value:o});return r.urlLinkInfo=this.getGaugeProperties().UrlLink,r},t.prototype.getHiddenColumnData=function(n,t,i){var r=this,u=this.getSeriesContainer(),f=this.getActualValueContainer(),e=this.getTargetValueContainer(),o=this.jsonData.filter(function(i){return(n?i[u.FieldInfos[0].UniqueColumnName]===r.widgetDataObj[t].title:!0)&&i[f.FieldInfos[0].UniqueColumnName]===r.widgetDataObj[t].actualValue&&i[e.FieldInfos[0].UniqueColumnName]===r.widgetDataObj[t].targetValue});return o[0][i]},t.prototype.getSourceDataGauge=function(n){var s=[],e,f,t,i,r;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length>0)for(e=this.DataGroupInfo.FieldContainers,f=0;f<e.length;f++)if(!n)for(t=0;t<e[f].FieldInfos.length;t++)if(i=e[f].FieldInfos,r=e[f],!this.isDuplicate(s,i[t].Name)&&(!n||i[t].FieldType===FieldType.Dimensions)){var h=i[t].SummaryType,c=i[t].DateTimeFormat,o=c!==DateTimeFormat.None?c:h!==SummaryType.NONE?h:"",l=i[t].Name+(o!==""?"("+o+")":""),a=o+(o.length>1?"(":"")+i[t].Name+(o.length>1?")":""),u=r.Name;r.Name==="Series"?u="title":r.Name==="ActualValue"?u="actualValue":r.Name==="TargetValue"?u="targetValue":r.Name==="StartValue"?u="startValue":r.Name==="EndValue"?u="endValue":r.Name==="MaximumValue"&&(u="maximumValue");s.push({Category:u,Name:l,Value:a,Id:i[t].UniqueColumnName,FieldName:i[t].Name})}return s},t.prototype.isDuplicate=function(n,t){for(var i=0;i<n.length;i++)if(n[i].Name===t)return!0;return!1},t.prototype.updatePropertyItems=function(){this.checkDroppedFields();this.propertyPanel.updateItemVisibility(this.Type,"BasicSettings","Direction",this.hasActual&&this.hasTarget?!0:!1);this.propertyPanel.updateItemDisable("float",this.Type,"BasicSettings","Minimum",!this.hasStart&&(this.hasActual||this.hasTarget)?!1:!0);this.propertyPanel.updateItemDisable("float",this.Type,"BasicSettings","Maximum",!this.hasEnd&&(this.hasActual||this.hasTarget)?!1:!0);this.propertyPanel.updateItemVisibility(this.Type.toString(),"BasicSettings","ShowDifferenceValue",this.hasActual&&this.hasTarget);this.propertyPanel.updateItemVisibility(this.Type,"PointerSettings","TargetPointer",this.hasTarget&&this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge?!0:!1);this.propertyPanel.updateItemVisibility(this.Type,"PointerSettings","ValuePointer",!this.getGaugeProperties().ShowRange&&this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge);this.propertyPanel.updateItemVisibility(this.Type,"PointerSettings","TargetPointerColor",this.hasTarget&&this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge?!0:!1);this.propertyPanel.updateItemVisibility(this.Type,"ScaleSettings","ScaleLabelPosition",this.getGaugeProperties().ShowScaleLabel&&this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&(this.getGaugeProperties().GaugeType!==GaugeTypes.HalfRadialGauge||this.getGaugeProperties().GaugeType===GaugeTypes.HalfRadialGauge&&this.getGaugeProperties().ShowTicks)?!0:!1);this.propertyPanel.updateItemVisibility(this.Type.toString(),"ScaleSettings","ShowScaleLabel",this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&this.getGaugeProperties().ShowScaleLabel);this.propertyPanel.updateItemDisable("bool",this.Type,"Filter","ActAsMasterWidget",this.hasSeries&&(this.hasActual||this.hasTarget)?!1:!0);this.propertyPanel.updateItemDisable("bool",this.Type,"RangeSettings","ShowRange",this.hasActual||this.hasTarget?!1:!0);this.propertyPanel.updateItemVisibility(this.Type.toString(),"ScaleSettings","ShowTicks",this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge);this.setPropertyElement("ScaleSettings","RangeWidth",this.getGaugeProperties().ScaleWidth);this.propertyPanel.updateItemVisibility(this.Type.toString(),"BasicSettings","PercentColor",this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge&&this.getGaugeProperties().ShowDifferenceValue);this.propertyPanel.updateItemVisibility(this.Type.toString(),"BasicSettings","ValueColor",this.getGaugeProperties().ShowActualValue&&this.IsWidgetConfigured());this.propertyPanel.updateItemVisibility(this.Type.toString(),"BasicSettings","LabelColor",this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge);this.propertyPanel.updateItemVisibility(this.Type.toString(),"BasicSettings","PercentSize",this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge&&this.getGaugeProperties().ShowDifferenceValue);this.propertyPanel.updateItemVisibility(this.Type.toString(),"ScaleSettings","TicksHeight",this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&this.getGaugeProperties().ShowTicks);this.propertyPanel.updateItemVisibility(this.Type.toString(),"ScaleSettings","TicksWidth",this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&this.getGaugeProperties().ShowTicks);this.propertyPanel.updateItemVisibility(this.Type.toString(),"ScaleSettings","TicksPosition",this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&this.getGaugeProperties().ShowTicks);this.propertyPanel.updateCategoryVisibility(this.Type.toString(),"ColorSettings",this.getGaugeProperties().Data.Containers.length>0&&this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge?this.hasActual&&this.hasTarget?!0:!1:!1);this.propertyPanel.updateCategoryVisibility(this.Type.toString(),"RangeSettings",this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge?!0:!1)},t.prototype.updateActasMasterFilterProperty=function(){if(this.getGaugeProperties().FilterSettings.ActAsMasterWidget=this.canUseWidgetAsMaster()?this.getGaugeProperties().FilterSettings.ActAsMasterWidget:!1,this.propertyPanel.isVisible()){var n={name:"ActAsMasterWidget",value:this.getGaugeProperties().FilterSettings.ActAsMasterWidget};this.propertyPanel.setBoolean(null,null,"Filter",n,"RadialGauge")}this.propertyPanel.updateItemVisibility("RadialGauge","Filter","ActAsMasterWidget",this.canUseWidgetAsMaster())},t.prototype.getMasterData=function(){for(var t=this.getGaugeProperties().SelectedFilterValues,r=t.length,i="",n=0;n<r;n++)t[n].InitialDimensionFilter!==null&&t[n].InitialDimensionFilter.Text.length>0&&(i=t[n].InitialDimensionFilter.Text[0].toString()),t[n].InitialDateFilter!==null&&t[n].InitialDateFilter.DisplayDateFilterList.length>0&&(i=t[n].InitialDateFilter.DisplayDateFilterList[0]);return i},t.prototype.getGaugePropertyPanel=function(){var i=BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem.getInterWidgetLinkingProperty(this.locale.propertyPanel.linking.interWidgetLinkingText,!0),t;return i.Items[0].value=n.prototype.useExistingWidgetLinking.call(this),this.checkDroppedFields(),t={Header:this.widgetJson.ContainerSettings.Title,SubTitle:this.widgetJson.ContainerSettings.SubTitle,Description:this.widgetJson.ContainerSettings.Description,Type:this.Type,Items:[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"ShowTooltip",displayName:this.locale.propertyPanel.basicSettings.showTooltip,value:this.getGaugeProperties().ShowTooltip,itemType:"bool"},{name:"GaugeType",displayName:this.locale.propertyPanel.basicSettings.gaugeType,value:this.getGaugeProperties().GaugeType,valueList:["Half Circle","Horse Shoe","Full Circle"],itemType:"dropdown"},{name:"Minimum",displayName:this.locale.propertyPanel.basicSettings.minimum,value:this.getGaugeProperties().MinValue,itemType:"float",minimum:-999999999999,maximum:999999999999,unitType:"pt",isDisable:!(this.getGaugeProperties().Data.Containers.length>0&&this.hasStart)&&(this.hasActual||this.hasTarget)?!1:!0},{name:"Maximum",displayName:this.locale.propertyPanel.basicSettings.maximum,value:this.getGaugeProperties().MaxValue,itemType:"float",minimum:-999999999999,maximum:999999999999,unitType:"pt",isDisable:!(this.getGaugeProperties().Data.Containers.length>0&&this.hasEnd)&&(this.hasActual||this.hasTarget)?!1:!0},{name:"Target",displayName:this.locale.propertyPanel.basicSettings.target,value:this.getGaugeProperties().CustomTarget,itemType:"float",decimalPlaces:0,minimum:-999999999999,maximum:999999999999,unitType:"pt",isVisible:!1,isDisable:this.getGaugeProperties().Data.Containers.length>0&&(this.hasActual||this.hasTarget)?!0:!1},{name:"EnableAnimation",displayName:this.locale.propertyPanel.animationSettings.enableAnimation,value:this.getGaugeProperties().EnableAnimation?!0:!1,itemType:"bool"},{name:"ShowValueLabel",displayName:this.locale.propertyPanel.basicSettings.showValueLabel,value:this.getGaugeProperties().ShowValueLabel?!0:!1,itemType:"bool",isVisible:!1},{name:"ShowActualValue",displayName:this.locale.propertyPanel.basicSettings.showActualValueText,value:this.getGaugeProperties().ShowActualValue,itemType:"bool",isVisible:!0},{name:"ValueColor",displayName:this.locale.propertyPanel.basicSettings.valueLabelColorText,value:this.getGaugeProperties().ValueColor,itemType:"color",isVisible:this.IsWidgetConfigured()&&this.getGaugeProperties().ShowActualValue?!0:!1},{name:"ShowDifferenceValue",displayName:this.locale.propertyPanel.basicSettings.showDifferenceValueText,value:this.getGaugeProperties().ShowDifferenceValue,itemType:"bool",isVisible:this.hasActual&&this.hasTarget?!0:!1},{name:"ValueLabelPosition",displayName:this.locale.propertyPanel.basicSettings.valueLabelRotation,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelPosition,this.getGaugeProperties().ValueLabelPosition),valueList:["Inside","Outside"],itemType:"dropdown",isVisible:!1},{name:"PercentColor",displayName:this.locale.propertyPanel.basicSettings.color,value:this.getGaugeProperties().PercentValueColor,itemType:"color",isVisible:this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge&&this.getGaugeProperties().ShowDifferenceValue?!0:!1},{name:"PercentSize",displayName:this.locale.propertyPanel.basicSettings.percentSizeText,value:this.getGaugeProperties().PercentValueSize,itemType:"float",minimum:12,maximum:55,unitType:"pt",isVisible:this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge&&this.getGaugeProperties().ShowDifferenceValue?!0:!1},{name:"ValueLabelPosition",displayName:this.locale.propertyPanel.basicSettings.valueLabelPosition,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelPosition,this.getGaugeProperties().ValueLabelPosition),valueList:["Inside","Outside"],itemType:"dropdown",isVisible:!1},{name:"BackgroundColor",displayName:this.locale.propertyPanel.basicSettings.backgroundColor,value:this.getGaugeProperties().BackgroundColor,itemType:"color",isVisible:!1},{name:"LabelColor",displayName:this.locale.propertyPanel.basicSettings.labelColor,value:this.getGaugeProperties().LabelColor,itemType:"color",isVisible:this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge?!0:!1},{name:"TitleColor",displayName:this.locale.propertyPanel.basicSettings.titleColor,value:this.getGaugeProperties().TitleColor,itemType:"color",isVisible:this.getSeriesCount()>0?!0:!1},]},{CategoryName:"Color Settings",DisplayName:this.locale.propertyPanel.colorSettingsText,IsVisible:this.getGaugeProperties().Data.Containers.length>0&&this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge?this.hasActual&&this.hasTarget?!0:!1:!1,Items:[{name:"Direction",displayName:this.locale.propertyPanel.colorSettings.direction,value:this.getGaugeProperties().Direction===GaugeDirection.HighIsGood?"High is Good":"Low is Good",itemType:"dropdown",valueList:["High is Good","Low is Good"]},{name:"HighColor",displayName:this.locale.propertyPanel.colorSettings.highColor,value:this.getGaugeProperties().HighColor,itemType:"color"},{name:"MediumColor",displayName:this.locale.propertyPanel.colorSettings.mediumColor,value:this.getGaugeProperties().MediumColor,itemType:"color"},{name:"LowColor",displayName:this.locale.propertyPanel.colorSettings.lowColor,value:this.getGaugeProperties().LowColor,itemType:"color"}]},{CategoryName:"Formatting",DisplayName:this.locale.propertyPanel.formattingCategoryText,IsVisible:this.IsWidgetConfigured()?!0:!1,Items:[{name:"ColorSettings",callbackInstance:this,callbackMethod:"renderDefaultColorSettings",itemType:"object",elementType:"Chart"},]},{CategoryName:"Pointer Settings",DisplayName:this.locale.propertyPanel.pointerSettingsText,Items:[{name:"ValuePointer",displayName:this.locale.propertyPanel.pointerSettings.valuePointer,value:this.getGaugeProperties().ValuePointer,valueList:["Range Pointer","Needle Pointer","Range with Needle"],itemType:"dropdown",isVisible:!this.getGaugeProperties().ShowRange&&this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge?!0:!1},{name:"RangeBarColor",displayName:this.locale.propertyPanel.pointerSettings.rangeBarColor,value:this.getGaugeProperties().DefaultColor.Color,itemType:"color",isVisible:!this.getGaugeProperties().ShowRange&&this.getGaugeProperties().ValuePointer!==ValuePointers.NeedlePointer?!0:!1},{name:"NeedlePointerColor",displayName:this.locale.propertyPanel.pointerSettings.needlePointerColor,value:this.getGaugeProperties().NeedlePointerColor,itemType:"color",isVisible:this.getGaugeProperties().ShowRange||this.getGaugeProperties().ValuePointer===ValuePointers.RangeWithNeedle||this.getGaugeProperties().ValuePointer===ValuePointers.NeedlePointer?!0:!1},{name:"NeedleValuePointerHeight",displayName:this.locale.propertyPanel.pointerSettings.needleValuePointerHeight,value:this.getGaugeProperties().NeedlePointerHeight,itemType:"float",decimalPlaces:0,minimum:20,maximum:100,unitType:"pt",isVisible:this.getGaugeProperties().ShowRange||this.getGaugeProperties().ValuePointer===ValuePointers.RangeWithNeedle||this.getGaugeProperties().ValuePointer===ValuePointers.NeedlePointer?!0:!1},{name:"TargetPointer",displayName:this.locale.propertyPanel.pointerSettings.targetPointer,value:this.getGaugeProperties().TargetPointer,valueList:["Line","Triangle","Inverted Triangle"],itemType:"dropdown",isVisible:this.getGaugeProperties().Data.Containers.length>0&&this.hasTarget&&this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge?!0:!1},{name:"TargetPointerColor",isVisible:this.getGaugeProperties().Data.Containers.length>0&&this.hasTarget&&this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge?!0:!1,displayName:this.locale.propertyPanel.pointerSettings.targetPointerColor,value:this.getGaugeProperties().TargetPointerColor,itemType:"color"}]},{CategoryName:"Scale Settings",DisplayName:this.locale.propertyPanel.scaleSettingsText,Items:[{name:"ScaleColor",displayName:this.locale.propertyPanel.scaleSettings.scaleColor,value:BoldBIDashboard.isNullOrUndefined(this.getGaugeProperties().ScaleColor)?this.defaultScaleColor:this.getGaugeProperties().ScaleColor,itemType:"color"},{name:"ShowTicks",displayName:this.locale.propertyPanel.scaleSettings.showTicks,value:this.getGaugeProperties().ShowTicks?!0:!1,itemType:"bool",isVisible:this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge?!0:!1},{name:"TicksPosition",displayName:this.locale.propertyPanel.scaleSettings.ticksPosition,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TicksPosition,this.getGaugeProperties().TicksPosition),itemType:"dropdown",valueList:["Inside","Outside"],isVisible:this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&this.getGaugeProperties().ShowTicks?!0:!1},{name:"TicksHeight",displayName:this.locale.propertyPanel.scaleSettings.ticksHeight,value:this.getGaugeProperties().TicksHeight,itemType:"float",decimalPlaces:0,minimum:1,maximum:10,unitType:"pt",isVisible:this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&this.getGaugeProperties().ShowTicks?!0:!1},{name:"TicksWidth",displayName:this.locale.propertyPanel.scaleSettings.ticksWidth,value:this.getGaugeProperties().TicksWidth,itemType:"float",decimalPlaces:0,minimum:1,maximum:5,unitType:"pt",isVisible:this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&this.getGaugeProperties().ShowTicks?!0:!1},{name:"ShowScaleLabel",displayName:this.locale.propertyPanel.scaleSettings.showScaleLabel,value:this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&this.getGaugeProperties().ShowScaleLabel?!0:!1,itemType:"bool",isVisible:this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge?!0:!1},{name:"ScaleLabelPosition",displayName:this.locale.propertyPanel.scaleSettings.scaleLabelPosition,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ScaleLabelPosition,this.getGaugeProperties().ScaleLabelPosition),itemType:"dropdown",valueList:["Inside","Outside"],isVisible:this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&this.getGaugeProperties().ShowScaleLabel?!0:!1},{name:"RangeWidth",displayName:this.locale.propertyPanel.scaleSettings.rangeWidth,value:this.getGaugeProperties().ScaleWidth,itemType:"float",decimalPlaces:0,minimum:1,maximum:60,unitType:"pt",isVisible:!0}]},{CategoryName:"Range Settings",DisplayName:this.locale.propertyPanel.rangeSettingsText,IsVisible:this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge?!0:!1,Items:[{name:"ShowRange",displayName:this.locale.propertyPanel.rangeSettings.showRange,value:this.getGaugeProperties().ShowRange?!0:!1,itemType:"bool",isDisable:this.hasActual||this.hasTarget?!1:!0},{name:"Ranges",displayName:this.locale.propertyPanel.rangeSettings.ranges,value:this.range,valueList:["Range 1","Range 2","Range 3"],itemType:"dropdown",isDisable:this.getGaugeProperties().ShowRange?!1:!0},{name:"Start",displayName:this.locale.propertyPanel.rangeSettings.start,value:this.getStartValue(),itemType:"float",minimum:-999999999999,maximum:999999999999,unitType:"pt",isDisable:this.getGaugeProperties().ShowRange?!1:!0},{name:"End",displayName:this.locale.propertyPanel.rangeSettings.end,value:this.getEndValue(),itemType:"float",minimum:-999999999999,maximum:999999999999,unitType:"pt",isDisable:this.getGaugeProperties().ShowRange?!1:!0},{name:"RangeColor",isDisable:this.getGaugeProperties().ShowRange?!1:!0,displayName:this.locale.propertyPanel.rangeSettings.rangeColor,value:this.getRangeColor(),itemType:"color"},{name:"RangeValueColor",displayName:this.locale.propertyPanel.rangeSettings.valueColor,value:this.getGaugeProperties().RangeValueType,valueList:["Default Color","Range Color"],itemType:"dropdown",isDisable:!this.getGaugeProperties().ShowRange&&this.getGaugeProperties().ShowActualValue?!0:!1},{name:"RangeLabelColor",displayName:this.locale.propertyPanel.rangeSettings.labelColor,value:this.getGaugeProperties().RangeLabelType,valueList:["Default Color","Range Color"],itemType:"dropdown",isDisable:this.getGaugeProperties().ShowRange?!1:!0},]},{CategoryName:"Link",DisplayName:this.locale.propertyPanel.linkText,Items:[{name:"Link",value:n.prototype.useExistingLink.call(this),category:"Item",itemType:"link",enableMode:LinkEnableMode.Row}]},{CategoryName:"FontSettings",DisplayName:this.locale.propertyPanel.fontSettings.categoryDisplayName,Items:[{name:"ScaleLabelFont",displayName:this.locale.propertyPanel.gaugeFontSettings.scaleLabelFont,itemType:"fontSettings",isTitleVisible:this.getScaleLabelFontVisibility(),autoFontSettingsInfo:{name:"AutoScaleLabelFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:this.getScaleLabelFontVisibility(),value:this.getGaugeProperties().GaugeFontSettings.IsAutoScaleLabelFontSize,itemType:"bool"},fontSizeInfo:{name:"ScaleLabelFontSize",isVisible:this.getScaleLabelFontVisibility(),isDisable:this.getGaugeProperties().GaugeFontSettings.IsAutoScaleLabelFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getGaugeProperties().GaugeFontSettings.ScaleLabelFontSize,itemType:"float",decimalPlaces:0,minimum:1,maximum:60,unitType:"px"}},{name:"ActualValueFont",displayName:this.locale.propertyPanel.gaugeFontSettings.actualValueFont,itemType:"fontSettings",isTitleVisible:this.getActualValueFontVisibility(),autoFontSettingsInfo:{name:"AutoActualValueFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:this.getActualValueFontVisibility(),value:this.getGaugeProperties().GaugeFontSettings.IsAutoActualValueFontSize,itemType:"bool"},fontSizeInfo:{name:"ActualValueFontSize",isVisible:this.getActualValueFontVisibility(),isDisable:this.getGaugeProperties().GaugeFontSettings.IsAutoActualValueFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getGaugeProperties().GaugeFontSettings.ActualValueFontSize,itemType:"float",decimalPlaces:0,minimum:1,maximum:60,unitType:"px"}},{name:"DifferenceValueFont",displayName:this.locale.propertyPanel.gaugeFontSettings.differenceValueFont,itemType:"fontSettings",isTitleVisible:this.getDifferenceValueFontVisibility(),autoFontSettingsInfo:{name:"AutoDifferenceValueFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:this.getDifferenceValueFontVisibility(),value:this.getGaugeProperties().GaugeFontSettings.IsAutoDifferenceValueFontSize,itemType:"bool"},fontSizeInfo:{name:"DifferenceValueFontSize",isVisible:this.getDifferenceValueFontVisibility(),isDisable:this.getGaugeProperties().GaugeFontSettings.IsAutoDifferenceValueFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getGaugeProperties().GaugeFontSettings.DifferenceValueFontSize,itemType:"float",decimalPlaces:0,minimum:1,maximum:60,unitType:"px"}},{name:"SeriesTitleFont",displayName:this.locale.propertyPanel.gaugeFontSettings.seriesTitleFont,itemType:"fontSettings",isTitleVisible:this.getSeriesTitleFontVisibility(),autoFontSettingsInfo:{name:"AutoSeriesTitleFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:this.getSeriesTitleFontVisibility(),value:this.getGaugeProperties().GaugeFontSettings.IsAutoSeriesTitleFontSize,itemType:"bool"},fontSizeInfo:{name:"SeriesTitleFontSize",isVisible:this.getSeriesTitleFontVisibility(),isDisable:this.getGaugeProperties().GaugeFontSettings.IsAutoSeriesTitleFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getGaugeProperties().GaugeFontSettings.SeriesTitleFontSize,itemType:"float",decimalPlaces:0,minimum:1,maximum:60,unitType:"px"}}]}]},t.Items.push(this.containerPropertyItem.getFilterSettingsItems(this.getGaugeProperties().FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo)),t.Items.push(this.containerPropertyItem.getContainerSettingItems(this.getGaugeProperties().ContainerSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo)),t.Items.push(this.containerPropertyItem.getContainerActionsItems(this.getGaugeProperties().ContainerSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo)),t.Items.push(i),t.Items.push(BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem.getNoDataContainerActionsProperty(this.locale.propertyPanel.noDataContainerText)),t},t.prototype.updateGaugeProperties=function(t,i,r,u){var f,e,s,o;switch(t){case"Name":this.getGaugeProperties().ContainerSettings.Title=r;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,r);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,r);break;case"GaugeType":this.updateGaugeType(r);break;case"ValuePointer":this.updateValuePointer(r);break;case"NeedleValuePointerHeight":this.updateNeedlePointerHeight(r);break;case"TargetPointer":this.updateTargetPointer(r);break;case"TargetPointerColor":this.updateTargetPointerColor(r);break;case"RangeWidth":this.updateRangeWidth(r);break;case"EnableAnimation":this.updateAnimation(r);break;case"ShowTooltip":this.updateShowTooltip(r);break;case"ShowActualValue":this.udpateActualValueVisibility(r);break;case"ShowDifferenceValue":this.updateDifferenceValueVisibility(r);break;case"Minimum":this.updateMinimumValue(r);break;case"Maximum":this.updateMaximumValue(r);break;case"LabelColor":this.updateLabelColor(r);break;case"ValueColor":this.updateValueColor(r);break;case"TitleColor":this.updateTitleColor(r);break;case"PercentColor":this.updatePercentColor(r);break;case"PercentSize":this.updatePercentSize(r);break;case"RangeBarColor":this.updateRangeColor(r);break;case"ScaleColor":this.updateScaleColor(r);break;case"NeedlePointerColor":this.updateNeedlePointerColor(r);break;case"Direction":this.updateDirection(r);break;case"HighColor":this.updateDirectionColor(r,"High");break;case"MediumColor":this.updateDirectionColor(r,"Medium");break;case"LowColor":this.updateDirectionColor(r,"Low");break;case"ShowValueLabel":this.updateShowValueLabel(r);break;case"ShowScaleLabel":this.updateShowScaleLabel(r);break;case"ShowTicks":this.updateShowTicks(r);break;case"TicksPosition":this.updateTicksPosition(r);break;case"ScaleLabelPosition":this.updateScaleLabelPosition(r);break;case"ValueLabelPosition":this.updateValueLabelPosition(r);break;case"TicksHeight":this.updateTicksHeight(r);break;case"TicksWidth":this.updateTicksWidth(r);break;case"ShowRange":this.updateShowRange(r,!0);break;case"LabelType":this.updateLabelType(r);break;case"ItemLink":n.prototype.updateLink.call(this,r);break;case"Ranges":this.updateRangeSelection(r);break;case"Start":this.updateStartValue(r);break;case"End":this.updateEndValue(r);break;case"RangeColor":this.updateColorValue(r);break;case"RangeLabelColor":this.updateRangeLabelColor(r);break;case"RangeValueColor":this.updateRangeValueColor(r);break;case"AutoScaleLabelFontSize":this.updateAutoScaleLabelFontSize(r);break;case"ScaleLabelFontSize":this.updateScaleLabelFontSize(r);break;case"AutoActualValueFontSize":this.updateAutoActualValueFontSize(r);break;case"ActualValueFontSize":this.updateActualValueFontSize(r);break;case"AutoDifferenceValueFontSize":this.updateAutoDifferenceValueFontSize(r);break;case"DifferenceValueFontSize":this.updateDifferenceValueFontSize(r);break;case"AutoSeriesTitleFontSize":this.updateAutoSeriesTitleFontSize(r);break;case"SeriesTitleFontSize":this.updateSeriesTitleFontSize(r)}if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(f=this.designPanelInstance.selectedReportItems,f.length>0))for(e=0;e<f.length;e++)s=f[e],s.attr("id")===this.controlContainer.attr("id")&&(o=this.bbdesigner$.extend(!0,{},u),o.categoryName=u.categoryName,o.valueList=u.valueList,this.propertyPanel.updatePropertyValue(o,"RadialGauge",r));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-radialgauge-item",this.designerId+"_"+this.getGaugeProperties().UniqueName,[t,r,i,u],[t,i,r,u])},t.prototype.setPropertyElement=function(n,t,i,r){this.propertyPanel.canUpdate=!1;var f=this.propertyPanel.getPropertyElement(this.getGaugePropertyPanel(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r),u=this.bbdesigner$.extend(!0,{},f);u.categoryName=n;this.propertyPanel.updatePropertyValue(u,"RadialGauge",i);this.propertyPanel.canUpdate=!0},t.prototype.getStartValue=function(){return this.range==="Range 1"?BoldBIDashboard.Dashboard.GaugeHelper.getUnformattedMaxValue(this.getGaugeProperties().RangeCollection[0].Start,this.numberFormat):this.range==="Range 3"?BoldBIDashboard.Dashboard.GaugeHelper.getUnformattedMaxValue(this.getGaugeProperties().RangeCollection[2].Start,this.numberFormat):BoldBIDashboard.Dashboard.GaugeHelper.getUnformattedMaxValue(this.getGaugeProperties().RangeCollection[1].Start,this.numberFormat)},t.prototype.getEndValue=function(){return this.range==="Range 1"?BoldBIDashboard.Dashboard.GaugeHelper.getUnformattedMaxValue(this.getGaugeProperties().RangeCollection[0].End,this.numberFormat):this.range==="Range 3"?BoldBIDashboard.Dashboard.GaugeHelper.getUnformattedMaxValue(this.getGaugeProperties().RangeCollection[2].End,this.numberFormat):BoldBIDashboard.Dashboard.GaugeHelper.getUnformattedMaxValue(this.getGaugeProperties().RangeCollection[1].End,this.numberFormat)},t.prototype.getRangeColor=function(){return this.range==="Range 1"?this.getGaugeProperties().RangeCollection[0].Color:this.range==="Range 3"?this.getGaugeProperties().RangeCollection[2].Color:this.getGaugeProperties().RangeCollection[1].Color},t.prototype.updateGaugeType=function(n){var i,u,t,r;if(this.getGaugeProperties().GaugeType=n,i=this.getGaugeAngle(),!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(u=this.widgetDataObj.length,t=0;t<u;t++)r=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(r)||this.refreshGaugeAngle(r,i,this.widgetDataObj[t],t);else this.refreshGaugeAngle(this.radialGaugeElement[0],i,this.widgetDataObj[0],0);this.updateFontSettingsVisibility()},t.prototype.updateValuePointer=function(n){var e,t,u,o;if(this.getGaugeProperties().ValuePointer=n,this.IsColorCustomizationEnabled())this.update(this.dataValues);else{var f=this.getRadialGaugeObj(this.radialGaugeElement[0]),i=0,r=0;if(!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(e=this.widgetDataObj.length,t=0;t<e;t++)u=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(u)||(o=this.getRadialGaugeObj(u),r=this.hasActual?BoldBIDashboard.DashboardUtil.getFormattedValue(this.widgetDataObj[t].actualValue,this.numberFormat):null,i=this.hasTarget?BoldBIDashboard.DashboardUtil.getFormattedValue(this.widgetDataObj[t].targetValue,this.numberFormat):null,this.refreshPointer(o,r,i));else BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)?this.refreshPointer(f,40,null):(r=this.hasActual?BoldBIDashboard.DashboardUtil.getFormattedValue(this.widgetDataObj[0].actualValue,this.numberFormat):null,i=this.hasTarget?BoldBIDashboard.DashboardUtil.getFormattedValue(this.widgetDataObj[0].targetValue,this.numberFormat):null,this.refreshPointer(f,r,i))}this.propertyPanel.updateItemVisibility(this.Type.toString(),"PointerSettings","NeedleValuePointerHeight",n!==ValuePointers.RangePointer);this.propertyPanel.updateItemVisibility(this.Type.toString(),"PointerSettings","NeedlePointerColor",n!==ValuePointers.RangePointer);this.propertyPanel.updateItemVisibility(this.Type.toString(),"PointerSettings","RangeBarColor",n!==ValuePointers.NeedlePointer);this.propertyPanel.refreshScroller()},t.prototype.updateNeedlePointerHeight=function(n){var r,t,i;if(this.getGaugeProperties().NeedlePointerHeight=n,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(i)||this.refreshNeedlePointer(i);else BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)?this.refreshNeedlePointer(this.radialGaugeElement[0]):this.refreshNeedlePointer(this.radialGaugeElement[0])},t.prototype.updateTargetPointer=function(n){var i,u,t,r;if(this.getGaugeProperties().TargetPointer=n,i=this.getJsonData("Data"),!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(u=this.widgetDataObj.length,t=0;t<u;t++)r=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(r)||this.refreshTargetPointer(r,i[t]);else this.refreshTargetPointer(this.radialGaugeElement[0],i[0])},t.prototype.updateTargetPointerColor=function(n){var i,u,t,r;if(this.getGaugeProperties().TargetPointerColor=n,this.IsColorCustomizationEnabled())this.update(this.dataValues);else if(i=this.getJsonData("Data"),!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&this.widgetDataObj.length>1)for(u=this.widgetDataObj.length,t=0;t<u;t++)r=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(r)||this.refreshTargetPointer(r,i[t]);else this.refreshTargetPointer(this.radialGaugeElement[0],i[0])},t.prototype.updateRangeWidth=function(n){var r,t,i;if(this.getGaugeProperties().ScaleWidth=n,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(i)||this.refreshRangeWidth(i);else this.refreshRangeWidth(this.radialGaugeElement[0])},t.prototype.updateAnimation=function(n){var r,t,i;if(this.getGaugeProperties().EnableAnimation=n,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(i)||this.refreshGaugeAnimation(i);else this.refreshGaugeAnimation(this.radialGaugeElement[0])},t.prototype.updateShowTooltip=function(n){var f,t,i,r,u;if(this.getGaugeProperties().ShowTooltip=n,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(f=this.widgetDataObj.length,t=0;t<f;t++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(i)||(r=this.getRadialGaugeObj(i),r.tooltip.enable=n,r.refresh());else u=this.getRadialGaugeObj(this.radialGaugeElement[0]),u.tooltip.enable=n,u.refresh()},t.prototype.updateMinimumValue=function(n){var r,t,i;if(this.isFromProp||n===""||this.getGaugeProperties().MaxValue<=n){this.isFromProp||this.minimumValueChange(this.getGaugeProperties().MinValue);return}if(this.getGaugeProperties().IsCustomMin=!0,this.getGaugeProperties().MinValue=n,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(i)||this.refreshMinValue(i);else this.refreshMinValue(this.radialGaugeElement[0])},t.prototype.minimumValueChange=function(n){try{var t=this.designerInstance.element.find("#"+this.designerId+"_RadialGauge_BasicSettings_Minimum").data("ejNumericTextbox");BoldBIDashboard.isNullOrUndefined(t)||(this.isFromProp=!0,t.option("value",n),this.isFromProp=!1)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.updateMaximumValue=function(n){var r,t,i;if(this.isFromProp||n===""||this.getGaugeProperties().MinValue>=n){this.isFromProp||this.maximumValueChange(this.getGaugeProperties().MaxValue);return}if(this.getGaugeProperties().IsCustomMax=!0,this.getGaugeProperties().MaxValue=n,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(i)||this.refreshMaxValue(i);else this.refreshMaxValue(this.radialGaugeElement[0])},t.prototype.updateRangeColor=function(n,t){var u,i,r;if(t===void 0&&(t=!0),t&&(this.getGaugeProperties().DefaultColor.Color!==n&&(this.getGaugeProperties().DefaultColor.IsEdited=!0),this.getGaugeProperties().DefaultColor.Color=n),BoldBIDashboard.isNullOrUndefined(this.getGaugeProperties().ColorCustomization))if(!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(u=this.widgetDataObj.length,i=0;i<u;i++)r=this.bbdesigner$(this.radialGaugeContent[0]).children()[i],BoldBIDashboard.isNullOrUndefined(r)||this.refreshRangeColor(r,n);else this.refreshRangeColor(this.radialGaugeElement[0],n);else this.updateGaugeData(this.dataValues)},t.prototype.updateScaleColor=function(n){var u,i,t,r;if(this.getGaugeProperties().ScaleColor=n,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(u=this.widgetDataObj.length,i=0;i<u;i++)t=this.radialGaugeContent.children()[i],BoldBIDashboard.isNullOrUndefined(t)||(this.refreshScaleColor(t,n),r=this.bbdesigner$(t).attr("id"),this.updateAnnotation(t,i,r));else this.refreshScaleColor(this.radialGaugeElement[0],n),t=this.radialGaugeElement[0],r=this.bbdesigner$(t).attr("id"),this.updateAnnotation(t,0,r)},t.prototype.updateNeedlePointerColor=function(n){var r,t,i;if(this.getGaugeProperties().NeedlePointerColor=n,this.IsColorCustomizationEnabled())this.update(this.dataValues);else if(!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(i)||this.refreshNeedlePointerColor(i,n);else this.refreshNeedlePointerColor(this.radialGaugeElement[0],n)},t.prototype.updateDirection=function(n){this.getGaugeProperties().Direction=this.getDirection(n);this.refreshGaugeDirection()},t.prototype.updateValueColor=function(n,t){var f,r,i,u;if(t===void 0&&(t=!0),t&&(this.getGaugeProperties().ValueColor=n),this.IsColorCustomizationEnabled())this.update(this.dataValues);else if(!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(f=this.widgetDataObj.length,r=0;r<f;r++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[r],BoldBIDashboard.isNullOrUndefined(i)||(u=this.bbdesigner$(i).attr("id"),this.updateAnnotation(i,r,u));else i=this.radialGaugeElement[0],u=this.bbdesigner$(i).attr("id"),this.updateAnnotation(i,0,u)},t.prototype.updateAnnotation=function(n,t,i,r){r===void 0&&(r=this.getGaugeProperties().LabelColor);var f=this.getRadialGaugeObj(n),e=this.getJsonData("Data")[t],u=this.getJsonData("WidgetData")[t];if(this.canCustomThemeApplied("Value")&&(r=this.themeHelper.getGaugeValueTextColor()),!BoldBIDashboard.isNullOrUndefined(u)){var o=u.actualValue,s=u.targetValue,h=this.getStatusColor(o,s),c=this.getStatusImage(o,s),l=this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge?u.percentOfVarience:c+"&nbsp;"+u.formattedVarience+"&nbsp;("+u.percentOfVarience+")",a=this.hasActual?u.formattedActualValue:u.formattedTargetValue;f.axes[0].annotations=this.hasActual&&this.hasTarget?this.getStatusAnnotation(i,e,null,u,h,l,r,f):this.getSingleAnnotation(i,e,null,a,r,f);this.refreshTicks(f);f.refresh()}},t.prototype.udpateActualValueVisibility=function(n){var i,t,r,u,f;for(this.getGaugeProperties().ShowActualValue=n,i=this.widgetDataObj.length,t=0;t<i;t++)BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)?(f=this.getRadialGaugeObj(this.radialGaugeElement[0]),f.refresh()):(r=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],u=this.getRadialGaugeObj(r),u.refresh());this.propertyPanel.updateItemVisibility(this.Type.toString(),"BasicSettings","ValueColor",this.getGaugeProperties().ShowActualValue);this.updateFontSettingsVisibility()},t.prototype.updateDifferenceValueVisibility=function(n){var i,t,r,u,f;for(this.getGaugeProperties().ShowDifferenceValue=n,i=this.widgetDataObj.length,t=0;t<i;t++)BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)?(f=this.getRadialGaugeObj(this.radialGaugeElement[0]),f.refresh()):(r=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],u=this.getRadialGaugeObj(r),u.refresh());this.propertyPanel.updateItemVisibility(this.Type.toString(),"BasicSettings","PercentColor",this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge&&this.getGaugeProperties().ShowDifferenceValue);this.propertyPanel.updateItemVisibility(this.Type.toString(),"BasicSettings","PercentSize",this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge&&this.getGaugeProperties().ShowDifferenceValue)},t.prototype.getStatusImage=function(n,t){return n-t==0?"●":!0&&n-t>=0?"▲":!0&&n-t<0?"▼":!1&&n-t>0?"▲":"▼"},t.prototype.getStatusColor=function(n,t){return n-t==0?this.getGaugeProperties().MediumColor:this.getGaugeProperties().Direction===GaugeDirection.HighIsGood&&n>=t?this.getGaugeProperties().HighColor:this.getGaugeProperties().Direction===GaugeDirection.LowIsGood&&n<t?this.getGaugeProperties().HighColor:this.getGaugeProperties().LowColor},t.prototype.getStatusColorForTheme=function(n,t){var i=getComputedStyle(document.querySelector(":root"));return n-t==0?i.getPropertyValue("--circulargauge-widget-differencevalue-medium-color").replace(/"/g,""):this.getGaugeProperties().Direction===GaugeDirection.HighIsGood&&n>=t?i.getPropertyValue("--circulargauge-widget-differencevalue-high-color").replace(/"/g,""):this.getGaugeProperties().Direction===GaugeDirection.LowIsGood&&n<t?i.getPropertyValue("--circulargauge-widget-differencevalue-high-color").replace(/"/g,""):i.getPropertyValue("--circulargauge-widget-differencevalue-low-color").replace(/"/g,"")},t.prototype.getSingleAnnotation=function(n,t,i,r,u,f){var e,o,s;return u===void 0&&(u=this.getGaugeProperties().LabelColor),e=this.themeHelper.getGaugeValueFont(),i=BoldBIDashboard.isNullOrUndefined(e.size)?i:e.size,o=e.weight,s=e.family,[{content:'<div id="'+n+'_annotation_1" style="color:'+this.getAdvancedCustomizedColor(t,ColorCustomizationProperty.ActualValueColor,f)+";font-weight:"+o+"font-family:"+s+";font-size:"+i+'px;">'+r+"<\/div>",zIndex:0,angle:0,radius:"0%",textStyle:{color:u}},{content:"",angle:-95,radius:"95%",zIndex:0},{content:"",angle:95,radius:"95%",zIndex:0}]},t.prototype.getStatusAnnotation=function(n,t,i,r,u,f,e,o){var s,h,c,l;return e===void 0&&(e=this.getGaugeProperties().LabelColor),s=this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge,h=this.themeHelper.getGaugeValueFont(),i=BoldBIDashboard.isNullOrUndefined(h.size)?i:h.size,c=h.weight,l=h.family,[{content:'<div class="e-gauge-annotation"><div id="'+n+'_annotation_1" style="color:'+this.getAdvancedCustomizedColor(t,ColorCustomizationProperty.ActualValueColor,o)+";font-weight:"+c+"; font-family:"+l+";font-size:"+i+'px;">'+r.formattedActualValue+'<\/div><div id="'+n+'_annotation_2" style="color:'+(this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge?this.getGaugeProperties().PercentValueColor:u)+";background:"+(s?"":this.getBackgroundColor(r.actualValue,r.targetValue))+";border-radius:"+(s?"":"14.4444px;")+"border:"+(s?0:"0.842105px solid"+u)+";padding: "+(s?"":"4px 8px;")+"white-space:pre;width:fit-content;font-weight:"+c+"font-family:"+l+"font-size:"+(s?this.getGaugeProperties().PercentValueSize:i)+'px; ">'+f+"<\/div><\/div>",zIndex:0,angle:0,radius:"95%",textStyle:{color:e}},{content:"",angle:-95,radius:"95%",zIndex:0},{content:"",angle:95,radius:"95%",zIndex:0}]},t.prototype.getBackgroundColor=function(n,t){return n-t==0?"rgba(255, 231, 0, 0.05)":this.getGaugeProperties().Direction===GaugeDirection.HighIsGood&&n>=t?"rgba(192, 242, 220, 0.25)":this.getGaugeProperties().Direction===GaugeDirection.LowIsGood&&n<t?"rgba(192, 242, 220, 0.25)":"rgba(255, 108, 64, 0.07)"},t.prototype.updateTitleColor=function(n,t){var f,i,r,u;if(t===void 0&&(t=!0),t&&(this.getGaugeProperties().TitleColor=n),this.IsColorCustomizationEnabled())this.update(this.dataValues);else if(!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(f=this.widgetDataObj.length,i=0;i<f;i++)r=this.bbdesigner$(this.radialGaugeContent[0]).children()[i],BoldBIDashboard.isNullOrUndefined(r)||(u=this.getRadialGaugeObj(r),u.titleStyle.color=n,u.refresh())},t.prototype.updatePercentColor=function(n){var r,t,i,u,f;if(this.getGaugeProperties().PercentValueColor=n,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(i)||(u=this.getRadialGaugeObj(i),u.refresh());else f=this.getRadialGaugeObj(this.radialGaugeElement[0]),f.refresh()},t.prototype.updatePercentSize=function(n){var r,t,i,u,f;if(this.getGaugeProperties().PercentValueSize=n,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(i)||(u=this.getRadialGaugeObj(i),u.refresh());else f=this.getRadialGaugeObj(this.radialGaugeElement[0]),f.refresh()},t.prototype.updateItemVisibilityBasedOnShowRange=function(n){this.propertyPanel.updateItemVisibility(this.Type.toString(),"PointerSettings","ValuePointer",!n);this.propertyPanel.updateItemVisibility(this.Type.toString(),"PointerSettings","RangeBarColor",!n);this.propertyPanel.updateItemVisibility(this.Type.toString(),"PointerSettings","NeedlePointerColor",this.getGaugeProperties().ValuePointer!==ValuePointers.RangePointer||n);this.propertyPanel.updateItemVisibility(this.Type.toString(),"PointerSettings","NeedleValuePointerHeight",this.getGaugeProperties().ValuePointer!==ValuePointers.RangePointer||n);this.propertyPanel.updateItemDisable("dropdown",this.Type.toString(),"RangeSettings","Ranges",!n);this.propertyPanel.updateItemDisable("dropdown",this.Type.toString(),"RangeSettings","RangeValueColor",!n);this.propertyPanel.updateItemDisable("dropdown",this.Type.toString(),"RangeSettings","RangeLabelColor",!n);this.propertyPanel.updateItemDisable("float",this.Type.toString(),"RangeSettings","Start",!n);this.propertyPanel.updateItemDisable("float",this.Type.toString(),"RangeSettings","End",!n);this.propertyPanel.updateItemDisable("color",this.Type.toString(),"RangeSettings","RangeColor",!n)},t.prototype.resetAdvanceColorSettings=function(){this.getGaugeProperties().EnableColorSettings=!1;this.getGaugeProperties().ColorCustomization=null;var n=this.widgetHelper.getCurrentWidgetInstance();this.disableColorCustomizationButton(n);this.designerInstance.modules.serialization.notifyChange()},t.prototype.refreshGaugeDirection=function(){var e,i,r,t,o,u,f,n;if(!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(e=this.widgetDataObj.length,i=0;i<e;i++)r=this.bbdesigner$(this.radialGaugeContent[0]).children()[i],BoldBIDashboard.isNullOrUndefined(r)||(t=this.getRadialGaugeObj(r),o=this.bbdesigner$(r).attr("id"),BoldBIDashboard.isNullOrUndefined(t.axes[0].annotations)||BoldBIDashboard.isNullOrUndefined(t.axes[0].annotations[1])||(u=t.axes[0].pointers[0].value,f=this.getTargetValue(t),this.setDirectionColor(o,u,f)));else if(n=this.getRadialGaugeObj(this.radialGaugeElement[0]),!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.axes[0].annotations)&&!BoldBIDashboard.isNullOrUndefined(n.axes[0].annotations[1])){var s=this.bbdesigner$(this.radialGaugeElement[0]).attr("id"),u=n.axes[0].pointers[0].value,f=this.getTargetValue(n);this.setDirectionColor(s,u,f)}},t.prototype.updateDirectionColor=function(n,t){t==="High"?this.getGaugeProperties().HighColor=n:t==="Medium"?this.getGaugeProperties().MediumColor=n:this.getGaugeProperties().LowColor=n;this.refreshGaugeDirection()},t.prototype.updateLabelColor=function(n){this.getGaugeProperties().LabelColor=n;this.refreshTicksOnPropertyChange()},t.prototype.refreshTicksOnPropertyChange=function(){var u,n,t,i,r;if(!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(u=this.widgetDataObj.length,n=0;n<u;n++)t=this.bbdesigner$(this.radialGaugeContent[0]).children()[n],BoldBIDashboard.isNullOrUndefined(t)||(i=this.getRadialGaugeObj(t),this.refreshTicks(i),i.refresh());else r=this.getRadialGaugeObj(this.radialGaugeElement[0]),this.refreshTicks(r),r.refresh()},t.prototype.updateShowValueLabel=function(n){var i,r,t,u;if(this.getGaugeProperties().ShowValueLabel=n,i=n?"block":"none",!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)u=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],this.showValueLabel(u,i);else this.showValueLabel(this.radialGaugeElement[0],i);this.propertyPanel.refreshScroller()},t.prototype.showValueLabel=function(n){var t,o,s,e;if(!BoldBIDashboard.isNullOrUndefined(n)){var i=this.bbdesigner$(n).attr("id"),u=!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent),w=u?this.getGaugeProperties().ShowActualValue&&this.seriesWidth>=132&&this.seriesHeight>=100:this.getGaugeProperties().ShowActualValue&&this.widgetJson.ContainerSettings.Bounds.ColumnSpan>4&&this.widgetJson.ContainerSettings.Bounds.RowSpan>4,b=u?this.getGaugeProperties().ShowActualValue?this.seriesWidth>=256&&this.seriesHeight>=219:this.seriesWidth>=132&&this.seriesHeight>=100:this.getGaugeProperties().ShowActualValue?this.widgetJson.ContainerSettings.Bounds.ColumnSpan>8&&this.widgetJson.ContainerSettings.Bounds.RowSpan>8:this.widgetJson.ContainerSettings.Bounds.ColumnSpan>4&&this.widgetJson.ContainerSettings.Bounds.RowSpan>4;this.getGaugeProperties().ShowActualValue&&w?this.designerInstance.element.find("#"+i+"_annotation_1").css("display","block"):this.designerInstance.element.find("#"+i+"_annotation_1").css("display","none");this.getGaugeProperties().ShowDifferenceValue&&b?this.designerInstance.element.find("#"+i+"_annotation_2").css("display","block"):this.designerInstance.element.find("#"+i+"_annotation_2").css("display","none");t=this.getRadialGaugeObj(n);BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(t.axes[0].annotations)||BoldBIDashboard.isNullOrUndefined(t.axes[0].annotations[1])||(o=t.axes[0].pointers[0].value,s=this.getTargetValue(t),this.setDirectionColor(i,o,s));var f=this.themeHelper.getGaugeValueFont(),h=this.themeHelper.getGaugeDifferenceValueFont(),tt=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode();if(!BoldBIDashboard.isNullOrUndefined(t.axes[0].annotations[0])&&!BoldBIDashboard.isNullOrUndefined(t.axes[0].annotations[0].content)&&t.axes[0].annotations[0].content!==""){if(this.hasActual&&this.hasTarget){var c=this.bbdesigner$(t.axes[0].annotations[0].content).children()[0].innerHTML,l=this.getActualValueFontSize(c,t),k=this.getDifferenceValueFontSize(this.radius,9,14);this.designerInstance.element.find("#"+i+"_annotation_1")[0].setAttribute("style",this.designerInstance.element.find("#"+i+"_annotation_1")[0].getAttribute("style")+"font-size: "+l+";font-weight:"+f.weight+";font-family:"+f.family+";");this.designerInstance.element.find("#"+i+"_annotation_2")[0].setAttribute("style",this.designerInstance.element.find("#"+i+"_annotation_2")[0].getAttribute("style")+"font-size: "+k+";font-weight:"+h.weight+";font-family:"+h.family+";");var d=this.getStatusColor(t.axes[0].pointers[0].value,this.getTargetValue(t)),a=this.getStatusColorForTheme(t.axes[0].pointers[0].value,this.getTargetValue(t)),g=this.themeHelper.getGaugeDifferenceValueTextColor();this.getGaugeProperties().PercentValueColor=(this.designerInstance.canApplyTheme()||this.designerInstance.isEnableCustomDashboardTheme)&&this.getGaugeProperties().PercentValueColor==="#000000"?"var(--designer-text-color)":this.getGaugeProperties().PercentValueColor;e=this.isDifferenceLabelColorVariableEnabled(a)?a:this.isDifferenceLabelColorEnabled()?g:this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge?this.getGaugeProperties().PercentValueColor:d;this.designerInstance.element.find("#"+i+"_annotation_2").css({color:e,"border-color":e})}else if(this.hasActual||this.hasTarget){var v=this.getRadialGaugeObj(n),c=this.bbdesigner$(v.axes[0].annotations[0].content)[0].innerText,l=this.getActualValueFontSize(c,v);this.designerInstance.element.find("#"+i+"_annotation_1")[0].setAttribute("style",this.designerInstance.element.find("#"+i+"_annotation_1")[0].getAttribute("style")+"font-size: "+l+";font-weight:"+f.weight+";font-family:"+f.family+";")}var y=this.designerInstance.element.find("#"+i+"_Axis_0_Annotation_0").width(),r=this.designerInstance.element.find("#"+i+"_Axis_0_Annotation_0").height(),nt=this.seriesWidth>y?(this.seriesWidth-y)/2:0,p=0;p=(this.getGaugeProperties().ValuePointer!==ValuePointers.RangePointer||this.getGaugeProperties().ShowRange)&&this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge?this.getGaugeProperties().GaugeType===GaugeTypes.HalfRadialGauge?t.midPoint.y+(this.hasSeries?0:this.getNeedleWidth()):u?(this.seriesHeight+26)/2+this.radius-r:(this.seriesHeight-4)/2+this.radius-r:this.getGaugeProperties().GaugeType===GaugeTypes.HalfRadialGauge?t.midPoint.y:this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge?(this.seriesHeight-4)/2-(this.hasSeries?r/6:r/2):u?(this.seriesHeight+26)/2-r/2:(this.seriesHeight-4)/2-r/2;this.designerInstance.element.find("#"+i+"_Axis_0_Annotation_0").css("left",nt+"px");this.designerInstance.element.find("#"+i+"_Axis_0_Annotation_0").css("top",p+"px")}}},t.prototype.getFontSizeForAnnotation=function(n){var t=0,i=this.radius,r;return t=i*2,r={height:50,width:t,adjustFont:"width",text:n},Math.min(i/5,parseInt((BoldBIDashboard.Dashboard.GaugeHelper.getOptimumFontSize(r)+"px").replace("px","")))},t.prototype.updateShowScaleLabel=function(n){var f,t,i,r,u;if(this.getGaugeProperties().ShowScaleLabel=n,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(f=this.widgetDataObj.length,t=0;t<f;t++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(i)||(r=this.getRadialGaugeObj(i),this.refreshTicks(r),r.refresh());else u=this.getRadialGaugeObj(this.radialGaugeElement[0]),this.refreshTicks(u),u.refresh();this.propertyPanel.updateItemVisibility(this.Type.toString(),"ScaleSettings","ScaleLabelPosition",n&&(this.getGaugeProperties().GaugeType!==GaugeTypes.HalfRadialGauge||this.getGaugeProperties().GaugeType===GaugeTypes.HalfRadialGauge&&this.getGaugeProperties().ShowTicks));this.updateFontSettingsVisibility()},t.prototype.updateShowTicks=function(n){var f,t,i,r,u;if(this.getGaugeProperties().ShowTicks=n,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(f=this.widgetDataObj.length,t=0;t<f;t++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(i)||(r=this.getRadialGaugeObj(i),this.refreshTicks(r),r.refresh());else u=this.getRadialGaugeObj(this.radialGaugeElement[0]),this.refreshTicks(u),u.refresh();this.propertyPanel.updateItemVisibility(this.Type.toString(),"ScaleSettings","TicksHeight",n);this.propertyPanel.updateItemVisibility(this.Type.toString(),"ScaleSettings","TicksWidth",n);this.propertyPanel.updateItemVisibility(this.Type.toString(),"ScaleSettings","ScaleLabelPosition",this.getGaugeProperties().ShowScaleLabel&&(this.getGaugeProperties().GaugeType!==GaugeTypes.HalfRadialGauge||this.getGaugeProperties().GaugeType===GaugeTypes.HalfRadialGauge&&this.getGaugeProperties().ShowTicks)?!0:!1);this.propertyPanel.updateItemVisibility(this.Type.toString(),"ScaleSettings","TicksPosition",n);this.propertyPanel.refreshScroller()},t.prototype.updateTicksPosition=function(n){var f,t,i,r,u;if(this.getGaugeProperties().TicksPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(TicksPosition,n),!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(f=this.widgetDataObj.length,t=0;t<f;t++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(i)||(r=this.getRadialGaugeObj(i),this.refreshTicks(r),r.refresh());else u=this.getRadialGaugeObj(this.radialGaugeElement[0]),this.refreshTicks(u),u.refresh()},t.prototype.updateScaleLabelPosition=function(n,t){var e,i,r,u,f;if(t===void 0&&(t=!0),t&&(this.getGaugeProperties().ScaleLabelPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(ScaleLabelPosition,n)),!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(e=this.widgetDataObj.length,i=0;i<e;i++)r=this.bbdesigner$(this.radialGaugeContent[0]).children()[i],BoldBIDashboard.isNullOrUndefined(r)||(u=this.getRadialGaugeObj(r),this.refreshTicks(u),u.refresh());else f=this.getRadialGaugeObj(this.radialGaugeElement[0]),this.refreshTicks(f),f.refresh()},t.prototype.updateValueLabelPosition=function(n){var r,t,i,u,f;if(this.getGaugeProperties().ValueLabelPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(ValueLabelPosition,n),!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(i)||(u=this.getRadialGaugeObj(i),u.refresh());else f=this.getRadialGaugeObj(this.radialGaugeElement[0]),f.refresh()},t.prototype.updateTicksHeight=function(n){var f,t,i,r,u;if(this.getGaugeProperties().TicksHeight=n,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(f=this.widgetDataObj.length,t=0;t<f;t++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(i)||(r=this.getRadialGaugeObj(i),this.refreshTicks(r),r.refresh());else u=this.getRadialGaugeObj(this.radialGaugeElement[0]),this.refreshTicks(u),u.refresh()},t.prototype.updateTicksWidth=function(n){var f,t,i,r,u;if(this.getGaugeProperties().TicksWidth=n,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(f=this.widgetDataObj.length,t=0;t<f;t++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(i)||(r=this.getRadialGaugeObj(i),this.refreshTicks(r),r.refresh());else u=this.getRadialGaugeObj(this.radialGaugeElement[0]),this.refreshTicks(u),u.refresh()},t.prototype.updateShowRange=function(n,t){var f,e,h,o,i,r,u,s;if(this.getGaugeProperties().ShowRange=n,this.getGaugeProperties().ShowRange&&this.IsColorCustomizationEnabled()&&this.resetAdvanceColorSettings(),this.updateItemVisibilityBasedOnShowRange(n),f=null,e=null,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(h=this.widgetDataObj.length,o=0;o<h;o++)u=this.bbdesigner$(this.radialGaugeContent[0]).children()[o],s=this.bbdesigner$(u).attr("id"),BoldBIDashboard.isNullOrUndefined(u)||(i=this.getRadialGaugeObj(u),f=i.axes[0].pointers[0].value,e=this.getTargetValue(i),this.numberFormat=this.getFormatString(i),this.customMin=i.axes[0].minimum,this.customMax=i.axes[0].maximum,n?(this.getGaugeProperties().ShowRange=!1,this.calculateRanges(i,i.axes[0].minimum,i.axes[0].maximum),this.getGaugeProperties().ShowRange=n,this.renderGaugeWithRange(i,f,e)):(this.createRange(i),i.axes[0].pointers=this.createPointers(f,e)),this.updateAnnotation(u,o,s),t&&i.refresh());else r=this.getRadialGaugeObj(this.radialGaugeElement[0]),this.numberFormat=this.getFormatString(r),f=r.axes[0].pointers[0].value,e=this.getTargetValue(r),this.customMin=r.axes[0].minimum,this.customMax=r.axes[0].maximum,u=this.radialGaugeElement[0],s=this.bbdesigner$(u).attr("id"),n?(this.getGaugeProperties().ShowRange=!1,this.calculateRanges(r,r.axes[0].minimum,r.axes[0].maximum),this.getGaugeProperties().ShowRange=n,this.renderGaugeWithRange(r,f,e)):(this.createRange(r),r.axes[0].pointers=this.createPointers(f,e)),this.updateAnnotation(u,0,s),t&&r.refresh();this.propertyPanel.refreshScroller()},t.prototype.updateLabelType=function(n){var r,t,i,u,f;if(this.getGaugeProperties().LabelType=n,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=this.bbdesigner$(this.radialGaugeContent[0]).children()[t],BoldBIDashboard.isNullOrUndefined(i)||(u=this.getRadialGaugeObj(i),u.refresh());else f=this.getRadialGaugeObj(this.radialGaugeElement[0]),f.refresh()},t.prototype.updateRangeSelection=function(n){this.range=n;this.setPropertyElement("RangeSettings","Start",this.getStartValue());this.setPropertyElement("RangeSettings","End",this.getEndValue());this.setPropertyElement("RangeSettings","RangeColor",this.getRangeColor());this.setPropertyElement("RangeSettings","RangeValueColor",this.getGaugeProperties().RangeValueType)},t.prototype.updateRangeLabelColor=function(n){var u,i,t,r;if(this.getGaugeProperties().RangeLabelType=n,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(u=this.widgetDataObj.length,i=0;i<u;i++)t=this.bbdesigner$(this.radialGaugeContent[0]).children()[i],BoldBIDashboard.isNullOrUndefined(t)||(r=this.bbdesigner$(t).attr("id"),this.updateAnnotation(t,i,r));else t=this.radialGaugeElement[0],r=this.bbdesigner$(t).attr("id"),this.updateAnnotation(t,0,r)},t.prototype.updateRangeValueColor=function(n){var u,i,t,r;if(this.getGaugeProperties().RangeValueType=n,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(u=this.widgetDataObj.length,i=0;i<u;i++)t=this.bbdesigner$(this.radialGaugeContent[0]).children()[i],BoldBIDashboard.isNullOrUndefined(t)||(r=this.bbdesigner$(t).attr("id"),this.updateAnnotation(t,i,r));else t=this.radialGaugeElement[0],r=this.bbdesigner$(t).attr("id"),this.updateAnnotation(t,0,r)},t.prototype.updateAutoScaleLabelFontSize=function(n){this.getGaugeProperties().GaugeFontSettings.IsAutoScaleLabelFontSize=n;this.propertyPanel.updateItemDisable("float","RadialGauge","FontSettings","ScaleLabelFontSize",n);this.updateScaleLabelFontSize(this.getGaugeProperties().GaugeFontSettings.ScaleLabelFontSize)},t.prototype.updateScaleLabelFontSize=function(n){this.getGaugeProperties().GaugeFontSettings.ScaleLabelFontSize=n;this.updateScaleLabelPosition(null,!1)},t.prototype.getScaleLabelFontSize=function(n){if(this.getGaugeProperties().GaugeFontSettings.IsAutoScaleLabelFontSize){var t=this.themeHelper.getGaugeLabelFont(),i=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode();return i&&this.isAutoLabelFontSettingsDisabled()?t.size:this.getGaugeProperties().GaugeType===GaugeTypes.HalfRadialGauge?this.getValueLabelFontSize()+"px":BoldBIDashboard.isNullOrUndefined(n)?this.getFontSizeBasedOnResolution():"0px"}return this.getGaugeProperties().GaugeFontSettings.ScaleLabelFontSize+"px"},t.prototype.getScaleLabelFontVisibility=function(){return this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge?!1:this.getGaugeProperties().ShowScaleLabel},t.prototype.updateAutoActualValueFontSize=function(n){this.getGaugeProperties().GaugeFontSettings.IsAutoActualValueFontSize=n;this.propertyPanel.updateItemDisable("float","RadialGauge","FontSettings","ActualValueFontSize",n);this.updateActualValueFontSize(this.getGaugeProperties().GaugeFontSettings.ActualValueFontSize)},t.prototype.updateActualValueFontSize=function(n){this.getGaugeProperties().GaugeFontSettings.ActualValueFontSize=n;this.updateValueColor(null,!1)},t.prototype.getActualValueFontSize=function(n,t){if(this.getGaugeProperties().GaugeFontSettings.IsAutoActualValueFontSize){var i=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode(),r=this.themeHelper.getGaugeValueFont();return i&&this.isAutoValueFontSettingsDisabled()?r.size:this.getFontSizeForAnnotation(n,t)+"px"}return this.getGaugeProperties().GaugeFontSettings.ActualValueFontSize+"px"},t.prototype.getActualValueFontVisibility=function(){return this.getGaugeProperties().ShowActualValue},t.prototype.updateAutoDifferenceValueFontSize=function(n){this.getGaugeProperties().GaugeFontSettings.IsAutoDifferenceValueFontSize=n;this.propertyPanel.updateItemDisable("float","RadialGauge","FontSettings","DifferenceValueFontSize",n);this.updateDifferenceValueFontSize(this.getGaugeProperties().GaugeFontSettings.DifferenceValueFontSize)},t.prototype.updateDifferenceValueFontSize=function(n){this.getGaugeProperties().GaugeFontSettings.DifferenceValueFontSize=n;this.updateValueColor(null,!1)},t.prototype.getDifferenceValueFontSize=function(n,t,i){if(this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge)return this.getGaugeProperties().PercentValueSize+"px";if(this.getGaugeProperties().GaugeFontSettings.IsAutoDifferenceValueFontSize){var r=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode(),u=this.themeHelper.getGaugeDifferenceValueFont();return r&&this.isAutoDifferenceValueFontSettingsDisabled()?u.size:Math.min(n/t,i)+"px"}return this.getGaugeProperties().GaugeFontSettings.DifferenceValueFontSize+"px"},t.prototype.getDifferenceValueFontVisibility=function(){return this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge?!1:this.getGaugeProperties().ShowDifferenceValue},t.prototype.updateAutoSeriesTitleFontSize=function(n){this.getGaugeProperties().GaugeFontSettings.IsAutoSeriesTitleFontSize=n;this.propertyPanel.updateItemDisable("float","RadialGauge","FontSettings","SeriesTitleFontSize",n);this.updateSeriesTitleFontSize(this.getGaugeProperties().GaugeFontSettings.SeriesTitleFontSize)},t.prototype.updateSeriesTitleFontSize=function(n){this.getGaugeProperties().GaugeFontSettings.SeriesTitleFontSize=n;this.updateTitleColor(this.getGaugeProperties().TitleColor,!1)},t.prototype.getSeriesTitleFontSize=function(){if(this.getGaugeProperties().GaugeFontSettings.IsAutoSeriesTitleFontSize){var n=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode(),t=this.themeHelper.getGaugeTitleFont();return n?t.size:this.getFontSizeBasedOnResolution()}return this.getGaugeProperties().GaugeFontSettings.SeriesTitleFontSize+"px"},t.prototype.getSeriesTitleFontVisibility=function(){return this.getSeriesCount()>0},t.prototype.updateFontSettingsVisibility=function(){this.updateTitleVisibility("ScaleLabelFont",this.getScaleLabelFontVisibility());this.propertyPanel.updateItemVisibility(this.Type.toString(),"FontSettings","AutoScaleLabelFontSize",this.getScaleLabelFontVisibility());this.propertyPanel.updateItemVisibility(this.Type.toString(),"FontSettings","ScaleLabelFontSize",this.getScaleLabelFontVisibility());this.updateTitleVisibility("ActualValueFont",this.getActualValueFontVisibility());this.propertyPanel.updateItemVisibility(this.Type.toString(),"FontSettings","AutoActualValueFontSize",this.getActualValueFontVisibility());this.propertyPanel.updateItemVisibility(this.Type.toString(),"FontSettings","ActualValueFontSize",this.getActualValueFontVisibility());this.updateTitleVisibility("DifferenceValueFont",this.getDifferenceValueFontVisibility());this.propertyPanel.updateItemVisibility(this.Type.toString(),"FontSettings","AutoDifferenceValueFontSize",this.getDifferenceValueFontVisibility());this.propertyPanel.updateItemVisibility(this.Type.toString(),"FontSettings","DifferenceValueFontSize",this.getDifferenceValueFontVisibility());this.updateTitleVisibility("SeriesTitleFont",this.getSeriesTitleFontVisibility());this.propertyPanel.updateItemVisibility(this.Type.toString(),"FontSettings","AutoSeriesTitleFontSize",this.getSeriesTitleFontVisibility());this.propertyPanel.updateItemVisibility(this.Type.toString(),"FontSettings","SeriesTitleFontSize",this.getSeriesTitleFontVisibility())},t.prototype.updateTitleVisibility=function(n,t,i){var f=BoldBIDashboard.isNullOrUndefined(i)?BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designPanelInstance.selectedReportItems[0])):i,r=f.propertyPanel.propertyContainer.find("#"+f.designerId+"_propertyItemHeaderText_"+n),u;r.css("display",t?"inline-block":"none");r.length>0&&(u=r.data("BoldBIDashboardScroller"),BoldBIDashboard.isNullOrUndefined(u)||u.refresh())},t.prototype.updateStartValue=function(n){var u,i,t,r;if(this.isFromProp||n===""){n===""&&this.setPropertyElement("RangeSettings","Start",this.getStartValue());return}if(this.getGaugeProperties().IsCustomRange=!0,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(u=this.widgetDataObj.length,i=0;i<u;i++)t=this.bbdesigner$(this.radialGaugeContent[0]).children()[i],r=this.bbdesigner$(t).attr("id"),BoldBIDashboard.isNullOrUndefined(t)||(this.refreshStartValue(t,n),this.updateAnnotation(t,i,r));else this.refreshStartValue(this.radialGaugeElement[0],n),t=this.radialGaugeElement[0],r=this.bbdesigner$(t).attr("id"),this.updateAnnotation(t,0,r)},t.prototype.updateEndValue=function(n){var u,i,t,r;if(this.isFromProp||n===""){n===""&&this.setPropertyElement("RangeSettings","End",this.getEndValue());return}if(this.getGaugeProperties().IsCustomRange=!0,!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(u=this.widgetDataObj.length,i=0;i<u;i++)t=this.bbdesigner$(this.radialGaugeContent[0]).children()[i],r=this.bbdesigner$(t).attr("id"),BoldBIDashboard.isNullOrUndefined(t)||(this.refreshEndValue(t,n),this.updateAnnotation(t,i,r));else this.refreshEndValue(this.radialGaugeElement[0],n),t=this.radialGaugeElement[0],r=this.bbdesigner$(t).attr("id"),this.updateAnnotation(t,0,r)},t.prototype.updateColorValue=function(n){var u,i,t,r;if(!this.isFromProp)if(!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)&&!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.widgetDataObj.length>1)for(u=this.widgetDataObj.length,i=0;i<u;i++)t=this.bbdesigner$(this.radialGaugeContent[0]).children()[i],r=this.bbdesigner$(t).attr("id"),BoldBIDashboard.isNullOrUndefined(t)||(this.refreshColor(t,n),this.updateAnnotation(t,i,r));else this.refreshColor(this.radialGaugeElement[0],n),t=this.radialGaugeElement[0],r=this.bbdesigner$(t).attr("id"),this.updateAnnotation(t,0,r)},t.prototype.getFormatString=function(n){var t,i;return(this.hasActual||this.hasTarget)&&!BoldBIDashboard.isNullOrUndefined(this.widgetDataObj)?(t=0,this.widgetDataObj.length>1&&(i=this.bbdesigner$(n.element).attr("id"),t=+i.split("_").pop()),this.widgetDataObj[t].numberFormat):""},t.prototype.calculateRanges=function(n,t,i){var r;if(this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge){if(this.getGaugeProperties().IsCustomRange)return;var u=i-t,f=u*.33+t,e=u*.66+t,o=i,s=this.getGaugeProperties().RangeCollection.length;for(r=0;r<s;r++)this.getGaugeProperties().RangeCollection[r].Start=r===0?t:r===1?f:e,this.getGaugeProperties().RangeCollection[r].End=r===0?f:r===1?e:o;this.isFromProp=!0;this.updateRangeSelection(this.range);this.isFromProp=!1}},t.prototype.createPointers=function(n,t,i){switch(this.getGaugeProperties().ValuePointer){case ValuePointers.NeedlePointer:return this.createNeedlePointerAlone(n,t,i);case ValuePointers.RangePointer:return this.createRangeBar(n,t,i);default:return this.createRangeBarWithNeedle(n,t,i)}},t.prototype.createRange=function(n){n.axes[0].ranges=[{start:this.customMin,end:this.customMax,radius:"100%",startWidth:this.rangeWidth,endWidth:this.rangeWidth,color:BoldBIDashboard.isNullOrUndefined(this.getGaugeProperties().ScaleColor)?this.defaultScaleColor:this.getGaugeProperties().ScaleColor}]},t.prototype.createNeedlePointerAlone=function(n,t,i){var o,u,s;this.rangeWidth=this.getRangeWidth(this.radius);var f=this.getAdvancedCustomizedColor(i,ColorCustomizationProperty.NeedlePointerColor),r=[],e=this.getNeedleWidth();return this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&(o={type:"Needle",radius:this.getGaugeProperties().NeedlePointerHeight+"%",value:n,color:f,animation:{enable:this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage?!1:this.getGaugeProperties().EnableAnimation,duration:1e3},pointerWidth:e,cap:{radius:e/2,color:f,border:{width:0}}},r.push(o),BoldBIDashboard.isNullOrUndefined(t)||(u=this.getMarkerSize(),s={type:"Marker",radius:BoldBIDashboard.isNullOrUndefined(t)?"100%":this.getTargetPointerRadius(this.radius,this.rangeWidth),value:t,markerShape:this.getTargetPointer(),markerWidth:BoldBIDashboard.isNullOrUndefined(t)?0:this.getGaugeProperties().TargetPointer===TargetPointers.Line?this.rangeWidth:u,markerHeight:this.getGaugeProperties().TargetPointer===TargetPointers.Line?2:u,color:this.getAdvancedCustomizedColor(i,ColorCustomizationProperty.TargetPointerColor),animation:{enable:this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage?!1:this.getGaugeProperties().EnableAnimation,duration:1e3}},r.push(s))),r},t.prototype.createRangeBar=function(n,t,i){var r,f,u,e;return this.rangeWidth=this.getRangeWidth(this.radius),r=[],f={type:"RangeBar",value:n,radius:"100%",color:this.getPointerFillColor(i),animation:{enable:this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage?!1:this.getGaugeProperties().EnableAnimation,duration:1e3},pointerWidth:this.rangeWidth,roundedCornerRadius:this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge&&n<t?this.rangeWidth:0},r.push(f),BoldBIDashboard.isNullOrUndefined(t)||this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge||(u=this.getMarkerSize(),e={type:"Marker",radius:BoldBIDashboard.isNullOrUndefined(t)?"100%":this.getTargetPointerRadius(this.radius,this.rangeWidth),value:t,markerShape:this.getTargetPointer(),markerWidth:BoldBIDashboard.isNullOrUndefined(t)?0:this.getGaugeProperties().TargetPointer===TargetPointers.Line?this.rangeWidth:u,markerHeight:this.getGaugeProperties().TargetPointer===TargetPointers.Line?2:u,color:this.getAdvancedCustomizedColor(i,ColorCustomizationProperty.TargetPointerColor),animation:{enable:this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage?!1:this.getGaugeProperties().EnableAnimation,duration:1e3}},r.push(e)),r},t.prototype.createRangeBarWithNeedle=function(n,t,i){var r,u,f,o;if(this.rangeWidth=this.getRangeWidth(this.radius),r=[],u=this.getNeedleWidth(),this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge){var s={type:"RangeBar",value:n,radius:"100%",color:this.getPointerFillColor(i),animation:{enable:this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage?!1:this.getGaugeProperties().EnableAnimation,duration:1e3},pointerWidth:this.rangeWidth},e=this.getAdvancedCustomizedColor(i,ColorCustomizationProperty.NeedlePointerColor),h={type:"Needle",radius:this.getGaugeProperties().NeedlePointerHeight+"%",value:n,color:e,animation:{enable:this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage?!1:this.getGaugeProperties().EnableAnimation,duration:1e3},pointerWidth:u,cap:{radius:u/2,color:e,border:{width:0}}};r.push(s);r.push(h);BoldBIDashboard.isNullOrUndefined(t)||this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge||(f=this.getMarkerSize(),o={type:"Marker",radius:BoldBIDashboard.isNullOrUndefined(t)?"100%":this.getTargetPointerRadius(this.radius,this.rangeWidth),value:t,markerShape:this.getTargetPointer(),markerWidth:BoldBIDashboard.isNullOrUndefined(t)?0:this.getGaugeProperties().TargetPointer===TargetPointers.Line?this.rangeWidth:f,markerHeight:this.getGaugeProperties().TargetPointer===TargetPointers.Line?2:f,color:this.getAdvancedCustomizedColor(i,ColorCustomizationProperty.TargetPointerColor),animation:{enable:this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage?!1:this.getGaugeProperties().EnableAnimation,duration:1e3}},r.push(o))}return r},t.prototype.getDirection=function(n){switch(n){case"High is Good":return GaugeDirection.HighIsGood;case"Low is Good":return GaugeDirection.LowIsGood}},t.prototype.getGaugeAngle=function(){if(!BoldBIDashboard.isNullOrUndefined(this.getGaugeProperties())){switch(this.getGaugeProperties().GaugeType){case GaugeTypes.HalfRadialGauge:return{startAngle:270,endAngle:90,actualValueRadius:"20%"};case GaugeTypes.FullRadialGauge:return{startAngle:0,endAngle:0,actualValueRadius:"0%"}}return{startAngle:210,endAngle:150,actualValueRadius:"0%"}}},t.prototype.getTargetValue=function(n){for(var i=n.axes[0].pointers.length,t=0;t<i;t++)if(n.axes[0].pointers[t].type==="Marker")return n.axes[0].pointers[t].value},t.prototype.maximumValueChange=function(n){try{var t=this.designerInstance.element.find("#"+this.designerId+"_RadialGauge_BasicSettings_Maximum").data("ejNumericTextbox");BoldBIDashboard.isNullOrUndefined(t)||(this.isFromProp=!0,t.option("value",n),this.isFromProp=!1)}catch(i){}},t.prototype.getRangeWidth=function(n){return n*(this.getGaugeProperties().ScaleWidth/100)},t.prototype.getRadius=function(n,t){return Math.min(n/2,t/2)-20},t.prototype.getTargetPointer=function(){switch(this.getGaugeProperties().TargetPointer){case TargetPointers.InvertedTriangle:return"InvertedTriangle";case TargetPointers.Line:return"Rectangle";case TargetPointers.Triangle:return"Triangle"}},t.prototype.getInterval=function(n,t){return this.getGaugeProperties().ShowTicks?null:t-n},t.prototype.getTargetPointerRadius=function(n,t){var i=(n-t/2)/n*100;switch(this.getGaugeProperties().TargetPointer){case TargetPointers.InvertedTriangle:i=100;break;case TargetPointers.Triangle:i=(n-t)/n*100}return i+"%"},t.prototype.getRangeBarPointer=function(n){var i,t,r;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.axes[0].pointers))for(i=n.axes[0].pointers.length,t=0;t<i;t++)if(r=n.axes[0].pointers[t],r.type==="RangeBar")return t;return null},t.prototype.renderGaugeWithRange=function(n,t,i){var u=this.getMarkerSize(),e=this.getNeedleWidth(),f=[],o,s,h,r,c,l;if(this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge)for(o={type:"Needle",radius:this.getGaugeProperties().NeedlePointerHeight+"%",value:t,color:this.designerInstance.canApplyTheme()&&this.canCustomThemeApplied("Needle")||this.canApplyCustomThemeInDesigner("Needle")?this.themeHelper.getGaugeNeedleBackground():this.getGaugeProperties().NeedlePointerColor,animation:{enable:this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage?!1:this.getGaugeProperties().EnableAnimation,duration:1e3},pointerWidth:e,cap:{radius:e/2,color:this.designerInstance.canApplyTheme()&&this.canCustomThemeApplied("Needle")||this.canApplyCustomThemeInDesigner("Needle")?this.themeHelper.getGaugeNeedleBackground():this.getGaugeProperties().NeedlePointerColor,border:{width:0}}},f.push(o),n.axes[0].pointers=[],this.hasActual&&this.hasTarget&&this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&(s={type:"Marker",radius:BoldBIDashboard.isNullOrUndefined(i)?"100%":this.getTargetPointerRadius(this.radius,this.rangeWidth),value:i,markerShape:""+this.getTargetPointer(),markerWidth:BoldBIDashboard.isNullOrUndefined(i)?0:this.getGaugeProperties().TargetPointer===TargetPointers.Line?this.rangeWidth:u,markerHeight:this.getGaugeProperties().TargetPointer===TargetPointers.Line?2:u,pointerwidth:BoldBIDashboard.isNullOrUndefined(i)?0:this.getGaugeProperties().TargetPointer===TargetPointers.Line?this.rangeWidth:u,color:this.getGaugeProperties().TargetPointerColor,animation:{enable:this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage?!1:this.getGaugeProperties().EnableAnimation}},f.push(s)),n.axes[0].pointers=f,n.axes[0].ranges=[],h=this.getGaugeProperties().RangeCollection.length,n.axes[0].ranges.push({start:this.customMin,end:this.customMax,radius:"100%",startWidth:this.rangeWidth,endWidth:this.rangeWidth,color:BoldBIDashboard.isNullOrUndefined(this.getGaugeProperties().ScaleColor)?this.defaultScaleColor:this.getGaugeProperties().ScaleColor}),this.calculateRanges(n,n.axes[0].minimum,n.axes[0].maximum),r=0;r<h;r++)c=this.getGaugeProperties().RangeCollection[r].Start<this.customMin?this.customMin:this.getGaugeProperties().RangeCollection[r].Start>this.customMax?this.customMax:this.getGaugeProperties().RangeCollection[r].Start,l=this.getGaugeProperties().RangeCollection[r].End>this.customMax?this.customMax:this.getGaugeProperties().RangeCollection[r].End<this.customMin?this.customMin:this.getGaugeProperties().RangeCollection[r].End,n.axes[0].ranges.push({start:c,end:l,radius:"100%",startWidth:this.rangeWidth,endWidth:this.rangeWidth,color:this.getGaugeProperties().RangeCollection[r].Color})},t.prototype.setDirectionColor=function(n,t,i){var r=this.getStatusColor(t,i),u=this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge,f=u?"":this.getBackgroundColor(t,i);this.designerInstance.element.find("#"+n+"_annotation_2").css({color:r,background:f,border:u?"":"0.842105px solid"+r})},t.prototype.setHalfCircleLabel=function(n,t){var i,e,u;if(t===void 0&&(t=this.getGaugeProperties().LabelColor),i=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode(),t=i||this.getGaugeProperties().LabelColor==="#505D6F"||this.getGaugeProperties().LabelColor==="#000000FF"?this.themeHelper.getGaugeLabelTextColor():this.getGaugeProperties().LabelColor,this.getGaugeProperties().ShowScaleLabel&&this.getGaugeProperties().GaugeType===GaugeTypes.HalfRadialGauge&&!this.getGaugeProperties().ShowTicks&&this.seriesWidth>150&&this.seriesHeight>150){var r=this.themeHelper.getGaugeLabelFont(),u=this.getScaleLabelFontSize(),f=i&&this.isAutoValueFontSettingsDisabled()?r.family:"var(--designer-font)";n.axes[0].labelStyle.font.size="0px";n.axes[0].annotations[1].content='<div id="'+this.designerId+"Element"+this.widgetJson.UniqueName+'_min_label_annotation" style="color:'+t+";font-size:"+u+";font-weight:"+r.weight+";font-family: "+f+';">'+n.axes[0].minimum+this.numberFormat+"<\/div>";n.axes[0].annotations[2].content='<div id="'+this.designerId+"Element"+this.widgetJson.UniqueName+'_max_label_annotation" style="color:'+t+";font-size:"+u+";font-weight:"+r.weight+";font-family: "+f+';">'+n.axes[0].maximum+this.numberFormat+"<\/div>"}else!BoldBIDashboard.isNullOrUndefined(n.axes[0].annotations)&&n.axes[0].annotations.length>1&&(e=this.designerInstance.modules.themeHelper.getGaugeTitleFont(),u=this.getFontSizeBasedOnResolution(),n.titleStyle.size=this.getSeriesTitleFontSize(),n.axes[0].labelStyle.font.size=this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge||!this.getGaugeProperties().ShowScaleLabel||this.seriesHeight<150?"0px":this.getScaleLabelFontSize(),n.axes[0].annotations[1].content="",n.axes[0].annotations[2].content="")},t.prototype.getValueLabelFontSize=function(){return this.radius<100?8:this.radius<200?12:this.radius<400?16:20},t.prototype.isAutoValueFontSettingsDisabled=function(){var n=getComputedStyle(document.querySelector(":root"));return!BoldBIDashboard.isNullOrUndefined(this.themeHelper)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets.circularGauge)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets.circularGauge.value)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets.circularGauge.value.fontSettings)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets.circularGauge.value.fontSettings.autoFontSettings)&&!this.themeHelper.currentTheme.widgets.circularGauge.value.fontSettings.autoFontSettings||!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n.getPropertyValue("--circulargauge-widget-value-fontsize").replace(/"/g,""))},t.prototype.isAutoDifferenceValueFontSettingsDisabled=function(){var n=getComputedStyle(document.querySelector(":root"));return!BoldBIDashboard.isNullOrUndefined(this.themeHelper)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets.circularGauge)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets.circularGauge.differenceValue)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets.circularGauge.differenceValue.fontSettings)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets.circularGauge.differenceValue.fontSettings.autoFontSettings)&&!this.themeHelper.currentTheme.widgets.circularGauge.differenceValue.fontSettings.autoFontSettings||!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n.getPropertyValue("--circulargauge-widget-differencevalue-fontsize").replace(/"/g,""))},t.prototype.isAutoLabelFontSettingsDisabled=function(){var n=getComputedStyle(document.querySelector(":root"));return!BoldBIDashboard.isNullOrUndefined(this.themeHelper)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets.circularGauge)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets.circularGauge.label)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets.circularGauge.label.fontSettings)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets.circularGauge.label.fontSettings.autoFontSettings)&&!this.themeHelper.currentTheme.widgets.circularGauge.label.fontSettings.autoFontSettings||!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n.getPropertyValue("--circulargauge-widget-label-fontsize").replace(/"/g,""))},t.prototype.isDifferenceLabelColorEnabled=function(){return!BoldBIDashboard.isNullOrUndefined(this.themeHelper)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets.circularGauge)&&!BoldBIDashboard.isNullOrUndefined(this.themeHelper.currentTheme.widgets.circularGauge.differenceValue)&&!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(this.themeHelper.currentTheme.widgets.circularGauge.differenceValue.color)},t.prototype.isDifferenceLabelColorVariableEnabled=function(n){return!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n)&&this.designerInstance.isViewMode()&&this.designerInstance.canApplyDashboardTheme()},t.prototype.refreshColor=function(n,t){var i=this.getRadialGaugeObj(n);this.range==="Range 1"?(this.getGaugeProperties().RangeCollection[0].Color=t,i.axes[0].ranges[1].color=t):this.range==="Range 3"?(this.getGaugeProperties().RangeCollection[2].Color=t,i.axes[0].ranges[3].color=t):(this.getGaugeProperties().RangeCollection[1].Color=t,i.axes[0].ranges[2].color=t);i.refresh()},t.prototype.refreshEndValue=function(n,t){var r=this.getRadialGaugeObj(n),i,u;this.numberFormat=this.getFormatString(r);i=BoldBIDashboard.DashboardUtil.getFormattedValue(t,this.numberFormat);u=i>this.customMax?this.customMax:i<this.customMin?this.customMin:i;this.range==="Range 1"?(this.getGaugeProperties().RangeCollection[0].End=i,r.axes[0].ranges[1].end=u):this.range==="Range 3"?(this.getGaugeProperties().RangeCollection[2].End=i,r.axes[0].ranges[3].end=u):(this.getGaugeProperties().RangeCollection[1].End=i,r.axes[0].ranges[2].end=u);r.refresh();this.setPropertyElement("RangeSettings","End",t)},t.prototype.refreshNeedlePointerColor=function(n,t){var i=this.getRadialGaugeObj(n),u,r;if(!BoldBIDashboard.isNullOrUndefined(i))for(u=i.axes[0].pointers.length,r=0;r<u;r++)i.axes[0].pointers[r].type==="Needle"&&(i.axes[0].pointers[r].color=i.axes[0].pointers[r].cap.color=t,i.refresh())},t.prototype.refreshPointer=function(n,t,i){var u,r;if(!BoldBIDashboard.isNullOrUndefined(n)){for(n.axes[0].pointers=this.createPointers(t,i),u=n.axes[0].ranges.length,r=0;r<u;r++)n.axes[0].ranges[r].startWidth=this.rangeWidth,n.axes[0].ranges[r].endWidth=this.rangeWidth;this.getGaugeProperties().ShowTicks&&this.refreshTicks(n);n.refresh()}},t.prototype.refreshRangeColor=function(n,t){var i=this.getRadialGaugeObj(n),r;BoldBIDashboard.isNullOrUndefined(i)||(this.numberFormat=this.getFormatString(i),r=this.getRangeBarPointer(i),BoldBIDashboard.isNullOrUndefined(r)||i.axes[0].pointers[r].type!=="RangeBar"||(i.axes[0].pointers[r].color=t,i.refresh()))},t.prototype.refreshScaleColor=function(n,t){var i=this.getRadialGaugeObj(n);BoldBIDashboard.isNullOrUndefined(i)||(i.axes[0].ranges[0].color=t,i.refresh())},t.prototype.refreshTargetPointer=function(n,t){var i=this.getRadialGaugeObj(n),e=this.getTargetPointerRadius(this.radius,this.rangeWidth),o=this.getAdvancedCustomizedColor(t,ColorCustomizationProperty.TargetPointerColor),f,r,u;if(!BoldBIDashboard.isNullOrUndefined(i)){for(f=i.axes[0].pointers.length,r=0;r<f;r++)i.axes[0].pointers[r].type==="Marker"&&i.axes[0].pointers[r].markerShape!=="Needle"&&(i.axes[0].pointers[r].color=o,i.axes[0].pointers[r].markerShape=this.getTargetPointer(),i.axes[0].pointers[r].radius=e,i.axes[0].pointers[r].markerShape==="InvertedTriangle"||i.axes[0].pointers[r].markerShape==="Triangle"?(u=this.getMarkerSize(),i.axes[0].pointers[r].markerWidth=u,i.axes[0].pointers[r].markerHeight=u):i.axes[0].pointers[r].markerShape==="Rectangle"?(i.axes[0].pointers[r].markerWidth=this.rangeWidth,i.axes[0].pointers[r].markerHeight=2):i.axes[0].pointers[r].pointerWidth=this.rangeWidth);this.numberFormat=this.getFormatString(i);i.refresh()}},t.prototype.refreshGaugeAngle=function(n,t,i,r){var u=this.getRadialGaugeObj(n);this.numberFormat=this.getFormatString(u);u.axes[0].startAngle=t.startAngle;u.axes[0].endAngle=t.endAngle;u.moveToCenter=this.getGaugeProperties().GaugeType===GaugeTypes.HalfRadialGauge?!0:!1;var c=this.hasActual?this.DataGroupInfo.FieldContainers[0].FieldInfos[0].MeasureFormatting:this.hasTarget?this.DataGroupInfo.FieldContainers[1].FieldInfos[0].MeasureFormatting:null,l=this.customFormat(i.actualValue,i.targetValue,c),s=BoldBIDashboard.DashboardUtil.getFormattedValue(i.actualValue,l),h=BoldBIDashboard.DashboardUtil.getFormattedValue(i.targetValue,l),e=this.getMinAndMax(i.startValue,i.endValue,i.minimumValue,i.maximumValue,i.actualValue,i.targetValue,c);this.getGaugeProperties().ScaleWidth=this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge?15:40;var a=this.bbdesigner$(n).attr("id"),o=this.getJsonData("Data")[r],f=this.getJsonData("WidgetData")[r],v=this.hasActual?f.formattedActualValue:f.formattedTargetValue,y=this.getStatusColor(f.actualValue,f.targetValue),p=this.getStatusImage(f.actualValue,f.targetValue),w=this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge?f.percentOfVarience:p+"&nbsp;"+f.formattedVarience+"&nbsp;("+f.percentOfVarience+")";u.axes[0].annotations=this.hasActual&&this.hasTarget?this.getStatusAnnotation(a,o,null,f,y,w,this.getGaugeProperties().LabelColor):this.getSingleAnnotation(a,o,null,v,this.getGaugeProperties().LabelColor);this.customMax=u.axes[0].maximum=u.axes[0].ranges[0].end=this.getGaugeProperties().IsCustomMax?u.axes[0].maximum:e.end;this.customMin=u.axes[0].minimum=u.axes[0].ranges[0].start=this.getGaugeProperties().IsCustomMin?u.axes[0].minimum:e.start;u.axes[0].pointers=this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge?this.hasActual?this.createRangeBar(s,h,o):this.createRangeBar(h,s,o):this.createPointers(s,h);this.setHalfCircleLabel(u);this.updatePropertyItems();this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&this.getGaugeProperties().ShowRange?this.renderGaugeWithRange(u,e.actual,e.target):(this.createRange(u),u.axes[0].ranges[0].end=this.getGaugeProperties().IsCustomMax?u.axes[0].maximum:e.end,u.axes[0].ranges[0].start=this.getGaugeProperties().IsCustomMin?u.axes[0].minimum:e.start);u.refresh()},t.prototype.refreshGaugeAnimation=function(n){var t=this.getRadialGaugeObj(n),r,i;if(!BoldBIDashboard.isNullOrUndefined(t)){for(this.numberFormat=this.getFormatString(t),r=t.axes[0].pointers.length,i=0;i<r;i++)t.axes[0].pointers[i].animation.enable=this.getGaugeProperties().EnableAnimation;t.refresh()}},t.prototype.refreshMaxValue=function(n){var t=this.getRadialGaugeObj(n),i,r,u;BoldBIDashboard.isNullOrUndefined(t)||(this.numberFormat=this.getFormatString(t),i=BoldBIDashboard.DashboardUtil.getFormattedValue(this.getGaugeProperties().MaxValue,this.numberFormat),t.axes[0].maximum=t.axes[0].ranges[0].end=this.customMax=i,this.getGaugeProperties().ShowRange&&this.getGaugeProperties().IsCustomMax&&(r=t.axes[0].pointers[0].value,u=this.getTargetValue(t),this.numberFormat=this.getFormatString(t),this.customMin=t.axes[0].minimum,this.customMax=this.getGaugeProperties().IsCustomMax?i:t.axes[0].maximum,this.calculateRanges(t,t.axes[0].minimum,t.axes[0].maximum),this.renderGaugeWithRange(t,r,u)),t.axes[0].majorTicks.interval=this.getInterval(t.axes[0].minimum,t.axes[0].maximum),this.setHalfCircleLabel(t),t.refresh())},t.prototype.refreshMinValue=function(n){var t=this.getRadialGaugeObj(n),i,r,u;BoldBIDashboard.isNullOrUndefined(t)||(this.numberFormat=this.getFormatString(t),i=BoldBIDashboard.DashboardUtil.getFormattedValue(this.getGaugeProperties().MinValue,this.numberFormat),t.axes[0].minimum=t.axes[0].ranges[0].start=this.customMin=i,this.getGaugeProperties().ShowRange&&this.getGaugeProperties().IsCustomMin&&(r=t.axes[0].pointers[0].value,u=this.getTargetValue(t),this.numberFormat=this.getFormatString(t),this.customMin=t.axes[0].minimum,this.customMax=t.axes[0].maximum,this.calculateRanges(t,t.axes[0].minimum,t.axes[0].maximum),this.renderGaugeWithRange(t,r,u)),t.axes[0].majorTicks.interval=this.getInterval(t.axes[0].minimum,t.axes[0].minimum),this.setHalfCircleLabel(t),t.refresh())},t.prototype.refreshNeedlePointer=function(n){var t=this.getRadialGaugeObj(n),r,i;if(!BoldBIDashboard.isNullOrUndefined(t)){for(r=t.axes[0].pointers.length,i=0;i<r;i++)t.axes[0].pointers[i].type==="Needle"&&(t.axes[0].pointers[i].radius=this.getGaugeProperties().NeedlePointerHeight+"%");this.numberFormat=this.getFormatString(t);t.refresh()}},t.prototype.refreshRangeWidth=function(n,t,i){var o,u,s,r,f,e;for(t===void 0&&(t=!0),i===void 0&&(i=null),BoldBIDashboard.isNullOrUndefined(i)&&(i=this.getRadialGaugeObj(n)),this.numberFormat=this.getFormatString(i),o=i.axes[0].ranges.length,this.rangeWidth=this.getRangeWidth(this.radius),this.targetRadius=this.getTargetPointerRadius(this.radius,this.rangeWidth),this.canCustomThemeApplied("Label")?this.refreshTicks(i,this.themeHelper.getGaugeLabelTextColor()):this.refreshTicks(i),u=0;u<o;u++)i.axes[0].ranges[u].startWidth=this.rangeWidth,i.axes[0].ranges[u].endWidth=this.rangeWidth;for(s=i.axes[0].pointers.length,r=0;r<s;r++)i.axes[0].pointers[r].roundedCornerRadius=this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge&&this.widgetDataObj[0].actualValue<this.widgetDataObj[0].targetValue?this.rangeWidth:0,i.axes[0].pointers[r].type==="RangeBar"?i.axes[0].pointers[r].pointerWidth=this.rangeWidth:i.axes[0].pointers[r].markerShape==="Rectangle"?(i.axes[0].pointers[r].markerWidth=this.rangeWidth,i.axes[0].pointers[r].radius=this.targetRadius):i.axes[0].pointers[r].markerShape==="Triangle"||i.axes[0].pointers[r].markerShape==="InvertedTriangle"?(i.axes[0].pointers[r].radius=this.targetRadius,f=this.getMarkerSize(),i.axes[0].pointers[r].markerWidth=f,i.axes[0].pointers[r].markerHeight=f):i.axes[0].pointers[r].type==="Needle"&&(e=this.getNeedleWidth(),i.axes[0].pointers[r].pointerWidth=e,i.axes[0].pointers[r].cap.radius=e/2);t&&i.refresh()},t.prototype.refreshStartValue=function(n,t){var r=this.getRadialGaugeObj(n),i,u;this.numberFormat=this.getFormatString(r);i=BoldBIDashboard.DashboardUtil.getFormattedValue(t,this.numberFormat);u=i<this.customMin?this.customMin:i>this.customMax?this.customMax:i;this.range==="Range 1"?(this.getGaugeProperties().RangeCollection[0].Start=i,r.axes[0].ranges[1].start=u):this.range==="Range 3"?(this.getGaugeProperties().RangeCollection[2].Start=i,r.axes[0].ranges[3].start=u):(this.getGaugeProperties().RangeCollection[1].Start=i,r.axes[0].ranges[2].start=u);r.refresh();this.setPropertyElement("RangeSettings","Start",t)},t.prototype.customFormat=function(n,t,i){var u,f,r=i.Unit,e={formattedText:"",formattedValue:0,numberFormat:null};return n>t?(u=this.hasActual?BoldBIDashboard.DashboardUtil.formattedValue(n,i,r,!0,this.designerInstance):e,r=BoldBIDashboard.Dashboard.GaugeHelper.getNumberFormat(u.numberFormat),f=this.hasTarget?BoldBIDashboard.DashboardUtil.formattedValue(t,i,r,!0,this.designerInstance):e):(f=this.hasTarget?BoldBIDashboard.DashboardUtil.formattedValue(t,i,r,!0,this.designerInstance):e,r=BoldBIDashboard.Dashboard.GaugeHelper.getNumberFormat(f.numberFormat),u=this.hasActual?BoldBIDashboard.DashboardUtil.formattedValue(n,i,r,!0,this.designerInstance):e),BoldBIDashboard.isNullOrUndefined(u.numberFormat)?BoldBIDashboard.isNullOrUndefined(f.numberFormat)?"":f.numberFormat:u.numberFormat},t.prototype.updateControlResizeValue=function(){var r=this.contentContainer.height(),u=this.contentContainer.width(),t,i,n;if(this.radialGaugeItem.data("BoldBIDashboardScroller")&&this.radialGaugeItem.BoldBIDashboardScroller("destroy"),this.radialGaugeItem.css({width:"100%",height:"100%"}),BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent))this.seriesWidth=u,this.seriesHeight=r,this.radius=this.getRadius(this.seriesWidth,this.seriesHeight),n=this.getRadialGaugeObj(this.radialGaugeElement[0]),BoldBIDashboard.isNullOrUndefined(n)||(this.setMarkerSize(n),this.setResponsiveProperty(n),n.refresh());else{for(n=null,this.radialGaugeContent.css({width:this.radialGaugeItem.width(),height:this.radialGaugeItem.height()}),t=0;t<this.radialGaugeContent.children().length;t++)i=this.getSizeForGauge(this.radialGaugeContent.children().length),this.bbdesigner$(this.radialGaugeContent.children()[t]).css({width:i.width,height:i.height}),this.radialGaugeContent.children().eq(t).hasClass("e-circulargauge")&&(n=this.getRadialGaugeObj(this.radialGaugeContent.children()[t]),this.seriesWidth=i.width,this.seriesHeight=i.height,this.radius=this.getRadius(this.seriesWidth,this.seriesHeight),this.setResponsiveProperty(n),this.setMarkerSize(n),n.refresh(),this.radialGaugeContent.children().eq(t).hasClass("e-circularGauge-Selected")&&this.updateSelectionContainer(this.radialGaugeContent.children().eq(t)));this.radialGaugeContent.children().length>1&&this.radialGaugeItem.BoldBIDashboardScroller({width:this.radialGaugeItem.width(),height:this.radialGaugeItem.height(),autoHide:!0,scrollerSize:this.designerInstance.scrollerSize.scrollSize})}},t.prototype.refreshTicks=function(n,t){var i,r,u,f;t===void 0&&(t=this.getGaugeProperties().LabelColor);(this.canCustomThemeApplied("Label")||this.canApplyCustomThemeInDesigner("Label"))&&(t=this.themeHelper.getGaugeLabelTextColor());!BoldBIDashboard.isNullOrUndefined(n)&&this.getGaugeProperties().ShowRange&&this.getGaugeProperties().RangeLabelType===RangeValueType.RangeColor&&this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&(t=this.getGaugeProperties().ShowRange&&this.getGaugeProperties().RangeLabelType===RangeValueType.RangeColor&&!BoldBIDashboard.isNullOrUndefined(n)?this.calculateRangeColor(n):this.getGaugeProperties().LabelColor);i=this.themeHelper.getGaugeLabelFont();r=this.themeHelper.getGaugeTitleFont();(this.canCustomThemeApplied("Label")||this.canApplyCustomThemeInDesigner("Label"))&&(t=this.themeHelper.getGaugeLabelTextColor());this.seriesWidth>150&&this.seriesHeight>150&&(u=this.getScaleOffset(this.rangeWidth),f=this.getFontSizeBasedOnResolution(),n.axes[0].majorTicks.width=this.getGaugeProperties().ShowTicks&&this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge?this.getGaugeProperties().TicksWidth:0,n.axes[0].majorTicks.height=this.getGaugeProperties().ShowTicks&&this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge?this.getGaugeProperties().TicksHeight:0,n.titleStyle.size=this.getSeriesTitleFontSize(),n.titleStyle.fontWeight=r.weight,n.titleStyle.fontFamily=r.family,n.axes[0].labelStyle.font.color=t,n.axes[0].labelStyle.font.size=this.getGaugeProperties().ShowScaleLabel?this.getScaleLabelFontSize():"0px",n.axes[0].labelStyle.font.fontFamily=i.family,n.axes[0].labelStyle.font.fontWeight=i.weight,n.axes[0].labelStyle.font.size=this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge||!this.getGaugeProperties().ShowScaleLabel?"0px":this.getScaleLabelFontSize(),(this.getGaugeProperties().ShowTicks||this.getGaugeProperties().ShowScaleLabel)&&this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&(n.axes[0].majorTicks.position=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TicksPosition,this.getGaugeProperties().TicksPosition),n.axes[0].majorTicks.offset=u.ticksOffset,n.axes[0].labelStyle.position=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ScaleLabelPosition,this.getGaugeProperties().ScaleLabelPosition),n.axes[0].labelStyle.offset=u.labelOffset));n.axes[0].majorTicks.interval=this.getInterval(n.axes[0].minimum,n.axes[0].maximum);this.numberFormat=this.getFormatString(n);this.setHalfCircleLabel(n,t)},t.prototype.setMarkerSize=function(n){for(var i=this.getMarkerSize(),r=n.axes[0].pointers.length,t=0;t<r;t++)(n.axes[0].pointers[t].markerShape==="Triangle"||n.axes[0].pointers[t].markerShape==="InvertedTriangle")&&(n.axes[0].pointers[t].markerWidth=i,n.axes[0].pointers[t].markerHeight=i)},t.prototype.setResponsiveProperty=function(n){var e=this.themeHelper.getGaugeLabelFont(),o=this.themeHelper.getGaugeTitleFont(),s=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode(),f,i,u,r,t;if(this.seriesWidth<150||this.seriesHeight<150?(this.isResponsive=!0,n.axes[0].majorTicks.width=0,n.axes[0].majorTicks.height=0,n.axes[0].labelStyle.font.size=this.getScaleLabelFontSize(!0),n.axes[0].labelStyle.position="Inside",n.axes[0].majorTicks.position="Inside",n.axes[0].majorTicks.offset=0,n.axes[0].labelStyle.offset=0):this.isResponsive&&(this.isResponsive=!1,f=this.getFontSizeBasedOnResolution(),n.axes[0].labelStyle.font.size=this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge?"0px":this.getScaleLabelFontSize(),n.titleStyle.size=this.getSeriesTitleFontSize(),n.axes[0].majorTicks.width=this.getGaugeProperties().TicksWidth,n.axes[0].majorTicks.height=this.getGaugeProperties().TicksHeight,n.axes[0].labelStyle.position=this.getGaugeProperties().ScaleLabelPosition,n.axes[0].majorTicks.position=this.getGaugeProperties().TicksPosition,i=this.getScaleOffset(this.rangeWidth),n.axes[0].majorTicks.offset=i.ticksOffset,n.axes[0].labelStyle.offset=i.labelOffset),(this.isResponsive||this.seriesWidth<150||this.seriesHeight<150)&&this.getGaugeProperties().ValuePointer!==ValuePointers.RangePointer)for(u=n.axes[0].pointers.length,r=this.getNeedleWidth(),t=0;t<u;t++)n.axes[0].pointers[t].type==="Needle"&&(n.axes[0].pointers[t].pointerWidth=r,n.axes[0].pointers[t].cap.radius=r/2)},t.prototype.getSizeForGauge=function(n){var r=this.bbdesigner$(this.contentContainer).width()-6,u=this.bbdesigner$(this.contentContainer).height(),a=this.getSeriesCount(),e=a>0?n:1,f,l;if(e===1)return{height:u,width:r};var o=null,s=null,c={width:250,height:200},t=Math.floor(r/(c.width+6)),i=Math.floor(u/(c.height+6)),h=t*i;if(h>=e){for(;;){if(t===1)break;if(f=Math.floor(e/t),l=Math.floor(e%t),f===0){t--;continue}if(f+=l!==0?1:0,i-f==0)break;if(i-f<0){f--;break}t--}o=Math.floor(r/t);s=Math.floor(u/i)}else h===0?(o=t>0?Math.floor(r/t):r,s=i>0?Math.floor(u/i):u):h>0&&(o=Math.floor(r/t),s=Math.floor(u/i));return{height:s-6,width:o-6}},t.prototype.getValueInPixel=function(n,t){return n/100*t},t.prototype.getSeriesCount=function(){var t,n;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers))for(t=this.DataGroupInfo.FieldContainers.length,n=0;n<t;n++)if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[n])&&this.DataGroupInfo.FieldContainers[n].Name==="Series"&&this.DataGroupInfo.FieldContainers[n].FieldInfos.length>0)return this.DataGroupInfo.FieldContainers[n].FieldInfos.length;return 0},t.prototype.getMarkerSize=function(){return this.seriesWidth<150||this.seriesHeight<150?6:this.seriesHeight<400&&this.seriesWidth>150&&this.seriesWidth<250?8:this.seriesWidth>=250&&this.seriesWidth<=400?10:this.seriesWidth>400?12:void 0},t.prototype.getScaleOffset=function(n){return this.getGaugeProperties().TicksPosition===TicksPosition.Outside&&this.getGaugeProperties().ScaleLabelPosition===ScaleLabelPosition.Outside?{ticksOffset:0,labelOffset:0}:this.getGaugeProperties().TicksPosition===TicksPosition.Inside&&this.getGaugeProperties().ScaleLabelPosition===ScaleLabelPosition.Inside?{ticksOffset:n,labelOffset:0}:this.getGaugeProperties().TicksPosition===TicksPosition.Outside&&this.getGaugeProperties().ScaleLabelPosition===ScaleLabelPosition.Inside?{ticksOffset:0,labelOffset:n}:this.getGaugeProperties().TicksPosition===TicksPosition.Inside&&this.getGaugeProperties().ScaleLabelPosition===ScaleLabelPosition.Outside?{ticksOffset:n,labelOffset:0}:void 0},t.prototype.getNeedleWidth=function(){return this.seriesWidth<150||this.seriesHeight<150?4:this.radius*.1},t.prototype.updateSelectionContainer=function(n){var e,o;if(!BoldBIDashboard.isNullOrUndefined(n)){var f=2,i=n.parents(".e-radialgaugeitem").find(".radialGaugeContent"),t=n,s=n.parents(".e-radialgaugeitem"),r=i.find(".e-dbrd-selected-card"),u=i.find(".e-corner-triangle");r.length===0&&(r=BoldBIDashboard.buildTag("div.e-dbrd-selected-card"),u.length===0&&(u=BoldBIDashboard.buildTag("div.e-corner-triangle"),r.append(u)));u.css({left:t.width()-8});e=t.offset().left-t.offsetParent().offset().left;o=t.offsetParent().scrollTop()+t.offset().top-t.offsetParent().offset().top;r.css({top:o,left:e,display:"block",width:t.width()+f+"px",height:t.height()+f+"px"});s.animate({scrollTop:t.position().top-10});i.find(".e-dbrd-selected-card").length===0&&(i.append(r),i.css({position:"relative"}))}},t.prototype.isMeasureFormatDisable=function(n){return!(n.ContainerName==="TargetValue"&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0])&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0||n.ContainerName==="StartValue"||n.ContainerName==="EndValue"?!1:!0)},t.prototype.checkDroppedFields=function(){var t,n;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers))for(t=this.DataGroupInfo.FieldContainers.length,n=0;n<t;n++)if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[n]))switch(this.DataGroupInfo.FieldContainers[n].Name){case"ActualValue":this.hasActual=this.DataGroupInfo.FieldContainers[n].FieldInfos.length>0;break;case"TargetValue":this.hasTarget=this.DataGroupInfo.FieldContainers[n].FieldInfos.length>0;break;case"StartValue":this.hasStart=this.DataGroupInfo.FieldContainers[n].FieldInfos.length>0;break;case"EndValue":this.hasEnd=this.DataGroupInfo.FieldContainers[n].FieldInfos.length>0;break;case"Series":this.hasSeries=this.DataGroupInfo.FieldContainers[n].FieldInfos.length>0}},t.prototype.getMinAndMax=function(n,t,i,r,u,f,e){var p,d,h,c,b,k,s,o,l=e.Unit,a={formattedText:"",formattedValue:0,numberFormat:null},w,y;u>f?(h=this.hasActual?BoldBIDashboard.DashboardUtil.formattedValue(u,e,l,!0,this.designerInstance):a,l=BoldBIDashboard.Dashboard.GaugeHelper.getNumberFormat(h.numberFormat),c=this.hasTarget?BoldBIDashboard.DashboardUtil.formattedValue(f,e,l,!0,this.designerInstance):a):(c=this.hasTarget?BoldBIDashboard.DashboardUtil.formattedValue(f,e,l,!0,this.designerInstance):a,l=BoldBIDashboard.Dashboard.GaugeHelper.getNumberFormat(c.numberFormat),h=this.hasActual?BoldBIDashboard.DashboardUtil.formattedValue(u,e,l,!0,this.designerInstance):a);p=this.hasStart?BoldBIDashboard.DashboardUtil.formattedValue(n,e,l,!0,this.designerInstance):a;d=this.hasEnd?BoldBIDashboard.DashboardUtil.formattedValue(t,e,l,!0,this.designerInstance):a;b=this.getGaugeProperties().IsCustomMin?BoldBIDashboard.DashboardUtil.formattedValue(i,e,l,!0,this.designerInstance):a;k=this.getGaugeProperties().IsCustomMax?BoldBIDashboard.DashboardUtil.formattedValue(r,e,l,!0,this.designerInstance):a;var nt=BoldBIDashboard.isNullOrUndefined(h.numberFormat)?BoldBIDashboard.isNullOrUndefined(c.numberFormat)?"":c.numberFormat:h.numberFormat,v=h.formattedValue>c.formattedValue?h.formattedValue:c.formattedValue,g=h.formattedValue<c.formattedValue?h.formattedValue:c.formattedValue;return this.hasStart||this.hasEnd?(w=0,y=0,w=p.formattedValue,y=d.formattedValue,s=h.formattedValue<0?Math.floor(h.formattedValue):0,o=v>0?BoldBIDashboard.Dashboard.GaugeHelper.getEndRangeValue(v):0,this.hasStart&&this.hasEnd?w>y&&(y=y-1):this.hasStart?y=o:this.hasEnd&&(w=s),s=w,o=y,o<=s&&(o=s+1)):this.getGaugeProperties().IsCustomMax||this.getGaugeProperties().IsCustomMin?!this.getGaugeProperties().IsCustomMin&&this.getGaugeProperties().IsCustomMax?(s=v>0?p.formattedValue<0?Math.floor(p.formattedValue):0:BoldBIDashboard.Dashboard.GaugeHelper.getEndRangeValue(g*-1)*-1,o=b.formattedValue):this.getGaugeProperties().IsCustomMin&&!this.getGaugeProperties().IsCustomMax?(s=k.formattedValue,o=v>0?BoldBIDashboard.Dashboard.GaugeHelper.getEndRangeValue(v):0):(s=b.formattedValue,o=k.formattedValue):(v>0?(s=p.formattedValue<0?Math.floor(p.formattedValue):0,o=BoldBIDashboard.Dashboard.GaugeHelper.getEndRangeValue(v)):(s=BoldBIDashboard.Dashboard.GaugeHelper.getEndRangeValue(g*-1)*-1,o=0),this.getGaugeProperties().GaugeType===GaugeTypes.FullRadialGauge&&(o=c.formattedValue)),this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&(s=Math.round(s*1e3)/1e3,o=Math.round(o*1e3)/1e3),(s===o||s>o)&&(o=s+1),{start:s,end:o,actual:h.formattedValue,target:c.formattedValue,numberFormat:nt}},t.prototype.getGaugeProperties=function(){return this.widgetJson},t.prototype.getRadialGaugeObj=function(n){return!BoldBIDashboard.isNullOrUndefined(n)&&this.bbdesigner$(n).hasClass("e-circulargauge")?ejdashboard.base.getComponent(n,"circulargauge"):null},t.prototype.IsWidgetConfigured=function(){return this.DataGroupInfo.FieldContainers.length>0&&(this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0||this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0)},t.prototype.wireEvents=function(){this.designerInstance.element.on("click",".e-gauge-widget-color-settings-button",this.bbdesigner$.proxy(this.openAdvancedColorSettings,this))},t.prototype.unwireEvents=function(){this.designerInstance.element.off("click",".e-gauge-widget-color-settings-button",this.bbdesigner$.proxy(this.openAdvancedColorSettings,this))},t.prototype.renderDefaultColorSettings=function(n,t,i){var r=this.widgetHelper.getCurrentWidgetInstance(),o,s,e,h,v;if(!BoldBIDashboard.isNullOrUndefined(r))if(o=this.IsWidgetConfigured(),this.categoryId=this.designerId+"_"+t+"_"+i.categoryName,this.defaultPaletteContainer=this.designerInstance.element.find("#"+this.categoryId),this.defaultPaletteContainer.length!==0||BoldBIDashboard.isNullOrUndefined(n)){if(!BoldBIDashboard.isNullOrUndefined(this.defaultPaletteContainer)&&this.defaultPaletteContainer.length>0){var y=this.defaultPaletteContainer.find("#"+this.categoryId+"_palatte_body"),a=this.defaultPaletteContainer.find("#"+this.categoryId+"_palatte_button"),e=this.defaultPaletteContainer.find("#"+this.categoryId+"_color_settings_button"),u=this.defaultPaletteContainer.find("#"+this.categoryId+"_advance_color_palatte_body_element");y.empty();h=r.defaultPaletteContainer.find("#"+this.categoryId+"_advance_color_palatte_check_element");BoldBIDashboard.isNullOrUndefined(h)||(v=h.data("BoldBIDashboardCheckBox"),v.option("checked",r.getGaugeProperties().EnableColorSettings));o?(u.css("display","block"),this.updateAdvanceButtonVisibility(a,e,r)):(u.css("display","none"),a.css("display","none"))}}else{this.defaultPaletteContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-designer-scroll-style-3","",{width:"460px"},{id:this.categoryId});var u=BoldBIDashboard.buildTag("div","",{},{id:this.categoryId+"_advance_color_palatte_body_element"}),f=BoldBIDashboard.buildTag("div","",{},{id:this.categoryId+"_palatte_button"}),c=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily e-dbrd-property-advance-color e-gauge-advanced-color","",{},{id:this.categoryId+"_advance_color_palatte_text_element"}),l=BoldBIDashboard.buildTag("div","",{},{id:this.categoryId+"_advance_color_palatte_check_element"});u.append(c,l);this.defaultPaletteContainer.append(u,f);c.text(this.locale.propertyPanel.formatting.colorSettings.advancedSettingText);l.BoldBIDashboardCheckBox({checked:this.getGaugeProperties().EnableColorSettings,change:this.bbdesigner$.proxy(this.showAdvanceColorPalette,r),width:(this.propertyPanel.propertyPanelContainer.width()-33)*57/100-15+"px",cssClass:"e-designer-prop-checkbox"});n.append(this.defaultPaletteContainer);s=BoldBIDashboard.buildTag("div.e-advance-option-wrap","",{"margin-left":"207px"},{});e=BoldBIDashboard.buildTag("button.e-gauge-widget-color-settings-button e-advanced-color-settings-button e-advanced-color-settings-button-alignment bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.propertyPanel.customizeBtnText,{},{id:this.categoryId+"_color_settings_button",type:"button"});s.append(e);f.append(s);o?(u.css("display","block"),this.updateAdvanceButtonVisibility(f,e,r)):(u.css("display","none"),f.css("display","none"))}},t.prototype.getColorCustomization=function(){return!BoldBIDashboard.isNullOrUndefined(this.getGaugeProperties().ColorCustomization)&&this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length===0&&this.resetAdvanceColorSettings(),this.getGaugeProperties().ColorCustomization},t.prototype.getColorFields=function(){return[{Name:WidgetProperty.RangePointerColor,DisplayName:"Range Pointer",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.ActualValueColor,DisplayName:"Actual Value",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.NeedlePointerColor,DisplayName:"Needle Pointer",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.TargetPointerColor,DisplayName:"Target Pointer",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.TitleColor,DisplayName:"Title Color",ColorPicker:ColorSetColorPickers.NormalColorPicker}]},t.prototype.showAdvanceColorPalette=function(n){var t=this.widgetHelper.getCurrentWidgetInstance(),i;n.isInteraction&&!0&&(i=t.defaultPaletteContainer.find("#"+t.categoryId+"_color_settings_button"),n.isChecked?(i.removeAttr("disabled"),t.openAdvancedColorSettings(null)):(i.attr("disabled","disabled"),t.getGaugeProperties().ColorCustomization=null,this.dataConfigurationInstance.postDraggedFields()),t.getGaugeProperties().EnableColorSettings=n.isChecked,this.designerInstance.modules.serialization.notifyChange())},t.prototype.openAdvancedColorSettings=function(){var n=this.widgetHelper.getCurrentWidgetInstance(),t=new ColorCustomization,u=new BoldBIDashboard.DashboardDesignerUtility.AdvancedColorCustomization(this.designerInstance),i,r;BoldBIDashboard.isNullOrUndefined(n.getGaugeProperties().ColorCustomization)?t.Type=ColorCustomizationType.Gradient:t=this.bbdesigner$.extend(!0,{},n.getGaugeProperties().ColorCustomization);i=n.hasActual?n.DataGroupInfo.FieldContainers[0].FieldInfos[0]:n.hasTarget?n.DataGroupInfo.FieldContainers[1].FieldInfos[0]:null;r={colorCustomizationObj:t,DataGroupInfo:n.DataGroupInfo,colorFields:n.colorFields,isKPICard:!1,legendVisible:!1,defaultBasedOnField:i,colorTypeCollection:["Gradient","Rule"],hasDefaultColor:!1,isGradientInputsMandatory:!0,defaultColorFill:n.getGaugeProperties().DefaultColor.Color,isDefaultFormat:!0};u.populateUI(r,n,"updateAdvancedColorSettings")},t.prototype.updateAdvanceButtonVisibility=function(n,t,i){n.css("display","block");i.getGaugeProperties().EnableColorSettings?t.removeAttr("disabled"):t.attr("disabled","disabled")},t.prototype.updateAdvancedColorSettings=function(n,t){var i=this.widgetHelper.getCurrentWidgetInstance();t?BoldBIDashboard.isNullOrUndefined(i.getGaugeProperties().ColorCustomization)&&this.resetAdvanceColorSettings():(this.getGaugeProperties().ShowRange&&(this.updateShowRange(!1,!1),this.setPropertyElement("RangeSettings","ShowRange",!1)),i.getGaugeProperties().ColorCustomization=n,this.dataConfigurationInstance.postDraggedFields(),this.designerInstance.modules.serialization.notifyChange())},t.prototype.disableColorCustomizationButton=function(n){var r=n.defaultPaletteContainer.find("#"+this.categoryId+"_color_settings_button"),t=n.defaultPaletteContainer.find("#"+this.categoryId+"_advance_color_palatte_check_element"),i;BoldBIDashboard.isNullOrUndefined(t)||(i=t.data("BoldBIDashboardCheckBox"),i.option("checked",!1));r.attr("disabled","disabled")},t.prototype.IsColorCustomizationEnabled=function(){return this.getGaugeProperties().EnableColorSettings&&!BoldBIDashboard.isNullOrUndefined(this.getGaugeProperties().ColorCustomization)},t.prototype.getJsonData=function(n){switch(n){case"Data":return JSON.parse(this.dataValues.data);case"WidgetData":return JSON.parse(this.dataValues.widgetData.data);case"MinMaxValues":return JSON.parse(this.dataValues.minMaxValues);default:return""}},t.prototype.getPointerFillColor=function(n){if(this.IsColorCustomizationEnabled()&&!BoldBIDashboard.isNullOrUndefined(n)){var t=this.getGaugeProperties().ColorCustomization;if(t.Type===ColorCustomizationType.Rule)return this.getAdvancedCustomizedColor(n,ColorCustomizationProperty.RangePointerColor);if(t.Type===ColorCustomizationType.Gradient)return this.getColorBasedOnKey(n,"customGradientColor",ColorCustomizationProperty.RangePointerColor)}return this.getDefaultPropertyColor(ColorCustomizationProperty.RangePointerColor)},t.prototype.getAdvancedCustomizedColor=function(n,t,i){var r,u,f;return this.IsColorCustomizationEnabled()&&(r=this.getGaugeProperties().ColorCustomization,r.Type===ColorCustomizationType.Rule&&!BoldBIDashboard.isNullOrUndefined(r.RuleRangeSettings))?(u=this.getPropertyColorKey(t),f=r.RuleRangeSettings.BasedOn.FieldId.substring(15)+u,this.getColorBasedOnKey(n,f,t)):this.getDefaultPropertyColor(t,i)},t.prototype.getColorBasedOnKey=function(n,t,i){var r=n[t];return BoldBIDashboard.isNullOrUndefined(r)?this.getDefaultPropertyColor(i):r},t.prototype.getDefaultPropertyColor=function(n,t){switch(n){case ColorCustomizationProperty.BackgroundColor:return this.designerInstance.canApplyTheme()||this.designerInstance.isEnableCustomDashboardTheme()?"transparent":this.getGaugeProperties().BackgroundColor;case ColorCustomizationProperty.RangePointerColor:return this.getGaugeProperties().DefaultColor.Color;case ColorCustomizationProperty.ActualValueColor:return this.canCustomThemeApplied("Value")||this.canApplyCustomThemeInDesigner("Value")?this.themeHelper.getGaugeValueTextColor():this.getGaugeProperties().ShowRange&&this.getGaugeProperties().RangeValueType===RangeValueType.RangeColor&&this.getGaugeProperties().GaugeType!==GaugeTypes.FullRadialGauge&&!BoldBIDashboard.isNullOrUndefined(t)?this.calculateRangeColor(t):this.getGaugeProperties().ValueColor;case ColorCustomizationProperty.TargetPointerColor:return this.designerInstance.canApplyTheme()&&this.canCustomThemeApplied("Target")||this.canApplyCustomThemeInDesigner("Target")?this.themeHelper.getGaugeTargetPointerBackground():this.getGaugeProperties().TargetPointerColor;case ColorCustomizationProperty.NeedlePointerColor:return this.designerInstance.canApplyTheme()&&this.canCustomThemeApplied("Needle")||this.canApplyCustomThemeInDesigner("Needle")?this.themeHelper.getGaugeNeedleBackground():this.getGaugeProperties().NeedlePointerColor;case ColorCustomizationProperty.TitleColor:return this.canCustomThemeApplied("Title")?this.themeHelper.getGaugeTitleTextColor():this.getGaugeProperties().TitleColor;default:return""}},t.prototype.calculateRangeColor=function(n){for(var i=n.axes[0].pointers[0].value,t=1;t<=3;t++){if(i>n.axes[0].ranges[3].end)return this.getGaugeProperties().ScaleColor;if(i>=n.axes[0].ranges[t].start&&i<=n.axes[0].ranges[t].end)return n.axes[0].ranges[t].color}},t.prototype.getActualValueContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"ActualValue")},t.prototype.getTargetValueContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"TargetValue")},t.prototype.getMinimumValueContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"StartValue")},t.prototype.getMaximumValueContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"EndValue")},t.prototype.getSeriesContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Series")},t.prototype.getHiddenColumnContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"HiddenColumn")},t.prototype.getFilterContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"FilterColumn")},t.prototype.getPropertyColorKey=function(n){switch(n){case ColorCustomizationProperty.BackgroundColor:return"_Color_BackgroundColor";case ColorCustomizationProperty.RangePointerColor:return"_Color_RangePointerColor";case ColorCustomizationProperty.ActualValueColor:return"_Color_ActualValueColor";case ColorCustomizationProperty.TargetPointerColor:return"_Color_TargetPointerColor";case ColorCustomizationProperty.NeedlePointerColor:return"_Color_NeedlePointerColor";case ColorCustomizationProperty.TitleColor:return"_Color_TitleColor";default:return""}},t.prototype.disposeGauge=function(){this.destroy();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.RadialGauge)},t.prototype.destroy=function(){var r,n,t,i;if(!BoldBIDashboard.isNullOrUndefined(this.radialGaugeContent)&&this.radialGaugeContent.length>0){for(r=this.radialGaugeContent[0].childElementCount,n=0;n<r;n++)t=this.getRadialGaugeObj(this.bbdesigner$(this.radialGaugeContent[0]).children()[n]),BoldBIDashboard.isNullOrUndefined(t)||t.destroy();this.bbdesigner$(this.radialGaugeElement[0]).remove();this.bbdesigner$(this.radialGaugeContent[0]).remove();this.radialGaugeContent=null}else BoldBIDashboard.isNullOrUndefined(this.radialGaugeElement)||(i=this.getRadialGaugeObj(this.radialGaugeElement[0]),BoldBIDashboard.isNullOrUndefined(i)||(i.destroy(),this.bbdesigner$(this.radialGaugeElement[0]).remove()));this.radialGaugeElement=null;BoldBIDashboard.isNullOrUndefined(this.radialGaugeItem)||(this.radialGaugeItem.data("BoldBIDashboardScroller")&&this.radialGaugeItem.BoldBIDashboardScroller("destroy"),this.bbdesigner$(this.radialGaugeItem[0]).remove(),this.radialGaugeItem=null)},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.RadialGaugeItem",InternalRadialGaugeReportItem,window);BoldBIDashboard.DashboardDesignerUtility.RadialGaugeItem.prototype.initialize(),function(n){n[n.RangePointerColor=0]="RangePointerColor";n[n.BackgroundColor=1]="BackgroundColor";n[n.ActualValueColor=2]="ActualValueColor";n[n.TargetPointerColor=3]="TargetPointerColor";n[n.NeedlePointerColor=4]="NeedlePointerColor";n[n.TitleColor=5]="TitleColor"}(ColorCustomizationProperty||(ColorCustomizationProperty={})),function(n){var t;(function(t){var i=function(){function t(){}return t.getUnformattedMaxValue=function(n,t){var r=Math.pow(10,3),u=Math.pow(10,6),f=Math.pow(10,9),e=Math.pow(10,5),o=Math.pow(10,7),s=Math.pow(10,12),i=n;switch(t){case"K":return i*r;case"L":return i*e;case"M":return i*u;case"C":return i*o;case"B":return i*f;case"T":return i*s;default:return i}},t.getFormattedRangeValue=function(n,t){var r=Math.pow(10,3),u=Math.pow(10,6),f=Math.pow(10,9),e=Math.pow(10,5),o=Math.pow(10,7),s=Math.pow(10,12),i=n;switch(t){case"K":return Math.round(i/r);case"L":return Math.round(i/e);case"M":return Math.round(i/u);case"C":return Math.round(i/o);case"B":return Math.round(i/f);case"T":return Math.round(i/s);default:return i}},t.getNumberFormat=function(n){switch(n){case"K":return NumberFormat.Thousands;case"M":return NumberFormat.Millions;case"B":return NumberFormat.Billions;case"L":return NumberFormat.Lakhs;case"Cr":return NumberFormat.Crores;default:return NumberFormat.Ones}},t.getOptimumFontSize=function(t){var i=1,r=null;if(t.adjustFont==="both")for(i=1;;)if(r=this.measureText(t.text,t.width,"Bold "+t.height*i+"var(--designer-font)"),r.width>t.width||r.height>t.height){if(n.parseFloat(i.toFixed(2))===.1)return t.height*i;i-=.1}else return Math.min(t.height*i,50);else{if(t.adjustFont==="height")return i=.8,t.height*i;if(t.adjustFont==="width")for(i=.9;;)if(r=this.measureText(t.text,t.width,"Bold "+t.height*i+"var(--designer-font)"),r.width>t.width){if(n.parseFloat(i.toFixed(2))===.1)return t.height*i;i-=.1}else return t.height*i;else return t.height*.9}},t.getEndRangeValue=function(n){var s=n/10,h=n/100,t=h>=1?h:s>=1?s:n,u=null,f,e,v,o,i,c,l;t<1&&(f=t*10,e=t*100,f>=1?u=!0:e>=1&&(u=!1),t=f<1?e<1?t:e:f);var y=t/20,a=y+t,r=0;if(t>=4&&t<=8)r=Math.ceil(a);else for(v=Math.ceil(a*10),o=this.generateValues(v),i=0;i<o.length;i++)if(c=i===0?o[i]:r,l=o[i+1],r=Math.abs(c-t)<Math.abs(l-t)?c:l,i===2)break;return u===!0||u===!1?u===!0?r/10:r/100:r*(h>=1?100:s>=1?10:1)},t.generateValues=function(n){var t=[];return t.push(Math.ceil(n/8)*8/10),t.push(Math.ceil(n/7)*7/10),t.push(Math.ceil(n/6)*6/10),t.push(Math.ceil(n/5)/2),t},t.measureText=function(t,i,r){var c=BoldBIDashboardDesigner.bbdesignerstatic$(document).find("#measureTex"),e=t,u=null,o,s,f,y;BoldBIDashboardDesigner.bbdesignerstatic$("#measureTex").css("display","block");c.length===0?(u=document.createElement("text"),BoldBIDashboardDesigner.bbdesignerstatic$(u).attr({id:"measureTex"}),document.body.appendChild(u)):u=c[0];var l=null,h=null,a=null,v=null;if(typeof e=="string"&&(e.indexOf("<")>-1||e.indexOf(">")>-1)){for(o=e.split(" "),s=0;s<o.length;s++)o[s].indexOf("<br/>")===-1&&(o[s]=o[s].replace(/[<>]/g,"&"));e=o.join(" ")}return u.innerHTML=e,!n.isNullOrUndefined(r)&&n.isNullOrUndefined(r.size)&&(f=r,f=f.split(" "),l=f[0],h=f[1],a=f[2],v=f[3]),n.isNullOrUndefined(r)||n.isNullOrUndefined(r.size)&&n.isNullOrUndefined(h)||(u.style.fontSize=r.size>0?r.size+"px":r.size?r.size:h+"px",u.style.fontStyle&&(u.style.fontStyle=r.fontStyle?r.fontStyle:l),u.style.fontFamily=r.fontFamily?r.fontFamily:a,window.navigator.userAgent.indexOf("MSIE 8.0")===-1&&(u.style.fontWeight=r.fontWeight?r.fontWeight:v)),u.style.backgroundColor="white",u.style.position="absolute",u.style.top=-100,u.style.left=0,u.style.visibility="hidden",u.style.whiteSpace="nowrap",i&&(u.style.maxwidth=i+"px"),y={width:u.offsetWidth,height:u.offsetHeight},BoldBIDashboardDesigner.bbdesignerstatic$("#measureTex").css("display","none"),y},t}();t.GaugeHelper=i})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalComboChartReportItem=function(n){function t(t){var i=n.call(this,t,"ComboChart","e-combochart-item")||this;return i.defaultColorPalette=[],i.breadCrumbItem=null,i.customLegendsForConditionalRange=[],i.comboChartObj=null,i.dataValues=null,i.columnBindings=null,i.selectedShapeItem=null,i.multiSelectionFilter=[],i.trendLineEdit=!1,i.isOpenReport=!1,i.isSwitchingDesignMode=!1,i.multipleProportionChart=!1,i.colorFields=[],i.colorCustomizationSettings=null,i.locale=null,i.isThemeSwitch=!1,i.bbdesigner$=i.designerInstance.bbdesigner$,i.designerId=i.designerInstance._id,i.locale=t.getLocalizationContent(),i.widgetJson=new ComboChartProperties(t),i.colorFields=i.getColorFields(),i.propertyPanel=t.modules.propertyPanel,i.defaultColorPalette=BoldBIDashboard.DashboardUtil.defaultColorPalette,i.colorCustomizationSettings=i.designerInstance.modules.colorCustomization,i.chartHelper=new BoldBIDashboard.DashboardDesignerUtility.ChartHelper(i.designerInstance),i.drillLevelInfo=[],i.unwireEvents(),i.wireEvents(),i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.composition,GroupId:"1475fcad-c397-40c1-a1af-c273b9282a0a",Items:[{id:"cc349998-9391-45fc-9917-70d2f0932a4a",widgetName:"Combo Chart",widgetDisplayName:n.itemPanel.widgetTitle.comboChart,cssClass:"bbi-widgeticon bbi-designer-combo-chart",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ComboChartItem",searchCategory:["combochart","composition"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.comboChart,description:n.itemPanel.widgetDescription.comboChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.comboChartReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ComboChartProperties"}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){this.createComboChartContainer(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.comboChartElement)||this.updateComboChartSize()},t.prototype.getWidgetImage=function(){return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Combo-chart" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="Group-4" transform="translate(12.000000, 12.000000)">            <path d="M4,32.8059529 L51.2995392,32.8059529 C53.5086782,32.8059529 55.2995392,34.5968139 55.2995392,36.8059529 L55.2995392,183.990666 L55.2995392,183.990666 L0,183.990666 L0,36.8059529 C-2.705415e-16,34.5968139 1.790861,32.8059529 4,32.8059529 Z" id="Rectangle" fill="var(--widget-notconfigured-image-background1)"><\/path>            <path d="M85.5668203,62.6913032 L132.866359,62.6913032 C135.075498,62.6913032 136.866359,64.4821642 136.866359,66.6913032 L136.866359,183.990666 L136.866359,183.990666 L81.5668203,183.990666 L81.5668203,66.6913032 C81.5668203,64.4821642 83.3576813,62.6913032 85.5668203,62.6913032 Z" id="Rectangle-Copy-7" fill="var(--widget-notconfigured-image-background1)"><\/path>            <path d="M167.133641,21.0862076 L214.43318,21.0862076 C216.642319,21.0862076 218.43318,22.8770686 218.43318,25.0862076 L218.43318,183.990666 L218.43318,183.990666 L163.133641,183.990666 L163.133641,25.0862076 C163.133641,22.8770686 164.924502,21.0862076 167.133641,21.0862076 Z" id="Rectangle-Copy-8" fill="var(--widget-notconfigured-image-background1)"><\/path>            <path d="M248.700461,0.990666227 L296,0.990666227 C298.209139,0.990666227 300,2.78152723 300,4.99066623 L300,183.990666 L300,183.990666 L244.700461,183.990666 L244.700461,4.99066623 C244.700461,2.78152723 246.491322,0.990666227 248.700461,0.990666227 Z" id="Rectangle-Copy-9" fill="var(--widget-notconfigured-image-background1)"><\/path>            <polyline id="Path-4" stroke="var(--widget-notconfigured-image-background2)" stroke-width="6.12" points="27.6497696 91.9906662 109 11.6894559 190.78341 84.0923075 276.523061 29.5535801"><\/polyline>            <g id="Group-Copy-2" transform="translate(12.723502, 0.704042)">                <circle id="Oval-Copy-4" fill="var(--widget-notconfigured-image-background2)" cx="179.276498" cy="80.795958" r="12"><\/circle>                <circle id="Oval-Copy-5" fill="var(--widget-notconfigured-image-background2)" cx="260.776498" cy="28.295958" r="12"><\/circle>                <circle id="Oval-Copy-6" fill="var(--widget-notconfigured-image-background2)" cx="96.2764977" cy="12.795958" r="12"><\/circle>                <circle id="Oval-Copy-7" fill="var(--widget-notconfigured-image-background2)" cx="12.7764977" cy="91.295958" r="12"><\/circle>            <\/g>        <\/g>    <\/g><\/svg>'},t.prototype.update=function(t){this.updateTitleSubtitleTheme();n.prototype.update.call(this,t);this.IsRendered=!1;this.defaultColorPalette=this.designerInstance.modules.themeHelper.getColorPalette();this.updateComboChartData(t)},t.prototype.applyWidgetTheme=function(n){this.isThemeSwitch=!0;this.updateTitleSubtitleTheme();var t=BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this);(t||BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this),BoldBIDashboard.isNullOrUndefined(this.comboChartObj))||(this.defaultColorPalette=this.designerInstance.modules.themeHelper.getColorPalette(),this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),this.applyPrimaryXAxisTheme(),this.applyPrimaryYAxisTheme(),this.applySecondaryAxisTheme(),this.applyChartBackgroundTheme(),this.applyFontCustomization(),this.applyLegendTheme(),this.applyDataLabelTheme(n),this.applyComboChartItemTheme(),this.updateComboChartData(this.dataValues),this.designerInstance.designerPanel.hideLoadingIndicator(this.controlContainer),this.isThemeSwitch=!1)},t.prototype.updateTitleSubtitleTheme=function(){var n=this.designerInstance.modules.themeHelper.getComboChartHeaderTitle(),t=this.designerInstance.modules.themeHelper.getComboChartHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getChartProperties().ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.applyBreadCrumbTheme=function(n){this.contentContainer.find(".Breadcrumb .e-current-drilldowntext").addClass("e-chart-dbrd-theme");this.contentContainer.find(".Breadcrumb .e-dashboardbreadcrumb-drillIconForward").addClass("e-chart-dbrd-theme");this.contentContainer.find(".e-breadcrumb").addClass("e-chart-dbrd-theme");n?(this.contentContainer.find(".Breadcrumb .e-current-drilldowntext").addClass("e-breadcrumb-dark"),this.contentContainer.find(".Breadcrumb .e-dashboardbreadcrumb-drillIconForward").addClass("e-breadcrumb-dark")):(this.contentContainer.find(".Breadcrumb .e-current-drilldowntext").removeClass("e-breadcrumb-dark"),this.contentContainer.find(".Breadcrumb .e-dashboardbreadcrumb-drillIconForward").removeClass("e-breadcrumb-dark"));var t=this.designerId+"comboChartElement"+this.widgetJson.UniqueName+"Breadcrumb";this.contentContainer.find("#"+t).css("background","transparent");this.contentContainer.find("#"+t+"_breadcrumbDiv").css("background","transparent")},t.prototype.applyPrimaryXAxisTheme=function(){var n=this.comboChartObj.model.primaryXAxis;n.title.font.color=this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getComboChartAxisTitleFontColor();n.font.color=this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getComboChartAxisLabelFontColor();n.majorGridLines.color=this.themeHelper.getComboChartMajorGridLinesColor();n.majorTickLines.color=this.themeHelper.getComboChartMajorTickLinesColor();n.axisLine.color=this.themeHelper.getComboChartMajorGridLinesColor()},t.prototype.applyPrimaryYAxisTheme=function(){var n=this.comboChartObj.model.primaryYAxis;n.title.font.color=this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getComboChartAxisTitleFontColor();n.font.color=this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getComboChartAxisLabelFontColor();n.majorGridLines.color=this.themeHelper.getComboChartMajorGridLinesColor();n.majorTickLines.color=this.themeHelper.getComboChartMajorTickLinesColor()},t.prototype.applySecondaryAxisTheme=function(){if(!BoldBIDashboard.isNullOrUndefined(this.comboChartObj.model.axes)&&this.comboChartObj.model.axes.length>0){var n=this.comboChartObj.model.axes[0];n.title.font.color=this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getComboChartAxisTitleFontColor();n.font.color=this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getComboChartAxisLabelFontColor();n.majorGridLines.color=this.themeHelper.getComboChartMajorGridLinesColor();n.majorTickLines.color=this.themeHelper.getComboChartMajorTickLinesColor()}},t.prototype.applyChartBackgroundTheme=function(){this.comboChartObj.model.chartArea.background="transparent"},t.prototype.applyLegendTheme=function(){this.comboChartObj.model.legend.font.color=this.comboChartObj.model.legend.title.font.color=this.getChartProperties().LegendLabel.IsEdited?this.getChartProperties().LegendLabel.Color:this.themeHelper.getComboChartLegendFontColor()},t.prototype.applyFontCustomization=function(){for(var n,t,i,r,u,e=this.ContentContainer.find(".e-datavisualization-chart"),f=0;f<e.length;f++)n=this.bbdesigner$(e[f]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(n)||(t=this.themeHelper.getComboChartAxisTitleFont(),i=this.themeHelper.getComboChartAxisLabelFont(),n.model.primaryXAxis.title.font.size=n.model.primaryYAxis.title.font.size=t.size,n.model.primaryXAxis.title.font.fontWeight=n.model.primaryYAxis.title.font.fontWeight=t.weight,n.model.primaryXAxis.title.font.fontFamily=n.model.primaryYAxis.title.font.fontFamily=t.family,n.model.primaryXAxis.font.size=n.model.primaryYAxis.font.size=i.size,n.model.primaryXAxis.font.fontWeight=n.model.primaryYAxis.font.fontWeight=i.weight,n.model.primaryXAxis.font.fontFamily=n.model.primaryYAxis.font.fontFamily=i.family,!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ChartSeriesTypeInfo)&&this.getChartProperties().ChartSeriesTypeInfo.length>0&&this.getChartProperties().ChartSeriesTypeInfo.filter(function(n){return n.IsSecondaryAxis}).length>0&&(BoldBIDashboard.isNullOrUndefined(n.model.axes[0])||(n.model.axes[0].title.font.size=t.size,n.model.axes[0].title.font.fontWeight=t.weight,n.model.axes[0].title.font.fontFamily=t.family,n.model.axes[0].font.size=i.size,n.model.axes[0].font.fontWeight=i.weight,n.model.axes[0].font.fontFamily=i.family)),r=this.themeHelper.getComboChartLegendFont(),u=this.themeHelper.getComboChartLegendTitleFont(),n.model.legend.font.size=r.size,n.model.legend.font.fontFamily=r.family,n.model.legend.font.fontWeight=r.weight,n.model.legend.title.font.size=u.size,n.model.legend.title.font.fontFamily=u.family,n.model.legend.title.font.fontWeight=u.weight)},t.prototype.applyDataLabelTheme=function(n){for(var t,i,u,e=!BoldBIDashboard.isNullOrUndefined(this.drillLevelInfo)&&this.drillLevelInfo.length>0,f=this.ContentContainer.find(".e-datavisualization-chart"),r=0;r<f.length;r++)if(t=this.bbdesigner$(f[r]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(t))for(t.model.commonSeriesOptions.marker.dataLabel.font.color=this.getChartProperties().ValueLabel.IsEdited?this.getChartProperties().ValueLabel.Color:this.themeHelper.getComboChartDataLabelFontColor(),t.model.legend.font.color=t.model.legend.title.font.color=this.getChartProperties().LegendLabel.IsEdited?this.getChartProperties().LegendLabel.Color:this.themeHelper.getComboChartLegendFontColor(),i=0;i<t.model.series.length;i++)t.model.series[i].marker.dataLabel.font.color=this.getChartProperties().ValueLabel.IsEdited?this.getChartProperties().ValueLabel.Color:this.themeHelper.getComboChartDataLabelFontColor(),t.model.series[i].marker.border.color=this.themeHelper.getComboChartMarkerColor(),u=this.themeHelper.getComboChartDataLabelFont(),t.model.series[i].marker.dataLabel.font.size=u.size,t.model.series[i].marker.dataLabel.font.fontFamily=u.family,t.model.series[i].marker.dataLabel.font.fontWeight=u.weight,e&&(t.model.primaryXAxis.title.font.color=this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getComboChartAxisTitleFontColor(),t.model.primaryXAxis.font.color=this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getComboChartAxisLabelFontColor(),t.model.primaryXAxis.majorGridLines.color=this.themeHelper.getComboChartMajorGridLinesColor(),t.model.primaryXAxis.majorTickLines.color=this.themeHelper.getComboChartMajorTickLinesColor(),t.model.primaryYAxis.title.font.color=this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getComboChartAxisTitleFontColor(),t.model.primaryYAxis.font.color=this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getComboChartAxisLabelFontColor(),t.model.primaryYAxis.majorGridLines.color=this.themeHelper.getComboChartMajorGridLinesColor(),t.model.primaryYAxis.majorTickLines.color=this.themeHelper.getComboChartMajorTickLinesColor(),!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ChartSeriesTypeInfo)&&this.getChartProperties().ChartSeriesTypeInfo.length>0&&this.getChartProperties().ChartSeriesTypeInfo.filter(function(n){return n.IsSecondaryAxis}).length>0&&(BoldBIDashboard.isNullOrUndefined(t.model.axes[0])||(t.model.axes[0].title.font.color=this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getComboChartAxisTitleFontColor(),t.model.axes[0].font.color=this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getComboChartAxisLabelFontColor(),t.model.axes[0].majorGridLines.color=this.themeHelper.getComboChartMajorGridLinesColor(),t.model.axes[0].majorTickLines.color=this.themeHelper.getComboChartMajorTickLinesColor())),t.redraw(),this.bbdesigner$(f[r]).css("background","transparent"),this.comboChartElement.css("background","transparent"),this.applyBreadCrumbTheme(n))},t.prototype.applyComboChartItemTheme=function(){this.comboChartItem.css("background","transparent")},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej1.chart.all.min.js",NameSpace:"BoldBIDashboard.datavisualization.Chart"},DependentScripts:[]}},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,"BoldBIDashboard.datavisualization.Chart")},t.prototype.getFieldContainer=function(){var u=new BoldBIDashboard.Dashboard.FieldContainerForUI,r,i,t,f,e;return u.Name="primaryYValue",u.DisplayName=this.locale.fieldContainer.values,u.ContainerType=FieldContainerType.Numeric,u.Required=!0,r=new BoldBIDashboard.Dashboard.FieldContainerForUI,r.Name="secondaryYValue",r.DisplayName=this.locale.fieldContainer.secondaryValues,r.ContainerType=FieldContainerType.Numeric,r.Required=!0,i=new BoldBIDashboard.Dashboard.FieldContainerForUI,i.Name="Column",i.DisplayName=this.locale.fieldContainer.columns,i.ContainerType=FieldContainerType.Non_Numeric,i.IsDrillSection=!0,i.HasCustomDate=!0,t=new BoldBIDashboard.Dashboard.FieldContainerForUI,t.Name="HiddenColumn",t.DisplayName=this.locale.dataconfiguration.filedContainer.hiddenColumnName,t.ContainerType=FieldContainerType.None,t.QueryOrder=0,t.ShowDescriptionIcon=!0,t.TooltipText=this.locale.fieldContainer.hiddenColumnMessage.comboChart,f=n.prototype.getFilterColumn.call(this),f.HasCustomDate=!0,e=BoldBIDashboard.DashboardUtil.getToolTipFieldsDefaultContainer(),[u,r,i,t,f,e]},t.prototype.getValueContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"YValue")},t.prototype.getColumnContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Column")},t.prototype.getRowContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Row")},t.prototype.getHiddenColumnContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"HiddenColumn")},t.prototype.getJson=function(){return this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t)},t.prototype.getPropertyPanelItems=function(){return this.updateFontsizeTitleVisibility(),this.getComboChartPropertyPanel()},t.prototype.updateFontsizeTitleVisibility=function(){var n=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getUpdatedSeriesAxisCount(this.getChartProperties().ChartSeriesTypeInfo);this.updateTitleVisibility("ComboChart","FontSettings","PrimaryAxisTitleFont",this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle,this);this.updateTitleVisibility("ComboChart","FontSettings","SecondaryAxisLabelFont",n.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,this);this.updateTitleVisibility("ComboChart","FontSettings","SecondaryAxisTitleFont",n.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle,this);this.updateTitleVisibility("ComboChart","FontSettings","PrimaryAxisLabelFont",this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,this);this.updateTitleVisibility("ComboChart","FontSettings","CategoryAxisLabelFont",this.getChartProperties().Axis.CategoryAxis.IsEnabled);this.updateTitleVisibility("ComboChart","FontSettings","CategoryAxisTitleFont",this.getChartProperties().Axis.CategoryAxis.IsEnabled&&this.getChartProperties().Axis.CategoryAxis.ShowTitle);this.updateTitleVisibility("ComboChart","FontSettings","Legend",this.getChartProperties().ShowLegend);this.updateTitleVisibility("ComboChart","FontSettings","LegendTitleFont",this.getChartProperties().ShowLegend);this.updateTitleVisibility("ComboChart","FontSettings","ValueLabel",this.getChartProperties().ShowValueLabels)},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateComboChartPropertyChange(n,t,i,r)},t.prototype.onFieldSettingsClick=function(n,t){for(var r,i=0;i<t.length;i++)r=t[i].Name,n.ContainerName==="HiddenColumn"&&(t[i].Name==="Sort"||t[i].Name==="DimensionFilters"||t[i].Name==="MeasureFilter"||t[i].Name==="RelativeDateFilter"||t[i].Name==="MeasureFormat")?t[i].IsVisible=!1:r===SummaryType.NONE&&(t[i].IsVisible=!0);return t},t.prototype.updateInitialSelection=function(){},t.prototype.isNecessaryDataConfigured=function(){return this.DataGroupInfo.FieldContainers.length>0&&(this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0||this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0)?!0:!1},t.prototype.clearFilter=function(n){var r,t,i;for(BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this),this.widgetJson.SelectedFilterValues=[],this.isCurrentMaster=!1,this.designerInstance.modules.serialization.notifyChange(),BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this),this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName),r=this.comboChartElement.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||(i.model.selectedDataPointIndexes=[],this.multiSelectionFilter=[],i.redraw())},t.prototype.getMobileViewHeight=function(){return 3*this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.refresh=function(){this.comboChartObj.redraw()},t.prototype.dispose=function(){this.comboChartItemDispose();n.prototype.dispose.call(this)},t.prototype.onFieldDragDrop=function(n,t,i){return this.chartHelper.onFieldDragDropped(n,this.DataGroupInfo,!1,t,i)},t.prototype.isFieldValid=function(n,t,i){return!(t===FieldContainerType[FieldContainerType.Non_Numeric]&&(i==="Column"||i==="Row")&&n)},t.prototype.getWidgetInfo=function(t,i){var r=n.prototype.getWidgetInfo.call(this,t,i);return r.ChartType=this.getChartProperties().ChartType,this.isNecessaryDataConfigured()&&this.getChartProperties().ChartSeriesTypeInfo.length===0&&(this.updateChartDataInfo(),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.designerInstance.modules.serialization.notifyChange()),r.ChartSeriesTypeInfo=this.getChartProperties().ChartSeriesTypeInfo,r.EnableSmoothScroll=this.getChartProperties().EnableSmoothScroll,r.WidgetAction="WidgetAction",r.ForecastSettings=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getWidgetForecastSettings(this),!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[2])&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length>0?n.prototype.initializeVirtualScrollSettings.call(this,200,1):n.prototype.clearVirtualScrollSettings.call(this),r.VirtualScrollSettings=this.VirtualScrollSettings,this.updateColorCustomizationSettings(this),r.ColorCustomization=this.getColorCustomization(),r},t.prototype.updateDataGroupInfo=function(t,i){n.prototype.updateDataGroupInfo.call(this,t,i);this.updateChartDataInfo()},t.prototype.removeAllDrillElements=function(){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.removeAllDrillElementsForChart(this)},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.locale.itemPanel.widgetDataRequiredMessage.comboChartDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.updateDisplayTextBasedProperties=function(){this.columnBindings=this.DataColumnBindings;this.updateAxisTitle();this.updateComboChartLegends();BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateBreadCrumbText(this);this.refresh()},t.prototype.createComboChartContainer=function(t){try{BoldBIDashboard.isNullOrUndefined(t)?(this.getChartProperties().ShowLegend=!0,this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled=!0):(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)):n.prototype.setJson.call(this,t),this.isOpenReport=!0,this.getChartProperties().Axis.SecondaryValueAxis=BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)?new SecondaryValueAxis:this.getChartProperties().Axis.SecondaryValueAxis,this.getChartProperties().ForecastProperties=BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ForecastProperties)?new ForecastProperties:this.getChartProperties().ForecastProperties);this.renderComboChartElement();!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.ComboChart)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.performSelectedWidgetAction=function(n,t,i,r){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.performSelectedAction(n,t,i,r)},t.prototype.processFilterInformation=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.processFilterInformation(n,this,this.DataGroupInfo)},t.prototype.renderChartSeriesTypeDialog=function(){var n=this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable;this.designerInstance.modules.chartSeriesType.openChartSeriesTypeDialog(this,"updateChartTypeAndAxis",this.getChartProperties().ChartSeriesTypeInfo,n)},t.prototype.renderLineStyleCustomization=function(){var n=this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable;this.designerInstance.modules.chartLineStyleType.createLineStyleDialogElement(this,n)},t.prototype.updateComboChartSize=function(){var i,n;if(BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this)&&this.widgetContainerHelper.showControlError(this,this.dataValues),!BoldBIDashboard.isNullOrUndefined(this.comboChartObj))if(this.isSwitchingDesignMode=this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design,this.drillLevelInfo.length===0)this.updateComboChartElementsVisibility(),this.updateLegendVisibilityObject(this.comboChartObj),this.designerInstance.canApplyTheme()||BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateFontStyle(this.comboChartObj,this.getFontSizeBasedOnResolution(),this),this.refresh();else for(i=this.getBreadcrumbDatasource(),n=0;n<i.length;n++){var r=i[n].id.split("_Breadcrumb")[0],u=this.contentContainer.find("#"+r),t=u.data("BoldBIDashboardChart");BoldBIDashboard.isNullOrUndefined(t)||(this.updateLegendVisibilityObject(t),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateFontStyleForBreadCrumb(this),this.designerInstance.canApplyTheme()||BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateFontStyle(t,this.getFontSizeBasedOnResolution(),this),t.redraw())}},t.prototype.updateComboChartElementsVisibility=function(){var t,n,i;BoldBIDashboard.isNullOrUndefined(this.comboChartObj)||(t=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getUpdatedSeriesAxisCount(this.getChartProperties().ChartSeriesTypeInfo),n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.CellInfo,!1,BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isXaxisLabelVisible(this)),this.comboChartObj.model.primaryYAxis.title.visible=n.ShowYAxisTitle?this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle:!1,this.comboChartObj.model.primaryXAxis.title.visible=n.ShowXAxisTitle?this.getChartProperties().Axis.CategoryAxis.ShowTitle:!1,this.comboChartObj.model.primaryYAxis.visible=n.ShowYAxisLabels&&t.primaryValueLength>0?this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled:!1,this.comboChartObj.model.primaryXAxis.visible=n.ShowXAxisLabels&&(t.primaryValueLength>0||t.secondaryValueLength>0)?this.getChartProperties().Axis.CategoryAxis.IsEnabled:!1,this.comboChartObj.model.axes[0].visible=n.ShowYAxisLabels&&t.secondaryValueLength>0?this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled:!1,this.comboChartObj.model.axes[0].title.visible=n.ShowYAxisTitle&&t.secondaryValueLength>0?this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle:!1,this.comboChartObj.model.legend.visible=this.getChartProperties().EnableColorSettings||this.comboChartObj.model.series.length!==1?n.ShowLegend?this.getChartProperties().ShowLegend:!1:!1,this.comboChartObj.model.legend.position=this.getResponsiveLegendPosition(this.getChartProperties().LegendPosition),this.comboChartObj.model.primaryXAxis.labelRotation=this.getResponsiveLabelRotation(this.getChartProperties().Axis.CategoryAxis.LabelRotation),i=this.getResponsiveLabelnteresect(this.getChartProperties().Axis.CategoryAxis.LabelOverflowMode),this.comboChartObj.model.primaryXAxis.labelIntersectAction=i,this.comboChartObj.model.primaryXAxis.enableTrim=this.getChartProperties().Axis.CategoryAxis.EnableTrim,this.comboChartObj.model.primaryXAxis.majorGridLines.visible=this.getChartProperties().CategoryGridLines,this.comboChartObj.model.primaryYAxis.majorGridLines.visible=this.getChartProperties().PrimaryValueGridLines,this.comboChartObj.model.axes[0].majorGridLines.visible=this.getChartProperties().SecondaryValueGridLines)},t.prototype.getResponsiveLegendPosition=function(n){return n==="Auto"?this.CellInfo.ColumnSpan>=4*this.CellInfo.RowSpan?"Right":"Bottom":n},t.prototype.getResponsiveLabelRotation=function(n){return n==="Auto"?this.CellInfo.RowSpan>this.CellInfo.ColumnSpan?"90":"0":n==="None"?"0":n},t.prototype.getResponsiveLabelnteresect=function(n){if(n==="Auto"){var t=this.getResponsiveLabelRotation(this.getChartProperties().Axis.CategoryAxis.LabelRotation);return t!=="0"?"Trim":"Hide"}return n},t.prototype.openColorPalette=function(n,t,i){this.designerInstance.modules.colorPalette.openColorPalette(n,t,i,this,"updateColorPalette",this.getChartProperties().ColorPaletteModel)},t.prototype.updateChartTypeAndAxis=function(n){var s=this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable,k=this.getChartProperties().ChartSeriesTypeInfo.length,d=this.isAdvanceColorSupported(),t,i,c,r,l,a,v,u,e,y,f,o,b;for(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.checkBarWithLineChart(n,this.comboChartObj.model.series,this),t=0;t<k;t++)for(i=0;i<n.length;i++)if(this.getChartProperties().ChartSeriesTypeInfo[t].UniqueColumnName===n[i].UniqueColumnName){this.getChartProperties().ChartSeriesTypeInfo[t].IsSecondaryAxis=n[i].IsSecondaryAxis;this.getChartProperties().ChartSeriesTypeInfo[t].ChartType=n[i].ChartType;break}for(c=!this.isAdvanceColorSupported()&&d&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ColorCustomization),this.chartHelper.checkColorSettings(c,this),r=[],l=s?this.getChartProperties().ChartSeriesTypeInfo[0].ChartType==="Spline"||this.getChartProperties().ChartSeriesTypeInfo[0].ChartType==="Line"?this.comboChartObj.model.series.length:1:this.comboChartObj.model.series.length,this.comboChartObj=this.contentContainer.find(".e-datavisualization-chart").data("BoldBIDashboardChart"),a=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(this),v=this.designerInstance.canApplyTheme(),u=0;u<l;u++)for(e=0;e<this.getChartProperties().ChartSeriesTypeInfo.length;e++)if(this.comboChartObj.model.series[u].id===this.getChartProperties().ChartSeriesTypeInfo[e].UniqueColumnName){r.push(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.setChartTypeAndAxis(this.comboChartObj.model.series[u],this.getChartProperties(),this.getFontSizeBasedOnResolution(),this.themeHelper,a,v));break}BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ColorCustomization)||(o=this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(this.DataGroupInfo,this),y={action:"ColorCustomization",fieldInfoList:o},BoldBIDashboard.DashboardDesignerUtility.ChartHelper.WidgetDataFetch(y,this,this.designerInstance));r=this.getSortedSeriesList(r);this.comboChartObj.model.series=this.getTotalPointsValueAsPercentType(r);this.updateAdvanceColorPoints(r,this.getChartProperties().ColorCustomization);this.comboChartObj.model.axes[0].orientation=this.getChartProperties().ChartSeriesTypeInfo.length>0&&this.isBarChartType(this.getChartProperties().ChartSeriesTypeInfo[0].ChartType)?"horizontal":"vertical";this.setRangePaddingValue();this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable=s?this.getChartProperties().ChartSeriesTypeInfo[0].ChartType==="Spline"||this.getChartProperties().ChartSeriesTypeInfo[0].ChartType==="Line"?!0:!1:!1;s&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateForecastSeries(this.getChartProperties().ForecastProperties,this.comboChartObj.model.series);BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateTrendLineBasedOnSeriesType(this,this.comboChartObj,!0);f=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getUpdatedSeriesAxisCount(this.getChartProperties().ChartSeriesTypeInfo);this.comboChartObj.model.primaryYAxis.valueType=f.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.AxisType===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Logarithmic)&&this.axisTypevisible(this.comboChartObj.model.series,!1)?"logarithmic":"double";this.comboChartObj.model.axes[0].valueType=f.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.AxisType===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Logarithmic)&&this.axisTypevisible(this.comboChartObj.model.series,!0)?"logarithmic":"double";this.updateOrderOfColorPalette();this.updateAxisLabelFormat();this.updateAxisTitle();this.updateAxisVisibility();this.updateItemVisibilityForAxis();this.updateValueLabelSuffix(this.getChartProperties().ValueLabelSuffix);this.updateAxisGridLines(!1);this.updateComboChartElementsVisibility();BoldBIDashboard.DashboardDesignerUtility.ChartHelper.enableOrDisableForecastOption(this);var g=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isLineStyleVisible(this.comboChartObj.model.series),nt=this.isMarkerVisible(this.comboChartObj.model.series),p=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.columnSpacingAndWidthVisibilty(this.getChartProperties().ChartSeriesTypeInfo),tt=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.ValueLabelPositionVisibility(this.getChartProperties());this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","ColumnWidth",p);this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","ColumnSpacing",p);this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","ShowMarker",nt);this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","LineStyle",g);this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","ValueLabelPosition",tt);this.updateTitleVisibility("ComboChart","FontSettings","PrimaryAxisLabelFont",this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,this);this.updateTitleVisibility("ComboChart","FontSettings","PrimaryAxisTitleFont",this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle,this);this.updateTitleVisibility("ComboChart","FontSettings","SecondaryAxisLabelFont",f.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,this);this.updateTitleVisibility("ComboChart","FontSettings","SecondaryAxisTitleFont",f.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle,this);var h=this.defaultPaletteContainer.find("#"+this.categoryId+"_advance_color_palatte_body_element"),w=this.defaultPaletteContainer.find("#"+this.categoryId+"_palatte_button"),it=this.defaultPaletteContainer.find("#"+this.categoryId+"_color_settings_button");this.isAdvanceColorSupported()?(h.css("display","block"),w.css("display","block"),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateAdvanceButtonVisibility(h,it,this.getChartProperties().EnableColorSettings),BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ColorCustomization)||(this.initializeVirtualScrollSettings(),o=this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(this.DataGroupInfo,this),b={action:"ColorCustomization",fieldInfoList:o},BoldBIDashboard.DashboardDesignerUtility.ChartHelper.WidgetDataFetch(b,this,this.designerInstance))):(h.css("display","none"),w.css("display","none"),this.getChartProperties().ColorCustomization=null,this.resetChartColorUpdateProperties(),this.comboChartObj.redraw());this.designerInstance.modules.serialization.notifyChange();BoldBIDashboardDesigner.editManager.setMergeAction(!1)},t.prototype.renderComboChartElement=function(){this.comboChartElement=BoldBIDashboard.buildTag("div.comboChartElement e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","background-color":"transparent","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder},{id:this.designerId+"comboChartElement"+this.widgetJson.UniqueName});this.comboChartItem=BoldBIDashboard.buildTag("div.combo-chart-item","",{width:"100%",height:"100%",position:"relative","font-size":"10pt","background-color":"transparent"},{id:this.designerId+"comboChartItem"+this.widgetJson.UniqueName});this.comboChartElement.append(this.comboChartItem);this.contentContainer.css("overflow","hidden");this.contentContainer.append(this.comboChartElement);this.comboChartItem.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designerId+"_designer_waiting_popup bbi-designer-loader",template:this.designerInstance.getWaitingPopupTemplate()});this.controlContainer.data("widgetInstance",this);this.comboChartElement.hide()},t.prototype.renderComboChartWidget=function(n,t,i){var r=this.getComboChartObj(this.getChartProperties()),u,f,e;r.series=n;r.width="100%";r.height="100%";u=t.primaryYValue.length+t.secondaryYValue.length;f=this.dataValues.widgetData.Data.length>0?JSON.parse(this.dataValues.data):[];u>0&&t.columnValue.length>0&&!BoldBIDashboard.isNullOrUndefined(this.VirtualScrollSettings)&&f.length===this.VirtualScrollSettings.PageSize&&this.dataValues.hasMoreRecords?(r.primaryXAxis.enableScrollbar=!0,r.primaryXAxis.pointsLength=this.getChartProperties().EnableSmoothScroll?this.maxRecordCount:400,r.primaryXAxis._scrollLeft=0,r.primaryXAxis.zoomPosition=0,r.scrollChanged=this.bbdesigner$.proxy(this.scrollChanged,this)):r.primaryXAxis.enableScrollbar=!1;BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateAxisLabelFormat(this.getChartProperties(),r);i&&this.updateTrendline(n,r);BoldBIDashboard.DashboardDesignerUtility.ChartHelper.setRangePaddingValue(this.getChartProperties(),r);e=this.updateHighlightOrSelectionSettings();this.updateComboChartSelection(e,r);r.selectedDataPointIndexes=this.getInitialSelection(r.series);this.comboChartItem.BoldBIDashboardChart(r);this.comboChartObj=this.comboChartItem.data("BoldBIDashboardChart");this.updateDataGroupPropertyVisibility(t,i);this.updateItemVisibilityForAxis();this.updateComboChartElementsVisibility();this.isAdvanceColorSupported()&&this.getChartProperties().EnableColorSettings?BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateChartPropertiesBasedOnColorType(this.dataValues,this.comboChartObj,this.getChartProperties()):this.resetChartColorUpdateProperties();this.updateColorCustomizationSettings(this);this.updateCustomLegendSettingsValue();this.comboChartObj.model.axes[0].orientation=this.getChartProperties().ChartSeriesTypeInfo.length>0&&this.isBarChartType(this.getChartProperties().ChartSeriesTypeInfo[0].ChartType)?"horizontal":"vertical"},t.prototype.getComboChartObj=function(n){var f=this.getUpdatedSeriesAxisCount(),i=this.getFontSizeBasedOnResolution(),t=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode(),r=this.themeHelper.getComboChartAxisTitleFont(),u=this.themeHelper.getComboChartAxisLabelFont(),e=this.getChartProperties().ValueLabel.IsEdited?this.getChartProperties().ValueLabel.Color:this.themeHelper.getComboChartDataLabelFontColor(),o=this.themeHelper.getComboChartLegendFont(),s=this.themeHelper.getComboChartLegendTitleFont();return{palette:this.themeHelper.getColorPalette(),series:[],isResponsive:!1,chartArea:{background:"transparent"},primaryXAxis:{axisLine:{color:this.themeHelper.getComboChartMajorGridLinesColor()},title:{font:{size:this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize?i:this.getChartProperties().Axis.CategoryAxis.CategoryAxisTitleFontSize+"px",fontFamily:t?r.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?r.weight:"Bold",color:this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getComboChartAxisTitleFontColor()},visible:n.Axis.CategoryAxis.ShowTitle,text:n.Axis.CategoryAxis.Title,enableTrim:n.Axis.CategoryAxis.EnableTrim},range:{interval:this.getChartProperties().Axis.CategoryAxis.IsAutoInterval?null:this.getChartProperties().Axis.CategoryAxis.Interval},edgeLabelPlacement:"none",font:{size:this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisLabelFontSize?i:this.getChartProperties().Axis.CategoryAxis.CategoryAxisLabelFontSize+"px",fontFamily:t?u.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?u.weight:"Regular",color:this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getComboChartAxisLabelFontColor()},visible:n.Axis.CategoryAxis.IsEnabled,labelRotation:this.getResponsiveLabelRotation(n.Axis.CategoryAxis.LabelRotation),labelIntersectAction:BoldBIDashboard.isNullOrUndefined(n.Axis)?"multipleRows":this.getResponsiveLabelnteresect(n.Axis.CategoryAxis.LabelOverflowMode),majorGridLines:{visible:n.CategoryGridLines,color:this.themeHelper.getComboChartMajorGridLinesColor()},majorTickLines:{color:this.designerInstance.modules.themeHelper.getComboChartMajorTickLinesColor()},valueType:"Category",enableScrollbar:!1,maximumLabelWidth:BoldBIDashboard.isNullOrUndefined(n.Axis)?34:n.Axis.CategoryAxis.MaxLabelWidth},primaryYAxis:{axisLine:{width:0},majorGridLines:{visible:n.PrimaryValueGridLines,color:this.designerInstance.modules.themeHelper.getComboChartMajorGridLinesColor()},majorTickLines:{color:this.themeHelper.getComboChartMajorTickLinesColor()},valueType:f.primaryValueLength>0&&!BoldBIDashboard.isNullOrUndefined(n.Axis.PrimaryValueAxis)&&n.Axis.PrimaryValueAxis.IsEnabled&&n.Axis.PrimaryValueAxis.AxisType===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Logarithmic)?"logarithmic":"double",title:{font:{size:this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize?i:this.getChartProperties().Axis.PrimaryValueAxis.PrimaryTitleFontSize+"px",fontFamily:t?r.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?r.weight:"Bold",color:this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getComboChartAxisTitleFontColor()},visible:n.Axis.PrimaryValueAxis.ShowTitle,text:n.Axis.PrimaryValueAxis.Title,enableTrim:!0},edgeLabelPlacement:"shift",labelFormat:"{value}",font:{size:this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize?i:this.getChartProperties().Axis.PrimaryValueAxis.PrimaryLabelFontSize+"px",fontFamily:t?u.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?u.weight:"Regular",color:this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getComboChartAxisLabelFontColor()},visible:n.Axis.PrimaryValueAxis.IsEnabled&&f.primaryValueLength>0?!0:!1,range:BoldBIDashboard.isNullOrUndefined(n.PrimaryAxisRange)?{}:{min:n.PrimaryAxisRange.MinValue!==""?Number(n.PrimaryAxisRange.MinValue):null,max:n.PrimaryAxisRange.MaxValue!==""?Number(n.PrimaryAxisRange.MaxValue):null,interval:n.PrimaryAxisRange.Interval!==""?Number(n.PrimaryAxisRange.Interval):null}},axes:[{axisLine:{width:0},majorGridLines:{visible:n.SecondaryValueGridLines,color:this.themeHelper.getComboChartMajorGridLinesColor()},majorTickLines:{color:this.designerInstance.modules.themeHelper.getComboChartMajorTickLinesColor()},valueType:f.secondaryValueLength>0&&!BoldBIDashboard.isNullOrUndefined(n.Axis.SecondaryValueAxis)&&n.Axis.SecondaryValueAxis.IsEnabled&&n.Axis.SecondaryValueAxis.AxisType===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Logarithmic)?"logarithmic":"double",opposedPosition:!0,orientation:"vertical",name:"secondaryYAxis",title:{visible:n.Axis.SecondaryValueAxis.ShowTitle,text:n.Axis.SecondaryValueAxis.Title,enableTrim:!0,font:{size:this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize?i:this.getChartProperties().Axis.SecondaryValueAxis.SecondaryTitleFontSize+"px",fontFamily:t?r.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?r.weight:"Bold",color:this.getChartProperties().AxisTitle.IsEdited?this.getChartProperties().AxisTitle.Color:this.themeHelper.getComboChartAxisTitleFontColor()}},edgeLabelPlacement:"shift",labelFormat:"{value}",font:{size:this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize?i:this.getChartProperties().Axis.SecondaryValueAxis.SecondaryLabelFontSize+"px",fontFamily:t?u.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?u.weight:"Regular",color:this.getChartProperties().AxisLabel.IsEdited?this.getChartProperties().AxisLabel.Color:this.themeHelper.getComboChartAxisLabelFontColor()},visible:n.Axis.SecondaryValueAxis.IsEnabled&&f.secondaryValueLength>0,range:BoldBIDashboard.isNullOrUndefined(n.SecondaryAxisRange)?{}:{min:n.SecondaryAxisRange.MinValue!==""?Number(n.SecondaryAxisRange.MinValue):null,max:n.SecondaryAxisRange.MaxValue!==""?Number(n.SecondaryAxisRange.MaxValue):null,interval:n.SecondaryAxisRange.Interval!==""?Number(n.SecondaryAxisRange.Interval):null}}],commonSeriesOptions:{tooltip:{visible:this.getChartProperties().ShowTooltip,fill:"initial",opacity:1,border:{width:0}},enableAnimation:this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage?!1:n.EnableAnimation,enableSmartLabels:!0,highlightSettings:{enable:this.isHighlightEffectRequired(),opacity:.8,border:{width:1},mode:this.updateHighlightOrSelectionSettings(),pattern:"diagonalForward"},selectionSettings:{enable:this.widgetJson.FilterSettings.ActAsMasterWidget,opacity:.8,border:{width:1},mode:this.updateHighlightOrSelectionSettings(),pattern:"diagonalForward",type:BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isMultiSelectionEnabled(this)?"multiple":"single"},marker:{dataLabel:{font:{size:this.getChartProperties().IsAutoValueLabelFontSize?i:this.getChartProperties().ValueLabelFontSize+"px",fontFamily:t?e.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?e.weight:"Regular",color:this.getChartProperties().ValueLabel.IsEdited?this.getChartProperties().ValueLabel.Color:this.themeHelper.getComboChartDataLabelFontColor()},horizontalTextAlignment:"middle",angle:this.getChartProperties().ValueLabelRotation},shape:"circle",size:{height:6,width:6},enableSmartLabels:!0,visible:!1}},legend:{visible:n.ShowLegend,shape:n.LegendShape.replace(/\s/g,""),itemPadding:12,position:this.getResponsiveLegendPosition(n.LegendPosition),title:{font:{size:this.getChartProperties().IsAutoLegendTitleFontSize?i:this.getChartProperties().LegendTitleFontSize+"px",fontWeight:t?s.weight:"500",fontFamily:t?s.family:"var(--designer-font)",color:this.getChartProperties().LegendLabel.IsEdited?this.getChartProperties().LegendLabel.Color:this.themeHelper.getComboChartLegendFontColor()},text:n.LegendTitle,alignment:"Center"},alignment:"Center",font:{size:this.getChartProperties().IsAutoLegendFontSize?i:this.getChartProperties().LegendFontSize+"px",fontFamily:t?o.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:t?o.weight:"400",color:this.getChartProperties().LegendLabel.IsEdited?this.getChartProperties().LegendLabel.Color:this.themeHelper.getComboChartLegendFontColor()}},margin:{bottom:0,left:0,right:0,top:0},axesLabelRendering:this.bbdesigner$.proxy(this.comboChartAxisRender,this),toolTipInitialize:this.bbdesigner$.proxy(this.toolTipForComboChart,this),chartMouseMove:this.bbdesigner$.proxy(this.mouseMoveEvent,this),chartMouseLeave:this.bbdesigner$.proxy(this.mouseLeaveEvent,this),pointRegionClick:this.bbdesigner$.proxy(this.pointRegionClick,this),legendItemClick:this.bbdesigner$.proxy(this.comboChartLegendItemClick,this),axisLabelClick:this.bbdesigner$.proxy(this.onAxisLabelClick,this),axisLabelMouseMove:this.bbdesigner$.proxy(this.onAxisLabelMouseMove,this),legendItemRendering:this.bbdesigner$.proxy(this.updateCustomLegendsForConditionalRange,this),displayTextRendering:this.bbdesigner$.proxy(this.updateForcastLabelFormat,this),preRender:this.bbdesigner$.proxy(this.comboChartPreRender,this),seriesRendering:this.bbdesigner$.proxy(this.seriesRender,this),loaded:this.bbdesigner$.proxy(this.renderComplete,this)}},t.prototype.renderComplete=function(){this.IsRendered=!0},t.prototype.seriesRender=function(n){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.seriesRendering(n,this,!1)},t.prototype.updateCustomLegendsForConditionalRange=function(n){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateCustomLegendsForConditionalRange(n,this)},t.prototype.comboChartPreRender=function(n){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.chartPreRendering(n,this)},t.prototype.updateForcastLabelFormat=function(n){!BoldBIDashboard.isNullOrUndefined(this.getChartProperties())&&this.getChartProperties().ForecastProperties.ConfidenceBandStyle==="Fill"&&this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable&&n.data.seriesIndex===3&&(n.data.text=this.getFormattedText(n.data.text),this.getChartProperties().ShowValueLabelSuffix&&(n.data.text=n.data.text+" "+this.getChartProperties().ValueLabelSuffix))},t.prototype.getFormattedText=function(n){if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)&&this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0){var t=this.DataGroupInfo.FieldContainers[0].FieldInfos[0].MeasureFormatting;return BoldBIDashboard.DashboardUtil.formattedText(n,t.Culture,t.DecimalPoints,t.FormatType,t.DecimalSeparator,t.GroupSeparator,t.Prefix,t.Suffix,t.Unit,!0,this.designerInstance,t.EnableLakhsAndCroreRep)}},t.prototype.updateComboChartData=function(n){var t,u,f,r,i,e;if(this.dataValues=n,this.maxRecordCount=n.totalRecordsCount,BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this),this.comboChartElement.show(),BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this),this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo),BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error)BoldBIDashboard.isNullOrUndefined(n.Message)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.widgetContainerHelper.showControlError(this,n));else{if(n.noDataAvailable){this.updateNoDataAvailable();return}if(t=this.getBindedColumns(),this.updateValueLabelInfos(this),u=t.primaryYValue.length!==0||t.secondaryYValue.length!==0,this.getChartProperties().IsEnableDrillDown=t.columnValue.length>1,f=t.columnValue.length>0&&(t.primaryYValue.length>0||t.secondaryYValue.length>0),this.updatePropertyItems(f),BoldBIDashboard.isNullOrUndefined(this.comboChartObj)||this.configureVirtualScrollSettings(t,n),r=!1,n.widgetData.Data.length>0)if(this.columnBindings=this.DataColumnBindings,BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),i=this.generateChartSeries(n),r=this.isTrendlineSupportChartType(i)&&!this.getChartProperties().IsEnableDrillDown,BoldBIDashboard.isNullOrUndefined(this.comboChartObj)){if(BoldBIDashboard.isNullOrUndefined(i)||BoldBIDashboard.isNullOrUndefined(i[0].points)||i[0].points.length===0)return this.updateNoDataAvailable();this.renderComboChartWidget(i,t,r)}else{if(this.updateAxisVisibility(),BoldBIDashboard.isNullOrUndefined(i)||BoldBIDashboard.isNullOrUndefined(i[0].points)||i[0].points.length===0)return this.updateNoDataAvailable();this.updateAxisLabelFormat();r&&this.updateTrendline(i,this.comboChartObj.model);this.comboChartObj.model.series=i;e=this.updateHighlightOrSelectionSettings();this.updateComboChartSelection(e,this.comboChartObj.model);this.comboChartObj.model.selectedDataPointIndexes=this.getInitialSelection(this.comboChartObj.model.series);this.updateCustomLegendSettingsValue();this.updateDataGroupPropertyVisibility(t,r);this.updateItemVisibilityForAxis();this.updateAxisTitle();this.setRangePaddingValue();this.isAdvanceColorSupported()&&this.getChartProperties().EnableColorSettings?BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateChartPropertiesBasedOnColorType(n,this.comboChartObj,this.getChartProperties()):this.resetChartColorUpdateProperties();this.updateColorCustomizationSettings(this);this.comboChartObj.model.axes[0].orientation=this.getChartProperties().ChartSeriesTypeInfo.length>0&&this.isBarChartType(this.getChartProperties().ChartSeriesTypeInfo[0].ChartType)?"horizontal":"vertical";this.comboChartObj.redraw()}else(n.widgetData.Data.length===0||BoldBIDashboard.DashboardUtil.IsColumnBindingsEmpty(this.DataColumnBindings))&&(this.updateAxisTitle(),this.updateItemVisibilityForAxis(!0));this.setPropertyElement("Formatting","ColorSettings",u);this.updateValueLabelSuffix(this.getChartProperties().ValueLabelSuffix);BoldBIDashboard.DashboardDesignerUtility.ChartHelper.enableOrDisableForecastOption(this);this.updateAxisGridLines(n.widgetData.Data.length===0||BoldBIDashboard.DashboardUtil.IsColumnBindingsEmpty(this.DataColumnBindings));this.isOpenReport=!1;this.isSwitchingDesignMode=!1;this.updateComboChartElementsVisibility();this.updateLegendVisibilityObject(this.comboChartObj);this.refresh();this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateTrendLineBasedOnFieldInfo(this),this.chartHelper.updateSinglePointForeCast(n,this),BoldBIDashboard.isNullOrUndefined(this.designerInstance.element.find("#"+this.designerId+"_ComboChart_trendline_grid_col").data("BoldBIDashboardGrid"))||this.designerInstance.element.find("#"+this.designerId+"_ComboChart_trendline_grid_col").data("BoldBIDashboardGrid").setModel({dataSource:this.getChartProperties().TrendLineSettings}));this.updateDataGroupPropertyVisibility(t,r);this.hideScrollBar()}this.isThemeSwitch||(this.comboChartElement.css("background","transparent"),this.applyComboChartItemTheme(),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getChartProperties().ContainerSettings.TextColor),this.controlContainer.find(".bbi-dbrd-control-sub-title").css("color",this.themeHelper.getWidgetTileTextColor()),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this))},t.prototype.updateTrendline=function(n,t){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateTrendLineToAllSeries(this,n);n.length<t.series.length&&this.getChartProperties().TrendLineSettings.length!==0&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateTrendLineSettings(this.getChartProperties().TrendLineSettings,n,t.series)},t.prototype.pointRegionClick=function(n){this.chartHelper.selectActionsInChart(n,this,this.Name,this.designerInstance)},t.prototype.updateComboChartSelection=function(n,t){t.commonSeriesOptions.highlightSettings.mode=n;t.commonSeriesOptions.selectionSettings.mode=n;t.commonSeriesOptions.highlightSettings.enable=this.isHighlightEffectRequired();t.commonSeriesOptions.selectionSettings.enable=this.isSelectionEffectRequired();t.commonSeriesOptions.selectionSettings.type=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isMultiSelectionEnabled(this)?"multiple":"single";this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","EnableMultiSelection",this.getChartProperties().FilterSettings.ActAsMasterWidget&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length===1)},t.prototype.updateAdvancedComboColor=function(){for(var n,t,r,i,u=BoldBIDashboard.isNullOrUndefined(this.getChartProperties())?[]:this.getChartProperties().DefaultColors,e=this.contentContainer.find(".e-datavisualization-chart"),f=0;f<e.length;f++)if(n=this.bbdesigner$(e[f]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(n)){for(t=0;t<n.model.series.length;t++)for(r=0;r<n.model.series[t].points.length;r++)for(i=0;i<u.length;i++)u[i].Name===n.model.series[t].id&&(n.model.series[t].points[r].fill=null,n.model.series[t].fill=u[i].Color);this.updateLegendVisibilityObject(n);n.model.rangeColorMapping=[];n.model.legend.mode="series";n.model.legend.shape=this.getChartProperties().LegendShape.replace(/\s/g,"");n.model.legend.title.text=this.getChartProperties().LegendTitle;n.redraw()}},t.prototype.updatePropertyItems=function(n){n?this.propertyPanel.updateItemDisable("bool","ComboChart","Filter","ActAsMasterWidget",!1):this.propertyPanel.updateItemDisable("bool","ComboChart","Filter","ActAsMasterWidget",!0)},t.prototype.resetChartColorUpdateProperties=function(){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.resetChartColorUpdateProperties(this.comboChartObj,this.getChartProperties())},t.prototype.updateAxisGridLines=function(n){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateVisibilityForGridLines(this,n);this.setPropertyElement("GridLines","PrimaryValueGridLines",this.getChartProperties().PrimaryValueGridLines);this.setPropertyElement("GridLines","SecondaryValueGridLines",this.getChartProperties().SecondaryValueGridLines)},t.prototype.updateAxisVisibility=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.CellInfo),t=this.getUpdatedSeriesAxisCount();this.comboChartObj.model.primaryYAxis.visible=n.ShowYAxisLabels?this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&t.primaryValueLength>0:!1;this.comboChartObj.model.axes[0].visible=n.ShowYAxisLabels?this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&t.secondaryValueLength>0:!1},t.prototype.generateChartSeries=function(n){for(var t,r,o,f,i=[],e=this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable,s=e?1:n.widgetData.Data.length,h=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isCombinationChart(this),c=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode(),u=0;u<s;u++)t=JSON.parse(n.widgetData.Data[u]),r=this.getDefaultColorSettings(t.id),t=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.setChartTypeAndAxis(t,this.getChartProperties(),this.getFontSizeBasedOnResolution(),this.themeHelper,h,c),t.marker.dataLabel.font.color=this.getChartProperties().ValueLabel.IsEdited?this.getChartProperties().ValueLabel.Color:this.themeHelper.getComboChartDataLabelFontColor(),BoldBIDashboard.isNullOrUndefined(r)||(r.IsEdited?t.fill=r.Color:(o=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getColumnId(t.id,this.DataGroupInfo.FieldContainers),f=BoldBIDashboard.Dashboard.WidgetHelper.getColorCode(this,o,r),r.Color=f,t.fill=f)),t=this.ignoreEmptyPoints(n,u,t,this.getChartProperties().ShowNoDataItem),t.columnSpacing=this.getChartProperties().ColumnSpacing,t.columnWidth=this.getChartProperties().ColumnWidth,i.push(t);return i=this.getSortedSeriesList(i),i=this.getTotalPointsValueAsPercentType(i),this.updateAdvanceColorPoints(i,this.getChartProperties().ColorCustomization),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.checkBarWithLineChart(this.getChartProperties().ChartSeriesTypeInfo,i,this),e&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateChartTypeAndAxisToForecastSeries(this,n,i),BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateValueLabel(this.getChartProperties().CustomValueLabels,i,this),i},t.prototype.updateAdvanceColorPoints=function(n,t){var s=this.drillLevelInfo.length>0?this.drillLevelInfo.length:0,u,f,i,r,o,e;if(this.getChartProperties().EnableColorSettings&&!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.isNullOrUndefined(t.SolidColorInfo)&&t.SolidColorInfo.length!==0&&this.isAdvanceColorSupported()&&t.Type===ColorCustomizationType.Individual)for(u=[],f=this.DataGroupInfo.FieldContainers[2].FieldInfos[s].UniqueColumnName,i=0;i<n.length;i++)if(n[i].type.toLowerCase()===ChartTypes.Bar.toString().toLowerCase()||n[i].type.toLowerCase()===ChartTypes.Column.toString().toLowerCase())for(u=t.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===f}).length>0?t.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===f})[0].DefaultColorSets:u,r=0;r<n[i].points.length;r++)o=n[i].points[r].x,n[i].points[r].fill=this.getColorForIndividualSection(o,u,f);else for(e=0;e<n[i].points.length;e++)n[i].points[e].fill=""},t.prototype.getColorForIndividualSection=function(n,t,i){for(var f=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getColumnId(i,this.DataGroupInfo.FieldContainers),u=this.designerInstance.modules.resource.getColumnValueColorCode(f,n),r=0;r<t.length;r++){if(t[r].Name.toString()===n.toString()&&t[r].IsEdited)return t[r].Color;t[r].IsEdited||(t[r].Color=u)}return u},t.prototype.updateAxisTitle=function(){var r,n,t,i;if(this.getChartProperties().ChartSeriesTypeInfo.length>0){if(!this.isOpenReport){for(r="",this.DataGroupInfo.FieldContainers[2].FieldInfos.length>0&&(r=this.getChartProperties().Axis.CategoryAxis.Title!==""&&this.getChartProperties().Axis.CategoryAxis.IsCustomTitle?this.getChartProperties().Axis.CategoryAxis.Title:this.DataGroupInfo.FieldContainers[2].FieldInfos[0].DisplayName),this.comboChartObj.model.primaryXAxis.title.text=this.getChartProperties().Axis.CategoryAxis.Title=r,n=[],t=[],i=0;i<this.getChartProperties().ChartSeriesTypeInfo.length;i++)this.getChartProperties().ChartSeriesTypeInfo[i].IsSecondaryAxis?t.push(this.getChartProperties().ChartSeriesTypeInfo[i]):n.push(this.getChartProperties().ChartSeriesTypeInfo[i]);n.length===0?this.getChartProperties().Axis.PrimaryValueAxis.IsCustomTitle=!1:this.getChartProperties().Axis.PrimaryValueAxis.Title=this.comboChartObj.model.primaryYAxis.title.text=this.getChartProperties().Axis.PrimaryValueAxis.IsCustomTitle&&this.getChartProperties().Axis.PrimaryValueAxis.Title!==this.columnBindings[n[0].UniqueColumnName]?this.getChartProperties().Axis.PrimaryValueAxis.Title:n.length>1?"Values":n.length===1&&this.getChartProperties().Axis.PrimaryValueAxis.Title!==this.columnBindings[n[0].UniqueColumnName]?this.columnBindings[n[0].UniqueColumnName]:this.getChartProperties().Axis.PrimaryValueAxis.Title;t.length===0?this.getChartProperties().Axis.SecondaryValueAxis.IsCustomTitle=!1:this.getChartProperties().Axis.SecondaryValueAxis.Title=this.comboChartObj.model.axes[0].title.text=this.getChartProperties().Axis.SecondaryValueAxis.IsCustomTitle&&this.getChartProperties().Axis.SecondaryValueAxis.Title!==this.columnBindings[t[0].UniqueColumnName]?this.getChartProperties().Axis.SecondaryValueAxis.Title:t.length>1?"Values":t.length===1&&this.getChartProperties().Axis.SecondaryValueAxis.Title!==this.columnBindings[t[0].UniqueColumnName]?this.columnBindings[t[0].UniqueColumnName]:this.getChartProperties().Axis.SecondaryValueAxis.Title}}else this.comboChartObj.model.primaryXAxis.title.text=this.getChartProperties().Axis.CategoryAxis.Title="",this.comboChartObj.model.primaryYAxis.title.text=this.getChartProperties().Axis.PrimaryValueAxis.Title="",this.comboChartObj.model.axes[0].title.text=this.getChartProperties().Axis.SecondaryValueAxis.Title="";this.setPropertyElement("Axis","CategoryAxisTitleValue",this.getChartProperties().Axis.CategoryAxis.IsCustomTitle?this.getChartProperties().Axis.CategoryAxis.Title:"");this.setPropertyElement("Axis","PrimaryAxisTitleValue",this.getChartProperties().Axis.PrimaryValueAxis.IsCustomTitle?this.getChartProperties().Axis.PrimaryValueAxis.Title:"");this.setPropertyElement("Axis","SecondaryAxisTitleValue",this.getChartProperties().Axis.SecondaryValueAxis.IsCustomTitle?this.getChartProperties().Axis.SecondaryValueAxis.Title:"")},t.prototype.updateChartDataInfo=function(){var n=this.getBindedColumns(),t,i;n.primaryYValue.length===0&&n.secondaryYValue.length===0?this.getChartProperties().ChartSeriesTypeInfo=[]:(n.primaryYValue.length>0&&this.setChartSereisTypeInfo(n.primaryYValue,!1),n.secondaryYValue.length>0&&this.setChartSereisTypeInfo(n.secondaryYValue,!0));t=n.primaryYValue.length+n.secondaryYValue.length;t!==this.getChartProperties().ChartSeriesTypeInfo.length&&(i=this.updateChartSeriesTypeInfo(n),this.getChartProperties().ChartSeriesTypeInfo.splice(i,1))},t.prototype.setChartSereisTypeInfo=function(n,t){var i,u,r;if(!BoldBIDashboard.isNullOrUndefined(n))for(i=0;i<n.length;i++){for(u=!1,r=0;r<this.getChartProperties().ChartSeriesTypeInfo.length;r++)if(this.getChartProperties().ChartSeriesTypeInfo[r].UniqueColumnName===n[i].UniqueColumnName){u=!0;break}u||this.getChartProperties().ChartSeriesTypeInfo.push({ChartType:this.getComboChartSeriesType(t),UniqueColumnName:n[i].UniqueColumnName,IsSecondaryAxis:t,FieldName:n[i].Name})}},t.prototype.getComboChartSeriesType=function(n){var t=n?"Line":"Column",i;if(this.getChartProperties().ChartSeriesTypeInfo.length>0){for(i=0;i<this.getChartProperties().ChartSeriesTypeInfo.length;i++)n===this.getChartProperties().ChartSeriesTypeInfo[i].IsSecondaryAxis&&(t=this.isPercentChartType(this.getChartProperties().ChartSeriesTypeInfo[i].ChartType)?this.getChartProperties().ChartSeriesTypeInfo[i].ChartType:this.isBarChartType(this.getChartProperties().ChartSeriesTypeInfo[i].ChartType)?"Bar":t);(t==="Line"||t==="Column")&&(t=this.isBarChartType(this.getChartProperties().ChartSeriesTypeInfo[0].ChartType)?"Bar":t)}return t},t.prototype.updateChartSeriesTypeInfo=function(n){for(var u,f,e=this.getChartProperties().ChartSeriesTypeInfo.length,i=[],r=0,t=0;t<e;t++){for(u=0;u<n.primaryYValue.length;u++)if(this.getChartProperties().ChartSeriesTypeInfo[t].UniqueColumnName===n.primaryYValue[u].UniqueColumnName){i[t]=!0;break}else i[t]=!1;if(!i[t])for(f=0;f<n.secondaryYValue.length;f++)if(this.getChartProperties().ChartSeriesTypeInfo[t].UniqueColumnName===n.secondaryYValue[f].UniqueColumnName){i[t]=!0;break}else i[t]=!1}for(r=0;r<i.length;r++)if(!i[r])break;return r},t.prototype.getSortedSeriesList=function(n){for(var t,r=[],i=0;i<n.length;i++)this.isDistributionType(n[i].type)||r.push(n[i]);for(t=0;t<n.length;t++)this.isDistributionType(n[t].type)&&r.push(n[t]);return r},t.prototype.updateDefaultJsonProperties=function(){this.getChartProperties().CustomLegendInfo.SingleValues=[];this.getChartProperties().CustomLegendInfo.GroupValues.Series=[];this.getChartProperties().CustomLegendInfo.GroupValues.Values=[];this.getChartProperties().ColorPalette=this.defaultColorPalette;this.getChartProperties().ColorPaletteModel=[];this.getChartProperties().IsDefaultColorPalette=!0;this.getChartProperties().IsCustomLegend=!1;this.getChartProperties().TrendLineSettings=[];this.getChartProperties().ColorSets=new ColorSets;this.getChartProperties().ChartSeriesTypeInfo=[];this.getChartProperties().ColorCustomization=null;this.getChartProperties().EnableColorSettings=!1},t.prototype.getComboChartPropertyPanel=function(){var r=this.getUpdatedSeriesAxisCount(),t=r.primaryValueLength>0||this.getChartProperties().ChartSeriesTypeInfo.length===0,i=r.secondaryValueLength>0||this.getChartProperties().ChartSeriesTypeInfo.length===0,f=BoldBIDashboard.DashboardUtil.getConfiguredColumns(this.DataGroupInfo),e=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isForecastApplicable(this),u={Header:this.widgetJson.ContainerSettings.Title,SubTitle:this.widgetJson.ContainerSettings.SubTitle,Description:this.widgetJson.ContainerSettings.Description,Type:"ComboChart",Items:[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"ShowTooltip",displayName:this.locale.propertyPanel.basicSettings.showTooltip,value:this.getChartProperties().ShowTooltip,itemType:"bool"},{name:"ChartTypeAndAxis",displayName:this.locale.propertyPanel.basicSettings.chartTypeandAxis,isVisible:this.drillLevelInfo.length===0&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ChartSeriesTypeInfo)&&this.getChartProperties().ChartSeriesTypeInfo.length>0,itemType:"button",buttonText:"Change",callbackInstance:this,callbackMethod:"renderChartSeriesTypeDialog"},{name:"EnableAnimation",displayName:this.locale.propertyPanel.basicSettings.enableAnimation,isVisible:!0,value:this.getChartProperties().EnableAnimation,itemType:"bool"},{name:"EnableMultiSelection",displayName:this.locale.propertyPanel.basicSettings.enableMultiSelect,value:this.getChartProperties().EnableMultiSelection,itemType:"bool",isVisible:this.widgetJson.FilterSettings.ActAsMasterWidget&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length===1},{name:"ShowLegend",displayName:this.locale.propertyPanel.basicSettings.showLegend,value:BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ShowLegend)?!1:this.getChartProperties().ShowLegend,itemType:"bool"},{name:"LegendLabelForground",displayName:this.locale.propertyPanel.basicSettings.chartLabelColor,isVisible:BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ShowLegend)?!1:this.getChartProperties().ShowLegend,value:this.getChartProperties().LegendLabel.Color,itemType:"color"},{name:"CustomLegend",displayName:this.locale.propertyPanel.basicSettings.legend,isVisible:!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ShowLegend)&&this.getChartProperties().ShowLegend&&this.getChartProperties().CustomLegendBtnVisibilty?this.getChartProperties().CustomLegendBtnVisibilty:!1,itemType:"button",buttonText:this.locale.propertyPanel.customizeBtnText,callbackInstance:this,callbackMethod:"onCustomLegendClick"},{name:"LegendPosition",displayName:this.locale.propertyPanel.basicSettings.legendPosition,isVisible:!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ShowLegend)&&this.getChartProperties().ShowLegend,itemType:"dropdown",value:this.getChartProperties().LegendPosition,valueList:["Auto","Top","Left","Right","Bottom"]},{name:"LegendShape",displayName:this.locale.propertyPanel.basicSettings.legendShapeText,isVisible:!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ShowLegend)&&this.getChartProperties().ShowLegend,itemType:"dropdown",value:this.getChartProperties().LegendShape==="SeriesType"?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendShape,this.getChartProperties().LegendShape):this.getChartProperties().LegendShape,valueList:["Circle","Series Type"]},{name:"LegendTitle",displayName:this.locale.propertyPanel.fontSettings.legendTitle,isVisible:!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ShowLegend)&&this.getChartProperties().ShowLegend,value:this.getChartProperties().LegendTitle,placeHolder:this.locale.common.auto,itemType:"string"},{name:"ShowValueLabels",displayName:this.locale.propertyPanel.basicSettings.showValueLabels,value:this.getChartProperties().ShowValueLabels,itemType:"object",callbackInstance:this,callbackMethod:"renderValueLabelsSetting"},{name:"ValueLabelForground",displayName:this.locale.propertyPanel.basicSettings.chartLabelColor,isVisible:this.getChartProperties().ShowValueLabels,value:this.getChartProperties().ValueLabel.Color,itemType:"color"},{name:"ValueLabelPosition",displayName:this.locale.propertyPanel.basicSettings.valueLabelPosition,isVisible:BoldBIDashboard.DashboardDesignerUtility.ChartHelper.ValueLabelPositionVisibility(this.widgetJson),itemType:"dropdown",value:this.getChartProperties().ValueLabelPosition,valueList:[this.locale.propertyPanel.valueLabelPlacement.auto,this.locale.propertyPanel.valueLabelPlacement.top,this.locale.propertyPanel.valueLabelPlacement.middle,this.locale.propertyPanel.valueLabelPlacement.bottom]},{name:"ValueLabelRotation",displayName:this.locale.propertyPanel.basicSettings.valueLabelRotation,isVisible:this.getChartProperties().ShowValueLabels,itemType:"dropdown",value:this.getChartProperties().ValueLabelRotation==="None"?"0"+String.fromCharCode(176):this.getChartProperties().ValueLabelRotation+String.fromCharCode(176),valueList:["-90"+String.fromCharCode(176),"-45"+String.fromCharCode(176),"0"+String.fromCharCode(176),"+45"+String.fromCharCode(176),"+90"+String.fromCharCode(176)]},{name:"ShowValueLabelSuffix",displayName:this.locale.propertyPanel.basicSettings.valueLabelSuffix,isVisible:this.getChartProperties().ShowValueLabels,value:this.getChartProperties().ShowValueLabelSuffix,itemType:"bool"},{name:"ValueLabelSuffix",displayName:this.locale.propertyPanel.basicSettings.suffixValue,value:this.getChartProperties().ValueLabelSuffix,itemType:"string",isVisible:this.getChartProperties().ShowValueLabels&&this.getChartProperties().ShowValueLabelSuffix,bindParameterMethod:"wireEventsForPropertyItem",callbackInstance:this},{name:"ShowMarker",displayName:this.locale.propertyPanel.basicSettings.showMarker,value:this.getChartProperties().ShowMarker,isVisible:!BoldBIDashboard.isNullOrUndefined(this.comboChartObj)&&this.isMarkerVisible(this.comboChartObj.model.series)&&this.DataGroupInfo.FieldContainers.length>0&&(this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0||this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0),itemType:"bool"},{name:"ShowNoDataItem",displayName:this.locale.propertyPanel.basicSettings.showItemsWithNoData,value:this.getChartProperties().ShowNoDataItem,itemType:"bool"},{name:"ColumnWidth",isVisible:BoldBIDashboard.DashboardDesignerUtility.ChartHelper.columnSpacingAndWidthVisibilty(this.getChartProperties().ChartSeriesTypeInfo),displayName:this.locale.propertyPanel.basicSettings.chartSeriesColumnWidth,value:this.getChartProperties().ColumnWidth,itemType:"float",decimalPlaces:1,minimum:.1,maximum:1,interval:.1,unitType:"pt"},{name:"ColumnSpacing",isVisible:BoldBIDashboard.DashboardDesignerUtility.ChartHelper.columnSpacingAndWidthVisibilty(this.getChartProperties().ChartSeriesTypeInfo),displayName:this.locale.propertyPanel.basicSettings.chartSeriesColumnSpacing,value:this.getChartProperties().ColumnSpacing,itemType:"float",decimalPlaces:1,minimum:.1,maximum:1,interval:.1,unitType:"pt"},{name:"EnableSmoothScroll",displayName:this.locale.propertyPanel.basicSettings.enableSmoothScroll,value:this.getChartProperties().EnableSmoothScroll,isVisible:!0,itemType:"bool"},{name:"LineStyle",displayName:this.locale.propertyPanel.chartLineStyleSettings.lineStyleText,isVisible:!BoldBIDashboard.isNullOrUndefined(this.comboChartObj)&&this.isLineStyleVisible(this.comboChartObj.model.series),itemType:"button",buttonText:this.locale.propertyPanel.chartLineStyleSettings.lineStyleCustomizeBtnText,callbackInstance:this,callbackMethod:"renderLineStyleCustomization"}]},{CategoryName:"Forecast Settings",DisplayName:this.locale.propertyPanel.forecastSettingsText,IsVisible:e,Items:[{name:"IsEnableForecast",displayName:this.locale.propertyPanel.forecastSettings.enable,value:this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable,itemType:"bool"},{name:"Length",displayName:this.locale.propertyPanel.forecastSettings.forecastPointLengthText,isVisible:this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable,value:this.getChartProperties().ForecastProperties.ForecastSettings.Length,itemType:"object",callbackInstance:this,callbackMethod:"renderingForecastSettingsProperties"},{name:"ConfidenceInterval",displayName:this.locale.propertyPanel.forecastSettings.confidenceInterval,isVisible:this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable,itemType:"dropdown",value:this.getChartProperties().ForecastProperties.ForecastSettings.ConfidenceInterval+String.fromCharCode(37),valueList:["75"+String.fromCharCode(37),"80"+String.fromCharCode(37),"85"+String.fromCharCode(37),"90"+String.fromCharCode(37),"95"+String.fromCharCode(37),"99"+String.fromCharCode(37)]},{name:"Seasonality",displayName:this.locale.propertyPanel.forecastSettings.seasonalityText,isVisible:this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable,value:this.getChartProperties().ForecastProperties.ForecastSettings.Length,itemType:"object",callbackInstance:this,callbackMethod:"renderingForecastSettingsProperties"},{name:"SubmitForecast",displayName:"",isVisible:this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable,itemType:"button",buttonText:this.locale.propertyPanel.forecastSettings.forecastSubmitBtnText,callbackInstance:this,callbackMethod:"submitForecastSettings"},{name:"ShowForecast",displayName:this.locale.propertyPanel.forecastSettings.showForecastText,isVisible:this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable,itemType:"object",callbackInstance:this,callbackMethod:"renderingForecastSeriesElement"},{name:"ShowConfidence",displayName:this.locale.propertyPanel.forecastSettings.showConfidenceText,isVisible:this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable,itemType:"object",callbackInstance:this,callbackMethod:"renderingForecastSeriesElement"},{name:"ConfidenceBandStyle",displayName:this.locale.propertyPanel.forecastSettings.confidenceBandStyle,isVisible:this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable&&this.getChartProperties().ForecastProperties.ShowConfidence,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ConfidenceBandStyle,this.getChartProperties().ForecastProperties.ConfidenceBandStyle),itemType:"dropdown",valueList:[ConfidenceBandStyle.Fill,ConfidenceBandStyle.Line,ConfidenceBandStyle.Dot]},{name:"DisableForecastProperty",isVisible:!1,itemType:"object",callbackInstance:this,callbackMethod:"disableForecastProperty"},]},{CategoryName:"Link",DisplayName:this.locale.propertyPanel.linkText,Items:[{name:"Link",value:n.prototype.useExistingLink.call(this),category:"Item",itemType:"link",enableMode:LinkEnableMode.Row}]},{CategoryName:"Axis",DisplayName:this.locale.propertyPanel.axisText,IsVisible:!0,Items:[{name:"AxisTitleForeground",displayName:this.locale.propertyPanel.axisSettings.titleColor,isVisible:!0,value:this.getChartProperties().AxisTitle.Color,itemType:"color"},{name:"AxisLabelForeground",displayName:this.locale.propertyPanel.axisSettings.labelColor,isVisible:!0,value:this.getChartProperties().AxisLabel.Color,itemType:"color"},{name:"CategoryAxis",displayName:this.locale.propertyPanel.axisSettings.showCategoryAxis,value:this.getChartProperties().Axis.CategoryAxis.IsEnabled,itemType:"bool"},{name:"CategoryAxisTitle",displayName:this.locale.propertyPanel.axisSettings.showAxisTitle,isVisible:this.getChartProperties().Axis.CategoryAxis.IsEnabled,value:this.getChartProperties().Axis.CategoryAxis.ShowTitle,itemType:"bool"},{name:"CategoryAxisTitleValue",displayName:this.locale.propertyPanel.axisSettings.axisTitle,isVisible:this.getChartProperties().Axis.CategoryAxis.ShowTitle&&this.getChartProperties().Axis.CategoryAxis.IsEnabled,value:this.getChartProperties().Axis.CategoryAxis.IsCustomTitle?this.getChartProperties().Axis.CategoryAxis.Title:"",itemType:"string",placeHolder:this.locale.common.auto},{name:"LableOverflowMode",displayName:this.locale.propertyPanel.axisSettings.labelOverflowMode,isVisible:this.getChartProperties().Axis.CategoryAxis.IsEnabled,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LabelOverFlowMode,this.getChartProperties().Axis.CategoryAxis.LabelOverflowMode),itemType:"dropdown",valueList:["Auto","Trim","Hide"]},{name:"CategoryAxisLabelTrim",displayName:this.locale.propertyPanel.axisSettings.enableTrim,isVisible:this.getChartProperties().Axis.CategoryAxis.IsEnabled,value:this.getChartProperties().Axis.CategoryAxis.EnableTrim,itemType:"bool"},{name:"LabelMaximumWidth",displayName:this.locale.propertyPanel.axisSettings.labelMaxWidth,isDisable:!this.getChartProperties().Axis.CategoryAxis.EnableTrim,isVisible:this.getChartProperties().Axis.CategoryAxis.IsEnabled,value:this.getChartProperties().Axis.CategoryAxis.MaxLabelWidth,itemType:"float",decimalPlaces:0,interval:1,minimum:10,maximum:500,unitType:"px"},{name:"CategoryAxisLabelRotation",displayName:this.locale.propertyPanel.axisSettings.labelRotation,isVisible:this.getChartProperties().Axis.CategoryAxis.IsEnabled?this.getChartProperties().Axis.CategoryAxis.IsEnabled:!1,itemType:"dropdown",value:this.getChartProperties().Axis.CategoryAxis.LabelRotation==="Auto"?this.getChartProperties().Axis.CategoryAxis.LabelRotation:this.getChartProperties().Axis.CategoryAxis.LabelRotation==="None"?"0"+String.fromCharCode(176):this.getChartProperties().Axis.CategoryAxis.LabelRotation+String.fromCharCode(176),valueList:["Auto","-90"+String.fromCharCode(176),"-45"+String.fromCharCode(176),"0"+String.fromCharCode(176),"+45"+String.fromCharCode(176),"+90"+String.fromCharCode(176)]},{name:"IsAutoInterval",displayName:this.locale.propertyPanel.axisSettings.autoInterval,isVisible:this.getChartProperties().Axis.CategoryAxis.IsEnabled,value:this.getChartProperties().Axis.CategoryAxis.IsAutoInterval,itemType:"bool"},{name:"Interval",displayName:this.locale.propertyPanel.axisSettings.interval,isVisible:this.getChartProperties().Axis.CategoryAxis.IsEnabled&&!this.getChartProperties().Axis.CategoryAxis.IsAutoInterval,value:this.getChartProperties().Axis.CategoryAxis.Interval,itemType:"float",decimalPlaces:0,interval:1,minimum:1,maximum:10},{name:"PrimaryValueAxis",displayName:this.locale.propertyPanel.axisSettings.showPrimaryValueAxis,isVisible:t,value:this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,itemType:"object",callbackInstance:this,callbackMethod:"renderPrimaryAxisRange"},{name:"PrimaryAxisTitle",displayName:this.locale.propertyPanel.axisSettings.axisTitle,isVisible:t&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,value:this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle,itemType:"bool"},{name:"PrimaryAxisTitleValue",displayName:this.locale.propertyPanel.axisSettings.axisTitle,isVisible:t&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,value:this.getChartProperties().Axis.PrimaryValueAxis.IsCustomTitle?this.getChartProperties().Axis.PrimaryValueAxis.Title:"",itemType:"string",placeHolder:this.locale.common.auto},{name:"PrimaryAxisType",displayName:this.locale.propertyPanel.axisSettings.axisType,isVisible:t&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&!BoldBIDashboard.isNullOrUndefined(this.comboChartObj)&&this.axisTypevisible(this.comboChartObj.model.series,!1),value:this.getChartProperties().Axis.PrimaryValueAxis.AxisType,itemType:"dropdown",valueList:[AxisType.Linear,AxisType.Logarithmic]},{name:"PrimaryAxisFormat",displayName:this.locale.propertyPanel.axisSettings.primaryAxisFormatText,isVisible:t&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,value:this.getChartProperties().Axis.PrimaryValueAxis.Format,itemType:"button",buttonText:this.locale.propertyPanel.axisSettings.axisFormatButtonText,callbackInstance:this,callbackMethod:"onPrimaryAxisFormatClick"},{name:"SecondaryValueAxis",displayName:this.locale.propertyPanel.axisSettings.showSecondaryValueAxis,value:this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,isVisible:i,itemType:"object",callbackInstance:this,callbackMethod:"renderSecondaryAxisRange"},{name:"SecondaryAxisTitle",displayName:this.locale.propertyPanel.axisSettings.showAxisTitle,isVisible:i&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,value:this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle,itemType:"bool"},{name:"SecondaryAxisTitleValue",displayName:this.locale.propertyPanel.axisSettings.axisTitle,isVisible:i&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,value:this.getChartProperties().Axis.SecondaryValueAxis.IsCustomTitle?this.getChartProperties().Axis.SecondaryValueAxis.Title:"",itemType:"string",placeHolder:this.locale.common.auto},{name:"SecondaryAxisType",displayName:this.locale.propertyPanel.axisSettings.axisType,isVisible:i&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&!BoldBIDashboard.isNullOrUndefined(this.comboChartObj)&&this.axisTypevisible(this.comboChartObj.model.series,!0),value:this.getChartProperties().Axis.SecondaryValueAxis.AxisType,itemType:"dropdown",valueList:[AxisType.Linear,AxisType.Logarithmic]},{name:"SecondaryAxisFormat",displayName:this.locale.propertyPanel.axisSettings.secondaryAxisFormatText,isVisible:i&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,value:this.getChartProperties().Axis.SecondaryValueAxis.Format,itemType:"button",buttonText:this.locale.propertyPanel.axisSettings.axisFormatButtonText,callbackInstance:this,callbackMethod:"onSecondaryAxisFormatClick"},]},{CategoryName:"Grid Lines",DisplayName:this.locale.propertyPanel.gridLinesText,IsVisible:!0,Items:[{name:"PrimaryValueGridLines",displayName:this.locale.propertyPanel.gridLineSettings.primaryValueAxis,isDisable:r.primaryValueLength===0&&r.secondaryValueLength>0,value:this.getChartProperties().PrimaryValueGridLines,itemType:"bool"},{name:"SecondaryValueGridLines",displayName:this.locale.propertyPanel.gridLineSettings.secondaryValueAxis,isDisable:r.secondaryValueLength===0&&r.primaryValueLength>0,value:this.getChartProperties().SecondaryValueGridLines,itemType:"bool"},{name:"CategoryGridLines",displayName:this.locale.propertyPanel.gridLineSettingscategoryAxis,value:this.getChartProperties().CategoryGridLines,itemType:"bool"}]},{CategoryName:"Trendline",DisplayName:this.locale.chartTrendLineDialog.trendline,IsVisible:!BoldBIDashboard.isNullOrUndefined(this.comboChartObj)&&this.isTrendlineSupportChartType(this.comboChartObj.model.series)&&this.DataGroupInfo.FieldContainers.length>0&&(this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0||this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0)&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length===1,Items:[{name:"Trendline",displayName:this.locale.propertyPanel.trendLinesText,isVisible:!BoldBIDashboard.isNullOrUndefined(this.comboChartObj)&&this.isTrendlineSupportChartType(this.comboChartObj.model.series)&&this.DataGroupInfo.FieldContainers.length>0&&(this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0||this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0)&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length===1,itemType:"object",callbackInstance:this,callbackMethod:"renderTrendLines"}]},{CategoryName:"Formatting",DisplayName:this.locale.propertyPanel.formattingText,IsVisible:!BoldBIDashboard.isNullOrUndefined(f)&&f.length>0?!0:!1,Items:[{name:"ColorSettings",callbackInstance:this,callbackMethod:"renderDefaultColorSettings",itemType:"object",elementType:"ComboChart"},]},{CategoryName:"FontSettings",DisplayName:this.locale.propertyPanel.fontSettings.categoryDisplayName,Items:[{name:"Legend",displayName:this.locale.propertyPanel.fontSettings.legend,itemType:"fontSettings",isTitleVisible:this.getChartProperties().ShowLegend,autoFontSettingsInfo:{name:"IsAutoLegendFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:this.getChartProperties().ShowLegend,value:this.getChartProperties().IsAutoLegendFontSize,itemType:"bool"},fontSizeInfo:{name:"LegendFontSize",isVisible:this.getChartProperties().ShowLegend,isDisable:this.getChartProperties().IsAutoLegendFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getChartProperties().LegendFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}},{name:"LegendTitleFont",displayName:this.locale.propertyPanel.fontSettings.legendTitle,itemType:"fontSettings",isTitleVisible:this.getChartProperties().ShowLegend,autoFontSettingsInfo:{name:"IsAutoLegendTitleFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:this.getChartProperties().ShowLegend,value:this.getChartProperties().IsAutoLegendTitleFontSize,itemType:"bool"},fontSizeInfo:{name:"LegendTitleFontSize",isVisible:this.getChartProperties().ShowLegend,isDisable:this.getChartProperties().IsAutoLegendTitleFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getChartProperties().LegendTitleFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}},{name:"ValueLabel",displayName:this.locale.propertyPanel.fontSettings.valueLabel,itemType:"fontSettings",isTitleVisible:this.getChartProperties().ShowValueLabels,autoFontSettingsInfo:{name:"AutoValueLabelFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:this.getChartProperties().ShowValueLabels,value:this.getChartProperties().IsAutoValueLabelFontSize,itemType:"bool"},fontSizeInfo:{name:"ValueLabelFontSize",isVisible:this.getChartProperties().ShowValueLabels,isDisable:this.getChartProperties().IsAutoValueLabelFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getChartProperties().ValueLabelFontSize,itemType:"float",decimalPlaces:0,minimum:1,maximum:60,unitType:"px"}},{name:"CategoryAxisLabelFont",displayName:this.locale.propertyPanel.fontSettings.categoryAxisLabel,itemType:"fontSettings",isTitleVisible:this.getChartProperties().Axis.CategoryAxis.IsEnabled,autoFontSettingsInfo:{name:"IsAutoCategoryAxisLabelFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:this.getChartProperties().Axis.CategoryAxis.IsEnabled,value:this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisLabelFontSize,itemType:"bool"},fontSizeInfo:{name:"CategoryAxisLabelFontSize",isVisible:this.getChartProperties().Axis.CategoryAxis.IsEnabled,isDisable:this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisLabelFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getChartProperties().Axis.CategoryAxis.CategoryAxisLabelFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}},{name:"CategoryAxisTitleFont",displayName:this.locale.propertyPanel.fontSettings.categoryAxisTitle,itemType:"fontSettings",isTitleVisible:this.getChartProperties().Axis.CategoryAxis.IsEnabled&&this.getChartProperties().Axis.CategoryAxis.ShowTitle,autoFontSettingsInfo:{name:"IsAutoCategoryAxisTitleFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:this.getChartProperties().Axis.CategoryAxis.IsEnabled&&this.getChartProperties().Axis.CategoryAxis.ShowTitle,value:this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize,itemType:"bool"},fontSizeInfo:{name:"CategoryAxisTitleFontSize",isVisible:this.getChartProperties().Axis.CategoryAxis.IsEnabled&&this.getChartProperties().Axis.CategoryAxis.ShowTitle,isDisable:this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getChartProperties().Axis.CategoryAxis.CategoryAxisTitleFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}},{name:"PrimaryAxisLabelFont",displayName:this.locale.propertyPanel.fontSettings.primaryAxisLabel,itemType:"fontSettings",isTitleVisible:t&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,autoFontSettingsInfo:{name:"IsAutoPrimaryAxisLabelFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:t&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,value:this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize,itemType:"bool"},fontSizeInfo:{name:"PrimaryLabelFontSize",isVisible:t&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,isDisable:this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getChartProperties().Axis.PrimaryValueAxis.PrimaryLabelFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}},{name:"PrimaryAxisTitleFont",displayName:this.locale.propertyPanel.fontSettings.primaryAxisTitle,itemType:"fontSettings",isTitleVisible:t&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle,autoFontSettingsInfo:{name:"IsAutoPrimaryAxisTitleFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:t&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle,value:this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize,itemType:"bool"},fontSizeInfo:{name:"PrimaryTitleFontSize",isVisible:t&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle,isDisable:this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getChartProperties().Axis.PrimaryValueAxis.PrimaryTitleFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}},{name:"SecondaryAxisLabelFont",displayName:this.locale.propertyPanel.fontSettings.secondaryAxisLabel,itemType:"fontSettings",isTitleVisible:i&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,autoFontSettingsInfo:{name:"IsAutoSecondaryAxisLabelFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:i&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,value:this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize,itemType:"bool"},fontSizeInfo:{name:"SecondaryLabelFontSize",isVisible:i&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,isDisable:this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getChartProperties().Axis.SecondaryValueAxis.SecondaryLabelFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}},{name:"SecondaryAxisTitleFont",displayName:this.locale.propertyPanel.fontSettings.secondaryAxisTitle,itemType:"fontSettings",isTitleVisible:i&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,autoFontSettingsInfo:{name:"IsAutoSecondaryAxisTitleFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,isVisible:i&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,value:this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize,itemType:"bool"},fontSizeInfo:{name:"SecondaryTitleFontSize",isVisible:i&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,isDisable:this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getChartProperties().Axis.SecondaryValueAxis.SecondaryTitleFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}}]}]};return u.Items.push(this.containerPropertyItem.getFilterSettingsItems(this.widgetJson.FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo)),u.Items.push(this.containerPropertyItem.getContainerSettingItems(this.widgetJson.ContainerSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo)),u.Items.push(this.containerPropertyItem.getContainerActionsItems(this.widgetJson.ContainerSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo)),u.Items.push(BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem.getNoDataContainerActionsProperty(this.locale.propertyPanel.noDataContainerText)),u},t.prototype.updateComboChartPropertyChange=function(t,i,r){var u=!1;switch(t){case"Name":this.getChartProperties().ContainerSettings.Title=r;this.propertyPanel.setTitle(this.getChartProperties());break;case"SubTitle":this.propertyPanel.setSubTitle(this.getChartProperties(),r);break;case"Description":this.propertyPanel.setDescription(this.getChartProperties(),r);break;case"EnableAnimation":this.updateComboChartAnimation(r);break;case"ShowTooltip":this.updateShowTooltip(r);break;case"EnableMultiSelection":this.updateMultiSelection(r);break;case"ShowLegend":this.updateLegendVisibility(r);break;case"IsAutoLegendFontSize":case"IsAutoLegendTitleFontSize":this.updateAutoLegendFontSize(r,t);break;case"LegendFontSize":case"LegendTitleFontSize":this.updateLegendFontSize(r,t);break;case"LegendLabelForground":this.updateLegendForeground(r);break;case"LegendPosition":this.updateLegendPosition(r);break;case"LegendTitle":this.updateLegendTitle(r);break;case"ShowMarker":this.updateMarkerVisibility(r);break;case"ShowNoDataItem":this.getChartProperties().ShowNoDataItem=r;BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateShowNoDataItem(this);break;case"ShowValueLabels":this.updateValueLabelVisibility(r);break;case"AutoValueLabelFontSize":this.updateAutoValueLabelFontSize(r);break;case"ValueLabelFontSize":this.updateValueLabelFontSize(r);break;case"ValueLabelForground":this.updateValueLabelColor(r);break;case"ValueLabelPosition":this.updateValueLabelPosition(r);break;case"ValueLabelRotation":this.updateValueLabelRotation(r);break;case"ShowValueLabelSuffix":this.updateValueLabelSuffixVisibilty(r);break;case"ValueLabelSuffix":this.updateValueLabelSuffix(r);break;case"CategoryAxis":this.updateCategoryAxisVisibility(r);break;case"IsAutoCategoryAxisLabelFontSize":this.updateIsAutoCategoryAxisLabelFontSize(r);break;case"CategoryAxisLabelFontSize":this.updateCategoryAxisLabelFontSize(r);break;case"CategoryAxisTitle":this.updateCategoryAxisTitleVisibility(r);break;case"CategoryAxisTitleValue":this.updateCategoryAxisTitleValue(r);break;case"IsAutoCategoryAxisTitleFontSize":this.updateIsAutoCategoryAxisTitleFontSize(r);break;case"CategoryAxisTitleFontSize":this.updateCategoryAxisTitleFontSize(r);break;case"CategoryAxisLabelRotation":this.updateCategoryLabelRotation(r);break;case"IsAutoInterval":this.updateIsAutoInterval(r);break;case"Interval":this.updateInterval(r);break;case"PrimaryValueAxis":this.updatePrimaryAxisVisibility(r);break;case"PrimaryAxisTitle":this.updatePrimaryAxisTitleVisibility(r);break;case"PrimaryAxisTitleValue":this.updatePrimaryAxisTitleValue(r);break;case"IsAutoPrimaryAxisLabelFontSize":case"IsAutoSecondaryAxisLabelFontSize":this.updateIsAutoAxisLabelFontSize(r,t);break;case"PrimaryLabelFontSize":case"SecondaryLabelFontSize":this.updateAxisLabelFontSize(r,t);break;case"IsAutoPrimaryAxisTitleFontSize":case"IsAutoSecondaryAxisTitleFontSize":this.updateIsAutoAxisTitleFontSize(r,t);break;case"PrimaryTitleFontSize":case"SecondaryTitleFontSize":this.updateAxisTitleFontSize(r,t);break;case"LableOverflowMode":this.updateLabelOverFlowMode(r);break;case"LabelMaximumWidth":this.updateLabelMaxWidth(r);break;case"CategoryAxisLabelTrim":this.updateCategoryAxisLabelTrim(r);break;case"SecondaryValueAxis":this.updateSecondaryAxisVisibility(r);break;case"SecondaryAxisTitle":this.updateSecondaryAxisTitleVisibility(r);break;case"SecondaryAxisTitleValue":this.updateSecondaryAxisTitleValue(r);break;case"PrimaryValueGridLines":this.updatePrimaryValueGridLines(r);break;case"SecondaryValueGridLines":this.updateSecondaryValueGridLines(r);break;case"PrimaryAxisType":this.updatePrimaryAxisType(r);break;case"SecondaryAxisType":this.updateSecondaryAxisType(r);break;case"AxisTitleForeground":this.updateAxisTitleForegroound(r);break;case"AxisLabelForeground":this.updateAxisLabelForegroound(r);break;case"CategoryGridLines":this.updateCategoryGridLines(r);break;case"ItemLink":n.prototype.updateLink.call(this,r);break;case"UseDefaultPalette":this.updateDefaultPaletteVisibility(r);break;case"ActAsMasterWidget":this.widgetJson.FilterSettings.ActAsMasterWidget=r;r&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length===1?this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","EnableMultiSelection",!0):this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","EnableMultiSelection",!1);BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateActAsMasterWidget(this);break;case"IsEnableForecast":this.chartHelper.updateForecastProperties(t,r);this.chartHelper.updateForecastSettingsProperties(this,r);this.chartHelper.updateSinglePointForeCast(this.dataValues,this);break;case"ConfidenceInterval":case"ConfidenceBandStyle":this.chartHelper.updateForecastProperties(t,r);break;case"FieldNameChange":this.updateDisplayTextBasedProperties();break;case"LegendShape":BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateLegendShape(r,this);break;case"ColumnSpacing":BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateColumnSpacing(r,this);break;case"ColumnWidth":BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateColumnWidth(r,this);break;case"EnableSmoothScroll":this.updateEnableSmoothScroll(r);break;default:u=!0}},t.prototype.updateComboChartAnimation=function(n){var r,t,i;for(this.getChartProperties().EnableAnimation=n,r=this.contentContainer.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||(i.option("commonSeriesOptions.enableAnimation",this.getChartProperties().EnableAnimation),i.animate())},t.prototype.updateShowTooltip=function(n){var i,t,r;for(this.getChartProperties().ShowTooltip=n,i=this.contentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(r)||r.option("commonSeriesOptions.tooltip.visible",n)},t.prototype.updateMultiSelection=function(n){var i,t,r;for(this.getChartProperties().EnableMultiSelection=n,i=this.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(r)||r.option("commonSeriesOptions.selectionSettings.type",n?"multiple":"single")},t.prototype.updateLegendVisibility=function(n){var r,i,t;for(this.getChartProperties().ShowLegend=n,r=this.contentContainer.find(".e-datavisualization-chart"),i=0;i<r.length;i++)t=this.bbdesigner$(r[i]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(t)||(t.model.legend.visible=this.getChartProperties().ShowLegend,this.updateLegendVisibilityObject(t),t.redraw());this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","CustomLegend",this.getChartProperties().ShowLegend&&this.getChartProperties().CustomLegendBtnVisibilty);this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","LegendPosition",this.getChartProperties().ShowLegend);this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","LegendShape",this.getChartProperties().ShowLegend);this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","LegendTitle",this.getChartProperties().ShowLegend);this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","LegendLabelForground",this.getChartProperties().ShowLegend);this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoLegendFontSize",this.getChartProperties().ShowLegend);this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoLegendTitleFontSize",this.getChartProperties().ShowLegend);this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","LegendFontSize",this.getChartProperties().ShowLegend);this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","LegendTitleFontSize",this.getChartProperties().ShowLegend);this.updateTitleVisibility("ComboChart","FontSettings","Legend",this.getChartProperties().ShowLegend);this.updateTitleVisibility("ComboChart","FontSettings","LegendTitleFont",this.getChartProperties().ShowLegend);this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","LegendFontSize",this.getChartProperties().IsAutoLegendFontSize);this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","LegendTitleFontSize",this.getChartProperties().IsAutoLegendTitleFontSize)},t.prototype.updateAutoLegendFontSize=function(n,t){var i=t==="IsAutoLegendTitleFontSize",r,u;i?(this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","LegendTitleFontSize",n),this.getChartProperties().IsAutoLegendTitleFontSize=n):(this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","LegendFontSize",n),this.getChartProperties().IsAutoLegendFontSize=n);r=i?this.getChartProperties().LegendTitleFontSize:this.getChartProperties().LegendFontSize;u=t==="IsAutoLegendTitleFontSize"?"LegendTitleFontSize":"LegendFontSize";this.updateLegendFontSize(r,u)},t.prototype.updateLegendFontSize=function(n,t){var f=t==="LegendTitleFontSize",u,r,i;for(f?this.getChartProperties().LegendTitleFontSize=n:this.getChartProperties().LegendFontSize=n,u=this.ContentContainer.find(".e-datavisualization-chart"),r=0;r<u.length;r++)i=this.bbdesigner$(u[r]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||(f?i.model.legend.title.font.size=this.getChartProperties().IsAutoLegendTitleFontSize?this.getFontSizeBasedOnResolution():this.getChartProperties().LegendTitleFontSize+"px":i.model.legend.font.size=this.getChartProperties().IsAutoLegendFontSize?this.getFontSizeBasedOnResolution():this.getChartProperties().LegendFontSize+"px",i.redraw())},t.prototype.updateLegendForeground=function(n){var r,i,t;for(this.getChartProperties().LegendLabel.Color=n,this.getChartProperties().LegendLabel.IsEdited=!0,r=this.contentContainer.find(".e-datavisualization-chart"),i=0;i<r.length;i++)t=this.bbdesigner$(r[i]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(t)||(t.model.legend.font.color=n,t.model.legend.title.font.color=n,t.redraw())},t.prototype.updateLegendPosition=function(n){var r,t,i;for(this.getChartProperties().LegendPosition=n,r=this.contentContainer.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||(i.model.legend.position=this.getResponsiveLegendPosition(this.getChartProperties().LegendPosition),i.redraw())},t.prototype.updateValueLabelVisibility=function(n){var i,t,r,u;for(this.getChartProperties().ShowValueLabels=n,i=this.contentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(r)||(BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateValueLabelVisibility(n,this,this.getChartProperties().CustomValueLabels,this.comboChartObj.model.series),r.redraw());this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","ValueLabelRotation",n);this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","ShowValueLabelSuffix",n);this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","ValueLabelForground",n);this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","AutoValueLabelFontSize",n);this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","ValueLabelFontSize",n);this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","ValueLabelFontSize",this.getChartProperties().IsAutoValueLabelFontSize);this.updateTitleVisibility("ComboChart","FontSettings","ValueLabel",n);n?this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","ValueLabelSuffix",this.getChartProperties().ShowValueLabelSuffix):this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","ValueLabelSuffix",n);u=this.designerInstance.element.find("#"+this.designerId+"_ComboChart_BasicSettings_valueLabelbutton_container");this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","ValueLabelPosition",BoldBIDashboard.DashboardDesignerUtility.ChartHelper.ValueLabelPositionVisibility(this.getChartProperties()));n&&this.comboChartObj.model.series.length!==1?u.css("display","block"):u.css("display","none")},t.prototype.updateAutoValueLabelFontSize=function(n){this.getChartProperties().IsAutoValueLabelFontSize=n;this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","ValueLabelFontSize",n);this.updateValueLabelFontSize(this.getChartProperties().ValueLabelFontSize)},t.prototype.updateValueLabelFontSize=function(n){var f,t,i,r,u;for(this.getChartProperties().ValueLabelFontSize=n,f=this.ContentContainer.find(".e-datavisualization-chart"),t=this.comboChartObj.model.series,i=0;i<f.length;i++)if(r=this.bbdesigner$(f[i]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(r)){if(r.model.commonSeriesOptions.marker.dataLabel.font.size=this.getChartProperties().IsAutoValueLabelFontSize?this.getFontSizeBasedOnResolution():this.getChartProperties().ValueLabelFontSize+"px",!BoldBIDashboard.isNullOrUndefined(t))for(u=0;u<t.length;u++)t[u].marker.dataLabel.font.size=this.getChartProperties().IsAutoValueLabelFontSize?this.getFontSizeBasedOnResolution():this.getChartProperties().ValueLabelFontSize+"px";r.redraw()}},t.prototype.updateValueLabelColor=function(n){var r,t,i;for(this.getChartProperties().ValueLabel.Color=n,this.getChartProperties().ValueLabel.IsEdited=!0,r=this.contentContainer.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(i)||(i.option("commonSeriesOptions.marker.dataLabel.font.color",n),i.redraw())},t.prototype.updateValueLabelPosition=function(n){var u,r,t,i;for(this.getChartProperties().ValueLabelPosition=n,u=this.contentContainer.find(".e-datavisualization-chart"),r=0;r<u.length;r++)if(t=this.bbdesigner$(u[r]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(t)){for(i=0;i<t.model.series.length;i++)t.model.series[i].marker.dataLabel.textPosition=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getValueLabelPosition(t.model.series[i].type,n);t.redraw()}},t.prototype.updateValueLabelRotation=function(n){var u,i,t,r;for(this.getChartProperties().ValueLabelRotation=n.replace(new RegExp(String.fromCharCode(176),"g"),""),u=this.contentContainer.find(".e-datavisualization-chart"),i=0;i<u.length;i++)if(t=this.bbdesigner$(u[i]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(t)){for(t.model.commonSeriesOptions.marker.dataLabel.angle=this.getChartProperties().ValueLabelRotation,r=0;r<t.model.series.length;r++)t.model.series[r].marker.dataLabel.angle=this.getChartProperties().ValueLabelRotation;t.redraw()}},t.prototype.updateValueLabelSuffixVisibilty=function(n){this.getChartProperties().ShowValueLabels&&(this.getChartProperties().ShowValueLabelSuffix=n);this.updateValueLabelSuffix(this.getChartProperties().ValueLabelSuffix);this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","ValueLabelSuffix",n)},t.prototype.updateMarkerVisibility=function(n){for(var r=this.contentContainer.find(".e-datavisualization-chart"),t=this.bbdesigner$(r[0]).data("BoldBIDashboardChart"),i=0;i<t.model.series.length;i++)t.model.series[i].marker.visible=this.isDistributionType(t.model.series[i].type)?this.getChartProperties().ShowMarker=n:this.getChartProperties().ShowMarker=!1,t.redraw()},t.prototype.updateEnableSmoothScroll=function(n){this.getChartProperties().EnableSmoothScroll=n;this.dataConfigurationInstance.postDraggedFields()},t.prototype.updateValueLabelSuffix=function(n){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateValueLabelSuffix(n,this,this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(n),this.DataGroupInfo.DataSourceName))},t.prototype.updateCategoryAxisVisibility=function(n){for(var i,r=this.controlContainer.find(".e-datavisualization-chart"),u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.CellInfo,!1,BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isXaxisLabelVisible(this)),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),this.getChartProperties().Axis.CategoryAxis.IsEnabled=n,i.model.primaryXAxis.visible=u.ShowXAxisLabels?n:!1,i.redraw();this.propertyPanel.updateItemVisibility("ComboChart","Axis","CategoryAxisTitle",n);this.propertyPanel.updateItemVisibility("ComboChart","Axis","LableOverflowMode",n);this.propertyPanel.updateItemVisibility("ComboChart","Axis","CategoryAxisLabelTrim",n);this.propertyPanel.updateItemVisibility("ComboChart","Axis","LabelMaximumWidth",n);this.propertyPanel.updateItemVisibility("ComboChart","Axis","CategoryAxisLabelRotation",n);this.propertyPanel.updateItemVisibility("ComboChart","Axis","IsAutoInterval",n);this.propertyPanel.updateItemVisibility("ComboChart","Axis","Interval",n&&!this.getChartProperties().Axis.CategoryAxis.IsAutoInterval);this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoCategoryAxisLabelFontSize",n);this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","CategoryAxisLabelFontSize",n);this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","CategoryAxisLabelFontSize",this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisLabelFontSize);this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoCategoryAxisTitleFontSize",n&&this.getChartProperties().Axis.CategoryAxis.ShowTitle);this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","CategoryAxisTitleFontSize",n&&this.getChartProperties().Axis.CategoryAxis.ShowTitle);this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","CategoryAxisTitleFontSize",this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize);this.updateTitleVisibility("ComboChart","FontSettings","CategoryAxisLabelFont",n);this.updateTitleVisibility("ComboChart","FontSettings","CategoryAxisTitleFont",n&&this.getChartProperties().Axis.CategoryAxis.ShowTitle);this.updateCategoryAxisTitleVisibility(this.getChartProperties().Axis.CategoryAxis.ShowTitle)},t.prototype.updateIsAutoCategoryAxisLabelFontSize=function(n){this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisLabelFontSize=n;this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","CategoryAxisLabelFontSize",this.getChartProperties().Axis.CategoryAxis.IsEnabled);this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","CategoryAxisLabelFontSize",n);this.updateCategoryAxisLabelFontSize(this.getChartProperties().Axis.CategoryAxis.CategoryAxisLabelFontSize)},t.prototype.updateCategoryAxisLabelFontSize=function(n){var i,t,r;for(this.getChartProperties().Axis.CategoryAxis.CategoryAxisLabelFontSize=n,i=this.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryXAxis.font.size=this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisLabelFontSize?this.getFontSizeBasedOnResolution():n+"px",r.redraw()},t.prototype.updateCategoryAxisTitleVisibility=function(n){var u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.CellInfo),i,t,r;for(this.propertyPanel.updateItemVisibility("ComboChart","Axis","CategoryAxisTitleValue",n&&this.getChartProperties().Axis.CategoryAxis.IsEnabled),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoCategoryAxisTitleFontSize",n&&this.getChartProperties().Axis.CategoryAxis.IsEnabled),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","CategoryAxisTitleFontSize",n&&this.getChartProperties().Axis.CategoryAxis.IsEnabled),this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","CategoryAxisTitleFontSize",this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize),this.updateTitleVisibility("ComboChart","FontSettings","CategoryAxisTitleFont",n&&this.getChartProperties().Axis.CategoryAxis.IsEnabled),i=this.controlContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),this.getChartProperties().Axis.CategoryAxis.ShowTitle=n,r.model.primaryXAxis.title.visible=u.ShowXAxisTitle?n:!1,r.redraw()},t.prototype.updateCategoryAxisTitleValue=function(n){var i,t,r;if(this.DataGroupInfo.FieldContainers.length>0){for(BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n)?(this.getChartProperties().Axis.CategoryAxis.IsCustomTitle=!1,n=this.columnBindings[this.DataGroupInfo.FieldContainers[2].FieldInfos[0].UniqueColumnName]):this.getChartProperties().Axis.CategoryAxis.IsCustomTitle=!0,this.getChartProperties().Axis.CategoryAxis.Title=n,i=this.controlContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryXAxis.title.text=n,r.redraw();this.setPropertyElement("Axis","CategoryAxisTitleValue",this.getChartProperties().Axis.CategoryAxis.IsCustomTitle?n:"")}else this.setPropertyElement("Axis","CategoryAxisTitleValue","")},t.prototype.updateIsAutoCategoryAxisTitleFontSize=function(n){this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize=n;this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","CategoryAxisTitleFontSize",this.getChartProperties().Axis.CategoryAxis.IsEnabled);this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","CategoryAxisTitleFontSize",n);this.updateCategoryAxisTitleFontSize(this.getChartProperties().Axis.CategoryAxis.CategoryAxisTitleFontSize)},t.prototype.updateCategoryAxisTitleFontSize=function(n){var i,t,r;for(this.getChartProperties().Axis.CategoryAxis.CategoryAxisTitleFontSize=n,i=this.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryXAxis.title.font.size=this.getChartProperties().Axis.CategoryAxis.IsAutoCategoryAxisTitleFontSize?this.getFontSizeBasedOnResolution():n+"px",r.redraw()},t.prototype.updatePrimaryAxisVisibility=function(n){var u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.CellInfo),i,t,r;for(this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled=n,this.propertyPanel.updateItemVisibility("ComboChart","Axis","PrimaryAxisTitle",n),this.propertyPanel.updateItemVisibility("ComboChart","Axis","PrimaryAxisTitleValue",this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle&&n),this.propertyPanel.updateItemVisibility("ComboChart","Axis","PrimaryAxisRange",n),this.propertyPanel.updateItemVisibility("ComboChart","Axis","PrimaryAxisType",n&&this.axisTypevisible(this.comboChartObj.model.series,!1)),this.propertyPanel.updateItemVisibility("ComboChart","Axis","PrimaryAxisFormat",n),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoPrimaryAxisLabelFontSize",n),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","PrimaryLabelFontSize",n),this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","PrimaryLabelFontSize",this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoPrimaryAxisTitleFontSize",n),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","PrimaryTitleFontSize",n),this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","PrimaryTitleFontSize",this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize),this.updateTitleVisibility("ComboChart","FontSettings","PrimaryAxisLabelFont",n),this.updateTitleVisibility("ComboChart","FontSettings","PrimaryAxisTitleFont",n),i=this.contentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryYAxis.visible=u.ShowYAxisLabels?n:!1,r.redraw()},t.prototype.updatePrimaryAxisTitleVisibility=function(n){var u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.CellInfo),i,t,r;for(this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle=n,this.propertyPanel.updateItemVisibility("ComboChart","Axis","PrimaryAxisTitleValue",this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&n),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoPrimaryAxisTitleFontSize",n),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","PrimaryTitleFontSize",n),this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","PrimaryTitleFontSize",this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize),this.updateTitleVisibility("ComboChart","FontSettings","PrimaryAxisTitleFont",n),i=this.contentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryYAxis.title.visible=u.ShowYAxisLabels?n:!1,r.redraw()},t.prototype.updateIsAutoAxisLabelFontSize=function(n,t){var i=t==="IsAutoSecondaryAxisLabelFontSize",r=i?"SecondaryLabelFontSize":"PrimaryLabelFontSize",f=i?this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled:this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,u;i?this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize=n:this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize=n;this.propertyPanel.updateItemVisibility("ComboChart","FontSettings",r,f);this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings",r,n);u=i?this.getChartProperties().Axis.SecondaryValueAxis.SecondaryLabelFontSize:this.getChartProperties().Axis.PrimaryValueAxis.PrimaryLabelFontSize;this.updateAxisLabelFontSize(u,r)},t.prototype.updateAxisLabelFontSize=function(n,t){for(var i,f=t==="SecondaryLabelFontSize",u=this.ContentContainer.find(".e-datavisualization-chart"),r=0;r<u.length;r++)i=this.bbdesigner$(u[r]).data("BoldBIDashboardChart"),f?(this.getChartProperties().Axis.SecondaryValueAxis.SecondaryLabelFontSize=n,i.model.axes[0].font.size=this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize?this.getFontSizeBasedOnResolution():n+"px"):(this.getChartProperties().Axis.PrimaryValueAxis.PrimaryLabelFontSize=n,i.model.primaryYAxis.font.size=this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize?this.getFontSizeBasedOnResolution():n+"px"),i.redraw()},t.prototype.updateIsAutoAxisTitleFontSize=function(n,t){var i=t==="IsAutoSecondaryAxisTitleFontSize",r=i?"SecondaryTitleFontSize":"PrimaryTitleFontSize",f=i?this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled:this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,u;i?this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize=n:this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize=n;this.propertyPanel.updateItemVisibility("ComboChart","FontSettings",r,f);this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings",r,n);u=i?this.getChartProperties().Axis.SecondaryValueAxis.SecondaryTitleFontSize:this.getChartProperties().Axis.PrimaryValueAxis.PrimaryTitleFontSize;this.updateAxisTitleFontSize(u,r)},t.prototype.updateAxisTitleFontSize=function(n,t){for(var i,f=t==="SecondaryTitleFontSize",u=this.ContentContainer.find(".e-datavisualization-chart"),r=0;r<u.length;r++)i=this.bbdesigner$(u[r]).data("BoldBIDashboardChart"),f?(this.getChartProperties().Axis.SecondaryValueAxis.SecondaryTitleFontSize=n,i.model.axes[0].title.font.size=this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize?this.getFontSizeBasedOnResolution():n+"px"):(this.getChartProperties().Axis.PrimaryValueAxis.PrimaryTitleFontSize=n,i.model.primaryYAxis.title.font.size=this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize?this.getFontSizeBasedOnResolution():n+"px"),i.redraw()},t.prototype.updatePrimaryAxisTitleValue=function(n){var t,i,u,r,f;if(this.DataGroupInfo.FieldContainers.length>0){for(t=[],i=0;i<this.getChartProperties().ChartSeriesTypeInfo.length;i++)this.getChartProperties().ChartSeriesTypeInfo[i].IsSecondaryAxis||t.push(this.getChartProperties().ChartSeriesTypeInfo[i]);for(n=BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n)?t.length===1?this.columnBindings[t[0].UniqueColumnName]:"Values":n,u=this.contentContainer.find(".e-datavisualization-chart"),r=0;r<u.length;r++)f=this.bbdesigner$(u[r]).data("BoldBIDashboardChart"),f.model.primaryYAxis.title.text=n,f.redraw();this.getChartProperties().Axis.PrimaryValueAxis.Title=n;this.getChartProperties().Axis.PrimaryValueAxis.IsCustomTitle=BoldBIDashboard.isNullOrUndefined(n)||n===""?!1:t.length===1&&n===this.columnBindings[t[0].UniqueColumnName]?!1:t.length>1&&n==="Values"?!1:!0;this.setPropertyElement("Axis","PrimaryAxisTitleValue",this.getChartProperties().Axis.PrimaryValueAxis.IsCustomTitle?n:"")}else this.setPropertyElement("Axis","PrimaryAxisTitleValue","")},t.prototype.updateSecondaryAxisVisibility=function(n){var u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.CellInfo),i,t,r;for(this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled=n,this.propertyPanel.updateItemVisibility("ComboChart","Axis","SecondaryAxisTitle",n),this.propertyPanel.updateItemVisibility("ComboChart","Axis","SecondaryAxisRange",n),this.propertyPanel.updateItemVisibility("ComboChart","Axis","SecondaryAxisTitleValue",this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle&&n),this.propertyPanel.updateItemVisibility("ComboChart","Axis","SecondaryAxisType",n&&this.axisTypevisible(this.comboChartObj.model.series,!0)),this.propertyPanel.updateItemVisibility("ComboChart","Axis","SecondaryAxisFormat",n),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoSecondaryAxisLabelFontSize",n),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","SecondaryLabelFontSize",n),this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","SecondaryLabelFontSize",this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoSecondaryAxisTitleFontSize",n&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","SecondaryTitleFontSize",n&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle),this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","SecondaryTitleFontSize",this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize),this.updateTitleVisibility("ComboChart","FontSettings","SecondaryAxisLabelFont",n),this.updateTitleVisibility("ComboChart","FontSettings","SecondaryAxisTitleFont",n&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle),i=this.contentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.axes[0].visible=u.ShowYAxisLabels?n:!1,r.redraw()},t.prototype.updateSecondaryAxisTitleVisibility=function(n){var u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.CellInfo),i,t,r;for(this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle=n,this.propertyPanel.updateItemVisibility("ComboChart","Axis","SecondaryAxisTitleValue",this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&n),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoSecondaryAxisTitleFontSize",n),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","SecondaryTitleFontSize",n),this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","SecondaryTitleFontSize",this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize),this.updateTitleVisibility("ComboChart","FontSettings","SecondaryAxisTitleFont",n&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled),i=this.contentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.axes[0].title.visible=u.ShowYAxisTitle?n:!1,r.redraw()},t.prototype.updateSecondaryAxisTitleValue=function(n){var t,i,u,r,f;if(this.DataGroupInfo.FieldContainers.length>0){for(t=[],i=0;i<this.getChartProperties().ChartSeriesTypeInfo.length;i++)this.getChartProperties().ChartSeriesTypeInfo[i].IsSecondaryAxis&&t.push(this.getChartProperties().ChartSeriesTypeInfo[i]);for(n=BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n)?t.length===1?this.columnBindings[t[0].UniqueColumnName]:"Values":n,u=this.contentContainer.find(".e-datavisualization-chart"),r=0;r<u.length;r++)f=this.bbdesigner$(u[r]).data("BoldBIDashboardChart"),f.model.axes[0].title.text=n,f.redraw();this.getChartProperties().Axis.SecondaryValueAxis.Title=n;this.getChartProperties().Axis.SecondaryValueAxis.IsCustomTitle=BoldBIDashboard.isNullOrUndefined(n)||n===""?!1:t.length===1&&n===this.columnBindings[t[0].UniqueColumnName]?!1:t.length>1&&n==="Values"?!1:!0;this.setPropertyElement("Axis","SecondaryAxisTitleValue",this.getChartProperties().Axis.SecondaryValueAxis.IsCustomTitle?n:"")}else this.setPropertyElement("Axis","SecondaryAxisTitleValue","")},t.prototype.updateTitleVisibility=function(n,t,i,r,u){var o=BoldBIDashboard.isNullOrUndefined(u)?BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])):u,f=o.propertyPanel.propertyContainer.find("#"+o.designerId+"_propertyItemHeaderText_"+i),e;f.css("display",r?"inline-block":"none");f.length>0&&(e=f.data("BoldBIDashboardScroller"),BoldBIDashboard.isNullOrUndefined(e)||e.refresh())},t.prototype.updateLegendTitle=function(n){var i,t,r;for(this.getChartProperties().LegendTitle=n,i=this.contentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.legend.title.text=n,r.redraw()},t.prototype.updateCategoryLabelRotation=function(n){var r=this.contentContainer.find(".e-datavisualization-chart"),u,t,i;for(this.getChartProperties().Axis.CategoryAxis.LabelRotation=n.replace(new RegExp(String.fromCharCode(176),"g"),""),u=this.getResponsiveLabelnteresect(this.getChartProperties().Axis.CategoryAxis.LabelOverflowMode),t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),i.model.primaryXAxis.labelRotation=this.getResponsiveLabelRotation(this.getChartProperties().Axis.CategoryAxis.LabelRotation),i.model.primaryXAxis.labelIntersectAction=u,i.redraw()},t.prototype.updateCategoryAxisLabelTrim=function(n){var i,t,r;for(this.getChartProperties().Axis.CategoryAxis.EnableTrim=n,this.propertyPanel.updateItemDisable("float","ComboChart","Axis","LabelMaximumWidth",!n),i=this.contentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryXAxis.enableTrim=n,r.redraw()},t.prototype.updateLabelOverFlowMode=function(n){var u,i,t,r;for(this.getChartProperties().Axis.CategoryAxis.LabelOverflowMode=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LabelOverFlowMode,n),u=this.getResponsiveLabelnteresect(this.getChartProperties().Axis.CategoryAxis.LabelOverflowMode),i=this.contentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryXAxis.labelIntersectAction=u,r.redraw()},t.prototype.updateLabelMaxWidth=function(n){var i,t,r;for(this.getChartProperties().Axis.CategoryAxis.MaxLabelWidth=n,i=this.contentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryXAxis.maximumLabelWidth=this.getChartProperties().Axis.CategoryAxis.MaxLabelWidth,r.redraw()},t.prototype.updateIsAutoInterval=function(n){this.getChartProperties().Axis.CategoryAxis.IsAutoInterval=n;this.updateInterval(this.getChartProperties().Axis.CategoryAxis.Interval);this.propertyPanel.updateItemVisibility("ComboChart","Axis","Interval",!n)},t.prototype.updateInterval=function(n){var i,t,r;for(this.getChartProperties().Axis.CategoryAxis.Interval=n,i=this.ContentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryXAxis.range.interval=this.getChartProperties().Axis.CategoryAxis.IsAutoInterval?null:n,r.redraw()},t.prototype.updateCategoryGridLines=function(n){var u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.CellInfo,!1,BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isXaxisLabelVisible(this)),r=this.contentContainer.find(".e-datavisualization-chart"),t,i;for(this.getChartProperties().CategoryGridLines=n,t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),i.model.primaryXAxis.majorGridLines.visible=this.getChartProperties().CategoryGridLines,i.redraw()},t.prototype.updatePrimaryValueGridLines=function(n){var u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.CellInfo),r=this.contentContainer.find(".e-datavisualization-chart"),t,i;for(this.getChartProperties().PrimaryValueGridLines=n,t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),i.model.primaryYAxis.majorGridLines.visible=this.getChartProperties().PrimaryValueGridLines,i.redraw()},t.prototype.updateSecondaryValueGridLines=function(n){var u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.CellInfo),r=this.contentContainer.find(".e-datavisualization-chart"),t,i;for(this.getChartProperties().SecondaryValueGridLines=n,t=0;t<r.length;t++)i=this.bbdesigner$(r[t]).data("BoldBIDashboardChart"),i.model.axes[0].majorGridLines.visible=this.getChartProperties().SecondaryValueGridLines,i.redraw()},t.prototype.updatePrimaryAxisType=function(n){var i,t,r;for(this.getChartProperties().Axis.PrimaryValueAxis.AxisType=n,i=this.contentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.primaryYAxis.valueType=n===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Logarithmic)?"logarithmic":"double",r.redraw()},t.prototype.updateSecondaryAxisType=function(n){var i,t,r;for(this.getChartProperties().Axis.SecondaryValueAxis.AxisType=n,i=this.contentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),r.model.axes[0].valueType=n===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Logarithmic)?"logarithmic":"double",r.redraw()},t.prototype.updateAxisTitleForegroound=function(n){var r,i,t;for(this.getChartProperties().AxisTitle.Color=n,this.getChartProperties().AxisTitle.IsEdited=!0,r=this.contentContainer.find(".e-datavisualization-chart"),i=0;i<r.length;i++)t=this.bbdesigner$(r[i]).data("BoldBIDashboardChart"),t.model.primaryXAxis.title.font.color=n,t.model.primaryYAxis.title.font.color=n,!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ChartSeriesTypeInfo)&&this.getChartProperties().ChartSeriesTypeInfo.length>0&&this.getChartProperties().ChartSeriesTypeInfo.filter(function(n){return n.IsSecondaryAxis}).length>0&&(BoldBIDashboard.isNullOrUndefined(t.model.axes[0])||(t.model.axes[0].title.font.color=n)),t.redraw()},t.prototype.updateAxisLabelForegroound=function(n){var r,i,t;for(this.getChartProperties().AxisLabel.Color=n,this.getChartProperties().AxisLabel.IsEdited=!0,r=this.contentContainer.find(".e-datavisualization-chart"),i=0;i<r.length;i++)t=this.bbdesigner$(r[i]).data("BoldBIDashboardChart"),t.model.primaryXAxis.font.color=n,t.model.primaryYAxis.font.color=n,!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ChartSeriesTypeInfo)&&this.getChartProperties().ChartSeriesTypeInfo.length>0&&this.getChartProperties().ChartSeriesTypeInfo.filter(function(n){return n.IsSecondaryAxis}).length>0&&(BoldBIDashboard.isNullOrUndefined(t.model.axes[0])||(t.model.axes[0].font.color=n)),t.redraw()},t.prototype.onCustomLegendClick=function(){this.designerInstance.modules.customLegendSettings.openLegendSettings(this,"updateCustomLegend",this.getChartProperties().CustomLegendInfo)},t.prototype.updateCustomLegend=function(n){var i,t,r;for(this.getChartProperties().IsCustomLegend=!0,this.getChartProperties().CustomLegendInfo=n,i=this.contentContainer.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=this.bbdesigner$(i[t]).data("BoldBIDashboardChart"),this.updateCustomLegendValuesToChartObj(r);this.designerInstance.modules.serialization.notifyChange();BoldBIDashboardDesigner.editManager.setMergeAction(!1)},t.prototype.updateCustomLegendValuesToChartObj=function(n){var i=this.getBindedColumns(),r,u,t,f;if(!BoldBIDashboard.isNullOrUndefined(this.comboChartObj)&&(i.primaryYValue.length>0||i.secondaryYValue.length>0))for(r=this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable,u=r?1:n.model.series.length,t=0;t<u;t++)f=this.getChartProperties().CustomLegendInfo.GroupValues.Values,n.model.series[t].name=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getCustomLegendItem(n.model.series[t].id,f);n.redraw()},t.prototype.updateCustomLegendSettingsValue=function(){if(this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design){var n=this.getBindedColumns();(n.primaryYValue.length>0||n.secondaryYValue.length>0)&&(this.getChartProperties().CustomLegendInfo.GroupValues.Values=this.getChartProperties().CustomLegendInfo.GroupValues.Series.length>0?[]:this.getChartProperties().CustomLegendInfo.GroupValues.Values,this.bindChartLegendsToLegendInfo(this.comboChartObj,"Values"),this.bindChartLegendsToLegendInfo(this.comboChartObj,"SingleValues"),this.getChartProperties().CustomLegendInfo.SingleValues=[],this.getChartProperties().CustomLegendInfo.GroupValues.Series=[])}this.updateCustomLegendValuesToChartObj(this.comboChartObj)},t.prototype.bindChartLegendsToLegendInfo=function(n,t){var h=this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable,o=h?1:n.model.series.length,u=this.getLegendCategory(t),f=[],r,e,i,s;if(u.length>0)if(t==="SingleValues")for(r=0;r<u.length;r++)for(i=0;i<o;i++)n.model.series[i].legendName===u[r].Name&&u[r].IsModified&&f.indexOf(n.model.series[i].legendName)===-1&&f.push(n.model.series[i].legendName);else if(t==="Values")for(r=0;r<u.length;r++)for(i=0;i<o;i++)n.model.series[i].id===u[r].Id&&u[r].IsModified&&f.indexOf(n.model.series[i].id)===-1&&f.push(n.model.series[i].id);for(e=[],i=0;i<o;i++)s={Caption:n.model.series[i].legendCaption,Name:n.model.series[i].legendName,Value:this.getModifiedValusForLegend(u,n.model.series[i],f,t),IsModified:t==="Values"?f.indexOf(n.model.series[i].id)>-1:f.indexOf(n.model.series[i].legendName)>-1,Id:n.model.series[i].id},e.push(s);t==="Values"?this.getChartProperties().CustomLegendInfo.GroupValues.Values=e:t==="SingleValues"&&(this.getChartProperties().CustomLegendInfo.SingleValues=e)},t.prototype.getModifiedValusForLegend=function(n,t,i,r){for(var f=t.legendName,u=0;u<n.length;u++)if(r!=="Values"?i.indexOf(n[u].Name)>-1&&n[u].Name===t.legendName:i.indexOf(n[u].Id)>-1&&n[u].Id===t.id){f=n[u].Value;break}return f},t.prototype.updateComboChartLegends=function(){var t,n,i;if(this.getChartProperties().CustomLegendInfo.GroupValues.Values.length>0)for(t=0;t<this.getChartProperties().CustomLegendInfo.GroupValues.Values.length;t++)n=this.getChartProperties().CustomLegendInfo.GroupValues.Values[t],i=BoldBIDashboard.DashboardUtil.getFieldBasedonUniqueColumnName(n.Id,this.DataGroupInfo).DisplayName,n.Name=i,n.IsModified||(n.Value=i);this.updateCustomLegendValuesToChartObj(this.comboChartObj)},t.prototype.getLegendCategory=function(n){var t="";switch(n){case"Values":t=this.getChartProperties().CustomLegendInfo.GroupValues.Values;break;case"SingleValues":t=this.getChartProperties().CustomLegendInfo.SingleValues}return t},t.prototype.updateValueLabelInfos=function(n){var r=n.dataValues,u=n.getChartProperties().isEnableForecast?1:r.widgetData.Data.length,t=n.getChartProperties().CustomValueLabels,e,i,f;if(this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design||BoldBIDashboard.isNullOrUndefined(t)||t.length===0){if((BoldBIDashboard.isNullOrUndefined(t)||t.length!==u)&&(t=[]),!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0)for(e=function(n){var i=JSON.parse(r.widgetData.Data[n]);t.filter(function(n){return n.Name===i.legendCaption&&n.UniqueColumnName===i.id}).length===0&&(t=[])},i=0;i<u;i++)e(i);if(t.length===0)for(i=0;i<u;i++)f=JSON.parse(r.widgetData.Data[i]),t.push({Name:f.legendCaption,IsEnabled:!0,UniqueColumnName:f.id});n.getChartProperties().CustomValueLabels=t}},t.prototype.updateDefaultPaletteVisibility=function(n){this.getChartProperties().IsDefaultColorPalette=n;var t=this.getModifiedColorPalette();this.updateColorPaletteToComboChartWidget(t);this.propertyPanel.refreshScroller()},t.prototype.getModifiedColorPalette=function(){for(var t,i=[],r=this.contentContainer.find(".e-datavisualization-chart"),n=0;n<r.length;n++)t=this.bbdesigner$(r[n]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(t)||(i=this.getColorPaletteValue(t.model.series));return i},t.prototype.getColorPaletteValue=function(n){var r=[],i,u,t;if(this.getChartProperties().IsDefaultColorPalette){if(this.getChartProperties().ColorPaletteModel.length>0)for(i=0;i<this.defaultColorPalette.length;i++)r[i]=BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ColorPaletteModel[i])?this.defaultColorPalette[i]:this.getChartProperties().ColorPaletteModel[i].DefaultValue;else r=this.bbdesigner$.extend(!0,[],this.defaultColorPalette);if(n.length>this.defaultColorPalette.length)for(u=this.defaultColorPalette.length;u<n.length;u++)r[u]=this.defaultColorPalette[u%this.defaultColorPalette.length]}else for(t=0;t<this.defaultColorPalette.length;t++)r[t]=BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ColorPaletteModel[t])?this.defaultColorPalette[t]:this.getChartProperties().ColorPaletteModel[t].IsModified?this.getChartProperties().ColorPaletteModel[t].Value:this.getChartProperties().ColorPaletteModel[t].DefaultValue;return r},t.prototype.updateColorPalette=function(n){var r=n.textValue,t=n.rowIndex,i=this.getModifiedColorPalette();i[t]=this.getChartProperties().ColorPaletteModel[t].Value=r;this.getChartProperties().ColorPaletteModel[t].IsModified=!0;this.updateColorPaletteToComboChartWidget(i);this.designerInstance.modules.serialization.notifyChange();BoldBIDashboardDesigner.editManager.setMergeAction(!1)},t.prototype.updateColorPaletteToComboChartWidget=function(n){for(var t,f,i,e=this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable,u=this.contentContainer.find(".e-datavisualization-chart"),r=0;r<u.length;r++){if(t=this.bbdesigner$(u[r]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(t))for(t.model.palette=n,f=e?1:t.model.series.length,i=0;i<f;i++)t.model.series[i].fill=n[i];t.redraw()}},t.prototype.updateColorPaletteModel=function(){var n=this.propertyPanel.getPropertyElement(this.getComboChartPropertyPanel(),"ColorPalette","SeriesPalette",-1);this.openColorPalette(null,"ComboChart_SeriesPalette",n)},t.prototype.updateSeriesColorPalette=function(){var u,r,n,t;if(this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&!this.isOpenReport&&!this.isSwitchingDesignMode){if(u=this.getBindedColumns(),r=[],u.primaryYValue.length>0||u.secondaryYValue.length>0){var i=this.comboChartObj.model.series,f=this.getChartProperties().ForecastProperties.ForecastSettings.IsEnable,e=f?1:i.length;for(n=0;n<e;n++)if(this.getChartProperties().ColorPaletteModel.length>0)for(t=0;t<this.getChartProperties().ColorPaletteModel.length;t++)if(BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ColorPaletteModel[t])||this.getChartProperties().ColorPaletteModel[t].Id!==i[n].id||!this.getChartProperties().ColorPaletteModel[t].IsModified||this.getChartProperties().IsDefaultColorPalette){r.push({Name:i[n].name,Value:this.defaultColorPalette[n%this.defaultColorPalette.length],IsModified:!1,Id:i[n].id,DefaultValue:this.defaultColorPalette[n%this.defaultColorPalette.length]});break}else{r.push(this.getChartProperties().ColorPaletteModel[t]);this.getChartProperties().ColorPaletteModel.splice(t,1);break}else r.push({Name:i[n].name,Value:this.defaultColorPalette[n%this.defaultColorPalette.length],IsModified:!1,Id:i[n].id,DefaultValue:this.defaultColorPalette[n%this.defaultColorPalette.length]})}this.getChartProperties().ColorPaletteModel=r;this.updateColorPaletteModel()}this.updateDefaultPaletteVisibility(this.getChartProperties().IsDefaultColorPalette)},t.prototype.updateDataGroupPropertyVisibility=function(n,t){var i,r;BoldBIDashboard.isNullOrUndefined(n)||(i=n.primaryYValue.length>0||n.secondaryYValue.length>0,this.getChartProperties().CustomLegendBtnVisibilty=i,this.getChartProperties().IsColorPaletteCategoryVisible=i,r=n.primaryYValue.length!==0||n.secondaryYValue.length!==0,this.designerInstance.modules.util.updateAction("ComboChart","Link","Link"),this.propertyPanel.updateCategoryVisibility("ComboChart","Trendline",t),this.propertyPanel.updateItemVisibility("ComboChart","Trendline","Trendline",t),this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","ChartTypeAndAxis",i),this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","ChartTypeAndAxis",i),this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","CustomLegend",i&&this.getChartProperties().ShowLegend),this.updateTitleVisibility("Chart","FontSettings","ValueLabel",this.getChartProperties().ShowValueLabels,this),this.propertyPanel.updateCategoryVisibility("ComboChart","Formatting",r),this.propertyPanel.updateItemVisibility("ComboChart","BasicSettings","ShowMarker",this.isMarkerVisible(this.comboChartObj.model.series)&&i))},t.prototype.updateItemVisibilityForAxis=function(n){var t=this.getUpdatedSeriesAxisCount(),i,r;!BoldBIDashboard.isNullOrUndefined(n)&&n?(this.propertyPanel.updateItemVisibility("ComboChart","Axis","PrimaryValueAxis",n),this.setPropertyElement("Axis","PrimaryValueAxis",this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled),this.propertyPanel.updateItemVisibility("ComboChart","Axis","PrimaryAxisTitle",this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled),this.propertyPanel.updateItemVisibility("ComboChart","Axis","PrimaryAxisTitleValue",this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle),this.propertyPanel.updateItemVisibility("ComboChart","Axis","PrimaryAxisType",this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.axisTypevisible(this.comboChartObj.model.series,!1)),this.propertyPanel.updateItemVisibility("ComboChart","Axis","PrimaryAxisFormat",this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled),this.updateTitleVisibility("ComboChart","FontSettings","PrimaryAxisLabelFont",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,this),this.updateTitleVisibility("ComboChart","FontSettings","PrimaryAxisTitleFont",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle,this),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoPrimaryAxisLabelFontSize",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","PrimaryLabelFontSize",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled),this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","PrimaryLabelFontSize",this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoPrimaryAxisTitleFontSize",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","PrimaryTitleFontSize",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle),this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","PrimaryTitleFontSize",this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize),this.propertyPanel.updateItemVisibility("ComboChart","Axis","SecondaryValueAxis",n),this.setPropertyElement("Axis","SecondaryValueAxis",this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled),this.propertyPanel.updateItemVisibility("ComboChart","Axis","SecondaryAxisTitle",this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled),this.propertyPanel.updateItemVisibility("ComboChart","Axis","SecondaryAxisTitleValue",this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle),this.propertyPanel.updateItemVisibility("ComboChart","Axis","SecondaryAxisType",this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&this.axisTypevisible(this.comboChartObj.model.series,!0)),this.propertyPanel.updateItemVisibility("ComboChart","Axis","SecondaryAxisFormat",this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled),this.updateTitleVisibility("ComboChart","FontSettings","SecondaryAxisLabelFont",t.secondaryValueLength>0&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,this),this.updateTitleVisibility("ComboChart","FontSettings","SecondaryAxisTitleFont",t.secondaryValueLength>0&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle,this),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoSecondaryAxisLabelFontSize",t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","SecondaryLabelFontSize",t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled),this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","SecondaryLabelFontSize",this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoSecondaryAxisTitleFontSize",t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","SecondaryTitleFontSize",t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle),this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","SecondaryTitleFontSize",this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize)):(i=t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,this.propertyPanel.updateItemVisibility("ComboChart","Axis","PrimaryValueAxis",t.primaryValueLength>0),this.setPropertyElement("Axis","PrimaryValueAxis",i),this.propertyPanel.updateItemVisibility("ComboChart","Axis","PrimaryAxisTitle",i),this.propertyPanel.updateItemVisibility("ComboChart","Axis","PrimaryAxisTitleValue",i&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle),this.propertyPanel.updateItemVisibility("ComboChart","Axis","PrimaryAxisType",i&&this.axisTypevisible(this.comboChartObj.model.series,!1)),this.propertyPanel.updateItemVisibility("ComboChart","Axis","PrimaryAxisFormat",i),this.updateTitleVisibility("ComboChart","FontSettings","PrimaryAxisLabelFont",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,this),this.updateTitleVisibility("ComboChart","FontSettings","PrimaryAxisTitleFont",t.primaryValueLength>0&&this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle,this),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoPrimaryAxisLabelFontSize",this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","PrimaryLabelFontSize",this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled),this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","PrimaryLabelFontSize",this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisLabelFontSize),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoPrimaryAxisTitleFontSize",this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","PrimaryTitleFontSize",this.getChartProperties().Axis.PrimaryValueAxis.IsEnabled&&this.getChartProperties().Axis.PrimaryValueAxis.ShowTitle),this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","PrimaryTitleFontSize",this.getChartProperties().Axis.PrimaryValueAxis.IsAutoPrimaryAxisTitleFontSize),r=t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,this.propertyPanel.updateItemVisibility("ComboChart","Axis","SecondaryValueAxis",t.secondaryValueLength>0),this.setPropertyElement("Axis","SecondaryValueAxis",r),this.propertyPanel.updateItemVisibility("ComboChart","Axis","SecondaryAxisTitle",r),this.propertyPanel.updateItemVisibility("ComboChart","Axis","SecondaryAxisTitleValue",r&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle),this.propertyPanel.updateItemVisibility("ComboChart","Axis","SecondaryAxisType",r&&this.axisTypevisible(this.comboChartObj.model.series,!0)),this.propertyPanel.updateItemVisibility("ComboChart","Axis","SecondaryAxisFormat",r),this.updateTitleVisibility("ComboChart","FontSettings","SecondaryAxisLabelFont",t.secondaryValueLength>0&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled,this),this.updateTitleVisibility("ComboChart","FontSettings","SecondaryAxisTitleFont",t.secondaryValueLength>0&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis)&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle,this),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoSecondaryAxisLabelFontSize",t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","SecondaryLabelFontSize",t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled),this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","SecondaryLabelFontSize",this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisLabelFontSize),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","IsAutoSecondaryAxisTitleFontSize",t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle),this.propertyPanel.updateItemVisibility("ComboChart","FontSettings","SecondaryTitleFontSize",t.secondaryValueLength>0&&this.getChartProperties().Axis.SecondaryValueAxis.IsEnabled&&this.getChartProperties().Axis.SecondaryValueAxis.ShowTitle),this.propertyPanel.updateItemDisable("float","ComboChart","FontSettings","SecondaryTitleFontSize",this.getChartProperties().Axis.SecondaryValueAxis.IsAutoSecondaryAxisTitleFontSize))},t.prototype.updateOrderOfColorPalette=function(){for(var n,i=[],r=this.comboChartObj.model.series,t=0;t<r.length;t++)for(n=0;n<this.getChartProperties().ColorPaletteModel.length;n++)if(this.getChartProperties().ColorPaletteModel[n].Id===r[t].id){i.push(this.getChartProperties().ColorPaletteModel[n]);break}this.getChartProperties().ColorPaletteModel=i},t.prototype.renderPrimaryAxisRange=function(n,t,i){this.renderAxisRange(n,t,i,!1)},t.prototype.renderSecondaryAxisRange=function(n,t,i){this.renderAxisRange(n,t,i,!0)},t.prototype.renderAxisRange=function(n,t,i,r){var a=r?"SecondaryAxisRangeElement":"PrimaryAxisRangeElement",f=r?"SecondaryAxisRange":"PrimaryAxisRange",u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),v=this.getUpdatedSeriesAxisCount(),e=v.primaryValueLength>0||this.getChartProperties().ChartSeriesTypeInfo.length===0,o=v.secondaryValueLength>0||this.getChartProperties().ChartSeriesTypeInfo.length===0,b=r?o:e,s,h,c,w,l;if(BoldBIDashboard.isNullOrUndefined(n))this.isOpenReport||BoldBIDashboard.isNullOrUndefined(u)||u.Type!==ControlType.ComboChart||(l=this.designerInstance.element.find("#"+this.designerId+"_combochart_"+i.categoryName+"_"+i.name).data("BoldBIDashboardCheckBox"),BoldBIDashboard.isNullOrUndefined(l)||l.option("checked",r?u.getChartProperties().Axis.SecondaryValueAxis.IsEnabled:u.getChartProperties().Axis.PrimaryValueAxis.IsEnabled),this.propertyPanel.updateItemVisibility("ComboChart","Axis",f,r?o&&u.getChartProperties().Axis.SecondaryValueAxis.IsEnabled:e&&u.getChartProperties().Axis.PrimaryValueAxis.IsEnabled),this.propertyPanel.updateItemVisibility("ComboChart","Axis",a,r?o:e));else{var y=BoldBIDashboard.buildTag("div.e-dbrd-axis-range-row-element","",{display:b?"inline-block":"none"},{id:this.designerId+"_ComboChart_"+i.categoryName+"_"+a+"_container"}),p=BoldBIDashboard.buildTag("div.e-dbrd-axis-range-label-container","",{width:(this.propertyPanel.propertyPanelContainer.width()-33)*47/100+"px"}),k=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily e-dbrd-axis-range-label-element",r?this.locale.propertyPanel.axisSettings.showSecondaryValueAxis:this.locale.propertyPanel.axisSettings.showPrimaryValueAxis,{"max-width":(this.propertyPanel.propertyPanelContainer.width()-33)*47/100-15+"px"},{id:this.designerId+"_combochart_"+i.categoryName+"_"+i.name+"_childElement","for":this.designerId+"_combochart_"+i.categoryName+"_"+i.name});p.append(k);s=BoldBIDashboard.buildTag("div.e-dbrd-axis-range-check-box-container","",{},{id:this.designerId+"_combochart_"+i.categoryName+"_"+i.name+"_parent"});h=BoldBIDashboard.buildTag("input","",{},{id:this.designerId+"_combochart_"+i.categoryName+"_"+i.name,type:"checkbox"});s.append(h);c=BoldBIDashboard.buildTag("div.e-dbrd--axis-range-button-container","",{width:(this.propertyPanel.propertyPanelContainer.width()-33)*47/100+"px",display:"inline-block"},{id:this.designerId+"_"+t+"_"+i.categoryName+"_"+f+"_container"});w=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-small e-combochart-axis-range-button "+f,this.locale.propertyPanel.axisSettings.primaryAxisEditRangeText,{display:r?u.getChartProperties().Axis.SecondaryValueAxis.IsEnabled?"inline-block":"none":u.getChartProperties().Axis.PrimaryValueAxis.IsEnabled?"inline-block":"none"},{id:this.designerId+"_"+t+"_"+f+"_container"});c.append(w);h.BoldBIDashboardCheckBox({checked:r?u.getChartProperties().Axis.SecondaryValueAxis.IsEnabled:u.getChartProperties().Axis.PrimaryValueAxis.IsEnabled,change:this.bbdesigner$.proxy(this.propertyPanel.onValueChange,this.propertyPanel,i,"Axis","ComboChart"),width:(this.propertyPanel.propertyPanelContainer.width()-33)*57/100-15+"px",cssClass:"e-designer-prop-checkbox"});y.append(p,s,c);n.append(y)}},t.prototype.setPropertyElement=function(n,t,i,r){var u,f;this.propertyPanel.canUpdate=!1;u=this.propertyPanel.getPropertyElement(this.getComboChartPropertyPanel(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r);u.isVisible=i;f=this.bbdesigner$.extend(!0,{},u);f.categoryName=n;this.propertyPanel.updatePropertyValue(f,"ComboChart",i);this.propertyPanel.canUpdate=!0},t.prototype.renderTrendLines=function(n,t,i){var r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),p,w,nt,e,o;if(BoldBIDashboard.isNullOrUndefined(n))o=this.designerInstance.element.find("#"+this.designerId+"_ComboChart_trendline_grid_col").data("BoldBIDashboardGrid"),BoldBIDashboard.isNullOrUndefined(o)||(o.setModel({dataSource:this.getChartProperties().TrendLineSettings}),this.propertyPanel.updateItemVisibility("ComboChart","Trendline","Trendline",i.isVisible),r.trendLineEdit=!1,r.selectedGridData=null,r.designerInstance.element.find("#"+r.designerId+"_trendline_editicon").css("opacity","0.5").attr("disabled","disabled"),r.designerInstance.element.find("#"+r.designerId+"_trendline_delicon").css("opacity","0.5").attr("disabled","disabled"));else{var f=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-trendline-container","",{display:BoldBIDashboard.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designerId+"_"+t+"_"+i.name+"_container"}),s=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-trendline-leftdiv","",{},{id:this.designerId+"_trendlineleft"}),h=BoldBIDashboard.buildTag("table.e-designer-table","",{},{unselectable:"on"}),c=BoldBIDashboard.buildTag("tr","",{display:"block"}),l=BoldBIDashboard.buildTag("td","",{}),tt=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-trendline-label",this.locale.chartTrendLineDialog.trendline,{},{type:"label"}),a=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-trendline-rightdiv","",{},{id:this.designerId+"_trendlineright"}),v=BoldBIDashboard.buildTag("table.e-designer-table","",{"padding-right":"5px"},{unselectable:"on"}),y=BoldBIDashboard.buildTag("tr","",{display:"block"}),u=BoldBIDashboard.buildTag("td.e-toolbar","",{border:"none",display:"flex"});this.addDiv=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-chart-trendline boldbi-dashboarddesigner-chart-adddiv boldbi-dashboard-combochart-trendline-add","",{},{id:this.designerId+"_trendline_addicon"});p=BoldBIDashboard.buildTag("span.e-icon e-plus bbi-designer-add-icon bbi-dbrd-designer-hoverable bbi-dbrd-background-theme","",{float:"right","font-size":"14px",padding:"4px 0px 0px 2px"},{id:this.designerId+"_add_span","data-tooltip":this.locale.chartTrendLineDialog.Add});this.editDiv=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-chart-trendline boldbi-dashboarddesigner-chart-editdiv boldbi-dashboard-combochart-trendline-edit","",{},{id:this.designerId+"_trendline_editicon",disabled:"disabled"});w=BoldBIDashboard.buildTag("span.bbi-designer-parameter-edit bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable bbi-dbrd-icon-background-theme","",{float:"right","font-size":"14px",padding:"3px"},{id:this.designerId+"_edit_span","data-tooltip":this.locale.chartTrendLineDialog.Edit});this.deleteDiv=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-chart-trendline boldbi-dashboarddesigner-chart-deletediv boldbi-dashboard-combochart-trendline-delete bbi-dbrd-icon-background-theme","",{},{id:this.designerId+"_trendline_delicon",disabled:"disabled"});var it=BoldBIDashboard.buildTag("span.bbi-designer-toolbar-delete bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable","",{float:"right","font-size":"14px",margin:"3px"},{id:this.designerId+"_del_span","data-tooltip":this.locale.chartTrendLineDialog.Delete}),b=BoldBIDashboard.buildTag("div","",{},{id:this.designerId+"_trendline_grid"}),k=BoldBIDashboard.buildTag("table.e-designer-table","",{width:"435px"},{unselectable:"on"}),d=BoldBIDashboard.buildTag("tr","",{}),g=BoldBIDashboard.buildTag("td","",{},{id:this.designerId+"_ComboChart_trendline_grid_col"}),rt=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-separator e-horizontal","",{},{id:this.designerId+"_trendline_separator1"}),ut=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-separator e-horizontal","",{},{id:this.designerId+"_trendline_separator2"});n.append(f);f.append(s);s.append(h);h.append(c);c.append(l);l.append(tt);f.append(a);a.append(v);v.append(y);y.append(u);u.append(this.addDiv);this.addDiv.append(p);u.append(ut);u.append(this.editDiv);this.editDiv.append(w);u.append(rt);u.append(this.deleteDiv);this.deleteDiv.append(it);f.append(b);b.append(k);k.append(d);d.append(g);nt=this.getChartProperties().TrendLineSettings;e=428/3;g.BoldBIDashboardGrid({dataSource:nt,columns:[{field:"Name",headerText:this.locale.chartTrendLineDialog.series,width:e},{field:"LineType",headerText:this.locale.chartTrendLineDialog.type,width:e},{field:"LineColor",headerText:this.locale.chartTrendLineDialog.color,width:e}],height:"200px",allowSelection:!0,allowResizing:!0,allowScrolling:!0,allowPaging:!1,scrollSettings:{allowVirtualScrolling:!1,virtualScrollMode:"normal",enableTouchScroll:!1,autoHide:!0},rowSelected:this.bbdesigner$.proxy(this.gridRowSelected,this),enableAltRow:!1})}},t.prototype.gridRowSelected=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0]));this.designerInstance.element.find("#"+this.designerId+"_trendline_editicon").css("opacity","1").removeAttr("disabled");this.designerInstance.element.find("#"+this.designerId+"_trendline_delicon").css("opacity","1").removeAttr("disabled");t.selectedGridData=n.data},t.prototype.addTrendLine=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designPanelInstance.selectedReportItems[0]));n.trendLineEdit=!1;n.trendLineId=BoldBIDashboard.getGuid("");n.designerInstance.element.find("#"+n.designerId+"_legendtext_drop").attr("textEdited","false");this.designerInstance.modules.trendLineWindow.openTrendlineDialog(null,n,"updateTrendLineInfo")},t.prototype.editTrendLine=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0]));n.selectedGridData!==null&&(n.trendLineEdit=!0,this.designerInstance.modules.trendLineWindow.openTrendlineDialog(n.selectedGridData,n,"updateTrendLineInfo"))},t.prototype.updateTrendLineInfo=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designPanelInstance.selectedReportItems[0])),i;if(n.length===undefined)if(t.trendLineEdit)for(i=0;i<t.getChartProperties().TrendLineSettings.length;i++)t.getChartProperties().TrendLineSettings[i].Id===n.Id&&(t.getChartProperties().TrendLineSettings[i]=n);else t.getChartProperties().TrendLineSettings.push(n);t.trendLineEdit=!1;BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateTrendLineToAllSeries(t,t.comboChartObj.model.series);t.comboChartObj.redraw();t.designerInstance.element.find("#"+t.designerId+"_ComboChart_trendline_grid_col").data("BoldBIDashboardGrid").setModel({dataSource:t.getChartProperties().TrendLineSettings});this.propertyPanel.refreshScroller();t.designerInstance.element.find("#"+t.designerId+"_trendline_editicon").css("opacity","0.5").attr("disabled","disabled");t.designerInstance.element.find("#"+t.designerId+"_trendline_delicon").css("opacity","0.5").attr("disabled","disabled");t.selectedGridData=null;this.designerInstance.modules.serialization.notifyChange()},t.prototype.deleteTrendLine=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designPanelInstance.selectedReportItems[0]));n.selectedGridData!==null&&(n.selectedTrendlineIndex=n.designerInstance.element.find("#"+n.designerId+"_ComboChart_trendline_grid_col").data("BoldBIDashboardGrid").option("selectedRowIndex"),n.selectedTrendlineIndex!==-1&&n.getChartProperties().TrendLineSettings.splice(n.selectedTrendlineIndex,1),this.updateTrendLineInfo(n.getChartProperties().TrendLineSettings),n.designerInstance.element.find("#"+n.designerId+"_trendline_editicon").css("opacity","0.5").attr("disabled","disabled"),n.designerInstance.element.find("#"+n.designerId+"_trendline_delicon").css("opacity","0.5").attr("disabled","disabled"))},t.prototype.isHighlightEffectRequired=function(){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isHighlightEffectRequired(this)},t.prototype.isSelectionEffectRequired=function(){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isSelectionEffectRequired(this)},t.prototype.updateHighlightOrSelectionSettings=function(){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateHighlightOrSelectionSettings(this.DataGroupInfo)},t.prototype.setRangePaddingValue=function(){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.setRangePaddingValue(this.getChartProperties(),this.comboChartObj.model)},t.prototype.updateAxisLabelFormat=function(){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.updateAxisLabelFormat(this.getChartProperties(),this.comboChartObj.model)},t.prototype.getUpdatedSeriesAxisCount=function(){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getUpdatedSeriesAxisCount(this.getChartProperties().ChartSeriesTypeInfo)},t.prototype.isPercentChartType=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isPercentChartType(n)},t.prototype.isMarkerVisible=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isMarkerVisible(n)},t.prototype.isLineStyleVisible=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isLineStyleVisible(n)},t.prototype.axisTypevisible=function(n,t){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.axisTypevisible(n,this.getChartProperties().ChartSeriesTypeInfo,t)},t.prototype.isDistributionType=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isDistributionType(n)},t.prototype.getTotalPointsValueAsPercentType=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getTotalPointsValueAsPercentType(n,this.getChartProperties().ChartSeriesTypeInfo,this.DataGroupInfo)},t.prototype.isBarChartType=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isBarChartType(n)},t.prototype.onAxisLabelClick=function(n){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.onAxisLabelClick(n,this,this.designerInstance)},t.prototype.onAxisLabelMouseMove=function(n){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.onAxisLabelMouseMove(n,this)},t.prototype.getBindedColumns=function(){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getBindedColumns(this)},t.prototype.getBreadcrumbDatasource=function(){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getBreadcrumbDatasource(this)},t.prototype.isTrendlineSupportChartType=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isTrendlineSupportChartType(n)},t.prototype.getInitialSelection=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getInitialSelection(n,this)},t.prototype.ignoreEmptyPoints=function(n,t,i,r){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.ignoreEmptyPoints(n,t,i,r)},t.prototype.addToCacheCollection=function(n){this.designerInstance.loadFromCache||this.designerInstance.addToWidgetCacheCollection(this.Name,n,!0)},t.prototype.submitForecastSettings=function(){this.chartHelper.submitForecastSettings()},t.prototype.renderingForecastSettingsProperties=function(n,t,i){this.chartHelper.renderingForecastSettingsProperties(n,t,i,this)},t.prototype.renderingForecastSeriesElement=function(n,t,i){this.chartHelper.renderingForecastSeriesElement(n,t,i,this)},t.prototype.disableForecastProperty=function(){this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.chartHelper.updateSinglePointForeCast(this.dataValues,this)},t.prototype.configureVirtualScrollSettings=function(n,t){var i=n.primaryYValue.length+n.secondaryYValue.length,r=t.widgetData.Data.length>0?JSON.parse(t.data):[];i>0&&n.columnValue.length>0&&!BoldBIDashboard.isNullOrUndefined(this.VirtualScrollSettings)&&r.length===this.VirtualScrollSettings.PageSize&&t.hasMoreRecords?(this.comboChartObj.model.primaryXAxis.enableScrollbar=!0,this.comboChartObj.model.primaryXAxis.pointsLength=this.getChartProperties().EnableSmoothScroll?this.maxRecordCount:400,this.comboChartObj.model.primaryXAxis._scrollLeft=0,this.comboChartObj.model.primaryXAxis.zoomPosition=0,this.comboChartObj.model.scrollChanged=this.bbdesigner$.proxy(this.scrollChanged,this)):this.comboChartObj.model.primaryXAxis.enableScrollbar=!1},t.prototype.scrollChanged=function(n){this.VirtualScrollSettings.StartIndex=n.data.startIndex+1;n.action="VirtualScroll";n.fieldInfoList=this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(this.DataGroupInfo);BoldBIDashboard.DashboardDesignerUtility.ChartHelper.WidgetDataFetch(n,this,this.designerInstance)},t.prototype.showScrollBar=function(){BoldBIDashboard.isNullOrUndefined(this.contentContainer)||this.contentContainer.find(".e-scroller").children(".e-scrollbar").show()},t.prototype.hideScrollBar=function(){BoldBIDashboard.isNullOrUndefined(this.contentContainer)||this.contentContainer.find(".e-scroller").children(".e-scrollbar").hide()},t.prototype.comboChartAxisRender=function(n){if(n.data.axis.valueType!=="Category"&&!n.data.axis.isStacked100&&n.data.axis.labelFormat!=="{value}%"&&n.data.axis.opposedPosition){var t=this.getChartProperties().Axis.SecondaryValueAxis.Format,i=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Prefix),this.DataGroupInfo.DataSourceName),r=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Suffix),this.DataGroupInfo.DataSourceName),u=isNaN(parseInt(t.FormatType,10))?t.FormatType:BoldBIDashboard.DashboardDesignerUtility.Serialization.getDataValueFormat(t.FormatType),f=isNaN(parseInt(t.Unit,10))?t.Unit:BoldBIDashboard.DashboardDesignerUtility.Serialization.getNumberFormat(t.Unit);n.data.label.Text=BoldBIDashboard.DashboardUtil.formattedText(n.data.label.Text,t.Culture,t.DecimalPoints,u,t.DecimalSeparator,t.GroupSeparator,i,r,f,!0,this.designerInstance,t.EnableLakhsAndCroreRep)}else if(n.data.axis.valueType!=="Category"&&!n.data.axis.isStacked100&&n.data.axis.labelFormat!=="{value}%"&&!n.data.axis.opposedPosition){var t=this.getChartProperties().Axis.PrimaryValueAxis.Format,i=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Prefix),this.DataGroupInfo.DataSourceName),r=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Suffix),this.DataGroupInfo.DataSourceName),u=isNaN(parseInt(t.FormatType,10))?t.FormatType:BoldBIDashboard.DashboardDesignerUtility.Serialization.getDataValueFormat(t.FormatType),f=isNaN(parseInt(t.Unit,10))?t.Unit:BoldBIDashboard.DashboardDesignerUtility.Serialization.getNumberFormat(t.Unit);n.data.label.Text=BoldBIDashboard.DashboardUtil.formattedText(n.data.label.Text,t.Culture,t.DecimalPoints,u,t.DecimalSeparator,t.GroupSeparator,i,r,f,!0,this.designerInstance,t.EnableLakhsAndCroreRep)}},t.prototype.onPrimaryAxisFormatClick=function(){var i=this,n=BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.PrimaryValueAxis.Format)?new MeasureFormatting:JSON.parse(JSON.stringify(this.getChartProperties().Axis.PrimaryValueAxis.Format)),t;n.FormatType=isNaN(parseInt(n.FormatType,10))?n.FormatType:BoldBIDashboard.DashboardDesignerUtility.Serialization.getDataValueFormat(n.FormatType);n.Unit=isNaN(parseInt(n.Unit,10))?n.Unit:BoldBIDashboard.DashboardDesignerUtility.Serialization.getNumberFormat(n.Unit);t=this.widgetHelper.getCurrentWidgetInstance();this.designerInstance.modules.formatDialog.openFormatDialog(n,t.dataGroupInfo.DataSourceName,function(n){var r=i.getChartProperties().Axis.PrimaryValueAxis.Format;r.Culture=n.Culture;r.DecimalPoints=n.DecimalPoints;r.DecimalSeparator=n.DecimalSeparator;r.GroupSeparator=n.GroupSeparator;r.FormatType=n.FormatType;r.Unit=n.Unit;r.Prefix=n.Prefix;r.Suffix=n.Suffix;r.EnableLakhsAndCroreRep=n.EnableLakhsAndCroreRep;t.getChartProperties().Axis.PrimaryValueAxis.Format=r;i.designerInstance.modules.serialization.notifyChange();t.refresh()})},t.prototype.onSecondaryAxisFormatClick=function(){var i=this,n=BoldBIDashboard.isNullOrUndefined(this.getChartProperties().Axis.SecondaryValueAxis.Format)?new MeasureFormatting:JSON.parse(JSON.stringify(this.getChartProperties().Axis.SecondaryValueAxis.Format)),t;n.FormatType=isNaN(parseInt(n.FormatType,10))?n.FormatType:BoldBIDashboard.DashboardDesignerUtility.Serialization.getDataValueFormat(n.FormatType);n.Unit=isNaN(parseInt(n.Unit,10))?n.Unit:BoldBIDashboard.DashboardDesignerUtility.Serialization.getNumberFormat(n.Unit);t=this.widgetHelper.getCurrentWidgetInstance();this.designerInstance.modules.formatDialog.openFormatDialog(n,t.dataGroupInfo.DataSourceName,function(n){var r=i.getChartProperties().Axis.SecondaryValueAxis.Format;r.Culture=n.Culture;r.DecimalPoints=n.DecimalPoints;r.DecimalSeparator=n.DecimalSeparator;r.GroupSeparator=n.GroupSeparator;r.FormatType=n.FormatType;r.Unit=n.Unit;r.Prefix=n.Prefix;r.Suffix=n.Suffix;r.EnableLakhsAndCroreRep=n.EnableLakhsAndCroreRep;t.getChartProperties().Axis.SecondaryValueAxis.Format=r;i.designerInstance.modules.serialization.notifyChange();t.refresh()})},t.prototype.toolTipForComboChart=function(n){if(this.widgetHelper.isMobileMode()){n.data.currentText="";return}var i=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getTooltipforCartesianChart(n,this),t=this.widgetHelper.generateToolTipTemplate(i,this.comboChartObj._id,parseInt("10000",10));BoldBIDashboard.isNullOrUndefined(t)||(n.data.currentText=t)},t.prototype.mouseLeaveEvent=function(){this.hideScrollBar()},t.prototype.mouseMoveEvent=function(n){this.setCursorType(n);this.showScrollBar();this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.view&&BoldBIDashboard.DashboardDesignerUtility.ChartHelper.changeTooltipElementPosition(this.comboChartItem.attr("id"),this)},t.prototype.setCursorType=function(n){var t;if(!BoldBIDashboard.isNullOrUndefined(n.data.id)&&n.data.id!==""&&(t=this.designerInstance.element.find("#"+n.data.id).parents(".e-datavisualization-chart"),!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0)){var u=t.find("#"+t.attr("id")+"_svg_SeriesCollection"),r=this.isHighlightEffectRequired(),i=r?r:this.getChartProperties().UrlLink.EnableLink;i&&this.isMarkerVisible(n.model.series)&&(i=n.data.id.includes("Point")||n.data.id.includes("drillLevel"));u.css({cursor:i?"pointer":"default"})}},t.prototype.comboChartLegendItemClick=function(n){BoldBIDashboard.DashboardDesignerUtility.ChartHelper.chartLegendItemClick(this.getChartProperties(),n,this.DataGroupInfo)},t.prototype.updateNoDataAvailable=function(){this.comboChartElement.hide();BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this);BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this)},t.prototype.wireEvents=function(){this.designerInstance.element.on("click",".boldbi-dashboard-combochart-trendline-add",this.bbdesigner$.proxy(this.addTrendLine,this));this.designerInstance.element.on("click",".boldbi-dashboard-combochart-trendline-edit",this.bbdesigner$.proxy(this.editTrendLine,this));this.designerInstance.element.on("click",".boldbi-dashboard-combochart-trendline-delete",this.bbdesigner$.proxy(this.deleteTrendLine,this));this.designerInstance.element.on("click",".e-combochart-axis-range-button",this.bbdesigner$.proxy(this.onAxisRangeClick,this));this.designerInstance.element.on("click",".e-combochart-valueLabel-button",this.bbdesigner$.proxy(this.onValueLabelCustomize,this));this.designerInstance.element.on("click",".e-advanced-comboChart-color-settings-button",this.bbdesigner$.proxy(this.openAdvancedColorSettings,this))},t.prototype.unwireEvents=function(){this.designerInstance.element.off("click",".boldbi-dashboard-combochart-trendline-add",this.bbdesigner$.proxy(this.addTrendLine,this));this.designerInstance.element.off("click",".boldbi-dashboard-combochart-trendline-edit",this.bbdesigner$.proxy(this.editTrendLine,this));this.designerInstance.element.off("click",".boldbi-dashboard-combochart-trendline-delete",this.bbdesigner$.proxy(this.deleteTrendLine,this));this.designerInstance.element.off("click",".e-combochart-axis-range-button",this.bbdesigner$.proxy(this.onAxisRangeClick,this));this.designerInstance.element.off("click",".e-combochart-valueLabel-button",this.bbdesigner$.proxy(this.onValueLabelCustomize,this));this.designerInstance.element.off("click",".e-advanced-comboChart-color-settings-button",this.bbdesigner$.proxy(this.openAdvancedColorSettings,this))},t.prototype.onAxisRangeClick=function(n){var t=n.target.classList.contains("SecondaryAxisRange"),i=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0]));this.designerInstance.modules.axisRangeSettings.openAxisRangeSettings("updateAxisRangeInfo",i,t)},t.prototype.onValueLabelCustomize=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),t=n.getChartProperties().ForecastProperties.ForecastSettings.IsEnable;BoldBIDashboard.isNullOrUndefined(n)||n.Type!==ControlType.ComboChart||this.designerInstance.modules.customValueLabelSettings.openValueLabelsettings(n,"updateValueLabel",n.getChartProperties().CustomValueLabels,t)},t.prototype.updateValueLabel=function(n){var i,f,u,e,r,t;for(this.getChartProperties().CustomValueLabels=n,i=this.comboChartObj.model.series,f=this.ContentContainer.find(".e-datavisualization-chart"),u=0;u<f.length;u++){if(e=this.bbdesigner$(f[u]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(n)){if(this.getChartProperties().ShowValueLabels)for(t=0;t<i.length;t++)i[t].marker.dataLabel.visible=!0}else for(r=0;r<n.length;r++)for(t=0;t<i.length;t++)n[r].Name===i[t].legendCaption&&n[r].UniqueColumnName===i[t].id&&(i[t].marker.dataLabel.visible=this.getChartProperties().ShowValueLabels?n[r].IsEnabled:!1);e.redraw()}this.designerInstance.modules.serialization.notifyChange()},t.prototype.renderValueLabelsSetting=function(n,t,i){this.chartHelper.renderShowValueLabel(n,t,i)},t.prototype.updateAxisRangeInfo=function(n){for(var i,r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designPanelInstance.selectedReportItems[0]),t=n.axisRangeInfo,f=r.contentContainer.find(".e-datavisualization-chart"),u=0;u<f.length;u++)i=this.bbdesigner$(f[u]).data("BoldBIDashboardChart"),n.isSecondaryAxis?(i.model.axes[0].range={min:t.MinValue!==""?Number(t.MinValue):null,max:t.MaxValue!==""?Number(t.MaxValue):null,interval:t.Interval!==""?Number(t.Interval):null},r.getChartProperties().SecondaryAxisRange=t):(i.model.primaryYAxis.range={min:t.MinValue!==""?Number(t.MinValue):null,max:t.MaxValue!==""?Number(t.MaxValue):null,interval:t.Interval!==""?Number(t.Interval):null},r.getChartProperties().PrimaryAxisRange=t),i.redraw();this.designerInstance.modules.serialization.notifyChange()},t.prototype.getChartProperties=function(){return this.widgetJson},t.prototype.comboChartItemDispose=function(){BoldBIDashboard.isNullOrUndefined(this.comboChartObj)||(this.comboChartObj.destroy(),this.comboChartObj=null);this.designerInstance.element.find("#"+this.comboChartItem.attr("id")+"_toolTip").parent().remove();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.ComboChart)},t.prototype.destroy=function(){this.unwireEvents()},t.prototype.getColorFields=function(){return[{Name:WidgetProperty.FillColor,DisplayName:"Fill",ColorPicker:ColorSetColorPickers.NormalColorPicker}]},t.prototype.isAdvanceColorSupported=function(){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.isAdvanceColorSupported(this.getChartProperties().ChartSeriesTypeInfo)},t.prototype.renderDefaultColorSettings=function(n,t,i){var r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designPanelInstance.selectedReportItems[0]));BoldBIDashboard.isNullOrUndefined(r)||r.Type!==ControlType.ComboChart||this.chartHelper.renderColorSettings(n,t,i,r)},t.prototype.getColorCustomization=function(){return this.getChartProperties().ColorCustomization},t.prototype.updateColorCustomizationSettings=function(n){this.chartHelper.updateColorCustomizationSettings(n)},t.prototype.showAdvanceColorPalette=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),i;t.getChartProperties().EnableColorSettings=n.isChecked;t.isAdvanceColorSupported()&&n.isInteraction&&(i=t.defaultPaletteContainer.find("#"+t.categoryId+"_color_settings_button"),n.isChecked?(i.removeAttr("disabled"),t.openAdvancedColorSettings(null)):(i.attr("disabled","disabled"),t.getChartProperties().ColorCustomization=null,t.resetChartColorUpdateProperties(),t.updateAdvancedComboColor()));this.designerInstance.modules.serialization.notifyChange()},t.prototype.updateLegendVisibilityObject=function(n){var t=!this.getChartProperties().EnableColorSettings&&this.getChartProperties().ShowLegend&&this.comboChartObj.model.series.length>1,i=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetElementVisibility(this.CellInfo);!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(this.getChartProperties().ColorCustomization)&&this.isAdvanceColorSupported()&&this.getChartProperties().EnableColorSettings&&this.getChartProperties().ColorCustomization.Type===ColorCustomizationType.Individual?n.model.legend.visible=i.ShowLegend?t:!1:this.getChartProperties().EnableColorSettings||(n.model.legend.visible=i.ShowLegend?t:!1)},t.prototype.openAdvancedColorSettings=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),t=new ColorCustomization,r=new BoldBIDashboard.DashboardDesignerUtility.AdvancedColorCustomization(this.designerInstance),u=n.DataGroupInfo.FieldContainers[2].FieldInfos.length===0?["Gradient","Rule"]:null,f=n.getChartProperties().DefaultColors.length>0?n.getChartProperties().DefaultColors[0].Color:this.defaultColorPalette[0],i;BoldBIDashboard.isNullOrUndefined(n.getChartProperties().ColorCustomization)?t.Type=ColorCustomizationType.Gradient:t=this.bbdesigner$.extend(!0,{},n.getChartProperties().ColorCustomization);t=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getSolidColorInfo(t,n);i={colorCustomizationObj:t,DataGroupInfo:n.DataGroupInfo,colorFields:n.colorFields,colorTypeCollection:u,defaultBasedOnField:n.getDefaultBasedOnFieldForColorSettings(),defaultColorFill:f,isDefaultFormat:!0};r.populateUI(i,n,"updateAdvancedColorSettings")},t.prototype.getDefaultBasedOnFieldForColorSettings=function(){for(var t,r,f,i,u="",n=0;n<this.getChartProperties().ChartSeriesTypeInfo.length;n++)if(this.getChartProperties().ChartSeriesTypeInfo[n].ChartType==="Column"||this.getChartProperties().ChartSeriesTypeInfo[n].ChartType==="Bar"){u=this.getChartProperties().ChartSeriesTypeInfo[n].UniqueColumnName;break}for(t=0;t<this.DataGroupInfo.FieldContainers.length;t++)for(r=0;r<this.DataGroupInfo.FieldContainers[t].FieldInfos.length;r++)if(f=this.DataGroupInfo.FieldContainers[t].FieldInfos,i=f.filter(function(n){return n.UniqueColumnName===u}),!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0)return i[0];return null},t.prototype.updateAdvancedColorSettings=function(n,t){this.chartHelper.updateAdvancedColorSettings(n,t)},t.prototype.getDefaultColorSettings=function(n){return BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getDefaultColorSettings(n,this.getChartProperties())},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.ComboChartItem",InternalComboChartReportItem,window);BoldBIDashboard.DashboardDesignerUtility.ComboChartItem.prototype.initialize();__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalTextFilter=function(n){function t(t){var i=n.call(this,t,"TextFilter","e-textfilter-item")||this;return i.textFilterItem=null,i.multiSelectionTimer=null,i.locale=null,i.bbdesigner$=i.designerInstance.bbdesigner$,i.locale=t.getLocalizationContent(),i.widgetJson=new TextFilterProperties(t),i.widgetJson.FilterSettings.ActAsMasterWidget=!0,i.designerId=i.designerInstance._id,i.propertyPanel=t.modules.propertyPanel,n.prototype.initializeVirtualScrollSettings.call(i,1,1),i.isVisualWidget=!1,i}return __extends(t,n),t.prototype.getWidgetImage=function(){return'<svg width="100%" height="100%" viewBox="0 0 156 58" fill="none" xmlns="http://www.w3.org/2000/svg">    <rect width="156" height="58" fill="var(--designer-container-background)"/>        <rect x="17.5" y="13.5" width="121" height="31" rx="2.5" fill="var(--designer-container-background)" stroke="var(--widget-notconfigured-image-background1)" stroke-width="3"/>            <path fill-rule="evenodd" clip-rule="evenodd" d="M121.1 33.2C118.283 33.2 116 30.9167 116 28.1C116 25.2833 118.283 23 121.1 23C123.917 23 126.2 25.2833 126.2 28.1C126.2 29.2921 125.791 30.3887 125.106 31.2571L127.824 33.9757C128.059 34.2101 128.059 34.59 127.824 34.8243C127.59 35.0586 127.21 35.0586 126.976 34.8243L124.257 32.1056C123.389 32.791 122.292 33.2 121.1 33.2ZM123.819 30.8959C123.117 31.5792 122.157 32 121.1 32C118.946 32 117.2 30.2539 117.2 28.1C117.2 25.9461 118.946 24.2 121.1 24.2C123.254 24.2 125 25.9461 125 28.1C125 29.1574 124.579 30.1165 123.896 30.819C123.882 30.8305 123.869 30.8428 123.856 30.8557C123.843 30.8687 123.831 30.8821 123.819 30.8959Z" fill="var(--widget-notconfigured-image-background3)"/>            <path d="M125.106 31.2571L125.027 31.1951L124.972 31.2649L125.035 31.3278L125.106 31.2571ZM127.824 33.9757L127.895 33.905V33.905L127.824 33.9757ZM124.257 32.1056L124.328 32.0349L124.265 31.972L124.195 32.0271L124.257 32.1056ZM123.819 30.8959L123.889 30.968L123.896 30.96L123.819 30.8959ZM123.896 30.819L123.96 30.8962L123.968 30.8887L123.896 30.819ZM115.9 28.1C115.9 30.9719 118.228 33.3 121.1 33.3V33.1C118.339 33.1 116.1 30.8614 116.1 28.1H115.9ZM121.1 22.9C118.228 22.9 115.9 25.2281 115.9 28.1H116.1C116.1 25.3386 118.339 23.1 121.1 23.1V22.9ZM126.3 28.1C126.3 25.2281 123.972 22.9 121.1 22.9V23.1C123.861 23.1 126.1 25.3386 126.1 28.1H126.3ZM125.184 31.319C125.883 30.4337 126.3 29.3154 126.3 28.1H126.1C126.1 29.2689 125.699 30.3438 125.027 31.1951L125.184 31.319ZM125.035 31.3278L127.754 34.0465L127.895 33.905L125.176 31.1864L125.035 31.3278ZM127.754 34.0465C127.949 34.2417 127.949 34.5583 127.754 34.7536L127.895 34.895C128.168 34.6216 128.168 34.1784 127.895 33.905L127.754 34.0465ZM127.754 34.7536C127.558 34.9488 127.242 34.9488 127.046 34.7536L126.905 34.895C127.178 35.1684 127.622 35.1684 127.895 34.895L127.754 34.7536ZM127.046 34.7536L124.328 32.0349L124.186 32.1763L126.905 34.895L127.046 34.7536ZM121.1 33.3C122.315 33.3 123.434 32.8829 124.319 32.1841L124.195 32.0271C123.344 32.6991 122.269 33.1 121.1 33.1V33.3ZM123.749 30.8242C123.065 31.4901 122.13 31.9 121.1 31.9V32.1C122.184 32.1 123.168 31.6683 123.889 30.9676L123.749 30.8242ZM121.1 31.9C119.001 31.9 117.3 30.1987 117.3 28.1H117.1C117.1 30.3091 118.891 32.1 121.1 32.1V31.9ZM117.3 28.1C117.3 26.0013 119.001 24.3 121.1 24.3V24.1C118.891 24.1 117.1 25.8909 117.1 28.1H117.3ZM121.1 24.3C123.199 24.3 124.9 26.0013 124.9 28.1H125.1C125.1 25.8909 123.309 24.1 121.1 24.1V24.3ZM124.9 28.1C124.9 29.1303 124.49 30.0647 123.824 30.7493L123.968 30.8887C124.668 30.1683 125.1 29.1845 125.1 28.1H124.9ZM123.926 30.9265C123.937 30.9156 123.948 30.9054 123.96 30.8958L123.832 30.7423C123.816 30.7557 123.8 30.77 123.785 30.785L123.926 30.9265ZM123.896 30.96C123.905 30.9485 123.916 30.9373 123.926 30.9265L123.785 30.785C123.77 30.8001 123.756 30.8157 123.742 30.8318L123.896 30.96Z" fill="var(--widget-notconfigured-image-background3)"/><\/svg>'},t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.filters,GroupId:"1093107b-a5c1-4bd3-83cb-ec6ccd40a031",Items:[{id:"42051973-9edd-42af-a66b-dcf8f8ae0349",widgetName:"TextFilter",widgetDisplayName:n.itemPanel.widgetTitle.textFilter,cssClass:"bbi-widgeticon bbi-designer-widget-textfilter",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.TextFilter",searchCategory:["TextFilter","filters"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.textFilter,description:n.itemPanel.widgetDescription.textFilterDesc,dataRequirement:n.itemPanel.widgetDataRequirements.filtersDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.TextFilterProperties",minRowSpan:3}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){this.setContainerDefaultProperties();this.renderTextFilterContainer(t);this.IsRendered=!0},t.prototype.update=function(n){this.updateTitleSubtitleTheme();this.updateTextboxfilterItemData(n);this.updateThemeInWidget(this.designerInstance.isDarkTypeTheme())},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);this.refreshTextFilter()},t.prototype.applyWidgetTheme=function(n){this.updateTitleSubtitleTheme();this.updateThemeInWidget(n);this.refreshTextFilter()},t.prototype.updateTitleSubtitleTheme=function(){var n=this.Type.toLowerCase(),t=this.designerInstance.modules.themeHelper.getDDWidgetHeaderTitle(n),i=this.designerInstance.modules.themeHelper.getDDWidgetHeaderSubTitle(n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getTextFilterProperties().ContainerSettings.TextColor,t);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,i);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.updateThemeInWidget=function(n){if(!BoldBIDashboard.isNullOrUndefined(this.textFilterElement)){var t=this.designerId+"textFilterElement"+this.widgetJson.UniqueName,i=this.designerId+this.widgetJson.UniqueName+"Style";this.textFilterElement.addClass("e-textfilter-dbrd-theme");this.themeHelper.applyTextFilterTheme(this,t,n,i);this.textFilterElement.css("background","transparent")}},t.prototype.updateTextboxfilterItemData=function(n){var i,t,r,u,f;if(BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this),this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo),BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error)BoldBIDashboard.isNullOrUndefined(n.Message)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.widgetContainerHelper.showControlError(this,n));else if(!n.noDataAvailable){if(this.textFilterItem.show(),i=this.cellInfo.RowSpan>2?30:25,t=BoldBIDashboard.isNullOrUndefined(n.selectedParameterValue)?null:JSON.parse(n.selectedParameterValue),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.isNullOrUndefined(this.textFilterElement)){r=this.designerId+"textFilterElement"+this.widgetJson.UniqueName;u=this.designerId+"icon"+this.widgetJson.UniqueName;this.textFilterElement=BoldBIDashboard.buildTag("input.e-Textboxfilter-element e-textbox","",{"font-size":"12px",width:this.textFilterItem.width().toString(),height:i.toString(),float:"left"},{id:r,type:"text",autocomplete:"off",placeholder:"search"});this.searchIcon=BoldBIDashboard.buildTag("div","",{width:"30px",height:"15px","margin-top":"-22px",float:"right",color:"lightgray",cursor:"pointer"},{id:u+"_popup_container_searchIcon","class":"e-icon e-search"});this.textFilterItem.append(this.textFilterElement);this.textFilterItem.append(this.searchIcon);this.textFilterItem.css("padding","5px");this.textFilterElement.on("input",this.bbdesigner$.proxy(this.textboxItemSelected,this));this.searchIcon.on("click",this.bbdesigner$.proxy(this.onSearchClose,this));this.refreshTextFilter()}f=this.DataGroupInfo.FieldContainers[0].FieldInfos[0];f.IsParameterField&&this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&t.length>0&&this.updateSelectedValue(t,!1);this.updateInitialSelection()}},t.prototype.onSearchClose=function(){this.searchIcon.find(".e-close_01")&&(this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this),this.clearFilter(undefined,undefined,!0))},t.prototype.textboxItemSelected=function(){var n=this,t=this.textFilterElement.val()!==""?1500:0;BoldBIDashboard.isNullOrUndefined(this.multiSelectionTimer)||clearTimeout(this.multiSelectionTimer);this.multiSelectionTimer=setTimeout(function(){n.updateSelectedValue("",!0)},t)},t.prototype.updateInitialSelection=function(){this.initialSelectionForTextFilter()},t.prototype.initialSelectionForTextFilter=function(){if(!BoldBIDashboard.isNullOrUndefined(this.textFilterElement&&this.textFilterElement.val()!=="")){var t=[],n=this.DataGroupInfo.FieldContainers[0].FieldInfos[0];n.IsParameterField?!BoldBIDashboard.isNullOrUndefined(this.textFilterElement)&&this.getTextFilterProperties().SelectedFilterValues.length>0&&(this.updateTextFilterValue(n,t),this.onvaluechange()):this.getTextFilterProperties().FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(this.textFilterElement)&&this.getTextFilterProperties().SelectedFilterValues.length>0?(this.updateTextFilterValue(n,t),this.onvaluechange()):this.removeSelection()}},t.prototype.updateTextFilterValue=function(n,t){t===void 0&&(t=[]);t=this.getSelectedItems();t.length>0&&this.textFilterElement.val(t)},t.prototype.getSelectedItems=function(){for(var u=[],n=0;n<this.getTextFilterProperties().SelectedFilterValues.length;n++){var t=this.getTextFilterProperties().SelectedFilterValues[n],i=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],f=t.InitialDimensionFilter.DimesnionFilterCondition,e=i.FieldActualType==="bbi-designer-dataset-string"||i.FieldActualType==="bbi-designer-dataset-number"||i.FieldActualType==="bbi-designer-dataset-boolean",r=e?this.getFilterInformationList(t.InitialDimensionFilter.Text):t.InitialDateFilter.DisplayDateFilterList;u=f==="EndsWith"?"*"+r:f==="StartsWith"?r+"*":r}return u},t.prototype.getFilterInformationList=function(n){for(var i=n,t=0;t<n.length;t++)i[t]=n[t].toString();return i},t.prototype.onvaluechange=function(){this.textFilterElement.val()!==""?this.searchIcon.addClass("e-close_01").removeClass("e-search"):this.searchIcon.addClass("e-search").removeClass("e-close_01")},t.prototype.updateControlContainerPadding=function(){if(!BoldBIDashboard.isNullOrUndefined(this.controlContainer)&&this.controlContainer.length>0){var n=this.controlContainer.find(".bbi-dbrd-control-container-wrapper");n[0].style.padding="0px 8px"}},t.prototype.getDefaultMeasureFormat=function(){return null},t.prototype.getFieldView=function(){var n=[BoldBIDashboard.Dashboard.SupportedDataType.String];return[{name:"Dimensions",displayName:"Dimensions",supportedDataTypes:n},]},t.prototype.clearFilter=function(n,t,i){this.getTextFilterProperties().SelectedFilterValues=[];!BoldBIDashboard.isNullOrUndefined(n)&&(BoldBIDashboard.isNullOrUndefined(n)||n)||this.removeSelection();BoldBIDashboard.isNullOrUndefined(i)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):i&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);t||(this.designerInstance.modules.serialization.notifyChange(),this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName))},t.prototype.removeSelection=function(){BoldBIDashboard.isNullOrUndefined(this.textFilterElement)||(this.textFilterElement.val(""),this.searchIcon.addClass("e-search").removeClass("e-close_01"))},t.prototype.processFilterInformation=function(n){var u=n.filters,i;if(u[0].values[0]!==""){BoldBIDashboard.isNullOrUndefined(this.searchIcon)||this.searchIcon.addClass("e-close_01").removeClass("e-search");var f=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],e=[],t=u[0].values[0],r=this.fieldTypeHanlder(f,t),o=r[0],s=r[1],h=r[2];return t=h,i=[],t!==""&&(i=e[0]=t.length>0?t:""),i={FilterInfo:e,Action:o,IsStdDateTime:!1,IsRange:!1},this.widgetJson.SelectedFilterValues=[],this.getTextFilterProperties().SelectedFilterValues=[this.masterFilterWindowInstance.updateInitialFiltersForFilterControls(f,this.widgetJson.UniqueName,s,i)],!0}},t.prototype.fieldTypeHanlder=function(n,t){var i=InitialDimensionFilterCondition.Contains;t.indexOf("*")!==-1&&(t.match(/[*]/g).length===2?(i=InitialDimensionFilterCondition.Contains,t=t.replace(/[*]/g,"")):t.lastIndexOf("*")===t.length-1?(i=InitialDimensionFilterCondition.StartsWith,t=t.replace(/[*]/g,"")):(i=InitialDimensionFilterCondition.EndsWith,t=t.replace(/[*]/g,"")));var r=n.FieldActualType==="bbi-designer-dataset-string"||n.FieldActualType==="bbi-designer-dataset-number"||n.FieldActualType==="bbi-designer-dataset-boolean",u=r?"bbi-designer-dataset-string":n.FieldActualType,f=r?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,i):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Include);return[f,u,t]},t.prototype.updateSelectedValue=function(n,t){var f,i;if(this.textFilterElement.val()!==""){this.searchIcon.addClass("e-close_01").removeClass("e-search");var r=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],u=[],e=this.textFilterElement.val(),o=this.fieldTypeHanlder(r,e),s=o[0],h=o[1],c=o[2];if(e=c,f=[],this.textFilterElement.val()!==""&&(f=u[0]=t?e:n,s=u.length>0?s:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains)),f={FilterInfo:u,Action:s,IsStdDateTime:!1,IsRange:!1},this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;this.getTextFilterProperties().SelectedFilterValues=[this.masterFilterWindowInstance.updateInitialFiltersForFilterControls(r,this.widgetJson.UniqueName,h,f)];t&&(r.IsParameterField&&this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design?(i=new SelectedParameterValue,i.SelectedValue=u,i.DataSourceName=this.DataGroupInfo.DataSourceName,i.ParameterId=r.Id,this.designerInstance.modules.dynamicParameterPanel.applyParametersForFilterWidgets(i,this.Name)):(this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this),this.masterFilterWindowInstance.doInteraction(this.getTextFilterProperties().UniqueName),this.designerInstance.modules.serialization.notifyChange()))}else this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this),this.clearFilter(undefined,undefined,!0)},t.prototype.renderTextFilterContainer=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));this.textFilterItem=BoldBIDashboard.buildTag("div.e-textfilteritem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder,overflow:"hidden"},{id:this.designerId+"textfilterItem"+this.widgetJson.UniqueName});this.contentContainer.append(this.textFilterItem);this.controlContainer.data("widgetInstance",this);!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.TextFilter)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.getPropertyPanelItems=function(){return this.gettextboxfilterpropertypanel()},t.prototype.getJson=function(){return this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t)},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateTextFilterProperties(n,t,i,r)},t.prototype.setContainerDefaultProperties=function(){var t=n.prototype.getContainerSettings.call(this);t.EnableImageExport=t.EnablePdfExport=t.EnableExcelExport=t.EnableCsvExport=!1;t.ShowMaximize=!1;t.PinWidget=!1;t.ViewData=!1},t.prototype.updateTextFilterProperties=function(n,t,i,r){var o=!1,u,f,s,e;switch(n){case"Name":this.widgetJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,i);break;default:o=!0}if(!o){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(u=this.designPanelInstance.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)s=u[f],s.attr("id")===this.controlContainer.attr("id")&&(e=this.bbdesigner$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"TextFilter",i));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-textfilter-item",this.designerId+"_"+this.widgetJson.UniqueName,[n,i,t,r],[n,t,i,r])}},t.prototype.refreshTextFilter=function(){if(!BoldBIDashboard.isNullOrUndefined(this.textFilterElement)){this.textFilterElement.css("width","100%");var n=this.cellInfo.RowSpan>2?30:25;this.setTextFilterTop(n)}},t.prototype.setTextFilterTop=function(n){if(this.cellInfo.RowSpan>1){var i=n-2,r=this.widgetJson.ContainerSettings.ShowHeader?this.controlContainer.find(".bbi-dbrd-control-header").height():0,t=(this.controlContainer.innerHeight()-(r+11+i))/2;t=t<0?0:t;this.textFilterItem.css("padding","4px 0px 0px 0px");this.contentContainer.css({padding:"0px",overflow:"visible"});this.controlContainer.find(".bbi-dbrd-control-container-wrapper").css("padding-top",t+"px");this.controlContainer.find("#"+this.textFilterElement.attr("id")+"_wrapper").css({height:n+"px"})}else this.textFilterItem.css("padding","0px"),this.contentContainer.css({padding:"0px",overflow:"hidden"}),this.controlContainer.find(".bbi-dbrd-control-container-wrapper").css("padding-top","0px")},t.prototype.gettextboxfilterpropertypanel=function(){var n=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.getTextFilterProperties().FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo,this.widgetJson.ContainerSettings);return this.containerPropertyItem=n.containerProperties,n.propertyGridItems.Header=this.getTextFilterProperties().ContainerSettings.Title,n.propertyGridItems.SubTitle=this.getTextFilterProperties().ContainerSettings.SubTitle,n.propertyGridItems.Description=this.getTextFilterProperties().ContainerSettings.Description,n.propertyGridItems.Type="TextFilter",this.bbdesigner$.each(n.containerActionsProperty.Items,function(n,t){(t.name==="ShowMaximize"||t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ImageExport"||t.name==="PDFExport"||t.name==="ViewData"||t.name==="PinWidget")&&(t.isVisible=!1)}),this.bbdesigner$.each(n.containerSettingsProperty.Items,function(n,t){(t.name==="ShowWidgetBackgroundImage"||t.name==="WidgetBackgroundImageMode"||t.name==="WidgetBackgroundImageSource"||t.name==="WidgetBackgroundImageBrowse"||t.name==="WidgetBackgroundImageURL")&&(t.isVisible=!1)}),n.propertyGridItems.Items=[n.filterSettingsProperty,n.containerSettingsProperty,n.containerActionsProperty],n.propertyGridItems},t.prototype.getTextFilterProperties=function(){return this.widgetJson},t.prototype.onFieldDragDrop=function(n,t,i){return this.onFieldDragDropped(n,this.DataGroupInfo,t,i)},t.prototype.onFieldDragDropped=function(n,t,i){if(BoldBIDashboard.isNullOrUndefined(i))return!0;return!0},t.prototype.onFieldSettingsClick=function(n,t){for(var r,i=0;i<t.length;i++)r=t[i].Name,(r==="Sort"||r==="DimensionFilters")&&(t[i].IsVisible=!1);return t},t.prototype.getFieldContainer=function(){var n=new BoldBIDashboard.Dashboard.FieldContainerForUI;return n.Name="Column",n.DisplayName=this.locale.fieldContainer.column,n.ContainerType=FieldContainerType.Non_Numeric,n.CategoryCount=1,n.Required=!0,[n]},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.TextFilter",InternalTextFilter,window);BoldBIDashboard.DashboardDesignerUtility.TextFilter.prototype.initialize();InternalValueLabelSettings=function(){function n(n){this.dashboardDesigner=null;this.locale=null;this.customValueLabelSettingsDialog=null;this.targetMethod=null;this.chartObj=null;this.accChartObj=[];this.targetInstance=null;this.customValueLabelInfo=null;this.isEnableForecast=!1;this.isShapeType=!1;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.dashboardDesigner._id;this.renderValueLabelSettings();this.wireEvents()}return n.prototype.renderValueLabelSettings=function(){var t,n,i,r,u,f,e;this.customValueLabelSettingsDialog=BoldBIDashboard.buildTag("div.bbi-userselect","",{},{id:this.id+"_ValueLabel_settings"});t=BoldBIDashboard.buildTag("div","",{});n=BoldBIDashboard.buildTag("table","",{width:"100%"},{id:this.id+"_valueLabel_settings_title"});this.initializeSeriesTypeTitle(n);i=BoldBIDashboard.buildTag("div","",{height:"256px",width:"100%"},{});n.append(i);this.valueLabelContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{height:"255px",width:"100%",display:"block"},{id:this.id+"_valueLabel_settings_container"});r=BoldBIDashboard.buildTag("div","",{});this.valueLabelScrollElement=BoldBIDashboard.buildTag("div","",{height:"252px",width:"100%"},{id:this.id+"_valueLabel_settings_elements"});u=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.dashboardDesigner.getLocalizationContent().dialogOptions.cancelButtonText,{float:"right"},{id:this.id+"_valueLabel_settings_cancel",type:"button"});f=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.dashboardDesigner.getLocalizationContent().dialogOptions.okButtonText,{float:"right"},{id:this.id+"_valueLabel_settings_ok",type:"button"});r.append(this.valueLabelScrollElement);this.valueLabelContainer.append(r);i.append(this.valueLabelContainer);t.append(n);this.customValueLabelSettingsDialog.append(t);this.dashboardDesigner.element.append(this.customValueLabelSettingsDialog);this.customValueLabelSettingsDialog.BoldBIDashboardDialog({title:"Chart Value Label Settings",width:400,minWidth:400,height:"auto",minHeight:320,enableResize:!1,containment:"#"+this.id,target:"#"+this.id,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner",close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),closeIconTooltip:this.dashboardDesigner.getLocalizationContent().dialogOptions.closeButtonText});e=this.dashboardDesigner.element.find("#"+this.id+"_ValueLabel_settings_foot");e.append(u).append(f);this.valueLabelContainer.BoldBIDashboardScroller({height:"255px",scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,enableTouchScroll:!0,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize})},n.prototype.initializeSeriesTypeTitle=function(n){var t=BoldBIDashboard.buildTag("table","",{"border-collapse":"collapse",width:"100%"},{}),i=BoldBIDashboard.buildTag("th.boldbi-dashboarddesigner-chart-valuelabel-title bbi-designer-fontfamily","Series Name",{},{}),r=BoldBIDashboard.buildTag("th.boldbi-dashboarddesigner-chart-valuelabel-charttype-column bbi-designer-fontfamily",this.locale.propertyPanel.basicSettings.showValueLabel,{},{});t.append(i);t.append(r);n.append(t)},n.prototype.openValueLabelsettings=function(n,t,i,r){var f,u,e;if(this.resetCustomValueLabelSettings(),this.targetInstance=n,this.targetMethod=t,this.renderValueLabelSettings(),this.isEnableForecast=r,this.isShapeType=BoldBIDashboard.isNullOrUndefined(this.targetInstance.comboChartObj)?this.targetInstance.isShapeChartType(this.targetInstance.widgetJson.ChartType):!1,!BoldBIDashboard.isNullOrUndefined(this.isShapeType)&&this.isShapeType)for(f=this.targetInstance.ContentContainer.find(".e-datavisualization-chart"),u=0;u<f.length;u++)e=this.bbdesigner$(f[u]).data("BoldBIDashboardChart"),BoldBIDashboard.isNullOrUndefined(e)||this.accChartObj.push(e.model.series[0]);else this.chartObj=BoldBIDashboard.isNullOrUndefined(n.comboChartObj)?this.targetInstance.chartObj:n.comboChartObj;this.customValueLabelInfo=BoldBIDashboard.isNullOrUndefined(i)?!BoldBIDashboard.isNullOrUndefined(this.isShapeType)&&this.isShapeType?this.getValueLabelsInfo(this.accChartObj):this.getValueLabelsInfo(this.chartObj.model.series):JSON.parse(JSON.stringify(i));this.valueLabelScrollElement.empty();this.customValueLabelSettingsDialog.data("BoldBIDashboardDialog").open();this.populateValueLabelInfo();this.wireEvents()},n.prototype.updateValueLabels=function(){var n=this.isShapeType?this.getValueLabelsInfo(this.accChartObj):this.getValueLabelsInfo(this.chartObj.model.series);BoldBIDashboard.isNullOrUndefined(this.targetInstance)||(BoldBIDashboard.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[n]),this.customValueLabelSettingsDialog.data("BoldBIDashboardDialog").close(),this.unwireEvents())},n.prototype.wireEvents=function(){this.dashboardDesigner.element.on("click","#"+this.id+"_valueLabel_settings_ok",this.bbdesigner$.proxy(this.updateValueLabels,this));this.dashboardDesigner.element.on("click","#"+this.id+"_valueLabel_settings_cancel",this.bbdesigner$.proxy(this.closeValueLabelSettings,this))},n.prototype.unwireEvents=function(){this.dashboardDesigner.element.off("click","#"+this.id+"_valueLabel_settings_ok",this.bbdesigner$.proxy(this.updateValueLabels,this));this.dashboardDesigner.element.off("click","#"+this.id+"_valueLabel_settings_cancel",this.bbdesigner$.proxy(this.closeValueLabelSettings,this))},n.prototype.resetCustomValueLabelSettings=function(){this.targetInstance=null;this.targetMethod=null;this.customValueLabelInfo=null;this.accChartObj=[]},n.prototype.closeValueLabelSettings=function(){this.customValueLabelSettingsDialog.data("BoldBIDashboardDialog").close()},n.prototype.populateValueLabelInfo=function(){var r=BoldBIDashboard.buildTag("table","",{"border-collapse":"collapse",width:"100%","table-layout":"fixed"},{}),i=[],n,u,t,f;if(this.isShapeType||(i=this.chartObj.model.series),!this.isShapeType&&!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0)for(n=0;n<i.length;n++)u=i[n],this.renderRowElement(r,u,n,this.customValueLabelInfo[n]);if(!BoldBIDashboard.isNullOrUndefined(this.isShapeType)&&this.isShapeType&&!BoldBIDashboard.isNullOrUndefined(this.accChartObj))for(t=0;t<this.accChartObj.length;t++)f=this.accChartObj[t],this.renderRowElement(r,f,t,this.customValueLabelInfo[t],!0);this.valueLabelScrollElement.append(r);this.scrollerRefresh(this.valueLabelContainer)},n.prototype.scrollerRefresh=function(n){n.data("BoldBIDashboardScroller")&&n.data("BoldBIDashboardScroller").refresh()},n.prototype.getValueLabelsInfo=function(n){var r=[],u,t,i;if(!BoldBIDashboard.isNullOrUndefined(this.valueLabelScrollElement))for(u=this.valueLabelScrollElement.find(".e-chart-series-checkbox"),t=0;t<n.length;t++)i=u.eq(t).data("BoldBIDashboardCheckBox"),!BoldBIDashboard.isNullOrUndefined(this.isShapeType)&&this.isShapeType?r.push({Name:n[t].name,IsEnabled:BoldBIDashboard.isNullOrUndefined(i)?this.targetInstance.widgetJson.ShowValueLabels:i.model.checked,UniqueColumnName:n[t].id}):r.push({Name:n[t].legendCaption,IsEnabled:BoldBIDashboard.isNullOrUndefined(i)?this.targetInstance.widgetJson.ShowValueLabels:i.model.checked,UniqueColumnName:n[t].id});return r},n.prototype.renderRowElement=function(n,t,i,r,u){var f=BoldBIDashboard.buildTag("tr","",{width:"100%",height:"50px"},{id:this.id+"_chart_label_row"+i}),h=BoldBIDashboard.buildTag("td.boldbi-dashboarddesigner-chart-valuelabel-series-column bbi-designer-fontfamily","",{},{}),e=BoldBIDashboard.buildTag("span.e-chart-series-name",u?t.name:t.legendCaption,{},{uniquecolumnname:t.UniqueColumnName}),l=this.dashboardDesigner.measureText(t.FieldName,150,{size:"12",fontStyle:"Normal",fontFamily:"Roboto"}).width+1>150,o,s,c;l&&(e.addClass("bbi-dbrd-designer-hoverable"),e.attr({"data-tooltip":u?t.name:t.legendCaption}));h.append(e);f.append(h);o=BoldBIDashboard.buildTag("td.boldbi-dashboarddesigner-chart-valuelabel-charttype-column bbi-designer-fontfamily","",{},{});s=BoldBIDashboard.buildTag("input.e-chart-series-checkbox","",{},{id:this.id+"_chart_secondary_axis"+i,isChecked:!BoldBIDashboard.isNullOrUndefined(r)&&r.Name===u?t.name:t.legendCaption?r.IsEnabled:this.targetInstance.widgetJson.ShowValueLabels});o.append(s);f.append(o);n.append(f);c=u?t.name:t.legendCaption;s.BoldBIDashboardCheckBox({checked:!BoldBIDashboard.isNullOrUndefined(r)&&c===r.Name?r.IsEnabled:this.targetInstance.widgetJson.ShowValueLabels,showRoundedCorner:!0})},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.CustomValueLabels",InternalValueLabelSettings,window);InternalResource=function(){function n(n){this.themeColorPalette=[];this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.themeColorPalette=n.modules.themeHelper.generateCustomPalette();this.colorCodeInfo=[]}return n.prototype.updateColorCodeInfo=function(n){var t=this,i=!1;BoldBIDashboard.isNullOrUndefined(n.ColorSets)||typeof n.ColorSets!="string"||(n.ColorSets=JSON.parse(n.ColorSets));!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.ColorSets)&&n.ColorSets.length>0&&n.ColorSets.forEach(function(n){var r,f,u;for(i=!1,r=0;r<t.colorCodeInfo.length;r++)if(t.colorCodeInfo[r].Id===n.Id){if(i=!0,t.colorCodeInfo[r].Color=t.dashboardDesigner.isViewMode()&&t.dashboardDesigner.model.enableTheme&&!n.IsGlobalyCustomized?BoldBIDashboard.isNullOrUndefined(t.themeColorPalette[n.ColorIndex])?t.themeColorPalette[n.ColorIndex%t.themeColorPalette.length]:t.themeColorPalette[n.ColorIndex]:n.Color,t.colorCodeInfo[r].NextIndex=n.NextIndex,t.colorCodeInfo[r].IsGlobalyCustomized=n.IsGlobalyCustomized,t.dashboardDesigner.isViewMode()&&t.dashboardDesigner.model.enableTheme){for(f=0;f<n.Items.length;f++)n.Items[f].IsGlobalyCustomized||(n.Items[f].Color=BoldBIDashboard.isNullOrUndefined(t.themeColorPalette[f])?t.themeColorPalette[f%t.themeColorPalette.length]:t.themeColorPalette[f]);t.colorCodeInfo[r].Items=n.Items}else t.colorCodeInfo[r].Items=n.Items;break}i||(u=new ColorCodeInfo,u.Id=n.Id,u.ColumnName=n.ColumnName,u.Color=n.Color,u.ColorIndex=n.ColorIndex,u.Items=n.Items,u.IsGlobalyCustomized=n.IsGlobalyCustomized,u.NextIndex=n.NextIndex,t.colorCodeInfo.push(u))})},n.prototype.updateColumnColorGlobally=function(n,t){for(var i=0;i<this.colorCodeInfo.length;i++)if(this.colorCodeInfo[i].Id===n){this.colorCodeInfo[i].Color=t;this.colorCodeInfo[i].IsGlobalyCustomized=!0;break}this.dashboardDesigner.modules.serialization.notifyChange()},n.prototype.updateValueColorGlobally=function(n,t){for(var u,i,f,r=0;r<this.colorCodeInfo.length;r++)if(this.colorCodeInfo[r].Id===n){for(u=this.colorCodeInfo[r].Items,i=0;i<u.length;i++)for(f=0;f<t.length;f++)u[i].Value===t[f].value&&(u[i].Color=t[f].color,u[i].IsGlobalyCustomized=!0);break}this.dashboardDesigner.modules.serialization.notifyChange()},n.prototype.getColumnColorCode=function(n){for(var t=0;t<this.colorCodeInfo.length;t++)if(this.colorCodeInfo[t].Id===n)return this.colorCodeInfo[t].Color;return null},n.prototype.getColumnColorCodeBasedonTheme=function(n){for(var t,i=0;i<this.colorCodeInfo.length;i++)if(this.colorCodeInfo[i].Id===n)return t=this.colorCodeInfo[i].ColorIndex,BoldBIDashboard.isNullOrUndefined(this.themeColorPalette[t])?this.themeColorPalette[t%this.themeColorPalette.length]:this.themeColorPalette[t];return null},n.prototype.updateGlobalColorCodePalette=function(){var n,i,t;for(this.themeColorPalette=this.dashboardDesigner.modules.themeHelper.generateCustomPalette(),n=0;n<this.colorCodeInfo.length;n++)if(!this.colorCodeInfo[n].IsGlobalyCustomized)for(this.colorCodeInfo[n].Color=BoldBIDashboard.isNullOrUndefined(this.themeColorPalette[n])?this.themeColorPalette[n%this.themeColorPalette.length]:this.themeColorPalette[n],i=this.colorCodeInfo[n].Items,t=0;t<i.length;t++)i[t].IsGlobalyCustomized||(i[t].Color=BoldBIDashboard.isNullOrUndefined(this.themeColorPalette[t])?this.themeColorPalette[t%this.themeColorPalette.length]:this.themeColorPalette[t])},n.prototype.getColumnValueColorCode=function(n,t){for(var u,r,i=0;i<this.colorCodeInfo.length;i++)if(this.colorCodeInfo[i].Id===n)for(u=this.colorCodeInfo[i].Items,r=0;r<u.length;r++)if(u[r].Value===t)return u[r].Color;return null},n.prototype.getAllValueColorCodes=function(n){for(var r,i,t=0;t<this.colorCodeInfo.length;t++)this.colorCodeInfo[t].Id===n&&(r=this.colorCodeInfo[t].Items,r.forEach(function(n){i.push({value:n.Value,color:n.Color})}));return i},n.getAllImageResource=function(n){var t=this;n.modules.util.doAjaxPost("POST",n.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.getdbrdresource,{action:BoldBIDashboard.DashboardUtil.DesignerAction.GetDashboardResource},{fnction:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(function(n){n.Status||(t.imageDataSource=JSON.parse(n.source))},this)},!1,!1,null,!1)},n.addImage=function(n,t,i){BoldBIDashboard.isNullOrUndefined(i)?BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(t)||!BoldBIDashboard.isNullOrUndefined(this.imageDataSource[n])||(this.imageDataSource[n]=t):this.imageDataSource=i},n.deleteImage=function(n,t,i){var r=this;BoldBIDashboard.isNullOrUndefined(n)||this.isImageFileInUse(t,n,i)||t.modules.util.doAjaxPost("POST",t.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.deleteimage,{action:BoldBIDashboard.DashboardUtil.DesignerAction.DeleteImage,data:JSON.stringify({fileName:"Image\\"+n})},{fnction:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(function(n){n.Status||delete r.imageDataSource[n.fileName]},this)})},n.isImageFileInUse=function(n,t,i){var r=n.modules.widgetHelper,f=BoldBIDashboard.isNullOrUndefined(r.getCurrentWidgetInstance())?i:r.getCurrentWidgetInstance().getJson().UniqueId,u=!1;return r.getAllWidgets().filter(function(n){if(n.Type==="Image"&&n.getJson().UniqueId!==f&&n.getJson().ImagePath===t){u=!0;return}}),u},n.getImage=function(n){return this.imageDataSource[n]},n.imageDataSource={},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.Dashboard.Resource",InternalResource,window);InternalChartTypeAndAxis=function(){function n(n){this.chartObj=null;this.chartSeriesTypeInfo=[];this.callMethod="";this.isEnableForecast=!1;this.designer=n;this.bbdesigner$=this.designer.bbdesigner$}return n.prototype.openChartSeriesTypeDialog=function(n,t,i,r){this.resetChartSeriesTypeSettings();this.callInstance=n;this.callMethod=t;this.chartObj=BoldBIDashboard.isNullOrUndefined(n.comboChartObj)?this.callInstance.getChartObject():n.comboChartObj;this.isEnableForecast=r;this.renderChartSeriesTypeDialog();this.chartSeriesScrollElement.empty();this.chartSeriesTypeInfo=i;this.chartSeriesDialog.data("BoldBIDashboardDialog").open();this.populateChartSeriesInfo();this.wireEvents()},n.prototype.renderChartSeriesTypeDialog=function(){var t,n,i,r,u,f,e;this.chartSeriesDialog=BoldBIDashboard.buildTag("div.bbi-userselect","",{},{id:this.designer._id+"_chart_series_type_settings"});t=BoldBIDashboard.buildTag("div","",{});n=BoldBIDashboard.buildTag("table","",{width:"100%"},{id:this.designer._id+"_chart_series_type_settings_title"});this.initializeSeriesTypeTitle(n);i=BoldBIDashboard.buildTag("div","",{height:"256px",width:"100%"},{});n.append(i);this.chartSeriesContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{height:"255px",width:"100%",display:"block"},{id:this.designer._id+"_chart_series_type_settings_individual_container"});r=BoldBIDashboard.buildTag("div","",{});this.chartSeriesScrollElement=BoldBIDashboard.buildTag("div","",{height:"252px",width:"100%"},{id:this.designer._id+"_chart_series_type_settings_individual_elements"});u=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.designer.getLocalizationContent().dialogOptions.cancelButtonText,{float:"right"},{id:this.designer._id+"_chart_series_type_settings_cancel",type:"button"});f=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.designer.getLocalizationContent().dialogOptions.okButtonText,{float:"right"},{id:this.designer._id+"_chart_series_type_settings_ok",type:"button"});r.append(this.chartSeriesScrollElement);this.chartSeriesContainer.append(r);i.append(this.chartSeriesContainer);t.append(n);this.chartSeriesDialog.append(t);this.designer.element.append(this.chartSeriesDialog);this.chartSeriesDialog.BoldBIDashboardDialog({title:"Chart Type and Axis Settings",width:500,minWidth:500,height:"auto",minHeight:320,enableResize:!1,containment:"#"+this.designer._id,target:"#"+this.designer._id,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner",close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),closeIconTooltip:this.designer.getLocalizationContent().dialogOptions.closeButtonText});e=this.designer.element.find("#"+this.designer._id+"_chart_series_type_settings_foot");e.append(u).append(f);this.chartSeriesContainer.BoldBIDashboardScroller({height:"255px",scrollerSize:this.designer.scrollerSize.scrollSize,enableTouchScroll:!0,autoHide:!0,buttonSize:this.designer.scrollerSize.buttonSize})},n.prototype.initializeSeriesTypeTitle=function(n){var t=BoldBIDashboard.buildTag("table","",{"border-collapse":"collapse",width:"100%"},{}),i=BoldBIDashboard.buildTag("th.boldbi-dashboarddesigner-chart-seriestype-namecolumn-title bbi-designer-fontfamily","Series Name",{},{}),r=BoldBIDashboard.buildTag("th.boldbi-dashboarddesigner-chart-seriestype-charttype-title bbi-designer-fontfamily","Chart Type",{},{}),u=BoldBIDashboard.buildTag("th.boldbi-dashboarddesigner-chart-seriestype-axiscolumn-title bbi-designer-fontfamily","Secondary Axis",{},{});t.append(i);t.append(r);t.append(u);n.append(t)},n.prototype.resetChartSeriesTypeSettings=function(){this.callInstance=null;this.callMethod="";this.chartObj=null;this.chartSeriesTypeInfo=[]},n.prototype.populateChartSeriesInfo=function(){var l=this,s,h,u,c,f,n;if(!BoldBIDashboard.isNullOrUndefined(this.chartObj)){var o=this.chartSeriesTypeInfo.length,e=BoldBIDashboard.buildTag("table","",{"border-collapse":"collapse",width:"100%","table-layout":"fixed"},{}),t=0,i=0,r=[];if(BoldBIDashboard.isNullOrUndefined(this.chartObj.model.series[0])||BoldBIDashboard.isNullOrUndefined(this.chartObj.model.series[0].rowValue))r=this.chartObj.model.series;else for(s=function(n){var t=h.chartObj.model.series.filter(function(t){return t.id===l.chartSeriesTypeInfo[n].UniqueColumnName});t.length>0&&r.push(t[0])},h=this,u=0;u<o;u++)s(u);for(c=this.isEnableForecast?1:r.length,f=0;f<c;f++)for(n=0;n<o;n++)if(r[f].id===this.chartSeriesTypeInfo[n].UniqueColumnName){this.chartSeriesTypeInfo[n].IsSecondaryAxis?(i=this.isPercentageChart(this.chartSeriesTypeInfo[n].ChartType)?i+1:i,this.renderRowElement(e,this.chartSeriesTypeInfo[n],n,i<2)):(t=this.isPercentageChart(this.chartSeriesTypeInfo[n].ChartType)?t+1:t,this.renderRowElement(e,this.chartSeriesTypeInfo[n],n,t<2));break}this.chartSeriesScrollElement.append(e);this.scrollerRefresh(this.chartSeriesContainer)}},n.prototype.renderRowElement=function(n,t,i,r){var u=BoldBIDashboard.buildTag("tr","",{width:"100%",height:"50px"},{id:this.designer._id+"_chart_series_row"+i}),c=BoldBIDashboard.buildTag("td.boldbi-dashboarddesigner-chart-seriestype-series-column bbi-designer-fontfamily","",{},{}),y=BoldBIDashboard.buildTag("span.e-chart-series-color-div","",{"background-color":this.getChartSeriesColor(t)},{id:this.designer._id+"_chart_series_color"+i}),e=BoldBIDashboard.buildTag("span.e-chart-series-name",t.FieldName,{},{uniquecolumnname:t.UniqueColumnName,charttype:t.ChartType}),p=this.designer.measureText(t.FieldName,150,{size:"12",fontStyle:"Normal",fontFamily:"var(--designer-font)"}).width+1>150,s,v,h,f;p&&(e.addClass("bbi-dbrd-designer-hoverable"),e.attr({"data-tooltip":t.FieldName}));c.append(y).append(e);u.append(c);var l=BoldBIDashboard.buildTag("td.boldbi-dashboarddesigner-chart-seriestype-charttype-column bbi-designer-fontfamily","",{},{}),a=BoldBIDashboard.buildTag("div","",{padding:"0px 8px"},{id:this.designer._id+"_chart_type"+i}),o=BoldBIDashboard.buildTag("input.e-chart-series-dropdown","",{},{id:this.designer._id+"_chart_type_dropdown"+i,issecondaryaxis:t.IsSecondaryAxis,uniquecolumnname:t.UniqueColumnName});a.append(o);l.append(a);s=this.getDefaultDataSource();v=this.getIndexValueForGivenChartType(s,t.ChartType);o.BoldBIDashboardDropDownList({dataSource:s,fields:{text:"text",value:"value"},selectedIndex:v,width:"172px",height:"26px",popupHeight:"120px",popupWidth:"172px",enabled:r,showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-border bbi-designer-ejwidgets bbi-dbrd-control",change:this.bbdesigner$.proxy(this.onChartTypeChange,this,o)});u.append(l);h=BoldBIDashboard.buildTag("td.boldbi-dashboarddesigner-chart-seriestype-axis-column bbi-designer-fontfamily","",{},{});f=BoldBIDashboard.buildTag("input.e-chart-series-checkbox","",{},{id:this.designer._id+"_chart_secondary_axis"+i,issecondaryaxis:t.IsSecondaryAxis});h.append(f);u.append(h);n.append(u);f.BoldBIDashboardCheckBox({checked:t.IsSecondaryAxis,showRoundedCorner:!0,enabled:!this.isPercentageChart(t.ChartType),change:this.bbdesigner$.proxy(this.onChangeCheckState,this,f)})},n.prototype.onChartTypeChange=function(n,t){!BoldBIDashboard.isNullOrUndefined(t.selectedValue)&&this.isPercentageChart(t.selectedValue)?(this.enableOrDisableDropDown(!0,n,t),this.enableOrDisableCheckBox(!1,n)):(this.enableOrDisableDropDown(!1,n,t),this.enableOrDisableCheckBox(!0,n));this.setBarTypeChartToDropDown(n,t)},n.prototype.onChangeCheckState=function(n){for(var i,f,e,u=this.chartSeriesScrollElement.find(".e-chart-series-checkbox"),o=this.chartSeriesScrollElement.find("#"+n.attr("id").replace("secondary_axis","type_dropdown")),t=null,r=0;r<u.length;r++)if(i=u.eq(r),i.data("BoldBIDashboardCheckBox").model.checked===n.data("BoldBIDashboardCheckBox").model.checked&&n.attr("id")!==i.attr("id")){f=i.attr("id");e=this.chartSeriesScrollElement.find("#"+f.replace("secondary_axis","type_dropdown"));t=e.data("BoldBIDashboardDropDownList").model.value;break}!BoldBIDashboard.isNullOrUndefined(t)&&this.isPercentageChart(t)&&(n.BoldBIDashboardCheckBox({enabled:!1}),o.BoldBIDashboardDropDownList({selectedIndex:this.getIndexValueForGivenChartType(this.getDefaultDataSource(),t),enabled:!1}))},n.prototype.enableOrDisableDropDown=function(n,t,i){for(var f=this.chartSeriesScrollElement.find(".e-chart-series-dropdown"),e=t.attr("id"),s=this.chartSeriesScrollElement.find("#"+e.replace("type_dropdown","secondary_axis")),h=s.data("BoldBIDashboardCheckBox").model.checked,u=0;u<f.length;u++){var r=f.eq(u),c=this.chartSeriesScrollElement.find("#"+r.attr("id").replace("type_dropdown","secondary_axis")),o=r.data("BoldBIDashboardDropDownList"),l=n?i.selectedValue!==o.model.value:!o.model.enabled;l&&e!==r.attr("id")&&h===c.data("BoldBIDashboardCheckBox").model.checked&&r.BoldBIDashboardDropDownList({selectedIndex:i.itemId,enabled:!n})}},n.prototype.enableOrDisableCheckBox=function(n,t){for(var r,f=t.attr("id"),e=this.chartSeriesScrollElement.find("#"+f.replace("type_dropdown","secondary_axis")),u=this.chartSeriesScrollElement.find(".e-chart-series-checkbox"),i=0;i<u.length;i++)r=u.eq(i),e.data("BoldBIDashboardCheckBox").model.checked===r.data("BoldBIDashboardCheckBox").model.checked&&r.BoldBIDashboardCheckBox(n?"enable":"disable")},n.prototype.setBarTypeChartToDropDown=function(n,t){var i=this.chartSeriesScrollElement.find(".e-chart-series-dropdown"),r,u,o,f,e;if(this.isBarChartType(t.selectedValue))for(r=0;r<i.length;r++)u=i.eq(r).data("BoldBIDashboardDropDownList"),o=this.isPercentageChart(t.selectedValue)?this.getIndexValueForGivenChartType(this.getDefaultDataSource(),"Bar"):t.itemId,BoldBIDashboard.isNullOrUndefined(u)||this.isBarChartType(u.model.value)||u.model.value===ChartTypes.Line||u.model.value===ChartTypes.Spline||i.eq(r).BoldBIDashboardDropDownList({selectedIndex:o});else for(f=0;f<i.length;f++)e=i.eq(f).data("BoldBIDashboardDropDownList"),!BoldBIDashboard.isNullOrUndefined(e)&&this.isBarChartType(e.model.value)&&t.selectedValue!==ChartTypes.Line&&t.selectedValue!==ChartTypes.Spline&&i.eq(f).BoldBIDashboardDropDownList({selectedIndex:t.itemId})},n.prototype.isPercentageChart=function(n){return n.toLowerCase()===ChartTypes.PercentStackedArea.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedColumn.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedBar.toString().toLowerCase()},n.prototype.isBarChartType=function(n){return n.toLowerCase()===ChartTypes.Bar.toString().toLowerCase()||n.toLowerCase()===ChartTypes.StackedBar.toString().toLowerCase()||n.toLowerCase()===ChartTypes.PercentStackedBar.toString().toLowerCase()},n.prototype.getChartSeriesColor=function(n){var i="#000000",t;if(!BoldBIDashboard.isNullOrUndefined(this.chartObj))for(t=0;t<this.chartObj.model.series.length;t++)n.UniqueColumnName===this.chartObj.model.series[t].id&&(i=this.chartObj.model.series[t].fill);return i},n.prototype.getIndexValueForGivenChartType=function(n,t){for(var i=0,i=0;i<n.length;i++)if(n[i].value.toLowerCase()===t.toLowerCase())break;return i},n.prototype.closeChartSeriesTypeSettings=function(){this.chartSeriesDialog.data("BoldBIDashboardDialog").close()},n.prototype.scrollerRefresh=function(n){n.data("BoldBIDashboardScroller")&&n.data("BoldBIDashboardScroller").refresh()},n.prototype.getDefaultDataSource=function(){return[{text:"Bar",value:"Bar"},{text:"Column",value:"Column"},{text:"Line",value:"Line"},{text:"Area",value:"Area"},{text:"Spline",value:"Spline"},{text:"Spline Area",value:"Spline Area"},{text:"Stacked Column",value:"Stacked Column"},{text:"Stacked Bar",value:"Stacked Bar"},{text:"Stacked Area",value:"Stacked Area"},{text:"100% Stacked Column",value:"100% Stacked Column"},{text:"100% Stacked Area",value:"100% Stacked Area"},{text:"100% Stacked Bar",value:"100% Stacked Bar"}]},n.prototype.updateChartType=function(){var n=this.getChartSeriesTypeInfo();BoldBIDashboard.isNullOrUndefined(this.callInstance)||(BoldBIDashboard.DashboardUtil.invokeMethod(this.callInstance,this.callMethod,[n]),this.chartSeriesDialog.data("BoldBIDashboardDialog").close(),this.unwireEvents())},n.prototype.getChartSeriesTypeInfo=function(){for(var r,u,i=[],t=this.chartSeriesScrollElement.find(".e-chart-series-name"),f=this.chartSeriesScrollElement.find(".e-chart-series-dropdown"),e=this.chartSeriesScrollElement.find(".e-chart-series-checkbox"),n=0;n<t.length;n++)r=f.eq(n).data("BoldBIDashboardDropDownList"),u=e.eq(n).data("BoldBIDashboardCheckBox"),i.push({SeriesName:this.bbdesigner$(t[n]).html(),ChartType:r.selectedTextValue,IsSecondaryAxis:u.model.checked,UniqueColumnName:this.bbdesigner$(t[n]).attr("uniquecolumnname")});return i},n.prototype.wireEvents=function(){this.designer.element.on("click","#"+this.designer._id+"_chart_series_type_settings_ok",this.bbdesigner$.proxy(this.updateChartType,this));this.designer.element.on("click","#"+this.designer._id+"_chart_series_type_settings_cancel",this.bbdesigner$.proxy(this.closeChartSeriesTypeSettings,this))},n.prototype.unwireEvents=function(){this.designer.element.off("click","#"+this.designer._id+"_chart_series_type_settings_ok",this.bbdesigner$.proxy(this.updateChartType,this));this.designer.element.off("click","#"+this.designer._id+"_chart_series_type_settings_cancel",this.bbdesigner$.proxy(this.closeChartSeriesTypeSettings,this))},n.prototype.destroy=function(){this.unwireEvents();BoldBIDashboard.DashboardUtil.destroyEjObjects(this.chartSeriesDialog);this.chartSeriesDialog.length>0&&this.chartSeriesDialog.remove()},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.ChartSeriesType",InternalChartTypeAndAxis,window);InternalLineStyleSettings=function(){function n(n){this.locale=null;this.widgetJson=null;this.chartModel=null;this.chartObj=null;this.designer=n;this.bbdesigner$=this.designer.bbdesigner$;this.locale=n.getLocalizationContent()}return n.prototype.createLineStyleDialogElement=function(n,t){this.chartModel=n;this.isEnableForecast=t;this.widgetJson=n.getChartProperties();this.chartLineStyleList=BoldBIDashboard.isNullOrUndefined(this.widgetJson.LineStyleInfo)?[]:structuredClone(this.widgetJson.LineStyleInfo);this.renderLineStyleDialog();this.chartLineStyleDialogDiv.data("BoldBIDashboardDialog").open()},n.prototype.renderLineStyleDialog=function(){this.chartLineStyleDialogDiv=BoldBIDashboard.buildTag("div.bbi-userselect bbi-widget-chart-linestyle-dialog","",{},{id:this.designer._id+"_chart_linestyle_dialog"});this.designer.element.append(this.chartLineStyleDialogDiv);this.chartLineStyleDialogDiv.BoldBIDashboardDialog({title:this.locale.propertyPanel.chartLineStyleSettings.lineStyleDialogTitleText,enableResize:!1,containment:"#"+this.designer._id,target:"#"+this.designer._id,showOnInit:!1,enableModal:!0,showFooter:!0,width:"auto",minWidth:320,height:"auto",minHeight:250,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner bbi-widget-chart-linestyle-dialog",close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText});var n=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left bbi-widget-chart-linestyle-dialog-button",this.locale.propertyPanel.chartLineStyleSettings.lineStyleDialogCancelBtnText,{},{id:this.designer._id+"_chart_linestyle_dialogbtn_cancel",type:"button"}),t=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary bbi-widget-chart-linestyle-dialog-button",this.locale.propertyPanel.chartLineStyleSettings.lineStyleDialogOkBtnText,{},{id:this.designer._id+"_chart_linestyle_dialogbtn_ok",type:"button"}),i=this.designer.element.find("#"+this.designer._id+"_chart_linestyle_dialog_foot");i.append(n).append(t);this.createChartLineStyleTable();t.on("click",this.bbdesigner$.proxy(this.updateLineStyleCustomizationToChart,this,!0));n.on("click",this.bbdesigner$.proxy(this.closeLineTypeSettings,this,!0))},n.prototype.createChartLineStyleTable=function(){var i=0,r=1,n;this.chartLineStyleList.length>0&&(n=this.chartLineStyleList.findIndex(function(n){return n.Series==="Default"}),n!==-1&&(i=Object.keys(LineStyles).indexOf(this.chartLineStyleList[n].LineStyle),r=this.chartLineStyleList[n].LineWidth));var t=BoldBIDashboard.buildTag("table.bbi-widget-chart-linestyle-dialog-table","",{}),u=this.createLineStyleDropdown("Series",0,this.locale.propertyPanel.chartLineStyleSettings.series),f=this.createLineStyleDropdown("LineStyle",i,this.locale.propertyPanel.chartLineStyleSettings.lineStyleText),e=this.createLineStyleNumeric("LineWidth",r,this.locale.propertyPanel.chartLineStyleSettings.lineWidth);t.append(u);t.append(f);t.append(e);this.chartLineStyleDialogDiv.append(t)},n.prototype.createLineStyleNumeric=function(n,t,i){var r=BoldBIDashboard.buildTag("tr.bbi-widget-chart-linestyle-dialog-table-row bbi-widget-chart-linestyle-dialog-table-row".concat(n),"",{},{id:this.designer._id+"_chart_linestyle_dialog_table_row_"+n}),u=BoldBIDashboard.buildTag("td.bbi-widget-chart-linestyle-dialog-table-".concat(n,"data bbi-designer-fontfamily"),"",{},{}),s=BoldBIDashboard.buildTag("div.bbi-widget-chart-linestyle-dialog-table-".concat(n,"-label"),"".concat(i),{},{id:this.designer._id+"_chart_linestyle_dialog_table_label"+n});u.append(s);var f=BoldBIDashboard.buildTag("td.bbi-widget-chart-linestyle-dialog-table-".concat(n,"data bbi-designer-fontfamily"),"",{},{}),e=BoldBIDashboard.buildTag("div.bbi-widget-chart-linestyle-dialog-table-".concat(n,"-dropdown"),"",{},{id:this.designer._id+"_chart_linestyle_dialog_table_dropdown"+n}),o=BoldBIDashboard.buildTag("input.bbi-chart-lineStyle".concat(n,"-numeric-textbox"),"",{},{type:"text",id:this.designer._id+"_lineStyle_numeric_"+n});return e.append(o),f.append(e),r.append(u).append(f),o.ejNumericTextbox({showSpinButton:!0,width:"172px",enabled:!0,value:t,minValue:1,maxValue:15,showRoundedCorner:!0,change:this.bbdesigner$.proxy(this.changeLineChartWidth,this),cssClass:"bbi-designer-param-assign bbi-designer-ejwidgets bbi-designer-ejwidgets-updown bbi-designer-content-label"}),r},n.prototype.createLineStyleDropdown=function(n,t,i){var r=BoldBIDashboard.buildTag("tr.bbi-widget-chart-linestyle-dialog-table-row bbi-widget-chart-linestyle-dialog-table-row".concat(n),"",{},{id:this.designer._id+"_chart_linestyle_dialog_table_row_"+n}),u=BoldBIDashboard.buildTag("td.bbi-widget-chart-linestyle-dialog-table-".concat(n,"data bbi-designer-fontfamily"),"",{},{}),h=BoldBIDashboard.buildTag("div.bbi-widget-chart-linestyle-dialog-table-".concat(n,"-label"),"".concat(i),{},{id:this.designer._id+"_chart_linestyle_dialog_table_label"+n}),s;u.append(h);var f=BoldBIDashboard.buildTag("td.bbi-widget-chart-linestyle-dialog-table-".concat(n,"data bbi-designer-fontfamily"),"",{},{}),e=BoldBIDashboard.buildTag("div.bbi-widget-chart-linestyle-dialog-table-".concat(n,"-dropdown"),"",{},{id:this.designer._id+"_chart_linestyle_dialog_table_dropdown"+n}),o=BoldBIDashboard.buildTag("input.bbi-chart-lineStyle".concat(n,"-dropdown"),"",{},{id:this.designer._id+"_lineStyle_dropdown_"+n});return e.append(o),f.append(e),r.append(u).append(f),s=n==="Series"?this.getLineSeriesData():n==="LineStyle"?this.getLineStyleData():[],o.BoldBIDashboardDropDownList({dataSource:s,fields:{text:"text",value:"value"},selectedIndex:t,width:"172px",height:"26px",popupHeight:"120px",popupWidth:"172px",showRoundedCorner:!0,isEnabled:!0,change:n==="Series"?this.bbdesigner$.proxy(this.changeLineChartSeriesName,this):this.bbdesigner$.proxy(this.changeLineChartStyle,this),cssClass:"bbi-designer-param-assign bbi-designer-border bbi-designer-ejwidgets bbi-dbrd-control",template:'<div style = "height: 20px"><svg  viewBox="0 0 300 20"><line x1="0" x2="300" y1="10" y2="10" stroke="var(--primary-text-normal-color)" stroke-width="2"  stroke-dasharray="${value}"/><\/svg><\/div>'}),r},n.prototype.changeLineChartSeriesName=function(n){var r=this.bbdesigner$("#"+this.designer._id+"_lineStyle_dropdown_LineStyle").data("BoldBIDashboardDropDownList"),u=this.bbdesigner$("#"+this.designer._id+"_lineStyle_numeric_LineWidth").data("ejNumericTextbox"),t,i;this.chartLineStyleList.length>0&&!BoldBIDashboard.isNullOrUndefined(n.model.value)&&(t=this.chartLineStyleList.findIndex(function(t){return t.Series===n.model.value}),t!==-1?(r.selectItemByValue(BoldBIDashboard.Dashboard.WidgetHelper.getLineStyle(this.chartLineStyleList[t].LineStyle)),u.setModel({value:this.chartLineStyleList[t].LineWidth})):(i=this.chartLineStyleList.findIndex(function(n){return n.Series==="Default"}),i!==-1?(r.selectItemByValue(BoldBIDashboard.Dashboard.WidgetHelper.getLineStyle(this.chartLineStyleList[i].LineStyle)),u.setModel({value:this.chartLineStyleList[i].LineWidth})):(r.selectItemByValue(BoldBIDashboard.Dashboard.WidgetHelper.getLineStyle(LineStyles.Solid.toString())),u.setModel({value:1}))))},n.prototype.changeLineChartStyle=function(n){var t=this.getSelectedLineSeries(),i;this.chartLineStyleList.length>0?(i=this.chartLineStyleList.findIndex(function(n){return n.Series===t}),i!==-1?this.chartLineStyleList[i].LineStyle=n.selectedText:this.chartLineStyleList.push({Series:t,LineStyle:n.selectedText,LineWidth:this.getSelectedLineSeriesWidth()})):this.chartLineStyleList.push({Series:t,LineStyle:n.selectedText,LineWidth:this.getSelectedLineSeriesWidth()})},n.prototype.changeLineChartWidth=function(n){var t=this.getSelectedLineSeries(),i;this.chartLineStyleList.length>0?(i=this.chartLineStyleList.findIndex(function(n){return n.Series===t}),i!==-1?this.chartLineStyleList[i].LineWidth=n.model.value:this.chartLineStyleList.push({Series:t,LineStyle:this.getSelectedLineSeriesStyle(),LineWidth:n.model.value})):this.chartLineStyleList.push({Series:t,LineStyle:this.getSelectedLineSeriesStyle(),LineWidth:n.model.value})},n.prototype.getSelectedLineSeries=function(){var n=this.bbdesigner$("#"+this.designer._id+"_lineStyle_dropdown_Series").data("BoldBIDashboardDropDownList");return n.getSelectedValue()},n.prototype.getSelectedLineSeriesWidth=function(){var n=this.bbdesigner$("#"+this.designer._id+"_lineStyle_numeric_LineWidth").data("ejNumericTextbox");return n.getValue()},n.prototype.getSelectedLineSeriesStyle=function(){var n=this.bbdesigner$("#"+this.designer._id+"_lineStyle_dropdown_LineStyle").data("BoldBIDashboardDropDownList");return n.getSelectedValue()},n.prototype.getLineSeriesData=function(){var t=[],r=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),i,n;if(this.chartObj=this.bbdesigner$(r[0]).data("BoldBIDashboardChart"),!BoldBIDashboard.isNullOrUndefined(this.chartObj)&&this.chartObj.model.series.length>0)for(i=this.chartObj.model.series.length,t.push("Default"),n=0;n<i;n++)(this.chartObj.model.series[n].type==="line"||this.chartObj.model.series[n].type==="spline")&&this.chartObj.model.series[n].visibility!=="hidden"&&this.chartObj.model.series[n].valueFieldColName!=="Forecast"&&t.push(this.chartObj.model.series[n].name);return t},n.prototype.getLineStyleData=function(){return[{text:this.locale.propertyPanel.chartLineStyleSettings.solid,value:"0"},{text:this.locale.propertyPanel.chartLineStyleSettings.dot,value:"2,3"},{text:this.locale.propertyPanel.chartLineStyleSettings.dash,value:"4,8"},{text:this.locale.propertyPanel.chartLineStyleSettings.dotDash,value:"2,6,6,10"},{text:this.locale.propertyPanel.chartLineStyleSettings.longDash,value:"15"},{text:this.locale.propertyPanel.chartLineStyleSettings.longDashDotDot,value:"20,10,5,5,5,10"}]},n.prototype.updateLineStyleCustomizationToChart=function(){for(var f,n,t,i,u=this.chartModel.ContentContainer.find(".e-datavisualization-chart"),r=0;r<u.length;r++)if(this.chartObj=this.bbdesigner$(u[r]).data("BoldBIDashboardChart"),f=this.chartObj.model.series.length,!BoldBIDashboard.isNullOrUndefined(this.chartObj)&&!BoldBIDashboard.isNullOrUndefined(this.chartLineStyleList)){for(n=0;n<f;n++)BoldBIDashboard.DashboardDesignerUtility.ChartHelper.setLineStyle(this.chartObj.model.series[n],this.chartLineStyleList);this.isEnableForecast&&(t=this.chartObj.model.series.findIndex(function(n){return n.name==="Forecast"}),i=this.chartLineStyleList.findIndex(function(n){return n.Series!=="Default"}),i!==-1&&t!==-1&&(this.chartObj.model.series[t].dashArray=BoldBIDashboard.Dashboard.WidgetHelper.getLineStyle(this.chartLineStyleList[i].LineStyle),this.chartObj.model.series[t].width=this.chartLineStyleList[i].LineWidth));this.chartObj.redraw()}this.widgetJson.LineStyleInfo=structuredClone(this.chartLineStyleList);this.designer.modules.serialization.notifyChange();this.closeLineTypeSettings()},n.prototype.closeLineTypeSettings=function(){var n=this.designer.element.find("#"+this.designer._id+"_chart_linestyle_dialog");n.data("BoldBIDashboardDialog").close()},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.LineStyleSettings",InternalLineStyleSettings,window);InternalCustomLegendSettings=function(){function n(n){this.dashboardDesigner=null;this.legendSettingsDialog=null;this.editDiv=null;this.customDiv=null;this.editChooserTag=null;this.individualContainer=null;this.individualScrollElement=null;this.groupContainer=null;this.groupScrollElement=null;this.customValueContainer=null;this.customValueScrollElement=null;this.formatTextBox=null;this.customLegendInfo=null;this.internalCustomLegendInfo=null;this.valuesContainer=null;this.rowContainer=null;this.formatSelectedIndex=2;this.targetInstance=null;this.targetMethod=null;this.footerTag=null;this.settingsContainer=null;this.lastModifiedTextInfo=null;this.locale=null;this.formatListBoxObj=null;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.dashboardDesigner._id;this.renderCustomLengendSettingsWindow();this.wireEvents()}return n.prototype.renderCustomLengendSettingsWindow=function(){var i=this.legendSettingsDialog=BoldBIDashboard.buildTag("div.bbi-userselect","",{},{id:this.id+"_legend_settings"}),o=this.settingsContainer=BoldBIDashboard.buildTag("div","",{}),s=this.customDiv=BoldBIDashboard.buildTag("div","",{height:"283px",display:"block"},{id:this.id+"_legend_settings_custom"}),r=this.customValueContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{height:"283px",width:"418px"},{id:this.id+"_legend_settings_customValue_container"}),h=BoldBIDashboard.buildTag("div","",{}),w=this.customValueScrollElement=BoldBIDashboard.buildTag("div","",{height:"283px"},{id:this.id+"_legend_settings_customValue_elements"}),t,u,a,v,y,p;h.append(w);r.append(h);s.append(r);t=this.editDiv=BoldBIDashboard.buildTag("div","",{display:"none"},{id:this.id+"_legend_settings_edit"});this.renderEditRadioButtions(t);u=BoldBIDashboard.buildTag("div","",{height:"253px",width:"418px"},{});t.append(u);var f=this.individualContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{height:"252px",display:"block"},{id:this.id+"_legend_settings_individual_container"}),c=BoldBIDashboard.buildTag("div","",{}),b=this.individualScrollElement=BoldBIDashboard.buildTag("div","",{height:"252px"},{id:this.id+"_legend_settings_individual_elements"});c.append(b);f.append(c);var e=this.groupContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{height:"252px",display:"none"},{id:this.id+"_legend_settings_group_container"}),l=BoldBIDashboard.buildTag("div","",{}),n=this.groupScrollElement=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_legend_settings_group_elements"});l.append(n);e.append(l);this.renderDisplayFormat(n);this.renderHeaderElement(n,!1,"Values");a=this.valuesContainer=BoldBIDashboard.buildTag("div","",{width:"408px",padding:"8px 0px"},{id:this.id+"_legend_settings_val_container"});n.append(a);this.renderHeaderElement(n,!0,"Row");v=this.rowContainer=BoldBIDashboard.buildTag("div","",{width:"408px",padding:"8px 0px"},{id:this.id+"_legend_settings_row_container"});n.append(v);u.append(f).append(e);y=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.locale.dialogOptions.cancelButtonText,{float:"right"},{id:this.id+"_legend_settings_cancel",type:"button"});p=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.dialogOptions.okButtonText,{float:"right"},{id:this.id+"_legend_settings_ok",type:"button"});o.append(s).append(t);i.append(o);this.dashboardDesigner.element.append(i);i.BoldBIDashboardDialog({title:"Custom Legend Settings",width:"auto",height:"auto",minWidth:420,minHeight:320,enableResize:!1,containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner",close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText});this.footerTag=this.dashboardDesigner.element.find("#"+this.id+"_legend_settings_foot");this.footerTag.append(y).append(p);f.BoldBIDashboardScroller({height:"252px",scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,enableTouchScroll:!0,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize});e.BoldBIDashboardScroller({height:"252px",scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,enableTouchScroll:!0,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize});r.BoldBIDashboardScroller({height:"283px",scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,enableTouchScroll:!0,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize})},n.prototype.renderDisplayFormat=function(n){var r=BoldBIDashboard.buildTag("table.bbi-designer-exp-table","",{width:"388px",margin:"0px 10px 5px 10px",height:"30px"},{id:this.id+"_conditional_settings_format_table"}),u=BoldBIDashboard.buildTag("tr","",{},{}),l=BoldBIDashboard.buildTag("td.bbi-designer-fontfamily","Display Format",{"font-size":"12px","padding-top":"15px",width:"194px"},{}),f=BoldBIDashboard.buildTag("td","",{width:"194px"},{}),e=BoldBIDashboard.buildTag("div","",{height:"15px","margin-left":"2px"},{id:this.id+"_lengendSetting_error_icon"}),t;this.dashboardDesigner.modules.util.renderErrIndictor(e,this.id,"Format should not empty");t=this.formatTextBox=BoldBIDashboard.buildTag("input.e-textbox ","",{width:"170px",height:"25px","margin-left":"11px"},{type:"text",id:this.id+"_conditional_settings_format_textBox"});f.append(e).append(t);u.append(l).append(f);r.append(u);var o=BoldBIDashboard.buildTag("table.bbi-designer-exp-table","",{width:"388px",margin:"0px 10px 12px 10px",height:"30px"},{id:this.id+"_conditional_settings_formatList_table"}),s=BoldBIDashboard.buildTag("tr","",{},{}),a=BoldBIDashboard.buildTag("td","",{width:"194px"},{}),h=BoldBIDashboard.buildTag("td","",{width:"31px"},{}),c=BoldBIDashboard.buildTag("div","",{"padding-left":"11px"},{}),i=BoldBIDashboard.buildTag("ul","",{},{id:this.id+"_conditional_settings_formatList"});c.append(i);h.append(c);s.append(a).append(h);o.append(s);n.append(r).append(o);i.BoldBIDashboardListBox({dataSource:[{text:"Value",value:"Value"},{text:"Row",value:"Row"}],fields:{text:"text",value:"value"},showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-border bbi-designer-list-selection bbi-dbrd-control",width:"182px",height:"55px",select:this.bbdesigner$.proxy(this.changeFormat,this)});t.bind("blur",this.bbdesigner$.proxy(this.formatTextFocusOut,this));t.bind("keyup",this.bbdesigner$.proxy(this.formatTextKeyUp,this));this.formatListBoxObj=i.data("BoldBIDashboardListBox")},n.prototype.scrollerRefresh=function(n){n.data("BoldBIDashboardScroller")&&n.data("BoldBIDashboardScroller").refresh()},n.prototype.changeFormat=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)&&n.value.length>0&&n.index!==this.formatSelectedIndex){var t=this.formatTextBox.val(),i="{{:"+n.value+"}}";this.formatTextBox.val(t+i);this.formatValueChange(t+i);this.formatSelectedIndex=n.index}},n.prototype.formatTextFocusOut=function(){var n=this.formatTextBox.val();this.formatValueChange(n)},n.prototype.formatTextKeyUp=function(){var n=this.formatTextBox.val();this.formatValueChange(n)},n.prototype.formatValueChange=function(n){n.length>0?(this.customLegendInfo.Format=n,this.formatTextBox.hasClass("bbi-designer-error")&&(this.formatTextBox.removeClass("bbi-designer-error"),BoldBIDashboard.DashboardUtil.showErrIndictor(this.groupScrollElement.find("#"+this.id+"_lengendSetting_error_icon"),!1)),this.footerTag.find("#"+this.id+"_legend_settings_ok").attr("disabled")==="disabled"&&this.disableUpdateButton(!1)):(BoldBIDashboard.DashboardUtil.showErrIndictor(this.groupScrollElement.find("#"+this.id+"_lengendSetting_error_icon"),!0),this.formatTextBox.addClass("bbi-designer-error"),this.disableUpdateButton(!0))},n.prototype.renderEditRadioButtions=function(n){var t=BoldBIDashboard.buildTag("div","",{"background-color":"var(--designer-header-background)",border:"0px solid var(--primary-border-color)","border-bottom-width":"0.5px",height:"30px",width:"418px"},{}),i=BoldBIDashboard.buildTag("table.bbi-designer-exp-table","",{width:"398px",margin:"0px 10px",height:"30px"},{id:this.id+"_conditional_settings_colInfo_table"}),r=BoldBIDashboard.buildTag("tr","",{},{}),o=BoldBIDashboard.buildTag("td.bbi-designer-fontfamily","Edit as",{width:"194px","font-size":"12px","font-weight":"600"},{}),u=BoldBIDashboard.buildTag("td","",{width:"194px"},{}),f=this.editChooserTag=BoldBIDashboard.buildTag("div","",{width:"194px",float:"left",clear:"none","box-sizing":"border-box",padding:"2px",display:"inline-block"},{}),e=BoldBIDashboard.buildTag("div.bbi-dbrd-filter-dlg-mode-btn-wrapper","",{},{id:this.id+"_legend_btn_wrapper"});f.append(e);u.append(f);r.append(o).append(u);i.append(r);t.append(i);n.append(t);this.createRadioBtnSection(e)},n.prototype.createRadioBtnSection=function(n){var t=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_btn_grp"}),i;n.append(t);i={callBackInstance:this,callBackMethod:"dataChooser",groupName:"groupchooser",triggerOnCodeUpdate:!0,labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.id+"_legend_settings_individual",label:"Individual",isChecked:!0,value:"Individual"},{id:this.id+"_legend_settings_group",label:"Group",isChecked:!1,value:"Group"},]};this.radioButtonMode=new BoldBIDashboard.Dashboard.RadioButton(i,t)},n.prototype.renderHeaderElement=function(n,t,i){var f=i==="Values"?"Value(s)":"Row",r=BoldBIDashboard.buildTag("div.bbi-property-row-header e-mid-item bbi-item-expand","",{width:"100%",height:"25px",display:"block"},{id:this.id+"_legendSetting_element_"+i}),e=BoldBIDashboard.buildTag("div.bbi-header-row-txt",f,{float:"left","font-size":"13px","margin-top":"5px","margin-left":"12px"},{id:this.id+"_header_"+i}),u;r.append(e);u=BoldBIDashboard.buildTag("span.bbi-header-row-icon bbi-designer-minus","",{float:"right","margin-top":"-2px"});r.append(u);n.append(r);r.bind("click",this.bbdesigner$.proxy(this.onExpandCollapseClick,this,i))},n.prototype.onExpandCollapseClick=function(n){this.groupScrollElement.find("#"+this.id+"_legendSetting_element_"+n).hasClass("bbi-item-expand")?this.collapseCategory(n):this.expandCategory(n);this.scrollerRefresh(this.groupContainer)},n.prototype.expandCategory=function(n){var t=this.groupScrollElement.find("#"+this.id+"_legendSetting_element_"+n);t.addClass("bbi-item-expand").removeClass("bbi-item-collapse");t.find(".bbi-header-row-icon").addClass("bbi-designer-minus").removeClass("bbi-designer-plus");n==="Values"?this.valuesContainer.css("display","block"):this.rowContainer.css("display","block")},n.prototype.collapseCategory=function(n){var t=this.groupScrollElement.find("#"+this.id+"_legendSetting_element_"+n);t.removeClass("bbi-item-expand").addClass("bbi-item-collapse");t.find(".bbi-header-row-icon").removeClass("bbi-designer-minus").addClass("bbi-designer-plus");n==="Values"?this.valuesContainer.css("display","none"):this.rowContainer.css("display","none")},n.prototype.renderLegend=function(n,t){var r,f,e,u,i;if(t==="Both"&&this.customLegendInfo.SingleValues.length===0)for(i=0;i<this.customLegendInfo.GroupValues.Series.length;i++)for(r=0;r<this.customLegendInfo.GroupValues.Values.length;r++)f=this.customLegendInfo.GroupValues.Series[i].Name,e=this.customLegendInfo.GroupValues.Values[r].Name,this.customLegendInfo.SingleValues.push({Name:f+"("+e+")",Value:f+"("+e+")",IsModified:!1,Id:"None"});for(u=[],u=t==="Values"?this.customLegendInfo.GroupValues.Values:t==="Row"?this.customLegendInfo.GroupValues.Series:this.customLegendInfo.SingleValues,this.internalCustomLegendInfo=this.bbdesigner$.extend(!0,{},this.customLegendInfo),i=0;i<u.length;i++)this.renderRowElement(n,u[i],t,i)},n.prototype.renderRowElement=function(n,t,i,r){var f=BoldBIDashboard.buildTag("div","",{"margin-top":"10px",display:"inline-block",width:"388px",padding:"0px 10px"},{id:this.id+"_legend_"+i+"_Label"+r}),o=BoldBIDashboard.buildTag("div","",{width:"194px",float:"left","margin-left":"3px","margin-top":"8.5px"}),s=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"}),e,u;s.text(BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(t.Caption)?t.Name:t.Caption);o.append(s);f.append(o);e=BoldBIDashboard.buildTag("div","",{display:"inline-block","margin-top":"3px",border:"0px solid","border-color":"red","margin-left":"5px"},{id:this.id+"_legend_"+i+"_LabelValue"+r+"_parent"});u=BoldBIDashboard.buildTag("input.e-textbox","",{width:"170px",height:"25px"},{id:this.id+"_legend_"+i+"_LabelValue"+r,type:"text"});u.attr("placeholder",this.locale.common.auto);u.val(t.IsModified?t.Value:"");e.append(u);u.bind("blur",this.bbdesigner$.proxy(this.textFocusOut,this,i,r));u.bind("keyup",this.bbdesigner$.proxy(this.textKeyUp,this,i,r));f.append(e);n.append(f)},n.prototype.textFocusOut=function(n,t){var i=this.settingsContainer.find("#"+this.id+"_legend_"+n+"_LabelValue"+t).val();this.lastModifiedTextInfo=null;this.onValueChange(n,t,i)},n.prototype.onValueChange=function(n,t,i){var r=!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(i);n==="Values"?(this.customLegendInfo.GroupValues.Values[t].IsModified=this.internalCustomLegendInfo.GroupValues.Values[t].Name!==i&&r?!0:!1,r?this.customLegendInfo.GroupValues.Values[t].Value=i:(this.customLegendInfo.GroupValues.Values[t].Value=this.internalCustomLegendInfo.GroupValues.Values[t].Name,this.settingsContainer.find("#"+this.id+"_legend_"+n+"_LabelValue"+t).val(this.customLegendInfo.GroupValues.Values[t].IsModified?this.internalCustomLegendInfo.GroupValues.Values[t].Name:""))):n==="Row"?(this.customLegendInfo.GroupValues.Series[t].IsModified=this.internalCustomLegendInfo.GroupValues.Series[t].Name!==i&&r?!0:!1,r?this.customLegendInfo.GroupValues.Series[t].Value=i:(this.customLegendInfo.GroupValues.Series[t].Value=this.internalCustomLegendInfo.GroupValues.Series[t].Name,this.settingsContainer.find("#"+this.id+"_legend_"+n+"_LabelValue"+t).val(this.customLegendInfo.GroupValues.Series[t].IsModified?this.internalCustomLegendInfo.GroupValues.Series[t].Name:""))):(this.customLegendInfo.SingleValues[t].IsModified=this.internalCustomLegendInfo.SingleValues[t].Name!==i&&r?!0:!1,r?this.customLegendInfo.SingleValues[t].Value=i:(this.customLegendInfo.SingleValues[t].Value=this.internalCustomLegendInfo.SingleValues[t].Name,this.settingsContainer.find("#"+this.id+"_legend_"+n+"_LabelValue"+t).val(this.customLegendInfo.SingleValues[t].IsModified?this.internalCustomLegendInfo.SingleValues[t].Name:"")))},n.prototype.textKeyUp=function(n,t,i){var r=this.settingsContainer.find("#"+this.id+"_legend_"+n+"_LabelValue"+t).val();if(i.keyCode===13)this.onValueChange(n,t,r);else this.lastModifiedTextInfo={renderType:n,rowIndex:t,value:r}},n.prototype.groupSwitcher=function(){var n=this.editChooserTag.find("#"+this.id+"_legend_settings_individual_rdo_input"),t=n.prop("checked");t?(this.individualContainer.css("display","block"),this.groupContainer.css("display","none"),this.scrollerRefresh(this.individualContainer)):(this.groupContainer.css("display","block"),this.individualContainer.css("display","none"),this.scrollerRefresh(this.groupContainer),this.formatListBoxObj.setModel({selectedIndex:-1}),this.formatListBoxObj.refresh(!0),this.formatSelectedIndex=2)},n.prototype.dataChooser=function(n){n.args.value&&this.groupSwitcher()},n.prototype.disableUpdateButton=function(n){n?this.footerTag.find("#"+this.id+"_legend_settings_ok").css({opacity:"0.5"}).attr("disabled","disabled"):this.footerTag.find("#"+this.id+"_legend_settings_ok").css({opacity:"1"}).removeAttr("disabled")},n.prototype.populateLegendInfo=function(n){if(n.GroupValues.Series.length>0){this.customDiv.css("display","none");this.editDiv.css("display","block");var t=n.Format.length>0?n.Format:"{{:Row}}({{:Value}})";this.formatTextBox.val(t);this.renderLegend(this.rowContainer,"Row");this.renderLegend(this.valuesContainer,"Values");this.renderLegend(this.individualScrollElement,"Both");n.Type==="Individual"?this.editChooserTag.find("#"+this.id+"_legend_settings_individual_rdo_input").prop("checked",!0):this.editChooserTag.find("#"+this.id+"_legend_settings_group_rdo_input").prop("checked",!0);this.groupSwitcher()}else this.customDiv.css("display","block"),this.editDiv.css("display","none"),this.renderLegend(this.customValueScrollElement,"Values"),this.scrollerRefresh(this.customValueContainer)},n.prototype.updateSwictherValue=function(){var n=this.editChooserTag.find("#"+this.id+"_legend_settings_individual_rdo_input"),t=n.prop("checked");if(this.customLegendInfo.Type=t?"Individual":"Group",!BoldBIDashboard.isNullOrUndefined(this.lastModifiedTextInfo)){this.onValueChange(this.lastModifiedTextInfo.renderType,this.lastModifiedTextInfo.rowIndex,this.lastModifiedTextInfo.value);this.lastModifiedTextInfo=null}return this.customLegendInfo},n.prototype.updateCustomInfo=function(){var n=this.updateSwictherValue();BoldBIDashboard.isNullOrUndefined(this.targetInstance)||(BoldBIDashboard.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[n]),this.legendSettingsDialog.data("BoldBIDashboardDialog").close())},n.prototype.closeLegendSettings=function(){this.legendSettingsDialog.data("BoldBIDashboardDialog").close()},n.prototype.openLegendSettings=function(n,t,i){this.legendSettingsDialog.data("BoldBIDashboardDialog").open();this.resetLengendSettings();this.targetInstance=n;this.targetMethod=t;this.customLegendInfo=JSON.parse(JSON.stringify(i));this.populateLegendInfo(this.customLegendInfo)},n.prototype.resetLengendSettings=function(){this.targetInstance=null;this.targetMethod=null;this.customLegendInfo=null;this.internalCustomLegendInfo=null;this.customValueScrollElement.empty();this.individualScrollElement.empty();this.formatSelectedIndex=2;this.formatTextBox.val("{{:Row}}({{:Value}})");this.valuesContainer.empty();this.rowContainer.empty();this.customDiv.css("display","block");this.editDiv.css("display","none")},n.prototype.wireEvents=function(){this.dashboardDesigner.element.on("click","#"+this.id+"_legend_settings_ok",this.bbdesigner$.proxy(this.updateCustomInfo,this));this.dashboardDesigner.element.on("click","#"+this.id+"_legend_settings_cancel",this.bbdesigner$.proxy(this.closeLegendSettings,this))},n.prototype.unWireEvents=function(){this.dashboardDesigner.element.off("click","#"+this.id+"_legend_settings_ok",this.bbdesigner$.proxy(this.updateCustomInfo,this));this.dashboardDesigner.element.off("click","#"+this.id+"_legend_settings_cancel",this.bbdesigner$.proxy(this.closeLegendSettings,this))},n.prototype.destroy=function(){this.unWireEvents();BoldBIDashboard.DashboardUtil.destroyEjObjects(this.dashboardDesigner.element.find("#"+this.id+"_legend_settings"));this.dashboardDesigner.element.find("#"+this.id+"_legend_settings").length>0&&this.dashboardDesigner.element.find("#"+this.id+"_legend_settings").remove()},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.CustomLegendSettings",InternalCustomLegendSettings,window);__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalImageReportItem=function(n){function t(t){var i=n.call(this,t,"Image","e-image")||this;return i.propertyPanel=null,i.filterObject=null,i.dataObj=null,i.locale=null,i.bbdesigner$=i.designerInstance.bbdesigner$,i.locale=t.getLocalizationContent(),i.widgetJson=new ImageProperties(t),i.ShowSubtitle=!1,i.widgetJson.ContainerSettings.ShowHeader=!1,i.widgetJson.ContainerSettings.ViewData=!1,i.propertyPanel=t.modules.propertyPanel,i.designerId=i.designerInstance._id,i.filterObject=t.modules.masterSlaveFilter,i.isVisualWidget=!1,i}return __extends(t,n),t.prototype.isNecessaryDataConfigured=function(){return!0},t.prototype.getWidgetImage=function(){return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="0 0 324 208" version="1.1">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="img-" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="Group-3" transform="translate(70.000000, 12.000000)" stroke="var(--widget-notconfigured-image-background1)">            <rect id="Rectangle" stroke-width="11.5306666" x="5.76533332" y="5.76533332" width="171.738207" height="171.738207" rx="11.5306666"/>            <path d="M26.1868991,176.22827 L111.355276,90.3959863 C114.792864,86.931601 120.334088,86.7443445 123.997713,89.9687559 L176.186899,135.901239 L176.186899,135.901239" id="Path-7-Copy" stroke-width="13.8368" stroke-linecap="round"/>            <circle id="Oval-Copy" stroke-width="11.5306666" cx="62.9986753" cy="59.562384" r="17.1814569"/>        <\/g>    <\/g><\/svg>'},t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.miscellaneous,GroupId:"764ccc8f-f006-46ab-aef5-68973d12d2a6",Items:[{id:"0eb3a830-346d-4dac-bf53-e2f63536d82b",widgetName:"Image",widgetDisplayName:n.itemPanel.widgetTitle.image,cssClass:"bbi-widgeticon bbi-designer-widget-image",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ImageItem",searchCategory:["image","miscellaneous"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.image,description:n.itemPanel.widgetDescription.imageDesc,dataRequirement:n.itemPanel.widgetDataRequirements.imageDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ImageProperties",minColSpan:2,minRowSpan:2}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){this.setContainerDefaultProperties();this.renderImageContainer(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.imageElement)||this.updateImageSize();BoldBIDashboard.Dashboard.WidgetContainerHelper.updateNoNecessaryDataContainerSize(this.ContentContainer)},t.prototype.update=function(n){BoldBIDashboard.isNullOrUndefined(this.getImageProperties().ImageUrl)?BoldBIDashboard.isNullOrUndefined(this.getImageProperties().ImagePath)||BoldBIDashboard.isNullOrUndefined(this.getImageProperties().ImageName)||(this.updateLocalSource(this.getImageProperties().ImagePath),this.IsRendered=!0):this.updateURLSource(this.getImageProperties().ImageUrl);this.updateImageItemData(n)},t.prototype.updateIconContainerBackground=function(){var n=this.ControlContainer.find(".bbi-dbrd-controlIcon-container");!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0&&n.css(this.designerInstance.modules.themeHelper.getWidgetTileBackground(null))},t.prototype.getFieldContainer=function(){var n=new BoldBIDashboard.Dashboard.FieldContainerForUI;return n.Name="Column",n.DisplayName=this.locale.fieldContainer.column,n.ContainerType=FieldContainerType.Non_Numeric,[n]},t.prototype.onFieldSettingsClick=function(n,t){return BoldBIDashboard.DashboardUtil.hideRenameMenuOption(t)},t.prototype.getJson=function(){return this.widgetJson.FilterSettings.IgnoreFilterActions=this.getImageProperties().ImageSource.toString()===ImgSource.Local.toString()||this.getImageProperties().ImageSource.toString()===ImgSource.URL.toString()?!0:this.getImageProperties().IgnoreFilterActions,BoldBIDashboard.isNullOrUndefined(this.widgetJson.ContainerSettings.WidgetPaddingInfo)&&(this.widgetJson.ContainerSettings.WidgetPaddingInfo=new WidgetPaddingInfo,this.widgetJson.ContainerSettings.WidgetPaddingInfo.AutoPadding=!0,this.widgetJson.ContainerSettings.WidgetPaddingInfo.Padding=this.getControlContainerPaddingValue()),this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t)},t.prototype.getPropertyPanelItems=function(){return this.getPropertyPanelForImage()},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateImageItemPropertyChange(n,t,i,r)},t.prototype.updateInitialSelection=function(){},t.prototype.clearFilter=function(){},t.prototype.getMobileViewHeight=function(){return 2*this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.refresh=function(){},t.prototype.dispose=function(){this.imageItemDispose();n.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.locale.itemPanel.widgetDataRequiredMessage.imageDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.canUseWidgetAsMaster=function(){return!1},t.prototype.getDefaultMeasureFormat=function(){return null},t.prototype.getFieldView=function(n,t){return[{name:"Dimensions",displayName:this.locale.dataconfiguration.fieldView.DimensionFieldDisplayName,supportedDataTypes:!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0?t:[]}]},t.prototype.supportedColumnsForFiltering=function(){return null},t.prototype.onFieldDragDrop=function(){return!0},t.prototype.canCombineRequest=function(){return!0},t.prototype.renderImageContainer=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));this.getImageProperties().ImageSource===ImgSource.Local&&(this.getImageProperties().imageSrc=null);this.imageItem=BoldBIDashboard.buildTag("div.imageItem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder,overflow:"hidden"},{id:this.designerId+"_imageItem_"+this.widgetJson.UniqueName});this.imageElement=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%"},{id:this.designerId+"_image_"+this.widgetJson.UniqueName,display:"none"});this.imageItem.append(this.imageElement);this.contentContainer.append(this.imageItem);this.controlContainer.data("widgetInstance",this);this.unwiredEvents();this.wiredEvents();this.imageItem.hide();!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Image)}catch(i){this.designPanelInstance.logError({Source:this.getImageProperties().Name,Error:i,Type:i.name})}},t.prototype.unwiredEvents=function(){this.imageItem.off("click",this.bbdesigner$.proxy(this.selectActionPriority,this));this.imageItem.off("mousemove",this.bbdesigner$.proxy(this.showTooltip,this));this.imageItem.off("mouseleave",this.bbdesigner$.proxy(this.hideTooltip,this))},t.prototype.wiredEvents=function(){this.imageItem.on("click",this.bbdesigner$.proxy(this.selectActionPriority,this));this.imageItem.on("mousemove",this.bbdesigner$.proxy(this.showTooltip,this));this.imageItem.on("mouseleave",this.bbdesigner$.proxy(this.hideTooltip,this))},t.prototype.showTooltip=function(n){var t=this.designerInstance.element,r=t.offset().left,u=t.offset().top,i=this.designerInstance.element.find("#"+this.designerId+"_tooltip"),f=n.clientX-r+10,e=n.clientY-u+20;i.html(this.widgetJson.ContainerSettings.Title).css({display:"block"});i.css({top:e,left:f})},t.prototype.hideTooltip=function(n){this.designerInstance.hideTooltip(n)},t.prototype.updateImageItemPropertyChange=function(t,i,r,u){var s=!1,f,e,h,o;switch(t){case"Name":this.widgetJson.ContainerSettings.Title=r;this.propertyPanel.setTitle(this.widgetJson);break;case"Mode":this.getImageProperties().Stretch=r==="Uniform To Fill"?"UniformToFill":r;this.updateImageMode(r);break;case"ImageRotation":this.updateImageRotation(r);break;case"Paddingtop":this.updatePaddingtop(r);break;case"Paddingbottom":this.updatePaddingbottom(r);break;case"Paddingright":this.updatePaddingright(r);break;case"Paddingleft":this.updatePaddingleft(r);break;case"ExporttoPdf":this.getImageProperties().EnablePdfExport=r;break;case"ImageSource":this.getImageProperties().ImageSource=r==="Parameterized URL"?"ParameterizedURL":r;this.updateImageSourceVisibility(r);this.resetImageSource(u);this.updatePatternVisibility(r);this.setIgnoreFilterSelection();break;case"Datasource":this.getImageProperties().DataSource=r;this.updatePatternVisibility(r);break;case"ImageURL":this.getImageProperties().ImageUrl=r;this.updateURLSource(r);break;case"ItemLink":n.prototype.updateLink.call(this,r);this.updateCursorTpe(r);break;case"ImgExport":this.getImageProperties().EnableImageExport=r;break;case"IgnoreFilter":this.getImageProperties().IgnoreFilterActions=r;this.filterObject.IgnoreFilterActionPropertyChange(r);break;case"Pattern":this.getImageProperties().URLPattern=r;this.getUrlFormat();break;default:s=!0}if(!s){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(f=this.designPanelInstance.selectedReportItems,f.length>0))for(e=0;e<f.length;e++)h=f[e],h.attr("id")===this.controlContainer.attr("id")&&(o=this.bbdesigner$.extend(!0,{},u),o.categoryName=u.categoryName,o.valueList=u.valueList,this.propertyPanel.updatePropertyValue(o,this.Type,r));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-image",this.imageItem.attr("id"),[t,r,i,u],[t,i,r,u])}},t.prototype.updatePatternVisibility=function(n){n===ImgSource.ParameterizedURL.toString()?this.propertyPanel.updateItemVisibility(this.Type,"BasicSettings","Pattern",!0):this.propertyPanel.updateItemVisibility(this.Type,"BasicSettings","Pattern",!1)},t.prototype.updateImageSourceVisibility=function(n){n===ImgSource.URL.toString()?(this.propertyPanel.updateItemVisibility(this.Type,"BasicSettings","Pattern",!1),this.propertyPanel.updateItemVisibility(this.Type,"BasicSettings","Browse",!1),this.propertyPanel.updateItemVisibility(this.Type,"BasicSettings","ImageURL",!0),this.propertyPanel.updateCategoryVisibility(this.Type,"Filter",!1),this.getImageProperties().IsInPackage=!1,this.getImageProperties().IsURL=!0,this.getImageProperties().BindDataIsChecked=!1,this.getImageProperties().IgnoreFilterActions=!0):n===ImgSource.Local.toString()?(this.propertyPanel.updateItemVisibility(this.Type,"BasicSettings","ImageURL",!1),this.propertyPanel.updateItemVisibility(this.Type,"BasicSettings","Browse",!0),this.propertyPanel.updateItemVisibility(this.Type,"BasicSettings","Pattern",!1),this.propertyPanel.updateCategoryVisibility(this.Type,"Filter",!1),this.getImageProperties().IsInPackage=!0,this.getImageProperties().IsURL=!1,this.getImageProperties().BindDataIsChecked=!1,this.getImageProperties().EnableImageExport=!0,this.getImageProperties().IgnoreFilterActions=!0):n===ImgSource.ParameterizedURL.toString()&&(this.propertyPanel.updateItemVisibility(this.Type,"BasicSettings","Browse",!1),this.propertyPanel.updateItemVisibility(this.Type,"BasicSettings","ImageURL",!1),this.propertyPanel.updateItemVisibility(this.Type,"BasicSettings","Pattern",!0),this.propertyPanel.updateCategoryVisibility(this.Type,"Filter",!0),this.getImageProperties().BindDataIsChecked=!0,this.getImageProperties().IsURL=!0,this.getImageProperties().IgnoreFilterActions=!1,this.getImageProperties().URLPattern=this.designerInstance.element.find("#"+this.designerId+"_"+this.Type+"_BasicSettings_Pattern").val(),this.getUrlFormat());this.propertyPanel.refreshScroller()},t.prototype.resetImageSource=function(n){var t,i,r;this.contentContainer.find("#"+this.designerId+"_image_path").val("");t=this.getImageProperties().ImagePath;this.contentContainer.find("#"+this.designerId+"_image_progress_tr").css("display","none");this.getImageProperties().DataSource=DataSource.BinaryData;this.getImageProperties().ImageUrl=null;this.getImageProperties().URLPattern="{0}";i=this.designerId+"_"+this.Type+"_"+n.categoryName;r=this.controlContainer.data(i+"_ImageSource_previousValue");BoldBIDashboard.isNullOrUndefined(r)||this.getImageProperties().ImageSource.toString().toLowerCase()===r.toLowerCase()||this.controlContainer.data(i+"_ImageURL_previousValue","");this.designerInstance.element.find("#"+this.designerId+"_"+this.Type+"_"+n.categoryName+"_ImageURL").val("");this.designerInstance.element.find("#"+this.designerId+"_"+this.Type+"_"+n.categoryName+"_Pattern").val("{0}");this.imageElement.css("display","none");t!=null&&BoldBIDashboard.Dashboard.Resource.deleteImage(t,this.designerInstance);this.fileName=null;this.fileExt=null;this.getImageProperties().ImagePath=null;this.getImageProperties().URLPattern="{0}";this.addWidgetNotConfiguredInfo();this.imageItem.hide();this.showOrHideAlertMessage()},t.prototype.addWidgetNotConfiguredInfo=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this)},t.prototype.removeWidgetNotConfiguredInfo=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this)},t.prototype.updateURLSource=function(n){BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(this.contentContainer);BoldBIDashboard.Dashboard.WidgetContainerHelper.hideWidgetContainerImage(this.contentContainer);this.getImageProperties().URLPattern=n;n.trim().length>0?(this.imageElement.css({display:"inline-block","background-image":"url("+n+")"}),this.getImageProperties().imageSrc=n,this.updateImageMode(BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImageMode,this.getImageProperties().Stretch)),this.removeWidgetNotConfiguredInfo(),this.imageItem.show()):this.imageElement.css("display","none");this.IsRendered=!0},t.prototype.updateLocalSource=function(n){BoldBIDashboard.isNullOrUndefined(n)||n.indexOf("Image")===-1||(n=n.substring(6,n.length));BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.dashboardFromData)||!this.designerInstance.model.dashboardFromData.loadFromData||BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.dashboardFromData.imageData)?BoldBIDashboard.isNullOrUndefined(n)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(this.contentContainer),this.imageElement.css({display:"inline-block","background-repeat":"no-repeat","background-image":'url("'+BoldBIDashboard.Dashboard.Resource.getImage(n)+'")'}),this.updateImageMode(BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImageMode,this.getImageProperties().Stretch)),this.removeWidgetNotConfiguredInfo()):(this.imageElement.css({display:"inline-block","background-repeat":"no-repeat","background-image":'url("'+BoldBIDashboard.Dashboard.Resource.getImage(n)+'")'}),this.updateImageMode(BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImageMode,this.getImageProperties().Stretch)),this.removeWidgetNotConfiguredInfo())},t.prototype.updateImageItemData=function(n){if(this.dataValues=n,BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this),this.imageItem.show(),BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this),this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo),BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error)BoldBIDashboard.isNullOrUndefined(n.Message)?BoldBIDashboard.isNullOrUndefined(this.getImageProperties().ImageUrl)&&BoldBIDashboard.isNullOrUndefined(this.getImageProperties().ImagePath)&&(this.imageItem.hide(),this.showOrHideAlertMessage()):(this.removeWidgetNotConfiguredInfo(),BoldBIDashboard.Dashboard.WidgetContainerHelper.hideWidgetContainerImage(this.contentContainer),this.widgetContainerHelper.showControlError(this,n));else if(n.noDataAvailable)this.imageItem.hide(),this.removeWidgetNotConfiguredInfo(),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this),this.IsRendered=!0;else if(this.dataObj=BoldBIDashboard.isNullOrUndefined(this.dataValues.isDataSetEmpty)&&!BoldBIDashboard.isNullOrUndefined(n)&&n.data!=="[]"?JSON.parse(n.data):null,BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.dashboardFromData)||!this.designerInstance.model.dashboardFromData.loadFromData||BoldBIDashboard.isNullOrUndefined(this.getImageProperties().imageSrc)||this.getImageProperties().ImageSource.toString().toLowerCase()!=="parameterizedurl")BoldBIDashboard.isNullOrUndefined(n)||n.data==="[]"||!BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)||typeof n=="string"&&n.indexOf("Sf_Exception")!==-1||this.getImageProperties().ImageSource.toString().toLowerCase()!=="parameterizedurl"?!BoldBIDashboard.isNullOrUndefined(n)&&n.data==="[]"&&BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)&&this.getImageProperties().ImageSource.toString().toLowerCase()==="parameterizedurl"&&(this.imageItem.hide(),this.showOrHideAlertMessage()):(this.getUrlFormat(),this.updateImageMode(BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImageMode,this.getImageProperties().Stretch)),this.removeWidgetNotConfiguredInfo(),this.imageItem.hide(),this.showOrHideAlertMessage());else{var t=this.dataObj[0][this.DataGroupInfo.FieldContainers[0].FieldInfos[0].UniqueColumnName];this.updateParameterizedImageData(t)}this.designerInstance.modules.util.updateAction(this.Type,"Link","Link");this.updateCursorTpe(this.widgetJson.UrlLink);this.updateImageRotation(this.getImageProperties().ImageRotation+String.fromCharCode(176));this.updatePaddingtop(this.getImageProperties().PaddingSettings.Top);this.updatePaddingbottom(this.getImageProperties().PaddingSettings.Bottom);this.updatePaddingright(this.getImageProperties().PaddingSettings.Right);this.updatePaddingleft(this.getImageProperties().PaddingSettings.Left)},t.prototype.checkValidPattern=function(n,t){for(var u=!1,r=n.split(/{|}/),i=0;i<r.length;i++)if(!BoldBIDashboard.isNullOrUndefined(r[i])&&r[i]!==""&&!isNaN(r[i]))if(parseInt(r[i])<t.length)u=!0;else return!1;return u},t.prototype.showOrHideAlertMessage=function(){this.getImageProperties().ImageSource===ImgSource.URL||this.getImageProperties().ImageSource.toString().toLowerCase()==="parameterizedurl"&&this.DataGroupInfo.FieldContainers.length===0?(BoldBIDashboard.Dashboard.WidgetContainerHelper.showAlertMessageForData(this.DataRequiredMessage,this.contentContainer,this.getContainerSettings().CombineWidgetId),this.ContentContainer.find(".bbi-dbrd-isimage").show(),this.addWidgetNotConfiguredInfo(),this.IsRendered=!0):this.getImageProperties().ImageSource===ImgSource.Local?(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(this.contentContainer),this.ContentContainer.find(".bbi-dbrd-isimage").show()):this.getImageProperties().ImageSource.toString().toLowerCase()==="parameterizedurl"&&this.DataGroupInfo.FieldContainers.length>0&&(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(this.contentContainer),BoldBIDashboard.Dashboard.WidgetContainerHelper.hideWidgetContainerImage(this.contentContainer))},t.prototype.getUrlFormat=function(){var n=this,t;!BoldBIDashboard.isNullOrUndefined(this.getImageProperties().URLPattern)&&!BoldBIDashboard.isNullOrUndefined(this.dataObj)&&this.dataObj.length>0&&(t=this.checkValidPattern(this.getImageProperties().URLPattern,Object.keys(this.dataObj[0])),!BoldBIDashboard.isNullOrUndefined(this.dataObj)&&Object.keys(this.dataObj[0]).length>0&&this.getImageProperties().ImageSource.toString()==="ParameterizedURL"&&t?(this.IsRendered=!1,this.controlContainer.attr({"data-prevent-loading-indicator":!0}),this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.formurlpattern,{action:BoldBIDashboard.DashboardUtil.DesignerAction.executeQuery,data:JSON.stringify({UrlText:this.getImageProperties().URLPattern,Colums:this.dataObj[0]})},{fnction:this.bbdesigner$.proxy(function(t){n.designerInstance.modules.util.hideLoadingIndicator(n.controlContainer);t.Status?(n.getImageProperties().imageSrc=t.patternText,n.updateParameterizedImageData(t.patternText)):(BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(n),n.imageElement.css("display","none"));n.IsRendered=!0},this)})):t||this.designerInstance.modules.util.alertDialog("Dashboard Designer",this.locale.alertWindowMesages.imageURLPatternValidationMessage,IconType.information,AlertType.Alert,!1,""))},t.prototype.updateParameterizedImageData=function(n){BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(this.contentContainer);BoldBIDashboard.Dashboard.WidgetContainerHelper.hideWidgetContainerImage(this.contentContainer);this.imageItem.show();this.imageElement.css({display:"inline-block","background-image":"url("+n+")"});this.updateImageMode(BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImageMode,this.getImageProperties().Stretch));this.removeWidgetNotConfiguredInfo()},t.prototype.updateImageMode=function(n){switch(n){case ImageMode.Default.toString():if(!BoldBIDashboard.isNullOrUndefined(this.getImageProperties().imageSrc)){var t=new Image,i=this.imageElement;t.onload=function(){t.height<i.height()?i.css({"background-position-y":"50%","background-position-x":"50%"}):i.css({"background-position-y":"","background-position-x":""})};t.src=this.getImageProperties().imageSrc}this.imageElement.css({height:"100%",width:"100%",overflow:"hidden",border:"none","background-size":"auto","background-position":"unset","background-repeat":"no-repeat",position:"relative"});break;case ImageMode.Fill.toString():this.imageElement.css({height:"100%",width:"100%",overflow:"hidden",border:"none","background-size":"100% 100%","-webkit-background-repeat":"no-repeat",position:"relative"});break;case ImageMode.Uniform.toString():this.imageElement.css({height:"100%",width:"100%",overflow:"hidden",border:"none","background-size":"contain","background-position":"50% 50%","background-repeat":"no-repeat",position:"relative"});break;case ImageMode.UniformToFill.toString():this.imageElement.css({height:"100%",width:"100%",overflow:"hidden",border:"none","background-size":"cover","background-position":"50% 50%","background-repeat":"no-repeat",position:"relative"})}},t.prototype.updatePaddingtop=function(n){this.getImageProperties().PaddingSettings.Top=n;this.imageItem.css({"padding-top":""+this.getImageProperties().PaddingSettings.Top+"px"})},t.prototype.updatePaddingbottom=function(n){this.getImageProperties().PaddingSettings.Bottom=n;this.imageItem.css({"padding-bottom":""+this.getImageProperties().PaddingSettings.Bottom+"px"})},t.prototype.updatePaddingright=function(n){this.getImageProperties().PaddingSettings.Right=n;this.imageItem.css({"padding-right":""+this.getImageProperties().PaddingSettings.Right+"px"})},t.prototype.updatePaddingleft=function(n){this.getImageProperties().PaddingSettings.Left=n;this.imageItem.css({"padding-left":""+this.getImageProperties().PaddingSettings.Left+"px"})},t.prototype.updateImageRotation=function(n){this.getImageProperties().ImageRotation=n.replace(new RegExp(String.fromCharCode(176),"g"),"");this.imageElement.css({transform:"rotate("+this.getImageProperties().ImageRotation+"deg)"})},t.prototype.getPropertyPanelForImage=function(){var r=BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem.getInterWidgetLinkingProperty(this.locale.propertyPanel.linking.interWidgetLinkingText,!1),t,i;return r.Items[0].value=n.prototype.useExistingWidgetLinking.call(this),t={Header:this.widgetJson.ContainerSettings.Title,Type:this.Type,Items:[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"Mode",displayName:this.locale.propertyPanel.basicSettings.mode,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImageMode,this.getImageProperties().Stretch),itemType:"dropdown",valueList:["Default","Fill","Uniform","Uniform To Fill"]},{name:"ImageSource",displayName:this.locale.propertyPanel.basicSettings.imageSource,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImgSource,this.getImageProperties().ImageSource),itemType:"dropdown",valueList:["Local","URL","Parameterized URL"]},{name:"Browse",displayName:this.locale.propertyPanel.backgroundSettings.backgroundImageBrowse,isVisible:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImgSource,this.getImageProperties().ImageSource)==="Local"?!0:!1,itemType:"object",callbackInstance:this,callbackMethod:"renderBrowseBox"},{name:"ImageURL",displayName:this.locale.propertyPanel.backgroundSettings.backgroundImageUrl,itemType:"string",value:this.getImageProperties().ImageUrl,isVisible:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImgSource,this.getImageProperties().ImageSource)==="URL"?!0:!1},{name:"Pattern",displayName:this.locale.propertyPanel.backgroundSettings.backgroundImagePattern,itemType:"string",value:this.getImageProperties().URLPattern,isVisible:this.getPatternVisibility()},{name:"ImageRotation",displayName:this.locale.propertyPanel.imageSettings.imageRotation,itemType:"dropdown",value:this.getImageProperties().ImageRotation==="ZeroDeg"?"0"+String.fromCharCode(176):this.getImageProperties().ImageRotation+String.fromCharCode(176),valueList:["0"+String.fromCharCode(176),"90"+String.fromCharCode(176),"180"+String.fromCharCode(176),"270"+String.fromCharCode(176)]},]},{CategoryName:"PaddingSettings",DisplayName:this.locale.propertyPanel.imagePaddingSettingsText,Items:[{name:"Paddingtop",isVisible:!0,displayName:this.locale.propertyPanel.PaddingSettings.top,value:this.getImageProperties().PaddingSettings.Top,itemType:"float",decimalPlaces:0,minimum:0,maximum:50,unitType:"px"},{name:"Paddingbottom",isVisible:!0,displayName:this.locale.propertyPanel.PaddingSettings.bottom,value:this.getImageProperties().PaddingSettings.Bottom,itemType:"float",decimalPlaces:0,minimum:0,maximum:50,unitType:"px"},{name:"Paddingright",isVisible:!0,displayName:this.locale.propertyPanel.PaddingSettings.right,value:this.getImageProperties().PaddingSettings.Right,itemType:"float",decimalPlaces:0,minimum:0,maximum:50,unitType:"px"},{name:"Paddingleft",isVisible:!0,displayName:this.locale.propertyPanel.PaddingSettings.left,value:this.getImageProperties().PaddingSettings.Left,itemType:"float",decimalPlaces:0,minimum:0,maximum:50,unitType:"px"},]},{CategoryName:"Filter",DisplayName:this.locale.propertyPanel.filterCategoryText,IsVisible:this.getIgnoreFilterVisibility(),Items:[{name:"IgnoreFilter",displayName:this.locale.propertyPanel.filter.ignoreFilterActions,value:this.getImageProperties().IgnoreFilterActions,itemType:"bool"}]},{CategoryName:"Link",DisplayName:this.locale.propertyPanel.linkText,Items:[{name:"Link",value:n.prototype.useExistingLink.call(this),category:"Item",itemType:"link",enableMode:LinkEnableMode.Row}]},r,BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem.getNoDataContainerActionsProperty(this.locale.propertyPanel.noDataContainerText)]},i=this.containerPropertyItem.getContainerSettingItems(this.getImageProperties().ContainerSettings,this.controlContainer,null,this.DataGroupInfo),this.bbdesigner$.each(i.Items,function(n,t){(t.name==="ContainerTitleAlign"||t.name==="ContainerTitleColor"||t.name==="ShowWidgetBackgroundImage"||t.name==="WidgetBackgroundImageSource"||t.name==="WidgetBackgroundImageBrowse"||t.name==="WidgetBackgroundImageURL"||t.name==="WidgetBackgroundImageMode")&&(t.isVisible=!1);(t.name==="widgetTitleFont"||t.name==="widgetSubtitleFont")&&(t.autoFontSettingsInfo.isVisible=!1,t.fontSizeInfo.isVisible=!1)}),t.Items.push(i),t},t.prototype.getPatternVisibility=function(){return BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImgSource,this.getImageProperties().ImageSource)===ImgSource.ParameterizedURL.toString()?!0:!1},t.prototype.getIgnoreFilterVisibility=function(){return BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImgSource,this.getImageProperties().ImageSource)===ImgSource.ParameterizedURL.toString()?!0:!1},t.prototype.setIgnoreFilterSelection=function(){return BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImgSource,this.getImageProperties().ImageSource)===ImgSource.Local.toString()||BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImgSource,this.getImageProperties().ImageSource)===ImgSource.URL.toString()?(this.propertyPanel.updateItemDisable("bool",this.Type,"Filter","IgnoreFilter",!0),!0):(this.propertyPanel.updateItemDisable("bool",this.Type,"Filter","IgnoreFilter",!1),!1)},t.prototype.renderBrowseBox=function(n,t,i){BoldBIDashboard.isNullOrUndefined(n)?(this.propertyPanel.updateItemVisibility(this.Type,"BasicSettings","Browse",i.isVisible),this.resetConfiguration()):(this.sampleContainer=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%",display:BoldBIDashboard.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designerId+"_"+t+"_"+i.name+"_container"}),this.localFieldTable=BoldBIDashboard.buildTag("table.bbi-designer-dsconfig-table","",{width:"100%",height:"50px"},{unselectable:"on",id:this.designerId+"_image_local_table"}),this.renderBrowseTable(),this.renderUploadBox(),this.sampleContainer.append(this.localFieldTable),this.sampleContainer.append(this.uploadbox),n.append(this.sampleContainer))},t.prototype.renderBrowseTable=function(){var t=BoldBIDashboard.buildTag("tr","",{}),s=BoldBIDashboard.buildTag("td","",{}),n=BoldBIDashboard.buildTag("table","",{unselectable:"on"}),i=BoldBIDashboard.buildTag("tr","",{},{}),r=BoldBIDashboard.buildTag("tr","",{},{}),p=BoldBIDashboard.buildTag("td","",{}),u,f;this.progressTxt=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label","",{float:"left"},{id:this.designerId+"_image_progress_tr"});u=BoldBIDashboard.buildTag("td","",{},{id:this.designerId+"_image_path_error_icon_td"});f=BoldBIDashboard.buildTag("td","",{},{colspan:"2"});this.designerInstance.modules.util.renderErrIndictor(u,this.designerId);var e=BoldBIDashboard.buildTag("tr","",{height:"22.5px"},{id:this.designerId+"_image_path_td"}),h=BoldBIDashboard.buildTag("tr.e-progresserrmsg","",{height:"22.5px",display:"none"},{id:this.designerId+"_image_progresserr_tr"}),c=BoldBIDashboard.buildTag("td","",{}),w=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label","",{"font-size":"12px","font-weight":"normal"},{id:this.designerId+"_image_progresserr_tr"}),l=BoldBIDashboard.buildTag("td","",{},{colspan:"2"}),a=BoldBIDashboard.buildTag("td","",{},{}),v=BoldBIDashboard.buildTag("td","",{float:"right",width:"172px"},{});this.filePath=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-content-label","",{height:"25px","border-right":"0px","padding-bottom":"0.5px","padding-top":"0.5px",width:"214px","margin-left":"3px"},{id:this.designerId+"_image_path",type:"text",readonly:"readonly"});BoldBIDashboard.isNullOrUndefined(this.getImageProperties().ImageName)||this.filePath.val(this.getImageProperties().ImageName);var o=BoldBIDashboard.buildTag("div.bbi-dbrd-btn-secondary bbi-dbrd-btn-small e-dbrd-browse-image-button","",{display:"inline-block","margin-left":"-41px","min-width":"0px"},{id:this.designerId+"_file_datasource_browse"}),b=BoldBIDashboard.buildTag("span.bbi-designer-horizontal-browse bbi-designer-browse-icon","",{"font-size":"16px","line-height":"28px"}),y=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-top":"13px"});y.text("Browse Image");v.append(y);this.localFieldTable.append(t);t.append(v);s.append(n);t.append(s);n.append(i);i.append(p);i.append(u);n.append(e,r.clone(),r);l.append(this.filePath);e.append(l);e.append(a);a.append(o);f.append(this.progressTxt);r.append(f);c.append(w);h.append(c);o.on("click",this.bbdesigner$.proxy(this.onBrowseClick,this));o.append(b);n.append(h);this.uploadbox=BoldBIDashboard.buildTag("div","",{id:this.designerId+"_image_upload"})},t.prototype.onBrowseClick=function(){this.designerInstance.element.find("#"+this.designerId+"_image_upload .e-uploadinput").click()},t.prototype.renderUploadBox=function(){var n=this,t=BoldBIDashboard.buildTag("div","",{height:"0px"},{id:this.designerId+"_image_upload"});this.designerInstance.element.append(t);this.ejUploadBox=t.BoldBIDashboardUploadbox({width:"0px",height:"0px",uploadName:"image",extensionsAllow:".jpg,.png,.gif,.jpeg,.bmp,.emf,.jfif,.jpe,.rle,.tif,.tiff,.wmf,.dib,.ico",autoUpload:!0,showFileDetails:!1,dialogAction:{content:this.designerInstance.element},fileSize:78643200,saveUrl:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.uploadimage,fileSelect:this.bbdesigner$.proxy(this.onfileSelect,this),error:this.bbdesigner$.proxy(this.onuploadError,this),success:this.bbdesigner$.proxy(this.onuploadSuccess,this),inProgress:this.bbdesigner$.proxy(this.fileProgress,this),beforeSend:this.bbdesigner$.proxy(function(t){n.designerInstance.beforeSendRequestForUploadbox(n.designerInstance,"UploadAction",t)},this)}).data("BoldBIDashboardUploadbox");this.designerInstance.element.find(this.designerId+"_img_upload_SelectButton").hide()},t.prototype.updateCursorTpe=function(n){BoldBIDashboard.isNullOrUndefined(this.imageElement)||BoldBIDashboard.isNullOrUndefined(n)||!n.EnableLink?this.imageElement.removeClass("bbi-image-cursor-pointer"):this.imageElement.addClass("bbi-image-cursor-pointer")},t.prototype.onfileSelect=function(n){this.resetConfiguration();n.files.length!==0&&(n.files[0].size>n.model.fileSize?(n.cancel=!0,this.progressTxt.text("")):(this.designerInstance.element.find("#"+this.designerId+"_image_progress_tr").css("display","inline-block"),this.progressTxt.text("Initiating upload..."),this.fileName=this.fileExt=null,this.filePath.val(n.files[0].name)));BoldBIDashboard.browserInfo().name!=="msie"&&this.ejUploadBox._uploadFileListDelete()},t.prototype.resetConfiguration=function(){var n=this.widgetHelper.getCurrentWidgetInstance();BoldBIDashboard.isNullOrUndefined(n)||(this.designerInstance.element.find("#"+n.designerId+"_image_path").val(n.getImageProperties().ImageName),n.fileName=n.fileName,n.fileExt=n.fileExt,this.designerInstance.element.find("#"+n.designerId+"_image_progress_tr").css("display","none"))},t.prototype.fileProgress=function(n){this.progressTxt.text("Uploading..."+n.percentage+"%")},t.prototype.onuploadError=function(){this.progressTxt.text("Upload failed.")},t.prototype.onuploadSuccess=function(n){var i=this.widgetHelper.getCurrentWidgetInstance(),t,r;this.contentContainer=this.designerInstance.designerPanel.selectedReportItems[0].find(".bbi-dbrd-content-container");this.progressTxt.css("display","none");BoldBIDashboard.Dashboard.WidgetContainerHelper.hideWidgetContainerImage(this.contentContainer);BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(this.contentContainer);this.imageItem.show();t=JSON.parse(n.responseText);t&&t.Status?(i.fileExt=t.Data.ext,i.fileName=t.Data.fileId+t.Data.ext,r="data:image/"+t.Data.ext+";base64,"+t.Data.source,i.imageElement.css({display:"inline-block","background-repeat":"no-repeat","background-image":"url("+r+")"}),i.imageItem.css("display","block"),BoldBIDashboard.Dashboard.Resource.addImage(t.Data.fileId+t.Data.ext,r),i.getImageProperties().ImageName=t.Data.fileName,i.getImageProperties().ImagePath=t.Data.fileId+t.Data.ext,i.getImageProperties().IsInPackage=!0,i.updateImageMode(i.getImageProperties().Stretch.toString()),i.removeWidgetNotConfiguredInfo(),this.designerInstance.modules.serialization.notifyChange()):this.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.upload,this.locale.errorMessage.failedToUploadFile,IconType.errors,AlertType.Alert,!1,t?t.Message:null)},t.prototype.selectActionPriority=function(t){var i=this.getLinkingData(t),r=BoldBIDashboard.DashboardUtil.getPriority(this.widgetJson,i.isEnabled,BoldBIDashboard.isNullOrUndefined(this.getJson().WidgetLink)?!1:this.getJson().WidgetLink.Enable);if(this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design)switch(r){case WidgetAction.Linking:n.prototype.performLinking.call(this,i);break;case WidgetAction.WidgetLinking:this.designerInstance.modules.containerTypeWidgetHelper.doInterWidgetLinking(this,0)}},t.prototype.getLinkingData=function(){var f=this,n={isEnabled:!1,parameterDetails:[],url:"",urlLinkInfo:[]},r,i,t,u;if(!BoldBIDashboard.isNullOrUndefined(this.getImageProperties())&&(r=this.designerInstance.modules.util.getSourceData(this.DataGroupInfo,!1),this.getImageProperties().UrlLink.EnableLink&&!BoldBIDashboard.isNullOrUndefined(this.getImageProperties().UrlLink.GridUrlType)&&this.getImageProperties().UrlLink.GridUrlType.toString()===UrlLinkType[UrlLinkType.Row]&&!BoldBIDashboard.isNullOrUndefined(this.getImageProperties().UrlLink.UrlPath)&&this.getImageProperties().UrlLink.UrlPath!==""))for(i=r.filter(function(n){return f.getImageProperties().UrlLink.PassingParameters.indexOf(n.Value)!==-1}),n.url=this.getImageProperties().UrlLink.UrlPath,n.isEnabled=!0,t=0;t<i.length;t++)u=this.dataObj[0][i[t].Id],n.parameterDetails.push({parameter:i[t].Value,value:u});return n.urlLinkInfo=this.getImageProperties().UrlLink,n},t.prototype.setContainerDefaultProperties=function(){var t=n.prototype.getContainerSettings.call(this);t.EnableImageExport=t.EnablePdfExport=t.EnableExcelExport=t.EnableCsvExport=!1;t.ShowMaximize=!1},t.prototype.updateImageSize=function(){this.updateImageMode(BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImageMode,this.getImageProperties().Stretch))},t.prototype.imageItemDispose=function(){this.unwiredEvents();this.getImageProperties().ImagePath!==null&&BoldBIDashboard.Dashboard.Resource.deleteImage(this.getImageProperties().ImagePath,this.designerInstance,this.widgetJson.UniqueId);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Image)},t.prototype.getImageProperties=function(){return this.widgetJson},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.ImageItem",InternalImageReportItem,window);BoldBIDashboard.DashboardDesignerUtility.ImageItem.prototype.initialize();__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalDatePickerReportItems=function(n){function t(t){var i=n.call(this,t,"DatePicker","e-datepicker-item")||this;return i.dataValues=null,i.datePickerObj=null,i.locale=null,i.bbdesigner$=i.designerInstance.bbdesigner$,i.widgetJson=new DatePickerProperties(t),i.designerId=i.designerInstance._id,i.locale=i.designerInstance.getLocalizationContent(),i.propertyPanel=t.modules.propertyPanel,i.widgetJson.FilterSettings.ActAsMasterWidget=!0,i.dateFormat=i.designerInstance.model.localeSettings.dateFormat,i.isVisualWidget=!1,i}return __extends(t,n),t.prototype.getWidgetImage=function(){return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="0 0 324 208" version="1.1">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Date-Picker" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="Group" transform="translate(12.000000, 61.000000)">            <g id="Combo-box">                <path d="M224.468085,0.8 L290.93617,0.8 C295.354448,0.8 298.93617,4.381722 298.93617,8.8 L298.93617,77 C298.93617,81.418278 295.354448,85 290.93617,85 L224.468085,85 L224.468085,85 L224.468085,0.8 Z" id="Rectangle-Copy-9" fill="var(--widget-notconfigured-image-background1)" fill-rule="nonzero"/>                <rect id="Rectangle-Copy-8" stroke="#E8E8E8" stroke-width="6.92307692" x="3.99345336" y="4.19213481" width="292.013093" height="77.2992785" rx="8.5106383"/>            <\/g>            <path d="M274.378184,28.2451031 L276.641765,28.2451031 C278.89202,28.2451031 280.716212,30.037602 280.716212,32.2487614 L280.716212,57.6052641 C280.716212,59.8164231 278.89202,61.6089224 276.641765,61.6089224 L246.76249,61.6089224 C244.512235,61.6089224 242.688043,59.8164231 242.688043,57.6052641 L242.688043,32.2487614 C242.688043,30.037602 244.512235,28.2451031 246.76249,28.2451031 L249.026071,28.2451031 L249.026071,25.1172451 C249.026071,24.5414223 249.49901,24.0746257 250.082409,24.0746257 L251.138747,24.0746257 C251.722147,24.0746257 252.195085,24.5414223 252.195085,25.1172451 L252.195085,28.2451031 L271.20917,28.2451031 L271.20917,25.1172451 C271.20917,24.5414223 271.682108,24.0746257 272.265508,24.0746257 L273.321846,24.0746257 C273.905246,24.0746257 274.378184,24.5414223 274.378184,25.1172451 L274.378184,28.2451031 Z M245.404341,34.5008192 L277.547198,34.5008192 L277.547198,37.6286773 L245.404341,37.6286773 L245.404341,57.6052641 C245.404341,58.3423167 246.012404,58.9398169 246.76249,58.9398169 L276.641765,58.9398169 C277.391851,58.9398169 277.999914,58.3423167 277.999914,57.6052641 L277.999914,32.2487614 C277.999914,31.5117083 277.391851,30.9142087 276.641765,30.9142087 L246.76249,30.9142087 C246.012404,30.9142087 245.404341,31.5117083 245.404341,32.2487614 L245.404341,34.5008192 Z M250.082409,41.7991547 L252.195085,41.7991547 C252.778485,41.7991547 253.251423,42.265951 253.251423,42.841774 L253.251423,44.9270128 C253.251423,45.5028358 252.778485,45.9696321 252.195085,45.9696321 L250.082409,45.9696321 C249.49901,45.9696321 249.026071,45.5028358 249.026071,44.9270128 L249.026071,42.841774 C249.026071,42.265951 249.49901,41.7991547 250.082409,41.7991547 Z M250.082409,50.1401095 L252.195085,50.1401095 C252.778485,50.1401095 253.251423,50.6069058 253.251423,51.1827289 L253.251423,53.2679676 C253.251423,53.8437906 252.778485,54.3105869 252.195085,54.3105869 L250.082409,54.3105869 C249.49901,54.3105869 249.026071,53.8437906 249.026071,53.2679676 L249.026071,51.1827289 C249.026071,50.6069058 249.49901,50.1401095 250.082409,50.1401095 Z M257.476776,41.7991547 L259.589452,41.7991547 C260.172851,41.7991547 260.64579,42.265951 260.64579,42.841774 L260.64579,44.9270128 C260.64579,45.5028358 260.172851,45.9696321 259.589452,45.9696321 L257.476776,45.9696321 C256.893376,45.9696321 256.420438,45.5028358 256.420438,44.9270128 L256.420438,42.841774 C256.420438,42.265951 256.893376,41.7991547 257.476776,41.7991547 Z M257.476776,50.1401095 L259.589452,50.1401095 C260.172851,50.1401095 260.64579,50.6069058 260.64579,51.1827289 L260.64579,53.2679676 C260.64579,53.8437906 260.172851,54.3105869 259.589452,54.3105869 L257.476776,54.3105869 C256.893376,54.3105869 256.420438,53.8437906 256.420438,53.2679676 L256.420438,51.1827289 C256.420438,50.6069058 256.893376,50.1401095 257.476776,50.1401095 Z M263.814804,41.7991547 L265.92748,41.7991547 C266.510879,41.7991547 266.983818,42.265951 266.983818,42.841774 L266.983818,44.9270128 C266.983818,45.5028358 266.510879,45.9696321 265.92748,45.9696321 L263.814804,45.9696321 C263.231404,45.9696321 262.758466,45.5028358 262.758466,44.9270128 L262.758466,42.841774 C262.758466,42.265951 263.231404,41.7991547 263.814804,41.7991547 Z M263.814804,50.1401095 L265.92748,50.1401095 C266.510879,50.1401095 266.983818,50.6069058 266.983818,51.1827289 L266.983818,53.2679676 C266.983818,53.8437906 266.510879,54.3105869 265.92748,54.3105869 L263.814804,54.3105869 C263.231404,54.3105869 262.758466,53.8437906 262.758466,53.2679676 L262.758466,51.1827289 C262.758466,50.6069058 263.231404,50.1401095 263.814804,50.1401095 Z M271.20917,41.7991547 L273.321846,41.7991547 C273.905246,41.7991547 274.378184,42.265951 274.378184,42.841774 L274.378184,44.9270128 C274.378184,45.5028358 273.905246,45.9696321 273.321846,45.9696321 L271.20917,45.9696321 C270.62577,45.9696321 270.152832,45.5028358 270.152832,44.9270128 L270.152832,42.841774 C270.152832,42.265951 270.62577,41.7991547 271.20917,41.7991547 Z" id="Combined-Shape" fill="var(--widget-notconfigured-image-background3)" fill-rule="nonzero"/>        <\/g>    <\/g><\/svg>'},t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.filters,GroupId:"1093107b-a5c1-4bd3-83cb-ec6ccd40a031",Items:[{id:"ccafb315-b5f7-419a-a0f3-42cc2287deb8",widgetName:"DatePicker",widgetDisplayName:n.itemPanel.widgetTitle.datePicker,cssClass:"bbi-widgeticon bbi-designer-datepicker",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.DatePickerItem",searchCategory:["datepicker","filters"],widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.datePicker,description:n.itemPanel.widgetDescription.datePickerDesc,dataRequirement:n.itemPanel.widgetDataRequirements.filtersDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.DatePickerProperties",minRowSpan:3}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){this.setContainerDefaultProperties();this.renderDatePickerContainer(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.datepickerElement)||this.updateWidgetSize()},t.prototype.update=function(n){this.updateTitleSubtitleTheme();this.updateDatePicData(n);this.IsRendered=!0;this.updateThemeInWidget(this.designerInstance.isDarkTypeTheme())},t.prototype.canCombineRequest=function(){return!0},t.prototype.applyWidgetTheme=function(n){this.updateTitleSubtitleTheme();this.updateThemeInWidget(n);this.updateWidgetSize()},t.prototype.updateThemeInWidget=function(n){var i=BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this);if(i||BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this),!BoldBIDashboard.isNullOrUndefined(this.datepickerElement)){var t="#"+this.designerId+"Element"+this.widgetJson.UniqueName+"_popup_wrapper",r="#"+this.designerId+"Element"+this.widgetJson.UniqueName+"_wrapper",u=this.designerId+this.widgetJson.UniqueName+"Style";this.datepickerElement.addClass("e-datepicker-dbrd-theme");this.bbdesigner$(t).addClass("e-datepicker-dbrd-theme");this.bbdesigner$(r).addClass("e-datepicker-dbrd-theme");this.themeHelper.applyDatePickerTheme(this,t,n,this.getDatePickerProperties().Type===DatePickerType.Single,u);this.datepickerElement.css("background","transparent")}},t.prototype.updateTitleSubtitleTheme=function(){var n=this.designerInstance.modules.themeHelper.getDatePickerHeaderTitle(),t=this.designerInstance.modules.themeHelper.getDatePickerHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getDatePickerProperties().ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.getFieldContainer=function(){var t=new BoldBIDashboard.Dashboard.FieldContainerForUI;return t.Name="Column",t.DisplayName=this.locale.fieldContainer.column,t.ContainerType=FieldContainerType.Non_Numeric,t.CategoryCount=1,t.Required=!0,[t,n.prototype.getFilterColumn.call(this)]},t.prototype.onFieldSettingsClick=function(n,t){for(var i,r=0;r<t.length;r++)i=t[r].Name,i==="Sort"||i===DateTimeFormat.Default||i===DateTimeFormat.Date||i===DateTimeFormat.Year||i===DateTimeFormat.Month||i===DateTimeFormat.Day||i===DateTimeFormat.Quarter||i==="More"||n.FieldActualType==="bbi-designer-dataset-datetime"&&i==="RelativeDateFilter"?t[r].IsVisible=!1:n.FieldActualType==="bbi-designer-dataset-datetime"&&i==="RelativeDateOptions"&&(t[r].IsVisible=!0,this.validateFilterWidgetDateColumn(n)?t[r].IsSelected=!0:t[r].IsDisable=!(DatePickerType.Range===this.getDatePickerProperties().Type));return BoldBIDashboard.DashboardUtil.hideRenameMenuOption(t)},t.prototype.getPropertyPanelItems=function(){return this.getDatePickerPropertyPanel()},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateDatePickerItemPropertyChange(n,t,i,r)},t.prototype.updateInitialSelection=function(){},t.prototype.clearFilter=function(n){if(this.removeSelection(),BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this),this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName),this.designerInstance.canApplyTheme()){var t="#"+this.designerId+"Element"+this.widgetJson.UniqueName+"_popup_wrapper",i="#"+this.designerId+"Element"+this.widgetJson.UniqueName+"_wrapper";this.datepickerElement.addClass("e-datepicker-dbrd-theme");this.bbdesigner$(t).addClass("e-datepicker-dbrd-theme");this.bbdesigner$(i).addClass("e-datepicker-dbrd-theme")}},t.prototype.getMobileViewHeight=function(){return this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.refresh=function(){},t.prototype.dispose=function(){this.datePickerItemDispose();n.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.locale.itemPanel.widgetDataRequiredMessage.datePickerDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.getDefaultDateFormat=function(){return DateTimeFormat.Date},t.prototype.getDefaultMeasureFormat=function(){return null},t.prototype.getFieldView=function(){var t=[BoldBIDashboard.Dashboard.SupportedDataType.DateTime];return[{name:"Dimensions",displayName:this.locale.dataconfiguration.fieldView.DimensionFieldDisplayName,supportedDataTypes:t},n.prototype.getParameterColumnContainer.call(this,t)]},t.prototype.getMinMobileHeight=function(){return"90px"},t.prototype.getDatePickerPropertyPanel=function(){var n=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.widgetJson.FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo,this.widgetJson.ContainerSettings);return this.containerPropertyItem=n.containerProperties,n.propertyGridItems.Header=this.widgetJson.ContainerSettings.Title,n.propertyGridItems.SubTitle=this.widgetJson.ContainerSettings.SubTitle,n.propertyGridItems.Description=this.widgetJson.ContainerSettings.Description,n.propertyGridItems.Type=this.Type,this.bbdesigner$.each(n.containerActionsProperty.Items,function(n,t){(t.name==="ShowMaximize"||t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ImageExport"||t.name==="PDFExport"||t.name==="ViewData"||t.name==="PinWidget")&&(t.isVisible=!1)}),this.bbdesigner$.each(n.containerSettingsProperty.Items,function(n,t){(t.name==="ShowWidgetBackgroundImage"||t.name==="WidgetBackgroundImageMode"||t.name==="WidgetBackgroundImageSource"||t.name==="WidgetBackgroundImageBrowse"||t.name==="WidgetBackgroundImageURL")&&(t.isVisible=!1)}),n.propertyGridItems.Items=[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"Range",displayName:this.locale.propertyPanel.basicSettings.range,value:this.getDatePickerProperties().Type===DatePickerType.Range,itemType:"bool"},{name:"FixedCalendarSelection",displayName:this.locale.propertyPanel.basicSettings.fixedCalendarSelectionText,value:this.getDatePickerProperties().EnableFixedCalendarSelection,isVisible:this.getDatePickerProperties().Type===DatePickerType.Range,itemType:"bool"},{name:"LimitDates",displayName:this.locale.propertyPanel.basicSettings.limitDates,value:this.getDatePickerProperties().LimitDates,itemType:"bool"},{name:"HighlightAvailableDates",displayName:this.locale.propertyPanel.basicSettings.highlightAvailableDates,value:this.getDatePickerProperties().HighlightAvailableDates,itemType:"bool"},{name:"ShowLatestDate",displayName:this.locale.propertyPanel.basicSettings.showLatestDate,isVisible:this.getDatePickerProperties().Type!==DatePickerType.Range,value:this.getDatePickerProperties().ShowLatestDate,itemType:"bool"}]},n.filterSettingsProperty,n.containerSettingsProperty,n.containerActionsProperty,n.noDataContainerActionsProperty],n.propertyGridItems},t.prototype.updateDatePickerItemPropertyChange=function(n,t,i,r){var o=!1,u,f,s,e;switch(n){case"Name":this.widgetJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,i);break;case"HighlightAvailableDates":this.updateHighlightDate(i,!1);break;case"LimitDates":this.updateLimitDate(i);break;case"Range":this.updateSelectionType(i);break;case"FixedCalendarSelection":this.updateFixedCalendarSelection(i);break;case"ShowLatestDate":this.updateShowLatestDate(i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,i);break;default:o=!0}if(!o){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(u=this.designPanelInstance.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)s=u[f],s.attr("id")===this.controlContainer.attr("id")&&(e=this.bbdesigner$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,this.Type,i));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-datepicker-item",this.designerId+"_"+this.widgetJson.UniqueName,[n,i,t,r],[n,t,i,r])}},t.prototype.validateFilterWidgetDateColumn=function(n){var r=this.DataGroupInfo,i=[],t;if(!BoldBIDashboard.isNullOrUndefined(r))for(t=0;t<r.FieldContainers.length;t++)r.FieldContainers[t].Name===n.Name&&(i=r.FieldContainers[t].FieldInfos);for(t=0;t<i.length;t++)if(i[t].Name===n.Name&&i[t].FilterInfo!==null&&!BoldBIDashboard.isNullOrUndefined(i[t].FilterInfo.RelativeDateOptions))return!0;return!1},t.prototype.updateHighlightDate=function(t,i,r){if(this.getDatePickerProperties().HighlightAvailableDates=t,i)this.updateDataSourceForHighlightDates(null,i,r);else if(this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0){var u=this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(this.DataGroupInfo,this),f=n.prototype.getWidgetInfo.call(this,this.DataGroupInfo),e=this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design;this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.WidgetAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,fieldInfo:u,dataset:this.DataGroupInfo.DataSourceID,widgetInfo:f,request:AjaxRequest.Widget.toString(),selectedValuesList:"",isShowAllRecords:BoldBIDashboard.isNullOrUndefined(this.getDatePickerProperties().HighlightAvailableDates)?!1:this.getDatePickerProperties().HighlightAvailableDates,isDataSampleForViewMode:e})},{fnction:this.bbdesigner$.proxy(this.updateDataSourceForHighlightDates,this),indicator:[this.bbdesigner$.proxy(this.showLoadingIndicator,this),this.bbdesigner$.proxy(this.hideLoadingIndicator,this)]})}},t.prototype.updateLimitDate=function(n){this.getDatePickerProperties().LimitDates=n;BoldBIDashboard.isNullOrUndefined(this.datePickerObj)||(this.datePickerObj.model.limitDate=n,this.datePickerObj.redraw())},t.prototype.updateSelectionType=function(n){this.getDatePickerProperties().Type=n?DatePickerType.Range:DatePickerType.Single;BoldBIDashboard.isNullOrUndefined(this.datePickerObj)||(this.datePickerObj.model.datePickerType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DatePickerType,this.getDatePickerProperties().Type).toLowerCase(),this.datePickerObj.redraw(),this.clearFilter());this.propertyPanel.updateItemVisibility(this.Type.toString(),"BasicSettings","ShowLatestDate",!n);this.propertyPanel.updateItemVisibility(this.Type.toString(),"BasicSettings","FixedCalendarSelection",n)},t.prototype.updateFixedCalendarSelection=function(n){this.getDatePickerProperties().EnableFixedCalendarSelection=n;BoldBIDashboard.isNullOrUndefined(this.datePickerObj)||(this.datePickerObj.model.fixedCalendarSelection=n,this.datePickerObj.redraw())},t.prototype.updateShowLatestDate=function(n){this.getDatePickerProperties().ShowLatestDate=n;this.datePickerObj.model.showLatestDate=n;this.datePickerObj.redraw()},t.prototype.updateDataSourceForHighlightDates=function(n,t,i){var r=[],u;t?r=i:(this.designerInstance.modules.resource.updateColorCodeInfo(n),u=JSON.parse(n.widgetData.data),r=u.DataSource);BoldBIDashboard.isNullOrUndefined(this.datePickerObj)||(this.datePickerObj.model.highlightAvailableDates=this.getDatePickerProperties().HighlightAvailableDates,this.getDatePickerProperties().HighlightAvailableDates&&!BoldBIDashboard.isNullOrUndefined(r)&&this.datePickerObj.option("dataSource",r),this.datePickerObj.redraw())},t.prototype.renderDatePickerContainer=function(t){var i,r;try{BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));i=0;this.getDatePickerProperties().ContainerSettings.ShowHeader&&(i=this.controlHeader.outerHeight(!0));r=this.widgetJson.ContainerSettings;!BoldBIDashboard.isNullOrUndefined(r)&&!BoldBIDashboard.isNullOrUndefined(r.SubTitle)&&r.SubTitle.trim().length>0&&this.getDatePickerProperties().ContainerSettings.ShowHeader?(i+=this.controlSubHeader.outerHeight(!0),this.controlSubHeader.css("display","block")):this.getDatePickerProperties().ContainerSettings.ShowHeader&&this.controlSubHeader.css("display","none");this.datepickerItem=BoldBIDashboard.buildTag("div.e-datepickeritem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:this.getContainerSettings().ShowHeader?"calc(100% - "+i+"px)":"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder},{id:this.designerId+"Item"+this.widgetJson.UniqueName});this.contentContainer.append(this.datepickerItem);this.controlContainer.data("widgetInstance",this);this.datepickerItem.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designerId+"_designer_waiting_popup bbi-designer-loader",template:this.designerInstance.getWaitingPopupTemplate()});!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.DatePicker)}catch(u){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:u,Type:u.name})}},t.prototype.dateSelected=function(n){var f=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],o=BoldBIDashboard.isNullOrUndefined(f.IsParameterField)?!1:f.IsParameterField,u,t,h;if(this.widgetJson.FilterSettings.ActAsMasterWidget||o){var r=[],e=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],l=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Range),s=[];if(BoldBIDashboard.isNullOrUndefined(this.datePickerObj)||(u=null,BoldBIDashboard.isNullOrUndefined(n.selectedRange)?(u=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,e.DateTimeFormat),n.datePickerType===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DatePickerType,DatePickerType.Single).toLocaleLowerCase()?r={DateFormat:u,DisplayFilterList:[n.value],DateFilterList:this.masterFilterWindowInstance.getDateFilterList([n.value],!1),DateFilterType:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Exact)}:(this.datePickerObj.model.value={range:n.selectedValues.start,start:n.selectedValues.start,end:n.selectedValues.end},t=[n.selectedValues.start,n.selectedValues.end],s=DateTimeFormat.Date?this.masterFilterWindowInstance.getDateFilterList(t,!1):t,r={DateFormat:u,DisplayFilterList:t,DateFilterList:s,DateFilterType:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Exact)})):(t=[n.selectedValues.start,n.selectedValues.end],r={DateFormat:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.RelativeDate),DisplayFilterList:t,DateFilterList:t,DateFilterType:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Exact),SelectedRangeforRelativeFilter:n.selectedRange})),h={FilterInfo:r,Action:l,IsStdDateTime:!1,IsMultiSelection:!1,IsRange:n.datePickerType.toLowerCase()==="range"},this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;this.widgetJson.SelectedFilterValues=[this.masterFilterWindowInstance.updateInitialFiltersForFilterControls(e,this.widgetJson.UniqueName,e.FieldActualType,h)];BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this);this.designerInstance.modules.serialization.notifyChange();this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName)}if(o){var c=n.datePickerType===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DatePickerType,DatePickerType.Range).toLocaleLowerCase(),a=c?[n.selectedValues.start,n.selectedValues.end]:[n.value],i=new SelectedParameterValue;i.SelectedValue=a;i.HasDateRangeSelectedValues=c;i.DataSourceName=this.DataGroupInfo.DataSourceName;i.ParameterId=f.Id;this.designerInstance.modules.dynamicParameterPanel.applyParametersForFilterWidgets(i,this.Name)}},t.prototype.isApplicableDateTypeWidgetForAPIFiltering=function(){return!0},t.prototype.processFilterInformation=function(n){var r=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],w=BoldBIDashboard.isNullOrUndefined(r.IsParameterField)?!1:r.IsParameterField,f,i,o,s,h,a,v;if(w)console.error("Widgets configured with dashboard parameter is not supported for API level filtering");else{var y=n.filters,t=y.length>0?y[0].values:[],e=[],p=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Range),c=!1,l=this.widgetJson.Data.Containers,u=[];for(f=0;f<l.length;f++)if(l[f].Name.toLowerCase()==="column"){u.push(l[f]);break}for(i=0;i<u.length;i++)if(o=u[i].FieldInfos.length>0?BoldBIDashboard.isNullOrUndefined(u[i].FieldInfos[0].FilterInfo)?[]:u[i].FieldInfos[0].FilterInfo.RelativeDateOptions:[],o.length>0)for(s=0;s<t.length;s++){for(h=0;h<o.length;h++)if(o[h].DisplayText===t[s]){c=!0;break}if(c)break}if(c)console.error("Relative date filters not supported for API level filtering");else{if(a=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,r.DateTimeFormat),DatePickerType[this.getDatePickerProperties().Type].toLocaleLowerCase()===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DatePickerType,DatePickerType.Single).toLocaleLowerCase())return v=t.length>0?[t[0]]:t,e={DateFormat:a,DisplayFilterList:v,DateFilterList:this.masterFilterWindowInstance.getDateFilterList(v,!1),DateFilterType:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Exact)},this.updateSelectedFilterValueForWidgetFilterAPI(e,p,r),!0;if(t.length===2&&DatePickerType[this.getDatePickerProperties().Type].toLocaleLowerCase()===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DatePickerType,DatePickerType.Range).toLocaleLowerCase())return e={DateFormat:a,DisplayFilterList:t,DateFilterList:DateTimeFormat.Date?this.masterFilterWindowInstance.getDateFilterList(t,!1):t,DateFilterType:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Exact)},this.updateSelectedFilterValueForWidgetFilterAPI(e,p,r),!0;console.error('Please enter valid filter values for "'+this.widgetJson.ContainerSettings.Title+'" to apply filter')}}return!1},t.prototype.updateSelectedFilterValueForWidgetFilterAPI=function(n,t,i){var r={FilterInfo:n,Action:t,IsStdDateTime:!1,IsMultiSelection:!1,IsRange:DatePickerType[this.getDatePickerProperties().Type].toLowerCase()==="range"};this.widgetJson.SelectedFilterValues=[];this.widgetJson.SelectedFilterValues=[this.masterFilterWindowInstance.updateInitialFiltersForFilterControls(i,this.widgetJson.UniqueName,i.FieldActualType,r)]},t.prototype.updateDatePicData=function(n){var i,e,s,r,o,h,c;BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this);BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this);this.dataValues=n;var u="",f="",t=BoldBIDashboard.isNullOrUndefined(n.Result)?n:n.Result;this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo);BoldBIDashboard.isNullOrUndefined(t.Error)||t.Error?BoldBIDashboard.isNullOrUndefined(t.Message)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.widgetContainerHelper.showControlError(this,t),this.removeSelection()):(Object.keys(t.widgetData).length>0&&t.widgetData.data!=="{}"&&BoldBIDashboard.isNullOrUndefined(t.isDataSetEmpty)?(i=JSON.parse(t.widgetData.data),i.noDataAvailable==="false"?(this.datepickerItem.show(),u=i.MinDate,f=i.MaxDate,u!==""&&f!==""?(e=this.cellInfo.RowSpan>2?30:25,s={cssClass:"bbi-dbrd-control",startDate:i.MinDate,endDate:i.MaxDate,showLatestDate:this.getDatePickerProperties().ShowLatestDate,limitDate:this.getDatePickerProperties().LimitDates,locale:{fromLabel:this.locale.colorCustomAdvanceLocale.from,toLabel:this.locale.colorCustomAdvanceLocale.to,applyLabel:this.locale.dialogOptions.applyButtonText,cancelLabel:this.locale.dialogOptions.cancelButtonText,format:this.dateFormat,daysOfWeek:[this.locale.dateTime.su,this.locale.dateTime.mo,this.locale.dateTime.tu,this.locale.dateTime.we,this.locale.dateTime.th,this.locale.dateTime.fr,this.locale.dateTime.sa],monthNames:[this.locale.dateTime.jan,this.locale.dateTime.feb,this.locale.dateTime.mar,this.locale.dateTime.apr,this.locale.dateTime.may,this.locale.dateTime.jun,this.locale.dateTime.jul,this.locale.dateTime.aug,this.locale.dateTime.sep,this.locale.dateTime.oct,this.locale.dateTime.nov,this.locale.dateTime.dec,]},value:null,height:e.toString(),highlightAvailableDates:this.getDatePickerProperties().HighlightAvailableDates,fixedCalendarSelection:this.getDatePickerProperties().EnableFixedCalendarSelection,datePickerType:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DatePickerType,this.getDatePickerProperties().Type).toLowerCase(),selected:this.bbdesigner$.proxy(this.dateSelected,this),popupShow:this.bbdesigner$.proxy(this.popupShow,this)},BoldBIDashboard.isNullOrUndefined(this.datePickerObj)?(this.datepickerElement=BoldBIDashboard.buildTag("input.e-datepicker-element","",{width:"100%","box-sizing":"border-box",position:"relative","font-size":"12px","background-color":"transparent"},{id:this.designerId+"Element"+this.widgetJson.UniqueName,autocomplete:"off"}),this.datepickerItem.append(this.datepickerElement),this.datepickerItem.css("padding","5px"),this.datepickerElement.BoldBIDashboardDashboardDatePicker(s),this.datePickerObj=this.datepickerElement.data("BoldBIDashboardDashboardDatePicker"),BoldBIDashboard.isNullOrUndefined(n.RelativeDates)||(this.datePickerObj.option("ranges",[]),this.datePickerObj.option("ranges",JSON.parse(n.RelativeDates))),r=this.contentContainer.innerHeight()/2-(e/2+5),r<0&&(r=0),o="#"+this.designerId+"Element"+this.widgetJson.UniqueName+"_wrapper",this.ContentContainer.innerHeight()<this.datepickerElement.height()?this.bbdesigner$(o).css("visibility","hidden"):this.bbdesigner$(o).css("visibility","visible"),this.datepickerItem.css("padding-top",r)):(this.datePickerObj.option("startDate",u),this.datePickerObj.option("endDate",f),BoldBIDashboard.isNullOrUndefined(n.Result)||(t=n.Result,BoldBIDashboard.isNullOrUndefined(n.RelativeDates)||(this.datePickerObj.option("ranges",[]),this.datePickerObj.option("ranges",JSON.parse(n.RelativeDates)))),this.datePickerObj.redraw()),this.updateOrRemovedIntialSelection(n.RelativeDates),BoldBIDashboard.isNullOrUndefined(this.datePickerObj)||BoldBIDashboard.isNullOrUndefined(this.datePickerObj.model)||this.updateHighlightDate(this.getDatePickerProperties().HighlightAvailableDates,!0,i.DataSource)):(this.datepickerItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this)),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this)):(this.datepickerItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this))):(Object.keys(t.widgetData).length===0&&t.columnBindings==="{}"||!BoldBIDashboard.isNullOrUndefined(t.isDataSetEmpty)&&t.isDataSetEmpty)&&(this.datepickerItem.hide(),this.removeSelection(),BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this)),this.setDatePickerTop(),this.propertyPanel.updateItemVisibility(this.Type.toString(),"BasicSettings","ShowLatestDate",this.getDatePickerProperties().Type!==DatePickerType.Range));this.designerInstance.canApplyTheme()&&(h=this.themeHelper.getDatePickerHeaderTitle(),c=this.themeHelper.getDatePickerHeaderSubTitle(),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getDatePickerProperties().ContainerSettings.TextColor,h),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,c))},t.prototype.popupShow=function(){this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.view&&this.changePopUpElementPosition()},t.prototype.changePopUpElementPosition=function(){var n=this.bbdesigner$("#"+this.designerId+"Element"+this.widgetJson.UniqueName+"_popup_wrapper"),i=this.designerInstance.element,r=document.fullscreenElement!==null,t=this;n.length>0&&this.designerInstance.element.find(n).length===0&&r?i.append(n):i.find(n).length>0&&!r&&this.designerInstance.element.parents("body").append(n);setTimeout(function(){for(var n,u=t.designerId+"Element"+t.widgetJson.UniqueName+"_popup_wrapper",i=t.bbdesigner$("[id="+u+"]"),r=0;r<i.length;r++)n=t.bbdesigner$(i[r]),n.length>0&&n.is(":visible")?n.css("z-index",BoldBIDashboard.getMaxZindex()):i.length>1&&n.remove()},100)},t.prototype.updateOrRemovedIntialSelection=function(n){var i=BoldBIDashboard.isNullOrUndefined(n)?null:JSON.parse(n),c,u,h,t,a,v;if(this.widgetJson.FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(this.datePickerObj)&&this.widgetJson.SelectedFilterValues.length>0){c=this.datePickerObj.model.selected;this.datePickerObj.model.selected=null;var r=!0,e="",o=this.widgetJson.SelectedFilterValues[0].InitialDateFilter.DateFilterList,s=!BoldBIDashboard.isNullOrUndefined(i)&&this.widgetJson.SelectedFilterValues[0].InitialDateFilter.DateFormat==="RelativeDate";if(s){for(u=Object.keys(i),h=this.widgetJson.SelectedFilterValues[0].InitialDateFilter.SelectedRangeforRelativeFilter,t=0;t<u.length;t++)if(u[t]===h){r=!1;e=u[t];this.widgetJson.SelectedFilterValues[0].InitialDateFilter.DateFilterList=this.widgetJson.SelectedFilterValues[0].InitialDateFilter.DisplayDateFilterList=i[h];break}}else r=!1;if(r)this.removeSelection();else{var f=s?i[e]:null,y=BoldBIDashboard.isNullOrUndefined(f)?BoldBIDashboard.parseDate(o[0],this.dateFormat):f[0],l=BoldBIDashboard.format(y,this.datePickerObj.format);this.getDatePickerProperties().Type===DatePickerType.Range?(a=BoldBIDashboard.isNullOrUndefined(f)?BoldBIDashboard.parseDate(o[1],this.dateFormat):f[1],v=BoldBIDashboard.format(a,this.datePickerObj.format),this.datePickerObj.model.value={range:s?e:o[0],start:l,end:v}):this.datePickerObj.model.value={range:"",start:l,end:""};this.datePickerObj.redraw()}this.datePickerObj.model.selected=c;r||BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this)}else BoldBIDashboard.isNullOrUndefined(this.datePickerObj)||(this.datePickerObj.model.value={range:"",start:"",end:""},this.isRelativeFilterRemoved()&&this.datePickerObj.option("ranges",[]),this.datePickerObj.redraw())},t.prototype.getDatePickerProperties=function(){return this.widgetJson},t.prototype.showLoadingIndicator=function(){var n=this.widgetHelper.getCurrentWidgetInstance();n.contentContainer.find(".e-designer-waitingpopup").show()},t.prototype.hideLoadingIndicator=function(){this.designerInstance.element.find("#"+this.designerId+"Item"+this.widgetJson.UniqueName).BoldBIDashboardWaitingPopup("hide")},t.prototype.removeSelection=function(){var t,n;BoldBIDashboard.isNullOrUndefined(this.datePickerObj)||(this.datePickerObj.model.value={range:"",start:"",end:""},this.isRelativeFilterRemoved()&&this.datePickerObj.option("ranges",[]),this.datePickerObj.redraw());BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this);this.widgetJson.SelectedFilterValues=[];t=!1;this.DataGroupInfo.FieldContainers.length>0&&(n=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],t=!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.IsParameterField)?n.IsParameterField:!1);t||this.designerInstance.modules.serialization.notifyChange()},t.prototype.isRelativeFilterRemoved=function(){return this.DataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos)&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos[0])&&(BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos[0].FilterInfo)||BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos[0].FilterInfo.RelativeDateOptions))},t.prototype.updateControlContainerPadding=function(){if(BoldBIDashboard.isNullOrUndefined(this.getContainerSettings().WidgetPaddingInfo)&&(this.getContainerSettings().WidgetPaddingInfo=new WidgetPaddingInfo,this.getContainerSettings().WidgetPaddingInfo.AutoPadding=!0,this.getContainerSettings().WidgetPaddingInfo.Padding=this.getControlContainerPaddingValue()),!BoldBIDashboard.isNullOrUndefined(this.controlContainer)&&this.controlContainer.length>0){var n=this.controlContainer.find(".bbi-dbrd-control-container-wrapper");n[0].style.padding="0px 8px"}},t.prototype.updateWidgetSize=function(){if(BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this))this.widgetContainerHelper.showControlError(this,this.dataValues);else{var n="#"+this.designerId+"Element"+this.widgetJson.UniqueName+"_wrapper";this.ContentContainer.innerHeight()<this.datepickerElement.height()?this.bbdesigner$(n).css("visibility","hidden"):this.bbdesigner$(n).css("visibility","visible");this.setDatePickerTop()}},t.prototype.setDatePickerTop=function(){var n=this.cellInfo.RowSpan>2?30:25;if(this.controlContainer.find(".bbi-dbrd-control-header").show(),this.cellInfo.RowSpan>1&&!BoldBIDashboard.isNullOrUndefined(this.datepickerElement)){var i=n-2,r=this.widgetJson.ContainerSettings.ShowHeader?this.controlContainer.find(".bbi-dbrd-control-header").height():0,t=(this.controlContainer.innerHeight()-(r+11+i))/2;t=t<0?0:t;this.datepickerItem.css("padding","4px 0px 0px 0px");this.contentContainer.css({padding:"0px",overflow:"visible"});this.controlContainer.find(".bbi-dbrd-control-container-wrapper").css("padding-top",t+"px");this.datepickerItem.find(".e-dashboarddatepicker-wrapper").css({height:n+"px",visibility:"visible"});this.datepickerItem.find(".e-datepicker-element").css({height:n+"px"})}else this.datepickerItem.css("padding","0px"),this.contentContainer.css({padding:"0px",overflow:"hidden"}),this.controlContainer.find(".bbi-dbrd-control-container-wrapper").css("padding-top","0px"),this.datepickerItem.find(".e-dashboarddatepicker-wrapper").css({height:n+"px",visibility:"visible"}),this.datepickerItem.find(".e-datepicker-element").css({height:n+"px"});BoldBIDashboard.isNullOrUndefined(this.datePickerObj)||this.datePickerObj.option("height",this.cellInfo.RowSpan>2?"30":"25")},t.prototype.setContainerDefaultProperties=function(){var t=n.prototype.getContainerSettings.call(this);t.EnableImageExport=t.EnablePdfExport=t.EnableExcelExport=t.EnableCsvExport=!1;t.ShowMaximize=!1;t.PinWidget=!1;t.ViewData=!1},t.prototype.datePickerItemDispose=function(){BoldBIDashboard.isNullOrUndefined(this.datePickerObj)||this.datePickerObj.destroy();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.DatePicker)},t.prototype.updateSubTitleForContainer=function(){if(this.getContainerSettings().ShowHeader&&!BoldBIDashboard.isNullOrUndefined(this.getContainerSettings().SubTitle)&&this.getContainerSettings().SubTitle!==""){var n=this.controlContainer.find(".bbi-dbrd-control-header").height();this.cellInfo.RowSpan<=2?(this.controlContainer.find(".bbi-dbrd-control-sub-header").css("display","none"),n=this.controlContainer.find(".bbi-dbrd-control-header").outerHeight()):(this.controlContainer.find(".bbi-dbrd-control-sub-header").css("display","block"),n=n+this.controlContainer.find(".bbi-dbrd-control-sub-header").outerHeight());this.contentContainer.css("height","calc(100% - "+n+"px)");this.IsRendered&&this.updateSize(this.cellInfo)}},t.prototype.isParamSupported=function(){return!0},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.DatePickerItem",InternalDatePickerReportItems,window);BoldBIDashboard.DashboardDesignerUtility.DatePickerItem.prototype.initialize();__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalPeriodComparisonItem=function(n){function t(t){var i=n.call(this,t,"PeriodOverPeriod","e-pop-item")||this;return i.dateRange=[],i.compareRange=[],i.minMaxDates=[],i.locale=null,i.bbdesigner$=i.designerInstance.bbdesigner$,i.locale=t.getLocalizationContent(),i.IsPoPWidget=!0,i.designer=t,i.dateFormat=i.designer.model.localeSettings.dateFormat,i.designerId=i.designerInstance._id,i.widgetJson=new PoPProperties(t),i.propertyPanel=t.modules.propertyPanel,i.globalize=new ejdashboard.base.Internationalization,i.isVisualWidget=!1,i.filterConfigInfo=i.designerInstance.modules.masterSlaveFilter,i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.filters,GroupId:"1093107b-a5c1-4bd3-83cb-ec6ccd40a031",Items:[{id:"d72bc6c7-178f-4e82-a798-8c1b9589b7ef",widgetName:"PeriodOverPeriod",widgetDisplayName:n.itemPanel.widgetTitle.pop,cssClass:"bbi-widgeticon bbi-designer-widget-pop",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.PoPItem",searchCategory:["periodoverperiod","pop","filters"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.pop,description:n.itemPanel.widgetDescription.popDesc,dataRequirement:n.itemPanel.widgetDataRequirements.popDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.PoPProperties",minRowSpan:4,minColSpan:8}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.getWidgetImage=function(){return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><!-- Generator: Sketch 63.1 (92452) - https://sketch.com --><title>Pop<\/title><desc>Created with Sketch.<\/desc><g id="Pop" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Group-11" transform="translate(12.000000, 12.000000)"><g id="Group-10"><g id="Group-8" transform="translate(189.437177, 57.814208)" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero"><rect id="Rectangle" x="0" y="0" width="21" height="21.1147541"><\/rect><rect id="Rectangle-Copy-10" x="51" y="0" width="21" height="21.1147541"><\/rect><\/g><g id="Group-8-Copy" transform="translate(189.437177, 100.536493)" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero"><rect id="Rectangle" x="0" y="0" width="21" height="21.1147541"><\/rect><rect id="Rectangle-Copy-10" x="51" y="0" width="21" height="21.1147541"><\/rect><\/g><g id="Group-9" transform="translate(189.437177, 143.258778)" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero"><rect id="Rectangle-Copy-13" x="0" y="0" width="21" height="21.1147541"><\/rect><rect id="Rectangle-Copy-14" x="51" y="0" width="21" height="21.1147541"><\/rect><\/g><path d="M4.05324095,42.3164772 L143.661134,42.3164772 M156.437177,42.5360337 L295.161134,42.5360337" id="Shape" stroke="#CFCCCC" stroke-width="7.57728834"><\/path><path d="M63.608611,97.1977097 C61.5100396,97.1977097 66.6926795,97.1977097 79.1565305,97.1977097 C109.092248,97.1977097 161.568273,97.1977097 236.584606,97.1977097 L63.608611,97.1977097 Z" id="Path-3-Copy" stroke="#CFCCCC" stroke-width="7.58" transform="translate(149.869792, 97.197710) rotate(-90.000000) translate(-149.869792, -97.197710) "><\/path><path d="M54.1338113,5.53005464 C56.0115864,5.53005464 59.3631347,5.53005464 64.1884561,5.53005464" id="Path-3-Copy-Copy" stroke="#CFCCCC" stroke-width="9.09274601" stroke-linecap="round" transform="translate(59.161134, 5.530055) rotate(-90.000000) translate(-59.161134, -5.530055) "><\/path><path d="M239.133811,5.53005464 C241.011586,5.53005464 244.363135,5.53005464 249.188456,5.53005464" id="Path-3-Copy-Copy" stroke="#CFCCCC" stroke-width="9.09274601" stroke-linecap="round" transform="translate(244.161134, 5.530055) rotate(-90.000000) translate(-244.161134, -5.530055) "><\/path><path d="M156.437177,15.0720121 L289.01669,15.0720121 C294.543128,15.0720121 299.023191,19.1120918 299.023191,24.0957826 L299.023191,163.222668 C299.023191,172.193311 290.959077,179.465455 281.011489,179.465455 L156.297097,179.465455 L156.335685,179.465455 M143.246003,179.465455 L17.9894911,179.465455 C8.05416949,179.465455 0,172.193311 0,163.222668 L0,24.0957826 C0,19.1120918 4.47453861,15.0720121 9.9941617,15.0720121 L143.661134,15.0720121" id="Shape" stroke="#EDEDED" stroke-width="9"><\/path><g id="Group-8" transform="translate(37.437177, 57.814208)" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero"><rect id="Rectangle" x="0" y="2.30926389e-13" width="21" height="21.1147541"><\/rect><rect id="Rectangle-Copy-10" x="51" y="2.30926389e-13" width="21" height="21.1147541"><\/rect><\/g><g id="Group-8-Copy" transform="translate(37.437177, 100.536493)" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero"><rect id="Rectangle" x="0" y="-2.22044605e-13" width="21" height="21.1147541"><\/rect><rect id="Rectangle-Copy-10" x="51" y="-2.22044605e-13" width="21" height="21.1147541"><\/rect><\/g><g id="Group-9" transform="translate(37.437177, 143.258778)" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero"><rect id="Rectangle-Copy-13" x="0" y="-2.29150032e-13" width="21" height="21.1147541"><\/rect><rect id="Rectangle-Copy-14" x="51" y="-2.29150032e-13" width="21" height="21.1147541"><\/rect><\/g><\/g><\/g><\/g><\/svg>'},t.prototype.init=function(n,t){this.setContainerDefaultProperties();this.renderPoP(t)},t.prototype.setContainerDefaultProperties=function(){var t=n.prototype.getContainerSettings.call(this);t.EnableImageExport=t.EnablePdfExport=t.EnableExcelExport=t.EnableCsvExport=!1;t.ShowMaximize=!1;t.PinWidget=!1;t.ViewData=!1},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);this.updatePoPSize()},t.prototype.update=function(n){this.updateTitleSubtitleTheme();this.updatePoPData(n);this.updateThemeInWidget();this.IsRendered=!0},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej2.calendars.all.min.js",NameSpace:"ejdashboard.calendars.DatePicker"},DependentScripts:[]}},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,"ejdashboard.calendars.DatePicker")},t.prototype.canCombineRequest=function(){return!0},t.prototype.getFieldContainer=function(){var t=new BoldBIDashboard.Dashboard.FieldContainerForUI;return t.Name="Column",t.DisplayName=this.locale.fieldContainer.column,t.ContainerType=FieldContainerType.Non_Numeric,t.CategoryCount=1,t.Required=!0,[t,n.prototype.getFilterColumn.call(this)]},t.prototype.getDefaultDateFormat=function(){return DateTimeFormat.Date},t.prototype.getDefaultMeasureFormat=function(){return null},t.prototype.getFieldView=function(){return[{name:"Dimensions",displayName:this.locale.dataconfiguration.fieldView.DimensionFieldDisplayName,supportedDataTypes:[BoldBIDashboard.Dashboard.SupportedDataType.DateTime]}]},t.prototype.onFieldSettingsClick=function(n,t){for(var i,r=0;r<t.length;r++)i=t[r].Name,i==="Sort"||i===DateTimeFormat.Default||i===DateTimeFormat.Date||i===DateTimeFormat.Year||i===DateTimeFormat.Month||i===DateTimeFormat.Day||i===DateTimeFormat.Quarter||i==="More"||n.FieldActualType==="bbi-designer-dataset-datetime"&&i==="RelativeDateFilter"?t[r].IsVisible=!1:n.FieldActualType==="bbi-designer-dataset-datetime"&&i==="RelativeDateOptions"&&(t[r].IsVisible=!1);return BoldBIDashboard.DashboardUtil.hideRenameMenuOption(t)},t.prototype.getPropertyPanelItems=function(){return this.getPoPPropertyPanel()},t.prototype.updatePropertyChange=function(n,t,i,r){this.updatePoPProperties(n,t,i,r)},t.prototype.updateInitialSelection=function(){},t.prototype.clearFilter=function(){this.widgetJson.SelectedFilterValues=[];this.minMaxDates.length>1&&this.isFieldConfigured()?(this.updateDateRanges(this.minMaxDates[0],this.minMaxDates[1]),this.popInstance&&(this.popInstance.dateRange=this.dateRange,this.popInstance.compareRange=this.compareRange,this.popInstance.refresh(),BoldBIDashboard.Dashboard.WidgetHelper.showInfoIcon(this.locale.popNotification.masterWidgetNoSlaveText,this),this.filterConfigInfo.updatePoPSettings())):this.isFieldConfigured()||BoldBIDashboard.Dashboard.WidgetHelper.hideInfoIcon(this);this.designerInstance.modules.serialization.notifyChange();this.designerInstance.triggerActionCompleteForClearWidgetFilter(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName)},t.prototype.getMobileViewHeight=function(){return this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.refresh=function(){},t.prototype.dispose=function(){this.disposePoP();n.prototype.dispose.call(this)},t.prototype.getMinMobileHeight=function(){return"125px"},t.prototype.renderPoP=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));this.renderPoPElement();!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.PeriodOverPeriod)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.renderPoPElement=function(){this.popItem=BoldBIDashboard.buildTag("div.e-popitem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder,overflow:"hidden"},{id:this.designerId+"popItem"+this.widgetJson.UniqueName});this.popElement=BoldBIDashboard.buildTag("div.e-pop-element","",{width:"100%",height:"100%",position:"relative","background-color":"white","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designerId+"popElement"+this.widgetJson.UniqueName});this.popItem.append(this.popElement);this.contentContainer.append(this.popItem);this.controlContainer.data("widgetInstance",this)},t.prototype.applyWidgetTheme=function(){this.updateTitleSubtitleTheme();this.updateThemeInWidget()},t.prototype.updateThemeInWidget=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)?(this.popInstance.enableCustomTheme=!0,this.popInstance.customThemeSettings=this.getCustomThemeStyle(),this.popInstance.refresh(),this.updateTheme()):BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this)},t.prototype.updateTitleSubtitleTheme=function(){var n=this.designerInstance.modules.themeHelper.getPOPHeaderTitle(),t=this.designerInstance.modules.themeHelper.getPOPHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.widgetJson.ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.updateTheme=function(){var t=[],n=[],f,e,o,s,h,c,l,a,v,y,p,w,r,u,b,k,d,g,nt,tt;n.push(".e-pop-element.e-control .e-startrange-label");var it=this.designerInstance.modules.themeHelper.getPoPContainerDateRangelabelFont(),rt=this.designerInstance.modules.themeHelper.getContainerdateRangeLabelColor(),i="\tcolor: "+rt+" !important;\n"+it;t.push({key:n+"",value:i});n=[];n.push(".e-pop-element.e-control .e-endrange-label");f=this.designerInstance.modules.themeHelper.getPoPContainerCompareRangelabelFont();e=this.designerInstance.modules.themeHelper.getContainerCompareRangeLabelColor();i="\tcolor: "+e+" !important;\n"+f;t.push({key:n+"",value:i});n=[];n.push(".e-pop-element.e-control .e-vs-label");o=this.designerInstance.modules.themeHelper.getPoPContainerVSlabelFont();s=this.designerInstance.modules.themeHelper.getContainerVSLabelColor();i="\tcolor: "+s+" !important;\n"+o;t.push({key:n+"",value:i});n=[];n.push(".e-daterangecomparison .e-date-range-container .e-range-header .e-daterange-title-label .e-fontcustomcolor-style");h=this.designerInstance.modules.themeHelper.getPoPDateRangeRelativeHeaderFont();t.push({key:n+"",value:h});n=[];n.push(".e-daterangecomparison .e-date-range-container .e-range-header .relative-date-range");c=this.designerInstance.modules.themeHelper.getPoPDateRangeRelativeLabelFont();t.push({key:n+"",value:c});n=[];n.push(".e-daterangecomparison .e-date-range-container .e-range-header .e-comparerange-title-label .e-fontcustomcolor-style");l=this.designerInstance.modules.themeHelper.getPoPCompareRangeRelativeHeaderFont();t.push({key:n+"",value:l});n=[];n.push(".e-daterangecomparison .e-date-range-container .e-range-header .relative-compare-range");a=this.designerInstance.modules.themeHelper.getPoPCompareRangeRelativeLabelFont();t.push({key:n+"",value:a});n=[];n.push(".e-daterangecomparison .e-date-range-container .e-range-header .e-left-combobox input.e-input",".e-daterangecomparison .e-date-range-container .e-range-header .e-left-combobox .e-input-group");v=this.designerInstance.modules.themeHelper.getPoPDateRangeRelativeComboboxFont();t.push({key:n+"",value:v});n=[];n.push(".e-daterangecomparison-left-dropdownlist .e-list-item, .e-daterangecomparison-left-dropdownlist .e-list-item");y=this.designerInstance.modules.themeHelper.getPoPDateRangeRelativeComboboxPopupFont();t.push({key:n+"",value:y});n=[];n.push(".e-daterangecomparison .e-date-range-container .e-range-header .e-right-combobox input.e-input",".e-daterangecomparison .e-date-range-container .e-range-header .e-right-combobox .e-input-group");p=this.designerInstance.modules.themeHelper.getPoPCompareRangeRelativeComboboxFont();t.push({key:n+"",value:p});n=[];n.push(".e-daterangecomparison-right-dropdownlist .e-list-item, .e-daterangecomparison-left-dropdownlist .e-list-item");w=this.designerInstance.modules.themeHelper.getPoPCompareRangeRelativeComboboxPopupFont();t.push({key:n+"",value:w});n=[];n.push(".e-daterangecomparison .e-daterange  .e-header .e-title",".e-daterangecomparison  .e-daterange .e-calendar .e-week-header th");r=this.designerInstance.modules.themeHelper.getPoPDateRangeWeekHeaderFont();t.push({key:n+"",value:this.designerInstance.modules.themeHelper.getFontStyleCssValue(r.size,r.weight,r.family)});n=[];n.push(".e-daterangecomparison .e-daterange .e-calendar .e-header .e-date-icon-prev",".e-daterangecomparison .e-daterange .e-header .e-date-icon-next");t.push({key:n+"",value:this.designerInstance.modules.themeHelper.getFontStyleCssValue(r.size,r.weight)});n=[];n.push(".e-daterangecomparison .e-comparerange .e-calendar .e-header .e-title",".e-daterangecomparison .e-comparerange .e-calendar .e-week-header th");u=this.designerInstance.modules.themeHelper.getPoPCompareRangeWeekHeaderFont();t.push({key:n+"",value:this.designerInstance.modules.themeHelper.getFontStyleCssValue(u.size,u.weight,u.family)});n=[];n.push(".e-daterangecomparison .e-comparerange  .e-calendar .e-header .e-date-icon-prev",".e-daterangecomparison .e-comparerange .e-calendar .e-header .e-date-icon-next");t.push({key:n+"",value:this.designerInstance.modules.themeHelper.getFontStyleCssValue(u.size,u.weight)});n=[];n.push(".e-daterangecomparison .e-daterange .e-control.e-calendar .e-content td>span.e-day",".e-daterangecomparison .e-daterange .e-control.e-calendar .e-content td>span.e-day");b=this.designerInstance.modules.themeHelper.getPoPDateRangeCalenderFont();t.push({key:n+"",value:b});n=[];n.push(".e-daterangecomparison .e-comparerange .e-control.e-calendar .e-content td>span.e-day",".e-daterangecomparison .e-comparerange .e-control.e-calendar .e-content td>span.e-day");k=this.designerInstance.modules.themeHelper.getPoPCompareRangeCalenderFont();t.push({key:n+"",value:k});n.push(".e-daterangecomparison .e-range-header .vs-label");d=this.designerInstance.modules.themeHelper.getPoPDialogVSLabelFont();g=this.designerInstance.modules.themeHelper.getPoPDialogVSLabelColor();i="\tcolor: "+g+" !important;\n"+d;t.push({key:n+"",value:i});n=[];n.push(".e-daterangecomparison.e-popup .e-footer .e-apply.e-btn");nt=this.designerInstance.modules.themeHelper.getPoPDialogFooterApplyButtonFont();t.push({key:n+"",value:nt});n=[];n.push(".e-daterangecomparison.e-popup .e-footer .e-cancel.e-btn");tt=this.designerInstance.modules.themeHelper.getPoPDialogFooterCancelButtonFont();t.push({key:n+"",value:tt});this.designerInstance.modules.themeHelper.createandAppendCustomStyle(this.designerId+"Element"+this.widgetJson.UniqueName+"_POPStyle",t)},t.prototype.initializePoPInstance=function(){var n="-";this.dateFormat.indexOf("-")>=0&&(n="to");this.popInstance=new DateRangeComparison({relativeDateRanges:this.getPresetCollection(),readonly:!0,separator:n,format:this.dateFormat,enableCustomTheme:!0,localeStrings:{ApplyText:this.locale.popWidget.applyText,CancelText:this.locale.popWidget.cancelText,CompareTo:this.locale.popWidget.compareTo,DateRange:this.locale.popWidget.dateRange,VsLabel:this.locale.popWidget.vsLabel,Custom:this.locale.popWidget.custom,PeriodComparison:this.locale.popWidget.periodComparison,PreviousPeriod:this.locale.popWidget.previousPeriod,PreviousYear:this.locale.popWidget.previousYear},customThemeSettings:this.getCustomThemeStyle(),dateRange:this.dateRange,compareRange:this.compareRange,change:this.bbdesigner$.proxy(this.periodChanged,this)});this.popInstance.appendTo(this.popElement[0])},t.prototype.getCustomThemeStyle=function(){return{mainView:{background:"transparent",dateRangeLabelColor:this.designerInstance.modules.themeHelper.getContainerdateRangeLabelColor(),compareRangeLabelColor:this.designerInstance.modules.themeHelper.getContainerCompareRangeLabelColor(),buttonContainerColor:this.designerInstance.isDarkTypeTheme()?"#f5f5f5":"var(--designer-text-color)"},dialog:{background:this.designerInstance.modules.themeHelper.getDialogBackgroundColor(),dateRange:{header:{foreground:"#ffffff",relativeLabelColor:this.designerInstance.modules.themeHelper.getDateRangeRelativeLabelColor(),relativeHeader:{background:this.designerInstance.modules.themeHelper.getDateRangeRelativeHeaderBackgroundColor(),foreground:this.designerInstance.modules.themeHelper.getDateRangeRelativeHeaderForgroundColor()},relativeComboBox:{background:this.designerInstance.modules.themeHelper.getDateRangeRelativeComboBoxBackgroundColor(),foreground:this.designerInstance.modules.themeHelper.getDateRangeRelativeComboBoxTextColor(),popup:{background:"transparent",foreground:this.designerInstance.modules.themeHelper.getDateRangeRelativeComboBoxPopupTextColor()}}},calendar:{background:"transparent",foreground:this.designerInstance.modules.themeHelper.getDateRangeCalendarContentForeground(),hoverColor:this.designerInstance.modules.themeHelper.getDateRangeCalendarContentHoverColor(),highlightColor:this.designerInstance.modules.themeHelper.getDateRangeCalendarContentHighlightColor(),selectionColor:this.designerInstance.modules.themeHelper.getDateRangeCalendarContentSelectionColor()}},compareRange:{header:{foreground:"#ffffff",relativeLabelColor:this.designerInstance.modules.themeHelper.getCompareRangeRelativeLabelColor(),relativeHeader:{background:this.designerInstance.modules.themeHelper.getCompareRangeRelativeHeaderBackgroundColor(),foreground:this.designerInstance.modules.themeHelper.getCompareRangeRelativeHeaderForgroundColor()},relativeComboBox:{background:this.designerInstance.modules.themeHelper.getCompareRangeRelativeComboBoxBackgroundColor(),foreground:this.designerInstance.modules.themeHelper.getCompareRangeRelativeComboBoxTextColor(),popup:{background:"transparent",foreground:this.designerInstance.modules.themeHelper.getCompareRangeRelativeComboBoxPopupTextColor()}}},calendar:{background:"transparent",foreground:this.designerInstance.modules.themeHelper.getCompareRangeCalendarContentForeground(),hoverColor:this.designerInstance.modules.themeHelper.getCompareRangeCalendarContentHoverColor(),highlightColor:this.designerInstance.modules.themeHelper.getCompareRangeCalendarContentHighlightColor(),selectionColor:this.designerInstance.modules.themeHelper.getCompareRangeCalendarContentSelectionColor()}},footer:{background:this.designerInstance.modules.themeHelper.getPOPFooterBackgroundColor(),okButton:{background:this.designerInstance.modules.themeHelper.getPOPFooterOkButtonBackgroundColor(),foreground:this.designerInstance.modules.themeHelper.getPOPFooterOkButtonForegroundColor(),hovercolor:this.designerInstance.modules.themeHelper.getPOPFooterOkButtonHoverColor()},cancelButton:{background:this.designerInstance.modules.themeHelper.getPOPFooterCancelButtonBackgroundColor(),foreground:this.designerInstance.modules.themeHelper.getPOPFooterCancelButtonForegroundColor(),hovercolor:this.designerInstance.modules.themeHelper.getPOPFooterCancelButtonHoverColor()}}}}},t.prototype.getPresetCollection=function(){var n=[],i=new Date(new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()+7)%7)).toDateString()),t=new Date(i.toDateString());return t.setDate(t.getDate()+6),n.push({Name:PrimaryPoPType.Today.toString(),DisplayName:this.locale.popWidget.today,StartDate:new Date,EndDate:new Date}),n.push({Name:PrimaryPoPType.ThisWeek.toString(),DisplayName:this.locale.popWidget.thisWeek,StartDate:i,EndDate:t}),n.push({Name:PrimaryPoPType.ThisMonth.toString(),DisplayName:this.locale.popWidget.thisMonth,StartDate:new Date(new Date((new Date).setDate(1)).toDateString()),EndDate:new Date(new Date(new Date((new Date).setMonth((new Date).getMonth()+1)).setDate(0)).toDateString())}),n.push({Name:PrimaryPoPType.ThisYear.toString(),DisplayName:this.locale.popWidget.thisYear,StartDate:new Date(new Date((new Date).getFullYear(),0,1).toDateString()),EndDate:new Date(new Date((new Date).getFullYear(),11,31).toDateString())}),n},t.prototype.getCompareRelativeRanges=function(n,t){var u=[],h=Math.round(Math.abs((n.getTime()-t.getTime())/864e5))+1,f=new Date(+n),e,i,o,r,s;return f.setDate(f.getDate()-h),e=new Date(+n),e.setDate(n.getDate()-1),u.push({label:SecondaryPoPType.PreviousPeriod.toString(),start:f,end:e}),i=new Date(n.getFullYear()-1,n.getMonth(),1),o=new Date(i.getFullYear(),i.getMonth()+1,0),this.dateRange[0].getDate()<=o.getDate()?i.setDate(n.getDate()):i.setDate(o.getDate()),r=new Date(t.getFullYear()-1,t.getMonth(),1),s=new Date(r.getFullYear(),r.getMonth()+1,0),this.dateRange[1].getDate()<=s.getDate()?r.setDate(t.getDate()):r.setDate(s.getDate()),u.push({label:SecondaryPoPType.PreviousYear.toString(),start:i,end:r}),u},t.prototype.isFieldConfigured=function(){return!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos)?this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0:!1},t.prototype.periodChanged=function(n){var i,r,t,u,f;if(this.widgetJson.FilterSettings.ActAsMasterWidget&&(i=new ejdashboard.base.Internationalization,r=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],!BoldBIDashboard.isNullOrUndefined(this.popInstance))){if(t=new SelectedFilterValue,t.UniqueColumnName=r.UniqueColumnName,t.FieldId=r.Id,t.ReportName=this.widgetJson.UniqueName,t.ColumnName=r.Name,t.IsPoPWidget=!0,t.PoPFilter.DateFieldId=r.Id,u=new PoPCustomRange,t.PoPFilter.PrimaryCustomRange=new PoPCustomRange,u.StartRange=i.formatDate(n.dateRangeStartDate,{format:this.dateFormat}),u.EndRange=i.formatDate(n.dateRangeEndDate,{format:this.dateFormat}),t.PoPFilter.PrimaryCustomRange=u,t.PoPFilter.SecondaryCustomRange=[],f=new PoPCustomRange,f.StartRange=i.formatDate(n.compareRangeStartDate,{format:this.dateFormat}),f.EndRange=i.formatDate(n.compareRangeEndDate,{format:this.dateFormat}),t.PoPFilter.SecondaryCustomRange.push(f),t.PoPFilter.PrimaryType=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(PrimaryPoPType,n.dateRangeRelativeText),t.PoPFilter.SecondaryType=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(SecondaryPoPType,n.compareRangeRelativeText),this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;this.widgetJson.SelectedFilterValues=[];this.widgetJson.SelectedFilterValues.push(t);BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this);this.designerInstance.modules.serialization.notifyChange();this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName)}},t.prototype.processFilterInformation=function(n){var t,f,e;if(n.filters[0].values.length===2||n.filters[0].values.length===4){var r=new ejdashboard.base.Internationalization,u=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],i=this.userInputHanlderForWidgetAPI(n);if(!BoldBIDashboard.isNullOrUndefined(i.primaryStart)&&!BoldBIDashboard.isNullOrUndefined(i.primaryEnd)&&!BoldBIDashboard.isNullOrUndefined(i.secondaryStart)&&!BoldBIDashboard.isNullOrUndefined(i.secondaryEnd)&&(t=new SelectedFilterValue,t.UniqueColumnName=u.UniqueColumnName,t.FieldId=u.Id,t.ReportName=this.widgetJson.UniqueName,t.ColumnName=u.Name,t.IsPoPWidget=!0,t.PoPFilter.DateFieldId=u.Id,f=new PoPCustomRange,f.StartRange=r.formatDate(i.primaryStart,{format:this.dateFormat}),f.EndRange=r.formatDate(i.primaryEnd,{format:this.dateFormat}),t.PoPFilter.PrimaryCustomRange=new PoPCustomRange,t.PoPFilter.PrimaryCustomRange=f,e=new PoPCustomRange,e.StartRange=i.secondaryStart!==""?r.formatDate(i.secondaryStart,{format:this.dateFormat}):"",e.EndRange=i.secondaryEnd!==""?r.formatDate(i.secondaryEnd,{format:this.dateFormat}):"",t.PoPFilter.SecondaryCustomRange=[],t.PoPFilter.SecondaryCustomRange.push(e),t.PoPFilter.PrimaryType=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(PrimaryPoPType,i.primaryType),t.PoPFilter.SecondaryType=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(SecondaryPoPType,i.secondaryType),this.widgetJson.SelectedFilterValues=[],!BoldBIDashboard.isNullOrUndefined(t.PoPFilter.PrimaryType)&&!BoldBIDashboard.isNullOrUndefined(t.PoPFilter.SecondaryType)))return this.widgetJson.SelectedFilterValues.push(t),!0}return console.error('Please enter valid filter value for "'+this.widgetJson.ContainerSettings.Title+'" to apply filter'),!1},t.prototype.userInputHanlderForWidgetAPI=function(n){var i=BoldBIDashboard.isNullOrUndefined(this.widgetJson.SelectedFilterValues)?[]:this.widgetJson.SelectedFilterValues,u=n.filters,t=u.length>0?u[0].values:[],r={};return t.length===2?r={primaryStart:BoldBIDashboard.parseDate(t[0],this.dateFormat),primaryEnd:BoldBIDashboard.parseDate(t[1],this.dateFormat),primaryType:PrimaryPoPType.Custom,secondaryStart:"",secondaryEnd:"",secondaryType:BoldBIDashboard.isNullOrUndefined(i)?"":i.length>0?i[0].PoPFilter.SecondaryType:""}:t.length===4&&(r={primaryStart:BoldBIDashboard.parseDate(t[0],this.dateFormat),primaryEnd:BoldBIDashboard.parseDate(t[1],this.dateFormat),primaryType:PrimaryPoPType.Custom,secondaryStart:BoldBIDashboard.parseDate(t[2],this.dateFormat),secondaryEnd:BoldBIDashboard.parseDate(t[3],this.dateFormat),secondaryType:SecondaryPoPType.Custom}),r},t.prototype.isApplicableDateTypeWidgetForAPIFiltering=function(){return!0},t.prototype.getPoPPropertyPanel=function(){var n=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.widgetJson.FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo,this.widgetJson.ContainerSettings);return this.containerPropertyItem=n.containerProperties,n.propertyGridItems.Header=this.widgetJson.ContainerSettings.Title,n.propertyGridItems.SubTitle=this.widgetJson.ContainerSettings.SubTitle,n.propertyGridItems.Description=this.widgetJson.ContainerSettings.Description,n.propertyGridItems.Type=this.Type,this.bbdesigner$.each(n.containerActionsProperty.Items,function(n,t){(t.name==="ShowMaximize"||t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ImageExport"||t.name==="PDFExport"||t.name==="ViewData"||t.name==="PinWidget")&&(t.isVisible=!1)}),this.bbdesigner$.each(n.filterSettingsProperty.Items,function(n,t){t.name==="IgnoreFilterActions"&&(t.isVisible=!1)}),this.bbdesigner$.each(n.containerSettingsProperty.Items,function(n,t){(t.name==="ShowWidgetBackgroundImage"||t.name==="WidgetBackgroundImageMode"||t.name==="WidgetBackgroundImageSource"||t.name==="WidgetBackgroundImageBrowse"||t.name==="WidgetBackgroundImageURL")&&(t.isVisible=!1)}),n.propertyGridItems.Items=[n.filterSettingsProperty,n.containerSettingsProperty,n.containerActionsProperty,n.noDataContainerActionsProperty],n.propertyGridItems},t.prototype.updatePoPProperties=function(n,t,i,r){var o,s=!1,u,f,h,e;switch(n){case"Name":this.widgetJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,i);break;default:s=!0}if(BoldBIDashboard.isNullOrUndefined(o)||(t=o),!s){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(u=this.designPanelInstance.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)h=u[f],h.attr("id")===this.controlContainer.attr("id")&&(e=this.bbdesigner$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"PeriodOverPeriod",i));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-pop-item",this.designerId+"_"+this.widgetJson.UniqueName,[n,i,t,r],[n,t,i,r])}},t.prototype.setPropertyElement=function(n,t,i,r){var u,f;this.propertyPanel.canUpdate=!1;u=this.propertyPanel.getPropertyElement(this.getPoPPropertyPanel(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r);u.isVisible=i;f=this.bbdesigner$.extend(!0,{},u);f.categoryName=n;this.propertyPanel.updatePropertyValue(f,"PeriodOverPeriod",i);this.propertyPanel.canUpdate=!0},t.prototype.updatePoPSize=function(){if(BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this))this.widgetContainerHelper.showControlError(this,this.dataValues);else if(!BoldBIDashboard.isNullOrUndefined(this.popInstance))if(this.popInstance.resize(),this.widgetJson.ContainerSettings.ShowHeader)this.setPopTop();else{var n=this.contentContainer.find(".e-daterange-label-container").height(),t=this.contentContainer.find("#"+this.designerId+"popElement"+this.widgetJson.UniqueName+"_datepicker_container").height(),i=this.contentContainer.innerHeight()/2-((n+t)/2-6);this.popItem.css("padding-top",i)}},t.prototype.updateControlContainerPadding=function(){if(BoldBIDashboard.isNullOrUndefined(this.getContainerSettings().WidgetPaddingInfo)&&(this.getContainerSettings().WidgetPaddingInfo=new WidgetPaddingInfo,this.getContainerSettings().WidgetPaddingInfo.AutoPadding=!0,this.getContainerSettings().WidgetPaddingInfo.Padding=this.getControlContainerPaddingValue()),!BoldBIDashboard.isNullOrUndefined(this.controlContainer)&&this.controlContainer.length>0){var n=this.controlContainer.find(".bbi-dbrd-control-container-wrapper");n[0].style.padding="0px 8px"}},t.prototype.setPopTop=function(){var n=this.controlContainer.find(".bbi-dbrd-control-header").height(),t=this.contentContainer.find(".e-daterange-label-icon-wrapper").height(),i=(this.ControlContainer.height()-(t+n+11))/2;this.popItem.css("padding","4px 0px 0px 0px");this.contentContainer.css("padding","0px");this.controlContainer.find(".bbi-dbrd-control-container-wrapper").css("padding-top",i+"px")},t.prototype.updatePoPSettings=function(){this.updateInfoIcon()},t.prototype.updateInfoIcon=function(){var f=!1,t,n,r,i,e,u;if(!BoldBIDashboard.isNullOrUndefined(this.masterFilterWindowInstance)&&!BoldBIDashboard.isNullOrUndefined(this.masterFilterWindowInstance.filterObject)&&!BoldBIDashboard.isNullOrUndefined(this.masterFilterWindowInstance.filterObject.filterConfigurationModel)&&!BoldBIDashboard.isNullOrUndefined(this.masterFilterWindowInstance.filterObject.filterConfigurationModel.MastersCollection))for(t=this.masterFilterWindowInstance.filterObject.filterConfigurationModel.MastersCollection,n=0;n<t.length;n++)if(t[n].MasterInfo.IsPoP&&t[n].MasterInfo.ID===this.widgetJson.UniqueName)for(r=t[n].ProfileManager,i=0;i<r.length;i++)for(e=r[i].WidgetInfo,u=0;u<e.length;u++){f=!0;break}!f&&this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.isNecessaryDataConfigured()?BoldBIDashboard.Dashboard.WidgetHelper.showInfoIcon(this.locale.popNotification.masterWidgetNoSlaveText,this):BoldBIDashboard.Dashboard.WidgetHelper.hideInfoIcon(this)},t.prototype.updatePoPData=function(n){var r,i;this.contentContainer.find(".bbi-dbrd-control-error").remove();this.contentContainer.css({display:"block"});this.contentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").css("display","none");var u="",f="",t=BoldBIDashboard.isNullOrUndefined(n.Result)?n:n.Result;this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo);BoldBIDashboard.isNullOrUndefined(t.Error)||t.Error?BoldBIDashboard.isNullOrUndefined(t.Message)||(this.contentContainer.find(".bbi-widget-not-configured-text ").closest(".bbi-dbrd-control-container").removeClass("bbi-show-widget-not-configured"),this.widgetJson.SelectedFilterValues=[],this.widgetContainerHelper.showControlError(this,t),BoldBIDashboard.Dashboard.WidgetHelper.hideInfoIcon(this)):(Object.keys(t.widgetData).length>0&&t.widgetData.data!=="{}"&&BoldBIDashboard.isNullOrUndefined(t.isDataSetEmpty)?(r=JSON.parse(t.widgetData.data),r.noDataAvailable==="false"?(i=this.designerInstance.model.localeSettings,u=BoldBIDashboard.format(BoldBIDashboard.parseDate(r.MinDate,i.dateFormat+" "+i.timeFormat),i.dateFormat),f=BoldBIDashboard.format(BoldBIDashboard.parseDate(r.MaxDate,i.dateFormat+" "+i.timeFormat),i.dateFormat),u!==""&&f!==""?(BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this),this.updateInfoIcon(),this.updateDateRanges(u,f),this.popInstance?(this.popInstance.dateRange=this.dateRange,this.popInstance.compareRange=this.compareRange,this.popInstance.enableCustomTheme=this.designerInstance.isDarkTypeTheme()||!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.dashboardThemeSettings)&&this.designerInstance.model.dashboardThemeSettings.appearance.toLowerCase()==="dark",this.popInstance.refresh()):this.initializePoPInstance()):(this.popItem.hide(),BoldBIDashboard.Dashboard.WidgetHelper.hideInfoIcon(this),this.contentContainer.find(".bbi-widget-not-configured-text ").closest(".bbi-dbrd-control-container").removeClass("bbi-show-widget-not-configured"),this.contentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").css("display","block")),this.contentContainer.find(".bbi-widget-not-configured-text ").closest(".bbi-dbrd-control-container").removeClass("bbi-show-widget-not-configured")):(this.popItem.hide(),BoldBIDashboard.Dashboard.WidgetHelper.hideInfoIcon(this),this.contentContainer.find(".bbi-widget-not-configured-text ").closest(".bbi-dbrd-control-container").removeClass("bbi-show-widget-not-configured"),this.contentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").css("display","block"))):(Object.keys(t.widgetData).length===0&&t.columnBindings==="{}"||!BoldBIDashboard.isNullOrUndefined(t.isDataSetEmpty)&&t.isDataSetEmpty)&&(this.popItem.hide(),BoldBIDashboard.Dashboard.WidgetHelper.hideInfoIcon(this),this.widgetJson.SelectedFilterValues=[],this.contentContainer.find(".bbi-widget-not-configured-text ").closest(".bbi-dbrd-control-container").addClass("bbi-show-widget-not-configured")),this.setPopTop())},t.prototype.getDateValue=function(n){return this.globalize.parseDate(n,{format:this.dateFormat})},t.prototype.getFormattedString=function(n){return this.globalize.formatDate(n,{format:this.dateFormat})},t.prototype.updateDateRanges=function(n,t){var e=this.getPresetCollection(),c=this.getDateValue(n),l=this.getDateValue(t),o,s,h,u;if(this.minMaxDates=[n,t],o=Math.round(Math.abs((c.getTime()-l.getTime())/864e5))+1,s=this.getDefaultRange(o),this.widgetJson.SelectedFilterValues.length===0)this.setDefaultSelectedFilter(s,e);else{var r=this.widgetJson.SelectedFilterValues[0],i=this.widgetJson.SelectedFilterValues[0].PoPFilter,f=e.filter(function(n){return n.Name===i.PrimaryType.toString()});this.dateRange=f.length>0?[f[0].StartDate,f[0].EndDate]:[this.getDateValue(i.PrimaryCustomRange.StartRange),this.getDateValue(i.PrimaryCustomRange.EndRange)];h=this.getCompareRelativeRanges(this.dateRange[0],this.dateRange[1]);u=h.filter(function(n){return n.label===i.SecondaryType.toString()});this.compareRange=u.length===0?[this.getDateValue(i.SecondaryCustomRange[0].StartRange),this.getDateValue(i.SecondaryCustomRange[0].EndRange)]:[u[0].start,u[0].end];r.PoPFilter.PrimaryCustomRange.StartRange=this.getFormattedString(this.dateRange[0]);r.PoPFilter.PrimaryCustomRange.EndRange=this.getFormattedString(this.dateRange[1]);r.PoPFilter.SecondaryCustomRange[0].StartRange=this.getFormattedString(this.compareRange[0]);r.PoPFilter.SecondaryCustomRange[0].EndRange=this.getFormattedString(this.compareRange[1])}},t.prototype.setDefaultSelectedFilter=function(n,t){for(var o,i,e,u,r,h,f=BoldBIDashboard.parseDate(this.minMaxDates[1],this.designerInstance.model.localeSettings.dateFormat),l=BoldBIDashboard.parseDate(this.minMaxDates[0],this.designerInstance.model.localeSettings.dateFormat),c=[],s=0;s<t.length;s++)o=t[s],o.StartDate.setHours(0,0,0,0)>=l.setHours(0,0,0,0)&&o.EndDate.setHours(0,0,0,0)<=f.setHours(0,0,0,0)&&c.push(o);this.widgetJson.SelectedFilterValues=[];i=new SelectedFilterValue;e=this.DataGroupInfo.FieldContainers[0].FieldInfos[0];i.UniqueColumnName=e.UniqueColumnName;i.FieldId=e.Id;i.ReportName=this.widgetJson.UniqueName;i.ColumnName=e.Name;i.IsPoPWidget=!0;i.PoPFilter.DateFieldId=e.Id;i.IsPoPWidget=!0;c.length>0?n==="Year"?(this.dateRange=[t[3].StartDate,t[3].EndDate],i.PoPFilter.PrimaryType=PrimaryPoPType.ThisYear):n==="Month"?(this.dateRange=[t[2].StartDate,t[2].EndDate],i.PoPFilter.PrimaryType=PrimaryPoPType.ThisMonth):n==="Week"?(this.dateRange=[t[1].StartDate,t[1].EndDate],i.PoPFilter.PrimaryType=PrimaryPoPType.ThisWeek):(this.dateRange=[t[0].StartDate,t[0].EndDate],i.PoPFilter.PrimaryType=PrimaryPoPType.Today):(i.PoPFilter.PrimaryType=PrimaryPoPType.Custom,n==="Year"?(u=t[3].StartDate,r=t[3].EndDate,u=new Date(f.getFullYear(),u.getMonth(),u.getDate(),0,0,0,0),r=new Date(f.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0),this.dateRange=[u,r],i.PoPFilter.PrimaryCustomRange.StartRange=this.getFormattedString(u),i.PoPFilter.PrimaryCustomRange.EndRange=this.getFormattedString(r)):n==="Month"?(u=t[2].StartDate,r=t[2].EndDate,u=new Date(f.getFullYear(),(new Date).getMonth(),1,0,0,0,0),r=new Date(f.getFullYear(),(new Date).getMonth()+1,0,0,0,0,0),this.dateRange=[u,r],i.PoPFilter.PrimaryCustomRange.StartRange=this.getFormattedString(u),i.PoPFilter.PrimaryCustomRange.EndRange=this.getFormattedString(r)):n==="Week"?(u=t[1].StartDate,r=t[1].EndDate,this.dateRange=[t[1].StartDate,t[1].EndDate],u=new Date(f.getFullYear(),u.getMonth(),r.getDate(),0,0,0,0),r=new Date(f.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0),i.PoPFilter.PrimaryCustomRange.StartRange=this.getFormattedString(u),i.PoPFilter.PrimaryCustomRange.EndRange=this.getFormattedString(r)):(u=t[0].StartDate,r=t[0].EndDate,u=new Date(f.getFullYear(),f.getMonth(),u.getDate(),0,0,0,0),r=new Date(f.getFullYear(),f.getMonth(),r.getDate(),0,0,0,0),this.dateRange=[t[0].StartDate,t[0].EndDate],i.PoPFilter.PrimaryCustomRange.StartRange=this.getFormattedString(u),i.PoPFilter.PrimaryCustomRange.EndRange=this.getFormattedString(r)));i.PoPFilter.SecondaryType=SecondaryPoPType.PreviousPeriod;h=this.getCompareRelativeRanges(this.dateRange[0],this.dateRange[1]);this.compareRange=[h[0].start,h[0].end];i.PoPFilter.PrimaryCustomRange.StartRange=this.getFormattedString(this.dateRange[0]);i.PoPFilter.PrimaryCustomRange.EndRange=this.getFormattedString(this.dateRange[1]);i.PoPFilter.SecondaryCustomRange[0].StartRange=this.getFormattedString(this.compareRange[0]);i.PoPFilter.SecondaryCustomRange[0].EndRange=this.getFormattedString(this.compareRange[1]);this.widgetJson.SelectedFilterValues.push(i);BoldBIDashboard.isNullOrUndefined(this.popInstance)&&this.designerInstance.modules.serialization.notifyChange()},t.prototype.getDefaultRange=function(n){return n>=730?"Year":n>=60?"Month":n>=14?"Week":"Day"},t.prototype.disposePoP=function(){BoldBIDashboard.isNullOrUndefined(this.popInstance)||this.popInstance.destroy();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.PeriodOverPeriod)},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.PoPItem",InternalPeriodComparisonItem,window);BoldBIDashboard.DashboardDesignerUtility.PoPItem.prototype.initialize();var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},InternalComboBoxReportItem=function(n){function t(t){var i=n.call(this,t,"ComboBox","e-combobox-item")||this;return i.isDefaultRendering=!1,i.virtualFilterValues=[],i.comboBoxObj=null,i.dataObj=null,i.clonedData=null,i.isInitialLoad=null,i.filterArgs=null,i.multiSelectionTimer=null,i.filterSearchTimer=null,i.searchTextTimer=null,i.filterSearchOlderText="",i.checkAllClearFlag=!1,i.isUserDisableAll=!0,i.locale=null,i.bbdesigner$=i.designerInstance.bbdesigner$,i.locale=t.getLocalizationContent(),i.widgetJson=new ComboBoxProperties(t),i.widgetJson.FilterSettings.ActAsMasterWidget=!0,i.designerId=i.designerInstance._id,i.propertyPanel=t.modules.propertyPanel,n.prototype.initializeVirtualScrollSettings.call(i),i.isVisualWidget=!1,i}return __extends(t,n),t.prototype.getWidgetImage=function(){return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="0 0 324 208" version="1.1">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Combo-box" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="Combo-box-Copy" transform="translate(12.000000, 61.000000)">            <path d="M224.468085,0.7 L290.93617,0.7 C295.354448,0.7 298.93617,4.281722 298.93617,8.7 L298.93617,75.2 C298.93617,79.618278 295.354448,83.2 290.93617,83.2 L224.468085,83.2 L224.468085,83.2 L224.468085,0.7 Z" id="Rectangle-Copy-9" fill="var(--widget-notconfigured-image-background1)" fill-rule="nonzero"/>            <rect id="Rectangle-Copy-8" stroke="var(--widget-notconfigured-image-background1)" stroke-width="6.92307692" x="3.99345336" y="4.19213481" width="292.013093" height="77.2992785" rx="8.5106383"/>            <g id="Icons/1px/ChevronDownline" transform="translate(246.702128, 32.450000)" fill="var(--widget-notconfigured-image-background3)" fill-rule="nonzero">                <path d="M14.2445665,18.0904983 L0.391389393,1.93817115 C-0.00861019032,1.47206115 0.0147940408,0.742898948 0.446708484,0.30909359 C0.87649527,-0.124711766 1.54883499,-0.0993295381 1.94883458,0.369087949 L15.023289,15.6122698 L28.050935,0.42215988 C28.4530622,-0.0439501309 29.125402,-0.0693323592 29.5551888,0.362165523 C29.9849755,0.79597088 30.0083798,1.52744055 29.6083802,1.99355056 L15.8020116,18.0904983 C15.5998842,18.3258607 15.3190334,18.4596943 15.023289,18.4596943 C14.7275447,18.4596943 14.4466939,18.3258607 14.2445665,18.0904983 Z" id="path"/>            <\/g>        <\/g>    <\/g><\/svg>'},t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.filters,GroupId:"1093107b-a5c1-4bd3-83cb-ec6ccd40a031",Items:[{id:"42051973-9edd-42af-a66b-dcf8f8ae0349",widgetName:"ComboBox",widgetDisplayName:n.itemPanel.widgetTitle.comboBox,cssClass:"bbi-widgeticon bbi-designer-widget-checkbox",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.ComboBoxItem",searchCategory:["combobox","filters"],widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.comboBox,description:n.itemPanel.widgetDescription.comboBoxDesc,dataRequirement:n.itemPanel.widgetDataRequirements.filtersDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ComboBoxProperties",minRowSpan:3}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){this.setContainerDefaultProperties();this.renderComboBoxContainer(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.comboBoxElement)||this.updateComboBoxSize()},t.prototype.update=function(n){this.VirtualScrollSettings.StartIndex=1;this.updateTitleSubtitleTheme();this.updateComboBoxData(n);this.checkAllForWidgetAPIFromInitialization();this.IsRendered=!0;this.setBackground();this.updateThemeInWidget(this.designerInstance.isDarkTypeTheme())},t.prototype.setBackground=function(){var n=this.designerId+"comboBoxElement"+this.widgetJson.UniqueName;this.bbdesigner$("#"+n).parent().find(".e-combobox-control").css("background","transparent")},t.prototype.applyWidgetTheme=function(n){this.updateTitleSubtitleTheme();this.updateThemeInWidget(n);this.updateComboBoxSize()},t.prototype.getFieldView=function(){var t=[BoldBIDashboard.Dashboard.SupportedDataType.Number,BoldBIDashboard.Dashboard.SupportedDataType.Boolean,BoldBIDashboard.Dashboard.SupportedDataType.DateTime,BoldBIDashboard.Dashboard.SupportedDataType.String];return[{name:"Measures",displayName:this.designerInstance.getLocalizationContent().dataconfiguration.fieldView.MeasureFieldDisplayName,supportedDataTypes:t},{name:"Dimensions",displayName:this.designerInstance.getLocalizationContent().dataconfiguration.fieldView.DimensionFieldDisplayName,supportedDataTypes:t},n.prototype.getParameterColumnContainer.call(this,t)]},t.prototype.canCombineRequest=function(){return!0},t.prototype.updateThemeInWidget=function(n){var i=this.Type.toLowerCase(),a,t,v,y,s,g,nt,e;if(BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)){var f="#"+this.designerId+"comboBoxElement"+this.widgetJson.UniqueName+"_popup_list_wrapper",p="#"+this.designerId+"comboBoxElement"+this.widgetJson.UniqueName+"_container",tt="#"+this.designerId+"comboBoxElement"+this.widgetJson.UniqueName+"_wrapper",w="#"+this.designerId+"comboBoxElement"+this.widgetJson.UniqueName+"_inputSearch",u=[],it=this.comboBoxElement.parent().find("#AllTextboxElement"+this.widgetJson.UniqueName);it.attr("style","color:"+this.designerInstance.modules.themeHelper.getDDWidgetDDLTextColor(i));this.comboBoxItem.toggleClass(".e-combo-dbrd-theme");this.bbdesigner$(f).addClass("e-ddl-popup-dbrd-theme");this.designerInstance.element.find(tt).addClass("e-ddl-dbrd-theme");var h=this.designerInstance.modules.themeHelper.getDDWidgetDDLBackground(i),c=this.designerInstance.modules.themeHelper.getDDWidgetDDLTextColor(i),rt=this.designerInstance.modules.themeHelper.getDDWidgetBorderColor(i),ut=this.designerInstance.modules.themeHelper.getDDWidgetPlaceHolderColor(i),b=this.designerInstance.modules.themeHelper.getDDWidgetDDLHoverBackground(i),k=this.designerInstance.modules.themeHelper.getDDWidgetDDLHoverTextColor(i),ft=this.designerInstance.modules.themeHelper.getDDWidgetDDLSelectionBackground(i),et=this.designerInstance.modules.themeHelper.getDDWidgetDDLSelectionTextColor(i),d=this.designerInstance.modules.themeHelper.getDDWidgetDropDownBorderColor(i),ot=this.designerInstance.modules.themeHelper.getDDWidgetDDLArrowColor(i),r=this.bbdesigner$(f).attr("style"),st=this.bbdesigner$(p).attr("style"),o="1px 1px 10px "+this.designerInstance.modules.themeHelper.getDDWidgetBoxShadowColor(i),ht="border-color:"+rt+" !important;\t",l="background-color:"+h+" !important;\tcolor:"+c+" !important;\tborder: 1px solid "+d+" !important;\tbox-shadow:"+o+" !important;\t-webkit-box-shadow:"+o+" !important;\t-ms-box-shadow:"+o+" !important;\t-moz-box-shadow:"+o+"!important;\t";this.bbdesigner$(f).attr("style",this.designerInstance.modules.themeHelper.getStyleString(r,l));this.bbdesigner$(p).attr("style",this.designerInstance.modules.themeHelper.getStyleString(st,ht));a="1px solid "+d;this.bbdesigner$(f).children(".e-atc.e-search").css("border-bottom",a);this.bbdesigner$(f).find("#"+this.designerId+"comboBoxAllElementWrap"+this.widgetJson.UniqueName).css("border-bottom",a);r=this.designerInstance.element.find(w).attr("style");l="background-color:"+h+"!important;color:"+c+"!important;";this.bbdesigner$(w).attr("style",this.designerInstance.modules.themeHelper.getStyleString(r,l));t=[];v="#"+this.designerInstance._id;t.push(".e-ddl-popup.e-ddl-popup-dbrd-theme",".e-ddl-popup.e-ddl-popup-dbrd-theme .e-search .e-input",".e-ddl-popup.e-ddl-popup-dbrd-theme .e-search .e-input::placeholder",".e-comboboxitem.e-combo-dbrd-theme .e-input.bbi-dbrd-control.e-combobox-control",".e-comboboxitem.e-combo-dbrd-theme .e-input.bbi-dbrd-control.e-combobox-control::placeholder",".bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-combobox-all-element-wrapper",".bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-combobox-all-element-wrapper .e-combobox-all-element .e-text");y=this.designerInstance.modules.themeHelper.getDDWidgetDDLFontText(i);s="\tbackground: "+h+" !important;\n\tcolor: "+c+" !important;"+y;u.push({key:t+"",value:s});t=[];t.push(v+" .boldbi-dashboarddesigner .e-ddl.e-ddl-dbrd-theme .e-input",v+" .boldbi-dashboarddesigner .e-ddl.e-ddl-dbrd-theme .e-input::placeholder");s="\tbackground:  transparent !important;\n\tcolor: "+ut+";\n\topacity: 1 !important;\n"+y;u.push({key:t+"",value:s});t=[];g=this.designerInstance.modules.themeHelper.getDDWidgetDDLHoverFontText(i);t.push(".bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-hover",".bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-combobox-all-element-wrapper:hover",".bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-combobox-all-element-wrapper:hover .e-text",".bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-combobox-all-element-wrapper .e-combobox-all-element:hover",".bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-combobox-all-element-wrapper .e-combobox-all-element:hover .e-text");r="\tbackground: "+b+" !important;\n\tcolor: "+k+";"+g;u.push({key:t+"",value:r});t=[];t.push(".bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-active.e-hover",".bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-select.e-hover ");r="\tbackground: "+b+" !important;\n\tcolor: "+k+" !important;";u.push({key:t+"",value:r});t=[];nt=this.designerInstance.modules.themeHelper.getDDWidgetDDLSelectFontText(i);t.push(".bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-active");r="\tbackground: "+ft+" !important;\n\tcolor: "+et+" !important;"+nt;u.push({key:t+"",value:r});t=[];t.push(".boldbi-dashboarddesigner .e-ddl.e-ddl-dbrd-theme .e-select .e-icon.e-down-arrow");r="\tcolor: "+ot+" !important;";u.push({key:t+"",value:r});e=this.designerInstance._id+"_ddlpopupstyle";this.bbdesigner$("#"+e).length>0&&this.bbdesigner$("#"+e).remove();e=this.designerInstance._id+"_comboboxddlpopupstyle";this.designerInstance.modules.themeHelper.createandAppendCustomStyle(e,u);this.designerInstance.modules.themeHelper.applyComboBoxCheckBoxTheme(n,this.designerInstance._id+"_ComboBoxCheckBoxStyle")}else BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this)},t.prototype.updateTitleSubtitleTheme=function(){var n=this.Type.toLowerCase(),t=this.designerInstance.modules.themeHelper.getDDWidgetHeaderTitle(n),i=this.designerInstance.modules.themeHelper.getDDWidgetHeaderSubTitle(n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getComboBoxProperties().ContainerSettings.TextColor,t);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,i);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.getFieldContainer=function(){var t=[];return t.push(this.generateFieldContainer("Column",FieldContainerType.Non_Numeric,1,0,!0,this.locale.fieldContainer.value)),t.push(this.generateFieldContainer("DisplayColumn",FieldContainerType.None,1,1,!1,this.locale.fieldContainer.displayColumn)),t.push(n.prototype.getFilterColumn.call(this)),t},t.prototype.onFieldSettingsClick=function(n,t){for(var i=0;i<t.length;i++)n.FieldActualType==="bbi-designer-dataset-datetime"&&t[i].Name==="RelativeDateFilter"&&(t[i].IsVisible=!1),n.FieldActualType==="bbi-designer-dataset-datetime"&&t[i].Name==="RelativeDateOptions"&&n.ContainerName==="Column"&&(t[i].IsVisible=!0,t[i].IsDisable=this.getComboBoxProperties().EnableMultiSelection),n.FieldActualType!=="bbi-designer-dataset-datetime"||t[i].Name==="RelativeDateOptions"||n.ContainerName!=="Column"||BoldBIDashboard.isNullOrUndefined(this.dataValues)||BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?n.FieldActualType==="bbi-designer-dataset-datetime"&&t[i].Name!=="RelativeDateOptions"&&n.ContainerName==="Column"&&!BoldBIDashboard.isNullOrUndefined(this.dataValues)&&BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)&&(t[i].IsDisable=!1):t[i].IsDisable=!0;return BoldBIDashboard.DashboardUtil.hideRenameMenuOption(t)},t.prototype.onFieldDragDrop=function(n){return this.checkParameterOnFieldDragDrop(n,this.DataGroupInfo)},t.prototype.checkParameterOnFieldDragDrop=function(n,t){var i=!0;return t.FieldContainers.length>0&&t.FieldContainers[0].FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(t.FieldContainers[0].FieldInfos[0].FilterInfo)&&!BoldBIDashboard.isNullOrUndefined(t.FieldContainers[0].FieldInfos[0].FilterInfo.RelativeDateOptions)&&n.ContainerName==="DisplayColumn"&&!this.getComboBoxProperties().EnableMultiSelection&&(this.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.relativeDatesAlert,this.locale.relativeDateMessages.relativeDatesExist,IconType.warning,AlertType.Alert,!1,""),i=!1),(n.IsParameterField&&(n.ContainerType!==FieldContainerType.Non_Numeric||!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.isNullOrUndefined(t.FieldContainers)&&t.FieldContainers.length>1&&!BoldBIDashboard.isNullOrUndefined(t.FieldContainers[1].FieldInfos)&&t.FieldContainers[1].FieldInfos.length>0)||!n.IsParameterField&&n.ContainerType===FieldContainerType.None&&!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.isNullOrUndefined(t.FieldContainers)&&t.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(t.FieldContainers[0].FieldInfos)&&t.FieldContainers[0].FieldInfos.length>0&&t.FieldContainers[0].FieldInfos[0].IsParameterField)&&(i=!1),i},t.prototype.getJson=function(){return this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t)},t.prototype.getPropertyPanelItems=function(){return this.getComboBoxPropPanel()},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateComboBoxProperties(n,t,i,r)},t.prototype.updateInitialSelection=function(){this.initialSelectionForComboBox()},t.prototype.clearFilter=function(n,t,i,r){this.getComboBoxProperties().SelectedFilterValues=[];BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this);BoldBIDashboard.isNullOrUndefined(n)&&(this.virtualFilterValues=[]);!BoldBIDashboard.isNullOrUndefined(n)&&(BoldBIDashboard.isNullOrUndefined(n)||n)||this.removeSelection(!0);BoldBIDashboard.isNullOrUndefined(i)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):i&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);t||(this.designerInstance.modules.serialization.notifyChange(),this.doInteractionWithMasterFields(this.widgetJson,r))},t.prototype.getMobileViewHeight=function(){return this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.dispose=function(){this.disposeComboBox();n.prototype.dispose.call(this)},t.prototype.isFieldValid=function(n,t,i){return!(t===FieldContainerType[FieldContainerType.Non_Numeric]&&i==="Column"&&n)},t.prototype.getDefaultMeasureFormat=function(){var n=new MeasureFormatting;return n.Unit=NumberFormat.Ones,n},t.prototype.getMinMobileHeight=function(){return"90px"},t.prototype.renderComboBoxContainer=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));this.getComboBoxProperties().SelectFirstItemByDefault=!1;this.comboBoxItem=BoldBIDashboard.buildTag("div.e-comboboxitem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder,overflow:"hidden"},{id:this.designerId+"comboBoxItem"+this.widgetJson.UniqueName});this.contentContainer.append(this.comboBoxItem);this.controlContainer.data("widgetInstance",this);!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.ComboBox)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i.message,Type:i.name})}},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.locale.itemPanel.widgetDataRequiredMessage.comboBoxDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.updateComboBoxData=function(n){var i,t,f,e,o,u,s;if(this.dataValues=n,BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this),BoldBIDashboard.isNullOrUndefined(this.dataValues)||BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&(this.DataGroupInfo.FieldContainers[0].FieldInfos[0].DisplayName=this.designerInstance.modules.util.getDisplayName(this.DataGroupInfo.FieldContainers[0].FieldInfos[0])):this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&(this.DataGroupInfo.FieldContainers[0].FieldInfos[0].DisplayName="Relative Dates("+this.DataGroupInfo.FieldContainers[0].FieldInfos[0].Name+")"),this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo),BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error)BoldBIDashboard.isNullOrUndefined(n.Message)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.widgetContainerHelper.showControlError(this,n));else if(n.noDataAvailable)this.comboBoxItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this);else if(this.comboBoxItem.show(),i=BoldBIDashboard.isNullOrUndefined(n.selectedParameterValue)?null:JSON.parse(n.selectedParameterValue),!BoldBIDashboard.isNullOrUndefined(n)&&n.data!=="[]"&&BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)&&!(typeof n=="string"&&n.indexOf("Sf_Exception")!==-1)){this.dataObj=BoldBIDashboard.isNullOrUndefined(n.RelativeDates)?JSON.parse(n.data):JSON.parse(n.RelativeDates);this.dataObj=this.convertBooleanToString(this.dataObj);var r=this.getColumns(this.dataObj),h=this.cellInfo.RowSpan>2?30:25,c='<div class ="e-combobox-all-element-wrapper" id="'+this.designerId+"comboBoxAllElementWrap"+this.widgetJson.UniqueName+'" ><input class ="e-combobox-all-element" id ="'+this.designerId+"comboBoxAllElementCheckBox"+this.widgetJson.UniqueName+'" type="checkbox"/><\/div>';BoldBIDashboard.isNullOrUndefined(this.comboBoxObj)||(this.comboBoxObj.destroy(),this.comboBoxObj=null);t={cssClass:"bbi-dbrd-control e-combobox-control",fields:{id:r[0].id,text:r[0].text,value:r[0].value},watermarkText:this.locale.common.all,actionComplete:this.bbdesigner$.proxy(this.refreshScrollBar,this),enableFilterSearch:!BoldBIDashboard.isNullOrUndefined(this.getComboBoxProperties().AllowFilter)&&this.getComboBoxProperties().AllowFilter,showCheckbox:this.getComboBoxProperties().EnableMultiSelection,popupHeight:this.getPopupHeight(),width:this.comboBoxItem.width().toString(),height:h.toString(),change:this.bbdesigner$.proxy(this.comboBoxItemSelected,this),search:this.bbdesigner$.proxy(this.processFilterSearch,this),popupShown:this.bbdesigner$.proxy(this.popupShown,this),popupHide:this.bbdesigner$.proxy(this.popupHide,this),delimiterChar:", ",headerTemplate:c};BoldBIDashboard.isNullOrUndefined(this.dataObj)||(this.allowVirtualScrolling=this.dataValues.hasMoreRecords,this.allowVirtualScrolling?(t.virtualScrollMode="continuous",t.actionBegin=this.bbdesigner$.proxy(this.dropDownActionBegin,this),t.allowVirtualScrolling=!0):(this.allowVirtualScrolling=!1,t.allowVirtualScrolling=!1,t.dataSource=this.dataObj,t.actionBegin=null));this.isDefaultRendering=!1;BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this);this.setPropertyElement("BasicSettings","AllowFilter",!BoldBIDashboard.isNullOrUndefined(this.getComboBoxProperties().AllowFilter)&&this.getComboBoxProperties().AllowFilter);this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0&&(BoldBIDashboard.isNullOrUndefined(this.comboBoxElement)||BoldBIDashboard.isNullOrUndefined(this.comboBoxObj)||(this.comboBoxObj.destroy(),this.comboBoxObj=null));BoldBIDashboard.isNullOrUndefined(this.comboBoxObj)?(f=this.designerId+"comboBoxElement"+this.widgetJson.UniqueName,this.comboBoxElement=BoldBIDashboard.buildTag("input.e-combobox-element","",{position:"relative","font-size":"12px","background-color":this.designerInstance.modules.themeHelper.getWidgetTileBackground(null)},{id:f}),this.comboBoxItem.append(this.comboBoxElement),this.comboBoxItem.css("padding","5px"),this.comboBoxElement.BoldBIDashboardDropDownList(t).appendTo(this.comboBoxElement[0]),this.bbdesigner$(window).off("resize",this.bbdesigner$.proxy(BoldBIDashboard.DropDownList.prototype._OnWindowResize,this)),this.comboBoxObj=this.comboBoxElement.data("BoldBIDashboardDropDownList"),this.allowVirtualScrolling&&(this.isInitialLoad=!0,this.comboBoxObj.option("dataSource",[]),this.comboBoxObj.option("actionBegin",t.actionBegin),this.bbdesigner$.extend(this.comboBoxObj.option("dataSource",this.updateDataManager()))),this.refreshComboBox()):(this.comboBoxObj.option("fields",t.fields),this.allowVirtualScrolling?(this.comboBoxObj.option("dataSource",[]),this.isInitialLoad=!0,this.comboBoxObj.option("allowVirtualScrolling",t.allowVirtualScrolling),this.comboBoxObj.option("virtualScrollMode",t.virtualScrollMode),this.comboBoxObj.option("actionBegin",t.actionBegin),this.bbdesigner$.extend(this.comboBoxObj.option("dataSource",this.updateDataManager()))):(this.comboBoxObj.option("allowVirtualScrolling",t.allowVirtualScrolling),this.comboBoxObj.option("actionBegin",null),this.comboBoxObj.option("dataSource",t.dataSource),this.getComboBoxProperties().SelectFirstItemByDefault&&this.updateDefaultPosition(this.getComboBoxProperties().DefaultSelectedIndices)));e=this.DataGroupInfo.FieldContainers[0].FieldInfos[0];e.IsParameterField?(this.getComboBoxProperties().ParameterFieldSelected=i,o=this.ControlContainer.find(".bbi-remove-control-filter"),o.css("display","none"),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&i.length>0&&this.updateSelectedValue(i,!1)):this.getComboBoxProperties().ParameterFieldSelected=[];this.getVirtualSelectedDataFromFilterValues();this.updateInitialSelection();this.bbdesigner$("#"+this.designerId+"comboBoxAllElementCheckBox"+this.widgetJson.UniqueName).BoldBIDashboardCheckBox({text:this.locale.common.all,checked:(this.getComboBoxProperties().IsAllSelected||this.comboBoxObj.getSelectedItem().length===this.comboBoxObj.getListData().length)&&this.comboBoxObj.getSelectedItem().length===this.comboBoxObj.getListData().length,change:this.bbdesigner$.proxy(this.updateAllSelection,this),cssClass:"e-combobox-all-element"});this.bbdesigner$("#"+this.designerId+"comboBoxAllElementWrap"+this.widgetJson.UniqueName).on("click",this.bbdesigner$.proxy(this.updateAllSelection,this));this.bbdesigner$("#"+this.designerId+"comboBoxAllElementWrap"+this.widgetJson.UniqueName).off("click",this.bbdesigner$.proxy(this.updateAllSelection,this));this.updateAllSelectionVisibilty(this.getComboBoxProperties().EnableMultiSelection);this.getComboBoxProperties().EnableMultiSelection&&(u=this.updateComboboxAllTextboxElement(),s=this.bbdesigner$("#"+this.designerId+"comboBoxAllElementCheckBox"+this.widgetJson.UniqueName).data("BoldBIDashboardCheckBox").model.checked,s?u.find("#AllTextboxElement"+this.widgetJson.UniqueName).text(this.locale.common.all):u.remove())}},t.prototype.popupShown=function(){var n=this.designerId+"comboBoxElement"+this.widgetJson.UniqueName+"_inputSearch";this.getComboBoxProperties().AllowFilter&&this.bbdesigner$("#"+n).length>0&&this.bbdesigner$("#"+n).attr("autoComplete","off");this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.view&&this.changePopUpElementPosition()},t.prototype.popupHide=function(){var n=this;setTimeout(function(){if(n.getComboBoxProperties().EnableMultiSelection&&n.isUserDisableAll){var t=n.getSelectedItems(),i=n.comboBoxObj.model.change;n.comboBoxObj.model.change=null;t.SelectedItems.length>0&&(n.comboBoxObj.unCheckAll(),n.comboBoxObj.clearText(),n.comboBoxObj.selectItemByValue(t.SelectedItems),n.getVirtualSelectedData(t.SelectedItems,n.comboBoxObj));n.comboBoxObj.model.change=i}},2e3)},t.prototype.changePopUpElementPosition=function(){var r=this,n=this.bbdesigner$("#"+this.comboBoxElement.attr("id")+"_popup_wrapper"),t=this.designerInstance.element,i=document.fullscreenElement!==null;n.length>0&&this.designerInstance.element.find(n).length===0&&i?(t.append(n),setTimeout(function(){r.updatePopupTopValue()},10)):t.find(n).length>0&&!i&&this.designerInstance.element.parents("body").append(n)},t.prototype.updatePopupTopValue=function(){var n=this.bbdesigner$("#"+this.comboBoxElement.attr("id")+"_popup_wrapper"),t=this.bbdesigner$(window).scrollTop(),i=parseFloat(n.children().css("top"));n.children().css("top",i-t+"px")},t.prototype.getPopupHeight=function(){var n=44,t=33,i=this.getComboBoxProperties().AllowFilter&&this.getComboBoxProperties().EnableMultiSelection?t+n:this.getComboBoxProperties().AllowFilter?n:this.getComboBoxProperties().EnableMultiSelection?t:0,r=224+i+2+"px";return r.toString()},t.prototype.dropDownActionBegin=function(n){this.isInitialLoad&&(this.comboBoxObj._totalCount=this.dataObj.length+1,this.comboBoxObj._listItem(this.dataObj),this.comboBoxObj._removeLoadingClass(),this.comboBoxObj._renderPopupList(),this.comboBoxObj._finalize(),n.cancel=!0,this.isInitialLoad=!1)},t.prototype.updateDataManager=function(){var n=this,t=new BoldBIDashboard.Adaptor(null).extend({processQuery:this.bbdesigner$.proxy(this.processQuery,this),beforeSend:function(t,i){n.designerInstance.beforeSendRequestForDataManager("OnDemandDataAction",i)},processResponse:this.bbdesigner$.proxy(this.processResponse,this)});return new BoldBIDashboard.DataManager({url:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,adaptor:new t,crossDomain:!0})},t.prototype.processQuery=function(t){var f=this.comboBoxObj.inputSearch!==undefined&&this.comboBoxObj.inputSearch.val()!=="",u;if(f&&!this.hasMoreFilteredRecords)return!1;var i=this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(this.DataGroupInfo),e=n.prototype.getWidgetInfo.call(this,this.DataGroupInfo,!0),r=JSON.parse(JSON.stringify(i[0])),o=this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design;return this.comboBoxObj.inputSearch!==undefined&&this.comboBoxObj.inputSearch.val()?(this.scrollerPosition=this.comboBoxObj.scrollerObj?this.comboBoxObj.scrollerObj.scrollTop():0,this.VirtualScrollSettings.StartIndex=this.comboBoxObj.popupListItems.length+1,u=new FilterInfo,u.DimensionFilterInfo=this.getFilterInfo(this,this.comboBoxObj),r.FilterInfo=u,r.IsVisible=!1,i.push(r)):this.VirtualScrollSettings.StartIndex=this.comboBoxObj._rawList.length+1,{url:t.dataSource.url,type:"POST",contentType:"application/json",data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.WidgetAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,fieldInfo:i,dataset:this.DataGroupInfo.DataSourceID,widgetInfo:e,request:AjaxRequest.Widget.toString(),selectedValuesList:this.masterFilterWindowInstance.getSelectedValuesForWidgetRequest(),urlParameters:this.designerInstance.urlParameter,isDataSampleForViewMode:o})}},t.prototype.processResponse=function(n){var t,r,i;return BoldBIDashboard.isNullOrUndefined(n)||n.Error||n.data==="[]"?{result:[],count:0}:(this.designerInstance.modules.resource.updateColorCodeInfo(n),t=JSON.parse(n.data),t=this.convertBooleanToString(t),r=this.comboBoxObj.inputSearch!==undefined&&this.comboBoxObj.inputSearch.val()!=="",r)?(i=this.comboBoxObj.popupListItems,i=i.concat(t),this.filterArgs.result=i,this.comboBoxObj._filterSearch(null,this.filterArgs),this.comboBoxObj._refreshScroller(),this.comboBoxObj.scrollerObj&&this.comboBoxObj.scrollerObj.option("scrollTop",this.scrollerPosition),this.hasMoreFilteredRecords=n.hasMoreRecords,this.comboBoxObj._totalCount=this.comboBoxObj._rawList.length+1,{result:[],count:0}):(this.comboBoxObj._totalCount=n.hasMoreRecords?this.comboBoxObj._rawList.length+t.length+1:this.comboBoxObj._rawList.length+t.length,{result:t,count:t.length})},t.prototype.convertBooleanToString=function(n){for(var i,r=Object.keys(n[0]),t=0;t<r.length;t++)if(typeof n[0][r[t]]=="boolean")for(i=0;i<n.length;i++)n[i][r[t]]=n[i][r[t]].toString();return n},t.prototype.getColumns=function(n){var f=this,t=Object.keys(n[0]),i=[],r,u;return BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?(r=t.filter(function(n){return n===f.DataGroupInfo.FieldContainers[0].FieldInfos[0].UniqueColumnName}),u=this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0?t.filter(function(n){return n===f.DataGroupInfo.FieldContainers[1].FieldInfos[0].UniqueColumnName}):[],!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0].FieldInfos[0].IsParameterField)&&this.DataGroupInfo.FieldContainers[0].FieldInfos[0].IsParameterField?t.length>1?i.push({id:t[1],text:t[0],value:t[1]}):i.push({id:t[0],text:t[0],value:null}):u.length>0?i.push({id:r[0],text:u[0],value:r[0]}):r.length>0&&i.push({id:r[0],text:r[0],value:null})):i.push({id:t[1],text:t[0],value:t[1]}),i},t.prototype.updateMultiSelection=function(n,t){t===void 0&&(t=[]);t=this.getSelectedItems();var i=this.getSelectedIndexValues(t.SelectedItems,t.UnselectedItems,n),r=this.comboBoxObj.model.change;this.comboBoxObj.model.change=null;BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)||this.dataObj.length===1?BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)||this.dataObj.length!==1?this.comboBoxObj.getListData().length===t.SelectedItems.length&&t.UnselectedItems.length===0?this.comboBoxObj.checkAll():t.SelectedItems.length>0?(this.comboBoxObj.unCheckAll(),this.comboBoxObj.clearText(),this.comboBoxObj.selectItemByValue(t.SelectedItems),this.getVirtualSelectedData(t.SelectedItems,this.comboBoxObj)):t.UnselectedItems.length>0&&(this.comboBoxObj.checkAll(),this.comboBoxObj.unselectItemsByIndices(i.UnSelectedIndex)):this.comboBoxObj.checkAll():this.comboBoxObj.selectItemByText(this.dataObj[i.SelectedIndex[0]].text);this.comboBoxObj.model.change=r;BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this);i.length===0&&this.removeSelection();(this.getComboBoxProperties().IsAllSelected||this.comboBoxObj.getSelectedItem().length===this.comboBoxObj.getListData().length)&&(BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this),this.getComboBoxProperties().SelectedFilterValues=[])},t.prototype.getVirtualSelectedData=function(n,t){for(var u,f,i="",r=0;r<n.length;r++)u=t.model.value,!BoldBIDashboard.isNullOrUndefined(u)&&u.length>0?u.indexOf(n[r])<0&&(i+=", "+n[r]):i+=(i.length>0?", ":"")+n[r];i.length>0&&(f=this.bbdesigner$("#"+this.designerId+"comboBoxElement"+this.widgetJson.UniqueName+"_hidden"),f.val(f.val()+i))},t.prototype.initialSelectionForComboBox=function(){var i,r,f;if(!BoldBIDashboard.isNullOrUndefined(this.comboBoxObj)){var t=!1,n=[],u=this.DataGroupInfo.FieldContainers[0].FieldInfos[0];u.IsParameterField?this.getComboBoxProperties().EnableMultiSelection||this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design?!BoldBIDashboard.isNullOrUndefined(this.comboBoxObj)&&this.getComboBoxProperties().SelectedFilterValues.length>0?(this.updateMultiSelection(u,n),t=n.length>0&&this.comboBoxObj.getListData().length===n.SelectedItems.length&&n.UnselectedItems.length===0):(t=!0,this.getComboBoxProperties().EnableMultiSelection&&this.getComboBoxProperties().ParameterFieldSelected.length===0?(i=this.comboBoxObj.model.change,this.comboBoxObj.model.change=null,this.comboBoxObj.checkAll(),this.comboBoxObj.model.change=i):(this.removeSelection(!0),BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this))):(this.removeSelection(!0),BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this)):(this.getComboBoxProperties().SelectedFilterValues=this.getSelectedFilterValue(this.getComboBoxProperties().SelectedFilterValues),this.getComboBoxProperties().FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(this.comboBoxObj)&&this.getComboBoxProperties().SelectedFilterValues.length>0?this.updateMultiSelection(u,n):(t=!0,this.getComboBoxProperties().IsAllSelected&&this.getComboBoxProperties().EnableMultiSelection?(i=this.comboBoxObj.model.change,this.comboBoxObj.model.change=null,this.comboBoxObj.checkAll(),this.comboBoxObj.model.change=i):(this.removeSelection(!0),BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this))));t&&!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.dashboardFromData)&&this.designerInstance.model.dashboardFromData.loadFromData&&(r=this.controlContainer.find("#"+this.comboBoxElement.attr("id")+"_hidden"),f=!BoldBIDashboard.isNullOrUndefined(this.comboBoxObj.model)&&this.comboBoxObj.model.watermarkText!==""?this.comboBoxObj.model.watermarkText:this.locale.common.all,r.length===1&&(this.comboBoxElement.val()===""?this.bbdesigner$(r).val(f):this.bbdesigner$(r).val(this.comboBoxElement.val())))}},t.prototype.getSelectedFilterValue=function(n){if(n.length>0&&!BoldBIDashboard.isNullOrUndefined(n[0].InitialDateFilter)&&!BoldBIDashboard.isNullOrUndefined(n[0].InitialDateFilter.DateFilterList)&&n[0].InitialDateFilter.DateFilterList.length===1&&!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates))return[];if(n.length>0&&!BoldBIDashboard.isNullOrUndefined(n[0].InitialDateFilter)&&!BoldBIDashboard.isNullOrUndefined(n[0].InitialDateFilter.DateFilterList)&&n[0].InitialDateFilter.DateFilterList.length===2&&!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)){for(var t=0;t<this.dataObj.length;t++)if(n[0].InitialDateFilter.DisplayDateFilterList[0]===this.dataObj[t].value[0]&&n[0].InitialDateFilter.DisplayDateFilterList[1]===this.dataObj[t].value[1])return n;return[]}return n},t.prototype.getFilterInfo=function(n,t){var i=new DimensionFilterInfo;return i.IsAllowFilteringApplied=!0,i.AllowFilterInfo=new AllowFilteringInfo,i.AllowFilterInfo.Conditions=TextFilterOption.Contains.toString(),i.AllowFilterInfo.IsInclude=!0,i.AllowFilterInfo.FilterValues=[t.inputSearch.val()],i},t.prototype.getSelectedItems=function(){for(var t={UnselectedItems:[],SelectedItems:[]},i=0;i<this.getComboBoxProperties().SelectedFilterValues.length;i++){var n=this.getComboBoxProperties().SelectedFilterValues[i],r=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],u=r.FieldActualType==="bbi-designer-dataset-string"||r.FieldActualType==="bbi-designer-dataset-number"||r.FieldActualType==="bbi-designer-dataset-boolean",f=u?this.getFilterInformationList(n.InitialDimensionFilter.Text):n.InitialDateFilter.DisplayDateFilterList,e=u?n.InitialDimensionFilter.DimesnionFilterCondition:n.InitialDateFilter.DateFilterCondition;e===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Exclude)||e===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Exclude)?t.UnselectedItems=f:t.SelectedItems=f}return t},t.prototype.getFilterInformationList=function(n){for(var i=n,t=0;t<n.length;t++)i[t]=n[t].toString();return i},t.prototype.getSelectedIndexValues=function(n,t,i){var e=[],o=[],u,r,f;if(BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)){for(u=0;u<n.length;u++)for(r=0;r<this.dataObj.length;r++)f=this.dataObj[r][i.UniqueColumnName].toString(),n[u].toString()===f&&e.indexOf(r)===-1&&e.push(r);for(u=0;u<t.length;u++)for(r=0;r<this.dataObj.length;r++)f=this.dataObj[r][i.UniqueColumnName].toString(),t[u].toString()===f&&e.indexOf(r)===-1&&o.push(r)}else for(r=0;r<this.dataObj.length;r++)f=this.dataObj[r].value,n[0]===f[0]&&n[1]===f[1]&&e.indexOf(r)===-1&&e.push(r);return{SelectedIndex:e,UnSelectedIndex:o}},t.prototype.updateComboBoxSize=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this)?this.widgetContainerHelper.showControlError(this,this.dataValues):this.refreshComboBox()},t.prototype.removeSelection=function(n){var t,i,r,u;n===void 0&&(n=!1);BoldBIDashboard.isNullOrUndefined(this.comboBoxObj)||(t=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(t.FilterInfo)||(i=!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)&&BoldBIDashboard.isNullOrUndefined(t.FilterInfo.RelativeDateOptions),i&&(this.dataValues.RelativeDates=null,r=this.dataValues,this.updateComboBoxData(r))),this.checkAllClearFlag||(this.bbdesigner$("#"+this.designerId+"comboBoxAllElementCheckBox"+this.widgetJson.UniqueName).BoldBIDashboardCheckBox({checked:!1}),this.getComboBoxProperties().IsAllSelected=!1,this.isUserDisableAll=!0),this.comboBoxObj.uncheckAll(),this.comboBoxObj.clearText(),n&&(u=!BoldBIDashboard.isNullOrUndefined(this.dataObj)&&this.dataObj.length===1?this.dataObj[0][this.comboBoxObj.model.fields.text].toString():this.locale.common.all,this.comboBoxObj.option("watermarkText",u)),this.getComboBoxProperties().SelectFirstItemByDefault&&(this.getComboBoxProperties().DefaultSelectedIndices="0",this.getComboBoxProperties().SelectFirstItemByDefault=this.getComboBoxProperties().SelectFirstItemByDefault,this.setPropertyElement("BasicSettings","DefaultPosition",this.getComboBoxProperties().DefaultSelectedIndices),this.propertyPanel.updateItemVisibility("ComboBox","BasicSettings","DefaultPosition",this.getComboBoxProperties().SelectFirstItemByDefault),this.updateDefaultPosition(this.getComboBoxProperties().DefaultSelectedIndices)))},t.prototype.refreshComboBox=function(){if(!BoldBIDashboard.isNullOrUndefined(this.comboBoxObj)){this.comboBoxObj.option("width","100%");var n=this.cellInfo.RowSpan>2?30:25;this.setComboboxTop(n)}},t.prototype.refreshScrollBar=function(){if(BoldBIDashboard.DashboardUtil.updateScrollerVisibility(this.comboBoxElement.attr("id")+"_popup_wrapper"),this.getComboBoxProperties().EnableMultiSelection){if(this.bbdesigner$("#"+this.designerId+"comboBoxAllElementCheckBox"+this.widgetJson.UniqueName).data("BoldBIDashboardCheckBox").model.checked&&this.comboBoxObj.checkAll(),!this.isUserDisableAll){var n=this.getSelectedItems(),t=this.comboBoxObj.model.change;this.comboBoxObj.model.change=null;n.SelectedItems.length>0?(this.comboBoxObj.unCheckAll(),this.comboBoxObj.selectItemByValue(n.SelectedItems)):n.UnselectedItems.length>0&&(this.comboBoxObj.checkAll(),this.comboBoxObj.unselectItemByValue(n.UnselectedItems));this.comboBoxObj.model.change=t}this.updateInitialSelection()}},t.prototype.updateControlContainerPadding=function(){if(BoldBIDashboard.isNullOrUndefined(this.getContainerSettings().WidgetPaddingInfo)&&(this.getContainerSettings().WidgetPaddingInfo=new WidgetPaddingInfo,this.getContainerSettings().WidgetPaddingInfo.AutoPadding=!0,this.getContainerSettings().WidgetPaddingInfo.Padding=this.getControlContainerPaddingValue()),!BoldBIDashboard.isNullOrUndefined(this.controlContainer)&&this.controlContainer.length>0){var n=this.controlContainer.find(".bbi-dbrd-control-container-wrapper");n[0].style.padding="0px 8px"}},t.prototype.setComboboxTop=function(n){if(this.cellInfo.RowSpan>1){var i=n-2,r=this.widgetJson.ContainerSettings.ShowHeader?this.controlContainer.find(".bbi-dbrd-control-header").height():0,t=(this.controlContainer.innerHeight()-(r+11+i))/2;t=t<0?0:t;this.comboBoxItem.css("padding","4px 0px 0px 0px");this.contentContainer.css({padding:"0px",overflow:"visible"});this.controlContainer.find(".bbi-dbrd-control-container-wrapper").css("padding-top",t+"px");this.controlContainer.find("#"+this.comboBoxElement.attr("id")+"_wrapper").css({height:n+"px"})}else this.comboBoxItem.css("padding","0px"),this.contentContainer.css({padding:"0px",overflow:"hidden"}),this.controlContainer.find(".bbi-dbrd-control-container-wrapper").css("padding-top","0px")},t.prototype.getComboBoxPropPanel=function(){var i=this.isNecessaryDataConfigured(),t=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.getComboBoxProperties().FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo,this.widgetJson.ContainerSettings);return this.containerPropertyItem=t.containerProperties,t.propertyGridItems.Header=this.getComboBoxProperties().ContainerSettings.Title,t.propertyGridItems.SubTitle=this.getComboBoxProperties().ContainerSettings.SubTitle,t.propertyGridItems.Description=this.getComboBoxProperties().ContainerSettings.Description,t.propertyGridItems.Type="ComboBox",t.interWidgetLinkProperty.Items[0].value=n.prototype.useExistingWidgetLinking.call(this),this.bbdesigner$.each(t.containerActionsProperty.Items,function(n,t){(t.name==="ShowMaximize"||t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ImageExport"||t.name==="PDFExport"||t.name==="ViewData"||t.name==="PinWidget")&&(t.isVisible=!1)}),this.bbdesigner$.each(t.containerSettingsProperty.Items,function(n,t){(t.name==="ShowWidgetBackgroundImage"||t.name==="WidgetBackgroundImageMode"||t.name==="WidgetBackgroundImageSource"||t.name==="WidgetBackgroundImageBrowse"||t.name==="WidgetBackgroundImageURL")&&(t.isVisible=!1)}),t.propertyGridItems.Items=[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"EnableMultiSelect",displayName:this.locale.propertyPanel.basicSettings.enableMultiSelect,value:this.getComboBoxProperties().EnableMultiSelection,itemType:"bool"},{name:"AllowFilter",displayName:this.locale.propertyPanel.basicSettings.allowFilter,value:!BoldBIDashboard.isNullOrUndefined(this.getComboBoxProperties().AllowFilter)&&this.getComboBoxProperties().AllowFilter,itemType:"bool"},{name:"DefaultPosition",displayName:this.locale.propertyPanel.basicSettings.defaultPosition,isVisible:i&&this.getComboBoxProperties().SelectFirstItemByDefault,itemType:"object",callbackInstance:this,callbackMethod:"renderDefaultIndex"}]},t.filterSettingsProperty,t.containerSettingsProperty,t.containerActionsProperty,t.interWidgetLinkProperty,t.noDataContainerActionsProperty],t.propertyGridItems},t.prototype.renderDefaultIndex=function(n,t,i){var c,u,l,a;if(!BoldBIDashboard.isNullOrUndefined(this.comboBoxElement))if(BoldBIDashboard.isNullOrUndefined(n)){u=this.designerInstance.element.find("#"+this.designerId+"_"+t+"_"+i.name);u.off("blur",this.bbdesigner$.proxy(this.defaultIndexFoucusOut,this));u.off("keyup",this.bbdesigner$.proxy(this.defaultIndexKeyUp,this));u.on("blur",this.bbdesigner$.proxy(this.defaultIndexFoucusOut,this));u.on("keyup",this.bbdesigner$.proxy(this.defaultIndexKeyUp,this));u.val(this.getComboBoxProperties().DefaultSelectedIndices);l=this.comboBoxObj||this.comboBoxElement.data("BoldBIDashboardListBox");a=this.isNecessaryDataConfigured()&&l.pluginName==="BoldBIDashboardDropDownList";this.propertyPanel.updateItemVisibility("ComboBox","BasicSettings","DefaultPosition",a&&this.getComboBoxProperties().SelectFirstItemByDefault)}else{var f=BoldBIDashboard.buildTag("div","",{"margin-bottom":"15px",width:"100%",position:"relative",display:BoldBIDashboard.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designerId+"_"+t+"_"+i.name+"_container"}),s=BoldBIDashboard.buildTag("div","",{width:(n.width()-33)*.47+"px",float:"left","margin-left":"3px","margin-top":"8.5px"}),e=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"});e.text(i.name);s.append(e);BoldBIDashboard.isNullOrUndefined(i.displayName)||e.text(i.displayName);f.append(s);var o=BoldBIDashboard.buildTag("div","",{width:(n.width()-33)*.57+"px",display:"inline-block","margin-top":"3px",border:"0px solid","border-color":"red"},{id:this.designerId+"_"+t+"_"+i.name+"_parent"}),r=BoldBIDashboard.buildTag("input.e-textbox","",{height:"28px",width:"80%",float:"left","box-sizing":"border-box","margin-right":"10px"},{id:this.designerId+"_"+t+"_"+i.name,type:"text"}),h=BoldBIDashboard.buildTag("div.bbi-defaultIndex-info","",{height:"28px",width:"35px",float:"left","box-sizing":"border-box","line-height":"28px"},{id:this.designerId+"_"+t+"_"+i.name+"description"});r.val(this.getComboBoxProperties().DefaultSelectedIndices);o.append(r);o.append(h);r.off("blur",this.bbdesigner$.proxy(this.defaultIndexFoucusOut,this));r.off("keyup",this.bbdesigner$.proxy(this.defaultIndexKeyUp,this));r.on("blur",this.bbdesigner$.proxy(this.defaultIndexFoucusOut,this));r.on("keyup",this.bbdesigner$.proxy(this.defaultIndexKeyUp,this));c=this.getDefaultIndexInfoTemplate();h.BoldBIDashboardTooltip({content:c,cssClass:"bbi-defaultIndex-template",isBalloon:!1});f.append(o);n.append(f);n.addClass("e-default-position-container")}},t.prototype.defaultIndexFoucusOut=function(n){var t=this.bbdesigner$(n.target).val();this.getComboBoxProperties().DefaultSelectedIndices!==t&&this.updateDefaultPosition(t)},t.prototype.defaultIndexKeyUp=function(n){if(n.keyCode===13){var t=this.bbdesigner$(n.target).val();this.getComboBoxProperties().DefaultSelectedIndices!==t&&this.updateDefaultPosition(t)}},t.prototype.getDefaultIndexInfoTemplate=function(){return'<div class= "e-defaultIndex-info-container"><div class="bbi-defaultIndex-text-wrapper"><div class = "bbi-defaultIndexHeader"><b>'+this.locale.DefaultIndexInfo.usage+'<\/b><\/div><div class = "e-defaultIndex-info-text">'+this.locale.DefaultIndexInfo.usageText+'<\/div><\/div><div class="bbi-defaultIndex-text-wrapper"><div class = "bbi-defaultIndexHeader"><b>'+this.locale.DefaultIndexInfo.limitation+'<\/b><\/div><div class = "e-defaultIndex-info-text ">'+this.locale.DefaultIndexInfo.limitationText+'<\/div><\/div><div class="bbi-defaultIndex-text-wrapper"><div class = "bbi-defaultIndexHeader"><b>'+this.locale.DefaultIndexInfo.syntax+'<\/b><\/div><div class = "e-defaultIndex-info-text">'+this.locale.DefaultIndexInfo.singleNumberSyntax+'<\/div><div class = "e-defaultIndex-info-text">'+this.locale.DefaultIndexInfo.commaSyntax+'<\/div><div class = "e-defaultIndex-info-text">'+this.locale.DefaultIndexInfo.rangeSyntax+"<\/div><\/div><div>"},t.prototype.updateComboBoxProperties=function(n,t,i,r){var o=!1,u,f,s,e;switch(n){case"Name":this.widgetJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,i);break;case"EnableMultiSelect":this.updateEnableMultiSelect(i);break;case"AllowFilter":this.updateAllowFilterOption(i);break;case"SelectItemsByIndex":this.updateSelectFirstItemByDefault(i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,i);break;default:o=!0}if(!o){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(u=this.designPanelInstance.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)s=u[f],s.attr("id")===this.controlContainer.attr("id")&&(e=this.bbdesigner$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"ComboBox",i));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-combobox-item",this.designerId+"_"+this.widgetJson.UniqueName,[n,i,t,r],[n,t,i,r])}},t.prototype.setPropertyElement=function(n,t,i,r){this.propertyPanel.canUpdate=!1;var f=this.propertyPanel.getPropertyElement(this.getComboBoxPropPanel(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r),u=this.bbdesigner$.extend(!0,{},f);u.categoryName=n;f.name==="DefaultPosition"?this.setValueForDefaultIndexTextBox(u,"ComboBox",i):this.propertyPanel.updatePropertyValue(u,"ComboBox",i);this.propertyPanel.canUpdate=!0},t.prototype.comboBoxItemSelected=function(n){var o=n.isInteraction,t,u,r,i,f,e;if(!this.isDefaultRendering&&o){if(t=this,u=this.getComboBoxProperties().EnableMultiSelection?1500:0,BoldBIDashboard.isNullOrUndefined(this.multiSelectionTimer)||clearTimeout(this.multiSelectionTimer),this.getComboBoxProperties().EnableMultiSelection)if(t.allowVirtualScrolling&&t.updateVirtualSelectedValues(n,t.comboBoxObj,t.dataObj),r=this.bbdesigner$("#"+t.designerId+"comboBoxAllElementCheckBox"+t.widgetJson.UniqueName),i=this.updateComboboxAllTextboxElement(),n.isChecked)if(f=t.comboBoxObj.getSelectedItem().length===t.comboBoxObj.getListData().length,f){if(r.BoldBIDashboardCheckBox({checked:!0}),i.find("#AllTextboxElement"+this.widgetJson.UniqueName).text(this.locale.common.all),e=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],!e.IsParameterField){this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this);this.clearFilter(!0,undefined,!0,n.isChecked);return}}else i.remove();else r.BoldBIDashboardCheckBox({checked:!1}),i.remove();this.multiSelectionTimer=setTimeout(function(){t.updateSelectedValue("",!0)},u);t.updateInterWidgetLinking()}},t.prototype.updateInterWidgetLinking=function(){!BoldBIDashboard.isNullOrUndefined(this.getJson().WidgetLink)&&this.getJson().WidgetLink.Enable&&this.designerInstance.modules.containerTypeWidgetHelper.doInterWidgetLinking(this,this.comboBoxObj.model.selectedIndex)},t.prototype.isAllTypeDataFilterSupported=function(){return!0},t.prototype.checkIsSelectAllForFilterAPI=function(n){for(var i=n.filters,t=0;t<i.length;t++)if(!BoldBIDashboard.isNullOrUndefined(i[t].values)&&i[t].values.length>0&&i[t].values[0].toUpperCase()==="ALL")return!0;return!1},t.prototype.processFilterInformation=function(n){var t=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],s=n.filters,f,e,o;if(t.IsParameterField)return console.error("Widgets configured with dashboard parameter is not supported for API level filtering"),!1;if(this.getComboBoxProperties().EnableMultiSelection&&this.checkIsSelectAllForFilterAPI(n))this.checkAllWithWidgetsAPIOnDemand(),this.getComboBoxProperties().SelectedFilterValues=[];else{this.getComboBoxProperties().EnableMultiSelection&&(this.getComboBoxProperties().IsAllSelected=!1,BoldBIDashboard.isNullOrUndefined(this.comboBoxElement)||(f=this.bbdesigner$("#"+this.designerId+"comboBoxAllElementCheckBox"+this.widgetJson.UniqueName),f.BoldBIDashboardCheckBox({checked:!1}),e=this.updateComboboxAllTextboxElement(),e.remove(),this.comboBoxObj.unCheckAll()));var r=s[0].values,i=this.fieldTypeHandler(t),h=i[0],c=i[1],l=i[2],a=i[3],u=null;l?u={DateFormat:!BoldBIDashboard.isNullOrUndefined(this.dataValues)&&!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.RelativeDate):t.DateTimeFormat,DisplayFilterList:r,DateFilterList:r,DateFilterType:!BoldBIDashboard.isNullOrUndefined(this.dataValues)&&!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Exact):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Basic),SelectedRangeforRelativeFilter:!BoldBIDashboard.isNullOrUndefined(this.dataValues)&&!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?this.comboBoxObj.getValue():null}:a&&(u=r);o={FilterInfo:u,Action:h,IsStdDateTime:!1,IsMultiSelection:this.getComboBoxProperties().EnableMultiSelection,IsRange:!1};this.getComboBoxProperties().SelectedFilterValues=[];this.getComboBoxProperties().SelectedFilterValues=[this.masterFilterWindowInstance.updateInitialFiltersForFilterControls(t,this.widgetJson.UniqueName,c,o)]}return!0},t.prototype.checkAllWithWidgetsAPIOnDemand=function(){BoldBIDashboard.isNullOrUndefined(this.comboBoxElement)||(BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this),this.checkAllwithWidgetsAPI())},t.prototype.checkAllForWidgetAPIFromInitialization=function(){var t,n,i;if(!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.widgets)&&this.designerInstance.model.widgets.length>0&&this.designerInstance.model.widgets[0].id!==""&&this.getJson().SelectedFilterValues.length===0)for(t=this.designerInstance.model.widgets,n=0;n<t.length;n++)if(t[n].id===this.getJson().UniqueId)for(i=0;i<t[n].filters.length;i++)if(t[n].filters.length>0&&t[n].filters[i].values.length>0&&t[n].filters[i].values[0].toUpperCase()==="ALL"){this.checkAllwithWidgetsAPI();break}},t.prototype.checkAllwithWidgetsAPI=function(){var n,t;BoldBIDashboard.isNullOrUndefined(this.comboBoxElement)||(n=this.updateComboboxAllTextboxElement(),n.find("#AllTextboxElement"+this.widgetJson.UniqueName).text(this.locale.common.all),t=this.bbdesigner$("#"+this.designerId+"comboBoxAllElementCheckBox"+this.widgetJson.UniqueName),t.BoldBIDashboardCheckBox({checked:!0}),this.getComboBoxProperties().IsAllSelected=!0,this.comboBoxObj.checkAll())},t.prototype.fieldTypeHandler=function(n){var t=n.FieldActualType==="bbi-designer-dataset-string"||n.FieldActualType==="bbi-designer-dataset-number"||n.FieldActualType==="bbi-designer-dataset-boolean",i=n.FieldActualType==="bbi-designer-dataset-datetime"||n.FieldActualType==="bbi-designer-dataset-time",r=t?"bbi-designer-dataset-string":n.FieldActualType,u=t?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Include):i&&!BoldBIDashboard.isNullOrUndefined(this.dataValues)&&!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Range):i?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains);return[u,r,i,t]},t.prototype.updateSelectedValue=function(n,t,i){var tt=this,u=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],h=BoldBIDashboard.isNullOrUndefined(u.IsParameterField)?!1:u.IsParameterField,r,p,w,b,l,a,k,d,g,nt,s;this.clonedData=this.bbdesigner$.extend(!0,{},u);var e=[],c=this.fieldTypeHandler(u),f=c[0],it=c[1],v=c[2],rt=c[3],y=[],o=[];if(!BoldBIDashboard.isNullOrUndefined(this.comboBoxObj))if(r=BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?t?this.comboBoxObj.getSelectedItemsID():n:[this.comboBoxObj.getSelectedItemsID()[0][0],this.comboBoxObj.getSelectedItemsID()[0][1]],!t&&n.length>0,this.getComboBoxProperties().EnableMultiSelection){if(p=__spreadArray([],r,!0),r=p,this.dataValues.hasMoreRecords&&this.virtualFilterValues.length>0)for(w=function(n){r.filter(function(t){return t===tt.virtualFilterValues[n]}).length<=0&&r.push(b.virtualFilterValues[n])},b=this,l=0;l<this.virtualFilterValues.length;l++)w(l);a=h?r:this.getInitialSelectionFilterValues(this.comboBoxObj,f,r,!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[1])&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0);h||(f=a.Action);rt?(e=h?r:a.FilterInfo,f=e.length>0?f:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains)):v&&(o=h?r:a.FilterInfo,y=u.DateTimeFormat===DateTimeFormat.Default?this.masterFilterWindowInstance.getDateFilterList(o,!0):o,e={DateFormat:u.DateTimeFormat,DisplayFilterList:o,DateFilterList:y},f=o.length>0?f:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include))}else f=r.length>0?f:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains),e=v?{DateFormat:BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?u.DateTimeFormat:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.RelativeDate),DisplayFilterList:r,DateFilterList:r,DateFilterType:BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Basic):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Exact),SelectedRangeforRelativeFilter:BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)?null:this.comboBoxObj.getValue()}:r;(k={FilterInfo:e,Action:f,IsStdDateTime:!1,IsMultiSelection:this.getComboBoxProperties().EnableMultiSelection,IsRange:!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)},BoldBIDashboard.isNullOrUndefined(i)&&this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))||(this.getComboBoxProperties().SelectedFilterValues=[this.masterFilterWindowInstance.updateInitialFiltersForFilterControls(u,this.widgetJson.UniqueName,it,k)],t&&(d=v?e.DateFilterList.length>0:e.length>0,d?(u.IsParameterField&&this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design?(BoldBIDashboard.isNullOrUndefined(i)&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this),s=new SelectedParameterValue,s.SelectedValue=r,s.DataSourceName=this.DataGroupInfo.DataSourceName,s.ParameterId=u.Id,this.designerInstance.modules.dynamicParameterPanel.applyParametersForFilterWidgets(s,this.Name,t)):(BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this),this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this),this.masterFilterWindowInstance.doInteraction(this.getComboBoxProperties().UniqueName,this.masterFieldDetails(this.widgetJson))),this.designerInstance.modules.serialization.notifyChange()):(g=this.bbdesigner$("#"+this.designerId+"comboBoxAllElementCheckBox"+this.widgetJson.UniqueName).data("BoldBIDashboardCheckBox").model.checked,nt=BoldBIDashboard.isNullOrUndefined(i)?!0:i,this.clearFilter(g,undefined,nt))))},t.prototype.updateVirtualSelectedValues=function(n,t,i){for(var f,u=!1,r=0;r<i.length;r++)if(f=this.DataGroupInfo.FieldContainers[0].FieldInfos[0].UniqueColumnName,i[r][f]===n.selectedValue){u=!0;break}u||(n.isChecked&&this.virtualFilterValues.filter(function(t){return t===n.selectedValue}).length<=0?this.virtualFilterValues.push(n.selectedValue):this.virtualFilterValues=this.virtualFilterValues.filter(function(t){return t!==n.selectedValue}))},t.prototype.getVirtualSelectedDataFromFilterValues=function(){var t,i,n,r,u;if(this.getComboBoxProperties().EnableMultiSelection&&this.dataValues.hasMoreRecords)for(this.virtualFilterValues=[],t=this.getSelectedItems().SelectedItems,i=!0,n=0;n<t.length;n++){for(i=!1,r=0;r<this.dataObj.length;r++)if(u=this.DataGroupInfo.FieldContainers[0].FieldInfos[0].UniqueColumnName,this.dataObj[r][u]===t[n]){i=!0;break}i||this.virtualFilterValues.push(t[n])}},t.prototype.getInitialSelectionFilterValues=function(n,t,i,r){var e=[],u,f;if(this.isUserDisableAll)t=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Include),e=i;else if(u=n.popupList.find("li .e-checkwrap.e-combobox-control[aria-checked=false]"),u.length!==this.comboBoxObj.getListData().length){for(f=0;f<u.length;f++)r?e.push(u[f].parentElement.id):e.push(u[f].parentElement.textContent);t=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Exclude)}return{Action:t,FilterInfo:e}},t.prototype.processFilterSearch=function(n){var t=this;this.filterSearchOlderText!==n.searchString&&(this.filterSearchOlderText=n.searchString,this.comboBoxObj._totalCount-this.comboBoxObj._rawList.length==1&&n.searchString!==""&&(n.cancel=!0),BoldBIDashboard.isNullOrUndefined(this.searchTextTimer)||clearTimeout(this.searchTextTimer),this.searchTextTimer=setTimeout(function(n){t.processFilterDataRequest(n)},1e3,n))},t.prototype.processFilterDataRequest=function(t){var r,f,o;if(this.hasMoreFilteredRecords=!0,!BoldBIDashboard.isNullOrUndefined(this.filterSearchTimer)&&this.filterSearchTimer&&this.filterSearchTimer.readyState!==4&&(this.comboBoxObj._removeLoadingClass(),this.filterSearchTimer.abort(),clearTimeout(this.filterSearchTimer)),this.comboBoxObj._totalCount-this.comboBoxObj._rawList.length==1&&t.searchString!==""){this.comboBoxObj._addLoadingClass();this.VirtualScrollSettings.StartIndex=1;var i=this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(this.DataGroupInfo),s=n.prototype.getWidgetInfo.call(this,this.DataGroupInfo),e=new FilterInfo,u=void 0;for(r=0;r<i.length;r++)f=i[r],this.DataGroupInfo.FieldContainers[1].FieldInfos.length===0&&f.ContainerName==="Column"?u=JSON.parse(JSON.stringify(i[r])):this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0&&f.ContainerName==="DisplayColumn"&&(u=JSON.parse(JSON.stringify(i[r])));e.DimensionFilterInfo=this.getFilterInfo(this,this.comboBoxObj);u.FilterInfo=e;u.IsVisible=!1;i.push(u);o=this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design;this.filterSearchTimer=this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.WidgetAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,fieldInfo:i,dataset:this.DataGroupInfo.DataSourceID,widgetInfo:s,request:AjaxRequest.Widget.toString(),selectedValuesList:this.masterFilterWindowInstance.getAllWidgetSelectedValues(),isDataSampleForViewMode:o})},{fnction:this.bbdesigner$.proxy(this.bindFilteredData,this,t)})}else t.searchString===""&&this.getComboBoxProperties().EnableMultiSelection&&this.dataValues.hasMoreRecords&&this.virtualFilterValues.length>0&&this.updateInitialSelection()},t.prototype.bindFilteredData=function(n,t){this.filterArgs=n;this.designerInstance.modules.resource.updateColorCodeInfo(t);var i=JSON.parse(t.data);this.hasMoreFilteredRecords=t.hasMoreRecords;n.result=i;this.comboBoxObj._filterSearch(null,n);this.comboBoxObj._removeLoadingClass()},t.prototype.updateEnableMultiSelect=function(n){var t,r,i,u;if(this.getComboBoxProperties().EnableMultiSelection=n,this.comboBoxObj._resetSearch(),this.comboBoxObj.option("showCheckbox",n),this.comboBoxObj.option("popupHeight",this.getPopupHeight()),n||(t=this.getComboBoxProperties().SelectFirstItemByDefault,this.clearFilter(),this.comboBoxObj.pluginName==="BoldBIDashboardDropDownList"&&(this.comboBoxObj.option("watermarkText",this.locale.common.all),t&&(this.getComboBoxProperties().DefaultSelectedIndices="0",this.getComboBoxProperties().SelectFirstItemByDefault=t,this.setPropertyElement("BasicSettings","DefaultPosition",this.getComboBoxProperties().DefaultSelectedIndices),this.propertyPanel.updateItemVisibility("ComboBox","BasicSettings","DefaultPosition",this.getComboBoxProperties().SelectFirstItemByDefault),this.updateDefaultPosition(this.getComboBoxProperties().DefaultSelectedIndices)))),this.updateAllSelectionVisibilty(n),this.checkAllClearFlag=!0,this.clearFilter(),this.checkAllClearFlag=!0,r=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],r.IsParameterField&&this.getComboBoxProperties().EnableMultiSelection){this.getComboBoxProperties().ParameterFieldSelected.length>0&&this.updateSelectedValue(this.getComboBoxProperties().ParameterFieldSelected,!1);this.initialSelectionForComboBox();this.bbdesigner$("#"+this.designerId+"comboBoxAllElementCheckBox"+this.widgetJson.UniqueName).BoldBIDashboardCheckBox({text:this.locale.common.all,checked:(this.getComboBoxProperties().IsAllSelected||this.comboBoxObj.getSelectedItem().length===this.comboBoxObj.getListData().length)&&this.comboBoxObj.getSelectedItem().length===this.comboBoxObj.getListData().length,change:this.bbdesigner$.proxy(this.updateAllSelection,this),cssClass:"e-combobox-all-element"});this.bbdesigner$("#"+this.designerId+"comboBoxAllElementWrap"+this.widgetJson.UniqueName).on("click",this.bbdesigner$.proxy(this.updateAllSelection,this));this.bbdesigner$("#"+this.designerId+"comboBoxAllElementWrap"+this.widgetJson.UniqueName).off("click",this.bbdesigner$.proxy(this.updateAllSelection,this));this.updateAllSelectionVisibilty(this.getComboBoxProperties().EnableMultiSelection);this.getComboBoxProperties().EnableMultiSelection&&(i=this.updateComboboxAllTextboxElement(),u=this.bbdesigner$("#"+this.designerId+"comboBoxAllElementCheckBox"+this.widgetJson.UniqueName).data("BoldBIDashboardCheckBox").model.checked,u?i.find("#AllTextboxElement"+this.widgetJson.UniqueName).text(this.locale.common.all):i.remove())}!BoldBIDashboard.isNullOrUndefined(this.dataValues.RelativeDates)&&n&&(this.DataGroupInfo.FieldContainers[0].FieldInfos[0].FilterInfo.RelativeDateOptions=null,this.clearFilter())},t.prototype.updateAllSelectionVisibilty=function(n){this.bbdesigner$("#"+this.designerId+"comboBoxAllElementWrap"+this.widgetJson.UniqueName).css("display",n?"block":"none")},t.prototype.updateAllSelection=function(n){var t,i,r;if(n.isInteraction){if(t=n.isInteraction,this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.getComboBoxProperties().IsAllSelected=n.isChecked,t=!1),this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;this.checkAllClearFlag=!0;i=this.DataGroupInfo.FieldContainers[0].FieldInfos[0];this.clearFilter(!1,i.IsParameterField,t,n.isChecked);this.checkAllClearFlag=!1;r=this.updateComboboxAllTextboxElement();n.isChecked?(this.isUserDisableAll=!1,r.find("#AllTextboxElement"+this.widgetJson.UniqueName).text(this.locale.common.all),this.comboBoxObj.checkAll()):(r.remove(),this.isUserDisableAll=!0);this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&i.IsParameterField&&(this.getComboBoxProperties().SelectedFilterValues=[],this.updateSelectedValue("",!0,n.isChecked))}},t.prototype.updateComboboxAllTextboxElement=function(){var t=this.comboBoxElement.parent().find("#AllTextboxContainer"+this.widgetJson.UniqueName),n;return t.length===0?(n=this.bbdesigner$('<div id="AllTextboxContainer'+this.widgetJson.UniqueName+'" class="e-combobox-all-text-box-container"><span id="AllTextboxElement'+this.widgetJson.UniqueName+'" class="e-combobox-all-text-box-element e-designer-fontfamily" style="color:'+this.designerInstance.modules.themeHelper.getDDWidgetDDLTextColor(this.Type.toLowerCase())+'"><\/span><\/div>'),this.comboBoxElement[0].insertAdjacentElement("afterend",n[0]),n):t},t.prototype.updateAllowFilterOption=function(n){this.getComboBoxProperties().AllowFilter=n;this.comboBoxObj._resetSearch();this.comboBoxObj.option("enableFilterSearch",n)},t.prototype.updateSelectFirstItemByDefault=function(n){this.getComboBoxProperties().SelectFirstItemByDefault=n;n?(this.getComboBoxProperties().SelectedFilterValues=[],this.updateDefaultPosition(this.getComboBoxProperties().DefaultSelectedIndices)):(this.clearFilter(),this.getComboBoxProperties().DefaultSelectedIndices="0");this.propertyPanel.updateItemVisibility("ComboBox","BasicSettings","DefaultPosition",n)},t.prototype.updateDefaultPosition=function(n){if(!BoldBIDashboard.isNullOrUndefined(this.comboBoxObj))if(this.getComboBoxProperties().EnableMultiSelection){var t=[],i=this.checkError(n);i||(t=this.getSelectedIndicesForMultiSelect(n),t.length===0?(t=this.getSelectedIndicesForMultiSelect(this.getComboBoxProperties().DefaultSelectedIndices),this.updateDefaultSelectedIndices(this.comboBoxObj,t)):(this.getComboBoxProperties().DefaultSelectedIndices=n,this.updateDefaultSelectedIndices(this.comboBoxObj,t)))}else this.defaultIndexForSingleSelection(n)},t.prototype.checkError=function(n){var i=new RegExp(/^[0-9-,]+$/),t=new RegExp(/^[,]+$/);return!i.test(n)||t.test(n[0])||t.test(n[n.length-1])?(this.setPropertyElement("BasicSettings","DefaultPosition",this.getComboBoxProperties().DefaultSelectedIndices),!0):!1},t.prototype.defaultIndexForSingleSelection=function(n){if(!BoldBIDashboard.isNullOrUndefined(this.comboBoxObj)){var t=new RegExp("^[0-9]*$");t.test(n)?(parseInt(n,10)>this.comboBoxObj.model.dataSource.length?parseInt(this.getComboBoxProperties().DefaultSelectedIndices,10)<this.comboBoxObj.model.dataSource.length&&this.comboBoxObj.unselectItemByIndex(this.getComboBoxProperties().DefaultSelectedIndices):(this.getComboBoxProperties().DefaultSelectedIndices=n,this.updateDefaultSelectedIndices(this.comboBoxObj,n)),this.getComboBoxProperties().DefaultSelectedIndices=n):this.updateDefaultSelectedIndices(this.comboBoxObj,this.getComboBoxProperties().DefaultSelectedIndices)}},t.prototype.getSelectedIndicesForMultiSelect=function(n){for(var f,e,u,t=[],o=new RegExp("^[0-9]*$"),s=n.replace(/\s/g,""),r=s.split(","),h=new RegExp(/[-]/),i=0;i<r.length;i++)if(h.test(r[i])){for(f=r[i].split("-"),e=[],u=0;u<f.length;u++)o.test(f[u])&&e.indexOf(f[u])===-1&&e.push(parseInt(f[u],10));if(t=this.getRangeIndices(t,e),t.length===0)break}else o.test(r[i])&&t.indexOf(r[i])===-1?t.push(r[i]):(t=this.getComboBoxProperties().DefaultSelectedIndices.split(","),this.setPropertyElement("BasicSettings","DefaultPosition",this.getComboBoxProperties().DefaultSelectedIndices));return t},t.prototype.updateDefaultSelectedIndices=function(n,t){this.getComboBoxProperties().EnableMultiSelection?(n.clearText(),n.selectItemsByIndices(t.toString())):n.selectItemByIndex(t);this.setPropertyElement("BasicSettings","DefaultPosition",this.getComboBoxProperties().DefaultSelectedIndices);BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this);this.designerInstance.modules.serialization.notifyChange()},t.prototype.getRangeIndices=function(n,t){if(t[0]<=t[1])for(var i=t[0];i<=t[1];i++)n.indexOf(i.toString())===-1&&n.push(i.toString());else n=[];return n},t.prototype.setValueForDefaultIndexTextBox=function(n,t,i){this.designerInstance.element.find("#"+this.designerId+"_"+t+"_"+n.categoryName+"_"+n.name).val(i)},t.prototype.getComboBoxProperties=function(){return this.widgetJson},t.prototype.setContainerDefaultProperties=function(){var t=n.prototype.getContainerSettings.call(this);t.EnableImageExport=t.EnablePdfExport=t.EnableExcelExport=t.EnableCsvExport=!1;t.ShowMaximize=!1;t.PinWidget=!1;t.ViewData=!1},t.prototype.disposeComboBox=function(){BoldBIDashboard.isNullOrUndefined(this.comboBoxElement)||BoldBIDashboard.isNullOrUndefined(this.comboBoxObj)||this.comboBoxObj.destroy();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.ComboBox)},t.prototype.generateFieldContainer=function(n,t,i,r,u,f){var e=new BoldBIDashboard.Dashboard.FieldContainerForUI;return e.Name=n,e.ContainerType=t,e.CategoryCount=i,e.QueryOrder=r,e.Required=u,BoldBIDashboard.isNullOrUndefined(f)||(e.DisplayName=f),e},t.prototype.updateSubTitleForContainer=function(){if(this.getContainerSettings().ShowHeader&&!BoldBIDashboard.isNullOrUndefined(this.getContainerSettings().SubTitle)&&this.getContainerSettings().SubTitle!==""){var n=this.controlContainer.find(".bbi-dbrd-control-header").height();this.cellInfo.RowSpan<=2?(this.controlContainer.find(".bbi-dbrd-control-sub-header").css("display","none"),n=this.controlContainer.find(".bbi-dbrd-control-header").outerHeight()):(this.controlContainer.find(".bbi-dbrd-control-sub-header").css("display","block"),n=n+this.controlContainer.find(".bbi-dbrd-control-sub-header").outerHeight());this.contentContainer.css("height","calc(100% - "+n+"px)");this.IsRendered&&this.updateSize(this.cellInfo)}},t.prototype.isParamSupported=function(){return!0},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.ComboBoxItem",InternalComboBoxReportItem,window);BoldBIDashboard.DashboardDesignerUtility.ComboBoxItem.prototype.initialize();InternalGridColumnCustomize=function(){function n(n){this.gridColumnCustomizeDialog=null;this.gridHeaderAlignDivElement=null;this.gridContentAlignDivElement=null;this.individualContainer=null;this.individualScrollElement=null;this.targetInstance=null;this.targetMethod=null;this.footerTag=null;this.settingsContainer=null;this.divHeadElement=null;this.lastModifiedTextInfo=null;this.gridColumnObjectInfo=null;this.gridAlignmentInfo=[];this.isFitToContentEnabled=!1;this.locale=null;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.dashboardDesigner._id+"_grid_column_customization";this.renderGridColumnCustomizeWindow();this.wireEvents()}return n.prototype.renderGridColumnCustomizeWindow=function(){var n=this.gridColumnCustomizeDialog=BoldBIDashboard.buildTag("div.e-dbrd-userselect","",{},{id:this.id+"_grid_column_customize_settings"}),t=this.settingsContainer=BoldBIDashboard.buildTag("div","",{}),i,r,u,f;this.divHeadElement=this.createDivHeadElement();t.append(this.divHeadElement);this.individualContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3 bbi-dbrd-grid-custom-individual-container","",{},{id:this.id+"_grid_column_customize_settings_container"});i=BoldBIDashboard.buildTag("div","",{});r=this.individualScrollElement=BoldBIDashboard.buildTag("table.e-dbrd-table bbi-dbrd-grid-custom-table","",{},{id:this.id+"_grid_column_customize_settings_elements"});i.append(r);this.individualContainer.append(i);u=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.locale.dialogOptions.cancelButtonText,{float:"right"},{id:this.id+"_grid_column_customize_settings_cancel",type:"button"});f=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.dialogOptions.okButtonText,{float:"right"},{id:this.id+"_grid_column_customize_settings_ok",type:"button"});t.append(this.individualContainer);n.append(t);this.dashboardDesigner.element.append(n);n.BoldBIDashboardDialog({title:this.locale.gridColumnCustomize.columnCustomize,width:"577px",height:"auto",minWidth:577,minHeight:320,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner",close:this.bbdesigner$.proxy(this.closeColumnCustomizeSettingsDialog,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText});this.footerTag=this.dashboardDesigner.element.find("#"+this.id+"_grid_column_customize_settings_foot");this.footerTag.append(u,f);this.individualContainer.BoldBIDashboardScroller({height:"282px",scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,enableTouchScroll:!0,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize})},n.prototype.createDivHeadElement=function(){var n=BoldBIDashboard.buildTag("div.bbi-dbrd-grid-custom-table-head-element","",{}),i=BoldBIDashboard.buildTag("div.bbi-dbrd-grid-custom-column-name",this.locale.gridCustomHeader.columnName,{}),t=BoldBIDashboard.buildTag("div.bbi-dbrd-grid-custom-header-text",this.locale.gridCustomHeader.headerText,{}),r=BoldBIDashboard.buildTag("div.bbi-dbrd-grid-custom-header-alignment",this.locale.gridCustomHeader.headerAlignment,{}),u=BoldBIDashboard.buildTag("div.bbi-dbrd-grid-custom-content-alignment",this.locale.gridCustomHeader.contentAlignment,{}),f=BoldBIDashboard.buildTag("div.bbi-dbrd-grid-custom-column-width",this.locale.gridCustomHeader.columnWidth,{});return t.hide(),n.append(i,t,r,u,f),n},n.prototype.openColumnCustomizeSettings=function(n,t,i){this.gridColumnCustomizeDialog.data("BoldBIDashboardDialog").open();this.resetColumnSettingProp();this.gridColumnObjectInfo=i;this.gridAlignmentInfo=BoldBIDashboard.isNullOrUndefined(i.gridAlignment)?[]:JSON.parse(JSON.stringify(i.gridAlignment));this.isFitToContentEnabled=i.isFitToContentEnabled;this.populateColumnName();this.targetInstance=n;this.targetMethod=t},n.prototype.renderColumns=function(n){var i=this.createColGroupElement(),t;for(n.append(i),this.bbdesigner$(this.divHeadElement).css("width",this.settingsContainer.width()),t=0;t<this.gridAlignmentInfo.length;t++)this.renderRowElement(n,this.gridAlignmentInfo[t],t)},n.prototype.resetIconAlignment=function(){this.gridAlignmentInfo=BoldBIDashboard.isNullOrUndefined(this.gridColumnObjectInfo)?[]:JSON.parse(JSON.stringify(this.gridColumnObjectInfo.gridAlignment));for(var n=0;n<this.gridAlignmentInfo.length;n++)this.updateGridAlignment(this.gridHeaderAlignDivElement,n,this.locale.gridColumnCustomize.headerAlign),this.updateGridAlignment(this.gridContentAlignDivElement,n,this.locale.gridColumnCustomize.textAlign)},n.prototype.createColGroupElement=function(){var n=BoldBIDashboard.buildTag("colgroup","",{}),t=BoldBIDashboard.buildTag("col","",{width:"150px"},{}),i=BoldBIDashboard.buildTag("col","",{width:"140px"},{}),r=BoldBIDashboard.buildTag("col","",{width:"140px"},{}),u=BoldBIDashboard.buildTag("col","",{width:"120px"},{});return n.append(t,i,r,u),n},n.prototype.scrollerRefresh=function(n){n.data("BoldBIDashboardScroller")&&n.data("BoldBIDashboardScroller").refresh()},n.prototype.renderRowElement=function(n,t,i){var e=BoldBIDashboard.buildTag("tr","",{}),o=BoldBIDashboard.buildTag("div.bbi-dbrd-grid-custom-name-element","",{}),s=BoldBIDashboard.buildTag("div","",{},{"class":"bbi-designer-fontfamily bbi-dbrd-grid-custom-name-child-element bbi-dbrd-designer-hoverable","data-tooltip":t.HeaderText}),h,r,u,f;s.text(t.HeaderText);o.append(s);h=BoldBIDashboard.buildTag("div.bbi-dbrd-grid-custom-cell-element","",{},{id:this.id+"_edit_column_names_value_"+i+"_parent"});r=BoldBIDashboard.buildTag("input","",{},{id:this.id+"_edit_column_names_value_"+i,type:"text","class":"bbi-dbrd-grid-custom-value-element e-textbox",value:t.HeaderText});h.append(r);this.gridHeaderAlignDivElement=BoldBIDashboard.buildTag("div.bbi-dbrd-grid-header-div","",{});var c=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_grid_header_align_left_"+i,"class":"bbi-dbrd-grid-align-left e-dbrd-grid-header-align bbi-dbrd-grid-align-default-color bbi-dbrd-designer-hoverable","data-tooltip":this.locale.gridalignment.alignLeft,"data-align":BoldBIDashboard.TextAlign.Left,"data-rowId":i}),l=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_grid_header_align_center_"+i,"class":"bbi-dbrd-grid-align-center e-dbrd-grid-header-align bbi-dbrd-grid-align-default-color bbi-dbrd-designer-hoverable","data-tooltip":this.locale.gridalignment.alignCenter,"data-align":BoldBIDashboard.TextAlign.Center,"data-rowId":i}),a=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_grid_header_align_right_"+i,"class":"bbi-dbrd-grid-align-right e-dbrd-grid-header-align bbi-dbrd-grid-align-default-color bbi-dbrd-designer-hoverable","data-tooltip":this.locale.gridalignment.alignRight,"data-align":BoldBIDashboard.TextAlign.Right,"data-rowId":i});this.gridHeaderAlignDivElement.append(c,l,a);this.updateGridAlignment(this.gridHeaderAlignDivElement,i,this.locale.gridColumnCustomize.headerAlign);this.gridContentAlignDivElement=BoldBIDashboard.buildTag("div.bbi-dbrd-gird-content-div","",{});var v=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_grid_content_align_left_"+i,"class":"bbi-dbrd-grid-align-left e-dbrd-grid-content-align bbi-dbrd-grid-align-default-color bbi-dbrd-designer-hoverable","data-tooltip":this.locale.gridalignment.alignLeft,"data-align":BoldBIDashboard.TextAlign.Left,"data-rowId":i}),y=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_grid_content_align_Center_"+i,"class":"bbi-dbrd-grid-align-center e-dbrd-grid-content-align bbi-dbrd-grid-align-default-color bbi-dbrd-designer-hoverable","data-tooltip":this.locale.gridalignment.alignCenter,"data-align":BoldBIDashboard.TextAlign.Center,"data-rowId":i}),p=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_grid_content_align_right_"+i,"class":"bbi-dbrd-grid-align-right e-dbrd-grid-content-align bbi-dbrd-grid-align-default-color bbi-dbrd-designer-hoverable","data-tooltip":this.locale.gridalignment.alignRight,"data-align":BoldBIDashboard.TextAlign.Right,"data-rowId":i});this.gridContentAlignDivElement.append(v,y,p);this.updateGridAlignment(this.gridContentAlignDivElement,i,this.locale.gridColumnCustomize.textAlign);u=BoldBIDashboard.buildTag("div.bbi-dbrd-gird-content-div","",{},{id:this.id+"_column_width_parent"});f=BoldBIDashboard.buildTag("input.e-dbrd-grid-column-width","",{},{id:this.id+"_column_width_"+i,"data-rowId":i});u.append(f);f.ejNumericTextbox({decimalPlaces:0,value:this.isFitToContentEnabled?null:t.ColumnWidth,width:"100px",height:"28px ",showRoundedCorner:!0,watermarkText:"auto",enabled:!this.isFitToContentEnabled,cssClass:"bbi-designer-ejwidgets bbi-designer-ejwidgets-updown bbi-designer-content-label",change:this.bbdesigner$.proxy(this.onChangeColumnWidth,this),maxValue:1500,minValue:1});r.off("blur",this.bbdesigner$.proxy(this.textFocusOut,this,i));r.off("keyup",this.bbdesigner$.proxy(this.textKeyUp,this,i));r.on("blur",this.bbdesigner$.proxy(this.textFocusOut,this,i));r.on("keyup",this.bbdesigner$.proxy(this.textKeyUp,this,i));e.append(BoldBIDashboard.buildTag("td").append(o),BoldBIDashboard.buildTag("td").append(this.gridHeaderAlignDivElement),BoldBIDashboard.buildTag("td").append(this.gridContentAlignDivElement),BoldBIDashboard.buildTag("td").append(u));n.append(e)},n.prototype.updateGridAlignment=function(n,t,i){var r=this,u=this;n.children().map(function(n,f){r.bbdesigner$(f).attr("data-align")===u.gridAlignmentInfo[t][i].toLowerCase()&&r.bbdesigner$(f).removeClass("bbi-dbrd-grid-align-default-color").addClass("bbi-dbrd-grid-align-back-color");r.bbdesigner$(f).attr("data-align")===BoldBIDashboard.TextAlign.Left.toString()?r.bbdesigner$(f).removeClass("bbi-dbrd-grid-align-right-click").addClass("bbi-dbrd-grid-align-left-click"):r.bbdesigner$(f).attr("data-align")===BoldBIDashboard.TextAlign.Right.toString()&&r.bbdesigner$(f).removeClass("bbi-dbrd-grid-align-left-click").addClass("bbi-dbrd-grid-align-right-click")})},n.prototype.onChangeColumnWidth=function(n){if(n.isInteraction&&!BoldBIDashboard.isNullOrUndefined(n.model.name)){var t=this.bbdesigner$("#"+n.model.name).attr("data-rowId");this.gridAlignmentInfo[t].ColumnWidth=BoldBIDashboard.isNullOrUndefined(n.value)?n.value:n.value.toString();this.gridAlignmentInfo[t].IsColumnWidthModified=!BoldBIDashboard.isNullOrUndefined(n.value)}},n.prototype.onHeaderAlignClick=function(n){var t=this.bbdesigner$(n.target).attr("data-rowId"),i=this.gridAlignmentInfo[t].HeaderAlign=this.bbdesigner$(n.target).attr("data-align");this.setAlign(i,n)},n.prototype.onContentAlignClick=function(n){var t=this.bbdesigner$(n.target).attr("data-rowId"),i=this.gridAlignmentInfo[t].TextAlign=this.bbdesigner$(n.target).attr("data-align");this.setAlign(i,n)},n.prototype.setAlign=function(n,t){this.bbdesigner$(t.target.parentElement).find(".e-dbrd-grid-content-align, .e-dbrd-grid-header-align").removeClass("bbi-dbrd-grid-align-back-color").addClass("bbi-dbrd-grid-align-default-color");this.bbdesigner$(t.target).removeClass("bbi-dbrd-grid-align-default-color, bbi-dbrd-grid-align-right-click, bbi-dbrd-grid-align-left-click").addClass("bbi-dbrd-grid-align-back-color")},n.prototype.textFocusOut=function(n){var t=this.settingsContainer.find("#"+this.id+"_edit_column_names_value_"+n).val();this.lastModifiedTextInfo=null;this.onValueChange(n,t)},n.prototype.onValueChange=function(n,t){t.length>0?this.gridAlignmentInfo[n].HeaderText=t:(this.gridAlignmentInfo[n].HeaderText=this.gridAlignmentInfo[n].FieldName,this.settingsContainer.find("#"+this.id+"_edit_column_names_value_"+n).val(this.gridAlignmentInfo[n].FieldName))},n.prototype.textKeyUp=function(n,t){var i=this.settingsContainer.find("#"+this.id+"_edit_column_names_value_"+n).val();if(t.keyCode===13)this.onValueChange(n,i);else this.lastModifiedTextInfo={rowIndex:n,value:i}},n.prototype.populateColumnName=function(){this.renderColumns(this.individualScrollElement);this.scrollerRefresh(this.individualContainer)},n.prototype.updateColumnCustomizeInfo=function(){if(!BoldBIDashboard.isNullOrUndefined(this.targetInstance)){if(!BoldBIDashboard.isNullOrUndefined(this.lastModifiedTextInfo)){this.onValueChange(this.lastModifiedTextInfo.rowIndex,this.lastModifiedTextInfo.value);this.lastModifiedTextInfo=null}var n={gridAlignment:this.gridAlignmentInfo};this.closeColumnCustomizeSettingsDialog();BoldBIDashboard.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[n])}},n.prototype.closeColumnCustomizeSettingsDialog=function(){this.unWireEvents();this.gridColumnCustomizeDialog.data("BoldBIDashboardDialog").close();this.resetIconAlignment()},n.prototype.resetColumnSettingProp=function(){this.targetInstance=null;this.targetMethod=null;this.gridAlignmentInfo=null;this.individualScrollElement.empty()},n.prototype.wireEvents=function(){this.dashboardDesigner.element.on("click","#"+this.id+"_grid_column_customize_settings_cancel",this.bbdesigner$.proxy(this.closeColumnCustomizeSettingsDialog,this));this.dashboardDesigner.element.on("click","#"+this.id+"_grid_column_customize_settings_ok",this.bbdesigner$.proxy(this.updateColumnCustomizeInfo,this));this.dashboardDesigner.element.on("click",".e-dbrd-grid-header-align",this.bbdesigner$.proxy(this.onHeaderAlignClick,this));this.dashboardDesigner.element.on("click",".e-dbrd-grid-content-align",this.bbdesigner$.proxy(this.onContentAlignClick,this))},n.prototype.unWireEvents=function(){this.dashboardDesigner.element.off("click","#"+this.id+"_grid_column_customize_settings_cancel",this.bbdesigner$.proxy(this.closeColumnCustomizeSettingsDialog,this));this.dashboardDesigner.element.off("click","#"+this.id+"_grid_column_customize_settings_ok",this.bbdesigner$.proxy(this.updateColumnCustomizeInfo,this));this.dashboardDesigner.element.off("click",".e-dbrd-grid-header-align",this.bbdesigner$.proxy(this.onHeaderAlignClick,this));this.dashboardDesigner.element.off("click",".e-dbrd-grid-content-align",this.bbdesigner$.proxy(this.onContentAlignClick,this))},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.GridColumnCustomize",InternalGridColumnCustomize,window);__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalGridReportItem=function(n){function t(t){var i=n.call(this,t,"Grid","e-grid-item")||this;return i.formatDiv=null,i.filterDiv=null,i.editDiv=null,i.deleteDiv=null,i.colorSettingsUIControlContainer=null,i.gridPoPCustomizeDialog=null,i.individualContainer=null,i.individualScrollElement=null,i.gridHeaderElement=null,i.selectedColumnIndex=0,i.selectedKpiColumnIndex=0,i.divHeadElement=null,i.gridPoPInfo=[],i.defaultData=!1,i.hasMoreRecords=!1,i.columnBinding=[],i.filterSearchOlderText="",i.filterSearchOlderColumn="",i.dataValues=null,i.settingsContainer=null,i.footerTag=null,i.colorFields=[],i.selectedTableColorWidget=null,i.rowHeightTimer=null,i.headerHeightTimer=null,i.updatedataintiated=!1,i.isThemingInProcess=!1,i.locale=null,i.gridBarCustomizeDialog=null,i.barCustomization=null,i.defaultColumnWidthValue=100,i.pagerTemplate="",i.summaryTotalValues=[],i.summaryContainer=null,i.totalRecordsCount=0,i.isPagingInteraction=!1,i.isBoldCustomizationApplied=!1,i.isActAsSlaveForAnyPoP=!1,i.popColorPalette=["#CCFAFF","#C0F2DC"],i.widgetJson=new GridProperties(t),i.designer=t,i.bbdesigner$=i.designer.bbdesigner$,i.locale=i.designer.getLocalizationContent(),i.colorFields=i.getColorFields(),i.designerId=i.designerInstance._id,i.propertyPanel=t.modules.propertyPanel,i.IsPoPSupportedWidget=!0,i.IsSupportHierarchyField=!0,i.kpiRowdataBoundEvent=i.bbdesigner$.proxy(i.kpiRowDataBoundProcess,i),i.gridColumns=[],n.prototype.initializeVirtualScrollSettings.call(i,i.getGridProperties().PageSize,1),i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.relation,GroupId:"c55f5601-8e79-4a16-94d6-ddd4cc051306",Items:[{id:"582842ad-45e0-400e-8ab8-3aa5fba71925",widgetName:"Grid",widgetDisplayName:n.itemPanel.widgetTitle.grid,cssClass:"bbi-widgeticon bbi-designer-widget-grid",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.GridItem",searchCategory:["grid","relationship"],widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.grid,description:n.itemPanel.widgetDescription.gridDesc,dataRequirement:n.itemPanel.widgetDataRequirements.gridDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.GridProperties"}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){return this.createGridContainer(t)},t.prototype.applyWidgetTheme=function(n){this.updateTitleSubtitleTheme();BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)?(this.isThemingInProcess=!0,this.refresh(),this.applyFilterBarTheme(n),this.tableElement.css("background",this.designerInstance.modules.themeHelper.getWidgetTileBackground(null)),this.applyGridHeaderTheme()):BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this)},t.prototype.applyGridHeaderTheme=function(){var n=this.getGridProperties().NewHeaderSettings.Background.IsEdited?null:this.designerInstance.modules.themeHelper.getGridHeaderBackground(),t=this.getGridProperties().NewHeaderSettings.Foreground.IsEdited?null:this.designerInstance.modules.themeHelper.getGridHeaderTextColor();this.UpdateHeaderBackground(n);this.UpdateHeaderForeground(t)},t.prototype.applyFilterBarTheme=function(n){var t=this.designerInstance.modules.themeHelper.getGridFilterBarBorderColor(),i=this.designerInstance.modules.themeHelper.getGridFilterBarFont(),r,u;this.getGridProperties().AllowFilter&&(r=this.designerInstance.modules.themeHelper.getGridFilterBarBackground(),u=this.designerInstance.modules.themeHelper.getGridFilterTextColor(),this.gridItem.find(".e-filterbarcell").css({background:r,color:u,"border-color":t}),this.gridItem.find(".e-filterbarcell input").css({background:r,color:u,"border-color":t,"font-size":i.size,"font-weight":i.weight,"font-family":i.family}),this.gridItem.find(".e-gridheader").css({"border-color":t}));this.gridItem.css({"border-color":t});n&&this.gridItem.find(".e-grid").addClass("e-darktheme");this.gridItem.find(".e-grid").addClass("e-grid-dbrd-theme");this.designerInstance.modules.themeHelper.applyGridTheme(n,this.designerInstance._id+"_gridStyle")},t.prototype.updatePoPSettings=function(n,t){if(this.isActAsSlaveForAnyPoP=n,!BoldBIDashboard.isNullOrUndefined(this.dataValues)){this.getGridProperties().PoPSlaveSettings.PoPColumnSettings=n?this.getGridPoPColumn(this):[];this.updateGridColumns();var i=this.tableElement.data("BoldBIDashboardGrid");t||BoldBIDashboard.isNullOrUndefined(i)||i.option("dataSource",this.getGridDataObject())}this.updateInfoIcon()},t.prototype.updateInfoIcon=function(){this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.isActAsSlaveForAnyPoP&&this.isNecessaryDataConfigured()?BoldBIDashboard.Dashboard.WidgetHelper.showInfoIcon(this.locale.popNotification.slaveWidgetNoVirtualColumText,this):BoldBIDashboard.Dashboard.WidgetHelper.hideInfoIcon(this)},t.prototype.updatePoPSlaveInfo=function(){var t,n,u,i,f,r;if(!BoldBIDashboard.isNullOrUndefined(this.masterFilterWindowInstance)&&!BoldBIDashboard.isNullOrUndefined(this.masterFilterWindowInstance.filterObject)&&!BoldBIDashboard.isNullOrUndefined(this.masterFilterWindowInstance.filterObject.filterConfigurationModel)&&!BoldBIDashboard.isNullOrUndefined(this.masterFilterWindowInstance.filterObject.filterConfigurationModel.MastersCollection)){for(t=this.masterFilterWindowInstance.filterObject.filterConfigurationModel.MastersCollection,n=0;n<t.length;n++)if(t[n].MasterInfo.IsPoP)for(u=t[n].ProfileManager,i=0;i<u.length;i++)for(f=u[i].WidgetInfo,r=0;r<f.length;r++)if(f[r].ID===this.widgetJson.UniqueName){this.isActAsSlaveForAnyPoP=!0;break}this.updateInfoIcon()}},t.prototype.updatePoPValue=function(n){for(var e,o,r,s,i,f,u,t=0;t<n.length;t++)if(e=Object.keys(n[t]),!BoldBIDashboard.isNullOrUndefined(this.getGridProperties().PoPSlaveSettings.PoPColumnSettings)&&this.getGridProperties().PoPSlaveSettings.PoPColumnSettings.length>0&&!this.designerInstance.isDesignMode())for(o=function(i){var s=r.getColumnContainer().FieldInfos[i],o;if(s.FieldActualType==="bbi-designer-dataset-number"){var f=e.filter(function(n){return n===s.UniqueColumnName}),h=r.getGridProperties().PoPSlaveSettings.PoPColumnSettings.filter(function(n){return n.UniqueColumnName===f[0]})[0].PopType,u=e.filter(function(n){return n===f+"_secondary"});if(u){o=n[t][f[0]]===0||n[t][u[0]]===0;switch(h){case"Absolute Difference":n[t][u[0]]=n[t][f[0]]-n[t][u[0]];break;case"Percent of Difference":o?(n[t][u[0]]=r.getZeroValue(n[t][f[0]],n[t][u[0]]),n[t][u[0]]=parseFloat(n[t][u[0]]).toFixed(2)+"%"):(n[t][u[0]]=(n[t][f[0]]-n[t][u[0]])/((n[t][f[0]]+n[t][u[0]])/2)*100,n[t][u[0]]=parseFloat(n[t][u[0]]).toFixed(2)+"%");break;case"Percent of Change":o?(n[t][u[0]]=r.getZeroValue(n[t][f[0]],n[t][u[0]]),n[t][u[0]]=parseFloat(n[t][u[0]]).toFixed(2)+"%"):(n[t][u[0]]=(n[t][f[0]]-n[t][u[0]])/n[t][u[0]]*100,n[t][u[0]]=parseFloat(n[t][u[0]]).toFixed(2)+"%");break;case"Percent of Target":o?(n[t][u[0]]=r.getZeroValue(n[t][f[0]],n[t][u[0]]),n[t][u[0]]=parseFloat(n[t][u[0]]).toFixed(2)+"%"):(n[t][u[0]]=n[t][f[0]]/n[t][u[0]]*100,n[t][u[0]]=parseFloat(n[t][u[0]]).toFixed(2)+"%");break;case"Secondary Value":n[t][u[0]]=n[t][u[0]];break;default:n[t][u[0]]=n[t][f[0]]}}}},r=this,i=0;i<this.getColumnContainer().FieldInfos.length;i++)o(i);for(s=JSON.parse(this.dataValues.columnBindings),i=0;i<Object.keys(s).length;i++)for(f=0;f<this.DataGroupInfo.FieldContainers[0].FieldInfos.length;f++)u=this.DataGroupInfo.FieldContainers[0].FieldInfos[f],u.FieldActualType==="bbi-designer-dataset-number"&&BoldBIDashboard.isNullOrUndefined(this.DataColumnBindings[u.UniqueColumnName+"_secondary"])&&(this.DataColumnBindings[u.UniqueColumnName+"_secondary"]=u.DisplayName)},t.prototype.getZeroValue=function(n,t){return n===0&&t===0?0:n===0&&t>0?-100:n>0&&t===0||n===0&&t<0?100:n<0&&t===0?-100:void 0},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej1.grid.all.min.js",NameSpace:"BoldBIDashboard.Grid"},DependentScripts:[]}},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,"BoldBIDashboard.Grid")},t.prototype.getWidgetImage=function(){return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 61.2 (89653) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Grid-" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="Group" transform="translate(12.000000, 12.000000)">            <g id="Grid-Copy" transform="translate(0.000000, 14.557342)" stroke="var(--widget-notconfigured-image-background1)" stroke-width="9">                <path d="M5.46222087,4.5 L5.46222087,151.004992 C5.46222087,158.460836 11.5063767,164.504992 18.9622209,164.504992 L281.965543,164.504992 C289.421387,164.504992 295.465543,158.460836 295.465543,151.004992 L295.465543,4.5 L5.46222087,4.5 Z" id="Rectangle"><\/path>            <\/g>            <line x1="151.491705" y1="-54.001894" x2="151.491705" y2="227.120831" id="v-copy" stroke="var(--widget-notconfigured-image-background1)" stroke-width="7.91397849" stroke-linecap="square" transform="translate(151.491705, 86.559468) rotate(90.000000) translate(-151.491705, -86.559468) "><\/line>            <line x1="150.255598" y1="-5.76381602" x2="150.255598" y2="275.358909" id="v-copy-copy" stroke="var(--widget-notconfigured-image-background1)" stroke-width="7.91397849" stroke-linecap="square" transform="translate(150.255598, 134.797546) rotate(90.000000) translate(-150.255598, -134.797546) "><\/line>            <line x1="95.8061674" y1="38.2694589" x2="95.8061674" y2="177.479356" id="v" stroke="var(--widget-notconfigured-image-background1)" stroke-width="7.91397849" stroke-linecap="square"><\/line>            <line x1="201.330982" y1="38.3028053" x2="201.330982" y2="177.512702" id="Line-Copy-Copy-2" stroke="var(--widget-notconfigured-image-background1)" stroke-width="7.91397849" stroke-linecap="square"><\/line>            <path d="M10.9966777,0.556928193 L290,0.556928193 C295.522847,0.556928193 300,5.0340807 300,10.5569282 L300,38.3515228 L300,38.3515228 L0.996677741,38.3515228 L0.996677741,10.5569282 C0.996677741,5.0340807 5.47383024,0.556928193 10.9966777,0.556928193 Z" id="Rectangle" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero"><\/path>        <\/g>    <\/g><\/svg>'},t.prototype.updateSize=function(t){var i=!BoldBIDashboard.isNullOrUndefined(t)&&this.isUpdateCellPosition(t);n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.tableElement)||this.updateGridWidgetSize(i)},t.prototype.update=function(t){this.gridItem.css("overflow","hidden");this.updateTitleSubtitleTheme();n.prototype.update.call(this,t);this.updatedataintiated=!0;(this.widgetJson.FilterSettings.ActAsMasterWidget||this.widgetJson.UrlLink.EnableLink||this.widgetJson.ContainerSettings.ViewData)&&this.tableElement.addClass("e-dbrd-master-widget");this.IsRendered=!1;this.updateGridReportData(t)},t.prototype.updateTitleSubtitleTheme=function(){var n=this.designerInstance.modules.themeHelper.getGridHeaderTitle(),t=this.designerInstance.modules.themeHelper.getGridHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getGridProperties().ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.getFieldContainer=function(){var t=[],i;return t.push(this.generateFieldContainer("Column",FieldContainerType.None,Visibility.Show,2,!0,this.locale.dataconfiguration.filedContainer.columnName,!0,!0)),t.push(this.generateFieldContainer("HiddenColumn",FieldContainerType.None,Visibility.Show,1,!1,this.locale.dataconfiguration.filedContainer.hiddenColumnName,!0,!0)),t.push(this.generateFieldContainer("KPIColumn",FieldContainerType.None,Visibility.hidden,0,!1,this.locale.dataconfiguration.filedContainer.kpiColumnName,!0,!0)),i=n.prototype.getFilterColumn.call(this),i.HasCustomDate=!0,i.isCustomHierarchy=!0,t.push(i),t},t.prototype.onFieldSettingsClick=function(n,t){for(var r,i=0;i<t.length;i++)r=t[i].Name,r===SummaryType.NONE&&(t[i].IsVisible=!0),n.ContainerName==="HiddenColumn"&&r==="MeasureFormat"&&(t[i].IsVisible=!1);return t},t.prototype.getPropertyPanelItems=function(){return this.getGridPropertyPanel()},t.prototype.updatePropertyChange=function(t,i,r,u){n.prototype.updatePropertyChange.call(this,t,i,r,u);this.updateGridItemPropertyChange(t,i,r,u)},t.prototype.updateInitialSelection=function(){this.updateGridInitialSelection()},t.prototype.clearFilter=function(n){BoldBIDashboard.isNullOrUndefined(this.tableElement.data("BoldBIDashboardGrid"))||(BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this),this.widgetJson.SelectedFilterValues=[],this.isCurrentMaster=!1,this.designerInstance.modules.serialization.notifyChange(),BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this),this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName),this.tableElement.BoldBIDashboardGrid("clearSelection"))},t.prototype.getMobileViewHeight=function(){return 3*this.designerInstance.designerPanel.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.refresh=function(){this.refreshGrid()},t.prototype.dispose=function(){this.gridItemDispose();n.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.locale.itemPanel.widgetDataRequiredMessage.gridDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.getWidgetSpecificInfoForExport=function(){var r=[],u=[],e=[],t=this.tableElement.data("BoldBIDashboardGrid"),f,n,i;if(!BoldBIDashboard.isNullOrUndefined(t)){for(f=this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(this.DataGroupInfo),n=0;n<t.model.filterSettings.filteredColumns.length;n++)i={e:t.model.filterSettings.filteredColumns[n]},u=this.bbdesigner$.merge(u,this.applyFilteringInfo(i,f,!0));for(n=0;n<t.model.sortSettings.sortedColumns.length;n++)i={e:t.model.sortSettings.sortedColumns[n]},r=this.bbdesigner$.merge(r,this.applyCustomSortingForExport(i,f));e={filterInfo:u,sortInfo:r}}return e},t.prototype.getWidgetInfo=function(t,i){var r=n.prototype.getWidgetInfo.call(this,t,i);return r.ColorCustomizations=this.getAppliedGradientColors(),r.VirtualScrollSettings=this.updateVirtualScrollSettings(r),r.IsTotalRecordsCountRequired=this.getGridProperties().AllowPaging&&!this.isPagingInteraction,r.RawData=this.getGridProperties().RawData,r.PoPSlaveSettings=this.isActAsSlaveForAnyPoP?this.getGridProperties().PoPSlaveSettings.PoPColumnSettings:[],this.updatePoPSlaveInfo(),r.SummaryRowSettings=this.getGridProperties().SummaryRowSettings,r},t.prototype.onFieldDragDrop=function(){return!0},t.prototype.updateDataGroupInfo=function(t,i){n.prototype.updateDataGroupInfo.call(this,t,i);var r=this.updateColorCustomizationCollection(this);this.getGridProperties().ColorCustomizations=!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0?r:[];this.getGridProperties().ColumnAlignments=this.getColumnCustomizeObject(this);this.getGridProperties().SummaryRowSettings=this.updateSummaryRowCollection()},t.prototype.getDefaultMeasureFormat=function(){var n=new MeasureFormatting;return n.Unit=NumberFormat.Ones,n},t.prototype.createGridContainer=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(this.updateGridDataForOlderDrafts(t.Data),BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));this.selectedColumnIndex=0;this.renderGridElement();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Grid)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.updateDisplayTextBasedProperties=function(){this.columnBinding=this.DataColumnBindings;this.updateKpiColumn();this.updateGridColumns();this.updateKPIColumnsGrid();this.refresh()},t.prototype.updateGridFontSize=function(){var t=this.designerInstance.modules.themeHelper.getGridHeaderFont(),n=this.designerInstance.modules.themeHelper.getGridContentFont(),i=this.getFontSizeBasedOnResolution();!BoldBIDashboard.isNullOrUndefined(this.gridItem)&&this.gridItem.length>0&&(this.doRowDataBoundProcessRequired()||this.gridItem.find(".e-rowcell").css({background:this.getGridProperties().GridValueSection.Background.IsEdited?this.getGridProperties().GridValueSection.Background.Color:this.designerInstance.modules.themeHelper.getWidgetTileBackground(null)}),this.gridItem.find(".e-headercelldiv").css({"font-size":this.getGridProperties().IsAutoHeaderFontSize?t.size:this.getGridProperties().HeaderFontSize+"px","font-family":t.family,"font-weight":t.weight}),this.gridItem.find(".e-rowcell").css({"font-size":this.getGridProperties().IsAutoRowFontSize?n.size:this.getGridProperties().RowFontSize+"px","font-family":n.family}),this.gridItem.find(".e-rowcell .e-progressbar").css({"font-size":this.getGridProperties().IsAutoRowFontSize?n.size!==""?n.size:i:this.getGridProperties().RowFontSize,"font-family":n.family,"font-weight":n.weight}),this.isBoldCustomizationApplied||this.gridItem.find(".e-rowcell").css({"font-weight":n.weight}),this.gridItem.find(".e-grid-delta-background")&&this.gridItem.find(".e-grid-delta-background").find(".value").css({"font-size":this.getGridProperties().IsAutoRowFontSize?n.size:this.getGridProperties().RowFontSize,"font-family":n.family,"font-weight":n.weight}),this.gridItem.find(".e-grid-delta")&&this.gridItem.find(".e-grid-delta").find(".value").css({"font-size":this.getGridProperties().IsAutoRowFontSize?n.size:this.getGridProperties().RowFontSize,"font-family":n.family,"font-weight":n.weight}))},t.prototype.updateGridDataForOlderDrafts=function(n){for(var t=0;t<n.Containers.length;t++)if(BoldBIDashboard.isNullOrUndefined(n.Containers[t].QueryOrder)||n.Containers[t].QueryOrder.toString().trim()==="")switch(n.Containers[t].Name){case"Column":n.Containers[t].QueryOrder=2;break;case"HiddenColumn":n.Containers[t].QueryOrder=1;break;default:n.Containers[t].QueryOrder=0}},t.prototype.renderGridElement=function(){this.gridItem=BoldBIDashboard.buildTag("div.e-griditem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder,border:"1px solid","border-color":this.designerInstance.modules.themeHelper.getGridFilterBarBorderColor(),"border-radius":"4px 4px 0px 0px"},{id:this.designerId+"gridItem"+this.widgetJson.UniqueName});this.tableElement=BoldBIDashboard.buildTag("div.bbi-designer-grid-table","",{width:"100%",height:"100%","font-size":this.getFontSizeBasedOnResolution(),"background-color":this.designerInstance.modules.themeHelper.getWidgetTileBackground(null)},{id:this.designerId+"tableElement"+this.widgetJson.UniqueName,cellspacing:"0",cellpadding:"0"});this.pagerTemplate='<script id="'+this.tableElement.attr("id")+'_pagerTemplate" type="text/x-jsrender"><div class="dashboard_grid_pagerAlignment" style="margin-left: 25px;"><input id ="'+this.tableElement.attr("id")+'_currentPage" type="text" class="dashboard_grid_pagerInput dashboard_grid_pagerAlignment"><\/input><\/div><div class="totalPages dashboard_grid_pagerAlignment"><span class="emptyText dashboard_grid_pagerAlignment pager_marginClass"><\/span><span class="pageCount dashboard_grid_pagerAlignment pager_marginClass"><\/span><span  class="rowCount dashboard_grid_pagerAlignment"><\/span><\/div><div class ="pageNavigationContainer" style="padding-top:7px;margin-right:24px;" ><div><div class="e-prev e-icon e-arrowheadleft-2x e-prevpagedisabled e-disable dashboard_grid_pagerAlignment" style="margin-right: 7px;" title="Go to previous page"><\/div><\/div><div><div class="e-nextpage e-icon e-arrowheadright-2x e-default dashboard_grid_pagerAlignment" title="Go to next page"><\/div><\/div><\/div><\/script>';this.gridItem.append(this.tableElement);this.contentContainer.append(this.gridItem);this.controlContainer.data("widgetInstance",this)},t.prototype.renderGridWidget=function(n,t){var i=this;!BoldBIDashboard.isNullOrUndefined(this.tableElement)&&this.tableElement.length>0&&this.tableElement.BoldBIDashboardGrid({dataSource:n,allowKeyboardNavigation:!1,allowSorting:this.getGridProperties().AllowSorting,gridLines:this.getGridLineType(),scrollSettings:{allowVirtualScrolling:this.hasMoreRecords&&!this.getGridProperties().AllowPaging,virtualScrollMode:"continuous",enableTouchScroll:!0,autoHide:!0,scrollerSize:10},rowDataBound:this.rowdataBoundEvent,allowFiltering:this.getGridProperties().AllowFilter,allowScrolling:!0,allowSelection:this.widgetJson.FilterSettings.ActAsMasterWidget||this.widgetJson.UrlLink.EnableLink||this.widgetJson.ContainerSettings.ViewData,allowResizing:!0,allowTextWrap:this.getGridProperties().AllowTextWrap,enableAltRow:this.getGridProperties().EnableAlternativeRowColor,enableRowHover:!1,allowPaging:this.getGridProperties().AllowPaging,filterSettings:{filteredColumns:[]},columns:t,pageSettings:this.getGridProperties().AllowPaging?this.getGridProperties().DisableVirtualization?{pageSize:this.VirtualScrollSettings.PageSize,enableTemplates:!0,template:this.pagerTemplate}:{pageSize:this.VirtualScrollSettings.PageSize,enableTemplates:!0,template:this.pagerTemplate,totalRecordsCount:this.totalRecordsCount}:{pageSize:this.VirtualScrollSettings.PageSize},showSummary:this.getGridProperties().SummaryRowSettings.EnableSummaryRow&&this.summaryTotalValues.length>0,summaryRows:this.getSummaryRowColumns(),actionBegin:this.bbdesigner$.proxy(this.actionBegin,this),actionComplete:this.bbdesigner$.proxy(this.actionComplete,this),dataBound:this.bbdesigner$.proxy(this.afterRowDataBound,this),load:function(){i.gridObj=this;i.gridItem.find(".e-grid").on("click",function(n){setTimeout(function(){(i.bbdesigner$(n.target).hasClass("e-rowcell")||i.bbdesigner$(n.target).hasClass("e-linking-hyperlink"))&&i.bbdesigner$(n.currentTarget).attr("id").indexOf(i.Name)>-1&&(i.bbdesigner$(n.target).hasClass("e-linking-hyperlink")?(n.currentTarget.data=i.gridObj.model.selectedRecords[0],i.gridRowSelected(n)):(n.currentTarget.data=i.gridObj.model.selectedRecords[0],i.gridRowSelected(n)))},800)})}})},t.prototype.updateGridWidgetSize=function(n){BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this)?this.widgetContainerHelper.showControlError(this,this.dataValues):this.updateGridSize(n)},t.prototype.addOrRemoveContentBottomBorder=function(){var n=".e-table tr:last-child .e-rowcell";this.getGridProperties().HorizontalGridLine?this.controlContainer.find(n).addClass("e-bottom-border"):this.controlContainer.find(n).removeClass("e-bottom-border")},t.prototype.afterRowDataBound=function(){var n=this.tableElement.data("BoldBIDashboardGrid");this.updateAllowResizeToFit(this.getGridProperties().FitContent,!1);this.updateHeaderPadding(this.getGridProperties().HeaderPadding,!1);this.updateContentPadding(this.getGridProperties().ContentPadding,!1);this.updateGridRowHeightToDefault(!1);!BoldBIDashboard.isNullOrUndefined(this.getGridProperties().SummaryRowSettings)&&this.getGridProperties().SummaryRowSettings.EnableSummaryRow&&this.summaryTotalValues.length>0&&n._scrollFooterColgroup();this.updateGridSize();this.addOrRemoveContentBottomBorder();BoldBIDashboard.isNullOrUndefined(n.getContent().data("BoldBIDashboardScroller"))||n.getScrollObject().refresh()},t.prototype.doRowDataBoundProcessRequired=function(){return!BoldBIDashboard.isNullOrUndefined(this.getGridProperties().ColorCustomizations)&&this.getGridProperties().ColorCustomizations.length>0?!0:this.getKPIColumnContainer().FieldInfos.length>0?!0:this.getColumnContainer().FieldInfos.length>0&&this.getColumnContainer().FieldInfos.some(function(n){return n.FieldType===FieldType.Measures})?!0:this.designerInstance.canApplyTheme()||!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.dashboardThemeSettings)?!0:this.getGridProperties().EnableAlternativeRowColor||this.getGridProperties().GridValueSection.Foreground.IsEdited||this.getGridProperties().GridValueSection.Background.IsEdited?!0:!1},t.prototype.updateGridReportData=function(n){var t,r,i;this.dataValues=n;!BoldBIDashboard.isNullOrUndefined(n.SummaryTotal)&&n.SummaryTotal.length>0&&(this.summaryTotalValues=JSON.parse(n.SummaryTotal));this.hasMoreRecords=n.hasMoreRecords;BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this);this.gridItem.show();BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this);t=this.tableElement.data("BoldBIDashboardGrid");BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error?BoldBIDashboard.isNullOrUndefined(n.Message)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.widgetContainerHelper.showControlError(this,n)):n.noDataAvailable?(this.gridItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this),this.IsRendered=!0):(this.gridItem.show(),!BoldBIDashboard.isNullOrUndefined(n)&&n.data!=="[]"&&!(typeof n=="string"&&n.indexOf("Sf_Exception")!==-1)&&this.DataGroupInfo.FieldContainers.length>0&&(this.getColumnContainer().FieldInfos.length>0||this.getKPIColumnContainer().FieldInfos.length>0)?(this.currentData=JSON.parse(n.data),this.updatePoPSlaveInfo(),this.isActAsSlaveForAnyPoP&&(this.getGridProperties().PoPSlaveSettings.PoPColumnSettings=this.getGridPoPColumn(this),this.updatePoPValue(this.currentData)),r=this.getGridDataObject(),this.defaultData=!1,this.columnBinding=this.DataColumnBindings,this.designerInstance.isDesignMode()&&(this.validateKPIDataValueSet(this.columnBinding),this.updateKpiColumn(),this.setPropertyElement("KPIColumns","ColumnSettings",this.getKPIDataValueSet())),this.doRowDataBoundProcessRequired()?(this.isBoldCustomizationApplied=!1,this.rowdataBoundEvent=this.bbdesigner$.proxy(this.rowDataBoundProcess,this)):this.rowdataBoundEvent=null,this.getGridProperties().AllowPaging&&(this.totalRecordsCount=this.dataValues.totalRecordsCount),BoldBIDashboard.isNullOrUndefined(t)?(this.generateColumns(this.columnBinding),this.renderGridWidget(r,this.gridColumns),t=this.tableElement.data("BoldBIDashboardGrid"),this.updateHeaderVisibility(this.getGridProperties().ShowHeader)):(this.tableElement.data("BoldBIDashboardGrid").model.rowDataBound=this.rowdataBoundEvent,this.updateGridColumns(),this.updateAllowResizeToFit(this.getGridProperties().FitContent,!1),this.UpdateColumnUrl(),this.hasMoreRecords&&BoldBIDashboard.isNullOrUndefined(t.virtualLoadedPages)&&(t.virtualLoadedPages=[]),t.model.pageSettings.pageSize=this.VirtualScrollSettings.PageSize,t.model.showSummary=this.getGridProperties().SummaryRowSettings.EnableSummaryRow&&this.summaryTotalValues.length>0,t.model.summaryRows=this.getSummaryRowColumns(),t.model.allowPaging=this.getGridProperties().AllowPaging,t.option("allowFiltering",this.getGridProperties().AllowFilter),t.option("allowSorting",this.getGridProperties().AllowSorting),t.option("enableAltRow",this.getGridProperties().EnableAlternativeRowColor),t.option("scrollSettings.allowVirtualScrolling",this.hasMoreRecords&&!this.getGridProperties().AllowPaging),t.option("dataSource",r),this.updateHeaderVisibility(this.getGridProperties().ShowHeader),this.updateGridSize(),BoldBIDashboard.isNullOrUndefined(t.getContent().data("BoldBIDashboardScroller"))||t.getScrollObject().refresh()),this.updateGridFontSize(),this.updateBorderVisibility(this.getGridProperties().ShowBorder),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.controlContainer.attr({"data-prevent-loading-indicator":!0})):(n.data==="[]"&&BoldBIDashboard.DashboardUtil.IsColumnBindingsEmpty(this.DataColumnBindings)||!BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty)&&BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this));this.designerInstance.isDesignMode()&&(i=!BoldBIDashboard.isNullOrUndefined(this.getColumnContainer())&&this.getColumnContainer().FieldInfos.length>0,this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo),this.propertyPanel.updateCategoryVisibility("Grid","ColumnSettings",i),this.propertyPanel.updateItemVisibility("Grid","ColumnSettings","ColumnCustomize",i),this.propertyPanel.updateItemVisibility("Grid","ColumnSettings","KPIColumns",this.getKPIVisibility()),this.setPropertyElement("ColorSettings","Formatting",this.getBindedColumnInfo(this)),this.updateColorSettingsItemProperty(i&&this.getBindedColumnInfo(this).length>0,null),this.designerInstance.modules.util.updateAction("Grid","Link","Link"))},t.prototype.updateGridColumns=function(){var n=this.tableElement.data("BoldBIDashboardGrid");this.generateColumns(this.columnBinding);BoldBIDashboard.isNullOrUndefined(n)||(n.model.columns=this.gridColumns)},t.prototype.updateColorSettingsItemProperty=function(n,t){var i,r;if(n&&(i=this.widgetHelper.getCurrentWidgetInstance(),!BoldBIDashboard.isNullOrUndefined(i)&&i.Type===ControlType.Grid)){i.selectedTableColorWidget=this.getSelectedColorInfo(i.getGridProperties().ColorCustomizations,this.getColorFieldListName());BoldBIDashboard.isNullOrUndefined(t)&&(r=this.colorSettingsUIControlContainer.find("#"+i.designerId+"_column_list").data("BoldBIDashboardListBox"),t=!BoldBIDashboard.isNullOrUndefined(r)&&!BoldBIDashboard.isNullOrUndefined(r.model.dataSource)&&r.model.dataSource.length>0?r.model.dataSource[r.model.selectedIndex].UniqueColumnName:"");var u=this.isMeasureColumn(t),f=this.isColorExist(i.selectedTableColorWidget,i),e=!BoldBIDashboard.isNullOrUndefined(i.selectedTableColorWidget.ColorCustomization)&&!BoldBIDashboard.isNullOrUndefined(i.selectedTableColorWidget.ColorCustomization.GradientSettings)&&!BoldBIDashboard.isNullOrUndefined(i.selectedTableColorWidget.ColorCustomization.RuleRangeSettings);this.updateAdvanceConditionOption(!i.selectedTableColorWidget.EnableAsBar&&f&&!e);u&&(this.updateBarButtonVisibility(i.selectedTableColorWidget.EnableAsBar),this.colorSettingsUIControlContainer.find("#"+this.designerId+"_color_settings_category_radio_bar_rdo_input").prop("checked",this.selectedTableColorWidget.EnableAsBar));this.colorSettingsUIControlContainer.find("#"+this.designerId+"_color_settings_category_radio_value_rdo_input").prop("checked",(e||!f)&&!i.selectedTableColorWidget.EnableAsBar);this.colorSettingsUIControlContainer.find("#"+this.designerId+"_color_settings_category_radio_bar_rdo_input").parents(".e-color-settings-category-radio").css("display",u?"block":"none")}},t.prototype.isMeasureColumn=function(n){var t,r=this.widgetHelper.getCurrentWidgetInstance(),i,u;return BoldBIDashboard.isNullOrUndefined(r)?!1:(i=r.tableElement.data("BoldBIDashboardGrid"),BoldBIDashboard.isNullOrUndefined(i)||(u=i.model.columns,t=u.filter(function(t){return t.field===n})),!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0&&t[0].IsMeasure)},t.prototype.generateFieldContainer=function(n,t,i,r,u,f,e,o){e===void 0&&(e=!1);o===void 0&&(o=!1);var s=new BoldBIDashboard.Dashboard.FieldContainerForUI;return s.Name=n,s.ContainerType=t,s.Visibility=i,s.QueryOrder=r,s.Required=u,s.isCustomHierarchy=e,s.HasCustomDate=o,BoldBIDashboard.isNullOrUndefined(f)||(s.DisplayName=f),s},t.prototype.getBindedColumnInfo=function(n){var t=!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.DataGroupInfo)&&!BoldBIDashboard.isNullOrUndefined(n.DataGroupInfo.FieldContainers)&&n.DataGroupInfo.FieldContainers.length>0?n.DataGroupInfo.FieldContainers[0]:null,r=[],i;if(!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.isNullOrUndefined(t.FieldInfos)&&t.FieldInfos.length>0)for(i=0;i<t.FieldInfos.length;i++)r.push(t.FieldInfos[i]);return r},t.prototype.getGridPropertyPanel=function(){var t=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.widgetJson.FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo,this.widgetJson.ContainerSettings),i=this.getGridProperties().AllowTextWrap;return this.containerPropertyItem=t.containerProperties,t.propertyGridItems.Header=this.widgetJson.ContainerSettings.Title,t.propertyGridItems.SubTitle=this.widgetJson.ContainerSettings.SubTitle,t.propertyGridItems.Description=this.widgetJson.ContainerSettings.Description,t.propertyGridItems.Type="Grid",t.linkingProperty.Items[0].enableMode=LinkEnableMode.Both,t.linkingProperty.Items[0].value=n.prototype.useExistingLink.call(this),t.filterSettingsProperty.Items.unshift({name:"AllowFiltering",displayName:this.locale.propertyPanel.filter.allowFiltering,value:this.getGridProperties().AllowFilter,itemType:"bool"}),t.propertyGridItems.Items=[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"ShowTooltip",displayName:this.locale.propertyPanel.basicSettings.showTooltip,value:this.getGridProperties().ShowTooltip,itemType:"bool"},{name:"AllowSorting",displayName:this.locale.propertyPanel.basicSettings.allowSortingText,value:this.getGridProperties().AllowSorting,itemType:"bool"},{name:"AllowResizeToFit",displayName:this.locale.propertyPanel.basicSettings.allowResizeToFit,value:this.getGridProperties().FitContent,itemType:"bool"},{name:"AllowTextWrap",displayName:this.locale.propertyPanel.basicSettings.allowTextWrap,value:this.getGridProperties().AllowTextWrap,itemType:"bool"},{name:"HorizontalGridLine",displayName:this.locale.propertyPanel.basicSettings.horizontalGridLine,value:this.getGridProperties().HorizontalGridLine,itemType:"bool"},{name:"VerticalGridLine",displayName:this.locale.propertyPanel.basicSettings.verticalGridLine,value:this.getGridProperties().VerticalGridLine,itemType:"bool"},{name:"BorderVisibility",displayName:this.locale.propertyPanel.basicSettings.border,value:this.getGridProperties().ShowBorder,itemType:"bool"},{name:"AlternativeRowColor",displayName:this.locale.propertyPanel.basicSettings.enableAlternativeRow,value:this.getGridProperties().EnableAlternativeRowColor,itemType:"bool"},{name:"RawData",displayName:this.locale.propertyPanel.basicSettings.rawData,value:this.getGridProperties().RawData,itemType:"bool"}]},{CategoryName:"Summary Row",DisplayName:this.locale.propertyPanel.summaryRowSettings.summaryRowTitle,Items:[{name:"EnableSummaryRow",displayName:this.locale.propertyPanel.summaryRowSettings.enableSummaryRow,value:this.getGridProperties().SummaryRowSettings.EnableSummaryRow,itemType:"bool"},{name:"SummaryRowBackground",displayName:this.locale.propertyPanel.formatting.headerBackground,isVisible:!0,isDisable:!this.getGridProperties().SummaryRowSettings.EnableSummaryRow,value:this.getGridProperties().SummaryRowSettings.BackgroundColor.Color,itemType:"color"},{name:"EnableSummaryRowHeight",displayName:this.locale.propertyPanel.summaryRowSettings.enableSummaryHeight,isDisable:!this.getGridProperties().SummaryRowSettings.EnableSummaryRow,value:this.getGridProperties().SummaryRowSettings.IsAutoHeight,itemType:"bool"},{name:"SummaryRowHeight",isDisable:this.getGridProperties().SummaryRowSettings.EnableSummaryRow?this.getGridProperties().SummaryRowSettings.IsAutoHeight:!0,displayName:this.locale.propertyPanel.summaryRowSettings.summaryheight,value:this.getGridProperties().SummaryRowSettings.Height,itemType:"float",decimalPlaces:0,minimum:10,maximum:Number.MAX_VALUE,unitType:"pt"},{name:"EnableSummaryRowPadding",displayName:this.locale.propertyPanel.summaryRowSettings.enableSummaryPadding,value:this.getGridProperties().SummaryRowSettings.IsAutoPadding,isDisable:!this.getGridProperties().SummaryRowSettings.EnableSummaryRow,itemType:"bool"},{name:"SummaryRowPadding",isDisable:this.getGridProperties().SummaryRowSettings.EnableSummaryRow?this.getGridProperties().SummaryRowSettings.IsAutoPadding:!0,displayName:this.locale.propertyPanel.summaryRowSettings.summaryPadding,value:this.getGridProperties().SummaryRowSettings.Padding,itemType:"float",decimalPlaces:0,minimum:0,maximum:Number.MAX_VALUE,unitType:"pt"},{name:"EnableSummaryRowFontSize",displayName:this.locale.propertyPanel.summaryRowSettings.enableSummaryFontSize,value:this.getGridProperties().SummaryRowSettings.IsAutoFontSize,isDisable:!this.getGridProperties().SummaryRowSettings.EnableSummaryRow,itemType:"bool"},{name:"SummaryRowFontSize",isDisable:this.getGridProperties().SummaryRowSettings.EnableSummaryRow?this.getGridProperties().SummaryRowSettings.IsAutoFontSize:!0,displayName:this.locale.propertyPanel.summaryRowSettings.summaryFontSize,value:this.getGridProperties().SummaryRowSettings.FontSize,itemType:"float",decimalPlaces:0,minimum:8,maximum:60,unitType:"pt"},{name:"SummaryCustomizeButton",callbackInstance:this,callbackMethod:"renderSummarySettings",itemType:"object",elementType:this.Type}]},{CategoryName:"Page Settings",DisplayName:this.locale.propertyPanel.pageSettings.pageSettingsText,Items:[{name:"AllowPaging",displayName:this.locale.propertyPanel.pageSettings.allowPagingText,value:this.getGridProperties().AllowPaging,itemType:"bool"},{name:"DisableVirtualization",displayName:this.locale.propertyPanel.pageSettings.disableVirtualization,value:this.getGridProperties().DisableVirtualization,isVisible:this.getGridProperties().AllowPaging,itemType:"bool"},{name:"PageSize",isVisible:!0,displayName:this.locale.propertyPanel.pageSettings.pageSizeText,value:this.getGridProperties().PageSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:Number.MAX_VALUE,unitType:"pt"}]},{CategoryName:"Header Settings",DisplayName:this.locale.propertyPanel.headerSettingsText,Items:[{name:"HeaderVisibility",displayName:this.locale.propertyPanel.basicSettings.showHeader,value:this.getGridProperties().ShowHeader,itemType:"bool"},{name:"HeaderForeground",displayName:this.locale.propertyPanel.formatting.headerForeground,value:this.getGridProperties().NewHeaderSettings.Foreground.Color,itemType:"color"},{name:"HeaderBackground",displayName:this.locale.propertyPanel.formatting.headerBackground,value:this.getGridProperties().NewHeaderSettings.Background.Color,itemType:"color"},{name:"HeaderHeight",isVisible:!0,displayName:this.locale.propertyPanel.basicSettings.rowHeight,value:this.getGridProperties().HeaderHeight,itemType:"float",decimalPlaces:0,minimum:15,maximum:120,unitType:"px",isDisable:i},{name:"AutoHeaderFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,value:this.getGridProperties().IsAutoHeaderFontSize,itemType:"bool"},{name:"HeaderFontSize",isVisible:!this.getGridProperties().IsAutoHeaderFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getGridProperties().HeaderFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"},{name:"HeaderPadding",isVisible:!0,displayName:this.locale.propertyPanel.basicSettings.padding,value:this.getGridProperties().HeaderPadding,itemType:"float",decimalPlaces:0,minimum:1,maximum:20,unitType:"px"}]},{CategoryName:"Content Settings",DisplayName:this.locale.propertyPanel.valueSettingsText,Items:[{name:"ValueForeground",displayName:this.locale.propertyPanel.basicSettings.valueForeground,value:this.getGridProperties().GridValueSection.Foreground.Color,itemType:"color"},{name:"ValueBackground",displayName:this.locale.propertyPanel.basicSettings.valueBackground,value:this.getGridProperties().GridValueSection.Background.Color,itemType:"color"},{name:"AlternativeRowForeground",isVisible:this.getGridProperties().EnableAlternativeRowColor,displayName:this.locale.propertyPanel.basicSettings.alternativeRowForeground,value:this.getGridProperties().AlternativeRow.Foreground.Color,itemType:"color"},{name:"AlternativeRowBackground",isVisible:this.getGridProperties().EnableAlternativeRowColor,displayName:this.locale.propertyPanel.basicSettings.alternativeRowBackground,value:this.getGridProperties().AlternativeRow.Background.Color,itemType:"color"},{name:"RowHeight",isVisible:!0,displayName:this.locale.propertyPanel.basicSettings.rowHeight,value:this.getGridProperties().RowHeight,itemType:"float",decimalPlaces:0,minimum:15,maximum:120,unitType:"px",isDisable:i},{name:"AutoRowFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,value:this.getGridProperties().IsAutoRowFontSize,itemType:"bool"},{name:"RowFontSize",isVisible:!this.getGridProperties().IsAutoRowFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getGridProperties().RowFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"},{name:"ContentPadding",isVisible:!0,displayName:this.locale.propertyPanel.basicSettings.padding,value:this.getGridProperties().ContentPadding,itemType:"float",decimalPlaces:0,minimum:1,maximum:20,unitType:"px"}]},t.filterSettingsProperty,{CategoryName:"PoP Settings",DisplayName:!BoldBIDashboard.isNullOrUndefined(this.locale.propertyPanel.popSettings)&&!BoldBIDashboard.isNullOrUndefined(this.locale.propertyPanel.popSettings.popSettingsText)?this.locale.propertyPanel.popSettings.popSettingsText:"PoP Settings",IsVisible:this.DataGroupInfo.FieldContainers.length>0?this.isActAsSlaveForAnyPoP:!1,Items:[{name:"Customize",displayName:this.locale.propertyPanel.customizeBtnText,isVisible:this.isActAsSlaveForAnyPoP,itemType:"object",callbackInstance:this,callbackMethod:"renderPoPCustomizeButton"},{name:"PrimaryBackground",displayName:!BoldBIDashboard.isNullOrUndefined(this.locale.propertyPanel.popSettings)&&!BoldBIDashboard.isNullOrUndefined(this.locale.propertyPanel.popSettings.primaryBackgroundText)?this.locale.propertyPanel.popSettings.primaryBackgroundText:"Primary Background",isVisible:this.isActAsSlaveForAnyPoP,value:this.getGridProperties().PoPSlaveSettings.PrimaryBackground,itemType:"color"},{name:"SecondaryBackground",displayName:!BoldBIDashboard.isNullOrUndefined(this.locale.propertyPanel.popSettings)&&!BoldBIDashboard.isNullOrUndefined(this.locale.propertyPanel.popSettings.secondaryBackgroundText)?this.locale.propertyPanel.popSettings.secondaryBackgroundText:"Secondary Background",isVisible:this.isActAsSlaveForAnyPoP,value:this.getGridProperties().PoPSlaveSettings.SecondaryBackground,itemType:"color"},]},{CategoryName:"Column Settings",DisplayName:this.locale.propertyPanel.columnSettingsText,IsVisible:this.DataGroupInfo.FieldContainers.length>0?!BoldBIDashboard.isNullOrUndefined(this.getColumnContainer())&&this.getColumnContainer().FieldInfos.length>0:!1,Items:[{name:"ColumnCustomize",displayName:this.locale.propertyPanel.columnSettings.columnCustomize,isVisible:this.DataGroupInfo.FieldContainers.length>0?!BoldBIDashboard.isNullOrUndefined(this.getColumnContainer())&&this.getColumnContainer().FieldInfos.length>0:!1,itemType:"object",callbackInstance:this,callbackMethod:"renderColumnCustomizeButton"},{name:"KPIColumns",isVisible:this.DataGroupInfo.FieldContainers.length>0?this.getKPIVisibility():!1,itemType:"object",callbackInstance:this,callbackMethod:"renderKPIColumns"},]},{CategoryName:"Formatting",DisplayName:this.locale.propertyPanel.formattingText,Items:[{name:"ColorSettings",callbackInstance:this,isVisible:this.DataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getColumnContainer())&&this.getColumnContainer().FieldInfos.length>0,callbackMethod:"renderColorSettings",itemType:"object",elementType:"Grid"},]},t.linkingProperty,t.containerSettingsProperty,t.containerActionsProperty,t.noDataContainerActionsProperty],t.propertyGridItems},t.prototype.updateGridItemPropertyChange=function(n,t,i,r){var h,o=!1,s=this.tableElement.data("BoldBIDashboardGrid"),c=this,u,f,l,e;switch(n){case"Name":this.widgetJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,i);break;case"HorizontalGridLine":this.updateHorizontalGridLine(i);break;case"VerticalGridLine":this.updateVerticalGridLine(i);break;case"ValueForeground":this.updateValueForeground(i);break;case"ValueBackground":this.updateValueBackground(i);break;case"AlternativeRowColor":this.updateAlternativeRowColor(i);break;case"RawData":this.updateRawData(i);break;case"PageSize":this.updatePageSize(i);break;case"HeaderVisibility":this.updateHeaderVisibility(i,!0);break;case"BorderVisibility":this.updateBorderVisibility(i);break;case"AlternativeRowForeground":this.updateAlternativeRowForeground(i);break;case"AlternativeRowBackground":this.updateAlternativeRowBackground(i);break;case"AllowResizeToFit":this.updateAllowResizeToFit(i,!0);break;case"AllowSorting":this.updateAllowSorting(i);break;case"ShowTooltip":this.updateShowTooltip(i);break;case"EnableSummaryRow":this.updateSummaryRow(i);break;case"AllowPaging":this.updateAllowPaging(i);break;case"DisableVirtualization":this.updateVirtualization(i);break;case"AllowFiltering":this.updateAllowFiltering(i);break;case"EnableDataGrouping":this.updateEnableDataGrouping(i);break;case"ItemLink":s.option("allowSelection",this.widgetJson.FilterSettings.ActAsMasterWidget||i.EnableLink);this.UpdateLink(i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,i);break;case"HeaderForeground":this.getGridProperties().NewHeaderSettings.Foreground.Color=i;this.getGridProperties().NewHeaderSettings.Foreground.IsEdited=!0;this.UpdateHeaderForeground();break;case"HeaderBackground":this.getGridProperties().NewHeaderSettings.Background.Color=i;this.getGridProperties().NewHeaderSettings.Background.IsEdited=!0;this.UpdateHeaderBackground();break;case"ActAsMasterWidget":BoldBIDashboard.isNullOrUndefined(s)||s.option("allowSelection",this.widgetJson.UrlLink.EnableLink||i);i&&this.tableElement.addClass("e-dbrd-master-widget");i||this.widgetJson.UrlLink.EnableLink||this.tableElement.removeClass("e-dbrd-master-widget");o=!0;break;case"HeaderHeight":this.getGridProperties().HeaderHeight=i;BoldBIDashboard.isNullOrUndefined(this.headerHeightTimer)||clearTimeout(this.headerHeightTimer);this.headerHeightTimer=setTimeout(function(){c.updateHeaderHeight(i)},500);break;case"RowHeight":this.getGridProperties().RowHeight=i;BoldBIDashboard.isNullOrUndefined(this.rowHeightTimer)||clearTimeout(this.rowHeightTimer);this.rowHeightTimer=setTimeout(function(){c.updateRowHeight(i)},500);break;case"FieldNameChange":this.updateDisplayTextBasedProperties();break;case"AllowTextWrap":this.updateAllowTextWrap(i);break;case"AutoHeaderFontSize":this.updateAutoHeaderFontSize(i);break;case"HeaderFontSize":this.updateHeaderFontSize(i);break;case"AutoRowFontSize":this.updateAutoRowFontSize(i);break;case"RowFontSize":this.updateRowFontSize(i);break;case"HeaderPadding":this.updateHeaderPadding(i);break;case"ContentPadding":this.updateContentPadding(i);break;case"PrimaryBackground":this.updatePrimaryBackground(i);break;case"SecondaryBackground":this.getGridProperties().PoPSlaveSettings.SecondaryBackground=i;break;case"SummaryRowBackground":this.getGridProperties().SummaryRowSettings.BackgroundColor.Color=i;this.getGridProperties().SummaryRowSettings.BackgroundColor.IsEdited=!0;this.UpdateSummaryRowBackground();break;case"EnableSummaryRowHeight":this.getGridProperties().SummaryRowSettings.IsAutoHeight=i;this.disableOrEnableSummaryRowSettings();this.updateSummaryRowHeight(this.getGridProperties().SummaryRowSettings.Height);i&&this.removeSummaryScroller();break;case"EnableSummaryRowPadding":this.getGridProperties().SummaryRowSettings.IsAutoPadding=i;this.disableOrEnableSummaryRowSettings();this.updateSummaryRowPadding(this.getGridProperties().SummaryRowSettings.Padding);break;case"EnableSummaryRowFontSize":this.getGridProperties().SummaryRowSettings.IsAutoFontSize=i;this.disableOrEnableSummaryRowSettings();this.UpdateSummaryRowFontSize(!0);break;case"SummaryRowHeight":this.updateSummaryRowHeight(i);break;case"SummaryRowPadding":this.updateSummaryRowPadding(i);break;case"SummaryRowFontSize":this.getGridProperties().SummaryRowSettings.FontSize=i;this.UpdateSummaryRowFontSize(!0);break;default:o=!0}if(BoldBIDashboard.isNullOrUndefined(h)||(t=h),!o){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(u=this.designPanelInstance.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)l=u[f],l.attr("id")===this.controlContainer.attr("id")&&(e=this.bbdesigner$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"Grid",i));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-grid-item",this.designerId+"_"+this.widgetJson.UniqueName,[n,i,t,r],[n,t,i,r])}},t.prototype.renderColorSettings=function(n,t,i){var r=this.widgetHelper.getCurrentWidgetInstance();if(!BoldBIDashboard.isNullOrUndefined(r)&&r.Type===ControlType.Grid){if(this.categoryId=this.designerId+"_"+t+"_"+i.categoryName,this.colorSettingsUIControlContainer=this.designerInstance.element.find("#"+this.categoryId),this.colorSettingsUIControlContainer.length!==0||BoldBIDashboard.isNullOrUndefined(n))this.colorSettingsUIControlContainer.length>0&&(r.DataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(r.DataGroupInfo.FieldContainers[0])&&r.DataGroupInfo.FieldContainers[0].FieldInfos.length>0?this.colorSettingsUIControlContainer.css("display","block"):this.colorSettingsUIControlContainer.css("display","none"),this.propertyPanel.updateItemVisibility(i.elementType,"Formatting","ColorSettings",i.isVisible));else{this.colorSettingsUIControlContainer=BoldBIDashboard.buildTag("div.e-dashbrd-customcolor-container","",{},{id:this.categoryId});var u=BoldBIDashboard.buildTag("div.e-dashbrd-customcolor-container-wrap","",{},{id:this.categoryId+"_wrap"}),f=BoldBIDashboard.buildTag("div.e-columns-list","",{},{id:this.designerId+"_"+t+"_columnList"}),e=BoldBIDashboard.buildTag("div.e-basic-advance-panel-wrap","",{},{id:this.designerId+"_"+t+"_basicAdvancePanel"}),o=BoldBIDashboard.buildTag("ul.e-color-custom-ul","",{},{id:this.designerId+"_column_list"}),s=this.getAdvance();f.append(o);e.append(s);u.append(f,e);this.colorSettingsUIControlContainer.append(u);n.append(this.colorSettingsUIControlContainer);this.renderColorSettingsElements(r);r.DataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(r.DataGroupInfo.FieldContainers[0])&&r.DataGroupInfo.FieldContainers[0].FieldInfos.length>0?this.colorSettingsUIControlContainer.css("display","block"):this.colorSettingsUIControlContainer.css("display","none")}this.updateFieldList()}},t.prototype.updateFieldList=function(){var t=this.getColorFieldListName(),i=this.colorSettingsUIControlContainer.find("#"+this.designerId+"_column_list"),n=i.data("BoldBIDashboardListBox"),r;t.length<=this.selectedColumnIndex&&(this.selectedColumnIndex=0);BoldBIDashboard.isNullOrUndefined(n)||(r=!BoldBIDashboard.isNullOrUndefined(n.model.selectedIndex)&&n.model.selectedIndex===this.selectedColumnIndex,n.option("dataSource",t),n.option("fields",{id:"UniqueColumnName",text:"DisplayName"}),n.option("selectedIndex",this.selectedColumnIndex),i.BoldBIDashboardListBox("instance")._refreshScroller(),r&&t.length>0&&this.updateColorSettingsItemProperty(!0,t[this.selectedColumnIndex].UniqueColumnName))},t.prototype.getAdvance=function(){var n=BoldBIDashboard.buildTag("div.e-advance-row","",{},{id:this.designerId+"_advanceRow_table"}),t=BoldBIDashboard.buildTag("div.e-advance-option-wrap","",{},{}),i=BoldBIDashboard.buildTag("button.e-advanced-color-settings-button bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.propertyPanel.customizeBtnText,{},{id:this.designerId+"_advance_settings_button",type:"button"});return t.append(i),n.append(this.getRadioButtonElement(!1)).append(this.getRadioBarElement()),n.append(this.getRadioButtonElement()).append(t)},t.prototype.getRadioBarElement=function(){var n=BoldBIDashboard.buildTag("div.e-advance-option-wrap","",{},{}),t=BoldBIDashboard.buildTag("button.e-progress-bar-customize-button bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.propertyPanel.customizeBtnText,{},{id:this.designerId+"_progress_bar_customize_button",type:"button"});return n.append(t),this.getRadioButtonElement(!0).append(n)},t.prototype.renderColorSettingsElements=function(n){var r=this.colorSettingsUIControlContainer.find(".e-color-custom-ul"),t=this.colorSettingsUIControlContainer.find(".e-advanced-color-settings-button"),i=this.colorSettingsUIControlContainer.find(".e-progress-bar-customize-button");r.BoldBIDashboardListBox({datasource:this.getColorFieldListName(),fields:{text:"DisplayName",id:"UniqueColumnName"},width:"200",height:"230",selectedIndex:0,select:this.bbdesigner$.proxy(this.updateIndex,n),cssClass:"bbi-designer-param-assign bbi-designer-border bbi-dbrd-designer-scroller bbi-designer-list-selection bbi-dbrd-control "});t.off("click",this.bbdesigner$.proxy(this.clickAddConditionButton,n));t.on("click",this.bbdesigner$.proxy(this.clickAddConditionButton,n));i.off("click",this.bbdesigner$.proxy(this.openBarCustomizeDialog,n));i.on("click",this.bbdesigner$.proxy(this.openBarCustomizeDialog,n))},t.prototype.getRadioButtonElement=function(n){var i=BoldBIDashboard.buildTag("div.e-color-settings-category-radio","",{},{id:this.designerId+"_color_settings_category_radio"}),r=BoldBIDashboard.buildTag("div.e-color-settings-category-radio-div","",{},{id:this.designerId+"_color_settings_category_radio_div"}),u=BoldBIDashboard.buildTag("div","",{},{}),f=BoldBIDashboard.buildTag("div","",{},{}),e=BoldBIDashboard.buildTag("div","",{},{}),t=BoldBIDashboard.isNullOrUndefined(n)?this.locale.propertyPanel.formatting.colorSettings.advancedSettingText:n?this.locale.propertyPanel.formatting.colorSettings.barlabelText:this.locale.propertyPanel.formatting.colorSettings.valueLabelText,s={callBackInstance:this,callBackMethod:"onValueChooser",cssClass:".e-color-settings-category-radio-value",groupName:"formatting",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.designerId+"_color_settings_category_radio_value",label:t,isChecked:!0}]},h={callBackInstance:this,callBackMethod:"onBarChooser",cssClass:".e-color-settings-category-radio-bar",optionalArgs:!0,groupName:"formatting",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.designerId+"_color_settings_category_radio_bar",label:t}]},c={callBackInstance:this,callBackMethod:"onAdvanceChooser",cssClass:".e-color-settings-category-radio-advance",optionalArgs:!0,groupName:"formatting",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.designerId+"_color_settings_category_radio_advance",label:t}]},o;return this.selectRadioButtonValue=new BoldBIDashboard.Dashboard.RadioButton(s,u),this.selectRadioButtonBar=new BoldBIDashboard.Dashboard.RadioButton(h,f),this.selectRadioButtonAdvance=new BoldBIDashboard.Dashboard.RadioButton(c,e),o=BoldBIDashboard.isNullOrUndefined(n)?e:n?f:u,r.append(o),i.append(r),i},t.prototype.updateIndex=function(n){var t=this.widgetHelper.getCurrentWidgetInstance(),i;BoldBIDashboard.isNullOrUndefined(n)||n.index===-1||(t.selectedColumnIndex=n.index,i=this.getColorFieldListName(),t.selectedTableColorWidget=this.getSelectedColorInfo(t.getGridProperties().ColorCustomizations,i),this.updateColorSettingsItemProperty(!0,n.model.dataSource[n.index].UniqueColumnName))},t.prototype.onValueChooser=function(n){var t,i;n.args.event.type==="change"&&(t=this.widgetHelper.getCurrentWidgetInstance(),this.updateAdvanceConditionOption(!1),this.updateBarButtonVisibility(!1),t.selectedTableColorWidget=this.getSelectedColorInfo(t.getGridProperties().ColorCustomizations,this.getColorFieldListName()),i=!BoldBIDashboard.isNullOrUndefined(t.selectedTableColorWidget.ColorCustomization)&&!BoldBIDashboard.isNullOrUndefined(t.selectedTableColorWidget.ColorCustomization.GradientSettings)&&!BoldBIDashboard.isNullOrUndefined(t.selectedTableColorWidget.ColorCustomization.RuleRangeSettings),!t.selectedTableColorWidget.EnableAsBar&&(this.colorInfoAsEmpty(t.selectedTableColorWidget.ColorCustomization)||i)||(this.updateColorInfoCollection(!1),this.designerInstance.modules.serialization.notifyChange(),this.dataConfigurationInstance.postDraggedFields()))},t.prototype.onBarChooser=function(n){n.args.event.type==="change"&&(this.updateAdvanceRadioButtonVisibility(n.optionalArgs),this.openBarCustomizeDialog())},t.prototype.openBarCustomizeDialog=function(){this.barCustomization=this.getBarCustomObject();this.renderBarCustomizeDialog();this.wireEvents();this.gridBarCustomizeDialog.data("BoldBIDashboardDialog").open()},t.prototype.onAdvanceChooser=function(n){n.args.event.type==="change"&&(this.updateAdvanceConditionOption(n.optionalArgs),this.clickAddConditionButton())},t.prototype.clickAddConditionButton=function(){var n=this.widgetHelper.getCurrentWidgetInstance(),t=this.getColorFieldListName(),i=new BoldBIDashboard.DashboardDesignerUtility.AdvancedColorCustomization(this.designerInstance);n.selectedTableColorWidget=this.getSelectedColorInfo(n.getGridProperties().ColorCustomizations,t);n.selectedTableColorWidget.SourceColorField.UniqueColumnName=t[n.selectedColumnIndex].UniqueColumnName;var r=this.getDefaultBasedOnField(t[n.selectedColumnIndex].UniqueColumnName),u={colorCustomizationObj:n.selectedTableColorWidget.ColorCustomization,DataGroupInfo:n.DataGroupInfo,colorFields:n.colorFields,colorTypeCollection:["Gradient","Rule"],defaultBasedOnField:r,legendVisible:!1,controlType:ControlType.Grid.toString(),isDefaultFormat:!0,defaultFormatDropInfo:["Gradient","Specific"]};i.populateUI(u,n,"UpdateColorCustomization")},t.prototype.getDefaultBasedOnField=function(n){for(var i,u=this.widgetHelper.getCurrentWidgetInstance(),r=this.getBindedColumnInfo(u),t=0;t<r.length;t++)if(i=r[t],i.UniqueColumnName===n)return i;return null},t.prototype.getSelectedColorInfo=function(n,t){var r=this.widgetHelper.getCurrentWidgetInstance(),i;if(!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.isNullOrUndefined(n)&&t.length>0&&n.length>0)for(i=0;i<n.length;i++)if(!BoldBIDashboard.isNullOrUndefined(n[i].SourceColorField)&&n[i].SourceColorField.UniqueColumnName===t[r.selectedColumnIndex].UniqueColumnName)return n[i];return new TableWidgetCustomColors},t.prototype.colorInfoAsEmpty=function(n){return BoldBIDashboard.isNullOrUndefined(n)||!BoldBIDashboard.isNullOrUndefined(n)&&BoldBIDashboard.isNullOrUndefined(n.GradientSettings)&&(BoldBIDashboard.isNullOrUndefined(n.RuleRangeSettings)||!BoldBIDashboard.isNullOrUndefined(n.RuleRangeSettings)&&n.RuleRangeSettings.RangeColorInfo.length===0)},t.prototype.updateColorInfoCollection=function(n){var t=this.widgetHelper.getCurrentWidgetInstance(),o=this.getColorFieldListName(),f=o[t.selectedColumnIndex].UniqueColumnName,e=[],r,u,i;if(!BoldBIDashboard.isNullOrUndefined(t.getGridProperties().ColorCustomizations)&&t.getGridProperties().ColorCustomizations.length>0){for(r=0;r<t.getGridProperties().ColorCustomizations.length;r++)u=t.getGridProperties().ColorCustomizations[r],f!==u.SourceColorField.UniqueColumnName&&e.push(u);t.getGridProperties().ColorCustomizations=e}!BoldBIDashboard.isNullOrUndefined(n)&&n&&(i=new TableWidgetCustomColors,i.ColorCustomization=null,i.EnableAsBar=!0,i.SourceColorField.UniqueColumnName=f,BoldBIDashboard.isNullOrUndefined(t.getGridProperties().ColorCustomizations)&&(t.getGridProperties().ColorCustomizations=[]),t.getGridProperties().ColorCustomizations.push(i))},t.prototype.renderKPIColumns=function(n,t,i){var y,p,e;if(BoldBIDashboard.isNullOrUndefined(n))e=this.propertyPanel.propertyPanelContainer.find("#"+this.designerId+"_kpi_gridCol").data("BoldBIDashboardGrid"),BoldBIDashboard.isNullOrUndefined(e)||(e.setModel({dataSource:this.getKPIGridDataSource()}),this.propertyPanel.updateItemVisibility("Grid","ColumnSettings","KPIColumns",i.isVisible),this.disableToolbarItems(!0));else{var u=BoldBIDashboard.buildTag("div","",{"padding-right":"10px","padding-left":"10px","padding-top":"10px","padding-bottom":"10px",width:"450px",display:BoldBIDashboard.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designerId+"_"+t+"_"+i.name+"_container"}),o=BoldBIDashboard.buildTag("div","",{float:"left"},{id:this.designerId+"_kpiLeft"}),s=BoldBIDashboard.buildTag("table.e-designer-table","",{},{unselectable:"on"}),h=BoldBIDashboard.buildTag("tr","",{display:"block"}),c=BoldBIDashboard.buildTag("td","",{}),nt=BoldBIDashboard.buildTag("div",this.locale.propertyPanel.columnSettings.kpiColumns,{"font-size":"14px","font-color":"#303541","font-weight":"600",float:"left"},{type:"label"}),l=BoldBIDashboard.buildTag("div","",{"padding-right":"10px","padding-top":"3px",float:"right"},{id:this.designerId+"_kpiRight"}),a=BoldBIDashboard.buildTag("table.e-designer-table","",{"padding-right":"5px"},{unselectable:"on"}),v=BoldBIDashboard.buildTag("tr","",{display:"block"}),r=BoldBIDashboard.buildTag("td.e-toolbar","",{border:"none",display:"flex"});this.filterDiv=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-grid-toolbar bbi-dbrd-icon-background-theme","",{"margin-left":"5px"},{id:this.designerId+"_kpi_filterIcon"});y=BoldBIDashboard.buildTag("span.bbi-designer-configuration-parameters bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable","",{float:"right",cursor:"default","font-size":"14px",margin:"3px"},{id:this.designerId+"_filter_span","data-tooltip":this.locale.propertyPanel.columnSettings.kpiColumns.filterTooltip});this.formatDiv=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-grid-toolbar bbi-dbrd-background-theme","",{"margin-left":"5px"},{id:this.designerId+"_kpi_formatIcon"});var tt=BoldBIDashboard.buildTag("span.bbi-designer-configuration-settings bbi-dbrd-designer-hoverable","",{float:"right","font-size":"14px","margin-top":"3px","margin-right":"4px"},{id:this.designerId+"_setting_span","data-tooltip":this.locale.propertyPanel.columnSettings.kpiColumns.optionsTooltip}),f=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-grid-toolbar bbi-dbrd-background-theme","",{},{id:this.designerId+"_kpi_addIcon"}),it=BoldBIDashboard.buildTag("span.e-icon e-plus bbi-designer-add-icon bbi-dbrd-designer-hoverable","",{float:"right","font-size":"14px","margin-top":"4px","margin-right":"2px"},{id:this.designerId+"_add_span","data-tooltip":this.locale.propertyPanel.columnSettings.kpiColumns.addTooltip});this.editDiv=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-grid-toolbar bbi-dbrd-icon-background-theme","",{"margin-left":"5px"},{id:this.designerId+"_kpi_editIcon"});p=BoldBIDashboard.buildTag("span.bbi-designer-parameter-edit bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable","",{float:"right","font-size":"14px",margin:"3px"},{id:this.designerId+"_edit_span","data-tooltip":this.locale.propertyPanel.columnSettings.kpiColumns.editTooltip});this.deleteDiv=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-grid-toolbar bbi-dbrd-icon-background-theme","",{"margin-left":"5px"},{id:this.designerId+"_kpi_delIcon"});var rt=BoldBIDashboard.buildTag("span.bbi-designer-toolbar-delete bbi-dbrd-designer-hoverable","",{float:"right","font-size":"14px",margin:"3px"},{id:this.designerId+"_del_span","data-tooltip":this.locale.propertyPanel.columnSettings.kpiColumns.delTooltip}),w=BoldBIDashboard.buildTag("div.e-kpi-grid","",{},{id:this.designerId+"_kpi_grid"}),b=BoldBIDashboard.buildTag("table.e-designer-table","",{width:"435px","table-layout":"fixed"},{unselectable:"on"}),k=BoldBIDashboard.buildTag("tr","",{}),d=BoldBIDashboard.buildTag("td.e-kpi-gridCol","",{},{id:this.designerId+"_kpi_gridCol"}),ut=BoldBIDashboard.buildTag("div.e-separator e-horizontal","",{height:"20px","padding-left":"5px"},{id:this.designerId+"_kpi_separator1"}),ft=BoldBIDashboard.buildTag("div.e-separator e-horizontal","",{height:"20px","padding-left":"5px"},{id:this.designerId+"_kpi_separator2"});n.append(u);u.append(o);o.append(s);s.append(h);h.append(c);c.append(nt);u.append(l);l.append(a);a.append(v);v.append(r);r.append(f);f.append(it);r.append(ft);r.append(this.editDiv);this.editDiv.append(p);r.append(this.deleteDiv);this.deleteDiv.append(rt);r.append(ut);r.append(this.formatDiv);this.formatDiv.append(tt);r.append(this.filterDiv);this.filterDiv.append(y);u.append(w);w.append(b);b.append(k);k.append(d);var et=this.getKPIDataValueSet(),g=214,ot=this.getKPIGridDataSource();d.BoldBIDashboardGrid({datasource:et,columns:[{field:"Name",headerText:this.locale.propertyPanel.columnSettings.kpiColumns.columnName,width:g},{field:"KPIColumnInfo.DisplayExpression",headerText:this.locale.propertyPanel.columnSettings.kpiColumns.KpiExpression,width:g},{field:"ActualColumnName",headerText:this.locale.propertyPanel.columnSettings.kpiColumns.actualColumnName,visible:!1},{field:"TargetColumnName",headerText:this.locale.propertyPanel.columnSettings.kpiColumns.targetColumnName,visible:!1},{field:"KpiCalculationType",headerText:this.locale.propertyPanel.columnSettings.kpiColumns.kpiCalculationType,visible:!1}],height:"200px",rowDataBound:this.kpiRowdataBoundEvent,allowSelection:!0,allowResizing:!0,allowScrolling:!0,allowPaging:!1,enableRowHover:!1,scrollSettings:{allowVirtualScrolling:!1,virtualScrollMode:"normal",enableTouchScroll:!0,autoHide:!0},rowSelected:this.bbdesigner$.proxy(this.gridSelection,this),enableAltRow:this.getGridProperties().EnableAlternativeRowColor});f.bind("click",this.bbdesigner$.proxy(this.addKPIColumn,this));this.deleteDiv.bind("click",this.bbdesigner$.proxy(this.deleteKPIColumn,this));this.editDiv.bind("click",this.bbdesigner$.proxy(this.editKPIColumn,this));this.formatDiv.bind("click",this.bbdesigner$.proxy(this.openKpiformat,this));this.filterDiv.bind("click",this.bbdesigner$.proxy(this.openKpiContextMenu,this,this.getGridProperties().UniqueName));this.updateKPIColumnsGrid();this.disableToolbarItems(!0)}},t.prototype.kpiRowDataBoundProcess=function(n){for(var i,t=0;t<n.model.columns.length;t++)i=this.getExpression(this.bbdesigner$(n.row).children().eq(4).html(),this.bbdesigner$(n.row).children().eq(2).html(),this.bbdesigner$(n.row).children().eq(3).html()),this.bbdesigner$(n.row).children().eq(1).html(i)},t.prototype.gridSelection=function(){this.disableToolbarItems(!1)},t.prototype.addKPIColumn=function(){var n=this.widgetHelper.getCurrentWidgetInstance();this.designerInstance.modules.kPIWindow.openkpiDialog(null,n,"updatekpiInfo",!1)},t.prototype.deleteKPIColumn=function(){var n,t;this.deleteDiv.attr("disabled")!=="disabled"&&(n=this.widgetHelper.getCurrentWidgetInstance(),n.selectedKpiColumnIndex=this.propertyPanel.propertyPanelContainer.find("#"+n.designerId+"_kpi_gridCol").data("BoldBIDashboardGrid").option("selectedRowIndex"),n.selectedKpiColumnIndex!==-1&&(t=n.getKPIDataValueSet(),t.splice(n.selectedKpiColumnIndex,1),this.propertyPanel.propertyPanelContainer.find("#"+n.designerId+"_kpi_gridCol").data("BoldBIDashboardGrid").setModel({dataSource:n.getKPIDataValueSet()}),n.dataConfigurationInstance.postDraggedFields()),this.disableToolbarItems(!0))},t.prototype.editKPIColumn=function(){if(this.editDiv.attr("disabled")!=="disabled"){var n=this.widgetHelper.getCurrentWidgetInstance();n.selectedKpiColumnIndex=this.propertyPanel.propertyPanelContainer.find("#"+n.designerId+"_kpi_gridCol").data("BoldBIDashboardGrid").option("selectedRowIndex");n.selectedKpiColumnIndex!==-1&&this.designerInstance.modules.kPIWindow.openkpiDialog(n.getKpiDataFieldbyIndex(n.selectedKpiColumnIndex),n,"updatekpiInfo",!0)}},t.prototype.openKpiformat=function(){var n,i,t;this.formatDiv.attr("disabled")!=="disabled"&&(n=this.widgetHelper.getCurrentWidgetInstance(),n.selectedKpiColumnIndex=this.propertyPanel.propertyPanelContainer.find("#"+n.designerId+"_kpi_gridCol").data("BoldBIDashboardGrid").option("selectedRowIndex"),i=n.getKpiDataFieldbyIndex(n.selectedKpiColumnIndex),t=this.widgetHelper.getCurrentWidgetInstance(),this.designerInstance.modules.formatDialog.openFormatDialog(i.MeasureFormatting,t.dataGroupInfo.DataSourceName,function(n){if(n){var i=t.getKpiDataFieldbyIndex(t.selectedKpiColumnIndex).MeasureFormatting;i.Culture=n.Culture;i.DecimalPoints=n.DecimalPoints;i.DecimalSeparator=n.DecimalSeparator;i.GroupSeparator=n.GroupSeparator;i.FormatType=n.FormatType;i.Unit=n.Unit;i.EnableLakhsAndCroreRep=n.EnableLakhsAndCroreRep;t.updateKpiformat()}},!0,KpiCalculationType[i.KPIColumnInfo.KpiCalculationType]===KpiCalculationType.PercentageOfTarget||KpiCalculationType[i.KPIColumnInfo.KpiCalculationType]===KpiCalculationType.PercentageVariation))},t.prototype.openKpiContextMenu=function(n,t){var u,f;if(this.filterDiv.attr("disabled")!=="disabled"){var r=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-hoverable","",{},{id:this.designerId+"_KpiColumn_FilterMenu"}),i=BoldBIDashboard.buildTag("ul.bbi-designer-menu","",{},{id:this.designerId+"_"+n+"_KpiColumn_ConfigMenu"});r.append(i);i.BoldBIDashboardMenu({menuType:BoldBIDashboard.MenuType.ContextMenu,openOnClick:!1,width:"110px",container:"#"+r.attr("id"),fields:{dataSource:[{id:"EditMeasureFilter",text:"Edit...",sprite:"e-icon bbi-widgeticon bbi-designer-parameter-edit boldbi-dashboarddesigner-grid-kpi-filter-icon"},{id:"ClearMeasureFilter",text:"Clear",sprite:"bbi-headericon bbi-designer-close bbi-designer-errorLog boldbi-dashboarddesigner-grid-kpi-filter-icon"}],id:"id",parentId:"parentId",text:"text",spriteCssClass:"sprite"},click:this.bbdesigner$.proxy(this.onMeasureFilterMenuClick,this)});i.is(":visible")?i.hide():(u=i.data("BoldBIDashboardMenu"),u.show(this.bbdesigner$(t.currentTarget).offset().left-i.outerWidth(!0),this.bbdesigner$(t.currentTarget).offset().top+this.bbdesigner$(t.currentTarget).outerHeight(!0),r,t),f=this.getMeasureFilterInfoForKPIColumn(),f===null&&u.disableItemByID("ClearMeasureFilter"))}},t.prototype.onMeasureFilterMenuClick=function(n){var t,i,r;n.ID==="EditMeasureFilter"?(t=this.getMeasureFilterInfoForKPIColumn(),i=this.widgetHelper.getCurrentWidgetInstance(),i.selectedKpiColumnIndex!==-1&&(t=t===null?new MeasureFilterInfo:t,r=i.getKpiDataFieldbyIndex(i.selectedKpiColumnIndex),this.designerInstance.modules.measureFilter.openMeasureFilter(i,"updateMeasureFilterInKPI",r,t,!0))):n.ID==="ClearMeasureFilter"&&this.updateMeasureFilterInKPI(new BoldBIDashboard.Dashboard.MeasureFilterInfoForUI)},t.prototype.getMeasureFilterInfoForKPIColumn=function(){var i=null,n=this.widgetHelper.getCurrentWidgetInstance(),r=this.propertyPanel.propertyPanelContainer.find("#"+n.designerId+"_kpi_gridCol"),t;return n.selectedKpiColumnIndex=r.data("BoldBIDashboardGrid").option("selectedRowIndex"),n.selectedKpiColumnIndex!==-1&&(t=n.getKpiDataFieldbyIndex(n.selectedKpiColumnIndex),t.FilterInfo!=null&&(i=t.FilterInfo.MeasureFilterInfo)),i},t.prototype.updateKpiformat=function(){this.updateGridColumns();this.refreshGrid();this.updateGridFontSize()},t.prototype.updateMeasureFilterInKPI=function(n){var t=this.getKpiDataFieldbyIndex(this.selectedKpiColumnIndex);t.FilterInfo=new FilterInfo;t.FilterInfo.MeasureFilterInfo=n.Values.length===0?null:n;this.dataConfigurationInstance.postDraggedFields()},t.prototype.updatekpiInfo=function(n,t){var r=n,i;t?(i=this.getKpiDataFieldbyIndex(this.selectedKpiColumnIndex),i.IsKPIColumn=!0,i.KPIColumnInfo=r.KPIColumnInfo,this.updateKPIColumnsGrid()):(this.updateKpiDataFiled(n),this.updateKPIColumnsGrid());this.disableToolbarItems(!0);this.propertyPanel.refreshScroller();this.dataConfigurationInstance.postDraggedFields()},t.prototype.updateKPIColumnsGrid=function(){this.propertyPanel.propertyPanelContainer.find("#"+this.designerId+"_kpi_gridCol").data("BoldBIDashboardGrid").setModel({dataSource:this.getKPIGridDataSource()})},t.prototype.getKpiDataFieldbyIndex=function(n){for(var t=0;t<this.DataGroupInfo.FieldContainers.length;t++)if(this.DataGroupInfo.FieldContainers[t].Name==="KPIColumn")return this.DataGroupInfo.FieldContainers[t].FieldInfos[n]},t.prototype.updateKpiDataFiled=function(n){for(var t=0;t<this.DataGroupInfo.FieldContainers.length;t++)if(this.DataGroupInfo.FieldContainers[t].Name==="KPIColumn"){this.DataGroupInfo.FieldContainers[t].FieldInfos?this.DataGroupInfo.FieldContainers[t].FieldInfos.push(n):(this.DataGroupInfo.FieldContainers[t].FieldInfos=[],this.DataGroupInfo.FieldContainers[t].FieldInfos.push(n));break}},t.prototype.disableToolbarItems=function(n){var t=this.designerInstance.element;n?(t.find("#"+this.designerId+"_kpi_editIcon").css("opacity","0.5").attr("disabled","disabled"),t.find("#"+this.designerId+"_kpi_delIcon").css("opacity","0.5").attr("disabled","disabled"),t.find("#"+this.designerId+"_kpi_formatIcon").css("opacity","0.5").attr("disabled","disabled"),t.find("#"+this.designerId+"_kpi_filterIcon").css("opacity","0.5").attr("disabled","disabled")):(t.find("#"+this.designerId+"_kpi_editIcon").css("opacity","1").removeAttr("disabled"),t.find("#"+this.designerId+"_kpi_delIcon").css("opacity","1").removeAttr("disabled"),t.find("#"+this.designerId+"_kpi_formatIcon").css("opacity","1").removeAttr("disabled"),t.find("#"+this.designerId+"_kpi_filterIcon").css("opacity","1").removeAttr("disabled"))},t.prototype.updateHorizontalGridLine=function(n){this.getGridProperties().HorizontalGridLine=n;var t=this.tableElement.data("BoldBIDashboardGrid");t.option("gridLines",this.getGridLineType());this.addOrRemoveContentBottomBorder()},t.prototype.updateVerticalGridLine=function(n){this.getGridProperties().VerticalGridLine=n;var t=this.tableElement.data("BoldBIDashboardGrid");t.option("gridLines",this.getGridLineType());this.updateSummaryRowVerticalLine(t)},t.prototype.updateSummaryRowVerticalLine=function(n){BoldBIDashboard.isNullOrUndefined(n)||!this.getGridProperties().SummaryRowSettings.EnableSummaryRow||BoldBIDashboard.isNullOrUndefined(n.getFooterContent())||(this.getGridProperties().VerticalGridLine?n.getFooterContent().find("td").addClass("e-dbrd-summary-row"):n.getFooterContent().find("td").removeClass("e-dbrd-summary-row"))},t.prototype.updateValueForeground=function(n){this.getGridProperties().GridValueSection.Foreground.Color=n;this.getGridProperties().GridValueSection.Foreground.IsEdited=!0;var t=this.tableElement.data("BoldBIDashboardGrid");t.model.rowDataBound=this.bbdesigner$.proxy(this.rowDataBoundProcess,this);t.option("enableAltRow",!this.getGridProperties().EnableAlternativeRowColor);t.option("enableAltRow",this.getGridProperties().EnableAlternativeRowColor)},t.prototype.updateValueBackground=function(n){this.getGridProperties().GridValueSection.Background.Color=n;this.getGridProperties().GridValueSection.Background.IsEdited=!0;var t=this.tableElement.data("BoldBIDashboardGrid");t.model.rowDataBound=this.bbdesigner$.proxy(this.rowDataBoundProcess,this);t.option("enableAltRow",!this.getGridProperties().EnableAlternativeRowColor);t.option("enableAltRow",this.getGridProperties().EnableAlternativeRowColor)},t.prototype.updateAlternativeRowColor=function(n){this.getGridProperties().EnableAlternativeRowColor=n;this.propertyPanel.updateItemVisibility("Grid","ContentSettings","AlternativeRowForeground",n);this.propertyPanel.updateItemVisibility("Grid","ContentSettings","AlternativeRowBackground",n);var t=this.tableElement.data("BoldBIDashboardGrid");n&&(t.model.rowDataBound=this.bbdesigner$.proxy(this.rowDataBoundProcess,this));t.option("enableAltRow",n)},t.prototype.updateRawData=function(n){this.getGridProperties().RawData=n;this.dataConfigurationInstance.postDraggedFields()},t.prototype.updatePageSize=function(n){this.getGridProperties().PageSize=n;var t=this.tableElement.data("BoldBIDashboardGrid");this.getGridProperties().AllowPaging?this.getGridProperties().DisableVirtualization?t.option({pageSettings:{pageSize:n,currentPage:1}}):(t._gridRecordsCount=n,t.option({pageSettings:{pageSize:n,totalRecordCount:this.totalRecordsCount,currentPage:1}})):(t._gridRecordsCount=this.hasMoreRecords?n+1:n,t.model.pageSettings.pageSize=n,t.refreshContent())},t.prototype.updateHeaderVisibility=function(n,t){var r,u,i;t===void 0&&(t=!1);this.getGridProperties().ShowHeader=n;r=".e-grid .e-columnheader";u=".e-gridheader";n?(this.controlContainer.find(r).removeClass("e-columnheader-visibility"),this.controlContainer.find(u).addClass("e-gridheader-bottom-visibility")):(this.controlContainer.find(r).addClass("e-columnheader-visibility"),this.controlContainer.find(u).removeClass("e-gridheader-bottom-visibility"));this.designerInstance.isDesignMode()&&(this.propertyPanel.updateItemVisibility(this.Type,"HeaderSettings","HeaderForeground",n),this.propertyPanel.updateItemVisibility(this.Type,"HeaderSettings","HeaderBackground",n),this.propertyPanel.updateItemVisibility(this.Type,"HeaderSettings","HeaderHeight",n),this.propertyPanel.updateItemVisibility(this.Type,"HeaderSettings","AutoHeaderFontSize",n),this.propertyPanel.updateItemVisibility(this.Type,"HeaderSettings","HeaderPadding",n),this.propertyPanel.updateItemVisibility(this.Type,"HeaderSettings","HeaderFontSize",this.getGridProperties().IsAutoHeaderFontSize?!1:n));t&&(i=this.tableElement.data("BoldBIDashboardGrid"),i.option({scrollSettings:{height:this.gridItem.height()-this.getSummaryRowHeight()-this.gridItem.find(".e-columnheader").height()-this.getPagerHeight()-this.gridItem.find(".e-filterbar").height()}}),BoldBIDashboard.isNullOrUndefined(i.getContent().data("BoldBIDashboardScroller"))||i.getScrollObject().refresh())},t.prototype.updateBorderVisibility=function(n){this.getGridProperties().ShowBorder=n;var t=".e-griditem";n?this.controlContainer.find(t).removeClass("e-border-visibility"):this.controlContainer.find(t).addClass("e-border-visibility")},t.prototype.updateAutoHeaderFontSize=function(n){if(this.getGridProperties().IsAutoHeaderFontSize=n,n){var t=this.getFontSizeBasedOnResolution();this.gridItem.find(".e-headercelldiv").css("font-size",t)}else this.updateHeaderFontSize(this.getGridProperties().HeaderFontSize);this.propertyPanel.updateItemVisibility(this.Type,"HeaderSettings","HeaderFontSize",!n)},t.prototype.updateHeaderFontSize=function(n){this.getGridProperties().HeaderFontSize=n;this.gridItem.find(".e-headercelldiv").css("font-size",n+"px")},t.prototype.updateAutoRowFontSize=function(n){if(this.getGridProperties().IsAutoRowFontSize=n,n){var t=this.getFontSizeBasedOnResolution();this.gridItem.find(".e-rowcell").css("font-size",t)}else this.updateRowFontSize(this.getGridProperties().RowFontSize);this.propertyPanel.updateItemVisibility(this.Type,"ContentSettings","RowFontSize",!n)},t.prototype.updateRowFontSize=function(n){this.getGridProperties().RowFontSize=n;this.gridItem.find(".e-rowcell").css("font-size",n+"px")},t.prototype.updateHeaderPadding=function(n,t){t===void 0&&(t=!0);this.getGridProperties().HeaderPadding=n;var i=this.controlContainer.attr("id"),r="#"+i+" .e-grid .e-headercelldiv {padding:"+n+"px 11px;}";this.controlContainer.find("#"+i+"_header_padding").length>0?this.controlContainer.find("#"+i+"_header_padding").html(r):this.controlContainer.append('<style id="'+i+'_header_padding">'+r+"<\/style>");t&&this.updateGridSize()},t.prototype.updateContentPadding=function(n,t){var s,f;t===void 0&&(t=!0);this.getGridProperties().ContentPadding=n;var i=this.controlContainer.attr("id"),r=this.getGridProperties().RowHeight,u=this.getGridProperties().ContentPadding,e=r+u*2,o=Number(e/1.9)+4,h=o>r?o:r;u=(e-h)/2;s=Math.floor(u);f="#"+i+" .e-grid .e-rowcell {padding:"+this.getGridProperties().ContentPadding+"px 11px !important;} #"+i+" .e-grid .e-filterbar .e-filterbarcell {padding:"+s+"px 11px !important;} ";this.controlContainer.find("#"+i+"_row_padding").length>0?this.controlContainer.find("#"+i+"_row_padding").html(f):this.controlContainer.append('<style id="'+i+'_row_padding">'+f+"<\/style>");t&&this.updateGridSize()},t.prototype.updateAlternativeRowForeground=function(n){this.getGridProperties().AlternativeRow.Foreground.Color=n;this.getGridProperties().AlternativeRow.Foreground.IsEdited=!0;var t=this.tableElement.data("BoldBIDashboardGrid");this.getGridProperties().EnableAlternativeRowColor&&(t.model.rowDataBound=this.bbdesigner$.proxy(this.rowDataBoundProcess,this),t.option("enableAltRow",!1),t.option("enableAltRow",!0))},t.prototype.updateAlternativeRowBackground=function(n){this.getGridProperties().AlternativeRow.Background.Color=n;this.getGridProperties().AlternativeRow.Background.IsEdited=!0;var t=this.tableElement.data("BoldBIDashboardGrid");this.getGridProperties().EnableAlternativeRowColor&&(t.model.rowDataBound=this.bbdesigner$.proxy(this.rowDataBoundProcess,this),t.option("enableAltRow",!1),t.option("enableAltRow",!0))},t.prototype.updateAllowTextWrap=function(n){this.getGridProperties().AllowTextWrap=n;var t=this.tableElement.data("BoldBIDashboardGrid");t.option("allowTextWrap",n);this.updateGridRowHeightToDefault(!0)},t.prototype.updateAllowResizeToFit=function(n,t){var i,f,u,r;if(this.getGridProperties().FitContent=n,t&&n&&(n=!(this.isPresentImageSettings()||this.tableElement.find(".e-progressbar").length>0||this.isPresentKPIColumn())),i=this.tableElement.data("BoldBIDashboardGrid"),f=i.model.columns,n){for(u=0;u<f.length;u++)this.bbdesigner$(this.tableElement.find(".e-row").first().children()[u]).find(".e-progressbar").length===0&&(delete f[u].width,i.model.columns[u]=f[u],i.model.columns[u].visible=!0);i.columnsWidthCollection=[]}else if(this.getGridProperties().ColumnAlignments.filter(function(n){return n.IsColumnWidthModified}).length>0)for(r=0;r<f.length;r++)this.updateGridColumnWidth(this.getGridProperties().ColumnAlignments,i),i.model.columns[r].visible=!0;else if(!BoldBIDashboard.isNullOrUndefined(i.columnsWidthCollection))for(r=0;r<f.length;r++)i.columnsWidthCollection[r]="100",i.model.columns[r].width=100,i.model.columns[r].visible=!0;i.option("allowResizeToFit",n);n||i.setWidthToColumns();this.updateGridTableSize(i);this.refreshHeader();t&&(i.option({scrollSettings:{height:this.gridItem.height()-this.getSummaryRowHeight()-this.gridItem.find(".e-columnheader").height()-this.getPagerHeight()-this.gridItem.find(".e-filterbar").height()}}),BoldBIDashboard.isNullOrUndefined(i.getContent().data("BoldBIDashboardScroller"))||i.getScrollObject().refresh())},t.prototype.updateGridTableSize=function(n){var t,i;for(this.tableElement.css({width:this.gridItem.width(),height:this.gridItem.height()}),t=this.tableElement.find(".e-table"),i=0;i<t.length;i++)t.css("width","100%");BoldBIDashboard.isNullOrUndefined(n.getContent().data("BoldBIDashboardScroller"))||n.getScrollObject().refresh()},t.prototype.updateAllowSorting=function(n){this.getGridProperties().AllowSorting=n;var t=this.tableElement.data("BoldBIDashboardGrid");t.option("allowSorting",n)},t.prototype.updateShowTooltip=function(n){var i,t;for(this.getGridProperties().ShowTooltip=n,i=this.tableElement.data("BoldBIDashboardGrid"),t=0;t<i.model.columns.length;t++)i.model.columns[t].tooltip=this.getGridProperties().ShowTooltip?"{{:value}}":null;this.refresh()},t.prototype.updateSummaryRow=function(n){if(this.getGridProperties().SummaryRowSettings.EnableSummaryRow=n,this.enableOrDisableSummaryButton(),this.disableOrEnableSummaryRowSettings(!0),n)this.renderSummaryDialog();else{var t=this.tableElement.data("BoldBIDashboardGrid");t.model.showSummary=this.getGridProperties().SummaryRowSettings.EnableSummaryRow;t.model.summaryRows=[];t.option({scrollSettings:{height:this.gridItem.height()-this.gridItem.find(".e-columnheader").height()-this.getPagerHeight()-this.gridItem.find(".e-filterbar").height()}});this.refresh()}},t.prototype.renderSummaryDialog=function(){var i=new BoldBIDashboard.DashboardDesignerUtility.GridSummaryRowHelper(this.designerInstance),n=this.widgetHelper.getCurrentWidgetInstance(),t;n.getGridProperties().SummaryRowSettings.EnableSummaryRow&&(t={summaryRowSettings:n.getGridProperties().SummaryRowSettings,dataGroupInfo:n.DataGroupInfo},i.populateSummaryDesigner(t,n,"widgetDataFetch",this.designerInstance))},t.prototype.getSummaryRowColumns=function(){var t,f,n,u,e;if(this.getGridProperties().SummaryRowSettings.EnableSummaryRow&&this.summaryTotalValues.length>0){var o=[],i=this.getGridProperties().SummaryRowSettings.SummaryColumn,r="";if(!BoldBIDashboard.isNullOrUndefined(i))for(t=0;t<i.length;t++)if(f=[],n="",this.isColumnConfigured(i[t])){for(u=0;u<i[t].SummaryRow.length;u++)e=i[t].SummaryRow[u],f.push(this.getSummaryRowTemplateOnject(e)),n=e.UniqueColumnName;i[t].SummaryRow.length>0&&(o.push({summaryType:BoldBIDashboard.Grid.SummaryType.Custom,displayColumn:n,dataMember:n,template:"#"+this.tableElement.attr("id")+"_Summary_Row_Template_"+n}),r+='<script type="text/x-jsrender" id="'+this.tableElement.attr("id")+"_Summary_Row_Template_"+n+'">',r+="{{:~_renderTemplate('"+JSON.stringify(f)+"')}}",r+="<\/script>",this.designerInstance.element.parents("body").find("#"+this.tableElement.attr("id")+"_Summary_Row_Template_"+n).length>0&&this.designerInstance.element.parents("body").find("#"+this.tableElement.attr("id")+"_Summary_Row_Template_"+n).remove())}return this.designerInstance.element.parents("body").append(r),[{summaryColumns:o}]}return[]},t.prototype.isColumnConfigured=function(n){var t=BoldBIDashboard.isNullOrUndefined(this.widgetHelper.getCurrentWidgetInstance())?this:this.widgetHelper.getCurrentWidgetInstance(),i=this.getBindedColumnInfo(t);return n.SummaryRow.length>0?i.filter(function(t){return t.UniqueColumnName===n.SummaryRow[0].UniqueColumnName}).length>0||this.getKPIColumnContainer().FieldInfos.filter(function(t){return t.UniqueColumnName===n.SummaryRow[0].UniqueColumnName}).length>0:!1},t.prototype.getSummaryRowTemplateOnject=function(n){var t=n.MeasureFormat,i=BoldBIDashboard.DashboardUtil.formattedText(BoldBIDashboard.isNullOrUndefined(this.summaryTotalValues[0][n.UniqueRowName])?"":this.summaryTotalValues[0][n.UniqueRowName].toString(),t.Culture,t.DecimalPoints,DataValueFormat[t.FormatType],t.DecimalSeparator,t.GroupSeparator,t.Prefix,t.Suffix,NumberFormat[t.Unit],!0,this.designer,t.EnableLakhsAndCroreRep);return{TitleValue:n.Name,TotalValue:i,ShowValue:n.ShowValue,IsTitleEdited:n.Title.IsEdited,IsValueEdited:n.Value.IsEdited,ValueColor:n.Value.Color,TitleColor:n.Title.Color,Padding:this.getGridProperties().SummaryRowSettings.IsAutoPadding?15:this.getGridProperties().SummaryRowSettings.Padding}},t.prototype.widgetDataFetch=function(n){this.getGridProperties().SummaryRowSettings=n;var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0]));this.designerInstance.modules.serialization.notifyChange();t.dataConfigurationInstance.postDraggedFields()},t.prototype.renderSummarySettings=function(n,t,i){if(this.categoryId=this.designerId+"_"+t+"_"+i.categoryName,this.summaryContainer=this.designerInstance.element.find("#"+this.categoryId),this.summaryContainer.length===0&&!BoldBIDashboard.isNullOrUndefined(n)){this.summaryContainer=BoldBIDashboard.buildTag("div.e-dashbrd-custom-summary-container","",{width:"auto",height:"auto"},{id:this.categoryId});var r=BoldBIDashboard.buildTag("div","",{},{id:this.categoryId+"_wrap"}),u=BoldBIDashboard.buildTag("div.e-basic-advance-panel-wrap","",{width:"calc(100% / 2)",height:"100%",float:"left"},{id:this.designerId+"_"+t+"_custom_summary_panel"}),f=this.getCustomizeButton(this.categoryId);u.append(f);r.append(u);this.summaryContainer.append(r);n.append(this.summaryContainer)}this.renderCustomSummarySettings()},t.prototype.getCustomizeButton=function(n){var i=BoldBIDashboard.buildTag("div.e-custom-summary-row","",{height:"50px",width:"100%"},{id:this.designerId+"_custom_summary_row_table"}),t=BoldBIDashboard.buildTag("div.e-custom-summary-option-wrap","",{width:"calc(100% / 2 - 5px)",float:"left",height:"100%"},{}),r=BoldBIDashboard.buildTag("button.e-custom-summary-button bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.propertyPanel.customizeBtnText,{width:"230px","margin-bottom":"15px","margin-left":"195px",float:"left"},{id:n+"_custom_sumary_button",type:"button"});return t.append(r),i.append(t)},t.prototype.renderCustomSummarySettings=function(){var n=this.summaryContainer.find(".e-custom-summary-button");this.enableOrDisableSummaryButton();n.off("click",this.bbdesigner$.proxy(this.renderSummaryDialog,this));n.on("click",this.bbdesigner$.proxy(this.renderSummaryDialog,this))},t.prototype.enableOrDisableSummaryButton=function(){var n=this.summaryContainer.find(".e-custom-summary-button");this.getGridProperties().SummaryRowSettings.EnableSummaryRow?n.removeAttr("disabled"):n.attr("disabled","disabled")},t.prototype.getSummaryRowHeight=function(){var t=this.getGridProperties().SummaryRowSettings.EnableSummaryRow&&this.getGridProperties().SummaryRowSettings.SummaryColumn.length>0&&this.getGridProperties().SummaryRowSettings.SummaryColumn.filter(function(n){return n.SummaryRow[0]}).length>0,n;return this.getGridProperties().SummaryRowSettings.EnableSummaryRow&&t?(n=0,n=this.gridItem.find(".e-gridSummaryRows").length>0?this.gridItem.find(".e-gridSummaryRows").height():this.getGridProperties().SummaryRowSettings.IsAutoPadding?54:26,this.getGridProperties().SummaryRowSettings.IsAutoHeight?n:this.getGridProperties().SummaryRowSettings.Height):0},t.prototype.updateSummaryRowHeight=function(n){this.getGridProperties().SummaryRowSettings.Height=n;var t=this.tableElement.data("BoldBIDashboardGrid");t.option({scrollSettings:{height:this.gridItem.height()-this.getSummaryRowHeight()-this.gridItem.find(".e-columnheader").height()-this.getPagerHeight()-this.gridItem.find(".e-filterbar").height()}});this.addSummaryScroller()},t.prototype.addSummaryScroller=function(){var n=this.tableElement.data("BoldBIDashboardGrid");!BoldBIDashboard.isNullOrUndefined(n)&&n.model.showSummary&&n.model.summaryRows.length>0&&!this.getGridProperties().SummaryRowSettings.IsAutoHeight&&this.gridItem.find(".e-gridfooter").BoldBIDashboardScroller({height:this.getGridProperties().SummaryRowSettings.Height+"px",scrollerSize:2,enableTouchScroll:!0,autoHide:!0,buttonSize:this.designerInstance.scrollerSize.buttonSize})},t.prototype.removeSummaryScroller=function(){var n=this.gridItem.find(".e-gridfooter").data("BoldBIDashboardScroller");BoldBIDashboard.isNullOrUndefined(n)||n.destroy()},t.prototype.updateSummaryRowPadding=function(n){var i,r,u,t;if(this.getGridProperties().SummaryRowSettings.Padding=n,i=this.tableElement.data("BoldBIDashboardGrid"),!BoldBIDashboard.isNullOrUndefined(i)){for(r=i.getFooterContent().find(".e-column"),u=this.getGridProperties().SummaryRowSettings.IsAutoPadding?15:this.getGridProperties().SummaryRowSettings.Padding,t=0;t<r.length;t++)r[t].style.marginBottom=r[t].style.marginTop=u+"px";i.option({scrollSettings:{height:this.gridItem.height()-this.getSummaryRowHeight()-this.gridItem.find(".e-columnheader").height()-this.getPagerHeight()-this.gridItem.find(".e-filterbar").height()}});this.addSummaryScroller()}},t.prototype.UpdateSummaryRowBackground=function(){var t=this.tableElement.data("BoldBIDashboardGrid"),i=this.getGridProperties().SummaryRowSettings.BackgroundColor.IsEdited?this.getGridProperties().SummaryRowSettings.BackgroundColor.Color:this.designerInstance.modules.themeHelper.getGridHeaderBackground(),n;BoldBIDashboard.isNullOrUndefined(t)||(n=t.getFooterContent(),!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0&&(n[0].style.background=i))},t.prototype.UpdateSummaryRowFontSize=function(n){var i=this.tableElement.data("BoldBIDashboardGrid"),t;BoldBIDashboard.isNullOrUndefined(i)||(t=i.getFooterTable(),!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0&&(t[0].style.fontSize=this.getGridProperties().SummaryRowSettings.IsAutoFontSize?this.getFontSizeBasedOnResolution():this.getGridProperties().SummaryRowSettings.FontSize+"px"));n&&i.option({scrollSettings:{height:this.gridItem.height()-this.getSummaryRowHeight()-this.gridItem.find(".e-columnheader").height()-this.getPagerHeight()-this.gridItem.find(".e-filterbar").height()}});this.addSummaryScroller()},t.prototype.disableOrEnableSummaryRowSettings=function(n){var t=this.getGridProperties().SummaryRowSettings.EnableSummaryRow;!BoldBIDashboard.isNullOrUndefined(n)&&n?(this.propertyPanel.updateItemDisable("bool",this.Type,"SummaryRow","EnableSummaryRowHeight",!t),this.propertyPanel.updateItemDisable("bool",this.Type,"SummaryRow","EnableSummaryRowPadding",!t),this.propertyPanel.updateItemDisable("bool",this.Type,"SummaryRow","EnableSummaryRowFontSize",!t),this.propertyPanel.updateItemDisable("float",this.Type,"SummaryRow","SummaryRowHeight",t?this.getGridProperties().SummaryRowSettings.IsAutoHeight:!0),this.propertyPanel.updateItemDisable("float",this.Type,"SummaryRow","SummaryRowPadding",t?this.getGridProperties().SummaryRowSettings.IsAutoPadding:!0),this.propertyPanel.updateItemDisable("float",this.Type,"SummaryRow","SummaryRowFontSize",t?this.getGridProperties().SummaryRowSettings.IsAutoFontSize:!0),this.propertyPanel.updateItemDisable("color",this.Type,"SummaryRow","SummaryRowBackground",!t)):(this.propertyPanel.updateItemDisable("float",this.Type,"SummaryRow","SummaryRowHeight",this.getGridProperties().SummaryRowSettings.IsAutoHeight),this.propertyPanel.updateItemDisable("float",this.Type,"SummaryRow","SummaryRowPadding",this.getGridProperties().SummaryRowSettings.IsAutoPadding),this.propertyPanel.updateItemDisable("float",this.Type,"SummaryRow","SummaryRowFontSize",this.getGridProperties().SummaryRowSettings.IsAutoFontSize))},t.prototype.updateAllowPaging=function(n){var t;if(this.getGridProperties().AllowPaging=n,this.propertyPanel.updateItemVisibility("Grid","PageSettings","DisableVirtualization",n),t=this.tableElement.data("BoldBIDashboardGrid"),!BoldBIDashboard.isNullOrUndefined(t))if(n)if(this.getGridProperties().DisableVirtualization)this.dataConfigurationInstance.postDraggedFields();else t.option("allowPaging",n),t.option({pageSettings:{pageSize:this.VirtualScrollSettings.PageSize,enableTemplates:!0,template:this.pagerTemplate}}),t.option("scrollSettings.allowVirtualScrolling",!1),t.option({scrollSettings:{height:this.gridItem.height()-this.getSummaryRowHeight()-this.gridItem.find(".e-columnheader").height()-47-this.gridItem.find(".e-filterbar").height()}});else this.getGridProperties().DisableVirtualization||t.option({pageSettings:{currentPage:1}}),t.option("allowPaging",n),this.dataConfigurationInstance.postDraggedFields();n||(this.getGridProperties().DisableVirtualization=!1,this.setPropertyElement("DisableVirtualization","PageSettings",!1))},t.prototype.updateVirtualization=function(n){this.getGridProperties().DisableVirtualization=n;var t=this.tableElement.data("BoldBIDashboardGrid");t.option({pageSettings:{currentPage:1}});this.dataConfigurationInstance.postDraggedFields()},t.prototype.getPagerHeight=function(){if(this.getGridProperties().AllowPaging)return this.gridItem.find(".e-pager").height()+21;return 0},t.prototype.updateRowHeight=function(n,t){var s;if(t===void 0&&(t=!0),!isNaN(n)&&n>13){var i=this.controlContainer.attr("id"),u=1.9,f=n+22,h=Math.floor(f/u),e=Number(f/u)+4,r=e>n?e:n,o="#"+i+" .e-grid .e-rowcell {line-height:"+n+"px !important;} #"+i+" .e-grid .e-filterbar .e-filterbarcell {line-height:"+Math.floor(r)+"px !important; height:"+Math.floor(r)+"px !important} #"+i+" .e-grid .e-filterbar .e-filterbarcell input {height:"+h+"px !important } #"+i+" .e-grid .e-filterdiv.e-fltrtempdiv span {top:"+Math.round((r-14)/2)+"px !important }";this.controlContainer.find("#"+i+"_row_height").length>0?this.controlContainer.find("#"+i+"_row_height").html(o):this.controlContainer.append('<style id="'+i+'_row_height">'+o+"<\/style>");this.getGridProperties().AllowFilter&&t&&(s=this.tableElement.data("BoldBIDashboardGrid"),s.option({scrollSettings:{height:this.gridItem.height()-this.getSummaryRowHeight()-this.gridItem.find(".e-columnheader").height()-this.getPagerHeight()-this.gridItem.find(".e-filterbar").height()}}));this.refreshRowHeight()}},t.prototype.updateHeaderHeight=function(n,t){var i,r,u;t===void 0&&(t=!0);!isNaN(n)&&n>13&&(i=this.controlContainer.attr("id"),r="#"+i+" .e-grid .e-columnheader {line-height:"+n+"px !important } #"+i+" .e-grid .e-headercell {height: "+n+"px!important } #"+i+" .e-grid .e-headercelldiv {line-height:"+n+"px !important; height:"+n+"px !important; margin: 0px -7px !important;}",this.controlContainer.find("#"+i+"_header_height").length>0?this.controlContainer.find("#"+i+"_header_height").html(r):this.controlContainer.append('<style id="'+i+'_header_height">'+r+"<\/style>"),t&&(u=this.tableElement.data("BoldBIDashboardGrid"),u.option({scrollSettings:{height:this.gridItem.height()-this.getSummaryRowHeight()-this.gridItem.find(".e-columnheader").height()-this.getPagerHeight()-this.gridItem.find(".e-filterbar").height()}})))},t.prototype.updateGridRowHeightToDefault=function(n){var r=this.tableElement.data("BoldBIDashboardGrid"),u,i,t,f;if(this.getGridProperties().AllowTextWrap){if(u=this.controlContainer.attr("id"),this.controlContainer.find("#"+u+"_header_height").remove(),this.controlContainer.find("#"+u+"_row_height").remove(),n)this.refreshRowHeight(),r.option({scrollSettings:{height:this.gridItem.height()-this.getSummaryRowHeight()-this.gridItem.find(".e-columnheader").height()-this.getPagerHeight()-this.gridItem.find(".e-filterbar").height()}});else if(this.isPresentImageSettings())for(i=this.tableElement.find(".e-rowcell-image"),t=0;t<i.length;t++)i[t].offsetHeight===0&&i[t].offsetWidth===0&&(f=this.bbdesigner$(i[t]).parent().height(),i[t].style.height=f+"px",i[t].style.width=i[t].style.fontSize=this.bbdesigner$(i[t]).height()+"px")}else this.updateHeaderHeight(this.getGridProperties().HeaderHeight,n),this.updateRowHeight(this.getGridProperties().RowHeight,n);this.disableOrEnableRowHeightProperty();BoldBIDashboard.isNullOrUndefined(r.getContent().data("BoldBIDashboardScroller"))||r.getScrollObject().refresh()},t.prototype.disableOrEnableRowHeightProperty=function(){var n=this.getGridProperties().AllowTextWrap;this.propertyPanel.updateItemDisable("float",this.Type,"HeaderSettings","HeaderHeight",n);this.propertyPanel.updateItemDisable("float",this.Type,"ContentSettings","RowHeight",n)},t.prototype.refreshRowHeight=function(){(this.isPresentImageSettings()||this.tableElement.find(".e-progressbar").length>0)&&this.refreshGrid()},t.prototype.updateAllowFiltering=function(n){this.getGridProperties().AllowFilter=n;var t=this.tableElement.data("BoldBIDashboardGrid");t.option("allowFiltering",n);t.option({scrollSettings:{height:this.gridItem.height()-this.getSummaryRowHeight()-this.gridItem.find(".e-columnheader").height()-this.getPagerHeight()-this.gridItem.find(".e-filterbar").height()}});this.getGridProperties().AllowPaging&&n?t.option("dataSource",this.getCustomDatamanager()):(this.refreshHeader(),this.refreshGrid())},t.prototype.updateEnableDataGrouping=function(n){var t;if(this.getGridProperties().EnableDataGrouping=n,this.getGridProperties().EnableDataGrouping===!1&&this.DataGroupInfo.FieldContainers.length>0)for(t=0;t<this.DataGroupInfo.FieldContainers.length;t++)this.DataGroupInfo.FieldContainers[t].FieldInfos.length>0&&(this.DataGroupInfo.FieldContainers[t].FieldInfos[t].SummaryType=SummaryType.NONE);else for(t=0;t<this.DataGroupInfo.FieldContainers.length;t++)this.DataGroupInfo.FieldContainers[t].FieldInfos.length>0&&(this.DataGroupInfo.FieldContainers[t].FieldInfos[t].SummaryType=SummaryType.SUM);this.dataConfigurationInstance.postDraggedFields()},t.prototype.UpdateLink=function(n){var i,t;if(this.widgetJson.UrlLink.EnableLink=n.EnableLink,this.widgetJson.UrlLink.EscapeSpecialCharacter=n.EscapeSpecialCharacter,this.widgetJson.UrlLink.EnableParameterEncryption=n.EnableParameterEncryption,this.widgetJson.UrlLink.LinkType=n.LinkType,this.widgetJson.UrlLink.GridUrlType=n.GridUrlType,n.EnableLink&&this.tableElement.addClass("e-dbrd-master-widget"),n.EnableLink||this.widgetJson.FilterSettings.ActAsMasterWidget||this.tableElement.removeClass("e-dbrd-master-widget"),n.GridUrlType==="Column")this.widgetJson.UrlLink.PassingParameters=[],this.widgetJson.UrlLink.UrlPath="",this.widgetJson.UrlLink.ColumnUrlDetails=this.UpdateColumnUrlDetails(n),this.UpdateColumnUrl();else{for(i=this.tableElement.data("BoldBIDashboardGrid").model.columns,t=0;t<i.length;t++)BoldBIDashboard.isNullOrUndefined(i[t].templateID)||(i[t].templateID="");this.widgetJson.UrlLink.ColumnUrlDetails=[];this.widgetJson.UrlLink.PassingParameters=n.PassingParameters;this.widgetJson.UrlLink.UrlPath=n.UrlPath}},t.prototype.UpdateHeaderForeground=function(n){var r=this.tableElement.data("BoldBIDashboardGrid"),u,i,t;if(!BoldBIDashboard.isNullOrUndefined(r))for(u=r.getHeaderTable(),i=u.find(".e-headercelldiv"),t=0;t<i.length;t++)i[t].style.color=BoldBIDashboard.isNullOrUndefined(n)?this.getGridProperties().NewHeaderSettings.Foreground.Color:n},t.prototype.UpdateHeaderBackground=function(n){var t=this.tableElement.data("BoldBIDashboardGrid"),i;BoldBIDashboard.isNullOrUndefined(t)||(i=t.getHeaderTable(),i.find(".e-columnheader")[0].style.background=BoldBIDashboard.isNullOrUndefined(n)?this.getGridProperties().NewHeaderSettings.Background.Color:n)},t.prototype.updatePrimaryBackground=function(n){this.getGridProperties().PoPSlaveSettings.PrimaryBackground=n;var t=this.tableElement.data("BoldBIDashboardGrid");t.model.rowDataBound=this.bbdesigner$.proxy(this.rowDataBoundProcess,this);t.option("enableAltRow",!this.getGridProperties().EnableAlternativeRowColor);t.option("enableAltRow",this.getGridProperties().EnableAlternativeRowColor)},t.prototype.setPropertyElement=function(n,t,i,r){this.propertyPanel.canUpdate=!1;var f=this.propertyPanel.getPropertyElement(this.getGridPropertyPanel(),n,t,BoldBIDashboard.isNullOrUndefined(r)?-1:r),u=this.bbdesigner$.extend(!0,{},f);u.categoryName=t;this.propertyPanel.updatePropertyValue(u,"Grid",i);this.propertyPanel.canUpdate=!0},t.prototype.updateGridInitialSelection=function(){var i=this.tableElement.data("BoldBIDashboardGrid"),f=this.widgetJson.SelectedFilterValues,h=i.model.rowSelected,n,u;if(i.model.rowSelected=null,!this.defaultData&&this.widgetJson.FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(f)&&f.length>0){var t=this.getSelectedItemsRowNumbers(i,f,this.currentData),r=-1,e=0,s=0,o=-1;for(n=0;n<t.length;n++){for(u=n+1;u<t.length;u++)t[n]===t[u]&&(r=t[n],e++);r=r===-1?t[n]:r;e>=s&&(s=e,o=r)}o!==-1&&i.selectRows(o);BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this)}else BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this),this.tableElement.BoldBIDashboardGrid("clearSelection");i.model.rowSelected=h},t.prototype.updateGridSize=function(n){var h,i,r,c,e,l,t,o,f;if(this.tableElement.css({width:this.gridItem.width(),height:this.gridItem.height()}),this.designerInstance.model.dashboardFromData.isWidgetSpecific){var a=this.controlContainer.height(),w=this.designerInstance.modules.Mode.designer.element.parent().height()-10-this.designerInstance.modules.Mode.designPanelTag.find(".bbi-dashboarddesigner-bannerPanel").height()==a,b=this.widgetHelper.getFirstWidgetHeight()==a;this.controlContainer.css({height:"auto"});this.tableElement.css({height:"100%"});var v=this.tableElement.height(),s=this.controlContainer.height(),u=this.designerInstance.modules.Mode.designer.element.parent().height()-10,k=v%u,y=Math.round(s/u)*10>0?Math.round(s/u)*10-10:Math.round(s/u)*10,d=u-k,p=v+d;this.controlContainer.css({height:w||b?p-this.designerInstance.modules.Mode.designPanelTag.find(".bbi-dashboarddesigner-bannerPanel").height()-this.designerInstance.modules.Mode.designPanelTag.find(".bbi-dbrd-applied-filter").height()+y:p+y})}for(h=this.tableElement.find(".e-table"),t=0;t<h.length;t++)h.css("width","100%");if(i=this.tableElement.data("BoldBIDashboardGrid"),!BoldBIDashboard.isNullOrUndefined(i)&&!BoldBIDashboard.isNullOrUndefined(n)&&!n&&this.getGridProperties().AllowFilter)for(r=JSON.parse(JSON.stringify(i.model.filterSettings.filteredColumns)),t=0;t<r.length;t++)this.tableElement.find("#"+r[t].field+"_filterBarcell").val(""),i.filterColumn(r[t].field,r[t].operator,"","and",r[t].matchcase);for(this.UpdateSummaryRowBackground(),this.UpdateSummaryRowFontSize(),this.addSummaryScroller(),this.updateSummaryRowVerticalLine(i),this.getGridProperties().ColumnAlignments.filter(function(n){return n.IsColumnWidthModified}).length>0&&!this.getGridProperties().FitContent&&(this.updateGridColumnWidth(this.getGridProperties().ColumnAlignments,i),i.setWidthToColumns()),BoldBIDashboard.isNullOrUndefined(i)||BoldBIDashboard.isNullOrUndefined(i.getRows())||(i.option({scrollSettings:{width:this.gridItem.width(),height:this.gridItem.height()-this.getSummaryRowHeight()-this.gridItem.find(".e-columnheader").height()-this.getPagerHeight()-this.gridItem.find(".e-filterbar").height()}}),this.refreshHeader()),c=this.tableElement.find(".e-progressbar"),e=0;e<c.length;e++)this.updateBarTemplateForGrid(c.eq(e),null,!0);if(this.isPresentImageSettings())for(l=i.getRows(),t=0;t<l.length;t++)for(o=this.bbdesigner$(l[t]).children(),f=0;f<o.length;f++)o.eq(f).children().length>0&&this.updateTextAndImageStyle(o.eq(f));this.updateGridFontSize()},t.prototype.refreshGrid=function(){var n=this.tableElement.data("BoldBIDashboardGrid");BoldBIDashboard.isNullOrUndefined(n)||n.option("dataSource",this.getGridDataObject());this.updateGridFontSize();this.updateHeaderVisibility(this.getGridProperties().ShowHeader);this.updateBorderVisibility(this.getGridProperties().ShowBorder)},t.prototype.refreshHeader=function(){var n=this.tableElement.data("BoldBIDashboardGrid"),t;!BoldBIDashboard.isNullOrUndefined(n._scrollObject)&&n._scrollObject._hScroll&&(t=BoldBIDashboard.isNullOrUndefined(n._scrollObject.scrollLeft())?0:n._scrollObject.scrollLeft(),n.getHeaderContent().find("div").first().scrollLeft(t))},t.prototype.gridItemDispose=function(){var n=this.tableElement.data("BoldBIDashboardGrid");BoldBIDashboard.isNullOrUndefined(n)||n.destroy();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Grid)},t.prototype.rowDataBoundProcess=function(n){for(var t,u,f=0,i=0;i<n.model.columns.length;i++)if(t=n.model.columns[i],f=!t.isKpiColumn&&t.dateFormat!==DateTimeFormat.None?f+1:f,t.isKpiColumn&&t.kpiinformation)this.setKPIcellDetails(t,n,i);else if(BoldBIDashboard.isNullOrUndefined(n.data[t.field+"color"])||t.field.includes("_secondary"))if(BoldBIDashboard.isNullOrUndefined(n.data[t.field+"_Bar"])||t.field.includes("_secondary"))if(!BoldBIDashboard.isNullOrUndefined(n.data[t.field])&&t.field.includes("_secondary")){var r=new MeasureFormatting,s=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(r.Prefix),this.DataGroupInfo.DataSourceName,!0),h=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(r.Suffix),this.DataGroupInfo.DataSourceName,!0),c=t.type!=="percentage"?BoldBIDashboard.DashboardUtil.formattedText(n.data[t.field],r.Culture,r.DecimalPoints,r.FormatType,r.DecimalSeparator,r.GroupSeparator,s,h,NumberFormat.Ones,!1,this.designer,r.EnableLakhsAndCroreRep):n.data[t.field];this.bbdesigner$(n.row).children().eq(i).html(c);this.bbdesigner$(n.row).children().eq(i).css({"background-color":this.getGridProperties().PoPSlaveSettings.SecondaryBackground});var a=n.row[0].rowIndex,l=JSON.parse(this.dataValues.data)[a],e=l[t.field.split("_")[0]],o=l[t.field];e===o?(u=this.bbdesigner$("<div>").addClass("bbi-grid-pop bbi-grid-pop-neutral"),u.append(this.bbdesigner$("<div>").addClass("img")),this.bbdesigner$(this.bbdesigner$(n.row).children().eq(i)[0]).append(u)):e>o?(u=this.bbdesigner$("<div>").addClass("bbi-grid-pop bbi-grid-pop-greenUp"),u.append(this.bbdesigner$("<div>").addClass("img")),this.bbdesigner$(this.bbdesigner$(n.row).children().eq(i)[0]).append(u)):e<o&&(u=this.bbdesigner$("<div>").addClass("bbi-grid-pop bbi-grid-pop-redDown"),u.append(this.bbdesigner$("<div>").addClass("img")),this.bbdesigner$(this.bbdesigner$(n.row).children().eq(i)[0]).append(u))}else if(!BoldBIDashboard.isNullOrUndefined(n.data[t.field])&&t.field.includes("_secondary"))this.bbdesigner$(n.row).children().eq(i).css({background:this.getGridProperties().PoPSlaveSettings.SecondaryBackground});else if(this.isActAsSlaveForAnyPoP&&t.IsMeasure&&t.headerText.includes("Primary")){var r=new MeasureFormatting,s=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(r.Prefix),this.DataGroupInfo.DataSourceName,!0),h=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(r.Suffix),this.DataGroupInfo.DataSourceName,!0),c=BoldBIDashboard.DashboardUtil.formattedText(n.data[t.field],r.Culture,r.DecimalPoints,r.FormatType,r.DecimalSeparator,r.GroupSeparator,s,h,NumberFormat.Ones,!1,this.designer,r.EnableLakhsAndCroreRep);this.bbdesigner$(n.row).children().eq(i).html(c);this.bbdesigner$(n.row).children().eq(i).css({background:this.getGridProperties().PoPSlaveSettings.PrimaryBackground})}else this.setValueCellDetails(t,n,i);else{if(isNaN(parseFloat(n.data[t.field]))){this.bbdesigner$(n.row).children().eq(i).html(n.data[t.field]);continue}this.setBarCellDetails(n,t,i)}else this.setColorCustomizationCellDetails(t,n,i)},t.prototype.setBarCellDetails=function(n,t,i){var e=n.data[t.field],r,f,h,u,c,o,s,l;t.clipMode="ellipsis";r=this.getProgressBarMinMaxValue(n,t.field,i);f=BoldBIDashboard.DashboardUtil.formattedText(n.data[t.field],t.MeasureFormat.Culture,t.MeasureFormat.DecimalPoints,DataValueFormat[t.MeasureFormat.FormatType],t.MeasureFormat.DecimalSeparator,t.MeasureFormat.GroupSeparator,t.MeasureFormat.Prefix,t.MeasureFormat.Suffix,NumberFormat[t.MeasureFormat.Unit],!0,this.designer,t.MeasureFormat.EnableLakhsAndCroreRep);f=r.disableValue?"":f;h=this.bbdesigner$(n.row).children().eq(i).parents("tbody").children().index(this.bbdesigner$(n.row).children().eq(i).parent());u=BoldBIDashboard.buildTag("div. bbi-dbrd-designer-hoverable","",{height:"32px",width:"auto"},{id:this.Name+"_"+t.field+"_gridbar_"+h});this.bbdesigner$(n.row).children().eq(i).html("").append(u);c=r.Min===0&&r.Max===0?"0":parseFloat(e).toFixed(2);u.BoldBIDashboardProgressBar({minValue:r.Min,maxValue:r.Max,value:c,text:f});this.upadateBarShapeStyle(u,r.barShape,parseFloat(e));o=u.attr("style");s=u.find(".e-progress").attr("style");parseFloat(e)>=0?(u.attr("style",o+"background:"+this.getBarBackgroundColor(r.positiveColor,"0.2")+" !important"),u.find(".e-progress").attr("style",s+"background:"+this.getBarBackgroundColor(r.positiveColor,"1")+" !important")):(u.attr("style",o+"background:"+this.getBarBackgroundColor(r.negativeColor,"0.2")+" !important"),u.find(".e-progress").attr("style",s+"background:"+this.getBarBackgroundColor(r.negativeColor,"1")+" !important"));l=BoldBIDashboard.isNullOrUndefined(r.textColor)?null:this.getBarBackgroundColor(r.textColor,"1");this.updateBarTemplateForGrid(u,l);this.setCellColorsBasedOnTheme(n,i)},t.prototype.upadateBarShapeStyle=function(n,t,i){var r=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(BarShapeType,t).toLowerCase(),u=i>=0?"e-progress-"+r+"-color":"e-progress-"+r+"-color-enableRTL";n.addClass(u);n.find(".e-progress").addClass(u)},t.prototype.getBarBackgroundColor=function(n,t){return n.substring(0,n.lastIndexOf(","))+","+t+")"},t.prototype.getProgressBarMinMaxValue=function(n,t,i){var s=n.data[t+"_Bar"],h=JSON.parse(s),r=h[t.toUpperCase()],e=new BarCustomization,o,f,u;if(this.isBarCustomizationUpdated(i))for(o=BoldBIDashboard.isNullOrUndefined(this.widgetHelper.getCurrentWidgetInstance())?this:this.widgetHelper.getCurrentWidgetInstance(),f=0;f<o.getGridProperties().ColorCustomizations.length;f++)if(u=o.getGridProperties().ColorCustomizations[f],t===u.SourceColorField.UniqueColumnName&&!BoldBIDashboard.isNullOrUndefined(u.BarCustomization)&&!BoldBIDashboard.isNullOrUndefined(r))return r.Min=u.BarCustomization.Minimum.IsEdited&&!BoldBIDashboard.isNullOrUndefined(u.BarCustomization.Minimum.Value)?u.BarCustomization.Minimum.Value:r.Min,r.Max=u.BarCustomization.Maximum.IsEdited&&!BoldBIDashboard.isNullOrUndefined(u.BarCustomization.Maximum.Value)?u.BarCustomization.Maximum.Value:r.Max,r.disableValue=u.BarCustomization.DisableValue,r.positiveColor=u.BarCustomization.PositiveColor.RgbColor,r.negativeColor=u.BarCustomization.NegativeColor.RgbColor,r.textColor=u.BarCustomization.BarTextColor.RgbColor,r.barShape=u.BarCustomization.BarShape,r;return r.positiveColor=e.PositiveColor.RgbColor,r.negativeColor=e.NegativeColor.RgbColor,r.disableValue=e.DisableValue,r.barShape=BarShapeType.Cylinder,r},t.prototype.setValueCellDetails=function(n,t,i){var s,e,o,h,c,f;if(BoldBIDashboard.isNullOrUndefined(n.templateID)||n.templateID===""){if(n.IsMeasure&&n.MeasureFormat&&t.data[n.field]!=="(Null)"){var l=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(n.MeasureFormat.Prefix),this.DataGroupInfo.DataSourceName,!0),a=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(n.MeasureFormat.Suffix),this.DataGroupInfo.DataSourceName,!0),v=BoldBIDashboard.DashboardUtil.formattedText(t.data[n.field],n.MeasureFormat.Culture,n.MeasureFormat.DecimalPoints,DataValueFormat[n.MeasureFormat.FormatType],n.MeasureFormat.DecimalSeparator,n.MeasureFormat.GroupSeparator,l,a,NumberFormat[n.MeasureFormat.Unit],!0,this.designer,n.MeasureFormat.EnableLakhsAndCroreRep);this.bbdesigner$(t.row).children().eq(i).html(v)}for(s=JSON.parse(this.dataValues.data),e=void 0,o=0;o<s.length;o++)if(!BoldBIDashboard.isNullOrUndefined(s[o][n.field+"color"])){h=JSON.parse(s[o][n.field+"color"]).ImageSettings;BoldBIDashboard.isNullOrUndefined(h)||(e=h.split(String.fromCharCode(127)));break}if(!BoldBIDashboard.isNullOrUndefined(e)&&e[2]!=="Icon Only"){var r=e[2].toLocaleLowerCase(),u=this.bbdesigner$(t.row).children().eq(i),y=u.html();u.html("");c=BoldBIDashboard.buildTag("div.e-rowcell-value",y,{float:r==="left"?"left":r==="right"?"right":"none",width:u.width()},{});f=BoldBIDashboard.buildTag("div.e-rowcell-image","",{height:u.height(),float:r==="left"?"left":r==="right"?"right":"none"},{});c.css({"text-align":this.getColumnTextAlign(n)});u.append(f).append(c);r==="left"?f.css({width:f.height(),"margin-right":"10px"}):r==="right"&&f.css({width:f.height(),"margin-left":"10px"});this.updateTextAndImageStyle(u)}}this.setCellColorsBasedOnTheme(t,i)},t.prototype.setCellColorsBasedOnTheme=function(n,t){if(this.bbdesigner$(n.row).children().eq(t).css({color:this.getGridProperties().GridValueSection.Foreground.IsEdited?this.getGridProperties().GridValueSection.Foreground.Color:this.designerInstance.modules.themeHelper.getGridDataTextColor(!1),background:this.getGridProperties().GridValueSection.Background.IsEdited?this.getGridProperties().GridValueSection.Background.Color:this.designerInstance.modules.themeHelper.getWidgetTileBackground(null)}),this.bbdesigner$(n.row).hasClass("e-alt_row")){var i=this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.view&&!this.getGridProperties().AlternativeRow.Background.IsEdited&&this.designerInstance.isDarkTypeTheme()?"#384055":!this.getGridProperties().AlternativeRow.Background.IsEdited&&(!this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme())?"var(--grid-widget-alternative-row-bg-color)":this.getGridProperties().AlternativeRow.Background.Color;this.bbdesigner$(n.row).children().eq(t).css({background:i,color:this.getGridProperties().AlternativeRow.Foreground.IsEdited?this.getGridProperties().AlternativeRow.Foreground.Color:this.designerInstance.modules.themeHelper.getGridDataTextColor(!0)})}},t.prototype.setColorCustomizationCellDetails=function(n,t,i){var s=!BoldBIDashboard.isNullOrUndefined(n.templateID)&&n.templateID!=="",k=t.data[n.field+"color"],r=JSON.parse(k),e=this.bbdesigner$(t.row).children().eq(i),o=null,y=e.html(),p,w,b;if(n.IsMeasure&&(p=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(n.MeasureFormat.Prefix),this.DataGroupInfo.DataSourceName),w=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(n.MeasureFormat.Suffix),this.DataGroupInfo.DataSourceName),o=BoldBIDashboard.DashboardUtil.formattedText(t.data[n.field],n.MeasureFormat.Culture,n.MeasureFormat.DecimalPoints,DataValueFormat[n.MeasureFormat.FormatType],n.MeasureFormat.DecimalSeparator,n.MeasureFormat.GroupSeparator,p,w,NumberFormat[n.MeasureFormat.Unit],!0,this.designer,n.MeasureFormat.EnableLakhsAndCroreRep),s||(y=o)),r.Color!==""){var h=r.IsStrikethrough?"line-through":"",c=r.IsUnderline?"underline":"",l=r.IsBold?"bold":"normal";!this.isBoldCustomizationApplied&&r.IsBold&&(this.isBoldCustomizationApplied=!0);var a=r.IsItalic?"italic":"normal",u="",f="";if(BoldBIDashboard.browserInfo().name==="msie"){var v=r.Color.replace("#",""),d=parseInt(v.substring(0,2),16),g=parseInt(v.substring(2,4),16),nt=parseInt(v.substring(4,6),16);u="rgba("+d+","+g+","+nt+","+.6+")"}else f=this.getGridProperties().GridValueSection.Foreground.IsEdited?this.getGridProperties().GridValueSection.Foreground.Color:this.designerInstance.modules.themeHelper.getGridDataTextColor(!1),u=this.getGridProperties().GridValueSection.Background.IsEdited||this.getGridProperties().GridValueSection.Background.IsEdited&&this.designerInstance.isDarkTypeTheme()?this.getGridProperties().GridValueSection.Background.Color:this.designerInstance.modules.themeHelper.getWidgetTileBackground(null),this.bbdesigner$(t.row).hasClass("e-alt_row")?(u=this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.view&&!this.getGridProperties().AlternativeRow.Background.IsEdited&&this.designerInstance.isDarkTypeTheme()?"#384055":this.getGridProperties().AlternativeRow.Background.Color,f=this.getGridProperties().AlternativeRow.Foreground.IsEdited?this.getGridProperties().AlternativeRow.Foreground.Color:this.designerInstance.modules.themeHelper.getGridDataTextColor(!0),BoldBIDashboard.isNullOrUndefined(r.Color)||BoldBIDashboard.isNullOrUndefined(r.TextColor)?!BoldBIDashboard.isNullOrUndefined(r.TextColor)&&BoldBIDashboard.isNullOrUndefined(r.Color)?f=r.TextColor:!BoldBIDashboard.isNullOrUndefined(r.Color)&&BoldBIDashboard.isNullOrUndefined(r.TextColor)&&(u=r.Color):(u=r.Color,f=r.TextColor)):BoldBIDashboard.isNullOrUndefined(r.Color)||BoldBIDashboard.isNullOrUndefined(r.TextColor)?!BoldBIDashboard.isNullOrUndefined(r.TextColor)&&BoldBIDashboard.isNullOrUndefined(r.Color)?f=r.TextColor:!BoldBIDashboard.isNullOrUndefined(r.Color)&&BoldBIDashboard.isNullOrUndefined(r.TextColor)&&(u=r.Color):(u=r.Color,f=r.TextColor);r.FormatType===ConditionalFormatType[ConditionalFormatType.Column]?BoldBIDashboard.isNullOrUndefined(r.ImageSettings)?(o=n.IsMeasure?o:t.data[n.field],e.css("cssText","text-align:"+this.getColumnTextAlign(n)+"; color:"+f+"!important; background-color:"+u+" !important; text-decoration: "+h+" "+c+"; font-style:"+a+";font-weight: "+l+";"),s&&e.children().length>0?(e.children().css("color",f),e.children().html(o)):e.html(o)):(e.css("cssText","background-color:"+u+" !important; text-align: left;"),b={TextAlign:this.getColumnTextAlign(n),TextColor:f,TextDecoration:h+" "+c,FontStyle:a,FontWeight:l,CellHtmlText:y,CellValue:n.IsMeasure?o:t.data[n.field]},e.html(""),this.applyImageIconToGridColumn(e,r.ImageSettings,b,s)):this.bbdesigner$(t.row).css({color:f,"background-color":u,"text-decoration":h+" "+c,"font-style":a,"font-weight":l})}},t.prototype.setKPIcellDetails=function(n,t,i){var o=!BoldBIDashboard.isNullOrUndefined(n.templateID)&&n.templateID!=="",r={},s=KpiCalculationType[n.kpiinformation.KpiCalculationType],f,u,e;this.setKPIcellBackground(n,s,t,r);this.setKPICellRowValue(s,r,t,n,100);f=n.kpiinformation.SetBackground?this.bbdesigner$("<div>").addClass("e-grid-delta-background e-grid-delta-background-"+r.css):this.bbdesigner$("<div>").addClass("e-grid-delta e-grid-delta-"+r.css);f.append(this.bbdesigner$("<div>").html(r.value).addClass("value"),this.bbdesigner$("<div>").addClass("img"));u=BoldBIDashboard.buildTag("a","",{},{});o&&this.bbdesigner$(t.row).children().eq(i).children("a").length>0&&(e=this.bbdesigner$(t.row).children().eq(i).children("a:first"),u.attr("columnName",e.attr("columnname")),u.attr("target",e.attr("target")),u.append(f),u.css("display","block"));this.bbdesigner$(t.row).children().eq(i).html("");this.bbdesigner$(this.bbdesigner$(t.row).children().eq(i)[0]).append(o?u:f);n.kpiinformation.SetBackground?this.bbdesigner$(t.row).children().eq(i).css("cssText","background-color :"+r.backgroundcolor+"!important;"):this.setCellColorsBasedOnTheme(t,i);this.bbdesigner$(t.row).children().eq(i).css("text-align",this.getColumnTextAlign(n))},t.prototype.setKPIcellBackground=function(n,t,i,r){var f=IndicationType[n.kpiinformation.Indication]===IndicationType.GreaterIsGood,u,e,o;switch(t){case KpiCalculationType.ActualValue:case KpiCalculationType.PercentageVariation:case KpiCalculationType.PercentageOfTarget:e=i.data[n.kpiinformation.ActualColumn.UniqueColumnName];o=i.data[n.kpiinformation.TargetColumn.UniqueColumnName];u=e-o;break;case KpiCalculationType.AbsoluteVariation:case KpiCalculationType.ValueAndPercentage:u=i.data[n.field]}r.css=this.ComputeCssforKPI(u,n.kpiinformation.SetBackground,f);r.backgroundcolor=n.kpiinformation.SetBackground?this.ComputeBackgroundforKPI(i.data[n.field],f):""},t.prototype.setKPICellRowValue=function(n,t,i,r,u){var e,o,s,h,c,l,a,v,y,p;switch(n){case KpiCalculationType.AbsoluteVariation:case KpiCalculationType.ActualValue:e=parseFloat(i.data[r.field]);o=r.MeasureFormat.Culture;s=r.MeasureFormat.DecimalPoints;h=DataValueFormat[r.MeasureFormat.FormatType];c=r.MeasureFormat.DecimalSeparator;l=r.MeasureFormat.GroupSeparator;a=r.MeasureFormat.Prefix;v=r.MeasureFormat.Suffix;y=NumberFormat[r.MeasureFormat.Unit];break;case KpiCalculationType.PercentageOfTarget:case KpiCalculationType.PercentageVariation:e=Math.abs(i.data[r.field]/u);o=r.MeasureFormat.Culture;s=r.MeasureFormat.DecimalPoints;h=DataValueFormat[DataValueFormat.Percentage];c=r.MeasureFormat.DecimalPointsr;l=r.MeasureFormat.GroupSeparator;a=r.MeasureFormat.Prefix;v=r.MeasureFormat.Suffix;y=NumberFormat[r.MeasureFormat.Unit];break;case KpiCalculationType.ValueAndPercentage:e=Math.abs(i.data[r.field])/u;o=r.MeasureFormat.Culture;s=r.MeasureFormat.DecimalPoints;h=DataValueFormat[DataValueFormat.Percentage];c=0;l="";a="";v="";y=NumberFormat.Ones}t.value=BoldBIDashboard.DashboardUtil.formattedText(e,o,s,h,c,l,a,v,y,!0,this.designer,r.MeasureFormat.EnableLakhsAndCroreRep);p=-1;switch(n){case KpiCalculationType.AbsoluteVariation:t.value=t.css.toLowerCase().indexOf("up")!==p?"+"+t.value:t.value;break;case KpiCalculationType.ValueAndPercentage:var w=i.data[r.kpiinformation.ActualColumn.UniqueColumnName],b=i.data[r.kpiinformation.TargetColumn.UniqueColumnName],f=BoldBIDashboard.DashboardUtil.formattedText(w-b,r.MeasureFormat.Culture,r.MeasureFormat.DecimalPoints,DataValueFormat[r.MeasureFormat.FormatType],r.MeasureFormat.DecimalSeparator,r.MeasureFormat.GroupSeparator,r.MeasureFormat.Prefix,r.MeasureFormat.Suffix,NumberFormat[r.MeasureFormat.Unit],!0,this.designer,r.MeasureFormat.EnableLakhsAndCroreRep);f=t.css.toLowerCase().indexOf("up")!==p?"+"+f:f;t.value=f===""?f:f+"("+t.value+")"}},t.prototype.applyImageIconToGridColumn=function(n,t,i,r){var v=String.fromCharCode(127),o=t.split(v),s=o[0],h=o[1],e=o[2],y=o[3],l="",f,u,c,a;s==="Embedded"&&(l=BoldBIDashboard.Dashboard.Resource.getImage(h));f=BoldBIDashboard.buildTag("div.e-rowcell-value",i.CellHtmlText,{float:e.toLocaleLowerCase()==="left"?"left":e.toLocaleLowerCase()==="right"?"right":"none",width:n.width()},{});u=BoldBIDashboard.buildTag("div.e-rowcell-image","",{color:y,height:n.height(),width:n.height(),float:e.toLocaleLowerCase()==="left"?"left":e.toLocaleLowerCase()==="right"?"right":"none"},{});f.css("cssText","color:"+i.TextColor+"!important; text-decoration: "+i.TextDecoration+"; font-style:"+i.FontStyle+";font-weight: "+i.FontWeight+"; text-align: "+i.TextAlign+";");r&&f.children().length>0&&f.children().css("color",i.TextColor);switch(e){case"Left":n.append(u).append(f);u.css({"margin-right":"9px"});break;case"Right":n.append(u).append(f);u.css({"margin-left":"9px"});break;case"Icon Only":r?(c=this.bbdesigner$(this.bbdesigner$.parseHTML(i.CellHtmlText)),c.html("").css("text-decoration","none"),n.append(c.append(u))):n.append(u);n.append(u);u.attr({title:i.CellValue}).css({width:"auto","text-align":i.TextAlign})}s.toLowerCase()==="default"?u.addClass("e-color-custom-icon "+this.designerInstance.modules.util.getIconClassName(h)).css({"font-size":u.height(),"font-weight":i.FontWeight}):(a=BoldBIDashboard.buildTag("img.e-rowcell-image-vertical-align","",{},{src:s==="Embedded"?l:h}),u.css("position","relative"),u.append(a));this.updateTextAndImageStyle(n)},t.prototype.ComputeCssforKPI=function(n,t,i){var u=0,r=parseFloat(n);return(r.toString()==="Infinity"&&(r=100),isNaN(r))?"":r>u?t?"up":i?"greenUp":"redUp":r===u?"warning":t?"down":i?"redDown":"greenDown"},t.prototype.ComputeBackgroundforKPI=function(n,t){var r=0,u="#34B67A",f="#E57368",i=parseFloat(n);return(i.toString()==="Infinity"&&(i=100),isNaN(i))?"":i>r?t?u:f:i===r?"#FBCB43":t?f:u},t.prototype.validateKPIDataValueSet=function(){for(var r,u,i=[],n=this.getKPIDataValueSet(),t=0;t<n.length;t++)r=BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardUtil.getFieldBasedonUniqueColumnName(n[0].KPIColumnInfo.ActualColumn.UniqueColumnName,this.DataGroupInfo))||BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardUtil.getFieldBasedonUniqueColumnName(n[0].KPIColumnInfo.TargetColumn.UniqueColumnName,this.DataGroupInfo)),r&&i.push(n[t].UniqueColumnName);for(u=function(t){var r=n.filter(function(n){return n.UniqueColumnName!==i[t]});n=r},t=0;t<i.length;t++)u(t);this.setKPIDataValueSet(n);BoldBIDashboard.isNullOrUndefined(this.propertyPanel.propertyPanelContainer.find("#"+this.designerId+"_kpi_gridCol").data("BoldBIDashboardGrid"))||this.updateKPIColumnsGrid()},t.prototype.getKPIDataValueSet=function(){var n=this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name==="KPIColumn"})[0];return BoldBIDashboard.isNullOrUndefined(n)?[]:n.FieldInfos},t.prototype.getKPIGridDataSource=function(){for(var n,r=[],i=this.getKPIDataValueSet(),t=0;t<i.length;t++)n={},n.Name=i[t].Name,n.ActualColumnName=this.DataColumnBindings[i[t].KPIColumnInfo.ActualColumn.UniqueColumnName],n.TargetColumnName=this.DataColumnBindings[i[t].KPIColumnInfo.TargetColumn.UniqueColumnName],n.DisplayExpression="",n.KpiCalculationType=i[t].KPIColumnInfo.KpiCalculationType,r.push(n);return r},t.prototype.setKPIDataValueSet=function(n){for(var t=0;t<this.DataGroupInfo.FieldContainers.length;t++)this.DataGroupInfo.FieldContainers[t].Name==="KPIColumn"&&(this.DataGroupInfo.FieldContainers[t].FieldInfos=n)},t.prototype.updateKpiColumn=function(){for(var n,t,i,r,u,f,e=0;e<this.getKPIColumnContainer().FieldInfos.length;e++)for(n=this.getKPIColumnContainer().FieldInfos[e],t=0;t<this.DataGroupInfo.FieldContainers.length;t++){for(i=0;i<this.DataGroupInfo.FieldContainers[t].FieldInfos.length;i++)this.DataGroupInfo.FieldContainers[t].FieldInfos[i].UniqueColumnName===n.KPIColumnInfo.ActualColumn.UniqueColumnName&&(u=this.DataGroupInfo.FieldContainers[t].FieldInfos[i].DisplayName,n.KPIColumnInfo.ActualColumn.CaptionName=u),this.DataGroupInfo.FieldContainers[t].FieldInfos[i].UniqueColumnName===n.KPIColumnInfo.TargetColumn.UniqueColumnName&&(f=this.DataGroupInfo.FieldContainers[t].FieldInfos[i].DisplayName,n.KPIColumnInfo.TargetColumn.CaptionName=f);r=n.KPIColumnInfo.IsDisplayColumnNameEdited?n.KPIColumnInfo.DisplayColumnName:u+this.locale.kpi.versus+f;n.KPIColumnInfo.DisplayColumnName=BoldBIDashboard.DashboardUtil.encodeText(r);n.Name=r;n.DisplayName=r;n.KPIColumnInfo.DisplayExpression=this.getKpiExpression(this.columnBinding,n.KPIColumnInfo);n.IsDisplayNameEdited=BoldBIDashboard.isNullOrUndefined(n.KPIColumnInfo.IsDisplayColumnNameEdited)?!1:n.KPIColumnInfo.IsDisplayColumnNameEdited}},t.prototype.getKPIVisibility=function(){var i=!1,n,t;if(!BoldBIDashboard.isNullOrUndefined(this.getColumnContainer()))for(n=0;n<this.getColumnContainer().FieldInfos.length;n++)this.getColumnContainer().FieldInfos[n].FieldType===FieldType.Measures&&this.getColumnContainer().FieldInfos[n].SummaryType!==SummaryType.NONE&&(i=!0);if(!BoldBIDashboard.isNullOrUndefined(this.getHiddenColumnContainer()))for(t=0;t<this.getHiddenColumnContainer().FieldInfos.length;t++)this.getHiddenColumnContainer().FieldInfos[t].FieldType===FieldType.Measures&&this.getHiddenColumnContainer().FieldInfos[t].SummaryType!==SummaryType.NONE&&(i=!0);return i},t.prototype.generateColumns=function(){var e=this,f,u,r,i;if(this.gridColumns=[],!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length>0){var t=this.getColumnContainer().FieldInfos,o=function(i){var u={},o=n.getGridProperties().PoPSlaveSettings.PoPColumnSettings.filter(function(n){return n.UniqueColumnName===t[i].UniqueColumnName}).length>0&&n.getGridProperties().PoPSlaveSettings.PoPColumnSettings.filter(function(n){return n.UniqueColumnName===t[i].UniqueColumnName})[0].IsSlaveForPop;if(u.IsMeasure=t[i].FieldType===FieldType.Measures,n.getGridColumnBasedOnField(u,t[i],o),u.type=t[i].FieldType===FieldType.Measures?"Number":t[i].FieldType===FieldType.DateTime?"date":"string",u.dateFormat=t[i].DateTimeFormat,u.disableHtmlEncode=!1,u.IsMeasure=t[i].FieldType===FieldType.Measures,u.filterBarTemplate={create:function(){return"<input type='search'>"},write:n.bbdesigner$.proxy(n.writeFilterBar,n),read:n.bbdesigner$.proxy(n.readFilterBar,n)},n.gridColumns.push(u),n.isActAsSlaveForAnyPoP&&n.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&t[i].FieldActualType==="bbi-designer-dataset-number"&&n.gridColumns.indexOf(function(n){return n.field===e.DataColumnBindings[t[i].UniqueColumnName+"_secondary"]})===-1&&n.getGridProperties().PoPSlaveSettings.PoPColumnSettings.filter(function(n){return n.UniqueColumnName===t[i].UniqueColumnName}).length>0&&n.getGridProperties().PoPSlaveSettings.PoPColumnSettings.filter(function(n){return n.UniqueColumnName===t[i].UniqueColumnName})[0].IsSlaveForPop){var f=n.getGridProperties().PoPSlaveSettings.PoPColumnSettings.filter(function(n){return n.UniqueColumnName===t[i].UniqueColumnName}),s=f[0].PopType==="Percent of Difference"||f[0].PopType==="Percent of Change"||f[0].PopType==="Percent of Target",r={};r.field=t[i].UniqueColumnName+"_secondary";r.headerText=BoldBIDashboard.DashboardUtil.encodeText(t[i].DisplayName)+"-Secondary";r.headerTextAlign=BoldBIDashboard.TextAlign.Left;r.textAlign=BoldBIDashboard.TextAlign.Right;r.width=100;r.tooltip=n.getGridProperties().ShowTooltip?"{{:value}}":null;r.clipMode="ellipsiswithtooltip";r.fieldName=t[i].Name;r.type=s?"percentage":"number";r.headerTextAlign=BoldBIDashboard.TextAlign.Left;r.dateFormat=t[i].DateTimeFormat;r.disableHtmlEncode=!1;r.filterBarTemplate={create:function(){return"<input type='search'>"},write:n.bbdesigner$.proxy(n.writeFilterBar,n),read:n.bbdesigner$.proxy(n.readFilterBar,n)};n.gridColumns.push(r)}},n=this;for(f=0;f<t.length;f++)o(f);for(u=this.getKPIDataValueSet(),r=0;r<u.length;r++)i={},i.type=u[r].KPIColumnInfo.KpiCalculationType!==KpiCalculationType.ValueAndPercentage?"Number":"string",i.IsMeasure=i.type==="Number",this.getGridColumnBasedOnField(i,u[r],!1),i.isKpiColumn=!0,i.kpiinformation=u[r].KPIColumnInfo,i.filterBarTemplate={create:function(){return"<input type='search'>"},write:this.bbdesigner$.proxy(this.writeFilterBar,this),read:this.bbdesigner$.proxy(this.readFilterBar,this)},this.gridColumns.push(i)}this.updateColumnCustObject(this.getGridColumnAlignment(this))},t.prototype.getGridColumnBasedOnField=function(n,t,i){n.field=t.UniqueColumnName;n.headerText=i?BoldBIDashboard.DashboardUtil.encodeText(t.DisplayName)+"-Primary":BoldBIDashboard.DashboardUtil.encodeText(t.DisplayName);n.headerTextAlign=BoldBIDashboard.TextAlign.Left;n.textAlign=n.IsMeasure?BoldBIDashboard.TextAlign.Right:BoldBIDashboard.TextAlign.Left;n.MeasureFormat=n.IsMeasure?t.MeasureFormatting:null;n.width=100;n.tooltip=this.getGridProperties().ShowTooltip?"{{:value}}":null;n.clipMode="ellipsiswithtooltip";n.fieldName=t.Name},t.prototype.writeFilterBar=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)){n.element.after("<span class='e-cancel e-icon e-hide'><\/span>");var t=n.element.parents(".e-grid"),i="#"+n.element.attr("id");t.off("keyup",i,this.bbdesigner$.proxy(n.column.filterBarTemplate.read,this,n));t.on("keyup",i,this.bbdesigner$.proxy(n.column.filterBarTemplate.read,this,n))}},t.prototype.readFilterBar=function(n){if(!BoldBIDashboard.isNullOrUndefined(n.column.filterBarTemplate.read.arguments)&&n.column.filterBarTemplate.read.arguments[1].keyCode===27){if(n.element.val()==="")return;n.element.val("")}if(this.filterSearchOlderText!==n.element.val()||this.filterSearchOlderColumn!==n.column.field){this.filterSearchOlderText=n.element.val();this.filterSearchOlderColumn=n.column.field;var t=BoldBIDashboard.isNullOrUndefined(n)?0:1500,i=this;BoldBIDashboard.isNullOrUndefined(this.filterRequestTimer)||clearTimeout(this.filterRequestTimer);this.filterRequestTimer=setTimeout(function(){var t=n.element.val(),r="contains",u;t.indexOf("*")===-1||n.column.IsMeasure||(t.match(/[*]/g).length===2?(r="contains",t=t.replace(/[*]/g,"")):t.lastIndexOf("*")===t.length-1?(r="startswith",t=t.replace(/[*]/g,"")):(r="endswith",t=t.replace(/[*]/g,"")));t.length>=2&&n.column.IsMeasure&&(t[0]===">"&&t[1]==="="?(r="greaterthanorequal",t=t.replace(/[>=]/g,"")):t[0]==="<"&&t[1]==="="&&(r="lessthanorequal",t=t.replace(/[<=]/g,"")));t.length>0&&n.column.IsMeasure&&(t[0]===">"?(r="greaterthan",t=t.replace(/[>]/g,"")):t[0]==="<"&&(r="lessthan",t=t.replace(/[<]/g,"")));t.length>0&&t[0]==='"'&&t[t.length-1]==='"'&&(r="equal",t=t.replace(/["]/g,""));n.column.IsMeasure&&n.column.MeasureFormat.FormatType==="Percentage"&&(t=(parseFloat(t)/100).toString());u=i.tableElement.data("BoldBIDashboardGrid");BoldBIDashboard.isNullOrUndefined(u)||u.filterColumn(n.column.field,r,t,"and",n.column.IsMeasure)},t)}},t.prototype.getKpiExpression=function(n,t){var i=this.designerInstance.modules.kPIWindow;return i.getExpression(t.KpiCalculationType,n[t.ActualColumn.UniqueColumnName],n[t.TargetColumn.UniqueColumnName])},t.prototype.getExpression=function(n,t,i){switch(KpiCalculationType[n]){case KpiCalculationType.AbsoluteVariation:return"["+t+" - "+i+"]";case KpiCalculationType.ActualValue:return"["+t+"]";case KpiCalculationType.PercentageOfTarget:return"[[("+t+")/("+i+")]* 100]";case KpiCalculationType.PercentageVariation:return"[([("+t+")/("+i+")]*100)-100]";case KpiCalculationType.ValueAndPercentage:return"("+t+")-("+i+")([([("+t+")/("+i+" )]*100)-100] )";default:return""}},t.prototype.getSelectedItemsRowNumbers=function(n,t,i){for(var u,h,s=[],c=[],r=0;r<t.length;r++)if(s=t[r].InitialDateFilter&&t[r].InitialDateFilter.DateFilterList.length>0?t[r].InitialDateFilter.DateFilterList:t[r].InitialDimensionFilter.Text,s.length>0)for(u=0;u<i.length;u++)for(h=0;h<s.length;h++){var f=-1,e=i[u][t[r].UniqueColumnName],o=s[h].toString();if(e&&o)if(Date.parse(e).toString()==="NaN"&&Date.parse(o).toString()==="NaN"&&e===o)f=(n.model.pageSettings.currentPage-1)*this.VirtualScrollSettings.PageSize+u;else if(Date.parse(o).toString()!=="NaN"&&Date.parse(e).toString()!=="NaN"&&Date.parse(o)===Date.parse(e))f=(n.model.pageSettings.currentPage-1)*this.VirtualScrollSettings.PageSize+u;else{f=-1;break}f!==-1&&c.push(f)}return c},t.prototype.getGridLineType=function(){return(this.getGridProperties().HorizontalGridLine&&this.getGridProperties().VerticalGridLine?BoldBIDashboard.Grid.GridLines.Both:this.getGridProperties().HorizontalGridLine?BoldBIDashboard.Grid.GridLines.Horizontal:this.getGridProperties().VerticalGridLine?BoldBIDashboard.Grid.GridLines.Vertical:BoldBIDashboard.Grid.GridLines.None).toString()},t.prototype.gridRowSelected=function(t){var u;if(this.bbdesigner$(t.target).hasClass("e-linking-hyperlink"))u=this.getLinkingData(t),n.prototype.performLinking.call(this,u);else{var f=[t.pageX,t.pageY],i=[],r=this.widgetJson.UrlLink.GridUrlType;this.widgetJson.FilterSettings.ActAsMasterWidget&&i.push(WidgetAction.Filter);this.widgetJson.UrlLink&&this.widgetJson.UrlLink.EnableLink&&(r===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(UrlLinkType,UrlLinkType.Row)||r===UrlLinkType.Row)&&i.push(WidgetAction.Linking);this.widgetJson.ContainerSettings.ViewData&&i.push(WidgetAction.ViewData);BoldBIDashboard.Dashboard.WidgetHelper.createWidgetActionContextMenu(this.designerInstance,this,this.Name,i,t,f)}this.widgetJson.FilterSettings.ActAsMasterWidget||!this.bbdesigner$(t.target).hasClass("e-selectionbackground e-active")||this.widgetJson.UrlLink||this.widgetJson.UrlLink.EnableLink||this.bbdesigner$(t.target).parent().children().removeClass("e-selectionbackground e-active")},t.prototype.performSelectedWidgetAction=function(t,i,r,u){var f,e,o;switch(t){case WidgetAction.Filter.toString():i.isCurrentMaster=!0;this.processFilterInfo(r);break;case WidgetAction.Linking.toString():u.model.mode!==BoldBIDashboard.Designer.mode.design&&(f=this.getLinkingData(r),n.prototype.performLinking.call(this,f));break;case WidgetAction.ViewData.toString():i.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(e=u.modules.viewDataDialog,o=this.showSelectItemsInViewData(r),e.showViewDataPopup(i,!1,o,!0))}},t.prototype.showSelectItemsInViewData=function(n){var u=[],r,i;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.currentTarget.data))for(r=this.DataGroupInfo.FieldContainers[0].FieldInfos,i=0;i<r.length;i++)BoldBIDashboard.isNullOrUndefined(n.currentTarget.data[r[i].UniqueColumnName])||r[i].FieldActualType!=="bbi-designer-dataset-datetime"&&r[i].FieldActualType!=="bbi-designer-dataset-string"&&r[i].FieldActualType!=="bbi-designer-dataset-time"&&r[i].FieldActualType!=="bbi-designer-dataset-number"||u.push({selectedItem:t.hasCustomDate(r[i])?n.currentTarget.data[r[i].UniqueColumnName+"_CustomFormat"]:n.currentTarget.data[r[i].UniqueColumnName],columnId:r[i].Id,UniqueColumnName:r[i].UniqueColumnName});return u},t.prototype.getLinkingData=function(n){var h=this,t={isEnabled:!1,parameterDetails:[],url:"",urlLinkInfo:[]},e=this.designerInstance.modules.util.getSourceData(this.DataGroupInfo,!1,!1,!0),u,r,o,s,i,f;if(!this.widgetJson.UrlLink.EnableLink||BoldBIDashboard.isNullOrUndefined(this.widgetJson.UrlLink.GridUrlType)||this.widgetJson.UrlLink.GridUrlType.toString()!==UrlLinkType[UrlLinkType.Row]||BoldBIDashboard.isNullOrUndefined(this.widgetJson.UrlLink.UrlPath)||this.widgetJson.UrlLink.UrlPath===""){if(this.widgetJson.UrlLink.EnableLink&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.UrlLink.GridUrlType)&&this.widgetJson.UrlLink.GridUrlType.toString()===UrlLinkType[UrlLinkType.Column]&&(this.bbdesigner$(n.target).hasClass("e-linking-hyperlink")||this.bbdesigner$(n.target).hasClass("img"))&&this.widgetJson.UrlLink.ColumnUrlDetails.length>0)for(t.isEnabled=!0,s=function(r){var f,o,u,c;if(i.widgetJson.UrlLink.ColumnUrlDetails[r].UniqueColumnName===i.bbdesigner$(n.target).attr("columnname")||i.bbdesigner$(n.target).hasClass("img")&&i.widgetJson.UrlLink.ColumnUrlDetails[r].UniqueColumnName===i.bbdesigner$(n.target).closest("a").attr("columnName")){t.url=i.widgetJson.UrlLink.ColumnUrlDetails[r].UrlLink;var l=new RegExp(/{{:(.*?)}}/igm),s=i.widgetJson.UrlLink.ColumnUrlDetails[r].UrlLink.match(l),h=[];if(!BoldBIDashboard.isNullOrUndefined(s)){for(f=0;f<s.length;f++)h.push(s[f].replace("{{:","").replace("}}",""));for(o=e.filter(function(n){return h.indexOf(n.Value)!==-1}),u=0;u<o.length;u++)c=n.currentTarget.data[o[u].Id],t.parameterDetails.push({parameter:o[u].Value,value:c})}}},i=this,f=0;f<this.widgetJson.UrlLink.ColumnUrlDetails.length;f++)s(f)}else for(u=e.filter(function(n){return h.widgetJson.UrlLink.PassingParameters.indexOf(n.Value)!==-1}),t.url=this.widgetJson.UrlLink.UrlPath,t.isEnabled=!0,r=0;r<u.length;r++)o=n.currentTarget.data[u[r].Id],t.parameterDetails.push({parameter:u[r].Value,value:o});return t.urlLinkInfo=this.widgetJson.UrlLink,t},t.prototype.processFilterInfo=function(t){var r,u,i,f,e;if(!BoldBIDashboard.isNullOrUndefined(t)){if(this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;for(this.widgetJson.SelectedFilterValues=[],r=[],u=this.getColumnContainer().FieldInfos.concat(this.getHiddenColumnContainer().FieldInfos),i=0;i<u.length;i++)f=u[i],f.FieldActualType!=="bbi-designer-dataset-number"&&r.push(f);e=t.currentTarget.data;n.prototype.performInteraction.call(this,this,r,e)}},t.prototype.processFilterInformation=function(n){var o=n.filters,s=this.DataGroupInfo.FieldContainers,i=this.getColumnForWidgetFilterAPI(o,s),r=i[0],f=i[1],e=i[2],h=i[3],c=i[4],u,t;if(e.length>0)return r=[],f={},console.error("Given column name(s) ["+e+"] were not found in "+this.widgetJson.ContainerSettings.Title),!1;if(h)return console.error("Measure type column not supported for filtering"),!1;if(c&&(console.error("ColumnName should not be empty for API filtering"),r.length===0))return!1;if(r.length===0&&e.length===0)for(u=this.getColumnContainer().FieldInfos.concat(this.getHiddenColumnContainer().FieldInfos),t=0;t<u.length;t++)if(u[t].FieldActualType!=="bbi-designer-dataset-number"){r.push(u[t]);f[u[t].UniqueColumnName]=o[0].values[0];break}return this.widgetJson.SelectedFilterValues=[],this.masterFilterWindowInstance.configureSelectedFilterInfo(this.getJson(),r,f),!0},t.prototype.getColumnForWidgetFilterAPI=function(n,t){for(var o,f,i,r,a,s=[],h={},c=[],e=!1,l=!1,u=0;u<n.length;u++)if(o=!1,!BoldBIDashboard.isNullOrUndefined(n[u].columnName))if(n[u].columnName!==""){for(f=0;f<t.length;f++){if(i=t[f].FieldInfos,!BoldBIDashboard.isNullOrUndefined(i))for(r=0;r<i.length;r++)if(a=i[r].IsDisplayNameEdited?i[r].DisplayName:i[r].Name,a.toLowerCase()===n[u].columnName.toLowerCase())if(o=!0,i[r].FieldActualType!=="bbi-designer-dataset-number"){if(n[u].values.length>0){s.push(i[r]);h[i[r].UniqueColumnName]=n[u].values[0];break}}else{e=!0;break}if(e)break}o||c.push(n[u].columnName)}else l=!0;return[s,h,c,e,l]},t.prototype.actionBegin=function(n){this.isThemingInProcess&&this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer);n.requestType==="filtering"&&(n.currentFilterObject[0].value=n.currentFilterObject[0].value.trimRight());n.requestType!=="paging"||this.getGridProperties().DisableVirtualization||(this.isPagingInteraction=!0);BoldBIDashboard.isNullOrUndefined(this.getGridProperties().NewHeaderSettings)||BoldBIDashboard.isNullOrUndefined(this.getGridProperties().NewHeaderSettings.Foreground.Color)||BoldBIDashboard.isNullOrUndefined(this.getGridProperties().NewHeaderSettings.Background.Color)||this.applyGridHeaderTheme();this.UpdateColumnUrl()},t.prototype.actionComplete=function(n){var t,i;this.isThemingInProcess&&(this.designerInstance.designerPanel.hideLoadingIndicator(this.controlContainer),this.isThemingInProcess=!1);t=this.tableElement.data("BoldBIDashboardGrid");this.UpdateSummaryRowBackground();this.UpdateSummaryRowFontSize();this.addSummaryScroller();BoldBIDashboard.isNullOrUndefined(t)||(n.requestType==="refresh"&&this.updateDataSource(t,this.hasMoreRecords&&!this.getGridProperties().AllowPaging),(n.requestType==="virtualscroll"||n.requestType==="sorting")&&(BoldBIDashboard.isNullOrUndefined(t.getContent().data("BoldBIDashboardScroller"))||t.getScrollObject().refresh(),n.requestType==="sorting"&&t._scrollObject.scrollY(0)),this.updateGridInitialSelection(),(this.designerInstance.isViewMode()||this.designerInstance.isEnableCustomDashboardTheme)&&this.applyFilterBarTheme(this.designerInstance.isDarkTypeTheme()),this.updatedataintiated&&this.hideGridLoadingIndicator());!BoldBIDashboard.isNullOrUndefined(t)&&t.model.allowPaging&&(this.getGridProperties().DisableVirtualization||(t.model.pageSettings.totalRecordsCount=this.totalRecordsCount),i=this.tableElement.find(".e-pagercontainer"),i.parent().css("height","26px"),i.parent().css("padding","10px 0px 11px 0px"),i.parent().css("font-size","12px"),i.find("input").val(t.model.pageSettings.currentPage),this.tableElement.find(".totalPages").find(".emptyText").text(this.locale.propertyPanel.pageSettings.pagerTemplateOfText),this.tableElement.find(".totalPages").find(".pageCount").text(t.model.pageSettings.totalPages+" "+this.locale.propertyPanel.pageSettings.pagerTemplateOfText),this.tableElement.find(".totalPages").find(".rowCount").text(" ("+t.model.pageSettings.totalRecordsCount+" "+this.locale.propertyPanel.pageSettings.pagerTemplateItemsText+")"),i.find("input").val("1"),i.find("input").bind("keydown",this.bbdesigner$.proxy(this.onTextBoxKeydown,this)),t.model.pageSettings.currentPage===t.model.pageSettings.totalPages?this.tableElement.find(".e-nextpage").addClass("e-nextpagedisabled").removeClass("e-nextpage"):this.tableElement.find(".e-nextpagedisabled").addClass("e-nextpage").removeClass("e-nextpagedisabled"),t.model.pageSettings.currentPage===1?this.tableElement.find(".e-prevpage").addClass("e-prevpagedisabled e-disable").removeClass("e-prevpage"):this.tableElement.find(".e-prevpagedisabled").addClass("e-prevpage").removeClass("e-prevpagedisabled e-disable"),n.requestType==="paging"&&i.find("input").val(t.model.pageSettings.currentPage));this.updateHeaderVisibility(this.getGridProperties().ShowHeader);this.updateGridFontSize();this.IsRendered=!0;this.updateSummaryRowVerticalLine(t)},t.prototype.onTextBoxKeydown=function(n){var i=this.tableElement.data("BoldBIDashboardGrid"),r=this.tableElement.find(".e-pagercontainer"),t;return n.keyCode<65&&!n.shiftKey&&n.keyCode!==32||n.keyCode>=96&&n.keyCode<=105?n.keyCode===13?(t=parseInt(this.bbdesigner$(n.currentTarget).val(),10),t>i.model.pageSettings.totalPages&&(t=i.model.pageSettings.totalPages),t<=0&&(t=1),isNaN(t)?(t=i.model.pageSettings.currentPage,r.find("input").val(i.model.pageSettings.currentPage)):i.gotoPage(t),!1):!0:!1},t.prototype.updateDataSource=function(n,t){var r=this.getGridProperties().AllowPaging?!this.getGridProperties().DisableVirtualization:!0,i;r&&(i=!BoldBIDashboard.isNullOrUndefined(n.model.dataSource)&&n.model.dataSource.dataSource.json.length>0?n.model.dataSource.dataSource.json:this.getGridDataObject().dataSource.json,n._gridRecordsCount=t?i.length+1:i.length,n.model.pageSettings.pageSize=this.VirtualScrollSettings.PageSize,n.model.pageSettings.totalRecordsCount=this.totalRecordsCount,n.model.pageSettings.totalPages=Math.ceil((this.getGridProperties().AllowPaging?this.totalRecordsCount:n._gridRecordsCount)/this.VirtualScrollSettings.PageSize),n.model.dataSource.adaptor=null,this.bbdesigner$.extend(n.model.dataSource,this.getCustomDatamanager()),this.refreshHeader(),n._isLocalData=!1)},t.prototype.getCustomDatamanager=function(){var n=this,t=new BoldBIDashboard.Adaptor(null).extend({processQuery:this.bbdesigner$.proxy(this.processQuery,this),beforeSend:function(t,i){n.designer.beforeSendRequestForDataManager("OnDemandDataAction",i)},processResponse:this.bbdesigner$.proxy(this.processResponse,this)});return new BoldBIDashboard.DataManager({url:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,adaptor:new t,crossDomain:!0})},t.prototype.processQuery=function(n,t){var u,i,r,f,e;if(this.designerInstance.designerPanel.showLoadingIndicator(this.controlContainer),u=this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(this.DataGroupInfo),!BoldBIDashboard.isNullOrUndefined(t))for(i=0;i<t.queries.length;i++)r=t.queries,r[i].fn==="onPage"?this.VirtualScrollSettings.StartIndex=(r[i].e.pageIndex-1)*r[i].e.pageSize+1:r[i].fn==="onSortBy"?u=this.applyCustomSorting(r[i],u):r[i].fn==="onWhere"&&(u=this.applyFilteringInfo(r[i],u));return f=this.getWidgetInfo(this.DataGroupInfo,!0),e=this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design,{url:n.dataSource.url,type:"POST",contentType:"application/json",data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.WidgetAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,fieldInfo:u,dataset:this.DataGroupInfo.DataSourceID,widgetInfo:f,request:AjaxRequest.Widget.toString(),selectedValuesList:this.masterFilterWindowInstance.getSelectedValuesForWidgetRequest(),paramCollection:this.designerInstance.modules.dynamicParameterPanel.getParameterCollection(),selectedParameterValue:this.designerInstance.modules.dynamicParameterPanel.getSelectedParameterValue(),isDataSampleForViewMode:e,isShowAllRecords:this.getGridProperties().DisableVirtualization})}},t.prototype.processResponse=function(t){var i,r;if(this.designerInstance.designerPanel.hideLoadingIndicator(this.controlContainer),BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(t.Error)||t.Error)BoldBIDashboard.isNullOrUndefined(t.Message)||this.widgetContainerHelper.showControlError(this,t);else if(!BoldBIDashboard.isNullOrUndefined(t)&&t.data!=="[]"&&!(typeof t=="string"&&t.indexOf("Sf_Exception")!==-1))return(this.designerInstance.modules.resource.updateColorCodeInfo(t),i=this.tableElement.data("BoldBIDashboardGrid"),this.currentData=JSON.parse(t.data),this.isActAsSlaveForAnyPoP&&this.updatePoPValue(this.currentData),r=0,n.prototype.update.call(this,t),this.hasMoreRecords=t.hasMoreRecords,this.getGridProperties().AllowPaging?(this.isPagingInteraction?this.isPagingInteraction=!1:t.totalRecordsCount>0&&(this.totalRecordsCount=t.totalRecordsCount),i.model.pageSettings.totalRecordsCount=this.totalRecordsCount):this.hasMoreRecords&&(i.model.scrollSettings.allowVirtualScrolling||(i.model.scrollSettings.allowVirtualScrolling=!0)),this.getGridProperties().SummaryRowSettings.EnableSummaryRow&&(!BoldBIDashboard.isNullOrUndefined(t.SummaryTotal)&&t.SummaryTotal.length>0&&(this.summaryTotalValues=JSON.parse(t.SummaryTotal)),i.model.showSummary=!0,i.model.summaryRows=this.getSummaryRowColumns()),i.model.pageSettings.totalPages=Math.ceil((this.getGridProperties().AllowPaging?this.totalRecordsCount:i._gridRecordsCount)/this.VirtualScrollSettings.PageSize),i._requestType==="filtering"||i._requestType==="sorting")?(r=i._gridRecordsCount=this.hasMoreRecords?this.currentData.length+1:this.currentData.length,r=this.getGridProperties().AllowPaging?this.totalRecordsCount:r,{result:this.currentData,count:r}):(r=this.hasMoreRecords?i._gridRecordsCount+this.currentData.length:i._gridRecordsCount+this.currentData.length-1,this.getGridProperties().AllowPaging&&(r=this.totalRecordsCount),{result:this.currentData,count:r});return{result:"",count:0}},t.prototype.applyCustomSorting=function(n,t){var i,u,r;if(!BoldBIDashboard.isNullOrUndefined(n)){for(i=0;i<t.length;i++)t[i].UniqueColumnName===n.e.fieldName&&(t[i].CustomSorting={CustomSortType:CustomSortType[CustomSortType.Alphabetic],CustomSortOrder:n.e.direction==="ascending"?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,SortingOrder.Ascending):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,SortingOrder.Descending)});for(u=t.filter(function(t){return t.UniqueColumnName!==n.e.fieldName}),r=0;r<u.length;r++)u[r].CustomSorting=null,u[r].Sorting=SortingOrder.None}return t},t.prototype.applyFilteringInfo=function(n,t,i){var r,u,f,e;if(!BoldBIDashboard.isNullOrUndefined(n)){for(r=[],u=[],this.getFilteredQuery(n.e,u),f=0;f<t.length;f++)for(e=0;e<u.length;e++)r=this.getFilterFieldInfo(t[f],u[e],r);t=i?r:this.bbdesigner$.merge(t,r)}return t},t.prototype.getFilterFieldInfo=function(n,t,i){var r,u;if(n.UniqueColumnName===t.field){if(r=new FilterInfo,n.FieldActualType==="bbi-designer-dataset-string")r.DimensionFilterInfo=this.getDimensionFilterInfo(t.operator,t.value);else if(n.FieldActualType==="bbi-designer-dataset-number"){if(isNaN(Number(t.value)))return i;r.MeasureFilterInfo=this.getMeasureFilterInfo(t.operator,t.value)}else n.FieldActualType==="bbi-designer-dataset-datetime"&&(r.DimensionFilterInfo=Date.parse(t.value)?this.getDimensionFilterInfo(t.operator,t.value):this.getDimensionFilterInfo(t.operator,t.value));u=this.bbdesigner$.extend(!0,{},n);u.FilterInfo=r;u.IsVisible=!1;i.push(u)}return i},t.prototype.getDimensionFilterInfo=function(n,t){return{IsAllowFilteringApplied:!0,AllowFilterInfo:{IsInclude:!0,Conditions:n,FilterValues:BoldBIDashboard.isNullOrUndefined(t)?[]:t.split(",")}}},t.prototype.getMeasureFilterInfo=function(n,t){return{Conditions:this.convertOperatorForMeasureFiltering(n),Values:[t]}},t.prototype.convertOperatorForMeasureFiltering=function(n){switch(n){case"greaterthan":return NumberFilterOption.GreaterThan;case"lessthan":return NumberFilterOption.LessThan;case"greaterthanorequal":return NumberFilterOption.GreaterThanOrEquals;case"lessthanorequal":return NumberFilterOption.LessThanOrEquals;default:return NumberFilterOption.Equals}},t.prototype.getFilteredQuery=function(n,t){var i,r;if(n.isComplex)for(i=0;i<n.predicates.length;i++)r=this.getFilteredQuery(n.predicates[i],t),BoldBIDashboard.isNullOrUndefined(r)||t.push(r);else BoldBIDashboard.isNullOrUndefined(n)||t.push(n)},t.prototype.UpdateColumnUrlDetails=function(n){for(var i,r=[],t=0;t<n.ColumnUrlDetails.length;t++)i=new ColumnUrl,i.CaptionName=n.ColumnUrlDetails[t].CaptionName,i.UniqueColumnName=n.ColumnUrlDetails[t].UniqueColumnName,i.UrlLink=n.ColumnUrlDetails[t].UrlLink,r.push(i);return r},t.prototype.UpdateColumnUrl=function(){var o=this.widgetJson.UrlLink.ColumnUrlDetails,r,t,n,f,e;if(o.length!==0)for(r=this.tableElement.data("BoldBIDashboardGrid"),t=r.model.columns,n=0;n<t.length;n++){var s=t[n].field,u=this.FindColumnUrlDetails(s),i=BoldBIDashboard.isNullOrUndefined(u)?null:u.data;BoldBIDashboard.isNullOrUndefined(i)||i.UrlLink.length===0||(f=i.UrlLink,f!==""&&(t[n].IsMeasure?t[n].IsMeasure&&(e=JSON.stringify(t[n].MeasureFormat),t[n].templateID='<a target="_blank" class="e-linking-hyperlink" columnName="'+t[n].field+'">{{:~_linkFormatting('+t[n].field+","+e+" )}}<\/a>"):t[n].templateID='<a target="_blank" class="e-linking-hyperlink" columnName="'+t[n].field+'">{{:'+t[n].field+"}}<\/a>"))}},t.prototype.FindColumnUrlDetails=function(n){for(var i,r=this.widgetJson.UrlLink.ColumnUrlDetails,t=0;t<r.length;t++)if(r[t].UniqueColumnName===n)return i={},i.data=r[t],i.index=t,i;return null},t.prototype.getColumnContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Column")},t.prototype.getKPIColumnContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"KPIColumn")},t.prototype.getHiddenColumnContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"HiddenColumn")},t.prototype.renderPoPCustomizeButton=function(n,t,i){if(BoldBIDashboard.isNullOrUndefined(n))this.propertyPanel.updateItemVisibility("Grid","PoPSettings","Customize",i.isVisible),this.propertyPanel.updateItemVisibility("Grid","PoPSettings","PrimaryBackground",i.isVisible),this.propertyPanel.updateItemVisibility("Grid","PoPSettings","SecondaryBackground",i.isVisible);else{var u=BoldBIDashboard.buildTag("div","",{width:"460px",padding:"10px 0px"},{id:this.designerId+"_"+t+"_"+i.name+"_container"}),f=!BoldBIDashboard.isNullOrUndefined(this.locale.propertyPanel.popSettings)&&!BoldBIDashboard.isNullOrUndefined(this.locale.propertyPanel.popSettings.popCustomizationText)?this.locale.propertyPanel.popSettings.popCustomizationText:"PoP Customization",e=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily",f,{"font-size":"12px",float:"left",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",width:"110px",padding:"8px 0px 0px 95px"},{id:this.designerId+"_"+t+"_"+i.name+"_alignment_prop_text"}),r=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-small e-dbrd-gridCustomize",this.locale.gridColumnCustomize.customize,{width:"160px"},{id:this.designerId+"_"+t+"_"+i.name+"_button",type:"button"});u.append(e,r);r.off("click",this.bbdesigner$.proxy(this.onPoPCustomizeClick,this));r.on("click",this.bbdesigner$.proxy(this.onPoPCustomizeClick,this));n.append(u)}},t.prototype.onPoPCustomizeClick=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0]));this.renderGridPoPCustomizeWindow();n.getGridPoPColumn(n);this.openPopCustomizeSettings()},t.prototype.renderColumnCustomizeButton=function(n,t,i){if(BoldBIDashboard.isNullOrUndefined(n))this.propertyPanel.updateItemVisibility("Grid","ColumnSettings","ColumnCustomize",i.isVisible);else{var u=BoldBIDashboard.buildTag("div","",{width:"460px",padding:"10px 0px"},{id:this.designerId+"_"+t+"_"+i.name+"_container"}),f=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily",this.locale.gridColumnCustomize.columnAlignment,{"font-size":"12px",float:"left",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",width:"110px",padding:"8px 0px 0px 95px"},{id:this.designerId+"_"+t+"_"+i.name+"_alignment_prop_text"}),r=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-small e-dbrd-gridCustomize",this.locale.gridColumnCustomize.customize,{width:"160px"},{id:this.designerId+"_"+t+"_"+i.name+"_button",type:"button"});u.append(f,r);r.off("click",this.bbdesigner$.proxy(this.onColumnCustomizeClick,this));r.on("click",this.bbdesigner$.proxy(this.onColumnCustomizeClick,this));n.append(u)}},t.prototype.onColumnCustomizeClick=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0])),t,i;!BoldBIDashboard.isNullOrUndefined(n.gridColumns)&&n.gridColumns.length>0&&(t=new BoldBIDashboard.DashboardDesignerUtility.GridColumnCustomize(this.designer),i={gridAlignment:n.getGridColumnAlignment(n),isFitToContentEnabled:n.getGridProperties().FitContent},t.openColumnCustomizeSettings(n,"updateColumnCustomizeValues",i))},t.prototype.getGridPoPColumn=function(n){for(var i=[],t=this.getColumnContainer().FieldInfos,u=!BoldBIDashboard.isNullOrUndefined(n.getGridProperties().PoPSlaveSettings)&&!BoldBIDashboard.isNullOrUndefined(n.getGridProperties().PoPSlaveSettings.PoPColumnSettings)&&n.getGridProperties().PoPSlaveSettings.PoPColumnSettings.length>0?n.getGridProperties().PoPSlaveSettings.PoPColumnSettings:[],f=function(n){if(t[n].FieldActualType==="bbi-designer-dataset-number"){var r=u.filter(function(i){return i.UniqueColumnName===t[n].UniqueColumnName});r.length>0?(r[0].FieldName=t[n].DisplayName,i.push(r[0])):i.push({UniqueColumnName:t[n].UniqueColumnName,FieldName:t[n].DisplayName,IsSlaveForPop:e.isActAsSlaveForAnyPoP?!0:!1,HeaderText:t[n].DisplayName,PopType:"Absolute Difference"})}},e=this,r=0;r<t.length;r++)f(r);return n.getGridProperties().PoPSlaveSettings.PoPColumnSettings=i,i},t.prototype.getGridColumnAlignment=function(n){for(var i=[],t=n.gridColumns,u=!BoldBIDashboard.isNullOrUndefined(n.getGridProperties().ColumnAlignments)&&n.getGridProperties().ColumnAlignments.length>0?n.getGridProperties().ColumnAlignments:[],f=function(n){var r=u.filter(function(i){return i.UniqueColumnName===t[n].field});r.length>0?(r[0].HeaderText=t[n].headerText,i.push(r[0])):i.push({UniqueColumnName:t[n].field,FieldName:t[n].fieldName,HeaderText:t[n].headerText,HeaderAlign:t[n].headerTextAlign,TextAlign:t[n].textAlign,ColumnWidth:null})},r=0;r<t.length;r++)f(r);return n.getGridProperties().ColumnAlignments=i,i},t.prototype.updateColumnCustomizeValues=function(n){if(!BoldBIDashboard.isNullOrUndefined(n.gridAlignment)){var t=this.tableElement.data("BoldBIDashboardGrid");this.getGridProperties().ColumnAlignments=n.gridAlignment;this.updateColumnCustObject(n.gridAlignment);this.updateGridColumnWidth(this.getGridProperties().ColumnAlignments,t);t.model.columns=this.gridColumns;this.designerInstance.modules.serialization.notifyChange();this.refreshGrid();t.setWidthToColumns();t.option({scrollSettings:{height:this.gridItem.height()-this.getSummaryRowHeight()-this.gridItem.find(".e-columnheader").height()-this.getPagerHeight()-this.gridItem.find(".e-filterbar").height()}});this.updateGridTableSize(t)}},t.prototype.updateGridColumnWidth=function(n,t){var f=this,u,r,i;for(this.validateDefaultColumnWidth(n,t),u=function(i){if(n.filter(function(n){return n.UniqueColumnName===f.gridColumns[i].field}).length>0){var u=t.getColumnIndexByField(r.gridColumns[i].field);t.columnsWidthCollection[u]=r.getCurrentColumnWidth(n,i)}},r=this,i=0;i<n.length;i++)u(i)},t.prototype.updateColumnCustObject=function(n){for(var r=this,u=function(i){n.filter(function(n){return n.UniqueColumnName===r.gridColumns[i].field}).length>0&&(t.gridColumns[i].headerText=n[i].HeaderText,t.gridColumns[i].headerTextAlign=n[i].HeaderAlign,t.gridColumns[i].textAlign=n[i].TextAlign,t.gridColumns[i].width=BoldBIDashboard.isNullOrUndefined(n[i].ColumnWidth)?"":Number(n[i].ColumnWidth))},t=this,i=0;i<n.length;i++)u(i)},t.prototype.getCurrentColumnWidth=function(n,t){var r=this.tableElement.data("BoldBIDashboardGrid"),i=r.getColumnIndexByField(this.gridColumns[t].field);return n[i].IsColumnWidthModified&&i===t&&!BoldBIDashboard.isNullOrUndefined(n[i].ColumnWidth)?Number(n[i].ColumnWidth):this.defaultColumnWidthValue},t.prototype.validateDefaultColumnWidth=function(n,t){for(var e,u=t.model.columns.length,o=this.gridItem.width()/u,f=0,r=o>100?o:100,i=0;i<n.length;i++)n[i].IsColumnWidthModified&&!BoldBIDashboard.isNullOrUndefined(n[i].ColumnWidth)&&Number(n[i].ColumnWidth)<this.gridItem.width()&&(f=f+(r-Number(n[i].ColumnWidth)),u--);e=r+f/u;this.defaultColumnWidthValue=e>=r?e:r},t.prototype.getColumnTextAlign=function(n){var r=n.IsMeasure,t=this.getGridProperties().ColumnAlignments,i=t.filter(function(t){return t.UniqueColumnName===n.field});return t.length>0&&i.length>0?i[0].TextAlign:r?"right":"left"},t.prototype.getColumnCustomizeObject=function(n){var r=[],u=n.getGridProperties().ColumnAlignments,t=!BoldBIDashboard.isNullOrUndefined(n.DataGroupInfo)&&!BoldBIDashboard.isNullOrUndefined(n.DataGroupInfo.FieldContainers)&&n.DataGroupInfo.FieldContainers.length>0?n.DataGroupInfo.FieldContainers[0]:null,i;if(!BoldBIDashboard.isNullOrUndefined(t.FieldInfos)&&t.FieldInfos.length>0)for(i=0;i<t.FieldInfos.length;i++)r.push(t.FieldInfos[i].UniqueColumnName);return r.length>0?u:[]},t.prototype.updateBarTemplateForGrid=function(n,t,i){n.parent().addClass("e-dbrd-cell-padding");var u=n.find(".e-progress"),r=n.find(".e-progress-txt").addClass("e-progress-text-alignment"),f=this.designerInstance.measureText(r.html(),n.outerWidth(!0),{size:this.getProgressFontSize(),fontStyle:"Normal",fontFamily:"var(--designer-font)"}).width+10,e=this.designerInstance.modules.themeHelper.getGridContentFont();t=r.css("color")!==""&&r.css("color")!=="black"&&r.css("color")!=="white"&&i?r.css("color"):t;f<u.outerWidth(!0)||n.outerWidth(!0)/2<=u.outerWidth(!0)?r.css({left:f<u.outerWidth(!0)?u.outerWidth(!0)-f+"px":"0px",color:BoldBIDashboard.isNullOrUndefined(t)?"white":t,width:f<u.outerWidth(!0)?f+"px":u.outerWidth(!0)-5+"px",fontFamily:this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode()?e.family:"var(--designer-font)"}):r.css({left:u.outerWidth(!0),color:BoldBIDashboard.isNullOrUndefined(t)?"black":t,width:n.outerWidth(!0)-(u.outerWidth(!0)+10)+"px",fontFamily:this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode()?e.family:"var(--designer-font)"});u.outerWidth(!0)/n.outerWidth(!0)*100<5&&u.css({width:"0%"});f>r.outerWidth(!0)?r.parent().attr({title:r.html()}):r.parent().removeAttr("title");this.getGridProperties().AllowTextWrap&&!BoldBIDashboard.isNullOrUndefined(n.data("BoldBIDashboardProgressBar"))&&n.data("BoldBIDashboardProgressBar")._setTop()},t.prototype.getProgressFontSize=function(){var n=this.getFontSizeBasedOnResolution(),t;return n.indexOf("px")!==-1&&(t=isNaN(Number(n.split("px")[0]))?"13":n.split("px")[0]),t},t.prototype.isPresentImageSettings=function(){var t,n,i,r;if(!BoldBIDashboard.isNullOrUndefined(this.getGridProperties().ColorCustomizations)&&this.getGridProperties().ColorCustomizations.length>0)for(t=0;t<this.getGridProperties().ColorCustomizations.length;t++)if(n=this.getGridProperties().ColorCustomizations[t],!n.EnableAsBar&&!BoldBIDashboard.isNullOrUndefined(n.ColorCustomization)&&!BoldBIDashboard.isNullOrUndefined(n.ColorCustomization.RuleRangeSettings)&&n.ColorCustomization.RuleRangeSettings.RangeColorInfo.length>0)for(i=0;i<n.ColorCustomization.RuleRangeSettings.RangeColorInfo.length;i++)if(r=n.ColorCustomization.RuleRangeSettings.RangeColorInfo[i].PropertyColorPair.filter(function(n){return!BoldBIDashboard.isNullOrUndefined(n.Image)}),!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0)return!0;return!1},t.prototype.isPresentKPIColumn=function(){var n=this.DataGroupInfo.FieldContainers[2];return!BoldBIDashboard.isNullOrUndefined(n)&&n.Name==="KPIColumn"&&n.FieldInfos.length>0},t.prototype.getGridDataObject=function(){return new BoldBIDashboard.DataManager({json:this.currentData})},t.prototype.getColorFieldListName=function(){for(var n=BoldBIDashboard.isNullOrUndefined(this.widgetHelper.getCurrentWidgetInstance())?this:this.widgetHelper.getCurrentWidgetInstance(),t=this.getBindedColumnInfo(n),r=[],f=function(i){var o=u.getFieldName(t[i].UniqueColumnName,n.DataGroupInfo),e=t[i].UniqueColumnName,f=n.getGridProperties().PoPSlaveSettings.PoPColumnSettings.filter(function(n){return n.UniqueColumnName===e});u.isActAsSlaveForAnyPoP&&!BoldBIDashboard.isNullOrUndefined(f)&&!BoldBIDashboard.isNullOrUndefined(f)&&f.length>0&&f[0].IsSlaveForPop||r.push({DisplayName:o,UniqueColumnName:e})},u=this,i=0;i<t.length;i++)f(i);return r},t.prototype.getFieldName=function(n,t){var e="",u,r,f,o,i;if(!BoldBIDashboard.isNullOrUndefined(t.FieldContainers)&&t.FieldContainers.length>0)for(u=t.FieldContainers,r=0;r<u.length;r++)for(f=0;f<u[r].FieldInfos.length;f++)if(o=u[r].FieldInfos,i=o.filter(function(t){return t.UniqueColumnName===n}),!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0){var s=i[0].SummaryType,h=i[0].DateTimeFormat,c=h!==DateTimeFormat.None?h:s!==SummaryType.NONE?s:"";e=i[0].Name+(c!==""?"("+c+")":"");break}return e},t.prototype.updateTextAndImageStyle=function(n){var t=n.find(".e-rowcell-value"),i;!BoldBIDashboard.isNullOrUndefined(t)&&t.hasClass("e-rowcell-image-text-overflow")&&(t.removeClass("e-rowcell-image-text-overflow"),t.css("width",n.width()));i=Math.floor(n.width()-(10+n.find(".e-rowcell-image").width()));t.width()>i&&(t.css({width:"calc(100% - "+(10+n.find(".e-rowcell-image").width())+"px)"}),t.addClass("e-rowcell-image-text-overflow"),t.attr({title:t.html()}))},t.prototype.UpdateColorCustomization=function(n,t){var i=this.widgetHelper.getCurrentWidgetInstance();t?!this.isColorExist(i.selectedTableColorWidget,i)&&t&&(this.updateAdvanceConditionOption(!1),i.selectedTableColorWidget.EnableAsBar?this.updateBarButtonVisibility(!0):this.colorSettingsUIControlContainer.find("#"+this.designerId+"_color_settings_category_radio_value_rdo_input").prop("checked",!0)):(i.selectedTableColorWidget.ColorCustomization=n,i.selectedTableColorWidget.EnableAsBar&&(this.updateBarButtonVisibility(!1),i.selectedTableColorWidget.EnableAsBar=!1),i.getGridProperties().ColorCustomizations=this.processColorCustomization(i),this.dataConfigurationInstance.postDraggedFields(),this.designerInstance.modules.serialization.notifyChange())},t.prototype.updateAdvanceConditionOption=function(n){var t=n?"block":"none";this.colorSettingsUIControlContainer.find(".e-advanced-color-settings-button").css("display",t);this.colorSettingsUIControlContainer.find(".e-advance-settings-condition-label").css("display",t);this.colorSettingsUIControlContainer.find("#"+this.designerId+"_color_settings_category_radio_advance_rdo_input").prop("checked",n)},t.prototype.isColorExist=function(n,t){for(var f,r=!1,u=BoldBIDashboard.isNullOrUndefined(t.getGridProperties().ColorCustomizations)?[]:t.getGridProperties().ColorCustomizations,i=0;i<u.length;i++)if(f=u[i],!n.EnableAsBar&&f.SourceColorField.UniqueColumnName===n.SourceColorField.UniqueColumnName){r=!0;break}return r},t.prototype.processColorCustomization=function(n){var t=[],r=n.selectedTableColorWidget,i,u,f,e;if(t=n.getGridProperties().ColorCustomizations,i=BoldBIDashboard.isNullOrUndefined(t)?[]:t,!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0)if(this.isColorExist(r,n)){for(u=0;u<t.length;u++)if(f=t[u],f.SourceColorField.UniqueColumnName===r.SourceColorField.UniqueColumnName){e=t.indexOf(f);i[e]=r;break}}else i.push(r);else i.push(r);return!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0?i:null},t.prototype.updateColorCustomizationCollection=function(n){var e=[],r=!BoldBIDashboard.isNullOrUndefined(n.DataGroupInfo)&&!BoldBIDashboard.isNullOrUndefined(n.DataGroupInfo.FieldContainers)&&n.DataGroupInfo.FieldContainers.length>0?n.DataGroupInfo.FieldContainers[0]:null,u,o,t,f,i;if(!BoldBIDashboard.isNullOrUndefined(r.FieldInfos)&&r.FieldInfos.length>0)for(u=0;u<r.FieldInfos.length;u++)e.push(r.FieldInfos[u].UniqueColumnName);for(o=[],t=n.getGridProperties().ColorCustomizations,f=0;f<e.length;f++)if(!BoldBIDashboard.isNullOrUndefined(t))for(i=0;i<t.length;i++)e[f]===t[i].SourceColorField.UniqueColumnName&&o.push(t[i]);return o},t.prototype.updateSummaryRowCollection=function(){var e=[],n=this.getGridProperties().SummaryRowSettings,t=!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length?this.DataGroupInfo.FieldContainers[0]:null,i,r,f,u;if(!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.isNullOrUndefined(t.FieldInfos)&&t.FieldInfos.length&&!BoldBIDashboard.isNullOrUndefined(n)&&n.SummaryColumn.length)for(i=0;i<t.FieldInfos.length;i++)for(r=0,f=n.SummaryColumn;r<f.length;r++)u=f[r],u.SummaryRow.length&&t.FieldInfos[i].UniqueColumnName===u.SummaryRow[0].UniqueColumnName&&e.push(u);return n.SummaryColumn=e,n},t.prototype.getColorFields=function(){return[{Name:WidgetProperty.Font,DisplayName:""},{Name:WidgetProperty.FillColor,DisplayName:"Foreground",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.BackgroundColor,DisplayName:"Background",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.Icon,DisplayName:"Icon",ColorPicker:ColorSetColorPickers.IconColorPicker,IncludeIconAlignment:!0},]},t.prototype.getGridProperties=function(){return this.widgetJson},t.prototype.hideGridLoadingIndicator=function(){this.updatedataintiated=!1;var n=this;setTimeout(function(t){BoldBIDashboard.isNullOrUndefined(t.model)||n.designerInstance.modules.util.hideLoadingIndicator(n.controlContainer)},100,this.designerInstance)},t.prototype.getAppliedGradientColors=function(){return this.getGridProperties().ColorCustomizations},t.prototype.updateVirtualScrollSettings=function(n){var t=this.getGridProperties().AllowPaging&&this.getGridProperties().DisableVirtualization?null:n.VirtualScrollSettings;return BoldBIDashboard.isNullOrUndefined(t)||(t.PageSize=this.getGridProperties().PageSize),this.VirtualScrollSettings.PageSize=this.getGridProperties().PageSize,t},t.prototype.applyCustomSortingForExport=function(n,t){var i,u,r;if(!BoldBIDashboard.isNullOrUndefined(n)){for(i=0;i<t.length;i++)t[i].UniqueColumnName===n.e.field&&(t[i].CustomSorting={CustomSortType:CustomSortType[CustomSortType.Alphabetic],CustomSortOrder:n.e.direction==="ascending"?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,SortingOrder.Ascending):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,SortingOrder.Descending)});for(u=t.filter(function(t){return t.UniqueColumnName!==n.e.field}),r=0;r<u.length;r++)u[r].CustomSorting=null,u[r].Sorting=SortingOrder[SortingOrder.None]}return t},t.prototype.isUpdateCellPosition=function(n){var t=this.widgetJson.ContainerSettings.Bounds;return!(t.Column===n.Column&&t.Row===n.Row&&t.ColumnSpan===n.ColumnSpan&&t.RowSpan===n.RowSpan)},t.prototype.renderBarCustomizeDialog=function(){var t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,ei,oi,si;this.gridBarCustomizeDialog=null;var n=this.gridBarCustomizeDialog=BoldBIDashboard.buildTag("div.e-grid-bar-customize-dialog","",{},{id:this.designerId+"_grid_progress_bar_customize"}),nt=BoldBIDashboard.buildTag("div.e-bar-customize-container","",{},{id:this.designerId+"_bar_customize_container"}),tt=BoldBIDashboard.buildTag("div.e-bar-customize-container-hidevalue","",{},{id:this.designerId+"_bar_customize_container_hidevalue"}),it=BoldBIDashboard.buildTag("div.e-bar-customize-label-element","",{}),rt=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{});rt.text(this.locale.gridBarCustomize.hideBarText);it.append(rt);t=BoldBIDashboard.buildTag("div.e-bar-customize-checkbox-element","",{},{id:this.designerId+"_show_check_box_parent"});i=BoldBIDashboard.buildTag("input","",{},{id:this.designerId+"_grid_bar_show_check_box"});t.append(i);i.BoldBIDashboardCheckBox({checked:this.barCustomization.DisableValue,change:this.bbdesigner$.proxy(this.updateLabelVisibility,this),width:"20px",cssClass:"e-designer-prop-checkbox"});tt.append(it,t);var ut=BoldBIDashboard.buildTag("div.e-bar-customize-container-minmax","",{},{id:this.designerId+"_bar_customize_container_minmax"}),ft=BoldBIDashboard.buildTag("div.e-bar-customize-dropdown-wrapper","",{},{id:this.designerId+"_minimum_bar_element"}),et=BoldBIDashboard.buildTag("div.e-bar-customize-label-element","",{}),ot=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{});ot.text(this.locale.gridBarCustomize.minimum);et.append(ot);r=BoldBIDashboard.buildTag("div.e-bar-customize-dropdown-element","",{});u=BoldBIDashboard.buildTag("input","",{},{id:this.designerId+"_minimum_bar_dropdown"});r.append(u);u.BoldBIDashboardDropDownList({dataSource:[this.locale.gridBarCustomize.lowestValue,this.locale.gridBarCustomize.customValue],fields:{text:"text",value:"value"},change:this.bbdesigner$.proxy(this.minValueChange,this),selectedIndex:this.barCustomization.Minimum.IsEdited?1:0,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"130px",height:"24px"});f=BoldBIDashboard.buildTag("div.e-progress-bar-customize-textbox","",{},{id:this.designerId+"_minimum_numeric_bar_dropdown_parent"});e=BoldBIDashboard.buildTag("input","",{},{id:this.designerId+"_minimum_numeric_bar_dropdown"});f.append(e);e.ejNumericTextbox({decimalPlaces:0,value:this.barCustomization.Minimum.Value,width:"130px",height:"24px ",showRoundedCorner:!0,watermarkText:"Low",enabled:this.barCustomization.Minimum.IsEdited,cssClass:"bbi-designer-ejwidgets bbi-designer-ejwidgets-updown bbi-designer-content-label",change:this.bbdesigner$.proxy(this.changeMinimumTextBoxValue,this)});ft.append(et,r,f);var st=BoldBIDashboard.buildTag("div.e-bar-customize-dropdown-wrapper","",{},{id:this.designerId+"_maximum_bar_element"}),ht=BoldBIDashboard.buildTag("div.e-bar-customize-label-element","",{}),ct=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{});ct.text(this.locale.gridBarCustomize.maximum);ht.append(ct);o=BoldBIDashboard.buildTag("div.e-bar-customize-dropdown-element","",{});s=BoldBIDashboard.buildTag("input","",{},{id:this.designerId+"_maximum_bar_dropdown"});o.append(s);s.BoldBIDashboardDropDownList({dataSource:[this.locale.gridBarCustomize.highestValue,this.locale.gridBarCustomize.customValue],fields:{text:"text",value:"value"},change:this.bbdesigner$.proxy(this.maxValueChange,this),selectedIndex:this.barCustomization.Maximum.IsEdited?1:0,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"130px",height:"24px"});h=BoldBIDashboard.buildTag("div.e-progress-bar-customize-textbox","",{},{id:this.designerId+"_maximum_numeric_bar_dropdown_parent"});c=BoldBIDashboard.buildTag("input","",{},{id:this.designerId+"_maximum_numeric_bar_dropdown"});h.append(c);c.ejNumericTextbox({decimalPlaces:0,value:this.barCustomization.Maximum.Value,width:"130px",height:"24px ",showRoundedCorner:!0,watermarkText:"High",enabled:this.barCustomization.Maximum.IsEdited,cssClass:"bbi-designer-ejwidgets bbi-designer-ejwidgets-updown bbi-designer-content-label",change:this.bbdesigner$.proxy(this.changeMaximumTextBoxValue,this)});st.append(ht,o,h);ut.append(ft,st);var lt=BoldBIDashboard.buildTag("div.e-bar-customize-container-property","",{},{id:this.designerId+"_bar_customize_container_property"}),at=BoldBIDashboard.buildTag("div.e-bar-customize-direction-dropdown-element","",{display:"none"}),vt=BoldBIDashboard.buildTag("div.e-bar-customize-label-element","",{}),yt=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{});yt.text("Bar Direction");vt.append(yt);l=BoldBIDashboard.buildTag("div.e-bar-customize-container-property-dropdown","",{});a=BoldBIDashboard.buildTag("input","",{},{id:this.designerId+"_direction_bar_dropdown"});l.append(a);a.BoldBIDashboardDropDownList({dataSource:["left to right","right to left"],fields:{text:"text",value:"value"},change:this.bbdesigner$.proxy(this.barDirectionChange,this),selectedIndex:0,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"130px",height:"24px"});at.append(vt,l);var pt=BoldBIDashboard.buildTag("div.e-bar-customize-positive-picker-element","",{}),wt=BoldBIDashboard.buildTag("div.e-bar-customize-label-element","",{}),bt=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{});bt.text(this.locale.gridBarCustomize.positiveBar);wt.append(bt);v=BoldBIDashboard.buildTag("div.e-bar-customize-positive-color-picker","",{});y=BoldBIDashboard.buildTag("input","",{},{id:this.designerId+"_positive_bar_colorpicker"});v.append(y);y.BoldBIDashboardColorPicker({value:this.barCustomization.PositiveColor.HexColor,cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label",select:this.bbdesigner$.proxy(this.updatePositiveColorValue,this),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});pt.append(wt,v);var kt=BoldBIDashboard.buildTag("div.e-bar-customize-negative-picker-element","",{}),dt=BoldBIDashboard.buildTag("div.e-bar-customize-label-element","",{}),gt=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{});gt.text(this.locale.gridBarCustomize.nagativeBar);dt.append(gt);p=BoldBIDashboard.buildTag("div.e-bar-customize-negative-color-picker","",{});w=BoldBIDashboard.buildTag("input","",{},{id:this.designerId+"_negative_bar_colorpicker"});p.append(w);w.BoldBIDashboardColorPicker({value:this.barCustomization.NegativeColor.HexColor,cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label",select:this.bbdesigner$.proxy(this.updateNegativeColorValue,this),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});kt.append(dt,p);var ni=BoldBIDashboard.buildTag("div.e-bar-customize-bar-text-picker-element","",{}),ti=BoldBIDashboard.buildTag("div.e-bar-customize-label-element","",{}),ii=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{});ii.text(this.locale.gridBarCustomize.barText);ti.append(ii);b=BoldBIDashboard.buildTag("div.e-bar-customize-bar-text-color-picker","",{});k=BoldBIDashboard.buildTag("input","",{},{id:this.designerId+"_bar_text_bar_colorpicker"});b.append(k);k.BoldBIDashboardColorPicker({value:this.barCustomization.BarTextColor.HexColor,cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label",select:this.bbdesigner$.proxy(this.updateBarTextColorValue,this),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});ni.append(ti,b);var ri=BoldBIDashboard.buildTag("div.e-bar-customize-shape-dropdown-element","",{}),ui=BoldBIDashboard.buildTag("div.e-bar-customize-label-element","",{}),fi=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{});fi.text(this.locale.gridBarCustomize.barStyle);ui.append(fi);d=BoldBIDashboard.buildTag("div.e-bar-customize-shape-property-dropdown","",{});g=BoldBIDashboard.buildTag("input","",{},{id:this.designerId+"_shape_bar_dropdown"});d.append(g);g.BoldBIDashboardDropDownList({dataSource:[this.locale.gridBarCustomize.cylinder,this.locale.gridBarCustomize.rectangle],fields:{text:"text",value:"value"},change:this.bbdesigner$.proxy(this.barShapeChange,this),selectedIndex:this.barCustomization.BarShape,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"130px",height:"24px"});ri.append(ui,d);lt.append(at,ni,pt,kt,ri);nt.append(tt,lt,ut);ei=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.locale.dialogOptions.cancelButtonText,{float:"right"},{id:this.designerId+"_grid_progress_bar_customize_cancel",type:"button"});oi=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.dialogOptions.okButtonText,{float:"right"},{id:this.designerId+"_grid_progress_bar_customize_ok",type:"button"});n.append(nt);this.designerInstance.element.append(n);n.BoldBIDashboardDialog({title:this.locale.gridBarCustomize.dialogTitle,width:"316px",height:"auto",minWidth:316,minHeight:350,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,containment:"#"+this.designerInstance._id,target:"#"+this.designerInstance._id,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner",close:this.bbdesigner$.proxy(this.closeBarCustomizeDialog,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText});si=this.designerInstance.element.find("#"+this.designerId+"_grid_progress_bar_customize_foot");si.append(ei,oi)},t.prototype.updateLabelVisibility=function(n){this.barCustomization.DisableValue=n.isInteraction?n.isChecked:!1},t.prototype.minValueChange=function(n){if(n.isInteraction){var i=n.text.replace(" ",""),t=this.gridBarCustomizeDialog.find("#"+this.designerId+"_minimum_numeric_bar_dropdown").data("ejNumericTextbox");this.barCustomization.Minimum.IsEdited=!1;this.barCustomization.Minimum.Value=null;i===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(BarRange,BarRange.LowestValue)?t.disable():t.enable()}},t.prototype.maxValueChange=function(n){if(n.isInteraction){var i=n.text.replace(" ",""),t=this.gridBarCustomizeDialog.find("#"+this.designerId+"_maximum_numeric_bar_dropdown").data("ejNumericTextbox");this.barCustomization.Maximum.IsEdited=!1;this.barCustomization.Maximum.Value=null;i===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(BarRange,BarRange.HighestValue)?t.disable():t.enable()}},t.prototype.changeMinimumTextBoxValue=function(n){if(BoldBIDashboard.isNullOrUndefined(n.value)){var t=this.gridBarCustomizeDialog.find("#"+this.designerId+"_minimum_numeric_bar_dropdown").data("ejNumericTextbox");this.barCustomization.Minimum.Value=0;t.setModel({value:0})}else this.barCustomization.Minimum.Value=n.value,this.barCustomization.Minimum.IsEdited=!0},t.prototype.changeMaximumTextBoxValue=function(n){if(BoldBIDashboard.isNullOrUndefined(n.value)){var t=this.gridBarCustomizeDialog.find("#"+this.designerId+"_maximum_numeric_bar_dropdown").data("ejNumericTextbox");this.barCustomization.Maximum.Value=0;t.setModel({value:0})}else this.barCustomization.Maximum.Value=n.value,this.barCustomization.Maximum.IsEdited=!0},t.prototype.barDirectionChange=function(n){this.barCustomization.EnableRTL=n.text.split(" ").join("").toLowerCase()===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(BarRange,BarRange.Custom).toLowerCase()},t.prototype.barShapeChange=function(n){this.barCustomization.BarShape=n.model.selectedIndex},t.prototype.updatePositiveColorValue=function(n){var t=this.propertyPanel.getHexColorFromRGBA(n.RGBA);BoldBIDashboard.isNullOrUndefined(t)||(this.barCustomization.PositiveColor.RgbColor=this.getRgbaColor("positive_bar_colorpicker",n.RGBA),this.barCustomization.PositiveColor.HexColor=t,this.barCustomization.PositiveColor.IsEdited=!0)},t.prototype.updateNegativeColorValue=function(n){var t=this.propertyPanel.getHexColorFromRGBA(n.RGBA);BoldBIDashboard.isNullOrUndefined(t)||(this.barCustomization.NegativeColor.RgbColor=this.getRgbaColor("negative_bar_colorpicker",n.RGBA),this.barCustomization.NegativeColor.HexColor=t,this.barCustomization.NegativeColor.IsEdited=!0)},t.prototype.updateBarTextColorValue=function(n){var t=this.propertyPanel.getHexColorFromRGBA(n.RGBA);BoldBIDashboard.isNullOrUndefined(t)||(this.barCustomization.BarTextColor.RgbColor=this.getRgbaColor("bar_text_bar_colorpicker",n.RGBA),this.barCustomization.BarTextColor.HexColor=t,this.barCustomization.BarTextColor.IsEdited=!0)},t.prototype.getRgbaColor=function(n,t){var i=this.bbdesigner$("#"+this.designerId+"_"+n).data("BoldBIDashboardColorPicker");if(!BoldBIDashboard.isNullOrUndefined(i))return BoldBIDashboard.isNullOrUndefined(i)?"":"rgba("+t.r+","+t.g+","+t.b+","+t.a+")"},t.prototype.getBarCustomObject=function(){var n=BoldBIDashboard.isNullOrUndefined(this.widgetHelper.getCurrentWidgetInstance())?this:this.widgetHelper.getCurrentWidgetInstance(),r=this.getColorFieldListName(),u=r[n.selectedColumnIndex].UniqueColumnName,f=new BarCustomization,t,i;if(!BoldBIDashboard.isNullOrUndefined(n.getGridProperties().ColorCustomizations)&&n.getGridProperties().ColorCustomizations.length>0)for(t=0;t<n.getGridProperties().ColorCustomizations.length;t++)if(i=n.getGridProperties().ColorCustomizations[t],u===i.SourceColorField.UniqueColumnName&&!BoldBIDashboard.isNullOrUndefined(i.BarCustomization))return this.bbdesigner$.extend(!0,{},i.BarCustomization);return f},t.prototype.closeBarCustomizeDialog=function(){this.updateCustomizedGridBar(!1);this.closeDialog()},t.prototype.onClickOkBtn=function(){this.updateCustomizedGridBar(!0);this.closeDialog();this.designerInstance.modules.serialization.notifyChange();this.dataConfigurationInstance.postDraggedFields()},t.prototype.onClickPoPOkBtn=function(){this.updatePoPCustomization(!0);this.gridPoPCustomizeDialog.data("BoldBIDashboardDialog").close()},t.prototype.onClickCancelBtn=function(){this.updateCustomizedGridBar(!1);this.closeDialog()},t.prototype.onClickPopCancelBtn=function(){this.updatePoPCustomization(!1);this.unWireEvents();this.gridPoPCustomizeDialog.data("BoldBIDashboardDialog").close()},t.prototype.closeDialog=function(){this.unWireEvents();this.gridBarCustomizeDialog.data("BoldBIDashboardDialog").close();this.barCustomization=null},t.prototype.updateCustomizedGridBar=function(n){var r=this.isBarCustomizationUpdated(),i=n;if(n)this.updateColorInfoCollection(i),this.updateBarCustomizationCollection();else if(!n&&!r){var t=this.widgetHelper.getCurrentWidgetInstance(),u=!BoldBIDashboard.isNullOrUndefined(t.selectedTableColorWidget.ColorCustomization)&&!BoldBIDashboard.isNullOrUndefined(t.selectedTableColorWidget.ColorCustomization.GradientSettings)&&!BoldBIDashboard.isNullOrUndefined(t.selectedTableColorWidget.ColorCustomization.RuleRangeSettings),f=this.isColorExist(t.selectedTableColorWidget,t),e=!t.selectedTableColorWidget.EnableAsBar&&f&&!u;t.selectedTableColorWidget.EnableAsBar&&!r&&(t.selectedTableColorWidget.EnableAsBar=i);this.updateAdvanceRadioButtonVisibility(i,e)}},t.prototype.updatePoPCustomization=function(n){var r=this.individualScrollElement.find(".bbi-pop-customize-checkbox"),u=this.individualScrollElement.find(".e-dbrd-grid-column-width"),i=this.gridPoPInfo,f,t,e;if(n){for(t=0;t<r.length;t++)f=r.eq(t),BoldBIDashboard.isNullOrUndefined(i[t])||BoldBIDashboard.isNullOrUndefined(i[t].IsSlaveForPop)||(i[t].IsSlaveForPop=f.data("BoldBIDashboardCheckBox").model.checked);for(t=0;t<u.length;t++)BoldBIDashboard.isNullOrUndefined(i[t])||BoldBIDashboard.isNullOrUndefined(i[t].PopType)||(i[t].PopType=u[t].value)}this.getGridProperties().PoPSlaveSettings.PoPColumnSettings=this.gridPoPInfo;n&&(this.updateGridColumns(),e=this.tableElement.data("BoldBIDashboardGrid"),e.option("dataSource",this.getGridDataObject()));this.designerInstance.modules.serialization.notifyChange()},t.prototype.updateBarCustomizationCollection=function(){var n=BoldBIDashboard.isNullOrUndefined(this.widgetHelper.getCurrentWidgetInstance())?this:this.widgetHelper.getCurrentWidgetInstance(),r=this.getColorFieldListName(),f=this.barCustomization.UniqueColumnName=r[n.selectedColumnIndex].UniqueColumnName,t,i,u;if(this.barCustomization.FieldName=r[n.selectedColumnIndex].DisplayName,!BoldBIDashboard.isNullOrUndefined(n.getGridProperties().ColorCustomizations)&&n.getGridProperties().ColorCustomizations.length>0)for(t=0;t<n.getGridProperties().ColorCustomizations.length;t++)i=n.getGridProperties().ColorCustomizations[t],f!==i.SourceColorField.UniqueColumnName||BoldBIDashboard.isNullOrUndefined(i.BarCustomization)||(u=this.barCustomization,i.BarCustomization=this.bbdesigner$.extend(!0,{},u))},t.prototype.isBarCustomizationUpdated=function(n){var i=BoldBIDashboard.isNullOrUndefined(this.widgetHelper.getCurrentWidgetInstance())?this:this.widgetHelper.getCurrentWidgetInstance(),u=this.getColorFieldListName(),f=BoldBIDashboard.isNullOrUndefined(n)?i.selectedColumnIndex:n,e=u.length>0&&!BoldBIDashboard.isNullOrUndefined(u[f])?u[f].UniqueColumnName:"",r,t;if(!BoldBIDashboard.isNullOrUndefined(i.getGridProperties().ColorCustomizations)&&i.getGridProperties().ColorCustomizations.length>0)for(r=0;r<i.getGridProperties().ColorCustomizations.length;r++)if(t=i.getGridProperties().ColorCustomizations[r],e===t.SourceColorField.UniqueColumnName&&!BoldBIDashboard.isNullOrUndefined(t.BarCustomization))return!BoldBIDashboard.isNullOrUndefined(t.BarCustomization.UniqueColumnName)&&t.BarCustomization.UniqueColumnName===e&&t.EnableAsBar;return!1},t.prototype.updateAdvanceRadioButtonVisibility=function(n,t){this.updateBarButtonVisibility(n);!BoldBIDashboard.isNullOrUndefined(t)&&t?this.updateAdvanceConditionOption(t):(BoldBIDashboard.isNullOrUndefined(n)||!n)&&this.colorSettingsUIControlContainer.find("#"+this.designerId+"_color_settings_category_radio_value_rdo_input").prop("checked",!0)},t.prototype.updateBarButtonVisibility=function(n){this.colorSettingsUIControlContainer.find(".e-progress-bar-customize-button").css("display",n?"block":"none");this.colorSettingsUIControlContainer.find(".e-progress-bar-customize-button").parent().css("display",n?"block":"none");this.colorSettingsUIControlContainer.find("#"+this.designerId+"_color_settings_category_radio_bar_rdo_input").prop("checked",n)},t.prototype.openPopCustomizeSettings=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designer.designerPanel.selectedReportItems[0]));this.gridPoPCustomizeDialog.data("BoldBIDashboardDialog").open();this.individualScrollElement.empty();this.gridPoPInfo=BoldBIDashboard.isNullOrUndefined(n.getGridProperties().PoPSlaveSettings.PoPColumnSettings)?n.getGridPoPColumn(n):JSON.parse(JSON.stringify(n.getGridProperties().PoPSlaveSettings.PoPColumnSettings));this.populateColumnName();this.wireEvents()},t.prototype.populateColumnName=function(){this.renderColumns(this.individualScrollElement);this.scrollerRefresh(this.individualContainer)},t.prototype.scrollerRefresh=function(n){n.data("BoldBIDashboardScroller")&&n.data("BoldBIDashboardScroller").refresh()},t.prototype.renderColumns=function(n){var i=this.createColGroupElement(),t;for(n.append(i),this.bbdesigner$(this.divHeadElement).css("width",this.settingsContainer.width()),t=0;t<this.gridPoPInfo.length;t++)this.renderRowElement(n,this.gridPoPInfo[t],t)},t.prototype.renderRowElement=function(n,t,i){var s=BoldBIDashboard.buildTag("tr","",{height:"50px"}),h=BoldBIDashboard.buildTag("div.bbi-dbrd-grid-custom-name-element","",{}),c=BoldBIDashboard.buildTag("div","",{},{"class":"bbi-designer-fontfamily bbi-dbrd-grid-custom-name-child-element bbi-dbrd-designer-hoverable","data-tooltip":t.HeaderText}),u,f,e,o,r;c.text(t.HeaderText);h.append(c);this.gridHeaderElement=BoldBIDashboard.buildTag("div.bbi-dbrd-grid-header-div","",{});u=BoldBIDashboard.buildTag("div.bbi-pop-customize-checkbox-element","",{width:"110px","text-align":"center"},{id:this.designerId+"_show_check_box_parent"});f=BoldBIDashboard.buildTag("input.bbi-pop-customize-checkbox","",{"margin-right":"12px"},{id:this.designerId+"_grid_pop_show_check_box"+i});u.append(f);f.BoldBIDashboardCheckBox({checked:t.IsSlaveForPop,width:"20px",cssClass:"e-designer-prop-checkbox"});e=BoldBIDashboard.buildTag("div.bbi-pop-customize-dropdown-element","",{margin:"5px 5px 0px 15px"},{id:this.designerInstance.id+"_column_width_parent"});o=BoldBIDashboard.buildTag("input.e-dbrd-grid-column-width","",{},{id:this.designerInstance.id+"_column_width_"+i,"data-rowId":i});e.append(o);r=["Absolute Difference","Percent of Difference","Percent of Target","Actual Value","Secondary Value","Percent of Change"];o.BoldBIDashboardDropDownList({dataSource:r,fields:{text:"text",value:"value"},selectedIndex:r.indexOf(t.PopType)>0?r.indexOf(t.PopType):0,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"150px",height:"30px"});s.append(BoldBIDashboard.buildTag("td").append(h),BoldBIDashboard.buildTag("td").append(e),BoldBIDashboard.buildTag("td").append(u));n.append(s)},t.prototype.createColGroupElement=function(){var n=BoldBIDashboard.buildTag("colgroup","",{}),t=BoldBIDashboard.buildTag("col","",{width:"150px"},{}),i=BoldBIDashboard.buildTag("col","",{width:"140px"},{}),r=BoldBIDashboard.buildTag("col","",{width:"140px"},{});return n.append(t,i,r),n},t.prototype.renderGridPoPCustomizeWindow=function(){var n=this.designerId+"_grid_pop_customization",t=this.gridPoPCustomizeDialog=BoldBIDashboard.buildTag("div.bbi-grid-pop-customize-dialog","",{},{id:n+"_grid_column_customize_settings"}),i=this.settingsContainer=BoldBIDashboard.buildTag("div","",{}),r,u,f,e;this.divHeadElement=this.createDivHeadElement();i.append(this.divHeadElement);this.individualContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3 bbi-dbrd-grid-custom-individual-container","",{},{id:n+"_grid_column_customize_settings_container"});r=BoldBIDashboard.buildTag("div","",{});u=this.individualScrollElement=BoldBIDashboard.buildTag("table.e-dbrd-table bbi-dbrd-grid-custom-table","",{},{id:n+"_grid_column_customize_settings_elements"});r.append(u);this.individualContainer.append(r);f=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.locale.dialogOptions.cancelButtonText,{float:"right"},{id:n+"_grid_pop_customize_settings_cancel",type:"button"});e=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.dialogOptions.okButtonText,{float:"right"},{id:n+"_grid_pop_customize_settings_ok",type:"button"});i.append(this.individualContainer);t.append(i);this.designerInstance.element.append(t);t.BoldBIDashboardDialog({title:"PoP Settings",width:"500px",height:"auto",minWidth:500,minHeight:320,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,containment:"#"+this.designerInstance._id,target:"#"+this.designerInstance._id,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner",close:this.bbdesigner$.proxy(this.closeColumnCustomizeSettingsDialog,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText});this.footerTag=this.designerInstance.element.find("#"+n+"_grid_column_customize_settings_foot");this.footerTag.append(f,e);this.individualContainer.BoldBIDashboardScroller({height:"282px",scrollerSize:this.designerInstance.scrollerSize.scrollSize,enableTouchScroll:!0,autoHide:!0,buttonSize:this.designerInstance.scrollerSize.buttonSize})},t.prototype.createDivHeadElement=function(){var n=BoldBIDashboard.buildTag("div.bbi-dbrd-grid-pop-table-head-element","",{}),t=BoldBIDashboard.buildTag("div.bbi-dbrd-grid-pop-column-name",this.locale.gridCustomHeader.columnName,{"margin-left":"15px"}),i=BoldBIDashboard.buildTag("div.bbi-dbrd-grid-pop-column-name","Act as slave",{width:"140px"}),r=BoldBIDashboard.buildTag("div.bbi-dbrd-grid-pop-column-name","PoP Type",{});return n.append(t,r,i),n},t.prototype.closeColumnCustomizeSettingsDialog=function(){this.unWireEvents();this.gridPoPCustomizeDialog.data("BoldBIDashboardDialog").close()},t.prototype.wireEvents=function(){this.designerInstance.element.on("click","#"+this.designerId+"_grid_progress_bar_customize_cancel",this.bbdesigner$.proxy(this.onClickCancelBtn,this));this.designerInstance.element.on("click","#"+this.designerId+"_grid_progress_bar_customize_ok",this.bbdesigner$.proxy(this.onClickOkBtn,this));this.designerInstance.element.on("click","#"+this.designerId+"_grid_pop_customization_grid_pop_customize_settings_ok",this.bbdesigner$.proxy(this.onClickPoPOkBtn,this));this.designerInstance.element.on("click","#"+this.designerId+"_grid_pop_customization_grid_pop_customize_settings_cancel",this.bbdesigner$.proxy(this.onClickPopCancelBtn,this))},t.prototype.unWireEvents=function(){this.designerInstance.element.off("click","#"+this.designerId+"_grid_progress_bar_customize_cancel",this.bbdesigner$.proxy(this.onClickCancelBtn,this));this.designerInstance.element.off("click","#"+this.designerId+"_grid_progress_bar_customize_ok",this.bbdesigner$.proxy(this.onClickOkBtn,this));this.designerInstance.element.off("click","#"+this.designerId+"_grid_pop_customization_grid_pop_customize_settings_ok",this.bbdesigner$.proxy(this.onClickPoPOkBtn,this));this.designerInstance.element.off("click","#"+this.designerId+"_grid_pop_customization_grid_pop_customize_settings_cancel",this.bbdesigner$.proxy(this.onClickPopCancelBtn,this))},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.GridItem",InternalGridReportItem,window);BoldBIDashboard.DashboardDesignerUtility.GridItem.prototype.initialize();BoldBIDashboardDesigner.bbdesignerstatic$.views.helpers({_linkFormatting:function(n,t){return BoldBIDashboard.isNullOrUndefined(t.DecimalSeparator)&&(t.DecimalSeparator=new Separator,t.DecimalSeparator.AliasValue=t.DecimalSeparator.CurrentValue="."),BoldBIDashboard.isNullOrUndefined(t.GroupSeparator)&&(t.GroupSeparator=new Separator,t.GroupSeparator.AliasValue=t.GroupSeparator.CurrentValue=","),BoldBIDashboard.DashboardUtil.formattedText(n,t.Culture,t.DecimalPoints,t.FormatType,t.DecimalSeparator,t.GroupSeparator,t.Prefix,t.Suffix,t.Unit,!0,this.designerInstance,t.EnableLakhsAndCroreRep)}});BoldBIDashboardDesigner.bbdesignerstatic$.views.helpers({_renderTemplate:function(n){for(var r=null,e="",t=JSON.parse(n),u="",o=!0,s="",h="",c="",l=t[0].Padding,a='style="margin-left:10px;margin-top:'+l+"px;margin-bottom:"+l+'px;"',f="",i=0;i<t.length;i++)u=t[i].TitleValue,o=t[i].ShowValue,s=o?t[i].TotalValue:"",h=t[i].IsValueEdited?t[i].ValueColor:"var(--grid-widget-header-font-color)",c=t[i].IsTitleEdited?t[i].TitleColor:"var(--grid-widget-header-font-color)",e='<span class="e-rowtitle" style="color:'+c+'">'+u+'<\/span><span class="e-rowvalue" style="color:'+h+'">'+s+"<\/span><\/div>",f='<div class="e-row bbi-dbrd-designer-hoverable" data-tooltip="'+u+(u.length>0?" : ":"")+t[i].TotalValue+'" style="margin-bottom:'+(i<t.length-1?"10px":"3px")+'">'+e,r===null?r=f:r+=f;return'<div class="e-column" '+a+">"+r+"<\/div>"}});InternalGridSummaryRowHelper=function(){function n(n){this.locale=null;this.designerInstance=null;this.bodyContainer=null;this.summaryFieldLiTag=null;this.listContainer=null;this.summaryRowSettings=null;this.summaryDesignContainer=null;this.datasetId=null;this.selectedFieldUniqueName="";this.summaryColumnFieldList=[];this.targetInstance=null;this.targetMethod="";this.dataConfigurationInstance=null;this.measureFormatCollection=[];this.customExpressionCollection=[];this.saveBtnTag=null;this.footerTag=null;this.ejGridSummaryDialog=null;this.dialogCloseOnSave=!1;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.dashboardDesigner._id+"_grid_summary_customization";this.renderGridSummaryDialog()}return n.prototype.populateSummaryDesigner=function(n,t,i,r){this.dataConfigurationInstance=t.dataConfigurationInstance;this.designerInstance=r;this.summaryRowSettings=n.summaryRowSettings;this.targetInstance=t;this.targetMethod=i;this.datasetId=n.dataGroupInfo.DataSourceID;this.summaryColumnFieldList=this.getSummaryColumnFieldList(n.dataGroupInfo);this.selectedFieldUniqueName="";this.measureFormatCollection=[];this.customExpressionCollection=[];this.dialogCloseOnSave=!1;this.ejGridSummaryDialog.open();this.populateFieldsList(this.summaryColumnFieldList)},n.prototype.dialogClose=function(){var t,n;this.ejGridSummaryDialog.close();t=!this.dialogCloseOnSave&&!BoldBIDashboard.isNullOrUndefined(this.summaryRowSettings)&&(this.summaryRowSettings.SummaryColumn.length===0||this.summaryRowSettings.SummaryColumn.length>0&&this.summaryRowSettings.SummaryColumn.filter(function(n){return n.SummaryRow[0]}).length===0);t&&(n=!1,this.targetInstance.setPropertyElement("EnableSummaryRow","SummaryRow",n),this.targetInstance.updateSummaryRow(n))},n.prototype.getSummaryColumnFieldList=function(n){for(var r,t=[],u=BoldBIDashboard.Dashboard.ConnectionHelper.getConnectionInsFromDSId(this.dashboardDesigner,this.datasetId),f=BoldBIDashboard.Dashboard.ConnectionHelper.isHierarchicalConnection(u),e=this.dashboardDesigner.modules.dataSet.datasets,o=BoldBIDashboard.DashboardUtil.getCurrentField(e,this.datasetId,f),s=function(i){var r,f,u;if(n.FieldContainers[i].Name==="Column"||n.FieldContainers[i].Name==="KPIColumn")for(r=n.FieldContainers[i].FieldInfos,f=function(u){if(n.FieldContainers[i].Name==="Column"){var f=o.filter(function(n){return n.Id===r[u].Id})[0],e=f.TypeName==="Real"||f.TypeName==="Integer",s=f.TypeName==="Date",h=e&&f.IsAggregatedExpression;t.push({UniqueColumnName:r[u].UniqueColumnName,Name:r[u].Name,SummaryType:r[u].SummaryType.toString(),Type:e?"Numeric":s?"Date":"String",Id:f.Id,IsMeasure:e,IsAggregated:h,MeasureFormatting:r[u].MeasureFormatting})}else t.push({UniqueColumnName:r[u].UniqueColumnName,Name:r[u].Name,SummaryType:r[u].SummaryType.toString(),Type:"Numeric",Id:r[u].Id,IsMeasure:!0,IsAggregated:!1,MeasureFormatting:r[u].MeasureFormatting})},u=0;u<r.length;u++)f(u)},i=0;i<n.FieldContainers.length;i++)s(i);return r=this.bbdesigner$("#"+this.id+"_summary_designer_bodyContainer").data("BoldBIDashboardScroller"),BoldBIDashboard.isNullOrUndefined(r)||r.refresh(),t},n.prototype.populateFieldsList=function(n){for(var r,i,o,u,f,e,t=0;t<n.length;t++)r=this.bbdesigner$.extend(!0,{},n[t]),this.appendColumnList(r.Name,t,r.UniqueColumnName),this.populateSummarySettings(r,t,r.UniqueColumnName);for(i=0;i<this.summaryRowSettings.SummaryColumn.length;i++){for(o=function(t){var r=u.summaryRowSettings.SummaryColumn[i].SummaryRow[t],f=u.bbdesigner$.extend(!0,{},n.filter(function(n){return n.UniqueColumnName===r.UniqueColumnName})[0]);u.getSummarySettingsRowHtml(f,t,r)},u=this,f=0;f<this.summaryRowSettings.SummaryColumn[i].SummaryRow.length;f++)o(f);e=this.bbdesigner$("#"+this.id+"_"+n[i].UniqueColumnName+"_summary_row_list").data("BoldBIDashboardScroller");BoldBIDashboard.isNullOrUndefined(e)||e.refresh()}},n.prototype.populateSummarySettings=function(n,t,i){var r=BoldBIDashboard.buildTag("td.bbi-summary-row-column-section bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{display:t===0?"block":"none",float:"left"},{id:this.id+"_"+n.UniqueColumnName+"_summary_row_list"}),f=BoldBIDashboard.buildTag("td.bbi-summary-row-column-section","",{display:"block",float:"left"},{id:this.id+"_"+n.UniqueColumnName+"_summary_row_list_child"}),u;r.append(f);r.BoldBIDashboardScroller({height:"375px",scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,enableTouchScroll:!0,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize});this.summaryDesignContainer.append(r);t!==0||BoldBIDashboard.isNullOrUndefined(this.summaryRowSettings)||this.summaryRowSettings.SummaryColumn.length!==0||(u=this.summaryColumnFieldList.filter(function(n){return n.UniqueColumnName===i}),u.length>0&&u[0].Type==="Numeric"&&this.addSummaryRow(null,i))},n.prototype.getSummarySettingsRowHtml=function(n,t,i){var r=n.UniqueColumnName,h=this.summaryDesignContainer.find("#"+this.id+"_"+r+"_summary_row_list"),c=this.summaryDesignContainer.find("#"+this.id+"_"+r+"_summary_row_list_child"),tt,it,e;t=BoldBIDashboard.isNullOrUndefined(t)?h.find(".bbi-summary-row-value-section").length:t;var o=BoldBIDashboard.buildTag("div.bbi-summary-row-value-section"+(t===0?" bbi-summary-row-selection-active":""),"",{float:"left",height:"32px","margin-left":"8px","margin-right":"8px","margin-bottom":"8px"},{id:this.id+"_"+r+"_summary_value_row_"+t}),rt=BoldBIDashboard.buildTag("div.bbi-widgeticons bbi-summary-row-drag-icon e-draggable e-js e-pinch e-assign-value ","",{float:"left","font-size":"14px",height:"18px",width:"18px","margin-top":"10px","margin-left":"6px"},{id:this.id+"__summary_drag_icon"}),l=BoldBIDashboard.buildTag("div.bbi-summary-designer-header-label","",{"margin-left":"8px","margin-top":"4px",width:"150px",display:"block"},{id:this.id+"_"+r+"_summarty_type_options_div_row_"+t}),s=BoldBIDashboard.buildTag("input.bbi-summary-value-dropdown","",{"margin-top":"5px"},{id:this.id+"_"+r+"_summarty_type_options_row_"+t}),a=BoldBIDashboard.buildTag("div.bbi-summary-designer-header-label","",{width:"150px","margin-left":"16px","margin-top":"4px"},{}),u=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-textbox bbi-summary-row-title-text-box","",{height:"12px",width:"130px","font-size":"12px"},{type:"text",id:this.id+"_"+r+"_summary_title_textbox_row_"+t,spellcheck:"false"}),v=BoldBIDashboard.buildTag("div.bbi-summary-designer-header-label","",{width:"70px","margin-left":"22px","margin-top":"5px"},{}),ut=BoldBIDashboard.buildTag("div.bbi-summary-show-value-checkbox-wrap","",{},{}),y=BoldBIDashboard.buildTag("input.bbi-summary-show-value-checkbox","",{},{id:this.id+"_"+r+"_summary_value_checkbox_row_"+t}),p=BoldBIDashboard.buildTag("div.bbi-summary-designer-header-label","",{width:"70px","margin-left":"22px","margin-top":"4px"},{}),ft=BoldBIDashboard.buildTag("div.bbi-summary-value-colorpicker-wrap","",{},{}),w=BoldBIDashboard.buildTag("input.bbi-dashboard-designer bbi-summary-value-colorpicker","",{},{id:this.id+"_"+r+"_summary_value_colorpicker_row_"+t}),b=BoldBIDashboard.buildTag("div.bbi-summary-designer-header-label","",{width:"70px","margin-left":"22px","margin-top":"4px"},{}),et=BoldBIDashboard.buildTag("div.bbi-summary-title-colorpicker-wrap","",{},{}),k=BoldBIDashboard.buildTag("input.bbi-dashboard-designer bbi-summary-title-colorpicker","",{},{id:this.id+"_"+r+"_summary_title_colorpicker_row_"+t}),d=BoldBIDashboard.buildTag("div.bbi-summary-designer-header-label","",{width:"130px"},{}),f=BoldBIDashboard.buildTag("div.bbi-summary-custom-expression bbi-summary-expression-hoverable","",{height:"30px",width:"30px","margin-top":"2px",float:"left",display:"none"},{}),ot=BoldBIDashboard.buildTag("span.bbi-designer-expression bbi-toolbarfonticonbasic bbi-dbrd-designer-hoverable","",{"font-size":"18px","margin-top":"6px","margin-left":"6px",position:"absolute"},{id:this.id+"_"+r+"_summary_designer_expression_icon","data-tooltip":"Create custom expression"}),g=BoldBIDashboard.buildTag("div.bbi-dbrd-icon-background-theme","",{"margin-left":"12px","margin-right":"7px","margin-top":"2px",float:"left",height:"30px",width:"30px"},{id:this.id+"_"+r+"_summary_designer_delete_icon_row_"+t}),st=BoldBIDashboard.buildTag("span.bbi-designer-toolbar-delete bbi-toolbarfonticonbasic bbi-dbrd-designer-hoverable","",{"font-size":"18px",margin:"5px 0 0 5px",position:"absolute"},{id:this.id+"_"+r+"_summary_designer_delete_span_row_"+t,"data-tooltip":"Delete the selected summary row"}),nt=BoldBIDashboard.buildTag("div.bbi-dbrd-background-theme","",{"margin-left":"10px","margin-top":"2px",float:"left",height:"30px",width:"30px"},{id:this.id+"_"+r+"_summary_designer_format_icon_row_"+t}),ht=BoldBIDashboard.buildTag("span.bbi-designer-configuration-settings bbi-toolbarfonticonbasic bbi-dbrd-designer-hoverable","",{"font-size":"18px",margin:"5px 0 0 5px",position:"absolute"},{id:this.id+"_"+r+"_summary_designer_format_span_row_"+t,"data-tooltip":"Format the selected summary row"});l.append(s);a.append(u);v.append(ut.append(y));p.append(ft.append(w));b.append(et.append(k));d.append(nt.append(ht)).append(g.append(st)).append(f.append(ot));o.append(rt,l,a,v,b,p,d);c.append(o);h.append(c);tt=[{text:"Auto",value:"auto"},{text:"Sum",value:"sum"},{text:"Average",value:"avg"},{text:"Minimum",value:"min"},{text:"Maximum",value:"max"},{text:"Count",value:"count"},{text:"Distinct Count",value:"countd"},{text:"Expression",value:"custom"}];it=[{text:"Count",value:"count"},{text:"Distinct Count",value:"countd"},{text:"Expression",value:"custom"}];s.BoldBIDashboardDropDownList({targetID:this.id+"_"+r+"_summarty_type_options_div_row_"+t,dataSource:n.IsMeasure?tt:it,fields:{text:"text",value:"value"},popupHeight:"150px",minPopupWidth:"190px",showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-ejwidgets bbi-designer-drpdown-selection bbi-dbrd-control bbi-summary-row-dropdown",width:"150px",height:"24px",change:this.bbdesigner$.proxy(this.updateValueType,this)});y.BoldBIDashboardCheckBox({checked:BoldBIDashboard.isNullOrUndefined(i)?!0:i.ShowValue,width:"20px",cssClass:"e-designer-prop-checkbox"});w.BoldBIDashboardColorPicker({value:BoldBIDashboard.isNullOrUndefined(i)?"#2D3748":i.Value.Color,cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label bbi-summary-row-color-picker",modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});k.BoldBIDashboardColorPicker({value:BoldBIDashboard.isNullOrUndefined(i)?"#2D3748":i.Title.Color,cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label bbi-summary-row-color-picker",modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});e=s.data("BoldBIDashboardDropDownList");BoldBIDashboard.isNullOrUndefined(i)?(n.IsMeasure?(e.selectItemByValue("auto"),n.SummaryType===SummaryType.CUSTOM||n.SummaryType===SummaryType.NONE?u.val(this.getSummaryTypeText("sum")):u.val(this.getSummaryTypeText(n.SummaryType.toString().toLocaleLowerCase()))):(e.selectItemByValue("count"),u.val(this.getSummaryTypeText("count"))),this.measureFormatCollection.push({uniqueColumnName:r,rowId:this.id+"_"+r+"_summary_value_row_"+t,measureFormat:this.bbdesigner$.extend(!0,{},n.MeasureFormatting)})):(e.selectItemByValue(i.SummaryType.toString().toLocaleLowerCase()),u.val(i.Name),i.SummaryType===SummaryType.CUSTOM&&(f.css("display","block"),this.customExpressionCollection.push({rowId:this.id+"_"+r+"_summary_value_row_"+t,expressionName:i.Name,expressionText:i.CustomExp})),this.measureFormatCollection.push({uniqueColumnName:r,rowId:this.id+"_"+r+"_summary_value_row_"+t,measureFormat:i.MeasureFormat}));f.off("click",this.bbdesigner$.proxy(this.addExpression,this));f.on("click",this.bbdesigner$.proxy(this.addExpression,this));o.bind("click",this.bbdesigner$.proxy(this.selectSummaryRow,this));g.bind("click",this.bbdesigner$.proxy(this.deleteSummaryRow,this));nt.bind("click",this.bbdesigner$.proxy(this.formatSummaryRow,this))},n.prototype.updateValueType=function(n){if(n.isInteraction){var t=this.bbdesigner$("#"+this.id+"_"+this.selectedFieldUniqueName+"_summary_row_list").find(".bbi-summary-row-selection-active");t.find(".bbi-summary-row-title-text-box").val(this.getSummaryTypeText(n.value));t.find(".bbi-summary-custom-expression").css("display",n.value==="custom"?"block":"none")}},n.prototype.addExpression=function(){var n=this.bbdesigner$("#"+this.id+"_"+this.selectedFieldUniqueName+"_summary_row_list").find(".bbi-summary-row-selection-active"),r=n.find(".bbi-summary-row-title-text-box").val(),t=this.datasetId,u=this.dataConfigurationInstance.getCurrentDatasourceInfo(t),f=this.dataConfigurationInstance.getCurrentDataSet(t),i="",e=BoldBIDashboard.Dashboard.ConnectionHelper.getConnectionInsFromDSId(this.dashboardDesigner,t),o=new BoldBIDashboard.DashboardDesignerUtility.GridSummaryExpressionHelper(this.designerInstance),s={callBackInstance:this,callBackMethod:"updateCustomExp",optionalArgs:{isEdit:!1,tableType:null,datasourceInfo:u,dataset:f}};this.customExpressionCollection.filter(function(t){return t.rowId===n[0].id}).length>0&&(i=this.customExpressionCollection.filter(function(t){return t.rowId===n[0].id})[0].expressionText);o.openExpression(this.targetInstance.dataGroupInfo,n[0].id,r,i,e,s)},n.prototype.updateCustomExp=function(n,t,i,r){var f,u;if(!r)if(f=this.bbdesigner$("#"+n),f.find(".bbi-summary-row-title-text-box").val(t),this.customExpressionCollection.filter(function(n){return n.rowId===f[0].id}).length>0)for(u=0;u<this.customExpressionCollection.length;u++)this.customExpressionCollection[u].rowId===n&&(this.customExpressionCollection[u].expressionName=t,this.customExpressionCollection[u].expressionText=i);else this.customExpressionCollection.push({rowId:n,expressionName:t,expressionText:i})},n.prototype.selectSummaryRow=function(n){var t=this.bbdesigner$(n.target).closest(".bbi-summary-row-value-section"),i=this.dashboardDesigner.bbdesigner$;t.hasClass("bbi-summary-row-selection-active")||(t.parent().children().each(function(){var n=i(this);n.removeClass("bbi-summary-row-selection-active")}),t.addClass("bbi-summary-row-selection-active"))},n.prototype.addSummaryRow=function(n,t){var r=BoldBIDashboard.isNullOrUndefined(t)?this.selectedFieldUniqueName:t,u=this.bbdesigner$.extend(!0,{},this.summaryColumnFieldList.filter(function(n){return n.UniqueColumnName===r})[0]),i;this.getSummarySettingsRowHtml(u);i=this.bbdesigner$("#"+this.id+"_"+r+"_summary_row_list").data("BoldBIDashboardScroller");BoldBIDashboard.isNullOrUndefined(i)||i.refresh()},n.prototype.deleteSummaryRow=function(n){var r=this.bbdesigner$("#"+this.id+"_"+this.selectedFieldUniqueName+"_summary_row_list"),u=this.bbdesigner$("#"+n.currentTarget.id).parents(".bbi-summary-row-value-section"),t,f,i;u.length>0&&u[0].remove();t=r.find(".bbi-summary-row-value-section");f=r.find(".bbi-summary-row-selection-active").length>0;!f&&t.length>0&&t[0].classList.add("bbi-summary-row-selection-active");i=this.bbdesigner$("#"+this.id+"_"+this.selectedFieldUniqueName+"_summary_row_list").data("BoldBIDashboardScroller");BoldBIDashboard.isNullOrUndefined(i)||i.refresh()},n.prototype.formatSummaryRow=function(n){var i=this,u=this.bbdesigner$("#"+n.currentTarget.id).parents(".bbi-summary-row-value-section"),f=u.length>0?u[0].id:"",r=this.measureFormatCollection.filter(function(n){return n.rowId===f})[0].measureFormat,t=BoldBIDashboard.isNullOrUndefined(r)?new MeasureFormatting:JSON.parse(JSON.stringify(r));t.FormatType=isNaN(parseInt(t.FormatType,10))?t.FormatType:BoldBIDashboard.DashboardDesignerUtility.Serialization.getDataValueFormat(t.FormatType);t.Unit=isNaN(parseInt(t.Unit,10))?t.Unit:BoldBIDashboard.DashboardDesignerUtility.Serialization.getNumberFormat(t.Unit);this.designerInstance.modules.formatDialog.openFormatDialog(t,this.targetInstance.DataGroupInfo.DataSourceName,function(n){var t=r,u;for(t.Culture=n.Culture,t.DecimalPoints=n.DecimalPoints,t.DecimalSeparator=n.DecimalSeparator,t.GroupSeparator=n.GroupSeparator,t.FormatType=n.FormatType,t.Unit=n.Unit,t.Prefix=n.Prefix,t.Suffix=n.Suffix,t.EnableLakhsAndCroreRep=n.EnableLakhsAndCroreRep,u=0;u<i.measureFormatCollection.length;u++)if(i.measureFormatCollection[u].rowId===f){i.measureFormatCollection[u].measureFormat=t;break}})},n.prototype.getSummaryTypeText=function(n,t){n=n.toString().toLocaleLowerCase();var i=SummaryType.SUM;switch(n){case"sum":n="Sum";i=SummaryType.SUM;break;case"avg":n="Average";i=SummaryType.AVG;break;case"min":n="Minimum";i=SummaryType.MIN;break;case"max":n="Maximum";i=SummaryType.MAX;break;case"count":n="Count";i=SummaryType.COUNT;break;case"countd":n="Distinct Count";i=SummaryType.COUNTD;break;case"custom":n="Expression";i=SummaryType.CUSTOM;break;case"auto":n="Auto"}return!BoldBIDashboard.isNullOrUndefined(t)&&t?i:n},n.prototype.renderGridSummaryDialog=function(){var t=BoldBIDashboard.buildTag("div.bbi-userselect bbi-summary-row-main-class","",{},{id:this.id+"_summary_designer"}),e=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_summary_designer_div"}),n;t.append(e);var o=BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-table","",{},{unselectable:"on"}),s=BoldBIDashboard.buildTag("tr","",{}),h=BoldBIDashboard.buildTag("td.bbi-querydesigner-exp-separator bbi-querydesigner-exp-td","",{"font-size":"13px"},{}),c=BoldBIDashboard.buildTag("td","",{"margin-left":"12px"},{});e.append(o);o.append(s);s.append(h).append(c);var i=BoldBIDashboard.buildTag("div","",{width:"175px",height:"460px"}),r=this.bodyContainer=BoldBIDashboard.buildTag("div.e-lv e-js e-parentlv bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{width:"100%",height:i.height(),display:"block",position:"relative"},{id:this.id+"_summary_designer_bodyContainer"}),l=BoldBIDashboard.buildTag("div.e-lv e-js e-parentlv bbi-dbrd-designer-scroller bbi-dbrd-control","",{},{id:this.id+"_summary_designer_bodyContainer_child"}),a=BoldBIDashboard.buildTag("div","",{},{}),v=this.listContainer=BoldBIDashboard.buildTag("div.bbi-list-container e-js e-widget bbi-designer-dataset","",{"border-top-width":"1px",padding:"0px"},{id:this.id+"_div_fieldList"}),ut=this.summaryFieldLiTag=BoldBIDashboard.buildTag("ul.e-list-hdr e-clearall","",{width:"auto",height:"auto"},{id:this.id+"_summary_field_li_container"});v.append(ut);a.append(v);l.append(a);r.append(l);i.append(r);h.append(i);r.BoldBIDashboardScroller({height:"457px",scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,enableTouchScroll:!0,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize});var y=BoldBIDashboard.buildTag("div","",{width:"770px",height:"460px"},{}),ft=BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-table","",{width:"770px"},{unselectable:"on"}),p=BoldBIDashboard.buildTag("tr","",{},{}),et=BoldBIDashboard.buildTag("td","",{height:"40px"},{}),ot=BoldBIDashboard.buildTag("div","",{},{}),u=BoldBIDashboard.buildTag("div.bbi-dbrd-background-theme","",{float:"right",height:"30px",width:"30px","margin-top":"6px"},{id:this.id+"_summary_designer_add_icon"}),st=BoldBIDashboard.buildTag("span.e-icon e-plus bbi-dbrd-designer-hoverable","",{"font-size":"18px","margin-top":"5px","margin-left":"5px",color:"var(--primary-branding-color)"},{id:this.id+"_summary_designer_add_span","data-tooltip":"Add new summary row"}),f=BoldBIDashboard.buildTag("div","",{float:"right",height:"30px",width:"100px",margin:"10px 0 0 7px"},{id:this.id+"_summary_designer_add_label"}),ht=BoldBIDashboard.buildTag("label.bbi-designer-title-label bbi-dbrd-designer-hoverable","Add Summary",{color:"var(--primary-branding-color)"},{"data-tooltip":"Add new summary row"});u.append(st);f.append(ht);p.append(et.append(ot).append(f).append(u));var w=BoldBIDashboard.buildTag("tr","",{},{}),b=this.summaryDesignContainer=BoldBIDashboard.buildTag("td","",{},{}),ct=BoldBIDashboard.buildTag("div","",{"border-bottom":"1px solid var(--primary-border-color)"},{}),k=BoldBIDashboard.buildTag("div","",{height:"20px","margin-left":"40px","margin-top":"16px","margin-bottom":"8px"},{}),d=BoldBIDashboard.buildTag("div.bbi-summary-designer-header-label","",{width:"130px"},{}),lt=BoldBIDashboard.buildTag("label.bbi-designer-title-label","Type",{},{}),g=BoldBIDashboard.buildTag("div.bbi-summary-designer-header-label","",{width:"150px","margin-left":"34px"},{}),at=BoldBIDashboard.buildTag("label.bbi-designer-title-label","Title",{},{}),nt=BoldBIDashboard.buildTag("div.bbi-summary-designer-header-label","",{width:"67px","margin-left":"24px"},{}),vt=BoldBIDashboard.buildTag("label.bbi-designer-title-label","Show Value ",{},{}),tt=BoldBIDashboard.buildTag("div.bbi-summary-designer-header-label","",{width:"67px","margin-left":"24px"},{}),yt=BoldBIDashboard.buildTag("label.bbi-designer-title-label","Value Color",{},{}),it=BoldBIDashboard.buildTag("div.bbi-summary-designer-header-label","",{width:"67px","margin-left":"24px"},{}),pt=BoldBIDashboard.buildTag("label.bbi-designer-title-label","Title Color",{},{}),rt=BoldBIDashboard.buildTag("div.bbi-summary-designer-header-label","",{width:"67px","margin-left":"24px"},{}),wt=BoldBIDashboard.buildTag("label.bbi-designer-title-label","",{},{});d.append(lt);g.append(at);nt.append(vt);tt.append(yt);it.append(pt);rt.append(wt);k.append(d,g,nt,it,tt,rt);b.append(ct).append(k);w.append(b);y.append(ft.append(p).append(w));c.append(y);t.BoldBIDashboardDialog({width:"auto",height:"auto",minWidth:"310px",minHeight:"215px",title:"Grid Summary Configuration",enableResize:!1,showOnInit:!1,showFooter:!0,containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner bbi-summary-row-dialog",enableModal:!0,close:this.bbdesigner$.proxy(this.dialogClose,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText});this.saveBtnTag=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary","Update",{float:"right"},{id:this.id+"_summary_designer_save_btn"});n=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.locale.expressionDesigner.closeBtnText,{float:"right"},{id:this.id+"_summary_designer_close_btn"});this.footerTag=this.dashboardDesigner.element.find("#"+this.id+"_summary_designer_foot");this.footerTag.append(n,this.saveBtnTag);this.saveBtnTag.off("click",this.bbdesigner$.proxy(this.saveExpression,this));this.saveBtnTag.on("click",this.bbdesigner$.proxy(this.saveExpression,this));n.off("click",this.bbdesigner$.proxy(this.dialogClose,this));n.on("click",this.bbdesigner$.proxy(this.dialogClose,this));u.bind("click",this.bbdesigner$.proxy(this.addSummaryRow,this));f.bind("click",this.bbdesigner$.proxy(this.addSummaryRow,this));this.ejGridSummaryDialog=t.data("BoldBIDashboardDialog")},n.prototype.saveExpression=function(){for(var i=[],r=function(t){for(var r=n.bbdesigner$.extend(!0,{},n.summaryColumnFieldList[t]),s=r.UniqueColumnName,o=n.bbdesigner$("#"+n.id+"_"+s+"_summary_row_list"),h=o.find(".bbi-summary-row-value-section").length,f=new SummaryColumn,u=o.find(".bbi-summary-row-value-section"),c=function(t){var i=new SummaryRow,e=n.bbdesigner$("#"+u[t].id),c=e.find(".bbi-summary-row-title-text-box").val(),o=e.find(".bbi-summary-value-dropdown").data("BoldBIDashboardDropDownList").getSelectedValue(),l=e.find(".bbi-summary-show-value-checkbox").data("BoldBIDashboardCheckBox").model.checked,s=e.find(".bbi-summary-value-colorpicker").data("BoldBIDashboardColorPicker").model.value,h=e.find(".bbi-summary-title-colorpicker").data("BoldBIDashboardColorPicker").model.value;i.Id=r.Id;i.Name=c;i.UniqueColumnName=r.UniqueColumnName;i.UniqueRowName=r.UniqueColumnName+"_row_"+t;i.Title.Color=h;i.Title.IsEdited=h!=="#2D3748";i.Value.Color=s;i.Value.IsEdited=s!=="#2D3748";i.SummaryType=n.getSummaryTypeText(o.toLocaleLowerCase()==="auto"?r.SummaryType===SummaryType.CUSTOM||r.SummaryType===SummaryType.NONE?"sum":r.SummaryType:o,!0);i.ShowValue=l;i.MeasureFormat=n.measureFormatCollection.filter(function(n){return n.rowId===u[t].id})[0].measureFormat;i.SummaryType===SummaryType.CUSTOM&&n.customExpressionCollection.filter(function(n){return n.rowId===u[t].id}).length>0?(i.CustomExp=n.customExpressionCollection.filter(function(n){return n.rowId===u[t].id})[0].expressionText,f.SummaryRow.push(i)):i.SummaryType!==SummaryType.CUSTOM&&f.SummaryRow.push(i)},e=0;e<h;e++)c(e);i.push(f)},n=this,t=0;t<this.summaryColumnFieldList.length;t++)r(t);this.summaryRowSettings.SummaryColumn=i;this.dialogCloseOnSave=!0;this.dialogClose();BoldBIDashboard.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.summaryRowSettings,!1])},n.prototype.appendColumnList=function(n,t,i){var f=BoldBIDashboard.DashboardUtil.escapeSelector(n),r=BoldBIDashboard.buildTag("li.e-user-select e-list e-state-default e-list-check bbi-designer-exp-list","",{"border-radius":"0"},{id:this.id+"_li_"+f,name:i}),u=BoldBIDashboard.buildTag("a.e-chevron-right_01 bbi-remove-shadow","",{}),e=BoldBIDashboard.buildTag("span.e-list-text e-rel bbi-designer-content bbi-dbrd-designer-hoverable",n,{},{name:n});u.append(e);r.append(u);r.bind("click",this.bbdesigner$.proxy(this.columnFieldSelection,this,i));BoldBIDashboard.isNullOrUndefined(t)?this.summaryFieldLiTag.append(r):t===0?(this.summaryFieldLiTag.prepend(r),r.addClass("bbi-expression-user-selection-active"),this.selectedFieldUniqueName=i):this.listContainer.find("ul>li:nth-child("+t+")").after(r);this.updateContainerBorder();this.bodyContainer.height()>this.listContainer.height()?this.bodyContainer.find(".e-content").removeClass("e-content"):this.scrollerRefresh(this.bodyContainer)},n.prototype.columnFieldSelection=function(n,t){var u=this.selectedFieldUniqueName=n,f=this.dashboardDesigner.bbdesigner$,e=this,r,i;this.summaryDesignContainer.children().each(function(){var n=f(this);n.hasClass("bbi-summary-row-column-section")&&(BoldBIDashboard.isNullOrUndefined(n[0].id)||n[0].id!==e.id+"_"+u+"_summary_row_list"?n.css("display","none"):n.css("display","block"))});r=this.bbdesigner$("#"+e.id+"_"+u+"_summary_row_list").data("BoldBIDashboardScroller");BoldBIDashboard.isNullOrUndefined(r)||r.refresh();i=this.bbdesigner$(t.target).closest("li");i.hasClass("bbi-expression-user-selection-active")||(i.parent().children().each(function(){var n=f(this);n.removeClass("bbi-expression-user-selection-active")}),i.addClass("bbi-expression-user-selection-active"))},n.prototype.updateContainerBorder=function(){this.listContainer.css("border-top-width",this.listContainer.find("li").length===0?"0px":"1px")},n.prototype.scrollerRefresh=function(n){n.data("BoldBIDashboardScroller")&&n.data("BoldBIDashboardScroller").refresh()},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.GridSummaryRowHelper",InternalGridSummaryRowHelper,window);InternalGridSummaryExpressionHelper=function(){function n(n){this.id=null;this.oldVal="";this.provider="";this.isVirtualScrollEnabled=!1;this.textBox=null;this.textArea=null;this.expressionContainer=null;this.saveBtnTag=null;this.footerTag=null;this.expWaterMark="";this.successMessageLocale="";this.nameWaterMark="Expression Name";this.ejFunctionDropdown=null;this.ejColumnDropdown=null;this.ejFunctionList=null;this.ejColumnList=null;this.ejExpDialog=null;this.ejIndicator=null;this.locale=null;this.isFromQueryDesigner=!1;this.aggregationList=["SUM","COUNT","AVG","MAX","MIN","VAR","STDEV","COUNTD","INDEX","TOTAL","RUNNINGAVG","RUNNINGCOUNT","RUNNINGSUM","RUNNINGMAX","RUNNINGMIN","NULL"];this.rowExpression=["RUNNINGAVG","RUNNINGCOUNT","RUNNINGSUM","RUNNINGMAX","RUNNINGMIN"];this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.queryDesigner=this.dashboardDesigner.modules.queryDesigner;this.id=this.dashboardDesigner._id+"_summary_custom_expression";this.widgetHelper=this.dashboardDesigner.modules.widgetHelper;this.provider="SQL";this.expWaterMark=this.locale.queryExpressionDialog.QueryExpression;this.successMessageLocale=this.locale.queryExpressionDialog.successMessageNotification;this.renderQueryExpression()}return n.prototype.renderQueryExpression=function(){var u=this,f=BoldBIDashboard.buildTag("div.bbi-userselect","",{},{id:this.id+"_exp_designer"}),n=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_exp_designer_div"}),e,r;f.append(n);var v=BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-table","",{},{unselectable:"on"}),y=BoldBIDashboard.buildTag("tr","",{}),p=BoldBIDashboard.buildTag("td","",{"margin-left":"12px"},{});n.append(v);v.append(y);y.append(p);e=this.expressionContainer=BoldBIDashboard.buildTag("div","",{"margin-left":"10px"},{id:this.id+"_exp_designer_container_exp"});p.append(e);var o=BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-table","",{width:"623px"},{unselectable:"on"}),w=BoldBIDashboard.buildTag("tr","",{width:"590px"}),b=BoldBIDashboard.buildTag("td","",{}),ti=BoldBIDashboard.buildTag("label.bbi-designer-title-label",this.locale.expressionDesigner.nameText,{},{id:this.id+"_exp_designer_exp_name"}),k=BoldBIDashboard.buildTag("tr","",{width:"590px"}),d=BoldBIDashboard.buildTag("td","",{}),g=this.textBox=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-textbox","",{height:"20px",width:"240px","margin-top":"2px","margin-bottom":"5px"},{type:"text",id:this.id+"_exp_designer_textBox",spellcheck:"false"});b.append(ti);w.append(b);d.append(g);k.append(d);var nt=BoldBIDashboard.buildTag("tr","",{height:"100px",width:"590px"}),tt=BoldBIDashboard.buildTag("tr","",{width:"590px"}),it=BoldBIDashboard.buildTag("td","",{}),ii=BoldBIDashboard.buildTag("label.bbi-designer-title-label",this.locale.expressionDesigner.expressionText,{},{id:this.id+"_exp_designer_trgt_name"});it.append(ii);tt.append(it);var rt=BoldBIDashboard.buildTag("td","",{"font-size":"13px"},{}),s=this.textArea=BoldBIDashboard.buildTag("textarea.e-textarea bbi-designer-textarea","",{height:"90px",width:"593px","margin-top":"6px",overflow:"auto"},{id:this.id+"_exp_designer_textarea",spellcheck:"false"}),ut=BoldBIDashboard.buildTag("tr","",{height:"255px",width:"590px"}),ft=BoldBIDashboard.buildTag("td","",{}),et=BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-innertable","",{height:"250px",width:"590px","margin-top":"6px","margin-bottom":"2px"}),ot=BoldBIDashboard.buildTag("tr","",{height:"35px",width:"590px"}),st=BoldBIDashboard.buildTag("td","",{}),ri=BoldBIDashboard.buildTag("span.bbi-designer-title-label",this.locale.expressionDesigner.functionsText,{},{}),ht=BoldBIDashboard.buildTag("div","",{"margin-top":"6px",width:"210px"},{}),h=BoldBIDashboard.buildTag("input","",{"margin-top":"5px"},{id:this.id+"_exp_designer_options"}),ui=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_exp_designer_option_div"}),ct=BoldBIDashboard.buildTag("td","",{}),fi=BoldBIDashboard.buildTag("div","",{height:"25px",margin:"25px 10px 0px -3px","border-left":"1px solid rgba(227, 227, 227, 1)"},{});ct.append(fi);var lt=BoldBIDashboard.buildTag("td","",{}),ei=BoldBIDashboard.buildTag("span.bbi-designer-title-label",this.locale.expressionDesigner.columnSettingsText,{"margin-left":"6px"},{}),at=BoldBIDashboard.buildTag("div","",{"margin-top":"6px",width:"199px","margin-left":"6px"},{}),c=BoldBIDashboard.buildTag("input","",{height:"35px",width:"190px"},{id:this.id+"_exp_designer_data"}),oi=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_exp_designer_data_div"}),si=BoldBIDashboard.buildTag("td","",{height:"35px"}),vt=BoldBIDashboard.buildTag("tr","",{width:"590px"}),t=BoldBIDashboard.buildTag("td","",{width:"210px"},{}),yt=BoldBIDashboard.buildTag("td","",{}),hi=BoldBIDashboard.buildTag("div","",{height:"200px",margin:"-10px 10px 0px -3px","border-left":"1px solid rgba(227, 227, 227, 1)"},{});yt.append(hi);var i=BoldBIDashboard.buildTag("td","",{width:"205px"},{}),pt=BoldBIDashboard.buildTag("td","",{height:"190px"}),ci=this.functionNoDataContainer=BoldBIDashboard.buildTag("div.bbi-querydesigner-function-nodata bbi-designer-empty-msg","",{width:"188px",height:"135px"},{id:this.id+"_function_nodata_container"}).text(this.locale.queryExpressionDialog.NoResultFound),wt=BoldBIDashboard.buildTag("div.bbi-querydesigner-function-search","",{width:"188px"},{id:this.id+"_div_functions_search"}),bt=BoldBIDashboard.buildTag("div.e-option-list","",{width:"205px","margin-top":"1px"},{}),li=this.columnNoDataContainer=BoldBIDashboard.buildTag("div.bbi-querydesigner-column-nodata bbi-designer-empty-msg","",{width:"188px",height:"135px"},{id:this.id+"_column_nodata_container"}).text(this.locale.queryExpressionDialog.NoResultFound),kt=BoldBIDashboard.buildTag("div.bbi-querydesigner-column-search","",{width:"188px"},{id:this.id+"_div_columnsettings_search"}),l=BoldBIDashboard.buildTag("ul","",{},{id:this.id+"_exp_designer_option_list"}),dt=BoldBIDashboard.buildTag("div.e-data-list","",{width:"199px","margin-left":"6px","margin-top":"1px"},{}),a=BoldBIDashboard.buildTag("ul","",{},{id:this.id+"_exp_designer_data_list"}),gt=BoldBIDashboard.buildTag("div.bbi-designer-cursor","",{height:"200px",width:"180px","margin-right":"10px"},{id:this.id+"_cat_desc"}),ai=BoldBIDashboard.buildTag("div","",{height:"5px"},{}),vi=BoldBIDashboard.buildTag("div.bbi-designer-title-label","",{height:"auto"},{id:this.id+"_exp_designer_desc_heading"}),yi=BoldBIDashboard.buildTag("div","",{"text-align":"justify",height:"auto","font-size":"12px","margin-top":"8px"},{id:this.id+"_exp_designer_desc_content"}),pi=BoldBIDashboard.buildTag("div","",{height:"12px"},{}),wi=BoldBIDashboard.buildTag("div.bbi-designer-title-label","",{height:"auto"},{id:this.id+"_exp_designer_example_heading"}),bi=BoldBIDashboard.buildTag("div","",{float:"left","word-wrap":"break-word","margin-top":"8px",height:"auto","font-size":"12px",width:"190px"},{id:this.id+"_exp_designer_example_content"}),ni=BoldBIDashboard.buildTag("div.bbi-querydesigner-success-msg-wrap","",{display:"none"},{id:this.id+"_exp_success_message_wrap"}),ki=BoldBIDashboard.buildTag("span.bbi-querydesigner-success-message",this.successMessageLocale,{},{id:this.id+"_exp_success_message"}),di=BoldBIDashboard.buildTag("span.bbi-querydesigner-success-message-icon","",{},{id:this.id+"_exp_success_message_icon"});this.saveBtnTag=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.expressionDesigner.saveBtnText,{float:"right"},{id:this.id+"_exp_designer_save_btn",type:"button"});r=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.locale.expressionDesigner.closeBtnText,{float:"right"},{id:this.id+"_exp_designer_close_btn",type:"button"});rt.append(s);nt.append(rt);o.append(w).append(k).append(tt).append(nt);ot.append(si).append(st).append(ct).append(lt);st.append(ri).append(ht);ht.append(h).append(ui);lt.append(ei).append(at);at.append(c).append(oi);et.append(ot).append(vt);ft.append(et);ut.append(ft);o.append(ut);t.append(wt);t.append(bt);t.append(ci);bt.append(l);i.append(kt);i.append(dt);i.append(li);dt.append(a);pt.append(gt);gt.append(ai).append(vi).append(yi).append(pi).append(wi).append(bi);vt.append(pt).append(t).append(yt).append(i);e.append(o);f.BoldBIDashboardDialog({width:"auto",height:"auto",minWidth:"310px",minHeight:"215px",title:this.locale.expressionDesigner.expressionTitleText,beforeClose:this.bbdesigner$.proxy(this.closeExpDialog,this),enableResize:!1,showOnInit:!1,showFooter:!0,containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner e-query-expression",enableModal:!0,close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText});this.footerTag=this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_foot");ni.append(di,ki);this.footerTag.append(r,this.saveBtnTag,ni);h.BoldBIDashboardDropDownList({targetID:this.id+"_exp_designer_option_div",dataSource:[],popupHeight:"150px",minPopupWidth:"190px",showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-ejwidgets bbi-designer-drpdown-selection bbi-dbrd-control",width:"190px",height:"28px",change:this.bbdesigner$.proxy(this.renderFunctionList,this)});c.BoldBIDashboardDropDownList({targetID:this.id+"_exp_designer_data_div",popupHeight:"150px",showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-ejwidgets bbi-designer-drpdown-selection bbi-dbrd-control",minPopupWidth:"190px",fields:{id:"id",text:"name"},dataSource:[],width:"190px",height:"28px",change:this.bbdesigner$.proxy(this.renderColumnList,this)});l.BoldBIDashboardListBox({dataSource:[],height:"155px",change:this.bbdesigner$.proxy(this.optionClick,this),showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-list-selection bbi-dbrd-control",width:"190px"});a.BoldBIDashboardListBox({dataSource:[],height:"155px",showRoundedCorner:!0,itemRequest:this.bbdesigner$.proxy(function(n){u.ejColumnList.dummyUl.length===6&&n.model.allowVirtualScrolling&&(u.ejColumnList.dummyUl=u.ejColumnList.element.children())},this),cssClass:"bbi-designer-param-assign bbi-designer-list-selection bbi-dbrd-control",width:"190px"});r.off("click",this.bbdesigner$.proxy(this.closeExpression,this));this.saveBtnTag.off("click",this.bbdesigner$.proxy(this.saveExpression,this));r.on("click",this.bbdesigner$.proxy(this.closeExpression,this));this.saveBtnTag.on("click",this.bbdesigner$.proxy(this.saveExpression,this));n.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup bbi-designer-loader",template:this.dashboardDesigner.getWaitingPopupTemplate()});this.ejFunctionDropdown=h.data("BoldBIDashboardDropDownList");this.ejColumnDropdown=c.data("BoldBIDashboardDropDownList");this.ejFunctionList=l.data("BoldBIDashboardListBox");this.ejColumnList=a.data("BoldBIDashboardListBox");this.ejExpDialog=f.data("BoldBIDashboardDialog");this.ejIndicator=n.data("BoldBIDashboardWaitingPopup");s.bind("change keyup paste",this.bbdesigner$.proxy(this.txtExpChanged,this));BoldBIDashboard.DashboardUtil.txtWaterMark(s,this.expWaterMark);BoldBIDashboard.DashboardUtil.txtWaterMark(g,this.nameWaterMark);this.unWiredEvents();this.wiredEvents();this.renderAutocomplete(wt,!0);this.renderAutocomplete(kt,!1)},n.prototype.closeDialog=function(){this.resetSearchBox()},n.prototype.renderAutocomplete=function(n,t){var r=BoldBIDashboard.buildTag("table.bbi-querydesigner-toolbar-table","",{width:"100%"}),u=this.bbdesigner$("<tr/>"),f=this.bbdesigner$("<td/>"),e=BoldBIDashboard.buildTag("span.e-atc e-widget","",{width:"100%",height:"28px"},{}),i=BoldBIDashboard.buildTag("span.e-in-wrap e-box e-padding bbi-designer-widget-autocomplete","",{},{}),h=this.expSearch=BoldBIDashboard.buildTag("input.bbi-autocomplete bbi-designer-widget-watermark bbi-designer-atc-boxshadow e-js e-input","",{},{type:"text",placeholder:this.locale.expressionDesigner.placeHolderText,id:t?this.id+"_function_search":this.id+"_column_search"}),o=this.expSearchIcon=BoldBIDashboard.buildTag("span.e-select bbi-designer-widget-autocomplete e-search-area","",{width:"24px",height:"30px"},{id:t?this.id+"_function_search-icon":this.id+"_column_search-icon"}),s;if(o.append(BoldBIDashboard.buildTag("span.bbi-headericon bbi-designer-search","",{display:"table-cell"})),i.append(o),i.append(h),e.append(i),s=BoldBIDashboard.buildTag("span.e-select bbi-designer-widget-select bbi-designer-widget-autocomplete","",{height:"30px"},{id:this.id+"_column_widgetClose"}),s.append("<span class='bbi-headericon e-reportdesigner-widget-left'/>"),f.append(e),u.append(f),r.append(u),n.append(r),this.functionSearchBox=this.expressionContainer.find("#"+this.id+"_function_search"),this.columnSearchBox=this.expressionContainer.find("#"+this.id+"_column_search"),this.functionSearchIcon=this.expressionContainer.find(".bbi-querydesigner-function-search .bbi-headericon"),this.functionListbox=this.expressionContainer.find("#"+this.id+"_exp_designer_option_list"),this.columnSearchIcon=this.expressionContainer.find(".bbi-querydesigner-column-search .bbi-headericon"),this.columnListbox=this.expressionContainer.find("#"+this.id+"_exp_designer_data_list"),this.functionListTd=this.expressionContainer.find(".e-option-list"),this.columnListTd=this.expressionContainer.find(".e-data-list"),t){this.expSearch.on("keyup",this.bbdesigner$.proxy(this.onSearchText,this,this.functionSearchIcon,this.functionListbox,!0));this.expSearch.on("blur",this.bbdesigner$.proxy(this.onSearchBlur,this,this.functionSearchIcon,this.functionListbox));this.expSearchIcon.on("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this,this.functionSearchIcon,this.functionListbox,this.expSearch,!0));this.functionSearchBox.on("focus",this.bbdesigner$.proxy(this.onSearchTextBoxFocusIn,this,this.expressionContainer,!0));this.functionSearchBox.on("blur",this.bbdesigner$.proxy(this.onSearchTextBoxFocusOut,this,this.expressionContainer,!0))}else{this.expSearch.on("keyup",this.bbdesigner$.proxy(this.onSearchText,this,this.columnSearchIcon,this.columnListbox,!1));this.expSearch.on("blur",this.bbdesigner$.proxy(this.onSearchBlur,this,this.columnSearchIcon,this.columnListbox));this.expSearchIcon.on("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this,this.columnSearchIcon,this.columnListbox,this.expSearch,!1));this.columnSearchBox.on("focus",this.bbdesigner$.proxy(this.onSearchTextBoxFocusIn,this,this.expressionContainer,!1));this.columnSearchBox.on("blur",this.bbdesigner$.proxy(this.onSearchTextBoxFocusOut,this,this.expressionContainer,!1))}},n.prototype.onSearchTextBoxFocusIn=function(n,t){var i;t?(i=n.find(".bbi-querydesigner-function-search"),i.addClass("e-focus")):(i=n.find(".bbi-querydesigner-column-search"),i.addClass("e-focus"))},n.prototype.onSearchTextBoxFocusOut=function(n,t){var i;t?(i=n.find(".bbi-querydesigner-function-search"),i.hasClass("e-focus")&&i.removeClass("e-focus")):(i=n.find(".bbi-querydesigner-column-search"),i.hasClass("e-focus")&&i.removeClass("e-focus"))},n.prototype.resetSearchBox=function(){this.resetFunction();this.resetColumn()},n.prototype.resetFunction=function(){this.functionSearchBox.val("");this.functionListbox.BoldBIDashboardListBox("showAllItems");this.functionListTd.css("display","block");this.functionNoDataContainer.css("display","none");this.functionSearchIcon.addClass("bbi-designer-search").removeClass("bbi-designer-close")},n.prototype.resetColumn=function(){this.columnSearchBox.val("");this.showAllItemsForListBox(this.columnListbox);this.columnListTd.css("display","block");this.columnNoDataContainer.css("display","none");this.columnSearchIcon.addClass("bbi-designer-search").removeClass("bbi-designer-close")},n.prototype.onSearchText=function(n,t,i,r){var u,f;r.keyCode!==13&&(u=this.bbdesigner$(r.target).val(),u.length>0?(n.addClass("bbi-designer-close").removeClass("bbi-designer-search"),t.data("BoldBIDashboardListBox").model.allowVirtualScrolling?(t.data("BoldBIDashboardListBox").option("query",(new BoldBIDashboard.Query).where("Name",BoldBIDashboard.FilterOperators.startsWith,u,!1)),f=this.filterItems(t.data("BoldBIDashboardListBox").model.dataSource,u),this.setDisplayForListElements(i,f.length===0)):(f=this.filterItems(t.data("BoldBIDashboardListBox").model.dataSource,u),t.BoldBIDashboardListBox("hideAllItems"),t.BoldBIDashboardListBox("showItemsByIndices",f),this.setDisplayForListElements(i,f.length===0))):(this.showAllItemsForListBox(t),this.setDisplayForListElements(i)))},n.prototype.showAllItemsForListBox=function(n){n.data("BoldBIDashboardListBox").model.allowVirtualScrolling?n.data("BoldBIDashboardListBox").option("query",new BoldBIDashboard.Query):n.BoldBIDashboardListBox("showAllItems")},n.prototype.setDisplayForListElements=function(n,t){n?(this.functionListTd.css("display",BoldBIDashboard.isNullOrUndefined(t)?"block":t?"none":"block"),this.functionNoDataContainer.css("display",BoldBIDashboard.isNullOrUndefined(t)?"none":t?"block":"none")):(this.columnListTd.css("display",BoldBIDashboard.isNullOrUndefined(t)?"block":t?"none":"block"),this.columnNoDataContainer.css("display",BoldBIDashboard.isNullOrUndefined(t)?"none":t?"block":"none"))},n.prototype.onSearchBlur=function(n,t,i){var r=this.bbdesigner$(i.target).val();r.length===0&&(n.addClass("bbi-designer-search").removeClass("bbi-designer-close"),this.bbdesigner$(i.target).val(""),this.showAllItemsForListBox(t))},n.prototype.onSearchCloseClick=function(n,t,i,r){i.val("");this.showAllItemsForListBox(t);n.addClass("bbi-designer-search").removeClass("bbi-designer-close");this.setDisplayForListElements(r);this.refreshSearchListScroller(t)},n.prototype.refreshSearchListScroller=function(n){var t=n.data("BoldBIDashboardListBox");BoldBIDashboard.isNullOrUndefined(t)||t.scrollerObj.refresh()},n.prototype.filterItems=function(n,t){for(var r=[],i=0;i<n.length;i++)(t===""||n[i].Name.toLowerCase().search(t.toLowerCase())!==-1)&&r.push(i);return r},n.prototype.enableButton=function(n,t){BoldBIDashboard.DashboardUtil.buttonEnable(n,t)},n.prototype.txtExpChanged=function(){var n=this.textArea.val();n!==this.oldVal&&n.length>0&&this.enableButton(this.saveBtnTag,!0);this.oldVal=n},n.prototype.updateTextArea=function(){var n=this.textArea.val();n&&n.length>0?n!==this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&this.textArea.removeClass("bbi-designer-txtmark"):this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark")},n.prototype.updateTextBox=function(){var n=this.textBox.val();n&&n.length>0?n!==this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&this.textBox.removeClass("bbi-designer-txtmark"):this.textBox.val(this.nameWaterMark).addClass("bbi-designer-txtmark")},n.prototype.renderFunctionList=function(n){this.ejFunctionList.setModel({dataSource:n.value,fields:{id:"ID",text:"Name"},selectedIndex:0});var t=this.ejFunctionList.getSelectedItems();this.optionClick(t[0]);this.resetFunction()},n.prototype.renderColumnList=function(n){var t=n.value;this.isVirtualScrollEnabled&&(t=new BoldBIDashboard.DataManager({json:n.value}));this.ejColumnList.setModel({dataSource:t,fields:{text:"Name",tooltipText:"Name"},enableWordWrap:!1,selectedIndex:0});this.resetColumn();this.refreshColumnList()},n.prototype.functionDblClick=function(){var i=this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_option_list").data("BoldBIDashboardListBox"),r=i.model.selectedItems,t=i.model.dataSource[r],n=null;t&&(t.CategoryName==="Logical"?(n=t.Name,this.caretPosition(n)):(n=t.Name+"()",this.caretPosition(n,!0,n.length)))},n.prototype.columnDblClick=function(){var i=this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_data_list").data("BoldBIDashboardListBox"),r=i.model.selectedItems,n=i.listitems[r],t=null;n&&(t=n.HasDynamicParams===!0?"@{{:"+n.Value+"}}":"["+n.Name+"]",this.caretPosition(t,!1,t.length))},n.prototype.caretPosition=function(n,t,i){var u,f,r;n&&n.length>0&&(n=n.search("RUNNING")!==-1?n.replace(")","SUM())"):n,BoldBIDashboard.isNullOrUndefined(i)||(i=n.search("RUNNING")!==-1?i+4:i),u=this.textArea.val(),u!==this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")?this.textArea.removeClass("bbi-designer-txtmark"):u===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&(u="",this.textArea.val(u).removeClass("bbi-designer-txtmark")),this.textArea.focus(),f=this.textArea[0],r=f.selectionStart,!BoldBIDashboard.isNullOrUndefined(i)&&t?(this.textArea.val(u.substring(0,r)+n+u.substring(r)),r=f.selectionEnd=r+i-1):BoldBIDashboard.isNullOrUndefined(i)||t?(this.textArea.val(u.substring(0,r)+n+u.substring(r)),r=f.selectionEnd=r):(this.textArea.val(u.substring(0,r)+n+u.substring(r)),r=f.selectionEnd=r+i),this.textArea.trigger("change"))},n.prototype.optionClick=function(n){n.data&&(this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_desc_heading").text("Description"),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_example_heading").text("Example"),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_desc_content").text(n.data.Description),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_example_content").text(n.data.Example))},n.prototype.hasExpression=function(n){for(var r,f,u,i=this.widgetHelper.getAllWidgets(),t=0;t<i.length;t++)if(!BoldBIDashboard.isNullOrUndefined(i[t].DataGroupInfo)&&i[t].DataGroupInfo.DataSourceID===this.dataset.Id)for(r=0;r<i[t].DataGroupInfo.FieldContainers.length;r++)for(f=i[t].DataGroupInfo.FieldContainers[r],u=0;u<f.FieldInfos.length;u++)if(n===f.FieldInfos[u].Name)return!0;return!1},n.prototype.wiredEvents=function(){this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_option_list").bind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.functionDblClick,this));this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_data_list").bind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.columnDblClick,this));this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_closebutton").on("click",this.bbdesigner$.proxy(this.closeDialog,this))},n.prototype.unWiredEvents=function(){this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_option_list").unbind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.functionDblClick,this));this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_data_list").unbind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.columnDblClick,this));this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_closebutton").unbind("click",this.bbdesigner$.proxy(this.closeDialog,this));BoldBIDashboard.isNullOrUndefined(this.functionSearchBox)||(this.functionSearchBox.off("keyup",this.bbdesigner$.proxy(this.onSearchText,this)),this.functionSearchBox.off("blur",this.bbdesigner$.proxy(this.onSearchBlur,this)));BoldBIDashboard.isNullOrUndefined(this.columnSearchBox)||(this.columnSearchBox.off("keyup",this.bbdesigner$.proxy(this.onSearchText,this)),this.columnSearchBox.off("blur",this.bbdesigner$.proxy(this.onSearchBlur,this)));BoldBIDashboard.isNullOrUndefined(this.expSearchIcon)||this.expSearchIcon.off("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this))},n.prototype.openExpression=function(n,t,i,r,u,f,e){var s,h,a,c,tt,d,w,y,p,v,o,l;this.callBackModel=f;this.queryDesigner=this.dashboardDesigner.modules.queryDesigner;this.dataset=f.optionalArgs.dataset;this.summaryRowId=t;this.ejExpDialog.open();this.resetDesigner(!0);this.isFromQueryDesigner=e;s=new BoldBIDashboard.Dashboard.ExpressionDialogModel;s.FunctionUI={Selected:BoldBIDashboard.Dashboard.FunctionName.Aggregation,State:0};s.Datasource=this.getMultipleData();s=u.beforeExpressionDialogOpen(s,"function");var b=s.Datasource,g=[],nt=[];if(b.length>1){for(h=[],o=0;o<b.length;o++)h=h.concat(b[o].Value);for(h.sort(function(n,t){return n.ID>t.Name?1:t.Name>n.ID?-1:0}),a=0;a<h.length;a++)nt.indexOf(h[a].ID)===-1&&(nt.push(h[a].ID),g.push(h[a]));s.Datasource.unshift({ID:0,Name:BoldBIDashboard.Dashboard.FieldName.All,Value:g})}this.ejFunctionDropdown.setModel({fields:{id:"ID",text:"Name",value:"Value"},dataSource:s.Datasource,enabled:s.FunctionUI.State===BoldBIDashboard.Dashboard.State.Enable});this.ejFunctionDropdown.selectItemByText(s.FunctionUI.Selected);!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0&&this.textBox.val(i);!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0&&this.textArea.val(r);this.updateTextArea();this.updateTextBox();c=new BoldBIDashboard.Dashboard.ExpressionDialogModel;tt=new BoldBIDashboard.Dashboard.ExpressionHelper;c.FunctionUI={Selected:BoldBIDashboard.Dashboard.FieldName.All,State:0};var rt=BoldBIDashboard.Dashboard.ConnectionHelper.isHierarchicalConnection(u),k=rt?BoldBIDashboard.DashboardUtil.getFieldUsingTableType(this.callBackModel.optionalArgs.tableType||this.fillFieldItems(this.dataset)):this.getFields(),it=[];for(o=0;o<2;o++)for(d=n.FieldContainers[o].FieldInfos,w=0;w<d.length;w++)for(y=0;y<k.length;y++)if(d[w].Id===k[y].ID){it.push(k[y]);break}if(c.Datasource=tt.getMultipleColumnData(it),c=u.beforeExpressionDialogOpen(c,"column"),p=c.Datasource,v=[],p.length>1){for(o=0;o<p.length;o++)p[o].Name!=="Parameters"&&(v=v.concat(p[o].Value));v.sort(function(n,t){return n.ID>t.ID?1:t.ID>n.ID?-1:0});this.isVirtualScrollEnabled=v.length>100;c.Datasource.unshift({ID:0,Name:BoldBIDashboard.Dashboard.FieldName.All,Value:v})}l=this;setTimeout(function(n){l.isVirtualScrollEnabled?l.ejColumnList.setModel({allowVirtualScrolling:!0,virtualScrollMode:"continuous",itemRequestCount:100}):l.ejColumnList.option("allowVirtualScrolling",!1);l.ejColumnDropdown.setModel({fields:{id:"ID",text:"Name",value:"Value"},dataSource:n.Datasource,enabled:!0});l.ejColumnDropdown.selectItemByText(n.FunctionUI.Selected);l.refreshListScroller()},100,c)},n.prototype.getMultipleData=function(n){var t=[],i;return BoldBIDashboard.isNullOrUndefined(n)&&(i=this.getAggDataJson(),t=[{ID:1,Name:BoldBIDashboard.Dashboard.FunctionName.Aggregation,Value:i},]),t},n.prototype.getAggDataJson=function(){return[{ID:"AVG",Name:"AVG",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.avgDesc,Example:this.locale.expressionDesigner.expressionHelper.avgEx,State:0},{ID:"COUNT",Name:"COUNT",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.countDesc,Example:this.locale.expressionDesigner.expressionHelper.countEx,State:0},{ID:"COUNTD",Name:"COUNTD",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.countdDesc,Example:this.locale.expressionDesigner.expressionHelper.countdEx,State:0},{ID:"MAX",Name:"MAX",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.maxAggDesc,Example:this.locale.expressionDesigner.expressionHelper.maxAggEx,State:0},{ID:"MIN",Name:"MIN",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.minAggDesc,Example:this.locale.expressionDesigner.expressionHelper.minAggEx,State:0},{ID:"STDEV",Name:"STDEV",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.stdDevDesc,Example:this.locale.expressionDesigner.expressionHelper.stdDevEx,State:0},{ID:"SUM",Name:"SUM",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.sumDesc,Example:this.locale.expressionDesigner.expressionHelper.sumEx,State:0},{ID:"VAR",Name:"VAR",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.varDesc,Example:this.locale.expressionDesigner.expressionHelper.varEx,State:0},{ID:"TOTAL",Name:"TOTAL",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.totalDesc,Example:this.locale.expressionDesigner.expressionHelper.totalEx,State:0}]},n.prototype.fillFieldItems=function(n){var i=this,t=[];return n.Fields.forEach(function(n){n.IsExpression||n.IsParameterField||t.push(i.ConvertDatasetToTabletype(n))}),t},n.prototype.ConvertDatasetToTabletype=function(n){return{DataType:n.TypeName,DefaultDataType:n.TypeName,IsExpression:n.IsExpression,IsAggregatedExpression:n.IsAggregatedExpression,ID:n.Id,Name:n.Name,ChildFields:n.ChildFields}},n.prototype.getFields=function(){var r=this,i=BoldBIDashboard.isNullOrUndefined(this.callBackModel.optionalArgs.tableType)?this.fillFieldItems(this.dataset):this.bbdesigner$.extend(!0,[],this.callBackModel.optionalArgs.tableType),e=this.bbdesigner$.extend(!0,{},this.dataset),u;e.Query.DashboardParameters=this.dataset.Query.DashboardParameters;var f=[],n=!1,t=null;return f.push(e),this.dashboardDesigner.rdlParser.rdlJsonObj.DataSets.forEach(function(n){n.Id!==f[0].Id&&f.push(r.bbdesigner$.extend(!0,{},n))}),u=this,f.forEach(function(f){BoldBIDashboard.isNullOrUndefined(f)||BoldBIDashboard.isNullOrUndefined(f.Query)||BoldBIDashboard.isNullOrUndefined(f.Query.DashboardParameters)||(n=f.Id===r.callBackModel.optionalArgs.datasourceInfo.Id,f.Query.DashboardParameters=n&&!BoldBIDashboard.isNullOrUndefined(u.queryDesigner)&&!BoldBIDashboard.isNullOrUndefined(u.queryDesigner.queryParamCollection)&&(u.queryDesigner.queryParamCollection.length!==0||u.isFromQueryDesigner)?u.queryDesigner.queryParamCollection:f.Query.DashboardParameters,t=f.Name,f.Query.DashboardParameters.forEach(function(u){var f=u.ParameterName,e=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DynamicParameterDataType,u.DataType),o,c,s,h;e=u.DataType===DynamicParameterDataType.Number?"integer":e;switch(u.Mode){case ParameterMode.Literal:o=u.LiteralModeInfo;c=!BoldBIDashboard.isNullOrUndefined(o.StartValue)&&!BoldBIDashboard.isNullOrUndefined(o.EndValue)||!BoldBIDashboard.isNullOrUndefined(o.RangeStartDate)&&!BoldBIDashboard.isNullOrUndefined(o.RangeEndDate)||!BoldBIDashboard.isNullOrUndefined(o.RelativeDateItems);c?(s=f+".START",h=f+".END",i.push(r.getParamItems(n?s:s+" ("+t+")",n?s:t+"."+s,e)),i.push(r.getParamItems(n?h:h+" ("+t+")",n?h:t+"."+h,e))):i.push(r.getParamItems(n?f:f+" ("+t+")",n?f:t+"."+f,e));break;case ParameterMode.List:i.push(r.getParamItems(n?f:f+" ("+t+")",n?f:t+"."+f,e))}r.dashboardDesigner.modules.queryExpression.addItemIntoFieldListWithIgnoreQuotesSyntax(u,n,t,i)}))}),i.push(this.getParamItems(this.locale.userParameter.fullName,"CURRENTUSER.FULLNAME","String"),this.getParamItems(this.locale.userParameter.email,"CURRENTUSER.EMAIL","String"),this.getParamItems(this.locale.userParameter.tenantURL,"CURRENTUSER.TENANTURL","String")),this.dashboardDesigner.model.environment!==BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(BoldBIDashboard.Environment,BoldBIDashboard.Environment.cloud)&&i.push(this.getParamItems(this.locale.userParameter.siteIdentifier,"CURRENTUSER.SITEIDENTIFIER","String")),i},n.prototype.getParamItems=function(n,t,i){return{Name:n,Value:t,DataType:i,IsExpression:!1,IsDynamicParam:!0}},n.prototype.refreshListScroller=function(){var t=this.ejFunctionList,n;t.scrollerObj.model.scrollTop=0;n=this.ejColumnList;n.scrollerObj.model.scrollTop=0;this.ejFunctionList.refresh(!0);this.refreshColumnList()},n.prototype.refreshColumnList=function(){this.ejColumnList.model.allowVirtualScrolling&&(this.ejColumnList._oldStartValue=null,this.ejColumnList.model.totalItemsCount=0,this.ejColumnList.dummyUl=this.bbdesigner$());this.ejColumnList.refresh(!0)},n.prototype.confirmAction=function(n){if(!n){var t=this.textBox.val(),i=this.textArea.val().trim();this.ejExpDialog.close();this.hideExpIndicator();BoldBIDashboard.DashboardUtil.invokeMethod(this.callBackModel.callBackInstance,this.callBackModel.callBackMethod,[this.summaryRowId,t,i,!0])}},n.prototype.closeConfirmation=function(){this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,"The expression is empty and the summary row information will be removed while updating the summary rows. Do you want to continue",IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this})},n.prototype.closeExpDialog=function(n){n.isInteraction&&(this.bbdesigner$("#"+this.id+"_exp_designer_div_WaitingPopup").is(":visible")?(this.hideExpIndicator(),n.cancel=!1):(n.cancel=!0,this.closeConfirmation()))},n.prototype.closeExpression=function(){this.resetSearchBox();this.closeConfirmation()},n.prototype.resetDesigner=function(){this.textBox.val("");this.textArea.val("");this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_desc_heading").text("");this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_example_heading").text("");this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_desc_content").text("");this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_example_content").text("")},n.prototype.saveExpression=function(){this.resetSearchBox();this.expressionValidation()},n.prototype.expressionValidation=function(){var u=this.expressionContainer.data("e-exp"),t=this.textBox.val(),n=this.textArea.val().trim(),r,i;this.textArea.val(n);r=!1;t===this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&(t="");n===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&(n="");BoldBIDashboard.isNullOrUndefined(t)||t.length!==0?BoldBIDashboard.isNullOrUndefined(n)||n.length!==0?/^[a-zA-Z0-9- _]*$/.test(t)===!1?(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.expHasSpecialChar,IconType.warning,AlertType.Alert,!1,""),r=!0):n.indexOf("["+t+"]")!==-1?(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.expNotInColumn,IconType.errors,AlertType.Alert,!1,""),r=!0):this.isBalanceBrackets(n)?(n.replace(new RegExp("s"),"").toUpperCase().indexOf("TOTAL(")>-1||this.rowExpression.some(function(t){return n.replace(new RegExp("s"),"").toUpperCase().indexOf(t+"(")>-1}))&&!this.isValidRunningExpression(n)?r=!0:u&&u.isEdit?(i=(new BoldBIDashboard.DashboardDesignerUtility.ExpressionParsor).parseErrors(n,this.provider),i&&i.length>0?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",i[0],IconType.errors,AlertType.Alert,!1,""):this.serverValidationExp({selectedExpression:u.name,name:t,expression:n})):(i=(new BoldBIDashboard.DashboardDesignerUtility.ExpressionParsor).parseErrors(n,this.provider),i&&i.length>0?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",this.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!0,i[0]):this.serverValidationExp({selectedExpression:"",name:t,expression:n})):(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.invalidExpSyntax,IconType.errors,AlertType.Alert,!1,""),r=!0):(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.emptyExp,IconType.warning,AlertType.Alert,!1,""),r=!0):(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.emptyExpName,IconType.warning,AlertType.Alert,!1,""),r=!0)},n.prototype.isValidRunningExpression=function(n){for(var f,r,e,h,c,v,o,l,y,u=this,i=!0,t=n,a=this.ejColumnDropdown.model.dataSource[0].Value,s=0;s<a.length;s++)f=a[s].Name,t.indexOf("["+f+"]")>-1&&/^[a-zA-Z0-9- _]*$/.test(f)===!0&&(t=t.replace("["+f+"]",""));if(r=null,t.replace(new RegExp("s"),"").toUpperCase().indexOf("TOTAL(")>-1&&(r=t.replace("TOTAL","").toUpperCase().split("[+-*/]+"),r.forEach(function(n){u.rowExpression.some(function(t){return n.indexOf(t)>-1})&&(i=!1,u.dashboardDesigner.modules.util.alertDialog(u.locale.alertDialogTitle.queryExpression,u.locale.dataSource.errorMessageForTotalExpressionContainsRowExpression,IconType.warning,AlertType.Alert,!1,""))})),i){for(this.rowExpression.forEach(function(n){t.replace(new RegExp("s"),"").toUpperCase().indexOf(n+"(")>-1&&(r=t.toUpperCase().replace(n,"").split("[+-*/]+"))}),e=0,h=r;e<h.length;e++)for(c=h[e],i=!1,v=!isNaN(parseInt(c.replace("(","").replace(")",""),10)),o=0,l=this.aggregationList.filter(function(n){return n!=="TOTAL"||n!=="RUNNINGSUM"||n!=="RUNNINGAVG"||n!=="RUNNINGCOUNT"||n!=="RUNNINGMAX"||n!=="RUNNINGMIN"});o<l.length;o++)if(y=l[o],c.toString().replace(new RegExp("s"),"").toUpperCase().indexOf(y)>-1||v){i=!0;break}i||this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.parameterMustBeAnAggregated,IconType.warning,AlertType.Alert,!1,"")}return i},n.prototype.isBalanceBrackets=function(n){for(var t=0,i=0;i<n.length;i++)if(n[i]==="("?t++:n[i]===")"&&t--,t<0)return!1;return t>0?!1:!0},n.prototype.serverValidationExp=function(n){this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.dagetexpressioncolumninfo,{data:JSON.stringify({datasourceId:this.dataset.Id,expressionName:n.name,expressionText:n.expression})},{fnction:this.bbdesigner$.proxy(this.expActionResult,this,n),indicator:[this.bbdesigner$.proxy(this.showExpIndicator,this),this.bbdesigner$.proxy(this.hideExpIndicator,this)]},!0,!0)},n.prototype.expActionResult=function(n,t){if(t.Error)this.enableButton(this.saveBtnTag,!0),BoldBIDashboard.isNullOrUndefined(t.StatusMessage)?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",this.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!1,""):this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",this.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!0,t.StatusMessage);else if(this.ejExpDialog.isOpen()&&t&&t.Data.Data){var i=n.name,r=n.expression;this.ejExpDialog.close();BoldBIDashboard.DashboardUtil.invokeMethod(this.callBackModel.callBackInstance,this.callBackModel.callBackMethod,[this.summaryRowId,i,r,!1])}},n.prototype.showExpIndicator=function(){BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_add_btn"),!1);BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_save_btn"),!1);BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_close_btn"),!1);this.ejIndicator.show()},n.prototype.hideExpIndicator=function(){BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_add_btn"),!0);BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_save_btn"),!1);BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_close_btn"),!0);this.ejIndicator.hide()},n.prototype.destroy=function(){this.unWiredEvents();BoldBIDashboard.DashboardUtil.destroyEjObjects(this.dashboardDesigner.element.find("#"+this.id+"_exp_designer"));this.dashboardDesigner.element.find("#"+this.id+"_exp_designer").length>0&&this.dashboardDesigner.element.find("#"+this.id+"_exp_designer").remove()},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.GridSummaryExpressionHelper",InternalGridSummaryExpressionHelper,window);__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalPivotViewReportItem=function(n){function t(t){var i=n.call(this,t,"PivotGrid","e-pivotview-item")||this;return i.pivotViewItem=null,i.dataValues=null,i.colorFields=[],i.colorCustomizationSettings=null,i.colorSettingsUIControlContainer=null,i.selectedTableColorWidget=null,i.selectedColumnIndex=0,i.minMaxValues=null,i.initialGroupBarFilter=[],i.locale=null,i.isOpenReport=!1,i.lightHeaderBackgroundColor="#EEEEEE",i.lightHeaderForegroundColor="#333333",i.lightGroupPanelBackgroundColor="#E9E9E9",i.pivotViewData=null,i.caluculatedFields=[],i.isBoldCustomizationApplied=!1,i.bbdesigner$=i.designerInstance.bbdesigner$,i.dashboardDesigner=t,i.locale=t.getLocalizationContent(),i.colorFields=i.getColorFields(),i.designerId=i.designerInstance._id,i.widgetJson=new PivotViewProperties(t),i.propertyPanel=t.modules.propertyPanel,i.colorCustomizationSettings=i.designerInstance.modules.colorCustomization,n.prototype.initializeVirtualScrollSettings.call(i,5e4),i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.relation,GroupId:"c55f5601-8e79-4a16-94d6-ddd4cc051555",Items:[{id:"8d3e286f-5057-4267-b5ee-21b2d295768",widgetName:"PivotGrid",widgetDisplayName:n.itemPanel.widgetTitle.pivotView,cssClass:"bbi-widgeticon bbi-designer-widget-pivotview",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.PivotViewItem",searchCategory:["pivotgrid","relationship"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.pivotView,description:n.itemPanel.widgetDescription.pivotViewDesc,dataRequirement:n.itemPanel.widgetDataRequirements.pivotViewDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotViewProperties"}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){this.createPivotViewContainer(t)},t.prototype.getWidgetImage=function(){return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 61.2 (89653) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Pivot-Grid" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="Group-7" transform="translate(12.000000, 12.000000)">            <g id="Group-6">                <line x1="5.03355705" y1="59.5" x2="296.607383" y2="58.4057385" id="Path-3" stroke="var(--widget-notconfigured-image-background2)" stroke-width="7.57728834"><\/line>                <line x1="-5.14848494" y1="92.8517875" x2="174.55509" y2="92.8517875" id="Path-3-Copy" stroke="var(--widget-notconfigured-image-background2)" stroke-width="9.09274601" transform="translate(84.703303, 92.851787) rotate(-90.000000) translate(-84.703303, -92.851787) "><\/line>                <path d="M10.8388663,5.49009901 C7.80130021,5.49009901 5.33886634,7.95253289 5.33886634,10.990099 L5.33886634,165.168317 C5.33886634,172.624161 11.3830222,178.668317 18.8388663,178.668317 L281.862057,178.668317 C289.317901,178.668317 295.362057,172.624161 295.362057,165.168317 L295.362057,10.990099 C295.362057,7.95253289 292.899623,5.49009901 289.862057,5.49009901 L10.8388663,5.49009901 Z" id="Rectangle" stroke="var(--widget-notconfigured-image-background1)" stroke-width="9"><\/path>                <g id="Group-5" transform="translate(139.620208, 70.277026)">                    <path d="M12.053213,72.1985178 L23.1687999,89.492445 C23.530831,90.0557026 23.3677047,90.8057974 22.804447,91.1678285 C22.6089131,91.2935069 22.3813722,91.3603263 22.1489317,91.3603263 L-0.0822420531,91.3603263 C-0.751813341,91.3603263 -1.29460812,90.8175315 -1.29460812,90.1479603 C-1.29460812,89.9155198 -1.2277887,89.6879788 -1.10211026,89.492445 L10.0134766,72.1985178 C10.3755077,71.6352602 11.1256025,71.4721338 11.6888601,71.8341649 C11.8350154,71.9281055 11.9592724,72.0523625 12.053213,72.1985178 Z" id="Triangle" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero" transform="translate(11.033345, 80.986053) rotate(-90.000000) translate(-11.033345, -80.986053) "><\/path>                    <path d="M99.3151408,1.55948296 L110.504035,18.7361311 C110.869496,19.2971693 110.71095,20.0482454 110.149912,20.4137065 C109.953039,20.5419497 109.723143,20.6102231 109.488186,20.6102231 L87.1103969,20.6102231 C86.4408256,20.6102231 85.8980308,20.0674283 85.8980308,19.397857 C85.8980308,19.1628992 85.9663042,18.9330038 86.0945474,18.7361311 L97.2834417,1.55948296 C97.6489029,0.99844475 98.399979,0.839898202 98.9610172,1.20535933 C99.102418,1.29746802 99.2230321,1.41808217 99.3151408,1.55948296 Z" id="Triangle-Copy" fill="var(--widget-notconfigured-image-background2)" fill-rule="nonzero"><\/path>                    <path d="M8.63559641,81.8382183 L86.247005,81.8382183 C92.9427178,81.8382183 98.3706656,76.4102705 98.3706656,69.7145577 L98.3706656,7.88388848 L98.3706656,7.88388848" id="Path-8" stroke="var(--widget-notconfigured-image-background2)" stroke-width="6.06183031"><\/path>                <\/g>            <\/g>        <\/g>    <\/g><\/svg>'},t.prototype.updateSize=function(t){var i,r;n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.pivotViewElement)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this)?this.widgetContainerHelper.showControlError(this,this.dataValues):(i=this.pivotViewElement[0].children.length>0?ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"):null,BoldBIDashboard.isNullOrUndefined(i)||this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design||this.widgetJson.FilterSettings.ActAsMasterWidget||(i.dataSourceSettings.filterSettings=this.initialGroupBarFilter.length>0?this.initialGroupBarFilter:[]),this.refresh(),BoldBIDashboard.isNullOrUndefined(this.pivotViewItem)||(r=this.designerInstance.isDarkTypeTheme(),this.applyPivotGridTheme(r),this.pivotViewItem.find(".e-grid").addClass("e-grid-dbrd-theme"),this.pivotViewItem.find(".e-pivotview").addClass("e-pivotview-dbrd-theme"))))},t.prototype.update=function(n){this.IsRendered=!1;this.updateTitleSubtitleTheme();this.updatePivotData(n);this.updateThemeInWidget(this.designerInstance.isDarkTypeTheme())},t.prototype.applyWidgetTheme=function(n){this.updateTitleSubtitleTheme();BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)?(this.refresh(),this.updateThemeInWidget(n)):BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this)},t.prototype.updateThemeInWidget=function(n){BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)?BoldBIDashboard.isNullOrUndefined(this.pivotViewItem)||(this.applyPivotGridTheme(n),this.pivotViewItem.find(".e-grid").addClass("e-grid-dbrd-theme"),this.pivotViewItem.find(".e-pivotview").addClass("e-pivotview-dbrd-theme")):BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this)},t.prototype.updateTitleSubtitleTheme=function(){var n=this.designerInstance.modules.themeHelper.getPivotGridHeaderTitle(),t=this.designerInstance.modules.themeHelper.getPivotGridHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getPivotProperties().ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej2.pivotgrid.all.min.js",NameSpace:"ejdashboard.pivotview.PivotView"},DependentScripts:[{ScriptName:"ej2.calendars.all.min.js",NameSpace:"ejdashboard.calendars.DatePicker"},{ScriptName:"ej2.chart.all.min.js",NameSpace:"ejdashboard.charts.Chart"}]}},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,"ejdashboard.pivotview.PivotView")},t.prototype.getFieldContainer=function(){var u=new BoldBIDashboard.Dashboard.FieldContainerForUI,t,i,r,f,e;return u.Name="Value",u.DisplayName=this.locale.fieldContainer.values,u.ContainerType=FieldContainerType.Numeric,u.Required=!0,u.QueryOrder=0,t=new BoldBIDashboard.Dashboard.FieldContainerForUI,t.Name="Row",t.DisplayName=this.locale.fieldContainer.rows,t.ContainerType=FieldContainerType.Non_Numeric,t.HasCustomDate=!0,t.QueryOrder=2,i=new BoldBIDashboard.Dashboard.FieldContainerForUI,i.Name="Column",i.DisplayName=this.locale.fieldContainer.columns,i.ContainerType=FieldContainerType.Non_Numeric,i.HasCustomDate=!0,i.QueryOrder=0,r=new BoldBIDashboard.Dashboard.FieldContainerForUI,r.Name="HiddenColumn",r.DisplayName=this.locale.fieldContainer.hiddenColumn,r.ContainerType=FieldContainerType.None,r.HasCustomDate=!0,r.QueryOrder=1,f=n.prototype.getFilterColumn.call(this),f.HasCustomDate=!0,e=BoldBIDashboard.DashboardUtil.getToolTipFieldsDefaultContainer(),[u,t,i,r,f,e]},t.prototype.onFieldSettingsClick=function(n,t){for(var i,r=0;r<t.length;r++){if(i=t[r].Name,(i===SummaryType.VAR||i===SummaryType.MEDIAN||i===SummaryType.COUNTD||i===DateTimeFormat.QuarterYear||i===DateTimeFormat.WeekYear)&&(t[r].IsVisible=!1),(i===SummaryType.COUNTD||i===DateTimeFormat.DayOfWeek)&&(t[r].EnableSeparator=!0),t[r].Items.length>0)this.onFieldSettingsClick(n,t[r].Items);(i==="First"||i==="Last")&&(t[r].IsVisible=!1);n.ContainerName==="HiddenColumn"&&i==="MeasureFormat"&&(t[r].IsVisible=!1)}return t},t.prototype.getJson=function(){return this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t)},t.prototype.getPropertyPanelItems=function(){return this.getPivotPropertyPanel()},t.prototype.updatePropertyChange=function(n,t,i,r){this.updatePivotProperties(n,t,i,r)},t.prototype.updateDataGroupInfo=function(t,i){n.prototype.updateDataGroupInfo.call(this,t,i);this.updateColorCustomizationCollection()},t.prototype.updateInitialSelection=function(){this.enableFilterIcon(this.widgetJson.FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(this.widgetJson.SelectedFilterValues)&&this.widgetJson.SelectedFilterValues.length>0)},t.prototype.clearFilter=function(n){this.pivotViewElement[0].classList.contains("e-pivotview")&&(BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this),this.widgetJson.SelectedFilterValues=[],this.updateSelectionCellInfo(!1),this.clearGroupBarFilter(),this.isCurrentMaster=!1,this.designerInstance.modules.serialization.notifyChange(),BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this),this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName))},t.prototype.getMobileViewHeight=function(){return 3*this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.refresh=function(){var n=this.pivotViewElement[0].children.length>0?ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"):null;BoldBIDashboard.isNullOrUndefined(n)||(n.refresh(),BoldBIDashboard.isNullOrUndefined(this.pivotViewItem)||(this.applyPivotGridTheme(this.designerInstance.isDarkTypeTheme()),this.pivotViewItem.find(".e-grid").addClass("e-grid-dbrd-theme"),this.pivotViewItem.find(".e-pivotview").addClass("e-pivotview-dbrd-theme")))},t.prototype.applyPivotGridTheme=function(n){var u=[],t=[],s=this.themeHelper.getPivotGroupingButtonBackground(),f=this.themeHelper.getPivotGridBorderColor(),b=this.themeHelper.getPivotGroupingButtonTextColor(),k=this.themeHelper.getPivotGroupingButtonBackground(),h=this.themeHelper.getPivotGroupingButtonIconColor(),d=this.themeHelper.getPivotGroupingButtonIconHoverBackground(),c=this.themeHelper.getPivotGroupingButtonIconHoverColor(),g=this.themeHelper.getPivotDialogHeaderBackground(),nt=this.themeHelper.getPivotDialogHeaderTextColor(),tt=this.themeHelper.getPivotDialogListBackground(),e=this.themeHelper.getPivotDialogListBoxTextColor(),it=this.themeHelper.getPivotDialogListSelectionBackground(),rt=this.themeHelper.getPivotDialogListBoxSelectionTextColor(),l=this.themeHelper.getPivotDialogListHoverBackground(),a=this.themeHelper.getPivotDialogListHoverTextColor(),ut=this.themeHelper.getPivotDialogFooterBackground(),r=this.designerInstance._id,i,o,v,y,p,w;t=[];t.push(r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-group-rows .e-pvt-btn-div .e-pivot-button",r+".e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-group-values .e-pvt-btn-div .e-pivot-button",r+".e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-group-columns .e-pvt-btn-div .e-pivot-button");i="\tbackground: "+s+" !important;\n\tborder-color:"+f+"!important";u.push({key:t+"",value:i});t=[];t.push(r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-group-rows .e-pvt-btn-div .e-pivot-button:hover",r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-group-values .e-pvt-btn-div .e-pivot-button:hover",r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-group-columns .e-pvt-btn-div .e-pivot-button:hover");i="\tbackground: "+d+" !important;\n\tcolor: "+c+" !important;\n\tborder-color:"+f+"!important";u.push({key:t+"",value:i});t.push(r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-group-rows .e-pvt-btn-div .e-pivot-button .e-content",r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-group-values .e-pvt-btn-div .e-pivot-button .e-content",r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-group-columns .e-pvt-btn-div .e-pivot-button .e-content ");i="\tbackground: "+s+" !important;\n\tborder: "+f+" !important;\n\tcolor: "+b+"!important;";u.push({key:t+"",value:i});t=[];t.push(r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-group-row .e-group-rows .e-pvt-btn-div .e-pivot-button .e-pv-filter",r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-group-row .e-group-rows .e-pvt-btn-div .e-pivot-button .e-sort",r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-group-columns .e-pvt-btn-div .e-pivot-button .e-sort",r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-group-columns .e-pvt-btn-div .e-pivot-button .e-pv-filter",r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-group-row .e-group-rows .e-pvt-btn-div .e-pivot-button .e-pv-filtered",r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-group-columns .e-pvt-btn-div .e-pivot-button .e-pv-filtered");i="\tbackground: "+k+" !important;\n\tcolor: "+h+" !important;";u.push({key:t+"",value:i});t=[];t.push(r+" .e-pivotview.e-pivotview-dbrd-theme .e-grid .e-icons",r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-pv-filtered:before ");i="\tcolor: "+h+" !important;\n";u.push({key:t+"",value:i});t=[];t.push(r+" .e-pivotview.e-pivotview-dbrd-theme .e-grid .e-icons:hover");i="\tcolor: "+c+" !important;\n";u.push({key:t+"",value:i});n&&(t=[],t.push(" .e-pivotview.e-pivotview-dbrd-theme .e-grid.e-control .e-frozencontent"),i="\tborder-bottom-color: "+f+" !important;\n",u.push({key:t+"",value:i}),t=[],t.push(" .e-pivotview.e-pivotview-dbrd-theme .e-grid.e-control .e-headercontent"),i="\tborder-color: "+f+" !important;\n",u.push({key:t+"",value:i}));t=[];t.push(" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-grouping-bar .e-right-axis-fields"," .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-grouping-bar .e-left-axis-fields"," .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-gridheader"," .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-frozenheader .e-table"," .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-frozencontent .e-table",".e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-grid.e-grid-dbrd-theme",".e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-grid.e-grid-dbrd-theme .e-rowcell",".e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-grid .e-stackedheadercell");i="\tborder-color:"+f+" !important;\n";u.push({key:t+"",value:i});t=[];t.push("#"+r+" .e-pivotview.e-pivotview-dbrd-theme .e-member-editor-dialog .e-dlg-header-content");i="\tbackground: "+g+" !important;\n";u.push({key:t+"",value:i});t=[];t.push("#"+r+" .e-pivotview.e-pivotview-dbrd-theme .e-member-editor-dialog .e-dlg-header");i="\tcolor: "+nt+" !important;\n";u.push({key:t+"",value:i});o=this.themeHelper.getPivotGridFilterListFont();v=this.themeHelper.getPivotGridFilterListSelectFont();t=[];t.push("#"+r+" .e-pivotview.e-pivotview-dbrd-theme .e-member-editor-dialog .e-dlg-content");i="\tbackground: "+tt+" !important;\n";u.push({key:t+"",value:i});t=[];t.push("#"+r+" .e-pivotview.e-pivotview-dbrd-theme .e-member-editor-dialog .e-list-text","#"+r+" .e-pivotview.e-pivotview-dbrd-theme .e-member-editor-dialog .e-editor-search-wrapper input::placeholder");i="\tcolor: "+e+" !important;\n"+v;u.push({key:t+"",value:i});t=[];t.push("#"+r+" .e-pivotview.e-pivotview-dbrd-theme .e-member-editor-dialog .e-editor-search-wrapper input");i="\tcolor: "+e+" !important;\n"+o;u.push({key:t+"",value:i});t=[];t.push("#"+r+" .e-pivotview.e-pivotview-dbrd-theme .e-member-editor-dialog .e-footer-content");i="\tbackground: "+ut+" !important;\n";u.push({key:t+"",value:i});var ft=this.themeHelper.getPivotDialogCancelButtonTextColor(),et=this.themeHelper.getPivotDialogCancelButtonBackground(),ot=this.themeHelper.getPivotDialogCancelButtonHoverBackground(),st=this.themeHelper.getPivotDialogCancelButtonHoverTextColor(),ht=this.themeHelper.getPivotDialogCancelButtonPressBackground(),ct=this.themeHelper.getPivotDialogCancelButtonPressTextColor();t=[];y=this.themeHelper.getPivotGridFilterCancelBtnFont();t.push("#"+r+" .e-pivotview.e-pivotview-dbrd-theme .e-member-editor-dialog .e-footer-content .e-cancel-btn");i="\tbackground: "+et+" !important;\n\tcolor: "+ft+" !important;"+y+"border-color:!important";u.push({key:t+"",value:i});t=[];t.push(r+" .e-pivotview.e-pivotview-dbrd-theme .e-member-editor-dialog .e-footer-content .e-cancel-btn:hover");i="\tbackground: "+ot+" !important;\n\tcolor: "+st+" !important;border-color:!important";u.push({key:t+"",value:i});t=[];t.push(r+" .e-pivotview.e-pivotview-dbrd-theme .e-member-editor-dialog .e-footer-content .e-cancel-btn:active");i="\tbackground: "+ht+" !important;\n\tcolor: "+ct+" !important;border-color:!important";u.push({key:t+"",value:i});var lt=this.themeHelper.getPivotDialogOkButtonTextColor(),at=this.themeHelper.getPivotDialogOkButtonBackground(),vt=this.themeHelper.getPivotDialogOkButtonHoverBackground(),yt=this.themeHelper.getPivotDialogOkButtonHoverTextColor(),pt=this.themeHelper.getPivotDialogOkButtonPressBackground(),wt=this.themeHelper.getPivotDialogOkButtonPressTextColor();t=[];p=this.themeHelper.getPivotGridFilterOkBtnFont();t.push("#"+r+" .e-pivotview.e-pivotview-dbrd-theme .e-member-editor-dialog .e-footer-content .e-ok-btn");i="\tbackground: "+at+" !important;\n\tcolor: "+lt+" !important;"+p+"border-color:!important";u.push({key:t+"",value:i});t=[];t.push(r+" .e-pivotview.e-pivotview-dbrd-theme .e-member-editor-dialog .e-footer-content .e-ok-btn:hover");i="\tbackground: "+vt+" !important;\n\tcolor: "+yt+" !important;border-color:!important";u.push({key:t+"",value:i});t=[];t.push(r+" .e-pivotview.e-pivotview-dbrd-theme .e-member-editor-dialog .e-footer-content .e-ok-btn:active");i="\tbackground: "+pt+" !important;\n\tcolor: "+wt+" !important;border-color:!important";u.push({key:t+"",value:i});t=[];t.push("#"+r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-control.e-treeview .e-list-item .bbi-text-content .e-list-text");u.push({key:t+"",value:o});t=[];t.push("#"+r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-control.e-treeview .e-list-item.e-active > .e-fullrow");i="\tbackground: "+it+" !important;\n\tcolor: "+rt+" !important;\nborder-color:transparent !important";u.push({key:t+"",value:i});t=[];t.push("#"+r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-control.e-treeview .e-list-item.e-hover > .e-fullrow");i="\tbackground: "+l+" !important;\n\tcolor: "+a+" !important;\nborder-color:transparent !important";u.push({key:t+"",value:i});t=[];t.push("#"+r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-control.e-treeview .e-list-item:hover");i="\tbackground: "+l+" !important;\n\tcolor: "+a+" !important;";u.push({key:t+"",value:i});t=[];t.push("#"+r+" .e-pivotview.e-pivotview-dbrd-theme .e-grid .e-icons:hover","#"+r+" .e-dashboardviewer .e-pivotview.e-pivotview-dbrd-theme .e-control.e-treeview .e-list-item.e-active>.bbi-text-content .e-list-text");i="\tcolor: "+e+" !important;\n";u.push({key:t+"",value:i});w=this.themeHelper.getPivotGridFilterHeaderFont();t=[];t.push("#"+r+" .e-pivotview.e-pivotview-dbrd-theme .e-member-editor-dialog .e-dlg-header");u.push({key:t+"",value:w});this.themeHelper.createandAppendCustomStyle(this.designerInstance._id+"_pivotViewStyle",u)},t.prototype.dispose=function(){this.disposePivotView();n.prototype.dispose.call(this)},t.prototype.onFieldDragDrop=function(){return!0},t.prototype.getWidgetInfo=function(t,i){var r=n.prototype.getWidgetInfo.call(this,t,i);return r.ColorCustomizations=this.getAppliedGradientColors(),r},t.prototype.getDefaultMeasureFormat=function(){var n=new MeasureFormatting;return n.Unit=NumberFormat.Ones,n},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.locale.itemPanel.widgetDataRequiredMessage.pivotGridDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.updateDisplayTextBasedProperties=function(){this.getColumnNamesCollection(this.dataValues);this.generateColumns();this.refresh()},t.prototype.createPivotViewContainer=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(this.isOpenReport=!0,BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)):n.prototype.setJson.call(this,t));this.updateQueryOrder(this.DataGroupInfo.FieldContainers);this.renderPivotViewElement();!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.PivotView)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.renderPivotViewElement=function(){this.pivotViewItem=BoldBIDashboard.buildTag("div.e-pivotviewitem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder,overflow:"hidden"},{id:this.designerId+"pivotViewItem"+this.widgetJson.UniqueName});this.pivotViewElement=BoldBIDashboard.buildTag("div.e-pivotview-element","",{width:"100%",height:"100%",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designerId+"pivotViewElement"+this.widgetJson.UniqueName});this.pivotViewItem.append(this.pivotViewElement);this.contentContainer.append(this.pivotViewItem);this.controlContainer.data("widgetInstance",this)},t.prototype.createPivotObject=function(n){var t=new ejdashboard.pivotview.PivotView({actionBegin:this.bbdesigner$.proxy(this.restrictControlResize,this),dataSourceSettings:n,allowCalculatedField:!0,showGroupingBar:this.getPivotProperties().GroupBarSettings.ShowGroupBar,enableValueSorting:this.getPivotProperties().BasicSettings.EnableValueSorting,cellClick:this.bbdesigner$.proxy(this.pivotItemClick,this),dataBound:this.bbdesigner$.proxy(this.dataBound,this),memberFiltering:this.bbdesigner$.proxy(this.memberFiltering,this),hyperlinkCellClick:this.bbdesigner$.proxy(this.pivotItemClick,this),hyperlinkSettings:{showColumnHeaderHyperlink:!1,showRowHeaderHyperlink:!1,showSummaryCellHyperlink:!1,showValueCellHyperlink:!1},memberEditorOpen:this.bbdesigner$.proxy(this.memberEditorOpen,this),groupingBarSettings:{showFilterIcon:this.getPivotProperties().GroupBarSettings.ShowFilterIcon,showRemoveIcon:!1,showSortIcon:this.getPivotProperties().GroupBarSettings.ShowSortIcon,allowDragAndDrop:!1,showValueTypeIcon:!1},cellSelecting:this.bbdesigner$.proxy(this.cellSelecting,this),gridSettings:{allowResizing:this.getPivotProperties().BasicSettings.AllowContentToFit&&!this.getPivotProperties().BasicSettings.AllowColumnResize?!0:this.getPivotProperties().BasicSettings.AllowColumnResize,allowTextWrap:this.getPivotProperties().BasicSettings.AllowTextWrap,queryCellInfo:this.bbdesigner$.proxy(this.queryCellInfo,this),allowSelection:!0,selectionSettings:{mode:"Cell",type:"Single"},resizeStart:this.bbdesigner$.proxy(this.resizeStarted,this),headerCellInfo:this.bbdesigner$.proxy(this.headerCellInfo,this),columnWidth:this.getPivotProperties().ContentSettings.ColumWidth,rowHeight:this.getPivotProperties().ContentSettings.RowHeight,columnRender:this.bbdesigner$.proxy(this.pivotAlignmentSettings,this)},enableVirtualization:this.isVirtualizationRequired(),load:this.bbdesigner$.proxy(this.loadedEvent,this),drill:this.bbdesigner$.proxy(this.drillEvent,this),allowDrillThrough:!0,drillThrough:this.bbdesigner$.proxy(this.drillThrough,this),width:"100%",height:"100%",minHeight:0,resizedValue:this.getPivotProperties().ContentSettings.HeaderColumWidth});return this.pivotViewElement[0].classList.contains("e-pivotview")||t.appendTo(this.pivotViewElement[0]),t},t.prototype.isVirtualizationRequired=function(){return!(this.getPivotProperties().BasicSettings.AllowTextWrap||this.getPivotProperties().BasicSettings.AllowColumnResize||this.getPivotProperties().BasicSettings.AllowContentToFit)},t.prototype.updatePivotData=function(n){this.dataValues=n;this.isBoldCustomizationApplied=!1;this.caluculatedFields=[];BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this);BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this);var t=null,r=null,i=!1;this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo);BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error?BoldBIDashboard.isNullOrUndefined(n.Message)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.widgetContainerHelper.showControlError(this,n)):(n.noDataAvailable?(this.pivotViewItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this),this.IsRendered=!0):(this.pivotViewItem.show(),BoldBIDashboard.isNullOrUndefined(n)||n.data==="[]"||!BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)||typeof n=="string"&&n.indexOf("Sf_Exception")!==-1?(n.data==="[]"&&BoldBIDashboard.DashboardUtil.IsColumnBindingsEmpty(this.DataColumnBindings)||!BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty)&&(this.pivotViewItem.hide(),this.clearFilter(!1)):(t=JSON.parse(n.data),t=this.dateFieldConversion(t),this.updateDataColumnBindings(BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardUtil.getColumnBindings(this))?{}:BoldBIDashboard.DashboardUtil.getColumnBindings(this)),r=this.DataColumnBindings,this.getColumnNamesCollection(n),this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0?(this.minMaxValues=BoldBIDashboard.isNullOrUndefined(n.minMaxValues)?{}:JSON.parse(n.minMaxValues),i=!0,this.updateDataSource(t),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this)):this.pivotViewItem.hide())),this.designerInstance.modules.util.updateAction("PivotGrid","Link","Link"));this.designerInstance.isDesignMode()&&(this.setPropertyElement("Formatting","ColorSettings",this.getPivotProperties().ColorCustomizations),this.propertyPanel.updateItemVisibility("PivotGrid","Formatting","ColorSettings",i),this.propertyPanel.updateCategoryVisibility("PivotGrid","EditFieldSettings",!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0),this.propertyPanel.updateItemVisibility("PivotGrid","EditFieldSettings","ColumnOptions",!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0));this.refresh()},t.prototype.dateFieldConversion=function(n){for(var r,t,e,f,u=[],o=[],i=0;i<this.DataGroupInfo.FieldContainers.length;i++)for(t=0;t<this.DataGroupInfo.FieldContainers[i].FieldInfos.length;t++)r=this.DataGroupInfo.FieldContainers[i].FieldInfos[t],(r.DateTimeFormat===DateTimeFormat.Date||r.DateTimeFormat===DateTimeFormat.Default||r.DateTimeFormat===DateTimeFormat.DateTime)&&u.push({uniqueName:r.UniqueColumnName,dateType:r.DateTimeFormat}),(r.ContainerName==="Row"||r.ContainerName==="Column")&&o.push({uniqueName:r.UniqueColumnName});if(u.length>0)for(i=0;i<n.length;i++)for(t=0;t<u.length;t++)e=n[i][u[t].uniqueName],f=this.designerInstance.model.localeSettings.dateFormat,u[t].dateType===DateTimeFormat.DateTime||u[t].dateType===DateTimeFormat.Default?(f+=" "+this.designerInstance.model.localeSettings.timeFormat,n[i][u[t].uniqueName]=BoldBIDashboard.parseDate(e,f)):n[i][u[t].uniqueName]=BoldBIDashboard.parseDate(e,f);return this.pivotViewData=JSON.parse(JSON.stringify(n)),this.getPivotProperties().BasicSettings.HideEmptyHeaders&&(n=this.replaceNullAndBlankValues(o,n)),n},t.prototype.replaceNullAndBlankValues=function(n,t){var i,r;if(n.length>0)for(i=0;i<t.length;i++)for(r=0;r<n.length;r++)(t[i][n[r].uniqueName]==="(Null)"||t[i][n[r].uniqueName]==="(Blanks)")&&(t[i][n[r].uniqueName]=undefined);return t},t.prototype.memberEditorOpen=function(n){var o=n.fieldMembers.filter(function(n){return n.id!=="undefined"}),i="#"+this.designerId+"pivotViewElement"+this.widgetJson.UniqueName+"_EditorTreeView",f=160,r=190,u=f+r,t=this.contentContainer.height()<=u?this.contentContainer.height()-10:u,s=t<u?t>r?t-r:0:f,e=" "+("#"+this.designerId+"pivotViewElement"+this.widgetJson.UniqueName)+" .e-member-editor-container-outer-div {height:"+s+"px !important;}"+("#"+this.designerId+"pivotViewElement"+this.widgetJson.UniqueName)+" .e-member-editor-dialog {min-height:100px !important;}"+("#"+this.designerId+"pivotViewElement"+this.widgetJson.UniqueName)+" .e-member-editor-dialog {max-height:"+t+"px !important;}";n.fieldMembers=o;this.pivotViewElement.find(i).find("#"+this.designerId+this.widgetJson.UniqueName+"_member_filter_height").length>0?this.pivotViewElement.find(i).find("#"+this.designerId+this.widgetJson.UniqueName+"_member_filter_height").html(e):this.pivotViewElement.find(i).append('<style id="'+(this.designerId+this.widgetJson.UniqueName+"_member_filter_height")+'">'+e+"<\/style>")},t.prototype.getValues=function(){for(var t,i,r=[],u=null,n=0;n<this.DataGroupInfo.FieldContainers.length;n++)for(t=0;t<this.DataGroupInfo.FieldContainers[n].FieldInfos.length;t++)i=this.DataGroupInfo.FieldContainers[n].FieldInfos[t],(i.ContainerName==="Row"||i.ContainerName==="Column")&&r.push({uniqueName:i.UniqueColumnName});return u=JSON.parse(JSON.stringify(this.pivotViewData)),this.replaceNullAndBlankValues(r,u)},t.prototype.updateDataSource=function(n){var t,r=this.genearteFieldCollectionFromGroupInfo(this.getValueContainer().FieldInfos),u=this.genearteFieldCollectionFromGroupInfo(this.getRowContainer().FieldInfos),f=this.genearteFieldCollectionFromGroupInfo(this.getColumnContainer().FieldInfos),i={dataSource:n,values:r,rows:u,columns:f,filters:[],valueAxis:this.getPivotProperties().BasicSettings.ShowValuesInRowAxis?"row":"column",filterSettings:this.getGroupBarFilterinformation(),formatSettings:this.getformatSettings(),sortSettings:this.getSortSettings(),drilledMembers:this.getPivotProperties().BasicSettings.EnablePersistence?this.getDrilledMembers():[],calculatedFieldSettings:this.caluculatedFields,enableSorting:!0,valueSortSettings:{headerDelimiter:String.fromCharCode(127)},expandAll:this.getPivotProperties().BasicSettings.ExpandAllNode,showRowGrandTotals:this.getPivotProperties().GrandTotalSettings.ShowRowGrandTotals,showColumnGrandTotals:this.getPivotProperties().GrandTotalSettings.ShowColumnGrandTotals,showRowSubTotals:this.getPivotProperties().GrandTotalSettings.ShowRowSubTotals,showColumnSubTotals:this.getPivotProperties().GrandTotalSettings.ShowColumnSubTotals,showAggregationOnValueField:!1,showHeaderWhenEmpty:!this.getPivotProperties().BasicSettings.HideEmptyHeaders,emptyCellsTextContent:this.getPivotProperties().BasicSettings.EmptyCellsContent};this.pivotViewElement[0].classList.contains("e-pivotview")?(t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),t.dataSourceSettings=i):t=this.createPivotObject(i);this.enableHyperlink()},t.prototype.genearteFieldCollectionFromGroupInfo=function(n){for(var i=[],u=function(r){var u=t.getPivotProperties().FieldSettings.CustomFieldSettings.filter(function(t){return t.UniqueColumnName===n[r].UniqueColumnName}),f=!BoldBIDashboard.isNullOrUndefined(t.dataValues.Expressions)&&t.dataValues.Expressions.filter(function(t){return t.Key===n[r].UniqueColumnName}).length>0,e=f&&n[r].SummaryType===SummaryType.AVG;!BoldBIDashboard.isNullOrUndefined(t.dataValues.Expressions)&&t.dataValues.Expressions.length>0&&(f&&!BoldBIDashboard.isNullOrUndefined(n[r].IsAggregatedExpression)&&n[r].IsAggregatedExpression||f)?(i.push({name:n[r].UniqueColumnName+"_calc",caption:u.length>0?u[0].DisplayName:n[r].Name,type:"CalculatedField",showNoDataItems:u.length>0?u[0].ShowNoDataItem:!1}),t.caluculatedFields.push({name:n[r].UniqueColumnName+"_calc",formula:t.getExpression(n[r].UniqueColumnName,n[r].IsAggregatedExpression||e)})):i.push({name:n[r].UniqueColumnName,caption:u.length>0?u[0].DisplayName:n[r].Name,type:BoldBIDashboard.Dashboard.PivotViewHelper.getPivotSummaryType(n[r].SummaryType),showNoDataItems:u.length>0?u[0].ShowNoDataItem:!1})},t=this,r=0;r<n.length;r++)u(r);return i},t.prototype.getExpression=function(n,t){var i=this.dataValues.Expressions.filter(function(t){return t.Key===n})[0].Value;return t?(i=i.replaceAll("sum(",'"Sum(').replaceAll("min(",'"Min(').replaceAll("max(",'"Max(').replaceAll("avg(",'"Sum(').replaceAll("count(",'"Sum(').replaceAll("countd(",'"Sum('),i=i.replaceAll("[","").replaceAll("])",')"')):i=i.replaceAll("sum(",'"Sum(').replaceAll("[","").replaceAll("])",')"'),i},t.prototype.resetDrilledMembers=function(){this.getPivotProperties().DrilledMembers=[];this.designerInstance.modules.serialization.notifyChange();BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.setMergeAction(!1)},t.prototype.getPivotPropertyPanel=function(){var t={Header:this.widgetJson.ContainerSettings.Title,SubTitle:this.widgetJson.ContainerSettings.SubTitle,Description:this.widgetJson.ContainerSettings.Description,Type:"PivotGrid",Items:[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"ShowTooltip",displayName:this.locale.propertyPanel.basicSettings.showTooltip,value:this.getPivotProperties().BasicSettings.ShowTooltip,itemType:"bool"},{name:"EnableValueSorting",displayName:this.locale.propertyPanel.basicSettings.enableValueSorting,value:this.getPivotProperties().BasicSettings.EnableValueSorting,itemType:"bool"},{name:"ExpandAllNode",displayName:this.locale.propertyPanel.basicSettings.expandAllNode,value:this.getPivotProperties().BasicSettings.ExpandAllNode,itemType:"bool"},{name:"EnablePersistence",displayName:this.locale.propertyPanel.basicSettings.enablePersistence,isVisible:!this.getPivotProperties().BasicSettings.ExpandAllNode,itemType:"bool",icon:{"class":"e-dbrd-pivot-description bbi-dbrd-designer-hoverable",tooltip:this.locale.propertyPanel.persistenceNotificationsText,link:"https://help.boldbi.com/embedded-bi/visualizing-data/visualization-widgets/pivot-grid/#save-nodes-state",visibility:"true"}},{name:"AllowTextWrap",displayName:this.locale.propertyPanel.basicSettings.allowTextWrap,value:this.getPivotProperties().BasicSettings.AllowTextWrap,itemType:"bool",icon:{"class":"bbi-dbrd-warn-info-icon bbi-dbrd-designer-icon bbi-dbrd-designer-hoverable",tooltip:this.locale.propertyPanel.performanceDelayNotificationsText,link:"https://help.boldbi.com/visualizing-data/visualization-widgets/pivot-grid/#allow-text-wrap",visibility:"true"}},{name:"AllowColumnResize",displayName:this.locale.propertyPanel.basicSettings.allowColumnResize,value:this.getPivotProperties().BasicSettings.AllowColumnResize,itemType:"bool",isVisible:!0,icon:{"class":"bbi-dbrd-warn-info-icon bbi-dbrd-designer-icon bbi-dbrd-designer-hoverable",tooltip:this.locale.propertyPanel.performanceDelayNotificationsText,link:"https://help.boldbi.com/visualizing-data/visualization-widgets/pivot-grid/#allow-column-resize",visibility:"true"}},{name:"AllowContentToFit",displayName:this.locale.propertyPanel.basicSettings.allowResizeToFit,value:this.getPivotProperties().BasicSettings.AllowContentToFit,itemType:"bool",isVisible:!0,icon:{"class":"bbi-dbrd-warn-info-icon bbi-dbrd-designer-icon bbi-dbrd-designer-hoverable",tooltip:this.locale.propertyPanel.performanceDelayNotificationsText,link:"https://help.boldbi.com/visualizing-data/visualization-widgets/pivot-grid/#fit-to-content",visibility:"true"}},{name:"ValueFieldsInRow",displayName:this.locale.propertyPanel.basicSettings.valuesInRow,value:this.getPivotProperties().BasicSettings.ShowValuesInRowAxis,itemType:"bool",isVisible:!0},{name:"HideEmptyHeaders",displayName:this.locale.propertyPanel.basicSettings.hideEmptyHeaders,value:this.getPivotProperties().BasicSettings.HideEmptyHeaders,itemType:"bool",isVisible:!0},{name:"EmptyCellsContent",displayName:this.locale.propertyPanel.basicSettings.emptyCellsContent,value:this.getPivotProperties().BasicSettings.EmptyCellsContent,itemType:"text",isVisible:!0}]},{CategoryName:"Content Settings",DisplayName:this.locale.propertyPanel.contentSettingsText,Items:[{name:"RowHeight",isVisible:!0,displayName:this.locale.propertyPanel.basicSettings.rowHeight,value:this.getPivotProperties().ContentSettings.RowHeight,itemType:"float",decimalPlaces:0,minimum:25,maximum:120,unitType:"px",isDisable:this.getPivotProperties().BasicSettings.AllowTextWrap},{name:"ColumWidth",isVisible:!0,displayName:this.locale.propertyPanel.basicSettings.columWidth,value:this.getPivotProperties().ContentSettings.ColumWidth,itemType:"float",decimalPlaces:0,minimum:10,maximum:500,unitType:"px",isDisable:this.getPivotProperties().BasicSettings.AllowContentToFit},{name:"HeaderColumWidth",isVisible:!0,displayName:this.locale.propertyPanel.basicSettings.headerColumWidth,value:this.getPivotProperties().ContentSettings.HeaderColumWidth,itemType:"float",decimalPlaces:0,minimum:this.getPivotProperties().GroupBarSettings.ShowGroupBar?250:50,maximum:1e3,unitType:"px",isDisable:this.getPivotProperties().BasicSettings.AllowContentToFit}]},{CategoryName:"Group Bar Settings",DisplayName:this.locale.propertyPanel.groupBarSettingsText,Items:[{name:"ShowGroupBar",displayName:this.locale.propertyPanel.groupBarSettings.showGroupBar,value:this.getPivotProperties().GroupBarSettings.ShowGroupBar,itemType:"bool"},{name:"ShowSortIcon",displayName:this.locale.propertyPanel.groupBarSettings.showSortIcon,isVisible:this.getPivotProperties().GroupBarSettings.ShowGroupBar,value:this.getPivotProperties().GroupBarSettings.ShowSortIcon,itemType:"bool"},{name:"ShowFilterIcon",displayName:this.locale.propertyPanel.groupBarSettings.showFilterIcon,isVisible:this.getPivotProperties().GroupBarSettings.ShowGroupBar,value:this.getPivotProperties().GroupBarSettings.ShowFilterIcon,itemType:"bool"}]},{CategoryName:"Grand Totals Settings",DisplayName:this.locale.propertyPanel.grandTotalsSettingsText,Items:[{name:"ShowRowGrandTotals",displayName:this.locale.propertyPanel.grandTotalsSettings.showRowGrandTotals,value:this.getPivotProperties().GrandTotalSettings.ShowRowGrandTotals,itemType:"bool"},{name:"RowGrandTotalText",displayName:"",value:this.getPivotProperties().GrandTotalSettings.RowGrandTotalText,itemType:"text",placeHolder:this.locale.common.auto,isVisible:!1},{name:"ShowColumnGrandTotals",displayName:this.locale.propertyPanel.grandTotalsSettings.showColumnGrandTotals,value:this.getPivotProperties().GrandTotalSettings.ShowColumnGrandTotals,itemType:"bool"},{name:"ColumnGrandTotalText",displayName:"",value:this.getPivotProperties().GrandTotalSettings.ColumnGrandTotalText,itemType:"text",placeHolder:this.locale.common.auto,isVisible:!1},{name:"ShowRowSubTotals",displayName:this.locale.propertyPanel.grandTotalsSettings.showRowSubTotals,value:this.getPivotProperties().GrandTotalSettings.ShowRowSubTotals,itemType:"bool"},{name:"ShowColumnSubTotals",displayName:this.locale.propertyPanel.grandTotalsSettings.showColumnSubTotals,value:this.getPivotProperties().GrandTotalSettings.ShowColumnSubTotals,itemType:"bool"}]},{CategoryName:"Edit Field Settings",DisplayName:this.locale.propertyPanel.editFieldSettingsText,IsVisible:this.DataGroupInfo.FieldContainers.length>0?!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0:!1,Items:[{name:"ColumnOptions",isVisible:this.DataGroupInfo.FieldContainers.length>0?!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0||!BoldBIDashboard.isNullOrUndefined(this.getColumnContainer())&&this.getColumnContainer().FieldInfos.length>0:!1,itemType:"object",callbackInstance:this,callbackMethod:"renderColumnOptions"}]},{CategoryName:"Alignment Settings",DisplayName:this.locale.propertyPanel.alignmentSettingsText,Items:[{name:"RowHeader",displayName:this.locale.propertyPanel.alignmentSettings.rowHeaderText,isVisible:!0,value:this.getPivotProperties().AlignmentSettings.RowHeader,itemType:"dropdown",valueList:["Left","Right","Center"]},{name:"ColumnHeader",displayName:this.locale.propertyPanel.alignmentSettings.columnHeaderText,isVisible:!0,value:this.getPivotProperties().AlignmentSettings.ColumnHeader,itemType:"dropdown",valueList:["Left","Right","Center"]},{name:"Value",displayName:this.locale.propertyPanel.alignmentSettings.valueText,isVisible:!0,value:this.getPivotProperties().AlignmentSettings.Value,itemType:"dropdown",valueList:["Left","Right","Center"]}]},{CategoryName:"Link",DisplayName:this.locale.propertyPanel.linkText,Items:[{name:"Link",value:n.prototype.useExistingLink.call(this),category:"Item",itemType:"link",enableMode:LinkEnableMode.Both}]},{CategoryName:"Formatting",DisplayName:this.locale.propertyPanel.formattingText,Items:[{name:"GroupPanelBackground",displayName:this.locale.propertyPanel.pivotFormattingSettings.groupPanelBackground,value:this.getPivotProperties().GroupBarSettings.GroupPanelBackgroundColor.Color,itemType:"color"},{name:"HeaderBackground",displayName:this.locale.propertyPanel.pivotFormattingSettings.headerBackground,value:this.getPivotProperties().NewHeaderSettings.Background.Color,itemType:"color"},{name:"HeaderForeground",displayName:this.locale.propertyPanel.pivotFormattingSettings.headerForeground,value:this.getPivotProperties().NewHeaderSettings.Foreground.Color,itemType:"color"},{name:"ColorSettings",callbackInstance:this,isVisible:this.DataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0,callbackMethod:"renderColorSettings",itemType:"object",elementType:"PivotView"},]},{CategoryName:"FontSettings",DisplayName:this.locale.propertyPanel.fontSettings.categoryDisplayName,Items:[{name:"Header",displayName:this.locale.propertyPanel.fontSettings.header,itemType:"fontSettings",autoFontSettingsInfo:{name:"AutoHeaderFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,value:this.getPivotProperties().IsAutoHeaderFontSize,itemType:"bool"},fontSizeInfo:{name:"HeaderFontSize",isDisable:this.getPivotProperties().IsAutoHeaderFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getPivotProperties().HeaderFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}},{name:"Content",displayName:this.locale.propertyPanel.fontSettings.content,itemType:"fontSettings",autoFontSettingsInfo:{name:"AutoContentFontSize",displayName:this.locale.propertyPanel.basicSettings.autoFontSize,value:this.getPivotProperties().IsAutoContentFontSize,itemType:"bool"},fontSizeInfo:{name:"ContentFontSize",isDisable:this.getPivotProperties().IsAutoContentFontSize,displayName:this.locale.propertyPanel.basicSettings.fontSize,value:this.getPivotProperties().ContentFontSize,itemType:"float",decimalPlaces:0,minimum:10,maximum:60,unitType:"px"}},]}]};return t.Items.push(this.containerPropertyItem.getFilterSettingsItems(this.getPivotProperties().FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo)),t.Items.push(this.containerPropertyItem.getContainerSettingItems(this.getPivotProperties().ContainerSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo)),t.Items.push(this.containerPropertyItem.getContainerActionsItems(this.getPivotProperties().ContainerSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo)),t.Items.push(BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem.getNoDataContainerActionsProperty(this.locale.propertyPanel.noDataContainerText)),t},t.prototype.updatePivotProperties=function(t,i,r,u){var s,h=!1,f,e,c,o;switch(t){case"Name":this.widgetJson.ContainerSettings.Title=r;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,r);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,r);break;case"EnableValueSorting":this.updateValueSorting(r);break;case"ShowTooltip":this.updateShowTooltip(r);break;case"ExpandAllNode":this.updateNodeExpand(r);break;case"ShowNoDataItems":this.updateNodeExpand(r);break;case"AllowTextWrap":this.updateTextWrapping(r);break;case"ValueFieldsInRow":this.updateRowFields(r);break;case"EmptyCellsContent":this.updateEmptyCellsContent(r);break;case"EnablePersistence":this.updateDrilledMembers(r);break;case"ShowGroupBar":this.updateGroupBarSettings(r);break;case"ShowSortIcon":this.updateSortIconSettings(r);break;case"ShowFilterIcon":this.updateFilterIconSettings(r);break;case"ShowRowGrandTotals":this.updateRowGrandTotals(r);break;case"ShowRowSubTotals":this.updateRowSubTotals(r);break;case"ShowColumnGrandTotals":this.updateColumnGrandTotals(r);break;case"ShowColumnSubTotals":this.updateColumnSubTotals(r);break;case"RowGrandTotalText":this.updateRowGrandTotalText(r);break;case"ColumnGrandTotalText":this.updateColumnGrandTotalText(r);break;case"AllowColumnResize":this.updateColumnResize(r);break;case"AllowContentToFit":this.updateContentFit(r);break;case"AutoHeaderFontSize":this.updateAutoHeaderFontSize(r);break;case"HeaderFontSize":this.updateHeaderFontSize(r);break;case"AutoContentFontSize":this.updateAutoContentFontSize(r);break;case"ContentFontSize":this.updateContentFontSize(r);break;case"ItemLink":n.prototype.updateLink.call(this,r);this.widgetJson.UrlLink.ColumnUrlDetails=r.ColumnUrlDetails;this.updateHyperlinkSetting(i,r.EnableLink);this.refresh();break;case"GroupPanelBackground":this.getPivotProperties().GroupBarSettings.GroupPanelBackgroundColor.Color=r;this.getPivotProperties().GroupBarSettings.GroupPanelBackgroundColor.IsEdited=!0;this.refresh();break;case"HeaderForeground":this.getPivotProperties().NewHeaderSettings.Foreground.Color=r;this.getPivotProperties().NewHeaderSettings.Foreground.IsEdited=!0;this.refresh();break;case"HeaderBackground":this.getPivotProperties().NewHeaderSettings.Background.Color=r;this.getPivotProperties().NewHeaderSettings.Background.IsEdited=!0;this.refresh();break;case"ActAsMasterWidget":this.getPivotProperties().FilterSettings.ActAsMasterWidget=r;this.updateGroupBarFilterInformation();r?this.disableHyperlink():this.getPivotProperties().UrlLink.EnableLink&&this.enableHyperlink();break;case"FieldNameChange":this.updateDisplayTextBasedProperties();break;case"RowHeight":this.updateRowHeight(r);break;case"ColumWidth":this.updateColumWidth(r);break;case"HeaderColumWidth":this.updateHeaderColumWidth(r);break;case"HideEmptyHeaders":this.HideEmptyHeaders(r);break;case"RowHeader":this.getPivotProperties().AlignmentSettings.RowHeader=r;this.refresh();break;case"ColumnHeader":this.getPivotProperties().AlignmentSettings.ColumnHeader=r;this.refresh();break;case"Value":this.getPivotProperties().AlignmentSettings.Value=r;this.refresh();break;default:h=!0}if(BoldBIDashboard.isNullOrUndefined(s)||(i=s),!h&&!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)){if(BoldBIDashboardDesigner.editManager.isPerformAction&&(f=this.designPanelInstance.selectedReportItems,f.length>0))for(e=0;e<f.length;e++)c=f[e],c.attr("id")===this.controlContainer.attr("id")&&(o=this.bbdesigner$.extend(!0,{},u),o.categoryName=u.categoryName,o.valueList=u.valueList,this.propertyPanel.updatePropertyValue(o,"PivotView",r));BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-pivotview-item",this.designerId+"_"+this.widgetJson.UniqueName,[t,r,i,u],[t,i,r,u])}},t.prototype.filterPivotView=function(n){var v,s,p,o,w;if((n.data.axis==="row"||n.data.axis==="column")&&!BoldBIDashboard.isNullOrUndefined(n.data.valueSort.axis)){if(v=this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name==="Value"})[0].FieldInfos.filter(function(t){return t.UniqueColumnName===n.data.valueSort.axis}),v.length!==0)return;this.getPivotProperties().SelectionCellInfo.ColumnIndex=n.data.colIndex;this.getPivotProperties().SelectionCellInfo.RowIndex=n.data.rowIndex;this.getPivotProperties().SelectionCellInfo.Header=n.data.valueSort.levelName;this.getPivotProperties().SelectionCellInfo.CellType=n.data.axis;this.getPivotProperties().SelectionCellInfo.IsSelected=!0;this.updateSelectionCellInfo(!0);var h=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),c=[],y=Number(n.currentCell.getAttribute("aria-colindex")),e=Number(n.currentCell.getAttribute("index")),i=h.pivotValues[e][y],u=i.level,l=[],a=i.axis==="row"?this.getRowContainer().FieldInfos[u]:this.getColumnContainer().FieldInfos[u];l.push(a);var r=a.UniqueColumnName,f=i.formattedText,b=t.hasCustomDate(a);for(b&&(r=r+"_CustomFormat",o=JSON.parse(this.dataValues.data),f=o[i.index[0]][r]),c[r]=f;i&&(u>0||i.index===undefined)&&n.data.axis!=="value";)e--,i=h.pivotValues[e]?h.pivotValues[e][y]:undefined,i&&i.index!==undefined&&i.valueSort.axis!==r&&(u>i.level&&i.valueSort&&(s=i.axis==="row"?this.getRowContainer().FieldInfos[i.level]:this.getColumnContainer().FieldInfos[i.level],l.push(s),r=s.UniqueColumnName,f=i.formattedText,p=t.hasCustomDate(s),p&&(r=r+"_CustomFormat",o=JSON.parse(this.dataValues.data),f=o[i.index[0]][r]),c[r]=f),u=i.level);if(this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;w=this.getSelectedFilterInformation(!1);this.widgetJson.SelectedFilterValues=[];this.masterFilterWindowInstance.configureSelectedFilterInfo(this.widgetJson,l,c);this.updateSelectedFilterInformation(w);this.enableFilterIcon(!0);this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName);this.designerInstance.modules.serialization.notifyChange()}},t.prototype.processFilterInformation=function(n){var i=this.DataGroupInfo.FieldContainers,h=n.filters,u=this.getColumnForWidgetFilterAPI(h,i),r=u[0],e=u[1],o=u[2],c=u[3],t,f,s;if(o.length>0)return r=[],e={},console.error("Given column name(s) ["+o+"] were not found in "+this.widgetJson.ContainerSettings.Title),!1;if(c&&(console.error("ColumnName should not be empty for API filtering"),r.length===0))return!1;if(r.length===0&&o.length===0)for(t=0;t<i.length;t++)for(f=0;f<i[t].FieldInfos.length;f++)if(s=i[t].FieldInfos[f],i[t].Name==="Row"){e[s.UniqueColumnName]=h[0].values[0];r.push(s);break}return this.widgetJson.SelectedFilterValues=[],this.masterFilterWindowInstance.configureSelectedFilterInfo(this.widgetJson,r,e),!0},t.prototype.HideEmptyHeaders=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");this.getPivotProperties().BasicSettings.HideEmptyHeaders=n;t.dataSourceSettings.dataSource=n?this.getValues():this.pivotViewData;t.dataSourceSettings.showHeaderWhenEmpty=!n;this.refresh()},t.prototype.drillEvent=function(n){var r,t,i;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length>0&&this.getPivotProperties().BasicSettings.EnablePersistence&&!this.getPivotProperties().BasicSettings.ExpandAllNode){for(r=[],t=0;t<n.pivotview.dataSourceSettings.drilledMembers.length;t++)i=new DrilledMembers,i.Name=n.pivotview.dataSourceSettings.drilledMembers[t].name,i.Items=n.pivotview.dataSourceSettings.drilledMembers[t].items,r.push(i);this.getPivotProperties().DrilledMembers=r;this.designerInstance.modules.serialization.notifyChange();BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.setMergeAction(!1)}},t.prototype.drillThrough=function(n){n.cancel=!0},t.prototype.getDrilledMembers=function(){for(var t=[],n=0;n<this.getPivotProperties().DrilledMembers.length;n++)t.push({name:this.getPivotProperties().DrilledMembers[n].Name,items:this.getPivotProperties().DrilledMembers[n].Items});return t},t.prototype.resizeStarted=function(n){this.getPivotProperties().BasicSettings.AllowContentToFit&&!this.getPivotProperties().BasicSettings.AllowColumnResize?n.cancel=!0:n.e.stopPropagation()},t.prototype.loadedEvent=function(){var n=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");BoldBIDashboard.isNullOrUndefined(n)||(n.tooltip&&n.tooltip.destroy(),n.tooltip=new ejdashboard.popups.Tooltip({target:"td.e-valuescontent,th.e-columnsheader,td.e-rowsheader",mouseTrail:!0,showTipPointer:!1,enableRtl:n.enableRtl,beforeRender:this.bbdesigner$.proxy(this.setToolTip,this,n),beforeOpen:this.addToolTipClass}),n.tooltip.appendTo(n.element))},t.prototype.addToolTipClass=function(n){n.element.classList.add("e-pivottooltipwrap")},t.prototype.setToolTip=function(n,t){var c,l,a,h=Number(t.target.getAttribute("aria-colindex")),v=Number(t.target.getAttribute("index")),f=n.pivotValues[v][h],b=this.pivotViewElement[0].style.zIndex+"10000",o,y,p,s,w,e,i;if(n.tooltip.content="",o=[],y=0,this.getPivotProperties().BasicSettings.ShowTooltip){if(f)switch(f.axis){case"value":for(n.dataSourceSettings.columns.length>0&&(p=n.dataSourceSettings.values.length===0?0:Number(Object.keys(n.engineModule.headerContent)[Object.keys(n.engineModule.headerContent).length-1]),y=n.dataSourceSettings.values.length>1?n.pivotValues[p][h].valueSort.levelName.split(String.fromCharCode(127)).length-1:n.pivotValues[p][h].valueSort.levelName.split(String.fromCharCode(127)).length),i=0;i<n.pivotValues[v][0].valueSort.levelName.split(String.fromCharCode(127)).length&&n.dataSourceSettings.rows.length>0;i++)BoldBIDashboard.isNullOrUndefined(n.dataSourceSettings.rows[i])||o.push((c={},c[n.dataSourceSettings.rows[i].caption]=n.pivotValues[v][0].valueSort.levelName.split(String.fromCharCode(127))[i],c));for(s=0;s<y;s++)BoldBIDashboard.isNullOrUndefined(n.dataSourceSettings.columns[s])||o.push((l={},l[n.dataSourceSettings.columns[s].caption]=n.pivotValues[Number(Object.keys(n.engineModule.headerContent)[Object.keys(n.engineModule.headerContent).length-1])][h].valueSort.levelName.split(String.fromCharCode(127))[s],l));for(BoldBIDashboard.isNullOrUndefined(n.engineModule.fieldList[f.actualText])||o.push((a={},a[n.engineModule.fieldList[f.actualText].caption]=f.formattedText==="0"||f.formattedText===""?n.localeObj.getConstant("noValue"):f.formattedText,a)),w=Object.keys(f.indexObject),e=[],i=0;i<w.length;i++)e.push(n.dataSourceSettings.dataSource.at(Number(w[i])));var r=this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name.toLowerCase()==="tooltip"})[0].FieldInfos,k=function(n){var l,a,g=[],t,i,f,y,p,c,h;if(e.length>0){var w="sum_"+r[n].Name,b="count_"+r[n].Name,k=0,d=0,s=0,v=[];for(t=0;t<u.DataGroupInfo.FieldContainers.length;t++)if(u.DataGroupInfo.FieldContainers[t].FieldInfos.length>0)for(i=0;i<u.DataGroupInfo.FieldContainers[t].FieldInfos.length;i++)u.DataGroupInfo.FieldContainers[t].FieldInfos[i].SummaryType===SummaryType.SUM&&u.DataGroupInfo.FieldContainers[t].FieldInfos[i].Name===r[n].Name?w=u.DataGroupInfo.FieldContainers[t].FieldInfos[i].UniqueColumnName:u.DataGroupInfo.FieldContainers[t].FieldInfos[i].SummaryType===SummaryType.COUNT&&u.DataGroupInfo.FieldContainers[t].FieldInfos[i].Name===r[n].Name&&(b=u.DataGroupInfo.FieldContainers[t].FieldInfos[i].UniqueColumnName);for(f=0;f<e.length;f++)for(y=Object.keys(e[f]).filter(function(t){return t===r[n].UniqueColumnName}),p=e[f][y],g.push(y[f]),v.push(p),s+=p,c=Object.keys(JSON.parse(u.dataValues.columnBindings)),h=0;h<c.length;h++)w===c[h]&&(k+=e[f][c[h]]),b===c[h]&&(d+=e[f][c[h]]);r[n].SummaryType===SummaryType.AVG?s=k/d:r[n].SummaryType===SummaryType.MIN?s=Math.min.apply(null,v):r[n].SummaryType===SummaryType.MAX&&(s=Math.max.apply(null,v));s=u.getTooltipFormattedText(r[n].UniqueColumnName,s);o.push((l={},l[r[n].DisplayName]=s,l))}else o.push((a={},a[r[n].DisplayName]="No value",a))},u=this;for(i=0;i<r.length;i++)k(i);n.tooltip.content=this.widgetHelper.generateToolTipTemplate(o,this.pivotViewElement.attr("id"),parseInt(b,10));break;case"column":t.target.querySelector(".e-headercelldiv")&&t.target.querySelector(".e-headercelldiv").offsetWidth<t.target.querySelector(".e-headercelldiv").scrollWidth?t.target.querySelector(".e-headercelldiv").setAttribute("title",t.target.innerText):t.target.querySelector(".e-stackedheadercelldiv")&&t.target.querySelector(".e-stackedheadercelldiv").offsetWidth<t.target.querySelector(".e-stackedheadercelldiv").scrollWidth&&t.target.querySelector(".e-stackedheadercelldiv").setAttribute("title",t.target.innerText);break;case"row":t.target.classList.contains("e-rowsheader")&&t.target.offsetWidth<t.target.scrollWidth&&t.target.getElementsByClassName("e-cellvalue")[0].setAttribute("title",t.target.innerText);break;default:t.cancel=!0}}else t.cancel=!0},t.prototype.renderColumnOptions=function(n,t,i){if(BoldBIDashboard.isNullOrUndefined(n))this.propertyPanel.updateItemVisibility("PivotGrid","EditFieldSettings","ColumnOptions",i.isVisible);else{var u=BoldBIDashboard.buildTag("div","",{width:"435px","margin-top":"3px","margin-left":"15px",border:"0px solid","border-color":"red",display:BoldBIDashboard.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designerId+"_"+t+"_"+i.name+"_container"}),r=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-small",this.locale.propertyPanel.editFieldSettingsText,{width:"150px",float:"left"},{id:this.designerId+"_"+t+"_"+i.name+"_EditColumnNames",type:"button"});u.append(r);n.append(u);r.off("click",this.bbdesigner$.proxy(this.onEditColumnNames,this,i));r.on("click",this.bbdesigner$.proxy(this.onEditColumnNames,this,i))}},t.prototype.onEditColumnNames=function(){var n=this.widgetHelper.getCurrentWidgetInstance();BoldBIDashboard.isNullOrUndefined(n)||this.designerInstance.modules.editFieldSettings.openFieldSettings(n,"updateColumnName",n.getPivotProperties().FieldSettings.CustomFieldSettings)},t.prototype.getformatSettings=function(){for(var i,t=this.getRowContainer().FieldInfos.concat(this.getColumnContainer().FieldInfos),r=[],n=0;n<t.length;n++)t[n].FieldActualType==="bbi-designer-dataset-datetime"&&BoldBIDashboard.Dashboard.PivotViewHelper.isDateTypeRequired(t[n].DateTimeFormat)&&(i="",t[n].DateTimeFormat===DateTimeFormat.Date?i=this.designerInstance.model.localeSettings.dateFormat:(t[n].DateTimeFormat===DateTimeFormat.DateTime||t[n].DateTimeFormat===DateTimeFormat.Default)&&(i=this.designerInstance.model.localeSettings.dateFormat+" "+this.designerInstance.model.localeSettings.timeFormat),r.push({name:t[n].UniqueColumnName,type:BoldBIDashboard.Dashboard.PivotViewHelper.getPivotDateType(t[n].DateTimeFormat),format:i.length>0?i:BoldBIDashboard.Dashboard.PivotViewHelper.getPivotDateFormat(t[n].DateTimeFormat)}));return r},t.prototype.getSortSettings=function(){var u=[],i,r,n,t;if(this.DataGroupInfo.FieldContainers[3].FieldInfos.length>0)for(i=this.getRowContainer().FieldInfos,n=0;n<i.length;n++)u.push({name:i[n].UniqueColumnName,order:"None"});else for(i=this.getRowContainer().FieldInfos,n=0;n<i.length;n++)t=BoldBIDashboard.isNullOrUndefined(i[n].CustomSorting)?i[n].Sorting:this.getSortOrder(i[n].CustomSorting),u.push({name:i[n].UniqueColumnName,order:BoldBIDashboard.isNullOrUndefined(t)?t:typeof t=="string"?t:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,t)});for(r=this.getColumnContainer().FieldInfos,n=0;n<r.length;n++)t=BoldBIDashboard.isNullOrUndefined(r[n].CustomSorting)?r[n].Sorting:this.getSortOrder(r[n].CustomSorting),u.push({name:r[n].UniqueColumnName,order:BoldBIDashboard.isNullOrUndefined(t)?t:typeof t=="string"?t:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,t)});return u},t.prototype.getSortOrder=function(n){switch(n.CustomSortType){case CustomSortType[CustomSortType.Alphabetic]:return n.CustomSortOrder;case CustomSortType[CustomSortType.DataSource]:case CustomSortType[CustomSortType.Field]:return BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,SortingOrder.None)}return"None"},t.prototype.updateColumnName=function(n){this.getPivotProperties().FieldSettings.CustomFieldSettings=n;this.generateColumns();this.designerInstance.modules.serialization.notifyChange();BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.setMergeAction(!1)},t.prototype.generateColumns=function(){var n=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),t=this.genearteFieldCollectionFromGroupInfo(this.getValueContainer().FieldInfos),i=this.genearteFieldCollectionFromGroupInfo(this.getRowContainer().FieldInfos),r=this.genearteFieldCollectionFromGroupInfo(this.getColumnContainer().FieldInfos);n.dataSourceSettings.values=t;n.dataSourceSettings.rows=i;n.dataSourceSettings.columns=r;n.render()},t.prototype.getColumnNamesCollection=function(){var f=null,r,t,u,n;if(BoldBIDashboard.DashboardUtil.IsColumnBindingsEmpty(this.DataColumnBindings)||(f=this.DataColumnBindings),r=[],this.DataGroupInfo.FieldContainers.length>0)for(t=this.getValueContainer().FieldInfos.concat(this.getRowContainer().FieldInfos).concat(this.getColumnContainer().FieldInfos),n=0;n<t.length;n++){var i=this.getDisplayColumnSettingsItem(t[n].UniqueColumnName),o=t[n].SummaryType,s=t[n].DateTimeFormat,h=s!==DateTimeFormat[DateTimeFormat.None]?s:o!==SummaryType[SummaryType.NONE]?o:"",e=t[n].Name+(h!==""?"("+h+")":"");BoldBIDashboard.isNullOrUndefined(i)?this.getPivotProperties().FieldSettings.CustomFieldSettings.push({DisplayName:f[t[n].UniqueColumnName],UniqueColumnName:t[n].UniqueColumnName,IsEdited:!1,CaptionName:e,ShowNoDataItem:!1}):i.IsEdited?i.CaptionName=e:(i.DisplayName=f[t[n].UniqueColumnName],i.CaptionName=e);r.push(t[n].UniqueColumnName)}if(this.getPivotProperties().FieldSettings.CustomFieldSettings.length!==r.length){for(u=[],n=0;n<this.getPivotProperties().FieldSettings.CustomFieldSettings.length;n++)r.indexOf(this.getPivotProperties().FieldSettings.CustomFieldSettings[n].UniqueColumnName)===-1&&u.push(n);for(n=u.length-1;n>=0;n--)this.getPivotProperties().FieldSettings.CustomFieldSettings.splice(u[n],1)}this.isOpenReport||this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design||this.designerInstance.modules.serialization.notifyChange();BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.setMergeAction(!1)},t.prototype.getDisplayColumnSettingsItem=function(n){for(var t=0;t<this.getPivotProperties().FieldSettings.CustomFieldSettings.length;t++)if(this.getPivotProperties().FieldSettings.CustomFieldSettings[t].UniqueColumnName===n)return this.getPivotProperties().FieldSettings.CustomFieldSettings[t];return null},t.prototype.updateValueSorting=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");BoldBIDashboard.isNullOrUndefined(t)||(t.enableValueSorting=n);this.getPivotProperties().BasicSettings.EnableValueSorting=n},t.prototype.updateShowTooltip=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");this.getPivotProperties().BasicSettings.ShowTooltip=n;BoldBIDashboard.isNullOrUndefined(t)||(t.showTooltip=n,this.refresh())},t.prototype.updateNodeExpand=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");BoldBIDashboard.isNullOrUndefined(t)||(t.setProperties({dataSource:{drilledMembers:[]}},!0),t.dataSourceSettings.expandAll=n,this.propertyPanel.updateItemVisibility("PivotGrid","BasicSettings","EnablePersistence",!n));this.getPivotProperties().BasicSettings.ExpandAllNode=n},t.prototype.updateGroupBarSettings=function(n){var i=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),r,t,u,f;BoldBIDashboard.isNullOrUndefined(i)||(i.showGroupingBar=n,i.renderPivotGrid(),this.propertyPanel.updateItemVisibility("PivotGrid","GroupBarSettings","ShowSortIcon",n),this.propertyPanel.updateItemVisibility("PivotGrid","GroupBarSettings","ShowFilterIcon",n));this.getPivotProperties().GroupBarSettings.ShowGroupBar=n;r=this.propertyPanel.getPropertyElement(this.getPivotPropertyPanel(),"HeaderColumWidth","ContentSettings",-1);t=this.bbdesigner$.extend(!0,{},r);t.categoryName="ContentSettings";u=this.bbdesigner$("#"+this.designerId+"_PivotGrid_"+t.categoryName+"_"+t.name).data("ejNumericTextbox");n&&u.model.minValue<250&&(r.value=250);t.minimum=n?250:50;u.option("change",this.bbdesigner$.proxy(this.propertyPanel.onValueChange,this.propertyPanel,t,t.categoryName,"PivotGrid"));f=this.getPivotProperties().ContentSettings.HeaderColumWidth.toString();this.propertyPanel.updatePropertyValue(t,"PivotGrid",f)},t.prototype.updateSortIconSettings=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");BoldBIDashboard.isNullOrUndefined(t)||(t.groupingBarSettings.showSortIcon=n);this.getPivotProperties().GroupBarSettings.ShowSortIcon=n},t.prototype.updateFilterIconSettings=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");BoldBIDashboard.isNullOrUndefined(t)||(t.groupingBarSettings.showFilterIcon=n);this.getPivotProperties().GroupBarSettings.ShowFilterIcon=n},t.prototype.updateRowGrandTotals=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");BoldBIDashboard.isNullOrUndefined(t)||(t.dataSourceSettings.showRowGrandTotals=n);this.getPivotProperties().GrandTotalSettings.ShowRowGrandTotals=n},t.prototype.updateColumnGrandTotals=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");BoldBIDashboard.isNullOrUndefined(t)||(t.dataSourceSettings.showColumnGrandTotals=n);this.getPivotProperties().GrandTotalSettings.ShowColumnGrandTotals=n},t.prototype.updateColumnSubTotals=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");BoldBIDashboard.isNullOrUndefined(t)||(t.dataSourceSettings.showColumnSubTotals=n);this.getPivotProperties().GrandTotalSettings.ShowColumnSubTotals=n},t.prototype.updateRowSubTotals=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");BoldBIDashboard.isNullOrUndefined(t)||(t.dataSourceSettings.showRowSubTotals=n);this.getPivotProperties().GrandTotalSettings.ShowRowSubTotals=n},t.prototype.updateRowGrandTotalText=function(n){this.getPivotProperties().GrandTotalSettings.RowGrandTotalText=n;this.refresh()},t.prototype.updateColumnGrandTotalText=function(n){this.getPivotProperties().GrandTotalSettings.ColumnGrandTotalText=n;this.refresh()},t.prototype.updateTextWrapping=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");this.getPivotProperties().BasicSettings.AllowTextWrap=n;BoldBIDashboard.isNullOrUndefined(t)||(t.enableVirtualization=this.isVirtualizationRequired(),t.gridSettings.allowTextWrap=n,t.enableVirtualization||(t.pageSettings=undefined),t.refresh());this.propertyPanel.updateItemDisable("float",this.Type,"ContentSettings","RowHeight",n)},t.prototype.updateRowFields=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");BoldBIDashboard.isNullOrUndefined(t)||(t.dataSourceSettings.valueAxis=n?"row":"column");this.getPivotProperties().BasicSettings.ShowValuesInRowAxis=n},t.prototype.updateEmptyCellsContent=function(n){this.getPivotProperties().BasicSettings.EmptyCellsContent=n;var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");BoldBIDashboard.isNullOrUndefined(t)||(t.dataSourceSettings.emptyCellsTextContent=n)},t.prototype.updateDrilledMembers=function(n){var i=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),u,t,r;if(!BoldBIDashboard.isNullOrUndefined(i))if(n&&!this.getPivotProperties().BasicSettings.ExpandAllNode){for(u=[],t=0;t<i.dataSourceSettings.drilledMembers.length;t++)r=new DrilledMembers,r.Name=i.dataSourceSettings.drilledMembers[t].name,r.Items=i.dataSourceSettings.drilledMembers[t].items,u.push(r);this.getPivotProperties().DrilledMembers=u}else this.getPivotProperties().DrilledMembers=[];this.getPivotProperties().BasicSettings.EnablePersistence=n;this.designerInstance.modules.serialization.notifyChange();BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.setMergeAction(!1)},t.prototype.updateGroupPanelBackground=function(){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),n,i;BoldBIDashboard.isNullOrUndefined(t)||(n=t.groupingBarModule,i=this.getGroupPanelBackgroundColor(),BoldBIDashboard.isNullOrUndefined(n)||(n.rowPanel.style.backgroundColor=n.valuePanel.style.backgroundColor=n.columnPanel.style.backgroundColor=i))},t.prototype.updateColumnResize=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");this.getPivotProperties().BasicSettings.AllowColumnResize=n;BoldBIDashboard.isNullOrUndefined(t)||(t.enableVirtualization=this.isVirtualizationRequired(),t.gridSettings.allowResizing=n,(BoldBIDashboard.isNullOrUndefined(t)||!this.getPivotProperties().BasicSettings.AllowContentToFit)&&t.enableVirtualization||t.refresh(),t.enableVirtualization||(t.pageSettings=undefined),t.refresh())},t.prototype.updateContentFit=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),r,i;if(this.getPivotProperties().BasicSettings.AllowContentToFit=n,this.enableAutoResizeColumn(t),this.getPivotProperties().BasicSettings.AllowContentToFit=n,!BoldBIDashboard.isNullOrUndefined(t)){if(!BoldBIDashboard.isNullOrUndefined(t.grid)&&n){for(r=[],i=1;i<t.grid.columns.length;i++)BoldBIDashboard.isNullOrUndefined(t.grid.columns[i])||r.push(t.grid.columns[i].field);t.grid.autoFitColumns(r)}else n||t.refresh();t.enableVirtualization=this.isVirtualizationRequired();t.enableVirtualization||(t.pageSettings=undefined);t.refresh()}this.propertyPanel.updateItemDisable("float",this.Type,"ContentSettings","ColumWidth",n);this.propertyPanel.updateItemDisable("float",this.Type,"ContentSettings","HeaderColumWidth",n)},t.prototype.updateAutoHeaderFontSize=function(n){this.getPivotProperties().IsAutoHeaderFontSize=n;this.propertyPanel.updateItemDisable("float",this.Type,"FontSettings","HeaderFontSize",n);this.refresh()},t.prototype.updateHeaderFontSize=function(n){this.getPivotProperties().HeaderFontSize=n;this.refresh()},t.prototype.updateAutoContentFontSize=function(n){this.getPivotProperties().IsAutoContentFontSize=n;this.propertyPanel.updateItemDisable("float",this.Type,"FontSettings","ContentFontSize",n);this.refresh()},t.prototype.updateContentFontSize=function(n){this.getPivotProperties().ContentFontSize=n;this.refresh()},t.prototype.updateRowHeight=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");this.getPivotProperties().ContentSettings.RowHeight=n;t.gridSettings.rowHeight=n;this.refresh()},t.prototype.updateColumWidth=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");this.getPivotProperties().ContentSettings.ColumWidth=n;t.gridSettings.columnWidth=n;this.refresh()},t.prototype.updateHeaderColumWidth=function(n){var t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");this.getPivotProperties().ContentSettings.HeaderColumWidth=n;t.resizedValue=n;t.layoutRefresh()},t.prototype.queryCellInfo=function(n){var r=this.getPivotProperties(),w=Number(n.cell.getAttribute("aria-colindex")),b=Number(n.cell.getAttribute("index")),k=n.pivotview.pivotValues.length>0?n.pivotview.pivotValues[b][w]:"",u=n.data[Number(n.cell.getAttribute("aria-colindex"))].axis,t=null,h=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),o,a,c,v,l,e,f,i;if(BoldBIDashboard.isNullOrUndefined(h)||h.dataSourceSettings.rows.length!==0||h.dataSourceSettings.valueAxis!=="row"||(o=n.cell.getAttribute("aria-colindex"),n.data&&n.data[o]&&n.data[o].axis==="row"&&(n.cell.querySelector(".e-cellvalue").innerText=n.data[o].formattedText)),u!==undefined&&u!==null&&u==="row"&&(a=this.getHeaderColumnForegroundColor(),c=this.getHeaderColumnBackgroundColor(),t=n.cell.getAttribute("style"),i="color:"+a+" !important;",n.cell.setAttribute("style",(BoldBIDashboard.isNullOrUndefined(t)?"":t)+i+"background:"+c+";"),v=i+"background:"+c+";",t=n.cell.getAttribute("style"),n.cell.setAttribute("style",(BoldBIDashboard.isNullOrUndefined(t)?"":t)+v),t=n.cell.getElementsByClassName("e-cellvalue")[0].getAttribute("style"),n.cell.getElementsByClassName("e-cellvalue")[0].setAttribute("style",(BoldBIDashboard.isNullOrUndefined(t)?"":t)+i),n.cell.classList.contains("e-gtot")&&(t=n.cell.getElementsByClassName("e-cellvalue")[0].getAttribute("style"),n.cell.getElementsByClassName("e-cellvalue")[0].setAttribute("style",(BoldBIDashboard.isNullOrUndefined(t)?"":t)+i+"font-weight:bold !important;"))),n.pivotview.pivotValues.length>0&&(n.pivotview.pivotValues[0][n.cell.getAttribute("aria-colindex")]&&n.pivotview.pivotValues[0][n.cell.getAttribute("aria-colindex")].type==="grand sum"||n.pivotview.pivotValues[n.cell.getAttribute("index")][0]&&n.pivotview.pivotValues[n.cell.getAttribute("index")][0].type==="grand sum"&&!n.cell.classList.contains("e-gtot"))&&(t=n.cell.getAttribute("style"),n.cell.setAttribute("style",(BoldBIDashboard.isNullOrUndefined(t)?"":t)+"font-weight:bold !important;")),BoldBIDashboard.isNullOrUndefined(r.ColorCustomizations)||!(r.ColorCustomizations.length>0)||!(n.pivotview.pivotValues.length>0)||n.pivotview.pivotValues[0][n.cell.getAttribute("aria-colindex")]&&n.pivotview.pivotValues[0][n.cell.getAttribute("aria-colindex")].type==="grand sum"||n.pivotview.pivotValues[n.cell.getAttribute("index")][0]&&n.pivotview.pivotValues[n.cell.getAttribute("index")][0].type==="grand sum"||this.updateColorCustomizationToPivotGrid(n,k),r.FilterSettings.ActAsMasterWidget&&r.SelectedFilterValues.length>0){var d=Number(n.cell.getAttribute("aria-colindex")),g=Number(n.cell.getAttribute("index")),nt=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),s=nt.pivotValues[g][d],y=this.getLevelNameForCell();s.axis==="row"&&s.valueSort.levelName.localeCompare(y)===0&&(n.cell.classList.add("e-cellselectionbackground"),r.SelectionCellInfo.ColumnIndex=s.colIndex,r.SelectionCellInfo.RowIndex=s.rowIndex,r.SelectionCellInfo.Header=y,r.SelectionCellInfo.IsSelected=!0)}else this.widgetJson.UrlLink.EnableLink&&(n.cell.classList.contains("e-gtot")?(e=this.widgetJson.UrlLink.ColumnUrlDetails.filter(function(t){return t.UniqueColumnName===n.data[Number(n.cell.getAttribute("aria-colindex"))].actualText}),(n.pivotview.pivotValues[n.cell.getAttribute("index")][0]&&n.pivotview.pivotValues[n.cell.getAttribute("index")][0].type||this.DataGroupInfo.FieldContainers[2].FieldInfos.length>0||BoldBIDashboard.isNullOrUndefined(e)||e.length===0)&&(n.cell.querySelector(".e-cellvalue").innerHTML=n.cell.querySelector(".e-cellvalue").innerText)):u===UrlLinkType[UrlLinkType.Row].toLowerCase()?(l=this.widgetJson.UrlLink.ColumnUrlDetails.filter(function(t){return t.UniqueColumnName===n.cell.getAttribute("fieldname")}),(BoldBIDashboard.isNullOrUndefined(l)||l.length===0)&&n.cell.classList.contains("e-rowcell")&&(n.cell.querySelector(".e-cellvalue").innerHTML=n.cell.querySelector(".e-cellvalue").innerText)):u===UrlLinkType[UrlLinkType.Value].toLowerCase()&&(e=this.widgetJson.UrlLink.ColumnUrlDetails.filter(function(t){return t.UniqueColumnName===n.data[Number(n.cell.getAttribute("aria-colindex"))].actualText}),(BoldBIDashboard.isNullOrUndefined(e)||e.length===0)&&(n.cell.innerText=n.cell.innerText)));if(u==="value"&&!isNaN(n.cell.innerText)){f=n.data[Number(n.cell.getAttribute("aria-colindex"))].actualText;!BoldBIDashboard.isNullOrUndefined(f)&&f.indexOf("_calc")>0&&(f=f.replace("_calc",""));var tt=Number(n.cell.getAttribute("aria-colindex")),it=Number(n.cell.getAttribute("index")),p=n.pivotview.pivotValues.length>0?n.pivotview.pivotValues[it][tt]:"";n.cell.querySelector(".enablehyperlink")&&n.pivotview.pivotValues.length>0?n.cell.querySelector(".enablehyperlink").innerText=p.formattedText=this.getFormattedText(f,n.cell.innerText):n.pivotview.pivotValues.length>0&&(n.cell.innerText=p.formattedText=this.getFormattedText(f,n.cell.innerText))}u==="value"&&BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n.cell.style.background)&&(i="",i=i+"color:"+this.themeHelper.getPivotGridDataTextColor()+" !important;",i=i+"background:"+this.themeHelper.getPivotGridDataBackground()+" !important;",t=n.cell.getAttribute("style"),n.cell.setAttribute("style",(BoldBIDashboard.isNullOrUndefined(t)?"":t)+i));this.updateGridFontSize(n,u)},t.prototype.pivotAlignmentSettings=function(n){var r,i,t,u;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.stackedColumns)&&n.stackedColumns.length>0){for(r=n.stackedColumns,i=0;i<r.length;i++)t=r[i],t.field!=="0.formattedText"?t.columns?t.textAlign=this.getPivotProperties().AlignmentSettings.ColumnHeader:(t.textAlign=this.getPivotProperties().AlignmentSettings.Value,t.headerTextAlign=this.getPivotProperties().AlignmentSettings.ColumnHeader):t.textAlign=this.getPivotProperties().AlignmentSettings.RowHeader;this.getPivotProperties().GroupBarSettings.ShowGroupBar||this.getPivotProperties().GrandTotalSettings.ShowRowGrandTotals||(u=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),n.stackedColumns[0].visible=u.dataSourceSettings.rows.length<1&&!u.dataSourceSettings.showRowGrandTotals?!1:!0)}},t.prototype.updateGridFontSize=function(n,t){var r=n.cell.getAttribute("style"),i=this.themeHelper.getPivotGridContentFont(),u=this.themeHelper.getPivotGridHeaderFont(),f=!1,h="\tfont-size: "+(this.getPivotProperties().IsAutoContentFontSize?i.size+"!important;":this.getPivotProperties().ContentFontSize+"px !important;")+"\tfont-family: "+i.family+" !important;"+(this.isBoldCustomizationApplied?"":"\tfont-weight: "+i.weight+" !important;"),e="\tfont-size: "+(this.getPivotProperties().IsAutoContentFontSize?i.size+"!important;":this.getPivotProperties().ContentFontSize+"px !important;")+"\tfont-family: "+i.family+" !important;font-weight:Bold !important",c="\tfont-size: "+(this.getPivotProperties().IsAutoHeaderFontSize?u.size+"!important;":this.getPivotProperties().HeaderFontSize+"px !important;")+"\tfont-family: "+u.family+" !important;\tfont-weight: "+u.weight+" !important;",l=BoldBIDashboard.isNullOrUndefined(t)?!1:t==="row",o,s;!n.cell.classList.contains("e-valuescontent")||!n.cell.classList.contains("e-gtot")||(BoldBIDashboard.isNullOrUndefined(n.data[0].type)||n.data[0].type!=="grand sum")&&(BoldBIDashboard.isNullOrUndefined(n.pivotview.pivotValues[0][n.cell.getAttribute("aria-colindex")])||BoldBIDashboard.isNullOrUndefined(n.pivotview.pivotValues[0][n.cell.getAttribute("aria-colindex")].type)||n.pivotview.pivotValues[0][n.cell.getAttribute("aria-colindex")].type!=="grand sum")||(o=n.cell.getAttribute("style"),n.cell.setAttribute("style",(BoldBIDashboard.isNullOrUndefined(o)?"":o)+e),f=!0);l?(s=n.cell.getElementsByClassName("e-cellvalue")[0].getAttribute("style"),n.cell.getElementsByClassName("e-cellvalue")[0].setAttribute("style",(BoldBIDashboard.isNullOrUndefined(s)?"":s)+c),this.isBoldCustomizationApplied=!1):n.cell.getElementsByClassName("e-cellvalue").length>0?n.cell.getElementsByClassName("e-cellvalue")[0].setAttribute("style",(BoldBIDashboard.isNullOrUndefined(r)?"":r)+(f?e:h)):n.cell.setAttribute("style",(BoldBIDashboard.isNullOrUndefined(r)?"":r)+(f?e:h))},t.prototype.getFormattedText=function(n,t){var r=this.DataGroupInfo.FieldContainers.length>0?this.getValueContainer().FieldInfos.filter(function(t){return t.UniqueColumnName===n}):[],i=r.length>0?r[0].MeasureFormatting:new MeasureFormatting,u=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(i.Prefix),this.DataGroupInfo.DataSourceName),f=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(i.Suffix),this.DataGroupInfo.DataSourceName);return BoldBIDashboard.DashboardUtil.formattedText(parseFloat(t.toString()),i.Culture,i.DecimalPoints,i.FormatType,i.DecimalSeparator,i.GroupSeparator,u,f,i.Unit,!1,this.designerInstance,i.EnableLakhsAndCroreRep)},t.prototype.getTooltipFormattedText=function(n,t){var o=this.getBindedColumnIndex(this.DataGroupInfo),r=[],f=this.DataGroupInfo.FieldContainers[o.tooltipIndex].FieldInfos,u,i,e;if(this.DataGroupInfo.FieldContainers.length>0)for(u=0;u<f.length;u++)f.length>0&&n===f[u].UniqueColumnName&&(r=this.getTooltipContainer().FieldInfos.filter(function(t){return t.UniqueColumnName===n}));else r=[];return i=r.length>0?r[0].MeasureFormatting:new MeasureFormatting,e=BoldBIDashboard.DashboardUtil.formattedText(parseFloat(t.toString()),i.Culture,i.DecimalPoints,i.FormatType,i.DecimalSeparator,i.GroupSeparator,i.Prefix,i.Suffix,i.Unit,!1,this.designerInstance,i.EnableLakhsAndCroreRep),e},t.prototype.cellSelecting=function(n){if(this.getPivotProperties().FilterSettings.ActAsMasterWidget){if(n.currentCell.classList.contains("e-gtot")||n.currentCell.classList.contains("e-stot")||n.currentCell.classList.contains("e-movablefirst")&&n.currentCell.classList.contains("e-lastcell")){n.cancel=!0;n.isCellClick=!1;return}if(this.getPivotProperties().FilterSettings.ActAsMasterWidget&&n.currentCell.classList.contains("e-valuescontent")){n.cancel=!0;n.isCellClick=!1;return}}else n.cancel=!0;this.clearSelectionCell()},t.prototype.dataBound=function(){var n,i,t,u;if(this.dashboardDesigner.model){if(this.updateGroupPanelBackground(),this.updatePivotStyle(),this.getPivotProperties().FilterSettings.ActAsMasterWidget&&this.getPivotProperties().SelectionCellInfo.IsSelected&&this.enableFilterIcon(!BoldBIDashboard.isNullOrUndefined(this.widgetJson.SelectedFilterValues)&&this.widgetJson.SelectedFilterValues.length>0),n=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),this.designerInstance.isDarkTypeTheme()&&this.bbdesigner$("#"+this.pivotViewElement[0].id).addClass("e-dark"),n.grid.actionComplete=this.bbdesigner$.proxy(this.renderComplete,this),this.enableAutoResizeColumn(n),this.getPivotProperties().BasicSettings.AllowContentToFit){for(i=[],t=1;t<n.grid.columns.length;t++)BoldBIDashboard.isNullOrUndefined(n.grid.columns[t])||i.push(n.grid.columns[t].field);n.grid.autoFitColumns(i)}if(n.dataSourceSettings.columns.length===0&&(u=this.pivotViewItem.find(".e-grouping-bar"),u.remove(),typeof n.grid.height=="number")){var f=parseInt(this.pivotViewElement.find(".e-movablescrollbar")[0].style.maxHeight,10),e=this.pivotViewElement.find(".e-frozencontent")[0].scrollHeight,r=window.getComputedStyle(this.pivotViewElement.find(".e-gridheader")[0]);n.grid.height=this.pivotViewElement[0].offsetHeight-parseFloat(r.height)-parseFloat(r.borderBottomWidth)-parseFloat(r.borderTopWidth);e+f<n.grid.height&&(n.grid.height="auto")}this.getPivotProperties().GroupBarSettings.ShowGroupBar||this.getPivotProperties().GrandTotalSettings.ShowRowGrandTotals||BoldBIDashboard.isNullOrUndefined(this.getRowContainer())||this.getRowContainer().FieldInfos.length!==0?this.pivotViewElement.find(".e-scrollbar .e-frozenscrollbar.e-frozen-left-scrollbar").css("display","block"):this.pivotViewElement.find(".e-scrollbar .e-frozenscrollbar.e-frozen-left-scrollbar").css("display","none")}},t.prototype.enableAutoResizeColumn=function(n){this.getPivotProperties().BasicSettings.AllowContentToFit?(n.gridSettings.allowResizing=this.getPivotProperties().BasicSettings.AllowColumnResize?this.getPivotProperties().BasicSettings.AllowColumnResize:!0,n.grid.resizeSettings.mode="Auto"):(n.gridSettings.allowResizing=this.getPivotProperties().BasicSettings.AllowColumnResize,n.grid.resizeSettings.mode="Normal")},t.prototype.updatePivotStyle=function(){var t,i,n;BoldBIDashboard.isNullOrUndefined(this.pivotViewElement)||(t=this.themeHelper.getPivotGridGroupingBtnFont(),i=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),BoldBIDashboard.isNullOrUndefined(i)||BoldBIDashboard.isNullOrUndefined(i.groupingBarModule)||(n=i.groupingBarModule,n.rowPanel.style.fontSize=n.valuePanel.style.fontSize=n.columnPanel.style.fontSize=t.size,n.rowPanel.style.fontFamily=n.valuePanel.style.fontfamily=n.columnPanel.style.fontfamily=t.family,n.rowPanel.style.fontWeight=n.valuePanel.style.fontWeight=n.columnPanel.style.fontWeight=t.weight,n.rowPanel.style.height=this.bbdesigner$(n.rowPanel).height()<56?"56px":n.rowPanel.style.height,n.valuePanel.style.height=this.bbdesigner$(n.valuePanel).height()<56?"56px":n.valuePanel.style.height,n.columnPanel.style.height=this.bbdesigner$(n.columnPanel).height()<56?"56px":n.columnPanel.style.height),this.pivotViewElement.find(".e-pivot-button .e-content").css({"font-size":t.size,"font-weight":t.weight,"font-family":t.family}))},t.prototype.renderComplete=function(n){var r=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),i,t;if(n.rows.length>0&&!r.isEmptyGrid&&this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&(this.IsRendered=!0),i=this.pivotViewElement.find(".e-rcursor"),!this.getPivotProperties().BasicSettings.AllowContentToFit||this.getPivotProperties().BasicSettings.AllowColumnResize||BoldBIDashboard.isNullOrUndefined(i)){if(!BoldBIDashboard.isNullOrUndefined(i))for(t=0;t<i.length;t++)i[t].classList.remove("e-removeresize")}else for(t=0;t<i.length;t++)i[t].classList.add("e-removeresize")},t.prototype.updateSelectionCellInfo=function(n){this.clearSelectionCell();n?this.pivotViewElement[0].querySelector('[aria-colindex="'+this.getPivotProperties().SelectionCellInfo.ColumnIndex+'"][index="'+this.getPivotProperties().SelectionCellInfo.RowIndex+'"]').classList.add("e-cellselectionbackground"):this.getPivotProperties().SelectionCellInfo.IsSelected=!1},t.prototype.clearSelectionCell=function(){this.pivotViewElement[0].querySelector(".e-cellselectionbackground")&&this.pivotViewElement[0].querySelector(".e-cellselectionbackground").classList.remove("e-cellselectionbackground")},t.prototype.pivotItemClick=function(n){var r=[this.bbdesigner$(n.currentCell).offset().left,this.bbdesigner$(n.currentCell).offset().top],t=[],i;this.getPivotProperties().FilterSettings.ActAsMasterWidget&&t.push(WidgetAction.Filter);this.getPivotProperties().UrlLink&&this.getPivotProperties().UrlLink.EnableLink&&(i=n.data.axis==="row"?"Row":n.data.axis==="column"?"Column":"Value",(n.data.axis==="row"||n.data.axis==="column"||n.data.axis==="value")&&this.getPivotProperties().UrlLink.ColumnUrlDetails.length>0&&this.getPivotProperties().UrlLink.ColumnUrlDetails.filter(function(n){return n.UrlType===i}).length>0&&this.isColumnConfiguredInLinking(n.data)&&this.allowSummaryRowLinkingOrViewData(n)&&t.push(WidgetAction.Linking));this.widgetJson.ContainerSettings.ViewData&&this.allowSummaryRowLinkingOrViewData(n)&&t.push(WidgetAction.ViewData);BoldBIDashboard.Dashboard.WidgetHelper.createWidgetActionContextMenu(this.designerInstance,this,this.Name,t,n,r)},t.prototype.restrictControlResize=function(n){n.actionName==="Window resize"&&(n.cancel=!0)},t.prototype.isColumnConfiguredInLinking=function(n){var t=n.axis==="row"||n.axis==="column"?n.valueSort.axis:n.axis==="value"?n.actualText:"";return!BoldBIDashboard.isNullOrUndefined(t)&&t.indexOf("_calc")>0&&(t=t.replace("_calc","")),this.getPivotProperties().UrlLink.ColumnUrlDetails.filter(function(n){return n.UniqueColumnName===t}).length>0},t.prototype.performSelectedWidgetAction=function(t,i,r,u){var f,e,o;switch(t){case WidgetAction.Filter.toString():i.isCurrentMaster=!0;BoldBIDashboard.isNullOrUndefined(r)||BoldBIDashboard.isNullOrUndefined(r.data)||BoldBIDashboard.isNullOrUndefined(r.data.actualText)||this.filterPivotView(r);break;case WidgetAction.Linking.toString():this.clearSelectionCell();u.model.mode!==BoldBIDashboard.Designer.mode.design&&this.allowSummaryRowLinkingOrViewData(r)&&(f=this.getLinkingData(r),n.prototype.performLinking.call(this,f));break;case WidgetAction.ViewData.toString():i.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&this.allowSummaryRowLinkingOrViewData(r)&&(e=u.modules.viewDataDialog,o=this.showSelectItemsInViewData(r),e.showViewDataPopup(i,!1,o,!0))}},t.prototype.allowSummaryRowLinkingOrViewData=function(n){return n.currentCell.classList.contains("e-gtot")?this.DataGroupInfo.FieldContainers[2].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0?!1:!BoldBIDashboard.isNullOrUndefined(n.data)&&(!BoldBIDashboard.isNullOrUndefined(n.data.rowHeaders)&&n.data.rowHeaders.length>0||!BoldBIDashboard.isNullOrUndefined(n.data.columnHeaders)&&n.data.columnHeaders.length>0)?!0:!1:!0},t.prototype.showSelectItemsInViewData=function(n){var u=[],r,h,f,c,e,i,o,s;if(!BoldBIDashboard.isNullOrUndefined(n))switch(n.data.axis){case"row":r=n.data.actualText;t.hasCustomDate(this.getRowContainer().FieldInfos[n.data.level])&&(o=this.getRowContainer().FieldInfos[n.data.level].UniqueColumnName+"_CustomFormat",s=JSON.parse(this.dataValues.data),r=s[n.data.index[0]][o]);u.push({selectedItem:r,columnId:this.getRowContainer().FieldInfos[n.data.level].Id,UniqueColumnName:this.getRowContainer().FieldInfos[n.data.level].UniqueColumnName});break;case"value":if(!BoldBIDashboard.isNullOrUndefined(n.data.rowHeaders)&&n.data.rowHeaders!==""&&this.getRowContainer().FieldInfos.length>0)for(h=function(i){var r=f.getRowContainer().FieldInfos[i].UniqueColumnName,e=n.data.rowHeaders.split(String.fromCharCode(127))[i],h=t.hasCustomDate(f.getRowContainer().FieldInfos[i]),o,s;h&&!BoldBIDashboard.isNullOrUndefined(n.data.rowHeaders.split(String.fromCharCode(127))[i])&&(o=r+"_CustomFormat",s=JSON.parse(f.dataValues.data),e=s.find(function(t){return t[r]===n.data.rowHeaders.split(String.fromCharCode(127))[i]})[o]);BoldBIDashboard.isNullOrUndefined(n.data.rowHeaders.split(String.fromCharCode(127))[i])||u.push({selectedItem:e,columnId:f.getRowContainer().FieldInfos[i].Id,UniqueColumnName:r})},f=this,i=0;i<this.getRowContainer().FieldInfos.length;i++)h(i);if(!BoldBIDashboard.isNullOrUndefined(n.data.columnHeaders)&&n.data.columnHeaders!==""&&this.getColumnContainer().FieldInfos.length>0)for(c=function(i){var r=e.getColumnContainer().FieldInfos[i].UniqueColumnName,f=n.data.columnHeaders.split(String.fromCharCode(127))[i],h=t.hasCustomDate(e.getColumnContainer().FieldInfos[i]),o,s;h&&!BoldBIDashboard.isNullOrUndefined(n.data.columnHeaders.split(String.fromCharCode(127))[i])&&(o=r+"_CustomFormat",s=JSON.parse(e.dataValues.data),f=s.find(function(t){return t[r]===n.data.columnHeaders.split(String.fromCharCode(127))[i]})[o]);BoldBIDashboard.isNullOrUndefined(n.data.columnHeaders.split(String.fromCharCode(127))[i])||u.push({selectedItem:f,columnId:e.getColumnContainer().FieldInfos[i].Id,UniqueColumnName:r})},e=this,i=0;i<this.getColumnContainer().FieldInfos.length;i++)c(i);break;case"column":r=n.data.actualText;t.hasCustomDate(this.getColumnContainer().FieldInfos[n.data.level])&&(o=this.getColumnContainer().FieldInfos[n.data.level].UniqueColumnName+"_CustomFormat",s=JSON.parse(this.dataValues.data),r=s[n.data.index[0]][o]);u.push({selectedItem:r,columnId:this.getColumnContainer().FieldInfos[n.data.level].Id,UniqueColumnName:this.getColumnContainer().FieldInfos[n.data.level].UniqueColumnName})}return u},t.prototype.updateHyperlinkSetting=function(n,t){if(t||n)n&&!t?this.disableHyperlink():t&&this.enableHyperlink();else return},t.prototype.disableHyperlink=function(){var n=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");n.hyperlinkSettings={showColumnHeaderHyperlink:!1,showRowHeaderHyperlink:!1,showValueCellHyperlink:!1,showSummaryCellHyperlink:!1}},t.prototype.enableHyperlink=function(){var t=!1,i=!1,n=!1,r;!this.widgetJson.FilterSettings.ActAsMasterWidget&&this.widgetJson.UrlLink.EnableLink&&(this.widgetJson.UrlLink.ColumnUrlDetails.filter(function(n){return n.UrlType===UrlLinkType[UrlLinkType.Value]}).length!==0&&(n=!0),this.widgetJson.UrlLink.ColumnUrlDetails.filter(function(n){return n.UrlType===UrlLinkType[UrlLinkType.Row]}).length!==0&&(t=!0),this.widgetJson.UrlLink.ColumnUrlDetails.filter(function(n){return n.UrlType===UrlLinkType[UrlLinkType.Column]}).length!==0&&(i=!0),r=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),r.hyperlinkSettings={cssClass:"enablehyperlink",showColumnHeaderHyperlink:i,showRowHeaderHyperlink:t,showValueCellHyperlink:n,showSummaryCellHyperlink:n})},t.prototype.headerCellInfo=function(n){var t,u,r,f,i,e;if(this.updateColumnHeaderColors(n),t=this.getPivotProperties(),u=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),u.dataSourceSettings.columns.length===0&&u.dataSourceSettings.valueAxis==="column"&&(n.node.querySelector(".e-headercelldiv .e-headertext").innerText=n.cell.column.headerText),!BoldBIDashboard.isNullOrUndefined(t.ColorCustomizations)&&t.ColorCustomizations.length>0&&!n.node.classList.contains("e-gtot")&&this.applyColorForColumnAndRowField(n),!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.cell)&&n.cell.colIndex===0&&!this.getPivotProperties().GroupBarSettings.ShowGroupBar&&!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0&&!BoldBIDashboard.isNullOrUndefined(this.getRowContainer())&&this.getRowContainer().FieldInfos.length>0&&(n.node.querySelector(".e-headertext").innerText=this.getRowContainer().FieldInfos[0].DisplayName,n.node.querySelector(".e-headertext").style.fontWeight!==""||BoldBIDashboard.isNullOrUndefined(this.getColumnContainer())||this.getColumnContainer().FieldInfos.length!==0||(n.node.querySelector(".e-headertext").style.cssText=n.node.querySelector(".e-headertext").style.cssText+";font-weight: bold !important;")),t.FilterSettings.ActAsMasterWidget&&t.SelectedFilterValues.length>0){var h=n.node.getAttribute("aria-colindex")?Number(n.node.getAttribute("aria-colindex")):n.cell.colIndex,o=n.node.getAttribute("index")?Number(n.node.getAttribute("index")):n.cell.index,s=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");s.pivotValues[o]&&(r=s.pivotValues[o][h],f=this.getLevelNameForCell(),r&&r.axis==="column"&&r.valueSort.levelName.localeCompare(f)===0&&!n.node.classList.contains("e-stot")&&(n.node.classList.add("e-cellselectionbackground"),t.SelectionCellInfo.ColumnIndex=r.colIndex,t.SelectionCellInfo.RowIndex=r.rowIndex,t.SelectionCellInfo.Header=f,t.SelectionCellInfo.IsSelected=!0))}else this.widgetJson.UrlLink.EnableLink&&(i=null,n.node.innerText==="Grand Total"?n.node.querySelector(".e-headercelldiv")?i=".e-headercelldiv":n.node.querySelector(".e-stackedheadercelldiv")&&(i=".e-stackedheadercelldiv"):(e=this.widgetJson.UrlLink.ColumnUrlDetails.filter(function(t){return t.UniqueColumnName===n.node.getAttribute("fieldname")}),(BoldBIDashboard.isNullOrUndefined(e)||e.length===0)&&(n.node.querySelector(".e-cellvalue")||n.node.querySelector(".e-stackedheadercelldiv"))&&(n.node.querySelector(".e-cellvalue")?i=".e-cellvalue":n.node.querySelector(".e-stackedheadercelldiv")&&(i=".e-stackedheadercelldiv"))),BoldBIDashboard.isNullOrUndefined(i)||(n.node.querySelector(i).innerHTML=n.node.querySelector(i).innerText,n.node.querySelector(i).classList.add("headercellinfo")))},t.prototype.getLinkingData=function(n){var r={isEnabled:!1,parameterDetails:[],url:"",urlLinkInfo:[]},o=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),c=Number(n.data.colIndex),l=Number(n.data.rowIndex),u=o.pivotValues[l][c],i,t,e,s,h,f;if(u&&(i=[],t="",u.axis===UrlLinkType[UrlLinkType.Value].toLowerCase()?(t=o.engineModule.fieldList[u.actualText].id,i=this.getValueCellInfo(n)):(t=u.valueSort.axis,i=this.getFixedCellValue(n)),!BoldBIDashboard.isNullOrUndefined(t)&&t.indexOf("_calc")>0&&(t=t.replace("_calc","")),e=this.widgetJson.UrlLink.ColumnUrlDetails.filter(function(n){return n.UniqueColumnName===t}),e.length>0))for(r.url=e[0].UrlLink,r.isEnabled=!0,s=this.designerInstance.modules.util.getSourceData(this.DataGroupInfo,!1,!0,!0),h=function(n){if(!BoldBIDashboard.isNullOrUndefined(i[n].UniqueColumn)){var t=s.filter(function(t){return t.Id===i[n].UniqueColumn.replace("_calc","")});t.length>0&&r.parameterDetails.push({parameter:t[0].FieldName,value:i[n].Value})}},f=0;f<i.length;f++)h(f);return r.urlLinkInfo=this.widgetJson.UrlLink,r},t.prototype.urlLinkingAction=function(n,t,i){BoldBIDashboard.Dashboard.PivotViewHelper.pivotRenderAction(n,t,i,this.dashboardDesigner)},t.prototype.getValueCellInfo=function(n){var u=[],t=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),o=Number(n.data.colIndex),b=Number(n.data.rowIndex),f=t.pivotValues[b][o],v=0,c,s,r,l,y,a,p,e,i;if(f){for(t.dataSourceSettings.columns.length>0&&(c=t.dataSourceSettings.values.length===0?0:Number(Object.keys(t.engineModule.headerContent)[Object.keys(t.engineModule.headerContent).length-1]),v=t.dataSourceSettings.valueAxis!=="row"&&t.dataSourceSettings.values.length>1?t.pivotValues[c][o].valueSort.levelName.split(String.fromCharCode(127)).length-1:t.pivotValues[c][o].valueSort.levelName.split(String.fromCharCode(127)).length),s=[],r=[],s=Object.keys(n.data.indexObject),i=0;i<s.length;i++)r.push(t.dataSourceSettings.dataSource.at(Number(s[i])));for(l=this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name.toLowerCase()==="row"})[0].FieldInfos,y=function(n){for(var e,o,f=[],t=[],i=0;i<r.length;i++)e=Object.keys(r[i]).filter(function(t){return t===l[n].UniqueColumnName}),o=r[i][e],t.indexOf(o)===-1&&(f.push(e[0]),t.push(o));t.length===1?u.push({UniqueColumn:f[0],Value:t[0]}):u.push({UniqueColumn:f[0],Value:""})},i=0;i<l.length;i++)y(i);for(a=this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name.toLowerCase()==="column"})[0].FieldInfos,p=function(n){for(var e,o,f=[],t=[],i=0;i<r.length;i++)e=Object.keys(r[i]).filter(function(t){return t===a[n].UniqueColumnName}),o=r[i][e],t.indexOf(o)===-1&&(f.push(e[0]),t.push(o));t.length===1?u.push({UniqueColumn:f[0],Value:t[0]}):u.push({UniqueColumn:f[0],Value:""})},i=0;i<a.length;i++)p(i);for(e=0;e<v;e++)BoldBIDashboard.isNullOrUndefined(t.dataSourceSettings.columns[e])||u.push({UniqueColumn:t.dataSourceSettings.columns[e].name,Value:t.pivotValues[Number(Object.keys(t.engineModule.headerContent)[Object.keys(t.engineModule.headerContent).length-1])][o].valueSort.levelName.split(String.fromCharCode(127))[e]});BoldBIDashboard.isNullOrUndefined(t.engineModule.fieldList[f.actualText])||u.push({UniqueColumn:t.engineModule.fieldList[f.actualText].id,Value:f.formattedText==="0"||f.formattedText===""?t.localeObj.getConstant("noValue"):f.formattedText});var h=this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name.toLowerCase()==="hiddencolumn"})[0].FieldInfos,k=this.getPivotProperties().UrlLink.PassingParameters,w=this.designerInstance.modules.util.getSourceData(this.DataGroupInfo,!1,!0,!0),d=function(n){for(var e,o,s,f=[],t=[],i=0;i<r.length;i++)e=Object.keys(r[i]).filter(function(t){return t===h[n].UniqueColumnName}),o=r[i][e],t.indexOf(o)===-1&&(f.push(e[0]),t.push(o));s=w.filter(function(t){return t.FieldName===h[n].Name}).length>0?w.filter(function(t){return t.FieldName===h[n].Name})[0]:[];k.filter(function(n){return n===s.Value}).length>0&&(t.length===1?u.push({UniqueColumn:f[0],Value:t[0]}):u.push({UniqueColumn:f[0],Value:""}))};for(i=0;i<h.length;i++)d(i)}return u},t.prototype.getFixedCellValue=function(n){var r=[],u=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),e=Number(n.currentCell.getAttribute("aria-colindex")),i=Number(n.currentCell.getAttribute("index")),t=u.pivotValues[i][e],f=t.level,o=t.valueSort.axis;for(r.push({UniqueColumn:t.valueSort.axis,Value:t.formattedText});t&&(f>0||t.index===undefined);)i--,t=u.pivotValues[i]?u.pivotValues[i][e]:undefined,t&&t.index!==undefined&&t.valueSort.axis!==o&&(f>t.level&&t.valueSort&&(r.push({UniqueColumn:t.valueSort.axis,Value:t.formattedText}),o=t.valueSort.axis),f=t.level);return r},t.prototype.getPivotProperties=function(){return this.widgetJson},t.prototype.disposePivotView=function(){var n=this.pivotViewElement[0].children.length>0?ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"):null;BoldBIDashboard.isNullOrUndefined(n)||(n.tooltip&&n.tooltip.destroy(),n.destroy());this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.PivotView)},t.prototype.isGroupBarFilterPresent=function(){for(var t=this.getPivotProperties(),n=0;n<t.SelectedFilterValues.length;n++)if(t.SelectedFilterValues[n].IsGroupBarFilter)return!0;return!1},t.prototype.memberFiltering=function(n){var b=this.pivotViewElement.find(".e-editor-search-wrapper").find(".e-maskedtextbox").attr("aria-valuenow"),f=!BoldBIDashboard.isNullOrUndefined(b)&&b!=="",r=this.getPivotProperties(),i,k,e,v,y,l,a,s,p,w,u;if(r.FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(n)){if(i=n.filterSettings,!BoldBIDashboard.isNullOrUndefined(i)){if(k=this.getSelectedFilterInformation(!0,i.name),i.items.length>0){e=[];v=this.getSelectedFilterInformation(!0,i.name);r.SelectedFilterValues=[];var h=this.getFieldInformationForGroupBarFilter(i.name),d=this.getActionForFilterValue(i.items),o=f?i.items:d.values,c=i.name,g=t.hasCustomDate(h[0]);if(g){for(y=[],c=c+"_CustomFormat",l=JSON.parse(this.dataValues.data),a=0;a<o.length;a++)for(s=0;s<l.length;s++)if(o[a]===l[s][i.name]){y.push(l[s][c]);break}o=y}e["action"]=f?InitialDimensionFilterCondition.Include:d.action;e["IsGroupBarFilter"]=!0;h!==null&&h.length>0&&o.length>0?(e[c]=o,this.masterFilterWindowInstance.configureSelectedFilterInfo(r,h,e)):v.length===0&&(this.updateSelectionCellInfo(!1),this.clearGroupBarFilter());this.updateSelectedFilterInformation(v)}else r.SelectedFilterValues=k;this.enableFilterIcon(r.SelectedFilterValues.length>0);this.masterFilterWindowInstance.doInteraction(r.UniqueName);this.designerInstance.modules.serialization.notifyChange()}}else if(this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design)if(p=this.getActionForFilterValue(n.filterSettings.items),n.filterSettings.items=f?n.filterSettings.items:p.values,n.filterSettings.type=f?"Include":BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,p.action),this.initialGroupBarFilter.length===0)this.initialGroupBarFilter.push(n.filterSettings);else{for(w=!1,u=0;u<this.initialGroupBarFilter.length;u++)if(this.initialGroupBarFilter[u].name===n.filterSettings.name){w=!0;this.initialGroupBarFilter[u].items=n.filterSettings.items;this.allStateChecked()&&!f&&this.initialGroupBarFilter.splice(u,1);break}w||this.initialGroupBarFilter.push(n.filterSettings)}},t.prototype.allStateChecked=function(){var n=this.pivotViewElement.find(".e-select-all-wrapper").find(".e-frame");return!BoldBIDashboard.isNullOrUndefined(n)&&n.hasClass("e-check")},t.prototype.getActionForFilterValue=function(n){var t=this.pivotViewElement.find(".e-member-editor-container-outer-div").find(".e-list-item"),r=[],i,u;if(!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0)for(i=0;i<t.length;i++)u=t.eq(i).find(".e-frame"),u.hasClass("e-check")||r.push(t.eq(i).find(".e-list-text").html());return{values:n.length<=r.length?n:r,action:n.length<=r.length?InitialDimensionFilterCondition.Include:InitialDimensionFilterCondition.Exclude}},t.prototype.getSelectedFilterInformation=function(n,t){var r=[],i=this.getPivotProperties(),u;return i.SelectedFilterValues.length>0&&(u=n&&!BoldBIDashboard.isNullOrUndefined(t),r=u?i.SelectedFilterValues.filter(function(n){return!n.IsGroupBarFilter||n.UniqueColumnName!==t}):i.SelectedFilterValues.filter(function(n){return!BoldBIDashboard.isNullOrUndefined(n.IsGroupBarFilter)&&n.IsGroupBarFilter})),r},t.prototype.updateSelectedFilterInformation=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0)for(var t=n.length-1;t>=0;t--)this.getPivotProperties().SelectedFilterValues.unshift(n[t])},t.prototype.getGroupBarFilterinformation=function(){var i=[],t=this.getPivotProperties(),r,n,u,f,e;if(!BoldBIDashboard.isNullOrUndefined(t.SelectedFilterValues)&&t.SelectedFilterValues.length>0)for(r=0;r<t.SelectedFilterValues.length;r++)n=t.SelectedFilterValues[r],!BoldBIDashboard.isNullOrUndefined(n.IsGroupBarFilter)&&n.IsGroupBarFilter&&(u=!BoldBIDashboard.isNullOrUndefined(n.InitialDimensionFilter.Text)&&n.InitialDimensionFilter.Text.length>0,f=u?n.InitialDimensionFilter.DimesnionFilterCondition:n.InitialDateFilter.DateFilterCondition,i.push({items:u?n.InitialDimensionFilter.Text:n.InitialDateFilter.DateFilterList,name:n.UniqueColumnName,type:f}));return!t.FilterSettings.ActAsMasterWidget&&this.pivotViewElement[0].classList.contains("e-pivotview")&&(e=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),i=e.dataSourceSettings.filterSettings),this.enableFilterIcon(t.FilterSettings.ActAsMasterWidget&&i.length>0),i},t.prototype.enableFilterIcon=function(n){n?BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this):BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this)},t.prototype.getFieldInformationForGroupBarFilter=function(n){for(var r,t,u,f=[],i=0;i<this.DataGroupInfo.FieldContainers.length;i++)for(r=this.DataGroupInfo.FieldContainers[i],t=0;t<r.FieldInfos.length;t++)if(u=r.FieldInfos[t],n===u.UniqueColumnName){f.push(u);break}return f},t.prototype.updateGroupBarFilterInformation=function(){var t=this.getPivotProperties(),n;if(t.FilterSettings.ActAsMasterWidget&&this.initialGroupBarFilter.length>0)for(t.SelectedFilterValues=[],n=0;n<this.initialGroupBarFilter.length;n++){var i=[],r=this.getFieldInformationForGroupBarFilter(this.initialGroupBarFilter[n].name);i[this.initialGroupBarFilter[n].name]=this.initialGroupBarFilter[n].items;i["IsGroupBarFilter"]=!0;i["action"]=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(InitialDimensionFilterCondition,this.initialGroupBarFilter[n].type);this.masterFilterWindowInstance.configureSelectedFilterInfo(t,r,i)}else this.initialGroupBarFilter=[];t.SelectedFilterValues.length>0&&this.enableFilterIcon(t.FilterSettings.ActAsMasterWidget)},t.prototype.clearGroupBarFilter=function(){var n=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview");n.dataSourceSettings.filterSettings=[];n.refresh()},t.prototype.getLevelNameForCell=function(){var i="",t,n,r;if(this.widgetJson.SelectedFilterValues.length>0)for(t=0;t<this.widgetJson.SelectedFilterValues.length;t++)n=this.widgetJson.SelectedFilterValues[t],!BoldBIDashboard.isNullOrUndefined(n.IsGroupBarFilter)&&(BoldBIDashboard.isNullOrUndefined(n.IsGroupBarFilter)||n.IsGroupBarFilter)||(r=!BoldBIDashboard.isNullOrUndefined(n.InitialDimensionFilter.Text)&&n.InitialDimensionFilter.Text.length>0?n.InitialDimensionFilter.Text[0]:n.InitialDateFilter.DateFilterList[0],i=i+r);return i},t.prototype.getColorFields=function(){return[{Name:WidgetProperty.Font,DisplayName:""},{Name:WidgetProperty.FillColor,DisplayName:"Foreground",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.BackgroundColor,DisplayName:"Background",ColorPicker:ColorSetColorPickers.NormalColorPicker}]},t.prototype.getFieldName=function(n){var u=this.DataGroupInfo,e="",r,i,f,o,t;if(!BoldBIDashboard.isNullOrUndefined(u.FieldContainers)&&u.FieldContainers.length>0)for(r=u.FieldContainers,i=0;i<r.length;i++)for(f=0;f<r[i].FieldInfos.length;f++)if(o=r[i].FieldInfos,t=o.filter(function(t){return t.UniqueColumnName===n}),!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0){var s=t[0].SummaryType,h=t[0].DateTimeFormat,c=h!==DateTimeFormat[DateTimeFormat.None]?h:s!==SummaryType[SummaryType.NONE]?s:"";e=t[0].Name+(c!==""?"("+c+")":"");break}return e},t.prototype.getBindedColumnInfo=function(){var i=this.DataGroupInfo,r=[],t,n;if(!BoldBIDashboard.isNullOrUndefined(i.FieldContainers)&&i.FieldContainers.length>0)for(t=i.FieldContainers,n=0;n<t.length;n++)t[n].FieldInfos.length>0&&r.push(t[n].FieldInfos);return r},t.prototype.setPropertyElement=function(n,t,i,r){var u,f;this.propertyPanel.canUpdate=!1;u=this.propertyPanel.getPropertyElement(this.getPivotPropertyPanel(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r);u.isVisible=i;f=this.bbdesigner$.extend(!0,{},u);f.categoryName=n;this.propertyPanel.updatePropertyValue(f,"PivotGrid",i);this.propertyPanel.canUpdate=!0},t.prototype.getRangeProperty=function(n){for(var i,t=[],u="",f="",e={},r=0;r<n.length;r++)switch(n[r].WidgetProperties){case 0:t.push({FontColor:n[r].Color,BackGroundColor:"",Font:""});break;case 1:t.push({FontColor:"",BackGroundColor:n[r].Color,Font:""});break;case 6:t.push({FontColor:"",BackGroundColor:"",Font:n[r].FontStyle})}for(i=0;i<t.length;i++)t[i].FontColor!==""&&(u=t[i].FontColor),t[i].BackGroundColor!==""&&(f=t[i].BackGroundColor),t[i].Font!==""&&(e=t[i].Font);return{fontColor:u,backGroundColor:f,fontStyle:e}},t.prototype.styleForMeasureAndRow=function(n,t,i,r){var u="",f=null,e,o,s;i.fontColor!==""?u=u+"color:"+i.fontColor+" !important;":r||(u=u+"color:"+this.getHeaderColumnForegroundColor()+" !important;");u=u+"background:"+(i.backGroundColor!==""?i.backGroundColor:this.themeHelper.getPivotGridDataBackground())+" !important;";i.fontStyle!==""&&(i.fontStyle.IsBold&&(u=u+"font-weight:bold !important;",this.isBoldCustomizationApplied||(this.isBoldCustomizationApplied=!0)),i.fontStyle.IsItalic&&(u=u+"font-style:italic !important;"),i.fontStyle.IsUnderLine&&i.fontStyle.IsStrikeThrough?u=u+"text-decoration:underline line-through !important;":i.fontStyle.IsStrikeThrough?u=u+"text-decoration:line-through !important;":i.fontStyle.IsUnderLine&&(u=u+"text-decoration:underline !important;"));n?(f=t.node.getAttribute("style"),t.node.setAttribute("style",u+(BoldBIDashboard.isNullOrUndefined(f)?"":f)+u+(r?"":"background:"+this.getHeaderColumnBackgroundColor()+";")),e=t.node.getElementsByClassName("e-headertext"),e.length>0&&(f=e[0].getAttribute("style"),e[0].setAttribute("style",(BoldBIDashboard.isNullOrUndefined(f)?"":f)+u)),o=t.node.getElementsByClassName("e-cellvalue"),o.length>0&&(f=o[0].getAttribute("style"),o[0].setAttribute("style",(BoldBIDashboard.isNullOrUndefined(f)?"":f)+u)),s=t.node.getElementsByClassName("e-stackedheadercelldiv"),s.length>0&&(f=s[0].getAttribute("style"),s[0].setAttribute("style",(BoldBIDashboard.isNullOrUndefined(f)?"":f)+u))):(f=t.cell.getAttribute("style"),t.cell.setAttribute("style",u+(BoldBIDashboard.isNullOrUndefined(f)?"":f)+u+(r?"":"background:"+this.getHeaderColumnBackgroundColor()+";")),f=t.cell.getElementsByClassName("e-cellvalue")[0].getAttribute("style"),t.cell.getElementsByClassName("e-cellvalue")[0].setAttribute("style",(BoldBIDashboard.isNullOrUndefined(f)?"":f)+u))},t.prototype.applyColorForColumnAndRowField=function(n){var u="",t="",i,r;if(n.node!==undefined&&n.node.classList!==undefined&&(n.node.querySelector(".e-cellvalue")||n.node.querySelector(".e-headercelldiv")||n.node.querySelector(".e-stackedheadercelldiv"))&&(n.node.querySelector(".e-cellvalue")?(u=n.node.querySelector(".e-cellvalue").innerText,t=n.node.getAttribute("fieldname")):n.node.querySelector(".e-headercelldiv")?(u=n.node.querySelector(".e-headercelldiv").innerText,t=n.node.getAttribute("fieldname")):n.node.querySelector(".e-stackedheadercelldiv")&&(u=n.node.querySelector(".e-stackedheadercelldiv").innerText,t=n.node.getAttribute("fieldname"))),t!==undefined&&t!==null)for(t=t.replace("_calc",""),i=0;i<this.getPivotProperties().ColorCustomizations.length;i++)if(t===this.getPivotProperties().ColorCustomizations[i].SourceColorField.UniqueColumnName)if(r=this.getPivotProperties().ColorCustomizations[i].ColorCustomization,BoldBIDashboard.isNullOrUndefined(r.GradientSettings))BoldBIDashboard.isNullOrUndefined(r.RuleRangeSettings)||this.applyRuleRangeColorForRow(r.RuleRangeSettings,!0,n,u);else{var e=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),o=this.getGradientColorsCollection(r.GradientSettings,i),s=this.getRowValue(e.pivotView.dataSourceSettings.dataSource,t,u,r.GradientSettings,i),f=this.rowColorForGradient(s,o);f!==""&&this.styleForMeasureAndRow(!0,n,{fontColor:"#ffffff",backGroundColor:f,fontStyle:""},!1)}},t.prototype.getAppliedGradientColors=function(){return this.getPivotProperties().ColorCustomizations},t.prototype.renderColorSettings=function(n,t,i){var r=this.widgetHelper.getCurrentWidgetInstance();if(!BoldBIDashboard.isNullOrUndefined(r)&&r.type===ControlType.PivotGrid){if(this.categoryID=this.designerId+"_"+t+"_"+i.categoryName,r.colorSettingsUIControlContainer=this.designerInstance.element.find("#"+this.categoryID),r.colorSettingsUIControlContainer.length!==0||BoldBIDashboard.isNullOrUndefined(n))r.colorSettingsUIControlContainer.length>0&&(r.dataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(r.dataGroupInfo.FieldContainers[0])&&r.dataGroupInfo.FieldContainers[0].FieldInfos.length>0?this.colorSettingsUIControlContainer.css("display","block"):r.colorSettingsUIControlContainer.css("display","none"),this.propertyPanel.updateItemVisibility(i.elementType,"Formatting","ColorSettings",i.isVisible));else{r.colorSettingsUIControlContainer=BoldBIDashboard.buildTag("div.e-dashbrd-customcolor-container","",{},{id:this.categoryID});var u=BoldBIDashboard.buildTag("div.e-dashbrd-customcolor-container-wrap","",{},{id:this.categoryID+"_wrap"}),f=BoldBIDashboard.buildTag("div.e-columns-list","",{},{id:this.designerId+"_"+t+"_columnList"}),e=BoldBIDashboard.buildTag("div.e-basic-advance-panel-wrap","",{},{id:this.designerId+"_"+t+"_basicAdvancePanel"}),o=BoldBIDashboard.buildTag("ul.e-color-custom-ul","",{},{id:r.designerId+"_column_list_pivot"}),s=this.getAdvance();f.append(o);e.append(s);u.append(f,e);r.colorSettingsUIControlContainer.append(u);n.append(r.colorSettingsUIControlContainer);r.renderColorSettingsElements(r);r.dataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(r.dataGroupInfo.FieldContainers[0])&&r.dataGroupInfo.FieldContainers[0].FieldInfos.length>0?this.colorSettingsUIControlContainer.css("display","block"):this.colorSettingsUIControlContainer.css("display","none")}this.updateFieldList()}},t.prototype.getAdvance=function(){var n=BoldBIDashboard.buildTag("div.e-advance-row","",{},{id:this.designerId+"_advanceRow_table"}),t=BoldBIDashboard.buildTag("div.e-advance-option-wrap","",{},{}),i=BoldBIDashboard.buildTag("button.e-advanced-color-settings-button bbi-dbrd-btn-small bbi-dbrd-btn-primary","Customize",{},{id:this.designerId+"_advance_settings_button",type:"button"});return t.append(i),n.append(this.getRadioButtonElement(!0)).append(this.getRadioButtonElement(!1)),n.append(t)},t.prototype.getRadioButtonElement=function(n){var t=BoldBIDashboard.buildTag("div.e-color-settings-category-radio","",{},{id:this.designerId+"_color_settings_category_pivot"}),i=BoldBIDashboard.buildTag("div.e-color-settings-category-radio-div","",{},{id:this.designerId+"_color_settings_category_pivot_div"}),r=BoldBIDashboard.buildTag("div","",{},{}),u=BoldBIDashboard.buildTag("div","",{},{}),f=n?"Value":this.locale.propertyPanel.formatting.colorSettings.advancedSettingText,o={callBackInstance:this,callBackMethod:"onValueChooser",cssClass:".bbi-color-settings-category-radio-value",groupName:"formatting",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.designerId+"_color_settings_category_pivot_value",label:f,isChecked:!0}]},s={callBackInstance:this,callBackMethod:"onAdvanceChooser",cssClass:".bbi-color-settings-category-radio-advance",groupName:"formatting",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.designerId+"_color_settings_category_pivot_advance",label:f,isChecked:!1}]},e;return this.selectRadioButtonValue=new BoldBIDashboard.Dashboard.RadioButton(o,r),this.selectRadioButtonAdvance=new BoldBIDashboard.Dashboard.RadioButton(s,u),e=n?r:u,i.append(e),t.append(i),t},t.prototype.onValueChooser=function(n){var t;if(n.args.event.type==="change"){var i=this.widgetHelper.getCurrentWidgetInstance(),f=i.getColorFieldListName(),u=[],r=i.getPivotProperties();for(t=0;t<r.ColorCustomizations.length;t++)r.ColorCustomizations[t].SourceColorField.UniqueColumnName!==f[i.selectedColumnIndex].UniqueColumnName&&u.push(r.ColorCustomizations[t]);r.ColorCustomizations=u;this.updateAdvanceConditionOption(!1);i.dataConfigurationInstance.postDraggedFields();this.designerInstance.modules.serialization.notifyChange()}},t.prototype.onAdvanceChooser=function(n){if(n.args.event.type==="change"){var t=this.widgetHelper.getCurrentWidgetInstance();t.clickAddConditionButton()}},t.prototype.renderColorSettingsElements=function(n){var i=this.colorSettingsUIControlContainer.find(".e-color-custom-ul"),t=this.colorSettingsUIControlContainer.find(".e-advanced-color-settings-button");i.BoldBIDashboardListBox({datasource:this.getColorFieldListName(),fields:{text:"DisplayName",id:"UniqueColumnName"},width:"195",height:"230",selectedIndex:0,select:this.bbdesigner$.proxy(this.updateIndex,n),cssClass:"bbi-designer-param-assign bbi-designer-border bbi-dbrd-designer-scroller bbi-designer-list-selection bbi-dbrd-control "});t.off("click",this.bbdesigner$.proxy(this.clickAddConditionButton,n));t.on("click",this.bbdesigner$.proxy(this.clickAddConditionButton,n))},t.prototype.updateFieldList=function(){var t,i,n,r;BoldBIDashboard.isNullOrUndefined(this.colorSettingsUIControlContainer)||(t=this.getColorFieldListName(),BoldBIDashboard.isNullOrUndefined(this.colorSettingsUIControlContainer)||(i=this.colorSettingsUIControlContainer.find("#"+this.designPanelInstance.designId+"_column_list_pivot"),n=i.data("BoldBIDashboardListBox"),t.length<=this.selectedColumnIndex&&(this.selectedColumnIndex=0),BoldBIDashboard.isNullOrUndefined(n)||(r=!BoldBIDashboard.isNullOrUndefined(n.model.selectedIndex)&&n.model.selectedIndex===this.selectedColumnIndex,n.option("dataSource",t),n.option("fields",{id:"UniqueColumnName",text:"DisplayName"}),n.option("selectedIndex",this.selectedColumnIndex),i.BoldBIDashboardListBox("instance")._refreshScroller(),r&&this.updateColorSettingsItemProperty())))},t.prototype.updateIndex=function(n){var t=this.widgetHelper.getCurrentWidgetInstance();BoldBIDashboard.isNullOrUndefined(n)||n.index===-1||(t.selectedColumnIndex=n.index,t.updateColorSettingsItemProperty())},t.prototype.getColorFieldListName=function(){for(var t,n,r=this.getBindedColumnInfo(),u=[],i=0;i<r.length;i++)for(t=r[i],n=0;n<t.length;n++)t[n].DateTimeFormat===BoldBIDashboard.DateAndTimeFormat.None&&u.push({DisplayName:this.getFieldName(t[n].UniqueColumnName),UniqueColumnName:t[n].UniqueColumnName});return u},t.prototype.getSelectedColorInfo=function(n,t){if(!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0)for(var i=0;i<n.length;i++)if(!BoldBIDashboard.isNullOrUndefined(n[i].SourceColorField)&&n[i].SourceColorField.UniqueColumnName===t)return n[i];return new TableWidgetCustomColors},t.prototype.clickAddConditionButton=function(){var n=this.widgetHelper.getCurrentWidgetInstance(),t=n.getColorFieldListName(),i=new BoldBIDashboard.DashboardDesignerUtility.AdvancedColorCustomization(this.designerInstance);n.selectedTableColorWidget=this.getSelectedColorInfo(n.getPivotProperties().ColorCustomizations,t[n.selectedColumnIndex].UniqueColumnName);n.selectedTableColorWidget.SourceColorField.UniqueColumnName=t[n.selectedColumnIndex].UniqueColumnName;var r=this.getDefaultBasedOnField(t[n.selectedColumnIndex].UniqueColumnName),u={colorCustomizationObj:n.selectedTableColorWidget.ColorCustomization,DataGroupInfo:n.DataGroupInfo,colorFields:n.colorFields,colorTypeCollection:["Gradient","Rule"],defaultBasedOnField:r,ignoreBasedOn:!0,controlType:ControlType.PivotGrid.toString(),legendVisible:!1};i.populateUI(u,n,"UpdateColorCustomization")},t.prototype.UpdateColorCustomization=function(n,t){var i=this.widgetHelper.getCurrentWidgetInstance();t?t&&!this.isColorExist(i.selectedTableColorWidget,i.getPivotProperties().ColorCustomizations)&&(this.updateAdvanceConditionOption(!1),i.colorSettingsUIControlContainer.find("#"+this.designerId+"_color_settings_category_pivot_value_rdo_input").prop("checked",!0),this.designerInstance.modules.serialization.notifyChange()):(i.selectedTableColorWidget.ColorCustomization=n,i.getPivotProperties().ColorCustomizations=this.processColorCustomization(i),i.dataConfigurationInstance.postDraggedFields(),this.designerInstance.modules.serialization.notifyChange())},t.prototype.updateAdvanceConditionOption=function(n){var t=n?"block":"none";this.colorSettingsUIControlContainer.find(".e-advanced-color-settings-button").css("display",t);this.colorSettingsUIControlContainer.find(".e-advance-settings-condition-label").css("display",t);this.colorSettingsUIControlContainer.find("#"+this.designerId+"_color_settings_category_pivot_advance_rdo_input").prop("checked",n)},t.prototype.processColorCustomization=function(n){var t=[],r=this.selectedTableColorWidget,i,u,f,e;if(t=n.getPivotProperties().ColorCustomizations,i=BoldBIDashboard.isNullOrUndefined(t)?[]:t,!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0)if(this.isColorExist(r,n.getPivotProperties().ColorCustomizations)){for(u=0;u<t.length;u++)if(f=t[u],f.SourceColorField.UniqueColumnName===r.SourceColorField.UniqueColumnName){e=t.indexOf(f);i[e]=r;break}}else i.push(r);else i.push(r);return!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0?i:null},t.prototype.isColorExist=function(n,t){for(var f,r=!1,u=BoldBIDashboard.isNullOrUndefined(t)?[]:t,i=0;i<u.length;i++)if(f=u[i],f.SourceColorField.UniqueColumnName===n.SourceColorField.UniqueColumnName){r=!0;break}return r},t.prototype.getDefaultBasedOnField=function(n){for(var i,t,u=this.getBindedColumnInfo(),r=0;r<u.length;r++)for(i=u[r],t=0;t<i.length;t++)if(i[t].UniqueColumnName===n)return i[t];return null},t.prototype.updateColorSettingsItemProperty=function(){var n=this.widgetHelper.getCurrentWidgetInstance(),t,i,r;BoldBIDashboard.isNullOrUndefined(n)||n.type!==ControlType.PivotGrid||(t=n.getColorFieldListName(),t.length>0&&(n.selectedTableColorWidget=this.getSelectedColorInfo(n.getPivotProperties().ColorCustomizations,t[n.selectedColumnIndex].UniqueColumnName),i=this.isColorExist(n.selectedTableColorWidget,n.getPivotProperties().ColorCustomizations),r=!BoldBIDashboard.isNullOrUndefined(n.selectedTableColorWidget.ColorCustomization)&&!BoldBIDashboard.isNullOrUndefined(n.selectedTableColorWidget.ColorCustomization.GradientSettings)&&!BoldBIDashboard.isNullOrUndefined(n.selectedTableColorWidget.ColorCustomization.RuleRangeSettings),this.updateAdvanceConditionOption(i&&!r),n.colorSettingsUIControlContainer.find("#"+this.designerId+"_color_settings_category_pivot_value_rdo_input").prop("checked",!(i&&!r))))},t.prototype.getValueContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Value")},t.prototype.getRowContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Row")},t.prototype.getColumnContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Column")},t.prototype.getTooltipContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Tooltip")},t.prototype.getBindedColumnIndex=function(n){var i=0,t;if(!BoldBIDashboard.isNullOrUndefined(n.FieldContainers))for(t=0;t<n.FieldContainers.length;t++)switch(n.FieldContainers[t].Name){case"Tooltip":i=t}return{tooltipIndex:i}},t.prototype.updateQueryOrder=function(n){if(this.isOpenReport&&!BoldBIDashboard.isNullOrUndefined(n))for(var t=0;t<n.length;t++)if(BoldBIDashboard.isNullOrUndefined(n[t].QueryOrder))switch(n[t].Name){case"Value":case"Column":n[t].QueryOrder=0;break;case"Row":n[t].QueryOrder=2}},t.prototype.updateColorCustomizationCollection=function(){var f=[],e=!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length>0?this.DataGroupInfo.FieldContainers:[],i,o,r,s,n,u,t;if(e.length>0)for(i=0;i<e.length;i++)for(o=e[i].FieldInfos,r=0;r<o.length;r++)f.push(o[r].UniqueColumnName);if(s=[],n=this.getPivotProperties(),!BoldBIDashboard.isNullOrUndefined(n.ColorCustomizations)&&n.ColorCustomizations.length>0)for(u=0;u<f.length;u++)for(t=0;t<n.ColorCustomizations.length;t++)f[u]===n.ColorCustomizations[t].SourceColorField.UniqueColumnName&&s.push(n.ColorCustomizations[t]);n.ColorCustomizations=s},t.prototype.updateColorCustomizationToPivotGrid=function(n,t){var u=t.axis==="row"?n.cell.getAttribute("fieldname"):t.actualText,f,i,r;for(!BoldBIDashboard.isNullOrUndefined(u)&&u.indexOf("_calc")>0&&(u=u.replace("_calc","")),f=this.getPivotProperties(),i=0;i<f.ColorCustomizations.length;i++)if(!BoldBIDashboard.isNullOrUndefined(u)&&u===f.ColorCustomizations[i].SourceColorField.UniqueColumnName)if(r=f.ColorCustomizations[i].ColorCustomization,BoldBIDashboard.isNullOrUndefined(r.GradientSettings))BoldBIDashboard.isNullOrUndefined(r.RuleRangeSettings)||(t.axis==="row"?this.applyRuleRangeColorForRow(r.RuleRangeSettings,!1,n,t.formattedText):t.axis==="value"&&this.applyRuleRangeColorForValue(!1,n,r.RuleRangeSettings,t));else{var o=this.getGradientColorsCollection(r.GradientSettings,i),s=t.axis==="row"?this.getRowValue(n.pivotview.dataSourceSettings.dataSource,t.valueSort.axis,t.formattedText,r.GradientSettings,i):t.value,e=this.rowColorForGradient(s,o);e!==""&&this.styleForMeasureAndRow(!1,n,{fontColor:"#ffffff",backGroundColor:e,fontStyle:""},!1)}},t.prototype.getRowValue=function(n,t,i,r,u){var f=n.filter(function(n){return n[t]===i});return!BoldBIDashboard.isNullOrUndefined(f)&&f.length>0?parseInt(f[0][r.BasedOn.FieldId.substring(15)+"_Color_"+u],10):null},t.prototype.applyRuleRangeColorForRow=function(n,t,i,r){var f;if(!BoldBIDashboard.isNullOrUndefined(n))for(f=0;f<n.RangeColorInfo.length;f++)if(!BoldBIDashboard.isNullOrUndefined(n.RangeColorInfo[f].DimensionConditionalValue)){var o=this.getRangeProperty(n.RangeColorInfo[f].PropertyColorPair),u=n.RangeColorInfo[f].DimensionConditionalValue,s=n.RangeColorInfo[f].IsCaseSensitive,e=s?r:r.toLocaleUpperCase();u=s?u:u.toLocaleUpperCase();switch(n.RangeColorInfo[f].DimensionCondition){case 0:e.substring(0,0+u.length)===u&&this.styleForMeasureAndRow(t,i,o,!1);break;case 1:e.substring(e.length-u.length,e.length)===u&&this.styleForMeasureAndRow(t,i,o,!1);break;case 2:e.search(u)!==-1&&this.styleForMeasureAndRow(t,i,o,!1);break;case 3:e.search(u)===-1&&this.styleForMeasureAndRow(t,i,o,!1);break;case 4:e===u&&this.styleForMeasureAndRow(t,i,o,!1);break;case 5:e!==u&&this.styleForMeasureAndRow(t,i,o,!1)}}},t.prototype.updateColumnHeaderColors=function(n){var l=this.getHeaderColumnForegroundColor(),e=this.getHeaderColumnBackgroundColor(),o=this.themeHelper.getPivotGridHeaderFont(),i="color:"+l+" !important;\tfont-size: "+(this.getPivotProperties().IsAutoHeaderFontSize?o.size+"!important;":this.getPivotProperties().HeaderFontSize+"px !important;")+"\tfont-family: "+o.family+" !important;\tfont-weight: "+o.weight+" !important;",s=ejdashboard.base.getComponent(this.pivotViewElement[0],"pivotview"),t=null,h,c,r,f,u;n.name==="headerCellInfo"&&(n.cell.column.headerText==="Grand Total"&&(h=this.pivotViewElement.find(".e-gridheader"),t=h[0].getAttribute("style"),h[0].setAttribute("style",(BoldBIDashboard.isNullOrUndefined(t)?"":t)+"background:"+e+"!important;"),c=this.pivotViewElement.find(".e-gridcontent .e-content"),t=c[0].getAttribute("style"),c[0].setAttribute("style",(BoldBIDashboard.isNullOrUndefined(t)?"":t)+"background:"+e+"!important;")),t=n.node.getAttribute("style"),n.node.setAttribute("style",(BoldBIDashboard.isNullOrUndefined(t)?"":t)+i+"background:"+e+";"),r=n.node.getElementsByClassName("e-headertext"),r.length>0&&(t=r[0].getAttribute("style"),r[0].setAttribute("style",(BoldBIDashboard.isNullOrUndefined(t)?"":t)+i)),f=n.node.getElementsByClassName("e-cellvalue"),f.length>0&&(t=f[0].getAttribute("style"),f[0].setAttribute("style",(BoldBIDashboard.isNullOrUndefined(t)?"":t)+i)),u=n.node.getElementsByClassName("e-stackedheadercelldiv"),u.length>0&&(t=u[0].getAttribute("style"),u[0].setAttribute("style",(BoldBIDashboard.isNullOrUndefined(t)?"":t)+i)),(n.node.classList.contains("e-gtot")||n.node.classList.contains("e-columnsheader")&&n.node.getAttribute("role")==="columnheader"&&s.pivotView.pivotValues.length>0&&!BoldBIDashboard.isNullOrUndefined(s.pivotView.pivotValues[0][n.node.getAttribute("aria-colindex")])&&s.pivotView.pivotValues[0][n.node.getAttribute("aria-colindex")].type==="grand sum")&&(i=i+"font-weight:bold !important",r.length>0?(t=r[0].getAttribute("style"),r[0].setAttribute("style",(BoldBIDashboard.isNullOrUndefined(t)?"":t)+i)):u.length>0&&(t=u[0].getAttribute("style"),u[0].setAttribute("style",(BoldBIDashboard.isNullOrUndefined(t)?"":t)+i))))},t.prototype.getGroupPanelBackgroundColor=function(){var n=this.themeHelper.getPivotGroupPanelBackgroundColor(this.designerInstance.isDarkTypeTheme()||this.designerInstance.isDarkTypeDashboardTheme());return this.getPivotProperties().GroupBarSettings.GroupPanelBackgroundColor.IsEdited?this.getPivotProperties().GroupBarSettings.GroupPanelBackgroundColor.Color:n},t.prototype.getHeaderColumnBackgroundColor=function(){var n=this.themeHelper.getPivotHeaderColumnBackgroundColor(this.designerInstance.isDarkTypeTheme()||this.designerInstance.isDarkTypeDashboardTheme());return this.getPivotProperties().NewHeaderSettings.Background.IsEdited?this.getPivotProperties().NewHeaderSettings.Background.Color:n},t.prototype.getHeaderColumnForegroundColor=function(){var n=this.designerInstance.isDarkTypeTheme()?"#C6D0E8":this.themeHelper.getPivotHeaderColumnForegroundColor(this.designerInstance.isDarkTypeTheme());return this.getPivotProperties().NewHeaderSettings.Foreground.IsEdited?this.getPivotProperties().NewHeaderSettings.Foreground.Color:n},t.prototype.applyRuleRangeColorForValue=function(n,t,i,r){for(var e=0,h=1,s=0;s<i.RangeColorInfo.length;s++){var o=this.getRangeProperty(i.RangeColorInfo[s].PropertyColorPair),f=[i.RangeColorInfo[s].StartRange,i.RangeColorInfo[s].EndRange],u=Number(r.value);if(!isNaN(u)&&r.formattedText!=="")switch(i.RangeColorInfo[s].MeasureCondition){case 0:u>f[e]&&this.styleForMeasureAndRow(n,t,o,!0);break;case 1:u>=f[e]&&this.styleForMeasureAndRow(n,t,o,!0);break;case 2:u<f[e]&&this.styleForMeasureAndRow(n,t,o,!0);break;case 3:u<=f[e]&&this.styleForMeasureAndRow(n,t,o,!0);break;case 4:u===f[e]&&this.styleForMeasureAndRow(n,t,o,!0);break;case 5:u!==f[e]&&this.styleForMeasureAndRow(n,t,o,!0);break;case 6:u>=f[e]&&u<=f[h]&&this.styleForMeasureAndRow(n,t,o,!0);break;case 7:u>=f[e]&&u<=f[h]||this.styleForMeasureAndRow(n,t,o,!0)}}},t.prototype.getGradientColorsCollection=function(n,t){var r=[];if(!BoldBIDashboard.isNullOrUndefined(n)){var i=n.GradientColorInfo,u=i.Low.IsCustom?i.Low.Value:parseFloat(this.minMaxValues["Min_"+n.BasedOn.FieldId.substring(15)+"_Color_"+t]),f=i.High.IsCustom?i.High.Value:parseFloat(this.minMaxValues["Max_"+n.BasedOn.FieldId.substring(15)+"_Color_"+t]);r.push({Color:i.Low.Color,Value:u});i.HasMidColor&&r.push({Color:i.Mid.Color,Value:i.Mid.IsCustom?i.Mid.Value:(u+f)/2});r.push({Color:i.High.Color,Value:f})}return r},t.prototype.rowColorForGradient=function(n,t){var o="",r,u,e,f,i,s,h,c;if(!isNaN(n)&&!BoldBIDashboard.isNullOrUndefined(n)&&!(n<t[0].Value||n>t[t.length-1].Value)){for(r=t[0].Value,u=0,e=0;e<t.length;e++)if(f=t[e].Value,n<=f){u=f;break}else u=f,r=f;i=0;s=u-r;i=(n-r)/s;i=isNaN(i)?0:i;h=this.getEquivalentColorToValue(r,t);c=this.getEquivalentColorToValue(u,t);o=this.getGradientColorForRow(h,c,i)}return o},t.prototype.getEquivalentColorToValue=function(n,t){for(var r="",i=0;i<t.length;i++)t[i].Value===n&&(r=t[i].Color);return r},t.prototype.getGradientColorForRow=function(n,t,i){var r=this.convertHexToRGB(n),u=this.convertHexToRGB(t);i<0&&(i=0);var f=r.r+i*(u.r-r.r),e=r.g+i*(u.g-r.g),o=r.b+i*(u.b-r.b);return this.convertRgbToHex(f,e,o)},t.prototype.convertHexToRGB=function(n){var t=n.indexOf("#")!==-1;return t?{r:parseInt(n.substring(1,3),16),g:parseInt(n.substring(3,5),16),b:parseInt(n.substring(5,7),16)}:null},t.prototype.convertRgbToHex=function(n,t,i){return"#"+(16777216+(Math.round(n)<<16)+(Math.round(t)<<8)+Math.round(i)).toString(16).slice(1)},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.PivotViewItem",InternalPivotViewReportItem,window);BoldBIDashboard.DashboardDesignerUtility.PivotViewItem.prototype.initialize(),function(n){var t;(function(t){var i=function(){function t(){}return t.getPivotSummaryType=function(n){switch(n){case SummaryType.SUM:case SummaryType.COUNT:case SummaryType.COUNTD:return"Sum";case SummaryType.MIN:return"Min";case SummaryType.MAX:return"Max"}return"Sum"},t.getPivotDateFormat=function(n){switch(n){case DateTimeFormat.Date:case DateTimeFormat.MonthDayYear:return"MM/dd/yyyy";case DateTimeFormat.DateHour:return"dd/MM/yyyy HH";case DateTimeFormat.DayMonthYear:return"dd/MM/yyyy";case DateTimeFormat.Default:return"MM/dd/yyyy hh:mm:ss a";case DateTimeFormat.Time:return"HH:mm:ss";case DateTimeFormat.Month:return"MMM";case DateTimeFormat.MonthYear:return"MMM yyyy";case DateTimeFormat.DayOfWeek:return"EEEE"}return"MM/dd/yyyy"},t.getPivotDateType=function(n){switch(n){case DateTimeFormat.Date:case DateTimeFormat.DateHour:case DateTimeFormat.DayMonthYear:case DateTimeFormat.Month:case DateTimeFormat.MonthYear:case DateTimeFormat.MonthDayYear:case DateTimeFormat.DayOfWeek:return"date";case DateTimeFormat.Default:return"dateTime";case DateTimeFormat.Time:return"time"}return"date"},t.isDateTypeRequired=function(n){switch(n){case DateTimeFormat.Date:case DateTimeFormat.Default:case DateTimeFormat.Time:case DateTimeFormat.Month:case DateTimeFormat.MonthYear:case DateTimeFormat.DateHour:case DateTimeFormat.DayMonthYear:case DateTimeFormat.MonthDayYear:case DateTimeFormat.DayOfWeek:return!0;case DateTimeFormat.Year:case DateTimeFormat.Quarter:case DateTimeFormat.Day:case DateTimeFormat.Hour:case DateTimeFormat.Minute:case DateTimeFormat.Second:case DateTimeFormat.QuarterYear:case DateTimeFormat.WeekOfYear:return!1}return!1},t.pivotRenderAction=function(t,i,r,u){var c=u._id;this.categoryId=c+"_"+i+"_"+r.category;var f=u.element.find("#"+c+"_propertyPanelContainer").width(),o=r.value,e=u.element.find("#"+this.categoryId);if(e.length===0&&t){e=n.buildTag("div","",{width:f-10,display:n.isNullOrUndefined(r.isVisible)?"block":r.isVisible?"block":"none"},{id:this.categoryId});var l=n.buildTag("table.bbi-designer-exp-table","",{width:"100%",margin:"8px 0px"},{unselectable:"on"}),a=n.buildTag("tr","",{height:"28px"},{}),v=n.buildTag("td","",{width:(f-47)*47/100+"px"},{}),y=n.buildTag("td","",{},{}),dt=n.buildTag("div.bbi-designer-fontfamily","Enable Link",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"5px","white-space":"nowrap","text-overflow":"ellipsis"},{id:this.categoryId+"_link_text_ckb"}),p=n.buildTag("input","",{"margin-left":"2px"},{id:this.categoryId+"_link_ckb",type:"checkbox"}),w=n.buildTag("div","",{},{id:this.categoryId+"_link_selectField"}),b=n.buildTag("table.bbi-designer-exp-table","",{width:"100%",margin:"8px 0px"},{unselectable:"on"}),k=n.buildTag("tr","",{height:"28px"},{}),d=n.buildTag("td","",{width:(f-47)*47/100+"px"},{}),g=n.buildTag("td","",{},{}),gt=n.buildTag("div.bbi-designer-fontfamily","Choose Field",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"5px","white-space":"nowrap","text-overflow":"ellipsis"}),nt=n.buildTag("input.e-textbox","",{height:"28px",width:(f-47)*47/100+"px","margin-left":"2px",float:"left"},{id:this.categoryId+"_link_selectField_txt",type:"text"}),tt=n.buildTag("div","",{},{id:this.categoryId+"_link_url"}),it=n.buildTag("table.bbi-designer-exp-table","",{width:"100%",margin:"8px 0px"},{unselectable:"on"}),rt=n.buildTag("tr","",{height:"28px"},{}),ut=n.buildTag("td","",{width:(f-47)*47/100+"px"},{}),ft=n.buildTag("td","",{},{}),ni=n.buildTag("div.bbi-designer-fontfamily","URL",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"5px","white-space":"nowrap","text-overflow":"ellipsis"}),s=n.buildTag("textarea.e-textbox","",{height:"125px",width:(f-33)*57/100-35+"px","margin-left":"2px",resize:"none","padding-bottom":"0px","padding-top":"0px"},{id:this.categoryId+"_link_url_txt",type:"text",autocorrect:"off",spellcheck:"false"}),et=n.buildTag("div","",{},{id:this.categoryId+"_link_appendColumn"}),ot=n.buildTag("table.bbi-designer-exp-table","",{width:"100%",margin:"8px 0px"},{unselectable:"on"}),st=n.buildTag("tr","",{height:"28px"},{}),ht=n.buildTag("td","",{width:(f-47)*47/100+"px"},{}),ct=n.buildTag("td","",{},{}),ti=n.buildTag("div.bbi-designer-fontfamily","Append Column",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"5px","white-space":"nowrap","text-overflow":"ellipsis"}),lt=n.buildTag("div","",{"padding-left":"2px"},{}),at=n.buildTag("ul","",{},{id:this.categoryId+"_link_appendColumn_list"});lt.append(at);var vt=n.buildTag("div","",{},{id:this.categoryId+"_link_urlPreview"}),yt=n.buildTag("table.bbi-designer-exp-table","",{width:"100%",margin:"8px 0px"},{unselectable:"on"}),pt=n.buildTag("tr","",{height:"28px"},{}),wt=n.buildTag("td","",{width:(f-47)*47/100+"px"},{}),bt=n.buildTag("td","",{},{}),ii=n.buildTag("div.bbi-designer-fontfamily","URL Preview",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"5px","white-space":"nowrap","text-overflow":"ellipsis"}),kt=n.buildTag("div.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden","margin-right":"5px","white-space":"nowrap",width:(f-33)*57/100-30+"px","text-overflow":"ellipsis"}),h=n.buildTag("a","",{height:"28px","margin-left":"2px","font-size":"13px"},{id:this.categoryId+"_link_urlPreview_txt",href:""});wt.append(ii);kt.append(h);bt.append(kt);pt.append(wt).append(bt);yt.append(pt);vt.append(yt);ht.append(ti);ct.append(lt);st.append(ht).append(ct);ot.append(st);et.append(ot);ut.append(ni);ft.append(s);rt.append(ut).append(ft);it.append(rt);tt.append(it);d.append(gt);g.append(nt);k.append(d).append(g);b.append(k);w.append(b);v.append(dt);y.append(p);a.append(v).append(y);l.append(a);e.append(l);e.append(w);e.append(tt);e.append(et);e.append(vt);this.renderCustomLinkDestination(u,e);t.append(e);h.text("");nt.BoldBIDashboardDropDownList({dataSource:[],fields:{text:"Name",value:"Value",id:"Id"},showRoundedCorner:!0,width:(f-47)*47/100+"px",select:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.changePivotColumn,this,u),cssClass:"bbi-dbrd-control"});at.BoldBIDashboardListBox({dataSource:[],fields:{text:"Name",value:"Value"},showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-border bbi-designer-list-selection bbi-dbrd-designer-scroller bbi-dbrd-control",width:(f-33)*57/100-20+"px",height:"125px",select:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.selectURL,this,u)});p.BoldBIDashboardCheckBox({width:(f-33)*57/100-15+"px",change:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.changedPivotLink,this,u),cssClass:"e-designer-prop-checkbox"});s.bind("blur",BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.urlPivotFocusOut,this,u));s.bind("keyup",BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.urlKeyUp,this,u));h.bind("click",BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.urlpivotPreviewClick,this,u))}e.length>0&&(this.updateCustomLinkDestination(u,r),u.element.find("#"+this.categoryId).css("display",n.isNullOrUndefined(r.isVisible)?"block":r.isVisible?"block":"none"),n.isNullOrUndefined(r.isDisable)||this.enableLink(!r.isDisable,u),n.isNullOrUndefined(o)||(u.element.find("#"+this.categoryId+"_link_ckb").data("BoldBIDashboardCheckBox").setModel({checked:o.EnableLink}),this.enablePivotLinkConfig(r.isDisable?!1:o.EnableLink,u),this.linkItem=r,this.populatePivotList(u)))},t.renderCustomLinkDestination=function(t,i){var a;this.locale=t.getLocalizationContent();this.dashboardDesigner=t;var tt=t._id,r=t.element.find("#"+tt+"_propertyPanelContainer").width(),f=n.buildTag("div","",{},{id:this.categoryId+"_link_config_1"}),it=n.buildTag("table.bbi-designer-exp-table bbi-designer-linking-config-table","",{width:"100%",margin:"8px 0px"},{});f.append(it);i.append(f);var e=n.buildTag("div","",{},{id:this.categoryId+"_link_selectField_1"}),o=n.buildTag("table.bbi-designer-exp-table","",{width:"100%",margin:"8px 0px"},{unselectable:"on"}),s=n.buildTag("tr","",{height:"28px"},{}),h=n.buildTag("td","",{width:(r-47)*47/100+"px"},{}),c=n.buildTag("td","",{},{}),rt=n.buildTag("div.bbi-designer-fontfamily",this.locale.propertyPanel.linking.targetText,{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"5px","white-space":"nowrap","text-overflow":"ellipsis"}),l=n.buildTag("input.e-textbox","",{height:"28px",width:(r-33)*57/100-30+"px","margin-left":"2px"},{id:this.categoryId+"_link_selectField_txt_1",type:"text"});h.append(rt);c.append(l);s.append(h).append(c);o.append(s);e.append(o);i.append(e);a=[{Name:this.locale.propertyPanel.linking.targetField.newTabText,Value:"_blank"},{Name:this.locale.propertyPanel.linking.targetField.samePageText,Value:"_top"},{Name:this.locale.propertyPanel.linking.targetField.currentFrameText,Value:"_self"},{Name:this.locale.propertyPanel.linking.targetField.parentFrameText,Value:"_parent"},{Name:this.locale.propertyPanel.linking.targetField.popUpText,Value:"_popup"},{Name:this.locale.propertyPanel.linking.targetField.newWindowText,Value:"_newwindow"}];l.BoldBIDashboardDropDownList({dataSource:a,fields:{text:"Name",value:"Value"},showRoundedCorner:!0,width:(r-33)*57/100-10+"px",cssClass:"bbi-dbrd-control",selectedIndex:0,select:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.updateLinkDestinationInfo,this)});this.renderPopUpTitle(t,i);var u=n.buildTag("div","",{},{id:this.categoryId+"_link_windowSize"}),v=n.buildTag("table.bbi-designer-exp-table","",{width:"100%",margin:"8px 0px"},{unselectable:"on"}),y=n.buildTag("tr","",{height:"28px"},{}),p=n.buildTag("tr","",{height:"28px"},{}),w=n.buildTag("td","",{width:(r-47)*47/100+"px"},{}),b=n.buildTag("td","",{},{}),k=n.buildTag("td","",{width:(r-47)*47/100+"px"},{}),d=n.buildTag("td","",{},{}),g=n.buildTag("input","",{"margin-left":"2px"},{id:this.categoryId+"_window_size_numeric"}),ut=n.buildTag("div.bbi-designer-fontfamily",this.locale.propertyPanel.linking.height,{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"5px","white-space":"nowrap","text-overflow":"ellipsis"}),nt=n.buildTag("input","",{"margin-left":"2px"},{id:this.categoryId+"_window_size_numeric1"}),ft=n.buildTag("div.bbi-designer-fontfamily","Width",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"5px","white-space":"nowrap","text-overflow":"ellipsis"});w.append(ut);b.append(g);k.append(ft);d.append(nt);y.append(w).append(b);p.append(k).append(d);v.append(y,p);u.append(v);i.append(u);g.ejNumericTextbox({value:500,minValue:100,width:"100px",height:"24px",showRoundedCorner:!0,change:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.updateHeightWidth,this)});nt.ejNumericTextbox({value:500,minValue:100,width:"100px",height:"24px",showRoundedCorner:!0,change:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.updateHeightWidth,this)});u.css("display","none")},t.renderPopUpTitle=function(t,i){var c=t._id,u=t.element.find("#"+c+"_propertyPanelContainer").width(),r=n.buildTag("div","",{},{id:this.categoryId+"_link_panel_title"}),f=n.buildTag("table.bbi-designer-exp-table","",{width:"100%",margin:"8px 0px"},{unselectable:"on"}),e=n.buildTag("tr","",{height:"28px"},{}),o=n.buildTag("td","",{width:(u-47)*47/100+"px"},{}),s=n.buildTag("td","",{},{}),l=n.buildTag("div.bbi-designer-fontfamily","Title",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"5px","white-space":"nowrap","text-overflow":"ellipsis"}),h=n.buildTag("input.e-dbrd-column-urltxt e-textbox ","",{width:(u-33)*57/100-30+"px",height:"28px","margin-left":"2px"},{id:this.categoryId+"_link_panel_title_txt",type:"text",autocorrect:"off",spellcheck:"false"});r.css("display","none");o.append(l);s.append(h);e.append(o).append(s);f.append(e);r.append(f);i.append(r);h.bind("blur",BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.updateTitle,this))},t.updateLinkDestinationInfo=function(n){n.isInteraction&&(n.value==="_popup"||n.value==="_newwindow"?this.updateAdvance(n):this.updateLinkDestination(!1,n.value))},t.updateCustomLinkDestination=function(n,t){if(t.value.EnableLink){var i=t.value.TargetTypeInfo;switch(i){case"_popup":this.dashboardDesigner.element.find("#"+this.categoryId+"_link_windowSize").css("display","none");this.dashboardDesigner.element.find("#"+this.categoryId+"_link_panel_title").css("display","block");this.dashboardDesigner.element.find("#"+this.categoryId+"_link_panel_title_txt").val(t.value.Title);break;case"_newwindow":this.dashboardDesigner.element.find("#"+this.categoryId+"_link_windowSize").css("display","block");this.dashboardDesigner.element.find("#"+this.categoryId+"_link_panel_title").css("display","none");this.dashboardDesigner.element.find("#"+this.categoryId+"_window_size_numeric").data("ejNumericTextbox").option("value",t.value.Height);this.dashboardDesigner.element.find("#"+this.categoryId+"_window_size_numeric1").data("ejNumericTextbox").option("value",t.value.Width);break;default:this.dashboardDesigner.element.find("#"+this.categoryId+"_link_selectField_1").css("display","block");this.dashboardDesigner.element.find("#"+this.categoryId+"_link_popDiv").css("display","none");this.dashboardDesigner.element.find("#"+this.categoryId+"_link_windowSize").css("display","none");this.dashboardDesigner.element.find("#"+this.categoryId+"_link_panel_title").css("display","none")}this.dashboardDesigner.element.find("#"+this.categoryId+"_link_selectField_txt_1").data("BoldBIDashboardDropDownList").selectItemByValue(t.value.TargetTypeInfo)}else this.dashboardDesigner.element.find("#"+this.categoryId+"_link_selectField_1").css("display","block"),this.dashboardDesigner.element.find("#"+this.categoryId+"_link_popDiv").css("display","none"),this.dashboardDesigner.element.find("#"+this.categoryId+"_link_windowSize").css("display","none"),this.dashboardDesigner.element.find("#"+this.categoryId+"_link_panel_title").css("display","none")},t.updateHeightWidth=function(n){if(n.isInteraction){var t=this.dashboardDesigner.element.find("#"+this.categoryId+"_link_selectField_txt_1").data("BoldBIDashboardDropDownList").getSelectedValue();this.updateLinkDestination(!0,t)}},t.updateTitle=function(){var n=this.dashboardDesigner.element.find("#"+this.categoryId+"_link_selectField_txt_1").data("BoldBIDashboardDropDownList").getSelectedValue();this.updateLinkDestination(!0,n)},t.updateAdvance=function(n){n.isInteraction&&(n.value==="_popup"?(this.dashboardDesigner.element.find("#"+this.categoryId+"_link_windowSize").css("display","none"),this.dashboardDesigner.element.find("#"+this.categoryId+"_link_panel_title").css("display","block"),this.dashboardDesigner.element.find("#"+this.categoryId+"_link_panel_title_txt").val("")):n.value==="_newwindow"&&(this.dashboardDesigner.element.find("#"+this.categoryId+"_link_windowSize").css("display","block"),this.dashboardDesigner.element.find("#"+this.categoryId+"_link_panel_title").css("display","none"),this.dashboardDesigner.element.find("#"+this.categoryId+"_window_size_numeric").data("ejNumericTextbox").option("value",500),this.dashboardDesigner.element.find("#"+this.categoryId+"_window_size_numeric1").data("ejNumericTextbox").option("value",500)),this.updateLinkDestination(!0,n.value,n))},t.updateLinkDestination=function(n,t){var i=JSON.parse(JSON.stringify(this.linkItem));if(i.value.TargetTypeInfo=t,n)switch(t){case"_popup":i.value.Title=this.dashboardDesigner.element.find("#"+this.categoryId+"_link_panel_title_txt").val();break;case"_newwindow":i.value.Height=this.dashboardDesigner.element.find("#"+this.categoryId+"_window_size_numeric").data("ejNumericTextbox").getValue();i.value.Width=this.dashboardDesigner.element.find("#"+this.categoryId+"_window_size_numeric1").data("ejNumericTextbox").getValue()}else this.dashboardDesigner.element.find("#"+this.categoryId+"_link_windowSize").css("display","none"),this.dashboardDesigner.element.find("#"+this.categoryId+"_link_panel_title").css("display","none");this.dashboardDesigner.modules.propertyPanel.updatePropertyChange(this.linkItem.category+"Link",this.linkItem.value,i.value,this.linkItem,this.linkItem.categoryName);this.linkItem.value=i.value;this.refreshWidget(this.dashboardDesigner)},t.enablePivotLinkConfig=function(n,t){n?(t.element.find("#"+this.categoryId+"_link_selectField_txt").data("BoldBIDashboardDropDownList").enable(),t.element.find("#"+this.categoryId+"_link_selectField").removeAttr("disabled").css("opacity","1"),t.element.find("#"+this.categoryId+"_link_selectField_1").removeAttr("disabled"),t.element.find("#"+this.categoryId+"_link_url").removeAttr("disabled").css("opacity","1"),t.element.find("#"+this.categoryId+"_link_url_txt").removeAttr("disabled"),t.element.find("#"+this.categoryId+"_link_appendColumn").removeAttr("disabled").css("opacity","1"),t.element.find("#"+this.categoryId+"_link_appendColumn_list").BoldBIDashboardListBox("instance")._refreshScroller(),t.element.find("#"+this.categoryId+"_link_appendColumn_list").data("BoldBIDashboardListBox").enable(),t.element.find("#"+this.categoryId+"_link_urlPreview").removeAttr("disabled").css("opacity","1"),t.element.find("#"+this.categoryId+"_link_urlPreview_txt").removeAttr("disabled"),t.element.find("#"+this.categoryId+"_link_show_popup_div").removeAttr("disabled").css("opacity","1")):(t.element.find("#"+this.categoryId+"_link_selectField").attr("disabled","true").css("opacity",".3"),t.element.find("#"+this.categoryId+"_link_selectField_txt").data("BoldBIDashboardDropDownList").disable(),t.element.find("#"+this.categoryId+"_link_url_txt").val(""),t.element.find("#"+this.categoryId+"_link_url").attr("disabled","true").css("opacity",".3"),t.element.find("#"+this.categoryId+"_link_url_txt").attr("disabled","true"),t.element.find("#"+this.categoryId+"_link_appendColumn_list").data("BoldBIDashboardListBox").disable(),t.element.find("#"+this.categoryId+"_link_appendColumn").attr("disabled","true").css("opacity",".3"),t.element.find("#"+this.categoryId+"_link_urlPreview_txt").text(""),t.element.find("#"+this.categoryId+"_link_urlPreview_txt").attr("href",""),t.element.find("#"+this.categoryId+"_link_urlPreview").attr("disabled","true").css("opacity",".3"),t.element.find("#"+this.categoryId+"_link_urlPreview_txt").attr("disabled","true"));this.updateDropDownListDisabling(n)},t.updateDropDownListDisabling=function(n){n?this.dashboardDesigner.element.find("#"+this.categoryId+"_link_selectField_1").css("pointer-events","all").css("opacity","1"):(this.dashboardDesigner.element.find("#"+this.categoryId+"_link_selectField_1").css("pointer-events","none").css("opacity","0.3"),this.dashboardDesigner.element.find("#"+this.categoryId+"_link_selectField_txt_1").data("BoldBIDashboardDropDownList").model.selectedIndex=0)},t.changedPivotLink=function(t,i){if(i.isInteraction){var r=n.isNullOrUndefined(this.linkItem)?this.populateLinkModel(JSON.parse(JSON.stringify(this.linkItem))):JSON.parse(JSON.stringify(this.linkItem));r.value.EnableLink=i.isChecked;i.isChecked||(r.value.ColumnUrlDetails=[],r.value.PassingParameters=[]);t.modules.propertyPanel.updatePropertyChange(this.linkItem.category+"Link",this.linkItem.value,r,this.linkItem,this.linkItem.categoryName);this.linkItem.value=r.value;this.enablePivotLinkConfig(i.isChecked,t);this.populatePivotList(t);this.refreshWidget(t)}},t.populatePivotList=function(t){var u,f,i,r,e;for(this.columnData=t.modules.util.getSourceData(this.getDataGroupInfo(t),!1,!0,!0),u=[],f=0,i=0;i<this.linkItem.value.ColumnUrlDetails.length;i++)for(r=0;r<this.columnData.length;r++)if(this.linkItem.value.ColumnUrlDetails[i].UniqueColumnName===this.columnData[r].Id&&this.linkItem.value.ColumnUrlDetails[i].CaptionName===this.columnData[r].FieldName){u.push(this.linkItem.value.ColumnUrlDetails[i]);f=r;break}this.linkItem.value.ColumnUrlDetails=u;e=t.element.find("#"+this.categoryId+"_link_selectField_txt").data("BoldBIDashboardDropDownList");n.isNullOrUndefined(e)||(t.element.find("#"+this.categoryId+"_link_selectField_txt").data("BoldBIDashboardDropDownList").option("dataSource",t.modules.util.getSourceData(this.getDataGroupInfo(t),!1,!0)),t.element.find("#"+this.categoryId+"_link_selectField_txt").data("BoldBIDashboardDropDownList").option("selectedIndex",f))},t.getDataGroupInfo=function(t){var i=t.designerPanel.selectedReportItems[0],r=n.Dashboard.WidgetHelper.getWidgetInstance(i);return r.DataGroupInfo},t.changePivotColumn=function(t,i){var o=i.model.dataSource[i.itemId].ValueInfoId,f=[],e,r,u,s;this.selectedItem=i.model.dataSource[i.itemId];this.changePivotUrlDetails(t);switch(o){case UrlLinkType[UrlLinkType.Value]:f=this.columnData.filter(function(n){return n.ValueInfoId!==o});f.push(this.selectedItem);break;case UrlLinkType[UrlLinkType.Column]:case UrlLinkType[UrlLinkType.Row]:for(e=this.columnData.filter(function(n){return n.ValueInfoId===o}),r=0;r<e.length;r++)if(f.push(e[r]),this.selectedItem===e[r])break}u=t.element.find("#"+this.categoryId+"_link_appendColumn_list");s=u.data("BoldBIDashboardListBox");n.isNullOrUndefined(s)||(s.option("dataSource",f),u.find("li").unbind(n.isTouchDevice()?"doubletap":"dblclick",BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.changePivotURL,this,t)),u.find("li").bind(n.isTouchDevice()?"doubletap":"dblclick",BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.changePivotURL,this,t)),u.BoldBIDashboardListBox("instance")._refreshScroller())},t.changePivotUrlDetails=function(n){var r=this,u=JSON.parse(JSON.stringify(this.linkItem)),i=u.value.ColumnUrlDetails.filter(function(n){return n.UniqueColumnName===r.selectedItem.Id}),t="";i.length!==0&&(t=i[0].UrlLink);n.element.find("#"+this.categoryId+"_link_url_txt").val(t);this.updateURLText(t,n)},t.changePivotURL=function(t){var u;if(!n.isNullOrUndefined(this.selectedFormat)&&this.selectedFormat.length>0){var i=t.element.find("#"+this.categoryId+"_link_url_txt"),r=void 0,f=i.val();n.isNullOrUndefined(this.selectedFormat)||(u=this.selectedFormat.replace("{{:","").replace("}}",""),this.linkItem.value.PassingParameters.indexOf(u)===-1&&this.linkItem.value.PassingParameters.push(u));i[0].selectionStart===0&&(r=i.val().length,i[0].setSelectionRange(r,r));i.val(f.substring(0,i[0].selectionStart)+this.selectedFormat+f.substring(i[0].selectionStart));this.updateURLText(i.val(),t);this.updatePivotUrl(t);this.selectedFormat=""}},t.urlpivotPreviewClick=function(n,t){t.preventDefault();var i=n.element.find("#"+this.categoryId+"_link_urlPreview_txt").attr("href");window.open(i,"_blank")},t.urlPivotFocusOut=function(n){this.updateURLText(n.element.find("#"+this.categoryId+"_link_url_txt").val(),n);this.updatePivotUrl(n)},t.updatePivotUrl=function(t){for(var f,e,s=this,r=t.element.find("#"+this.categoryId+"_link_url_txt").val().trim(),i=JSON.parse(JSON.stringify(this.linkItem.value)),o=!1,u=0;u<this.columnData.length;u++)if(this.columnData[u].Id===this.selectedItem.Id){for(f=0;f<this.linkItem.value.ColumnUrlDetails.length;f++)if(i.ColumnUrlDetails[f].UniqueColumnName===this.selectedItem.Id){i.ColumnUrlDetails[f].UrlLink=r;i.ColumnUrlDetails[f].UrlType=this.selectedItem.ValueInfoId;o=!0;break}o&&(n.isNullOrUndefined(r)||r==="")?i.ColumnUrlDetails=i.ColumnUrlDetails.filter(function(n){return n.UniqueColumnName!==s.selectedItem.Id}):o||n.isNullOrUndefined(r)||r===""||(e=this.createGridColumnUrlDetails(),e.CaptionName=this.columnData[u].FieldName,e.UniqueColumnName=this.columnData[u].Id,e.UrlLink=r,e.UrlType=this.columnData[u].ValueInfoId,i.ColumnUrlDetails.push(e));break}t.modules.propertyPanel.updatePropertyChange(this.linkItem.category+"Link",this.linkItem.value,i,this.linkItem,this.linkItem.categoryName);this.linkItem.value=i},t.urlKeyUp=function(n){this.updateURLText(n.element.find("#"+this.categoryId+"_link_columnURL_txt").val(),n)},t.populateLinkModel=function(n){return n.value=this.createDashboardLinks(),n},t.updateURLText=function(t,i){if(n.DashboardUtil.IsStringNullorWhiteSpace(t))i.element.find("#"+this.categoryId+"_link_urlPreview_txt").text(""),i.element.find("#"+this.categoryId+"_link_urlPreview_txt").attr("href","");else{var r=i.modules.util.addhttp(t);i.element.find("#"+this.categoryId+"_link_urlPreview_txt").attr("href",r);i.element.find("#"+this.categoryId+"_link_urlPreview_txt").text(t)}},t.selectURL=function(t,i){t.element.find("#"+this.categoryId+"_link_appendColumn_list").BoldBIDashboardListBox("instance")._refreshScroller();!n.isNullOrUndefined(i)&&i.value.length>0&&(this.selectedFormat="{{:"+i.value+"}}")},t.enableLink=function(n,t){n?(t.element.find("#"+this.categoryId+"_link_text_ckb").removeAttr("disabled").css("opacity","1"),t.element.find("#"+this.categoryId+"_link_ckb").data("BoldBIDashboardCheckBox").enable()):(t.element.find("#"+this.categoryId+"_link_ckb").data("BoldBIDashboardCheckBox").disable(),t.element.find("#"+this.categoryId+"_link_text_ckb").attr("disabled","true").css("opacity",".3"))},t.refreshWidget=function(n){var t=n.modules.widgetHelper.getCurrentWidgetInstance();t.refresh()},t.createDashboardLinks=function(){return{ColumnUrlDetails:[],GridUrlType:UrlLinkType[UrlLinkType.Row],LinkType:LinkType[LinkType.Url],EnableLink:!1,PassingParameters:[],UrlPath:""}},t.createGridColumnUrlDetails=function(){return{CaptionName:"",UniqueColumnName:"",UrlLink:""}},t.selectedFormat="",t.categoryId="",t.locale=null,t}();t.PivotViewHelper=i})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalRangeSliderReportItem=function(n){function t(t){var i=n.call(this,t,"RangeSlider","e-rangeslider-item")||this;return i.startDate="",i.endDate="",i.summaryType="",i.rangeSliderObj=null,i.rangeSliderItem=null,i.rangeSliderElement=null,i.leftLabel=null,i.leftLabelText=null,i.rightLabel=null,i.rightLabelText=null,i.locale=null,i.bbdesigner$=t.bbdesigner$,i.designerId=i.designerInstance._id,i.locale=t.getLocalizationContent(),i.propertyPanel=t.modules.propertyPanel,i.widgetJson=new RangeSliderProperties(t),i.widgetJson.FilterSettings.ActAsMasterWidget=!0,i.isVisualWidget=!1,i}return __extends(t,n),t.prototype.getWidgetImage=function(){return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="0 0 324 208" version="1.1">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Range-Slidder-thumbnail" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="Group-2" transform="translate(12.000000, 73.500000)">            <rect id="Rectangle" fill="var(--widget-notconfigured-image-background1)" x="0" y="13.5" width="300" height="34" rx="17"/>            <path d="M57.4310345,22.7413793 L102.913793,22.7413793 C107.198761,22.7413793 110.672414,26.2150321 110.672414,30.5 C110.672414,34.7849679 107.198761,38.2586207 102.913793,38.2586207 L57.4310345,38.2586207 C53.1460666,38.2586207 49.6724138,34.7849679 49.6724138,30.5 C49.6724138,26.2150321 53.1460666,22.7413793 57.4310345,22.7413793 Z" id="Rectangle-Copy" fill="var(--widget-notconfigured-image-background2)" transform="translate(80.172414, 30.500000) rotate(-270.000000) translate(-80.172414, -30.500000) "/>        <\/g>    <\/g><\/svg>'},t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.filters,GroupId:"1093107b-a5c1-4bd3-83cb-ec6ccd40a031",Items:[{id:"dc5f330d-944e-4deb-806a-cb67a629b06c",widgetName:"RangeSlider",widgetDisplayName:n.itemPanel.widgetTitle.rangeSlider,cssClass:"bbi-widgeticon bbi-designer-widget-rangeslider",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.RangeSliderItem",searchCategory:["rangeslider","filters"],description:n.itemPanel.widgetDescription.rangeSliderDesc,dataRequirement:n.itemPanel.widgetDataRequirements.filtersDataReq,widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.rangeSlider,description:n.itemPanel.widgetDescription.rangeSliderDesc,dataRequirement:n.itemPanel.widgetDataRequirements.filtersDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.RangeSliderProperties",minRowSpan:3}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){this.setContainerDefaultProperties();this.renderRangeSliderContainer(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.rangeSliderElement)||this.updateRangeSliderSize()},t.prototype.update=function(n){this.updateTitleSubtitleTheme();this.updateRangeSliderItemData(n);this.IsRendered=!0;this.updateThemeInWidget()},t.prototype.applyWidgetTheme=function(){this.updateTitleSubtitleTheme();this.updateThemeInWidget();this.updateRangeSliderSize()},t.prototype.updateThemeInWidget=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)?this.updateDefaultPaletteTheme():BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this)},t.prototype.updateTitleSubtitleTheme=function(){var n=this.designerInstance.modules.themeHelper.getRangeSliderHeaderTitle(),t=this.designerInstance.modules.themeHelper.getRangeSliderHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getRangeSliderProperties().ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej1.rangeslider.all.min.js",NameSpace:"BoldBIDashboard.Slider"},DependentScripts:[]}},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,"BoldBIDashboard.Slider")},t.prototype.canCombineRequest=function(){return!0},t.prototype.getFieldContainer=function(){var t=new BoldBIDashboard.Dashboard.FieldContainerForUI;return t.Name="Column",t.DisplayName=this.locale.fieldContainer.column,t.ContainerType=FieldContainerType.None,t.CategoryCount=1,t.Required=!0,[t,n.prototype.getFilterColumn.call(this)]},t.prototype.onFieldSettingsClick=function(n,t){for(var i,r=0;r<t.length;r++)i=t[r].Name,(i==="Sort"||i===DateTimeFormat.Default||i===DateTimeFormat.Date||i===DateTimeFormat.Year||i===DateTimeFormat.Month||i===DateTimeFormat.Day||i===DateTimeFormat.Quarter||i==="More"||i==="DimensionFilters"||i==="RelativeDateFilter"||i===SummaryType.NONE||i===SummaryType.SUM||i===SummaryType.COUNT||i===SummaryType.AVG||i===SummaryType.MAX||i===SummaryType.MIN||i===SummaryType.COUNTD||i===SummaryType.VAR||i==="MeasureFilter"||i===SummaryType.MEDIAN)&&(t[r].IsVisible=!1),(n.DateTimeFormat!==SummaryType.NONE&&i===DateTimeFormat.Year||i===DateTimeFormat.Date||n.DateTimeFormat===SummaryType.NONE&&i==="MeasureFormat")&&(t[r].IsVisible=!0);return BoldBIDashboard.DashboardUtil.hideRenameMenuOption(t)},t.prototype.getPropertyPanelItems=function(){return this.getRangeSliderPropertyPanel()},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateRangeSliderItemPropertyChange(n,t,i,r)},t.prototype.updateInitialSelection=function(){},t.prototype.clearFilter=function(n){this.removeSelection();BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName)},t.prototype.getMobileViewHeight=function(){return this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.refresh=function(){},t.prototype.dispose=function(){this.disposeRangeSliderItem();n.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.locale.itemPanel.widgetDataRequiredMessage.rangeSliderDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.onFieldDragDrop=function(){return!0},t.prototype.isFieldValid=function(n,t,i){return!(t===FieldContainerType[FieldContainerType.Non_Numeric]&&i==="Column"&&n)},t.prototype.getDefaultSummaryType=function(n,t,i){var r;return t===FieldContainerType.None&&n===FieldType.Measures?r=i?SummaryType.CUSTOM:SummaryType.NONE:n===FieldType.Measures&&i&&(r=SummaryType.CUSTOM),r},t.prototype.getFieldView=function(){var t=[BoldBIDashboard.Dashboard.SupportedDataType.DateTime];return n.prototype.getFieldView.call(this,[],t)},t.prototype.supportedColumnsForFiltering=function(){var r=[],f=this.designerInstance.modules.filterConfiguration,i,n,t,u;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length>0)for(i=this.DataGroupInfo.FieldContainers,n=0;n<i.length;n++)for(t=0;t<i[n].FieldInfos.length;t++)u=i[n].FieldInfos,f.isDuplicate(r,u[t].DataField)||r.push(u[t]);return r},t.prototype.getMinMobileHeight=function(){return"90px"},t.prototype.getRangeSliderPropertyPanel=function(){var n=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.widgetJson.FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo,this.widgetJson.ContainerSettings);return this.containerPropertyItem=n.containerProperties,n.propertyGridItems.Header=this.widgetJson.ContainerSettings.Title,n.propertyGridItems.SubTitle=this.widgetJson.ContainerSettings.SubTitle,n.propertyGridItems.Description=this.widgetJson.ContainerSettings.Description,n.propertyGridItems.Type=this.Type,this.bbdesigner$.each(n.containerActionsProperty.Items,function(n,t){(t.name==="ShowMaximize"||t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ImageExport"||t.name==="PDFExport"||t.name==="ViewData"||t.name==="PinWidget")&&(t.isVisible=!1)}),this.bbdesigner$.each(n.containerSettingsProperty.Items,function(n,t){(t.name==="ShowWidgetBackgroundImage"||t.name==="WidgetBackgroundImageMode"||t.name==="WidgetBackgroundImageSource"||t.name==="WidgetBackgroundImageBrowse"||t.name==="WidgetBackgroundImageURL")&&(t.isVisible=!1)}),n.propertyGridItems.Items=[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"RangeSelection",displayName:this.locale.propertyPanel.basicSettings.rangeSelection,value:this.getRangeSliderProperties().Type===RangeSliderType.Range,itemType:"bool"},{name:"Orientation",displayName:this.locale.propertyPanel.basicSettings.orientation,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(RangeSliderOrientation,this.getRangeSliderProperties().Orientation),itemType:"dropdown",valueList:["Auto","Horizontal","Vertical"]},{name:"LabelColor",displayName:this.locale.propertyPanel.basicSettings.labelColor,value:this.getRangeSliderProperties().LabelColor.Color,itemType:"color",isVisible:!0},{name:"SliderColor",displayName:this.locale.propertyPanel.basicSettings.sliderColor,value:this.getRangeSliderProperties().SliderColor.Color,itemType:"color",isVisible:!0}]},n.filterSettingsProperty,n.containerSettingsProperty,n.containerActionsProperty,n.noDataContainerActionsProperty],n.propertyGridItems},t.prototype.renderRangeSliderContainer=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));this.rangeSliderItem=BoldBIDashboard.buildTag("div.e-rangeslideritem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"90%",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder},{id:this.designerId+"rangeslideritem"+this.widgetJson.UniqueName});this.contentContainer.append(this.rangeSliderItem);try{this.rangeSliderElement=BoldBIDashboard.buildTag("div","",{margin:"0px",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designerId+"rangesliderelement"+this.widgetJson.UniqueName});this.ControlContainer.data("widgetInstance",this);this.rangeSliderItem.append(this.rangeSliderElement)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.RangeSlider)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.updateRangeSliderItemPropertyChange=function(n,t,i,r){var o=!1,u,f,s,e;switch(n){case"Name":this.widgetJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,i);break;case"RangeSelection":this.updateRangeSelection(i);break;case"Orientation":this.updateOrientation(i);break;case"LabelColor":this.updateLabelColor(i);break;case"SliderColor":this.updateSliderColor(i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,i);break;default:o=!0}if(!o){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(u=this.designPanelInstance.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)s=u[f],s.attr("id")===this.rangeSliderItem.attr("id")&&(e=this.bbdesigner$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"RangeSlider",i));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-rangeslider",this.designerId+"_"+this.widgetJson.UniqueName,[n,i,t,r],[n,t,i,r])}},t.prototype.updateRangeSliderSize=function(){this.contentContainer.find(".bbi-dbrd-control-error").length===1?(this.contentContainer.find(".bbi-dbrd-control-error").remove(),this.widgetContainerHelper.showControlError(this,this.dataValues)):this.updateSliderOrientation()},t.prototype.updateRangeSelection=function(t){var i,r,u;this.getRangeSliderProperties().Type=t?RangeSliderType.Range:RangeSliderType.MinRange;i=n.prototype.getDefaultMeasureFormat.call(this);this.isNecessaryDataConfigured()&&(i=this.DataGroupInfo.FieldContainers[0].FieldInfos[0].MeasureFormatting);BoldBIDashboard.isNullOrUndefined(this.rangeSliderObj)||(this.rangeSliderObj.option("sliderType",BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(RangeSliderType,this.getRangeSliderProperties().Type)),this.startDate===""&&this.endDate===""&&this.summaryType!=="year"?(r=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(i.Prefix),this.DataGroupInfo.DataSourceName),u=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(i.Suffix),this.DataGroupInfo.DataSourceName),this.rangeSliderObj.model.sliderType===BoldBIDashboard.SliderType.Range?(this.clearFilter(),this.rangeSliderElement.append(this.leftLabel),this.leftLabel.append(this.leftLabelText),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.leftLabelText.html(BoldBIDashboard.DashboardUtil.formattedText(this.rangeSliderObj.model.values[0],i.Culture,i.DecimalPoints,i.FormatType,i.DecimalSeparator,i.GroupSeparator,r,u,i.Unit,!0,this.designerInstance,i.EnableLakhsAndCroreRep)),this.rightLabelText.html(BoldBIDashboard.DashboardUtil.formattedText(this.rangeSliderObj.model.values[1],i.Culture,i.DecimalPoints,i.FormatType,i.DecimalSeparator,i.GroupSeparator,r,u,i.Unit,!0,this.designerInstance,i.EnableLakhsAndCroreRep))):(this.clearFilter(),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.rightLabelText.html(BoldBIDashboard.DashboardUtil.formattedText(this.rangeSliderObj.model.value,i.Culture,i.DecimalPoints,i.FormatType,i.DecimalSeparator,i.GroupSeparator,r,u,i.Unit,!0,this.designerInstance,i.EnableLakhsAndCroreRep)))):this.summaryType==="year"?this.rangeSliderObj.model.sliderType===BoldBIDashboard.SliderType.Range?(this.clearFilter(),this.rangeSliderElement.append(this.leftLabel),this.leftLabel.append(this.leftLabelText),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.leftLabelText.html(this.rangeSliderObj.model.values[0]),this.rightLabelText.html(this.rangeSliderObj.model.values[1])):(this.clearFilter(),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.rightLabelText.html(this.rangeSliderObj.model.value)):this.rangeSliderObj.model.sliderType===BoldBIDashboard.SliderType.Range?(this.clearFilter(),this.rangeSliderElement.append(this.leftLabel),this.leftLabel.append(this.leftLabelText),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.leftLabelText.html(this.startDate),this.rightLabelText.html(this.endDate)):(this.clearFilter(),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.rightLabelText.html(this.endDate)),this.labelAlignment(),this.updateDefaultPaletteTheme())},t.prototype.updateLabelColor=function(n){var t,u;if(this.getRangeSliderProperties().LabelColor.Color=n,this.getRangeSliderProperties().LabelColor.IsEdited=!0,BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)){var r=this.getRangeSliderProperties().LabelColor.Color,i=this.rangeSliderElement.find(".leftLabelText").attr("style"),f="color:"+r+"!important; ";i=this.designerInstance.modules.themeHelper.getStyleString(i,f);this.rangeSliderElement.find(".leftLabelText").attr("style",i);t=this.rangeSliderElement.find(".rightLabelText").attr("style");u="color:"+r+"!important; ";t=this.designerInstance.modules.themeHelper.getStyleString(t,u);this.rangeSliderElement.find(".rightLabelText").attr("style",t)}},t.prototype.updateSliderColor=function(n){var i,r,t;if(this.getRangeSliderProperties().SliderColor.Color=n,this.getRangeSliderProperties().SliderColor.IsEdited=!0,this.rangeSliderElement&&this.rangeSliderElement.length>0)for(i=this.rangeSliderElement.find(".e-range"),i.length>0&&(i[0].style.backgroundColor=this.getRangeSliderProperties().SliderColor.Color),r=this.rangeSliderElement.find(".e-handle"),t=0;t<r.length;t++)r[t].style.borderColor=this.getRangeSliderProperties().SliderColor.Color},t.prototype.getSliderOrientation=function(){var n;return n=this.controlContainer.height()>this.controlContainer.width()?RangeSliderOrientation.Vertical:RangeSliderOrientation.Horizontal,this.getRangeSliderProperties().Orientation===RangeSliderOrientation.Auto?n:this.getRangeSliderProperties().Orientation},t.prototype.updateRangeSliderOrientation=function(){var t=n.prototype.getDefaultMeasureFormat.call(this),r,i;this.isNecessaryDataConfigured()&&(t=this.DataGroupInfo.FieldContainers[0].FieldInfos[0].MeasureFormatting);BoldBIDashboard.isNullOrUndefined(this.rangeSliderObj)||(r=this.getSliderOrientation(),i=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(RangeSliderOrientation,r),this.rangeSliderObj.model.orientation.toLowerCase()!==i.toLowerCase()&&this.rangeSliderObj.option("orientation",i),this.isNecessaryDataConfigured()&&this.startDate!==""&&this.endDate!==""?(this.rangeSliderObj.model.sliderType===BoldBIDashboard.SliderType.Range?(this.rangeSliderElement.append(this.leftLabel),this.leftLabel.append(this.leftLabelText),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText)):(this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText)),this.updateRangeSliderForDateFormat()):this.summaryType!=="year"?this.rangeSliderObj.model.sliderType===BoldBIDashboard.SliderType.Range?(this.rangeSliderElement.append(this.leftLabel),this.leftLabel.append(this.leftLabelText),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.leftLabelText.html(BoldBIDashboard.DashboardUtil.formattedText(this.rangeSliderObj.model.values[0],t.Culture,t.DecimalPoints,t.FormatType,t.DecimalSeparator,t.GroupSeparator,t.Prefix,t.Suffix,t.Unit,!0,this.designerInstance,t.EnableLakhsAndCroreRep)),this.rightLabelText.html(BoldBIDashboard.DashboardUtil.formattedText(this.rangeSliderObj.model.values[1],t.Culture,t.DecimalPoints,t.FormatType,t.DecimalSeparator,t.GroupSeparator,t.Prefix,t.Suffix,t.Unit,!0,this.designerInstance,t.EnableLakhsAndCroreRep))):(this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.rightLabelText.html(BoldBIDashboard.DashboardUtil.formattedText(this.rangeSliderObj.model.value,t.Culture,t.DecimalPoints,t.FormatType,t.DecimalSeparator,t.GroupSeparator,t.Prefix,t.Suffix,t.Unit,!0,this.designerInstance,t.EnableLakhsAndCroreRep))):this.rangeSliderObj.model.sliderType===BoldBIDashboard.SliderType.Range?(this.rangeSliderElement.append(this.leftLabel),this.leftLabel.append(this.leftLabelText),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.leftLabelText.html(this.rangeSliderObj.model.values[0]),this.rightLabelText.html(this.rangeSliderObj.model.values[1])):(this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.rightLabelText.html(this.rangeSliderObj.model.value)),this.leftLabel.removeAttr("style"),this.rightLabel.removeAttr("style"))},t.prototype.updateSliderOrientation=function(){this.updateRangeSliderOrientation();this.updateControlContainerPadding();this.updateDefaultPaletteTheme();this.setHeightWidth();this.sliderResize()},t.prototype.updateOrientation=function(n){this.getRangeSliderProperties().Orientation=n===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(RangeSliderOrientation,RangeSliderOrientation.Auto)?RangeSliderOrientation.Auto:n===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(RangeSliderOrientation,RangeSliderOrientation.Vertical)?RangeSliderOrientation.Vertical:RangeSliderOrientation.Horizontal;this.updateSliderOrientation()},t.prototype.onSliderChange=function(n){this.updateValues(n.model);this.updateSliderData(n)},t.prototype.updateSliderData=function(n){var t,o,f,h,l;if(this.widgetJson.FilterSettings.ActAsMasterWidget&&this.isNecessaryDataConfigured()&&!BoldBIDashboard.isNullOrUndefined(n)&&n.isInteraction){var e=[],i=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],a=i.FieldActualType==="bbi-designer-dataset-number",s=i.FieldActualType==="bbi-designer-dataset-datetime"||i.FieldActualType==="bbi-designer-dataset-time",r=a?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.IsBetween):s?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Range):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.Equals),u=[],c=!1;if(!BoldBIDashboard.isNullOrUndefined(this.rangeSliderObj)){if(t=RangeSliderType.Range===this.getRangeSliderProperties().Type?n.value:[n.value],this.startEndrangeCheck(this.rangeSliderObj,s,t))return;if(s){if(o=[],i.DateTimeFormat===DateTimeFormat.Date){for(f=0;f<t.length;f++)t[f]=BoldBIDashboard.format(BoldBIDashboard.parseDate(t[f],"M/d/yyyy"),this.designerInstance.model.localeSettings.dateFormat);h=this.updateFilterList(t,n,BoldBIDashboard.format(n.model.minDate,this.designerInstance.model.localeSettings.dateFormat));o=h;u=this.masterFilterWindowInstance.getDateFilterList(h,!1);c=!0}else u=this.updateFilterList(t,n,n.model.minValue),o=u;r=u.length>0?r:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Range);e={DateFormat:i.DateTimeFormat,DisplayFilterList:o,DateFilterList:u}}else e=this.updateFilterList(t,n,n.model.minValue),r=e.length>0?r:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.Equals)}if(l={FilterInfo:e,Action:r,IsStdDateTime:c,IsMultiSelection:!1,IsRange:!0},this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;this.widgetJson.SelectedFilterValues=[this.masterFilterWindowInstance.updateInitialFiltersForFilterControls(i,this.widgetJson.UniqueName,i.FieldActualType,l)];BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this);this.designerInstance.modules.serialization.notifyChange();this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName)}},t.prototype.isApplicableDateTypeWidgetForAPIFiltering=function(){return!0},t.prototype.processFilterInformation=function(n){var e=[],h=n.filters,c=h.length>0?h[0].values:[],o,f,s,v;if(c.length===2){var t=this.DataGroupInfo.FieldContainers[0].FieldInfos[0],y=t.FieldActualType==="bbi-designer-dataset-number",l=t.FieldActualType==="bbi-designer-dataset-datetime"||t.FieldActualType==="bbi-designer-dataset-time",r=y?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.IsBetween):l?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Range):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.Equals),u=[],a=!1,i=c;if(l){if(o=[],t.DateTimeFormat===DateTimeFormat.Date){for(f=0;f<i.length;f++)i[f]=BoldBIDashboard.format(BoldBIDashboard.parseDate(i[f],this.designerInstance.model.localeSettings.dateFormat),this.designerInstance.model.localeSettings.dateFormat);s=i;o=s;u=this.masterFilterWindowInstance.getDateFilterList(s,!1);a=!0}else u=i,o=u;r=u.length>0?r:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Range);e={DateFormat:t.DateTimeFormat,DisplayFilterList:o,DateFilterList:u}}else e=i,r=e.length>0?r:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.Equals);return v={FilterInfo:e,Action:r,IsStdDateTime:a,IsMultiSelection:!1,IsRange:!0},this.widgetJson.SelectedFilterValues=[],this.widgetJson.SelectedFilterValues=[this.masterFilterWindowInstance.updateInitialFiltersForFilterControls(t,this.widgetJson.UniqueName,t.FieldActualType,v)],!0}return console.error('Please enter valid filter value for "'+this.widgetJson.ContainerSettings.Title+'" to apply filter'),!1},t.prototype.updateFilterList=function(n,t,i){var r=[];return t.model.sliderType.toLocaleLowerCase()===RangeSliderType[RangeSliderType.Range].toLocaleLowerCase()?r=n:(r.push(i),r.push(n[0])),r},t.prototype.startEndrangeCheck=function(n,t,i){var f=t?BoldBIDashboard.format(n.model.minDate,this.designerInstance.model.localeSettings.dateFormat):n.model.minValue,r=t?BoldBIDashboard.format(n.model.maxDate,this.designerInstance.model.localeSettings.dateFormat):n.model.maxValue,u=RangeSliderType.Range===this.getRangeSliderProperties().Type;return u&&f===i[0]&&r===i[1]||!u&&r===i[0]?(this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this),this.clearFilter(!1),!0):!1},t.prototype.updateOrRemovedIntialSelection=function(n,t){var r,u,s,h,c,l;if(this.widgetJson.FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(this.rangeSliderObj)&&this.widgetJson.SelectedFilterValues.length>0){var f=!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[0])?this.DataGroupInfo.FieldContainers[0].FieldInfos[0]:null,a=!BoldBIDashboard.isNullOrUndefined(f)&&f.FieldActualType==="bbi-designer-dataset-number",e=!BoldBIDashboard.isNullOrUndefined(f)&&(f.FieldActualType==="bbi-designer-dataset-datetime"||f.FieldActualType==="bbi-designer-dataset-time"),i=e?this.widgetJson.SelectedFilterValues[0].InitialDateFilter.DateFilterList:a?this.widgetJson.SelectedFilterValues[0].InitialMeasureFilter.Values:[],o=RangeSliderType.Range===this.getRangeSliderProperties().Type&&i.length===1?i[0]:i[1],v=this.rangeSliderObj.model.slide,y=this.rangeSliderObj.model.change;this.rangeSliderObj.model.slide=null;this.rangeSliderObj.model.change=null;e?(r=this.masterFilterWindowInstance.getDateFilterList([n,t],!1),u=this.designerInstance.model.localeSettings.dateFormat,(!BoldBIDashboard.isNullOrUndefined(r[0])&&BoldBIDashboard.parseDate(i[0],u)<BoldBIDashboard.parseDate(r[0],u)||!BoldBIDashboard.isNullOrUndefined(r[1])&&BoldBIDashboard.parseDate(i[1],u)>BoldBIDashboard.parseDate(r[1],u))&&(i=r),this.widgetJson.SelectedFilterValues[0].IsStdDateTime?RangeSliderType.Range===this.getRangeSliderProperties().Type?(s=BoldBIDashboard.parseDate(i[0],this.designerInstance.model.localeSettings.dateFormat),h=BoldBIDashboard.parseDate(i[1],this.designerInstance.model.localeSettings.dateFormat),this.rangeSliderObj.option("dateValue",[s,h])):(c=BoldBIDashboard.parseDate(i.length===1?i[0]:i[1],u),l=BoldBIDashboard.format(c,"M/d/yyyy"),this.rangeSliderObj.option("dateValue",new Date(l.replace("-"," ","g")))):RangeSliderType.Range===this.getRangeSliderProperties().Type?this.rangeSliderObj.option("values",[parseInt(i[0],10),parseInt(i[1],10)]):this.rangeSliderObj.option("value",parseInt(o,10))):(i.length>0&&(typeof i[0]=="string"||typeof i[1]=="string")&&(i[0]=Number(i[0]),i[1]=Number(i[1])),(i[0]<n||i[1]>t)&&(i=[n,t]),RangeSliderType.Range===this.getRangeSliderProperties().Type?this.rangeSliderObj.option("values",i):this.rangeSliderObj.option("value",o));this.rangeSliderObj.model.slide=v;this.rangeSliderObj.model.change=y;BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this)}else this.removeInitialSelection()},t.prototype.removeInitialSelection=function(){if(!BoldBIDashboard.isNullOrUndefined(this.rangeSliderObj)){var n=this.rangeSliderObj.model.slide,t=this.rangeSliderObj.model.change;this.rangeSliderObj.model.slide=null;this.rangeSliderObj.model.change=null;this.getRangeSliderProperties().Type===RangeSliderType.Range?this.summaryType===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.Date).toLocaleLowerCase()?this.rangeSliderObj.option("dateValue",[this.rangeSliderObj.model.minDate,this.rangeSliderObj.model.maxDate]):this.rangeSliderObj.option("values",[this.rangeSliderObj.model.minValue,this.rangeSliderObj.model.maxValue]):this.summaryType===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(BoldBIDashboard.DateAndTimeFormat,BoldBIDashboard.DateAndTimeFormat.Date).toLocaleLowerCase()?this.rangeSliderObj.option("dateValue",this.rangeSliderObj.model.maxDate):this.rangeSliderObj.option("value",this.rangeSliderObj.model.maxValue);this.updateValues(this.rangeSliderObj.model);this.rangeSliderObj.model.slide=n;this.rangeSliderObj.model.change=t}},t.prototype.removeSelection=function(){this.removeInitialSelection();BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this);this.widgetJson.SelectedFilterValues=[];this.designerInstance.modules.serialization.notifyChange()},t.prototype.updateValues=function(t){var f=2,e=BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.localeSettings)?"dd/MM/yyyy":this.designerInstance.model.localeSettings.dateFormat,o="",i=n.prototype.getDefaultMeasureFormat.call(this),r,u;this.isNecessaryDataConfigured()&&(i=this.DataGroupInfo.FieldContainers[0].FieldInfos[0].MeasureFormatting,o=this.DataGroupInfo.FieldContainers[0].FieldInfos[0].FieldType.toString());this.startDate!==""&&this.endDate!==""?t.sliderType==="range"&&t.values.length===f?(this.leftLabelText.html(BoldBIDashboard.globalize.format(new Date(t.values[0]),e).split(",")[0]),this.rightLabelText.html(BoldBIDashboard.globalize.format(new Date(t.values[1]),e).split(",")[0])):t.sliderType==="range"||BoldBIDashboard.isNullOrUndefined(t.value)||this.rightLabelText.html(BoldBIDashboard.globalize.format(new Date(t.value),e).split(",")[0]):t!==null&&this.summaryType.toLocaleLowerCase()!=="year"&&this.summaryType.toLocaleLowerCase()!=="date"&&o.toLocaleLowerCase()!=="dimensions"?(r=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(i.Prefix),this.DataGroupInfo.DataSourceName),u=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(i.Suffix),this.DataGroupInfo.DataSourceName),t.sliderType==="range"&&t.values.length===f?(this.leftLabelText.html(BoldBIDashboard.DashboardUtil.formattedText(t.values[0],i.Culture,i.DecimalPoints,i.FormatType,i.DecimalSeparator,i.GroupSeparator,r,u,i.Unit,!0,this.designerInstance,i.EnableLakhsAndCroreRep)),this.rightLabelText.html(BoldBIDashboard.DashboardUtil.formattedText(t.values[1],i.Culture,i.DecimalPoints,i.FormatType,i.DecimalSeparator,i.GroupSeparator,r,u,i.Unit,!0,this.designerInstance,i.EnableLakhsAndCroreRep))):t.sliderType==="range"||BoldBIDashboard.isNullOrUndefined(t.value)||this.rightLabelText.html(BoldBIDashboard.DashboardUtil.formattedText(t.value,i.Culture,i.DecimalPoints,i.FormatType,i.DecimalSeparator,i.GroupSeparator,r,u,i.Unit,!0,this.designerInstance,i.EnableLakhsAndCroreRep))):t.sliderType==="range"&&t.values.length===f?(this.leftLabelText.html(t.values[0]),this.rightLabelText.html(t.values[1])):t.sliderType==="range"||BoldBIDashboard.isNullOrUndefined(t.value)||this.rightLabelText.html(t.value)},t.prototype.setHeightWidth=function(){if(this.rangeSliderObj){var n=this.sliderHeightWidth(this.getSliderOrientation());this.rangeSliderObj.option("width",n.width);this.rangeSliderObj.option("height",n.height)}this.labelAlignment()},t.prototype.sliderHeightWidth=function(n){var t=n===RangeSliderOrientation.Vertical,i=t?"5px":this.rangeSliderItem.width().toString(),r=t?this.rangeSliderItem.height()-12+"px":"5px";return{width:i,height:r}},t.prototype.sliderResize=function(){var t;if(!BoldBIDashboard.isNullOrUndefined(this.rightLabel)&&!BoldBIDashboard.isNullOrUndefined(this.leftLabel))if(this.getSliderOrientation()===RangeSliderOrientation.Horizontal)if(this.cellInfo.RowSpan>2){var i=this.widgetJson.ContainerSettings.ShowHeader?this.controlContainer.find(".bbi-dbrd-control-header").height():0,n=(this.controlContainer.innerHeight()-(i+11+30))/2;n=n<0?0:n;n<=0&&this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design?(this.rightLabel.css({display:"none"}),this.leftLabel.css({display:"none"})):(this.rightLabel.css({display:"block"}),this.leftLabel.css({display:"block"}));this.contentContainer.innerHeight()<this.rangeSliderElement.height()?this.rangeSliderElement.css("visibility","hidden"):this.rangeSliderElement.css("visibility","visible");this.rangeSliderItem.css("padding","8px 0px 0px 0px");this.contentContainer.css({padding:"0px",overflow:"visible"});this.controlContainer.find(".bbi-dbrd-control-container-wrapper").css("padding-top",n+"px")}else this.rangeSliderItem.css("padding","0px"),this.contentContainer.css({padding:"0px",overflow:"hidden"}),this.controlContainer.find(".bbi-dbrd-control-container-wrapper").css("padding-top","0px"),this.rightLabel.css({display:"none"}),this.leftLabel.css({display:"none"});else this.cellInfo.RowSpan>2?(t=this.contentContainer.innerWidth()/2-this.rangeSliderElement.width()/2,this.rangeSliderElement.css("height","100%"),this.rangeSliderItem.css("padding-bottom","15px"),this.rangeSliderItem.css("padding-left",t+"px"),this.rangeSliderItem.height()<100?this.rangeSliderItem.css({top:"10px"}):this.rangeSliderItem.css({top:"5%"}),this.contentContainer.css({overflow:"visible"})):(this.rangeSliderItem.css("padding","0px"),this.contentContainer.css({padding:"0px",overflow:"hidden"}),this.controlContainer.find(".bbi-dbrd-control-container-wrapper").css("padding-top","0px"),this.rightLabel.css({display:"none"}),this.leftLabel.css({display:"none"}))},t.prototype.updateControlContainerPadding=function(){if(BoldBIDashboard.isNullOrUndefined(this.getContainerSettings().WidgetPaddingInfo)&&(this.getContainerSettings().WidgetPaddingInfo=new WidgetPaddingInfo,this.getContainerSettings().WidgetPaddingInfo.AutoPadding=!0,this.getContainerSettings().WidgetPaddingInfo.Padding=this.getControlContainerPaddingValue()),!BoldBIDashboard.isNullOrUndefined(this.controlContainer)&&this.controlContainer.length>0){var n=this.controlContainer.find(".bbi-dbrd-control-container-wrapper");n[0].style.padding=this.getSliderOrientation()===RangeSliderOrientation.Horizontal?"0px 16px":"8px 20px"}},t.prototype.updateRangeSliderItemData=function(t){var a,h,u,f,e;if(!this.bbdesigner$.isEmptyObject(t)){this.dataValues=t;BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this);this.startDate="";this.endDate="";BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this);var c=null,o=null,v=null,l=null,r=null,s=this.sliderHeightWidth(this.getSliderOrientation()),i=n.prototype.getDefaultMeasureFormat.call(this);this.isNecessaryDataConfigured()&&(i=this.DataGroupInfo.FieldContainers[0].FieldInfos[0].MeasureFormatting);this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo);BoldBIDashboard.isNullOrUndefined(this.rangeSliderObj)||(this.rangeSliderObj=null);this.rangeSliderItem.remove();this.rangeSliderItem=BoldBIDashboard.buildTag("div.e-rangeslideritem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"90%",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"100",padding:"15px",top:"4px"},{id:this.designerId+"rangeslideritem"+this.widgetJson.UniqueName});this.rangeSliderElement=BoldBIDashboard.buildTag("div","",{margin:"0px",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designerId+"rangesliderelement"+this.widgetJson.UniqueName});this.leftLabel=BoldBIDashboard.buildTag("div.leftLabel","",{id:this.designerId+"leftlabel"+this.widgetJson.UniqueName});this.leftLabelText=BoldBIDashboard.buildTag("span.leftLabelText","",{id:this.designerId+"leftlabeltext"+this.widgetJson.UniqueName});this.rightLabel=BoldBIDashboard.buildTag("div.rightLabel","",{id:this.designerId+"rightlabel"+this.widgetJson.UniqueName});this.rightLabelText=BoldBIDashboard.buildTag("span.rightLabelText","",{id:this.designerId+"rightlabeltext"+this.widgetJson.UniqueName});this.controlContainer.data("widgetInstance",this);this.rangeSliderItem.append(this.rangeSliderElement);this.rangeSliderElement.append(this.leftLabel);this.leftLabel.append(this.leftLabelText);this.rangeSliderElement.append(this.rightLabel);this.rightLabel.append(this.rightLabelText);this.controlContainer.append(this.rangeSliderItem);this.contentContainer.append(this.rangeSliderItem);this.sliderResize();t.Error?(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.widgetContainerHelper.showControlError(this,this.dataValues)):!BoldBIDashboard.isNullOrUndefined(t)&&BoldBIDashboard.isNullOrUndefined(t.isDataSetEmpty)&&Object.keys(t.widgetData).length>0&&t.widgetData.data!=="{}"?(a=t.widgetData.data,BoldBIDashboard.isNullOrUndefined(a)||(r=JSON.parse(a),r.noDataAvailable==="false"?(this.rangeSliderItem.show(),this.summaryType=r.summaryType.toLowerCase(),h={},r.summaryType.toLowerCase()==="date"?r.minRange===""||r.maxRange===""?(this.rangeSliderItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this)):(u=this.designerInstance.model.localeSettings,this.startDate=r.minRange=BoldBIDashboard.format(BoldBIDashboard.parseDate(r.minRange,u.dateFormat+" "+u.timeFormat),u.dateFormat),this.endDate=r.maxRange=BoldBIDashboard.format(BoldBIDashboard.parseDate(r.maxRange,u.dateFormat+" "+u.timeFormat),u.dateFormat),v=BoldBIDashboard.parseDate(r.minRange,u.dateFormat),l=BoldBIDashboard.parseDate(r.maxRange,u.dateFormat),h={minDate:v,maxDate:l,sliderType:this.getRangeSliderProperties().Type===RangeSliderType.Range?BoldBIDashboard.SliderType.Range:BoldBIDashboard.SliderType.MinRange,orientation:this.getSliderOrientation()===RangeSliderOrientation.Vertical?BoldBIDashboard.Orientation.Vertical:BoldBIDashboard.Orientation.Horizontal,enableAnimation:!0,showTooltip:!0,width:s.width,height:s.height,value:l,create:this.bbdesigner$.proxy(this.updateDefaultPaletteTheme,this),slide:this.bbdesigner$.proxy(this.onSliderChange,this),change:this.bbdesigner$.proxy(this.onSliderChange,this)}):BoldBIDashboard.isNullOrUndefined(r.maxRange)||r.minRange.length===0||BoldBIDashboard.isNullOrUndefined(r.minRange)||r.maxRange.length===0?(this.rangeSliderItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this)):(c=parseFloat(r.minRange),o=parseFloat(r.maxRange),h={minValue:c,maxValue:o,sliderType:this.getRangeSliderProperties().Type===RangeSliderType.Range?BoldBIDashboard.SliderType.Range:BoldBIDashboard.SliderType.MinRange,orientation:this.getSliderOrientation()===RangeSliderOrientation.Vertical?BoldBIDashboard.Orientation.Vertical:BoldBIDashboard.Orientation.Horizontal,enableAnimation:!0,showTooltip:!0,width:s.width,height:s.height,value:o,create:this.bbdesigner$.proxy(this.updateDefaultPaletteTheme,this),slide:this.bbdesigner$.proxy(this.onSliderChange,this),change:this.bbdesigner$.proxy(this.onSliderChange,this)}),BoldBIDashboard.isNullOrUndefined(this.rangeSliderObj)&&(this.rangeSliderElement.BoldBIDashboardSlider(h).appendTo(this.rangeSliderElement[0]),this.rangeSliderObj=this.rangeSliderElement.data("BoldBIDashboardSlider"),r.summaryType.toLowerCase()==="date"?this.updateOrRemovedIntialSelection(this.startDate,this.endDate):this.updateOrRemovedIntialSelection(c,o))):(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this))),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this)):(BoldBIDashboard.isNullOrUndefined(t.widgetData.data)&&t.columnBindings==="{}"||!BoldBIDashboard.isNullOrUndefined(t.isDataSetEmpty)&&t.isDataSetEmpty)&&(this.rangeSliderItem.hide(),this.removeSelection(),BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this));f=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(i.Prefix),this.DataGroupInfo.DataSourceName);e=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(i.Suffix),this.DataGroupInfo.DataSourceName);BoldBIDashboard.isNullOrUndefined(this.rangeSliderObj)?BoldBIDashboard.isNullOrUndefined(t.isDataSetEmpty)&&Object.keys(t.widgetData).length>0&&t.widgetData.data!=="{}"&&r.summaryType.toLowerCase()!=="year"?this.getRangeSliderProperties().Type===RangeSliderType.Range?(this.leftLabelText.html(BoldBIDashboard.DashboardUtil.formattedText(this.rangeSliderObj.model.values[0],i.Culture,i.DecimalPoints,i.FormatType,i.DecimalSeparator,i.GroupSeparator,f,e,i.Unit,!0,this.designerInstance,i.EnableLakhsAndCroreRep)),this.rightLabelText.html(BoldBIDashboard.DashboardUtil.formattedText(this.rangeSliderObj.model.values[1],i.Culture,i.DecimalPoints,i.FormatType,i.DecimalSeparator,i.GroupSeparator,f,e,i.Unit,!0,this.designerInstance,i.EnableLakhsAndCroreRep))):this.rightLabelText.html(BoldBIDashboard.DashboardUtil.formattedText(this.rangeSliderObj.model.value,i.Culture,i.DecimalPoints,i.FormatType,i.DecimalSeparator,i.GroupSeparator,f,e,i.Unit,!0,this.designerInstance,i.EnableLakhsAndCroreRep)):this.getRangeSliderProperties().Type===RangeSliderType.Range?(this.leftLabelText.html(this.rangeSliderObj.model.values[0]),this.rightLabelText.html(this.rangeSliderObj.model.values[1])):this.rightLabelText.html(this.rangeSliderObj.model.value):BoldBIDashboard.isNullOrUndefined(t.isDataSetEmpty)&&Object.keys(t.widgetData).length>0&&t.widgetData.data!=="{}"&&r.summaryType.toLowerCase()==="date"?this.updateRangeSliderForDateFormat():BoldBIDashboard.isNullOrUndefined(t.isDataSetEmpty)&&Object.keys(t.widgetData).length>0&&t.widgetData.data!=="{}"&&r.summaryType.toLowerCase()!=="year"?this.getRangeSliderProperties().Type===RangeSliderType.Range?(this.leftLabelText.html(BoldBIDashboard.DashboardUtil.formattedText(this.rangeSliderObj.model.values[0],i.Culture,i.DecimalPoints,i.FormatType,i.DecimalSeparator,i.GroupSeparator,f,e,i.Unit,!0,this.designerInstance,i.EnableLakhsAndCroreRep)),this.rightLabelText.html(BoldBIDashboard.DashboardUtil.formattedText(this.rangeSliderObj.model.values[1],i.Culture,i.DecimalPoints,i.FormatType,i.DecimalSeparator,i.GroupSeparator,f,e,i.Unit,!0,this.designerInstance,i.EnableLakhsAndCroreRep))):this.rightLabelText.html(BoldBIDashboard.DashboardUtil.formattedText(this.rangeSliderObj.model.value,i.Culture,i.DecimalPoints,i.FormatType,i.DecimalSeparator,i.GroupSeparator,f,e,i.Unit,!0,this.designerInstance,i.EnableLakhsAndCroreRep)):this.getRangeSliderProperties().Type===RangeSliderType.Range?(this.leftLabelText.html(this.rangeSliderObj.model.values[0]),this.rightLabelText.html(this.rangeSliderObj.model.values[1])):this.rightLabelText.html(this.rangeSliderObj.model.value);this.labelAlignment();this.setHeightWidth();this.sliderResize()}},t.prototype.updateRangeSliderForDateFormat=function(){var t=BoldBIDashboard.isNullOrUndefined(this.widgetJson.SelectedFilterValues[0])?null:this.widgetJson.SelectedFilterValues[0].InitialDateFilter.DateFilterList,n=this.designerInstance.model.localeSettings.dateFormat,i,r;if(this.getRangeSliderProperties().Type===RangeSliderType.Range)if(BoldBIDashboard.isNullOrUndefined(t))this.leftLabelText.html(this.startDate),this.rightLabelText.html(this.endDate);else{var u=BoldBIDashboard.parseDate(t[0],n),i=BoldBIDashboard.parseDate(t[1],n),f=BoldBIDashboard.format(u,n),r=BoldBIDashboard.format(i,n);this.leftLabelText.html(f);this.rightLabelText.html(r)}else BoldBIDashboard.isNullOrUndefined(t)?this.rightLabelText.html(this.endDate):(i=BoldBIDashboard.parseDate(t[1],n),r=BoldBIDashboard.format(i,n),this.rightLabelText.html(r))},t.prototype.updateDefaultPaletteTheme=function(){var r;if(this.rangeSliderElement&&this.rangeSliderElement.length>0){var u=this.getRangeSliderProperties().LabelColor.IsEdited?this.getRangeSliderProperties().LabelColor.Color:this.designerInstance.modules.themeHelper.getRangeSliderLabelFontColor(),f="transparent",e=this.getRangeSliderProperties().SliderColor.IsEdited?this.getRangeSliderProperties().SliderColor.Color:this.designerInstance.modules.themeHelper.getRangeSliderHandleBorderColor(),o=this.designerInstance.modules.themeHelper.getRangeSliderHandleBackground(),s=this.designerInstance.modules.themeHelper.getRangeSliderBackground(),h=this.getRangeSliderProperties().SliderColor.IsEdited?this.getRangeSliderProperties().SliderColor.Color:this.designerInstance.modules.themeHelper.getRangeSliderRangeColor(),i=this.designerInstance.modules.themeHelper.getRangeSliderFontText(),n="",t="";for(r=0;r<this.bbdesigner$(this.rangeSliderElement.find(".e-handle.e-select")).length;r++)n=this.bbdesigner$(this.rangeSliderElement.find(".e-handle.e-select")[r]).attr("style"),t="background-color:"+o+"!important; border-color:"+e+"!important; ",n=this.designerInstance.modules.themeHelper.getStyleString(n,t),this.bbdesigner$(this.rangeSliderElement.find(".e-handle.e-select")[r]).attr("style",n);n=this.rangeSliderElement.find(".e-range").attr("style");t="background-color:"+h+"!important;";n=this.designerInstance.modules.themeHelper.getStyleString(n,t);this.rangeSliderElement.find(".e-range").attr("style",n);n=this.rangeSliderElement.find(".leftLabelText").attr("style");t="background-color:"+f+"!important; color:"+u+"!important; font-size:"+i.size+" !important; font-family:"+i.family+" !important; font-weight:"+i.weight+";";n=this.designerInstance.modules.themeHelper.getStyleString(n,t);this.rangeSliderElement.find(".leftLabelText").attr("style",n);n=this.rangeSliderElement.find(".rightLabelText").attr("style");t="background-color:"+f+"!important; color:"+u+"!important; font-size:"+i.size+" !important; font-family:"+i.family+"!important; font-weight:"+i.weight+";";n=this.designerInstance.modules.themeHelper.getStyleString(n,t);this.rangeSliderElement.find(".rightLabelText").attr("style",n);n=this.rangeSliderElement.attr("style");t="background-color:"+s+"!important;";n=this.designerInstance.modules.themeHelper.getStyleString(n,t);this.rangeSliderElement.attr("style",n)}},t.prototype.labelAlignment=function(){if(!BoldBIDashboard.isNullOrUndefined(this.rangeSliderObj)){if(this.rangeSliderObj.model.orientation===BoldBIDashboard.Orientation.Horizontal)this.leftLabel.css({width:"50%",position:"absolute","margin-left":"-5px","margin-top":"15px","font-size":"12px","font-weight":"normal"}),this.rightLabel.css({width:"50%",position:"absolute",right:"-10px","text-align":"right","margin-top":"15px","font-size":"12px","font-weight":"normal"});else{var n=this.contentContainer.innerWidth()/2-this.rangeSliderElement.width()/2-2;this.leftLabel.css({width:this.contentContainer.width(),bottom:"-25px",position:"absolute","font-size":"12px","font-weight":"normal","text-align":"center",display:"block",left:"-"+n+"px"});this.rightLabel.css({width:this.contentContainer.width(),top:"-23px",position:"absolute","font-size":"12px","font-weight":"normal","text-align":"center",display:"block",left:"-"+n+"px"})}this.leftLabel.width()>this.leftLabelText.width()?this.leftLabel.css({display:"block"}):this.leftLabel.css({display:"none"});this.rightLabel.width()>this.rightLabelText.width()?this.rightLabel.css({display:"block"}):this.rightLabel.css({display:"none"})}},t.prototype.getRangeSliderProperties=function(){return this.widgetJson},t.prototype.setContainerDefaultProperties=function(){var t=n.prototype.getContainerSettings.call(this);t.EnableImageExport=t.EnablePdfExport=t.EnableExcelExport=t.EnableCsvExport=!1;t.ShowMaximize=!1;t.PinWidget=!1;t.ViewData=!1},t.prototype.disposeRangeSliderItem=function(){BoldBIDashboard.isNullOrUndefined(this.rangeSliderObj)||this.rangeSliderObj.destroy();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.RangeSlider)},t.prototype.updateSubTitleForContainer=function(){if(this.getContainerSettings().ShowHeader&&!BoldBIDashboard.isNullOrUndefined(this.getContainerSettings().SubTitle)&&this.getContainerSettings().SubTitle!==""){var n=this.controlContainer.find(".bbi-dbrd-control-header").height();this.cellInfo.RowSpan<=3?(this.controlContainer.find(".bbi-dbrd-control-sub-header").css("display","none"),n=this.controlContainer.find(".bbi-dbrd-control-header").outerHeight()):(this.controlContainer.find(".bbi-dbrd-control-sub-header").css("display","block"),n=n+this.controlContainer.find(".bbi-dbrd-control-sub-header").outerHeight());this.contentContainer.css("height","calc(100% - "+n+"px)");this.IsRendered&&this.updateSize(this.cellInfo)}},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.RangeSliderItem",InternalRangeSliderReportItem,window);BoldBIDashboard.DashboardDesignerUtility.RangeSliderItem.prototype.initialize();InternalEditColumnNames=function(){function n(n){this.columnNameInfo=null;this.editColumnNamesDialog=null;this.individualContainer=null;this.individualScrollElement=null;this.targetInstance=null;this.targetMethod=null;this.footerTag=null;this.settingsContainer=null;this.lastModifiedTextInfo=null;this.id=n._id;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.renderEditColumnNamesWindow();this.wireEvents()}return n.prototype.renderEditColumnNamesWindow=function(){var n=this.editColumnNamesDialog=BoldBIDashboard.buildTag("div.bbi-userselect","",{},{id:this.id+"_editColumnNames_settings"}),i=this.settingsContainer=BoldBIDashboard.buildTag("div","",{}),r=BoldBIDashboard.buildTag("div","",{display:"block"},{id:this.id+"_editColumnNames_settings_edit"}),u=BoldBIDashboard.buildTag("div","",{height:"283px",width:"418px"},{}),e,o;r.append(u);var t=this.individualContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{height:"282px",display:"block"},{id:this.id+"_editColumnNames_settings_individual_container"}),f=BoldBIDashboard.buildTag("div","",{}),s=this.individualScrollElement=BoldBIDashboard.buildTag("div","",{height:"272px","padding-top":"5px","padding-bottom":"5px"},{id:this.id+"_editColumnNames_settings_individual_elements"});f.append(s);t.append(f);u.append(t);e=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.dashboardDesigner.getLocalizationContent().dialogOptions.cancelButtonText,{float:"right"},{id:this.id+"_editColumnNames_settings_cancel",type:"button"});o=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.dashboardDesigner.getLocalizationContent().dialogOptions.okButtonText,{float:"right"},{id:this.id+"_editColumnNames_settings_ok",type:"button"});i.append(r);n.append(i);this.dashboardDesigner.element.append(n);n.BoldBIDashboardDialog({title:this.dashboardDesigner.getLocalizationContent().editColumnNames.editTableColumnNames,width:"auto",height:"auto",minWidth:420,minHeight:320,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner",close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),closeIconTooltip:this.dashboardDesigner.getLocalizationContent().dialogOptions.closeButtonText});this.footerTag=this.dashboardDesigner.element.find("#"+this.id+"_editColumnNames_settings_foot");this.footerTag.append(e,o);t.BoldBIDashboardScroller({height:"282px",scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,enableTouchScroll:!0,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize})},n.prototype.renderColumns=function(n){for(var t=0;t<this.columnNameInfo.length;t++)this.renderRowElement(n,this.columnNameInfo[t],t)},n.prototype.scrollerRefresh=function(n){n.data("BoldBIDashboardScroller")&&n.data("BoldBIDashboardScroller").refresh()},n.prototype.renderRowElement=function(n,t,i){var u=BoldBIDashboard.buildTag("div","",{"margin-top":"10px",display:"inline-block",width:"388px",padding:"0px 10px"},{id:this.id+"_EditcolumnNames"+i}),e=BoldBIDashboard.buildTag("div","",{width:"194px",float:"left","margin-left":"3px","margin-top":"8.5px"}),o=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"}),f,r;o.text(t.CaptionName);e.append(o);u.append(e);f=BoldBIDashboard.buildTag("div","",{display:"inline-block","margin-top":"3px",border:"0px solid","border-color":"red","margin-left":"5px"},{id:this.id+"_EditcolumnNamesValue"+i+"_parent"});r=BoldBIDashboard.buildTag("input.e-textbox","",{width:"170px",height:"25px"},{id:this.id+"_EditcolumnNamesValue"+i,type:"text"});r.val(t.DisplayName);f.append(r);r.off("blur",this.bbdesigner$.proxy(this.textFocusOut,this,i));r.off("keyup",this.bbdesigner$.proxy(this.textKeyUp,this,i));r.on("blur",this.bbdesigner$.proxy(this.textFocusOut,this,i));r.on("keyup",this.bbdesigner$.proxy(this.textKeyUp,this,i));u.append(f);n.append(u)},n.prototype.textFocusOut=function(n){var t=this.settingsContainer.find("#"+this.id+"_EditcolumnNamesValue"+n).val();this.lastModifiedTextInfo=null;this.onValueChange(n,t)},n.prototype.onValueChange=function(n,t){this.columnNameInfo[n].DisplayName!==t&&t.length>0&&(this.columnNameInfo[n].IsEdited=!0);t.length>0?this.columnNameInfo[n].DisplayName=t:(this.columnNameInfo[n].DisplayName=this.columnNameInfo[n].DisplayName,this.settingsContainer.find("#"+this.id+"_EditcolumnNamesValue"+n).val(this.columnNameInfo[n].CaptionName))},n.prototype.textKeyUp=function(n,t){var i=this.settingsContainer.find("#"+this.id+"_EditcolumnNamesValue"+n).val();if(t.keyCode===13)this.onValueChange(n,i);else this.lastModifiedTextInfo={rowIndex:n,value:i}},n.prototype.populateColumnName=function(){this.renderColumns(this.individualScrollElement);this.scrollerRefresh(this.individualContainer)},n.prototype.updateColumnInfo=function(){if(!BoldBIDashboard.isNullOrUndefined(this.targetInstance)){if(!BoldBIDashboard.isNullOrUndefined(this.lastModifiedTextInfo)){this.onValueChange(this.lastModifiedTextInfo.rowIndex,this.lastModifiedTextInfo.value);this.lastModifiedTextInfo=null}BoldBIDashboard.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.columnNameInfo]);this.editColumnNamesDialog.data("BoldBIDashboardDialog").close()}},n.prototype.closeEditColumnNamesSettings=function(){this.editColumnNamesDialog.data("BoldBIDashboardDialog").close()},n.prototype.openColumnNameSettings=function(n,t,i){this.editColumnNamesDialog.data("BoldBIDashboardDialog").open();this.resetLengendSettings();this.targetInstance=n;this.targetMethod=t;this.columnNameInfo=JSON.parse(JSON.stringify(i));this.populateColumnName(this.columnNameInfo)},n.prototype.resetLengendSettings=function(){this.targetInstance=null;this.targetMethod=null;this.columnNameInfo=null;this.individualScrollElement.empty()},n.prototype.wireEvents=function(){this.dashboardDesigner.element.on("click","#"+this.id+"_editColumnNames_settings_cancel",this.bbdesigner$.proxy(this.closeEditColumnNamesSettings,this));this.dashboardDesigner.element.on("click","#"+this.id+"_editColumnNames_settings_ok",this.bbdesigner$.proxy(this.updateColumnInfo,this))},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.EditColumnNames",InternalEditColumnNames,window);__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalRangeNavigatorReportItem=function(n){function t(t){var i=n.call(this,t,"RangeNavigator","e-rangenavigator-item")||this;return i.rangeNavigatorObj=null,i.rangeNavigatorElement=null,i.defaultColorPalette=[],i.isSelectionUpdate=!1,i.locale=null,i.bbdesigner$=i.designerInstance.bbdesigner$,i.designerId=i.designerInstance._id,i.propertyPanel=t.modules.propertyPanel,i.widgetJson=new RangeNavigatorProperties(t),i.widgetJson.FilterSettings.ActAsMasterWidget=!0,i.defaultColorPalette=BoldBIDashboard.DashboardUtil.defaultColorPalette,i.dateFormat=i.designerInstance.model.localeSettings.dateFormat,i.isVisualWidget=!1,i.locale=t.getLocalizationContent(),i}return __extends(t,n),t.prototype.getWidgetImage=function(){return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="0 0 324 208" version="1.1">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Range-Navigator" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="Group-2" transform="translate(12.000000, 73.500000)">            <rect id="Rectangle" fill="var(--widget-notconfigured-image-background1)" opacity="0.500897507" x="0" y="13.5" width="300" height="34" rx="17"/>            <path d="M208.189621,12 L208.189621,48 L82.7586207,48 L82.7586207,12 L208.189621,12 Z" id="Combined-Shape" fill="var(--widget-notconfigured-image-background1)"/>            <g id="Group" transform="translate(64.655172, 24.000000)" fill="var(--widget-notconfigured-image-background2)">                <rect id="Rectangle-Copy-3" transform="translate(15.517241, 5.738046) rotate(-180.000000) translate(-15.517241, -5.738046) " x="0" y="0.1995842" width="31.0344828" height="11.0769231" rx="5.53846154"/>            <\/g>            <path d="M57.4310345,22.7413793 L102.913793,22.7413793 C107.198761,22.7413793 110.672414,26.2150321 110.672414,30.5 C110.672414,34.7849679 107.198761,38.2586207 102.913793,38.2586207 L57.4310345,38.2586207 C53.1460666,38.2586207 49.6724138,34.7849679 49.6724138,30.5 C49.6724138,26.2150321 53.1460666,22.7413793 57.4310345,22.7413793 Z" id="Rectangle-Copy" fill="var(--widget-notconfigured-image-background2)" transform="translate(80.172414, 30.500000) rotate(-270.000000) translate(-80.172414, -30.500000) "/>            <g id="Group" transform="translate(193.965517, 24.000000)" fill="var(--widget-notconfigured-image-background2)">                <rect id="Rectangle-Copy-3" transform="translate(15.517241, 5.738046) rotate(-180.000000) translate(-15.517241, -5.738046) " x="0" y="0.1995842" width="31.0344828" height="11.0769231" rx="5.53846154"/>            <\/g>            <path d="M186.741379,22.7413793 L232.224138,22.7413793 C236.509106,22.7413793 239.982759,26.2150321 239.982759,30.5 C239.982759,34.7849679 236.509106,38.2586207 232.224138,38.2586207 L186.741379,38.2586207 C182.456411,38.2586207 178.982759,34.7849679 178.982759,30.5 C178.982759,26.2150321 182.456411,22.7413793 186.741379,22.7413793 Z" id="Rectangle-Copy" fill="var(--widget-notconfigured-image-background2)" transform="translate(209.482759, 30.500000) rotate(-270.000000) translate(-209.482759, -30.500000) "/>        <\/g>    <\/g><\/svg>'},t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.filters,GroupId:"1093107b-a5c1-4bd3-83cb-ec6ccd40a031",Items:[{id:"d8181c92-a06c-4b94-a740-93eef4dfa598",widgetName:"RangeNavigator",widgetDisplayName:n.itemPanel.widgetTitle.rangeNavigator,cssClass:"bbi-widgeticon bbi-designer-widget-rangenavigator",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.RangeNavigatorItem",searchCategory:["rangenavigator","filters"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.rangeNavigator,description:n.itemPanel.widgetDescription.rangeNavigatorDesc,dataRequirement:n.itemPanel.widgetDataRequirements.rangeNavigatorDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.RangeNavigatorProperties",minRowSpan:4}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){this.setContainerDefaultProperties();this.renderRangeNavigatorContainer(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.rangeNavigatorElement)||this.updateRangeNavigatorSize()},t.prototype.update=function(n){this.IsRendered=!1;this.updateTitleSubtitleTheme();this.updateRangeNavigatorItemData(n)},t.prototype.applyWidgetTheme=function(n){var t,r,i;if(this.updateTitleSubtitleTheme(),BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)){if(this.isSelectionUpdate=!0,this.rangeNavigatorObj.theme=n?"MaterialDark":"Material",this.rangeNavigatorObj.refresh(),this.applyWidgetBackgroundTheme(),t=this.themeHelper.getRangeNavigatorFontText(),this.rangeNavigatorObj.labelStyle.color=this.getRangeNavigatorrProperties().LabelColor.IsEdited?this.getRangeNavigatorrProperties().LabelColor.Color:this.themeHelper.getAxisLabelFontColor(),this.rangeNavigatorObj.labelStyle.size=t.size,this.rangeNavigatorObj.labelStyle.fontFamily=t.family,this.rangeNavigatorObj.labelStyle.fontWeight=t.weight,this.rangeNavigatorObj.tooltip.textStyle.color=this.themeHelper.getTooltipTextColor(),this.rangeNavigatorObj.tooltip.textStyle.fontFamily=t.family,this.rangeNavigatorObj.tooltip.textStyle.fontWeight=t.weight,this.rangeNavigatorObj.tooltip.fill=this.themeHelper.getTooltipBackground(),this.isSelectionUpdate=!1,this.themeHelper.currentTheme.dataColorPalette.length>0&&!this.getRangeNavigatorrProperties().DefaultColors.some(function(n){return n.IsEdited}))for(r=this.themeHelper.getColorPalette(),i=0;i<this.rangeNavigatorObj.series.length;i++)this.rangeNavigatorObj.series[i].fill=this.getSeriesThemeColor(i,r)}else BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this);this.updateRangeNavigatorSize()},t.prototype.updateTitleSubtitleTheme=function(){var n=this.themeHelper.getRangeNavigatorHeaderTitle(),t=this.themeHelper.getRangeNavigatorHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getRangeNavigatorrProperties().ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej2.chart.all.min.js",NameSpace:"ejdashboard.charts.RangeNavigator"},DependentScripts:[]}},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,"ejdashboard.charts.RangeNavigator")},t.prototype.getPropertyPanelItems=function(){return this.getPropertyGridItems()},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateRangeNavigatorItemPropertyChange(n,t,i,r)},t.prototype.getFieldContainer=function(){var i=new BoldBIDashboard.Dashboard.FieldContainerForUI,t;return i.Name="YValue",i.DisplayName=this.designerInstance.getLocalizationContent().fieldContainer.values,i.ContainerType=FieldContainerType.Numeric,i.Required=!0,i.QueryOrder=0,t=new BoldBIDashboard.Dashboard.FieldContainerForUI,t.Name="Argument",t.DisplayName=this.designerInstance.getLocalizationContent().fieldContainer.argument,t.ContainerType=FieldContainerType.None,t.Required=!0,t.QueryOrder=1,t.CategoryCount=1,t.ShowDescriptionIcon=!0,t.TooltipText=this.locale.fieldContainer.rangeNavigatorToolTextMessage,[i,t,n.prototype.getFilterColumn.call(this)]},t.prototype.getFieldView=function(){var t=[BoldBIDashboard.Dashboard.SupportedDataType.Number,BoldBIDashboard.Dashboard.SupportedDataType.DateTime];return n.prototype.getFieldView.call(this,[],t)},t.prototype.getDefaultSummaryType=function(n,t,i){var r;return t===FieldContainerType.None&&n===FieldType.Measures?r=i?SummaryType.CUSTOM:SummaryType.NONE:n===FieldType.Measures&&i&&(r=SummaryType.CUSTOM),r},t.prototype.showSettingsIcon=function(n){return n.ContainerName==="Argument"&&n.DateTimeFormat===DateTimeFormat.None?!1:!0},t.prototype.getMobileViewHeight=function(){return this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.onFieldSettingsClick=function(n,t){for(var i,f,u,r=0;r<t.length;r++)if(i=t[r].Name,i===SummaryType.NONE||i===SummaryType.SUM||i===SummaryType.COUNT||i===SummaryType.AVG||i===SummaryType.MAX||i===SummaryType.MIN||i===SummaryType.COUNTD||i===SummaryType.VAR||i===DateTimeFormat.Year||i===DateTimeFormat.Date||i==="More"||i==="RelativeDateFilter"){if(t[r].IsVisible=!0,(i===SummaryType.COUNTD||i===SummaryType.VAR)&&(t[r].EnableSeparator=!1),i==="More")for(f=0;f<t[r].Items.length;f++)u=t[r].Items[f].Name,t[r].Items[f].IsVisible=u===BoldBIDashboard.DateAndTimeFormat.QuarterYear||u===BoldBIDashboard.DateAndTimeFormat.MonthYear||u===BoldBIDashboard.DateAndTimeFormat.WeekYear||u===BoldBIDashboard.DateAndTimeFormat.DayMonthYear||u===BoldBIDashboard.DateAndTimeFormat.MonthDayYear?!0:!1}else t[r].IsVisible=!1;return BoldBIDashboard.DashboardUtil.hideRenameMenuOption(t)},t.prototype.clearFilter=function(n){this.removeSelection();BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName)},t.prototype.dispose=function(){this.disposeRangeNavigatorItem();n.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.designerInstance.getLocalizationContent().itemPanel.widgetDataRequiredMessage.rangeNavigatorDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.getMinMobileHeight=function(){return"125px"},t.prototype.renderRangeNavigatorContainer=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));this.rangeNavigatorItem=BoldBIDashboard.buildTag("div.e-rangenavigatoritem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder},{id:this.designerId+"rangenavigatoritem"+this.widgetJson.UniqueName});this.rangeNavigatorElement=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designerId+"rangenavigatorelement"+this.widgetJson.UniqueName});this.contentContainer.append(this.rangeNavigatorItem);this.controlContainer.data("widgetInstance",this);this.rangeNavigatorItem.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designerId+"_designer_waiting_popup bbi-designer-loader",template:this.designerInstance.getWaitingPopupTemplate()});this.rangeNavigatorItem.append(this.rangeNavigatorElement);!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.RangeNaviator)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.actionComplete=function(){this.IsRendered=!0;BoldBIDashboard.isNullOrUndefined(this.rangeNavigatorElement)||BoldBIDashboard.isNullOrUndefined(this.designerInstance)||(this.applyWidgetBackgroundTheme(),this.changeCursorTypeonAxisLabel())},t.prototype.restrictControlResize=function(n){n.cancelResizedEvent=!0},t.prototype.changeCursorTypeonAxisLabel=function(){var t=this.rangeNavigatorElement.find("#"+this.rangeNavigatorElement.attr("id")+"_AxisLabels").length>0?this.rangeNavigatorElement.find("#"+this.rangeNavigatorElement.attr("id")+"_AxisLabels").children():null,n;if(!BoldBIDashboard.isNullOrUndefined(t))for(n=0;n<t.length;n++)this.bbdesigner$(t[n]).children().css("cursor","pointer")},t.prototype.applyWidgetBackgroundTheme=function(){var n="#"+this.designerId+"rangenavigatorelement"+this.widgetJson.UniqueName+"_ChartBorder";this.rangeNavigatorElement.find(n).attr("fill","transparent")},t.prototype.onRangeChange=function(n){this.processFilterInfo(n)},t.prototype.processFilterInfo=function(n){var s;if(this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getArgumentContainer().FieldInfos.length){if(this.startEndrangeCheck(this.rangeNavigatorObj,n)||this.isSelectionUpdate)return;var t=this.getArgumentContainer().FieldInfos[0],h=t.FieldActualType==="bbi-designer-dataset-number",f=t.FieldActualType==="bbi-designer-dataset-datetime"||t.FieldActualType==="bbi-designer-dataset-time",i=h?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.IsBetween):f?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Range):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.Equals),r=[],u=[],e=!1,o=[];if(f?(e=!0,u.push(BoldBIDashboard.format(new Date(n.start),this.dateFormat)),u.push(BoldBIDashboard.format(new Date(n.end),this.dateFormat)),o=u,i=u.length>0?i:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Range),r={DateFormat:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.Date),DisplayFilterList:o,DateFilterList:u}):(r.push(n.start),r.push(n.end),i=r.length>0?i:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.Equals)),s={FilterInfo:r,Action:i,IsStdDateTime:e,IsMultiSelection:!1,IsRange:!0},this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;this.getRangeNavigatorrProperties().SelectedFilterValues=[this.masterFilterWindowInstance.updateInitialFiltersForFilterControls(t,this.getRangeNavigatorrProperties().UniqueName,t.FieldActualType,s)];BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this);this.designerInstance.modules.serialization.notifyChange();this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.getRangeNavigatorrProperties().UniqueName)}},t.prototype.processFilterInformation=function(n){var h=n.filters,t=h.length>0?h[0].values:[],r={},v;if(t.length===2){var i=this.getArgumentContainer().FieldInfos[0],y=i.DateTimeFormat,o={},s={};switch(y){case DateTimeFormat.Date:o=BoldBIDashboard.parseDate(t[0],this.dateFormat);s=BoldBIDashboard.parseDate(t[1],this.dateFormat);break;case DateTimeFormat.DayMonthYear:o=BoldBIDashboard.parseDate(t[0],"dd-MM-yyyy");s=BoldBIDashboard.parseDate(t[1],"dd-MM-yyyy");break;default:o=t[0];s=t[1]}r={start:o,end:s};var p=i.FieldActualType==="bbi-designer-dataset-number",c=i.FieldActualType==="bbi-designer-dataset-datetime"||i.FieldActualType==="bbi-designer-dataset-time",u=p?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.IsBetween):c?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Range):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.Equals),f=[],e=[],l=!1,a=[];return c?(l=!0,e.push(BoldBIDashboard.format(new Date(r.start),this.dateFormat)),e.push(BoldBIDashboard.format(new Date(r.end),this.dateFormat)),a=e,u=e.length>0?u:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Range),f={DateFormat:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.Date),DisplayFilterList:a,DateFilterList:e}):(f.push(r.start),f.push(r.end),u=f.length>0?u:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.Equals)),v={FilterInfo:f,Action:u,IsStdDateTime:l,IsMultiSelection:!1,IsRange:!0},this.getRangeNavigatorrProperties().SelectedFilterValues=[],this.getRangeNavigatorrProperties().SelectedFilterValues=[this.masterFilterWindowInstance.updateInitialFiltersForFilterControls(i,this.getRangeNavigatorrProperties().UniqueName,i.FieldActualType,v)],!0}return console.error('Please enter valid filter value for "'+this.widgetJson.ContainerSettings.Title+'" to apply filter'),!1},t.prototype.isApplicableDateTypeWidgetForAPIFiltering=function(){return!0},t.prototype.startEndrangeCheck=function(n,t){var i=n.intervalType==="Auto"?n.series[0].dataSource[0][n.series[0].xName]:new Date(n.series[0].dataSource[0][n.series[0].xName]).toDateString(),r=n.intervalType==="Auto"?n.series[0].dataSource[n.series[0].dataSource.length-1][n.series[0].xName]:new Date(n.series[0].dataSource[n.series[0].dataSource.length-1][n.series[0].xName]).toDateString();return i===(n.intervalType==="Auto"?t.start:t.start.toDateString())&&r===(n.intervalType==="Auto"?t.end:t.end.toDateString())?!0:!1},t.prototype.isExportApplicable=function(){return{canExportImage:!1,canExportExcel:!1,canExportPdf:!1,canExportCsv:!1,canExport:!1}},t.prototype.getRangeNavigatorrProperties=function(){return this.widgetJson},t.prototype.updateRangeNavigatorSize=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this)?this.widgetContainerHelper.showControlError(this,this.dataValues):(this.isSelectionUpdate=!0,this.rangeNavigatorReSize(),this.updateTitleContainerSpacing(),this.isSelectionUpdate=!1)},t.prototype.rangeNavigatorReSize=function(){BoldBIDashboard.isNullOrUndefined(this.rangeNavigatorObj)||(this.rangeNavigatorObj.width=this.getRangeNavigatorSize().width,this.rangeNavigatorObj.height=this.getRangeNavigatorSize().height,this.rangeNavigatorObj.tooltip.enable=this.contentContainer.height()<30||this.contentContainer.width()<50?!1:!0,this.rangeNavigatorObj.refresh())},t.prototype.updateControlContainerPadding=function(){if(BoldBIDashboard.isNullOrUndefined(this.getContainerSettings().WidgetPaddingInfo)&&(this.getContainerSettings().WidgetPaddingInfo=new WidgetPaddingInfo,this.getContainerSettings().WidgetPaddingInfo.AutoPadding=!0,this.getContainerSettings().WidgetPaddingInfo.Padding=this.getControlContainerPaddingValue()),!BoldBIDashboard.isNullOrUndefined(this.controlContainer)&&this.controlContainer.length>0){var n=this.controlContainer.find(".bbi-dbrd-control-container-wrapper");n[0].style.padding=this.cellInfo.RowSpan>2?"8px":"0px"}},t.prototype.updateTitleContainerSpacing=function(){this.cellInfo.RowSpan>2?(this.rangeNavigatorItem.css("padding","4px 0px 0px 0px"),this.controlContainer.find(".bbi-dbrd-control-header").css("padding-left","0px"),this.contentContainer.css({padding:"0px",overflow:"visible"})):(this.rangeNavigatorItem.css("padding","0px 0px 0px 0px"),this.controlContainer.find(".bbi-dbrd-control-header").css("padding-left","8px"),this.contentContainer.css({padding:"0px",overflow:"hidden"}))},t.prototype.getRangeNavigatorSize=function(){var n=BoldBIDashboard.isNullOrUndefined(this.controlSubHeader)||this.controlSubHeader[0].innerText===""?0:this.controlSubHeader.height(),t=BoldBIDashboard.isNullOrUndefined(this.controlSubHeader)?0:this.ControlHeader.height(),i=this.controlContainer.width()-20+"px",r=this.controlContainer.height()-(t+n)-16+"px";return{width:i,height:r}},t.prototype.updateRangeNavigatorItemData=function(n){var h,c,r,u,l,a;if(!this.bbdesigner$.isEmptyObject(n)){h=null;this.dataValues=n;var t=this.designerInstance.canApplyTheme()||this.designerInstance.isViewMode()&&this.designerInstance.canApplyDashboardTheme(),e=this.designerInstance.modules.themeHelper.getRangeNavigatorFontText(),o=!1;if(BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this),this.designerInstance.modules.serialization.updateWidgetData(this.getRangeNavigatorrProperties(),this.DataGroupInfo),BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error)BoldBIDashboard.isNullOrUndefined(n.Message)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.widgetContainerHelper.showControlError(this,n),o=!1,t&&BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this));else if(n.noDataAvailable)this.rangeNavigatorElement.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this),o=!1,t&&BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this),this.IsRendered=!0;else if(this.rangeNavigatorElement.show(),!BoldBIDashboard.isNullOrUndefined(n)&&n.data!=="[]"&&BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)&&!(typeof n=="string"&&n.indexOf("Sf_Exception")!==-1)&&this.getArgumentContainer().FieldInfos.length>0&&this.getValueContainer().FieldInfos.length>0){this.updateDefaultColorsToProperty(this);this.updateSeriesTypeToProperty();c=n.widgetData.Data;h=JSON.parse(c);r="";u="";n.widgetData.IntervalType==="DayMonthYear"?(r="dd-MM-yyyy",u="dd-MM-yyyy"):n.widgetData.IntervalType==="MonthDayYear"?(r="MM-dd-yyyy",u="MM-dd-yyyy"):n.widgetData.IntervalType==="Year"?(r="",u="yyyy"):n.widgetData.IntervalType==="Date"?(r=this.dateFormat,u=this.dateFormat):(r="",u=this.dateFormat);var s=this.getRangeNaviSeries(h),f=JSON.parse(h[0]),v=n.widgetData.IntervalType==="None"?f[0][s[0].xName]:new Date(f[0][s[0].xName]),y=n.widgetData.IntervalType==="None"?f[f.length-1][s[0].xName]:new Date(f[f.length-1][s[0].xName]),i={valueType:n.widgetData.IntervalType==="None"?"Double":"DateTime",intervalType:this.getIntervalType(n.widgetData.IntervalType),enableGrouping:!0,enableDeferredUpdate:!0,groupBy:n.widgetData.IntervalType==="None"?"Auto":"Years",value:[v,y],tooltip:{textStyle:{color:this.themeHelper.getTooltipTextColor(),fontFamily:t?e.family:"var(--designer-font)",fontWeight:t?e.weight:"regular"},enable:!0,displayMode:"Always",format:u,fill:this.themeHelper.getTooltipBackground()},allowIntervalData:!0,height:this.getRangeNavigatorSize().height,width:this.getRangeNavigatorSize().width,labelStyle:{color:(t||this.designerInstance.isEnableCustomDashboardTheme)&&!this.getRangeNavigatorrProperties().LabelColor.IsEdited?this.themeHelper.getAxisLabelFontColor():this.getRangeNavigatorrProperties().LabelColor.Color,size:t?e.size:"10px",fontFamily:t?e.family:"var(--designer-font)",fontWeight:t?e.weight:"regular"},labelFormat:r,series:s,theme:t&&this.designerInstance.isDarkTypeTheme()?"MaterialDark":"Material",changed:this.bbdesigner$.proxy(this.onRangeChange,this),loaded:this.bbdesigner$.proxy(this.actionComplete,this),beforeResize:this.bbdesigner$.proxy(this.restrictControlResize,this)};BoldBIDashboard.isNullOrUndefined(this.rangeNavigatorObj)?(this.rangeNavigatorObj=new ejdashboard.charts.RangeNavigator(i),this.rangeNavigatorObj.appendTo(this.rangeNavigatorElement[0])):(this.rangeNavigatorObj.series=i.series,this.rangeNavigatorObj.intervalType=i.intervalType,this.rangeNavigatorObj.value=i.value,this.rangeNavigatorObj.valueType=i.valueType,this.rangeNavigatorObj.groupBy=i.groupBy,this.rangeNavigatorObj.labelFormat=i.labelFormat,this.rangeNavigatorObj.tooltip=i.tooltip,this.rangeNavigatorObj.labelStyle=i.labelStyle,this.rangeNavigatorObj.theme=i.theme,this.rangeNavigatorObj.dataBind(),this.rangeNavigatorObj.refresh());BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this);o=!0}else(n.data==="[]"&&n.columnBindings==="{}"||n.widgetData.Data.length===0||!BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty)&&(this.rangeNavigatorElement.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this),o=!0);this.updateOrRemoveSelection();this.designerInstance.isDesignMode()&&this.setPropertyPanelVisibility(o);(t||this.designerInstance.isEnableCustomDashboardTheme)&&(l=this.themeHelper.getRangeNavigatorHeaderTitle(),a=this.themeHelper.getRangeNavigatorHeaderSubTitle(),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getRangeNavigatorrProperties().ContainerSettings.TextColor,l),BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,a))}},t.prototype.updateOrRemoveSelection=function(){if(!BoldBIDashboard.isNullOrUndefined(this.rangeNavigatorObj)&&this.getRangeNavigatorrProperties().FilterSettings.ActAsMasterWidget&&this.getRangeNavigatorrProperties().SelectedFilterValues.length>0){this.isSelectionUpdate=!0;BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this);var n=this.rangeNavigatorObj.intervalType==="Auto"?Math.round(this.getRangeNavigatorrProperties().SelectedFilterValues[0].InitialMeasureFilter.Values[0]):BoldBIDashboard.parseDate(this.getRangeNavigatorrProperties().SelectedFilterValues[0].InitialDateFilter.DateFilterList[0],this.dateFormat),t=this.rangeNavigatorObj.intervalType==="Auto"?Math.round(this.getRangeNavigatorrProperties().SelectedFilterValues[0].InitialMeasureFilter.Values[1]):BoldBIDashboard.parseDate(this.getRangeNavigatorrProperties().SelectedFilterValues[0].InitialDateFilter.DateFilterList[1],this.dateFormat);this.rangeNavigatorObj.value=[n,t];this.rangeNavigatorObj.dataBind()}else BoldBIDashboard.isNullOrUndefined(this.rangeNavigatorObj)||this.removeInitialSelection();BoldBIDashboard.isNullOrUndefined(this.rangeNavigatorObj)||(this.rangeNavigatorObj.tooltip.enable=this.contentContainer.height()<30||this.contentContainer.width()<50?!1:!0);this.isSelectionUpdate=!1},t.prototype.getRangeNaviSeries=function(n){for(var i=[],r=this.themeHelper.currentTheme.dataColorPalette.length>0&&!this.getRangeNavigatorrProperties().DefaultColors.some(function(n){return n.IsEdited})&&this.designerInstance.canApplyTheme(),u=this.themeHelper.getColorPalette(),t=0;t<n.length;t++)i.push({dataSource:this.getFormattedDate(n[t]),xName:"xValue",yName:"yValue",animation:{enable:!1},type:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(RangeNavigatorType,this.getRangeNavigatorrProperties().SeriesType[t].Type),fill:r?this.getSeriesThemeColor(t,u):this.getRangeNavigatorrProperties().DefaultColors[t].Color});return i},t.prototype.getSeriesThemeColor=function(n,t){return n>=t.length?t[n%this.themeHelper.getColorPalette().length]:t[n]},t.prototype.getFormattedDate=function(n){var t=JSON.parse(n),i;if(this.getArgumentContainer().FieldInfos[0].FieldType!==FieldType.Measures){for(i=0;i<t.length;i++)BoldBIDashboard.isNullOrUndefined(t[i].xValue)||(t[i].xValue=new Date(t[i].xValue));return t}return t},t.prototype.removeInitialSelection=function(){var n=this.rangeNavigatorObj.intervalType==="Auto"?this.rangeNavigatorObj.series[0].dataSource[0][this.rangeNavigatorObj.series[0].xName]:new Date(this.rangeNavigatorObj.series[0].dataSource[0][this.rangeNavigatorObj.series[0].xName]),t=this.rangeNavigatorObj.intervalType==="Auto"?this.rangeNavigatorObj.series[0].dataSource[this.rangeNavigatorObj.series[0].dataSource.length-1][this.rangeNavigatorObj.series[0].xName]:new Date(this.rangeNavigatorObj.series[0].dataSource[this.rangeNavigatorObj.series[0].dataSource.length-1][this.rangeNavigatorObj.series[0].xName]);this.rangeNavigatorObj.value=[n,t];this.rangeNavigatorObj.dataBind()},t.prototype.removeSelection=function(){BoldBIDashboard.isNullOrUndefined(this.rangeNavigatorObj)||(this.removeInitialSelection(),BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this),this.widgetJson.SelectedFilterValues=[],this.designerInstance.modules.serialization.notifyChange())},t.prototype.setPropertyPanelVisibility=function(n){this.propertyPanel.updateCategoryVisibility("RangeNavigator","ColorSettings",n);this.propertyPanel.updateCategoryVisibility("RangeNavigator","AxisTypeSettings",n);this.setPropertyElement("ColorSettings","ColorSettings");this.setPropertyElement("AxisTypeSettings","AxisTypeSettings")},t.prototype.setPropertyElement=function(n,t,i,r){var u,f;this.propertyPanel.canUpdate=!1;u=this.propertyPanel.getPropertyElement(this.getPropertyGridItems(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r);u.isVisible=i;f=this.bbdesigner$.extend(!0,{},u);f.categoryName=n;this.propertyPanel.updatePropertyValue(f,"RangeNavigator",i);this.propertyPanel.canUpdate=!0},t.prototype.getIntervalType=function(n){var t="Auto";return n==="Date"||n==="DayMonthYear"||n==="MonthDayYear"?t="Days":n==="QuarterYear"?t="Quarter":n==="MonthYear"?t="Months":n==="WeekYear"?t="Weeks":n==="Year"&&(t="Years"),t},t.prototype.updateDefaultColorsToProperty=function(n){var r=[],u=n.getValueContainer().FieldInfos,i,t;for(BoldBIDashboard.isNullOrUndefined(n.getRangeNavigatorrProperties().DefaultColors)&&(n.getRangeNavigatorrProperties().DefaultColors=[]),i=0;i<u.length;i++)t=n.getDefaultColorSettings(u[i].UniqueColumnName),BoldBIDashboard.isNullOrUndefined(t)||!t.IsEdited?(t=new DefaultColorSet,t.Color=n.defaultColorPalette[i],t.Name=u[i].UniqueColumnName,t.IsEdited=!1,r.push(t)):r.push(t);n.getRangeNavigatorrProperties().DefaultColors=r},t.prototype.getDefaultColorSettings=function(n){this.getRangeNavigatorrProperties().DefaultColors=BoldBIDashboard.isNullOrUndefined(this.getRangeNavigatorrProperties().DefaultColors)?[]:this.getRangeNavigatorrProperties().DefaultColors;for(var t=0;t<this.getRangeNavigatorrProperties().DefaultColors.length;t++)if(this.getRangeNavigatorrProperties().DefaultColors[t].Name===n)return this.getRangeNavigatorrProperties().DefaultColors[t];return null},t.prototype.getPropertyGridItems=function(){var n=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.getRangeNavigatorrProperties().FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo,this.getRangeNavigatorrProperties().ContainerSettings);return this.containerPropertyItem=n.containerProperties,n.propertyGridItems.Header=this.getRangeNavigatorrProperties().ContainerSettings.Title,n.propertyGridItems.SubTitle=this.getRangeNavigatorrProperties().ContainerSettings.SubTitle,n.propertyGridItems.Description=this.getRangeNavigatorrProperties().ContainerSettings.Description,n.propertyGridItems.Type="RangeNavigator",this.bbdesigner$.each(n.containerActionsProperty.Items,function(n,t){(t.name==="ShowMaximize"||t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ImageExport"||t.name==="PDFExport"||t.name==="ViewData"||t.name==="PinWidget")&&(t.isVisible=!1)}),this.bbdesigner$.each(n.containerSettingsProperty.Items,function(n,t){(t.name==="ShowWidgetBackgroundImage"||t.name==="WidgetBackgroundImageMode"||t.name==="WidgetBackgroundImageSource"||t.name==="WidgetBackgroundImageBrowse"||t.name==="WidgetBackgroundImageURL")&&(t.isVisible=!1)}),n.propertyGridItems.Items=[{CategoryName:"Color Settings",DisplayName:this.designerInstance.getLocalizationContent().propertyPanel.colorSettingsText,IsVisible:this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getArgumentContainer().FieldInfos.length>0,Items:[{name:"ColorSettings",callbackInstance:this,callbackMethod:"renderDefaultColorSettings",itemType:"object",elementType:"RangeNavigator"},{name:"LabelColor",displayName:this.locale.propertyPanel.basicSettings.labelColor,itemType:"color",IsVisible:!0,value:this.getRangeNavigatorrProperties().LabelColor.Color}]},{CategoryName:"AxisType Settings",DisplayName:this.designerInstance.getLocalizationContent().propertyPanel.axisTypeSettingsText,IsVisible:this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getArgumentContainer().FieldInfos.length>0,Items:[{name:"AxisTypeSettings",callbackInstance:this,callbackMethod:"renderDefaultAxisTypeSettings",itemType:"object",elementType:"RangeNavigator"}]},n.filterSettingsProperty,n.containerSettingsProperty,n.containerActionsProperty,n.noDataContainerActionsProperty],n.propertyGridItems},t.prototype.renderDefaultAxisTypeSettings=function(n,t,i){var h=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),u,o,s,r,f,e;if(!BoldBIDashboard.isNullOrUndefined(h)&&h.type==="RangeNavigator")if(u=this.designerId+"_"+t+"_"+i.categoryName,this.defaultAxisTypeContainer=this.designerInstance.element.find("#"+u),this.defaultAxisTypeContainer.length!==0||BoldBIDashboard.isNullOrUndefined(n))if(!BoldBIDashboard.isNullOrUndefined(this.defaultAxisTypeContainer)&&this.defaultAxisTypeContainer.length>0){if(s=this.defaultAxisTypeContainer.find("#"+u+"_axis_body"),s.empty(),!BoldBIDashboard.isNullOrUndefined(this.getRangeNavigatorrProperties().DefaultColors))for(r=0;r<this.getRangeNavigatorrProperties().DefaultColors.length;r++)f=this.getRangeNavigatorrProperties().DefaultColors[r],e={name:this.getFieldName(f.Name),value:this.getRangeNavigatorrProperties().SeriesType},this.renderDefaultAxisTypeRow(e,s,r)}else this.propertyPanel.updateItemVisibility("RangeNavigator","AxisTypeSettings","AxisTypeSettings",i.isVisible);else if(this.defaultAxisTypeContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-designer-scroll-style-3","",{width:"460px"},{id:u}),o=BoldBIDashboard.buildTag("div","",{},{id:u+"_axis_body"}),this.defaultAxisTypeContainer.append(o),n.append(this.defaultAxisTypeContainer),!BoldBIDashboard.isNullOrUndefined(this.getRangeNavigatorrProperties().DefaultColors))for(r=0;r<this.getRangeNavigatorrProperties().DefaultColors.length;r++)f=this.getRangeNavigatorrProperties().DefaultColors[r],e={name:this.getFieldName(f.Name),value:this.getRangeNavigatorrProperties().SeriesType},this.renderDefaultAxisTypeRow(e,o,r)},t.prototype.renderDefaultAxisTypeRow=function(n,t,i){var f=BoldBIDashboard.buildTag("div","",{height:"50px",width:"100%"},{id:this.designerId+"_color_scale_row_"+i}),e=BoldBIDashboard.buildTag("div","",{width:"250px",float:"left","margin-top":"8.5px"}),o=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"50px","white-space":"nowrap","text-overflow":"ellipsis"}),r,u;o.text(n.name);e.append(o);r=BoldBIDashboard.buildTag("div","",{width:"100px",display:"inline-block",float:"left","margin-top":"3px"});u=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:this.designerId+"_default_axis_"+i});r.append(u);u.BoldBIDashboardDropDownList({dataSource:this.getSeriesTypeList(),width:"150px",change:this.bbdesigner$.proxy(this.updateSeriesType,this,i),selectedIndex:n.value[i].Type,cssClass:"bbi-designer-ejwidgets-dataConfig bbi-designer-content-label bbi-dbrd-control"});f.append(e,r);t.append(f)},t.prototype.getSeriesTypeList=function(){return[{text:"Area",value:"Area"},{text:"Line",value:"Line"},{text:"Step Line",value:"StepLine"}]},t.prototype.updateSeriesType=function(n,t){var i=t.value===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(RangeNavigatorType,RangeNavigatorType.Line)?RangeNavigatorType.Line:t.value===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(RangeNavigatorType,RangeNavigatorType.Area)?RangeNavigatorType.Area:RangeNavigatorType.StepLine;this.getRangeNavigatorrProperties().SeriesType.length>n&&(this.getRangeNavigatorrProperties().SeriesType[n].Type=i);this.rangeNavigatorObj.series[n].type=t.value;this.rangeNavigatorObj.refresh();this.designerInstance.modules.serialization.notifyChange()},t.prototype.renderDefaultColorSettings=function(n,t,i){var h=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),f,o,s,r,u,e;if(!BoldBIDashboard.isNullOrUndefined(h)&&h.type==="RangeNavigator")if(f=this.designerId+"_"+t+"_"+i.categoryName,this.defaultPaletteContainer=this.designerInstance.element.find("#"+f),this.defaultPaletteContainer.length!==0||BoldBIDashboard.isNullOrUndefined(n))if(!BoldBIDashboard.isNullOrUndefined(this.defaultPaletteContainer)&&this.defaultPaletteContainer.length>0){if(s=this.defaultPaletteContainer.find("#"+f+"_palatte_body"),s.empty(),!BoldBIDashboard.isNullOrUndefined(this.getRangeNavigatorrProperties().DefaultColors))for(r=0;r<this.getRangeNavigatorrProperties().DefaultColors.length;r++)u=this.getRangeNavigatorrProperties().DefaultColors[r],e={name:this.getFieldName(u.Name),color:u.Color,isEdited:u.IsEdited},this.renderDefaultColorPaletteRow(e,s,r)}else this.propertyPanel.updateItemVisibility("RangeNavigator","ColorSettings","ColorSettings",i.isVisible);else if(this.defaultPaletteContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-designer-scroll-style-3","",{width:"460px"},{id:f}),o=BoldBIDashboard.buildTag("div","",{},{id:f+"_palatte_body"}),this.defaultPaletteContainer.append(o),n.append(this.defaultPaletteContainer),!BoldBIDashboard.isNullOrUndefined(this.getRangeNavigatorrProperties().DefaultColors))for(r=0;r<this.getRangeNavigatorrProperties().DefaultColors.length;r++)u=this.getRangeNavigatorrProperties().DefaultColors[r],e={name:this.getFieldName(u.Name),color:u.Color,isEdited:u.IsEdited},this.renderDefaultColorPaletteRow(e,o,r)},t.prototype.renderDefaultColorPaletteRow=function(n,t,i){var f=BoldBIDashboard.buildTag("div","",{height:"50px",width:"100%"},{id:this.designerId+"_color_scale_row_"+i}),e=BoldBIDashboard.buildTag("div","",{width:"202.1px",float:"left","margin-top":"8.5px","margin-left":"3px"}),o=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"}),r,u;o.text(n.name);e.append(o);r=BoldBIDashboard.buildTag("div","",{width:"100px",display:"inline-block",float:"left","margin-top":"3px"});u=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:this.designerId+"_default_color_"+i});r.append(u);u.BoldBIDashboardColorPicker({value:n.color,width:"100px",cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label",select:this.bbdesigner$.proxy(this.updateDefaultPalette,this,i),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});f.append(e,r);t.append(f)},t.prototype.updateDefaultPalette=function(n,t){var r=this.getValueContainer().FieldInfos,i=this.propertyPanel.getHexColorFromRGBA(t.RGBA);this.getRangeNavigatorrProperties().DefaultColors.length>n&&(this.getRangeNavigatorrProperties().DefaultColors[n].Color!==i&&(this.getRangeNavigatorrProperties().DefaultColors[n].IsEdited=!0),this.getRangeNavigatorrProperties().DefaultColors[n].Color=i,this.getRangeNavigatorrProperties().DefaultColors[n].Name=r[n].UniqueColumnName);this.rangeNavigatorObj.series[n].fill=i;this.rangeNavigatorObj.refresh();this.designerInstance.modules.serialization.notifyChange()},t.prototype.getFieldName=function(n){var u=this.DataGroupInfo,e="",i,t,f,o,r;if(!BoldBIDashboard.isNullOrUndefined(u.FieldContainers)&&u.FieldContainers.length>0)for(i=u.FieldContainers,t=0;t<i.length;t++)for(f=0;f<i[t].FieldInfos.length;f++)if(o=i[t].FieldInfos,r=o.filter(function(t){return t.UniqueColumnName===n}),!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0){e=r[0].Name;break}return e},t.prototype.updateRangeNavigatorItemPropertyChange=function(n,t,i,r){var o=!1,u,f,s,e;switch(n){case"Name":this.getRangeNavigatorrProperties().ContainerSettings.Title=i;this.propertyPanel.setTitle(this.getRangeNavigatorrProperties());break;case"Description":this.propertyPanel.setDescription(this.getRangeNavigatorrProperties(),i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.getRangeNavigatorrProperties(),i);break;case"LabelColor":this.updateLabelColor(i);break;default:o=!0}if(!o){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(u=this.designPanelInstance.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)s=u[f],s.attr("id")===this.rangeNavigatorItem.attr("id")&&(e=this.bbdesigner$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"RangeNavigator",i));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-rangenavigator",this.designerId+"_"+this.getRangeNavigatorrProperties().UniqueName,[n,i,t,r],[n,t,i,r])}},t.prototype.getValueContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"YValue")},t.prototype.updateLabelColor=function(n){this.getRangeNavigatorrProperties().LabelColor.Color=n;this.getRangeNavigatorrProperties().LabelColor.IsEdited=!0;this.rangeNavigatorObj.labelStyle.color=this.getRangeNavigatorrProperties().LabelColor.Color},t.prototype.getArgumentContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Argument")},t.prototype.setContainerDefaultProperties=function(){var t=n.prototype.getContainerSettings.call(this);t.EnableImageExport=t.EnablePdfExport=t.EnableExcelExport=t.EnableCsvExport=!1;t.ShowMaximize=!1;t.PinWidget=!1;t.ViewData=!1},t.prototype.disposeRangeNavigatorItem=function(){BoldBIDashboard.isNullOrUndefined(this.rangeNavigatorObj)||this.rangeNavigatorObj.destroy();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.RangeNaviator)},t.prototype.supportedColumnsForFiltering=function(){var u=[],f=this.designerInstance.modules.filterConfiguration,i,t,n,r;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length>0)for(i=this.DataGroupInfo.FieldContainers,t=0;t<i.length;t++)for(n=0;n<i[t].FieldInfos.length;n++)r=i[t].FieldInfos,r[n].ContainerName!=="Argument"||f.isDuplicate(u,r[n].Name)||u.push(r[n]);return u},t.prototype.updateSeriesTypeToProperty=function(){for(var n,i=[],r=this.getValueContainer().FieldInfos,t=0;t<r.length;t++)n=this.getDefaultNavigatorType(r[t].UniqueColumnName),BoldBIDashboard.isNullOrUndefined(n)?(n=new RangeNavigatorSeriesType,n.Type=RangeNavigatorType.Area,n.Name=r[t].UniqueColumnName,i.push(n)):i.push(n);this.getRangeNavigatorrProperties().SeriesType=i},t.prototype.getDefaultNavigatorType=function(n){this.getRangeNavigatorrProperties().SeriesType=BoldBIDashboard.isNullOrUndefined(this.getRangeNavigatorrProperties().SeriesType)?[]:this.getRangeNavigatorrProperties().SeriesType;for(var t=0;t<this.getRangeNavigatorrProperties().SeriesType.length;t++)if(this.getRangeNavigatorrProperties().SeriesType[t].Name===n)return this.getRangeNavigatorrProperties().SeriesType[t];return null},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.RangeNavigatorItem",InternalRangeNavigatorReportItem,window);BoldBIDashboard.DashboardDesignerUtility.RangeNavigatorItem.prototype.initialize();__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalRTEReportItem=function(n){function t(t){var i=n.call(this,t,"RichTextEditor","e-rte-item")||this;return i.labelParameter=null,i.rteItem=null,i.rteElement=null,i.rteContent=null,i.propertyElement=null,i.rteObj=null,i.scriptTimer=null,i.timerCount=0,i.locale=null,i.verticalAlignmentButton=null,i.isRTEEditMode=!1,i.bbdesigner$=t.bbdesigner$,i.locale=t.getLocalizationContent(),i.widgetJson=new RTEProperties(t),i.widgetJson.ContainerSettings.ShowHeader=!1,i.ShowSubtitle=!1,i.designerId=i.designerInstance._id,i.labelParameter=t.modules.labelParameter,i.isVisualWidget=!1,i}return __extends(t,n),t.prototype.initialize=function(){this.locale=BoldBIDashboardDesigner.getLocale();var n={GroupName:this.locale.itemPanel.groupItems.miscellaneous,GroupId:"687b871b-7986-4ee9-b334-1051c8397807",Items:[{id:"910615ee-4f04-4afa-a2bb-2e5238575be7",widgetName:"RichTextEditor",widgetDisplayName:this.locale.itemPanel.widgetTitle.richTextEditor,cssClass:"bbi-widgeticon bbi-designer-widget-rte",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.RteItem",searchCategory:["text","label","miscellaneous","rte"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:this.locale.itemPanel.widgetTitle.richTextEditor,description:this.locale.itemPanel.widgetDescription.richTextEditorDesc,dataRequirement:this.locale.itemPanel.widgetDataRequirements.richTextEditorDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.RTEProperties",minRowSpan:3}]};BoldBIDashboardDesigner.widgetItems.push(n);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(n)},t.prototype.init=function(n,t){this.renderRTEItem(t);this.IsRendered=!0},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej2.richtexteditor.all.min.js",NameSpace:"ejdashboard.richtexteditor.RichTextEditor"},DependentScripts:[{ScriptName:"ej2.calendars.all.min.js",NameSpace:"ejdashboard.calendars.DatePicker"}]}},t.prototype.applyWidgetTheme=function(n){var t=this.themeHelper.getRTEContentStyle(),f=!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(t)?t.fontFamily:"var(--designer-font)",r=this.themeHelper.getRTEFontColor(),c="#"+this.designerId+(!BoldBIDashboard.isNullOrUndefined(this.rteItem[0].id)&&this.rteItem.length>0?" #"+this.rteItem[0].id:""),i=[],e=c+" .e-richtexteditor .e-rte-content .e-content * ",o=this.rteItem[0].id+"_RTE_ContentStyle",l=BoldBIDashboard.isNullOrUndefined(this.getHtmlText().match(/color:[^;']*(;)? */g))?!0:this.getHtmlText().match(/color:[^;']*(;)? */g).length<1,a=BoldBIDashboard.isNullOrUndefined(this.getHtmlText().match(/font-family:[^;']*(;)? */g))?!0:this.getHtmlText().match(/font-family:[^;']*(;)? */g).length<1,s,u,h;BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(t)||(BoldBIDashboard.isNullOrUndefined(f)||BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(f))&&(BoldBIDashboard.isNullOrUndefined(t.fontWeight)||BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(t.fontWeight))||(s=!BoldBIDashboard.isNullOrUndefined(t.fontFamily)&&!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(t.fontFamily),u=!BoldBIDashboard.isNullOrUndefined(t.fontWeight)&&!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(t.fontWeight),(u||a)&&i.push({key:e+"",value:this.themeHelper.getFontStyleCssValue(null,u?t.fontWeight:null,s?t.fontFamily:null)}));BoldBIDashboard.isNullOrUndefined(r)||BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(r)||!l||i.push({key:e+"",value:"\n\tcolor:"+r+";"});i.length>0?this.themeHelper.createandAppendCustomStyle(o,i):i.length===0&&(this.bbdesigner$("#"+o).remove(),h=this.designerId+"_RTECustomThemeFontSrc",this.bbdesigner$("#"+h).remove());n?this.rteElement.find(".e-content").addClass("e-rte-dark-theme"):this.rteElement.find(".e-content").removeClass("e-rte-dark-theme")},t.prototype.dispose=function(){this.disposeRTE();n.prototype.dispose.call(this)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);this.updateRTESize()},t.prototype.getMobileViewHeight=function(){return 2*this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t)},t.prototype.getJson=function(){return this.widgetJson.ContainerSettings.ShowHeader=!1,this.widgetJson.FilterSettings.IgnoreFilterActions=!0,BoldBIDashboard.isNullOrUndefined(this.widgetJson.ContainerSettings.WidgetPaddingInfo)&&(this.widgetJson.ContainerSettings.WidgetPaddingInfo=new WidgetPaddingInfo,this.widgetJson.ContainerSettings.WidgetPaddingInfo.AutoPadding=!0,this.widgetJson.ContainerSettings.WidgetPaddingInfo.Padding=this.getControlContainerPaddingValue()),this.widgetJson},t.prototype.updatePropertyChange=function(){},t.prototype.refresh=function(){},t.prototype.getPropertyPanelItems=function(){var n=this.containerPropertyItem.getContainerSettingItems(this.widgetJson.ContainerSettings,this.controlContainer,this.ControlHeader,null);return this.bbdesigner$.each(n.Items,function(n,t){(t.name==="ContainerTitleAlign"||t.name==="ContainerTitleColor")&&(t.isVisible=!1);(t.name==="widgetTitleFont"||t.name==="widgetSubtitleFont")&&(t.autoFontSettingsInfo.isVisible=!1,t.fontSizeInfo.isVisible=!1)}),{ShowPropertyHeader:!1,Type:"RichTextEditor",Items:[n]}},t.prototype.getPropertyPanelMessage=function(n){n.length>0&&n.find(".e-Message-Prop").length>0&&n.find(".e-Message-Prop").remove();var i=this.locale.rtePropertySettings.rtePropertyPanel,t=BoldBIDashboard.buildTag("div.e-Message-Prop","",{},{id:this.designerId+"rte_message_prop"+this.widgetJson.UniqueName}),r=BoldBIDashboard.buildTag("div.e-Message-Prop-Image","",{},{id:this.designerId+"rte_message_prop_image"+this.widgetJson.UniqueName}),u=BoldBIDashboard.buildTag("div.e-Message-Prop-Text",i,{},{id:this.designerId+"rte_message_prop_text"+this.widgetJson.UniqueName});t.append(r);t.append(u);n.append(t);this.propertyElement=n},t.prototype.getValue=function(){return!BoldBIDashboard.isNullOrUndefined(this.getRTEProperties().Value)&&this.getRTEProperties().Value!==""?this.getRTEProperties().Value:'<p  class="e-default-rte-root"><strong><br/><\/strong><\/p>'},t.prototype.canUseWidgetAsMaster=function(){return!1},t.prototype.getSettingsButtonIcon=function(){return{className:"bbi-dashboarddesigner-rte-editor bbi-dashboarddesigner-selection-edit e-moveicon bbi-toolbarfonticonbasic",pathLength:2}},t.prototype.onWidgetUnSelect=function(){this.designPanelInstance.selectedReportItems[0].hasClass("e-rte-item")&&(this.removePropertyMessage(),this.isRTEEditMode&&this.disablerteEdit())},t.prototype.onWidgetSettingsIconClick=function(n){BoldBIDashboard.isNullOrUndefined(n.handled)||BoldBIDashboard.isNullOrUndefined(n.currentTarget)||(n.currentTarget.hasClass("bbi-dashboarddesigner-selection-edit")||n.currentTarget.parent()&&n.currentTarget.parent().hasClass("bbi-dashboarddesigner-selection-edit")?(n.handled=!0,this.enablerteEdit()):(n.currentTarget.hasClass("bbi-dashboarddesigner-selection-ok")||n.currentTarget.parent()&&n.currentTarget.parent().hasClass("bbi-dashboarddesigner-selection-ok"))&&(n.hanlded=!0,this.disablerteEdit()))},t.prototype.designerEventListener=function(){return!1},t.prototype.updateWidgetSettings=function(){},t.prototype.renderRTEItem=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));this.renderrteElement();!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.RichTextEditor)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.renderrteElement=function(){this.rteItem=BoldBIDashboard.buildTag("div.e-rteItem e-dbrd-widget","",{width:"100%",height:"100%","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder},{id:this.designerId+"rteItem"+this.widgetJson.UniqueName});this.rteElement=BoldBIDashboard.buildTag("div.e-rteElement","",{width:"100%",height:"100%"},{id:this.designerId+"rteElement"+this.widgetJson.UniqueName});this.rteContent=BoldBIDashboard.buildTag("div.e-rteContent","",{},{id:this.designerId+"rteContent"+this.widgetJson.UniqueName});this.rteElement.append(this.rteContent);this.rteItem.append(this.rteElement);this.contentContainer.append(this.rteItem);this.controlContainer.data("widgetInstance",this);this.rteElement.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designerId+"_designer_waiting_popup bbi-designer-loader",template:this.designerInstance.getWaitingPopupTemplate()});var n=this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design;n?(this.rteObj=new ejdashboard.richtexteditor.RichTextEditor(this.getRTEDefaultObject(n)),this.rteObj.appendTo(this.rteContent[0]),this.rteContent.find(".e-rte-content").addClass("e-rte-content-background"),this.updateDropdown(),this.updateRteBorder(),this.disableToolbarItem(),this.updateVerticalAlignment(),BoldBIDashboard.isNullOrUndefined(this.getRTEProperties().VerticalAlign)||this.verticalAlignments(null,this.getRTEProperties().VerticalAlign)):(this.ControlContainer.find(".bbi-background-waiting-popup").show(),this.renderRteInstance(n,"ejdashboard.richtexteditor.RichTextEditor"));this.contentContainer.find(".bbi-widget-not-configured-text ").hide()},t.prototype.renderRteInstance=function(n,t){BoldBIDashboard.isNullOrUndefined(this.isScriptLoaded(t))?this.waitandLoadWidgetRTE(n,t):(this.renderObj(n),this.clearTimers(this.scriptTimer))},t.prototype.waitandLoadWidgetRTE=function(n,t){var i=this;this.scriptTimer=setTimeout(function(n,t,r){if(BoldBIDashboard.isNullOrUndefined(i.isScriptLoaded(t)))if(r.timerCount++,r.timerCount<50)r.waitandLoadWidgetRTE(n,t);else{r.clearTimers(r.scriptTimer);var u=r.controlContainer.attr("data-prevent-loading-indicator");BoldBIDashboard.isNullOrUndefined(u)&&i.designerInstance.modules.util.hideLoadingIndicator(r.controlContainer);r.contentContainer.find(".bbi-widget-not-configured-text ").closest(".bbi-dbrd-control-container").removeClass("bbi-show-widget-not-configured");i.widgetContainerHelper.showControlError(r,"")}else r.renderObj(n),r.clearTimers(r.scriptTimer)},100,n,t,this)},t.prototype.clearTimers=function(n){this.timerCount=0;clearTimeout(n)},t.prototype.renderObj=function(n){this.rteObj=new ejdashboard.richtexteditor.RichTextEditor(this.getRTEDefaultObject(n));this.rteObj.appendTo(this.rteContent[0]);this.rteContent.find(".e-rte-content").addClass("e-rte-content-background");n&&this.updateDropdown();BoldBIDashboard.isNullOrUndefined(this.getRTEProperties().VerticalAlign)||this.verticalAlignments(null,this.getRTEProperties().VerticalAlign);(this.controlContainer.find(".bbi-dbrd-label-parameter-text").length>0||this.controlContainer.find(".e-dbrd-label-parameter-text").length>0&&this.controlContainer.find(".bbi-dbrd-label-parameter-text").length===0)&&(this.controlContainer.find(".e-dbrd-label-parameter-text").addClass("bbi-dbrd-label-parameter-text"),this.controlContainer.find(".bbi-dbrd-label-parameter-text").next().html("..."));this.controlContainer.find(".e-dbrd-label-parameter-value").length>0&&this.controlContainer.find(".bbi-dbrd-label-parameter-value").length===0&&this.controlContainer.find(".e-dbrd-label-parameter-value").addClass("bbi-dbrd-label-parameter-value");this.setLabelParameterId(this.rteContent);this.ControlContainer.find(".bbi-background-waiting-popup").hide();this.applyWidgetTheme(this.designerInstance.isDarkTypeTheme())},t.prototype.setLabelParameterId=function(n){var i,t,r;if(n.find(".bbi-dbrd-label-parameter-text").length>0)for(i=n.find(".bbi-dbrd-label-parameter-text"),t=0;t<i.length;t++)r=this.labelParameter.generateIdForLabelParameterElement(i[t]),this.bbdesigner$(i[t]).attr("data-labelparameterid",r)},t.prototype.isScriptLoaded=function(n){var r=n.split("."),t=window[r[0]],i;if(!BoldBIDashboard.isNullOrUndefined(t))for(i=1;i<r.length;i++){if(BoldBIDashboard.isNullOrUndefined(t))return null;t=t[r[i]]}return t},t.prototype.getRTEDefaultObject=function(n){return{height:this.rteElement.height(),width:this.rteElement.width(),floatingToolbarOffset:0,backgroundColor:{mode:"Picker",modeSwitcher:!1},fontColor:{mode:"Picker",modeSwitcher:!1},toolbarSettings:{type:ejdashboard.richtexteditor.ToolbarType.Expand,enable:n,enableFloating:!1,items:this.getToolBarItem()},inlineMode:{enable:!this.isToolBarRequired(),onSelection:!0},fontFamily:{"default":"Roboto",items:this.getFontFamily()},fontSize:{"default":"26px",width:"40px",items:[{text:"8 px",value:"8px"},{text:"9 px",value:"9px"},{text:"10 px",value:"10px"},{text:"11 px",value:"11px"},{text:"12 px",value:"12px"},{text:"13 px",value:"13px"},{text:"14 px",value:"14px"},{text:"15 px",value:"15px"},{text:"16 px",value:"16px"},{text:"17 px",value:"17px"},{text:"18 px",value:"18px"},{text:"19 px",value:"19px"},{text:"20 px",value:"20px"},{text:"21 px",value:"21px"},{text:"22 px",value:"22px"},{text:"23 px",value:"23px"},{text:"24 px",value:"24px"},{text:"25 px",value:"25px"},{text:"26 px",value:"26px"},{text:"27 px",value:"27px"},{text:"28 px",value:"28px"},{text:"29 px",value:"29px"},{text:"30 px",value:"30px"},{text:"31 px",value:"31px"},{text:"32 px",value:"32px"},{text:"33 px",value:"33px"},{text:"34 px",value:"34px"},{text:"35 px",value:"35px"},{text:"36 px",value:"36px"},{text:"37 px",value:"37px"},{text:"38 px",value:"38px"},{text:"39 px",value:"39px"},{text:"40 px",value:"40px"},{text:"41 px",value:"41px"},{text:"42 px",value:"42px"},{text:"43 px",value:"43px"},{text:"44 px",value:"44px"},{text:"45 px",value:"45px"},{text:"46 px",value:"46px"},{text:"47 px",value:"47px"},{text:"48 px",value:"48px"},{text:"49 px",value:"49px"},{text:"50 px",value:"50px"},{text:"51 px",value:"51px"},{text:"52 px",value:"52px"},{text:"53 px",value:"53px"},{text:"54 px",value:"54px"},{text:"55 px",value:"55px"},{text:"56 px",value:"56px"},{text:"57 px",value:"57px"},{text:"58 px",value:"58px"},{text:"59 px",value:"59px"},{text:"60 px",value:"60px"}]},enableHtmlSanitizer:!0,readonly:!0,actionComplete:this.bbdesigner$.proxy(this.actionCompleteHandler,this),quickToolbarOpen:this.bbdesigner$.proxy(this.quickToolbarOpen,this),quickToolbarClose:this.bbdesigner$.proxy(this.quickToolbarClose,this),beforeSanitizeHtml:this.bbdesigner$.proxy(this.beforeSanitizeHtml,this),value:this.getValue()}},t.prototype.beforeSanitizeHtml=function(n){if(n.name.toLowerCase()==="beforesanitizehtml"){var t=n.selectors.tags.indexOf("iframe[src]");t!==-1&&n.selectors.tags.splice(t,1)}},t.prototype.getToolBarItem=function(){return["Bold","Italic","Underline","StrikeThrough","FontName","FontSize","FontColor","BackgroundColor","|","Formats","Alignments","-",{tooltipText:"Vertical Alignments",template:"<button type='button' id=\""+this.designerId+"rteContent"+this.widgetJson.UniqueName+'_toolbar_Vertical_Alignments" class="e-tbar-btn e-control e-btn e-lib e-icon-btn" tabindex="-1"><\/button>'},"OrderedList","UnorderedList","|","SuperScript","SubScript","|","CreateTable","CreateLink","|","SourceCode","|","Undo","Redo",]},t.prototype.updateDropdown=function(){this.verticalAlignmentButton=new ejdashboard.splitbuttons.DropDownButton({iconCss:"e-btn-icon e-align-bottom e-icons e-vertical-align-style",beforeOpen:this.bbdesigner$.proxy(this.verticalAlignmentsPopup,this),select:this.bbdesigner$.proxy(this.verticalAlignments,this),items:[{text:"Align Top",iconCss:"e-btn-icon e-icons e-align-top"},{text:"Align Middle",iconCss:"e-btn-icon e-icons e-align-middle"},{text:"Align Bottom",iconCss:"e-btn-icon e-icons e-align-bottom"}]});this.verticalAlignmentButton.appendTo("#"+this.designerId+"rteContent"+this.widgetJson.UniqueName+"_toolbar_Vertical_Alignments")},t.prototype.updateVerticalAlignment=function(){BoldBIDashboard.isNullOrUndefined(this.getRTEProperties().VerticalAlign)?this.rteObj.contentModule.contentPanel.querySelector(".e-content").classList.remove("e-content-height"):this.verticalAlignments(null,this.getRTEProperties().VerticalAlign)},t.prototype.verticalAlignmentsPopup=function(n){var t=n.element.parentElement.id;!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0&&this.bbdesigner$("#"+t).addClass("e-rte-dropdown-popup")},t.prototype.verticalAlignments=function(n,t){var i=this.getRTEProperties().VerticalAlign=BoldBIDashboard.isNullOrUndefined(n)?t:n.element.innerText.replace(" ",""),u=i==="AlignMiddle"?"middle":i==="AlignTop"?"top":"bottom",r;this.rteObj.contentModule.contentPanel.style.display="relative";this.rteObj.contentModule.contentPanel.querySelector(".e-content").classList.add("e-content-height");r=this.getVerticalPosition(u);this.rteObj.contentModule.contentPanel.querySelector(".e-content").style.top=r},t.prototype.getVerticalPosition=function(n){var f=this.rteContent.find(".e-rte-content"),i=f.height(),r=f.find(".e-content").height(),t=10,s=r+t,e=i-r,u,o;return t=r+t*2<i?t:0,i>s?(o=n==="middle"?e/2:n==="bottom"?e-t:t,u=o+"px"):u=n==="middle"?"36%":n==="top"?"0%":"74%",u},t.prototype.getFontFamily=function(){return[{text:"Roboto",value:"Roboto",cssClass:"e-roboto"},{text:"Segoe UI",value:"Segoe UI",cssClass:"e-segoe-ui"},{text:"Arial",value:"Arial,Helvetica,sans-serif",cssClass:"e-arial"},{text:"Georgia",value:"Georgia,serif",cssClass:"e-georgia"},{text:"Impact",value:"Impact,Charcoal,sans-serif",cssClass:"e-impact"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif",cssClass:"e-tahoma"},{text:"Times New Roman",value:"Times New Roman,Times,serif",cssClass:"e-times-new-roman"},{text:"Verdana",value:"Verdana,Geneva,sans-serif",cssClass:"e-verdana"}]},t.prototype.isToolBarRequired=function(){var n=this.rteElement.height(),t=this.rteElement.width(),i,r;if(t!==n){if(i=Math.ceil(905/t),r=i>1?n-i*42:n,r>60)return!0}else if(t>300)return!0;return!1},t.prototype.updateRteBorder=function(){var n=this.isToolBarRequired();this.rteElement.hasClass("e-rte-inline-toobar-border")||n?n&&this.rteElement.removeClass("e-rte-inline-toobar-border"):this.rteElement.addClass("e-rte-inline-toobar-border")},t.prototype.actionCompleteHandler=function(n){var t=n.requestType;switch(t){case"SourceCode":case"Preview":this.beatifyJs(t);break;case"Pre":this.updateCodeFamily(n);break;default:this.setDefaultFamily(n)}},t.prototype.quickToolbarOpen=function(){this.isToolBarRequired()?this.rteElement.find(".e-toolbar-item").attr("aria-disabled")==="true"&&this.disableToolbarItem():this.updateDropdown()},t.prototype.quickToolbarClose=function(){this.isToolBarRequired()||BoldBIDashboard.isNullOrUndefined(this.verticalAlignmentButton.element)?this.rteElement.find(".e-toolbar-item").attr("aria-disabled")==="false"&&this.enableToolbarItem():this.verticalAlignmentButton.destroy()},t.prototype.updateCodeFamily=function(n){var i,t;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.elements))for(i=n.elements,t=0;t<i.length;t++)this.bbdesigner$(i[t]).addClass("e-rte-pretag")},t.prototype.setDefaultFamily=function(n){var i,t;if(n.requestType!=="Pre"&&!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.elements))for(i=n.elements,t=0;t<i.length;t++)this.bbdesigner$(i[t]).removeClass("e-rte-pretag")},t.prototype.beatifyJs=function(n){if(n==="SourceCode"){var t=document.querySelector(".e-rte-srctextarea");window.html_beautify&&(t.value=window.html_beautify(t.value,{"indent-size":2}));this.codeContentHeight=this.rteContent.find(".e-rte-content").css("height");this.codeContentMargin=this.rteContent.find(".e-rte-content").css("margin");this.disableToolbarItem()}else n==="Preview"&&(this.rteContent.find(".e-rte-content").css("height",this.codeContentHeight),this.rteContent.find(".e-rte-content").css("margin",this.codeContentMargin),this.enableToolbarItem())},t.prototype.enablerteEdit=function(){var n=this.controlContainer.find(".bbi-dashboarddesigner-rte-editor");this.rteContent.addClass("e-editable-area");this.enableToolbarItem();!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0&&(n.removeClass("bbi-dashboarddesigner-selection-edit").addClass("bbi-dashboarddesigner-selection-ok bbi-dbrd-designer-hoverable"),n.attr("data-tooltip",this.locale.designPanel.updateTextEditor));this.isRTEEditMode=!0;this.removeLabelParameterElement();this.rteItem.css("z-index","unset");this.rteObj.readonly=!1;this.rteObj.focusIn();this.updateVerticalAlignment()},t.prototype.disablerteEdit=function(){var t=this.controlContainer.find(".bbi-dashboarddesigner-rte-editor"),n,i,r;this.rteContent.find(".e-content").children().length!==1||this.bbdesigner$(this.rteContent.find(".e-content").children()[0]).hasClass("e-default-rte-root")||this.bbdesigner$(this.rteContent.find(".e-content").children()[0]).addClass("e-default-rte-root");this.rteContent.find(".e-default-rte-root").length===1&&(n=this.rteContent.find(".e-default-rte-root").find("span"),!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0&&(i=n.parent(),n.text().length!==i.text().length||BoldBIDashboard.isNullOrUndefined(n.css("font-size"))||this.rteContent.find(".e-default-rte-root").css("font-size",n.css("font-size"))));r=BoldBIDashboard.isNullOrUndefined(this.rteObj.getText())?"":this.rteObj.getText();this.rteContent.removeClass("e-editable-area");!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0&&(t.removeClass("bbi-dashboarddesigner-selection-ok").addClass("bbi-dashboarddesigner-selection-edit bbi-dbrd-designer-hoverable"),t.attr("data-tooltip",this.locale.designPanel.editTextEditor));this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design||this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.designpreview&&this.isRTEEditMode?(this.getRTEProperties().Value=this.rteObj.value=this.getResultantParameterString(r,this.getHtmlText(),null),this.isRTEEditMode=!1):this.rteObj.value=BoldBIDashboard.isNullOrUndefined(this.rteObj.getUpdatedValue())?this.rteObj.value:this.rteObj.getUpdatedValue();this.rteItem.css("z-index","100");this.rteObj.readonly=!0;this.rteObj.focusOut();this.rteObj.refresh();this.rteContent.find(".e-rte-content").addClass("e-rte-content-background");this.updateDropdown();this.disableToolbarItem();this.updateVerticalAlignment();this.designerInstance.modules.serialization.notifyChange();this.applyWidgetTheme(this.designerInstance.isDarkTypeTheme())},t.prototype.removeLabelParameterElement=function(){for(var i,t=this.rteContent.find(".e-content").find("span"),n=0;n<t.length;n++)(this.bbdesigner$(t[n]).hasClass("bbi-dbrd-label-parameter-text")||this.bbdesigner$(t[n]).hasClass("bbi-dbrd-label-parameter-value"))&&(i=this.bbdesigner$(t[n]).hasClass("bbi-dbrd-label-parameter-text")?t[n].innerHTML:"",this.bbdesigner$(t[n]).before(i),t[n].remove())},t.prototype.enableToolbarItem=function(){var n=this.rteContent.find(".e-rte-toolbar"),t;this.rteObj.enableToolbarItem(this.getToolBarItem());t="#"+this.designerId+"rteContent"+this.widgetJson.UniqueName+"_toolbar_Vertical_Alignments";n.find(t).parents(".e-toolbar-item").removeClass("bbi-disabledbutton");n.find(t).parents(".e-toolbar-item").removeClass("e-vertical-align-icon-opacity");n.find(".e-expended-nav").removeClass("e-disable-nav")},t.prototype.disableToolbarItem=function(){var n=this.rteContent.find(".e-rte-toolbar"),t;n.length>0&&(this.rteObj.disableToolbarItem(this.getToolBarItem()),t="#"+this.designerId+"rteContent"+this.widgetJson.UniqueName+"_toolbar_Vertical_Alignments",n.find(t).parents(".e-toolbar-item").addClass("bbi-disabledbutton"),n.find(t).parents(".e-toolbar-item").addClass("e-vertical-align-icon-opacity"),n.find(".e-expended-nav").addClass("e-disable-nav"))},t.prototype.getHtmlText=function(){for(var t=this.rteContent.find(".bbi-dbrd-label-parameter-text"),n=0;n<t.length;n++){var i=this.bbdesigner$(t[n]),u=i.attr("data-param"),r=t[n].innerHTML,f=this.bbdesigner$(t[n].nextSibling);r!==u&&(f.hasClass("bbi-dbrd-label-parameter-value")&&i.next().remove(),i.after(r),i.remove())}return this.removeValueUpdateElement(),BoldBIDashboard.isNullOrUndefined(this.rteObj.getUpdatedValue())?"":this.rteObj.getUpdatedValue()},t.prototype.removeValueUpdateElement=function(){var t=this.rteContent.find(".bbi-dbrd-label-parameter-text"),n;t.length===0&&(n=this.rteContent.find(".bbi-dbrd-label-parameter-value"),n.length>0&&n.val().trim()===""&&n.remove())},t.prototype.getResultantParameterString=function(n,t,i){var r=this.labelParameter.GetValidParameterCollection(n,i);return r.matchedTexts.length>0?(t=this.getParameterizedHtmlText(r.matchedTexts,r.dataId,t),n=this.labelParameter.getParameterizedText(r.matchedTexts,t,r.dataId,!0)):n=t,n},t.prototype.getParameterizedHtmlText=function(n,t,i){for(var r,s,u,l,v,e=0;e<n.length;e++){r=n[e];s=t;r.split(".").length>1&&(s=this.labelParameter.getDataSourceID(r));var y='" data-param="'+r+'" data-source="'+s+'"',a=RegExp(r),f=this.rteContent.find(".bbi-dbrd-label-parameter-text");for(u=0;u<f.length;u++){var o=f[u].innerHTML,h=this.bbdesigner$(f[u].nextSibling),c=BoldBIDashboard.isNullOrUndefined(h)||!h.hasClass("bbi-dbrd-label-parameter-value")?f[u].outerHTML:f[u].outerHTML+h[0].outerHTML;if(o===r&&(c.indexOf(y)>-1||f.attr("data-param")!==r)){i=i.replace(c,r);break}else if(o!==r&&a.test(o)){l=o.split(a);v=l[0]+r+"<strong>"+l[1]+"<\/strong>";i=i.replace(c,v);break}}}return i},t.prototype.updateRTESize=function(){var t,n;if(this.rteObj){if(this.rteObj.height=this.rteElement.height(),this.rteObj.width=this.rteElement.width(),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design){if(this.rteObj.toolbarSettings.enable=!0,this.rteObj.inlineMode.enable=!this.isToolBarRequired(),this.updateRteBorder(),this.controlContainer.find(".bbi-dbrd-label-parameter-value").length>0)for(t=this.controlContainer.find(".bbi-dbrd-label-parameter-value"),n=0;n<t.length;n++)t[n].children.length>0&&this.bbdesigner$(t[n]).children().remove()}else this.rteObj.toolbarSettings.enable=!1;this.rteObj.value=BoldBIDashboard.isNullOrUndefined(this.rteObj.getUpdatedValue())?this.rteObj.value:this.rteObj.getUpdatedValue();this.rteObj.refresh();this.rteObj.readonly&&this.disableToolbarItem();this.rteContent.find(".e-rte-content").addClass("e-rte-content-background");this.updateDropdown();this.updateVerticalAlignment();this.applyWidgetTheme(this.designerInstance.isDarkTypeTheme())}},t.prototype.getCurrentRTEObject=function(){return ejdashboard.base.getComponent(this.rteContent[0],"richtexteditor")},t.prototype.getRTEProperties=function(){return this.widgetJson},t.prototype.disposeRTE=function(){this.rteObj.destroy();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.RichTextEditor)},t.prototype.removePropertyMessage=function(){!BoldBIDashboard.isNullOrUndefined(this.propertyElement)&&this.propertyElement.length>0&&this.propertyElement.find(".e-Message-Prop").length>0&&this.propertyElement.find(".e-Message-Prop").remove()},t}(BoldBIDashboard.Dashboard.Widget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.RteItem",InternalRTEReportItem,window);BoldBIDashboard.DashboardDesignerUtility.RteItem.prototype.initialize();__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalCombineItem=function(n){function t(t){var i=n.call(this,t,"CombineWidget","bbi-combine-item")||this;return i.locale=null,i.upArrowIcon=null,i.downArrowIcon=null,i.containerWrapper=null,i.filterObject=null,i.bbdesigner$=i.designerInstance.bbdesigner$,i.locale=t.getLocalizationContent(),i.widgetJson=new CombineProperties(t),i.widgetJson.ContainerSettings.ShowHeader=!1,i.ShowSubtitle=!1,i.designerId=i.designerInstance._id,i.draggedWidgetList=[],i.isWidgetDeleted=!1,i.filterObject=i.designerInstance.modules.masterSlaveFilter,i.widgetJson.ContainerSettings.CombineWidgetId="",i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.miscellaneous,GroupId:"f7c2211d-9335-4fa9-8e04-0ce39a2be76f",Items:[{id:"7f107d63-74e7-423b-bdef-ea3aa084baf6",widgetName:"CombinedWidget",widgetDisplayName:n.itemPanel.widgetTitle.combineWidget,cssClass:"bbi-widgeticon bbi-designer-widget-combine",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.CombineItem",searchCategory:["text","label","miscellaneous","combine"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.combineWidget,description:n.itemPanel.widgetDescription.combineWidgetDesc,dataRequirement:n.itemPanel.widgetDataRequirements.combineWidgetDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.CombineProperties"}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){this.setContainerDefaultProperties();this.controlContainer.data("widgetInstance",this);this.contentContainer.find(".bbi-widget-not-configured-text ").hide();this.addToCacheCollection();BoldBIDashboard.Dashboard.WidgetContainerHelper.showAlertMessageForData(this.locale.combineWidget.widgetInfoMsg,this.contentContainer,this.getContainerSettings().CombineWidgetId,!0);this.IsRendered=!0;this.designerInstance.isViewMode()&&t.DraggedWidgetList.length>0&&BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(this.contentContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.CombineWidget)},t.prototype.getWidgetImage=function(){return""},t.prototype.getPropertyPanelItems=function(){return this.combineWidgetPropertyItem()},t.prototype.updatePropertyChange=function(){},t.prototype.getMobileViewHeight=function(){return.25*this.CellInfo.RowSpan*this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.updateControlContainerPadding=function(){BoldBIDashboard.isNullOrUndefined(this.getContainerSettings().WidgetPaddingInfo)&&(this.getContainerSettings().WidgetPaddingInfo=new WidgetPaddingInfo,this.getContainerSettings().WidgetPaddingInfo.AutoPadding=!0,this.getContainerSettings().WidgetPaddingInfo.Padding=this.getControlContainerPaddingValue())},t.prototype.dispose=function(){if(this.isWidgetDeleted)n.prototype.dispose.call(this),this.designerInstance.modules.serialization.notifyChange(),this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.CombineWidget);else if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction){var t=[];t.data=this.controlContainer;this.updateDeletedWidgets(!0,t)}},t.prototype.updateSize=function(t){if(n.prototype.updateSize.call(this,t),!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction){var i=JSON.parse(JSON.stringify(this.widgetJson.ContainerSettings.Bounds)),r=JSON.parse(JSON.stringify(t));this.designPanelInstance.updateWidgetOnResize(i,r,this)}BoldBIDashboard.Dashboard.WidgetContainerHelper.updateNoNecessaryDataContainerSize(this.ContentContainer,!0)},t.prototype.appendWidget=function(n){this.controlContainer.append(n)},t.prototype.updateDraggedWidgetList=function(n,t,i){var f=n.getJson().UniqueId,r=n.Type=="TabbedWidget"?0:100+this.draggedWidgetList.length,e=0,u,o;if(!BoldBIDashboard.isNullOrUndefined(this.getCombineProperties().DraggedWidgetList)&&(t||i))for(u=0;u<this.getCombineProperties().DraggedWidgetList.length;u++)if(this.getCombineProperties().DraggedWidgetList[u]===f){e=u;break}if(i){this.getCombineProperties().DraggedWidgetList.splice(e,1);this.draggedWidgetList.splice(e,1);this.getCombineProperties().DraggedWidgetList.length===0&&this.draggedWidgetList.length===0&&BoldBIDashboard.Dashboard.WidgetContainerHelper.showAlertMessageForData(this.locale.combineWidget.widgetInfoMsg,this.contentContainer,this.getContainerSettings().CombineWidgetId,!0);return}t&&(r=n.Type=="TabbedWidget"?0:100+e);o={widgetUniqueId:f,"z-index":r};t?(BoldBIDashboard.Dashboard.WidgetHelper.updateWidgetContainerPosition(n,r),this.draggedWidgetList.push(o)):this.getCombineProperties().DraggedWidgetList.indexOf(f)===-1&&(BoldBIDashboard.Dashboard.WidgetHelper.updateWidgetContainerPosition(n,r),this.draggedWidgetList.push(o));t||this.updateWidgetList(f);this.getCombineProperties().DraggedWidgetList.length===0&&this.draggedWidgetList.length===0?BoldBIDashboard.Dashboard.WidgetContainerHelper.showAlertMessageForData(this.locale.combineWidget.widgetInfoMsg,this.contentContainer,this.getContainerSettings().CombineWidgetId,!0):BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(this.contentContainer);BoldBIDashboard.isNullOrUndefined(n.ControlHeader)||n.ControlHeader.css("z-index",r+1)},t.prototype.showAlert=function(n,t,i){BoldBIDashboard.isNullOrUndefined(this.draggedWidgetList)||this.draggedWidgetList.length===0?t&&(this.isWidgetDeleted=!0,this.dispose(),this.isWidgetDeleted=!1,this.designerInstance.deleteWidgetfromCollection(this.Name),this.designerInstance.designerPanel.updateWidgetOnRemove(i)):t?this.designerInstance.modules.util.alertDialog(this.locale.combineWidget.deleteWidget,this.locale.combineWidget.deleteWidgetAlertMsg,IconType.question,AlertType.Confirm,!1,"",{instance:this,method:"updateDeletedWidgets",dataInfo:{data:i}}):this.designerInstance.modules.util.alertDialog(this.locale.combineWidget.pasteWidget,this.locale.combineWidget.pasteWidgetAlertMsg,IconType.question,AlertType.Confirm,!1,"",{instance:this,method:"updatePastedWidgets",dataInfo:{data:n}})},t.prototype.canUseWidgetAsMaster=function(){return!1},t.prototype.isMasterPresentInChild=function(n){return this.getCombineProperties().DraggedWidgetList.indexOf(n)!==-1},t.prototype.getChildWidgetList=function(){return this.getCombineProperties().DraggedWidgetList},t.prototype.isWidgetItemRestricted=function(t,i,r,u,f){return n.prototype.isWidgetItemRestricted.call(this,t,i,r,u,f)},t.prototype.getCombineProperties=function(){return this.widgetJson},t.prototype.addToCacheCollection=function(){var n={uniqueId:this.widgetJson.UniqueId};this.designerInstance.addToWidgetCacheCollection(this.widgetJson.UniqueName,n,this.designerInstance.isDesignMode())},t.prototype.setContainerDefaultProperties=function(){var t=n.prototype.getContainerSettings.call(this);t.EnableExcelExport=t.EnableCsvExport=!1;t.ViewData=!1},t.prototype.updateWidgetList=function(n){BoldBIDashboard.isNullOrUndefined(this.getCombineProperties().DraggedWidgetList)&&(this.getCombineProperties().DraggedWidgetList=[]);this.getCombineProperties().DraggedWidgetList.indexOf(n)===-1&&this.getCombineProperties().DraggedWidgetList.push(n)},t.prototype.updatePastedWidgets=function(n,t){n&&this.designPanelInstance.pasteWidgets(t.data)},t.prototype.updateDeletedWidgets=function(n,t){var o=this,u=[],f=[],i,r;f.push(this.widgetJson);var s=this.widgetJson.UniqueId,h=this.widgetJson.UniqueName,e=t.data,c=BoldBIDashboardDesigner.editManager.isPerformAction;if(n){for(this.widgetHelper.getAllWidgets().forEach(function(n){BoldBIDashboard.isNullOrUndefined(n.getContainerSettings().CombineWidgetId)||n.getContainerSettings().CombineWidgetId===""||n.getContainerSettings().CombineWidgetId===o.widgetJson.UniqueId&&(u.push(n),f.push(n.getJson()))}),i=0;i<u.length;i++)r=u[i],this.designerInstance.deleteWidgetfromCollection(r.Name),BoldBIDashboardDesigner.editManager.isPerformAction=!0,this.filterObject.RemoveSelectedWidgetFromFilterObject(r),r.dispose();this.isWidgetDeleted=!0;this.dispose();this.isWidgetDeleted=!1;this.designerInstance.deleteWidgetfromCollection(this.Name);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(e))?this.designerInstance.designerPanel.updateWidgetOnRemove(null):this.designerInstance.designerPanel.updateWidgetOnRemove(e);BoldBIDashboardDesigner.editManager.isPerformAction=c;BoldBIDashboardDesigner.editManager.isPerformAction||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderCombineWidgetOnUndoAction","CombineItem",this.designerInstance._id+"_"+h,[f,s],null);this.designerInstance.modules.serialization.notifyChange()}else this.designPanelInstance.removeWidgetSelection()},t.prototype.updateWidgetsInCombineWidget=function(n,t){for(var r=this.getCombineProperties().DraggedWidgetList,i=0;i<r.length;i++)n===r[i]&&(r[i]=t.UniqueId)},t.prototype.clearWidgetList=function(){this.getCombineProperties().DraggedWidgetList=[]},t.prototype.combineWidgetPropertyItem=function(){var n=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.widgetJson.FilterSettings,this.controlContainer,this.controlHeader,null,this.widgetJson.ContainerSettings);return n.propertyGridItems.Header=this.widgetJson.ContainerSettings.Title,n.propertyGridItems.Type="CombineWidget",this.bbdesigner$.each(n.containerSettingsProperty.Items,function(n,t){(t.name==="ContainerTitleAlign"||t.name==="ContainerTitleColor")&&(t.isVisible=!1);(t.name==="widgetTitleFont"||t.name==="widgetSubtitleFont")&&(t.autoFontSettingsInfo.isVisible=!1,t.fontSizeInfo.isVisible=!1)}),this.bbdesigner$.each(n.containerActionsProperty.Items,function(n,t){(t.name==="ShowHeader"||t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ViewData")&&(t.isVisible=!1)}),n.propertyGridItems.Items=[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"Widgets Order",displayName:this.locale.propertyPanel.basicSettings.widgetOrderText,isVisible:!0,itemType:"object",callbackInstance:this,callbackMethod:"renderOrderWidget"}]},n.containerSettingsProperty,n.containerActionsProperty],n.propertyGridItems},t.prototype.renderOrderWidget=function(n,t,i){var r;if(BoldBIDashboard.isNullOrUndefined(n))r=this.designerInstance.element.find("#"+this.designerId+"_combine_widgets_display_container").data("BoldBIDashboardListBox"),BoldBIDashboard.isNullOrUndefined(r)||(r.setModel({dataSource:this.getWidgetList()}),r.unselectAll(),r.refresh()),this.disableArrowIcons();else{var u=this.containerWrapper=BoldBIDashboard.buildTag("div","",{},{id:this.designerId+"_"+t+"_"+i.name+"_wrapper"}),f=BoldBIDashboard.buildTag("div.bbi-dbrd-container-item-toolbar","",{},{}),e=BoldBIDashboard.buildTag("div.e-dbrd-basicsettings-leftdiv","",{float:"left"},{id:this.designerId+"_basicsettings_left"}),y=BoldBIDashboard.buildTag("span",this.locale.combineWidget.orderWidgetLabel,{float:"left","font-size":"14px","font-weight":600},{}),o=BoldBIDashboard.buildTag("div.bbi-dbrd-basicsettings-rightdiv","",{},{id:this.designerId+"_basicsettings_right"}),s=this.upArrowIcon=BoldBIDashboard.buildTag("div.bbi-dbrd-container-widget-arrow-up","",{width:"20px",height:"20px"},{id:this.designerId+"_combine_widget_up_icon_container"}),h=BoldBIDashboard.buildTag("span.bbi-widgeticon bbi-dashboarddesigner-up-arrow bbi-dbrd-designer-hoverable bbi-dbrd-container-widget-arrow-icon","",{},{id:this.designerId+"_combine_widget_up_icon","data-tooltip":"Move Up"}),c=this.downArrowIcon=BoldBIDashboard.buildTag("div.bbi-dbrd-container-widget-arrow-down","",{width:"20px",height:"20px"},{id:this.designerId+"_combine_widget_down_icon_container"}),l=BoldBIDashboard.buildTag("span.bbi-widgeticon bbi-dashboarddesigner-down-arrow bbi-dbrd-designer-hoverable bbi-dbrd-container-widget-arrow-icon","",{},{id:this.designerId+"_combine_widget_down_icon","data-tooltip":"Move Down"}),a=BoldBIDashboard.buildTag("div","",{margin:"3px 10px"},{id:this.designerId+"_combine_widgets_display_container_div"}),v=BoldBIDashboard.buildTag("ul","",{},{id:this.designerId+"_combine_widgets_display_container"});e.append(y);s.append(h);c.append(l);o.append(s,c);f.append(e,o);a.append(v);u.append(f).append(a);n.append(u);h.on("click",this.bbdesigner$.proxy(this.moveUpWidget,this));l.on("click",this.bbdesigner$.proxy(this.moveDownWidget,this));v.BoldBIDashboardListBox({height:"216px",width:"442px",fields:{text:"widgetName",value:"widgetName"},dataSource:this.getWidgetList(),showRoundedCorner:!0,cssClass:"boldbi-dashboarddesigner bbi-designer-param-assign bbi-designer-border bbi-dbrd-control bbi-designer-box-shadow",create:this.bbdesigner$.proxy(this.createScrollBar,this),select:this.bbdesigner$.proxy(this.disableUpandDownArrow,this)});this.disableArrowIcons()}},t.prototype.disableArrowIcons=function(){var n=BoldBIDashboard.isNullOrUndefined(this.upArrowIcon)?this.designerInstance.element.find("#"+this.designerId+"_combine_widget_up_icon_container"):this.upArrowIcon,t=BoldBIDashboard.isNullOrUndefined(this.downArrowIcon)?this.designerInstance.element.find("#"+this.designerId+"_combine_widget_down_icon_container"):this.downArrowIcon;n.addClass("bbi-container-widget-icon-disable").attr("disabled","disabled");t.addClass("bbi-container-widget-icon-disable").attr("disabled","disabled")},t.prototype.createScrollBar=function(){this.bbdesigner$(this.containerWrapper.find("#"+this.designerId+"_combine_widgets_display_container").BoldBIDashboardListBox("instance").listContainer).BoldBIDashboardScroller({enableTouchScroll:!1,autoHide:!0,buttonSize:this.designerInstance.scrollerSize.buttonSize,scrollerSize:this.designerInstance.scrollerSize.scrollSize,cssClass:"bbi-dbrd-designer-scroller bbi-dbrd-control"})},t.prototype.disableUpandDownArrow=function(n){n.isSelected&&(n.model.dataSource.length===1?this.disableArrowIcons():n.index===0&&n.model.dataSource.length>1?(this.upArrowIcon.addClass("bbi-container-widget-icon-disable").attr("disabled","disabled"),this.downArrowIcon.removeClass("bbi-container-widget-icon-disable").removeAttr("disabled")):n.index===n.model.dataSource.length-1?(this.downArrowIcon.addClass("bbi-container-widget-icon-disable").attr("disabled","disabled"),this.upArrowIcon.removeClass("bbi-container-widget-icon-disable").removeAttr("disabled")):(this.upArrowIcon.removeClass("bbi-container-widget-icon-disable").removeAttr("disabled"),this.downArrowIcon.removeClass("bbi-container-widget-icon-disable").removeAttr("disabled")))},t.prototype.moveUpWidget=function(n){if(BoldBIDashboard.isNullOrUndefined(this.bbdesigner$(n.currentTarget).attr("disabled"))){var t=this.designerInstance.element.find("#"+this.designerId+"_combine_widgets_display_container").data("BoldBIDashboardListBox");t.moveUp();this.swapData(t.model.selectedIndex,t.model.selectedIndex-1);this.disableUpandDownArrow({isSelected:!0,index:--t.model.selectedIndex,model:t.model})}this.updateWidgetPosition()},t.prototype.moveDownWidget=function(n){if(BoldBIDashboard.isNullOrUndefined(this.bbdesigner$(n.currentTarget).attr("disabled"))){var t=this.designerInstance.element.find("#"+this.designerId+"_combine_widgets_display_container").data("BoldBIDashboardListBox");t.moveDown();this.swapData(t.model.selectedIndex,t.model.selectedIndex+1);this.disableUpandDownArrow({isSelected:!0,index:++t.model.selectedIndex,model:t.model})}this.updateWidgetPosition()},t.prototype.swapData=function(n,t){if(n!==-1&&t!==-1){var i=this.designerInstance.element.find("#"+this.designerId+"_combine_widgets_display_container").data("BoldBIDashboardListBox"),r=i.model.dataSource[n];i.model.dataSource[n]=i.model.dataSource[t];i.model.dataSource[t]=r}},t.prototype.getWidgetList=function(){var r=[],t,i,n,u;if(!BoldBIDashboard.isNullOrUndefined(this.getCombineProperties().DraggedWidgetList))for(t=this.widgetHelper.getAllWidgets(),i=0;i<this.getCombineProperties().DraggedWidgetList.length;i++)for(n=0;n<t.length;n++)this.getCombineProperties().DraggedWidgetList[i]===t[n].getJson().UniqueId&&(u={widgetName:BoldBIDashboard.isNullOrUndefined(t[n].getJson().ContainerSettings.Title)?BoldBIDashboard.DashboardUtil.encodeText(t[n].getJson().UniqueName):BoldBIDashboard.DashboardUtil.encodeText(t[n].getJson().ContainerSettings.Title),uniqueId:t[n].getJson().UniqueId},r.push(u));return r},t.prototype.updateWidgetPosition=function(){var r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),u,t,i,n;for(r.getCombineProperties().DraggedWidgetList=[],u=this.designerInstance.element.find("#"+this.designerId+"_combine_widgets_display_container").data("BoldBIDashboardListBox"),t=this.widgetHelper.getAllWidgets(),i=0;i<u.model.dataSource.length;i++)for(n=0;n<t.length;n++)if(u.model.dataSource[i].widgetName===t[n].getJson().ContainerSettings.Title&&r.getJson().UniqueId===t[n].getJson().ContainerSettings.CombineWidgetId){r.getCombineProperties().DraggedWidgetList.push(t[n].getJson().UniqueId);BoldBIDashboard.Dashboard.WidgetHelper.updateWidgetContainerPosition(t[n],100+i);break}},t}(BoldBIDashboard.ContainerWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.CombineItem",InternalCombineItem,window);BoldBIDashboard.DashboardDesignerUtility.CombineItem.prototype.initialize();__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalLineReportItem=function(n){function t(t){var i=n.call(this,t,"Line","bbi-line-item")||this;return i.locale=null,i.bbdesigner$=i.designerInstance.bbdesigner$,i.widgetJson=new LineWidgetProperties(t),i.widgetJson.ContainerSettings.ShowHeader=!1,i.widgetJson.ContainerSettings.ViewData=!1,i.ShowSubtitle=!1,i.designerId=i.designerInstance._id,i.propertyPanel=t.modules.propertyPanel,i.isPropertyPanelRequired=!0,i.isVisualWidget=!1,i.isBackgroundInfoNeeded=!1,i.locale=t.getLocalizationContent(),i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.miscellaneous,GroupId:"1eac149f-bd28-428c-a303-a5fa5fae915f",Items:[{id:"ff5d806b-a97e-40e8-92ad-21384dc45a33",widgetName:"Line",widgetDisplayName:n.itemPanel.widgetTitle.separateline,cssClass:"bbi-widgeticon bbi-designer-widget-line",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.LineItem",searchCategory:["miscellaneous","line"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.separateline,description:n.itemPanel.widgetDescription.lineDesc,dataRequirement:n.itemPanel.widgetDataRequirements.lineDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.LineWidgetProperties",minRowSpan:2,minColSpan:5}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){BoldBIDashboard.isNullOrUndefined(this.widgetJson.ContainerSettings.WidgetPaddingInfo)&&(this.widgetJson.ContainerSettings.WidgetPaddingInfo=new WidgetPaddingInfo,this.widgetJson.ContainerSettings.WidgetPaddingInfo.AutoPadding=!0,this.widgetJson.ContainerSettings.WidgetPaddingInfo.Padding=this.getControlContainerPaddingValue());this.renderLineItem(t);this.IsRendered=!0;this.disableWidgetIcons()},t.prototype.getPropertyPanelItems=function(){return this.getPropertyPanelForLine()},t.prototype.updatePropertyChange=function(t,i,r,u){n.prototype.updatePropertyChange.call(this,t,i,r,u);this.updateLineItemPropertyChange(t,i,r,u)},t.prototype.canUseWidgetAsMaster=function(){return!1},t.prototype.getMobileViewHeight=function(){return this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.disableWidgetIcons=function(){var n=this.getContainerSettings();n.EnablePdfExport=!1;n.EnableCsvExport=!1;n.EnableExcelExport=!1;n.EnableImageExport=!1;n.ShowMaximize=!1;n.PinWidget=!1},t.prototype.updateLineItemPropertyChange=function(n,t,i,r){var o=!1,u,f,s,e;switch(n){case"VerticalOrientation":this.updateOrientationLine(i);break;case"Thickness":this.updateLineThickness(i);break;case"Padding":this.updateLinePadding(i);break;case"LineType":this.updateLineType(i);break;default:o=!0}if(!o){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(u=this.designPanelInstance.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)s=u[f],s.attr("id")===this.controlContainer.attr("id")&&(e=this.bbdesigner$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"Line",i));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","bbi-line-item",this.designerId+"_"+this.widgetJson.UniqueName,[name,i,t,r],[name,t,i,r])}},t.prototype.getPropertyPanelForLine=function(){return{Header:this.widgetJson.ContainerSettings.Title,Type:this.Type,Items:[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"VerticalOrientation",displayName:!BoldBIDashboard.isNullOrUndefined(this.locale.propertyPanel.lineWidgetProperties)&&!BoldBIDashboard.isNullOrUndefined(this.locale.propertyPanel.lineWidgetProperties.verticalOrientation)?this.locale.propertyPanel.lineWidgetProperties.verticalOrientation:"Vertical Orientation",value:!this.getLineProperties().IsHorizontal,itemType:"bool"},{name:"Thickness",isVisible:!0,displayName:!BoldBIDashboard.isNullOrUndefined(this.locale.propertyPanel.lineWidgetProperties)&&!BoldBIDashboard.isNullOrUndefined(this.locale.propertyPanel.lineWidgetProperties.lineWidgetThickness)?this.locale.propertyPanel.lineWidgetProperties.lineWidgetThickness:"Thickness",value:this.getLineProperties().Thickness,itemType:"float",decimalPlaces:0,minimum:1,maximum:50,unitType:"px"},{name:"Padding",isVisible:!0,displayName:!BoldBIDashboard.isNullOrUndefined(this.locale.propertyPanel.lineWidgetProperties)&&!BoldBIDashboard.isNullOrUndefined(this.locale.propertyPanel.lineWidgetProperties.lineWidgetPadding)?this.locale.propertyPanel.lineWidgetProperties.lineWidgetPadding:"Padding",value:this.getLineProperties().Padding,itemType:"float",decimalPlaces:0,minimum:1,maximum:50,unitType:"px"},{name:"LineType",displayName:!BoldBIDashboard.isNullOrUndefined(this.locale.propertyPanel.lineWidgetProperties)&&!BoldBIDashboard.isNullOrUndefined(this.locale.propertyPanel.lineWidgetProperties.lineWidgetType)?this.locale.propertyPanel.lineWidgetProperties.lineWidgetType:"Line Type",value:this.getLineProperties().LineType,itemType:"dropdown",valueList:["Solid","Dotted","Dashed"]},{name:"Color",callbackInstance:this,callbackMethod:"renderColorPalette",itemType:"object",elementType:"Line"}]}]}},t.prototype.renderColorPalette=function(n,t,i){var r,u;if(BoldBIDashboard.isNullOrUndefined(n))u=this.designerInstance.element.find("#"+this.designerId+"_default_color_").data("BoldBIDashboardColorPicker"),BoldBIDashboard.isNullOrUndefined(u)||u.option("value",this.getLineProperties().Color);else{i.color=this.getLineProperties().Color;var f=BoldBIDashboard.buildTag("div","",{height:"50px",width:"100%"},{id:this.designerId+"_color_scale_row_"}),e=BoldBIDashboard.buildTag("div","",{width:"202.1px",float:"left","margin-top":"8.5px","margin-left":"3px"}),o=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"});o.text(i.name);e.append(o);r=BoldBIDashboard.buildTag("div","",{width:"100px",display:"inline-block",float:"left","margin-top":"3px"});this.colorValueElement=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:this.designerId+"_default_color_"});r.append(this.colorValueElement);this.colorValueElement.BoldBIDashboardColorPicker({value:i.color,width:"100px",cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label",select:this.bbdesigner$.proxy(this.onColorSelect,this),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});f.append(e,r);n.append(f)}},t.prototype.onColorSelect=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0]));t.getLineProperties().Color=this.propertyPanel.getHexColorFromRGBA(n.RGBA);t.horizontalLineDiv.css("border-color",t.getLineProperties().Color);t.verticalLineDiv.css("border-color",t.getLineProperties().Color);this.designerInstance.modules.serialization.notifyChange()},t.prototype.renderLineItem=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));this.lineItem=BoldBIDashboard.buildTag("div.bbi-lineitem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder},{id:this.designerId+"lineitem"+this.widgetJson.UniqueName});try{this.horizontalLineElement=BoldBIDashboard.buildTag("div .bbi-line-horizontal-widget bbi-line-widget","",{},{id:this.designerId+"horizontal_lineelement"+this.widgetJson.UniqueName});this.horizontalLineDiv=BoldBIDashboard.buildTag("div .bbi-line-horizontal-div bbi-line-div","",{},{id:this.designerId+"horizontal_linediv"+this.widgetJson.UniqueName});this.verticalLineElement=BoldBIDashboard.buildTag("div .bbi-line-vertical-widget bbi-line-widget","",{},{id:this.designerId+"vertical_lineelement"+this.widgetJson.UniqueName});this.verticalLineDiv=BoldBIDashboard.buildTag("div .bbi-line-vertical-div bbi-line-div","",{},{id:this.designerId+"vertical_linediv"+this.widgetJson.UniqueName});this.controlContainer.data("widgetInstance",this);this.horizontalLineElement.append(this.horizontalLineDiv);this.lineItem.append(this.horizontalLineElement);this.verticalLineElement.append(this.verticalLineDiv);this.lineItem.append(this.verticalLineElement);this.contentContainer.append(this.lineItem);this.updateOrientationLine(!this.getLineProperties().IsHorizontal)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Line)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.updateOrientationLine=function(n){n?(this.horizontalLineElement.hide(),this.verticalLineElement.show(),this.getLineProperties().IsHorizontal=!1,this.verticalLineDiv.css("border-left-width",this.getLineProperties().Thickness+"px"),this.verticalLineElement.css({"padding-top":""+this.getLineProperties().Padding+"px","padding-bottom":""+this.getLineProperties().Padding+"px"}),this.verticalLineDiv.css("border-style",this.getLineProperties().LineType),this.verticalLineDiv.css("border-color",this.getLineProperties().Color)):(this.verticalLineElement.hide(),this.horizontalLineElement.show(),this.getLineProperties().IsHorizontal=!0,this.horizontalLineDiv.css("border-top-width",this.getLineProperties().Thickness+"px"),this.horizontalLineElement.css({"padding-left":""+this.getLineProperties().Padding+"px","padding-right":""+this.getLineProperties().Padding+"px"}),this.horizontalLineDiv.css("border-style",this.getLineProperties().LineType),this.horizontalLineDiv.css("border-color",this.getLineProperties().Color))},t.prototype.updateLineThickness=function(n){this.getLineProperties().Thickness=n;var t=this.getLineProperties().IsHorizontal?this.horizontalLineDiv:this.verticalLineDiv;t.css("border-width","0px");this.getLineProperties().IsHorizontal?t.css("border-top-width",n+"px"):t.css("border-left-width",n+"px")},t.prototype.updateLinePadding=function(n){this.getLineProperties().Padding=n;this.getLineProperties().IsHorizontal?this.horizontalLineElement.css({"padding-left":""+n+"px","padding-right":""+n+"px"}):this.verticalLineElement.css({"padding-top":""+n+"px","padding-bottom":""+n+"px"})},t.prototype.updateLineType=function(n){this.getLineProperties().LineType=n;var t=this.getLineProperties().IsHorizontal?this.horizontalLineDiv:this.verticalLineDiv;switch(n){case"Solid":t.css("border-style","solid");break;case"Dotted":t.css("border-style","dotted");break;case"Dashed":t.css("border-style","dashed");break;default:t.css("border-style","solid")}},t.prototype.dispose=function(){this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Line);n.prototype.dispose.call(this)},t.prototype.getLineProperties=function(){return this.widgetJson},t}(BoldBIDashboard.Dashboard.Widget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.LineItem",InternalLineReportItem,window);BoldBIDashboard.DashboardDesignerUtility.LineItem.prototype.initialize();__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalTabbedItem=function(n){function t(t){var i=n.call(this,t,"TabbedWidget","bbi-tab-item")||this;return i.locale=null,i.widgetTab=null,i.tabObj=null,i.tabListContainerWrapper=null,i.tabListUpArrowIcon=null,i.tabListDownArrowIcon=null,i.widgetListContainerWrapper=null,i.widgetListUpArrowIcon=null,i.widgetListDownArrowIcon=null,i.addDiv=null,i.deleteDiv=null,i.editDiv=null,i.currentTab="",i.propertyPanel=null,i.autoTimer=null,i.resizeTimer=null,i.timerCount=null,i.designId=i.designerInstance._id,i.locale=t.getLocalizationContent(),i.widgetJson=new TabbedProperties(t),i.widgetJson.ContainerSettings.ShowHeader=!1,i.ShowSubtitle=!1,i.bbdesigner$=i.designerInstance.bbdesigner$,i.isInteraction=!0,i.isTabRemoved=!1,i.isTabInteraction=!0,i.propertyPanel=i.designerInstance.modules.propertyPanel,i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.miscellaneous,GroupId:"f7c2211d-9335-4fa9-8e04-0ce39a2be76f",Items:[{id:"c9101dde-a306-46d0-8b19-68416b036cbe",widgetName:n.itemPanel.widgetTitle.tabbedWidget,widgetDisplayName:n.itemPanel.widgetTitle.tabbedWidget,cssClass:"bbi-widgeticon bbi-designer-widget-tabbed",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.TabbedItem",searchCategory:["text","label","miscellaneous","tabbed"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.tabbedWidget,description:n.itemPanel.widgetDescription.tabWidgetDesc,dataRequirement:n.itemPanel.widgetDataRequirements.combineWidgetDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.TabbedProperties",minRowSpan:8,minColSpan:8}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},Object.defineProperty(t.prototype,"hasMultipleRegion",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.setContainerDefaultProperties();this.controlContainer.data("widgetInstance",this);this.contentContainer.find(".widget-not-configured-text ").hide();this.addToCacheCollection();this.renderTabbedWidget();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.TabWidget)},t.prototype.applyWidgetTheme=function(){this.applyHeaderColorAndFont()},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.designpreview?(this.tabObj.showCloseButton=!1,this.tabObjSelection(Number(this.getTabbedProperties().ActiveTabId))):this.designerInstance.isDesignMode()&&(this.tabObj.showCloseButton=!0,this.tabObjSelection(Number(this.currentTab)));BoldBIDashboard.isNullOrUndefined(this.tabObj)||(this.tabControlRefresh(),this.updateContentHeight());this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.designpreview?this.tabObj.hideTab(this.tabObj.items.length-1):this.designerInstance.isDesignMode()&&this.tabObj.hideTab(this.tabObj.items.length-1,!1);var i="#"+this.designId+this.widgetJson.UniqueName+this.getTabbedProperties().TabInfo[Number(this.currentTab)].UniqueText;BoldBIDashboard.Dashboard.WidgetContainerHelper.updateNoNecessaryDataContainerSize(this.controlContainer.find(i).find(".bbi-nodata-tab-content"),!1,this);this.addResizeAttribute();this.resizeForActiveTab();this.selectAllTabsAfterRefresh()},t.prototype.showActiveRegion=function(n){this.getTabbedProperties().TabInfo.length<=n&&(n=this.getTabbedProperties().TabInfo.length-1);this.currentTab=n.toString();this.isTabInteraction=!1;this.tabObjSelection(Number(this.currentTab));this.isTabInteraction=!0;this.resizeForActiveTab()},t.prototype.onWidgetRefresh=function(){this.addResizeAttribute();var n="#"+this.designId+this.widgetJson.UniqueName+"tabHeader_"+this.getTabbedProperties().TabInfo[Number(this.currentTab)].UniqueText;this.widgetTab.find(n).removeAttr("should-resize")},t.prototype.loadingIndicatorForActiveTab=function(){for(var n=0;n<this.getTabbedProperties().TabInfo.length;n++){var t=this.getTabbedProperties().TabInfo[n].UniqueText,i=this.designerInstance.designerPanel,r="#"+this.designId+this.widgetJson.UniqueName+t;i.appendSpinningWidget(this.controlContainer.find(r),this.Type)}},t.prototype.showLoadingIndicator=function(){for(var i=function(t){var i=n.getTabbedProperties().TabInfo[t].UniqueText,f=n.getAllWidgets(n.getTabbedProperties().WidgetsList.filter(function(n){return n.TabId===i})),r,u;f.length>0&&(r=n.designerInstance.designerPanel,u="#"+n.designId+n.widgetJson.UniqueName+i,r.showLoadingIndicator(n.ControlContainer.find(u)),n.checkWhetherAllWidgetsAreRendered(i))},n=this,t=0;t<this.getTabbedProperties().TabInfo.length;t++)i(t)},t.prototype.hideLoadingIndicator=function(n){var t=this.designerInstance.designerPanel,i="#"+this.designId+this.widgetJson.UniqueName+n;t.hideLoadingIndicator(this.ControlContainer.find(i))},t.prototype.checkWhetherAllWidgetsAreRendered=function(n){var i=!1,t=1;this.autoTimer[n]=setInterval(function(r){try{t=t+1;i=r.isAllWidgetsRenderedInActiveTab(n);(i||t>=50)&&(r.hideLoadingIndicator(n),clearInterval(r.autoTimer[n]),delete r.autoTimer[n])}catch(u){r.hideLoadingIndicator(n);clearInterval(r.autoTimer[n]);delete r.autoTimer[n]}},500,this)},t.prototype.isAllWidgetsRenderedInActiveTab=function(n){for(var i=this.getAllWidgets(this.getTabbedProperties().WidgetsList.filter(function(t){return t.TabId===n})),r=!0,t=0;t<i.length;t++)if(BoldBIDashboard.isNullOrUndefined(i[t])?r=!1:BoldBIDashboard.Dashboard.WidgetHelper.isDataWidget(i[t])?i[t].isNecessaryDataConfigured()&&!i[t].IsRendered&&(r=!1):i[t].IsRendered||(r=!1),!r)break;return r},t.prototype.tabControlRefresh=function(){this.tabObj.refresh();this.hideTabArea()},t.prototype.selectAllTabsAfterRefresh=function(){for(var n=0;n<this.getTabbedProperties().TabInfo.length;n++)n!==Number(this.currentTab)&&(this.isTabInteraction=!1,this.tabObjSelection(n));this.isTabInteraction=!1;this.tabObjSelection(Number(this.currentTab));this.isTabInteraction=!0},t.prototype.addResizeAttribute=function(){for(var t,n=0;n<this.getTabbedProperties().TabInfo.length;n++)t="#"+this.designId+this.widgetJson.UniqueName+"tabHeader_"+this.getTabbedProperties().TabInfo[n].UniqueText,this.widgetTab.find(t).attr("should-resize","true")},t.prototype.updatePropertyChange=function(t,i,r,u){n.prototype.updatePropertyChange.call(this,t,i,r,u);switch(t){case"Name":this.widgetJson.ContainerSettings.Title=r;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,r);break;case"HeaderColor":this.applyHeaderColorAndFont(r);break;case"HeaderFontSize":this.getTabbedProperties().HeaderFontSize=r;this.applyHeaderColorAndFont();break;case"ActiveTab":this.updateTheActiveTabId(r)}},t.prototype.updateTheActiveTabId=function(n){if(this.isTabInteraction){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),i=t.getTabbedProperties().TabInfo.filter(function(t){return t.UniqueText===n});BoldBIDashboard.isNullOrUndefined(i)||(t.currentTab=t.getTabbedProperties().ActiveTabId=t.getTabbedProperties().TabInfo.indexOf(i[0]).toString(),t.isTabInteraction=!1,t.tabObjSelection(Number(t.currentTab)),t.resizeForActiveTab(),t.isTabInteraction=!0)}this.isTabInteraction=!0},t.prototype.applyHeaderColorAndFont=function(n){var f=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode(),r=this.getTabbedProperties().HeaderColor=="#0565FF"?this.designerInstance.modules.themeHelper.getTabHeaderSelectionColor():this.getTabbedProperties().HeaderColor,t;BoldBIDashboard.isNullOrUndefined(n)||(r=n,this.getTabbedProperties().HeaderColor=n);t=document.getElementById(this.designId+"_"+this.widgetJson.UniqueName+"_style");BoldBIDashboard.isNullOrUndefined(t)&&(t=document.createElement("style"),t.id=this.designId+"_"+this.widgetJson.UniqueName+"_style",document.head.appendChild(t));var i=this.designerInstance.modules.themeHelper.getTabHeaderFont(),e=this.designerInstance.modules.themeHelper.getTabHeaderNormalColor(),u=f&&this.getTabbedProperties().HeaderFontSize==12?i.size:this.getTabbedProperties().HeaderFontSize+"px",o="{id} .e-toolbar-item.e-template.e-active .bbdesigner-dbrd-tab-item-header .bbdesigner-dbrd-tab-item-header-text{ color:"+r+"!important;}{id} .e-toolbar-item.e-template.e-active .bbdesigner-dbrd-tab-item-header .bbdesigner-dbrd-tab-item-header-text{font-size:"+u+"!important;font-family:"+i.family+"!important\nfont-weight:"+i.weight+";}",s="{id} .e-toolbar-item.e-template .bbdesigner-dbrd-tab-item-header .bbdesigner-dbrd-tab-item-header-text{ color:"+e+"!important;\nfont-size:"+u+";\nfont-family:"+i.family+";\nfont-weight:"+i.weight+";}",h="{id} .e-toolbar-items .e-indicator.e-ignore{background:"+r+"!important;}";t.innerHTML=o.replace(new RegExp("{id}","g"),"#"+this.designId+"_"+this.widgetJson.UniqueName)+h.replace(new RegExp("{id}","g"),"#"+this.designId+"_"+this.widgetJson.UniqueName)+s.replace(new RegExp("{id}","g"),"#"+this.designId+"_"+this.widgetJson.UniqueName);this.updateIndicator()},t.prototype.updateIndicator=function(){var t=this.ControlContainer.find(".e-toolbar-item"),n=this.ControlContainer.find(".e-indicator");n.css("width",parseInt(t.css("width"),10)-(parseInt(n.css("margin-left"),10)+parseInt(n.css("margin-right"),10)))},t.prototype.canUseWidgetAsMaster=function(){return!1},t.prototype.dispose=function(){var i,t;if(!BoldBIDashboard.isNullOrUndefined(this.autoTimer))for(i=Object.keys(this.autoTimer),t=0;t<i.length;t++)clearInterval(this.autoTimer[i[t]]);clearTimeout(this.autoTimer);this.disposeTabContent();this.tabItemDispose();n.prototype.dispose.call(this)},t.prototype.getPropertyPanelItems=function(){return this.tabbedWidgetPropertyItems()},t.prototype.showAlert=function(n,t,i){this.getTabbedProperties().WidgetsList.filter(function(n){return n.TabId!==""&&n.WidgetIds.length>0&&n.WidgetIds.filter(function(n){return n!==""})}).length>0?this.designerInstance.modules.util.alertDialog(this.locale.tabWidget.deleteWidget,this.locale.tabWidget.deleteWidgetAlertMsg,IconType.question,AlertType.Confirm,!1,"",{instance:this,method:"deleteWidget",dataInfo:{data:i}}):(this.dispose(),this.designerInstance.deleteWidgetfromCollection(this.Name),this.designerInstance.designerPanel.updateWidgetOnRemove(i),this.designerInstance.modules.serialization.notifyChange())},t.prototype.appendWidget=function(n,t){var i=BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(t)?this.getTabbedProperties().TabInfo[Number(this.currentTab)].UniqueText:t,r="#"+this.designId+this.widgetJson.UniqueName+i;this.controlContainer.find(r).append(n)},t.prototype.updateChildList=function(n,t){for(var u=BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n)&&BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(t),r=this.getTabbedProperties().WidgetsList,i=0;i<r.length;i++)if(u)this.getTabbedProperties().WidgetsList[i].WidgetIds=[];else if(r[i].TabId===t){this.getTabbedProperties().WidgetsList[i].WidgetIds.push(n);break}},t.prototype.positionChildWidgetsOnUndo=function(n){for(var r,i="",u=this.getTabbedProperties().WidgetsList,t=0;t<u.length;t++)u[t].WidgetIds.filter(function(t){return t===n.getJson().UniqueId}).length>0&&(i=t.toString());BoldBIDashboard.DashboardUtil.isEmptyString(i)||(r="#"+this.designId+this.widgetJson.UniqueName+this.getTabbedProperties().TabInfo[Number(i)].UniqueText,BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(this.controlContainer.find(r).find(".bbi-nodata-tab-content")),this.controlContainer.find(r).append(n.ControlContainer))},t.prototype.positionChildWidget=function(t,i,r,u){if(this.getTabbedProperties().HideHeader){n.prototype.positionChildWidget.call(this,t,i,r,u);return}t.ControlContainer.css({left:i.left-r,top:i.top+u})},t.prototype.switchTab=function(n){var t=this.getTabbedProperties().TabInfo.filter(function(t){return t.UniqueText===n}),i;t.length>0&&(i=this.getTabbedProperties().TabInfo.indexOf(t[0]),this.tabObjSelection(i))},t.prototype.updateChildCellRows=function(n){return n.Row+=2,n},t.prototype.getChildWidgetPosition=function(t){if(this.getTabbedProperties().HideHeader)return n.prototype.getChildWidgetPosition.call(this,t);var i=JSON.parse(JSON.stringify(t.CellInfo)),r=this.designerInstance.modules.containerTypeWidgetHelper.getContainerWidget(t);if(BoldBIDashboard.isNullOrUndefined(r))return i.Row=i.Row+2,i;while(!BoldBIDashboard.isNullOrUndefined(r))i.Column+=r.CellInfo.Column,i.Row+=r.CellInfo.Row,r=t.designerInstance.modules.containerTypeWidgetHelper.getContainerWidget(r);return i.Row=i.Row+2,i},t.prototype.isWidgetItemRestricted=function(n,t,i,r){return t.Row<n.Row+2||t.Row+t.RowSpan>n.Row+n.RowSpan||t.Column<n.Column||t.Column+t.ColumnSpan>n.Column+n.ColumnSpan?BoldBIDashboard.isNullOrUndefined(r)?!0:!(i.ControlContainer.parents("#"+r.ControlContainer[0].id).length>0):!1},t.prototype.updateContainerPosition=function(n){var o=this.designerInstance.isMobileLayout(),t=10,s=o?this.designerInstance.element.find("#"+this.designerInstance._id+"_designSurfaceContainer").height():this.controlContainer.height()-36,h=this.designerInstance.designerPanel.rowsLength>this.designerInstance.designerPanel.singlePageRowLength,c=this.designerInstance.designerPanel.getWidgetItemHeight(this.CellInfo.RowSpan-2),f=this.designerInstance.designerPanel.getWidgetItemHeight(n.CellInfo.RowSpan),l=(s-t)*(f/c),a=this.designerInstance.designerPanel.getWidgetItemWidth(this.CellInfo.ColumnSpan),e=this.designerInstance.designerPanel.getWidgetItemWidth(n.CellInfo.ColumnSpan),r=this.designerInstance.modules.Mode.designCanvas.width()-(h?0:t),i,u;r=r*(e/a);i=this.validateCombinewidgetMorethan24Rows(this.designerInstance.model.dashboardFromData.isControl);u=i?this.designerInstance.designerPanel.getWidgetItemPosition(n.CellInfo.Row,n.CellInfo.Column):this.designerInstance.designerPanel.getWidgetItemPosition(Math.floor(n.CellInfo.Row*(24/this.CellInfo.RowSpan)),Math.floor(n.CellInfo.Column*(48/this.CellInfo.ColumnSpan)));n.ControlContainer.css({left:u.left-this.designerInstance.designerPanel.cellMargin,top:u.top-this.designerInstance.designerPanel.cellMargin,height:i?f:l-t,width:i?e:r-t});n.updateSize()},t.prototype.updateChildForMobileMode=function(n){var i=this.ControlContainer.width()/(this.CellInfo.ColumnSpan*2),t=this.ControlContainer.height()/(this.CellInfo.RowSpan*2);n.ControlContainer.css({height:n.CellInfo.RowSpan*t*2,width:n.CellInfo.ColumnSpan*i*2,left:n.CellInfo.Column*i*2,top:n.CellInfo.Row*t*2+t})},t.prototype.getMobileViewHeight=function(){return.25*this.CellInfo.RowSpan*this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.updateCellForBottomResize=function(n){return n.RowSpan=n.RowSpan-2,n},t.prototype.addToCacheCollection=function(){var n={uniqueId:this.widgetJson.UniqueId};this.designerInstance.addToWidgetCacheCollection(this.widgetJson.UniqueName,n,this.designerInstance.isDesignMode())},t.prototype.addLatestCache=function(){var n={uniqueId:this.widgetJson.UniqueId,activeTab:this.currentTab};this.designerInstance.addToWidgetCacheCollection(this.widgetJson.UniqueName,n,this.designerInstance.isDesignMode())},t.prototype.revertInteractionForDesigner=function(n){if(!BoldBIDashboard.isNullOrUndefined(n.activeTab)){var t=n.activeTab;Number(this.currentTab)!==Number(t)&&(this.addResizeAttribute(),this.showActiveRegion(t))}},t.prototype.getContainerRegions=function(){return this.getTabbedProperties().TabInfo.length},t.prototype.deleteWidget=function(n,t){var e,f,r,o;if(n){var s=BoldBIDashboardDesigner.editManager.isPerformAction,u=this.getAllWidgets(this.getTabbedProperties().WidgetsList),i=[];for(i.push(this.widgetJson),e=this.widgetJson.UniqueId,f=t.data,r=0;r<u.length;r++)i.push(u[r].getJson());o=this.designerInstance.modules.containerTypeWidgetHelper.getContainerIdsForChildWidgets(i,this.getJson());BoldBIDashboardDesigner.editManager.isPerformAction=!0;this.updateChildWidget(u,!1);this.dispose();BoldBIDashboardDesigner.editManager.isPerformAction=s;this.designerInstance.deleteWidgetfromCollection(this.Name);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(f))?this.designerInstance.designerPanel.updateWidgetOnRemove(null):this.designerInstance.designerPanel.updateWidgetOnRemove(f);BoldBIDashboardDesigner.editManager.isPerformAction||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderCombineWidgetOnUndoAction","","",[i,e,o],null);this.designerInstance.modules.serialization.notifyChange()}},t.prototype.updateWidgetsInCombineWidget=function(n,t){for(var r,i,f=this.getTabbedProperties().WidgetsList,u=0;u<f.length;u++)for(r=f[u],i=0;i<r.WidgetIds.length;i++)if(n===r.WidgetIds[i]){r.WidgetIds[i]=t.UniqueId;break}},t.prototype.clearWidgetList=function(){for(var t=this.getTabbedProperties().WidgetsList,n=0;n<t.length;n++)t[n].WidgetIds=[]},t.prototype.exportControl=function(){for(var n,t=1;t<this.getTabbedProperties().TabInfo.length;t++)this.selectTabWithoutInteraction(t),n=this.controlContainer.clone(),n.attr("id",n.attr("id")+"_controlExport"+t),n.css("position","relative"),n.css("margin-top",this.designerInstance.modules.Mode.designCanvas.css("margin-top")),this.designerInstance.modules.Mode.designCanvas.append(n);this.getTabbedProperties().TabInfo.length>1&&(this.selectTabWithoutInteraction(0),this.ControlContainer.css("position","relative"),this.designerInstance.modules.Mode.designCanvas.css("overflow","auto"))},t.prototype.selectTabWithoutInteraction=function(n){this.isTabInteraction=!1;this.tabObjSelection(n);this.isTabInteraction=!0},t.prototype.tabItemDispose=function(){BoldBIDashboard.isNullOrUndefined(this.tabObj)||this.tabObj.destroy();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.TabWidget)},t.prototype.disposeTabContent=function(){for(var t,n=0;n<this.getTabbedProperties().TabInfo.length;n++)t=this.widgetTab.find("#e-content-"+this.widgetTab.attr("id")+"_"+n),t.remove()},t.prototype.setContainerDefaultProperties=function(){var t=n.prototype.getContainerSettings.call(this);t.EnableExcelExport=t.EnableCsvExport=!1;t.ViewData=!1;t.PinWidget=!1},t.prototype.renderTabbedWidget=function(){var t,i,r,n,u;if(BoldBIDashboard.isNullOrUndefined(this.widgetTab)||this.controlContainer.find(this.widgetTab).length===0){for(this.widgetTab=BoldBIDashboard.buildTag("div.bbi-dbrd-tab-widget","",{},{id:this.designId+"_widget_tab_wrapper"+this.widgetJson.UniqueName}),this.getTabbedProperties().TabInfo.length===0&&(t=new TabInfo,t.DisplayText="Tab1",t.UniqueText="Tab1",this.getTabbedProperties().TabInfo.push(t)),this.newContentDiv(0),this.widgetTab.insertAfter(this.ControlContainer.find(".bbi-dbrd-control-container-wrapper").first()),i=[{header:{text:this.getHeaderTemplate(0)},content:"#"+this.designId+this.widgetJson.UniqueName+this.getTabbedProperties().TabInfo[0].UniqueText}],this.designerInstance.isDesignMode()&&(i=[{header:{text:this.getHeaderTemplate(0)},content:"#"+this.designId+this.widgetJson.UniqueName+this.getTabbedProperties().TabInfo[0].UniqueText},{header:{text:"Add Tab",iconCss:"bbi-add-icon"},content:""}]),this.tabObj=new ejdashboard.navigations.Tab({items:i,selecting:this.bbdesigner$.proxy(this.beforeTabActive,this),selected:this.bbdesigner$.proxy(this.onTabActive,this),removing:this.bbdesigner$.proxy(this.onTabRemove,this),removed:this.bbdesigner$.proxy(this.onTabRemoved,this),animation:{previous:{effect:"None"},next:{effect:"None"}},selectedItem:0,heightAdjustMode:"Auto",overflowMode:"Scrollable",height:"100%"}),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.tabObj.showCloseButton=!0),this.tabObj.appendTo(this.widgetTab[0]),this.hideTabArea(),this.updateContentHeight(),this.widgetTab.find(".bbi-add-icon").parent().addClass("bbi-addDiv"),this.getTabbedProperties().WidgetsList.length===0&&(r=new WidgetList,r.TabId=this.getTabbedProperties().TabInfo[0].UniqueText,this.getTabbedProperties().WidgetsList.push(r)),n=1;n<this.getTabbedProperties().TabInfo.length;n++)this.addTabs(n),this.isTabInteraction=!1,this.tabObjSelection(n),this.isTabInteraction=!0;BoldBIDashboard.Dashboard.WidgetContainerHelper.updateNoNecessaryDataContainerSize(this.ControlContainer,!0,this);this.updateDefaultMsg();this.isTabInteraction=!1;BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(this.getTabbedProperties().ActiveTabId)&&(this.getTabbedProperties().ActiveTabId="0");this.currentTab=this.getTabbedProperties().ActiveTabId;this.updateActiveTabForExport();this.applyHeaderColorAndFont();this.tabObjSelection(Number(this.currentTab));u="#"+this.designId+this.widgetJson.UniqueName+"tabHeader_"+this.getTabbedProperties().TabInfo[Number(this.currentTab)].UniqueText;this.widgetTab.find(u).removeAttr("should-resize");this.isTabInteraction=!0;this.loadingIndicatorForActiveTab()}else this.widgetTab.css("display","block")},t.prototype.tabObjSelection=function(n){var t=this.tabObj.initRender;this.tabObj.initRender=!0;this.tabObj.select(n);this.tabObj.initRender=t},t.prototype.updateActiveTabForExport=function(){var i,n,t;if(!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.dashboardFromData)&&this.designerInstance.model.dashboardFromData.loadFromData)for(i=JSON.parse(this.designerInstance.model.dashboardFromData.widgetData),n=0;n<i.length;n++)if(t=i[n],t.Name===this.widgetJson.UniqueName&&!BoldBIDashboard.isNullOrUndefined(t.ViewerTimeCache)){this.currentTab=t.ViewerTimeCache.activeTab;break}},t.prototype.getHeaderTemplate=function(n){return'<span class ="bbdesigner-dbrd-tab-item-header"><span class ="bbdesigner-dbrd-tab-item-header-text" should-resize = true data-tabid = "'+this.getTabbedProperties().TabInfo[n].UniqueText+'" id="'+this.designId+this.widgetJson.UniqueName+"tabHeader_"+this.getTabbedProperties().TabInfo[n].UniqueText+'">'+this.getTabbedProperties().TabInfo[n].DisplayText+'<\/span><input class ="e-textbox bbdesigner-dbrd-tab-item-header-edit" style="display: none"><\/span>'},t.prototype.renameAndUpdateTab=function(n,t){var r="(?<=>)("+this.getTabbedProperties().TabInfo[n].DisplayText+")(?=<)",u=new RegExp(r),i=BoldBIDashboard.DashboardUtil.encodeText(t.val());this.tabObj.items[n].header.text=this.tabObj.items[n].header.text.replace(u,i);this.getTabbedProperties().TabInfo[n].DisplayText=i;this.designerInstance.modules.serialization.notifyChange();this.tabControlRefresh();this.updateContentHeight()},t.prototype.newContentDiv=function(n){var t=BoldBIDashboard.buildTag("div.bbi-content-div "+this.designId,"",{},{id:this.designId+this.widgetJson.UniqueName+this.getTabbedProperties().TabInfo[n].UniqueText}),i=BoldBIDashboard.buildTag("div.bbi-nodata-tab-content","",{height:"100%",width:"100%"},{});t.append(i);this.controlContainer.append(t);this.showDefaultMsg(i)},t.prototype.updateContentHeight=function(){this.getTabbedProperties().HideHeader?this.widgetTab.find(".e-content.e-lib").css("height","100%"):this.widgetTab.find(".e-content.e-lib").css({height:"calc(100% - "+this.widgetTab.find(".e-tab-header").css("height")+")"});this.widgetTab.find(".bbi-add-icon").parent().addClass("bbi-addDiv")},t.prototype.updateDefaultMsg=function(){for(var i=function(t){var i=n.getTabbedProperties().TabInfo[t].UniqueText,r=n.getTabbedProperties().WidgetsList.filter(function(n){return n.TabId===i})[0];(BoldBIDashboard.isNullOrUndefined(r)||r.WidgetIds.length===0)&&n.showDefaultMsg(n.widgetTab.find("#"+n.designId+n.widgetJson.UniqueName+i))},n=this,t=0;t<this.getTabbedProperties().TabInfo.length;t++)i(t)},t.prototype.onTabActive=function(n){if(this.isTabInteraction){if(!this.isTabRemoved&&this.currentTab!==n.selectedIndex){this.controlContainer.find(".bbi-dbrditem").addClass("bbi-tab-inactive");var t=this.bbdesigner$(n.selectedItem);t.find(".bbi-add-icon").length>0&&(this.tabAdding(n.selectedIndex),this.selectFirstIndexOfTabOrderListing());t.find(".bbi-add-icon").length===0&&this.updateTabAfterAdding(n.selectedIndex)}this.isTabRemoved&&(this.isTabInteraction=!1,this.tabObjSelection(Number(this.currentTab)),this.updateWidgetListOnSelect(0),this.isTabRemoved=!1)}else this.isTabInteraction=!0},t.prototype.beforeTabActive=function(n){n.isSwiped&&(n.cancel=!0)},t.prototype.tabAdding=function(n){var t=this.tabObj.items.length;(BoldBIDashboard.isNullOrUndefined(this.getTabbedProperties().WidgetsList[t])||this.getTabbedProperties().WidgetsList.length-1<t)&&(this.addTabs(this.tabObj.itemIndexArray.length-1,n,!0),this.propertyPanel.isVisible()&&this.refreshPropertyPanel())},t.prototype.updateTabAfterAdding=function(n){this.removeInactiveTabClass();this.currentTab=n.toString();this.resizeForActiveTab();this.updateActiveTabDrpDown();this.designerInstance.modules.serialization.notifyChange()},t.prototype.refreshPropertyPanel=function(){this.updatePropertyPanel("TabbedWidget_BasicSettings","widgetorder",!1);this.updatePropertyPanel("TabbedWidget_BasicSettings","taborder",!0);this.disableEnableWidgetListIcons(!0)},t.prototype.onTabRemove=function(n){var t,r,u,i;!this.isTabRemoved&&this.isInteraction&&this.tabObj.items.length>2&&(t=this.bbdesigner$(n.removedItem).find(".bbdesigner-dbrd-tab-item-header-text").attr("data-tabid"),this.getTabbedProperties().WidgetsList.filter(function(n){return n.TabId===t}).length>0?(r=this.getTabbedProperties().WidgetsList.filter(function(n){return n.TabId===t})[0].WidgetIds,r.length===0||r.filter(function(n){return n!==""}).length===0?(n.cancel=!0,i=this.getTabbedProperties().TabInfo.filter(function(n){return n.UniqueText===t})[0],this.getTabbedProperties().TabInfo.splice(this.getTabbedProperties().TabInfo.indexOf(i),1),this.isInteraction=!1,this.designerInstance.modules.serialization.notifyChange(),this.tabObj.removeTab(n.removedIndex),this.isTabRemoved=!1,this.updateListBoxOnRemove(n.removedIndex)):(u={tabId:t,removedIndex:n.removedIndex},this.designerInstance.modules.util.alertDialog(this.locale.tabWidget.deleteTab,this.locale.tabWidget.deleteTabAlertMsg,IconType.question,AlertType.Confirm,!1,"",{instance:this,method:"updateDeletedWidgets",dataInfo:{data:u}}),n.cancel=!0)):(n.cancel=!0,i=this.getTabbedProperties().TabInfo.filter(function(n){return n.UniqueText===t})[0],this.getTabbedProperties().TabInfo.splice(this.getTabbedProperties().TabInfo.indexOf(i),1),this.isInteraction=!1,this.designerInstance.modules.serialization.notifyChange(),this.tabObj.removeTab(n.removedIndex),this.isTabRemoved=!1,this.updateListBoxOnRemove(n.removedIndex)),n.removedIndex<=this.tabObj.selectedItem&&(n.removedIndex<=Number(this.getTabbedProperties().ActiveTabId)&&(this.getTabbedProperties().ActiveTabId=(Number(this.currentTab)-1).toString()),this.currentTab=(Number(this.currentTab)-1).toString(),this.updateActiveTabDrpDown(),this.tabObj.selectedItem=this.tabObj.selectedItem-1,this.designerInstance.modules.serialization.notifyChange()));this.tabObj.items.length===2&&(n.cancel=!0);this.isInteraction=!0},t.prototype.updateListBoxOnRemove=function(){if(this.propertyPanel.isVisible()){var n=this.designerInstance.element.find("#"+this.designId+"_taborder_display_container").data("BoldBIDashboardListBox");BoldBIDashboard.isNullOrUndefined(n)||(n.option("dataSource",this.getTabbedProperties().TabInfo),n.refresh(),n.model.dataSource.length===1&&this.disableEnableDeleteIcon(!0))}},t.prototype.onTabRemoved=function(){this.isTabRemoved=!0;this.designerInstance.designerPanel.selectedReportItems=[this.controlContainer]},t.prototype.updateDeletedWidgets=function(n,t){var i,r;n&&(i=this.getTabbedProperties().WidgetsList.filter(function(n){return n.TabId===t.data.tabId}),!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0&&this.updateChildWidget(this.getAllWidgets(i),!1),r=this.getTabbedProperties().TabInfo.filter(function(n){return n.UniqueText===t.data.tabId})[0],this.getTabbedProperties().TabInfo.splice(this.getTabbedProperties().TabInfo.indexOf(r),1),this.isInteraction=!1,this.tabObj.removeTab(t.data.removedIndex),this.designerInstance.modules.serialization.notifyChange(),this.updateListBoxOnRemove(t.data.removedIndex),this.updateActiveTabDrpDown())},t.prototype.removeInactiveTabClass=function(){var n="#"+this.designId+this.widgetJson.UniqueName+this.getTabbedProperties().TabInfo[Number(this.currentTab)].UniqueText,t=this.controlContainer.find(n);t.find(".bbi-dbrditem").removeClass("bbi-tab-inactive")},t.prototype.addTabs=function(n,t,i){var r,u,e,f,o,s,h,c;if(!BoldBIDashboard.isNullOrUndefined(t))for(r=0,u=0;u<this.getTabbedProperties().TabInfo.length;u++)if(e=Number(this.getTabbedProperties().TabInfo[u].UniqueText.split("Tab")[1]),r=e>r?e:r,u===this.getTabbedProperties().TabInfo.length-1){f=new TabInfo;f.DisplayText=f.UniqueText="Tab"+(r+1);this.getTabbedProperties().TabInfo.push(f);break}this.newContentDiv(n);o=!1;s=this.controlContainer.find(".e-toolbar-pop");s.length>0&&s.hasClass("e-popup-open")&&(o=!0);h={header:{text:this.getHeaderTemplate(n)},content:"#"+this.designId+this.widgetJson.UniqueName+this.getTabbedProperties().TabInfo[n].UniqueText};o?(this.tabObj.addTab([h],t),this.tabControlRefresh(),this.updateContentHeight()):(this.tabObj.addTab([h],n),!BoldBIDashboard.isNullOrUndefined(i)&&i&&(BoldBIDashboard.isNullOrUndefined(this.tabObj)||(this.tabControlRefresh(),this.updateContentHeight(),this.selectTabWithoutInteraction(n))));BoldBIDashboard.isNullOrUndefined(t)?BoldBIDashboard.Dashboard.WidgetContainerHelper.updateNoNecessaryDataContainerSize(this.ControlContainer,!0,this):(c="#"+this.designId+this.widgetJson.UniqueName+this.getTabbedProperties().TabInfo[n].UniqueText,BoldBIDashboard.Dashboard.WidgetContainerHelper.updateNoNecessaryDataContainerSize(this.ControlContainer.find(c).find(".bbi-nodata-tab-content"),!0,this))},t.prototype.switchTabBasedOnId=function(n){var t=this.widgetTab.data("BoldBIDashboardTab");t.showItem(n)},t.prototype.updateWidgetsListOnTabWidget=function(n,t,i,r){var e=this,o=n.getJson().UniqueId,s,f,u,h,c,l,a;if(!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(r)){this.getTabbedProperties().WidgetsList.filter(function(n){return n.TabId===r})[0].WidgetIds.push(o);return}i?(this.getTabbedProperties().WidgetsList.forEach(function(n,t){var i=e.getTabbedProperties().WidgetsList[t],r=i.WidgetIds.filter(function(n){return n===o});r.length>0&&(h=t,l=i.WidgetIds.indexOf(r[0]),c=i.TabId)}),BoldBIDashboard.isNullOrUndefined(h)||this.getTabbedProperties().WidgetsList[h].WidgetIds.splice(l,1),this.getTabbedProperties().WidgetsList[h].WidgetIds.length===0&&(a=this.controlContainer.find("#"+this.designId+this.widgetJson.UniqueName+c).find(".bbi-nodata-tab-content"),this.showDefaultMsg(a))):(s=new WidgetList,s.TabId=this.getTabbedProperties().TabInfo[t].UniqueText,s.WidgetIds[0]=o,this.getTabbedProperties().WidgetsList.forEach(function(n,t){var r,i,h;n.TabId===s.TabId&&(f=t,r=e.getTabbedProperties().WidgetsList[f],i=r.WidgetIds.filter(function(n){return n===""}),i.length>0?(u=r.WidgetIds.indexOf(i[0]),e.getTabbedProperties().WidgetsList[f].WidgetIds[u]=o):i.length===0&&r.WidgetIds.length===0?(u=0,e.getTabbedProperties().WidgetsList[f].WidgetIds[0]=o):i.length===0&&(h=e.getTabbedProperties().WidgetsList[f].WidgetIds,h.indexOf(o)===-1&&(u=e.getTabbedProperties().WidgetsList[f].WidgetIds.length,e.getTabbedProperties().WidgetsList[f].WidgetIds[u]=o)))}),BoldBIDashboard.isNullOrUndefined(f)&&this.getTabbedProperties().WidgetsList.push(s),u=BoldBIDashboard.isNullOrUndefined(u)?0:u,this.updateWidgetIndex(n,u))},t.prototype.updateWidgetIndex=function(n,t){var i=BoldBIDashboard.isNullOrUndefined(t)?100:100+t;BoldBIDashboard.Dashboard.WidgetHelper.updateWidgetContainerPosition(n,i)},t.prototype.updateDraggedWidgetList=function(n,t,i,r){var e,o,u,f,s;if(t){for(e="",o=void 0,u=0;u<this.getTabbedProperties().WidgetsList.length;u++)for(f=0;f<this.getTabbedProperties().WidgetsList[u].WidgetIds.length;f++)if(this.getTabbedProperties().WidgetsList[u].WidgetIds[f]===n.getJson().UniqueId){o=f;e=this.getTabbedProperties().WidgetsList[u].TabId;break}s=this.controlContainer.find("#"+this.designId+this.widgetJson.UniqueName+e);BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(s.find(".bbi-nodata-tab-content"));this.updateWidgetIndex(n,o);s.append(n.ControlContainer)}else{if(!i){var l=BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(r)?this.getTabbedProperties().TabInfo[Number(this.currentTab)].UniqueText:r,h="#"+this.designId+this.widgetJson.UniqueName+l,c=this.controlContainer.find(h).find(".bbi-nodata-tab-content");this.controlContainer.find(c).length===1&&(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeAlertMessageForData(c),this.controlContainer.find(h).append(n.ControlContainer))}this.updateWidgetsListOnTabWidget(n,Number(this.currentTab),i,r)}},t.prototype.resizeForActiveTab=function(){var n="#"+this.designId+this.widgetJson.UniqueName+"tabHeader_"+this.getTabbedProperties().TabInfo[Number(this.currentTab)].UniqueText,t=this.getTabbedProperties().TabInfo[Number(this.currentTab)].UniqueText;this.isAllWidgetsRenderedInActiveTab(t)?this.updateAllWidgetResize(n):this.waitAndResizeAllWidgets(n,t);BoldBIDashboard.isNullOrUndefined(this.widgetTab.find(n).attr("is-header-hidden"))||this.updateWidgetsOnHeaderReset()},t.prototype.clearTimers=function(n){this.timerCount=0;clearTimeout(n)},t.prototype.waitAndResizeAllWidgets=function(n,t){this.resizeTimer=setTimeout(function(n,t,i){i.isAllWidgetsRenderedInActiveTab(t)?(i.updateAllWidgetResize(n),i.clearTimers(i.resizeTimer)):(i.timerCount++,i.timerCount<50?i.waitAndResizeAllWidgets(n,t):i.updateAllWidgetResize(n))},100,n,t,this)},t.prototype.updateAllWidgetResize=function(n){var i=this,t,r;BoldBIDashboard.isNullOrUndefined(this.widgetTab.find(n).attr("should-resize"))||(t=this.getAllWidgets(this.getTabbedProperties().WidgetsList.filter(function(n){return n.TabId===i.getTabbedProperties().TabInfo[Number(i.currentTab)].UniqueText})),t.length===0?(r="#"+this.designId+this.widgetJson.UniqueName+this.getTabbedProperties().TabInfo[Number(this.currentTab)].UniqueText,BoldBIDashboard.Dashboard.WidgetContainerHelper.updateNoNecessaryDataContainerSize(this.controlContainer.find(r).find(".bbi-nodata-tab-content"),!1,this)):this.updateChildWidget(t,!0),this.widgetTab.find(n).removeAttr("should-resize"))},t.prototype.getAllWidgets=function(n){for(var i=[],r=function(t){for(var f=function(r){if(!BoldBIDashboard.isNullOrUndefined(n[t].WidgetIds[r])&&!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n[t].WidgetIds[r])){var f=u.designerInstance.modules.widgetHelper.getAllWidgets().filter(function(i){return i.getJson().UniqueId===n[t].WidgetIds[r]})[0];BoldBIDashboard.isNullOrUndefined(f)||i.push(f)}},r=0;r<n[t].WidgetIds.length;r++)f(r)},u=this,t=0;t<n.length;t++)r(t);return i},t.prototype.updateChildWidget=function(n,t){for(var i=0;i<n.length;i++)BoldBIDashboard.isNullOrUndefined(n[i])||(t?n[i].updateSize():n[i].dispose())},t.prototype.showDefaultMsg=function(n){BoldBIDashboard.Dashboard.WidgetContainerHelper.showAlertMessageForData("Drag and drop one or more widgets here.",n,"",!0);this.addwidgetNotConfigured(n)},t.prototype.addwidgetNotConfigured=function(n){var t=n.find(".bbi-dbrd-widget-not-configured-header-combine"),i,r;t.find(".bbi-tab-not-configured-icon").length===0&&(i=BoldBIDashboard.buildTag("div.bbi-tab-not-configured-icon","",{},{"data-tooltip":"Widget has not been configured."}),r=BoldBIDashboard.buildTag("div.bbi-tab-not-necessary-data-configure-content","Widget has not been configured.",{display:this.designerInstance.isDesignMode()?"none":"block"},{}),t.append(i,r))},t.prototype.updateSizeOfWidgetNotConfigured=function(n,t,i){var r=n.find(".bbi-dbrd-widget-not-configured-header-combine"),u;r.attr("data-tooltip",this.designerInstance.isDesignMode()?"Drag and drop one or more widgets here.":"Widget has not been configured.");u=r.find(".bbi-tab-not-necessary-data-configure-content");u.css("display",this.designerInstance.isDesignMode()?"none":i)},t.prototype.tabbedWidgetPropertyItems=function(){var n=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.widgetJson.FilterSettings,this.controlContainer,this.controlHeader,null,this.widgetJson.ContainerSettings);return n.propertyGridItems.Header=this.widgetJson.ContainerSettings.Title,n.propertyGridItems.Type="TabbedWidget",this.bbdesigner$.each(n.containerSettingsProperty.Items,function(n,t){(t.name==="ContainerTitleAlign"||t.name==="ContainerTitleColor")&&(t.isVisible=!1);(t.name==="widgetTitleFont"||t.name==="widgetSubtitleFont")&&(t.autoFontSettingsInfo.isVisible=!1,t.fontSizeInfo.isVisible=!1)}),this.bbdesigner$.each(n.containerActionsProperty.Items,function(n,t){(t.name==="ShowHeader"||t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ViewData")&&(t.isVisible=!1)}),n.propertyGridItems.Items=[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"TabOrder",displayName:this.locale.propertyPanel.basicSettings.tabWidgetOrderText,isVisible:!0,itemType:"object",callbackInstance:this,callbackMethod:"renderOrderWidget"},{name:"WidgetOrder",displayName:this.locale.propertyPanel.basicSettings.widgetOrderText,isVisible:!0,itemType:"object",callbackInstance:this,callbackMethod:"renderOrderWidget"},{name:"HideTab",displayName:this.locale.propertyPanel.basicSettings.tabWidgetHideTabText,value:this.getTabbedProperties().HideHeader,itemType:"object",callbackInstance:this,callbackMethod:"renderhideTabItem"},{name:"HeaderColor",displayName:this.locale.propertyPanel.basicSettings.headerColorText,value:this.getTabbedProperties().HeaderColor,itemType:"color"},{name:"HeaderFontSize",dsiplayName:this.locale.propertyPanel.basicSettings.headerFontSizeText,value:this.getTabbedProperties().HeaderFontSize,itemType:"float",minimum:1,maximum:50,interval:1},{name:"ActiveTab",displayName:this.locale.propertyPanel.basicSettings.activeTabText,itemType:"dropdown",value:this.getTabbedProperties().TabInfo[Number(this.getTabbedProperties().ActiveTabId)].UniqueText,valueList:this.getTabDisplayList()}]},n.containerSettingsProperty,n.containerActionsProperty],n.propertyGridItems},t.prototype.getTabDisplayList=function(){for(var t=[],n=0;n<this.getTabbedProperties().TabInfo.length;n++)t.push({value:this.getTabbedProperties().TabInfo[n].UniqueText,text:this.getTabbedProperties().TabInfo[n].DisplayText});return t},t.prototype.updateActiveTabDrpDown=function(){if(this.propertyPanel.isVisible()){var n=this.designerInstance.element.find("#"+this.designId+"_TabbedWidget_BasicSettings_ActiveTab").data("BoldBIDashboardDropDownList");n.option("dataSource",this.getTabDisplayList());this.isTabInteraction=!1;n.option("selectedIndex",Number(this.getTabbedProperties().ActiveTabId));this.isTabInteraction=!0}},t.prototype.renderhideTabItem=function(n,t,i){var r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),f,u,e;if(BoldBIDashboard.isNullOrUndefined(n))u=r.designerInstance.element.find("#"+r.designId+"_tab_"+i.categoryName+"_"+i.name),u.length>0&&(e=u.data("BoldBIDashboardCheckBox"),BoldBIDashboard.isNullOrUndefined(e)||e.option("checked",r.getTabbedProperties().HideHeader));else{var o=BoldBIDashboard.buildTag("div.","",{display:"inline-block","margin-bottom":"15px"},{id:r.designId+"_Tab_"+i.categoryName+"_"+i.name+"_container"}),s=BoldBIDashboard.buildTag("div","",{width:(r.propertyPanel.propertyPanelContainer.width()-33)*47/100+"px",display:"inline-block","margin-left":"3px","margin-top":"8.5px"}),h=BoldBIDashboard.buildTag("label",this.locale.tabWidget.hideTabHeader,{"max-width":(r.propertyPanel.propertyPanelContainer.width()-33)*47/100-15+"px","font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis",display:"block"},{id:r.designId+"_tab_"+i.categoryName+"_"+i.name+"_childElement","for":r.designId+"_tab_"+i.categoryName+"_"+i.name});s.append(h);f=BoldBIDashboard.buildTag("div.bbi-dbrd-valueLabel-check-box-container","",{display:"inline-block"},{id:r.designId+"_tab_"+i.categoryName+"_"+i.name+"_parent"});u=BoldBIDashboard.buildTag("input","",{},{id:r.designId+"_tab_"+i.categoryName+"_"+i.name,type:"checkbox"});f.append(u);u.BoldBIDashboardCheckBox({checked:r.getTabbedProperties().HideHeader,change:this.bbdesigner$.proxy(r.onhideTab,r),width:(r.propertyPanel.propertyPanelContainer.width()-33)*57/100-15+"px",cssClass:"e-designer-prop-checkbox"});o.append(s,f);n.append(o)}},t.prototype.onhideTab=function(n){n.isInteraction&&(this.getTabbedProperties().HideHeader=n.isChecked,this.hideTabArea(),this.updateContentHeight(),this.updateWidgetOnTabHide(),this.getTabbedProperties().HideHeader?this.widgetTab.find(".bbdesigner-dbrd-tab-item-header-text").attr("is-header-hidden","true"):this.widgetTab.find(".bbdesigner-dbrd-tab-item-header-text").removeAttr("is-header-hidden"),this.updateWidgetsOnHeaderReset(),this.designerInstance.modules.serialization.notifyChange(),this.getTabbedProperties().HideHeader||(this.isTabInteraction=!1,this.tabObjSelection(Number(this.currentTab)),this.isTabInteraction=!0))},t.prototype.updateWidgetsOnHeaderReset=function(){var t=this.getTabbedProperties().TabInfo[Number(this.currentTab)].UniqueText,i="#"+this.designId+this.widgetJson.UniqueName+t,n=this.getTabbedProperties().WidgetsList.filter(function(n){return n.TabId===t});if(n.length>0&&n[0].WidgetIds.length===0){BoldBIDashboard.Dashboard.WidgetContainerHelper.updateNoNecessaryDataContainerSize(this.controlContainer.find(i).find(".bbi-nodata-tab-content"),!1,this);return}this.updateWidgetPositionInTab(n)},t.prototype.hideTabArea=function(){var n=this.widgetTab.find(".e-tab-header.e-control"),t=this.getTabbedProperties().HideHeader?"none":"block";n.css("display",t)},t.prototype.updateWidgetOnTabHide=function(){for(var n,i=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),r=i.getAllWidgets(i.getTabbedProperties().WidgetsList),u=this.getTabbedProperties().HideHeader?2:-2,t=0;t<r.length;t++)n=r[t],n.CellInfo.RowSpan=n.CellInfo.RowSpan+u,n.updateWidgetBounds(n.CellInfo)},t.prototype.updateWidgetPositionInTab=function(n){for(var i=this.getAllWidgets(n),t=0;t<i.length;t++)i[t].updateSize(i[t].CellInfo)},t.prototype.renderOrderWidget=function(n,t,i){var u=i.name==="TabOrder",r=i.name.toLowerCase();if(BoldBIDashboard.isNullOrUndefined(n))this.updatePropertyPanel(t,r,u),this.disableEnableIcons(!0),this.disableEnableWidgetListIcons(!0),this.selectFirstIndexOfTabOrderListing();else{var f=BoldBIDashboard.buildTag("div","",{"margin-bottom":"15px"},{id:this.designId+"_"+r+"_wrapper"}),e=BoldBIDashboard.buildTag("div.bbi-dbrd-container-item-toolbar","",{},{}),l=BoldBIDashboard.buildTag("div.bbi-dbrd-basicsettings-leftdiv","",{float:"left"},{id:this.designId+"_"+r+"_basicsettings_left"}),y=u?this.locale.tabWidget.tabOrder:this.locale.tabWidget.widgetOrder,p=BoldBIDashboard.buildTag("span",y,{float:"left","font-size":"14px","font-weight":600},{}),w=u?"bbi-dbrd-property-tab-functions":"bbi-dbrd-basicsettings-rightdiv",h=BoldBIDashboard.buildTag("div."+w,"",{},{id:this.designId+"_"+r+"_basicsettings_right"}),o=BoldBIDashboard.buildTag("div.bbi-dbrd-container-widget-arrow-up","",{width:"20px",height:"20px"},{id:this.designId+"_"+r+"_up_icon_container"}),b=BoldBIDashboard.buildTag("span.bbi-widgeticon bbi-dashboarddesigner-up-arrow bbi-dbrd-designer-hoverable bbi-dbrd-container-widget-arrow-icon","",{},{id:this.designId+"_"+r+"_up_icon","data-tooltip":"Move Up"}),s=BoldBIDashboard.buildTag("div.bbi-dbrd-container-widget-arrow-down","",{width:"20px",height:"20px"},{id:this.designId+"_"+r+"_down_icon_container"}),k=BoldBIDashboard.buildTag("span.bbi-widgeticon bbi-dashboarddesigner-down-arrow bbi-dbrd-designer-hoverable bbi-dbrd-container-widget-arrow-icon","",{},{id:this.designId+"_"+r+"_down_icon","data-tooltip":"Move Down"}),c=BoldBIDashboard.buildTag("div","",{margin:"3px 10px"},{id:this.designId+"_"+r+"_display_container_div"}),a=BoldBIDashboard.buildTag("ul","",{},{id:this.designId+"_"+r+"_display_container"}),v=BoldBIDashboard.buildTag("div","",{},{});u?(this.tabListContainerWrapper=f,this.tabListUpArrowIcon=o,this.tabListDownArrowIcon=s):(this.widgetListContainerWrapper=f,this.widgetListUpArrowIcon=o,this.widgetListDownArrowIcon=s);l.append(p);o.append(b);s.append(k);u&&this.renderIconsForTabList(h);h.append(o,s);e.append(l,h);c.append(a);u?f.append(e).append(c):(v.append(e,c),f.append(v));n.append(f);e.on("click",".bbi-dbrd-container-widget-arrow-up:not(.bbi-container-widget-icon-disable) .bbi-dbrd-container-widget-arrow-icon",this.bbdesigner$.proxy(this.moveUp,this,r));e.on("click",".bbi-dbrd-container-widget-arrow-down:not(.bbi-container-widget-icon-disable) .bbi-dbrd-container-widget-arrow-icon",this.bbdesigner$.proxy(this.moveDown,this,r));u||this.disableEnableWidgetListIcons(!0);u&&(this.addDiv.bind("click",this.bbdesigner$.proxy(this.onAddTabIconClick,this)),this.deleteDiv.bind("click",this.bbdesigner$.proxy(this.onDeleteTabIconClick,this)),this.editDiv.bind("click",this.bbdesigner$.proxy(this.onEditTabIconClick,this)));this.disableEnableIcons(!0);this.renderListBoxBasedOnType(r,a)}this.disableTabOrderUpDownArrow()},t.prototype.selectFirstIndexOfTabOrderListing=function(){this.updateWidgetListOnSelect(0);var n=this.designerInstance.element.find("#"+this.designId+"_taborder_display_container").data("BoldBIDashboardListBox");BoldBIDashboard.isNullOrUndefined(n)||n.selectItemByIndex(0)},t.prototype.disableTabOrderUpDownArrow=function(){this.designerInstance.element.find("#"+this.designId+"_taborder_up_icon_container").addClass("bbi-container-widget-icon-disable");this.designerInstance.element.find("#"+this.designId+"_taborder_down_icon_container").addClass("bbi-container-widget-icon-disable")},t.prototype.onAddTabIconClick=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),t=JSON.parse(JSON.stringify(n.tabObj.itemIndexArray.length-1));n.tabAdding(t);n.updateTabAfterAdding(t);n.isTabInteraction=!1;n.tabObjSelection(Number(n.currentTab));n.isTabInteraction=!0;this.selectFirstIndexOfTabOrderListing()},t.prototype.onEditTabIconClick=function(){var i=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),u=this.designerInstance.element.find("#"+this.designId+"_taborder_display_container"),t=this.designerInstance.element.find("#"+this.designId+"_taborder_display_container").data("BoldBIDashboardListBox"),n,r;BoldBIDashboard.isNullOrUndefined(t)||(n=u.find("[data-tabid="+i.getTabbedProperties().TabInfo[t.model.selectedIndex].UniqueText+"]"),r=n.siblings(".boldbi-tablist-div"),n.val(i.getTabbedProperties().TabInfo[t.model.selectedIndex].DisplayText),n.css("display","block"),r.css("display","none"),n.focus())},t.prototype.onDeleteTabIconClick=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),t=this.designerInstance.element.find("#"+this.designId+"_taborder_display_container").data("BoldBIDashboardListBox");BoldBIDashboard.isNullOrUndefined(t)||(n.isTabRemoved=!1,n.tabObj.removeTab(t.model.selectedIndex));n.updateActiveTabDrpDown()},t.prototype.displayTextBoxKeyPress=function(n){(n.keyCode===13||n.key==="Escape")&&this.newTextBoxMouseDown(n)},t.prototype.newTextBoxMouseDown=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),u=this.designerInstance.element.find("#"+this.designId+"_taborder_display_container"),t=this.designerInstance.element.find("#"+this.designId+"_taborder_display_container").data("BoldBIDashboardListBox"),i,r;BoldBIDashboard.isNullOrUndefined(t)||(i=u.find("[data-tabid="+n.getTabbedProperties().TabInfo[t.model.selectedIndex].UniqueText+"]"),r=i.siblings(".boldbi-tablist-div"),i.css("display","none"),r.css("display","block"),n.renameAndUpdateTab(t.model.selectedIndex,i),t.model.dataSource=n.getTabbedProperties().TabInfo,t.refresh(),n.selectAllTabsAfterRefresh(),n.updateActiveTabDrpDown())},t.prototype.renderIconsForTabList=function(n){var t,i;this.addDiv=BoldBIDashboard.buildTag("div.bbi-dashboarddesigner-grid-toolbar bbi-dbrd-background-theme","",{},{id:this.designId+"_tab_addIcon"});t=BoldBIDashboard.buildTag("span.e-icon e-plus bbi-designer-add-icon bbi-dbrd-designer-hoverable","",{float:"right","font-size":"14px","margin-top":"4px","margin-right":"2px"},{id:this.designId+"_tab_add_span","data-tooltip":this.locale.propertyPanel.columnSettings.kpiColumns.addTooltip});this.editDiv=BoldBIDashboard.buildTag("div.bbi-dashboarddesigner-grid-toolbar bbi-dbrd-icon-background-theme","",{"margin-left":"5px"},{id:this.designId+"_tab_editIcon"});i=BoldBIDashboard.buildTag("span.bbi-designer-parameter-edit bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable","",{float:"right","font-size":"14px",margin:"3px"},{id:this.designId+"_tab_edit_span","data-tooltip":this.locale.propertyPanel.columnSettings.kpiColumns.editTooltip});this.deleteDiv=BoldBIDashboard.buildTag("div.bbi-dashboarddesigner-grid-toolbar bbi-dbrd-icon-background-theme","",{"margin-left":"5px"},{id:this.designId+"_tab_delIcon"});var r=BoldBIDashboard.buildTag("span.bbi-designer-toolbar-delete bbi-dbrd-designer-hoverable","",{float:"right","font-size":"14px",margin:"3px"},{id:this.designId+"_tab_del_span","data-tooltip":this.locale.propertyPanel.columnSettings.kpiColumns.delTooltip}),u=BoldBIDashboard.buildTag("div.bbi-separator bbi-horizontal","",{height:"20px","padding-left":"5px","border-right":"1px solid #cecece"},{id:this.designId+"_tab_separator1"}),f=BoldBIDashboard.buildTag("div.bbi-separator bbi-horizontal","",{height:"20px","padding-left":"5px","border-right":"1px solid #cecece"},{id:this.designId+"_tab_separator2"});n.append(this.addDiv);this.addDiv.append(t);n.append(f);n.append(this.editDiv);this.editDiv.append(i);n.append(this.deleteDiv);this.deleteDiv.append(r);n.append(u)},t.prototype.disableEnableIcons=function(n){var t=this.designerInstance.element;n?t.find("#"+this.designId+"_tab_editIcon").css("opacity","0.5").attr("disabled","disabled"):t.find("#"+this.designId+"_tab_editIcon").css("opacity","1").removeAttr("disabled");this.disableEnableDeleteIcon(n)},t.prototype.disableEnableDeleteIcon=function(n){var t=this.designerInstance.element;n?t.find("#"+this.designId+"_tab_delIcon").css("opacity","0.5").attr("disabled","disabled"):t.find("#"+this.designId+"_tab_delIcon").css("opacity","1").removeAttr("disabled")},t.prototype.disableEnableWidgetListIcons=function(n,t){if(t===void 0&&(t=!1),this.propertyPanel.isVisible()){var r=this.designerInstance.element.find("#"+this.designId+"_widgetorder_up_icon_container"),u=this.designerInstance.element.find("#"+this.designId+"_widgetorder_down_icon_container"),i=this.designerInstance.element.find("#"+this.designId+"_widgetorder_wrapper");n?(r.addClass("bbi-container-widget-icon-disable"),u.addClass("bbi-container-widget-icon-disable"),t?i.find(".bbi-dbrd-basicsettings-leftdiv").removeClass("boldbi-disable"):i.find(".bbi-dbrd-basicsettings-leftdiv").addClass("boldbi-disable")):(r.removeClass("bbi-container-widget-icon-disable"),u.removeClass("bbi-container-widget-icon-disable"),i.find(".bbi-dbrd-basicsettings-leftdiv").removeClass("boldbi-disable"))}},t.prototype.updatePropertyPanel=function(n,t,i){var r=this.designerInstance.element.find("#"+this.designId+"_"+t+"_display_container").data("BoldBIDashboardListBox"),u;BoldBIDashboard.isNullOrUndefined(r)||(u=i?this.getTabbedProperties().TabInfo:[],r.setModel({dataSource:u}),r.unselectAll(),r.refresh())},t.prototype.renderListBoxBasedOnType=function(n,t){var u=n==="taborder",i={text:"DisplayText",value:"UniqueText"},r=this.getTabbedProperties().TabInfo;if(u||(i={text:"widgetName",value:"widgetName"},r=[]),u){t.BoldBIDashboardListBox({height:"216px",width:"442px",fields:i,dataSource:r,template:this.getListBoxTemplate(),showRoundedCorner:!0,cssClass:"bbi-dashboarddesigner bbi-designer-param-assign bbi-designer-border bbi-dbrd-control bbi-designer-box-shadow",create:this.bbdesigner$.proxy(this.createScrollBar,this,n),select:this.bbdesigner$.proxy(this.disableUpandDownArrow,this,n)});t.off("keypress",".boldbi-tablist-input",this.bbdesigner$.proxy(this.displayTextBoxKeyPress,this));t.on("keypress",".boldbi-tablist-input",this.bbdesigner$.proxy(this.displayTextBoxKeyPress,this));t.off("blur",".boldbi-tablist-input",this.bbdesigner$.proxy(this.newTextBoxMouseDown,this));t.on("blur",".boldbi-tablist-input",this.bbdesigner$.proxy(this.newTextBoxMouseDown,this))}else t.BoldBIDashboardListBox({height:"216px",width:"442px",fields:i,dataSource:r,showRoundedCorner:!0,cssClass:"bbi-dashboarddesigner bbi-designer-param-assign bbi-designer-border bbi-dbrd-control bbi-designer-box-shadow",create:this.bbdesigner$.proxy(this.createScrollBar,this,n),select:this.bbdesigner$.proxy(this.disableUpandDownArrow,this,n)})},t.prototype.getListBoxTemplate=function(){return'<div style="padding:0px" class = "boldbi-tablist-div" >${DisplayText}<\/div><input style="display:none; width: 150px; height: 20px;" class = "e-textbox boldbi-tablist-input" data-tabid = "${UniqueText}">'},t.prototype.createScrollBar=function(n){var t=null;t=n==="taborder"?this.tabListContainerWrapper.find("#"+this.designId+"_"+n+"_display_container"):this.widgetListContainerWrapper.find("#"+this.designId+"_"+n+"_display_container");this.bbdesigner$(t.BoldBIDashboardListBox("instance").listContainer).BoldBIDashboardScroller({enableTouchScroll:!1,autoHide:!0,buttonSize:this.designerInstance.scrollerSize.buttonSize,scrollerSize:this.designerInstance.scrollerSize.scrollSize,cssClass:"e-dbrd-designer-scroller e-dbrd-control"})},t.prototype.moveUp=function(n,t){if(BoldBIDashboard.isNullOrUndefined(this.bbdesigner$(t.currentTarget).attr("disabled"))){var i=this.designerInstance.element.find("#"+this.designId+"_"+n+"_display_container").data("BoldBIDashboardListBox");i.moveUp();this.swapData(i.model.selectedIndex,i.model.selectedIndex-1,n);n==="taborder"&&this.moveTab(i.model.selectedIndex,i.model.selectedIndex-1,!1);this.disableUpandDownArrow(n,{isSelected:!0,index:--i.model.selectedIndex,model:i.model});n==="taborder"?this.updateTabList(n):this.updateWidgetList(n)}},t.prototype.moveDown=function(n,t){if(BoldBIDashboard.isNullOrUndefined(this.bbdesigner$(t.currentTarget).attr("disabled"))){var i=this.designerInstance.element.find("#"+this.designId+"_"+n+"_display_container").data("BoldBIDashboardListBox");i.moveDown();this.swapData(i.model.selectedIndex,i.model.selectedIndex+1,n);n==="taborder"&&this.moveTab(i.model.selectedIndex,i.model.selectedIndex+1,!0);this.disableUpandDownArrow(n,{isSelected:!0,index:++i.model.selectedIndex,model:i.model});n==="taborder"?this.updateTabList(n):this.updateWidgetList(n)}},t.prototype.swapData=function(n,t,i){if(n!==-1&&t!==-1){var r=this.designerInstance.element.find("#"+this.designId+"_"+i+"_display_container").data("BoldBIDashboardListBox"),u=r.model.dataSource[n];r.model.dataSource[n]=r.model.dataSource[t];r.model.dataSource[t]=u}},t.prototype.disableUpandDownArrow=function(n,t){if(t.isSelected){var i=null,r=null;n==="taborder"?(i=this.tabListUpArrowIcon,r=this.tabListDownArrowIcon,t.isInteraction&&(this.updateWidgetListOnSelect(t.index),this.disableEnableIcons(!1))):(i=this.widgetListUpArrowIcon,r=this.widgetListDownArrowIcon);t.model.dataSource.length===1?(i.addClass("bbi-container-widget-icon-disable").attr("disabled","disabled"),r.addClass("bbi-container-widget-icon-disable").attr("disabled","disabled")):t.index===0&&t.model.dataSource.length>1?(i.addClass("bbi-container-widget-icon-disable").attr("disabled","disabled"),r.removeClass("bbi-container-widget-icon-disable").removeAttr("disabled")):t.index===t.model.dataSource.length-1?(r.addClass("bbi-container-widget-icon-disable").attr("disabled","disabled"),i.removeClass("bbi-container-widget-icon-disable").removeAttr("disabled")):(i.removeClass("bbi-container-widget-icon-disable").removeAttr("disabled"),r.removeClass("bbi-container-widget-icon-disable").removeAttr("disabled"))}},t.prototype.updateWidgetListOnSelect=function(n){var i=this.designerInstance.element.find("#"+this.designId+"_widgetorder_display_container").data("BoldBIDashboardListBox"),t;BoldBIDashboard.isNullOrUndefined(i)||(t=this.getWidgetListForListBox(n),BoldBIDashboard.isNullOrUndefined(t)||t.length===0?this.disableEnableWidgetListIcons(!0):t.length===1?this.disableEnableWidgetListIcons(!0,!0):this.disableEnableWidgetListIcons(!1),i.setModel({dataSource:t}),i.unselectAll(),i.refresh())},t.prototype.updateTabList=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),i;t.getTabbedProperties().TabInfo=[];i=this.designerInstance.element.find("#"+this.designId+"_"+n+"_display_container").data("BoldBIDashboardListBox");t.getTabbedProperties().TabInfo=i.model.dataSource},t.prototype.moveTab=function(n,t){var i=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),u=i.tabObj.items[n],r;this.tabObj.items[n]=i.tabObj.items[t];this.tabObj.items[t]=u;r=i.tabObj.itemIndexArray[n];this.tabObj.itemIndexArray[n]=i.tabObj.itemIndexArray[t];this.tabObj.itemIndexArray[t]=r;i.designerInstance.modules.serialization.notifyChange();i.tabObj.refresh();i.hideTabArea();i.updateContentHeight();i.removeInactiveTabClass();i.resizeForActiveTab();i.selectAllTabsAfterRefresh()},t.prototype.getWidgetListForListBox=function(n){var r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),u=[],f=n,e,i,t,o;for(BoldBIDashboard.isNullOrUndefined(n)&&(f=Number(r.currentTab)),e=r.getTabbedProperties().WidgetsList.filter(function(n){return n.TabId===r.getTabbedProperties().TabInfo[f].UniqueText}),i=r.getAllWidgets(e),t=0;t<i.length;t++)o={widgetName:BoldBIDashboard.isNullOrUndefined(i[t].getJson().ContainerSettings.Title)?BoldBIDashboard.DashboardUtil.encodeText(i[t].getJson().UniqueName):BoldBIDashboard.DashboardUtil.encodeText(i[t].getJson().ContainerSettings.Title),uniqueId:i[t].getJson().UniqueId},u.push(o);return u},t.prototype.updateWidgetList=function(n){var o=this,u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),s=this.designerInstance.element.find("#"+this.designId+"_taborder_display_container").data("BoldBIDashboardListBox"),f=u.getTabbedProperties().WidgetsList.filter(function(n){return n.TabId===o.getTabbedProperties().TabInfo[s.model.selectedIndex].UniqueText})[0],r,t;f.WidgetIds=[];var h=u.getTabbedProperties().WidgetsList.indexOf(f),e=this.designerInstance.element.find("#"+this.designId+"_"+n+"_display_container").data("BoldBIDashboardListBox"),i=this.widgetHelper.getAllWidgets();for(r=0;r<e.model.dataSource.length;r++)for(t=0;t<i.length;t++)if(e.model.dataSource[r].widgetName===i[t].getJson().ContainerSettings.Title&&u.getJson().UniqueId===i[t].getJson().ContainerSettings.CombineWidgetId){u.getTabbedProperties().WidgetsList[h].WidgetIds.push(i[t].getJson().UniqueId);BoldBIDashboard.Dashboard.WidgetHelper.updateWidgetContainerPosition(i[t],100+r);break}this.designerInstance.modules.serialization.notifyChange()},t.prototype.getTabbedProperties=function(){return this.widgetJson},t.prototype.resetTabWidgetResize=function(n){for(var r,u,t=this.widgetJson,i=0;i<t.WidgetsList.length;i++)for(r=0;r<t.WidgetsList[i].WidgetIds.length;r++)if(n===t.WidgetsList[i].WidgetIds[r]){for(u=0;u<t.TabInfo.length;u++)this.widgetTab.find("#"+this.designId+t.UniqueName+"tabHeader_"+t.TabInfo[u].UniqueText).attr("should-resize","true");return!0}return!1},t}(BoldBIDashboard.ContainerWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.TabbedItem",InternalTabbedItem,window);BoldBIDashboard.DashboardDesignerUtility.TabbedItem.prototype.initialize();var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),InternalDateBucketItem=function(n){function t(t){var i=n.call(this,t,"DateGroup","e-datebucket-item")||this;return i.dateBucketItem=null,i.dateBucketElement=null,i.dateBucketContent=null,i.dateBucketObj=null,i.locale=null,i.configuredWidgetsPanel=null,i.filterObject=null,i.locale=t.getLocalizationContent(),i.widgetJson=new DateBucketProperties(t),i.designerId=i.designerInstance._id,i.propertyPanel=t.modules.propertyPanel,i.filterObject=i.designerInstance.modules.filterConfigurationInfo,i.isVisualWidget=!1,i}return __extends(t,n),t.prototype.initialize=function(){this.locale=BoldBIDashboardDesigner.getLocale();BoldBIDashboardDesigner.widgetItems.push({GroupName:this.locale.itemPanel.groupItems.filters,GroupId:"11753ba9-22bc-467e-ba98-9cb745561e5a",Items:[{id:"3be66fff-6e7a-471e-a8e3-ebbc968bae4c",widgetName:"DateGroup",widgetDisplayName:this.locale.itemPanel.widgetTitle.dateBucket,cssClass:"bbi-widgeticon bbi-designer-widget-datebucket",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.DateBucketItem",searchCategory:["date group","group","filter","date"],widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",hide:!0,tooltip:{title:this.locale.itemPanel.widgetTitle.dateBucket,description:this.locale.itemPanel.widgetDescription.dateBucketDesc,dataRequirement:this.locale.itemPanel.widgetDataRequirements.dateBucketDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.DateBucketProperties",minRowSpan:3}]});this.addToCacheCollection()},t.prototype.init=function(n,t){this.updateTitleTheme(this.designerInstance.canApplyTheme());this.setContainerDefaultProperties();this.renderDateBucketItem(t);this.updateThemeInWidget(this.designerInstance.isDarkTypeTheme());this.addToCacheCollection()},t.prototype.dispose=function(){this.disposeDateBucket();n.prototype.dispose.call(this)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);this.updateDateBucketSize()},t.prototype.getMobileViewHeight=function(){return 2*this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t)},t.prototype.getJson=function(){return this.widgetJson},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateDateBucketPropertyChange(n,t,i,r)},t.prototype.refresh=function(){this.refreshDateBucket()},t.prototype.getPropertyPanelItems=function(){return this.getDateBucketPropertyPanel()},t.prototype.getMinMobileHeight=function(){return"90px"},t.prototype.update=function(n){this.updateDatebucketData(n)},t.prototype.isDefaultDataWidget=function(){return!0},t.prototype.canUseWidgetAsMaster=function(){return!1},t.prototype.canCombineRequest=function(){return!0},t.prototype.renderDateBucketItem=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));this.renderDateBucketElement();!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.DateBucket)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.renderDateBucketElement=function(){this.dateBucketItem=BoldBIDashboard.buildTag("div.e-dateBucketItem e-dbrd-widget","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"100",overflow:"hidden"},{id:this.designerId+"dateBucketItem"+this.widgetJson.UniqueName});this.dateBucketElement=BoldBIDashboard.buildTag("input.e-dateBucketElement","",{position:"relative","font-size":"12px","background-color":this.designerInstance.modules.themeHelper.getWidgetTileBackground(null)},{id:this.designerId+"dateBucketElement"+this.widgetJson.UniqueName});this.contentContainer.append(this.dateBucketItem);this.dateBucketItem.append(this.dateBucketElement);this.dateBucketItem.css("padding","5px");this.dateBucketElement.BoldBIDashboardDropDownList(this.getDateBucketDefaultObject(!0)).appendTo(this.dateBucketElement[0]);this.dateBucketItem.find(".e-datebucket-control").css("background","transparent");this.controlContainer.data("widgetInstance",this);this.dateBucketElement.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designerId+"_designer_waiting_popup bbi-designer-loader",template:this.designerInstance.getWaitingPopupTemplate()});this.dateBucketObj=this.dateBucketElement.data("BoldBIDashboardDropDownList");this.setDateBucketTop();this.contentContainer.find(".bbi-widget-not-configured-text ").hide()},t.prototype.getDateBucketDefaultObject=function(){return{cssClass:"bbi-dbrd-control e-datebucket-control",dataSource:this.getDataSource(),popupHeight:this.getPopupHeight(),width:this.dateBucketItem.width().toString(),height:25..toString(),value:this.getDateBucketProperties().selectedValue,change:this.bbdesigner$.proxy(this.onChangeDateBucketValue,this),delimiterChar:", "}},t.prototype.getPopupHeight=function(){return"226px".toString()},t.prototype.getDataSource=function(){for(var n,u,i=[],r=Object.keys(DateBucketDateTimeFormat),t=0;t<r.length;t++)n=r[t],u=n.substring(0,1).toLowerCase()+n.substring(1),i.push({text:this.locale.dateBucket[u],value:DateBucketDateTimeFormat[n]});return i},t.prototype.applyWidgetTheme=function(n){this.updateTitleTheme(this.designerInstance.canApplyTheme());this.updateThemeInWidget(n);this.refreshDateBucket()},t.prototype.updateThemeInWidget=function(){var e="#"+this.designerId+"dateBucketElement"+this.widgetJson.UniqueName+"_popup_list_wrapper",a="#"+this.designerId+"dateBucketElement"+this.widgetJson.UniqueName+"_container",d="#"+this.designerId+"dateBucketElement"+this.widgetJson.UniqueName+"_wrapper",v="#"+this.designerId+"dateBucketElement"+this.widgetJson.UniqueName+"_inputSearch",r=[],t=this.Type.toLowerCase(),n,c,l,f,w,b,k;this.dateBucketItem.toggleClass(".e-datebucket-dbrd-theme");this.bbdesigner$(e).addClass("e-ddl-popup-dbrd-theme");this.designerInstance.element.find(d).addClass("e-ddl-dbrd-theme");var o=this.designerInstance.modules.themeHelper.getDDWidgetDDLBackground(t),s=this.designerInstance.modules.themeHelper.getDDWidgetDDLTextColor(t),g=this.designerInstance.modules.themeHelper.getDDWidgetBorderColor(t),nt=this.designerInstance.modules.themeHelper.getDDWidgetPlaceHolderColor(t),y=this.designerInstance.modules.themeHelper.getDDWidgetDDLHoverBackground(t),p=this.designerInstance.modules.themeHelper.getDDWidgetDDLHoverTextColor(t),tt=this.designerInstance.modules.themeHelper.getDDWidgetDDLSelectionBackground(t),it=this.designerInstance.modules.themeHelper.getDDWidgetDDLSelectionTextColor(t),rt=this.designerInstance.modules.themeHelper.getDDWidgetDropDownBorderColor(t),ut=this.designerInstance.modules.themeHelper.getDDWidgetDDLArrowColor(t),i=this.bbdesigner$(e).attr("style"),ft=this.bbdesigner$(a).attr("style"),u="1px 1px 10px "+this.designerInstance.modules.themeHelper.getDDWidgetBoxShadowColor(t),et="border-color:"+g+" !important;\t",h="background-color:"+o+" !important;\tcolor:"+s+" !important;\tborder: 1px solid "+rt+" !important;\tbox-shadow:"+u+" !important;\t-webkit-box-shadow:"+u+" !important;\t-ms-box-shadow:"+u+" !important;\t-moz-box-shadow:"+u+"!important;\t";this.bbdesigner$(e).attr("style",this.designerInstance.modules.themeHelper.getStyleString(i,h));this.bbdesigner$(a).attr("style",this.designerInstance.modules.themeHelper.getStyleString(ft,et));i=this.designerInstance.element.find(v).attr("style");h="background-color:"+o+"!important;color:"+s+"!important;";this.bbdesigner$(v).attr("style",this.designerInstance.modules.themeHelper.getStyleString(i,h));n=[];c="#"+this.designerInstance._id;n.push(".e-datebucket-control.e-ddl-popup.e-ddl-popup-dbrd-theme",".e-datebucket-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-search .e-input",".e-datebucket-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-search .e-input::placeholder",".e-dateBucketItem.e-datebucket-dbrd-theme .e-input.bbi-dbrd-control.e-dateBucket-control",".e-dateBucketItem.e-datebucket-dbrd-theme .e-input.bbi-dbrd-control.e-datebucket-control::placeholder",".e-datebucket-control.bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-datebucket-all-element-wrapper",".e-datebucket-control.bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-datebucket-all-element-wrapper .e-datebucket-all-element .e-text");l=this.designerInstance.modules.themeHelper.getDDWidgetDDLFontText(t);f="\tbackground: "+o+" !important;\n\tcolor: "+s+" !important;"+l;r.push({key:n+"",value:f});n=[];n.push(c+" .boldbi-dashboarddesigner .e-dateBucketItem .e-ddl.e-ddl-dbrd-theme .e-input",c+" .boldbi-dashboarddesigner .e-dateBucketItem .e-ddl.e-ddl-dbrd-theme .e-input::placeholder");f="\tbackground:  transparent !important;\n\tcolor: "+nt+" !important;\n\topacity: 1 !important;\n"+l;r.push({key:n+"",value:f});n=[];w=this.designerInstance.modules.themeHelper.getDDWidgetDDLHoverFontText(t);n.push(".e-datebucket-control.bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-hover",".e-datebucket-control.bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-datebucket-all-element-wrapper:hover",".e-datebucket-control.bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-datebucket-all-element-wrapper:hover .e-text",".e-datebucket-control.bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-datebucket-all-element-wrapper .e-datebucket-all-element:hover",".e-datebucket-control.bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-datebucket-all-element-wrapper .e-datebucket-all-element:hover .e-text");i="\tbackground: "+y+" !important;\n\tcolor: "+p+" !important;"+w;r.push({key:n+"",value:i});n=[];n.push(".e-datebucket-control.bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-active.e-hover",".e-datebucket-control.bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-select.e-hover ");i="\tbackground: "+y+" !important;\n\tcolor: "+p+" !important;";r.push({key:n+"",value:i});n=[];b=this.designerInstance.modules.themeHelper.getDDWidgetDDLSelectFontText(t);n.push(".e-datebucket-control.bbi-dbrd-control.e-ddl-popup.e-ddl-popup-dbrd-theme .e-active");i="\tbackground: "+tt+" !important;\n\tcolor: "+it+" !important;"+b;r.push({key:n+"",value:i});n=[];n.push(".boldbi-dashboarddesigner .e-dateBucketItem .e-ddl.e-ddl-dbrd-theme .e-select .e-icon.e-down-arrow");i="\tcolor: "+ut+" !important;";r.push({key:n+"",value:i});k=this.designerInstance._id+"_datebucketddlpopupstyle";this.designerInstance.modules.themeHelper.createandAppendCustomStyle(k,r)},t.prototype.updateTitleTheme=function(n){if(n){var t=this.Type.toLowerCase(),i=this.designerInstance.modules.themeHelper.getDDWidgetHeaderTitle(t);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getDateBucketProperties().ContainerSettings.TextColor,i);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)}},t.prototype.getDateBucketPropertyPanel=function(){var n=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.getDateBucketProperties().FilterSettings,this.controlContainer,this.controlHeader,null,this.widgetJson.ContainerSettings);return this.containerPropertyItem=n.containerProperties,n.propertyGridItems.Header=this.getDateBucketProperties().ContainerSettings.Title,n.propertyGridItems.SubTitle=this.getDateBucketProperties().ContainerSettings.SubTitle,n.propertyGridItems.Description=this.getDateBucketProperties().ContainerSettings.Description,n.propertyGridItems.Type="DateGroup",this.bbdesigner$.each(n.containerActionsProperty.Items,function(n,t){(t.name==="ShowMaximize"||t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ImageExport"||t.name==="PDFExport"||t.name==="ViewData"||t.name==="PinWidget")&&(t.isVisible=!1)}),this.bbdesigner$.each(n.containerSettingsProperty.Items,function(n,t){(t.name==="ShowWidgetBackgroundImage"||t.name==="WidgetBackgroundImageMode"||t.name==="WidgetBackgroundImageSource"||t.name==="WidgetBackgroundImageBrowse"||t.name==="WidgetBackgroundImageURL")&&(t.isVisible=!1);t.name==="widgetSubtitleFont"&&t.autoFontSettingsInfo.name==="WidgetLevelSubTitleAutoFontSize"&&t.fontSizeInfo.name==="WidgetLevelSubTitleFontSize"&&(t.autoFontSettingsInfo.isVisible=t.fontSizeInfo.isVisible=!1)}),n.propertyGridItems.Items=[{CategoryName:"Basic Settings",Items:[{name:"Configured widgets",isVisible:!0,itemType:"object",callbackInstance:this,callbackMethod:"renderConfiguredWidgetsDetailsPanel"}]},n.containerSettingsProperty,n.containerActionsProperty,n.noDataContainerActionsProperty],n.propertyGridItems},t.prototype.renderConfiguredWidgetsDetailsPanel=function(n){var i,t;if(BoldBIDashboard.isNullOrUndefined(n))i=this.designerInstance.element.find(".e-dbrd-datebucket-container-wrapper"),t=i.find(".e-datebucket-scroller_div"),t.css({width:"98%",height:"200px"}),!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0&&this.appendListValues(t);else{var i=this.configuredWidgetsPanel=BoldBIDashboard.buildTag("div.e-dbrd-datebucket-container-wrapper","",{},{}),r=BoldBIDashboard.buildTag("div.e-dbrd-datebucket-toolbar","",{},{}),u=BoldBIDashboard.buildTag("div.e-dbrd-datebucket-basicsettings-leftdiv","",{},{}),s=BoldBIDashboard.buildTag("span",this.locale.dateBucket.configuredWidgets,{float:"left","font-size":"14px","font-weight":600},{}),h=BoldBIDashboard.buildTag("div.e-dbrd-datebucket-basicsettings-rightdiv","",{},{}),f=BoldBIDashboard.buildTag("div.e-dbrd-datebucket-display-container","",{},{}),e=BoldBIDashboard.buildTag("ul.e-listbox e-js e-ul e-dbrd-datebucket_listbox","",{},{}),o=BoldBIDashboard.buildTag("div.e-content e-datebucket-scroller_div","",{},{});e.append(o);u.append(s);r.append(u,h);f.append(e);i.append(r).append(f);n.append(i);this.appendListValues(o)}},t.prototype.appendListValues=function(n){var t=this,i=this.getDatesourceList();n.empty();i.forEach(function(i){var f=t.renderListTemplate(i.widgetName,i.uniqueId),r,u;n.append(f);r=n.find("#"+t.designerId+"_datebucket_li_"+i.uniqueId);u=n.find("#"+t.designerId+"_datebucket_remove_icon"+i.uniqueId);u.off("click",t.bbdesigner$.proxy(t.removeConfiguration,t,i.widgetName,r));u.on("click",t.bbdesigner$.proxy(t.removeConfiguration,t,i.widgetName,r));r.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseOver,t.bbdesigner$.proxy(t.liTagMouseOver,t,r,u));r.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseLeave,t.bbdesigner$.proxy(t.liTagMouseLeave,t,r,u))});this.updateScrollBar()},t.prototype.renderListTemplate=function(n,t){return"<li class='e-user-select e-list e-state-default e-list-check e-filterConfig-master-li-container e-datebucketConfig-master-text-span ' style = 'margin: unset; width: 98%; border-radius: unset;' id='"+this.designerId+"_datebucket_li_"+t+"' name='"+n+"' guid='"+t+"'><a class='e-dbrd-designer-configured-data e-chevron-right_01 bbi-remove-shadow' style = 'padding: 8px 0px; display: flex; min-height: 16px;'><span class='e-list-text e-rel bbi-designer-content ' style = 'margin-left: 5px; ' id='"+this.designerId+"_datebucket_li_span"+t+"_textSpan'>"+n+"<\/span><div class='e-chk-image e-icon e-cross-circle bbi-dbrd-designer-hoverable e-datebucket-closeIcon-span bbi-filter-configuration-close' style = 'padding-right: 7px; display: none;'  id='"+this.designerId+"_datebucket_remove_icon"+t+"' data-tooltip=' "+this.locale.dateBucket.remove+"'> <\/div><\/a><\/li>"},t.prototype.updateScrollBar=function(){var t=this.designerInstance.element.find(".e-dbrd-datebucket-container-wrapper"),i=t.find(".e-dbrd-datebucket_listbox").data("BoldBIDashboardScroller"),n;BoldBIDashboard.isNullOrUndefined(i)?(n=t.find(".e-dbrd-datebucket_listbox"),n.addClass("bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3 e-ds-field-container-scroller e-scroller e-js e-widget e-autohide"),n.BoldBIDashboardScroller({scrollerSize:this.designerInstance.scrollerSize.scrollSize,enableTouchScroll:!1,autoHide:!0,height:"200px",width:"99%",buttonSize:this.designerInstance.scrollerSize.buttonSize}).data("BoldBIDashboardScroller")):i.refresh()},t.prototype.getDatesourceList=function(){var r=[],t,i,n,u;if(!BoldBIDashboard.isNullOrUndefined(this.getDateBucketProperties().ConfiguredWidgetList))for(t=this.widgetHelper.getAllWidgets(),i=0;i<this.getDateBucketProperties().ConfiguredWidgetList.length;i++)for(n=0;n<t.length;n++)this.getDateBucketProperties().ConfiguredWidgetList[i].WidgetName===t[n].getJson().UniqueName&&(u={widgetName:t[n].getJson().ContainerSettings.Title,uniqueId:t[n].getJson().UniqueId},r.push(u));return r},t.prototype.removeConfiguration=function(n,t,i){var f=this,r,u;t===void 0&&(t=null);i===void 0&&(i=null);r=[n];u=this.fetchWidgetDetails(n);this.modifyColumnValue(DateTimeFormat.Year,!0,r);this.getDateBucketProperties().ConfiguredWidgetList.forEach(function(t,i){t.WidgetName===n&&f.getDateBucketProperties().ConfiguredWidgetList.splice(i,1)});BoldBIDashboard.isNullOrUndefined(t)||t.remove();this.getDataConfigInstance().postDraggedFields(u.widgetItem,!1,[],null)},t.prototype.liTagMouseOver=function(n,t){n.hasClass("e-select")||(n.addClass("e-dbrd-designer-configured-data-li"),t.show())},t.prototype.liTagMouseLeave=function(n,t){n.hasClass("e-select")||(n.removeClass("e-dbrd-designer-configured-data-li"),t.hide())},t.prototype.triggerInitialSelectionEvent=function(){for(var t=this.getDatesourceList(),n=0;n<t.length;n++)this.setInitialSelection(t[n])},t.prototype.updateConfiguredWidgetsInfoList=function(n,t){var f;t===void 0&&(t=null);var r=this.getDateBucketProperties().ConfiguredWidgetList,u=this.widgetHelper.getCurrentWidgetInstance(),i=BoldBIDashboard.isNullOrUndefined(t)?{WidgetName:u.getJson().UniqueName,WidgetId:u.getJson().UniqueId,FieldId:n.Id}:t;r.length===0?r.push(i):this.checkWidgetsExistInConfiguredWidgetInfo(i)||r.push(i);this.setDatebucketConfigInfo();this.removeOldReferencesOfDatebucket(i);this.triggerInitialSelectionEvent();f=DateTimeFormat[this.getDateBucketProperties().selectedValue];this.modifyColumnValue(f);this.addToCacheCollection()},t.prototype.removeConfiguredWidgetsInfoList=function(n){for(var i=this.getDateBucketProperties().ConfiguredWidgetList,r=this.widgetHelper.getCurrentWidgetInstance(),u={WidgetName:r.getJson().UniqueName,WidgetId:r.getJson().UniqueId,FieldId:n.Id},t=0;t<i.length;t++)i[t].WidgetId===u.WidgetId&&i.splice(t,1)},t.prototype.removeOldReferencesOfDatebucket=function(n){for(var u,i,r,f=this.widgetHelper.getAllDatebucketWidgets(),t=0;t<f.length;t++)if(!BoldBIDashboard.isNullOrUndefined(f[t])&&(u=f[t],this.getJson().UniqueId!==u.getJson().UniqueId&&u.checkWidgetsExistInConfiguredWidgetInfo(n)))for(i=u.getDateBucketProperties().ConfiguredWidgetList,r=0;r<i.length;r++)i[r].WidgetId===n.WidgetId&&i[r].FieldId===n.FieldId&&i.splice(t,1)},t.prototype.setDatebucketConfigInfo=function(){var i=this.getWidgetList(),n,t;if(this.filterObject.DatebucketConfigurationModel!=null){for(n=0;n<this.filterObject.DatebucketConfigurationModel.MastersCollection.length;n++)this.getDateBucketProperties().UniqueId===this.filterObject.DatebucketConfigurationModel.MastersCollection[n].MasterInfo.UniqueId&&this.filterObject.DatebucketConfigurationModel.MastersCollection.splice(n,1);t=this.generateDatebucketWidgetCollections(this,i);this.filterObject.DatebucketConfigurationModel.MastersCollection.push(t);this.getMasterSlaveFilterInstance().RefreshFilterSettings()}},t.prototype.getWidgetList=function(){for(var t,i=this.getConfiguredWidgetInstances(),r=[],n=0;n<i.length;n++)t=new WidgetInfo,t.ID=i[n].Name,t.Name=i[n].getJson().UniqueName,t.IsPoPSupported=i[n].IsPoPSupportedWidget,r.push(t);return r},t.prototype.getConfiguredWidgetInstances=function(){var n=this;return this.widgetHelper.getAllWidgets().filter(function(t){return n.checkWidgetsExistInConfiguredWidgetInfo({WidgetName:t.getJson().UniqueName,WidgetId:t.getJson().UniqueId,FieldId:""})})},t.prototype.checkWidgetsExistInConfiguredWidgetInfo=function(n){for(var i=!1,r=this.getDateBucketProperties().ConfiguredWidgetList,t=0;t<r.length;t++)if(r[t].WidgetId===n.WidgetId&&r[t].WidgetName===n.WidgetName){i=!0;break}else i=!1;return i},t.prototype.getConfiguredWidgetsInfoList=function(n){for(var i=this.bbdesigner$.extend(!0,[],n),r=[],t=0;t<i.length;t++)r.push(i[t]);return r},t.prototype.generateDatebucketWidgetCollections=function(n,t){var i=new Widgetcollection,r=new ProfileInfo,f=[],u=new ProfileManager;return r.Name=n.getJson().ContainerSettings.Title+"(generated)",r.Option=!1,f=this.getConfiguredWidgetsInfoList(t,n),u.ProfileInfo=r,u.WidgetInfo=f,i.MasterInfo.Name=n.getJson().ContainerSettings.Title,i.MasterInfo.UniqueId=n.getJson().UniqueId,i.MasterInfo.ID=n.getJson().UniqueName,i.MasterInfo.IsDatebucket=!0,i.ProfileManager.push(u),i},t.prototype.updateDateBucketPropertyChange=function(n,t,i){var r=!1;switch(n){case"Name":this.widgetJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,i);break;case"DefaultType":this.updateDefaultType(i);break;default:r=!0}},t.prototype.updateDefaultType=function(n){this.getDateBucketProperties().selectedValue=n;this.dateBucketObj.option("value",n);this.designerInstance.modules.serialization.notifyChange()},t.prototype.onChangeDateBucketValue=function(n){if(n.isInteraction){if(this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;this.getDateBucketProperties().selectedValue=n.value;this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.doInteractionForDatebucket(n,this.getMasterSlaveFilterInstance().getSelectedValuesForWidgetRequest());this.addToCacheCollection()}},t.prototype.addToCacheCollection=function(){if(!BoldBIDashboard.isNullOrUndefined(this.designerInstance)&&!this.designerInstance.loadFromCache){var n={uniqueId:this.widgetJson.UniqueId,data:{value:this.getDateBucketProperties().selectedValue}};this.designerInstance.addToWidgetCacheCollection(this.widgetJson.UniqueName,n,this.designerInstance.isDesignMode())}},t.prototype.doInteractionForDatebucket=function(n,t){var e=DateTimeFormat[this.getDateBucketProperties().selectedValue],u,i,r,f;this.modifyColumnValue(e);switch(this.designerInstance.model.mode){case BoldBIDashboard.Designer.mode.designpreview:case BoldBIDashboard.Designer.mode.view:this.getDateBucketProperties().ConfiguredWidgetList.length>0&&(u=this.getWidgetCollection(),t=BoldBIDashboard.isNullOrUndefined(t)?[]:t,i=n.selectedValue.toString(),r=new DateBucketModel,r.DateBucketFormat=DateTimeFormat[i]||DateTimeFormatForFilter[i],r.DateBucketName=this.getJson().UniqueId,f=this.getFilterItems(),this.getDateBucketProperties().DatebucketFilterValues=[this.updateSelectedFilterValues(this.widgetJson.UniqueName,"bbi-designer-dataset-datetime",f)],this.removeCurrentMasterOnDateBucketChange(),this.fetchDataForDateBucket(u,t));break;case BoldBIDashboard.Designer.mode.design:this.triggerInitialSelectionEvent()}},t.prototype.processFilterInformation=function(){return console.error("API level filtering is not supported for this widget"),!1},t.prototype.removeCurrentMasterOnDateBucketChange=function(){var n=this.getConfiguredWidgetInstances(),t;if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0)for(t=0;t<n.length;t++)if(n[t].isCurrentMaster){n[t].isCurrentMaster=!1;break}},t.prototype.modifyColumnValue=function(n,t,i){for(var o,u,s,f,r,c,h=!BoldBIDashboard.isNullOrUndefined(t)&&t&&!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0?i:this.getWidgetCollection(),e=0;e<h.length;e++)if(o=h[e],u=this.getWidgetInstanceByName(o),!BoldBIDashboard.isNullOrUndefined(u))for(this.getDataConfigInstance().getUpdatedWidgetInstanceForDatebucket(u),s=u.DataGroupInfo,f=this.getConfiguredWidgetFieldListByWidgetName(o),r=0;r<f.length;r++)BoldBIDashboard.isNullOrUndefined(f[r])||(c=this.getCurrentFieldInfoByUniqueName(s,f[r].UniqueColumnName),this.updateDatebucketInfo(f[r],c,n,t),this.updateDataGroupInfo(s,u))},t.prototype.updateDataGroupInfo=function(n,t){t.updateDataGroupInfo(n,{update:!0,columnUpdate:!1,rowUpdate:!1,valueUpdate:!1});this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.designerInstance.modules.serialization.notifyChange()},t.prototype.getCurrentFieldInfoByUniqueName=function(n,t){var i,u,r;if(!BoldBIDashboard.isNullOrUndefined(n))for(i=0;i<n.FieldContainers.length;i++)if(u=n.FieldContainers[i].FieldInfos,r=u.filter(function(n){return n.UniqueColumnName===t}),r.length>0)return r[0];return null},t.prototype.updateDatebucketInfo=function(n,t,i,r){var u=this.getDateBucketProperties().selectedValue;BoldBIDashboard.isNullOrUndefined(DateTimeFormat[u])||BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(n.DateBucketInfo)||n.DateBucketInfo.DatebucketId!==this.getDateBucketProperties().UniqueId||(n.DateBucketInfo.DateBucketFormat=t.DateBucketInfo.DateBucketFormat=i,n.IsDisplayNameEdited||(i=!BoldBIDashboard.isNullOrUndefined(r)&&r?n.DateTimeFormat:i,n.DisplayName=t.DisplayName=i+"("+n.Name+")",this.getDateBucketProperties().selectedValue=i.toString()),!BoldBIDashboard.isNullOrUndefined(r)&&r&&(n.DateBucketInfo=t.DateBucketInfo=null))},t.prototype.setInitialSelection=function(){var n=this,t=this.getFilterItems();n.getDateBucketProperties().DatebucketFilterValues=[this.updateSelectedFilterValues(this.widgetJson.UniqueName,"bbi-designer-dataset-datetime",t)];this.designerInstance.modules.serialization.notifyChange();this.widgetJson.FilterSettings.ActAsMasterWidget=!1},t.prototype.updateSelectedFilterValues=function(n,t,i){var r=new SelectedFilterValue,f=new InitialDimensionFilter,e=new InitialMeasureFilter,u=new InitialDateFilter;r.ReportName=n;r.IsStdDateTime=i.IsStdDateTime;r.IsMultiSelection=i.IsMultiSelection;r.IsGroupBarFilter=i.IsGroupBarFilter;r.IsRange=i.IsRange;switch(t){case"bbi-designer-dataset-datetime":case"bbi-designer-dataset-time":u.DateFilterCondition=i.Action;u.DisplayDateFilterList=i.FilterInfo.DisplayFilterList;u.DateFilterList=i.FilterInfo.DateFilterList;u.DateFilterType=BoldBIDashboard.isNullOrUndefined(i.FilterInfo.DateFilterType)?u.DateFilterType:i.FilterInfo.DateFilterType;u.DateFormat=i.FilterInfo.DateFormat;u.SelectedRangeforRelativeFilter=BoldBIDashboard.isNullOrUndefined(i.FilterInfo.SelectedRangeforRelativeFilter)?null:i.FilterInfo.SelectedRangeforRelativeFilter}return r.InitialDimensionFilter=f,r.InitialMeasureFilter=e,r.InitialDateFilter=u,r},t.prototype.getFilterItems=function(){var t=[],i=[],r=[],n=this.getDateBucketProperties().selectedValue,u,f;return r.push(n),i.push(n),t={DateFormat:DateTimeFormat[n],DisplayFilterList:r,DateFilterList:i},u=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include),f={FilterInfo:t,Action:u,IsStdDateTime:!1,IsMultiSelection:!1,IsRange:!1},f},t.prototype.getWidgetCollection=function(){for(var t=[],i=this.getDateBucketProperties().ConfiguredWidgetList,n=0;n<i.length;n++)t.push(i[n].WidgetName);return t},t.prototype.fetchDataForDateBucket=function(n,t){var u=this,i=[],r;n.forEach(function(n){var t=u.fetchWidgetDetails(n);BoldBIDashboard.isNullOrUndefined(t)||i.push(n)});r=this.getDateBucketProperties().DatebucketFilterValues;i.length>0&&this.getDataConfigInstance().fetchDataForWidgets(i,!1,t,!1,r)},t.prototype.fetchWidgetDetails=function(n){var t=this.getWidgetInstanceByName(n),i=this.getMasterSlaveFilterInstance().GetWidgetElementByReportName(n),r=t.DataGroupInfo,u=this.getDataConfigInstance().convertDataGroupInfoToFieldInfo(r,t);return{widgetInstance:t,fieldList:u,widgetItem:i}},t.prototype.getConfiguredWidgetFieldListByWidgetName=function(n){var t=[],i=this.fetchWidgetDetails(n);return BoldBIDashboard.isNullOrUndefined(i)||(t=this.getDateFieldList(i.fieldList)),t},t.prototype.getWidgetInstanceByName=function(n){var t=this.getMasterSlaveFilterInstance().GetWidgetElementByReportName(n);return BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(t)},t.prototype.getDateFieldList=function(n){for(var i=[],t=0;t<n.length;t++)n[t].DateTimeFormat===DateTimeFormat.None||BoldBIDashboard.isNullOrUndefined(n[t].DateBucketInfo)||i.push(n[t]);return i},t.prototype.getDataConfigInstance=function(){return this.designerInstance.modules.dataConfiguration},t.prototype.getMasterSlaveFilterInstance=function(){return this.designerInstance.modules.masterSlaveFilter},t.prototype.updateDatebucketData=function(n){var i,t,r;this.dataValues=n;i=25;t={cssClass:"bbi-dbrd-control e-datebucket-control",dataSource:this.getDataSource(),popupHeight:this.getPopupHeight(),width:this.dateBucketItem.width().toString(),height:i.toString(),value:this.getDateBucketProperties().selectedValue,change:this.bbdesigner$.proxy(this.onChangeDateBucketValue,this),delimiterChar:", "};BoldBIDashboard.isNullOrUndefined(this.dateBucketElement)||BoldBIDashboard.isNullOrUndefined(this.dateBucketObj)||(this.dateBucketObj.destroy(),this.dateBucketObj=null);BoldBIDashboard.isNullOrUndefined(this.dateBucketObj)?(r=this.designerId+"dateBucketElement"+this.widgetJson.UniqueName,this.dateBucketElement=BoldBIDashboard.buildTag("input.e-dateBucketElement-element","",{position:"relative","font-size":"12px","background-color":this.designerInstance.modules.themeHelper.getWidgetTileBackground(null)},{id:r}),this.dateBucketItem.append(this.dateBucketElement),this.dateBucketItem.css("padding","5px"),this.dateBucketElement.BoldBIDashboardDropDownList(t).appendTo(this.dateBucketElement[0]),this.dateBucketObj=this.dateBucketElement.data("BoldBIDashboardDropDownList"),this.ControlContainer.find(".bbi-dbrd-control-error").hide(),this.refreshDateBucket()):this.dateBucketObj.option("fields",t.fields);BoldBIDashboard.isNullOrUndefined(this.dataValues)||BoldBIDashboard.isNullOrUndefined(this.dataValues.data)||(this.getDateBucketProperties().selectedValue=this.dataValues.data.value);this.getDateBucketProperties().DatebucketFilterValues=[this.updateSelectedFilterValues(this.widgetJson.UniqueName,"bbi-designer-dataset-datetime",this.getFilterItems())];this.initialSelectionForDatebucket()},t.prototype.initialSelectionForDatebucket=function(){var n,i,r,t;BoldBIDashboard.isNullOrUndefined(this.dateBucketObj)||(this.getDateBucketProperties().DatebucketFilterValues.length>0&&(n=[],n=this.getSelectedItems(),i=this.dateBucketObj.model.change,this.dateBucketObj.model.change=null,n.SelectedItems.length>0&&(this.dateBucketObj.selectItemByValue(n.SelectedItems),r=n.SelectedItems[0].toString(),this.modifyColumnValue(DateTimeFormat[r])),this.dateBucketObj.model.change=i,this.dateBucketObj.getSelectedItem().length===this.dateBucketObj.getListData().length&&(this.getDateBucketProperties().SelectedFilterValues=[])),!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.dashboardFromData)&&this.designerInstance.model.dashboardFromData.loadFromData&&(t=this.controlContainer.find("#"+this.dateBucketElement.attr("id")+"_hidden"),t.length===1&&this.dateBucketElement.val()!==""&&this.bbdesigner$(t).val(this.dateBucketElement.val())))},t.prototype.getSelectedItems=function(){for(var n={UnselectedItems:[],SelectedItems:[]},t=0;t<this.getDateBucketProperties().DatebucketFilterValues.length;t++){var i=this.getDateBucketProperties().DatebucketFilterValues[t],r=i.InitialDateFilter.DisplayDateFilterList,u=i.InitialDateFilter.DateFilterCondition;u===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Exclude)||u===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Exclude)?n.UnselectedItems=r:n.SelectedItems=r}return n},t.prototype.disposeConfigurationInfo=function(){for(var t=this.getDateBucketProperties().ConfiguredWidgetList,i=[],n=0;n<t.length;n++)i.push(t[n].WidgetName);this.modifyColumnValue(DateTimeFormat.Year,!0,i);this.getDateBucketProperties().ConfiguredWidgetList=[]},t.prototype.removeFieldItem=function(n,t){var r,i;if(this.modifyColumnValue(DateTimeFormat.Year,!0,n),r=this.getDateBucketProperties().ConfiguredWidgetList,!BoldBIDashboard.isNullOrUndefined(t)&&this.checkWidgetsExistInConfiguredWidgetInfo(t))for(i=0;i<r.length;i++)r[i].WidgetId===t.WidgetId&&r[i].FieldId===t.FieldId&&r.splice(i,1)},t.prototype.updateDateBucketSize=function(){this.refreshDateBucket()},t.prototype.refreshDateBucket=function(){this.dateBucketObj&&(this.dateBucketObj.option("width","100%"),this.setDateBucketTop())},t.prototype.setDateBucketTop=function(){if(this.cellInfo.RowSpan>2){var t=this.widgetJson.ContainerSettings.ShowHeader?this.controlContainer.find(".bbi-dbrd-control-header").height():0,n=(this.controlContainer.innerHeight()-(t+11+25))/2;n=n<0?0:n;this.dateBucketItem.css("padding","4px 0px 0px 0px");this.contentContainer.css({padding:"0px",overflow:"visible"});this.controlContainer.find(".bbi-dbrd-control-container-wrapper").css("padding-top",n+"px")}else this.dateBucketItem.css("padding","0px"),this.contentContainer.css({padding:"0px",overflow:"hidden"}),this.controlContainer.find(".bbi-dbrd-control-container-wrapper").css("padding-top","0px")},t.prototype.updateControlContainerPadding=function(){if(!BoldBIDashboard.isNullOrUndefined(this.controlContainer)&&this.controlContainer.length>0){var n=this.controlContainer.find(".bbi-dbrd-control-container-wrapper");n[0].style.padding="0px 8px"}},t.prototype.getCurrentDateBucketObject=function(){return this.dateBucketElement.data("BoldBIDashboardDropDownList")},t.prototype.getDateBucketProperties=function(){return this.widgetJson},t.prototype.setContainerDefaultProperties=function(){var t=n.prototype.getContainerSettings.call(this);t.ShowMaximize=t.PinWidget=t.EnableImageExport=t.EnablePdfExport=t.EnableExcelExport=t.EnableCsvExport=!1},t.prototype.disposeDateBucket=function(){BoldBIDashboard.isNullOrUndefined(this.dateBucketElement)||(BoldBIDashboard.isNullOrUndefined(this.dateBucketObj)||(this.dateBucketObj.destroy(),this.disposeConfigurationInfo()),this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.DateBucket))},t}(BoldBIDashboard.Dashboard.Widget),DateBucketModel=function(){function n(){}return n}(),DateBucketInformation=function(){function n(){this.IsWhereQueryFilter=!1;this.DateBucketFormat=DateTimeFormat.None;this.DatebucketId=""}return n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.DateBucketItem",InternalDateBucketItem,window);BoldBIDashboard.DashboardDesignerUtility.DateBucketItem.prototype.initialize();__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalTreeMapReportItem=function(n){function t(t){var i=n.call(this,t,"TreeMap","e-treemap-item")||this;return i.isDrillUp=!1,i.treemapItem=null,i.colorContainer=null,i.parentColor=null,i.dataValues=null,i.desatColorMapping=null,i.colorCustomization=null,i.legendTitle="",i.legendLeftLabel="",i.legendRightLabel="",i.locale=null,i.isFieldDropped=!1,i.currentDraggedField=null,i.bbdesigner$=t.bbdesigner$,i.locale=t.getLocalizationContent(),i.widgetJson=new TreeMapProperties(t),i.designerId=i.designerInstance._id,i.propertyPanel=t.modules.propertyPanel,i.colorCustomization=t.modules.advancedColorCustomization,i.dataSet=t.modules.dataSet,i.mapHelper=new MapCommonHelper(i.designerInstance),i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.relation,GroupId:"c55f5601-8e79-4a16-94d6-ddd4cc051306",Items:[{id:"8d3e286f-5057-4267-b5ee-21b2d29883ab",widgetName:"TreeMap",widgetDisplayName:n.itemPanel.widgetTitle.treeMap,cssClass:"bbi-widgeticon bbi-designer-widget-treemap",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.TreeMapItem",searchCategory:["treemap","relationship"],widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.treeMap,description:n.itemPanel.widgetDescription.treeMapDesc,dataRequirement:n.itemPanel.widgetDataRequirements.treeMapDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.TreeMapProperties"}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){this.createTreeMapContainer(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.treemapElement)||this.updateTreeMapSize()},t.prototype.getWidgetImage=function(){return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Tree-Map" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g transform="translate(12.000000, 12.000000)" fill-rule="nonzero">            <rect id="Rectangle" fill="var(--widget-notconfigured-image-background2)" x="0" y="-3.55271368e-15" width="102" height="38.3333333" rx="2"><\/rect>            <rect id="Rectangle-Copy-2" fill="var(--widget-notconfigured-image-background1)" x="109.695217" y="0" width="92.2643547" height="94.1904762" rx="2"><\/rect>            <rect id="Rectangle-Copy-3" fill="var(--widget-notconfigured-image-background2)" x="209.566981" y="0" width="90.0483121" height="94.1904762" rx="2"><\/rect>            <rect id="Rectangle-Copy" fill="var(--widget-notconfigured-image-background1)" x="0" y="44.9047619" width="102" height="139.095238" rx="2"><\/rect>            <rect id="Rectangle-Copy" fill="var(--widget-notconfigured-image-background2)" x="109.695217" y="101.8" width="189.920076" height="82.2" rx="2"><\/rect>        <\/g>    <\/g><\/svg>'},t.prototype.update=function(n){this.updateTitleSubtitleTheme();this.updateTreeMapData(n)},t.prototype.applyWidgetTheme=function(){var u,n,t,i;if(this.updateTitleSubtitleTheme(),BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)){if(u="#"+this.designerId+"treemapElement"+this.widgetJson.UniqueName,n=this.treemapElement.data("BoldBIDashboardTreeMap"),this.contentContainer.find(u).css({background:"transparent",color:this.designerInstance.modules.themeHelper.getLegendFontColor()}),this.applyThemeForDrillDown(),this.generateLabel(this.dataValues,n.model,this.designerInstance.modules.themeHelper.getTreemapDataLabelFontColor()),this.generateTooltip(this.dataValues,n.model),BoldBIDashboard.isNullOrUndefined(this.dataValues)||!this.getMapProperties().EnableColorSettings||BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)||this.getMapProperties().ColorCustomization.Type!==ColorCustomizationType.Individual){if(!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().DefaultColor)&&!this.getMapProperties().DefaultColor.IsEdited&&!this.getMapProperties().EnableColorSettings){var r=this.getValueContainer(),f=r.FieldInfos.length>1?r.FieldInfos[1].UniqueColumnName:r.FieldInfos[0].UniqueColumnName,e=BoldBIDashboard.Dashboard.WidgetHelper.getGlobalColumnId(f,this.DataGroupInfo.FieldContainers),o=this.designerInstance.modules.resource.getColumnColorCodeBasedonTheme(e),s=this.treemapElement.data("BoldBIDashboardTreeMap");s.model.desaturationColorMapping.color=o}}else t=JSON.parse(this.dataValues.data),i=this.treemapElement.data("BoldBIDashboardTreeMap"),this.updateSolidColorInfo(t),BoldBIDashboard.isNullOrUndefined(i)||(i.model.dataSource=t);this.refresh()}else BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this)},t.prototype.updateTitleSubtitleTheme=function(){var n=this.designerInstance.modules.themeHelper.getTreeMapHeaderTitle(),t=this.designerInstance.modules.themeHelper.getTreeMapHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getMapProperties().ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej1.treemap.all.min.js",NameSpace:"BoldBIDashboard.datavisualization.TreeMap"},DependentScripts:[]}},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,"BoldBIDashboard.datavisualization.TreeMap")},t.prototype.canCombineRequest=function(){return!0},t.prototype.getFieldContainer=function(){var r=new BoldBIDashboard.Dashboard.FieldContainerForUI,i,t,u;return r.Name="Value",r.DisplayName=this.locale.fieldContainer.value,r.ContainerType=FieldContainerType.Numeric,r.CategoryCount=2,r.Required=!0,i=new BoldBIDashboard.Dashboard.FieldContainerForUI,i.Name="Column",i.DisplayName=this.locale.fieldContainer.column,i.ContainerType=FieldContainerType.Non_Numeric,i.IsDrillSection=!0,i.Required=!0,t=new BoldBIDashboard.Dashboard.FieldContainerForUI,t.Name="HiddenColumn",t.DisplayName=this.locale.dataconfiguration.filedContainer.hiddenColumnName,t.ContainerType=FieldContainerType.None,t.QueryOrder=0,t.ShowDescriptionIcon=!0,t.TooltipText=this.locale.fieldContainer.hiddenColumnMessage.treeMap,u=BoldBIDashboard.DashboardUtil.getToolTipFieldsDefaultContainer(),[r,i,t,n.prototype.getFilterColumn.call(this),u]},t.prototype.updateDisplayTextBasedProperties=function(){var n=this.treemapElement.data("BoldBIDashboardTreeMap");this.generateTooltip(this.dataValues,n);this.updateLegendTitle(n);this.refresh()},t.prototype.getValueContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Value")},t.prototype.getColumnContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Column")},t.prototype.onFieldSettingsClick=function(n,t){for(var i=0;i<t.length;i++)n.ContainerName==="HiddenColumn"&&(t[i].Name==="Sort"||t[i].Name==="DimensionFilters"||t[i].Name==="MeasureFilter"||t[i].Name==="RelativeDateFilter"||t[i].Name==="MeasureFormat")?t[i].IsVisible=!1:t[i].Name==="Sort"&&(t[i].IsVisible=!1);return t},t.prototype.getJson=function(){return this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t)},t.prototype.onFieldDragDrop=function(n,t,i){return this.onFieldDragAndDrop(n,t,i)},t.prototype.getPropertyPanelItems=function(){return this.getTreeMapPropertyPanel()},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateTreeMapProperties(n,t,i,r)},t.prototype.updateInitialSelection=function(){this.initialSelectionForTreeMap()},t.prototype.clearFilter=function(n){BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this);this.getMapProperties().SelectedFilterValues=[];this.isCurrentMaster=!1;this.designerInstance.modules.serialization.notifyChange();BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName);var t=this.treemapElement.data("BoldBIDashboardTreeMap");BoldBIDashboard.isNullOrUndefined(t)||(t.selectedItems=[],this.refresh())},t.prototype.getMobileViewHeight=function(){return 3*this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.refresh=function(){var n=this.treemapElement.data("BoldBIDashboardTreeMap");BoldBIDashboard.isNullOrUndefined(n)||this.treemapElement.BoldBIDashboardTreeMap("refresh")},t.prototype.dispose=function(){this.disposeTreeMap();n.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.locale.itemPanel.widgetDataRequiredMessage.treeMapDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.getWidgetInfo=function(t,i){var r=n.prototype.getWidgetInfo.call(this,t,i);return r.ColorCustomization=this.getColorCustomization(),r},t.prototype.resetProperties=function(){this.isNecessaryDataConfigured()||(this.setDefaultColorCustomization(),BoldBIDashboard.isNullOrUndefined(this.colorContainer)||(this.renderSettings(),this.renderColorSettingsElement()),this.propertyPanel.updateCategoryVisibility("TreeMap","Formatting",!1))},t.prototype.updateDataGroupInfo=function(t,i){var s=this,o,r,e,u,f;if(n.prototype.updateDataGroupInfo.call(this,t,i),this.getMapProperties().EnableDrilldown&&this.getColumnContainer().FieldInfos.length<=1&&(o=this.treemapElement.data("BoldBIDashboardTreeMap"),this.getMapProperties().EnableDrilldown=!1,o.model.leafItemSettings.labelPath=null,o.model.drillDownLevel=0,this.drillLevelInfo=null),r=this.DataGroupInfo.FieldContainers.length>0?this.getValueContainer().FieldInfos:null,e=this.DataGroupInfo.FieldContainers.length>0?this.getColumnContainer().FieldInfos:null,r.length!==0)for(u=0;u<e.length;u++)BoldBIDashboard.isNullOrUndefined(e[u].CustomSorting)&&(e[u].CustomSorting={CustomSortType:CustomSortType.DataSource,CustomSortOrder:SortingOrder[SortingOrder.Descending],FieldName:r[0].Field,FieldId:r[0].DataId,SummaryType:r[0].SummaryType});this.isFieldDropped&&(f=this.getColumnContainer().FieldInfos.filter(function(n){return n.Id===s.currentDraggedField.Id}).length>0?this.getColumnContainer().FieldInfos.filter(function(n){return n.Id===s.currentDraggedField.Id})[0]:null,BoldBIDashboard.isNullOrUndefined(f)||(BoldBIDashboard.isNullOrUndefined(f.FilterInfo)&&(f.FilterInfo={}),f.FilterInfo.DimensionFilterInfo=this.currentDraggedField.FilterInfo.DimensionFilterInfo),this.isFieldDropped=!1,this.currentDraggedField=null)},t.prototype.onFieldDragAndDrop=function(n){var i,t;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.ContainerName)&&BoldBIDashboard.isNullOrUndefined(n.FilterInfo)&&BoldBIDashboard.isNullOrUndefined(n.UniqueColumnName))if(n.ContainerName==="Column")n.FilterInfo={},BoldBIDashboard.isNullOrUndefined(n.FilterInfo.DimensionFilterInfo)&&(this.isFieldDropped=!0,n.FilterInfo.DimensionFilterInfo={IsAllowFilteringApplied:!1,IsConditionFilteringApplied:!1,IsTopNFilteringApplied:!0,AllowFilterInfo:{IsCheckAll:!0,IsInclude:!0,FilterValues:null},ConditionFilterInfo:{ColumnName:n.Id,SummaryType:SummaryType.SUM,ConditionSummaryType:NumberFilterOption.Equals,Values:["0"]},TopNFilterInfo:!BoldBIDashboard.isNullOrUndefined(this.getValueContainer())&&this.getValueContainer().FieldInfos.length>0?{Mode:RankType.Top,NoOfRecords:100,ColumnName:this.getValueContainer().FieldInfos.length>0?this.getValueContainer().FieldInfos[0].Name:n.Name,ColumnId:this.getValueContainer().FieldInfos.length>0?this.getValueContainer().FieldInfos[0].Id:n.Id,SummaryType:this.getValueContainer().FieldInfos.length>0?this.getValueContainer().FieldInfos[0].SummaryType:SummaryType.COUNT,IsBasedOnDateAndTimeField:!1,DateFormat:DateTimeFormatForFilter.Year}:null},this.currentDraggedField=n);else if(n.ContainerName==="Value"&&!BoldBIDashboard.isNullOrUndefined(this.getColumnContainer())&&this.getColumnContainer().FieldInfos.length>0)for(i=this.getColumnContainer().FieldInfos,t=0;t<i.length;t++)BoldBIDashboard.isNullOrUndefined(i[t].FilterInfo)||BoldBIDashboard.isNullOrUndefined(i[t].FilterInfo.DimensionFilterInfo)||!BoldBIDashboard.isNullOrUndefined(i[t].FilterInfo.DimensionFilterInfo.TopNFilterInfo)||(i[t].FilterInfo.DimensionFilterInfo.TopNFilterInfo={Mode:RankType.Top,NoOfRecords:100,ColumnName:this.getValueContainer().FieldInfos.length>0?this.getValueContainer().FieldInfos[0].Name:n.Name,ColumnId:this.getValueContainer().FieldInfos.length>0?this.getValueContainer().FieldInfos[0].Id:n.Id,SummaryType:this.getValueContainer().FieldInfos.length>0?this.getValueContainer().FieldInfos[0].SummaryType:SummaryType.COUNT,IsBasedOnDateAndTimeField:!1,DateFormat:DateTimeFormatForFilter.Year});return!0},t.prototype.createTreeMapContainer=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)),this.drillLevelInfo=this.getMapProperties().EnableDrilldown?[]:null,this.updateBackWardCompatability());this.renderTreeMapElement();!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.TreeMap)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.renderTreeMapWidget=function(n){var i=this.getFromValue(n,this.getValueContainer().FieldInfos[0].UniqueColumnName),r=this.getToValue(n,this.getValueContainer().FieldInfos[0].UniqueColumnName),u=this.generateLevels(),t;this.desatColorMapping={color:BoldBIDashboard.DashboardUtil.defaultColorPalette[0],from:.1,to:1,rangeMinimum:i,rangeMaximum:r+1};t={dataSource:n,isResponsive:!1,enableResize:!1,drillDownLevel:0,weightValuePath:this.getValueContainer().FieldInfos[0].UniqueColumnName,colorValuePath:this.getValueContainer().FieldInfos.length>1?this.getValueContainer().FieldInfos[1].UniqueColumnName:this.getValueContainer().FieldInfos[0].UniqueColumnName,colorPath:this.getValueContainer().FieldInfos.length>1?this.getValueContainer().FieldInfos[1].UniqueColumnName:this.getValueContainer().FieldInfos[0].UniqueColumnName,enableDrillDown:this.getMapProperties().EnableDrilldown,showLegend:this.getMapProperties().ShowLegend&&this.getResponsiveLegendVisibility(),legendSettings:{mode:"interactive",dockPosition:"bottom",textPath:null},desaturationColorMapping:this.desatColorMapping,levels:u,leafItemSettings:{showLabels:!0,labelPosition:"topleft",labelVisibilityMode:"hideonexceededlength"},showSubItems:!this.getMapProperties().EnableDrilldown,highlightOnSelection:!BoldBIDashboard.isNullOrUndefined(this.widgetJson)&&!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().FilterSettings)&&this.getMapProperties().FilterSettings.ActAsMasterWidget||!BoldBIDashboard.isNullOrUndefined(this.widgetJson)&&!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().UrlLink)?!0:!1,isVirtualRender:this.getMapProperties().EnableDrilldown,preRender:this.getMapProperties().EnableDrilldown?this.bbdesigner$.proxy(this.drillStarted,this):null,highlightBorderThickness:3,highlightBorderBrush:"#666666",drillDownHeaderColor:"#B2B2B2",drillDownSelectionColor:"#FFFFFF",header:this.DataGroupInfo.FieldContainers.length>0&&this.getColumnContainer().FieldInfos.length>1&&this.getMapProperties().EnableDrilldown?this.getColumnContainer().FieldInfos[0].Name:null,drillDownItemSelected:this.getMapProperties().EnableDrilldown?this.bbdesigner$.proxy(this.treeMapItemClick,this):null,treeMapItemSelected:this.getMapProperties().EnableDrilldown?null:this.bbdesigner$.proxy(this.treeMapItemClick,this),headerTemplateRendering:this.bbdesigner$.proxy(this.headerTemplate,this),loaded:this.bbdesigner$.proxy(this.treemapLoaded,this),showTooltip:this.getMapProperties().ShowTooltip};this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getColumnContainer().FieldInfos.length>0&&this.setColorCustomization(this.dataValues,t);this.generateLabel(n,t);this.generateTooltip(n,t);this.treemapElement.BoldBIDashboardTreeMap(t);this.updateLegendVisibility(t);this.bbdesigner$(this.treemapElement).on("mouseover",this.bbdesigner$.proxy(this.setCursorType,this));this.hideWidgetNotConfigured()},t.prototype.renderTreeMapElement=function(){this.treemapItem=BoldBIDashboard.buildTag("div.e-treemapitem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder,overflow:"hidden","background-color":"transparent"},{id:this.designerId+"treemapItem"+this.widgetJson.UniqueName});this.treemapElement=BoldBIDashboard.buildTag("div.e-treemap-element","",{width:"100%",height:"100%",position:"relative","background-color":"transparent","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designerId+"treemapElement"+this.widgetJson.UniqueName});this.contentContainer.append(this.treemapItem);this.treemapItem.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designerId+"_designer_waiting_popup bbi-designer-loader",template:this.designerInstance.getWaitingPopupTemplate()});this.controlContainer.data("widgetInstance",this);this.treemapItem.append(this.treemapElement);this.controlId=this.treemapElement.attr("id")},t.prototype.updateTreeMapData=function(n){var i,u,f,e;this.dataValues=n;BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this);this.bbdesigner$(this.contentContainer.children()[0]).css("display","none");BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this);var t=this.treemapElement.data("BoldBIDashboardTreeMap"),r=null,o=null,s=null;if(this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo),BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error)BoldBIDashboard.isNullOrUndefined(n.Message)||(this.hideWidgetNotConfigured(),this.widgetContainerHelper.showControlError(this,n));else{if(n.noDataAvailable)this.treemapItem.hide(),this.hideWidgetNotConfigured(),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this);else if(this.treemapItem.show(),!BoldBIDashboard.isNullOrUndefined(n)&&n.data!=="[]"&&BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty))if(r=JSON.parse(n.data),BoldBIDashboard.isNullOrUndefined(t)||(t.model.header=this.DataGroupInfo.FieldContainers.length>0&&this.getColumnContainer().FieldInfos.length>1?this.getColumnContainer().FieldInfos[0].Name:null),o=n.formattedData.formatminvalue,s=n.formattedData.formatmaxvalue,this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getColumnContainer().FieldInfos.length>0){if(this.updateSolidColorInfo(r),BoldBIDashboard.isNullOrUndefined(t))this.renderTreeMapWidget(r),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.propertyPanel.updateCategoryVisibility("TreeMap","Formatting",!0),this.getColumnContainer().FieldInfos.length>1?this.propertyPanel.updateItemVisibility("TreeMap","BasicSettings","EnableDrilldown",!0):this.propertyPanel.updateItemVisibility("TreeMap","BasicSettings","EnableDrilldown",!1));else{if(t.model.tooltipTemplate="",this.DataGroupInfo.FieldContainers.length>0)for(i=0;i<this.getColumnContainer().FieldInfos.length;i++)this.controlContainer.find("#"+this.controlId+"_tooltip"+i).remove(),this.controlContainer.find("#"+this.controlId+"_labeltemplate"+i).remove();if(t.model.dataSource=r,this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.propertyPanel.updateCategoryVisibility("TreeMap","Formatting",!0),this.getColumnContainer().FieldInfos.length>1){if(this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.propertyPanel.updateItemVisibility("TreeMap","BasicSettings","EnableDrilldown",!0),this.getMapProperties().EnableDrilldown)for(t.model.enableDrillDown=!0,i=0;i<t.model.levels.length;i++)t.model.levels[i].showLabels=!0,t.model.levels[i].labelPosition="topleft",t.model.levels[i].labelVisibilityMode="hideonexceededlength"}else t.model.enableDrillDown=this.getMapProperties().EnableDrilldown=!1,this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.propertyPanel.updateItemVisibility("TreeMap","BasicSettings","EnableDrilldown",!1),this.setPropertyElement("BasicSettings","EnableDrilldown",!1));t.model.showTooltip=this.getMapProperties().ShowTooltip;t.model.weightValuePath=this.getValueContainer().FieldInfos[0].UniqueColumnName;t.model.colorValuePath=this.getValueContainer().FieldInfos.length>1?this.getValueContainer().FieldInfos[1].UniqueColumnName:this.getValueContainer().FieldInfos[0].UniqueColumnName;t.model.levels=this.generateLevels();t.model.showLegend=this.getMapProperties().ShowLegend&&this.getResponsiveLegendVisibility();t.model.leafItemSettings.showLabels=!0;t.model.leafItemSettings.labelVisibilityMode="hideonexceededlength";t.model.showSubItems=!this.getMapProperties().EnableDrilldown;t.model.isVirtualRender=this.getMapProperties().EnableDrilldown;t.model.drillDownItemSelected=this.getMapProperties().EnableDrilldown?this.bbdesigner$.proxy(this.treeMapItemClick,this):null;t.model.preRender=this.getMapProperties().EnableDrilldown?this.bbdesigner$.proxy(this.drillStarted,this):null;t.model.treeMapItemSelected=this.getMapProperties().EnableDrilldown?null:this.bbdesigner$.proxy(this.treeMapItemClick,this);this.setColorCustomization(n,t.model);this.generateTooltip(n,t.model);this.generateLabel(n,t.model);this.updateLegendVisibility(t.model);this.hideWidgetNotConfigured();this.refresh()}BoldBIDashboard.isNullOrUndefined(this.colorContainer)||(this.renderSettings(),this.renderColorSettingsElement(),this.setPropertyElement("Formatting","ColorSettings",this.getMapProperties().EnableColorSettings?"Advanced":"Monochromatic"))}else this.setDefaultColorCustomization(),this.showWidgetNotConfigured();else(n.data==="[]"&&BoldBIDashboard.DashboardUtil.IsColumnBindingsEmpty(this.DataColumnBindings)||!BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty)&&(this.setDefaultColorCustomization(),this.showWidgetNotConfigured());this.designerInstance.modules.util.updateAction("TreeMap","Link","Link")}this.updateInitialSelection();u=this.designerInstance.modules.themeHelper.getTreeMapHeaderTitle();f=this.designerInstance.modules.themeHelper.getTreeMapHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getMapProperties().ContainerSettings.TextColor,u);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,f);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this);this.controlContainer.find(".bbi-dbrd-control-sub-title").css("color",this.themeHelper.getWidgetTileTextColor());e="#"+this.designerId+"treemapElement"+this.widgetJson.UniqueName;this.contentContainer.find(e).css({background:"transparent",color:this.designerInstance.modules.themeHelper.getLegendFontColor()})},t.prototype.showWidgetNotConfigured=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.addWidgetNotConfiguredClass(this)},t.prototype.hideWidgetNotConfigured=function(){BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this)},t.prototype.updateSolidColorInfo=function(n){BoldBIDashboard.Dashboard.WidgetHelper.updateIndividualColorBasedonTheme(this.getMapProperties().EnableColorSettings,this.getMapProperties().ColorCustomization,this.getColumnContainer().FieldInfos,this.designerInstance);this.getColumnValueColorCode(n)},t.prototype.getColumnValueColorCode=function(n){var e=this.getColumnContainer().FieldInfos,t=this.getMapProperties().ColorCustomization,i;if(this.getMapProperties().EnableColorSettings&&!BoldBIDashboard.isNullOrUndefined(t)&&t.Type===ColorCustomizationType.Individual&&t.SolidColorInfo.length!==0){var r=void 0,u=e[0].UniqueColumnName,f=void 0;if(f=t.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===u})[0].DefaultColorSets,r=t.SolidColorInfo[0].BasedOn.FieldId.substring(15)+"_Color",!BoldBIDashboard.isNullOrUndefined(n[0])&&!BoldBIDashboard.isNullOrUndefined(n[0][r])&&n[0][r].length>0)for(i=0;i<n.length;i++)n[i][r]=this.getValidatedSolidColor(f,n[i][u])}},t.prototype.getValidatedSolidColor=function(n,t){for(var i=0;i<n.length;i++)if(n[i].Name.toString()===t)return n[i].Color},t.prototype.getTreeMapPropertyPanel=function(){var t=new BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem(this.designerInstance,this.getMapProperties().FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo,this.widgetJson.ContainerSettings);return this.containerPropertyItem=t.containerProperties,t.propertyGridItems.Header=this.getMapProperties().ContainerSettings.Title,t.propertyGridItems.SubTitle=this.getMapProperties().ContainerSettings.SubTitle,t.propertyGridItems.Description=this.getMapProperties().ContainerSettings.Description,t.propertyGridItems.Type=this.Type,t.linkingProperty.Items[0].value=n.prototype.useExistingLink.call(this),this.bbdesigner$.each(t.containerSettingsProperty.Items,function(n,t){(t.name==="ShowWidgetBackgroundImage"||t.name==="WidgetBackgroundImageMode"||t.name==="WidgetBackgroundImageSource"||t.name==="WidgetBackgroundImageBrowse"||t.name==="WidgetBackgroundImageURL")&&(t.isVisible=!1)}),t.propertyGridItems.Items=[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"ShowTooltip",displayName:this.locale.propertyPanel.basicSettings.showTooltip,value:this.getMapProperties().ShowTooltip,itemType:"bool"},{name:"ShowLegend",displayName:this.locale.propertyPanel.basicSettings.showLegend,isVisible:!this.getMapProperties().EnableDrilldown,value:this.getMapProperties().EnableDrilldown?!1:this.getMapProperties().ShowLegend,itemType:"bool"},{name:"LabelColor",displayName:this.locale.propertyPanel.basicSettings.labelColor,value:this.getMapProperties().LabelColor,itemType:"color"},{name:"ShowValueLabel",displayName:this.locale.propertyPanel.basicSettings.showValueLabel,isVisible:!0,value:this.getMapProperties().ShowValueLabel,itemType:"bool"},{name:"EnableDrilldown",displayName:this.locale.propertyPanel.basicSettings.enableDrillDown,isVisible:this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getColumnContainer().FieldInfos.length>1,value:this.getMapProperties().EnableDrilldown,itemType:"bool"}]},{CategoryName:"Formatting",DisplayName:this.locale.propertyPanel.formattingCategoryText,IsVisible:this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getColumnContainer().FieldInfos.length>0,Items:[{name:"ColorSettings",displayName:this.locale.propertyPanel.formattingCategoryText,value:this.getMapProperties().EnableColorSettings?"Advanced":"Monochromatic",itemType:"dropdown",valueList:["Monochromatic","Advanced"]},{name:"EnablColorSettings",callbackInstance:this,callbackMethod:"renderColorSettings",itemType:"object",elementType:this.Type}]},t.filterSettingsProperty,t.linkingProperty,t.containerSettingsProperty,t.containerActionsProperty,t.noDataContainerActionsProperty],t.propertyGridItems},t.prototype.updateTreeMapProperties=function(t,i,r,u){var s,h=!1,f,e,c,o;switch(t){case"Name":this.widgetJson.ContainerSettings.Title=r;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,r);break;case"EnableDrilldown":this.updateEnableDrilldown(r);break;case"ShowLegend":this.updateShowLegend(r);break;case"ShowValueLabel":this.updateShowValueLabel(r);break;case"ShowTooltip":this.updateShowToolTip(r);break;case"ColorSettings":this.updateColorSettings(r);break;case"LabelColor":this.updateLabelColor(r);break;case"ItemLink":n.prototype.updateLink.call(this,r);this.updateHighLightOnSelection();break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,r);break;case"ActAsMasterWidget":this.getMapProperties().FilterSettings.ActAsMasterWidget=r;this.updateHighLightOnSelection();break;case"FieldNameChange":this.updateDisplayTextBasedProperties();break;default:h=!0}if(BoldBIDashboard.isNullOrUndefined(s)||(i=s),!h){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(f=this.designPanelInstance.selectedReportItems,f.length>0))for(e=0;e<f.length;e++)c=f[e],c.attr("id")===this.controlContainer.attr("id")&&(o=this.bbdesigner$.extend(!0,{},u),o.categoryName=u.categoryName,o.valueList=u.valueList,this.propertyPanel.updatePropertyValue(o,this.Type,r));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-treemap-item",this.designerId+"_"+this.widgetJson.UniqueName,[t,r,i,u],[t,i,r,u])}},t.prototype.updateTreeMapSize=function(){if(BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this))this.widgetContainerHelper.showControlError(this,this.dataValues);else{var n=this.treemapElement.data("BoldBIDashboardTreeMap");BoldBIDashboard.isNullOrUndefined(n)||(n.model.showLegend=this.getMapProperties().ShowLegend&&this.getResponsiveLegendVisibility(),n.model.legendSettings.title=this.getResponsiveLegendTitleVisibility()?this.legendTitle:"",n.model.legendSettings.leftLabel=this.getResponsiveLegendLabelVisibility()?this.legendLeftLabel:"",n.model.legendSettings.rightLabel=this.getResponsiveLegendLabelVisibility()?this.legendRightLabel:"",this.refresh())}},t.prototype.getResponsiveLegendVisibility=function(){return this.widgetJson.ContainerSettings.Bounds.RowSpan>=8},t.prototype.getResponsiveLegendLabelVisibility=function(){return this.widgetJson.ContainerSettings.Bounds.RowSpan>=12},t.prototype.getResponsiveLegendTitleVisibility=function(){return this.widgetJson.ContainerSettings.Bounds.RowSpan>=12},t.prototype.initialSelectionForTreeMap=function(){var n=this.getMapProperties().SelectedFilterValues,s=this.treemapElement.data("BoldBIDashboardTreeMap"),t,e,i,o,r;if(this.getMapProperties().FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0){s.selectedItems=[];var u=[],f=[],h=n.length;for(t=0;t<h;t++){if(n[t].InitialDimensionFilter!==null)for(e=n[t].InitialDimensionFilter.Text.length,i=0;i<e;i++)u.push(n[t].UniqueColumnName.replace(" ","")),f.push(n[t].InitialDimensionFilter.Text[i].toString());if(n[t].InitialDateFilter!==null)for(o=n[t].InitialDateFilter.DateFilterList.length,r=0;r<o;r++)u.push(n[t].UniqueColumnName.replace(" ","")),f.push(n[t].InitialDateFilter.DateFilterList[r])}this.treemapElement.BoldBIDashboardTreeMap("selectItemByPath",u.join(":"),f.join(":"));BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this)}else BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this)},t.prototype.setPropertyElement=function(n,t,i,r){this.propertyPanel.canUpdate=!1;var f=this.propertyPanel.getPropertyElement(this.getTreeMapPropertyPanel(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r),u=this.bbdesigner$.extend(!0,{},f);u.categoryName=n;this.propertyPanel.updatePropertyValue(u,"TreeMap",i);this.propertyPanel.canUpdate=!0},t.prototype.treeMapItemClick=function(n){var i=[],t;i=n.type==="treeMapItemSelected"?[n.originalEvent.pageX,n.originalEvent.pageY]:[n.evt.pageX,n.evt.pageY];t=[];this.DataGroupInfo.FieldContainers[1].FieldInfos.length-(BoldBIDashboard.isNullOrUndefined(this.drillLevelInfo)?0:this.drillLevelInfo.length)>1&&(n.model.enableDrillDown||this.getMapProperties().EnableDrilldown)&&t.push(WidgetAction.DrillDown);this.getMapProperties().FilterSettings.ActAsMasterWidget&&t.push(WidgetAction.Filter);this.getMapProperties().UrlLink&&this.getMapProperties().UrlLink.EnableLink&&t.push(WidgetAction.Linking);this.widgetJson.ContainerSettings.ViewData&&t.push(WidgetAction.ViewData);BoldBIDashboard.Dashboard.WidgetHelper.createWidgetActionContextMenu(this.designerInstance,this,this.Name,t,n,i)},t.prototype.performSelectedWidgetItemAction=function(t,i,r,u){var f,e,o;switch(t){case WidgetAction.DrillDown.toString():this.drillClick(r);break;case WidgetAction.Filter.toString():this.performFilterAction(i,r);break;case WidgetAction.Linking.toString():u.model.mode!==BoldBIDashboard.Designer.mode.design&&(f=this.generateLinkData(i,r),BoldBIDashboard.Dashboard.WidgetHelper.updateURLLinkingforDrillDown(f,i,i.getJson().EnableDrilldown),n.prototype.performLinking.call(this,f),r.model.highlightBorderBrush="white",r.model.highlightBorderThickness=0,i.refresh());break;case WidgetAction.ViewData.toString():i.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(e=u.modules.viewDataDialog,o=this.showSelectItemsInViewData(r,i),e.showViewDataPopup(i,!1,o,!0))}},t.prototype.generateLinkData=function(n,t){var i=n.getJson(),u={isEnabled:!1,parameterDetails:[],url:"",urlLinkInfo:[]},e,f,r,o;if(!BoldBIDashboard.isNullOrUndefined(i)&&(e=this.designerInstance.modules.util.getSourceData(this.DataGroupInfo,!1,!1,!0),!BoldBIDashboard.isNullOrUndefined(i.UrlLink.UrlPath)&&i.UrlLink.UrlPath!==""))for(f=e.filter(function(n){return i.UrlLink.PassingParameters.indexOf(n.Value)!==-1}),u.url=i.UrlLink.UrlPath,u.isEnabled=!0,r=0;r<f.length;r++)o=Array.isArray(t.selectedItem.Data)?t.selectedItem.Data[0][f[r].Id]:t.selectedItem.Data[f[r].Id],u.parameterDetails.push({parameter:f[r].Value,value:o});return u.urlLinkInfo=i.UrlLink,u},t.prototype.showSelectItemsInViewData=function(n,t){var r=[],u=t.DataGroupInfo.FieldContainers,i;if(!BoldBIDashboard.isNullOrUndefined(n))if(!BoldBIDashboard.isNullOrUndefined(t.drillLevelInfo)&&t.drillLevelInfo.length>0){for(i=0;i<t.drillLevelInfo.length;i++)r.push({selectedItem:t.drillLevelInfo[i].selectedItem,columnId:t.drillLevelInfo[i].id,UniqueColumnName:t.drillLevelInfo[i].UniqueColumnName});r.push({selectedItem:n.selectedItems[0][u[1].FieldInfos[t.DrillLevelInfo.length].UniqueColumnName],columnId:u[1].FieldInfos[t.DrillLevelInfo.length].Id,UniqueColumnName:u[1].FieldInfos[t.DrillLevelInfo.length].UniqueColumnName})}else!BoldBIDashboard.isNullOrUndefined(n.selectedItem)&&!BoldBIDashboard.isNullOrUndefined(n.selectedItem.Data)&&n.selectedItem.Data.length>0?r=this.getSelectedItemValueForViewData(n.selectedItem.Data[0]):!BoldBIDashboard.isNullOrUndefined(n.selectedItems)&&n.selectedItems.length>0&&n.selectedItems[0].length>0&&(r=this.getSelectedItemValueForViewData(n.selectedItems[0][0]));return r},t.prototype.getSelectedItemValueForViewData=function(n){for(var i=[],t=0;t<this.DataGroupInfo.FieldContainers[1].FieldInfos.length;t++)BoldBIDashboard.isNullOrUndefined(n[this.DataGroupInfo.FieldContainers[1].FieldInfos[t].UniqueColumnName])||i.push({selectedItem:n[this.DataGroupInfo.FieldContainers[1].FieldInfos[t].UniqueColumnName],columnId:this.DataGroupInfo.FieldContainers[1].FieldInfos[t].Id,UniqueColumnName:this.DataGroupInfo.FieldContainers[1].FieldInfos[t].UniqueColumnName});return i},t.prototype.performSelectedWidgetAction=function(n,t,i,r){this.performSelectedWidgetItemAction(n,t,i,r)},t.prototype.processFilterInformation=function(n){var i=this.DataGroupInfo.FieldContainers,h=n.filters,u=this.getColumnForWidgetFilterAPI(h,i),r=u[0],o=u[1],s=u[2],c=u[3],t,f,e;if(s.length>0)return r=[],o={},console.error("Given column name(s) ["+s+"] were not found in "+this.widgetJson.ContainerSettings.Title),!1;if(c&&(console.error("ColumnName should not be empty for API filtering"),r.length===0))return!1;if(r.length===0&&s.length===0)for(t=0;t<i.length;t++)if(f=i[t].FieldInfos[0],i[t].Name==="Column")for(e=0;e<i[t].FieldInfos.length;e++){o[f.UniqueColumnName]=h[0].values[0];f=i[t].FieldInfos[e];r.push(f);break}return this.getMapProperties().SelectedFilterValues=[],this.masterFilterWindowInstance.configureSelectedFilterInfo(this.getJson(),r,o),!0},t.prototype.performFilterAction=function(t,i){var u,e,f;if(!BoldBIDashboard.isNullOrUndefined(i)){if(this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;this.getMapProperties().SelectedFilterValues=[];var o=[],s=[],r=t.DataGroupInfo.FieldContainers;if(BoldBIDashboard.isNullOrUndefined(t.DrillLevelInfo)){for(u=0;u<r.length;u++)if(e=r[u].FieldInfos[0],r[u].Name==="Column"||r[u].Name==="HiddenColumn")for(f=0;f<r[u].FieldInfos.length;f++)e=r[u].FieldInfos[f],o.push(e);s=!BoldBIDashboard.isNullOrUndefined(i.selectedItems)&&i.selectedItems.length!==0?i.selectedItems[0].length!==0?i.selectedItems[0][0]:i.selectedItems[0]:i.selectedItems}else if(t.DrillLevelInfo.length===0){for(u=0;u<r.length;u++)if(e=r[u].FieldInfos[0],r[u].Name==="Column")for(f=0;f<r[u].FieldInfos.length;f++)e=r[u].FieldInfos[f],o.push(e);s=!BoldBIDashboard.isNullOrUndefined(i.selectedItems)&&i.selectedItems.length!==0?i.selectedItems[0].length!==0?i.selectedItems[0][0]:i.selectedItems[0]:i.selectedItems}else{for(f=0;f<t.DrillLevelInfo.length;f++)o.push(r[1].FieldInfos[f]),s[r[1].FieldInfos[f].UniqueColumnName]=t.DrillLevelInfo[f].selectedItem;o.push(r[1].FieldInfos[t.DrillLevelInfo.length]);s[r[1].FieldInfos[t.DrillLevelInfo.length].UniqueColumnName]=i.selectedItems[0][r[1].FieldInfos[t.DrillLevelInfo.length].UniqueColumnName]}t.isCurrentMaster=!0;n.prototype.performInteraction.call(this,t,o,s)}},t.prototype.drillClick=function(n){var t=this.treemapElement.data("BoldBIDashboardTreeMap"),i;t.model.drillDownLevel<this.getColumnContainer().FieldInfos.length-1&&(this.isDrillUp=!0,this.parentColor=n.selectedItem.backgroundColor,t.model.levels=this.generateLevels(),t.model._connectorText='<span class="e-glyphicon" style="color:black; padding-left:9px; padding-right:9px;"><\/span>',n.header.groupPath=this.getColumnContainer().FieldInfos[t.model.drillDownLevel].UniqueColumnName,t.model.drillDownLevel=t.model.drillDownLevel+1,i=JSON.parse(JSON.stringify(this.DataGroupInfo)),this.drillLevelInfo.push({id:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(i,"Column").FieldInfos[this.drillLevelInfo.length].Id,rowText:null,level:n.model.drillDownLevel,selectedItem:n.header.header,isClickOnAxisLabel:!1}),t.model.tooltipTemplate=this.controlId+"_tooltip"+t.model.drillDownLevel,t._backgroundTile[0].innerHTML="",t._drillHoverDiv[0].innerHTML="",t._templateDiv[0].innerHTML="",this.widgetDataFetch(i))},t.prototype.widgetDataFetch=function(n){var i=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.controlContainer),r=this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(n,i),u=this.getWidgetInfo(this.DataGroupInfo),t=this.masterFilterWindowInstance.getSelectedValuesForWidgetRequest(),f=this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design;this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.WidgetAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,fieldInfo:r,dataset:n.DataSourceID,widgetInfo:u,request:AjaxRequest.Widget.toString(),getColumnListBasedOnVisibility:!1,selectedValuesList:BoldBIDashboard.isNullOrUndefined(t)?"":JSON.stringify(t),urlParameters:this.designerInstance.urlParameter,isDataSampleForViewMode:f})},{fnction:this.bbdesigner$.proxy(this.loadDrillDownData,this),indicator:[this.bbdesigner$.proxy(this.showLoadingIndicator,this),this.bbdesigner$.proxy(this.hideLoadingIndicator,this)]})},t.prototype.loadDrillDownData=function(n){var t=this.treemapElement.data("BoldBIDashboardTreeMap"),i;if(BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error)BoldBIDashboard.isNullOrUndefined(n.Message)||this.widgetContainerHelper.showControlError(this,n);else if(n.noDataAvailable)this.treemapItem.hide(),this.bbdesigner$(this.contentContainer.children()[0]).css("display","block");else{if(!BoldBIDashboard.isNullOrUndefined(n)&&n.data!=="[]"&&BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)){this.designerInstance.modules.resource.updateColorCodeInfo(n);var f=JSON.parse(n.data),u=void 0,r=void 0,e={columnCount:0,template:"",dockPosition:"bottom",mode:BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)?"default":this.getMapProperties().ColorCustomization.Type===ColorCustomizationType.Gradient?"interactive":"default",iconWidth:15,iconHeight:15,height:BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)?40:this.getMapProperties().ColorCustomization.Type===ColorCustomizationType.Gradient?20:40,width:BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)?this.controlContainer.width():this.getMapProperties().ColorCustomization.Type===ColorCustomizationType.Gradient?170:this.controlContainer.width()};for(i=0;i<this.drillLevelInfo.length;i++)this.drillLevelInfo[i].level===t.model.drillDownLevel&&(u=this.drillLevelInfo[i].selectedItem);r=this.generateLevels();t.model.leafItemSettings.labelPath=r[0].groupPath;this.setColorCustomization(n,t.model);this.generateTooltip(n,t.model);this.generateLabel(n,t.model);t.runTimeSubitems(f,u,r[0],e)}this.applyThemeForDrillDown()}},t.prototype.drillStarted=function(n){var r=this.getValueContainer(),t=BoldBIDashboard.isNullOrUndefined(r)?null:r.FieldInfos.length!==0&&r.FieldInfos.length<2?r.FieldInfos[0].MeasureFormatting:r.FieldInfos[1].MeasureFormatting,o="true",i=this.treemapElement.data("BoldBIDashboardTreeMap"),u,f,s,h,e;if(n.type!=="preRender"||BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(n.minimumValue)||BoldBIDashboard.isNullOrUndefined(n.maximumValue)?this.setColorCustomization(this.dataValues,n.model):BoldBIDashboard.isNullOrUndefined(n.model.desaturationColorMapping.from)||BoldBIDashboard.isNullOrUndefined(n.model.desaturationColorMapping.to)||n.model.desaturationColorMapping.rangeMaximum===0?this.isDrillUp&&!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)?this.getMapProperties().ColorCustomization.Type===ColorCustomizationType.Individual&&(i.model.legendSettings=[],i.model.uniColorMapping.color=this.parentColor):this.isDrillUp||(n.level===0||this.getMapProperties().ColorCustomization.Type!==ColorCustomizationType.Individual||BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)?this.setColorCustomization(this.dataValues,n.model):i.model.uniColorMapping.color=this.parentColor):(n.maximumValue.weight!==n.minimumValue.weight&&(n.model.desaturationColorMapping.to=1,n.model.desaturationColorMapping.from=.1),n.model.desaturationColorMapping.rangeMinimum=n.minimumValue.colorWeight,n.model.desaturationColorMapping.rangeMaximum=n.model.showSubItems?n.max.colorWeight:n.maximumValue.colorWeight,u=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Prefix),this.DataGroupInfo.DataSourceName),f=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Suffix),this.DataGroupInfo.DataSourceName),this.legendLeftLabel=BoldBIDashboard.DashboardUtil.formattedText(n.minimumValue.colorWeight,t.Culture,t.DecimalPoints,t.FormatType,t.DecimalSeparator,t.GroupSeparator,u,f,t.Unit,o,this.designerInstance,t.EnableLakhsAndCroreRep),s=n.model.showSubItems?n.max.colorWeight:n.maximumValue.colorWeight,this.legendRightLabel=BoldBIDashboard.DashboardUtil.formattedText(s,t.Culture,t.DecimalPoints,t.FormatType,t.DecimalSeparator,t.GroupSeparator,u,f,t.Unit,o,this.designerInstance,t.EnableLakhsAndCroreRep),n.model.legendSettings.leftLabel=this.getResponsiveLegendLabelVisibility()?this.legendLeftLabel:"",n.model.legendSettings.rightLabel=this.getResponsiveLegendLabelVisibility()?this.legendRightLabel:"",n.model.legendSettings.textPath=this.getColumnContainer().FieldInfos[n.model.drillDownLevel].UniqueColumnName)),n.model.tooltipTemplate=this.controlId+"_tooltip"+(n.model.isVirtualRender?n.model.drillDownLevel:n.level),i.model.levels=this.generateLevels(),this.isDrillUp=!1,i.model.leafItemSettings.labelPath=i.model.enableDrillDown?this.getColumnContainer().FieldInfos[i.model.drillDownLevel].UniqueColumnName:null,!BoldBIDashboard.isNullOrUndefined(this.drillLevelInfo)&&this.drillLevelInfo.length>0)for(h=this.drillLevelInfo.length,e=0;e<h;e++)this.drillLevelInfo.length!==n.model.drillDownLevel&&this.drillLevelInfo.splice(this.drillLevelInfo.length-1,1)},t.prototype.removeAllDrillElements=function(){var n=this.treemapElement.data("BoldBIDashboardTreeMap");BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(n.model)||(n.model.drillDownLevel=0,this.drillLevelInfo=n.model.enableDrillDown?[]:null)},t.prototype.generateTooltip=function(n,t){var w,b,k,d,g,nt,tt,h=this.DataColumnBindings,s,e=this.getValueContainer(),ft="true",et=this.designerInstance.model.localeSettings.culture,l,ot,a,v,it,rt,r,f,o,c,y,i,ut,p,u,st;if(!BoldBIDashboard.isNullOrUndefined(t))if(t.enableDrillDown){for(a=0;a<this.getColumnContainer().FieldInfos.length;a++)v=this.controlContainer.find("#"+this.controlId+"_tooltip"+a),v.length>0&&this.controlContainer.find("#"+this.controlId+"_tooltip"+a).remove();for(it=[],rt=0,r=0;r<this.getValueContainer().FieldInfos.length;r++){var ht=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(e.FieldInfos[r].MeasureFormatting.Prefix),this.DataGroupInfo.DataSourceName),ct=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(e.FieldInfos[r].MeasureFormatting.Suffix),this.DataGroupInfo.DataSourceName),lt=BoldBIDashboard.DashboardUtil.encodeText(ht),at=BoldBIDashboard.DashboardUtil.encodeText(ct);it.push((d={},d[h[this.getValueContainer().FieldInfos[r].UniqueColumnName]]="{{: ~formatTooltip(~firstLevelData(data,'"+this.getValueContainer().FieldInfos[r].UniqueColumnName+"','"+rt+"'), '"+e.FieldInfos[r].MeasureFormatting.Culture+"', '"+e.FieldInfos[r].MeasureFormatting.DecimalPoints+"', '"+e.FieldInfos[r].MeasureFormatting.FormatType+"', '"+e.FieldInfos[r].MeasureFormatting.DecimalSeparator.AliasValue+"', '"+e.FieldInfos[r].MeasureFormatting.GroupSeparator.AliasValue+"', '"+lt+"', '"+at+"', '"+e.FieldInfos[r].MeasureFormatting.Unit+"', '"+ft+"', '"+et+"', '"+e.FieldInfos[r].MeasureFormatting.EnableLakhsAndCroreRep+"')}}",d));rt++}for(f=0;f<=t.drillDownLevel;f++){for(s='<script class ="treemap" id="'+this.controlId+"_tooltip"+f+'"  type="application/jsrender">',o=[],c=0;c<=f;c++)c===f?o.push((g={},g[h[this.getColumnContainer().FieldInfos[c].UniqueColumnName]]="{{:label}}",g)):o.push((nt={},nt[h[this.getColumnContainer().FieldInfos[c].UniqueColumnName]]=this.drillLevelInfo[c].selectedItem,nt));if(y=o.concat(it),i=BoldBIDashboard.DashboardUtil.getToolTipFieldInfos(this),!BoldBIDashboard.isNullOrUndefined(i)){for(ut=[],p=0,u=0;u<i.length;u++)st=i[u].SummaryType===SummaryType.NONE?"{{:(~firstLevelData(data,'"+i[u].UniqueColumnName+"','"+p+"'))}}":"{{: ~formatTooltip(~firstLevelData(data,'"+i[u].UniqueColumnName+"','"+p+"'), '"+i[u].MeasureFormatting.Culture+"', '"+i[u].MeasureFormatting.DecimalPoints+"', '"+i[u].MeasureFormatting.FormatType+"', '"+i[u].MeasureFormatting.DecimalSeparator.AliasValue+"', '"+i[u].MeasureFormatting.GroupSeparator.AliasValue+"', '"+i[u].MeasureFormatting.Prefix+"', '"+i[u].MeasureFormatting.Suffix+"', '"+i[u].MeasureFormatting.Unit+"', '"+ft+"', '"+et+"', '"+i[u].MeasureFormatting.EnableLakhsAndCroreRep+"')}}",ut.push((tt={},tt[h[i[u].UniqueColumnName]]=st,tt)),p++;y=y.concat(ut)}s+=this.widgetHelper.generateToolTipTemplate(y,this.controlId,1e3);s+="<\/script>";this.controlContainer.append(s)}}else{for(o=[],v=this.controlContainer.find("#"+this.controlId+"_tooltip"),v.length>0&&this.controlContainer.find("#"+this.controlId+"_tooltip").remove(),t.tooltipTemplate=this.controlId+"_tooltip",s='<script class ="treemap" id="'+this.controlId+'_tooltip"  type="application/jsrender">',r=0;r<this.getColumnContainer().FieldInfos.length;r++)o.push((w={},w[h[this.getColumnContainer().FieldInfos[r].UniqueColumnName]]="{{:(#data['"+this.getColumnContainer().FieldInfos[r].UniqueColumnName+"'])}}",w));for(l=0;l<this.getValueContainer().FieldInfos.length;l++)o.push((b={},b[h[this.getValueContainer().FieldInfos[l].UniqueColumnName]]=this.getFormattedToolTip(this.getValueContainer().FieldInfos[l]),b));if(i=BoldBIDashboard.DashboardUtil.getToolTipFieldInfos(this),!BoldBIDashboard.isNullOrUndefined(i))for(f=0;f<i.length;f++)ot=i[f].SummaryType!==SummaryType.NONE?this.getFormattedToolTip(i[f]):"{{:(#data['"+i[f].UniqueColumnName+"'])}}",o.push((k={},k[h[i[f].UniqueColumnName]]=ot,k));s+=this.widgetHelper.generateToolTipTemplate(o,this.controlId,1e3);s+="<\/script>";this.controlContainer.append(s)}},t.prototype.getFormattedToolTip=function(n){var t=n.MeasureFormatting.DecimalSeparator.AliasValue,i=n.MeasureFormatting.GroupSeparator.AliasValue;t==="'"?t="&#39;":i==="'"&&(i="&#39;");var r=this.designerInstance.model.localeSettings.culture,u=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(n.MeasureFormatting.Prefix),this.DataGroupInfo.DataSourceName),f=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(n.MeasureFormatting.Suffix),this.DataGroupInfo.DataSourceName),e=BoldBIDashboard.DashboardUtil.encodeText(u),o=BoldBIDashboard.DashboardUtil.encodeText(f);return"{{: ~formatTooltip(#data['"+n.UniqueColumnName+"'], '"+n.MeasureFormatting.Culture+"', '"+n.MeasureFormatting.DecimalPoints+"', '"+n.MeasureFormatting.FormatType+"', '"+t+"', '"+i+"', '"+e+"', '"+o+"', '"+n.MeasureFormatting.Unit+"', 'true', '"+r+"', '"+n.MeasureFormatting.EnableLakhsAndCroreRep+"')}}"},t.prototype.generateLabel=function(n,t,i,r){var u,o,s,e,f,h,c,l;if(i===void 0&&(i=this.getMapProperties().LabelColor),r===void 0&&(r=this.getMapProperties().ShowValueLabel),o=this.designerInstance.modules.themeHelper.getTreeMapDataLabelFontText(),this.getMapProperties().LabelColor==="#1E1E1E"&&(i=this.designerInstance.modules.themeHelper.getTreemapDataLabelFontColor()),t.enableDrillDown){for(f=0;f<this.getColumnContainer().FieldInfos.length;f++)e=this.controlContainer.find("#"+this.controlId+"_labeltemplate"+f),e.length>0&&e.remove();for(f=0;f<=t.drillDownLevel;f++)u='<script class = "treemapLabel" id="'+this.controlId+"_labeltemplate"+f+'" type="application/jsrender"><div>',h="<label class="+this.getMapProperties().UniqueId+'_treeMapLabel style="color:'+i+";"+o+';margin-left:5px;">{{:#data["'+this.getColumnContainer().FieldInfos[f].UniqueColumnName+'"]}}<\/label><br />',u+=h,r&&(c=this.getFormattedToolTip(this.getValueContainer().FieldInfos[0]),l="<div> <label class="+this.getMapProperties().UniqueId+'_treemapValueLabel style="color:'+i+";"+o+';margin-left:5px;">'+c+"<\/label><br /><\/div>",u+=l),u+="<div><\/script>",this.controlContainer.append(u)}else{for(e=this.controlContainer.find("#"+this.controlId+"_labeltemplate0"),e.length>0&&e.remove(),t.leafItemSettings.labelTemplate=this.controlId+"_labeltemplate0",u='<script class = "treemapLabel" id="'+this.controlId+'_labeltemplate0" type="application/jsrender"><div>',s=0;s<this.getColumnContainer().FieldInfos.length;s++)h="<label class="+this.getMapProperties().UniqueId+'_treeMapLabel style="color:'+i+";"+o+';margin-left:5px;">{{:#data["'+this.getColumnContainer().FieldInfos[s].UniqueColumnName+'"]}}<\/label><br />',u+=h;r&&(c=this.getFormattedToolTip(this.getValueContainer().FieldInfos[0]),l="<div> <label class="+this.getMapProperties().UniqueId+'_treemapShowValueLabel style="color:'+i+";"+o+';margin-left:5px;">'+c+"<\/label><br /><\/div>",u+=l);u+="<div><\/script>";this.controlContainer.append(u)}},t.prototype.getFromValue=function(n,t){for(var r=[],u=0,i=0;i<n.length;i++)n[i][t]!=="(Blanks)"&&r.push(n[i][t]);return u=Math.min.apply(null,r),Math.floor(u*100)/100},t.prototype.getToValue=function(n,t){for(var r=[],u=0,i=0;i<n.length;i++)n[i][t]!=="(Blanks)"&&r.push(n[i][t]);return u=Math.max.apply(null,r),parseFloat(u.toFixed(2))},t.prototype.setCursorType=function(n){var t=this.treemapElement.data("BoldBIDashboardTreeMap"),i,r;BoldBIDashboard.isNullOrUndefined(t)||(i=this.DataGroupInfo.FieldContainers.filter(function(n){return n.Name==="Column"}),r=i.length>0?i[0].FieldInfos.length:0,!BoldBIDashboard.isNullOrUndefined(this.widgetJson)&&!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().UrlLink)&&this.getMapProperties().UrlLink.EnableLink||!BoldBIDashboard.isNullOrUndefined(this.getMapProperties())&&!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().FilterSettings)&&this.getMapProperties().FilterSettings.ActAsMasterWidget||t.model.enableDrillDown&&t.model.drillDownLevel<r-1?(this.bbdesigner$(n.target).css("cursor","pointer"),t.model.enableDrillDown&&t.model.drillDownLevel===r-1&&this.bbdesigner$(n.target).css("cursor","default")):this.bbdesigner$(n.target).css("cursor","default"))},t.prototype.headerTemplate=function(n){var t=this;n.connectorText='<span class="e-glyphicon" style="color:black; padding-left:9px; padding-right:9px;"><\/span>';this.updateBreadCrumbStyle(this.drillLevelInfo);BoldBIDashboard.isNullOrUndefined(this.drillLevelInfo)||setTimeout(function(){t.updateBreadCrumbStyle(t.drillLevelInfo)})},t.prototype.updateBreadCrumbStyle=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0){var t=n.length;this.bbdesigner$(this.contentContainer.find(".e-drilldownlabel")[0]).addClass("e-drilldownheaderalignment");this.contentContainer.find(".e-drilldowntext").addClass("e-previous-drilldowntext");this.bbdesigner$(this.contentContainer.find(".e-drilldowntext")[t]).addClass("e-current-drilldowntext");this.updateFontStyleForBreadCrumb()}},t.prototype.updateEnableDrilldown=function(n){var t=this.treemapElement.data("BoldBIDashboardTreeMap"),i;if(this.getMapProperties().EnableDrilldown=n,t.model.enableDrillDown=n,t.model.drillDownLevel=0,n&&this.clearFilter(),t.model.enableDrillDown){for(this.drillLevelInfo=[],t.model.header=this.DataGroupInfo.FieldContainers.length>0&&this.getColumnContainer().FieldInfos.length>1?this.getColumnContainer().FieldInfos[0].Name:null,t.model.levels=this.generateLevels(),i=0;i<t.model.levels.length;i++)t.model.levels[i].showLabels=!0,t.model.levels[i].labelPosition="topleft",t.model.levels[i].labelVisibilityMode="hideonexceededlength";t.model.showLegend=!1;this.getMapProperties().ShowLegend=!1;this.propertyPanel.updateItemVisibility("TreeMap","BasicSettings","ShowLegend",!1);this.setPropertyElement("BasicSettings","ShowLegend",!1)}else{for(i=0;i<t.model.levels.length;i++)t.model.levels[i].showLabels=!1;t.model.leafItemSettings.labelPath=null;this.drillLevelInfo=null;this.propertyPanel.updateItemVisibility("TreeMap","BasicSettings","ShowLegend",!0)}this.dataConfigurationInstance.postDraggedFields();this.updateHighLightOnSelection()},t.prototype.updateShowLegend=function(n){var t=this.treemapElement.data("BoldBIDashboardTreeMap");this.getMapProperties().ShowLegend=n;this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getColumnContainer().FieldInfos.length>0&&(t.model.showLegend=n&&this.getResponsiveLegendVisibility());this.updateLegendVisibility(t.model);this.refresh()},t.prototype.updateLabelColor=function(n){this.getMapProperties().LabelColor=n;var t=this.treemapElement.data("BoldBIDashboardTreeMap");this.generateLabel(this.dataValues,t.model);this.treemapElement.BoldBIDashboardTreeMap("refresh")},t.prototype.updateShowValueLabel=function(n){this.getMapProperties().ShowValueLabel=n;var t=this.treemapElement.data("BoldBIDashboardTreeMap");this.generateLabel(this.dataValues,t.model);this.treemapElement.BoldBIDashboardTreeMap("refresh")},t.prototype.updateShowToolTip=function(n){this.getMapProperties().ShowTooltip=n;var t=this.treemapElement.data("BoldBIDashboardTreeMap");t.model.showTooltip=n;this.treemapElement.BoldBIDashboardTreeMap("refresh")},t.prototype.generateLevels=function(){var i=[],t=this.treemapElement.data("BoldBIDashboardTreeMap"),n;if(this.DataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(t))for(n=0;n<this.getColumnContainer().FieldInfos.length;n++){if(t.model.enableDrillDown&&n!==t.model.drillDownLevel)if(i.length===1)break;else continue;i.push({showLabels:t.model.enableDrillDown?!0:!1,groupBorderThickness:0,groupPadding:0,showHeader:!1,groupPath:this.getColumnContainer().FieldInfos[n].UniqueColumnName,labelPosition:"topleft",labelVisibilityMode:"hideonexceededlength",labelTemplate:this.controlId+"_labeltemplate"+(t.model.enableDrillDown?t.model.drillDownLevel:n)})}else if(!BoldBIDashboard.isNullOrUndefined(this.getColumnContainer()))for(n=0;n<this.getColumnContainer().FieldInfos.length;n++){if(this.getMapProperties().EnableDrilldown&&i.length===1)break;i.push({showLabels:this.getMapProperties().EnableDrilldown?!0:!1,groupBorderThickness:0,groupPadding:0,showHeader:!1,groupPath:this.getColumnContainer().FieldInfos[n].UniqueColumnName,labelPosition:"topleft",labelVisibilityMode:"hideonexceededlength",labelTemplate:this.controlId+"_labeltemplate"+n})}return i},t.prototype.updateHighLightOnSelection=function(){var n=this.treemapElement.data("BoldBIDashboardTreeMap"),t=!BoldBIDashboard.isNullOrUndefined(this.widgetJson)&&!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().FilterSettings)&&this.getMapProperties().FilterSettings.ActAsMasterWidget||!BoldBIDashboard.isNullOrUndefined(this.widgetJson)&&!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().UrlLink);BoldBIDashboard.isNullOrUndefined(n)||(n.option("highlightOnSelection",t),this.refresh())},t.prototype.showLoadingIndicator=function(){this.contentContainer.find("#"+this.designerId+"treemapItem"+this.widgetJson.UniqueName).BoldBIDashboardWaitingPopup("show")},t.prototype.hideLoadingIndicator=function(){this.contentContainer.find("#"+this.designerId+"treemapItem"+this.widgetJson.UniqueName).BoldBIDashboardWaitingPopup("hide")},t.prototype.getMapProperties=function(){return this.widgetJson},t.prototype.disposeTreeMap=function(){var n=this.treemapElement.data("BoldBIDashboardTreeMap");this.designerInstance.element.find("#"+this.treemapElement.attr("id")+"_toolTip").parent().remove();BoldBIDashboard.isNullOrUndefined(n)||n.destroy();this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.TreeMap)},t.prototype.setColorCustomization=function(t,i){var s;if(!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)&&this.getMapProperties().EnableColorSettings){var r=this.getMapProperties().ColorCustomization,f=null,o=null,e=r.Type===ColorCustomizationType.Gradient?r.GradientSettings.BasedOn:r.Type===ColorCustomizationType.Rule?r.RuleRangeSettings.BasedOn:r.SolidColorInfo[0].BasedOn;if(!BoldBIDashboard.isNullOrUndefined(t.minMaxValues)&&BoldBIDashboard.isNullOrUndefined(i.minimumValue)&&BoldBIDashboard.isNullOrUndefined(i.maximumValue)?(s=JSON.parse(t.minMaxValues),Object.keys(s).length>0&&(f=Number(s["Min_"+e.FieldId.substring(15)+"_Color"]),o=Number(s["Max_"+e.FieldId.substring(15)+"_Color"]))):BoldBIDashboard.isNullOrUndefined(i.minimumValue)||BoldBIDashboard.isNullOrUndefined(i.maximumValue)||(f=i.minimumValue.weight,o=i.maximumValue.weight),r.Type===ColorCustomizationType.Gradient){i.enableGradient=!0;i.desaturationColorMapping={from:0,to:0,rangeMinimum:0,rangeMaximum:0,color:""};i.rangeColorMapping=this.getGradientColors(r,f,o);var u=n.prototype.getDefaultMeasureFormat.call(this),h=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(u.Prefix),this.DataGroupInfo.DataSourceName),c=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(u.Suffix),this.DataGroupInfo.DataSourceName);this.legendLeftLabel=f!=null?BoldBIDashboard.DashboardUtil.formattedText(f,u.Culture,u.DecimalPoints,u.FormatType,u.DecimalSeparator,u.GroupSeparator,h,c,u.Unit,!0,this.designerInstance,u.EnableLakhsAndCroreRep):String(f);this.legendRightLabel=o!=null?BoldBIDashboard.DashboardUtil.formattedText(o,u.Culture,u.DecimalPoints,u.FormatType,u.DecimalSeparator,u.GroupSeparator,h,c,u.Unit,!0,this.designerInstance,u.EnableLakhsAndCroreRep):String(f);i.legendSettings.leftLabel=this.getResponsiveLegendLabelVisibility()?this.legendLeftLabel:"";i.legendSettings.rightLabel=this.getResponsiveLegendLabelVisibility()?this.legendRightLabel:"";i.legendSettings.height=20;i.legendSettings.width=170;i.fill=this.updateDefaultFormatColor(r);i.legendSettings.mode="interactive";i.legendSettings.alignment="center";!BoldBIDashboard.isNullOrUndefined(r.GradientSettings.GradientColorInfo.legendText)&&r.GradientSettings.GradientColorInfo.legendText?(this.legendTitle=r.GradientSettings.GradientColorInfo.legendText,i.legendSettings.title=this.getResponsiveLegendLabelVisibility()?this.legendTitle:""):(this.legendTitle=this.getTitleForLegend(e.FieldId),i.legendSettings.title=this.getResponsiveLegendTitleVisibility()?this.legendTitle:"");i.legendSettings.textPath=this.getColumnContainer().FieldInfos[i.drillDownLevel].UniqueColumnName}else r.Type===ColorCustomizationType.Individual?(i.desaturationColorMapping={from:0,to:0,rangeMinimum:0,rangeMaximum:0,color:""},i.paletteColorMapping={colors:[]},i.enableGradient=!1,i.rangeColorMapping=[],i.uniColorMapping=[],i.colorPath=e.FieldId.substring(15)+"_Color",this.commonLegendSettings(i),i.legendSettings.textPath=this.getColumnContainer().FieldInfos[i.drillDownLevel].UniqueColumnName):r.Type===ColorCustomizationType.Rule&&(i.enableGradient=!1,i.fill=this.getMapProperties().ColorCustomization.DefaultColor,this.commonLegendSettings(i),i.desaturationColorMapping={from:0,to:0,rangeMinimum:0,rangeMaximum:0,color:""},i.rangeColorMapping=BoldBIDashboard.isNullOrUndefined(r.RuleRangeSettings.RangeColorInfo[0].DimensionConditionalValue)?this.getRangeColorMapping(r.RuleRangeSettings,f,o):[],i.legendSettings.textPath=this.getColumnContainer().FieldInfos[i.drillDownLevel].UniqueColumnName,i.legendSettings.alignment="near",BoldBIDashboard.isNullOrUndefined(r.RuleRangeSettings.RangeColorInfo[0].DimensionConditionalValue)||(i.paletteColorMapping={colors:[]},i.enableGradient=!1,i.uniColorMapping=[],i.colorPath=e.FieldId.substring(15)+"_CustomColor",i.legendSettings.textPath=e.FieldId.substring(15)+"_Condition"));i.colorValuePath=e.FieldId.substring(15)+"_Color"}else this.setGlobalColor(),this.updateMonochromaticSettings(t,this.getMapProperties().DefaultColor.Color,i),i.legendSettings.textPath=this.getColumnContainer().FieldInfos[i.drillDownLevel].UniqueColumnName},t.prototype.setGlobalColor=function(){var n=this.getMapProperties().DefaultColor,i=this.getValueContainer(),t=i.FieldInfos.length>1?i.FieldInfos[1].UniqueColumnName:i.FieldInfos[0].UniqueColumnName,u=BoldBIDashboard.Dashboard.WidgetHelper.getGlobalColumnId(t,this.DataGroupInfo.FieldContainers),r=BoldBIDashboard.Dashboard.WidgetHelper.getColorCode(this,u,n);n.Color.length===0&&n.Name.length===0?(n.Name=t,n.Color=r,n.IsEdited=!1):n.Name===t?n.Color=n.IsEdited?n.Color:r:(n.Name=t,n.Color=r,n.IsEdited=!1)},t.prototype.updateBackWardCompatability=function(){var t=this.getMapProperties().Data.Containers.filter(function(n){return n.Name==="Value"}),i,n,r;BoldBIDashboard.isNullOrUndefined(this.getMapProperties().DefaultColor)&&t.length>0&&(i=this.getMapProperties().SaturatedColor,n=t[0].FieldInfos,n.length>0&&(this.getMapProperties().DefaultColor=new DefaultColorSet,r=n.length>1?n[1].UniqueColumnName:n[0].UniqueColumnName,this.getMapProperties().DefaultColor.IsEdited=!0,this.getMapProperties().DefaultColor.Color=i,this.getMapProperties().DefaultColor.Name=r))},t.prototype.updateDefaultFormatColor=function(n){var t=n.GradientSettings.GradientColorInfo,i=n.GradientSettings.BasedOn.DefaultFormatType;return i===DefaultFormatType.Specific?t.DefaultFormatColor.Color:n.DefaultColor},t.prototype.updateLegendVisibility=function(n){var t=this.getMapProperties().ShowLegend;this.getMapProperties().EnableColorSettings&&this.getMapProperties().ColorCustomization.SolidColorInfo!==null?(n.showLegend=!1,this.getMapProperties().ShowLegend=!1,this.setPropertyElement("BasicSettings","ShowLegend",!1)):(this.getMapProperties().ShowLegend=t&&this.getResponsiveLegendVisibility(),this.setPropertyElement("BasicSettings","ShowLegend",t))},t.prototype.getGradientColors=function(n,t,i){var c=BoldBIDashboard.DashboardUtil.isEmptyString(n.DefaultColor)?BoldBIDashboard.Dashboard.WidgetHelper.defaultColorPalette[0]:n.DefaultColor,r=n.GradientSettings.GradientColorInfo,e=1e-6,o=r.Low.Color,l=r.Mid.Color,u=r.High.Color,a=r.Low.Value,p=r.Mid.Value,s=r.High.Value,v=t,y=i,h,f;return r.Low.IsCustom&&(v=a),r.High.IsCustom&&(y=s),h=(v+y)/2,f=[],r.Low.IsCustom||r.Mid.IsCustom||r.High.IsCustom?(r.Low.IsCustom&&(a>t?f.push({gradientColors:[c,c],from:t,to:a}):f.push({gradientColors:[o,o],from:t,to:a}),t=a),r.HasMidColor?(r.Mid.IsCustom&&(h=p),f.push({gradientColors:[o,l],from:t,to:h}),r.High.IsCustom?f.push({gradientColors:[l,u],from:h,to:s+e},{gradientColors:[c,c],from:s,to:i+e}):f.push({gradientColors:[l,u],from:h,to:i+e})):r.High.IsCustom?s<i?f.push({gradientColors:[o,u],from:t,to:s+e},{gradientColors:[c,c],from:s,to:i+e}):f.push({gradientColors:[o,u],from:t,to:s+e},{gradientColors:[u,u],from:s,to:i+e}):f.push({gradientColors:[o,u],from:t,to:i+e})):f=t===i?[{gradientColors:[u,u],from:t,to:i}]:r.HasMidColor?[{gradientColors:[o,l],from:t,to:h},{gradientColors:[l,u],from:h,to:i+e}]:[{gradientColors:[o,u],from:t,to:i+e}],f},t.prototype.renderColorSettings=function(n,t,i){if(this.categoryId=this.designerId+"_"+t+"_"+i.categoryName,this.colorContainer=this.designerInstance.element.find("#"+this.categoryId),this.colorContainer.length!==0||BoldBIDashboard.isNullOrUndefined(n))this.colorContainer.length>0&&this.renderColorSettingsElement();else{this.colorContainer=BoldBIDashboard.buildTag("div.e-dashbrd-customcolor-container","",{},{id:this.categoryId});var r=BoldBIDashboard.buildTag("div","",{},{id:this.categoryId+"_wrap"}),u=BoldBIDashboard.buildTag("div.e-basic-advance-panel-wrap","",{width:"100%"},{id:this.designerId+"_"+t+"_basicAdvancePanel"}),f=this.getAdvance(this.categoryId);u.append(f);r.append(u);this.colorContainer.append(r);n.append(this.colorContainer)}this.renderSettings()},t.prototype.getAdvance=function(n){var t=BoldBIDashboard.buildTag("div.e-advance-row","",{},{id:this.designerId+"_advanceRow_table"}),i=BoldBIDashboard.buildTag("div.e-advance-color-settings-button","",{},{}),r=BoldBIDashboard.buildTag("button.e-advanced-color-settings-button bbi-dbrd-btn-small bbi-dbrd-btn-primary","Customize",{width:"230px"},{id:n+"_advance_settings_button",type:"button"});return i.append(r),t.append(this.monochromaticSection()),t.append(i)},t.prototype.renderSettings=function(){var n=this.colorContainer.find(".e-color-settings-monochromatic-wrap"),t=this.colorContainer.find(".e-advance-color-settings-button"),i=this.colorContainer.find(".e-advanced-color-settings-button");this.getMapProperties().EnableColorSettings?(n.css("display","none"),t.css("display","block")):this.getMapProperties().EnableColorSettings||(n.css("display","block"),t.css("display","none"));i.off("click",this.bbdesigner$.proxy(this.editColorCustomization,this,!0));i.on("click",this.bbdesigner$.proxy(this.editColorCustomization,this,!0))},t.prototype.renderColorSettingsElement=function(){this.colorContainer.find("#"+this.designerId+"_"+this.Type+"_monochromatic_ColorPicker").BoldBIDashboardColorPicker({value:this.getMapProperties().DefaultColor.Color})},t.prototype.monochromaticSection=function(){var n=BoldBIDashboard.buildTag("div.e-color-settings-monochromatic-wrap","",{"margin-left":"195px"},{id:this.designerId+"_"+this.Type+"_formatting_wrap"}),t=BoldBIDashboard.buildTag("div.e-color-settings-monochromatic-color-wrapper","",{}),i=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:this.designerId+"_"+this.Type+"_monochromatic_ColorPicker"});return t.append(i),i.BoldBIDashboardColorPicker({value:this.getMapProperties().DefaultColor.Color,cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label e-color-settings-monochromatic-color-picker",select:this.bbdesigner$.proxy(this.updateMonochromaticColorValue,this),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown}),n.append(t),n},t.prototype.updateColorSettings=function(n){var u=this.treemapElement.data("BoldBIDashboardTreeMap"),t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designerInstance.designerPanel.selectedReportItems[0]),i=this.colorContainer.find(".e-color-settings-monochromatic-wrap"),r=this.colorContainer.find(".e-advance-color-settings-button");n==="Monochromatic"?(t.getMapProperties().EnableColorSettings=!1,t.updateMonochromaticSettings(t.dataValues,t.getMapProperties().DefaultColor.Color,u.model),this.propertyPanel.updateItemVisibility("TreeMap","BasicSettings","ShowLegend",!t.getMapProperties().EnableDrilldown),t.getMapProperties().EnableDrilldown&&t.removeAllDrillElements(),i.css("display","block"),r.css("display","none"),t.treemapElement.BoldBIDashboardTreeMap("refresh"),this.designerInstance.modules.serialization.notifyChange()):n==="Advanced"&&(t.editColorCustomization(t),i.css("display","none"),r.css("display","block"))},t.prototype.updateMonochromaticColorValue=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designerInstance.designerPanel.selectedReportItems[0]);if(!BoldBIDashboard.isNullOrUndefined(n.RGBA)&&!t.getMapProperties().EnableColorSettings&&t.DataGroupInfo.FieldContainers.length>0&&t.getValueContainer().FieldInfos.length>0&&t.getColumnContainer().FieldInfos.length>0){var i=this.propertyPanel.getHexColorFromRGBA(n.RGBA),r=t.treemapElement.data("BoldBIDashboardTreeMap"),u=t.getMapProperties().DefaultColor.IsEdited||t.getMapProperties().DefaultColor.Color!==i;r.model.desaturationColorMapping.color=i;t.getMapProperties().DefaultColor.Color=i;t.getMapProperties().DefaultColor.IsEdited=u;r.model.rangeColorMapping=[];t.treemapElement.BoldBIDashboardTreeMap("refresh");this.designerInstance.modules.serialization.notifyChange()}},t.prototype.updateMonochromaticSettings=function(n,t,i){var f=[],r,u;i.colorValuePath=this.getValueContainer().FieldInfos[0].UniqueColumnName;r=this.getFromValue(JSON.parse(n.data),i.colorValuePath);u=this.getToValue(JSON.parse(n.data),i.colorValuePath);r=r===0?-1:r;this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getColumnContainer().FieldInfos.length>0&&(r!==u?f.push({color:t,from:.1,to:1,rangeMinimum:r,rangeMaximum:u+1}):f.push({color:t,from:1,to:1,rangeMinimum:r,rangeMaximum:u+1}));i.desaturationColorMapping=f[0];i.rangeColorMapping=[];this.getMapProperties().ColorCustomization=null;this.updateMonochromaticLegendSettings(i,n)},t.prototype.updateMonochromaticLegendSettings=function(n,t){n.legendSettings.height=20;n.legendSettings.width=170;n.legendSettings.dockPosition="bottom";n.legendSettings.mode="interactive";n.legendSettings.alignment="center";this.updateLegendTitle(n);var i=t.formattedData.formatminvalue,r=t.formattedData.formatmaxvalue;this.legendLeftLabel=i!=null?i:String(this.getFromValue(n.dataSource,this.getValueContainer().FieldInfos[0].UniqueColumnName));this.legendRightLabel=r!=null?r:String(this.getToValue(n.dataSource,this.getValueContainer().FieldInfos[0].UniqueColumnName));n.legendSettings.leftLabel=this.getResponsiveLegendLabelVisibility()?this.legendLeftLabel:"";n.legendSettings.rightLabel=this.getResponsiveLegendLabelVisibility()?this.legendRightLabel:""},t.prototype.updateLegendTitle=function(n){this.getValueContainer().FieldInfos.length>0&&!this.getMapProperties().EnableColorSettings&&(this.legendTitle=this.getValueContainer().FieldInfos[0].DisplayName,n.legendSettings.title=this.getResponsiveLegendTitleVisibility()?this.legendTitle:"")},t.prototype.getColorCustomization=function(){return BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)&&this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getColumnContainer().FieldInfos.length>0||this.checkFieldIdPresent()?(this.getMapProperties().ColorCustomization=new ColorCustomization,this.getMapProperties().ColorCustomization.Type=ColorCustomizationType.Gradient):!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)&&this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length===0&&this.getColumnContainer().FieldInfos.length===0&&(this.getMapProperties().ColorCustomization=null),this.getMapProperties().ColorCustomization},t.prototype.getTitleForLegend=function(n){for(var i,u=this.DataGroupInfo.DataSourceID,r="",t=0;t<this.dataSet.datasets.length;t++)if(this.dataSet.datasets[t].Id===u)for(i=0;i<this.dataSet.datasets[t].Fields.length;i++)this.dataSet.datasets[t].Fields[i].Id===n&&(r=this.dataSet.datasets[t].Fields[i].DataField);return r},t.prototype.getRangeColorMapping=function(n,t,i){for(var c,y=[],r=[],u=0,l=1,e=1e-6,v=0;v<n.RangeColorInfo.length;v++){var a=v,s=this.getRangeColors(n.RangeColorInfo[a].PropertyColorPair),h=BoldBIDashboard.isNullOrUndefined(n.RangeColorInfo[a].RangeLabel)?"":n.RangeColorInfo[a].RangeLabel,f=[n.RangeColorInfo[a].StartRange,n.RangeColorInfo[a].EndRange],o=[];BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(i)?o.push(494065645841247e-338,17976931348623157e292):n.BasedOn.ValueType===ValueType.Value?o.push(t,i):o.push(0,100);switch(n.RangeColorInfo[a].MeasureCondition){case 0:r.push({StartRange:f[u]+e,EndRange:o[l]+e,Color:s,LegendLabel:h});break;case 1:r.push({StartRange:f[u],EndRange:o[l]+e,Color:s,LegendLabel:h});break;case 2:r.push({StartRange:o[u],EndRange:f[u]-e,Color:s,LegendLabel:h});break;case 3:r.push({StartRange:o[u],EndRange:f[u]+e,Color:s,LegendLabel:h});break;case 4:r.push({StartRange:f[u],EndRange:f[u],Color:s,LegendLabel:h});break;case 5:r.push({StartRange:o[u],EndRange:f[u]-e,Color:s,LegendLabel:h});r.push({StartRange:f[u]+e,EndRange:o[l]+e,Color:s,LegendLabel:h});break;case 6:r.push({StartRange:f[u],EndRange:f[l],Color:s,LegendLabel:h});break;case 7:r.push({StartRange:o[u],EndRange:f[u]-e,Color:s,LegendLabel:h});r.push({StartRange:f[l]+e,EndRange:o[l]+e,Color:s,LegendLabel:h})}}for(c=0;c<r.length;c++)y.push({from:r[c].StartRange,to:r[c].EndRange,color:r[c].Color[0],legendLabel:r[c].LegendLabel});return y},t.prototype.getRangeColors=function(n){for(var i=[],t=0;t<n.length;t++)if(n[t].WidgetProperties===0){i.push(n[t].Color);break}return i},t.prototype.editColorCustomization=function(){var e=new BoldBIDashboard.DashboardDesignerUtility.AdvancedColorCustomization(this.designerInstance),n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designerInstance.designerPanel.selectedReportItems[0]),r=BoldBIDashboard.isNullOrUndefined(n.getMapProperties().ColorCustomization)?new ColorCustomization:n.getMapProperties().ColorCustomization,t=new ColorFieldsInfo,i,u,f;t.ColorPicker=ColorSetColorPickers.NormalColorPicker;t.Name=WidgetProperty.FillColor;t.DisplayName="Fill color";i=[];i.push(t);u=n.getValueContainer().FieldInfos[0];f={colorCustomizationObj:r,DataGroupInfo:n.DataGroupInfo,showFirstDimension:!0,colorFields:i,hasDefaultColor:!0,defaultBasedOnField:u,defaultColorFill:r.DefaultColor,isDefaultFormat:!0};e.populateUI(f,n,"UpdateColorCustomization")},t.prototype.UpdateColorCustomization=function(n,t){var i=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designerInstance.designerPanel.selectedReportItems[0]),r,u;t?!i.getMapProperties().EnableColorSettings&&t&&(this.renderSettings(),this.setPropertyElement("Formatting","ColorSettings","Monochromatic"),i.getMapProperties().EnableColorSettings=!1):(i.getMapProperties().ColorCustomization=n,n.Type===ColorCustomizationType.Individual&&(r=i.getColumnContainer().FieldInfos[0],u=i.getMapProperties().ColorCustomization.SolidColorInfo[0].BasedOn.UniqueColumnName==="",i.getMapProperties().ColorCustomization.SolidColorInfo[0].BasedOn.FieldId=r.Id,i.getMapProperties().ColorCustomization.SolidColorInfo[0].BasedOn.UniqueColumnName=r.UniqueColumnName,i.getMapProperties().ColorCustomization.SolidColorInfo[0].BasedOn.SummaryType=SummaryType.NONE,u&&this.updateEditedProperty(i.getMapProperties().ColorCustomization.SolidColorInfo[0],r)),i.getMapProperties().EnableDrilldown&&i.removeAllDrillElements(),i.getMapProperties().EnableColorSettings=!0,this.designerInstance.modules.serialization.notifyChange(),i.dataConfigurationInstance.postDraggedFields())},t.prototype.updateEditedProperty=function(n,t){for(var r=n.DefaultColorSets,i=0;i<r.length;i++){var u=r[i].Color.toString(),f=r[i].Name.toString(),e=t.FieldActualType==="bbi-designer-dataset-datetime"?t.Id+"_"+t.DateTimeFormat:t.Id,o=this.designerInstance.modules.resource.getColumnValueColorCode(e,f.toString());r[i].IsEdited=u!==o.toString()}},t.prototype.setDefaultColorCustomization=function(){this.getMapProperties().ColorCustomization=BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)&&this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getColumnContainer().FieldInfos.length>0?this.getColorCustomization():null;this.getMapProperties().DefaultColor=new DefaultColorSet;this.getMapProperties().EnableColorSettings=!1;this.designerInstance.modules.serialization.notifyChange()},t.prototype.commonLegendSettings=function(n){n.legendSettings.height=40;n.legendSettings.width=this.controlContainer.width();n.legendSettings.mode="default";this.legendTitle="";n.legendSettings.title="";n.legendSettings.dockPosition="bottom";n.legendSettings.textPath=""},t.prototype.checkFieldIdPresent=function(){return!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)&&this.getMapProperties().ColorCustomization.Type===ColorCustomizationType.Individual&&this.DataGroupInfo.FieldContainers.length>0&&this.getColumnContainer().FieldInfos.length>0&&this.getMapProperties().ColorCustomization.SolidColorInfo[0].BasedOn.FieldId===this.getColumnContainer().FieldInfos[0].Id&&this.getMapProperties().ColorCustomization.SolidColorInfo[0].DefaultColorSets.length===0},t.prototype.applyThemeForDrillDown=function(){var n=this.treemapElement.find(".e-drilldownHeader"),i,e,f,r,t,u;this.getMapProperties().EnableDrilldown&&n.length>0&&(n.addClass("e-treemap-dbrd-theme"),i=n.attr("style"),e="background-color:transparent!important;",i=this.designerInstance.modules.themeHelper.getStyleString(i,e),n.attr("style",i),!BoldBIDashboard.isNullOrUndefined(this.drillLevelInfo)&&this.drillLevelInfo.length>0?(f=n.find(".e-drilldownlabel"),this.bbdesigner$(f[f.length-1]).addClass("e-treemap-dbrd-theme"),n.find(".e-drilldownlabel").find(".e-glyphicon").css("color",this.designerInstance.modules.themeHelper.getWidgetTileTextColor())):n.find(".e-drilldownlabel").children().addClass("e-treemap-dbrd-theme"));r=[];t=[];t.push("._drillHeaderDiv .e-treemap-dbrd-theme",".e-dashboardviewer .e-drilldownHeader");u="\tbackground-color: transparent !important;\n";r.push({key:t+"",value:u+""});t=[];t.push(".e-drilldownHeader .e-drilldownlabel .e-treemap-dbrd-theme");u="\tcolor: "+this.designerInstance.modules.themeHelper.getWidgetTileTextColor()+" !important;\n";r.push({key:t+"",value:u+""});this.designerInstance.modules.themeHelper.createandAppendCustomStyle(this.designerInstance._id+"treeMapDrillDownStyle",r)},t.prototype.updateFontStyleForBreadCrumb=function(){var t=this.treemapElement.find(".e-drilldownHeader"),n,i;t.length>0&&(n=this.designerInstance.modules.themeHelper.getTreeMapDataLabelFontText(),i=n.size==="16px"?"12px":n.size==="32px"?"20px;":"8px",t.find(".e-drilldownlabel").find(".e-glyphicon").attr("style","color:#000000;padding:0px 9px;font-size:"+i+" !important"),t.find(".e-drilldowntext").attr("style","font-size:"+n.size+" !important"),t.find(".e-drilldownlabel").css("font-weight",n.weight))},t.prototype.updateFontStyle=function(){var u=this.designerInstance.modules.themeHelper.getTreeMapDataLabelFontText(),n=this.contentContainer.find(".LegendDiv"),t=this.designerInstance.modules.themeHelper.getTreeMapLegendFontText(),i=this.designerInstance.modules.themeHelper.getTreeMapLegendTitleFontText(),r;n.length!==0&&(n.find(".e-interactivelegend-title").length!==0&&n.find(".e-interactivelegend-title").css({"font-size":i.size,"font-family":i.family,"font-weight":i.weight}),n.find(".e-interactivelegend-leftlabel").length!==0&&n.find(".e-interactivelegend-leftlabel").css({"font-size":t.size,"font-family":t.family,"font-weight":t.weight}),n.find(".e-interactivelegend-rightlabel").length!==0&&n.find(".e-interactivelegend-rightlabel").css({"font-size":t.size,"font-family":t.family,"font-weight":t.weight}),n.find(".e-treemap-legendLabel").length!==0&&n.find(".e-treemap-legendLabel").css({"font-size":t.size,"font-family":t.family,"font-weight":t.weight}));r=this.treemapElement.find("."+this.getMapProperties().UniqueId+"_treeMapLabel");r.length!==0&&r.css({fontSize:u})},t.prototype.treemapLoaded=function(){this.applyThemeForDrillDown();this.updateFontStyle();this.updateFontStyleForBreadCrumb();this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.view&&this.changeTooltipElementPosition();this.IsRendered=!0},t.prototype.changeTooltipElementPosition=function(){var n=this.bbdesigner$(".tooltipelement"),t=this.designerInstance.element.parent(),i=this.designPanelInstance.banner.bannerPanel.find(".bbi-dashboarddesigner-bannerPanel-iconcontainer").children(".su-minimize").length>0;n.length>0&&this.designerInstance.element.find(".tooltipelement").length===0&&i?t.append(n):t.find(".tooltipelement").length>0&&!i&&this.designerInstance.element.parents("body").append(n)},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.TreeMapItem",InternalTreeMapReportItem,window);BoldBIDashboard.DashboardDesignerUtility.TreeMapItem.prototype.initialize();BoldBIDashboardDesigner.bbdesignerstatic$.views.helpers({getLabelColor:function(n,t,i){return(t=parseFloat(t),i=parseFloat(i),t===i)?"white":n<(i-t)/3+t?"black":"white"},getRowNameData:function(n,t){var i=[];return BoldBIDashboard.isNullOrUndefined(n)&&(i.push(n),i!==null&&i.length>0)?i[0][t]:n!=null&&n.length>0?n[0][t]:""},firstLevelData:function(n,t){var u=0,i=[],r,f;for(BoldBIDashboard.isNullOrUndefined(n.length)?i.push(n):i=n,r=0;r<i.length;r++)f=i[r][t],u=f;return u}});__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalHeatMapReportItem=function(n){function t(t){var i=n.call(this,t,"HeatMap","e-heatmap-item")||this;return i.componentName="heatmap",i.isFromDraft=!1,i.isXAxisTitleChanged=!1,i.isYAxisTitleChanged=!1,i.breadCrumbItem=null,i.colorCustomization=null,i.locale=null,i.designer=t,i.bbdesigner$=i.designer.bbdesigner$,i.locale=i.designer.getLocalizationContent(),i.designerId=i.designerInstance._id,i.widgetJson=new HeatMapProperties(t),i.propertyPanel=t.modules.propertyPanel,i.colorCustomization=i.designer.modules.advancedColorCustomization,i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.relation,GroupId:"c55f5601-8e79-4a16-94d6-ddd4cc051555",Items:[{id:"8d3e286f-5057-4267-b5ee-21b2d2985678",widgetName:"HeatMap",widgetDisplayName:n.itemPanel.widgetTitle.heatMap,cssClass:"bbi-widgeticon bbi-designer-widget-heatmap",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.HeatMapItem",searchCategory:["heatmap","relationship"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.heatMap,description:n.itemPanel.widgetDescription.heatMapDesc,dataRequirement:n.itemPanel.widgetDataRequirements.heatMapDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMapProperties"}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){this.createHeatMapConatiner(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.heatMapElement)||this.updateHeatMapSize()},t.prototype.updateDataGroupInfo=function(t,i){n.prototype.updateDataGroupInfo.call(this,t,i);this.getXAxisContainer().FieldInfos.length<=1&&this.getYAxisContainer().FieldInfos.length<=1?(this.getMapProperties().EnableDrilldown=!1,this.drillLevelInfo=null):(this.getMapProperties().EnableDrilldown=!0,this.drillLevelInfo=!BoldBIDashboard.isNullOrUndefined(this.drillLevelInfo)&&this.drillLevelInfo.length>0?this.drillLevelInfo:[])},t.prototype.update=function(n){this.IsRendered=!1;this.updateTitleSubtitleTheme();this.updateHeatMapData(n)},t.prototype.applyWidgetTheme=function(n){var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName),e,i,r,u,f;if(this.updateTitleSubtitleTheme(),e=BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this),e||BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this),i=this.themeHelper.getHeatMapLegendFontText(),t.legendSettings.textStyle.color=this.themeHelper.getHeatmapLegendFontColor(),t.legendSettings.textStyle.size=i.size,t.legendSettings.textStyle.fontFamily=i.family,t.legendSettings.textStyle.fontWeight=i.weight,t.xAxis.title.textStyle.color=this.themeHelper.getHeatmapAxisTitleFontColor(),t.xAxis.textStyle.color=this.getMapProperties().CellSettings.XAxisLabelColor.IsEdited?this.getMapProperties().CellSettings.XAxisLabelColor.Color:this.themeHelper.getHeatmapAxisLabelFontColor(),t.yAxis.title.textStyle.color=this.themeHelper.getHeatmapAxisTitleFontColor(),t.yAxis.textStyle.color=this.getMapProperties().CellSettings.YAxisLabelColor.IsEdited?this.getMapProperties().CellSettings.YAxisLabelColor.Color:this.themeHelper.getHeatmapAxisLabelFontColor(),r=this.themeHelper.getHeatMapAxisTitleFontText(),u=this.themeHelper.getHeatMapAxisLabelFontText(),t.xAxis.textStyle.size=t.yAxis.textStyle.size=u.size,t.xAxis.textStyle.fontWeight=t.yAxis.textStyle.fontWeight=u.weight,t.xAxis.textStyle.fontFamily=t.yAxis.textStyle.fontFamily=u.family,t.xAxis.title.textStyle.size=t.yAxis.title.textStyle.size=r.size,t.xAxis.title.textStyle.fontWeight=t.yAxis.title.textStyle.fontWeight=r.weight,t.xAxis.title.textStyle.fontFamily=t.yAxis.title.textStyle.fontFamily=r.family,f=this.themeHelper.getHeatMapDataLabelFontText(),t.cellSettings.border.color=this.getCellBorderColor(n),t.cellSettings.textStyle.color=this.getMapProperties().CellSettings.LabelColor.IsEdited?this.getMapProperties().CellSettings.LabelColor.Color:this.themeHelper.getHeatmapDataLabelFontColor(),t.cellSettings.textStyle.size=f.size,t.cellSettings.textStyle.fontFamily=f.family,t.cellSettings.textStyle.fontWeight=f.weight,t.paletteSettings.emptyPointColor=this.themeHelper.getHeatmapEmptyFillColor(),this.applyWidgetBackgroundTheme(),!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().DefaultColor)&&!this.getMapProperties().DefaultColor.IsEdited&&!this.getMapProperties().EnableColorSettings){var o=this.getValueContainer(),h=o.FieldInfos.length>0?o.FieldInfos[0].UniqueColumnName:null,c=BoldBIDashboard.Dashboard.WidgetHelper.getGlobalColumnId(h,this.DataGroupInfo.FieldContainers),s=this.designerInstance.modules.resource.getColumnColorCodeBasedonTheme(c),l=this.monochromaticLowValueColorGeneration(s);this.updateMonochromaticSettings(l,s)}this.updateHeatMapSize()},t.prototype.updateTitleSubtitleTheme=function(){var n=this.themeHelper.getHeatMapHeaderTitle(),t=this.themeHelper.getHeatMapHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getMapProperties().ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.canCombineRequest=function(){return!0},t.prototype.getCellBorderColor=function(){return"transparent"},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej2.heatmap.all.min.js",NameSpace:"ejdashboard.heatmap.HeatMap"},DependentScripts:[]}},t.prototype.getWidgetImage=function(){return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="Heat-map" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g transform="translate(12.000000, 12.000000)" fill-rule="nonzero">            <rect id="Rectangle" fill="var(--widget-notconfigured-image-background2)" x="0" y="0" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-4" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" x="50.9086336" y="0" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-8" fill="var(--widget-notconfigured-image-background2)" x="102.974282" y="0" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-12" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" x="152.725901" y="0" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" x="0" y="47.3450292" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-5" fill="var(--widget-notconfigured-image-background2)" x="50.9086336" y="47.3450292" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-9" fill="var(--widget-notconfigured-image-background2)" x="101.817267" y="47.3450292" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-13" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" x="152.725901" y="47.3450292" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-2" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" x="0" y="94.6900585" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-6" fill="var(--widget-notconfigured-image-background2)" x="50.9086336" y="94.6900585" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-10" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" x="101.817267" y="94.6900585" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-14" fill="var(--widget-notconfigured-image-background2)" x="152.725901" y="94.6900585" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-3" fill="var(--widget-notconfigured-image-background2)" x="0" y="142.035088" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-7" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" x="50.9086336" y="142.035088" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-11" fill="var(--widget-notconfigured-image-background2)" x="101.817267" y="142.035088" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-15" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" x="152.725901" y="142.035088" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-8" fill="var(--widget-notconfigured-image-background2)" x="205.124819" y="2.48689958e-14" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-12" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" x="254.876438" y="2.48689958e-14" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-9" fill="var(--widget-notconfigured-image-background2)" x="203.967805" y="47.3450292" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-13" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" x="254.876438" y="47.3450292" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-10" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" x="203.967805" y="94.6900585" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-14" fill="var(--widget-notconfigured-image-background2)" x="254.876438" y="94.6900585" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-11" fill="var(--widget-notconfigured-image-background2)" x="203.967805" y="142.035088" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>            <rect id="Rectangle-Copy-15" fill-opacity="0.7" fill="var(--widget-notconfigured-image-background1)" x="254.876438" y="142.035088" width="45.1235616" height="41.9649123" rx="2.14035088"><\/rect>        <\/g>    <\/g><\/svg>'},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,"ejdashboard.heatmap.HeatMap")},t.prototype.getFieldContainer=function(){var u=new BoldBIDashboard.Dashboard.FieldContainerForUI,f,i,r,t,e;return u.Name="Value",u.DisplayName=this.locale.fieldContainer.value,u.ContainerType=FieldContainerType.Numeric,u.CategoryCount=1,u.Required=!0,f=new BoldBIDashboard.Dashboard.FieldContainerForUI,f.Name="Size",f.DisplayName=this.locale.fieldContainer.size,f.ContainerType=FieldContainerType.Numeric,f.CategoryCount=1,i=new BoldBIDashboard.Dashboard.FieldContainerForUI,i.Name="X-Axis",i.DisplayName=this.locale.fieldContainer.xAxis,i.ContainerType=FieldContainerType.Non_Numeric,i.IsDrillSection=!0,i.Required=!0,r=new BoldBIDashboard.Dashboard.FieldContainerForUI,r.Name="Y-Axis",r.DisplayName=this.locale.fieldContainer.yAxis,r.ContainerType=FieldContainerType.Non_Numeric,r.IsDrillSection=!0,r.Required=!0,t=new BoldBIDashboard.Dashboard.FieldContainerForUI,t.Name="HiddenColumn",t.DisplayName=this.locale.dataconfiguration.filedContainer.hiddenColumnName,t.ContainerType=FieldContainerType.None,t.QueryOrder=0,t.ShowDescriptionIcon=!0,t.TooltipText=this.locale.fieldContainer.hiddenColumnMessage.heatMap,e=BoldBIDashboard.DashboardUtil.getToolTipFieldsDefaultContainer(),[u,f,i,r,t,n.prototype.getFilterColumn.call(this),e]},t.prototype.updateDisplayTextBasedProperties=function(){this.updateXAxisTitle();this.updateYAxisTitle()},t.prototype.getValueContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Value")},t.prototype.getSizeContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Size")},t.prototype.getXAxisContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"X-Axis")},t.prototype.getYAxisContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Y-Axis")},t.prototype.onFieldSettingsClick=function(n,t){if(n.ContainerName==="HiddenColumn")for(var i=0;i<t.length;i++)(t[i].Name==="Sort"||t[i].Name==="DimensionFilters"||t[i].Name==="MeasureFilter"||t[i].Name==="RelativeDateFilter"||t[i].Name==="MeasureFormat")&&(t[i].IsVisible=!1);return t},t.prototype.getJson=function(){return this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t)},t.prototype.getPropertyPanelItems=function(){return this.getHeatMapPropertyPanel()},t.prototype.updatePropertyChange=function(n,t,i,r){this.updateHeatMapProperties(n,t,i,r)},t.prototype.updateInitialSelection=function(){this.initialSelectionForHeatMap()},t.prototype.clearFilter=function(n){if(this.bbdesigner$(this.heatMapElement[0]).hasClass("e-heatmap")){var t=ejdashboard.base.getComponent(this.heatMapElement[0],"heatmap");this.getMapProperties().SelectedFilterValues.length>0&&!BoldBIDashboard.isNullOrUndefined(t)&&this.getSelectedElement(t,!1);BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this);this.getMapProperties().SelectedFilterValues=[];this.isCurrentMaster=!1;this.designerInstance.modules.serialization.notifyChange();BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this);this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName)}},t.prototype.getMobileViewHeight=function(){return 3*this.designPanelInstance.cellHeight*this.designPanelInstance.cellHeightFactor},t.prototype.refresh=function(){},t.prototype.dispose=function(){this.disposeHeatMap();n.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.locale.itemPanel.widgetDataRequiredMessage.heatMapDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.getWidgetInfo=function(t,i){var r=n.prototype.getWidgetInfo.call(this,t,i),u=this.updateSortingDataGroupInfo(t);return r.XAxisSort=u.XaxisFieldData,r.YAxisSort=u.YaxisFieldData,r.ColorCustomization=this.getColorCustomization(),r},t.prototype.updateSortingDataGroupInfo=function(n){for(var u,t,i,f=[],e=[],r=0;r<n.FieldContainers.length;r++)for(u=0;u<n.FieldContainers[r].FieldInfos.length;u++)this.getMapProperties().SortSettings.XAxis!=="Auto"&&(t=JSON.parse(JSON.stringify(n.FieldContainers[r].FieldInfos[u])),t.IsVisible=!1,t.ContainerName==="X-Axis"&&(t.CustomSorting=null,t.IsVisible=!0,t.Sorting=this.getMapProperties().SortSettings.XAxis==="Ascending"?SortingOrder.Ascending:SortingOrder.Descending),f.push(t)),this.getMapProperties().SortSettings.YAxis!=="Auto"&&(i=JSON.parse(JSON.stringify(n.FieldContainers[r].FieldInfos[u])),i.IsVisible=!1,i.ContainerName==="Y-Axis"&&(i.CustomSorting=null,i.IsVisible=!0,i.Sorting=this.getMapProperties().SortSettings.YAxis==="Ascending"?SortingOrder.Ascending:SortingOrder.Descending),e.push(i));return{XaxisFieldData:f,YaxisFieldData:e}},t.prototype.createHeatMapConatiner=function(t){try{BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)),this.isFromDraft=!0);this.drillLevelInfo=this.getMapProperties().EnableDrilldown?[]:null;this.updateBackWardCompatability();this.renderHeatMapElement();!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&this.designPanelInstance.performItemSelection(this.controlContainer);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.HeatMap)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.renderHeatMapElement=function(){this.heatMapItem=BoldBIDashboard.buildTag("div.e-heatmapitem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder,overflow:"hidden","background-color":"transparent"},{id:this.designerId+"heatmapItem"+this.widgetJson.UniqueName});this.heatMapElement=BoldBIDashboard.buildTag("div.e-heatmap-element","",{width:"100%",height:"100%",position:"relative","background-color":"transparent","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designerId+"heatmapElement"+this.widgetJson.UniqueName});this.heatMapItem.append(this.heatMapElement);this.contentContainer.append(this.heatMapItem);this.heatMapItem.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designerId+"_designer_waiting_popup bbi-designer-loader",template:this.designerInstance.getWaitingPopupTemplate()});this.controlContainer.data("widgetInstance",this)},t.prototype.updateHeatMapData=function(n){var t,i,r,u;this.dataValues=n;BoldBIDashboard.Dashboard.WidgetContainerHelper.hideControlError(this);this.heatMapItem.show();BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this);t=null;i=null;this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo);BoldBIDashboard.isNullOrUndefined(n.Error)||n.Error?BoldBIDashboard.isNullOrUndefined(n.Message)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.widgetContainerHelper.showControlError(this,n)):(n.noDataAvailable?(this.heatMapItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.propertyPanel.updateCategoryVisibility("HeatMap","Formatting",!1)):(this.heatMapItem.show(),BoldBIDashboard.isNullOrUndefined(n)||n.data==="[]"||!BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)||typeof n=="string"&&n.indexOf("Sf_Exception")!==-1?(n.data==="[]"&&BoldBIDashboard.DashboardUtil.IsColumnBindingsEmpty(this.DataColumnBindings)||!BoldBIDashboard.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty)&&this.clearFilter(!1):(t=JSON.parse(n.data),i=this.DataColumnBindings,this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getXAxisContainer().FieldInfos.length>0&&this.getYAxisContainer().FieldInfos.length>0?(this.getMapProperties().EnableDrilldown=this.getXAxisContainer().FieldInfos.length>1||this.getYAxisContainer().FieldInfos.length>1,this.updateDataSource(t),this.isFromDraft=!1,BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.updateInitialSelection(),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.propertyPanel.updateCategoryVisibility("HeatMap","Formatting",!0)):this.clearFilter())),this.designerInstance.modules.util.updateAction("HeatMap","Link","Link"));BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this);r=this.themeHelper.getHeatMapHeaderTitle();u=this.themeHelper.getHeatMapHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getMapProperties().ContainerSettings.TextColor,r);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,u);this.applyWidgetBackgroundTheme()},t.prototype.updateDataSource=function(n){var i,h,c,f,e,l,o,a,t,s;BoldBIDashboard.isNullOrUndefined(this.heatMapObject)&&(this.heatMapObject=this.renderHeatMapWidget(n));var r=[],u=[],v=this.getValueContainer().FieldInfos[0].UniqueColumnName;for(this.heatMapObject.dataSource=n,this.heatMapObject.dataSourceSettings.valueMapping=v,this.heatMapObject.dataSourceSettings.xDataMapping=this.getXAxisContainer().FieldInfos[0].UniqueColumnName,this.heatMapObject.dataSourceSettings.yDataMapping=this.getYAxisContainer().FieldInfos[0].UniqueColumnName,i=0;i<n.length;i++)h=n[i][this.heatMapObject.dataSourceSettings.xDataMapping],c=n[i][this.heatMapObject.dataSourceSettings.yDataMapping],r.indexOf(h)===-1&&r.push(h),u.indexOf(c)===-1&&u.push(c);if(f=[],e=[],this.getMapProperties().SortSettings.YAxis!=="Auto")for(l=JSON.parse(this.dataValues.YLabelData),t=0;t<l.length;t++)o=l[t][this.heatMapObject.dataSourceSettings.yDataMapping].toString(),e.indexOf(o)===-1&&u.indexOf(o)!==-1&&e.push(o);if(this.getMapProperties().SortSettings.XAxis!=="Auto")for(a=JSON.parse(this.dataValues.XLabelData),t=0;t<a.length;t++)s=a[t][this.heatMapObject.dataSourceSettings.xDataMapping].toString(),f.indexOf(s)===-1&&r.indexOf(s)!==-1&&f.push(s);this.getSizeContainer().FieldInfos.length>0?(this.heatMapObject.cellSettings.tileType="Bubble",this.getMapProperties().CellSettings.TileType="Bubble",this.heatMapObject.cellSettings.bubbleType="SizeAndColor",this.setMinAndMaxValues(),this.heatMapObject.dataSourceSettings.bubbleDataMapping.size=this.getSizeContainer().FieldInfos[0].UniqueColumnName,this.heatMapObject.dataSourceSettings.bubbleDataMapping.color=v,this.heatMapObject.paletteSettings.colorGradientMode="Table"):(this.heatMapObject.cellSettings.tileType="Rect",this.getMapProperties().CellSettings.TileType="Rect");this.updateXAxisTitle();this.updateYAxisTitle();this.heatMapObject.yAxis.labels=this.getMapProperties().SortSettings.YAxis==="Auto"?u:e;this.heatMapObject.xAxis.labels=this.getMapProperties().SortSettings.XAxis==="Auto"?r:f;this.updateResponsiveObjects(this.heatMapObject);this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getXAxisContainer().FieldInfos.length>0&&this.getYAxisContainer().FieldInfos.length>0?this.setColorCustomization(this.getMapProperties().ColorCustomization):this.setDefaultColorCustomization();this.bbdesigner$(this.heatMapElement[0]).hasClass("e-heatmap")?this.heatMapObject.dataBind():this.heatMapObject.appendTo(this.heatMapElement[0])},t.prototype.updateFontStyle=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)&&!this.designerInstance.canApplyTheme()&&!this.designerInstance.isViewMode()){var t=this.getFontSizeBasedOnResolution();n.xAxis.title.textStyle.size=n.yAxis.title.textStyle.size=n.legendSettings.textStyle.size=n.cellSettings.textStyle.size=t;n.xAxis.textStyle.size=this.getMapProperties().XAxisSettings.ShowAxisLabel?t:"0px";n.yAxis.textStyle.size=this.getMapProperties().YAxisSettings.ShowAxisLabel?t:"0px";n.xAxis.textStyle.fontWeight=n.yAxis.textStyle.fontWeight=n.cellSettings.textStyle.fontWeight="400";n.xAxis.title.textStyle.fontWeight=n.yAxis.title.textStyle.fontWeight="Bold";n.legendSettings.textStyle.fontWeight="500"}},t.prototype.renderHeatMapWidget=function(){var o=this.designerInstance.isDarkTypeTheme(),i=this.getFontSizeBasedOnResolution(),n=this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode(),f=this.designerInstance.modules.themeHelper.getHeatMapLegendFontText(),r=this.designerInstance.modules.themeHelper.getHeatMapAxisTitleFontText(),u=this.designerInstance.modules.themeHelper.getHeatMapAxisLabelFontText(),e=this.designerInstance.modules.themeHelper.getHeatMapDataLabelFontText(),t=new ejdashboard.heatmap.HeatMap({width:"100%",height:"100%",xAxis:{labels:[],title:{text:this.getMapProperties().XAxisSettings.ShowAxisTitle?this.getMapProperties().XAxisSettings.AxisTitle:"",textStyle:{size:n?r.size:i,fontFamily:n?r.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:n?r.weight:"Bold",color:this.themeHelper.getHeatmapAxisTitleFontColor()}},textStyle:{size:this.getMapProperties().XAxisSettings.ShowAxisLabel?n?u.size:i:"0px",fontFamily:n?u.family:"var(--designer-font)",fontStyle:"Regular",fontWeight:n?u.weight:"regular",color:this.getMapProperties().CellSettings.XAxisLabelColor.IsEdited?this.getMapProperties().CellSettings.XAxisLabelColor.Color:this.themeHelper.getHeatmapAxisTitleFontColor()},labelRotation:this.getResponsiveXAxisLabelRotation(),labelIntersectAction:this.getMapProperties().XAxisSettings.LabelIntersectAction,enableTrim:this.getMapProperties().XAxisSettings.EnableTrim,maxLabelLength:this.getMapProperties().XAxisSettings.MaximumLabelLength,isInversed:this.getMapProperties().XAxisSettings.InversedAxis,opposedPosition:this.getMapProperties().XAxisSettings.OpposedAxis},created:this.bbdesigner$.proxy(this.createdEvent,this),yAxis:{labels:[],textStyle:{size:this.getMapProperties().YAxisSettings.ShowAxisLabel?n?u.size:i:"0px",fontFamily:n?u.family:"var(--designer-font)",fontStyle:"Regular",fontWeight:n?u.weight:"regular",color:this.getMapProperties().CellSettings.YAxisLabelColor.IsEdited?this.getMapProperties().CellSettings.YAxisLabelColor.Color:this.themeHelper.getHeatmapAxisTitleFontColor()},title:{text:this.getMapProperties().YAxisSettings.ShowAxisTitle?this.getMapProperties().YAxisSettings.AxisTitle:"",textStyle:{size:n?r.size:i,fontFamily:n?r.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:n?r.weight:"Bold",color:this.themeHelper.getHeatmapAxisLabelFontColor()}},enableTrim:this.getMapProperties().YAxisSettings.EnableTrim,maxLabelLength:this.getMapProperties().YAxisSettings.MaximumLabelLength,isInversed:this.getMapProperties().YAxisSettings.InversedAxis,opposedPosition:this.getMapProperties().YAxisSettings.OpposedAxis},dataSource:[],dataSourceSettings:{isJsonData:!0,adaptorType:"Cell",xDataMapping:"",yDataMapping:"",valueMapping:"",bubbleDataMapping:{size:"",color:""}},cellSettings:{textStyle:{size:n?e.size:i,fontFamily:n?e.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:n?e.weight:"Regular",color:this.getMapProperties().CellSettings.LabelColor.IsEdited?this.getMapProperties().CellSettings.LabelColor.Color:this.designerInstance.modules.themeHelper.getHeatmapDataLabelFontColor()},border:{radius:this.getMapProperties().CellSettings.CellRadius,width:this.getMapProperties().CellSettings.CellBorder,color:this.getCellBorderColor(o)},showLabel:this.getMapProperties().CellSettings.ShowDataLabel,tileType:this.getSizeContainer().FieldInfos.length>0?"Bubble":this.getMapProperties().CellSettings.TileType,bubbleType:this.getSizeContainer().FieldInfos.length>0?"SizeAndColor":""},paletteSettings:{colorGradientMode:this.getMapProperties().ColorGradientMode,palette:[{color:this.monochromaticLowValueColorGeneration(BoldBIDashboard.DashboardUtil.defaultColorPalette[0])},{color:BoldBIDashboard.DashboardUtil.defaultColorPalette[0]}],type:"Gradient",emptyPointColor:this.themeHelper.getHeatmapEmptyFillColor()},legendSettings:{visible:this.getMapProperties().LegendSettings.ShowLegend,position:this.getMapProperties().LegendSettings.Position,textStyle:{size:n?f.size:i,fontFamily:n?f.family:"var(--designer-font)",fontStyle:"Normal",fontWeight:n?f.weight:"500",color:this.designerInstance.modules.themeHelper.getHeatmapLegendFontColor()}},margin:{left:3,right:3,top:3,bottom:3},showTooltip:this.getMapProperties().CellSettings.ShowTooltip,tooltipSettings:{template:"#"+this.designerId+this.widgetJson.UniqueName+"_tooltip"},cellClick:this.bbdesigner$.proxy(this.heatMapItemClick,this),tooltipRender:this.bbdesigner$.proxy(this.tooltipFormatting,this),cellRender:this.bbdesigner$.proxy(this.cellRendering,this),legendRender:this.bbdesigner$.proxy(this.legendRendering,this)});return(this.heatMapElement.width()<100||this.heatMapElement.height()<100)&&(t.xAxis.textStyle.size="0px",t.xAxis.title.text="",t.yAxis.title.text="",t.yAxis.textStyle.size="0px",t.legendSettings.visible=!1,t.showTooltip=this.getMapProperties().CellSettings.ShowTooltip),t},t.prototype.updateXAxisTitle=function(){var n=this.getXAxisContainer().FieldInfos[0].DisplayName;this.getMapProperties().XAxisSettings.AxisTitle=this.isFromDraft||this.isXAxisTitleChanged?this.getMapProperties().XAxisSettings.AxisTitle:n;this.isFromDraft&&(this.isXAxisTitleChanged=this.getMapProperties().XAxisSettings.AxisTitle!==n);this.isXAxisTitleChanged&&this.getMapProperties().XAxisSettings.AxisTitle.length!==0||(this.getMapProperties().XAxisSettings.AxisTitle=this.getXAxisContainer().FieldInfos[0].DisplayName);this.setPropertyElement("X-AxisSettings","XAxisTitle",this.isXAxisTitleChanged?this.getMapProperties().XAxisSettings.AxisTitle:"");this.heatMapObject.xAxis.title.text=this.heatMapElement.width()<100||this.heatMapElement.height()<100?"":this.getMapProperties().XAxisSettings.ShowAxisTitle?this.getMapProperties().XAxisSettings.AxisTitle:""},t.prototype.updateYAxisTitle=function(){var n=this.getYAxisContainer().FieldInfos[0].DisplayName;this.getMapProperties().YAxisSettings.AxisTitle=this.isFromDraft||this.isYAxisTitleChanged?this.getMapProperties().YAxisSettings.AxisTitle:n;this.isFromDraft&&(this.isYAxisTitleChanged=this.getMapProperties().YAxisSettings.AxisTitle!==n);this.isYAxisTitleChanged&&this.getMapProperties().YAxisSettings.AxisTitle.length!==0||(this.getMapProperties().YAxisSettings.AxisTitle=this.getYAxisContainer().FieldInfos[0].DisplayName);this.setPropertyElement("Y-AxisSettings","YAxisTitle",this.isYAxisTitleChanged?this.getMapProperties().YAxisSettings.AxisTitle:"");this.heatMapObject.yAxis.title.text=this.heatMapElement.width()<100||this.heatMapElement.height()<100?"":this.getMapProperties().YAxisSettings.ShowAxisTitle?this.getMapProperties().YAxisSettings.AxisTitle:""},t.prototype.heatMapItemClick=function(n){var i=[n.event.pageX,n.event.pageY],t=[];this.getMapProperties().FilterSettings.ActAsMasterWidget&&t.push(WidgetAction.Filter);this.getMapProperties().UrlLink&&this.getMapProperties().UrlLink.EnableLink&&t.push(WidgetAction.Linking);this.widgetJson.ContainerSettings.ViewData&&t.push(WidgetAction.ViewData);this.getMapProperties().EnableDrilldown&&t.push(WidgetAction.DrillDown);BoldBIDashboard.Dashboard.WidgetHelper.createWidgetActionContextMenu(this.designerInstance,this,this.Name,t,n,i)},t.prototype.performSelectedWidgetAction=function(t,i,r,u){var f,h,s,a,v,y;switch(t){case WidgetAction.Filter.toString():i.isCurrentMaster=!0;var o=[],l=[],c=[],p=[],w=[],e=i.DataGroupInfo.FieldContainers;for(f=0;f<e.length;f++)if((e[f].Name==="X-Axis"||e[f].Name==="Y-Axis")&&(o=e[f].FieldInfos[0],e[f].Name==="X-Axis"?(c[o.UniqueColumnName]=r.xValue,p=o):e[f].Name==="Y-Axis"&&(c[o.UniqueColumnName]=r.yValue,w=o),l.push(o)),e[f].Name==="HiddenColumn")for(h=e[f].FieldInfos,s=0;s<h.length;s++)c[h[s].UniqueColumnName]=this.getItemValue(h[s].UniqueColumnName,e[f].Name,r),l.push(h[s]);if(this.getMapProperties().SelectedFilterValues.length!==0&&this.getSelectedElement(r.heatmap,!1),this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))return;this.getMapProperties().SelectedFilterValues=[];r.cellElement.setAttribute("style","fill:#f4f4f4");n.prototype.performInteraction.call(this,i,l,c);break;case WidgetAction.Linking.toString():u.model.mode!==BoldBIDashboard.Designer.mode.design&&(a=this.getLinkingData(r),BoldBIDashboard.Dashboard.WidgetHelper.updateURLLinkingforDrillDown(a,i,i.widgetJson.EnableDrilldown),n.prototype.performLinking.call(this,a));break;case WidgetAction.ViewData.toString():i.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(v=u.modules.viewDataDialog,y=this.showSelectItemsInViewData(r),v.showViewDataPopup(i,!1,y,!0));break;case WidgetAction.DrillDown.toString():this.heatmapDrillDownAction(r,i,u)}},t.prototype.processFilterInformation=function(n){var i=this.DataGroupInfo.FieldContainers,r=n.filters,f=this.getColumnForWidgetFilterAPI(r,i),u=f[0],e=f[1],s=f[2],h=f[3],t,o;if(s.length>0)return u=[],e={},console.error("Given column name(s) ["+s+"] were not found in "+this.widgetJson.ContainerSettings.Title),!1;if(h&&(console.error("ColumnName should not be empty for API filtering"),u.length===0))return!1;if(u.length===0&&s.length===0)for(t=0;t<i.length;t++)(i[t].Name==="X-Axis"||i[t].Name==="Y-Axis")&&(o=i[t].FieldInfos[0],i[t].Name==="X-Axis"?BoldBIDashboard.isNullOrUndefined(r[0].values[0])||(e[o.UniqueColumnName]=r[0].values[0]):i[t].Name==="Y-Axis"&&(BoldBIDashboard.isNullOrUndefined(r[0].values[1])||(e[o.UniqueColumnName]=r[0].values[1])),u.push(o));return this.widgetJson.SelectedFilterValues=[],this.masterFilterWindowInstance.configureSelectedFilterInfo(this.getJson(),u,e),!0},t.prototype.showSelectItemsInViewData=function(n){var t=[];return BoldBIDashboard.isNullOrUndefined(n)||t.push({selectedItem:n.xValue,columnId:this.DataGroupInfo.FieldContainers[2].FieldInfos[0].Id,UniqueColumnName:this.DataGroupInfo.FieldContainers[2].FieldInfos[0].UniqueColumnName},{selectedItem:n.yValue,columnId:this.DataGroupInfo.FieldContainers[3].FieldInfos[0].Id,UniqueColumnName:this.DataGroupInfo.FieldContainers[3].FieldInfos[0].UniqueColumnName}),t},t.prototype.getLinkingData=function(n){var e=this,i={isEnabled:!1,parameterDetails:[],url:"",urlLinkInfo:[]},u,r,t,f;if(!BoldBIDashboard.isNullOrUndefined(this.getMapProperties())&&(u=this.getSourceDataHeatMap(!1),this.getMapProperties().UrlLink.EnableLink&&!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().UrlLink.GridUrlType)&&this.getMapProperties().UrlLink.GridUrlType.toString()===UrlLinkType[UrlLinkType.Row]&&!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().UrlLink.UrlPath)&&this.getMapProperties().UrlLink.UrlPath!==""))for(r=u.filter(function(n){return e.getMapProperties().UrlLink.PassingParameters.indexOf(n.Value)!==-1}),i.url=this.getMapProperties().UrlLink.UrlPath,i.isEnabled=!0,t=0;t<r.length;t++)f=this.getItemValue(r[t].Id,r[t].Category,n),i.parameterDetails.push({parameter:r[t].Value,value:f});return i.urlLinkInfo=this.getMapProperties().UrlLink,i},t.prototype.getSourceDataHeatMap=function(n){var o=[],r,i,t,u;if(!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length>0)for(r=this.DataGroupInfo.FieldContainers,i=0;i<r.length;i++)if(!n)for(t=0;t<r[i].FieldInfos.length;t++)if(u=r[i].FieldInfos,!this.isDuplicate(o,u[t].Name)&&(!n||u[t].FieldType===FieldType.Dimensions)){var s=u[t].SummaryType,h=u[t].DateTimeFormat,f=h!==DateTimeFormat.None?h:s!==SummaryType.NONE?s:"",c=u[t].Name+(f!==""?"("+f+")":""),l=f+(f.length>1?"(":"")+u[t].Name+(f.length>1?")":""),e=r[i].FieldInfos[t].ContainerName;r[i].Name==="Value"||r[i].Name==="Size"?e="value":r[i].Name==="X-Axis"?e="xValue":r[i].Name==="Y-Axis"&&(e="yValue");o.push({Category:e,Name:c,Value:l,Id:u[t].UniqueColumnName,FieldName:u[t].Name})}return o},t.prototype.getItemValue=function(n,t,i){var e,r,f,o;if(typeof i[t]=="object")for(r=0;r<2;r++)i.value[r].mappingName===n&&(e=i.value[r].bubbleData);else if(t==="HiddenColumn"){if(!BoldBIDashboard.isNullOrUndefined(this.dataValues)){var u=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName),h=u.dataSourceSettings.xDataMapping,c=u.dataSourceSettings.yDataMapping,s=-1;for(f=0;f<u.dataSource.length;f++)if(o=u.dataSource[f],o[h]==i.xLabel&&o[c]==i.yLabel){s=f;break}e=u.dataSource[s][n]}}else e=i[t];return e},t.prototype.isDuplicate=function(n,t){for(var i=0;i<n.length;i++)if(n[i].Name===t)return!0;return!1},t.prototype.createdEvent=function(n){if(BoldBIDashboard.isNullOrUndefined(n)||n.heatmap.element.classList.contains("e-heatmap")||n.heatmap.element.classList.add("e-heatmap"),!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.dashboardFromData)&&this.designerInstance.model.dashboardFromData.loadFromData){var t=this.bbdesigner$("#"+this.Type.toLowerCase()+"measuretext");t.remove()}this.updateInitialSelection();BoldBIDashboard.isNullOrUndefined(this.heatMapElement)||BoldBIDashboard.isNullOrUndefined(this.designerInstance)||this.applyWidgetBackgroundTheme();this.IsRendered=!0},t.prototype.applyWidgetBackgroundTheme=function(){var n="#"+this.designerId+"heatmapElement"+this.widgetJson.UniqueName+"_HeatmapBorder";this.heatMapElement.find(n).attr("fill","transparent")},t.prototype.cellRendering=function(n){if(this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0){var t=this.getSizeContainer().FieldInfos.length>0?this.getSizeContainer().FieldInfos[0].MeasureFormatting:this.getValueContainer().FieldInfos[0].MeasureFormatting,i=n.heatmap.cellSettings.tileType==="Rect"?n.value:n.value[0].valueType==="Size"?n.value[0].bubbleData:n.value[1].bubbleData;n.displayText=this.getFormattedValue(i,t)}},t.prototype.legendRendering=function(n){if(this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0){var i=this.getValueContainer().FieldInfos[0].MeasureFormatting,r=BoldBIDashboard.globalize.findCulture(i.Culture).numberFormat["."],t=n.text;r.match(/,/)?t.indexOf(r)!==-1&&(t=t.replace(/[.\s]/g,"")):t=t.replace(/[,\s]/g,"");n.text=this.getFormattedValue(t,i)}},t.prototype.tooltipFormatting=function(n){var s,h,c,l,a,v,y,p,w=n.value,b=this.designerId+this.widgetJson.UniqueName,k='<script class ="treemap" id="'+b+'_tooltip"  type="application/jsrender">',t=[],d=!1,it=this.controlContainer.find("#"+b+"_tooltip"),r,g,i,e,nt,tt,u;if(it.length>0&&this.controlContainer.find("#"+this.designerId+this.widgetJson.UniqueName+"_tooltip").remove(),!BoldBIDashboard.isNullOrUndefined(this.dataValues)&&this.getMapProperties().CellSettings.TileType==="Rect"&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)&&this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getXAxisContainer().FieldInfos.length>0&&this.getYAxisContainer().FieldInfos.length>0)r=this.DataColumnBindings,g=this.getValueContainer().FieldInfos[0].MeasureFormatting,t.push((s={},s[r[this.getValueContainer().FieldInfos[0].UniqueColumnName]]=this.getFormattedValue(w,g),s)),t.push((h={},h[r[this.getXAxisContainer().FieldInfos[0].UniqueColumnName]]="${xValue}",h)),t.push((c={},c[r[this.getYAxisContainer().FieldInfos[0].UniqueColumnName]]="${yValue}",c)),d=!0;else if(!BoldBIDashboard.isNullOrUndefined(this.dataValues)&&this.getMapProperties().CellSettings.TileType==="Bubble"&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)&&this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length!==0&&this.getSizeContainer().FieldInfos.length!==0&&this.getXAxisContainer().FieldInfos.length>0&&this.getYAxisContainer().FieldInfos.length>0){var r=this.DataColumnBindings,g=this.getValueContainer().FieldInfos[0].MeasureFormatting,rt=this.getSizeContainer().FieldInfos[0].MeasureFormatting;t.push((l={},l[r[this.getValueContainer().FieldInfos[0].UniqueColumnName]]=this.getFormattedValue(w[1].bubbleData,g),l));t.push((a={},a[r[this.getSizeContainer().FieldInfos[0].UniqueColumnName]]=this.getFormattedValue(w[0].bubbleData,rt),a));t.push((v={},v[r[this.getXAxisContainer().FieldInfos[0].UniqueColumnName]]="${xLabel}",v));t.push((y={},y[r[this.getYAxisContainer().FieldInfos[0].UniqueColumnName]]="${yLabel}",y));d=!0}else this.getMapProperties().CellSettings.TileType==="Rect"?(t.push({"${xValue}":"${value}"}),t.push({"${yValue}":"${value}"})):(t.push({"${xLabel}":"${value[1].bubbleData}"}),t.push({"${yLabel}":"${value[0].bubbleData}"}));if(i=BoldBIDashboard.DashboardUtil.getToolTipFieldInfos(this),!BoldBIDashboard.isNullOrUndefined(this.dataValues)&&d&&!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0){var f=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName),ut=f.dataSourceSettings.xDataMapping,ft=f.dataSourceSettings.yDataMapping,o=-1;for(e=0;e<f.dataSource.length;e++)if(nt=f.dataSource[e],nt[ut]==n.xLabel&&nt[ft]==n.yLabel){o=e;break}if(tt=this.DataColumnBindings,o!==-1)for(u=0;u<i.length;u++)t.push((p={},p[tt[i[u].UniqueColumnName]]=i[u].SummaryType!==SummaryType.NONE?this.getFormattedValue(f.dataSource[o][i[u].UniqueColumnName],i[u].MeasureFormatting):f.dataSource[o][i[u].UniqueColumnName].toString(),p))}k+=this.widgetHelper.generateToolTipTemplate(t,b,1e3);k+="<\/script>";this.controlContainer.append(k)},t.prototype.getHeatMapPropertyPanel=function(){var t={Header:this.widgetJson.ContainerSettings.Title,SubTitle:this.widgetJson.ContainerSettings.SubTitle,Description:this.widgetJson.ContainerSettings.Description,Type:this.Type,Items:[{CategoryName:"Cell Settings",DisplayName:this.locale.propertyPanel.cellSettingsText,Items:[{name:"ShowTooltip",displayName:this.locale.propertyPanel.basicSettings.showTooltip,value:this.getMapProperties().CellSettings.ShowTooltip,itemType:"bool"},{name:"ShowLabel",displayName:this.locale.propertyPanel.basicSettings.showLabel,value:this.getMapProperties().CellSettings.ShowDataLabel,itemType:"bool"},{name:"LabelColor",displayName:this.locale.propertyPanel.basicSettings.color,value:this.getMapProperties().CellSettings.LabelColor.Color,itemType:"color",isVisible:this.getMapProperties().CellSettings.ShowDataLabel},{name:"CellRadius",displayName:this.locale.propertyPanel.basicSettings.cellRadius,value:this.getMapProperties().CellSettings.CellRadius,itemType:"float",decimalPlaces:0,minimum:0,maximum:10,unitType:"pt"},{name:"CellBorder",displayName:this.locale.propertyPanel.basicSettings.cellBorder,value:this.getMapProperties().CellSettings.CellBorder,itemType:"float",decimalPlaces:0,minimum:0,maximum:10,unitType:"pt"}]},{CategoryName:"Formatting",DisplayName:this.locale.propertyPanel.formattingCategoryText,IsVisible:this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getXAxisContainer().FieldInfos.length>0&&this.getYAxisContainer().FieldInfos.length>0,Items:[{name:"ColorSettings",displayName:this.locale.propertyPanel.formattingCategoryText,value:this.getMapProperties().EnableColorSettings?"Advanced":"Monochromatic",itemType:"dropdown",valueList:["Monochromatic","Advanced"]},{name:"EnableColorSettings",callbackInstance:this,callbackMethod:"renderColorSettings",itemType:"object",elementType:"HeatMap"}]},{CategoryName:"Legend Settings",DisplayName:this.locale.propertyPanel.legendSettingsText,Items:[{name:"ShowLegend",displayName:this.locale.propertyPanel.basicSettings.showLegend,value:this.getMapProperties().LegendSettings.ShowLegend,itemType:"bool"},{name:"LegendPosition",displayName:this.locale.propertyPanel.basicSettings.legendPosition,isVisible:this.getMapProperties().LegendSettings.ShowLegend,value:this.getMapProperties().LegendSettings.Position,itemType:"dropdown",valueList:["Auto","Bottom","Left","Right","Top"]}]},{CategoryName:"X-Axis Settings",DisplayName:this.locale.propertyPanel.xAxisSettingsText,Items:[{name:"ShowXAxisLabel",displayName:this.locale.propertyPanel.heatMapAxisSettings.showAxisLabel,value:this.getMapProperties().XAxisSettings.ShowAxisLabel,itemType:"bool"},{name:"XAxisLabelColor",displayName:this.locale.propertyPanel.basicSettings.color,value:this.getMapProperties().CellSettings.XAxisLabelColor.Color,itemType:"color",isVisible:this.getMapProperties().XAxisSettings.ShowAxisLabel},{name:"ShowXAxisTitle",displayName:this.locale.propertyPanel.heatMapAxisSettings.showAxisTitle,value:this.getMapProperties().XAxisSettings.ShowAxisTitle,itemType:"bool"},{name:"XAxisTitle",displayName:this.locale.propertyPanel.heatMapAxisSettings.axisTitle,isVisible:this.getMapProperties().XAxisSettings.ShowAxisTitle,value:this.isXAxisTitleChanged?this.getMapProperties().XAxisSettings.AxisTitle:"",placeHolder:this.locale.common.auto,itemType:"string"},{name:"XAxisLabelRotation",displayName:this.locale.propertyPanel.heatMapAxisSettings.axisLabelRotation,itemType:"dropdown",isVisible:this.getMapProperties().XAxisSettings.ShowAxisLabel,value:this.getMapProperties().XAxisSettings.LabelRotation==="None"?"0"+String.fromCharCode(176):this.getMapProperties().XAxisSettings.LabelRotation==="Auto"?"Auto":this.getMapProperties().XAxisSettings.LabelRotation+String.fromCharCode(176),valueList:["Auto","-90"+String.fromCharCode(176),"-45"+String.fromCharCode(176),"0"+String.fromCharCode(176),"+45"+String.fromCharCode(176),"+90"+String.fromCharCode(176)]},{name:"XAxisLabelIntersectAction",displayName:this.locale.propertyPanel.heatMapAxisSettings.axisLabelIntersectAction,isVisible:this.getMapProperties().XAxisSettings.ShowAxisLabel,value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LabelIntersectAction,this.getMapProperties().XAxisSettings.LabelIntersectAction),itemType:"dropdown",valueList:["None","Trim"]},{name:"XAxisEnableTrim",displayName:this.locale.propertyPanel.heatMapAxisSettings.enableTrim,isVisible:this.getMapProperties().XAxisSettings.ShowAxisLabel,value:this.getMapProperties().XAxisSettings.EnableTrim,itemType:"bool"},{name:"XAxisMaximumLabelLength",displayName:this.locale.propertyPanel.heatMapAxisSettings.maximumLabelWidth,isDisable:!this.getMapProperties().XAxisSettings.EnableTrim,isVisible:this.getMapProperties().XAxisSettings.ShowAxisLabel,value:this.getMapProperties().XAxisSettings.MaximumLabelLength,itemType:"float",decimalPlaces:0,interval:1,minimum:10,maximum:500,unitType:"px"},{name:"InversedXAxis",displayName:this.locale.propertyPanel.heatMapAxisSettings.inversedAxis,value:this.getMapProperties().XAxisSettings.InversedAxis,itemType:"bool"},{name:"OpposedXAxis",displayName:this.locale.propertyPanel.heatMapAxisSettings.opposedAxis,value:this.getMapProperties().XAxisSettings.OpposedAxis,itemType:"bool"},{name:"XAxisSort",displayName:this.locale.propertyPanel.heatMapAxisSettings.sorting,value:this.getMapProperties().SortSettings.XAxis,itemType:"dropdown",valueList:["Auto","Ascending","Descending"]}]},{CategoryName:"Y-Axis Settings",DisplayName:this.locale.propertyPanel.yAxisSettingsText,Items:[{name:"ShowYAxisLabel",displayName:this.locale.propertyPanel.heatMapAxisSettings.showAxisLabel,value:this.getMapProperties().YAxisSettings.ShowAxisLabel,itemType:"bool"},{name:"YAxisLabelColor",displayName:this.locale.propertyPanel.basicSettings.color,value:this.getMapProperties().CellSettings.YAxisLabelColor.Color,itemType:"color",isVisible:this.getMapProperties().YAxisSettings.ShowAxisLabel},{name:"ShowYAxisTitle",displayName:this.locale.propertyPanel.heatMapAxisSettings.showAxisTitle,value:this.getMapProperties().YAxisSettings.ShowAxisTitle,itemType:"bool"},{name:"YAxisTitle",displayName:this.locale.propertyPanel.heatMapAxisSettings.axisTitle,isVisible:this.getMapProperties().YAxisSettings.ShowAxisTitle,value:this.isYAxisTitleChanged?this.getMapProperties().YAxisSettings.AxisTitle:"",placeHolder:this.locale.common.auto,itemType:"string"},{name:"YAxisEnableTrim",displayName:this.locale.propertyPanel.heatMapAxisSettings.enableTrim,isVisible:this.getMapProperties().YAxisSettings.ShowAxisLabel,value:this.getMapProperties().YAxisSettings.EnableTrim,itemType:"bool"},{name:"YAxisMaximumLabelLength",displayName:this.locale.propertyPanel.heatMapAxisSettings.maximumLabelWidth,isDisable:!this.getMapProperties().YAxisSettings.EnableTrim,isVisible:this.getMapProperties().YAxisSettings.ShowAxisLabel,value:this.getMapProperties().YAxisSettings.MaximumLabelLength,itemType:"float",decimalPlaces:0,interval:1,minimum:10,maximum:500,unitType:"px"},{name:"InversedYAxis",displayName:this.locale.propertyPanel.heatMapAxisSettings.inversedAxis,value:this.getMapProperties().YAxisSettings.InversedAxis,itemType:"bool"},{name:"OpposedYAxis",displayName:this.locale.propertyPanel.heatMapAxisSettings.opposedAxis,value:this.getMapProperties().YAxisSettings.OpposedAxis,itemType:"bool"},{name:"YAxisSort",displayName:this.locale.propertyPanel.heatMapAxisSettings.sorting,value:this.getMapProperties().SortSettings.YAxis,itemType:"dropdown",valueList:["Auto","Ascending","Descending"]}]},{CategoryName:"Link",DisplayName:this.locale.propertyPanel.linkText,Items:[{name:"Link",value:n.prototype.useExistingLink.call(this),category:"Item",itemType:"link",enableMode:LinkEnableMode.Row}]}]},i;return t.Items.push(this.containerPropertyItem.getFilterSettingsItems(this.getMapProperties().FilterSettings,this.controlContainer,this.ControlHeader,this.DataGroupInfo)),i=this.containerPropertyItem.getContainerSettingItems(this.getMapProperties().ContainerSettings,this.controlContainer,this.ControlHeader,this.DataGroupInfo),this.bbdesigner$.each(i.Items,function(n,t){(t.name==="ShowWidgetBackgroundImage"||t.name==="WidgetBackgroundImageMode"||t.name==="WidgetBackgroundImageSource"||t.name==="WidgetBackgroundImageBrowse"||t.name==="WidgetBackgroundImageURL")&&(t.isVisible=!1)}),t.Items.push(i),t.Items.push(this.containerPropertyItem.getContainerActionsItems(this.getMapProperties().ContainerSettings,this.controlContainer,this.ControlHeader,this.DataGroupInfo)),t.Items.push(BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem.getNoDataContainerActionsProperty(this.locale.propertyPanel.noDataContainerText)),t},t.prototype.updateHeatMapProperties=function(t,i,r,u){var s,h=!1,f,e,c,o;switch(t){case"Name":this.widgetJson.ContainerSettings.Title=r;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,r);break;case"ItemLink":n.prototype.updateLink.call(this,r);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,r);break;case"ShowLabel":this.UpdateDataLabelValue(r);break;case"LabelColor":this.updateLabelColor(r);break;case"ShowTooltip":this.UpdateShowToolTip(r);break;case"CellRadius":this.UpdateCellRadius(r);break;case"CellBorder":this.UpdateCellBorder(r);break;case"TileType":this.UpdateTileType(r);break;case"ColorSettings":this.updateColorSettingsSelection(r);break;case"ShowXAxisLabel":this.UpdateXAxisLabelVisibility(r);break;case"XAxisLabelColor":this.updateXAxisLabelColor(r);break;case"ShowXAxisTitle":this.UpdateXAxisTitleVisibility(r);break;case"XAxisTitle":this.UpdateXAxisTitleValue(r);break;case"XAxisLabelRotation":this.UpdateXAxisLabelRotation(r);break;case"XAxisLabelIntersectAction":this.UpdateXAxisLabelIntersectAction(r);break;case"XAxisEnableTrim":this.UpdateXAxisEnableTrim(r);break;case"XAxisMaximumLabelLength":this.UpdateXAxisMaximumLabelLength(r);break;case"InversedXAxis":this.UpdateInversedXAxis(r);break;case"OpposedXAxis":this.UpdateOpposedXAxis(r);break;case"ShowYAxisLabel":this.UpdateYAxisLabelVisibility(r);break;case"YAxisLabelColor":this.updateYAxisLabelColor(r);break;case"ShowYAxisTitle":this.UpdateYAxisTitleVisibility(r);break;case"YAxisTitle":this.UpdateYAxisTitleValue(r);break;case"YAxisLabelRotation":this.UpdateYAxisLabelRotation(r);break;case"YAxisLabelIntersectAction":this.UpdateYAxisLabelIntersectAction(r);break;case"YAxisEnableTrim":this.UpdateYAxisEnableTrim(r);break;case"YAxisMaximumLabelLength":this.UpdateYAxisMaximumLabelLength(r);break;case"InversedYAxis":this.UpdateInversedYAxis(r);break;case"OpposedYAxis":this.UpdateOpposedYAxis(r);break;case"ShowLegend":this.UpdateShowLegend(r);break;case"LegendPosition":this.UpdateLegendPosition(r);break;case"XAxisSort":this.updateXAxisSort(r);break;case"YAxisSort":this.updateYAxisSort(r);break;case"FieldNameChange":this.updateDisplayTextBasedProperties();break;default:h=!0}if(BoldBIDashboard.isNullOrUndefined(s)||(i=s),!h){if(!BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)&&BoldBIDashboardDesigner.editManager.isPerformAction&&(f=this.designPanelInstance.selectedReportItems,f.length>0))for(e=0;e<f.length;e++)c=f[e],c.attr("id")===this.controlContainer.attr("id")&&(o=this.bbdesigner$.extend(!0,{},u),o.categoryName=u.categoryName,o.valueList=u.valueList,this.propertyPanel.updatePropertyValue(o,"HeatMap",r));BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-heatmap-item",this.designerId+"_"+this.widgetJson.UniqueName,[t,r,i,u],[t,i,r,u])}},t.prototype.UpdateDataLabelValue=function(n){this.getMapProperties().CellSettings.ShowDataLabel=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.cellSettings.showLabel=n);this.propertyPanel.updateItemVisibility(this.Type,"CellSettings","LabelColor",n)},t.prototype.updateLabelColor=function(n){if(this.getMapProperties().CellSettings.LabelColor.Color=n,this.getMapProperties().CellSettings.LabelColor.IsEdited=!0,BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)){var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);t.cellSettings.textStyle.color=this.getMapProperties().CellSettings.LabelColor.Color}},t.prototype.UpdateShowToolTip=function(n){this.getMapProperties().CellSettings.ShowTooltip=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.showTooltip=n)},t.prototype.updateXAxisLabelColor=function(n){if(this.getMapProperties().CellSettings.XAxisLabelColor.Color=n,this.getMapProperties().CellSettings.XAxisLabelColor.IsEdited=!0,BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)){var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);t.xAxis.textStyle.color=this.getMapProperties().CellSettings.XAxisLabelColor.Color}},t.prototype.updateYAxisLabelColor=function(n){if(this.getMapProperties().CellSettings.YAxisLabelColor.Color=n,this.getMapProperties().CellSettings.YAxisLabelColor.IsEdited=!0,BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this)){var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);t.yAxis.textStyle.color=this.getMapProperties().CellSettings.YAxisLabelColor.Color}},t.prototype.UpdateCellRadius=function(n){this.getMapProperties().CellSettings.CellRadius=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.cellSettings.border.radius=n)},t.prototype.UpdateCellBorder=function(n){this.getMapProperties().CellSettings.CellBorder=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.cellSettings.border.width=n)},t.prototype.UpdateTileType=function(n){this.getMapProperties().CellSettings.TileType=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.cellSettings.tileType=n)},t.prototype.UpdateColorGradientMode=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designerInstance.designerPanel.selectedReportItems[0]),i;t.getMapProperties().ColorGradientMode=n.selectedValue;i=ejdashboard.base.getComponent(t.heatMapElement[0],t.componentName);BoldBIDashboard.isNullOrUndefined(i)||(i.paletteSettings.colorGradientMode=n.selectedValue);this.designerInstance.modules.serialization.notifyChange()},t.prototype.UpdateXAxisLabelVisibility=function(n){this.getMapProperties().XAxisSettings.ShowAxisLabel=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.xAxis.textStyle.size=n?this.getResponsiveXAxisLabel():"0px");this.propertyPanel.updateItemVisibility(this.Type,"X-AxisSettings","XAxisLabelRotation",n);this.propertyPanel.updateItemVisibility(this.Type,"X-AxisSettings","XAxisLabelIntersectAction",n);this.propertyPanel.updateItemVisibility(this.Type,"X-AxisSettings","XAxisLabelColor",n);this.propertyPanel.updateItemVisibility(this.Type,"X-AxisSettings","XAxisEnableTrim",n);this.propertyPanel.updateItemVisibility(this.Type,"X-AxisSettings","XAxisMaximumLabelLength",n)},t.prototype.UpdateXAxisTitleVisibility=function(n){this.getMapProperties().XAxisSettings.ShowAxisTitle=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.xAxis.title.text=n?this.getResponsiveXAxisTitle():"");this.propertyPanel.updateItemVisibility(this.Type,"X-AxisSettings","XAxisTitle",n)},t.prototype.UpdateXAxisTitleValue=function(n){if(this.DataGroupInfo.FieldContainers.length>0&&(this.getValueContainer().FieldInfos.length>0||this.getSizeContainer().FieldInfos.length>0||this.getXAxisContainer().FieldInfos.length>0||this.getYAxisContainer().FieldInfos.length>0)){var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n)?(n=this.getXAxisContainer().FieldInfos[0].DisplayName,this.isXAxisTitleChanged=!1):n!==this.getXAxisContainer().FieldInfos[0].DisplayName&&(this.isXAxisTitleChanged=!0);BoldBIDashboard.isNullOrUndefined(t)||this.getMapProperties().XAxisSettings.AxisTitle===n||(t.xAxis.title.text=n,this.getMapProperties().XAxisSettings.AxisTitle=n);this.setPropertyElement("X-AxisSettings","XAxisTitle",this.isXAxisTitleChanged?this.getMapProperties().XAxisSettings.AxisTitle:"")}else this.setPropertyElement("X-AxisSettings","XAxisTitle",""),this.getMapProperties().XAxisSettings.AxisTitle=""},t.prototype.UpdateXAxisLabelRotation=function(n){this.getMapProperties().XAxisSettings.LabelRotation=n.replace(new RegExp(String.fromCharCode(176),"g"),"");var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.xAxis.labelRotation=this.getResponsiveXAxisLabelRotation())},t.prototype.UpdateXAxisLabelIntersectAction=function(n){this.getMapProperties().XAxisSettings.LabelIntersectAction=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.xAxis.labelIntersectAction=this.getMapProperties().XAxisSettings.LabelIntersectAction)},t.prototype.UpdateXAxisEnableTrim=function(n){this.getMapProperties().XAxisSettings.EnableTrim=n;this.propertyPanel.updateItemDisable("float",this.Type,"X-AxisSettings","XAxisMaximumLabelLength",!n);var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.xAxis.enableTrim=this.getMapProperties().XAxisSettings.EnableTrim)},t.prototype.UpdateXAxisMaximumLabelLength=function(n){this.getMapProperties().XAxisSettings.MaximumLabelLength=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.xAxis.maxLabelLength=this.getMapProperties().XAxisSettings.MaximumLabelLength)},t.prototype.UpdateInversedXAxis=function(n){this.getMapProperties().XAxisSettings.InversedAxis=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.xAxis.isInversed=n)},t.prototype.UpdateOpposedXAxis=function(n){this.getMapProperties().XAxisSettings.OpposedAxis=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.xAxis.opposedPosition=n)},t.prototype.UpdateYAxisLabelVisibility=function(n){this.getMapProperties().YAxisSettings.ShowAxisLabel=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.yAxis.textStyle.size=n?this.getResponsiveYAxisLabel():"0px");this.propertyPanel.updateItemVisibility(this.Type,"Y-AxisSettings","YAxisLabelIntersectAction",n);this.propertyPanel.updateItemVisibility(this.Type,"Y-AxisSettings","YAxisLabelColor",n);this.propertyPanel.updateItemVisibility(this.Type,"Y-AxisSettings","YAxisEnableTrim",n);this.propertyPanel.updateItemVisibility(this.Type,"Y-AxisSettings","YAxisMaximumLabelLength",n)},t.prototype.UpdateYAxisTitleVisibility=function(n){this.getMapProperties().YAxisSettings.ShowAxisTitle=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.yAxis.title.text=n?this.getResponsiveYAxisTitle():"");this.propertyPanel.updateItemVisibility(this.Type,"Y-AxisSettings","YAxisTitle",n)},t.prototype.UpdateYAxisTitleValue=function(n){if(this.DataGroupInfo.FieldContainers.length>0&&(this.getValueContainer().FieldInfos.length>0||this.getSizeContainer().FieldInfos.length>0||this.getXAxisContainer().FieldInfos.length>0||this.getYAxisContainer().FieldInfos.length>0)){var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n)?(n=this.getYAxisContainer().FieldInfos[0].DisplayName,this.isYAxisTitleChanged=!1):n!==this.getYAxisContainer().FieldInfos[0].DisplayName&&(this.isYAxisTitleChanged=!0);BoldBIDashboard.isNullOrUndefined(t)||this.getMapProperties().YAxisSettings.AxisTitle===n||(t.yAxis.title.text=n,this.getMapProperties().YAxisSettings.AxisTitle=n);this.setPropertyElement("Y-AxisSettings","YAxisTitle",this.isYAxisTitleChanged?this.getMapProperties().YAxisSettings.AxisTitle:"")}else this.setPropertyElement("Y-AxisSettings","YAxisTitle",""),this.getMapProperties().YAxisSettings.AxisTitle=""},t.prototype.UpdateYAxisLabelRotation=function(n){this.getMapProperties().YAxisSettings.LabelRotation=n.replace(new RegExp(String.fromCharCode(176),"g"),"");var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.yAxis.labelRotation=this.getMapProperties().YAxisSettings.LabelRotation)},t.prototype.UpdateYAxisLabelIntersectAction=function(n){this.getMapProperties().YAxisSettings.LabelIntersectAction=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.xAxis.labelIntersectAction=this.getMapProperties().XAxisSettings.LabelIntersectAction)},t.prototype.UpdateYAxisEnableTrim=function(n){this.getMapProperties().YAxisSettings.EnableTrim=n;this.propertyPanel.updateItemDisable("float",this.Type,"Y-AxisSettings","YAxisMaximumLabelLength",!n);var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.yAxis.enableTrim=this.getMapProperties().YAxisSettings.EnableTrim)},t.prototype.UpdateYAxisMaximumLabelLength=function(n){this.getMapProperties().YAxisSettings.MaximumLabelLength=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.yAxis.maxLabelLength=this.getMapProperties().YAxisSettings.MaximumLabelLength)},t.prototype.UpdateInversedYAxis=function(n){this.getMapProperties().YAxisSettings.InversedAxis=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.yAxis.isInversed=n)},t.prototype.UpdateOpposedYAxis=function(n){this.getMapProperties().YAxisSettings.OpposedAxis=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.yAxis.opposedPosition=n)},t.prototype.UpdateShowLegend=function(n){this.getMapProperties().LegendSettings.ShowLegend=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.legendSettings.visible=n?this.getResponsiveLegendVisibility():!1);this.propertyPanel.updateItemVisibility(this.Type,"LegendSettings","LegendPosition",n)},t.prototype.UpdateLegendPosition=function(n){this.getMapProperties().LegendSettings.Position=n;var t=ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName);BoldBIDashboard.isNullOrUndefined(t)||(t.legendSettings.position=n==="Auto"?this.getResponsiveLegendPosition():n)},t.prototype.updateXAxisSort=function(n){this.getMapProperties().SortSettings.XAxis=n;this.dataConfigurationInstance.postDraggedFields()},t.prototype.updateYAxisSort=function(n){this.getMapProperties().SortSettings.YAxis=n;this.dataConfigurationInstance.postDraggedFields()},t.prototype.setPropertyElement=function(n,t,i,r){var u,f;this.propertyPanel.canUpdate=!1;u=this.propertyPanel.getPropertyElement(this.getHeatMapPropertyPanel(),t,n,BoldBIDashboard.isNullOrUndefined(r)?-1:r);u.isVisible=i;f=this.bbdesigner$.extend(!0,{},u);f.categoryName=n;this.propertyPanel.updatePropertyValue(f,"HeatMap",i);this.propertyPanel.canUpdate=!0},t.prototype.updateHeatMapSize=function(){var n,i,t;if(BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this))this.widgetContainerHelper.showControlError(this,this.dataValues);else if(BoldBIDashboard.isNullOrUndefined(this.drillLevelInfo)||!BoldBIDashboard.isNullOrUndefined(this.drillLevelInfo)&&this.drillLevelInfo.length===0)n=this.heatMapElement[0].children.length>0?ejdashboard.base.getComponent(this.heatMapElement[0],this.componentName):null,BoldBIDashboard.isNullOrUndefined(n)||this.resizeHeatMap(n);else for(i=this.getBreadcrumbDatasource(this),t=0;t<i.length;t++){var u=i[t].id.split("_Breadcrumb")[0],r=this.contentContainer.find("#"+u),n=r[0].children.length>0?ejdashboard.base.getComponent(r[0],this.componentName):null;BoldBIDashboard.isNullOrUndefined(n)||this.resizeHeatMap(n)}},t.prototype.initialSelectionForHeatMap=function(){var n=this.heatMapElement[0].children.length>0?ejdashboard.base.getComponent(this.heatMapElement[0],"heatmap"):null;!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().SelectedFilterValues)&&this.getMapProperties().SelectedFilterValues.length>0&&!BoldBIDashboard.isNullOrUndefined(n)?(this.getSelectedElement(n,!0),BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this)):BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this)},t.prototype.getSelectedElement=function(n,t){for(var i,r,f="",e="",u=0;u<this.getMapProperties().SelectedFilterValues.length;u++)i=this.getMapProperties().SelectedFilterValues[u],i.UniqueColumnName===this.heatMapObject.dataSourceSettings.xDataMapping?f=i.InitialDateFilter.DateFilterList.length>0?i.InitialDateFilter.DisplayDateFilterList[0]:i.InitialDimensionFilter.Text[0].toString():e=i.InitialDateFilter.DateFilterList.length>0?i.InitialDateFilter.DisplayDateFilterList[0]:i.InitialDimensionFilter.Text[0];r=this.designer.element.find("#"+this.getheatMapElement(f,e,n));r.length>0&&(t?r[0].setAttribute("style","fill:#f4f4f4"):r[0].style.removeProperty("fill"))},t.prototype.getheatMapElement=function(n,t,i){for(var e,r,u=i.xAxis.isInversed?i.xAxis.labels.slice().reverse():i.xAxis.labels,o=i.yAxis.isInversed?i.yAxis.labels:i.yAxis.labels.slice().reverse(),s=[],f=0;f<u.length;f++)s.push(u[f].toString());for(e=[],r=0;r<o.length;r++)e.push(o[r].toString());var h=u.length,c=s.indexOf(n.toString()),l=e.indexOf(t.toString()),a=l*h+c;return i.element.id+"_HeatMapRect_"+a},t.prototype.resizeHeatMap=function(n){var t=this;BoldBIDashboard.isNullOrUndefined(n)||(this.updateFontStyle(n),this.updateResponsiveObjects(n),n.showTooltip=this.getMapProperties().CellSettings.ShowTooltip,this.setMinAndMaxValues(),n.width="",n.height="",n.width="100%",n.height="100%",setTimeout(function(){t.updateInitialSelection()},10))},t.prototype.updateResponsiveObjects=function(n){var t=this.designerInstance.modules.themeHelper.getHeatMapAxisLabelFontText();n.xAxis.title.text=this.getMapProperties().XAxisSettings.ShowAxisTitle?this.getResponsiveXAxisTitle():"";n.yAxis.title.text=this.getMapProperties().YAxisSettings.ShowAxisTitle?this.getResponsiveYAxisTitle():"";n.legendSettings.visible=this.getMapProperties().LegendSettings.ShowLegend?this.getResponsiveLegendVisibility():!1;n.legendSettings.position=this.getMapProperties().LegendSettings.Position==="Auto"?this.getResponsiveLegendPosition():this.getMapProperties().LegendSettings.Position;n.xAxis.textStyle.size=this.getMapProperties().XAxisSettings.ShowAxisLabel?this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode()?t.size:this.getResponsiveXAxisLabel():"0px";n.yAxis.textStyle.size=this.getMapProperties().YAxisSettings.ShowAxisLabel?this.designerInstance.canApplyTheme()||this.designerInstance.canApplyDashboardTheme()&&this.designerInstance.isViewMode()?t.size:this.getResponsiveYAxisLabel():"0px";n.xAxis.labelRotation=this.getResponsiveXAxisLabelRotation()},t.prototype.getResponsiveXAxisLabelRotation=function(){var n=this.getMapProperties().XAxisSettings.LabelRotation;return n==="Auto"?this.CellInfo.ColumnSpan>=20||this.CellInfo.RowSpan>=8&&this.CellInfo.RowSpan<12&&this.CellInfo.ColumnSpan>=16?"0":"-90":n==="None"?"0":n},t.prototype.getResponsiveYAxisLabel=function(){return this.widgetJson.ContainerSettings.Bounds.ColumnSpan>=20||this.controlContainer.hasClass("bbi-dbrd-maximizeContainer")?this.getFontSizeBasedOnResolution():"0px"},t.prototype.getResponsiveXAxisLabel=function(){return this.widgetJson.ContainerSettings.Bounds.RowSpan>=12||this.CellInfo.RowSpan>=8&&this.CellInfo.RowSpan<12&&this.CellInfo.ColumnSpan>=16||this.controlContainer.hasClass("bbi-dbrd-maximizeContainer")?this.getFontSizeBasedOnResolution():"0px"},t.prototype.getResponsiveLegendVisibility=function(){return this.widgetJson.ContainerSettings.Bounds.RowSpan>=8||this.widgetJson.ContainerSettings.Bounds.ColumnSpan>=16?!0:!1},t.prototype.getResponsiveLegendPosition=function(){return this.widgetJson.ContainerSettings.Bounds.RowSpan>=24&&this.widgetJson.ContainerSettings.Bounds.ColumnSpan>=36||this.widgetJson.ContainerSettings.Bounds.RowSpan>=20&&this.widgetJson.ContainerSettings.Bounds.RowSpan<24&&this.widgetJson.ContainerSettings.Bounds.ColumnSpan>=44&&this.widgetJson.ContainerSettings.Bounds.ColumnSpan<48?"Bottom":this.widgetJson.ContainerSettings.Bounds.RowSpan>=24&&this.widgetJson.ContainerSettings.Bounds.ColumnSpan>=20&&this.widgetJson.ContainerSettings.Bounds.ColumnSpan<24||this.widgetJson.ContainerSettings.Bounds.ColumnSpan>=this.widgetJson.ContainerSettings.Bounds.RowSpan?"Right":"Bottom"},t.prototype.getResponsiveXAxisTitle=function(){var n="",t;return this.getMapProperties().EnableDrilldown&&!BoldBIDashboard.isNullOrUndefined(this.drillLevelInfo)&&this.drillLevelInfo.length>0?(t=this.getXAxisContainer().FieldInfos.length<=this.drillLevelInfo.length?this.getXAxisContainer().FieldInfos.length-1:this.drillLevelInfo.length,n=this.getXAxisContainer().FieldInfos[t].DisplayName):n=this.getMapProperties().XAxisSettings.AxisTitle,this.widgetJson.ContainerSettings.Bounds.RowSpan>=12||this.CellInfo.RowSpan>=8&&this.CellInfo.RowSpan<12&&this.CellInfo.ColumnSpan>=16?n:""},t.prototype.getResponsiveYAxisTitle=function(){var n="",t;return this.getMapProperties().EnableDrilldown&&!BoldBIDashboard.isNullOrUndefined(this.drillLevelInfo)&&this.drillLevelInfo.length>0?(t=this.getYAxisContainer().FieldInfos.length<=this.drillLevelInfo.length?this.getYAxisContainer().FieldInfos.length-1:this.drillLevelInfo.length,n=this.getYAxisContainer().FieldInfos[t].DisplayName):n=this.getMapProperties().YAxisSettings.AxisTitle,this.widgetJson.ContainerSettings.Bounds.ColumnSpan>=20?n:""},t.prototype.setMinAndMaxValues=function(){var n=this.controlContainer.height()<this.controlContainer.width()?this.controlContainer.height():this.controlContainer.width();this.heatMapObject.cellSettings.bubbleSize.minimum=n*.05;this.heatMapObject.cellSettings.bubbleSize.maximum=n*.2},t.prototype.getFormattedValue=function(n,t){var i=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Prefix),this.DataGroupInfo.DataSourceName),r=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(t.Suffix),this.DataGroupInfo.DataSourceName);return BoldBIDashboard.DashboardUtil.formattedText(parseFloat(n),t.Culture,t.DecimalPoints,t.FormatType,t.DecimalSeparator,t.GroupSeparator,i,r,t.Unit,!1,this.designer,t.EnableLakhsAndCroreRep)},t.prototype.getMapProperties=function(){return this.widgetJson},t.prototype.disposeHeatMap=function(){var n=this.heatMapElement[0].children.length>0?ejdashboard.base.getComponent(this.heatMapElement[0],"heatmap"):null;BoldBIDashboard.isNullOrUndefined(n)||(n.destroy(),this.heatMapObject=null);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.HeatMap)},t.prototype.renderColorSettings=function(n,t,i){if(this.categoryId=this.designerId+"_"+t+"_"+i.categoryName,this.colorContainer=this.designer.element.find("#"+this.categoryId),this.colorContainer.length!==0||BoldBIDashboard.isNullOrUndefined(n))this.colorContainer.length>0&&this.renderColorSettingsElement();else{this.colorContainer=BoldBIDashboard.buildTag("div.e-dashbrd-customcolor-container","",{},{id:this.categoryId});var r=BoldBIDashboard.buildTag("div","",{},{id:this.categoryId+"_wrap"}),u=BoldBIDashboard.buildTag("div.e-basic-advance-panel-wrap","",{width:"100%"},{id:this.designerId+"_"+t+"_basicAdvancePanel"}),f=this.getAdvance(this.categoryId);u.append(f);r.append(u);this.colorContainer.append(r);n.append(this.colorContainer)}this.renderSettings()},t.prototype.getAdvance=function(n){var t=BoldBIDashboard.buildTag("div.e-advance-row","",{},{id:this.designerId+"_advanceRow_table"}),i=BoldBIDashboard.buildTag("div.e-advance-color-settings-button","",{}),r=BoldBIDashboard.buildTag("button.e-advanced-color-settings-button bbi-dbrd-btn-small bbi-dbrd-btn-primary","Customize",{width:"230px"},{id:n+"_advance_settings_button",type:"button"});return i.append(r),t.append(this.monochromaticSection()),t.append(i)},t.prototype.renderSettings=function(){var n=this.colorContainer.find(".e-color-settings-monochromatic-wrap"),t=this.colorContainer.find(".e-advance-color-settings-button"),i=this.colorContainer.find(".e-advanced-color-settings-button"),r=this.colorContainer.find(".e-color-gradient-mode-dropdown-wrap");this.getMapProperties().EnableColorSettings?(n.css("display","none"),t.css("display","block")):this.getMapProperties().EnableColorSettings||(n.css("display","block"),t.css("display","none"));this.DataGroupInfo.FieldContainers.length>0&&this.getSizeContainer().FieldInfos.length>0?r.addClass("bbi-disabledbutton"):r.removeClass("bbi-disabledbutton");i.off("click",this.bbdesigner$.proxy(this.editColorCustomization,this,!0));i.on("click",this.bbdesigner$.proxy(this.editColorCustomization,this,!0))},t.prototype.renderColorSettingsElement=function(){var n=this.designer.element.find("#"+this.designerId+"_color_gradient_modedropdownlist").data("BoldBIDashboardDropDownList");n.selectItemByIndex(this.colorGradientModeDropdownSelection(this.getMapProperties().ColorGradientMode));this.colorContainer.find("#"+this.designerId+"_"+this.Type+"_monochromatic_ColorPicker").BoldBIDashboardColorPicker({value:this.getMapProperties().DefaultColor.Color})},t.prototype.monochromaticSection=function(){var n=BoldBIDashboard.buildTag("div.e-color-settings-monochromatic-wrap","",{"margin-left":"195px"},{id:this.designerId+"_"+this.Type+"_formatting_wrap"}),r=BoldBIDashboard.buildTag("div.e-color-settings-monochromatic-color-wrapper","",{}),u=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:this.designerId+"_"+this.Type+"_monochromatic_ColorPicker"}),t,i;return r.append(u),u.BoldBIDashboardColorPicker({value:this.getMapProperties().DefaultColor.Color,cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label e-color-settings-monochromatic-color-picker",select:this.bbdesigner$.proxy(this.updateMonochromaticColorValue,this),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown}),t=BoldBIDashboard.buildTag("div.e-color-gradient-mode-dropdown-wrap","",{float:"left","margin-left":"10px"}),i=BoldBIDashboard.buildTag("input","",{},{id:this.designerId+"_color_gradient_modedropdownlist"}),t.append(i),i.BoldBIDashboardDropDownList({dataSource:[{displayName:"Across Table",value:"Table"},{displayName:"Column Wise",value:"Column"},{displayName:"Row Wise",value:"Row"}],fields:{text:"displayName",value:"value"},change:this.bbdesigner$.proxy(this.UpdateColorGradientMode,this),selectedIndex:this.colorGradientModeDropdownSelection(this.getMapProperties().ColorGradientMode),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"185px",height:"28px"}),n.append(r),n.append(t),n},t.prototype.colorGradientModeDropdownSelection=function(){return this.getMapProperties().ColorGradientMode==="Table"?0:this.getMapProperties().ColorGradientMode==="Column"?1:2},t.prototype.updateColorSettingsSelection=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designerInstance.designerPanel.selectedReportItems[0]),r=this.colorContainer.find(".e-color-settings-monochromatic-wrap"),u=this.colorContainer.find(".e-advance-color-settings-button"),f,i,e;n==="Monochromatic"?(f=this.designer.element.find("#"+this.designerId+"_color_gradient_modedropdownlist").data("BoldBIDashboardDropDownList"),f.selectItemByIndex(this.colorGradientModeDropdownSelection(this.getMapProperties().ColorGradientMode)),i=t.getMapProperties().DefaultColor.Color,e=t.monochromaticLowValueColorGeneration(i),t.getMapProperties().EnableDrilldown&&t.removeAllDrillElementsForHeatMap(t),t.updateMonochromaticSettings(e,i),t.getMapProperties().ColorCustomization=null,t.getMapProperties().EnableColorSettings=!1,r.css("display","block"),u.css("display","none"),this.designerInstance.modules.serialization.notifyChange()):n==="Advanced"&&(r.css("display","none"),u.css("display","block"),t.editColorCustomization(t))},t.prototype.updateMonochromaticColorValue=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designerInstance.designerPanel.selectedReportItems[0]),i,r,u;t.getMapProperties().EnableColorSettings||(i=this.propertyPanel.getHexColorFromRGBA(n.RGBA),r="",BoldBIDashboard.isNullOrUndefined(i)||(u=t.getMapProperties().DefaultColor.Color!==i,r=t.monochromaticLowValueColorGeneration(i),t.getMapProperties().DefaultColor.Color=i,t.getMapProperties().DefaultColor.IsEdited=u,t.updateMonochromaticSettings(r,i),this.designerInstance.modules.serialization.notifyChange()))},t.prototype.updateMonochromaticSettings=function(n,t){var r=!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers)&&this.DataGroupInfo.FieldContainers.length>0&&this.getSizeContainer().FieldInfos.length>0,i;this.heatMapObject.paletteSettings.colorGradientMode=r?"Table":this.getMapProperties().ColorGradientMode;this.heatMapObject.paletteSettings.type="Gradient";this.heatMapObject.paletteSettings.palette=[{color:n},{color:t}];BoldBIDashboard.isNullOrUndefined(this.colorContainer)||(i=this.colorContainer.find(".e-color-gradient-mode-dropdown-wrap"),r?i.addClass("bbi-disabledbutton"):i.removeClass("bbi-disabledbutton"))},t.prototype.monochromaticLowValueColorGeneration=function(n){n=n.replace(/^\s*#|\s*$/g,"");var t=parseInt(n.substr(0,2),16),i=parseInt(n.substr(2,2),16),r=parseInt(n.substr(4,2),16);return t=t*.4+255*.6,i=i*.4+255*.6,r=r*.4+255*.6,"#"+Math.floor(16777216+(t<<16)+(i<<8)+r).toString(16).slice(1)},t.prototype.resetProperties=function(){this.isNecessaryDataConfigured()||(this.setDefaultColorCustomization(),BoldBIDashboard.isNullOrUndefined(this.colorContainer)||(this.propertyPanel.updateCategoryVisibility("HeatMap","Formatting",!1),this.renderSettings(),this.renderColorSettingsElement(),this.setPropertyElement("Formatting","ColorSettings",this.getMapProperties().EnableColorSettings?"Advanced":"Monochromatic")),this.designerInstance.modules.serialization.notifyChange())},t.prototype.getColorCustomization=function(){return!BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)&&this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[2].FieldInfos.length===0&&this.DataGroupInfo.FieldContainers[3].FieldInfos.length===0&&(this.getMapProperties().ColorCustomization=null),this.getMapProperties().ColorCustomization},t.prototype.editColorCustomization=function(){var r=new BoldBIDashboard.DashboardDesignerUtility.AdvancedColorCustomization(this.designer),u=BoldBIDashboard.isNullOrUndefined(this.getMapProperties().ColorCustomization)?new ColorCustomization:this.getMapProperties().ColorCustomization,n=new ColorFieldsInfo,i;n.ColorPicker=ColorSetColorPickers.NormalColorPicker;n.Name=WidgetProperty.FillColor;n.DisplayName="Fill color";var t=[],f=this.getValueContainer().FieldInfos[0],e=this.getRuleMeasureConditions();t.push(n);i={colorCustomizationObj:u,DataGroupInfo:this.DataGroupInfo,colorFields:t,customRuleMeasureConditions:e,defaultBasedOnField:f,ignoreBasedOn:!0,colorTypeCollection:["Gradient","Rule"],hasDefaultColor:!0,legendVisible:!1};r.populateUI(i,this,"updateColorCustomization")},t.prototype.updateColorCustomization=function(n,t){var i;if(t){if(!this.getMapProperties().EnableColorSettings&&t){var r=this.colorContainer.find(".e-color-settings-monochromatic-wrap"),u=this.colorContainer.find(".e-advance-color-settings-button"),f=this.designer.element.find("#"+this.designerId+"_color_gradient_modedropdownlist").data("BoldBIDashboardDropDownList");f.selectItemByIndex(this.colorGradientModeDropdownSelection(this.getMapProperties().ColorGradientMode));this.setPropertyElement("Formatting","ColorSettings","Monochromatic");r.css("display","block");u.css("display","none");this.getMapProperties().EnableColorSettings=!1}}else BoldBIDashboard.isNullOrUndefined(n)||(this.getMapProperties().ColorCustomization=n,i=this.getValueContainer().FieldInfos[0],n.Type===ColorCustomizationType.Gradient?(this.getMapProperties().ColorCustomization.GradientSettings.BasedOn.FieldId=i.Id,this.getMapProperties().ColorCustomization.GradientSettings.BasedOn.SummaryType=i.SummaryType,this.getMapProperties().ColorCustomization.GradientSettings.BasedOn.ValueType=ValueType.Value):n.Type===ColorCustomizationType.Rule&&(this.getMapProperties().ColorCustomization.RuleRangeSettings.BasedOn.FieldId=i.Id,this.getMapProperties().ColorCustomization.RuleRangeSettings.BasedOn.SummaryType=i.SummaryType,this.getMapProperties().ColorCustomization.RuleRangeSettings.BasedOn.ValueType=ValueType.Value),this.getMapProperties().EnableDrilldown&&this.removeAllDrillElements(),this.getMapProperties().EnableColorSettings=!0,this.propertyPanel.updateItemDisable("dropdown",this.Type,"Formatting","ColorGradientMode",!0),this.designerInstance.modules.serialization.notifyChange(),this.dataConfigurationInstance.postDraggedFields())},t.prototype.setColorCustomization=function(n){var u,t,i,r,f;BoldBIDashboard.isNullOrUndefined(n)?(this.setGlobalColor(),r=this.getMapProperties().DefaultColor.Color,f=this.monochromaticLowValueColorGeneration(r),this.updateMonochromaticSettings(f,r)):(u=this.updateMeasureField(n),u?(t=[],i=n.Type,this.heatMapObject.paletteSettings.colorGradientMode="Table",i===ColorCustomizationType.Gradient?(t=this.gradientColorCustomization(n),BoldBIDashboard.isNullOrUndefined(this.heatMapObject)||(this.heatMapObject.paletteSettings.palette=t,this.heatMapObject.paletteSettings.type="Gradient")):i===ColorCustomizationType.Rule&&n.RuleRangeSettings.RangeColorInfo.length!==0&&(t=this.ruleRangeCustomization(n),BoldBIDashboard.isNullOrUndefined(this.heatMapObject)||(this.heatMapObject.paletteSettings.type="Fixed",this.heatMapObject.legendSettings.enableSmartLegend=!0,this.heatMapObject.paletteSettings.palette=t))):this.setDefaultColorCustomization());BoldBIDashboard.isNullOrUndefined(this.colorContainer)||(this.renderSettings(),this.renderColorSettingsElement(),this.setPropertyElement("Formatting","ColorSettings",this.getMapProperties().EnableColorSettings?"Advanced":"Monochromatic"))},t.prototype.updateBackWardCompatability=function(){var t=this.getMapProperties().Data.Containers.filter(function(n){return n.Name==="Value"}),i,n;BoldBIDashboard.isNullOrUndefined(this.getMapProperties().DefaultColor)&&t.length>0&&(i=this.getMapProperties().ColorSettings.MaxColor,n=t[0].FieldInfos,n.length>0&&(this.getMapProperties().DefaultColor=new DefaultColorSet,this.getMapProperties().DefaultColor.IsEdited=!0,this.getMapProperties().DefaultColor.Color=i,this.getMapProperties().DefaultColor.Name=n[0].UniqueColumnName))},t.prototype.setGlobalColor=function(){var n=this.getMapProperties().DefaultColor,f=this.DataGroupInfo.FieldContainers,r=this.getValueContainer(),i=r.FieldInfos.length>0?r.FieldInfos[0].UniqueColumnName:null,u=BoldBIDashboard.Dashboard.WidgetHelper.getGlobalColumnId(i,this.DataGroupInfo.FieldContainers),t=BoldBIDashboard.Dashboard.WidgetHelper.getColorCode(this,u,n);n.Color.length===0&&n.Name.length===0?(n.Name=i,n.Color=t,n.IsEdited=!1):(t=BoldBIDashboard.isNullOrUndefined(t)?n.Color:t,n.Name===i?n.Color=n.IsEdited?n.Color:t:(n.Name=i,n.Color=t,n.IsEdited=!1))},t.prototype.setDefaultColorCustomization=function(){this.bbdesigner$(this.heatMapElement[0]).hasClass("e-heatmap")&&(this.heatMapObject.paletteSettings.type="Gradient",this.getMapProperties().DefaultColor=new DefaultColorSet,this.heatMapObject.paletteSettings.palette=[{color:this.monochromaticLowValueColorGeneration(BoldBIDashboard.DashboardUtil.defaultColorPalette[0])},{color:BoldBIDashboard.DashboardUtil.defaultColorPalette[0]}],this.getMapProperties().ColorCustomization=null,this.getMapProperties().EnableColorSettings=!1)},t.prototype.updateMeasureField=function(n){if(BoldBIDashboard.isNullOrUndefined(n.GradientSettings)){if(!BoldBIDashboard.isNullOrUndefined(n.RuleRangeSettings)&&n.RuleRangeSettings.RangeColorInfo.length!==0)return n.RuleRangeSettings.BasedOn.FieldId===this.getValueContainer().FieldInfos[0].Id}else return n.GradientSettings.BasedOn.FieldId===this.getValueContainer().FieldInfos[0].Id;return!1},t.prototype.getRuleMeasureConditions=function(){return[{text:"Greater than",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CGreaterThan)},{text:"Greater than or Equal to",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CGreaterThanOrEqualTo)},{text:"Less than",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CLessThan)},{text:"Less than or Equal to",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CLessThanOrEqalTo)},{text:"Between",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CBetween)},]},t.prototype.ruleRangeCustomization=function(n){var l=JSON.parse(this.dataValues.minMaxValues),a=n.Type===ColorCustomizationType.Gradient?n.GradientSettings.BasedOn:n.Type===ColorCustomizationType.Rule?n.RuleRangeSettings.BasedOn:n.SolidColorInfo[0].BasedOn,v=l["Min_"+a.FieldId.substring(15)+"_Color"],f=n.DefaultColor,i=n.RuleRangeSettings.RangeColorInfo,t;i.sort(function(n,t){return n.StartRange-t.StartRange});var o=1e-6,r=[],s=f,h=[];if(i.length!==0){for(t=0;t<i.length;t++){var e=i[t].PropertyColorPair[0].Color,u=i[t].StartRange,c=i[t].EndRange;switch(i[t].MeasureCondition){case 0:r.push({color:e,value:u+o});break;case 1:r.push({color:e,value:u});break;case 2:s=e;(t===i.length-1||t!==i.length-1&&u!==i[t+1].StartRange)&&r.push({color:f,value:u-o});break;case 3:s=e;(t===i.length-1||t!==i.length-1&&u+1!==i[t+1].StartRange)&&r.push({color:f,value:u+o});break;case 6:r.push({color:e,value:u});(t===i.length-1||t!==i.length-1&&c+1!==i[t+1].StartRange)&&r.push({color:f,value:c+o})}}if(r.push({color:s,value:v}),h.length!==0){for(t=0;t<r.length;t++)r[t].color===f&&(r[t].color="");for(t=0;t<h.length;t++)r.push(h[t])}return r}},t.prototype.gradientColorCustomization=function(n){var c=JSON.parse(this.dataValues.minMaxValues),l=n.Type===ColorCustomizationType.Gradient?n.GradientSettings.BasedOn:n.Type===ColorCustomizationType.Rule?n.RuleRangeSettings.BasedOn:n.SolidColorInfo[0].BasedOn,u=parseInt(c["Min_"+l.FieldId.substring(15)+"_Color"],10),f=parseInt(c["Max_"+l.FieldId.substring(15)+"_Color"],10),a=(u+f)/2,h=n.DefaultColor,v=1e-6,e=n.GradientSettings.GradientColorInfo.Low,o=n.GradientSettings.GradientColorInfo.High,i=e.Value,r=o.Value,t=[],s,y;return e.IsCustom?u>=i?t.push({color:e.Color,value:u}):t.push({color:h,value:u},{color:h,value:i-v,label:" "},{color:e.Color,value:i}):t.push({color:e.Color,value:u}),n.GradientSettings.GradientColorInfo.HasMidColor&&(s=n.GradientSettings.GradientColorInfo.Mid,y=s.Value,s.IsCustom?t.push({color:s.Color,value:y}):(a=BoldBIDashboard.isNullOrUndefined(r)||BoldBIDashboard.isNullOrUndefined(i)?!BoldBIDashboard.isNullOrUndefined(r)&&BoldBIDashboard.isNullOrUndefined(i)?(r+u)/2:BoldBIDashboard.isNullOrUndefined(r)&&!BoldBIDashboard.isNullOrUndefined(i)?(i+f)/2:(u+f)/2:(r+i)/2,t.push({color:s.Color,value:a}))),o.IsCustom?f<r?t.push({color:o.Color,value:f}):t.push({color:o.Color,value:r},{color:h,value:r+v,label:" "},{color:h,value:f}):t.push({color:o.Color,value:f}),t},t.prototype.heatmapDrillDownAction=function(n,t){var u,l,i,o,e,s;if(this.drillLevelInfo.length<this.getXAxisContainer().FieldInfos.length-1||this.drillLevelInfo.length<this.getYAxisContainer().FieldInfos.length-1){var h=null,c=[],f=this.getXAxisContainer(),y=f.FieldInfos.length>t.drillLevelInfo.length?t.drillLevelInfo.length:f.FieldInfos.length-1;c[f.FieldInfos[y].UniqueColumnName]=n.xValue;u=this.getYAxisContainer();l=u.FieldInfos.length>t.drillLevelInfo.length?t.drillLevelInfo.length:u.FieldInfos.length-1;c[u.FieldInfos[l].UniqueColumnName]=n.yValue;f.FieldInfos.length>t.drillLevelInfo.length?h=f:u.FieldInfos.length>t.drillLevelInfo.length&&(h=u);t.drillLevelInfo.push({id:h.FieldInfos[t.drillLevelInfo.length].Id,level:t.drillLevelInfo.length,selectedItem:c,isClickOnAxisLabel:!1});var a=JSON.parse(JSON.stringify(this.DataGroupInfo)),v=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.controlContainer),r=this.dataConfigurationInstance.convertDataGroupInfoToFieldInfo(a,v);for(i=0;i<r.length;i++){if(r[i].ContainerName==="X-Axis")if(f.FieldInfos.length<=t.drillLevelInfo.length&&r[i].UniqueColumnName===f.FieldInfos[f.FieldInfos.length-1].UniqueColumnName&&(r[i].isVisible=!0),f.FieldInfos.length>=t.drillLevelInfo.length&&r[i].UniqueColumnName===f.FieldInfos[t.drillLevelInfo.length-1].UniqueColumnName)r[i].FilterInfo.DimensionFilterInfo.AllowFilterInfo.FilterValues[0]=n.xValue;else if(!BoldBIDashboard.isNullOrUndefined(r[i].FilterInfo)&&!BoldBIDashboard.isNullOrUndefined(r[i].FilterInfo.DimensionFilterInfo)){for(o="",e=0;e<t.drillLevelInfo.length-1;e++)if(!BoldBIDashboard.isNullOrUndefined(t.drillLevelInfo[e].selectedItem[r[i].UniqueColumnName])){s=t.drillLevelInfo[e].selectedItem[r[i].UniqueColumnName];o=BoldBIDashboard.isNullOrUndefined(s)?"":s;break}o.length>0&&(r[i].FilterInfo.DimensionFilterInfo.AllowFilterInfo.FilterValues[0]=o)}if(r[i].ContainerName==="Y-Axis")if(u.FieldInfos.length<=t.drillLevelInfo.length&&r[i].UniqueColumnName===u.FieldInfos[u.FieldInfos.length-1].UniqueColumnName&&(r[i].isVisible=!0),u.FieldInfos.length>=t.drillLevelInfo.length&&r[i].UniqueColumnName===u.FieldInfos[t.drillLevelInfo.length-1].UniqueColumnName)r[i].FilterInfo.DimensionFilterInfo.AllowFilterInfo.FilterValues[0]=n.yValue;else if(!BoldBIDashboard.isNullOrUndefined(r[i].FilterInfo)&&!BoldBIDashboard.isNullOrUndefined(r[i].FilterInfo.DimensionFilterInfo)){for(o="",e=0;e<t.drillLevelInfo.length-1;e++)if(!BoldBIDashboard.isNullOrUndefined(t.drillLevelInfo[e].selectedItem[r[i].UniqueColumnName])){s=t.drillLevelInfo[e].selectedItem[r[i].UniqueColumnName];o=BoldBIDashboard.isNullOrUndefined(s)?"":s;break}o.length>0&&(r[i].FilterInfo.DimensionFilterInfo.AllowFilterInfo.FilterValues[0]=o)}}this.widgetDataFetch(v,a,r)}},t.prototype.widgetDataFetch=function(n,t,i){var u=this.getWidgetInfo(this.DataGroupInfo),r=this.masterFilterWindowInstance.getSelectedValuesForWidgetRequest(),f=this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design;this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.WidgetAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.fetchData,fieldInfo:i,dataset:t.DataSourceID,widgetInfo:u,request:AjaxRequest.Widget.toString(),getColumnListBasedOnVisibility:!1,selectedValuesList:BoldBIDashboard.isNullOrUndefined(r)?"":JSON.stringify(r),urlParameters:this.designerInstance.urlParameter,isDataSampleForViewMode:f})},{fnction:this.bbdesigner$.proxy(this.loadDrillDownData,this,n),indicator:[this.bbdesigner$.proxy(this.showLoadingIndicator,this),this.bbdesigner$.proxy(this.hideLoadingIndicator,this)]})},t.prototype.loadDrillDownData=function(n,t){if(this.dataValues=t,BoldBIDashboard.isNullOrUndefined(t.Message)){if(t.noDataAvailable){BoldBIDashboard.isNullOrUndefined(n.heatMapElement)||n.heatMapElement.hide();n.contentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").css("display","block");return}BoldBIDashboard.isNullOrUndefined(n.breadCrumbItem)?this.createBreadcrumb(n):(this.removeBreadcrumb(n.breadCrumbItem),this.createBreadcrumb(n));this.createDrillHeatMap(t,n)}else this.widgetContainerHelper.showControlError(n,t)},t.prototype.createDrillHeatMap=function(n,t){var f=JSON.parse(n.data),tt=this.renderHeatMapWidget(f),it=this.getMapProperties(),b=t.designerId+"heatmapElement"+t.widgetJson.UniqueName+"drillLevel"+t.drillLevelInfo.length,u=t.heatMapItem.children("#"+b),a,v,s,h,y,c,p,r,l,w,i,nt;u.length===0&&(u=BoldBIDashboard.buildTag("div.e-heatmap-element","",{width:"100%",height:"calc(100% - 20px)","background-color":"transparent","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"100",overflow:"hidden"},{id:b}),t.heatMapItem.append(u));var e=[],o=[],k=this.getXAxisContainer().FieldInfos.length<=t.drillLevelInfo.length?this.getXAxisContainer().FieldInfos.length-1:t.drillLevelInfo.length,d=this.getYAxisContainer().FieldInfos.length<=t.drillLevelInfo.length?this.getYAxisContainer().FieldInfos.length-1:t.drillLevelInfo.length,g=this.getValueContainer().FieldInfos[0].UniqueColumnName;for(this.heatMapObject=tt,this.heatMapObject.dataSource=f,this.heatMapObject.dataSourceSettings.valueMapping=g,this.heatMapObject.dataSourceSettings.xDataMapping=this.getXAxisContainer().FieldInfos[k].UniqueColumnName,this.heatMapObject.dataSourceSettings.yDataMapping=this.getYAxisContainer().FieldInfos[d].UniqueColumnName,i=0;i<f.length;i++)a=f[i][this.heatMapObject.dataSourceSettings.xDataMapping],v=f[i][this.heatMapObject.dataSourceSettings.yDataMapping],e.indexOf(a)===-1&&e.push(a),o.indexOf(v)===-1&&o.push(v);if(s=[],h=[],this.getMapProperties().SortSettings.YAxis!=="Auto")for(y=JSON.parse(this.dataValues.YLabelData),r=0;r<y.length;r++)c=y[r][this.heatMapObject.dataSourceSettings.yDataMapping].toString(),h.indexOf(c)===-1&&o.indexOf(c)!==-1&&h.push(c);if(this.getMapProperties().SortSettings.XAxis!=="Auto")for(p=JSON.parse(this.dataValues.XLabelData),r=0;r<p.length;r++)l=p[r][this.heatMapObject.dataSourceSettings.xDataMapping].toString(),s.indexOf(l)===-1&&e.indexOf(l)!==-1&&s.push(l);for(this.getSizeContainer().FieldInfos.length>0?(this.heatMapObject.cellSettings.tileType="Bubble",this.getMapProperties().CellSettings.TileType="Bubble",this.heatMapObject.cellSettings.bubbleType="SizeAndColor",this.setMinAndMaxValues(),this.heatMapObject.dataSourceSettings.bubbleDataMapping.size=this.getSizeContainer().FieldInfos[0].UniqueColumnName,this.heatMapObject.dataSourceSettings.bubbleDataMapping.color=g,this.heatMapObject.paletteSettings.colorGradientMode="Table"):(this.heatMapObject.cellSettings.tileType="Rect",this.getMapProperties().CellSettings.TileType="Rect"),this.heatMapObject.xAxis.title.text=this.getXAxisContainer().FieldInfos[k].DisplayName,this.heatMapObject.yAxis.title.text=this.getYAxisContainer().FieldInfos[d].DisplayName,this.heatMapObject.yAxis.labels=this.getMapProperties().SortSettings.YAxis==="Auto"?o:h,this.heatMapObject.xAxis.labels=this.getMapProperties().SortSettings.XAxis==="Auto"?e:s,this.updateResponsiveObjects(this.heatMapObject),this.DataGroupInfo.FieldContainers.length>0&&this.getValueContainer().FieldInfos.length>0&&this.getXAxisContainer().FieldInfos.length>0&&this.getYAxisContainer().FieldInfos.length>0?this.setColorCustomization(this.getMapProperties().ColorCustomization):this.setDefaultColorCustomization(),this.bbdesigner$(u[0]).hasClass("e-heatmap")?this.heatMapObject.dataBind():this.heatMapObject.appendTo(u[0]),this.heatMapElement.css("display","none"),this.heatMapElement=u,w=this.getBreadcrumbDatasource(t),i=0;i<w.length-1;i++)nt=w[i].id.split("_Breadcrumb")[0],t.contentContainer.find("#"+nt).css({display:"none"})},t.prototype.createBreadcrumb=function(n){var t=n.designerId+"heatMapElement"+n.widgetJson.UniqueName+"Breadcrumb";n.breadCrumbItem=BoldBIDashboard.buildTag("div.Breadcrumb","",{width:"100%",height:"20px",color:"#5997f9",background:"transparent","font-weight":"400","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"100"},{id:t});n.breadCrumbItem.BoldBIDashboardBreadcrumb({dataSource:this.getBreadcrumbDatasource(n),width:"100%",selected:this.bbdesigner$.proxy(this.drillUp,this,n)});this.heatMapItem.prepend(n.breadCrumbItem);n.designerInstance.element.find("#"+t+"_breadcrumbDiv").css("background","transparent")},t.prototype.removeBreadcrumb=function(n){BoldBIDashboard.isNullOrUndefined(n)||n.remove()},t.prototype.onFieldDragDrop=function(n,t,i){return this.onFieldDragDropped(n,this.DataGroupInfo,t,i)},t.prototype.onFieldDragDropped=function(n,t,i,r){var f,e,u;if(BoldBIDashboard.isNullOrUndefined(i))return!0;if(f=!0,e="",!BoldBIDashboard.isNullOrUndefined(n.FieldType)&&n.FieldType===FieldType.Dimensions)for(u=0;u<t.FieldContainers.length;u++)if(e=t.FieldContainers[u].Name===n.ContainerName?n.ContainerName.toLowerCase():"",e==="x-axis"&&t.FieldContainers[u].FieldInfos.length===0){f=!0;break}else if(e==="y-axis"&&t.FieldContainers[u].FieldInfos.length===0){f=!0;break}else e!=="x-axis"||t.FieldContainers[u].FieldInfos.length!==1||this.getMapProperties().EnableDrilldown?e!=="y-axis"||t.FieldContainers[u].FieldInfos.length!==1||this.getMapProperties().EnableDrilldown||(this.designer.modules.util.alertDialog(this.designer.getLocalizationContent().multiLevelDrillDialog.titleText,this.designer.getLocalizationContent().multiLevelDrillDialog.dialogContentText,IconType.question,AlertType.Confirm,!1,"",{height:140,width:500,method:"getDialogOutput",instance:this.designer.modules.util,dataInfo:{eventObj:r,droppedItem:i}}),f=!1):(this.designer.modules.util.alertDialog(this.designer.getLocalizationContent().multiLevelDrillDialog.titleText,this.designer.getLocalizationContent().multiLevelDrillDialog.dialogContentText,IconType.question,AlertType.Confirm,!1,"",{height:140,width:500,method:"getDialogOutput",instance:this.designer.modules.util,dataInfo:{eventObj:r,droppedItem:i}}),f=!1);return f},t.prototype.getBreadcrumbDatasource=function(n){var s=n.DataGroupInfo,u=[],t,e,f,i,r,o;if(n.drillLevelInfo.length>0&&(t=this.getXAxisContainer(),!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.isNullOrUndefined(t.FieldInfos[0])))for(e=t.FieldInfos[0].Name,f=n.widgetJson.UniqueName,u.push({id:n.designerId+"heatmapElement"+f+"_Breadcrumb",displayText:e,columnId:t.FieldInfos[0].UniqueColumnName}),i=0;i<n.drillLevelInfo.length;i++)r=i+1,t=this.getXAxisContainer().FieldInfos.length>r?this.getXAxisContainer():this.getYAxisContainer(),o=BoldBIDashboard.isNullOrUndefined(t.FieldInfos[r])?"":t.FieldInfos[r].UniqueColumnName,u.push({id:n.designerId+"heatmapElement"+f+"drillLevel"+r+"_Breadcrumb",displayText:n.drillLevelInfo[i].selectedItem[t.FieldInfos[i].UniqueColumnName].toString(),columnId:o});return u},t.prototype.drillUp=function(n,t){for(var e,o,s,i,r,l=n.getMapProperties(),u=1,f=0;f<t.model.dataSource.length;f++)if(t.model.dataSource[f].id===t.tabId){u=f+1;break}for(e=u;e<=n.drillLevelInfo.length;e++){var c=t.model.dataSource[e].id.split("_Breadcrumb")[0],h=n.contentContainer.find("#"+c),r=ejdashboard.base.getComponent(h[0],"heatmap");r.destroy();h.remove()}for(o=n.drillLevelInfo.length;o>=u;o--)n.drillLevelInfo.splice(o-1);u===1?(s=t.model.dataSource[0].id.split("_Breadcrumb")[0],i=n.contentContainer.find("#"+s),i.css({display:"block"}),r=ejdashboard.base.getComponent(i[0],"heatmap"),this.heatMapObject=r,this.heatMapElement=i,n.resizeHeatMap(r),n.drillLevelInfo=[]):(s=t.model.dataSource[u-1].id.split("_Breadcrumb")[0],i=n.contentContainer.find("#"+s),i.css({display:"block"}),r=ejdashboard.base.getComponent(i[0],"heatmap"),this.heatMapObject=r,this.heatMapElement=i,n.resizeHeatMap(r));this.removeBreadcrumb(n.breadCrumbItem);n.drillLevelInfo.length>0&&this.createBreadcrumb(n)},t.prototype.removeAllDrillElements=function(){this.removeAllDrillElementsForHeatMap(this)},t.prototype.removeAllDrillElementsForHeatMap=function(n){var t=n.contentContainer.find("#"+n.designerId+"heatmapElement"+n.widgetJson.UniqueName),u,i,e,r,f;for(t.css({display:"block"}),n.removeBreadcrumb(n.breadCrumbItem),u=this.getBreadcrumbDatasource(n),i=1;i<u.length;i++)e=u[i].id.split("_Breadcrumb")[0],r=n.contentContainer.find("#"+e),r.length>0&&(f=ejdashboard.base.getComponent(r[0],"heatmap"),BoldBIDashboard.isNullOrUndefined(f)||f.destroy(),r.remove());!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0&&t.hasClass("e-control e-heatmap")&&(this.heatMapElement=t,this.heatMapObject=ejdashboard.base.getComponent(t[0],"heatmap"));n.drillLevelInfo=[]},t.prototype.showLoadingIndicator=function(){this.contentContainer.find("#"+this.designerId+"heatmapItem"+this.widgetJson.UniqueName).BoldBIDashboardWaitingPopup("show")},t.prototype.hideLoadingIndicator=function(){this.contentContainer.find("#"+this.designerId+"heatmapItem"+this.widgetJson.UniqueName).BoldBIDashboardWaitingPopup("hide")},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.HeatMapItem",InternalHeatMapReportItem,window);BoldBIDashboard.DashboardDesignerUtility.HeatMapItem.prototype.initialize();__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();InternalRadarPolarChartReportItem=function(n){function t(t){var i=n.call(this,t,"RadarPolarChart","e-radarpolar-item")||this;return i.radarpolarchartJson=null,i.radarPolarChartObj=null,i.dataValues=null,i.defaultColorPalette=[],i.radarPolarChartElement=null,i.radarPolarChartItem=null,i.locale=null,i.bbdesigner$=i.designerInstance.bbdesigner$,i.locale=t.getLocalizationContent(),i.designerId=i.designerInstance._id,i.widgetJson=new RadarPolarChartProperties(t),i.propertyPanel=t.modules.propertyPanel,i.defaultColorPalette=BoldBIDashboard.DashboardUtil.defaultColorPalette,i.unwireEvents(),i.wireEvents(),i}return __extends(t,n),t.prototype.initialize=function(){var n=BoldBIDashboardDesigner.getLocale(),t={GroupName:n.itemPanel.groupItems.comparison,GroupId:"1475fcad-99eb-484d-a1af-369ded6937fb",Items:[{id:"adc61afd-4062-43a2-8b0a-16ac8f584646",widgetName:"RadarPolarChart",widgetDisplayName:n.itemPanel.widgetTitle.radarPolarChart,cssClass:"bbi-widgeticon bbi-designer-widget-radarpolar",widgetNameSpace:"BoldBIDashboard.DashboardDesignerUtility.RadarPolarChartItem",searchCategory:["comparison","radar","polar"],widgetconfiginfo:null,useIconTemplate:!0,tooltip:{title:n.itemPanel.widgetTitle.radarPolarChart+" Chart",description:n.itemPanel.widgetDescription.radarPolarChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.radarPolarChartDataReq},serializationNameSpace:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.RadarPolarChartProperties"}]};BoldBIDashboardDesigner.widgetItems.push(t);BoldBIDashboard.isNullOrUndefined(BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes)||BoldBIDashboard.DashboardDesignerUtility.WidgetsTypes.registerWidgets(t)},t.prototype.init=function(n,t){this.createRadarPolarContainer(t)},t.prototype.updateSize=function(t){n.prototype.updateSize.call(this,t);BoldBIDashboard.isNullOrUndefined(this.radarPolarChartElement)||this.updateRadarPolarChartSize()},t.prototype.resetProperties=function(){this.propertyPanel.updateItemVisibility("RadarPolarChart","LegendSettings","CustomLegend",!1);this.propertyPanel.updateCategoryVisibility("RadarPolarChart","SeriesPalette",!1);this.getRadarPolarChartProperties().DefaultColors=[]},t.prototype.applyWidgetTheme=function(n){var t=BoldBIDashboard.Dashboard.WidgetContainerHelper.isWidgetRenderedWithData(this);this.updateTitleSubTitleFontTheme();t||BoldBIDashboard.Dashboard.WidgetContainerHelper.applyErrorContainerTheme(this);this.applyPrimaryXAxisTheme(n);this.applyPrimaryYAxisTheme(n);this.applyLegendTheme(n);this.applyDataLabelTheme(n);this.applyRadarPolarFillColor(n);this.generateTooltip();this.radarPolarChartObj.refresh()},t.prototype.updateTitleSubTitleFontTheme=function(){var n=this.designerInstance.modules.themeHelper.getRadarPolarHeaderTitle(),t=this.designerInstance.modules.themeHelper.getRadarPolarHeaderSubTitle();BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetTitleColor(this,this.controlContainer,this.getRadarPolarChartProperties().ContainerSettings.TextColor,n);BoldBIDashboard.Dashboard.WidgetContainerHelper.applyWidgetSubTitleColor(this,this.controlContainer,t);this.designerInstance.updateWidgetHeaderHeightOnTheme(this)},t.prototype.applyPrimaryXAxisTheme=function(){var n=this.radarPolarChartObj.primaryXAxis,t;n.majorTickLines.color=this.themeHelper.getRadarPolarMajorTickLinesColor();n.majorGridLines.color=this.themeHelper.getRadarPolarMajorGridLinesColor();n.labelStyle.color=this.themeHelper.getRadarPolarAxisLabelFontColor();t=this.themeHelper.getRadarPolarAxisLabelFont();n.labelStyle.size=t.size;n.labelStyle.fontWeight=t.weight;n.labelStyle.fontFamily=t.family},t.prototype.applyPrimaryYAxisTheme=function(){var n=this.radarPolarChartObj.primaryYAxis,t;n.majorTickLines.color=this.themeHelper.getRadarPolarMajorTickLinesColor();n.majorGridLines.color=this.themeHelper.getRadarPolarMajorGridLinesColor();n.labelStyle.color=this.themeHelper.getRadarPolarAxisLabelFontColor();t=this.themeHelper.getRadarPolarAxisLabelFont();n.labelStyle.size=t.size;n.labelStyle.fontWeight=t.weight;n.labelStyle.fontFamily=t.family},t.prototype.applyLegendTheme=function(){this.radarPolarChartObj.legendSettings.textStyle.color=this.themeHelper.getRadarPolarLegendFontColor();var n=this.themeHelper.getRadarPolarLegendFont();this.radarPolarChartObj.legendSettings.textStyle.size=n.size;this.radarPolarChartObj.legendSettings.textStyle.fontWeight=n.weight;this.radarPolarChartObj.legendSettings.textStyle.fontFamily=n.family},t.prototype.applyDataLabelTheme=function(){var t,n;if(this.getRadarPolarChartProperties().ShowValueLabel)for(t=this.themeHelper.getRadarPolarDataLabelFont(),n=0;n<this.radarPolarChartObj.series.length;n++)this.radarPolarChartObj.series[n].marker.dataLabel.font.color=this.themeHelper.getRadarPolarDataLabelFontColor(),this.radarPolarChartObj.series[n].marker.dataLabel.font.size=t.size,this.radarPolarChartObj.series[n].marker.dataLabel.font.fontWeight=t.weight,this.radarPolarChartObj.series[n].marker.dataLabel.font.fontFamily=t.family,this.radarPolarChartObj.series[n].marker.dataLabel.font.fontFamily="var(--designer-font)"},t.prototype.applyRadarPolarFillColor=function(){var r=this.getRadarPolarChartProperties().IsDefaultColorPalette&&!this.getRadarPolarChartProperties().DefaultColors.some(function(n){return n.IsEdited}),n,t,i;if(r)for(this.radarPolarChartObj.palettes=this.themeHelper.getColorPalette(),n=0;n<this.radarPolarChartObj.series.length;n++){if(!BoldBIDashboard.isNullOrUndefined(this.getRadarPolarChartProperties().DefaultColors)&&this.getRadarPolarChartProperties().DefaultColors.length>0)for(t=0;t<this.getRadarPolarChartProperties().DefaultColors.length;t++)this.radarPolarChartObj.series[n].id===this.getRadarPolarChartProperties().DefaultColors[t].Name&&(this.radarPolarChartObj.series[n].fill=this.getRadarPolarChartProperties().DefaultColors[t].Color);if(!BoldBIDashboard.isNullOrUndefined(this.radarPolarChartObj.series[n].points))for(i=0;i<this.radarPolarChartObj.series[n].points.length;i++)this.radarPolarChartObj.series[n].points[i].fill=null}},t.prototype.getRequiredScripts=function(){return{MainScript:{ScriptName:"ej2.chart.all.min.js",NameSpace:"ejdashboard.charts.Chart"},DependentScripts:[]}},t.prototype.renderViewModeWidget=function(n){this.renderWidget(n,"ejdashboard.charts.Chart")},t.prototype.wireEvents=function(){this.designerInstance.element.on("click",".e-chart-axis-range-button",this.bbdesigner$.proxy(this.onAxisRangeClick,this))},t.prototype.unwireEvents=function(){this.designerInstance.element.off("click",".e-chart-axis-range-button",this.bbdesigner$.proxy(this.onAxisRangeClick,this))},t.prototype.update=function(n){this.IsRendered=!1;this.updateTitleSubTitleFontTheme();this.updateRadarPolarChartData(n)},t.prototype.getWidgetImage=function(){return'<svg width="100%" height="100%" viewBox="0 0 324 208" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->    <desc>Created with Sketch.<\/desc>    <g id="polar-" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="Group-2" transform="translate(69.000000, 12.000000)">            <g id="polar-" transform="translate(0.000000, 11.000000)" fill-rule="nonzero">                <g id="Group" transform="translate(0.482789, 0.098557)">                    <path d="M90.3713967,-5.95788979 C90.3622212,-7.93381281 91.6473323,-9.52954761 93.2418218,-9.52208945 C94.8363113,-9.51457885 96.1363786,-7.90670947 96.1456034,-5.93078645 L96.9473953,165.800019 C96.9565707,167.775942 95.6714597,169.371673 94.0769703,169.364215 C92.4824807,169.356704 91.1824134,167.748838 91.1731886,165.772916 L90.3713967,-5.95788979 Z" id="Line-Copy" fill="var(--widget-notconfigured-image-background2)" transform="translate(93.659396, 79.921063) scale(-1, 1) rotate(30.000000) translate(-93.659396, -79.921063) "><\/path>                    <path d="M22.127534,126.146033 C20.465889,127.073268 18.3320917,126.509865 17.3615644,124.887639 C16.391037,123.265411 16.9512987,121.198664 18.6129437,120.27143 L164.870649,38.6563975 C166.532293,37.7291628 168.666092,38.2925654 169.636619,39.9147923 C170.607146,41.5370191 170.046884,43.6037661 168.385239,44.5310007 L22.127534,126.146033 Z" id="Line-2" fill="var(--widget-notconfigured-image-background2)" transform="translate(93.499091, 82.401215) scale(-1, 1) rotate(30.000000) translate(-93.499091, -82.401215) "><\/path>                    <path d="M17.7532266,124.91604 C16.0467266,125.861588 13.8742269,125.313111 12.9008127,123.690982 C11.9273984,122.068851 12.5216818,119.987336 14.2281818,119.041787 L163.97293,36.0702094 C165.67943,35.1246604 167.851929,35.6731378 168.825344,37.2952679 C169.798758,38.9173979 169.204475,40.9989131 167.497974,41.9444621 L17.7532266,124.91604 Z" id="Line-2-Copy" fill="var(--widget-notconfigured-image-background2)" transform="translate(90.863078, 80.493124) rotate(150.000000) translate(-90.863078, -80.493124) "><\/path>                    <polygon id="Path-10" fill="var(--widget-notconfigured-image-background1)" transform="translate(92.932640, 88.746973) scale(-1, 1) rotate(30.000000) translate(-92.932640, -88.746973) " points="46.3849802 106.562039 44.5459721 55.6622667 87.9316091 36.0990169 131.221843 58.9838005 141.319307 109.64091 88.1591894 141.394929"><\/polygon>                    <ellipse id="Oval-Copy-5" stroke="var(--widget-notconfigured-image-background2)" stroke-width="3.3" fill="var(--widget-notconfigured-image-background2)" cx="117.108537" cy="37.4436861" rx="6.28201004" ry="6.35029276"><\/ellipse>                    <ellipse id="Oval-Copy-5" stroke="var(--widget-notconfigured-image-background2)" stroke-width="3.3" fill="var(--widget-notconfigured-image-background2)" cx="140.512837" cy="80.4931244" rx="6.28201004" ry="6.35029276"><\/ellipse>                    <ellipse id="Oval-Copy-5" stroke="var(--widget-notconfigured-image-background2)" stroke-width="3.3" fill="var(--widget-notconfigured-image-background2)" cx="120.864921" cy="129.199209" rx="6.28201004" ry="6.35029276"><\/ellipse>                    <ellipse id="Oval-Copy-6" stroke="var(--widget-notconfigured-image-background2)" stroke-width="3.3" fill="var(--widget-notconfigured-image-background2)" cx="72.5841674" cy="42.2517358" rx="6.28201004" ry="6.35029276"><\/ellipse>                    <ellipse id="Oval-Copy-7" stroke="var(--widget-notconfigured-image-background2)" stroke-width="3.3" fill="var(--widget-notconfigured-image-background2)" cx="47.3583609" cy="82.44353" rx="6.28201004" ry="6.35029276"><\/ellipse>                    <ellipse id="Oval-Copy-8" stroke="var(--widget-notconfigured-image-background2)" stroke-width="3.3" fill="var(--widget-notconfigured-image-background2)" cx="63.1863179" cy="129.199209" rx="6.28201004" ry="6.35029276"><\/ellipse>                <\/g>            <\/g>            <ellipse id="Oval" stroke="#D5D5D5" stroke-width="5" cx="93.9892473" cy="92" rx="88.5107527" ry="89.5"><\/ellipse>        <\/g>    <\/g><\/svg>'},t.prototype.onAxisRangeClick=function(){var n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0]));this.designerInstance.modules.axisRangeSettings.openAxisRangeSettings("updateAxisRangeInfo",n,!1)},t.prototype.updateAxisRangeInfo=function(n){var i=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designerInstance.designerPanel.selectedReportItems[0]),t=n.axisRangeInfo;this.radarPolarChartObj.primaryYAxis.minimum=t.MinValue!==""?parseInt(t.MinValue,10):null;this.radarPolarChartObj.primaryYAxis.maximum=t.MaxValue!==""?parseInt(t.MaxValue,10):null;this.radarPolarChartObj.primaryYAxis.interval=t.Interval!==""?parseInt(t.Interval,10):null;this.radarPolarChartObj.refresh();i.widgetJson.PrimaryAxisRange=t;this.designerInstance.modules.serialization.notifyChange()},t.prototype.getFieldContainer=function(){var r=new BoldBIDashboard.Dashboard.FieldContainerForUI,t,i,u,f;return r.Name="Value",r.CategoryCount=6,r.DisplayName=this.locale.fieldContainer.value,r.ContainerType=FieldContainerType.Numeric,r.Required=!0,t=new BoldBIDashboard.Dashboard.FieldContainerForUI,t.Name="Column",t.DisplayName=this.locale.fieldContainer.column,t.ContainerType=FieldContainerType.Non_Numeric,t.CategoryCount=1,t.Required=!0,t.HasCustomDate=!0,i=new BoldBIDashboard.Dashboard.FieldContainerForUI,i.Name="HiddenColumn",i.DisplayName=this.locale.dataconfiguration.filedContainer.hiddenColumnName,i.ContainerType=FieldContainerType.None,i.QueryOrder=0,i.ShowDescriptionIcon=!0,i.TooltipText=this.locale.fieldContainer.hiddenColumnMessage.radarPolarChart,u=n.prototype.getFilterColumn.call(this),u.HasCustomDate=!0,f=BoldBIDashboard.DashboardUtil.getToolTipFieldsDefaultContainer(),[r,t,i,u,f]},t.prototype.getValueContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Value")},t.prototype.getColumnContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"Column")},t.prototype.getHiddenColumnContainer=function(){return BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo)?null:BoldBIDashboard.Dashboard.WidgetContainerHelper.getFieldContainer(this.DataGroupInfo,"HiddenColumn")},t.prototype.onFieldSettingsClick=function(n,t){if(n.ContainerName==="HiddenColumn")for(var i=0;i<t.length;i++)(t[i].Name==="Sort"||t[i].Name==="DimensionFilters"||t[i].Name==="MeasureFilter"||t[i].Name==="RelativeDateFilter"||t[i].Name==="MeasureFormat")&&(t[i].IsVisible=!1);return t},t.prototype.getJson=function(){return this.widgetJson},t.prototype.setJson=function(t){n.prototype.setJson.call(this,t)},t.prototype.getPropertyPanelItems=function(){return this.getRadarPolarChartPropertyPanel()},t.prototype.updatePropertyChange=function(n,t,i,r){this.radarPolarChartPropertyChange(n,t,i,r)},t.prototype.updateInitialSelection=function(){},t.prototype.clearFilter=function(n){BoldBIDashboard.isNullOrUndefined(this.radarPolarChartObj)||(BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this),this.getRadarPolarChartProperties().SelectedFilterValues=[],this.isCurrentMaster=!1,this.designerInstance.modules.serialization.notifyChange(),BoldBIDashboard.isNullOrUndefined(n)?this.designerInstance.triggerActionCompleteForClearWidgetFilter(this):n&&this.designerInstance.triggerActionCompleteForWidgetFilterInteraction(this),this.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName),this.radarPolarChartObj.selectedDataIndexes.length>0&&(this.radarPolarChartObj.selectedDataIndexes=[]),this.radarPolarChartObj.refresh())},t.prototype.getMobileViewHeight=function(){return this.designerInstance.modules.Mode.designCanvas.width()>this.designerInstance.modules.Mode.designCanvas.height()?this.designerInstance.modules.Mode.designCanvas.height():this.designerInstance.modules.Mode.designCanvas.width()},t.prototype.refresh=function(){this.updateRadarPolarChartSize()},t.prototype.dispose=function(){this.radarPolarChartItemDispose();n.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"DataRequiredMessage",{get:function(){return this.locale.itemPanel.widgetDataRequiredMessage.radarPolarDataRequiredMessage},enumerable:!1,configurable:!0}),t.prototype.onFieldDragDrop=function(){return!0},t.prototype.canCombineRequest=function(){return!0},t.prototype.createRadarPolarContainer=function(t){BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||!BoldBIDashboardDesigner.editManager.isPerformAction?n.prototype.setJson.call(this,t):n.prototype.setJson.call(this,this.bbdesigner$.extend(!0,{},t)));try{this.radarPolarChartItem=BoldBIDashboard.buildTag("div.e-radarpolarchartitem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":this.widgetOrder,"background-color":"transparent"},{id:this.designerId+"radarPolarChartItem"+this.widgetJson.UniqueName});this.radarPolarChartElement=BoldBIDashboard.buildTag("div.chartElement","",{width:"100%",height:"100%","background-color":"transparent","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"100"},{id:this.designerId+"radarPolarChartElement"+this.widgetJson.UniqueName});this.radarPolarChartItem.append(this.radarPolarChartElement);this.contentContainer.append(this.radarPolarChartItem);this.controlContainer.data("widgetInstance",this);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.RadarPolarChart)}catch(i){this.designPanelInstance.logError({Source:this.widgetJson.UniqueName,Error:i,Type:i.name})}},t.prototype.renderComplete=function(){this.IsRendered=!0},t.prototype.pointRegionClick=function(n){var i=[n.pageX,n.pageY],t=[];this.getRadarPolarChartProperties().FilterSettings.ActAsMasterWidget&&t.push(WidgetAction.Filter);this.getRadarPolarChartProperties().UrlLink&&this.getRadarPolarChartProperties().UrlLink.EnableLink&&t.push(WidgetAction.Linking);this.widgetJson.ContainerSettings.ViewData&&t.push(WidgetAction.ViewData);BoldBIDashboard.Dashboard.WidgetHelper.createWidgetActionContextMenu(this.designerInstance,this,this.Name,t,n,i)},t.prototype.processFilterInformation=function(n){var f;if(this.DataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(this.DataGroupInfo.FieldContainers[1])&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0){var e=n.filters,o=this.DataGroupInfo.FieldContainers,i=this.getColumnForWidgetFilterAPI(e,o),t=i[0],r=i[1],u=i[2],s=i[3];return u.length>0?(t=[],r={},console.error("Given column name(s) ["+u+"] were not found in "+this.widgetJson.ContainerSettings.Title),!1):s&&(console.error("ColumnName should not be empty for API filtering"),t.length===0)?!1:(t.length===0&&u.length===0&&(f=o[1].FieldInfos[0],t.push(f),r[f.UniqueColumnName]=e[0].values[0]),this.widgetJson.SelectedFilterValues=[],this.masterFilterWindowInstance.configureSelectedFilterInfo(this.getJson(),t,r),!0)}},t.prototype.performSelectedWidgetAction=function(t,i,r,u){var c=!0,l=this.getHiddenColumnContainer(),o=[],s=[],h,e,f,a,v,y;if(!this.designerInstance.triggerActionBeginForWidgetFilterInteraction(this))if(this.getRadarPolarChartProperties().FilterSettings.ActAsMasterWidget&&i.DataGroupInfo.FieldContainers.length>0&&i.DataGroupInfo.FieldContainers[1].FieldInfos.length>0&&i.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&this.radarPolarChartObj.selectedDataIndexes.length>0&&this.radarPolarChartObj.selectedDataIndexes[0].point===r.pointIndex&&(c=!1,this.radarPolarChartObj.selectedDataIndexes=[],this.widgetJson.SelectedFilterValues=[]),c&&this.getRadarPolarChartProperties().FilterSettings.ActAsMasterWidget&&i.DataGroupInfo.FieldContainers.length>0&&i.DataGroupInfo.FieldContainers[1].FieldInfos.length>0&&i.DataGroupInfo.FieldContainers[0].FieldInfos.length>0||!BoldBIDashboard.isNullOrUndefined(this.getRadarPolarChartProperties().UrlLink)&&this.getRadarPolarChartProperties().UrlLink.EnableLink&&!this.getRadarPolarChartProperties().FilterSettings.ActAsMasterWidget||this.widgetJson.ContainerSettings.ViewData)switch(t){case WidgetAction.Filter.toString():if(i.isCurrentMaster=!0,this.radarPolarChartObj.selectedDataIndexes=[{point:r.pointIndex}],this.getRadarPolarChartProperties().SelectedFilterValues=[],h=this.DataGroupInfo.FieldContainers[1].FieldInfos[0],o.push(h),s[h.UniqueColumnName]=r.point.x,l.FieldInfos.length>0)for(e=l.FieldInfos,f=0;f<e.length;f++)s[e[f].UniqueColumnName]=this.getHiddenColumnSelectedValue(r,e[f].UniqueColumnName),o.push(e[f]);n.prototype.performInteraction.call(this,i,o,s);break;case WidgetAction.Linking.toString():i.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(this.radarPolarChartObj.selectedDataIndexes=[{point:r.pointIndex}],a=this.getLinkingDataforRadarPolar(r),n.prototype.performLinking.call(this,a),this.radarPolarChartObj.selectedDataIndexes=[],this.radarPolarChartObj.refresh());break;case WidgetAction.ViewData.toString():i.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.design&&(v=u.modules.viewDataDialog,y=this.showSelectItemsInViewData(r),v.showViewDataPopup(i,!1,y,!0),this.radarPolarChartObj.refresh())}else this.getRadarPolarChartProperties().FilterSettings.ActAsMasterWidget&&this.radarPolarChartObj.selectedDataIndexes.length===0&&(BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(i),i.masterFilterWindowInstance.doInteraction(this.widgetJson.UniqueName),this.designerInstance.modules.serialization.notifyChange())},t.prototype.showSelectItemsInViewData=function(n){var t=[];return BoldBIDashboard.isNullOrUndefined(n)||t.push({selectedItem:n.point.x,columnId:this.DataGroupInfo.FieldContainers[1].FieldInfos[0].Id,UniqueColumnName:this.DataGroupInfo.FieldContainers[1].FieldInfos[0].UniqueColumnName}),t},t.prototype.setTooltipValues=function(n){var t=0;this.bbdesigner$(this.radarPolarChartElement[0]).css({overflow:"initial","z-index":"1000"});this.DataGroupInfo.FieldContainers.length>t&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>t&&(n.point.seriesIndex=n.series.index,n.point.seriesInfo=this.DataGroupInfo.FieldContainers[0].FieldInfos[n.series.index],n.point.designer=this.designerInstance,n.point.dataSourceName=this.DataGroupInfo.DataSourceName,n.point.columnBindings=this.DataColumnBindings,n.point.toolTipFields=this.radarPolarChartObj.series[n.series.index].dataSource[n.point.index].toolTipFields,n.point.toolTipColumns=this.DataGroupInfo.FieldContainers[4].FieldInfos,n.point.radarPolarinstance=this)},t.prototype.generateTooltip=function(){var r,u,f=0,i,t=[],n;if(i='<script id="template_'+this.bbdesigner$(this.radarPolarChartElement).attr("id")+'_tooltip" type="text/x-template">',this.radarPolarChartElement.find("#template_"+this.bbdesigner$(this.radarPolarChartElement).attr("id")+"_tooltip").remove(),this.DataGroupInfo.FieldContainers.length>f&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>f&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>f)for(t.push((r={},r[this.DataGroupInfo.FieldContainers[1].FieldInfos[0].DisplayName]="${x}",r)),t.push({"${  BoldBIDashboardDesigner.bbdesignerstatic$.views.helpers.getEJ2ChartSeriesName(seriesInfo,columnBindings)}":"${  BoldBIDashboardDesigner.bbdesignerstatic$.views.helpers.formatEJ2ChartTooltip(yValue,seriesIndex,seriesInfo,designer,dataSourceName,radarPolarinstance)}"}),n=0;n<this.DataGroupInfo.FieldContainers[4].FieldInfos.length;n++)this.DataGroupInfo.FieldContainers[4].FieldInfos[n].IsFilterColumn||t.push((u={},u[this.DataGroupInfo.FieldContainers[4].FieldInfos[n].DisplayName]="${ BoldBIDashboardDesigner.bbdesignerstatic$.views.helpers.formatEJ2ChartAdditionalTooltip(toolTipFields,toolTipColumns,index="+n+" )}",u));else t.push({"${x}":"${y}"});i+=this.widgetHelper.generateToolTipTemplate(t,this.bbdesigner$(this.radarPolarChartElement).attr("id"),1e3);i+="<\/script>";this.bbdesigner$(this.radarPolarChartElement).append(i)},t.prototype.getLinkingDataforRadarPolar=function(n){var u=this.getJson(),s=this.getHiddenColumnContainer(),i={isEnabled:!1,parameterDetails:[],url:"",urlLinkInfo:[]},o,t,e;if(!BoldBIDashboard.isNullOrUndefined(u)&&(o=this.designerInstance.modules.util.getSourceData(this.DataGroupInfo,!1,!1,!0),!BoldBIDashboard.isNullOrUndefined(u.UrlLink.UrlPath)&&u.UrlLink.UrlPath!=="")){t=o.filter(function(n){return u.UrlLink.PassingParameters.indexOf(n.Value)!==-1});i.url=u.UrlLink.UrlPath;i.isEnabled=!0;var f=s.FieldInfos,h=function(u){var e,o;if(f.length>0&&f.filter(function(n){return n.UniqueColumnName===t[u].Id}))for(e=0;e<f.length;e++)t[e].Id===f[e].UniqueColumnName&&i.parameterDetails.push({parameter:t[e].Value,value:r.getHiddenColumnSelectedValue(n,t[e].Id)});else{if(t[u].Id===r.DataGroupInfo.FieldContainers[1].FieldInfos[0].UniqueColumnName)return i.parameterDetails.push({parameter:r.DataGroupInfo.FieldContainers[1].FieldInfos[0].Name,value:n.point.x}),"continue";for(o=0;o<r.DataGroupInfo.FieldContainers[0].FieldInfos.length;o++)t[u].Id===r.DataGroupInfo.FieldContainers[0].FieldInfos[o].UniqueColumnName&&i.parameterDetails.push({parameter:r.DataGroupInfo.FieldContainers[0].FieldInfos[o].Name,value:r.radarPolarChartObj.series[o].dataSource[n.pointIndex].y})}},r=this;for(e=0;e<t.length;e++)h(e)}return i.urlLinkInfo=u.UrlLink,i},t.prototype.getHiddenColumnSelectedValue=function(n,t){var u=this,f=this.getColumnContainer(),e=this.getValueContainer(),o=JSON.parse(this.dataValues.data),i=this.radarPolarChartObj.series[n.seriesIndex].dataSource[n.pointIndex],r=o.filter(function(t){return t[f.FieldInfos[0].UniqueColumnName]===i.x&&t[e.FieldInfos[n.seriesIndex].UniqueColumnName]===u.valueLabelFormatter(null,n.seriesIndex,i.y)});return r.length>0?r[0][t]:""},t.prototype.mouseleave=function(){this.bbdesigner$(this.radarPolarChartElement[0]).css({"z-index":"100"})},t.prototype.mousemove=function(){this.bbdesigner$(this.radarPolarChartElement[0]).css({overflow:"initial","z-index":"1000"})},t.prototype.chartAxisFormatter=function(n){if(n.axis.valueType==="Double"){var t=new MeasureFormatting;n.text=BoldBIDashboard.DashboardUtil.formattedText(n.value,t.Culture,t.DecimalPoints,t.FormatType,t.DecimalSeparator,t.GroupSeparator,t.Prefix,t.Suffix,t.Unit,!0,this.designerInstance,t.EnableLakhsAndCroreRep)}},t.prototype.valueLabelFormatter=function(n,t,i){var u;if(t===void 0&&(t=null),i===void 0&&(i=null),u=BoldBIDashboard.isNullOrUndefined(t)?n.series.index:t,this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>=u+1){var r=this.DataGroupInfo.FieldContainers[0].FieldInfos[u].MeasureFormatting,f=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(r.Prefix),this.DataGroupInfo.DataSourceName),e=this.designerInstance.checkAndUpdateParameterValue(this.getLabelParamValues(r.Suffix),this.DataGroupInfo.DataSourceName);if(BoldBIDashboard.isNullOrUndefined(t))n.text=BoldBIDashboard.DashboardUtil.formattedText(parseFloat(n.text),r.Culture,r.DecimalPoints,r.FormatType,r.DecimalSeparator,r.GroupSeparator,f,e,r.Unit,!0,this.designerInstance,r.EnableLakhsAndCroreRep);else return BoldBIDashboard.DashboardUtil.formattedText(parseFloat(i),r.Culture,r.DecimalPoints,r.FormatType,r.DecimalSeparator,r.GroupSeparator,f,e,r.Unit,!0,this.designerInstance,r.EnableLakhsAndCroreRep)}},t.prototype.restrictControlResize=function(n){n.cancelResizedEvent=!0},t.prototype.getRadarPolarChartProperties=function(){return this.widgetJson},t.prototype.radarPolarChartItemDispose=function(){BoldBIDashboard.isNullOrUndefined(this.radarPolarChartObj)||(this.radarPolarChartObj.destroy(),this.radarPolarChartObj=null);this.designerInstance.modules.util.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.RadarPolarChart)},t.prototype.updateRadarPolarChartSize=function(){var n=150;if(!BoldBIDashboard.isNullOrUndefined(this.radarPolarChartObj))if(BoldBIDashboard.Dashboard.WidgetContainerHelper.widgetHasError(this))this.widgetContainerHelper.showControlError(this,this.dataValues);else if(BoldBIDashboard.isNullOrUndefined(this.dataValues)||BoldBIDashboard.isNullOrUndefined(this.dataValues.noDataAvailable)||!this.dataValues.noDataAvailable)this.ControlContainer.width()<n||this.ControlContainer.height()<n?(this.radarPolarChartObj.primaryXAxis.visible=!1,this.radarPolarChartObj.primaryXAxis.majorTickLines.height=0,this.radarPolarChartObj.primaryXAxis.labelPlacement="",this.radarPolarChartObj.primaryYAxis.visible=!1,this.radarPolarChartObj.primaryYAxis.majorTickLines.height=0,this.radarPolarChartObj.primaryYAxis.lineStyle.width=0,this.radarPolarChartObj.margin.left=0,this.radarPolarChartObj.margin.top=0,this.radarPolarChartObj.margin.bottom=0,this.radarPolarChartObj.margin.right=0,this.updateFontStyle(),this.radarPolarChartObj.refresh(),this.updateLegendVisibility(this.ControlContainer.width(),this.ControlContainer.height())):(this.radarPolarChartObj.primaryXAxis.visible=this.getRadarPolarChartProperties().CategoryAxisSettings.IsEnabled,this.radarPolarChartObj.primaryXAxis.majorTickLines.height=this.getRadarPolarChartProperties().CategoryAxisSettings.IsEnabled?5:0,this.radarPolarChartObj.primaryXAxis.labelPlacement="OnTicks",this.radarPolarChartObj.primaryYAxis.visible=this.getRadarPolarChartProperties().PrimaryValueAxisSettings.IsEnabled,this.radarPolarChartObj.primaryYAxis.majorTickLines.height=this.getRadarPolarChartProperties().PrimaryValueAxisSettings.IsEnabled?5:0,this.radarPolarChartObj.primaryYAxis.lineStyle.width=this.getRadarPolarChartProperties().PrimaryValueAxisSettings.IsEnabled?1:0,this.radarPolarChartObj.margin.left=10,this.radarPolarChartObj.margin.top=10,this.radarPolarChartObj.margin.bottom=10,this.radarPolarChartObj.margin.right=10,this.updateFontStyle(),this.radarPolarChartObj.refresh(),this.updateLegendVisibility(this.ControlContainer.width(),this.ControlContainer.height()));else return},t.prototype.updateFontStyle=function(){var t,n;if(!this.designerInstance.canApplyTheme()){if(t=this.getFontSizeBasedOnResolution(),this.getRadarPolarChartProperties().ShowValueLabel)for(n=0;n<this.radarPolarChartObj.series.length;n++)this.radarPolarChartObj.series[n].marker.dataLabel.font.size=t,this.radarPolarChartObj.series[n].marker.dataLabel.font.fontWeight="400";this.radarPolarChartObj.primaryXAxis.labelStyle.size=this.radarPolarChartObj.primaryYAxis.labelStyle.size=this.radarPolarChartObj.legendSettings.textStyle.size=t;this.radarPolarChartObj.primaryXAxis.labelStyle.fontWeight=this.radarPolarChartObj.primaryYAxis.labelStyle.fontWeight="400";this.radarPolarChartObj.legendSettings.textStyle.fontWeight="500"}},t.prototype.updateLegendVisibility=function(n,t){if(!BoldBIDashboard.isNullOrUndefined(this.radarPolarChartObj)){var i=190;this.radarPolarChartObj.legendSettings.visible=t>i&&n>i?this.getRadarPolarChartProperties().ShowLegend:!1}},t.prototype.renderRadarPolarWidget=function(n){var r=this.getRadarPolarChartProperties().LegendPosition,t=190,i=this.getFontSizeBasedOnResolution();this.radarPolarChartObj=new ejdashboard.charts.Chart({margin:{top:this.ContentContainer.height()<t||this.ContentContainer.height()<t?0:10,right:this.ContentContainer.height()<t||this.ContentContainer.height()<t?0:10,bottom:this.ContentContainer.height()<t||this.ContentContainer.height()<t?0:10,left:this.ContentContainer.height()<t||this.ContentContainer.height()<t?0:10},background:"transparent",primaryXAxis:{valueType:"Category",visible:this.ContentContainer.height()<t||this.ContentContainer.height()<t?!1:this.getRadarPolarChartProperties().CategoryAxisSettings.IsEnabled,majorTickLines:{height:this.ContentContainer.height()<t||this.ContentContainer.height()<t?0:this.getRadarPolarChartProperties().CategoryAxisSettings.IsEnabled?5:0,color:this.themeHelper.getMajorTickLinesColor(),width:this.ContentContainer.height()<t||this.ContentContainer.height()<t?.7:1},majorGridLines:{width:this.getRadarPolarChartProperties().CategoryAxisGridLines?1:0,color:this.themeHelper.getMajorGridLinesColor()},isInversed:this.getRadarPolarChartProperties().CategoryAxisSettings.InverseAxis,interval:1,labelStyle:{size:i,color:this.themeHelper.getAxisLabelFontColor(),fontFamily:"var(--designer-font)",fontWeight:"400"},labelIntersectAction:"Hide",enableTrim:!0,labelPlacement:this.ContentContainer.height()<t||this.ContentContainer.height()<t?"BetweenTicks":"OnTicks"},primaryYAxis:{visible:this.ContentContainer.height()<t||this.ContentContainer.height()<t?!1:this.getRadarPolarChartProperties().PrimaryValueAxisSettings.IsEnabled,lineStyle:{width:this.ContentContainer.height()<t||this.ContentContainer.height()<t?0:this.getRadarPolarChartProperties().PrimaryValueAxisSettings.IsEnabled?1:0,color:"rgb(142,142,142)"},majorTickLines:{height:this.ContentContainer.height()<t||this.ContentContainer.height()<t?0:this.getRadarPolarChartProperties().PrimaryValueAxisSettings.IsEnabled?5:0,color:this.themeHelper.getMajorTickLinesColor(),width:this.ContentContainer.height()<t||this.ContentContainer.height()<t?.7:1},minimum:this.getRadarPolarChartProperties().PrimaryAxisRange.MinValue!==""?parseInt(this.getRadarPolarChartProperties().PrimaryAxisRange.MinValue,10):null,maximum:this.getRadarPolarChartProperties().PrimaryAxisRange.MaxValue!==""?parseInt(this.getRadarPolarChartProperties().PrimaryAxisRange.MaxValue,10):null,interval:this.getRadarPolarChartProperties().PrimaryAxisRange.Interval!==""?parseInt(this.getRadarPolarChartProperties().PrimaryAxisRange.Interval,10):null,majorGridLines:{width:this.getRadarPolarChartProperties().PrimaryValueGridLines?1:0,color:"rgb(223, 223, 223)"},labelStyle:{size:i,color:this.themeHelper.getAxisLabelFontColor(),fontWeight:"400"}},series:n,legendSettings:{visible:this.ContentContainer.height()<t||this.ContentContainer.height()<t?!1:this.getRadarPolarChartProperties().ShowLegend,position:r,padding:12,textStyle:{color:this.themeHelper.getLegendFontColor(),size:i,fontWeight:"500"}},tooltip:{enable:this.getRadarPolarChartProperties().ShowTooltip,template:"#template_"+this.bbdesigner$(this.radarPolarChartElement).attr("id")+"_tooltip",fadeOutDuration:10},tooltipRender:this.bbdesigner$.proxy(this.setTooltipValues,this),loaded:this.bbdesigner$.proxy(this.renderComplete,this),pointClick:this.bbdesigner$.proxy(this.pointRegionClick,this),axisLabelRender:this.bbdesigner$.proxy(this.chartAxisFormatter,this),chartMouseLeave:this.bbdesigner$.proxy(this.mouseleave,this),chartMouseMove:this.bbdesigner$.proxy(this.mousemove,this),textRender:this.bbdesigner$.proxy(this.valueLabelFormatter,this),isMultiSelect:!1,selectionMode:this.widgetJson.FilterSettings.ActAsMasterWidget?"Cluster":"None",beforeResize:this.bbdesigner$.proxy(this.restrictControlResize,this)});this.updateCustomLegendSettingsValue();this.setRadarPolarInitialSelection(this.dataValues);this.updateDefaultColorsToProperty(this);this.applyRadarPolarFillColor(this.designerInstance.isDarkTypeTheme());this.radarPolarChartObj.appendTo(this.radarPolarChartElement[0]);this.generateTooltip();this.designerInstance.model.mode!==BoldBIDashboard.Designer.mode.view&&(this.propertyPanel.updateCategoryVisibility("RadarPolarChart","SeriesPalette",!0),this.propertyPanel.updateItemVisibility("RadarPolarChart","LegendSettings","CustomLegend",this.getRadarPolarChartProperties().ShowLegend),this.propertyPanel.updateItemVisibility("RadarPolarChart","BasicSettings","ShowMarker",this.getRadarPolarChartProperties().ChartType==="Column"||this.getRadarPolarChartProperties().ChartType==="StackingColumn"||this.getRadarPolarChartProperties().ChartType==="Scatter"?!1:!0),this.setPropertyElement("SeriesPalette","ColorSettings"))},t.prototype.updateRadarPolarChartData=function(n){var r,e,u,f,t,i;this.dataValues=n;r=[];this.contentContainer.css({display:"block"});if(BoldBIDashboard.Dashboard.WidgetContainerHelper.hideNoDataDisplay(this),this.designerInstance.modules.serialization.updateWidgetData(this.widgetJson,this.DataGroupInfo),BoldBIDashboard.isNullOrUndefined(this.dataValues.Error)||this.dataValues.Error)BoldBIDashboard.isNullOrUndefined(this.dataValues.Message)||(BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.widgetContainerHelper.showControlError(this,this.dataValues));else{if(this.contentContainer.find(".bbi-dbrd-control-error").remove(),this.radarPolarChartItem.show(),this.dataValues.noDataAvailable)this.radarPolarChartItem.hide(),BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),BoldBIDashboard.Dashboard.WidgetContainerHelper.showNoDataDisplay(this),this.IsRendered=!0;else if(BoldBIDashboard.isNullOrUndefined(this.dataValues)||this.dataValues.data==="[]"||!BoldBIDashboard.isNullOrUndefined(this.dataValues.isDataSetEmpty)||typeof this.dataValues=="string"&&this.dataValues.indexOf("Sf_Exception")!==-1)(this.dataValues.data==="[]"&&this.dataValues.columnBindings==="{}"||!BoldBIDashboard.isNullOrUndefined(this.dataValues.isDataSetEmpty)&&this.dataValues.isDataSetEmpty)&&(this.propertyPanel.updateItemVisibility("RadarPolarChart","LegendSettings","CustomLegend",!1),this.propertyPanel.updateCategoryVisibility("RadarPolarChart","SeriesPalette",!1),this.getRadarPolarChartProperties().DefaultColors=[]);else if(this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0){for(e=n.widgetData.length,BoldBIDashboard.Dashboard.WidgetContainerHelper.removeWidgetNotConfiguredClass(this),this.updateDefaultColorsToProperty(this),u=this.themeHelper.getRadarPolarDataLabelFont(),f=0;f<e;f++){if(t=JSON.parse(n.widgetData[f]),t.type=this.getRadarPolarChartProperties().DrawType!==""?this.getRadarPolarChartProperties().DrawType:"Polar",t.drawType=this.getRadarPolarChartProperties().ChartType!==""?this.getRadarPolarChartProperties().ChartType:"Area",t.width=this.getRadarPolarChartProperties().ChartType==="Line"||this.getRadarPolarChartProperties().ChartType==="Spline"?2:1,!BoldBIDashboard.isNullOrUndefined(this.getRadarPolarChartProperties().DefaultColors)&&this.getRadarPolarChartProperties().DefaultColors.length>0)for(i=0;i<this.getRadarPolarChartProperties().DefaultColors.length;i++)t.id===this.getRadarPolarChartProperties().DefaultColors[i].Name&&(t.fill=this.getRadarPolarChartProperties().DefaultColors[i].Color);else BoldBIDashboard.isNullOrUndefined(this.radarPolarChartObj)&&(t.fill="#F67280");(this.getRadarPolarChartProperties().ChartType==="Line"||this.getRadarPolarChartProperties().ChartType==="Spline")&&(this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage)&&(t.dashArray="1,0");t.xName="x";t.yName="y";t.marker={visible:this.getRadarPolarChartProperties().ChartType==="Column"||this.getRadarPolarChartProperties().ChartType==="StackingColumn"||this.getRadarPolarChartProperties().ChartType==="Scatter"?!1:this.getRadarPolarChartProperties().ShowMarker,border:{width:2},dataLabel:{visible:this.getRadarPolarChartProperties().ShowValueLabel,font:{size:u.size,fontWeight:u.weight,fontFamily:u.family,color:this.themeHelper.getDataLabelFontColor()},alignment:"Near",position:"Auto"}};t.animation={enable:this.designerInstance.model.dashboardFromData.isExportPdf||this.designerInstance.model.dashboardFromData.isExportImage?!1:this.getRadarPolarChartProperties().EnableAnimation};t.opacity=this.getRadarPolarChartProperties().ChartType==="Area"||this.getRadarPolarChartProperties().ChartType==="StackingArea"?.5:1;t.legendShape=this.getRadarPolarChartProperties().LegendShape.replace(/\s/g,"");r.push(t)}BoldBIDashboard.isNullOrUndefined(this.radarPolarChartObj)?this.renderRadarPolarWidget(r):(this.radarPolarChartObj.series=r,this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.propertyPanel.updateCategoryVisibility("RadarPolarChart","SeriesPalette",!0),this.propertyPanel.updateItemVisibility("RadarPolarChart","LegendSettings","CustomLegend",this.getRadarPolarChartProperties().ShowLegend),this.propertyPanel.updateItemVisibility("RadarPolarChart","BasicSettings","ShowMarker",this.getRadarPolarChartProperties().ChartType==="Column"||this.getRadarPolarChartProperties().ChartType==="StackingColumn"||this.getRadarPolarChartProperties().ChartType==="Scatter"?!1:!0)),this.generateTooltip(),this.setRadarPolarInitialSelection(n),this.updateCustomLegendSettingsValue(),this.applyRadarPolarFillColor(this.designerInstance.isDarkTypeTheme()),this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.setPropertyElement("SeriesPalette","ColorSettings"),this.updateRadarPolarChartSize())}else this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&(this.propertyPanel.updateItemVisibility("RadarPolarChart","LegendSettings","CustomLegend",!1),this.propertyPanel.updateCategoryVisibility("RadarPolarChart","SeriesPalette",!1)),this.getRadarPolarChartProperties().DefaultColors=[];this.designerInstance.modules.util.updateAction("RadarPolarChart","Link","Link")}},t.prototype.setPropertyElement=function(n,t,i){var r,u;this.propertyPanel.canUpdate=!1;r=this.propertyPanel.getPropertyElement(this.getRadarPolarChartPropertyPanel(),t,n,-1);r.isVisible=i;u=this.bbdesigner$.extend(!0,{},r);u.categoryName=n;this.propertyPanel.updatePropertyValue(u,"RadarPolarChart",i);this.propertyPanel.canUpdate=!0},t.prototype.setRadarPolarInitialSelection=function(n){var t=this.getRadarPolarChartProperties().SelectedFilterValues,u,i,r;if(!BoldBIDashboard.isNullOrUndefined(this.radarPolarChartObj)&&this.getRadarPolarChartProperties().FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0){if(n.widgetData.length>0)for(u=JSON.parse(n.widgetData[0]),i=0;i<u.dataSource.length;i++)if(r=null,t[0].InitialDimensionFilter!==null&&t[0].InitialDimensionFilter.Text.length>0&&(r=t[0].InitialDimensionFilter.Text[0].toString()),t[0].InitialDateFilter!==null&&t[0].InitialDateFilter.DisplayDateFilterList.length>0&&(r=t[0].InitialDateFilter.DateFilterList[0]),u.dataSource[i].x===r){this.radarPolarChartObj.selectedDataIndexes=[{point:i}];break}BoldBIDashboard.Dashboard.WidgetHelper.enableClearFilter(this)}else BoldBIDashboard.Dashboard.WidgetHelper.disableClearFilter(this),this.radarPolarChartObj.selectedDataIndexes.length>0&&(this.radarPolarChartObj.selectedDataIndexes=[])},t.prototype.getRadarPolarChartPropertyPanel=function(){var i=null,t;return i=this.getRadarPolarChartProperties().ChartType==="StackingColumn"?"Stacked Column":this.getRadarPolarChartProperties().ChartType==="StackingArea"?"Stacked Area":this.getRadarPolarChartProperties().ChartType,t={Header:this.widgetJson.ContainerSettings.Title,SubTitle:this.widgetJson.ContainerSettings.SubTitle,Description:this.widgetJson.ContainerSettings.Description,Type:"RadarPolarChart",Items:[{CategoryName:"Basic Settings",DisplayName:this.locale.propertyPanel.basicSettingsText,Items:[{name:"ShowTooltip",displayName:this.locale.propertyPanel.basicSettings.showTooltip,value:this.getRadarPolarChartProperties().ShowTooltip,itemType:"bool"},{name:"EnableAnimation",displayName:this.locale.propertyPanel.basicSettings.enableAnimation,isVisible:!0,value:this.getRadarPolarChartProperties().EnableAnimation,itemType:"bool"},{name:"ShowMarker",displayName:this.locale.propertyPanel.basicSettings.showMarker,isVisible:this.getRadarPolarChartProperties().ChartType==="Column"||this.getRadarPolarChartProperties().ChartType==="StackingColumn"||this.getRadarPolarChartProperties().ChartType==="Scatter"?!1:!0,value:this.getRadarPolarChartProperties().ShowMarker,itemType:"bool"},{name:"ShowValueLabel",displayName:this.locale.propertyPanel.basicSettings.showValueLabel,isVisible:!0,value:this.getRadarPolarChartProperties().ShowValueLabel,itemType:"bool"},{name:"DrawType",displayName:this.locale.propertyPanel.basicSettings.drawType,value:this.getRadarPolarChartProperties().DrawType,itemType:"dropdown",valueList:["Polar","Radar"]},{name:"ChartType",displayName:this.locale.propertyPanel.basicSettings.chartType,value:i,itemType:"dropdown",valueList:["Line","Area","Spline","Scatter"]},]},{CategoryName:"Legend Settings",DisplayName:this.locale.propertyPanel.legendSettingsText,Items:[{name:"ShowLegend",displayName:this.locale.propertyPanel.basicSettings.showLegend,value:BoldBIDashboard.isNullOrUndefined(this.getRadarPolarChartProperties().ShowLegend)?!1:this.getRadarPolarChartProperties().ShowLegend,itemType:"bool"},{name:"LegendPosition",displayName:this.locale.propertyPanel.basicSettings.position,isVisible:this.getRadarPolarChartProperties().ShowLegend,value:this.getRadarPolarChartProperties().LegendPosition,itemType:"dropdown",valueList:["Bottom","Left","Right","Top"]},{name:"LegendShape",displayName:this.locale.propertyPanel.basicSettings.legendShapeText,isVisible:!BoldBIDashboard.isNullOrUndefined(this.getRadarPolarChartProperties().ShowLegend)&&this.getRadarPolarChartProperties().ShowLegend,itemType:"dropdown",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendShape,this.getRadarPolarChartProperties().LegendShape),valueList:["Circle","Series Type"]},{name:"CustomLegend",displayName:this.locale.propertyPanel.basicSettings.legend,isVisible:!BoldBIDashboard.isNullOrUndefined(this.getRadarPolarChartProperties().ShowLegend)&&this.getRadarPolarChartProperties().ShowLegend&&this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0?!0:!1,itemType:"button",buttonText:this.locale.propertyPanel.customizeBtnText,callbackInstance:this,callbackMethod:"onCustomLegendClick"},]},{CategoryName:"Axis",DisplayName:this.locale.propertyPanel.axisText,Items:[{name:"ShowXAxis",displayName:this.locale.propertyPanel.showCategoryAxis,value:BoldBIDashboard.isNullOrUndefined(this.getRadarPolarChartProperties().CategoryAxisSettings.IsEnabled)?!1:this.getRadarPolarChartProperties().CategoryAxisSettings.IsEnabled,itemType:"bool"},{name:"ShowYAxis",displayName:this.locale.propertyPanel.gridLineSettings.primaryValueAxis,value:BoldBIDashboard.isNullOrUndefined(this.getRadarPolarChartProperties().PrimaryValueAxisSettings.IsEnabled)?!1:this.getRadarPolarChartProperties().PrimaryValueAxisSettings.IsEnabled,itemType:"bool"},{name:"Axis Range",displayName:this.locale.propertyPanel.axisSettings.primaryAxisRange,isVisible:!0,value:this.getRadarPolarChartProperties().PrimaryValueAxisSettings.IsEnabled,itemType:"object",callbackInstance:this,callbackMethod:"renderPrimaryAxisRange"},]},{CategoryName:"Grid Lines",DisplayName:this.locale.propertyPanel.gridLinesText,Items:[{name:"ShowXGridLine",displayName:this.locale.propertyPanel.gridLineSettings.categoryAxis,value:BoldBIDashboard.isNullOrUndefined(this.getRadarPolarChartProperties().CategoryAxisGridLines)?!1:this.getRadarPolarChartProperties().CategoryAxisGridLines,itemType:"bool"},{name:"ShowYGridLine",displayName:this.locale.propertyPanel.gridLineSettings.primaryValueAxis,value:BoldBIDashboard.isNullOrUndefined(this.getRadarPolarChartProperties().PrimaryValueGridLines)?!1:this.getRadarPolarChartProperties().PrimaryValueGridLines,itemType:"bool"},]},{CategoryName:"Series Palette",DisplayName:this.locale.propertyPanel.seriesPaletteText,IsVisible:this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0?!0:!1,Items:[{name:"ColorSettings",callbackInstance:this,callbackMethod:"renderDefaultColorSettings",itemType:"object",elementType:"Chart"}]},{CategoryName:"Link",DisplayName:this.locale.propertyPanel.linkText,Items:[{name:"Link",value:n.prototype.useExistingLink.call(this),category:"Item",itemType:"link",enableMode:LinkEnableMode.Row}]},]},t.Items.push(this.containerPropertyItem.getFilterSettingsItems(this.widgetJson.FilterSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo)),t.Items.push(this.containerPropertyItem.getContainerSettingItems(this.widgetJson.ContainerSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo)),t.Items.push(this.containerPropertyItem.getContainerActionsItems(this.widgetJson.ContainerSettings,this.controlContainer,this.controlHeader,this.DataGroupInfo)),t.Items.push(BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem.getNoDataContainerActionsProperty(this.locale.propertyPanel.noDataContainerText)),t},t.prototype.renderPrimaryAxisRange=function(n,t,i){this.renderAxisRange(n,t,i,!1)},t.prototype.renderAxisRange=function(n,t,i,r){var l=r?"SecondaryAxisRangeElement":"AxisRange",u=r?"SecondaryAxisRange":"PrimaryAxisRange",s,h,f,c;if(BoldBIDashboard.isNullOrUndefined(n))this.propertyPanel.updateItemVisibility(this.Type,"Axis","AxisRange",this.getRadarPolarChartProperties().PrimaryValueAxisSettings.IsEnabled);else{var e=BoldBIDashboard.buildTag("div.e-dbrd-axis-range-row-element","",{display:this.getRadarPolarChartProperties().PrimaryValueAxisSettings.IsEnabled?"inline-block":"none"},{id:this.designerId+"_RadarPolarChart_"+i.categoryName+"_"+l+"_container"}),o=BoldBIDashboard.buildTag("div.e-dbrd-axis-range-label-container","",{width:(this.propertyPanel.propertyPanelContainer.width()-33)*47/100+"px"}),a=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily e-dbrd-axis-range-label-element","Axis Range",{"max-width":(this.propertyPanel.propertyPanelContainer.width()-33)*47/100-15+"px"},{id:this.designerId+"_chart_"+i.categoryName+"_"+i.name+"_childElement","for":this.designerId+"_chart_"+i.categoryName+"_"+i.name});o.append(a);s=BoldBIDashboard.buildTag("div.e-dbrd-axis-range-check-box-container","",{},{id:this.designerId+"_chart_"+i.categoryName+"_"+i.name+"_parent"});h=BoldBIDashboard.buildTag("input","",{},{id:this.designerId+"_chart_"+i.categoryName+"_"+i.name,type:"checkbox"});s.append(h);f=BoldBIDashboard.buildTag("div.e-dbrd--axis-range-button-container","",{width:(this.propertyPanel.propertyPanelContainer.width()-33)*47/100+"px",display:"inline-block"},{id:this.designerId+"_"+t+"_"+i.categoryName+"_"+u+"_container"});c=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-small e-chart-axis-range-button "+u,this.locale.propertyPanel.axisSettings.primaryAxisEditRangeText,{display:"inline-block"},{id:this.designerId+"_"+t+"_"+u+"_container",type:"button"});f.append(c);e.append(o,f);n.append(e)}},t.prototype.radarPolarChartPropertyChange=function(t,i,r){switch(t){case"Name":this.widgetJson.ContainerSettings.Title=r;this.propertyPanel.setTitle(this.widgetJson);break;case"Description":this.propertyPanel.setDescription(this.widgetJson,r);break;case"ItemLink":n.prototype.updateLink.call(this,r);break;case"SubTitle":this.propertyPanel.setSubTitle(this.widgetJson,r);break;case"EnableAnimation":this.updateRadarPolarChartAnimation(r);break;case"ShowTooltip":this.updateShowTooltip(r);break;case"ShowMarker":this.updateChartMarker(r);break;case"ShowLegend":this.updateRadarPolarChartLegendVisiblity(r);break;case"DrawType":this.updateDrawType(r);break;case"ChartType":this.updateChartType(r);break;case"LegendPosition":this.updateLegendPosition(r);break;case"ShowValueLabel":this.showValueLabel(r);break;case"ShowXAxis":this.showXAxis(r);break;case"ShowXGridLine":this.showXGridLine(r);break;case"ShowYAxis":this.showYAxis(r);break;case"ShowYGridLine":this.showYGridLine(r);break;case"ActAsMasterWidget":this.widgetJson.FilterSettings.ActAsMasterWidget=r;this.updateMasterWidget(r);break;case"FieldNameChange":this.updateDisplayTextBasedProperties();break;case"LegendShape":this.updateLegendShape(r)}},t.prototype.updateMasterWidget=function(n){this.radarPolarChartObj.selectionMode=n?"Cluster":"None";this.radarPolarChartObj.refresh()},t.prototype.updateDisplayTextBasedProperties=function(){this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0&&this.updateChartLegends();this.generateTooltip()},t.prototype.updateChartLegends=function(){var t,n,i,r;if(!BoldBIDashboard.isNullOrUndefined(this.getRadarPolarChartProperties().EditLegend)&&this.getRadarPolarChartProperties().EditLegend.GroupValues.Values.length>0)for(t=0;t<this.getRadarPolarChartProperties().EditLegend.GroupValues.Values.length;t++)n=this.getRadarPolarChartProperties().EditLegend.GroupValues.Values[t],i=BoldBIDashboard.DashboardUtil.getFieldBasedonUniqueColumnName(n.Id,this.DataGroupInfo),BoldBIDashboard.isNullOrUndefined(i)||(r=i.DisplayName,n.Name=r,n.IsModified||(n.Value=r));this.updateCustomLegendValuesToChartObj(this.radarPolarChartObj)},t.prototype.showXAxis=function(n){this.getRadarPolarChartProperties().CategoryAxisSettings.IsEnabled=n;this.radarPolarChartObj.primaryXAxis.visible=n;this.radarPolarChartObj.primaryXAxis.lineStyle.width=n?1:0;this.radarPolarChartObj.primaryXAxis.majorTickLines.width=n?1:0;this.radarPolarChartObj.primaryXAxis.minorTickLines.width=n?1:0;this.radarPolarChartObj.primaryXAxis.majorTickLines.height=n?5:0},t.prototype.showXGridLine=function(n){this.getRadarPolarChartProperties().CategoryAxisGridLines=n;this.radarPolarChartObj.primaryXAxis.majorGridLines.width=n?1:0},t.prototype.showYAxis=function(n){this.getRadarPolarChartProperties().PrimaryValueAxisSettings.IsEnabled=n;this.radarPolarChartObj.primaryYAxis.visible=n;this.radarPolarChartObj.primaryYAxis.lineStyle.width=n?1:0;this.radarPolarChartObj.primaryYAxis.majorTickLines.width=n?1:0;this.radarPolarChartObj.primaryYAxis.minorTickLines.width=n?1:0;this.radarPolarChartObj.primaryYAxis.majorTickLines.height=n?5:0;this.propertyPanel.updateItemVisibility(this.Type,"Axis","AxisRange",n)},t.prototype.showYGridLine=function(n){this.getRadarPolarChartProperties().PrimaryValueGridLines=n;this.radarPolarChartObj.primaryYAxis.majorGridLines.width=n?1:0},t.prototype.showValueLabel=function(n){this.getRadarPolarChartProperties().ShowValueLabel=n;for(var t=0;t<this.radarPolarChartObj.series.length;t++)this.radarPolarChartObj.series[t].marker.dataLabel.visible=n,this.radarPolarChartObj.series[t].marker.dataLabel.alignment="Near",this.radarPolarChartObj.series[t].marker.dataLabel.position="Auto",this.radarPolarChartObj.series[t].marker.dataLabel.font.size=this.getFontSizeBasedOnResolution(),this.radarPolarChartObj.series[t].marker.dataLabel.font.fontWeight="400",this.radarPolarChartObj.series[t].marker.dataLabel.font.color="var(--designer-text-color)";this.radarPolarChartObj.refresh()},t.prototype.updateRadarPolarChartAnimation=function(n){this.getRadarPolarChartProperties().EnableAnimation=n;for(var t=0;t<this.radarPolarChartObj.series.length;t++)this.radarPolarChartObj.series[t].animation.enable=n;this.radarPolarChartObj.refresh()},t.prototype.updateShowTooltip=function(n){this.getRadarPolarChartProperties().ShowTooltip=n;this.radarPolarChartObj.tooltip.enable=n},t.prototype.updateChartMarker=function(n){this.getRadarPolarChartProperties().ShowMarker=n;for(var t=0;t<this.radarPolarChartObj.series.length;t++)this.radarPolarChartObj.series[t].marker.visible=n;this.radarPolarChartObj.refresh()},t.prototype.updateRadarPolarChartLegendVisiblity=function(n){this.getRadarPolarChartProperties().ShowLegend=n;this.radarPolarChartObj.legendSettings.visible=this.ControlContainer.width()<190||this.ControlContainer.height()<190?!1:this.getRadarPolarChartProperties().ShowLegend;this.propertyPanel.updateItemVisibility(this.Type,"LegendSettings","LegendPosition",n);this.propertyPanel.updateItemVisibility(this.Type,"LegendSettings","LegendShape",n);this.propertyPanel.updateItemVisibility(this.Type,"LegendSettings","CustomLegend",n&&this.DataGroupInfo.FieldContainers.length>0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0)},t.prototype.updateDrawType=function(n){var t,i;for(this.getRadarPolarChartProperties().DrawType=n,t=ejdashboard.base.getComponent(this.radarPolarChartElement[0],"chart"),i=0;i<t.series.length;i++)t.series[i].type=n;t.refresh()},t.prototype.updateChartType=function(n){this.getRadarPolarChartProperties().ChartType=n==="Stacked Area"?"StackingArea":n==="Stacked Column"?"StackingColumn":n;for(var t=0;t<this.radarPolarChartObj.series.length;t++)this.radarPolarChartObj.series[t].drawType=this.getRadarPolarChartProperties().ChartType,this.radarPolarChartObj.series[t].opacity=this.getRadarPolarChartProperties().ChartType==="Area"||this.getRadarPolarChartProperties().ChartType==="StackingArea"?.5:1,this.radarPolarChartObj.series[t].marker.visible=this.getRadarPolarChartProperties().ChartType==="Column"||this.getRadarPolarChartProperties().ChartType==="StackingColumn"||this.getRadarPolarChartProperties().ChartType==="Scatter"?!1:this.getRadarPolarChartProperties().ShowMarker,this.radarPolarChartObj.series[t].width=this.getRadarPolarChartProperties().ChartType==="Line"||this.getRadarPolarChartProperties().ChartType==="Spline"?2:1,this.radarPolarChartObj.series[t].marker.dataLabel.font.size=this.getFontSizeBasedOnResolution(),this.radarPolarChartObj.series[t].marker.dataLabel.font.fontWeight="400",this.radarPolarChartObj.series[t].marker.dataLabel.font.color=this.getRadarPolarChartProperties().ChartType==="StackingColumn"?"rgb(255, 255, 255)":"rgb(99, 99, 99)";this.propertyPanel.updateItemVisibility("RadarPolarChart","BasicSettings","ShowMarker",this.getRadarPolarChartProperties().ChartType==="Column"||this.getRadarPolarChartProperties().ChartType==="StackingColumn"||this.getRadarPolarChartProperties().ChartType==="Scatter"?!1:!0);this.radarPolarChartObj.opacity=this.getRadarPolarChartProperties().ChartType==="Area"||this.getRadarPolarChartProperties().ChartType==="StackingArea"?.5:1;this.radarPolarChartObj.primaryXAxis.labelPlacement=this.getRadarPolarChartProperties().ChartType==="Column"||this.getRadarPolarChartProperties().ChartType==="StackingColumn"?"BetweenTicks":"OnTicks";this.radarPolarChartObj.refresh()},t.prototype.updateLegendPosition=function(n){this.getRadarPolarChartProperties().LegendPosition=n;this.radarPolarChartObj.legendSettings.position=n},t.prototype.updateLegendShape=function(n){if(this.getRadarPolarChartProperties().LegendShape=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendShape,n),!BoldBIDashboard.isNullOrUndefined(this.radarPolarChartObj)){for(var t=0;t<this.radarPolarChartObj.series.length;t++)this.radarPolarChartObj.series[t].legendShape=this.getRadarPolarChartProperties().LegendShape.replace(/\s/g,"");this.radarPolarChartObj.refresh()}},t.prototype.onCustomLegendClick=function(){this.designerInstance.modules.customLegendSettings.openLegendSettings(this,"updateCustomLegend",this.getRadarPolarChartProperties().EditLegend)},t.prototype.updateCustomLegend=function(n){this.getRadarPolarChartProperties().IsCustomLegend=!0;this.getRadarPolarChartProperties().EditLegend=n;for(var t=0;t<this.radarPolarChartObj.series.length;t++)this.updateCustomLegendValuesToChartObj(this.radarPolarChartObj);this.radarPolarChartObj.refresh();this.designerInstance.modules.serialization.notifyChange();BoldBIDashboardDesigner.editManager.setMergeAction(!1)},t.prototype.updateCustomLegendSettingsValue=function(){this.designerInstance.model.mode===BoldBIDashboard.Designer.mode.design&&this.DataGroupInfo.FieldContainers[0].FieldInfos.length>0&&this.DataGroupInfo.FieldContainers[1].FieldInfos.length>0&&this.bindChartLegendsToLegendInfo(this.radarPolarChartObj,"Values");this.updateCustomLegendValuesToChartObj(this.radarPolarChartObj)},t.prototype.updateCustomLegendValuesToChartObj=function(n){var i,t,r;if(!BoldBIDashboard.isNullOrUndefined(this.radarPolarChartObj))for(i=n.series.length,t=0;t<i;t++)r=this.getRadarPolarChartProperties().EditLegend.GroupValues.Values,n.series[t].name=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getCustomLegendItem(n.series[t].id,r)},t.prototype.bindChartLegendsToLegendInfo=function(n,t){var h=n.series.length,u=this.getRadarPolarChartProperties().EditLegend.GroupValues.Values,f=[],e,o,i,r,s;if(u.length>0)for(e=0;e<u.length;e++)for(i=0;i<h;i++)n.series[i].id===u[e].Id&&u[e].IsModified&&f.indexOf(n.series[i].id)===-1&&f.push(n.series[i].id);for(o=[],i=0;i<this.dataValues.widgetData.length;i++)r=JSON.parse(this.dataValues.widgetData[i]),s={Name:r.name,Caption:r.legendCaption,Value:this.getModifiedValuesForLegend(u,r,f,t),IsModified:t==="Values"?f.indexOf(r.id)>-1:f.indexOf(r.legendName)>-1,Id:r.id},o.push(s);this.getRadarPolarChartProperties().EditLegend.GroupValues.Values=o},t.prototype.getModifiedValuesForLegend=function(n,t,i,r){for(var f=t.name,u=0;u<n.length;u++)if(r!=="Values"?i.indexOf(n[u].Name)>-1&&n[u].Name===t.legendName:i.indexOf(n[u].Id)>-1&&n[u].Id===t.id){f=n[u].Value;break}return f},t.prototype.renderDefaultColorSettings=function(n,t,i){var h=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(this.designerInstance.designerPanel.selectedReportItems[0])),f,o,s,r,u,e;if(!BoldBIDashboard.isNullOrUndefined(h))if(f=this.designerId+"_"+t+"_"+i.categoryName,this.defaultPaletteContainer=this.designerInstance.element.find("#"+f),this.defaultPaletteContainer.length!==0||BoldBIDashboard.isNullOrUndefined(n)){if(!BoldBIDashboard.isNullOrUndefined(this.defaultPaletteContainer)&&this.defaultPaletteContainer.length>0&&(s=this.defaultPaletteContainer.find("#"+f+"_palatte_body"),s.empty(),!BoldBIDashboard.isNullOrUndefined(this.getRadarPolarChartProperties().DefaultColors)))for(r=0;r<this.getRadarPolarChartProperties().DefaultColors.length;r++)u=this.getRadarPolarChartProperties().DefaultColors[r],e={name:this.getFieldNameForColorPalette(u.Name),color:u.Color,isEdited:u.IsEdited},this.renderDefaultColorPaletteRow(e,s,r)}else if(this.defaultPaletteContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-designer-scroll-style-3","",{width:"460px"},{id:f}),o=BoldBIDashboard.buildTag("div","",{},{id:f+"_palatte_body"}),this.defaultPaletteContainer.append(o),n.append(this.defaultPaletteContainer),!BoldBIDashboard.isNullOrUndefined(this.getRadarPolarChartProperties().DefaultColors))for(r=0;r<this.getRadarPolarChartProperties().DefaultColors.length;r++)u=this.getRadarPolarChartProperties().DefaultColors[r],e={name:this.getFieldNameForColorPalette(u.Name),color:u.Color,isEdited:u.IsEdited},this.renderDefaultColorPaletteRow(e,o,r)},t.prototype.getFieldNameForColorPalette=function(n){var u=this.DataGroupInfo,e="",i,t,f,o,r;if(!BoldBIDashboard.isNullOrUndefined(u.FieldContainers)&&u.FieldContainers.length>0)for(i=u.FieldContainers,t=0;t<i.length;t++)for(f=0;f<i[t].FieldInfos.length;f++)if(o=i[t].FieldInfos,r=o.filter(function(t){return t.UniqueColumnName===n}),!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0){e=r[0].Name;break}return e},t.prototype.renderDefaultColorPaletteRow=function(n,t,i){var f=BoldBIDashboard.buildTag("div","",{height:"50px",width:"100%"},{id:this.designerId+"_color_scale_row_"+i}),e=BoldBIDashboard.buildTag("div","",{width:"250px",float:"left","margin-top":"8.5px"}),o=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"50px","white-space":"nowrap","text-overflow":"ellipsis"}),r,u;o.text(n.name);e.append(o);r=BoldBIDashboard.buildTag("div","",{width:"100px",display:"inline-block",float:"left","margin-top":"3px"});u=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:this.designerId+"_default_color_"+i});r.append(u);u.BoldBIDashboardColorPicker({value:n.color,width:"100px",cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label",select:this.bbdesigner$.proxy(this.updateDefaultPalette,this,i),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});f.append(e,r);t.append(f)},t.prototype.updateDefaultPalette=function(n,t){var e=this.DataGroupInfo.FieldContainers[0].FieldInfos,r=this.propertyPanel.getHexColorFromRGBA(t.RGBA),u,i,f;for(this.getRadarPolarChartProperties().DefaultColors.length>n&&(this.getRadarPolarChartProperties().DefaultColors[n].Color!==r&&(this.getRadarPolarChartProperties().DefaultColors[n].IsEdited=!0),this.getRadarPolarChartProperties().DefaultColors[n].Color=r,this.getRadarPolarChartProperties().DefaultColors[n].Name=e[n].UniqueColumnName),u=this.radarPolarChartObj.series.length,i=0;i<u;i++)f=this.getDefaultColorSettings(this.radarPolarChartObj.series[i].id),this.radarPolarChartObj.series[i].fill=f.Color,this.radarPolarChartObj.refresh();this.designerInstance.modules.serialization.notifyChange();BoldBIDashboardDesigner.editManager.setMergeAction(!1)},t.prototype.getDefaultColorSettings=function(n){this.getRadarPolarChartProperties().DefaultColors=BoldBIDashboard.isNullOrUndefined(this.getRadarPolarChartProperties().DefaultColors)?[]:this.getRadarPolarChartProperties().DefaultColors;for(var t=0;t<this.getRadarPolarChartProperties().DefaultColors.length;t++)if(this.getRadarPolarChartProperties().DefaultColors[t].Name===n)return this.getRadarPolarChartProperties().DefaultColors[t];return null},t.prototype.updateDefaultColorsToProperty=function(n){var u=[],r=this.DataGroupInfo.FieldContainers[0].FieldInfos,i;for(BoldBIDashboard.isNullOrUndefined(n.getRadarPolarChartProperties().DefaultColors)&&(n.getRadarPolarChartProperties().DefaultColors=[]),i=0;i<r.length;i++){var f=BoldBIDashboard.DashboardDesignerUtility.ChartHelper.getColumnId(r[i].UniqueColumnName,n.DataGroupInfo.FieldContainers),t=this.getDefaultColorSettings(r[i].UniqueColumnName),e=BoldBIDashboard.Dashboard.WidgetHelper.getColorCode(n,f,t);BoldBIDashboard.isNullOrUndefined(t)||!t.IsEdited?(t=new DefaultColorSet,t.Color=e,t.Name=r[i].UniqueColumnName,t.IsEdited=!1,u.push(t)):u.push(t)}n.getRadarPolarChartProperties().DefaultColors=u},t}(BoldBIDashboard.Dashboard.DataWidget);window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.RadarPolarChartItem",InternalRadarPolarChartReportItem,window);BoldBIDashboard.DashboardDesignerUtility.RadarPolarChartItem.prototype.initialize();BoldBIDashboardDesigner.bbdesignerstatic$.views.helpers({formatEJ2ChartTooltip:function(n,t,i,r,u,f){var e=r.checkAndUpdateParameterValue(f.getLabelParamValues(i.MeasureFormatting.Prefix),u),o=r.checkAndUpdateParameterValue(f.getLabelParamValues(i.MeasureFormatting.Suffix),u);return BoldBIDashboard.DashboardUtil.formattedText(n,i.MeasureFormatting.Culture,i.MeasureFormatting.DecimalPoints,i.MeasureFormatting.FormatType,i.MeasureFormatting.DecimalSeparator,i.MeasureFormatting.GroupSeparator,e,o,i.MeasureFormatting.Unit,!0,r,i.MeasureFormatting.EnableLakhsAndCroreRep)},formatEJ2ChartAdditionalTooltip:function(n,t,i){var r=t[i];return n[r.UniqueColumnName]},getEJ2ChartSeriesName:function(n,t){return t[n.UniqueColumnName]}});InternalTrendLineWindow=function(){function n(n){this.dashboardDesigner=null;this.chartProperties=null;this.callMethod="";this.locale=null;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.dashboardDesigner._id;this.renderTrendlineWindow();this.seriesdropdown=this.trendlineDialog.find("#"+this.id+"_seriesdrop").data("BoldBIDashboardDropDownList");this.linetypedropdown=this.trendlineDialog.find("#"+this.id+"_line_typedrop").data("BoldBIDashboardDropDownList");this.lineorderdropdown=this.trendlineDialog.find("#"+this.id+"_line_orderdrop").data("ejNumericTextbox");this.lineWidthTextBox=this.trendlineDialog.find("#"+this.id+"_line_width_text").data("ejNumericTextbox");this.linestyledropdown=this.trendlineDialog.find("#"+this.id+"_line_styledrop").data("BoldBIDashboardDropDownList");this.linecolorpicker=this.trendlineDialog.find("#"+this.id+"_line_colordrop").data("BoldBIDashboardColorPicker");this.trendLineStyles=[{text:this.locale.chartTrendLineDialog.Solid,dashValue:"0",styleText:"Solid"},{text:this.locale.chartTrendLineDialog.Dot,dashValue:"2,3",styleText:"Dot"},{text:this.locale.chartTrendLineDialog.Dash,dashValue:"4,8",styleText:"Dash"},{text:this.locale.chartTrendLineDialog.DotDash,dashValue:"2,6,6,10",styleText:"DotDash"},{text:this.locale.chartTrendLineDialog.LongDash,dashValue:"15",styleText:"LongDash"},{text:this.locale.chartTrendLineDialog.LongDashDotDot,dashValue:"20,10,5,5,5,10",styleText:"LongDashDotDot"}];this.trendLineTypes=[{text:this.locale.chartTrendLineDialog.Linear,value:"Linear"},{text:this.locale.chartTrendLineDialog.Exponential,value:"Exponential"},{text:this.locale.chartTrendLineDialog.Logarithmic,value:"Logarithmic"},{text:this.locale.chartTrendLineDialog.Power,value:"Power"},{text:this.locale.chartTrendLineDialog.Polynomial,value:"Polynomial"}];this.wireEvents()}return n.prototype.openTrendlineDialog=function(n,t,i){this.callInstance=t;this.callMethod=i;this.trendlineVal=BoldBIDashboard.isNullOrUndefined(n)?null:n;this.setSeriesType();this.setTrendLineType();this.setTrendLineOrderValue();this.setTrendLineColor();this.setTrendLineStyle();this.validateLegendText();this.setTrendLineWidth();var u=this.seriesdropdown.getItemDataByValue(this.seriesdropdown.getSelectedValue())[0].text,r=this.linetypedropdown.getSelectedValue();r==="Polynomial"?this.trendlineDialog.find("#"+this.id+"_line_orderrow").css("display","block"):this.trendlineDialog.find("#"+this.id+"_line_orderrow").css("display","none");BoldBIDashboard.DashboardUtil.buttonEnable(this.dashboardDesigner.element.find("#"+this.id+"_trendline_btn_ok"),!0);this.trendlineDialog.data("BoldBIDashboardDialog").open();this.trendlineDialog.find("#"+this.id+"_legend_textdrop").attr("textEdited")==="false"||this.trendlineVal===null?this.trendlineDialog.find("#"+this.id+"_legend_textdrop").val(r+"("+u+")"):this.trendlineDialog.find("#"+this.id+"_legend_textdrop").val(this.trendlineVal.CustomName)},n.prototype.setTextBoxValue=function(){var n=this.trendlineDialog.find("#"+this.id+"_legend_textdrop"),t=this.seriesdropdown.getItemDataByValue(this.seriesdropdown.getSelectedValue())[0].text,i=this.linetypedropdown.getSelectedValue(),r=i+"("+t+")";r!==n.val()&&n.attr("textEdited","true");this.validateLegendText()},n.prototype.getMeasureValues=function(){return this.getSourceData(this.callInstance.DataGroupInfo)},n.prototype.setSeriesType=function(){var n=this.getMeasureValues(),t;this.seriesdropdown.setModel({dataSource:n});t=BoldBIDashboard.isNullOrUndefined(this.trendlineVal)?n[0].value:this.trendlineVal.UniqueName;this.seriesdropdown.selectItemByValue(t)},n.prototype.setTrendLineType=function(){this.linetypedropdown.setModel({dataSource:this.trendLineTypes});var n=BoldBIDashboard.isNullOrUndefined(this.trendlineVal)?this.trendLineTypes[0].value:this.trendlineVal.LineType;this.linetypedropdown.selectItemByValue(n)},n.prototype.setTrendLineColor=function(){var n=BoldBIDashboard.isNullOrUndefined(this.trendlineVal)?"#77A7FB":this.trendlineVal.LineColor;this.linecolorpicker.setModel({value:n})},n.prototype.setTrendLineStyle=function(){this.linestyledropdown.setModel({dataSource:this.trendLineStyles});var n=BoldBIDashboard.isNullOrUndefined(this.trendlineVal)?this.trendLineStyles[0].dashValue:BoldBIDashboard.Dashboard.WidgetHelper.getLineStyle(this.trendlineVal.LineStyle);this.linestyledropdown.selectItemByValue(n)},n.prototype.setTrendLineOrderValue=function(){var n=BoldBIDashboard.isNullOrUndefined(this.trendlineVal)?0:this.trendlineVal.Order;this.lineorderdropdown.setModel({value:n})},n.prototype.setTrendLineWidth=function(){var n=BoldBIDashboard.isNullOrUndefined(this.trendlineVal)?1:this.trendlineVal.LineWidth;this.lineWidthTextBox.setModel({value:n})},n.prototype.getSourceData=function(n){var f=[],u,r,t,i;if(!BoldBIDashboard.isNullOrUndefined(n.FieldContainers)&&n.FieldContainers.length>0)for(u=n.FieldContainers.filter(function(n){return n.Name!=="Tooltip"}),r=0;r<u.length;r++)for(t=0;t<u[r].FieldInfos.length;t++)i=u[r].FieldInfos,i[t].FieldType!==FieldType.Measures||i[t].IsKPIColumn||f.push({text:i[t].Name+"("+i[t].SummaryType+")",value:i[t].UniqueColumnName,name:i[t].Name});return f},n.prototype.renderTrendlineWindow=function(){this.trendlineDialog=BoldBIDashboard.buildTag("div.boldbi-dashboarddesigner-trendlinedialog","",{},{id:this.id+"_trendLine_windowdiv",title:this.locale.chartTrendLineDialog.trendline});this.trendlineDialog.BoldBIDashboardDialog({enableResize:!1,showRoundedCorner:!0,enableModal:!0,minWidth:400,minHeight:380,height:"auto",width:"auto",showOnInit:!1,showFooter:!0,containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,cssClass:"e-designer-trendlinedialog boldbi-dashboarddesigner bbi-designer-dialog",close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText});var s=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_table_id"}),n=BoldBIDashboard.buildTag("table.e-designer-table","",{width:"100%"},{unselectable:"on"}),t=BoldBIDashboard.buildTag("tr.boldbi-dashboarddesigner-trendline-tablerow","",{},{id:this.id+"_legend_textrow"}),h=BoldBIDashboard.buildTag("td","",{}),st=BoldBIDashboard.buildTag("Label.bbi-designer-fontfamily",this.locale.chartTrendLineDialog.legendText,{},{type:"label"}),c=BoldBIDashboard.buildTag("td","",{"padding-left":"75px"}),ht=BoldBIDashboard.buildTag("input.e-textbox e-trendline-legendText","",{"text-align":"left","font-size":"13px",width:"200px"},{type:"text",textEdited:!1,id:this.id+"_legend_textdrop"}),i=BoldBIDashboard.buildTag("tr.boldbi-dashboarddesigner-trendline-tablerow","",{},{id:this.id+"_series_row"}),l=BoldBIDashboard.buildTag("td","",{}),ct=BoldBIDashboard.buildTag("Label.bbi-designer-fontfamily",this.locale.chartTrendLineDialog.series,{},{type:"label"}),a=BoldBIDashboard.buildTag("td","",{"padding-left":"107px"}),v=BoldBIDashboard.buildTag("input.e-textbox","",{"text-align":"left",border:"1px solid","font-size":"13px"},{type:"text",id:this.id+"_seriesdrop"}),r=BoldBIDashboard.buildTag("tr.boldbi-dashboarddesigner-trendline-tablerow","",{},{id:this.id+"_line_typerow"}),y=BoldBIDashboard.buildTag("td","",{}),lt=BoldBIDashboard.buildTag("Label.bbi-designer-fontfamily",this.locale.chartTrendLineDialog.lineType,{},{type:"label"}),p=BoldBIDashboard.buildTag("td","",{"padding-left":"89px"}),w=BoldBIDashboard.buildTag("input.e-textbox","",{"text-align":"left",border:"1px solid","font-size":"13px"},{type:"text",id:this.id+"_line_typedrop"}),u=BoldBIDashboard.buildTag("tr.boldbi-dashboarddesigner-trendline-tablerow","",{},{id:this.id+"_line_orderrow"}),b=BoldBIDashboard.buildTag("td","",{}),at=BoldBIDashboard.buildTag("Label.bbi-designer-fontfamily",this.locale.chartTrendLineDialog.order,{},{type:"label"}),k=BoldBIDashboard.buildTag("td","",{"padding-left":"110px"}),d=BoldBIDashboard.buildTag("input.e-textbox","","",{type:"text",id:this.id+"_line_orderdrop"}),f=BoldBIDashboard.buildTag("tr.boldbi-dashboarddesigner-trendline-tablerow","",{},{id:this.id+"_line_widthrow"}),g=BoldBIDashboard.buildTag("td","",{}),vt=BoldBIDashboard.buildTag("Label.bbi-designer-fontfamily",this.locale.chartTrendLineDialog.LineWidth,{},{type:"label"}),nt=BoldBIDashboard.buildTag("td","",{"padding-left":"83px"}),tt=BoldBIDashboard.buildTag("input.e-textbox","","",{type:"text",id:this.id+"_line_width_text"}),e=BoldBIDashboard.buildTag("tr.boldbi-dashboarddesigner-trendline-tablerow","",{},{id:this.id+"_line_colorrow"}),it=BoldBIDashboard.buildTag("td","",{}),yt=BoldBIDashboard.buildTag("Label.bbi-designer-fontfamily",this.locale.chartTrendLineDialog.lineColor,{},{type:"label"}),rt=BoldBIDashboard.buildTag("td","",{"padding-left":"86px"}),ut=BoldBIDashboard.buildTag("input.e-textbox","",{"text-align":"left",border:"1px solid","font-size":"13px"},{type:"text",id:this.id+"_line_colordrop"}),o=BoldBIDashboard.buildTag("tr.boldbi-dashboarddesigner-trendline-tablerow","",{},{id:this.id+"_line_stylerow"}),ft=BoldBIDashboard.buildTag("td","",{}),pt=BoldBIDashboard.buildTag("Label.bbi-designer-fontfamily",this.locale.chartTrendLineDialog.lineStyle,{},{type:"label"}),et=BoldBIDashboard.buildTag("td","",{"padding-left":"89px"}),ot=BoldBIDashboard.buildTag("input.boldbi-dashboarddesigner-trendline-textbox","",{},{type:"text",id:this.id+"_line_styledrop"}),wt=this.dashboardDesigner.element.find("#"+this.id+"_trendLine_windowdiv_foot"),bt=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.locale.dialogOptions.cancelButtonText,{float:"right"},{id:this.id+"_trendline_btn_cancel",type:"button"}),kt=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-small",this.locale.dialogOptions.okButtonText,{float:"right"},{id:this.id+"_trendline_btn_ok",type:"button"});wt.append(bt).append(kt);this.trendlineDialog.append(s);s.append(n);n.append(t);t.append(h);h.append(st);t.append(c);c.append(ht);n.append(i);i.append(l);l.append(ct);i.append(a);a.append(v);n.append(r);r.append(y);y.append(lt);r.append(p);p.append(w);n.append(u);u.append(b);b.append(at);u.append(k);k.append(d);n.append(f);f.append(g);g.append(vt);f.append(nt);nt.append(tt);n.append(e);e.append(it);it.append(yt);e.append(rt);rt.append(ut);n.append(o);o.append(ft);ft.append(pt);o.append(et);et.append(ot);v.BoldBIDashboardDropDownList({dataSource:[],fields:{text:"text",value:"value"},enabled:!0,width:"214px",height:"28px",showRoundedCorner:!1,cssClass:"e-designer-series bbi-designer-ejwidgets bbi-dbrd-control",change:this.bbdesigner$.proxy(this.updateLegendText,this)});w.BoldBIDashboardDropDownList({dataSource:this.trendLineTypes,fields:{text:"text",value:"value"},enabled:!0,width:"214px",height:"28px",showRoundedCorner:!1,cssClass:"e-designer-target bbi-designer-ejwidgets bbi-dbrd-control",change:this.bbdesigner$.proxy(this.updateTrendLineType,this)});d.ejNumericTextbox({showSpinButton:!0,decimalPlaces:0,minValue:0,maxValue:6,showRoundedCorner:!0,cssClass:"bbi-designer-ejwidgets bbi-designer-ejwidgets-updown bbi-designer-content-label",width:"90px"});tt.ejNumericTextbox({showSpinButton:!0,decimalPlaces:0,minValue:1,maxValue:5,showRoundedCorner:!0,cssClass:"bbi-designer-ejwidgets bbi-designer-ejwidgets-updown bbi-designer-content-label",width:"214px",heigth:"28px"});ut.BoldBIDashboardColorPicker({cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label",width:"35px",height:"26px",modelType:"palette",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});ot.BoldBIDashboardDropDownList({dataSource:this.trendLineStyles,fields:{text:"text",value:"dashValue",trendLineStyle:"styleText"},enabled:!0,width:"214px",height:"28px",popupWidth:214,showRoundedCorner:!1,cssClass:"e-designer-target bbi-designer-ejwidgets bbi-dbrd-control",template:'<div style = "height: 20px"><svg  viewBox="0 0 300 20"><line x1="0" x2="300" y1="10" y2="10" stroke="var(--primary-text-normal-color)" stroke-width="2"  stroke-dasharray="${dashValue}"/><\/svg><\/div>'})},n.prototype.updateLegendText=function(){var n=this.seriesdropdown.getItemDataByValue(this.seriesdropdown.getSelectedValue())[0].text,t=this.linetypedropdown.getSelectedValue(),i=t+"("+n+")",r=BoldBIDashboard.isNullOrUndefined(this.trendlineVal)?i:this.trendlineVal.CustomName;i!==r&&this.trendlineDialog.find("#"+this.id+"_legend_textdrop").attr("textEdited","true");this.trendlineDialog.find("#"+this.id+"_legend_textdrop").attr("textEdited")==="false"?this.trendlineDialog.find("#"+this.id+"_legend_textdrop").val(t+"("+n+")"):this.trendlineDialog.find("#"+this.id+"_legend_textdrop").val()},n.prototype.updateTrendLineType=function(n){var t=this.seriesdropdown.getItemDataByValue(this.seriesdropdown.getSelectedValue())[0].text;n.selectedText==="Polynomial"?this.trendlineDialog.find("#"+this.id+"_line_orderrow").css("display","block"):this.trendlineDialog.find("#"+this.id+"_line_orderrow").css("display","none");this.trendlineDialog.find("#"+this.id+"_legend_textdrop").val(n.selectedText+"("+t+")");this.updateLegendText()},n.prototype.updateTrendLineInfo=function(){BoldBIDashboard.DashboardUtil.buttonEnable(this.dashboardDesigner.element.find("#"+this.id+"_trendline_btn_ok"),!1);var t=this.seriesdropdown.getItemDataByValue(this.seriesdropdown.getSelectedValue())[0],i=this.linetypedropdown.getSelectedValue(),u=this.dashboardDesigner.modules.propertyPanel.getHexColorFromRGBA(this.linecolorpicker.getColor()),f=this.lineorderdropdown.getValue(),e=this.lineWidthTextBox.getValue(),o=this.linestyledropdown.model.dataSource[this.linestyledropdown.selectedIndexValue].styleText,n,s=i+"("+t.text+")",r=this.trendlineDialog.find("#"+this.id+"_legend_textdrop").val();if(n=new TrendLineSettings,n.CustomName=r,n.LineColor=u,n.Name=t.text,n.LineType=i,n.LineStyle=o,n.UniqueName=t.value,n.Id=this.trendlineVal!==null?this.trendlineVal.Id:this.callInstance.trendLineId,n.Order=i==="Polynomial"?f:n.Order,n.LineWidth=e,this.validateLegendText(),s===r)this.trendlineDialog.find("#"+this.id+"_legend_textdrop").attr("textEdited","false");else if(r===""){BoldBIDashboard.DashboardUtil.buttonEnable(this.dashboardDesigner.element.find("#"+this.id+"_trendline_btn_ok"),!0);return}BoldBIDashboard.DashboardUtil.invokeMethod(BoldBIDashboard.isNullOrUndefined(this.callInstance.chartProperties)?this.callInstance:this.callInstance.chartProperties,this.callMethod,[n]);this.closeDialog()},n.prototype.validateLegendText=function(){var n=this.trendlineDialog.find("#"+this.id+"_legend_textdrop"),t;n.removeClass("e-error-textbox");this.trendlineDialog.find("#"+this.id+"_legend_textdrop_error").remove();this.trendlineDialog.find("#"+this.id+"_legend_textdrop_error").length===0&&n.val()===""&&(t=BoldBIDashboard.buildTag("div.e-textbox-exception",this.locale.chartTrendLineDialog.textBoxErrorMessage,{},{id:this.id+"_legend_textdrop_error"}),n.addClass("e-error-textbox"),this.trendlineDialog.append(t))},n.prototype.closeDialog=function(){this.trendlineDialog.data("BoldBIDashboardDialog").close()},n.prototype.destroy=function(){var n=this.dashboardDesigner.element.find("#"+this.id+"_trendLine_windowdiv");!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0&&!BoldBIDashboard.isNullOrUndefined(n.data("BoldBIDashboardDialog"))&&(BoldBIDashboard.DashboardUtil.destroyEjObjects(n),n.data("BoldBIDashboardDialog").destroy(),n.remove());this.unwireEvents()},n.prototype.wireEvents=function(){this.trendlineDialog.on("focusout",".e-trendline-legendText",this.bbdesigner$.proxy(this.setTextBoxValue,this));this.dashboardDesigner.element.on("click","#"+this.id+"_trendline_btn_cancel",this.bbdesigner$.proxy(this.closeDialog,this,!0));this.dashboardDesigner.element.on("click","#"+this.id+"_trendline_btn_ok",this.bbdesigner$.proxy(this.updateTrendLineInfo,this))},n.prototype.unwireEvents=function(){this.trendlineDialog.off("focusout",".e-trendline-legendText",this.bbdesigner$.proxy(this.setTextBoxValue,this));this.dashboardDesigner.element.off("click","#"+this.id+"_trendline_btn_cancel",this.bbdesigner$.proxy(this.closeDialog,this,!0));this.dashboardDesigner.element.off("click","#"+this.id+"_trendline_btn_ok",this.bbdesigner$.proxy(this.updateTrendLineInfo,this))},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.TrendLineWindow",InternalTrendLineWindow,window);
