/*!
*  filename: bbi.dashboard.viewer.min.js
*  version : 7.7.9
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
var InternalViewDataDialog=function(){function n(n){this.totalRowCount="";this.id=null;this.gridPageSize=100;this.gridColums=[];this.fieldInfoList=[];this.selectedListInShowALL=[];this.locale=null;this.isSelectedField=!1;this.checkAll=!1;this.allSpecialChar="&ZeroWidthSpace;";this.isShowAllFields=!1;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.dashboardDesigner._id;this.dataConfigurationInfo=this.dashboardDesigner.modules.dataConfiguration;this.exportPanel=this.dashboardDesigner.modules.exportPanel;this.viewdataSettings=this.dashboardDesigner.model.viewDataSettings;this.virtualScrollSettings=new VirtualScrollSettings;this.renderViewDataPopup()}return n.prototype.showViewDataPopup=function(n,t,i,r,u){var f=[];f.push({id:"e-dbrd-viewdata-export",dataname:"export",datatooltip:this.locale.banerPanel.exportTooltip});this.dashboardDesigner.triggerViewerEvent(ViewerEvent.actionBegin,ViewerEventType.viewDataDialogOpen,n);this.addExportIcon(f);this.widgetInstance=n;this.updateViewDataActions();this.dashboardDesigner.isMobileLayout()?this.dashboardDesigner.element.find(".bbi-viewdata-dialog").addClass("bbi-mobile-viewdata"):this.dashboardDesigner.element.find(".bbi-viewdata-dialog").removeClass("bbi-mobile-viewdata");this.updateViewDataDialogStyle();this.popupInstance.setModel({title:n.getJson().ContainerSettings.Title});this.popupInstance.open();this.viewDataContainer.data("BoldBIDashboardWaitingPopup").option("text",this.locale.fetchData.fetchData);this.viewDataContainer.data("BoldBIDashboardWaitingPopup").show();this.updateWaitingIndicatorStyle();this.updateRenderedRowDetails(0);this.isShowAllFields=this.viewdataSettings.checkShowAllColumns;this.getViewData(i,t,r,u);this.renderGrid();this.rearrangeHeaderElements()},n.prototype.updateViewDataActions=function(){this.widgetInstance.getJson().ContainerSettings.AllowViewDataExport&&this.dashboardDesigner.model.viewDataActions.allowExporting?(this.dashboardDesigner.element.find("#"+this.id+"_viewDataIcon_container").css("display","flex"),this.dashboardDesigner.element.find("#"+this.id+"_viewdata_border").css("display","block")):(this.dashboardDesigner.element.find("#"+this.id+"_viewDataIcon_container").css("display","none"),this.dashboardDesigner.element.find("#"+this.id+"_viewdata_border").css("display","none"));this.widgetInstance.getJson().ContainerSettings.AllowViewDataColumnSelection&&this.dashboardDesigner.model.viewDataActions.allowColumnSelection?(this.dashboardDesigner.element.find("#"+this.id+"_selectColumn_btn_container").css("display","flex"),this.dashboardDesigner.element.find("#"+this.id+"_viewdata_border").css("display","block")):(this.dashboardDesigner.element.find("#"+this.id+"_selectColumn_btn_container").css("display","none"),this.dashboardDesigner.element.find("#"+this.id+"_viewdata_border").css("display","none"))},n.prototype.renderViewDataPopup=function(){if(BoldBIDashboard.isNullOrUndefined(this.viewDataContainer)){this.viewDataContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-viewdata-dialog-container","",{},{id:this.id+"_viewdata_dialog"});var i=this.dashboardDesigner.isMobileLayout(),n=this.dashboardDesigner.element.width()*.9,r=i?.8:.9,t=this.dashboardDesigner.element.height()*r;this.dashboardDesigner.element.append(this.viewDataContainer);this.viewDataContainer.BoldBIDashboardDialog({width:n,height:t,minWidth:n>=400?400:n,minHeight:t>=235?235:t,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!1,allowDraggable:!1,containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,cssClass:"boldbi-dashboarddesigner bbi-designer-dialog e-flat-mode bbi-viewdata-dialog",closeOnEscape:!0,close:this.bbdesigner$.proxy(this.closeViewDataDialog,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText});this.viewDataContainer.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup bbi-designer-loader e-view-underlying-data",template:this.dashboardDesigner.getWaitingPopupTemplate()});this.popupInstance=this.viewDataContainer.data("BoldBIDashboardDialog");this.addSelectColumnButton()}},n.prototype.addSelectColumnButton=function(){var i=BoldBIDashboard.buildTag("div.bbi-dbrd-viewdata-border","",{},{id:this.id+"_viewdata_border"}),t=BoldBIDashboard.buildTag("div.bbi-dbrd-viewdata-button-wrap bbi-dbrd-viewdata-icon-container","","",{id:this.id+"_selectColumn_btn_container"}),n=BoldBIDashboard.buildTag("button.viewdata-selectColum-btn bbi-dbrd-btn-small bbi-dbrd-btn-secondary",this.locale.dialogOptions.selectColumnButtonText,"",{id:this.id+"_select_Column_button",type:"button"});n.off("click",this.bbdesigner$.proxy(this.renderSelectColumnListBox,this));n.on("click",this.bbdesigner$.proxy(this.renderSelectColumnListBox,this));t.append(n);this.dashboardDesigner.element.find(".bbi-viewdata-dialog .e-header").append(i,t)},n.prototype.addExportIcon=function(n){var i;if(this.dashboardDesigner.element.find(".bbi-viewdata-dialog .e-header  .bbi-dbrd-viewdata-retrived-rows-notifyicon").length==0){var r=BoldBIDashboard.buildTag("div.bbi-dbrd-viewdata-border","",{},{id:this.id+"_viewdata_border"}),u=BoldBIDashboard.buildTag("div.bbi-dbrd-viewdata-retrived-rows","",{},{id:this.id+"_viewdata_retrived_rows"}),t=BoldBIDashboard.buildTag("div.bbi-dbrd-viewdata-icon-container","","",{id:this.id+"_viewDataIcon_container"}),f=BoldBIDashboard.buildTag("div.bbi-dbrd-viewdata-retrived-rows-notifyicon bbi-designer-notifyinfo bbi-dbrd-designer-hoverable","",{position:"absolute",right:"230px"},{id:this.id+"_viewdata_retrivedrows_notifyicon"});t.append(f);n.length!=0&&(i=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-hoverable bbi-dbrd-view-data-export-menu-icon bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable","","",{id:n[0].id,"data-name":n[0].dataname,"data-tooltip":n[0].datatooltip}),t.append(i));this.dashboardDesigner.element.find(".bbi-viewdata-dialog .e-header").append(r,t,u)}},n.prototype.renderGrid=function(){this.gridItem=BoldBIDashboard.buildTag("div.e-griditem e-dbrd-widget bbi-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"100",overflow:"hidden"});this.tableElement=BoldBIDashboard.buildTag("div.bbi-designer-grid-table","",{width:"100%",height:"100%","font-size":"10pt","background-color":"white"},{id:this.id+"_viewdata_grid"});var n=BoldBIDashboard.buildTag("div.bbi-loader-background","",{},{});this.gridItem.append(this.tableElement);this.viewDataContainer.append(n,this.gridItem);this.tableElement.BoldBIDashboardGrid({dataSource:this.getDefaultData(),allowKeyboardNavigation:!0,allowSorting:!0,scrollSettings:{allowVirtualScrolling:!1,virtualScrollMode:"continuous",enableTouchScroll:!0,autoHide:!0,scrollerSize:10},allowResizing:!0,enableAltRow:!1,allowPaging:!1,allowSelection:!1,filterSettings:{filteredColumns:[]},columns:[{field:"ItemId",headerText:"ItemID"},{field:"ItemName",headerText:"ItemName"}],pageSettings:{pageSize:this.gridPageSize},actionBegin:this.bbdesigner$.proxy(this.actionBegin,this),actionComplete:this.bbdesigner$.proxy(this.actionComplete,this)});this.gridInstance=this.tableElement.data("BoldBIDashboardGrid")},n.prototype.getDefaultData=function(){return[{ItemId:"i1",ItemName:"Item1"},{ItemId:"i2",ItemName:"Item2"},{ItemId:"i3",ItemName:"Item3"},{ItemId:"i4",ItemName:"Item4"},{ItemId:"i5",ItemName:"Item5"},{ItemId:"i6",ItemName:"Item6"},{ItemId:"i7",ItemName:"Item7"},{ItemId:"i8",ItemName:"Item8"}]},n.prototype.getViewData=function(n,t,i,r){var f,e,h,o,s,u;if(!BoldBIDashboard.isNullOrUndefined(this.widgetInstance)){if(f=this.dashboardDesigner.designerPanel.banner.filterConfiguration.getAllWidgetSelectedValues(),e=this.dashboardDesigner.modules.dynamicParameterPanel.getAllFilterWidgetParameterSelectedValues(null,""),BoldBIDashboard.isNullOrUndefined(n)?n=this.selectedListInShowALL:this.selectedListInShowALL=n,r&&(n=[]),h=!0,o=[],this.fieldInfoList=this.dashboardDesigner.modules.dataConfiguration.convertDataGroupInfoToFieldInfo(this.widgetInstance.dataGroupInfo,null,n,h,i,this.isSelectedField),this.isSelectedField)this.getSelectFieldInfos();else if(this.isShowAllFields){for(this.allFieldInfo=this.GetFieldInfos(),s=this.allFieldInfo.filter(function(n){return n.Id!=="&ZeroWidthSpace;_select_All"}),this.updateFieldInfos(),u=0;u<s.length;u++)this.fieldInfoList.push(s[u]);this.isSelectedField=!0;this.checkAll=!0}o.push(this.widgetInstance.Name);this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.viewData,{action:BoldBIDashboard.DashboardUtil.DesignerAction.ViewData,data:JSON.stringify({widgetsId:o,selectedValuesList:BoldBIDashboard.isNullOrUndefined(f)?"":JSON.stringify(f),startindex:0,fieldInfo:this.fieldInfoList,isSelectedField:this.isSelectedField,selectedParameterValue:BoldBIDashboard.isNullOrUndefined(e)?"":JSON.stringify(e)})},{fnction:this.bbdesigner$.proxy(this.bindDataToGrid,this,this.fieldInfoList)})}},n.prototype.actionBegin=function(){this.UpdateHeaderBackground();this.UpdateHeaderForeground()},n.prototype.UpdateHeaderBackground=function(){var r=this.tableElement.data("BoldBIDashboardGrid"),t,i,n;if(!BoldBIDashboard.isNullOrUndefined(r))for(t=r.getHeaderTable(),t.find(".e-columnheader")[0].style.background="var(--designer-container-background)",i=t.find(".e-headercell"),n=0;n<i.length;n++)i[n].style.background="transparent"},n.prototype.UpdateHeaderForeground=function(){var i=this.tableElement.data("BoldBIDashboardGrid"),r,t,n;if(!BoldBIDashboard.isNullOrUndefined(i))for(r=i.getHeaderTable(),t=r.find(".e-headercelldiv"),n=0;n<t.length;n++)t[n].style.color="var(--designer-text-color)"},n.prototype.bindDataToGrid=function(n,t){var i,u,r;BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(this.gridInstance)||!BoldBIDashboard.isNullOrUndefined(t.ViewData)?BoldBIDashboard.isNullOrUndefined(t.ViewData)||BoldBIDashboard.isNullOrUndefined(t.ViewData.Error)||!t.ViewData.Error||this.showViewDataError(this.viewDataContainer,t):(i=Object.keys(t),i.length>0&&(this.viewDataContainer.find(".bbi-dbrd-control-error").length>0&&(this.viewDataContainer.find(".bbi-dbrd-control-error").remove(),this.viewDataContainer.children(".bbi-dbrd-control").css({display:"block"})),this.currentData=JSON.parse(t[i[0]]),u=t[i[1]],this.hasMoreRecord=t[i[2]],this.totalRowCount=t[i[3]],r=void 0,r=this.hasMoreRecord?new BoldBIDashboard.DataManager({json:this.currentData}):this.currentData,this.datawidget=new BoldBIDashboard.Dashboard.DataWidget(this.dashboardDesigner,"Grid","e-grid-item"),this.datawidget.update(t),this.rowdataBoundEvent=this.bbdesigner$.proxy(this.rowDataBoundProcess,this),this.gridInstance.model.rowDataBound=this.rowdataBoundEvent,this.updateRenderedRowDetails(this.currentData.length),this.generateColumns(u,n),this.gridInstance.model.columns=this.gridColums,this.updateColumnWidth(),this.gridInstance.option("allowFiltering",!0),this.gridInstance.option("allowScrolling",!0),this.gridInstance.option("scrollSettings.allowVirtualScrolling",this.hasMoreRecord),this.gridInstance.option("dataSource",r),this.updateGridSize(),this.hideGridLoaderBackground(),this.gridInstance.getScrollObject().refresh(),this.refreshHeader(),this.rearrangeHeaderElements(),this.dashboardDesigner.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.viewDataDialogOpen,this.widgetInstance)))},n.prototype.setFormatValueForColumn=function(n,t,i){if((BoldBIDashboard.isNullOrUndefined(n.templateID)||n.templateID==="")&&n.IsMeasure&&n.MeasureFormat&&t.data[n.field]!=="(Null)"){var r=this.dashboardDesigner.checkAndUpdateParameterValue(this.datawidget.getLabelParamValues(n.MeasureFormat.Prefix),this.datawidget.DataGroupInfo.DataSourceName,!0),u=this.dashboardDesigner.checkAndUpdateParameterValue(this.datawidget.getLabelParamValues(n.MeasureFormat.Suffix),this.datawidget.DataGroupInfo.DataSourceName,!0),f=BoldBIDashboard.DashboardUtil.formattedText(t.data[n.field],n.MeasureFormat.Culture,n.MeasureFormat.DecimalPoints,DataValueFormat[n.MeasureFormat.FormatType],n.MeasureFormat.DecimalSeparator,n.MeasureFormat.GroupSeparator,r,u,NumberFormat[n.MeasureFormat.Unit],!0,this.dashboardDesigner,n.MeasureFormat.EnableLakhsAndCroreRep);this.bbdesigner$(t.row).children().eq(i).html(f)}},n.prototype.rowDataBoundProcess=function(n){for(var i,t=0;t<n.model.columns.length;t++)i=n.model.columns[t],this.setFormatValueForColumn(i,n,t)},n.prototype.rearrangeHeaderElements=function(){var n=this.dashboardDesigner.element.find("#"+this.id+"_viewdata_dialog_title"),t=this.dashboardDesigner.element.find(".bbi-dbrd-viewdata-retrived-rows-notifyicon"),f=n.width(),e=this.getChildElementsWidthCalculation(n,!1),i=this.dashboardDesigner.isMobileLayout(),r=t.css("display")!=="none",u;f<e?(this.dashboardDesigner.element.find(".bbi-dbrd-viewdata-retrived-rows").hide(),t.show(),this.modifyControlHeader()):i&&r?this.modifyControlHeader():!i&&r&&(t.hide(),this.dashboardDesigner.element.find(".bbi-dbrd-viewdata-retrived-rows").show(),u=n.find(".e-title"),u.removeAttr("data-tooltip").removeClass("bbi-dbrd-designer-hoverable"))},n.prototype.getChildElementsWidthCalculation=function(n,t){for(var i,e,o,r=0,f=n.children(),u=0;u<f.length;u++)if(i=f.eq(u),i.length>0&&i.css("display")!=="none")if(t&&i.hasClass("e-title"))continue;else e=i.outerWidth(),o=parseFloat(i.css("margin-left"))+parseFloat(i.css("margin-right")),r=r+e+o;return r},n.prototype.modifyControlHeader=function(){var n=this.dashboardDesigner.element.find("#"+this.id+"_viewdata_dialog_title"),t=n.find(".e-title"),i=n.width(),r=this.dashboardDesigner.element.find(".bbi-dbrd-viewdata-retrived-rows-notifyicon").css("display")!=="none",u=i-this.getChildElementsWidthCalculation(n,r),f=u*.48;this.bbdesigner$(t)[0].style.setProperty("max-width",f+"px","important");t.attr("data-tooltip",t.text()).addClass("bbi-dbrd-designer-hoverable")},n.prototype.updateColumnWidth=function(){var n=this.tableElement.data("BoldBIDashboardGrid"),i,r,t;if(!BoldBIDashboard.isNullOrUndefined(n)){for(i=n.model.columns,r=[],t=0;t<i.length;t++)r.push("100"),n.model.columns=i,n.model.columns[t].width=100,n.model.columns[t].visible=!0;n.columnsWidthCollection=r}},n.prototype.hideGridLoaderBackground=function(){var n=this;(n.viewDataContainer.find(".bbi-loader-background").length>0||n.viewDataContainer.data("BoldBIDashboardWaitingPopup").element.is(":visible"))&&setTimeout(function(){n.viewDataContainer.data("BoldBIDashboardWaitingPopup").hide();n.viewDataContainer.find(".bbi-loader-background").remove()},100)},n.prototype.showViewDataError=function(n,t){var i,r;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(t)){this.viewDataContainer.data("BoldBIDashboardWaitingPopup").hide();this.viewDataContainer.find(".bbi-loader-background").css({display:"none"});n.children(".bbi-dbrd-control").css({display:"none"});n.find(".bbi-dbrd-control-error").length>0&&n.find(".bbi-dbrd-control-error").remove();i=this.bbdesigner$("<div>").addClass("bbi-dbrd-control-error bbi-align-center").css({"z-index":"100",position:"relative","border-radius":"2px"});i.append(this.bbdesigner$("<div>").addClass("bbi-widget-error-icon").attr({"data-tooltip":this.locale.errorMessage.dataRetrievalError}).addClass("e-dbrd-hoverable"),this.bbdesigner$("<div>").addClass("e-dbrd-controlError-msg").html(this.locale.errorMessage.dataRetrievalError),this.bbdesigner$("<div class='bbi-dbrd-link-btn'>").html(this.locale.errorMessage.knowMore));n.css({display:"table"});i.append(this.bbdesigner$("<button type='button' class='reload-retrievalerror-icon bbi-reload-button bbi-dbrd-designer-hand-cursor'><span style = 'padding-left:6px'>Reload<\/span><\/button>").addClass("bbi-dbrd-refresh-link-btn").css({"font-size":"13px"}).data({control:n}));n.append(i);this.bbdesigner$(n).on("click",".bbi-dbrd-link-btn",this.bbdesigner$.proxy(this.dashboardDesigner.modules.util.alertDialog,this.dashboardDesigner.modules.util,this.locale.alertDialogTitle.dashboardDesigner,t.ViewData.OuterMessage,IconType.errors,AlertType.Alert,!0,BoldBIDashboard.isNullOrUndefined(t.ViewData.Message)?this.locale.errorMessage.widgetDataUpdateFailed:t.ViewData.Message));r=this;i.find(".reload-retrievalerror-icon").bind("click",function(){r.getViewData();r.viewDataContainer.find(".bbi-loader-background").css({display:"block"});r.viewDataContainer.data("BoldBIDashboardWaitingPopup").show();r.updateWaitingIndicatorStyle()})}},n.prototype.updateGridSize=function(){var t,i,n;if(!BoldBIDashboard.isNullOrUndefined(this.tableElement)&&!BoldBIDashboard.isNullOrUndefined(this.gridItem)){for(t=this.dashboardDesigner.element,i=this.tableElement.find(".e-table"),n=0;n<i.length;n++)i.css("width","100%");var f=parseInt(t.find(".bbi-viewdata-dialog").css("top"),10),u=t.find(".bbi-viewdata-dialog").height()-t.find(".bbi-viewdata-dialog .e-header").outerHeight(),r=this.tableElement.data("BoldBIDashboardGrid");for(n=0;n<r.model.columns.length;n++)this.tableElement.find("#"+r.model.columns[n].field+"_filterBarcell").attr("autocomplete","off");r.option({scrollSettings:{width:this.gridItem.width(),height:u-this.gridItem.find(".e-columnheader").height()-this.gridItem.find(".e-filterbar").height()}});this.refreshHeader()}},n.prototype.refreshHeader=function(){var n,t;BoldBIDashboard.isNullOrUndefined(this.tableElement)||(n=this.tableElement.data("BoldBIDashboardGrid"),!BoldBIDashboard.isNullOrUndefined(n._scrollObject)&&n._scrollObject._hScroll&&(t=BoldBIDashboard.isNullOrUndefined(n._scrollObject.scrollLeft())?0:n._scrollObject.scrollLeft(),n.getHeaderContent().find("div").first().scrollLeft(t)))},n.prototype.generateColumns=function(n,t){var u=!0,f,r,i;if(this.isSelectedField&&!BoldBIDashboard.isNullOrUndefined(n)){if(t=t.filter(function(n){return n.IsVisible===!0}),this.gridColums=[],f=Object.keys(n),f.length>0)for(r=0;r<f.length;r++)i={},u=this.isMeasure(t[r]),i.field=f[r],i.headerText=n[f[r]],i.width=100,i.tooltip="{{:value}}",i.clipMode="ellipsiswithtooltip",i.headerTextAlign=BoldBIDashboard.TextAlign.Left,i.textAlign=this.fieldInfoList[r].FieldType===FieldType.Measures?BoldBIDashboard.TextAlign.Right:BoldBIDashboard.TextAlign.Left,i.IsMeasure=u,i.MeasureFormat=i.IsMeasure?t[r].MeasureFormatting:null,i.fieldName=t[r].Name,i.type=u?"Number":t[r].FieldType===FieldType.DateTime?"date":"string",i.dateFormat=t[r].DateTimeFormat,this.gridColums.push(i)}else if(!BoldBIDashboard.isNullOrUndefined(t)&&t.length!==0)for(this.gridColums=[],r=0;r<t.length;r++)t[r].IsVisible&&(i={},u=this.isMeasure(t[r]),i.field=t[r].UniqueColumnName,i.headerText=t[r].DisplayName,i.width=100,i.tooltip="{{:value}}",i.clipMode="ellipsiswithtooltip",i.headerTextAlign=BoldBIDashboard.TextAlign.Left,i.textAlign=this.fieldInfoList[r].FieldType===FieldType.Measures?BoldBIDashboard.TextAlign.Right:BoldBIDashboard.TextAlign.Left,i.IsMeasure=u,i.MeasureFormat=i.IsMeasure?t[r].MeasureFormatting:null,i.fieldName=t[r].Name,i.type=u?"Number":t[r].FieldType===FieldType.DateTime?"date":"string",i.dateFormat=t[r].DateTimeFormat,this.gridColums.push(i))},n.prototype.isMeasure=function(n){return n.FieldActualType==="bbi-designer-dataset-string"||n.FieldActualType==="bbi-designer-dataset-datetime"?!1:n.FieldType===FieldType.Measures},n.prototype.actionComplete=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(this.tableElement)){var t=this.tableElement.data("BoldBIDashboardGrid");BoldBIDashboard.isNullOrUndefined(t)||(this.hasMoreRecord&&n.requestType==="refresh"&&this.updateDataSource(t),!this.hasMoreRecord&&!BoldBIDashboard.isNullOrUndefined(this.currentData)&&this.currentData.length<=100&&n.requestType==="filtering"&&!BoldBIDashboard.isNullOrUndefined(t._gridRecordsCount)&&this.updateRenderedRowDetails(t._gridRecordsCount),(n.requestType==="virtualscroll"||n.requestType==="sorting")&&(t.getScrollObject().refresh(),n.requestType==="sorting"&&t._scrollObject.scrollY(0)))}},n.prototype.updateDataSource=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(this.gridInstance)){var t=this.gridInstance.model.dataSource.dataSource.json;n._gridRecordsCount=t.length+1;n.model.pageSettings.totalPages=Math.ceil(n._gridRecordsCount/this.gridPageSize);n.model.dataSource.adaptor=null;this.bbdesigner$.extend(n.model.dataSource,this.getCustomDatamanager());this.refreshHeader();n._isLocalData=!1}},n.prototype.getCustomDatamanager=function(){var n=this,t=new BoldBIDashboard.Adaptor(null).extend({processQuery:this.bbdesigner$.proxy(this.processQuery,this),beforeSend:function(t,i){n.dashboardDesigner.beforeSendRequestForDataManager("OnDemandDataAction",i)},processResponse:this.bbdesigner$.proxy(this.processResponse,this)});return new BoldBIDashboard.DataManager({url:this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.viewData,adaptor:new t,crossDomain:!0})},n.prototype.processResponse=function(n){var t,i;if(BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(this.tableElement)||!BoldBIDashboard.isNullOrUndefined(n.Data.ViewData))BoldBIDashboard.isNullOrUndefined(n.Data.ViewData)||BoldBIDashboard.isNullOrUndefined(n.Data.ViewData.Error)||!n.Data.ViewData.Error||this.showViewDataError(this.viewDataContainer,n.Data);else if(t=this.tableElement.data("BoldBIDashboardGrid"),!BoldBIDashboard.isNullOrUndefined(t))return(this.currentData=JSON.parse(n.Data.data),i=0,this.hasMoreRecord=n.Data.hasMoreRecords,this.viewDataContainer.data("BoldBIDashboardWaitingPopup").hide(),t._requestType==="filtering"||t._requestType==="sorting")?(i=t._gridRecordsCount=this.hasMoreRecord?this.currentData.length+1:this.currentData.length,this.updateRenderedRowDetails(this.currentData.length),{result:this.currentData,count:i}):(i=this.hasMoreRecord?t._gridRecordsCount+this.currentData.length:t._gridRecordsCount+this.currentData.length-1,t.model.pageSettings.totalPages=Math.ceil(t._gridRecordsCount/this.gridPageSize),this.updateRenderedRowDetails(this.hasMoreRecord?i-1:i),{result:this.currentData,count:i});return{result:"",count:0}},n.prototype.processQuery=function(n,t){var u=this.bbdesigner$.extend(!0,[],this.fieldInfoList),f=this.dashboardDesigner.modules.dynamicParameterPanel,e=!BoldBIDashboard.isNullOrUndefined(f.currentValueCollection)&&f.currentValueCollection.length>0?f.currentValueCollection:null,i,r;if(!BoldBIDashboard.isNullOrUndefined(t))for(i=0;i<t.queries.length;i++)r=t.queries,r[i].fn==="onPage"?this.virtualScrollSettings.StartIndex=(r[i].e.pageIndex-1)*r[i].e.pageSize+1:r[i].fn==="onSortBy"?u=this.applyCustomSorting(r[i],u):r[i].fn==="onWhere"&&(u=this.applyFilteringInfo(r[i],u));this.updateOrderdFields(u);this.viewDataContainer.data("BoldBIDashboardWaitingPopup").show();this.updateWaitingIndicatorStyle();var o=this.dashboardDesigner.designerPanel.banner.filterConfiguration.getAllWidgetSelectedValues(),s=this.dashboardDesigner.modules.dynamicParameterPanel.getAllFilterWidgetParameterSelectedValues(null,""),h=[];return h.push(this.widgetInstance.Name),{url:n.dataSource.url,type:"POST",contentType:"application/json",data:JSON.stringify({widgetsId:h,selectedValuesList:BoldBIDashboard.isNullOrUndefined(o)?"":JSON.stringify(o),startindex:this.virtualScrollSettings.StartIndex,fieldInfo:u,isSelectedField:this.isSelectedField,selectedParameterValue:BoldBIDashboard.isNullOrUndefined(s)?"":JSON.stringify(s),paramCollection:BoldBIDashboard.isNullOrUndefined(e)?"":JSON.stringify(e),isAllowFilter:!0})}},n.prototype.applyCustomSorting=function(n,t){var e=this,i,f,u,r;if(!BoldBIDashboard.isNullOrUndefined(n)){for(i=0;i<t.length;i++)f=this.isSelectedField?t[i].Id:t[i].UniqueColumnName,f===n.e.fieldName&&(t[i].CustomSorting={CustomSortType:CustomSortType.Alphabetic,CustomSortOrder:n.e.direction==="ascending"?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,SortingOrder.Ascending):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,SortingOrder.Descending)});for(u=t.filter(function(t){var i=e.isSelectedField?t.Id:t.UniqueColumnName;if(i!==n.e.fieldName)return t}),r=0;r<u.length;r++)u[r].CustomSorting=null,u[r].Sorting=SortingOrder[SortingOrder.None]}return t},n.prototype.applyFilteringInfo=function(n,t,i){var r,u,f,e;if(!BoldBIDashboard.isNullOrUndefined(n)){for(r=[],u=[],this.getFilteredQuery(n.e,u),f=0;f<t.length;f++)for(e=0;e<u.length;e++)r=this.getFilterFieldInfo(t[f],u[e],r);t=i?r:this.bbdesigner$.merge(t,r)}return t},n.prototype.getFilteredQuery=function(n,t){var i,r;if(n.isComplex)for(i=0;i<n.predicates.length;i++)r=this.getFilteredQuery(n.predicates[i],t),BoldBIDashboard.isNullOrUndefined(r)||t.push(r);else BoldBIDashboard.isNullOrUndefined(n)||t.push(n)},n.prototype.getFilterFieldInfo=function(n,t,i){var f;if(this.isSelectedField?n.Id===t.field:n.UniqueColumnName===t.field){var r=new FilterInfo,e=null,u=this.bbdesigner$.extend(!0,{},n);n.FieldActualType==="bbi-designer-dataset-string"?(t.operator=t.operator==="equal"?"contains":t.operator,r.DimensionFilterInfo=this.getDimensionFilterInfo(t.operator,t.value)):n.FieldActualType==="bbi-designer-dataset-number"?(f=this.convertStringToDouble(t.value),BoldBIDashboard.isNullOrUndefined(f)||isNaN(Number(f))?(t.operator=t.operator==="equal"?"contains":t.operator,r.DimensionFilterInfo=this.getDimensionFilterInfo(t.operator,t.value)):r.MeasureFilterInfo=this.getMeasureFilterInfo(t.operator,f)):n.FieldActualType==="bbi-designer-dataset-datetime"&&(isNaN(Number(t.value))?r.DimensionFilterInfo=Date.parse(t.value)?this.getDimensionFilterInfo(t.operator,t.value):this.getDimensionFilterInfo(t.operator,t.value):(r.DimensionFilterInfo=this.getDimensionFilterInfo(t.operator,t.value),u.DateTimeFormat=n.DateTimeFormat),BoldBIDashboard.isNullOrUndefined(r.DimensionFilterInfo)||BoldBIDashboard.isNullOrUndefined(r.DimensionFilterInfo.AllowFilterInfo.FilterValues[0])||isNaN(Number(t.value))||(e=r.DimensionFilterInfo.AllowFilterInfo.FilterValues[0],e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/),u.DateTimeFormat=BoldBIDashboard.isNullOrUndefined(e)?DateTimeFormat.Default:DateTimeFormat.Date));u.FilterInfo=r;u.IsVisible=!1;i.push(u)}return i},n.prototype.getDimensionFilterInfo=function(n,t){return{IsAllowFilteringApplied:!0,AllowFilterInfo:{IsInclude:!0,Conditions:n,FilterValues:[t]}}},n.prototype.getMeasureFilterInfo=function(n,t){return{Conditions:this.convertOperatorForMeasureFiltering(n),Values:[t]}},n.prototype.convertOperatorForMeasureFiltering=function(n){switch(n){case"greaterthan":return NumberFilterOption.GreaterThan;case"lessthan":return NumberFilterOption.LessThan;case"greaterthanorequal":return NumberFilterOption.GreaterThanOrEquals;case"lessthanorequal":return NumberFilterOption.LessThanOrEquals;default:return NumberFilterOption.Equals}},n.prototype.updateRenderedRowDetails=function(n){var t,i;BoldBIDashboard.isNullOrUndefined(n)||(t=n===0?n+" "+this.locale.rowsRetrieved.rowsRetrieved:n+" "+this.locale.rowsRetrieved.of+" "+this.totalRowCount+" "+this.locale.rowsRetrieved.rowsRetrieved,this.dashboardDesigner.element.find(".bbi-dbrd-viewdata-retrived-rows").text(t),i=this.dashboardDesigner.element.find(".bbi-dbrd-viewdata-retrived-rows-notifyicon"),i.attr({"data-tooltip":t}))},n.prototype.updateViewDataDialogStyle=function(){var i=this.viewDataContainer.data("BoldBIDashboardDialog");if(!BoldBIDashboard.isNullOrUndefined(i)){var r=this.dashboardDesigner.isMobileLayout(),n=this.dashboardDesigner.element.width()*.9,u=r?.8:.9,t=this.dashboardDesigner.element.height()*u;i.setModel({width:n,height:t,minWidth:n>=400?400:n,minHeight:t>=235?235:t})}},n.prototype.updateWaitingIndicatorStyle=function(){var n=this.viewDataContainer.data("BoldBIDashboardWaitingPopup"),t;BoldBIDashboard.isNullOrUndefined(n)||(t=this.dashboardDesigner.element.find(".bbi-viewdata-dialog .e-header").outerHeight(),this.bbdesigner$(n.maindiv).css("height",this.dashboardDesigner.element.find(".bbi-viewdata-dialog").outerHeight()-t))},n.prototype.updateOrderdFields=function(n){var t=n.filter(function(n){var t=isNaN(n.Sorting)?n.Sorting:SortingOrder[n.Sorting];return t!==SortingOrder[SortingOrder.None]});t.length===0&&n.length>0&&(n[0].Sorting=SortingOrder.Ascending)},n.prototype.viewDataExport=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)){var f=this,t=f.modules.viewDataDialog,r=this.bbdesigner$(event.target),u=r.attr("data-name"),e=this.exportPanel.getPopupMenuItems(t.widgetInstance,u,!0),i=BoldBIDashboard.isNullOrUndefined(t.widgetInstance)?u:t.widgetInstance.Name;if(this.exportPanel.isMobileView)this.exportPanel.onExportMenuClick(!0,i,r);else this.exportPanel.populateMenuItems(t.viewDataContainer,e,i,!1,!0,!1,!0),this.exportPanel.showExportMenu(i+"_ViewData",n,!0)}},n.prototype.resize=function(){var n=this.viewDataContainer.data("BoldBIDashboardDialog");BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(n.scroller)||!this.viewDataContainer.data("BoldBIDashboardDialog").element.is(":visible")||(this.dashboardDesigner.isMobileLayout()?this.dashboardDesigner.element.find(".bbi-viewdata-dialog").addClass("bbi-mobile-viewdata"):this.dashboardDesigner.element.find(".bbi-viewdata-dialog").removeClass("bbi-mobile-viewdata"),this.updateViewDataDialogStyle(),this.rearrangeHeaderElements(),this.viewdataDlgScrollerResize(),this.updateGridSize(),this.updateColumnWidth(),this.gridInstance.getScrollObject().refresh(),this.dashboardDesigner.element.find("#"+this.id+"_viewdata_select_column_listbox").length>0&&this.updateListboxPostision())},n.prototype.viewdataDlgScrollerResize=function(){var n=this.viewDataContainer.data("BoldBIDashboardDialog"),t,i;(n.scroller.element.children().hasClass("e-vscrollbar")||n.scroller.element.children().hasClass("e-hscrollbar")||this.dashboardDesigner.isMobileLayout())&&(t=n.element.outerWidth(),i=n.element.outerHeight(),n._updateScroller(i,t))},n.prototype.closeViewDataDialog=function(n){this.dashboardDesigner.triggerViewerEvent(ViewerEvent.actionBegin,ViewerEventType.viewDataDialogClose,n);this.resetViewDataValues(n);this.checkAll=!1;this.allFieldInfo=[];this.dashboardDesigner.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.viewDataDialogClose,n)},n.prototype.resetViewDataValues=function(n){var t,i;BoldBIDashboard.isNullOrUndefined(n)||n.type!=="close"||(n.model.position={X:0,Y:0},this.widgetInstance=null);this.gridPageSize=100;this.gridColums=[];this.currentData=[];this.hasMoreRecord=!1;this.totalRowCount="";this.gridInstance=null;this.gridItem=null;this.fieldInfoList=[];this.isSelectedField=!1;this.virtualScrollSettings=new VirtualScrollSettings;BoldBIDashboard.isNullOrUndefined(this.viewDataContainer)||this.viewDataContainer.data("BoldBIDashboardWaitingPopup").hide();BoldBIDashboard.isNullOrUndefined(this.tableElement)||(t=this.tableElement.data("BoldBIDashboardGrid"),BoldBIDashboard.isNullOrUndefined(t)||(t.destroy(),this.viewDataContainer.find(".e-griditem.e-dbrd-widget").remove()));this.viewDataContainer.find(".bbi-loader-background").length>0&&this.viewDataContainer.find(".bbi-loader-background").remove();i=this.dashboardDesigner.element.find("#"+this.id+"_viewdata_select_column_listbox");i.length>0&&i.hide()},n.prototype.GetFieldInfos=function(){var t,n,i,f,r,u;if(this.dataset=this.dashboardDesigner.modules.dataSet.datasets,t=this.dashboardDesigner.modules.dataConfiguration.convertDataGroupInfoToFieldInfo(this.widgetInstance.dataGroupInfo,null,this.selectedListInShowALL,!0,!0,this.isSelectedField),n=[],n.push({Name:"Select All",Id:this.allSpecialChar+"_select_All"}),this.isSelectedField&&this.checkAll&&this.fieldInfoList.length>0)this.fieldInfoList.forEach(function(t){t.IsVisible===!0?n.push(t):n});else for(this.isSelectedField?this.fieldInfoList.forEach(function(t){t.IsVisible===!0?n.push(t):n}):n,i=0;i<this.dataset.length;i++)if(this.dataset[i].Id===this.widgetInstance.dataGroupInfo.DataSourceID){for(f=function(u){var f=r.dataset[i].Fields[u],o=!1,s=t.filter(function(n){return n.Name===f.Name}),e=t.indexOf(s[0]);e>-1&&(f.DisplayName=t[e].DisplayName,f.IsMeasure=t[e].FieldType===FieldType.Measures,f.MeasureFormat=f.IsMeasure?t[e].MeasureFormatting:null,f.type=t[e].FieldType===FieldType.Measures?"Number":t[e].FieldType===FieldType.DateTime?"date":"string",f.dateFormat=t[e].DateTimeFormat);r.isSelectedField?n.filter(function(n){n.Id===f.Id&&(o=!0)}):o;o||f.IsParameterField||n.push({Name:f.Name,Id:f.Id,SummaryType:SummaryType.NONE,FieldType:r.getFieldType(f.TypeName),DateTimeFormat:f.dateFormat,DisplayName:f.DisplayName,IsMeasure:f.IsMeasure,MeasureFormatting:f.MeasureFormat,FilterInfo:null,Sorting:SortingOrder[SortingOrder.None],CustomSorting:null,FieldActualType:BoldBIDashboard.DashboardUtil.getDatasetTypeIcon(f.TypeName),UniqueColumnName:null,IsAggregatedExpression:f.IsAggregatedExpression,IsExpression:f.IsExpression,IsVisible:!0,type:f.type})},r=this,u=0;u<this.dataset[i].Fields.length;u++)f(u);break}return n},n.prototype.getFieldType=function(n){return n.toLocaleLowerCase()==="String".toLocaleLowerCase()||n.toLocaleLowerCase()==="Date".toLocaleLowerCase()?FieldType.Dimensions:FieldType.Measures},n.prototype.renderSelectColumnListBox=function(n){var r,u,i,t;if(!BoldBIDashboard.isNullOrUndefined(n)){if(this.allFieldInfo=this.GetFieldInfos(),r=BoldBIDashboard.buildTag("div.bbi-dbrd-viewdata-selectcolumn-listbox e-ddl-popup e-dialog","",{"z-index":"inherit",width:"240px",height:"250px",display:"block",position:"absolute",overflow:"hidden"},{id:this.id+"_viewdata_select_column_listbox"}),u=BoldBIDashboard.buildTag("div.bbi-dbrd-field-listelement-wrap bbi-dbrd-control bbi-dbrd-designer-scroller","",{height:"200px",width:"inherit"},{id:this.id+"_select_column_list_wrap"}),this.listBoxElement=BoldBIDashboard.buildTag("ul.bbi-dbrd-select-column-listelement e-listbox e-js e-ul","",{height:"200px","user-select":"none",width:"inherit"},{id:this.id+"_select_column_list_elements"}),this.listBoxElement.BoldBIDashboardListBox({dataSource:this.allFieldInfo,fields:{id:"Id",text:"Name"},showCheckbox:!0,allowMultiSelection:!0,allowVirtualScrolling:!0,virtualScrollMode:"continuous",checkChange:this.bbdesigner$.proxy(this.listBoxItemSelected,this),select:this.bbdesigner$.proxy(this.listBoxItemSelected,this),change:this.bbdesigner$.proxy(this.listBoxItemSelected,this),itemRequestCount:this.virtualScrollSettings.PageSize}),this.fieldInfoList=this.fieldInfoList.filter(function(n){return n.IsVisible===!0}),this.allFieldInfo.length-1===this.fieldInfoList.length)this.listBoxElement.data("BoldBIDashboardListBox").checkAll();else for(i=0;this.fieldInfoList.length>i;i++)for(t=0;t<this.allFieldInfo.length;t++)this.fieldInfoList[i].Id===this.allFieldInfo[t].Id&&this.listBoxElement.BoldBIDashboardListBox("checkItemByIndex",t);u.append(this.listBoxElement);this.dashboardDesigner.element.find(".bbi-viewdata-dialog").append(r);this.updateListboxPostision();this.renderButtonContainer();r.append(u,this.buttonContainer);this.createScrollBar()}},n.prototype.createScrollBar=function(){var n=this.dashboardDesigner.element.find(".bbi-dbrd-field-listelement-wrap");n.BoldBIDashboardScroller({scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,height:this.listBoxElement.height(),enableTouchScroll:!0,autoHide:!0,buttonSize:10});BoldBIDashboard.DashboardUtil.updateScrollerVisibility(this.id+"_select_column_list_wrap")},n.prototype.renderButtonContainer=function(){var n,t;this.buttonContainer=BoldBIDashboard.buildTag("div.viewdata-selectcolumn-button-container e-footerbar","","",{id:"aplcnlBtn_container"});n=BoldBIDashboard.buildTag("button.bbi-dbrd-selectColum-applybtn bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.dialogOptions.applyButtonText,{float:"right",left:"15px"},{id:this.id+"_listbox_apply_btn",type:"button"});n.off("click",this.bbdesigner$.proxy(this.displySelectColumnValues,this));n.on("click",this.bbdesigner$.proxy(this.displySelectColumnValues,this));t=BoldBIDashboard.buildTag("button.bbi-dbrd-selectColum-cancelBtn bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.locale.dialogOptions.cancelButtonText,{float:"right",left:"10px"},{id:this.id+"_listbox_cancel_btn",type:"button"});t.off("click",this.bbdesigner$.proxy(this.closeSelectColumDialog,this));t.on("click",this.bbdesigner$.proxy(this.closeSelectColumDialog,this));this.buttonContainer.append(t,n)},n.prototype.listBoxItemSelected=function(n){if(!BoldBIDashboard.isNullOrUndefined(n.event)&&n.isInteraction){if(this.allStateCheck(n))return}else n.data.Id!=="&ZeroWidthSpace;_select_All"&&this.selectAllCheckBoxState()},n.prototype.allStateCheck=function(n){var t=this.listBoxElement.data("BoldBIDashboardListBox"),i=!1,r,u;return BoldBIDashboard.isNullOrUndefined(t)||(BoldBIDashboard.isNullOrUndefined(n)||t.getIndexByText(n.text)!==0||n.item.attr("id").indexOf(this.allSpecialChar)===-1?(r=this.listBoxElement.find("li .e-chkbox-wrap").filter("[aria-checked = false]"),r.length===1?(u=r.parent("li"),u.index()===0&&u.attr("id").indexOf(this.allSpecialChar)!==-1?(t.checkItemByIndex(0),this.checkAll=!0,i=!0):(t.uncheckItemByIndex(0),this.selectAllCheckBoxState(),this.checkAll=!1)):r.length>1?(t.uncheckItemByIndex(0),this.selectAllCheckBoxState(),this.checkAll=!1):i=!0):(n.event.isChecked?(t.checkAll(),this.checkAll=!0):BoldBIDashboard.isNullOrUndefined(n.event.isChecked)&&n.item.attr("id")==="&ZeroWidthSpace;_select_All"?t.checkedStatus?(t.checkAll(),this.checkAll=!0):(t.unCheckAll(),this.checkAll=!1):(t.unCheckAll(),this.checkAll=!1),i=!0),this.enableOrDisableApplyBtn()),i},n.prototype.enableOrDisableApplyBtn=function(){var t=this.listBoxElement.find("li .e-chkbox-wrap").filter("[aria-checked = false]"),n=this.dashboardDesigner.element.find("#"+this.id+"_listbox_apply_btn");t.length===this.allFieldInfo.length?n.addClass("e-disable").css("pointer-events","none"):n.hasClass("e-disable")&&n.removeClass("e-disable").css("pointer-events","auto")},n.prototype.selectAllCheckBoxState=function(){var n=this.listBoxElement.find("li .e-chkbox-wrap").filter("[aria-checked = false]");n.length===this.allFieldInfo.length?(this.listBoxElement.find("li").filter('[id= "&ZeroWidthSpace;_select_All"]').find(".e-chkbox-wrap .e-chkbox-small span").removeClass("e-chk-indeter").addClass("e-chk-inact"),this.listBoxElement.find("li .e-chkbox-wrap .e-chkbox-small .e-chk-inact span").removeClass("e-chk-inact e-chk-indeter e-stop ")):n.length!==this.allFieldInfo.length&&(this.listBoxElement.find("li").filter('[id= "&ZeroWidthSpace;_select_All"]').find(".e-chkbox-wrap .e-chkbox-small span").removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.listBoxElement.find("li .e-chkbox-wrap .e-chkbox-small .e-chk-indeter span").addClass("e-stop").removeClass("e-chk-indeter"))},n.prototype.displySelectColumnValues=function(){BoldBIDashboard.isNullOrUndefined(event)||(this.resetViewDataValues(null),BoldBIDashboard.isNullOrUndefined(this.widgetInstance)||(this.isSelectedField=!0,this.viewDataContainer.data("BoldBIDashboardWaitingPopup").show(),this.updateWaitingIndicatorStyle(),this.renderGrid(),this.updateRenderedRowDetails(0),this.getViewData(),this.dashboardDesigner.element.find("#"+this.id+"_viewdata_select_column_listbox").remove()))},n.prototype.closeSelectColumDialog=function(){this.dashboardDesigner.element.find("#"+this.id+"_viewdata_select_column_listbox").remove()},n.prototype.getSelectFieldInfos=function(){var t,r,i,n,u;if(this.updateFieldInfos(),this.checkAll)for(t=this.allFieldInfo.filter(function(n){return n.Id!=="&ZeroWidthSpace;_select_All"}),n=0;n<t.length;n++)this.fieldInfoList.push(t[n]);else for(r=this.dashboardDesigner.element.find(".bbi-dbrd-select-column-listelement").data("BoldBIDashboardListBox"),i=r.getCheckedItems().filter(function(n){return n.id!=="&ZeroWidthSpace;_select_All"}),n=0;n<i.length;n++)u=i[n].data,this.fieldInfoList.push(u)},n.prototype.updateFieldInfos=function(){if(this.fieldInfoList=this.fieldInfoList.filter(function(n){return n.FilterInfo!==null}),this.fieldInfoList.length>0)for(var n=0;n<this.fieldInfoList.length;n++)this.fieldInfoList[n].IsVisible=!1},n.prototype.updateListboxPostision=function(){var n=this.dashboardDesigner.element.find("#"+this.id+"_selectColumn_btn_container").offset().left-this.viewDataContainer.offset().left+this.dashboardDesigner.element.find("#"+this.id+"_selectColumn_btn_container").width()-240,t=this.viewDataContainer.offset().top-this.dashboardDesigner.element.find("#"+this.id+"_selectColumn_btn_container").offset().top+2;this.dashboardDesigner.element.find("#"+this.id+"_viewdata_select_column_listbox").css({top:t,left:n})},n.prototype.convertStringToDouble=function(n){var i=n===null||n===void 0?void 0:n.match(/(\d+(\.\d+)?)\s*([KkMmBbTt]?)?/),t,r;if(i){t=parseFloat(i[1]);r=i[3]?i[3].toUpperCase():"";switch(r){case"K":return t*1e3;case"M":return t*1e6;case"B":return t*1e9;case"T":return t*1e12;default:return t}}return null},n}(),InternalBanner,InternalFilterOverview,InternalExport,ExcelType,NotificationStatus,InternalFilterConfiguration,InternalMasterSlaveFilterSerializationHelper,InternalLabelParameter,InternalMaximize,InternalAxisRangeSettings,InternalLayoutDialog,InternalDataSource,ExtractionModeDetails,PrepareDataSourceDetails,ExtractionMode,CustomQueryExtractionMode,StoredProcedure,InternalPropertyPanel,InternalPropertyGridItem,__extends,BoldBIDashboard,InternalColorCustomization,InternalAdvancedColorCustomization,ColorIconType,InternalRefreshDialog,InternalSortDialog,CustomSortType;window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.ViewDataDialog",InternalViewDataDialog,window);InternalBanner=function(){function n(n,t){this.locale=null;this.isCacheRequestNeeded=!1;this.datacachePopupNotification=null;this.designId=n.designId;this.locale=t.getLocalizationContent();this.description=n.description;this.title=n.title;this.enableComment=n.enableComment;this.enablePdf=n.enablePdf;this.enableImage=n.enableImage;this.enableExcel=n.enableExcel;this.enableCsv=n.enableCsv;this.dashboardDesigner=t;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;(this.dashboardDesigner.isViewMode()||this.dashboardDesigner.isDesignMode())&&(this.filterConfiguration=this.dashboardDesigner.modules.masterSlaveFilter)}return Object.defineProperty(n.prototype,"PreviewAsInstance",{get:function(){return this.previewAsInst},enumerable:!1,configurable:!0}),n.prototype.toggleFilterOverview=function(n,t){var u,i,f,r;t===void 0&&(t=!0);this.dashboardDesigner.isMobileLayout()?(this.bannerPanel.is(":visible")?(this.bannerPanel.closest(".bbi-dashboarddesigner-designPanel").find(".bbi-dashboarddesigner-overview-panel").css({display:n?"block":"none"}),i=this.bannerPanel.find(".bbi-dbrd-filterListMenu"),i.removeClass("bbi-dashboarddesigner-active"),i.next(".e-banner-verticalsplitline").css({display:"none"}),i.css({display:"none"}),u=2,this.dashboardDesigner.designerPanel.designPanel.css({height:this.dashboardDesigner.modules.Mode.designPanelTag.height()-this.dashboardDesigner.designerPanel.getCanvasTop()+u}),n?(this.bannerPanel.removeClass("bbi-dashboarddesigner-bannerpanel-box-shadow"),this.bannerOverview.addClass("bbi-dashboarddesigner-bannerpanel-box-shadow"),this.bannerOverview.css({position:"absolute",top:this.bannerPanel.height(),background:this.dashboardDesigner.modules.themeHelper.getFilterOverviewBackground()})):(this.bannerPanel.addClass("bbi-dashboarddesigner-bannerpanel-box-shadow"),this.bannerOverview.removeClass("bbi-dashboarddesigner-bannerpanel-box-shadow"),this.bannerOverview.css({position:"relative",top:"0px"}))):this.bannerPanel.closest(".bbi-dashboarddesigner-designPanel").find(".bbi-dashboarddesigner-overview-panel").css({display:"none"}),(this.dashboardDesigner.isViewMode()||this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.designpreview)&&this.dashboardDesigner.designerPanel.updatePreviewCanvasSize(),this.dashboardDesigner.designerPanel.updateScrollBar()):(this.bannerOverview.css({display:"none"}),i=this.bannerPanel.find(".bbi-dbrd-filterListMenu"),f=this.isNextElementVisibleForFilterOverviewGroup(i),f||(r=i.nextAll(".e-banner-verticalsplitline").first(),this.isPreviousOrNextElementsVisible(r,!1)&&r.css({display:this.dashboardDesigner.model.enableFilterOverview&&n?"block":"none"})),i.css({display:this.dashboardDesigner.model.enableFilterOverview&&n?"flex":"none"}));t&&this.resizeForBannerPanelTag()},n.prototype.isNextElementVisibleForFilterOverviewGroup=function(n){for(var u,i=!1,r=n.nextUntil(".e-banner-verticalsplitline"),t=0;t<r.length;t++)if(u=r.eq(t),this.isElementVisible(u)){i=!0;break}return i},n.prototype.isNextOrPrevious=function(n){return this.isPreviousOrNextElementsVisible(n,!1)&&this.isPreviousOrNextElementsVisible(n,!0)},n.prototype.isElementVisible=function(n){var t=!1;return BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n.css("display"))||n.css("display")==="none"||(t=!0),t},n.prototype.splitLineEmbedding=function(n,t){var i,r,u;this.dashboardDesigner.element.find("#"+this.designId+"_datacache_view_text").length>0&&n.length>0&&(i=this.createSeparator(),r=this.dashboardDesigner.element.find("#"+this.designId+"_datacache_view_text"),r.after(i),u=t.length>0&&this.isNextOrPrevious(t),BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.cacheSettings)||BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.cacheSettings.isCacheEnable)||!this.dashboardDesigner.cacheSettings.isCacheEnable||u||this.dashboardDesigner.model.mode!==BoldBIDashboard.Designer.mode.view?i.css({display:"none"}):i.css({display:"block"}))},n.prototype.updateSplitLineVisibility=function(){for(var n,i=this.bannerPanel.find(".e-banner-verticalsplitline"),t=0;t<i.length;t++)n=i.eq(t),this.isNextOrPrevious(n)?n.css("display","block"):n.css("display","none")},n.prototype.isPreviousOrNextElementsVisible=function(n,t){for(var u,r=t?n.prevUntil(".e-banner-verticalsplitline"):n.nextAll(),i=0;i<r.length;i++)if(u=r.eq(i),u.length>0&&this.isElementVisible(u))return!0;return!1},n.prototype.updateSplitlineVisibilityOndemand=function(n){n.length>0&&this.isNextOrPrevious(n)?n.css({display:"block"}):n.css({display:"none"})},n.prototype.updateFilterOverviewByLayout=function(){var t,n,i;this.bannerPanel.is(":visible")&&(this.dashboardDesigner.isMobileLayout()?(this.bannerPanel.find(".bbi-dbrd-filterListMenu").is(":visible")?(this.bannerPanel.find(".bbi-dbrd-filterListMenu").next(".e-banner-verticalsplitline").css({display:"none"}),this.bannerPanel.find(".bbi-dbrd-filterListMenu").css({display:"none"}),this.bannerOverview.css({display:"block",position:"absolute",top:this.bannerPanel.height(),background:this.dashboardDesigner.modules.themeHelper.getFilterOverviewBackground()}),this.bannerPanel.removeClass("bbi-dashboarddesigner-bannerpanel-box-shadow"),this.bannerOverview.addClass("bbi-dashboarddesigner-bannerpanel-box-shadow"),this.dashboardDesigner.designerPanel.designPanel.css({height:this.dashboardDesigner.designerPanel.designPanel.height()-this.bannerOverview.height()})):(this.bannerPanel.addClass("bbi-dashboarddesigner-bannerpanel-box-shadow"),this.bannerOverview.removeClass("bbi-dashboarddesigner-bannerpanel-box-shadow")),this.bannerPanel.find(".bbi-dashboard-banner-menu").css({display:"none"}),this.bannerPanel.find(".bbi-dashboard-banner-link").css({display:"none"}),this.bannerPanel.find(".bbi-dashboard-banner-refresh").css({display:"none"}),this.bannerPanel.find(".bbi-dashboard-banner-optionmenu").css({display:"none"}),this.bannerPanel.find(".server-banner-icon").css({display:"none"}),this.bannerPanel.find(".server-banner-icon").next(".e-banner-verticalsplitline").addClass("bbi-dashboarddesigner-display-none"),this.updateFavIconsVisibility(!1),this.bannerPanel.find(".e-dashboard-banner-smallMenu").css("display","block"),this.bannerPanel.find(".e-dashboard-banner-backButton").parents("a").next(".e-banner-verticalsplitline").addClass("bbi-dashboarddesigner-display-none"),this.bannerPanel.find(".bbi-filteroverview-verticalsplitline").length>0&&(t=this.bannerPanel.find(".bbi-filteroverview-verticalsplitline").prev(),this.bannerPanel.find(".bbi-filteroverview-verticalsplitline").css("display",t.css("display")))):(n=this.bannerPanel.find(".bbi-dbrd-filterListMenu"),this.bannerOverview.find(".bbi-dbrd-filterListMenu").is(":visible")&&(n.next(".e-banner-verticalsplitline").css({display:"block"}),n.css({display:"block"}),this.bannerOverview.css({display:"none",position:"relative",top:"0px"})),this.bannerPanel.addClass("bbi-dashboarddesigner-bannerpanel-box-shadow"),this.bannerOverview.removeClass("bbi-dashboarddesigner-bannerpanel-box-shadow"),this.bannerPanel.find(".bbi-dashboard-banner-menu").css({display:"block"}),this.bannerPanel.find(".bbi-dashboard-banner-link").css({display:"block"}),this.bannerPanel.find(".bbi-dashboard-banner-refresh").css({display:"block"}),i=this.dashboardDesigner.modules.serialization.dashboardPropertyJson.DashboardExport.EnableImage||this.dashboardDesigner.modules.serialization.dashboardPropertyJson.DashboardExport.EnablePdf||this.dashboardDesigner.modules.serialization.dashboardPropertyJson.DashboardExport.EnableExcel||this.dashboardDesigner.modules.serialization.dashboardPropertyJson.DashboardExport.EnableCsv,this.dashboardDesigner.model.IsEmbed&&!i?this.bannerPanel.find(".bbi-dashboard-banner-optionmenu").css({display:"none"}):this.bannerPanel.find(".bbi-dashboard-banner-optionmenu").css({display:"block"}),this.bannerPanel.find(".server-banner-icon").css({display:"block"}),this.bannerPanel.find(".server-banner-icon").next(".e-banner-verticalsplitline").removeClass("bbi-dashboarddesigner-display-none"),this.updateFavIconsVisibility(!0),this.bannerPanel.find(".e-dashboard-banner-smallMenu").css("display","none"),this.bannerPanel.closest(".bbi-dashboarddesigner-designPanel").find(".bbi-dbrd-filterListMenuPopUp").length>0&&this.bannerPanel.closest(".bbi-dashboarddesigner-designPanel").find(".bbi-dbrd-filterListMenuPopUp").remove()),this.bannerPanel.closest(".bbi-dashboarddesigner-designPanel").find(".bbi-dbrd-filterListMenuPopUp").remove(),this.resizeForBannerPanelTag())},n.prototype.updateFavIconsVisibility=function(n){this.dashboardDesigner.model._favoriteSettings.enabled&&(this.dashboardDesigner.model._favoriteSettings.isFavorite?this.bannerPanel.find(".bbi-dashboard-banner-favorite").css({display:n?"block":"none"}):this.bannerPanel.find(".bbi-dashboard-banner-unfavorite").css({display:n?"block":"none"}))},n.prototype.toggleBannerForView=function(n,t){this.bannerPanel.css({display:n?"block":"none"});var i=this.bannerPanel.find("#"+this.designId+"_title");i.text(t.Header);this.wiredEvents()},n.prototype.toggleBanner=function(n,t,i){var f,r,u;if(i===void 0&&(i=!0),this.bannerPanel.css({display:n?"block":"none"}),f=this.bannerPanel.find("#"+this.designId+"_title"),f.text(t.Header),this.showDescription(t.Description),this.filterList=this.filterConfiguration.getAllWidgetSelectedValues(),this.filterList.length>0){for(r=!0,u=0;u<this.filterList.length;u++)if(this.filterList[u].IsParameterField)r=!1;else{r=!0;break}this.toggleFilterOverview(r,i)}else this.toggleFilterOverview(!1,i);this.wiredEvents()},n.prototype.createBanner=function(n){var i,r,t,u;this.bannerPanel=BoldBIDashboard.buildTag("div.bbi-dashboarddesigner-bannerPanel bbi-dashboarddesigner-bannerpanel-box-shadow","",{background:this.dashboardDesigner.modules.themeHelper.getBannerBackground(),position:"absolute"},{id:this.designId+"_bannerPanel"});i=BoldBIDashboard.buildTag("div.bbi-dashboard-banner-title bbi-dbrd-designer-hoverable","",{},{"data-tooltip":this.dashboardDesigner.model.dashboardName});r=BoldBIDashboard.buildTag("p",this.title,{},{id:this.designId+"_title"});i.append(r);t=BoldBIDashboard.buildTag("div.bbi-dynamic-title-container","",{},{});t.append(BoldBIDashboard.buildTag("span.bbi-dynamic-title","",{},{}));u=BoldBIDashboard.buildTag("div.bbi-dashboard-banner-description bbi-dbrd-designer-hoverable","",{},{});t.append(u);this.bannerOverview=BoldBIDashboard.buildTag("div.bbi-dashboarddesigner-overview-panel","",{},{});this.bannerPanel.append(this.createBackButton(),this.createFavoriteIcon(),i,t);this.bannerOverview.append(this.createFilterOverview());n.append(this.bannerPanel,this.bannerOverview)},n.prototype.renderCacheInfo=function(){return BoldBIDashboard.buildTag("label.bbi-dynamic-cache-container bbi-dashboarddesigner-display-none bbi-dbrd-designer-hoverable","",{float:"left",margin:"5px",position:"relative",color:"#828282",top:"15px","font-size":"14px"},{"enable-seperator":!1,id:this.designId+"_datacache_view_text"})},n.prototype.showCacheInfoIcon=function(){var t=BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.cacheSettings)?this.dashboardDesigner.modules.dataCache.isCacheEnable:this.dashboardDesigner.cacheSettings.isCacheEnable,i=!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.designerAppSettings)&&this.dashboardDesigner.model.designerAppSettings.cacheSettingServerInfo!==""?JSON.parse(this.dashboardDesigner.model.designerAppSettings.cacheSettingServerInfo):null,n=this.bannerPanel.find("#dashboard-refresh");!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0&&t&&n.attr("data-tooltip",this.locale.banerPanel.bannerRefreshDisplayText);t&&(i==null||i.isEnableRefreshTime)&&this.dashboardDesigner.isViewMode()?this.bannerPanel.find(".bbi-dynamic-cache-container").removeClass("bbi-dashboarddesigner-display-none"):this.bannerPanel.find(".bbi-dynamic-cache-container").addClass("bbi-dashboarddesigner-display-none")},n.prototype.createFavoriteIcon=function(){if(this.dashboardDesigner.model._favoriteSettings.enabled){var n=this.dashboardDesigner.model._favoriteSettings.isFavorite?"bbi-dbrd-designer-hoverable bbi-dbrd-background-theme  bbi-dashboard-banner-favorite":"bbi-dbrd-designer-hoverable bbi-dbrd-icon-background-theme bbi-dashboard-banner-unfavorite";return BoldBIDashboard.buildTag("div.bbi-dbrd-designer-hoverable "+n,"",{},{id:this.designId+"_favorite","data-tooltip":this.dashboardDesigner.model._favoriteSettings.isFavorite?this.locale.banerPanel.markUnFavorieTooltip:this.locale.banerPanel.markFavoriteTooltip,"data-name":"favorite"})}return null},n.prototype.createBackButton=function(){var n=this.dashboardDesigner.model.bannerSettings,r;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.backButtonSettings)&&n.backButtonSettings.enable){var t=BoldBIDashboard.buildTag("div","",{},{}),i=BoldBIDashboard.buildTag("a","",{},{href:n.backButtonSettings.URL}),u=BoldBIDashboard.buildTag("span.e-dashboard-banner-icon bbi-dbrd-icon-background-theme bbi-dbrd-designer-hoverable e-dashboard-banner-backButton ","",{},{"data-tooltip":n.backButtonSettings.tooltip});return i.append(u),t.append(i),r=BoldBIDashboard.buildTag("div.e-banner-verticalsplitline","",{},{}),t.append(r),t}},n.prototype.createClosePreviewButton=function(){var n=BoldBIDashboard.buildTag("div.bbi-dashboard-banner-closePreviewPanel bbi-dashboarddesigner-display-none","",{},{});return n.append(BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary",this.locale.menuBar.designButtonText,{height:"30px",float:"right"},{id:this.designId+"_closePreviewButton",type:"button"}))},n.prototype.createUserList=function(){var n;return this.dashboardDesigner.model.userSettings.hidePreviewAs?n:(n=BoldBIDashboard.buildTag("div.bbi-dashboard-banner-userSelectionPanel bbi-dashboarddesigner-display-none","",{},{}),this.previewAsInst=new BoldBIDashboard.Dashboard.UserSelectionPreviewMode(this.dashboardDesigner,n),n)},n.prototype.seperator=function(n){return BoldBIDashboard.buildTag("div.bbi-toolbar-seperator-previewmode bbi-dashboarddesigner-display-none","",{},{id:n})},n.prototype.ShowBackButton=function(){this.showCacheInfoIcon();this.bannerPanel.find(".bbi-dashboard-banner-closePreviewPanel").removeClass("bbi-dashboarddesigner-display-none");this.bannerPanel.find("#"+this.designId+"_preview_user_select_split_1").removeClass("bbi-dashboarddesigner-display-none");this.dashboardDesigner.model.userSettings.hidePreviewAs||(this.bannerPanel.find("#"+this.designId+"_preview_user_select_split_2").removeClass("bbi-dashboarddesigner-display-none"),this.bannerPanel.find(".bbi-dashboard-banner-userSelectionPanel").removeClass("bbi-dashboarddesigner-display-none"))},n.prototype.onClosePreviewButtonClick=function(){this.dashboardDesigner.revertPreviewInteraction();this.dashboardDesigner.showDesign();BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.element.find(".e-toast"))||this.dashboardDesigner.element.find(".e-toast").remove()},n.prototype.bannerPanelIcons=function(){var t=this,n=BoldBIDashboard.buildTag("div.bbi-dashboarddesigner-bannerPanel-iconcontainer","",{},{id:this.designId+"_bannerPanel_iconcontainer"}),r=[this.createMenuElement({name:"otheroption","class":"e-dashboard-banner-icon bbi-dbrd-icon-background-theme bbi-dbrd-designer-hoverable bbi-dashboard-banner-optionmenu",tooltip:this.locale.banerPanel.otherOptionTooltip}),this.createMenuElement({name:"dashboardmenu","class":"e-dashboard-banner-icon bbi-dbrd-designer-hoverable bbi-dbrd-icon-background-theme e-dashboard-banner-smallMenu",tooltip:this.locale.banerPanel.dashboardOptions})],i;if((this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.designpreview||this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.design)&&r.push(this.seperator(this.designId+"_preview_user_select_split_1"),this.createUserList(),this.seperator(this.designId+"_preview_user_select_split_2"),this.createClosePreviewButton()),i=[{groupId:"themegroup",groupName:"themegroup",enableGroupSeperator:!0,items:[this.renderCacheInfo(),this.createThemeElement()]},{groupId:"filteroverview",groupName:"filteroverview",enableGroupSeperator:!0,items:[this.createFilterOverview(),this.createDashboardParameterIcon()]},{groupId:"refreshgroup",groupName:"refreshgroup",enableGroupSeperator:!0,items:[this.createRefreshIcon()]},{groupId:"Option",groupName:"Option",enableGroupSeperator:!1,items:r}],this.enableComment=this.dashboardDesigner.modules.serialization.dashboardPropertyJson.EnableComments,this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view)try{this.dashboardDesigner._trigger("beforeBannerIconRender",{iconsinformation:i,enableComment:this.enableComment,dashboardPath:this.dashboardDesigner.model.dashboardPath})}catch(u){console.error(u)}this.bbdesigner$.each(i,function(i,r){t.bbdesigner$.each(r.items,function(i,u){var f=r.items.length-1===i;BoldBIDashboard.isNullOrUndefined(u)||(n.append(u),BoldBIDashboard.isNullOrUndefined(u.attr("enable-seperator"))||u.attr("enable-seperator")!=="true"||f||n.append(t.createSeparator()))});r.items.length>0&&!BoldBIDashboard.isNullOrUndefined(r.enableGroupSeperator)&&r.enableGroupSeperator&&n.append(t.createSeparator())});this.bannerPanel.append(n);this.showCacheInfoIcon()},n.prototype.createMenuElement=function(n){return BoldBIDashboard.buildTag("div."+n.class,"",{},{id:this.designId+"_"+n.name,"data-tooltip":n.tooltip,"data-name":n.name,display:this.setVisibilityForBannerIcons(n.name)?"block":"none"})},n.prototype.setVisibilityForBannerIcons=function(n){return this.dashboardDesigner.isMobileLayout()?n==="dashboardmenu"?!0:!1:n!=="dashboardmenu"?!0:!1},n.prototype.mobileViewMenuItems=function(){var n=[{id:"export",text:this.locale.banerPanel.exportTooltip,"class":"bbi-dashboard-banner-menu"},{id:"refreshDashboard",text:this.locale.banerPanel.exportRefreshDisplayText,"class":"bbi-dashboard-banner-refresh"}];return this.dashboardDesigner.model.showGetLinkIcon&&n.push({id:"getlink",text:this.locale.banerPanel.getLinkTooltip,"class":"bbi-dashboard-banner-link"}),this.dashboardDesigner.model._favoriteSettings.enabled&&(this.dashboardDesigner.model._favoriteSettings.isFavorite?n.push({id:"favorite",text:this.locale.banerPanel.markUnFavorieTooltip,"class":"bbi-dashboard-banner-favorite"}):n.push({id:"favorite",text:this.locale.banerPanel.markFavoriteTooltip,"class":"bbi-dashboard-banner-unfavorite"})),this.dashboardDesigner.designerPanel.hasMobileviewParameterIcon()&&n.push({id:"dashboardparameters",text:this.locale.banerPanel.dashboardParameterTooltip,"class":"bbi-dashboarddesigner-dashboard-parameters"}),this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view&&this.dashboardDesigner.isMobileLayout()&&(this.dashboardDesigner.model.enableTheme&&!this.dashboardDesigner.canApplyDashboardTheme()&&n.push({id:"theme",text:this.locale.banerPanel.themeText,"class":"bbi-dashboard-banner-theme",items:this.getThemeMenuList()}),n.push({id:"dashboard-info",text:this.locale.banerPanel.mobileViewInfoText,"class":"bbi-dashboard-banner-description"})),n},n.prototype.createFilterOverview=function(){var n;if(this.dashboardDesigner.model.enableFilterOverview){n=BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.filterOverviewSettings.viewName)||this.dashboardDesigner.model.filterOverviewSettings.viewName===""?this.locale.banerPanel.filterOverview:this.dashboardDesigner.model.filterOverviewSettings.viewName;this.filterOverviewPanel=BoldBIDashboard.buildTag("span.bbi-dbrd-filterListMenu bbi-dbrd-background-theme bbi-dbrd-designer-hoverable","",{},{"enable-seperator":!1,"data-tooltip":n});var t=BoldBIDashboard.buildTag("span.bbi-text-before-content","*",{},{}),i=BoldBIDashboard.buildTag("span.bbi-dynamic-title-display",n,{},{}),r=BoldBIDashboard.buildTag(this.dashboardDesigner.isDarkTypeTheme()?"span.bbi-dynamic-filterdroparrow e-icon-dark":"span.bbi-dynamic-filterdroparrow","",{},{});return this.filterOverviewPanel.append(t,i,r)}return this.filterOverviewPanel},n.prototype.createDashboardParameterIcon=function(){return BoldBIDashboard.buildTag("div.bbi-dashboarddesigner-dashboard-parameters bbi-dbrd-icon-background-theme bbi-dbrd-designer-hoverable bbi-dashboarddesigner-dashboard-parameters","",{color:"blue",display:"none"},{"enable-seperator":!1,id:this.designId+"dashboardparameters","data-name":"dashboardparameters","data-tooltip":this.locale.banerPanel.dashboardParameterTooltip})},n.prototype.updateDesignPanelHeight=function(n,t){t===void 0&&(t=!0);var i=n;return this.bannerPanel.is(":visible")&&(i=n-this.bannerPanel.height()),BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.toolbarTag)||this.dashboardDesigner.toolbarTag.is(":visible")||this.dashboardDesigner.model.mode!==BoldBIDashboard.Designer.mode.view&&this.dashboardDesigner.model.mode!==BoldBIDashboard.Designer.mode.designpreview||(i=i+this.dashboardDesigner.toolbarTag.height()),t&&this.resizeForBannerPanelTag(),i},n.prototype.resizeForBannerPanelTag=function(){var h,c,l;this.updateThemeButtonVisibility();var n=this.bannerPanel.find(".bbi-dashboard-banner-title"),t=Math.round(this.bannerPanel.find(".e-dashboard-banner-backButton").next(".e-banner-verticalsplitline").outerWidth(!0)/2)*2,i=Math.round(this.bannerPanel.find(".bbi-dashboarddesigner-bannerPanel-iconcontainer").outerWidth(!0)/2)*2,u=Math.round(this.bannerPanel.find(".bbi-dynamic-cache-container").outerWidth(!0)/2)*2,r=Math.round(this.bannerPanel.find(".bbi-dynamic-title-container").outerWidth(!0)/2)*2,e=Math.round(this.bannerPanel.find(".e-dashboard-banner-backButton").outerWidth(!0)/2)*2,s=this.bannerPanel.find(".bbi-dashboarddesigner-dashboard-parameters").is(":visible")?Math.round(this.bannerPanel.find(".bbi-dashboarddesigner-dashboard-parameters").outerWidth(!0)/2)*2:0,a=Math.round(this.bannerPanel.find(".bbi-dashboard-banner-theme").outerWidth(!0)/2)*2,f=48,o=0;this.dashboardDesigner.isMobileLayout()?n.css({"max-width":this.bannerPanel.width()-(i+u+r+e+t+f)+"px",width:"auto","margin-left":"10px"}):this.dashboardDesigner.model._favoriteSettings.enabled?(o=this.dashboardDesigner.model._favoriteSettings.isFavorite?Math.round(this.bannerPanel.find(".bbi-dashboard-banner-favorite").outerWidth(!0)/2)*2:Math.round(this.bannerPanel.find(".bbi-dashboard-banner-unfavorite").outerWidth(!0)/2)*2,h=this.bannerPanel.width()-e-o-r-t-i-f,c=h/this.bannerPanel.width()*100,n.css({"max-width":c+"%",width:"auto","margin-left":"0px"})):this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view?n.css({"max-width":this.bannerPanel.width()-(u+r+s+i+t+f+10)+"px",width:"auto","margin-left":"0px"}):n.css({"max-width":this.bannerPanel.width()-(u+r+s+i+t+f+10)+"px",width:"auto","margin-left":"24px"});l=e+o+r+t+i+n.width()+(this.dashboardDesigner.isMobileLayout()?u:0);this.bannerPanel.width()<l?(this.bannerPanel.find(".bbi-dynamic-cache-container").css("display","none"),this.bannerPanel.find(".bbi-dynamic-cache-container").next(".e-banner-verticalsplitline").css("display","none")):(this.bannerPanel.find(".bbi-dynamic-cache-container").removeAttr("display"),this.bannerPanel.find(".bbi-dynamic-cache-container").next(".e-banner-verticalsplitline").removeAttr("display"))},n.prototype.showDescription=function(n){var t=this.bannerPanel.find(".bbi-dynamic-title-container"),i=this.dashboardDesigner.model.bannerSettings;if(!BoldBIDashboard.isNullOrUndefined(i)&&!BoldBIDashboard.isNullOrUndefined(i.dashboardInfo)&&i.dashboardInfo!==""){t.css({display:"block"});t.find(".bbi-dashboard-banner-description").attr({"data-tooltip":i.dashboardInfo}).css("display","block");this.bannerPanel.find(".bbi-dynamic-cache-container").css({right:"10px"});return}BoldBIDashboard.isNullOrUndefined(n)||n===""?(t.css({display:"none"}),this.bannerPanel.find(".bbi-dynamic-cache-container").css({right:"0px"})):(t.css({display:"block"}),this.bannerPanel.find(".bbi-dynamic-cache-container").css({right:"10px"}),t.find(".bbi-dashboard-banner-description").attr({"data-tooltip":n}).css("display","block"))},n.prototype.wiredEvents=function(){this.unwiredEvents();this.bannerPanel.on(BoldBIDashboard.DashboardUtil.MouseEvent.mouseDown,".bbi-dbrd-filterListMenu",this.bbdesigner$.proxy(this.showFilter,this));this.bannerOverview.on(BoldBIDashboard.DashboardUtil.MouseEvent.mouseDown,".bbi-dbrd-filterListMenu",this.bbdesigner$.proxy(this.showFilter,this));this.bannerPanel.on("click",".bbi-dashboarddesigner-bannerPanel-iconcontainer",this.bbdesigner$.proxy(this.toolBarMethodsInBanner,this));this.bannerPanel.on("click",".bbi-dashboard-banner-description",this.bbdesigner$.proxy(this.onDescriptionClick,this));this.bannerPanel.on("click","#"+this.designId+"_closePreviewButton",this.bbdesigner$.proxy(this.onClosePreviewButtonClick,this))},n.prototype.unwiredEvents=function(){this.bannerPanel.off(BoldBIDashboard.DashboardUtil.MouseEvent.mouseDown,".bbi-dbrd-filterListMenu",this.bbdesigner$.proxy(this.showFilter,this));this.bannerOverview.off(BoldBIDashboard.DashboardUtil.MouseEvent.mouseDown,".bbi-dbrd-filterListMenu",this.bbdesigner$.proxy(this.showFilter,this));this.bannerPanel.off("click",".bbi-dashboarddesigner-bannerPanel-iconcontainer",this.bbdesigner$.proxy(this.toolBarMethodsInBanner,this));this.bannerPanel.off("click",".bbi-dashboard-banner-description",this.bbdesigner$.proxy(this.onDescriptionClick,this));this.bannerPanel.off("click","#"+this.designId+"_closePreviewButton",this.bbdesigner$.proxy(this.onClosePreviewButtonClick,this))},n.prototype.onDescriptionClick=function(n){var i=this.bannerPanel.find(".bbi-dashboard-banner-title").text(),t;this.dashboardDesigner._trigger("onBannerIconClick",{target:this.bbdesigner$(n.target),event:n,dashboardPath:this.dashboardDesigner.model.dashboardPath,headertext:i,name:"dashboardinfo"});this.dashboardDesigner.isMobileLayout()&&(t=BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.dashboardDescription)?"":this.dashboardDesigner.dashboardDescription,this.bbdesigner$(n.target).BoldBIDashboardTooltip({content:t}))},n.prototype.toolBarMethodsInBanner=function(n){var t,r,i,u;if(n.preventDefault(),t=this.bbdesigner$(n.target).attr("data-name"),r=this.bannerPanel.find(".bbi-dashboard-banner-title").text(),BoldBIDashboard.isNullOrUndefined(t)&&(t=this.bbdesigner$(n.target).parent(".e-dashboard-banner-icon").attr("data-name")),i=t==="dashboardmenu"&&this.dashboardDesigner.isMobileLayout()?this.mobileViewMenuItems():[],!BoldBIDashboard.isNullOrUndefined(t)){t!=="theming"&&this.dashboardDesigner._trigger("onBannerIconClick",{target:this.bbdesigner$(n.target),event:n,dashboardPath:this.dashboardDesigner.model.dashboardPath,headertext:r,name:t,menuItems:i});switch(t){case"export":case"dashboardmenu":this.dashboardDesigner.exportPanel.exportMenuClick(t,n,i);this.bbdesigner$(n.target).addClass("bbi-dashboarddesigner-active");this.highLightSelectedThemeValue(this.bbdesigner$("#"+this.designId+"_exportPanel_dashboardmenuConfigMenu"),this.dashboardDesigner.modules.themeHelper.currentTheme.name);break;case"refresh":!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.cacheSettings)&&this.dashboardDesigner.cacheSettings.isCacheEnable?this.triggerCacheUpdateEvent():this.dashboardDesigner.loadDashboardForRefresh();break;case"otheroption":this.showOtherOption(n);this.bbdesigner$(n.target).addClass("bbi-dashboarddesigner-active");break;case"theming":this.showThemeMenuPopup(n);break;case"dashboardparameters":u=this.dashboardDesigner.modules.dynamicParameterPanel;u.renderDashboardParameterViewerDialog()}}},n.prototype.showOtherOption=function(n){this.populateOtherOptionMenu(this.bbdesigner$(n.target));var t=this.otherOptionsMenuUlTag.data("BoldBIDashboardMenu");BoldBIDashboard.isNullOrUndefined(t)||t.show(this.bbdesigner$(n.target).offset().left+this.bbdesigner$(n.target).width()-this.otherOptionsMenuUlTag.width()-10,this.bbdesigner$(n.target).offset().top+this.bbdesigner$(n.target).outerHeight(),this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_designPanel"),n)},n.prototype.populateOtherOptionMenu=function(n){var i=this,t,r;BoldBIDashboard.isNullOrUndefined(this.otherOptionsMenuUlTag)||this.otherOptionsMenuUlTag.remove();t=this.getOtherOptionMenuItems();this.otherOptionsMenuUlTag=BoldBIDashboard.buildTag("ul.bbi-designer-menu e-menu-dbrd-theme bbi-dashboard-banner-optionmenu-popup","",{},{id:this.designId+"_ConfigMenu"});r=t.length-1;this.bbdesigner$.each(t,function(n,t){i.bbdesigner$.each(t.items,function(n,t){BoldBIDashboard.isNullOrUndefined(t)||i.otherOptionsMenuUlTag.append(i.createMenuItem(t))});n!==r&&t.items.length>0&&i.otherOptionsMenuUlTag.append(BoldBIDashboard.buildTag("li.e-separator","",{},{}))});!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0&&(n.append(this.otherOptionsMenuUlTag),this.otherOptionsMenuUlTag.BoldBIDashboardMenu({menuType:BoldBIDashboard.MenuType.ContextMenu,openOnClick:!1,container:"#"+n.attr("id"),width:"140",cssClass:"e-dbrd-export-menu-list",click:this.bbdesigner$.proxy(this.onOtherOptionMenuClick,this),close:this.bbdesigner$.proxy(this.onContextMenuClose,this)}))},n.prototype.onContextMenuClose=function(){this.bannerPanel.find(".bbi-dashboard-banner-optionmenu").removeClass("bbi-dashboarddesigner-active")},n.prototype.onOtherOptionMenuClick=function(n){var r=this.bannerPanel.find(".bbi-dashboard-banner-title").text(),t=this.bbdesigner$(n.element).attr("data-name"),i=t==="dashboardmenu"&&this.dashboardDesigner.isMobileLayout()?this.mobileViewMenuItems():[];BoldBIDashboard.isNullOrUndefined(t)||this.dashboardDesigner._trigger("onBannerIconClick",{target:this.bbdesigner$(n.event.currentTarget),event:n,dashboardPath:this.dashboardDesigner.model.dashboardPath,headertext:r,name:t,menuItems:i});switch(t){case"image":case"pdf":case"excel":this.dashboardDesigner.exportPanel.onExportMenuClick(!1,t,n);break;case"csv":this.dashboardDesigner.exportPanel.onExportMenuClick(!1,t,n);break;case"dashboardmenu":this.dashboardDesigner.exportPanel.exportMenuClick(t,event,i);break;case"refresh":!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.cacheSettings)&&this.dashboardDesigner.cacheSettings.isCacheEnable?this.triggerCacheUpdateEvent():this.dashboardDesigner.updateDashboard(!0)}},n.prototype.createMenuItem=function(n){var f=this,t=BoldBIDashboard.buildTag("li.e-list","",{},{id:n.id,"data-name":n.id}),i=BoldBIDashboard.buildTag("a","",{},{}),u,r;return i.text(n.text),BoldBIDashboard.isNullOrUndefined(n.class)||(u=BoldBIDashboard.buildTag("span."+n.class,"",{},{}),i.append(u)),BoldBIDashboard.isNullOrUndefined(n.child)&&t.append(i),BoldBIDashboard.isNullOrUndefined(n.child)||n.child.length===0||t.append(i),BoldBIDashboard.isNullOrUndefined(n.child)||n.child.length>0&&(r=BoldBIDashboard.buildTag("ul.e-dashboarddesingner-contextchildmenu","",{width:"140px"},{"data-parent":n.id}),this.bbdesigner$.each(n.child,function(n,t){BoldBIDashboard.isNullOrUndefined(t)||r.append(f.createMenuItem(t))}),t.append(r)),t},n.prototype.getOtherOptionMenuItems=function(){var u={id:"image",text:this.locale.banerPanel.exportImageDisplayText,"class":"bbi-dbrd-showDashboardMenu-Exportimage"},f={id:"pdf",text:this.locale.banerPanel.exportPdfDisplayText,"class":"bbi-dbrd-showDashboardMenu-ExportPdf"},e={id:"excel",text:this.locale.banerPanel.exportExcelDisplayText,"class":"bbi-dbrd-showControlMenu-ExportExcel"},o={id:"csv",text:this.locale.banerPanel.exportCsvDisplayText,"class":"bbi-dbrd-showControlMenu-ExportCSV"},n=[],r;this.dashboardDesigner.model.export.Image&&this.dashboardDesigner.model.dashboardExport.Image&&this.dashboardDesigner.model.dashboardExportMenuSettings.showImage&&n.push(u);this.dashboardDesigner.model.export.Pdf&&this.dashboardDesigner.model.dashboardExport.Pdf&&this.dashboardDesigner.model.dashboardExportMenuSettings.showPDF&&n.push(f);this.dashboardDesigner.model.export.Excel&&this.dashboardDesigner.model.dashboardExport.Excel&&this.dashboardDesigner.model.dashboardExportMenuSettings.showExcel&&n.push(e);this.dashboardDesigner.model.export.Csv&&this.dashboardDesigner.model.dashboardExport.Csv&&this.dashboardDesigner.model.dashboardExportMenuSettings.showCSV&&n.push(o);var t=[],i=this.isNeedRefreshMenu(),s={groupId:"refresh",groupName:"refresh",items:i};return i.length>0&&t.push(s),r={groupId:"export",groupName:"export",items:[{id:"export",text:this.locale.banerPanel.exportDisplayText,child:n}]},n.length>0&&t.push(r),this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view&&this.dashboardDesigner._trigger("beforeOtherOptionContextMenuRender",{iconsinformation:t,enableComment:this.enableComment,dashboardPath:this.dashboardDesigner.model.dashboardPath}),t},n.prototype.isNeedRefreshMenu=function(){if(this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view){var n=this.createGetLinkMenu();return n!=null?[n]:[]}return[{id:"refresh",text:this.locale.banerPanel.exportRefreshDisplayText},this.createGetLinkMenu()]},n.prototype.createGetLinkMenu=function(){return this.dashboardDesigner.model.showGetLinkIcon?{id:"getlink",text:"Get Link"}:null},n.prototype.showFilter=function(n){this.bannerPanel.find(".bbi-dbrd-filterListMenu").hasClass("bbi-dashboarddesigner-active")?this.bannerPanel.find(".bbi-dbrd-filterListMenu").removeClass("bbi-dashboarddesigner-active"):this.bannerPanel.find(".bbi-dbrd-filterListMenu").addClass("bbi-dashboarddesigner-active");this.dashboardDesigner.isMobileLayout()||n.preventDefault();new BoldBIDashboard.DashboardDesignerUtility.FilterOverview(this.bannerPanel,this.dashboardDesigner,n).renderFilterOverviewPanel()},n.prototype.destroy=function(){this.unwiredEvents()},n.prototype.getAppliedFilter=function(n,t){var i,o,f,c,l,a,s,u,e,r;this.filterList=t;var v=n-n*.75,h=BoldBIDashboard.buildTag("div.bbi-dbrd-applied-filter","",{"max-height":v},{}),y=BoldBIDashboard.buildTag("div.bbi-dbrd-applied-filter-title",this.locale.banerPanel.appliedFilters,{},{});for(h.append(y),i=0;i<this.filterList.length;i++){if(o=BoldBIDashboard.isNullOrUndefined(this.filterList[i].ColumnName)?this.dashboardDesigner.modules.util.getColumnNameByUniqueColumnName(this.filterList[i].ReportName,this.filterList[i].UniqueColumnName):this.filterList[i].ColumnName,f=BoldBIDashboard.buildTag("div.bbi-dbrd-applied-filter-row","",{},{}),!BoldBIDashboard.isNullOrUndefined(this.filterList[i].InitialDateFilter.DisplayDateFilterList)&&this.filterList[i].InitialDateFilter.DisplayDateFilterList.length>0&&(c=this.filterList[i].InitialDateFilter.DisplayDateFilterList[0],l=c,this.filterList[i].IsRange&&(a=this.filterList[i].InitialDateFilter.DisplayDateFilterList[1],l=c+" "+this.locale.banerPanel.dateSplit+" "+a),r=BoldBIDashboard.buildTag("div.bbi-dbrd-filter-value","<b>"+o+"<\/b> : "+l,{},{}),f.append(r)),!BoldBIDashboard.isNullOrUndefined(this.filterList[i].InitialMeasureFilter.Values)&&this.filterList[i].InitialMeasureFilter.Values.length>0&&(s=this.filterList[i].InitialMeasureFilter.Values[0],this.filterList[i].IsRange&&(s=s+" - "+this.filterList[i].InitialMeasureFilter.Values[1]),r=BoldBIDashboard.buildTag("div.bbi-dbrd-filter-value","<b>"+o+"<\/b> : "+s,{},{}),f.append(r)),!BoldBIDashboard.isNullOrUndefined(this.filterList[i].InitialDimensionFilter.Text)&&this.filterList[i].InitialDimensionFilter.Text.length>0){if(u=void 0,this.filterList[i].IsMultiSelection)for(e=0;e<this.filterList[i].InitialDimensionFilter.Text.length;e++)u=BoldBIDashboard.isNullOrUndefined(u)?this.filterList[i].InitialDimensionFilter.Text[e]:u+","+this.filterList[i].InitialDimensionFilter.Text[e];else u=this.filterList[i].InitialDimensionFilter.Text;r=BoldBIDashboard.buildTag("div.bbi-dbrd-filter-value","<b>"+o+"<\/b> : "+u,{},{});f.append(r)}h.append(f)}return h},n.prototype.createSeparator=function(){return BoldBIDashboard.buildTag("div.e-banner-verticalsplitline","",{display:"none"},{})},n.prototype.createThemeElement=function(){var n,t,i;return this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view&&this.dashboardDesigner.model.enableTheme&&!this.dashboardDesigner.canApplyDashboardTheme()&&(n=BoldBIDashboard.buildTag("div.e-dashboard-banner-icon bbi-dbrd-background-theme bbi-dashboard-banner-theme bbi-dashboard-banner-theme-hover","",{},{"enable-seperator":!1,id:this.designId+"_theme","data-name":"theming"}),t=BoldBIDashboard.buildTag("span.bbi-dashboard-banner-theme-icon","",{},{}),i=BoldBIDashboard.buildTag("span.bbi-dashboard-banner-theme-content",this.locale.banerPanel.themeText,{},{}),n.append(t,i)),n},n.prototype.createRefreshIcon=function(){var n;return this.isCacheRequestNeeded=!0,this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view&&(n=BoldBIDashboard.buildTag("div.e-dbrd-banner-refresh server-banner-icon bbi-dbrd-designer-hand-cursor bbi-dbrd-designer-hoverable e-icon-dbrd-theme e-dashboard-banner-icon bbi-dbrd-designer-refresh-view","",{"font-size":"13px"},{"data-tooltip":!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.cacheSettings)&&this.dashboardDesigner.cacheSettings.isCacheEnable?this.locale.banerPanel.bannerRefreshDisplayText:this.locale.banerPanel.exportRefreshDisplayText,"enable-seperator":!1,id:this.designId+"refresh","data-name":"refresh"})),n},n.prototype.updateThemeButtonVisibility=function(){var n=this.bannerPanel.find(".bbi-dashboard-banner-theme"),t=n.next(".e-banner-verticalsplitline");this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view&&n.length>0&&t.length>0&&(this.dashboardDesigner.isMobileLayout()?(n.hide(),t.hide()):(n.css("display","inline-flex"),this.updateSplitlineVisibilityOndemand(t)))},n.prototype.showThemeMenuPopup=function(n){if(this.populateThemeMenuData(),this.themeMenuUlTag.is("visible"))this.themeMenuUlTag.hide();else{var i=this.themeMenuUlTag.data("BoldBIDashboardMenu"),t=this.bbdesigner$(n.target).hasClass("e-dashboard-banner-icon")?this.bbdesigner$(n.target):this.bbdesigner$(n.target).parent(".e-dashboard-banner-icon");t.addClass("bbi-dashboarddesigner-active");this.highLightSelectedThemeValue(this.themeMenuUlTag,this.dashboardDesigner.modules.themeHelper.currentTheme.name);i.show(t.offset().left+this.bannerPanel.find("#"+this.designId+"_theme").width()+5-this.themeMenuUlTag.width(),this.bannerPanel.offset().top+this.bannerPanel.height(),this.bannerPanel.find("#"+this.designId+"_theme"),n)}},n.prototype.getThemeMenuList=function(){for(var t=[],n=0;n<this.dashboardDesigner.modules.themeHelper.themesCollection.length;n++)t.push({id:"dashboardTheme_"+BoldBIDashboard.DashboardUtil.escapeSelector(this.dashboardDesigner.modules.themeHelper.themesCollection[n].key).toLowerCase(),text:this.dashboardDesigner.modules.themeHelper.themesCollection[n].key,parentId:null,sprite:""});return t},n.prototype.populateThemeMenuData=function(){var n=this.getThemeMenuList();(BoldBIDashboard.isNullOrUndefined(this.themeMenuUlTag)||this.themeMenuUlTag.length===0)&&(this.themeMenuUlTag=BoldBIDashboard.buildTag("ul.bbi-designer-menu","",{},{id:this.designId+"_theme_ConfigMenu"}),this.themeMenuUlTag.BoldBIDashboardMenu({menuType:BoldBIDashboard.MenuType.ContextMenu,openOnClick:!1,container:"#"+this.designId+"_theme",width:"120",fields:{dataSource:n,id:"id",parentId:"parentId",text:"text",spriteCssClass:"sprite"},cssClass:"bbi-dashboard-banner-thememenu-popup e-menu-dbrd-theme",click:this.bbdesigner$.proxy(this.triggerThemeMenuList,this)}))},n.prototype.highLightSelectedThemeValue=function(n,t){if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(t)&&n.find(".bbi-dashboard-banner-theme-menu-selected").length===0){var i=t;n.find("#dashboardTheme_"+BoldBIDashboard.DashboardUtil.escapeSelector(i).toLowerCase()).addClass("bbi-dashboard-banner-theme-menu-selected")}},n.prototype.triggerThemeMenuList=function(n){this.bannerPanel.find(".bbi-dashboard-banner-theme").removeClass("bbi-dashboarddesigner-active");this.onBannerIconClickForTheme(n,n.text)},n.prototype.onBannerIconClickForTheme=function(n,t){this.bbdesigner$(n.element).parent().find(".e-list").removeClass("bbi-dashboard-banner-theme-menu-selected");this.highLightSelectedThemeValue(this.bbdesigner$(n.element).parent(),t);this.dashboardDesigner._trigger("onBannerIconClick",{target:this.bbdesigner$(n.event.target),event:n.event,dashboardPath:this.dashboardDesigner.model.dashboardPath,headertext:null,name:"theming",selectedTheme:t,themeJson:this.dashboardDesigner.modules.themeHelper.getJsonTheme(t)});this.dashboardDesigner.applyDashboardTheme(t)},n.prototype.showViewFilterChangeIndicator=function(){BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.filterOverviewSettings.viewId)||this.dashboardDesigner.model.filterOverviewSettings.viewId.trim()===""||this.bannerPanel.find(".bbi-text-before-content").css("display","contents")},n.prototype.hideViewFilterChangeIndicator=function(){this.bannerPanel.find(".bbi-text-before-content").css("display","none")},n.prototype.triggerCacheUpdateEvent=function(){this.isCacheRequestNeeded?(this.isCacheRequestNeeded=!1,this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.checkDataCacheRequest,{data:JSON.stringify({dashboardName:this.dashboardDesigner.model.dashboardName,dashboardObjectId:this.dashboardDesigner.dashboardObjectId})},{fnction:this.bbdesigner$.proxy(this.checkDataCacheRequestCallback,this)},!1,!0)):this.showInitialDataCacheUpdatePopup(!1)},n.prototype.checkDataCacheRequestCallback=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.Data)&&n.Data){if(!BoldBIDashboard.isNullOrUndefined(n.Data.hasError)&&n.Data.hasError){this.isCacheRequestNeeded=!0;this.exportingErrorPopupNotification(n);return}!BoldBIDashboard.isNullOrUndefined(n.Data.isCacheReqComplete)&&n.Data.isCacheReqComplete?(this.showInitialDataCacheUpdatePopup(!0),this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"v1.0/design/scheduleDataCache/",{data:JSON.stringify({isRefresh:!0})},{fnction:this.bbdesigner$.proxy(this.cacheUpdateEventCallBack,this)},!1,!0)):(this.isCacheRequestNeeded=!0,this.showInitialDataCacheUpdatePopup(!1))}},n.prototype.cacheUpdateEventCallBack=function(n){if(this.isCacheRequestNeeded=!0,!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.Data)){if(!BoldBIDashboard.isNullOrUndefined(n.Data.hasError)&&n.Data.hasError){this.exportingErrorPopupNotification(n);return}BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(n.Status)||!n.Status?this.showSuccessDataCacheUpdatePopup(!1):this.showSuccessDataCacheUpdatePopup(!0)}},n.prototype.showInitialDataCacheUpdatePopup=function(n){var r,t,i;n===void 0&&(n=!1);r=n?this.locale.dataSource.dataCacheInitialSuccessPopup:this.locale.dataSource.dataCacheInitialErrorPopup;t=this.dashboardDesigner.element.find(".e-toast.bbi-successPopup");BoldBIDashboard.isNullOrUndefined(t)||t.remove();this.dashboardDesigner.element.find(".bbi-exportpopup").length===0&&(this.datacachePopupNotification=BoldBIDashboard.buildTag("div.bbi-exportpopup ","",{},{}),this.dashboardDesigner.designerPanel.designPanel.append(this.datacachePopupNotification));i=new ejdashboard.notifications.Toast({content:'<div class="e-toast-successPopup-content"><p>'+r+"<\/p><\/div>",target:"#"+this.dashboardDesigner._id+"_designPanel",position:this.dashboardDesigner.isMobileLayout()?{X:"right",Y:"bottom"}:{X:"right",Y:"top"},icon:n?"e-toast-successIcon":"e-toast-infoIcon",timeOut:5e3,cssClass:"bbi-successPopup",showCloseButton:!0,width:"559px",height:"64px"});this.validateToastCount();i.appendTo(this.datacachePopupNotification[0]);i.show()},n.prototype.showSuccessDataCacheUpdatePopup=function(n){var r,t,i;if(n===void 0&&(n=!1),r=n?this.locale.dataSource.dataCacheSuccessPopupFirstHalf+'<a class="bbi-toast-dataCacheSuccessDetails" href="#"> '+this.locale.dataSource.dataCacheToastClickHere+"<\/a>"+this.locale.dataSource.dataCacheSuccessPopupSecondHalf:this.locale.dataSource.dataCacheErrorPopup,this.dashboardDesigner.element.find(".bbi-exportpopup").length===0&&(this.datacachePopupNotification=BoldBIDashboard.buildTag("div.bbi-exportpopup ","",{},{}),this.dashboardDesigner.designerPanel.designPanel.append(this.datacachePopupNotification)),t=new ejdashboard.notifications.Toast({content:'<div class="e-toast-successPopup-content"><p>'+r+"<\/p><\/div>",target:"#"+this.dashboardDesigner._id+"_designPanel",position:this.dashboardDesigner.isMobileLayout()?{X:"right",Y:"bottom"}:{X:"right",Y:"top"},icon:n?"e-toast-successIcon":"e-toast-errorIcon",timeOut:0,cssClass:n?"bbi-successPopup":"bbi-errorPopup",showCloseButton:!0,width:"559px",height:"64px"}),this.validateToastCount(),t.appendTo(this.datacachePopupNotification[0]),t.show(),i=this.bbdesigner$(t.toastEle).find(".bbi-toast-dataCacheSuccessDetails"),n){i.off("click",this.bbdesigner$.proxy(this.refreshAllWidgets,this));i.on("click",this.bbdesigner$.proxy(this.refreshAllWidgets,this))}},n.prototype.validateToastCount=function(){var i=this.dashboardDesigner.isMobileLayout()?3:8,n=this.dashboardDesigner.element.find(".bbi-exportpopup")[0],t;!BoldBIDashboard.isNullOrUndefined(n)&&n.childElementCount>=i&&(t=ejdashboard.base.getComponent(this.datacachePopupNotification[0],"toast"),t.destroy())},n.prototype.refreshAllWidgets=function(){var n=this.dashboardDesigner.element.find(".e-toast.bbi-successPopup");BoldBIDashboard.isNullOrUndefined(n)||n.remove();this.dashboardDesigner.updateDashboard(!1)},n.prototype.exportingErrorPopupNotification=function(n){var r=this.dashboardDesigner.element.find(".e-toast.bbi-successPopup"),t,u,i;BoldBIDashboard.isNullOrUndefined(r)||r.remove();this.dashboardDesigner.element.find(".bbi-exportpopup").length===0&&(this.datacachePopupNotification=BoldBIDashboard.buildTag("div.bbi-exportpopup ","",{},{}),this.dashboardDesigner.designerPanel.designPanel.append(this.datacachePopupNotification));t=new ejdashboard.notifications.Toast({content:this.dataCacheErrorPopupTemplate(),target:"#"+this.dashboardDesigner._id+"_designPanel",position:this.dashboardDesigner.isMobileLayout()?{X:"right",Y:"bottom"}:{X:"right",Y:"top"},icon:"e-toast-errorIcon",timeOut:0,cssClass:"bbi-errorPopup",showCloseButton:!0,width:"559px",height:"64px"});this.validateToastCount();t.appendTo(this.datacachePopupNotification[0]);t.show();u=BoldBIDashboard.isNullOrUndefined(n.Message)?"":n.Message;i=this.bbdesigner$(t.toastEle).data("error-data",u).find(".e-toast-exportingErrorDetails");i.off("click",this.bbdesigner$.proxy(this.showDataCacheErrorDetails,this));i.on("click",this.bbdesigner$.proxy(this.showDataCacheErrorDetails,this))},n.prototype.dataCacheErrorPopupTemplate=function(){return'<div class="e-toast-exportingErrorPopupContent"><p>'+this.locale.dataSource.dataCacheErrorPopup+' <a class="e-toast-exportingErrorDetails" href="javascript:void(0)"> '+this.locale.scrollableLayout.knowmore+"<\/a><\/p><\/div>"},n.prototype.showDataCacheErrorDetails=function(n){var t,i;n.preventDefault();t=this.bbdesigner$(n.target).parents(".e-toast.bbi-errorPopup");BoldBIDashboard.isNullOrUndefined(t)||(i=t.data("error-data"),t.remove(),this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.dashboardDesigner,"Data request failed",IconType.errors,AlertType.Alert,!0,i))},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.Banner",InternalBanner,window);__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t=function(n){function t(){var t=n.call(this)||this;return t.FieldInfos=[],t.canUseInLinking=!0,t.IsDrillSection=!1,t.RestrictLargeData=!1,t.Required=!1,t.ShowDescriptionIcon=!1,t.TooltipText="",t.isCustomHierarchy=!1,t.HasCustomDate=!1,t}return __extends(t,n),t}(FieldContainer);n.FieldContainerForUI=t})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t=function(n){function t(){var t=n.call(this)||this;return t.IsLoading=!1,t.ApplyFilter=!1,t.IsShowAllRecords=!1,t.TableID="",t.TableName="",t.FilterInfo=null,t.ContainerName="",t.IsCustomSortApplied=!1,t.DateBucketInfo=null,t}return __extends(t,n),t}(HierarchicalFieldInfo);n.FieldInfoForUI=t})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={})),function(n){var t;(function(t){var i=function(){function t(n){this.customWidgetsCollection=[];this.customWidgetItems=[];this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$}return t.prototype.generateToolTipTemplate=function(t,i,r){var f="",o=this.dashboardDesigner.modules.themeHelper.getTooltipTextColor(),e=this.dashboardDesigner.modules.themeHelper.getToolTipFontText(),h="background-color: "+this.dashboardDesigner.modules.themeHelper.getTooltipBackground()+"!important; border-color: "+this.dashboardDesigner.modules.themeHelper.getTooltipBorder()+"!important; z-index: "+r+"!important; color: "+o+"!important;",c="color: "+o+"!important;\nfont-size: "+e.size+"!important;\nfont-family: "+e.family+"!important;",l="color: "+o+" !important;\nfont-size: "+e.size+"!important;\nfont-weight: "+e.weight+"!important;\nfont-family: "+e.family+"!important;",u;if(t.length>0){for(f+='<div class="widget-tooltip-template" style="'+h+'" id='+i+"_toolTip>",f+='<table class="tooltip-fontstyle" id='+i+"_tooltip_table>",u=0;u<t.length;u++){var s=Object.keys(t[u])[0],a=n.DashboardUtil.encodeText(s),v=n.DashboardUtil.encodeText(t[u][s]);f+="<tr id="+i+"_"+u+"_tooltip_table_rows><td id="+i+"_"+u+'_tooltip_table_rows_key style="'+c+'">'+a+" :<\/td><td id="+i+"_"+u+'_tooltip_table_rows_value style="'+l+'" >'+v+"<\/td><\/tr>"}f+="<\/table> <\/div>"}return f},t.enableClearFilter=function(t){if(!n.isNullOrUndefined(t.ControlHeader)||!t.getJson().ContainerSettings.ShowHeader){var i=t.IsPoPWidget?"e-dbrd-pop-reset":"bbi-remove-control-filter-enable",r=t.IsPoPWidget?t.designerInstance.getLocalizationContent().exportPanel.reset:t.designerInstance.getLocalizationContent().enableFilter.clearFilter;t.ControlContainer.find(".bbi-remove-control-filter").removeClass("bbi-remove-control-filter-disable").addClass(i+" bbi-dbrd-icon-theme").attr("data-tooltip",r);t.ControlContainer.find(".bbi-remove-control-filter").closest(".widget-control-icon-wrapper").addClass("bbi-dbrd-icon-background-theme")}},t.disableClearFilter=function(t){if(!n.isNullOrUndefined(t.ControlHeader)||!t.getJson().ContainerSettings.ShowHeader){var i=t.IsPoPWidget?"e-dbrd-pop-reset":"bbi-remove-control-filter-enable",r=t.designerInstance.getLocalizationContent().enableFilter.filterAction;t.ControlContainer.find(".bbi-remove-control-filter").removeClass(i+" bbi-dbrd-icon-theme").addClass("bbi-remove-control-filter-disable").attr("data-tooltip",r);t.ControlContainer.find(".bbi-remove-control-filter").closest(".widget-control-icon-wrapper").removeClass("bbi-dbrd-icon-background-theme");t.ControlContainer.find(".bbi-remove-control-filter-disable").attr("data-tooltip",t.designerInstance.getLocalizationContent().toolBar.filter)}},t.showInfoIcon=function(t,i){if(!n.isNullOrUndefined(t)&&t.trim()!==""&&!n.isNullOrUndefined(i)&&!n.isNullOrUndefined(i.ControlHeader)){i.ControlHeader.find(".bbi-dbrd-control-information-icon").remove();var r=n.buildTag("div.bbi-dbrd-control-information-icon e-dbrd-inform-control bbi-dbrd-designer-hoverable","",{display:"block","font-size":i.getIconFontSizeBasedOnResolution()},{"data-tooltip":t});i.ControlHeader.append(r);i.ControlHeader.parents(".bbi-dbrd-control-container").mouseover(function(){i.ControlHeader.find('.bbi-remove-control-filter[style*="display: none"]').length===0&&i.ControlHeader.parents(".bbi-dbrd-control-container:not(.bbi-show-widget-not-configured)").find(".bbi-dbrd-controlIcon-container").css("margin-right",i.ControlHeader.find('.bbi-dbrd-control-information-icon[style*="display: none"]').length===0?"25px":"0")});n.Dashboard.WidgetContainerHelper.setControlIconAlignment(i.ControlHeader.find(".bbi-dbrd-control-description"),i.ControlHeader.find(".bbi-dbrd-control-title-wrapper"),i.ControlHeader.find(".bbi-dbrd-controlIcon-container"),i.ControlHeader.find(".bbi-dbrd-control-title"))}},t.hideInfoIcon=function(t){n.isNullOrUndefined(t)||n.isNullOrUndefined(t.ControlHeader)||(t.ControlHeader.find(".bbi-dbrd-control-information-icon").css("display","none").removeAttr("data-tooltip"),n.Dashboard.WidgetContainerHelper.setControlIconAlignment(t.ControlHeader.find(".bbi-dbrd-control-description"),t.ControlHeader.find(".bbi-dbrd-control-title-wrapper"),t.ControlHeader.find(".bbi-dbrd-controlIcon-container"),t.ControlHeader.find(".bbi-dbrd-control-title")))},t.getUniqueName=function(t,i,r,u){var l=[],e=[],p=i.designerPanel.isPasteAction?"_Copy":i.designerPanel.isExistingWidget?"_Imported":"",c=n.Dashboard.WidgetHelper.getAllWidgetElements(i._id,t.designerInstance.element.find("#"+t.designerInstance._id+"_designCanvas"),"."+t.RootCss),o,s,a,v,f,h,y;if(c.each(function(n,t){l.push(BoldBIDashboardDesigner.bbdesignerstatic$(t).attr("data-name"))}),u)for(o=0;o<c.length;o++)e.push(this.getWidgetInstance(c.eq(o)).getContainerSettings().Title);s=0;do s++,a=l.indexOf(t.Type+s);while(a!==-1);if(v=t.Type+s,f=r,!n.isNullOrUndefined(r)&&(this.isAvailableWidgetName(e,r)&&(f=r+p),this.isAvailableWidgetName(e,f))){h=1;do h++,y=e.indexOf(f+h);while(y!==-1);f=f+h}return{Id:v,Name:f}},t.isAvailableWidgetName=function(n,t){for(var i=0;i<n.length;i++)if(n[i]===t)return!0;return!1},t.getWidgetElementVisibility=function(t,i,r){r===void 0&&(r=!1);var u=new WidgetElementsVisibility,f=4;return!n.isNullOrUndefined(i)&&i?(u.ShowLegend=!0,u.ShowXAxisLabels=!0,u.ShowXAxisTitle=!0,u.ShowYAxisTitle=!0,u.ShowYAxisLabels=!0):((t.RowSpan>=1*f&&t.ColumnSpan>1*f||t.RowSpan>1*f&&t.ColumnSpan>=1*f)&&(u.ShowLegend=!0),u.ShowXAxisLabels=r,t.RowSpan>=8&&t.ColumnSpan>=6&&(u.ShowXAxisTitle=!0),t.RowSpan>=1*f&&t.ColumnSpan>=2*f&&(u.ShowYAxisTitle=!0,u.ShowYAxisLabels=!0)),u},t.getWidgetInstance=function(t){return n.isNullOrUndefined(t)?null:t.data("widgetInstance")},t.prototype.getAllWidgets=function(){for(var u,i=n.Dashboard.WidgetHelper.getAllWidgetElements(this.dashboardDesigner._id,this.dashboardDesigner.modules.Mode.designCanvas,".bbi-dbrditem").not(".bbi-hide-qa-child-widget"),r=[],t=0;t<i.length;t++)u=n.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(i[t])),r.push(u);return r},t.getAllWidgetElements=function(t,i,r){var u=null;return n.isNullOrUndefined(i)||(u=i.find(r),u=u.add(BoldBIDashboardDesigner.bbdesignerstatic$(document.body).find(".bbi-content-div."+t).find(r))),u},t.prototype.getAllCustomWidgets=function(){for(var t=this.getAllWidgets(),i=[],n=0;n<t.length;n++)t[n].Type==="CustomWidget"&&i.push(t[n]);return i},t.prototype.getBingMapWidget=function(){for(var t=this.getAllWidgets(),i=[],n=0;n<t.length;n++)t[n].Type==="BingMap"&&i.push(t[n]);return i},t.prototype.getAllDatebucketWidgets=function(){return this.getAllWidgets().filter(function(n){return n.isDefaultDataWidget()})},t.prototype.createWidgetInstance=function(t){var f,i,r,u;try{if(n.isNullOrUndefined(t)||t.trim()==="")return null;for(f=t.split("."),i=window,r=0;r<f.length;r++)i=i[f[r]];if(!n.isNullOrUndefined(i))return u=Object.create(i.prototype),u.constructor.apply(u,[this.dashboardDesigner]),u}catch(e){console.error(e.message)}return null},t.prototype.getWidgetObj=function(t,i,r){for(var e,u,o=n.isNullOrUndefined(i)?this.dashboardDesigner.itemPanel.widgetItems:i,f=0;f<o.length;f++)for(e=0;e<o[f].Items.length;e++)if(u=o[f].Items[e],u.widgetNameSpace===t||u.serializationNameSpace===t||u.widgetName===t||u.id===r)return u;return null},t.prototype.getCurrentWidgetInstance=function(){var t=this.dashboardDesigner.designerPanel.selectedReportItems[0];return n.Dashboard.WidgetHelper.getWidgetInstance(t)},t.createWidgetContainer=function(t,i,r,u,f){var o=i.designerPanel.isPasteAction||i.designerPanel.isExistingWidget,e;return n.isNullOrUndefined(t.getJson().UniqueName)||o?(e=this.getUniqueName(t,i,u,o),t.Name=e.Id,t.getContainerSettings().Title=n.isNullOrUndefined(u)||u===""?e.Id:e.Name):(t.Name=t.getJson().UniqueName,t.getContainerSettings().Title=u),n.Dashboard.WidgetContainerHelper.createContainer(t,i,r,f),this.updateWidgetFontSizeOnRendering(t,i),t.ControlContainer},t.designerEventHandler=function(t,i,r,u){return!n.isNullOrUndefined(t.EventHelper)&&t.EventHelper.isEventListenerConfigured(i,r)?t.designerEventListener(i,r,u):!1},t.isDataWidget=function(t){return t instanceof n.Dashboard.DataWidget},t.isContainerWidget=function(t){return t instanceof n.ContainerWidget},t.getLineStyle=function(n){switch(n){case"Solid":return"0";case"Dot":return"2,3";case"Dash":return"4,8";case"DotDash":return"2,6,6,10";case"LongDash":return"15";case"LongDashDotDot":return"20,10,5,5,5,10";default:return"0"}},t.setLabelParameterId=function(t,i){var f,u,r,e;if(t.find(".bbi-dbrd-label-parameter-text").length>=1)for(f=i.modules.labelParameter,u=t.find(".bbi-dbrd-label-parameter-text"),r=0;r<u.length;r++)e=f.generateIdForLabelParameterElement(u[r]),BoldBIDashboardDesigner.bbdesignerstatic$(u[r]).attr("data-labelparameterid",e),i.model.mode!==n.Designer.mode.design&&(f.setValueForLabelParameter(u[r]),BoldBIDashboardDesigner.bbdesignerstatic$(u[r]).css({display:"none"}))},t.isOlderDashboardWidgets=function(n){return n.Type==="Card"||n.Type==="ChoroplethMap"||n.Type==="BubbleMap"},t.isFilterWidgets=function(n){return n.Type==="TextFilter"||n.Type==="ListBox"||n.Type==="DatePicker"||n.Type==="RangeSlider"||n.Type==="ComboBox"||n.Type==="PeriodOverPeriod"||n.Type==="RangeNavigator"},t.isTableWidgets=function(n){return n.Type==="Grid"||n.Type==="PivotGrid"||n.Type==="PivotView"},t.createWidgetActionContextMenu=function(t,i,r,u,f,e){var s,h,c,o,b,l;if(u=this.updateWidgetLinking(i,u),s=this.populateWidgetSelectionMenuItems(r,u,t),t.model.mode!==n.Designer.mode.design)if(h=s.filter(function(n){return n.IsVisible===!0}),h.length>1){c=n.buildTag("ul.bbi-designer-menu e-contextmenu","",{},{id:r+"_widget_action_menu"});c.BoldBIDashboardMenu({menuType:n.MenuType.ContextMenu,openOnClick:!1,contextMenuTarget:"#"+r,width:"auto",animationType:"none",fields:{dataSource:h,id:"Name",text:"DisplayName"},click:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.onWidgetSelectionMenuItemClick,this,i,t,f),close:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.onMenuItemClose,this,i,t,f)});o=t.element;c.parents(".e-menu-wrap")&&c.parents(".e-menu-wrap").appendTo(o);var a=o.find("#"+r+"_widget_action_menu"),k=a.data("BoldBIDashboardMenu"),p=a.height(),w=a.width(),v=o.offset().left,y=o.offset().top;k.show(o.width()+v-e[0]<w?e[0]-w-v:e[0]-v,o.height()+y-e[1]<p?e[1]-p-y:e[1]-y,r,f)}else h.length===1&&(b=h[0],i.performSelectedWidgetAction(b.Name,i,f,t));else for(l=0;l<s.length;l++)if(s[l].IsVisible===!0){i.Name.indexOf("Chart")!==-1&&i.Name.indexOf("Radar")===-1&&i.Name.indexOf("ScatterChart")===-1&&(f.cancel=!1);i.performSelectedWidgetAction(s.filter(function(n){return n.IsVisible===!0})[0].Name,i,f,t);this.updateWidgetFontSizeOnRendering(i,t);break}},t.updateWidgetLinking=function(t,i){return!n.isNullOrUndefined(t.getJson().WidgetLink)&&t.getJson().WidgetLink.Enable&&i.push(WidgetAction.WidgetLinking),i},t.onWidgetSelectionMenuItemClick=function(n,t,i,r){r.ID===WidgetAction.WidgetLinking?t.modules.containerTypeWidgetHelper.doInterWidgetLinking(n,i.selectedIndex):n.performSelectedWidgetAction(r.ID,n,i,t)},t.prototype.applyWidgetFilterValuesFromAPI=function(n,t){return t.processFilterInformation(n)},t.onMenuItemClose=function(t,i,r,u){t.Name.indexOf("Chart")!==-1&&t.Name.indexOf("Radar")===-1&&t.Name.indexOf("ScatterChart")===-1&&(r.cancel=!1,r.model.selectedDataPointIndexes=[]);n.isNullOrUndefined(u.target.text)&&(t.Name.indexOf("Map")>-1&&t.Name.indexOf("Tree")===-1&&t.Name.indexOf("Heat")===-1?t.mapObj.removeShapeSelection():t.Name.indexOf("Grid")>-1&&t.Name.indexOf("Pivot")===-1?t.clearSelection():t.Name.indexOf("Pivot")>-1?t.clearSelectionCell():t.Name.indexOf("RadarPolar")>-1?(t.radarPolarChartObj.selectedDataIndexes=[],t.radarPolarChartObj.refresh()):t.Name.indexOf("ScatterChart")>-1?(t.bubbleScatterChartObj.selectedDataIndexes=[],t.bubbleScatterChartObj.refresh()):t.Name.indexOf("Chart")>-1&&(n.isNullOrUndefined(t.chartObj)?(t.comboChartObj.model.selectedDataPointIndexes=[],t.comboChartObj.redraw()):(t.chartObj.model.selectedDataPointIndexes=[],t.chartObj.redraw()),!n.isNullOrUndefined(t.drilledChartObj)&&t.drillLevelInfo.length>0&&(t.drilledChartObj.model.selectedDataPointIndexes=[],t.drilledChartObj.redraw()),!n.isNullOrUndefined(t.drilledComboChartObj)&&t.drillLevelInfo.length>0&&(t.drilledComboChartObj.model.selectedDataPointIndexes=[],t.drilledComboChartObj.redraw())))},t.populateWidgetSelectionMenuItems=function(n,t,i){for(var f,r=[{Name:WidgetAction.DrillDown.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.drillDownDisplayName,IsVisible:!1},{Name:WidgetAction.Filter.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.filteringDisplayName,IsVisible:!1},{Name:WidgetAction.Linking.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.linkingDisplayName,IsVisible:!1},{Name:WidgetAction.ViewData.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.viewDataDisplayName,IsVisible:!1},{Name:WidgetAction.WidgetLinking.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.widgetLinkingDisplayName,IsVisible:!1}],u=0;u<r.length;u++)for(f=0;f<t.length;f++)if(t[f]===r[u].Name){r[u].IsVisible=!0;break}return r},t.getGlobalColumnId=function(n,t){for(var i,r=0;r<t.length;r++)if(t[r].FieldInfos.length>0&&(i=t[r].FieldInfos.filter(function(t){return t.UniqueColumnName===n}),i.length>0))return i[0].FieldActualType==="bbi-designer-dataset-datetime"?i[0].Id+"_"+i[0].DateTimeFormat:i[0].Id;return""},t.getColorCode=function(t,i,r){var u=t.designerInstance.modules.resource.getColumnColorCode(i);return n.DashboardUtil.IsStringNullorWhiteSpace(u)&&(u=!n.isNullOrUndefined(r)&&!n.DashboardUtil.IsStringNullorWhiteSpace(r.Color)?r.Color:n.DashboardUtil.defaultColorPalette[0]),u},t.updateIndividualColorBasedonTheme=function(t,i,r,u){var f;if(t&&!n.isNullOrUndefined(i)&&i.Type===ColorCustomizationType.Individual&&i.SolidColorInfo.length!==0){var s=void 0,o=void 0,h=void 0,e=void 0,c=r[0].UniqueColumnName;for(e=i.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===c})[0].DefaultColorSets,o=i.SolidColorInfo[0].BasedOn.FieldId,s=r[0].FieldActualType==="bbi-designer-dataset-datetime"?o+"_"+r[0].DateTimeFormat:o,f=0;f<e.length;f++)h=e[f].Name.toString(),e[f].Color=e[f].IsEdited?e[f].Color:u.modules.resource.getColumnValueColorCode(s,h)}},t.prototype.updateConditionBasedWidgetTitleFont=function(t,i,r){if(!n.isNullOrUndefined(r.ControlHeader)){var u=t?this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.AutoFontSize?this.dashboardDesigner.canApplyDashboardTheme()&&(r.Type==="NumberCard"||r.Type==="KPICard")?"":r.getFontSizeBasedOnResolution(!0):this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.FontSize+"px":i+"px",f=r.ControlHeader.find(".bbi-dbrd-control-title .e-title-text");f.css("font-size",n.isNullOrUndefined(u)?"":u);r.ControlHeader.css("height",window.parseFloat(f.css("font-size"),10)+WidgetHeaderFontSizeFactor.title+"px");this.updateContentContainerHeight(r)}},t.prototype.updateContentContainerHeight=function(t){var i,r;n.isNullOrUndefined(t)||n.isNullOrUndefined(t.ControlHeader)||n.isNullOrUndefined(t.ControlSubHeader)||(i=0,t.ControlHeader.css("display")==="block"&&(i=t.ControlHeader.height()),r=t.ControlSubHeader.css("display")!=="none",i=r?i+t.ControlSubHeader.outerHeight():i,t.ContentContainer.css("height","calc(100% - "+i+"px)"))},t.prototype.updateConditionBasedWidgetSubTitleFont=function(t,i,r){if(!n.isNullOrUndefined(r.ControlSubHeader)){var u=t?this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.AutoFontSize?this.dashboardDesigner.canApplyDashboardTheme()&&(r.Type==="NumberCard"||r.Type==="KPICard")?"":r.getFontSizeBasedOnResolution():this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.FontSize+"px":i+"px",f=r.ControlSubHeader.find(".bbi-dbrd-control-sub-title .e-title-text");f.css("font-size",n.isNullOrUndefined(u)?"":u);r.ControlSubHeader.css("height",window.parseFloat(f.css("font-size"),10)+WidgetHeaderFontSizeFactor.subTitle+"px");this.updateContentContainerHeight(r)}},t.updateWidgetFontSizeOnRendering=function(t,i){var e,o,r,c;if(this.isDataWidget(t)){var u=t.getJson().ContainerSettings.WidgetTitleFontInfo,f=t.getJson().ContainerSettings.WidgetSubTitleFontInfo,l=n.isNullOrUndefined(u)?!0:u.AutoFontSize,a=n.isNullOrUndefined(f)?!0:f.AutoFontSize,s=l?i.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.AutoFontSize?null:i.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.FontSize:u.FontSize,h=a?i.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.AutoFontSize?null:i.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.FontSize:f.FontSize;n.isNullOrUndefined(t.ControlHeader)||(e=t.ControlHeader.find(".bbi-dbrd-control-title .e-title-text"),e.css("font-size",n.isNullOrUndefined(s)?"":s+"px"),t.ControlHeader.css("height",window.parseFloat(e.css("font-size"),10)+WidgetHeaderFontSizeFactor.title+"px"));n.isNullOrUndefined(t.ControlSubHeader)||(o=t.ControlSubHeader.find(".bbi-dbrd-control-sub-title .e-title-text"),o.css("font-size",n.isNullOrUndefined(h)?"":h+"px"),t.ControlSubHeader.css("height",window.parseFloat(o.css("font-size"),10)+WidgetHeaderFontSizeFactor.subTitle+"px"));n.isNullOrUndefined(t.ControlHeader)||n.isNullOrUndefined(t.ControlSubHeader)||(r=t.ControlHeader.height(),c=t.ControlSubHeader.css("display")!=="none",r=c?r+t.ControlSubHeader.outerHeight():r,t.ContentContainer.css("height","calc(100% - "+r+"px)"))}},t.updateWidgetContainerPosition=function(n,t){var i="";n.widgetOrder=t;t>0?i=t.toString():n.widgetOrder=100;n.Type==="NumberCard"||n.Type==="KPICard"?n.ControlContainer.find(".bbi-dbrd-content-container").children(".bbi-dbrd-isimage,.bbi-nodata-container,.bbi-widget-not-configured-text").css("z-index",i):n.ControlContainer.find(".bbi-dbrd-content-container").children(".bbi-dbrd-control-header,.bbi-dbrd-isimage,.bbi-nodata-container,.bbi-widget-not-configured-text").css("z-index",i);n.ControlContainer.find(".bbi-dbrd-content-container").children(".bbi-dbrd-control, .e-dbrd-widget").css("z-index",n.widgetOrder);this.isContainerWidget(n)&&n.updateWidgetPositionWithinContainer()},t.prototype.isMobileMode=function(){return!this.dashboardDesigner.model.dashboardFromData.isExportImage&&!this.dashboardDesigner.model.dashboardFromData.isExportPdf&&window.outerWidth<=768},t.prototype.getWidgetUsingId=function(n){var t=this.getAllWidgets().filter(function(t){return t.getJson().UniqueId===n});return t.length>0?t[0]:null},t.prototype.getFirstWidgetHeight=function(){var n=this.dashboardDesigner.modules.Mode.designCanvas,t=n.find(".bbi-dbrditem");return t[0].clientHeight},t.prototype.getFirstCardWidget=function(n){return n.Type==="NumberCard"||n.Type==="KPICard"},t.updateURLLinkingforDrillDown=function(t,i,r){if(!n.isNullOrUndefined(i)&&!n.isNullOrUndefined(t)&&r&&t.url.indexOf("?")!==-1){var u=t.url.split("?"),f="";u[1].indexOf("&&")!==-1?(f="&&",t.url=this.validateParameterValues(f,u,i)):u[1].indexOf("&")!==-1?(f="&",t.url=this.validateParameterValues(f,u,i)):u.splice(0,1)}},t.clearFilterSelectionOnParamInjectionChange=function(n,t){var i=t.getJson().SelectedFilterValues,f,r,u;if(i.length>0&&n.length>0&&i[0].InitialDimensionFilter.Text.length>0)for(f=function(r){var u=n.filter(function(n){return n.ParameterValue===i[0].InitialDimensionFilter.Text[r]});if(u.length===0)return t.getJson().SelectedFilterValues=[],{value:void 0}},r=0;r<i[0].InitialDimensionFilter.Text.length;r++)if(u=f(r),typeof u=="object")return u.value},t.splitURLlinkingFieldForDrillDown=function(t,i,r){for(var f,e,c,o,l,s,a,h=[],u=0;u<i.DataGroupInfo.FieldContainers.length;u++)if(i.DataGroupInfo.FieldContainers[u].IsDrillSection)if(i.DrillLevelInfo.length>=1)for(f=0;f<=i.DrillLevelInfo.length;f++)n.isNullOrUndefined(i.DataGroupInfo.FieldContainers[u].FieldInfos[f])||h.push(i.DataGroupInfo.FieldContainers[u].FieldInfos[f].Name);else h.push(i.DataGroupInfo.FieldContainers[u].FieldInfos[0].Name);for(e=[],c=0;c<h.length;c++)for(o=0;o<r.length;o++)r[o].indexOf(h[c])===-1||e.push(r[o]);for(l=[],s=0;s<e.length;s++)r.indexOf(e[s])!==-1&&l.push(e[s]);for(a=0;a<l.length;a++)t.push(l[a])},t.validateParameterValues=function(n,t,i){var u=t[1].split(n),e,f,r;t.length=1;t[0].indexOf("showmydashboards")===-1&&(t[0]=t[0]+"?",u[0].indexOf("showmydashboards")!==-1&&(t[0]=t[0]+u[0]+n,u.shift()));var h=/={{:(.*?)}}/,o=u.filter(function(n){return h.test(n)}),s=u.filter(function(n){return o.indexOf(n)===-1});for(e=0;e<s.length;e++)t.push(s[e]);for(o.length>0&&this.splitURLlinkingFieldForDrillDown(t,i,o),f="",r=0;r<t.length;r++)f=r===0||r===t.length-1?f+t[r]:f+t[r]+n;return f},t.getNumberOfParametersInjected=function(t){var i=0;return n.isNullOrUndefined(t)||t.FieldContainers.forEach(function(t){t.FieldInfos.forEach(function(t){!n.isNullOrUndefined(t.ParametersInWidgets)&&t.ParametersInWidgets.length>0&&(i=t.ParametersInWidgets.length)})}),i},t.updateLabelParameterForDescription=function(n,t,i){var u=i.modules.labelParameter,r=n.ContainerSettings.Description;r=u.getResultantParameterString(r,n.Data.Id);t.html(r);t.attr("data-tooltip",t.text())},t.defaultColorPalette=["#77A7FB","#E57368","#FBCB43","#34B67A","#F1AB68","#6CC2D9","#195962","#E18878","#1AA27D","#BFAAC7","#89695e","#a5c77f","#f48fb1","#90caf9","#cc4452"],t}();t.WidgetHelper=i})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={})),function(n){var t;(function(t){var i=function(){function t(n){this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$}return t.createNoDataContainer=function(t){var r,i;t.NoDataDispalyContainer=n.buildTag("div.bbi-dbrd-control-nodatainfo bbi-nodata-container","",{padding:t.getContainerSettings().ShowHeader?"0px 3px 3px 3px":"3px",overflow:"hidden","background-color":"transparent"},{});var u=n.buildTag("div.bbi-dbrd-control-nodatainfo e-info-div bbi-align-center","",{display:"block","background-color":"transparent",position:"absolute",width:"100%",top:"0px"},{}),e=n.buildTag("div.bbi-widget-info-icon","",{display:"inline-block"},{}),f=n.buildTag("div.e-nodata","",{},{});f.html(BoldBIDashboardDesigner.getLocale().designPanel.noDataToBeDisplay);u.append(e,f);t.NoDataDispalyContainer.append(u);this.updateNoDataContainerSize(t.ContentContainer,t.NoDataDispalyContainer);t.NoDataDispalyContainer.addClass("e-container-dbrd-theme");t.ContentContainer.append(t.NoDataDispalyContainer);n.isNullOrUndefined(t.getContainerSettings().NoDataContainerSettings)||(r=t.getContainerSettings().NoDataContainerSettings,n.isNullOrUndefined(r.ImageInfo)||(i=r.ImageInfo,this.updateNoDataDefaultImg(t,i.ShowImage),i.ShowImage&&this.updateNoDataImageOpacity(t,i.Transparency)),this.updateNoDataIcon(t,t.getContainerSettings().NoDataContainerSettings.HideDefaultIcon),this.updateNoDataFontColor(t,t.getContainerSettings().NoDataContainerSettings.FontColor),this.updateDataNotConfiguredMsg(t,t.getContainerSettings().NoDataContainerSettings.CustomMsg))},t.createContentContainer=function(t,i){var u=t.getContainerSettings().SubTitle,r=10,f;t.getContainerSettings().ShowHeader&&(r=t.ControlHeader.outerHeight(!0),!n.isNullOrUndefined(u)&&u.trim().length>0?(r+=t.ControlSubHeader.outerHeight(!0),t.ControlContainer.find(".bbi-dbrd-control-sub-header").css("display","block")):t.ControlContainer.find(".bbi-dbrd-control-sub-header").css("display","none"));f=t.getContainerSettings().ShowHeader?"calc(100% - "+r+"px)":"100%";t.ContentContainer=n.buildTag("div.bbi-dbrd-content-container e-dashboardviewer","",{width:"100%",height:f,"box-sizing":"border-box"},{});t.ContentContainer.find(".bbi-background-waiting-popup").length===0&&this.appendSpinningWidgetForWidget(t.ContentContainer,i,t.Type);t.updateContainerPadding();t.ControlContainer.find(".bbi-dbrd-control-container-wrapper").append(t.ContentContainer)},t.appendSpinningWidgetForWidget=function(t,i,r){var u=n.buildTag("div.bbi-background-waiting-popup","",{display:"none",top:"0px",position:"absolute",width:"100%",height:"100%","background-color":i.modules.themeHelper.getWaitingPopupBackground(r),"z-index":"150",opacity:1}),f=n.buildTag("div.bbi-dashboard-spinning-widget","",{});f.append(i.getLoadingSvgElement("var(--widget-loading-indicator-color)"));u.append(f);t.append(u)},t.createWidgetImage=function(t,i){var u=t,f,r;n.isNullOrUndefined(u)||(f=u.getWidgetImage(i),r=n.buildTag("div.bbi-dbrd-isimage","",{},{}),r.append(f),t.ContentContainer.append(r))},t.createWidgetNotConfiguredContainer=function(t){var i=n.buildTag("div.bbi-widget-not-configured-text","",{},{}),o=n.buildTag("div.bbi-loader-background","",{background:t.designerInstance.modules.themeHelper.getWidgetTileBackground(null)},{}),r=n.buildTag("div.bbi-widget-not-configured-header","",{},{}),u=n.isNullOrUndefined(t.getContainerSettings().NoDataContainerSettings)||n.DashboardUtil.IsStringNullorWhiteSpace(t.getContainerSettings().NoDataContainerSettings.CustomMsg)?BoldBIDashboardDesigner.getLocale().designPanel.widgetNotConfigured:n.DashboardUtil.encodeText(t.getContainerSettings().NoDataContainerSettings.CustomMsg),f=null,e;(n.isNullOrUndefined(t.getContainerSettings().NoDataContainerSettings)||!t.getContainerSettings().NoDataContainerSettings.HideDefaultIcon)&&(f=n.buildTag("div.bbi-widget-not-configured-icon e-dbrd-designer-hoverable","",{},{"data-tooltip":u}));e=n.buildTag("div.bbi-widget-not-configured-content",u,{},{});r.append(f,e);i.append(r);t.ContentContainer.closest(".bbi-dbrd-control-container").hasClass("e-label-item")||t.ContentContainer.closest(".bbi-dbrd-control-container").hasClass("e-rte-item")||t.ContentContainer.closest(".bbi-dbrd-control-container").hasClass("e-datebucket-item")||t.ContentContainer.closest(".bbi-dbrd-control-container").hasClass("bbi-container-widget")||t.ContentContainer.closest(".bbi-dbrd-control-container").hasClass("bbi-line-item")?t.ContentContainer.append(i):(t.ContentContainer.append(i,o),t.ContentContainer.closest(".bbi-dbrd-control-container").addClass("bbi-show-widget-not-configured"));t.ContentContainer.find(".bbi-widget-not-configured-text").addClass("e-container-dbrd-theme")},t.widgetHasError=function(n){return n.ContentContainer.find(".bbi-dbrd-control-error").length===1},t.isWidgetHasNotConfiguredClass=function(n){return n.ContentContainer.find(".bbi-widget-not-configured-text").closest(".bbi-dbrd-control-container").hasClass("bbi-show-widget-not-configured")},t.isWidgetNoDataContainerVisible=function(n){return n.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").is(":visible")},t.isWidgetRenderedWithData=function(n){return!this.isWidgetHasNotConfiguredClass(n)&&!this.isWidgetNoDataContainerVisible(n)&&!this.widgetHasError(n)},t.prototype.showControlError=function(n,t){n.ContentContainer.find(".bbi-dbrd-control-error").length===1&&n.ContentContainer.find(".bbi-dbrd-control-error").remove();this.createErrorContainer(n,t);n.IsRendered=!0},t.addWidgetNotConfiguredClass=function(t){n.Dashboard.WidgetContainerHelper.toggleWidgetNotConfiguredClass(t,!0)},t.removeWidgetNotConfiguredClass=function(t){n.Dashboard.WidgetContainerHelper.toggleWidgetNotConfiguredClass(t,!1)},t.applyWidgetTitleColor=function(n,t,i,r){var u=n.designerInstance.modules.themeHelper.getWidgetTileTextColor(n.Type);t.find(".bbi-dbrd-control-title").css({color:i==="#686262"?u:i});this.applyFontStylesForWidgetTitle(n,r)},t.applyWidgetSubTitleColor=function(n,t,i){var r=n.designerInstance.modules.themeHelper.getWidgetSubTitleTextColor(n.Type);t.find(".bbi-dbrd-control-sub-title").css({color:r});this.applyFontStylesForWidgetSubTitle(n,i)},t.applyFontStylesForWidgetTitle=function(t,i){if(!n.isNullOrUndefined(i)&&(t.designerInstance.canApplyTheme()||t.designerInstance.canApplyDashboardTheme()&&t.designerInstance.isViewMode())){var r=" ."+t.RootCss+".bbi-dbrd-control-container .bbi-dbrd-control-header .bbi-dbrd-control-title .e-title-text";t.designerInstance.modules.themeHelper.applyWidgetFontStyles(t.Type+"_Title",r,i)}},t.applyFontStylesForWidgetSubTitle=function(t,i){if(!n.isNullOrUndefined(i)&&(t.designerInstance.canApplyTheme()||t.designerInstance.canApplyDashboardTheme()&&t.designerInstance.isViewMode())){var r=" ."+t.RootCss+".bbi-dbrd-control-container .bbi-dbrd-control-sub-header .bbi-dbrd-control-sub-title .e-title-text";t.designerInstance.modules.themeHelper.applyWidgetFontStyles(t.Type+"_SubTitle",r,i)}},t.applyErrorContainerTheme=function(n){var u=n.designerInstance.modules.themeHelper.getWidgetTileBackground(null),r=n.designerInstance.modules.themeHelper.getWidgetTileTextColor(),f=n.designerInstance.modules.themeHelper.getWidgetContainerBorder(n.designerInstance.isDarkTypeTheme()),t=n.ContentContainer.find(".bbi-widget-not-configured-text").attr("style"),i="background-color:"+u+"!important; color:"+r+"!important; borderColor:"+f+"!important; ";t=n.designerInstance.modules.themeHelper.getStyleString(t,i);n.ContentContainer.find(".bbi-widget-not-configured-text").attr("style",t);t=n.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").attr("style");i="color:"+r+"!important; ";t=n.designerInstance.modules.themeHelper.getStyleString(t,i);n.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").attr("style",t);t=n.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").find(".bbi-align-center").attr("style");i="color:"+r+"!important; ";t=n.designerInstance.modules.themeHelper.getStyleString(t,i);n.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").find(".bbi-align-center").attr("style",t);t=n.ContentContainer.find(".bbi-dbrd-control-error").attr("style");i="background-color:"+u+"!important; color:"+r+"!important; ";t=n.designerInstance.modules.themeHelper.getStyleString(t,i);n.ContentContainer.find(".bbi-dbrd-control-error").attr("style",t);t=n.ContentContainer.find(".bbi-dbrd-control-error").find(".bbi-reload-button").attr("style");i="background-color:"+u+"!important; color:"+r+"!important; ";t=n.designerInstance.modules.themeHelper.getStyleString(t,i);n.ContentContainer.find(".bbi-dbrd-control-error").find(".bbi-reload-button").attr("style",t)},t.toggleWidgetNotConfiguredClass=function(n,t){n.ContentContainer.find(".bbi-widget-not-configured-text").closest(".bbi-dbrd-control-container").toggleClass("bbi-show-widget-not-configured",t);n.ContentContainer.find(".bbi-widget-not-configured-text").addClass("e-container-dbrd-theme")},t.prototype.createErrorContainer=function(t,i){var h=t.getContainerSettings(),v=h.ShowBorder?h.CornerRadius:0,e=t.ContentContainer.height(),r=t.ContentContainer.width(),o,a;t.ContentContainer.children(".bbi-dbrd-control").css({display:"none"});t.ContentContainer.find(".bbi-dbrd-control-error").length>0&&t.ContentContainer.find(".bbi-dbrd-control-error").remove();var u=n.buildTag("div.bbi-dbrd-control-error bbi-align-center","",{"z-index":t.ContentContainer.children(".bbi-dbrd-control").css("z-index"),position:"relative","border-radius":v+"px",overflow:"hidden","background-color":"transparent"},{}),s=this.getDisplayError(i.ErrorCode.toString()),f=n.buildTag("div.bbi-widget-error-icon e-dbrd-hoverable","",{},{"data-tooltip":s}),c=n.buildTag("div.e-dbrd-controlError-msg",s,{},{}),l=n.buildTag("div.bbi-dbrd-link-btn",BoldBIDashboardDesigner.getLocale().errorMessage.knowMore,{},{});e>95?(r<65&&(c.width(r),l.width(r),r<40&&f.width(r)),e<120&&r<65?u.append(f):u.append(f,c,l)):e>=40&&(r<40&&f.width(r),u.append(f));t.ContentContainer.css({display:"table"});o=n.buildTag("button.reload-retrievalerror-icon bbi-reload-button bbi-dbrd-designer-hand-cursor bbi-dbrd-refresh-link-btn",BoldBIDashboardDesigner.getLocale().tableSelectorWindow.reloadButtonText,{"padding-left":"6px","font-size":"13px"},{type:"button"});o.addClass("e-container-dbrd-theme");e>=65&&(r<65&&o.width(r),u.append(o));u.addClass("e-container-dbrd-theme");t.ContentContainer.append(u);u.children().hasClass("bbi-dbrd-link-btn")&&this.errReloadClickHandler(i,t.ContentContainer,s);a=t;u.find(".reload-retrievalerror-icon").bind("click",function(){a.dataConfigurationInstance.postDraggedFields(t.ContentContainer.parents(".bbi-dbrditem"),!1,t.masterFilterWindowInstance.getSelectedValuesForWidgetRequest())});t.CellInfo.RowSpan===1&&t.CellInfo.ColumnSpan===1?this.errorMessageForSingleSizedWidget(u,BoldBIDashboardDesigner.getLocale().errorMessage.dataRetrievalError):t.CellInfo.RowSpan===1&&this.errorMessageForRegularSizedWidget(u);t.ContentContainer.find(".bbi-loader-background").css("display")==="block"&&t.ContentContainer.find(".bbi-loader-background").css("display","none")},t.prototype.getDisplayError=function(t){var i=this.dashboardDesigner.getErrorCodes();if(!n.isNullOrUndefined(i[t]))return"ERR: "+t+"-"+i[t]},t.prototype.errReloadClickHandler=function(t,i,r){var u=this.dashboardDesigner.modules.util;i.on("click",".bbi-dbrd-link-btn",this.bbdesigner$.proxy(u.alertDialog,u,BoldBIDashboardDesigner.getLocale().errorMessage.dataRetrievalError,n.isNullOrUndefined(t.OuterMessage)||n.DashboardUtil.isEmptyString(t.OuterMessage)?BoldBIDashboardDesigner.getLocale().errorMessage.defaultNullErrorMessage:r,IconType.errors,AlertType.Alert,!0,n.isNullOrUndefined(t.Message)?BoldBIDashboardDesigner.getLocale().errorMessage.widgetDataUpdateFailed:t.Message))},t.prototype.errorMessageForSingleSizedWidget=function(n,t){n.find(".bbi-widget-error-icon").remove();n.prepend(this.bbdesigner$("<div>").addClass("widget-error-icon-single").attr({"data-tooltip":t}).addClass("e-dbrd-hoverable").css({"font-size":"18px"}));n.find(".e-dbrd-controlError-msg").remove();n.find(".bbi-dbrd-link-btn").css({"font-size":"7px"});n.find(".bbi-dbrd-refresh-link-btn").css({border:"none","font-size":"7px",color:"#3b99fc",height:"15px","margin-top":"0px"})},t.prototype.errorMessageForRegularSizedWidget=function(n){n.find(".bbi-widget-error-icon").addClass("e-dbrd-iocn-single");n.find(".e-dbrd-controlError-msg").remove();n.find(".bbi-dbrd-refresh-link-btn").addClass("e-dbrd-refresh-single")},t.updateNoDataContainerSize=function(n,t){var u=n.height()-59,i=n.height(),r=n.width();i<40?(t.find(".bbi-widget-info-icon").css("display","none"),t.find(".e-nodata").css("display","none")):i>=40&&i<65||i<=65&&r<190||i<95&&r<65||(i<120||i<145)&&r<40||i<200&&r<15?(t.find(".e-nodata").css("display","none"),t.find(".bbi-widget-info-icon").css("display","block")):(t.find(".bbi-widget-info-icon").css("display","block"),t.find(".e-nodata").css("display","block"));r<40?(t.find(".bbi-widget-info-icon").css({width:r,overflow:"hidden"}),t.find(".e-nodata").css({width:r,overflow:"hidden"})):(t.find(".bbi-widget-info-icon").css({width:"",overflow:"auto"}),t.find(".e-nodata").css({width:"",overflow:"auto"}));u>0&&t.find(".bbi-dbrd-control-nodatainfo.e-info-div.bbi-align-center").css({"margin-top":u/2})},t.createContainer=function(t,i,r,u){var c="bbi-canvas bbi-dbrd-control-container",d=i.modules.Mode.designCanvas,y=d.find(".bbi-dbrditem"),p,w,b,l,v,s,h,k,f;i.designerPanel.isMobileView&&i.model.isPinWidget&&(r.width=i.modules.Mode.designCanvas.width()-10,r.height=i.modules.Mode.designCanvas.height()+i.designerPanel.cellMargin-10,c=c+" bbi-dbrd-control-container-pinwidget");t.ControlContainer=n.buildTag("div.bbi-dbrditem "+c,"",{left:i.model.dashboardFromData.isWidgetSpecific||i.model.dashboardFromData.isControl&&i.model.dashboardFromData.isWidgetPagewiseExport?"":r.left,top:i.model.dashboardFromData.isWidgetSpecific||i.model.dashboardFromData.isControl&&i.model.dashboardFromData.isWidgetPagewiseExport?"":r.top,width:i.model.dashboardFromData.isWidgetSpecific||i.model.dashboardFromData.isControl&&i.model.dashboardFromData.isWidgetPagewiseExport?i.modules.Mode.designCanvas.width()-10:r.width,height:i.designerPanel.isMobileView&&!i.model.isPinWidget?t.getMobileViewHeight():i.model.dashboardFromData.isWidgetSpecific||i.model.dashboardFromData.isControl&&i.model.dashboardFromData.isWidgetPagewiseExport?y.length==0?i.modules.Mode.designPanelTag.height()-i.modules.Mode.designPanelTag.find(".bbi-dashboarddesigner-bannerPanel").height()-10:i.modules.Mode.designPanelTag.height()-10:r.height,background:t.designerInstance.modules.themeHelper.getWidgetTileBackground(null),"border-radius":t.getContainerSettings().CornerRadius,position:i.model.dashboardFromData.isWidgetSpecific||i.model.dashboardFromData.isControl&&i.model.dashboardFromData.isWidgetPagewiseExport?"relative":"absolute",margin:i.model.dashboardFromData.isWidgetSpecific||i.model.dashboardFromData.isControl&&i.model.dashboardFromData.isWidgetPagewiseExport?y.length==0?"5px 5px":"10px 5px":""},{id:i._id+"_"+t.Name,"data-name":t.Name,"data-hasheader":t.getContainerSettings().ShowHeader,"data-widget-id":t.getJson().UniqueId});p=!n.isNullOrUndefined(i.model.widgetContainerSettings)&&!n.DashboardUtil.IsStringNullorWhiteSpace(i.model.widgetContainerSettings.boxShadow)?i.model.widgetContainerSettings.boxShadow:null;this.updateWidgetShadow(t.getContainerSettings().ShowShadow,t.ControlContainer,p);n.Dashboard.WidgetHelper.isContainerWidget(t)&&i.modules.containerTypeWidgetHelper.addContainerClass(t);this.updateMinMobileViewHeight(t,i);w=n.buildTag("div.bbi-dbrd-control-background","",{width:"100%",height:"100%",position:"absolute","background-color":t.designerInstance.modules.themeHelper.getWidgetTileBackground(t.Type),"background-repeat":"no-repeat",opacity:n.isNullOrUndefined(t.getJson())?1:t.backgroundInfo.Opacity},{});b=n.buildTag("div.bbi-dbrd-control-container-wrapper","",{width:"100%",height:"100%","box-sizing":"border-box",padding:"0px"},{});t.ControlContainer.append(w,b);t.updateControlContainerPadding();t.getBackgroundForControlContainer();i.model.isPinWidget&&i.model.widgetId!==t.getJson().UniqueId&&(n.isNullOrUndefined(t.getContainerSettings().CombineWidgetId)||t.getContainerSettings().CombineWidgetId==="")&&t.ControlContainer.css("display","none");t.ControlContainer.addClass(t.RootCss);i.modules.Mode.designCanvas.append(t.ControlContainer);i.isMobileLayout()&&!n.isNullOrUndefined(i.model.widgetContainerSettings.margin)&&t.ControlContainer.css("margin",i.model.widgetContainerSettings.margin+"px");l={controlTitle:t.getJson().ContainerSettings.Title,controlId:t.Name,isMaximizeEnable:!1,isFilterIconEnable:t.getJson().FilterSettings.ActAsMasterWidget};t.getJson().ContainerSettings.ShowHeader&&(this.getControlHeader(l,t,i),this.getControlSubHeader(t));this.createContentContainer(t,i);t.ControlContainer.hasClass("e-rte-item")||t.ControlContainer.hasClass("e-card-item")?this.setIconContainerForCardControl(t,i):t.getJson().ContainerSettings.ShowHeader||this.iconContainerForNoHeader(l,t,i);!n.Dashboard.WidgetHelper.isDataWidget(t)||n.Dashboard.WidgetHelper.isOlderDashboardWidgets(t)||!n.isNullOrUndefined(i.model.dashboardFromData)&&i.model.dashboardFromData.loadFromData||this.createWidgetImage(t,u);this.createNoDataContainer(t);var e=BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-title"),g=BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-description"),a=t.getJson().ContainerSettings.Title,o=i.modules.labelParameter;a=o.getResultantParameterString(a,t.getJson().Data.Id);e.html(a);e.attr("data-tooltip",e.text());o.adjustParameterColumn(BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-title-wrapper"));v=i.modules.containerPropertyItem;BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-sub-title").css({"justify-content":v.getContainerTitleAlignmentValue(n.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,t.getJson().ContainerSettings.TextAlignment))});(i.model.dashboardFromData.isExportImage||i.model.dashboardFromData.isExportPdf)&&(BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-title-wrapper").addClass("export-"+n.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,t.getJson().ContainerSettings.TextAlignment).toLowerCase()),BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-sub-title").addClass("export-"+n.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,t.getJson().ContainerSettings.TextAlignment).toLowerCase()));this.setControlIconAlignment(g,BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-title-wrapper"),BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-controlIcon-container"),e);this.createWidgetNotConfiguredContainer(t);t.updateIconContainerBackground();i.modules.widgetContainerHelper.showLoadingIndicator(t);t.getJson().ContainerSettings.SubTitle!==" "&&(s=t.getJson().ContainerSettings.SubTitle,h=BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-sub-title"),s=o.getResultantParameterString(s,t.getJson().Data.Id),h.html(s),h.attr("data-tooltip",h.text()),o.adjustParameterColumn(BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-sub-header")),t.updateSubTitleForContainer());t.getJson().ContainerSettings.Description!==" "&&(k=BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-description"),n.Dashboard.WidgetHelper.updateLabelParameterForDescription(t.getJson(),k,i));BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-sub-title").css({color:t.designerInstance.modules.themeHelper.getWidgetSubTitleTextColor(t.Type)});t.getJson().ContainerSettings.ShowBorder&&(BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-sub-title").css({"justify-content":v.getContainerTitleAlignmentValue(n.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,t.getJson().ContainerSettings.TextAlignment))}),BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-title").css({color:t.getJson().ContainerSettings.TextColor}),t.getJson().ContainerSettings.ShowBorder?BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).css({border:"1px solid "+this.getThemeVariablesForWidgets(t.Type,!1,!1)}):BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).css({border:"0px"}));f=t.getJson().ContainerSettings.CornerRadius===4?this.getThemeVariablesForWidgets(t.Type,!0,!1):t.getJson().ContainerSettings.CornerRadius+"px";BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).css("border-radius",f);BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-content-container").css("border-radius",f);BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-nodatainfo").css("border-radius",f);BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-widget-not-configured-text").css("border-radius",f);BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-loader-background").css("border-radius",f);BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-background").css("border-radius",f);i.designerPanel.isMobileView&&i.designerPanel.updateScrollBar();t.isBackgroundInfoNeeded||t.ControlContainer.find(".bbi-dbrd-control-background").css("background-color","transparent");this.updateTitleForHigherResolution(t)},t.getThemeVariablesForWidgets=function(n,t,i){switch(n){case ControlType.Grid.toString():return i?"var(--grid-widget-container-bg-color)":t?"var(--grid-widget-container-border-radius)":"var(--grid-widget-container-border-color)";case ControlType.KPICard.toString():return i?"var(--kpicard-widget-container-bg-color)":t?"var(--kpicard-widget-container-border-radius)":"var(--kpicard-widget-container-border-color)";case ControlType.NumberCard.toString():return i?"var(--numbercard-widget-container-bg-color)":t?"var(--numbercard-widget-container-border-radius)":"var(--numbercard-widget-container-border-color)";case ControlType.Map.toString():return i?"var(--map-widget-container-bg-color)":t?"var(--map-widget-container-border-radius)":"var(--map-widget-container-border-color)";case ControlType.HeatMap.toString():return i?"var(--heatmap-widget-container-bg-color)":t?"var(--heatmap-widget-container-border-radius)":"var(--heatmap-widget-container-border-color)";case ControlType.TreeMap.toString():return i?"var(--treemap-widget-container-bg-color)":t?"var(--treemap-widget-container-border-radius)":"var(--treemap-widget-container-border-color)";case ControlType.Chart.toString():return i?"var(--chart-widget-container-bg-color)":t?"var(--chart-widget-container-border-radius)":"var(--chart-widget-container-border-color)";case ControlType.ComboBox.toString():return i?"var(--combobox-widget-container-bg-color)":t?"var(--combobox-widget-container-border-radius)":"var(--combobox-widget-container-border-color)";case ControlType.ComboChart.toString():return i?"var(--combochart-widget-container-bg-color)":t?"var(--combochart-widget-container-border-radius)":"var(--combochart-widget-container-border-color)";case ControlType.DatePicker.toString():return i?"var(--datepicker-widget-container-bg-color)":t?"var(--datepicker-widget-container-border-radius)":"var(--datepicker-widget-container-border-color)";case ControlType.ListBox.toString():return i?"var(--listbox-widget-container-bg-color)":t?"var(--listbox-widget-container-border-radius)":"var(--listbox-widget-container-border-color)";case ControlType.PivotGrid.toString():return i?"var(--pivotgrid-widget-container-bg-color)":t?"var(--pivotgrid-widget-container-border-radius)":"var(--pivotgrid-widget-container-border-color)";case ControlType.PeriodOverPeriod.toString():return i?"var(--pop-widget-container-bg-color)":t?"var(--pop-widget-container-border-radius)":"var(--pop-widget-container-border-color)";case ControlType.RadarPolarChart.toString():return i?"var(--radarpolar-widget-container-bg-color)":t?"var(--radarpolar-widget-container-border-radius)":"var(--radarpolar-widget-container-border-color)";case ControlType.RangeNavigator.toString():return i?"var(--rangenavigator-widget-container-bg-color)":t?"var(--rangenavigator-widget-container-border-radius)":"var(--rangenavigator-widget-container-border-color)";case ControlType.RangeSlider.toString():return i?"var(--rangeslider-widget-container-bg-color)":t?"var(--rangeslider-widget-container-border-radius)":"var(--rangeslider-widget-container-border-color)";case ControlType.RichTextEditor.toString():return i?"var(--rte-widget-container-bg-color)":t?"var(--rte-widget-container-border-radius)":"var(--rte-widget-container-border-color)";case ControlType.Scatter.toString():return i?"var(--scatter-widget-container-bg-color)":t?"var(--scatter-widget-container-border-radius)":"var(--scatter-widget-container-border-color)";case ControlType.RadialGauge.toString():return i?"var(--circulargauge-widget-container-bg-color)":t?"var(--circulargauge-widget-container-border-radius)":"var(--circulargauge-widget-container-border-color)";case ControlType.TabbedWidget.toString():return i?"var(--tab-widget-container-bg-color)":t?"var(--tab-widget-container-border-radius)":"var(--tab-widget-container-border-color)";case ControlType.TextFilter.toString():return i?"var(--textfilter-widget-container-bg-color)":t?"var(--textfilter-widget-container-border-radius)":"var(--textfilter-widget-container-border-color)";case ControlType.Image.toString():return i?"var(--image-widget-container-bg-color)":t?"var(--image-widget-container-border-radius)":"var(--image-widget-container-border-color)";case ControlType.CombineWidget.toString():return i?"var(--combine-widget-container-bg-color)":t?"var(--combine-widget-container-border-radius)":"var(--combine-widget-container-border-color)";default:return i?"var(--widget-primary-background)":t?"var(--widget-container-border-radius)":"var(--widget-container-border-color)"}},t.updateWidgetShadow=function(t,i,r){t&&!n.DashboardUtil.IsStringNullorWhiteSpace(r)?i.css({"box-shadow":r}):t&&n.DashboardUtil.IsStringNullorWhiteSpace(r)?i.css({"box-shadow":"var(--container-box-shadow)"}):i.css({"box-shadow":"none"})},t.updateMinMobileViewHeight=function(t,i){if(n.DashboardUtil.IsStringNullorWhiteSpace(t.getContainerSettings().CombineWidgetId)&&(t.ControlContainer[0].style.removeProperty("min-height"),i.designerPanel.isMobileView)){var r=t.ControlContainer.attr("style"),u="min-height:"+t.getMinMobileHeight()+" !important; ";r=i.modules.themeHelper.getStyleString(r,u);t.ControlContainer.attr("style",r)}},t.updateTitleForHigherResolution=function(t){if(!n.isNullOrUndefined(t.ControlHeader)&&!n.isNullOrUndefined(t.ControlSubHeader)&&t.isVisualWidget&&window.screen.width>=3840){t.ControlHeader.css({height:n.parseInt(t.ControlHeader.find(".bbi-dbrd-control-title").css("font-size"),10)+4+"px"});t.ContentContainer.css("height","calc(100% - "+t.ControlHeader.height()+"px");var i=t.getJson().ContainerSettings.SubTitle;!n.isNullOrUndefined(i)&&i.trim().length>0&&(t.ControlSubHeader.css({height:n.parseInt(t.ControlSubHeader.find(".bbi-dbrd-control-sub-title").css("font-size"),10)+4+"px"}),t.ContentContainer.css("height","calc(100% - "+(t.ControlHeader.height()+t.ControlSubHeader.height())+"px"));t.ControlHeader.find(".bbi-dbrd-control-title").css("line-height","normal");t.ControlSubHeader.find(".bbi-dbrd-control-sub-title").css("line-height","normal");t.ControlHeader.find(".bbi-dbrd-control-description").css({"align-items":"center","line-height":"normal","margin-left":"1%"});t.ControlHeader.find(".bbi-dbrd-control-description").css("display")==="block"&&t.ControlHeader.find(".bbi-dbrd-control-description").css("display","flex")}},t.setControlIconAlignment=function(n,t,i,r){var u=0;t.css("justify-content")==="flex-end"&&(t.parent().find(".e-dbrd-inform-control").css("display")==="block"&&(t.parent().find(".e-dbrd-inform-control").css("right","auto"),t.parent().find(".e-dbrd-inform-control").css("left","0")),i.css("left","0"),i.css("right","auto"));(t.css("justify-content")==="flex-start"||t.css("justify-content")==="center")&&(t.parent().find(".e-dbrd-inform-control").css("display")==="block"&&(t.parent().find(".e-dbrd-inform-control").css("right","0"),t.parent().find(".e-dbrd-inform-control").css("left","auto")),i.css("left","auto"),i.css("right","0"));n.css("display")==="block"&&(u=t.css("justify-content")==="center"?i.outerWidth(!0)+i.outerWidth(!0)+n.outerWidth(!0)+10:i.outerWidth(!0)+n.outerWidth(!0)+10);r.css({"max-width":"calc(100%)"})},t.getFieldContainer=function(n,t){return n!=null&&n.FieldContainers.length>0?n.FieldContainers.filter(function(n){return n.Name===t})[0]:null},t.setAttributes=function(n,t){for(var i in t)n.setAttributeNS(null,i,t[i])},t.getHeaderTemplate=function(t,i,r){var f=i.isVisualWidget?700:500,e=i.designerInstance.modules.themeHelper.getWidgetTileTextColor(i.Type),o=i.isVisualWidget?"22px":"19px",u=i.getJson().ContainerSettings.Description,s=n.isNullOrUndefined(u)||u.trim().length<=0?"none":"block",h=r.modules.containerPropertyItem.getContainerTitleAlignmentValue(n.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,i.getJson().ContainerSettings.TextAlignment));return'<div class="bbi-dbrd-control-title-wrapper" style="width: 100%; display: flex; align-items: center; justify-content: '.concat(h,';">\n                    <div class="bbi-dbrd-control-title bbi-dbrd-designer-hoverable" style="max-width: 100%; font-size: ').concat(i.getFontSizeBasedOnResolution(t.controlTitle),"; font-weight: ").concat(f,"; color: ").concat(e,';" data-tooltip="').concat(t.controlTitle,'">\n                    <span class="e-title-text e-title-value">').concat(t.controlTitle,'<\/span>\n                    <\/div>\n                    <div class="bbi-dbrd-control-description e-icon-dbrd-theme bbi-dbrd-designer-hoverable" style="display: ').concat(s,"; line-height: ").concat(o,"; font-size: ").concat(i.getIconFontSizeBasedOnResolution(),'; height: 20px;" data-tooltip="').concat(i.getJson().ContainerSettings.Description,'">\n                    <\/div>\n                    <\/div>')},t.getIconTemplate=function(n,t,i,r,u){var f=n==="bbi-remove-control-filter bbi-remove-control-filter-disable"?"":"bbi-dbrd-icon-background-theme";return'<td class="widget-control-icon-wrapper '.concat(f,'" style="display:none; text-align:center; padding:0px;">\n                    <div class="').concat(n,'" id="').concat(t,'" data-name="').concat(i,'" style="display:none; padding:4px; font-size:').concat(u.getIconFontSizeBasedOnResolution(),';"\n                    data-tooltip="').concat(r,'"><\/div><\/td>')},t.getControlHeader=function(n,t,i){t.ControlHeader=BoldBIDashboardDesigner.bbdesignerstatic$('<div class="bbi-dbrd-control-header" data-widget-id="'.concat(n.controlId,'"><\/div>'));t.ControlContainer.find(".bbi-dbrd-control-container-wrapper").prepend(t.ControlHeader);i.model.IsEmbed&&i.isWidgetRequest(i.model.filterParameters)&&i.element.find(".bbi-dbrd-control-header").css("display","block");t.ControlHeader.append(BoldBIDashboardDesigner.bbdesignerstatic$(this.getHeaderTemplate(n,t,i)));t.ControlHeader.append(this.getControlHeaderIcons(n,t,i))},t.getControlHeaderIcons=function(t,i,r){var s='<div class="bbi-dbrd-controlIcon-container" id="'.concat(t.controlId,'_controlIcon_container" style="height:22px;"><\/div>'),h=[{"class":"bbi-dbrd-maxim-close e-dbrd-maximClose-toggle bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable",name:"maximize_close",id:t.controlId+"_maxCloseButton",tooltip:BoldBIDashboardDesigner.getLocale().maximize.close},{"class":"bbi-dbrd-control-menu-icon bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable",name:"menu",id:t.controlId,tooltip:BoldBIDashboardDesigner.getLocale().exportPanel.moreOptions},{name:"export","class":"bbi-dashboard-widget-menu bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable",id:t.controlId,tooltip:BoldBIDashboardDesigner.getLocale().banerPanel.exportTooltip},{"class":"bbi-dbrd-legend-icon bbi-dbrd-designer-icon bbi-dbrd-designer-hoverable",name:"legendIcon",id:t.controlId+"_legendIcon",tooltip:"Legend Dropdown Icon"},{"class":"bbi-remove-control-filter bbi-remove-control-filter-disable",name:"filter",id:t.controlId+"_clearFilter_icon",tooltip:BoldBIDashboardDesigner.getLocale().enableFilter.filterAction},{"class":"bbi-dbrd-maxim bbi-dbrd-maxim-toggle bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable",name:"maximize",id:t.controlId+"_maximize",tooltip:BoldBIDashboardDesigner.getLocale().maximize.maximize},{"class":"bbi-dbrd-refresh-icon bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable",name:"refresh_time",id:t.controlId+"_refreshTime",tooltip:"Refresh Timer"}],c={iconList:h,controlObj:i,headerProperties:t,showHeader:!1},u=this.getControlIconContainer(c,BoldBIDashboardDesigner.bbdesignerstatic$(s),r),l=u.find(".bbi-dbrd-control-menu-icon"),a=u.find(".bbi-remove-control-filter"),v=u.find(".bbi-dbrd-maxim"),y=u.find(".su-without-comment.su-icon"),p=u.find(".su-with-comment.su-icon"),w=u.find(".su-pin.su-icon"),b=u.find(".bbi-dbrd-legend-icon"),k=u.find(".bbi-dbrd-refresh-icon"),e,f,o;return b.css("display","none"),k.css("display","none"),f=i.getContainerSettings(),o=(r.model.mode===n.Designer.mode.view||r.model.mode===n.Designer.mode.designpreview)&&(f.EnableImageExport||f.EnablePdfExport||f.EnableExcelExport||f.EnableCsvExport),e=i.getContainerSettings().ShowMaximize,o&&this.applyIconVisibility(l,"block"),t.isFilterIconEnable&&this.applyIconVisibility(a,"block"),e&&r.model.mode!==n.Designer.mode.design&&this.applyIconVisibility(v,"block"),f.EnableComment&&(this.applyIconVisibility(y,"block"),this.applyIconVisibility(p,"block")),f.PinWidget&&this.applyIconVisibility(w,"block"),r.model.isPinWidget&&u.find(".bbi-dbrd-maxim").remove(),this.getRefreshTimeIndicator(t.controlId,u),u},t.applyIconVisibility=function(t,i){n.isNullOrUndefined(t)||t.css("display",i).parent().css("display",i)},t.getRefreshTimeIndicator=function(t,i){var r=n.buildTag("div.bbi-dbrd-refreshtime-notifier bbi-dashboarddesigner-display-none","",{},{id:t+"_refreshTime_notifier"});r.insertAfter(i.find(".bbi-dbrd-refresh-icon"))},t.getControlSubHeader=function(t){var i=t.getJson().ContainerSettings.SubTitle,u=n.DashboardUtil.encodeText(i),r,f;t.ControlSubHeader=n.buildTag("div.bbi-dbrd-control-sub-header","",{display:!n.isNullOrUndefined(i)&&i.trim().length>0?"block":"none"});r=n.buildTag("div.bbi-dbrd-control-sub-title bbi-dbrd-designer-hoverable","",{width:"calc(100% - 10px)"},{});f=n.buildTag("span.e-title-text",u,{"font-size":t.getFontSizeBasedOnResolution(),"font-weight":t.isVisualWidget?400:500},{"data-tooltip":u});r.append(f);t.ControlSubHeader.prepend(r);BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-header").after(t.ControlSubHeader)},t.getControlIconContainer=function(t,i,r){var f=t.iconList,e=t.controlObj,h=t.headerProperties,o=e.getJson(),s,u;if(o.ContainerSettings.EnableComment=e.ControlContainer.hasClass("e-image")||e.ControlContainer.hasClass("e-rte-item")?!1:o.ContainerSettings.EnableComment,r.model.mode===n.Designer.mode.view)try{r._trigger("beforeWidgetIconRendered",{iconsinformation:f,widgetInformation:e,isFilterWidget:!t.showHeader&&!n.isNullOrUndefined(h)&&h.isFilterIconEnable,enableComment:o.ContainerSettings.EnableComment,enablePinWidget:o.ContainerSettings.PinWidget,uniqueId:o.UniqueId,dashboardComment:r.modules.serialization.dashboardPropertyJson.EnableComments})}catch(c){console.error(c)}for(s="<table><tr>",u=0;u<f.length;u++)s+=this.getIconTemplate("bbi-dbrd-designer-hoverable e-icon-dbrd-theme ".concat(f[u].class),f[u].id,f[u].name,f[u].tooltip,e);return s+="<\/tr><\/table>",i.append(BoldBIDashboardDesigner.bbdesignerstatic$(s)),i},t.getControlDescriptionIcon=function(t){var i=n.buildTag("div .bbi-dbrd-control-description e-icon-dbrd-theme bbi-dbrd-designer-hoverable"),r=t.getJson().ContainerSettings.Description;return!n.isNullOrUndefined(r)&&r.length>0?(i.addClass("bbi-dbrd-control-align"),i.attr("data-tooltip",r),t.isVisualWidget||i.css("line-height","12px")):(i.css("display","none"),i.attr("data-tooltip","")),i.css("font-size",t.getIconFontSizeBasedOnResolution()),i},t.setIconContainerForCardControl=function(t,i){if(i.model.mode===n.Designer.mode.view){var r='<div class="bbi-dbrd-controlIcon-container e-dbrd-single-card-controlIcon" id="'.concat(t.Name,'_controlIcon_container" style="height:22px;"><\/div>'),u={iconList:[],controlObj:t,showHeader:!0},f=n.Dashboard.WidgetContainerHelper.getControlIconContainer(u,BoldBIDashboardDesigner.bbdesignerstatic$(r),i);t.ControlContainer.find(".bbi-dbrd-control-container-wrapper").append(f)}},t.iconContainerForNoHeader=function(n,t,i){var u='<div class="bbi-dbrd-control-header" style="position:absolute; right:0px; top:2px;" data-widget-id="'.concat(n.controlId,'"><\/div>'),f=this.getControlHeaderIcons(n,t,i),r;t.ContentContainer.prepend(BoldBIDashboardDesigner.bbdesignerstatic$(u).append(f));r=t.getControlContainerPaddingValue();t.ContentContainer.find(".bbi-dbrd-controlIcon-container").css({"padding-right":r+"px"})},t.updateWidgetNotConfiguredPanel=function(n){n.ContentContainer.closest(".bbi-dbrd-control-container").height()<57?(this.hideWidgetNotConfiguredIcon(n.ContentContainer),this.hideWidgetNotConfiguredContent(n.ContentContainer)):n.ContentContainer.closest(".bbi-dbrd-control-container").height()>=57&&n.ContentContainer.closest(".bbi-dbrd-control-container").height()<86?(this.showWidgetNotConfiguredIcon(n.ContentContainer),this.hideWidgetNotConfiguredContent(n.ContentContainer)):n.ContentContainer.closest(".bbi-dbrd-control-container").height()>=86&&(this.showWidgetNotConfiguredIcon(n.ContentContainer),this.showWidgetNotConfiguredContent(n.ContentContainer))},t.showWidgetNotConfiguredIcon=function(n){n.find(".bbi-widget-not-configured-icon").is(":visible")||setTimeout(function(){n.find(".bbi-widget-not-configured-icon").css("display","block")},0)},t.hideWidgetNotConfiguredIcon=function(n){n.find(".bbi-widget-not-configured-icon").is(":visible")&&setTimeout(function(){n.find(".bbi-widget-not-configured-icon").css("display","none")},0)},t.showWidgetNotConfiguredContent=function(n){n.find(".bbi-widget-not-configured-content").is(":visible")||setTimeout(function(){n.find(".bbi-widget-not-configured-content").css("display","block")},0)},t.hideWidgetNotConfiguredContent=function(n){n.find(".bbi-widget-not-configured-content").is(":visible")&&setTimeout(function(){n.find(".bbi-widget-not-configured-content").css("display","none")},0)},t.prototype.showLoadingIndicator=function(t){if(n.Dashboard.WidgetHelper.isDataWidget(t)){var i=t.ControlContainer||this.dashboardDesigner.designerPanel.selectedReportItems[0];i.find(".bbi-background-waiting-popup").show()}},t.prototype.hideLoadingIndicator=function(n){var t=n.ControlContainer||this.dashboardDesigner.designerPanel.selectedReportItems[0];t.find(".bbi-background-waiting-popup").hide()},t.hideWidgetContainerImage=function(n){n.find(".bbi-dbrd-isimage").hide()},t.hideWidgetContainer=function(n){n.ContentContainer.find(".bbi-dbrd-control").hide()},t.showWidgetContainerImage=function(n){this.hideNoDataDisplay(n);this.hideControlError(n);this.addWidgetNotConfiguredClass(n);this.hideControlContainer(n);n.ContentContainer.find(".bbi-dbrd-isimage").show()},t.showAlertMessageForData=function(t,i,r,u,f){var h=i.find(".bbi-dbrd-necessary-data-not-configured"),o=150;if(h.length===0){this.removeAlertMessageForData(i);var c=u?"table":"block",e=n.buildTag("div.bbi-dbrd-necessary-data-not-configured","",{display:c},{}),l=u?"bbi-dbrd-widget-not-configured-header-combine":"bbi-dbrd-widget-not-configured-header",s=n.buildTag("div."+l+" bbi-dbrd-designer-hoverable","",{},{"data-tooltip":t}),a=u?"bbi-information-icon-combine":"bbi-dbrd-necessary-data-not-configured-icon",v=n.isNullOrUndefined(f)?"inline-block":f.RowSpan>1&&f.ColumnSpan>1?"inline-block":"none",y=n.buildTag("div."+a+" bbi-dbrd-designer-hoverable","",{display:v},{"data-tooltip":t}),p=n.buildTag("div.bbi-dbrd-widget-not-necessary-data-configured-content",t,{display:i.height()<o||i.width()<o?"none":"block"},{});s.append(y,p);e.append(s);i.append(e);this.updateNoNecessaryDataContainerSize(i);this.updateZIndexInCW(i,e,r)}},t.updateZIndexInCW=function(t,i,r){if(!n.DashboardUtil.IsStringNullorWhiteSpace(r)&&t.find(".bbi-dbrd-isimage").length>0){var u=t.find(".bbi-dbrd-isimage")[0].style.zIndex;i.css("z-index",u)}},t.updateNoNecessaryDataContainerSize=function(t,i,r,u){var v=t.find(".bbi-dbrd-necessary-data-not-configured"),a,h;if(v.length>0){var c=190,l=32,y=i?".bbi-dbrd-widget-not-configured-header-combine":".bbi-dbrd-widget-not-configured-header",f=t.find(y),e=f.find(".bbi-dbrd-widget-not-necessary-data-configured-content"),o=f.find(".bbi-information-icon-combine"),s="";!n.isNullOrUndefined(o)&&o.length>0&&(a=n.isNullOrUndefined(u)?"inline-block":u.RowSpan>1&&u.ColumnSpan>1?"inline-block":"none",o.css({display:a}));t.height()<c||t.width()<c?(e.css({display:"none"}),s="none"):(t.find(".bbi-dbrd-isimage").show(),e.css({display:"block"}),s="block");h=t.height()<190||t.width()<190?t.height()-l:t.height()-(l+e.height());i||setTimeout(function(){f.find(".bbi-dbrd-necessary-data-not-configured-icon.bbi-dbrd-designer-hoverable").css({"margin-top":h/2});n.isNullOrUndefined(r)||r.updateSizeOfWidgetNotConfigured(t,h/2,s)},0)}},t.removeAlertMessageForData=function(n){n.find(".bbi-dbrd-necessary-data-not-configured").remove()},t.hideControlContainer=function(n){n.ContentContainer.find(".bbi-dbrd-control").hasClass("e-customwidgetitem")||n.ContentContainer.find(".bbi-dbrd-control").hasClass("e-datebucket-control")||n.ContentContainer.find(".bbi-dbrd-control").hide()},t.showControlContainer=function(n){n.ContentContainer.find(".bbi-dbrd-control").show()},t.hideControlError=function(n){n.ContentContainer.find(".bbi-dbrd-control-error").remove();n.ContentContainer.css("display","block")},t.hideNoDataDisplay=function(n){t.toggleNoDataDisplay(n,!1)},t.showNoDataDisplay=function(n){t.toggleNoDataDisplay(n,!0)},t.toggleNoDataDisplay=function(n,t){n.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").css("display",t?"block":"none").addClass("e-container-dbrd-theme")},t.onWidgetMouseOver=function(i){if(BoldBIDashboardDesigner.bbdesignerstatic$(i.currentTarget).parents().hasClass("bbi-container-widget"))BoldBIDashboardDesigner.bbdesignerstatic$(i.currentTarget).find(".bbi-dbrd-controlIcon-container").addClass("bbi-show-icon");else if(BoldBIDashboardDesigner.bbdesignerstatic$(i.currentTarget).hasClass("bbi-container-widget"))BoldBIDashboardDesigner.bbdesignerstatic$(i.currentTarget).find(".bbi-dbrd-controlIcon-container").first().addClass("bbi-show-icon");else{BoldBIDashboardDesigner.bbdesignerstatic$(i.currentTarget).find(".bbi-dbrd-controlIcon-container").addClass("bbi-show-icon-normal-widget");var r=n.Dashboard.WidgetHelper.getWidgetInstance(BoldBIDashboardDesigner.bbdesignerstatic$(i.currentTarget));t.controlTitleResponsiveness(r,!0)}},t.onWidgetMouseLeave=function(i){BoldBIDashboardDesigner.bbdesignerstatic$(i.currentTarget).find(".bbi-dbrd-controlIcon-container").removeClass("bbi-show-icon");var r=n.Dashboard.WidgetHelper.getWidgetInstance(BoldBIDashboardDesigner.bbdesignerstatic$(i.currentTarget));t.controlTitleResponsiveness(r,!1)},t.onRefreshIconMouseLeave=function(n){BoldBIDashboardDesigner.bbdesignerstatic$(n.currentTarget).parent().find(".bbi-dbrd-refreshtime-notifier").addClass("bbi-dashboarddesigner-display-none")},t.controlTitleResponsiveness=function(t,i){var l=t.designerInstance.modules.aiWidgetHelper.getChildWidget(t),c;if(n.isNullOrUndefined(l)){var h=t.getJson(),r=BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-header"),f=t.ControlContainer.find(".bbi-dbrd-control-title-wrapper"),u=f.find(".bbi-dbrd-control-title");u.children().css({"text-overflow":"ellipsis"});var a=h.ContainerSettings.WidgetTitleFontInfo.AutoFontSize?h.ContainerSettings.WidgetTitleFontInfo.FontSize:22,o=t.designerInstance.measureText(u.text(),f.width(),{size:a,fontStyle:"Normal",fontFamily:"Roboto"}),s=t.ControlContainer.find(".bbi-dbrd-controlIcon-container").outerWidth(!0),e=f.find(".bbi-dbrd-control-description").is(":visible")?f.find(".bbi-dbrd-control-description").outerWidth(!0):0;h.ContainerSettings.TextAlignment===TextAlignment.Left?i?(u.css({width:o.width+e>=r.width()?r.width()-(s+e)>=u.width()?u.width():r.width()-(s+e):"auto"}),f.css({width:o.width+e+s>=r.width()?r.width()-s:r.width()})):i||(u.css({width:o.width>=r.width()?r.width()-e:"auto"}),f.css({width:o.width+e>r.width()?r.width():"calc(100%)"})):h.ContainerSettings.TextAlignment===TextAlignment.Center?i?u.css({width:o.width+e>f.width()-s*2?"calc(100% - "+(s*2+e)+"px)":"auto"}):i||u.css({width:o.width>f.width()?"calc(100%)":"auto"}):h.ContainerSettings.TextAlignment===TextAlignment.Right&&(i&&(t.Type==="NumberCard"||t.Type.toLowerCase()==="kpicard")?t.ControlContainer.find(".bbi-dbrd-controlIcon-container").css({right:"auto",left:"0px"}):i||u.css({width:o.width>f.width()?"calc(100%)":"auto"}));c=n.DashboardDesignerUtility.ContainerPropertyItem.prototype.getContainerTitleAlignmentValue(TextAlignment[t.getContainerSettings().TextAlignment]);u.css({"justify-content":c})}},t.onCombineWidgetClick=function(n){var t=BoldBIDashboardDesigner.bbdesignerstatic$(n.target).closest(".bbi-dbrditem");t.hasClass("bbi-selected-item")||BoldBIDashboardDesigner.bbdesignerstatic$(n.target).hasClass("bbi-dbrd-designer-hoverable")||(t.hasClass("bbi-combine-item")?t.find(".bbi-combine-selected").removeClass("bbi-combine-selected bbi-widget-selected"):t.find(".bbi-dbrd-controlIcon-container").hasClass("bbi-combine-selected")?t.parent().find(".bbi-combine-item .bbi-combine-selected").removeClass("bbi-combine-selected bbi-widget-selected"):(t.parent().find(".bbi-combine-item .bbi-combine-selected").removeClass("bbi-combine-selected bbi-widget-selected"),t.find(".bbi-dbrd-controlIcon-container").addClass("bbi-combine-selected"),t.find(".bbi-dbrd-control-header").addClass("bbi-combine-selected"),t.parent().find(".bbi-combine-item .bbi-dbrd-controlIcon-container:first").addClass("bbi-combine-selected bbi-widget-selected")))},t.disableHeader=function(t,i){var r={controlTitle:t.getContainerSettings().Title,controlId:t.ControlContainer.attr("data-name"),isMaximizeEnable:!1,isFilterIconEnable:t.getJson().FilterSettings.ActAsMasterWidget};n.isNullOrUndefined(t.ControlHeader)||(t.ControlHeader[0].innerHTML="");n.isNullOrUndefined(t.ControlSubHeader)||(t.ControlSubHeader[0].innerHTML="");t.ControlContainer.find(".bbi-dbrd-control-header").remove();t.ControlContainer.find(".bbi-dbrd-control-sub-header").remove();this.iconContainerForNoHeader(r,t,i);t.ContentContainer.css({height:"100%"})},t.updateDataNotConfiguredMsg=function(t,i){if(i.length>0){var r=n.DashboardUtil.encodeText(i),u=t.NoDataDispalyContainer.find(".e-nodata");u.html(r)}},t.updateNoDataIcon=function(t,i){var r=t.NoDataDispalyContainer.find(".bbi-widget-info-icon");i?r.remove():r.length===0&&(r=n.buildTag("div.bbi-widget-info-icon","",{display:"inline-block"},{}),r.insertBefore(t.NoDataDispalyContainer.find(".e-nodata")))},t.updateNoDataDefaultImg=function(t,i){if(i){var u=t.getWidgetImage(),r=n.buildTag("div.bbi-dbrd-nodataimage","",{disply:"block",height:"100%",width:"100%"},{});r.append(u);t.NoDataDispalyContainer.prepend(r)}else t.NoDataDispalyContainer.find(".bbi-dbrd-nodataimage").remove()},t.updateNoDataFontColor=function(n,t){var i=n.NoDataDispalyContainer.find(".e-nodata");i.css("color",t)},t.updateNoDataImageOpacity=function(n,t){var i=n.NoDataDispalyContainer.find(".bbi-dbrd-nodataimage");i.css("opacity",t)},t}();t.WidgetContainerHelper=i})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={})),function(n){var t;(function(n){var t=function(){function n(){this.events=[]}return n.prototype.addListener=function(n,t){var i=this.find(n,t);i===-1?this.events.push({module:n,eventType:t}):this.events[i]={module:n,eventType:t}},n.prototype.removeListener=function(n,t){var i=this.find(n,t);i!==-1&&this.events.splice(i,1)},n.prototype.clear=function(){this.events=[]},n.prototype.isEventListenerConfigured=function(n,t){return this.find(n,t)!==-1},n.prototype.find=function(n,t){for(var r,i=0;i<this.events.length;i++)if(r=this.events[i],r.module===n&&r.eventType===t)return i;return-1},n}(),i,r;n.DesignerEventHelper=t,function(n){n[n.designPanel=0]="designPanel";n[n.propertyPanel=1]="propertyPanel";n[n.designer=2]="designer"}(i=n.Module||(n.Module={})),function(n){n[n.mouseDown=0]="mouseDown";n[n.mouseUp=1]="mouseUp";n[n.mouseClick=2]="mouseClick";n[n.mouseDbClick=3]="mouseDbClick"}(r=n.EventType||(n.EventType={}))})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={}));InternalFilterOverview=function(){function n(n,t,i){this.filterList=[];this.locale=null;this.bannerPanel=n;this.dashboardDesigner=t;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=t.getLocalizationContent();this.designerId=t.designerPanel.designId;this.filterConfiguration=this.dashboardDesigner.modules.masterSlaveFilter;this.targetEvent=i}return n.prototype.renderFilterOverviewPanel=function(){var n,t,i;this.bannerPanel.closest(".bbi-dashboarddesigner-designPanel").find(".bbi-dbrd-filterListMenuPopUp").length===0?(n=this.bbdesigner$(this.targetEvent.target),this.dashboardDesigner.triggerViewerEvent(ViewerEvent.actionBegin,ViewerEventType.filterOverViewOpen,n,this.filterList),t=0,i=0,this.dashboardDesigner.isMobileLayout()||(t=n.closest(".bbi-dbrd-filterListMenu").offset().left-180-this.dashboardDesigner.element.offset().left,i=this.bannerPanel.offset().top+this.bannerPanel.height()-this.dashboardDesigner.element.offset().top),this.filterOverviewPanel=BoldBIDashboard.buildTag(this.dashboardDesigner.isDarkTypeTheme()?"div.bbi-dbrd-filterListMenuPopUp bbi-dbrd-theme-dark":"div.bbi-dbrd-filterListMenuPopUp","",{top:i,left:t,background:this.dashboardDesigner.modules.themeHelper.getFilterOverviewBackground()},{}),this.bannerPanel.after(this.filterOverviewPanel),this.createTitlePanel(),this.createSavePanel(),this.createFilterListPanel(),this.createViewFilterPanel(),this.filterOverviewPanel.append(this.titlePanel,this.savePanel,this.filterListPanel,this.viewSavedFilterPanel),this.enableOrDisableIcon(),this.filterOverviewPanel.find("#"+this.designerId+"filterList").BoldBIDashboardScroller({width:"100%",scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,autoHide:!0,enableTouchScroll:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize}),this.filterList.length===this.filterList.filter(function(n){return n.IsPoPWidget===!0}).length&&this.titlePanel.find(".bbi-dbrd-clearAllFilters").attr("disabled","disabled"),this.updateScrollBar(),this.wiredEvents(),this.dashboardDesigner.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.filterOverViewOpen,n,this.filterList)):(this.filterOverviewPanel=this.bannerPanel.closest(".bbi-dashboarddesigner-designPanel").find(".bbi-dbrd-filterListMenuPopUp").bind(this.targetEvent),this.destroy())},n.prototype.filterOverviewUpdated=function(n,t){var i=this.bannerPanel.closest(".bbi-dashboarddesigner-designPanel").find(".bbi-dbrd-filterListMenuPopUp");if(!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0){this.dashboardDesigner.model.filterOverviewSettings.viewName=n;this.dashboardDesigner.model.filterOverviewSettings.viewId=t;var r=i.find(".bbi-dbrd-save-filterData"),u=i.find(".bbi-dbrd-saveAs-filterData"),f=i.find(".bbi-dbrd-filter-nameList");BoldBIDashboard.isNullOrUndefined(n)||this.dashboardDesigner.designerPanel.isMobileView||(f.html(n),f.attr("data-tooltip",n),this.bannerPanel.find(".bbi-dynamic-title-display").html(n),this.bannerPanel.find(".bbi-dbrd-filterListMenu").attr("data-tooltip",n),this.dashboardDesigner.filterOverviewObj.enableSaveIcon=!1,this.dashboardDesigner.filterOverviewObj.enableSaveAsIcon=!0,this.dashboardDesigner.filterOverviewObj.isModified=!1,this.dashboardDesigner.model.filterOverviewSettings.showSaveIcon&&this.dashboardDesigner.model.filterOverviewSettings.showSaveAsIcon?(r.removeClass("bbi-dbrd-filterOverview-enableSave").addClass("bbi-dbrd-filterOverview-disableSave"),u.removeClass("bbi-dbrd-filterOverview-disableSaveAs").addClass("bbi-dbrd-filterOverview-enableSaveAs")):this.dashboardDesigner.model.filterOverviewSettings.showSaveIcon?r.removeClass("bbi-dbrd-filterOverview-enableSave").addClass("bbi-dbrd-filterOverview-disableSave"):u.removeClass("bbi-dbrd-filterOverview-disableSaveAs").addClass("bbi-dbrd-filterOverview-enableSaveAs"),this.dashboardDesigner.model.filterOverviewSettings.showViewSavedFilterIcon&&i.find(".bbi-dbrd-view-saved").css({display:"block"}))}},n.prototype.createTitlePanel=function(){var t=BoldBIDashboard.buildTag("div.bbi-dbrd-titlediv","",{},{}),e=BoldBIDashboard.buildTag("div.bbi-dbrd-titletext e-dbrd-filter-title",this.locale.filterOverviewPopup.appliedFilters,{},{}),i,r,f;t.append(e);var o=BoldBIDashboard.buildTag("div.e-banner-verticalsplitline","",{},{}),n=BoldBIDashboard.buildTag("div.bbi-dbrd-cleardiv bbi-dbrd-cleardiv-borderstyle","",{},{}),u=BoldBIDashboard.buildTag("div.bbi-dbrd-clearAllFilters",this.locale.filterOverviewPopup.clearAll,{},{});this.dashboardDesigner.isMobileLayout()&&(n.append(o),n.removeClass("bbi-dbrd-cleardiv-borderstyle"),u.addClass("bbi-dbrd-clearAllFilters-mobilview"));n.append(u);this.titlePanel=BoldBIDashboard.buildTag("div.bbi-dbrd-title","",{},{});i=BoldBIDashboard.buildTag("div.bbi-dbrd-overview-back","",{},{});this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view?(r=BoldBIDashboard.buildTag("div.bbi-dbrd-switchview .bbi-dbrd-originalview-borderstyle","",{},{}),f=BoldBIDashboard.buildTag("div.e-dbrd-switch-original-view",this.locale.filterOverviewPopup.switchToOriginalViewContent,{"text-transform":"uppercase"},{}),r.append(f),this.titlePanel.append(i,t,n,r)):this.titlePanel.append(i,t,n)},n.prototype.createSavePanel=function(){var n=BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.filterOverviewSettings.viewName)?this.locale.filterOverviewPopup.unsavedView:this.dashboardDesigner.model.filterOverviewSettings.viewName,r=BoldBIDashboard.buildTag("div.bbi-dbrd-filter-nameList bbi-dbrd-designer-hoverable",n,{"white-space":"nowrap"},{"data-tooltip":n}),t,i;this.dashboardDesigner.model.filterOverviewSettings.showSaveAsIcon&&(t=BoldBIDashboard.buildTag("div.bbi-dbrd-saveAs-filterData bbi-dbrd-designer-hoverable","",{},{"data-tooltip":this.locale.filterOverviewPopup.saveAsFilterTooltip}));this.dashboardDesigner.model.filterOverviewSettings.showSaveIcon&&(i=BoldBIDashboard.buildTag("div.bbi-dbrd-save-filterData bbi-dbrd-designer-hoverable","",{},{"data-tooltip":this.locale.filterOverviewPopup.saveFilterTooltip}));BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.filterOverviewSettings.viewName)||(this.dashboardDesigner.filterOverviewObj.enableSaveIcon=this.dashboardDesigner.filterOverviewObj.isModified,this.dashboardDesigner.filterOverviewObj.enableSaveAsIcon=!0);(this.dashboardDesigner.model.filterOverviewSettings.showSaveAsIcon||this.dashboardDesigner.model.filterOverviewSettings.showSaveIcon)&&(this.savePanel=BoldBIDashboard.buildTag("div.bbi-dbrd-saveviewed-filters","",{},{}),this.savePanel.append(r,t,i))},n.prototype.RemoveUnwantedFiltersList=function(){var t=this.dashboardDesigner.modules.masterSlaveFilter.filterObject.filterConfigurationModel.MastersCollection,n=[];this.filterList.length>0&&!BoldBIDashboard.isNullOrUndefined(t)&&(n=this.filterList.filter(function(n){if(n.ReportName){var i=t.filter(function(t){return t.MasterInfo.Name===n.ReportName});if(i.length>0)return i.some(function(t){return t.ProfileManager.some(function(t){return t.ProfileInfo.FilterCondition.some(function(t){var i;return((i=t.TargetColumn)===null||i===void 0?void 0:i.ID)===n.FieldId})})})}return!1}),this.filterList=n.length>0?n:this.filterList)},n.prototype.createFilterListPanel=function(){var y,n,g,nt,w,ut,ft,l,h,c,f,a,r,s,v,t;this.filterList=this.filterConfiguration.getAllWidgetSelectedValues();this.filterListPanel=BoldBIDashboard.buildTag("div.bbi-dbrd-filterList bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{},{id:this.designerId+"filterList"});y=BoldBIDashboard.buildTag("div.bbi-dbrd-filter-lists","",{},{});this.filterListPanel.append(y);this.filterCollection=BoldBIDashboard.buildTag("div.e-dbrd-filterListscollection","",{},{});y.append(this.filterCollection);var e=null,i=null,p,o="",k="",d="";for(this.RemoveUnwantedFiltersList(),n=0;n<this.filterList.length;n++)if(!this.filterList[n].IsParameterField){if(this.filterCollection.find("#"+this.filterList[n].ReportName+"_control_id").length===0&&(e=BoldBIDashboard.buildTag("div.e-brd-clearfilter-wrapper","",{},{id:this.filterList[n].ReportName+"_control_id"}),this.filterCollection.append(e),g=BoldBIDashboard.buildTag("div.bbi-dbrd-style-two","",{},{}),e.after(g)),i=BoldBIDashboard.buildTag("div.bbi-dbrd-clearfilterclosetext","",{},{}),d!==this.filterList[n].ReportName){var et=this.filterList[n].IsPoPWidget?".bbi-dbrd-filter-overview-reset bbi-dbrd-designer-hoverable bbi-dbrd-icon-background-theme":".bbi-dbrd-clearfilters bbi-dbrd-designer-hoverable e-dbrd-icon-effect",ot=this.filterList[n].IsPoPWidget?this.locale.exportPanel.reset:this.locale.filterOverviewPopup.clearTooltip,st=BoldBIDashboard.buildTag("span"+et,"",{},{id:this.filterList[n].ReportName+"clearId","data-tooltip":ot,"data-name":this.filterList[n].ReportName});p=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Exclude);nt=!BoldBIDashboard.isNullOrUndefined(this.filterList[n].InitialDateFilter.DateFilterList)&&this.filterList[n].InitialDateFilter.DateFilterList.length>0;w=this.filterList[n].InitialDimensionFilter.DimesnionFilterCondition;nt&&this.filterList[n].InitialDateFilter.DateFilterCondition===p?o=this.filterList[n].InitialDateFilter.DateFilterCondition:w===p&&(o=w);var ht=this.dashboardDesigner.modules.masterSlaveFilter,ct=ht.GetWidgetElementByReportName(this.filterList[n].ReportName),tt=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(ct),it=tt.getJson().ContainerSettings.Title,rt=BoldBIDashboard.isNullOrUndefined(it)?this.filterList[n].ReportName:it,b=o!==""?rt+"("+o+")":rt,lt=RegExp("{{:(.*?)}}","g");k=tt.Type;lt.test(b)&&(ut=this.dashboardDesigner.element.find("#"+this.designerId+"_"+this.filterList[n].ReportName).find(".bbi-dbrd-control-title"),b=this.bbdesigner$(ut).clone().children(".bbi-dbrd-label-parameter-text").remove().end().text());ft=BoldBIDashboard.buildTag("div.bbi-brd-overview-widget-title",BoldBIDashboard.DashboardUtil.encodeText(b),{},{});i.append(st,ft)}if(d=this.filterList[n].ReportName,!BoldBIDashboard.isNullOrUndefined(this.filterList[n].InitialDateFilter.DisplayDateFilterList)&&this.filterList[n].InitialDateFilter.DisplayDateFilterList.length>0){var u=void 0,r=BoldBIDashboard.isNullOrUndefined(this.filterList[n].ColumnName)||this.filterList[n].ColumnName===""?this.dashboardDesigner.modules.util.getColumnNameByUniqueColumnName(this.filterList[n].ReportName,this.filterList[n].UniqueColumnName):this.filterList[n].ColumnName,s=BoldBIDashboard.buildTag("div.bbi-dbrd-lists",r,{},{});if(i.append(s),this.filterList[n].IsRange)h=this.filterList[n].InitialDateFilter.DisplayDateFilterList[0],c=this.filterList[n].InitialDateFilter.DisplayDateFilterList[1],u=h+" "+this.locale.banerPanel.dateSplit+" "+c,t=BoldBIDashboard.buildTag("div.bbi-dbrd-list",u,{},{}),i.append(t);else for(l=0;l<this.filterList[n].InitialDateFilter.DisplayDateFilterList.length;l++)u=this.filterList[n].InitialDateFilter.DisplayDateFilterList[l],t=BoldBIDashboard.buildTag("div.bbi-dbrd-list",u,{},{}),i.append(t)}if(this.filterList[n].IsPoPWidget&&!BoldBIDashboard.isNullOrUndefined(this.filterList[n].PoPFilter)){var u=void 0,r=BoldBIDashboard.isNullOrUndefined(this.filterList[n].ColumnName)||this.filterList[n].ColumnName===""?this.dashboardDesigner.modules.util.getColumnNameByUniqueColumnName(this.filterList[n].ReportName,this.filterList[n].UniqueColumnName):this.filterList[n].ColumnName,s=BoldBIDashboard.buildTag("div.bbi-dbrd-lists",r,{},{});i.append(s);h=this.filterList[n].PoPFilter.PrimaryCustomRange.StartRange+" - "+this.filterList[n].PoPFilter.PrimaryCustomRange.EndRange;c=this.filterList[n].PoPFilter.SecondaryCustomRange[0].StartRange+" - "+this.filterList[n].PoPFilter.SecondaryCustomRange[0].EndRange;u=h+" Vs "+c;t=BoldBIDashboard.buildTag("div.bbi-dbrd-list",u,{},{});i.append(t)}if(!BoldBIDashboard.isNullOrUndefined(this.filterList[n].InitialMeasureFilter.Values)&&this.filterList[n].InitialMeasureFilter.Values.length>0){if(f=this.filterList[n].InitialMeasureFilter.Values[0],this.filterList[n].IsRange)f=f+" - "+this.filterList[n].InitialMeasureFilter.Values[1];else if(this.filterList[n].InitialMeasureFilter.Values.length>1)for(a=0;a<this.filterList[n].InitialMeasureFilter.Values.length;a++)t=BoldBIDashboard.buildTag("div.bbi-dbrd-list",this.filterList[n].InitialMeasureFilter.Values[a],{},{}),i.append(t);else f=f;(this.filterList[n].IsRange||this.filterList[n].InitialMeasureFilter.Values.length===1)&&(t=BoldBIDashboard.buildTag("div.bbi-dbrd-list",f,{},{}),i.append(t))}if(!BoldBIDashboard.isNullOrUndefined(this.filterList[n].InitialDimensionFilter.Text)&&this.filterList[n].InitialDimensionFilter.Text.length>0)if(r=BoldBIDashboard.isNullOrUndefined(this.filterList[n].ColumnName)||this.filterList[n].ColumnName===""?this.dashboardDesigner.modules.util.getColumnNameByUniqueColumnName(this.filterList[n].ReportName,this.filterList[n].UniqueColumnName):this.filterList[n].ColumnName,r=k.toLowerCase()===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ControlType,ControlType.TextFilter).toLowerCase()?r+" - OR":r,s=BoldBIDashboard.buildTag("div.bbi-dbrd-lists",r,{},{}),i.append(s),this.filterList[n].IsMultiSelection)for(v=0;v<this.filterList[n].InitialDimensionFilter.Text.length;v++)t=BoldBIDashboard.buildTag("div.bbi-dbrd-list",this.filterList[n].InitialDimensionFilter.Text[v],{},{}),i.append(t);else t=BoldBIDashboard.buildTag("div.bbi-dbrd-list",this.filterList[n].InitialDimensionFilter.Text,{},{}),i.append(t);e.append(i)}},n.prototype.updateScrollBar=function(){var n=220,t;this.filterCollection.height()<220&&(n=this.filterCollection.height());this.dashboardDesigner.isMobileLayout()&&(n="100%");t=this.filterOverviewPanel.find("#"+this.designerId+"filterList").data("BoldBIDashboardScroller");BoldBIDashboard.isNullOrUndefined(t)||t.setModel({height:n})},n.prototype.createViewFilterPanel=function(){if(this.dashboardDesigner.model.filterOverviewSettings.showViewSavedFilterIcon){var n=BoldBIDashboard.buildTag("div.bbi-dbrd-icon-views","",{},{}),t=BoldBIDashboard.buildTag("div.bbi-dbrd-viewtext",this.locale.filterOverviewPopup.viewSavedFilters,{},{});this.viewSavedFilterPanel=BoldBIDashboard.buildTag("div.bbi-dbrd-view-saved","",{},{});this.viewSavedFilterPanel.append(n,t)}},n.prototype.enableOrDisableIcon=function(){if(this.dashboardDesigner.model.filterOverviewSettings.showSaveAsIcon||this.dashboardDesigner.model.filterOverviewSettings.showSaveIcon){var n=this.filterOverviewPanel.find(".bbi-dbrd-save-filterData"),t=this.filterOverviewPanel.find(".bbi-dbrd-saveAs-filterData");this.enbaleDisableIconMultitab();n=this.dashboardDesigner.filterOverviewObj.enableSaveIcon?n.removeClass("bbi-dbrd-filterOverview-disableSave").addClass("bbi-dbrd-filterOverview-enableSave"):n.removeClass("bbi-dbrd-filterOverview-enableSave").addClass("bbi-dbrd-filterOverview-disableSave");t=this.dashboardDesigner.filterOverviewObj.enableSaveAsIcon?t.removeClass("bbi-dbrd-filterOverview-disableSaveAs").addClass("bbi-dbrd-filterOverview-enableSaveAs"):t.removeClass("bbi-dbrd-filterOverview-enableSaveAs").addClass("bbi-dbrd-filterOverview-disableSaveAs")}},n.prototype.enbaleDisableIconMultitab=function(){BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.filterOverviewSettings.viewName&&!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.dashboardSettings)&&!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.dashboardSettings.isMultiTab)&&this.dashboardDesigner.model.dashboardSettings.isMultiTab)&&(this.dashboardDesigner.filterOverviewObj.enableSaveIcon=!0,this.dashboardDesigner.filterOverviewObj.enableSaveAsIcon=!1)},n.prototype.wiredEvents=function(){this.filterOverviewPanel.on(BoldBIDashboard.DashboardUtil.MouseEvent.mouseDown,".e-dbrd-switch-original-view",this.bbdesigner$.proxy(this.switchToOriginalView,this));this.filterOverviewPanel.on(BoldBIDashboard.DashboardUtil.MouseEvent.mouseDown,".bbi-dbrd-cleardiv",this.bbdesigner$.proxy(this.clearAllFilters,this));this.filterOverviewPanel.on(BoldBIDashboard.DashboardUtil.MouseEvent.mouseDown,".bbi-dbrd-clearfilters, .bbi-dbrd-filter-overview-reset",this.bbdesigner$.proxy(this.clearFilter,this));this.filterOverviewPanel.on(BoldBIDashboard.DashboardUtil.MouseEvent.mouseDown,".bbi-dbrd-saveAs-filterData, .bbi-dbrd-save-filterData, .bbi-dbrd-view-saved",this.bbdesigner$.proxy(this.triggerFilterOverviewEvent,this));this.filterOverviewPanel.on(BoldBIDashboard.DashboardUtil.MouseEvent.mouseDown,".bbi-dbrd-overview-back",this.bbdesigner$.proxy(this.destroyMobileView,this))},n.prototype.unwiredEvents=function(){this.filterOverviewPanel.off(BoldBIDashboard.DashboardUtil.MouseEvent.mouseDown,".e-dbrd-switch-original-view",this.bbdesigner$.proxy(this.switchToOriginalView,this));this.filterOverviewPanel.off(BoldBIDashboard.DashboardUtil.MouseEvent.mouseDown,".bbi-dbrd-cleardiv",this.bbdesigner$.proxy(this.clearAllFilters,this));this.filterOverviewPanel.off(BoldBIDashboard.DashboardUtil.MouseEvent.mouseDown,".bbi-dbrd-clearfilters, .bbi-dbrd-filter-overview-reset",this.bbdesigner$.proxy(this.clearFilter,this));this.filterOverviewPanel.off(BoldBIDashboard.DashboardUtil.MouseEvent.mouseDown,".bbi-dbrd-saveAs-filterData, .bbi-dbrd-save-filterData, .bbi-dbrd-view-saved",this.bbdesigner$.proxy(this.triggerFilterOverviewEvent,this));this.filterOverviewPanel.off(BoldBIDashboard.DashboardUtil.MouseEvent.mouseDown,".bbi-dbrd-overview-back",this.bbdesigner$.proxy(this.destroyMobileView,this))},n.prototype.switchToOriginalView=function(){this.dashboardDesigner.switchToOriginalView();this.dashboardDesigner.designerPanel.banner.showViewFilterChangeIndicator();this.destroyMobileView()},n.prototype.clearAllFilters=function(n){this.titlePanel.find(".bbi-dbrd-clearAllFilters").attr("disabled")!=="disabled"&&(this.dashboardDesigner.triggerViewerEvent(ViewerEvent.actionBegin,ViewerEventType.clearAllFilter,undefined,n),this.dashboardDesigner.clearAllFilters(),this.filterOverviewPanel.remove())},n.prototype.clearFilter=function(n){var t;this.dashboardDesigner.triggerViewerEvent(ViewerEvent.actionBegin,ViewerEventType.clearFilter,undefined,n);var i=this.bbdesigner$(n.target),r=this.filterConfiguration.GetWidgetElementByReportName(i.attr("data-name")),u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(r);u.clearFilter(!1);t=this.filterOverviewPanel.find("#"+i.attr("data-name")+"_control_id");t.next().hasClass("bbi-dbrd-style-two")&&t.next().remove();t.remove();this.dashboardDesigner.filterOverviewObj.enableSaveIcon=!0;this.enableOrDisableIcon();this.filterOverviewPanel.find(".bbi-dbrd-clearfilterclosetext").length===0&&this.filterOverviewPanel.remove();this.dashboardDesigner.hideTooltip(n);this.updateScrollBar();this.dashboardDesigner.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.clearFilter,undefined,n)},n.prototype.triggerFilterOverviewEvent=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)&&(n.type==="touchstart"&&this.dashboardDesigner.isMobileLayout()||n.type==="mousedown"&&!this.dashboardDesigner.isMobileLayout())){var i=this.dashboardDesigner.getCurrentFilters(),t=this.bbdesigner$(n.target);t.hasClass("bbi-dbrd-save-filterData")&&this.dashboardDesigner.filterOverviewObj.enableSaveIcon&&this.dashboardDesigner._trigger("_onSaveFilter",{data:i,viewName:this.dashboardDesigner.model.filterOverviewSettings.viewName,viewId:this.dashboardDesigner.model.filterOverviewSettings.viewId,model:this.dashboardDesigner.model});t.hasClass("bbi-dbrd-saveAs-filterData")&&this.dashboardDesigner.filterOverviewObj.enableSaveAsIcon&&this.dashboardDesigner._trigger("_onSaveAsFilter",{data:i,viewName:this.dashboardDesigner.model.filterOverviewSettings.viewName,viewId:this.dashboardDesigner.model.filterOverviewSettings.viewId,model:this.dashboardDesigner.model});(t.hasClass("bbi-dbrd-icon-views")||t.hasClass("bbi-dbrd-viewtext"))&&this.dashboardDesigner._trigger("_onViewSavedFilters",{model:this.dashboardDesigner.model})}},n.prototype.destroy=function(){this.unwiredEvents();this.bannerPanel.closest(".bbi-dashboarddesigner-designPanel").find(".bbi-dbrd-filterListMenuPopUp").length>0&&(this.dashboardDesigner.triggerViewerEvent(ViewerEvent.actionBegin,ViewerEventType.filterOverViewClose,event.currentTarget,this.filterList),this.bannerPanel.closest(".bbi-dashboarddesigner-designPanel").find(".bbi-dbrd-filterListMenuPopUp").remove(),this.dashboardDesigner.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.filterOverViewClose,event.currentTarget,this.filterList))},n.prototype.destroyMobileView=function(){var n=this;this.dashboardDesigner.triggerViewerEvent(ViewerEvent.actionBegin,ViewerEventType.filterOverViewClose,event.currentTarget,this.filterList);setTimeout(function(){n.unwiredEvents();n.bannerPanel.closest(".bbi-dashboarddesigner-designPanel").find(".bbi-dbrd-filterListMenuPopUp").length>0&&n.bannerPanel.closest(".bbi-dashboarddesigner-designPanel").find(".bbi-dbrd-filterListMenuPopUp").remove()},100);this.dashboardDesigner.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.filterOverViewClose,event.currentTarget,this.filterList)},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.FilterOverview",InternalFilterOverview,window);InternalExport=function(){function n(n){this.designer=null;this.id=null;this.isMobileView=!1;this.currentContainer=null;this.locale=null;this.exportPopupNotification=null;this.paramRegex=/@{{:(.*?)}}/;this.currentPageExportCheckbox=!0;this.isGridSeriesWidgetPDFExport=!1;this.containerSettings=null;this.exportDictionary={};this.defaultPageSizeIndex=0;this.designer=n;this.bbdesigner$=this.designer.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.designer._id+"_exportPanel";this.designPanel=this.designer.designerPanel;this.widgetHelper=this.designer.modules.widgetHelper;this.showAppliedFilters=!1}return n.prototype.renderExportDialog=function(n){if(BoldBIDashboard.isNullOrUndefined(this.exportingContainer)){this.exportingContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-export-dialog-container","",{},{id:this.id+"_export_dialog"});var i=BoldBIDashboard.buildTag("div.bbi-dbrd-viewer-export-dialog","",{},{id:this.id+"_export_container"}),f=this.getFileNameWrapper(),t=null;switch(n){case"image":t=this.getImageExportDiv();break;case"pdf":t=this.getPDFExportDiv();break;case"excel":t=this.getExcelExportDiv();break;case"csv":i.css("height","175px")}i.append(f,t);this.exportingContainer.append(i);this.renderElements(n);this.dialogObj=this.exportingContainer.BoldBIDashboardDialog({title:this.getTitle(n),width:490,height:"auto",minWidth:440,minHeight:n==="csv"?100:320,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,enableAnimation:!1,containment:"#"+this.designer._id,target:"#"+this.designer._id,showRoundedCorner:!0,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner bbi-desktop-export",close:this.bbdesigner$.proxy(this.dialogClose,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText}).data("BoldBIDashboardDialog");this.footerTag=this.designer.element.find("#"+this.id+"_export_dialog_foot");var e=BoldBIDashboard.buildTag("button.bbi-dbrd-export-reset bbi-dbrd-icon-background-theme bbi-dbrd-designer-hoverable","",{float:"left"},{id:this.id+"_export_dialog_reset",type:"button","data-tooltip":this.locale.exportPanel.reset}),r=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-secondary bbi-dbrd-btn-small bbi-dbrd-margin-left bbi-dbrd-export-footer-button",this.locale.dataSource.cancelButtonText,{},{id:this.id+"_export_dialog_cancel",type:"button"}),u=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-small bbi-dbrd-export-footer-button",this.locale.banerPanel.exportTooltip,{},{id:this.id+"_export_dialog_save",type:"button"});this.footerTag.append(r,u,e);u.off("click",this.bbdesigner$.proxy(this.exportingClickAction,this));r.off("click",this.bbdesigner$.proxy(this.dialogClose,this));u.on("click",this.bbdesigner$.proxy(this.exportingClickAction,this));r.on("click",this.bbdesigner$.proxy(this.dialogClose,this));this.unwiredEvents();this.wiredEvents()}else this.updateExportDialogElements(n)},n.prototype.showOrHideFilterOption=function(n,t){t.find(".bbi-dbrd-export-filter-wrap").css("display",n?"inline-block":"none");n||(this.showAppliedFilters=!1)},n.prototype.isFilterApplied=function(){var n=this.designer.modules.masterSlaveFilter;if(!BoldBIDashboard.isNullOrUndefined(n))return n.getAllWidgetSelectedValues().length>0},n.prototype.updateExportDialogElements=function(n){if(this.currentContainer=this.isMobileView?this.mobileExportingContainer:this.exportingContainer,this.setVisibilityForExportWrapper(!1,n),n==="csv")this.isMobileView||(this.currentContainer.find(".bbi-dbrd-viewer-export-dialog").css("height","175px"),this.dialogObj.setModel({minHeight:100})),this.resetDialog();else if(this.currentContainer.find("#"+this.id+"_"+n+"_type_export").length>0)this.setVisibilityForExportWrapper(!0,n),this.resetDialog();else{var t=null;switch(n){case"image":t=this.getImageExportDiv();break;case"pdf":t=this.getPDFExportDiv();break;case"excel":t=this.getExcelExportDiv()}this.currentContainer.find("#"+this.id+"_export_container").append(t);this.setVisibilityForExportWrapper(!0,n);this.renderElements(n)}this.isMobileView&&this.updateExportSelection();this.refreshScroller();this.unwiredEvents();this.wiredEvents()},n.prototype.renderMobileExportDialog=function(n){var t,r,i;if(BoldBIDashboard.isNullOrUndefined(this.mobileExportingContainer)){this.mobileExportingContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-mobile-export-container","",{},{id:this.id+"_mobile_export_wrapper"});var u=BoldBIDashboard.buildTag("div.bbi-dbrd-mobile-export-wrapper bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{},{id:this.id+"_export_content_wrapper"}),f=BoldBIDashboard.buildTag("div.bbi-dbrd-mobile-export-wrapper","",{},{id:this.id+"_export_container"}),o=this.getFileNameWrapper(),e=BoldBIDashboard.buildTag("div.bbi-dbrd-mobile-dialog-wrapper","",{});this.getExportOptionWrapper(e);t=null;switch(n){case"image":t=this.getImageExportDiv();break;case"pdf":t=this.getPDFExportDiv();break;case"excel":t=this.getExcelExportDiv()}f.append(o,e,t);u.append(f);this.mobileExportingContainer.append(u);this.mobileDialog=this.mobileExportingContainer.BoldBIDashboardDialog({height:"100%",width:"100%",actionButtons:["reset","back"],left:0,top:0,minWidth:"95%",minHeight:"100%",cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner bbi-mobile-export bbi-userselect bbi-dbrd-control bbi-dbrd-designer-scroll-style-3",containment:"#"+this.designer._id,target:"#"+this.designer._id,enableResize:!1,allowDraggable:!1,showOnInit:!1,enableModal:!0,showFooter:!1,enableAnimation:!1,create:this.bbdesigner$.proxy(this.addActionButtonIcon,this),title:"Export As",actionButtonClick:this.bbdesigner$.proxy(this.headerIconClick,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText}).data("BoldBIDashboardDialog");this.mobileExportDialogTag=this.bbdesigner$("#"+this.id+"_mobile_export_wrapper_wrapper");r=BoldBIDashboard.buildTag("div.bbi-designer-mobile-export-footer","",{},{id:this.id+"_mobile_export_footer"});i=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-mobile",this.locale.banerPanel.exportTooltip,{},{id:this.id+"_mobile_export_dialog_save",type:"button"});i.off("click",this.bbdesigner$.proxy(this.exportingClickAction,this));i.on("click",this.bbdesigner$.proxy(this.exportingClickAction,this));r.append(i);this.mobileExportDialogTag.append(r);this.updateExportSelection();this.createScroller();this.renderElements(n);this.createScroller();this.unwiredEvents();this.wiredEvents()}else this.updateExportDialogElements(n)},n.prototype.createScroller=function(){var n=this.designer.element.find("#"+this.id+"_mobile_export_wrapper_title"),t=this.designer.element.find("#"+this.id+"_mobile_export_footer");this.designer.element.find("#"+this.id+"_export_content_wrapper").BoldBIDashboardScroller({height:this.mobileExportingContainer.height()-(n.outerHeight()-t.outerHeight()),scrollerSize:5,enableTouchScroll:!0,autoHide:!0,buttonSize:0})},n.prototype.updateScrollerHeight=function(){var n=this.designer.element.find("#"+this.id+"_mobile_export_wrapper"),t=n.data("BoldBIDashboardDialog");t.setModel({height:"100%",minHeight:"100%",width:"100%",minWidth:"95%",top:0,left:0});this.refreshScroller();n.BoldBIDashboardDialog("refresh")},n.prototype.refreshScroller=function(){var t=this.designer.element.find("#"+this.id+"_mobile_export_wrapper_title"),i=this.designer.element.find("#"+this.id+"_mobile_export_wrapper_wrapper"),r=this.designer.element.find("#"+this.id+"_mobile_export_footer"),n=this.designer.element.find("#"+this.id+"_export_content_wrapper").data("BoldBIDashboardScroller"),u=i.height()-(r.outerHeight()+t.outerHeight()+10);n&&(n.setModel({height:u,scrollerSize:5,enableTouchScroll:!0,autoHide:!0,buttonSize:0}),n.refresh())},n.prototype.getExportOptionWrapper=function(n){var r,e,h,a;if(this.designer.model.export.Image){var t=BoldBIDashboard.buildTag("div.bbi-dbrd-mobileExportImage bbi-mobile-export-selection bbi-export-icons","",{},{id:this.id+"_imagemobileExport"}),i=BoldBIDashboard.buildTag("div.bbi-dbrd-mobileExportImageIconWrap"),v=BoldBIDashboard.buildTag("span.bbi-dbrd-mobileExportImageIcon");i.append(v);r=BoldBIDashboard.buildTag("span.bbi-dbrd-mobileExportImageText",this.locale.exportPanel.imageExport);t.append(i,r);n.append(t)}if(this.designer.model.export.Pdf){var u=BoldBIDashboard.buildTag("div.bbi-dbrd-mobileExportPdf bbi-export-icons","",{},{id:this.id+"_pdfmobileExport"}),f=BoldBIDashboard.buildTag("div.bbi-dbrd-mobileExportPdfIconWrap"),y=BoldBIDashboard.buildTag("span.bbi-dbrd-mobileExportPdfIcon");f.append(y);e=BoldBIDashboard.buildTag("span.bbi-dbrd-mobileExportPdfText",this.locale.exportPanel.pdfExport);u.append(f,e);n.append(u)}if(this.designer.model.export.Excel){var o=BoldBIDashboard.buildTag("div.bbi-dbrd-mobileExportExcel bbi-export-icons","",{},{id:this.id+"_excelmobileExport"}),s=BoldBIDashboard.buildTag("div.bbi-dbrd-mobileExportExcelIconWrap"),p=BoldBIDashboard.buildTag("span.bbi-dbrd-mobileExportExcelIcon");s.append(p);h=BoldBIDashboard.buildTag("span.bbi-dbrd-mobileExportExcelText",this.locale.exportPanel.excelExport);o.append(s,h);var c=BoldBIDashboard.buildTag("div.bbi-dbrd-mobileExportCsv bbi-export-icons","",{},{id:this.id+"_csvmobileExport"}),l=BoldBIDashboard.buildTag("div.bbi-dbrd-mobileExportCsvIconWrap"),w=BoldBIDashboard.buildTag("span.bbi-dbrd-mobileExportCsvIcon");l.append(w);a=BoldBIDashboard.buildTag("span.bbi-dbrd-mobileExportCsvText",this.locale.exportPanel.csvExport);c.append(l,a);n.append(o,c)}},n.prototype.updateExportSelection=function(){this.setSelectionForWrapper()},n.prototype.headerIconClick=function(n){var t=this;switch(n.currentTarget){case"reset":this.resetDialog(!0);break;case"back":setTimeout(function(){t.dialogClose()},100)}},n.prototype.addActionButtonIcon=function(){this.designer.element.find("#"+this.id+"_mobile_export_wrapper_title").find("#"+this.id+"_mobile_export_wrapper_resetbutton").addClass("bbi-dbrd-export-mobile-reset bbi-dbrd-icon-background-theme");this.designer.element.find("#"+this.id+"_mobile_export_wrapper_title").find("#"+this.id+"_mobile_export_wrapper_backbutton").addClass("bbi-dbrd-export-titleBackIcon")},n.prototype.setVisibilityForExportWrapper=function(n,t){var r,i,u;n?(this.currentContainer.find("#"+this.id+"_"+t+"_type_export").css("display","block"),t==="pdf"&&(this.exportSettings.ExportDashboard?(r=this.currentContainer.find(".e-dbrd-export-widget-selection-dropdown").data("BoldBIDashboardDropDownList"),BoldBIDashboard.isNullOrUndefined(r)||r.setModel({dataSource:this.getWidgetList()}),this.currentContainer.find(".bbi-dbrd-export-selection-wrapper-for-pdf").css("display","flex"),this.currentContainer.find(".bbi-widget-export-pagewise-wrapper-for-pdf").css("display","none")):(i=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designer.element.find("#"+this.designer._id+"_"+this.exportSettings.selectedWidgetId)),this.isGridSeriesWidgetPDFExport=this.exportSettings.ExportDashboard?!1:i.Type==="Grid"||i.Type==="NumberCard"||i.Type==="KPICard"?!0:!1,this.currentContainer.find(".bbi-widget-export-pagewise-wrapper-for-pdf").css("display",this.isGridSeriesWidgetPDFExport?"flex":"none")),u=this.currentContainer.find(".e-dbrd-export-page-size-dropdown"),u.BoldBIDashboardDropDownList({dataSource:this.getItems("pageSize")}))):(this.currentContainer.find(".bbi-dbrd-export-wrapper-visible").css("display","none"),this.isMobileView||(this.currentContainer.find(".bbi-dbrd-viewer-export-dialog").css("height","290px"),this.dialogObj.setModel({minHeight:320})))},n.prototype.setSelectionForWrapper=function(){var t,n;this.mobileExportingContainer.find(".bbi-export-icons").removeClass("bbi-mobile-export-selection");this.mobileExportingContainer.find("#"+this.id+"_"+this.exportSettings.ExportType+"mobileExport").addClass("bbi-mobile-export-selection");n=this.mobileExportingContainer.find("#"+this.id+"_export_fileName");(((t=n.val())===null||t===void 0?void 0:t.trim())===""||n.val().length>250)&&(this.mobileExportingContainer.find(".bbi-dbrd-export-file-input").addClass("e-dbrd-error-element-border"),this.mobileExportingContainer.find(".bbi-dbrd-filenameError").css("display","block"),n.val().length>250?this.mobileExportingContainer.find(".bbi-dbrd-filenameError").html(this.locale.exportPanel.fileNameLengthError):this.mobileExportingContainer.find(".bbi-dbrd-filenameError").html(this.locale.exportPanel.emptyFileNameError),BoldBIDashboard.DashboardUtil.buttonEnable(this.mobileExportDialogTag.find("#"+this.id+"_mobile_export_dialog_save"),!1))},n.prototype.getTitle=function(n){switch(n){case"image":return this.locale.exportPanel.imageExportTitle;case"pdf":return this.locale.exportPanel.pdfExportTitle;case"excel":return this.locale.exportPanel.excelExportTitle;case"csv":return this.locale.exportPanel.csvExportTitle}},n.prototype.renderElements=function(n){var t=null,i=null,r=null,u=null,f=null,e=null,o=null;this.currentContainer=this.isMobileView?this.mobileExportingContainer:this.exportingContainer;t=this.currentContainer.find(".e-dbrd-export-format-dropdown");i=this.currentContainer.find(".e-dbrd-export-page-size-dropdown");r=this.currentContainer.find(".e-dbrd-export-filetype-dropdown");u=this.currentContainer.find("#"+this.id+"_dashboardData");f=this.currentContainer.find("#"+this.id+"_widgetData");e=this.currentContainer.find(".e-dbrd-export-widget-selection-dropdown");o=this.currentContainer.find(".e-widget-pagewise-export");switch(n){case"image":t.BoldBIDashboardDropDownList({dataSource:this.getItems("format"),fields:{id:"itemId",text:"itemName",value:"itemId"},width:this.isMobileView?"100%":210,height:27,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-dbrd-export-popup",selectedIndex:0});this.currentContainer.find(".bbi-dbrd-export-resolution").val("96");break;case"pdf":i.BoldBIDashboardDropDownList({dataSource:this.getItems("pageSize"),fields:{id:"itemId",text:"itemName"},width:this.isMobileView?"100%":220,height:25,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-dbrd-export-popup",selectedIndex:this.defaultPageSizeIndex});u.BoldBIDashboardRadioButton({checked:!0,change:this.bbdesigner$.proxy(this.dashboardChooser,this),cssClass:"bbi-designer-radiobtn",name:"Category"});f.BoldBIDashboardRadioButton({checked:!1,change:this.bbdesigner$.proxy(this.widgetChooser,this),cssClass:"bbi-designer-radiobtn",name:"Category"});e.BoldBIDashboardDropDownList({cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-dbrd-export-popup",dataSource:this.getWidgetList(),fields:{text:"DisplayName",id:"UniqueColumnName"},watermarkText:"All",showCheckbox:!0,width:this.isMobileView?"100%":210,height:27});o.BoldBIDashboardCheckBox({checked:!0,width:"100%",change:this.bbdesigner$.proxy(this.widgetPagewiseCheckboxChange,this)});break;case"excel":r.BoldBIDashboardDropDownList({dataSource:this.getItems("fileType"),fields:{id:"itemId",text:"itemName",value:"itemId"},width:this.isMobileView?"100%":460,height:27,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-dbrd-export-popup",selectedIndex:0})}},n.prototype.onFileNameChange=function(n){this.currentContainer=this.isMobileView?this.mobileExportingContainer:this.exportingContainer;this.bbdesigner$(n.target).val().trim()===""||this.bbdesigner$(n.target).val().length>250?(this.currentContainer.find(".bbi-dbrd-export-file-input").addClass("e-dbrd-error-element-border"),this.currentContainer.find(".bbi-dbrd-filenameError").css("display","block"),this.bbdesigner$(n.target).val().length>250?this.currentContainer.find(".bbi-dbrd-filenameError").html(this.locale.exportPanel.fileNameLengthError):this.currentContainer.find(".bbi-dbrd-filenameError").html(this.locale.exportPanel.emptyFileNameError),this.isMobileView?BoldBIDashboard.DashboardUtil.buttonEnable(this.mobileExportDialogTag.find("#"+this.id+"_mobile_export_dialog_save"),!1):BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.find("#"+this.id+"_export_dialog_save"),!1)):(this.currentContainer.find(".bbi-dbrd-export-file-input").removeClass("e-dbrd-error-element-border"),this.currentContainer.find(".bbi-dbrd-filenameError").css("display","none"),this.buttonEnable())},n.prototype.onValueChange=function(n){this.currentContainer=this.isMobileView?this.mobileExportingContainer:this.exportingContainer;this.bbdesigner$(n.target).val()<96?(this.currentContainer.find(".bbi-brd-resolutionErrorLow").css("display","block"),this.currentContainer.find(".bbi-dbrd-export-resolution").removeClass("bbi-dbrd-exportImageField-without-error").addClass("e-dbrd-error-element-border"),this.currentContainer.find(".bbi-dbrd-resolutionAlert").css("display","none"),this.currentContainer.find(".bbi-dbrd-export-resolution").removeClass("bbi-dbrd-export-resolution-with-alert"),this.isMobileView?BoldBIDashboard.DashboardUtil.buttonEnable(this.mobileExportDialogTag.find("#"+this.id+"_mobile_export_dialog_save"),!1):BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.find("#"+this.id+"_export_dialog_save"),!1)):this.bbdesigner$(n.target).val()>300?(this.currentContainer.find(".bbi-brd-resolutionErrorLow").css("display","none"),this.currentContainer.find(".bbi-dbrd-export-resolution").removeClass("e-dbrd-error-element-border").addClass("bbi-dbrd-exportImageField-without-error"),this.currentContainer.find(".bbi-dbrd-resolutionAlert").css("display","inline-block"),this.currentContainer.find(".bbi-dbrd-export-resolution").addClass("bbi-dbrd-export-resolution-with-alert"),this.isMobileView?BoldBIDashboard.DashboardUtil.buttonEnable(this.mobileExportDialogTag.find("#"+this.id+"_mobile_export_dialog_save"),!1):BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.find("#"+this.id+"_export_dialog_save"),!1)):(this.currentContainer.find(".bbi-brd-resolutionErrorLow").css("display","none"),this.currentContainer.find(".bbi-dbrd-export-resolution").removeClass("e-dbrd-error-element-border").addClass("bbi-dbrd-exportImageField-without-error"),this.currentContainer.find(".bbi-dbrd-resolutionAlert").css("display","none"),this.currentContainer.find(".bbi-dbrd-export-resolution").removeClass("bbi-dbrd-export-resolution-with-alert"),this.buttonEnable())},n.prototype.buttonEnable=function(){var n=!0,i=this.currentContainer.find(".bbi-dbrd-resolutionAlert").length>0&&this.currentContainer.find(".bbi-dbrd-resolutionAlert").css("display")!=="none",r=this.currentContainer.find(".bbi-brd-resolutionErrorLow").length>0&&this.currentContainer.find(".bbi-brd-resolutionErrorLow").css("display")!=="none",u=this.currentContainer.find(".bbi-dbrd-filenameError").length>0&&this.currentContainer.find(".bbi-dbrd-filenameError").css("display")!=="none",t;(u||i||r)&&(n=!1);t=this.isMobileView?this.mobileExportDialogTag.find("#"+this.id+"_mobile_export_dialog_save"):this.footerTag.find("#"+this.id+"_export_dialog_save");BoldBIDashboard.DashboardUtil.buttonEnable(t,n)},n.prototype.dashboardChooser=function(){this.currentContainer=this.isMobileView?this.mobileExportingContainer:this.exportingContainer;this.currentContainer.find("#"+this.id+"_widget_selection_dropdown_wrapper").css("display","none")},n.prototype.widgetChooser=function(){this.currentContainer=this.isMobileView?this.mobileExportingContainer:this.exportingContainer;this.currentContainer.find("#"+this.id+"_widget_selection_dropdown_wrapper").css("display","inline-block")},n.prototype.getWidgetList=function(){var r=[],i,t,n,f;try{for(i=BoldBIDashboard.Dashboard.WidgetHelper.getAllWidgetElements(this.designer._id,this.designer.modules.Mode.designCanvas,".bbi-dbrditem"),t=0;t<i.length;t++)n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(i.eq(t)),BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.Dashboard.WidgetHelper.isFilterWidgets(n)||!BoldBIDashboard.Dashboard.WidgetHelper.isDataWidget(n)||r.push({DisplayName:BoldBIDashboard.DashboardUtil.encodeText(n.getJson().ContainerSettings.Title),UniqueColumnName:n.getJson().UniqueName})}catch(u){return f=this.designer.designerPanel,f.logError({Source:"getWidgetList",Error:u,Type:u.name}),[]}return r},n.prototype.getImageExportDiv=function(){var o=this.getShowFilterOption("image"),n=BoldBIDashboard.buildTag("div.bbi-dbrd-export-image-export-wrapper bbi-dbrd-export-wrapper-visible","",{},{id:this.id+"_image_type_export"}),i=BoldBIDashboard.buildTag("div.bbi-dbrd-export-image-format","",{}),s=BoldBIDashboard.buildTag("div.bbi-brd-inactive-left",this.locale.exportPanel.format),r=BoldBIDashboard.buildTag("div.bbi-dbrd-export-image-dropdown"),h=BoldBIDashboard.buildTag("input.e-dbrd-export-format-dropdown bbi-dbrd-viewer-exportImageField","",{},{id:this.id+"_export_format_dropdown"}),f,e;r.append(h);i.append(s,r);var u=BoldBIDashboard.buildTag("div.bbi-dbrd-export-image-resolutionWrapper","",{}),c=BoldBIDashboard.buildTag("div.bbi-brd-inactive-left",this.locale.exportPanel.resolution),t=BoldBIDashboard.buildTag("div.bbi-dbrd-export-image-dropdown"),l=BoldBIDashboard.buildTag("input.bbi-dbrd-export-resolution bbi-dbrd-exportImageField bbi-dbrd-exportImageField-without-error","",{},{type:"number",min:"0"});return t.append(l),f=BoldBIDashboard.buildTag("span.bbi-dbrd-resolutionAlert bbi-dbrd-designer-hoverable","",{},{"data-tooltip":this.locale.exportPanel.resolutionHigherError}),e=BoldBIDashboard.buildTag("div.bbi-brd-resolutionErrorLow",this.locale.exportPanel.resolutionLowerError,{}),t.append(f),u.append(c,t,e),n.append(o,i,u),this.showOrHideFilterOption(this.isFilterApplied(),n),n},n.prototype.getExcelExportDiv=function(){var n=BoldBIDashboard.buildTag("div.bbi-dbrd-export-excel-wrapper bbi-dbrd-export-image-export-wrapper bbi-dbrd-export-wrapper-visible","",{},{id:this.id+"_excel_type_export"}),i=BoldBIDashboard.buildTag("div.bbi-brd-inactive-left",this.locale.exportPanel.fileType,{},{id:this.id+"_export_fileTypeName_text"}),t=BoldBIDashboard.buildTag("div.bbi-dbrd-export-image-dropdown"),r=BoldBIDashboard.buildTag("input.e-dbrd-export-filetype-dropdown bbi-dbrd-viewer-exportImageField","",{},{id:this.id+"_export_filetype_dropdown"});return t.append(r),n.append(i),n.append(t),n},n.prototype.getPDFExportDiv=function(){var u=this.getShowFilterOption("pdf"),n=BoldBIDashboard.buildTag("div.bbi-dbrd-export-pdf-export-wrapper bbi-dbrd-export-wrapper-visible","",{"padding-top":"10px"},{id:this.id+"_pdf_type_export"}),i=BoldBIDashboard.buildTag("div.bbi-dbrd-export-selection-wrapper-for-pdf","",{display:this.exportSettings.ExportDashboard?"flex":"none",margin:this.isMobileView?"0% 0 0% 3%":"3% 0 3% 1%","padding-top":this.isMobileView?"7px":"0px","align-items":"center",height:"27px"},{id:this.id+"_selection_wrapper_for_pdf"}),t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designer.element.find("#"+this.designer._id+"_"+this.exportSettings.selectedWidgetId));this.isGridSeriesWidgetPDFExport=this.exportSettings.ExportDashboard?!1:t.Type==="Grid"||t.Type==="NumberCard"||t.Type==="KPICard"?!0:!1;var r=BoldBIDashboard.buildTag("div.bbi-widget-export-pagewise-wrapper-for-pdf","",{display:this.isGridSeriesWidgetPDFExport?"flex":"none",margin:this.isMobileView?"0% 0 0% 3%":"3% 0 3% 1%","padding-top":this.isMobileView?"7px":"10px","align-items":"center"},{id:this.id+"_pagewise-wrapper-for-pdf"}),f=this.getDashboardRadioButton(),e=this.getWidgetsRadioButton(),o=this.getMultiSelectionCombobox(),s=this.getPageSizeOrientationWrapper(),h=this.getWidgetPageWiseCheckbox();return i.append(f,e,o),r.append(h),n.append(u,i,r,s),this.showOrHideFilterOption(this.isFilterApplied(),n),n},n.prototype.getWidgetPageWiseCheckbox=function(){var n=BoldBIDashboard.buildTag("div.bbi-pagewise-row","",{},{id:this.id+"_WidgetPagewiseRow_table"}),t=BoldBIDashboard.buildTag("input.e-widget-pagewise-export","",{},{type:"checkbox",id:this.id+"_widgetPagewise"}),i=BoldBIDashboard.buildTag("label.bbi-designer-label bbi-pagewise-label",this.locale.exportPanel.pagewiseOption,{},{"for":this.id+"_widgetPagewiseLabelData",type:"label"});return n.append(t,i,this.getInformationIcon(this.locale.exportPanel.pagewiseExportInfo))},n.prototype.widgetPagewiseCheckboxChange=function(n){this.currentPageExportCheckbox=n.isChecked},n.prototype.getFileNameWrapper=function(){var n=BoldBIDashboard.buildTag("div.bbi-dbrd-export-filename-wrapper","",{}),t=BoldBIDashboard.buildTag("div.bbi-brd-inactive-left",this.locale.exportPanel.fileName,{},{id:this.id+"_export_fileName_text"}),i=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-fontfamily bbi-dbrd-export-file-input","",{},{id:this.id+"_export_fileName"}),r=BoldBIDashboard.buildTag("div.bbi-dbrd-filenameError",this.locale.exportPanel.emptyFileNameError,{"margin-top":"2px"},{});return n.append(t,i,r)},n.prototype.getShowFilterOption=function(n){var t=BoldBIDashboard.buildTag("div.bbi-dbrd-export-filter-wrap","",{});return t.append(BoldBIDashboard.DashboardUtil.getToggleButton(this.id,!0,this.locale.exportPanel.includeFilterInfoText,"showAppliedFilterChange",this)),t.append(this.getInformationIcon(n==="image"?this.locale.exportPanel.includeFilterInfoTooltipForImage:this.locale.exportPanel.includeFilterInfoTooltipForPdf)),this.showAppliedFilters=!0,t},n.prototype.getInformationIcon=function(n){return"<div class='bbi-export-info-icon-wrap'><div class='bbi-export-info-icon bbi-dbrd-designer-hoverable' data-tooltip='"+n+"'><\/div><\/div>"},n.prototype.showAppliedFilterChange=function(n){BoldBIDashboard.isNullOrUndefined(n)||(this.showAppliedFilters=this.bbdesigner$(n.currentTarget).prop("checked"))},n.prototype.resetDialog=function(n){var i,r,u,t;n===void 0&&(n=!1);i=this.designer.element.find("#"+this.designer._id+"_"+this.exportSettings.selectedWidgetId);r=this.exportSettings.ExportDashboard?this.designer.modules.serialization.dashboardPropertyJson.Name:this.getWidgetTitle(i);this.currentContainer=this.isMobileView?this.mobileExportingContainer:this.exportingContainer;(!this.isMobileView||n)&&this.currentContainer.find("#"+this.id+"_export_fileName").val(r);this.hideErrorElements();switch(this.exportSettings.ExportType){case"image":this.currentContainer.find("#"+this.id+"_image_type_export").length>0&&(this.currentContainer.find(".bbi-dbrd-export-resolution").val("96"),this.currentContainer.find(".e-dbrd-export-format-dropdown").BoldBIDashboardDropDownList({selectedIndex:0}),this.resetIncludeFilterOption(),this.showOrHideFilterOption(this.isFilterApplied(),this.currentContainer));break;case"pdf":this.currentContainer.find("#"+this.id+"_pdf_type_export").length>0&&(u=this.currentContainer.find(".e-dbrd-orientation-wrapper"),this.exportSettings.ExportDashboard?(this.currentContainer.find("#"+this.id+"_selection_wrapper_for_pdf").css("display","flex"),t=BoldBIDashboard.isNullOrUndefined(this.designer.modules.serialization.dashboardPropertyJson.DashboardExport.PdfPageSize)?new PdfPageSize:this.designer.modules.serialization.dashboardPropertyJson.DashboardExport.PdfPageSize,this.currentContainer.find(".e-dbrd-export-page-size-dropdown").data("BoldBIDashboardDropDownList").selectItemByIndex(this.updatePagesizeIndex(this.designer.modules.propertyPanel.getSelectedValues(t)))):(this.currentContainer.find("#"+this.id+"_selection_wrapper_for_pdf").css("display","none"),t=BoldBIDashboard.isNullOrUndefined(this.widgetInstance.getContainerSettings().PdfPageSize)?new PdfPageSize:this.widgetInstance.getContainerSettings().PdfPageSize,this.currentContainer.find(".e-dbrd-export-page-size-dropdown").data("BoldBIDashboardDropDownList").selectItemByIndex(this.updatePagesizeIndex(this.designer.modules.propertyPanel.getSelectedValues(t)))),this.updateOrientationOption(u,n),this.currentContainer.find(".e-dashboard-radio-btn").data("BoldBIDashboardRadioButton").setModel({checked:!0}),this.resetIncludeFilterOption(),this.showOrHideFilterOption(this.isFilterApplied(),this.currentContainer),this.currentPageExportCheckbox=!0,this.currentContainer.find(".e-widget-pagewise-export").data("BoldBIDashboardCheckBox").setModel({checked:!0}));break;case"excel":this.currentContainer.find("#"+this.id+"_excel_type_export").length>0&&this.currentContainer.find(".e-dbrd-export-filetype-dropdown").BoldBIDashboardDropDownList({selectedIndex:0})}},n.prototype.resetIncludeFilterOption=function(){this.showAppliedFilters=!0;this.currentContainer.find(".bbi-switcher-check").prop("checked",!0)},n.prototype.getModifiedFieldsInCurrentDialog=function(){var n,t,i,r;this.isMobileView?this.mobileExportingContainer.find("#"+this.id+"_export_fileName").val(this.currentContainer.find("#"+this.id+"_export_fileName").val()):this.exportingContainer.find("#"+this.id+"_export_fileName").val(this.mobileExportingContainer.find("#"+this.id+"_export_fileName").val());n=0;switch(this.exportSettings.ExportType){case"image":this.currentContainer.find("#"+this.id+"_image_type_export").length>0&&(this.isMobileView?(this.mobileExportingContainer.find(".bbi-dbrd-export-resolution").val(this.exportingContainer.find(".bbi-dbrd-export-resolution").val()),BoldBIDashboard.isNullOrUndefined(this.exportingContainer.find(".e-dbrd-export-format-dropdown").data("BoldBIDashboardDropDownList"))||(n=this.exportingContainer.find(".e-dbrd-export-format-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex,this.mobileExportingContainer.find(".e-dbrd-export-format-dropdown").BoldBIDashboardDropDownList({selectedIndex:n}))):(this.exportingContainer.find(".bbi-dbrd-export-resolution").val(this.mobileExportingContainer.find(".bbi-dbrd-export-resolution").val()),BoldBIDashboard.isNullOrUndefined(this.mobileExportingContainer.find(".e-dbrd-export-format-dropdown").data("BoldBIDashboardDropDownList"))||(n=this.mobileExportingContainer.find(".e-dbrd-export-format-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex,this.exportingContainer.find(".e-dbrd-export-format-dropdown").BoldBIDashboardDropDownList({selectedIndex:n}))));break;case"pdf":if(this.currentContainer.find("#"+this.id+"_pdf_type_export").length>0){if(this.isMobileView){BoldBIDashboard.isNullOrUndefined(this.exportingContainer.find(".e-dbrd-export-page-size-dropdown").data("BoldBIDashboardDropDownList"))||(n=this.exportingContainer.find(".e-dbrd-export-page-size-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex,this.mobileExportingContainer.find(".e-dbrd-export-page-size-dropdown").BoldBIDashboardDropDownList({selectedIndex:n}));t=this.exportingContainer.find(".e-dbrd-orientation-wrapper");i=t.attr("data-orientation");switch(i){case"Landscape":this.mobileExportingContainer.find(".bbi-dbrd-pdfOrientation-for-portrait").removeClass(this.selectionForPdfOrientation()).addClass("bbi-dbrd-icon-background-theme");this.mobileExportingContainer.find(".bbi-dbrd-pdfOrientation-for-landscape").addClass(this.selectionForPdfOrientation()).removeClass("bbi-dbrd-icon-background-theme");break;case"Portrait":this.mobileExportingContainer.find(".bbi-dbrd-pdfOrientation-for-landscape").removeClass(this.selectionForPdfOrientation()).addClass("bbi-dbrd-icon-background-theme");this.mobileExportingContainer.find(".bbi-dbrd-pdfOrientation-for-portrait").addClass(this.selectionForPdfOrientation()).removeClass("bbi-dbrd-icon-background-theme")}}else{BoldBIDashboard.isNullOrUndefined(this.mobileExportingContainer.find(".e-dbrd-export-page-size-dropdown").data("BoldBIDashboardDropDownList"))||(n=this.mobileExportingContainer.find(".e-dbrd-export-page-size-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex,this.exportingContainer.find(".e-dbrd-export-page-size-dropdown").BoldBIDashboardDropDownList({selectedIndex:n}));t=this.mobileExportingContainer.find(".e-dbrd-orientation-wrapper");i=t.attr("data-orientation");switch(i){case this.locale.exportPanel.landscape:this.exportingContainer.find(".bbi-dbrd-pdfOrientation-for-portrait").removeClass(this.selectionForPdfOrientation()).addClass("bbi-dbrd-icon-background-theme");this.exportingContainer.find(".bbi-dbrd-pdfOrientation-for-landscape").addClass(this.selectionForPdfOrientation()).removeClass("bbi-dbrd-icon-background-theme");break;case this.locale.exportPanel.portrait:this.exportingContainer.find(".bbi-dbrd-pdfOrientation-for-landscape").removeClass(this.selectionForPdfOrientation()).addClass("bbi-dbrd-icon-background-theme");this.exportingContainer.find(".bbi-dbrd-pdfOrientation-for-portrait").addClass(this.selectionForPdfOrientation()).removeClass("bbi-dbrd-icon-background-theme")}BoldBIDashboard.isNullOrUndefined(this.mobileExportingContainer.find(".e-dashboard-radio-btn").data("BoldBIDashboardRadioButton"))||BoldBIDashboard.isNullOrUndefined(this.exportingContainer.find(".e-dashboard-radio-btn").data("BoldBIDashboardRadioButton"))||(r=this.mobileExportingContainer.find(".e-dashboard-radio-btn").data("BoldBIDashboardRadioButton").model.checked,this.exportingContainer.find(".e-dashboard-radio-btn").data("BoldBIDashboardRadioButton").setModel({checked:r}))}BoldBIDashboard.isNullOrUndefined(this.exportingContainer.find(".e-dashboard-radio-btn").data("BoldBIDashboardRadioButton"))||BoldBIDashboard.isNullOrUndefined(this.mobileExportingContainer.find(".e-dashboard-radio-btn").data("BoldBIDashboardRadioButton"))||(r=this.exportingContainer.find(".e-dashboard-radio-btn").data("BoldBIDashboardRadioButton").model.checked,this.mobileExportingContainer.find(".e-dashboard-radio-btn").data("BoldBIDashboardRadioButton").setModel({checked:r}))}break;case"excel":this.currentContainer.find("#"+this.id+"_excel_type_export").length>0&&(!this.isMobileView&&this.mobileExportingContainer.find(".e-dbrd-export-filetype-dropdown").data("BoldBIDashboardDropDownList")?(n=this.mobileExportingContainer.find(".e-dbrd-export-filetype-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex,this.exportingContainer.find(".e-dbrd-export-filetype-dropdown").BoldBIDashboardDropDownList({selectedIndex:n})):this.isMobileView&&!BoldBIDashboard.isNullOrUndefined(this.exportingContainer.find(".e-dbrd-export-filetype-dropdown").data("BoldBIDashboardDropDownList"))&&(n=this.exportingContainer.find(".e-dbrd-export-filetype-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex,this.mobileExportingContainer.find(".e-dbrd-export-filetype-dropdown").BoldBIDashboardDropDownList({selectedIndex:n})))}},n.prototype.hideErrorElements=function(){this.currentContainer=this.isMobileView?this.mobileExportingContainer:this.exportingContainer;this.currentContainer.find(".bbi-dbrd-filenameError").css("display")!=="none"&&(this.currentContainer.find(".bbi-dbrd-filenameError").css("display","none"),this.currentContainer.find("#"+this.id+"_export_fileName").removeClass("e-dbrd-error-element-border"));this.currentContainer.find(".bbi-brd-resolutionErrorLow").css("display")!=="none"&&(this.currentContainer.find(".bbi-brd-resolutionErrorLow").css("display","none"),this.currentContainer.find(".bbi-dbrd-export-resolution").removeClass("e-dbrd-error-element-border").addClass("bbi-dbrd-exportImageField-without-error"));this.currentContainer.find(".bbi-dbrd-resolutionAlert").css("display")!=="none"&&(this.currentContainer.find(".bbi-dbrd-resolutionAlert").css("display","none"),this.currentContainer.find(".bbi-dbrd-export-resolution").removeClass("bbi-dbrd-export-resolution-with-alert"));this.isMobileView?BoldBIDashboard.DashboardUtil.buttonEnable(this.mobileExportDialogTag.find("#"+this.id+"_mobile_export_dialog_save"),!0):BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.find("#"+this.id+"_export_dialog_save"),!0)},n.prototype.exportMenuClick=function(n,t,i){var r,u,f;i===void 0&&(i=null);r=this.bbdesigner$(t.currentTarget).closest(".bbi-dbrditem");r.hasClass("bbi-container-widget")?r.find(".bbi-dbrd-controlIcon-container").first().addClass("e-contextmenu-open"):r.find(".bbi-dbrd-controlIcon-container").addClass("e-contextmenu-open");u=this.bbdesigner$(t.target).attr("data-name");this.widgetInstance=r.length>0?BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(r):null;var o=this.designer.element.find("#"+this.designer._id+"_designPanel"),s=u==="dashboardmenu"&&!BoldBIDashboard.isNullOrUndefined(i)?i:this.getPopupMenuItems(this.widgetInstance,u,!1),e=BoldBIDashboard.isNullOrUndefined(this.widgetInstance)?u:this.widgetInstance.Name,h=u==="export"&&!BoldBIDashboard.isNullOrUndefined(this.widgetInstance);this.populateMenuItems(o,s,e,u==="dashboardmenu",r.length>0,h,!1);f=this.bbdesigner$("#"+this.id+"_"+e+"ConfigMenu");f.is(":visible")?f.hide():this.showExportMenu(n,t,!1)},n.prototype.getPopupMenuItems=function(n,t,i){var r=[];switch(t){case"menu":r=this.designer.isMobileLayout()?this.getRequiredMenuItems(n,n.getJson()):this.getMenuWithSubMenuItems(n);break;case"export":r=this.getExportMenuItems(!BoldBIDashboard.isNullOrUndefined(n),n.getContainerSettings(),n,i);break;case"dashboardmenu":r=this.designer.designerPanel.banner.mobileViewMenuItems()}return r},n.prototype.getRequiredMenuItems=function(n,t){var i=[],r={id:"export",text:this.locale.banerPanel.exportTooltip,"class":"bbi-dashboard-banner-menu",items:this.getExportMenuItems(!0,n.getContainerSettings(),n)};return r.items.length>0&&(this.designer.isMobileLayout()?i.push({id:"export",text:this.locale.banerPanel.exportTooltip,"class":"bbi-dashboard-banner-menu"}):i.push(r)),BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(t.ContainerSettings)||!t.ContainerSettings.ViewData||t.ContainerSettings.ViewActionData===ViewActionData.WidgetSelection||i.push({id:"viewData",text:this.locale.viewData.viewData,"class":"bbi-dashboard-viewData-menu"}),i},n.prototype.getItems=function(n){var t=[];switch(n){case"format":t.push({itemId:"jpg",itemName:"JPEG(*.jpg)"},{itemId:"png",itemName:"PNG(*.png)"});break;case"fileType":t.push({itemId:"xlsx",itemName:ExcelType.Xlsx},{itemId:"xls",itemName:ExcelType.Xls});break;case"pageSize":t=this.updatePdfPageSizeDrpdwn()}return t},n.prototype.updatePdfPageSizeDrpdwn=function(){var n=[],t=[],r=this.exportSettings.ExportDashboard,i;return r?(t=BoldBIDashboard.isNullOrUndefined(this.designer.model.dashboardExport.PdfPageSize)?this.designer.modules.propertyPanel.getSelectedValues(new PdfPageSize):this.designer.modules.propertyPanel.getSelectedValues(this.designer.model.dashboardExport.PdfPageSize),n=n.concat(t.map(function(n){return{itemId:n,itemName:n}}))):(i=this.widgetInstance.getContainerSettings(),t=BoldBIDashboard.isNullOrUndefined(i.PdfPageSize)?this.designer.modules.propertyPanel.getSelectedValues(new PdfPageSize):this.designer.modules.propertyPanel.getSelectedValues(i.PdfPageSize),n=n.concat(t.map(function(n){return{itemId:n,itemName:n}}))),this.defaultPageSizeIndex=this.updatePagesizeIndex(t),n},n.prototype.updatePagesizeIndex=function(n){var i,t;for(this.defaultPageSizeIndex=0,i=0,t=0;t<n.length;t++)if(n[t]==="A4"){i=t;break}return i},n.prototype.showExportMenu=function(n,t,i){var u=this.bbdesigner$("#"+this.id+"_"+n+"ConfigMenu").data("BoldBIDashboardMenu"),e,o,f,r;BoldBIDashboard.isNullOrUndefined(u)||(e=this.getLeftPositionValue(t,n),o=this.bbdesigner$(t.target).offset().top+this.bbdesigner$(t.target).height()+(i?5:0)-this.designer.element.offset().top,u.show(e,o,this.designer.element.find("#"+this.designer._id+"_designPanel"),t),f=this.bbdesigner$(t.currentTarget).closest(".bbi-dbrditem"),r=f.length>0?BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(f):null,!BoldBIDashboard.isNullOrUndefined(r)&&!BoldBIDashboard.isNullOrUndefined(r.getJson().FilterSettings)&&r.getJson().FilterSettings.ActAsMasterWidget&&r.getJson().ContainerSettings.Bounds.ColumnSpan<5&&(r.ControlHeader.find("bbi-remove-control-filter-enable").length>0?u.enableItem(this.locale.dataconfiguration.menuItems.measureFilterDisplayName):u.disableItem(this.locale.dataconfiguration.menuItems.measureFilterDisplayName)))},n.prototype.getLeftPositionValue=function(n,t){var i=this.bbdesigner$(n.target).offset().left,f=this.bbdesigner$("#"+this.id+"_"+t+"ConfigMenu").width(),r,u;return i<f?i-this.designer.element.offset().left:(r=this.designer.element.offset().left,u=i-(r+f),u>0?u:i-r)},n.prototype.getExportMenuItems=function(n,t,i,r){var u,f,e;return BoldBIDashboard.isNullOrUndefined(n)||!n?(u=[],this.designer.model.export.Image&&u.push({id:"image",text:this.locale.exportPanel.imageExport,"class":"bbi-dbrd-showDashboardMenu-Exportimage"}),this.designer.model.export.Pdf&&u.push({id:"pdf",text:this.locale.exportPanel.pdfExport,"class":"bbi-dbrd-showDashboardMenu-ExportPdf"}),this.designer.model.export.Excel&&u.push({id:"excel",text:this.locale.exportPanel.excelExport,"class":"bbi-dbrd-showControlMenu-ExportExcel"}),this.designer.model.export.Csv&&u.push({id:"csv",text:this.locale.exportPanel.csvExport,"class":"bbi-dbrd-showControlMenu-ExportCSV"}),this.designer.model.mode===BoldBIDashboard.Designer.mode.view&&this.designer._trigger("onExportRender",{exportOptionCollection:u,path:this.designer.model.dashboardPath}),u):(f=[],t.EnableImageExport&&this.designer.model.export.Image&&!r&&this.designer.model.widgetExportMenuSettings.showImage&&f.push({id:"image",text:this.locale.exportPanel.imageExport,"class":"bbi-dbrd-showDashboardMenu-Exportimage"}),t.EnablePdfExport&&this.designer.model.export.Pdf&&!r&&this.designer.model.widgetExportMenuSettings.showPDF&&f.push({id:"pdf",text:this.locale.exportPanel.pdfExport,"class":"bbi-dbrd-showDashboardMenu-ExportPdf"}),(t.EnableExcelExport&&this.designer.model.widgetExportMenuSettings.showExcel&&this.designer.model.export.Excel||r)&&f.push({id:"excel",text:this.locale.exportPanel.excelExport,"class":"bbi-dbrd-showControlMenu-ExportExcel"}),(t.EnableCsvExport&&this.designer.model.widgetExportMenuSettings.showCSV||r)&&f.push({id:"csv",text:this.locale.exportPanel.csvExport,"class":"bbi-dbrd-showControlMenu-ExportCSV"}),BoldBIDashboard.isNullOrUndefined(i)||this.designer.model.mode!==BoldBIDashboard.Designer.mode.view||(e=i.getJson(),this.designer._trigger("onExportRender",{exportOptionCollection:f,widgetId:e.UniqueId,isViewDataExport:r})),f)},n.prototype.populateMenuItems=function(n,t,i,r,u,f,e){var ft=this,w=this.designer.element.find("#"+this.designer._id+"_"+i),b="",k="",y=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(w),d=BoldBIDashboard.isNullOrUndefined(y)?null:y.getJson(),h,a,l,s,v,nt,tt,p,it,rt,ut,g;b=BoldBIDashboard.isNullOrUndefined(y)?"":y.Type;BoldBIDashboard.isNullOrUndefined(d)||BoldBIDashboard.isNullOrUndefined(d.ContainerSettings)||(k=d.ContainerSettings.Title);var et=t.length,c="",o=[];for(h=0;h<et;h++)if(a=t[h],o.push({id:a.id,text:a.text,parentId:null,sprite:a.class}),t[h].items)for(l=0;l<t[h].items.length;l++)o.push({id:t[h].items[l].id,text:t[h].items[l].text,parentId:a.id,sprite:t[h].items[l].class});c=e?i+"_ViewData":i;s=this.bbdesigner$("#"+this.id+"_"+c+"ConfigMenu");s.length===0?(v=BoldBIDashboard.buildTag("ul.bbi-designer-menu e-menu-dbrd-theme","",{},{id:this.id+"_"+c+"ConfigMenu"}),(u||r)&&(!u||!f||this.designer.isMobileLayout())||(nt=f?this.locale.exportPanel.exportWidgetTitle:this.locale.exportPanel.exportDashboardTitle,tt=BoldBIDashboard.buildTag("p.e-dbrd-showDashoardMenu-title",nt,{},{}),v.append(tt)),f||e||!u||this.designer.model.mode!==BoldBIDashboard.Designer.mode.view||this.designer._trigger("beforeControlMenuOpen",{widgetId:this.designer._id+"_"+i,dataWidgetId:w.attr("data-widget-id"),widgetType:b,header:k,isMobileView:this.designer.isMobileLayout(),menuItems:o,designerObj:this.designer}),this.designer.isMobileLayout()&&r&&this.beforeDashboardMobileMenuOpen(o),p=this.designer.bbdesigner$,o.length>0&&(v.BoldBIDashboardMenu({menuType:BoldBIDashboard.MenuType.ContextMenu,openOnClick:!1,container:"#"+n.attr("id"),subMenuDirection:r?"left":"right",width:r?"auto":"180",fields:{dataSource:o,id:"id",parentId:"parentId",text:"text",spriteCssClass:"sprite"},mouseover:function(n){if(n.element.classList.contains("e-haschild")){var t=p(n.element.parentElement);!BoldBIDashboard.isNullOrUndefined(t)&&t.offsetParent().width()-(t.position().left+t.width())<t.width()?this.setModel({subMenuDirection:"left"}):this.setModel({subMenuDirection:"right"})}},cssClass:"e-dbrd-export-menu-list",click:p.proxy(this.onExportMenuClick,this,u,i),close:p.proxy(this.onContextMenuClose,this)}),v.parents(".e-menu-wrap")&&v.parents(".e-menu-wrap").appendTo(this.designer.element))):u?(f&&!this.designer.isMobileLayout()?(s.remove(),this.populateMenuItems(n,t,i,r,u,f,e)):!f&&!this.designer.isMobileLayout()&&s.find(".e-dbrd-showDashoardMenu-title").length>0?(s.remove(),this.populateMenuItems(n,t,i,r,u,f,e)):(it=s.find(".e-dbrd-showDashoardMenu-title").css("display",this.getVisibilityOfTitle(u,r,f,e)),f||e||!u||this.designer.model.mode!==BoldBIDashboard.Designer.mode.view||this.designer._trigger("beforeControlMenuOpen",{widgetId:this.designer._id+"_"+i,dataWidgetId:w.attr("data-widget-id"),widgetType:b,header:k,isMobileView:this.designer.isMobileLayout(),menuItems:o,designerObj:this.designer}),rt=s.data("BoldBIDashboardMenu"),BoldBIDashboard.isNullOrUndefined(rt)||(this.updateEjMenuData(o,c,r),s.prepend(it))),s.parents(".e-menu-wrap")&&s.parents(".e-menu-wrap").appendTo(this.designer.element)):this.designer.isMobileLayout()&&r&&(this.beforeDashboardMobileMenuOpen(o),this.updateEjMenuData(o,c,r));ut=this.designer.element.find("#"+this.id+"_"+c+"ConfigMenu");g=this.designer.element.find(".bbi-dbrd-designcanvas-scroller");BoldBIDashboard.isNullOrUndefined(g)||g[0].addEventListener("scroll",function(){ft.closeMenuDialog(ut,i)})},n.prototype.closeMenuDialog=function(n,t){this.designer.element.find("#"+t+"_controlIcon_container").removeClass("e-contextmenu-open");n.hide();this.bbdesigner$("#widgetCommentModuleContainer").addClass("displayNone")},n.prototype.updateEjMenuData=function(n,t,i){var r=this.bbdesigner$("#"+this.id+"_"+t+"ConfigMenu"),u=r.data("BoldBIDashboardMenu");BoldBIDashboard.isNullOrUndefined(u)||(u.setModel({fields:{dataSource:n,width:i?"auto":"140"}}),r.parents(".e-menu-wrap").appendTo(this.designer.element))},n.prototype.beforeDashboardMobileMenuOpen=function(n){this.designer._trigger("beforeDashboardMobileMenuOpen",{menuItems:n,designerObj:this.designer})},n.prototype.onContextMenuClose=function(){this.designer.designerPanel.banner.bannerPanel.find(".e-dashboard-banner-smallMenu").removeClass("bbi-dashboarddesigner-active")},n.prototype.getVisibilityOfTitle=function(n,t,i,r){var u="none";return(!n&&!t||n&&i&&!this.designer.isMobileLayout()||r)&&(u="block"),u},n.prototype.onExportMenuClick=function(n,t,i){var h,r=null,l,p,f,o,w,b,u,e,a;if(i.ID=(h=i.ID)!==null&&h!==void 0?h:i.attr("id"),r=this.designer.element.find("#"+this.designer._id+"_"+t),n&&this.designer.model.mode===BoldBIDashboard.Designer.mode.view&&!BoldBIDashboard.isNullOrUndefined(i.events)){var v="",y="",s=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(r),c=BoldBIDashboard.isNullOrUndefined(s)?null:s.getJson();v=BoldBIDashboard.isNullOrUndefined(s)?"":s.Type;BoldBIDashboard.isNullOrUndefined(c)||BoldBIDashboard.isNullOrUndefined(c.ContainerSettings)||(y=c.ContainerSettings.Title);this.designer._trigger("onControlMenuClick",{widgetId:this.designer._id+"_"+t,dataWidgetId:r.attr("data-widget-id"),widgetType:v,header:y,menuItem:i,element:i.events.element,designerObj:this.designer})}if(i.ID!=="export"||BoldBIDashboard.isNullOrUndefined(n)||this.isMobileView){if(i.ID==="getlink"||i.ID==="dashboard-info")p=this.designer.designerPanel.getDesignProperty(),this.designer._trigger("onBannerIconClick",{target:this.bbdesigner$(i.event.currentTarget).find(".bbi-dashboard-banner-link"),event:i,dashboardPath:this.designer.model.dashboardPath,headertext:p.Header,name:i.ID});else if(i.ID==="favorite")f=this.bbdesigner$(i.event.currentTarget).find(".bbi-dashboard-banner-unfavorite"),o=f.parent(),f.length>0?(f.addClass("bbi-dashboard-banner-favorite").removeClass("bbi-dashboard-banner-unfavorite"),o.html(this.locale.banerPanel.markUnFavorieTooltip),o.append(f),this.designer._trigger("_onFavoriteStateChange",{event:event,isFavorite:!0}),this.designer.model._favoriteSettings.isFavorite=!0):(f=this.bbdesigner$(i.event.currentTarget).find(".bbi-dashboard-banner-favorite"),o=f.parent(),f.addClass("bbi-dashboard-banner-unfavorite").removeClass("bbi-dashboard-banner-favorite"),o.html(this.locale.banerPanel.markFavoriteTooltip),o.append(f),this.designer._trigger("_onFavoriteStateChange",{event:event,isFavorite:!1}),this.designer.model._favoriteSettings.isFavorite=!1);else if(i.ID==="refreshDashboard")this.designer.updateDashboard();else if(i.ID.startsWith("dashboardTheme_")&&i.parentId==="theme"){w=i.text;this.designer.designerPanel.banner.onBannerIconClickForTheme(i,w)}else if(i.ID==="viewData")b=this.designer.modules.viewDataDialog,b.showViewDataPopup(BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(r),!1,[],!1,!0);else if(i.ID==="maximize")this.designer.modules.maximize._showMaximizeView(BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(r));else if(i.ID==="filter")BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(r).clearFilter();else if(i.ID==="dashboardparameters")this.designer.modules.dynamicParameterPanel.renderDashboardParameterViewerDialog();else if(i.ID==="export"||i.ID==="image"||i.ID==="pdf"||i.ID==="csv"||i.ID==="excel"||i.ID==="e-dbrd-viewdata-export"){if(this.isMobileView=this.designer.isMobileLayout(),this.designer.triggerViewerEvent(ViewerEvent.actionBegin,ViewerEventType.exportDialogOpen,i.element,i),this.exportSettings=new ExportSettings,u="",n?(e=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(r).getContainerSettings(),this.designer.model.export.Image&&this.designer.model.widgetExportMenuSettings.showImage&&e.EnableImageExport?u="image":this.designer.model.export.Pdf&&this.designer.model.widgetExportMenuSettings.showPDF&&e.EnablePdfExport?u="pdf":this.designer.model.export.Excel&&this.designer.model.widgetExportMenuSettings.showExcel&&e.EnableExcelExport?u="excel":this.designer.model.widgetExportMenuSettings.showCSV&&e.EnableCsvExport&&(u="csv")):this.designer.model.export.Image&&this.designer.model.dashboardExportMenuSettings.showImage&&this.designer.model.dashboardExport.Image?u="image":this.designer.model.export.Pdf&&this.designer.model.dashboardExportMenuSettings.showPDF&&this.designer.model.dashboardExport.Pdf?u="pdf":this.designer.model.export.Excel&&this.designer.model.dashboardExportMenuSettings.showExcel&&this.designer.model.dashboardExport.Excel?u="excel":this.designer.model.export.Csv&&this.designer.model.dashboardExportMenuSettings.showCSV&&this.designer.model.dashboardExport.Csv&&(u="csv"),this.exportSettings.ExportType=i.ID==="e-dbrd-viewdata-export"&&this.isMobileView?"excel":i.ID==="export"&&this.isMobileView?u:i.ID,this.exportSettings.ExportDashboard=BoldBIDashboard.isNullOrUndefined(n)||!n,this.currentContainer=this.isMobileView?this.mobileExportingContainer:this.exportingContainer,!BoldBIDashboard.isNullOrUndefined(n)&&n&&(this.exportSettings.selectedWidgetId=t),a=this.exportSettings.ExportDashboard?this.designer.modules.serialization.dashboardPropertyJson.Name:this.getWidgetTitle(r),this.reportName=a,BoldBIDashboard.isNullOrUndefined(this.currentContainer)||this.resetDialog(),this.isMobileView)if(this.renderMobileExportDialog(this.exportSettings.ExportType),this.exportSettings.ExportDashboard){var k=this.designer.model.export.Image&&this.designer.model.dashboardExportMenuSettings.showImage&&this.designer.model.dashboardExport.Image,d=this.designer.model.export.Excel&&this.designer.model.dashboardExportMenuSettings.showExcel&&this.designer.model.dashboardExport.Excel,g=this.designer.model.export.Pdf&&this.designer.model.dashboardExportMenuSettings.showPDF&&this.designer.model.dashboardExport.Pdf,nt=this.designer.model.export.Csv&&this.designer.model.dashboardExportMenuSettings.showCSV&&this.designer.model.dashboardExport.Csv;this.showOrHideExportOptionsForWidget(k,d,g,nt)}else{var e=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(r).getContainerSettings(),tt=e.EnableImageExport&&this.designer.model.widgetExportMenuSettings.showImage&&this.designer.model.export.Image&&i.ID!=="e-dbrd-viewdata-export",it=e.EnableExcelExport&&this.designer.model.widgetExportMenuSettings.showExcel&&this.designer.model.export.Excel,rt=e.EnablePdfExport&&this.designer.model.widgetExportMenuSettings.showPDF&&this.designer.model.export.Pdf&&i.ID!=="e-dbrd-viewdata-export",ut=e.EnableCsvExport&&this.designer.model.widgetExportMenuSettings.showCSV;this.showOrHideExportOptionsForWidget(tt,it,rt,ut)}else this.renderExportDialog(this.exportSettings.ExportType);this.currentContainer=this.isMobileView?this.mobileExportingContainer:this.exportingContainer;this.currentContainer.find("#"+this.id+"_export_fileName").val(a);BoldBIDashboard.isNullOrUndefined(this.mobileExportingContainer)||BoldBIDashboard.isNullOrUndefined(this.exportingContainer)||this.getModifiedFieldsInCurrentDialog();this.isMobileView?(this.mobileDialog.open(),this.currentContainer.find("#"+this.id+"_export_fileName").blur(),this.updateScrollerHeight()):(this.dialogObj.setTitle(this.getTitle(this.exportSettings.ExportType)),this.dialogObj.open());this.updateExportSize(r);this.designer.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.exportDialogOpen,i.element,i)}}else l=this.bbdesigner$("#"+this.id+"_exportConfigMenu").data("BoldBIDashboardMenu"),BoldBIDashboard.isNullOrUndefined(l)||l.hide()},n.prototype.updateExportSize=function(n){var u,e,i,r;if(this.designer.model.IsEmbed&&!BoldBIDashboard.isNullOrUndefined(this.designer.model.isPinWidget)&&this.designer.model.isPinWidget&&!BoldBIDashboard.isNullOrUndefined(this.exportingContainer)&&(u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(n).shouldResizePinboardExportDialog(),!BoldBIDashboard.isNullOrUndefined(this.exportSettings)&&!BoldBIDashboard.isNullOrUndefined(this.exportSettings.ExportType)&&u)){var t=this.exportingContainer.attr("id"),o=this.designer.element.find("#"+t+"_wrapper").outerHeight(),f=this.designer.element.find("#"+t+"_wrapper").parent();BoldBIDashboard.isNullOrUndefined(f)||(e=this.bbdesigner$("#"+f.attr("id")).outerHeight(),i=e-(this.designer.element.find("#"+t+"_title").outerHeight()+this.designer.element.find("#"+t+"_foot").outerHeight()),this.designer.element.find("#"+t).css({"min-height":i-2+"px",height:i+"px"}));this.exportSettings.ExportType!=="csv"?this.designer.element.find("#"+t).css({overflow:"hidden scroll","scrollbar-width":"thin"}):(r=o-(this.designer.element.find("#"+t+"_title").outerHeight()+this.designer.element.find("#"+t+"_foot").outerHeight()),this.designer.element.find("#"+t).css({"min-height":r-2+"px",height:r+"px"}),this.designer.element.find("#"+t).css({overflow:"visible"}))}},n.prototype.getWidgetTitle=function(n){var i="",t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(n);return i=!BoldBIDashboard.isNullOrUndefined(t)&&BoldBIDashboard.Dashboard.WidgetHelper.isContainerWidget(t)?t.Name:t.getExportingWidgetTitle(n),i===""&&(i=t.getJson().ContainerSettings.Title),i},n.prototype.showOrHideExportOptionsForWidget=function(n,t,i,r){this.mobileExportingContainer.find(".bbi-dbrd-mobileExportImage").css("display",n?"block":"none");this.mobileExportingContainer.find(".bbi-dbrd-mobileExportExcel").css("display",t?"block":"none");this.mobileExportingContainer.find(".bbi-dbrd-mobileExportPdf").css("display",i?"block":"none");this.mobileExportingContainer.find(".bbi-dbrd-mobileExportCsv").css("display",r?"block":"none")},n.prototype.updateExportDialog=function(){var n;if(this.isMobileView=this.designer.isMobileLayout(),!BoldBIDashboard.isNullOrUndefined(this.exportingContainer)&&this.exportingContainer.is(":visible")||!BoldBIDashboard.isNullOrUndefined(this.mobileExportingContainer)&&this.mobileExportingContainer.is(":visible"))if(this.isMobileView){if(n="",!BoldBIDashboard.isNullOrUndefined(this.exportingContainer)&&this.exportingContainer.is(":visible")&&(n=this.exportingContainer.find("#"+this.id+"_export_fileName").val(),this.dialogObj.close()),this.renderMobileExportDialog(this.exportSettings.ExportType),this.exportSettings.ExportDashboard)this.showOrHideExportOptionsForWidget(!0,!0,!0,!1);else{var i=this.designer.element.find("#"+this.designer._id+"_"+this.exportSettings.selectedWidgetId),t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(i).getContainerSettings(),r=this.mobileExportingContainer.find(".bbi-dbrd-mobileExportImage").css("display")==="block",u=this.mobileExportingContainer.find(".bbi-dbrd-mobileExportPdf").css("display")==="block";this.showOrHideExportOptionsForWidget(r,t.EnableExcelExport,u,t.EnableCsvExport)}n!==""&&this.mobileExportingContainer.find("#"+this.id+"_export_fileName").val(n);BoldBIDashboard.isNullOrUndefined(this.mobileExportingContainer)||BoldBIDashboard.isNullOrUndefined(this.exportingContainer)||this.getModifiedFieldsInCurrentDialog();this.mobileDialog.open();this.updateScrollerHeight()}else!BoldBIDashboard.isNullOrUndefined(this.mobileExportingContainer)&&this.mobileExportingContainer.is(":visible")&&(this.mobileDialog.close(),this.renderExportDialog(this.exportSettings.ExportType),BoldBIDashboard.isNullOrUndefined(this.mobileExportingContainer)||BoldBIDashboard.isNullOrUndefined(this.exportingContainer)||this.getModifiedFieldsInCurrentDialog(),this.dialogObj.setTitle(this.getTitle(this.exportSettings.ExportType)),this.dialogObj.open())},n.prototype.getMenuWithSubMenuItems=function(n){var i=[],t=n.getJson(),r;return i=this.getRequiredMenuItems(n,t),r=this.designer.modules.containerTypeWidgetHelper.getContainerWidget(n),!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.isNullOrUndefined(t.ContainerSettings)&&t.ContainerSettings.ShowMaximize&&t.ContainerSettings.Bounds.ColumnSpan<5&&BoldBIDashboard.isNullOrUndefined(r)&&i.push({"class":"bbi-dbrd-maxim-menu",id:"maximize",text:this.locale.maximize.maximize}),!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.isNullOrUndefined(t.FilterSettings)&&t.FilterSettings.ActAsMasterWidget&&t.ContainerSettings.Bounds.ColumnSpan<5&&i.push({"class":"bbi-dbrd-filter-menu",id:"filter",text:this.locale.dataconfiguration.menuItems.measureFilterDisplayName}),i},n.prototype.exportingClickAction=function(){var r,u,t,i,n,f,e;BoldBIDashboard.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||(BoldBIDashboardDesigner.editManager.isExportAction=!0);this.currentContainer=this.isMobileView?this.mobileExportingContainer:this.exportingContainer;this.exportSettings.FileName=this.currentContainer.find("#"+this.id+"_export_fileName").val();this.exportSettings.ItemId=this.designer.model.itemId;this.exportSettings.ExportDashboard?this.exportSettings.ExportType!=="pdf"&&(this.exportSettings.widgetJson=this.widgetHelper.getAllWidgets()):this.exportSettings.widgetJson.push(BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designer.element.find("#"+this.designer._id+"_"+this.exportSettings.selectedWidgetId)));this.exportSettings.ExportDashboard?this.updateCurrentWidgetData():this.updateWidgetInstanceForWidgetExport();switch(this.exportSettings.ExportType){case"image":this.exportSettings.ExportDpi=this.currentContainer.find(".bbi-dbrd-export-resolution").val();r=this.currentContainer.find(".e-dbrd-export-format-dropdown").data("BoldBIDashboardDropDownList");this.exportSettings.ExportFormat=r.getSelectedValue();this.exportSettings.ExportDashboard?this.exportToImage():this.exportControlImage();break;case"excel":u=this.currentContainer.find(".e-dbrd-export-filetype-dropdown").data("BoldBIDashboardDropDownList");this.exportSettings.FileType=u.getSelectedValue();this.requestingExcelExport();break;case"csv":this.requestingCsvExport();break;case"pdf":if(this.exportSettings.Orientation=this.currentContainer.find(".e-dbrd-orientation-wrapper").attr("data-orientation"),this.exportSettings.ExportDashboard)if(this.exportSettings.isDashboardSelected=this.currentContainer.find(".e-dashboard-radio-btn").data("BoldBIDashboardRadioButton").model.checked,this.exportSettings.isDashboardSelected)this.exportSettings.widgetJson=this.widgetHelper.getAllWidgets();else if(t=this.currentContainer.find(".e-dbrd-export-widget-selection-dropdown").data("BoldBIDashboardDropDownList").model,i=t.selectedIndices,i.length>0)for(n=0;n<i.length;n++)f=t.dataSource[n],e=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.designer.element.find("#"+this.designer._id+"_"+f.UniqueColumnName)),this.exportSettings.widgetJson.push(e);else this.exportSettings.widgetJson=this.widgetHelper.getAllWidgets();this.exportSettings.PageSize=this.currentContainer.find(".e-dbrd-export-page-size-dropdown").val();this.exportSettings.ExportDashboard?this.exportToPdf():this.exportControlPdf()}},n.prototype.updateCurrentWidgetData=function(){var n=[],t=this.widgetHelper.getAllWidgets();BoldBIDashboard.isNullOrUndefined(t)||(t.forEach(function(t){t.getJson().ContainerSettings.CombineWidgetId===""||t.ControlContainer.hasClass("bbi-hide-qa-child-widget")?n.push(t):n.push(t)}),this.exportSettings.widgetJson=n)},n.prototype.updateWidgetInstanceForWidgetExport=function(){var n,t;!BoldBIDashboard.isNullOrUndefined(this.exportSettings)&&!BoldBIDashboard.isNullOrUndefined(this.exportSettings.widgetJson)&&this.exportSettings.widgetJson.length>0&&(n=this.exportSettings.widgetJson[0],BoldBIDashboard.Dashboard.WidgetHelper.isContainerWidget(n)&&this.designer.modules.containerTypeWidgetHelper.getWidgetAsContainerWidget(n).isQnAWidget&&(t=this.designer.modules.aiWidgetHelper.getChildWidget(n),BoldBIDashboard.isNullOrUndefined(t)||this.exportSettings.widgetJson.push(t)))},n.prototype.getWidgetSpecificInfo=function(){for(var n,r,i={},u=["Line","RichTextEditor","Image"],t=0;t<this.exportSettings.widgetJson.length;t++)n=this.exportSettings.widgetJson[t],r=u.indexOf(n.Type),r===-1&&this.isDataConfigured(n)&&(i[n.Name]=BoldBIDashboard.Dashboard.WidgetHelper.isDataWidget(n)?n.getWidgetSpecificInfoForExport():null);return i},n.prototype.isDataConfigured=function(n){var i,t;if(!BoldBIDashboard.isNullOrUndefined(n.DataGroupInfo)&&n.DataGroupInfo.FieldContainers.length>0){for(i=!0,t=0;t<n.DataGroupInfo.FieldContainers.length;t++)if(n.dataGroupInfo.FieldContainers[t].FieldInfos.length===0)i=!1;else return!0;return i}return!1},n.prototype.getDashboardRadioButton=function(){var n=BoldBIDashboard.buildTag("div.bbi-dashboard-row","",{},{id:this.id+"_dashboardSelectionRow_table"}),t=BoldBIDashboard.buildTag("input.e-dashboard-radio-btn","",{},{type:"radio",id:this.id+"_dashboardData"}),i=BoldBIDashboard.buildTag("label.e-advance-panel-condition-label",this.locale.exportPanel.dashboardOption,{"font-color":"#303541"},{"for":this.id+"_dashboardLabelData",type:"label"});return n.append(t,i)},n.prototype.getWidgetsRadioButton=function(){var n=BoldBIDashboard.buildTag("div.bbi-widget-row","",{"padding-left":this.isMobileView?"5px":"0px","padding-top":this.isMobileView?"1px":"0px"},{id:this.id+"_widgetSelectionRow_table"}),t=BoldBIDashboard.buildTag("input.e-widget-radio-btn","",{},{type:"radio",id:this.id+"_widgetData"}),i=BoldBIDashboard.buildTag("label.e-advance-panel-condition-label",this.locale.exportPanel.widgetOption,{"font-color":"#303541"},{"for":this.id+"_widgetLabelData",type:"label"});return n.append(t,i),n},n.prototype.getMultiSelectionCombobox=function(){var n=BoldBIDashboard.buildTag("div.bbi-dbrd-widget-dropdown-wrapper","",{"margin-left":this.isMobileView?"0%":"11%","margin-top":this.isMobileView?"9px":"0px","margin-right":this.isMobileView?"20px":"0px"},{id:this.id+"_widget_selection_dropdown_wrapper"}),t=BoldBIDashboard.buildTag("input.e-dbrd-export-widget-selection-dropdown bbi-dbrd-viewer-exportImageField","",{},{id:this.id+"_export_widget_selection_dropdown"});return n.append(t),n},n.prototype.getPageSizeOrientationWrapper=function(){var n=BoldBIDashboard.buildTag("div.bbi-dbrd-export-image-export-wrapper","",{},{id:this.id+"_pageSize_orientation_wrapper"}),t=BoldBIDashboard.buildTag("div.bbi-dbrd-export-image-format bbi-dbrd-export-pdf-page-size-wrapper","",{}),f=BoldBIDashboard.buildTag("div.bbi-brd-inactive-left",this.locale.exportPanel.pageSize),i=BoldBIDashboard.buildTag("div.bbi-dbrd-export-image-dropdown"),e=BoldBIDashboard.buildTag("input.e-dbrd-export-page-size-dropdown bbi-dbrd-viewer-exportImageField","",{},{id:this.id+"_export_page_size_dropdown"});i.append(e);t.append(f,i);var r=BoldBIDashboard.buildTag("div.bbi-dbrd-export-image-resolutionWrapper","",{}),o=BoldBIDashboard.buildTag("div.bbi-brd-inactive-left",this.locale.exportPanel.orientation),u=BoldBIDashboard.buildTag("div.bbi-dbrd-export-image-dropdown e-dbrd-orientation-wrapper","",{},{"data-orientation":this.locale.exportPanel.landscape});return this.updateOrientationOption(u),r.append(o,u),n.append(t,r),n},n.prototype.updateOrientationOption=function(n,t){var u,r,i,o,f,e;t===void 0&&(t=!1);t?(r=this.currentContainer.find(".bbi-dbrd-pdfOrientation-for-portrait"),i=this.currentContainer.find(".bbi-dbrd-pdfOrientation-for-landscape")):(r=BoldBIDashboard.buildTag("div.bbi-dbrd-pdfOrientation-for-portrait bbi-dbrd-icon-background-theme bbi-dbrd-designer-hoverable","",{},{"data-tooltip":this.locale.exportPanel.portrait}),i=BoldBIDashboard.buildTag("div.bbi-dbrd-pdfOrientation-for-landscape bbi-dbrd-icon-background-theme bbi-dbrd-designer-hoverable","",{},{"data-tooltip":this.locale.exportPanel.landscape}),(n.find(".bbi-dbrd-pdfOrientation-for-landscape").length>0||n.find(".bbi-dbrd-pdfOrientation-for-portrait").length>0)&&(n.find(".bbi-dbrd-pdfOrientation-for-portrait").remove(),n.find(".bbi-dbrd-pdfOrientation-for-landscape").remove()));o=this.exportSettings.ExportDashboard;o?(f=this.designer.modules.serialization.dashboardPropertyJson.DashboardExport.PdfOrientation,u=BoldBIDashboard.isNullOrUndefined(f)?PdfPageOrientation.Both:f):(e=this.widgetInstance.getContainerSettings(),u=BoldBIDashboard.isNullOrUndefined(e.PdfOrientation)?PdfPageOrientation.Both:e.PdfOrientation);switch(u){case PdfPageOrientation.LandScape:n.append(i);i.addClass(this.selectionForPdfOrientation()).removeClass("bbi-dbrd-icon-background-theme");break;case PdfPageOrientation.Portrait:n.append(r);r.addClass(this.selectionForPdfOrientation()).removeClass("bbi-dbrd-icon-background-theme");break;case PdfPageOrientation.Both:n.append(r,i);r.removeClass(this.selectionForPdfOrientation()).addClass("bbi-dbrd-icon-background-theme");i.addClass(this.selectionForPdfOrientation()).removeClass("bbi-dbrd-icon-background-theme");i.parent().attr("data-orientation","Landscape")}},n.prototype.orientationSelectionChange=function(n){this.currentContainer=this.isMobileView?this.mobileExportingContainer:this.exportingContainer;var t=this.currentContainer.find(".bbi-dbrd-pdfOrientation-for-portrait"),i=this.currentContainer.find(".bbi-dbrd-pdfOrientation-for-landscape");t.length>0&&i.length>0&&(this.bbdesigner$(n.currentTarget).hasClass("bbi-dbrd-pdfOrientation-for-landscape")?(t.removeClass(this.selectionForPdfOrientation()).addClass("bbi-dbrd-icon-background-theme"),i.addClass(this.selectionForPdfOrientation()).removeClass("bbi-dbrd-icon-background-theme"),this.bbdesigner$(n.currentTarget).parent().attr("data-orientation",this.locale.exportPanel.landscape)):(i.removeClass(this.selectionForPdfOrientation()).addClass("bbi-dbrd-icon-background-theme"),t.addClass(this.selectionForPdfOrientation()).removeClass("bbi-dbrd-icon-background-theme"),this.bbdesigner$(n.currentTarget).parent().attr("data-orientation",this.locale.exportPanel.portrait)))},n.prototype.selectionForPdfOrientation=function(){return this.isMobileView?"bbi-mobile-export-selection":"e-selected"},n.prototype.exportOptionSelectionChange=function(n){var t=this.bbdesigner$(n.currentTarget);this.exportSettings.ExportType=t.hasClass("bbi-dbrd-mobileExportImage")?"image":t.hasClass("bbi-dbrd-mobileExportPdf")?"pdf":t.hasClass("bbi-dbrd-mobileExportExcel")?"excel":"csv";this.updateExportDialogElements(this.exportSettings.ExportType)},n.prototype.dialogClose=function(){this.designer.triggerViewerEvent(ViewerEvent.actionBegin,ViewerEventType.exportDialogClose);BoldBIDashboard.isNullOrUndefined(this.dialogObj)||this.dialogObj.close();BoldBIDashboard.isNullOrUndefined(this.mobileDialog)||this.mobileDialog.close();this.designer.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.exportDialogClose)},n.prototype.triggerTooltip=function(n){n.preventDefault();this.designer.showTooltip(n)},n.prototype.wiredEvents=function(){this.currentContainer.find(".bbi-dbrd-export-file-input").on("focusout",this.bbdesigner$.proxy(this.onFileNameChange,this));this.currentContainer.find(".bbi-dbrd-export-file-input").on("keyup",this.bbdesigner$.proxy(this.onFileNameChange,this));if(this.isMobileView){this.mobileExportingContainer.find(".bbi-dbrd-mobileExportImage").on("click",this.bbdesigner$.proxy(this.exportOptionSelectionChange,this));this.mobileExportingContainer.find(".bbi-dbrd-mobileExportPdf").on("click",this.bbdesigner$.proxy(this.exportOptionSelectionChange,this));this.mobileExportingContainer.find(".bbi-dbrd-mobileExportExcel").on("click",this.bbdesigner$.proxy(this.exportOptionSelectionChange,this));this.mobileExportingContainer.find(".bbi-dbrd-mobileExportCsv").on("click",this.bbdesigner$.proxy(this.exportOptionSelectionChange,this));this.mobileExportingContainer.find(".bbi-dbrd-designer-hoverable").on("tap",this.bbdesigner$.proxy(this.triggerTooltip,this))}else this.footerTag.find(".bbi-dbrd-export-reset").on("click",this.bbdesigner$.proxy(this.resetDialog,this));this.currentContainer.find(".bbi-dbrd-export-resolution").on("focusout",this.bbdesigner$.proxy(this.onValueChange,this));this.currentContainer.find(".bbi-dbrd-export-resolution").on("keyup",this.bbdesigner$.proxy(this.onValueChange,this));this.currentContainer.find(".bbi-dbrd-pdfOrientation-for-portrait").on("click",this.bbdesigner$.proxy(this.orientationSelectionChange,this));this.currentContainer.find(".bbi-dbrd-pdfOrientation-for-landscape").on("click",this.bbdesigner$.proxy(this.orientationSelectionChange,this))},n.prototype.unwiredEvents=function(){this.currentContainer.find(".bbi-dbrd-export-file-input").off("focusout",this.bbdesigner$.proxy(this.onFileNameChange,this));this.currentContainer.find(".bbi-dbrd-export-file-input").off("keyup",this.bbdesigner$.proxy(this.onFileNameChange,this));this.isMobileView?(this.mobileExportingContainer.find(".bbi-dbrd-mobileExportImage").off("click",this.bbdesigner$.proxy(this.exportOptionSelectionChange,this)),this.mobileExportingContainer.find(".bbi-dbrd-mobileExportPdf").off("click",this.bbdesigner$.proxy(this.exportOptionSelectionChange,this)),this.mobileExportingContainer.find(".bbi-dbrd-mobileExportExcel").off("click",this.bbdesigner$.proxy(this.exportOptionSelectionChange,this)),this.mobileExportingContainer.find(".bbi-dbrd-mobileExportCsv").off("click",this.bbdesigner$.proxy(this.exportOptionSelectionChange,this)),this.mobileExportingContainer.find(".bbi-dbrd-designer-hoverable").off("tap",this.bbdesigner$.proxy(this.triggerTooltip,this))):this.footerTag.find(".bbi-dbrd-export-reset").off("click",this.bbdesigner$.proxy(this.resetDialog,this));this.currentContainer.find(".bbi-dbrd-export-resolution").off("focusout",this.bbdesigner$.proxy(this.onValueChange,this));this.currentContainer.find(".bbi-dbrd-export-resolution").off("keyup",this.bbdesigner$.proxy(this.onValueChange,this));this.currentContainer.find(".bbi-dbrd-pdfOrientation-for-portrait").off("click",this.bbdesigner$.proxy(this.orientationSelectionChange,this));this.currentContainer.find(".bbi-dbrd-pdfOrientation-for-landscape").off("click",this.bbdesigner$.proxy(this.orientationSelectionChange,this))},n.prototype.destroy=function(){this.unwiredEvents()},n.prototype.exportToPdf=function(){BoldBIDashboard.isNullOrUndefined(this.exportSettings)||(this.showExportingPopupNotification(),this.exportSettings.itemName=this.currentContainer.find(".bbi-dbrd-export-file-input").val(),this.requestingPdfExport())},n.prototype.exportToImage=function(){BoldBIDashboard.isNullOrUndefined(this.exportSettings)||(this.showExportingPopupNotification(),this.exportSettings.itemName=this.currentContainer.find(".bbi-dbrd-export-file-input").val(),this.requestingImageExport())},n.prototype.exportControlPdf=function(){BoldBIDashboard.isNullOrUndefined(this.exportSettings)||(this.showExportingPopupNotification(),this.exportSettings.itemName=this.currentContainer.find(".bbi-dbrd-export-file-input").val(),this.requestingPdfExport())},n.prototype.showExportingPopupNotification=function(){var t;if(BoldBIDashboard.isNullOrUndefined(this.dialogObj)||this.dialogObj.close(),BoldBIDashboard.isNullOrUndefined(this.mobileDialog)||this.mobileDialog.close(),this.designer.element.find(".bbi-exportpopup").length===0&&this.exportSettings.widgetJson.length>0&&(this.exportPopupNotification=BoldBIDashboard.buildTag("div.bbi-exportpopup ","",{"z-index":BoldBIDashboard.getMaxZindex()+1},{}),this.designer.element.append(this.exportPopupNotification)),this.exportSettings.widgetJson.length!==0){var f=this.waitingExportPopupTemplate(),i=this.triggerActionForExportNotification(f,NotificationStatus.Exporting,""),n=i[0],e=i[1],r=parseInt(n.toastHeight,10),u=parseInt(n.toastWidth,10);e||(t=new ejdashboard.notifications.Toast({content:n.popupTemplate,target:"#"+this.designer._id,position:this.designer.isMobileLayout()?{X:"right",Y:"bottom"}:{X:"right",Y:"top"},icon:"e-toast-successIcon",timeOut:3500,cssClass:"bbi-successPopup",showCloseButton:!0,width:u>650?"650px":u+"px",height:r>128?"128px":r+"px"}),this.validateToastCount(),t.appendTo(this.exportPopupNotification[0]),t.show())}},n.prototype.validateToastCount=function(){var i=this.designer.isMobileLayout()?3:8,n=this.designer.element.find(".bbi-exportpopup")[0],t;!BoldBIDashboard.isNullOrUndefined(n)&&n.childElementCount>=i&&(t=ejdashboard.base.getComponent(this.exportPopupNotification[0],"toast"),t.destroy())},n.prototype.waitingExportPopupTemplate=function(){return'<div class="e-toast-successPopup-content"><p>'+this.locale.alertWindowMesages.exportingContent+"<\/p><\/div>"},n.prototype.exportingErrorPopupTemplate=function(n){var t=n?"<p>"+this.locale.errorMessage.exportRestrictContent:"<p>"+this.locale.errorMessage.exportFailedContent,i=n?"<\/p>":'<a class="bbi-toast-exportingErrorDetails" href = "javascript:void(0)">'+this.locale.scrollableLayout.knowmore+"<\/a><\/p>";return'<div class="e-toast-exportingErrorPopupContent">'+t+i+"<\/div>"},n.prototype.addWidgetsForCombineWidgetExport=function(n,t){var u=this,r="",i="";if(this.designer.isViewMode()){if(BoldBIDashboard.isNullOrUndefined(n.ViewerTimeCache)||BoldBIDashboard.isNullOrUndefined(n.ViewerTimeCache.uniqueId)||n.ViewerTimeCache.uniqueId==="")return;r=n.ViewerTimeCache.uniqueId}else{if(BoldBIDashboard.isNullOrUndefined(n.DesignTimeCache)||BoldBIDashboard.isNullOrUndefined(n.DesignTimeCache.uniqueId)||n.DesignTimeCache.uniqueId==="")return;r=n.DesignTimeCache.uniqueId}this.widgetHelper.getAllWidgets().filter(function(n){BoldBIDashboard.isNullOrUndefined(n.getContainerSettings().CombineWidgetId)||n.getContainerSettings().CombineWidgetId===""||(n.getContainerSettings().CombineWidgetId===r||i!==""&&n.getContainerSettings().CombineWidgetId===i)&&u.designer.modules.widgetCache.filter(function(r){r.Name===n.getJson().UniqueName&&(t.push(r),BoldBIDashboard.isNullOrUndefined(r.ViewerTimeCache)||BoldBIDashboard.isNullOrUndefined(r.ViewerTimeCache.uniqueId)?BoldBIDashboard.isNullOrUndefined(r.DesignTimeCache)||BoldBIDashboard.isNullOrUndefined(r.DesignTimeCache.uniqueId)||(i=r.DesignTimeCache.uniqueId):i=r.ViewerTimeCache.uniqueId)})})},n.prototype.exportControlImage=function(){BoldBIDashboard.isNullOrUndefined(this.exportSettings)||(this.showExportingPopupNotification(),this.exportSettings.itemName=this.currentContainer.find(".bbi-dbrd-export-file-input").val(),this.requestingImageExport())},n.prototype.downloadPdf=function(n,t,i){var f;if(i===void 0&&(i=null),BoldBIDashboard.isNullOrUndefined(i)||i.preventDefault(),!BoldBIDashboard.isNullOrUndefined(n)&&n.Status){var e=n.Data.Path,u=".pdf",r=n.Data.Name+u;(BoldBIDashboard.isNullOrUndefined(r)||r==="")&&(r=this.reportName+u);(BoldBIDashboard.isNullOrUndefined(t)||!t)&&this.exportingSuccessPopupNotification(n,u);f=JSON.stringify({filePath:e,fileName:r});this.downloadFile(BoldBIDashboard.Dashboard.ServiceAPI.downloadpdf,f,r)}else this.exportingErrorPopupNotification(n)},n.prototype.showExportingErrorDetails=function(n){var t,i;n.preventDefault();t=this.bbdesigner$(n.target).parents(".e-toast.bbi-errorPopup");BoldBIDashboard.isNullOrUndefined(t)||(i=t.data("error-data"),t.remove(),this.designer.modules.util.alertDialog(this.locale.alertDialogTitle.dashboardDesigner,this.locale.errorMessage.exportFail,IconType.errors,AlertType.Alert,!0,i))},n.prototype.triggerActionForExportNotification=function(n,t,i){var r=!1,u;this.designer.element.find(".bbi-viewdata-dialog").is(":visible")&&(r=!0);u=!1;BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(this.exportSettings.selectedWidgetId)||r||(u=!0);var f={popupTemplate:n,toastWidth:"559px",toastHeight:"64px"},e=this.designer._trigger("beforeExportNotification",{content:f,notificationStatus:t,exportType:this.exportSettings.ExportType,isUnderlyingDataExport:r,isWidgetExport:u,errorDetails:i,isDashboardExport:this.exportSettings.ExportDashboard,exportProperties:this.exportSettings});return[f,e]},n.prototype.exportingErrorPopupNotification=function(n,t){var f=this.designer.element.find(".e-toast.bbi-successPopup"),i,u;BoldBIDashboard.isNullOrUndefined(f)||f.remove();var h=this.exportingErrorPopupTemplate(t),e=this.triggerActionForExportNotification(h,NotificationStatus.Failure,n===null||n===void 0?void 0:n.Message),r=e[0],c=e[1],o=parseInt(r.toastHeight,10),s=parseInt(r.toastWidth,10);if(!c){i=new ejdashboard.notifications.Toast({content:r.popupTemplate,target:"#"+this.designer._id,position:this.designer.isMobileLayout()?{X:"right",Y:"bottom"}:{X:"right",Y:"top"},icon:"e-toast-errorIcon",timeOut:0,cssClass:"bbi-errorPopup",showCloseButton:!0,width:s>650?"650px":s+"px",height:o>128?"128px":o+"px"});this.validateToastCount();i.appendTo(this.exportPopupNotification[0]);i.show();u=this.bbdesigner$(i.toastEle).data("error-data",n===null||n===void 0?void 0:n.Message).find(".bbi-toast-exportingErrorDetails");u.off("click",this.bbdesigner$.proxy(this.showExportingErrorDetails,this));u.on("click",this.bbdesigner$.proxy(this.showExportingErrorDetails,this))}},n.prototype.downloadImage=function(n,t,i){var f;if(i===void 0&&(i=null),BoldBIDashboard.isNullOrUndefined(i)||i.preventDefault(),!BoldBIDashboard.isNullOrUndefined(n)&&n.Status){var e=n.Data.Path,u="."+n.Data.Format,r=n.Data.Name+u;(BoldBIDashboard.isNullOrUndefined(r)||r==="")&&(r=this.reportName+u);(BoldBIDashboard.isNullOrUndefined(t)||!t)&&this.exportingSuccessPopupNotification(n,u);f=JSON.stringify({filePath:e,fileName:r,imageType:n.Data.Format});this.downloadFile(BoldBIDashboard.Dashboard.ServiceAPI.downloadimage,f,r)}else this.exportingErrorPopupNotification(n)},n.prototype.captureExportedFile=function(n,t,i,r){var s,h;if(r===void 0&&(r=null),BoldBIDashboard.isNullOrUndefined(r)||r.preventDefault(),!BoldBIDashboard.isNullOrUndefined(t)&&t.Status){var c=this.getWidgetSpecificInfo(),u=Object.keys(c),o=n.FileType==="xlsx"?".xlsx":".xls",e=n.ExportType==="csv",l=n.ExportDashboard&&n.ExportType==="csv",a=e?n.ExportDashboard&&!BoldBIDashboard.isNullOrUndefined(u)&&u.length>1?t.Data+".zip":t.Data+".csv":t.Data+o,f=e?n.FileName:n.FileName+o;this.designer.triggerViewerEvent(ViewerEvent.actionBegin,ViewerEventType.exportCompleted,undefined,f);(BoldBIDashboard.isNullOrUndefined(i)||!i)&&this.exportingSuccessPopupNotification(t,e?n.ExportDashboard&&!BoldBIDashboard.isNullOrUndefined(u)&&u.length>1?".zip":"."+n.ExportType:"."+n.FileType,n);s=JSON.stringify({filePath:a,fileName:f});h=e?BoldBIDashboard.Dashboard.ServiceAPI.downloadcsv:BoldBIDashboard.Dashboard.ServiceAPI.downloadexcel;this.downloadFile(h,s,e?l&&!BoldBIDashboard.isNullOrUndefined(u)&&u.length>1?f:f+".csv":f);this.designer.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.exportCompleted,undefined,f)}else this.exportingErrorPopupNotification(t)},n.prototype.exportingSuccessPopupTemplate=function(n){return'<div class="bbi-toast-exportingSuccessPopupContent"><p>'+n+" "+this.locale.alertWindowMesages.exportingSuccessContent+' <a class="bbi-toast-exportingSuccessDetails" href="javascript:void(0)"> '+this.locale.alertWindowMesages.exportingSuccessClick+"<\/a>"+this.locale.alertWindowMesages.exportingSuccessEndContent+"<\/p><\/div>"},n.prototype.exportingSuccessPopupNotification=function(n,t,i){var c=BoldBIDashboard.isNullOrUndefined(i)?n.Data.Name+t:i.FileName+t,e=null,u,r;e=this.exportingSuccessPopupTemplate(c);var o=this.triggerActionForExportNotification(e,NotificationStatus.Success,""),f=o[0],l=o[1],s=parseInt(f.toastHeight,10),h=parseInt(f.toastWidth,10);if(!l){u=new ejdashboard.notifications.Toast({content:f.popupTemplate,target:"#"+this.designer._id,position:this.designer.isMobileLayout()?{X:"right",Y:"bottom"}:{X:"right",Y:"top"},icon:"e-toast-successIcon",timeOut:0,cssClass:"bbi-successPopup",showCloseButton:!0,width:h>650?"650px":h+"px",height:s>128?"128px":s+"px"});this.validateToastCount();u.appendTo(this.exportPopupNotification[0]);u.show();r=this.bbdesigner$(u.toastEle).find(".bbi-toast-exportingSuccessDetails");switch(t){case".pdf":r.off("click",this.bbdesigner$.proxy(this.downloadPdf,this,n,!0));r.on("click",this.bbdesigner$.proxy(this.downloadPdf,this,n,!0));break;case".jpg":case".png":r.off("click",this.bbdesigner$.proxy(this.downloadImage,this,n,!0));r.on("click",this.bbdesigner$.proxy(this.downloadImage,this,n,!0));break;case".csv":r.off("click",this.bbdesigner$.proxy(this.captureExportedFile,this,i,n,!0));r.on("click",this.bbdesigner$.proxy(this.captureExportedFile,this,i,n,!0));break;case".xls":case".xlsx":r.off("click",this.bbdesigner$.proxy(this.captureExportedFile,this,i,n,!0));r.on("click",this.bbdesigner$.proxy(this.captureExportedFile,this,i,n,!0));break;case".zip":r.off("click",this.bbdesigner$.proxy(this.captureExportedFile,this,i,n,!0));r.on("click",this.bbdesigner$.proxy(this.captureExportedFile,this,i,n,!0))}}},n.prototype.downloadFile=function(n,t,i){var r=new XMLHttpRequest;r.responseType="blob";r.open("GET",this.designer.model.serviceUrl+n+"?arguments="+encodeURIComponent(t));r.setRequestHeader("Content-type","application/json; charset=utf-8");BoldBIDashboard.isNullOrUndefined(this.designer.model.serverUrl)||this.designer.model.serverUrl.trim()===""||r.setRequestHeader("Caller",this.designer.model.serverUrl);BoldBIDashboard.isNullOrUndefined(this.designer.model.serviceAuthorizationToken)||this.designer.model.serviceAuthorizationToken.trim()===""||r.setRequestHeader("Authorization",this.designer.model.serviceAuthorizationToken);BoldBIDashboard.isNullOrUndefined(this.designer.model.itemId)||this.designer.model.itemId===""||r.setRequestHeader("ClientID",this.designer.model.itemId);BoldBIDashboard.isNullOrUndefined(this.designer.model.environment)||this.designer.model.environment===""||r.setRequestHeader("Environment",this.designer.model.environment);this.designer.isViewMode()&&!BoldBIDashboard.isNullOrUndefined(this.designer.model.dashboardSettings)&&(BoldBIDashboard.isNullOrUndefined(this.designer.model.dashboardSettings.isMultiTab)||r.setRequestHeader("ismultitab",String(this.designer.model.dashboardSettings.isMultiTab)),BoldBIDashboard.isNullOrUndefined(this.designer.model.dashboardSettings.parentId)||r.setRequestHeader("parentid",this.designer.model.dashboardSettings.parentId));r.setRequestHeader("IsPublic",String(this.designer.model._isPublic));r.onload=function(){var t=window.URL.createObjectURL(this.response),n=document.createElement("a");document.body.appendChild(n);n.href=t;n.download=i;n.click();n.remove()};r.send()},n.prototype.updateWidgetInfo=function(n){var r,t;if(this.exportSettings.isDashboardSelected)n.Widgets=n.WidgetData,n.MasterFilterInfo=n.MasterFilterAction;else{var u=this.currentContainer.find(".e-dbrd-export-widget-selection-dropdown").data("BoldBIDashboardDropDownList"),i=[],f=[];for(i=u.getSelectedItemsID(),u.getSelectedItemsID().length===0&&u.model.dataSource.filter(function(n){return i.push(n.UniqueColumnName)}),r=0;r<i.length;r++)for(t=0;t<n.WidgetData.length;t++)if(n.WidgetData[t].UniqueName===i[r]){f.push(n.WidgetData[t]);break}n.Widgets=f;n.MasterFilterInfo=n.MasterFilterAction}return n},n.prototype.updateDashboardProperties=function(n){return n.DashboardProperties=[this.designer.modules.serialization.dashboardPropertyJson],n},n.prototype.checkAppliedFilters=function(n){if(n){var t=this.designer.designerPanel.banner.filterConfiguration.getAllWidgetSelectedValues();this.showAppliedFilters=t.length>0}else this.showAppliedFilters=!1},n.prototype.getWidgetInfoForControlExport=function(){for(var i=[],t=this.designer.modules.widgetCache,n=0;n<t.length;n++)if(t[n].Name===this.exportSettings.selectedWidgetId){i.push(t[n]);this.addWidgetsForCombineWidgetExport(t[n],i);break}return i},n.prototype.getErrMsgContent=function(){var n={};return n.Message=this.locale.exportPanel.apiExportErrMsg,n},n.prototype.getNotConfiguredNotifyMsg=function(){BoldBIDashboard.isNullOrUndefined(this.dialogObj)||this.dialogObj.close();BoldBIDashboard.isNullOrUndefined(this.mobileDialog)||this.mobileDialog.close();var n=this.locale.exportPanel.widgetDataNotConfigured;this.designer.modules.util.alertDialog(this.locale.alertDialogTitle.dashboardDesigner,n,IconType.information,AlertType.Alert,!1,"")},n.prototype.getEmptyDashboardNotifyMsg=function(){BoldBIDashboard.isNullOrUndefined(this.dialogObj)||this.dialogObj.close();BoldBIDashboard.isNullOrUndefined(this.mobileDialog)||this.mobileDialog.close();var n=this.locale.exportPanel.emptyDashboard;this.designer.modules.util.alertDialog(this.locale.alertDialogTitle.dashboardDesigner,n,IconType.information,AlertType.Alert,!1,"")},n.prototype.getWidgetJsonForControlExport=function(n){var t=this,i;BoldBIDashboard.isNullOrUndefined(n)||(i=this.widgetHelper.getAllWidgets(),i.forEach(function(i){i.widgetJson.ContainerSettings.Title.toLowerCase()===n.toLowerCase()&&(t.exportSettings.selectedWidgetId=i.Name,t.exportSettings.widgetJson.push(BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(t.designer.element.find("#"+t.designer._id+"_"+t.exportSettings.selectedWidgetId))))}))},n.prototype.processExportDashboardAsPdf=function(n,t,i,r){this.exportSettings=new ExportSettings;this.exportSettings.FileName=n;this.exportSettings.PageSize=t;this.exportSettings.Orientation=i;this.exportSettings.widgetJson=this.widgetHelper.getAllWidgets();this.exportSettings.isDashboardSelected=!0;this.exportSettings.ExportDashboard=!0;this.showExportingPopupNotification();this.checkAppliedFilters(BoldBIDashboard.isNullOrUndefined(r)?!0:r);this.requestingPdfExport()},n.prototype.processExportWidgetAsPdf=function(n,t,i,r,u){this.exportSettings=new ExportSettings;this.exportSettings.FileName=t;this.exportSettings.PageSize=i;this.exportSettings.Orientation=r;this.getWidgetJsonForControlExport(n);this.exportSettings.isDashboardSelected=!0;this.exportSettings.ExportDashboard=!1;this.showExportingPopupNotification();this.checkAppliedFilters(BoldBIDashboard.isNullOrUndefined(u)?!0:u);this.requestingPdfExport()},n.prototype.requestingPdfExport=function(){var e,t,o,a,s,r,u,i,n;if(this.exportSettings.widgetJson.length>0){if(this.designer.triggerViewerEvent(ViewerEvent.actionBegin,ViewerEventType.exporting,undefined,this.exportSettings),e=this.exportSettings.ExportDashboard,t=this.designer.rdlParser,t.rdlJsonObj=this.updateWidgetInfo(t.rdlJsonObj),t.rdlJsonObj=this.updateDashboardProperties(t.rdlJsonObj),o=this.bbdesigner$.extend(!0,{},t),o.rdlJsonObj.DataSources=[],o.rdlJsonObj.ColorSets=[],a=this.designer.designerPanel.banner.filterConfiguration.getAllWidgetSelectedValues(),s=[],!BoldBIDashboard.isNullOrUndefined(this.currentContainer))for(r=this.currentContainer.find(".e-dbrd-export-widget-selection-dropdown").data("BoldBIDashboardDropDownList"),u=[],this.exportSettings.isDashboardSelected||BoldBIDashboard.isNullOrUndefined(r)||(r.getSelectedItemsID().length===0?r.model.dataSource.filter(function(n){return u.push(n.UniqueColumnName)}):u=r.getSelectedItemsID()),i=0;i<u.length;i++)for(n=0;n<this.designer.widgetCacheCollection.length;n++)if(this.designer.widgetCacheCollection[n].Name===u[i]){s.push(this.designer.widgetCacheCollection[n]);this.addWidgetsForCombineWidgetExport(this.designer.widgetCacheCollection[n],s);break}var w=this.designer.modules.widgetCache.filter(function(n){return n.Name.includes("BingMap")}).length>0,v={},f=this.widgetHelper.getAllCustomWidgets(),h=this.exportSettings.widgetJson,b=f.length>0;for(i=0;i<h.length;i++)if(h[i].Type==="CustomWidget")for(n=0;n<f.length;n++)h[i].name===f[n].name&&(BoldBIDashboard.isNullOrUndefined(f[n].customWidgetObj.model.exportParameters)||(v[h[i].name]=f[n].customWidgetObj.model.exportParameters));this.designer.modules.containerTypeWidgetHelper.updateCacheForContainerWidgets();var y=this.exportSettings.isDashboardSelected?this.designer.modules.widgetCache:s,p=this.getVirtualWidget(),c=(new Date).getTime(),l=JSON.stringify({dashboardPath:this.designer.model.dashboardPath,reportName:e?this.designer.modules.serialization.dashboardPropertyJson.Name:this.exportSettings.selectedWidgetId,itemId:this.designer.model.itemId,hasWidgetItems:this.exportSettings.isDashboardSelected?!BoldBIDashboard.isNullOrUndefined(t.rdlJsonObj.WidgetData)&&t.rdlJsonObj.WidgetData.length!==0&&t.rdlJsonObj.WidgetData.length===y.length:!BoldBIDashboard.isNullOrUndefined(t.rdlJsonObj.WidgetData)&&t.rdlJsonObj.WidgetData.length!==0,layoutString:JSON.stringify(o.rdlJsonObj),widgetString:JSON.stringify(e?y:this.getWidgetInfoForControlExport()),selectedWidgetID:!this.currentPageExportCheckbox&&this.isGridSeriesWidgetPDFExport?this.exportSettings.selectedWidgetId:"",pageSize:this.exportSettings.PageSize,pageOrientation:this.exportSettings.Orientation,isWidgetSpecific:!this.exportSettings.isDashboardSelected,isControl:!e,isGridSeriesWidgetPDFExport:this.isGridSeriesWidgetPDFExport,isWidgetPagewiseExport:!this.currentPageExportCheckbox,filterInfo:a,showAppliedFilters:this.showAppliedFilters,labelParameterString:JSON.stringify(this.designer.modules.labelParameter.labelParameterVaues),theme:this.currentThemeValues(),fileName:this.exportSettings.FileName,isBingMapsConfigured:w,designCanvasMargin:this.designer.model.designCanvasSettings.margin,widgetContainerMargin:this.designer.model.widgetContainerSettings.margin,widgetContainerBoxshadow:this.designer.model.widgetContainerSettings.boxShadow,customWidgetSettings:JSON.stringify(this.designer.modules.widgetHelper.customWidgetItems),exportParameters:v,isCustomWidgetConfigured:b,serverUrl:BoldBIDashboard.isNullOrUndefined(this.designer.model.serverUrl)?"":this.designer.model.serverUrl,serviceAuthorizationToken:BoldBIDashboard.isNullOrUndefined(this.designer.model.serviceAuthorizationToken)?"":this.designer.model.serviceAuthorizationToken,environment:BoldBIDashboard.isNullOrUndefined(this.designer.model.environment)?"":this.designer.model.environment,isPublicDashboard:!BoldBIDashboard.isNullOrUndefined(this.designer.model._isPublic)&&this.designer.model._isPublic,dashboardThemeSettings:JSON.stringify(this.designer.model.dashboardThemeSettings),customFontFamilyUrl:this.designer.model.export.CustomFontFamilyUrl,isDefaultFont:this.designer.model.export.IsDefaultFont,virtualWidget:p.length>0?JSON.stringify(p):""});this.validateExistingRequest(l)&&(this.exportDictionary[c]=l,this.designer.modules.util.doAjaxPost("POST",this.designer.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.exportpdf,{action:BoldBIDashboard.DashboardUtil.DesignerAction.ExportAsPdf,data:l},{fnction:this.bbdesigner$.proxy(this.downloadPdf,this),completefnction:this.bbdesigner$.proxy(this.exportRequestOnComplete,this,c),errfnction:this.bbdesigner$.proxy(this.exportRequestOnError,this,c)},!0,!0),this.designer.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.exporting,undefined,this.exportSettings))}else this.getEmptyDashboardNotifyMsg()},n.prototype.getVirtualWidget=function(){var n=this.widgetHelper.getAllWidgets(),t=[];return BoldBIDashboard.isNullOrUndefined(n)||n.forEach(function(n){n.ControlContainer.hasClass("bbi-dbrd-virtual-widget")&&t.push(n.getJson())}),t},n.prototype.currentThemeValues=function(){return this.designer.isEnableCustomDashboardTheme()||this.designer.canApplyDashboardTheme()&&this.designer.isViewMode?"":JSON.stringify(this.designer.modules.themeHelper.currentTheme)},n.prototype.processExportDashboardAsImage=function(n,t,i,r){this.exportSettings=new ExportSettings;this.exportSettings.FileName=n;this.exportSettings.ExportFormat=t;this.exportSettings.ExportDpi=i;this.exportSettings.widgetJson=this.widgetHelper.getAllWidgets();this.exportSettings.isDashboardSelected=!0;this.exportSettings.ExportDashboard=!0;this.showExportingPopupNotification();this.checkAppliedFilters(BoldBIDashboard.isNullOrUndefined(r)?!0:r);this.requestingImageExport()},n.prototype.processExportWidgetAsImage=function(n,t,i,r,u){this.exportSettings=new ExportSettings;this.exportSettings.FileName=t;this.exportSettings.ExportFormat=i;this.exportSettings.ExportDpi=r;this.getWidgetJsonForControlExport(n);this.exportSettings.isDashboardSelected=!0;this.exportSettings.ExportDashboard=!1;this.showExportingPopupNotification();this.checkAppliedFilters(BoldBIDashboard.isNullOrUndefined(u)?!0:u);this.requestingImageExport()},n.prototype.requestingImageExport=function(){var u,n,f,t,i;if(this.exportSettings.widgetJson.length>0){this.designer.triggerViewerEvent(ViewerEvent.actionBegin,ViewerEventType.exporting,undefined,this);u=this.exportSettings.ExportDashboard;n=this.designer.rdlParser;n.rdlJsonObj=this.updateWidgetInfo(n.rdlJsonObj);n.rdlJsonObj=this.updateDashboardProperties(n.rdlJsonObj);f=this.bbdesigner$.extend(!0,{},n);f.rdlJsonObj.DataSources=[];f.rdlJsonObj.ColorSets=[];var l=this.exportSettings.ExportFormat,a=this.designer.designerPanel.banner.filterConfiguration.getAllWidgetSelectedValues(),e=this.designer.modules.widgetCache,v=e.filter(function(n){return n.Name.includes("BingMap")}).length>0,h={},r=this.widgetHelper.getAllCustomWidgets(),y=r.length>0;for(t=0;t<this.exportSettings.widgetJson.length;t++)if(this.exportSettings.widgetJson[t].Type==="CustomWidget")for(i=0;i<r.length;i++)this.exportSettings.widgetJson[t].name===r[i].name&&(BoldBIDashboard.isNullOrUndefined(r[i].customWidgetObj.model.exportParameters)||(h[this.exportSettings.widgetJson[t].name]=r[i].customWidgetObj.model.exportParameters));this.designer.modules.containerTypeWidgetHelper.updateCacheForContainerWidgets();var c=this.getVirtualWidget(),o=(new Date).getTime(),s=JSON.stringify({dashboardPath:this.designer.model.dashboardPath,reportName:u?this.designer.modules.serialization.dashboardPropertyJson.Name:this.exportSettings.selectedWidgetId,itemId:this.designer.model.itemId,hasWidgetItems:!BoldBIDashboard.isNullOrUndefined(n.rdlJsonObj.WidgetData)&&n.rdlJsonObj.WidgetData.length!==0&&n.rdlJsonObj.WidgetData.length===e.length,layoutString:JSON.stringify(f.rdlJsonObj),widgetString:JSON.stringify(u?e:this.getWidgetInfoForControlExport()),imageType:l,resolution:this.exportSettings.ExportDpi,isWidgetSpecific:!this.exportSettings.isDashboardSelected,isControl:!u,filterInfo:a,showAppliedFilters:this.showAppliedFilters,labelParameterString:JSON.stringify(this.designer.modules.labelParameter.labelParameterVaues),theme:this.currentThemeValues(),fileName:this.exportSettings.FileName,isBingMapsConfigured:v,designCanvasMargin:this.designer.model.designCanvasSettings.margin,widgetContainerMargin:this.designer.model.widgetContainerSettings.margin,widgetContainerBoxshadow:this.designer.model.widgetContainerSettings.boxShadow,customWidgetSettings:JSON.stringify(this.designer.modules.widgetHelper.customWidgetItems),isCustomWidgetConfigured:y,exportParameters:h,serverUrl:BoldBIDashboard.isNullOrUndefined(this.designer.model.serverUrl)?"":this.designer.model.serverUrl,serviceAuthorizationToken:BoldBIDashboard.isNullOrUndefined(this.designer.model.serviceAuthorizationToken)?"":this.designer.model.serviceAuthorizationToken,environment:BoldBIDashboard.isNullOrUndefined(this.designer.model.environment)?"":this.designer.model.environment,isPublicDashboard:!BoldBIDashboard.isNullOrUndefined(this.designer.model._isPublic)&&this.designer.model._isPublic,dashboardThemeSettings:JSON.stringify(this.designer.model.dashboardThemeSettings),customFontFamilyUrl:this.designer.model.export.CustomFontFamilyUrl,isDefaultFont:this.designer.model.export.IsDefaultFont,virtualWidget:c.length>0?JSON.stringify(c):""});this.validateExistingRequest(s)&&(this.exportDictionary[o]=s,this.designer.modules.util.doAjaxPost("POST",this.designer.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.exportimage,{action:BoldBIDashboard.DashboardUtil.DesignerAction.ExportAsImage,data:s},{fnction:this.bbdesigner$.proxy(this.downloadImage,this),completefnction:this.bbdesigner$.proxy(this.exportRequestOnComplete,this,o),errfnction:this.bbdesigner$.proxy(this.exportRequestOnError,this,o)},!0,!0),this.designer.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.exporting,undefined,this.exportSettings))}else this.getEmptyDashboardNotifyMsg()},n.prototype.processExportDashboardAsExcel=function(n,t){this.exportSettings=new ExportSettings;this.exportSettings.FileName=n;this.exportSettings.FileType=t;this.exportSettings.isDashboardSelected=!0;this.exportSettings.widgetJson=this.widgetHelper.getAllWidgets();this.requestingExcelExport()},n.prototype.processExportWidgetAsExcel=function(n,t,i){this.exportSettings=new ExportSettings;this.exportSettings.FileName=t;this.exportSettings.FileType=i;this.exportSettings.isDashboardSelected=!0;this.exportSettings.ExportDashboard=!1;this.getWidgetJsonForControlExport(n);this.requestingExcelExport()},n.prototype.requestingExcelExport=function(){var s,l,a,n;if(this.exportSettings.widgetJson.length>0){var r=!1,e=!1,u=[],o=this.designer.modules.viewDataDialog;this.designer.element.find(".bbi-viewdata-dialog").is(":visible")&&(e=o.isSelectedField,r=!0,u=o.fieldInfoList,o.updateOrderdFields(u));s=this.designer.model.isExcelWithImage&&!r;this.designer.triggerViewerEvent(ViewerEvent.actionBegin,ViewerEventType.exporting,undefined,this.exportSettings);var k=this.designer.modules.dataConfiguration,d=this.exportSettings.FileType,i=[],p=[],t=this.exportSettings.widgetJson;if(s)for(n=0;n<t.length;n++)BoldBIDashboard.Dashboard.WidgetHelper.isFilterWidgets(t[n])||(i.push(t[n].Name),BoldBIDashboard.Dashboard.WidgetHelper.isTableWidgets(t[n])||p.push(t[n].Name));else for(n=0;n<t.length;n++)i.push(t[n].Name);var h=this.designer.modules.masterSlaveFilter.getAllWidgetSelectedValues(),c=this.getWidgetSpecificInfo(),f=Object.keys(c);if(!BoldBIDashboard.isNullOrUndefined(f)&&f.length>0)if(this.designer.modules.exportPanel.showExportingPopupNotification(),s)this.requestExcelWithImage(p,i,e,r,u,h,c);else{for(l=k.getDatebucketFormatValues(),a=[],n=0;n<f.length;n++)a.push(f[n]);i=a;var w=this.designer.modules.dynamicParameterPanel.getAllFilterWidgetParameterSelectedValues(null,""),b=this.getVirtualWidget(),v=(new Date).getTime(),y=JSON.stringify({designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.exportAsExcel,widgetsId:i,fileName:this.exportSettings.FileName,fileType:d,selectedValuesList:BoldBIDashboard.isNullOrUndefined(h)?"":JSON.stringify(h),datebucketValuesList:BoldBIDashboard.isNullOrUndefined(l)?"":JSON.stringify(l),filterParameters:BoldBIDashboard.isNullOrUndefined(this.designer.urlParameter)?"":this.designer.urlParameter,widgetSpecificInfo:c,isViewData:r,isSelectedField:e,fieldInfo:u,selectedParameterValue:BoldBIDashboard.isNullOrUndefined(w)?"":JSON.stringify(w),isPublicDashboard:!BoldBIDashboard.isNullOrUndefined(this.designer.model._isPublic)&&this.designer.model._isPublic,virtualWidgetData:b.length>0?JSON.stringify(b):""});this.validateExistingRequest(y)&&(this.exportDictionary[v]=y,this.designer.modules.util.doAjaxPost("POST",this.designer.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.exportexcel,{action:BoldBIDashboard.DashboardUtil.DesignerAction.exportAsExcel,data:y},{fnction:this.bbdesigner$.proxy(this.captureExportedFile,this,this.exportSettings),completefnction:this.bbdesigner$.proxy(this.exportRequestOnComplete,this,v),errfnction:this.bbdesigner$.proxy(this.exportRequestOnError,this,v)},!0,!0),this.designer.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.exporting,undefined,this.exportSettings))}else this.getNotConfiguredNotifyMsg()}else this.getEmptyDashboardNotifyMsg()},n.prototype.validateExistingRequest=function(n){for(var t in this.exportDictionary)if(this.exportDictionary[t]===n)return this.exportingErrorPopupNotification(null,!0),!1;return!0},n.prototype.exportRequestOnComplete=function(n){this.resetExportDictionary(n)},n.prototype.exportRequestOnError=function(n){this.resetExportDictionary(n)},n.prototype.resetExportDictionary=function(n){delete this.exportDictionary[n]},n.prototype.requestExcelWithImage=function(n,t,i,r,u,f,e){var d=this.designer.modules.dataConfiguration,h=this.designer.rdlParser,l,a,p,s,o,v,y;for(h.rdlJsonObj=this.updateWidgetInfo(h.rdlJsonObj),h.rdlJsonObj=this.updateDashboardProperties(h.rdlJsonObj),l=this.bbdesigner$.extend(!0,{},h),l.rdlJsonObj.DataSources=[],l.rdlJsonObj.ColorSets=[],a=[],p=[],o=0;o<this.designer.modules.widgetCache.length;o++)n.includes(this.designer.modules.widgetCache[o].Name)&&(a.push(this.designer.modules.widgetCache[o]),p.push(this.designer.modules.widgetCache[o].Name));var w=this.designer.modules.dynamicParameterPanel.getAllFilterWidgetParameterSelectedValues(null,""),b=d.getDatebucketFormatValues(),g=a.filter(function(n){return n.Name.includes("BingMap")}).length>0,k={},c=this.widgetHelper.getAllCustomWidgets(),nt=c.length>0;for(s=0;s<this.exportSettings.widgetJson.length;s++)if(this.exportSettings.widgetJson[s].Type==="CustomWidget")for(o=0;o<c.length;o++)this.exportSettings.widgetJson[s].name===c[o].name&&(BoldBIDashboard.isNullOrUndefined(c[o].customWidgetObj.model.exportParameters)||(k[this.exportSettings.widgetJson[s].name]=c[o].customWidgetObj.model.exportParameters));v=(new Date).getTime();y=JSON.stringify({designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.exportAsExcel,widgetsId:t,fileName:this.exportSettings.FileName,fileType:this.exportSettings.FileType,selectedValuesList:BoldBIDashboard.isNullOrUndefined(f)?"":JSON.stringify(f),datebucketValuesList:BoldBIDashboard.isNullOrUndefined(b)?"":JSON.stringify(b),filterParameters:BoldBIDashboard.isNullOrUndefined(this.designer.urlParameter)?"":this.designer.urlParameter,widgetSpecificInfo:e,isViewData:r,isSelectedField:i,fieldInfo:u,selectedParameterValue:BoldBIDashboard.isNullOrUndefined(w)?"":JSON.stringify(w),isPublicDashboard:!BoldBIDashboard.isNullOrUndefined(this.designer.model._isPublic)&&this.designer.model._isPublic,dashboardPath:this.designer.model.dashboardPath,reportName:this.designer.modules.serialization.dashboardPropertyJson.Name,itemId:this.designer.model.itemId,hasWidgetItems:!0,layoutString:JSON.stringify(l.rdlJsonObj),widgetString:JSON.stringify(a),imageType:"jpg",resolution:"96",isWidgetSpecific:!1,isControl:!0,showAppliedFilters:this.showAppliedFilters,labelParameterString:JSON.stringify(this.designer.modules.labelParameter.labelParameterVaues),theme:this.currentThemeValues(),isBingMapsConfigured:g,customWidgetSettings:JSON.stringify(this.designer.modules.widgetHelper.customWidgetItems),isCustomWidgetConfigured:nt,exportParameters:k,serverUrl:BoldBIDashboard.isNullOrUndefined(this.designer.model.serverUrl)?"":this.designer.model.serverUrl,serviceAuthorizationToken:BoldBIDashboard.isNullOrUndefined(this.designer.model.serviceAuthorizationToken)?"":this.designer.model.serviceAuthorizationToken,environment:BoldBIDashboard.isNullOrUndefined(this.designer.model.environment)?"":this.designer.model.environment,dashboardThemeSettings:JSON.stringify(this.designer.model.dashboardThemeSettings),customFontFamilyUrl:this.designer.model.export.CustomFontFamilyUrl,isDefaultFont:this.designer.model.export.IsDefaultFont,filterInfo:BoldBIDashboard.isNullOrUndefined(f)?"":JSON.stringify(f),widgetNames:JSON.stringify(p),isExcelWithImage:!0});this.designer.modules.containerTypeWidgetHelper.updateCacheForContainerWidgets();this.validateExistingRequest(y)&&(this.exportDictionary[v]=y,this.designer.modules.util.doAjaxPost("POST",this.designer.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.exportexcel,{action:BoldBIDashboard.DashboardUtil.DesignerAction.exportAsExcel,data:y},{fnction:this.bbdesigner$.proxy(this.captureExportedFile,this,this.exportSettings),completefnction:this.bbdesigner$.proxy(this.exportRequestOnComplete,this,v),errfnction:this.bbdesigner$.proxy(this.exportRequestOnError,this,v)},!0,!0))},n.prototype.processExportWidgetAsCsv=function(n,t){this.exportSettings=new ExportSettings;this.exportSettings.FileName=t;this.exportSettings.ExportType="csv";this.getWidgetJsonForControlExport(n);this.requestingCsvExport()},n.prototype.requestingCsvExport=function(){var f,t,e,n;if(this.exportSettings.widgetJson.length>0){this.designer.triggerViewerEvent(ViewerEvent.actionBegin,ViewerEventType.exporting,undefined,this.exportSettings);var p=this.designer.modules.dataConfiguration,i=[],h=this.exportSettings.widgetJson;for(n=0;n<h.length;n++)i.push(h[n].Name);var c=this.designer.modules.masterSlaveFilter.getAllWidgetSelectedValues(),w=p.getDatebucketFormatValues(),l=!1,a=!1,r=[],u=this.designer.modules.viewDataDialog;if(this.designer.element.find(".bbi-viewdata-dialog").is(":visible")&&(a=u.isSelectedField,l=!0,r=u.fieldInfoList,u.updateOrderdFields(r)),f=this.getWidgetSpecificInfo(),t=Object.keys(f),!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0){for(this.showExportingPopupNotification(),e=[],n=0;n<t.length;n++)e.push(t[n]);i=e;var v=this.designer.modules.dynamicParameterPanel.getAllFilterWidgetParameterSelectedValues(null,""),y=this.getVirtualWidget(),o=(new Date).getTime(),s=JSON.stringify({designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.exportAsCsv,widgetsId:i,fileName:this.exportSettings.FileName,selectedValuesList:BoldBIDashboard.isNullOrUndefined(c)?"":JSON.stringify(c),datebucketValuesList:JSON.stringify(w),filterParameters:BoldBIDashboard.isNullOrUndefined(this.designer.urlParameter)?"":this.designer.urlParameter,widgetSpecificInfo:f,isViewData:l,isSelectedField:a,fieldInfo:r,selectedParameterValue:BoldBIDashboard.isNullOrUndefined(v)?"":JSON.stringify(v),isPublicDashboard:!BoldBIDashboard.isNullOrUndefined(this.designer.model._isPublic)&&this.designer.model._isPublic,virtualWidgetData:y.length>0?JSON.stringify(y):""});this.validateExistingRequest(s)&&(this.exportDictionary[o]=s,this.designer.modules.util.doAjaxPost("POST",this.designer.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.exportcsv,{action:BoldBIDashboard.DashboardUtil.DesignerAction.exportAsCsv,data:s},{fnction:this.bbdesigner$.proxy(this.captureExportedFile,this,this.exportSettings),completefnction:this.bbdesigner$.proxy(this.exportRequestOnComplete,this,o),errfnction:this.bbdesigner$.proxy(this.exportRequestOnError,this,o)},!0,!0),this.designer.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.exporting,undefined,this.exportSettings))}else this.getNotConfiguredNotifyMsg()}else this.getEmptyDashboardNotifyMsg()},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.Export",InternalExport,window),function(n){n.Xlsx="Excel Workbook (*.xlsx)";n.Xls="Excel 97-2003 Workbook (*.xls)"}(ExcelType||(ExcelType={})),function(n){n.Exporting="exporting";n.Failure="failure";n.Success="success"}(NotificationStatus||(NotificationStatus={}));InternalFilterConfiguration=function(){function n(n){this.id=null;this.reportItems=[];this.filterContainer=null;this.filterFooterTag=null;this.updateBtnTag=null;this.configChooserTag=null;this.masterFooterTag=null;this.masterElementContainer=null;this.masterScrollElement=null;this.masterUlTag=null;this.listContainer=null;this.masterListContainer=null;this.profileField=null;this.defaultContainer=null;this.customContainer=null;this.listenerField=null;this.listenerElementContainer=null;this.profileAddIcon=null;this.filterProfileAddIconDiv=null;this.masterWidgetAddIconDiv=null;this.customAddIconDiv=null;this.columnConfig=null;this.errorMsg="";this.selectedMaster=null;this.columnContainer=null;this.filterActionInfo=null;this.isCustomColumnModified=!1;this.isChangedCheckBoxValue=!1;this.editColVal=null;this.selectedProfile=null;this.isFilterProfileModified=!1;this.masterInfoTimeOut=null;this.targetInstance=null;this.targetMethod=null;this.sourceColumnData=[];this.targetSourceData=[];this.targetColumnData=[];this.filterSerializer=null;this.ejFilterDialog=null;this.ejMasterDialog=null;this.ejColumnGridObj=null;this.locale=null;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.dashboardDesigner._id;this.renderFilterConfigWindow();this.unWireEvents();this.wireEvents();this.filterSerializer=this.dashboardDesigner.modules.masterSlaveFilter;this.errorMsg=this.locale.masterSlaveWindow.errorMessage}return n.prototype.renderFilterConfigWindow=function(){var i=this.filterContainer=BoldBIDashboard.buildTag("div.bbi-userselect bbi-filter-config-dialog","",{},{id:this.id+"_filter_configuration"}),p=BoldBIDashboard.buildTag("table.bbi-designer-filter-config-table","",{},{unselectable:"on"}),w=BoldBIDashboard.buildTag("tr","",{}),b=BoldBIDashboard.buildTag("td.bbi-filterConfig-separator bbi-designer-filterConfig-td bbi-filterConfig-master-datacontainer","",{},{}),f=BoldBIDashboard.buildTag("td.bbi-designer-filterConfig-td bbi-filterConfig-filter-datacontainer","",{},{}),n,e,r,o,y,at,vt,yt;BoldBIDashboard.browserInfo().name==="chrome"&&f.addClass("e-browser-chrome");i.append(p);p.append(w);w.append(b).append(f);n=BoldBIDashboard.buildTag("div","",{width:"175px",height:"470px"});e=BoldBIDashboard.buildTag("div.e-filterConfig-filterempty","",{});b.append(n);f.append(e);r=BoldBIDashboard.buildTag("div.bbi-filterConfig-master-header-div","",{});o=BoldBIDashboard.buildTag("div.bbi-filterConfig-master-leftpane","",{},{});this.masterWidgetAddIconDiv=BoldBIDashboard.buildTag("div.bbi-masterslave-filter-addIcon bbi-dbrd-background-theme","",{},{});var t=BoldBIDashboard.buildTag("div.bbi-filterConfig-master-Label-div bbi-dbrd-icon-theme","",{}),pt=BoldBIDashboard.buildTag("span",this.locale.masterSlaveWindow.masterWidgetsLabelText,{}),s=BoldBIDashboard.buildTag("span.e-icon bbi-masterslave-filter-add-plusIcon bbi-dbrd-designer-hoverable bbi-filterConfig-master-addIcon bbi-designer-filter-addIcon","",{},{id:this.id+"_filter_config_master_addIcon","data-tooltip":"Add"});s.off("click",this.bbdesigner$.proxy(this.addMasterItems,this));s.on("click",this.bbdesigner$.proxy(this.addMasterItems,this));o.append(pt);this.masterWidgetAddIconDiv.append(s);t.append(o).append(this.masterWidgetAddIconDiv);r.append(t);var h=this.masterListContainer=BoldBIDashboard.buildTag("div.e-lv e-js e-parentlv e-designer-hint-newmaster bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{width:"100%",height:n.height()-r.height(),display:"block","background-color":"var(--designer-background)"},{id:this.id+"_filter_config_listContainer"}),k=BoldBIDashboard.buildTag("div","",{},{}),d=this.listContainer=BoldBIDashboard.buildTag("div.bbi-list-container e-js e-widget bbi-designer-dataset bbi-filterConfig-master-list-container","",{},{id:this.id+"_filter_config_masterList"}),wt=this.masterUlTag=BoldBIDashboard.buildTag("ul.e-list-hdr e-clearall e-filterConfig-master-ui-container","",{},{id:this.id+"_filter_config_List_ulTag"});d.append(wt);k.append(d);h.append(k);n.append(r).append(h);var g=BoldBIDashboard.buildTag("div","",{margin:"0px 8px"}),nt=BoldBIDashboard.buildTag("table","",{}),c=BoldBIDashboard.buildTag("tr","",{}),tt=BoldBIDashboard.buildTag("td","",{}),bt=BoldBIDashboard.buildTag("td","",{width:"5px"}),l=BoldBIDashboard.buildTag("td","",{}),it=BoldBIDashboard.buildTag("div","",{}),rt=BoldBIDashboard.buildTag("div","",{"padding-bottom":"10px"}),ut=BoldBIDashboard.buildTag("div","",{display:"inline-block"},{});this.filterProfileAddIconDiv=BoldBIDashboard.buildTag("div.bbi-masterslave-filter-addIcon bbi-dbrd-background-theme","",{},{});var kt=BoldBIDashboard.buildTag("span",this.locale.masterSlaveWindow.filterProfileslabelText,{"padding-left":"2px"},{}),a=this.profileAddIcon=BoldBIDashboard.buildTag("span.e-icon bbi-masterslave-filter-add-plusIcon bbi-dbrd-designer-hoverable bbi-filterConfig-master-addIcon bbi-designer-filter-addIcon","",{},{id:this.id+"_filter_config_profile_addIcon","data-tooltip":"Add"}),u=this.profileField=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-filterConfig-profile-field bbi-dbrd-designer-scroll-style-3","",{}),ft=BoldBIDashboard.buildTag("div","",{}),et=BoldBIDashboard.buildTag("div","",{id:this.id+"_filter_config_profile_list"}),dt=BoldBIDashboard.buildTag("ul.e-list-hdr e-clearall e-filter-profileList bbi-filterConfig-ul-Profile-container","",{},{id:this.id+"_filter_config_profile_ulTag"});a.off("click",this.bbdesigner$.proxy(this.addNewProfile,this));a.on("click",this.bbdesigner$.proxy(this.addNewProfile,this));ut.append(kt);this.filterProfileAddIconDiv.append(a);et.append(dt);ft.append(et);u.append(ft);rt.append(ut,this.filterProfileAddIconDiv);it.append(rt,u);tt.append(it,u);var ot=BoldBIDashboard.buildTag("div","",{}),st=BoldBIDashboard.buildTag("div.bbi-filterConfig-listene-label-div","",{}),ht=BoldBIDashboard.buildTag("div","",{display:"inline-block"},{id:this.id+"_filter_config_checkAllTag"}),gt=BoldBIDashboard.buildTag("span",this.locale.masterSlaveWindow.listenerWidgetsLabelText,{"margin-left":"10px"}),v=this.listenerField=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-filterConfig-listene-field-div bbi-dbrd-designer-scroll-style-3","",{}),ct=BoldBIDashboard.buildTag("div","",{}),lt=this.listenerElementContainer=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_filter_config_listener_list"}),ni=BoldBIDashboard.buildTag("table.e-designer-listener-table","",{});st.append(ht,gt);lt.append(ni);ct.append(lt);v.append(ct);ot.append(st,v);l.append(ot);c.append(tt,bt,l);c.append(l);nt.append(c);g.append(nt);y=BoldBIDashboard.buildTag("div","",{width:"539px"});this.renderColumnConfig(y);e.append(g).append(y);at=this.updateBtnTag=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary",this.locale.masterSlaveWindow.updateButtonText,{float:"right","margin-right":"10px",height:"28px"},{id:this.id+"_filter_config_update_btn",type:"button"});vt=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-secondary",this.locale.masterSlaveWindow.cancelButtonText,{float:"right",height:"28px"},{id:this.id+"_filter_config_close_btn",type:"button"});this.dashboardDesigner.element.append(i);ht.BoldBIDashboardCheckBox({cssClass:"bbi-designer-filter-configuration bbi-designer-listener-checkAll",change:this.bbdesigner$.proxy(this.updateListenerSelection,this)});i.BoldBIDashboardDialog({width:"auto",height:"auto",minWidth:"310px",minHeight:"215px",title:this.locale.masterSlaveWindow.alertTitle,enableResize:!1,showOnInit:!1,showFooter:!0,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner",enableModal:!0,close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,closeIconTooltip:this.locale.dialogOptions.closeButtonText});yt=t.height()+parseInt(t.css("padding-top"),10)+parseInt(t.css("padding-bottom"),10);this.generateScroller(h,n.height()-yt+"px","auto");this.generateScroller(u,"185px","250px");this.generateScroller(v,"185px","250px");this.filterFooterTag=this.dashboardDesigner.element.find("#"+this.id+"_filter_configuration_foot");this.filterFooterTag.append(vt).append(at);this.ejFilterDialog=i.data("BoldBIDashboardDialog");this.renderMasterWindow()},n.prototype.updateListenerSelection=function(n){var r=this,t,i;n.isInteraction&&(t=this.listenerElementContainer.find(".e-designer-listener-table tr"),i=this.bbdesigner$(t.find('input[type="checkbox"]')),i.each(function(t,i){var u=r.dashboardDesigner.element.find("#"+i.id).data("BoldBIDashboardCheckBox");BoldBIDashboard.isNullOrUndefined(u)||u.setModel({checked:n.model.checked})}),this.dashboardDesigner.element.find("#"+n.model.id).data("BoldBIDashboardCheckBox").setModel({enableTriState:!1,checkState:n.checkState}),t.length>0&&this.updateBtnTag.prop("disabled",!n.model.checked))},n.prototype.wireEvents=function(){this.dashboardDesigner.element.on("click","#"+this.id+"_filter_config_update_btn",this.bbdesigner$.proxy(this.updateFilterConfig,this));this.dashboardDesigner.element.on("click","#"+this.id+"_filter_config_close_btn",this.bbdesigner$.proxy(this.closeFilterWindow,this));this.dashboardDesigner.element.on("click","#"+this.id+"_master_add_ok_btn",this.bbdesigner$.proxy(this.updateMasterInfoTimeOut,this));this.dashboardDesigner.element.on("click","#"+this.id+"_master_add_cancel_btn",this.bbdesigner$.proxy(this.closeMasterWindow,this))},n.prototype.unWireEvents=function(){this.dashboardDesigner.element.off("click","#"+this.id+"_filter_config_update_btn",this.bbdesigner$.proxy(this.updateFilterConfig,this));this.dashboardDesigner.element.off("click","#"+this.id+"_filter_config_close_btn",this.bbdesigner$.proxy(this.closeFilterWindow,this));this.dashboardDesigner.element.off("click","#"+this.id+"_master_add_ok_btn",this.bbdesigner$.proxy(this.updateMasterInfoTimeOut,this));this.dashboardDesigner.element.off("click","#"+this.id+"_master_add_cancel_btn",this.bbdesigner$.proxy(this.closeMasterWindow,this))},n.prototype.generateScroller=function(n,t,i){n.BoldBIDashboardScroller({scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,height:t,width:i,enableTouchScroll:!0,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize})},n.prototype.renderColumnConfig=function(n){var r=this.configChooserTag=BoldBIDashboard.buildTag("div.bbi-filterConfig-chooser-div","",{},{}),u=BoldBIDashboard.buildTag("div.bbi-dbrd-filter-dlg-mode-btn-wrapper","",{},{id:this.id+"_filter_btn_wrapper"}),t;this.customAddIconDiv=BoldBIDashboard.buildTag("div.bbi-masterslave-filter-addIcon bbi-dbrd-background-theme","",{},{});t=BoldBIDashboard.buildTag("span.e-icon bbi-masterslave-filter-add-plusIcon bbi-dbrd-designer-hoverable bbi-filterConfig-master-addIcon bbi-designer-filter-addIcon","",{},{id:this.id+"_filter_config_custom_addIcon","data-tooltip":"Add"});this.customAddIconDiv.append(t);r.append(u).append(this.customAddIconDiv);t.off("click",this.bbdesigner$.proxy(this.addCustomColumn,this));t.on("click",this.bbdesigner$.proxy(this.addCustomColumn,this));var f=this.columnContainer=BoldBIDashboard.buildTag("div","",{height:"190px",width:"540px",display:"inline-block","margin-bottom":"5px","border-top":"1px solid var(--designer-primary-border-color)"},{id:this.id+"_column_config_container"}),e=this.defaultContainer=BoldBIDashboard.buildTag("div","",{height:"190px",display:"block","border-radius":"4px","border-width":"0px"},{id:this.id+"_default_column_container"}),o=BoldBIDashboard.buildTag("div.bbi-designer-defaultcolumn-grid","",{height:"190px",display:"block","border-width":"0px"},{id:this.id+"_default_column_grid"}),i=this.columnConfig=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control","",{height:"190px",width:"540px",display:"inline-block","border-radius":"4px"},{}),s=this.customContainer=BoldBIDashboard.buildTag("div.bbi-designer-custom-column","",{display:"block","background-color":"#ffffff",height:"190px","border-width":"0px"},{id:this.id+"_custom_column_container"});i.append(s);n.append(r);n.append(f);e.append(o);f.append(i).append(e);this.generateScroller(i,"190px","540px");this.customTypeSwitcher(!1);this.createGridDefaultColumn(o);this.createRadioBtnSection(u)},n.prototype.createRadioBtnSection=function(n){var t=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_btn_grp"}),i;n.append(t);i={callBackInstance:this,callBackMethod:"dataChooser",groupName:"filter",triggerOnCodeUpdate:!0,labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.id+"_filter_config_default",label:"Default",isChecked:!0,value:"default"},{id:this.id+"_filter_config_custom",label:"Custom",isChecked:!1,value:"custom"},]};this.radioButtonMode=new BoldBIDashboard.Dashboard.RadioButton(i,t)},n.prototype.createGridDefaultColumn=function(n){for(var r=[],t=[{fieldName:"SourceColumn",Name:this.locale.masterSlaveWindow.sourceColumn},{fieldName:"TargetDataSource",Name:this.locale.masterSlaveWindow.targetDataSource},{fieldName:"TargetColumn",Name:this.locale.masterSlaveWindow.targetColumn}],u=540/t.length,i=0;i<t.length;i++)r.push({field:t[i].fieldName,headerText:t[i].Name,width:u,textAlign:BoldBIDashboard.TextAlign.Left});n.BoldBIDashboardGrid({enableRowHover:!1,allowScrolling:!1,columns:r,allowSelection:!1,height:150,scrollSettings:{allowVirtualScrolling:!1,virtualScrollMode:"normal",enableTouchScroll:!1,autoHide:!0,scrollerSize:10}});this.ejColumnGridObj=n.data("BoldBIDashboardGrid")},n.prototype.appendMasterList=function(n,t){var f=n.ID,u=n.Name,i=BoldBIDashboard.buildTag("li.e-user-select e-list e-state-default e-list-check bbi-filterConfig-master-li-container bbi-designer-masterwidget-list","",{},{id:this.id+"_li_"+f,name:u,guid:f}),e=BoldBIDashboard.buildTag("a.e-chevron-right_01 bbi-remove-shadow","",{padding:"8px 0px","min-height":"16px"}),o=BoldBIDashboard.buildTag("span.e-list-text e-rel bbi-designer-content bbi-dbrd-designer-hoverable bbi-filterConfig-master-text-span",u,{},{name:u,id:this.id+"_li_"+f+"_textSpan"}),r;e.append(o);r=BoldBIDashboard.buildTag("div.e-chk-image e-icon e-cross-circle bbi-dbrd-designer-hoverable bbi-filterConfig-master-closeIcon-span bbi-filter-configuration-close","",{},{id:this.id+"_"+f,"data-tooltip":"Delete"});BoldBIDashboard.DashboardUtil.textWidth(u,"12px Heebo")>=o.width()&&o.attr("data-tooltip",u);e.append(r);i.append(e);r.off("click",this.bbdesigner$.proxy(this.removeMaster,this,i,n));i.off("click",this.bbdesigner$.proxy(this.masterSelection,this,n.ID));r.on("click",this.bbdesigner$.proxy(this.removeMaster,this,i,n));i.on("click",this.bbdesigner$.proxy(this.masterSelection,this,n.ID));i.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseUp,this.bbdesigner$.proxy(this.onListItemMouseUp,this));i.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseOver,this.bbdesigner$.proxy(this.elementMouseOver,this,r));i.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseLeave,this.bbdesigner$.proxy(this.elementMouseLeave,this,r));BoldBIDashboard.isNullOrUndefined(t)?this.masterUlTag.append(i):t===0?(this.masterUlTag.prepend(i),i.css({"border-bottom":"0.5px solid #c8c8c8"})):this.listContainer.find("ul>li:nth-child("+t+")").after(i);this.masterListContainer.height()>this.listContainer.height()?this.masterListContainer.find(".e-content").removeClass("e-content"):this.scrollerRefresh(this.masterListContainer)},n.prototype.elementMouseOver=function(n){n.css("display","inline-block")},n.prototype.elementMouseLeave=function(n){n.css("display","none")},n.prototype.getSelectedMasterCollection=function(n){for(var r=null,i=this.filterActionInfo.MastersCollection,t=0;t<i.length;t++)i[t].MasterInfo.ID===n&&(r=i[t]);return r},n.prototype.masterSelection=function(n){if(n!==this.selectedMaster.MasterInfo.ID){this.profileAddIcon.attr("disabled")==="disabled"&&this.disableFilterConditionSlaveWidgetArea(!1);this.updateMasterDetails();var t=this.getSelectedMasterCollection(n);BoldBIDashboard.isNullOrUndefined(t)||(this.selectedMaster=t,this.selectedMaster.ProfileManager.length>0?(this.selectedProfile=this.selectedMaster.ProfileManager[0],this.disableFilterConditionSlaveWidgetArea(!1),this.populateProfileArea(!0),this.isChangedCheckBoxValue=!1):(this.selectedProfile=null,this.resetColumnConfiguration(),this.resetProfileFields(),this.resetListenerContainer(),this.disableFilterConditionSlaveWidgetArea(!0,!1)))}},n.prototype.getSelectedListener=function(n){for(var i,r=[],t=0;t<n.length;t++)i=this.dashboardDesigner.element.find("#"+this.id+"_listener_"+n[t].ID).data("BoldBIDashboardCheckBox"),!BoldBIDashboard.isNullOrUndefined(i)&&i.model.checked&&r.push(n[t]);return r},n.prototype.updateMasterDetails=function(){this.filterActionInfo.MastersCollection.length>0&&!BoldBIDashboard.isNullOrUndefined(this.selectedProfile)&&this.UpdateProfileDetails();this.removeEmptyCustomColumn()},n.prototype.removeMaster=function(n,t){var r,i;for(n.remove(),this.scrollerRefresh(this.masterListContainer),this.resetProfileFields(),this.scrollerRefresh(this.profileField),this.resetListenerContainer(),this.scrollerRefresh(this.listenerField),r=this.filterActionInfo.MastersCollection,i=0;i<r.length;i++)r[i].MasterInfo.ID===t.ID&&r.splice(i,1);this.masterUlTag.find("li").length>0?(this.setDefaultSelection(),this.disableFilterConfigArea(!1),this.populateProfileArea(!0),this.masterUlTag.find("li").first().addClass("bbi-masterwidget-user-selection-active")):(this.resetColumnConfiguration(),this.disableFilterConfigArea(!0),this.masterWidgetAddIconDiv.removeAttr("disabled"),this.updateBtnTag.removeAttr("disabled"))},n.prototype.profileSelection=function(n){var i,t;if(this.profileAddIcon.attr("disabled")!=="disabled"&&(i=n.find("span.e-list-text").attr("name"),!BoldBIDashboard.isNullOrUndefined(this.selectedMaster)&&this.selectedMaster.ProfileManager.length>0&&i!==""&&this.selectedProfile.Name!==i))for(this.UpdateProfileDetails(),this.isChangedCheckBoxValue=!1,t=0;t<this.selectedMaster.ProfileManager.length;t++)this.selectedMaster.ProfileManager[t].ProfileInfo.Name===i&&(this.selectedProfile=this.selectedMaster.ProfileManager[t],this.populateProfileArea(!1))},n.prototype.setProfileInfoToSelectedProfileProperty=function(){this.selectedMaster.ProfileManager.length>0?(this.selectedProfile=this.selectedMaster.ProfileManager[0],this.populateProfileArea(!1),this.profileField.find(".e-filter-profileList li").first().addClass("bbi-masterwidget-user-selection-active")):(this.selectedProfile=null,this.resetListenerContainer(),this.resetColumnConfiguration(),this.listenerField.attr("disabled","true").css({opacity:"0.5"}),this.configChooserTag.find("#"+this.id+"_filter_config_default_rdo_input").prop("disabled",!0),this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("disabled",!0),this.updateBtnTag.prop("disabled",!0),this.configChooserTag.css("opacity","0.5"))},n.prototype.onListItemMouseUp=function(n){var t=this.bbdesigner$(n.target).closest("li"),i=this.bbdesigner$;t.hasClass("bbi-masterwidget-user-selection-active")||(t.parent().children().each(function(){var n=i(this);n.removeClass("bbi-masterwidget-user-selection-active");n.find("span").removeClass("bbi-masterwidget-user-selection-active")}),t.addClass("bbi-masterwidget-user-selection-active"),t.find("span").addClass("bbi-masterwidget-user-selection-active"))},n.prototype.addNewProfile=function(){this.profileAddIcon.attr("disabled")!=="disabled"&&(this.disableFilterConditionSlaveWidgetArea(!0),this.appendProfileElement(this.selectedMaster.MasterInfo.Name,this.selectedMaster.MasterInfo.ID,"",!1),this.scrollerRefresh(this.profileField))},n.prototype.appendProfileElement=function(n,t,i,r){var e=BoldBIDashboard.getGuid(""),l=this.profileField.height()<this.profileField.find("#"+this.id+"_filter_config_profile_list").height(),o=l?190:200,u=BoldBIDashboard.buildTag("li.e-user-select e-list e-list-check bbi-designer-filterProfile-row bbi-filterConfig-master-filterprofile-li-container","",{},{id:this.id+"_li_"+e,name:i}),s=BoldBIDashboard.buildTag("a.e-chevron-right_01 bbi-remove-shadow","",{padding:"3.5px 0"}),h=BoldBIDashboard.buildTag("span.e-list-text e-rel e-user-select bbi-designer-fontfamily bbi-filterConfig-master-filterprofile-name bbi-dbrd-designer-hoverable"+(BoldBIDashboard.DashboardUtil.textWidth(i,"12px Heebo")>=o?" e-title-tip":""),i,{width:o,display:r?"inline-block":"none"},{name:i,id:this.id+"_txtSpan_"+e}),c=BoldBIDashboard.buildTag("input.e-textbox e-edit-profile bbi-designer-fontfamily bbi-filterConfig-master-filterprofile-textbox","",{width:o+26,display:r?"none":"inline-block"},{liTag:this.id+"_txtSpan_"+e,type:"text",id:this.id+"_txtEdit_"+e}),f=BoldBIDashboard.buildTag("div.e-chk-image e-icon e-cross-circle bbi-dbrd-designer-hoverable bbi-filterConfig-master-filterprofile-closeIcon-span bbi-filter-configuration-close","",{},{id:this.id+"_closeIcon_"+e,"data-tooltip":"Delete"});if(BoldBIDashboard.DashboardUtil.textWidth(i,"12px Heebo")>=o&&h.attr("data-tooltip",i),r?u.addClass("bbi-designer-filterProfile-list"):(f.addClass("e-list-close-icon"),c.addClass("e-selected-textbox")),s.append(h).append(c).append(f),u.append(s),this.profileField.find(".e-filter-profileList").append(u),r)this.profileAddIcon.css("opacity")!=="1"&&this.disableAddIcon(!1);else{this.disableAddIcon(!0);this.onListItemMouseUp({target:u})}u.off("click",this.bbdesigner$.proxy(this.profileSelection,this,u,t));f.off("click",this.bbdesigner$.proxy(this.removeProfile,this,u));u.on("click",this.bbdesigner$.proxy(this.profileSelection,this,u,t));f.on("click",this.bbdesigner$.proxy(this.removeProfile,this,u));u.bind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.editProfileName,this));u.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseOver,this.bbdesigner$.proxy(this.profileMouseOver,this,f));u.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseLeave,this.bbdesigner$.proxy(this.profileMouseLeave,this,f));u.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseUp,this.bbdesigner$.proxy(this.onListItemMouseUp,this));u.find(".e-edit-profile").off("blur",this.bbdesigner$.proxy(this.editColumnBlur,this,t));u.find(".e-edit-profile").off("keypress",this.bbdesigner$.proxy(this.editColumnKeyPress,this,t));u.find(".e-edit-profile").on("blur",this.bbdesigner$.proxy(this.editColumnBlur,this,t));u.find(".e-edit-profile").on("keypress",this.bbdesigner$.proxy(this.editColumnKeyPress,this,t));u.find(".e-edit-profile").focus()},n.prototype.removeProfile=function(n){var i=n.find("span.e-list-text").attr("name"),t;if(!BoldBIDashboard.isNullOrUndefined(this.selectedMaster)&&this.selectedMaster.ProfileManager.length>0)if(this.selectedProfile.ProfileInfo.Name===i&&this.profileAddIcon.attr("disabled")!=="disabled")for(t=0;t<this.selectedMaster.ProfileManager.length;t++)this.selectedMaster.ProfileManager[t].ProfileInfo.Name===this.selectedProfile.ProfileInfo.Name&&(this.selectedMaster.ProfileManager.splice(t,1),n.remove(),this.setProfileInfoToSelectedProfileProperty(this.selectedMaster.MasterInfo.ID));else(BoldBIDashboard.isNullOrUndefined(i)||i==="")&&(n.remove(),this.disableFilterConditionSlaveWidgetArea(!1),this.UpdateProfileDetails(),this.setProfileInfoToSelectedProfileProperty(this.selectedMaster.MasterInfo.ID));else n.remove(),this.resetListenerContainer(),this.resetColumnConfiguration(),this.listenerField.attr("disabled","true").css({opacity:"0.5"}),this.configChooserTag.find("#"+this.id+"_filter_config_default_rdo_input").prop("disabled",!0),this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("disabled",!0),this.updateBtnTag.prop("disabled",!0),this.configChooserTag.css("opacity","0.5"),this.profileAddIcon.css("opacity")!=="1"&&this.disableAddIcon(!1);this.scrollerRefresh(this.profileField)},n.prototype.editProfileName=function(n){var t=this.bbdesigner$(n.currentTarget).find(".e-edit-profile"),r=t[0],o=this.profileField.find(".e-filter-profileList"),u=o.find(".e-edit-profile:visible").not(t),f=this.bbdesigner$(n.currentTarget).find(".e-list-text"),e=this.bbdesigner$(n.currentTarget).find(".e-cross-circle"),i;t.css("display")==="none"&&u.length===0?(i=f.text().trim(),f.css("display","none"),n.currentTarget.classList.remove("bbi-designer-filterProfile-list"),e.css("display","none"),e.addClass("e-list-close-icon"),t.css("display","inline-block").val(i).focus(),t.addClass("e-selected-textbox"),this.editColVal=i,r.selectionStart=r.selectionEnd=i.length):u.length>0&&this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.profileNameEditAdd,IconType.warning,AlertType.Alert,!1,"")},n.prototype.profileMouseOver=function(n){n.hasClass("e-list-close-icon")||n.css("display","inline-block")},n.prototype.profileMouseLeave=function(n){n.css("display","none")},n.prototype.editColumnBlur=function(n,t){var r=this.bbdesigner$(t.currentTarget),f=r.closest("li"),o=r.attr("liTag"),e=f.find("#"+o),i=r.val().trim(),s=e.attr("name"),h=f.find(".e-cross-circle"),c,u;s!==i.trim()?i.trim()===""?this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.filterKeyEmpty,IconType.errors,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):this.isExistProfileName(i,e)?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidFilterProfile,this.locale.masterSlaveWindow.filterKeyExist,IconType.warning,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):(r.css("display","none"),e.css("display","inline-block").text(i.trim()),c=this.bbdesigner$("#"+f[0].id),u=this.bbdesigner$("#"+o),c.attr("name",i.trim()),u.attr("name",i.trim()),BoldBIDashboard.DashboardUtil.textWidth(i.trim(),"12px Heebo")>=u.width()?(u.addClass("bbi-dbrd-designer-hoverable"),u.attr("data-tooltip",i.trim())):u.removeAttr("data-tooltip"),this.UpdateSelectedProfileDetails(s,i.trim(),n),this.editColVal=null,this.profileAddIcon.css("opacity")!=="1"&&this.disableAddIcon(!1),this.addOrRemoveCloseIcon(h,f,r)):BoldBIDashboard.isNullOrUndefined(i)||i.trim()===""?i.trim()===""&&this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.filterKeyEmpty,IconType.warning,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):(r.css("display","none"),e.css("display","inline-block"),this.addOrRemoveCloseIcon(h,f,r))},n.prototype.invalidFilterProfileNameAlert=function(){this.filterContainer.find(".e-selected-textbox").focus().select()},n.prototype.addOrRemoveCloseIcon=function(n,t,i){BoldBIDashboard.isNullOrUndefined(n)||n.removeClass("e-list-close-icon");BoldBIDashboard.isNullOrUndefined(t)||t.addClass("bbi-designer-filterProfile-list");BoldBIDashboard.isNullOrUndefined(i)||i.removeClass("e-selected-textbox")},n.prototype.editColumnKeyPress=function(n,t){var c,u;if(t.keyCode===13){var r=this.bbdesigner$(t.currentTarget),f=r.closest("li"),o=r.attr("liTag"),e=f.find("#"+o),i=r.val().trim(),s=e.attr("name"),h=f.find(".e-cross-circle");s!==i.trim()?i.trim()===""?this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.filterKeyEmpty,IconType.errors,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):this.isExistProfileName(i,e)?this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.filterKeyExist,IconType.warning,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):(r.css("display","none"),e.css("display","inline-block").text(i.trim()),c=this.bbdesigner$("#"+f[0].id),u=this.bbdesigner$("#"+o),c.attr("name",i.trim()),u.attr("name",i.trim()),BoldBIDashboard.DashboardUtil.textWidth(i.trim(),"12px Heebo")>=u.width()?(u.addClass("bbi-dbrd-designer-hoverable"),u.attr("data-tooltip",i.trim())):u.removeAttr("data-tooltip"),this.UpdateSelectedProfileDetails(s,i.trim(),n),this.editColVal=null,this.profileAddIcon.css("opacity")!=="1"&&this.disableAddIcon(!1),this.addOrRemoveCloseIcon(h,f,r)):BoldBIDashboard.isNullOrUndefined(i)||i.trim()===""?i.trim()===""&&this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.filterKeyEmpty,IconType.errors,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):(r.css("display","none"),e.css("display","inline-block"),this.addOrRemoveCloseIcon(h,f,r));this.isFilterProfileModified=!0}},n.prototype.UpdateProfileDetails=function(){this.selectedMaster.ProfileManager.length>0&&!BoldBIDashboard.isNullOrUndefined(this.selectedProfile)&&(this.isCustomColumnModified&&(this.removeEmptyCustomColumn(),this.selectedProfile.ProfileInfo.FilterCondition=this.getCustomColumnValues(),this.selectedProfile.ProfileInfo.Option=this.isCustomColumnModified,this.isCustomColumnModified=!1),this.isChangedCheckBoxValue&&(this.selectedProfile.WidgetInfo=this.getSelectedListener(this.selectedProfile.WidgetInfo)))},n.prototype.SetSelectedProfile=function(n,t){var r,i;if(this.selectedMaster.MasterInfo.ID===n)for(r=this.createProfileInfo(),r.Name=t,r.FilterCondition=this.bbdesigner$.parseJSON(JSON.stringify(this.getDefaultFilterConditions(n))),this.selectedMaster.ProfileManager.push({ProfileInfo:r,WidgetInfo:this.generateWidgetInfo(n)}),i=0;i<this.selectedMaster.ProfileManager.length;i++)this.selectedMaster.ProfileManager[i].ProfileInfo.Name===t&&(this.selectedProfile=this.selectedMaster.ProfileManager[i])},n.prototype.isExistProfileName=function(n){var t;if(!BoldBIDashboard.isNullOrUndefined(this.selectedMaster.ProfileManager)&&this.selectedMaster.ProfileManager.length>0)for(t=0;t<this.selectedMaster.ProfileManager.length;t++)if(this.selectedMaster.ProfileManager[t].ProfileInfo.Name.toLowerCase()===n.toLowerCase())return!0;return!1},n.prototype.UpdateSelectedProfileDetails=function(n,t,i){var u=!1,r;if(this.selectedMaster.ProfileManager.length>0)for(r=0;r<this.selectedMaster.ProfileManager.length;r++)this.selectedMaster.ProfileManager[r].ProfileInfo.Name===n&&(this.selectedMaster.ProfileManager[r].ProfileInfo.Name=t,u=!0);else u=!1;u||this.setNewProfile(i,t)},n.prototype.setNewProfile=function(n,t){this.UpdateProfileDetails();this.SetSelectedProfile(n,t);this.disableFilterConditionSlaveWidgetArea(!1);this.populateProfileArea(!1);this.updateBtnTag.removeAttr("disabled")},n.prototype.populateListenerWidgets=function(n,t){var o,r,i,f,u,s,e;for(this.resetListenerContainer(),o=this.listenerElementContainer.find(".e-designer-listener-table"),r=this.filterSerializer.getWidgetList(),i=0;i<r.length;i++)f=r[i].ID,f!==t.ID&&(!t.IsPoP||r[i].IsPoPSupported)&&this.checkBoxWithElementsCreation(r[i].Name,f,this.id+"_listener_"+f,!0,o,"5px 15px 0px 10px");for(u=0;u<n.length;u++)s=n[u],(!t.IsPoP||n[u].IsPoPSupported)&&(e=this.dashboardDesigner.element.find("#"+this.id+"_listener_"+s.ID).data("BoldBIDashboardCheckBox"),BoldBIDashboard.isNullOrUndefined(e)||e.setModel({checked:!0}));this.updateListenerCheckAllSelection(n);this.scrollerRefresh(this.listenerField)},n.prototype.resetListenerContainer=function(){this.listenerElementContainer.find(".e-designer-listener-table tr").remove()},n.prototype.dataChooser=function(n){var t,r,i;n.args.event.type==="change"&&(t=n.args.value==="custom",t?(this.isCustomColumnModified=!0,this.customTypeSwitcher(t),this.removeEmptyCustomColumn()):(this.removeEmptyCustomColumn(),r=this.getCustomColumnValues(),i=!0,i=this.isCustomColumnModified||this.selectedProfile.ProfileInfo.Option?!0:!1,i?this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.resetAllCustomizationText,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this,dataInfo:{filterCondition:r}}):this.customTypeSwitcher(t)))},n.prototype.confirmAction=function(n,t){n?(this.customTypeSwitcher(!1),this.customContainer.empty(),this.selectedProfile.ProfileInfo.FilterCondition=this.bbdesigner$.parseJSON(JSON.stringify(this.getDefaultFilterConditions(this.selectedMaster.MasterInfo.ID))),this.updateConfigFields(this.selectedProfile.ProfileInfo.FilterCondition,this.sourceColumnData,this.targetColumnData),this.isCustomColumnModified=!1,this.selectedProfile.ProfileInfo.Option=!1):(this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("checked",!0),this.customTypeSwitcher(!n),this.customContainer.empty(),this.updateConfigFields(t.filterCondition,this.sourceColumnData,this.targetColumnData),this.isCustomColumnModified=!0,this.selectedProfile.ProfileInfo.Option=!0)},n.prototype.getCustomColumnValues=function(){var n=this,i=!1,r=[],u=this.customContainer.find(".e-reportdesigner-column-config-row"),t=this.bbdesigner$;return u.each(function(u,f){var e=t(f).attr("id"),p=n.customContainer.find("#"+e+"_source_column").data("BoldBIDashboardDropDownList"),w=n.customContainer.find("#"+e+"_datasource_column").data("BoldBIDashboardDropDownList"),h=w.getSelectedValue(),b=w.getItemDataByValue(h)[0].Name,k=t(p.getSelectedItem()).text(),c=p.getSelectedValue(),a=n.customContainer.find("#"+e+"_target_column"),v="",s="",y,l,o;!BoldBIDashboard.isNullOrUndefined(a)&&a.length>0?(y=a.data("BoldBIDashboardDropDownList"),v=t(y.getSelectedItem()).text(),s=y.getSelectedValue()):(l=t("#"+e+"_target_column_div_drop_tree_wrapper_input"),l.data("BoldBIDashboardDropDownList"),v=l.data("BoldBIDashboardDropDownList").model.text,s=l.data("BoldBIDashboardDropDownList").model.value);c.length>0&&h.length>0&&s.length>0||(BoldBIDashboard.DashboardUtil.showErrIndictor(n.customContainer.find("#"+e+"_col_error_icon"),!0),i=!0);c.length>0||(n.updateBorder(t("#"+e+"_source_column_wrapper"),!0),i=!0);h.length>0||(n.updateBorder(t("#"+e+"_datasource_column_wrapper"),!0),i=!0);s.length>0||(n.updateBorder(t("#"+e+"_target_column_wrapper"),!0),i=!0);c.length>0&&h.length>0&&s.length>0&&(n.updateBorder(n.bbdesigner$("#"+e+"_source_column_wrapper > span"),!1),n.updateBorder(n.bbdesigner$("#"+e+"_datasource_column_wrapper > span"),!1),n.updateBorder(n.bbdesigner$("#"+e+"_target_column_wrapper > span"),!1),BoldBIDashboard.DashboardUtil.showErrIndictor(n.customContainer.find("#"+e+"_col_error_icon"),!1),o=n.createcolumnJson(),o.SourceColumn.Name=k,o.SourceColumn.ID=c,o.DataSource.ID=h,o.DataSource.Name=b,o.TargetColumn.Name=v,o.TargetColumn.ID=s,r.push(o),i=!1)}),r},n.prototype.updateBorder=function(n,t){t?n.addClass("bbi-designer-error"):n.removeClass("bbi-designer-error")},n.prototype.createcolumnJson=function(){return{SourceColumn:{ID:"",Name:""},DataSource:{ID:"",Name:""},TargetColumn:{ID:"",Name:""}}},n.prototype.customTypeSwitcher=function(n){var t=this.configChooserTag.find(".e-icon.bbi-masterslave-filter-add-plusIcon");n?(this.defaultContainer.css("display","none"),t.css("display","table"),this.columnConfig.css({display:"block",width:"515px"}),this.columnContainer.css({opacity:"1"}),this.scrollerRefresh(this.columnConfig)):(t.css("display","none"),this.columnConfig.css("display","none"),this.defaultContainer.css("display","block"),this.columnContainer.css({opacity:"0.5"}))},n.prototype.addCustomColumn=function(){this.renderNewConfigField();this.scrollerRefresh(this.columnConfig)},n.prototype.isDuplicate=function(n,t){for(var i=0;i<n.length;i++)if(n[i].Name===t)return!0;return!1},n.prototype.updateConfigFields=function(n){for(var r,u,t=0;t<n.length;t++){var i=this.renderNewConfigField(),f=this.customContainer.find("#"+i+"_source_column"),e=this.customContainer.find("#"+i+"_datasource_column"),o=this.customContainer.find("#"+i+"_target_column_div");f.data("BoldBIDashboardDropDownList").selectItemByText(n[t].SourceColumn.Name);e.data("BoldBIDashboardDropDownList").selectItemByValue(n[t].DataSource.ID);this.populateTargetColumn(this.targetColumnData,e,o,f,{});r=this.customContainer.find("#"+i+"_target_column");!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0?r.data("BoldBIDashboardDropDownList").selectItemByText(n[t].TargetColumn.Name):(u=this.bbdesigner$("#"+i+"_target_column_div_drop_tree_wrapper_input"),u.data("BoldBIDashboardDropDownList").model.text=u.data("BoldBIDashboardDropDownList").model.value=n[t].TargetColumn.Name,u.data("BoldBIDashboardDropDownList")._addText(n[t].TargetColumn.Name))}},n.prototype.populateCustomColumn=function(n,t){var e=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_"+n)),f=t,i=[],r,u;this.bbdesigner$.each(e.supportedColumnsForFiltering(),function(n,t){i.push({Name:t.Name,Id:t.Id})});r=this.dashboardDesigner.modules.dataSet.datasets;u=this.getTargetDataSourceList(r);this.targetColumnData=r;this.targetSourceData=u;this.sourceColumnData=i;f.length>0&&(this.updateConfigFields(f,i,u),this.isCustomColumnModified=!1)},n.prototype.getTargetDataSourceList=function(n){for(var i=[],t=0;t<n.length;t++)this.isDuplicateDataSource(i,n[t].Id)||BoldBIDashboard.isNullOrUndefined(n[t].Id)||n[t].Id===""||i.push({Name:n[t].Name,Id:n[t].Id});return i},n.prototype.isDuplicateDataSource=function(n,t){for(var i=0;i<n.length;i++)if(n[i].Id===t)return!0;return!1},n.prototype.renderNewConfigField=function(){var y=this.sourceColumnData,p=this.targetSourceData,h=this.targetColumnData,n=BoldBIDashboard.getGuid(this.id+"_row_"),r=BoldBIDashboard.buildTag("div.e-reportdesigner-column-config-row","",{padding:"4px 10px","border-radius":"4px"},{id:n,rowId:n}),o,t,s,e;this.customContainer.append(r);var u=BoldBIDashboard.buildTag("table.bbi-designer-table-dialog","",{height:"40px",width:"100%",background:"var(--designer-container-background) !important"},{unselectable:"on",id:n+"_column_config_table"}),c=BoldBIDashboard.buildTag("tr","",{},{id:n+"_link_rowTag"}),l=BoldBIDashboard.buildTag("td","",{width:"145px","padding-left":"5px"}),f=BoldBIDashboard.buildTag("input","",{"font-size":"12px"},{id:n+"_source_column"});l.append(f);o=BoldBIDashboard.buildTag("td","",{width:"145px","padding-left":"5px"},{});t=BoldBIDashboard.buildTag("input","",{"font-size":"12px"},{id:n+"_datasource_column"});o.append(t);s=BoldBIDashboard.buildTag("td","",{width:"145px","padding-left":"5px"},{});e=BoldBIDashboard.buildTag("div","",{"font-size":"12px"},{id:n+"_target_column_div"});s.append(e);var a=BoldBIDashboard.buildTag("td","",{"padding-left":"5px",width:"10px"},{id:n+"_col_error_icon"}),v=BoldBIDashboard.buildTag("td","",{"padding-right":"5px",width:"20px"}),i=BoldBIDashboard.buildTag("div.e-chk-image e-icon e-cross-circle bbi-dbrd-designer-hoverable bbi-filterConfig-master-custom-closeIcon-span bbi-filter-configuration-close","",{},{id:n+"_delete_icon","data-tooltip":"Delete"});r.append(u);u.append(c);c.append(l).append(o).append(s).append(a).append(v);this.dashboardDesigner.modules.util.renderErrIndictor(a,this.id,this.errorMsg);v.append(i);i.off("click",this.bbdesigner$.proxy(this.deleteCustomColumn,this,r));i.on("click",this.bbdesigner$.proxy(this.deleteCustomColumn,this,r));return f.BoldBIDashboardDropDownList({showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-border bbi-designer-ejwidgets bbi-dbrd-control",width:"145px",height:"26px",dataSource:y,fields:{text:"Name",value:"Id"},watermarkText:this.locale.masterSlaveWindow.sourceColumn,change:this.bbdesigner$.proxy(this.populateTargetColumn,this,h,t,e,f)}),t.BoldBIDashboardDropDownList({showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-border bbi-designer-ejwidgets bbi-dbrd-control",width:"145px",height:"26px",dataSource:p,fields:{text:"Name",value:"Id"},watermarkText:this.locale.masterSlaveWindow.targetDataSource,change:this.bbdesigner$.proxy(this.populateTargetColumn,this,h,t,e,f)}),u.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseOver,this.bbdesigner$.proxy(this.elementMouseOver,this,i)),u.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseLeave,this.bbdesigner$.proxy(this.elementMouseLeave,this,i)),n},n.prototype.updateModificationStatus=function(){this.isCustomColumnModified=!0},n.prototype.setEmptyDataSource=function(n){this.isCustomColumnModified=!0;var t=n.data("BoldBIDashboardDropDownList");t.model.dataSource.length>0&&(t.model.dataSource=[],t.clearText())},n.prototype.getCheckDataField=function(n,t,i){if(t.DataField===n)return!0;if(!BoldBIDashboard.isNullOrUndefined(t.ChildFields))for(var r=0;r<t.ChildFields.length;r++)i=this.getCheckDataField(n,t.ChildFields[r],i);return i},n.prototype.populateTargetColumn=function(n,t,i,r){var l,u,p,f,w,b,a;this.updateModificationStatus(null);var e=[],v=t.data("BoldBIDashboardDropDownList").getSelectedValue(),y=[],s=null,h=r.data("BoldBIDashboardDropDownList");BoldBIDashboard.isNullOrUndefined(h)||BoldBIDashboard.isNullOrUndefined(h.model.selectedIndex)||(s=h.model.dataSource[h.model.selectedIndex].Name);var k=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_"+this.selectedMaster.MasterInfo.ID)),d=k.DataGroupInfo.DataSourceID,o=null,c=null;if(!BoldBIDashboard.isNullOrUndefined(s)&&v.length>0&&s.length>0){for(u=0;u<n.length;u++)v===n[u].Id&&(e=n[u].Fields,c=n[u]),d===n[u].Id&&(o=n[u]);if(l=null,!BoldBIDashboard.isNullOrUndefined(o))for(u=0;u<o.Fields.length;u++)if(p=this.getCheckDataField(s,o.Fields[u],!1),p){l=o.Fields[u].TypeName;break}for(f=0;f<e.length;f++)l===e[f].TypeName&&y.push({Name:e[f].Name,Id:e[f].Id});BoldBIDashboard.isNullOrUndefined(c)||BoldBIDashboard.isNullOrUndefined(c.TreeViewData)?(!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0&&i[0].hasChildNodes()&&i[0].children[0].remove(),a=BoldBIDashboard.buildTag("input","",{"font-size":"12px"},{id:i.closest(".e-reportdesigner-column-config-row").attr("id")+"_target_column"}),i.append(a),a.BoldBIDashboardDropDownList({showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-border bbi-designer-ejwidgets bbi-dbrd-control",width:"145px",height:"26px",dataSource:y,fields:{text:"Name",value:"Id"},watermarkText:this.locale.masterSlaveWindow.targetColumn,change:this.bbdesigner$.proxy(this.updateModificationStatus,this)})):(!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0&&i[0].hasChildNodes()&&i[0].children[0].remove(),w=JSON.parse(c.TreeViewData),b={fields:{id:"ColumnId",parentId:"ParentId",hasChild:"HasChild",dataSource:w.Dimension,text:"Name"},callBackInstance:this,callBackMethod:"updateModificationStatus",watermarkText:this.locale.masterSlaveWindow.targetColumn,popupHeight:"100%",width:"145",height:"26px",optionalArgs:null},new BoldBIDashboard.DashboardDesignerUtility.DropdownTreeview(this.dashboardDesigner,b,i))}},n.prototype.removeEmptyCustomColumn=function(){var n=this,t,i;this.customContainer.find(".e-reportdesigner-column-config-row").length>0&&(t=this.customContainer.find(".e-reportdesigner-column-config-row"),i=this.bbdesigner$,t.each(function(t,r){var u=i(r).attr("id");n.isEmptyRow(u)&&n.customContainer.find("#"+u).remove()}),this.scrollerRefresh(this.columnConfig))},n.prototype.isEmptyRow=function(n){var u=this.customContainer.find("#"+n+"_source_column").data("BoldBIDashboardDropDownList").getSelectedValue(),f=this.customContainer.find("#"+n+"_datasource_column").data("BoldBIDashboardDropDownList").getSelectedValue(),t,i=this.customContainer.find("#"+n+"_target_column"),r=this.bbdesigner$("#"+n+"_target_column_div_drop_tree_wrapper_input");return(!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0?t=i.data("BoldBIDashboardDropDownList").getSelectedValue():!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0&&(t=r.data("BoldBIDashboardDropDownList").getSelectedValue()),!(u.length>0)||!(f.length>0)||!(t.length>0))?!0:!1},n.prototype.deleteCustomColumn=function(n){this.customContainer.find(".e-reportdesigner-column-config-row").length>0&&(this.isEmptyRow(n.attr("id"))||(this.isCustomColumnModified=!0),n.remove(),this.scrollerRefresh(this.columnConfig))},n.prototype.getDefaultFilterConditions=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_"+n)),i=[];return t.isDefaultDataWidget()||(i=this.filterSerializer.getFilterCondition(t)),i},n.prototype.updateGridValues=function(n){for(var i=this.getDefaultFilterConditions(n),r=[],t=0;t<i.length;t++)r.push({SourceColumn:i[t].SourceColumn.Name,TargetColumn:i[t].TargetColumn.Name,TargetDataSource:i[t].DataSource.Name});this.ejColumnGridObj.setModel({dataSource:r})},n.prototype.scrollerRefresh=function(n){n.data("BoldBIDashboardScroller")&&n.data("BoldBIDashboardScroller").refresh()},n.prototype.updateFilterConfig=function(){this.updateMasterDetails();this.targetInstance!==null&&(BoldBIDashboard.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.filterActionInfo]),this.isFilterProfileModified||this.closeFilterWindow());this.isFilterProfileModified=!1},n.prototype.openFilterConfiguration=function(n,t,i){this.ejFilterDialog.open();this.resetFilter();this.targetInstance=n;this.targetMethod=t;this.filterActionInfo=this.bbdesigner$.extend(!0,{},i);this.filterActionInfo.MastersCollection.length>0?(this.setDefaultSelection(),this.populateValues(),this.disableFilterConfigArea(!1)):(this.disableFilterConfigArea(!0),this.masterWidgetAddIconDiv.removeAttr("disabled"))},n.prototype.setDefaultSelection=function(){this.filterActionInfo.MastersCollection.length>0&&(this.selectedMaster=this.filterActionInfo.MastersCollection[0]);this.selectedMaster.ProfileManager.length>0&&(this.selectedProfile=this.selectedMaster.ProfileManager[0])},n.prototype.populateValues=function(){this.populateMasterArea();this.populateProfileArea(!0)},n.prototype.populateMasterArea=function(){var n,t;if(this.masterUlTag.children().length>0&&(this.masterUlTag.empty(),this.scrollerRefresh(this.masterListContainer)),this.filterActionInfo.MastersCollection.length>0){for(n=0;n<this.filterActionInfo.MastersCollection.length;n++)t=this.filterActionInfo.MastersCollection[n].MasterInfo,this.appendMasterList(t);this.masterUlTag.find("li").first().addClass("bbi-masterwidget-user-selection-active");this.masterUlTag.find("span").first().addClass("bbi-masterwidget-user-selection-active")}},n.prototype.populateProfileArea=function(n){if(this.selectedMaster.ProfileManager.length>0){if(this.resetColumnConfiguration(),n){this.resetProfileFields();for(var t=0;t<this.selectedMaster.ProfileManager.length;t++)this.appendProfileElement(this.selectedMaster.MasterInfo.Name,this.selectedMaster.MasterInfo.ID,this.selectedMaster.ProfileManager[t].ProfileInfo.Name,!0);this.profileField.find(".e-filter-profileList li").first().addClass("bbi-masterwidget-user-selection-active")}this.populateSlaveArea();this.populateDefaultArea();this.populateCustomArea()}else this.resetColumnConfiguration(),this.resetProfileFields(),this.resetListenerContainer(),this.disableFilterConditionSlaveWidgetArea(!0,!1),this.updateBtnTag.prop("disabled",!0);this.scrollerRefresh(this.profileField)},n.prototype.populateSlaveArea=function(){this.populateListenerWidgets(this.selectedProfile.WidgetInfo,this.selectedMaster.MasterInfo)},n.prototype.populateDefaultArea=function(){this.updateGridValues(this.selectedMaster.MasterInfo.ID)},n.prototype.populateCustomArea=function(){BoldBIDashboard.isNullOrUndefined(this.selectedProfile)||(this.populateCustomColumn(this.selectedMaster.MasterInfo.ID,this.selectedProfile.ProfileInfo.FilterCondition),this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("checked",this.selectedProfile.ProfileInfo.Option),this.customTypeSwitcher(this.selectedProfile.ProfileInfo.Option))},n.prototype.disableFilterConfigArea=function(n){n?(this.profileField.css({opacity:"0.5"}),this.disableFilterConditionSlaveWidgetArea(n)):(this.profileField.css({opacity:"1"}),this.disableFilterConditionSlaveWidgetArea(n))},n.prototype.disableAddIcon=function(n){n===void 0&&(n=!0);n?(this.profileAddIcon.attr("disabled","true").css("opacity","0.5"),this.filterProfileAddIconDiv.attr("disabled","true"),this.masterWidgetAddIconDiv.attr("disabled","true"),this.customAddIconDiv.attr("disabled","true")):(this.profileAddIcon.removeAttr("disabled").css("opacity","1"),this.filterProfileAddIconDiv.removeAttr("disabled"),this.masterWidgetAddIconDiv.removeAttr("disabled"),this.customAddIconDiv.removeAttr("disabled"))},n.prototype.disableFilterConditionSlaveWidgetArea=function(n,t){t===void 0&&(t=!0);n?(this.listenerField.prop("disabled","true").css({opacity:"0.5"}),this.configChooserTag.find("#"+this.id+"_filter_config_default_rdo_input").prop("disabled",!0),this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("disabled",!0),this.disableAddIcon(t),this.configChooserTag.css("opacity","0.5"),this.columnContainer.find("#"+this.id+"_custom_column_container .e-dropdownlist").BoldBIDashboardDropDownList("disable"),this.filterContainer.find("#"+this.id+"_filter_config_listener_list .e-checkbox").BoldBIDashboardCheckBox("disable")):(this.listenerField.removeAttr("disabled").css({opacity:"1"}),this.configChooserTag.find("#"+this.id+"_filter_config_default_rdo_input").prop("disabled",!1),this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("disabled",!1),this.disableAddIcon(!1),this.configChooserTag.css("opacity","1"),this.columnContainer.find("#"+this.id+"_custom_column_container .e-dropdownlist").BoldBIDashboardDropDownList("enable"),this.filterContainer.find("#"+this.id+"_filter_config_listener_list .e-checkbox").BoldBIDashboardCheckBox("enable"))},n.prototype.resetProfileFields=function(){this.profileField.find(".e-filter-profileList li").remove()},n.prototype.resetColumnConfiguration=function(){this.configChooserTag.find("#"+this.id+"_filter_config_default_rdo_input").prop("checked",!0);this.customTypeSwitcher(!1);this.destroyCustomContainer();this.customContainer.empty();this.ejColumnGridObj.setModel({dataSource:[]})},n.prototype.destroyCustomContainer=function(){BoldBIDashboard.DashboardUtil.destroyEjObjects(this.customContainer)},n.prototype.resetFilter=function(){this.masterUlTag.children().length>0&&(this.masterUlTag.empty(),this.scrollerRefresh(this.masterListContainer));this.resetListenerContainer();this.resetProfileFields();this.resetColumnConfiguration();this.reportItems=[];this.targetInstance=null;this.targetMethod=null;this.isCustomColumnModified=!1;this.filterActionInfo=null},n.prototype.closeFilterWindow=function(){this.filterContainer.find(".e-selected-textbox").length>0||(this.resetFilter(),this.disableFilterConfigArea(!1),this.ejFilterDialog.close())},n.prototype.destroy=function(){this.unWireEvents();BoldBIDashboard.DashboardUtil.destroyEjObjects(this.dashboardDesigner.element.find("#"+this.id+"_add_master"));this.dashboardDesigner.element.find("#"+this.id+"_add_master").length>0&&this.dashboardDesigner.element.find("#"+this.id+"_add_master").remove();BoldBIDashboard.DashboardUtil.destroyEjObjects(this.dashboardDesigner.element.find("#"+this.id+"_filter_configuration"));this.dashboardDesigner.element.find("#"+this.id+"_filter_configuration").length>0&&this.dashboardDesigner.element.find("#"+this.id+"_filter_configuration").remove()},n.prototype.renderMasterWindow=function(){var n=BoldBIDashboard.buildTag("div.bbi-userselect","",{},{id:this.id+"_add_master"}),i=BoldBIDashboard.buildTag("div","",{"padding-bottom":"10px"}),o=BoldBIDashboard.buildTag("span",this.locale.masterSlaveWindow.chooseWidgetText,{}),t=this.masterScrollElement=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{width:"100%",height:"300px",border:"1px solid var(--designer-primary-border-color)","border-radius":"4px",padding:"5px 0px"},{id:this.id+"_add_master_container"}),r=BoldBIDashboard.buildTag("div","",{}),u=this.masterElementContainer=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_add_master_fields"}),s=BoldBIDashboard.buildTag("table.e-designer-master-table","",{}),f,e;u.append(s);r.append(u);t.append(r);i.append(o);n.append(i).append(t);f=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-small",this.locale.masterSlaveWindow.okButtonText,{float:"right"},{id:this.id+"_master_add_ok_btn",type:"button"});e=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-secondary bbi-dbrd-btn-small bbi-dbrd-margin-left",this.locale.masterSlaveWindow.cancelButtonText,{float:"right"},{id:this.id+"_master_add_cancel_btn",type:"button"});this.dashboardDesigner.element.append(n);n.BoldBIDashboardDialog({width:"auto",height:"auto",minWidth:"280px",minHeight:"215px",title:this.locale.masterSlaveWindow.addWidgetDialogAlertTitle,enableResize:!1,showOnInit:!1,showFooter:!0,cssClass:"bbi-designer-dialog boldbi-dashboarddesigner",enableModal:!0,close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,closeIconTooltip:this.locale.dialogOptions.closeButtonText});t.BoldBIDashboardScroller({scrollerSize:5,height:"190px",width:"auto",enableTouchScroll:!0,autoHide:!0,buttonSize:0});this.masterFooterTag=this.dashboardDesigner.element.find("#"+this.id+"_add_master_foot");this.masterFooterTag.append(e).append(f);this.ejMasterDialog=n.data("BoldBIDashboardDialog")},n.prototype.isAvailableMaster=function(n){for(var t=0;t<this.filterActionInfo.MastersCollection.length;t++)if(n===this.filterActionInfo.MastersCollection[t].MasterInfo.ID)return!0;return!1},n.prototype.getMasterWidgetsJson=function(){for(var t=this.filterSerializer.getMastetFilterWidgets(),i=[],n=0;n<t.length;n++)i.push(t[n].getJson());return i},n.prototype.getRemainingWidgets=function(){for(var t=this.getMasterWidgetsJson(),i=[],n=0;n<t.length;n++)this.isAvailableMaster(t[n].UniqueName)||i.push(this.getWidgetJSON(t[n].UniqueName,t[n].ContainerSettings.Title));return i},n.prototype.profileManager=function(){return{ProfileInfo:null,WidgetInfo:[]}},n.prototype.createProfileInfo=function(){return{ID:"",Name:"",FilterCondition:[],Option:!1}},n.prototype.createMasterInfo=function(){return{ID:"",Name:""}},n.prototype.createWidgetInfo=function(){return{ID:"",Name:""}},n.prototype.createMasterCollectionJSON=function(){return{MasterInfo:null,ProfileManager:[]}},n.prototype.generateWidgetInfo=function(n){for(var r,u=[],i=this.filterSerializer.getWidgetList(),t=0;t<i.length;t++)i[t].ID!==n&&(r=this.createWidgetInfo(),r.ID=i[t].ID,r.Name=i[t].Name,u.push(r));return u},n.prototype.getWidgetJSON=function(n,t){var r=this.createMasterCollectionJSON(),i=this.createMasterInfo();return i.ID=n,i.Name=t,r.MasterInfo=i,r},n.prototype.openMasterDialog=function(){if(this.reportItems=this.getRemainingWidgets(),this.reportItems.length>0)this.resetMasterFields(),this.ejMasterDialog.open(),this.populateMastersInMasterDialog(this.reportItems);else{var n=this.reportItems.length>0?"more":" ";this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.alertWindow.noBtnText+n+this.locale.masterSlaveWindow.widgetsAvailable,IconType.information,AlertType.Alert,!1,"")}},n.prototype.addMasterItems=function(){this.openMasterDialog()},n.prototype.populateMastersInMasterDialog=function(n){for(var i=this.masterElementContainer.find(".e-designer-master-table"),t=0;t<n.length;t++)this.checkBoxWithElementsCreation(n[t].MasterInfo.Name,n[t].MasterInfo.ID,this.id+"_master_"+n[t].MasterInfo.ID.replace(" ",""),!1,i,"0px 20px 5px 10px");this.scrollerRefresh(this.masterScrollElement)},n.prototype.checkBoxWithElementsCreation=function(n,t,i,r,u,f){var s=BoldBIDashboard.buildTag("tr","",{id:i+"_tr"}),h=BoldBIDashboard.buildTag("td","",{align:"left",padding:f},{});s.append(h);u.append(s);var c=BoldBIDashboard.buildTag("div","",{display:"inline-block"},{}),e=BoldBIDashboard.buildTag("input","",{},{type:"checkbox",id:i}),o=BoldBIDashboard.buildTag("label.bbi-dashbrd-filter-widget-label bbi-dbrd-designer-hoverable",n,{height:"20px"},{"for":i,type:"label"});BoldBIDashboard.DashboardUtil.isExistTextWidth(o)&&o.attr("data-tooltip",n);c.append(e,o);h.append(c);r?e.BoldBIDashboardCheckBox({cssClass:"bbi-designer-param-assign bbi-designer-filter-checktext",change:this.bbdesigner$.proxy(this.changedCheckBoxValue,this,n,t)}):e.BoldBIDashboardCheckBox({cssClass:"bbi-designer-param-assign bbi-designer-filter-checktext"})},n.prototype.changedCheckBoxValue=function(n,t,i){var o,y,s,l,a,f,h,e,c,r,v,u;for(this.isChangedCheckBoxValue=!0,o=!1,y=0,s=0;s<this.selectedProfile.WidgetInfo.length;s++)if(this.selectedProfile.WidgetInfo[s].ID===t){o=!0;y=s;break}if(l=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_"+t)),i.isChecked){if(a=[],this.selectedMaster.MasterInfo.IsPoP&&!o){for(f=0;f<this.filterActionInfo.MastersCollection.length;f++)if(this.filterActionInfo.MastersCollection[f].MasterInfo.IsPoP&&this.filterActionInfo.MastersCollection[f].MasterInfo.ID!==this.selectedMaster.MasterInfo.ID)for(h=this.filterActionInfo.MastersCollection[f].ProfileManager,e=0;e<h.length;e++)for(c=0;c<h[e].WidgetInfo.length;c++)a.indexOf(h[e].WidgetInfo[c].ID)<0&&a.push(h[e].WidgetInfo[c].ID);if(a.indexOf(t)>-1){for(r=0;r<this.filterActionInfo.MastersCollection.length;r++)if(this.filterActionInfo.MastersCollection[r].MasterInfo.IsPoP&&this.filterActionInfo.MastersCollection[r].MasterInfo.ID!==this.selectedMaster.MasterInfo.ID)for(v=0;v<this.filterActionInfo.MastersCollection[r].ProfileManager[0].WidgetInfo.length;v++)this.filterActionInfo.MastersCollection[r].ProfileManager[0].WidgetInfo[v].ID===t&&this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.SlaveWidgetOverrideTitle,this.locale.alertWindowMesages.slaveOverrideMessage+this.filterActionInfo.MastersCollection[r].MasterInfo.Name+this.locale.alertWindowMesages.slaveOverrideAlert+this.selectedMaster.MasterInfo.Name+" ? ",IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{},instance:this,method:"confirmOverrideSlaveWidget"})}else l.isFieldBoundInUnsupportedSection()&&this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.SlaveWidgetOverrideTitle,this.locale.alertWindowMesages.slaveWidgetDataResetMessage,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{},instance:this,method:"confirmOverrideSlaveWidget"})}o||(u=new WidgetInfo,u.ID=t,u.Name=n,u.IsPoPSupported=BoldBIDashboard.isNullOrUndefined(l)?!1:l.IsPoPSupportedWidget,this.selectedProfile.WidgetInfo.push(u))}else u=this.selectedProfile.WidgetInfo,o&&u.splice(y,1),this.selectedProfile.WidgetInfo=u;i.isInteraction&&this.updateListenerCheckAllSelection(this.selectedProfile.WidgetInfo)},n.prototype.updateListenerCheckAllSelection=function(n){var t=this.dashboardDesigner.element.find("#"+this.id+"_filter_config_checkAllTag").data("BoldBIDashboardCheckBox");n.length===0?this.updateCheckAllSelection(t,!1,"uncheck"):this.listenerElementContainer.find(".e-designer-listener-table tr").length===n.length?this.updateCheckAllSelection(t,!0,"check"):n.length<this.listenerElementContainer.find(".e-designer-listener-table tr").length&&this.updateCheckAllSelection(t,null,"indeterminate")},n.prototype.updateCheckAllSelection=function(n,t,i){BoldBIDashboard.isNullOrUndefined(n)||(i==="indeterminate"?(n.setModel({enableTriState:!0,checkState:i}),this.updateBtnTag.prop("disabled",!1)):(n.setModel({enableTriState:!1,checkState:i,checked:t}),this.updateBtnTag.prop("disabled",!t)))},n.prototype.confirmOverrideSlaveWidget=function(n){var t,i,r;if(n){for(t=0;t<this.filterActionInfo.MastersCollection.length;t++)if(this.filterActionInfo.MastersCollection[t].MasterInfo.IsPoP&&this.filterActionInfo.MastersCollection[t].MasterInfo.ID!==this.selectedMaster.MasterInfo.ID)for(i=0;i<this.filterActionInfo.MastersCollection[t].ProfileManager[0].WidgetInfo.length;i++)for(r=0;r<this.selectedProfile.WidgetInfo.length;r++)this.filterActionInfo.MastersCollection[t].ProfileManager[0].WidgetInfo[i].ID===this.selectedProfile.WidgetInfo[r].ID&&this.filterActionInfo.MastersCollection[t].ProfileManager[0].WidgetInfo.splice(i,1)}else this.populateListenerWidgets([],this.selectedMaster.MasterInfo)},n.prototype.updateMasterInfoTimeOut=function(){var n=this;clearTimeout(this.masterInfoTimeOut);this.masterInfoTimeOut=setTimeout(function(){n.updateMasterInfo()},250)},n.prototype.updateMasterInfo=function(){for(var t,i=[],r=[],n=0;n<this.reportItems.length;n++)t=!1,t=this.dashboardDesigner.element.find("#"+this.id+"_master_"+this.reportItems[n].MasterInfo.ID.replace(" ","")).data("BoldBIDashboardCheckBox").isChecked(),t?(i.push(this.reportItems[n]),this.filterActionInfo.MastersCollection.push(this.bbdesigner$.parseJSON(JSON.stringify(this.getMasterInformation(this.reportItems[n].MasterInfo.ID))))):r.push(this.reportItems[n]);i.length>0?(this.reportItems=r,this.closeMasterWindow(),this.disableFilterConfigArea(!1),this.masterUlTag.find("li").length>0&&this.updateMasterDetails(),this.setDefaultSelection(),this.populateValues()):this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.masterWidget,this.locale.masterSlaveWindow.selectWidget,IconType.errors,AlertType.Alert,!1,"")},n.prototype.getMasterInformation=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_"+n)),i=this.filterSerializer.getWidgetList();return this.filterSerializer.generateMasterInformation(t,i)},n.prototype.resetMasterFields=function(){this.masterElementContainer.find(".e-designer-master-table tr").remove()},n.prototype.closeMasterWindow=function(){this.ejMasterDialog.close()},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.FilterConfiguration",InternalFilterConfiguration,window);var FilterConfigurationModel=function(){function n(){this.MastersCollection=[]}return n}(),Widgetcollection=function(){function n(){this.MasterInfo=new MasterInfo;this.ProfileManager=[]}return n}(),MasterInfo=function(){function n(){this.ID=null;this.Name=null;this.IsPoP=!1;this.UniqueId=null;this.IsDatebucket=!1}return n}(),ProfileManager=function(){function n(){this.ProfileInfo=new ProfileInfo;this.WidgetInfo=[]}return n}(),ProfileInfo=function(){function n(){this.ID=null;this.Option=!0;this.Name=null;this.FilterCondition=[]}return n}(),FilterCondition=function(){function n(){this.SourceColumn=new ColumnDetail;this.TargetColumn=new ColumnDetail;this.DataSource=new ColumnDetail}return n}(),ColumnDetail=function(){function n(){this.ID=null;this.Name=null}return n}(),WidgetInfo=function(){function n(){this.ID=null;this.Name=null;this.IsPoPSupported=!1;this.UniqueId=null}return n}(),InternalFilterConfigurationInfo=function(){function n(){this.filterConfigurationModel=null;this.datebucketConfigurationModel=null}return n.prototype.setFilterConfiguration=function(n){this.filterConfigurationModel=n},Object.defineProperty(n.prototype,"FilterConfigurationModel",{get:function(){return this.filterConfigurationModel},enumerable:!1,configurable:!0}),n.prototype.setDatebucketConfigurationModel=function(n){this.datebucketConfigurationModel=n},Object.defineProperty(n.prototype,"DatebucketConfigurationModel",{get:function(){return this.datebucketConfigurationModel},enumerable:!1,configurable:!0}),n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.FilterConfigurationInfo",InternalFilterConfigurationInfo,window);var Settings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.Settings";this.MasterSlaveFilterActions=[]}return n}(),MasterSlaveFilterAction=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.MasterSlaveFilterAction";this.FilterActions=[];this.IsPoPWidget=!1;this.IsDatebucketWidget=!1}return n}(),FilterAction=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.FilterAction";this.Slaves=[];this.FilterCases=[]}return n}(),FilterShell=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.FilterShell";this.SourceColumn=new ColumnAliasPair;this.TargetColumn=new ColumnAliasPair}return n}(),ColumnAliasPair=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.ColumnAliasPair"}return n}(),FilterActionScheme;(function(n){n[n.All=0]="All";n[n.Selected=1]="Selected"})(FilterActionScheme||(FilterActionScheme={}));InternalMasterSlaveFilterSerializationHelper=function(){function n(n){this.filterObject=null;this.nonSlaveFilterWidgets=[];this.allSpecialChar="&ZeroWidthSpace;";this.dashboardDesigner=null;this.isInteractionCompleted=!0;this.isInteraction=!1;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.filterObject=this.dashboardDesigner.modules.filterConfigurationInfo;this.widgetHelper=this.dashboardDesigner.modules.widgetHelper;this.dateFormat=this.dashboardDesigner.model.localeSettings.dateFormat;this.dateTimeFormat=this.dashboardDesigner.model.localeSettings.dateFormat+" "+this.dashboardDesigner.model.localeSettings.timeFormat}return n.prototype.getFilterConfigurationInfoInstance=function(){return this.filterObject},n.prototype.getMastetFilterWidgets=function(n){var t=this,i=n||this.widgetHelper.getAllWidgets();return i.filter(function(n){return n.canUseWidgetAsMaster()&&t.isChildWidgetRequiredForInitialFilter(n)&&!t.checkParameterFieldBinded(n)})},n.prototype.getSlaveFilterWidgets=function(n){var t=this;return n.filter(function(n){return t.canUseAsSlaveWidget(n.Type)&&t.isChildWidgetRequiredForInitialFilter(n)&&!t.checkParameterFieldBinded(n)})},n.prototype.isChildWidgetRequiredForInitialFilter=function(n){if(!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(n.getContainerSettings().CombineWidgetId)){var t=this.dashboardDesigner.modules.containerTypeWidgetHelper.getContainerWidget(n);return t.shouldallowChildWidgetForFilterInteraction()}return!0},n.prototype.checkParameterFieldBinded=function(n){return!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.DataGroupInfo)&&n.DataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(n.DataGroupInfo.FieldContainers[0].FieldInfos)&&n.DataGroupInfo.FieldContainers[0].FieldInfos.length>0?n.DataGroupInfo.FieldContainers[0].FieldInfos[0].IsParameterField:!1},n.prototype.canUseAsSlaveWidget=function(n){return this.nonSlaveFilterWidgets.indexOf(n.toLowerCase())===-1},n.prototype.GetWidgetCollectionsFromContainer=function(){for(var i,f,c,e,r,o,v,n,y,l=this.widgetHelper.getAllWidgets(),u=this.getMastetFilterWidgets(l),s=this.getWidgetList(l),a=this.getWidgetList(l),h=[],p=[],t=0;t<u.length;t++)u[t].getJson().FilterSettings.ActAsMasterWidget&&h.push(u[t]),u[t].IsPoPWidget&&p.push(u[t]);for(i=new FilterConfigurationModel,f=0;f<h.length;f++){if(c=[],h[f].IsPoPWidget){for(n=0;n<i.MastersCollection.length;n++)if(i.MastersCollection[n].MasterInfo.IsPoP)for(e=i.MastersCollection[n].ProfileManager,r=0;r<e.length;r++)for(o=0;o<e[r].WidgetInfo.length;o++)c.indexOf(e[r].WidgetInfo[o].ID)<0&&c.push(e[r].WidgetInfo[o].ID);for(v=function(n){if(c.indexOf(a[n].ID)>-1){var t=s.filter(function(t){return t.ID===a[n].ID})[0];s.splice(s.indexOf(t),1)}},n=0;n<a.length;n++)v(n)}y=this.generateMasterInformation(h[f],s);i.MastersCollection.push(y)}return i},n.prototype.getWidgetList=function(n){for(var r,f=n||this.widgetHelper.getAllWidgets(),i=this.getSlaveFilterWidgets(f),u=[],t=0;t<i.length;t++)i[t].Type.toLowerCase()!=="label"&&i[t].getJson().FilterSettings.IgnoreFilterActions||(r=new WidgetInfo,r.ID=i[t].Name,r.Name=i[t].getJson().ContainerSettings.Title,r.IsPoPSupported=i[t].IsPoPSupportedWidget,r.UniqueId=i[t].getJson().UniqueId,i[t].isDefaultDataWidget()||u.push(r));return u},n.prototype.generateMasterInformation=function(n,t){var i=new Widgetcollection,r=new ProfileInfo,f=[],u=new ProfileManager;return BoldBIDashboard.isNullOrUndefined(n)||(r.FilterCondition=this.getFilterCondition(n),r.Name=n.getJson().ContainerSettings.Title+"(generated)",r.Option=!1,f=this.getSlaveWidgetList(t,n),u.ProfileInfo=r,u.WidgetInfo=f,i.MasterInfo.ID=n.Name,i.MasterInfo.Name=n.getJson().ContainerSettings.Title,i.MasterInfo.IsPoP=n.IsPoPWidget,i.MasterInfo.UniqueId=n.getJson().UniqueId,i.ProfileManager.push(u)),i},n.prototype.getSlaveWidgetList=function(n,t){for(var r=this.bbdesigner$.extend(!0,[],n),u=[],i=0;i<r.length;i++)r[i].ID!==t.Name&&(t.IsPoPWidget||u.push(r[i]));return this.slavesForMasterInCombineWidget(u,t.getJson().UniqueId)},n.prototype.slavesForMasterInCombineWidget=function(n,t){for(var f,e,u=this.bbdesigner$.extend(!0,[],n),s=this.widgetHelper.getAllWidgets().filter(function(n){return BoldBIDashboard.Dashboard.WidgetHelper.isContainerWidget(n)}),i=[],r=0;r<s.length;r++)if(f=this.dashboardDesigner.modules.containerTypeWidgetHelper.getWidgetAsContainerWidget(s[r]),i=i.concat(f.getChildWidgetList()),f.isMasterPresentInChild(t)){i=[];i=f.getChildWidgetList();break}if(i.indexOf(t)!==-1&&i.length>0)for(u=[],e=0;e<n.length;e++)for(r=0;r<i.length;r++){var c=i[r],o=n[e],h=o.UniqueId;if(!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(h))if(i.indexOf(t)!==-1){if(c===h){u.push(o);break}}else u.push(o)}return u},n.prototype.getFilterCondition=function(n){var e=[],i,f,o,u,t,r,s;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.supportedColumnsForFiltering())){for(i=n.supportedColumnsForFiltering(),f=this.dashboardDesigner.modules.dataSet.datasets,o=[],u=0;u<f.length;u++)n.DataGroupInfo.DataSourceID!==f[u].Id&&o.push(f[u]);for(t=0;t<i.length;t++)r=new FilterCondition,r.SourceColumn.ID=i[t].Id,r.SourceColumn.Name=i[t].Name,r.TargetColumn.ID=i[t].Id,r.TargetColumn.Name=i[t].Name,r.DataSource.ID=n.DataGroupInfo.DataSourceID,r.DataSource.Name=n.DataGroupInfo.DataSourceName,s=this.getFieldType(i[t].Name,i[t].DatasourceID,i[t].Id),e.push(r),this.GetMatchedFieldFromOtherDataSets(o,i[t],s,e)}return e},n.prototype.GetMatchedFieldFromOtherDataSets=function(n,t,i,r){for(var o,f,u,e=0;e<n.length;e++)for(o=n[e].Fields,f=0;f<o.length;f++)t.Name===o[f].DataField&&i.toLowerCase()===o[f].TypeName.toLowerCase()&&(u=new FilterCondition,u.SourceColumn.ID=t.Id,u.SourceColumn.Name=t.Name,u.TargetColumn.ID=o[f].Id,u.TargetColumn.Name=o[f].DataField,u.DataSource.ID=n[e].Id,u.DataSource.Name=n[e].Name,r.push(u))},n.prototype.getFieldType=function(n,t,i){for(var u,o,s,r,e=this.dashboardDesigner.modules.dataSet.datasets,f=0;f<e.length;f++)if(t===e[f].Id)if(u=e[f].Fields,o=null,BoldBIDashboard.isNullOrUndefined(u[0].ChildFields)){for(r=0;r<u.length;r++)if(n===u[r].DataField)return u[r].TypeName}else{for(r=0;r<u.length;r++)if(s=this.getCurrentFieldInfo(u[r],i),!BoldBIDashboard.isNullOrUndefined(s)){o=s.TypeName;break}return o}return null},n.prototype.getCurrentFieldInfo=function(n,t){var i=null,r;if(n.Id===t)i=n;else if(!BoldBIDashboard.isNullOrUndefined(n.ChildFields))for(r=0;r<n.ChildFields.length;r++)if(i=this.getCurrentFieldInfo(n.ChildFields[r],t),!BoldBIDashboard.isNullOrUndefined(i))break;return i},n.prototype.ActAsMasterPropertyChangeInFilterConfigInfo=function(n,t){var i=this.dashboardDesigner.designerPanel.selectedReportItems.length>0?this.getCurrentWidgetInstance():t,u,f,r,e;if(BoldBIDashboard.Dashboard.WidgetHelper.isDataWidget(i))if(u=this.getWidgetList(),this.filterObject.FilterConfigurationModel!=null){if(n)f=this.generateMasterInformation(i,u),this.filterObject.FilterConfigurationModel.MastersCollection.push(f),this.showOrHideClearFilterIcon(i.ControlContainer.find(".bbi-dbrd-control-header"),n);else{for(r=0;r<this.filterObject.FilterConfigurationModel.MastersCollection.length;r++)i.Name===this.filterObject.FilterConfigurationModel.MastersCollection[r].MasterInfo.ID&&this.filterObject.FilterConfigurationModel.MastersCollection.splice(r,1);n||i.clearFilter();this.showOrHideClearFilterIcon(i.ControlContainer.find(".bbi-dbrd-control-header"),n)}e=this.getFilterConfigurationModelCollectionValue();this.masterSlaveFilterSerializer(e)}else n||i.ControlHeader===null||i.ControlHeader.parents(".bbi-dbrd-control-container").attr("controlType")!==BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(WidgetType,WidgetType.Filter)||i.clearFilter(),this.showOrHideClearFilterIcon(i.ControlContainer.find(".bbi-dbrd-control-header"),n)},n.prototype.getFilterConfigurationModelCollectionValue=function(){var n=[];return this.filterObject.FilterConfigurationModel.MastersCollection.forEach(function(t){n.push(t)}),this.filterObject.DatebucketConfigurationModel.MastersCollection.forEach(function(t){n.push(t)}),n},n.prototype.RefreshMasterSlaveTitle=function(){var t,u,i,s,n,o,f,e,r;if(this.filterObject.FilterConfigurationModel!==null)for(t=this.GetAllWidgetInstanceFromContainer(),u=this.filterObject.FilterConfigurationModel.MastersCollection,i=0;i<u.length;i++)for(s=u[i].MasterInfo.ID,n=0;n<t.length;n++)for(s===t[n].Name&&(this.filterObject.FilterConfigurationModel.MastersCollection[i].MasterInfo.Name=t[n].getJson().ContainerSettings.Title),o=u[i].ProfileManager,f=0;f<o.length;f++)for(e=o[f].WidgetInfo,r=0;r<e.length;r++)e[r].ID===t[n].Name&&(e[r].Name=t[n].getJson().ContainerSettings.Title)},n.prototype.IgnoreFilterActionPropertyChange=function(n,t){var i,h,r,s,u,c,e,f,o,l,a;if(t===void 0&&(t=null),i=BoldBIDashboard.isNullOrUndefined(t)?this.getCurrentWidgetInstance():t,this.filterObject.FilterConfigurationModel!=null){if(n){for(s=this.filterObject.FilterConfigurationModel.MastersCollection,u=0;u<s.length;u++)if(c=s[u].MasterInfo,i.Name!==c.ID)for(e=s[u].ProfileManager,f=0;f<e.length;f++)for(o=0;o<e[f].WidgetInfo.length;o++)l=e[f].WidgetInfo[o].ID,i.Name===l&&e[f].WidgetInfo.splice(o,1)}else for(h=function(n){var p=r.filterObject.FilterConfigurationModel.MastersCollection[n].MasterInfo,t,f,y,e,o,s,l,h,v;if(i.Name!==p.ID&&r.canUseAsSlaveWidget(i.Type))for(t=new WidgetInfo,t.ID=i.Name,t.Name=i.getJson().ContainerSettings.Title,t.IsPoPSupported=i.IsPoPSupportedWidget,t.UniqueId=i.getJson().UniqueId,f=0;f<r.filterObject.FilterConfigurationModel.MastersCollection[n].ProfileManager.length;f++){if(y=!1,r.filterObject.FilterConfigurationModel.MastersCollection[n].MasterInfo.IsPoP&&t.IsPoPSupported)for(e=0;e<=f;e++)if(o=r.filterObject.FilterConfigurationModel.MastersCollection[e],o.MasterInfo.IsPoP)for(s=0;s<o.ProfileManager.length;s++)for(l=o.ProfileManager[s].WidgetInfo,h=0;h<l.length;h++)l[h].ID===t.ID&&(y=!0);if(!r.filterObject.FilterConfigurationModel.MastersCollection[n].MasterInfo.IsPoP){var c=[],a=r.filterObject.FilterConfigurationModel.MastersCollection[n],u=a.ProfileManager[f];BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(a.MasterInfo.UniqueId)||(c.push(t),c=r.slavesForMasterInCombineWidget(c,a.MasterInfo.UniqueId));c.length>0?u.WidgetInfo.filter(function(n){return n.Name===t.Name}).length===0&&u.WidgetInfo.push(t):u.WidgetInfo.filter(function(n){return n.Name===t.Name}).length>0&&(v=u.WidgetInfo.indexOf(u.WidgetInfo.filter(function(n){return n.Name===t.Name})[0]),v!==-1&&u.WidgetInfo.splice(v,1))}}},r=this,u=0;u<this.filterObject.FilterConfigurationModel.MastersCollection.length;u++)h(u);a=this.getFilterConfigurationModelCollectionValue();this.masterSlaveFilterSerializer(a)}},n.prototype.GetAllWidgetInstanceFromContainer=function(){for(var r,t=[],i=BoldBIDashboard.Dashboard.WidgetHelper.getAllWidgetElements(this.dashboardDesigner._id,this.dashboardDesigner.modules.Mode.designCanvas,".bbi-dbrditem"),n=0;n<i.length;n++)r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(i[n])),t.push(r);return t},n.prototype.GetWidgetElementByReportName=function(n){for(var u,r,i=BoldBIDashboard.Dashboard.WidgetHelper.getAllWidgetElements(this.dashboardDesigner._id,this.dashboardDesigner.modules.Mode.designCanvas,".bbi-dbrditem"),t=0;t<i.length;t++)if(u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(i[t])),u.getJson().UniqueName===n){r=this.bbdesigner$(i[t]);break}return r},n.prototype.RemoveSelectedWidgetFromFilterObject=function(n,t){var i=BoldBIDashboard.isNullOrUndefined(n)?this.getCurrentWidgetInstance():n,r,u,f;BoldBIDashboard.isNullOrUndefined(this.filterObject.FilterConfigurationModel)||(r=this.filterObject.FilterConfigurationModel.MastersCollection,this.removeFromMasterList(r,i),this.removeFromSlaveList(r,i),u=this.filterObject.DatebucketConfigurationModel.MastersCollection,this.removeFromMasterList(u,i),this.removeFromSlaveList(u,i),f=this.getFilterConfigurationModelCollectionValue(),this.masterSlaveFilterSerializer(f),this.updatePoPSettings(i.Type==="Grid",t,i))},n.prototype.removeFromMasterList=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i].MasterInfo,t.Name===r.ID){this.filterObject.FilterConfigurationModel.MastersCollection.splice(i,1);break}},n.prototype.removeFromSlaveList=function(n,t){for(var e,u,i,f,o,r=0;r<n.length;r++)if(e=n[r].MasterInfo,t.Name!==e.ID)for(u=n[r].ProfileManager,i=0;i<u.length;i++)for(f=0;f<u[i].WidgetInfo.length;f++)if(o=u[i].WidgetInfo[f].ID,t.Name===o){u[i].WidgetInfo.splice(f,1);break}},n.prototype.RefreshFilterSettings=function(){this.filterObject.FilterConfigurationModel==null&&this.filterObject.setFilterConfiguration(this.GetWidgetCollectionsFromContainer());this.filterObject.DatebucketConfigurationModel==null&&this.filterObject.setDatebucketConfigurationModel(new FilterConfigurationModel);var n=this.getFilterConfigurationModelCollectionValue();this.masterSlaveFilterSerializer(n)},n.prototype.MasterSlaveFilterDeSerializer=function(n){var i,l,o,h,s,a,y,f,r,e,p,v,c,t;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.MasterFilterInfo)){var u=n.MasterFilterInfo.MasterSlaveFilterActions,w=new FilterConfigurationModel,b=new FilterConfigurationModel;for(i=0;i<u.length;i++){for(l=new Widgetcollection,o=new MasterInfo,t=0;t<n.Widgets.length;t++)n.Widgets[t].UniqueName===u[i].MasterControlName&&(o.Name=n.Widgets[t].ContainerSettings.Title,o.UniqueId=n.Widgets[t].UniqueId);for(o.ID=u[i].MasterControlName,o.IsPoP=u[i].IsPoPWidget,o.IsDatebucket=u[i].IsDatebucketWidget,h=u[i].FilterActions,s=0;s<h.length;s++){for(a=new ProfileInfo,y=new ProfileManager,a.Option=h[s].IsFilterCasesCustomized,a.Name=h[s].FilterActionName,f=h[s].FilterCases,r=0;r<f.length;r++)e=new FilterCondition,e.SourceColumn.Name=f[r].SourceColumn.Caption,e.SourceColumn.ID=f[r].SourceColumn.UniqueColumn,e.TargetColumn.Name=f[r].TargetColumn.Caption,e.TargetColumn.ID=f[r].TargetColumn.UniqueColumn,e.DataSource.Name=f[r].TargetDataSourceName,e.DataSource.ID=f[r].TargetDataSource,a.FilterCondition.push(e);for(p=h[s].Slaves,v=0;v<p.length;v++){for(c=new WidgetInfo,t=0;t<n.Widgets.length;t++)n.Widgets[t].UniqueName===p[v]&&(c.Name=n.Widgets[t].ContainerSettings.Title,c.UniqueId=n.Widgets[t].UniqueId);c.ID=p[v];c.IsPoPSupported=u[i].IsPoPWidget;y.WidgetInfo.push(c)}y.ProfileInfo=a;l.ProfileManager.push(y)}l.MasterInfo=o;u[i].IsDatebucketWidget?b.MastersCollection.push(l):w.MastersCollection.push(l)}return{filterConfigurationModel:w,datebucketConfigurationModel:b}}},n.prototype.masterSlaveFilterSerializer=function(n,t){var s,i,e,r,o,h,u,f;if(t===void 0&&(t=!0),this.dashboardDesigner.model.mode!==BoldBIDashboard.Designer.mode.view&&this.dashboardDesigner.model.mode!==BoldBIDashboard.Designer.mode.designpreview){if(s=new Settings,!BoldBIDashboard.isNullOrUndefined(n)){for(i=0;i<n.length;i++){for(e=new MasterSlaveFilterAction,e.MasterControlName=n[i].MasterInfo.ID,e.IsPoPWidget=n[i].MasterInfo.IsPoP,e.IsDatebucketWidget=n[i].MasterInfo.IsDatebucket,r=0;r<n[i].ProfileManager.length;r++){for(o=new FilterAction,o.FilterActionName=n[i].ProfileManager[r].ProfileInfo.Name,o.IsFilterCasesCustomized=n[i].ProfileManager[r].ProfileInfo.Option,h=0;h<n[i].ProfileManager[r].WidgetInfo.length;h++)(!n[i].MasterInfo.IsPoP||n[i].ProfileManager[r].WidgetInfo[h].IsPoPSupported)&&o.Slaves.push(n[i].ProfileManager[r].WidgetInfo[h].ID);for(u=0;u<n[i].ProfileManager[r].ProfileInfo.FilterCondition.length;u++)f=new FilterShell,f.SourceColumn.Caption=n[i].ProfileManager[r].ProfileInfo.FilterCondition[u].SourceColumn.Name,f.TargetColumn.Caption=n[i].ProfileManager[r].ProfileInfo.FilterCondition[u].TargetColumn.Name,f.SourceColumn.UniqueColumn=n[i].ProfileManager[r].ProfileInfo.FilterCondition[u].SourceColumn.ID,f.TargetColumn.UniqueColumn=n[i].ProfileManager[r].ProfileInfo.FilterCondition[u].TargetColumn.ID,f.TargetDataSource=n[i].ProfileManager[r].ProfileInfo.FilterCondition[u].DataSource.ID,f.TargetDataSourceName=n[i].ProfileManager[r].ProfileInfo.FilterCondition[u].DataSource.Name,o.FilterCases.push(f);e.FilterActions.push(o)}s.MasterSlaveFilterActions.push(e)}s!==null&&t&&this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.notifypropertychange,{action:BoldBIDashboard.DashboardUtil.DesignerAction.NotifyPropertyChange,data:JSON.stringify({FilterConfigurationJson:s})},{fnction:this.bbdesigner$.proxy(function(n){n.Status||console.info(n.Message)},this)})}return s}},n.prototype.updatePoPSettings=function(n,t,i){var h=[],r=this.filterObject.filterConfigurationModel.MastersCollection,u,o,c,s,l,e,f,a;if(!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0)for(u=0;u<r.length;u++)if(r[u].MasterInfo.IsPoP){for(o=0;o<r[u].ProfileManager.length;o++)for(c=r[u].ProfileManager[o].WidgetInfo,s=0;s<c.length;s++)h.push(c[s].ID);l=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.GetWidgetElementByReportName(r[u].MasterInfo.ID));l.updatePoPSettings(!1,n)}if(t&&i.IsPoPWidget||!t)for(e=this.getWidgetList(),f=0;f<e.length;f++)e[f].IsPoPSupported&&(a=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.GetWidgetElementByReportName(e[f].ID)),a.updatePoPSettings(h.indexOf(e[f].ID)>-1,n));else i.IsPoPSupportedWidget&&i.updatePoPSettings(h.indexOf(i.Name)>-1,n)},n.prototype.updateInitialFiltersForFilterControls=function(n,t,i,r){var u=new SelectedFilterValue,e=new InitialDimensionFilter,o=new InitialMeasureFilter,f=new InitialDateFilter;u.UniqueColumnName=n.UniqueColumnName;u.FieldId=n.Id;u.ColumnName=n.Name;u.ReportName=t;u.IsStdDateTime=r.IsStdDateTime;u.IsMultiSelection=r.IsMultiSelection;u.IsGroupBarFilter=r.IsGroupBarFilter;u.IsRange=r.IsRange;u.IsParameterField=n.IsParameterField;switch(i){case"bbi-designer-dataset-string":case"bbi-designer-dataset-boolean":e.DimesnionFilterCondition=r.Action;e.Text=r.FilterInfo;break;case"bbi-designer-dataset-number":o.MeasureFilterCondition=r.Action;o.Values=r.FilterInfo;break;case"bbi-designer-dataset-datetime":case"bbi-designer-dataset-time":f.DateFilterCondition=r.Action;f.DisplayDateFilterList=r.FilterInfo.DisplayFilterList;f.DateFilterList=r.FilterInfo.DateFilterList;f.DateFilterType=BoldBIDashboard.isNullOrUndefined(r.FilterInfo.DateFilterType)?f.DateFilterType:r.FilterInfo.DateFilterType;f.DateFormat=r.FilterInfo.DateFormat;f.SelectedRangeforRelativeFilter=BoldBIDashboard.isNullOrUndefined(r.FilterInfo.SelectedRangeforRelativeFilter)?null:r.FilterInfo.SelectedRangeforRelativeFilter}return u.InitialDimensionFilter=e,u.InitialMeasureFilter=o,u.InitialDateFilter=f,!BoldBIDashboard.isNullOrUndefined(n.ParametersInWidgets)&&n.ParametersInWidgets.length>0&&(u.ParametersInWidget=[],u.ParametersInWidget=n.ParametersInWidgets),u},n.prototype.getAllWidgetSelectedValues=function(n){var i,r,t,u,f;for(n===void 0&&(n=0),i=[],r=this.GetAllWidgetInstanceFromContainer(),t=0;t<r.length;t++)if(u=r[t].getJson().SelectedFilterValues,!BoldBIDashboard.isNullOrUndefined(r[t].getJson().FilterSettings)&&r[t].getJson().FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(u)&&u.length>0)for(f=0;f<u.length;f++)i.push(u[f]);return this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view&&!this.isInteraction&&n>0&&(i=this.dashboardDesigner.getFilterDataUsingQuery().length>0?this.dashboardDesigner.getFilterDataUsingQuery():!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.rdlParser)&&!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.rdlParser.rdlJsonObj)&&!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.rdlParser.rdlJsonObj.WidgetData)?this.getAllWidgetSelectedValuesFromCollection(this.dashboardDesigner.rdlParser.rdlJsonObj.WidgetData):i),i},n.prototype.getAllWidgetSelectedValuesFromCollection=function(n){for(var i,t,r,f=[],u=0;u<n.length;u++)if(i=n[u],t=i.SelectedFilterValues,!BoldBIDashboard.isNullOrUndefined(i.FilterSettings)&&i.FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0)for(r=0;r<t.length;r++)f.push(t[r]);return f},n.prototype.getDatebucketSelectedValues=function(n){for(var r,u,e,f,i=this.GetAllWidgetInstanceFromContainer(),t=0;t<i.length;t++)if(i[t].isDefaultDataWidget()&&(r=i[t].getJson().DatebucketFilterValues,!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0)){for(u=0;u<r.length;u++)n.push(r[u]);e=i[t].getJson().selectedValue.replace(/\s/g,"");f=DateTimeFormat[e];BoldBIDashboard.isNullOrUndefined(f)||f===DateTimeFormat.None||BoldBIDashboard.DashboardUtil.invokeMethod(i[t],"modifyColumnValue",[f])}return n},n.prototype.getConfiguredWidgetsOfDatebucket=function(n,t){var i=this.filterObject.DatebucketConfigurationModel.MastersCollection,r,e,f,u;if(!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0)for(r=0;r<i.length;r++)if(i[r].MasterInfo.ID===n){for(e=0;e<i[r].ProfileManager.length;e++)for(f=i[r].ProfileManager[e].WidgetInfo,u=0;u<f.length;u++)t.indexOf(f[u].ID)===-1&&this.isWidgetConfigured(f[u].ID)&&t.push(f[u].ID);break}return t},n.prototype.getSelectedValuesForWidgetRequest=function(n){return n===void 0&&(n=0),this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view||this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.designpreview?this.getAllWidgetSelectedValues(n):[]},n.prototype.GetSlaveListOfMasterWidget=function(n){var e=[],t=this.filterObject.FilterConfigurationModel.MastersCollection,i,f,u,r;if(!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0)for(i=0;i<t.length;i++)if(t[i].MasterInfo.ID===n){for(f=0;f<t[i].ProfileManager.length;f++)for(u=t[i].ProfileManager[f].WidgetInfo,r=0;r<u.length;r++)e.indexOf(u[r].ID)===-1&&this.isWidgetConfigured(u[r].ID)&&e.push(u[r].ID);break}return e},n.prototype.GetAllMasterWidgetList=function(){var i=[],n=this.filterObject.FilterConfigurationModel.MastersCollection,t;if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0)for(t=0;t<n.length;t++)i.push(n[t].MasterInfo.ID);return i},n.prototype.GetMasterWidgetlistOfSlaveWidget=function(n){var e=[],t=this.filterObject.FilterConfigurationModel.MastersCollection,i,f,u,r;if(!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0)for(i=0;i<t.length;i++)for(f=0;f<t[i].ProfileManager.length;f++)for(u=t[i].ProfileManager[f].WidgetInfo,r=0;r<u.length;r++)e.indexOf(u[r].ID)===-1&&this.isWidgetConfigured(u[r].ID)&&u[r].ID===n&&e.push(t[i].MasterInfo.ID);return e},n.prototype.isWidgetConfigured=function(n){var t=this.dashboardDesigner.designerPanel;return t.designPanel.find("div[data-name="+n+"] .bbi-widget-not-configured-text").css("display")==="none"?!0:!1},n.prototype.doInteraction=function(n,t){var f,e;this.RefreshFilterSettings();this.isInteraction=!0;var u=this.dashboardDesigner.modules.dataConfiguration,o=this.dashboardDesigner.designerPanel,i={selectedInfo:this.getAllWidgetSelectedValues()},r=this.GetSlaveListOfMasterWidget(n);if(this.dashboardDesigner.setFilterData([]),r.length>0&&(this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view||this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.designpreview)&&!this.dashboardDesigner.clearAllFilterClicked&&(this.isInteractionCompleted=!1,f=this.dashboardDesigner.modules.dynamicParameterPanel.getAllFilterWidgetParameterSelectedValues(null,""),!BoldBIDashboard.isNullOrUndefined(f)&&f.length>0?u.fetchDataForWidgets(r,!1,i.selectedInfo,!1,f,null,!1,n,!1,u.datasourceCallerId,t):u.fetchDataForWidgets(r,!1,i.selectedInfo,!1,null,null,!1,n,!1,u.datasourceCallerId,t)),this.dashboardDesigner.model.mode!==BoldBIDashboard.Designer.mode.design&&r.length===0&&this.dashboardDesigner.modules.labelParameter.getDataForLabelParameter(i.selectedInfo,this.dashboardDesigner._id,!0,n,null,!1,!0),i.selectedInfo.length>0&&this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.designpreview)this.dashboardDesigner.addToRevertInteractionList(r),this.dashboardDesigner.addToRevertInteractionList([n]);else if(i.selectedInfo.length===0&&this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.design)for(this.dashboardDesigner.removeFromRevertInteractionList(n),e=0;e<r.length;e++)this.dashboardDesigner.addToWidgetCacheCollection(r[e],null,!1);o.banner.toggleFilterOverview(i.selectedInfo.length>0);o.initialFilterIfModified(!0);this.dashboardDesigner.model.filterOverviewSettings.showSaveIcon&&(this.dashboardDesigner.filterOverviewObj.isModified=!0);BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.filterOverviewSettings.viewId)||this.dashboardDesigner.model.filterOverviewSettings.viewId.trim()===""||this.updateSavedViewChangeStatus(i)},n.prototype.updateSavedViewChangeStatus=function(n){if(this.dashboardDesigner.initialFilterData.length===n.selectedInfo.length){this.dashboardDesigner.designerPanel.banner.hideViewFilterChangeIndicator();for(var t=0;t<n.selectedInfo.length;t++)if(this.dashboardDesigner.initialFilterData[t].ReportName===n.selectedInfo[t].ReportName){if(this.validateCurrentFilterWithInitFilter(this.dashboardDesigner.initialFilterData[t].InitialDimensionFilter.Text,n.selectedInfo[t].InitialDimensionFilter.Text)||this.validateCurrentFilterWithInitFilter(this.dashboardDesigner.initialFilterData[t].InitialMeasureFilter.Values,n.selectedInfo[t].InitialMeasureFilter.Values)||this.validateCurrentFilterWithInitFilter(this.dashboardDesigner.initialFilterData[t].InitialDateFilter.DateFilterList,n.selectedInfo[t].InitialDateFilter.DateFilterList)){this.dashboardDesigner.designerPanel.banner.showViewFilterChangeIndicator();break}}else{this.dashboardDesigner.designerPanel.banner.showViewFilterChangeIndicator();break}}else this.dashboardDesigner.designerPanel.banner.showViewFilterChangeIndicator()},n.prototype.validateCurrentFilterWithInitFilter=function(n,t){var r=n.length,u=t.length,i;if(r===u)for(i=0;i<r;i++)if(n[i]!==t[i])return!0;return!1},n.prototype.getDateFilterList=function(n,t){for(var e,u,f=t?this.dashboardDesigner.model.localeSettings.dateFormat+" "+this.dashboardDesigner.model.localeSettings.timeFormat:this.dashboardDesigner.model.localeSettings.dateFormat,r=[],i=0;i<n.length;i++)e=BoldBIDashboard.parseDate(n[i],f),u=BoldBIDashboard.format(e,f),BoldBIDashboard.isNullOrUndefined(u)?r.push(n[i]):r.push(u);return r},n.prototype.showOrHideClearFilterIcon=function(n,t){if(n!==null){var i=10;t?(BoldBIDashboard.Dashboard.WidgetContainerHelper.applyIconVisibility(n.find(".bbi-remove-control-filter"),"block"),i=n.find(".bbi-dbrd-controlIcon-container").outerWidth(!0)+10):BoldBIDashboard.Dashboard.WidgetContainerHelper.applyIconVisibility(n.find(".bbi-remove-control-filter"),"none");n.find(".bbi-dbrd-control-title-wrapper").css({width:"calc(100%)"})}},n.prototype.isValidDataGroupInfo=function(n,t){return n.FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(t.Values)&&!BoldBIDashboard.isNullOrUndefined(t.Values[0])&&!BoldBIDashboard.isNullOrUndefined(t.Values[0].Values)&&t.Values[0].Values.length>0},n.prototype.configureSelectedFilterInfo=function(n,t,i){var y=this,s,e,h;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(i))for(s=0;s<t.length;s++){var r=t[s],u=[],l=[],o=[],c=r.FieldActualType==="bbi-designer-dataset-string"||r.FieldActualType==="bbi-designer-dataset-boolean"||r.FieldActualType==="bbi-designer-dataset-number",a=r.FieldActualType==="bbi-designer-dataset-datetime"||r.FieldActualType==="bbi-designer-dataset-time",p=c?"bbi-designer-dataset-string":r.FieldActualType,f=c?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Include):a?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains);if(f=BoldBIDashboard.isNullOrUndefined(i.action)?f:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,i.action),e=r.UniqueColumnName,r.FilterInfo==null||r.FilterInfo.CustomDateSettingsInfo==null||BoldBIDashboard.isNullOrUndefined(i[e+"_CustomFormat"])||(e=e+"_CustomFormat"),h=Array.isArray(i[e])?i[e]:[i[e]],c?(u=h,f=u.length>0?f:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains),u=u.filter(function(n){return typeof n=="string"?n.indexOf(y.allSpecialChar)===-1:n})):a&&(o=h,l=r.DateTimeFormat===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.Default)?this.getDateFilterList(o,!0):o,u={DateFormat:!BoldBIDashboard.isNullOrUndefined(r.DateBucketInfo)&&!BoldBIDashboard.isNullOrUndefined(r.DateBucketInfo.DateBucketFormat)?r.DateBucketInfo.DateBucketFormat:r.DateTimeFormat,DisplayFilterList:o,DateFilterList:l},f=o.length>0?f:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include)),u.length>0||!BoldBIDashboard.isNullOrUndefined(u.DateFilterList)){var v=!BoldBIDashboard.isNullOrUndefined(i.IsGroupBarFilter)&&i.IsGroupBarFilter,w=!BoldBIDashboard.isNullOrUndefined(i.IsMultiSelection)&&i.IsMultiSelection,b={FilterInfo:u,Action:f,IsStdDateTime:!1,IsMultiSelection:v&&h.length>1||w,IsGroupBarFilter:v};n.SelectedFilterValues.push(this.updateInitialFiltersForFilterControls(r,n.UniqueName,p,b))}}},n.prototype.getCurrentWidgetInstance=function(){var n=this.dashboardDesigner.designerPanel.selectedReportItems[0];return BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(n)},n}();BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.MasterSlaveFilterConfiguration",InternalMasterSlaveFilterSerializationHelper,window);InternalLabelParameter=function(){function n(n){this.dashboardDesigner=null;this.masterSlaveConfiguration=null;this.labelParameterVaues={};this.labelWidgetsData=[];this.jsonRequest=[];this.parentFieldKey="parentField";this.childColumnNameKey="childColumnName";this.labelCounter=0;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.masterSlaveConfiguration=this.dashboardDesigner.modules.masterSlaveFilter;this.widgetHelper=this.dashboardDesigner.modules.widgetHelper}return n.prototype.getResultantParameterString=function(n,t,i){i===void 0&&(i=!1);var r=this.GetValidParameterCollection(n,t);return this.getParameterizedText(r.matchedTexts,n,r.dataId,i)},n.prototype.isLabelParameterPresent=function(n,t){var i=this.GetValidParameterCollection(n,t);return i.matchedTexts.length>0?!0:!1},n.prototype.getParameterRegex=function(){return RegExp("^@{{:CURRENTUSER.FULLNAME}}|^@{{:CURRENTUSER.EMAIL}}|^@{{:CURRENTUSER.TOKEN}}|^@{{:CURRENT.SITEURL}}|^@{{:CURRENT.SITEIDENTIFIER}}|^@{{:CURRENTUSER.TENANTURL}}|^@{{:CURRENTUSER.SITEIDENTIFIER}}^@{{:CURRENT.BROWSERCULTURE}}","g")},n.prototype.hasDynamicParameter=function(n){return this.getParameterRegex().test(n)},n.prototype.GetValidParameterCollection=function(n,t){var w=this,e=[],v=RegExp("{{:(.*?)}}","g"),y=RegExp("^DistinctCount([(.*?)])|^DCount([(.*?)])|^Minimum([(.*?)])|^Maximum([(.*?)])|^Average([(.*?)])|^StandardDeviation([(.*?)])|^Variance([(.*?)])|^WeightedAvg([(.*?)])|^WeightedAverage([(.*?)])|^StDev([(.*?)])|^Var([(.*?)])|^Sum([(.*?)])|^Avg([(.*?)])|^Count([(.*?)])|^Year([(.*?)])|^Month([(.*?)])|^MonthYear([(.*?)])|^MonthName([(.*?)])|^DayMonthYear([(.*?)])|^MonthDayYear([(.*?)])|^QuarterYear([(.*?)])|^Quarter([(.*?)])|^DateHour([(.*?)])|^DayOfWeek([(.*?)])|^DayOfYear([(.*?)])|^Hours([(.*?)])|^Minutes([(.*?)])|^Seconds([(.*?)])|^WeekOfMonth([(.*?)])|^WeekOfYear([(.*?)])|^Day([(.*?)])|^Max([(.*?)])|^Min([(.*?)])|^WeekYear([(.*?)])|^Time([(.*?)])|^DateTime([(.*?)])|^Date([(.*?)])|^TimeSpan([(.*?)])|^TimeSpanHours([(.*?)])|^TimeSpanMinutes([(.*?)])|^TimeSpanDays([(.*?)])|^TimeSpanWeeks([(.*?)])|^TimeSpanMonths([(.*?)])|^TimeSpanYears([(.*?)])|^TimeSpanInMinutes([(.*?)])|^TimeSpanInHours([(.*?)])","ig"),o=!1,s,l,a,r,h=!1,f,u,p,i,c;if(this.hasDynamicParameter(n)&&(e=n.match(this.getParameterRegex())),v.test(n))for(u=n.match(v),this.summaryType=SummaryType.SUM,this.dateformat=DateTimeFormat.None,p=function(n){var p,c,k,v,d,b;for(r=u[n].substring(3,u[n].length-2),p=i.getChildColumnName(r),BoldBIDashboard.isNullOrUndefined(p)||(l=p[i.parentFieldKey],a=p[i.childColumnNameKey]),c=i.dashboardDesigner.modules.dataSet.datasets,y.test(r)?(k=r.match(y),v=k[0].substring(0,k[0].length-1),!BoldBIDashboard.isNullOrUndefined(v)&&v.length>0&&(i.summaryType=i.getValidSummaryType(v.toLowerCase()),i.summaryType===null||i.summaryType==="None"?(i.dateformat=DateTimeFormat[i.getValidDateFormat(v.toLowerCase())],o=!1):o=!0,r=r.replace(v,""),s=r.substring(1,r.length-1),h=!0)):(s=r,h=!1),BoldBIDashboard.isNullOrUndefined(t)&&(t=i.getDefaultDatasourceID(s)),d=function(r){var v=s,y,p;v.indexOf(c[r].Name)!==-1?(f=t!==c[r].Id?c[r].Id:t,v=v.replace(c[r].Name+".","")):f=t;c[r].Id===f&&(BoldBIDashboard.isNullOrUndefined(l)?c[r].Fields.forEach(function(t){var i=w.getCurrentFieldInfo(t,v,h,o);BoldBIDashboard.isNullOrUndefined(i)||e.push(u[n])}):(y=i.getHierarchicalField(c[r].Fields,l,a),BoldBIDashboard.isNullOrUndefined(y)||(p=i.getCurrentFieldInfo(y,a,h,o),BoldBIDashboard.isNullOrUndefined(p)||e.push(u[n]))))},b=0;b<c.length;b++)d(b)},i=this,c=0;c<u.length;c++)p(c);return{matchedTexts:e,dataId:BoldBIDashboard.isNullOrUndefined(f)?null:f}},n.prototype.getCurrentFieldInfo=function(n,t,i,r){var u=null,f;if(!BoldBIDashboard.isNullOrUndefined(n))if(n.Name.trim().toLowerCase()===t.trim().toLowerCase()&&(BoldBIDashboard.isNullOrUndefined(n.ChildFields)||!BoldBIDashboard.isNullOrUndefined(n.ChildFields)&&n.ChildFields.length===0))i?r&&n.TypeName!=="Date"&&n.TypeName!=="String"&&n.TypeName!=="Datetime"?u=n:!r&&(this.dateformat===0||this.dateformat==="None")||i&&(this.summaryType==="COUNT"||this.summaryType==="COUNTD")?u=n:r||this.dateformat===0&&this.dateformat==="None"||n.TypeName!=="Date"||(u=n):u=n;else if(!BoldBIDashboard.isNullOrUndefined(n.ChildFields))for(f=0;f<n.ChildFields.length;f++)if(u=this.getCurrentFieldInfo(n.ChildFields[f],t,i,r),!BoldBIDashboard.isNullOrUndefined(u))break;return u},n.prototype.getDefaultDatasourceID=function(n){var i=this.dashboardDesigner.modules.dataSet.datasets,f,e,o=this.getChildColumnName(n),t,s,u,r;for(BoldBIDashboard.isNullOrUndefined(o)||(f=o[this.parentFieldKey],e=o[this.childColumnNameKey]),t=0;t<i.length;t++){if(n.split(".").length>1&&n.split(".")[0]===i[t].Name)return i[t].Id;if(BoldBIDashboard.isNullOrUndefined(f)){for(u=0;u<i[t].Fields.length;u++)if(r=this.getCurrentFieldInfo(i[t].Fields[u],n,!1,!1),!BoldBIDashboard.isNullOrUndefined(r))return i[t].Id}else if(s=this.getHierarchicalField(i[t].Fields,f,e),!BoldBIDashboard.isNullOrUndefined(s)&&(r=this.getCurrentFieldInfo(s,e,!1,!1),!BoldBIDashboard.isNullOrUndefined(r)))return i[t].Id}},n.prototype.getParameterizedText=function(n,t,i,r){var e=this,u=t,f="";return n.forEach(function(n){var o=i,t;n.split(".").length>1&&(o=e.getDataSourceID(n));t=u.split(n);t.length!==0&&(t[0]!==""&&(f+=r?t[0]:"<span class= 'e-title-text e-title-value' style= 'float: left ' >"+BoldBIDashboard.DashboardUtil.encodeText(t[0])+"<\/span>"),t.splice(0,1));f+=r?"<span class= 'bbi-dbrd-label-parameter-text e-title-text' data-param='"+n+"' data-source='"+o+"' >"+n+"<\/span><span class= 'bbi-dbrd-label-parameter-value e-title-value'><\/span>":"<span class= 'bbi-dbrd-label-parameter-text e-title-text' data-param='"+n+"' data-source='"+o+"' style= 'font-weight: bold; float: left ' >"+n+"<\/span><span class= 'bbi-dbrd-label-parameter-value e-title-value' style= 'font-weight: bold; ' ><\/span>";u=t.join(" "+n+" ")}),u!==""&&u!=="."&&u!==":"&&(f+=r?u:"<span class= 'e-title-text e-title-value' >"+BoldBIDashboard.DashboardUtil.encodeText(u)+"<\/span>"),f},n.prototype.getDataSourceID=function(n){var f=RegExp("^DistinctCount([(.*?)])|^DCount([(.*?)])|^Minimum([(.*?)])|^Maximum([(.*?)])|^Average([(.*?)])|^StandardDeviation([(.*?)])|^Variance([(.*?)])|^WeightedAvg([(.*?)])|^WeightedAverage([(.*?)])|^StDev([(.*?)])|^Var([(.*?)])|^Sum([(.*?)])|^Avg([(.*?)])|^Count([(.*?)])|^Year([(.*?)])|^MonthYear([(.*?)])|^MonthName([(.*?)])|^DayMonthYear([(.*?)])|^MonthDayYear([(.*?)])|^QuarterYear([(.*?)])|^Quarter([(.*?)])|^DateHour([(.*?)])|^DayOfWeek([(.*?)])|^DayOfYear([(.*?)])|^Hours([(.*?)])|^Minutes([(.*?)])|^Seconds([(.*?)])|^WeekOfMonth([(.*?)])|^WeekOfYear([(.*?)])|^Day([(.*?)])|^Max([(.*?)])|^Min([(.*?)])|^WeekYear([(.*?)])|^Time([(.*?)])|^DateTime([(.*?)])|^Date([(.*?)])|^TimeSpan([(.*?)])|^TimeSpanHours([(.*?)])|^TimeSpanMinutes([(.*?)])|^TimeSpanDays([(.*?)])|^TimeSpanWeeks([(.*?)])|^TimeSpanMonths([(.*?)])|^TimeSpanYears([(.*?)])|^TimeSpanInMinutes([(.*?)])|^TimeSpanInHours([(.*?)])","ig"),r="",t=n.substring(3,n.length-2),u,i;return f.test(t)?(u=t.match(f),i=u[0].substring(0,u[0].length-1),!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0&&(t=t.replace(i,""),r=t.substring(1,t.length-1))):r=t,this.getDefaultDatasourceID(r)},n.prototype.getInnerText=function(n){return BoldBIDashboard.isNullOrUndefined(n)?null:this.hasDynamicParameter(n)?n.substring(4,n.length-2):n.substring(3,n.length-2)},n.prototype.createParameterColumnCollection=function(n,t,i){for(var nt,tt,s,h,it,c,p,l,r,rt,w,ut=RegExp("^DistinctCount([(.*?)])|^DCount([(.*?)])|^Minimum([(.*?)])|^Maximum([(.*?)])|^Average([(.*?)])|^StandardDeviation([(.*?)])|^Variance([(.*?)])|^WeightedAvg([(.*?)])|^WeightedAverage([(.*?)])|^StDev([(.*?)])|^Var([(.*?)])|^Sum([(.*?)])|^Avg([(.*?)])|^Count([(.*?)])|^Year([(.*?)])|^Month([(.*?)])|^MonthYear([(.*?)])|^MonthName([(.*?)])|^DayMonthYear([(.*?)])|^MonthDayYear([(.*?)])|^QuarterYear([(.*?)])|^Quarter([(.*?)])|^DateHour([(.*?)])|^DayOfWeek([(.*?)])|^DayOfYear([(.*?)])|^Hours([(.*?)])|^Minutes([(.*?)])|^Seconds([(.*?)])|^WeekOfMonth([(.*?)])|^WeekOfYear([(.*?)])|^Day([(.*?)])|^Max([(.*?)])|^Min([(.*?)])|^WeekYear([(.*?)])|^Time([(.*?)])|^DateTime([(.*?)])|^Date([(.*?)])|^TimeSpan([(.*?)])|^TimeSpanHours([(.*?)])|^TimeSpanMinutes([(.*?)])|^TimeSpanDays([(.*?)])|^TimeSpanWeeks([(.*?)])|^TimeSpanMonths([(.*?)])|^TimeSpanYears([(.*?)])|^TimeSpanInMinutes([(.*?)])|^TimeSpanInHours([(.*?)])","ig"),a=!1,b=!1,u,e,v,k,d,ft,g,o=[],y,f=0;f<i.length;f++)if(nt=!0,this.bbdesigner$(i[f]).parents(".bbi-dbrd-control-container.e-label-item").length===1&&(nt=this.isUpdateLabelParaForLabelWidget(this.bbdesigner$(i[f]),t)),nt){for(a=!1,e=SummaryType.SUM,v=BoldBIDashboard.DateAndTimeFormat.None,k=this.bbdesigner$(i[f]).attr("data-param"),ft=this.bbdesigner$(i[f]).attr("data-source"),y=this.generateIdForLabelParameterElement(i[f]),this.bbdesigner$(i[f]).attr("data-labelparameterid",y),u=this.getInnerText(k),ut.test(u)?(tt=u.match(ut),s=tt[0].substring(0,tt[0].length-1),!BoldBIDashboard.isNullOrUndefined(s)&&s.length>0&&(e=this.getValidSummaryType(s.toLowerCase()),e===null||e==="None"?(v=DateTimeFormat[this.getValidDateFormat(s.toLowerCase())],a=!1):a=!0,u=u.replace(s,""),d=u.substring(1,u.length-1),b=!0)):(d=u,b=!1),h=this.validateColumn(d,a,e,v,b,ft),it=!1,c=0;c<o.length;c++)for(p=0;p<o[c].ColumnList.length;p++)y===o[c].ColumnList[p].Id&&(it=!0);BoldBIDashboard.isNullOrUndefined(h)||!h.isValid||it||(g=this.checkIfKeyPresent(h.datasourceId,o),l=h.field,r=new ParameterColumnItem,l!==null&&l.length!==0&&(r.MatchText=k,r.ColumnName=l.Name,r.ColumnType=this.getColumnType(l.TypeName),r.SummaryType=e,r.DateFormat=v,r.Id=y,g==null?(rt=[],rt.push(r),w=new ParameterColumn,w.DataSourceId=h.datasourceId,w.ColumnList=rt,o.push(w)):g.ColumnList.push(r)))}return o},n.prototype.generateIdForLabelParameterElement=function(n){var t=this.bbdesigner$(n).attr("data-param"),i;return this.hasDynamicParameter(t)?t.substring(4,t.length-2):(i=t.substring(3,t.length-2),this.bbdesigner$(n).attr("data-source")+"_"+i)},n.prototype.validateColumn=function(n,t,i,r,u,f){var e=this.dashboardDesigner.modules.dataSet.datasets,h=null,o,c,s;if(n.split(".").length>1)for(o=0;o<e.length;o++)n.split(".")[0]===e[o].Name&&(f=e[o].Id);for(c=BoldBIDashboard.isNullOrUndefined(f)?e:e.filter(function(n){return n.Id===f}),s=0;s<c.length;s++)if(h=this.getFieldInfo(c[s],n,t,i,r,u,f),h.isValid)break;return h},n.prototype.getFieldInfo=function(n,t,i,r,u,f,e){var o=null,s=!1,y=e,v,h;t.split(".").length>1&&t.split(".")[0]===n.Name&&(t=t.replace(n.Name+".",""));var c=null,l=null,a=this.getChildColumnName(t);if(BoldBIDashboard.isNullOrUndefined(a)||(c=a[this.parentFieldKey],l=a[this.childColumnNameKey]),BoldBIDashboard.isNullOrUndefined(c)){for(h=0;h<n.Fields.length;h++)if(o=this.getCurrentFieldInfo(n.Fields[h],t,!1,!1),!BoldBIDashboard.isNullOrUndefined(o)&&o.length!==0)break}else v=this.getHierarchicalField(n.Fields,c,l),BoldBIDashboard.isNullOrUndefined(v)||(o=this.getCurrentFieldInfo(v,l,!1,!1));return BoldBIDashboard.isNullOrUndefined(o)||o.length===0||(y=n.Id,i&&o.TypeName!=="Date"&&o.TypeName!=="String"&&o.TypeName!=="Datetime"?s=!0:!i&&(u===0||u===DateTimeFormat.None)||f&&(r===SummaryType.COUNT||SummaryType.COUNTD)?s=!0:i||u===0&&u===DateTimeFormat.None||o.TypeName!=="Date"||(s=!0)),{field:o,datasourceId:y,isValid:s}},n.prototype.checkIfKeyPresent=function(n,t){for(var r=null,i=0;i<t.length;i++)if(t[i].DataSourceId===n){r=t[i];break}return r},n.prototype.getColumnType=function(n){return n==="String"||n==="Boolean"?FieldType.Dimensions:n==="Date"?FieldType.DateTime:FieldType.Measures},n.prototype.getLabelParamElements=function(){var u,t,n,i,f,r;for(this.dashboardDesigner.element.find(".e-dbrd-label-parameter-text").length>0&&this.dashboardDesigner.element.find(".e-dbrd-label-parameter-text").addClass("bbi-dbrd-label-parameter-text"),u=this.dashboardDesigner.element.find(".bbi-dbrd-label-parameter-text"),t=this.widgetHelper.getAllWidgets(),n=0;n<t.length;n++)if(t[n].ControlContainer.hasClass("e-rte-item"))for(i=void 0,f=BoldBIDashboard.buildTag("div","",{},{}),f.html(t[n].getValue()),i=f.find(".bbi-dbrd-label-parameter-text"),r=0;r<i.length;r++)u.push(i[r]);return u},n.prototype.labelParameterAction=function(n,t,i,r,u,f,e){if(r===void 0&&(r=!1),f===void 0&&(f=!1),!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0){var o=this.getParamCollection();this.labelParameterFetch=this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.getLabelParameterData,data:JSON.stringify({designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.getLabelParameterData,labelParameterCollection:n,dynamicParamCollection:t,hasDynamicParam:r,selectedValuesList:i,className:BoldBIDashboard.DashboardUtil.DesignerAction.FilterAction,paramCollection:BoldBIDashboard.isNullOrUndefined(o)?"":JSON.stringify(o),isParameterField:BoldBIDashboard.isNullOrUndefined(u)?!1:!0,selectedParameterValue:u,needToImportData:f,datasourceCallerId:e})},{fnction:this.bbdesigner$.proxy(this.bindLableParameterValues,this)})}},n.prototype.getDataForDynamicParam=function(n){for(var t,r,u={},i=0;i<n.length;i++)t=this.bbdesigner$(n[i]).attr("data-param"),r=this.getInnerText(t),!BoldBIDashboard.isNullOrUndefined(r)&&this.hasDynamicParameter(t)&&(u[r]=t);return u},n.prototype.getParamCollection=function(){var n=this.dashboardDesigner.modules.dynamicParameterPanel;return!BoldBIDashboard.isNullOrUndefined(n.currentValueCollection)&&n.currentValueCollection.length>0?n.currentValueCollection:null},n.prototype.getDataForLabelParameter=function(n,t,i,r,u,f,e,o){var y,l,k,d,c,a,g,ft,ot;if(i===void 0&&(i=!1),r===void 0&&(r=null),f===void 0&&(f=!1),e===void 0&&(e=!1),y=this.getLabelParamElements(t),!i)for(c=0;c<y.length;c++)this.bbdesigner$(y[c]).next().html("...");var v=this.createParameterColumnCollection(t,r,y),h,p=this.dashboardDesigner.modules.dataSet.datasets,nt=[],tt=[],w=[],b=this.getDataForDynamicParam(y);for(l=0;l<v.length;l++){for(k=[],d=[],c=0;c<v[l].ColumnList.length;c++){var s=v[l].ColumnList[c],it=void 0,rt=void 0,et=BoldBIDashboard.isNullOrUndefined(s.MatchText.match(/(.*){:/))?s.MatchText:s.MatchText.substring(3,s.MatchText.length-2),ut=this.getChildColumnName(et);for(BoldBIDashboard.isNullOrUndefined(ut)||(it=ut[this.parentFieldKey],rt=ut[this.childColumnNameKey]),a=0;a<p.length;a++)if(p[a].Id===v[l].DataSourceId)for(g=0;g<p[a].Fields.length;g++)if(BoldBIDashboard.isNullOrUndefined(it)){if(h=this.getCurrentFieldInfo(p[a].Fields[g],s.ColumnName,!1,!1),!BoldBIDashboard.isNullOrUndefined(h)&&h.length!==0)break}else if(ft=this.getHierarchicalField(p[a].Fields,it,rt),!BoldBIDashboard.isNullOrUndefined(ft)&&(h=this.getCurrentFieldInfo(ft,rt,!1,!1),!BoldBIDashboard.isNullOrUndefined(h)&&h.length!==0))break;BoldBIDashboard.isNullOrUndefined(h)||(h.TypeName.toLocaleLowerCase()==="String".toLocaleLowerCase()||h.TypeName.toLocaleLowerCase()==="Date".toLocaleLowerCase()?d.push({Name:s.ColumnName,Id:h.Id,SummaryType:this.getDimensionSummaryType(s),FieldType:FieldType.Dimensions,DateTimeFormat:s.DateFormat,FilterInfo:null,UniqueColumnName:s.Id,IsVisible:!0}):k.push({Name:s.ColumnName,Id:h.Id,SummaryType:s.SummaryType,FieldType:FieldType.Measures,DateTimeFormat:s.DateFormat,FilterInfo:null,UniqueColumnName:s.Id,IsVisible:!0}))}k.length>0&&nt.push({DataSetID:v[l].DataSourceId,FieldInfo:k});d.length>0&&tt.push({DataSetID:v[l].DataSourceId,FieldInfo:d})}(nt.length>0||tt.length>0)&&w.push({MeasureFieldInfo:nt,DimensionFieldInfo:tt});w.length>0?(BoldBIDashboard.isNullOrUndefined(this.labelParameterFetch)||(this.labelParameterFetch.readyState!==4&&this.labelParameterFetch.abort(),this.labelParameterFetch=null),this.jsonRequest={labelParameterCollection:w,selectedValuesList:n},ot=this.dashboardDesigner.modules.dynamicParameterPanel,this.labelParameterAction(w,b,n,!BoldBIDashboard.isNullOrUndefined(b),u,e,o)):this.labelParameterAction(null,b,null,!BoldBIDashboard.isNullOrUndefined(b),u,e,o)},n.prototype.getHierarchicalField=function(n,t,i){var r=t.split("."),f,u,e;if(r.push(i),BoldBIDashboard.isNullOrUndefined(r))return null;for(f=function(t){if(n=n.filter(function(n){return n.Name.trim().toLowerCase()===r[t].trim().toLowerCase()})[0],!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.ChildFields)&&n.ChildFields.length>0)n=n.ChildFields;else return"break"},u=0;u<r.length;u++)if(e=f(u),e==="break")break;return n},n.prototype.getChildColumnName=function(n){if(n.indexOf("].")!==-1){var t=n.match(/\[.*?\]/)[0],i=t.substring(1,t.length-1),r=n.match(/].(.*)/)[1];return{parentField:i,childColumnName:r}}return null},n.prototype.getDimensionSummaryType=function(n){return n.SummaryType.toString().toLocaleLowerCase()===SummaryType.SUM.toString().toLocaleLowerCase()||n.SummaryType.toString().toLocaleLowerCase()===SummaryType.NONE.toString().toLocaleLowerCase()?SummaryType.NONE:n.SummaryType},n.prototype.bindLableParameterValues=function(n){var t=this,i=this;this.labelParameterVaues.LabelParameterData=n;setTimeout(function(){var f,u,r,s,o,e,h;if(i.labelCounter++,i.masterSlaveConfiguration.isInteractionCompleted)try{if(f=i.dashboardDesigner.modules.Mode.designCanvas,u=f.find(".bbi-dbrd-label-parameter-text"),n.length>0){for(r=0;r<u.length;r++)s=!0,o=!1,t.bbdesigner$(u[r]).parents(".bbi-dbrd-control-container.e-label-item").length===1&&(s=t.isUpdateLabelParaForLabelWidget(t.bbdesigner$(u[r])),o=!0),e=t.bbdesigner$(u[r]).attr("data-labelparameterid"),BoldBIDashboard.isNullOrUndefined(t.dashboardDesigner.model)||BoldBIDashboard.isNullOrUndefined(t.dashboardDesigner.model.dashboardFromData)||!t.dashboardDesigner.model.dashboardFromData.loadFromData||(e=t.generateIdForLabelParameterElement(u[r])),o&&!BoldBIDashboard.isNullOrUndefined(t.dashboardDesigner.model)&&!BoldBIDashboard.isNullOrUndefined(t.dashboardDesigner.model.dashboardFromData)&&t.dashboardDesigner.model.dashboardFromData.loadFromData&&t.updateValueForLabelWidgetInExporting(t.bbdesigner$(u[r]),e),s&&(h=t.getValueForLabelParameter(e),t.bbdesigner$(u[r]).next().html(h),o&&t.updateLabelWidgetCollection(t.bbdesigner$(u[r]),e,h));t.labelParameterVaues.labelWidgetsData=t.labelWidgetsData}t.resetTooltipForLabelParameters(f.find(".bbi-dbrd-control-title"));t.resetTooltipForLabelParameters(f.find(".bbi-dbrd-control-sub-title"));t.resetTooltipForLabelParameters(f.find(".bbi-dbrd-control-description"));t.updateLabelParameterSize(f)}catch(c){return""}else!i.masterSlaveConfiguration.isInteractionCompleted&&i.labelCounter<30?t.bindLableParameterValues(t.labelParameterVaues.LabelParameterData):(i.labelCounter=0,i.masterSlaveConfiguration.isInteractionCompleted=!0,t.bindLableParameterValues(t.labelParameterVaues.LabelParameterData))},500)},n.prototype.updateValueForLabelWidgetInExporting=function(n,t){for(var r="",i=0;i<this.labelWidgetsData.length;i++)this.labelWidgetsData[i].id===this.bbdesigner$(n).parents(".bbi-dbrd-control-container.e-label-item").attr("name")+"_"+t&&(r=this.labelWidgetsData[i].value);this.bbdesigner$(n).next().html(r)},n.prototype.updateLabelWidgetCollection=function(n,t,i){var f=this.dashboardDesigner.bbdesigner$,u,r;if(this.labelWidgetsData.length===0)this.labelWidgetsData.push({id:f(n).parents(".bbi-dbrd-control-container.e-label-item").attr("name")+"_"+t,value:i});else{for(u=!0,r=0;r<this.labelWidgetsData.length;r++)if(this.labelWidgetsData[r].id===this.bbdesigner$(n).parents(".bbi-dbrd-control-container.e-label-item").attr("name")+"_"+t){this.labelWidgetsData[r].value=i;u=!1;break}u&&this.labelWidgetsData.push({id:f(n).parents(".bbi-dbrd-control-container.e-label-item").attr("name")+"_"+t,value:i})}},n.prototype.updateLabelParameterValue=function(n){for(var r,u=this.dashboardDesigner.modules.Mode.designCanvas,i=u.find(".bbi-dbrd-label-parameter-value"),t=0;t<i.length;t++)r=!0,this.bbdesigner$(i[t]).parents(".bbi-dbrd-control-container.e-label-item").length===1&&(r=this.isUpdateLabelParaForLabelWidget(this.bbdesigner$(i[t]),n)),r&&this.bbdesigner$(i[t]).html("...")},n.prototype.isUpdateLabelParaForLabelWidget=function(n,t){var i,u,f,e,o,r,s;if(t===void 0&&(t=null),i=[],u=!1,BoldBIDashboard.isNullOrUndefined(t)||t==="")if(e={selectedInfo:this.masterSlaveConfiguration.getAllWidgetSelectedValues()},e.selectedInfo.length>0)for(o=0;o<e.selectedInfo.length;o++)for(f=this.masterSlaveConfiguration.GetSlaveListOfMasterWidget(e.selectedInfo[o].ReportName),r=0;r<f.length;r++)i.indexOf(f[r])===-1&&i.push(f[r]);else u=!0;else i=this.masterSlaveConfiguration.GetSlaveListOfMasterWidget(t);for(s=0;s<i.length;s++)if(i[s]===this.bbdesigner$(n).parents(".bbi-dbrd-control-container.e-label-item").attr("data-name")){u=!0;break}return u},n.prototype.updateLabelParameterSize=function(n){var r=n.find(".bbi-dbrd-control-title-wrapper"),u=n.find(".bbi-dbrd-control-sub-header"),t,i;if(r.length>0)for(t=0;t<r.length;t++)this.adjustParameterColumn(this.bbdesigner$(r[t]));if(u.length>0)for(i=0;i<u.length;i++)this.adjustParameterColumn(this.bbdesigner$(u[i]))},n.prototype.resetTooltipForLabelParameters=function(n){var t,i;if(n.length>0)for(t=0;t<n.length;t++)if(this.bbdesigner$(n[t]).children().hasClass("bbi-dbrd-label-parameter-text")){i=void 0;try{i=this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.design?this.bbdesigner$(n[t]).clone().children(".bbi-dbrd-label-parameter-value").remove().end().text():this.bbdesigner$(n[t]).clone().children(".bbi-dbrd-label-parameter-text").remove().end().text()}catch(r){i=""}this.bbdesigner$(n[t]).attr("data-tooltip",i)}},n.prototype.getColumnId=function(n){for(var i=Object.keys(n[0]),r=[],t=0;t<i.length;t++)r.push({id:i[t]});return r},n.prototype.getValueForLabelParameter=function(n){var r=this.labelParameterVaues.LabelParameterData,t,f,u,i;if(!BoldBIDashboard.isNullOrUndefined(r)){for(t=0;t<r.length;t++)if(r[t].data!=="[]")for(f=JSON.parse(r[t].data),u=this.getColumnId(f),i=0;i<u.length;i++)if(u[i].id===n)return f[0][u[i].id];return""}},n.prototype.setValueForLabelParameter=function(n){var t=this.getValueForLabelParameter(this.bbdesigner$(n).attr("data-labelparameterid"));this.bbdesigner$(n).next().html(t)},n.prototype.adjustParameterColumn=function(n){var u,t,i,f,r;if(!BoldBIDashboard.isNullOrUndefined(n)&&this.bbdesigner$(n).length>0&&(u=void 0,t=void 0,this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.design?(u=n.find(".bbi-dbrd-label-parameter-text").length,t=n.find(".e-title-text")):(u=n.find(".bbi-dbrd-label-parameter-value").length,t=n.find(".e-title-value")),i=n[0].getBoundingClientRect().width,n.find(".bbi-dbrd-control-title").length===1&&(i=i-6),n.find(".bbi-dbrd-control-sub-title").length===1&&(i=i-10),f=i/(t.length+1),u>0)){for(r=0;r<t.length;r++)(this.bbdesigner$(t[r]).hasClass("bbi-dbrd-label-parameter-text")||this.bbdesigner$(t[r]).hasClass("bbi-dbrd-label-parameter-value"))&&this.bbdesigner$(t[r]).css({"max-width":f});this.getParameterColumnMaxWidth(t,i)}},n.prototype.getParameterColumnMaxWidth=function(n,t){for(var i,u=[],e=t-this.getAvailedParameterColumnWidth(n),f=n.length,r=0;r<f;r++)(this.bbdesigner$(n[r]).hasClass("bbi-dbrd-label-parameter-text")||this.bbdesigner$(n[r]).hasClass("bbi-dbrd-label-parameter-value"))&&u.push(this.bbdesigner$(n[r]));for(i=0;i<f;i++)(this.bbdesigner$(n[i]).hasClass("bbi-dbrd-label-parameter-text")||this.bbdesigner$(n[i]).hasClass("bbi-dbrd-label-parameter-value"))&&this.bbdesigner$(n[i]).css({"max-width":parseInt(this.bbdesigner$(n[i]).css("max-width"),10)+e/u.length+"px"})},n.prototype.getAvailedParameterColumnWidth=function(n){for(var i=0,r=n.length,t=0;t<r;t++)i+=this.bbdesigner$(n[t]).width();return i},n.prototype.getValidSummaryType=function(n){switch(n){case"sum":return"SUM";case"count":return"COUNT";case"distinctcount":case"dcount":return"COUNTD";case"avg":case"average":return"AVG";case"max":case"maximum":return"MAX";case"min":case"minimum":return"MIN";case"var":case"variance":return"VAR";case"stdev":return"STDEV"}return"None"},n.prototype.getValidDateFormat=function(n){switch(n){case"year":return"Year";case"none":return"None";case"monthname":return"Month";case"day":return"Day";case"quarter":return"Quarter";case"month":return"Month";case"monthyear":return"MonthYear";case"quarteryear":return"QuarterYear";case"daymonthyear":return"DayMonthYear";case"minutes":return"Minute";case"datehour":return"DateHour";case"dayofweek":return"DayOfWeek";case"weekofyear":return"WeekOfYear";case"timespan":return"TimeSpan";case"timespanhours":return"TimeSpanHours";case"timespanminutes":return"TimeSpanMinutes";case"timespandays":return"TimeSpanDays";case"timespanweeks":return"TimeSpanWeeks";case"timespanmonths":return"TimeSpanMonths";case"timespanyears":return"TimeSpanYears";case"timespaninminutes":return"TimeSpanInMinutes";case"timespaninhours":return"TimeSpanInHours";case"monthdayyear":return"MonthDayYear";case"datetime":return"DateTime";case"date":return"Date"}return""},n}();BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.LabelParameter",InternalLabelParameter,window);InternalMaximize=function(){function n(n){this.designer=n;this.bbdesigner$=this.designer.bbdesigner$;this.designPanel=this.designer.designerPanel;this.masterSlaveFilterConfiguration=this.designer.modules.masterSlaveFilter;this.widgetHelper=this.designer.modules.widgetHelper;this.unwiredEvents();this.wiredEvents()}return n.prototype.showMaximizeContiner=function(n){this.designer.triggerViewerEvent(ViewerEvent.actionBegin,ViewerEventType.maximizeDialogOpen,n.target,n);var i=this.bbdesigner$(n.currentTarget).parents(".bbi-dbrditem"),t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(i);this._showMaximizeView(t);this.designer.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.maximizeDialogOpen,n.target,n);this.combineWidgetMax(BoldBIDashboard.Dashboard.WidgetHelper.isContainerWidget(t),t,!0)},n.prototype._showMaximizeView=function(n){var c,t,i,e;this.designer.maximize=this;n.ControlContainer.addClass("bbi-dbrd-maximizeContainer");c=this.designer.modules.aiWidgetHelper.getChildWidget(n);t=this.designer.modules.containerTypeWidgetHelper.getContainerWidget(n);BoldBIDashboard.isNullOrUndefined(t)||this.designer.modules.Mode.designCanvas.append(n.ControlContainer);var o=this.designer.isMobileLayout(),r=o?"0px":"5px",u=10,s=o?this.designer.modules.Mode.designPanelTag.height():this.designer.modules.Mode.canvasContainer.height(),f=this.designPanel.rowsLength>this.designPanel.singlePageRowLength;if(this.designPanel.isMobileView&&this.hideHeaderItems(),this.scrollPositions={top:this.designer.modules.Mode.canvasContainer.scrollTop(),left:this.designer.modules.Mode.canvasContainer.scrollLeft()},this.designer.modules.Mode.canvasContainer.scrollTop(0).scrollLeft(0).css({overflow:"hidden"}),i=0,n.ControlContainer.find(".bbi-dbrd-control-container-wrapper").length>0&&(i=n.getControlContainerPaddingValue()),n.ControlContainer.css({left:f?"0px":r,top:r,height:s-(u+i),width:this.designer.modules.Mode.designCanvas.width()-(f?0:u)}),!BoldBIDashboard.isNullOrUndefined(t)&&t.validateStandardWidget()&&t.updateWidgetContainer(f,r,s,u,i),e=this.designer.modules.labelParameter,BoldBIDashboard.isNullOrUndefined(n.ControlHeader)&&BoldBIDashboard.isNullOrUndefined(n.ControlSubHeader)||(e.adjustParameterColumn(n.ControlHeader.find(".bbi-dbrd-control-title-wrapper")),e.adjustParameterColumn(n.ControlSubHeader.find(".bbi-dbrd-control-sub-header"))),this.applyIconVisibility(n.ControlContainer.find(".bbi-dbrd-control-menu-icon"),"none"),this.isControlMenuIconRequired(n,!0)&&this.applyIconVisibility(n.ControlContainer.find(".bbi-dashboard-widget-menu"),"block"),this.designPanel.isMobileView)this.showMaximizeMobileView(n);else{var l=n.ControlContainer.find(".bbi-dbrd-control-header").height(),a=n.ControlContainer.find(".bbi-dbrd-control-sub-header"),v=a.css("display")==="none"?0:n.ControlContainer.find(".bbi-dbrd-control-sub-header").height(),h=parseInt(n.ContentContainer.css("padding-top"),10);n.getJson().ContainerSettings.ShowHeader?n.ContentContainer.css("height",n.ControlContainer.height()-(v+l+h)):n.ContentContainer.css("height","calc(100% - "+h+"px)");n.updateSize();n.ControlContainer.find(".e-dbrd-maximClose-toggle").first().addClass("bbi-dbrd-maxim-close").css("display","block");n.ControlContainer.find(".e-dbrd-maximClose-toggle").parent().css("display","block")}BoldBIDashboard.Dashboard.WidgetContainerHelper.controlTitleResponsiveness(n,!0);n.ControlContainer.find(".bbi-dbrd-maxim-toggle").removeClass("bbi-dbrd-maxim");this.applyIconVisibility(n.ControlContainer.find(".bbi-dbrd-maxim-toggle"),"none")},n.prototype.hideHeaderItems=function(){this.designer.modules.Mode.designPanelTag.find(".bbi-dashboarddesigner-bannerPanel").css("display","none");this.masterSlaveFilterConfiguration.getAllWidgetSelectedValues().length>0&&this.designer.modules.Mode.designPanelTag.find(".bbi-dashboarddesigner-overview-panel").css("display","none")},n.prototype.hideActiveMaximizeContainer=function(){var n=this.designer.modules.Mode.designCanvas.find(".bbi-dbrd-maximizeContainer"),t;n.length===1&&(t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(n),this._hideMaximizeView(t))},n.prototype.hideMaximizeContainer=function(n){this.designer.triggerViewerEvent(ViewerEvent.actionBegin,ViewerEventType.maximizeDialogClose,n.target,n);var i=this.bbdesigner$(n.currentTarget).parents(".bbi-dbrditem"),t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(i);this._hideMaximizeView(t);this.combineWidgetMax(BoldBIDashboard.Dashboard.WidgetHelper.isContainerWidget(t),t,!1);this.designer.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.maximizeDialogClose,n.target,n)},n.prototype._hideMaximizeView=function(n){var u=this.designer.modules.aiWidgetHelper.getChildWidget(n),t=this.designer.modules.containerTypeWidgetHelper.getContainerWidget(n),r,i;BoldBIDashboard.isNullOrUndefined(t)||t.appendWidget(n.ControlContainer);n.ControlContainer.removeClass("bbi-dbrd-maximizeContainer");n.ControlContainer.find(".bbi-dbrd-control-header").removeClass("bbi-dashboarddesigner-no-title");n.getJson().ContainerSettings.Bounds.ColumnSpan>4&&(n.ControlContainer.find(".bbi-dbrd-maxim-toggle").addClass("bbi-dbrd-maxim"),this.applyIconVisibility(n.ControlContainer.find(".bbi-dbrd-maxim-toggle"),"block"));n.ControlContainer.find(".e-dbrd-maximClose-toggle").removeClass("bbi-dbrd-maxim-close");n.ControlContainer.find(".bbi-dbrd-backarrow").remove();this.applyIconVisibility(n.ControlContainer.find(".bbi-dashboard-widget-menu"),"none");this.applyIconVisibility(n.ControlContainer.find(".e-dbrd-maximClose-toggle"),"none");this.designer.modules.Mode.designPanelTag.hasClass("bbi-dbrd-viewer")||n.ControlContainer.find(".bbi-dbrd-maxim").html("");n.getJson().ContainerSettings.ShowHeader&&!BoldBIDashboard.isNullOrUndefined(n.ControlHeader)?(r=n.getJson().ContainerSettings.SubTitle===""?n.ControlHeader.height():n.ControlHeader.height()+n.ControlSubHeader.outerHeight(),n.ContentContainer.css("height","calc(100% - "+r+"px)")):n.ContentContainer.css("height","100%");i=this.designer.isViewMode()&&this.designer.model.isShowGetEmbedCodeForWidgets||this.isControlMenuIconRequired(n,!1)?"block":"none";n.ControlContainer.find(".bbi-dbrd-control-menu-icon")[0].style.display=i;n.ControlContainer.find(".bbi-dbrd-control-menu-icon").parent().css("display",i);!BoldBIDashboard.isNullOrUndefined(t)&&t.validateStandardWidget()&&n.ControlContainer.find(".bbi-dbrd-maxim-toggle").addClass("bbi-dbrd-maxim").css("display","block");this.designer.modules.Mode.canvasContainer.css({overflow:"auto",padding:"0px"});BoldBIDashboard.isNullOrUndefined(this.scrollPositions)||(this.designer.modules.Mode.canvasContainer.scrollLeft(this.scrollPositions.left),this.designer.modules.Mode.canvasContainer.scrollTop(this.scrollPositions.top));this.designPanel.isMobileView?(this.hideMaximizeMobileView(n),this.combineWidgetMax(BoldBIDashboard.Dashboard.WidgetHelper.isContainerWidget(n),n,!1)):(BoldBIDashboard.isNullOrUndefined(t)||t.updateSize(t.CellInfo),n.updateSize(n.CellInfo));BoldBIDashboard.Dashboard.WidgetContainerHelper.controlTitleResponsiveness(n,!1)},n.prototype.applyIconVisibility=function(n,t){!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0&&(n[0].style.display=t,n.parent()[0].style.display=t)},n.prototype.isControlMenuIconRequired=function(n,t){var i=n.getJson().ContainerSettings.EnableCsvExport||n.getJson().ContainerSettings.EnableExcelExport||n.getJson().ContainerSettings.EnableImageExport&&this.designer.model.export.Image||n.getJson().ContainerSettings.EnablePdfExport&&this.designer.model.export.Pdf;return t?i:i||n.getJson().ContainerSettings.ViewData},n.prototype.showMaximizeMobileView=function(n){var t,i;this.scrollPositions={top:this.designer.modules.Mode.canvasContainer.scrollTop(),left:this.designer.modules.Mode.canvasContainer.scrollLeft()};this.designer.modules.Mode.canvasContainer.scrollTop(0).scrollLeft(0).css({overflow:"hidden"});this.designPanel.designPanel.css({height:this.designer.modules.Mode.designerContainer.height()+this.designPanel.cellMargin});this.designer.modules.Mode.designCanvas.css({width:this.designer.modules.Mode.canvasContainer.width()});this.designPanel.updatePreviewCanvasSize();n.ControlContainer.find(".bbi-dbrd-content-container").addClass("bbi-desinger-container-padding");t=BoldBIDashboard.buildTag("div .bbi-dbrd-backarrow bbi-dbrd-icon-background-theme");t.css("z-index",BoldBIDashboard.getMaxZindex());n.ControlContainer.find(".bbi-dbrd-control-title-wrapper").prepend(t);n.updateSize();BoldBIDashboard.isNullOrUndefined(n.ControlHeader)&&(i=BoldBIDashboard.buildTag("div .bbi-dbrd-control-noheader"),n.ControlContainer.find(".bbi-dbrd-control-header:first").addClass("bbi-dashboarddesigner-no-title").prepend(i),n.ControlContainer.find(".bbi-dbrd-control-noheader").prepend(t));this.designer.element.find("#"+this.designer._id+"_scrollPanel").css("padding","0px 10px 0px 0px")},n.prototype.hideMaximizeMobileView=function(n){BoldBIDashboard.isNullOrUndefined(n.ControlHeader)&&(n.ControlContainer.find(".bbi-dbrd-control-noheader").remove(),n.ControlContainer.find(".bbi-dbrd-control-header").removeClass("bbi-dashboarddesigner-no-title"));n.ControlContainer.find(".bbi-dbrd-backarrow").remove();this.designer.modules.Mode.designPanelTag.find(".bbi-dashboarddesigner-bannerPanel").css("display","block");this.masterSlaveFilterConfiguration.getAllWidgetSelectedValues().length>0&&this.designer.modules.Mode.designPanelTag.find(".bbi-dashboarddesigner-overview-panel").css("display","block");this.designPanel.designPanel.css({height:this.designer.modules.Mode.designerContainer.height()-this.designPanel.getCanvasTop()+2});this.designPanel.updatePreviewCanvasSize();this.designer.modules.Mode.designCanvas.css({width:this.designer.modules.Mode.canvasContainer.width()-parseInt(this.designer.modules.Mode.designCanvas.css("padding"),10)-this.designPanel.getBrowserScrollBarSize()});n.ControlContainer.find(".bbi-dbrd-content-container").removeClass("bbi-desinger-container-padding");this.designer.modules.Mode.designPanelTag.hasClass("bbi-dbrd-viewer")||n.ControlContainer.find(".bbi-dbrd-maxim").html("");this.designer.element.find("#"+this.designer._id+"_scrollPanel").css("padding","0px");n.updateSize(n.CellInfo)},n.prototype.reSize=function(){var t=this.designer.modules.Mode.designPanelTag.find(".bbi-dbrd-maximizeContainer"),n=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(t);this._hideMaximizeView(n);this.designer.updateSize();this.designPanel.isMobileView=(this.designer.model.mode===BoldBIDashboard.Designer.mode.view||this.designer.model.mode===BoldBIDashboard.Designer.mode.designpreview)&&this.designer.isMobileLayout();this.designPanel.isMobileView?(this.hideMaximizeMobileView(n),this._showMaximizeView(n)):this._showMaximizeView(n)},n.prototype.hideOnClosePreview=function(){var n=this.designer.modules.Mode.designPanelTag.find(".bbi-dbrd-maximizeContainer"),t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(n);this._hideMaximizeView(t)},n.prototype.combineWidgetMax=function(n,t,i){var r,u;if(n)for(r=[],this.widgetHelper.getAllWidgets().filter(function(n){BoldBIDashboard.isNullOrUndefined(n.getContainerSettings().CombineWidgetId)||n.getContainerSettings().CombineWidgetId===""||n.getContainerSettings().CombineWidgetId===t.getJson().UniqueId&&r.push(n)}),u=0;u<r.length;u++)i?(this.updateIconsAfterCombineMax(i,r[u]),this.designPanel.isMobileView?this.designer.modules.containerTypeWidgetHelper.getContainerWidget(r[u]).updateChildForMobileMode(r[u]):this.designPanel.updateCombineWidgetsPosition(r[u]),this.designer.triggerViewerEvent(ViewerEvent.actionComplete,ViewerEventType.maximizeDialogOpen,event.target,event)):(this.updateIconsAfterCombineMax(i,r[u]),this.designPanel.isMobileView?this.designer.modules.containerTypeWidgetHelper.getContainerWidget(r[u]).updateChildForMobileMode(r[u]):r[u].updateSize(r[u].CellInfo))},n.prototype.updateIconsAfterCombineMax=function(n,t){var i=t.getContainerSettings(),r="";n?r=".bbi-dashboard-widget-menu":(r=".bbi-dbrd-control-menu-icon",i.ShowMaximize||t.ControlContainer.find(".bbi-dbrd-maxim-toggle").css("display","none"));i.EnableImageExport&&i.EnablePdfExport&&i.EnableExcelExport&&i.EnableCsvExport||t.ControlContainer.find(r).css("display","none")},n.prototype.wiredEvents=function(){this.designer.element.on("click",".bbi-dbrd-backarrow",this.bbdesigner$.proxy(this.hideMaximizeContainer,this))},n.prototype.unwiredEvents=function(){this.designer.element.off("click",".bbi-dbrd-backarrow",this.bbdesigner$.proxy(this.hideMaximizeContainer,this))},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.Maximize",InternalMaximize,window);InternalAxisRangeSettings=function(){function n(n){this.dashboardDesigner=null;this.axisRangeSettingsDialog=null;this.axisRangeSettingsContainer=null;this.footerTag=null;this.targetMethod="";this.axisRangeInfo=null;this.isSecondaryAxis=null;this.isReset=!1;this.isIncorrectRange=!1;this.locale=null;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.dashboardDesigner._id;this.renderAxisRangeSettingsWindow();this.wireEvents()}return n.prototype.renderAxisRangeSettingsWindow=function(){var t=this.axisRangeSettingsDialog=BoldBIDashboard.buildTag("div.e-axis-range-dlg","",{},{id:this.id+"_axis_range_settings_dialog"}),n=this.axisRangeSettingsContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-axis-range-settings-container","",{},{id:this.id+"_axis_range_settings_container"}),i=BoldBIDashboard.buildTag("div.bbi-dbrd-axis-reset bbi-dbrd-icon-background-theme bbi-dbrd-designer-hoverable","",{},{id:this.id+"_axis_range_reset","data-tooltip":this.locale.dialogOptions.resetButtonText}),r=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.dialogOptions.okButtonText,{float:"right"},{id:this.id+"_axis_range_ok",type:"button"}),u=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.locale.dialogOptions.cancelButtonText,{float:"right"},{id:this.id+"_axis_range_cancel",type:"button"});this.renderSettingsContainer();n.append(this.axisRangeSettingsContainer);t.append(n);this.bbdesigner$(this.dashboardDesigner.element).append(this.axisRangeSettingsDialog);this.axisRangeSettingsDialog.BoldBIDashboardDialog({title:"Axis Range Settings",width:"auto",height:"auto",minWidth:290,minHeight:220,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner",close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),containment:"#"+this.id,target:"#"+this.id,closeIconTooltip:this.locale.dialogOptions.closeButtonText});this.footerTag=this.dashboardDesigner.element.find("#"+this.id+"_axis_range_settings_dialog_foot");this.footerTag.append(i,u,r)},n.prototype.closeAxisRangeSettings=function(){var n=this.axisRangeSettingsDialog.data("BoldBIDashboardDialog");BoldBIDashboard.isNullOrUndefined(n)||n.close()},n.prototype.onUpdateAxisParameter=function(n){var t=n.widgetJson,u=this.dashboardDesigner.isContainsParam(t.PrimaryAxisRange.MinimumParameter),f=this.dashboardDesigner.isContainsParam(t.PrimaryAxisRange.MaximumParameter),e=this.dashboardDesigner.isContainsParam(t.PrimaryAxisRange.IntervalParameter),o=this.dashboardDesigner.isContainsParam(t.SecondaryAxisRange.MinimumParameter),s=this.dashboardDesigner.isContainsParam(t.SecondaryAxisRange.MaximumParameter),h=this.dashboardDesigner.isContainsParam(t.SecondaryAxisRange.IntervalParameter),i=n.type!=="RadarPolarChart"&&n.type!=="ScatterChart",r;(u||f||e)&&(t.PrimaryAxisRange.MinValue=u?this.dashboardDesigner.checkAndUpdateParameterValue(t.PrimaryAxisRange.MinimumParameter,n.DataGroupInfo.DataSourceName,!0):t.PrimaryAxisRange.MinValue,t.PrimaryAxisRange.MaxValue=f?this.dashboardDesigner.checkAndUpdateParameterValue(t.PrimaryAxisRange.MaximumParameter,n.DataGroupInfo.DataSourceName,!0):t.PrimaryAxisRange.MaxValue,t.PrimaryAxisRange.Interval=e?this.dashboardDesigner.checkAndUpdateParameterValue(t.PrimaryAxisRange.IntervalParameter,n.DataGroupInfo.DataSourceName,!0):t.PrimaryAxisRange.Interval,this.isSecondaryAxis=!1,r=i?n.getChartProperties():n.widgetJson,this.axisRangeInfo=JSON.parse(JSON.stringify(r.PrimaryAxisRange)),i&&n.type!=="ComboChart"?n.chartProperties.updateAxisRangeInfo(this):n.updateAxisRangeInfo(this));(o||s||h)&&(t.SecondaryAxisRange.MinValue=o?this.dashboardDesigner.checkAndUpdateParameterValue(t.SecondaryAxisRange.MinimumParameter,n.DataGroupInfo.DataSourceName,!0):t.SecondaryAxisRange.MinValue,t.SecondaryAxisRange.MaxValue=s?this.dashboardDesigner.checkAndUpdateParameterValue(t.SecondaryAxisRange.MaximumParameter,n.DataGroupInfo.DataSourceName,!0):t.SecondaryAxisRange.MaxValue,t.SecondaryAxisRange.Interval=h?this.dashboardDesigner.checkAndUpdateParameterValue(t.SecondaryAxisRange.IntervalParameter,n.DataGroupInfo.DataSourceName,!0):t.SecondaryAxisRange.Interval,this.isSecondaryAxis=!0,r=i?n.getChartProperties():n.widgetJson,this.axisRangeInfo=JSON.parse(JSON.stringify(r.SecondaryAxisRange)),i&&n.type!=="ComboChart"?n.chartProperties.updateAxisRangeInfo(this):n.updateAxisRangeInfo(this))},n.prototype.openAxisRangeSettings=function(n,t,i){var u=this.axisRangeSettingsDialog.data("BoldBIDashboardDialog"),r;t.type!=="RadarPolarChart"&&t.type!=="ScatterChart"?(this.targetInstance=t.getChartProperties().ChartType==="ComboChart"?t:t.chartProperties,this.targetMethod=n,this.isSecondaryAxis=i,r=t.getChartProperties(),this.axisRangeInfo=this.isSecondaryAxis?JSON.parse(JSON.stringify(r.SecondaryAxisRange)):JSON.parse(JSON.stringify(r.PrimaryAxisRange))):(this.targetInstance=t,this.targetMethod=n,this.isSecondaryAxis=i,r=t.widgetJson,this.axisRangeInfo=this.isSecondaryAxis?JSON.parse(JSON.stringify(r.SecondaryAxisRange)):JSON.parse(JSON.stringify(r.PrimaryAxisRange)));var f=this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_minimum_textbox"),e=this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_maximum_textbox"),o=this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_interval_textbox"),s=this.dashboardDesigner.isContainsParam(this.axisRangeInfo.MinimumParameter),h=this.dashboardDesigner.isContainsParam(this.axisRangeInfo.MaximumParameter),c=this.dashboardDesigner.isContainsParam(this.axisRangeInfo.IntervalParameter);BoldBIDashboard.isNullOrUndefined(this.axisRangeInfo)||this.axisRangeInfo.MinValue===""&&this.axisRangeInfo.MaxValue===""&&this.axisRangeInfo.Interval===""?(this.axisRangeInfo=new AxisRange,f.val(""),e.val(""),o.val("")):(f.val(s?this.axisRangeInfo.MinimumParameter:this.axisRangeInfo.MinValue),e.val(h?this.axisRangeInfo.MaximumParameter:this.axisRangeInfo.MaxValue),o.val(c?this.axisRangeInfo.IntervalParameter:this.axisRangeInfo.Interval));this.isIncorrectRange=!1;this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_validation_div_label").removeClass("bbi-dbrd-axis-range-validate-label-visible").addClass("bbi-dbrd-axis-range-validate-label-hidden").text("");this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_interval_textbox").parents(".bbi-dbrd-axisrange-textbox").removeClass("bbi-designer-error");this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_minimum_textbox").parents(".bbi-dbrd-axisrange-textbox").removeClass("bbi-designer-error");this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_maximum_textbox").parents(".bbi-dbrd-axisrange-textbox").removeClass("bbi-designer-error");BoldBIDashboard.isNullOrUndefined(u)||u.open()},n.prototype.renderSettingsContainer=function(){var n=this.locale.axisRangeSettingsValidation;BoldBIDashboard.isNullOrUndefined(n)||(this.axisRangeSettingsContainer.append(this.rangeValueContainer(n.minimumText,"minimum")),this.axisRangeSettingsContainer.append(this.rangeValueContainer(n.maximumText,"maximum")),this.axisRangeSettingsContainer.append(this.rangeValueContainer(n.intervalText,"interval")),this.axisRangeSettingsContainer.append(this.validationMessageContainer()))},n.prototype.rangeValueContainer=function(n,t){var r=BoldBIDashboard.buildTag("div.bbi-dbrd-axis-range-value-row-container","",{},{id:this.id+"_axis_range_settings_"+t.toLocaleLowerCase()+"_div"}),u=BoldBIDashboard.buildTag("div.bbi-dbrd-axis-range-value-label-container","",{},{id:this.id+"_axis_range_settings_"+t.toLocaleLowerCase()+"_div"}),o=BoldBIDashboard.buildTag("label.bbi-dbrd-axis-range-value-label",n,{},{id:this.id+"_axis_range_settings_"+t.toLocaleLowerCase()+"_label"});u.append(o);var f=BoldBIDashboard.buildTag("div.bbi-dbrd-axis-range-value-text-box-container","",{},{id:this.id+"_axis_range_settings_"+t.toLocaleLowerCase()+"_div"}),e=BoldBIDashboard.buildTag("td","",{"padding-top":"20px","padding-left":"8px"},{}),i=BoldBIDashboard.buildTag("input.e-textbox","",{width:"180px",height:"29px"},{id:this.id+"_axis_range_settings_"+t.toLocaleLowerCase()+"_textbox",type:"text",placeholder:this.locale.axisRangeSettingsValidation.autoText});return e.append(i),i.addClass("bbi-axis-rangetext bbi-dbrd-axisrange-textbox e-designer-param-list"),f.append(e),r.append(u).append(f),i.bind("focusout",this.bbdesigner$.proxy(this.validate,this)),r},n.prototype.validationMessageContainer=function(){var n=BoldBIDashboard.buildTag("div.bbi-dbrd-axis-range-validation-row-container","",{},{id:this.id+"_axis_range_settings_validation_div"}),t=BoldBIDashboard.buildTag("div.bbi-dbrd-axis-range-validate-label","",{},{id:this.id+"_axis_range_settings_validation_div_label"});return n.append(t),n},n.prototype.validate=function(n,t){var i,h,o,s;if(t===void 0&&(t=!1),i=this.locale.axisRangeSettingsValidation,this.isIncorrectRange=!0,h=this.dashboardDesigner.designerPanel.selectedReportItems,o=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(h[0])),!BoldBIDashboard.isNullOrUndefined(this.axisRangeInfo)){s=this.axisRangeInfo.MinValue!==this.dashboardDesigner.element.find("#"+this.id+"_axis_range_settings_minimum_textbox").val()?"minimum":this.axisRangeInfo.MaxValue!==this.dashboardDesigner.element.find("#"+this.id+"_axis_range_settings_maximum_textbox").val()?"maximum":this.axisRangeInfo.Interval!==this.dashboardDesigner.element.find("#"+this.id+"_axis_range_settings_interval_textbox").val()?"interval":"";this.axisRangeInfo.MinValue=this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_minimum_textbox").val();this.axisRangeInfo.MaxValue=this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_maximum_textbox").val();this.axisRangeInfo.Interval=this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_interval_textbox").val();var c=this.dashboardDesigner.isContainsParam(this.axisRangeInfo.MinValue),l=this.dashboardDesigner.isContainsParam(this.axisRangeInfo.MaxValue),a=this.dashboardDesigner.isContainsParam(this.axisRangeInfo.Interval);if(t?t:this.axisRangeInfo.MinValue==="@"||this.axisRangeInfo.MaxValue==="@"||this.axisRangeInfo.Interval==="@"?t:!t){this.axisRangeInfo.MinimumParameter=c?this.axisRangeInfo.MinValue:"";this.axisRangeInfo.MaximumParameter=l?this.axisRangeInfo.MaxValue:"";this.axisRangeInfo.IntervalParameter=a?this.axisRangeInfo.Interval:"";this.axisRangeInfo.MinValue=c?this.dashboardDesigner.checkAndUpdateParameterValue(this.axisRangeInfo.MinValue,o.DataGroupInfo.DataSourceName,!0):this.axisRangeInfo.MinValue;this.axisRangeInfo.MaxValue=l?this.dashboardDesigner.checkAndUpdateParameterValue(this.axisRangeInfo.MaxValue,o.DataGroupInfo.DataSourceName,!0):this.axisRangeInfo.MaxValue;this.axisRangeInfo.Interval=a?this.dashboardDesigner.checkAndUpdateParameterValue(this.axisRangeInfo.Interval,o.DataGroupInfo.DataSourceName,!0):this.axisRangeInfo.Interval;var r=this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_validation_div_label"),u=this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_minimum_textbox").parents(".bbi-dbrd-axisrange-textbox"),f=this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_maximum_textbox").parents(".bbi-dbrd-axisrange-textbox"),e=this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_interval_textbox").parents(".bbi-dbrd-axisrange-textbox");if(s===""&&!(BoldBIDashboard.isNullOrUndefined(n.relatedTarget)||this.bbdesigner$(n.relatedTarget).attr("id")==="container_axis_range_settings_dialog"||this.bbdesigner$(n.relatedTarget).attr("id")==="container_axis_range_ok"||this.bbdesigner$(n.relatedTarget).attr("id")==="container_axis_range_settings_dialog_wrapper"))return;this.axisRangeInfo.MinValue!==""&&(this.axisRangeInfo.MinValue.indexOf("-")!==-1&&this.axisRangeInfo.MinValue.indexOf("-")!==0||isNaN(parseFloat(this.axisRangeInfo.MinValue)))?(r.removeClass("bbi-dbrd-axis-range-validate-label-hidden").addClass("bbi-dbrd-axis-range-validate-label-visible").text(i.validRange),u.addClass("bbi-designer-error").focus(),f.removeClass("bbi-designer-error"),e.removeClass("bbi-designer-error")):this.axisRangeInfo.MaxValue!==""&&(this.axisRangeInfo.MaxValue.indexOf("-")!==-1&&this.axisRangeInfo.MaxValue.indexOf("-")!==0||isNaN(parseFloat(this.axisRangeInfo.MaxValue)))?(r.removeClass("bbi-dbrd-axis-range-validate-label-hidden").addClass("bbi-dbrd-axis-range-validate-label-visible").text(i.validRange),u.removeClass("bbi-designer-error"),f.addClass("bbi-designer-error").focus(),e.removeClass("bbi-designer-error")):this.axisRangeInfo.Interval!==""&&(this.axisRangeInfo.Interval.indexOf("-")!==-1&&this.axisRangeInfo.Interval.indexOf("-")!==0||isNaN(parseFloat(this.axisRangeInfo.Interval)))?(r.removeClass("bbi-dbrd-axis-range-validate-label-hidden").addClass("bbi-dbrd-axis-range-validate-label-visible").text(i.validRange),u.removeClass("bbi-designer-error"),f.removeClass("bbi-designer-error"),e.addClass("bbi-designer-error").focus()):this.axisRangeInfo.Interval!==""&&this.axisRangeInfo.Interval<0?(r.removeClass("bbi-dbrd-axis-range-validate-label-hidden").addClass("bbi-dbrd-axis-range-validate-label-visible").text(i.validInterval),u.removeClass("bbi-designer-error"),f.removeClass("bbi-designer-error"),e.addClass("bbi-designer-error").focus()):this.axisRangeInfo.MinValue!==""&&this.axisRangeInfo.MaxValue!==""&&parseFloat(this.axisRangeInfo.MinValue)>=parseFloat(this.axisRangeInfo.MaxValue)?s==="maximum"?(r.removeClass("bbi-dbrd-axis-range-validate-label-hidden").addClass("bbi-dbrd-axis-range-validate-label-visible").text(i.maximumRange),u.removeClass("bbi-designer-error"),f.addClass("bbi-designer-error").focus(),e.removeClass("bbi-designer-error")):(r.removeClass("bbi-dbrd-axis-range-validate-label-hidden").addClass("bbi-dbrd-axis-range-validate-label-visible").text(i.minimumRange),u.addClass("bbi-designer-error").focus(),f.removeClass("bbi-designer-error"),e.removeClass("bbi-designer-error")):this.axisRangeInfo.Interval==="0"?(r.removeClass("bbi-dbrd-axis-range-validate-label-hidden").addClass("bbi-dbrd-axis-range-validate-label-visible").text(i.intervalRange),u.removeClass("bbi-designer-error"),f.removeClass("bbi-designer-error"),e.addClass("bbi-designer-error").focus()):this.axisRangeInfo.MinValue!==""&&this.axisRangeInfo.MaxValue!==""&&this.axisRangeInfo.Interval!==""&&this.axisRangeInfo.Interval!=="0"&&this.axisRangeInfo.Interval>parseFloat(this.axisRangeInfo.MaxValue)-parseFloat(this.axisRangeInfo.MinValue)?(r.removeClass("bbi-dbrd-axis-range-validate-label-hidden").addClass("bbi-dbrd-axis-range-validate-label-visible").text(i.intervalRange),u.removeClass("bbi-designer-error"),f.removeClass("bbi-designer-error"),e.addClass("bbi-designer-error").focus()):(this.isIncorrectRange=!1,r.removeClass("bbi-dbrd-axis-range-validate-label-visible").addClass("bbi-dbrd-axis-range-validate-label-hidden").text(""),u.removeClass("bbi-designer-error"),f.removeClass("bbi-designer-error"),e.removeClass("bbi-designer-error"))}}},n.prototype.isNumberKey=function(n,t){var i=t.which!=null?t.which:t.keyCode,r;return i===46&&(r=this.dashboardDesigner.element.find("#"+n).val(),!(r.indexOf(".")>-1))?!0:i===45&&(r=this.dashboardDesigner.element.find("#"+n).val(),r.indexOf("-")===-1)?!0:i>31&&(i<48||i>57)?!1:!0},n.prototype.resetAxisRangeSettings=function(){this.isReset=!0;this.dashboardDesigner.element.find(".e-dbrd-axisrange");var n=this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_minimum_textbox"),t=this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_maximum_textbox"),i=this.axisRangeSettingsContainer.find("#"+this.id+"_axis_range_settings_interval_textbox");n.val("");t.val("");i.val("");this.axisRangeInfo.MinValue="";this.axisRangeInfo.MaxValue="";this.axisRangeInfo.Interval="";this.validate(this,!0)},n.prototype.okButtonClickEvent=function(){this.validate(this,!0);this.isIncorrectRange||(this.isReset||BoldBIDashboard.isNullOrUndefined(this.axisRangeInfo)||this.axisRangeInfo.MinValue!==""||this.axisRangeInfo.MaxValue!==""||this.axisRangeInfo.Interval!==""||this.axisRangeSettingsDialog.data("BoldBIDashboardDialog").close(),BoldBIDashboard.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[{isSecondaryAxis:this.isSecondaryAxis,axisRangeInfo:this.axisRangeInfo}]),BoldBIDashboard.isNullOrUndefined(this.targetInstance)||(!BoldBIDashboard.isNullOrUndefined(this.axisRangeInfo)&&this.isReset&&this.axisRangeInfo.MinValue===""&&this.axisRangeInfo.MaxValue===""&&this.axisRangeInfo.Interval===""&&(this.isReset=!1,this.axisRangeSettingsDialog.data("BoldBIDashboardDialog").close()),(BoldBIDashboard.isNullOrUndefined(this.axisRangeSettingsDialog.data("BoldBIDashboardDialog"))||BoldBIDashboard.isNullOrUndefined(this.axisRangeInfo)||this.axisRangeInfo.MinValue==="")&&this.axisRangeInfo.MaxValue===""&&this.axisRangeInfo.Interval===""||this.axisRangeSettingsDialog.data("BoldBIDashboardDialog").close()))},n.prototype.wireEvents=function(){this.dashboardDesigner.element.on("click","#"+this.id+"_axis_range_ok",this.bbdesigner$.proxy(this.okButtonClickEvent,this));this.dashboardDesigner.element.on("click","#"+this.id+"_axis_range_cancel",this.bbdesigner$.proxy(this.closeAxisRangeSettings,this));this.dashboardDesigner.element.on("click","#"+this.id+"_axis_range_reset",this.bbdesigner$.proxy(this.resetAxisRangeSettings,this))},n.prototype.unWireEvents=function(){this.dashboardDesigner.element.off("click","#"+this.id+"_axis_range_ok",this.bbdesigner$.proxy(this.okButtonClickEvent,this));this.dashboardDesigner.element.off("click","#"+this.id+"_axis_range_cancel",this.bbdesigner$.proxy(this.closeAxisRangeSettings,this));this.dashboardDesigner.element.off("click","#"+this.id+"_axis_range_reset",this.bbdesigner$.proxy(this.resetAxisRangeSettings,this))},n.prototype.destroy=function(){this.unWireEvents()},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.AxisRangeSettings",InternalAxisRangeSettings,window);var InternalAutoRefresh=function(){function n(n){this.autoRefreshTimer=[];this.rowCountDsList=[];this.masterSlaveSerializer=null;this.designer=n;this.refreshSetting=n.refreshSetting;this.bbdesigner$=this.designer.bbdesigner$;this.masterSlaveSerializer=new BoldBIDashboard.DashboardDesignerUtility.MasterSlaveFilterConfiguration(this.designer)}return n.prototype.initializeAutoRefresh=function(n,t){var r,i;if(t===void 0&&(t=null),this.designer.model.mode===BoldBIDashboard.Designer.mode.view)if(this.refreshSetting=n,this.refreshSetting.isWidgetTimer)for(r=this.getWidgetCollectionFromTimer(this.refreshSetting.widgetCollection),i=0;i<r.length;i++)(t===null||r[i].timer===t)&&this.initializeAutoRefreshTimer(r[i].timer,r[i].widgets,t);else this.initializeAutoRefreshTimer(this.getRefreshTimerFromHMSToSec(this.refreshSetting.interval),this.getWidgetCollection())},n.prototype.getWidgetCollectionFromTimer=function(n){for(var r=this,t=[],u=function(i){if(t.filter(function(t){return t.timer===r.getRefreshTimerFromHMSToSec(n[i].widgetInterval)}).length===0){var u=new widgetCollectionOnTimer;u.timer=f.getRefreshTimerFromHMSToSec(n[i].widgetInterval);u.widgets=[];u.widgets.push(n[i].widgetID);t.push(u)}else t.filter(function(t){return t.timer===r.getRefreshTimerFromHMSToSec(n[i].widgetInterval)})[0].widgets.push(n[i].widgetID)},f=this,i=0;i<n.length;i++)u(i);return t},n.prototype.getRefreshTimerFromHMSToSec=function(n){var t=n.split(":"),i=+t[0]*3600+ +t[1]*60+ +t[2];return i>2?i:2},n.prototype.getWidgetCollection=function(){var n=[],t;return(this.refreshSetting.isRefreshWidget||this.refreshSetting.isWidgetTimer)&&this.refreshSetting.widgetCollection.length>0?n=this.getIWidgetInfo(this.refreshSetting.widgetCollection):(t=this.designer.modules.refreshDialog,n=t.getWidgetCollection()),n.map(function(n){return n.widgetID})},n.prototype.getIWidgetInfo=function(n){for(var i=[],t=0;t<n.length;t++)i.push({widgetID:n[t].widgetID,widgetName:n[t].widgetName});return i},n.prototype.getWidgetCollectionBasedOnTimer=function(n,t){var i=[],r;if(this.refreshSetting.isWidgetTimer&&(i=t.filter(function(t){return t.widgetInterval==n}),i.length>0))for(r=0;r<i.length;r++)t.indexOf(i[r])!==-1&&t.splice(t.indexOf(i[r]),1);return i.map(function(n){return n.widgetID})},n.prototype.switchModelInfo=function(n){return{callBackInstance:this,callBackMethod:"onSwitcherChange",checkState:!1,optionalArgs:n,name:"dyn-con-config-switch"}},n.prototype.initializeAutoRefreshTimer=function(n,t,i){var r=this,u;i===void 0&&(i=null);i===null?this.refreshSetting.isRefreshWidget&&this.refreshSetting.isWidgetTimer||this.clearAutoRefreshTimer(i):this.clearAutoRefreshTimer(i);u=new TimerSettings;u.id=n;u.timer=setTimeout(function(t,i,u,f){i?r.refreshSetting.isWidgetTimer?r.updateInsertionAndDeletion(n,t,u,f):r.getRowCountOfDS():r.designer.modules.dataConfiguration.fetchDataForWidgets(t,null,r.masterSlaveSerializer.getAllWidgetSelectedValues(),!1,null,[],u,null,!1,r.designer.modules.dataConfiguration.datasourceCallerId,null,null,null,!1,!1,n)},n*1e3,t,this.refreshSetting.isRefreshRowCount,this.refreshSetting.removeLoader,JSON.stringify(this.rowCountDsList));this.autoRefreshTimer.push(u)},n.prototype.updateInsertionAndDeletion=function(n,t,i,r){for(var h,e,u=JSON.parse(r),o=[],s=this.getWidgetCollectionFromTimer(this.refreshSetting.widgetCollection),f=0;f<s.length;f++)o.push(s[f].timer);h=Math.min.apply(Math,o);e=[];h===n?this.rowCountOfDs(this.bbdesigner$.proxy(this.updateRowCountForWidgetTimer,this,u,n,t)):u.length==0?this.initializeAutoRefreshTimer(n,t,n):this.isRowCountChanged(u,e)?this.updateRowCountChangedDsWidgetsForTimer(e,n,t):this.initializeAutoRefreshTimer(n,t,n)},n.prototype.isRowCountChanged=function(n,t){for(var r=!1,u=function(i){var u=f.rowCountDsList.filter(function(t){return t.dsID===n[i].dsID&&t.rowCount!==n[i].rowCount});u.length>0&&(r=!0,t.push(u[0].dsID))},f=this,i=0;i<n.length;i++)u(i);return r},n.prototype.clearAutoRefreshTimer=function(n){n===void 0&&(n=null);for(var t=0;t<this.autoRefreshTimer.length;t++)this.autoRefreshTimer[t].id===n&&(clearTimeout(this.autoRefreshTimer[t].timer),this.autoRefreshTimer.splice(t,1))},n.prototype.forceClearAutoRefreshTimer=function(){for(var n=0;n<this.autoRefreshTimer.length;n++)clearTimeout(this.autoRefreshTimer[n].timer);this.autoRefreshTimer.splice(0,this.autoRefreshTimer.length)},n.prototype.getConfiguredDsList=function(){for(var t=[],i=this.designer.modules.dataSource,n=0;n<i.datasources.length;n++)t.push(i.datasources[n].Id);return t},n.prototype.getRowCountOfDS=function(){this.rowCountOfDs(this.bbdesigner$.proxy(this.updateRowCountOfDs,this))},n.prototype.rowCountOfDs=function(n){this.designer.refreshSetting.isRefreshRowCount&&this.designer.modules.util.doAjaxPost("POST",this.designer.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.rowcountperdatasourceguid,{action:BoldBIDashboard.DashboardUtil.DesignerAction.getRowCount,data:JSON.stringify({datasourceList:this.getConfiguredDsList()})},{fnction:n},!0,!0)},n.prototype.updateRowCountForWidgetTimer=function(n,t,i,r){if(r.Status){this.updateRowCountList(r.Data);var u=[];n.length===0?this.initializeAutoRefreshTimer(t,i,t):this.isRowCountChanged(n,u)?this.updateRowCountChangedDsWidgetsForTimer(u,t,i):this.initializeAutoRefreshTimer(t,i,t)}},n.prototype.updateRowCountChangedDsWidgetsForTimer=function(n,t,i){for(var r=[],u=0;u<n.length;u++)r=this.getChangedDsWidgetList(n[u],r,i);this.designer.modules.dataConfiguration.fetchDataForWidgets(r,null,this.masterSlaveSerializer.getAllWidgetSelectedValues(),!1,null,[],this.refreshSetting.removeLoader,null,!1,this.designer.modules.dataConfiguration.datasourceCallerId,null,null,null,!1,!1,t)},n.prototype.updateRowCountOfDs=function(n){if(n.Status){var t=[];this.rowCountDsList.length===0?this.updateRowCountList(n.Data):t=this.getModifiedDsIDList(n.Data);t.length===0?this.initializeAutoRefreshTimer(this.getRefreshTimerFromHMSToSec(this.refreshSetting.interval),this.getWidgetCollection()):(this.designer.model.isHideIndicator=!0,this.updateRowCountChangedDsWidgets(t))}else this.initializeAutoRefreshTimer(this.getRefreshTimerFromHMSToSec(this.refreshSetting.interval),this.getWidgetCollection())},n.prototype.updateRowCountList=function(n){var i,t;if(this.rowCountDsList=[],!BoldBIDashboard.isNullOrUndefined(n))for(i=Object.keys(n),t=0;t<i.length;t++)this.rowCountDsList.push({dsID:i[t],rowCount:n[i[t]]})},n.prototype.getModifiedDsIDList=function(n){for(var r=[],u=!1,t=Object.keys(n),f=function(i){var f=e.rowCountDsList.filter(function(r){return r.dsID===t[i]&&r.rowCount!==n[t[i]]});f.length>0&&(r.push(f[0].dsID),u=!0)},e=this,i=0;i<t.length;i++)f(i);return u&&this.updateRowCountList(n),r},n.prototype.updateRowCountChangedDsWidgets=function(n){for(var t=[],i=0;i<n.length;i++)t=this.getChangedDsWidgetList(n[i],t);this.designer.modules.dataConfiguration.fetchDataForWidgets(t,null,this.masterSlaveSerializer.getAllWidgetSelectedValues(),!1,null,[],this.refreshSetting.removeLoader,null,!1,this.designer.modules.dataConfiguration.datasourceCallerId)},n.prototype.getChangedDsWidgetList=function(n,t,i){var u,r,f;for(i===void 0&&(i=[]),u=!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0?i:this.getWidgetCollection(),r=0;r<u.length;r++)f=this.designer.modules.util.getWidgetInstanceByGuid(u[r]),BoldBIDashboard.isNullOrUndefined(f)||BoldBIDashboard.isNullOrUndefined(f.DataGroupInfo)||f.DataGroupInfo.DataSourceID!==n||t.indexOf(u[r])!==-1?BoldBIDashboard.isNullOrUndefined(f)||f.Type!=="RichTextEditor"||t.indexOf(u[r])!==-1||t.push(u[r]):t.push(u[r]);return t},n.prototype.updateRefreshInfoFromAutoRefreshAPI=function(){var n=this.bbdesigner$.extend(!0,{},this.designer.model.autoRefreshSettings);this.designer.refreshSetting={enableAutoRefresh:this.designer.model.enableAutoRefresh,isRefreshWidget:BoldBIDashboard.isNullOrUndefined(n.isWidgetSpecific)?!1:n.isWidgetSpecific,interval:this.getIntervalSettings(n.intervalSettings),widgetCollection:!BoldBIDashboard.isNullOrUndefined(n.isWidgetSpecific)&&n.isWidgetSpecific?this.getRefreshWidgetCollection(n.widgets,n.intervalSettings):[],isRefreshRowCount:!BoldBIDashboard.isNullOrUndefined(n.isRefreshRowCount)&&n.isRefreshRowCount?n.isRefreshRowCount:!1,removeLoader:!BoldBIDashboard.isNullOrUndefined(n.removeLoader)&&n.removeLoader?n.removeLoader:!1}},n.prototype.getIntervalSettings=function(n){return BoldBIDashboard.isNullOrUndefined(n)?"00:00:30":(BoldBIDashboard.isNullOrUndefined(n.hourlySchedule.hours)?"00":n.hourlySchedule.hours)+":"+(BoldBIDashboard.isNullOrUndefined(n.hourlySchedule.minutes)?"00":n.hourlySchedule.minutes)+":"+(BoldBIDashboard.isNullOrUndefined(n.hourlySchedule.seconds)?"30":n.hourlySchedule.seconds)},n.prototype.getRefreshWidgetCollection=function(n,t){for(var u,r=[],i=0;i<n.length;i++)u={widgetID:n[i].widgetID,widgetName:n[i].widgetName,widgetInterval:BoldBIDashboard.isNullOrUndefined(n[i].interval)?this.getIntervalSettings(t):this.getIntervalSettings(n[i].interval)},r.push(u);return r},n.prototype.destroy=function(){this.clearAutoRefreshTimer()},n}(),TimerSettings=function(){function n(){}return n}(),widgetCollectionOnTimer=function(){function n(){}return n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.AutoRefresh",InternalAutoRefresh,window);InternalLayoutDialog=function(){function n(n){this.locale=null;this.cookieName="syncfusion.dashboard.designer.scrollinfo";this.designer=n;this.bbdesigner$=this.designer.bbdesigner$;this.locale=n.getLocalizationContent();this.designPanel=this.designer.designerPanel;this.id=this.designer._id;this.widgetHelper=this.designer.modules.widgetHelper}return n.prototype.renderScrollUIContainers=function(){this.scrollableUIcontainer=BoldBIDashboard.buildTag("div.bbi-dbrd-scroll-UI-container-wrap","",{},{});this.scrollableUIcontainer.append(this.renderInformationDlg(),this.renderLayoutSettingsContainer());this.designer.modules.Mode.canvasContainer.append(this.scrollableUIcontainer);this.layoutContainer.find(".bbi-dbrd-scroll-rows-textbox").ejNumericTextbox({value:this.designPanel.rowsLength-this.designPanel.singlePageRowLength,minValue:0,width:"100%",height:"26px",showRoundedCorner:!0,change:this.bbdesigner$.proxy(this.rowCountChange,this)});this.unwireEvents();this.wireEvents()},n.prototype.renderInformationDlg=function(){var n=this.designer.isHelpLinkHidden()?"":"<a class='bbi-dbrd-scroll-info-knowmore-link' href='"+this.designer.getHelpDocLink("ScrollableDashboardKnowMore")+"' target='_blank'>"+this.locale.scrollableLayout.knowmore+"<\/a>",t="<div class='bbi-dbrd-scroll-info-rectangle'><\/div><div class= 'bbi-dbrd-scroll-info-header'>"+this.locale.scrollableLayout.infoHeader+"<\/div><div class='bbi-dbrd-scroll-info-content'>"+this.locale.scrollableLayout.infoText+"<\/div><div class='bbi-dbrd-scroll-info-footer'>"+n+"<div class='bbi-dbrd-scroll-info-gotit-btn'>"+this.locale.scrollableLayout.gotIt+"<\/div><\/div>";return this.infoContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-scroll-info-container",t,{display:"none"},{}),this.infoContainer},n.prototype.renderLayoutSettingsContainer=function(){return this.layoutContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-scroll-layout-dlg-container","",{display:"none"},{}),this.layoutContainer.append(this.getHeader(),this.getContentElements()),this.layoutContainer.find(".bbi-dbrd-scroll-layout-dlg-content3").css("display","none"),this.layoutContainer.find(".bbi-dbrd-scroll-layout-dlg-content4").css("display","none"),this.layoutContainer},n.prototype.reset=function(){this.updateRowCount(this.designPanel.rowsLength-this.designPanel.singlePageRowLength)},n.prototype.rowCountChange=function(n){BoldBIDashboard.isNullOrUndefined(n.value)||(this.performanceAlert(),this.validateIconsDisableState(n.value))},n.prototype.updateRowCount=function(n){var t=this.layoutContainer.find(".bbi-dbrd-scroll-rows-textbox").data("ejNumericTextbox");t&&t.option("value",n);this.performanceAlert();this.validateIconsDisableState(n)},n.prototype.performanceAlert=function(){var i=this.layoutContainer.find(".bbi-dbrd-scroll-rows-textbox").data("ejNumericTextbox"),t=i.model.value,n=this.designPanel.singlePageRowLength+t-this.designPanel.rowsLength,r=this.layoutContainer.find(".bbi-dbrd-scroll-rows-textbox").attr("max")=="1000"?!0:!1;r?n>=40&&n<=999?this.showPerformanceAlertMsg():t>=1e3?this.showMaxRowsAlertMsg():(this.removeAlertMsg(),this.layoutContainer.find(".bbi-dbrd-scroll-layout-dlg-content4").css("display","none")):n>=40?this.showPerformanceAlertMsg():this.removeAlertMsg();this.updatePosition()},n.prototype.showMaxRowsAlertMsg=function(){this.layoutContainer.find(".bbi-dbrd-scroll-layout-dlg-content4").css("display","block");this.layoutContainer.find(".bbi-dbrd-scroll-layout-dlg-content3").css("display","none");this.layoutContainer.find(".bbi-dbrd-scroll-layout-dlg-container").css("height","200px")},n.prototype.showPerformanceAlertMsg=function(){this.layoutContainer.find(".bbi-dbrd-scroll-layout-dlg-content3").css("display","block");this.layoutContainer.find(".bbi-dbrd-scroll-layout-dlg-content4").css("display","none");this.layoutContainer.find(".bbi-dbrd-scroll-layout-dlg-container").css("height","200px")},n.prototype.removeAlertMsg=function(){this.layoutContainer.find(".bbi-dbrd-scroll-layout-dlg-content3").css("display","none");this.layoutContainer.find(".bbi-dbrd-scroll-layout-dlg-container").css("height","148px")},n.prototype.validateIconsDisableState=function(n){var t=n+this.designPanel.singlePageRowLength,i=this.layoutContainer.find(".bbi-dbrd-scroll-layout-dlg-content2 .bbi-dbrd-scroll-layout-dlg-tick"),r;n+this.designPanel.singlePageRowLength===this.designPanel.rowsLength?i.addClass("e-scroll-icon-disable").removeClass("e-scroll-icon-enable"):i.removeClass("e-scroll-icon-disable").addClass("e-scroll-icon-enable");r=this.layoutContainer.find(".bbi-dbrd-scroll-rows-textbox").attr("max")=="1000"?!0:!1;!r&&t>=1024?(t>1024&&i.addClass("e-scroll-icon-disable").removeClass("e-scroll-icon-enable"),this.showMaxRowsAlertMsg()):!r&&t<1024&&n+this.designPanel.singlePageRowLength>=64&&this.showPerformanceAlertMsg();this.updatePosition()},n.prototype.tickClick=function(n){var t=this.layoutContainer.find(".bbi-dbrd-scroll-layout-dlg-content2 .bbi-dbrd-scroll-layout-dlg-tick");t.hasClass("e-scroll-icon-disable")||(this.isRowsToBeAdd()?this.addRows(n):this.deleteRows(),this.updatePosition())},n.prototype.isRowsToBeAdd=function(){var n=this.layoutContainer.find(".bbi-dbrd-scroll-rows-textbox").data("ejNumericTextbox");if(n)return this.designPanel.rowsLength<n.getValue()+this.designPanel.singlePageRowLength},n.prototype.updatePosition=function(){var n=this.designPanel.designPanel.find(".bbi-dbrd-scroll-plus-icon");if(n.length>0){var t=!this.getCookie()&&this.isRowsSixOrUndefined()?this.infoContainer:this.layoutContainer,i=-t.outerHeight()-n.outerHeight()-22,r=n.parent().width()/2-t.outerWidth()/2+Number(n.parents(".bbi-dbrd-scroll-ui-container").css("margin-left").replace("px",""));t.css({top:i,left:r})}},n.prototype.getHeader=function(){var n=this.designer.isHelpLinkHidden()?"":"<a href='"+this.designer.getHelpDocLink("ScrollableDashboardKnowMore")+"' target='_blank' class ='bbi-dbrd-scroll-layout-dlg-info-icon bbi-dbrd-designer-icon bbi-dbrd-designer-hoverable' data-tooltip ='"+this.locale.scrollableLayout.knowmore+"'><\/a>";return"<div class ='bbi-dbrd-scroll-layout-dlg-header'><span class ='bbi-dbrd-scroll-layout-dlg-title'>"+this.locale.scrollableLayout.addRows+"<\/span>"+n+"<\/div>"},n.prototype.getContentElements=function(){return"<div class = 'bbi-dbrd-scroll-layout-dlg-content-container'><div class ='bbi-dbrd-scroll-layout-dlg-content1'>"+this.getNumericTextBox()+"<\/div><div class ='bbi-dbrd-scroll-layout-dlg-content3'>"+this.performanceAlertText()+"<\/div><div class ='bbi-dbrd-scroll-layout-dlg-content4'>"+this.addRowsLimitAlertText()+"<\/div><div class ='bbi-dbrd-scroll-layout-dlg-content2'>"+this.getIcons()+"<\/div><\/div>"},n.prototype.getNumericTextBox=function(){return this.designPanel.rowsLength>1024?"<input class='bbi-dbrd-scroll-rows-textbox' type='text' />":"<input class='bbi-dbrd-scroll-rows-textbox' type='text' max=\"1000\" />"},n.prototype.performanceAlertText=function(){return"<div class = 'bbi-dbrd-performance-alert'><\/div><div class ='bbi-dbrd-scroll-layout-dlg-title1'>"+this.locale.scrollableLayout.performanceAlertMsg+"<\/div>"},n.prototype.addRowsLimitAlertText=function(){return"<div class = 'bbi-dbrd-addrows-limit-alert'><\/div><div class ='bbi-dbrd-scroll-layout-dlg-title1'>"+this.locale.scrollableLayout.addRowsLimitAlertMsg+"<\/div>"},n.prototype.getIcons=function(){return"<div class = 'bbi-dbrd-scroll-layout-dlg-tick' data-tooltip ='Save'>"+this.locale.scrollableLayout.done+"<\/div>"},n.prototype.addRows=function(n){var t,r,i,u,f;BoldBIDashboard.isNullOrUndefined(n)&&this.updateRowCount(this.designer.rdlParser.rdlJsonObj.DesignCanvasSettings.NumberOfRows-this.designPanel.singlePageRowLength);this.closeDlg();t=this.getRowsCountToAdd();t>0&&(r=this.designPanel.rowsLength*this.designPanel.columnsLength,i=r+t*this.designPanel.columnsLength,i=BoldBIDashboard.DashboardDesignerUtility.LayoutDialog.updateRowSizeForViewer(i,this.designer,this.designPanel),this.designPanel.renderCellItems(r,i,!BoldBIDashboard.isNullOrUndefined(n)),u=new DesignCanvasSettings,u.NumberOfRows=this.designPanel.rowsLength+=t,this.designer.model.mode===BoldBIDashboard.Designer.mode.design?(this.designPanel.updateCellElementSize(i,r),this.designPanel.setCanvasSize(!0)):(this.designPanel.updatePreviewCanvasSize(),f=this.designPanel.columnsLength*this.designPanel.rowsLength,f=BoldBIDashboard.DashboardDesignerUtility.LayoutDialog.updateRowSizeForViewer(f,this.designer,this.designPanel),this.designPanel.updateCellSize(this.designPanel.rowsLength,this.designPanel.columnsLength,0)),this.designPanel.updateScrollBar(),BoldBIDashboard.isNullOrUndefined(n)||this.serializeCanvasSettings(u));BoldBIDashboard.isNullOrUndefined(n)&&t===0&&this.designer.model.mode===BoldBIDashboard.Designer.mode.design&&this.toggleScrollableDbrdUI(!0)},n.addRowsForViewer=function(n,t){var i,r,u;BoldBIDashboard.isNullOrUndefined(t.rdlParser.rdlJsonObj.DesignCanvasSettings)||(i=t.rdlParser.rdlJsonObj.DesignCanvasSettings.NumberOfRows,r=0,i!==n.rowsLength&&(r=i-n.rowsLength),r>0&&(u=n.columnsLength*n.rowsLength,u=BoldBIDashboard.DashboardDesignerUtility.LayoutDialog.updateRowSizeForViewer(u,t,n),n.rowsLength=n.rowsOccupied===0?i:n.rowsOccupied))},n.updateRowSizeForViewer=function(n,t,i){var r,u,f;return t.model.mode===BoldBIDashboard.Designer.mode.view&&!BoldBIDashboard.isNullOrUndefined(t.rdlParser.rdlJsonObj.WidgetData)?(r=t.rdlParser.rdlJsonObj.WidgetData,r.length>0&&(u=[],r.forEach(function(n){u.push(n.ContainerSettings.Bounds.RowSpan+n.ContainerSettings.Bounds.Row)}),f=Math.max.apply(Math,u),i.rowsOccupied=f,n=f*i.columnsLength),n):n},n.prototype.serializeCanvasSettings=function(n){this.designer.modules.util.doAjaxPost("POST",this.designer.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.notifypropertychange,{action:BoldBIDashboard.DashboardUtil.DesignerAction.NotifyPropertyChange,data:JSON.stringify({DesignCanvasSettings:n})},{fnction:this.bbdesigner$.proxy(function(n){n.Status||console.info(n.Message)},this)})},n.prototype.deleteRows=function(){var n,r,t,i;if(this.closeDlg(),n=this.getRowsCountToDelete(),r=this.getWidgetsOnDeletesRows(n),r.length>0)this.designer.modules.util.alertDialog("Delete Rows",this.locale.scrollableLayout.deleteRowsAlertMsg,IconType.information,AlertType.Alert,!1,"");else{var u=this.designPanel.rowsLength-n,f=this.designPanel.columnsLength*this.designPanel.rowsLength,e=this.designPanel.columnsLength*u;for(t=f-1;t>=e;t--)this.designer.modules.Mode.designCanvas.find("#"+this.designer._id+"cellitem"+t).addClass("e-delete-cells");this.designer.modules.Mode.designCanvas.find(".e-delete-cells").remove();i=new DesignCanvasSettings;i.NumberOfRows=this.designPanel.rowsLength-=n;this.designPanel.setCanvasSize(!0);this.designPanel.updateScrollBar();this.serializeCanvasSettings(i)}},n.prototype.getWidgetsOnDeletesRows=function(n){for(var t,s,h,r,i=this.widgetHelper.getAllWidgets(),u=[],e=[],o=this.designPanel.rowsLength-1,f=o;f>o-n;f--)e.push(f);for(t=0;t<i.length;t++)for(s=i[t].CellInfo.Row,h=i[t].CellInfo.RowSpan+i[t].CellInfo.Row-1,r=s;r<=h;r++)e.indexOf(r)>-1&&u.indexOf(i[t])===-1&&u.push(i[t]);return u},n.prototype.getRowsCountToDelete=function(){var t=this.layoutContainer.find(".bbi-dbrd-scroll-rows-textbox").data("ejNumericTextbox"),n;return t&&(n=t.getValue()+this.designPanel.singlePageRowLength,this.designPanel.rowsLength>n)?Math.abs(this.designPanel.rowsLength-n):0},n.prototype.getRowsCountToAdd=function(){var t=this.layoutContainer.find(".bbi-dbrd-scroll-rows-textbox").data("ejNumericTextbox"),n;return t&&(n=t.getValue()+this.designPanel.singlePageRowLength,n!==this.designPanel.rowsLength)?Math.abs(n-this.designPanel.rowsLength):0},n.prototype.gotItClick=function(){this.setCookie();this.closeDlg()},n.prototype.wireEvents=function(){this.layoutContainer.on("click",".bbi-dbrd-scroll-layout-dlg-tick",this.bbdesigner$.proxy(this.tickClick,this));this.infoContainer.on("click",".bbi-dbrd-scroll-info-gotit-btn",this.bbdesigner$.proxy(this.gotItClick,this))},n.prototype.unwireEvents=function(){this.layoutContainer.off("click",".bbi-dbrd-scroll-layout-dlg-tick",this.bbdesigner$.proxy(this.tickClick,this));this.infoContainer.off("click",".bbi-dbrd-scroll-info-gotit-btn",this.bbdesigner$.proxy(this.gotItClick,this))},n.prototype.openDlg=function(){var n=this.designer.model.designerSettings.widgetsPanel.dragAndDropSettings.isWidgetMode;this.layoutContainer.css("display",n?"none":"block")},n.prototype.closeDlg=function(n){(this.getCookie()||n||this.designer.model.IsEmbed)&&(BoldBIDashboard.isNullOrUndefined(this.layoutContainer)||BoldBIDashboard.isNullOrUndefined(this.infoContainer)||(this.layoutContainer.css("display","none"),this.infoContainer.css("display","none")))},n.prototype.openLayoutSettingsDialog=function(){this.reset();this.updatePosition();this.openDlg()},n.prototype.validatePreviewEvent=function(n){BoldBIDashboard.isNullOrUndefined(n[0].id)||n[0].id!==this.designer._id+"_previewButton"?BoldBIDashboard.isNullOrUndefined(n[0].id)||n[0].id!==this.designer._id+"_closePreviewButton"||this.getCookie()?this.closeDlg():this.toggleScrollableDbrdUI(!1):this.closeDlg(!0)},n.prototype.toggleScrollableDbrdUI=function(n){if(!this.getCookie()&&this.isRowsSixOrUndefined())if(this.infoContainer.css("display")==="none"){this.updatePosition();var t=this.designer.model.designerSettings.widgetsPanel.dragAndDropSettings.isWidgetMode;this.infoContainer.css("display",t?"none":"block")}else this.closeDlg();else this.layoutContainer.css("display")!=="none"||n?this.closeDlg():this.openLayoutSettingsDialog()},n.prototype.isRowsSixOrUndefined=function(){return BoldBIDashboard.isNullOrUndefined(this.designer.rdlParser)||BoldBIDashboard.isNullOrUndefined(this.designer.rdlParser.rdlJsonObj)||BoldBIDashboard.isNullOrUndefined(this.designer.rdlParser.rdlJsonObj.DesignCanvasSettings)||BoldBIDashboard.isNullOrUndefined(this.designer.rdlParser.rdlJsonObj.DesignCanvasSettings.NumberOfRows)||this.designer.rdlParser.rdlJsonObj.DesignCanvasSettings.NumberOfRows===0||this.designer.rdlParser.rdlJsonObj.DesignCanvasSettings.NumberOfRows===this.designPanel.singlePageRowLength?!0:(this.getCookie()||this.setCookie(),!1)},n.prototype.getCookie=function(){return Boolean(BoldBIDashboard.DashboardUtil.getCookie(this.cookieName))},n.prototype.setCookie=function(){BoldBIDashboard.DashboardUtil.setCookie(this.cookieName,!0)},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.LayoutDialog",InternalLayoutDialog,window),function(n){var t;(function(n){n.DatasourceDescription={fortyTwoMatters:"42matters is a data and app intelligence platform for mobile businesses. Connect with the {{:siteName}} Dashboard Designer to monitor and gain insights over app data to better build your business around mobile.",activeCampaign:"ActiveCampaign combines various aspects of small business marketing into an integrated and user-friendly platform. Connect with the {{:siteName}} Dashboard Designer to gain insight into your email marketing efforts and campaigns to strengthen relationships with your customers.",askNicely:"AskNicely is a real-time customer feedback platform based on the Net Promoter Score (NPS) framework. Connect with the {{:siteName}} Dashboard Designer to gain insights into your NPS, survey responses, and make needed decisions on time. ",zendeskSell:"Zendesk Sell (formerly Base) is a Salesforce automation platform to enhance productivity, processes, and pipeline visibility for sales teams. Connect with the {{:siteName}} Dashboard Designer to analyze and gain insights into deals to make business decisions.",bitly:"Bitly is a link management platform that helps prepare short URLs for websites. Connect with the {{:siteName}} Dashboard Designer to get insights into marketing metrics like top-performing links, top pages by clicks, and more.",buffer:"Buffer is a platform to manage all your social media accounts in one place and schedule posts throughout the day. Connect with the {{:siteName}} Dashboard Designer, to get insights into your activity like number of clicks, retweets, and likes as well as to analyze your growth in marketing efforts over time. ",callRail:"CallRail is a platform for call tracking, recording, and analytics used by data-driven marketers. Connect with the {{:siteName}} Dashboard Designer to gain insight into advertising campaigns, sales effectiveness, and customer retention.",odbc:"ODBC accomplishes DBMS independence by using an ODBC driver as a translation layer between the application and the DBMS",sqlite:"SQLite is a relational database management system (RDBMS) contained in a C library. In contrast to many other database management systems, SQLite is not a client–server database engine. Rather, it is embedded into the end program",campaignMonitor:"Campaign Monitor is an email marketing platform to create personalized email campaigns and automated customer journeys. Connect with the {{:siteName}} Dashboard Designer and get insights into your email campaigns to drive real business results. ",chargebee:"Chargebee is a subscription management platform that powers end-to-end recurring billing with its fully automated SaaS billing solution. Bring your large ranges of data into the {{:siteName}} Dashboard Designer and perform detailed cohort analyses to take actionable insights and run business better.",chargify:"Chargify is a subscription billing platform for recurring billing needs. Bring your large ranges of data into the {{:siteName}} Dashboard Designer and perform detailed cohort analyses to take actionable insights and run your business better.",chartMogul:"ChartMogul gives you a complete view of your subscription businesses. Integrating with the {{:siteName}} Dashboard Designer can provide insights into your subscription metrics and financial operations.",chartbeat:"Chartbeat is a website analytics platform to improve audience engagement and increase readership. Connect with the {{:siteName}} Dashboard Designer to get insights into metrics like visitors, load times, and performance of websites.",csv:"Bring your CSV files into the {{:siteName}} Dashboard Designer and prepare dashboards to see the story that lives in your data.",edi:"Bring your EDI files into the {{:siteName}} Dashboard Designer and prepare dashboards to see the story that lives in your data.",excel:"Bring your Excel files as Tables or Worksheets into the {{:siteName}} Dashboard Designer. Explore and play with your data, and prepare dashboards to see the story that lives in your data.",facebook:"Facebook data source gives you detailed analytics for your Facebook page, so you can see insights over your pages like page reach, followers, audience and more. Connect with the {{:siteName}} Dashboard Designer to track your page.",facebookads:"Facebook ads data source gives insights about posted ads and their audience, so you can better target ads and create more relevant content. It helps us to promote our business and to reach more people. Connect with the {{:siteName}} Dashboard Designer to track your ads.",flurry:"Flurry is a platform for analyzing consumer interactions with mobile applications and packages for marketers to advertise. Build a custom dashboard for Flurry in the {{:siteName}} Dashboard Designer to measure and track activities across your app portfolio.",freshdesk:"Freshdesk is an online cloud-based customer service software providing helpdesk support with smart automations to get things done faster. Integrate Freshdesk with the {{:siteName}} Dashboard Designer and you can pull key metrics and track performance insights.",freshworksCrm:"Freshworks CRM is a refreshingly new CRM that is packed with features to boost your sales team's productivity.Integrate Freshworks CRM with the {{:siteName}} Dashboard Designer to track your prospects and deals over time.",freshservice:"Freshservice modernizes IT and other business functions with a configurable IT service desk solution in the cloud. Connect with the {{:siteName}} Dashboard Designer to create dashboards that let you track various things like work completed summaries, customer satisfaction, and more.",fusebill:"Fusebill is a leading subscription billing management and recurring billing software. Fusebill simplifies and automates recurring billing and revenue collections. Creating custom dashboards with the {{:siteName}} Dashboard Designer allows you to track billing, revenue, subscription upgrades, subscription downgrades, and much more.",github:"GitHub allows communities of developers to discover, share, and build software from open-source projects to private teams. Connect your GitHub account with the {{:siteName}} Dashboard Designer to track your project's tasks, team's work done, and much more.",gitlab:"GitLab is a single application for the entire DevOps lifecycle from project planning and source code management to CI/CD, monitoring, and security. Analyse your GitLab data with the {{:siteName}} Dashboard Designer to track in-depth analysis about your repositories branches, commits, issues, and more.",gmail:"Gmail is a free email service developed by Google that's intuitive, efficient, and useful.Create a custom dashboard for Gmail in the {{:siteName}} Dashboard Designer to extract data from your gmail account and see the story that lives in your data.",goSquared:"GoSquared is a real-time web analytics, live chat, and customer data hub software guaranteed to increase conversion rates. Connect with the {{:siteName}} Dashboard Designer to centralize your customer data and see the story that lives in your data.",googleAnalytics:"Google Analytics gives you insights into how visitors find and use your website, app, or internet-connected device. Connect with the {{:siteName}} Dashboard Designer, extract the data, and define an analytics reporting view of the data. ",googleDrive:"Google Drive is a cloud file storage and synchronization service developed by Google. Connect with the {{:siteName}} Dashboard Designer to extract rich data sets and build custom dashboards to see the story that lives in your data.",googleSearchConsole:"Google Search Console is a free service that helps you monitor and maintain your site's presence in Google Search results.Connect with the {{:siteName}} Dashboard Designer to track your site's search traffic and performance over time.",googleAdSense:"Google AdSense is a program run by Google that allows publishers in the Google Network of content sites to provide automatic text, image, video, or interactive media advertisements that are targeted to site content and audience. Connect your Google AdSense account with the {{:siteName}} Dashboard Designer to track your advertisements at ease.",harvest:"Harvest is a simple time tracking, fast online invoicing, and powerful reporting software. Connect with the {{:siteName}} Dashboard Designer to track invoices and measure the efficiency of your team.",helpScout:"Help Scout is a help desk software for customer-first teams to make every customer interaction more helpful and human. Connect with the {{:siteName}} Dashboard Designer to keep track of a team's performance, response time, customer happiness range, and more.",insightly:"Insightly is a cloud-based CRM software for Gmail, G Suite, and Outlook built for lifelong customer relationships. Connect with {{:siteName}} Dashboards to track your leads, proposals, opportunities, and projects over time.",intervals:"Intervals is a cloud hosted time, task, and project management software with powerful reporting for businesses to learn exactly where all of their time is going. Connect with the {{:siteName}} Dashboard Designer and track your projects, assignments, and more.",jira:"Jira is an issue tracking product developed by Atlassian that allows bug tracking and agile project management. Connect with the {{:siteName}} Dashboard Designer and track your release cycles, tasks completed, and project deadlines over time. ",json:"Bring your JSON files into the {{:siteName}} Dashboard Designer by uploading them to prepare dashboards and see the story that lives in your data.",kneeio:"Keen is the platform for developers that lets you ship custom user-facing metrics quickly and seamlessly with low overhead. Connect with the {{:siteName}} Dashboard Designer to track metrics over time.",kissMetrics:"With Kissmetrics, get data-driven insights with powerful segmentation and precision targeting all in one place. Connect with the {{:siteName}} Dashboard Designer to track your website visitors, conversion, and more.",lighthouse:"Lighthouse is a ticket tracking solution that will help you keep track of your project development with ease. Connect with the {{:siteName}} Dashboard Designer to track your issues, team's work completed, ticket completions, and more.",linkedIn:"LinkedIn is a professional networking site that allows its members to create business connections, search for jobs, and find potential clients. Connect with the {{:siteName}} Dashboard Designer to track your LinkedIn presence and its reach through LinkedIn KPIs.",liveAgent:"LiveAgent helps companies deliver great customer series. It was rated as the #1 help desk software for SMBs. Connect with the {{:siteName}} Dashboard Designer to gain key insights from LiveAgent to improve your customer services.",mailchimp:"Mailchimp is a marketing automation platform and an email marketing service. Connect with the {{:siteName}} Dashboard Designer to gain key insights from Mailchimp to improve your marketing services.",microsoftOnedrive:"Microsoft OneDrive is a file hosting and synchronization service operated as part of the Office suite. Connect with the {{:siteName}} Dashboard Designer and extract rich data sets to build dashboards and see the story that lives in your data.",microsoftOutlookCalender:"Microsoft Outlook Calendar is the calendar and scheduling component of Outlook that is fully integrated with email, contacts, and other features. You can use it to plan and coordinate schedules and meetings. Connect with the {{:siteName}} Dashboard Designer to monitor you daily calendar events, analyse time spent, and optimize your daily activities.",microsoftSharepoint:"Microsoft SharePoint is a web-based collaborative platform that serves as a document management and storage system for businesses. Connect with the {{:siteName}} Dashboard Designer and extract rich data sets to build dashboards and see the story that lives in your data.",mixpanel:"Mixpanel is an analytics platform for mobile and web, supporting businesses to study consumer behavior and providing tools for targeted communication with them. Connect with the {{:siteName}} Dashboard Designer to track trends in user behaviour and your events.",newRelic:"New Relic is a digital intelligence company delivering full stack visibility and analytics to enterprises around the world. Connect with the {{:siteName}} Dashboard Platform to gain key insights from New Relic to monitor your app and infrastructure over time.",nicereply:"Nicereply allows you to collect customer feedback and provides key analytics to improve the quality of your customer support, service, product, and marketing. Connect with the {{:siteName}} Dashboard Designer to gain insights about customer satisfaction and the quality of your products and services.",odata:"OData is an open protocol to allow the creation and consumption of queryable and interoperable RESTful APIs in a simple and standard way. Connect with the {{:siteName}} Dashboard Designer and build dashboards to see the story that lives in your data.",optimizely:"Optimizely is a leading experimentation platform, empowering marketing and product teams to learn, test, and deploy winning digital experiences. Connect with the {{:siteName}} Dashboard Designer to track all your ideas, tests, and results.",pipedrive:"Pipedrive is a cloud-based sales CRM designed for salespeople to increase their productivity and their deal close rates. Connect with the {{:siteName}} Dashboard Designer to track and gain insights about sales team performance.",pipelineDeals:"PipelineDeals is the first sales productivity platform to combine sales engagement and CRM in on easy to use application. It allows you to easily organize, track, and manage your sales. Connect with the {{:siteName}} Dashboard Designer to gain insights from deals, customers, and much more.",copper:"Copper is an easy-to-use customer relationship management system for small business. Connect with the {{:siteName}} Dashboard Designer to track and gain key insights from your contacts, leads, projects, and much more.",quickBooksOnline:"QuickBooks is a small business management tool that offers accounting, payroll, payments, and time-tracking tools developed and marketed by Intuit. Connect with the {{:siteName}} Dashboard Designer to track and monitor sales, cash flow, profitability, and much more.",quickPayments:"QuickBooks is a small business management tool that offers accounting, payroll, payments, and time-tracking tools developed and marketed by Intuit. Connect with the {{:siteName}} Dashboard Designer to track and gain key insights about your customers, revenues, transactions, and much more via QuickBooks Payments.",salesforce:"Salesforce is a cloud-based customer relationship management (CRM) platform for supercharging every part of your company that interacts with customers, including marketing, sales, commerce, service, and more. Connect with the {{:siteName}} Dashboard Designer to gain insights into your sales, track your campaigns, and much more.",salesforceReports:"Salesforce is a cloud-based customer relationship management (CRM) platform for supercharging every part of your company that interacts with customers, including marketing, sales, commerce, service, and more. Connect with the {{:siteName}} Dashboard Designer and build dashboards from your Salesforce reports.",sendGrid:"SendGrid is a proven, cloud-based customer communication platform that drives engagement and business growth. Connect with the {{:siteName}} Dashboard Designer to monitor and gain insights from your email marketing KPIs.",sendible:"Sendible is a social media management tool that helps agencies and companies boost their productivity on social media. Connect with the {{:siteName}} Dashboard Designer to track your posts and product information across different social media channels easily.",servicenow:"ServiceNow is a tool that provides digital workflows to create great experiences, unlock productivity, and automate enterprise IT operations. Connect with the {{:siteName}} Dashboard Designer to track the performance of services provided by ServiceNow.",smartSheet:"Smartsheet is a cloud-based work management platform that empowers collaboration, drives better decision making, and accelerates innovation. Connect with the {{:siteName}} Dashboard Designer to gain insights into team progress.",toggl:"Toggl Track is a productivity tool with a simple time tracker with powerful reports that works across all your devices. Connect with the {{:siteName}} Dashboard Designer to monitor and gain actionable insights over your team's timesheets.",todoist:"Todoist is a to-do list app and a task manager. Connect with the {{:siteName}} Dashboard Designer to track the tasks planned and completed in your projects over time and ensure that everything is organized. ",stripe:"Stripe provides a payment processing platform for internet businesses of all sizes. Connect with the {{:siteName}} Dashboard Designer to gain key insights into your customers, revenues, transactions, and much more.",twilio:"Twilio is a cloud communications platform for building SMS, voice, and messaging applications on an API built for global scale. Connect with the {{:siteName}} Dashboard Designer to track and gain insights into your customer engagement activities via voice, text, and video.",web:"Connect with the {{:siteName}} Dashboard Designer using almost all data sources that have a REST API. Create dashboards and see the story that lives in your data.",wistia:"Wistia provides video software and video hosting solutions for business that helps to create, manage, share, and track the performance of videos. Connect with the {{:siteName}} Dashboard Designer to monitor and gain insights over the performance of your videos and its engagements with audiences.",youTube:"YouTube is a video sharing platform which allows users to upload, view, and share videos, including movie and music clips as well as amateur content. Connect with the {{:siteName}} Dashboard Designer to monitor and gain insights into the KPIs of your videos posted under your channel.",zendesk:"Zendesk Support is a customer service software and support ticketing system. Connect with the {{:siteName}} Dashboard Designer to gain insights into your customer service and make informed decisions to improve your customer relationships.",zohocrm:"Zoho CRM is an online customer relationship management (CRM) system for managing your sales, marketing, and support in one platform. Connect with the {{:siteName}} Dashboard Designer to gain insights into leads, contacts, deals, and much more.",googleCalendar:"Google Calendar allows you to plan and coordinate schedules and meetings. Connect with the {{:siteName}} Dashboard Designer to monitor your daily calendar events, analyze time spent, and optimize your daily activities.",dropBox:"Dropbox is a cloud content management and file sharing service for businesses. Connect with the {{:siteName}} Dashboard Designer and extract rich data sets to build dashboards and see the story that lives in your data.",azureDevOps:"Azure DevOps provides a modern development ecosystem for developers to plan smarter, collaborate better, and ship products faster with a set of modern dev services. Connect with the {{:siteName}} Dashboard Designer to track your work items and monitor their progress easily.",azureBlob:"Azure Blob is a scalable object storage solution in Microsoft Azure used to store any kind of data. Connect with the {{:siteName}} Dashboard Designer and extract rich data sets to build dashboards and see the story that lives in your data.",asana:"Asana provides a leading work management platform that helps teams organize and plan workflows, projects, and more to keep the team’s work on schedule. Connect with the {{:siteName}} Dashboard Designer to monitor the team's work and project's progress over time.",appannie:"App Annie is the standard in app analytics and app market data; it gives you an easy-to-use platform for running every stage of your app business. Connect with the {{:siteName}} Dashboard Designer to track your app statistics.",xml:"Bring your XML files into the {{:siteName}} Dashboard Designer and prepare dashboards to see the story that lives in your data.",clubReady:"ClubReady gives you everything you need to run your fitness business your way.",recurly:"Recurly provides enterprise class subscription billing management for thousands of subscription-based SAAS, web 2.0, mobile, content, and publishing businesses worldwide. Connect with the {{:siteName}} Dashboard Designer to track your subscriptions and monitor payments and sales over time.",rssfeeds:"RSS is a type of web feed which allows users and applications to access updates to online content in a standardized and computer-readable format. Connect RSS feeds with the {{:siteName}} Dashboard Designer to see the story that lives in your feeds.",infusionSoft:"Keap offers an all-in-one CRM and advanced marketing automation platform that lets users manage their small businesses by pulling data points together related to sales, marketing, leads, payments, customers, and more. Connect with the {{:siteName}} Dashboard Designer to track insights into opportunities, customer relationships, and more.",microsoftDynamicsCrmSales:"Microsoft Dynamics 365 for Sales is a part of a customer relationship management software from Microsoft; it helps you track the right leads, contacts ,and opportunities as you build your team’s sales pipeline. Connect with the {{:siteName}} Dashboard Designer to gain actionable insights to help you close more deals and uncover your opportunities.",microsoftDynamicsCrmService:"Microsoft Dynamics 365 for Customer Service is a part of a customer relationship management software package from Microsoft. It has a built-in intelligence that delivers faster and more personalized service, and adds value to every interaction even on the go. Connect with the {{:siteName}} Dashboard Designer to track your customer engagements easily.",freshBooks:"FreshBooks is a cloud-based accounting software designed exclusively for small business owners and independent professionals to invoice clients, track time, and manage expenses. Connect with the {{:siteName}} Dashboard Designer to track your business income, expenses, and more.",wordPress:"WordPress brings the power of building beautiful, secure, mobile, and SEO-friendly websites in a few simple steps. Connect with the {{:siteName}} Dashboard Designer to track your websites and blogs and their reach to your users.",alchemer:"Alchemer is a powerful online survey platform that empowers organizations of all sizes to make better, faster, and informed decisions. Connect with the {{:siteName}} Dashboard Designer to track survey results, feedback, and take actionable decisions.",seomonitor:"SEOmonitor brings a new and better way to measure and predict SEO performance. Connect with the {{:siteName}} Dashboard Designer to track your key SEO metrics, keyword analysis results, and more in single place.",sparkpost:"SparkPost is an email delivery provider that empowers companies with actionable and real-time data to send relevant email to their customers. Connect with the {{:siteName}} Dashboard Designer to track the results of email deliverability, customer's experience over emails, and email performance. ",box:"Box is a cloud content management and file sharing service for businesses. Connect with the {{:siteName}} Dashboard Designer and extract rich data sets to build dashboards and see the story that lives in your data.",amazonAurora:"Amazon Aurora is a relational database service developed and offered by Amazon Web Services. The Amazon Aurora connector allows you to access data from Amazon Aurora databases within the {{:siteName}} Dashboard Designer.",amazonRDS:"Amazon Relational Database Service (Amazon RDS) is a web service that makes it easy to set up, operate, and scale a relational database in the AWS Cloud. It provides cost-efficient, resizable capacity to reduce automation of administrative task. It provides database engines such as Amazon Aurora, PostgreSQL, MySQL, MariaDB, Oracle Database, and Microsoft SQL Server. The Amazon RDS connector allows you to access data from Amazon RDS databases within the {{:siteName}} Dashboard Designer.",amazonRedShift:"Amazon Redshift is a fast, scalable data warehouse that makes it simple and cost-effective to analyze all the data across your data warehouse and data lake. It is built on top of PostgreSQL. The Amazon Redshift connector allows you to access data from Amazon Redshift databases within the {{:siteName}} Dashboard Designer.",azuresynapseanalytics:"Azure Synapse Analytics is a Microsoft cloud-based enterprise data warehouse service offering. It leverages massively parallel processing to quickly run complex queries across petabytes of data. The Azure Synapse Analytics connector allows you to access data from Azure Synapse Analytics databases within the {{:siteName}} Dashboard Designer.",mariadb:"MariaDB is a community-developed, commercially supported fork of the MySQL relational database management system that is guaranteed to stay open-source. The MariaDB connector allows you to access data from MariaDB databases within the {{:siteName}} Dashboard Designer.",googleCloudSQL:"Google Cloud SQL is a fully-managed database service based on MySQL and PostgreSQL. The Google Cloud SQL connector allows you to access data from Google Cloud SQL databases within the {{:siteName}} Dashboard Designer.",influxdb:"InfluxDB is an open-source time series database (TSDB) developed by InfluxData. It is designed to handle high write and query loads and also provides a SQL like query language called InfluxQL for interacting with data. The InfluxDB connector allows you to access the data from InfluxDB databases within the {{:siteName}} dashboard designer.",cdata:"cdata is a distributed, highly-scalable SQL database that can run anywhere. It delivers maximum performance for transactional and analytical workloads with familiar relational data structures.The cdata connector allows you to access data from cdata databases with MySQL endpoint within the {{:siteName}} Dashboard Designer.",singlestore:"SingleStore is a distributed, highly-scalable SQL database that can run anywhere. It delivers maximum performance for transactional and analytical workloads with familiar relational data structures. The SingleStore connector allows you to access data from SingleStore databases within the {{:siteName}} Dashboard Designer.",msSql:"SQL Server is Microsoft's relational database management system.As one of the most reliable and trusted database servers on the market, it comes with an assortment of value-added services like analysis, reporting, and more on top of the core database management system.The SQL Server connector allows you to access data from Microsoft SQL server databases within the {{:siteName}} Dashboard Designer.",mongodb:"MongoDB is an open-source, cross-platform, document-oriented, NoSQL database. Connect with the {{:siteName}} Dashboard Designer and build dashboards to see the story that lives in your data.",presto:"Presto is a high performance, distributed SQL query engine for big data. Its architecture allows users to query a variety of data sources such as MySQL, MongoDB, Hive, PostgreSQL, RedShift, SQLServer and etc.... One can even query data from multiple data sources within a single query.",mySql:"MySQL is a freely available, open-source relational database management system, most noted for its quick processing, proven reliability, and ease and flexibility of use. The MySQL connector allows you to access data from MySQL databases within the {{:siteName}} Dashboard Designer.",oracle:"Oracle is an enterprise-grade relational database with advanced analytics features. The Oracle connector allows you to access data from Oracle databases within the {{:siteName}} Dashboard Designer.",postgres:"PostgreSQL is a powerful and open-source object-relational database system emphasizing extensibility and standards compliance. The PostgreSQL connector allows you to access data from PostgreSQL databases within the {{:siteName}} Dashboard Designer.",applicationInsights:"Application Insights is an extensible Application Performance Management service from Microsoft Azure for web developers on multiple platforms. It includes powerful analytics tools to help you diagnose issues and to understand what users actually do with your app. Connect with {{:siteName}} Dashboards to gain insights like Page views in a day, application performance, number of users over time and session duration, so on.",azureSearch:"Azure Search is a fully managed cloud search service that provides a rich search experience to custom applications. Connect with {{:siteName}} Dashboards to get metrics of indexes, documents and visualize search statistics over the time and gain insights.",prometheus:"Prometheus is an open-source systems monitoring and alerting toolkit. Connect with {{:siteName}} Dashboard to get metrics about the sites status.",clickhouse:"ClickHouse is a column-oriented database management system (DBMS) for online analytical processing of queries (OLAP).The ClickHouse connector allows you to access data from ClickHouse clusters within the {{:siteName}} Dashboard Designer.",azureDataExplorer:"Azure Data Explorer (ADX) is a powerful data analytics service that is designed to handle large volumes of data in real-time. ADX is optimized for complex queries and can help users gain insights from their data quickly. The Azure Data Explorer connector allows you to access data from Azure Data Explorer clusters within the {{:siteName}} Dashboard Designer.",rockSet:"Rockset is a real-time indexing database built for serverless search and analytics. It offers lightning-fast SQL queries on semi-structured data, making it ideal for modern data applications. The Rockset connector empowers you to effortlessly tap into Rockset capabilities and incorporate real- time data analytics into your {{:siteName}} Dashboard Designer.Leverage Rockset for instant insights and dynamic data visualizations.",bolddatastore:"The Bold data store connector connects to the database servers in which the data is imported in ETL.  It supports various database types, including PostgreSQL and Apache Doris. This data store connector facilitates seamless data integration and analysis within the Bold BI platform.",snowflake:"Snowflake is a cloud-based data warehouse that provides an unbounded platform for storing and retrieving data. Unlike traditional single-cluster shared-disk/shared-nothing architectures, Snowflake has as a multi-cluster, shared data architecture that is dynamic and highly scalable thanks to enterprise class cloud-based storage systems.",vertica:"Vertica is the most advanced unified analytics warehouse, which combines the power of a high-performance, columnar storage, advanced compression, optimized projections, and massively parallel processing SQL query engine with advanced analytics and machine learning, so you can unlock the true potential of your data with no limits and compromises. The Vertica connector allows you to access the data from Vertica databases within the {{:siteName}} dashboard designer.",googleSheets:"Google Sheets is a spreadsheet program which is a collaborative tool for cooperative editing of spreadsheets in real-time. Connect with {{:siteName}} Dashboard to view the data of spreadsheets.",azureTables:"Azure Table storage is a service that stores structured NoSQL data in the cloud, providing a key/attribute store with a schemaless design. Connect with {{:siteName}} Dashboard Cloud Designer to view the rows based on PartitionKey",googlebigquery:"BigQuery is a RESTful web service that enables interactive analysis of massive datasets working in conjunction with Google Storage. It is a serverless Software as a Service that may be used complementarily with MapReduce.",ssas:"SQL Server Analysis Services (SSAS) is the technology from the Microsoft Business Intelligence stack, to develop Online Analytical Processing (OLAP) solutions. In simple terms, you can use SSAS to create cubes using data from data marts / data warehouse for deeper and faster data analysis.",proofhub:"ProofHub is a cloud based project planning software that helps teams to plan, collaborate, organize, and deliver projects on time. Connect with the {{:siteName}} Dashboard Designer to track your projects",googleAds:"Google Ads is a product that you can use to promote your business, help sell products or services, raise awareness, and increase traffic to your website.You can track your adsclick and adcost",podio:"Podio is a web based project management software for organizing team communication, business processes, data and content in project management workspaces. Connect Podio data source with the {{:siteName}} Dashboard Designer to track your projects.",zohoinvoice:"Zoho Invoice is a billing and invoice software that lets you craft and send beautiful invoices to your customers. With its advanced features and easy-to-use interface, Zoho Invoice is the best invoicing partner for freelancers and small business owners.",zohobooks:"Zoho Books is an online accounting system that manages your finances, ensures GST compliance, automates business workflows, and facilitates collaboration between departments. Connect with the {{:siteName}} Dashboard Designer to track your bills, invoice, reconcile your bank statements, oversee projects, and much more.",markupTrace:"Markup Trace is a consultancy service specializing in .NET framework, On-premises, and Azure cloud. The Markup Trace connector allows you to access data from Markup Trace service through Web API call within the {{:siteName}} Dashboard Designer.",shopify:"Shopify is a subscription to a software service that offers you to create a website and use their shopping cart solution to sell, ship, and manage your products.The shopify connector allows you to access data from shopify databases within the {{:siteName}} Dashboard Designer.",slack:"Slack is a business communication software to message or share files within your team, organized by channel. It also include various features, such as video calls, screen sharing, and collaboration with your colleagues. The Slack connector allows you to access data from slack databases within the {{:siteName}} Dashboard Designer.",zendesksunshine:"Zendesk Sunshine is an open and flexible CRM platform native to AWS. Connect all your customer data for complete context—wherever it lives—and give developers and admins the tools they need to build the best customer experiences.",commvault:"Commvault data protection and information management solutions provide mid and enterprise-level organizations worldwide with a significantly better way to get value from their data.Commvault can help companies protect, access and use all of their data, anywhere and anytime, turning data into a powerful strategic asset.The commvault connector allows you to access data from commvault databases within the {{:siteName}} Dashboard Designer.",amazonmws:"Amazon Marketplace is an e-commerce platform owned and operated by Amazon that enables third-party sellers to sell new or used products on a fixed-price. Connect with the {{:siteName}} Dashboard Designer to track you products status.",lessonly:"Lessonly is powerfully simple training software that helps teams learn, practice, and do better work.The Lessonly connector allows you to access data from lessonly databases within the {{:siteName}} Dashboard Designer.",surveyMonkey:"SurveyMonkey is a tool that allows users to create their own surveys using question format templates.The surveymonkey connector allows you to access data from surveymonkey databases within the {{:siteName}} Dashboard Designer.",appFolio:"AppFolio property management software is trusted by thousands to get organized, efficient, and profitable. Automate and grow your business.The AppFolio connector allows you to access data from AppFolio databases within the {{:siteName}} Dashboard Designer.",xero:"Xero is a cloud based online accounting software made for small and medium-sized businesses. It allows you to connect with your bank to track transactions in your Xero account. The Xero connector allows you to access data from Xero databases within the {{:siteName}} Dashboard Designer.",sparksql:"SparkSQL is a component on top of Spark Core that introduced a data abstraction called DataFrames, which provides support for structured and semi-structured data. The SparkSQL connector allows you to access data from SparkSQL databases within the {{:siteName}} Dashboard Designer .",zoom:"Zoom is a cloud-based video communications app that allows you to set up virtual video and audio conferencing, webinars, live chats, screen-sharing, and other collaborative capabilities.The Zoom connector allows you to access data from Zoom databases within the {{:siteName}} Dashboard Designer.",amazonathena:"Amazon Athena is an interactive query service that makes it easy to analyze data in Amazon S3 using the standard SQL. Amazon Athena uses Amazon S3 as their underlying data store, making your data highly available and durable. The Amazon Athena connector allows you to access data from Amazon S3 whose schema is defined in Athena databases within the {{:siteName}} Dashboard Designer.",trello:"Trello is the easy, free, flexible, and visual way to manage your projects and organize anything.The Trello connector allows you to access data from Trello database within the {{:siteName}} Dashboard Designer",gravityForms:"Gravity Forms is a premium WordPress plugin that lets you create forms to place on your website. With this plugin, you can add contact forms, quizzes, and surveys to your website with ease.The Gravity Forms connector allows you to access data from Gravity Forms database within the {{:siteName}} Dashboard Designer",elasticsearch:"Elasticsearch is a search engine based on the Lucene library. It provides a distributed, multitenant-capable full-text search engine with an HTTP web interface and schema-free JSON documents. Elasticsearch can be used to search all kind of documents. It also provides scalable search, has near real-time search, and supports multitenancy. The Elasticsearch connector allows you to access data from Elasticsearch clusters within the {{:siteName}} Dashboard Designer.",nutshell:"Nutshell is a web and mobile customer relationship management service. It is composed of a web application, as well as mobile applications for the iOS and Android platforms.",squareUp:"Square helps millions of sellers run their business-from secure credit card processing to point of sale solutions. Get paid faster with Square..The Square connector allows you to access data square Zoom databases within the {{:siteName}} Dashboard Designer ",yelp:"Yelp develops, hosts, and markets the Yelp.com website and the Yelp mobile app, which publish crowd-sourced reviews about businesses.The yelp connector allows you to access data from yelp databases within the {{:siteName}} Dashboard Designer.",fitbit:"Fitbit is a consumer electronics and fitness company which produces wireless-enabled wearable technology devices that measure data such as the number of steps walked, heart rate, quality of sleep, steps climbed, and other personal metrics involved in fitness.The Fitbit connector allows you to access data from Fitbit database within the {{:siteName}} Dashboard Designer",origami:"Origami is a platform on which information systems can be easily customized on-the-fly via a seamless drag-and-drop user interface, which includes all the components you need to easily make a system that will answer your every needs.The Origami connector allows you to access data from Origami database within the {{:siteName}} Dashboard Designer",quickbase:"Quickbase is a low-code platform that allows non-technical developers to build, customize and connect scalable, secure cloud applications mapped to unique business challenges without compromising IT governance and control.",avochato:"Avochato is texting for business the easy way. Our market-leading business text messaging service will connect you to your customers faster and more effectively.The Avochato connector allows you to access data from Avocahto databases within the {{:siteName}} Dashboard Designer.",zuora:"Zuora provides the leading cloud-based subscription management platform for subscription businesses, serving to orchestrate the entire subscription order-to-cash process, including billing and revenue recognition.",decisionLens:"DecisionLens is a software which provides an enterprise resource planning, that makes project planning simple for the modern workplace. The DecisionLens connector allows you to access data from DecisionLens databases within the {{:siteName}} Dashboard Designer.",boldDesk:"BoldDesk is a cloud-based, modern help desk software for managing customer support, collaborating with teammates, automating repetitive tasks, and improving customer satisfaction. Connect with the {{:siteName}} Dashboard Designer to gain insights into your customer service and make informed decisions to improve your customer relationships.",alma:"Alma is a cloud-based school management solution catering to businesses of all sizes in the education industry. Schools and districts use Alma Student Information System (SIS) for comprehensive student information management, including admissions, scheduling, course management, reporting, staff and family communications and standards management. Connect with the {{:siteName}} Dashboard Designer to get data from Alma and design dashboards to see more insights on student performance, course management and much more.",xeroWorkflowMax:"WorkflowMax(WFM) is Xero- owned project management software, designed to help small to medium organizations with their business operations and job management needs. Connect with the {{:siteName}} Dashboard Designer to get data from Xero workflow max and design dashboards to see insights on tasks, time tracking, invoicing, and much more.",gohighlevel:"GoHighLevel is a new-age marketing tool that attempts to consolidate the most useful marketing tools under a single umbrella. Use BoldBI designer to design dashboards with GoHighLevel Campaigns, Appointments, and tasks and get better insights.",youScan:"Youscan is a social media listening and analytics platform that helps businesses and organizations monitor and analyze social media conversations and customer feedback. Connect with the {{:siteName}} Dashboard Designer to get data from YouScan and design dashboards to get more insights on brand mentions, sentiment analysis, competitor analysis, and other key metrics.",tdengine:"TDengine is an open source, high-performance, cloud-native time-series database optimized for the Internet of Things (IoT), Connected Cars, and Industrial IoT. Its code, including its cluster feature, is an open source under GNU AGPL v3.0.",instagram:"Instagram is an online social media platform and social network service for sharing photographs and videos. Connect with the {{:siteName}} Dashboard Designer to view insights on your Instagram pages, including metrics on audiences, reach, and much more.",hubspot:"HubSpot is a cloud-based CRM designed to offer various tools and features for marketing, sales, and customer service teams. Integrate HubSpot CRM with the {{:siteName}} Dashboard Designer to track the performance of your sales, marketing, and support.",parquet:"Bring your Parquet files into the {{:siteName}} Dashboard Designer and prepare dashboards to see the story that lives in your data.",ravanDB:"RavenDB is an open-source, cross-platform, document-oriented, and NoSQL database. Connect with the {{:siteName}} Dashboard Designer and build dashboards to see the story that lives in your data.",tidb:"TiDB is an open-source distributed SQL database that supports Hybrid Transactional and Analytical Processing (HTAP) workloads. The TiDB connector allows you to access data from TiDB databases within the {{:siteName}} Dashboard Designer."}})(t=n.Designer||(n.Designer={}))}(BoldBIDashboard||(BoldBIDashboard={}));InternalDataSource=function(){function n(n){this.dataSourceSearchTimer=-1;this.searchText="";this.selectedCategory=BoldBIDashboard.DataSourceCategory.all;this.isDSNameExist=!0;this.isDsNameWaitingPop=!1;this.isConnectBtnClick=!1;this.datasourceNameFieldText="";this.isDataPanel=!1;this.isCsvFirstRowHeader=!0;this.titleConfig=null;this.ejDataSourceDwn=null;this.datasourceDescriptionText="";this.ajaxPost=null;this.ajaxPostForDSNameValidation=null;this.setTimeForDSNameValidation=null;this.invalidSheetsDialog=null;this.invalidSheetsfooterTag=null;this.etlDialog=null;this.isEtlDialogBoxShowed=!1;this.advancedInfoContent=null;this.basicInfoContent=null;this.etlConnectorsList=["Asana","Chess","FacebookAds","GitHub","GoogleAnalytics","GoogleSheets","HubSpot","Jira","Matomo","MongoDB","Mux","Notion","MySql","MSSQL","Pipedrive","PostgreSQL","Oracle","Salesforce","Shopify","Strapi","Stripe","Sqlite","Workable","Zendesk","Slack","Csv","Excel","Json","Hubspot","Parquet"];this.locale=null;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.dashboardDesigner._id;BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.rdlParser)?(this.rdlParser=new BoldBIDashboard.DashboardDesignerUtility.DashboardParser(this.dashboardDesigner),this.rdlParser.newJsonReport()):this.rdlParser=this.dashboardDesigner.rdlParser;this.datasources=this.rdlParser.rdlJsonObj.DataSources;this.dashboardDesigner.model.mode!==BoldBIDashboard.Designer.mode.view&&(this.webDsTemplateInstance=new BoldBIDashboard.DashboardDesignerUtility.WebDsTemplate(this.dashboardDesigner,this.bbdesigner$.proxy(this.resetConfigTable,this)),this.linkedAccountsInstance=new BoldBIDashboard.DashboardDesignerUtility.LinkedAccounts(this.dashboardDesigner,this.bbdesigner$.proxy(this.resetConfigTable,this),this));this.dataSourceLocale=this.locale.dataSource;this.isEdit=!1;this.dataExtension=[];this.credential={};this.connectorType=this.locale.connectorType.basic}return n.prototype.updateDataSourceJSON=function(){this.datasources=this.rdlParser.rdlJsonObj.DataSources;this.credential={}},n.prototype.pouplateDataSources=function(){var n,t;if(this.credential={},!BoldBIDashboard.isNullOrUndefined(this.targetTag)){if(this.datasources=this.rdlParser.rdlJsonObj.DataSources,this.targetTag.find("#"+this.id+"_dsListContainer li").remove(),!BoldBIDashboard.isNullOrUndefined(this.datasources)&&this.datasources.length>0)for(n=0;n<this.datasources.length;n++)t=this.getDataSourceFromAPI(this.datasources[n].PublishId),BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(t.name)||t.name.trim()===""||(this.datasources[n].Name=t.name,this.datasources[n].Description=t.description),this.appendItem(this.datasources[n].Name,this.datasources[n].Id);this.showDataSourceHint()}},n.prototype.getDataSourceFromAPI=function(n){if(!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.datasources)&&this.dashboardDesigner.model.datasources.length!==0)for(var t=0;t<this.dashboardDesigner.model.datasources.length;t++)if(this.dashboardDesigner.model.datasources[t].id===n)return this.dashboardDesigner.model.datasources[t];return null},n.prototype.updateDataSource=function(n,t){if(this.updateItem(n.Name,t.Name),!BoldBIDashboard.isNullOrUndefined(this.datasources)&&this.datasources.length>0){for(var i=0;i<this.datasources.length;i++)if(this.datasources[i].Name===n.Name){this.datasources[i]=t;break}BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.DataSourceEdit,"updateDataSource","DataSource","",[t,n],[n,t])}},n.prototype.insertDataSource=function(n,t){t===0?this.datasources.unshift(n):this.datasources.splice(t,0,n);this.appendItem(n.Name,n.Id,t);this.showDataSourceHint()},n.prototype.addDataSource=function(n){this.datasources.push(n);this.appendItem(n.Name,n.Id);BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.DataSourceAdd,"removeDataSource","DataSource","",[n,this.datasources.length-1],[n.Name]);this.showDataSourceHint()},n.prototype.removeDataSource=function(n){var t,i;if(this.dashboardDesigner.element.find("#"+this.id+"_li_"+n).remove(),this.updateContainerBorder(),!BoldBIDashboard.isNullOrUndefined(this.datasources)&&this.datasources.length>0)for(t=0;t<this.datasources.length;t++)if(this.datasources[t].Name===n){i=this.bbdesigner$.extend(!0,{},this.datasources[t]);BoldBIDashboardDesigner.editManager.addCmdAction(CommandAction.DataSourceDelete,"insertDataSource","DataSource","",[i.Name],[i,t]);this.datasources.splice(t,1);break}this.showDataSourceHint()},n.prototype.showIndicator=function(){var n=this.dashboardDesigner.element.find("#"+this.id+"_dsConfig_BodyContainer").data("BoldBIDashboardWaitingPopup");n.option("text",this.getWaitingTextIfAny());n.show();BoldBIDashboard.DashboardUtil.buttonEnable(this.connectButton,!1)},n.prototype.hideIndicator=function(){var n=this.dashboardDesigner.element.find("#"+this.id+"_dsConfig_BodyContainer").data("BoldBIDashboardWaitingPopup");n.option("text","");n.hide();BoldBIDashboard.DashboardUtil.buttonEnable(this.connectButton,!0)},n.prototype.getWaitingTextIfAny=function(){var n="";return this.dsInfo&&(this.dsInfo.Provider==="Salesforce"?n=this.locale.salesForceDataSource.waitingPopupText:this.dsInfo.Provider==="File"?n=this.locale.dataSource.fileWaitingPopupText:BoldBIDashboard.isNullOrUndefined(this.dsInfo.OAuthConnection)||this.dsInfo.OAuthConnection.Provider!==BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(OAuthProvider,OAuthProvider.Google)||this.dsInfo.OAuthConnection.Service!=="analytics"||(n=this.locale.dataSource.googleAnalyticsWaitingPopupText)),n},n.prototype.updateItem=function(n,t){var u=this.dashboardDesigner.element.find("#"+this.id+"_designerConfigurationPanel").width()-66,i=this.dashboardDesigner.element.find("#"+this.id+"_li_"+n),r=this.dashboardDesigner.element.find("#"+this.id+"_li_"+t);i.unbind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseOver,this.bbdesigner$.proxy(this.enableEdit,this,n));i.unbind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseLeave,this.bbdesigner$.proxy(this.disableEdit,this,n));this.dashboardDesigner.element.find("#"+this.id+"_li_"+n+" .e-chk-image").unbind("click",this.bbdesigner$.proxy(this.editDataSourceItem,this,n));this.dashboardDesigner.element.find("#"+this.id+"_"+n).unbind("click",this.bbdesigner$.proxy(this.editDataSourceItem,this,n));i.find(".e-title-tip").unbind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseOver,this.bbdesigner$.proxy(this.dashboardDesigner.modules.util.tagOverTip,this,n));i.find(".e-title-tip").unbind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseLeave,this.bbdesigner$.proxy(this.dashboardDesigner.modules.util.tagOutTip,this,n));this.dashboardDesigner.element.find("#"+this.id+"_li_"+n+" .e-list-text").text(t);i.attr("name",t);i.attr("id",this.id+"_li_"+t);this.dashboardDesigner.element.find("#"+this.id+"_"+n).attr("id",this.id+"_"+t);r.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseOver,this.bbdesigner$.proxy(this.enableEdit,this,t));r.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseLeave,this.bbdesigner$.proxy(this.disableEdit,this,t));this.dashboardDesigner.element.find("#"+this.id+"_li_"+t+" .e-chk-image").bind("click",this.bbdesigner$.proxy(this.editDataSourceItem,this,t));this.dashboardDesigner.element.find("#"+this.id+"_"+t).bind("click",this.bbdesigner$.proxy(this.editDataSourceItem,this,t));BoldBIDashboard.DashboardUtil.textWidth(t,"Heebo 12px")>=u?r.find(".bbi-designer-content").addClass("e-title-tip"):r.find(".bbi-designer-content").removeClass("e-title-tip")},n.prototype.appendItem=function(n,t,i){var o=this.dashboardDesigner.element.find("#"+this.id+"_designerConfigurationPanel").width()-66,r=BoldBIDashboard.buildTag("li.e-user-select e-list e-state-default e-list-check bbi-designer-datasource-list bbi-designer-cursor","",{padding:"0px"},{id:this.id+"_li_"+t,name:n}),s=BoldBIDashboard.buildTag("span.bbi-designer-content-icon bbi-designer-treeIcon bbi-designer-datasourcelist bbi-designer-cursor","",{margin:"1px 9px"}),f=BoldBIDashboard.buildTag("a.e-chevron-right_01 bbi-remove-shadow","",{padding:"9px 0px"},{}),u,e;r.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseOver,this.bbdesigner$.proxy(this.enableEdit,this,t));r.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseLeave,this.bbdesigner$.proxy(this.disableEdit,this,t));u=BoldBIDashboard.buildTag("span.e-list-text e-rel e-user-select bbi-designer-content e-content-bold bbi-designer-li-text "+(BoldBIDashboard.DashboardUtil.textWidth(n,"Heebo 12px")>=o?"e-title-tip":""),n,{width:o+"px","margin-top":"2px"});f.append(s).append(u);u.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseOver,this.bbdesigner$.proxy(this.enableEdit,this,t));u.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseLeave,this.bbdesigner$.proxy(this.disableEdit,this,t));e=BoldBIDashboard.buildTag("span.bbi-designer-content-icon bbi-designer-single-drag bbi-designer-click","",{display:"none",float:"right","margin-right":"5px","margin-top":"1.5px"},{id:this.id+"_"+t,"e-target":this.id+"_dsConfigMenu"});f.append(e);e.bind("click",this.bbdesigner$.proxy(this.editDataSourceItem,this,t));r.append(f);BoldBIDashboard.isNullOrUndefined(i)?this.targetTag.find("#"+this.id+"_dsListContainer ul").append(r):i===0?this.targetTag.find("#"+this.id+"_dsListContainer ul").prepend(r):this.targetTag.find("#"+this.id+"_dsListContainer ul>li:nth-child("+i+")").after(r);this.updateContainerBorder()},n.prototype.updateContainerBorder=function(){this.targetTag.find("#"+this.id+"_dsListContainer li").length===0?this.targetTag.find("#"+this.id+"_dsListContainer").css("border-top-width","0px"):this.targetTag.find("#"+this.id+"_dsListContainer").css("border-top-width","1px")},n.prototype.getDSInstance=function(){var t=this.configTable.data("selected"),n=BoldBIDashboard.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypeObject(t);return BoldBIDashboard.isNullOrUndefined(n)?null:BoldBIDashboard.Dashboard.ConnectionHelper.getConnectionInstance(this.dashboardDesigner,n,!1)},n.prototype.renderETLDialog=function(){var f=this.etlDialog=BoldBIDashboard.buildTag("div.e-etl-dlg","",{},{id:this.id+"_etl_dialog"}),e=BoldBIDashboard.buildTag("div.e-etl-content",this.locale.errorMessage.dialogmsgETL+'<a href="https://help.boldbi.com/cloud-bi/getting-started/quick-start/" target="_blank" style="color: #1293F4;text-decoration: #0077cc;display:none;"> Learn more <span class=\'bbi-dbrd-designer-etl-link-icon\' style="padding-top:1px;vertical-align:text-top;"><\/span><\/a>',{margin:"5px 18px","letter-spacing":"0.25px","line-height":"20px","font-size":"13px"},{}),t,i,r,u,n;f.append(e);t=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.errorMessage.etlDialogHeaderText,{float:"right"},{id:this.id+"_etl_redirectbtn",type:"button"});i=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.locale.errorMessage.etlContinuebtnText,{float:"right",right:"10px"},{id:this.id+"_etl_continuewithconnectorbtn",type:"button"});this.dashboardDesigner.element.append(this.etlDialog);this.etlDialog.BoldBIDashboardDialog({title:this.locale.errorMessage.etlDialogHeaderText,width:"540px",enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner bold-etl",close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,closeIconTooltip:this.locale.dialogOptions.closeButtonText}).data("BoldBIDashboardDialog");this.dashboardDesigner.element.find("#"+this.id+"_etl_redirectbtn").css("background","#1293F4 !important").css("border","#1293F4 !important");r=this.dashboardDesigner.element.find("#"+this.id+"_etl_dialog_title");r.css("border-bottom","none !important");u=this.dashboardDesigner.element.find("#"+this.id+"_etl_dialog_foot");u.append(t,i);n=this.etlDialog.data("BoldBIDashboardDialog");n.option("faviconCSS","bbi-information-icon-etl");n.option("title",this.locale.errorMessage.etlDialogHeaderText);n.open()},n.prototype.continueWithConnector=function(){var n=this.etlDialog.data("BoldBIDashboardDialog");n.close()},n.prototype.connectDatasource=function(){var f=this.configTable.data("selected"),u=this.validateDataSourceName(),e=u.isAvailable,i,n,r,t;(this.dashboardDesigner.isExecute=!1,i=null,this.isConnectBtnClick=!0,r=BoldBIDashboard.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypeObject(f),BoldBIDashboard.isNullOrUndefined(r)||(n=BoldBIDashboard.Dashboard.ConnectionHelper.getConnectionInstance(this.dashboardDesigner,r,!1)),BoldBIDashboard.isNullOrUndefined(n))||(i=n.getDatasourceInfo(u.name,this.datasourceDescriptionText,this.datasourceItem),BoldBIDashboard.isNullOrUndefined(i)||this.isDSNameExist||this.isDsNameWaitingPop)||(this.dsInfo=i,e&&this.dsInfo&&(this.isConnectBtnClick=!1,this.dsInfo.Id=BoldBIDashboard.getGuid("Datasource_"),t=JSON.parse(JSON.stringify(this.dsInfo)),t.DynamicConnectionStringInfo=null,n.ShouldExtractData||t.IsLiveWebMode?!n.ShouldExtractData&&t.IsLiveWebMode?(this.ajaxPost=this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.testConnection,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.ConnectAndReconnectAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.testConnection,datasource:this.encryptPostBack(this.dsInfo),connectionInfo:t,mode:this.dashboardDesigner.model.mode,dataSetId:this.dsInfo.Id,isQueryDesignerMode:"true"})},{indicator:[this.bbdesigner$.proxy(this.showIndicator,this)]}),this.createHubConnectionCallForWebDS(n)):this.createHubConnectionCallForWebDS(n):this.ajaxPost=this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.testConnection,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.ConnectAndReconnectAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.testConnection,datasource:this.encryptPostBack(this.dsInfo),connectionInfo:t,mode:this.dashboardDesigner.model.mode,dataSetId:this.dsInfo.Id,isQueryDesignerMode:"true"})},{fnction:this.bbdesigner$.proxy(this.validateConnection,this,n),indicator:[this.bbdesigner$.proxy(this.showIndicator,this),this.bbdesigner$.proxy(this.hideIndicator,this)]})))},n.prototype.createHubConnectionCallForWebDS=function(n){this.ajaxPost=this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.validateconnection,{action:BoldBIDashboard.DashboardUtil.DesignerAction.testConnection,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.ConnectAndReconnectAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.testConnection,datasource:this.encryptPostBack(this.dsInfo),dataSetId:this.dsInfo.Id})},{fnction:this.bbdesigner$.proxy(this.ajaxPolling,this,n),errfnction:this.bbdesigner$.proxy(this.hideIndicator,this),indicator:[this.bbdesigner$.proxy(this.showIndicator,this)]},!0,!0)},n.prototype.ajaxPolling=function(n){this.dashboardDesigner.modules.ajaxPoll.ajaxPolling(this.dsInfo.Id,{fnction:this.bbdesigner$.proxy(this.intermediateDbActionResponse,this,!1,n),indicator:[this.bbdesigner$.proxy(this.hideIndicator,this)]})},n.prototype.encryptPostBack=function(n){var t=this.bbdesigner$.extend(!0,{},n);return t.ConnectionString=BoldBIDashboard.DashboardUtil.encryptData(t.ConnectionString),t.Username=BoldBIDashboard.DashboardUtil.encryptData(t.Username),t.Password=BoldBIDashboard.DashboardUtil.encryptData(t.Password),t},n.prototype.connectQueryDesigner=function(){this.newQueryDesigner(this.ejDataSourceDwn.getSelectedValue())},n.prototype.getConStringArgs=function(n){for(var i,r=n.split(";"),u={},t=0;t<r.length;t++)r[t]&&(i=r[t].split("="),u[i[0].toLowerCase()]={field:i[0],value:i[1]});return u},n.prototype.intermediateDbActionResponse=function(n,t,i){var r,u;i&&(i.Data.IgnoreSchemaFetch?this.validateConnection(t,"true"):!BoldBIDashboard.isNullOrUndefined(i.Data)&&((r=JSON.parse(i.Data).InvalidTableList)===null||r===void 0?void 0:r.length)>0?this.renderInvalidSheetsDialog(i,n,t):(u=new BoldBIDashboard.DashboardDesignerUtility.TableSelector(this.dashboardDesigner,this.dsInfo,n,this),u.showDialog(JSON.parse(i.Data),t)))},n.prototype.renderInvalidSheetsDialog=function(n,t,i){var o=this.invalidSheetsDialog=BoldBIDashboard.buildTag("div.e-invalidsheets-dlg","",{height:"72px"},{id:this.id+"_invalidsheets_dialog"}),s=JSON.parse(n.Data).InvalidTableList.map(function(n,t){return t===0?"• ".concat(n):", ".concat(n)}).join(""),r=BoldBIDashboard.buildTag("div.e-invalidsheets-content","",{margin:"24px",display:"flex","flex-direction":"column",gap:"16px"},{}),h=BoldBIDashboard.buildTag("div.e-invalidsheets-content-msg","The following <b>sheet(s)<\/b> has some invalid data: ",{},{id:this.id+"_invalidsheets_content_msg"}),c=BoldBIDashboard.buildTag("div.e-invalidsheets-list",s,{height:"45px"},{}),l=BoldBIDashboard.buildTag("div.e-invalidsheets-note-text","<b>Note:<\/b> "+this.locale.dataSource.invalidSheetsNoteTxt,{},{}),u,f,e;r.append(h,c,l);o.append(r);u=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.dataSource.continueButtonText,{float:"right"},{id:this.id+"_invalidsheets_continuebtn",type:"button"});f=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.locale.dataSource.closeBtnText,{float:"right",right:"10px"},{id:this.id+"_invalidsheets_closebtn",type:"button"});this.dashboardDesigner.element.append(this.invalidSheetsDialog);this.invalidSheetsDialog.BoldBIDashboardDialog({title:"Extract data",width:"489px",height:"265px",enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner bbi-invalid-sheets-dialog",close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,closeIconTooltip:this.locale.dialogOptions.closeButtonText});this.invalidSheetsfooterTag=this.dashboardDesigner.element.find("#"+this.id+"_invalidsheets_dialog_foot");this.invalidSheetsfooterTag.css("bottom","25px;");this.invalidSheetsfooterTag.append(u,f);e=this.invalidSheetsDialog.data("BoldBIDashboardDialog");e.open();this.dashboardDesigner.element.on("click","#"+this.id+"_invalidsheets_continuebtn",this.bbdesigner$.proxy(this.confirmAction,this,n,t,i))},n.prototype.confirmAction=function(n,t,i){this.closeDialog();var r=new BoldBIDashboard.DashboardDesignerUtility.TableSelector(this.dashboardDesigner,this.dsInfo,t,this);r.showDialog(JSON.parse(n.Data),i)},n.prototype.closeDialog=function(){var n=this.invalidSheetsDialog.data("BoldBIDashboardDialog");n.close()},n.prototype.getFileData=function(n,t){var i=new BoldBIDashboard.DashboardDesignerUtility.TableSelector(this.dashboardDesigner,this.dsInfo,!1,this,!0);i.getFileDataJira(t)},n.prototype.alertDialog=function(n,t,i,r,u,f,e,o,s,h,c,l){BoldBIDashboard.isNullOrUndefined(l)||BoldBIDashboard.isNullOrUndefined(l.PageData)||BoldBIDashboard.isNullOrUndefined(l.PageData.Abort)||(t=this.locale.errorMessage.abortOperation,i=IconType.success,r=AlertType.Abort,u=!1);this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.dashboardDesigner,t,i,r,u,f,{dataInfo:this.dsInfo,instance:this,method:"getFileData"},!1,"",null,null,l)},n.prototype.validateConnection=function(n,t,i){var r,u,f,e;t.result==="true"||t==="true"?(BoldBIDashboard.isNullOrUndefined(t.jsonData)||t.jsonData==="null"?(r=this.constructCon(),!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0&&(r.SelectedSchemasForLiveWeb=i),!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.mode)&&this.isConnectionMode()?(u=BoldBIDashboardQueryDesigner.createDataSet(),u.Name=r.Name,u.Description=r.Description,u.Id=r.Id,BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.serviceAuthorizationToken)||this.dashboardDesigner.model.serviceAuthorizationToken===""||(f=new BoldBIDashboard.DashboardDesignerUtility.DatasourceSaveDialog(this.dashboardDesigner,r,u,this.bbdesigner$.proxy(this.onActionSuccess,this)),f.trySavingDataSource(this.bbdesigner$.proxy(this.dashboardDesigner.showWaitingPopupConnectionMode,this.dashboardDesigner,!1),this.bbdesigner$.proxy(this.dashboardDesigner.hideWaitingPopupConnectionMode,this.dashboardDesigner,!1)))):this.connectDataSource(r),e=this.selectedConnectionInfo=BoldBIDashboard.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypeObject(this.selectedItem),this.dashboardDesigner.modules.util.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Datasource,this.getDatasourceSubTypes(e.name),null)):(this.tableSelector=new BoldBIDashboard.DashboardDesignerUtility.TableSelector(this.dashboardDesigner,this.dsInfo,!1,this),this.tableSelector.showDialog(JSON.parse(t.jsonData),n,t.table)),this.isEdit=!1):this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.dashboardDesigner,this.locale.errorMessage.serverConnectionError,IconType.errors,AlertType.Alert,!0,this.locale.errorMessage.failedToConnectDataSource);BoldBIDashboard.isNullOrUndefined(this.ajaxPost)||(this.ajaxPost.abort(),this.ajaxPost=null)},n.prototype.onActionSuccess=function(n){if(n){var t={element:null,data:n},i={mode:BoldBIDashboard.Designer.mode.connection,event:"createConnection",source:t};this.dashboardDesigner._trigger("actionComplete",{eventType:BoldBIDashboard.DashboardDesignerEvent.SaveConnection,data:i})}},n.prototype.connectDataSource=function(n){this.isDataPanel||this.connectButton.hasClass("e-btn-mode-save")?(this.isEdit?this.updateDataSource(this.datasourceItem,n):this.addDataSource(n),BoldBIDashboard.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataPanel)):this.isEdit?(this.updateDataSource(this.datasourceItem,n),BoldBIDashboard.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataList)):this.newQueryDesigner(n.Id,n)},n.prototype.setButtonTxt=function(){this.isEdit||this.isDataPanel?this.connectButton.text("Save").addClass("e-btn-mode-save").removeClass("e-connect"):this.connectButton.text("Connect").addClass("e-connect").removeClass("e-btn-mode-save")},n.prototype.constructCon=function(){var n=this.isEdit?this.bbdesigner$.extend(!0,{},this.datasourceItem):BoldBIDashboard.DashboardUtil.createDataSource();return n.Name=this.dsInfo.Name,n.Id=this.dsInfo.Id,n.ServerName=this.dsInfo.ServerName,n.Description=this.dsInfo.Description,this.dsInfo.Provider!=="shared"?(this.getDSInstance().updateDSInfo(n,this.dsInfo),this.credential[n.Name]={UserName:this.dsInfo.Username,PassWord:this.dsInfo.Password}):(n.ConnectionProperties=null,n.DataSourceReference=this.dsInfo.ConnectionString),n},n.prototype.enableEdit=function(n){this.dashboardDesigner.element.find("#"+this.id+"_"+n).css("display","block")},n.prototype.disableEdit=function(n){this.dashboardDesigner.element.find("#"+this.id+"_"+n).css("display","none")},n.prototype.contextMenuClick=function(n){var t=this.targetTag.find("#"+this.id+"_dsConfigMenu").attr("datasoure");switch(n.text){case this.locale.dataSource.deleteContextMenu:this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.dataSource,this.locale.dataSource.deleteDataSource+t+this.locale.dataSource.questionmark,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{name:t},instance:this,method:"deletConfirmation"});break;case"Create DataSet":this.newQueryDesigner(t)}},n.prototype.deletConfirmation=function(n,t){n&&!BoldBIDashboard.isNullOrUndefined(t)&&this.removeDataSource(t.name)},n.prototype.newQueryDesigner=function(n,t){var i=this.dashboardDesigner.modules.dataSet;i.datasourceSelection(n,t)},n.prototype.editDataSourceItem=function(n){var i=this.dashboardDesigner.element.find("#"+this.id+"_"+n),r=i.offset(),t=this.targetTag.find("#"+this.id+"_dsConfigMenu").data("BoldBIDashboardMenu");t.element.attr("datasoure",n);t.element.is(":visible")?t.hide():t.show(r.left-this.targetTag.find("#"+this.id+"_dsConfigMenu").width(),r.top+i.height(),this.dsListTag,n)},n.prototype.renderContextMenu=function(n){var t=BoldBIDashboard.buildTag("ul.bbi-designer-menu","",{},{id:this.id+"_dsConfigMenu"}),i=this.locale.dataSource;t.append("<li><a class='editContextMenu'>"+i.editContextMenu+"<\/a><\/li>");t.append("<li><a class='datasetContextMenu'>Create DataSet<\/a><\/li>");t.append("<li><a class='deleteContextMenu'>"+i.deleteContextMenu+"<\/a><\/li>");n.append(t);t.BoldBIDashboardMenu({menuType:BoldBIDashboard.MenuType.ContextMenu,openOnClick:!1,ontextMenuTarget:"#"+this.id+"_dataSourceTag",width:140,click:this.bbdesigner$.proxy(this.contextMenuClick,this)})},n.prototype.showToggleOption=function(n){this.dsConfigTag.find("#"+this.id+"_switchCont").css("display",n?"block":"none");this.updateDSConfigContainer()},n.prototype.resetConfigurationPanel=function(){this.dsConfigTag.find("#"+this.id+"_basicPanel").css("display","table-row");!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.mode)&&this.isConnectionMode()?this.dsConfigTag.find("#"+this.id+"_basicPanel").css("display","block"):this.dsConfigTag.find("#"+this.id+"_basicPanel").css("display","table-row");this.dsConfigTag.find("#"+this.id+"_panelSwitch").text(this.locale.dataSource.advanceOptionText);this.dsInfo=null;this.datasourceItem=this.isEdit?this.datasourceItem:null},n.prototype.resetConfigTable=function(n){this.setButtonTxt();this.resetConfigurationPanel();this.showValidationMsg(this.id+"_datasource_dsname",!1);this.setHeaderType(!1);this.setDataSourceName();this.setDatasourceDescription();this.configTable.data("selected",n);this.configTable.children().hide()},n.prototype.getConnectionDataSourceHeaderTemplate=function(n){var r=this.dashboardDesigner.modules.connectionDialog,t,i;return r.updateAPIDocumentationLink(this.getHelpDocLink(n.connector)),i="<label class='bbi-dbrd-designer-webds-template-header-label'>"+this.locale.dataSource.connectTo+n.name+"<\/label>",t="<span class='bbi-dbrd-designer-webds-template-header-link' >"+(!BoldBIDashboard.isNullOrUndefined(n.description)&&n.description!==""?n.description:"Quickly connect to "+n.name)+"<\/span>",i+this.dashboardDesigner.modules.util.loadDatasourceDescriptionSiteName(t)},n.prototype.getHelpDocLink=function(n){var i=helpDocumentLink.filter(function(t){return t.name===n}),t;return i.length>0&&!BoldBIDashboard.isNullOrUndefined(i[0])?(t=this.dashboardDesigner.model.customBrandSettings.customDomain.trim(),this.dashboardDesigner.isHelpLinkHidden&&t!==""?(t=t.charAt(t.length-1)==="/"?t.substr(0,t.length-1):t,t+i[0].url):"https://redirect.boldbi.com/?id="+i[0].reDirectionId):""},n.prototype.getDataSourceHeaderTemplate=function(n){var t,i=this.getHelpDocLink(n.connector),r=this.getContentForHeaders(n);return!BoldBIDashboard.isNullOrUndefined(i)&&!this.hideAPILink(n.itemType)?(t="<span class='bbi-dbrd-designer-webds-template-header-link' ><a class='bbi-dbrd-designer-webds-template-header-href' href='"+i+"' target='_blank'>"+n.name+" "+this.locale.dataSource.webDataSource.userGuideText+"<span class='bbi-dbrd-designer-webds-template-header-link-icon'><\/span><\/a><\/span>",r+t):r},n.prototype.getContentForHeaders=function(n){return n.connector.split("_")[0]!=="CustomWeb"||BoldBIDashboard.isNullOrUndefined(n.icon)||n.icon===""?"<span class='bbi-dbrd-designer-webds-template-header-icon "+n.cssClass+"'><\/span><label class='bbi-dbrd-designer-webds-template-header-label'>"+n.name+"<\/label>":"<span class='bbi-dbrd-designer-webds-template-header-icon "+n.cssClass+"' style= display:inline-block;margin-bottom:4px;border-radius:3px;background:url(data:image/png;base64,"+n.icon+")no-repeat;background-position:center;background-size:contain;height:40px;width:40px><\/span><label class='bbi-dbrd-designer-webds-template-header-label'>"+n.name+"<\/label>"},n.prototype.hideAPILink=function(n){switch(n){case"e-oauth-salesforce":case"e-oauth-salesforce-reports":case"e-oauth-box":case"e-oauth-dropbox":case"e-oauth-google-drive":case"e-oauth-microsoft-onedrive":case"e-oauth-microsoft-sharepoint":case"e-oauth-google-sheets":return!0;default:return!1}},n.prototype.updateDataSourceHeader=function(n,t){t.html(this.isConnectionMode()?this.getConnectionDataSourceHeaderTemplate(n):this.getDataSourceHeaderTemplate(n))},n.prototype.showETLDialog=function(n){var i,t;this.dashboardDesigner.model.isAzureApplication||this.dashboardDesigner.model.IsEmbed?this.newDatabase(n):(this.isConnectionMode()?(i=this.bbdesigner$(n.currentTarget).parents(".bbi-dbrd-service-tile-wrap"),this.selectedItem=i.attr("data-connector")):this.selectedItem=this.bbdesigner$(n.currentTarget).attr("data-connector"),t=this.selectedConnectionInfo=BoldBIDashboard.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypeObject(this.selectedItem),BoldBIDashboard.Dashboard.ConnectionHelper.isETLConnection(t,this.etlConnectorsList)&&this.connectorType==this.locale.connectorType.advanced&&t.category!==BoldBIDashboard.DataSourceCategory.sql?this.redirectETLlink(this):this.newDatabase(n))},n.prototype.redirectETLlink=function(){var n;BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.etlUrl)||(n=this.dashboardDesigner.model.etlUrl,window.open(n,"_blank"))},n.prototype.newDatabase=function(n){var i,r,t,u,f;if(this.currentDatasource=null,i="",this.isConnectionMode()?(r=this.bbdesigner$(n.currentTarget).parents(".bbi-dbrd-service-tile-wrap"),i=r.attr("itemType"),this.selectedItem=r.attr("data-connector")):(i=this.bbdesigner$(n.target).attr("itemType"),this.selectedItem=this.bbdesigner$(n.currentTarget).attr("data-connector"),this.connectButton.html(this.locale.dataSource.connectButtonText)),t=this.selectedConnectionInfo=BoldBIDashboard.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypeObject(this.selectedItem),!BoldBIDashboard.isNullOrUndefined(t)&&!BoldBIDashboard.isNullOrUndefined(this.titleConfig)){if(this.dashboardDesigner.modules.util.isEnvironmentOnPremise()&&!this.dashboardDesigner.model.intermediateDbStatus&&t.connectorsCategory!==ConnectorsCategory.Database){u="<a class='bbi-datastoreset-info-url' href='"+(!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.serverSettings)&&!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.serverSettings.dataStoreSettingURL)?this.dashboardDesigner.model.serverSettings.dataStoreSettingURL:"#")+"' target='_blank'>"+this.dataSourceLocale.setting+"<\/a>";this.dashboardDesigner.modules.isEmbed&&(u=this.dataSourceLocale.setting);f=this.dataSourceLocale.intermediateDbMsg+this.getOAuthAlertMsg(u);this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.dashboardDesigner,f,IconType.information,AlertType.Alert,!1,"");return}this.dashboardDesigner.modules.util.AddActivityLog(ActivityLogEvents.Selected,ActivityLogItemType.Datasource,this.getDatasourceSubTypes(t.name),null);this.updateDataSourceHeader(t,this.titleConfig)}if(t.connector==="GoogleBigQuery")this.selectedConnectionInfo=BoldBIDashboard.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypeObject("service_account");else if(BoldBIDashboard.Dashboard.ConnectionHelper.isOAuthConnection(t)){this.linkedAccountsInstance.showDialog(t,this.configTable,this.fncPanelSwitcher,!1,null,"_newConnection");return}this.openNewConnectionChanges()},n.prototype.openNewConnectionChanges=function(){BoldBIDashboard.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.ConfigPanel);this.resetConfigTable(this.selectedItem);var n=BoldBIDashboard.Dashboard.ConnectionHelper.getConnectionInstance(this.dashboardDesigner,this.selectedConnectionInfo,!1);BoldBIDashboard.isNullOrUndefined(n)?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.dashboardDesigner,"Failed to invoke the connection instance.",IconType.information,AlertType.Alert,!1,""):(this.connectButton.html(n.SubmitBtnText),n.render(this.configTable,this.selectedConnectionInfo));this.updateEJComponentSize();this.scrollerRefresh(this.targetTag.find("#"+this.id+"_dsConfigBodyContainer"))},n.prototype.getOAuthAlertMsg=function(n){return BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.serverSettings)?"":this.dashboardDesigner.model.serverSettings.isAdmin?this.dataSourceLocale.configureDataStoreMsg+n+".":this.dataSourceLocale.contactAdministratorMsg},n.prototype.getDatasourceSubTypes=function(n){switch(n){case this.locale.dataSource.dataSourceType.mariadb:return ActivityLogItemSubTypes.MariaDB;case this.locale.dataSource.dataSourceType.tidb:return ActivityLogItemSubTypes.TiDB;case this.locale.dataSource.dataSourceType.singlestore:return ActivityLogItemSubTypes.SingleStore;case this.locale.dataSource.dataSourceType.cdata:return ActivityLogItemSubTypes.CDATA;case this.locale.dataSource.dataSourceType.odbc:return ActivityLogItemSubTypes.ODBC;case this.locale.dataSource.dataSourceType.redshift:case this.locale.dataSource.dataSourceType.redShift:return ActivityLogItemSubTypes.Redshift;case this.locale.dataSource.dataSourceType.askNicely.name:return ActivityLogItemSubTypes.AskNicely;case this.locale.dataSource.dataSourceType.callRail.name:return ActivityLogItemSubTypes.CallRail;case this.locale.dataSource.dataSourceType.campaignMonitor.name:return ActivityLogItemSubTypes.CampaignMonitor;case this.locale.dataSource.dataSourceType.chargify.name:return ActivityLogItemSubTypes.Chargify;case this.locale.dataSource.dataSourceType.chartMogul.name:return ActivityLogItemSubTypes.ChartMogul;case this.locale.dataSource.dataSourceType.chartBeat.name:return ActivityLogItemSubTypes.ChartBeat;case this.locale.dataSource.dataSourceType.file:return ActivityLogItemSubTypes.File;case this.locale.dataSource.dataSourceType.excel:return ActivityLogItemSubTypes.Excel;case this.locale.dataSource.dataSourceType.csv:return ActivityLogItemSubTypes.Csv;case this.locale.dataSource.dataSourceType.edi:return ActivityLogItemSubTypes.EDI;case this.locale.dataSource.dataSourceType.xml:return ActivityLogItemSubTypes.Xml;case this.locale.dataSource.dataSourceType.json:return ActivityLogItemSubTypes.Json;case this.locale.dataSource.dataSourceType.flurry.name:return ActivityLogItemSubTypes.Flurry;case this.locale.dataSource.dataSourceType.freshdesk.name:return ActivityLogItemSubTypes.FreshDesk;case this.locale.dataSource.dataSourceType.fusebill.name:return ActivityLogItemSubTypes.Fusebill;case this.locale.dataSource.dataSourceType.gitlab.name:return ActivityLogItemSubTypes.Gitlab;case this.locale.dataSource.oauthConnectors.gmail:return ActivityLogItemSubTypes.Gmail;case this.locale.dataSource.oauthConnectors.googleCalendar:return ActivityLogItemSubTypes.GoogleCalendar;case this.locale.dataSource.oauthConnectors.markupTrace:return ActivityLogItemSubTypes.MarkupTrace;case this.locale.dataSource.oauthConnectors.googleSheets:return ActivityLogItemSubTypes.GoogleSheets;case this.locale.dataSource.dataSourceType.goSquared.name:return ActivityLogItemSubTypes.GoSquared;case this.locale.dataSource.oauthConnectors.googleBigQuery:case this.locale.dataSource.dataSourceType.googleBigQuery:return ActivityLogItemSubTypes.GoogleBigQuery;case this.locale.dataSource.oauthConnectors.googleAnalytics:return ActivityLogItemSubTypes.GoogleAnalytics;case this.locale.dataSource.oauthConnectors.googleAds:return ActivityLogItemSubTypes.GoogleAds;case this.locale.dataSource.oauthConnectors.googleDrive:return ActivityLogItemSubTypes.GoogleDrive;case this.locale.dataSource.oauthConnectors.microsoftOneDrive:return ActivityLogItemSubTypes.MicrosoftOneDrive;case this.locale.dataSource.oauthConnectors.microsoftSharePoint:return ActivityLogItemSubTypes.MicrosoftSharePoint;case this.locale.dataSource.oauthConnectors.googleplus:return ActivityLogItemSubTypes.GooglePlus;case this.locale.dataSource.oauthConnectors.box:return ActivityLogItemSubTypes.Box;case this.locale.dataSource.dataSourceType.harvest.name:return ActivityLogItemSubTypes.Harvest;case this.locale.dataSource.dataSourceType.helpScout.name:return ActivityLogItemSubTypes.HelpScout;case this.locale.dataSource.dataSourceType.gravityForms.name:return ActivityLogItemSubTypes.GravityForms;case this.locale.dataSource.dataSourceType.insightly.name:return ActivityLogItemSubTypes.Insightly;case this.locale.dataSource.dataSourceType.amazonMWS.name:return ActivityLogItemSubTypes.AmazonMWS;case this.locale.dataSource.dataSourceType.intervals.name:return ActivityLogItemSubTypes.Intervals;case this.locale.dataSource.dataSourceType.jira.name:return ActivityLogItemSubTypes.Jira;case this.locale.dataSource.dataSourceType.keenIo.name:return ActivityLogItemSubTypes.KeenIo;case this.locale.dataSource.dataSourceType.kissMetrics.name:return ActivityLogItemSubTypes.Kissmetrics;case this.locale.dataSource.dataSourceType.azureTables:return ActivityLogItemSubTypes.AzureTables;case this.locale.dataSource.dataSourceType.wistia.name:return ActivityLogItemSubTypes.Wistia;case this.locale.dataSource.dataSourceType.liveAgent.name:return ActivityLogItemSubTypes.LiveAgent;case this.locale.dataSource.dataSourceType.mailchimp.name:return ActivityLogItemSubTypes.Mailchimp;case this.locale.dataSource.dataSourceType.msSql:case"SQL":return ActivityLogItemSubTypes.SQL;case this.locale.dataSource.dataSourceType.azuresynapseanalytics:case this.locale.dataSource.dataSourceType.azureSQLDataWarehouse:return ActivityLogItemSubTypes.AzureSynapseAnalytics;case this.locale.dataSource.dataSourceType.influxdb:return ActivityLogItemSubTypes.InfluxDB;case this.locale.dataSource.dataSourceType.amazonAthena:return ActivityLogItemSubTypes.AmazonAthena;case this.locale.dataSource.dataSourceType.azureDataExplorer:return ActivityLogItemSubTypes.AzureDataExplorer;case this.locale.dataSource.dataSourceType.elasticsearch:return ActivityLogItemSubTypes.ElasticSearch;case this.locale.dataSource.dataSourceType.rockSet:return ActivityLogItemSubTypes.RockSet;case this.locale.dataSource.dataSourceType.bolddatastore:return ActivityLogItemSubTypes.BoldDataStore;case this.locale.dataSource.dataSourceType.ssas:case this.locale.dataSource.dataSourceType.SSAS:return ActivityLogItemSubTypes.MSSQLServerAnalysisServices;case this.locale.dataSource.dataSourceType.mongodb:return ActivityLogItemSubTypes.MongoDB;case this.locale.dataSource.dataSourceType.presto:return ActivityLogItemSubTypes.Presto;case this.locale.dataSource.dataSourceType.snowflake:return ActivityLogItemSubTypes.Snowflake;case this.locale.dataSource.dataSourceType.vertica:return ActivityLogItemSubTypes.Vertica;case this.locale.dataSource.dataSourceType.sparksql:return ActivityLogItemSubTypes.SparkSQL;case this.locale.dataSource.dataSourceType.mySql:return ActivityLogItemSubTypes.MySQL;case this.locale.dataSource.dataSourceType.sqlite:return ActivityLogItemSubTypes.SQLite;case this.locale.dataSource.dataSourceType.amazonAurora:return ActivityLogItemSubTypes.AmazonAurora;case this.locale.dataSource.dataSourceType.amazonAuroraMySQL:return ActivityLogItemSubTypes.AmazonAuroraMySQL;case this.locale.dataSource.dataSourceType.amazonAuroraPostgreSQL:return ActivityLogItemSubTypes.AmazonAuroraPostgreSQL;case this.locale.dataSource.dataSourceType.amazonRDS:return ActivityLogItemSubTypes.AmazonRDS;case this.locale.dataSource.dataSourceType.amazonRDSMySQL:return ActivityLogItemSubTypes.AmazonRDSMySQL;case this.locale.dataSource.dataSourceType.amazonRDSAmazonAuroraPostgreSQL:return ActivityLogItemSubTypes.AmazonRDSAmazonAuroraPostgreSQL;case this.locale.dataSource.dataSourceType.amazonRDSAmazonAuroraMySQL:return ActivityLogItemSubTypes.AmazonRDSAmazonAuroraMySQL;case this.locale.dataSource.dataSourceType.amazonRDSOracle:return ActivityLogItemSubTypes.AmazonRDSOracle;case this.locale.dataSource.dataSourceType.amazonRDSSqlServer:return ActivityLogItemSubTypes.AmazonRDSSqlServer;case this.locale.dataSource.dataSourceType.amazonRDSMariaDB:return ActivityLogItemSubTypes.AmazonRDSMariaDB;case this.locale.dataSource.dataSourceType.googleCloud:return ActivityLogItemSubTypes.GoogleCloud;case this.locale.dataSource.dataSourceType.googleCloudPostgreSQL:return ActivityLogItemSubTypes.GoogleCloudPostgreSQL;case this.locale.dataSource.dataSourceType.googleCloudMySQL:return ActivityLogItemSubTypes.GoogleCloudMySQL;case this.locale.dataSource.dataSourceType.clickHouse:case this.locale.dataSource.dataSourceType.Clickhouse:return ActivityLogItemSubTypes.ClickHouse;case this.locale.dataSource.dataSourceType.mixpanel.name:return ActivityLogItemSubTypes.Mixpanel;case this.locale.dataSource.dataSourceType.newRelic.name:return ActivityLogItemSubTypes.NewRelic;case this.locale.dataSource.dataSourceType.nicereply.name:return ActivityLogItemSubTypes.Nicereply;case this.locale.dataSource.dataSourceType.odata.name:return ActivityLogItemSubTypes.OData;case this.locale.dataSource.dataSourceType.pipelineDeals.name:return ActivityLogItemSubTypes.PipelineDeals;case this.locale.dataSource.dataSourceType.postgres:return ActivityLogItemSubTypes.PostgresSql;case this.locale.dataSource.oauthConnectors.projectplace:return ActivityLogItemSubTypes.Projectplace;case this.locale.dataSource.dataSourceType.prosperWorks.name:return ActivityLogItemSubTypes.ProsperWorks;case this.locale.dataSource.oauthConnectors.salesforce:return ActivityLogItemSubTypes.Salesforce;case this.locale.dataSource.oauthConnectors.todoist:return ActivityLogItemSubTypes.Todoist;case this.locale.dataSource.dataSourceType.sendGrid.name:return ActivityLogItemSubTypes.SendGrid;case this.locale.dataSource.dataSourceType.smartSheet.name:return ActivityLogItemSubTypes.Smartsheet;case this.locale.dataSource.dataSourceType.fortytwomatters.name:return ActivityLogItemSubTypes.FortyTwomatters;case this.locale.dataSource.dataSourceType.zohocrm.name:return ActivityLogItemSubTypes.ZohoCRM;case this.locale.dataSource.dataSourceType.wordPress.name:return ActivityLogItemSubTypes.WordPress;case this.locale.dataSource.oauthConnectors.microsoftDynamicsSales:return ActivityLogItemSubTypes.MicrosoftDynamicsSales;case this.locale.dataSource.oauthConnectors.microsoftDynamicsService:return ActivityLogItemSubTypes.MicrosoftDynamicsService;case this.locale.dataSource.oauthConnectors.azuredevops:return ActivityLogItemSubTypes.AzureDevOps;case this.locale.dataSource.dataSourceType.stripe.name:return ActivityLogItemSubTypes.Stripe;case this.locale.dataSource.dataSourceType.twilio.name:return ActivityLogItemSubTypes.Twilio;case this.locale.dataSource.dataSourceType.webDataSource:case this.locale.dataSource.dataSourceType.webDataSource.toLocaleUpperCase():return ActivityLogItemSubTypes.WebDataSource;case this.locale.dataSource.oauthConnectors.youtube:return ActivityLogItemSubTypes.YouTube;case this.locale.dataSource.oauthConnectors.bitly:return ActivityLogItemSubTypes.Bitly;case this.locale.dataSource.dataSourceType.basecrm.name:return ActivityLogItemSubTypes.BaseCrm;case this.locale.dataSource.dataSourceType.zendesk.name:return ActivityLogItemSubTypes.Zendesk;case this.locale.dataSource.dataSourceType.alchemer.name:return ActivityLogItemSubTypes.SurveyGizmo;case this.locale.dataSource.dataSourceType.pipedrive.name:return ActivityLogItemSubTypes.Pipedrive;case this.locale.dataSource.oauthConnectors.intercom:return ActivityLogItemSubTypes.Intercom;case this.locale.dataSource.dataSourceType.sendible.name:return ActivityLogItemSubTypes.Sendible;case this.locale.dataSource.dataSourceType.github.name:return ActivityLogItemSubTypes.GitHub;case this.locale.dataSource.dataSourceType.toggl.name:return ActivityLogItemSubTypes.Toggl;case this.locale.dataSource.dataSourceType.basecamp3.name:return ActivityLogItemSubTypes.Basecamp3;case this.locale.dataSource.dataSourceType.lighthouse.name:return ActivityLogItemSubTypes.Lighthouse;case this.locale.dataSource.dataSourceType.activeCampaign.name:return ActivityLogItemSubTypes.ActiveCampaign;case this.locale.dataSource.dataSourceType.appFolio.name:return ActivityLogItemSubTypes.AppFolio;case this.locale.dataSource.dataSourceType.freshworksCrm.name:return ActivityLogItemSubTypes.Freshsales;case this.locale.dataSource.dataSourceType.freshservice.name:return ActivityLogItemSubTypes.Freshservice;case this.locale.dataSource.oauthConnectors.buffer:return ActivityLogItemSubTypes.Buffer;case this.locale.dataSource.oauthConnectors.wistia:return ActivityLogItemSubTypes.Wistia;case this.locale.dataSource.oauthConnectors.dropbox:return ActivityLogItemSubTypes.Dropbox;case this.locale.dataSource.oauthConnectors.linkedin:return ActivityLogItemSubTypes.LinkedIn;case this.locale.dataSource.oauthConnectors.googleAdsense:return ActivityLogItemSubTypes.GoogleAdsense;case this.locale.dataSource.dataSourceType.servicenow.name:return ActivityLogItemSubTypes.ServiceNow;case this.locale.dataSource.oauthConnectors.basecamp2:return ActivityLogItemSubTypes.Basecamp2;case this.locale.dataSource.oauthConnectors.infusionsoft:return ActivityLogItemSubTypes.Infusionsoft;case this.locale.dataSource.oauthConnectors.facebook:return ActivityLogItemSubTypes.Facebook;case this.locale.dataSource.oauthConnectors.facebookAds:return ActivityLogItemSubTypes.FacebookAds;case this.locale.dataSource.oauthConnectors.instagram:return ActivityLogItemSubTypes.Instagram;case this.locale.dataSource.oauthConnectors.slack:return ActivityLogItemSubTypes.Slack;case this.locale.dataSource.oauthConnectors.pinterest:return ActivityLogItemSubTypes.Pinterest;case this.locale.dataSource.oauthConnectors.genesyspurecloud:return ActivityLogItemSubTypes.GenesysPureCloud;case this.locale.dataSource.dataSourceType.sparkpost.name:return ActivityLogItemSubTypes.SparkPost;case this.locale.dataSource.dataSourceType.seomonitor.name:return ActivityLogItemSubTypes.SEOmonitor;case this.locale.dataSource.oauthConnectors.eventbrite:return ActivityLogItemSubTypes.EventBrite;case this.locale.dataSource.oauthConnectors.basecamp3:return ActivityLogItemSubTypes.Basecamp3;case this.locale.dataSource.oauthConnectors.hubspot:return ActivityLogItemSubTypes.Hubspot;case this.locale.dataSource.dataSourceType.recurly.name:return ActivityLogItemSubTypes.Recurly;case this.locale.dataSource.dataSourceType.rssfeeds.name:return ActivityLogItemSubTypes.RSSFeeds;case this.locale.dataSource.dataSourceType.appAnnie.name:return ActivityLogItemSubTypes.AppAnnie;case this.locale.dataSource.oauthConnectors.asana:return ActivityLogItemSubTypes.Asana;case this.locale.dataSource.dataSourceType.clubReady.name:return ActivityLogItemSubTypes.ClubReady;case this.locale.dataSource.oauthConnectors.salesforceReports:return ActivityLogItemSubTypes.SalesforceReports;case this.locale.dataSource.dataSourceType.optimizely.name:return ActivityLogItemSubTypes.Optimizely;case this.locale.dataSource.dataSourceType.chargebee.name:return ActivityLogItemSubTypes.ChargeBee;case this.locale.dataSource.oauthConnectors.googleSearchConsole:return ActivityLogItemSubTypes.GoogleSearchConsole;case this.locale.dataSource.dataSourceType.oracle:return ActivityLogItemSubTypes.Oracle;case this.locale.dataSource.oauthConnectors.quickBooksOnline:return ActivityLogItemSubTypes.QuickBooksOnline;case this.locale.dataSource.oauthConnectors.quickBooksPayments:return ActivityLogItemSubTypes.QuickBooksPayments;case this.locale.dataSource.oauthConnectors.microsoftOutlookCalendar:return ActivityLogItemSubTypes.MicrosoftOutlookCalendar;case this.locale.dataSource.oauthConnectors.freshBooks:return ActivityLogItemSubTypes.FreshBooks;case this.locale.dataSource.dataSourceType.redcap.name:return ActivityLogItemSubTypes.REDCap;case this.locale.dataSource.oauthConnectors.podio:return ActivityLogItemSubTypes.Podio;case this.locale.dataSource.oauthConnectors.vimeo:return ActivityLogItemSubTypes.Vimeo;case this.locale.dataSource.dataSourceType.kaizala.name:return ActivityLogItemSubTypes.MicrosoftKaizala;case this.locale.dataSource.oauthConnectors.applicationInsights:return ActivityLogItemSubTypes.ApplicationInsights;case this.locale.dataSource.dataSourceType.azureSearch.name:return ActivityLogItemSubTypes.AzureSearch;case this.locale.dataSource.dataSourceType.prometheus.name:return ActivityLogItemSubTypes.Prometheus;case this.locale.dataSource.dataSourceType.ravendb:return ActivityLogItemSubTypes.RavenDB;case this.locale.dataSource.dataSourceType.proofhub.name:return ActivityLogItemSubTypes.ProofHub;case this.locale.dataSource.dataSourceType.zohoinvoice.name:return ActivityLogItemSubTypes.zohoInvoice;case this.locale.dataSource.dataSourceType.shopify.name:return ActivityLogItemSubTypes.Shopify;case this.locale.dataSource.dataSourceType.zendesksunshine.name:return ActivityLogItemSubTypes.zendeskSunshine;case this.locale.dataSource.dataSourceType.commvault.name:return ActivityLogItemSubTypes.commvault;case this.locale.dataSource.dataSourceType.lessonly.name:return ActivityLogItemSubTypes.Lessonly;case this.locale.dataSource.oauthConnectors.xero:return ActivityLogItemSubTypes.Xero;case this.locale.dataSource.oauthConnectors.zoom:return ActivityLogItemSubTypes.Zoom;case this.locale.dataSource.dataSourceType.nutshell.name:return ActivityLogItemSubTypes.Nutshell;case this.locale.dataSource.dataSourceType.squareUp.name:return ActivityLogItemSubTypes.SquareUp;case this.locale.dataSource.dataSourceType.yelp.name:return ActivityLogItemSubTypes.Yelp;case this.locale.dataSource.dataSourceType.avochato.name:return ActivityLogItemSubTypes.Avochato;case this.locale.dataSource.oauthConnectors.fitbit:return ActivityLogItemSubTypes.Fitbit;case this.locale.dataSource.dataSourceType.zuora.name:return ActivityLogItemSubTypes.Zuora;case this.locale.dataSource.dataSourceType.boldDesk.name:return ActivityLogItemSubTypes.BoldDesk;case this.locale.dataSource.dataSourceType.azureblob.name:return ActivityLogItemSubTypes.AzureBlob;case this.locale.dataSource.dataSourceType.surveymonkey.name:return ActivityLogItemSubTypes.SurveyMonkey;case this.locale.dataSource.dataSourceType.trello.name:return ActivityLogItemSubTypes.Trello;case this.locale.dataSource.dataSourceType.alma.name:return ActivityLogItemSubTypes.Alma;case this.locale.dataSource.oauthConnectors.xeroWorkflowMax:return ActivityLogItemSubTypes.XeroWorkFlowMax;case this.locale.dataSource.oauthConnectors.gohighlevel:return ActivityLogItemSubTypes.GoHighLevel;case this.locale.dataSource.dataSourceType.youScan.name:return ActivityLogItemSubTypes.YouScan;case this.locale.dataSource.dataSourceType.tdengine.name:return ActivityLogItemSubTypes.TDengine}},n.prototype.isLoaded=function(){return this.targetTag&&this.targetTag.length>0},n.prototype.hideChildPanels=function(){this.webDsTemplateInstance.hide()},n.prototype.renderContainer=function(n){this.targetTag=n;var i=this.dsListTag=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%",display:"block",position:"relative"},{id:this.id+"_dataSourceTag"}),t=this.dsTypeTag=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%",display:"none"},{id:this.id+"_dsTypesTag"}),r=this.dsConfigTag=BoldBIDashboard.buildTag("div.bbi-dbrd-configuration-main-container","",{width:"100%",height:"100%",display:"none"},{id:this.id+"_dsConfigTag"});n.append(i);n.append(t);n.append(r);this.renderDataSourcePanel(i);this.isConnectionMode()?(t.css({height:"auto"}),this.getDataForNewReport(t)):this.renderDataSourceTypes(t);this.renderDataSourceConfig(r);this.webDsTemplateInstance.render(this.targetTag);this.wiredEvents();this.pouplateDataSources()},n.prototype.getDataForNewReport=function(n){this.dashboardDesigner.modules.util.doAjaxPost("GET",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.dependencysettings.replace("{environment}",this.dashboardDesigner.model.environment),{action:BoldBIDashboard.DashboardUtil.DesignerAction.PreviewFeatures},{fnction:this.bbdesigner$.proxy(this.setDataForNewReport,this,n)},!0,!0)},n.prototype.setDataForNewReport=function(n,t){t.Status&&(BoldBIDashboard.isNullOrUndefined(t.Data)||this.updateDataAfterFetch(JSON.parse(t.Data)));var i=this.getConnectionDlgInstance();i.openConnectionDialog(n)},n.prototype.updateDataAfterFetch=function(n){this.FillPreviewFeaturesJson(JSON.parse(n.PreviewFeatures))},n.prototype.FillPreviewFeaturesJson=function(n){for(var t=0;t<n.length;t++)if(n[t].FeatureName==="IsAzureApplication"){this.dashboardDesigner.model.isAzureApplication=n[t].Value;break}},n.prototype.renderDataSourcePanel=function(n){var f=this.locale.dataSource,i=BoldBIDashboard.buildTag("div","",{width:"100%",height:"35px",display:"block",overflow:"hidden"},{id:this.id+"_dsHeaderContainer"}),t=BoldBIDashboard.buildTag("div.e-lv e-js e-parentlv bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{width:"100%",display:"block"},{id:this.id+"_dsBodyContainer"}),r=BoldBIDashboard.buildTag("div","",{width:"100%",height:"63px",display:"block",overflow:"hidden",margin:"0 auto","text-align":"center"},{id:this.id+"_dsFooterContainer"}),h=BoldBIDashboard.buildTag("span.bbi-designer-header bbi-designer-cursor",f.headerDataSourcesText,{},{id:this.id+"_dataSourceHeaderText"}),c=BoldBIDashboard.buildTag("span.bbi-designer-header-icon bbi-dbrd-designer-configuration-datasource bbi-designer-cursor","",{display:"inline-block",float:"left",padding:"7px 11px"},{}),s,u;i.append(c);i.append(h);var e=BoldBIDashboard.buildTag("div","",{},{}),o=BoldBIDashboard.buildTag("div.bbi-list-container e-js e-widget bbi-designer-dataset","",{"border-top-width":"1px",padding:"0px 3px"},{id:this.id+"_dsListContainer"}),l=BoldBIDashboard.buildTag("ul.e-list-hdr e-clearall","",{width:"auto",height:"auto"});o.append(l);e.append(o);t.append(e);t.BoldBIDashboardScroller({scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,autoHide:!0,enableTouchScroll:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize});s=BoldBIDashboard.buildTag("div.bbi-designer-new-btn-footer","",{margin:"8px","margin-bottom":"12px"},{id:this.id+"_dataSourceFooterSeperator"});r.append(s);u=BoldBIDashboard.buildTag("button.bbi-designer-content bbi-designer-button bbi-designer-newds-btn bbi-dbrd-designer-hand-cursor",f.newDataSourceText,{},{id:this.id+"_newDataSourceButton",type:"button"});r.append(u);u.BoldBIDashboardButton({width:"160px",showRoundedCorner:!1,contentType:BoldBIDashboard.ContentType.TextAndImage,prefixIcon:"e-icon e-plus",size:"small",click:this.bbdesigner$.proxy(this.newConnectionType,this)});n.append(i);n.append(t);n.append(r);this.renderContextMenu(t)},n.prototype.renderDataSourceTypes=function(n){var e=this.locale.dataSource,t=BoldBIDashboard.buildTag("div.bbi-datasoure-panel-header-wrap","",{},{id:this.id+"_dsTypeHeaderContainer"}),r=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{width:"100%",display:"block",position:"relative","border-top":"1px solid  lightgrey"},{id:this.id+"_dsTypeBodyContainer"}),u=BoldBIDashboard.buildTag("div","",{width:"100%",height:"63px",display:"block",overflow:"hidden",margin:"0 auto","text-align":"center"},{id:this.id+"_dsTypeFooterContainer"}),c=BoldBIDashboard.buildTag("div.bbi-designer-header bbi-designer-cursor bbi-ds-header-text-wrap",e.headerDataSourcesText,{},{id:this.id+"_headerMarkupTag"}),o=BoldBIDashboard.buildTag("div.bbi-designer-back-arrow-wrap","",{},{}),l=BoldBIDashboard.buildTag("div.bbi-designer-header-icon bbi-designer-backarrow bbi-dbrd-icon-background-theme","",{},{id:this.id+"_headerback"}),f;o.append(l);t.append(o);t.append(c);var s=BoldBIDashboard.buildTag("div","",{},{}),i=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_dataType_container"}),h=this.connectionTypeTag=BoldBIDashboard.buildTag("div","",{width:"100%",display:"block",height:"100%",padding:"10px 0px"},{}),a=BoldBIDashboard.buildTag("div.bbi-designer-new-btn-footer","",{margin:"8px","margin-bottom":"15px"},{});u.append(a);f=BoldBIDashboard.buildTag("button.bbi-designer-content bbi-designer-button bbi-designer-dsconnect-btn bbi-dbrd-designer-hand-cursor",e.connectDataSourceBtnText,{},{id:this.id+"_connectDataSourceButton",type:"button"});u.append(f);f.BoldBIDashboardButton({width:"160px",showRoundedCorner:!1,contentType:BoldBIDashboard.ContentType.TextOnly,size:"small",click:this.bbdesigner$.proxy(this.connectQueryDesigner,this)});!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.mode)&&this.isConnectionMode()&&t.addClass("bbi-mode-connection");n.append(t);n.append(r);n.append(u);s.append(i);r.append(s);this.renderDataChooser(i);this.renderExistingData(i);i.append(h);this.renderDataSourceSearchOptions(t);this.renderGroupItems(h);r.BoldBIDashboardScroller({scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,autoHide:!0,enableTouchScroll:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize})},n.prototype.categorizeConnectors=function(n){this.connectorType=n.model.value;this.renderDsTypeList()},n.prototype.renderDataSourceSearchOptions=function(n){var r=this,o="<div style='padding:10px 0px;height:49px;box-sizing:border-box;'><div class='bbi-dbrd-designer-datasource-category-container'><input type='text' id='"+this.id+"_datasource_list_category_ddl'/><\/div><div class='bbi-dbrd-designer-datasource-search-container'><input type='text' id='"+this.id+"_datasource_list_search' class='bbi-autocomplete bbi-dbrd-designer-font bbi-dbrd-designer-search-box e-js e-input' placeholder='"+this.dataSourceLocale.searchDataSource+"'/><span id='"+this.id+"_datasource_list_search_icon' class='bbi-dbrd-designer-icon bbi-dbrd-designer-search'><\/span><\/div><\/div>",u=this.bbdesigner$(o),f,i,e;if(u.find("#"+this.id+"_datasource_list_category_ddl").BoldBIDashboardDropDownList({cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control bbi-dbrd-datasource-list-category-dropdownlist",dataSource:this.getDataSourceCategories(),change:this.bbdesigner$.proxy(this.onCategorySelectionChange,this),selectedIndex:0,popupHeight:"415px",height:"29px"}),n.append(u),!this.dashboardDesigner.model.isAzureApplication&&!this.dashboardDesigner.model.IsEmbed){f=BoldBIDashboard.buildTag("span.bbi-dbrd-datasource-list-category-chiplist","",{padding:"7px 0px"},{id:"chip"});n.append(f);this.chiplist=new ejdashboard.buttons.ChipList({chips:["Basic","Advanced"],cssClass:"e-outline ",selection:"Single",selectedChips:[0]});this.chiplist.appendTo("#chip");var t=BoldBIDashboard.buildTag("span.bbi-dbrd-etlinfo-content","",{"font-weight":"normal","line-height":"normal","letter-spacing":".3px",width:"100 %",color:"var(--designer-ds-list-primary-text-normal-color)"},{}),s=BoldBIDashboard.buildTag("a","Learn more",{"text-decoration":"none",color:"#0565FF","margin-left":"10px"},{href:"https://support.boldbi.com/kb/article/14886/difference-between-new-bold-etl-based-and-legacy-connectors-in-bold-bi",target:"_blank"}),h=BoldBIDashboard.buildTag("span.bbi-dbrd-designer-etl-learnmore-link-icon","",{},{});s.append(h);this.advancedInfoContent='Recommended for production. We can set up advanced workflows. Please contact us through <a href="https://support.boldbi.com/support/tickets/create" target="_blank" style="color: #0565FF;text-decoration: none;margin-right:10px;"> support<span class=\'bbi-dbrd-designer-etl-learnmore-link-icon\'><\/span><\/a><span style="padding: 0.9px; background: #CBD2E0;"><\/span>\n                <a href = "https://support.boldbi.com/kb/article/14886/difference-between-new-bold-etl-based-and-legacy-connectors-in-bold-bi" target = "_blank" style = "text-decoration: none; color: #0565FF; margin-left: 10px;" >Learn more<\/a>';i=BoldBIDashboard.buildTag("div","",{"font-size":"12px",display:"inline-flex","align-items":"center",gap:"3px",color:"var(--designer-ds-list-primary-text-normal-color)"},{});e=BoldBIDashboard.buildTag("div.bbi-dbrd-info-icon","",{},{});this.basicInfoContent='<span>Great for quick prototyping.<\/span><a href = "https://support.boldbi.com/kb/article/14886/difference-between-new-bold-etl-based-and-legacy-connectors-in-bold-bi"\n            target = "_blank" style = "text-decoration: none; color: #0565FF; margin-left: 10px;">Learn more<\/a>';i.append(e);i.append(t);t.html(this.basicInfoContent);n.append(i);this.chiplist.element.addEventListener("click",function(n){for(var i=n.target,u;i&&!i.classList.contains("e-chip");)i=i.parentElement;i&&(u=i.classList.contains("e-active"),u||i.textContent=="Basic"||i.classList.add("e-active"),r.categorizeConnectors({model:{value:i.textContent}}),i.textContent=="Advanced"?t.html(r.advancedInfoContent):t.html(r.basicInfoContent))})}},n.prototype.onCategorySelectionChange=function(n){this.selectedCategory=n.model.dataSource[n.itemId].id;this.generateDataSourceTypes(this.targetTag.find("#"+this.id+"_dsTypeList").html(""));this.scrollerRefresh(this.targetTag.find("#"+this.id+"_dsTypeBodyContainer"))},n.prototype.renderRadioButtonGroup=function(n,t,i,r,u,f,e){var l=this.bbdesigner$("<tr/>"),h=this.bbdesigner$("<table id='"+n+"'/>"),o=this.bbdesigner$("<tr/>"),s=this.bbdesigner$("<td unselectable='on'/>"),v=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label",i,{},{}),c,a;s.append(v);o.append(s);h.append(o);o=this.bbdesigner$("<tr/>");s=this.bbdesigner$("<td unselectable='on' />");o.append(s);h.append(o);l.append(h);u.append(l);c=BoldBIDashboard.buildTag("div","",{},{id:"_btn_grp"});s.append(c);a={callBackInstance:e,callBackMethod:f,groupName:r,triggerOnCodeUpdate:!0,labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[t[0],t[1]]};this.radioButtonMode=new BoldBIDashboard.Dashboard.RadioButton(a,c)},n.prototype.onDataSourceSearchTextFocusIn=function(n){var t=this.bbdesigner$(n.currentTarget.parentElement);t.addClass("e-focus")},n.prototype.onDataSourceSearchTextFocusOut=function(n){var t=this.bbdesigner$(n.currentTarget.parentElement);t.hasClass("e-focus")&&t.removeClass("e-focus")},n.prototype.resetDataSourceCategory=function(){if(this.selectedCategory!==BoldBIDashboard.DataSourceCategory.all){this.selectedCategory=BoldBIDashboard.DataSourceCategory.all;var n=this.targetTag.find("#"+this.id+"_datasource_list_category_ddl").data("BoldBIDashboardDropDownList");n.model&&n.setModel({selectedIndex:0})}},n.prototype.onDataSourceSearchKeyPress=function(n){this.dataSourceSearchTimer!==-1&&(clearTimeout(this.dataSourceSearchTimer),this.dataSourceSearchTimer=-1);var t=this;this.dataSourceSearchTimer=setTimeout(function(){var i=t.bbdesigner$(n.currentTarget);t.searchText=i.val();t.searchText.trim()===""?i.siblings(".bbi-dbrd-designer-icon").removeClass("bbi-dbrd-designer-close").addClass("bbi-dbrd-designer-search"):i.siblings(".bbi-dbrd-designer-icon").addClass("bbi-dbrd-designer-close").removeClass("bbi-dbrd-designer-search");t.renderDsTypeList()},500)},n.prototype.renderDsTypeList=function(){this.generateDataSourceTypes(this.targetTag.find("#"+this.id+"_dsTypeList").html(""));this.scrollerRefresh(this.targetTag.find("#"+this.id+"_dsTypeBodyContainer"))},n.prototype.onDataSourceClearIconClick=function(n){var t=this.bbdesigner$(n.currentTarget);t.removeClass("bbi-dbrd-designer-close").addClass("bbi-dbrd-designer-search");this.searchText="";t.siblings(".bbi-autocomplete").val(this.searchText);this.renderDsTypeList()},n.prototype.getDataSourceCategories=function(){return[{text:this.dataSourceLocale.category.all,id:BoldBIDashboard.DataSourceCategory.all}].concat(this.sortCollection([{text:this.dataSourceLocale.category.cloudStorage,id:BoldBIDashboard.DataSourceCategory.cloudStorage},{text:this.dataSourceLocale.category.salesCrm,id:BoldBIDashboard.DataSourceCategory.salesCrm},{text:this.dataSourceLocale.category.socialMedia,id:BoldBIDashboard.DataSourceCategory.socialMedia},{text:this.dataSourceLocale.category.webAnalytics,id:BoldBIDashboard.DataSourceCategory.webAnalytics},{text:this.dataSourceLocale.category.learning,id:BoldBIDashboard.DataSourceCategory.learning},{text:this.dataSourceLocale.category.webManagement,id:BoldBIDashboard.DataSourceCategory.webManagement},{text:this.dataSourceLocale.category.digitalMarketing,id:BoldBIDashboard.DataSourceCategory.digitalMarketing},{text:this.dataSourceLocale.category.marketing,id:BoldBIDashboard.DataSourceCategory.marketing},{text:this.dataSourceLocale.category.advertising,id:BoldBIDashboard.DataSourceCategory.advertising},{text:this.dataSourceLocale.category.finance,id:BoldBIDashboard.DataSourceCategory.finance},{text:this.dataSourceLocale.category.management,id:BoldBIDashboard.DataSourceCategory.management},{text:this.dataSourceLocale.category.projectManagement,id:BoldBIDashboard.DataSourceCategory.projectManagement},{text:this.dataSourceLocale.category.fitnessManagement,id:BoldBIDashboard.DataSourceCategory.fitnessManagement},{text:this.dataSourceLocale.category.support,id:BoldBIDashboard.DataSourceCategory.support},{text:this.dataSourceLocale.category.sql,id:BoldBIDashboard.DataSourceCategory.sql},{text:this.dataSourceLocale.category.nosql,id:BoldBIDashboard.DataSourceCategory.nosql},{text:this.dataSourceLocale.category.survey,id:BoldBIDashboard.DataSourceCategory.survey},{text:this.dataSourceLocale.category.files,id:BoldBIDashboard.DataSourceCategory.files},{text:this.dataSourceLocale.category.rest,id:BoldBIDashboard.DataSourceCategory.rest},{text:this.dataSourceLocale.category.emailCompaign,id:BoldBIDashboard.DataSourceCategory.emailCompaign},{text:this.dataSourceLocale.category.forms,id:BoldBIDashboard.DataSourceCategory.forms},{text:this.dataSourceLocale.category.mobileAnalytics,id:BoldBIDashboard.DataSourceCategory.mobileAnalytics},{text:this.dataSourceLocale.category.appanalytics,id:BoldBIDashboard.DataSourceCategory.appanalytics}],"text"))},n.prototype.sortCollection=function(n,t){return n.sort(function(n,i){return n[t]<i[t]?-1:n[t]>i[t]?1:0})},n.prototype.filterCollection=function(n,t,i,r){return n.filter(function(n){return r?n[t]===i:BoldBIDashboard.DashboardUtil.contains(n[t],i,!0)})},n.prototype.renderDataChooser=function(n){var t=this.dataChooserTag=BoldBIDashboard.buildTag("div","",{width:"100%",float:"left",clear:"none",display:"none","box-sizing":"border-box",padding:"10px 10px"},{}),i=BoldBIDashboard.buildTag("div","",{width:"85px",display:"inline-block"},{}),r=BoldBIDashboard.buildTag("div","",{width:"85px",display:"inline-block"},{}),u=BoldBIDashboard.buildTag("input","",{},{type:"radio",name:"datachooser",id:this.id+"_data_existing"}),f=BoldBIDashboard.buildTag("input","",{},{type:"radio",name:"datachooser",id:this.id+"_data_new"});i.append(u);r.append(f);t.append(i).append(r);n.append(t);u.BoldBIDashboardRadioButton({checked:!1,change:this.bbdesigner$.proxy(this.dataChooser,this),text:"Existing",cssClass:"bbi-designer-radiobtn"});f.BoldBIDashboardRadioButton({checked:!0,change:this.bbdesigner$.proxy(this.dataChooser,this),text:"Create New",cssClass:"bbi-designer-radiobtn"})},n.prototype.renderExistingData=function(n){var r=this.selectDataTag=BoldBIDashboard.buildTag("div","",{width:"100%",float:"left",clear:"none","box-sizing":"border-box",padding:"0px 10px"},{}),t,s,i;n.append(r);t=BoldBIDashboard.buildTag("table.bbi-designer-existing-tbl","",{width:"100%"},{unselectable:"on"});r.append(t);var u=this.bbdesigner$("<tr><\/tr>"),f=this.bbdesigner$("<td><\/td>"),e=this.bbdesigner$("<tr><\/tr>"),o=this.bbdesigner$("<td><\/td>");t.append(u);u.append(f);t.append(e);e.append(o);s=BoldBIDashboard.buildTag("span.bbi-designer-fontfamily","Select the DataSource",{"font-size":"13px","font-weight":"600"},{});f.append(s);i=BoldBIDashboard.buildTag("input","",{},{id:this.id,value:""});o.append(i);i.BoldBIDashboardDropDownList({dataSource:[],fields:{text:"name"},width:"100%",cssClass:"bbi-designer-dataset-selection bbi-dbrd-control"});this.ejDataSourceDwn=i.data("BoldBIDashboardDropDownList")},n.prototype.renderDataSourceConfig=function(n){var c=this.locale.dataSource,i=BoldBIDashboard.buildTag("div","",{width:"100%",height:"32px",display:"block",overflow:"hidden"},{id:this.id+"_dsConfigHeaderContainer"}),r=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-config-container","",{},{id:this.id+"_dsConfig_BodyContainer"}),f=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller e-dbrd-designer-dsscroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3 bbi-dbrd-designer-body-tag","",{width:"100%",display:"block",position:"relative"},{id:this.id+"_dsConfigBodyContainer"}),l=BoldBIDashboard.buildTag("div","",{},{}),t=BoldBIDashboard.buildTag("div.bbi-dbrd-config-container","",{},{id:this.id+"_dsConfigContainer"}),b=BoldBIDashboard.buildTag("span.bbi-designer-header bbi-designer-cursor",c.headerNewConnectionText,{overflow:"hidden",display:"inline-block",padding:"8.5px 7px 2px 0px"},{id:this.id+"_datasourceHeaderMarkupTag"}),k=BoldBIDashboard.buildTag("span.bbi-designer-header-icon bbi-dbrd-designer-configuration-datasource bbi-designer-cursor","",{padding:"7px 11px"},{}),h,y,p,w;i.append(k);i.append(b);var a=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%",display:"table-row",overflow:"hidden"},{id:this.id+"_basicPanel"}),e=BoldBIDashboard.buildTag("div.bbi-designer-dsheader","",{width:"100%",height:"100%",display:"table-row",overflow:"auto","margin-left":"6px"},{id:this.id+"_headerPane"}),o=BoldBIDashboard.buildTag("table","",{width:"100%","margin-left":"6px"},{unselectable:"on",id:this.id+"_sql_datasource"});this.configTable=BoldBIDashboard.buildTag("div","",{width:"100%",height:"100%",display:"table-row"},{id:this.id+"_configurePane"});var s=BoldBIDashboard.buildTag("div.bbi-designer-switch-label bbi-designer-header-icon","",{width:"100%",height:"20px",display:"none"},{id:this.id+"_switchCont"}),d=BoldBIDashboard.buildTag("span",c.advanceOptionText,{},{id:this.id+"_panelSwitch"}),g=BoldBIDashboard.buildTag("span.bbi-designer-rightarrow bbi-designer-switchind-icon","",{},{});this.titleConfig=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_datasource_Header","class":"bbi-dbrd-designer-webds-template-wrapper"});this.isConnectionMode()?n.append(this.titleConfig):e.append(this.titleConfig);e.append(o);a.append(e,this.configTable);s.append(d);s.append(g);r.append(f);r.append(s);f.append(l);l.append(t);t.append(a);f.BoldBIDashboardScroller({scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,autoHide:!0,enableTouchScroll:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize});var nt=this.id+"_datasource_dsname",u=BoldBIDashboard.buildTag("div .bbi-dashboarddesigner-dsname-validationicon","",{},{id:nt+"_indicator_div"}),tt=BoldBIDashboard.buildTag("div.bbi-designer-tile-content bbi-designer-datasource-description-maxchar",this.locale.saveDatasourceDialog.descriptionMaxLengthText,{float:"left"},{id:this.id+"_description_maxchar_exceed"});if(n.append(i),n.append(r),this.isConnectionMode())i.css({visibility:"hidden",height:"0px"});else{var v=this.getConfigurationFooter(),it=v.find(".bbi-dbrd-connection-disclaimer-msg"),rt=this.locale.dataSource.customerConfirmation;it.BoldBIDashboardTooltip({content:rt,cssClass:"bbi-defaultIndex-template",isBalloon:!0,collision:BoldBIDashboard.Tooltip.Collision.FlipFit,trigger:BoldBIDashboard.Tooltip.Trigger.Click,showRoundedCorner:!0,showShadow:!0});n.append(v)}BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.designerPanel)||(h=this.dashboardDesigner.designerPanel);y=this.locale.nameValidationMessages;this.renderTextBoxItem(this.locale.dataSource.datasourceNameLabelTxt,this.id+"_datasource_dsname",!1,o,429,null,null,null,y.datasourceNameWaterMarkTxt);this.targetTag.find("#"+this.id+"_datasource_dsname").css("margin-left","-2px");this.targetTag.find("#"+this.id+"_datasource_dsname").addClass("bbi-dbrd-datasource-dsname");this.targetTag.find("#"+this.id+"_datasource_dsname_td").append(u);this.targetTag.find("#"+this.id+"_datasource_dsname_td").css("position","relative");BoldBIDashboard.isNullOrUndefined(h)||h.appendSpinningWidget(u,null);u.find(".bbi-background-waiting-popup").css("background-color","");p=u.find(".bbi-dashboard-spinning");p.css({width:"35px",height:"35px"});this.dataSourceName=t.find("#"+this.id+"_datasource_dsname");r.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup bbi-designer-loader",template:this.dashboardDesigner.getWaitingPopupTemplate()});w=this.locale.dataSource;this.renderTextBoxItem(this.locale.dataSource.datasourceDescriptionLabelTxt,this.id+"_datasource_description",!1,o,429,null,null,null,w.datasourceDescriptionWaterMarkTxt);this.targetTag.find("#"+this.id+"_datasource_description").css("margin-left","-2px");this.datasourceDescription=t.find("#"+this.id+"_datasource_description");t.find("#"+this.id+"_datasource_description_td").append(tt).css("float","left");this.datasourceDescription.attr({maxlength:"1024"})},n.prototype.getConfigurationFooter=function(){var n=BoldBIDashboard.buildTag("div","",{width:"100%",height:this.dashboardDesigner.modules.util.isEnvironmentOnPremise()?"62px":"80px",display:"block",overflow:"hidden",margin:"0 auto","text-align":"center"},{id:this.id+"_dsConfigFooterContainer"}),u=BoldBIDashboard.buildTag("div.bbi-designer-new-btn-footer","",{margin:"8px","margin-bottom":"9px"},{id:this.id+"_dataSourceConfigFooterSeperator"}),t=BoldBIDashboard.buildTag("div.bbi-dbrd-connection-disclaimer-container","",{display:this.dashboardDesigner.modules.util.isEnvironmentOnPremise()?"none":"block"},{id:this.id+"_disclaimer_Container"}),f=BoldBIDashboard.buildTag("div.bbi-dbrd-connection-disclaimer-text1","By connecting you agree to these",{},{id:this.id+"_disclaimerText"}),e=BoldBIDashboard.buildTag("span.connection-disclaimer-message bbi-dbrd-connection-disclaimer-msg","terms",{},{id:this.id+"_connection_disclaimer_message"}),i=BoldBIDashboard.buildTag("div","",{height:"100%",display:"block","padding-left":"10px",overflow:"none",float:"right"},{}),r=BoldBIDashboard.buildTag("div","",{height:"100%",display:"block",padding:"0 10px",overflow:"none",float:"right"},{}),o=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-secondary",this.locale.dataSource.cancelButtonText,{},{id:this.id+"_btn_back",type:"button"});return r.append(o),this.connectButton=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary",this.locale.dataSource.connectButtonText,{},{id:this.id+"_btn_connect",type:"button"}),i.append(this.connectButton),n.append(u),n.append(t),t.append(f,e),n.append(r,i),n},n.prototype.headerMenuClick=function(n){n.text==="Data"&&BoldBIDashboard.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataList)},n.prototype.validateDsNameField=function(n){var t=this.bbdesigner$(n.currentTarget).attr("id"),i,r,u;this.isConnectBtnClick=!1;i=this.dashboardDesigner.element.find("#"+t+"_error_icon_td");(n.keyCode>=48&&n.keyCode<=57||n.keyCode>=65&&n.keyCode<=90||n.keyCode>=186&&n.keyCode<=191||n.keyCode>=219&&n.keyCode<=222||n.keyCode===8||n.keyCode===9||n.keyCode===13||n.keyCode===46||n.keyCode===16)&&this.datasourceNameFieldText!==this.targetTag.find("#"+t).val()&&(BoldBIDashboard.DashboardUtil.showErrIndictor(i,!1),this.isDsNameWaitingPop=!0,r=this.id+"_datasource_dsname",this.datasourceNameFieldText=this.targetTag.find("#"+r).val().trim(),this.clearRequestTimeout(),u=this.dashboardDesigner.modules.util.isDataSourceNameExist(this.id,this.datasourceNameFieldText),u&&this.validateDataSourceNameExist())},n.prototype.clearRequestTimeout=function(){this.setTimeForDSNameValidation!=null&&(clearTimeout(this.setTimeForDSNameValidation),this.setTimeForDSNameValidation=null);BoldBIDashboard.isNullOrUndefined(this.ajaxPostForDSNameValidation)||(this.ajaxPostForDSNameValidation.abort(),this.ajaxPostForDSNameValidation=null)},n.prototype.onDatasourceDescriptionTextBox=function(n){var t=this.bbdesigner$(n.currentTarget).attr("id");this.datasourceDescriptionText=this.targetTag.find("#"+t).val().trim()},n.prototype.datasourceNameFieldTextChange=function(n){var t=this.bbdesigner$(n.currentTarget).attr("id");this.isConnectBtnClick=!1;this.datasourceNameFieldText!==this.targetTag.find("#"+t).val().trim()&&(this.datasourceNameFieldText=this.targetTag.find("#"+t).val().trim(),this.showValidationMsg(t,!1),this.validateDataSourceNameExist())},n.prototype.dataChooser=function(n){n.isInteraction&&this.dataTypeSwitcher(this.targetTag.find("#"+this.id+"_data_new").data("BoldBIDashboardRadioButton").model.checked)},n.prototype.setDataSourceToDd=function(){var t,n;if(this.datasources&&this.datasources.length>0){for(t=[],n=0;n<this.datasources.length;n++)t.push({name:this.datasources[n].Name});this.ejDataSourceDwn.setModel({dataSource:t})}},n.prototype.resetDataSourceList=function(){this.searchText.trim()!==""?(this.searchText="",this.targetTag.find(".bbi-dbrd-designer-datasource-search-container .bbi-dbrd-designer-icon").addClass("e-dbed-designer-search").removeClass("bbi-dbrd-designer-close"),this.targetTag.find(".bbi-dbrd-designer-datasource-search-container .bbi-autocomplete").val(this.searchText),this.resetDataSourceCategory(),this.generateDataSourceTypes(this.targetTag.find("#"+this.id+"_dsTypeList").html(""))):this.selectedCategory!==BoldBIDashboard.DataSourceCategory.all&&(this.resetDataSourceCategory(),this.generateDataSourceTypes(this.targetTag.find("#"+this.id+"_dsTypeList").html("")));this.scrollerRefresh(this.targetTag.find("#"+this.id+"_dsTypeBodyContainer"))},n.prototype.enableDataChooser=function(){this.datasources&&this.datasources.length>0&&!this.isDataPanel?(this.selectDataTag.css("display","none"),this.connectionTypeTag.css("display","block"),this.targetTag.find("#"+this.id+"_dsTypeFooterContainer").css("display","none"),this.targetTag.find("#"+this.id+"_data_new").data("BoldBIDashboardRadioButton").setModel({checked:!0}),this.setDataSourceToDd()):this.dashboardDesigner.model.mode!==BoldBIDashboard.Designer.mode.connection&&(this.dataChooserTag.css("display","none"),this.selectDataTag.css("display","none"),this.connectionTypeTag.css("display","block"),this.targetTag.find("#"+this.id+"_dsTypeFooterContainer").css("display","none"));this.targetTag.find(".bbi-dbrd-designer-search-box").focus();this.targetTag.find(".bbi-dbrd-designer-datasource-search-container .bbi-dbrd-designer-icon").addClass("bbi-dbrd-designer-search").removeClass("bbi-dbrd-designer-close")},n.prototype.dataTypeSwitcher=function(n){n?(this.selectDataTag.css("display","none"),this.connectionTypeTag.css("display","block"),this.targetTag.find("#"+this.id+"_dsTypeFooterContainer").css("display","none")):(this.selectDataTag.css("display","block"),this.connectionTypeTag.css("display","none"),this.targetTag.find("#"+this.id+"_dsTypeFooterContainer").css("display","block"));this.updateDSTypeContainer()},n.prototype.onChange=function(n){this.isCsvFirstRowHeader=n.model.checked},n.prototype.renderDropDownItem=function(n,t,i,r,u,f,e,o){var c,l,s,a,v,h;n==="Separator"&&this.renderCheckboxItem(this.locale.dataSource.considerFirstRowHeader,t+"_row_header",i,this.onChange,this,"left");c=this.bbdesigner$("<tr id="+t+"_tr/>");l=this.bbdesigner$("<td unselectable='on'/>");c.append(l);i.append(c);s=this.bbdesigner$("<table unselectable='on'><\/table>");l.append(s);s.append(this.getRowCaption(n,t));a=this.bbdesigner$("<tr><\/tr>");v=BoldBIDashboard.buildTag("td","",{},{colspan:"2",id:t+"_td"});s.append(a);a.append(v);h=BoldBIDashboard.buildTag("input","",{},{id:t,value:"",spellcheck:"false"});v.append(h);h.BoldBIDashboardDropDownList({width:"450px",dataSource:r,fields:u,change:this.bbdesigner$.proxy(e,o),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control bbi-label-control",showRoundedCorner:!0});f&&h.data("BoldBIDashboardDropDownList").setModel({selectedIndex:f})},n.prototype.renderDatePicker=function(n,t,i,r,u,f,e,o){var h,c,s,l,a,v;f===void 0&&(f=new Date);h=BoldBIDashboard.buildTag("tr","",{},{id:t+"_tr"});c=BoldBIDashboard.buildTag("td","",{},{unselectable:"on"});h.append(c);i.append(h);s=BoldBIDashboard.buildTag("table","",{},{unselectable:"on"});c.append(s);s.append(this.getRowCaption(n,t));l=BoldBIDashboard.buildTag("tr","",{},{});a=BoldBIDashboard.buildTag("td","",{},{colspan:"2",id:t+"_td"});s.append(l);l.append(a);v=BoldBIDashboard.buildTag("input","",{},{id:t,value:"",spellcheck:"false"});a.append(v);v.BoldBIDashboardDatePicker({dateFormat:"yyyy-MM-dd",locale:"en-US",maxDate:u,minDate:r,showRoundedCorner:!0,value:f,select:this.bbdesigner$.proxy(e,o),change:this.bbdesigner$.proxy(e,o),width:"439px"})},n.prototype.renderScheduleItem=function(n,t,i){var f=this.bbdesigner$("<tr id="+t+"_tr/>"),e=this.bbdesigner$("<td unselectable='on'/>"),r;f.append(e);i.append(f);r=this.bbdesigner$("<table unselectable='on'><\/table>");e.append(r);r.append(this.getRowCaption(n,t));this.bbdesigner$(r).find("td").first().addClass("bbi-dbrd-refresh-schedule-container").css({width:"436px"});var o=this.bbdesigner$("<tr><\/tr>"),u=BoldBIDashboard.buildTag("td.bbi-dbrd-schedule-message-container","",{},{}),s=BoldBIDashboard.buildTag("span.bbi-datasource-schedule-summary-text",this.locale.dataSource.noScheduleCreated,{},{}),h=BoldBIDashboard.buildTag("button.bbi-dbrd-datasource-schedule bbi-dbrd-btn-small bbi-dbrd-btn-secondary",this.locale.dataSource.refreshSettingsText,{},{type:"button"});r.append(o);o.append(u);u.append(s);u.append(h)},n.prototype.getRowCaption=function(n,t){var i=BoldBIDashboard.buildTag("tr","",{}),f=BoldBIDashboard.buildTag("td","",{}),o=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label",n,{},{}),r=BoldBIDashboard.buildTag("span.bbi-dbrd-info-icon","",{},{}),e,u;return n!=="Server name"||this.dashboardDesigner.modules.util.isEnvironmentOnPremise()?r.css("display","none"):(e=this.dashboardDesigner.isHelpLinkHidden()?"":"<a target='_blank' href='https://help.boldbi.com/cloud-bi/working-with-data-source/white-list-ip-address-bold-bi-cloud'>"+this.dataSourceLocale.serverinfolink+"<\/a>",r.BoldBIDashboardTooltip({content:"<span>"+this.dataSourceLocale.servernametooltipinfo+e+"<\/span>",cssClass:"bbi-defaultIndex-template",isBalloon:!0,collision:BoldBIDashboard.Tooltip.Collision.FlipFit,trigger:BoldBIDashboard.Tooltip.Trigger.Click,showRoundedCorner:!0,showShadow:!0})),f.append(o,r),i.append(f),u=BoldBIDashboard.buildTag("td","",{},{id:t+"_error_icon_td"}),this.dashboardDesigner.modules.util.renderErrIndictor(u,this.id),i.append(u),i},n.prototype.renderTextArea=function(n,t,i,r){var o=this.bbdesigner$("<tr id="+t+"_tr/>"),s=this.bbdesigner$("<td unselectable='on'/>"),u,f,e,h;o.append(s);i.append(o);u=this.bbdesigner$("<table unselectable='on'><\/table>");s.append(u);u.append(this.getRowCaption(n,t));f=this.bbdesigner$("<tr><\/tr>");e=BoldBIDashboard.buildTag("td","",{},{colspan:"2",id:t+"_td"});u.append(f);f.append(e);h=BoldBIDashboard.buildTag("textarea.e-textarea bbi-designer-constr-textarea bbi-designer-textarea",r,{},{id:t,type:"textarea",spellcheck:"false"});e.append(h)},n.prototype.renderNumericItem=function(n,t,i,r,u,f,e,o,s,h,c){var p=this.bbdesigner$("<tr id="+t+"_tr/>"),w=this.bbdesigner$("<td unselectable='on'/>"),l,v,y,a;p.append(w);i.append(p);l=this.bbdesigner$("<table unselectable='on'><\/table>");w.append(l);l.append(this.getRowCaption(n,t));v=this.bbdesigner$("<tr><\/tr>");y=BoldBIDashboard.buildTag("td","",{},{colspan:"2",id:t+"_td"});l.append(v);v.append(y);a=BoldBIDashboard.buildTag("input","",{},{id:t,value:"",spellcheck:"false"});y.append(a);e?a.ejNumericTextbox({width:o,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label",watermarkText:"",change:this.bbdesigner$.proxy(r,u,f),showRoundedCorner:!0,showEmptyResultText:!1,showSpinButton:s,groupSeparator:"",maxValue:c?c:Number.MAX_VALUE,minValue:h?h:Number.MIN_VALUE}):a.ejNumericTextbox({width:o,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label",watermarkText:"",change:this.bbdesigner$.proxy(r,u,f),showRoundedCorner:!0,showEmptyResultText:!1,showSpinButton:s,maxValue:c?c:Number.MAX_VALUE,minValue:h?h:Number.MIN_VALUE})},n.prototype.renderTextBoxItem=function(n,t,i,r,u,f,e,o,s){var v=this.bbdesigner$("<tr id="+t+"_tr/>"),y=this.bbdesigner$("<td unselectable='on'/>"),h,c,l,a;v.append(y);r.append(v);h=this.bbdesigner$("<table unselectable='on'><\/table>");y.append(h);h.append(this.getRowCaption(n,t));c=this.bbdesigner$("<tr><\/tr>");l=BoldBIDashboard.buildTag("td","",{},{colspan:"2",id:t+"_td"});h.append(c);c.append(l);a=BoldBIDashboard.buildTag("input.e-textbox e-designer-datasource-textbox","",{height:"24px",width:u+"px"},{id:t,type:i?"password":"text",value:f,spellcheck:"false",placeholder:BoldBIDashboard.isNullOrUndefined(s)?null:s});l.append(a);e&&a.bind("focusout",this.bbdesigner$.proxy(e,o))},n.prototype.switchModelInfo=function(n){return{callBackInstance:this,callBackMethod:"onSwitcherChange",checkState:!1,optionalArgs:n,name:"dyn-con-config-switch"}},n.prototype.renderDynamicConnectionString=function(n,t,i,r,u){var s=this.switchModelInfo(t);this.dynamicConnecionInstance=u;var f=BoldBIDashboard.buildTag("div.bbi-dbrd-dyn-con-wrapper","",{},{id:t+"_dynamic_connectionstring_tag"}),h=BoldBIDashboard.buildTag("span.bbi-designer-label editLabel bbi-designer-title-label",n,{}),e=BoldBIDashboard.buildTag("div.bbi-dbrd-dyn-con-switch-wrap","",{},{id:t+"_dynamic_connection_switch"}),c="<button type='button' style='display: none;' class = 'bbi-dbrd-btn-secondary  bbi-dbrd-btn-small bbi-dynamic-connection-configurebtn' id='"+t+"dyn_conn_config_configure_btn'>"+this.locale.dialogOptions.configureButtonText+"<\/button>",o=BoldBIDashboard.buildTag("div.bbi-dbrd-dyn-con-configure-btn-wrap",c,{},{id:t+"_div_connection_configure"}),l=BoldBIDashboard.buildTag("div.bbi-dbrd-dyn-con-error-msg bbi-designer-error-icon bbi-designer-errorinfo e-error-tip bbi-dbrd-designer-hoverable","",{},{"data-tooltip":this.locale.alertWindowMesages.dynamicConnectionValidationMessage});f.append(h,this.getDynamicConnectionInfoIcon(),e,o,l);r.append(f);o.on("click","#"+t+"dyn_conn_config_configure_btn",this.bbdesigner$.proxy(this.renderDynamicConnStringWindow,this,i,"saveDynamicConfigurationInfo"));new BoldBIDashboard.Dashboard.SwitchButton(s,e)},n.prototype.getDynamicConnectionInfoIcon=function(){var n=this.dashboardDesigner.isHelpLinkHidden()?"":"<a href='"+this.dashboardDesigner.getHelpDocLink("DynamicConnectionString")+"'  target='_blank' class ='bbi-dbrd-dyn-con-info-icon bbi-dbrd-designer-icon bbi-dbrd-designer-hoverable' data-tooltip =\""+this.dataSourceLocale.dynamicConnectionStringTooltipInfo+'"><\/a>';return"<div class ='bbi-dbrd-dyn-con-help-info-icon'>"+n+"<span class ='bbi-designer-label editLabel bbi-designer-title-label'>:<\/span><\/div>"},n.prototype.onSwitcherChange=function(n){this.showHideDynamicConnectionConfigError(n.optionalArgs,!0);n.args.checked?this.dashboardDesigner.element.find("#"+n.optionalArgs+"dyn_conn_config_configure_btn").show():this.dashboardDesigner.element.find("#"+n.optionalArgs+"dyn_conn_config_configure_btn").hide()},n.prototype.getDynamicConnectionSwitch=function(n){return this.dashboardDesigner.element.find("#"+n+"_dynamic_connectionstring_tag.bbi-dbrd-dyn-con-wrapper .bbi-dbrd-dyn-con-switch-wrap").data("DesignerPropertyWidget")},n.prototype.renderDynamicConnStringWindow=function(n,t){BoldBIDashboard.isNullOrUndefined(this.dynamicConnecionInstance)||(this.dashboardDesigner.element=this.dynamicConnecionInstance,this.dashboardDesigner._id=this.dynamicConnecionInstance.attr("id"));var i=this.dashboardDesigner.modules.dynamicConnectionStringDialog;i.showDynamicConnectionStringPopup(n,t)},n.prototype.resetDynamicConnection=function(n){var t=this.getDynamicConnectionSwitch(n);BoldBIDashboard.isNullOrUndefined(t)||(t.updateValueByName("dyn-con-config-switch",!1),this.dashboardDesigner.element.find("#"+n+"dyn_conn_config_configure_btn").hide());this.showHideDynamicConnectionConfigError(n,!0)},n.prototype.setDynamicConnectionSwitchforEditConnection=function(n){var t=this.getDynamicConnectionSwitch(n);BoldBIDashboard.isNullOrUndefined(t)||(t.updateValueByName("dyn-con-config-switch",!0),this.dashboardDesigner.element.find("#"+n+"dyn_conn_config_configure_btn").show())},n.prototype.resetAndDisableDynamicConnectionOptions=function(n){this.showHideDynamicConnectionConfigError(n,!0);var t=this.getDynamicConnectionSwitch(n);BoldBIDashboard.isNullOrUndefined(t)||(t.updateValueByName("dyn-con-config-switch",!1),t.disableItemByName("dyn-con-config-switch",!0),this.dashboardDesigner.element.find("#"+n+"dyn_conn_config_configure_btn").hide())},n.prototype.enableDynamicConnectionOptons=function(n){var t=this.getDynamicConnectionSwitch(n);BoldBIDashboard.isNullOrUndefined(t)||t.disableItemByName("dyn-con-config-switch",!1)},n.prototype.getDynamicConnectionSwitchState=function(n){var t=this.getDynamicConnectionSwitch(n);return BoldBIDashboard.isNullOrUndefined(t)?!1:t.getState()==="on"},n.prototype.showHideDynamicConnectionConfigError=function(n,t){var i=this.dashboardDesigner.element.find("#"+n+"_dynamic_connectionstring_tag.bbi-dbrd-dyn-con-wrapper .bbi-dbrd-dyn-con-error-msg");t?i.hide():i.show()},n.prototype.renderOAuthAccountTextBoxItem=function(n,t){var f=BoldBIDashboard.buildTag("tr","",{},{id:n+"_account_name_tr"}),e=BoldBIDashboard.buildTag("td","",{},{}),i,r,h,u,c;f.append(e);i=BoldBIDashboard.buildTag("table","",{},{});e.append(i);var o=BoldBIDashboard.buildTag("tr","",{}),s=BoldBIDashboard.buildTag("td","",{}),l=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label",this.locale.dataSource.oAuthAccountType,{},{});s.append(l);r=BoldBIDashboard.buildTag("button.bbi-dbrd-switch-account-btn bbi-dbrd-btn-small bbi-dbrd-btn-secondary","",{},{id:n+"_switch_account_div",type:"button"});h=BoldBIDashboard.buildTag("span.e-btntxt bbi-designer-add-btn ",this.locale.dataSource.switchOAuthAccount,{},{});r.append(h);i.append(o.clone().append(s));u=BoldBIDashboard.buildTag("td","",{},{colspan:"1",id:n+"_account_name_textbox_td"});i.append(o.clone().append(u));c=BoldBIDashboard.buildTag("input.e-textbox e-designer-datasource-textbox bbi-dbrd-switch-account-textbox bbi-dbrd-designer-hoverable","",{},{id:n+"_account_name_textbox",type:"text",spellcheck:"false",disabled:"disabled"});u.append(c,r);t.append(f)},n.prototype.renderAccordionItem=function(n,t,i,r,u,f,e,o){var a=this.bbdesigner$("<tr id="+t+"_tr/>"),v=this.bbdesigner$("<td unselectable='on'/>"),s,c,l,h,y;a.append(v);i.append(a);s=this.bbdesigner$("<table unselectable='on'><\/table>");v.append(s);s.append(this.getRowCaption(n,t));c=this.bbdesigner$("<tr><\/tr>");l=BoldBIDashboard.buildTag("td","",{},{colspan:"2",id:t+"_td"});s.append(c);c.append(l);h=BoldBIDashboard.buildTag("input","",{},{id:t,value:e,spellcheck:"false"});l.append(h);y={width:"437px",showPopupButton:!0,autofill:!0,focus:this.bbdesigner$.proxy(r,f,h),cssClass:"bbi-ej2-auto-complete bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control bbi-label-control",focusOut:BoldBIDashboard.isNullOrUndefined(u)?function(){}:this.bbdesigner$.proxy(u,f),noRecordsTemplate:null,change:BoldBIDashboard.isNullOrUndefined(o)?null:this.bbdesigner$.proxy(o,f),showClearButton:!1,filterType:"StartsWith"};BoldBIDashboard.DashboardUtil.createAutoComplete(y,h[0])},n.prototype.renderCheckboxItem=function(n,t,i,r,u,f){var s,e,o,h;f===void 0&&(f="Left");s=this.bbdesigner$("<tr id="+t+"_tr/>");e=BoldBIDashboard.buildTag("td","",{"padding-right":"7px","padding-left":"4px"},{unselectable:"on",align:f});s.append(e);i.append(s);o=BoldBIDashboard.buildTag("input","",{},{type:"checkbox",id:t});e.append(o);h=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label",n,{"margin-left":"6px"},{"for":t,id:t});e.append(h);BoldBIDashboard.isNullOrUndefined(r)?o.BoldBIDashboardCheckBox():o.BoldBIDashboardCheckBox({change:this.bbdesigner$.proxy(r,u)})},n.prototype.renderExtractModeMessageItem=function(n,t,i){var r=BoldBIDashboard.buildTag("tr","",{},{id:t+"_tr"}),u=BoldBIDashboard.buildTag("td","",{},{unselectable:"'on'"}),f;r.append(u);i.append(r);f=BoldBIDashboard.buildTag("div.bbi-dbrd-connection-extract-text",n,{},{id:t});u.append(f)},n.prototype.renderRadioItem=function(n,t,i,r,u,f,e){var h=this.bbdesigner$("<tr/>"),o=this.bbdesigner$("<td unselectable='on'/>"),s,c;h.append(o);u.append(h);s=BoldBIDashboard.buildTag("input","",{},{type:"radio",name:i,id:t});o.append(s);c=BoldBIDashboard.buildTag("label.editLabel bbi-designer-title-label",n,{"margin-left":"6px"},{"for":t,id:t});o.append(c);s.BoldBIDashboardRadioButton({checked:r,change:this.bbdesigner$.proxy(f,e)})},n.prototype.showValidationMsg=function(n,t,i){var r=this.dashboardDesigner.element.find("#"+n+"_error_icon_td"),u=this.dashboardDesigner.element.find("#"+n+"_td").find(".e-designer-datasource-textbox"),f=this.dashboardDesigner.element.find("#"+n+"_td").find(".bbi-designer-content-label");t?(this.isConnectBtnClick=!1,BoldBIDashboard.DashboardUtil.showErrIndictor(r,!0,i),f.addClass("bbi-designer-error"),u.addClass("bbi-designer-error")):(BoldBIDashboard.DashboardUtil.showErrIndictor(r,!1),f.removeClass("bbi-designer-error"),u.removeClass("bbi-designer-error"))},n.prototype.cancelDataSource=function(){this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.CancelDataSourceCreation,this.locale.alertWindowMesages.datasourceCancel,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{},instance:this,method:"confirmCancelWiz"})},n.prototype.getMaxRowLimit=function(n){return this.dashboardDesigner.modules.util.isEnvironmentOnPremise()?1e6:BoldBIDashboard.isNullOrUndefined(n)?1e6:n},n.prototype.confirmCancelWiz=function(n){BoldBIDashboard.isNullOrUndefined(this.ajaxPost)?n&&this.goToDataSourceList():n&&(this.hideIndicator(),this.goToDataSourceList(),this.ajaxPost.abort(),this.ajaxPost=null,this.dashboardDesigner.modules.util.hideDataSourceLoadingIndicator(this.targetTag,this.id+"_datasource_dsname"),this.ajaxPostForDSNameValidation=null)},n.prototype.goToDataSourceList=function(){this.isDataPanel?BoldBIDashboard.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataPanel):BoldBIDashboard.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataType)},n.prototype.connectionTypeBack=function(){this.isDataPanel?BoldBIDashboard.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataPanel):BoldBIDashboard.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataList)},n.prototype.newConnectionType=function(){this.isDataPanel=!0;BoldBIDashboard.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataType)},n.prototype.setHeaderType=function(n){var t=this.locale.dataSource;n?this.targetTag.find("#"+this.id+"_datasourceHeaderMarkupTag").text(t.headerEditConnectionText):this.targetTag.find("#"+this.id+"_datasourceHeaderMarkupTag").text(this.isDataPanel?t.headerNewConnectionText:t.newDataSourceText)},n.prototype.setDataSourceName=function(n){var t=this.targetTag.find("#"+this.id+"_datasource_dsname");n&&t.val(n.Name);t.val(this.isEdit?this.datasourceItem.Name:"")},n.prototype.setDatasourceDescription=function(n){n&&this.datasourceDescription.val(n.Description);this.datasourceDescription.val(this.isEdit?this.datasourceItem.Description:"");this.datasourceDescriptionText=this.isEdit?this.datasourceItem.Description:""},n.prototype.validateDataSourceName=function(){var i=this.locale.dataSource,t=this.id+"_datasource_dsname",n=this.targetTag.find("#"+t).val().trim(),r;if(!this.dashboardDesigner.nameValidation(n))return r=this.locale.nameValidationMessages.invalidDatasourceName+this.locale.nameValidationMessages.notSupportedCharDatasourceName+'* | / : < > , % ; \\ " + & ? #',this.showValidationMsg(t,!0,r),{name:n,isAvailable:!1};if(n){if(this.isAvailable(n))return this.showValidationMsg(t,!0,i.nameAlreadyExistonDataSource),{name:n,isAvailable:!1}}else return this.showValidationMsg(t,!0,i.specifyDataSourceName),{name:n,isAvailable:!1};return{name:n,isAvailable:!0}},n.prototype.isAvailable=function(n){for(var i=!1,r=[],u=this.dashboardDesigner.modules.dataSet.datasets,t=0;t<u.length;t++)r.push(u[t].Name);return r.indexOf(n)!==-1&&(i=!0),i},n.prototype.validateDataSourceNameExist=function(){var n=this;this.setTimeForDSNameValidation=setTimeout(function(){n.ajaxPostForDSNameValidation=n.dashboardDesigner.modules.util.doAjaxPost("POST",n.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.validatedsname,{action:BoldBIDashboard.DashboardUtil.DesignerAction.GetDsnName,data:JSON.stringify(n.datasourceNameFieldText)},{fnction:n.bbdesigner$.proxy(n.OnDataSourceNameExistSuccess,n),errfnction:n.bbdesigner$.proxy(n.OnDataSourceNameExistError,n),indicator:[n.bbdesigner$.proxy(n.dashboardDesigner.modules.util.showDataSourceLoadingIndicator,n,n.targetTag,n.id+"_datasource_dsname"),n.bbdesigner$.proxy(n.dashboardDesigner.modules.util.hideDataSourceLoadingIndicator,n,n.targetTag,n.id+"_datasource_dsname")]},!0,!0)},500)},n.prototype.OnDataSourceNameExistSuccess=function(n){this.isDsNameWaitingPop=!1;n.Status?(this.isDSNameExist=n.Data,this.isConnectBtnClick=this.isDSNameExist?!1:this.isConnectBtnClick):this.isConnectBtnClick=!1;var t=this.dashboardDesigner.modules.util.onDataSourceNameExistSuccess(this.id+"_datasource_dsname",n.Status,this.isDSNameExist,n.Message);this.isConnectBtnClick&&t&&this.connectDatasource(!0)},n.prototype.OnDataSourceNameExistError=function(n){this.isDsNameWaitingPop=!1;this.dashboardDesigner.modules.util.onDataSourceNameExistError(this.id+"_datasource_dsname",n)},n.prototype.getAvailableName=function(){for(var n,f,i="DataSource",r=[],u=this.dashboardDesigner.modules.dataSet.datasets,t=0;t<u.length;t++)r.push(u[t].Name);n=0;do n++,f=r.indexOf(i+n);while(f!==-1);return i+n},n.prototype.renderGroupItems=function(n){var t=BoldBIDashboard.buildTag("div","",{padding:"10px 0px 10px 9px",height:"100%",width:"100%",margin:"0 auto",display:"inline-block"},{id:this.id+"_dsTypeList"});this.generateDataSourceTypes(t);n.append(t)},n.prototype.generateDataSourceTypes=function(n){var t=this.getDsItems();this.renderDsSelectedElements(t,n)},n.prototype.renderDsSelectedElements=function(n,t){var r=BoldBIDashboard.buildTag("div"),u,i;if(n.length===0&&t.append(this.getNoItemMsg()),this.isConnectionMode())u=this.getConnectionDlgInstance(),u.renderSelectedCategoryItems(n);else{for(i=0;i<n.length;i++)r.append(this.getDsTypeElements(n[i],100));t.append(r.children())}},n.prototype.getNoItemMsg=function(){return"<div class='bbi-dbrd-designer-datasource-search-no-data'>"+this.dataSourceLocale.noDataSourceMessage+"<\/div>"},n.prototype.getDsItems=function(){var u=this,n=this.getDatasourceTypes(),t,f,s,c,i,a,v,o,h,y;if(BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.isAzureApplication)||this.dashboardDesigner.model.isAzureApplication||this.dashboardDesigner.model.IsEmbed){if(i=n,this.selectedCategory!==BoldBIDashboard.DataSourceCategory.all&&(i=this.filterCollection(n,"category",this.selectedCategory.toString(),!0),n=i),this.searchText.trim()!=="")for(n=this.filterCollection(i,"name",this.searchText),a=this.filterCollection(i,"tags",this.searchText),v=function(t){n.every(function(n){return n.name!==t.name})&&n.push(t)},o=0,h=a;o<h.length;o++)y=h[o],v(y)}else{t=n;t=this.filterCollection(n,"category",BoldBIDashboard.DataSourceCategory.sql.toString(),!0);var p=n.filter(function(n){return!t.some(function(t){return t.name===n.name})}),w=function(i){t.every(function(n){return n.connector!==i})&&t.push.apply(t,b.filterCollection(n,"connector",i,!0))},b=this;for(f=0,s=this.etlConnectorsList;f<s.length;f++)c=s[f],w(c);if(t.push.apply(t,this.filterCollection(n,"connector","elasticsearch",!0)),this.connectorType=="Basic"?n=p:this.connectorType==="Advanced"&&(n=t),this.selectedCategory!==BoldBIDashboard.DataSourceCategory.all&&(i=this.filterCollection(n,"category",this.selectedCategory.toString(),!0),n=i),this.searchText.trim()!==""){var r=[],e=[],l=function(n,t){var f,i,r,o;for(e=u.filterCollection(t,"name",u.searchText),e.push.apply(e,u.filterCollection(t,"tags",u.searchText)),f=function(t){n.every(function(n){return n.name!==t.name})&&n.push(t)},i=0,r=e;i<r.length;i++)o=r[i],f(o)};l(r,n);r.length===0&&this.connectorType==="Basic"?(l(r,t),this.chiplist.selectedChips!==1&&r.length>0?(this.chiplist.select([1]),this.dashboardDesigner.element.find(".bbi-dbrd-etlinfo-content").html(this.advancedInfoContent)):this.chiplist.selectedChips!==0&&r.length==0&&(this.chiplist.select([0]),this.dashboardDesigner.element.find(".bbi-dbrd-etlinfo-content").html(this.basicInfoContent))):this.connectorType==="Basic"&&this.chiplist.selectedChips!==0?(this.chiplist.select([0]),this.dashboardDesigner.element.find(".bbi-dbrd-etlinfo-content").html(this.basicInfoContent)):this.connectorType==="Advanced"&&this.chiplist.selectedChips!==1&&(this.chiplist.select([1]),this.dashboardDesigner.element.find(".bbi-dbrd-etlinfo-content").html(this.advancedInfoContent));n=r}else this.connectorType!="Basic"||BoldBIDashboard.isNullOrUndefined(this.chiplist)||this.chiplist.selectedChips==0||(this.chiplist.select([0]),this.dashboardDesigner.element.find(".bbi-dbrd-etlinfo-content").html(this.basicInfoContent))}return n=this.sortCollection(n,"name")},n.prototype.getDsTypeElements=function(n,t){var i=this.dashboardDesigner._id+n.id,r=n.connector.split("_")[0]==="CustomWeb"?BoldBIDashboard.buildTag("div.bbi-designer-datasourceTypes bbi-dbrd-designer-hoverable","",{"text-overflow":"ellipsis",overflow:"hidden"},{itemType:n.itemType,"data-connector":n.connector,"data-tooltip":n.name}):BoldBIDashboard.buildTag("div.bbi-designer-datasourceTypes","",{},{itemType:n.itemType,"data-connector":n.connector}),f=n.connector.split("_")[0]==="CustomWeb"&&!BoldBIDashboard.isNullOrUndefined(n.icon)&&n.icon!==""?BoldBIDashboard.buildTag("span.bbi-designer-tile "+n.cssClass,"",{display:"inline-block","margin-bottom":"4px","border-radius":"3px",background:"url(data:image/png;base64,"+n.icon+")no-repeat","background-position":"center","background-size":"contain",height:"40px",width:"40px"},{id:i+"_img",itemType:n.itemType,"data-connector":n.connector}):BoldBIDashboard.buildTag("span.bbi-designer-tile "+n.cssClass,"",{display:"inline-block","margin-bottom":"4px","border-radius":"3px"},{id:i+"_img",itemType:n.itemType,"data-connector":n.connector}),u;return r.append(f),u=BoldBIDashboard.buildTag("span.bbi-designer-tile-content","",{display:"inline-block",width:t+"px"},{id:i,itemType:n.itemType,"data-connector":n.connector}),u.text(n.name),r.append(u),r},n.prototype.getDatasourceTypes=function(){var n=BoldBIDashboard.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypes(),u,i,t,r,e,o,f,s,h;if(!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.previewFeaturesJson))for(u=0;u<this.dashboardDesigner.previewFeaturesJson.length;u++)if(this.dashboardDesigner.previewFeaturesJson[u].FeatureName==="Connections"){for(i=JSON.parse(this.dashboardDesigner.previewFeaturesJson[u].Value),t=0;t<i.length;t++)for(r=0;r<n.length;r++){if(n[r].connector===i[t].Datasource&&!i[t].hidden){n[r].hidden=!1;break}if(n[r].connector===i[t].Datasource&&!BoldBIDashboard.isNullOrUndefined(i[t].MaxRowLimit)){n[r].maxRowLimit=i[t].MaxRowLimit;break}}break}if(n=n.filter(function(n){return n.hidden!==!0}),!BoldBIDashboard.isNullOrUndefined(window.BoldBIDashboard.Designer.settings)&&(e=window.BoldBIDashboard.Designer.settings.connection||{},!BoldBIDashboard.isNullOrUndefined(e.hidden)&&e.hidden.length>0))for(o=e.hidden,o=o.map(function(n){return n.toLowerCase()}),f=n.length-1;f>=0;f--)o.indexOf(n[f].connector.toLowerCase())>-1&&n.splice(f,1);return this.dashboardDesigner.modules.util.isEnvironmentOnPremise()&&(s=[],this.dashboardDesigner.model.connectionList===""?s=n:(h=JSON.parse(this.dashboardDesigner.model.connectionList),s=n.filter(function(n){return h.indexOf(n.connector)!==-1})),n=s),n},n.prototype.showDataSourceHint=function(){this.targetTag.find("#"+this.id+"_dsListContainer li").length>0?this.targetTag.find("#"+this.id+"welcomettext_content").hide():this.targetTag.find("#"+this.id+"welcomettext_content").show()},n.prototype.updateCulture=function(n){var t=this.id,i;i=BoldBIDashboard.Designer.Locale[n]?BoldBIDashboard.Designer.Locale[n].dataSource:BoldBIDashboard.Designer.Locale["en-US"].dataSource;this.targetTag.find("#"+t+"_dataSourceHeaderText").html(i.headerText);this.targetTag.find("#"+t+"_newDataSourceButton").html(i.newDataSourceText);this.targetTag.find("#"+t+"_headerMarkupTag").html(i.dataSourceTypeText);this.targetTag.find("#"+t+"_btn_back").html(i.backButtonText);this.targetTag.find("#"+t+"_sql").html(i.sqlButtonText);this.targetTag.find("#"+t+"_btn_connect").html("Save");this.targetTag.find("#"+t+"_panelSwitch").html(i.advanceOptionText);this.targetTag.find("#"+t+"_panelSwitch").html(i.basicOption);this.targetTag.find("#"+t+"_datasourceHeaderMarkupTag").html(i.setConnectionText);this.targetTag.find("#"+t+"_Sql_dsname_tr .editLabel").html(i.dataSourceNameText);this.targetTag.find("#"+t+"_Sql_dsname").html(i.dataSourceText);this.targetTag.find("#"+t+"_Sql_servername_tr .editLabel").html(i.serverNameText);this.targetTag.find("#"+t+"_Sql_authondicationtype .editLabel").html(i.authenticationTypeText);this.targetTag.find("#"+t+"_WinAuth").html(i.windowsText);this.targetTag.find("#"+t+"_SQLAuth").html(i.sqlServerText);this.targetTag.find("#"+t+"_Sql_dbname_tr .editLabel").html(i.dataBaseText);this.targetTag.find("#"+t+"_Sql_username_tr .editLabel").html(i.userName);this.targetTag.find("#"+t+"_Sql_passwd_tr .editLabel").html(i.passWord);this.targetTag.find("#"+t+"_windows_user").html(i.useCurrentWindowsUser);this.targetTag.find("#"+t+"_credential_user").html(i.useThisUserNameAndPassword);this.targetTag.find("#"+t+"_credential_prompt").html(i.promptForCredentials);this.targetTag.find("#"+t+"_credential_donot").html(i.doNotUseCredentials);this.targetTag.find("#"+t+"_cred_username_tr .editLabel").html(i.userName);this.targetTag.find("#"+t+"_cred_passwd_tr .editLabel").html(i.passWord);this.targetTag.find("#"+t+"_cred_windows").html(i.useAsWindowCredential);this.targetTag.find("#"+t+"_cred_impersonate .editLabel").html(i.impersonateAuthenticatedUserAfterConnecting);this.targetTag.find("#"+t+"_prompt_text_tr .editLabel").html(i.enterPromptText);this.targetTag.find("#"+t+"_prompt_windows .editLabel").html(i.useAsWindowCredential);this.targetTag.find("#"+t+"_dsConfigMenu .editContextMenu").html(i.editContextMenu);this.targetTag.find("#"+t+"_dsConfigMenu .deleteContextMenu").html(i.deleteContextMenu);this.targetTag.find("#"+t+"_Sql_dsname_label_validation").html(i.specifyServerName);this.targetTag.find("#"+t+"_Sql_dbname_label_validation").html(i.specifyDatabaseName);this.targetTag.find("#"+t+"_Sql_dsname_label_validation").html(i.specifyDataSourceName);this.targetTag.find("#"+t+"_Sql_dsname_label_validation").html(i.nameAlreadyExistonDataSource)},n.prototype.wiredEvents=function(){this.targetTag.on("click","#"+this.id+"_headerback",this.bbdesigner$.proxy(this.connectionTypeBack,this));this.targetTag.on("click",".bbi-designer-datasourceTypes",this.bbdesigner$.proxy(this.showETLDialog,this));this.targetTag.on("keyup",".bbi-dbrd-designer-datasource-search-container .bbi-autocomplete",this.bbdesigner$.proxy(this.onDataSourceSearchKeyPress,this));this.targetTag.on("click",".bbi-dbrd-designer-datasource-search-container .bbi-dbrd-designer-close",this.bbdesigner$.proxy(this.onDataSourceClearIconClick,this));this.targetTag.on("focusin",".bbi-dbrd-designer-datasource-search-container .bbi-dbrd-designer-search-box",this.bbdesigner$.proxy(this.onDataSourceSearchTextFocusIn,this));this.targetTag.on("focusout",".bbi-dbrd-designer-datasource-search-container .bbi-dbrd-designer-search-box",this.bbdesigner$.proxy(this.onDataSourceSearchTextFocusOut,this));this.dataSourceName.on("keyup",this.bbdesigner$.proxy(this.validateDsNameField,this));this.dataSourceName.on("change",this.bbdesigner$.proxy(this.datasourceNameFieldTextChange,this));this.targetTag.on("click","#"+this.id+"_btn_connect",this.bbdesigner$.proxy(this.connectDatasource,this,!0));this.targetTag.on("click","#"+this.id+"_btn_back",this.bbdesigner$.proxy(this.cancelDataSource,this));this.datasourceDescription.on("keyup",this.bbdesigner$.proxy(this.onDatasourceDescriptionTextBox,this));this.targetTag.on("click",".bbi-dbrd-datasource-schedule",this.bbdesigner$.proxy(this.openScheduleWindow,this,""));this.dashboardDesigner.element.on("click","#"+this.id+"_invalidsheets_closebtn",this.bbdesigner$.proxy(this.closeDialog,this));this.dashboardDesigner.element.on("click","#"+this.id+"_etl_redirectbtn",this.bbdesigner$.proxy(this.redirectETLlink,this));this.dashboardDesigner.element.on("click","#"+this.id+"_etl_continuewithconnectorbtn",this.bbdesigner$.proxy(this.continueWithConnector,this,!0))},n.prototype.unWiredEvents=function(){this.targetTag.off("click","#"+this.id+"_headerback",this.bbdesigner$.proxy(this.connectionTypeBack,this));this.targetTag.off("click",".bbi-designer-datasourceTypes",this.bbdesigner$.proxy(this.showETLDialog,this));this.targetTag.off("keyup",".bbi-dbrd-designer-datasource-search-container .bbi-autocomplete",this.bbdesigner$.proxy(this.onDataSourceSearchKeyPress,this));this.targetTag.on("click",".bbi-dbrd-designer-datasource-search-container .bbi-dbrd-designer-close",this.bbdesigner$.proxy(this.onDataSourceClearIconClick,this));this.targetTag.off("focusin",".bbi-dbrd-designer-datasource-search-container .bbi-dbrd-designer-search-box",this.bbdesigner$.proxy(this.onDataSourceSearchTextFocusIn,this));this.targetTag.off("focusout",".bbi-dbrd-designer-datasource-search-container .bbi-dbrd-designer-search-box",this.bbdesigner$.proxy(this.onDataSourceSearchTextFocusOut,this));this.dataSourceName.off("keyup",this.bbdesigner$.proxy(this.validateDsNameField,this));this.dataSourceName.off("change",this.bbdesigner$.proxy(this.datasourceNameFieldTextChange,this));this.datasourceDescription.off("keyup",this.bbdesigner$.proxy(this.onDatasourceDescriptionTextBox,this));this.targetTag.off("click",".bbi-dbrd-datasource-schedule",this.bbdesigner$.proxy(this.openScheduleWindow,this,""));this.dashboardDesigner.element.off("click","#"+this.id+"_invalidsheets_closebtn",this.bbdesigner$.proxy(this.closeDialog,this));this.dashboardDesigner.element.off("click","#"+this.id+"_etl_redirectbtn",this.bbdesigner$.proxy(this.redirectETLlink,this));this.dashboardDesigner.element.off("click","#"+this.id+"_etl_continuewithconnectorbtn",this.bbdesigner$.proxy(this.continueWithConnector,this,!0))},n.prototype.openScheduleWindow=function(n){var t,i,r;this.triggerActionBeginForRefreshSettings(n)||(BoldBIDashboard.isNullOrUndefined(this.dataSourceScheduleContainer)||this.dataSourceScheduleContainer.length!==1?(this.dataSourceScheduleContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-datasource-schedule-container","",{padding:"0px !important"},{id:this.id+"_datasource_schedule"}),this.dashboardDesigner.element.append(this.dataSourceScheduleContainer),i=BoldBIDashboard.buildTag("iframe","",{border:"0",height:"626px",width:"1000px"},{id:this.id+"_datasource_schedule_iframe",src:this.getIFrameSrc(n)}),i.find("#time-intervals-div").css("background: var(--dialog-footer-bg-normal-color)!important"),this.dataSourceScheduleContainer.append(i),this.dataSourceScheduleContainer.BoldBIDashboardDialog({showHeader:!1,width:1e3,height:630,minWidth:200,minHeight:120,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!1,allowDraggable:!1,containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,cssClass:"boldbi-dashboarddesigner bbi-designer-dialog e-datasource-schedule-dialog",closeOnEscape:!0,close:this.bbdesigner$.proxy(this.closeScheduleDialog,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText}),this.dataSourceScheduleContainer.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup bbi-designer-loader",template:this.dashboardDesigner.getWaitingPopupTemplate()}),t=this.dataSourceScheduleContainer.data("BoldBIDashboardDialog"),t.open()):(t=this.dataSourceScheduleContainer.data("BoldBIDashboardDialog"),t.open(),this.dataSourceScheduleContainer.find("iframe").attr("src",this.getIFrameSrc(n))),r=this.dataSourceScheduleContainer.data("BoldBIDashboardWaitingPopup"),BoldBIDashboard.isNullOrUndefined(r)||r.show())},n.prototype.triggerActionBeginForRefreshSettings=function(n){return this.dashboardDesigner._trigger("actionBegin",{eventType:"refreshSettings",source:{data:{scheduleItemJson:this.scheduleJson,datasourceId:n,scheduleEndPoint:this.dashboardDesigner.model.schedule.endPoint,designerInstance:this.dashboardDesigner}}})},n.prototype.closeScheduleDialog=function(n){n.model.position={X:0,Y:0};this.scrollerRefresh(this.targetTag.find("#"+this.id+"_dsConfigBodyContainer"))},n.prototype.getIFrameSrc=function(n){return BoldBIDashboard.isNullOrUndefined(this.scheduleJson)?n!==""?this.dashboardDesigner.model.schedule.endPoint+"?datasourceId="+n:this.dashboardDesigner.model.schedule.endPoint:this.dashboardDesigner.model.schedule.endPoint+"?scheduleItemJson="+JSON.stringify(this.scheduleJson)},n.prototype.resetScheduleElementValues=function(n){BoldBIDashboard.isNullOrUndefined(n)||n.length!==1||n.html(this.locale.dataSource.noScheduleCreated);this.scheduleJson=null},n.prototype.destroy=function(){this.unWiredEvents();this.webDsTemplateInstance.destroy();this.linkedAccountsInstance.destroy()},n.prototype.isOverflow=function(){return this.dsConfigTag.find("#"+this.id+"_dsConfigContainer").height()>this.dsConfigTag.find("#"+this.id+"_dsConfigBodyContainer").height()?!0:!1},n.prototype.scrollerRefresh=function(n){n.data("BoldBIDashboardScroller")&&n.data("BoldBIDashboardScroller").refresh()},n.prototype.fetchAccountInfo=function(n,t,i,r){r===void 0&&(r=!1);this.dashboardDesigner.modules.util.doAjaxPost("GET",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.linkedaccounts+n,{action:BoldBIDashboard.DashboardUtil.DesignerAction.dataBases},{fnction:this.bbdesigner$.proxy(this.onAccountFetchSuccess,this,t,i,r)},!0,!0)},n.prototype.validateOAuthAccountInfo=function(n,t){var i,r;return t===void 0&&(t=!1),i=!BoldBIDashboard.isNullOrUndefined(n),BoldBIDashboard.isNullOrUndefined(n)||(r=t?n.text():n.val(),i=r.trim()!==""),i||this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.alertDialog,this.locale.alertWindowMesages.oAuthAccountWarningMessage,IconType.errors,AlertType.Alert,!1,""),i},n.prototype.onAccountFetchSuccess=function(n,t,i,r){if(r.Status){var u=r.Data.find(function(t){return t.Id===n});BoldBIDashboard.isNullOrUndefined(u)||BoldBIDashboard.isNullOrUndefined(t)||(i?t.text(u.Name):t.val(u.Name),BoldBIDashboard.DashboardUtil.textWidth(u.Name,"12px Heebo")>=t.width()?t.attr("data-tooltip",u.Name):t.attr("data-tooltip",""))}},n.prototype.appendInfoIconToControl=function(n,t){var i=BoldBIDashboard.buildTag("td",this.getInfoIcon(t),{},{id:n.attr("id")+"_info"});n.addClass("bbi-dbrd-dyn-con-wrapper").append(i)},n.prototype.getInfoIcon=function(n){return"<div class ='bbi-dbrd-dyn-con-help-info-icon'><span class ='bbi-dbrd-dyn-con-info-icon bbi-dbrd-designer-icon bbi-dbrd-designer-hoverable' data-tooltip =\""+n+'"><\/span><\/div>'},n.prototype.updateEJComponentSize=function(){var t,i,e,o,u,n,s;if(!BoldBIDashboard.isNullOrUndefined(this.dsConfigTag)&&(t=this.dsConfigTag.find("#"+this.id+"_basicPanel"),!BoldBIDashboard.isNullOrUndefined(t))){var h=t.find(".e-textbox").not(".e-designer-exclude"),c=t.find(".e-textarea"),f=t.find(".e-js"),r=this.isOverflow();if(f&&f.length>0)for(n=0;n<f.length;n++)if(i=this.bbdesigner$(f[n]),e=i.data("ejWidgets"),e){o=i.data(e[0]);switch(e[0]){case"BoldBIDashboardDropDownList":i.hasClass("e-designer-exclude")||o.option("width",(r?i.hasClass("e-dropdownUpload")?"430":"439":i.hasClass("e-dropdownUpload")?"428":"435")+"px");break;case"ejNumericTextbox":o.option("width")!=="100%"&&o.option("width",r?"438":"434px")}}if(u=t.find(".e-lib.e-autocomplete"),u&&u.length>0)for(n=0;n<u.length;n++)s=BoldBIDashboard.DashboardUtil.getAutoCompleteObj(this.bbdesigner$(u[n])),BoldBIDashboard.isNullOrUndefined(s)||s.width!=="100%"&&(s.width=r?"428":"434px");c.width(r?"421":"418px");h.width(r?"425":"429px");this.datasourceDescription.width("425px")}},n.prototype.updateDSListContainer=function(){var n=this.targetTag.height();this.targetTag.find("#"+this.id+"_dsBodyContainer").height(n-(this.targetTag.find("#"+this.id+"_dsHeaderContainer").height()+this.targetTag.find("#"+this.id+"_dsFooterContainer").height()));this.targetTag.find("#"+this.id+"_dsBodyContainer").data("BoldBIDashboardScroller")&&this.targetTag.find("#"+this.id+"_dsBodyContainer").data("BoldBIDashboardScroller").setModel({height:n-(this.targetTag.find("#"+this.id+"_dsHeaderContainer").height()+this.targetTag.find("#"+this.id+"_dsFooterContainer").height())})},n.prototype.updateDSTypeContainer=function(){var n=this.targetTag.height(),t=this.targetTag.find("#"+this.id+"_dsTypeFooterContainer"),i=this.targetTag.find("#"+this.id+"_dsTypeHeaderContainer").height(),r=t.is(":visible")?t.height():0,u=this.targetTag.find("#"+this.id+"_dsTypeList");this.targetTag.find("#"+this.id+"_dsTypeBodyContainer").height(n-(i+r));this.targetTag.find("#"+this.id+"_dsTypeBodyContainer").data("BoldBIDashboardScroller")&&this.targetTag.find("#"+this.id+"_dsTypeBodyContainer").data("BoldBIDashboardScroller").setModel({height:n-(i+r)});this.targetTag.find("#"+this.id+"_dataType_container").hasClass("e-content")?u.css("padding-left","5px"):u.css("padding-left","9px")},n.prototype.getlinkedAccountsInstance=function(){return this.linkedAccountsInstance},n.prototype.switchAnotherOAuthAccount=function(n,t,i,r){this.linkedAccountsInstance.showDialog(i,r,null,!0,n,t)},n.prototype.updateDSConfigContainer=function(){var t,u;this.isConnectionMode()&&(t=this.getConnectionDlgInstance(),t.scrollerRefresh());var e=this.targetTag.height(),i=this.dsConfigTag.find("#"+this.id+"_dsConfigHeaderContainer").height(),o=this.dsConfigTag.find("#"+this.id+"_dsConfigFooterContainer").height(),n=this.dsConfigTag.find("#"+this.id+"_dsConfig_BodyContainer"),r=parseFloat(this.dashboardDesigner.element.find("#"+this.id+"_dsConfig_BodyContainer").css("margin-top")),s=parseFloat(this.dashboardDesigner.element.find("#"+this.id+"_dsConfig_BodyContainer").css("margin-bottom")),h=this.dashboardDesigner.element.find("#"+this.id+"_datasource_Header").height();this.isConnectionMode()?(u=this.getConnectionDlgInstance(),n.height(u.contentWrap.height()-(i+r+h+s+5))):n.height(e-(i+o));var c=parseFloat(this.targetTag.find("#"+this.id+"_dsConfigBodyContainer").css("padding-bottom")),l=this.dsConfigTag.find("#"+this.id+"_switchCont").is(":visible")?this.dsConfigTag.find("#"+this.id+"_switchCont").height():0,f=n.height()-(l+c+r);this.targetTag.find("#"+this.id+"_dsConfigBodyContainer").height(f);this.targetTag.find("#"+this.id+"_dsConfigBodyContainer").data("BoldBIDashboardScroller")&&(this.targetTag.find("#"+this.id+"_dsConfigBodyContainer").data("BoldBIDashboardScroller").setModel({height:f}),this.targetTag.find("#"+this.id+"_dsConfigBodyContainer").data("BoldBIDashboardScroller").refresh());this.webDsTemplateInstance.resize();this.updateEJComponentSize()},n.prototype.isWebTemplatesVisible=function(){return this.webDsTemplateInstance.isVisible()},n.prototype.getConnectionDlgInstance=function(){return this.dashboardDesigner.modules.connectionDialog},n.prototype.isConnectionMode=function(){return this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.connection},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.DataSource",InternalDataSource,window);ExtractionModeDetails=function(){function n(){}return n}();PrepareDataSourceDetails=function(){function n(){}return n}(),function(n){n[n.Live=0]="Live";n[n.Extract=1]="Extract"}(ExtractionMode||(ExtractionMode={})),function(n){n[n.ImportTable=0]="ImportTable";n[n.ImportQuery=1]="ImportQuery"}(CustomQueryExtractionMode||(CustomQueryExtractionMode={})),function(n){n[n.OpenQuery=0]="OpenQuery";n[n.InternalCache=1]="InternalCache"}(StoredProcedure||(StoredProcedure={})),function(n){var t=function(){function t(n,t,i){this.itemPanelWidth=240;this.dataPanelWidth=36;this.id=n;this.element=t;this.designer=i;i.widgetHelper=i.modules.widgetHelper}return t.prototype.render=function(t){this.designerContainer=n.buildTag("div.bbi-dashboard-designer boldbi-dashboarddesigner","",{height:"100%","box-sizing":"border-box"},{id:this.id+"_designerContainer"});var i=this.designAreaTag=n.buildTag(this.designer.isDarkTypeTheme()?"div.bbi-dashboard-designer bbi-userselect bbi-dashboarddesigner-designAreaContainer bbi-dashboard-dark":"div.bbi-dashboard-designer bbi-userselect bbi-dashboarddesigner-designAreaContainer","",{},{id:this.id+"_designAreaContainer"}),r=this.designPanelTag=n.buildTag("div.bbi-dashboarddesigner-surfaceContainer","",{width:t-this.itemPanelWidth-this.dataPanelWidth+"px",border:"0px solid var(--primary-border-color)","border-left-width":"1px",height:"100%",float:"left","background-color":this.designer.modules.themeHelper.getSurfaceContainerBackground(),"box-sizing":"border-box"},{id:this.id+"_designSurfaceContainer"});this.designer.model.dashboardFromData.isExportImage||this.designer.model.dashboardFromData.isExportPdf||this.designPanelTag.css({"border-style":"solid","border-color":"var(--primary-border-color)"});i.append(r);this.designerContainer.append(i);this.element.append(this.designerContainer);this.setContainerSize(null,this.designer)},t.prototype.setContainerSize=function(t,i){var r=this.element.height(),u=this.element.width(),e=parseFloat(this.designAreaTag.css("border-top-width")),o=parseFloat(this.designAreaTag.css("border-bottom-width")),f=r-(o+e);n.isNullOrUndefined(i)||i.model.mode!==n.Designer.mode.view||i.model.dashboardFromData.isExportImage||i.model.dashboardFromData.isExportPdf||!i.model.IsEmbed||(f=r);this.designAreaTag.css({height:r+"px",width:u+"px"});this.designPanelTag.css({height:f+"px",width:u+"px"})},t.prototype.renderCanvas=function(){this.designCanvas=n.buildTag("div.bbi-dashboarddesigner-designcanvas","",{"box-sizing":"border-box",position:"relative",margin:"0 auto"},{id:this.id+"_designCanvas",tabindex:"0"});this.canvasContainer=n.buildTag("div.bbi-dbrd-designcanvas-container bbi-dbrd-designcanvas-scroller","",{width:"100%",height:"100%",overflow:"auto","box-sizing":"border-box","background-color":this.designer.modules.themeHelper.getSurfaceContainerBackground()},{id:this.id+"_scrollContentDesignPanel"});this.canvasContainer.css({"border-width":"0px 0px 1px 0px","border-style":"solid","border-color":"var(--primary-border-color)"});this.canvasContainer.append(this.designCanvas);this.designer.exportPanel.updateExportDialog()},t.prototype.previewDashboard=function(n){n?this.renderPreviewDashboardUI():this.renderPreviewDashboardCodeLogic()},t.prototype.renderPreviewDashboardUI=function(){var u,t,f,i,r,e;if(this.designer.showDesignIndicator(""),u=this.designer.modules.masterSlaveFilter,u.RefreshFilterSettings(),u.RefreshMasterSlaveTitle(),this.designer.model.isHideHeader=this.designer.model.isPinWidget?!0:this.designer.model.isHideHeader,this.designPanelTag.width(this.element.width()).addClass("viewer bbi-dbrd-viewer"),this.designer.designerPanel.showMenuIcon(!0),this.designer.element.find("#"+this.designer._id+"_title").css("display",n.DashboardUtil.IsStringNullorWhiteSpace(this.designer.model.dashboardName)?"none":"block"),this.designer.element.find(".bbi-dashboard-banner-description").css("display",n.DashboardUtil.IsStringNullorWhiteSpace(this.designer.model.dashboardDescription)?"none":"block"),t=this.designer.designerPanel.getDesignProperty(),!n.isNullOrUndefined(this.designer.model.dashboardFromData)&&this.designer.model.dashboardFromData.loadFromData&&this.designer.model.dashboardFromData.reportName&&(t.Header=this.designer.model.dashboardFromData.reportName),this.designer.model.isHideHeader?this.designer.designerPanel.banner.toggleBannerForView(!1,t):this.designer.designerPanel.banner.toggleBannerForView(!this.designer.model.dashboardFromData.isControl,t),this.designer.designerPanel.updateScrollBar(),n.isNullOrUndefined(BoldBIDashboardDesigner.editManager)||BoldBIDashboardDesigner.editManager.reset(),this.designer.modules.Mode.designCanvas.find(".bbi-dbrditem").length===0)this.designer.hideDesignIndicator();else for(f=this.designer.widgetHelper.getAllWidgets().filter(function(t){return n.Dashboard.WidgetHelper.isContainerWidget(t)===!0}),i=0;i<f.length;i++)f[i].getBackgroundForControlContainer();this.designer.resizeObj.isQueryDesigner=!0;this.designer.resizeObj.isDesigner=!0;this.designer.resizeObj.isPreview=!1;this.designer.designerPanel.isMobileView=this.designer.isMobileLayout();this.designer.designerPanel.designPanel.removeClass("bbi-mobile-view");this.designer.designerPanel.isMobileView&&this.designer.designerPanel.designPanel.addClass("bbi-mobile-view");this.designer.designerPanel.isLoaded()&&(r=this.designer.model.dashboardFromData.isControl?this.designer.designerPanel.targetTag.height():this.designer.designerPanel.banner.updateDesignPanelHeight(this.designer.designerPanel.targetTag.height(),!1),!n.isNullOrUndefined(this.designer.model.dashboardFromData)&&this.designer.model.dashboardFromData.loadFromData&&(e=this.designer.designerPanel.designPanel.find(".bbi-dbrd-applied-filter"),e.length>0&&(r=r-e.height())),this.designer.designerPanel.designPanel.css("height",r+"px"))},t.prototype.renderPreviewDashboardCodeLogic=function(){var n=this.designer.modules.masterSlaveFilter;n.RefreshFilterSettings();n.RefreshMasterSlaveTitle()},t.prototype.resizeCombineWidgetForWidgetExport=function(){var t=this;!n.isNullOrUndefined(this.designer.model.dashboardFromData)&&this.designer.model.dashboardFromData.loadFromData&&this.designer.model.dashboardFromData.isControl&&this.designer.widgetHelper.getAllWidgets().filter(function(t){return n.Dashboard.WidgetHelper.isContainerWidget(t)===!0}).length>0&&this.designer.widgetHelper.getAllWidgets().forEach(function(n){t.designer.designerPanel.updateCombineWidgetsPosition(n)})},t.prototype.renderCells=function(){this.designer.designerPanel.updatePreviewCanvasSize();this.designer.designerPanel.updateCellInfo(this.designer.designerPanel.rowsLength,this.designer.designerPanel.columnsLength);this.designer.designerPanel.updateScrollBar();this.updateCellVisibility()},t.prototype.updateCellVisibility=function(){this.designer.model.isPinWidget&&this.designer.isMobileLayout()&&this.designer.rdlParser.rdlJsonObj.WidgetData.length>1&&this.designer.modules.Mode.designCanvas.find(".e-dashboarddesigner-cellitem").css("display","block")},t.prototype.renderCellsForExport=function(){!n.isNullOrUndefined(this.designer.model.dashboardFromData)&&this.designer.model.dashboardFromData.loadFromData&&(this.designer.model.dashboardFromData.isExportPdf||this.designer.model.dashboardFromData.isExportImage)&&this.renderCells()},t.prototype.updateSizeForScrollExport=function(){if(!n.isNullOrUndefined(this.designer.model.dashboardFromData)&&this.designer.model.dashboardFromData.loadFromData&&!this.designer.designerPanel.validateControlExportForCombineWidget(this.designer.model.dashboardFromData.isControl)&&(this.designer.model.dashboardFromData.isExportPdf||this.designer.model.dashboardFromData.isExportImage)){var t=JSON.parse(this.designer.model.dashboardFromData.layoutData);(!n.isNullOrUndefined(t.DesignCanvasSettings)&&t.DesignCanvasSettings.NumberOfRows!==this.designer.designerPanel.singlePageRowLength&&this.designer.designerPanel.rowsLength!==this.designer.designerPanel.singlePageRowLength||this.designer.model.dashboardFromData.isWidgetSpecific||this.designer.model.dashboardFromData.isControl&&this.designer.model.dashboardFromData.isWidgetPagewiseExport)&&(this.designer.designerPanel.designPanel.css("height","auto"),this.designer.element.css("height","auto"))}},t.prototype.postRender=function(){},t.prototype.wireEvents=function(){this.designer.element.on("mouseover",".bbi-dbrditem",this.designer.bbdesigner$.proxy(n.Dashboard.WidgetContainerHelper.onWidgetMouseOver,this));this.designer.element.on("mouseleave",".bbi-dbrditem",this.designer.bbdesigner$.proxy(n.Dashboard.WidgetContainerHelper.onWidgetMouseLeave,this));this.designer.element.on("mousedown",".bbi-combine-item",this.designer.bbdesigner$.proxy(n.Dashboard.WidgetContainerHelper.onCombineWidgetClick,this));this.designer.element.on("click",".bbi-dbrd-view-data-export-menu-icon",this.designer.bbdesigner$.proxy(this.designer.viewDataPanel.viewDataExport,this.designer));this.designer.element.on("mouseleave",".bbi-dbrd-refresh-icon",this.designer.bbdesigner$.proxy(n.Dashboard.WidgetContainerHelper.onRefreshIconMouseLeave,this))},t.prototype.unwireEvents=function(){this.designer.element.off("mouseover",".bbi-dbrditem",this.designer.bbdesigner$.proxy(n.Dashboard.WidgetContainerHelper.onWidgetMouseOver,this));this.designer.element.off("mouseleave",".bbi-dbrditem",this.designer.bbdesigner$.proxy(n.Dashboard.WidgetContainerHelper.onWidgetMouseLeave,this));this.designer.element.off("mousedown",".bbi-combine-item",this.designer.bbdesigner$.proxy(n.Dashboard.WidgetContainerHelper.onCombineWidgetClick,this));this.designer.element.off("mouseleave",".bbi-dbrd-refresh-icon",this.designer.bbdesigner$.proxy(n.Dashboard.WidgetContainerHelper.onRefreshIconMouseLeave,this));n.isNullOrUndefined(this.designer.viewDataPanel)||this.designer.element.off("click",".bbi-dbrd-view-data-export-menu-icon",this.designer.bbdesigner$.proxy(this.designer.viewDataPanel.viewDataExport,this.designer))},t}();n.ViewMode=t}(BoldBIDashboard||(BoldBIDashboard={})),function(n){var t;(function(n){var t=function(){function n(){this.FieldContainers=[];this.DataSourceID="";this.DataSourceName="";this.Filters=[];this.SortExpressions=[];this.IsShowAllRecords=!0}return n}();n.DataGroupInfo=t})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={}));InternalPropertyPanel=function(){function n(n){this.id=null;this.canUpdate=!0;this.propertyHeaderText="Properties";this.endItemIndex=-1;this.currentItemIndex=-1;this.dataConfigTimeOut=null;this.ejDropDownObj={};this.ejColorPickObj={};this.ejNumbericObj={};this.ejCheckboxObj={};this.ejButtonObj={};this.ejMaskEditObj={};this.jQHeaderRows={};this.jQContainerRows={};this.resizeObj={isPropertyPanel:!1,isDataAssign:!1};this.propertyHeaderVal="";this.pageSizedrpdwnelem=[];this.labelParameter=null;this.locale=null;this.properties=null;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.designPanel=this.dashboardDesigner.designerPanel;this.id=this.dashboardDesigner._id;this.labelParameter=this.dashboardDesigner.modules.labelParameter;this.widgetHelper=this.dashboardDesigner.modules.widgetHelper;this.propertyContainer=BoldBIDashboard.buildTag("div","",{border:"0px solid #c8c8c8",height:"100%"},{id:this.id+"_propertyPanel"});this.propertyPanelContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{border:"0px solid #c8c8c8"},{id:this.id+"_propertyPanelContainer"})}return Object.defineProperty(n.prototype,"ActiveProperty",{get:function(){return this.activeProperty},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"EjMaskEditObj",{get:function(){return this.ejMaskEditObj},enumerable:!1,configurable:!0}),n.prototype.isLoaded=function(){return!BoldBIDashboard.isNullOrUndefined(this.targetTag)},n.prototype.isVisible=function(){return this.propertyContainer&&this.propertyContainer.is(":visible")},n.prototype.renderContainer=function(n){var t,i,f;this.targetTag=n;t=BoldBIDashboard.buildTag("div","",{position:"relative",height:"100%"},{id:this.id+"_propertyTab"});i=BoldBIDashboard.buildTag("ul.bbi-designer-property-header","",{id:this.id+"_propertyTabUl"});i.append("<li><a href=#"+this.id+"_propertyPanelContainer>"+this.locale.propertyPanel.propertyText+"<\/a><\/li>");i.append("<li><a href=#"+this.id+"_dataTabRootElement>"+this.locale.propertyPanel.assignDataText+"<\/a><\/li>");var o=this.dashboardDesigner.element.offset(),u=BoldBIDashboard.buildTag("div","",{width:"120px",display:"none",right:"33px",margin:"5px 0px",position:"absolute"},{id:this.id+"_propertyTabUl_datasetListContainer"}),e=BoldBIDashboard.buildTag("input","",{},{id:this.id+"_propertyTabUl_datasetList"}),r=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_waitingPopup_propertypaneldiv"});this.isShowDataSetList(u);u.append(e);i.append(u);t.append(i);this.dashboardDesigner.modules.dataConfiguration.appendEjWaitingPopup();t.append(r);r.append(this.propertyPanelContainer);this.propertyPanelContainer.css("width",this.dashboardDesigner.element.find("#"+this.id+"_designerConfigurationPanel").width()+"px");this.scrollElement=BoldBIDashboard.buildTag("div","",{});this.propertyPanelContainer.append(this.scrollElement);this.propertyPanelContainer.BoldBIDashboardScroller({scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,enableTouchScroll:!1,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize,scroll:this.bbdesigner$.proxy(this.onPanelScroll,this)});r.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup bbi-propertyPanel-waitingPopup",template:this.dashboardDesigner.getWaitingPopupTemplate()});this.ejWaitingPane=r.data("BoldBIDashboardWaitingPopup");this.updateSize();this.propertyContainer.append(t);e.BoldBIDashboardDropDownList({change:this.bbdesigner$.proxy(this.onDatasetFieldChange,this),selectedIndex:0,width:"120px",height:"24px",dataSource:this.getAvailableFields(),cssClass:"bbi-designer-ejwidgets-dataConfig bbi-designer-content-label bbi-dbrd-control",fields:{text:"id",value:"text"}});f=this.dashboardDesigner.modules.dataConfiguration;f.isLoaded()||this.dashboardDesigner.modules.dataConfiguration.renderContainer(t);f.showDataConfig(!0,this.resizeObj);this.targetTag.append(this.propertyContainer);t.BoldBIDashboardTab({itemActive:this.bbdesigner$.proxy(this.onTabActive,this),beforeActive:this.bbdesigner$.proxy(this.onTabBeforeActive,this)});this.ejPanelScroller=this.propertyPanelContainer.data("BoldBIDashboardScroller");this.ejPanelTab=t.data("BoldBIDashboardTab");this.calWidth=this.propertyPanelContainer.width()},n.prototype.isShowDataSetList=function(n){BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.designerSettings)||BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.designerSettings.dataSourceConfig)||BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.designerSettings.dataSourceConfig.hideDataSourceList)||!this.dashboardDesigner.model.designerSettings.dataSourceConfig.hideDataSourceList?n.removeClass("bbi-hide-datasetlist-assign"):n.addClass("bbi-hide-datasetlist-assign")},n.prototype.setPropertyHeaderValue=function(n){this.propertyHeaderVal=n},n.prototype.onDatasetFieldChange=function(n){var t;if(!BoldBIDashboard.isNullOrUndefined(n.selectedValue)&&n.isInteraction&&this.ejPanelTab.option("selectedItemIndex")===1){var i=this.widgetHelper.getCurrentWidgetInstance(),r=!1,u=n.selectedValue===i.DataGroupInfo.DataSourceID;for(t=0;t<i.DataGroupInfo.FieldContainers.length;t++)if(i.DataGroupInfo.FieldContainers[t].FieldInfos.length!==0){r=!0;break}if(r&&!u){this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.ResetDataSource,this.locale.propertyPanel.promptWindowContent,IconType.question,AlertType.Confirm,!1,"",{dataInfo:{event:n},instance:this,method:"confirmExecution"});return}BoldBIDashboard.DashboardUtil.invokeMethod(this.dashboardDesigner.modules.dataConfiguration,"updateDatasetFields",[n.selectedValue,n.selectedText,!1])}BoldBIDashboard.DashboardUtil.invokeMethod(this.dashboardDesigner.modules.dataConfiguration,"updateDatasetAndName",[n.selectedValue,n.selectedText,!1])},n.prototype.confirmExecution=function(n,t){if(n){BoldBIDashboard.DashboardUtil.invokeMethod(this.dashboardDesigner.modules.dataConfiguration,"updateDatasetFields",[t.event.selectedValue,t.event.selectedText,!0]);var i=this.widgetHelper.getCurrentWidgetInstance();i.resetUrlLink()}else this.updateDropdownVal()},n.prototype.refreshScroller=function(){this.ejPanelScroller&&this.ejPanelScroller.refresh()},n.prototype.resetTargetItems=function(){this.targetItems=null},n.prototype.showOrHideProperties=function(n){var e,i,u,s,f,t,r;if(!BoldBIDashboard.isNullOrUndefined(n))if(e=BoldBIDashboard.Dashboard.WidgetHelper.isDataWidget(n),!e||BoldBIDashboard.Dashboard.WidgetHelper.isOlderDashboardWidgets(n)||n.isNecessaryDataConfigured()||BoldBIDashboard.isNullOrUndefined(this.activeElement)){if(!BoldBIDashboard.isNullOrUndefined(this.activeElement))for(f=this.activeElement.find(".bbi-dbrd-hiddendiv"),t=0;t<f.length;t++)r=f.eq(t),r.length>0&&r.remove()}else for(i=this.activeElement.find(".bbi-property-row-header").next(),t=0;t<i.length;t++)if(u=i.eq(t),!u.prev().hasClass("e-last-item")&&u.prev().hasClass("bbi-item-expand")){var h=i.eq(t).find(".bbi-property-row-container"),o=h.height()+10,r=i.eq(t).find(".bbi-dbrd-hiddendiv");r.length===1?r.css({height:o+"px"}):(s=BoldBIDashboard.buildTag("div.bbi-dbrd-hiddendiv","",{height:o+"px"}),i.eq(t).prepend(s))}},n.prototype.setTitle=function(n){var i,r;if(!BoldBIDashboard.isNullOrUndefined(n)){var t=this.dashboardDesigner.modules.Mode.designCanvas.find("#"+this.dashboardDesigner._id+"_"+n.UniqueName),f=!0,u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(t);BoldBIDashboard.Dashboard.WidgetHelper.isContainerWidget(u)&&(f=this.dashboardDesigner.modules.containerTypeWidgetHelper.getWidgetAsContainerWidget(u).allowTitleChange);f&&(BoldBIDashboard.isNullOrUndefined(n.ContainerSettings)?t.find(".bbi-dbrd-control-title").html(this.activeProperty.Header).addClass("bbi-dbrd-designer-hoverable").attr("data-tooltip",this.activeProperty.Header):(i=t.find(".bbi-dbrd-control-title").first().addClass("bbi-dbrd-designer-hoverable"),r=n.ContainerSettings.Title,r=this.labelParameter.getResultantParameterString(r,n.Data.Id),i.html(r),this.widgetHelper.updateConditionBasedWidgetTitleFont(n.ContainerSettings.WidgetTitleFontInfo.AutoFontSize,n.ContainerSettings.WidgetTitleFontInfo.FontSize,u),i.attr("data-tooltip",i.text()),this.labelParameter.adjustParameterColumn(t.find(".bbi-dbrd-control-title-wrapper"))))}},n.prototype.setDescription=function(n,t){if(!BoldBIDashboard.isNullOrUndefined(n)){n.ContainerSettings.Description=t;var u=0,i=this.dashboardDesigner.modules.Mode.designCanvas.find("#"+this.dashboardDesigner._id+"_"+n.UniqueName),r=i.find(".bbi-dbrd-control-description").addClass("bbi-dbrd-designer-hoverable"),f=i.find(".bbi-dbrd-controlIcon-container");u=f.outerWidth(!0)+10;i.find(".bbi-dbrd-control-title-wrapper").css({width:"calc(100%)"});!BoldBIDashboard.isNullOrUndefined(n.ContainerSettings)&&!BoldBIDashboard.isNullOrUndefined(n.ContainerSettings.Description)&&n.ContainerSettings.Description.trim().length>0?(i.find(".bbi-dbrd-control-title").css({"max-width":"calc(100% - "+(r.width()+u)+"px)"}),r.addClass("bbi-dbrd-control-align"),BoldBIDashboard.Dashboard.WidgetHelper.updateLabelParameterForDescription(n,r,this.dashboardDesigner)):(i.find(".bbi-dbrd-control-title").css({"max-width":"100%"}),r.attr("style","display: none !important"))}},n.prototype.setSubTitle=function(n,t){var i;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.ContainerSettings)&&(n.ContainerSettings.SubTitle=t,i=this.dashboardDesigner.modules.Mode.designCanvas.find("#"+this.dashboardDesigner._id+"_"+n.UniqueName),n.ContainerSettings.ShowHeader)){var s=i.find(".bbi-dbrd-control-sub-header")[0].style.display==="none"&&!BoldBIDashboard.isNullOrUndefined(n.ContainerSettings.SubTitle)&&n.ContainerSettings.SubTitle.trim().length>0||i.find(".bbi-dbrd-control-sub-header")[0].style.display==="block"&&!BoldBIDashboard.isNullOrUndefined(n.ContainerSettings.SubTitle)&&n.ContainerSettings.SubTitle.trim().length===0,r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(i),u=i.find(".bbi-dbrd-control-sub-header"),f=i.find(".bbi-dbrd-control-sub-title"),h=i.find(".bbi-dbrd-content-container"),e=n.ContainerSettings.SubTitle,o=i.find(".bbi-dbrd-control-header").outerHeight(!0);!BoldBIDashboard.isNullOrUndefined(n.ContainerSettings.SubTitle)&&n.ContainerSettings.SubTitle.trim().length>0?(o+=u.outerHeight(!0),u.css("display","block"),e=this.labelParameter.getResultantParameterString(e,n.Data.Id)):u.css("display","none");f.html(e);this.widgetHelper.updateConditionBasedWidgetSubTitleFont(n.ContainerSettings.WidgetSubTitleFontInfo.AutoFontSize,n.ContainerSettings.WidgetSubTitleFontInfo.FontSize,r);f.addClass("bbi-dbrd-designer-hoverable").attr("data-tooltip",f.text());h.css({height:"calc(100% - "+o+"px)"});r.updateSubTitleForContainer();s&&r.updateSize(r.CellInfo);this.labelParameter.adjustParameterColumn(i.find(".bbi-dbrd-control-sub-header"))}},n.prototype.onTabBeforeActive=function(n){n.activeHeader.innerText===this.locale.propertyPanel.assignDataText?(this.targetTag.find("#"+this.id+"_waitingPopup_propertypaneldiv").css("display","none"),this.dashboardDesigner.element.find("#"+this.id+"_propertyTabUl_datasetListContainer").css("display","inline-block"),this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_dataTabRootElement").css("display","block")):(this.dashboardDesigner.element.find("#"+this.id+"_propertyTabUl_datasetListContainer").css("display","none"),this.targetTag.find("#"+this.id+"_waitingPopup_propertypaneldiv").css("display","inline-block"),this.propertyPanelContainer.css("display","block"))},n.prototype.onTabActive=function(n){var i=this,t,r;(BoldBIDashboard.isNullOrUndefined(n.activeHeader)?n===this.locale.propertyPanel.assignDataText:n.activeHeader.innerText===this.locale.propertyPanel.assignDataText)?(this.dataConfigTimeOut&&clearTimeout(this.dataConfigTimeOut),this.updateDropDown(),BoldBIDashboard.DashboardUtil.invokeMethod(this.dashboardDesigner.modules.dataConfiguration,"showIndicator"),this.dashboardDesigner.element.find("#"+this.id+"_propertyTabUl_datasetListContainer").css("display","inline-block"),this.dataConfigTimeOut=setTimeout(function(){BoldBIDashboard.DashboardUtil.invokeMethod(i.dashboardDesigner.modules.dataConfiguration,"showDataConfig",[!0,i.resizeObj])},300)):(this.isWaitingPopupEnabled&&this.ejWaitingPane.show(),this.designPanel.selectedReportItems.length>0&&(t=this.widgetHelper.getCurrentWidgetInstance(),this.refreshScroller()),this.resizeObj.isPropertyPanel&&(this.updateSize(),this.resizeObj.isPropertyPanel=!1),BoldBIDashboard.isNullOrUndefined(t)||(r=BoldBIDashboard.isNullOrUndefined(t.getCurrentWidgetConfiguration())?null:t.getCurrentWidgetConfiguration().guid,this.showPropertyItem(t.getPropertyPanelItems(),r)))},n.prototype.getPropertyTab=function(){return this.dashboardDesigner.element.find("#"+this.id+"_propertyTab").data("BoldBIDashboardTab")},n.prototype.setPropertyTabIndex=function(n){var t=this.getPropertyTab();t.option("selectedItemIndex",n)},n.prototype.getAvailableFields=function(){var n=this.dashboardDesigner.modules.dataSet.datasets,i=[],t;if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0)for(t=0;t<n.length;t++)i.push({id:n[t].Name,text:n[t].Id});return i},n.prototype.setPropertyHeader=function(n){var s,t,i,r,u,f,e,o;if(BoldBIDashboard.isNullOrUndefined(this.propertyHeader)?this.renderPropertyHeader(n,n.Type):(this.headerInput.val(n.Header),this.subHeaderInput.val(n.SubTitle),this.descriptionInput.val(n.Description),this.propertyHeaderVal=n.Header),n.Type===this.locale.exportPanel.dashboardOption?(s=this.dashboardDesigner.rptToolbar,s.updateDashboardTitleText(n.Header),this.headerContainer.css("display","none"),this.subTitleContainer.css("display","none"),this.headerInput.css("display","none")):(this.headerContainer.css("display","block"),this.subTitleContainer.css("display","block"),this.headerInput.css("display","block")),this.dashboardPropertyContainer[0].style.display="inline-block",n.Type!=="Dashboard")this.dashboardPropertyContainer.find("#"+this.id+"_propertyCheckboxDiv_CheckBox").css({display:"none"}),this.dashboardPropertyContainer.find("#"+this.id+"_propertyCheckboxDiv_CheckBox").css({display:"none"}),this.dashboardPropertyContainer.find("#"+this.id+"_propertyCheckboxDiv_pdfCheckBox").css({display:"none"}),this.dashboardPropertyContainer.find("#"+this.id+"_propertyCheckboxDiv_imageCheckBox").css({display:"none"}),this.dashboardPropertyContainer.find("#"+this.id+"_propertyCheckboxDiv_excelCheckBox").css({display:"none"});else{var h=void 0,c=void 0,l=void 0,a=void 0;for(t=0;t<n.Actions.Items.length;t++)n.Actions.Items[t].name==="Pdf"?h=n.Actions.Items[t].value:n.Actions.Items[t].name==="Image"?c=n.Actions.Items[t].value:n.Actions.Items[t].name==="Excel"?l=n.Actions.Items[t].value:n.Actions.Items[t].name==="Comment"&&(a=n.Actions.Items[t].value);this.dashboardPropertyContainer.find("#"+this.id+"_propertyCheckboxDiv_CheckBox").css({display:"block"});i=this.ejCheckboxObj[this.id+"_propertyCheckbox_CheckBox"];BoldBIDashboard.isNullOrUndefined(i)||(this.activeProperty=n,i.option("checked",a));this.dashboardPropertyContainer.find("#"+this.id+"_propertyCheckboxDiv_pdfCheckBox").css({display:"block"});r=this.ejCheckboxObj[this.id+"_propertyCheckbox_pdfCheckBox"];BoldBIDashboard.isNullOrUndefined(r)||(this.activeProperty=n,r.option("checked",h));this.dashboardPropertyContainer.find("#"+this.id+"_propertyCheckboxDiv_imageCheckBox").css({display:"block"});u=this.ejCheckboxObj[this.id+"_propertyCheckbox_imageCheckBox"];BoldBIDashboard.isNullOrUndefined(u)||(this.activeProperty=n,u.option("checked",c));this.dashboardPropertyContainer.find("#"+this.id+"_propertyCheckboxDiv_excelCheckBox").css({display:"block"});f=this.ejCheckboxObj[this.id+"_propertyCheckbox_excelCheckBox"];BoldBIDashboard.isNullOrUndefined(f)||(this.activeProperty=n,f.option("checked",l))}e=this.designPanel.selectedReportItems[0];BoldBIDashboard.isNullOrUndefined(e)||(o=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(e),o.ShowSubtitle||(this.subTitleContainer.css("display","none"),this.dashboardPropertyContainer[0].style.display="none"),o.isDefaultDataWidget()&&this.subTitleContainer.css("display","none"));BoldBIDashboard.isNullOrUndefined(n.ShowPropertyHeader)||n.ShowPropertyHeader?this.propertyHeader.show():this.propertyHeader.hide();this.validatePropertyValues({name:"Name",value:n.Header},"General",n.Type,!1)},n.prototype.getPropertyIndexes=function(n){var u={},r=0,f,i,t;if(n.Type!=="Dashboard"){for(this.properties=n,f=n.Items.length,i=0;i<f;i++)if(n.Items[i].Items&&n.Items[i].Items.length>0)for(t=0;t<n.Items[i].Items.length;t++)u[r]={name:n.Items[i].CategoryName,index:t},r++}else{if(n.Actions.Items&&n.Actions.Items.length>0)for(t=0;t<n.Actions.Items.length;t++)u[r]={name:n.Actions.CategoryName,index:t},r++;if(n.DashboardFonts.Items&&n.DashboardFonts.Items.length>0)for(t=0;t<n.DashboardFonts.Items.length;t++)u[r]={name:n.DashboardFonts.CategoryName,index:t},r++}return u},n.prototype.getRowProperty=function(n,t,i){var u,r;if(n.Type==="Dashboard"){if(t==="FontSettings"&&n.DashboardFonts.Items&&n.DashboardFonts.Items.length>0&&n.DashboardFonts.CategoryName===t)return n.DashboardFonts.Items[i];if(t==="Actions"&&n.Actions.Items&&n.Actions.Items.length>0&&n.Actions.CategoryName===t)return n.Actions.Items[i]}for(u=n.Items.length,r=0;r<u;r++)if(n.Items[r].Items&&n.Items[r].Items.length>0&&n.Items[r].CategoryName===t)return n.Items[r].Items[i];return null},n.prototype.renderPropertyHeaders=function(n,t){for(var r=n.Items.length,i=0;i<r;i++)this.setPropertyItem(t,n.Items[i],n.Type,i===r-1)},n.prototype.renderRowElement=function(n,t,i){var r=i.split(" ").join("").replace("&",""),u=this.jQContainerRows[this.id+"_tableElement_"+t+"_"+r],f=this.jQHeaderRows[this.id+"_elementContainer_"+t+"_"+r].find(".bbi-header-row-icon");f.removeClass("bbi-designer-plus").addClass("bbi-designer-minus");this.populatePropertyItem(null,u,n,r,t,!0)},n.prototype.updateRowValue=function(n,t){var i=n.CategoryName.split(" ").join("").replace("&","");this.updateCategoryVisibility(t,i,BoldBIDashboard.isNullOrUndefined(n.IsVisible)?!0:n.IsVisible);this.updatePropertyItem(n.Items,i,t)},n.prototype.showPropertyItem=function(n,t){var r,i,u;this.propertyContainer.is(":visible")&&(BoldBIDashboard.DashboardUtil.isEqualObj(n,this.activeProperty)||(r=t&&t.length>0?t:n.Type,this.setPropertyHeader(n),i=this.dashboardDesigner.element.find("#"+this.id+"_"+r.toLowerCase()+"_item_property"),this.propertyIndexes=this.getPropertyIndexes(n),i.length===0?(this.pausePropertyRender(),this.activeElement&&this.activeElement.css("display","none"),i=this.activeElement=BoldBIDashboard.buildTag("div","",{width:"100%",display:"block","margin-top":"7px"},{id:this.id+"_"+r.toLowerCase()+"_item_property"}),this.scrollElement.append(i),n.Type!=="Dashboard"?this.renderPropertyHeaders(n,i):(this.setPropertyItem(i,n.DashboardFonts,n.Type,!0),this.setPropertyItem(i,n.Actions,n.Type,!0)),this.currentItemIndex=0,this.activeProperty=n,this.endItemIndex=Object.keys(this.propertyIndexes).length,this.startPropertyRender()):i.length>0&&i.hasClass("e-pro-pause")&&(BoldBIDashboard.isNullOrUndefined(this.activeElement)||this.activeElement.attr("id")!==i.attr("id"))?(this.activeElement&&this.activeElement.css("display","none"),i.css("display","block"),this.pausePropertyRender(),this.activeProperty=n,this.activeElement=i,this.resumePropertyRender()):i.length>0&&i.hasClass("e-pro-pause")&&this.activeElement.attr("id")===i.attr("id")?(i.css("display","block"),this.currentItemIndex!==this.endItemIndex&&(i.addClass("e-pro-resume"),this.activeProperty=n)):i.hasClass("e-pro-completed")&&(this.activeElement&&this.activeElement.css("display","none"),i.css("display","block"),this.pausePropertyRender(),this.activeProperty=n,this.activeElement=i,this.updateProperties(),u=this.widgetHelper.getCurrentWidgetInstance(),this.showOrHideProperties(u))))},n.prototype.startPropertyRender=function(){this.groupInterval&&(clearInterval(this.groupInterval),this.groupInterval=null);this.canUpdate=!1;this.groupInterval=setInterval(this.bbdesigner$.proxy(this.tickPropertyRender,this),0);this.targetTag.find("#"+this.id+"_waitingPopup_propertypaneldiv").height(this.dashboardDesigner.element.find("#"+this.id+"_propertyPanel").height()-34+"px");this.showIndicator()},n.prototype.tickPropertyRender=function(){if(this.currentItemIndex<this.endItemIndex){try{var n=this.propertyIndexes[this.currentItemIndex],i=this.getRowProperty(this.activeProperty,n.name,n.index);this.canUpdate=!1;this.renderRowElement(i,this.activeProperty.Type,n.name);this.canUpdate=!0}catch(t){this.designPanel.logError({Source:"Property Panel Loading:",Error:t,Type:t.name})}this.currentItemIndex++}else this.stopPropertyRender(),this.refreshScroller()},n.prototype.resumePropertyRender=function(){this.currentItemIndex=parseInt(this.activeElement.attr("e-current-index"),10);this.endItemIndex=parseInt(this.activeElement.attr("e-end-index"),10);this.activeElement.addClass("e-pro-resume");this.startPropertyRender()},n.prototype.pausePropertyRender=function(){this.activeElement&&this.currentItemIndex<this.endItemIndex&&(clearInterval(this.groupInterval),this.groupInterval=null,this.activeElement.addClass("e-pro-pause").removeClass("e-pro-completed"),this.activeElement.attr("e-current-index",this.currentItemIndex),this.activeElement.attr("e-end-index",this.endItemIndex),this.currentItemIndex=-1,this.endItemIndex=-1,this.canUpdate=!0);this.hideIndicator()},n.prototype.stopPropertyRender=function(){this.activeElement&&(clearInterval(this.groupInterval),this.groupInterval=null,this.currentItemIndex=-1,this.endItemIndex=-1,this.canUpdate=!0,this.activeElement.addClass("e-pro-completed").removeClass("e-pro-pause"),this.activeElement.hasClass("e-pro-resume")&&this.updateProperties());var n=this.widgetHelper.getCurrentWidgetInstance();this.showOrHideProperties(n);this.hideIndicator()},n.prototype.onPanelScroll=function(){this.bbdesigner$(".e-designer-tooltip:visible").css("display","none")},n.prototype.updateProperties=function(){var n,t,i,r,u;if(this.activeProperty.Type!=="Dashboard"){if(this.canUpdate=!1,this.activeProperty&&this.activeProperty.Items.length>0)for(n=0;n<this.activeProperty.Items.length;n++)t=this.activeProperty.Items[n],this.updateRowValue(t,this.activeProperty.Type);i=this.dashboardDesigner.designerPanel.selectedReportItems;i.length>0?(r=this.widgetHelper.getCurrentWidgetInstance(),u=r.getJson(),this.setTitle(u)):this.setTitle();this.canUpdate=!0}else this.canUpdate=!1,BoldBIDashboard.isNullOrUndefined(this.activeProperty&&this.activeProperty.DashboardFonts)||this.updateRowValue(this.activeProperty.DashboardFonts,this.activeProperty.Type),this.canUpdate=!0;this.refreshScroller()},n.prototype.updateDropdownVal=function(n){var i,r,f,u,t;if(n===void 0&&(n=!1),i=this.dashboardDesigner.element.find("#"+this.id+"_propertyTabUl_datasetList").data("BoldBIDashboardDropDownList"),!BoldBIDashboard.isNullOrUndefined(i)){if(r=this.getAvailableFields(),f=0,n||i.option("dataSource",r),u=this.widgetHelper.getCurrentWidgetInstance().DataGroupInfo,!BoldBIDashboard.isNullOrUndefined(u))for(t=0;t<r.length;t++)if(r[t].id===u.DataSourceName){f=t;this.dashboardDesigner.modules.dataConfiguration.selectedDatasetName=u.DataSourceName;break}n||i.option("selectedIndex",f)}},n.prototype.hasRptDataSet=function(){var n=this.dashboardDesigner.modules.dataSet.datasets;return n&&n.length>0?!0:!1},n.prototype.showIndicator=function(){this.propertyPanelContainer.is(":visible")&&this.ejWaitingPane.show();var n=this.designPanel.selectedReportItems;n[0]&&n[0].length>0&&(BoldBIDashboard.Dashboard.WidgetHelper.isDataWidget(this.widgetHelper.getCurrentWidgetInstance())?(this.ejPanelTab.option("hiddenItemIndex",[]),this.ejPanelTab.option("disabledItemIndex",[1])):this.ejPanelTab.option("hiddenItemIndex",[1]));this.isWaitingPopupEnabled=!0},n.prototype.hideIndicator=function(){var n=this.designPanel.selectedReportItems;this.ejWaitingPane.hide();n[0]&&n[0].length>0&&BoldBIDashboard.Dashboard.WidgetHelper.isDataWidget(this.widgetHelper.getCurrentWidgetInstance())&&this.ejPanelTab.option("enabledItemIndex",[1]);this.isWaitingPopupEnabled=!1},n.prototype.hidePropertyPanel=function(){this.activeElement&&this.activeElement.hasClass("e-pro-completed")?(this.hideIndicator(),this.activeElement.css("display","none"),this.activeProperty=null,this.activeElement=null):(this.pausePropertyRender(),this.hideIndicator(),this.activeElement&&this.activeElement.css("display","none"),this.activeProperty=null,this.activeElement=null);clearInterval(this.groupInterval);this.groupInterval=null},n.prototype.enableDataTab=function(n){if(n&&n.length>0&&BoldBIDashboard.Dashboard.WidgetHelper.isDataWidget(BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(n)))if(this.isWaitingPopupEnabled)this.ejPanelTab.option("disabledItemIndex",[1]);else{var t=this.dashboardDesigner.modules.dataConfiguration;this.hasRptDataSet()?(t.showAlertContainer(!1),this.updateDropdownVal(!0)):t.showAlertContainer(!0);this.ejPanelTab.option("hiddenItemIndex",[])}else this.ejPanelTab.option("hiddenItemIndex",[1]);this.resetDataTab()},n.prototype.updateDropDown=function(){var t=this.dashboardDesigner.element.find("#"+this.id+"_propertyTabUl_datasetList").data("BoldBIDashboardDropDownList"),n;if(!BoldBIDashboard.isNullOrUndefined(t)){var r=this.widgetHelper.getCurrentWidgetInstance().DataGroupInfo,i=this.getAvailableFields(),u=0;if(!BoldBIDashboard.isNullOrUndefined(r))for(n=0;n<i.length;n++)i[n].text===r.DataSourceID&&(u=n);t.option("dataSource",i);t.option("selectedIndex",u)}},n.prototype.resetDataTab=function(){if(!BoldBIDashboard.isNullOrUndefined(this.ejPanelTab)&&this.ejPanelTab.option("selectedItemIndex")===1)this.onTabActive(this.locale.propertyPanel.assignDataText)},n.prototype.showPropertyPanel=function(n,t){this.propertyContainer.css("display",n?"block":"none");BoldBIDashboard.isNullOrUndefined(this.designPanel)&&(this.designPanel=this.dashboardDesigner.designerPanel);n?BoldBIDashboard.isNullOrUndefined(this.ejPanelTab)||((this.designPanel.selectedReportItems.length===0||this.designPanel.selectedReportItems.length>1)&&this.enableDataTab(null),this.selectProperties()):this.hidePropertyPanel();t.isPropertyPanel&&(this.resizeObj.isDataAssign=!0,this.resizeObj.isPropertyPanel=!1,this.updateSize(),t.isPropertyPanel=!1)},n.prototype.showDesignAreaProperty=function(n,t){this.ejPanelTab.option("hiddenItemIndex",t==="Dashboard"?[1]:[]);this.ejPanelTab.option("selectedItemIndex")===1&&this.ejPanelTab.option("selectedItemIndex",0);this.showPropertyItem(n,t)},n.prototype.selectProperties=function(){var n=this.designPanel.selectedItems,t=this.designPanel.selectedReportItems;t.length>0?this.setPropertyElement(t):n.length>0?BoldBIDashboard.isNullOrUndefined(this.bbdesigner$(n[0]).attr("designPanel"))&&this.bbdesigner$(n[0]).attr("class")!=="bbi-dashboarddesigner-designPanel"||this.showReportProperties():t.length===0&&this.showReportProperties()},n.prototype.showReportProperties=function(){var n=this.dashboardDesigner.designerPanel.getDesignProperty();this.targetDesignArea="Dashboard";this.showPropertyItem(n,"Dashboard")},n.prototype.showProperty=function(n){var t=null;this.dashboardDesigner.model.mode!==BoldBIDashboard.Designer.mode.view&&(t=this.dashboardDesigner.modules.dataConfigurationPanel);BoldBIDashboard.isNullOrUndefined(t)||(n?t.showConfigurationPanel(!0,"Properties"):t.showConfigurationPanel(!1,"Properties"),this.dashboardDesigner.element.find("#"+this.id+"_collapse_wrapper").css("display",n?"block":"none"))},n.prototype.renderPropertyHeader=function(n){var t,i,r,u,f,e;this.propertyHeader=BoldBIDashboard.buildTag("div","",{overflow:"hidden","margin-bottom":"15px"},{id:this.id+"_propertyItemHeaderName"});this.headerContainer=BoldBIDashboard.buildTag("div","",{});t=BoldBIDashboard.buildTag("span.bbi-designer-fontfamily","",{overflow:"hidden","font-size":"13px",display:"inline-block","font-weight":"600",width:this.propertyPanelContainer.width()-48+"px",margin:"7px",float:"left","margin-right":"3px","margin-left":"10px"},{id:this.id+"_propertyItemHeaderText_Name"});t.text(this.locale.propertyPanel.widgetName);i=BoldBIDashboard.buildTag("span","",{float:"right","padding-top":"11px","padding-right":"5px"},{id:this.id+"_propertyItemHeaderText_Name_error"});this.dashboardDesigner.modules.util.renderErrIndictor(i,this.id);this.headerContainer.append(t,i);this.propertyHeader.append(this.headerContainer);this.headerInput=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-fontfamily","",{margin:"3px","margin-left":"10px",width:this.propertyPanelContainer.width()-23+"px",height:"28px","box-sizing":"border-box"},{id:this.id+"_propertyItemHeaderInput_Name"});this.headerInput.bind("keyup",this.bbdesigner$.proxy(this.onTextKeyUp,this));this.headerInput.bind("focusout ",this.bbdesigner$.proxy(this.itemNameChange,this));this.headerInput.val(n.Header);this.propertyHeader.append(this.headerInput);this.scrollElement.append(this.propertyHeader);this.subTitleContainer=BoldBIDashboard.buildTag("div","",{display:"inline-block"});r=BoldBIDashboard.buildTag("div","",{});u=BoldBIDashboard.buildTag("span.bbi-dbrd-subtitle-span bbi-designer-fontfamily","",{width:this.propertyPanelContainer.width()-48+"px"},{id:this.id+"_propertyItemSubHeaderText_Name"});u.text(this.locale.propertyPanel.subHeaderText);r.append(u);this.subTitleContainer.append(r);this.subHeaderInput=BoldBIDashboard.buildTag("input.bbi-dbrd-subtitle-header-name e-textbox bbi-designer-fontfamily","",{width:this.propertyPanelContainer.width()-23+"px"},{id:this.id+"_propertyItemSubHeaderInput_Name"});this.subHeaderInput.on("keyup",this.bbdesigner$.proxy(this.onSubTitleTextKeyUp,this));this.subHeaderInput.on("focusout ",this.bbdesigner$.proxy(this.itemSubTitleChange,this));this.subHeaderInput.val(n.SubTitle);this.subTitleContainer.append(this.subHeaderInput);this.propertyHeader.append(this.subTitleContainer);this.dashboardPropertyContainer=BoldBIDashboard.buildTag("div","",{display:"inline-block"});f=BoldBIDashboard.buildTag("div","",{display:"inline-block"});e=BoldBIDashboard.buildTag("span.bbi-designer-fontfamily","",{overflow:"hidden","font-size":"13px",display:"inline-block","font-weight":"600",width:this.propertyPanelContainer.width()-48+"px",margin:"7px",float:"left","margin-right":"3px","margin-left":"10px"},{id:this.id+"_propertyItemDescriptionText_Description"});e.text(this.locale.propertyPanel.descriptionText);f.append(e);this.dashboardPropertyContainer.append(f);this.descriptionInput=BoldBIDashboard.buildTag("textarea.e-textbox bbi-designer-fontfamily","",{margin:"3px","margin-left":"10px",width:this.propertyPanelContainer.width()-37+"px",height:"57px",display:"inline-block",resize:"none",overflow:"auto"},{id:this.id+"_propertyItemDescriptionInput_Description"});this.descriptionInput.bind("keyup",this.bbdesigner$.proxy(this.onDescriptionTextKeyUp,this));this.descriptionInput.bind("blur",this.bbdesigner$.proxy(this.itemDescriptionChange,this));this.descriptionInput.val(n.Description);this.dashboardPropertyContainer.append(this.descriptionInput);this.propertyHeader.append(this.dashboardPropertyContainer)},n.prototype.onTextKeyUp=function(n){n.keyCode===13&&this.itemNameChange(n)},n.prototype.onDescriptionTextKeyUp=function(n){n.keyCode===13&&this.itemDescriptionChange(n)},n.prototype.onSubTitleTextKeyUp=function(n){n.keyCode===13&&this.itemSubTitleChange(n)},n.prototype.getItem=function(n,t,i){for(var u,r=0;r<n.length;r++){if(!BoldBIDashboard.isNullOrUndefined(n[r].name)&&t===n[r].name){u=i>=0?n[r].items[i]:n[r];break}!BoldBIDashboard.isNullOrUndefined(n[r].Items)&&BoldBIDashboard.isNullOrUndefined(u)&&(u=this.getItem(n[r].Items,t,i))}return u},n.prototype.getPropertyElement=function(n,t,i,r){for(var f,u=0;u<n.Items.length;u++)n.Items[u].CategoryName.split(" ").join("").replace("&","")===i&&(f=this.getItem(n.Items[u].Items,t,r));return f},n.prototype.setPropertyElement=function(n){var r=n.length,i,t,u,f;if(r>1)this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.properties,this.locale.propertyPanel.propertyPanelCommonItems,IconType.errors,AlertType.Alert,!1,"",{height:120}),this.showProperty(!1);else{if(this.ejPanelTab.option("selectedItemIndex")===1){this.enableDataTab(n[0]);this.targetItems=n;return}for(this.enableDataTab(n[0]),i=0;i<r;i++)if(t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(n[i]),BoldBIDashboard.isNullOrUndefined(t)||(u=BoldBIDashboard.isNullOrUndefined(t.getCurrentWidgetConfiguration())?null:t.getCurrentWidgetConfiguration().guid,this.showPropertyItem(t.getPropertyPanelItems(),u)),!t.isPropertyPanelRequired){f=this.dashboardDesigner.modules.dataConfigurationPanel;f.onCollapseItemClick(null)}this.targetItems=n}},n.prototype.onExpandCollapseClick=function(n){this.jQHeaderRows[this.id+"_elementContainer_"+n].hasClass("bbi-item-expand")?this.collapseCategory(n):this.expandCategory(n);this.refreshScroller();var t=this.widgetHelper.getCurrentWidgetInstance();this.showOrHideProperties(t)},n.prototype.expandCategory=function(n){this.jQHeaderRows[this.id+"_elementContainer_"+n].addClass("bbi-item-expand").removeClass("bbi-item-collapse");this.jQHeaderRows[this.id+"_elementContainer_"+n].find(".bbi-header-row-icon").addClass("bbi-designer-minus").removeClass("bbi-designer-plus");this.jQContainerRows[this.id+"_tableElement_"+n].css("display","block")},n.prototype.collapseCategory=function(n){this.jQHeaderRows[this.id+"_elementContainer_"+n].removeClass("bbi-item-expand").addClass("bbi-item-collapse");this.jQHeaderRows[this.id+"_elementContainer_"+n].find(".bbi-header-row-icon").removeClass("bbi-designer-minus").addClass("bbi-designer-plus");this.jQContainerRows[this.id+"_tableElement_"+n].css("display","none")},n.prototype.setPropertyItem=function(n,t,i,r){var h,c,o,s;if(t.Items.length>1||t.Items.length===1&&t.Items[0].name!=="Name"){var e=BoldBIDashboard.isNullOrUndefined(t.IsVisible)?!0:t.IsVisible?!0:!1,u=t.CategoryName.split(" ").join("").replace("&",""),f=BoldBIDashboard.buildTag("div.bbi-property-row-header "+(r?"e-last-item":"e-mid-item")+(e?" bbi-item-expand":" bbi-item-collapse"),"",{width:"100%",height:"25px",display:e?"block":"none"},{id:this.id+"_elementContainer_"+i+"_"+u});this.jQHeaderRows[this.id+"_elementContainer_"+i+"_"+u]=f;h=BoldBIDashboard.buildTag("div.bbi-header-row-txt",BoldBIDashboard.isNullOrUndefined(t.DisplayName)?t.CategoryName:t.DisplayName,{float:"left","font-size":"13px","margin-left":"12px","margin-top":"4px"},{id:this.id+"_header_"+i+"_"+u});f.append(h);c=BoldBIDashboard.buildTag("span.bbi-header-row-icon "+(e?"bbi-designer-minus":"bbi-designer-plus"),"",{float:"right","margin-top":"-2px"});f.append(c);n.append(f);o=BoldBIDashboard.buildTag("div","",{"margin-top":"10px","margin-bottom":"10px",display:"inline-block"});s=BoldBIDashboard.buildTag("div.bbi-property-row-container","",{margin:"0.5px","margin-bottom":"0px",display:e?"block":"none"},{id:this.id+"_tableElement_"+i+"_"+u});this.jQContainerRows[this.id+"_tableElement_"+i+"_"+u]=s;o.append(s);n.append(o);f.bind("click",this.bbdesigner$.proxy(this.onExpandCollapseClick,this,i+"_"+u))}},n.prototype.setIcons=function(n,t,i,r){var f=BoldBIDashboard.buildTag("div"),u=BoldBIDashboard.buildTag("a."+t.icon.class,"",{float:"left",cursor:"pointer","text-decoration":"none",display:"block"},{id:this.id+"_"+i+"_"+r+"_"+t.name+"_icon"});u.attr("data-tooltip",t.icon.tooltip);t.icon.link!==""&&(u.attr("href",t.icon.link),u.attr("target","_blank"));f.append(u);n.append(f)},n.prototype.updatePropertyItem=function(n,t,i){for(var f,u,r=0;r<n.length;r++)n[r].itemType==="float"?this.setNumber(null,null,t,n[r],!0,i):n[r].itemType==="color"?this.setColor(null,null,t,n[r],i):n[r].itemType==="dropdown"?this.setDropDown(null,null,t,n[r],i):n[r].itemType==="autocomplete"||(n[r].itemType==="bool"?(f=this.bbdesigner$.extend(!0,{},n[r]),f.valueList=["true","false"],this.setBoolean(null,null,t,n[r],i)):n[r].itemType==="tooltip"?(u=this.widgetHelper.getCurrentWidgetInstance(),n[r].categoryName=t,u.renderTooltipSettings(null,i+"_"+t)):n[r].itemType==="link"?(u=this.widgetHelper.getCurrentWidgetInstance(),n[r].categoryName=t,u.urlLinkingAction(null,i+"_"+t,n[r])):n[r].itemType==="interWidgetLink"?(n[r].categoryName=t,this.dashboardDesigner.modules.interWidgetLinkInstance.render(null,i+"_"+t,n[r])):n[r].itemType==="button"?this.setButton(null,null,t,n[r],i):n[r].itemType==="object"?this.dashboardDesigner.designerPanel.selectedReportItems.length>0&&(n[r].categoryName=t,BoldBIDashboard.DashboardUtil.invokeMethod(n[r].callbackInstance,n[r].callbackMethod,[null,i+"_"+t,n[r],i])):n[r].itemType==="fontSettings"?(u=this.widgetHelper.getCurrentWidgetInstance(),this.updateFontSettings(u,n[r],t,i)):n[r].itemType==="noDataContainer"?this.dashboardDesigner.modules.EmptyContainerAppearence.render(null,i+"_"+t,n[r]):n[r].name!=="Name"&&this.setLabel(null,null,t,n[r],i));t==="ViewUnderlyingDataActions"&&this.dashboardDesigner.modules.containerPropertyItem.updateViewDataSectionVisibility()},n.prototype.updateFontSettings=function(n,t,i,r){BoldBIDashboard.isNullOrUndefined(n)?this.designPanel.updateFontSettings(t,i):(n.getContainerProperty().updateFontSettings(t,i,n),this.setBoolean(null,null,i,t.autoFontSettingsInfo,r),this.setNumber(null,null,i,t.fontSizeInfo,!0,r))},n.prototype.isNullOrEmpty=function(n){return n===""||n===null},n.prototype.updatePropertyValue=function(n,t,i){var r,f,u,e,c,o;if(BoldBIDashboard.isNullOrUndefined(n.itemType)||BoldBIDashboard.isNullOrUndefined(n.categoryName)||BoldBIDashboard.isNullOrUndefined(n.name))n.categoryName==="General"&&n.name==="Name"&&this.headerInput.val(i);else{if(n.itemType==="float")r=this.ejNumbericObj[this.id+"_"+t+"_"+n.categoryName+"_"+n.name],BoldBIDashboard.isNullOrUndefined(r)||BoldBIDashboard.isNullOrUndefined(n.minimum)||r.option("minValue",n.minimum),BoldBIDashboard.isNullOrUndefined(r)||r.option("value",parseFloat(i));else if(n.itemType==="color")f=this.ejColorPickObj[this.id+"_"+t+"_"+n.categoryName+"_"+n.name],BoldBIDashboard.isNullOrUndefined(f)||this.isNullOrEmpty(f.option("value"))&&this.isNullOrEmpty(BoldBIDashboard.DashboardUtil.getColorCode(i))||f.option("value",BoldBIDashboard.DashboardUtil.getColorCode(i));else if(n.itemType==="dropdown"){var s=-1,l=BoldBIDashboard.isNullOrUndefined(n.valueList)?0:n.valueList.length,h=this.ejDropDownObj[this.id+"_"+t+"_"+n.categoryName+"_"+n.name];if(!BoldBIDashboard.isNullOrUndefined(h)){for(u=0;u<l;u++)if(n.valueList[u]===i){s=u;break}h.option("selectedIndex",s)}}else n.itemType==="bool"?(e=this.ejCheckboxObj[this.id+"_"+t+"_"+n.categoryName+"_"+n.name],BoldBIDashboard.isNullOrUndefined(e)||e.option("checked",i)):n.itemType==="link"?(c=this.widgetHelper.getCurrentWidgetInstance(),n.value=i,c.urlLinkingAction(null,t+"_"+n.categoryName,n)):n.itemType==="interWidgetLink"?this.dashboardDesigner.modules.interWidgetLinkInstance.render(null,t+"_"+n.categoryName,n):n.itemType==="object"?BoldBIDashboard.DashboardUtil.invokeMethod(n.callbackInstance,n.callbackMethod,[null,t+"_"+n.categoryName,n,t]):n.itemType==="noDataContainer"?this.dashboardDesigner.modules.EmptyContainerAppearence.render(null,t+"_"+n.categoryName,n):n.name!=="Name"?(o=this.ejMaskEditObj[this.id+"_"+t+"_"+n.categoryName+"_"+n.name],BoldBIDashboard.isNullOrUndefined(o)||o.val(i)):this.headerInput.val(i);n.value=i}},n.prototype.populatePropertyItem=function(n,t,i,r,u,f){var c=0,o=[],e,h,s;for(f&&(o=[i],c=1),r=r.split(" ").join("").replace("&",""),e=0;e<c;e++)o[e].itemType==="float"?this.setNumber(n,t,r,o[e],!0,u):o[e].itemType==="color"?this.setColor(n,t,r,o[e],u):o[e].itemType==="dropdown"?this.setDropDown(n,t,r,o[e],u):o[e].itemType==="autocomplete"||(o[e].itemType==="bool"?(h=this.bbdesigner$.extend(!0,{},o[e]),h.valueList=["true","false"],r==="Actions"&&h.name!=="Comment"&&this.setExportingTitle(o[e],t),this.setBoolean(n,t,r,o[e],u)):o[e].itemType==="tooltip"?(s=this.widgetHelper.getCurrentWidgetInstance(),o[e].categoryName=r,s.renderTooltipSettings(t,u+"_"+r)):o[e].itemType==="link"?(s=this.widgetHelper.getCurrentWidgetInstance(),o[e].categoryName=r,s.urlLinkingAction(t,u+"_"+r,o[e])):o[e].itemType==="interWidgetLink"?this.dashboardDesigner.modules.interWidgetLinkInstance.render(t,u+"_"+r,o[e]):o[e].itemType==="button"?this.setButton(n,t,r,o[e],u):o[e].itemType==="object"?(o[e].categoryName=r,BoldBIDashboard.DashboardUtil.invokeMethod(o[e].callbackInstance,o[e].callbackMethod,[t,u+"_"+r,o[e],u])):o[e].itemType==="fontSettings"?this.setFontSetting(n,t,r,o[e],u):o[e].itemType==="noDataContainer"?this.dashboardDesigner.modules.EmptyContainerAppearence.render(t,u+"_"+r,o[e]):o[e].name!=="Name"&&this.setLabel(n,t,r,o[e],u));r==="ViewUnderlyingDataActions"&&this.dashboardDesigner.modules.containerPropertyItem.updateViewDataSectionVisibility()},n.prototype.setExportingTitle=function(n,t){if(this.dashboardDesigner.element.find("#"+this.id+"_propertyItemHeaderText_allowExporting").length===0){var i=BoldBIDashboard.buildTag("span.bbi-designer-allowExporting-title","",{display:BoldBIDashboard.isNullOrUndefined(n.isTitleVisible)||n.isTitleVisible?"inline-block":"none",width:this.propertyPanelContainer.width()-48+"px"},{id:this.id+"_propertyItemHeaderText_allowExporting"});i.text(this.locale.propertyPanel.containerActions.allowExportingText);t.append(i)}},n.prototype.setFontSetting=function(n,t,i,r,u){var f=BoldBIDashboard.buildTag("span.bbi-designer-fontfamily","",{overflow:"hidden","font-size":"13px",display:BoldBIDashboard.isNullOrUndefined(r.isTitleVisible)||r.isTitleVisible?"inline-block":"none","font-weight":"600",width:this.propertyPanelContainer.width()-48+"px",margin:"7px",float:"left","margin-right":"3px","margin-left":"10px"},{id:this.id+"_propertyItemHeaderText_"+r.name});f.text(r.displayName);t.append(f);this.setBoolean(n,t,i,r.autoFontSettingsInfo,u);this.setNumber(n,t,i,r.fontSizeInfo,!0,u)},n.prototype.setColor=function(n,t,i,r,u){var a,o;if(BoldBIDashboard.isNullOrUndefined(t))this.updateItemVisibility(u,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isVisible)?!0:r.isVisible),o=this.ejColorPickObj[this.id+"_"+u+"_"+i+"_"+r.name],BoldBIDashboard.isNullOrUndefined(o)||o.option("value",BoldBIDashboard.DashboardUtil.getColorCode(r.value)),this.updateItemDisable(r.itemType,u,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1);else{var f=BoldBIDashboard.buildTag("div","",{"margin-bottom":"15px",display:BoldBIDashboard.isNullOrUndefined(r.isVisible)?"inline-block":r.isVisible?"inline-block":"none"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_container"}),c=BoldBIDashboard.buildTag("div","",{width:(this.calWidth-33)*47/100+"px",float:"left","margin-left":"3px","margin-top":"8.5px"}),s=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"});s.text(r.name);c.append(s);BoldBIDashboard.isNullOrUndefined(r.displayName)||s.text(r.displayName);f.append(c);var h=BoldBIDashboard.buildTag("div","",{width:(this.calWidth-33)*57/100+"px",display:"inline-block","margin-top":"3px"}),l=Object.prototype.hasOwnProperty.call(r,"icon"),e=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:this.id+"_"+u+"_"+i+"_"+r.name});h.append(e);e.BoldBIDashboardColorPicker({value:BoldBIDashboard.DashboardUtil.getColorCode(r.value),width:(this.calWidth-33)*57/100-15+"px",cssClass:l?"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label e-dbrd-icon-prop-alignment":"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label",select:this.bbdesigner$.proxy(this.onValueChange,this,r,i,u),modelType:"palette",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});this.ejColorPickObj[e.attr("id")]=e.data("BoldBIDashboardColorPicker");f.append(h);t.append(f);a=f;this.updateItemDisable(r.itemType,u,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1);l&&this.setIcons(h,r,u,i)}},n.prototype.setButton=function(n,t,i,r,u){var l,e,s,o,h,f,c;if(BoldBIDashboard.isNullOrUndefined(t))this.updateItemVisibility(u,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isVisible)?!0:r.isVisible),c=this.ejButtonObj[this.id+"_"+u+"_"+i+"_"+r.name],BoldBIDashboard.isNullOrUndefined(c)||c.html(r.buttonText),this.updateItemDisable(r.itemType,u,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1);else{e=BoldBIDashboard.buildTag("div","",{"margin-bottom":"15px",display:BoldBIDashboard.isNullOrUndefined(r.isVisible)?"inline-block":r.isVisible?"inline-block":"none"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_container"});s=BoldBIDashboard.buildTag("div","",{width:(this.calWidth-33)*47/100+"px",float:"left","margin-left":"3px","margin-top":"8.5px"});(BoldBIDashboard.isNullOrUndefined(r.enableLabel)||this.bbdesigner$.parseJSON(r.enableLabel))&&(o=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"}),o.text(r.name),s.append(o),BoldBIDashboard.isNullOrUndefined(r.displayName)||o.text(r.displayName));e.append(s);h=BoldBIDashboard.buildTag("div","",{width:(this.calWidth-33)*47/100+"px",display:"inline-block","margin-top":"3px",border:"0px solid","border-color":"red"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_parent"});f=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-small",r.buttonText,{width:"230px"},{id:this.id+"_"+u+"_"+i+"_"+r.name,type:"button"});h.append(f);f.off("click",this.bbdesigner$.proxy(this.onButtonClick,this,r,i));f.on("click",this.bbdesigner$.proxy(this.onButtonClick,this,r,i));this.ejButtonObj[f.attr("id")]=f;e.append(h);t.append(e);l=e;this.updateItemDisable(r.itemType,u,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1)}},n.prototype.onButtonClick=function(n,t){var r=this.widgetHelper.getCurrentWidgetInstance(),u=this.getPropertyElement(r.getPropertyPanelItems(),n.name,t,-1),i=this.bbdesigner$.extend(!0,{},u);i.categoryName=t;BoldBIDashboard.DashboardUtil.invokeMethod(i.callbackInstance,i.callbackMethod,[i])},n.prototype.updateItemVisibility=function(n,t,i,r,u){var f=this.propertyContainer.find("#"+this.id+"_"+n+"_"+t+"_"+i+"_container"),e;f.css("display",r?"inline-block":"none");!BoldBIDashboard.isNullOrUndefined(u)&&u&&this.propertyContainer.find("#"+this.id+"_"+n+"_"+t+"_"+i).css("display",r?"inline-block":"none");f.length>0&&(e=f.data("BoldBIDashboardScroller"),BoldBIDashboard.isNullOrUndefined(e)||e.refresh())},n.prototype.updatePdfPageSizeValue=function(n,t,i,r){var s;r===void 0&&(r=null);var f=this.propertyContainer.find("#"+this.id+"_"+n+"_"+t+"_"+i).data("BoldBIDashboardDropDownList"),u=[],e=["A3","A4","A5","Letter"],o="",h=f.getSelectedItem();return h.forEach(function(n){return u.push(n.textContent)}),u.length>0?(f.selectItemByValue(u),s=e.filter(function(n){return u.indexOf(n)>=0}),o=s.join(", ")):f.selectItemByValue(e),this.updatePageSizeDrpDwnTextbox(n,t,i,u.length===4||u.length===0,o),u},n.prototype.updatePageSizeDrpDwnTextbox=function(n,t,i,r,u){var h=this,f=this.propertyContainer.find("#"+this.id+"_"+n+"_"+t+"_"+i+"_container").find("#DropdownTextboxContainer"+n),e=r?"All":u,o,s;f.length===0?(o=this.bbdesigner$('<div id="DropdownTextboxContainer'+n+'" class="e-combobox-all-text-box-container"><span id="DropdownTextboxElement'+n+'" class="e-combobox-all-text-box-element e-designer-fontfamily" style="color:'+this.dashboardDesigner.modules.themeHelper.getDDWidgetDDLTextColor(n.toLowerCase())+'">'+e+"<\/span><\/div>"),s=this.pageSizedrpdwnelem.filter(function(r){return r.attr("id")===h.id+"_"+n+"_"+t+"_"+i})[0],s[0].insertAdjacentElement("afterend",o[0])):f.find("#DropdownTextboxElement"+n).text(e)},n.prototype.getPdfPageSizeItems=function(n){var t={EnableA3:!1,EnableA4:!1,EnableA5:!1,EnableLetter:!1},i=!0;return n.length>0&&(i=!1,n.forEach(function(n){switch(n){case"A3":t.EnableA3=!0;break;case"A4":t.EnableA4=!0;break;case"A5":t.EnableA5=!0;break;case"Letter":t.EnableLetter=!0}})),i&&(t={EnableA3:!0,EnableA4:!0,EnableA5:!0,EnableLetter:!0}),t},n.prototype.getSelectedValues=function(n){return["A3","A4","A5","Letter"].filter(function(t){return n["Enable".concat(t)]})},n.prototype.updateItemDisable=function(n,t,i,r,u){var f,e,o,s,h,c;n==="float"?(f=this.ejNumbericObj[this.id+"_"+t+"_"+i+"_"+r],BoldBIDashboard.isNullOrUndefined(f)||(u?f.disable():f.enable())):n==="color"?(e=this.ejColorPickObj[this.id+"_"+t+"_"+i+"_"+r],BoldBIDashboard.isNullOrUndefined(e)||(u?e.disable():e.enable())):n==="dropdown"?(o=this.ejDropDownObj[this.id+"_"+t+"_"+i+"_"+r],BoldBIDashboard.isNullOrUndefined(o)||(u?o.disable():o.enable())):n==="bool"?(s=this.ejCheckboxObj[this.id+"_"+t+"_"+i+"_"+r],BoldBIDashboard.isNullOrUndefined(s)||(u?s.disable():s.enable())):n==="button"?(h=this.dashboardDesigner.element.find("#"+this.id+"_"+t+"_"+i+"_"+r),BoldBIDashboard.isNullOrUndefined(h)||(u?BoldBIDashboard.DashboardUtil.buttonEnable(h,!1):BoldBIDashboard.DashboardUtil.buttonEnable(h,!0))):r!=="Name"&&(c=this.ejMaskEditObj[this.id+"_"+t+"_"+i+"_"+r],BoldBIDashboard.isNullOrUndefined(c)||(u?c.attr("disabled","disabled"):c.removeAttr("disabled")))},n.prototype.updateItemOpacity=function(n,t,i,r,u){var f=this.propertyContainer.find("#"+this.id+"_"+t+"_"+i+"_"+r+"_container");f.length>0&&(u?f.addClass("bbi-dbrd-designer-ele-disabled"):f.hasClass("bbi-dbrd-designer-ele-disabled")&&f.removeClass("bbi-dbrd-designer-ele-disabled"))},n.prototype.updateCategoryVisibility=function(n,t,i){var r=n+"_"+t.split(" ").join("").replace("&","");i?this.jQHeaderRows[this.id+"_elementContainer_"+r]&&(this.jQHeaderRows[this.id+"_elementContainer_"+r].css("display","block").addClass("bbi-item-expand").removeClass("bbi-item-collapse"),this.jQHeaderRows[this.id+"_elementContainer_"+r].find(".bbi-header-row-icon").addClass("bbi-designer-minus").removeClass("bbi-designer-plus"),this.jQContainerRows[this.id+"_tableElement_"+r].css("display","block")):this.jQHeaderRows[this.id+"_elementContainer_"+r]&&(this.jQHeaderRows[this.id+"_elementContainer_"+r].css("display","none"),this.jQContainerRows[this.id+"_tableElement_"+r].css("display","none"))},n.prototype.setLabel=function(n,t,i,r,u){var a,e;if(BoldBIDashboard.isNullOrUndefined(t))this.updateItemVisibility(u,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isVisible)?!0:r.isVisible),e=this.ejMaskEditObj[this.id+"_"+u+"_"+i+"_"+r.name],BoldBIDashboard.isNullOrUndefined(e)||(e.val(r.value),BoldBIDashboard.isNullOrUndefined(r.placeHolder)||e.attr("placeholder",r.placeHolder)),this.updateItemDisable(r.itemType,u,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1);else{var o=BoldBIDashboard.buildTag("div","",{"margin-bottom":"15px",display:BoldBIDashboard.isNullOrUndefined(r.isVisible)?"inline-block":r.isVisible?"inline-block":"none"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_container"}),h=BoldBIDashboard.buildTag("div","",{width:(this.calWidth-33)*47/100+"px",float:"left","margin-left":"3px","margin-top":"8.5px"}),s=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"});s.text(r.name);h.append(s);BoldBIDashboard.isNullOrUndefined(r.displayName)||s.text(r.displayName);o.append(h);var c=BoldBIDashboard.buildTag("div","",{width:(this.calWidth-33)*57/100+"px",display:"inline-block","margin-top":"3px",border:"0px solid","border-color":"red"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_parent"}),l=this.id+"_"+u+"_"+i+"_"+r.name,f=BoldBIDashboard.buildTag("input.e-textbox","",{height:"28px",width:(this.calWidth-33)*57/100-15+"px","box-sizing":"border-box"},{id:l,type:"text"});f.val(r.value);!BoldBIDashboard.isNullOrUndefined(r.allowParameter)&&r.allowParameter&&f.addClass("e-designer-param-list");BoldBIDashboard.isNullOrUndefined(r.placeHolder)||f.attr("placeholder",r.placeHolder);c.append(f);f.bind("blur",this.bbdesigner$.proxy(this.textFocusOut,this,r,i,u));f.bind("keyup",this.bbdesigner$.proxy(this.textKeyUp,this,r,i,u));this.ejMaskEditObj[f.attr("id")]=f;o.append(c);t.append(o);a=o;BoldBIDashboard.isNullOrUndefined(r.bindParameterMethod)||(f.addClass("e-designer-param-list"),f.prop("autocomplete","off"),BoldBIDashboard.DashboardUtil.invokeMethod(r.callbackInstance,r.bindParameterMethod,[f,l]));this.updateItemDisable(r.itemType,u,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1)}},n.prototype.textFocusOut=function(n,t,i){var r=this.ejMaskEditObj[this.id+"_"+i+"_"+t+"_"+n.name].val();BoldBIDashboard.isNullOrUndefined(this.labelLastModifiedInfo)||this.labelLastModifiedInfo.item!==n||(this.labelLastModifiedInfo=null);this.onValueChange(n,t,i,{value:r})},n.prototype.textKeyUp=function(n,t,i,r){if(this.labelLastModifiedInfo={item:n,categoryName:t,elementType:i},r.keyCode===13){var u=this.ejMaskEditObj[this.id+"_"+i+"_"+t+"_"+n.name].val();this.onValueChange(n,t,i,{value:u})}},n.prototype.setBoolean=function(n,t,i,r,u){var v,c,h;if(BoldBIDashboard.isNullOrUndefined(t))this.updateItemVisibility(u,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isVisible)?!0:r.isVisible),c=this.ejCheckboxObj[this.id+"_"+u+"_"+i+"_"+r.name],BoldBIDashboard.isNullOrUndefined(c)||c.option("checked",r.value),this.updateItemDisable(r.itemType,u,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1);else{var e=BoldBIDashboard.buildTag("div","",{"margin-bottom":"15px",display:BoldBIDashboard.isNullOrUndefined(r.isVisible)?"inline-block":r.isVisible?"inline-block":"none"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_container"}),l=BoldBIDashboard.buildTag("div","",{width:(this.calWidth-33)*47/100+"px",float:"left","margin-left":"3px","margin-top":"8.5px"}),f=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily","",{"max-width":(this.calWidth-33)*47/100-15+"px","font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_childElement","for":this.id+"_"+u+"_"+i+"_"+r.name});f.text(r.name);l.append(f);BoldBIDashboard.isNullOrUndefined(r.displayName)||f.text(r.displayName);e.append(l);f.addClass(BoldBIDashboard.DashboardUtil.isExistTextWidth(f,!0)?"e-title-tip":"");var o=BoldBIDashboard.buildTag("div","",{width:(this.calWidth-33)*57/100+"px",display:"inline-block","margin-top":"4px",border:"0px solid","border-color":"red"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_parent"}),a=Object.prototype.hasOwnProperty.call(r,"icon"),s=BoldBIDashboard.buildTag("input","",{},{id:this.id+"_"+u+"_"+i+"_"+r.name,type:"checkbox"});o.append(s);r.name==="RawData"&&(h=BoldBIDashboard.buildTag("span.bbi-dbrd-data-section-description e-icon-dbrd-theme bbi-dbrd-designer-hoverable"),h.css({display:"inline-block","margin-left":"5px"}),h.attr("data-tooltip",this.locale.propertyPanel.basicSettings.rawDataInfo),o.append(h));s.BoldBIDashboardCheckBox({checked:r.value,change:this.bbdesigner$.proxy(this.onValueChange,this,r,i,u),width:(this.calWidth-33)*57/100-15+"px",cssClass:a?"e-designer-prop-checkbox e-dbrd-icon-prop-alignment":"e-designer-prop-checkbox"});this.ejCheckboxObj[s.attr("id")]=s.data("BoldBIDashboardCheckBox");e.append(o);v=e;t.append(e);this.updateItemDisable(r.itemType,u,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1);a&&this.setIcons(o,r,u,i)}},n.prototype.setObjectValues=function(n,t,i,r){var o,h,e,c,f;if(BoldBIDashboard.isNullOrUndefined(n))this.updateItemVisibility("Card",t,i.name,BoldBIDashboard.isNullOrUndefined(i.isVisible)?!0:i.isVisible),o=this.ejCheckboxObj[this.id+"_"+r+"_"+t+"_"+i.name],BoldBIDashboard.isNullOrUndefined(o)||o.option("checked",i.value),this.updateItemDisable(i.itemType,"Card",t,i.name,BoldBIDashboard.isNullOrUndefined(i.isDisable)?!1:i.isDisable?!0:!1),this.updateItemOpacity(i.itemType,"Card",t,i.name,BoldBIDashboard.isNullOrUndefined(i.isDisable)?!1:i.isDisable);else{var a=void 0,u=BoldBIDashboard.buildTag("div","",{"margin-bottom":"15px",display:BoldBIDashboard.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.id+"_"+r+"_"+t+"_"+i.name+"_container"}),s=BoldBIDashboard.buildTag("div","",{width:(this.calWidth-33)*47/100+"px",float:"left","margin-left":"3px","margin-top":"8.5px"}),l=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily","",{"max-width":(this.calWidth-33)*57/100-15+"px","font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis","margin-left":"8px"},{id:this.id+"_"+r+"_"+t+"_"+i.name+"_childElement","for":this.id+"_"+r+"_"+t+"_"+i.name});i.name==="ShowPrimaryValue"?l.text("Show"):s.text("");s.append(l);h=BoldBIDashboard.buildTag("div","",{float:"right","margin-left":"3px","margin-top":"8.5px"});e=BoldBIDashboard.buildTag("label.bbi-designer-fontfamily","",{"max-width":(this.calWidth-33)*57/100-15+"px","font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis","margin-left":"8px"},{id:this.id+"_"+r+"_"+t+"_"+i.name+"_childElement","for":this.id+"_"+r+"_"+t+"_"+i.name});e.text(i.name);h.append(e);BoldBIDashboard.isNullOrUndefined(i.displayName)||e.text(i.displayName);u.append(s);c=BoldBIDashboard.buildTag("div","",{display:"inline-block","margin-top":"4px",border:"0px solid","border-color":"red"},{id:this.id+"_"+r+"_"+t+"_"+i.name+"_parent"});f=BoldBIDashboard.buildTag("input","",{},{id:this.id+"_"+r+"_"+t+"_"+i.name,type:"checkbox"});c.append(f);f.BoldBIDashboardCheckBox({checked:i.value,change:this.bbdesigner$.proxy(this.onValueChange,this,i,t,r),width:(this.calWidth-33)*57/100-15+"px",cssClass:"e-designer-prop-checkbox"});this.ejCheckboxObj[f.attr("id")]=f.data("BoldBIDashboardCheckBox");u.append(c);u.append(h);a=u;n.append(u);!BoldBIDashboard.isNullOrUndefined(i.isDisable)&&i.isDisable?u.addClass("bbi-dbrd-designer-ele-disabled"):u.hasClass("bbi-dbrd-designer-ele-disabled")&&u.removeClass("bbi-dbrd-designer-ele-disabled")}},n.prototype.setNumber=function(n,t,i,r,u,f){var y,o,s,h,l,e;if(BoldBIDashboard.isNullOrUndefined(t))this.updateItemVisibility(f,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isVisible)?!0:r.isVisible),o=this.ejNumbericObj[this.id+"_"+f+"_"+i+"_"+r.name],BoldBIDashboard.isNullOrUndefined(o)||(BoldBIDashboard.isNullOrUndefined(r.maximum)||o.option("maxValue",r.maximum),o.option("value",parseFloat(r.value)),BoldBIDashboard.isNullOrUndefined(r.interval)||o.option("incrementStep",r.interval)),this.updateItemDisable(r.itemType,f,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1);else{s=BoldBIDashboard.buildTag("div","",{"margin-bottom":"15px",display:BoldBIDashboard.isNullOrUndefined(r.isVisible)?"inline-block":r.isVisible?"inline-block":"none"},{id:this.id+"_"+f+"_"+i+"_"+r.name+"_container"});h=(this.calWidth-33)*57/200;h=h-12;l=BoldBIDashboard.buildTag("div","",{width:(this.calWidth-33)*47/100+"px",float:"left","margin-left":"3px","margin-top":"8.5px"});e=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily","",{"max-width":(this.calWidth-33)*47/100-15+"px","font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"});e.text(r.name);l.append(e);BoldBIDashboard.isNullOrUndefined(r.displayName)||e.text(r.displayName);s.append(l);e.addClass(BoldBIDashboard.DashboardUtil.isExistTextWidth(e,!0)?"e-title-tip":"");var a=BoldBIDashboard.buildTag("div","",{width:(this.calWidth-33)*57/100+"px",display:"inline-block","margin-top":"3px",border:"0px solid","border-color":"red"},{id:this.id+"_"+f+"_"+i+"_"+r.name+"_parent"}),v=Object.prototype.hasOwnProperty.call(r,"icon"),c=BoldBIDashboard.buildTag("input","",{},{id:this.id+"_"+f+"_"+i+"_"+r.name});a.append(c);c.ejNumericTextbox({value:parseFloat(r.value),showSpinButton:u,incrementStep:BoldBIDashboard.isNullOrUndefined(r.interval)?1:r.interval,decimalPlaces:BoldBIDashboard.isNullOrUndefined(r.decimalPlaces)?2:r.decimalPlaces,cssClass:v?"bbi-designer-ejwidgets bbi-designer-ejwidgets-updown bbi-designer-content-label e-dbrd-icon-prop-alignment":"bbi-designer-ejwidgets bbi-designer-ejwidgets-updown bbi-designer-content-label",maxValue:BoldBIDashboard.isNullOrUndefined(r.maximum)?20:r.maximum,minValue:BoldBIDashboard.isNullOrUndefined(r.minimum)?0:r.minimum,change:this.bbdesigner$.proxy(this.onValueChange,this,r,i,f),width:h+"px",watermarkText:BoldBIDashboard.isNullOrUndefined(r.placeholder)?this.locale.measureFilterWindow.enterValueWatermarkText:r.placeholder});this.ejNumbericObj[c.attr("id")]=c.data("ejNumericTextbox");s.append(a);t.append(s);y=s;this.updateItemDisable(r.itemType,f,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1);v&&this.setIcons(a,r,f,i)}},n.prototype.setDropDown=function(n,t,i,r,u){var l=-1,d,p=["A3","A4","A5","Letter"],w=BoldBIDashboard.isNullOrUndefined(r.valueList)?0:r.valueList.length,s,f,e,v,y;if(BoldBIDashboard.isNullOrUndefined(t)){if(this.updateItemVisibility(u,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isVisible)?!0:r.isVisible),s=this.ejDropDownObj[this.id+"_"+u+"_"+i+"_"+r.name],!BoldBIDashboard.isNullOrUndefined(s))if(s.option("dataSource",r.valueList),r.name==="PdfPageSize")r.value==="All"?s.selectItemByValue(p):s.selectItemByValue(r.value);else{for(f=0;f<w;f++)if(e="",BoldBIDashboard.isNullOrUndefined(r.value)||(e=r.value.toString()),r.valueList[f].toString()===e||!BoldBIDashboard.isNullOrUndefined(r.valueList[f].value)&&r.valueList[f].value===e){l=f;break}s.option("selectedIndex",l)}this.updateItemDisable(r.itemType,u,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1)}else{var a=BoldBIDashboard.buildTag("div","",{"margin-bottom":"15px",display:BoldBIDashboard.isNullOrUndefined(r.isVisible)?"inline-block":r.isVisible?"inline-block":"none"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_container"}),b=BoldBIDashboard.buildTag("div","",{width:(this.calWidth-33)*47/100+"px",float:"left","margin-left":"3px","margin-top":"8.5px"}),c=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily","",{"max-width":(this.calWidth-33)*47/100-15+"px","font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"});c.text(r.name);b.append(c);BoldBIDashboard.isNullOrUndefined(r.displayName)||c.text(r.displayName);a.append(b);c.addClass(BoldBIDashboard.DashboardUtil.isExistTextWidth(c,!0)?"e-title-tip":"");var h=BoldBIDashboard.buildTag("div","",{width:(this.calWidth-33)*57/100+"px",display:"inline-block","margin-top":"3px"}),g=Object.prototype.hasOwnProperty.call(r,"icon"),o=BoldBIDashboard.buildTag("input","",{},{id:this.id+"_"+u+"_"+i+"_"+r.name}),k=[];for(f=0;f<w;f++)e="",BoldBIDashboard.isNullOrUndefined(r.value)||(e=r.value.toString()),r.valueList[f].toString()!==e&&(BoldBIDashboard.isNullOrUndefined(r.valueList[f].value)||r.valueList[f].value!==e)||(l=f),k.push({text:BoldBIDashboard.isNullOrUndefined(r.valueList[f].text)?r.valueList[f]:r.valueList[f].text,value:BoldBIDashboard.isNullOrUndefined(r.valueList[f].value)?r.valueList[f]:r.valueList[f].value,category:BoldBIDashboard.isNullOrUndefined(r.valueList[f].category)?null:r.valueList[f].category});h.append(o);o.BoldBIDashboardDropDownList({dataSource:k,fields:{text:"text",value:BoldBIDashboard.isNullOrUndefined(r.valueList[0].value)?"text":"value",category:BoldBIDashboard.isNullOrUndefined(r.valueList[0].category)?null:"category"},change:this.bbdesigner$.proxy(this.onValueChange,this,r,i,u),selectedIndex:l,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:(this.calWidth-33)*57/100-15+"px",allowGrouping:!0,showCheckbox:BoldBIDashboard.isNullOrUndefined(r.showCheckbox)?!1:r.showCheckbox,enableFilterSearch:BoldBIDashboard.isNullOrUndefined(r.enableFilterSearch)?null:r.enableFilterSearch});r.name==="PdfPageSize"&&(r.value==="All"?o.data("BoldBIDashboardDropDownList").selectItemByValue(p):o.data("BoldBIDashboardDropDownList").selectItemByValue(r.value),v=BoldBIDashboard.buildTag("span.bbi-dbrd-data-section-description e-icon-dbrd-theme bbi-dbrd-designer-hoverable"),v.css({display:"inline-block","margin-left":"5px","padding-top":"3px",position:"absolute"}),v.attr("data-tooltip",this.locale.propertyPanel.exportSettings.pagesizeToolTip),h.append(v),this.pageSizedrpdwnelem.push(o));this.ejDropDownObj[o.attr("id")]=o.data("BoldBIDashboardDropDownList");a.append(h);t.append(a);d=a;this.updateItemDisable(r.itemType,u,i,r.name,BoldBIDashboard.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1);g&&(h.css("width",h.width()+5),this.dashboardDesigner.element.find("#"+this.id+"_"+u+"_"+i+"_"+r.name+"_wrapper").addClass("e-dbrd-icon-prop-alignment"),this.setIcons(h,r,u,i))}r.name==="PdfPageSize"&&(y="",r.value==="All"||r.value.length===4||(y=r.value.join(", ")),this.updatePageSizeDrpDwnTextbox(u,i,r.name,r.value==="All"||r.value.length===4,y))},n.prototype.validatePropertyValues=function(n,t,i,r){if(n.name==="Name"){if(i!=="Dashboard"&&this.headerInput.val()==="")return BoldBIDashboard.DashboardUtil.showErrIndictor(this.dashboardDesigner.element.find("#"+this.id+"_propertyItemHeaderText_Name_error"),!0,"Name cannot be empty"),this.headerInput.addClass("bbi-designer-error"),!1;if(i!=="Dashboard"&&this.headerInput.val().length>255)return BoldBIDashboard.DashboardUtil.showErrIndictor(this.dashboardDesigner.element.find("#"+this.id+"_propertyItemHeaderText_Name_error"),!0,this.locale.propertyPanel.widgetTitleLengthErrorText),this.headerInput.addClass("bbi-designer-error"),!1}else if(n.itemType==="float"&&(parseFloat(r.model.minValue)>parseFloat(r.value)||parseFloat(r.model.maxValue)<parseFloat(r.value)||BoldBIDashboard.isNullOrUndefined(n.minimum)&&parseFloat(r.value)<0||BoldBIDashboard.isNullOrUndefined(n.maximum)&&parseFloat(r.value)>20))return!1;return i!=="Dashboard"&&(BoldBIDashboard.DashboardUtil.showErrIndictor(this.dashboardDesigner.element.find("#"+this.id+"_propertyItemHeaderText_Name_error"),!1),this.headerInput.removeClass("bbi-designer-error")),!0},n.prototype.getPreviousValue=function(n,t,i){var r=this.dashboardDesigner.designerPanel.selectedReportItems.length,u=this.dashboardDesigner.designerPanel.selectedItems.length;return r>0&&r<2&&!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.designerPanel.selectedReportItems[0].data(this.id+"_"+i+"_"+t+"_"+n.name+"_previousValue"))?this.dashboardDesigner.designerPanel.selectedReportItems[0].data(this.id+"_"+i+"_"+t+"_"+n.name+"_previousValue"):u>0&&r===0&&!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.designerPanel.selectedItems[0].data(this.id+"_"+i+"_"+t+"_"+n.name+"_previousValue"))?this.dashboardDesigner.designerPanel.selectedItems[0].data(this.id+"_"+i+"_"+t+"_"+n.name+"_previousValue"):n.value},n.prototype.setPreviousValue=function(n,t,i,r){var u=this.dashboardDesigner.designerPanel.selectedReportItems.length,f=this.dashboardDesigner.designerPanel.selectedItems.length;f>0&&u===0?this.dashboardDesigner.designerPanel.selectedItems[0].data(this.id+"_"+i+"_"+t+"_"+n.name+"_previousValue",BoldBIDashboard.isNullOrUndefined(r.value)?BoldBIDashboard.isNullOrUndefined(r.isChecked)?"":r.isChecked:r.value):u>0&&u<2&&this.dashboardDesigner.designerPanel.selectedReportItems[0].data(this.id+"_"+i+"_"+t+"_"+n.name+"_previousValue",BoldBIDashboard.isNullOrUndefined(r.value)?BoldBIDashboard.isNullOrUndefined(r.isChecked)?"":r.isChecked:r.value)},n.prototype.itemNameChange=function(n,t){t===void 0&&(t=!0);this.onValueChange({name:"Name",value:this.activeProperty.Header},"General",this.activeProperty.Type,!1,t)},n.prototype.itemDescriptionChange=function(n,t){t===void 0&&(t=!0);this.onValueChange({name:"Description",value:this.activeProperty.Description},"General",this.activeProperty.Type,!1,t)},n.prototype.itemSubTitleChange=function(n,t){t===void 0&&(t=!0);this.onValueChange({name:"SubTitle",value:this.activeProperty.SubTitle},"General",this.activeProperty.Type,!1,t)},n.prototype.onValueChange=function(n,t,i,r,u){var o,s,h;if(u===void 0&&(u=!0),!BoldBIDashboard.isNullOrUndefined(r)&&this.validatePropertyValues(n,t,i,r)){if(this.canUpdate){var f=this.getPreviousValue(n,t,i),c=this.dashboardDesigner.rptToolbar,e=i===this.locale.exportPanel.dashboardOption?c.getDashboardTitleText():this.headerInput.val();this.designPanel=BoldBIDashboard.isNullOrUndefined(this.designPanel)?this.dashboardDesigner.designerPanel:this.designPanel;n.name==="Name"&&this.propertyHeaderVal!==e?(this.updatePropertyChange(n.name,f,e,n,t,i,u),this.propertyHeaderVal=e):n.name==="Description"?this.updatePropertyChange(n.name,f,this.descriptionInput.val().trim(),n,t,i,u):n.name==="SubTitle"?(o=this.widgetHelper.getCurrentWidgetInstance(),s=o.getJson().ContainerSettings.WidgetSubTitleFontInfo,this.updatePropertyChange(n.name,f,this.subHeaderInput.val(),n,t,null,u),this.widgetHelper.updateConditionBasedWidgetSubTitleFont(s.AutoFontSize,s.FontSize,o)):n.itemType==="color"&&(h=this.getHexColorFromRGBA(r.RGBA),this.updatePropertyChange(n.name,f,BoldBIDashboard.isNullOrUndefined(h)?r.value:h,n,t,null,u));n.name!=="Name"&&n.name!=="Description"&&n.name!=="SubTitle"&&n.itemType!=="color"&&this.updatePropertyChange(n.name,f,BoldBIDashboard.isNullOrUndefined(r.value)?BoldBIDashboard.isNullOrUndefined(r.isChecked)?"":r.isChecked:r.value,n,t,null,u)}this.setPreviousValue(n,t,i,r)}else this.canUpdate&&(this.canUpdate=!1,this.updatePropertyValue({name:n.name,itemType:n.itemType,valueList:n.valueList,categoryName:t},i,BoldBIDashboard.isNullOrUndefined(this.headerInput)?this.getPreviousValue(n,t,i):this.headerInput.val()),this.canUpdate=!0)},n.prototype.updatePanelSize=function(){this.resizeObj.isPropertyPanel=this.resizeObj.isDataAssign=!0;this.propertyPanelContainer.is(":visible")?(this.updateSize(),this.resizeObj.isPropertyPanel=!1):this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_dataTabRootElement").is(":visible")&&(this.dashboardDesigner.modules.dataConfiguration.updateSize(),this.resizeObj.isDataAssign=!1)},n.prototype.updateSize=function(){this.isLoaded()&&(this.propertyPanelContainer.height(this.dashboardDesigner.element.find("#"+this.id+"_dataPanelContainer").height()-34+"px"),this.ejPanelScroller&&(this.ejPanelScroller.setModel({height:this.dashboardDesigner.element.find("#"+this.id+"_dataPanelContainer").height()-34+"px"}),this.ejPanelScroller.refresh()))},n.prototype.updatePropertyChange=function(n,t,i,r,u,f,e){var c,s,h,o;if(e===void 0&&(e=!0),BoldBIDashboardDesigner.editManager.setMergeAction(!0),this.targetDesignArea&&this.targetDesignArea.length>0&&(this.designPanel.selectedReportItems.length<1||!BoldBIDashboard.isNullOrUndefined(f)&&f==="Dashboard"))i=r.itemType==="float"&&i===""?t:i,this.designPanel.updatePropertyChange(n,this.targetDesignArea,t,i,{name:r.name,itemType:r.itemType,valueList:r.valueList,categoryName:u}),e=!1,this.updateDashboardNameRequest();else if(!BoldBIDashboard.isNullOrUndefined(this.targetItems)&&!BoldBIDashboardDesigner.editManager.isPerformAction)for(c=this.targetItems.length,s=0;s<c;s++)h=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.targetItems[s]),o=this.bbdesigner$.extend(!0,{},r),o.categoryName=u,o.valueList=r.valueList,i=r.itemType==="float"&&i===""?t:i,h.updatePropertyChange(n,t,i,o),h.getContainerProperty().updatePropertyChange(n,t,i,h,o);e&&this.dashboardDesigner.modules.serialization.notifyChange();BoldBIDashboardDesigner.editManager.setMergeAction(!1)},n.prototype.updateDashboardNameRequest=function(){var n=this;this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_auto_save_status_icon").removeClass("bbi-ddr-draft-status-success bbi-ddr-draft-status-error").addClass("bbi-ddr-draft-status-progress");this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_auto_save_status_label").text(this.locale.saveDraftText.draftSavingMessageText);this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.notifypropertychange,{action:BoldBIDashboard.DashboardUtil.DesignerAction.NotifyPropertyChange,data:JSON.stringify({dashboardJson:this.dashboardDesigner.modules.serialization.dashboardPropertyJson,widgetJson:this.dashboardDesigner.modules.serialization.getWidgetJsonString(),colorSetJson:this.dashboardDesigner.modules.resource.colorCodeInfo,isDraftDashboard:BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(this.dashboardDesigner.model.dashboardPath)})},{fnction:this.bbdesigner$.proxy(function(t){n.dashboardDesigner.rptToolbar.updateAutoSavedTime(t.Status);t.Status||n.dashboardDesigner.modules.util.alertDialog(n.dashboardDesigner.getInvalidNameAlertTitle("dashboardName",!0),t.Message,IconType.errors,AlertType.Alert,!1,"")},this),errfnction:this.bbdesigner$.proxy(function(t){n.dashboardDesigner.rptToolbar.updateAutoSavedTime(!1);n.dashboardDesigner.modules.util.alertDialog(n.dashboardDesigner.getInvalidNameAlertTitle("dashboardName",!0),t.Message,IconType.errors,AlertType.Alert,!1,"")},this)},!0)},n.prototype.updateCulture=function(n){var i=this.id,t;t=BoldBIDashboard.Designer.Locale[n]?BoldBIDashboard.Designer.Locale[n].propertyPanel:BoldBIDashboard.Designer.Locale["en-US"].propertyPanel;this.propertyHeaderText=t.headerText;this.dashboardDesigner.element.find("#"+i+"_propertyPanelHeaderText").html(this.propertyHeaderText)},n.prototype.getHexColorFromRGBA=function(n){var t=n,i;return BoldBIDashboard.isNullOrUndefined(n)?null:(i=[t.r.toString(16),t.g.toString(16),t.b.toString(16),Math.round(t.a*255).toString(16).substring(0,2)],i.forEach(function(n,t){n.length===1&&(i[t]="0"+n)}),"#"+i.join(""))},n.prototype.hexToRGBA=function(n){if(n.indexOf("#")!==-1){var t=parseInt(n.substring(1,3),16),i=parseInt(n.substring(3,5),16),r=parseInt(n.substring(5,7),16),u=n.length>7?parseInt(n.substring(7),16)/255:"1";return"rgba("+t+","+i+","+r+","+u+")"}return n},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.PropertyPanel",InternalPropertyPanel,window);InternalPropertyGridItem=function(){function n(n,t,i,r,u,f,e){e===void 0&&(e=!1);this.locale=null;this.containerProperties=n.modules.containerPropertyItem;this.locale=n.getLocalizationContent();this.propertyGridItems=this.getPropertyGridItems();this.linkingProperty=this.getLinkingProperty();this.tooltipProperty=this.getToolTipCustomizationProperty();this.containerSettingsProperty=this.getContainerSettingsProperty(f,i,r,u);this.filterSettingsProperty=this.getFilterSettingsProperty(t,i,r,u);this.containerActionsProperty=this.getContainerActionsProperty(f,i,r,u);this.noDataContainerActionsProperty=BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem.getNoDataContainerActionsProperty(this.locale.propertyPanel.noDataContainerText);this.interWidgetLinkProperty=BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem.getInterWidgetLinkingProperty(this.locale.propertyPanel.linking.interWidgetLinkingText,null,e);this.viewUnderlyingDataProperty=this.getViewDataProperty(f,i,r,u);this.exportProperty=this.getExportProperty(f,i,r,u)}return n.prototype.getPropertyGridItems=function(){return{Header:"",SubTitle:"",Description:"",Type:"",Items:[]}},n.prototype.getLinkingProperty=function(){return{CategoryName:"Link",DisplayName:this.locale.propertyPanel.linkText,Items:[{name:"Link",value:"",category:"Item",itemType:"link",enableMode:LinkEnableMode.Row}]}},n.getNoDataContainerActionsProperty=function(n){return{CategoryName:"NoDataAppearence",DisplayName:n,Items:[{name:"NoDataAppearence",displayName:n,value:"",category:"Item",itemType:"noDataContainer"}]}},n.getInterWidgetLinkingProperty=function(n,t,i){return i===void 0&&(i=!1),{CategoryName:"InterWidgetLinking",DisplayName:n,IsVisible:i,Items:[{name:"InterWidgetLinking",displayName:n,value:"",category:"Item",itemType:"interWidgetLink",renderDefault:BoldBIDashboard.isNullOrUndefined(t)?!0:t}]}},n.prototype.getToolTipCustomizationProperty=function(){return{CategoryName:"ToolTip Settings",DisplayName:this.locale.propertyPanel.tooltipSettingsText,Items:[{name:"TooltipSettings",value:"",category:"Item",itemType:"tooltip"}]}},n.prototype.getContainerSettingsProperty=function(n,t,i,r){return this.containerProperties.getContainerSettingItems(n,t,i,r)},n.prototype.getFilterSettingsProperty=function(n,t,i,r){return this.containerProperties.getFilterSettingsItems(n,t,i,r)},n.prototype.getContainerActionsProperty=function(n,t,i,r){return this.containerProperties.getContainerActionsItems(n,t,i,r)},n.prototype.getViewDataProperty=function(n,t,i,r){return this.containerProperties.getViewDataItems(n,t,i,r)},n.prototype.getExportProperty=function(n,t,i,r){return this.containerProperties.getExportItems(n,t,i,r)},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.PropertyGridItem",InternalPropertyGridItem,window);__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(FilterInfo);n.FilterInfoForUI=t})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={}));InternalColorCustomization=function(){function n(n){this.dashboardDesigner=null;this.selectedColumnIndex=0;this.bindedColumnsList=[];this.colorContainer=null;this.colorFields=[];this.isAdvanceEnable=!1;this.isBasicEnable=!1;this.defaultColor="#77A7FB";this.dataGroupInfo=null;this.measureColumnsList=[];this.dimensionColumnsList=[];this.isColorSupportForText=!1;this.locale=null;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.propertyPanel=this.dashboardDesigner.modules.propertyPanel;this.id=this.dashboardDesigner._id;this.widgetHelper=this.dashboardDesigner.modules.widgetHelper}return n.prototype.renderColorSettings=function(n,t,i,r){var u=this.id+"_"+t+"_"+i.categoryName;if(this.colorContainer=this.bbdesigner$("#"+u),this.colorContainer.length!==0||BoldBIDashboard.isNullOrUndefined(n))this.colorContainer.length>0&&this.propertyPanel.updateItemVisibility(i.elementType,"ColorSettings","ColorSettings",i.isVisible);else{this.colorContainer=BoldBIDashboard.buildTag("div.e-dashbrd-customcolor-container","",{},{id:u});var f=BoldBIDashboard.buildTag("div.e-dashbrd-customcolor-container-wrap","",{},{id:u+"_wrap"}),e=BoldBIDashboard.buildTag("div.e-column-type","",{display:this.isColorSupportForText?"block":"none"},{id:this.id+"_"+t+"_columnType"}),o=BoldBIDashboard.buildTag("div.e-columns-list","",{},{id:this.id+"_"+t+"_columnList"}),s=BoldBIDashboard.buildTag("div.e-basic-advance-panel-wrap","",{},{id:this.id+"_"+t+"_basicAdvancePanel"}),h=BoldBIDashboard.buildTag("div.e-header-row","",{},{});this.isColorSupportForText&&(h.append(this.getNumberRadioBtn(),this.getTextRadioBtn()),e.append(h));var c=BoldBIDashboard.buildTag("ul.e-color-custom-ul","",{},{id:this.id+"_column_list"}),l=this.getColorUI(),a=this.getBasic(),v=this.getAdvance();o.append(c);s.append(a,v);f.append(o,s);this.colorContainer.append(e,f,l);n.append(this.colorContainer);this.renderElements()}this.updateColorSettingsValue(r)},n.prototype.getColorUI=function(){var n=BoldBIDashboard.buildTag("div.e-custom-color-formatting-wrapper","",{},{id:this.id+"_color_formatting_wrapper"}),t=BoldBIDashboard.buildTag("div.e-advance-settings-condition-div","",{},{}),r=BoldBIDashboard.buildTag("label.e-advance-settings-condition-label",this.locale.colorCustomBasicLocale.conditionalColorFormatting,{"font-color":"#303541"},{"for":this.id+"_color_formatting_label",type:"label"}),u=BoldBIDashboard.buildTag("label.e-advance-panel-primary-condition-label",this.locale.colorCustomBasicLocale.basedOnPrimaryValue,{"font-color":"#303541"},{"for":this.id+"_color_formatting_primary_value_label",type:"label"}),i;return t.append(r).append(u),i=BoldBIDashboard.buildTag("button.e-custom-color-formatting-button bbi-dbrd-btn-small bbi-dbrd-btn-secondary",this.locale.colorCustomBasicLocale.addConditions,{},{id:this.id+"_advance_settings_button",type:"button"}),n.append(t),n.append(i),n},n.prototype.updateColorSettingsValue=function(n){var t,i;this.colorFields=n.colorFields;this.isBasicEnable=n.isBasicEnable;this.isAdvanceEnable=n.isAdvanceEnable;this.bindedColumnsList=n.columns.columns;this.measureColumnsList=n.columns.measureFields;this.dimensionColumnsList=n.columns.dimensionFields;this.datasetId=n.datasetId;this.dataGroupInfo=n.dataGroupInfo;this.datasetId=n.datasetId;this.isColorSupportForText&&this.updateCategoryRadioBtn();this.hideColumnList(!1);this.updateBasicAdvancePanelVisiblity();this.populateColumnsForColorSettings();t=this.getColorSettings();!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0&&(i=!BoldBIDashboard.isNullOrUndefined(t[this.selectedColumnIndex].AdvancedColorSettings),this.setTextForButton(i))},n.prototype.hideColumnList=function(n){var t=this.colorContainer.attr("id"),i=this.colorContainer.find("#"+t+"_wrap"),r=this.colorContainer.find("#"+this.id+"_color_formatting_wrapper");i.css("display",n?"none":"inline-block");r.css("display",n?"inline-block":"none")},n.prototype.copy=function(n){var r=this,i,t;return i=Array.isArray(n)?[]:{},Object.keys(n).forEach(function(u){t=n[u];i[u]=typeof t=="object"&&t!==null?r.copy(t):t}),i},n.prototype.updateCategoryRadioBtn=function(){this.measureColumnsList.length>0?this.showNumber():this.dimensionColumnsList.length>0&&this.showText();this.dimensionColumnsList.length===0?this.colorContainer.find(".e-column-type").css("display","none"):this.colorContainer.find(".e-column-type").css("display","block")},n.prototype.showNumber=function(){var n=this.colorContainer.find("#"+this.id+"_numberData").data("BoldBIDashboardRadioButton");this.colorContainer.find(".e-basic-option-color-wrap").css("display","block");this.colorContainer.find(".e-basic-option-btn-wrap").css("display","none");BoldBIDashboard.isNullOrUndefined(n)||n.option("checked",!0)},n.prototype.showText=function(){var n=this.colorContainer.find("#"+this.id+"_textData").data("BoldBIDashboardRadioButton");this.colorContainer.find(".e-basic-option-color-wrap").css("display","none");this.colorContainer.find(".e-basic-option-btn-wrap").css("display","block");BoldBIDashboard.isNullOrUndefined(n)||n.option("checked",!0)},n.prototype.updateBasicAdvancePanelVisiblity=function(){this.isAdvanceEnable?this.showAdvance():this.hideAdvance();this.isBasicEnable?this.showBasic():this.hideBasic()},n.prototype.showAdvance=function(){this.colorContainer.find(".e-advance-row").css("display","block")},n.prototype.hideAdvance=function(){this.colorContainer.find(".e-advance-row").css("display","none")},n.prototype.showBasic=function(){var n=this.getColorSettings(),t;this.isColorSupportForText&&(this.isDimension()?(this.colorContainer.find(".e-basic-option-color-wrap").css("display","none"),this.colorContainer.find(".e-basic-option-btn-wrap").css("display","block")):(this.colorContainer.find(".e-basic-option-color-wrap").css("display","block"),this.colorContainer.find(".e-basic-option-btn-wrap").css("display","none")));BoldBIDashboard.isNullOrUndefined(n)||(t=n.length>0&&!BoldBIDashboard.isNullOrUndefined(n[this.selectedColumnIndex])&&n[this.selectedColumnIndex].AdvancedColorSettings!==null,t||this.colorContainer.find(".e-basic-row").css("display","block"),t&&this.isAdvanceEnable&&this.showAdvance())},n.prototype.hideBasic=function(){this.colorContainer.find(".e-basic-row").css("display","none");this.updateBasicColorPickerVal(this.defaultColor)},n.prototype.isDimension=function(){var n=this.colorContainer.find("#"+this.id+"_textData").data("BoldBIDashboardRadioButton");return!BoldBIDashboard.isNullOrUndefined(n)&&n.model.checked?!0:!1},n.prototype.getNumberRadioBtn=function(){var n=BoldBIDashboard.buildTag("div.e-number-row","",{display:"block"},{id:this.id+"_numberRow_table"}),t=BoldBIDashboard.buildTag("input.e-number-radio-btn","",{},{type:"radio",id:this.id+"_numberData"}),i=BoldBIDashboard.buildTag("label.e-advance-panel-condition-label",this.locale.colorCustomBasicLocale.measureRadioBtnText,{"font-color":"#303541"},{"for":this.id+"_numberData",type:"label"});return n.append(t,i)},n.prototype.getTextRadioBtn=function(){var n=BoldBIDashboard.buildTag("div.e-text-row","",{display:"block"},{id:this.id+"_textRow_table"}),t=BoldBIDashboard.buildTag("input.e-text-radio-btn","",{},{type:"radio",id:this.id+"_textData"}),i=BoldBIDashboard.buildTag("label.e-advance-panel-condition-label",this.locale.colorCustomBasicLocale.dimensionRadioBtnText,{"font-color":"#303541"},{"for":this.id+"_textData",type:"label"});return n.append(t).append(i)},n.prototype.getBasic=function(){var u=BoldBIDashboard.buildTag("div.e-basic-row","",{},{id:this.id+"_basicRow_table"}),f=BoldBIDashboard.buildTag("label.e-advance-panel-condition-label e-basic-condition-label",this.locale.colorCustomBasicLocale.basicText,{"font-color":"#303541"},{"for":this.id+"_basicData",type:"label"}),n=BoldBIDashboard.buildTag("div.e-basic-option-wrap","",{},{}),t=BoldBIDashboard.buildTag("div.e-basic-option-color-wrap","",{},{}),e=BoldBIDashboard.buildTag("input.e-basic-option-color-picker","",{},{id:this.id+"_seriespalette__LabelValue_colorpicker"}),i=BoldBIDashboard.buildTag("div.e-basic-option-btn-wrap","",{},{}),r;return t.append(e),r=BoldBIDashboard.buildTag("button.e-edit-button-basic-settings bbi-dbrd-btn-small bbi-dbrd-btn-secondary",this.locale.colorCustomAdvanceLocale.editButtonText,{},{id:this.id+"_edit_basic_btn",type:"button"}),i.append(r),n.append(t,i),u.append(f,n)},n.prototype.getAdvance=function(){var i=BoldBIDashboard.buildTag("div.e-advance-row","",{},{id:this.id+"_advanceRow_table"}),n=BoldBIDashboard.buildTag("div.e-advance-option-wrap","",{},{}),r=BoldBIDashboard.buildTag("label.e-advance-settings-condition-label",this.locale.colorCustomBasicLocale.advancedConditionalFormatting,{"font-color":"#303541"},{"for":this.id+"_color_formatting_label1",type:"label"}),t;return n.append(r),t=BoldBIDashboard.buildTag("button.e-custom-color-formatting-button bbi-dbrd-btn-small bbi-dbrd-btn-secondary",this.locale.colorCustomBasicLocale.addConditions,{},{id:this.id+"_advance_settings_button",type:"button"}),n.append(t),i.append(n)},n.prototype.renderElements=function(){var i=this.colorContainer.find(".e-basic-option-color-picker"),r=this.colorContainer.find(".e-color-custom-ul"),n=this.colorContainer.find(".e-edit-button-basic-settings"),u=this.colorContainer.find(".e-number-radio-btn"),f=this.colorContainer.find(".e-text-radio-btn"),t=this.colorContainer.find(".e-custom-color-formatting-button");i.BoldBIDashboardColorPicker({value:this.defaultColor,cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label",select:this.bbdesigner$.proxy(this.onValueChange,this),width:"40px",height:"26px",modelType:"palette",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});this.isColorSupportForText&&(u.BoldBIDashboardRadioButton({checked:!0,change:this.bbdesigner$.proxy(this.numberChooser,this),cssClass:"bbi-designer-radiobtn",name:"Category"}),f.BoldBIDashboardRadioButton({checked:!1,change:this.bbdesigner$.proxy(this.textChooser,this),cssClass:"bbi-designer-radiobtn",name:"Category"}));r.BoldBIDashboardListBox({datasource:this.bindedColumnsList,fields:{text:"DisplayName",id:"UniqueColumnName"},width:"200",height:"230",selectedIndex:0,select:this.bbdesigner$.proxy(this.updateIndex,this),cssClass:"bbi-designer-param-assign bbi-designer-border bbi-dbrd-designer-scroller bbi-designer-list-selection bbi-dbrd-control "});n.off("click",this.bbdesigner$.proxy(this.editColumnCondition,this,!0));n.on("click",this.bbdesigner$.proxy(this.editColumnCondition,this,!0));t.off("click",this.bbdesigner$.proxy(this.editCondition,this,!0));t.on("click",this.bbdesigner$.proxy(this.editCondition,this,!0));this.colorContainer.off("click",".e-advancecondition-link",this.bbdesigner$.proxy(this.editCondition,this));this.colorContainer.on("click",".e-advancecondition-link",this.bbdesigner$.proxy(this.editCondition,this))},n.prototype.onValueChange=function(n){var t=this.getColorSettings();BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(n.value)||(t[this.selectedColumnIndex].DefaultSettings.DefaultColors[0].Color=this.dashboardDesigner.modules.propertyPanel.getHexColorFromRGBA(n.RGBA),t[this.selectedColumnIndex].DefaultSettings.DefaultColors[0].IsEdited=!0);this.updateWidgetInfo(t)},n.prototype.populateColumnsForColorSettings=function(){var n=this.colorContainer.find("#"+this.id+"_numberData").data("BoldBIDashboardRadioButton");this.isColorSupportForText?this.updateFiledList(!BoldBIDashboard.isNullOrUndefined(n)&&n.model.checked?this.measureColumnsList:this.dimensionColumnsList):this.updateFiledList(this.bindedColumnsList);this.updatebasicAdvancePanel()},n.prototype.updateFiledList=function(n){var i=this.colorContainer.find("#"+this.id+"_column_list"),t=i.data("BoldBIDashboardListBox");this.bindedColumnsList.length<=this.selectedColumnIndex&&(this.selectedColumnIndex=0);BoldBIDashboard.isNullOrUndefined(t)||(t.option("dataSource",n),t.option("fields",{id:"UniqueColumnName",text:"DisplayName"}),t.option("selectedIndex",this.selectedColumnIndex),i.BoldBIDashboardListBox("instance")._refreshScroller())},n.prototype.numberChooser=function(){this.colorContainer.find(".e-basic-option-color-wrap").css("display","block");this.colorContainer.find(".e-basic-option-btn-wrap").css("display","none");this.populateColumnsForColorSettings()},n.prototype.textChooser=function(){this.colorContainer.find(".e-basic-option-color-wrap").css("display","none");this.colorContainer.find(".e-basic-option-btn-wrap").css("display","block");this.populateColumnsForColorSettings()},n.prototype.updateIndex=function(n){BoldBIDashboard.isNullOrUndefined(n)||n.index===-1||(this.selectedColumnIndex=n.index,this.selctedDisplayText=n.data.DisplayName);this.updatebasicAdvancePanel()},n.prototype.updatebasicAdvancePanel=function(){var t=this.getColorSettings(),n,i;!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0&&this.selectedColumnIndex>-1&&(n=t[this.selectedColumnIndex],this.isAdvanceEnable?!BoldBIDashboard.isNullOrUndefined(n.AdvancedColorSettings)&&!BoldBIDashboard.isNullOrUndefined(n.AdvancedColorSettings.Ranges)&&n.AdvancedColorSettings.Ranges.length>0?(this.showAdvance(),this.setTextForButton(!0)):this.setTextForButton(!1):n.AdvancedColorSettings=null,this.isBasicEnable?(this.showBasic(),i=!BoldBIDashboard.isNullOrUndefined(n.DefaultSettings)&&n.DefaultSettings.DefaultColors.length>0&&!BoldBIDashboard.isNullOrUndefined(n.DefaultSettings.DefaultColors[0].Color)&&n.DefaultSettings.DefaultColors[0].Color!==""?n.DefaultSettings.DefaultColors[0].Color:this.defaultColor,this.updateBasicColorPickerVal(i)):n.DefaultSettings=null)},n.prototype.updateBasicColorPickerVal=function(n){var t=this.colorContainer.find("#"+this.id+"_seriespalette__LabelValue_colorpicker").data("BoldBIDashboardColorPicker"),i;BoldBIDashboard.isNullOrUndefined(t&&n!=="")||(i=t.model.select,t.option("select",null),t.option("value",n),t.option("select",i))},n.prototype.editCondition=function(){var u=this.dashboardDesigner.modules.colorCustomizationAdvanceSettings,n=null,r=this.colorContainer.find("#"+this.id+"_numberData").data("BoldBIDashboardRadioButton"),t=null,i;this.isColorSupportForText?(t=this.getSelectedColorSettings(!BoldBIDashboard.isNullOrUndefined(r)&&r.model.checked),n={selectedColumn:t.SelectedColumn,colorFields:this.colorFields,advancedColorSettings:t.AdvancedColorSettings,dataSetId:this.datasetId}):(i=this.getColorSettings(),n={selectedColumn:i[this.selectedColumnIndex].SelectedColumn,colorFields:this.colorFields,advancedColorSettings:i[this.selectedColumnIndex].AdvancedColorSettings,dataSetId:this.datasetId});u.openAdvanceModeDlg(this,"updateAdvanceSettingsVal",n)},n.prototype.getColorSettings=function(){var t=this.widgetHelper.getCurrentWidgetInstance(),n;return!BoldBIDashboard.isNullOrUndefined(t)&&(n=t.getJson(),!BoldBIDashboard.isNullOrUndefined(n.ColorSets))?this.copy(n.ColorSets.ColorSettingsList):[]},n.prototype.getSelectedColorSettings=function(n){var t=this,i=this.getColorSettings();return i.filter(function(i){return i.SelectedColumn.UniqueColumnName===(n?t.measureColumnsList[t.selectedColumnIndex].UniqueColumnName:t.dimensionColumnsList[t.selectedColumnIndex].UniqueColumnName)})[0]},n.prototype.editColumnCondition=function(){var r=this.dashboardDesigner.modules.colorCustomizationBasicSettings,t=null,i=this.colorContainer.find("#"+this.id+"_numberData").data("BoldBIDashboardRadioButton"),n=null;this.isColorSupportForText&&(n=this.getSelectedColorSettings(!BoldBIDashboard.isNullOrUndefined(i)&&i.model.checked),t={selectedColumn:n.SelectedColumn,colorFields:this.colorFields,defaultColorSettings:n.DefaultSettings});r.openBasicSettingSDialog(this,"updateBasicSettingsVal",t,this.dataGroupInfo)},n.prototype.updateBasicSettingsVal=function(n,t){var r=this.getColorSettings(),i;this.isColorSupportForText&&(i=r.filter(function(n){return n.SelectedColumn.UniqueColumnName===t.UniqueColumnName})[0],BoldBIDashboard.isNullOrUndefined(i)||(i.DefaultSettings=n))},n.prototype.updateAdvanceSettingsVal=function(n,t){var i=this.getColorSettings(),r;this.isColorSupportForText?(r=i.filter(function(n){return n.SelectedColumn.UniqueColumnName===t.UniqueColumnName})[0],BoldBIDashboard.isNullOrUndefined(r)||(r.AdvancedColorSettings=n)):i[this.selectedColumnIndex].AdvancedColorSettings=n;!BoldBIDashboard.isNullOrUndefined(n)&&n.Ranges.length>0?this.setTextForButton(!0):this.setTextForButton(!1);this.updateWidgetInfo(i)},n.prototype.setTextForButton=function(n){var t=this.colorContainer.find(".e-custom-color-formatting-button");t.length>0&&t.text(n?this.locale.colorCustomBasicLocale.modifyConditions:this.locale.colorCustomBasicLocale.addConditions)},n.prototype.updateWidgetInfo=function(n){var t=this.widgetHelper.getCurrentWidgetInstance();BoldBIDashboard.DashboardUtil.invokeMethod(t,"updatePropertyChange",["ColorSet",null,n])},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.ColorCustomization",InternalColorCustomization,window);InternalAdvancedColorCustomization=function(){function n(n){this.dashboardDesigner=null;this.fieldsDataSet=[];this.measureAggregationDs=[];this.dimensionAggregationDs=[];this.colorPaletteInputs=[];this.colorFields=[];this.isMeasure=!0;this.dimensionFields=[];this.dataGroupInfo=null;this.formatType=[];this.gradientLegendVisible=!0;this.isInitialRenderOfPalette=!0;this.ignoreBasedOn=!1;this.isDefaultColor=!1;this.showFirstDimension=!1;this.defaultBasedOnField=null;this.customRuleMeasureConditions=null;this.ignoreCustomIcon=!1;this.isGradientInputsMandatory=!1;this.defaultFormatFillColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0];this.defaultFormatType=DefaultFormatType.Default;this.specificColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0];this.locale=null;this.previousColorPickerID="";this.isMapMarker=!1;this.isMarkerSizeConfigured=!1;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.dashboardDesigner._id+"_advanced_color_customization";this.dataSet=this.dashboardDesigner.modules.dataSet;this.defaultColorPalette=BoldBIDashboard.DashboardUtil.defaultColorPalette;this.renderContentDialog();this.wireEvents()}return n.prototype.renderContentDialog=function(){var n,t,i,r;this.dialogDiv=BoldBIDashboard.buildTag("div.bbi-userselect","",{},{id:this.id});n=BoldBIDashboard.buildTag("div.bbi-userselect bbi-color-custom-advance-container bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{height:"485px"},{id:this.id+"_container"});this.contentDiv=BoldBIDashboard.buildTag("div.bbi-color-custom-advance-content","",{},{id:this.id+"__content"});this.headerContent=BoldBIDashboard.buildTag("div.bbi-custom-color-header","",{},{id:this.id+"_header"});this.bodyContent=BoldBIDashboard.buildTag("div.bbi-advance-condition-container","",{},{id:this.id+"_body"});this.colorScaleContent=BoldBIDashboard.buildTag("div.bbi-color-scale-UI","",{},{});this.colorPaletteContent=BoldBIDashboard.buildTag("div.bbi-color-palette-UI","",{},{});this.conditionalContent=BoldBIDashboard.buildTag("div.bbi-color-conditional-UI","",{},{});this.bodyContent.append(this.colorScaleContent,this.conditionalContent,this.colorPaletteContent);this.contentDiv.append(this.headerContent,this.bodyContent);n.append(this.contentDiv);this.dialogDiv.append(n);this.dialogObj=this.dialogDiv.BoldBIDashboardDialog({title:this.locale.advancedColorCustomizationLocale.advanceSettingsTitle,width:700,height:"auto",minWidth:700,minHeight:530,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,enableAnimation:!1,containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner bbi-designer-advanced-color-customization-container",close:this.bbdesigner$.proxy(this.closeDialog,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText}).data("BoldBIDashboardDialog");this.footerTag=this.dashboardDesigner.element.find("#"+this.id+"_foot");t=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.locale.dialogOptions.cancelButtonText,{float:"right"},{id:this.id+"_advance_settings_cancel",type:"button"});i=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-small",this.locale.dialogOptions.saveButtonText,{float:"right"},{id:this.id+"_advance_settings_save",type:"button"});this.footerTag.append(t,i);r=this.dashboardDesigner.element.find("#"+this.id+"_closebutton");r.off("click",this.bbdesigner$.proxy(this.onClose,this));r.on("click",this.bbdesigner$.proxy(this.onClose,this));i.off("click",this.bbdesigner$.proxy(this.saveBtnClick,this));t.off("click",this.bbdesigner$.proxy(this.cancelBtnClick,this));i.on("click",this.bbdesigner$.proxy(this.saveBtnClick,this));t.on("click",this.bbdesigner$.proxy(this.cancelBtnClick,this));this.ejWaitingIndicator=n.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup bbi-designer-loader",template:this.dashboardDesigner.getWaitingPopupTemplate()}).data("BoldBIDashboardWaitingPopup")},n.prototype.populateUI=function(n,t,i){var u,r,f;this.dialogObj.open();this.ejWaitingIndicator.show();n.colorCustomizationObj=BoldBIDashboard.isNullOrUndefined(n.colorCustomizationObj)?new ColorCustomization:n.colorCustomizationObj;this.colorCustomization=this.bbdesigner$.extend(!0,{},n.colorCustomizationObj);this.targetInstance=t;this.targetMethod=i;this.dataGroupInfo=n.DataGroupInfo;this.datasetId=n.DataGroupInfo.DataSourceID;this.colorFields=n.colorFields;this.isMapMarker=BoldBIDashboard.isNullOrUndefined(n.isMarker)?!1:n.isMarker;this.isMarkerSizeConfigured=BoldBIDashboard.isNullOrUndefined(n.isMarkerSizeConfigured)?!1:n.isMarkerSizeConfigured;this.ignoreCustomIcon=!BoldBIDashboard.isNullOrUndefined(n.ignoreCustomIcon)&&n.ignoreCustomIcon;this.colorScaleInputs=BoldBIDashboard.isNullOrUndefined(this.colorCustomization.GradientSettings)?new GradientSettings:this.colorCustomization.GradientSettings;this.colorScaleInputs.BasedOn.IsDefaultFormat=BoldBIDashboard.isNullOrUndefined(n.isDefaultFormat)?!1:n.isDefaultFormat;this.colorScaleInputs.GradientColorInfo.DefaultFormatColor=BoldBIDashboard.isNullOrUndefined(this.colorScaleInputs.GradientColorInfo.DefaultFormatColor)?new GradientColorSettings:this.colorScaleInputs.GradientColorInfo.DefaultFormatColor;this.defaultFormatDropInfo=BoldBIDashboard.isNullOrUndefined(n.defaultFormatDropInfo)?[]:n.defaultFormatDropInfo;BoldBIDashboard.isNullOrUndefined(this.colorCustomization.SolidColorInfo)||this.colorCustomization.SolidColorInfo.length===0?(u=new SolidColorSet,this.colorPaletteInputs=[],this.colorPaletteInputs.push(u)):this.colorPaletteInputs=this.colorCustomization.SolidColorInfo;this.isDefaultColor=BoldBIDashboard.isNullOrUndefined(n.hasDefaultColor)?!1:n.hasDefaultColor;this.defaultFormatFillColor=BoldBIDashboard.isNullOrUndefined(n.defaultColorFill)?this.defaultFormatFillColor:n.defaultColorFill;n.colorCustomizationObj.Type===ColorCustomizationType.Gradient&&n.colorCustomizationObj.GradientSettings.BasedOn.DefaultFormatType===DefaultFormatType.Specific&&(this.specificColor=n.colorCustomizationObj.GradientSettings.GradientColorInfo.DefaultFormatColor.Color);this.customRuleMeasureConditions=BoldBIDashboard.isNullOrUndefined(n.customRuleMeasureConditions)?null:n.customRuleMeasureConditions;BoldBIDashboard.isNullOrUndefined(n.defaultBasedOnField)||(this.defaultBasedOnField=n.defaultBasedOnField);this.conditionalRangeInputs=BoldBIDashboard.isNullOrUndefined(this.colorCustomization.RuleRangeSettings)?new RuleRangeSettings:this.colorCustomization.RuleRangeSettings;this.formatType=BoldBIDashboard.isNullOrUndefined(n.colorTypeCollection)?["Gradient","Rule","Individual"]:n.colorTypeCollection;this.gradientLegendVisible=BoldBIDashboard.isNullOrUndefined(n.legendVisible)?!0:n.legendVisible;BoldBIDashboard.isNullOrUndefined(n.ignoreBasedOn)||(this.ignoreBasedOn=!0);BoldBIDashboard.isNullOrUndefined(n.showFirstDimension)||(this.showFirstDimension=!0);BoldBIDashboard.isNullOrUndefined(n.isGradientInputsMandatory)||(this.isGradientInputsMandatory=n.isGradientInputsMandatory);this.measureAggregationDs=[{id:SummaryType.SUM,text:this.dashboardDesigner.modules.util.getSummaryTypeLocalizedText(SummaryType.SUM),value:this.locale.dataconfiguration.summary.sum},{id:SummaryType.AVG,text:this.dashboardDesigner.modules.util.getSummaryTypeLocalizedText(SummaryType.AVG),value:this.locale.dataconfiguration.summary.avg},{id:SummaryType.COUNT,text:this.dashboardDesigner.modules.util.getSummaryTypeLocalizedText(SummaryType.COUNT),value:this.locale.dataconfiguration.summary.count},{id:SummaryType.MIN,text:this.dashboardDesigner.modules.util.getSummaryTypeLocalizedText(SummaryType.MIN),value:this.locale.dataconfiguration.summary.min},{id:SummaryType.MAX,text:this.dashboardDesigner.modules.util.getSummaryTypeLocalizedText(SummaryType.MAX),value:this.locale.dataconfiguration.summary.max},{id:SummaryType.COUNTD,text:this.dashboardDesigner.modules.util.getSummaryTypeLocalizedText(SummaryType.COUNTD),value:this.locale.dataconfiguration.summary.countd},{id:SummaryType.VAR,text:this.dashboardDesigner.modules.util.getSummaryTypeLocalizedText(SummaryType.VAR),value:this.locale.dataconfiguration.summary.var}];this.dimensionAggregationDs=[{id:SummaryType.COUNT,text:this.dashboardDesigner.modules.util.getSummaryTypeLocalizedText(SummaryType.COUNT),value:this.locale.dataconfiguration.summary.count},{id:SummaryType.COUNTD,text:this.dashboardDesigner.modules.util.getSummaryTypeLocalizedText(SummaryType.COUNTD),value:this.locale.dataconfiguration.summary.countd}];this.conditionNumbers=[];r=!BoldBIDashboard.isNullOrUndefined(n.isKPICard)&&n.isKPICard;this.fieldsDataSet=this.getBasedOnFieldList(r,BoldBIDashboard.isNullOrUndefined(n.controlType)?"":n.controlType);r&&this.fieldsDataSet.unshift(n.defaultBasedOnField);this.generateRowHeaders(this.headerContent,this.formatType);this.isColorTypeItemExist("Gradient")&&this.populateGradientContent();this.isColorTypeItemExist("Rule")&&(this.conditionalContent.css("height",this.formatType.length>1?"385px":"468px"),this.populateConditionalRangeContent());f=!BoldBIDashboard.isNullOrUndefined(n.colorMapping)&&n.colorMapping;this.isColorTypeItemExist("Individual")&&this.populateColorPaletteContent(f);this.updateVisibilityOfType(this.getStringValueOfColorType(this.colorCustomization.Type));this.displayDrpdwnUIConnBased();this.ejWaitingIndicator.hide()},n.prototype.displayDrpdwnUIConnBased=function(){var n=BoldBIDashboard.Dashboard.ConnectionHelper.getConnectionInsFromDSId(this.dashboardDesigner,this.datasetId),t=BoldBIDashboard.Dashboard.ConnectionHelper.isHierarchicalConnection(n);t&&!BoldBIDashboard.isNullOrUndefined(this.fieldSummaryTypeDiv)&&(this.fieldSummaryTypeDiv.css("display","none"),this.ruleSummaryTypeDiv.css("display","none"))},n.prototype.wireEvents=function(){this.dialogDiv.on("click",".bbi-color-custom-advance-content .bbi-color-custom-add-condition-wrapper",this.bbdesigner$.proxy(this.addCondition,this));this.dialogDiv.on("click",".bbi-color-custom-advance-content .bbi-advanc-color-field-content .e-font-bold",this.bbdesigner$.proxy(this.selectFontStyleIcons,this));this.dialogDiv.on("click",".bbi-color-custom-advance-content .bbi-advanc-color-field-content .e-font-italic",this.bbdesigner$.proxy(this.selectFontStyleIcons,this));this.dialogDiv.on("click",".bbi-color-custom-advance-content .bbi-advanc-color-field-content .e-font-underline",this.bbdesigner$.proxy(this.selectFontStyleIcons,this));this.dialogDiv.on("click",".bbi-color-custom-advance-content .bbi-advanc-color-field-content .e-font-strikethrough",this.bbdesigner$.proxy(this.selectFontStyleIcons,this));this.dialogDiv.on("click",".bbi-color-custom-advance-content .bbi-advanc-condition-content .bbi-color-custom-condition-close-icon",this.bbdesigner$.proxy(this.removeCondition,this));this.dialogDiv.on("click",".bbi-color-custom-advance-content .bbi-color-custom-add-condition-wrap",this.bbdesigner$.proxy(this.addCondition,this));this.dialogDiv.on("focusout",".bbi-color-custom-advance-content .bbi-advanc-condition-content .bbi-condition-value-start",this.bbdesigner$.proxy(this.setMinValue,this));this.dialogDiv.on("focusout",".bbi-color-custom-advance-content .bbi-advanc-condition-content .bbi-condition-value-end",this.bbdesigner$.proxy(this.setMaxValue,this));this.dialogDiv.on("click",".e-condition-range-colorpicker, .e-range-color, .e-range-icon",this.bbdesigner$.proxy(this.onRangeColorOpen,this));this.dialogDiv.on("click",".e-reset-color-palette",this.bbdesigner$.proxy(this.onResetIconClick,this));this.colorPaletteContent.on("click",".e-range-color",this.bbdesigner$.proxy(this.onColorPickerOpen,this));this.colorPaletteContent.on("focusout",".e-color-textbox",this.bbdesigner$.proxy(this.onColorTextFocus,this))},n.prototype.unwireEvents=function(){this.dialogDiv.off("click",".bbi-color-custom-advance-content .bbi-advanc-color-field-content .e-font-bold",this.bbdesigner$.proxy(this.selectFontStyleIcons,this));this.dialogDiv.off("click",".bbi-color-custom-advance-content .bbi-advanc-color-field-content .e-font-italic",this.bbdesigner$.proxy(this.selectFontStyleIcons,this));this.dialogDiv.off("click",".bbi-color-custom-advance-content .bbi-advanc-color-field-content .e-font-underline",this.bbdesigner$.proxy(this.selectFontStyleIcons,this));this.dialogDiv.off("click",".bbi-color-custom-advance-content .bbi-advanc-color-field-content .e-font-strikethrough",this.bbdesigner$.proxy(this.selectFontStyleIcons,this));this.dialogDiv.off("click",".bbi-color-custom-advance-content .bbi-advanc-condition-content .bbi-color-custom-condition-close-icon",this.bbdesigner$.proxy(this.removeCondition,this));this.dialogDiv.off("click",".bbi-color-custom-advance-content .bbi-color-custom-add-condition-wrap",this.bbdesigner$.proxy(this.addCondition,this));this.dialogDiv.off("focusout",".bbi-color-custom-advance-content .bbi-advanc-condition-content .bbi-condition-value-start",this.bbdesigner$.proxy(this.setMinValue,this));this.dialogDiv.off("focusout",".bbi-color-custom-advance-content .bbi-advanc-condition-content .bbi-condition-value-end",this.bbdesigner$.proxy(this.setMaxValue,this));this.dialogDiv.off("click",".e-condition-range-colorpicker, .e-range-color, .e-range-icon",this.bbdesigner$.proxy(this.onRangeColorOpen,this));this.dialogDiv.off("click",".e-reset-color-palette",this.bbdesigner$.proxy(this.onResetIconClick,this));this.colorPaletteContent.off("click",".e-range-color",this.bbdesigner$.proxy(this.onColorPickerOpen,this));this.colorPaletteContent.off("focusout",".e-color-textbox",this.bbdesigner$.proxy(this.onColorTextFocus,this))},n.prototype.dialogClose=function(){this.dialogObj.close()},n.prototype.closeDialog=function(){this.dashboardDesigner.element.find(".e-color-picker").remove()},n.prototype.generateRowHeaders=function(n,t){var c,l;if(t.length===1){n.css("display","none");this.colorPaletteContent.css("height",this.colorPaletteContent.height()+n.outerHeight()+"px");return}var h=BoldBIDashboard.buildTag("div.bbi-custom-color-main-header-wrapper","",{},{id:this.id+"_main_container_header"}),a=BoldBIDashboard.buildTag("div.bbi-custom-color-main-header","",{}),v=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-header-text bbi-custom-color-text-style","",{});v.text(this.locale.advancedColorCustomizationLocale.colorType);a.append(v);var i=BoldBIDashboard.buildTag("div.bbi-custom-color-type-radio-select","",{}),f=BoldBIDashboard.buildTag("td","",{},{}),r=BoldBIDashboard.buildTag("td","",{},{}),e=BoldBIDashboard.buildTag("td","",{},{}),y,o,s;this.isMapMarker?(o={callBackInstance:this,callBackMethod:"onColorFormatTypeValueChange",groupName:"colorTypeSelet",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.id+"_SelectType2",label:t[0],isChecked:this.colorCustomization.Type===ColorCustomizationType.Rule,value:t[0]}]},s={callBackInstance:this,callBackMethod:"onColorFormatTypeValueChange",groupName:"colorTypeSelet",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.id+"_SelectType3",label:t[1],isChecked:this.colorCustomization.Type===ColorCustomizationType.Individual,value:t[1]}]},t.length===1?i.append(r):t.length===2&&(i.append(r),i.append(e)),this.selectRadioButtonRule=new BoldBIDashboard.Dashboard.RadioButton(o,r),this.selectRadioButtonIndividual=new BoldBIDashboard.Dashboard.RadioButton(s,e)):(y={callBackInstance:this,callBackMethod:"onColorFormatTypeValueChange",groupName:"colorTypeSelet",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.id+"_SelectType1",label:t[0],isChecked:this.colorCustomization.Type===ColorCustomizationType.Gradient,value:t[0]}]},o={callBackInstance:this,callBackMethod:"onColorFormatTypeValueChange",groupName:"colorTypeSelet",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.id+"_SelectType2",label:t[1],isChecked:this.colorCustomization.Type===ColorCustomizationType.Rule,value:t[1]}]},s={callBackInstance:this,callBackMethod:"onColorFormatTypeValueChange",groupName:"colorTypeSelet",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.id+"_SelectType3",label:t[2],isChecked:this.colorCustomization.Type===ColorCustomizationType.Individual,value:t[2]}]},t.length===1?i.append(f):t.length===2?(i.append(f),i.append(r)):(i.append(f),i.append(r),i.append(e)),this.selectRadioButtonGrdiant=new BoldBIDashboard.Dashboard.RadioButton(y,f),this.selectRadioButtonRule=new BoldBIDashboard.Dashboard.RadioButton(o,r),this.selectRadioButtonIndividual=new BoldBIDashboard.Dashboard.RadioButton(s,e));h.append(a);h.append(i);n.append(h);var u=BoldBIDashboard.buildTag("div.e-custom-color-default-wrapper","",{},{}),p=BoldBIDashboard.buildTag("div","",{}),w=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-header-text bbi-custom-color-text-style","",{});w.text(this.locale.advancedColorCustomizationLocale.defaultColor);p.append(w);c=BoldBIDashboard.buildTag("div.e-custom-color-default-color-wrapper","",{});l=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:this.id+"_default_Color_ColorPicker"});c.append(l);l.BoldBIDashboardColorPicker({value:this.colorCustomization.DefaultColor,cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label e-color-custom-default-color-picker",select:this.bbdesigner$.proxy(this.updateDefaultColorValue,this),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});u.append(p);u.append(c);n.append(u);this.isDefaultColor&&this.colorCustomization.Type!==ColorCustomizationType.Individual?u.css("display","inline-block"):u.css("display","none")},n.prototype.isColorTypeItemExist=function(n){for(var t=0;t<this.formatType.length;t++)if(this.formatType[t]===n)return!0;return!1},n.prototype.onColorFormatTypeValueChange=function(n){this.updateDefaultColorSettings(n.args.value);this.updateDefaultFormatVisibility(n.args.value);this.updateVisibilityOfType(n.args.value)},n.prototype.updateDefaultFormatVisibility=function(n){var t=this.colorScaleContent.find(this.id+"_default_format_Parentdropdownlist");n==="Gradient"?t.show():t.hide()},n.prototype.updateVisibilityOfType=function(n){n==="Gradient"?(this.colorCustomization.Type=ColorCustomizationType.Gradient,this.colorPaletteContent.css("display","none"),this.conditionalContent.css("display","none"),this.colorScaleContent.css("display","block"),BoldBIDashboard.isNullOrUndefined(this.colorpaletteIndicator)||this.colorpaletteIndicator.hide()):n==="Rule"?(this.colorCustomization.Type=ColorCustomizationType.Rule,this.colorScaleContent.css("display","none"),this.colorPaletteContent.css("display","none"),this.conditionalContent.css("display","block"),BoldBIDashboard.isNullOrUndefined(this.colorpaletteIndicator)||this.colorpaletteIndicator.hide()):(this.colorCustomization.Type=ColorCustomizationType.Individual,this.colorScaleContent.css("display","none"),this.conditionalContent.css("display","none"),this.colorPaletteContent.css("display","block"),this.isInitialRenderOfPalette&&!BoldBIDashboard.isNullOrUndefined(this.selectedSolidFieldInfo)&&(this.getColumnValues(this.selectedSolidFieldInfo),this.isInitialRenderOfPalette=!1))},n.prototype.updateDefaultColorSettings=function(n){var t=this.headerContent.find(".e-custom-color-default-wrapper");n==="Individual"?t.css("display","none"):this.isDefaultColor&&t.css("display","inline-block")},n.prototype.getStringValueOfColorType=function(n){return BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ColorCustomizationType,n)},n.prototype.populateFieldContent=function(){var n=BoldBIDashboard.buildTag("div.bbi-custom-color-field-wrapper","",{},{id:this.id+"_color_scale_row1"}),r=BoldBIDashboard.buildTag("div.bbi-custom-color-field-dropdown-wrapper","",{}),a=BoldBIDashboard.buildTag("div.bbi-custom-color-field-label-container","",{}),v=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{}),t,u,f,e,i,h;v.text(this.locale.advancedColorCustomizationLocale.basedOn);a.append(v);t=BoldBIDashboard.buildTag("div.bbi-custom-color-gradient-basedOn-dropdown-element","",{});u=BoldBIDashboard.buildTag("input","",{},{id:this.id+"_based_ondropdownlist"});this.selectedGradientFieldInfo=this.colorScaleInputs.BasedOn.FieldId===""?BoldBIDashboard.isNullOrUndefined(this.defaultBasedOnField)?this.fieldsDataSet[0]:this.fieldsDataSet[this.getSelectedIndexofFieldsSet(this.defaultBasedOnField.Id)]:this.fieldsDataSet[this.getSelectedIndexofFieldsSet(this.colorScaleInputs.BasedOn.FieldId)];t.append(u);u.BoldBIDashboardDropDownList({dataSource:this.fieldsDataSet,fields:{text:"text",value:"value"},change:this.bbdesigner$.proxy(this.basedOnGradientSelectionChange,this),selectedIndex:this.colorScaleInputs.BasedOn.FieldId===""?BoldBIDashboard.isNullOrUndefined(this.defaultBasedOnField)?0:this.getSelectedIndexofFieldsSet(this.defaultBasedOnField.Id):this.getSelectedIndexofFieldsSet(this.colorScaleInputs.BasedOn.FieldId),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"200px",height:"24px"});this.fieldSummaryTypeDiv=BoldBIDashboard.buildTag("div.bbi-custom-color-field-dropdown-wrapper","",{});f=BoldBIDashboard.buildTag("div.bbi-custom-color-field-label-container","",{});e=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{});e.text(this.locale.advancedColorCustomizationLocale.summaryType);f.append(e);var o=BoldBIDashboard.buildTag("div.bbi-custom-color-gradient-summary-dropdown-element","",{}),y=BoldBIDashboard.buildTag("input","",{},{id:this.id+"_summary_type_gradient"}),s=this.selectedGradientFieldInfo.type!=="Numeric"?this.dimensionAggregationDs:this.measureAggregationDs;o.append(y);y.BoldBIDashboardDropDownList({dataSource:s,fields:{text:"text",value:"text"},selectedIndex:this.colorScaleInputs.BasedOn.FieldId===""?BoldBIDashboard.isNullOrUndefined(this.defaultBasedOnField)?0:this.getSelectedIndexOfSummary(SummaryType[this.defaultBasedOnField.SummaryType+""],s):this.getSelectedIndexOfSummary(this.colorScaleInputs.BasedOn.SummaryType,s),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"200px",height:"24px"});var p=BoldBIDashboard.buildTag("div.bbi-custom-color-field-dropdown-wrapper","",{}),w=BoldBIDashboard.buildTag("div.bbi-custom-color-field-label-container","",{}),b=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{});b.text(this.locale.advancedColorCustomizationLocale.valueType);w.append(b);i=BoldBIDashboard.buildTag("div.bbi-custom-color-gradient-value-dropdown-element","",{});h=BoldBIDashboard.buildTag("input","",{},{id:this.id+"_value_type_conditional_range"});i.append(h);h.BoldBIDashboardDropDownList({dataSource:["Value","Percentage"],change:this.bbdesigner$.proxy(this.valueTypeSelectionChange,this),selectedIndex:this.colorScaleInputs.BasedOn.ValueType,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"200px",height:"24px"});var c=BoldBIDashboard.buildTag("div.bbi-custom-color-field-dropdown-wrapper","",{},{id:this.id+"_default_format_Parentdropdownlist"}),k=BoldBIDashboard.buildTag("div.bbi-custom-color-field-label-container","",{}),d=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{});d.text(this.locale.advancedColorCustomizationLocale.defaultFormat);k.append(d);var g=BoldBIDashboard.buildTag("div.e-custom-color-gradient-defaultFormat-dropdown-element","",{}),l=BoldBIDashboard.buildTag("input","",{},{id:this.id+"_default_format_dropdownlist"});return g.append(l),l.BoldBIDashboardDropDownList({dataSource:["Default","As zero","Specific"],fields:{text:"text",value:"value"},change:this.bbdesigner$.proxy(this.onDefaultFormatSelectionChange,this),selectedIndex:this.colorScaleInputs.BasedOn.DefaultFormatType===DefaultFormatType.Default&&this.defaultFormatDropInfo.length>0?DefaultFormatType.AsZero:this.colorScaleInputs.BasedOn.DefaultFormatType,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"200px",height:"24px"}),this.defaultFormatDropInfo.length>0&&l.data("BoldBIDashboardDropDownList").disableItemsByIndices("0"),r.append(a),r.append(t),this.fieldSummaryTypeDiv.append(f,o),c.append(k),c.append(g),p.append(w),p.append(i),n.append(r),n.append(this.fieldSummaryTypeDiv),this.colorScaleInputs.BasedOn.IsDefaultFormat&&n.append(c),this.fieldSummaryTypeDiv.css("display",this.selectedGradientFieldInfo.isAggregated?"none":"block"),this.ignoreBasedOn&&(t.parent().addClass("bbi-disabledbutton"),o.parent().addClass("bbi-disabledbutton"),i.parent().addClass("bbi-disabledbutton")),n},n.prototype.populateGradientContent=function(){var o,s,t,c,v,y,p,w,b,k;if(this.colorScaleContent.append(this.populateFieldContent()),this.colorScaleInputs.BasedOn.IsDefaultFormat)this.onDefaultFormatSelectionChange(this.colorScaleInputs.BasedOn.DefaultFormatType);var i=BoldBIDashboard.buildTag("div.bbi-color-custom-gradient-settings-wrapper","",{},{id:this.id+"_color_scale_row2"}),n=BoldBIDashboard.buildTag("div.bbi-color-custom-gradient-settings-element","",{}),f=BoldBIDashboard.buildTag("div.bbi-color-custom-gradient-low-container","",{}),d=BoldBIDashboard.buildTag("div.bbi-color-custom-gradient-color-label","",{}),g=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily e-custom-color-gradient-labels bbi-custom-color-text-style","",{});g.text(this.locale.advancedColorCustomizationLocale.low);d.append(g);f.append(d);var e=BoldBIDashboard.buildTag("div.bbi-custom-color-gradient-low-color-input","",{}),nt=BoldBIDashboard.buildTag("div.bbi-color-custom-gradient-color-textbox-wrapper","",{},{id:this.id+"_Low_Custom_Value_parent"}),tt=BoldBIDashboard.buildTag("input.e-textbox bbi-color-custom-gradient-color-textbox bbi-condition-format-dash","",{},{id:this.id+"_low_custom_value_textbox",type:"text",placeholder:"Minimum",autocomplete:"off"}),at=this.isContainsParam(this.colorScaleInputs.GradientColorInfo.Low.ParamValue)?this.colorScaleInputs.GradientColorInfo.Low.ParamValue:BoldBIDashboard.isNullOrUndefined(this.colorScaleInputs.GradientColorInfo.Low.Value)?"":this.colorScaleInputs.GradientColorInfo.Low.Value.toString();tt.val(at);nt.append(tt);e.append(nt);o=BoldBIDashboard.buildTag("div.bbi-custom-color-gradient-low-color-wrapper","",{});s=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:this.id+"_low_Color_ColorPicker"});o.append(s);s.BoldBIDashboardColorPicker({value:this.colorScaleInputs.GradientColorInfo.Low.Color,cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label e-custom-color-gradient-settings-color-picker",select:this.bbdesigner$.proxy(this.updateLowColorValue,this),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});e.append(o);f.append(e);var h=BoldBIDashboard.buildTag("div.bbi-color-custom-gradient-mid-container","",{}),it=BoldBIDashboard.buildTag("div.bbi-color-custom-gradient-color-label","",{}),rt=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily e-custom-color-gradient-labels bbi-custom-color-text-style","",{});rt.text(this.locale.advancedColorCustomizationLocale.mid);it.append(rt);h.append(it);var r=BoldBIDashboard.buildTag("div.bbi-custom-color-gradient-mid-color-input","",{}),ut=BoldBIDashboard.buildTag("div.bbi-custom-color-gradient-diverging-checkbox","",{},{id:this.id+"_checkBoxRow_parent"}),ft=BoldBIDashboard.buildTag("input","",{},{id:this.id+"_mid_custom_value_checkbox",type:"checkbox"});ut.append(ft);ft.BoldBIDashboardCheckBox({checked:this.colorScaleInputs.GradientColorInfo.HasMidColor,change:this.bbdesigner$.proxy(this.updateDivergingSetting,this),width:"20px",cssClass:"e-designer-prop-checkbox"});r.append(ut);var u=BoldBIDashboard.buildTag("div.bbi-color-custom-gradient-color-textbox-wrapper","",{},{id:this.id+"_mid_custom_value_parent"}),et=BoldBIDashboard.buildTag("input.e-textbox bbi-color-custom-gradient-color-textbox bbi-condition-format-dash","",{},{id:this.id+"_mid_custom_value_textbox",type:"text",placeholder:"Average",autocomplete:"off"}),vt=this.isContainsParam(this.colorScaleInputs.GradientColorInfo.Mid.ParamValue)?this.colorScaleInputs.GradientColorInfo.Mid.ParamValue:BoldBIDashboard.isNullOrUndefined(this.colorScaleInputs.GradientColorInfo.Mid.Value)?"":this.colorScaleInputs.GradientColorInfo.Mid.Value.toString();et.val(vt);u.append(et);r.append(u);t=BoldBIDashboard.buildTag("div.bbi-custom-color-gradient-mid-color-wrapper","",{},{id:this.id+"_mid_Color_ColorPicker_parent"});c=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:this.id+"_mid_Color_ColorPicker"});t.append(c);c.BoldBIDashboardColorPicker({value:this.colorScaleInputs.GradientColorInfo.Mid.Color,cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label e-custom-color-gradient-settings-color-picker",select:this.bbdesigner$.proxy(this.updateMidColorValue,this),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});r.append(t);h.append(r);var l=BoldBIDashboard.buildTag("div.bbi-color-custom-gradient-high-container","",{}),ot=BoldBIDashboard.buildTag("div.bbi-color-custom-gradient-color-label","",{}),st=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily e-custom-color-gradient-labels bbi-custom-color-text-style bbi-custom-color-text-style","",{});st.text(this.locale.advancedColorCustomizationLocale.high);ot.append(st);l.append(ot);var a=BoldBIDashboard.buildTag("div.bbi-custom-color-gradient-high-color-input","",{}),ht=BoldBIDashboard.buildTag("div.bbi-color-custom-gradient-color-textbox-wrapper","",{},{id:this.id+"_high_Custom_Value_parent"}),ct=BoldBIDashboard.buildTag("input.e-textbox bbi-color-custom-gradient-color-textbox bbi-condition-format-dash","",{},{id:this.id+"_high_custom_value_textbox",type:"text",placeholder:"Maximum",autocomplete:"off"}),yt=this.isContainsParam(this.colorScaleInputs.GradientColorInfo.High.ParamValue)?this.colorScaleInputs.GradientColorInfo.High.ParamValue:BoldBIDashboard.isNullOrUndefined(this.colorScaleInputs.GradientColorInfo.High.Value)?"":this.colorScaleInputs.GradientColorInfo.High.Value.toString();ct.val(yt);ht.append(ct);a.append(ht);v=BoldBIDashboard.buildTag("div.bbi-custom-color-gradient-high-color-wrapper","",{});y=BoldBIDashboard.buildTag("input.bbi-dashboard-designer","",{},{id:this.id+"_high_Color_ColorPicker"});v.append(y);y.BoldBIDashboardColorPicker({value:this.colorScaleInputs.GradientColorInfo.High.Color,cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label e-custom-color-gradient-settings-color-picker",select:this.bbdesigner$.proxy(this.updateHighColorValue,this),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});a.append(v);l.append(a);var lt=BoldBIDashboard.buildTag("div.bbi-color-custom-gradient-color-bar-wrapper","",{}),pt=this.colorScaleInputs.GradientColorInfo.Low.Color+","+(this.colorScaleInputs.GradientColorInfo.HasMidColor?this.colorScaleInputs.GradientColorInfo.Mid.Color+",":"")+this.colorScaleInputs.GradientColorInfo.High.Color,wt=BoldBIDashboard.buildTag("div.bbi-color-custom-gradient-color-bar-element","",{"background-image":"linear-gradient(to right,"+pt+")"},{id:this.id+"_Gradient_container"});lt.append(wt);n.append(f);n.append(h);n.append(l);i.append(n);i.append(lt);this.legendWrap=BoldBIDashboard.buildTag("div.bbi-color-custom-gradient-legend-container","",{});p=BoldBIDashboard.buildTag("div.bbi-custom-color-field-label-container","",{});w=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{});w.text("Legend Title");p.append(w);this.legendWrap.append(p);b=BoldBIDashboard.buildTag("div.e-color-custom-gradient-legend-textWrap","",{});k=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-fontfamily","",{},{id:this.id+"_Gradient_legendText"});k.val(BoldBIDashboard.isNullOrUndefined(this.colorScaleInputs.GradientColorInfo.legendText)?this.getGradientText(this.defaultBasedOnField):this.colorScaleInputs.GradientColorInfo.legendText.toString());b.append(k);this.legendWrap.append(b);i.append(this.legendWrap);this.colorScaleContent.append(i);this.gradientLegendVisible&&this.targetInstance.type!=="Map"?this.legendWrap.css("display","block"):this.legendWrap.css("display","none");this.colorScaleInputs.GradientColorInfo.HasMidColor?(u.removeClass("bbi-disabledbutton"),t.removeClass("bbi-disabledbutton")):(u.addClass("bbi-disabledbutton"),t.addClass("bbi-disabledbutton"));this.wireEventsForPropertyItem(n.find("#"+this.id+"_high_custom_value_textbox"),this.id+"_high_custom_value_textbox");this.wireEventsForPropertyItem(n.find("#"+this.id+"_low_custom_value_textbox"),this.id+"_low_custom_value_textbox");this.wireEventsForPropertyItem(n.find("#"+this.id+"_mid_custom_value_textbox"),this.id+"_mid_custom_value_textbox")},n.prototype.wireEventsForPropertyItem=function(n,t,i){i===void 0&&(i=!1);n.off("keydown",this.bbdesigner$.proxy(this.bindParameterList,this,t,i));n.on("keydown",this.bbdesigner$.proxy(this.bindParameterList,this,t,i))},n.prototype.bindParameterList=function(n,t,i){var r={isSupportBool:t,isSupportText:t,isSupportDate:t,isSupportNumeric:!0};this.dashboardDesigner.getParamListInInputElement(n,null,i,r)},n.prototype.getSelectedIndexOfSummary=function(n,t){if(!BoldBIDashboard.isNullOrUndefined(n)){for(var i=0;i<t.length;i++)if(t[i].id.toLowerCase()===n.toLowerCase())return i;return 0}},n.prototype.getGradientText=function(n){var t="";return BoldBIDashboard.isNullOrUndefined(n.Name)?BoldBIDashboard.isNullOrUndefined(n.text)||(t=this.colorScaleInputs.GradientColorInfo.legendText=n.text):t=this.colorScaleInputs.GradientColorInfo.legendText=n.Name,t},n.prototype.getHexColorFromRGBA=function(n){return this.dashboardDesigner.modules.propertyPanel.getHexColorFromRGBA(n)},n.prototype.updateDefaultColorValue=function(n){this.colorCustomization.DefaultColor=this.getHexColorFromRGBA(n.RGBA)},n.prototype.updateSpecificColorValue=function(n){this.colorScaleInputs.GradientColorInfo.DefaultFormatColor.Color=this.getHexColorFromRGBA(n.RGBA);this.colorScaleInputs.GradientColorInfo.DefaultFormatColor.IsCustom=!0;this.specificColor=this.getHexColorFromRGBA(n.RGBA)},n.prototype.updateLowColorValue=function(n){this.colorScaleInputs.GradientColorInfo.Low.Color=this.getHexColorFromRGBA(n.RGBA);this.updateGradientDiv()},n.prototype.updateMidColorValue=function(n){this.colorScaleInputs.GradientColorInfo.Mid.Color=this.getHexColorFromRGBA(n.RGBA);this.updateGradientDiv()},n.prototype.updateHighColorValue=function(n){this.colorScaleInputs.GradientColorInfo.High.Color=this.getHexColorFromRGBA(n.RGBA);this.updateGradientDiv()},n.prototype.updateDivergingSetting=function(n){this.colorScaleInputs.GradientColorInfo.HasMidColor=n.isChecked;this.updateGradientDiv()},n.prototype.updateGradientDiv=function(){var n=this.colorScaleContent.find("#"+this.id+"_mid_custom_value_parent"),t=this.colorScaleContent.find("#"+this.id+"_mid_Color_ColorPicker_parent"),i=this.colorScaleContent.find("#"+this.id+"_Gradient_container");this.colorScaleInputs.GradientColorInfo.HasMidColor?(n.removeClass("bbi-disabledbutton"),t.removeClass("bbi-disabledbutton"),i.css("background","linear-gradient(to right,"+this.colorScaleInputs.GradientColorInfo.Low.Color+","+this.colorScaleInputs.GradientColorInfo.Mid.Color+","+this.colorScaleInputs.GradientColorInfo.High.Color+")")):(n.addClass("bbi-disabledbutton"),t.addClass("bbi-disabledbutton"),i.css("background","linear-gradient(to right,"+this.colorScaleInputs.GradientColorInfo.Low.Color+","+this.colorScaleInputs.GradientColorInfo.High.Color+")"))},n.prototype.updateBasedOnDetailsForGradient=function(){for(var i,n,u=this.colorScaleContent.find("#"+this.id+"_summary_type_gradient"),r=u.data("BoldBIDashboardDropDownList"),f=BoldBIDashboard.Dashboard.ConnectionHelper.getConnectionInsFromDSId(this.dashboardDesigner,this.datasetId),e=BoldBIDashboard.Dashboard.ConnectionHelper.isHierarchicalConnection(f),t=0;t<this.dataSet.datasets.length;t++)if(this.dataSet.datasets[t].Id===this.datasetId)for(i=e?BoldBIDashboard.DashboardUtil.getFieldUsingTableType(this.dataSet.datasets[t].Fields):this.dataSet.datasets[t].Fields,n=0;n<i.length;n++)i[n].Id===this.selectedGradientFieldInfo.id&&(this.colorScaleInputs.BasedOn.FieldId=i[n].Id,this.colorScaleInputs.BasedOn.SummaryType=i[n].IsAggregatedExpression?SummaryType.CUSTOM:r.model.dataSource[r.model.selectedIndex].value,this.colorScaleInputs.BasedOn.ValueType=ValueType.Value)},n.prototype.updateBasedOnDetailsForIndividual=function(){for(var i,t,r=BoldBIDashboard.Dashboard.ConnectionHelper.getConnectionInsFromDSId(this.dashboardDesigner,this.datasetId),u=BoldBIDashboard.Dashboard.ConnectionHelper.isHierarchicalConnection(r),n=0;n<this.dataSet.datasets.length;n++)if(this.dataSet.datasets[n].Id===this.datasetId)for(i=u?BoldBIDashboard.DashboardUtil.getFieldUsingTableType(this.dataSet.datasets[n].Fields):this.dataSet.datasets[n].Fields,t=0;t<i.length;t++)i[t].Id===this.selectedSolidFieldInfo.dataId&&(this.colorPaletteInputs[0].BasedOn.FieldId=i[t].Id,this.colorPaletteInputs[0].BasedOn.SummaryType=SummaryType.NONE,this.colorPaletteInputs[0].BasedOn.UniqueColumnName=this.selectedSolidFieldInfo.uniqueColumnName)},n.prototype.basedOnGradientSelectionChange=function(n){var r=this.colorScaleContent.find("#"+this.id+"_summary_type_gradient"),t=r.data("BoldBIDashboardDropDownList"),u=this.colorScaleContent.find("#"+this.id+"_Gradient_legendText"),i;this.selectedGradientFieldInfo=this.fieldsDataSet[n.model.selectedIndex];i=this.selectedGradientFieldInfo.type==="Numeric"?this.measureAggregationDs:this.dimensionAggregationDs;t.setModel({dataSource:i,selectedIndex:0});t.selectItemsByIndices("0");this.colorScaleContent.find(".bbi-custom-color-gradient-summary-dropdown-element").parent().css("display",this.selectedGradientFieldInfo.isAggregated?"none":"block");u.val(this.getGradientText(this.selectedGradientFieldInfo));this.displayDrpdwnUIConnBased()},n.prototype.onDefaultFormatSelectionChange=function(n){var f=this.colorScaleContent.find("#"+this.id+"_color_scale_row1"),t=this.colorScaleContent.find("#"+this.id+"_default_format_Parentdropdownlist"),s=this.colorScaleContent.find("#"+this.id+"_default_format_dropdownlist"),e=f.find("#"+this.id+"_default_format_ParentcolorPicker"),o=s.data("BoldBIDashboardDropDownList"),i=BoldBIDashboard.isNullOrUndefined(n.model)?n:n.model.selectedIndex,r,u;this.defaultFormatType=this.colorScaleInputs.BasedOn.DefaultFormatType===DefaultFormatType.Default&&this.defaultFormatDropInfo.length>0?DefaultFormatType.AsZero:i;e.length>0&&e.remove();i===DefaultFormatType.Specific?(r=BoldBIDashboard.buildTag("div.e-color-format-specific-gradient-settings-wrapper","",{},{id:this.id+"_default_format_ParentcolorPicker"}),u=BoldBIDashboard.buildTag("input.e-color-format-specific-gradient-settings-wrapper bbi-dashboard-designer","",{},{id:this.id+"_defaultFormat_Specific_ColorPicker"}),o.setModel({width:180}),r.append(u),u.BoldBIDashboardColorPicker({value:this.specificColor,cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label e-custom-color-gradient-settings-color-picker",select:this.bbdesigner$.proxy(this.updateSpecificColorValue,this),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown}),this.colorScaleInputs.GradientColorInfo.DefaultFormatColor.Color=this.specificColor,f.append(r),t.removeClass("bbi-custom-color-field-dropdown-wrapper"),t.addClass("e-custom-format-specific-color-field-dropdown-wrapper")):(this.colorScaleInputs.GradientColorInfo.DefaultFormatColor.Color=i===DefaultFormatType.Default?this.defaultFormatFillColor:BoldBIDashboard.DashboardUtil.defaultColorPalette[0],o.setModel({width:200}),t.removeClass("e-custom-format-specific-color-field-dropdown-wrapper"),t.addClass("bbi-custom-color-field-dropdown-wrapper"))},n.prototype.isContainsParam=function(n){return!BoldBIDashboard.isNullOrUndefined(n)&&n!==""&&this.dashboardDesigner.paramRegex.test(n.toString())?!0:!1},n.prototype.validateAndUpdateColorScaleTextBox=function(){var u=this.colorScaleContent.find("#"+this.id+"_low_custom_value_textbox"),f=this.colorScaleContent.find("#"+this.id+"_mid_custom_value_textbox"),i=this.colorScaleContent.find("#"+this.id+"_high_custom_value_textbox"),n=this.colorScaleContent.find("#"+this.id+"_low_custom_value_textbox").val(),r=this.colorScaleContent.find("#"+this.id+"_mid_custom_value_textbox").val(),t=this.colorScaleContent.find("#"+this.id+"_high_custom_value_textbox").val(),h=this.colorScaleContent.find("#"+this.id+"_Gradient_legendText").val(),e=this.isContainsParam(n),s=this.isContainsParam(r),o=this.isContainsParam(t);(this.colorScaleInputs.GradientColorInfo.Low.IsCustom=n!=="",this.colorScaleInputs.GradientColorInfo.Mid.IsCustom=r!=="",this.colorScaleInputs.GradientColorInfo.High.IsCustom=t!=="",this.colorScaleInputs.GradientColorInfo.legendText=h!==""?h:this.defaultBasedOnField.Name,this.colorScaleInputs.GradientColorInfo.Low.Value=n!==""&&!e?n:null,this.colorScaleInputs.GradientColorInfo.Mid.Value=r!==""&&!s?r:null,this.colorScaleInputs.GradientColorInfo.High.Value=t!==""&&!o?t:null,this.colorScaleInputs.GradientColorInfo.Low.ParamValue=e?n:"",this.colorScaleInputs.GradientColorInfo.Mid.ParamValue=s?r:"",this.colorScaleInputs.GradientColorInfo.High.ParamValue=o?t:"",n=e?n:parseFloat(n),r=s?r:parseFloat(r),t=o?t:parseFloat(t),u.removeClass("e-range-err"),f.removeClass("e-range-err"),i.removeClass("e-range-err"),this.isGradientInputsMandatory&&(!e&&isNaN(n)&&u.addClass("e-range-err"),!o&&isNaN(t)&&i.addClass("e-range-err")),e||s||o)||u.hasClass("e-range-err")||f.hasClass("e-range-err")||i.hasClass("e-range-err")||(this.colorScaleInputs.GradientColorInfo.HasMidColor?this.colorScaleInputs.GradientColorInfo.High.IsCustom&&this.colorScaleInputs.GradientColorInfo.Mid.IsCustom&&this.colorScaleInputs.GradientColorInfo.Low.IsCustom?n<=r&&r<=t?(this.colorScaleInputs.GradientColorInfo.High.Value=t,this.colorScaleInputs.GradientColorInfo.Mid.Value=r,this.colorScaleInputs.GradientColorInfo.Low.Value=n,u.removeClass("e-range-err"),f.removeClass("e-range-err"),i.removeClass("e-range-err")):n>=r||n>=t?(u.addClass("e-range-err"),f.addClass("e-range-err"),i.addClass("e-range-err")):r>=t&&(f.addClass("e-range-err"),i.addClass("e-range-err")):this.colorScaleInputs.GradientColorInfo.Low.IsCustom&&this.colorScaleInputs.GradientColorInfo.Mid.IsCustom?n>=r?(u.addClass("e-range-err"),f.addClass("e-range-err")):(this.colorScaleInputs.GradientColorInfo.Low.Value=n,this.colorScaleInputs.GradientColorInfo.Mid.Value=r,u.removeClass("e-range-err"),f.removeClass("e-range-err"),i.removeClass("e-range-err")):this.colorScaleInputs.GradientColorInfo.Low.IsCustom&&this.colorScaleInputs.GradientColorInfo.High.IsCustom?n>=t?(u.addClass("e-range-err"),i.addClass("e-range-err")):(this.colorScaleInputs.GradientColorInfo.Low.Value=n,this.colorScaleInputs.GradientColorInfo.High.Value=t,u.removeClass("e-range-err"),f.removeClass("e-range-err"),i.removeClass("e-range-err")):this.colorScaleInputs.GradientColorInfo.Mid.IsCustom&&this.colorScaleInputs.GradientColorInfo.High.IsCustom?r>=t?(i.addClass("e-range-err"),f.addClass("e-range-err")):(this.colorScaleInputs.GradientColorInfo.Mid.Value=r,this.colorScaleInputs.GradientColorInfo.High.Value=t,u.removeClass("e-range-err"),f.removeClass("e-range-err"),i.removeClass("e-range-err")):this.colorScaleInputs.GradientColorInfo.High.IsCustom?(this.colorScaleInputs.GradientColorInfo.High.Value=t,u.removeClass("e-range-err"),f.removeClass("e-range-err"),i.removeClass("e-range-err")):this.colorScaleInputs.GradientColorInfo.Mid.IsCustom?(this.colorScaleInputs.GradientColorInfo.Mid.Value=r,u.removeClass("e-range-err"),f.removeClass("e-range-err"),i.removeClass("e-range-err")):this.colorScaleInputs.GradientColorInfo.Low.IsCustom&&(this.colorScaleInputs.GradientColorInfo.Low.Value=n,u.removeClass("e-range-err"),f.removeClass("e-range-err"),i.removeClass("e-range-err")):this.colorScaleInputs.GradientColorInfo.High.IsCustom&&this.colorScaleInputs.GradientColorInfo.Low.IsCustom?n<=t?(this.colorScaleInputs.GradientColorInfo.High.Value=t,this.colorScaleInputs.GradientColorInfo.Low.Value=n,u.removeClass("e-range-err"),f.removeClass("e-range-err"),i.removeClass("e-range-err")):n>=t&&(u.addClass("e-range-err"),i.addClass("e-range-err")):this.colorScaleInputs.GradientColorInfo.High.IsCustom?(this.colorScaleInputs.GradientColorInfo.High.Value=t,u.removeClass("e-range-err"),f.removeClass("e-range-err"),i.removeClass("e-range-err")):this.colorScaleInputs.GradientColorInfo.Low.IsCustom&&(this.colorScaleInputs.GradientColorInfo.Low.Value=n,u.removeClass("e-range-err"),f.removeClass("e-range-err"),i.removeClass("e-range-err")))},n.prototype.getBasedOnFieldList=function(n,t){for(var o,s,f=[],h=BoldBIDashboard.Dashboard.ConnectionHelper.getConnectionInsFromDSId(this.dashboardDesigner,this.datasetId),c=BoldBIDashboard.Dashboard.ConnectionHelper.isHierarchicalConnection(h),l=this.dashboardDesigner.modules.dataSet.datasets,r=BoldBIDashboard.DashboardUtil.getCurrentField(l,this.datasetId,c),i=0;i<r.length;i++){var u=r[i].TypeName==="Real"||r[i].TypeName==="Integer",e=r[i].TypeName==="Date",a=u&&r[i].IsAggregatedExpression;u?f.push({text:r[i].DataField,type:u?"Numeric":e?"Date":"String",id:r[i].Id,value:r[i].Id,isMeasure:u,isAggregated:a}):(o=this.checkIfMeasureTypeColumn(r[i].Id),s=t===ControlType.NumberCard.toString()||n?this.checkItemPresentInSeries(r[i].Id):this.checkItemPresentInDataGroup(r[i].Id),f.push({text:r[i].DataField,type:e?"Date":"String",id:r[i].Id,value:r[i].Id,isMeasure:t===ControlType.Grid.toString()&&e===!0?!0:t===ControlType.PivotGrid.toString()?this.defaultBasedOnField.FieldType===FieldType.Measures:t===ControlType.Map.toString()||t===ControlType.BingMap.toString()?!1:o||!s,isAggregated:!1}))}return f},n.prototype.checkIfMeasureTypeColumn=function(n){for(var i,t=0;t<this.dataGroupInfo.FieldContainers.length;t++)for(i=0;i<this.dataGroupInfo.FieldContainers[t].FieldInfos.length;i++)if(this.dataGroupInfo.FieldContainers[t].FieldInfos[i].Id===n)return this.dataGroupInfo.FieldContainers[t].FieldInfos[i].FieldType===FieldType.Measures;return!1},n.prototype.checkItemPresentInDataGroup=function(n){for(var i,t=0;t<this.dataGroupInfo.FieldContainers.length;t++)for(i=0;i<this.dataGroupInfo.FieldContainers[t].FieldInfos.length;i++)if(this.dataGroupInfo.FieldContainers[t].FieldInfos[i].Id===n)return!0;return!1},n.prototype.checkItemPresentInSeries=function(n){return this.dataGroupInfo.FieldContainers.length>0&&this.dataGroupInfo.FieldContainers[2].FieldInfos.length>0&&this.dataGroupInfo.FieldContainers[2].FieldInfos[0].Id===n},n.prototype.getDimensionFields=function(){for(var t,r,i,f,u=[],n=0;n<this.dataGroupInfo.FieldContainers.length;n++)for(t=0;t<this.dataGroupInfo.FieldContainers[n].FieldInfos.length;t++)if(r=this.dataGroupInfo.FieldContainers[n].Name,i=this.dataGroupInfo.FieldContainers[n].FieldInfos[t],i.FieldType===FieldType.Dimensions&&r!=="Row"&&r!=="HiddenColumn"&&(f=i.DateTimeFormat===DateTimeFormat.None?i.Name:i.Name+"("+i.DateTimeFormat+")",u.push({uniqueColumnName:this.dataGroupInfo.FieldContainers[n].FieldInfos[t].UniqueColumnName,dataId:this.dataGroupInfo.FieldContainers[n].FieldInfos[t].Id,displayName:f}),this.showFirstDimension))break;this.dimensionFields=u},n.prototype.getMarkerBasedOnFieldList=function(){for(var i=[],r=BoldBIDashboard.Dashboard.ConnectionHelper.getConnectionInsFromDSId(this.dashboardDesigner,this.datasetId),u=BoldBIDashboard.Dashboard.ConnectionHelper.isHierarchicalConnection(r),f=this.dashboardDesigner.modules.dataSet.datasets,t=BoldBIDashboard.DashboardUtil.getCurrentField(f,this.datasetId,u),e=1,n=0;n<t.length;n++)t[n].TypeName==="String"&&i.push({uniqueColumnName:"markercolumn"+e++,dataId:t[n].Id,displayName:t[n].Name,DataField:t[n].DataField,IsAggregatedExpression:t[n].IsAggregatedExpression,IsExpression:t[n].IsExpression,IsParameterField:t[n].IsParameterField,ParameterMode:t[n].ParameterMode});this.dimensionFields=i},n.prototype.saveBtnClick=function(){var t,i,n,u,r;if(this.colorCustomization.Type===ColorCustomizationType.Gradient){if(this.updateBasedOnDetailsForGradient(),this.validateAndUpdateColorScaleTextBox(),this.colorScaleInputs.BasedOn.DefaultFormatType=this.defaultFormatType,this.colorScaleContent.find(".e-range-err").length>0)return;this.colorCustomization.GradientSettings=this.colorScaleInputs;this.colorCustomization.RuleRangeSettings=null;this.colorCustomization.SolidColorInfo=null}else if(this.colorCustomization.Type===ColorCustomizationType.Rule){for(this.updateBasedOnDetailsForConditional(),t=[],i=this.conditionalContent.find(".bbi-advanc-condition-wrapper"),n=0;n<i.length;n++){if(u=this.bbdesigner$(i[n]),r=this.colorRangeSettingsInfo(u),BoldBIDashboard.isNullOrUndefined(r))return;t.push(r)}this.conditionalRangeInputs.RangeColorInfo=t;this.colorCustomization.RuleRangeSettings=this.conditionalRangeInputs;this.colorCustomization.GradientSettings=null;this.colorCustomization.SolidColorInfo=null}else this.isMapMarker&&this.updateBasedOnDetailsForIndividual(),this.colorCustomization.SolidColorInfo=this.colorPaletteInputs,this.colorCustomization.GradientSettings=null,this.colorCustomization.RuleRangeSettings=null;this.unwireEvents();this.dialogClose();BoldBIDashboard.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.colorCustomization,!1])},n.prototype.cancelBtnClick=function(){this.dialogClose();BoldBIDashboard.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.colorCustomization,!0])},n.prototype.onClose=function(){BoldBIDashboard.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.colorCustomization,!0])},n.prototype.populateConditionalRangeContent=function(){var i=BoldBIDashboard.buildTag("div.bbi-userselect bbi-dbrd-control bbi-dbrd-designer-scroller bbi-dbrd-designer-scroll-style-3","",{},{id:this.id+"_advance_settings_coditional_range_scroller"}),r=BoldBIDashboard.buildTag("div.bbi-userselect bbi-dbrd-control","",{},{id:this.id+"_advance_settings_coditional_range_scroller_child"}),t,n;if(this.conditionalContent.append(this.populateFieldContentRuleType()),this.conditionalRangeBodyElement=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_conditional_range_body"}),t=BoldBIDashboard.buildTag("div.bbi-custom-color-conditional-footer","",{},{id:this.id+"_conditional_range_footer"}),r.append(this.conditionalRangeBodyElement,t),i.append(r),this.conditionalContent.append(i),!BoldBIDashboard.isNullOrUndefined(this.conditionalRangeInputs.RangeColorInfo)&&this.conditionalRangeInputs.RangeColorInfo.length>0)for(n=0;n<this.conditionalRangeInputs.RangeColorInfo.length;n++)this.renderConditiondiv(this.conditionalRangeBodyElement,n+1,this.conditionalRangeInputs.RangeColorInfo[n]);else this.renderConditiondiv(this.conditionalRangeBodyElement,1,null);t.find(".bbi-color-custom-add-condition-wrap").length===0&&t.append(this.renderAddConditionDiv());i.BoldBIDashboardScroller({height:this.formatType.length>1?"324px":"408px",scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,enableTouchScroll:!0,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize})},n.prototype.populateFieldContentRuleType=function(){var i=BoldBIDashboard.buildTag("div.bbi-custom-color-field-wrapper","",{},{id:this.id+"_color_scale_row1"}),f=BoldBIDashboard.buildTag("div.bbi-custom-color-field-dropdown-wrapper","",{}),v=BoldBIDashboard.buildTag("div.bbi-custom-color-field-label-container","",{}),y=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{}),r,e,o,s,u,l,a,t;y.text(this.locale.advancedColorCustomizationLocale.basedOn);v.append(y);r=BoldBIDashboard.buildTag("div.bbi-custom-color-based-on-parent-rule","",{});e=BoldBIDashboard.buildTag("input","",{},{id:this.id+"_based_onbased_on_conditional_range"});this.selectedConditionalFieldInfo=this.conditionalRangeInputs.BasedOn.FieldId===""?BoldBIDashboard.isNullOrUndefined(this.defaultBasedOnField)?this.fieldsDataSet[0]:this.fieldsDataSet[this.getSelectedIndexofFieldsSet(this.defaultBasedOnField.Id)]:this.fieldsDataSet[this.getSelectedIndexofFieldsSet(this.conditionalRangeInputs.BasedOn.FieldId)];r.append(e);e.BoldBIDashboardDropDownList({dataSource:this.fieldsDataSet,fields:{text:"text",value:"value"},change:this.bbdesigner$.proxy(this.basedOnConditionalSelectionChange,this),selectedIndex:this.conditionalRangeInputs.BasedOn.FieldId===""?BoldBIDashboard.isNullOrUndefined(this.defaultBasedOnField)?0:this.getSelectedIndexofFieldsSet(this.defaultBasedOnField.Id):this.getSelectedIndexofFieldsSet(this.conditionalRangeInputs.BasedOn.FieldId),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"200px",height:"24px"});this.ruleSummaryTypeDiv=BoldBIDashboard.buildTag("div.bbi-custom-color-field-dropdown-wrapper","",{});o=BoldBIDashboard.buildTag("div.bbi-custom-color-field-label-container","",{});s=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{});s.text(this.locale.advancedColorCustomizationLocale.summaryType);o.append(s);var h=BoldBIDashboard.buildTag("div.bbi-custom-color-summary-dropdown-element-rule","",{},{id:this.id+"_summary_type_conditional_range_element"}),p=BoldBIDashboard.buildTag("input","",{},{id:this.id+"_summary_type_conditional_range"}),c=this.selectedConditionalFieldInfo.type!=="Numeric"?this.dimensionAggregationDs:this.measureAggregationDs;this.isMeasure=this.selectedConditionalFieldInfo.isMeasure;h.append(p);p.BoldBIDashboardDropDownList({dataSource:c,fields:{text:"text",value:"text"},selectedIndex:this.conditionalRangeInputs.BasedOn.FieldId===""?BoldBIDashboard.isNullOrUndefined(this.defaultBasedOnField)?0:this.getSelectedIndexOfSummary(SummaryType[this.defaultBasedOnField.SummaryType+""],c):this.getSelectedIndexOfSummary(this.conditionalRangeInputs.BasedOn.SummaryType,c),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"200px",height:"24px"});var n=BoldBIDashboard.buildTag("div.bbi-custom-color-field-dropdown-wrapper","",{}),w=BoldBIDashboard.buildTag("div.bbi-custom-color-field-label-container","",{}),b=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{});return b.text(this.locale.advancedColorCustomizationLocale.valueType),w.append(b),u=BoldBIDashboard.buildTag("div.bbi-custom-color-value-type-dropdown-container","",{},{id:this.id+"_value_type_conditional_range_element"}),l=BoldBIDashboard.buildTag("input","",{},{id:this.id+"_value_type_conditional_range"}),u.append(l),a=BoldBIDashboard.buildTag("div.bbi-custom-color-percentage-detail-icon bbi-dbrd-designer-hoverable","",{},{"data-tooltip":this.locale.advancedColorCustomizationLocale.valueTypeInformation}),l.BoldBIDashboardDropDownList({dataSource:["Value","Percentage"],change:this.bbdesigner$.proxy(this.valueTypeSelectionChange,this),selectedIndex:this.conditionalRangeInputs.BasedOn.ValueType,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"200px",height:"24px"}),this.conditionalRangeInputs.BasedOn.ValueType===ValueType.Percentage&&a.css("display","block"),f.append(v),f.append(r),this.ruleSummaryTypeDiv.append(o,h),n.append(w),n.append(u),n.append(a),i.append(f),(BoldBIDashboard.isNullOrUndefined(this.targetInstance.isMapItem)||!this.targetInstance.isMapItem||this.targetInstance.type!=="BingMap")&&(i.append(this.ruleSummaryTypeDiv),i.append(n)),t=!1,this.selectedConditionalFieldInfo.isAggregated||(t=!0,t=this.selectedConditionalFieldInfo.type!=="Numeric"?this.isMeasure:this.selectedConditionalFieldInfo.value==="KPIValue"?!1:!0),this.ignoreBasedOn&&(r.parent().addClass("bbi-disabledbutton"),h.parent().addClass("bbi-disabledbutton"),u.parent().addClass("bbi-disabledbutton")),this.ruleSummaryTypeDiv.css("display",t?"block":"none"),n.css("display",t?"block":"none"),i},n.prototype.getPropertyColorPairValues=function(n){var h=this,u=[],i,o,f,r,s,c,e;if(!BoldBIDashboard.isNullOrUndefined(this.targetInstance.isMapItem)&&this.targetInstance.isMapItem){for(i=new PropertyColorSettings,o=n.find(".bbi-marker-shape-custom-field-wrap"),f=0;f<o.length;f++)r=this.bbdesigner$(o[f]),s=r.find(".e-custom-color-radioButton").data("BoldBIDashboardRadioButton"),!BoldBIDashboard.isNullOrUndefined(s)&&s.model.checked&&(i.MarkerCustomization=new MarkerCustomizeSettings,r.find(".e-marker-shape").length>0?(c=n.find(".e-marker-shape-dropdown").data("BoldBIDashboardDropDownList"),i.MarkerCustomization.MarkerShape=c._selectedValue):i.MarkerCustomization.MarkerImage=this.getImageSettings(null,n,"Marker Image")),r.find(".e-marker-width-numeric").length>0&&(i.MarkerCustomization.MarkerWidth=Number(r.find(".e-marker-width-numeric").data("ejNumericTextbox").model.value.toString())),r.find(".e-marker-height-numeric").length>0&&(i.MarkerCustomization.MarkerHeight=Number(r.find(".e-marker-height-numeric").data("ejNumericTextbox").model.value.toString())),r.find(".e-custom-colorpicker").length>0&&(i.MarkerCustomization.MarkerColor=this.getHexColorFromRGBA(r.find(".e-custom-colorpicker").data("BoldBIDashboardColorPicker").getColor()));this.bbdesigner$.isEmptyObject(i)||u.push(i)}else{var l=n.find(".bbi-color-custom-color-field-wrap"),a=function(i){var o=t.bbdesigner$(l[i]),s=o.find(".bbi-conditional-font"),c=o.find(".e-custom-color-checkbox").data("BoldBIDashboardCheckBox"),r,a,v,f,p,w,y,e;!BoldBIDashboard.isNullOrUndefined(c)&&c.isChecked()||t.targetInstance.type==="BingMap"?(r=new PropertyColorSettings,a="",BoldBIDashboard.isNullOrUndefined(c)?t.bbdesigner$.map(t.bbdesigner$(o.children()[1]).find("input"),function(n){BoldBIDashboard.isNullOrUndefined(h.bbdesigner$(n).attr("data-name"))||(a=h.bbdesigner$(n).attr("data-name"))}):a=c.model.name,r.WidgetProperties=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(WidgetProperty,a),v=o.find(".e-custom-colorpicker").data("BoldBIDashboardColorPicker"),f=t.colorFields.filter(function(n){return n.Name===r.WidgetProperties})[0],f.ColorPicker===ColorSetColorPickers.GradientColorPicker?(p=o.find(".e-custom-colorpicker"),r.Color=t.bbdesigner$(p).attr("data-startcolor")):f.ColorPicker===ColorSetColorPickers.NormalColorPicker?BoldBIDashboard.isNullOrUndefined(v)||(r.Color=t.getRangeColor(v)):f.ColorPicker===ColorSetColorPickers.IconColorPicker&&(r.Image=t.getImageSettings(v,n,t.getIconDrpdownVal(n)),f.IncludeIconAlignment&&(w=n.find(".e-condition-icon-align-dropdown").data("BoldBIDashboardDropDownList"),r.Image.ImageAlignment=t.getIconAlignmentSettings(w))),f.Name===WidgetProperty.Image&&(r.ImageSettings=t.getImageSettings(null,n,f.DisplayName)),f.Name===WidgetProperty.BackgroundImage&&(r.BackgroundImageSettings=t.getImageSettings(null,n,f.DisplayName)),f.Name===WidgetProperty.MarkerSize&&(r.MarkerSize=Number(o.find(".e-condition-marker-size").data("ejNumericTextbox").model.value.toString())),u.push(r)):s.length>0&&(y=new PropertyColorSettings,y.WidgetProperties=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(WidgetProperty,"Font"),e=new FontSettings,e.IsBold=s.find(".e-font-bold").hasClass("bbi-designer-fontstyle-selection"),e.IsItalic=s.find(".e-font-italic").hasClass("bbi-designer-fontstyle-selection"),e.IsUnderLine=s.find(".e-font-underline").hasClass("bbi-designer-fontstyle-selection"),e.IsStrikeThrough=s.find(".e-font-strikethrough").hasClass("bbi-designer-fontstyle-selection"),y.FontStyle=e,(e.IsBold||e.IsItalic||e.IsUnderLine||e.IsStrikeThrough)&&u.push(y))},t=this;for(e=0;e<l.length;e++)a(e)}return u},n.prototype.getIconDrpdownVal=function(n){var r=n.find(".e-condition-icon-dropdown"),t,i;return!BoldBIDashboard.isNullOrUndefined(r)&&(t=r.attr("icon-type"),!BoldBIDashboard.isNullOrUndefined(t))?t:(i=n.find(".e-condition-icon-dropdown").data("BoldBIDashboardDropDownList"),!BoldBIDashboard.isNullOrUndefined(i))?this.bbdesigner$(i.getSelectedItem()).attr("data-icon-id"):""},n.prototype.getRangeColor=function(n){return this.getHexColorFromRGBA(n.getColor())},n.prototype.getImageSettings=function(n,t,i){var r=new ImageSettings,u;return BoldBIDashboard.isNullOrUndefined(n)&&this.targetInstance.type!==ControlType.BingMap.toString()?i==="Image"?(r.ImageType=ImageType[t.find(".bbi-color-custom-image-field").attr("data-image-type")],r.ImageURL=t.find(".bbi-color-custom-image-field").attr("data-image-value")):i==="Marker Image"?(r.ImageType=ImageType[t.find(".bbi-marker-shape-image-custom-field").attr("data-image-type")],r.ImageURL=t.find(".bbi-marker-shape-image-custom-field").attr("data-image-value")):(r.ImageType=ImageType[t.find(".bbi-color-custom-background-image-field").attr("data-background-image-type")],r.ImageURL=t.find(".bbi-color-custom-background-image-field").attr("data-background-image-value")):(r.ImageColor=BoldBIDashboard.isNullOrUndefined(n)?"":this.getHexColorFromRGBA(n.getColor()),r.ImageURL=i,i==="custom"&&(u=t.find(".e-condition-icon-dropdown"),r.ImageType=ImageType[u.attr("data-type")],r.ImageURL=u.attr("data-value"))),r},n.prototype.colorRangeSettingsInfo=function(n){var r=this.getPropertyColorPairValues(n),f;if(this.isColorFieldErr(r,n))return null;if(this.isMeasure){var u=this.getMeasureConditionTypeVal(n),i=this.validateRange(!0,n),t=0,e="",o="";return(this.isContainsParam(i)&&(e=i.toString(),i=0),(u===CMeasureConditionType.CBetween||u===CMeasureConditionType.CNotBetween)&&(t=this.validateRange(!1,n),this.isContainsParam(t)&&(o=t.toString(),t=0)),f=this.validateConditionName(n),n.find(".e-range-err").length>0)?null:{StartRange:i,EndRange:t,RangeLabel:f,MeasureCondition:u,PropertyColorPair:r,StartRangeParameter:e,EndRangeParameter:o}}var s=this.getDimensionConditionTypeVal(n),f=this.validateText(n,s),h=n.find(".bbi-color-custom-condition-close").data("BoldBIDashboardCheckBox");return n.find(".e-range-err").length>0?null:{RangeLabel:this.validateConditionName(n),PropertyColorPair:r,DimensionCondition:s,DimensionConditionalValue:f,IsCaseSensitive:h.isChecked()}},n.prototype.getMeasureConditionTypeVal=function(n){var t=n.find(".e-condition-type-drpdwn").data("BoldBIDashboardDropDownList");return BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(CMeasureConditionType,t.getSelectedValue())},n.prototype.getDimensionConditionTypeVal=function(n){var t=n.find(".e-condition-type-drpdwn").data("BoldBIDashboardDropDownList");return BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(CDimensionConditionType,t.getSelectedValue())},n.prototype.validateConditionName=function(n){var t=n.find(".bbi-condition-name-textbox");return(t.removeClass("e-range-err"),t.val()==="")?(t.addClass("e-range-err"),t.val(""),""):t.val()},n.prototype.isColorFieldErr=function(n,t){return n.length===0?(t.addClass("e-color-select-err"),!0):(t.removeClass("e-color-select-err"),!1)},n.prototype.validateRange=function(n,t){var r=0,i=t.find(n?".bbi-condition-value-start":".bbi-condition-value-end");return i.val().trim()!==""&&(this.dashboardDesigner.paramRegex.test(i.val())||this.dashboardDesigner.labelParamRegex.test(i.val()))?(i.removeClass("e-range-err"),r=i.val().trim()):i.val().trim()!==""&&(this.dashboardDesigner.paramRegex.test(i.val())||this.dashboardDesigner.labelParamRegex.test(i.val()))?(i.removeClass("e-range-err"),r=i.val().trim()):i.val().trim()===""||n&&parseFloat(i.val())>parseFloat(i.attr("max"))||!n&&parseFloat(i.val())<parseFloat(i.attr("min"))?i.addClass("e-range-err"):(i.removeClass("e-range-err"),r=parseFloat(i.val().trim())),r},n.prototype.validateText=function(n,t){var r="",i;return t===CDimensionConditionType.Inclusion?(i=n.find("#"+n.find(".bbi-condition-inclusion-value-dimension").attr("id")+"_multi_select_dropDown_text"),i.html()===""||i.html()===this.locale.colorCustomAdvanceLocale.selectAny?n.find(".bbi-multiselect-dropdown-item").addClass("bbi-inclusion-err"):(n.find(".bbi-multiselect-dropdown-item").removeClass("bbi-inclusion-err"),r=i.html())):(i=n.find(".e-condition-value-dimension"),i.val()===""?i.addClass("e-range-err"):(i.removeClass("e-range-err"),r=i.val())),r},n.prototype.updateBasedOnDetailsForConditional=function(){for(var i,n,u=this.conditionalContent.find("#"+this.id+"_summary_type_conditional_range"),r=u.data("BoldBIDashboardDropDownList"),f=BoldBIDashboard.Dashboard.ConnectionHelper.getConnectionInsFromDSId(this.dashboardDesigner,this.datasetId),e=BoldBIDashboard.Dashboard.ConnectionHelper.isHierarchicalConnection(f),t=0;t<this.dataSet.datasets.length;t++)if(this.dataSet.datasets[t].Id===this.datasetId)if(this.selectedConditionalFieldInfo.id==="KPIValue")this.conditionalRangeInputs.BasedOn.FieldId="KPIValue",this.conditionalRangeInputs.BasedOn.SummaryType=SummaryType.SUM;else for(i=e?BoldBIDashboard.DashboardUtil.getFieldUsingTableType(this.dataSet.datasets[t].Fields):this.dataSet.datasets[t].Fields,n=0;n<i.length;n++)i[n].Id===this.selectedConditionalFieldInfo.id&&(this.conditionalRangeInputs.BasedOn.FieldId=i[n].Id,this.conditionalRangeInputs.BasedOn.SummaryType=this.isMeasure?BoldBIDashboard.isNullOrUndefined(r)?SummaryType.NONE:i[n].IsAggregatedExpression?SummaryType.CUSTOM:r.model.dataSource[r.model.selectedIndex].value:SummaryType.NONE)},n.prototype.addCondition=function(){var n=0,t;do n++;while(this.conditionNumbers.indexOf(n)>-1);this.renderConditiondiv(this.conditionalRangeBodyElement,n);t=this.conditionalContent.find("#"+this.id+"_advance_settings_coditional_range_scroller").data("BoldBIDashboardScroller");BoldBIDashboard.isNullOrUndefined(t)||t.refresh()},n.prototype.valueTypeSelectionChange=function(n){var t=this.conditionalContent.find(".bbi-custom-color-percentage-detail-icon");n.selectedValue==="Percentage"?t.css("display","block"):t.css("display","none");this.conditionalRangeInputs.BasedOn.ValueType=n.selectedValue==="Value"?ValueType.Value:ValueType.Percentage},n.prototype.getSelectedIndexofFieldsSet=function(n){for(var t=0;t<this.fieldsDataSet.length;t++)if(this.fieldsDataSet[t].id===n)return t;return 0},n.prototype.getSelectedIndexofDimensionSet=function(n){for(var t=0;t<this.dimensionFields.length;t++)if(this.dimensionFields[t].uniqueColumnName===n)return t;return 0},n.prototype.renderAddConditionDiv=function(){return"<div class='bbi-color-custom-add-condition-wrapper'><div class='bbi-color-custom-add-condition'>"+this.locale.colorCustomAdvanceLocale.addConditionText+"<\/div><\/div>"},n.prototype.renderConditiondiv=function(n,t,i){var u=BoldBIDashboard.buildTag("div.bbi-advanc-condition-wrapper","",{},{"data-conditionId":this.id+"_condition_"+t,"data-condition-num":t}),r=BoldBIDashboard.buildTag("div.bbi-advanc-condition-content",this.getConditionField(t,i),{},{}),f=BoldBIDashboard.buildTag("div.bbi-advanc-color-field-content",this.getColorField(t,i),{},{});u.append(r,f);n.append(u);this.renderConditionTypeDropDwn(r.find(".e-condition-type-drpdwn"),t,i);this.renderColorFieldContents(f,i);this.conditionNumbers.push(t);this.renderCasesensitiveCheckbox(r.find(".bbi-color-custom-condition-close"),i);this.isMeasure?(r.find(".bbi-condition-value-start").css({display:"inline-block"}),BoldBIDashboard.isNullOrUndefined(i)||i.MeasureCondition!==CMeasureConditionType.CBetween&&i.MeasureCondition!==CMeasureConditionType.CNotBetween||r.find(".bbi-condition-value-end").css({display:"inline-block"}),r.find(".e-condition-value-dimension").css({display:"none"}),r.find(".bbi-condition-inclusion-value-dimension").css({display:"none"}),this.dialogDiv.find("#BoldBIDashboard"+this.id+"_casesensitive_checkbox_"+t).css({display:"none"})):(r.find(".bbi-condition-value-start").css({display:"none"}),r.find(".bbi-condition-value-end").css({display:"none"}),this.dialogDiv.find("#BoldBIDashboard"+this.id+"_casesensitive_checkbox_"+t).css({display:"inline-block"}),BoldBIDashboard.isNullOrUndefined(i)||i.DimensionCondition!==CDimensionConditionType.Inclusion?(r.find(".bbi-condition-inclusion-value-dimension").css({display:"none"}),r.find(".e-condition-value-dimension").css({display:"inline-block"}),r.find("#BoldBIDashboard"+this.id+"_casesensitive_checkbox_"+t).css({display:"inline-block"})):(r.find(".bbi-condition-inclusion-value-dimension").css({display:"inline-block"}),r.find(".e-condition-value-dimension").css({display:"none"}),r.find("#BoldBIDashboard"+this.id+"_casesensitive_checkbox_"+t).css({display:"none"})));this.conditionNumbers.length===1&&BoldBIDashboard.isNullOrUndefined(i)?this.disableDeleteIcon(!0):this.disableDeleteIcon(!1);this.wireEventsForPropertyItem(r.find("#"+this.id+"_condition_value_start"),this.id+"_condition_value_start");this.wireEventsForPropertyItem(r.find("#"+this.id+"_condition_value_end"),this.id+"_condition_value_end");this.wireEventsForPropertyItem(r.find("#"+this.id+"_condition_value_dimension"),this.id+"_condition_value_dimension",!0)},n.prototype.disableDeleteIcon=function(n){n?this.conditionalRangeBodyElement.find(".bbi-color-custom-condition-close-icon").addClass("bbi-disabledbutton"):this.conditionalRangeBodyElement.find(".bbi-color-custom-condition-close-icon").removeClass("bbi-disabledbutton")},n.prototype.getRadioBtnSelectionVal=function(n,t){var r=!1,s=this.locale.colorCustomAdvanceLocale.downText,e,o="",f,u,i;if(BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(n.PropertyColorPair))t==="MarkerShape"&&(r=!0);else for(f=n.PropertyColorPair,u=0;u<f.length;u++)i=f[u],t==="MarkerShape"?BoldBIDashboard.isNullOrUndefined(i.MarkerCustomization.MarkerImage)&&(r=!0):t==="MarkerImage"&&(BoldBIDashboard.isNullOrUndefined(i.MarkerCustomization.MarkerImage)||(r=!0,e=i.MarkerCustomization.MarkerImage.ImageType,o=i.MarkerCustomization.MarkerImage.ImageURL));return{isChecked:r,startColorValue:"#0162FF",endColorValue:"",isGradient:!1,selectedIcon:s,iconType:e,imagePath:o,isBold:!1,isItalic:!1,isUnderline:!1,isStrikeThrough:!1}},n.prototype.getCheckboxSelectionVal=function(n,t){var s=!1,r="#0162FF",h=this.locale.colorCustomAdvanceLocale.downText,c=!1,l=!1,a=!1,v=!1,u,e="",o,f,i;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.PropertyColorPair))for(o=n.PropertyColorPair,f=0;f<o.length;f++)i=o[f],i.WidgetProperties===t&&(s=!0,i.WidgetProperties===WidgetProperty.Icon?(r=i.Image.ImageColor,h=i.Image.ImageURL,u=i.Image.ImageType):i.WidgetProperties===WidgetProperty.FillColor?r=i.Color:i.WidgetProperties===WidgetProperty.Font?(c=i.FontStyle.IsBold,l=i.FontStyle.IsItalic,a=i.FontStyle.IsUnderLine,v=i.FontStyle.IsStrikeThrough):i.WidgetProperties===WidgetProperty.Image?(u=i.ImageSettings.ImageType,e=i.ImageSettings.ImageURL):i.WidgetProperties===WidgetProperty.BackgroundImage?(u=i.BackgroundImageSettings.ImageType,e=i.BackgroundImageSettings.ImageURL):r=i.Color);return{isChecked:s,startColorValue:r,endColorValue:"",isGradient:!1,selectedIcon:h,iconType:u,imagePath:e,isBold:c,isItalic:l,isUnderline:a,isStrikeThrough:v}},n.prototype.renderColorFieldContents=function(n,t){for(var v,k,d,y,h,r,g,nt,c,tt,p,u,f="",e="",w=n.find(".bbi-color-custom-color-field-wrap"),l=n.find(".e-custom-color-checkbox"),b=n.find(".e-custom-color-radioButton"),i={},a=0;a<l.length;a++){var r=this.bbdesigner$(l[a]),o=r.parents(".bbi-color-custom-color-field-wrap").find(".e-custom-colorpicker"),s=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(ColorSetColorPickers,r.attr("data-colorpicker")),u=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(WidgetProperty,r.attr("data-name"));e=r.attr("data-name");f=r.attr("data-displayname");i=this.getCheckboxSelectionVal(t,u);v=u===WidgetProperty.Image||u===WidgetProperty.BackgroundImage;k=u===WidgetProperty.MarkerSize;l.length===1&&(i.isChecked=!0);r.BoldBIDashboardCheckBox({name:e,text:f,checked:i.isChecked,change:this.bbdesigner$.proxy(v?this.checkBoxChangeForImage:s===ColorSetColorPickers.GradientColorPicker?this.rangeCheckBoxChange:this.checkBoxChange,this)});v?this.updateImageContent(n,i,u):k?this.updateMarkerSizeContent(n,t):(s===ColorSetColorPickers.NormalColorPicker?this.renderColorPicker(o,i,r,e):s===ColorSetColorPickers.GradientColorPicker?this.renderRangePalette(o,i):s===ColorSetColorPickers.IconColorPicker&&(this.targetInstance.type!=="BingMap"&&this.renderColorPicker(o,i,r,e),this.renderIconFieldDropDownContent(n.find(".e-condition-icon-dropdown"),i),d=this.colorFields.filter(function(n){return n.Name===WidgetProperty.Icon}),d[0].IncludeIconAlignment&&this.renderIconAlignmentDropdown(n.find(".e-condition-icon-align-dropdown"),i,t)),i.isChecked||(y=o.data("BoldBIDashboardColorPicker"),BoldBIDashboard.isNullOrUndefined(y)||this.targetInstance.type==="BingMap"||y.disable()));this.targetInstance.type==="BingMap"&&(r.parent().find(".e-chkbox-small").css("display","none"),r.remove())}for(h=0;h<b.length;h++)r=this.bbdesigner$(b[h]),u=r.attr("data-name"),i=this.getRadioBtnSelectionVal(t,u),g=Number(r.attr("data-number")),f=r.attr("data-displayname"),nt=u==="MarkerShape",r.BoldBIDashboardRadioButton({value:f,name:"name_"+g,checked:i.isChecked,size:"medium",cssClass:"bbi-designer-radiobtn",change:this.bbdesigner$.proxy(this.radioBtnChange,this)}),nt?this.updateMarkerShapeContent(n,i,u):this.updateImageContent(n,i,WidgetProperty.MarkerCustomize);for(!BoldBIDashboard.isNullOrUndefined(this.targetInstance.isMapItem)&&this.targetInstance.isMapItem&&this.renderMarkerProperties(n),c=0;c<w.length;c++)tt=this.bbdesigner$(w[c]),p=tt.find(".bbi-conditional-font"),p.length>0&&(u=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(WidgetProperty,"Font"),i=this.getCheckboxSelectionVal(t,u),this.updateFontStyleSelection(i,p))},n.prototype.checkBoxChangeForImage=function(n){var t=this.bbdesigner$(n.event.currentTarget).parents(".bbi-color-custom-color-field-wrap"),i=n.model.name==="Image"?".bbi-color-custom-image-field":".bbi-color-custom-background-image-field";n.isChecked?t.find(i).removeClass("bbi-color-custom-image-disable"):t.find(i).addClass("bbi-color-custom-image-disable")},n.prototype.radioBtnChange=function(n){var t=this.conditionalContent.find("#"+n.model.id).parents(".bbi-marker-shape-custom-field-wrap").parent(),i=t.find(".e-marker-height-numeric").data("ejNumericTextbox"),r=t.find(".e-marker-width-numeric").data("ejNumericTextbox");n.model.value.replace(/\s/g,"")==="MarkerImage"?(t.find(".bbi-marker-shape-image-custom-field").removeClass("bbi-color-custom-image-disable"),t.find(".e-marker-shape-custom-field").addClass("e-disable-selected-icondropdown"),t.find(".e-marker-shape-dropdown").data("BoldBIDashboardDropDownList").disable(),i.setModel({value:15}),r.setModel({value:15})):(t.find(".bbi-marker-shape-image-custom-field").addClass("bbi-color-custom-image-disable"),t.find(".e-marker-shape-custom-field").removeClass("e-disable-selected-icondropdown"),t.find(".e-marker-shape-dropdown").data("BoldBIDashboardDropDownList").enable(),i.setModel({value:12}),r.setModel({value:12}))},n.prototype.checkBoxChange=function(n){var t=this.conditionalRangeBodyElement.find("#"+n.model.id),o=t.parents(".bbi-advanc-condition-wrap"),r=t.parents(".bbi-color-custom-color-field-wrap").find(".e-custom-colorpicker").data("BoldBIDashboardColorPicker");if(BoldBIDashboard.isNullOrUndefined(r)||(n.isChecked?(r.enable(),o.removeClass("e-color-select-err")):r.disable()),n.model.name===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(WidgetProperty,WidgetProperty.Icon)){var u=t.parents(".bbi-color-custom-color-field-wrap").find(".e-condition-icon-dropdown"),i=u.data("BoldBIDashboardDropDownList"),f=t.parents(".bbi-color-custom-color-field-wrap").find(".e-condition-icon-align-dropdown"),e=f.data("BoldBIDashboardDropDownList");BoldBIDashboard.isNullOrUndefined(i)||(n.isChecked?(u.parent().removeClass("e-disable-selected-icondropdown"),i.enable(),o.removeClass("e-color-select-err"),this.selectIconByIndex(i)):(u.parent().addClass("e-disable-selected-icondropdown"),i.disable()));BoldBIDashboard.isNullOrUndefined(e)||(n.isChecked?(f.parent().removeClass("e-disable-selected-icondropdown"),e.enable()):(f.parent().addClass("e-disable-selected-icondropdown"),e.disable()))}},n.prototype.rangeCheckBoxChange=function(n){var u=this.conditionalRangeBodyElement.find("#"+n.model.id),i=u.parents(".bbi-color-custom-color-field-wrap").find(".e-custom-colorpicker"),r=this.bbdesigner$(i).children(),t;if(!BoldBIDashboard.isNullOrUndefined(i))if(n.isChecked){for(this.bbdesigner$(i).prop("disabled",!1),t=0;t<r.length;t++)this.bbdesigner$(r[t]).prop("disabled",!1);this.bbdesigner$(i).removeClass("e-range-disable")}else{for(this.bbdesigner$(i).prop("disabled",!0),t=0;t<r.length;t++)this.bbdesigner$(r[t]).prop("disabled",!0);this.bbdesigner$(i).addClass("e-range-disable")}},n.prototype.updateFontStyleSelection=function(n,t){n.isBold&&t.find(".e-font-bold").addClass("bbi-designer-fontstyle-selection");n.isItalic&&t.find(".e-font-italic").addClass("bbi-designer-fontstyle-selection");n.isUnderline&&t.find(".e-font-underline").addClass("bbi-designer-fontstyle-selection");n.isStrikeThrough&&t.find(".e-font-strikethrough").addClass("bbi-designer-fontstyle-selection")},n.prototype.renderCustomIconButton=function(n,t){if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0){n.off("click",this.bbdesigner$.proxy(this.customIconClicked,this,t));n.on("click",this.bbdesigner$.proxy(this.customIconClicked,this,t))}},n.prototype.customIconClicked=function(n){n.hasClass("e-custom-icon-button")&&n.data("BoldBIDashboardDropDownList").hidePopup();n.hasClass("bbi-color-custom-image-disable")||this.dashboardDesigner.modules.colorCustomizationCustomDialog.openCustomDialogWindow(n)},n.prototype.storeImageDetails=function(n,t){var u=BoldBIDashboard.isNullOrUndefined(t)?"data-type":t===WidgetProperty.Image||t===WidgetProperty.MarkerCustomize?"data-image-type":"data-background-image-type",f=BoldBIDashboard.isNullOrUndefined(t)?"data-value":t===WidgetProperty.Image||t===WidgetProperty.MarkerCustomize?"data-image-value":"data-background-image-value",r=n.attr(u)===ImageType[ImageType.Embedded]?n.attr(f):"",i;if(!BoldBIDashboard.isNullOrUndefined(r)&&r!==""){if(i=n.attr("data-value"),Object.keys(this.dashboardDesigner.colorCustomIconStore).length>0&&!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.colorCustomIconStore[i]))return;this.dashboardDesigner.colorCustomIconStore[i]={base64String:"",imageName:i}}},n.prototype.updateMarkerShapeContent=function(n,t){var i=n.find(".e-marker-shape-dropdown"),r,u;i.BoldBIDashboardDropDownList({dataSource:[{text:"Circle",value:"Circle"},{text:"Rectangle",value:"Rectangle"},{text:"Diamond",value:"Diamond"},{text:"Star",value:"Star"},{text:"Balloon",value:"Balloon"},{text:"Triangle",value:"Triangle"}],fields:{text:"text",value:"value"},selectedIndex:0,height:"28px",width:"110px",cssClass:"bbi-dbrd-control bbi-dbrd-designer-icon-align-drpdwn-popup"});r=Number(i[0].id.split("_")[i[0].id.split("_").length-1])-1;!BoldBIDashboard.isNullOrUndefined(this.conditionalRangeInputs.RangeColorInfo)&&this.conditionalRangeInputs.RangeColorInfo.length>r&&(u=i.data("BoldBIDashboardDropDownList"),BoldBIDashboard.isNullOrUndefined(this.conditionalRangeInputs.RangeColorInfo[r].PropertyColorPair[0].MarkerCustomization.MarkerShape)||u.setModel({value:this.conditionalRangeInputs.RangeColorInfo[r].PropertyColorPair[0].MarkerCustomization.MarkerShape}));t.isChecked?(i.parents(".e-marker-shape-custom-field").removeClass("e-disable-selected-icondropdown"),i.data("BoldBIDashboardDropDownList").enable()):(i.parents(".e-marker-shape-custom-field").addClass("e-disable-selected-icondropdown"),i.data("BoldBIDashboardDropDownList").disable())},n.prototype.renderMarkerProperties=function(n){var e=n.find(".e-marker-width-numeric"),o=n.find(".e-marker-height-numeric"),i=n.find(".e-custom-colorpicker"),t=parseFloat(i[0].id.split("_")[i[0].id.split("_").length-1])-1,r="",u=0,f=0;!BoldBIDashboard.isNullOrUndefined(this.conditionalRangeInputs.RangeColorInfo)&&this.conditionalRangeInputs.RangeColorInfo.length>t&&(r=this.conditionalRangeInputs.RangeColorInfo[t].PropertyColorPair[0].MarkerCustomization.MarkerColor,u=this.conditionalRangeInputs.RangeColorInfo[t].PropertyColorPair[0].MarkerCustomization.MarkerWidth,f=this.conditionalRangeInputs.RangeColorInfo[t].PropertyColorPair[0].MarkerCustomization.MarkerHeight);i.BoldBIDashboardColorPicker({value:r!==""?r:"#494ca2",cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label e-color-custom-colorpicker",select:this.bbdesigner$.proxy(this.colorChange,this,n.find(".e-marker-shape-custom-field-wrap"),"MarkerColor"),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown});e.ejNumericTextbox({value:u!==0?u:12,showSpinButton:!0,incrementStep:1,decimalPlaces:0,cssClass:"bbi-designer-ejwidgets bbi-designer-ejwidgets-updown bbi-designer-content-label",maxValue:1500,minValue:1,width:"70px"});o.ejNumericTextbox({value:f!==0?f:12,showSpinButton:!0,incrementStep:1,decimalPlaces:0,cssClass:"bbi-designer-ejwidgets bbi-designer-ejwidgets-updown bbi-designer-content-label",maxValue:1500,minValue:1,width:"70px"})},n.prototype.updateMarkerSizeContent=function(n,t){var r=n.find(".e-condition-marker-size"),i=12;BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(t.PropertyColorPair)||(i=t.PropertyColorPair[t.PropertyColorPair.length-1].MarkerSize);r.ejNumericTextbox({value:i,showSpinButton:!0,incrementStep:1,decimalPlaces:0,cssClass:"bbi-designer-ejwidgets bbi-designer-ejwidgets-updown bbi-designer-content-label",maxValue:1500,minValue:1,width:"70px"})},n.prototype.updateImageContent=function(n,t,i){var r=n.find(i===WidgetProperty.Image?".bbi-color-custom-image-field":i===WidgetProperty.BackgroundImage?".bbi-color-custom-background-image-field":".bbi-marker-shape-image-custom-field");if(!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0){BoldBIDashboard.isNullOrUndefined(t.iconType)||t.iconType===ImageType.Default||(r.attr(i===WidgetProperty.Image||i===WidgetProperty.MarkerCustomize?"data-image-type":"data-background-image-type",ImageType[t.iconType]),r.attr(i===WidgetProperty.Image||i===WidgetProperty.MarkerCustomize?"data-image-value":"data-background-image-value",t.imagePath),this.storeImageDetails(r,i),r.find(".bbi-color-custom-default-icon").css("display","none"),r.find(".bbi-color-custom-image-element").attr("src",t.iconType===ImageType.Embedded?BoldBIDashboard.Dashboard.Resource.getImage(t.imagePath):t.imagePath).parent().css("display","block"));t.isChecked?r.removeClass("bbi-color-custom-image-disable"):r.addClass("bbi-color-custom-image-disable");this.renderCustomIconButton(r,r);r.find(".bbi-color-custom-image").off("mouseover",this.bbdesigner$.proxy(this.onMouseOver,this));r.find(".bbi-color-custom-image").on("mouseover",this.bbdesigner$.proxy(this.onMouseOver,this));r.off("mouseleave",this.bbdesigner$.proxy(this.onMouseLeave,this));r.on("mouseleave",this.bbdesigner$.proxy(this.onMouseLeave,this))}},n.prototype.onMouseOver=function(n){var t=this.bbdesigner$(n.currentTarget).parent(),i;t.hasClass("bbi-color-custom-image-disable")||(i=t.hasClass("bbi-color-custom-image-field")?t.attr("data-image-value"):t.attr("data-background-image-value"),BoldBIDashboard.isNullOrUndefined(i)||n.type==="mouseover"&&(t.find(".bbi-color-custom-image").slideUp(1e3),t.find(".bbi-color-custom-default-icon").slideDown(1e3)))},n.prototype.onMouseLeave=function(n){var t=this.bbdesigner$(n.currentTarget),i;t.hasClass("bbi-color-custom-image-disable")||(i=t.hasClass("bbi-color-custom-image-field")?t.attr("data-image-value"):t.attr("data-background-image-value"),BoldBIDashboard.isNullOrUndefined(i)||(t.find(".bbi-color-custom-default-icon").slideUp(1e3),t.find(".bbi-color-custom-image").slideDown(1e3)))},n.prototype.renderIconFieldDropDownContent=function(n,t){var r,s,i,u,f,e,o,h,c,l;n.find("#"+n.attr("id")+"_icon_list").length===0?(r=BoldBIDashboard.buildTag("div","",{},{id:n.attr("id")+"_icon_list"}),n.append(r)):r=n.find("#"+n.attr("id")+"_icon_list");r.append(this.dashboardDesigner.modules.util.getDropDownContentForIcon(this.ignoreCustomIcon));this.renderCustomIconButton(r.find(".e-custom-icon-button"),n);s=r.find(".e-custom-icon-button").length>0&&r.find(".e-custom-icon-button").css("display")!=="none"?250:210;n.BoldBIDashboardDropDownList({targetID:n.attr("id")+"_icon_list",cssClass:"bbi-dbrd-control bbi-dbrd-designer-icon-drpdwn bbi-dbrd-designer-icon-drpdwn-popup",popupWidth:200,popupHeight:s,width:"43px",height:"28px",select:this.bbdesigner$.proxy(this.selectionChanged,n,this)});i=n.data("BoldBIDashboardDropDownList");u=this.bbdesigner$(n[0]).parents(".bbi-color-custom-color-field-wrap").find(".e-custom-colorpicker");n.BoldBIDashboardDropDownList({watermarkText:this.waterMarkIcon(n,t,u)});!BoldBIDashboard.isNullOrUndefined(i)&&t.isChecked?t.iconType!==ImageType.Default?(i.enable(),i.selectItemByIndex(-1),n.attr("icon-type","custom"),n.attr("data-type",ImageType[t.iconType]),n.attr("data-value",t.selectedIcon),this.storeImageDetails(n),this.bbdesigner$(n[0].parentElement).find("#"+n[0].parentElement.id+"_selectedIcon").length>0&&this.bbdesigner$(n[0].parentElement).find("#"+n[0].parentElement.id+"_selectedIcon").remove(),u.length>0&&(f=u.data("BoldBIDashboardColorPicker"),BoldBIDashboard.isNullOrUndefined(f)||(e=n.data("BoldBIDashboardDropDownList"),BoldBIDashboard.isNullOrUndefined(e)||e.option("width","120px"),f.disable(),u.parents(".bbi-condition-icon-colorpicker-wrap").css("display","none"))),this.bbdesigner$(n).css({display:"none"}),o=BoldBIDashboard.buildTag("span","",{},{id:n[0].parentElement.id+"_selectedIcon"}),h=BoldBIDashboard.buildTag("div.bbi-custom-color-selectedIcon",this.locale.colorCustomAdvanceLocale.customBtnText,{},{"class":"e-input e-selectedIcon"}),o.append(h),this.bbdesigner$(o).insertBefore(n)):(c=i.items.parents("ul").find("li[data-icon-id="+t.selectedIcon+"]"),l=this.bbdesigner$(i.items).index(c),i.selectItemByIndex(l),i.enable()):this.targetInstance.type!=="BingMap"&&i.disable()},n.prototype.renderIconAlignmentDropdown=function(n,t,i){var f=[{text:"Right to Text",value:"Right"},{text:"Left to Text",value:"Left"},{text:"Icon Only",value:"Icon Only"}],r=null,u;BoldBIDashboard.isNullOrUndefined(i)||(u=i.PropertyColorPair.filter(function(n){return n.WidgetProperties===WidgetProperty.Icon}),u.length!==0&&(r=u[0].Image.ImageAlignment));n.BoldBIDashboardDropDownList({dataSource:f,fields:{text:"text",value:"value"},selectedIndex:BoldBIDashboard.isNullOrUndefined(r)?0:this.iconAlignmentSelection(f,r),height:"28px",width:"110px",cssClass:"bbi-dbrd-control bbi-dbrd-designer-icon-align-drpdwn-popup"});t.isChecked?(n.parent().removeClass("e-disable-selected-icondropdown"),n.data("BoldBIDashboardDropDownList").enable()):(n.parent().addClass("e-disable-selected-icondropdown"),n.data("BoldBIDashboardDropDownList").disable())},n.prototype.iconAlignmentSelection=function(n,t){for(var i=0;i<n.length;i++)if(n[i].value===t)return i;return 0},n.prototype.getIconAlignmentSettings=function(n){return n._selectedValue},n.prototype.selectionChanged=function(n,t){var r,f;if(!BoldBIDashboard.isNullOrUndefined(t.model)){var s=t.model.targetID,e=n.dashboardDesigner.element.find("#"+s),o="",i=n.dashboardDesigner.bbdesigner$(e[0].parentElement),u=e.parents(".bbi-color-custom-color-field-wrap").find(".e-custom-colorpicker");u.length>0&&(r=u.data("BoldBIDashboardColorPicker"),BoldBIDashboard.isNullOrUndefined(r)||(f=i.data("BoldBIDashboardDropDownList"),BoldBIDashboard.isNullOrUndefined(f)||f.option("width","43px"),u.parents(".bbi-condition-icon-colorpicker-wrap").css("display","block"),r.enable(),o=n.getHexColorFromRGBA(r.getColor())));i.removeAttr("icon-type");i.removeAttr("data-type");i.removeAttr("data-value");t.model.showCheckbox||t.model.multiSelectMode!=="none"||n.setIconForDropDown(i,t,o)}},n.prototype.setIconForDropDown=function(n,t,i){this.bbdesigner$(n[0].parentElement).find("#"+n[0].parentElement.id+"_selectedIcon").length>0&&this.bbdesigner$(n[0].parentElement).find("#"+n[0].parentElement.id+"_selectedIcon").remove();this.bbdesigner$(n).css({display:"none"});var r=BoldBIDashboard.buildTag("span.e-selected-drpdwn-icon","",{},{id:n[0].parentElement.id+"_selectedIcon"}),f=this.dashboardDesigner.modules.util.getIconClassName(BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ColorIconType,t.itemId)),u=BoldBIDashboard.buildTag("div","",{"padding-left":"3px"},{"class":"e-icon-collection e-color-custom-icon"});r.append(u);u.addClass(f);this.bbdesigner$(r).insertBefore(n);BoldBIDashboard.isNullOrUndefined(i)||i===""||r.find(".e-icon-collection").css("color",i)},n.prototype.selectIconByIndex=function(n){var i,t;if(!BoldBIDashboard.isNullOrUndefined(n)){for(i=n.items.length,t=0;t<i;t++)if(this.bbdesigner$(n.items[t]).hasClass("e-active")){n.selectItemByIndex(t);return}n.selectItemByIndex(0)}},n.prototype.waterMarkIcon=function(n,t,i){var u=n.data("BoldBIDashboardDropDownList"),r;BoldBIDashboard.isNullOrUndefined(t)||t.isChecked||(r=i.data("BoldBIDashboardColorPicker"),this.selectIconByIndex(u),this.targetInstance.type!=="BingMap"&&n.parent().addClass("e-disable-selected-icondropdown"),BoldBIDashboard.isNullOrUndefined(r)||r.disable());this.ignoreCustomIcon&&u.items.parents("ul").css({"grid-template-rows":"19% 19% 19% 19% 19%",height:"200px"})},n.prototype.renderRangePalette=function(n,t){var i=n.attr("id"),f,o,s,e,u,r;for(t.isGradient?this.bbdesigner$(n).attr({"data-type":"Gradient","data-startcolor":t.startColorValue,"data-endcolor":t.endColorValue}):this.bbdesigner$(n).attr({"data-type":"Flat","data-startcolor":t.startColorValue,"data-endcolor":""}),f="",this.bbdesigner$(n).attr("data-type")==="Flat"&&(f=this.bbdesigner$(n).attr("data-startcolor")),this.bbdesigner$(n).attr("data-type")==="Gradient"&&(f="linear-gradient("+this.bbdesigner$(n).attr("data-startcolor")+","+this.bbdesigner$(n).attr("data-endcolor")+")"),n.css({height:"28px",border:"1px solid #B3B3B3","border-radius":"3px",display:"inline-block","box-sizing":"border-box"}),o="<div id="+i+"_rangeColor class='e-range-color' data-id="+i+" style='height:17px;width:17px;background: "+f+";float:left;border-radius:3px;top:4px;left:4px;position:relative;'><\/div><div id="+i+"_rangeArrow class='e-range-icon e-icon e-down-arrow' data-id="+i+" style ='height:14px;width:14px;float:right;margin: 7px 4px 0px 0px;border-radius: 4px;'><\/div>",s="<div id="+i+"_colorPicker class='e-color-picker' style='height:304px;width:246px;position:absolute;border:1px solid #FFFFFF;box-shadow: 0 4px 6px 0 rgba(0,0,0,0.16);display:none;background:#FFFFFF;'><div id="+i+"_colorType style='height:26.1px;width:230px;border:1px solid #CCCCCC;border-radius:3px;margin:10px 0px 15px 7px;'><div id="+i+"_flatType class='e-flat-type' data-id="+i+" style='height:26.1px;width:115px;line-height: 26.1px;border-radius:2px 1px 1px 2px;background-color:#EEEEEE;font-size: 12px;text-align:center;float: left;font-family: Heebo, Roboto, Segoe UI,Noto Sans,Ubuntu,Droid Sans,Helvetica Neue,Arial;'>Flat<\/div><div id="+i+"_gradientType class='e-gradient-type' data-id="+i+" style='height:26.1px;width:115px;line-height: 26.1px;font-size: 12px;text-align:center;float: right;font-family: Heebo, Roboto, Segoe UI,Noto Sans,Ubuntu,Droid Sans,Helvetica Neue,Arial;'>Gradient<\/div><\/div><div id="+i+"_flatColorPalette data-id="+i+" style='height:206px;width:154px;margin-left: 7px;display:block'><\/div><div id="+i+"_gradientColorPalette style='height:240px;width:230px;margin-left: 7px;display:none'><\/div><\/div>",this.bbdesigner$(n).append(o),this.dashboardDesigner.element.append(s),e=[{code:"linear-gradient(#FFB199 , #FF0844)",startValue:"#FFB199",endValue:"#FF0844"},{code:"linear-gradient(#00F2FE, #4FACFE)",startValue:"#00F2FE",endValue:"#4FACFE"},{code:"linear-gradient(#009EFD, #2AF598)",startValue:"#009EFD",endValue:"#2AF598"},{code:"linear-gradient(#AC32E4, #4801FF)",startValue:"#AC32E4",endValue:"#4801FF"},{code:"linear-gradient(#FBAB7E, #F7CE68)",startValue:"#FBAB7E",endValue:"#F7CE68"},{code:"linear-gradient(#424242, #7B7B7B)",startValue:"#424242",endValue:"#7B7B7B"},{code:"linear-gradient(#FEAFA8, #F5EFEF)",startValue:"#FEAFA8",endValue:"#F5EFEF"},{code:"linear-gradient(#C2E9FB, #A1C4FD)",startValue:"#C2E9FB",endValue:"#A1C4FD"},{code:"linear-gradient(#96E6A1, #D4FC79)",startValue:"#96E6A1",endValue:"#D4FC79"},{code:"linear-gradient(#FBC2EB, #A18CD1)",startValue:"#FBC2EB",endValue:"#A18CD1"},{code:"linear-gradient(#FBD397, #FFECD2)",startValue:"#FBD397",endValue:"#FFECD2"},{code:"linear-gradient(#F9F9F9, #D0CECE)",startValue:"#F9F9F9",endValue:"#D0CECE"},{code:"linear-gradient(#FE9A8B, #F78CA0)",startValue:"#FE9A8B",endValue:"#F78CA0"},{code:"linear-gradient(#9EFBD3, #45D4FB)",startValue:"#9EFBD3",endValue:"#45D4FB"},{code:"linear-gradient(#8DDAD5, #00CDAC)",startValue:"#8DDAD5",endValue:"#00CDAC"},{code:"linear-gradient(#7028E4, #E5B2CA)",startValue:"#7028E4",endValue:"#E5B2CA"},{code:"linear-gradient(#FFB199, #E78208)",startValue:"#FFB199",endValue:"#E78208"},{code:"linear-gradient(#C9CCD3, #E3E5E8)",startValue:"#C9CCD3",endValue:"#E3E5E8"},{code:"linear-gradient(#A445B2, #FF0066)",startValue:"#A445B2",endValue:"#FF0066"},{code:"linear-gradient(#00C6FB, #005BEA)",startValue:"#00C6FB",endValue:"#005BEA"},{code:"linear-gradient(#0BA360, #3CBA92)",startValue:"#0BA360",endValue:"#3CBA92"},{code:"linear-gradient(#764BA2, #667EEA)",startValue:"#764BA2",endValue:"#667EEA"},{code:"linear-gradient(#F09819, #FF5858)",startValue:"#F09819",endValue:"#FF5858"},{code:"linear-gradient(#596164, #868F96)",startValue:"#596164",endValue:"#868F96"},{code:"linear-gradient(#C43A30, #562E69)",startValue:"#C43A30",endValue:"#562E69"},{code:"linear-gradient(#0C3483, #6B8CCE)",startValue:"#0C3483",endValue:"#6B8CCE"},{code:"linear-gradient(#53957A, #013929)",startValue:"#53957A",endValue:"#013929"},{code:"linear-gradient(#2E0784, #7039E5)",startValue:"#2E0784",endValue:"#7039E5"},{code:"linear-gradient(#B12A5B, #5D1510)",startValue:"#B12A5B",endValue:"#5D1510"},{code:"linear-gradient(#485563, #29323C)",startValue:"#485563",endValue:"#29323C"}],r=0;r<30;r++)this.dashboardDesigner.element.find("#"+i+"_gradientColorPalette").append("<div class='e-gradient-color' data-id="+i+" style='width:24px;height:24px;border-radius:2px;float:left;margin: 5px 3px 17px 10px;background-image:"+e[r].code+";' data-startcolor="+e[r].startValue+" data-endcolor="+e[r].endValue+">");if(u=this.bbdesigner$(n).children(),!BoldBIDashboard.isNullOrUndefined(n))if(t.isChecked){for(this.bbdesigner$(n).prop("disabled",!1),r=0;r<u.length;r++)this.bbdesigner$(u[r]).prop("disabled",!1);this.bbdesigner$(n).removeClass("e-range-disable")}else{for(this.bbdesigner$(n).prop("disabled",!0),r=0;r<u.length;r++)this.bbdesigner$(u[r]).prop("disabled",!0);this.bbdesigner$(n).addClass("e-range-disable")}this.dashboardDesigner.element.find("#"+i+"_flatColorPalette").BoldBIDashboardColorPicker({value:t.startColorValue,displayInline:!0,modelType:"picker",change:this.bbdesigner$.proxy(this.onColorChange,this,n)});t.isGradient&&(this.dashboardDesigner.element.find("#"+i+"_flatColorPalette").css("display","none"),this.dashboardDesigner.element.find("#"+i+"_flatType").css("background-color","#FFFFFF"),this.dashboardDesigner.element.find("#"+i+"_gradientColorPalette").css("display","block"),this.dashboardDesigner.element.find("#"+i+"_gradientType").css("background-color","#EEEEEE"))},n.prototype.colorChange=function(n,t,i){t===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(WidgetProperty,WidgetProperty.Icon)&&n.find(".bbi-icon-custom-color-field .e-selected-drpdwn-icon .e-icon-collection").css("color",this.getHexColorFromRGBA(i.RGBA))},n.prototype.onColorChange=function(n,t){this.bbdesigner$(n).attr({"data-startcolor":this.getHexColorFromRGBA(t.RGBA),"data-type":"Flat"})},n.prototype.renderColorPicker=function(n,t,i,r){n.BoldBIDashboardColorPicker({value:t.startColorValue,cssClass:"bbi-designer-ejwidgets-colorpicker bbi-designer-content-label e-color-custom-colorpicker",select:this.bbdesigner$.proxy(this.colorChange,this,i.parents(".bbi-color-custom-color-field-wrap"),r),modelType:"picker",palette:"basicpalette",buttonMode:BoldBIDashboard.ButtonMode.Dropdown})},n.prototype.getMeasureFiledTypeDS=function(){var n=[{text:"Greater than",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CGreaterThan)},{text:"Greater than or Equal to",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CGreaterThanOrEqualTo)},{text:"Less than",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CLessThan)},{text:"Less than or Equal to",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CLessThanOrEqalTo)},{text:"Equal to",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CEquals)},{text:"Not equal to",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CNotEquals)},{text:"Between",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CBetween)},{text:"Not between",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CNotBetween)},];return BoldBIDashboard.isNullOrUndefined(this.customRuleMeasureConditions)?n:this.customRuleMeasureConditions},n.prototype.getDimensionFiledTypeDS=function(){return[{text:"Starts With",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CDimensionConditionType,CDimensionConditionType.Startswith)},{text:"Ends With",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CDimensionConditionType,CDimensionConditionType.Endswith)},{text:"Contains",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CDimensionConditionType,CDimensionConditionType.Contains)},{text:"Not Contains",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CDimensionConditionType,CDimensionConditionType.NotContains)},{text:"Equals",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CDimensionConditionType,CDimensionConditionType.Equals)},{text:"Not Equals",value:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CDimensionConditionType,CDimensionConditionType.NotEquals)}]},n.prototype.renderConditionTypeDropDwn=function(n,t,i){var r=this.isMeasure?this.getMeasureFiledTypeDS():this.getDimensionFiledTypeDS(),f=this.conditionDrpDwnSelection(r,i),u;n.BoldBIDashboardDropDownList({fields:{text:"text",value:"value"},dataSource:r,selectedIndex:f,cssClass:"bbi-designer-ejwidgets bbi-dbrd-control",width:"150px",height:"24px",change:this.bbdesigner$.proxy(this.conditionDrpDwnChange,this,t,i),enabled:!0,showRoundedCorner:!0});this.isMeasure&&(BoldBIDashboard.isNullOrUndefined(i)||i.MeasureCondition!==CMeasureConditionType.CBetween&&i.MeasureConditon!==CMeasureConditionType.CNotBetween||(u=n.parents(".bbi-advanc-condition-content").find(".bbi-condition-value-end"),u.css("display","block")))},n.prototype.conditionDrpDwnSelection=function(n,t){var r,i;if(!BoldBIDashboard.isNullOrUndefined(t))if(this.isMeasure){for(r=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,t.MeasureCondition),i=0;i<n.length;i++)if(n[i].value===r)return i}else return t.DimensionCondition;return 0},n.prototype.conditionDrpDwnChange=function(n,t,i){this.isMeasure?this.measureConditionDrpDwnChange(n,i):this.DimensionConditionDrpDwnChange(n,t,i)},n.prototype.DimensionConditionDrpDwnChange=function(n,t,i){if(!BoldBIDashboard.isNullOrUndefined(i)){var r=this.conditionalContent.find(".e-condition-type-drpdwn[data-condition-number ="+n+"]"),e=r.parents(".bbi-advanc-condition-content").find(".bbi-condition-value-start"),o=r.parents(".bbi-advanc-condition-content").find(".bbi-condition-value-end"),u=r.parents(".bbi-advanc-condition-content").find(".e-condition-value-dimension"),f=r.parents(".bbi-advanc-condition-content").find(".bbi-condition-inclusion-value-dimension"),s=r.parents(".bbi-advanc-condition-content").find("#BoldBIDashboard"+this.id+"_casesensitive_checkbox_"+n);e.css("display","none");o.css("display","none");i.text===CDimensionConditionType[CDimensionConditionType.Inclusion]?(u.css("display","none"),f.css("display","block"),s.css("display","none")):(u.css("display","block"),f.css("display","none"),u.attr("placeholder",this.locale.colorCustomAdvanceLocale.nameHere));e.val("");o.val("");u.val("");f.val("")}},n.prototype.measureConditionDrpDwnChange=function(n,t){if(!BoldBIDashboard.isNullOrUndefined(t)){var i=this.conditionalContent.find(".e-condition-type-drpdwn[data-condition-number ="+n+"]"),u=i.parents(".bbi-advanc-condition-content").find(".bbi-condition-value-start"),r=i.parents(".bbi-advanc-condition-content").find(".bbi-condition-value-end"),f=i.parents(".bbi-advanc-condition-content").find(".e-condition-value-dimension"),e=i.parents(".bbi-advanc-condition-content").find(".bbi-condition-inclusion-value-dimension");f.css("display","none");e.css("display","none");f.val("");e.val("");t.selectedValue===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CBetween)||t.selectedValue===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CNotBetween)?(u.attr("placeholder",this.locale.colorCustomAdvanceLocale.from),r.css("display","block")):(u.attr("placeholder",this.locale.colorCustomAdvanceLocale.valueHere),r.css("display","none"),r.val(""))}},n.prototype.getConditionLabelName=function(n,t){return BoldBIDashboard.isNullOrUndefined(t)?this.locale.colorCustomAdvanceLocale.conditionText+n:t.RangeLabel},n.prototype.getStartRangeValue=function(n){return BoldBIDashboard.isNullOrUndefined(n)?"''":this.isContainsParam(n.StartRangeParameter)?n.StartRangeParameter:n.StartRange},n.prototype.getEndRangeValue=function(n){return BoldBIDashboard.isNullOrUndefined(n)?"''":this.isContainsParam(n.EndRangeParameter)?n.EndRangeParameter:n.EndRange},n.prototype.getDimensionValue=function(n){return BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(n.DimensionConditionalValue)||n.DimensionConditionalValue.length===0?"''":"'"+n.DimensionConditionalValue+"'"},n.prototype.getConditionField=function(n,t){return"<div class= 'bbi-color-custom-condition-field-wrap'><label class = 'bbi-color-custom-condition-name-label bbi-custom-color-text-style bbi-designer-fontfamily'>"+this.locale.colorCustomAdvanceLocale.conditionNameLabel+"<\/label><input type='text' class='e-textbox bbi-condition-name-textbox' placeholder ='Name here' value='"+this.getConditionLabelName(n,t)+"'/><\/div><div class= 'bbi-color-custom-condition-field-wrap'><label class = 'bbi-color-custom-condition-type-label bbi-custom-color-text-style bbi-designer-fontfamily'>"+this.locale.colorCustomAdvanceLocale.conditionTypeLabel+"<\/label><div class='bbi-condition-type-drpdwn-wrap'><input id="+this.id+"_condition_type_drpdwn_"+n+" data-condition-number="+n+" type ='text' class= 'e-condition-type-drpdwn'/><\/div><\/div><div class= 'bbi-color-custom-condition-field-wrap bbi-condition-value-textbox-wrapper'><label class = 'bbi-color-custom-condition-value-label bbi-custom-color-text-style .bbi-designer-fontfamily'>"+this.locale.colorCustomAdvanceLocale.conditionValueLabel+"<\/label><input type='text' class='e-textbox bbi-condition-value-textbox bbi-condition-format-dash bbi-condition-value-start' id='"+this.id+"_condition_value_start' value ='"+this.getStartRangeValue(t)+"' placeholder ='Value here'/><input class='e-textbox bbi-condition-value-textbox bbi-condition-format-dash e-condition-value-dimension' id= '"+this.id+"_condition_value_dimension' value ="+this.getDimensionValue(t)+" placeholder ='Name here'/><div id="+this.id+"_inclusion_"+n+" class='bbi-condition-inclusion-value-dimension'><\/div><\/div><div class= 'bbi-color-custom-condition-field-wrap bbi-condition-value-textbox-wrapper'><div class = 'bbi-color-custom-condition-close-icon'><\/div><input type='text' class='e-textbox bbi-condition-value-textbox bbi-condition-format-dash bbi-condition-value-end' id ='"+this.id+"_condition_value_end' value ='"+this.getEndRangeValue(t)+"' placeholder ='To'/><div class ='bbi-color-select-warning bbi-dbrd-designer-hoverable' data-tooltip ='"+this.locale.colorCustomAdvanceLocale.colorSelectErrMsg+"'><\/div><input type='checkbox' id="+this.id+"_casesensitive_checkbox_"+n+" class='e-textbox bbi-color-custom-condition-close'/><\/div>"},n.prototype.onColorPickerOpen=function(n){var t=this.bbdesigner$(n.target).attr("data-id")||this.bbdesigner$(n.target).attr("id");if(this.previousColorPickerID!==t&&this.dashboardDesigner.element.find("#"+this.previousColorPickerID+"_colorPicker").css("display")==="block")this.onColorPickerClose(this.previousColorPickerID,null,!0);this.dashboardDesigner.element.find("#"+t+"_colorPicker").css("display")==="none"?this.dashboardDesigner.element.find("#"+t+"_colorPicker").css("display","block"):this.dashboardDesigner.element.find("#"+t+"_colorPicker").css("display","none");this.setColorPalettePosition(t);n.stopPropagation();this.previousColorPickerID=t;this.bbdesigner$(document).on("click","body",this.bbdesigner$.proxy(this.onColorPickerClose,this,t))},n.prototype.getZindexPartial=function(n,t){var i,u,r;if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0)return u=n.parents(),r=this.bbdesigner$("body").children(),!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0&&r.splice(r.index(t),1),this.bbdesigner$(r).each(function(n,t){u.push(t)}),i=Math.max.apply(i,this.bbdesigner$.map(u,function(n){if(this.bbdesigner$(n).css("position")!=="static")return parseInt(this.bbdesigner$(n).css("z-index"))||1})),!i||i<1e4?i=1e4:i+=1,i},n.prototype.setColorPalettePosition=function(n){var t=this.dashboardDesigner.element.find("#"+n),i=this.dashboardDesigner.element.find("#"+n+"_colorPicker"),r=this.getOffsetValue(t),h=this.bbdesigner$(document).scrollTop()+this.bbdesigner$("#"+this.dashboardDesigner._id).height()-(r.top+this.bbdesigner$(t).outerHeight()),c=r.top-this.bbdesigner$(document).scrollTop(),f=i.outerHeight(),e=i.outerWidth(),u=r.left,o=t.outerHeight(),l=(o-t.height())/2,s=3,a=this.getZindexPartial(t,i),v=(f<h||f>c?r.top+o+s:r.top-f-s)-l,y=this.bbdesigner$(document).scrollLeft()+this.bbdesigner$("#"+this.dashboardDesigner._id).width()-u;e>y&&e<u+t.outerWidth()&&(u-=i.outerWidth()-t.outerWidth());i.css({left:u+"px",top:v+"px","z-index":a})},n.prototype.getOffsetValue=function(n){var r=n.offset(),t=r.top,i=r.left,u=this.bbdesigner$(document).height()-this.bbdesigner$("#"+this.dashboardDesigner._id).height(),f=this.bbdesigner$(document).width()-this.bbdesigner$("#"+this.dashboardDesigner._id).width();return t=t-u,i=i-f,{top:t,left:i}},n.prototype.onColorPickerClose=function(n,t,i){var u=this.dashboardDesigner.element.find("#"+n),r;(i||!BoldBIDashboard.isNullOrUndefined(t)&&this.dashboardDesigner.element.find(t.target).parents(".e-color-picker").length===0)&&(this.dashboardDesigner.element.find("#"+n+"_colorPicker").css("display","none"),r="",r=this.bbdesigner$(u).attr("data-color"),this.dialogDiv.find("#"+n+"_color").css("background",r),BoldBIDashboard.isNullOrUndefined(r)?this.bbdesigner$(u).find(".e-color-textbox").val(r):this.bbdesigner$(u).find(".e-color-textbox").val(r.toLocaleUpperCase()),u.css("border","1px solid #B3B3B3"))},n.prototype.onColorTextFocus=function(n){var t=this.dashboardDesigner.element.find("#"+this.bbdesigner$(n.target).attr("data-id")),i=this.dashboardDesigner.element.find("#"+this.bbdesigner$(n.target).attr("data-id")+"_colorPalette").data("BoldBIDashboardColorPicker"),r=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(this.bbdesigner$(n.target).val());r?(t.css("border","1px solid #B3B3B3"),t.find(".e-range-color").css("background",this.bbdesigner$(n.target).val()),i.setModel({value:this.bbdesigner$(n.target).val()})):t.css("border","1px solid #FF0000")},n.prototype.setMinValue=function(n){var i=this.bbdesigner$(n.currentTarget),r=i.parents(".bbi-advanc-condition-wrap"),t=r.find(".e-condition-type-drpdwn").data("BoldBIDashboardDropDownList"),u;BoldBIDashboard.isNullOrUndefined(t)||(t.getSelectedValue()===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CBetween)||t.getSelectedValue()===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CNotBetween))&&(u=r.find(".bbi-condition-value-end"),u.attr("min",i.val()))},n.prototype.setMaxValue=function(n){var t=this.bbdesigner$(n.currentTarget),u=t.parents(".bbi-advanc-condition-wrap"),i=u.find(".e-condition-type-drpdwn").data("BoldBIDashboardDropDownList"),r;BoldBIDashboard.isNullOrUndefined(i)||(i.getSelectedValue()===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CBetween)||i.getSelectedValue()===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CNotBetween))&&(r=t.parents(".bbi-advanc-condition-content").find(".bbi-condition-value-start"),r.attr("max",t.val()))},n.prototype.removeCondition=function(n){var i=this.bbdesigner$(n.currentTarget).parents(".bbi-advanc-condition-wrapper"),r=parseInt(i.attr("data-condition-num"),10),t;this.conditionNumbers.indexOf(r)>-1&&this.conditionNumbers.splice(this.conditionNumbers.indexOf(r),1);this.bbdesigner$(n.currentTarget).parents(".bbi-advanc-condition-wrapper").remove();this.removeImage(i);t=this.conditionalContent.find("#"+this.id+"_advance_settings_coditional_range_scroller").data("BoldBIDashboardScroller");BoldBIDashboard.isNullOrUndefined(t)||t.refresh();this.conditionNumbers.length===1&&this.disableDeleteIcon(!0)},n.prototype.removeImage=function(n){var u=n.find(".bbi-icon-custom-color-field"),t,i,r;u.length>0&&(t=u.find("input.e-condition-icon-dropdown"),BoldBIDashboard.isNullOrUndefined(t)||t.attr("data-type")===ImageType[ImageType.Embedded]&&Object.keys(this.dashboardDesigner.colorCustomIconStore).length>0&&delete this.dashboardDesigner.colorCustomIconStore[t.attr("data-value")]);Object.keys(this.dashboardDesigner.colorCustomIconStore).length>0&&(i=n.find(".bbi-color-custom-image-field"),i.length>0&&i.attr("data-image-type")===ImageType[ImageType.Embedded]&&delete this.dashboardDesigner.colorCustomIconStore[i.attr("data-image-value")],r=n.find(".bbi-color-custom-background-image-field"),r.length>0&&r.attr("data-background-image-type")===ImageType[ImageType.Embedded]&&delete this.dashboardDesigner.colorCustomIconStore[r.attr("data-background-image-value")])},n.prototype.onRangeColorOpen=function(n){var t=this.bbdesigner$(n.target).attr("data-id")||this.bbdesigner$(n.target).attr("id");this.dashboardDesigner.element.find("#"+t+"_colorPicker").css("display")==="none"?this.dashboardDesigner.element.find("#"+t+"_colorPicker").css("display","block"):this.dashboardDesigner.element.find("#"+t+"_colorPicker").css("display","none");n.stopPropagation()},n.prototype.selectFontStyleIcons=function(n){var t=this.bbdesigner$(n.currentTarget);t.hasClass("bbi-designer-fontstyle-selection")?t.removeClass("bbi-designer-fontstyle-selection"):t.addClass("bbi-designer-fontstyle-selection")},n.prototype.renderCasesensitiveCheckbox=function(n,t){n.BoldBIDashboardCheckBox({text:this.locale.colorCustomAdvanceLocale.casesensitive,checked:BoldBIDashboard.isNullOrUndefined(t)?!0:t.IsCaseSensitive})},n.prototype.getColorField=function(n){var t,i;for(this.colorFields=!BoldBIDashboard.isNullOrUndefined(this.colorFields)&&this.colorFields.length>0?this.colorFields:this.getDefaultColorFields(),t=null,i=0;i<this.colorFields.length;i++)t=BoldBIDashboard.isNullOrUndefined(t)?this.rendercolorFields(this.colorFields[i],n):t+this.rendercolorFields(this.colorFields[i],n);return t},n.prototype.getDefaultColorFields=function(){return[{Name:WidgetProperty.BackgroundColor,DisplayName:"Background",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.BorderColor,DisplayName:"Border",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.TitleColor,DisplayName:"Title",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.FillColor,DisplayName:"Range",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.Icon,DisplayName:"Icon",ColorPicker:ColorSetColorPickers.IconColorPicker}]},n.prototype.getCheckBox=function(n,t,i,r){var u=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(WidgetProperty,n),f=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ColorSetColorPickers,i);return"<div class= 'bbi-color-custom-color-field-chck-wrap'><input type='checkbox' id="+this.id+"_"+n+"_chkbox_"+r+" class='e-custom-color-checkbox' data-name='"+u+"'data-displayname='"+t+"'data-colorpicker='"+f+"'/><\/div>"},n.prototype.getIcon=function(n,t,i){var r=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(WidgetProperty,n);return"<div class= 'bbi-color-custom-color-field-chck-wrap bbi-icon-custom-color-field'><input type='text' id="+this.id+"_"+n+"_drpdwn_"+i+" class='e-condition-icon-dropdown' data-name='"+r+"'data-displayname='"+t+"'/><\/div>"},n.prototype.getColorPicker=function(n,t,i,r){var u=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(WidgetProperty,n),f=n===WidgetProperty.Icon?"bbi-color-custom-color-field-colorpicker-wrap bbi-condition-icon-colorpicker-wrap":"bbi-color-custom-color-field-colorpicker-wrap",e="<div id="+this.id+"_range_colorpicker_"+t+" class='e-condition-range-colorpicker e-custom-colorpicker'><\/div>",o="<input type='text' id="+this.id+"_"+(n===WidgetProperty.MarkerCustomize?"MarkerColor":n)+"_colorpicker_"+t+" class='e-custom-colorpicker'data-name='"+u+"'data-displayname='"+r+"'/>",s=ColorSetColorPickers.GradientColorPicker===i?e:o;return"<div class= '"+f+"'>"+s+"<\/div>"},n.prototype.getIconAlignment=function(n,t){return"<div class= 'bbi-color-custom-color-field-chck-wrap bbi-icon-align-custom-color-field'><input type='text' id="+this.id+"_"+n+"_drpdwn_"+t+" class='e-condition-icon-align-dropdown'/><\/div>"},n.prototype.fontStyle=function(n,t){return"<div class='bbi-conditional-font'><span  id="+this.id+"_"+n+"_bold_"+t+" class='e-designer-font-bold-icon bbi-designer-font-style-icons bbi-dbrd-designer-hand-cursor e-font-bold bbi-font-style-basic-styles' /><span  id="+this.id+"_"+n+"_Italic_"+t+" class='e-designer-font-italic-icon bbi-designer-font-style-icons bbi-dbrd-designer-hand-cursor e-font-italic bbi-font-style-basic-styles' /><span  id="+this.id+"_"+n+"_Underline_"+t+" class='e-designer-font-underline-icon bbi-designer-font-style-icons bbi-dbrd-designer-hand-cursor e-font-underline bbi-font-style-basic-styles' /><span id="+this.id+"_"+n+"_StrikeThrough_"+t+" class='e-designer-font-strike-icon bbi-designer-font-style-icons bbi-dbrd-designer-hand-cursor e-font-strikethrough bbi-font-style-basic-styles' /><\/div>"},n.prototype.getImageElement=function(n,t,i){var r=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(WidgetProperty,n),u=n===WidgetProperty.BackgroundImage?"bbi-color-custom-background-image-field":"bbi-color-custom-image-field";return"<div class= 'bbi-color-custom-color-field-chck-wrap'><input type='chekbox' id="+this.id+"_"+n+"_chkbox_"+i+" class='e-custom-color-checkbox' data-name='"+r+"'data-displayname='"+t+"'/><\/div><div id="+this.id+"_"+r+"_"+i+" class= 'bbi-color-custom-color-field-chck-wrap "+u+"'><div class='bbi-color-custom-image'><img class= 'bbi-color-custom-image-element' src= '' /><\/div><div class='bbi-color-custom-default-icon'><span class= 'bbi-color-custom-default-icon-content'><\/span><\/div><\/div>"},n.prototype.getMarkerSizeElement=function(n,t,i){var r=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(WidgetProperty,n);return"<div class= 'bbi-color-custom-color-field-chck-wrap'><input type='chekbox' id="+this.id+"_"+n+"_chkbox_"+i+" class='e-custom-color-checkbox' data-name='"+r+"'data-displayname='"+t+"'/><\/div><div class= 'bbi-color-custom-color-field-chck-wrap bbi-marker-size-custom-color-field'><input type='text' id="+this.id+"_"+n+"_size_"+i+" class='e-condition-marker-size'data-name='"+r+"'data-displayname='"+t+"'/><\/div>"},n.prototype.getMarkerCustomElements=function(n){var t="<div class='bbi-marker-shape-custom-field-wrap'><div style=' float: left '><input data-number='"+n+"'data-name='MarkerShape'data-displayname='Marker Shape' class='e-custom-color-radioButton' type='radio' id='"+this.id+"_MarkerShape_rdBtn_"+n+"'/> <label for='"+this.id+"__MarkerShape_rdBtn_"+n+"'class='bbi-designer-fontfamily e-custom-color-radio-button-text bbi-custom-color-text-style'>Marker Shape<\/label><\/div><div id="+this.id+"_MarkerShape_"+n+" class= 'bbi-marker-shape-custom-field-wrap'><div class='e-marker-shape  e-marker-shape-custom-field'><input type='text' id="+this.id+"_MarkerShape_drpdwn_"+n+" class='e-marker-shape-dropdown'/><\/div><\/div><\/div>",i="<div class='bbi-marker-shape-custom-field-wrap'><div style=' float: left '><input data-number='"+n+"'data-name='MarkerImage'data-displayname='MarkerImage' class='e-custom-color-radioButton' type='radio' id='"+this.id+"_MarkerImage_rdBtn_"+n+"'/> <label for='"+this.id+"_MarkerImage_rdBtn_"+n+"'class='bbi-designer-fontfamily e-custom-color-radio-button-text bbi-custom-color-text-style'>Marker Image<\/label><\/div><div id="+this.id+"_MarkerImage_"+n+" class= 'bbi-color-custom-color-field-wrap bbi-marker-shape-image-custom-field'><div class='bbi-color-custom-image'><img class= 'bbi-color-custom-image-element' src= '' /><\/div><div class='bbi-color-custom-default-icon'><span class= 'bbi-color-custom-default-icon-content'><\/span><\/div><\/div><\/div><br/>",r="<div class='bbi-marker-shape-custom-field-wrap'><div style='float: left; margin-top:2px;'>Color<\/div><div id="+this.id+"_MarkerColor_"+n+"' data-name='MarkerColor' class= 'bbi-marker-width-custom-field-wrap bbi-marker-width-custom-fieldNaN"+this.getColorPicker(WidgetProperty.MarkerCustomize,n,ColorSetColorPickers.NormalColorPicker)+"<\/div><\/div>",u="<div class='bbi-marker-shape-custom-field-wrap"+(this.isMarkerSizeConfigured?" bbi-disabledbutton":"")+"'><div style='float: left; margin-top:2px;'>Width<\/div><div id="+this.id+"_MarkerWidth_"+n+"' data-name='MarkerWidth' class= 'bbi-marker-width-custom-field-wrap bbi-marker-width-custom-field'><div class='e-marker-width'><input type='text' id="+this.id+"_MarkerWidth_"+n+" class='e-marker-width-numeric'/><\/div><\/div><\/div>",f="<div class='bbi-marker-shape-custom-field-wrap"+(this.isMarkerSizeConfigured?" bbi-disabledbutton":"")+"'><div style='float: left; margin-top:2px;'>Marker Height<\/div><div id="+this.id+"_MarkerHeight_"+n+"' data-name='MarkerHeight' class= 'bbi-marker-height-custom-field-wrap e-marker-height-custom-field'><div class='e-marker-height'><input type='text' id="+this.id+"_MarkerHeight_"+n+" class='e-marker-height-numeric'/><\/div><\/div><\/div>";return t+i+r+u+f},n.prototype.rendercolorFields=function(n,t){var i=n.Name===WidgetProperty.Icon?this.getIcon(n.Name,n.DisplayName,t):"",r=n.Name===WidgetProperty.Icon&&n.IncludeIconAlignment?this.getIconAlignment("IconAlignment",t):"";return n.Name===WidgetProperty.Font?"<div class='bbi-color-custom-color-field-wrap'>"+this.fontStyle(n.Name,t)+"<\/div>":n.Name===WidgetProperty.Image||n.Name===WidgetProperty.BackgroundImage?"<div class='bbi-color-custom-color-field-wrap'>"+this.getImageElement(n.Name,n.DisplayName,t)+"<\/div>":n.Name===WidgetProperty.MarkerCustomize?this.getMarkerCustomElements(t):n.Name===WidgetProperty.MarkerSize?"<div class='bbi-color-custom-color-field-wrap'>"+this.getMarkerSizeElement(n.Name,n.DisplayName,t)+"<\/div>":"<div class='bbi-color-custom-color-field-wrap'>"+this.getCheckBox(n.Name,n.DisplayName,n.ColorPicker,t)+i+(this.targetInstance.type==="BingMap"?n.Name===WidgetProperty.Icon?"":this.getColorPicker(n.Name,t,n.ColorPicker,n.DisplayName):this.getColorPicker(n.Name,t,n.ColorPicker,n.DisplayName))+r+"<\/div>"},n.prototype.basedOnConditionalSelectionChange=function(n){var i=this.conditionalContent.find("#"+this.id+"_summary_type_conditional_range_element"),r=this.conditionalContent.find("#"+this.id+"_value_type_conditional_range_element"),e=this.conditionalContent.find("#"+this.id+"_summary_type_conditional_range"),o=this.conditionalContent.find("#"+this.id+"_value_type_conditional_range").data("BoldBIDashboardDropDownList"),u=e.data("BoldBIDashboardDropDownList"),f,t;this.selectedConditionalFieldInfo=this.fieldsDataSet[n.model.selectedIndex];this.isMeasure=this.selectedConditionalFieldInfo.isMeasure;i.length>0&&r.length>0&&(f=this.selectedConditionalFieldInfo.type==="Numeric"?this.measureAggregationDs:this.dimensionAggregationDs,u.setModel({dataSource:f,selectedIndex:0}),u.selectItemsByIndices("0"),t=!1,this.selectedConditionalFieldInfo.isAggregated||(t=!0,this.selectedConditionalFieldInfo.value==="KPIValue"?t=!1:this.selectedConditionalFieldInfo.type==="String"?(this.isMeasure=this.selectedConditionalFieldInfo.isMeasure,o.setModel({selectedIndex:0}),t=this.isMeasure):(this.isMeasure=this.selectedConditionalFieldInfo.isMeasure,t=!0)),i.parent().css("display",t?"block":"none"),r.parent().css("display",t?"block":"none"));this.conditionNumbers=[];this.conditionalRangeBodyElement.empty();this.renderConditiondiv(this.conditionalRangeBodyElement,1);this.displayDrpdwnUIConnBased()},n.prototype.populateColorPaletteContent=function(n){var u=BoldBIDashboard.buildTag("div.bbi-custom-color-palette-header","",{},{id:this.id+"_color_palette_header"}),f=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-designer-scroll-style-3 bbi-custom-color-palette-scroller","",{},{id:this.id+"_color_palette_body"}),a=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_color_palette_body_child"}),i=n?BoldBIDashboard.buildTag("div.bbi-custom-color-field-label-container","",{width:"250px",float:"left"}):BoldBIDashboard.buildTag("div.bbi-custom-color-field-label-container","",{}),l=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{}),t,e,o,s,h,c,r;l.text(this.locale.advancedColorCustomizationLocale.basedOn);i.append(l);t=BoldBIDashboard.buildTag("div.bbi-color-custom-color-palette-dropdown","",{});e=BoldBIDashboard.buildTag("input","",{},{id:this.id+"_based_on_color_palette"});t.append(e);o=BoldBIDashboard.buildTag("div.bbi-custom-color-field-label-container","",{width:"500px","margin-left":"250px"});s=BoldBIDashboard.buildTag("div.bbi-designer-fontfamily bbi-custom-color-text-style","",{});s.text("Color Mapping Type");o.append(s);h=BoldBIDashboard.buildTag("div.bbi-color-custom-color-palette-dropdown","",{"margin-left":"50px"});c=BoldBIDashboard.buildTag("input","",{},{id:this.id+"_color_mapping_color_palette"});h.append(c);r=BoldBIDashboard.buildTag("div.e-reset-color-palette","",{},{id:this.id+"_reset_color_palette"});r.text(this.locale.advancedColorCustomizationLocale.reset);this.isMapMarker?this.getMarkerBasedOnFieldList():this.getDimensionFields();this.selectedSolidFieldInfo=this.dimensionFields.length>0?this.colorPaletteInputs[0].BasedOn.UniqueColumnName===""?BoldBIDashboard.isNullOrUndefined(this.defaultBasedOnField)?this.dimensionFields[0]:this.dimensionFields[this.getSelectedIndexofDimensionSet(this.defaultBasedOnField.UniqueColumnName)]:this.dimensionFields[this.getSelectedIndexofDimensionSet(this.colorPaletteInputs[0].BasedOn.UniqueColumnName)]:null;e.BoldBIDashboardDropDownList({dataSource:this.dimensionFields,fields:{text:"displayName",value:"uniqueColumnName"},change:this.bbdesigner$.proxy(this.basedOnSolidSelectionChange,this),selectedIndex:this.colorPaletteInputs[0].BasedOn.UniqueColumnName===""?BoldBIDashboard.isNullOrUndefined(this.defaultBasedOnField)?0:this.getSelectedIndexofDimensionSet(this.defaultBasedOnField.UniqueColumnName):this.getSelectedIndexofDimensionSet(this.colorPaletteInputs[0].BasedOn.UniqueColumnName),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"200px",height:"24px"});c.BoldBIDashboardDropDownList({dataSource:[{value:"Data",text:"Data"},{value:"Index",text:"Index"}],fields:{text:"text",value:"value"},change:this.bbdesigner$.proxy(this.colorMappingSelectionChange,this),selectedIndex:this.colorPaletteInputs[0].ColorMappingType==="Data"?0:1,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"200px",height:"24px"});n?u.append(i,o,t,h,r):u.append(i,t,r);f.append(a);this.colorPaletteContent.append(u,f);this.colorpaletteIndicator=f.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup bbi-designer-loader",template:this.dashboardDesigner.getWaitingPopupTemplate()}).data("BoldBIDashboardWaitingPopup");this.showFirstDimension&&(i.addClass("bbi-disabledbutton"),t.addClass("bbi-disabledbutton"))},n.prototype.basedOnSolidSelectionChange=function(n){this.colorPaletteContent.find("#"+this.id+"_color_palette_body_child").empty();this.selectedSolidFieldInfo=this.dimensionFields[n.model.selectedIndex];this.getColumnValues(this.selectedSolidFieldInfo)},n.prototype.colorMappingSelectionChange=function(n){this.colorPaletteInputs.forEach(function(t){return t.ColorMappingType=n.value});this.colorPaletteContent.find("#"+this.id+"_color_palette_body_child").empty();this.getColumnValues(this.selectedSolidFieldInfo)},n.prototype.generateCustomPalette=function(n,t,i){var u=BoldBIDashboard.buildTag("div.bbi-basic-settings-column-row-element","",{},{id:this.id+"_basic_settings_column_Label"+i}),e=BoldBIDashboard.buildTag("div.e-basic-settings-column-name-element","",{}),r=BoldBIDashboard.buildTag("div.e-basic-settings-column-name bbi-designer-fontfamily bbi-dbrd-designer-hoverable","",{},{id:this.id+"_color_palette_UI_textBox_"+i}),f;r.text(t.Name);e.append(r);u.append(e);r.addClass(BoldBIDashboard.DashboardUtil.isExistTextWidth(r,!0)?"e-title-tip":"");r.hasClass("e-title-tip")&&r.attr("data-tooltip",t.Name);f=BoldBIDashboard.buildTag("div.e-basic-settings-column-value","",{},{id:this.id+"_color_palette_UI_color_picker_"+i});f.attr("data-color",t.Color);this.renderpaletteColorPicker(f,i);u.append(f);!BoldBIDashboard.isNullOrUndefined(t.IsEdited)&&t.IsEdited&&this.bbdesigner$(u).attr({"data-modified":!0});n.append(u)},n.prototype.renderpaletteColorPicker=function(n,t,i){var r,u,f,o,s,e;i===void 0&&(i=null);r=n.attr("id");u=BoldBIDashboard.isNullOrUndefined(i)?n.attr("data-color"):i;BoldBIDashboard.isNullOrUndefined(u)||u===""?this.bbdesigner$(n).attr("data-color","#278787"):this.bbdesigner$(n).attr("data-color",u);f="";f=this.bbdesigner$(n).attr("data-color");n.addClass("bbi-color-custom-palette-color-picker-value");o="<input id="+r+"_colorTextBox class='e-color-textbox bbi-color-custom-palette-color-picker-textbox' data-id="+r+" value="+f+"><\/input><div id="+r+"_color class='e-range-color bbi-color-custom-palette-color-picker-color' data-id="+r+" style='background: "+f+";'><\/div>";s="<div id="+r+"_colorPicker class='e-color-picker' style='height:241px;width:223px;position:absolute;border:0px solid #FFFFFF;border-radius:3px;box-shadow: 0 4px 6px 0 rgba(0,0,0,0.16);display:none;background:#FFFFFF;'><div id="+r+"_colorPalette data-id="+r+" style='height:241px;width:154px;display:block'><\/div><\/div>";this.bbdesigner$(n).append(o);this.dashboardDesigner.element.append(s);e=this.dashboardDesigner.element.find("#"+r+"_colorPalette").data("BoldBIDashboardColorPicker");BoldBIDashboard.isNullOrUndefined(e)||e.destroy();this.dashboardDesigner.element.find("#"+r+"_colorPalette").BoldBIDashboardColorPicker({value:this.bbdesigner$(n).attr("data-color"),displayInline:!0,modelType:"picker",change:this.bbdesigner$.proxy(this.onPaletteColorChange,this,n,t)})},n.prototype.onPaletteColorChange=function(n,t,i){var f=this.bbdesigner$(n).attr("data-color"),r=this.getHexColorFromRGBA(i.RGBA),u=this.selectedSolidFieldInfo.uniqueColumnName;BoldBIDashboard.isNullOrUndefined(r)||(r=r.toLocaleUpperCase());this.bbdesigner$(n).attr({"data-color":r,"data-type":"Flat"});f!==r?(this.bbdesigner$(n).attr({"data-modified":!0}),this.colorPaletteInputs[0].ColorMappingType==="Data"?this.colorPaletteInputs.filter(function(n){return n.BasedOn.UniqueColumnName===u}).length>0?(this.colorPaletteInputs.filter(function(n){return n.BasedOn.UniqueColumnName===u})[0].DefaultColorSets[t].Color=r,this.colorPaletteInputs.filter(function(n){return n.BasedOn.UniqueColumnName===u})[0].DefaultColorSets[t].IsEdited=!0):(this.colorPaletteInputs[0].DefaultColorSets[t].Color=r,this.colorPaletteInputs[0].DefaultColorSets[t].IsEdited=!1):this.colorPaletteInputs[0].ColorMappingType==="Index"&&(this.colorPaletteInputs.filter(function(n){return n.BasedOn.UniqueColumnName===u}).length>0?(this.colorPaletteInputs.filter(function(n){return n.BasedOn.UniqueColumnName===u})[0].IndexColorPalette[t].Color=r,this.colorPaletteInputs.filter(function(n){return n.BasedOn.UniqueColumnName===u})[0].IndexColorPalette[t].IsEdited=!0):(this.colorPaletteInputs[0].IndexColorPalette[t].Color=r,this.colorPaletteInputs[0].IndexColorPalette[t].IsEdited=!1))):BoldBIDashboard.isNullOrUndefined(this.bbdesigner$(n).parent().attr("data-modified"))||this.bbdesigner$(n).parent().removeAttr("data-modified")},n.prototype.getColumnValues=function(n){var f,r,o,i,t;this.colorpaletteIndicator.show();var u=[],s=JSON.stringify(this.dataGroupInfo),e=JSON.parse(s);if(!BoldBIDashboard.isNullOrUndefined(e.FieldContainers)&&e.FieldContainers.length>0)for(f=e.FieldContainers,r=0;r<f.length;r++)for(o=0;o<f[r].FieldInfos.length;o++)for(i=f[r].FieldInfos,t=0;t<i.length;t++)i[t].UniqueColumnName!==n.uniqueColumnName&&i[t].ContainerName!=="HiddenColumn"&&(i[t].IsVisible=!1),u.push(i[t]);this.isMapMarker&&u.push(this.createFieldInfoFromExisting(n));this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.executeQuery,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.WidgetAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.getColumnValues,dataset:this.dataGroupInfo.DataSourceID,fieldInfo:u})},{fnction:this.bbdesigner$.proxy(this.populateColumns,this,u.filter(function(t){return t.UniqueColumnName===n.uniqueColumnName})[0])},!0)},n.prototype.createFieldInfoFromExisting=function(n){var t=new BoldBIDashboard.Dashboard.FieldInfoForUI;return t.Name=n.displayName,t.Id=n.dataId,t.UniqueColumnName=n.uniqueColumnName,t.FieldType=FieldType.Dimensions,t.IsAggregatedExpression=n.IsAggregatedExpression,t.IsExpression=n.IsExpression,t.FieldActualType="bbi-designer-dataset-string",t.DateTimeFormat=DateTimeFormat.None,t.IsParameterField=n.IsParameterField,t.ParameterMode=n.ParameterMode,t.IsVisible=!0,t},n.prototype.onResetIconClick=function(){for(var r,n,f=this.dialogDiv.find("#"+this.id+"_color_palette_body_child").children(),i=this.selectedSolidFieldInfo.uniqueColumnName,u,t=0;t<f.length;t++)r=this.getColumnId(i),n=new DefaultColorSet,this.colorPaletteInputs[0].ColorMappingType==="Data"?this.colorPaletteInputs.filter(function(n){return n.BasedOn.UniqueColumnName===i}).length>0?(n=this.colorPaletteInputs.filter(function(n){return n.BasedOn.UniqueColumnName===i})[0].DefaultColorSets[t],n.Color=this.dashboardDesigner.modules.resource.getColumnValueColorCode(r,n.Name.toString()),n.IsEdited=!1):(n=this.colorPaletteInputs[0].DefaultColorSets[t],n.Color=this.dashboardDesigner.modules.resource.getColumnValueColorCode(r,n.Name.toString()),n.IsEdited=!1):this.colorPaletteInputs[0].ColorMappingType==="Index"&&(this.colorPaletteInputs.filter(function(n){return n.BasedOn.UniqueColumnName===i}).length>0?(n=this.colorPaletteInputs.filter(function(n){return n.BasedOn.UniqueColumnName===i})[0].IndexColorPalette[t],n.Color=this.getColumnValueColorCodes(r,t),n.IsEdited=!1):(n=this.colorPaletteInputs[0].IndexColorPalette[t],n.Color=this.getColumnValueColorCodes(r,t),n.IsEdited=!1)),u=this.dialogDiv.find("#"+this.id+"_color_palette_UI_color_picker_"+t),u.children().remove(),this.bbdesigner$(u).attr({"data-modified":!1}),this.renderpaletteColorPicker(u,t,n.Color)},n.prototype.getColumnValueColorCodes=function(n,t){for(var r,u,i=0;i<this.dashboardDesigner.modules.resource.colorCodeInfo.length;i++)if(this.dashboardDesigner.modules.resource.colorCodeInfo[i].Id===n)for(r=this.dashboardDesigner.modules.resource.colorCodeInfo[i].Items,u=0;u<r.length;u++)return r[t].Color;return null},n.prototype.getColumnId=function(n){for(var t,r=this.dataGroupInfo.FieldContainers,i=0;i<r.length;i++)if(r[i].FieldInfos.length>0&&(t=r[i].FieldInfos.filter(function(t){return t.UniqueColumnName===n}),t.length>0))return t[0].FieldActualType==="bbi-designer-dataset-datetime"?t[0].Id+"_"+t[0].DateTimeFormat:t[0].Id;return""},n.prototype.populateColumns=function(n,t){var e=this.colorPaletteContent.find("#"+this.id+"_color_palette_body"),c=this.colorPaletteContent.find("#"+this.id+"_color_palette_body_child"),f=[],o=[],u,r,s,i,h;if(this.dashboardDesigner.modules.resource.updateColorCodeInfo(t),u=JSON.parse(t.Values),BoldBIDashboard.isNullOrUndefined(this.colorPaletteInputs)||BoldBIDashboard.isNullOrUndefined(this.colorPaletteInputs[0])||BoldBIDashboard.isNullOrUndefined(this.colorPaletteInputs[0].ColorMappingType)||this.colorPaletteInputs[0].ColorMappingType!=="Data"){if(!BoldBIDashboard.isNullOrUndefined(this.colorPaletteInputs)&&!BoldBIDashboard.isNullOrUndefined(this.colorPaletteInputs[0])&&!BoldBIDashboard.isNullOrUndefined(this.colorPaletteInputs[0].ColorMappingType)&&this.colorPaletteInputs[0].ColorMappingType==="Index")for(i=0;i<this.defaultColorPalette.length;i++)r=this.colorPaletteInputs.filter(function(t){return t.BasedOn.UniqueColumnName===n.UniqueColumnName})[0].IndexColorPalette[i],o.push({Name:BoldBIDashboard.isNullOrUndefined(r)?"Color "+(i+1):r.Name,IsEdited:BoldBIDashboard.isNullOrUndefined(r)?!1:r.IsEdited,Color:!BoldBIDashboard.isNullOrUndefined(r)&&!BoldBIDashboard.isNullOrUndefined(r.Color)?r.Color:this.defaultColorPalette[i]})}else for(i=0;i<u.length;i++){var r=this.getSolidColorInfo(u[i][n.UniqueColumnName]),l=BoldBIDashboard.isNullOrUndefined(r)||!BoldBIDashboard.isNullOrUndefined(r)&&!r.IsEdited,a=n.FieldActualType==="bbi-designer-dataset-datetime"?n.Id+"_"+n.DateTimeFormat:n.Id,v=u[i][n.UniqueColumnName],y=this.dashboardDesigner.modules.resource.getColumnValueColorCode(a,v.toString());f.push({Name:BoldBIDashboard.isNullOrUndefined(r)?u[i][n.UniqueColumnName]:r.Name,IsEdited:BoldBIDashboard.isNullOrUndefined(r)?!1:r.IsEdited,Color:l?y:r.Color})}for(this.colorPaletteInputs.filter(function(t){return t.BasedOn.UniqueColumnName===n.UniqueColumnName}).length>0?BoldBIDashboard.isNullOrUndefined(this.colorPaletteInputs)||BoldBIDashboard.isNullOrUndefined(this.colorPaletteInputs[0])||BoldBIDashboard.isNullOrUndefined(this.colorPaletteInputs[0].ColorMappingType)||this.colorPaletteInputs[0].ColorMappingType!=="Data"?BoldBIDashboard.isNullOrUndefined(this.colorPaletteInputs)||BoldBIDashboard.isNullOrUndefined(this.colorPaletteInputs[0])||BoldBIDashboard.isNullOrUndefined(this.colorPaletteInputs[0].ColorMappingType)||this.colorPaletteInputs[0].ColorMappingType!=="Index"||(this.colorPaletteInputs.filter(function(t){return t.BasedOn.UniqueColumnName===n.UniqueColumnName})[0].IndexColorPalette=o,this.colorPaletteInputs.filter(function(t){return t.BasedOn.UniqueColumnName===n.UniqueColumnName})[0].DefaultColorSets=[]):(this.colorPaletteInputs.filter(function(t){return t.BasedOn.UniqueColumnName===n.UniqueColumnName})[0].DefaultColorSets=f,this.colorPaletteInputs.filter(function(t){return t.BasedOn.UniqueColumnName===n.UniqueColumnName})[0].IndexColorPalette=[]):this.colorPaletteInputs[0].DefaultColorSets=f,s=!BoldBIDashboard.isNullOrUndefined(this.colorPaletteInputs)&&!BoldBIDashboard.isNullOrUndefined(this.colorPaletteInputs[0])&&!BoldBIDashboard.isNullOrUndefined(this.colorPaletteInputs[0].ColorMappingType)&&this.colorPaletteInputs[0].ColorMappingType==="Data"?f:o,i=0;i<s.length;i++)this.generateCustomPalette(c,s[i],i);h=e.data("BoldBIDashboardScroller");e.css("box-sizing","border-box");BoldBIDashboard.isNullOrUndefined(h)?e.BoldBIDashboardScroller({height:this.formatType.length===1?"385px":"300px",scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,enableTouchScroll:!0,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize}):h.refresh();this.colorpaletteIndicator.hide();this.dashboardDesigner.modules.serialization.notifyChange()},n.prototype.getSolidColorInfo=function(n){for(var r=this.selectedSolidFieldInfo.uniqueColumnName,i=this.colorPaletteInputs.filter(function(n){return n.BasedOn.UniqueColumnName===r}).length>0?this.colorPaletteInputs.filter(function(n){return n.BasedOn.UniqueColumnName===r})[0].DefaultColorSets:this.colorPaletteInputs[0].DefaultColorSets,t=0;t<i.length;t++)if(i[t].Name.toString()===n.toString())return i[t];return null},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.AdvancedColorCustomization",InternalAdvancedColorCustomization,window),function(n){n[n.CircleSquare=0]="CircleSquare";n[n.Up=1]="Up";n[n.CircleSquareCut=2]="CircleSquareCut";n[n.Warning=3]="Warning";n[n.CircleTick=4]="CircleTick";n[n.Round=5]="Round";n[n.CircleThreeQuarter=6]="CircleThreeQuarter";n[n.Triangle=7]="Triangle";n[n.Tick=8]="Tick";n[n.CircleHalf=9]="CircleHalf";n[n.CircleQuarter=10]="CircleQuarter";n[n.Diamond=11]="Diamond";n[n.Down=12]="Down";n[n.RightDownArrow=13]="RightDownArrow";n[n.CircleExclamatory=14]="CircleExclamatory";n[n.RightTopArrow=15]="RightTopArrow";n[n.Close=16]="Close";n[n.Minus=17]="Minus";n[n.PointerUp=18]="PointerUp";n[n.PointerDown=19]="PointerDown";n[n.Right=20]="Right";n[n.CircleClose=21]="CircleClose";n[n.Flag=22]="Flag";n[n.Star=23]="Star";n[n.Polygon=24]="Polygon"}(ColorIconType||(ColorIconType={}));InternalRefreshDialog=function(){function n(n){this.dashboardDesigner=null;this.footerTag=null;this.refreshSetting=null;this.ejListBoxObj=null;this.locale=null;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.dashboardDesigner._id;this.widgetHelper=this.dashboardDesigner.modules.widgetHelper;this.dashboardDesigner.isDesignMode()&&this.renderContainer()}return n.prototype.addIcon=function(){var n=this.dashboardDesigner.isHelpLinkHidden()?"":"<a href='"+this.dashboardDesigner.getHelpDocLink("RefreshDashboard")+"' target='_blank' class ='bbi-dbrd-refresh-widget-interval-info-icon bbi-dbrd-designer-icon bbi-dbrd-designer-hoverable' data-tooltip ='"+this.locale.scrollableLayout.knowmore+"'><\/a>";this.refreshContainer.find(".bbi-dbrd-radio-btn-wrapper").children(".e-radio-wrapper").eq(1).append(n)},n.prototype.renderContainer=function(){var h=BoldBIDashboard.buildTag("div.bbi-dbrd-dyn-con-switch-wrap","",{},{id:this.id+"_auto_refresh_switch"}),o,s,at,r,vt,yt,pt,wt,bt;this.refreshContainer=BoldBIDashboard.buildTag("div.bbi-userselect","",{},{id:this.id+"_refresh_Container"});var n=BoldBIDashboard.buildTag("div.bbi-autorefresh-container bbi-autorefresh-disabled"),t=BoldBIDashboard.buildTag("div.bbi-refresh-container","",{width:"498px","max-height":"496px","padding-left":"20px","padding-right":"14px","padding-top":"7px","padding-bottom":"7px"},{id:this.id+"_containerDiv"}),kt="<b>"+this.locale.downloadUpload.schemaDsNoteText+"<\/b> "+this.locale.refreshWindow.refreshAlertContent,dt=BoldBIDashboard.buildTag("span.bbi-refresh-alert-content",kt,{},{id:this.id+"refresh_alert_text"}),u=BoldBIDashboard.buildTag("div","",{});t.append(dt).append(u);var c=BoldBIDashboard.buildTag("div","",{display:"flex","flex-direction":"row",gap:"8px"}),l=BoldBIDashboard.buildTag("div","",{display:"flex","flex-direction":"row",gap:"8px"}),a=BoldBIDashboard.buildTag("div","",{"padding-top":"5px","padding-bottom":"8px"}),v=BoldBIDashboard.buildTag("div","",{"padding-top":"5px","padding-bottom":"8px"}),y=BoldBIDashboard.buildTag("div","",{"padding-top":"5px","padding-bottom":"8px"}),p=BoldBIDashboard.buildTag("div.bbi-dbrd-filter-dlg-mode-btn-wrapper","",{},{id:this.id+"_filter_btn_wrapper"}),gt=BoldBIDashboard.buildTag("Label.bbi-designer-fontfamily",this.locale.refreshWindow.enbaleAutoRefresh,{"font-size":"13px","margin-left":"5px"},{"for":this.id+"_autoCheckBox",type:"label"});a.append(h);v.append(p);y.append(gt);c.append(y,a);l.append(v);u.append(c);n.append(l);t.append(u);var w=BoldBIDashboard.buildTag("div","",{}),b=BoldBIDashboard.buildTag("div","",{"padding-bottom":"8px",display:"flex","flex-direction":"row","padding-left":"32px"},{colspan:"2"}),i=BoldBIDashboard.buildTag("input.bbi-designer-inputPath e-numericcheckbox left-align","",{float:"left","margin-left":"31px",width:"98px",height:"24px",color:"var(--primary-text-normal-color)"},{id:this.id+"_timeCheckBox"}),ni=BoldBIDashboard.buildTag("Label.bbi-designer-fontfamily","HH:mm:ss",{"font-size":"13px",display:"flex","align-items":"center","padding-left":"10px"},{type:"label"}),ti=BoldBIDashboard.buildTag("span.bbi-designer-error-icon bbi-designer-errorinfo e-error-tip bbi-dbrd-designer-hoverable bbi-designer-commontime-error","",{},{id:this.id+"_refresh_error_info_icon","data-tooltip":this.locale.refreshWindow.commonTimeErrorMessage});b.append(i).append(ni).append(ti);w.append(b);n.append(w);t.append(n);var k=BoldBIDashboard.buildTag("div","",{display:"flex","flex-direction":"row",gap:"8px"}),d=BoldBIDashboard.buildTag("div","",{"padding-top":"5px","padding-bottom":"8px"}),g=BoldBIDashboard.buildTag("div","",{"padding-top":"5px","padding-bottom":"8px"}),nt=BoldBIDashboard.buildTag("input.bbi-designer-inputPath e-refreshcheckbox","",{},{id:this.id+"_refreshCheckBox"}),ii=BoldBIDashboard.buildTag("Label.bbi-designer-fontfamily",this.locale.refreshWindow.refreshWidget,{"font-size":"13px","margin-left":"5px"},{"for":this.id+"_refreshCheckBox",id:this.id+"_refreshLabel",type:"label"});d.append(nt);g.append(ii);k.append(d).append(g);n.append(k);t.append(n);var tt=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_listRow"}),it=BoldBIDashboard.buildTag("div","",{"padding-top":"5px","padding-bottom":"42px"},{colspan:"2"}),rt=BoldBIDashboard.buildTag("div.bbi-designer-inputPath","",{width:"100%",height:"140px",border:"1px unset"},{id:this.id+"_listBox"}),f=BoldBIDashboard.buildTag("ul","",{},{id:this.id+"_refresh_setting_list_Box"});rt.append(f);it.append(rt);tt.append(it);n.append(tt);t.append(n);var ut=BoldBIDashboard.buildTag("div","",{display:"flex","flex-direction":"row",gap:"8px"}),ft=BoldBIDashboard.buildTag("div","",{"padding-top":"24px","padding-bottom":"8px"}),et=BoldBIDashboard.buildTag("div","",{"padding-top":"24px","padding-bottom":"8px"}),ot=BoldBIDashboard.buildTag("input.bbi-designer-inputPath","",{},{id:this.id+"_insertCheckBox"}),ri=BoldBIDashboard.buildTag("Label.bbi-designer-fontfamily",this.locale.refreshWindow.rowInsertDelete,{"font-size":"13px","margin-left":"5px"},{"for":this.id+"_insertCheckBox",id:this.id+"_insertLabel",type:"label"});ft.append(ot);et.append(ri);ut.append(ft).append(et);n.append(ut);t.append(n);var st=BoldBIDashboard.buildTag("div","",{display:"flex","flex-direction":"row",gap:"8px"}),ht=BoldBIDashboard.buildTag("div","",{"padding-top":"5px","padding-bottom":"8px"}),e=BoldBIDashboard.buildTag("div","",{"padding-top":"5px","padding-bottom":"8px"}),ct=BoldBIDashboard.buildTag("input.e-reportdesigner-inputPath-loading","",{},{id:this.id+"_insertLoadingCheckBox"}),ui=BoldBIDashboard.buildTag("Label.bbi-designer-fontfamily",this.locale.refreshWindow.removeLoader,{"font-size":"13px","margin-left":"5px"},{"for":this.id+"_insertLoadingCheckBox",id:this.id+"_insertLoadingLabel",type:"label"}),lt=BoldBIDashboard.buildTag("div.e-dbrd-autorefresh-description bbi-dbrd-designer-hoverable","",{"padding-left":"5px","padding-top":"2px",cursor:"pointer",float:"right"},{"data-tooltip":this.locale.refreshWindow.removeLoaderDescription}),fi=BoldBIDashboard.buildTag("span.e-dbrd-autorefresh-notifyicon bbi-designer-notifyinfo","",{});lt.append(fi);e.append(lt);ht.append(ct);e.append(ui);st.append(ht,e);n.append(st);t.append(n);o=BoldBIDashboard.buildTag("button.bbi-dbrd-designer-hand-cursor bbi-dbrd-btn-primary",this.locale.dialogOptions.okButtonText,{float:"right",height:"28px","margin-right":"10px"},{id:this.id+"_apply_btn",type:"button"});s=BoldBIDashboard.buildTag("button.bbi-dbrd-designer-hand-cursor bbi-dbrd-btn-secondary",this.locale.dialogOptions.cancelButtonText,{float:"right",height:"28px"},{id:this.id+"_cancel_btn",type:"button"});this.refreshContainer.append(t);this.dashboardDesigner.element.append(this.refreshContainer);this.refreshContainer.BoldBIDashboardDialog({width:"auto",height:"auto",minWidth:498,minHeight:380,title:this.locale.refreshWindow.title,enableResize:!1,showOnInit:!1,showFooter:!0,containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,cssClass:"bbi-designer-ejdialog boldbi-dashboarddesigner",enableModal:!0,close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText});this.footerTag=this.dashboardDesigner.element.find("#"+this.id+"_refresh_Container_foot");this.footerTag.append(s).append(o);at={callBackInstance:this,callBackMethod:"autoRefreshCheck",checkState:!1,optionalArgs:this.id,name:"auto-refresh-switch",cssClass:"bbi-refresh-switch"};this.defaultSwitch=new BoldBIDashboard.Dashboard.SwitchButton(at,h);r=new Date;r.setHours(0,0,1);vt={cssClass:"bbi-dbrd-control bbi-common-timer bbi-dbrd-timer",format:"HH:mm:ss",min:r,value:r,width:"120px",showClearButton:!1,strictMode:!0,change:this.bbdesigner$.proxy(this.onTimePickerChange,this)};this.commonTimer=new ejdashboard.calendars.TimePicker(vt);this.commonTimer.appendTo("#"+i.attr("Id"));yt={size:"small",checked:!1,disabled:!0,change:this.bbdesigner$.proxy(this.listItemEnable,this)};this.refereshWidget=BoldBIDashboard.DashboardUtil.createCheckbox(yt,nt[0]);BoldBIDashboard.DashboardUtil.InjectCheckBoxInListBoxEJ2();pt={cssClass:"bbi-dashboarddesigner bbi-designer-param-assign bbi-refresh-listbox bbi-designer-border bbi-dbrd-control bbi-designer-box-shadow",height:"186px",dataSource:[],enabled:!1,itemTemplate:"<div class= 'bbi-refresh-container bbi-dbrd-designer-hoverable' data-tooltip = '${text}'>${text}<\/div>",selectionSettings:{showCheckbox:!0,mode:"Multiple"},change:this.bbdesigner$.proxy(this.listBoxSelection,this)};this.listBox=new ejdashboard.dropdowns.ListBox(pt);this.listBox.appendTo("#"+f.attr("Id"));this.ejListBoxObj=f.data("BoldBIDashboardListBox");wt={checked:!1,disabled:!0};this.rowInfo=BoldBIDashboard.DashboardUtil.createCheckbox(wt,ot[0]);bt={checked:!1,disabled:!0};this.loadingInfo=BoldBIDashboard.DashboardUtil.createCheckbox(bt,ct[0]);s.on("click",this.bbdesigner$.proxy(this.closeRefreshSetting,this));o.on("click",this.bbdesigner$.proxy(this.applyRefreshSetting,this));this.createRadioBtnSection(p);this.addIcon();i.off("keyup",this.bbdesigner$.proxy(this.genericInputValidation,this,i));i.on("keyup",this.bbdesigner$.proxy(this.genericInputValidation,this,i))},n.prototype.listBoxSelection=function(n){var t,f,r,i,e,u,o;BoldBIDashboard.isNullOrUndefined(n)||BoldBIDashboard.isNullOrUndefined(n.event.target)||(t=this.bbdesigner$(n.event.target),f=t.hasClass("bbi-refresh-list-timer")||t.parents(".bbi-refresh-list-timer").length>0,f?(r=this.bbdesigner$(t.parents(".e-list-item")[0]).attr("data-value"),i=[],i.push(r),BoldBIDashboard.isNullOrUndefined(n.value)||(this.isValueSelected(n.value,r)?this.listBox.selectItems(i,!1):this.listBox.selectItems(i,!0))):(e=this.refreshContainer.find("#"+this.id+"_auto_refresh_widget_rdo_input").prop("checked"),e&&(t.hasClass("e-list-item")===!1&&(u=t.parents(".e-list-item"),BoldBIDashboard.isNullOrUndefined(u)||(t=u)),!BoldBIDashboard.isNullOrUndefined(n.value)&&t.hasClass("e-list-item")&&this.displayRefreshListTimer(n,t))));o=n},n.prototype.displayRefreshListTimer=function(n,t){var f=[],r,i;for(f=this.refreshContainer.find(".e-list-item").toArray(),r=this.listBox.getDataByElems(this.listBox.getItems()),i=0;i<f.length;i++){var u=t.attr("data-value"),e=r[i].text,o=r[i].id;if(this.isValueSelected(n.value,u)&&e===u){t.find(".bbi-refresh-list-timer").removeClass("bbi-refresh-timer-hidden");this.onListTimePickerChange(o,n)}else e===u&&(t.find(".bbi-refresh-list-timer").addClass("bbi-refresh-timer-hidden"),this.refreshErrorIndicatorVisibility(!1,o))}},n.prototype.isValueSelected=function(n,t){return n.filter(function(n){return n==t}).length>0},n.prototype.createRadioBtnSection=function(n){var t=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_btn_grp"}),i;n.append(t);i={callBackInstance:this,callBackMethod:"updateRefreshType",groupName:"refresh",triggerOnCodeUpdate:!0,labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.id+"_auto_refresh_dashboard",label:this.locale.refreshWindow.commonTimeInterval,isChecked:!0,value:"default"},{id:this.id+"_auto_refresh_widget",label:this.locale.refreshWindow.differentTimeInterval,isChecked:!1,value:"custom"}]};this.radioBtn=new BoldBIDashboard.Dashboard.RadioButton(i,t)},n.prototype.updateRefreshType=function(n){var t,i;BoldBIDashboard.isNullOrUndefined(n.args)||BoldBIDashboard.isNullOrUndefined(n.args.name)||BoldBIDashboard.isNullOrUndefined(n.args.value)||n.args.name==="change"&&(n.args.value==="custom"?(this.isWidgetTimer=!0,this.commonTimer.enabled=!1,this.refereshWidget.disabled=!0,this.enableListBox(),this.enableTimerOnSwitch(),this.refreshErrorIndicatorVisibility(!1)):(this.isWidgetTimer=!1,this.commonTimer.enabled=!0,this.refreshContainer.find(".bbi-refresh-list-timer").addClass("bbi-refresh-timer-hidden"),this.refereshWidget.disabled=!1,t=this.refereshWidget.checked,t?this.enableListBox():this.disableListBox(),this.onTimePickerChange(),this.defaultErrorIndicatorVisibility()));i=n},n.prototype.errorIndicatorVisibility=function(n){for(var r=this.listBox.getSelectedItems(),u=this.listBox.getDataByElems(this.listBox.getItems()),t=0;t<r.length;t++){var f=this.bbdesigner$(r[t]),i=this.getItemIdFromText(u,f.attr("data-value")),e=this.dashboardDesigner.element.find("#"+this.id+"_refresh_list_timer_"+i).val();n&&e===""?this.refreshErrorIndicatorVisibility(!0,i):this.refreshErrorIndicatorVisibility(!1,i)}},n.prototype.defaultErrorIndicatorVisibility=function(){this.errorIndicatorVisibility(!1)},n.prototype.customErrorIndicatorVisibility=function(){this.errorIndicatorVisibility(!0)},n.prototype.enableTimerOnSwitch=function(){for(var t=this.listBox.getSelectedItems(),n=0;n<t.length;n++)this.bbdesigner$(t[n]).find(".bbi-refresh-list-timer").removeClass("bbi-refresh-timer-hidden"),this.customErrorIndicatorVisibility()},n.prototype.updateAutoRefreshSwitch=function(n){var t=this.getDynamicConnectionSwitch();BoldBIDashboard.isNullOrUndefined(t)||t.updateValueByName("auto-refresh-switch",n)},n.prototype.getDynamicConnectionSwitch=function(){return this.dashboardDesigner.element.find("#"+this.id+"_auto_refresh_switch").data("DesignerPropertyWidget")},n.prototype.openRefreshDialog=function(n,t){n.widgetCollection=BoldBIDashboard.isNullOrUndefined(n.widgetCollection)?[]:n.widgetCollection;this.refreshContainer.BoldBIDashboardDialog("open");this.resetUIElements();n.enableAutoRefresh||(n.interval="00:00:30");this.refreshSetting=n;this.callBackfn=t;this.populateRefreshInfo(this.refreshSetting);this.validateCheckedElement()},n.prototype.renderTimerInListBox=function(){var r=[],e,t,u,f,s;for(r=this.refreshContainer.find(".e-list-item").toArray(),e=this.listBox.getDataByElems(this.listBox.getItems()),t=0;t<r.length;t++){var o=this.bbdesigner$(r[t]),i=this.getItemIdFromText(e,o.attr("data-value")),n=BoldBIDashboard.buildTag("input.bbi-designer-inputPath e-numericcheckbox left-align","",{float:"right","margin-left":"31px",width:"98px",height:"24px"},{id:this.id+"_refresh_list_timer_"+i,widgetId:i}),h=BoldBIDashboard.buildTag("span.bbi-designer-error-icon bbi-designer-errorinfo e-error-tip bbi-dbrd-designer-hoverable bbi-designer-differedtime-error","",{},{id:this.id+"_refresh_error_info_icon_list_"+i,"data-tooltip":this.locale.refreshWindow.differentTimeErrorMessage});o.append(n).append(h);u=new Date;u.setHours(0,0,1);f=new Date;f.setHours(0,0,30);s=new ejdashboard.calendars.TimePicker({cssClass:"bbi-dbrd-control bbi-dbrd-timer bbi-refresh-list-timer bbi-refresh-timer-hidden",format:"HH:mm:ss",min:u,value:f,width:"120px",showClearButton:!1,strictMode:!0,change:this.bbdesigner$.proxy(this.onListTimePickerChange,this,i)});s.appendTo("#"+n.attr("Id"));n.off("keyup",this.bbdesigner$.proxy(this.genericInputValidation,this,n));n.on("keyup",this.bbdesigner$.proxy(this.genericInputValidation,this,n))}},n.prototype.genericInputValidation=function(n){if(!BoldBIDashboard.isNullOrUndefined(n.val())){var t=n.val(),i=/^[0-9:]*$/.test(t);i||n.val("")}},n.prototype.getItemIdFromText=function(n,t){for(var i=0;i<n.length;i++)if(n[i].text===t)return n[i].id},n.prototype.getItemTextFromText=function(n,t){for(var i=0;i<n.length;i++)if(n[i].id===t)return n[i].text},n.prototype.validateCheckedElement=function(){for(var t,i=this.listBox.dataSource,n=0;n<i.length;n++)for(t=0;t<this.refreshSetting.widgetCollection.length;t++)this.refreshSetting.widgetCollection[t].widgetID===i[n].widgetID&&this.ejListBoxObj.checkItemByIndex(n)},n.prototype.closeRefreshSetting=function(){this.refreshContainer.BoldBIDashboardDialog("close")},n.prototype.resetUIElements=function(){this.refreshSetting=null},n.prototype.applyRefreshSetting=function(){var u=this.getTime(this.commonTimer),i,t,r,n;if(!BoldBIDashboard.isNullOrUndefined(u)){for(i=this.listBox.getDataByElems(this.listBox.getSelectedItems()),t=0;t<i.length;t++)if(r={widgetID:i[t].id,widgetName:i[t].text},r.widgetInterval=this.getTimeForWidget(r.widgetID),BoldBIDashboard.isNullOrUndefined(r.widgetInterval))return;n=this.getRefreshValue();n&&n.__type&&delete n.__type;n!==null&&this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.notifypropertychange,{action:BoldBIDashboard.DashboardUtil.DesignerAction.NotifyPropertyChange,data:JSON.stringify({designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.refreshsettings,refreshJson:n})},{fnction:this.bbdesigner$.proxy(function(n){n.Status||console.info(n.Message)},this)});BoldBIDashboard.DashboardUtil.invokeCallBack(this.callBackfn,n);this.closeRefreshSetting()}},n.prototype.getRefreshValue=function(){var r=this.defaultSwitch.getState()==="on",u,f,t,n,i,e;if(r){for(this.refreshSetting.enableAutoRefresh=r,u=this.refereshWidget.checked,this.refreshSetting.isRefreshWidget=u,f=this.getTime(this.commonTimer),this.refreshSetting.interval=f,t=this.listBox.getDataByElems(this.listBox.getSelectedItems()),this.refreshSetting.widgetCollection=[],this.refreshSetting.isWidgetTimer=this.isWidgetTimer,n=0;n<t.length;n++)i={widgetID:t[n].id,widgetName:t[n].text},i.widgetInterval=this.getTimeForWidget(i.widgetID),this.refreshSetting.widgetCollection.push(i);return e=this.rowInfo.checked,this.refreshSetting.isRefreshRowCount=e,this.refreshSetting.removeLoader=Boolean(this.loadingInfo.checked),this.refreshSetting}return this.refreshSetting=this.dashboardDesigner.getDefaultRefershSetting()},n.prototype.getTimeForWidget=function(n){return this.getTime(this.getTimerComponent(n))},n.prototype.getTimerComponent=function(n){return ejdashboard.base.getComponent(this.refreshContainer.find("#"+this.id+"_refresh_list_timer_"+n)[0],"timepicker")},n.prototype.getTime=function(n){if(!BoldBIDashboard.isNullOrUndefined(n.value)){var t=n.value.getHours(),i=n.value.getMinutes(),r=n.value.getSeconds();return t+":"+i+":"+r}},n.prototype.getAllWidgets=function(){var n=[];return this.widgetHelper.getAllWidgets().forEach(function(t){t.Type==="Label"||BoldBIDashboard.Dashboard.WidgetHelper.isContainerWidget(t)||n.push(t)}),n},n.prototype.getWidgetCollection=function(){for(var t,i=[],r=this.getAllWidgets(),n=0;n<r.length;n++)t=r[n].getJson(),i.push({widgetName:t.ContainerSettings.Title,widgetID:t.UniqueName});return i},n.prototype.getWidgetCollectionData=function(){for(var t,i=[],r=this.getAllWidgets(),n=0;n<r.length;n++)t=r[n].getJson(),i.push({text:t.ContainerSettings.Title,id:t.UniqueName});return i},n.prototype.populateRefreshInfo=function(n){n.enableAutoRefresh&&(BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.cacheSettings)||!this.dashboardDesigner.cacheSettings.isCacheEnable)?(this.refreshContainer.find(".bbi-autorefresh-container").removeClass("bbi-autorefresh-disabled"),this.refreshContainer.find("#"+this.id+"refresh_alert_text").css("display","none"),this.enableAutoRefresh()):(this.refreshContainer.find(".bbi-autorefresh-container").addClass("bbi-autorefresh-disabled"),this.disableAutoRefresh());this.isWidgetTimer=n.isWidgetTimer;this.updateAutoRefreshSwitch(n.enableAutoRefresh);this.rowInfo.checked=n.isRefreshRowCount;this.updateWidgetList();this.updateListBox(n.widgetCollection,n.isWidgetTimer);this.updateDataToTimer(n.interval,this.commonTimer);this.refereshWidget.checked=n.isRefreshWidget;this.refereshWidget.checked||this.isWidgetTimer?this.enableListBox():this.disableListBox();this.loadingInfo.checked=n.removeLoader;n.isWidgetTimer?(this.refereshWidget.disabled=!0,this.radioBtn.updateItemByValue("default",!1),this.radioBtn.updateItemByValue("custom",!0)):(this.refereshWidget.disabled=!1,this.radioBtn.updateItemByValue("default",!0),this.radioBtn.updateItemByValue("custom",!1),this.refreshContainer.find(".bbi-refresh-list-timer").addClass("bbi-refresh-timer-hidden"))},n.prototype.updateListBox=function(n,t){for(var u,r=[],i=0;i<n.length;i++)r.push(this.getItemTextFromText(this.listBox.getDataByElems(this.listBox.getItems()),n[i].widgetID)),t&&(this.bbdesigner$(this.refreshContainer.find("#"+this.id+"_refresh_list_timer_"+n[i].widgetID).parents(".bbi-refresh-list-timer")).removeClass("bbi-refresh-timer-hidden"),u=this.getTimerComponent(n[i].widgetID),this.updateDataToTimer(n[i].widgetInterval,u));this.listBox.selectItems(r,!0)},n.prototype.updateDataToTimer=function(n,t){BoldBIDashboard.isNullOrUndefined(n)&&(n="00:00:30");var i=n.split(":"),u=Number(i[0]),f=Number(i[1]),e=Number(i[2]),r=new Date;r.setHours(u,f,e);t.value=r},n.prototype.updateWidgetList=function(){this.listBox.listData=[];this.listBox.refresh();this.listBox.addItem(this.getWidgetCollectionData());this.renderTimerInListBox()},n.prototype.autoRefreshCheck=function(n){if(n.args.checked){this.enableAutoRefresh();var t=this.refereshWidget.checked;t?this.enableListBox():this.disableListBox()}else this.disableAutoRefresh()},n.prototype.enableAutoRefresh=function(){var t,n;this.refreshContainer.find(".bbi-autorefresh-container").removeClass("bbi-autorefresh-disabled");this.refreshContainer.find("#"+this.id+"_insertLabel").css("opacity","1").removeAttr("disabled");this.refreshContainer.find("#"+this.id+"_refreshLabel").css("opacity","1").removeAttr("disabled");this.refereshWidget.disabled=!1;this.rowInfo.disabled=!1;t=this.refereshWidget.checked;t===!0&&(this.refreshContainer.find("#"+this.id+"_listBox").css("opacity","1").removeAttr("disabled"),n=this.refreshContainer.find("#"+this.id+"_refresh_setting_list_Box").data("BoldBIDashboardListBox"),BoldBIDashboard.isNullOrUndefined(n)||n.enable());this.refreshContainer.find("#"+this.id+"_insertLoadingLabel").css("opacity","1").removeAttr("disabled");this.loadingInfo.disabled=!1;this.refreshContainer.find(".bbi-dbrd-dyn-con-switch-wrap").removeClass("bbi-autorefresh-disabled");this.refreshContainer.find("#"+this.id+"refresh_alert_text").css("display","none")},n.prototype.disableAutoRefresh=function(){this.refreshContainer.find(".bbi-autorefresh-container").addClass("bbi-autorefresh-disabled");this.refereshWidget.disabled=!0;this.rowInfo.disabled=!0;this.refreshContainer.find("#"+this.id+"_insertLabel").css("opacity","0.5").attr("disabled","disabled");this.refreshContainer.find("#"+this.id+"_refreshLabel").css("opacity","0.5").attr("disabled","disabled");this.refreshContainer.find("#"+this.id+"_listBox").css("opacity","0.5").attr("disabled","disabled");this.disableListBox();this.loadingInfo.disabled=!0;this.refreshContainer.find("#"+this.id+"_insertLoadingLabel").css("opacity","0.5").attr("disabled","disabled");!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.cacheSettings)&&this.dashboardDesigner.cacheSettings.isCacheEnable?(this.refreshContainer.find(".bbi-dbrd-dyn-con-switch-wrap").addClass("bbi-autorefresh-disabled"),this.refreshContainer.find("#"+this.id+"refresh_alert_text").css("display","block")):(this.refreshContainer.find(".bbi-dbrd-dyn-con-switch-wrap").removeClass("bbi-autorefresh-disabled"),this.refreshContainer.find("#"+this.id+"refresh_alert_text").css("display","none"))},n.prototype.validateRefreshWidget=function(n){var t=this.refreshSetting;BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(t.widgetCollection)||(t.widgetCollection.filter(function(i,r){i.widgetName===n&&t.widgetCollection.splice(r,1)}),this.validateCheckedElement(),this.updateWidgetList(),this.updateListBox(t.widgetCollection,t.isWidgetTimer),this.applyRefreshSetting(null))},n.prototype.listItemEnable=function(n){n.checked?this.enableListBox():this.disableListBox()},n.prototype.enableListBox=function(){this.listBox.enabled=!0;this.refreshContainer.find("#"+this.id+"_listBox").css("opacity","1").removeAttr("disabled")},n.prototype.disableListBox=function(){this.listBox.enabled=!1;this.refreshContainer.find("#"+this.id+"_listBox").css("opacity","0.5").attr("disabled","disabled")},n.prototype.onTimePickerChange=function(){var n=this.dashboardDesigner.element.find("#"+this.id+"_timeCheckBox").val();n===""?this.refreshErrorIndicatorVisibility(!0):this.refreshErrorIndicatorVisibility(!1)},n.prototype.onListTimePickerChange=function(n){var t=n,i=this.dashboardDesigner.element.find("#"+this.id+"_refresh_list_timer_"+n).val();i===""?this.refreshErrorIndicatorVisibility(!0,t):this.refreshErrorIndicatorVisibility(!1,t)},n.prototype.refreshErrorIndicatorVisibility=function(n,t){var i;i=t?this.dashboardDesigner.element.find("#"+this.id+"_refresh_error_info_icon_list_"+t):this.dashboardDesigner.element.find("#"+this.id+"_refresh_error_info_icon");n?i.css("display","block"):i.css("display","none")},n.prototype.updateRefreshSetting=function(n){this.dashboardDesigner.refreshSetting=n},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.RefreshDialog",InternalRefreshDialog,window);InternalSortDialog=function(){function n(n){this.dashboardDesigner=null;this.dialogContainer=null;this.sortContainer=null;this.fieldContainer=null;this.sortOrderContainer=null;this.manualContainer=null;this.targetMethod="";this.menuItem=null;this.customSorting=null;this.datasetFields=[];this.measuresList=[];this.dimensionsList=[];this.measureFormats=[];this.dimensionFormats=[];this.listBoxField="text";this.sortType=CustomSortType[CustomSortType.Alphabetic];this.sortOrder=SortingOrder[SortingOrder.Ascending];this.fieldCell=null;this.locale=null;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.dashboardDesigner._id;this.renderSortDialog();this.dimensionFormats=this.getSummaryTypeArrayforDimension();this.measureFormats=this.getmeasureFormatsList()}return n.prototype.getmeasureFormatsList=function(){var n=this.dashboardDesigner.modules.util;return[{value:SummaryType.SUM,text:n.getSummaryTypeLocalizedText(SummaryType.SUM)},{value:SummaryType.AVG,text:n.getSummaryTypeLocalizedText(SummaryType.AVG)},{value:SummaryType.COUNT,text:n.getSummaryTypeLocalizedText(SummaryType.COUNT)},{value:SummaryType.MAX,text:n.getSummaryTypeLocalizedText(SummaryType.MAX)},{value:SummaryType.MIN,text:n.getSummaryTypeLocalizedText(SummaryType.MIN)},{value:SummaryType.COUNTD,text:n.getSummaryTypeLocalizedText(SummaryType.COUNTD)},{value:SummaryType.VAR,text:n.getSummaryTypeLocalizedText(SummaryType.VAR)}]},n.prototype.getSummaryTypeArrayforDimension=function(){var n=this.dashboardDesigner.modules.util;return[{value:SummaryType.COUNT,text:n.getSummaryTypeLocalizedText(SummaryType.COUNT)},{value:SummaryType.COUNTD,text:n.getSummaryTypeLocalizedText(SummaryType.COUNTD)}]},n.prototype.renderSortDialog=function(){this.dialogContainer=BoldBIDashboard.buildTag("div.bbi-dashboard-designer-configuration bbi-userselect","",{height:"auto"},{title:"Advanced Sorting Options",id:this.id+"_sort_dialog"});this.dashboardDesigner.element.append(this.dialogContainer);this.sortContainer=this.getSortContainer();this.fieldContainer=this.getFieldContainer();this.sortOrderContainer=this.getSortOrderContainer();this.manualContainer=this.getManualContainer();this.dialogContainer.append(this.sortContainer,this.fieldContainer,this.sortOrderContainer,this.manualContainer);this.dialogContainer.BoldBIDashboardDialog({width:"auto",height:"auto",minWidth:600,minHeight:333,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,cssClass:"bbi-designer-dialog boldbi-dashboarddesigner",close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText});this.renderFooter();this.getColumnField().BoldBIDashboardDropDownList({width:"100%",fields:{text:"text",value:"value"},enabled:!0,showRoundedCorner:!0,watermarkText:"Choose Field",cssClass:"bbi-designer-param-assign bbi-designer-border bbi-designer-ejwidgets bbi-dbrd-control",change:this.bbdesigner$.proxy(this.updateColumnField,this)});this.getSummaryField().BoldBIDashboardDropDownList({width:"100%",fields:{text:"text",value:"value"},enabled:!0,showRoundedCorner:!0,watermarkText:"Choose Field",cssClass:"bbi-designer-param-assign bbi-designer-border bbi-designer-ejwidgets bbi-dbrd-control"});this.getListBox().BoldBIDashboardListBox({dataSource:[{text:""}],fields:{value:this.listBoxField},width:"100%",height:"100%",allowDrag:!0,allowDrop:!0,itemDragStart:this.bbdesigner$.proxy(this.listItemDragStart,this),create:this.bbdesigner$.proxy(this.createScrollBar,this),cssClass:"bbi-dbrd-control"});this.getListBoxDiv().BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup bbi-designer-loader",template:this.dashboardDesigner.getWaitingPopupTemplate()})},n.prototype.renderFooter=function(){var i=this.dashboardDesigner.element.find("#"+this.id+"_sort_dialog_foot"),n=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-secondary bbi-dbrd-btn-small bbi-dbrd-margin-left",this.locale.dialogOptions.cancelButtonText,{float:"right"},{id:this.id+"_sort_dialog_btn_cancel",type:"button"}),t=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-small",this.locale.dialogOptions.applyButtonText,{float:"right"},{id:this.id+"_sort_dialog_btn_ok",type:"button"});i.append(n,t);t.on("click",this.bbdesigner$.proxy(this.updateSortInfo,this));n.on("click",this.bbdesigner$.proxy(this.closeDialog,this,!0))},n.prototype.getSortContainer=function(){var n=BoldBIDashboard.buildTag("div","",{padding:"5px 0px"},{}),f=BoldBIDashboard.buildTag("label","Sort By",{},{type:"label"}),t=BoldBIDashboard.buildTag("div","",{},{}),i=BoldBIDashboard.buildTag("tr","",{},{}),r=BoldBIDashboard.buildTag("td","",{padding:"5px 0px"},{}),u=BoldBIDashboard.buildTag("td","",{padding:"5px 0px"},{});this.fieldCell=BoldBIDashboard.buildTag("td","",{padding:"5px 25px"},{});var h=BoldBIDashboard.buildTag("td","",{width:"25%",padding:"5px 0px"},{}),e={callBackInstance:this,callBackMethod:"updateSortType",groupName:"sortby",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.id+"_sort_dialog_alphabetic",label:"Alphabetic",isChecked:!0,value:"alphabetic"}]},o={callBackInstance:this,callBackMethod:"updateSortType",groupName:"sortby",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.id+"_sort_dialog_dataSource",label:"Data Source Order",isChecked:!1,value:"datasource"}]},s={callBackInstance:this,callBackMethod:"updateSortType",groupName:"sortby",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.id+"_sort_dialog_field",label:"Field",isChecked:!1,value:"field"}]};return this.sortbyAlpha=new BoldBIDashboard.Dashboard.RadioButton(e,r),this.sortbyDatasource=new BoldBIDashboard.Dashboard.RadioButton(o,u),this.sortbyField=new BoldBIDashboard.Dashboard.RadioButton(s,this.fieldCell),i.append(r,u,this.fieldCell),t.append(i),n.append(f).append(t),n},n.prototype.getFieldContainer=function(){var n=BoldBIDashboard.buildTag("div","",{padding:"5px 0px 10px",display:"none"},{}),t=BoldBIDashboard.buildTag("table","",{width:"100%"},{}),i=BoldBIDashboard.buildTag("tr","",{},{}),r=BoldBIDashboard.buildTag("td","",{padding:"5px 0px",width:"250px"},{}),u=BoldBIDashboard.buildTag("td","",{padding:"5px 10px",width:"150px"},{}),f=BoldBIDashboard.buildTag("td","",{padding:"5px 0px"},{}),e=BoldBIDashboard.buildTag("input.e-field e-ejinputtext","",{},{type:"text",id:this.id+"_sort_dialog_column"}),o=BoldBIDashboard.buildTag("input.e-field e-ejinputtext","",{},{type:"text",id:this.id+"_sort_dialog_summary"});return r.append(e),u.append(o),i.append(r).append(u).append(f),t.append(i),n.append(t),n},n.prototype.getSortOrderContainer=function(){var n=BoldBIDashboard.buildTag("div","",{padding:"5px 0px"},{}),f=BoldBIDashboard.buildTag("label","Sort Order",{},{type:"label"}),t=BoldBIDashboard.buildTag("table","",{width:"100%"},{}),i=BoldBIDashboard.buildTag("tr","",{},{}),r=BoldBIDashboard.buildTag("td","",{padding:"5px 0px",width:"25%"},{}),u=BoldBIDashboard.buildTag("td","",{padding:"5px 0px"},{}),e={callBackInstance:this,callBackMethod:"updateSortOrder",groupName:"sortOrder",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.id+"_sort_dialog_ascending",label:"Ascending",isChecked:!0,value:"ascending"}]},o={callBackInstance:this,callBackMethod:"updateSortOrder",groupName:"sortOrder",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.id+"_sort_dialog_descending",label:"Descending",value:"descending"}]};return this.sortOrderAscending=new BoldBIDashboard.Dashboard.RadioButton(e,r),this.sortOrderDescending=new BoldBIDashboard.Dashboard.RadioButton(o,u),t.append(i),i.append(r,u),n.append(f,t),n},n.prototype.getManualContainer=function(){var n=BoldBIDashboard.buildTag("div","",{padding:"5px 0px",height:"262px",display:"none"},{}),i=BoldBIDashboard.buildTag("label","Drag and drop to re-arrange the below values in desired order.",{},{type:"label"}),t=BoldBIDashboard.buildTag("div","",{height:"250px",padding:"5px 0px 0px","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.id+"_sort_dialog_listbox_Div"}),r=BoldBIDashboard.buildTag("ul","",{},{id:this.id+"_sort_dialog_listbox"});return t.append(r),n.append(i).append(t),n},n.prototype.listItemDragStart=function(){this.bbdesigner$(".e-draggable.e-droppable.dragClone.e-dragClonelist").css("z-index",BoldBIDashboard.getMaxZindex())},n.prototype.createScrollBar=function(){this.bbdesigner$(this.getListBox().BoldBIDashboardListBox("instance").listContainer).BoldBIDashboardScroller({enableTouchScroll:!1,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize,scrollSize:this.dashboardDesigner.scrollerSize.scrollSize,cssClass:"bbi-dbrd-designer-scroller bbi-dbrd-control"})},n.prototype.updateColumnField=function(n){var i=this.getItemType(n.text),r=i==="Dimensions"?this.dimensionFormats:this.measureFormats,t=this.getSummaryField().data("BoldBIDashboardDropDownList");t.setModel({dataSource:r});t.selectItemByIndex(0)},n.prototype.updateSortType=function(n){var i=!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.args)&&!BoldBIDashboard.isNullOrUndefined(n.args.value)?n.args.value:n,t;switch(i.toLowerCase()){case"alphabetic":this.fieldContainer.css("display","none");this.sortOrderContainer.css("display","block");this.manualContainer.css("display","none");this.enableSortOrder(!0);this.sortType=CustomSortType[CustomSortType.Alphabetic];break;case"datasource":this.fieldContainer.css("display","none");this.sortOrderContainer.css("display","block");this.manualContainer.css("display","none");this.enableSortOrder(!1);this.sortType=CustomSortType[CustomSortType.DataSource];break;case"field":this.fieldContainer.css("display","block");this.sortOrderContainer.css("display","block");this.manualContainer.css("display","none");this.enableSortOrder(!0);this.sortType=CustomSortType[CustomSortType.Field];break;case"manual":this.fieldContainer.css("display","none");this.sortOrderContainer.css("display","none");this.manualContainer.css("display","block");this.sortType=CustomSortType[CustomSortType.Manual];t=this.getListBoxDiv().attr("data-isLoaded");BoldBIDashboard.isNullOrUndefined(t)&&this.getListBoxDatas()}},n.prototype.getListBoxDatas=function(){var n=[{Id:this.dataInfo.Id,Name:this.dataInfo.Name,SummaryType:this.dataInfo.SummaryType,FieldType:this.dataInfo.FieldType,MeasureFormatting:this.dataInfo.MeasureFormatting,DateTimeFormat:this.dataInfo.DateTimeFormat,FilterInfo:this.dataInfo.FilterInfo,UniqueColumnName:this.dataInfo.UniqueColumnName,CustomSorting:this.dataInfo.CustomSorting}];this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.getData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.FilterAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.getData,fieldInfo:n,dataSetId:this.dataInfo.DatasourceID,isQueryDesignerMode:this.dashboardDesigner.isQueryDesignerMode})},{fnction:this.bbdesigner$.proxy(this.setListBoxValues,this,this.dataInfo.UniqueColumnName),indicator:[this.bbdesigner$.proxy(this.showLoadingIndicator,this),this.bbdesigner$.proxy(this.hideLoadingIndicator,this)]})},n.prototype.setListBoxValues=function(n,t){var i=JSON.parse(t.jsonData);!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0&&(this.listBoxField=n,this.getListBox().data("BoldBIDashboardListBox").setModel({dataSource:i,fields:{value:this.listBoxField}}),this.getListBoxDiv().attr("data-isLoaded","true"))},n.prototype.showLoadingIndicator=function(){this.getListBoxDiv().BoldBIDashboardWaitingPopup("show")},n.prototype.hideLoadingIndicator=function(){this.getListBoxDiv().BoldBIDashboardWaitingPopup("hide")},n.prototype.updateSortOrder=function(n){switch(n.args.value){case"ascending":this.sortOrder=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,SortingOrder.Ascending);break;case"descending":this.sortOrder=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,SortingOrder.Descending)}},n.prototype.enableSortOrder=function(n){var t=this.getAscendingRadioButton(),i=this.getDescendingRadioButton();n?(t.prop("disabled",!1),i.prop("disabled",!1),this.sortOrderContainer.removeClass("e-radio-btn-disabled")):(t.prop("disabled",!0),i.prop("disabled",!0),this.sortOrderContainer.addClass("e-radio-btn-disabled"))},n.prototype.openSortDialog=function(n,t,i,r){this.resetSortDialog();this.targetInstance=n;this.targetMethod=t;this.dataInfo=i;this.menuItem=r;this.dialogContainer.data("BoldBIDashboardDialog").open();BoldBIDashboard.isNullOrUndefined(i)||(this.dataInfo.FieldType===FieldType.Measures?(this.getFieldRadioButton().prop("disabled",!0),this.fieldCell.addClass("e-radio-btn-disabled"),this.sortOrderContainer.find("#"+this.id+"_sort_dialog_ascending_rdo_input").prop("label","Value")):(this.getFieldRadioButton().prop("disabled",!1),this.fieldCell.removeClass("e-radio-btn-disabled"),this.sortOrderContainer.find("#"+this.id+"_sort_dialog_ascending_rdo_input").prop("label","Alphabetic")),this.customSorting=BoldBIDashboard.isNullOrUndefined(i.ChildHierarchicalFields)||BoldBIDashboard.isNullOrUndefined(i.ChildHierarchicalFields[0].CustomSorting)?BoldBIDashboard.isNullOrUndefined(i.ChildHierarchicalFields)||BoldBIDashboard.isNullOrUndefined(i.ChildHierarchicalFields[0].CustomSorting)?i.CustomSorting:i.ChildHierarchicalFields[0].CustomSorting:i.ChildHierarchicalFields[0].CustomSorting,this.populateSortInformation())},n.prototype.resetSortDialog=function(){this.customSorting=null;this.targetInstance=null;this.targetMethod=null;this.dataInfo=null;this.datasetFields=[];this.measuresList=[];this.dimensionsList=[]},n.prototype.populateSortInformation=function(){this.updateDatasetFields();this.dataInfo.IsCustomSortApplied||(this.customSorting.CustomSortType===""&&(this.customSorting.CustomSortType=CustomSortType[CustomSortType.Alphabetic]),this.customSorting.CustomSortOrder===""&&(this.customSorting.CustomSortOrder=SortingOrder[SortingOrder.Ascending]));switch(this.customSorting.CustomSortType){case CustomSortType[CustomSortType.Alphabetic]:this.getAlphabeticRadioButton().prop("checked",!0);this.updateSortType(this.customSorting.CustomSortType);break;case CustomSortType[CustomSortType.DataSource]:this.getDataSourceRadioButton().prop("checked",!0);this.updateSortType(this.customSorting.CustomSortType);break;case CustomSortType[CustomSortType.Field]:this.getFieldRadioButton().prop("checked",!0);this.updateSortType(this.customSorting.CustomSortType);break;case CustomSortType[CustomSortType.Manual]:this.getManualRadioButton().data("BoldBIDashboardRadioButton").setModel({checked:!0})}switch(this.customSorting.CustomSortOrder){case SortingOrder[SortingOrder.Ascending]:this.getAscendingRadioButton().prop("checked",!0);break;case SortingOrder[SortingOrder.Descending]:this.getDescendingRadioButton().prop("checked",!0)}this.populateFieldInfo()},n.prototype.populateFieldInfo=function(){var n=this.getColumnField().data("BoldBIDashboardDropDownList"),t=this.getSummaryField().data("BoldBIDashboardDropDownList"),i,r;n.setModel({dataSource:this.datasetFields});BoldBIDashboard.isNullOrUndefined(this.customSorting.FieldId)||this.customSorting.FieldId===""?n.selectItemByIndex(0):n.selectItemByValue(this.customSorting.FieldId);i=!BoldBIDashboard.isNullOrUndefined(this.customSorting.FieldName)&&this.customSorting.FieldName!==""?this.getItemType(this.customSorting.FieldName):this.getItemType(n.selectedTextValue.toString());r=i==="Dimensions"?this.dimensionFormats:this.measureFormats;t.setModel({dataSource:r});BoldBIDashboard.isNullOrUndefined(this.customSorting.SummaryType)?t.selectItemByIndex(0):t.selectItemByValue(this.customSorting.SummaryType)},n.prototype.updateDatasetFields=function(){var f=BoldBIDashboard.Dashboard.ConnectionHelper.getConnectionInsFromDSId(this.dashboardDesigner,this.dataInfo.DatasourceID),r=BoldBIDashboard.Dashboard.ConnectionHelper.isHierarchicalConnection(f),u,t,n,i;for(this.getSummaryField().data("BoldBIDashboardDropDownList").setModel({enabled:!r}),u=this.dashboardDesigner.modules.dataSet.datasets,t=BoldBIDashboard.DashboardUtil.getCurrentField(u,this.dataInfo.DatasourceID,r),n=0;n<t.length;n++)this.datasetFields.push({text:t[n].Name,value:t[n].Id}),i=BoldBIDashboard.DashboardUtil.getDatasetTypeIcon(t[n].TypeName),i==="bbi-designer-dataset-number"?this.measuresList.push({Name:t[n].Name,DatasetIcon:i,DataField:t[n].Id}):this.dimensionsList.push({Name:t[n].Name,DatasetIcon:i,DataField:t[n].Id})},n.prototype.getItemType=function(n){for(var i="",t=0;t<this.measuresList.length;t++)this.measuresList[t].Name===n&&(i="Measures");for(t=0;t<this.dimensionsList.length;t++)this.dimensionsList[t].Name===n&&(i="Dimensions");return i},n.prototype.updateSortInfo=function(){var i,t,n;if(!BoldBIDashboard.isNullOrUndefined(this.targetInstance)){if(i=this.getSummaryField().data("BoldBIDashboardDropDownList").model.value,t=this.getColumnField().data("BoldBIDashboardDropDownList"),this.customSorting={FieldId:t.getSelectedValue(),FieldName:this.bbdesigner$(t.getSelectedItem()).text(),SummaryType:BoldBIDashboard.DashboardDesignerUtility.Serialization.getSummaryType(i.toUpperCase()),ManualOrderList:this.getManulOrderList(),CustomSortOrder:this.sortOrder,CustomSortType:this.sortType},BoldBIDashboard.isNullOrUndefined(this.dataInfo.ChildHierarchicalFields))this.applySorting(this.dataInfo);else for(n=0;n<this.dataInfo.ChildHierarchicalFields.length;n++)this.applySorting(this.dataInfo.ChildHierarchicalFields[n]);this.getListBoxDiv().removeAttr("data-isLoaded")}this.closeDialog()},n.prototype.applySorting=function(n){n.IsCustomSortApplied=!0;n.Sorting=BoldBIDashboard.DashboardDesignerUtility.Serialization.stringtoEnum(SortingOrder,this.customSorting.CustomSortOrder);n.CustomSorting=this.customSorting;BoldBIDashboard.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.customSorting,n,this.menuItem])},n.prototype.getManulOrderList=function(){for(var t=[],i=this.getListBox().data("BoldBIDashboardListBox").getListData(),n=0;n<i.length;n++)t.push(i[n][this.listBoxField]);return t},n.prototype.closeDialog=function(){this.getListBoxDiv().removeAttr("data-isLoaded");this.dialogContainer.data("BoldBIDashboardDialog").close()},n.prototype.getAscendingRadioButton=function(){return this.sortOrderContainer.find("#"+this.id+"_sort_dialog_ascending_rdo_input")},n.prototype.getDescendingRadioButton=function(){return this.sortOrderContainer.find("#"+this.id+"_sort_dialog_descending_rdo_input")},n.prototype.getAlphabeticRadioButton=function(){return this.sortContainer.find("#"+this.id+"_sort_dialog_alphabetic_rdo_input")},n.prototype.getDataSourceRadioButton=function(){return this.sortContainer.find("#"+this.id+"_sort_dialog_dataSource_rdo_input")},n.prototype.getFieldRadioButton=function(){return this.sortContainer.find("#"+this.id+"_sort_dialog_field_rdo_input")},n.prototype.getManualRadioButton=function(){return this.sortContainer.find("#"+this.id+"_sort_dialog_manual")},n.prototype.getColumnField=function(){return this.fieldContainer.find("#"+this.id+"_sort_dialog_column")},n.prototype.getSummaryField=function(){return this.fieldContainer.find("#"+this.id+"_sort_dialog_summary")},n.prototype.getListBox=function(){return this.manualContainer.find("#"+this.id+"_sort_dialog_listbox")},n.prototype.getListBoxDiv=function(){return this.manualContainer.find("#"+this.id+"_sort_dialog_listbox_Div")},n.prototype.destroy=function(){BoldBIDashboard.DashboardUtil.destroyEjObjects(this.dialogContainer);this.dialogContainer.length>0&&this.dashboardDesigner.element.find("#"+this.id+"_sort_dialog").remove()},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.SortDialog",InternalSortDialog,window),function(n){n[n.Alphabetic="Alphabetic"]="Alphabetic";n[n.DataSource="DataSource"]="DataSource";n[n.Field="Field"]="Field";n[n.Manual="Manual"]="Manual";n[n.None="None"]="None"}(CustomSortType||(CustomSortType={}));
