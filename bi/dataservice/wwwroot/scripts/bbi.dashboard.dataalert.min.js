/*!
*  filename: bbi.dashboard.dataalert.min.js
*  version : 6.11.10
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
var InternalDataAlertPanel=function(){function n(n){this.designerInstance=null;this.conditionNumbers=[];this.measureCollection=[];this.columnCollection=[];this.dimensionCollection=[];this.serverExpressions=[];this.scrollerSize={scrollSize:5,buttonSize:0};this.initialUI=new DataAlertArgs;this.localizationContent=null;this.customExpressionInstance=null;this.designerInstance=n;this.bbdesigner$=this.designerInstance.bbdesigner$;this.localizationContent=this.designerInstance.getLocalizationContent()}return n.prototype.renderDialogElements=function(n,t){BoldBIDashboard.isNullOrUndefined(t)||t===""?this.renderUIElements(n,t):this.getDataAlertAgrsModel(n,t)},n.prototype.renderUIElements=function(n){n.find("#"+this.designerInstance._id+"_designerDataAlert").length>0&&n.find("#"+this.designerInstance._id+"_designerDataAlert").remove();var t=BoldBIDashboard.buildTag("div.bbi-designer-data-alert boldbi-dashboarddesigner","",{},{id:this.designerInstance._id+"_designerDataAlert"});n.append(t);this.element=t;this.id=n.attr("id")+"_data_alert";this.daConditionalResult=this.bbdesigner$.extend(!0,{},new DaConditionalResult);this.dashboardWritePermission=BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.canEditDashboard)?!1:this.designerInstance.model.canEditDashboard;this.dateRangePopup=this.designerInstance.modules.dateRangePopup;this.multiSelectionComboBox=new BoldBIDashboard.DashboardDesignerUtility.MultiSelectionComboBox(this.designerInstance);this.renderContentDialog();this.resizeDataAlertPanel();this.unWireEvents();this.wireEvents();this.designerInstance._trigger("actionComplete",{eventType:"renderDataAlert"})},n.prototype.getDataAlertAgrsModel=function(n,t){this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.updatedataalertmodel,{action:BoldBIDashboard.DashboardUtil.DesignerAction.DataAlertModel,data:t},{fnction:this.bbdesigner$.proxy(this.updateDataAlertAgrsModel,this,n,t)},!0,!0)},n.prototype.updateDataAlertAgrsModel=function(n,t,i){var r=JSON.parse(t);r=this.getDataAlertModel(i.Data,r);this.updateUI(r);this.renderUIElements(n,t)},n.prototype.updateUI=function(n){BoldBIDashboard.isNullOrUndefined(n)||(this.initialUI={widgetId:n.widgetId,category:n.category,daConditionalResult:n.daConditionalResult,datasourceId:n.datasourceId,daExpressionCollection:n.daExpressionCollection},this.serverExpressions=this.initialUI.daExpressionCollection)},n.prototype.resizeDataAlertPanel=function(){var n=(this.bbdesigner$(window).width()-this.element.width())/2;this.element.css("left",n+"px")},n.prototype.wireEvents=function(){this.dialogDiv.on("click",".bbi-color-custom-add-condition-wrapper",this.bbdesigner$.proxy(this.addCondition,this));this.dialogDiv.on("click",".bbi-color-dimension-where-condition",this.bbdesigner$.proxy(this.addWhereCondition,this));this.dialogDiv.on("click",".bbi-data-alert-condition-row .bbi-data-dimension-condition-content .bbi-data-alert-dimension-add",this.bbdesigner$.proxy(this.addWhereAgainCondition,this));this.dialogDiv.on("click",".bbi-data-alert-condition-row .bbi-data-dimension-condition-content .bbi-data-alert-dimension-remove",this.bbdesigner$.proxy(this.removedimensionWhereCondition,this));this.dialogDiv.on("click",".bbi-color-global-where-condition",this.bbdesigner$.proxy(this.addGlobalWhereCondition,this));this.dialogDiv.on("click",".bbi-custom-color-conditional-footer .bbi-data-add-global-conditions-parent .bbi-data-global-condition-content .bbi-data-alert-global-add",this.bbdesigner$.proxy(this.addGlobalWhereAgainCondition,this));this.dialogDiv.on("click",".bbi-custom-color-conditional-footer .bbi-data-add-global-conditions-parent .bbi-data-global-condition-content .bbi-data-alert-global-remove",this.bbdesigner$.proxy(this.removeGlobaldimensionWhereCondition,this));this.dialogDiv.on("click",".bbi-data-alert-measure-add-button",this.bbdesigner$.proxy(this.addComparisionDiv,this));this.dialogDiv.on("click",".bbi-data-alert-right-measure-condition .bbi-measure-condition-remove",this.bbdesigner$.proxy(this.removeComparisionDiv,this));this.dialogDiv.on("click",".bbi-data-alert-condition-row .bbi-data-alert-filter-div .bbi-data-alert-filter-remove",this.bbdesigner$.proxy(this.removeFilter,this));this.bbdesigner$(window).on("resize",this.bbdesigner$.proxy(this.resizeDataAlertPanel,this))},n.prototype.unWireEvents=function(){this.dialogDiv.off("click",".bbi-color-custom-add-condition-wrapper",this.bbdesigner$.proxy(this.addCondition,this));this.dialogDiv.off("click",".bbi-color-dimension-where-condition",this.bbdesigner$.proxy(this.addWhereCondition,this));this.dialogDiv.off("click",".bbi-data-alert-condition-row .bbi-data-dimension-condition-content .bbi-data-alert-dimension-add",this.bbdesigner$.proxy(this.addWhereAgainCondition,this));this.dialogDiv.off("click",".bbi-data-alert-condition-row .bbi-data-dimension-condition-content .bbi-data-alert-dimension-remove",this.bbdesigner$.proxy(this.removedimensionWhereCondition,this));this.dialogDiv.off("click",".bbi-color-global-where-condition",this.bbdesigner$.proxy(this.addGlobalWhereCondition,this));this.dialogDiv.off("click",".bbi-custom-color-conditional-footer .bbi-data-add-global-conditions-parent .bbi-data-global-condition-content .bbi-data-alert-global-add",this.bbdesigner$.proxy(this.addGlobalWhereAgainCondition,this));this.dialogDiv.off("click",".bbi-custom-color-conditional-footer .bbi-data-add-global-conditions-parent .bbi-data-global-condition-content .bbi-data-alert-global-remove",this.bbdesigner$.proxy(this.removeGlobaldimensionWhereCondition,this));this.dialogDiv.off("click",".bbi-data-alert-measure-add-button",this.bbdesigner$.proxy(this.addComparisionDiv,this));this.dialogDiv.off("click",".bbi-data-alert-right-measure-condition .bbi-measure-condition-remove",this.bbdesigner$.proxy(this.removeComparisionDiv,this));this.dialogDiv.off("click",".bbi-data-alert-condition-row .bbi-data-alert-filter-div .bbi-data-alert-filter-remove",this.bbdesigner$.proxy(this.removeFilter,this));this.bbdesigner$(window).off("resize",this.bbdesigner$.proxy(this.resizeDataAlertPanel,this))},n.prototype.addWhereCondition=function(n){var t=parseInt(this.bbdesigner$(n.currentTarget).parents(".bbi-data-alert-condition-row").attr("data-condition-num"),10),i=this.bbdesigner$(n.currentTarget).parents(".bbi-data-alert-condition-row").find(".bbi-data-dimension-condition-content").length;this.renderDimensionConditionDiv(t,null,i);this.bbdesigner$(n.currentTarget).parents(".bbi-data-add-dimension-where").css("display","none");this.refreshScroller()},n.prototype.addWhereAgainCondition=function(n){var t=parseInt(this.bbdesigner$(n.currentTarget).parents(".bbi-data-alert-condition-row").attr("data-condition-num"),10),i=this.bbdesigner$(n.currentTarget).parents(".bbi-data-alert-condition-row").find(".bbi-data-dimension-condition-content").length;this.renderDimensionConditionDiv(t,null,i);this.refreshScroller()},n.prototype.removedimensionWhereCondition=function(n){var t=this.bbdesigner$(n.currentTarget).parents(".bbi-data-alert-condition-row");t.find(".bbi-data-dimension-condition-content").length===1&&t.find(".bbi-data-add-dimension-where").css("display","block");this.bbdesigner$(n.currentTarget).parent(".bbi-data-dimension-condition-content").remove();this.refreshScroller()},n.prototype.addGlobalWhereCondition=function(n){var t=this.bbdesigner$(n.currentTarget).parents(".bbi-custom-color-conditional-footer").find(".bbi-data-global-condition-content").length;this.renderGlobalConditionDiv(null,t);this.bbdesigner$(n.currentTarget).css("display","none");this.refreshScroller()},n.prototype.removeGlobaldimensionWhereCondition=function(n){var i=this.bbdesigner$(n.currentTarget).parents(".bbi-custom-color-conditional-footer").find(".bbi-data-global-condition-content").length,t;i===1&&(t=this.bbdesigner$(n.currentTarget).parents(".bbi-custom-color-conditional-footer"),t.find(".bbi-color-global-where-condition").css("display","block"),t.find(".bbi-data-add-global-conditions-parent").css("display","none"));this.bbdesigner$(n.currentTarget).parent(".bbi-data-global-condition-content").remove();this.refreshScroller()},n.prototype.addGlobalWhereAgainCondition=function(n){var t=this.bbdesigner$(n.currentTarget).parents(".bbi-data-add-global-conditions-parent").find(".bbi-data-global-condition-content").length;this.renderGlobalConditionDiv(null,t);this.refreshScroller()},n.prototype.addComparisionDiv=function(n){var t=this.bbdesigner$(n.currentTarget);t.css("display","none");t.parents(".bbi-data-alert-condition-row").find(".bbi-data-alert-right-measure-condition").css("display","flex")},n.prototype.removeComparisionDiv=function(n){var t=this.bbdesigner$(n.currentTarget);t.parents(".bbi-data-measure-condition-content").find(".bbi-data-alert-measure-add-button").css("display","flex");t.parents(".bbi-data-alert-right-measure-condition").css("display","none")},n.prototype.addCondition=function(){var n=0;do n++;while(this.conditionNumbers.indexOf(n)>-1);this.renderConditiondiv(this.conditionalRangeBodyElement,n,null);this.updateRangeBodyElements();this.refreshScroller()},n.prototype.removeFilter=function(n){this.bbdesigner$(n.currentTarget).parents(".bbi-data-alert-condition-row").remove();var i=this.bbdesigner$(n.currentTarget).parents(".bbi-data-alert-condition-row").attr("id")[this.bbdesigner$(n.currentTarget).parents(".bbi-data-alert-condition-row").attr("id").length-1],t=this.conditionNumbers.indexOf(parseInt(i));t>-1&&this.conditionNumbers.splice(t,1);this.refreshScroller()},n.prototype.refreshScroller=function(){var n=this.conditionalContent.find("#"+this.id+"_advance_settings_coditional_range_scroller").data("BoldBIDashboardScroller");BoldBIDashboard.isNullOrUndefined(n)||n.refresh()},n.prototype.expBtnClick=function(){var n={dataSourceFields:this.dimensionCollection,customExpressions:this.serverExpressions,targetMethod:"updateCustomExpressions",id:this.id,targetObj:this.element,dataAlert:this};this.designerInstance._trigger("actionBegin",{eventType:"beforeOpenDaExpressionWindow"});this.customExpressionInstance=new BoldBIDashboard.DataAlert.CustomExpressions(n);this.customExpressionInstance.openExpression()},n.prototype.updateCustomExpressions=function(n){var t=this;this.serverExpressions=n;this.measureCollection=this.bbdesigner$.extend(!0,[],this.columnCollection);this.serverExpressions.forEach(function(n){var r,i,u;for(t.measureCollection.push({Caption:n.name,Id:n.name,IsServerExpression:!0,IsAggregatedExpression:!1,IsExpression:!1,IsKpiColumn:!1,SummaryType:"",ExpressionText:n.expression}),r=t.dialogDiv.find(".bbi-data-columns.e-dropdownlist"),i=0;i<r.length;i++)u=t.bbdesigner$(r[i]),u.BoldBIDashboardDropDownList({dataSource:t.measureCollection})});this.customExpressionInstance=null;this.designerInstance._trigger("actionComplete",{eventType:"afterCloseDaExpressionWindow"})},n.prototype.saveDataAlertFilter=function(){var i,u,t,r,n,f;if(BoldBIDashboard.isNullOrUndefined(this.widgetId))this.dialogDiv.find(".bbi-data-alert-widget-error-message-container").css("display","block");else{for(this.dialogDiv.find(".bbi-data-err").toggleClass("bbi-data-err",!1),this.daConditionalResult=new DaConditionalResult,i=this.conditionalRangeBodyElement.find(".bbi-data-alert-condition-row"),n=0;n<i.length;n++)u=this.bbdesigner$(i[n]),t=this.getConditionalInfo(u),t.FilterName="Filter: "+this.conditionNumbers[n],t.FilterId=BoldBIDashboard.getGuid("").toString(),this.daConditionalResult.ConditionalInformations.ConditionalInfoColleciton.push(t);for(r=this.conditionalRangeFooterElement.find(".bbi-data-add-global-conditions-parent").find(".bbi-data-global-condition-content"),n=0;n<r.length;n++)f=this.getGlobalFilterInfo(this.bbdesigner$(r[n])),this.daConditionalResult.ConditionalInformations.GlobalFilters.push(f);if(this.dialogDiv.find(".bbi-data-err").length>0||this.daConditionalResult.ConditionalInformations.ConditionalInfoColleciton.length===0)return;this.evaluateCondition()}},n.prototype.dimensionTargetSelectionChange=function(n,t,i){var f;if(this.clearErrorMsg(),!BoldBIDashboard.isNullOrUndefined(i)&&!BoldBIDashboard.isNullOrUndefined(i.value)){var r=t?n.parents(".bbi-data-global-condition-content"):n.parents(".bbi-data-dimension-condition-content"),e=r.find(".e-data-alert-dimension-field-dropdown").data("BoldBIDashboardDropDownList"),u=r.find(".e-data-alert-actual-dropdown-span");BoldBIDashboard.isNullOrUndefined(e.model.selectedIndex)||this.dimensionCollection[e.model.selectedIndex].Type.toLocaleLowerCase()!=="datetime"?i.value==="CUSTOM"?(r.find(".bbi-data-alert-dimension-custom-value").css("display","block"),u.css("display","none")):(r.find(".bbi-data-alert-dimension-custom-value").css("display","none"),u.css("display","block")):(f=r.find(".e-data-alert-dimension-condition-dropdown").data("BoldBIDashboardDropDownList"),r.find(".bbi-data-alert-multi-selection-dropdown").css("display","block"),i.value!=="CUSTOM"||f.model.value===DateTimeFormat.Date.toString()||f.model.value===DateTimeFormat.RelativeDate.toString()?(r.find(".bbi-data-alert-dimension-custom-value").css("display","none"),u.css("display","none")):(r.find(".bbi-data-alert-dimension-custom-value").css("display","block"),r.find(".bbi-data-alert-multi-selection-dropdown").css("display","none"),u.css("display","none")))}},n.prototype.targetTypeSelectionChange=function(n,t,i,r){BoldBIDashboard.isNullOrUndefined(r)||BoldBIDashboard.isNullOrUndefined(r.itemId)||(r.itemId===1?(i.parents(".bbi-data-alert-right-measure-condition").find(".bbi-measure-condition-custom").css("display","block"),this.bbdesigner$("#"+this.id+"_rightmeasure_"+n+"_wrapper").css("display","none")):(i.parents(".bbi-data-alert-right-measure-condition").find(".bbi-measure-condition-custom").css("display","none"),this.bbdesigner$("#"+this.id+"_rightmeasure_"+n+"_wrapper").css("display","block")));this.clearErrorMsg()},n.prototype.renderContentDialog=function(){var t=BoldBIDashboard.buildTag("div.bbi-data-alert-dialog-container","",{},{id:this.id+"_data_alert_dialog_container"}),n,i;this.element.append(t);this.dialogDiv=BoldBIDashboard.buildTag("div.bbi-userselect bbi-designer-data-alert-container","",{},{id:this.id});t.append(this.dialogDiv);n=BoldBIDashboard.buildTag("div.bbi-userselect bbi-color-custom-advance-container bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{height:"485px"},{id:this.id+"_container"});this.contentDiv=BoldBIDashboard.buildTag("div.bbi-color-custom-advance-content","",{},{id:this.id+"__content"});this.headerContent=BoldBIDashboard.buildTag("div.bbi-custom-color-header",this.getHeaderDiv(),{},{id:this.id+"_header"});i=BoldBIDashboard.buildTag("span.bbi-data-alert-widget-error-message-container","Please select a widget",{},{});this.renderHeaderWidgetDropDown(this.headerContent.find(".e-data-header-widget-dropdown"));this.headerContent.find(".bbi-header-row-widget").append(i);this.renderHeaderCategoryDropdown(this.headerContent.find(".e-data-header-category-dropdown"));this.bodyContent=BoldBIDashboard.buildTag("div.bbi-advance-condition-container","",{},{id:this.id+"_body"});this.conditionalContent=BoldBIDashboard.buildTag("div.bbi-color-conditional-UI","",{},{});this.bodyContent.append(this.conditionalContent);this.contentDiv.append(this.headerContent,this.bodyContent);n.append(this.contentDiv);this.dialogDiv.append(n);this.ejWaitingIndicator=this.dialogDiv.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup bbi-designer-loader",template:this.designerInstance.getWaitingPopupTemplate()}).data("BoldBIDashboardWaitingPopup")},n.prototype.renderHeaderWidgetDropDown=function(n){n.BoldBIDashboardDropDownList({dataSource:this.updateWidgetDataManager(n),watermarkText:this.localizationContent.dataAlert.widgetText,enableFilterSearch:!0,fields:{text:"Title",value:"Id"},change:this.bbdesigner$.proxy(this.widgetSelectionChange,this),actionComplete:this.bbdesigner$.proxy(this.widgetFetchCompelete,this),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-data-alert-left-measure-dropdown-span",width:"200px",height:"28px"})},n.prototype.updateWidgetDataManager=function(n){var t=this,i=new BoldBIDashboard.Adaptor(null).extend({processQuery:this.bbdesigner$.proxy(this.processWidgetQuery,this,n),beforeSend:function(n,i){t.designerInstance.beforeSendRequestForDataManager("OnDemandDataAction",i)},processResponse:this.bbdesigner$.proxy(this.processWidgetResponse,this,n)});return new BoldBIDashboard.DataManager({url:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.dagetallwidgets,adaptor:new i,crossDomain:!0})},n.prototype.processWidgetQuery=function(n,t){var i=n.parent().find(".e-select").addClass("e-atc").children();return i.addClass("e-load").addClass("e-input").addClass("e-icon"),i.css("background-position","center"),{url:t.dataSource.url,type:"POST",contentType:"application/json",data:""}},n.prototype.processWidgetResponse=function(n,t){var r=n.parent().find(".e-select").children(),i;if(r.removeClass("e-load").removeClass("e-input").removeClass("e-icon"),t.Status)return i=t.Data[0].WidgetInfoCollection,this.widgetInfoCollection=i,i;this.designerInstance.modules.util.alertDialog(this.localizationContent.dataAlert.dataAlertTitle,t.OuterMessage,IconType.errors,AlertType.Alert,!0,t.Message)},n.prototype.widgetFetchCompelete=function(){BoldBIDashboard.isNullOrUndefined(this.initialUI.widgetId)||this.headerContent.find(".e-data-header-widget-dropdown").data("BoldBIDashboardDropDownList").selectItemByValue(this.initialUI.widgetId)},n.prototype.renderHeaderCategoryDropdown=function(n){n.BoldBIDashboardDropDownList({dataSource:this.getCategoryDS(),fields:{id:"Id",text:"text",value:"value"},selectedIndex:0,change:this.bbdesigner$.proxy(this.categorySelectionChange,this),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-data-alert-left-measure-dropdown-span",width:"200px",height:"28px"})},n.prototype.getConditionalInfo=function(n){var t=new DaConditionalInfo,e=n.find(".e-data-alert-left-measure-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex,r,u,f,i,o,s;for(BoldBIDashboard.isNullOrUndefined(e)?n.find(".e-data-alert-left-measure-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.LeftOperand=this.measureCollection[e],t.ConditionJoinType=n.find(".e-data-alert-filter-join-dropdown").data("BoldBIDashboardDropDownList").model.value,n.find(".bbi-data-measure-condition-content").find(".bbi-data-alert-right-measure-condition").is(":visible")&&(r=n.find(".e-measure-condition-dropdown").data("BoldBIDashboardDropDownList").model.value,BoldBIDashboard.isNullOrUndefined(r)?n.find(".e-measure-condition-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.RelationalOperators=r,t.IsCustomValue=n.find(".e-measure-condition-type-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex===1,t.IsCustomValue?(t.CustomValue=n.find(".bbi-measure-condition-custom").val(),BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(t.CustomValue)&&n.find(".bbi-measure-condition-custom").addClass("bbi-data-err")):(u=n.find(".e-right-measure-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex,BoldBIDashboard.isNullOrUndefined(u)?n.find(".e-right-measure-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.RightOperand=this.measureCollection[u])),f=n.find(".bbi-data-add-dimension-conditions-parent").find(".bbi-data-dimension-condition-content"),i=0;i<f.length;i++)o=this.bbdesigner$(f[i]),s=this.getFilterInfo(o),t.Filters.push(s);return t},n.prototype.widgetSelectionChange=function(n){this.widgetId=this.widgetInfoCollection[n.model.selectedIndex].Id;this.datasourceId=this.widgetInfoCollection[n.model.selectedIndex].DatasourceId;this.conditionNumbers=[];this.conditionalContent.empty();this.populateConditionalFilterContent();var t=this.headerContent.find(".e-data-header-category-dropdown").data("BoldBIDashboardDropDownList");t.getSelectedValue()!==""&&(this.conditionCategory=t.getSelectedValue(),this.updateRangeBodyElements());this.clearErrorMsg();this.refreshScroller();BoldBIDashboard.isNullOrUndefined(this.initialUI.category)||this.headerContent.find(".e-data-header-category-dropdown").data("BoldBIDashboardDropDownList").selectItemByValue(this.initialUI.category);this.dashboardWritePermission&&this.getDimensionFields()},n.prototype.categorySelectionChange=function(n){BoldBIDashboard.isNullOrUndefined(this.conditionalRangeBodyElement)||(this.conditionCategory=n.model.value,this.updateRangeBodyElements());this.clearErrorMsg()},n.prototype.clearErrorMsg=function(){this.dialogDiv.find(".bbi-data-alert-widget-error-message-container").css("display","none");this.bbdesigner$(".bbi-data-err").removeClass("bbi-data-err")},n.prototype.updateRangeBodyElements=function(){BoldBIDashboard.isNullOrUndefined(this.conditionCategory)||(this.conditionCategory==="ValueChanges"?this.conditionalRangeBodyElement.find(".bbi-data-measure-condition-content").find(".bbi-data-alert-right-measure-condition").css("display","flex"):(this.conditionalRangeBodyElement.find(".bbi-data-measure-condition-content").find(".bbi-data-alert-right-measure-condition").css("display","none"),this.conditionalRangeBodyElement.find(".bbi-data-measure-condition-content").find(".bbi-data-alert-measure-add-button").css("display","none")))},n.prototype.getFilterInfo=function(n){var t=new DaFilter,u=n.find(".e-data-alert-dimension-field-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex;BoldBIDashboard.isNullOrUndefined(u)?n.find(".e-data-alert-dimension-field-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.FieldInfo=this.dimensionCollection[u];var f=n.find(".e-data-alert-dimension-condition-dropdown"),i=n.find(".e-data-alert-dimension-target-dropdown"),e=n.find(".e-data-alert-actual-dropdown"),r=n.find(".bbi-data-alert-dimension-custom-value");return t.FiltersJoinType=n.find(".e-data-alert-dimension-join-dropdown").data("BoldBIDashboardDropDownList").model.value,BoldBIDashboard.isNullOrUndefined(f.data("BoldBIDashboardDropDownList").model.selectedIndex)?n.find(".e-data-alert-dimension-condition-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.StringCondition.Conditions=f.data("BoldBIDashboardDropDownList").model.value,BoldBIDashboard.isNullOrUndefined(i.data("BoldBIDashboardDropDownList").model.selectedIndex)?n.find(".e-data-alert-dimension-target-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.StringCondition.ConditionType=i.data("BoldBIDashboardDropDownList").model.value,t.FieldInfo.Type.toLowerCase()!=="datetime"||BoldBIDashboard.isNullOrUndefined(t.StringCondition.ConditionType)?i.data("BoldBIDashboardDropDownList").model.selectedIndex===0?BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(e.data("BoldBIDashboardDropDownList").model.text)?n.find(".e-data-alert-actual-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.StringCondition.Values=e.data("BoldBIDashboardDropDownList").model.text.split(","):(t.StringCondition.Values.push(r.val()),r.val()===""&&r.addClass("bbi-data-err")):t=this.getDateFilterInfo(t,n),t},n.prototype.getDateFilterInfo=function(n,t){var e=t.find(".e-data-alert-dimension-target-dropdown"),r=t.find(".bbi-data-alert-dimension-custom-value"),u=t.find(".bbi-data-alert-multi-selection-dropdown"),f=t.find(".bbi-data-alert-customize-relative-button"),i;return e.data("BoldBIDashboardDropDownList").model.selectedIndex===0?n.StringCondition.Conditions===DateTimeFormat.Date.toString()?(i=this.dateRangePopup.getDateRangeValues(u.attr("id")),i.IsFilterApplied?n.StringCondition.DateInfo=this.getDateInfo(n.StringCondition.Conditions,!0,!1,i):u.find(".list.bbi-popup-button").addClass("bbi-data-err")):n.StringCondition.Conditions===DateTimeFormat.RelativeDate.toString()?(i=f.data("relativeDateInfo"),BoldBIDashboard.isNullOrUndefined(i)?f.addClass("bbi-data-err"):n.StringCondition.DateInfo=this.getDateInfo(n.StringCondition.Conditions,!0,!0,i)):(i=this.multiSelectionComboBox.getPopupContainerInformation(u.attr("id")),n.StringCondition.DateInfo=this.getDateInfo(n.StringCondition.Conditions,!1,!1,i)):r.val()===""?r.addClass("bbi-data-err"):(n.StringCondition.DateInfo=this.getDateInfo(n.StringCondition.Conditions,!0,!1,null),n.StringCondition.DateInfo.FilterValues.push(r.val())),n},n.prototype.getDateInfo=function(n,t,i,r){return{DateFormat:n,IsCheckAll:t?!1:r.IsCheckAll,IsInclude:t?!1:BoldBIDashboard.isNullOrUndefined(r)?!0:r.IsInclude,FilterValues:t?[]:r.FilterValues,CheckAllState:t?!1:r.CheckAllState,IsRelativeDate:i,RelativeDateFilter:i?r:null,DateFormatInfo:BoldBIDashboard.isNullOrUndefined(r)?null:{__type:"",DateFormatCondition:i?DateFormatOption.Range:r.DateFormatCondition,StartDate:r.StartDate,EndDate:r.EndDate}}},n.prototype.getGlobalFilterInfo=function(n){var t=new DaFilter,r=n.find(".e-data-alert-dimension-field-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex;BoldBIDashboard.isNullOrUndefined(r)?n.find(".e-data-alert-dimension-field-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.FieldInfo=this.dimensionCollection[r];var u=n.find(".e-data-alert-dimension-condition-dropdown"),f=n.find(".e-data-alert-dimension-target-dropdown"),e=n.find(".e-data-alert-actual-dropdown"),i=n.find(".bbi-data-alert-dimension-custom-value");return t.FiltersJoinType=n.find(".e-data-alert-dimension-join-dropdown").data("BoldBIDashboardDropDownList").model.value,BoldBIDashboard.isNullOrUndefined(u.data("BoldBIDashboardDropDownList").model.selectedIndex)?n.find(".e-data-alert-dimension-condition-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.StringCondition.Conditions=u.data("BoldBIDashboardDropDownList").model.value,BoldBIDashboard.isNullOrUndefined(f.data("BoldBIDashboardDropDownList").model.selectedIndex)?n.find(".e-data-alert-dimension-target-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.StringCondition.ConditionType=f.data("BoldBIDashboardDropDownList").model.value,t.FieldInfo.Type.toLowerCase()!=="datetime"||BoldBIDashboard.isNullOrUndefined(t.StringCondition.ConditionType)?n.find(".e-data-alert-dimension-target-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex===0?e.data("BoldBIDashboardDropDownList").model.selectedIndices.length>0?t.StringCondition.Values=e.data("BoldBIDashboardDropDownList").model.selectedIndices:n.find(".e-data-alert-actual-dropdown-span.e-in-wrap").addClass("bbi-data-err"):(t.StringCondition.Values[0]=i.val(),i.val()===""&&i.addClass("bbi-data-err")):t=this.getDateFilterInfo(t,n),t},n.prototype.populateConditionalFilterContent=function(){var i=BoldBIDashboard.buildTag("div.bbi-userselect bbi-dbrd-control bbi-dbrd-designer-scroller bbi-dbrd-designer-scroll-style-3","",{padding:"5px 0px 5px 12px"},{id:this.id+"_advance_settings_coditional_range_scroller"}),r=BoldBIDashboard.buildTag("div.bbi-userselect bbi-dbrd-control","",{},{id:this.id+"_advance_settings_coditional_range_scroller_child"}),t,u,f,e,n;if(this.conditionalRangeBodyElement=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_conditional_range_body"}),this.dashboardWritePermission){t=BoldBIDashboard.buildTag("div.bbi-dataalert-custom-expression",this.localizationContent.dataAlert.createExpression,{},{id:this.id+"_custom_expression"});t.off("click",this.bbdesigner$.proxy(this.expBtnClick,this));t.on("click",this.bbdesigner$.proxy(this.expBtnClick,this));this.conditionalContent.append(t)}if(this.conditionalRangeFooterElement=BoldBIDashboard.buildTag("div.bbi-custom-color-conditional-footer","",{margin:"10px 0px 10px 0px"},{id:this.id+"_conditional_range_footer"}),r.append(this.conditionalRangeBodyElement,this.conditionalRangeFooterElement),i.append(r),this.conditionalContent.append(i),!BoldBIDashboard.isNullOrUndefined(this.initialUI.daConditionalResult)&&this.initialUI.daConditionalResult.ConditionalInformations.ConditionalInfoColleciton.length>0)for(n=0;n<this.initialUI.daConditionalResult.ConditionalInformations.ConditionalInfoColleciton.length;n++)u=parseInt(this.initialUI.daConditionalResult.ConditionalInformations.ConditionalInfoColleciton[n].FilterName.slice(-1)),this.renderConditiondiv(this.conditionalRangeBodyElement,u,this.initialUI.daConditionalResult.ConditionalInformations.ConditionalInfoColleciton[n]);else this.renderConditiondiv(this.conditionalRangeBodyElement,1,null);if(this.conditionalRangeFooterElement.find(".bbi-color-custom-add-condition-wrap").length===0&&this.conditionalRangeFooterElement.append(this.renderAddConditionDiv()),f=BoldBIDashboard.buildTag("div.bbi-data-add-global-where",this.getGlobalWhereConditionContent(),{},{}),this.conditionalRangeFooterElement.append(f),e=BoldBIDashboard.buildTag("div.bbi-data-add-global-conditions-parent","",{display:"none"},{id:this.id+"_global_condition"}),this.conditionalRangeFooterElement.append(e),!BoldBIDashboard.isNullOrUndefined(this.initialUI.daConditionalResult)&&!BoldBIDashboard.isNullOrUndefined(this.initialUI.daConditionalResult.ConditionalInformations.GlobalFilters)&&this.initialUI.daConditionalResult.ConditionalInformations.GlobalFilters.length>0)for(n=0;n<this.initialUI.daConditionalResult.ConditionalInformations.GlobalFilters.length;n++)this.renderGlobalConditionDiv(this.initialUI.daConditionalResult.ConditionalInformations.GlobalFilters[n],n);this.conditionalContent.css("height","380px");i.BoldBIDashboardScroller({height:"380px",scrollerSize:this.scrollerSize.scrollSize,enableTouchScroll:!0,autoHide:!0,buttonSize:this.scrollerSize.buttonSize})},n.prototype.renderAddConditionDiv=function(){return"<div class='bbi-color-custom-add-condition-wrapper'><div class='bbi-color-custom-add-condition'>"+this.localizationContent.colorCustomAdvanceLocale.addConditionText+"<\/div><\/div>"},n.prototype.renderConditiondiv=function(n,t,i){var u=BoldBIDashboard.buildTag("div.bbi-data-alert-condition-row","",{},{id:this.id+"_condition_"+t,"data-conditionId":this.id+"_condition_"+t,"data-condition-num":t}),e=BoldBIDashboard.buildTag("div.bbi-data-alert-join-div",this.getJoinTypeDiv(t),{},{}),h=BoldBIDashboard.buildTag("div.bbi-data-alert-filter-div",this.getFilterAreaContent(t),{},{}),r=BoldBIDashboard.buildTag("div.bbi-data-measure-condition-content",this.getMeasureConditionContent(t,i),{},{}),o,s,f;u.append(e,h,r);u.off("keypress",".bbi-measure-condition-custom",this.bbdesigner$.proxy(this.validateNumber,this));u.on("keypress",".bbi-measure-condition-custom",this.bbdesigner$.proxy(this.validateNumber,this));if(this.renderFilterjoinTypeDropdown(e.find(".e-data-alert-filter-join-dropdown"),i),this.renderLeftMeasureDropDown(r.find(".e-data-alert-left-measure-dropdown"),t,i),this.renderRightMeasureDropdown(r.find(".e-right-measure-dropdown"),i),this.renderRelationalConditionDropDown(r.find(".e-measure-condition-dropdown"),t,i),this.renderTargetTypeDropDown(r.find(".e-measure-condition-type-dropdown"),t,i),o=BoldBIDashboard.buildTag("div.bbi-data-add-dimension-where",this.getDimensionWhereConditionContent(),{},{}),s=BoldBIDashboard.buildTag("div.bbi-data-add-dimension-conditions-parent","",{id:this.id+"_dimension_condition_"+t},{}),u.append(o,s),BoldBIDashboard.isNullOrUndefined(i)?(r.find(".bbi-data-alert-measure-add-button").css("display","none"),r.find(".bbi-measure-condition-custom").css("display","none"),r.find(".e-right-measure-dropdown").css("display","none")):(i.IsCustomValue?r.find("#"+this.id+"_rightmeasure_"+t+"_wrapper").css("display","none"):r.find(".bbi-measure-condition-custom").css("display","none"),r.find(".bbi-data-alert-measure-add-button").css("display","none")),n.append(u),!BoldBIDashboard.isNullOrUndefined(i))for(f=0;f<i.Filters.length;f++)this.renderDimensionConditionDiv(t,i.Filters[f],f);this.conditionNumbers.push(t)},n.prototype.renderLeftMeasureDropDown=function(n,t,i){n.BoldBIDashboardDropDownList({dataSource:this.updateMeasureFieldDataManager(),watermarkText:this.localizationContent.dataAlert.columnSelect,enableFilterSearch:!0,fields:{id:"Id",text:"Caption",value:"SummaryType"},actionComplete:this.bbdesigner$.proxy(this.measureFetchComplete,this,i,n,"Left"),change:this.bbdesigner$.proxy(this.clearErrorMsg,this),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-data-alert-left-measure-dropdown-span",width:"25%",height:"28px"})},n.prototype.updateMeasureFieldDataManager=function(){var n=this,t=new BoldBIDashboard.Adaptor(null).extend({processQuery:this.bbdesigner$.proxy(this.processQueryForMeasure,this),beforeSend:function(t,i){n.designerInstance.beforeSendRequestForDataManager("OnDemandDataAction",i)},processResponse:this.bbdesigner$.proxy(this.processResponseForMeasure,this)});return new BoldBIDashboard.DataManager({url:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.dagetmeasurefields,adaptor:new t,crossDomain:!0})},n.prototype.processQueryForMeasure=function(n){return{url:n.dataSource.url,type:"POST",contentType:"application/json",data:JSON.stringify({widgetId:this.widgetId,datasourceId:this.datasourceId})}},n.prototype.processResponseForMeasure=function(n){if(n.Status){this.columnCollection=n.Data;var t=this.updateServerExpressionIntoColumn(n.Data);return this.measureCollection=t,t}},n.prototype.updateServerExpressionIntoColumn=function(n){return this.serverExpressions.length>0&&this.serverExpressions.forEach(function(t){n.push({Caption:t.name,Id:t.name,IsServerExpression:!0,IsAggregatedExpression:!1,IsExpression:!1,IsKpiColumn:!1,SummaryType:"",ExpressionText:t.expression})}),n},n.prototype.measureFetchComplete=function(n,t,i){BoldBIDashboard.isNullOrUndefined(n)||this.measureCollection.forEach(function(r,u){i==="Right"&&n.hasOwnProperty("RightOperand")&&r.Caption===n.RightOperand.Caption&&t.data("BoldBIDashboardDropDownList").selectItemsByIndices(u.toString());i==="Left"&&r.Caption===n.LeftOperand.Caption&&t.data("BoldBIDashboardDropDownList").selectItemsByIndices(u.toString())})},n.prototype.renderFilterjoinTypeDropdown=function(n,t){n.BoldBIDashboardDropDownList({dataSource:this.getJoinRelationDS(),watermarkText:this.localizationContent.dataAlert.columnSelect,enableFilterSearch:!0,fields:{text:"text",value:"value"},value:BoldBIDashboard.isNullOrUndefined(t)?"AND":t.ConditionJoinType,change:this.bbdesigner$.proxy(this.clearErrorMsg,this),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"115px",height:"28px"})},n.prototype.renderRightMeasureDropdown=function(n,t){n.BoldBIDashboardDropDownList({dataSource:this.updateMeasureFieldDataManager(),watermarkText:this.localizationContent.dataAlert.columnSelect,enableFilterSearch:!0,fields:{id:"Id",text:"Caption",value:"SummaryType"},actionComplete:this.bbdesigner$.proxy(this.measureFetchComplete,this,t,n,"Right"),change:this.bbdesigner$.proxy(this.clearErrorMsg,this),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-right-measure-dropdown-span",width:"40%",height:"28px"})},n.prototype.renderRelationalConditionDropDown=function(n,t,i){n.BoldBIDashboardDropDownList({dataSource:this.getMeasureFiledTypeDS(),watermarkText:this.localizationContent.dataAlert.columnSelect,enableFilterSearch:!0,fields:{text:"text",value:"value"},value:BoldBIDashboard.isNullOrUndefined(i)?null:i.RelationalOperators,change:this.bbdesigner$.proxy(this.clearErrorMsg,this),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-measure-condition-dropdown-span",width:"25%",height:"28px"})},n.prototype.renderTargetTypeDropDown=function(n,t,i){n.BoldBIDashboardDropDownList({dataSource:["Condition","Custom"],watermarkText:this.localizationContent.dataAlert.selectTargetText,enableFilterSearch:!0,change:this.bbdesigner$.proxy(this.targetTypeSelectionChange,this,t,i,n),selectedIndex:BoldBIDashboard.isNullOrUndefined(i)?0:i.IsCustomValue?1:0,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-measure-condition-type-dropdown-span",width:"25%",height:"28px"})},n.prototype.getMeasureFiledTypeDS=function(){return[{text:"Greater than",value:"GREATERTHAN"},{text:"Greater than or Equal to",value:"GREATERTHANOREQUALS"},{text:"Less than",value:"LESSTHAN"},{text:"Less than or Equal to",value:"LESSTHANOREQUALS"},{text:"Equal to",value:"EQUALS"},{text:"Not equal to",value:"NOTEQUALS"}]},n.prototype.getJoinRelationDS=function(){return[{text:"AND",value:"AND"},{text:"OR",value:"OR"},{text:"AND NOT",value:"ANDNOT"},{text:"OR NOT",value:"ORNOT"}]},n.prototype.getDimensionTargetTypeDS=function(){return[{text:"Actual",value:"ACTUAL"},{text:"Custom",value:"CUSTOM"}]},n.prototype.getCategoryDS=function(){return[{text:"Value Changes",value:"ValueChanges"},{text:"Increases",value:"Increases"},{text:"Continuously Increases",value:"ContinousIncreases"},{text:"Decreases",value:"Decreases"},{text:"Continuously Decreases",value:"ContinousDecreases"}]},n.prototype.getDimensionRelationDS=function(){return[{text:"Contains",value:"CONTAINS"},{text:"Starts with",value:"STARTSWITH"},{text:"Ends with",value:"ENDSWITH"},{text:"Not Contains",value:"NOTCONTAINS"},{text:"Includes",value:"INCLUDE"},{text:"Excludes",value:"EXCLUDE"}]},n.prototype.getDateFormatsList=function(){var n=[];return n.push({value:DateTimeFormat.Year,text:this.localizationContent.dataconfiguration.menuItems.year}),n.push({value:DateTimeFormat.Quarter,text:this.localizationContent.dataconfiguration.menuItems.quarter}),n.push({value:DateTimeFormat.Month,text:this.localizationContent.dataconfiguration.menuItems.month}),n.push({value:DateTimeFormat.MonthYear,text:this.localizationContent.dataconfiguration.menuItems.monthYear}),n.push({value:DateTimeFormat.WeekYear,text:this.localizationContent.dataconfiguration.menuItems.weekYear}),n.push({value:DateTimeFormat.QuarterYear,text:this.localizationContent.dataconfiguration.menuItems.quarterYear}),n.push({value:DateTimeFormat.DayMonthYear,text:this.localizationContent.dataconfiguration.menuItems.dayMonthYear}),n.push({value:DateTimeFormat.MonthDayYear,text:this.localizationContent.dataconfiguration.menuItems.monthDayYear}),n.push({value:DateTimeFormat.DateHour,text:this.localizationContent.dataconfiguration.menuItems.dateHour}),n.push({value:DateTimeFormat.DayOfWeek,text:this.localizationContent.dataconfiguration.menuItems.dayOfWeek}),n.push({value:DateTimeFormat.WeekOfYear,text:this.localizationContent.dataconfiguration.menuItems.weekOfYear}),n.push({value:DateTimeFormat.Day,text:this.localizationContent.dataconfiguration.menuItems.day}),n.push({value:DateTimeFormat.Hour,text:this.localizationContent.dataconfiguration.menuItems.hours}),n.push({value:DateTimeFormat.Minute,text:this.localizationContent.dataconfiguration.menuItems.minutes}),n.push({value:DateTimeFormat.Second,text:this.localizationContent.dataconfiguration.menuItems.seconds}),n.push({value:DateTimeFormat.Time,text:this.localizationContent.dataconfiguration.menuItems.time}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Date],text:this.localizationContent.dataconfiguration.menuItems.date}),n.push({value:DateTimeFormat.RelativeDate,text:this.localizationContent.dataconfiguration.menuItems.relativeDateOptionsDisplayName}),n},n.prototype.renderDimensionJoinTypeDropDown=function(n,t){n.BoldBIDashboardDropDownList({dataSource:["AND","OR"],watermarkText:this.localizationContent.dataAlert.columnSelect,enableFilterSearch:!0,fields:{id:"field",text:"field",value:"field"},change:this.bbdesigner$.proxy(this.clearErrorMsg,this),selectedIndex:BoldBIDashboard.isNullOrUndefined(t)?0:t.FiltersJoinType==="AND"?0:1,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control bbi-data-alert-dimension-join-dropdown-span",width:"115px",height:"28px"})},n.prototype.renderDimensionActualDataDropDown=function(n,t,i){i===void 0&&(i=!1);n.BoldBIDashboardDropDownList({dataSource:[],watermarkText:this.localizationContent.dataAlert.columnSelect,enableFilterSearch:!0,multiSelectMode:BoldBIDashboard.MultiSelectMode.Delimiter,change:this.bbdesigner$.proxy(this.clearErrorMsg,this),actionComplete:this.bbdesigner$.proxy(i?this.actualDataDropDownFetchForGlobalFilter:this.actualDataDropDownFetch,this,n,t),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-data-alert-actual-dropdown-span",width:"143px",height:"28px"})},n.prototype.actualDataDropDownFetch=function(n,t){BoldBIDashboard.isNullOrUndefined(t)||t.StringCondition.Values&&n.data("BoldBIDashboardDropDownList").selectItemByText(t.StringCondition.Values)},n.prototype.actualDataDropDownFetchForGlobalFilter=function(n,t){!BoldBIDashboard.isNullOrUndefined(t)&&t.StringCondition.Values&&t.StringCondition.ConditionType==="ACTUAL"&&n.data("BoldBIDashboardDropDownList").selectItemsByIndices(t.StringCondition.Values)},n.prototype.updateDataManagerForActualData=function(n,t){var i=this,r=new BoldBIDashboard.Adaptor(null).extend({processQuery:this.bbdesigner$.proxy(this.processQueryForActualData,this,n,t),beforeSend:function(n,t){i.designerInstance.beforeSendRequestForDataManager("OnDemandDataAction",t)},processResponse:this.bbdesigner$.proxy(this.processResponseForActualData,this,t)});return new BoldBIDashboard.DataManager({url:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.dagetvaluesforselectedcolumn,adaptor:new r,crossDomain:!0})},n.prototype.processQueryForActualData=function(n,t,i){var r=t.find(".e-select").children();return r.addClass("e-load").addClass("e-input").addClass("e-icon"),r.css("background-position","center"),{url:i.dataSource.url,type:"POST",contentType:"application/json",data:JSON.stringify({datasourceId:this.datasourceId,datasourceFieldInfo:n})}},n.prototype.processResponseForActualData=function(n,t){var i=n.find(".e-select").children();return i.removeClass("e-load").removeClass("e-input").removeClass("e-icon"),t.Status?JSON.parse(t.Data):void 0},n.prototype.renderDimensionFieldDropDown=function(n,t){n.BoldBIDashboardDropDownList({dataSource:this.updateDataManager(),watermarkText:this.localizationContent.dataAlert.columnSelect,enableFilterSearch:!0,fields:{text:"Caption"},change:this.bbdesigner$.proxy(this.dimensionFieldSelectionChange,this,n,t,!1),actionComplete:this.bbdesigner$.proxy(this.dimensionFieldComplete,this,n,t),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-data-alert-dimension-field-dropdown-span",width:"130px",height:"28px"})},n.prototype.dimensionFieldComplete=function(n,t){BoldBIDashboard.isNullOrUndefined(t)||this.dimensionCollection.forEach(function(i,r){i.Id===t.FieldInfo.Id&&n.data("BoldBIDashboardDropDownList").selectItemsByIndices(r.toString())})},n.prototype.renderGlobalFieldDropDown=function(n,t){n.BoldBIDashboardDropDownList({dataSource:this.updateDataManager(),watermarkText:this.localizationContent.dataAlert.columnSelect,enableFilterSearch:!0,fields:{text:"Caption"},change:this.bbdesigner$.proxy(this.dimensionFieldSelectionChange,this,n,t,!0),actionComplete:this.bbdesigner$.proxy(this.dimensionFieldComplete,this,n,t),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-data-alert-dimension-field-dropdown-span",width:"130px",height:"28px"})},n.prototype.dimensionFieldSelectionChange=function(n,t,i,r){var u=i?n.parents(".bbi-data-global-condition-content"):n.parents(".bbi-data-dimension-condition-content"),f=u.find(".e-data-alert-dimension-condition-dropdown").data("BoldBIDashboardDropDownList"),e=u.find(".e-data-alert-dimension-target-dropdown").data("BoldBIDashboardDropDownList");this.dimensionCollection[r.model.selectedIndex].Type.toLowerCase()==="datetime"?(f.option("watermarkText",this.localizationContent.dataAlert.selectFormatText),f.option("dataSource",this.getDateFormatsList()),e.selectItemByIndex(0),BoldBIDashboard.isNullOrUndefined(t)?f.selectItemByIndex(0):f.selectItemByValue(t.StringCondition.Conditions),f.enable(),u.find(".e-data-alert-actual-dropdown-span").css("display","none"),u.find(".bbi-data-alert-multi-selection-dropdown").css("display",""),u.find(".bbi-multiselect-dropdown-item").attr("data-fieldText",this.dimensionCollection[r.model.selectedIndex].Caption),u.find(".bbi-multiselect-dropdown-item").attr("data-fieldValue",this.dimensionCollection[r.model.selectedIndex].Id)):this.dimensionCollection[r.model.selectedIndex].Type.toLowerCase()==="boolean"?(f.option("watermarkText",this.localizationContent.dataAlert.selectConditionText),e.enable(),f.disable(),u.find(".bbi-data-alert-multi-selection-dropdown").css("display","none"),u.find(".e-data-alert-actual-dropdown-span").css("display",""),f.selectItemByValue("INCLUDE"),this.updateValuesDropDown(u,r.model.selectedIndex)):(f.option("watermarkText",this.localizationContent.dataAlert.selectConditionText),f.option("dataSource",this.getDimensionRelationDS()),e.enable(),BoldBIDashboard.isNullOrUndefined(t)?f.selectItemByIndex(0):f.selectItemByValue(t.StringCondition.Conditions),f.enable(),u.find(".e-data-alert-actual-dropdown-span").css("display",this.updateDisplayofActualDropDown(t,e)?"none":""),u.find(".bbi-data-alert-multi-selection-dropdown").css("display","none"),u.find(".bbi-data-alert-customize-relative-button").css("display","none"),this.updateValuesDropDown(u,r.model.selectedIndex));this.clearErrorMsg()},n.prototype.updateDisplayofActualDropDown=function(n,t){return BoldBIDashboard.isNullOrUndefined(n)?BoldBIDashboard.isNullOrUndefined(t.model.selectedIndex):n.StringCondition.ConditionType==="CUSTOM"},n.prototype.updateValuesDropDown=function(n,t){var i=n.find(".e-data-alert-actual-dropdown"),r=i.data("BoldBIDashboardDropDownList"),u=i.parent().addClass("e-atc");r.option("dataSource",[]);this.bbdesigner$.extend(r.option("dataSource",this.updateDataManagerForActualData(this.dimensionCollection[t],u)))},n.prototype.updateElementsOnDimensionChange=function(n,t,i,r){var u=t?n.parents(".bbi-data-global-condition-content"):n.parents(".bbi-data-dimension-condition-content"),e=u.find(".e-data-alert-dimension-field-dropdown").data("BoldBIDashboardDropDownList"),f=u.find(".e-data-alert-dimension-target-dropdown").data("BoldBIDashboardDropDownList"),o=BoldBIDashboard.isNullOrUndefined(e.model.selectedIndex)?!1:this.dimensionCollection[e.model.selectedIndex].Type.toLowerCase()==="datetime";o?(this.updateTargetDropDownOnDate(i,f),u.find(".bbi-data-alert-multi-selection-dropdown").css("display",""),r.model.value===DateTimeFormat.Date?(u.find(".bbi-multiselect-dropdown-item").css("display","none"),u.find(".bbi-data-alert-customize-relative-button").css("display","none"),u.find(".list.bbi-popup-button").css("display",""),this.renderDatePopup(u,null,null,i)):r.model.value===DateTimeFormat.RelativeDate?(u.find(".list.bbi-popup-button").css("display","none"),u.find(".bbi-multiselect-dropdown-item").css("display","none"),u.find(".bbi-data-alert-customize-relative-button").css("display",""),this.updateRelativeDateInfo(u.find(".bbi-data-alert-customize-relative-button"),i)):(f.enable(),u.find(".bbi-data-alert-customize-relative-button").css("display","none"),u.find(".list.bbi-popup-button").css("display","none"),u.find(".bbi-multiselect-dropdown-item").attr("data-dateFormat",r.model.value),this.updateMultiSelectionComboBox(i,u))):f.enable();this.clearErrorMsg()},n.prototype.updateMultiSelectionComboBox=function(n,t){var i=t.find(".bbi-data-alert-multi-selection-dropdown"),r;BoldBIDashboard.isNullOrUndefined(n)?(t.find(".bbi-multiselect-dropdown-item").css("display",""),this.multiSelectionComboBox.populateMultiSelectionItem(i.attr("id"),null)):n.StringCondition.ConditionType==="CUSTOM"?(r=t.find(".bbi-data-alert-dimension-custom-value"),this.multiSelectionComboBox.populateMultiSelectionItem(i.attr("id"),null),t.find(".bbi-multiselect-dropdown-item").css("display","none"),r.css("display","block"),r.val(n.StringCondition.DateInfo.FilterValues[0])):(t.find(".bbi-multiselect-dropdown-item").css("display",""),this.multiSelectionComboBox.populateMultiSelectionItem(i.attr("id"),n.StringCondition.DateInfo))},n.prototype.updateTargetDropDownOnDate=function(n,t){BoldBIDashboard.isNullOrUndefined(n)?t.selectItemByIndex(0):t.selectItemByValue(n.StringCondition.ConditionType);t.disable()},n.prototype.updateRelativeDateInfo=function(n,t){BoldBIDashboard.isNullOrUndefined(t)?n.data("relativeDateInfo",null):n.data("relativeDateInfo",t.StringCondition.DateInfo.RelativeDateFilter)},n.prototype.renderRelativeDateDialog=function(n,t){var r=n.find(".e-data-alert-dimension-field-dropdown").data("BoldBIDashboardDropDownList"),u,f,i,e=this.bbdesigner$(t.currentTarget).data("relativeDateInfo");BoldBIDashboard.isNullOrUndefined(e)?(u=this.dimensionCollection[r.model.selectedIndex].Id,f=this.dimensionCollection[r.model.selectedIndex].Caption,i=new RelativeDateFilterInfo,i.ColumnId=u,i.ColumnName=f):i=e;this.designerInstance._trigger("actionBegin",{eventType:"beforeOpenDaRelativeDateDialog"});this.designerInstance.modules.relativeDateFilter.openRelativeDateFilter(this,"relativeDateFilterAction",i,null,null,t.currentTarget.id);this.updaterelativeDialogScreen()},n.prototype.updaterelativeDialogScreen=function(){var n=this.bbdesigner$("#"+this.designerInstance._id+"_relative_date_filter"),t=this.bbdesigner$("#"+this.designerInstance._id+"_relative_date_filter_overLay");n.BoldBIDashboardDialog({allowDraggable:!1});n.BoldBIDashboardDialog({beforeClose:this.bbdesigner$.proxy(this.updateFooterButton,this)});t.css("opacity","0")},n.prototype.updateFooterButton=function(){this.designerInstance._trigger("actionComplete",{eventType:"afterCloseDaRelativeDateDialog"})},n.prototype.relativeDateFilterAction=function(n,t,i,r){this.conditionalContent.find("#"+r).data("relativeDateInfo",n)},n.prototype.renderDatePopup=function(n,t,i,r){var f;t===void 0&&(t=null);i===void 0&&(i=null);r===void 0&&(r=null);var u=n.find(".bbi-data-alert-multi-selection-dropdown"),e=n.find(".e-data-alert-dimension-field-dropdown").data("BoldBIDashboardDropDownList"),o=BoldBIDashboard.isNullOrUndefined(r)?null:r.StringCondition.DateInfo.DateFormatInfo;t=BoldBIDashboard.isNullOrUndefined(t)?this.dimensionCollection[e.model.selectedIndex].Id:t;i=BoldBIDashboard.isNullOrUndefined(i)?this.dimensionCollection[e.model.selectedIndex].Caption:i;f=u.attr("id");this.dateRangePopup.updateDateFormat();u.find("#"+f+"_dimension_filter_date_dateRange_multidDrpDwn").length>0?this.dateRangePopup.populateDateRangeDrpDwn(f+"_dimension_filter_date",u,this.datasourceId,{Id:t,Name:i},o,"DimensionFilter",u.width()):this.dateRangePopup.renderDateRangeDrpDwn(f+"_dimension_filter_date",u,this.datasourceId,{Id:t,Name:i},o,"DimensionFilter",u.width());u.find("#"+f+"_dimension_filter_date_dateRange_multidDrpDwn").css("display","block")},n.prototype.updateDataManager=function(){var n=this,t=new BoldBIDashboard.Adaptor(null).extend({processQuery:this.bbdesigner$.proxy(this.processQuery,this),beforeSend:function(t,i){n.designerInstance.beforeSendRequestForDataManager("OnDemandDataAction",i)},processResponse:this.bbdesigner$.proxy(this.processResponse,this)});return new BoldBIDashboard.DataManager({url:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.dagetdatasourcefields,adaptor:new t,crossDomain:!0})},n.prototype.processQuery=function(n){return{url:n.dataSource.url,type:"POST",contentType:"application/json",data:JSON.stringify({datasourceId:this.datasourceId,widgetId:this.dashboardWritePermission?null:this.widgetId})}},n.prototype.processResponse=function(n){if(n.Status){var t=n.Data.fieldValues;return this.datasourcePublishId=n.Data.publishId,this.dimensionCollection=t,t}},n.prototype.renderDimensionConditionDropDown=function(n,t,i){n.BoldBIDashboardDropDownList({dataSource:this.getDimensionRelationDS(),watermarkText:this.localizationContent.dataAlert.selectConditionText,enableFilterSearch:!0,fields:{text:"text",value:"value"},change:this.bbdesigner$.proxy(this.updateElementsOnDimensionChange,this,n,i,t),value:BoldBIDashboard.isNullOrUndefined(t)?null:t.StringCondition.Conditions,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-data-alert-dimension-condition-dropdown-span",width:"165px",height:"28px"})},n.prototype.renderDimensionTargetDropDown=function(n,t,i){n.BoldBIDashboardDropDownList({dataSource:this.getDimensionTargetTypeDS(),watermarkText:this.localizationContent.dataAlert.selectTargetText,enableFilterSearch:!0,change:this.bbdesigner$.proxy(this.dimensionTargetSelectionChange,this,n,i),selectedIndex:BoldBIDashboard.isNullOrUndefined(t)?null:t.StringCondition.ConditionType==="ACTUAL"?0:1,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-data-alert-dimension-target-dropdown-span",width:"16.66667%",height:"28px"})},n.prototype.evaluateCondition=function(){this.ejWaitingIndicator.show();this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.daevaluatecondition,{action:BoldBIDashboard.DashboardUtil.DesignerAction.DataAlertModel,data:JSON.stringify({widgetId:this.widgetId,datasourceId:this.datasourceId,conditionalResult:this.daConditionalResult,conditionCategory:this.conditionCategory})},{fnction:this.bbdesigner$.proxy(this.updateEvalauationResult,this)},!0,!0)},n.prototype.updateEvalauationResult=function(n){this.ejWaitingIndicator.hide();n.Status?(this.daConditionalResult.OverallResult=!0,this.designerInstance._trigger("afterEvaluateDataAlert",{IsValidModel:this.daConditionalResult.OverallResult,DaJsonString:JSON.stringify(this.getDataAlertModel(n.Data,null)),Filters:n.Data.Filters,DataSourceId:this.datasourcePublishId})):(this.daConditionalResult.OverallResult=!1,this.designerInstance.modules.util.alertDialog("Data Alert",n.Message,IconType.errors,AlertType.Alert,!1,""))},n.prototype.getDataAlertModel=function(n,t){var i=this,u=n.DaColumnConditionInfo,r=n.DaGlobalConditionInfo;return t=BoldBIDashboard.isNullOrUndefined(t)?this.generateDataAlertArgsModel():t,t.daConditionalResult.ConditionalInformations.ConditionalInfoColleciton.forEach(function(n,t){n.Filters.forEach(function(n,r){n=i.updateValue(n,u[t].Filters[r])})}),r.length>0&&t.daConditionalResult.ConditionalInformations.GlobalFilters.forEach(function(n,t){n=i.updateValue(n,r[t])}),t},n.prototype.updateValue=function(n,t){return BoldBIDashboard.isNullOrUndefined(n.StringCondition.DateInfo)||BoldBIDashboard.isNullOrUndefined(t.StringCondition.DateInfo.DateFormatInfo)||(n.StringCondition.DateInfo.DateFormatInfo.StartDate=t.StringCondition.DateInfo.DateFormatInfo.StartDate,n.StringCondition.DateInfo.DateFormatInfo.EndDate=t.StringCondition.DateInfo.DateFormatInfo.EndDate,n.StringCondition.DateInfo.IsRelativeDate&&(n.StringCondition.DateInfo.RelativeDateFilter.AnchorDate=t.StringCondition.DateInfo.RelativeDateFilter.AnchorDate)),n},n.prototype.getMeasureFields=function(){this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.dagetmeasurefields,{action:BoldBIDashboard.DashboardUtil.DesignerAction.DataAlertModel,data:JSON.stringify({widgetId:this.widgetId,datasourceId:this.datasourceId})},{fnction:this.bbdesigner$.proxy(this.updateMeasureCollection,this)},!0,!0)},n.prototype.updateMeasureCollection=function(n){n.Status&&(this.measureCollection=n.Data)},n.prototype.getDimensionFields=function(){this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.dagetdatasourcefields,{action:BoldBIDashboard.DashboardUtil.DesignerAction.DataAlertModel,data:JSON.stringify({datasourceId:this.datasourceId})},{fnction:this.bbdesigner$.proxy(this.updateDimensionCollection,this)},!0,!0)},n.prototype.updateDimensionCollection=function(n){n.Status&&(this.dimensionCollection=n.Data.fieldValues,this.datasourcePublishId=n.Data.publishId)},n.prototype.getMeasureConditionContent=function(n,t){var i;return i=BoldBIDashboard.isNullOrUndefined(t)?"":t.IsCustomValue?t.CustomValue:"","<input id="+this.id+"_condition_type_drpdwn_"+n+" data-condition-number="+n+" type ='text' class= 'e-data-alert-left-measure-dropdown bbi-data-columns'/><\/input><input id="+this.id+"_add_target_button_"+n+" type='button' value='Add Comparison Target' class = 'bbi-dbrd-btn-small bbi-dbrd-btn-primary bbi-data-alert-measure-add-button'><\/input><div class = 'bbi-data-alert-right-measure-condition'><input id="+this.id+"_conditiontype_"+n+" class='e-measure-condition-dropdown'><\/input><input id="+this.id+"_type_"+n+" class='e-measure-condition-type-dropdown'><\/input><input id="+this.id+"_customvalue_"+n+" value='"+i+"'  class='bbi-measure-condition-custom e-textbox'><\/input><input id="+this.id+"_rightmeasure_"+n+" class='e-right-measure-dropdown bbi-data-columns'><\/input><span class = 'bbi-measure-condition-remove'>&nbsp;<\/span><\/div>"},n.prototype.getConditionLabelName=function(n){return"Filter :  "+n},n.prototype.getFilterAreaContent=function(n){return"<span class = 'bbi-data-alert-filter-text'>"+this.getConditionLabelName(n)+"<\/span><span class = 'bbi-data-alert-filter-remove'>&nbsp;<\/span>"},n.prototype.getJoinTypeDiv=function(n){return"<input id="+this.id+n+"_filter_jointype_drpdwn_ data-condition-number="+n+" type ='text' class= 'e-data-alert-filter-join-dropdown'><\/input>"},n.prototype.getDimensionWhereConditionContent=function(){return"<div class='bbi-color-dimension-where-condition'>"+this.localizationContent.dataAlert.addWhereCondition+"<\/div>"},n.prototype.renderDimensionConditionDiv=function(n,t,i){var r=BoldBIDashboard.buildTag("div.bbi-data-dimension-condition-content",this.getDimensionConditionDiv(n,t,i),{"data-filter-number":i,"data-condition-number":n},{}),u=r.find(".bbi-data-alert-multi-selection-dropdown");this.renderDimensionJoinTypeDropDown(r.find(".e-data-alert-dimension-join-dropdown"),t);this.renderDimensionActualDataDropDown(r.find(".e-data-alert-actual-dropdown"),t);this.renderDimensionFieldDropDown(r.find(".e-data-alert-dimension-field-dropdown"),t);this.renderDimensionConditionDropDown(r.find(".e-data-alert-dimension-condition-dropdown"),t,!1);this.renderDimensionTargetDropDown(r.find(".e-data-alert-dimension-target-dropdown"),t,!1);this.multiSelectionComboBox.renderMultiSelectionComboBox(u,u.attr("id"),this.datasourceId);this.bbdesigner$("#"+this.id+"_condition_"+n).find(".bbi-data-add-dimension-conditions-parent").append(r);r.find(".bbi-data-alert-customize-relative-button").off("click",this.bbdesigner$.proxy(this.renderRelativeDateDialog,this,r));r.find(".bbi-data-alert-customize-relative-button").on("click",this.bbdesigner$.proxy(this.renderRelativeDateDialog,this,r));BoldBIDashboard.isNullOrUndefined(t)?(this.bbdesigner$("#"+this.id+n+"_dimension_actual_drpdwn_"+i+"_wrapper").css("display","none"),r.find(".bbi-data-alert-dimension-custom-value").css("display","none"),r.find(".bbi-data-alert-multi-selection-dropdown").css("display","none"),r.find(".bbi-data-alert-customize-relative-button").css("display","none")):(t.StringCondition.ConditionType==="ACTUAL"?r.find(".bbi-data-alert-dimension-custom-value").css("display","none"):this.bbdesigner$("#"+this.id+n+"_dimension_actual_drpdwn_"+i+"_wrapper").css("display","none"),this.bbdesigner$(".bbi-data-add-dimension-where").css("display","none"),this.refreshScroller())},n.prototype.getDimensionConditionDiv=function(n,t,i){var r="";return BoldBIDashboard.isNullOrUndefined(t)||(r=t.StringCondition.ConditionType==="ACTUAL"?"":t.StringCondition.Values.toString()),"<div id="+this.id+n+"_dimension-remove_"+i+" data-condition-number="+n+" class= 'bbi-data-alert-dimension-remove'><\/div><input id="+this.id+n+"_dimension_jointype_drpdwn_"+i+" data-condition-number="+n+" type ='text' class= 'e-data-alert-dimension-join-dropdown'><\/input><div id="+this.id+n+"_dimension-where-text_"+i+" data-condition-number="+n+" class= 'bbi-data-alert-dimension-where'>Where<\/div><input id="+this.id+n+"_dimension_field_drpdwn_"+i+" data-condition-number="+n+" type ='text' class= 'e-data-alert-dimension-field-dropdown'><\/input><input id="+this.id+n+"_dimension_condition_drpdwn_"+i+" data-condition-number="+n+" type ='text' class= 'e-data-alert-dimension-condition-dropdown'><\/input><input id="+this.id+n+"_dimension_target_drpdwn_"+i+" data-condition-number="+n+" type ='text' class= 'e-data-alert-dimension-target-dropdown'><\/input><input id="+this.id+n+"_dimension_custom_value_"+i+" data-condition-number="+n+" type ='text' value ='"+r+"' class= 'bbi-data-alert-dimension-custom-value e-textbox'><\/input><input id="+this.id+n+"_dimension_actual_drpdwn_"+i+" data-condition-number="+n+" type ='text' class= 'e-data-alert-actual-dropdown'><\/input><div id="+this.id+n+"_dimension_multi_selection_drpdwn_"+i+" data-condition-number="+n+" type ='text' class= 'bbi-data-alert-multi-selection-dropdown' style='width: 150px'><button id="+this.id+n+"_dimension_customize_relative_button_"+i+" data-condition-number="+n+" type ='button' class= 'bbi-data-alert-customize-relative-button bbi-dbrd-btn-small bbi-dbrd-btn-secondary'>Customize<\/button><\/div><div id="+this.id+n+"_dimension-add_"+i+" data-condition-number="+n+" class= 'bbi-data-alert-dimension-add'><\/div>"},n.prototype.getGlobalWhereConditionContent=function(){return"<div class='bbi-color-global-where-condition'>"+this.localizationContent.dataAlert.addGlobalWhereCondition+"<\/div>"},n.prototype.renderGlobalConditionDiv=function(n,t){var i=BoldBIDashboard.buildTag("div.bbi-data-global-condition-content",this.getGlobalConditionDiv(n,t),{"data-filter-number":t},{}),r;this.bbdesigner$("#"+this.id+"_global_condition").css("display","block").append(i);r=i.find(".bbi-data-alert-multi-selection-dropdown");this.renderDimensionJoinTypeDropDown(i.find(".e-data-alert-dimension-join-dropdown"),n);this.renderGlobalFieldDropDown(i.find(".e-data-alert-dimension-field-dropdown"),n);this.renderDimensionConditionDropDown(i.find(".e-data-alert-dimension-condition-dropdown"),n,!0);this.renderDimensionTargetDropDown(i.find(".e-data-alert-dimension-target-dropdown"),n,!0);this.renderDimensionActualDataDropDown(i.find(".e-data-alert-actual-dropdown"),n,!0);this.multiSelectionComboBox.renderMultiSelectionComboBox(r,r.attr("id"),this.datasourceId);i.find(".bbi-data-alert-customize-relative-button").off("click",this.bbdesigner$.proxy(this.renderRelativeDateDialog,this,i));i.find(".bbi-data-alert-customize-relative-button").on("click",this.bbdesigner$.proxy(this.renderRelativeDateDialog,this,i));BoldBIDashboard.isNullOrUndefined(n)?(this.bbdesigner$("#"+this.id+"_dimension_actual_drpdwn_"+t+"_wrapper").css("display","none"),i.find(".bbi-data-alert-dimension-custom-value").css("display","none"),i.find(".bbi-data-alert-multi-selection-dropdown").css("display","none"),i.find(".bbi-data-alert-customize-relative-button").css("display","none")):(n.StringCondition.ConditionType==="ACTUAL"?i.find(".bbi-data-alert-dimension-custom-value").css("display","none"):this.bbdesigner$("#"+this.id+"_dimension_actual_drpdwn_"+t+"_wrapper").css("display","none"),this.bbdesigner$(".bbi-data-add-global-where").css("display","none"),this.refreshScroller())},n.prototype.getHeaderDiv=function(){return"<div class = 'e-header-row bbi-header-row-widget'> <div class = 'e-header-row-label'>"+this.localizationContent.dataAlert.widgetTitle+" <\/div><input id="+this.id+"_header_widget_drpdwn type ='text' class= 'e-data-header-widget-dropdown bbi-data-header-header-dropdown'><\/input><\/div><div class = 'e-header-row'> <div class = 'e-header-row-label'>"+this.localizationContent.dataAlert.conditionTitle+" <\/div><input id="+this.id+"_header_category_drpdwn type ='text' class= 'e-data-header-category-dropdown bbi-data-header-header-dropdown'><\/input><\/div>"},n.prototype.getGlobalConditionDiv=function(n,t){var i="";return BoldBIDashboard.isNullOrUndefined(n)||(i=n.StringCondition.ConditionType==="ACTUAL"?"":n.StringCondition.Values.toString()),"<div id="+this.id+"_dimension-remove_"+t+" class= 'bbi-data-alert-global-remove'><\/div><input id="+this.id+"_dimension_jointype_drpdwn_"+t+" type ='text' class= 'e-data-alert-dimension-join-dropdown'><\/input><div id="+this.id+"_dimension-where-text_"+t+" class= 'bbi-data-alert-global-where'>Where<\/div><input id="+this.id+"_dimension_field_drpdwn_"+t+" type ='text' class= 'e-data-alert-dimension-field-dropdown'><\/input><input id="+this.id+"_dimension_condition_drpdwn_"+t+" type ='text' class= 'e-data-alert-dimension-condition-dropdown'><\/input><input id="+this.id+"_dimension_target_drpdwn_"+t+" type ='text' class= 'e-data-alert-dimension-target-dropdown'><\/input><input id="+this.id+"_dimension_custom_value_"+t+" type ='text' value ='"+i+"' class= 'bbi-data-alert-dimension-custom-value e-textbox'><\/input><input id="+this.id+"_dimension_actual_drpdwn_"+t+" type ='text' class= 'e-data-alert-actual-dropdown'><\/input><div id="+this.id+"_dimension_multi_selection_drpdwn_"+t+" data-condition-number= type ='text' class= 'bbi-data-alert-multi-selection-dropdown' style='width: 150px'><button id="+this.id+"_dimension_customize_relative_button_"+t+" data-condition-number= type ='button' class= 'bbi-data-alert-customize-relative-button bbi-dbrd-btn-small bbi-dbrd-btn-secondary'>Customize<\/button><\/div><div id="+this.id+"_dimension-add_"+t+" class= 'bbi-data-alert-global-add'><\/div>"},n.prototype.validateNumber=function(n){var t=n.keyCode;if(!(t===8)&&t>31&&(t<48||t>57)&&!(t===45)&&!(t===46))return!1},n.prototype.generateDataAlertArgsModel=function(){var n=new DataAlertArgs;return n.category=this.conditionCategory,n.daConditionalResult=this.daConditionalResult,n.datasourceId=this.datasourceId,n.widgetId=this.widgetId,n.daExpressionCollection=this.serverExpressions,n},n}(),InternalDataAlertExpressions,InternalDateRangePopup,DateFormatOption,TileType,LegendAlignment,LabelIntersectAction,UrlLink,ColumnUrl,LinkType,UrlLinkType,WidgetLink,LinkedWidgetList,WidgetLinkType,DimensionConditionType,ConditionalFormatType,MeasureFormatType,ColorType,PoPProperties,RangeSliderProperties,RangeSliderType,RangeSliderOrientation,ListBoxProperties,GaugeSettings,GaugeTypes,RangeValueType,GaugeRangeSettings,GaugeFontSettings,GaugeDirection,ValuePointers,TargetPointers,TicksPosition,ValueLabelPosition,ScaleLabelPosition,RangeWidth,LabelType,PrimaryValueType,SparkLineSettings,SparkLineType,RadarPolarType,AxisRange,LineStyleInformation,LineStyles,ForecastSettings,ForecastProperties,ConfidenceBandStyle,ChartColumnSettinng,ValueLabelRotations,ValueLabelPlacement,EmptyPointMode,LegendPositions,ChartSeriesShape,LegendTextOverFlow,ColorMappingType,LegendShape,SortSetting,ChartTypes,LabelOverFlowMode,DataLabel,CustomLegendType,ImageProperties,PaddingSettings,ImageMode,DataSource,ImgSource,ImageRotations,LinkProperties,LinkSetting,WidgetType,DefaultFormatType,ValueType,InternalFilterConfiguration,InternalMasterSlaveFilterSerializationHelper,InternalLabelParameter,InternalCacheManager,__extends,BoldBIDashboard,InternalQueryExpression,ExpAction,InternalExpressionParsor;window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.DataAlert",InternalDataAlertPanel,window);InternalDataAlertExpressions=function(){function n(n){this.id=null;this.oldVal="";this.oldExpName="";this.isAddButtonEnabled=!1;this.customExpressions=[];this.provider="";this.listContainer=null;this.expLiTag=null;this.bodyContainer=null;this.textBox=null;this.textArea=null;this.expressionContainer=null;this.addBtnTag=null;this.saveBtnTag=null;this.footerTag=null;this.expWaterMark="";this.successMessageLocale="";this.nameWaterMark="Expression Name";this.isAdd=!1;this.ejFunctionDropdown=null;this.ejColumnDropdown=null;this.ejFunctionList=null;this.ejColumnList=null;this.ejIndicator=null;this.scrollerSize={scrollSize:5,buttonSize:0};this.dataSourceFields=[];this.locale=null;this.aggregationList=["SUM","COUNT","AVG","MAX","MIN","VAR","STDEV","COUNTD","INDEX","TOTAL","TOTALPERCENTAGE","SUMD","AVGD","RUNNINGAVG","RUNNINGCOUNT","RUNNINGSUM","RUNNINGMAX","RUNNINGMIN","NULL"];this.rowExpression=["RUNNINGAVG","RUNNINGCOUNT","RUNNINGSUM","RUNNINGMAX","RUNNINGMIN"];this.dashboardDesigner=n.dataAlert.designerInstance;this.bbdesigner$=BoldBIDashboardDesigner.bbdesignerstatic$;this.targetInstance=n.targetObj;this.targetMethod=n.targetMethod;this.serviceUrl=n.dataAlert.designerInstance.model.serviceUrl;this.customExpressions=n.customExpressions;this.dataSourceFields=n.dataSourceFields;this.dataAlert=n.dataAlert;this.id=n.id+"_expression";this.provider="SQL";this.locale=n.dataAlert.designerInstance.getLocalizationContent();this.expWaterMark=this.locale.queryExpressionDialog.QueryExpression;this.successMessageLocale=this.locale.queryExpressionDialog.successMessageNotification;this.renderQueryExpression()}return n.prototype.renderQueryExpression=function(){var b=BoldBIDashboard.buildTag("div.bbi-userselect bbi-data-alert-expression-header-container","",{},{id:this.id+"_exp_designer"}),t=BoldBIDashboard.buildTag("div","",{float:"left"},{id:this.id+"_exp_designer_div"}),c,ht;b.append(t);var k=BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-table","",{},{unselectable:"on"}),d=BoldBIDashboard.buildTag("tr","",{}),f=BoldBIDashboard.buildTag("td.bbi-querydesigner-exp-separator bbi-querydesigner-exp-td","",{"font-size":"13px"},{}),g=BoldBIDashboard.buildTag("td","",{"margin-left":"12px"},{});t.append(k);k.append(d);d.append(f).append(g);var n=BoldBIDashboard.buildTag("div","",{width:"175px",height:"490px"}),nt=this.expressionContainer=BoldBIDashboard.buildTag("div","",{"margin-left":"10px"},{id:this.id+"_exp_designer_container_exp"}),ci=BoldBIDashboard.buildTag("div","",{width:"175px",height:"40px"});f.append(n);g.append(nt);f.append(ci);var e=BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-table","",{width:"820px","padding-left":"8px"},{unselectable:"on"}),tt=BoldBIDashboard.buildTag("tr","",{width:"590px"}),it=BoldBIDashboard.buildTag("td","",{}),li=BoldBIDashboard.buildTag("label.bbi-designer-title-label",this.locale.expressionDesigner.nameText,{},{id:this.id+"_exp_designer_exp_name"}),rt=BoldBIDashboard.buildTag("tr","",{width:"590px"}),ut=BoldBIDashboard.buildTag("table","",{}),o=BoldBIDashboard.buildTag("tr","",{}),ft=BoldBIDashboard.buildTag("td","",{}),s=this.textBox=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-textbox","",{height:"30px",width:"240px","margin-top":"2px","margin-bottom":"5px"},{type:"text",id:this.id+"_exp_designer_textBox",spellcheck:"false"});it.append(li);tt.append(it);ft.append(s);o.append(ft);ut.append(o);rt.append(ut);var et=BoldBIDashboard.buildTag("tr","",{height:"150px",width:"590px"}),ot=BoldBIDashboard.buildTag("tr","",{width:"590px",height:"30px"}),st=BoldBIDashboard.buildTag("table","",{}),h=BoldBIDashboard.buildTag("tr","",{});st.append(h);c=BoldBIDashboard.buildTag("td","",{});ht=BoldBIDashboard.buildTag("label.bbi-designer-title-label",this.locale.expressionDesigner.expressionText,{display:"block","margin-top":"14px"},{id:this.id+"_exp_designer_trgt_name"});c.append(ht);h.append(c);ot.append(st);var ct=BoldBIDashboard.buildTag("td","",{"font-size":"13px"},{}),l=this.textArea=BoldBIDashboard.buildTag("textarea.e-textarea bbi-designer-textarea","",{height:"130px",width:"785px",overflow:"auto"},{id:this.id+"_exp_designer_textarea",spellcheck:"false"}),lt=BoldBIDashboard.buildTag("tr","",{height:"300px",width:"590px"}),at=BoldBIDashboard.buildTag("td","",{display:"block"}),vt=BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-innertable","",{height:"250px",width:"590px","margin-top":"6px","margin-bottom":"2px"}),yt=BoldBIDashboard.buildTag("tr","",{height:"35px",width:"590px"}),pt=BoldBIDashboard.buildTag("td","",{}),ai=BoldBIDashboard.buildTag("span.bbi-designer-title-label",this.locale.expressionDesigner.functionsText,{},{}),wt=BoldBIDashboard.buildTag("div","",{"margin-top":"6px",width:"210px"},{}),a=BoldBIDashboard.buildTag("input","",{"margin-top":"5px"},{id:this.id+"_exp_designer_options"}),vi=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_exp_designer_option_div"}),bt=BoldBIDashboard.buildTag("td","",{}),yi=BoldBIDashboard.buildTag("div","",{height:"25px",margin:"25px 10px 0px -3px","border-left":"1px solid var(--querydesigner-primary-border-color)"},{});bt.append(yi);var kt=BoldBIDashboard.buildTag("td","",{}),pi=BoldBIDashboard.buildTag("span.bbi-designer-title-label",this.locale.expressionDesigner.columnSettingsText,{"margin-left":"6px"},{}),dt=BoldBIDashboard.buildTag("div","",{"margin-top":"6px",width:"199px","margin-left":"6px"},{}),v=BoldBIDashboard.buildTag("input","",{height:"35px",width:"190px"},{id:this.id+"_exp_designer_data"}),wi=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_exp_designer_data_div"}),bi=BoldBIDashboard.buildTag("td","",{height:"35px"}),gt=BoldBIDashboard.buildTag("tr","",{width:"590px"}),i=BoldBIDashboard.buildTag("td","",{width:"210px"},{}),ni=BoldBIDashboard.buildTag("td","",{}),ki=BoldBIDashboard.buildTag("div","",{height:"200px",margin:"-10px 10px 0px -3px","border-left":"1px solid var(--querydesigner-primary-border-color)"},{});ni.append(ki);var r=BoldBIDashboard.buildTag("td","",{width:"205px"},{}),ti=BoldBIDashboard.buildTag("td","",{height:"190px"}),di=this.functionNoDataContainer=BoldBIDashboard.buildTag("div.bbi-querydesigner-function-nodata bbi-designer-empty-msg","",{width:"188px",height:"135px"},{id:this.id+"_function_nodata_container"}).text(this.locale.queryExpressionDialog.NoResultFound),ii=BoldBIDashboard.buildTag("div.bbi-querydesigner-function-search","",{width:"188px"},{id:this.id+"_div_functions_search"}),ri=BoldBIDashboard.buildTag("div.e-option-list","",{width:"205px","margin-top":"1px"},{}),gi=this.columnNoDataContainer=BoldBIDashboard.buildTag("div.bbi-querydesigner-column-nodata bbi-designer-empty-msg","",{width:"188px",height:"135px"},{id:this.id+"_column_nodata_container"}).text(this.locale.queryExpressionDialog.NoResultFound),ui=BoldBIDashboard.buildTag("div.bbi-querydesigner-column-search","",{width:"188px"},{id:this.id+"_div_columnsettings_search"}),y=BoldBIDashboard.buildTag("ul","",{},{id:this.id+"_exp_designer_option_list"}),fi=BoldBIDashboard.buildTag("div.e-data-list","",{width:"199px","margin-left":"6px","margin-top":"1px"},{}),p=BoldBIDashboard.buildTag("ul","",{},{id:this.id+"_exp_designer_data_list"}),ei=BoldBIDashboard.buildTag("div.bbi-designer-cursor","",{height:"200px",width:"355px","margin-right":"10px"},{id:this.id+"_cat_desc"}),nr=BoldBIDashboard.buildTag("div","",{height:"5px"},{}),tr=BoldBIDashboard.buildTag("div.bbi-designer-title-label","",{height:"auto"},{id:this.id+"_exp_designer_desc_heading"}),ir=BoldBIDashboard.buildTag("div","",{"text-align":"justify",height:"auto","font-size":"12px","margin-top":"8px"},{id:this.id+"_exp_designer_desc_content"}),rr=BoldBIDashboard.buildTag("div","",{height:"12px"},{}),ur=BoldBIDashboard.buildTag("div.bbi-designer-title-label","",{height:"auto"},{id:this.id+"_exp_designer_example_heading"}),fr=BoldBIDashboard.buildTag("div","",{float:"left","word-wrap":"break-word","margin-top":"8px",height:"auto","font-size":"12px",width:"190px"},{id:this.id+"_exp_designer_example_content"}),u=this.addBtnTag=BoldBIDashboard.buildTag("div.bbi-dbrd-dataalert-expression-add","",{},{id:this.id+"_exp_designer_add_btn"}),er=BoldBIDashboard.buildTag("span.bbi-dbrd-dataalert-expression-add-icon","",{},{}),or=BoldBIDashboard.buildTag("span.bbi-dbrd-dataalert-expression-add-text",this.locale.dataAlertExpression.addExpression,{},{});u.append(er,or);var oi=BoldBIDashboard.buildTag("td.bbi-querydesigner-success-msg-wrap","",{display:"none","margin-left":"465px"},{id:this.id+"_exp_success_message_wrap"}),sr=BoldBIDashboard.buildTag("span.bbi-querydesigner-success-message",this.successMessageLocale,{float:"initial"},{id:this.id+"_exp_success_message"}),hr=BoldBIDashboard.buildTag("span.bbi-querydesigner-success-message-icon","",{},{id:this.id+"_exp_success_message_icon"});this.saveBtnTag=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.expressionDesigner.saveBtnText,{float:"right"},{id:this.id+"_exp_designer_save_btn",type:"button"});h.append(oi);var w=this.bodyContainer=BoldBIDashboard.buildTag("div.e-lv e-js e-parentlv bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{width:"100%",height:n.height()-30,display:"block",position:"relative"},{id:this.id+"_exp_designer_bodyContainer"}),si=BoldBIDashboard.buildTag("div","",{},{}),hi=this.listContainer=BoldBIDashboard.buildTag("div.bbi-list-container e-js e-widget bbi-designer-dataset","",{"border-top-width":"1px",padding:"3px"},{id:this.id+"_div_expList"}),cr=this.expLiTag=BoldBIDashboard.buildTag("ul.e-list-hdr e-clearall","",{width:"auto",height:"auto"},{id:this.id+"_query_exp_li_container"});hi.append(cr);si.append(hi);w.append(si);n.append(w);n.append(u);ct.append(l);et.append(ct);e.append(tt).append(rt).append(ot).append(et);yt.append(bi).append(pt).append(bt).append(kt);pt.append(ai).append(wt);wt.append(a).append(vi);kt.append(pi).append(dt);dt.append(v).append(wi);vt.append(yt).append(gt);at.append(vt);lt.append(at);e.append(lt);i.append(ii);i.append(ri);i.append(di);ri.append(y);r.append(ui);r.append(fi);r.append(gi);fi.append(p);ti.append(ei);ei.append(nr).append(tr).append(ir).append(rr).append(ur).append(fr);gt.append(ti).append(i).append(ni).append(r);nt.append(e);this.footerTag=BoldBIDashboard.buildTag("td.e-foter","",{display:"flex","margin-left":"450px"},{id:this.id+"_exp_designer_foot"});o.append(this.footerTag);oi.append(hr,sr);this.footerTag.append(this.saveBtnTag);this.dataAlert.element.find("#"+this.dataAlert.id).append(b);a.BoldBIDashboardDropDownList({targetID:this.id+"_exp_designer_option_div",dataSource:[],popupHeight:"150px",minPopupWidth:"190px",showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-ejwidgets bbi-designer-drpdown-selection bbi-dbrd-control",width:"190px",height:"28px",change:this.bbdesigner$.proxy(this.renderFunctionList,this)});v.BoldBIDashboardDropDownList({targetID:this.id+"_exp_designer_data_div",popupHeight:"150px",showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-ejwidgets bbi-designer-drpdown-selection bbi-dbrd-control",minPopupWidth:"190px",fields:{id:"id",text:"name"},dataSource:[],width:"190px",height:"28px",change:this.bbdesigner$.proxy(this.renderColumnList,this)});y.BoldBIDashboardListBox({dataSource:[],height:"155px",change:this.bbdesigner$.proxy(this.optionClick,this),showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-list-selection bbi-dbrd-control",width:"190px"});p.BoldBIDashboardListBox({dataSource:[],height:"155px",showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-list-selection bbi-dbrd-control",width:"190px"});u.off("click",this.bbdesigner$.proxy(this.addExpression,this));this.saveBtnTag.off("click",this.bbdesigner$.proxy(this.saveExpression,this));u.on("click",this.bbdesigner$.proxy(this.addExpression,this));this.saveBtnTag.on("click",this.bbdesigner$.proxy(this.saveExpression,this));w.BoldBIDashboardScroller({scrollerSize:this.scrollerSize.scrollSize,height:n.height(),enableTouchScroll:!0,autoHide:!0,buttonSize:this.scrollerSize.buttonSize});t.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup bbi-designer-loader",template:this.dashboardDesigner.getWaitingPopupTemplate()});this.ejFunctionDropdown=a.data("BoldBIDashboardDropDownList");this.ejColumnDropdown=v.data("BoldBIDashboardDropDownList");this.ejFunctionList=y.data("BoldBIDashboardListBox");this.ejColumnList=p.data("BoldBIDashboardListBox");this.ejIndicator=t.data("BoldBIDashboardWaitingPopup");l.bind("change keyup paste",this.bbdesigner$.proxy(this.txtExpChanged,this));s.bind("change keyup paste",this.bbdesigner$.proxy(this.txtNameChanged,this));BoldBIDashboard.DashboardUtil.txtWaterMark(l,this.expWaterMark);BoldBIDashboard.DashboardUtil.txtWaterMark(s,this.nameWaterMark);this.wiredEvents();this.renderAutocomplete(ii,!0);this.renderAutocomplete(ui,!1)},n.prototype.closeDialog=function(){this.resetSearchBox();BoldBIDashboard.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.customExpressions])},n.prototype.renderAutocomplete=function(n,t){var r=BoldBIDashboard.buildTag("table.bbi-querydesigner-toolbar-table","",{width:"100%"}),u=this.bbdesigner$("<tr/>"),f=this.bbdesigner$("<td/>"),e=BoldBIDashboard.buildTag("span.e-atc e-widget","",{width:"100%",height:"28px"},{}),i=BoldBIDashboard.buildTag("span.e-in-wrap e-box e-padding bbi-designer-widget-autocomplete","",{},{}),h=this.expSearch=BoldBIDashboard.buildTag("input.bbi-autocomplete bbi-designer-widget-watermark bbi-designer-atc-boxshadow e-js e-input","",{},{type:"text",placeholder:this.locale.expressionDesigner.placeHolderText,id:t?this.id+"_function_search":this.id+"_column_search"}),o=this.expSearchIcon=BoldBIDashboard.buildTag("span.e-select bbi-designer-widget-autocomplete e-search-area","",{width:"24px",height:"30px"},{id:t?this.id+"_function_search-icon":this.id+"_column_search-icon"}),s;if(o.append(BoldBIDashboard.buildTag("span.bbi-headericon bbi-designer-search","",{display:"table-cell"})),i.append(o),i.append(h),e.append(i),s=BoldBIDashboard.buildTag("span.e-select bbi-designer-widget-select bbi-designer-widget-autocomplete","",{height:"30px"},{id:this.id+"_column_widgetClose"}),s.append("<span class='bbi-headericon e-reportdesigner-widget-left'/>"),f.append(e),u.append(f),r.append(u),n.append(r),this.functionSearchBox=this.expressionContainer.find("#"+this.id+"_function_search"),this.columnSearchBox=this.expressionContainer.find("#"+this.id+"_column_search"),this.functionSearchIcon=this.expressionContainer.find(".bbi-querydesigner-function-search .bbi-headericon"),this.functionListbox=this.expressionContainer.find("#"+this.id+"_exp_designer_option_list"),this.columnSearchIcon=this.expressionContainer.find(".bbi-querydesigner-column-search .bbi-headericon"),this.columnListbox=this.expressionContainer.find("#"+this.id+"_exp_designer_data_list"),this.functionListTd=this.expressionContainer.find(".e-option-list"),this.columnListTd=this.expressionContainer.find(".e-data-list"),t){this.expSearch.on("keyup",this.bbdesigner$.proxy(this.onSearchText,this,this.functionSearchIcon,this.functionListbox,!0));this.expSearch.on("blur",this.bbdesigner$.proxy(this.onSearchBlur,this,this.functionSearchIcon,this.functionListbox));this.expSearchIcon.on("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this,this.functionSearchIcon,this.functionListbox,this.expSearch,!0));this.functionSearchBox.on("focus",this.bbdesigner$.proxy(this.onSearchTextBoxFocusIn,this,this.expressionContainer,!0));this.functionSearchBox.on("blur",this.bbdesigner$.proxy(this.onSearchTextBoxFocusOut,this,this.expressionContainer,!0))}else{this.expSearch.on("keyup",this.bbdesigner$.proxy(this.onSearchText,this,this.columnSearchIcon,this.columnListbox,!1));this.expSearch.on("blur",this.bbdesigner$.proxy(this.onSearchBlur,this,this.columnSearchIcon,this.columnListbox));this.expSearchIcon.on("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this,this.columnSearchIcon,this.columnListbox,this.expSearch,!1));this.columnSearchBox.on("focus",this.bbdesigner$.proxy(this.onSearchTextBoxFocusIn,this,this.expressionContainer,!1));this.columnSearchBox.on("blur",this.bbdesigner$.proxy(this.onSearchTextBoxFocusOut,this,this.expressionContainer,!1))}},n.prototype.onSearchText=function(n,t,i,r){var u,f;r.keyCode!==13&&(u=this.bbdesigner$(r.target).val(),u.length>0?(n.addClass("bbi-designer-close").removeClass("bbi-designer-search"),f=this.filterItems(t.data("BoldBIDashboardListBox").model.dataSource,u),t.BoldBIDashboardListBox("hideAllItems"),t.BoldBIDashboardListBox("showItemsByIndices",f),this.setDisplayForListElements(i,f.length===0)):(t.BoldBIDashboardListBox("showAllItems"),this.setDisplayForListElements(i)))},n.prototype.onSearchBlur=function(n,t,i){var r=this.bbdesigner$(i.target).val();r.length===0&&(n.addClass("bbi-designer-search").removeClass("bbi-designer-close"),this.bbdesigner$(i.target).val(""),t.BoldBIDashboardListBox("showAllItems"))},n.prototype.onSearchCloseClick=function(n,t,i,r){i.val("");t.BoldBIDashboardListBox("showAllItems");n.addClass("bbi-designer-search").removeClass("bbi-designer-close");this.setDisplayForListElements(r)},n.prototype.onSearchTextBoxFocusIn=function(n,t){var i;t?(i=n.find(".bbi-querydesigner-function-search"),i.addClass("e-focus")):(i=n.find(".bbi-querydesigner-column-search"),i.addClass("e-focus"))},n.prototype.onSearchTextBoxFocusOut=function(n,t){var i;t?(i=n.find(".bbi-querydesigner-function-search"),i.hasClass("e-focus")&&i.removeClass("e-focus")):(i=n.find(".bbi-querydesigner-column-search"),i.hasClass("e-focus")&&i.removeClass("e-focus"))},n.prototype.setDisplayForListElements=function(n,t){n?(this.functionListTd.css("display",BoldBIDashboard.isNullOrUndefined(t)?"block":t?"none":"block"),this.functionNoDataContainer.css("display",BoldBIDashboard.isNullOrUndefined(t)?"none":t?"block":"none")):(this.columnListTd.css("display",BoldBIDashboard.isNullOrUndefined(t)?"block":t?"none":"block"),this.columnNoDataContainer.css("display",BoldBIDashboard.isNullOrUndefined(t)?"none":t?"block":"none"))},n.prototype.resetSearchBox=function(){this.functionSearchBox.val("");this.columnSearchBox.val("");this.functionListbox.BoldBIDashboardListBox("showAllItems");this.columnListbox.BoldBIDashboardListBox("showAllItems");this.functionListTd.css("display","block");this.functionNoDataContainer.css("display","none");this.columnListTd.css("display","block");this.columnNoDataContainer.css("display","none");this.functionSearchIcon.addClass("bbi-designer-search").removeClass("bbi-designer-close");this.columnSearchIcon.addClass("bbi-designer-search").removeClass("bbi-designer-close")},n.prototype.filterItems=function(n,t){for(var r=[],i=0;i<n.length;i++)(t===""||n[i].Name.toLowerCase().startsWith(t.toLowerCase()))&&r.push(i);return r},n.prototype.enableButton=function(n,t){BoldBIDashboard.DashboardUtil.buttonEnable(n,t)},n.prototype.enableAddButton=function(n,t){t?n.removeClass("bbi-dbrd-dataalert-expression-add-disable"):n.addClass("bbi-dbrd-dataalert-expression-add-disable")},n.prototype.txtNameChanged=function(){var t=this.textBox.val(),n=this.expressionContainer.data("e-exp");t!==this.oldExpName?n&&n.isEdit&&t!==n.name||(n&&!n.isEdit||BoldBIDashboard.isNullOrUndefined(n))&&t.length!==0?this.enableButton(this.saveBtnTag,!0):this.enableButton(this.saveBtnTag,!1):(n&&n.isEdit&&t===n.name||(n&&!n.isEdit||BoldBIDashboard.isNullOrUndefined(n))&&t.length===0)&&this.enableButton(this.saveBtnTag,!1);this.oldExpName=t},n.prototype.txtExpChanged=function(){var t=this.textArea.val(),n=this.expressionContainer.data("e-exp");t!==this.oldVal||BoldBIDashboard.isNullOrUndefined(n)||!n.isEdit?(n&&n.isEdit&&t!==n.expression||n&&!n.isEdit||BoldBIDashboard.isNullOrUndefined(n))&&t.length!==0?(this.enableButton(this.saveBtnTag,!0),this.enableAddButton(this.addBtnTag,!1)):n.isEdit&&t===n.expression?(this.enableAddButton(this.addBtnTag,this.isAddButtonEnabled),this.enableButton(this.saveBtnTag,!1)):(this.enableButton(this.saveBtnTag,!1),this.enableAddButton(this.addBtnTag,!1)):(n&&n.isEdit&&t===n.expression||(n&&!n.isEdit||BoldBIDashboard.isNullOrUndefined(n))&&t.length===0)&&this.enableButton(this.saveBtnTag,!1);this.oldVal=t},n.prototype.updateTextArea=function(){var n=this.textArea.val();n&&n.length>0?n!==this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&this.textArea.removeClass("bbi-designer-txtmark"):this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark")},n.prototype.updateTextBox=function(){var n=this.textBox.val();n&&n.length>0?n!==this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&this.textBox.removeClass("bbi-designer-txtmark"):this.textBox.val(this.nameWaterMark).addClass("bbi-designer-txtmark")},n.prototype.addExpression=function(){this.resetSearchBox();this.requestValidation(!0);var n=this.textBox.val();this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(n))[0]})},n.prototype.requestValidation=function(n,t){var r=this.expressionContainer.data("e-exp"),u=this.textArea.val().trim(),i;r&&r.isEdit?(i=this.textBox.val(),i===this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&(i=""),u===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&(u=""),this.hasExpChanges(r,u)?i&&i.length===0||u&&u.length===0||!this.isValidName(i)||!/^[a-zA-Z0-9- _]*$/.test(i)?n?this.newExpression():this.expListClick(t):this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{method:"updateExpressionInfo",instance:this,dataInfo:{name:n?i:t,isSelectionChange:n?!1:!0}}):n?this.switchEditExp():this.expListClick(t)):r&&!r.isEdit||BoldBIDashboard.isNullOrUndefined(r)?u!=="Query Expression"?this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"clearExpression",dataInfo:n?null:{isSelectionChange:!0,name:t},instance:this}):n?this.clearExpression(!1):this.expListClick(t):n?this.newExpression():this.expListClick(t)},n.prototype.clearExpression=function(n,t){if(BoldBIDashboard.isNullOrUndefined(t))if(n)this.isAdd=!0,this.saveExpression();else{var i=this.getAvailableName();this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark");this.textBox.val(i);this.updateTextBox();this.enableButton(this.saveBtnTag,!1);this.enableAddButton(this.addBtnTag,!1)}else n?this.saveExpression(t):this.expListClick(t.name)},n.prototype.deleteEmtyExp=function(){var t=this,r=this.expLiTag.find("li"),n=null,i=this.bbdesigner$;r.each(function(r,u){for(var o=i(u).find(".e-list-text").text(),e=!0,f=0;f<t.customExpressions.length;f++)if(o===t.customExpressions[f].name){e=!1;break}if(e){n=i(u);return}});n&&n.remove()},n.prototype.getEmptyExp=function(){var n=this,i=this.expLiTag.find("li"),t=null,r=this.bbdesigner$;return i.each(function(i,u){for(var e=r(u).find(".e-list-text").text(),o=!0,f=0;f<n.customExpressions.length;f++)if(e===n.customExpressions[f].name){o=!1;break}if(o){t=e;return}}),t},n.prototype.switchEditExp=function(){var n=this,i=this.expLiTag.find("li"),t=!0,r=this.bbdesigner$;i.each(function(i,u){for(var e=r(u).find(".e-list-text").text(),o=!0,f=0;f<n.customExpressions.length;f++)if(e===n.customExpressions[f].name){o=!1;break}if(o){t=!1;n.expListClick(e);return}});t&&this.newExpression()},n.prototype.hasExpChanges=function(n,t){for(var i=0;i<this.customExpressions.length;i++)if(this.customExpressions[i].name===n.name&&t.indexOf("["+this.customExpressions[i].name+"]")===-1&&(this.customExpressions[i].name!==this.textBox.val()||this.customExpressions[i].expression!==t))return!0;return!1},n.prototype.newExpression=function(){var n=this.getAvailableName();this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark");this.textBox.val(n);this.updateTextBox();this.expressionContainer.data("e-exp",{isEdit:!1,name:""});this.appendExpList(n);this.enableButton(this.saveBtnTag,!1);this.enableAddButton(this.addBtnTag,!1);this.UpdateMiscellaneousList()},n.prototype.updateExpressionInfo=function(n,t){var i=this.textBox.val();if(n)t.isSelectionChange?this.expressionContainer.data("e-exp").isEdit?this.expressionValidation(ExpAction.Edit,t.isSelectionChange,t.name):this.expressionValidation(ExpAction.New,t.isSelectionChange,t.name):this.expressionValidation(ExpAction.Save);else if(t.isSelectionChange)this.expListClick(t.name);else{this.switchEditExp();i=this.textBox.val();this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(i))[0]})}},n.prototype.isValidName=function(n){for(var t=this.expressionContainer.data("e-exp"),i=0;i<this.customExpressions.length;i++)if(this.customExpressions[i].name===n&&(BoldBIDashboard.isNullOrUndefined(t)||t.isEdit&&t.name!==n))return!1;return!0},n.prototype.getAvailableName=function(){for(var n,u,i="Expression",r=[],t=0;t<this.customExpressions.length;t++)r.push(this.customExpressions[t].name);n=0;do n++,u=r.indexOf(i+n);while(u!==-1);return i+n},n.prototype.populateExpressions=function(){if(this.expLiTag.children().length>0&&this.expLiTag.empty(),!BoldBIDashboard.isNullOrUndefined(this.customExpressions)&&this.customExpressions.length>0){for(var n=0;n<this.customExpressions.length;n++)this.appendExpList(this.customExpressions[n].name);this.enableAddButton(this.addBtnTag,!0)}this.scrollerRefresh(this.bodyContainer)},n.prototype.updateExpList=function(n,t){var i=BoldBIDashboard.DashboardUtil.escapeSelector(n),r=BoldBIDashboard.DashboardUtil.escapeSelector(t);this.bbdesigner$("#"+this.id+"_li_"+r).remove();this.bbdesigner$("#"+this.id+"_li_"+i).unbind("click",this.bbdesigner$.proxy(this.expressionSelection,this,n));this.bbdesigner$("#"+this.id+"_"+i).unbind("click",this.bbdesigner$.proxy(this.removeExpression,this,n));this.bbdesigner$("#"+this.id+"_li_"+i+" .e-list-text").text(t);this.addTooltip(this.bbdesigner$("#"+this.id+"_li_"+i+" .e-list-text"),t);this.bbdesigner$("#"+this.id+"_li_"+i).attr("id",this.id+"_li_"+r);this.bbdesigner$("#"+this.id+"_"+i).attr("id",this.id+"_"+r);this.bbdesigner$("#"+this.id+"_li_"+r).bind("click",this.bbdesigner$.proxy(this.expressionSelection,this,t));this.bbdesigner$("#"+this.id+"_"+r).bind("click",this.bbdesigner$.proxy(this.removeExpression,this,t))},n.prototype.appendExpList=function(n,t){var f=BoldBIDashboard.DashboardUtil.escapeSelector(n),i=BoldBIDashboard.buildTag("li.e-user-select e-list e-state-default e-list-check bbi-designer-exp-list","",{},{id:this.id+"_li_"+f,name:n}),r=BoldBIDashboard.buildTag("a.e-chevron-right_01 bbi-remove-shadow","",{}),e=BoldBIDashboard.buildTag("span.e-list-text e-rel bbi-designer-content bbi-dbrd-designer-hoverable",n,{},{name:n}),u;r.append(e);u=BoldBIDashboard.buildTag("div.e-chk-image e-icon e-cross-circle bbi-dbrd-designer-hoverable","",{},{id:this.id+"_"+f,"data-tooltip":"Delete"});r.append(u);i.append(r);u.bind("click",this.bbdesigner$.proxy(this.removeExpression,this,n));i.bind("click",this.bbdesigner$.proxy(this.expressionSelection,this,n));i.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseUp,this.bbdesigner$.proxy(this.onListItemMouseUp,this));BoldBIDashboard.isNullOrUndefined(t)?this.expLiTag.append(i):t===0?(this.expLiTag.prepend(i),i.css({"border-bottom":"0.5px solid #c8c8c8"})):this.listContainer.find("ul>li:nth-child("+t+")").after(i);this.addTooltip(e,n);this.updateContainerBorder();this.bodyContainer.height()>this.listContainer.height()?this.bodyContainer.find(".e-content").removeClass("e-content"):this.scrollerRefresh(this.bodyContainer)},n.prototype.addTooltip=function(n,t){BoldBIDashboard.DashboardUtil.textWidth(t,"12px Heebo")>=n.width()&&n.attr("data-tooltip",t)},n.prototype.onListItemMouseUp=function(n){var t=this.bbdesigner$(n.target).closest("li"),i;t.hasClass("bbi-expression-user-selection-active")||(i=this,t.parent().children().each(function(){var n=i.bbdesigner$(this);n.removeClass("bbi-expression-user-selection-active");n.find("span").removeClass("bbi-expression-user-selection-active")}),t.addClass("bbi-expression-user-selection-active"),t.find("span").addClass("e-expression-user-selection-active"),this.isAddButtonEnabled=this.addBtnTag.hasClass("bbi-dbrd-dataalert-expression-add-disable")?!1:!0)},n.prototype.expressionSelection=function(n){this.requestValidation(!1,n)},n.prototype.renderFunctionList=function(n){this.ejFunctionList.setModel({dataSource:n.value,fields:{id:"ID",text:"Name"},selectedIndex:0});var t=this.ejFunctionList.getSelectedItems();this.optionClick(t[0]);this.resetSearchBox()},n.prototype.renderColumnList=function(n){this.ejColumnList.setModel({dataSource:n.value,fields:{text:"Name"},selectedIndex:0});this.resetSearchBox()},n.prototype.scrollerRefresh=function(n){n.data("BoldBIDashboardScroller")&&n.data("BoldBIDashboardScroller").refresh()},n.prototype.functionDblClick=function(){var i=this.bbdesigner$("#"+this.id+"_exp_designer_option_list").data("BoldBIDashboardListBox"),r=i.model.selectedItems,t=i.model.dataSource[r],n=null;t&&(t.CategoryName==="Logical"?(n=t.Name,this.caretPosition(n)):(n=t.Name+"()",this.caretPosition(n,!0,n.length)))},n.prototype.columnDblClick=function(){var i=this.bbdesigner$("#"+this.id+"_exp_designer_data_list").data("BoldBIDashboardListBox"),r=i.model.selectedItems,n=i.model.dataSource[r],t=null;n&&(t=n.HasDynamicParams===!0?"@{{:"+n.Value+"}}":"["+n.Name+"]",this.caretPosition(t,!1,t.length))},n.prototype.caretPosition=function(n,t,i){var u,f,r;n&&n.length>0&&(u=this.textArea.val(),u!==this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")?this.textArea.removeClass("bbi-designer-txtmark"):u===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&(u="",this.textArea.val(u).removeClass("bbi-designer-txtmark")),this.textArea.focus(),f=this.textArea[0],r=f.selectionStart,!BoldBIDashboard.isNullOrUndefined(i)&&t?(this.textArea.val(u.substring(0,r)+n+u.substring(r)),r=f.selectionEnd=r+i-1):BoldBIDashboard.isNullOrUndefined(i)||t?(this.textArea.val(u.substring(0,r)+n+u.substring(r)),r=f.selectionEnd=r):(this.textArea.val(u.substring(0,r)+n+u.substring(r)),r=f.selectionEnd=r+i),this.textArea.trigger("change"))},n.prototype.optionClick=function(n){n.data&&(this.bbdesigner$("#"+this.id+"_exp_designer_desc_heading").text("Description"),this.bbdesigner$("#"+this.id+"_exp_designer_example_heading").text("Example"),this.bbdesigner$("#"+this.id+"_exp_designer_desc_content").text(n.data.Description),this.bbdesigner$("#"+this.id+"_exp_designer_example_content").text(n.data.Example))},n.prototype.removeNestedExpression=function(n){var i=[],r,t,u;for(this.listContainer.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(n)).remove(),t=this.customExpressions.length-1;t>=0;t--)(this.customExpressions[t].name===n||this.customExpressions[t].expression.indexOf("["+n+"]")>-1)&&(i.push(this.customExpressions[t]),this.customExpressions.splice(t,1));if(i.length>0)for(r=[],t=i.length-1;t>=0;t--)if(r=this.removeNestedExpression(i[t].name),r.length>0)for(u=0;u<r.length;u++)i.push(r[u]);return i},n.prototype.removeExpression=function(n){this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.removeExpression,this.locale.dataSource.removeExpressionText,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{expressionName:n},instance:this,method:"conformDelete"})},n.prototype.conformRemoveExpression=function(n){var u=[],f=[],i,t,r,e,o;if(this.listContainer.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(n)).remove(),this.updateContainerBorder(),!BoldBIDashboard.isNullOrUndefined(this.customExpressions)&&this.customExpressions.length>0){for(t=this.customExpressions.length-1;t>=0;t--)if(this.customExpressions[t].name===n){u.push(this.customExpressions[t].name);f.push(this.customExpressions[t].expression);this.customExpressions.splice(t,1);break}if(i=this.removeNestedExpression(n),!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0)for(t=i.length-1;t>=0;t--)u.push(i[t].name),f.push(i[t].expression);this.serverValidationExp({selectedExpression:"",name:u,expression:f},ExpAction.Remove);r=this.customExpressions.length;r>0?(this.expListClick(this.customExpressions[r-1].name),this.deleteEmtyExp(),this.enableAddButton(this.addBtnTag,!0)):r===0&&this.expLiTag.children().length>0&&this.expLiTag.empty()}this.expLiTag.children().length===0&&(e=this.getAvailableName(),this.appendExpList(e),this.textBox.val(e),this.updateTextBox(),this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark"),this.expressionContainer.data("e-exp",{isEdit:!1,name:""}),this.enableAddButton(this.addBtnTag,!1));this.scrollerRefresh(this.bodyContainer);this.UpdateMiscellaneousList();o=this.textBox.val();this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(o))[0]})},n.prototype.conformDelete=function(n,t){n&&this.conformRemoveExpression(t.expressionName)},n.prototype.expListClick=function(n){for(var i,r=!1,t=0;t<this.customExpressions.length;t++)if(n===this.customExpressions[t].name){this.textBox.val(this.customExpressions[t].name);this.textArea.val(this.customExpressions[t].expression);this.updateTextBox();this.updateTextArea();this.textArea.focus();i=this.textArea[0];i.selectionStart=i.selectionEnd=this.customExpressions[t].expression.length;this.expressionContainer.data("e-exp",{isEdit:!0,name:this.customExpressions[t].name,expression:this.customExpressions[t].expression});r=!0;this.enableButton(this.saveBtnTag,!1);break}r||(this.textBox.val(n),this.updateTextBox(),this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark"),this.enableButton(this.saveBtnTag,!1),this.enableAddButton(this.addBtnTag,!1),this.expressionContainer.data("e-exp",null));this.UpdateMiscellaneousList()},n.prototype.updateContainerBorder=function(){this.listContainer.css("border-top-width",this.listContainer.find("li").length===0?"0px":"1px")},n.prototype.wiredEvents=function(){this.bbdesigner$("#"+this.id+"_exp_designer_option_list").bind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.functionDblClick,this));this.bbdesigner$("#"+this.id+"_exp_designer_data_list").bind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.columnDblClick,this));this.bbdesigner$("#"+this.id+"_exp_designer_closebutton").on("click",this.bbdesigner$.proxy(this.closeDialog,this))},n.prototype.unWiredEvents=function(){this.bbdesigner$("#"+this.id+"_exp_designer_option_list").unbind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.functionDblClick,this));this.bbdesigner$("#"+this.id+"_exp_designer_data_list").unbind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.columnDblClick,this));this.bbdesigner$("#"+this.id+"_exp_designer_closebutton").unbind("click",this.bbdesigner$.proxy(this.closeDialog,this));this.functionSearchBox.off("keyup",this.bbdesigner$.proxy(this.onSearchText,this));this.columnSearchBox.off("keyup",this.bbdesigner$.proxy(this.onSearchText,this));this.functionSearchBox.off("blur",this.bbdesigner$.proxy(this.onSearchBlur,this));this.columnSearchBox.off("blur",this.bbdesigner$.proxy(this.onSearchBlur,this));this.expSearchIcon.off("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this));this.expSearchIcon.off("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this))},n.prototype.openExpression=function(){var t,s,i,u,r,l,f,e,n,a;this.dataAlert.element.find("#"+this.dataAlert.id+"_container").css("display","none");this.resetDesigner(!0);t=new BoldBIDashboard.Dashboard.ExpressionDialogModel;s=new BoldBIDashboard.Dashboard.ExpressionHelper;t.FunctionUI={Selected:BoldBIDashboard.Dashboard.FieldName.All,State:0};t.Datasource=s.getMultipleData();var o=t.Datasource,h=[],c=[];if(o.length>1){for(i=[],n=0;n<o.length;n++)i=i.concat(o[n].Value);for(i.sort(function(n,t){return n.ID>t.Name?1:t.Name>n.ID?-1:0}),u=0;u<i.length;u++)c.indexOf(i[u].ID)===-1&&(c.push(i[u].ID),h.push(i[u]));t.Datasource.unshift({ID:0,Name:BoldBIDashboard.Dashboard.FieldName.All,Value:h})}if(this.ejFunctionDropdown.setModel({fields:{id:"ID",text:"Name",value:"Value"},dataSource:t.Datasource,enabled:t.FunctionUI.State===BoldBIDashboard.Dashboard.State.Enable}),this.ejFunctionDropdown.selectItemByText(t.FunctionUI.Selected),r=new BoldBIDashboard.Dashboard.ExpressionDialogModel,l=new BoldBIDashboard.Dashboard.ExpressionHelper,r.FunctionUI={Selected:BoldBIDashboard.Dashboard.FieldName.All,State:0},r.Datasource=l.getDaMultipleColumnData(this.dataSourceFields),f=r.Datasource,e=[],f.length>1){for(n=0;n<f.length;n++)f[n].Name!=="Parameters"&&(e=e.concat(f[n].Value));e.sort(function(n,t){return n.ID>t.ID?1:t.ID>n.ID?-1:0});r.Datasource.unshift({ID:0,Name:BoldBIDashboard.Dashboard.FieldName.All,Value:e})}this.ejColumnDropdown.setModel({fields:{id:"ID",text:"Name",value:"Value"},dataSource:r.Datasource,enabled:!0});this.ejColumnDropdown.selectItemByText(r.FunctionUI.Selected);this.customExpressions.length>0?(this.populateExpressions(),this.expListClick(this.customExpressions[0].name)):this.newExpression();a=this.textBox.val();this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(a))[0]});this.refreshListScroller()},n.prototype.refreshListScroller=function(){var t=this.ejFunctionList,n;t.scrollerObj.model.scrollTop=0;n=this.ejColumnList;n.scrollerObj.model.scrollTop=0;this.ejFunctionList.refresh(!0);this.ejColumnList.refresh(!0)},n.prototype.confirmAction=function(n){if(n){var i=this.textBox.val(),t=(new BoldBIDashboard.DashboardDesignerUtility.ExpressionParsor).parseErrors(this.textArea.val(),this.provider);t&&t.length>0?this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.failedToParseExp,IconType.errors,AlertType.Alert,!0,t[0]):this.isAvaliableNames(i)?this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""):this.serverValidationExp({selectedExpression:this.expressionContainer.data("e-exp").name===""?this.textBox.val():this.expressionContainer.data("e-exp").name,name:this.textBox.val(),expression:this.textArea.val()},ExpAction.Close)}else this.closeExpressionDialog(),this.hideExpIndicator()},n.prototype.closeConfirmation=function(){var i=this.expressionContainer.data("e-exp"),n,t;i&&i.isEdit?(n=this.textBox.val(),t=this.textArea.val().trim(),n===this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&(n=""),t===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&(t=""),!this.hasExpChanges(i,t)||n&&n.length===0||t&&t.length===0||!this.isValidName(n)||!/^[a-zA-Z0-9- _]*$/.test(n)?(this.hideExpIndicator(),this.closeExpressionDialog()):this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this,dataInfo:{name:n}})):this.textArea.val()!=="Query Expression"&&this.textArea.val()!==""?this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.SaveExpression,this.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this,dataInfo:{name:this.textBox.val()}}):this.closeExpressionDialog()},n.prototype.closeExpression=function(){this.resetSearchBox();this.closeConfirmation()},n.prototype.resetDesigner=function(n){n&&this.expLiTag.children().length>0&&(this.expLiTag.empty(),this.scrollerRefresh(this.bodyContainer));this.textBox.val("");this.textArea.val("");this.bbdesigner$("#"+this.id+"_exp_designer_desc_heading").text("");this.bbdesigner$("#"+this.id+"_exp_designer_example_heading").text("");this.bbdesigner$("#"+this.id+"_exp_designer_desc_content").text("");this.bbdesigner$("#"+this.id+"_exp_designer_example_content").text("")},n.prototype.saveExpression=function(n){this.resetSearchBox();this.expressionContainer.data("e-exp")&&this.expressionContainer.data("e-exp").isEdit?n&&n.isSelectionChange?this.expressionValidation(ExpAction.Edit,n.isSelectionChange,n.name):this.expressionValidation(ExpAction.Edit):n&&n.isSelectionChange?this.expressionValidation(ExpAction.New,n.isSelectionChange,n.name):this.expressionValidation(ExpAction.New)},n.prototype.expressionValidation=function(n,t,i){var o=this.expressionContainer.data("e-exp"),u=this.textBox.val(),r=this.textArea.val().trim(),f,e;if(this.textArea.val(r),f=!1,u===this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&(u=""),r===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&(r=""),BoldBIDashboard.isNullOrUndefined(u)||u.length!==0?BoldBIDashboard.isNullOrUndefined(r)||r.length!==0?this.isValidName(u)?/^[a-zA-Z0-9- _]*$/.test(u)===!1?(this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.expHasSpecialChar,IconType.warning,AlertType.Alert,!1,""),f=!0):r.indexOf("["+u+"]")!==-1?(this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.expNotInColumn,IconType.errors,AlertType.Alert,!1,""),f=!0):this.isBalanceBrackets(r)?this.isAvaliableNames(u)?(this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""),f=!0):(r.replace(new RegExp("s"),"").toUpperCase().indexOf("TOTAL(")>-1||this.rowExpression.some(function(n){return r.replace(new RegExp("s"),"").toUpperCase().indexOf(n+"(")>-1}))&&!this.isValidRunningExpression(r)?f=!0:o&&o.isEdit?(e=(new BoldBIDashboard.DashboardDesignerUtility.ExpressionParsor).parseErrors(r,this.provider),e&&e.length>0?this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",e[0],IconType.errors,AlertType.Alert,!1,""):this.serverValidationExp({selectedExpression:o.name,name:u,expression:r,isSelectionChange:t,selectedExp:i},n)):(e=(new BoldBIDashboard.DashboardDesignerUtility.ExpressionParsor).parseErrors(r,this.provider),e&&e.length>0?(this.isAdd=!1,this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",this.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!0,e[0])):this.serverValidationExp({selectedExpression:"",name:u,expression:r,isSelectionChange:t,selectedExp:i},n)):(this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.invalidExpSyntax,IconType.errors,AlertType.Alert,!1,""),f=!0):(this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""),f=!0):(this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.emptyExp,IconType.warning,AlertType.Alert,!1,""),f=!0):(this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.emptyExpName,IconType.warning,AlertType.Alert,!1,""),f=!0),t&&f)this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(o.name))[0]})},n.prototype.isAvaliableNames=function(n){for(var r=this.expressionContainer.data("e-exp"),i=this.ejColumnDropdown.model.dataSource[0].Value,t=0;t<i.length;t++)if(i[t].Name.toLowerCase()===n.toLowerCase()&&r.name.toLowerCase()!==n.toLowerCase())return!0;return!1},n.prototype.isValidRunningExpression=function(n){for(var f,r,e,h,c,v,o,l,y,u=this,i=!0,t=n,a=this.ejColumnDropdown.model.dataSource[0].Value,s=0;s<a.length;s++)f=a[s].Name,t.indexOf("["+f+"]")>-1&&/^[a-zA-Z0-9- _]*$/.test(f)===!0&&(t=t.replace("["+f+"]",""));if(r=null,t.replace(new RegExp("s"),"").toUpperCase().indexOf("TOTAL(")>-1&&(r=t.replace("TOTAL","").toUpperCase().split("[+-*/]+"),r.forEach(function(n){u.rowExpression.some(function(t){return n.indexOf(t)>-1})&&(i=!1,u.dataAlert.designerInstance.modules.util.alertDialog(u.locale.alertDialogTitle.queryExpression,u.locale.dataSource.errorMessageForTotalExpressionContainsRowExpression,IconType.warning,AlertType.Alert,!1,""))})),i){for(this.rowExpression.forEach(function(n){t.replace(new RegExp("s"),"").toUpperCase().indexOf(n+"(")>-1&&(r=t.toUpperCase().replace(n,"").split("[+-*/]+"))}),e=0,h=r;e<h.length;e++)for(c=h[e],i=!1,v=!isNaN(parseInt(c.replace("(","").replace(")",""),10)),o=0,l=this.aggregationList.filter(function(n){return n!=="TOTAL"||n!=="RUNNINGSUM"||n!=="RUNNINGAVG"||n!=="RUNNINGCOUNT"||n!=="RUNNINGMAX"||n!=="RUNNINGMIN"});o<l.length;o++)if(y=l[o],c.toString().replace(new RegExp("s"),"").toUpperCase().indexOf(y)>-1||v){i=!0;break}i||this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.parameterMustBeAnAggregated,IconType.warning,AlertType.Alert,!1,"")}return i},n.prototype.isBalanceBrackets=function(n){for(var t=0,i=0;i<n.length;i++)if(n[i]==="("?t++:n[i]===")"&&t--,t<0)return!1;return t>0?!1:!0},n.prototype.UpdateMiscellaneousList=function(){for(var r,u,t=this.ejColumnDropdown.model.dataSource[0].Value,i=this.ejColumnDropdown.model.dataSource[this.ejColumnDropdown.model.dataSource.length-1].Value,e=i.length,f=!1,o=function(n){var r=t.indexOf(t.filter(function(t){return t.Name===i[n].Name})[0]);r>-1&&t.splice(r,1)},n=0;n<e;n++)o(n);for(n=0;n<e;n++)i.pop();for(n=0;n<this.customExpressions.length;n++){for(r={ID:t.length+n,Name:this.customExpressions[n].name,Value:this.customExpressions[n].expression,DataType:null},f=!1,u=0;u<t.length;u++)if(t[u].Name===r.Name){f=!0;break}f||t.push(r);i.push(r)}this.ejColumnDropdown.model.dataSource[0].Value=t;this.ejColumnDropdown.model.dataSource[this.ejColumnDropdown.model.dataSource.length-1].Value=i;this.ejColumnList.refresh(!0)},n.prototype.serverValidationExp=function(n,t){var i=this.textBox.val(),r=this.textArea.val();this.dataAlert.designerInstance.modules.util.doAjaxPost("POST",this.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.dagetexpressioncolumninfo,{action:BoldBIDashboard.DashboardUtil.DesignerAction.GetExpressionColumnInfo,data:JSON.stringify({datasourceId:this.dataAlert.datasourceId,expressionName:i,expressionText:r})},{fnction:this.bbdesigner$.proxy(this.updateExpressionResult,this,n,t),indicator:[this.bbdesigner$.proxy(this.showExpIndicator,this),this.bbdesigner$.proxy(this.hideExpIndicator,this)]},!0,!0)},n.prototype.updateExpressionResult=function(n,t,i){var s,c,h,e,r;if(i.Status){if(i&&i.Data.Data){var u=this.expressionContainer.data("e-exp"),f=n.name,o=n.expression;if(t===ExpAction.New){if(s=!0,this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(f)).length===0)c=this.getEmptyExp(),this.updateExpList(c,f);else{for(h=!0,r=0;r<this.customExpressions.length;r++)if(this.customExpressions[r].name===f){h=!1;break}h||(s=!1,this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""))}if(s){if(this.customExpressions.push({name:f,expression:o}),this.expressionContainer.data("e-exp",{isEdit:!0,name:f,expression:o}),this.enableButton(this.saveBtnTag,!1),this.enableAddButton(this.addBtnTag,!0),this.isAdd){this.switchEditExp();e=this.textBox.val();this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e))[0]});this.isAdd=!1}if(n.isSelectionChange){this.expListClick(n.selectedExp);e=this.textBox.val();this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e))[0]})}}}else if(t===ExpAction.Edit){for(r=0;r<this.customExpressions.length;r++)this.customExpressions[r].expression.indexOf("["+u.name+"]")!==-1&&(this.customExpressions[r].expression=this.customExpressions[r].expression.replace("["+u.name+"]","["+f+"]"));for(r=0;r<this.customExpressions.length;r++)if(this.customExpressions[r].name===u.name){if(this.customExpressions[r].name=f,this.customExpressions[r].expression=o,this.customExpressions[r].name!==u.name&&this.updateExpList(u.name,f),this.expressionContainer.data("e-exp",{isEdit:!0,name:this.customExpressions[r].name,expression:this.customExpressions[r].expression}),this.enableButton(this.saveBtnTag,!1),this.enableAddButton(this.addBtnTag,!0),n.isSelectionChange){this.expListClick(n.selectedExp);e=this.textBox.val();this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e))[0]})}break}}else if(t===ExpAction.Save){for(r=0;r<this.customExpressions.length;r++)if(this.customExpressions[r].name===u.name){this.customExpressions[r].name=f;this.customExpressions[r].expression=o;this.customExpressions[r].name!==u.name&&this.updateExpList(u.name,f);this.enableButton(this.saveBtnTag,!1);this.switchEditExp();e=this.textBox.val();this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e))[0]});break}}else if(t===ExpAction.Close){for(u.name===""&&this.customExpressions.push({name:this.textBox.val(),expression:this.textArea.val()}),r=0;r<this.customExpressions.length;r++)if(this.customExpressions[r].name===u.name){this.customExpressions[r].name=f;this.customExpressions[r].expression=o;this.customExpressions[r].name!==u.name&&this.updateExpList(u.name,f);break}this.closeExpressionDialog();this.hideExpIndicator()}else t===ExpAction.Remove&&(this.customExpressions.length===0?this.enableAddButton(this.addBtnTag,!1):this.enableAddButton(this.addBtnTag,!0));this.UpdateMiscellaneousList();(t===ExpAction.New||t===ExpAction.Save||t===ExpAction.Edit)&&this.updateSuccessMessage()}}else if(this.enableButton(this.saveBtnTag,!0),this.enableAddButton(this.addBtnTag,!1),BoldBIDashboard.isNullOrUndefined(i.StatusMessage)?this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",this.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!1,""):this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",this.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!0,i.StatusMessage),n.isSelectionChange)this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(this.textBox.val()))[0]})},n.prototype.updateSuccessMessage=function(){var n=this;this.bbdesigner$("#"+this.id+"_exp_success_message_wrap").css("display","block");setTimeout(function(){n.bbdesigner$("#"+n.id+"_exp_success_message_wrap").css("display","none")},3e3)},n.prototype.showExpIndicator=function(){BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_add_btn"),!1);BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_save_btn"),!1);BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_close_btn"),!1);this.ejIndicator.show()},n.prototype.hideExpIndicator=function(){BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_add_btn"),!0);BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_save_btn"),!1);BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_close_btn"),!0);this.ejIndicator.hide()},n.prototype.closeExpressionDialog=function(){BoldBIDashboard.DashboardUtil.invokeMethod(this.dataAlert,this.targetMethod,[this.customExpressions]);this.destroy();this.dataAlert.element.find("#"+this.dataAlert.id+"_container").css("display","block")},n.prototype.destroy=function(){this.unWiredEvents();BoldBIDashboard.DashboardUtil.destroyEjObjects(this.bbdesigner$("#"+this.id+"_exp_designer"));this.bbdesigner$("#"+this.id+"_exp_designer").length>0&&this.bbdesigner$("#"+this.id+"_exp_designer").remove()},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DataAlert.CustomExpressions",InternalDataAlertExpressions,window),function(n){var t=function(){function n(n,t,i){this.id=n;this.element=t;this.designer=i}return n.prototype.render=function(){var n=this.designer.modules.dataAlertDialog;n.dashboardWritePermission=!0;n.renderDialogElements(this.element,this.designer.model.dataAlert)},n.prototype.postRender=function(){this.designer.GetLocalizationFormat();this.render(0)},n.prototype.setContainerSize=function(){},n.prototype.renderCanvas=function(){},n.prototype.previewDashboard=function(){},n.prototype.renderCells=function(){},n.prototype.renderCellsForExport=function(){},n.prototype.updateSizeForScrollExport=function(){},n.prototype.resizeCombineWidgetForWidgetExport=function(){},n.prototype.wireEvents=function(){},n.prototype.unwireEvents=function(){},n}();n.DataAlertMode=t}(BoldBIDashboard||(BoldBIDashboard={}));InternalDateRangePopup=function(){function n(n){this.parameterList=[];this.filterInfo=new DimensionFilterInfo;this.locale=null;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.dashboardDesigner._id;this.dateFormat=this.dashboardDesigner.model.localeSettings.dateFormat+" "+this.dashboardDesigner.model.localeSettings.timeFormat}return n.prototype.renderDateRangePopup=function(n){var r=n+"_dateRange_popup",p=this.dashboardDesigner.element.find("#"+r);if((BoldBIDashboard.isNullOrUndefined(this.dateRangePopUp)||this.dateRangePopUp.length===0)&&p.length===0){this.dateRangePopUp=BoldBIDashboard.buildTag("div.bbi-daterange-popup","",{},{id:n+"_dateRange_popup"});var u=BoldBIDashboard.buildTag("div.bbi-date-range-checkBbox","",{}),f=BoldBIDashboard.buildTag("table","",{width:"100%"},{}),t=BoldBIDashboard.buildTag("tr","",{},{});this.renderRadioButton("Ranges",n,n+"_RangeBtn",!0,t,this.onRangeTypeChange,this);this.renderRadioButton("Start Date",n,n+"_startBtn",!1,t,this.onRangeTypeChange,this);this.renderRadioButton("End Date",n,n+"_endBtn",!1,t,this.onRangeTypeChange,this);var i=BoldBIDashboard.buildTag("div.bbi-date-range-field","",{},{id:n+"_dateRange_fieldDiv"}),e=BoldBIDashboard.buildTag("div","",{"margin-top":"6px"},{id:n+"_dateRange_start_tr"}),o=BoldBIDashboard.buildTag("div","",{"margin-top":"12px"},{id:n+"_dateRange_end_tr"}),s=BoldBIDashboard.buildTag("table","",{width:"100%"},{}),h=BoldBIDashboard.buildTag("tr","",{},{}),c=BoldBIDashboard.buildTag("table","",{width:"100%"},{}),l=BoldBIDashboard.buildTag("tr","",{},{}),a=BoldBIDashboard.buildTag("div.bbi-date-range-popup-footer","",{},{}),v=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary bbi-date-range-foot-btn",this.locale.dialogOptions.applyButtonText,{},{id:n+"_dateRange_okBtn",type:"button",disabled:"disabled"}),y=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left bbi-date-range-foot-btn",this.locale.dialogOptions.cancelButtonText,{},{id:n+"_dateRange_cancelBtn",type:"button"});this.dashboardDesigner.element.append(this.dateRangePopUp);f.append(t);u.append(f);this.dateRangePopUp.append(u);e.append(s);s.append(h);this.renderDateRangePicker(n+"_dateRange_Start",n,"Start",h,this.onPickerChange,this);o.append(c);c.append(l);this.renderDateRangePicker(n+"_dateRange_end",n,"End",l,this.onPickerChange,this);i.append(e);i.append(o);this.dateRangePopUp.append(i);a.append(y).append(v);this.dateRangePopUp.append(a);this.dateRangePopUp.css("z-index",this.bbdesigner$("#"+this.id+"_query_filter_dialog_wrapper").css("z-index")+1);v.on("click",this.bbdesigner$.proxy(this.updateDateRangeAttr,this,n));y.on("click",this.bbdesigner$.proxy(this.closeDateRangePopup,this,n));i.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup bbi-designer-loader",template:this.dashboardDesigner.getWaitingPopupTemplate()});this.resetAttributes(this.dateRangePopUp,n)}else this.dateRangePopUp=!BoldBIDashboard.isNullOrUndefined(this.dateRangePopUp)&&this.dateRangePopUp.length>0&&r===this.dateRangePopUp[0].id?this.dateRangePopUp:this.dashboardDesigner.element.find("#"+n+"_dateRange_popup");return this.dateRangePopUp},n.prototype.renderDateParameter=function(n,t,i){var r=this.parameterList,e,u,f;r=r.filter(function(n){return n.dataType===DynamicParameterDataType.Date});e=BoldBIDashboard.buildTag("td","",{"padding-left":i==="End"?"20px":"10px",display:"none"},{id:t+"_query_date_"+i+"_parameter_dropdown"});u=BoldBIDashboard.buildTag("input.e-textbox","",{height:"30px",width:"160px"},{type:"text",id:t+"_date_"+i+"_param"});e.append(u);f=!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0?r[0].name:null;u.BoldBIDashboardDropDownList({width:"130px",height:"26px",popupWidth:u.width(),field:{text:"text",value:"value",name:"name",id:"id"},dataSource:r,enabled:!0,value:f,selectedIndex:null,showRoundedCorner:!0,cssClass:"bbi-dbrd-control",change:this.bbdesigner$.proxy(this.parameterBtwChangeEvent,this,t,i,r)});n.append(e);this.dashboardDesigner.element.find("#"+t+"_date_"+i+"_param").data("ParameterInfos",{Name:f,Id:r.length>0?r[0].parameterID:f})},n.prototype.parameterBtwChangeEvent=function(n,t,i,r){var f=this.dashboardDesigner.element.find("#"+n+"_date_"+t+"_param"),u=r.model.dataSource.filter(function(n){return n.name===r.value}),e={Name:r.value,Id:u.length>0?u[0].parameterID:r.value};f.data("ParameterInfos",e)},n.prototype.resetAttributes=function(n,t){n.removeAttr("IsLoaded");n.removeAttr("Range");n.removeAttr("StartDate");n.removeAttr("EndDate");n.removeAttr("IsPopulate");this.getStartPicker(t).removeAttr("minDateTime");this.getEndPicker(t).removeAttr("minDateTime")},n.prototype.showLoadingIndicator=function(n){var t=this.getFieldDiv(n);t.BoldBIDashboardWaitingPopup("show");this.getRangeRadioBtn(n).prop("disabled",!0);this.getStartRadioBtn(n).prop("disabled",!0);this.getEndRadioBtn(n).prop("disabled",!0)},n.prototype.hideLoadingIndicator=function(n){var t=this.getFieldDiv(n);t.BoldBIDashboardWaitingPopup("hide");this.getRangeRadioBtn(n).prop("disabled",!1);this.getStartRadioBtn(n).prop("disabled",!1);this.getEndRadioBtn(n).prop("disabled",!1)},n.prototype.populateDateRangeDrpDwn=function(n,t,i,r,u,f,e){this.targetTag.find("#"+n+"_dateRange_multidDrpDwn").off("click",this.bbdesigner$.proxy(this.showPopupContainer,this,n,t,i,r,e,f));this.targetTag.find("#"+n+"_dateRange_multidDrpDwn").on("click",this.bbdesigner$.proxy(this.showPopupContainer,this,n,t,i,r,e,f));this.populateDateRangePopup(n,u)},n.prototype.resetDateRangeDrpDwn=function(n){BoldBIDashboard.isNullOrUndefined(this.dateRangePopUp)?null:this.dateRangePopUp.remove();this.dateRangePopUp=null;this.renderDateRangePopup(n)},n.prototype.renderDateRangeDrpDwn=function(n,t,i,r,u,f,e){this.filterInfo=u;this.targetTag=t;var o=BoldBIDashboard.buildTag("div.list bbi-popup-button","",{width:e?e:"144px"},{id:n+"_dateRange_multidDrpDwn","e-target":"bbi-daterange-popup"}),s=BoldBIDashboard.buildTag("div.bbi-date-range-drp-dwn-text","",{width:e?e-39+"px":"calc(100% - 35px)"},{id:n+"_dateRange_multiDrpDwn_txt",text:"Date Options"}),h=BoldBIDashboard.buildTag("div.bbi-date-range-drp-dwn-btn","",{},{}),c=BoldBIDashboard.buildTag("span.bbi-designer-ejwidgets-updown e-icon e-arrow-sans-down bbi-date-range-drpdwn-icon","",{});h.append(c);o.append(s).append(h);s.text("Date Options");t.append(o);o.attr("e-targetId",n+"_dateRange_popup");o.bind("click",this.bbdesigner$.proxy(this.showPopupContainer,this,n,t,i,r,e,f));BoldBIDashboard.isNullOrUndefined(this.filterInfo)||this.populateDateRangePopup(n,this.filterInfo)},n.prototype.updateIconIndication=function(n,t){var i=this.getDateRangeDrpDwn(t);n.css("display")==="block"?(i.find(".bbi-designer-ejwidgets-updown").removeClass("e-arrow-sans-down").addClass("e-arrow-sans-up"),i.addClass("e-focus"),this.enableApplyButton(t)):(i.find(".bbi-designer-ejwidgets-updown").removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down"),i.removeClass("e-focus"))},n.prototype.renderRadioButton=function(n,t,i,r,u){var e=this.bbdesigner$("<td unselectable='on'/>"),f,o;u.append(e);f=BoldBIDashboard.buildTag("div","",{},{});o={callBackInstance:this,callBackMethod:"onRangeTypeChange",optionalArgs:t,groupName:"formatting",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:i,label:n,isChecked:r,value:t}]};this.selectRadioButton=new BoldBIDashboard.Dashboard.RadioButton(o,f);e.append(f)},n.prototype.renderDateRangePicker=function(n,t,i,r,u,f){var e=BoldBIDashboard.buildTag("td","",{}),h=BoldBIDashboard.buildTag("Label.bbi-designer-add-label",i,{},{type:"label"}),o=BoldBIDashboard.buildTag("td","",{"padding-left":i==="Start"?"9px":"15px",display:"block"},{id:n}),s=BoldBIDashboard.buildTag("input.bbi-popup-button","",{},{type:"text",id:n+"_picker"});e.append(h);o.append(s);r.append(e);this.renderDateParameter(r,t,i);r.append(o);s.BoldBIDashboardDateTimePicker({width:"201px",height:"26px",change:this.bbdesigner$.proxy(u,f,t),cssClass:"bbi-designer-border bbi-popup-button e-dashboarddesigner-widget"})},n.prototype.showPopupContainer=function(n,t,i,r,u,f){var e=this.renderDateRangePopup(n),a=this.dashboardDesigner.element.find("#"+n+"_param"),v=a.data("selectedType"),h=v!=="Parameters",l;this.parameterList=h?this.parameterList:this.dashboardDesigner.modules.storeParameter.getParameterDataSource();var c=e.height(),o=t,y=e.css("display")==="block",s=o.offset();e.css({display:y?"none":"block","z-index":BoldBIDashboard.getMaxZindex()});var p=window.innerHeight-(s.top+o.height()),w=p>c,b=w?s.top+o.height()+2:s.top-c-4;e.offset({left:s.left+parseFloat(o.css("padding-left"))-(u?26:126),top:b});h?this.updateIconIndication(e,n):e.find("#"+n+"_dateRange_okBtn").removeAttr("disabled");e.css("display")==="block"&&h&&(BoldBIDashboard.isNullOrUndefined(e.attr("IsLoaded"))||e.attr("IsLoaded")==="false"?(l=[{Id:r.Id,Name:r.Name,SummaryType:"None",Sorting:"Ascending",FieldType:"Dimensions",MeasureFormatting:null,DateTimeFormat:"Date",FilterInfo:null}],this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.getDateRange,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.FilterAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.getDateRange,fieldInfo:l,dataSetId:i,type:"date",dateRangeType:f,isQueryDesignerMode:this.dashboardDesigner.isQueryDesignerMode})},{fnction:this.bbdesigner$.proxy(this.setFieldInformation,this,n),indicator:[this.bbdesigner$.proxy(this.showLoadingIndicator,this,n),this.bbdesigner$.proxy(this.hideLoadingIndicator,this,n)]})):this.setDatePopupValues(n))},n.prototype.setFieldInformation=function(n,t){var e=this.renderDateRangePopup(n),o=this.dashboardDesigner.element.find("#"+n+"_dateRange_Start_picker"),s=this.dashboardDesigner.element.find("#"+n+"_dateRange_end_picker"),u=o.data("BoldBIDashboardDateTimePicker"),f=s.data("BoldBIDashboardDateTimePicker"),i,r;BoldBIDashboard.isNullOrUndefined(u.model)||(u.model.dateTimeFormat=this.dateFormat,f.model.dateTimeFormat=this.dateFormat);i=BoldBIDashboard.format(new Date(t.MinValue),this.dateFormat);r=BoldBIDashboard.format(new Date(t.MaxValue),this.dateFormat);e.attr("isLoaded","true");o.attr("minDateTime",i).attr("maxDateTime",r);s.attr("minDateTime",i).attr("maxDateTime",r);u.setModel({minDateTime:i,maxDateTime:r});f.setModel({minDateTime:i,maxDateTime:r});e.attr("IsPopulate")==="true"?this.setDatePopupValues(n):(u.setModel({value:i}),f.setModel({value:r}))},n.prototype.setDatePopupValues=function(n){var t=this.renderDateRangePopup(n),o=BoldBIDashboard.isNullOrUndefined(t.attr("Range"))?DateFormatOption.Range.toString():t.attr("Range"),s=BoldBIDashboard.isNullOrUndefined(t.attr("StartDate"))?"":t.attr("StartDate"),h=BoldBIDashboard.isNullOrUndefined(t.attr("EndDate"))?"":t.attr("EndDate"),i="block",r="block",c=this.getStartTr(n),l=this.getEndTr(n),u=this.getRangeRadioBtn(n),f=this.getStartRadioBtn(n),e=this.getEndRadioBtn(n);o===DateFormatOption.StartDate.toString()?(u.prop("checked",!1),f.prop("checked",!0),e.prop("checked",!1),r="none",i="block"):o===DateFormatOption.EndDate.toString()?(u.prop("checked",!1),f.prop("checked",!1),e.prop("checked",!0),r="block",i="none"):(u.prop("checked",!0),f.prop("checked",!1),e.prop("checked",!1));c.css("display",i);l.css("display",r);this.getStartPicker(n).data("BoldBIDashboardDateTimePicker").setModel({value:s.length===0?this.getStartPicker(n).attr("minDateTime"):s});this.getEndPicker(n).data("BoldBIDashboardDateTimePicker").setModel({value:h.length===0?this.getEndPicker(n).attr("maxDateTime"):h});this.enableApplyButton(n)},n.prototype.closeDateRangePopup=function(n){var t=this.renderDateRangePopup(n);t.css("display","none");this.updateIconIndication(t,n)},n.prototype.updateDateFormatCondition=function(n,t){var i=this.getRangeRadioBtn(n),r=this.getStartRadioBtn(n),u=this.getEndRadioBtn(n),f="block",e="block",o=this.getStartTr(n),s=this.getEndTr(n);t===DateFormatOption.StartDate.toString()?(i.prop("checked",!1),r.prop("checked",!0),u.prop("checked",!1),e="none",f="block"):t===DateFormatOption.EndDate.toString()?(i.prop("checked",!1),r.prop("checked",!1),u.prop("checked",!0),e="block",f="none"):(i.prop("checked",!0),r.prop("checked",!1),u.prop("checked",!1));o.css("display",f);s.css("display",e)},n.prototype.populateDateRangePopup=function(n,t){var i,r;BoldBIDashboard.isNullOrUndefined(this.dateRangePopUp)?null:this.dateRangePopUp.remove();this.dateRangePopUp=null;i=this.renderDateRangePopup(n);this.filterInfo=t;this.getDateRangeDrpDwnTxt(n).text("Date Options");this.updateIconIndication(i,n);i.attr("IsPopulate","true");BoldBIDashboard.isNullOrUndefined(t)?(this.resetAttributes(i,n),this.updateDateFormatCondition(n,DateFormatOption.Range.toString())):(i.attr({StartDate:t.StartDate,EndDate:t.EndDate,Range:t.DateFormatCondition}),r=t.DateFormatCondition,this.updateDateFormatCondition(n,r))},n.prototype.updateDateRangeAttr=function(n){var t=this.renderDateRangePopup(n),i=this.getStartRadioBtn(n).prop("checked"),r=this.getEndRadioBtn(n).prop("checked"),u=this.getStartPicker(n).data("BoldBIDashboardDateTimePicker").getValue(),f=this.getEndPicker(n).data("BoldBIDashboardDateTimePicker").getValue();t.css("display","none");this.updateIconIndication(t,n);this.hideErrorIndicator(n);t.attr("StartDate",u);t.attr("EndDate",f);r?t.attr("Range",DateFormatOption.EndDate.toString()):i?t.attr("Range",DateFormatOption.StartDate.toString()):t.attr("Range",DateFormatOption.Range.toString())},n.prototype.hideErrorIndicator=function(n){var t=this.dashboardDesigner.element.find("#"+n).find(".e-error-tip");t.length>0&&t.css("display","none")},n.prototype.getDateRangeValues=function(n){var t=this.renderDateRangePopup(n),u="Range",f=BoldBIDashboard.isNullOrUndefined(t.attr("Range"))?DateFormatOption.Range.toString():t.attr("Range"),i,r;return u=f===DateFormatOption.StartDate.toString()?DateFormatOption.StartDate.toString():f===DateFormatOption.EndDate.toString()?DateFormatOption.EndDate.toString():DateFormatOption.Range.toString(),i=BoldBIDashboard.isNullOrUndefined(t.attr("StartDate"))?"":t.attr("StartDate"),r=BoldBIDashboard.isNullOrUndefined(t.attr("EndDate"))?"":t.attr("EndDate"),{StartDate:i,EndDate:r,DateFormatCondition:u,IsFilterApplied:i===""&&r===""?!1:!0}},n.prototype.onRangeTypeChange=function(n){var t=n.args.value,s=this.getStartRadioBtn(t).prop("checked"),h=this.getEndRadioBtn(t).prop("checked"),e=this.getStartTr(t),o=this.getEndTr(t),c=this.dashboardDesigner.element.find("#"+t+"_param"),u=c.data("selectedType"),f=u==="Parameters",i=BoldBIDashboard.isNullOrUndefined(this.parameterList)?f?this.dashboardDesigner.modules.storeParameter.getParameterDataSource():this.parameterList:this.parameterList,r;i=i.filter(function(n){return n.dataType===DynamicParameterDataType.Date});r=!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0?i[0].name:null;n.args.event.type==="change"&&(s?(o.css("display","none"),e.css("display","block"),f?this.dashboardDesigner.modules.queryFilter.setDataForDateDropdowns(t,r,null,u):null):h?(e.css("display","none"),o.css({display:"block","margin-top":"6px"}),f?this.dashboardDesigner.modules.queryFilter.setDataForDateDropdowns(t,null,r,u):null):(e.css("display","block"),o.css({display:"block","margin-top":"6px"}),f?this.dashboardDesigner.modules.queryFilter.setDataForDateDropdowns(t,r,r,u):null))},n.prototype.onPickerChange=function(n,t){t.isInteraction&&this.enableApplyButton(n)},n.prototype.enableApplyButton=function(n){var i=this.getStartPicker(n).data("BoldBIDashboardDateTimePicker").getValue(),r=this.getEndPicker(n).data("BoldBIDashboardDateTimePicker").getValue(),f=this.getStartPicker(n).attr("minDateTime"),t=this.getStartPicker(n).attr("maxDateTime"),e=this.getApplyBtn(n),o=this.getStartRadioBtn(n).prop("checked"),s=this.getEndRadioBtn(n).prop("checked"),u=!0;u=o?i!==f?!0:!1:s?r!==t?!0:!1:i!==t||r!==t?!0:!1;BoldBIDashboard.DashboardUtil.buttonEnable(e,u)},n.prototype.updateDateFormat=function(){this.dateFormat=this.dashboardDesigner.model.localeSettings.dateFormat+" "+this.dashboardDesigner.model.localeSettings.timeFormat},n.prototype.getRangeRadioBtn=function(n){return this.dashboardDesigner.element.find("#"+n+"_RangeBtn_rdo_input")},n.prototype.getStartRadioBtn=function(n){return this.dashboardDesigner.element.find("#"+n+"_startBtn_rdo_input")},n.prototype.getEndRadioBtn=function(n){return this.dashboardDesigner.element.find("#"+n+"_endBtn_rdo_input")},n.prototype.getDateRangeDrpDwn=function(n){return this.targetTag.find("#"+n+"_dateRange_multidDrpDwn")},n.prototype.getStartPicker=function(n){return this.dashboardDesigner.element.find("#"+n+"_dateRange_Start_picker")},n.prototype.getEndPicker=function(n){return this.dashboardDesigner.element.find("#"+n+"_dateRange_end_picker")},n.prototype.getStartTr=function(n){return this.dashboardDesigner.element.find("#"+n+"_dateRange_start_tr")},n.prototype.getEndTr=function(n){return this.dashboardDesigner.element.find("#"+n+"_dateRange_end_tr")},n.prototype.getDateRangeDrpDwnTxt=function(n){return this.targetTag.find("#"+n+"_dateRange_multiDrpDwn_txt")},n.prototype.getApplyBtn=function(n){return this.dashboardDesigner.element.find("#"+n+"_dateRange_okBtn")},n.prototype.getFieldDiv=function(n){return this.dashboardDesigner.element.find("#"+n+"_dateRange_fieldDiv")},n.prototype.updateParameterListInfo=function(n){this.parameterList=n},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.DateRangePopup",InternalDateRangePopup,window),function(n){n[n.Range="Range"]="Range";n[n.StartDate="StartDate"]="StartDate";n[n.EndDate="EndDate"]="EndDate"}(DateFormatOption||(DateFormatOption={}));var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),ComboBoxProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ComboBoxProperties",i.EnableMultiSelection=!1,i.AllowFilter=!1,i.SelectFirstItemByDefault=!1,i.DefaultSelectedIndices="0",i.UrlLink=null,i.IsAllSelected=!1,i.ParameterFieldSelected=[],i.ShowAll=!0,i.PlaceHolder=new PlaceHolder,i}return __extends(t,n),t}(WidgetProperties),PlaceHolder=function(){function n(){this.Text="";this.IsEdited=!1}return n}(),TextFilterProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.TextFilterProperties",i}return __extends(t,n),t}(WidgetProperties),GridProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.GridProperties",i.AllowSorting=!0,i.AllowPaging=!1,i.FitContent=!1,i.ShowTooltip=!0,i.AllowFilter=!1,i.HorizontalGridLine=!0,i.VerticalGridLine=!1,i.EnableAlternativeRowColor=!1,i.RawData=!1,i.ShowHeader=!0,i.ShowBorder=!0,i.IsAutoHeaderFontSize=!0,i.HeaderFontSize=16,i.IsAutoRowFontSize=!0,i.RowFontSize=16,i.HeaderPadding=11,i.ContentPadding=11,i.EnableDataGrouping=!0,i.GridTemplate=[],i.HeaderSettings=new HeaderSettings,i.PoPSlaveSettings=new PoPSlaveSettings,i.HeaderHeight=42,i.RowHeight=32,i.AllowTextWrap=!1,i.ColumnAlignments=[],i.AlternativeRow=new ColorProperty,i.GridValueSection=new ColorProperty,i.NewHeaderSettings=new ColorProperty,i.AlternativeRow.Foreground.Color="#000000",i.AlternativeRow.Background.Color="#f7f7f7",i.GridValueSection.Foreground.Color="#000000",i.GridValueSection.Background.Color="#ffffff",i.NewHeaderSettings.Foreground.Color="#2D3748FF",i.NewHeaderSettings.Background.Color="#F3F7FAFF",i.PageSize=100,i.DisableVirtualization=!1,i.SummaryRowSettings=new SummaryRowSettings,i}return __extends(t,n),t}(TableWidgetProperties),ColumnAlignments=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.ColumnAlignments";this.HeaderAlign=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,TextAlignment.Left);this.TextAlign=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,TextAlignment.Left);this.ColumnWidth="";this.IsColumnWidthModified=!1}return n}(),PoPSlaveSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.Grid.PoPSlaveSettings";this.PoPColumnSettings=[];this.PrimaryBackground="#CCFAFF";this.SecondaryBackground="#C0F2DC"}return n}(),PoPColumnSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.Grid.PoPColumnSettings";this.IsSlaveForPop=!0;this.PopType="Absolute Difference"}return n}(),GridColumnSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.GridColumnSetting"}return n}(),HeaderSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.HeaderSettings";this.Foreground="#2D3748FF";this.Background="#F3F7FAFF"}return n}(),ColorProperty=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.ColorProperty";this.Foreground=new ColorSet;this.Background=new ColorSet}return n}(),ColorSet=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.ColorSet";this.Color="";this.IsEdited=!1}return n}(),SummaryRowSettings=function(){function n(){this.EnableSummaryRow=!1;this.SummaryColumn=[];this.BackgroundColor=new ColorSet;this.BackgroundColor.Color="#F3F7FAFF";this.IsAutoHeight=!0;this.IsAutoPadding=!0;this.IsAutoFontSize=!0;this.Height=50;this.Padding=15;this.FontSize=12}return n}(),SummaryColumn=function(){function n(){this.SummaryRow=[]}return n}(),SummaryRow=function(){function n(){this.UniqueColumnName="";this.UniqueRowName="";this.Name="";this.Id="";this.Color="";this.SummaryType=SummaryType.SUM;this.ShowValue=!0;this.CustomExp="";this.MeasureFormat=new MeasureFormatting;this.Title=new ColorSet;this.Value=new ColorSet;this.Alignment=new SummaryRowAlignment}return n}(),SummaryRowAlignment=function(){function n(){this.Title="left";this.Value="right"}return n}(),HeatMapProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMapProperties",i.CellSettings=new CellSettings,i.XAxisSettings=new AxisSettings,i.YAxisSettings=new AxisSettings,i.LegendSettings=new LegendSettings,i.ColorSettings=new ColorSettings,i.DefaultColor=new DefaultColorSet,i.SortSettings=new SortSettings,i.ColorGradientMode=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ColorGradientMode,ColorGradientMode.Table),i.EnableDrilldown=!1,i}return __extends(t,n),t}(VisualTooltipWidgetProperties),PivotViewProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotViewProperties",i.GroupBarSettings=new GroupBarSettings,i.GroupBarSettings.GroupPanelBackgroundColor.Color="#F3F7FA",i.BasicSettings=new BasicSettings,i.GrandTotalSettings=new GrandTotalSettings,i.FieldSettings=new FieldSettings,i.DrilledMembers=[],i.SelectionCellInfo=new SelectionCellInfo,i.HeaderSettings=new PivotHeaderSettings,i.ContentSettings=new ContentSettings,i.IsAutoHeaderFontSize=!0,i.HeaderFontSize=16,i.IsAutoContentFontSize=!0,i.ContentFontSize=16,i.NewHeaderSettings=new ColorProperty,i.NewHeaderSettings.Foreground.Color="#2D3748",i.NewHeaderSettings.Background.Color="#F3F7FA",i.AlignmentSettings=new PivotAlignmentSettings,i}return __extends(t,n),t}(TableTooltipWidgetProperties),DrilledMembers=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.DrilledMembers";this.Name="";this.Items=[]}return n}(),PivotHeaderSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.PivotHeaderSettings";this.Row=new HeaderColorSettings;this.Column=new HeaderColorSettings}return n}(),HeaderColorSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.HeaderColorSettings";this.Foreground="#2D3748";this.Background="#F3F7FA"}return n}(),ContentSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.ContentSettings";this.RowHeight=48;this.ColumWidth=110;this.HeaderColumWidth=250}return n}(),PivotAlignmentSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.PivotAlignmentSettings";this.RowHeader="Left";this.ColumnHeader="Left";this.Value="Right"}return n}(),GroupBarSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.GroupBarSettings";this.ShowSortIcon=!0;this.ShowFilterIcon=!0;this.ShowGroupBar=!0;this.GroupPanelBackgroundColor=new ColorSet;this.GroupPanelBackgroundColor.Color="#F3F7FA"}return n}(),BasicSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.BasicSettings";this.EnableValueSorting=!0;this.ExpandAllNode=!1;this.ShowNoDataItems=!1;this.ShowTooltip=!0;this.AllowTextWrap=!1;this.AllowColumnResize=!1;this.AllowContentToFit=!1;this.ShowValuesInRowAxis=!1;this.EnablePersistence=!1;this.HideEmptyHeaders=!1;this.EmptyCellsContent=""}return n}(),SelectionCellInfo=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.SelectionCellInfo";this.IsSelected=!1}return n}(),GrandTotalSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.GrandTotalSettings";this.ShowRowGrandTotals=!0;this.ShowColumnGrandTotals=!0;this.ShowRowSubTotals=!0;this.ShowColumnSubTotals=!0;this.RowGrandTotalText="";this.ColumnGrandTotalText=""}return n}(),FieldSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.FieldSettings";this.CustomFieldSettings=[]}return n}(),PivotViewFieldSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.PivotViewColumnSetting";this.DisplayName="";this.UniqueColumnName="";this.IsEdited=!1;this.CaptionName="";this.ShowNoDataItem=!1}return n}(),ColorSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.HeatMap";this.MinColor="";this.MaxColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0].substring(1)+"#FF"}return n}(),AxisSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMap.AxisSettings";this.AxisTitle="";this.ShowAxisLabel=!0;this.ShowAxisTitle=!0;this.InversedAxis=!1;this.OpposedAxis=!1;this.LabelIntersectAction=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LabelIntersectAction,LabelIntersectAction.Trim);this.LabelRotation=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelRotations,ValueLabelRotations.Auto);this.EnableTrim=!1;this.MaximumLabelLength=100}return n}(),LegendSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMap.LegendSettings";this.ShowLegend=!1;this.Position=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Auto)}return n}(),SortSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.HeatMap.SortSettings";this.XAxis=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortSetting,SortSetting.Auto);this.YAxis=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortSetting,SortSetting.Auto)}return n}(),CellSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMap.CellSettings";this.CellBorder=1;this.CellRadius=3;this.ShowDataLabel=!1;this.ShowTooltip=!0;this.TileType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TileType,TileType.Rect);this.LabelColor=new ColorSet;this.LabelColor.Color="#505D6F";this.XAxisLabelColor=new ColorSet;this.XAxisLabelColor.Color="#505D6F";this.YAxisLabelColor=new ColorSet;this.YAxisLabelColor.Color="#505D6F"}return n}(),ColorGradientMode;(function(n){n[n.Table="Table"]="Table";n[n.Column="Column"]="Column";n[n.Row="Row"]="Row"})(ColorGradientMode||(ColorGradientMode={})),function(n){n[n.Bubble="Bubble"]="Bubble";n[n.Rect="Rect"]="Rect"}(TileType||(TileType={})),function(n){n[n.Center="Center"]="Center";n[n.Near="Near"]="Near";n[n.Far="Far"]="Far"}(LegendAlignment||(LegendAlignment={})),function(n){n[n.None="None"]="None";n[n.Trim="Trim"]="Trim"}(LabelIntersectAction||(LabelIntersectAction={}));UrlLink=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.UrlLink";this.EnableLink=!1;this.EscapeSpecialCharacter=!1;this.EnableParameterEncryption=!1;this.PassingParameters=[];this.ColumnUrlDetails=[];this.UrlPath="";this.LinkType=LinkType.Url;this.GridUrlType=UrlLinkType.Row;this.TargetTypeInfo="_Blank";this.Height=100;this.Width=100;this.Title=""}return n}();ColumnUrl=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.ColumnUrl"}return n}(),function(n){n[n.Dashboard=0]="Dashboard";n[n.Tab=1]="Tab";n[n.Url=2]="Url"}(LinkType||(LinkType={})),function(n){n[n.Row=0]="Row";n[n.Column=1]="Column";n[n.Value=2]="Value"}(UrlLinkType||(UrlLinkType={}));WidgetLink=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.WidgetLink";this.Enable=!1;this.WidgetList=[]}return n}();LinkedWidgetList=function(){function n(){this.Widget="";this.LinkType=WidgetLinkType.Default;this.CustomIndex=""}return n}(),function(n){n[n.Default=0]="Default";n[n.Custom=1]="Custom"}(WidgetLinkType||(WidgetLinkType={}));var GridTemplate=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.gridTemplate";this.DisplayType=DisplayType.Value}return n}(),ConditionalFormatting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.ConditionalFormatting";this.TargetMeasureColumn=new Column;this.MeasureConditionType=MeasureConditionType.Equals;this.DimensionConditionType=DimensionConditionType.Equals;this.FormatType=ConditionalFormatType.Column;this.ColorStyle=ColorType.SingleColor}return n}(),Column=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.Column"}return n}(),MeasureConditionType;(function(n){n[n.Equals="Equals"]="Equals";n[n.LessThan="Less Than"]="LessThan";n[n.LessThanOrEqual="Less Than Or Equal To"]="LessThanOrEqual";n[n.GreaterThanOrEqual="Greater Than Or Equal To"]="GreaterThanOrEqual";n[n.GreaterThan="Greater Than"]="GreaterThan";n[n.NotEquals="Does Not Equal"]="NotEquals";n[n.Between="Between"]="Between"})(MeasureConditionType||(MeasureConditionType={})),function(n){n[n.Equals="Equals"]="Equals";n[n.NotEquals="Does Not Equal"]="NotEquals";n[n.Contains="Contains"]="Contains";n[n.NotContains="Does Not Contains"]="NotContains";n[n.StartsWith="Starts With"]="StartsWith";n[n.EndsWith="Ends With"]="EndsWith"}(DimensionConditionType||(DimensionConditionType={})),function(n){n[n.Column="Column"]="Column";n[n.Row="Row"]="Row";n[n.Indication="Indication"]="Indication"}(ConditionalFormatType||(ConditionalFormatType={})),function(n){n[n.Number="Number"]="Number";n[n.Currency="Currency"]="Currency";n[n.Percentage="Percentage"]="Percentage"}(MeasureFormatType||(MeasureFormatType={})),function(n){n[n.SingleColor="Single Color"]="SingleColor";n[n.GradientColor="Gradient Color"]="GradientColor"}(ColorType||(ColorType={}));var Styles=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.Styles"}return n}(),FontFormats=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.FontFormats"}return n}(),TreeMapProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.TreeMapProperties",i.ShowLegend=!1,i.ShowValueLabel=!1,i.EnableDrilldown=!1,i.ShowTooltip=!0,i.IsCustomRange=null,i.SaturatedColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0].substring(1)+"#FF",i.MaxColor="#FBCB43FF",i.MidColor="#E57368FF",i.MinColor="#77A7FBFF",i.LabelColor="#1E1E1E",i.UrlLink=new UrlLink,i.DefaultColor=new DefaultColorSet,i}return __extends(t,n),t}(VisualTooltipWidgetProperties),CustomWidgetProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.CustomWidgetProperties",i.UrlLink=new UrlLink,i.CustomProperties=[],i}return __extends(t,n),t}(VisualWidgetProperties),CustomProperty=function(){function n(){}return n}(),MapsCommonProp=function(n){function t(t){var i=n.call(this,t)||this;return i.ShapeData="WorldMap_Countries",i.ShapePropertyPath="name",i.ShapeType="Country",i}return __extends(t,n),t}(VisualTooltipWidgetProperties),BubbleMapProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleMapProperties",i.BubbleColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0].substring(1)+"#FF",i}return __extends(t,n),t}(MapsCommonProp),ChoroplethMapProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChoroplethMapProperties",i.ShowLegend=!1,i.IsPaletteColor=!0,i.MaxColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0].substring(1)+"#FF",i.MinColor="#fae8eaFF",i}return __extends(t,n),t}(MapsCommonProp),MapProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.MapProperties",i.ShowLegend=!1,i.ShowLegendTitle=!0,i.LegendTitle="",i.ShowTooltip=!0,i.IsPaletteColor=!0,i.MaxColor="#F6727FFF",i.MinColor="#FFC2D8FF",i.UrlLink=new UrlLink,i.MapType="Choropleth",i.MarkerShape="Balloon",i.MarkerShapeColor="#494ca2",i.ShowLabel=!1,i.ImageUrl=null,i.EnableColorSettings=!1,i.MarkerWidth=10,i.MarkerHeight=15,i.IsEnableDrillDown=!1,i.LegendPosition="Top",i.ImageSource="Local",i.ImageName=null,i.URLPattern="{0}",i.ImageSrc=null,i.ImageLocalUrl=null,i.MarkerCustomization=new MarkerCustomizeSettings,i.EnableMultiSelection=!1,i.DefaultColor=new DefaultColorSet,i.LabelColor=new ColorSet,i.LabelColor.Color="#000000",i.LegendType="Layers",i.DefaultMarkerZoom=!1,i}return __extends(t,n),t}(MapsCommonProp),MarkerCustomizeSettings=function(){function n(){this.MarkerShape="";this.MarkerImage=null;this.MarkerColor="";this.MarkerHeight=0;this.MarkerWidth=0;this.DefaultImageUrl=null;this.DefaultMarkerColor="#494ca2";this.DefaultMarkerHeight=15;this.DefaultMarkerWidth=10;this.DefaultMarkerShape="Balloon"}return n}(),BingMapProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BingMapProperties",i.MapType="r",i.ShowZoomIcon=!1,i.ShowTooltip=!0,i.DisableZoomAndPan=!1,i.ShapeType="CountryRegion",i.MapShape="Choropleth",i.MarkerShape="Round",i.MarkerShapeColor="#494ca2",i.MarkerSize=14,i.MarkerImage="Local",i.MarkerImageUrl=null,i.MarkerUrlPattern="{0}",i.MarkerLocalImageName=null,i.MarkerLocalImageUrl=null,i.DefaultColor=new DefaultColorSet,i.DefaultColor.Color="#F6727F",i.MarkerCustomization=new MarkerCustomizeSettings,i.UrlLink=new UrlLink,i.InitialZoomState="",i.APIType="",i}return __extends(t,n),t}(VisualTooltipWidgetProperties),LabelProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.LabelProperties",i.Name="Label1",i.LineCollection=[],i.LabelBackgroundColor="#ffffff",i}return __extends(t,n),t}(WidgetProperties),LineProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.LineProperties";this.TextCollections=[];this.LineStyleProperties=new LineStyleProperties}return n}(),TextCollectionProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.TextCollectionProperties";this.Text=[]}return n}(),TextProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.TextProperties";this.Content="";this.TextStyle=new TextStyleProperties}return n}(),TextStyleProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.TextStyleProperties";this.FontSize="10px";this.FontFamily="Arial";this.FontColor="Black";this.FontStyle="Normal";this.TextDecoration="Normal";this.FontWeight="Normal";this.TextHighlightColor="#f5ea14"}return n}(),LineStyleProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.LineStyleProperties";this.LineTextAlignment="Left"}return n}(),DatePickerProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.DatePickerProperties",i.LimitDates=!0,i.Type=DatePickerType.Single,i.HighlightAvailableDates=!1,i.UrlLink=null,i.ShowLatestDate=!1,i.EnableFixedCalendarSelection=!1,i}return __extends(t,n),t}(WidgetProperties),DatePickerType;(function(n){n[n.Single=0]="Single";n[n.Range=1]="Range"})(DatePickerType||(DatePickerType={}));PoPProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PoPProperties",i.FilterSettings.ActAsMasterWidget=!0,i.FilterSettings.IgnoreFilterActions=!0,i.UrlLink=null,i}return __extends(t,n),t}(WidgetProperties);RangeSliderProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RangeSliderProperties",i.Type=RangeSliderType.Range,i.Orientation=RangeSliderOrientation.Auto,i.UrlLink=null,i.LabelColor=new ColorSet,i.SliderColor=new ColorSet,i.LabelColor.Color="#505D6F",i.SliderColor.Color=BoldBIDashboard.DashboardUtil.defaultColorPalette[0],i}return __extends(t,n),t}(WidgetProperties),function(n){n[n.MinRange=0]="MinRange";n[n.Range=1]="Range"}(RangeSliderType||(RangeSliderType={})),function(n){n[n.Horizontal=0]="Horizontal";n[n.Vertical=1]="Vertical";n[n.Auto=2]="Auto"}(RangeSliderOrientation||(RangeSliderOrientation={}));ListBoxProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ListBoxProperties",i.EnableMultiSelection=!1,i.UrlLink=null,i}return __extends(t,n),t}(WidgetProperties);GaugeSettings=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.GaugeProperties",i.RangeColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0],i.ScaleColor="#E0E0E0",i.Direction=GaugeDirection.HighIsGood,i.MinValue=0,i.MaxValue=100,i.CustomTarget=70,i.RangeCollection=[new GaugeRangeSettings(0,33,"#FF6C40","Range-1",""),new GaugeRangeSettings(33,66,"#FFE700","Range-2",""),new GaugeRangeSettings(66,100,"#2CD9C5","Range-3","")],i.RangeValueType=RangeValueType.DefaultColor,i.RangeLabelType=RangeValueType.DefaultColor,i.GaugeType=GaugeTypes.HorseShoe,i.RangeWidth=RangeWidth.Medium,i.TicksPosition=TicksPosition.Outside,i.ValuePointer=ValuePointers.RangePointer,i.TargetPointer=TargetPointers.InvertedTriangle,i.ValueLabelPosition=ValueLabelPosition.Inside,i.ScaleLabelPosition=ScaleLabelPosition.Outside,i.ShowValueLabel=!0,i.ShowScaleLabel=!0,i.ShowActualValue=!0,i.ShowDifferenceValue=!0,i.ShowTicks=!1,i.EnableAnimation=!1,i.ShowTooltip=!0,i.TicksHeight=5,i.TicksWidth=1,i.ScaleWidth=40,i.ShowRange=!1,i.NeedlePointerHeight=60,i.LabelType=LabelType.ValueLabel,i.TargetPointerColor="#424242",i.NeedlePointerColor="#505D6F",i.BackgroundColor="transparent",i.ValueColor="#505D6F",i.TitleColor="#000000",i.LabelColor="#505D6F",i.PercentValueColor="#000000",i.PercentValueSize=15,i.HighColor="#2CD9C5",i.LowColor="#FF6C40",i.MediumColor="#FFE700",i.IsCustomRange=!1,i.DefaultColor=new DefaultColorSet,i.GaugeFontSettings=new GaugeFontSettings,i}return __extends(t,n),t}(VisualTooltipWidgetProperties),function(n){n[n.HalfRadialGauge="Half Circle"]="HalfRadialGauge";n[n.HorseShoe="Horse Shoe"]="HorseShoe";n[n.FullRadialGauge="Full Circle"]="FullRadialGauge";n[n.Auto="Auto"]="Auto"}(GaugeTypes||(GaugeTypes={})),function(n){n[n.DefaultColor="Default Color"]="DefaultColor";n[n.RangeColor="Range Color"]="RangeColor"}(RangeValueType||(RangeValueType={}));GaugeRangeSettings=function(){function n(n,t,i,r,u){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Gauge.GaugeRangeSettings";this.Start=n;this.End=t;this.Color=i;this.Name=r;this.Label=u}return n}();GaugeFontSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Gauge.GaugeFontSettings";this.IsAutoScaleLabelFontSize=!0;this.ScaleLabelFontSize=12;this.IsAutoActualValueFontSize=!0;this.ActualValueFontSize=16;this.IsAutoDifferenceValueFontSize=!0;this.DifferenceValueFontSize=10;this.IsAutoSeriesTitleFontSize=!0;this.SeriesTitleFontSize=10}return n}(),function(n){n[n.HighIsGood=0]="HighIsGood";n[n.LowIsGood=1]="LowIsGood"}(GaugeDirection||(GaugeDirection={})),function(n){n[n.RangePointer="Range Pointer"]="RangePointer";n[n.NeedlePointer="Needle Pointer"]="NeedlePointer";n[n.RangeWithNeedle="Range with Needle"]="RangeWithNeedle"}(ValuePointers||(ValuePointers={})),function(n){n[n.Triangle="Triangle"]="Triangle";n[n.InvertedTriangle="Inverted Triangle"]="InvertedTriangle";n[n.Line="Line"]="Line"}(TargetPointers||(TargetPointers={})),function(n){n[n.Inside=0]="Inside";n[n.Outside=1]="Outside"}(TicksPosition||(TicksPosition={})),function(n){n[n.Inside=0]="Inside";n[n.Outside=1]="Outside"}(ValueLabelPosition||(ValueLabelPosition={})),function(n){n[n.Inside=0]="Inside";n[n.Outside=1]="Outside"}(ScaleLabelPosition||(ScaleLabelPosition={})),function(n){n[n.Thin=0]="Thin";n[n.Medium=1]="Medium";n[n.Thick=2]="Thick"}(RangeWidth||(RangeWidth={})),function(n){n[n.ValueLabel="Value Label"]="ValueLabel";n[n.RangeLabel="Range Label"]="RangeLabel"}(LabelType||(LabelType={}));var VirtualScrollSettings=function(){function n(){this.PageSize=100;this.StartIndex=1;this.FieldLastRecord=[]}return n}(),CardProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.CardProperties",i.PrimaryValueType=PrimaryValueType.PercentOfTarget,i.SecondaryValueType="Variation",i.ActualValueForeground="#686262",i.TitleSettings=new TitleSetting,i.SubTitleSettings=new SubTitleSetting,i.CustomRangeSettings=new CardCustomRangeSetting,i.ActualValuePrefix="",i.TargetValuePrefix="",i.Direction=!0,i.HasCustomTitle=!1,i.ValueAlignment=TextAlignment.Right,i.ShowIndicatorOnly=!1,i.EnableCompactView=!1,i.ShowActualValue=!0,i.ShowSecondaryValue=!0,i.ShowPrimaryValue=!0,i.ShowIndicator=!0,i.UniformSizing=!1,i.SparklineSettings=new SparkLineSettings,i.ActualValueTextAlignment=TextAlignment.Right,i.AdditionalValueAlignment=TextAlignment.Right,i.SecondaryValueAlignment=TextAlignment.Right,i.PrimaryValueAlignment=TextAlignment.Right,i}return __extends(t,n),t}(WidgetProperties),TitleSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.TitleSetting";this.Visibility=!0;this.Alignment=TextAlignment.Left;this.Color="#686262"}return n}(),SubTitleSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.SubTitleSetting";this.Visibility=!1;this.Color="#686262"}return n}(),CardCustomRangeSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.CardCustomRangeSetting";this.Type=CustomRangeType.Absolute;this.Ranges=[]}return n}(),CustomRangeType;(function(n){n[n.Absolute=0]="Absolute";n[n.Percent=1]="Percent"})(CustomRangeType||(CustomRangeType={})),function(n){n[n.AbsoluteDifference="Absolute Difference"]="AbsoluteDifference";n[n.PercentOfDifference="Percent of Difference"]="PercentOfDifference";n[n.PercentOfTarget="Percent of Target"]="PercentOfTarget";n[n.ActualValue="Actual Value"]="ActualValue";n[n.PercentOfChange="Percent of Change"]="PercentOfChange"}(PrimaryValueType||(PrimaryValueType={}));SparkLineSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.SparkLineSettings";this.LowValueColor="#1F497D";this.HighValueColor="#FFC000";this.ShowMarker=!0;this.Opacity=1;this.Type=SparkLineType.Line}return n}(),function(n){n[n.Line=0]="Line";n[n.Area=1]="Area";n[n.Column=2]="Column"}(SparkLineType||(SparkLineType={}));var CardCustomRange=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.CardCustomRange"}return n}(),KPICardProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICardProperties",i.TitleSettings=new KPICardTitleSettings,i.IndicatorSettings=new IndicatorSettings,i.KPIValueSettings=new KPIValueSettings,i.LeftValueSettings=new ValueSettings(!0),i.RightValueSettings=new ValueSettings(!1),i.LeftCaptionSettings=new CaptionSettings,i.RightCaptionSettings=new CaptionSettings,i.ImageSettings=new CardImageSettings,i.BackgroundSettings=new BackgroundSettings,i.SparklineSettings=new SparklineSettings,i.ColorSettings=new KPICardColorSettings,i.Direction="High is Good",i.ShowTooltip=!0,i.SeparatorSettings=new SeparatorSettings,i.FormatSettings=new MeasureFormatting,i.UrlLink=new UrlLink,i.AnimationSettings=new AnimationSettings,i.SeriesSettings=new SeriesSettings,i.IsFixedLayout=!1,i.ResponsiveMargin=!1,i}return __extends(t,n),t}(VisualWidgetProperties),KPICardTitleSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.KPICardTitleSettings";this.Visibility=!0;this.Color="#505D6FFF";this.AutoFontSize=!0;this.FontSize=16}return n}(),IndicatorSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.IndicatorSettings";this.LowValueType="PointerDown";this.HighValueType="PointerUp";this.WarningType="Round";this.Visibility=!0;this.Color="Green";this.AutoFontSize=!0;this.FontSize=24;this.ColorType="Direction Color";this.Placement="KPI Value";this.Position="Left"}return n}(),KPIValueSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.KPIValueSettings";this.ValueType="Absolute Difference";this.Visibility=!0;this.Color="#505D6FFF";this.AutoFontSize=!0;this.FontSize=64;this.ColorType="Custom Color"}return n}(),ValueSettings=function(){function n(n){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.ValueSettings";this.AutoFontSize=!0;this.FontSize=16;this.Color="#505D6FFF";this.Visibility=!0;this.ValueType=n?"Actual Value":"Target Value";this.ColorType="Custom Color"}return n}(),CaptionSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.CaptionSettings";this.Color="#505D6FFF";this.AutoFontSize=!0;this.FontSize=16;this.Visibility=!0;this.ColorType="Custom Color"}return n}(),CardImageSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.CardImageSettings";this.ImageMode="Uniform";this.ImageUrl="";this.ImageSource="Local";this.URLPattern="{0}";this.Visibility=!1;this.FilePath="";this.ImageName="";this.ImagePosition="Left"}return n}(),BackgroundSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.BackgroundColorSettings";this.Color="#ffffffff";this.PlotArea="KPI Background";this.Image=new CardImageSettings;this.Transparency=.5}return n}(),SparklineSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.SparklineSettings";this.Fill="#0d9948FF";this.Visibility=!0;this.ColorType="Direction Color";this.Opacity=1}return n}(),KPICardColorSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.KPICardColorSettings";this.HighValueColor="#2CD9C5FF";this.LowValueColor="#FF6C40FF";this.NeutralColor="#e5ed00FF";this.Direction="High is Good"}return n}(),SeparatorSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.SeparatorSettings";this.Color="#9AA1A9FF"}return n}(),ComboChartProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ComboChartProperties",i.ChartType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ChartTypes,ChartTypes.ComboChart),i.EnableAnimation=!1,i.ShowLegend=!0,i.ShowTooltip=!0,i.IsAutoLegendFontSize=!0,i.LegendFontSize=16,i.DefaultColors=[],i.ShowValueLabels=!1,i.EnableSmoothScroll=!1,i.ValueLabelRotation=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelRotations,ValueLabelRotations.None),i.LegendPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Auto),i.LegendTitle="",i.IsAutoLegendTitleFontSize=!0,i.LegendTitleFontSize=16,i.ShowValueLabelSuffix=!1,i.ValueLabelSuffix="",i.PrimaryValueGridLines=!0,i.SecondaryValueGridLines=!1,i.CategoryGridLines=!1,i.ShowMarker=!0,i.ShowNoDataItem=!1,i.Axis=new Axis,i.DataLabel=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DataLabel,DataLabel.Percentage),i.IsEnableDrillDown=!1,i.DisplayNames=[],i.IsBasicChartType=!1,i.CustomLegendBtnVisibilty=!1,i.CustomLegendInfo=new CustomLegendSettings,i.CustomValueLabels=[],i.IsCustomLegend=!1,i.IsColorPaletteCategoryVisible=!1,i.IsDefaultColorPalette=!0,i.ColorPaletteModel=[],i.TrendLineSettings=[],i.ChartSeriesTypeInfo=[],i.LineStyleInfo=null,i.PrimaryAxisRange=new AxisRange,i.SecondaryAxisRange=new AxisRange,i.ForecastProperties=new ForecastProperties,i.LegendShape=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendShape,LegendShape.Circle),i.ColumnSpacing=.2,i.ColumnWidth=.7,i.ValueLabel=new ColorSet,i.LegendLabel=new ColorSet,i.AxisTitle=new ColorSet,i.AxisLabel=new ColorSet,i.ValueLabel.Color="#000000",i.LegendLabel.Color="#000000",i.AxisTitle.Color="#000000",i.AxisLabel.Color="#000000",i.EnableMultiSelection=!1,i.IsAutoValueLabelFontSize=!0,i.ValueLabelFontSize=16,i.ValueLabelPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelPlacement,ValueLabelPlacement.Auto),i}return __extends(t,n),t}(VisualTooltipWidgetProperties),ChartSeriesType=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ChartSeriesType";this.UniqueColumnName="";this.ChartType="";this.IsSecondaryAxis=!1;this.FieldName=""}return n}(),BubbleScatterChartProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleScatterChartProperties",i.EnableAnimation=!1,i.ShowLegend=!0,i.ShowTooltip=!0,i.LegendPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Auto),i.ChartSeriesType=[],i.CustomLegendInfo=new CustomLegendSettings,i.IsCustomLegend=!1,i.ShowValueLabel=!1,i.PrimaryValueGridLines=!0,i.CategoryAxisGridLines=!1,i.DefaultColors=[],i.ColorPaletteModel=[],i.UrlLink=new UrlLink,i.CategoryAxisSettings=new BubbleScatterCategoryAxis,i.PrimaryValueAxisSettings=new BubbleScatterPrimaryValueAxis,i.IsDefaultColorPalette=!0,i}return __extends(t,n),t}(VisualTooltipWidgetProperties),RadarPolarChartProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RadarPolarChartProperties",i.DrawType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DrawType,DrawType.Polar),i.ChartType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(RadarPolarType,RadarPolarType.Area),i.EnableAnimation=!1,i.ShowMarker=!0,i.ShowLegend=!0,i.ShowTooltip=!0,i.LegendPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPosition,LegendPosition.Bottom),i.EditLegend=new CustomLegendSettings,i.ShowValueLabel=!1,i.UrlLink=new UrlLink,i.Inversed=!1,i.PrimaryAxisRange=new AxisRange,i.CustomLegendBtnVisibilty=!1,i.IsCustomLegend=!1,i.IsDefaultColorPalette=!0,i.ColorPaletteModel=[],i.DefaultColors=[],i.CategoryAxisSettings=new RadarPolarCategoryAxis,i.PrimaryValueAxisSettings=new RadarPolarPrimaryValueAxis,i.PrimaryValueGridLines=!0,i.CategoryAxisGridLines=!0,i.LegendShape=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendShape,LegendShape.Circle),i}return __extends(t,n),t}(TooltipWidgetProperties),DrawType;(function(n){n[n.Radar="Radar"]="Radar";n[n.Polar="Polar"]="Polar"})(DrawType||(DrawType={}));var RadarPolarPrimaryValueAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RadarPolarPrimaryValueAxis";this.IsEnabled=!0;this.InverseAxis=!1}return n}(),RadarPolarCategoryAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RadarPolarCategoryAxis";this.IsEnabled=!0;this.InverseAxis=!1}return n}(),BubbleScatterCategoryAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleScatter.BubbleScatterCategoryAxis";this.IsEnabled=!0;this.IsEnableTitle=!0;this.Title="";this.LabelRotation=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelRotations,ValueLabelRotations.Auto);this.IsCustomTitle=!1;this.Format=new MeasureFormatting}return n}(),BubbleScatterPrimaryValueAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleScatter.BubbleScatterPrimaryValueAxis";this.IsEnabled=!0;this.IsEnableTitle=!0;this.Title="";this.IsCustomTitle=!1;this.OpposedAxis=!1;this.Format=new MeasureFormatting}return n}(),LegendPosition;(function(n){n[n.Bottom="Bottom"]="Bottom";n[n.Right="Right"]="Right";n[n.Left="Left"]="Left";n[n.Top="Top"]="Top"})(LegendPosition||(LegendPosition={})),function(n){n[n.Line="Line"]="Line";n[n.Column="Column"]="Column";n[n.Area="Area"]="Area";n[n.Spline="Spline"]="Spline";n[n.Scatter="Scatter"]="Scatter";n[n.StackedArea="Stacked Area"]="StackedArea";n[n.Stackedcolumn="Stacked Column"]="Stackedcolumn"}(RadarPolarType||(RadarPolarType={}));var NumberCardProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCardProperties",i.TitleSettings=new NumberCardTitleSettings,i.MeasureSettings=new MeasureSettings,i.ShowTooltip=!0,i.ImageSettings=new NumberCardImageSettings,i.BackgroundSettings=new NumberCardBackgroundSettings,i.SparklineSettings=new NumberCardSparklineSettings,i.FormatSettings=new MeasureFormatting,i.UrlLink=new UrlLink,i.AnimationSettings=new AnimationSettings,i.SeriesSettings=new SeriesSettings,i.AlignmentSettings=new AlignmentSettings,i.ResponsiveMargin=!1,i}return __extends(t,n),t}(VisualWidgetProperties),AlignmentSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.AlignmentSettings";this.HorizontalAlignment="Left";this.VerticalAlignment="Center";this.AutoFontSize=!1;this.ScalingFactor=1}return n}(),SeriesSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.SeriesSettings";this.IsFixedRowsAndColumns=!1;this.RowCount=1;this.ColumnCount=1}return n}(),AnimationSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.AnimationSettings";this.EnableAnimation=!1;this.AnimationDuration=1500}return n}(),NumberCardTitleSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCard.NumberCardTitleSettings";this.Visibility=!0;this.AutoFontSize=!0;this.Color="#505D6FFF";this.FontSize=16;this.Text="Card Title";this.Position="Bottom";this.EnableWrap=!1}return n}(),MeasureSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCard.MeasureSettings";this.AutoFontSize=!0;this.FontSize=64;this.Color="#505D6FFF";this.Visibility=!0;this.EnableAnimation=!1}return n}(),NumberCardImageSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCard.NumberCardImageSettings";this.ImageMode="Uniform";this.ImageUrl="";this.ImageSource="Local";this.URLPattern="{0}";this.Visibility=!1;this.FilePath="";this.ImageName="";this.ImagePosition="Right"}return n}(),NumberCardBackgroundSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCard.NumberCardBackgroundSettings";this.Color="#ffffffff";this.PlotArea="Card Background";this.Image=new CardImageSettings;this.Transparency=.5}return n}(),NumberCardSparklineSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCard.SparklineSettings";this.Fill="#F29D38FF";this.Visibility=!0;this.Opacity=1}return n}(),RTEProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RTEProperties",i.Value="",i.VerticalAlign=null,i.AutofitContent=!1,i}return __extends(t,n),t}(WidgetProperties),DateBucketProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.DateBucketProperties",i.selectedValue="Date",i.ConfiguredWidgetList=[],i}return __extends(t,n),t}(WidgetProperties),CombineProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.CombineProperties",i.DraggedWidgetList=[],i.FilterSettings.IgnoreFilterActions=!0,i}return __extends(t,n),t}(VisualWidgetProperties),LineWidgetProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.LineWidgetProperties",i.IsHorizontal=!0,i.Thickness=2,i.Padding=10,i.LineType="Solid",i.Color="#dbdbdb",i.FilterSettings.IgnoreFilterActions=!0,i}return __extends(t,n),t}(WidgetProperties),ChartProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties",i.ChartType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ChartTypes,ChartTypes.Column),i.EnableAnimation=!1,i.Radius=.4,i.LineWidth=1,i.ShowLegend=!0,i.ShowLegendAsDropDown=!1,i.IsLegendDropdownAllSelected=!0,i.UnselectedLegendList=[],i.ShowTooltip=!0,i.IsAutoLegendFontSize=!0,i.LegendFontSize=16,i.Chartsize=.8,i.DefaultColors=[],i.ShowValueLabels=!1,i.EnableSmoothScroll=!1,i.ValueLabelRotation=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelRotations,ValueLabelRotations.None),i.LegendPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Auto),i.LegendTitle="",i.LegendTextOverFlow=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendTextOverFlow,LegendTextOverFlow.None),i.ColorMappingType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ColorMappingType,ColorMappingType.Data),i.LegendTextWidth=100,i.IsAutoLegendTitleFontSize=!0,i.LegendTitleFontSize=16,i.ShowValueLabelSuffix=!1,i.ValueLabelSuffix="",i.PrimaryValueGridLines=!0,i.SecondaryValueGridLines=!1,i.CategoryGridLines=!1,i.ShowMarker=!0,i.ShowNoDataItem=!1,i.Axis=new Axis,i.DataLabel=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DataLabel,DataLabel.Category),i.IsEnableDrillDown=!1,i.DisplayNames=[],i.IsBasicChartType=!1,i.CustomLegendBtnVisibilty=!1,i.CustomLegendInfo=new CustomLegendSettings,i.CustomValueLabels=[],i.IsCustomLegend=!1,i.IsColorPaletteCategoryVisible=!1,i.IsDefaultColorPalette=!0,i.ColorPaletteModel=[],i.IndexColorPalette=[],i.TrendLineSettings=[],i.ChartSeriesTypeInfo=[],i.LineStyleInfo=null,i.PrimaryAxisRange=new AxisRange,i.SecondaryAxisRange=new AxisRange,i.ForecastProperties=new ForecastProperties,i.LegendShape=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendShape,LegendShape.Circle),i.ColumnSpacing=.2,i.ColumnWidth=.7,i.ValueLabel=new ColorSet,i.LegendLabel=new ColorSet,i.AxisTitle=new ColorSet,i.AxisLabel=new ColorSet,i.ValueLabel.Color="#000000",i.LegendLabel.Color="#000000",i.AxisTitle.Color="#000000",i.AxisLabel.Color="#000000",i.EnableMultiSelection=!1,i.IsAutoValueLabelFontSize=!0,i.ValueLabelFontSize=16,i.IsInversed=!1,i.ValueLabelPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelPlacement,ValueLabelPlacement.Auto),i.EmptyPointMode=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(EmptyPointMode,EmptyPointMode.Gap),i.PageSize=200,i.ShowValueInTooltip=!1,i.FixedSeriesSettings=new SeriesSettings,i}return __extends(t,n),t}(VisualTooltipWidgetProperties),ChartLegendDropdownList=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ChartLegendDropdownList";this.SeriesUniqueID="";this.SeriesLegendName=""}return n}(),ColorPaletteModelSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ColorPaletteModelSetting";this.Name="";this.Value="";this.IsModified=!1;this.Id="";this.DefaultValue=""}return n}(),TrendLineSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.TrendLineSettings";this.CustomName="";this.LineColor="#77A7FB";this.LineStyle="";this.LineType="Linear";this.LineVisible=!0;this.LineWidth=1;this.Order=0;this.Name="";this.UniqueName="";this.Id=""}return n}(),CustomLegendSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.CustomLegendSettings";this.Type=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CustomLegendType,CustomLegendType.Individual);this.Format="{{:Row}}({{:Value}})";this.SingleValues=[];this.GroupValues=new CustomLegendsForGroup}return n}(),CustomValueLabels=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ValueLabels";this.Name="";this.IsEnabled=!1;this.UniqueColumnName=""}return n}(),ScatterChartSeriesType=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleScatter.ScatterSeriesType";this.Name="";this.Shape=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ChartSeriesShape,ChartSeriesShape.Circle);this.UniqueColumnName=""}return n}(),CustomLegendsForIndividual=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.CustomLegendsForIndividual";this.Name="";this.Caption="";this.Value="";this.IsModified=!1;this.Id=""}return n}(),CustomLegendsForGroup=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.CustomLegendsForGroup";this.Values=[];this.Series=[]}return n}(),Axis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.Axis";this.CategoryAxis=new CategoryAxis;this.PrimaryValueAxis=new PrimaryValueAxis;this.SecondaryValueAxis=new SecondaryValueAxis}return n}(),CategoryAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.CategoryAxis";this.IsEnabled=!0;this.LabelOverflowMode=LabelOverFlowMode.Auto.toString();this.LabelRotation="Auto";this.ShowTitle=!0;this.Title="";this.IsCustomTitle=!1;this.MaxLabelWidth=100;this.EnableTrim=!1;this.IsAutoCategoryAxisLabelFontSize=!0;this.CategoryAxisLabelFontSize=16;this.IsAutoCategoryAxisTitleFontSize=!0;this.CategoryAxisTitleFontSize=16;this.IsAutoInterval=!0;this.Interval=1}return n}(),PrimaryValueAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.PrimaryValueAxis";this.IsEnabled=!0;this.ShowTitle=!0;this.Title="";this.IsCustomTitle=!1;this.AxisType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Linear);this.Format=new MeasureFormatting;this.IsAutoPrimaryAxisLabelFontSize=!0;this.PrimaryLabelFontSize=16;this.IsAutoPrimaryAxisTitleFontSize=!0;this.PrimaryTitleFontSize=16;this.InverseAxis=!1}return n}(),SecondaryValueAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.SecondaryValueAxis";this.IsEnabled=!0;this.ShowTitle=!0;this.Title="";this.IsCustomTitle=!1;this.AxisType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Linear);this.Format=new MeasureFormatting;this.IsAutoSecondaryAxisLabelFontSize=!0;this.SecondaryLabelFontSize=16;this.IsAutoSecondaryAxisTitleFontSize=!0;this.SecondaryTitleFontSize=16;this.InverseAxis=!1}return n}(),AxisType;(function(n){n[n.Linear="Linear"]="Linear";n[n.Logarithmic="Logarithmic"]="Logarithmic"})(AxisType||(AxisType={}));AxisRange=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.Chart.AxisRange";this.MinValue="";this.MaxValue="";this.Interval=""}return n}();LineStyleInformation=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.LineStyleInformation";this.Series="Default";this.LineStyle=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LineStyles,LineStyles.Solid);this.LineWidth=1}return n}(),function(n){n[n.Solid="Solid"]="Solid";n[n.Dot="Dot"]="Dot";n[n.Dash="Dash"]="Dash";n[n.DotDash="DotDash"]="DotDash";n[n.LongDash="LongDash"]="LongDash";n[n.LongDashDotDot="LongDashDotDot"]="LongDashDotDot"}(LineStyles||(LineStyles={}));ForecastSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ForecastSettings";this.IsEnable=!1;this.Length=10;this.ConfidenceInterval=95;this.Seasonality=0}return n}();ForecastProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ForecastProperties";this.ForecastSettings=new ForecastSettings;this.ShowForecast=!0;this.ForecastColor="#000000";this.ShowConfidence=!0;this.ConfidenceColor="#f5e4e4";this.LegendText="Upper and Lower Bounds";this.ConfidenceBandStyle=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ConfidenceBandStyle,ConfidenceBandStyle.Fill)}return n}(),function(n){n[n.Line="Line"]="Line";n[n.Fill="Fill"]="Fill";n[n.Dot="Dot"]="Dot"}(ConfidenceBandStyle||(ConfidenceBandStyle={}));ChartColumnSettinng=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ChartColumnSetting"}return n}(),function(n){n[n.Auto="Auto"]="Auto";n[n.None="None"]="None";n[n.Plus45="+45"]="Plus45";n[n.Minus45="-45"]="Minus45";n[n.Plus90="+90"]="Plus90";n[n.Minus90="-90"]="Minus90"}(ValueLabelRotations||(ValueLabelRotations={})),function(n){n[n.Auto="Auto"]="Auto";n[n.Bottom="Bottom"]="Bottom";n[n.Middle="Middle"]="Middle";n[n.Top="Top"]="Top"}(ValueLabelPlacement||(ValueLabelPlacement={})),function(n){n[n.Gap="Gap"]="Gap";n[n.Zero="Zero"]="Zero";n[n.Average="Average"]="Average";n[n.Connect="Connect"]="Connect"}(EmptyPointMode||(EmptyPointMode={})),function(n){n[n.Auto="Auto"]="Auto";n[n.Bottom="Bottom"]="Bottom";n[n.Right="Right"]="Right";n[n.Left="Left"]="Left";n[n.Top="Top"]="Top"}(LegendPositions||(LegendPositions={})),function(n){n[n.Circle="Circle"]="Circle";n[n.Triangle="Triangle"]="Triangle";n[n.Rectangle="Rectangle"]="Rectangle";n[n.Diamond="Diamond"]="Diamond"}(ChartSeriesShape||(ChartSeriesShape={})),function(n){n[n.None="None"]="None";n[n.Trim="Trim"]="Trim";n[n.Wrap="Wrap"]="Wrap";n[n.WrapAndTrim="WrapAndTrim"]="WrapAndTrim"}(LegendTextOverFlow||(LegendTextOverFlow={})),function(n){n[n.Data="Data"]="Data";n[n.Index="Index"]="Index"}(ColorMappingType||(ColorMappingType={})),function(n){n[n.SeriesType="Series Type"]="SeriesType";n[n.Circle="Circle"]="Circle"}(LegendShape||(LegendShape={})),function(n){n[n.Auto="Auto"]="Auto";n[n.Ascending="Ascending"]="Ascending";n[n.Descending="Descending"]="Descending"}(SortSetting||(SortSetting={})),function(n){n[n.Column="Column"]="Column";n[n.Bar="Bar"]="Bar";n[n.Line="Line"]="Line";n[n.Area="Area"]="Area";n[n.Spline="Spline"]="Spline";n[n.SplineArea="Spline Area"]="SplineArea";n[n.StackedColumn="Stacked Column"]="StackedColumn";n[n.StackedBar="Stacked Bar"]="StackedBar";n[n.StackedArea="Stacked Area"]="StackedArea";n[n.PercentStackedColumn="100% Stacked Column"]="PercentStackedColumn";n[n.PercentStackedBar="100% Stacked Bar"]="PercentStackedBar";n[n.PercentStackedArea="100% Stacked Area"]="PercentStackedArea";n[n.Pie="Pie"]="Pie";n[n.Doughnut="Doughnut"]="Doughnut";n[n.Pyramid="Pyramid"]="Pyramid";n[n.Funnel="Funnel"]="Funnel";n[n.ComboChart="Combo Chart"]="ComboChart";n[n.Bubble="Bubble"]="Bubble";n[n.Scatter="Scatter"]="Scatter"}(ChartTypes||(ChartTypes={})),function(n){n[n.Trim="Trim"]="Trim";n[n.Hide="Hide"]="Hide";n[n.Auto="Auto"]="Auto"}(LabelOverFlowMode||(LabelOverFlowMode={})),function(n){n[n.Category="Category"]="Category";n[n.Value="Value"]="Value";n[n.Percentage="Percentage"]="Percentage";n[n.CategoryAndValue="Category And Value"]="CategoryAndValue";n[n.CategoryAndPercentage="Category And Percentage"]="CategoryAndPercentage";n[n.ValueAndPercentage="Value And Percentage"]="ValueAndPercentage";n[n.AllDetails="All Details"]="AllDetails"}(DataLabel||(DataLabel={})),function(n){n.Individual="Individual";n.Group="Group"}(CustomLegendType||(CustomLegendType={}));ImageProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ImageProperties",i.EnableImageExport=!0,i.EnablePdfExport=!0,i.IgnoreFilterActions=!0,i.BindFromDatasource=!0,i.Stretch=ImageMode.Default,i.ImageSource=ImgSource.Local,i.PaddingSettings=new PaddingSettings,i.ImageRotation=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImageRotations,ImageRotations.ZeroDeg),i.DataSource=DataSource.BinaryData,i.URLPattern="{0}",i.ImageUrl=null,i.ImagePath=null,i.IsURL=!1,i.IsImageExist=!1,i.BindDataIsChecked=!1,i.ImageName=null,i.IsInPackage=!1,i.Name="",i.UniqueName=null,i.imageSrc=null,i}return __extends(t,n),t}(WidgetProperties);PaddingSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.Image.PaddingSettings";this.Bottom=0;this.Left=0;this.Right=0;this.Top=0}return n}(),function(n){n[n.Default="Default"]="Default";n[n.Fill="Fill"]="Fill";n[n.Uniform="Uniform"]="Uniform";n[n.UniformToFill="Uniform To Fill"]="UniformToFill"}(ImageMode||(ImageMode={})),function(n){n[n.BinaryData="Binary Data"]="BinaryData";n[n.URI="URI"]="URI"}(DataSource||(DataSource={})),function(n){n[n.Local="Local"]="Local";n[n.URL="URL"]="URL";n[n.ParameterizedURL="Parameterized URL"]="ParameterizedURL"}(ImgSource||(ImgSource={})),function(n){n[n.ZeroDeg="0"]="ZeroDeg";n[n.NinetyDeg="90"]="NinetyDeg";n[n.OneEightyDeg="180"]="OneEightyDeg";n[n.TwoSeventyDeg="270"]="TwoSeventyDeg"}(ImageRotations||(ImageRotations={}));LinkProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.LinkProperties";this.Linking=new LinkSetting}return n}();LinkSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.LinkSetting"}return n}(),function(n){n[n.Filter=0]="Filter";n[n.NonFilter=1]="NonFilter"}(WidgetType||(WidgetType={}));var ColorCustomization=function(){function n(){this.__type="Syncfusion.Dashboard.Core.CustomColor.ColorCustomization";this.DefaultColor="#A8E1F4";this.Type=ColorCustomizationType.Gradient;this.GradientSettings=new GradientSettings;this.SolidColorInfo=[];this.RuleRangeSettings=new RuleRangeSettings}return n}(),GradientColorInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Core.CustomColor.GradientColorInfo";this.HasMidColor=!1;this.Low=new GradientColorSettings;this.Mid=new GradientColorSettings;this.High=new GradientColorSettings;this.DefaultFormatColor=new GradientColorSettings;this.Low.Color="#fd2e56";this.Mid.Color="#e5ed00";this.High.Color="#4cd766";this.DefaultFormatColor.Color="#F67280"}return n}(),GradientSettings=function(){function n(){this.BasedOn=new ColorFieldInfo;this.GradientColorInfo=new GradientColorInfo}return n}(),RuleRangeSettings=function(){function n(){this.BasedOn=new ColorFieldInfo;this.RangeColorInfo=[]}return n}(),SolidColorSet=function(){function n(){this.BasedOn=new ColorFieldInfo;this.DefaultColorSets=[];this.ColorMappingType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ColorMappingType,ColorMappingType.Data);this.IndexColorPalette=[]}return n}(),ColorFieldInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Core.CustomColor.ColorFieldInfo";this.SummaryType=SummaryType.SUM;this.FieldId="";this.UniqueColumnName="";this.ValueType=ValueType.Value;this.IsDefaultFormat=!1;this.DefaultFormatType=DefaultFormatType.Default}return n}(),GradientColorSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Core.CustomColor.GradientColorSettings";this.IsCustom=!1;this.Value=null;this.Color="#A8E1F4"}return n}(),ColorCustomizationType;(function(n){n[n.Gradient=0]="Gradient";n[n.Rule=1]="Rule";n[n.Individual=2]="Individual"})(ColorCustomizationType||(ColorCustomizationType={})),function(n){n[n.Default=0]="Default";n[n.AsZero=1]="AsZero";n[n.Specific=2]="Specific"}(DefaultFormatType||(DefaultFormatType={})),function(n){n[n.Value=0]="Value";n[n.Percentage=1]="Percentage"}(ValueType||(ValueType={}));var RangeColorSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Core.CustomColor.RangeColorSettings";this.StartRange=0;this.EndRange=0;this.IsCaseSensitive=!0;this.RangeLabel="";this.DimensionConditionalValue="";this.MeasureCondition=CMeasureConditionType.CEquals;this.DimensionCondition=CDimensionConditionType.Startswith;this.PropertyColorPair=[]}return n}(),PropertyColorSettings=function(){function n(){}return n}(),TableWidgetCustomColors=function(){function n(){this.SourceColorField=new ColorFieldInfo;this.ColorCustomization=new ColorCustomization;this.EnableAsBar=!1;this.BarCustomization=new BarCustomization}return n}(),BarCustomization=function(){function n(){this.__type="Syncfusion.Dashboard.Core.CustomColor.BarCustomization";this.Minimum=new MinMaxCustomization;this.Maximum=new MinMaxCustomization;this.PositiveColor=new BarColor;this.NegativeColor=new BarColor;this.BarTextColor=new BarColor;this.DisableValue=!1;this.PositiveColor.RgbColor="rgba(44,217,197,1)";this.PositiveColor.HexColor="#2CD9C5";this.NegativeColor.RgbColor="rgba(255,108,64,1)";this.NegativeColor.HexColor="#FF6C40";this.BarTextColor.RgbColor="rgba(255,255,255,1)";this.BarTextColor.HexColor="#FFFFFF";this.EnableRTL=!1;this.FieldName="";this.BarShape=BarShapeType.Cylinder}return n}(),BarShapeType;(function(n){n[n.Cylinder=0]="Cylinder";n[n.Rectangle=1]="Rectangle"})(BarShapeType||(BarShapeType={}));var MinMaxCustomization=function(){function n(){this.__type="Syncfusion.Dashboard.Core.CustomColor.MinMaxCustomization";this.Value=0;this.IsEdited=!1}return n}(),BarColor=function(){function n(){this.__type="Syncfusion.Dashboard.Core.CustomColor.BarColor";this.IsEdited=!1}return n}(),RangeNavigatorProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RangeNavigatorProperties",i.SeriesType=[],i.DefaultColors=[],i.LabelColor=new ColorSet,i.LabelColor.Color="#505D6F",i}return __extends(t,n),t}(WidgetProperties),RangeNavigatorSeriesType=function(){function n(){this.Type=RangeNavigatorType.Area;this.Name=""}return n}(),RangeNavigatorType;(function(n){n[n.Area=0]="Area";n[n.Line=1]="Line";n[n.StepLine=2]="StepLine"})(RangeNavigatorType||(RangeNavigatorType={}));var ScriptInfo=function(){function n(){this.ScriptName=null;this.NameSpace=null}return n}(),RequiredScripts=function(){function n(){this.MainScript=null;this.DependentScripts=[]}return n}(),WidgetElementsVisibility=function(){function n(){this.ShowLegend=!1;this.ShowXAxisLabels=!1;this.ShowXAxisTitle=!1;this.ShowYAxisTitle=!1;this.ShowYAxisLabels=!1}return n}(),DaConditionalResult=function(){function n(){this.ConditionalInformations=new DaConditionalInformations;this.OverallResult=!1}return n}(),DaConditionalInformations=function(){function n(){this.ConditionalInfoColleciton=[];this.GlobalFilters=[]}return n}(),DaConditionalInfo=function(){function n(){this.Filters=[]}return n}(),DaFilter=function(){function n(){this.StringCondition=new DaStringCondition}return n}(),DaMeasureFieldInfo=function(){function n(){}return n}(),DaDatasourceFieldInfo=function(){function n(){}return n}(),DaStringCondition=function(){function n(){this.Values=[];this.DateInfo=null}return n}(),DaDateFilterInfo=function(){function n(){this.DateFormatInfo=null;this.FilterValues=[];this.RelativeDateFilter=null}return n}(),DaDashboardArguments=function(){function n(){}return n}(),DaCustomExpression=function(){function n(){}return n}(),DaCustomExpressionDialogArguments=function(){function n(){}return n}(),DataAlertArgs=function(){function n(){}return n}(),ConfiguredWidgetInfo=function(){function n(){}return n}(),FilterModel=function(){function n(){}return n}(),TabbedProperties=function(n){function t(t){var i=n.call(this,t)||this;return i.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.TabbedProperties",i.ActiveTabId="",i.HideHeader=!1,i.WidgetsList=[],i.HeaderColor="#0565FF",i.HeaderFontSize=12,i.TabInfo=[],i.FilterSettings.IgnoreFilterActions=!0,i}return __extends(t,n),t}(VisualWidgetProperties),WidgetList=function(){function n(){this.TabId="";this.WidgetIds=[]}return n}(),TabInfo=function(){function n(){this.DisplayText="";this.UniqueText=""}return n}(),MultiSelectedRowInfo=function(){function n(){this.Text=[];this.UniqueColumnName=""}return n}(),InternalMultiSelectionComboBox=function(){function n(n){this.waterMarkText="Search";this.listFieldName="text";this.listBoxElement=null;this.allowVirtualScrolling=!1;this.isDataLoaded=!1;this.dataConfiguration=null;this.ajaxRequestCollection=[];this.dataGroupInfo=null;this.currentData=null;this.isInitialLoad=null;this.isFiltered=!1;this.isFilterCleared=!1;this.isTriggered=!1;this.dimensionFilterInfo=null;this.checkAllState=!0;this.filters=[];this.isInitialFilter=!1;this.filterInfo=[];this.unselectedItems={};this.isCheckAll=!1;this.selectedItems={};this.changedItems={};this.listBoxSelectedItems=[];this.listSize=1;this.filteringIndex=1;this.hasFilteredItems=!1;this.locale=null;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.dashboardDesigner._id;this.widgetHelper=this.dashboardDesigner.modules.widgetHelper;this.virtualScrollSettings=new VirtualScrollSettings;this.dataConfiguration=this.dashboardDesigner.modules.dataConfiguration;(this.dashboardDesigner.isDesignMode()||this.dashboardDesigner.isViewMode()||this.dashboardDesigner.isDesignPreviewMode())&&(this.dataGroupInfo=new BoldBIDashboard.Dashboard.DataGroupInfo)}return n.prototype.resetMultiSelection=function(n){this.dashboardDesigner.element.find("#"+n+"_popup_container").remove();this.dashboardDesigner.element.find("#"+n+"_multi_select_dropDown_text").empty()},n.prototype.renderMultiSelectionComboBox=function(n,t,i,r){var e,f,o,u;this.resetMultiSelection(t);this.isInitialFilter=!1;this.isFilterCleared=!1;e=BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.designerPanel)?null:this.widgetHelper.getCurrentWidgetInstance();BoldBIDashboard.isNullOrUndefined(e)||(this.dataGroupInfo=e.DataGroupInfo);this.dataSetId=i;this.rowId=t;f=BoldBIDashboard.buildTag("div.bbi-multiselect-dropdown-item","",{width:n.width()},{id:t+"_multi_select_dropDown"});o="All";BoldBIDashboard.isNullOrUndefined(r)||BoldBIDashboard.isNullOrUndefined(r.filterInfo)||(u=r.filterInfo.AllowFilterInfo,o=BoldBIDashboard.isNullOrUndefined(u)||BoldBIDashboard.isNullOrUndefined(u.FilterValues)||u.IsCheckAll?"All":u.FilterValues.toString());var h=BoldBIDashboard.buildTag("div",o,{"border-style":"none",width:n.width()-38,height:"100%","padding-left":"5px","line-height":"28px",float:"left","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"},{id:t+"_multi_select_dropDown_text"}),s=BoldBIDashboard.buildTag("div.bbi-designer-multi-selection-arrow-container","",{display:"inline-block",width:"33px",height:"100%"},{}),c=BoldBIDashboard.buildTag("span.bbi-designer-ejwidgets-updown e-icon e-arrow-sans-down","",{color:"var(--active-icon-normal-color)",padding:"7px 10px"});s.append(c);f.append(h,s);BoldBIDashboard.isNullOrUndefined(this.selectedItems)&&(this.selectedItems={});this.checkAllState=!0;this.selectedItems={};this.unselectedItems={};this.changedItems={};this.listBoxSelectedItems=[];this.currentData=[];this.dimensionFilterInfo=null;this.isFiltered=!1;this.isFilterCleared=!1;this.hasFilteredItems=!1;f.on("click",this.bbdesigner$.proxy(this.showPopupContainer,this,n,t,i,r));n.append(f).data("MultiSelectionComboBox",this);this.renderPopupContainer(t)},n.prototype.renderPopupContainer=function(n){var r=BoldBIDashboard.buildTag("div.e-multiselect-popup-container boldbi-dashboarddesigner","",{"min-width":"230px",height:"270px",position:"absolute",border:"1px solid var(--querydesigner-primary-border-color)","background-color":"white","border-radius":"3px",display:"none","z-index":"10100",width:"245px"},{id:n+"_popup_container","data-rowid":n}),u=BoldBIDashboard.buildTag("table","",{width:"100%",padding:"5px 10px"},{}),f=BoldBIDashboard.buildTag("tr","",{},{}),e=BoldBIDashboard.buildTag("td","",{width:"50%"},{}),o=BoldBIDashboard.buildTag("td","",{width:"50%"},{}),s=BoldBIDashboard.buildTag("input","",{},{type:"checkbox",id:n+"_popup_container_Check_Box"}),w=BoldBIDashboard.buildTag("label",this.locale.dialogText.checkAll,{"margin-left":"10px","font-size":"14px"},{"for":n+"_popup_container_Check_Box"}),t,i;this.renderSearchPanel(o,n);e.append(s,w);f.append(e,o);u.append(f);t=BoldBIDashboard.buildTag("div.e-multiselect-waiting-popup","",{height:"150px","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"1010",padding:"5px 10px"},{id:n+"_popup_container_list_Box_div"});this.listBoxElement=BoldBIDashboard.buildTag("ul","",{},{id:n+"_popup_container_list_Box"});t.append(this.listBoxElement);var h=BoldBIDashboard.buildTag("table","",{width:"100%",padding:"5px 10px","border-bottom":"1px solid var(--querydesigner-primary-border-color)"},{}),c=BoldBIDashboard.buildTag("tr","",{},{}),l=BoldBIDashboard.buildTag("td","",{width:"50%"},{}),a=BoldBIDashboard.buildTag("td","",{width:"50%"},{}),b={callBackInstance:this,callBackMethod:"updateListCondition",optionalArgs:n,groupName:"multiSelect",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:n+"_popup_container_list_Box_radio1",label:"Include",isChecked:!0,value:"include"}]},k={callBackInstance:this,callBackMethod:"updateListCondition",optionalArgs:n,groupName:"multiSelect",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:n+"_popup_container_list_Box_radio2",label:"Exclude",value:"exclude"}]};this.selectRadioButtonInclude=new BoldBIDashboard.Dashboard.RadioButton(b,l);this.selectRadioButtonExclude=new BoldBIDashboard.Dashboard.RadioButton(k,a);h.append(c);c.append(l,a);var v=BoldBIDashboard.buildTag("div.e-footerbar.e-dialog.e-js","",{width:"100%",height:"45px","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box",padding:"10px 5px"},{}),y=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.dialogOptions.applyButtonText,{float:"right"},{id:n+"_popup_container_ok_btn",type:"button"}),p=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.locale.dialogOptions.cancelButtonText,{float:"right"},{id:n+"_popup_container_cancel_btn",type:"button"});v.append(p,y);r.append(u,t,h,v);this.dashboardDesigner.element.append(r);y.on("click",this.bbdesigner$.proxy(this.updatePopupContainerInformation,this,n));p.on("click",this.bbdesigner$.proxy(this.closePopupContainer,this,n));s.BoldBIDashboardCheckBox({width:"100%",change:this.bbdesigner$.proxy(this.updateCheckItemCheckChange,this,n)});i=this.getDefaultData();this.listBoxElement.BoldBIDashboardListBox({dataSource:i.Datasource,fields:i.Fields,showCheckbox:!0,width:"100%",height:"100%",cssClass:"bbi-dbrd-control",actionBegin:this.bbdesigner$.proxy(this.renderInitialData,this),actionComplete:this.bbdesigner$.proxy(this.updateItemSelection,this)});this.listBoxElement.BoldBIDashboardListBox("hideAllItems");t.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup bbi-designer-loader",template:this.dashboardDesigner.getWaitingPopupTemplate()})},n.prototype.renderSearchPanel=function(n,t){var i=BoldBIDashboard.buildTag("div","",{width:"107px",height:"16px",float:"right","margin-top":"3px"},{id:t+"_popup_container_searchPanel"}),r=BoldBIDashboard.buildTag("input.bbi-designer-fieldcontainer-search-dataassign","",{"font-style":"italic"},{id:t+"_popup_container_searchBox",placeholder:this.waterMarkText}),u=BoldBIDashboard.buildTag("div","",{},{id:t+"_popup_container_searchIcon","class":"e-icon e-search bbi-designer-popup-container-search-icon"});i.append(r);i.append(u);n.append(i);r.on("focus",this.bbdesigner$.proxy(this.onSearchFocus,this,t))},n.prototype.showPopupContainer=function(n,t,i,r){var e=this.getMultiSelectionComboBox(t),l=e.attr("data-fieldValue"),h=e.attr("data-fieldText"),o=this.dateFormats(e.attr("data-dateFormat")),f=this.getPopupContainer(t),a=f.height(),u;this.listBoxElement=this.getPopupListBox(t);var c=this.listBoxElement.data("BoldBIDashboardListBox"),y=f.css("display")==="block",s=n.offset(),v=s.left+parseFloat(n.css("padding-left"));n.width()<245&&(v=s.left+parseFloat(n.css("padding-left"))-(246-n.width()));var p=window.innerHeight-(s.top+n.height()),w=p>a,b=w?s.top+n.height()+2:s.top-a-4;f.css({left:v-this.dashboardDesigner.element.offset().left,top:b-this.dashboardDesigner.element.offset().top,display:y?"none":"block","z-index":BoldBIDashboard.getMaxZindex()});BoldBIDashboard.isNullOrUndefined(c)||c.hideAllItems();this.updateDropDownIcon(f,t);u=this.getPopupListBoxDiv(t);f.css("display")==="block"?(BoldBIDashboard.isNullOrUndefined(r)?BoldBIDashboard.isNullOrUndefined(o)?BoldBIDashboard.isNullOrUndefined(u.attr("data-fieldText"))||u.attr("data-fieldText")!==h?(this.filterInfo=[{Id:l,Name:h,SummaryType:"None",FieldType:"Dimensions"}],this.clearListItems(),this.getInitialFilterValues(t,o)):this.setPopupValues(t):BoldBIDashboard.isNullOrUndefined(u.attr("data-fieldText"))||u.attr("data-fieldText")!==h||BoldBIDashboard.isNullOrUndefined(u.attr("data-dateField"))||u.attr("data-dateField")!==o?(this.filterInfo=[{Id:l,Name:h,SummaryType:"None",FieldType:"Dimensions",DateTimeFormat:o}],this.clearListItems(),this.getInitialFilterValues(t,o)):this.setPopupValues(t):(this.dimensionFilterInfo=r,BoldBIDashboard.isNullOrUndefined(u.attr("data-isLoaded"))?this.getFieldValues(t,r):this.setPopupValues(t)),this.dashboardDesigner.element.find(".e-multiselect-popup-container-visible").length>0&&this.updatePopupContainerVisibility(this.dashboardDesigner.element.find(".e-multiselect-popup-container-visible")),e.addClass("bbi-dbrd-filter-dropdown"),f.addClass("e-multiselect-popup-container-visible")):(f.removeClass("e-multiselect-popup-container-visible"),e.removeClass("bbi-dbrd-filter-dropdown"),this.hideLoadingIndicator(t));c._refreshScroller()},n.prototype.getInitialFilterValues=function(n,t){this.ajaxRequestCollection.push(this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.getData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.FilterAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.getData,fieldInfo:this.filterInfo,dataSetId:this.dataSetId,filterType:"InitialFilter",hasFilter:!0,isQueryDesignerMode:this.dashboardDesigner.isQueryDesignerMode})},{fnction:this.bbdesigner$.proxy(this.setFieldInformation,this,n,this.filterInfo[0].Name,t),indicator:[this.bbdesigner$.proxy(this.showLoadingIndicator,this,n),this.bbdesigner$.proxy(this.hideLoadingIndicator,this,n)]}))},n.prototype.getFieldValues=function(n,t){var i,r;this.virtualScrollSettings.StartIndex=1;i=t.fieldInfo;i.FilterInfo=null;r=[i];this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.getData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.FilterAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.getData,fieldInfo:r,dataSetId:i.DatasourceID,startIndex:this.virtualScrollSettings.StartIndex,pageSize:this.virtualScrollSettings.PageSize,isQueryDesignerMode:this.dashboardDesigner.isQueryDesignerMode})},{fnction:this.bbdesigner$.proxy(this.setFilter,this,t,n),indicator:[this.bbdesigner$.proxy(this.showLoadingIndicator,this,n),this.bbdesigner$.proxy(this.hideLoadingIndicator,this,n)]})},n.prototype.setFilter=function(n,t,i){var u=JSON.parse(i.jsonData),r;this.allowVirtualScrolling=i.hasMoreRecords;this.listFieldName=n.fieldInfo.UniqueColumnName;this.setDataSource(t,u);this.getPopupListBoxDiv(t).attr("data-isLoaded","loaded");r=!BoldBIDashboard.isNullOrUndefined(n.filterInfo)&&!BoldBIDashboard.isNullOrUndefined(n.filterInfo.AllowFilterInfo)?n.filterInfo.AllowFilterInfo:null;BoldBIDashboard.isNullOrUndefined(r)||this.populateMultiSelectionItem(t,r);this.setPopupValues(t)},n.prototype.setDataSource=function(n,t){this.currentData=this.getDataSource(t);this.isInitialLoad=!0;this.listBoxElement.BoldBIDashboardListBox({dataSource:this.allowVirtualScrolling?this.updateDataManager():this.currentData,allowVirtualScrolling:!0,fields:{id:this.listFieldName,text:this.listFieldName},virtualScrollMode:"continuous",itemRequestCount:this.virtualScrollSettings.PageSize,actionComplete:this.bbdesigner$.proxy(this.updateItemSelection,this),actionSuccess:this.bbdesigner$.proxy(this.addLoader,this)});this.isInitialLoad=!1;this.listBoxElement.BoldBIDashboardListBox("showAllItems")},n.prototype.getDefaultData=function(){return{Datasource:[{itemId:"i1",itemName:"Item1"},{itemId:"i2",itemName:"Item2"},{itemId:"i3",itemName:"Item3"},{itemId:"i4",itemName:"Item4"},{itemId:"i5",itemName:"Item5"},{itemId:"i6",itemName:"Item6"},{itemId:"i7",itemName:"Item7"}],Fields:{id:"itemId",text:"itemName"}}},n.prototype.updateDataManager=function(){var n=this,t=new BoldBIDashboard.Adaptor(null).extend({processQuery:this.bbdesigner$.proxy(this.processQuery,this),beforeSend:function(t,i){n.dashboardDesigner.beforeSendRequestForDataManager("OnDemandDataAction",i)},processResponse:this.bbdesigner$.proxy(this.processResponse,this)});return new BoldBIDashboard.DataManager({url:this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,adaptor:new t,crossDomain:!0})},n.prototype.renderInitialData=function(n){if(this.isInitialLoad&&!this.isFiltered){n.cancel=!0;var t=this.listBoxElement.data("BoldBIDashboardListBox");t.mergeData(this.currentData,!0);t.option("actionComplete",this.bbdesigner$.proxy(this.updateItemSelection,this));t.model.totalItemsCount=this.currentData.length+1;this.setItemEnable(this.rowId,!0);BoldBIDashboard.DashboardUtil.buttonEnable(this.getPopupCancelButton(this.rowId),!0)}},n.prototype.processQuery=function(n){var r,t,i,u,o,f;if(this.isInitialLoad&&!this.isFiltered||this.isTriggered)return n.cancel=!0,!1;for(r=this.listBoxElement.data("BoldBIDashboardListBox"),this.setItemEnable(this.rowId,!1),BoldBIDashboard.DashboardUtil.buttonEnable(this.getPopupCancelButton(this.rowId),!1),this.virtualScrollSettings.StartIndex=this.isFiltered?this.filteringIndex>1?r._listSize+1:1:r._listSize+1,t=this.isInitialFilter?this.filterInfo:this.dataConfiguration.convertDataGroupInfoToFieldInfo(this.dataGroupInfo),i=0;i<t.length;i++)if(t[i].Id===this.listFieldName||t[i].UniqueColumnName===this.listFieldName){if(t[i].FilterInfo=null,this.isFiltered&&(u=JSON.parse(JSON.stringify(t[i])),t=[],t.push(u),o=this.getPopupSearchPanel(this.rowId),f=this.getSearchTextBox(o,this.rowId),f.val()!=="")){var s=new FilterInfo,e=JSON.parse(JSON.stringify(u));s.DimensionFilterInfo=this.getFilterInfo(this,f.val());e["FilterInfo"]=s;e["isVisible"]=!1;t.push(e);this.isTriggered=!0}break}return r.setModel({checkChange:null}),{url:n.dataSource.url,type:"POST",contentType:"application/json",data:JSON.stringify({designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.getData,className:BoldBIDashboard.DashboardUtil.DesignerAction.FilterAction,fieldInfo:t,dataSetId:BoldBIDashboard.isNullOrUndefined(this.dimensionFilterInfo)?this.dataSetId:this.dimensionFilterInfo.fieldInfo.DatasourceID,startIndex:this.virtualScrollSettings.StartIndex,pageSize:this.virtualScrollSettings.PageSize,filterType:this.isInitialFilter?"InitialFilter":"null",hasFilter:this.isFiltered,isQueryDesignerMode:this.dashboardDesigner.isQueryDesignerMode})}},n.prototype.processResponse=function(n){var t=this.listBoxElement.data("BoldBIDashboardListBox"),i;if(BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(n)||n.Error||n.data==="[]")this.isTriggered=!1,this.isFiltered&&(this.clearListItems(),this.getPopupSearchPanel(this.rowId).children().prop("disabled",!1).focus());else return i=JSON.parse(n.jsonData),this.isDataLoaded=!0,this.setItemEnable(this.rowId,!0),BoldBIDashboard.DashboardUtil.buttonEnable(this.getPopupCancelButton(this.rowId),!0),t.option("actionComplete",this.bbdesigner$.proxy(this.updateItemSelection,this)),this.isTriggered=!1,this.isFiltered?(this.listBoxElement.removeAttr("style"),t._refreshScroller(),t._loadInitialRemoteData=!0,this.filteringIndex===1&&(this.clearListItems(),t.mergeData(i,!0),this.filteringIndex=i.length+1,i=[]),t.model.totalItemsCount=n.hasMoreRecords?t._listSize+i.length+1:i.length<=5?1:i.length,this.removeListboxLoader(t),i):(t.model.totalItemsCount=n.hasMoreRecords?t._listSize+i.length+1:t._listSize+i.length,i);return[]},n.prototype.removeListboxLoader=function(n){BoldBIDashboard.isNullOrUndefined(n)||(n.listContainer.removeClass("e-load"),this.getPopupSearchPanel(this.rowId).children().prop("disabled",!1).focus())},n.prototype.processFilterDataRequest=function(n){var t=this,r=this.listBoxElement.data("BoldBIDashboardListBox"),i=this.getPopupSearchPanel(this.rowId),u=this.getSearchTextBox(i,this.rowId);this.getSearchIcon(i,n).addClass("e-close_01").removeClass("e-search");this.listBoxSelectedItems=[];r.listContainer.find("li .e-chkbox-wrap").filter("[aria-checked = true]").parent().each(function(n,i){t.listBoxSelectedItems.push(i.textContent)});this.clearListItems();setTimeout(function(){if(u.val().length>0){t.getPopupSearchPanel(n).children().prop("disabled",!0);u.removeClass("e-focus");t.getSearchIcon(i,n).off("click",t.bbdesigner$.proxy(t.onSearchCloseClick,t,n));t.getSearchIcon(i,n).on("click",t.bbdesigner$.proxy(t.onSearchCloseClick,t,n));r._oldStartValue=undefined;t.isFilterCleared=!1;t.isFiltered=!0;t.filteringIndex=1;t.filterInfo=[t.filterInfo[0]];t.listBoxElement.BoldBIDashboardListBox({dataSource:t.updateDataManager(),allowVirtualScrolling:!0,totalItemsCount:1,fields:{id:t.listFieldName,text:t.listFieldName},virtualScrollMode:"continuous",itemRequestCount:t.virtualScrollSettings.PageSize})}else t.getSearchIcon(i,n).addClass("e-search").removeClass("e-close_01"),t.isFilterCleared=!1,t.isFiltered=!1,t.isInitialFilter?(t.filterInfo=[t.filterInfo[0]],t.getInitialFilterValues(n,t.dateFormats(t.getMultiSelectionComboBox(n).attr("data-dateFormat")))):t.getFieldValues(n,t.dimensionFilterInfo)},800)},n.prototype.getFilterInfo=function(n,t){var i=new DimensionFilterInfo;return i.IsAllowFilteringApplied=!0,i.AllowFilterInfo=new AllowFilteringInfo,i.AllowFilterInfo.Conditions=BoldBIDashboard.isNullOrUndefined(this.getMultiSelectionComboBox(this.rowId).attr("data-dateField")||this.getPopupListBoxDiv(this.rowId).attr("data-dateField"))?TextFilterOption.Contains.toString():null,i.AllowFilterInfo.IsInclude=!0,i.AllowFilterInfo.FilterValues=[t],i},n.prototype.getDataSource=function(n){for(var i=function(t){n[t][Object.keys(n[t])]=Object.keys(n[t].valueOf()).map(function(i){return n[t].valueOf()[i].toString()})},t=0;t<n.length;t++)i(t);return n},n.prototype.setFieldInformation=function(n,t,i,r){var u,f,o,e;if(this.isInitialFilter=!0,u=JSON.parse(r.jsonData),this.filters.length!==0&&this.getFilterItems(this.filters,t,n),!BoldBIDashboard.isNullOrUndefined(u)&&u.length>0){f=this.getPopupListBox(n).data("BoldBIDashboardListBox");for(o in u[0])this.listFieldName=o;u=this.getDataSource(u);this.allowVirtualScrolling=r.hasMoreRecords;this.setDataSource(n,u);e=this.getPopupListBoxDiv(n);BoldBIDashboard.isNullOrUndefined(f)||(f._oldStartValue=undefined);BoldBIDashboard.isNullOrUndefined(i)||e.attr("data-dateField",i);e.attr("data-fieldText",t);this.setPopupValues(n)}},n.prototype.addLoader=function(){var n=this.listBoxElement.data("BoldBIDashboardListBox");this.isFiltered&&this.isTriggered&&n.listContainer.addClass("e-load")},n.prototype.getFilterItems=function(n,t,i){var r;this.selectedItems={};var f={},u=n.filter(function(n){return n.rowId===i}),e=n.findIndex(function(n){return n.rowId===i});u.length!=0?(r={},u[0].Type==="Dimension"&&u[0].Name===t?(r=u[0].DimensionFilterSchemaInfo,r.DimensionFilterCondition!="Inclusion"&&(this.filters[e].DimensionFilterSchemaInfo.FilterValues={}),f={FilterValues:r.FilterValues,IsInclude:r.IsInclude,IsCheckAll:r.IsCheckAll,CheckAllState:r.CheckAllState},this.populateMultiSelectionItem(i,f)):u[0].Type==="Date"&&u[0].Name===t?(r=u[0].DateFilterSchemaInfo,f={FilterValues:r.FilterValues,IsInclude:r.IsInclude,IsCheckAll:r.IsCheckAll,CheckAllState:r.CheckAllState},this.populateMultiSelectionItem(i,f)):(this.checkAllState=!0,this.filters.splice(e,1))):this.checkAllState=!0},n.prototype.updateItemSelection=function(){var n=this.listBoxElement.data("BoldBIDashboardListBox"),r=!1,i=this.getPopupCheckBox(this.rowId).data("BoldBIDashboardCheckBox"),t;BoldBIDashboard.isNullOrUndefined(n)||(!BoldBIDashboard.isNullOrUndefined(i)&&(BoldBIDashboard.isNullOrUndefined(i.model.checkState)||i.model.checkState.indexOf("check")==0&&i.model.checked&&Object.keys(this.changedItems).length==0&&Object.keys(this.selectedItems).length==0)&&n.checkAll(),this.hasFilteredItems&&(t=this.checkAllState?this.getItemIndices(this.unselectedItems):this.getItemIndices(this.selectedItems),BoldBIDashboard.isNullOrUndefined(this.checkAllState)||this.checkAllState?n.checkAll():n.uncheckAll(),t.length>0&&(r=!0,this.checkAllState?n.uncheckItemsByIndices(t):n.checkItemsByIndices(t))),Object.keys(this.changedItems).length>0?(t=this.getItemIndices(this.changedItems),t.length>0?this.checkAllState?((n._listSize>=100||this.listSize>=100||!this.allowVirtualScrolling)&&n.checkAll(),n.uncheckItemsByIndices(t)):(r||n.uncheckAll(),n.checkItemsByIndices(t)):r||(this.checkAllState?n.checkAll():n.uncheckAll())):this.checkAllState||Object.keys(this.changedItems).length!=0||this.hasFilteredItems||n.uncheckAll(),n.setModel({checkChange:this.bbdesigner$.proxy(this.updateListItemCheckChange,this,this.rowId)}))},n.prototype.getItemIndices=function(n){var i=this,t=[];return Object.keys(n).forEach(function(n){var u=i.listBoxElement.find("li").filter(function(){return i.bbdesigner$(this).text()===n}),r;BoldBIDashboard.isNullOrUndefined(u)||(r=u.index(),r!==-1&&t.indexOf(r)===-1&&t.push(r))}),t},n.prototype.getCheckedUncheckedItems=function(n){for(var r=[],i=this.listBoxElement.find("li .e-chkbox-wrap").filter("[aria-checked ="+n+"]"),t=0;t<i.length;t++)this.selectedItems.hasOwnProperty(i[t].parentElement.textContent)||r.push(i[t].parentElement.textContent);return r},n.prototype.getSelectedItems=function(n,t){var u,f,r,i;if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0){if(u=this.listBoxElement.find("li .e-chkbox-wrap"),f=u.length-n.length,this.hasFilteredItems=n.length>0,this.currentData!=null&&(t&&this.checkAllState||!t&&this.checkAllState))for(r=0;r<this.currentData.length;r++)n.indexOf(Object.values(this.currentData[r])[0].toString())==-1&&(this.selectedItems[Object.values(this.currentData[r])[0].toString()]=!0);for(i=0;i<n.length;i++)t&&this.checkAllState||!t&&this.checkAllState&&!this.isCheckAll?this.unselectedItems[i]!=""&&(this.unselectedItems[n[i]]=!1):this.selectedItems[i]!=""&&(this.selectedItems[n[i]]=!0)}},n.prototype.setPopupValues=function(n){var t=this.getPopupCheckBox(n),e=this.getPopupListBox(n),i=e.data("BoldBIDashboardListBox"),u,r,f;BoldBIDashboard.isNullOrUndefined(i)||i.showAllItems();u=this.getCheckedUncheckedItems(!0);Object.keys(this.changedItems).length===0&&(this.changedItems=Object.keys(this.selectedItems).length>Object.keys(this.unselectedItems).length&&Object.keys(this.unselectedItems).length===0?this.selectedItems:this.unselectedItems);r=this.getPopupRadioButton1(n);!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0&&(this.checkAllState&&Object.keys(this.changedItems).length==0&&Object.keys(this.selectedItems).length==0&&Object.keys(this.unselectedItems).length==0&&u.length===0?(t.data("BoldBIDashboardCheckBox").setModel({enableTriState:!1}),t.data("BoldBIDashboardCheckBox").setModel({checkState:"checked",checked:!0}),i.checkAll(),i.setModel({checkChange:this.bbdesigner$.proxy(this.updateListItemCheckChange,this,n)})):this.checkAllState||Object.keys(this.changedItems).length!==0||Object.keys(this.selectedItems).length!=0||Object.keys(this.unselectedItems).length!=0||u.length!==0?BoldBIDashboard.isNullOrUndefined(t.data("Filters"))?BoldBIDashboard.isNullOrUndefined(t.data("Filters"))&&Object.keys(this.changedItems).length>=i._listSize?t.data("BoldBIDashboardCheckBox").setModel({checkState:"check",checked:!0}):t.data("BoldBIDashboardCheckBox").setModel({enableTriState:!0,checkState:"indeterminate"}):i._listSize<=t.data("Filters").length&&Object.keys(this.changedItems).length>=i._listSize&&this.checkAllState||i._listSize===t.data("Filters").length&&this.getPopupRadioButton1(n).attr("Condition")==="Exclude"?t.data("BoldBIDashboardCheckBox").setModel({checkState:"check",checked:!0}):t.data("BoldBIDashboardCheckBox").setModel({enableTriState:!0,checkState:"indeterminate"}):t.data("BoldBIDashboardCheckBox").setModel({checkState:"check",checked:!1}),this.isFilterCleared||(f=BoldBIDashboard.isNullOrUndefined(r.attr("Condition"))||r.attr("Condition")==="Include",f?r.prop("checked",f):this.getPopupRadioButton2(n).prop("checked",!0)))},n.prototype.getPopupContainerInformation=function(n){var t=this.getPopupCheckBox(n),u=this.getPopupListBox(n),i=this.getPopupRadioButton1(n),r=BoldBIDashboard.isNullOrUndefined(t.attr("IsSelectAll"))||t.attr("IsSelectAll")==="true";return{IsCheckAll:r,CheckAllState:this.checkAllState,IsInclude:BoldBIDashboard.isNullOrUndefined(i.attr("Condition"))||i.attr("Condition")==="Include"&&!this.checkAllState||i.attr("Condition")==="Exclude"&&this.checkAllState&&!r,FilterValues:BoldBIDashboard.isNullOrUndefined(t.data("Filters"))?null:t.data("Filters")}},n.prototype.showLoadingIndicator=function(n){var t=this.listBoxElement.data("BoldBIDashboardListBox");BoldBIDashboard.isNullOrUndefined(t)||t.listContainer.hasClass("e-load")||this.getPopupListBoxDiv(n).BoldBIDashboardWaitingPopup("show");this.getPopupCheckBox(n).data("BoldBIDashboardCheckBox").disable();this.getPopupRadioButton1(n).prop("disabled",!0);this.getPopupRadioButton2(n).prop("disabled",!0);this.setItemEnable(n,!1);BoldBIDashboard.DashboardUtil.buttonEnable(this.getPopupCancelButton(n),!1);this.getPopupSearchPanel(n).children().prop("disabled",!0)},n.prototype.hideLoadingIndicator=function(n){var t=this.getPopupContainer(n);!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0&&(this.getPopupListBoxDiv(n).BoldBIDashboardWaitingPopup("hide"),this.getPopupCheckBox(n).data("BoldBIDashboardCheckBox").enable(),this.getPopupRadioButton1(n).prop("disabled",!1),this.getPopupRadioButton2(n).prop("disabled",!1),this.setItemEnable(n,!0),BoldBIDashboard.DashboardUtil.buttonEnable(this.getPopupCancelButton(n),!0),this.getPopupSearchPanel(n).children().prop("disabled",!1))},n.prototype.populateMultiSelectionItem=function(n,t){var i;BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(t.FilterValues)?(this.getComboBoxTextField(n).text("All"),this.checkAllState=!0,this.getPopupCheckBox(n).attr("IsSelectAll","true"),this.isFilterCleared||this.getPopupRadioButton1(n).attr("Condition","Include"),this.getPopupCheckBox(n).data("Filters",null)):BoldBIDashboard.isNullOrUndefined(t)||Object.keys(this.selectedItems).length!=0&&Object.keys(this.unselectedItems).length!=0?(Object.keys(this.selectedItems).length>0||Object.keys(this.unselectedItems).length>0)&&(this.checkAllState||(i=this.getPopupCheckBox(n).data("Filters"),this.getComboBoxTextField(n).text(i))):this.isFilterCleared||(this.checkAllState=t.CheckAllState,this.isCheckAll=t.IsCheckAll,this.isFiltered=!1,this.getSelectedItems(t.FilterValues,t.IsInclude),i=t.IsCheckAll||BoldBIDashboard.isNullOrUndefined(t.FilterValues)?"All":this.checkAllState?this.locale.queryDesigner.selectedMultipleValuesInComboBox:t.FilterValues.toString().replace(/^[,\s]+|[,\s]+$/g,"").replace(/,[,\s]*,/g,","),this.getComboBoxTextField(n).text(i),this.getPopupCheckBox(n).data("Filters",this.getFilterArrayValues(t)),this.getPopupCheckBox(n).attr("IsSelectAll",t.IsCheckAll),this.getPopupRadioButton1(n).attr("Condition",t.IsInclude&&!t.CheckAllState||!t.IsInclude&&t.CheckAllState&&!this.isCheckAll?"Include":"Exclude"))},n.prototype.getFilterArrayValues=function(n){var i="",t=[];return!BoldBIDashboard.isNullOrUndefined(n.FilterValues)&&n.FilterValues.length>0&&!n.IsCheckAll?n.FilterValues.forEach(function(n){n.indexOf(i)!==-1?n.split(i).forEach(function(){n!==""&&t.push(n)}):n!==""&&t.push(n)}):t=n.FilterValues,t},n.prototype.onSearchFocus=function(n){var i=this.getPopupSearchPanel(n),t=this.getSearchTextBox(i,n);t.addClass("e-focus");t.val()===""&&t.val("");t.css("color","grey");t.off("keyup",this.bbdesigner$.proxy(this.processFilterDataRequest,this));t.on("keyup",this.bbdesigner$.proxy(this.processFilterDataRequest,this,n))},n.prototype.clearSearchText=function(n,t,i){this.getSearchIcon(n,t).addClass("e-search").removeClass("e-close_01");var r=this.getSearchIcon(n,t);this.clearListItems();this.isFiltered=!1;this.isFilterCleared=!0;i.off("keyup",this.bbdesigner$.proxy(this.processFilterDataRequest,this));r.off("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this,t));i.removeClass("e-focus");i.val("");i.css("color","lightgrey");this.isInitialFilter?(this.filterInfo=[this.filterInfo[0]],this.getInitialFilterValues(t,this.dateFormats(this.getMultiSelectionComboBox(t).attr("data-dateFormat")))):this.getFieldValues(t,this.dimensionFilterInfo)},n.prototype.clearListItems=function(){var n=this.listBoxElement.data("BoldBIDashboardListBox");BoldBIDashboard.isNullOrUndefined(n)||(n._loadInitialRemoteData=!0,this.listSize=n._listSize,n._oldStartValue=undefined,n.totalItemsCount=n._listSize,!BoldBIDashboard.isNullOrUndefined(n._listitems)&&n._listSize>0?this.listBoxElement.empty():n.model.totalItemsCount=n._listSize+1)},n.prototype.onSearchCloseClick=function(n){var t=this.getPopupSearchPanel(n),i=this.getSearchTextBox(t,n);this.clearSearchText(t,n,i)},n.prototype.updateCheckItemCheckChange=function(n,t){var f=this,o=this.getPopupCheckBox(n).data("BoldBIDashboardCheckBox"),i=this.getPopupListBox(n).data("BoldBIDashboardListBox"),r,e,u;if(t.isInteraction){if(this.isFiltered&&i.mergeValue.length>0&&!t.isChecked){for(this.changedItems={},i.mergeValue.forEach(function(n){var i=Object.keys(n)[0];delete f.changedItems[n[i]];delete f.selectedItems[n[i]];delete f.unselectedItems[n[i]];f.checkAllState!==t.isChecked&&(f.changedItems[n[i]]=t.isChecked)}),r=0;r<i.mergeValue.length;r++)i.uncheckItemByIndex(r),e=Object.keys(i.mergeValue[r])[0],delete this.changedItems[i.mergeValue[r][e]];this.checkAllState=!1}else i.setModel({checkChange:null}),o.setModel({enableTriState:!1}),this.changedItems={},this.selectedItems={},this.unselectedItems={},u=this.filters.findIndex(function(t){return t.rowId==n}),u!=-1&&(this.filters[u].Type=="Dimension"?this.filters[u].DimensionFilterSchemaInfo.FilterValues={}:this.filters[u].Type=="Date"&&(this.filters[u].DateFilterSchemaInfo.FilterValues={})),this.hasFilteredItems=!1,t.isChecked?(this.checkAllState=!0,i.checkAll(),this.setItemEnable(n,!0)):(this.checkAllState=!1,i.uncheckAll(),this.setItemEnable(n,!1)),i.setModel({checkChange:this.bbdesigner$.proxy(this.updateListItemCheckChange,this,n)});i.setModel({checkChange:this.bbdesigner$.proxy(this.updateListItemCheckChange,this,n)})}},n.prototype.updateListItemCheckChange=function(n,t){var f,i,r;if(t.isInteraction&&!BoldBIDashboard.isNullOrUndefined(t.event)){var u=this.getPopupCheckBox(n).data("BoldBIDashboardCheckBox"),s=this.getPopupListBox(n).data("BoldBIDashboardListBox"),o=t.item[0].firstElementChild,e=JSON.parse(this.bbdesigner$(o).attr("aria-checked"));if(this.checkAllState==e||(!this.checkAllState||this.unselectedItems.hasOwnProperty(t.text))&&(this.checkAllState||this.selectedItems.hasOwnProperty(t.text))){if(delete this.changedItems[t.text],!BoldBIDashboard.isNullOrUndefined(this.filters))for(f=0;f<this.filters.length;f++)if(i=this.filters[f].DimensionFilterSchemaInfo.FilterValues,!BoldBIDashboard.isNullOrUndefined(i))for(r=0;r<i.length;r++)i[r]===t.text&&i.splice(r,1);delete this.selectedItems[t.text];delete this.unselectedItems[t.text]}else Object.keys(this.unselectedItems).length>0&&!this.isFiltered&&(this.changedItems=this.unselectedItems),this.changedItems[t.text]=e;(this.listBoxElement.find("li .e-chkbox-wrap").filter("[aria-checked = true]").length!=0||!this.isFiltered||this.checkAllState||Object.keys(this.selectedItems).length!=0)&&(this.listBoxElement.find("li .e-chkbox-wrap").filter("[aria-checked = true]").length!=0||this.isFiltered)?this.listBoxElement.find("li .e-chkbox-wrap").filter("[aria-checked = false]").length==0&&this.isFiltered&&this.checkAllState&&Object.keys(this.changedItems).length==0||this.listBoxElement.find("li .e-chkbox-wrap").filter("[aria-checked = false]").length==0&&!this.isFiltered?(this.setItemEnable(n,!0),u.setModel({enableTriState:!1}),u.setModel({checkState:"check",checked:!0}),this.isFiltered||(this.checkAllState=!0)):(this.setItemEnable(n,!0),u.setModel({enableTriState:!0,checkState:"indeterminate"})):(this.setItemEnable(n,!1),u.setModel({checkState:"check",checked:!1}),this.isFiltered||(this.checkAllState=!1))}},n.prototype.updateListCondition=function(n){var i=this.getPopupListBox(n.optionalArgs).data("BoldBIDashboardListBox"),t;t=BoldBIDashboard.isNullOrUndefined(i)?this.getCheckedUncheckedItems(!0):i.getCheckedItems();t.length===0&&this.checkAllState&&Object.keys(this.unselectedItems).length==0&&Object.keys(this.changedItems).length==0||t.length===0&&!this.checkAllState&&Object.keys(this.selectedItems).length==0&&Object.keys(this.changedItems).length==0?this.setItemEnable(n.optionalArgs,!1):this.setItemEnable(n.optionalArgs,!0)},n.prototype.setItemEnable=function(n,t){var i=this.getPopupOkButton(n);BoldBIDashboard.DashboardUtil.buttonEnable(i,t)},n.prototype.updatePopupContainerInformation=function(n){var i,r,f,e,o,t,h,a;if(this.selectedItems={},i=this.getCheckedUncheckedItems(!0),r=this.getCheckedUncheckedItems(!1),this.isFiltered||Object.keys(this.changedItems).length>0)if(this.checkAllState)if(this.checkAllState&&Object.keys(this.changedItems).length>0){for(t=0;t<this.listBoxSelectedItems.length;t++)this.selectedItems.hasOwnProperty(this.listBoxSelectedItems[t])||i.includes(this.listBoxSelectedItems[t])||i.push(this.listBoxSelectedItems[t]);for(e=Object.keys(this.changedItems),t=0;t<e.length;t++)this.unselectedItems.hasOwnProperty(e[t])||r.includes(e[t])||this.changedItems[e[t]]||r.push(e[t]);r=r.concat(Object.keys(this.unselectedItems));this.filterInfo.length>0&&!BoldBIDashboard.isNullOrUndefined(this.filterInfo[0])&&(this.filterInfo[0].CheckAllState=this.checkAllState)}else Object.keys(this.changedItems).length==0&&Object.keys(this.unselectedItems).length==0&&this.checkAllState&&(i=[],this.selectedItems=[]);else for(f=Object.keys(this.changedItems),t=0;t<f.length;t++)this.selectedItems.hasOwnProperty(f[t])||i.includes(f[t])||!this.changedItems[f[t]]||i.push(f[t]);if(o=Object.keys(this.unselectedItems),o.length>0)for(t=0;t<o.length;t++)r.includes(o[t])||r.push(o[t]);var l=this.getPopupContainer(n),c=this.getComboBoxTextField(n),s=this.getPopupCheckBox(n),v=this.getPopupListBox(n),y=v.data("BoldBIDashboardListBox"),p=this.isFiltered,u=[];Object.keys(this.selectedItems).length>0&&(u=Object.keys(this.selectedItems));u=u.concat(i);this.checkAllState?this.UpdateFilterValues(n,r):this.UpdateFilterValues(n,i);this.clearSearchList(n);l.css("display","none");this.updateDropDownIcon(l,n);h=this.getPopupRadioButton1(n).prop("checked")?"Include":"Exclude";s.data("BoldBIDashboardCheckBox").model.checked||u.length==0?(c.text("All"),s.attr("IsSelectAll","true"),s.data("Filters",h==="Exclude"&&!this.allowVirtualScrolling?u:null)):(this.checkAllState?c.text(this.locale.queryDesigner.selectedMultipleValuesInComboBox):(a=this.listBoxElement.find("li .e-chkbox-wrap"),a.length-i.length==0?c.text("All"):c.text(u.toString())),s.attr("IsSelectAll","false"),s.data("Filters",this.checkAllState?r:u),this.getSelectedItems(this.checkAllState?r:i,h==="Include"&&!this.checkAllState||h==="Exclude"&&this.checkAllState),this.dashboardDesigner.element.find(".e-error-tip").css("display","none"));this.getPopupRadioButton1(n).attr("Condition",h);l.removeClass("e-multiselect-popup-container-visible")},n.prototype.UpdateFilterValues=function(n,t){var u=this.filters.filter(function(t){return t.rowId===n}),i=this.filters.findIndex(function(t){return t.rowId===n}),r,f;if(this.selectedItems={},u.length!=0){if(u[0].Type=="Date"){for(r=0;r<t.length;r++)this.selectedItems[t[r]]=!0;this.filters[i].DateFilterSchemaInfo.CheckAllState=this.checkAllState;this.filters[i].DateFilterSchemaInfo.IsInclude=this.getPopupRadioButton1(n).prop("checked");delete this.filters[i].DateFilterSchemaInfo.FilterValues;this.filters[i].DateFilterSchemaInfo.FilterValues=t}else if(u[0].Type=="Dimension"){for(r=0;r<t.length;r++)this.selectedItems[t[r]]=!0;this.filters[i].DimensionFilterSchemaInfo.CheckAllState=this.checkAllState;this.filters[i].DimensionFilterSchemaInfo.IsInclude=this.getPopupRadioButton1(n).prop("checked");delete this.filters[i].DimensionFilterSchemaInfo.FilterValues;this.filters[i].DimensionFilterSchemaInfo.FilterValues=t}}else f={rowId:n,DimensionFilterSchemaInfo:{CheckAllState:this.checkAllState,IsInclude:this.getPopupRadioButton1(n).prop("checked")?!0:!1},DateFilterSchemaInfo:{CheckAllState:this.checkAllState,IsInclude:this.getPopupRadioButton1(n).prop("checked")?!0:!1}},this.filters[this.filters.length]=f},n.prototype.clearSearchList=function(n){var i=this.getPopupSearchPanel(n),t=this.getSearchTextBox(i,n),r=t.val();r!==""&&(t.removeClass("e-focus"),this.clearSearchText(i,n,t))},n.prototype.closePopupContainer=function(n){var t,i;this.clearSearchList(n);t=this.getPopupContainer(n);t.css("display","none");t.removeClass("e-multiselect-popup-container-visible");this.updateDropDownIcon(t,n);i=this.getPopupListBoxDiv(n).data("BoldBIDashboardWaitingPopup");i.model.showOnInit&&(this.hideLoadingIndicator(n),this.killPendingRequest())},n.prototype.hidePopups=function(){for(var i,t=this.dashboardDesigner.element.find(".e-multiselect-popup-container:visible"),n=0;n<t.length;n++)i=t.eq(n).attr("data-rowid"),this.getMultiSelectionComboBox(i).parent().data("MultiSelectionComboBox").hideMultiSelectionWaitingPopup(!0)},n.prototype.hideMultiSelectionWaitingPopup=function(){var t=this,i=this.dashboardDesigner.element.find(".e-multiselect-popup-container:visible .e-multiselect-waiting-popup"),n=this.bbdesigner$;i.each(function(i,r){n(r).length>0&&n(r).data("BoldBIDashboardWaitingPopup").model.showOnInit&&t.killPendingRequest()})},n.prototype.killPendingRequest=function(){if(this.ajaxRequestCollection.length>0)for(var n=0;n<this.ajaxRequestCollection.length;n++)this.ajaxRequestCollection[n].readyState<4&&this.ajaxRequestCollection[n].abort();this.ajaxRequestCollection=[]},n.prototype.isMultiSelectionPopupLoading=function(){var n=!1,i=this.dashboardDesigner.element.find(".e-multiselect-popup-container:visible").find(".e-multiselect-waiting-popup"),t=this.bbdesigner$;return i.each(function(i,r){t(r).length>0&&t(r).data("BoldBIDashboardWaitingPopup").model.showOnInit&&(n=!0)}),n},n.prototype.updatePopupContainerVisibility=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0){n.css("display","none");var t=n.attr("id").replace(/_popup_container/g,"");this.updateDropDownIcon(n,t)}},n.prototype.updateDropDownIcon=function(n,t){var i=this.getMultiSelectionComboBox(t);n.css("display")==="block"?i.find(".bbi-designer-ejwidgets-updown").removeClass("e-arrow-sans-down").addClass("e-arrow-sans-up"):i.find(".bbi-designer-ejwidgets-updown").removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down")},n.prototype.getMultiSelectionComboBox=function(n){return this.dashboardDesigner.element.find("#"+n+"_multi_select_dropDown")},n.prototype.getComboBoxTextField=function(n){return this.dashboardDesigner.element.find("#"+n+"_multi_select_dropDown_text")},n.prototype.getPopupContainer=function(n){return this.dashboardDesigner.element.find("#"+n+"_popup_container")},n.prototype.getPopupListBoxDiv=function(n){return this.dashboardDesigner.element.find("#"+n+"_popup_container_list_Box_div")},n.prototype.getPopupCheckBox=function(n){return this.dashboardDesigner.element.find("#"+n+"_popup_container_Check_Box")},n.prototype.getPopupSearchPanel=function(n){return this.dashboardDesigner.element.find("#"+n+"_popup_container_searchPanel")},n.prototype.getSearchTextBox=function(n,t){return n.find("#"+t+"_popup_container_searchBox")},n.prototype.getSearchIcon=function(n,t){return n.find("#"+t+"_popup_container_searchIcon")},n.prototype.getPopupListBox=function(n){return this.dashboardDesigner.element.find("#"+n+"_popup_container_list_Box")},n.prototype.getPopupRadioButton1=function(n){return this.dashboardDesigner.element.find("#"+n+"_popup_container_list_Box_radio1_rdo_input")},n.prototype.getPopupRadioButton2=function(n){return this.dashboardDesigner.element.find("#"+n+"_popup_container_list_Box_radio2_rdo_input")},n.prototype.getPopupOkButton=function(n){return this.dashboardDesigner.element.find("#"+n+"_popup_container_ok_btn")},n.prototype.getPopupCancelButton=function(n){return this.dashboardDesigner.element.find("#"+n+"_popup_container_cancel_btn")},n.prototype.dateFormats=function(n){var t;switch(n){case"Date Time":t=DateTimeFormat.Default;break;case"Date Hour":t=DateTimeFormat.DateHour;break;case"Month Year":t=DateTimeFormat.MonthYear;break;case"Week Year":t=DateTimeFormat.WeekYear;break;case"Quarter Year":t=DateTimeFormat.QuarterYear;break;case"Day Month Year":t=DateTimeFormat.DayMonthYear;break;case"Month Day Year":t=DateTimeFormat.MonthDayYear;break;case"Day of Week":t=DateTimeFormat.DayOfWeek;break;case"Week of Year":t=DateTimeFormat.WeekOfYear;break;case"Hours":t=DateTimeFormat.Hour;break;case"Minutes":t=DateTimeFormat.Minute;break;case"Seconds":t=DateTimeFormat.Second;break;default:t=n}return t},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.MultiSelectionComboBox",InternalMultiSelectionComboBox,window),function(n){var t;(function(t){var i=function(){function t(n){this.customWidgetsCollection=[];this.customWidgetItems=[];this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$}return t.prototype.generateToolTipTemplate=function(t,i,r){var f="",o=this.dashboardDesigner.modules.themeHelper.getTooltipTextColor(),e=this.dashboardDesigner.modules.themeHelper.getToolTipFontText(),h="background-color: "+this.dashboardDesigner.modules.themeHelper.getTooltipBackground()+"!important; border-color: "+this.dashboardDesigner.modules.themeHelper.getTooltipBorder()+"!important; z-index: "+r+"!important; color: "+o+"!important;",c="color: "+o+"!important;\nfont-size: "+e.size+"!important;\nfont-family: "+e.family+"!important;",l="color: "+o+" !important;\nfont-size: "+e.size+"!important;\nfont-weight: "+e.weight+"!important;\nfont-family: "+e.family+"!important;",u;if(t.length>0){for(f+='<div class="widget-tooltip-template" style="'+h+'" id='+i+"_toolTip>",f+='<table class="tooltip-fontstyle" id='+i+"_tooltip_table>",u=0;u<t.length;u++){var s=Object.keys(t[u])[0],a=n.DashboardUtil.encodeText(s),v=n.DashboardUtil.encodeText(t[u][s]);f+="<tr id="+i+"_"+u+"_tooltip_table_rows><td id="+i+"_"+u+'_tooltip_table_rows_key style="'+c+'">'+a+" :<\/td><td id="+i+"_"+u+'_tooltip_table_rows_value style="'+l+'" >'+v+"<\/td><\/tr>"}f+="<\/table> <\/div>"}return f},t.enableClearFilter=function(t){if(!n.isNullOrUndefined(t.ControlHeader)||!t.getJson().ContainerSettings.ShowHeader){var i=t.IsPoPWidget?"e-dbrd-pop-reset":"bbi-remove-control-filter-enable",r=t.IsPoPWidget?t.designerInstance.getLocalizationContent().exportPanel.reset:t.designerInstance.getLocalizationContent().enableFilter.clearFilter;t.ControlContainer.find(".bbi-remove-control-filter").removeClass("bbi-remove-control-filter-disable").addClass(i+" bbi-dbrd-icon-theme").attr("data-tooltip",r);t.ControlContainer.find(".bbi-remove-control-filter").closest(".widget-control-icon-wrapper").addClass("bbi-dbrd-icon-background-theme")}},t.disableClearFilter=function(t){if(!n.isNullOrUndefined(t.ControlHeader)||!t.getJson().ContainerSettings.ShowHeader){var i=t.IsPoPWidget?"e-dbrd-pop-reset":"bbi-remove-control-filter-enable";t.ControlContainer.find(".bbi-remove-control-filter").removeClass(i+" bbi-dbrd-icon-theme").addClass("bbi-remove-control-filter-disable").removeAttr("data-tooltip");t.ControlContainer.find(".bbi-remove-control-filter").closest(".widget-control-icon-wrapper").removeClass("bbi-dbrd-icon-background-theme")}},t.showInfoIcon=function(t,i){if(!n.isNullOrUndefined(t)&&t.trim()!==""&&!n.isNullOrUndefined(i)&&!n.isNullOrUndefined(i.ControlHeader)){i.ControlHeader.find(".bbi-dbrd-control-information-icon").remove();var r=n.buildTag("div.bbi-dbrd-control-information-icon e-dbrd-inform-control bbi-dbrd-designer-hoverable","",{display:"block","font-size":i.getIconFontSizeBasedOnResolution()},{"data-tooltip":t});i.ControlHeader.append(r);i.ControlHeader.parents(".bbi-dbrd-control-container").mouseover(function(){i.ControlHeader.find('.bbi-remove-control-filter[style*="display: none"]').length===0&&i.ControlHeader.parents(".bbi-dbrd-control-container:not(.bbi-show-widget-not-configured)").find(".bbi-dbrd-controlIcon-container").css("margin-right",i.ControlHeader.find('.bbi-dbrd-control-information-icon[style*="display: none"]').length===0?"25px":"0")})}},t.hideInfoIcon=function(t){n.isNullOrUndefined(t)||n.isNullOrUndefined(t.ControlHeader)||t.ControlHeader.find(".bbi-dbrd-control-information-icon").css("display","none").removeAttr("data-tooltip")},t.getUniqueName=function(t,i,r,u){var l=[],e=[],p=i.designerPanel.isPasteAction?"_Copy":i.designerPanel.isExistingWidget?"_Imported":"",c=n.Dashboard.WidgetHelper.getAllWidgetElements(i._id,t.designerInstance.element.find("#"+t.designerInstance._id+"_designCanvas"),"."+t.RootCss),o,s,a,v,f,h,y;if(c.each(function(n,t){l.push(BoldBIDashboardDesigner.bbdesignerstatic$(t).attr("data-name"))}),u)for(o=0;o<c.length;o++)e.push(this.getWidgetInstance(c.eq(o)).getContainerSettings().Title);s=0;do s++,a=l.indexOf(t.Type+s);while(a!==-1);if(v=t.Type+s,f=r,!n.isNullOrUndefined(r)&&(this.isAvailableWidgetName(e,r)&&(f=r+p),this.isAvailableWidgetName(e,f))){h=1;do h++,y=e.indexOf(f+h);while(y!==-1);f=f+h}return{Id:v,Name:f}},t.isAvailableWidgetName=function(n,t){for(var i=0;i<n.length;i++)if(n[i]===t)return!0;return!1},t.getWidgetElementVisibility=function(t,i,r){r===void 0&&(r=!1);var u=new WidgetElementsVisibility,f=4;return!n.isNullOrUndefined(i)&&i?(u.ShowLegend=!0,u.ShowXAxisLabels=!0,u.ShowXAxisTitle=!0,u.ShowYAxisTitle=!0,u.ShowYAxisLabels=!0):((t.RowSpan>=1*f&&t.ColumnSpan>1*f||t.RowSpan>1*f&&t.ColumnSpan>=1*f)&&(u.ShowLegend=!0),u.ShowXAxisLabels=r,t.RowSpan>=8&&t.ColumnSpan>=6&&(u.ShowXAxisTitle=!0),t.RowSpan>=1*f&&t.ColumnSpan>=2*f&&(u.ShowYAxisTitle=!0,u.ShowYAxisLabels=!0)),u},t.getWidgetInstance=function(t){return n.isNullOrUndefined(t)?null:t.data("widgetInstance")},t.prototype.getAllWidgets=function(){for(var u,i=n.Dashboard.WidgetHelper.getAllWidgetElements(this.dashboardDesigner._id,this.dashboardDesigner.modules.Mode.designCanvas,".bbi-dbrditem"),r=[],t=0;t<i.length;t++)u=n.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(i[t])),r.push(u);return r},t.getAllWidgetElements=function(t,i,r){var u=null;return n.isNullOrUndefined(i)||(u=i.find(r),u=u.add(BoldBIDashboardDesigner.bbdesignerstatic$(document.body).find(".bbi-content-div."+t).find(r))),u},t.prototype.getAllCustomWidgets=function(){for(var t=this.getAllWidgets(),i=[],n=0;n<t.length;n++)t[n].Type==="CustomWidget"&&i.push(t[n]);return i},t.prototype.getBingMapWidget=function(){for(var t=this.getAllWidgets(),i=[],n=0;n<t.length;n++)t[n].Type==="BingMap"&&i.push(t[n]);return i},t.prototype.getAllDatebucketWidgets=function(){return this.getAllWidgets().filter(function(n){return n.isDefaultDataWidget()})},t.prototype.createWidgetInstance=function(t){var f,i,r,u;try{if(n.isNullOrUndefined(t)||t.trim()==="")return null;for(f=t.split("."),i=window,r=0;r<f.length;r++)i=i[f[r]];if(!n.isNullOrUndefined(i))return u=Object.create(i.prototype),u.constructor.apply(u,[this.dashboardDesigner]),u}catch(e){console.error(e.message)}return null},t.prototype.getWidgetObj=function(t,i){for(var u,f,e=n.isNullOrUndefined(i)?this.dashboardDesigner.itemPanel.widgetItems:i,r=0;r<e.length;r++)for(u=0;u<e[r].Items.length;u++)if(f=e[r].Items[u],f.widgetNameSpace===t||f.serializationNameSpace===t)return f;return null},t.prototype.getCurrentWidgetInstance=function(){var t=this.dashboardDesigner.designerPanel.selectedReportItems[0];return n.Dashboard.WidgetHelper.getWidgetInstance(t)},t.createWidgetContainer=function(t,i,r,u,f){var o=i.designerPanel.isPasteAction||i.designerPanel.isExistingWidget,e;return n.isNullOrUndefined(t.getJson().UniqueName)||o?(e=this.getUniqueName(t,i,u,o),t.Name=e.Id,t.getContainerSettings().Title=n.isNullOrUndefined(u)||u===""?e.Id:e.Name):(t.Name=t.getJson().UniqueName,t.getContainerSettings().Title=u),n.Dashboard.WidgetContainerHelper.createContainer(t,i,r,f),this.updateWidgetFontSizeOnRendering(t,i),t.ControlContainer},t.designerEventHandler=function(t,i,r,u){return!n.isNullOrUndefined(t.EventHelper)&&t.EventHelper.isEventListenerConfigured(i,r)?t.designerEventListener(i,r,u):!1},t.isDataWidget=function(t){return t instanceof n.Dashboard.DataWidget},t.isContainerWidget=function(t){return t instanceof n.ContainerWidget},t.getLineStyle=function(n){switch(n){case"Solid":return"0";case"Dot":return"2,3";case"Dash":return"4,8";case"DotDash":return"2,6,6,10";case"LongDash":return"15";case"LongDashDotDot":return"20,10,5,5,5,10";default:return"0"}},t.setLabelParameterId=function(t,i){var f,u,r,e;if(t.find(".bbi-dbrd-label-parameter-text").length>=1)for(f=i.modules.labelParameter,u=t.find(".bbi-dbrd-label-parameter-text"),r=0;r<u.length;r++)e=f.generateIdForLabelParameterElement(u[r]),BoldBIDashboardDesigner.bbdesignerstatic$(u[r]).attr("data-labelparameterid",e),i.model.mode!==n.Designer.mode.design&&(f.setValueForLabelParameter(u[r]),BoldBIDashboardDesigner.bbdesignerstatic$(u[r]).css({display:"none"}))},t.isOlderDashboardWidgets=function(n){return n.Type==="Card"||n.Type==="ChoroplethMap"||n.Type==="BubbleMap"},t.isFilterWidgets=function(n){return n.Type==="TextFilter"||n.Type==="ListBox"||n.Type==="DatePicker"||n.Type==="RangeSlider"||n.Type==="ComboBox"||n.Type==="PeriodOverPeriod"||n.Type==="RangeNavigator"},t.isTableWidgets=function(n){return n.Type==="Grid"||n.Type==="PivotGrid"||n.Type==="PivotView"},t.createWidgetActionContextMenu=function(t,i,r,u,f,e){var s,h,c,o,b,l;if(u=this.updateWidgetLinking(i,u),s=this.populateWidgetSelectionMenuItems(r,u,t),t.model.mode!==n.Designer.mode.design)if(h=s.filter(function(n){return n.IsVisible===!0}),h.length>1){c=n.buildTag("ul.bbi-designer-menu e-contextmenu","",{},{id:r+"_widget_action_menu"});c.BoldBIDashboardMenu({menuType:n.MenuType.ContextMenu,openOnClick:!1,contextMenuTarget:"#"+r,width:"auto",animationType:"none",fields:{dataSource:h,id:"Name",text:"DisplayName"},click:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.onWidgetSelectionMenuItemClick,this,i,t,f),close:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.onMenuItemClose,this,i,t,f)});o=t.element;c.parents(".e-menu-wrap")&&c.parents(".e-menu-wrap").appendTo(o);var a=o.find("#"+r+"_widget_action_menu"),k=a.data("BoldBIDashboardMenu"),p=a.height(),w=a.width(),v=o.offset().left,y=o.offset().top;k.show(o.width()+v-e[0]<w?e[0]-w-v:e[0]-v,o.height()+y-e[1]<p?e[1]-p-y:e[1]-y,r,f)}else h.length===1&&(b=h[0],i.performSelectedWidgetAction(b.Name,i,f,t));else for(l=0;l<s.length;l++)if(s[l].IsVisible===!0){i.Name.indexOf("Chart")!==-1&&i.Name.indexOf("Radar")===-1&&i.Name.indexOf("ScatterChart")===-1&&(f.cancel=!1);i.performSelectedWidgetAction(s.filter(function(n){return n.IsVisible===!0})[0].Name,i,f,t);this.updateWidgetFontSizeOnRendering(i,t);break}},t.updateWidgetLinking=function(t,i){return!n.isNullOrUndefined(t.getJson().WidgetLink)&&t.getJson().WidgetLink.Enable&&i.push(WidgetAction.WidgetLinking),i},t.onWidgetSelectionMenuItemClick=function(n,t,i,r){r.ID===WidgetAction.WidgetLinking?t.modules.containerTypeWidgetHelper.doInterWidgetLinking(n,i.selectedIndex):n.performSelectedWidgetAction(r.ID,n,i,t)},t.prototype.applyWidgetFilterValuesFromAPI=function(n,t){return t.processFilterInformation(n)},t.onMenuItemClose=function(t,i,r,u){t.Name.indexOf("Chart")!==-1&&t.Name.indexOf("Radar")===-1&&t.Name.indexOf("ScatterChart")===-1&&(r.cancel=!1,r.model.selectedDataPointIndexes=[]);n.isNullOrUndefined(u.target.text)&&(t.Name.indexOf("Map")>-1&&t.Name.indexOf("Tree")===-1&&t.Name.indexOf("Heat")===-1?t.mapObj.removeShapeSelection():t.Name.indexOf("Grid")>-1&&t.Name.indexOf("Pivot")===-1?t.gridObj.clearSelection():t.Name.indexOf("Pivot")>-1?t.clearSelectionCell():t.Name.indexOf("RadarPolar")>-1?(t.radarPolarChartObj.selectedDataIndexes=[],t.radarPolarChartObj.refresh()):t.Name.indexOf("ScatterChart")>-1?(t.bubbleScatterChartObj.selectedDataIndexes=[],t.bubbleScatterChartObj.refresh()):t.Name.indexOf("Chart")>-1&&(n.isNullOrUndefined(t.chartObj)?(t.comboChartObj.model.selectedDataPointIndexes=[],t.comboChartObj.redraw()):(t.chartObj.model.selectedDataPointIndexes=[],t.chartObj.redraw()),!n.isNullOrUndefined(t.drilledChartObj)&&t.drillLevelInfo.length>0&&(t.drilledChartObj.model.selectedDataPointIndexes=[],t.drilledChartObj.redraw()),!n.isNullOrUndefined(t.drilledComboChartObj)&&t.drillLevelInfo.length>0&&(t.drilledComboChartObj.model.selectedDataPointIndexes=[],t.drilledComboChartObj.redraw())))},t.populateWidgetSelectionMenuItems=function(n,t,i){for(var f,r=[{Name:WidgetAction.DrillDown.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.drillDownDisplayName,IsVisible:!1},{Name:WidgetAction.Filter.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.filteringDisplayName,IsVisible:!1},{Name:WidgetAction.Linking.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.linkingDisplayName,IsVisible:!1},{Name:WidgetAction.ViewData.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.viewDataDisplayName,IsVisible:!1},{Name:WidgetAction.WidgetLinking.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.widgetLinkingDisplayName,IsVisible:!1}],u=0;u<r.length;u++)for(f=0;f<t.length;f++)if(t[f]===r[u].Name){r[u].IsVisible=!0;break}return r},t.getGlobalColumnId=function(n,t){for(var i,r=0;r<t.length;r++)if(t[r].FieldInfos.length>0&&(i=t[r].FieldInfos.filter(function(t){return t.UniqueColumnName===n}),i.length>0))return i[0].FieldActualType==="bbi-designer-dataset-datetime"?i[0].Id+"_"+i[0].DateTimeFormat:i[0].Id;return""},t.getColorCode=function(t,i,r){var u=t.designerInstance.modules.resource.getColumnColorCode(i);return n.DashboardUtil.IsStringNullorWhiteSpace(u)&&(u=!n.isNullOrUndefined(r)&&!n.DashboardUtil.IsStringNullorWhiteSpace(r.Color)?r.Color:n.DashboardUtil.defaultColorPalette[0]),u},t.updateIndividualColorBasedonTheme=function(t,i,r,u){var f;if(t&&!n.isNullOrUndefined(i)&&i.Type===ColorCustomizationType.Individual&&i.SolidColorInfo.length!==0){var s=void 0,o=void 0,h=void 0,e=void 0,c=r[0].UniqueColumnName;for(e=i.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===c})[0].DefaultColorSets,o=i.SolidColorInfo[0].BasedOn.FieldId,s=r[0].FieldActualType==="bbi-designer-dataset-datetime"?o+"_"+r[0].DateTimeFormat:o,f=0;f<e.length;f++)h=e[f].Name.toString(),e[f].Color=e[f].IsEdited?e[f].Color:u.modules.resource.getColumnValueColorCode(s,h)}},t.prototype.updateConditionBasedWidgetTitleFont=function(t,i,r){if(!n.isNullOrUndefined(r.ControlHeader)){var u=t?this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.AutoFontSize?null:this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.FontSize:i,f=r.ControlHeader.find(".bbi-dbrd-control-title .e-title-text");f.css("font-size",n.isNullOrUndefined(u)?"":u+"px");r.ControlHeader.css("height",window.parseFloat(f.css("font-size"),10)+WidgetHeaderFontSizeFactor.title+"px");this.updateContentContainerHeight(r)}},t.prototype.updateContentContainerHeight=function(t){if(!n.isNullOrUndefined(t)&&!n.isNullOrUndefined(t.ControlHeader)&&!n.isNullOrUndefined(t.ControlSubHeader)){var i=t.ControlHeader.height(),r=t.ControlSubHeader.css("display")!=="none";i=r?i+t.ControlSubHeader.outerHeight():this.getFirstCardWidget(t)?0:i;t.ContentContainer.css("height","calc(100% - "+i+"px)")}},t.prototype.updateConditionBasedWidgetSubTitleFont=function(t,i,r){if(!n.isNullOrUndefined(r.ControlSubHeader)){var u=t?this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.AutoFontSize?null:this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.FontSize:i,f=r.ControlSubHeader.find(".bbi-dbrd-control-sub-title .e-title-text");f.css("font-size",n.isNullOrUndefined(u)?"":u+"px");r.ControlSubHeader.css("height",window.parseFloat(f.css("font-size"),10)+WidgetHeaderFontSizeFactor.subTitle+"px");this.updateContentContainerHeight(r)}},t.updateWidgetFontSizeOnRendering=function(t,i){var e,o,r,c;if(this.isDataWidget(t)){var u=t.getJson().ContainerSettings.WidgetTitleFontInfo,f=t.getJson().ContainerSettings.WidgetSubTitleFontInfo,l=n.isNullOrUndefined(u)?!0:u.AutoFontSize,a=n.isNullOrUndefined(f)?!0:f.AutoFontSize,s=l?i.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.AutoFontSize?null:i.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.FontSize:u.FontSize,h=a?i.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.AutoFontSize?null:i.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.FontSize:f.FontSize;n.isNullOrUndefined(t.ControlHeader)||(e=t.ControlHeader.find(".bbi-dbrd-control-title .e-title-text"),e.css("font-size",n.isNullOrUndefined(s)?"":s+"px"),t.ControlHeader.css("height",window.parseFloat(e.css("font-size"),10)+WidgetHeaderFontSizeFactor.title+"px"));n.isNullOrUndefined(t.ControlSubHeader)||(o=t.ControlSubHeader.find(".bbi-dbrd-control-sub-title .e-title-text"),o.css("font-size",n.isNullOrUndefined(h)?"":h+"px"),t.ControlSubHeader.css("height",window.parseFloat(o.css("font-size"),10)+WidgetHeaderFontSizeFactor.subTitle+"px"));n.isNullOrUndefined(t.ControlHeader)||n.isNullOrUndefined(t.ControlSubHeader)||(r=t.ControlHeader.height(),c=t.ControlSubHeader.css("display")!=="none",r=c?r+t.ControlSubHeader.outerHeight():r,t.ContentContainer.css("height","calc(100% - "+r+"px)"))}},t.updateWidgetContainerPosition=function(n,t){var i="";n.widgetOrder=t;t>0?i=t.toString():n.widgetOrder=100;n.Type==="NumberCard"||n.Type==="KPICard"?n.ControlContainer.find(".bbi-dbrd-content-container").children(".bbi-dbrd-isimage,.bbi-nodata-container,.bbi-widget-not-configured-text").css("z-index",i):n.ControlContainer.find(".bbi-dbrd-content-container").children(".bbi-dbrd-control-header,.bbi-dbrd-isimage,.bbi-nodata-container,.bbi-widget-not-configured-text").css("z-index",i);n.ControlContainer.find(".bbi-dbrd-content-container").children(".bbi-dbrd-control, .e-dbrd-widget").css("z-index",n.widgetOrder)},t.prototype.isMobileMode=function(){return!this.dashboardDesigner.model.dashboardFromData.isExportImage&&!this.dashboardDesigner.model.dashboardFromData.isExportPdf&&window.outerWidth<=768},t.prototype.getWidgetUsingId=function(n){var t=this.getAllWidgets().filter(function(t){return t.getJson().UniqueId===n});return t.length>0?t[0]:null},t.prototype.getFirstWidgetHeight=function(){var n=this.dashboardDesigner.modules.Mode.designCanvas,t=n.find(".bbi-dbrditem");return t[0].clientHeight},t.prototype.getFirstCardWidget=function(n){return n.Type==="NumberCard"||n.Type==="KPICard"},t.updateURLLinkingforDrillDown=function(t,i,r){if(!n.isNullOrUndefined(i)&&!n.isNullOrUndefined(t)&&r&&t.url.indexOf("?")!==-1){var u=t.url.split("?"),f="";u[1].indexOf("&&")!==-1?(f="&&",t.url=this.validateParameterValues(f,u,i)):u[1].indexOf("&")!==-1?(f="&",t.url=this.validateParameterValues(f,u,i)):u.splice(0,1)}},t.splitURLlinkingFieldForDrillDown=function(t,i){for(var u,f,h,e,c,o,l,s=[],r=0;r<i.DataGroupInfo.FieldContainers.length;r++)if(i.DataGroupInfo.FieldContainers[r].IsDrillSection)if(i.DrillLevelInfo.length>=1)for(u=0;u<=i.DrillLevelInfo.length;u++)n.isNullOrUndefined(i.DataGroupInfo.FieldContainers[r].FieldInfos[u])||s.push(i.DataGroupInfo.FieldContainers[r].FieldInfos[u].Name);else s.push(i.DataGroupInfo.FieldContainers[r].FieldInfos[0].Name);for(f=[],h=0;h<s.length;h++)for(e=1;e<t.length;e++)t[e].indexOf(s[h])===-1||f.push(t[e]);for(c=[],o=0;o<f.length;o++)t.indexOf(f[o])!==-1&&c.push(f[o]);for(t.length=1,l=0;l<c.length;l++)t.push(c[l])},t.validateParameterValues=function(n,t,i){var u=t[1].split(n),e,f,r;for(t.length=1,t[0].indexOf("showmydashboards")===-1&&(t[0]=t[0]+"?",u[0].indexOf("showmydashboards")!==-1&&(t[0]=t[0]+u[0]+n,u.shift())),e=0;e<u.length;e++)t.push(u[e]);for(this.splitURLlinkingFieldForDrillDown(t,i),f="",r=0;r<t.length;r++)f=r===0||r===t.length-1?f+t[r]:f+t[r]+n;return f},t.defaultColorPalette=["#77A7FB","#E57368","#FBCB43","#34B67A","#F1AB68","#6CC2D9","#195962","#E18878","#1AA27D","#BFAAC7","#89695e","#a5c77f","#f48fb1","#90caf9","#cc4452"],t}();t.WidgetHelper=i})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={}));InternalFilterConfiguration=function(){function n(n){this.id=null;this.reportItems=[];this.filterContainer=null;this.filterFooterTag=null;this.updateBtnTag=null;this.configChooserTag=null;this.masterFooterTag=null;this.masterElementContainer=null;this.masterScrollElement=null;this.masterUlTag=null;this.listContainer=null;this.masterListContainer=null;this.profileField=null;this.defaultContainer=null;this.customContainer=null;this.listenerField=null;this.listenerElementContainer=null;this.profileAddIcon=null;this.filterProfileAddIconDiv=null;this.masterWidgetAddIconDiv=null;this.customAddIconDiv=null;this.columnConfig=null;this.errorMsg="";this.selectedMaster=null;this.columnContainer=null;this.filterActionInfo=null;this.isCustomColumnModified=!1;this.isChangedCheckBoxValue=!1;this.editColVal=null;this.selectedProfile=null;this.isFilterProfileModified=!1;this.targetInstance=null;this.targetMethod=null;this.sourceColumnData=[];this.targetSourceData=[];this.targetColumnData=[];this.filterSerializer=null;this.ejFilterDialog=null;this.ejMasterDialog=null;this.ejColumnGridObj=null;this.locale=null;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.dashboardDesigner._id;this.renderFilterConfigWindow();this.unWireEvents();this.wireEvents();this.filterSerializer=this.dashboardDesigner.modules.masterSlaveFilter;this.errorMsg=this.locale.masterSlaveWindow.errorMessage}return n.prototype.renderFilterConfigWindow=function(){var i=this.filterContainer=BoldBIDashboard.buildTag("div.bbi-userselect bbi-filter-config-dialog","",{},{id:this.id+"_filter_configuration"}),p=BoldBIDashboard.buildTag("table.bbi-designer-filter-config-table","",{},{unselectable:"on"}),w=BoldBIDashboard.buildTag("tr","",{}),b=BoldBIDashboard.buildTag("td.bbi-filterConfig-separator bbi-designer-filterConfig-td bbi-filterConfig-master-datacontainer","",{},{}),f=BoldBIDashboard.buildTag("td.bbi-designer-filterConfig-td bbi-filterConfig-filter-datacontainer","",{},{}),n,e,r,o,y,lt,at,vt;BoldBIDashboard.browserInfo().name==="chrome"&&f.addClass("e-browser-chrome");i.append(p);p.append(w);w.append(b).append(f);n=BoldBIDashboard.buildTag("div","",{width:"175px",height:"470px"});e=BoldBIDashboard.buildTag("div.e-filterConfig-filterempty","",{});b.append(n);f.append(e);r=BoldBIDashboard.buildTag("div.bbi-filterConfig-master-header-div","",{});o=BoldBIDashboard.buildTag("div.bbi-filterConfig-master-leftpane","",{},{});this.masterWidgetAddIconDiv=BoldBIDashboard.buildTag("div.bbi-masterslave-filter-addIcon bbi-dbrd-background-theme","",{},{});var t=BoldBIDashboard.buildTag("div.bbi-filterConfig-master-Label-div bbi-dbrd-icon-theme","",{}),yt=BoldBIDashboard.buildTag("span",this.locale.masterSlaveWindow.masterWidgetsLabelText,{}),s=BoldBIDashboard.buildTag("span.e-icon bbi-masterslave-filter-add-plusIcon bbi-dbrd-designer-hoverable bbi-filterConfig-master-addIcon bbi-designer-filter-addIcon","",{},{id:this.id+"_filter_config_master_addIcon","data-tooltip":"Add"});s.off("click",this.bbdesigner$.proxy(this.addMasterItems,this));s.on("click",this.bbdesigner$.proxy(this.addMasterItems,this));o.append(yt);this.masterWidgetAddIconDiv.append(s);t.append(o).append(this.masterWidgetAddIconDiv);r.append(t);var h=this.masterListContainer=BoldBIDashboard.buildTag("div.e-lv e-js e-parentlv e-designer-hint-newmaster bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{width:"100%",height:n.height()-r.height(),display:"block","background-color":"var(--designer-background)"},{id:this.id+"_filter_config_listContainer"}),k=BoldBIDashboard.buildTag("div","",{},{}),d=this.listContainer=BoldBIDashboard.buildTag("div.bbi-list-container e-js e-widget bbi-designer-dataset bbi-filterConfig-master-list-container","",{},{id:this.id+"_filter_config_masterList"}),pt=this.masterUlTag=BoldBIDashboard.buildTag("ul.e-list-hdr e-clearall e-filterConfig-master-ui-container","",{},{id:this.id+"_filter_config_List_ulTag"});d.append(pt);k.append(d);h.append(k);n.append(r).append(h);var g=BoldBIDashboard.buildTag("div","",{margin:"0px 8px"}),nt=BoldBIDashboard.buildTag("table","",{}),c=BoldBIDashboard.buildTag("tr","",{}),tt=BoldBIDashboard.buildTag("td","",{}),wt=BoldBIDashboard.buildTag("td","",{width:"5px"}),l=BoldBIDashboard.buildTag("td","",{}),it=BoldBIDashboard.buildTag("div","",{}),rt=BoldBIDashboard.buildTag("div","",{"padding-bottom":"10px"}),ut=BoldBIDashboard.buildTag("div","",{display:"inline-block"},{});this.filterProfileAddIconDiv=BoldBIDashboard.buildTag("div.bbi-masterslave-filter-addIcon bbi-dbrd-background-theme","",{},{});var bt=BoldBIDashboard.buildTag("span",this.locale.masterSlaveWindow.filterProfileslabelText,{"padding-left":"2px"},{}),a=this.profileAddIcon=BoldBIDashboard.buildTag("span.e-icon bbi-masterslave-filter-add-plusIcon bbi-dbrd-designer-hoverable bbi-filterConfig-master-addIcon bbi-designer-filter-addIcon","",{},{id:this.id+"_filter_config_profile_addIcon","data-tooltip":"Add"}),u=this.profileField=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-filterConfig-profile-field bbi-dbrd-designer-scroll-style-3","",{}),ft=BoldBIDashboard.buildTag("div","",{}),et=BoldBIDashboard.buildTag("div","",{id:this.id+"_filter_config_profile_list"}),kt=BoldBIDashboard.buildTag("ul.e-list-hdr e-clearall e-filter-profileList bbi-filterConfig-ul-Profile-container","",{},{id:this.id+"_filter_config_profile_ulTag"});a.off("click",this.bbdesigner$.proxy(this.addNewProfile,this));a.on("click",this.bbdesigner$.proxy(this.addNewProfile,this));ut.append(bt);this.filterProfileAddIconDiv.append(a);et.append(kt);ft.append(et);u.append(ft);rt.append(ut,this.filterProfileAddIconDiv);it.append(rt,u);tt.append(it,u);var ot=BoldBIDashboard.buildTag("div","",{}),st=BoldBIDashboard.buildTag("div.bbi-filterConfig-listene-label-div","",{}),dt=BoldBIDashboard.buildTag("span",this.locale.masterSlaveWindow.listenerWidgetsLabelText,{}),v=this.listenerField=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-filterConfig-listene-field-div bbi-dbrd-designer-scroll-style-3","",{}),ht=BoldBIDashboard.buildTag("div","",{}),ct=this.listenerElementContainer=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_filter_config_listener_list"}),gt=BoldBIDashboard.buildTag("table.e-designer-listener-table","",{});st.append(dt);ct.append(gt);ht.append(ct);v.append(ht);ot.append(st,v);l.append(ot);c.append(tt,wt,l);c.append(l);nt.append(c);g.append(nt);y=BoldBIDashboard.buildTag("div","",{width:"539px"});this.renderColumnConfig(y);e.append(g).append(y);lt=this.updateBtnTag=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary",this.locale.masterSlaveWindow.updateButtonText,{float:"right","margin-right":"10px",height:"28px"},{id:this.id+"_filter_config_update_btn",type:"button"});at=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-secondary",this.locale.masterSlaveWindow.cancelButtonText,{float:"right",height:"28px"},{id:this.id+"_filter_config_close_btn",type:"button"});this.dashboardDesigner.element.append(i);i.BoldBIDashboardDialog({width:"auto",height:"auto",minWidth:"310px",minHeight:"215px",title:this.locale.masterSlaveWindow.alertTitle,enableResize:!1,showOnInit:!1,showFooter:!0,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner",enableModal:!0,close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,closeIconTooltip:this.locale.dialogOptions.closeButtonText});vt=t.height()+parseInt(t.css("padding-top"),10)+parseInt(t.css("padding-bottom"),10);this.generateScroller(h,n.height()-vt+"px","auto");this.generateScroller(u,"185px","250px");this.generateScroller(v,"185px","250px");this.filterFooterTag=this.dashboardDesigner.element.find("#"+this.id+"_filter_configuration_foot");this.filterFooterTag.append(at).append(lt);this.ejFilterDialog=i.data("BoldBIDashboardDialog");this.renderMasterWindow()},n.prototype.wireEvents=function(){this.dashboardDesigner.element.on("click","#"+this.id+"_filter_config_update_btn",this.bbdesigner$.proxy(this.updateFilterConfig,this));this.dashboardDesigner.element.on("click","#"+this.id+"_filter_config_close_btn",this.bbdesigner$.proxy(this.closeFilterWindow,this));this.dashboardDesigner.element.on("click","#"+this.id+"_master_add_ok_btn",this.bbdesigner$.proxy(this.updateMasterInfo,this));this.dashboardDesigner.element.on("click","#"+this.id+"_master_add_cancel_btn",this.bbdesigner$.proxy(this.closeMasterWindow,this))},n.prototype.unWireEvents=function(){this.dashboardDesigner.element.off("click","#"+this.id+"_filter_config_update_btn",this.bbdesigner$.proxy(this.updateFilterConfig,this));this.dashboardDesigner.element.off("click","#"+this.id+"_filter_config_close_btn",this.bbdesigner$.proxy(this.closeFilterWindow,this));this.dashboardDesigner.element.off("click","#"+this.id+"_master_add_ok_btn",this.bbdesigner$.proxy(this.updateMasterInfo,this));this.dashboardDesigner.element.off("click","#"+this.id+"_master_add_cancel_btn",this.bbdesigner$.proxy(this.closeMasterWindow,this))},n.prototype.generateScroller=function(n,t,i){n.BoldBIDashboardScroller({scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,height:t,width:i,enableTouchScroll:!0,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize})},n.prototype.renderColumnConfig=function(n){var r=this.configChooserTag=BoldBIDashboard.buildTag("div.bbi-filterConfig-chooser-div","",{},{}),u=BoldBIDashboard.buildTag("div.bbi-dbrd-filter-dlg-mode-btn-wrapper","",{},{id:this.id+"_filter_btn_wrapper"}),t;this.customAddIconDiv=BoldBIDashboard.buildTag("div.bbi-masterslave-filter-addIcon bbi-dbrd-background-theme","",{},{});t=BoldBIDashboard.buildTag("span.e-icon bbi-masterslave-filter-add-plusIcon bbi-dbrd-designer-hoverable bbi-filterConfig-master-addIcon bbi-designer-filter-addIcon","",{},{id:this.id+"_filter_config_custom_addIcon","data-tooltip":"Add"});this.customAddIconDiv.append(t);r.append(u).append(this.customAddIconDiv);t.off("click",this.bbdesigner$.proxy(this.addCustomColumn,this));t.on("click",this.bbdesigner$.proxy(this.addCustomColumn,this));var f=this.columnContainer=BoldBIDashboard.buildTag("div","",{height:"190px",width:"540px",display:"inline-block","margin-bottom":"5px","border-top":"1px solid var(--designer-primary-border-color)"},{id:this.id+"_column_config_container"}),e=this.defaultContainer=BoldBIDashboard.buildTag("div","",{height:"190px",display:"block","border-radius":"4px","border-width":"0px"},{id:this.id+"_default_column_container"}),o=BoldBIDashboard.buildTag("div.bbi-designer-defaultcolumn-grid","",{height:"190px",display:"block","border-width":"0px"},{id:this.id+"_default_column_grid"}),i=this.columnConfig=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control","",{height:"190px",width:"540px",display:"inline-block","border-radius":"4px"},{}),s=this.customContainer=BoldBIDashboard.buildTag("div.bbi-designer-custom-column","",{display:"block","background-color":"#ffffff",height:"190px","border-width":"0px"},{id:this.id+"_custom_column_container"});i.append(s);n.append(r);n.append(f);e.append(o);f.append(i).append(e);this.generateScroller(i,"190px","540px");this.customTypeSwitcher(!1);this.createGridDefaultColumn(o);this.createRadioBtnSection(u)},n.prototype.createRadioBtnSection=function(n){var t=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_btn_grp"}),i;n.append(t);i={callBackInstance:this,callBackMethod:"dataChooser",groupName:"filter",triggerOnCodeUpdate:!0,labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.id+"_filter_config_default",label:"Default",isChecked:!0,value:"default"},{id:this.id+"_filter_config_custom",label:"Custom",isChecked:!1,value:"custom"},]};this.radioButtonMode=new BoldBIDashboard.Dashboard.RadioButton(i,t)},n.prototype.createGridDefaultColumn=function(n){for(var r=[],t=[{fieldName:"SourceColumn",Name:this.locale.masterSlaveWindow.sourceColumn},{fieldName:"TargetDataSource",Name:this.locale.masterSlaveWindow.targetDataSource},{fieldName:"TargetColumn",Name:this.locale.masterSlaveWindow.targetColumn}],u=540/t.length,i=0;i<t.length;i++)r.push({field:t[i].fieldName,headerText:t[i].Name,width:u,textAlign:BoldBIDashboard.TextAlign.Left});n.BoldBIDashboardGrid({enableRowHover:!1,allowScrolling:!1,columns:r,allowSelection:!1,height:150,scrollSettings:{allowVirtualScrolling:!1,virtualScrollMode:"normal",enableTouchScroll:!1,autoHide:!0,scrollerSize:10}});this.ejColumnGridObj=n.data("BoldBIDashboardGrid")},n.prototype.appendMasterList=function(n,t){var f=n.ID,u=n.Name,i=BoldBIDashboard.buildTag("li.e-user-select e-list e-state-default e-list-check bbi-filterConfig-master-li-container bbi-designer-masterwidget-list","",{},{id:this.id+"_li_"+f,name:u,guid:f}),e=BoldBIDashboard.buildTag("a.e-chevron-right_01 bbi-remove-shadow","",{padding:"8px 0px","min-height":"16px"}),o=BoldBIDashboard.buildTag("span.e-list-text e-rel bbi-designer-content bbi-dbrd-designer-hoverable bbi-filterConfig-master-text-span",u,{},{name:u,id:this.id+"_li_"+f+"_textSpan"}),r;e.append(o);r=BoldBIDashboard.buildTag("div.e-chk-image e-icon e-cross-circle bbi-dbrd-designer-hoverable bbi-filterConfig-master-closeIcon-span bbi-filter-configuration-close","",{},{id:this.id+"_"+f,"data-tooltip":"Delete"});BoldBIDashboard.DashboardUtil.textWidth(u,"12px Heebo")>=o.width()&&o.attr("data-tooltip",u);e.append(r);i.append(e);r.off("click",this.bbdesigner$.proxy(this.removeMaster,this,i,n));i.off("click",this.bbdesigner$.proxy(this.masterSelection,this,n.ID));r.on("click",this.bbdesigner$.proxy(this.removeMaster,this,i,n));i.on("click",this.bbdesigner$.proxy(this.masterSelection,this,n.ID));i.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseUp,this.bbdesigner$.proxy(this.onListItemMouseUp,this));i.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseOver,this.bbdesigner$.proxy(this.elementMouseOver,this,r));i.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseLeave,this.bbdesigner$.proxy(this.elementMouseLeave,this,r));BoldBIDashboard.isNullOrUndefined(t)?this.masterUlTag.append(i):t===0?(this.masterUlTag.prepend(i),i.css({"border-bottom":"0.5px solid #c8c8c8"})):this.listContainer.find("ul>li:nth-child("+t+")").after(i);this.masterListContainer.height()>this.listContainer.height()?this.masterListContainer.find(".e-content").removeClass("e-content"):this.scrollerRefresh(this.masterListContainer)},n.prototype.elementMouseOver=function(n){n.css("display","inline-block")},n.prototype.elementMouseLeave=function(n){n.css("display","none")},n.prototype.getSelectedMasterCollection=function(n){for(var r=null,i=this.filterActionInfo.MastersCollection,t=0;t<i.length;t++)i[t].MasterInfo.ID===n&&(r=i[t]);return r},n.prototype.masterSelection=function(n){if(n!==this.selectedMaster.MasterInfo.ID){this.profileAddIcon.attr("disabled")==="disabled"&&this.disableFilterConditionSlaveWidgetArea(!1);this.updateMasterDetails();var t=this.getSelectedMasterCollection(n);BoldBIDashboard.isNullOrUndefined(t)||(this.selectedMaster=t,this.selectedMaster.ProfileManager.length>0?(this.selectedProfile=this.selectedMaster.ProfileManager[0],this.disableFilterConditionSlaveWidgetArea(!1),this.populateProfileArea(!0),this.isChangedCheckBoxValue=!1):(this.selectedProfile=null,this.resetColumnConfiguration(),this.resetProfileFields(),this.resetListenerContainer(),this.disableFilterConditionSlaveWidgetArea(!0,!1)))}},n.prototype.getSelectedListener=function(n){for(var i,r=[],t=0;t<n.length;t++)i=this.dashboardDesigner.element.find("#"+this.id+"_listener_"+n[t].ID).data("BoldBIDashboardCheckBox"),!BoldBIDashboard.isNullOrUndefined(i)&&i.model.checked&&r.push(n[t]);return r},n.prototype.updateMasterDetails=function(){this.filterActionInfo.MastersCollection.length>0&&!BoldBIDashboard.isNullOrUndefined(this.selectedProfile)&&this.UpdateProfileDetails();this.removeEmptyCustomColumn()},n.prototype.removeMaster=function(n,t){var r,i;for(n.remove(),this.scrollerRefresh(this.masterListContainer),this.resetProfileFields(),this.scrollerRefresh(this.profileField),this.resetListenerContainer(),this.scrollerRefresh(this.listenerField),r=this.filterActionInfo.MastersCollection,i=0;i<r.length;i++)r[i].MasterInfo.ID===t.ID&&r.splice(i,1);this.masterUlTag.find("li").length>0?(this.setDefaultSelection(),this.disableFilterConfigArea(!1),this.populateProfileArea(!0),this.masterUlTag.find("li").first().addClass("bbi-masterwidget-user-selection-active")):(this.resetColumnConfiguration(),this.disableFilterConfigArea(!0),this.masterWidgetAddIconDiv.removeAttr("disabled"))},n.prototype.profileSelection=function(n){var i,t;if(this.profileAddIcon.attr("disabled")!=="disabled"&&(i=n.find("span.e-list-text").attr("name"),!BoldBIDashboard.isNullOrUndefined(this.selectedMaster)&&this.selectedMaster.ProfileManager.length>0&&i!==""&&this.selectedProfile.Name!==i))for(this.UpdateProfileDetails(),this.isChangedCheckBoxValue=!1,t=0;t<this.selectedMaster.ProfileManager.length;t++)this.selectedMaster.ProfileManager[t].ProfileInfo.Name===i&&(this.selectedProfile=this.selectedMaster.ProfileManager[t],this.populateProfileArea(!1))},n.prototype.setProfileInfoToSelectedProfileProperty=function(){this.selectedMaster.ProfileManager.length>0?(this.selectedProfile=this.selectedMaster.ProfileManager[0],this.populateProfileArea(!1),this.profileField.find(".e-filter-profileList li").first().addClass("bbi-masterwidget-user-selection-active")):(this.selectedProfile=null,this.resetListenerContainer(),this.resetColumnConfiguration(),this.listenerField.attr("disabled","true").css({opacity:"0.5"}),this.configChooserTag.find("#"+this.id+"_filter_config_default_rdo_input").prop("disabled",!0),this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("disabled",!0),this.configChooserTag.css("opacity","0.5"))},n.prototype.onListItemMouseUp=function(n){var t=this.bbdesigner$(n.target).closest("li"),i=this.bbdesigner$;t.hasClass("bbi-masterwidget-user-selection-active")||(t.parent().children().each(function(){var n=i(this);n.removeClass("bbi-masterwidget-user-selection-active");n.find("span").removeClass("bbi-masterwidget-user-selection-active")}),t.addClass("bbi-masterwidget-user-selection-active"),t.find("span").addClass("bbi-masterwidget-user-selection-active"))},n.prototype.addNewProfile=function(){this.profileAddIcon.attr("disabled")!=="disabled"&&(this.disableFilterConditionSlaveWidgetArea(!0),this.appendProfileElement(this.selectedMaster.MasterInfo.Name,this.selectedMaster.MasterInfo.ID,"",!1),this.scrollerRefresh(this.profileField))},n.prototype.appendProfileElement=function(n,t,i,r){var e=BoldBIDashboard.getGuid(""),l=this.profileField.height()<this.profileField.find("#"+this.id+"_filter_config_profile_list").height(),o=l?190:200,u=BoldBIDashboard.buildTag("li.e-user-select e-list e-list-check bbi-designer-filterProfile-row bbi-filterConfig-master-filterprofile-li-container","",{},{id:this.id+"_li_"+e,name:i}),s=BoldBIDashboard.buildTag("a.e-chevron-right_01 bbi-remove-shadow","",{padding:"3.5px 0"}),h=BoldBIDashboard.buildTag("span.e-list-text e-rel e-user-select bbi-designer-fontfamily bbi-filterConfig-master-filterprofile-name bbi-dbrd-designer-hoverable"+(BoldBIDashboard.DashboardUtil.textWidth(i,"12px Heebo")>=o?" e-title-tip":""),i,{width:o,display:r?"inline-block":"none"},{name:i,id:this.id+"_txtSpan_"+e}),c=BoldBIDashboard.buildTag("input.e-textbox e-edit-profile bbi-designer-fontfamily bbi-filterConfig-master-filterprofile-textbox","",{width:o+26,display:r?"none":"inline-block"},{liTag:this.id+"_txtSpan_"+e,type:"text",id:this.id+"_txtEdit_"+e}),f=BoldBIDashboard.buildTag("div.e-chk-image e-icon e-cross-circle bbi-dbrd-designer-hoverable bbi-filterConfig-master-filterprofile-closeIcon-span bbi-filter-configuration-close","",{},{id:this.id+"_closeIcon_"+e,"data-tooltip":"Delete"});if(BoldBIDashboard.DashboardUtil.textWidth(i,"12px Heebo")>=o&&h.attr("data-tooltip",i),r?u.addClass("bbi-designer-filterProfile-list"):(f.addClass("e-list-close-icon"),c.addClass("e-selected-textbox")),s.append(h).append(c).append(f),u.append(s),this.profileField.find(".e-filter-profileList").append(u),r)this.profileAddIcon.css("opacity")!=="1"&&this.disableAddIcon(!1);else{this.disableAddIcon(!0);this.onListItemMouseUp({target:u})}u.off("click",this.bbdesigner$.proxy(this.profileSelection,this,u,t));f.off("click",this.bbdesigner$.proxy(this.removeProfile,this,u));u.on("click",this.bbdesigner$.proxy(this.profileSelection,this,u,t));f.on("click",this.bbdesigner$.proxy(this.removeProfile,this,u));u.bind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.editProfileName,this));u.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseOver,this.bbdesigner$.proxy(this.profileMouseOver,this,f));u.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseLeave,this.bbdesigner$.proxy(this.profileMouseLeave,this,f));u.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseUp,this.bbdesigner$.proxy(this.onListItemMouseUp,this));u.find(".e-edit-profile").off("blur",this.bbdesigner$.proxy(this.editColumnBlur,this,t));u.find(".e-edit-profile").off("keypress",this.bbdesigner$.proxy(this.editColumnKeyPress,this,t));u.find(".e-edit-profile").on("blur",this.bbdesigner$.proxy(this.editColumnBlur,this,t));u.find(".e-edit-profile").on("keypress",this.bbdesigner$.proxy(this.editColumnKeyPress,this,t));u.find(".e-edit-profile").focus()},n.prototype.removeProfile=function(n){var i=n.find("span.e-list-text").attr("name"),t;if(!BoldBIDashboard.isNullOrUndefined(this.selectedMaster)&&this.selectedMaster.ProfileManager.length>0)if(this.selectedProfile.ProfileInfo.Name===i&&this.profileAddIcon.attr("disabled")!=="disabled")for(t=0;t<this.selectedMaster.ProfileManager.length;t++)this.selectedMaster.ProfileManager[t].ProfileInfo.Name===this.selectedProfile.ProfileInfo.Name&&(this.selectedMaster.ProfileManager.splice(t,1),n.remove(),this.setProfileInfoToSelectedProfileProperty(this.selectedMaster.MasterInfo.ID));else(BoldBIDashboard.isNullOrUndefined(i)||i==="")&&(n.remove(),this.disableFilterConditionSlaveWidgetArea(!1),this.UpdateProfileDetails(),this.setProfileInfoToSelectedProfileProperty(this.selectedMaster.MasterInfo.ID));else n.remove(),this.resetListenerContainer(),this.resetColumnConfiguration(),this.listenerField.attr("disabled","true").css({opacity:"0.5"}),this.configChooserTag.find("#"+this.id+"_filter_config_default_rdo_input").prop("disabled",!0),this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("disabled",!0),this.configChooserTag.css("opacity","0.5"),this.profileAddIcon.css("opacity")!=="1"&&this.disableAddIcon(!1);this.scrollerRefresh(this.profileField)},n.prototype.editProfileName=function(n){var t=this.bbdesigner$(n.currentTarget).find(".e-edit-profile"),r=t[0],o=this.profileField.find(".e-filter-profileList"),u=o.find(".e-edit-profile:visible").not(t),f=this.bbdesigner$(n.currentTarget).find(".e-list-text"),e=this.bbdesigner$(n.currentTarget).find(".e-cross-circle"),i;t.css("display")==="none"&&u.length===0?(i=f.text().trim(),f.css("display","none"),n.currentTarget.classList.remove("bbi-designer-filterProfile-list"),e.css("display","none"),e.addClass("e-list-close-icon"),t.css("display","inline-block").val(i).focus(),t.addClass("e-selected-textbox"),this.editColVal=i,r.selectionStart=r.selectionEnd=i.length):u.length>0&&this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.profileNameEditAdd,IconType.warning,AlertType.Alert,!1,"")},n.prototype.profileMouseOver=function(n){n.hasClass("e-list-close-icon")||n.css("display","inline-block")},n.prototype.profileMouseLeave=function(n){n.css("display","none")},n.prototype.editColumnBlur=function(n,t){var r=this.bbdesigner$(t.currentTarget),f=r.closest("li"),o=r.attr("liTag"),e=f.find("#"+o),i=r.val().trim(),s=e.attr("name"),h=f.find(".e-cross-circle"),c,u;s!==i.trim()?i.trim()===""?this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.filterKeyEmpty,IconType.errors,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):this.isExistProfileName(i,e)?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidFilterProfile,this.locale.masterSlaveWindow.filterKeyExist,IconType.warning,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):(r.css("display","none"),e.css("display","inline-block").text(i.trim()),c=this.bbdesigner$("#"+f[0].id),u=this.bbdesigner$("#"+o),c.attr("name",i.trim()),u.attr("name",i.trim()),BoldBIDashboard.DashboardUtil.textWidth(i.trim(),"12px Heebo")>=u.width()?(u.addClass("bbi-dbrd-designer-hoverable"),u.attr("data-tooltip",i.trim())):u.removeAttr("data-tooltip"),this.UpdateSelectedProfileDetails(s,i.trim(),n),this.editColVal=null,this.profileAddIcon.css("opacity")!=="1"&&this.disableAddIcon(!1),this.addOrRemoveCloseIcon(h,f,r)):BoldBIDashboard.isNullOrUndefined(i)||i.trim()===""?i.trim()===""&&this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.filterKeyEmpty,IconType.warning,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):(r.css("display","none"),e.css("display","inline-block"),this.addOrRemoveCloseIcon(h,f,r))},n.prototype.invalidFilterProfileNameAlert=function(){this.filterContainer.find(".e-selected-textbox").focus().select()},n.prototype.addOrRemoveCloseIcon=function(n,t,i){BoldBIDashboard.isNullOrUndefined(n)||n.removeClass("e-list-close-icon");BoldBIDashboard.isNullOrUndefined(t)||t.addClass("bbi-designer-filterProfile-list");BoldBIDashboard.isNullOrUndefined(i)||i.removeClass("e-selected-textbox")},n.prototype.editColumnKeyPress=function(n,t){var c,u;if(t.keyCode===13){var r=this.bbdesigner$(t.currentTarget),f=r.closest("li"),o=r.attr("liTag"),e=f.find("#"+o),i=r.val().trim(),s=e.attr("name"),h=f.find(".e-cross-circle");s!==i.trim()?i.trim()===""?this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.filterKeyEmpty,IconType.errors,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):this.isExistProfileName(i,e)?this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.filterKeyExist,IconType.warning,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):(r.css("display","none"),e.css("display","inline-block").text(i.trim()),c=this.bbdesigner$("#"+f[0].id),u=this.bbdesigner$("#"+o),c.attr("name",i.trim()),u.attr("name",i.trim()),BoldBIDashboard.DashboardUtil.textWidth(i.trim(),"12px Heebo")>=u.width()?(u.addClass("bbi-dbrd-designer-hoverable"),u.attr("data-tooltip",i.trim())):u.removeAttr("data-tooltip"),this.UpdateSelectedProfileDetails(s,i.trim(),n),this.editColVal=null,this.profileAddIcon.css("opacity")!=="1"&&this.disableAddIcon(!1),this.addOrRemoveCloseIcon(h,f,r)):BoldBIDashboard.isNullOrUndefined(i)||i.trim()===""?i.trim()===""&&this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.filterKeyEmpty,IconType.errors,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):(r.css("display","none"),e.css("display","inline-block"),this.addOrRemoveCloseIcon(h,f,r));this.isFilterProfileModified=!0}},n.prototype.UpdateProfileDetails=function(){this.selectedMaster.ProfileManager.length>0&&!BoldBIDashboard.isNullOrUndefined(this.selectedProfile)&&(this.isCustomColumnModified&&(this.removeEmptyCustomColumn(),this.selectedProfile.ProfileInfo.FilterCondition=this.getCustomColumnValues(),this.selectedProfile.ProfileInfo.Option=this.isCustomColumnModified,this.isCustomColumnModified=!1),this.isChangedCheckBoxValue&&(this.selectedProfile.WidgetInfo=this.getSelectedListener(this.selectedProfile.WidgetInfo)))},n.prototype.SetSelectedProfile=function(n,t){var r,i;if(this.selectedMaster.MasterInfo.ID===n)for(r=this.createProfileInfo(),r.Name=t,r.FilterCondition=this.bbdesigner$.parseJSON(JSON.stringify(this.getDefaultFilterConditions(n))),this.selectedMaster.ProfileManager.push({ProfileInfo:r,WidgetInfo:this.generateWidgetInfo(n)}),i=0;i<this.selectedMaster.ProfileManager.length;i++)this.selectedMaster.ProfileManager[i].ProfileInfo.Name===t&&(this.selectedProfile=this.selectedMaster.ProfileManager[i])},n.prototype.isExistProfileName=function(n){var t;if(!BoldBIDashboard.isNullOrUndefined(this.selectedMaster.ProfileManager)&&this.selectedMaster.ProfileManager.length>0)for(t=0;t<this.selectedMaster.ProfileManager.length;t++)if(this.selectedMaster.ProfileManager[t].ProfileInfo.Name===n)return!0;return!1},n.prototype.UpdateSelectedProfileDetails=function(n,t,i){var u=!1,r;if(this.selectedMaster.ProfileManager.length>0)for(r=0;r<this.selectedMaster.ProfileManager.length;r++)this.selectedMaster.ProfileManager[r].ProfileInfo.Name===n&&(this.selectedMaster.ProfileManager[r].ProfileInfo.Name=t,u=!0);else u=!1;u||this.setNewProfile(i,t)},n.prototype.setNewProfile=function(n,t){this.UpdateProfileDetails();this.SetSelectedProfile(n,t);this.disableFilterConditionSlaveWidgetArea(!1);this.populateProfileArea(!1)},n.prototype.populateListenerWidgets=function(n,t){var o,r,i,f,u,s,e;for(this.resetListenerContainer(),o=this.listenerElementContainer.find(".e-designer-listener-table"),r=this.filterSerializer.getWidgetList(),i=0;i<r.length;i++)f=r[i].ID,f!==t.ID&&(!t.IsPoP||r[i].IsPoPSupported)&&this.checkBoxWithElementsCreation(r[i].Name,f,this.id+"_listener_"+f,!0,o,"5px 15px 0px 10px");for(u=0;u<n.length;u++)s=n[u],(!t.IsPoP||n[u].IsPoPSupported)&&(e=this.dashboardDesigner.element.find("#"+this.id+"_listener_"+s.ID).data("BoldBIDashboardCheckBox"),BoldBIDashboard.isNullOrUndefined(e)||e.setModel({checked:!0}));this.scrollerRefresh(this.listenerField)},n.prototype.resetListenerContainer=function(){this.listenerElementContainer.find(".e-designer-listener-table tr").remove()},n.prototype.dataChooser=function(n){var t,r,i;n.args.event.type==="change"&&(t=n.args.value==="custom",t?(this.isCustomColumnModified=!0,this.customTypeSwitcher(t),this.removeEmptyCustomColumn()):(this.removeEmptyCustomColumn(),r=this.getCustomColumnValues(),i=!0,i=this.isCustomColumnModified||this.selectedProfile.ProfileInfo.Option?!0:!1,i?this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.resetAllCustomizationText,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this,dataInfo:{filterCondition:r}}):this.customTypeSwitcher(t)))},n.prototype.confirmAction=function(n,t){n?(this.customTypeSwitcher(!1),this.customContainer.empty(),this.selectedProfile.ProfileInfo.FilterCondition=this.bbdesigner$.parseJSON(JSON.stringify(this.getDefaultFilterConditions(this.selectedMaster.MasterInfo.ID))),this.updateConfigFields(this.selectedProfile.ProfileInfo.FilterCondition,this.sourceColumnData,this.targetColumnData),this.isCustomColumnModified=!1,this.selectedProfile.ProfileInfo.Option=!1):(this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("checked",!0),this.customTypeSwitcher(!n),this.customContainer.empty(),this.updateConfigFields(t.filterCondition,this.sourceColumnData,this.targetColumnData),this.isCustomColumnModified=!0,this.selectedProfile.ProfileInfo.Option=!0)},n.prototype.getCustomColumnValues=function(){var n=this,i=!1,r=[],u=this.customContainer.find(".e-reportdesigner-column-config-row"),t=this.bbdesigner$;return u.each(function(u,f){var e=t(f).attr("id"),p=n.customContainer.find("#"+e+"_source_column").data("BoldBIDashboardDropDownList"),w=n.customContainer.find("#"+e+"_datasource_column").data("BoldBIDashboardDropDownList"),h=w.getSelectedValue(),b=w.getItemDataByValue(h)[0].Name,k=t(p.getSelectedItem()).text(),c=p.getSelectedValue(),a=n.customContainer.find("#"+e+"_target_column"),v="",s="",y,l,o;!BoldBIDashboard.isNullOrUndefined(a)&&a.length>0?(y=a.data("BoldBIDashboardDropDownList"),v=t(y.getSelectedItem()).text(),s=y.getSelectedValue()):(l=t("#"+e+"_target_column_div_drop_tree_wrapper_input"),l.data("BoldBIDashboardDropDownList"),v=l.data("BoldBIDashboardDropDownList").model.text,s=l.data("BoldBIDashboardDropDownList").model.value);c.length>0&&h.length>0&&s.length>0||(BoldBIDashboard.DashboardUtil.showErrIndictor(n.customContainer.find("#"+e+"_col_error_icon"),!0),i=!0);c.length>0||(n.updateBorder(t("#"+e+"_source_column_wrapper"),!0),i=!0);h.length>0||(n.updateBorder(t("#"+e+"_datasource_column_wrapper"),!0),i=!0);s.length>0||(n.updateBorder(t("#"+e+"_target_column_wrapper"),!0),i=!0);c.length>0&&h.length>0&&s.length>0&&(n.updateBorder(n.bbdesigner$("#"+e+"_source_column_wrapper > span"),!1),n.updateBorder(n.bbdesigner$("#"+e+"_datasource_column_wrapper > span"),!1),n.updateBorder(n.bbdesigner$("#"+e+"_target_column_wrapper > span"),!1),BoldBIDashboard.DashboardUtil.showErrIndictor(n.customContainer.find("#"+e+"_col_error_icon"),!1),o=n.createcolumnJson(),o.SourceColumn.Name=k,o.SourceColumn.ID=c,o.DataSource.ID=h,o.DataSource.Name=b,o.TargetColumn.Name=v,o.TargetColumn.ID=s,r.push(o),i=!1)}),r},n.prototype.updateBorder=function(n,t){t?n.addClass("bbi-designer-error"):n.removeClass("bbi-designer-error")},n.prototype.createcolumnJson=function(){return{SourceColumn:{ID:"",Name:""},DataSource:{ID:"",Name:""},TargetColumn:{ID:"",Name:""}}},n.prototype.customTypeSwitcher=function(n){var t=this.configChooserTag.find(".e-icon.bbi-masterslave-filter-add-plusIcon");n?(this.defaultContainer.css("display","none"),t.css("display","table"),this.columnConfig.css({display:"block",width:"515px"}),this.columnContainer.css({opacity:"1"}),this.scrollerRefresh(this.columnConfig)):(t.css("display","none"),this.columnConfig.css("display","none"),this.defaultContainer.css("display","block"),this.columnContainer.css({opacity:"0.5"}))},n.prototype.addCustomColumn=function(){this.renderNewConfigField();this.scrollerRefresh(this.columnConfig)},n.prototype.isDuplicate=function(n,t){for(var i=0;i<n.length;i++)if(n[i].Name===t)return!0;return!1},n.prototype.updateConfigFields=function(n){for(var r,u,t=0;t<n.length;t++){var i=this.renderNewConfigField(),f=this.customContainer.find("#"+i+"_source_column"),e=this.customContainer.find("#"+i+"_datasource_column"),o=this.customContainer.find("#"+i+"_target_column_div");f.data("BoldBIDashboardDropDownList").selectItemByText(n[t].SourceColumn.Name);e.data("BoldBIDashboardDropDownList").selectItemByValue(n[t].DataSource.ID);this.populateTargetColumn(this.targetColumnData,e,o,f,{});r=this.customContainer.find("#"+i+"_target_column");!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0?r.data("BoldBIDashboardDropDownList").selectItemByText(n[t].TargetColumn.Name):(u=this.bbdesigner$("#"+i+"_target_column_div_drop_tree_wrapper_input"),u.data("BoldBIDashboardDropDownList").model.text=u.data("BoldBIDashboardDropDownList").model.value=n[t].TargetColumn.Name,u.data("BoldBIDashboardDropDownList")._addText(n[t].TargetColumn.Name))}},n.prototype.populateCustomColumn=function(n,t){var e=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_"+n)),f=t,i=[],r,u;this.bbdesigner$.each(e.supportedColumnsForFiltering(),function(n,t){i.push({Name:t.Name,Id:t.Id})});r=this.dashboardDesigner.modules.dataSet.datasets;u=this.getTargetDataSourceList(r);this.targetColumnData=r;this.targetSourceData=u;this.sourceColumnData=i;f.length>0&&(this.updateConfigFields(f,i,u),this.isCustomColumnModified=!1)},n.prototype.getTargetDataSourceList=function(n){for(var i=[],t=0;t<n.length;t++)this.isDuplicateDataSource(i,n[t].Id)||BoldBIDashboard.isNullOrUndefined(n[t].Id)||n[t].Id===""||i.push({Name:n[t].Name,Id:n[t].Id});return i},n.prototype.isDuplicateDataSource=function(n,t){for(var i=0;i<n.length;i++)if(n[i].Id===t)return!0;return!1},n.prototype.renderNewConfigField=function(){var y=this.sourceColumnData,p=this.targetSourceData,h=this.targetColumnData,n=BoldBIDashboard.getGuid(this.id+"_row_"),r=BoldBIDashboard.buildTag("div.e-reportdesigner-column-config-row","",{padding:"4px 10px","border-radius":"4px"},{id:n,rowId:n}),o,t,s,e;this.customContainer.append(r);var u=BoldBIDashboard.buildTag("table.bbi-designer-table-dialog","",{height:"40px",width:"100%",background:"var(--designer-container-background) !important"},{unselectable:"on",id:n+"_column_config_table"}),c=BoldBIDashboard.buildTag("tr","",{},{id:n+"_link_rowTag"}),l=BoldBIDashboard.buildTag("td","",{width:"145px","padding-left":"5px"}),f=BoldBIDashboard.buildTag("input","",{"font-size":"12px"},{id:n+"_source_column"});l.append(f);o=BoldBIDashboard.buildTag("td","",{width:"145px","padding-left":"5px"},{});t=BoldBIDashboard.buildTag("input","",{"font-size":"12px"},{id:n+"_datasource_column"});o.append(t);s=BoldBIDashboard.buildTag("td","",{width:"145px","padding-left":"5px"},{});e=BoldBIDashboard.buildTag("div","",{"font-size":"12px"},{id:n+"_target_column_div"});s.append(e);var a=BoldBIDashboard.buildTag("td","",{"padding-left":"5px",width:"10px"},{id:n+"_col_error_icon"}),v=BoldBIDashboard.buildTag("td","",{"padding-right":"5px",width:"20px"}),i=BoldBIDashboard.buildTag("div.e-chk-image e-icon e-cross-circle bbi-dbrd-designer-hoverable bbi-filterConfig-master-custom-closeIcon-span bbi-filter-configuration-close","",{},{id:n+"_delete_icon","data-tooltip":"Delete"});r.append(u);u.append(c);c.append(l).append(o).append(s).append(a).append(v);this.dashboardDesigner.modules.util.renderErrIndictor(a,this.id,this.errorMsg);v.append(i);i.off("click",this.bbdesigner$.proxy(this.deleteCustomColumn,this,r));i.on("click",this.bbdesigner$.proxy(this.deleteCustomColumn,this,r));return f.BoldBIDashboardDropDownList({showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-border bbi-designer-ejwidgets bbi-dbrd-control",width:"145px",height:"26px",dataSource:y,fields:{text:"Name",value:"Id"},watermarkText:this.locale.masterSlaveWindow.sourceColumn,change:this.bbdesigner$.proxy(this.populateTargetColumn,this,h,t,e,f)}),t.BoldBIDashboardDropDownList({showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-border bbi-designer-ejwidgets bbi-dbrd-control",width:"145px",height:"26px",dataSource:p,fields:{text:"Name",value:"Id"},watermarkText:this.locale.masterSlaveWindow.targetDataSource,change:this.bbdesigner$.proxy(this.populateTargetColumn,this,h,t,e,f)}),u.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseOver,this.bbdesigner$.proxy(this.elementMouseOver,this,i)),u.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseLeave,this.bbdesigner$.proxy(this.elementMouseLeave,this,i)),n},n.prototype.updateModificationStatus=function(){this.isCustomColumnModified=!0},n.prototype.setEmptyDataSource=function(n){this.isCustomColumnModified=!0;var t=n.data("BoldBIDashboardDropDownList");t.model.dataSource.length>0&&(t.model.dataSource=[],t.clearText())},n.prototype.getCheckDataField=function(n,t,i){if(t.DataField===n)return!0;if(!BoldBIDashboard.isNullOrUndefined(t.ChildFields))for(var r=0;r<t.ChildFields.length;r++)i=this.getCheckDataField(n,t.ChildFields[r],i);return i},n.prototype.populateTargetColumn=function(n,t,i,r){var l,u,p,f,w,b,a;this.updateModificationStatus(null);var e=[],v=t.data("BoldBIDashboardDropDownList").getSelectedValue(),y=[],s=null,h=r.data("BoldBIDashboardDropDownList");BoldBIDashboard.isNullOrUndefined(h)||BoldBIDashboard.isNullOrUndefined(h.model.selectedIndex)||(s=h.model.dataSource[h.model.selectedIndex].Name);var k=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_"+this.selectedMaster.MasterInfo.ID)),d=k.DataGroupInfo.DataSourceID,o=null,c=null;if(!BoldBIDashboard.isNullOrUndefined(s)&&v.length>0&&s.length>0){for(u=0;u<n.length;u++)v===n[u].Id&&(e=n[u].Fields,c=n[u]),d===n[u].Id&&(o=n[u]);if(l=null,!BoldBIDashboard.isNullOrUndefined(o))for(u=0;u<o.Fields.length;u++)if(p=this.getCheckDataField(s,o.Fields[u],!1),p){l=o.Fields[u].TypeName;break}for(f=0;f<e.length;f++)l===e[f].TypeName&&y.push({Name:e[f].Name,Id:e[f].Id});BoldBIDashboard.isNullOrUndefined(c)||BoldBIDashboard.isNullOrUndefined(c.TreeViewData)?(!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0&&i[0].hasChildNodes()&&i[0].children[0].remove(),a=BoldBIDashboard.buildTag("input","",{"font-size":"12px"},{id:i.closest(".e-reportdesigner-column-config-row").attr("id")+"_target_column"}),i.append(a),a.BoldBIDashboardDropDownList({showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-border bbi-designer-ejwidgets bbi-dbrd-control",width:"145px",height:"26px",dataSource:y,fields:{text:"Name",value:"Id"},watermarkText:this.locale.masterSlaveWindow.targetColumn,change:this.bbdesigner$.proxy(this.updateModificationStatus,this)})):(!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0&&i[0].hasChildNodes()&&i[0].children[0].remove(),w=JSON.parse(c.TreeViewData),b={fields:{id:"ColumnId",parentId:"ParentId",hasChild:"HasChild",dataSource:w.Dimension,text:"Name"},callBackInstance:this,callBackMethod:"updateModificationStatus",watermarkText:this.locale.masterSlaveWindow.targetColumn,popupHeight:"100%",width:"145",height:"26px",optionalArgs:null},new BoldBIDashboard.DashboardDesignerUtility.DropdownTreeview(this.dashboardDesigner,b,i))}},n.prototype.removeEmptyCustomColumn=function(){var n=this,t,i;this.customContainer.find(".e-reportdesigner-column-config-row").length>0&&(t=this.customContainer.find(".e-reportdesigner-column-config-row"),i=this.bbdesigner$,t.each(function(t,r){var u=i(r).attr("id");n.isEmptyRow(u)&&n.customContainer.find("#"+u).remove()}),this.scrollerRefresh(this.columnConfig))},n.prototype.isEmptyRow=function(n){var u=this.customContainer.find("#"+n+"_source_column").data("BoldBIDashboardDropDownList").getSelectedValue(),f=this.customContainer.find("#"+n+"_datasource_column").data("BoldBIDashboardDropDownList").getSelectedValue(),t,i=this.customContainer.find("#"+n+"_target_column"),r=this.bbdesigner$("#"+n+"_target_column_div_drop_tree_wrapper_input");return(!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0?t=i.data("BoldBIDashboardDropDownList").getSelectedValue():!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0&&(t=r.data("BoldBIDashboardDropDownList").getSelectedValue()),!(u.length>0)||!(f.length>0)||!(t.length>0))?!0:!1},n.prototype.deleteCustomColumn=function(n){this.customContainer.find(".e-reportdesigner-column-config-row").length>0&&(this.isEmptyRow(n.attr("id"))||(this.isCustomColumnModified=!0),n.remove(),this.scrollerRefresh(this.columnConfig))},n.prototype.getDefaultFilterConditions=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_"+n)),i=[];return t.isDefaultDataWidget()||(i=this.filterSerializer.getFilterCondition(t)),i},n.prototype.updateGridValues=function(n){for(var i=this.getDefaultFilterConditions(n),r=[],t=0;t<i.length;t++)r.push({SourceColumn:i[t].SourceColumn.Name,TargetColumn:i[t].TargetColumn.Name,TargetDataSource:i[t].DataSource.Name});this.ejColumnGridObj.setModel({dataSource:r})},n.prototype.scrollerRefresh=function(n){n.data("BoldBIDashboardScroller")&&n.data("BoldBIDashboardScroller").refresh()},n.prototype.updateFilterConfig=function(){this.updateMasterDetails();this.targetInstance!==null&&(BoldBIDashboard.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.filterActionInfo]),this.isFilterProfileModified||this.closeFilterWindow());this.isFilterProfileModified=!1},n.prototype.openFilterConfiguration=function(n,t,i){this.ejFilterDialog.open();this.resetFilter();this.targetInstance=n;this.targetMethod=t;this.filterActionInfo=this.bbdesigner$.extend(!0,{},i);this.filterActionInfo.MastersCollection.length>0?(this.setDefaultSelection(),this.populateValues(),this.disableFilterConfigArea(!1)):(this.disableFilterConfigArea(!0),this.masterWidgetAddIconDiv.removeAttr("disabled"))},n.prototype.setDefaultSelection=function(){this.filterActionInfo.MastersCollection.length>0&&(this.selectedMaster=this.filterActionInfo.MastersCollection[0]);this.selectedMaster.ProfileManager.length>0&&(this.selectedProfile=this.selectedMaster.ProfileManager[0])},n.prototype.populateValues=function(){this.populateMasterArea();this.populateProfileArea(!0)},n.prototype.populateMasterArea=function(){var n,t;if(this.masterUlTag.children().length>0&&(this.masterUlTag.empty(),this.scrollerRefresh(this.masterListContainer)),this.filterActionInfo.MastersCollection.length>0){for(n=0;n<this.filterActionInfo.MastersCollection.length;n++)t=this.filterActionInfo.MastersCollection[n].MasterInfo,this.appendMasterList(t);this.masterUlTag.find("li").first().addClass("bbi-masterwidget-user-selection-active");this.masterUlTag.find("span").first().addClass("bbi-masterwidget-user-selection-active")}},n.prototype.populateProfileArea=function(n){if(this.selectedMaster.ProfileManager.length>0){if(this.resetColumnConfiguration(),n){this.resetProfileFields();for(var t=0;t<this.selectedMaster.ProfileManager.length;t++)this.appendProfileElement(this.selectedMaster.MasterInfo.Name,this.selectedMaster.MasterInfo.ID,this.selectedMaster.ProfileManager[t].ProfileInfo.Name,!0);this.profileField.find(".e-filter-profileList li").first().addClass("bbi-masterwidget-user-selection-active")}this.populateSlaveArea();this.populateDefaultArea();this.populateCustomArea()}else this.resetColumnConfiguration(),this.resetProfileFields(),this.resetListenerContainer(),this.disableFilterConditionSlaveWidgetArea(!0,!1);this.scrollerRefresh(this.profileField)},n.prototype.populateSlaveArea=function(){this.populateListenerWidgets(this.selectedProfile.WidgetInfo,this.selectedMaster.MasterInfo)},n.prototype.populateDefaultArea=function(){this.updateGridValues(this.selectedMaster.MasterInfo.ID)},n.prototype.populateCustomArea=function(){BoldBIDashboard.isNullOrUndefined(this.selectedProfile)||(this.populateCustomColumn(this.selectedMaster.MasterInfo.ID,this.selectedProfile.ProfileInfo.FilterCondition),this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("checked",this.selectedProfile.ProfileInfo.Option),this.customTypeSwitcher(this.selectedProfile.ProfileInfo.Option))},n.prototype.disableFilterConfigArea=function(n){n?(this.profileField.css({opacity:"0.5"}),this.disableFilterConditionSlaveWidgetArea(n)):(this.profileField.css({opacity:"1"}),this.disableFilterConditionSlaveWidgetArea(n))},n.prototype.disableAddIcon=function(n){n===void 0&&(n=!0);n?(this.profileAddIcon.attr("disabled","true").css("opacity","0.5"),this.filterProfileAddIconDiv.attr("disabled","true"),this.masterWidgetAddIconDiv.attr("disabled","true"),this.customAddIconDiv.attr("disabled","true")):(this.profileAddIcon.removeAttr("disabled").css("opacity","1"),this.filterProfileAddIconDiv.removeAttr("disabled"),this.masterWidgetAddIconDiv.removeAttr("disabled"),this.customAddIconDiv.removeAttr("disabled"))},n.prototype.disableFilterConditionSlaveWidgetArea=function(n,t){t===void 0&&(t=!0);n?(this.listenerField.prop("disabled","true").css({opacity:"0.5"}),this.configChooserTag.find("#"+this.id+"_filter_config_default_rdo_input").prop("disabled",!0),this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("disabled",!0),this.disableAddIcon(t),this.configChooserTag.css("opacity","0.5"),this.columnContainer.find("#"+this.id+"_custom_column_container .e-dropdownlist").BoldBIDashboardDropDownList("disable"),this.filterContainer.find("#"+this.id+"_filter_config_listener_list .e-checkbox").BoldBIDashboardCheckBox("disable")):(this.listenerField.removeAttr("disabled").css({opacity:"1"}),this.configChooserTag.find("#"+this.id+"_filter_config_default_rdo_input").prop("disabled",!1),this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("disabled",!1),this.disableAddIcon(!1),this.configChooserTag.css("opacity","1"),this.columnContainer.find("#"+this.id+"_custom_column_container .e-dropdownlist").BoldBIDashboardDropDownList("enable"),this.filterContainer.find("#"+this.id+"_filter_config_listener_list .e-checkbox").BoldBIDashboardCheckBox("enable"))},n.prototype.resetProfileFields=function(){this.profileField.find(".e-filter-profileList li").remove()},n.prototype.resetColumnConfiguration=function(){this.configChooserTag.find("#"+this.id+"_filter_config_default_rdo_input").prop("checked",!0);this.customTypeSwitcher(!1);this.destroyCustomContainer();this.customContainer.empty();this.ejColumnGridObj.setModel({dataSource:[]})},n.prototype.destroyCustomContainer=function(){BoldBIDashboard.DashboardUtil.destroyEjObjects(this.customContainer)},n.prototype.resetFilter=function(){this.masterUlTag.children().length>0&&(this.masterUlTag.empty(),this.scrollerRefresh(this.masterListContainer));this.resetListenerContainer();this.resetProfileFields();this.resetColumnConfiguration();this.reportItems=[];this.targetInstance=null;this.targetMethod=null;this.isCustomColumnModified=!1;this.filterActionInfo=null},n.prototype.closeFilterWindow=function(){this.filterContainer.find(".e-selected-textbox").length>0||(this.resetFilter(),this.disableFilterConfigArea(!1),this.ejFilterDialog.close())},n.prototype.destroy=function(){this.unWireEvents();BoldBIDashboard.DashboardUtil.destroyEjObjects(this.dashboardDesigner.element.find("#"+this.id+"_add_master"));this.dashboardDesigner.element.find("#"+this.id+"_add_master").length>0&&this.dashboardDesigner.element.find("#"+this.id+"_add_master").remove();BoldBIDashboard.DashboardUtil.destroyEjObjects(this.dashboardDesigner.element.find("#"+this.id+"_filter_configuration"));this.dashboardDesigner.element.find("#"+this.id+"_filter_configuration").length>0&&this.dashboardDesigner.element.find("#"+this.id+"_filter_configuration").remove()},n.prototype.renderMasterWindow=function(){var n=BoldBIDashboard.buildTag("div.bbi-userselect","",{},{id:this.id+"_add_master"}),i=BoldBIDashboard.buildTag("div","",{"padding-bottom":"10px"}),o=BoldBIDashboard.buildTag("span",this.locale.masterSlaveWindow.chooseWidgetText,{}),t=this.masterScrollElement=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{width:"100%",height:"300px",border:"1px solid var(--designer-primary-border-color)","border-radius":"4px",padding:"5px 0px"},{id:this.id+"_add_master_container"}),r=BoldBIDashboard.buildTag("div","",{}),u=this.masterElementContainer=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_add_master_fields"}),s=BoldBIDashboard.buildTag("table.e-designer-master-table","",{}),f,e;u.append(s);r.append(u);t.append(r);i.append(o);n.append(i).append(t);f=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-small",this.locale.masterSlaveWindow.okButtonText,{float:"right"},{id:this.id+"_master_add_ok_btn",type:"button"});e=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-secondary bbi-dbrd-btn-small bbi-dbrd-margin-left",this.locale.masterSlaveWindow.cancelButtonText,{float:"right"},{id:this.id+"_master_add_cancel_btn",type:"button"});this.dashboardDesigner.element.append(n);n.BoldBIDashboardDialog({width:"auto",height:"auto",minWidth:"280px",minHeight:"215px",title:this.locale.masterSlaveWindow.addWidgetDialogAlertTitle,enableResize:!1,showOnInit:!1,showFooter:!0,cssClass:"bbi-designer-dialog boldbi-dashboarddesigner",enableModal:!0,close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,closeIconTooltip:this.locale.dialogOptions.closeButtonText});t.BoldBIDashboardScroller({scrollerSize:5,height:"190px",width:"auto",enableTouchScroll:!0,autoHide:!0,buttonSize:0});this.masterFooterTag=this.dashboardDesigner.element.find("#"+this.id+"_add_master_foot");this.masterFooterTag.append(e).append(f);this.ejMasterDialog=n.data("BoldBIDashboardDialog")},n.prototype.isAvailableMaster=function(n){for(var t=0;t<this.filterActionInfo.MastersCollection.length;t++)if(n===this.filterActionInfo.MastersCollection[t].MasterInfo.ID)return!0;return!1},n.prototype.getMasterWidgetsJson=function(){for(var t=this.filterSerializer.getMastetFilterWidgets(),i=[],n=0;n<t.length;n++)i.push(t[n].getJson());return i},n.prototype.getRemainingWidgets=function(){for(var t=this.getMasterWidgetsJson(),i=[],n=0;n<t.length;n++)this.isAvailableMaster(t[n].UniqueName)||i.push(this.getWidgetJSON(t[n].UniqueName,t[n].ContainerSettings.Title));return i},n.prototype.profileManager=function(){return{ProfileInfo:null,WidgetInfo:[]}},n.prototype.createProfileInfo=function(){return{ID:"",Name:"",FilterCondition:[],Option:!1}},n.prototype.createMasterInfo=function(){return{ID:"",Name:""}},n.prototype.createWidgetInfo=function(){return{ID:"",Name:""}},n.prototype.createMasterCollectionJSON=function(){return{MasterInfo:null,ProfileManager:[]}},n.prototype.generateWidgetInfo=function(n){for(var r,u=[],i=this.filterSerializer.getWidgetList(),t=0;t<i.length;t++)i[t].ID!==n&&(r=this.createWidgetInfo(),r.ID=i[t].ID,r.Name=i[t].Name,u.push(r));return u},n.prototype.getWidgetJSON=function(n,t){var r=this.createMasterCollectionJSON(),i=this.createMasterInfo();return i.ID=n,i.Name=t,r.MasterInfo=i,r},n.prototype.openMasterDialog=function(){if(this.reportItems=this.getRemainingWidgets(),this.reportItems.length>0)this.resetMasterFields(),this.ejMasterDialog.open(),this.populateMastersInMasterDialog(this.reportItems);else{var n=this.reportItems.length>0?"more":" ";this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.alertWindow.noBtnText+n+this.locale.masterSlaveWindow.widgetsAvailable,IconType.information,AlertType.Alert,!1,"")}},n.prototype.addMasterItems=function(){this.openMasterDialog()},n.prototype.populateMastersInMasterDialog=function(n){for(var i=this.masterElementContainer.find(".e-designer-master-table"),t=0;t<n.length;t++)this.checkBoxWithElementsCreation(n[t].MasterInfo.Name,n[t].MasterInfo.ID,this.id+"_master_"+n[t].MasterInfo.ID.replace(" ",""),!1,i,"0px 20px 5px 10px");this.scrollerRefresh(this.masterScrollElement)},n.prototype.checkBoxWithElementsCreation=function(n,t,i,r,u,f){var s=BoldBIDashboard.buildTag("tr","",{id:i+"_tr"}),h=BoldBIDashboard.buildTag("td","",{align:"left",padding:f},{});s.append(h);u.append(s);var c=BoldBIDashboard.buildTag("div","",{display:"inline-block"},{}),e=BoldBIDashboard.buildTag("input","",{},{type:"checkbox",id:i}),o=BoldBIDashboard.buildTag("label.bbi-dashbrd-filter-widget-label bbi-dbrd-designer-hoverable",n,{height:"20px"},{"for":i,type:"label"});BoldBIDashboard.DashboardUtil.isExistTextWidth(o)&&o.attr("data-tooltip",n);c.append(e,o);h.append(c);r?e.BoldBIDashboardCheckBox({cssClass:"bbi-designer-param-assign bbi-designer-filter-checktext",change:this.bbdesigner$.proxy(this.changedCheckBoxValue,this,n,t)}):e.BoldBIDashboardCheckBox({cssClass:"bbi-designer-param-assign bbi-designer-filter-checktext"})},n.prototype.changedCheckBoxValue=function(n,t,i){var o,y,s,l,a,f,h,e,c,r,v,u;for(this.isChangedCheckBoxValue=!0,o=!1,y=0,s=0;s<this.selectedProfile.WidgetInfo.length;s++)if(this.selectedProfile.WidgetInfo[s].ID===t){o=!0;y=s;break}if(l=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_"+t)),i.isChecked){if(a=[],this.selectedMaster.MasterInfo.IsPoP&&!o){for(f=0;f<this.filterActionInfo.MastersCollection.length;f++)if(this.filterActionInfo.MastersCollection[f].MasterInfo.IsPoP&&this.filterActionInfo.MastersCollection[f].MasterInfo.ID!==this.selectedMaster.MasterInfo.ID)for(h=this.filterActionInfo.MastersCollection[f].ProfileManager,e=0;e<h.length;e++)for(c=0;c<h[e].WidgetInfo.length;c++)a.indexOf(h[e].WidgetInfo[c].ID)<0&&a.push(h[e].WidgetInfo[c].ID);if(a.indexOf(t)>-1){for(r=0;r<this.filterActionInfo.MastersCollection.length;r++)if(this.filterActionInfo.MastersCollection[r].MasterInfo.IsPoP&&this.filterActionInfo.MastersCollection[r].MasterInfo.ID!==this.selectedMaster.MasterInfo.ID)for(v=0;v<this.filterActionInfo.MastersCollection[r].ProfileManager[0].WidgetInfo.length;v++)this.filterActionInfo.MastersCollection[r].ProfileManager[0].WidgetInfo[v].ID===t&&this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.SlaveWidgetOverrideTitle,this.locale.alertWindowMesages.slaveOverrideMessage+this.filterActionInfo.MastersCollection[r].MasterInfo.Name+this.locale.alertWindowMesages.slaveOverrideAlert+this.selectedMaster.MasterInfo.Name+" ? ",IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{},instance:this,method:"confirmOverrideSlaveWidget"})}else l.isFieldBoundInUnsupportedSection()&&this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.SlaveWidgetOverrideTitle,this.locale.alertWindowMesages.slaveWidgetDataResetMessage,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{},instance:this,method:"confirmOverrideSlaveWidget"})}o||(u=new WidgetInfo,u.ID=t,u.Name=n,u.IsPoPSupported=BoldBIDashboard.isNullOrUndefined(l)?!1:l.IsPoPSupportedWidget,this.selectedProfile.WidgetInfo.push(u))}else u=this.selectedProfile.WidgetInfo,o&&u.splice(y,1),this.selectedProfile.WidgetInfo=u},n.prototype.confirmOverrideSlaveWidget=function(n){var t,i,r;if(n){for(t=0;t<this.filterActionInfo.MastersCollection.length;t++)if(this.filterActionInfo.MastersCollection[t].MasterInfo.IsPoP&&this.filterActionInfo.MastersCollection[t].MasterInfo.ID!==this.selectedMaster.MasterInfo.ID)for(i=0;i<this.filterActionInfo.MastersCollection[t].ProfileManager[0].WidgetInfo.length;i++)for(r=0;r<this.selectedProfile.WidgetInfo.length;r++)this.filterActionInfo.MastersCollection[t].ProfileManager[0].WidgetInfo[i].ID===this.selectedProfile.WidgetInfo[r].ID&&this.filterActionInfo.MastersCollection[t].ProfileManager[0].WidgetInfo.splice(i,1)}else this.populateListenerWidgets([],this.selectedMaster.MasterInfo)},n.prototype.updateMasterInfo=function(){for(var t,i=[],r=[],n=0;n<this.reportItems.length;n++)t=!1,t=this.dashboardDesigner.element.find("#"+this.id+"_master_"+this.reportItems[n].MasterInfo.ID.replace(" ","")).data("BoldBIDashboardCheckBox").isChecked(),t?(i.push(this.reportItems[n]),this.filterActionInfo.MastersCollection.push(this.bbdesigner$.parseJSON(JSON.stringify(this.getMasterInformation(this.reportItems[n].MasterInfo.ID))))):r.push(this.reportItems[n]);i.length>0?(this.reportItems=r,this.closeMasterWindow(),this.disableFilterConfigArea(!1),this.masterUlTag.find("li").length>0&&this.updateMasterDetails(),this.setDefaultSelection(),this.populateValues()):this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.masterWidget,this.locale.masterSlaveWindow.selectWidget,IconType.errors,AlertType.Alert,!1,"")},n.prototype.getMasterInformation=function(n){var t=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_"+n)),i=this.filterSerializer.getWidgetList();return this.filterSerializer.generateMasterInformation(t,i)},n.prototype.resetMasterFields=function(){this.masterElementContainer.find(".e-designer-master-table tr").remove()},n.prototype.closeMasterWindow=function(){this.ejMasterDialog.close()},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.FilterConfiguration",InternalFilterConfiguration,window);var FilterConfigurationModel=function(){function n(){this.MastersCollection=[]}return n}(),Widgetcollection=function(){function n(){this.MasterInfo=new MasterInfo;this.ProfileManager=[]}return n}(),MasterInfo=function(){function n(){this.ID=null;this.Name=null;this.IsPoP=!1;this.UniqueId=null;this.IsDatebucket=!1}return n}(),ProfileManager=function(){function n(){this.ProfileInfo=new ProfileInfo;this.WidgetInfo=[]}return n}(),ProfileInfo=function(){function n(){this.ID=null;this.Option=!0;this.Name=null;this.FilterCondition=[]}return n}(),FilterCondition=function(){function n(){this.SourceColumn=new ColumnDetail;this.TargetColumn=new ColumnDetail;this.DataSource=new ColumnDetail}return n}(),ColumnDetail=function(){function n(){this.ID=null;this.Name=null}return n}(),WidgetInfo=function(){function n(){this.ID=null;this.Name=null;this.IsPoPSupported=!1;this.UniqueId=null}return n}(),InternalFilterConfigurationInfo=function(){function n(){this.filterConfigurationModel=null;this.datebucketConfigurationModel=null}return n.prototype.setFilterConfiguration=function(n){this.filterConfigurationModel=n},Object.defineProperty(n.prototype,"FilterConfigurationModel",{get:function(){return this.filterConfigurationModel},enumerable:!1,configurable:!0}),n.prototype.setDatebucketConfigurationModel=function(n){this.datebucketConfigurationModel=n},Object.defineProperty(n.prototype,"DatebucketConfigurationModel",{get:function(){return this.datebucketConfigurationModel},enumerable:!1,configurable:!0}),n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.FilterConfigurationInfo",InternalFilterConfigurationInfo,window);var Settings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.Settings";this.MasterSlaveFilterActions=[]}return n}(),MasterSlaveFilterAction=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.MasterSlaveFilterAction";this.FilterActions=[];this.IsPoPWidget=!1;this.IsDatebucketWidget=!1}return n}(),FilterAction=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.FilterAction";this.Slaves=[];this.FilterCases=[]}return n}(),FilterShell=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.FilterShell";this.SourceColumn=new ColumnAliasPair;this.TargetColumn=new ColumnAliasPair}return n}(),ColumnAliasPair=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.ColumnAliasPair"}return n}(),FilterActionScheme;(function(n){n[n.All=0]="All";n[n.Selected=1]="Selected"})(FilterActionScheme||(FilterActionScheme={}));InternalMasterSlaveFilterSerializationHelper=function(){function n(n){this.filterObject=null;this.nonSlaveFilterWidgets=[];this.allSpecialChar="&ZeroWidthSpace;";this.dashboardDesigner=null;this.isInteractionCompleted=!0;this.isInteraction=!1;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.filterObject=this.dashboardDesigner.modules.filterConfigurationInfo;this.widgetHelper=this.dashboardDesigner.modules.widgetHelper;this.dateFormat=this.dashboardDesigner.model.localeSettings.dateFormat;this.dateTimeFormat=this.dashboardDesigner.model.localeSettings.dateFormat+" "+this.dashboardDesigner.model.localeSettings.timeFormat}return n.prototype.getFilterConfigurationInfoInstance=function(){return this.filterObject},n.prototype.getMastetFilterWidgets=function(){var n=this;return this.widgetHelper.getAllWidgets().filter(function(t){return t.canUseWidgetAsMaster()&&!n.checkParameterFieldBinded(t)})},n.prototype.getSlaveFilterWidgets=function(){var n=this;return this.widgetHelper.getAllWidgets().filter(function(t){return n.canUseAsSlaveWidget(t.Type)&&!n.checkParameterFieldBinded(t)})},n.prototype.checkParameterFieldBinded=function(n){return!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.DataGroupInfo)&&n.DataGroupInfo.FieldContainers.length>0&&!BoldBIDashboard.isNullOrUndefined(n.DataGroupInfo.FieldContainers[0].FieldInfos)&&n.DataGroupInfo.FieldContainers[0].FieldInfos.length>0?n.DataGroupInfo.FieldContainers[0].FieldInfos[0].IsParameterField:!1},n.prototype.canUseAsSlaveWidget=function(n){return this.nonSlaveFilterWidgets.indexOf(n.toLowerCase())===-1},n.prototype.GetWidgetCollectionsFromContainer=function(){for(var i,f,c,e,r,o,a,n,v,u=this.getMastetFilterWidgets(),s=this.getWidgetList(),l=this.getWidgetList(),h=[],y=[],t=0;t<u.length;t++)u[t].getJson().FilterSettings.ActAsMasterWidget&&h.push(u[t]),u[t].IsPoPWidget&&y.push(u[t]);for(i=new FilterConfigurationModel,f=0;f<h.length;f++){if(c=[],h[f].IsPoPWidget){for(n=0;n<i.MastersCollection.length;n++)if(i.MastersCollection[n].MasterInfo.IsPoP)for(e=i.MastersCollection[n].ProfileManager,r=0;r<e.length;r++)for(o=0;o<e[r].WidgetInfo.length;o++)c.indexOf(e[r].WidgetInfo[o].ID)<0&&c.push(e[r].WidgetInfo[o].ID);for(a=function(n){if(c.indexOf(l[n].ID)>-1){var t=s.filter(function(t){return t.ID===l[n].ID})[0];s.splice(s.indexOf(t),1)}},n=0;n<l.length;n++)a(n)}v=this.generateMasterInformation(h[f],s);i.MastersCollection.push(v)}return i},n.prototype.getWidgetList=function(){for(var i,t=this.getSlaveFilterWidgets(),r=[],n=0;n<t.length;n++)t[n].Type.toLowerCase()!=="label"&&t[n].getJson().FilterSettings.IgnoreFilterActions||(i=new WidgetInfo,i.ID=t[n].Name,i.Name=t[n].getJson().ContainerSettings.Title,i.IsPoPSupported=t[n].IsPoPSupportedWidget,i.UniqueId=t[n].getJson().UniqueId,t[n].isDefaultDataWidget()||r.push(i));return r},n.prototype.generateMasterInformation=function(n,t){var i=new Widgetcollection,r=new ProfileInfo,f=[],u=new ProfileManager;return BoldBIDashboard.isNullOrUndefined(n)||(r.FilterCondition=this.getFilterCondition(n),r.Name=n.getJson().ContainerSettings.Title+"(generated)",r.Option=!1,f=this.getSlaveWidgetList(t,n),u.ProfileInfo=r,u.WidgetInfo=f,i.MasterInfo.ID=n.Name,i.MasterInfo.Name=n.getJson().ContainerSettings.Title,i.MasterInfo.IsPoP=n.IsPoPWidget,i.MasterInfo.UniqueId=n.getJson().UniqueId,i.ProfileManager.push(u)),i},n.prototype.getSlaveWidgetList=function(n,t){for(var r=this.bbdesigner$.extend(!0,[],n),u=[],i=0;i<r.length;i++)r[i].ID!==t.Name&&(t.IsPoPWidget||u.push(r[i]));return this.slavesForMasterInCombineWidget(u,t.getJson().UniqueId)},n.prototype.slavesForMasterInCombineWidget=function(n,t){for(var f,e,u=this.bbdesigner$.extend(!0,[],n),s=this.widgetHelper.getAllWidgets().filter(function(n){return BoldBIDashboard.Dashboard.WidgetHelper.isContainerWidget(n)}),i=[],r=0;r<s.length;r++)if(f=this.dashboardDesigner.modules.containerTypeWidgetHelper.getWidgetAsContainerWidget(s[r]),i=i.concat(f.getChildWidgetList()),f.isMasterPresentInChild(t)){i=[];i=f.getChildWidgetList();break}if(i.indexOf(t)!==-1&&i.length>0)for(u=[],e=0;e<n.length;e++)for(r=0;r<i.length;r++){var c=i[r],o=n[e],h=o.UniqueId;if(!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(h))if(i.indexOf(t)!==-1){if(c===h){u.push(o);break}}else u.push(o)}return u},n.prototype.getFilterCondition=function(n){var e=[],i,f,o,u,t,r,s;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.supportedColumnsForFiltering())){for(i=n.supportedColumnsForFiltering(),f=this.dashboardDesigner.modules.dataSet.datasets,o=[],u=0;u<f.length;u++)n.DataGroupInfo.DataSourceID!==f[u].Id&&o.push(f[u]);for(t=0;t<i.length;t++)r=new FilterCondition,r.SourceColumn.ID=i[t].Id,r.SourceColumn.Name=i[t].Name,r.TargetColumn.ID=i[t].Id,r.TargetColumn.Name=i[t].Name,r.DataSource.ID=n.DataGroupInfo.DataSourceID,r.DataSource.Name=n.DataGroupInfo.DataSourceName,s=this.getFieldType(i[t].Name,i[t].DatasourceID,i[t].Id),e.push(r),this.GetMatchedFieldFromOtherDataSets(o,i[t],s,e)}return e},n.prototype.GetMatchedFieldFromOtherDataSets=function(n,t,i,r){for(var o,f,u,e=0;e<n.length;e++)for(o=n[e].Fields,f=0;f<o.length;f++)t.Name===o[f].DataField&&i.toLowerCase()===o[f].TypeName.toLowerCase()&&(u=new FilterCondition,u.SourceColumn.ID=t.Id,u.SourceColumn.Name=t.Name,u.TargetColumn.ID=o[f].Id,u.TargetColumn.Name=o[f].DataField,u.DataSource.ID=n[e].Id,u.DataSource.Name=n[e].Name,r.push(u))},n.prototype.getFieldType=function(n,t,i){for(var u,o,s,r,e=this.dashboardDesigner.modules.dataSet.datasets,f=0;f<e.length;f++)if(t===e[f].Id)if(u=e[f].Fields,o=null,BoldBIDashboard.isNullOrUndefined(u[0].ChildFields)){for(r=0;r<u.length;r++)if(n===u[r].DataField)return u[r].TypeName}else{for(r=0;r<u.length;r++)if(s=this.getCurrentFieldInfo(u[r],i),!BoldBIDashboard.isNullOrUndefined(s)){o=s.TypeName;break}return o}return null},n.prototype.getCurrentFieldInfo=function(n,t){var i=null,r;if(n.Id===t)i=n;else if(!BoldBIDashboard.isNullOrUndefined(n.ChildFields))for(r=0;r<n.ChildFields.length;r++)if(i=this.getCurrentFieldInfo(n.ChildFields[r],t),!BoldBIDashboard.isNullOrUndefined(i))break;return i},n.prototype.ActAsMasterPropertyChangeInFilterConfigInfo=function(n,t){var i=this.dashboardDesigner.designerPanel.selectedReportItems.length>0?this.getCurrentWidgetInstance():t,e=this.getWidgetList(),u,r,f;if(this.filterObject.FilterConfigurationModel!=null){if(n)u=this.generateMasterInformation(i,e),this.filterObject.FilterConfigurationModel.MastersCollection.push(u),this.showOrHideClearFilterIcon(i.ControlContainer.find(".bbi-dbrd-control-header"),n);else{for(r=0;r<this.filterObject.FilterConfigurationModel.MastersCollection.length;r++)i.Name===this.filterObject.FilterConfigurationModel.MastersCollection[r].MasterInfo.ID&&this.filterObject.FilterConfigurationModel.MastersCollection.splice(r,1);n||i.clearFilter();this.showOrHideClearFilterIcon(i.ControlContainer.find(".bbi-dbrd-control-header"),n)}f=this.getFilterConfigurationModelCollectionValue();this.masterSlaveFilterSerializer(f)}else n||i.ControlHeader===null||i.ControlHeader.parents(".bbi-dbrd-control-container").attr("controlType")!==BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(WidgetType,WidgetType.Filter)||i.clearFilter(),this.showOrHideClearFilterIcon(i.ControlContainer.find(".bbi-dbrd-control-header"),n)},n.prototype.getFilterConfigurationModelCollectionValue=function(){var n=[];return this.filterObject.FilterConfigurationModel.MastersCollection.forEach(function(t){n.push(t)}),this.filterObject.DatebucketConfigurationModel.MastersCollection.forEach(function(t){n.push(t)}),n},n.prototype.RefreshMasterSlaveTitle=function(){var t,u,i,s,n,o,f,e,r;if(this.filterObject.FilterConfigurationModel!==null)for(t=this.GetAllWidgetInstanceFromContainer(),u=this.filterObject.FilterConfigurationModel.MastersCollection,i=0;i<u.length;i++)for(s=u[i].MasterInfo.ID,n=0;n<t.length;n++)for(s===t[n].Name&&(this.filterObject.FilterConfigurationModel.MastersCollection[i].MasterInfo.Name=t[n].getJson().ContainerSettings.Title),o=u[i].ProfileManager,f=0;f<o.length;f++)for(e=o[f].WidgetInfo,r=0;r<e.length;r++)e[r].ID===t[n].Name&&(e[r].Name=t[n].getJson().ContainerSettings.Title)},n.prototype.IgnoreFilterActionPropertyChange=function(n){var r=this.getCurrentWidgetInstance(),s,t,o,i,h,f,u,e,c,l;if(this.filterObject.FilterConfigurationModel!=null){if(n){for(o=this.filterObject.FilterConfigurationModel.MastersCollection,i=0;i<o.length;i++)if(h=o[i].MasterInfo,r.Name!==h.ID)for(f=o[i].ProfileManager,u=0;u<f.length;u++)for(e=0;e<f[u].WidgetInfo.length;e++)c=f[u].WidgetInfo[e].ID,r.Name===c&&f[u].WidgetInfo.splice(e,1)}else for(s=function(n){var p=t.filterObject.FilterConfigurationModel.MastersCollection[n].MasterInfo,i,f,y,e,o,s,l,h,v;if(r.Name!==p.ID&&t.canUseAsSlaveWidget(r.Type))for(i=new WidgetInfo,i.ID=r.Name,i.Name=r.getJson().ContainerSettings.Title,i.IsPoPSupported=r.IsPoPSupportedWidget,i.UniqueId=r.getJson().UniqueId,f=0;f<t.filterObject.FilterConfigurationModel.MastersCollection[n].ProfileManager.length;f++){if(y=!1,t.filterObject.FilterConfigurationModel.MastersCollection[n].MasterInfo.IsPoP&&i.IsPoPSupported)for(e=0;e<=f;e++)if(o=t.filterObject.FilterConfigurationModel.MastersCollection[e],o.MasterInfo.IsPoP)for(s=0;s<o.ProfileManager.length;s++)for(l=o.ProfileManager[s].WidgetInfo,h=0;h<l.length;h++)l[h].ID===i.ID&&(y=!0);if(!t.filterObject.FilterConfigurationModel.MastersCollection[n].MasterInfo.IsPoP){var c=[],a=t.filterObject.FilterConfigurationModel.MastersCollection[n],u=a.ProfileManager[f];BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(a.MasterInfo.UniqueId)||(c.push(i),c=t.slavesForMasterInCombineWidget(c,a.MasterInfo.UniqueId));c.length>0?u.WidgetInfo.filter(function(n){return n.Name===i.Name}).length===0&&u.WidgetInfo.push(i):u.WidgetInfo.filter(function(n){return n.Name===i.Name}).length>0&&(v=u.WidgetInfo.indexOf(u.WidgetInfo.filter(function(n){return n.Name===i.Name})[0]),v!==-1&&u.WidgetInfo.splice(v,1))}}},t=this,i=0;i<this.filterObject.FilterConfigurationModel.MastersCollection.length;i++)s(i);l=this.getFilterConfigurationModelCollectionValue();this.masterSlaveFilterSerializer(l)}},n.prototype.GetAllWidgetInstanceFromContainer=function(){for(var r,t=[],i=BoldBIDashboard.Dashboard.WidgetHelper.getAllWidgetElements(this.dashboardDesigner._id,this.dashboardDesigner.modules.Mode.designCanvas,".bbi-dbrditem"),n=0;n<i.length;n++)r=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(i[n])),t.push(r);return t},n.prototype.GetWidgetElementByReportName=function(n){for(var u,r,i=BoldBIDashboard.Dashboard.WidgetHelper.getAllWidgetElements(this.dashboardDesigner._id,this.dashboardDesigner.modules.Mode.designCanvas,".bbi-dbrditem"),t=0;t<i.length;t++)if(u=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(i[t])),u.getJson().UniqueName===n){r=this.bbdesigner$(i[t]);break}return r},n.prototype.RemoveSelectedWidgetFromFilterObject=function(n){var t=BoldBIDashboard.isNullOrUndefined(n)?this.getCurrentWidgetInstance():n,i,r,u;BoldBIDashboard.isNullOrUndefined(this.filterObject.FilterConfigurationModel)||(i=this.filterObject.FilterConfigurationModel.MastersCollection,this.removeFromMasterList(i,t),this.removeFromSlaveList(i,t),r=this.filterObject.DatebucketConfigurationModel.MastersCollection,this.removeFromMasterList(r,t),this.removeFromSlaveList(r,t),u=this.getFilterConfigurationModelCollectionValue(),this.masterSlaveFilterSerializer(u),this.updatePoPSettings(t.Type==="Grid"))},n.prototype.removeFromMasterList=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i].MasterInfo,t.Name===r.ID){this.filterObject.FilterConfigurationModel.MastersCollection.splice(i,1);break}},n.prototype.removeFromSlaveList=function(n,t){for(var e,u,i,f,o,r=0;r<n.length;r++)if(e=n[r].MasterInfo,t.Name!==e.ID)for(u=n[r].ProfileManager,i=0;i<u.length;i++)for(f=0;f<u[i].WidgetInfo.length;f++)if(o=u[i].WidgetInfo[f].ID,t.Name===o){u[i].WidgetInfo.splice(f,1);break}},n.prototype.RefreshFilterSettings=function(){this.filterObject.FilterConfigurationModel==null&&this.filterObject.setFilterConfiguration(this.GetWidgetCollectionsFromContainer());this.filterObject.DatebucketConfigurationModel==null&&this.filterObject.setDatebucketConfigurationModel(new FilterConfigurationModel);var n=this.getFilterConfigurationModelCollectionValue();this.masterSlaveFilterSerializer(n)},n.prototype.MasterSlaveFilterDeSerializer=function(n){var i,l,o,h,s,a,y,f,r,e,p,v,c,t;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.MasterFilterInfo)){var u=n.MasterFilterInfo.MasterSlaveFilterActions,w=new FilterConfigurationModel,b=new FilterConfigurationModel;for(i=0;i<u.length;i++){for(l=new Widgetcollection,o=new MasterInfo,t=0;t<n.Widgets.length;t++)n.Widgets[t].UniqueName===u[i].MasterControlName&&(o.Name=n.Widgets[t].ContainerSettings.Title,o.UniqueId=n.Widgets[t].UniqueId);for(o.ID=u[i].MasterControlName,o.IsPoP=u[i].IsPoPWidget,o.IsDatebucket=u[i].IsDatebucketWidget,h=u[i].FilterActions,s=0;s<h.length;s++){for(a=new ProfileInfo,y=new ProfileManager,a.Option=h[s].IsFilterCasesCustomized,a.Name=h[s].FilterActionName,f=h[s].FilterCases,r=0;r<f.length;r++)e=new FilterCondition,e.SourceColumn.Name=f[r].SourceColumn.Caption,e.SourceColumn.ID=f[r].SourceColumn.UniqueColumn,e.TargetColumn.Name=f[r].TargetColumn.Caption,e.TargetColumn.ID=f[r].TargetColumn.UniqueColumn,e.DataSource.Name=f[r].TargetDataSourceName,e.DataSource.ID=f[r].TargetDataSource,a.FilterCondition.push(e);for(p=h[s].Slaves,v=0;v<p.length;v++){for(c=new WidgetInfo,t=0;t<n.Widgets.length;t++)n.Widgets[t].UniqueName===p[v]&&(c.Name=n.Widgets[t].ContainerSettings.Title,c.UniqueId=n.Widgets[t].UniqueId);c.ID=p[v];c.IsPoPSupported=u[i].IsPoPWidget;y.WidgetInfo.push(c)}y.ProfileInfo=a;l.ProfileManager.push(y)}l.MasterInfo=o;u[i].IsDatebucketWidget?b.MastersCollection.push(l):w.MastersCollection.push(l)}return{filterConfigurationModel:w,datebucketConfigurationModel:b}}},n.prototype.masterSlaveFilterSerializer=function(n,t){var s,i,e,r,o,h,u,f;if(t===void 0&&(t=!0),this.dashboardDesigner.model.mode!==BoldBIDashboard.Designer.mode.view&&this.dashboardDesigner.model.mode!==BoldBIDashboard.Designer.mode.designpreview){if(s=new Settings,!BoldBIDashboard.isNullOrUndefined(n)){for(i=0;i<n.length;i++){for(e=new MasterSlaveFilterAction,e.MasterControlName=n[i].MasterInfo.ID,e.IsPoPWidget=n[i].MasterInfo.IsPoP,e.IsDatebucketWidget=n[i].MasterInfo.IsDatebucket,r=0;r<n[i].ProfileManager.length;r++){for(o=new FilterAction,o.FilterActionName=n[i].ProfileManager[r].ProfileInfo.Name,o.IsFilterCasesCustomized=n[i].ProfileManager[r].ProfileInfo.Option,h=0;h<n[i].ProfileManager[r].WidgetInfo.length;h++)(!n[i].MasterInfo.IsPoP||n[i].ProfileManager[r].WidgetInfo[h].IsPoPSupported)&&o.Slaves.push(n[i].ProfileManager[r].WidgetInfo[h].ID);for(u=0;u<n[i].ProfileManager[r].ProfileInfo.FilterCondition.length;u++)f=new FilterShell,f.SourceColumn.Caption=n[i].ProfileManager[r].ProfileInfo.FilterCondition[u].SourceColumn.Name,f.TargetColumn.Caption=n[i].ProfileManager[r].ProfileInfo.FilterCondition[u].TargetColumn.Name,f.SourceColumn.UniqueColumn=n[i].ProfileManager[r].ProfileInfo.FilterCondition[u].SourceColumn.ID,f.TargetColumn.UniqueColumn=n[i].ProfileManager[r].ProfileInfo.FilterCondition[u].TargetColumn.ID,f.TargetDataSource=n[i].ProfileManager[r].ProfileInfo.FilterCondition[u].DataSource.ID,f.TargetDataSourceName=n[i].ProfileManager[r].ProfileInfo.FilterCondition[u].DataSource.Name,o.FilterCases.push(f);e.FilterActions.push(o)}s.MasterSlaveFilterActions.push(e)}s!==null&&t&&this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.notifypropertychange,{action:BoldBIDashboard.DashboardUtil.DesignerAction.NotifyPropertyChange,data:JSON.stringify({FilterConfigurationJson:s})},{fnction:this.bbdesigner$.proxy(function(n){n.Status||console.info(n.Message)},this)})}return s}},n.prototype.updatePoPSettings=function(n){var s=[],t=this.filterObject.filterConfigurationModel.MastersCollection,i,f,o,e,h,u,r,c;if(!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0)for(i=0;i<t.length;i++)if(t[i].MasterInfo.IsPoP){for(f=0;f<t[i].ProfileManager.length;f++)for(o=t[i].ProfileManager[f].WidgetInfo,e=0;e<o.length;e++)s.push(o[e].ID);h=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.GetWidgetElementByReportName(t[i].MasterInfo.ID));h.updatePoPSettings(!1,n)}for(u=this.getWidgetList(),r=0;r<u.length;r++)u[r].IsPoPSupported&&(c=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.GetWidgetElementByReportName(u[r].ID)),c.updatePoPSettings(s.indexOf(u[r].ID)>-1,n))},n.prototype.updateInitialFiltersForFilterControls=function(n,t,i,r){var u=new SelectedFilterValue,e=new InitialDimensionFilter,o=new InitialMeasureFilter,f=new InitialDateFilter;u.UniqueColumnName=n.UniqueColumnName;u.FieldId=n.Id;u.ColumnName=n.Name;u.ReportName=t;u.IsStdDateTime=r.IsStdDateTime;u.IsMultiSelection=r.IsMultiSelection;u.IsGroupBarFilter=r.IsGroupBarFilter;u.IsRange=r.IsRange;u.IsParameterField=n.IsParameterField;switch(i){case"bbi-designer-dataset-string":case"bbi-designer-dataset-boolean":e.DimesnionFilterCondition=r.Action;e.Text=r.FilterInfo;break;case"bbi-designer-dataset-number":o.MeasureFilterCondition=r.Action;o.Values=r.FilterInfo;break;case"bbi-designer-dataset-datetime":case"bbi-designer-dataset-time":f.DateFilterCondition=r.Action;f.DisplayDateFilterList=r.FilterInfo.DisplayFilterList;f.DateFilterList=r.FilterInfo.DateFilterList;f.DateFilterType=BoldBIDashboard.isNullOrUndefined(r.FilterInfo.DateFilterType)?f.DateFilterType:r.FilterInfo.DateFilterType;f.DateFormat=r.FilterInfo.DateFormat;f.SelectedRangeforRelativeFilter=BoldBIDashboard.isNullOrUndefined(r.FilterInfo.SelectedRangeforRelativeFilter)?null:r.FilterInfo.SelectedRangeforRelativeFilter}return u.InitialDimensionFilter=e,u.InitialMeasureFilter=o,u.InitialDateFilter=f,u},n.prototype.getAllWidgetSelectedValues=function(n){var i,r,t,u,f;for(n===void 0&&(n=0),i=[],r=this.GetAllWidgetInstanceFromContainer(),t=0;t<r.length;t++)if(u=r[t].getJson().SelectedFilterValues,!BoldBIDashboard.isNullOrUndefined(r[t].getJson().FilterSettings)&&r[t].getJson().FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(u)&&u.length>0)for(f=0;f<u.length;f++)i.push(u[f]);return this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view&&!this.isInteraction&&n>0&&(i=this.dashboardDesigner.getFilterDataUsingQuery().length>0?this.dashboardDesigner.getFilterDataUsingQuery():!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.rdlParser)&&!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.rdlParser.rdlJsonObj)&&!BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.rdlParser.rdlJsonObj.WidgetData)?this.getAllWidgetSelectedValuesFromCollection(this.dashboardDesigner.rdlParser.rdlJsonObj.WidgetData):i),i},n.prototype.getAllWidgetSelectedValuesFromCollection=function(n){for(var i,t,r,f=[],u=0;u<n.length;u++)if(i=n[u],t=i.SelectedFilterValues,!BoldBIDashboard.isNullOrUndefined(i.FilterSettings)&&i.FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0)for(r=0;r<t.length;r++)f.push(t[r]);return f},n.prototype.getDatebucketSelectedValues=function(n){for(var r,u,e,f,i=this.GetAllWidgetInstanceFromContainer(),t=0;t<i.length;t++)if(i[t].isDefaultDataWidget()&&(r=i[t].getJson().DatebucketFilterValues,!BoldBIDashboard.isNullOrUndefined(r)&&r.length>0)){for(u=0;u<r.length;u++)n.push(r[u]);e=i[t].getJson().selectedValue.replace(/\s/g,"");f=DateTimeFormat[e];BoldBIDashboard.isNullOrUndefined(f)||f===DateTimeFormat.None||BoldBIDashboard.DashboardUtil.invokeMethod(i[t],"modifyColumnValue",[f])}return n},n.prototype.getConfiguredWidgetsOfDatebucket=function(n,t){var i=this.filterObject.DatebucketConfigurationModel.MastersCollection,r,e,f,u;if(!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0)for(r=0;r<i.length;r++)if(i[r].MasterInfo.ID===n){for(e=0;e<i[r].ProfileManager.length;e++)for(f=i[r].ProfileManager[e].WidgetInfo,u=0;u<f.length;u++)t.indexOf(f[u].ID)===-1&&this.isWidgetConfigured(f[u].ID)&&t.push(f[u].ID);break}return t},n.prototype.getSelectedValuesForWidgetRequest=function(n){return n===void 0&&(n=0),this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view||this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.designpreview?this.getAllWidgetSelectedValues(n):[]},n.prototype.GetSlaveListOfMasterWidget=function(n){var e=[],t=this.filterObject.FilterConfigurationModel.MastersCollection,i,f,u,r;if(!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0)for(i=0;i<t.length;i++)if(t[i].MasterInfo.ID===n){for(f=0;f<t[i].ProfileManager.length;f++)for(u=t[i].ProfileManager[f].WidgetInfo,r=0;r<u.length;r++)e.indexOf(u[r].ID)===-1&&this.isWidgetConfigured(u[r].ID)&&e.push(u[r].ID);break}return e},n.prototype.isWidgetConfigured=function(n){var t=this.dashboardDesigner.designerPanel;return t.designPanel.find("div[data-name="+n+"] .bbi-widget-not-configured-text").css("display")==="none"?!0:!1},n.prototype.doInteraction=function(n,t){var f,e;this.RefreshFilterSettings();this.isInteraction=!0;var u=this.dashboardDesigner.modules.dataConfiguration,o=this.dashboardDesigner.designerPanel,i={selectedInfo:this.getAllWidgetSelectedValues()},r=this.GetSlaveListOfMasterWidget(n);if(this.dashboardDesigner.setFilterData([]),r.length>0&&(this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view||this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.designpreview)&&!this.dashboardDesigner.clearAllFilterClicked&&(this.isInteractionCompleted=!1,f=this.dashboardDesigner.modules.dynamicParameterPanel.getAllFilterWidgetParameterSelectedValues(null,""),!BoldBIDashboard.isNullOrUndefined(f)&&f.length>0?u.fetchDataForWidgets(r,!1,i.selectedInfo,!1,f,null,!1,n,!1,u.datasourceCallerId,t):u.fetchDataForWidgets(r,!1,i.selectedInfo,!1,null,null,!1,n,!1,u.datasourceCallerId,t)),this.dashboardDesigner.model.mode!==BoldBIDashboard.Designer.mode.design&&r.length===0&&this.dashboardDesigner.modules.labelParameter.getDataForLabelParameter(i.selectedInfo,this.dashboardDesigner._id,!0,n,null,!1,!0),i.selectedInfo.length>0&&this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.designpreview)this.dashboardDesigner.addToRevertInteractionList(r),this.dashboardDesigner.addToRevertInteractionList([n]);else if(i.selectedInfo.length===0&&this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.design)for(this.dashboardDesigner.removeFromRevertInteractionList(n),e=0;e<r.length;e++)this.dashboardDesigner.addToWidgetCacheCollection(r[e],null,!1);o.banner.toggleFilterOverview(i.selectedInfo.length>0);o.initialFilterIfModified(!0);this.dashboardDesigner.model.filterOverviewSettings.showSaveIcon&&(this.dashboardDesigner.filterOverviewObj.isModified=!0);BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.filterOverviewSettings.viewId)||this.dashboardDesigner.model.filterOverviewSettings.viewId.trim()===""||this.updateSavedViewChangeStatus(i)},n.prototype.updateSavedViewChangeStatus=function(n){if(this.dashboardDesigner.initialFilterData.length===n.selectedInfo.length){this.dashboardDesigner.designerPanel.banner.hideViewFilterChangeIndicator();for(var t=0;t<n.selectedInfo.length;t++)if(this.dashboardDesigner.initialFilterData[t].ReportName===n.selectedInfo[t].ReportName){if(this.validateCurrentFilterWithInitFilter(this.dashboardDesigner.initialFilterData[t].InitialDimensionFilter.Text,n.selectedInfo[t].InitialDimensionFilter.Text)||this.validateCurrentFilterWithInitFilter(this.dashboardDesigner.initialFilterData[t].InitialMeasureFilter.Values,n.selectedInfo[t].InitialMeasureFilter.Values)||this.validateCurrentFilterWithInitFilter(this.dashboardDesigner.initialFilterData[t].InitialDateFilter.DateFilterList,n.selectedInfo[t].InitialDateFilter.DateFilterList)){this.dashboardDesigner.designerPanel.banner.showViewFilterChangeIndicator();break}}else{this.dashboardDesigner.designerPanel.banner.showViewFilterChangeIndicator();break}}else this.dashboardDesigner.designerPanel.banner.showViewFilterChangeIndicator()},n.prototype.validateCurrentFilterWithInitFilter=function(n,t){var r=n.length,u=t.length,i;if(r===u)for(i=0;i<r;i++)if(n[i]!==t[i])return!0;return!1},n.prototype.getDateFilterList=function(n,t){for(var e,u,f=t?this.dashboardDesigner.model.localeSettings.dateFormat+" "+this.dashboardDesigner.model.localeSettings.timeFormat:this.dashboardDesigner.model.localeSettings.dateFormat,r=[],i=0;i<n.length;i++)e=BoldBIDashboard.parseDate(n[i],f),u=BoldBIDashboard.format(e,f),BoldBIDashboard.isNullOrUndefined(u)?r.push(n[i]):r.push(u);return r},n.prototype.showOrHideClearFilterIcon=function(n,t){if(n!==null){var i=10;t?(n.find(".bbi-remove-control-filter").css("display","block"),i=n.find(".bbi-dbrd-controlIcon-container").outerWidth(!0)+10):n.find(".bbi-remove-control-filter").css("display","none");n.find(".bbi-dbrd-control-title-wrapper").css({width:"calc(100%)"})}},n.prototype.isValidDataGroupInfo=function(n,t){return n.FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(t.Values)&&!BoldBIDashboard.isNullOrUndefined(t.Values[0])&&!BoldBIDashboard.isNullOrUndefined(t.Values[0].Values)&&t.Values[0].Values.length>0},n.prototype.configureSelectedFilterInfo=function(n,t,i){var y=this,s,e,h;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(i))for(s=0;s<t.length;s++){var r=t[s],u=[],l=[],o=[],c=r.FieldActualType==="bbi-designer-dataset-string"||r.FieldActualType==="bbi-designer-dataset-boolean"||r.FieldActualType==="bbi-designer-dataset-number",a=r.FieldActualType==="bbi-designer-dataset-datetime"||r.FieldActualType==="bbi-designer-dataset-time",p=c?"bbi-designer-dataset-string":r.FieldActualType,f=c?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Include):a?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains);if(f=BoldBIDashboard.isNullOrUndefined(i.action)?f:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,i.action),e=r.UniqueColumnName,r.FilterInfo==null||r.FilterInfo.CustomDateSettingsInfo==null||BoldBIDashboard.isNullOrUndefined(i[e+"_CustomFormat"])||(e=e+"_CustomFormat"),h=Array.isArray(i[e])?i[e]:[i[e]],c?(u=h,f=u.length>0?f:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains),u=u.filter(function(n){return typeof n=="string"?n.indexOf(y.allSpecialChar)===-1:n})):a&&(o=h,l=r.DateTimeFormat===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.Default)?this.getDateFilterList(o,!0):o,u={DateFormat:!BoldBIDashboard.isNullOrUndefined(r.DateBucketInfo)&&!BoldBIDashboard.isNullOrUndefined(r.DateBucketInfo.DateBucketFormat)?r.DateBucketInfo.DateBucketFormat:r.DateTimeFormat,DisplayFilterList:o,DateFilterList:l},f=o.length>0?f:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include)),u.length>0||!BoldBIDashboard.isNullOrUndefined(u.DateFilterList)){var v=!BoldBIDashboard.isNullOrUndefined(i.IsGroupBarFilter)&&i.IsGroupBarFilter,w=!BoldBIDashboard.isNullOrUndefined(i.IsMultiSelection)&&i.IsMultiSelection,b={FilterInfo:u,Action:f,IsStdDateTime:!1,IsMultiSelection:v&&h.length>1||w,IsGroupBarFilter:v};n.SelectedFilterValues.push(this.updateInitialFiltersForFilterControls(r,n.UniqueName,p,b))}}},n.prototype.getCurrentWidgetInstance=function(){var n=this.dashboardDesigner.designerPanel.selectedReportItems[0];return BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(n)},n}();BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.MasterSlaveFilterConfiguration",InternalMasterSlaveFilterSerializationHelper,window);InternalLabelParameter=function(){function n(n){this.dashboardDesigner=null;this.masterSlaveConfiguration=null;this.labelParameterVaues={};this.labelWidgetsData=[];this.jsonRequest=[];this.cacheManager=null;this.parentFieldKey="parentField";this.childColumnNameKey="childColumnName";this.labelCounter=0;this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.masterSlaveConfiguration=this.dashboardDesigner.modules.masterSlaveFilter;this.cacheManager=new InternalCacheManager(this.dashboardDesigner);this.widgetHelper=this.dashboardDesigner.modules.widgetHelper}return n.prototype.getResultantParameterString=function(n,t,i){i===void 0&&(i=!1);var r=this.GetValidParameterCollection(n,t);return this.getParameterizedText(r.matchedTexts,n,r.dataId,i)},n.prototype.isLabelParameterPresent=function(n,t){var i=this.GetValidParameterCollection(n,t);return i.matchedTexts.length>0?!0:!1},n.prototype.getParameterRegex=function(){return RegExp("^@{{:CURRENTUSER.FULLNAME}}|^@{{:CURRENTUSER.EMAIL}}|^@{{:CURRENTUSER.TOKEN}}|^@{{:CURRENT.SITEURL}}|^@{{:CURRENT.SITEIDENTIFIER}}|^@{{:CURRENTUSER.TENANTURL}}|^@{{:CURRENTUSER.SITEIDENTIFIER}}","g")},n.prototype.hasDynamicParameter=function(n){return this.getParameterRegex().test(n)},n.prototype.GetValidParameterCollection=function(n,t){var w=this,e=[],v=RegExp("{{:(.*?)}}","g"),y=RegExp("^DistinctCount([(.*?)])|^DCount([(.*?)])|^Minimum([(.*?)])|^Maximum([(.*?)])|^Average([(.*?)])|^StandardDeviation([(.*?)])|^Variance([(.*?)])|^WeightedAvg([(.*?)])|^WeightedAverage([(.*?)])|^StDev([(.*?)])|^Var([(.*?)])|^Sum([(.*?)])|^Avg([(.*?)])|^Count([(.*?)])|^Year([(.*?)])|^Month([(.*?)])|^MonthYear([(.*?)])|^MonthName([(.*?)])|^DayMonthYear([(.*?)])|^MonthDayYear([(.*?)])|^QuarterYear([(.*?)])|^Quarter([(.*?)])|^DateHour([(.*?)])|^DayOfWeek([(.*?)])|^DayOfYear([(.*?)])|^Hours([(.*?)])|^Minutes([(.*?)])|^Seconds([(.*?)])|^WeekOfMonth([(.*?)])|^WeekOfYear([(.*?)])|^Day([(.*?)])|^Max([(.*?)])|^Min([(.*?)])|^WeekYear([(.*?)])|^Time([(.*?)])|^DateTime([(.*?)])|^Date([(.*?)])|^TimeSpan([(.*?)])|^TimeSpanHours([(.*?)])|^TimeSpanMinutes([(.*?)])|^TimeSpanDays([(.*?)])|^TimeSpanWeeks([(.*?)])|^TimeSpanMonths([(.*?)])|^TimeSpanYears([(.*?)])|^TimeSpanInMinutes([(.*?)])|^TimeSpanInHours([(.*?)])","ig"),o=!1,s,l,a,r,h=!1,f,u,p,i,c;if(this.hasDynamicParameter(n)&&(e=n.match(this.getParameterRegex())),v.test(n))for(u=n.match(v),this.summaryType=SummaryType.SUM,this.dateformat=DateTimeFormat.None,p=function(n){var p,c,k,v,d,b;for(r=u[n].substring(3,u[n].length-2),p=i.getChildColumnName(r),BoldBIDashboard.isNullOrUndefined(p)||(l=p[i.parentFieldKey],a=p[i.childColumnNameKey]),c=i.dashboardDesigner.modules.dataSet.datasets,y.test(r)?(k=r.match(y),v=k[0].substring(0,k[0].length-1),!BoldBIDashboard.isNullOrUndefined(v)&&v.length>0&&(i.summaryType=i.getValidSummaryType(v.toLowerCase()),i.summaryType===null||i.summaryType==="None"?(i.dateformat=DateTimeFormat[i.getValidDateFormat(v.toLowerCase())],o=!1):o=!0,r=r.replace(v,""),s=r.substring(1,r.length-1),h=!0)):(s=r,h=!1),BoldBIDashboard.isNullOrUndefined(t)&&(t=i.getDefaultDatasourceID(s)),d=function(r){var v=s,y,p;v.indexOf(c[r].Name)!==-1?(f=t!==c[r].Id?c[r].Id:t,v=v.replace(c[r].Name+".","")):f=t;c[r].Id===f&&(BoldBIDashboard.isNullOrUndefined(l)?c[r].Fields.forEach(function(t){var i=w.getCurrentFieldInfo(t,v,h,o);BoldBIDashboard.isNullOrUndefined(i)||e.push(u[n])}):(y=i.getHierarchicalField(c[r].Fields,l,a),BoldBIDashboard.isNullOrUndefined(y)||(p=i.getCurrentFieldInfo(y,a,h,o),BoldBIDashboard.isNullOrUndefined(p)||e.push(u[n]))))},b=0;b<c.length;b++)d(b)},i=this,c=0;c<u.length;c++)p(c);return{matchedTexts:e,dataId:BoldBIDashboard.isNullOrUndefined(f)?null:f}},n.prototype.getCurrentFieldInfo=function(n,t,i,r){var u=null,f;if(!BoldBIDashboard.isNullOrUndefined(n))if(n.Name.trim().toLowerCase()===t.trim().toLowerCase()&&(BoldBIDashboard.isNullOrUndefined(n.ChildFields)||!BoldBIDashboard.isNullOrUndefined(n.ChildFields)&&n.ChildFields.length===0))i?r&&n.TypeName!=="Date"&&n.TypeName!=="String"&&n.TypeName!=="Datetime"?u=n:!r&&(this.dateformat===0||this.dateformat==="None")||i&&(this.summaryType==="COUNT"||this.summaryType==="COUNTD")?u=n:r||this.dateformat===0&&this.dateformat==="None"||n.TypeName!=="Date"||(u=n):u=n;else if(!BoldBIDashboard.isNullOrUndefined(n.ChildFields))for(f=0;f<n.ChildFields.length;f++)if(u=this.getCurrentFieldInfo(n.ChildFields[f],t,i,r),!BoldBIDashboard.isNullOrUndefined(u))break;return u},n.prototype.getDefaultDatasourceID=function(n){var i=this.dashboardDesigner.modules.dataSet.datasets,f,e,o=this.getChildColumnName(n),t,s,u,r;for(BoldBIDashboard.isNullOrUndefined(o)||(f=o[this.parentFieldKey],e=o[this.childColumnNameKey]),t=0;t<i.length;t++){if(n.split(".").length>1&&n.split(".")[0]===i[t].Name)return i[t].Id;if(BoldBIDashboard.isNullOrUndefined(f)){for(u=0;u<i[t].Fields.length;u++)if(r=this.getCurrentFieldInfo(i[t].Fields[u],n,!1,!1),!BoldBIDashboard.isNullOrUndefined(r))return i[t].Id}else if(s=this.getHierarchicalField(i[t].Fields,f,e),!BoldBIDashboard.isNullOrUndefined(s)&&(r=this.getCurrentFieldInfo(s,e,!1,!1),!BoldBIDashboard.isNullOrUndefined(r)))return i[t].Id}},n.prototype.getParameterizedText=function(n,t,i,r){var e=this,u=t,f="";return n.forEach(function(n){var o=i,t;n.split(".").length>1&&(o=e.getDataSourceID(n));t=u.split(n);t.length!==0&&(t[0]!==""&&(f+=r?t[0]:"<span class= 'e-title-text e-title-value' style= 'float: left ' >"+BoldBIDashboard.DashboardUtil.encodeText(t[0])+"<\/span>"),t.splice(0,1));f+=r?"<span class= 'bbi-dbrd-label-parameter-text e-title-text' data-param='"+n+"' data-source='"+o+"' >"+n+"<\/span><span class= 'bbi-dbrd-label-parameter-value e-title-value'><\/span>":"<span class= 'bbi-dbrd-label-parameter-text e-title-text' data-param='"+n+"' data-source='"+o+"' style= 'font-weight: bold; float: left ' >"+n+"<\/span><span class= 'bbi-dbrd-label-parameter-value e-title-value' style= 'font-weight: bold; ' ><\/span>";u=t.join(" "+n+" ")}),u!==""&&u!=="."&&u!==":"&&(f+=r?u:"<span class= 'e-title-text e-title-value' >"+BoldBIDashboard.DashboardUtil.encodeText(u)+"<\/span>"),f},n.prototype.getDataSourceID=function(n){var f=RegExp("^DistinctCount([(.*?)])|^DCount([(.*?)])|^Minimum([(.*?)])|^Maximum([(.*?)])|^Average([(.*?)])|^StandardDeviation([(.*?)])|^Variance([(.*?)])|^WeightedAvg([(.*?)])|^WeightedAverage([(.*?)])|^StDev([(.*?)])|^Var([(.*?)])|^Sum([(.*?)])|^Avg([(.*?)])|^Count([(.*?)])|^Year([(.*?)])|^MonthYear([(.*?)])|^MonthName([(.*?)])|^DayMonthYear([(.*?)])|^MonthDayYear([(.*?)])|^QuarterYear([(.*?)])|^Quarter([(.*?)])|^DateHour([(.*?)])|^DayOfWeek([(.*?)])|^DayOfYear([(.*?)])|^Hours([(.*?)])|^Minutes([(.*?)])|^Seconds([(.*?)])|^WeekOfMonth([(.*?)])|^WeekOfYear([(.*?)])|^Day([(.*?)])|^Max([(.*?)])|^Min([(.*?)])|^WeekYear([(.*?)])|^Time([(.*?)])|^DateTime([(.*?)])|^Date([(.*?)])|^TimeSpan([(.*?)])|^TimeSpanHours([(.*?)])|^TimeSpanMinutes([(.*?)])|^TimeSpanDays([(.*?)])|^TimeSpanWeeks([(.*?)])|^TimeSpanMonths([(.*?)])|^TimeSpanYears([(.*?)])|^TimeSpanInMinutes([(.*?)])|^TimeSpanInHours([(.*?)])","ig"),r="",t=n.substring(3,n.length-2),u,i;return f.test(t)?(u=t.match(f),i=u[0].substring(0,u[0].length-1),!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0&&(t=t.replace(i,""),r=t.substring(1,t.length-1))):r=t,this.getDefaultDatasourceID(r)},n.prototype.getInnerText=function(n){return BoldBIDashboard.isNullOrUndefined(n)?null:this.hasDynamicParameter(n)?n.substring(4,n.length-2):n.substring(3,n.length-2)},n.prototype.createParameterColumnCollection=function(n,t){for(var nt,tt,s,h,it,c,p,l,i,rt,w,f=this.getLabelParamElements(n),ut=RegExp("^DistinctCount([(.*?)])|^DCount([(.*?)])|^Minimum([(.*?)])|^Maximum([(.*?)])|^Average([(.*?)])|^StandardDeviation([(.*?)])|^Variance([(.*?)])|^WeightedAvg([(.*?)])|^WeightedAverage([(.*?)])|^StDev([(.*?)])|^Var([(.*?)])|^Sum([(.*?)])|^Avg([(.*?)])|^Count([(.*?)])|^Year([(.*?)])|^Month([(.*?)])|^MonthYear([(.*?)])|^MonthName([(.*?)])|^DayMonthYear([(.*?)])|^MonthDayYear([(.*?)])|^QuarterYear([(.*?)])|^Quarter([(.*?)])|^DateHour([(.*?)])|^DayOfWeek([(.*?)])|^DayOfYear([(.*?)])|^Hours([(.*?)])|^Minutes([(.*?)])|^Seconds([(.*?)])|^WeekOfMonth([(.*?)])|^WeekOfYear([(.*?)])|^Day([(.*?)])|^Max([(.*?)])|^Min([(.*?)])|^WeekYear([(.*?)])|^Time([(.*?)])|^DateTime([(.*?)])|^Date([(.*?)])|^TimeSpan([(.*?)])|^TimeSpanHours([(.*?)])|^TimeSpanMinutes([(.*?)])|^TimeSpanDays([(.*?)])|^TimeSpanWeeks([(.*?)])|^TimeSpanMonths([(.*?)])|^TimeSpanYears([(.*?)])|^TimeSpanInMinutes([(.*?)])|^TimeSpanInHours([(.*?)])","ig"),a=!1,b=!1,r,e,v,k,d,ft,g,o=[],y,u=0;u<f.length;u++)if(nt=!0,this.bbdesigner$(f[u]).parents(".bbi-dbrd-control-container.e-label-item").length===1&&(nt=this.isUpdateLabelParaForLabelWidget(this.bbdesigner$(f[u]),t)),nt){for(a=!1,e=SummaryType.SUM,v=BoldBIDashboard.DateAndTimeFormat.None,k=this.bbdesigner$(f[u]).attr("data-param"),ft=this.bbdesigner$(f[u]).attr("data-source"),y=this.generateIdForLabelParameterElement(f[u]),this.bbdesigner$(f[u]).attr("data-labelparameterid",y),r=this.getInnerText(k),ut.test(r)?(tt=r.match(ut),s=tt[0].substring(0,tt[0].length-1),!BoldBIDashboard.isNullOrUndefined(s)&&s.length>0&&(e=this.getValidSummaryType(s.toLowerCase()),e===null||e==="None"?(v=DateTimeFormat[this.getValidDateFormat(s.toLowerCase())],a=!1):a=!0,r=r.replace(s,""),d=r.substring(1,r.length-1),b=!0)):(d=r,b=!1),h=this.validateColumn(d,a,e,v,b,ft),it=!1,c=0;c<o.length;c++)for(p=0;p<o[c].ColumnList.length;p++)y===o[c].ColumnList[p].Id&&(it=!0);BoldBIDashboard.isNullOrUndefined(h)||!h.isValid||it||(g=this.checkIfKeyPresent(h.datasourceId,o),l=h.field,i=new ParameterColumnItem,l!==null&&l.length!==0&&(i.MatchText=k,i.ColumnName=l.Name,i.ColumnType=this.getColumnType(l.TypeName),i.SummaryType=e,i.DateFormat=v,i.Id=y,g==null?(rt=[],rt.push(i),w=new ParameterColumn,w.DataSourceId=h.datasourceId,w.ColumnList=rt,o.push(w)):g.ColumnList.push(i)))}return o},n.prototype.generateIdForLabelParameterElement=function(n){var t=this.bbdesigner$(n).attr("data-param"),i;return this.hasDynamicParameter(t)?t.substring(4,t.length-2):(i=t.substring(3,t.length-2),this.bbdesigner$(n).attr("data-source")+"_"+i)},n.prototype.validateColumn=function(n,t,i,r,u,f){var e=this.dashboardDesigner.modules.dataSet.datasets,h=null,o,c,s;if(n.split(".").length>1)for(o=0;o<e.length;o++)n.split(".")[0]===e[o].Name&&(f=e[o].Id);for(c=BoldBIDashboard.isNullOrUndefined(f)?e:e.filter(function(n){return n.Id===f}),s=0;s<c.length;s++)if(h=this.getFieldInfo(c[s],n,t,i,r,u,f),h.isValid)break;return h},n.prototype.getFieldInfo=function(n,t,i,r,u,f,e){var o=null,s=!1,y=e,v,h;t.split(".").length>1&&t.split(".")[0]===n.Name&&(t=t.replace(n.Name+".",""));var c=null,l=null,a=this.getChildColumnName(t);if(BoldBIDashboard.isNullOrUndefined(a)||(c=a[this.parentFieldKey],l=a[this.childColumnNameKey]),BoldBIDashboard.isNullOrUndefined(c)){for(h=0;h<n.Fields.length;h++)if(o=this.getCurrentFieldInfo(n.Fields[h],t,!1,!1),!BoldBIDashboard.isNullOrUndefined(o)&&o.length!==0)break}else v=this.getHierarchicalField(n.Fields,c,l),BoldBIDashboard.isNullOrUndefined(v)||(o=this.getCurrentFieldInfo(v,l,!1,!1));return BoldBIDashboard.isNullOrUndefined(o)||o.length===0||(y=n.Id,i&&o.TypeName!=="Date"&&o.TypeName!=="String"&&o.TypeName!=="Datetime"?s=!0:!i&&(u===0||u===DateTimeFormat.None)||f&&(r===SummaryType.COUNT||SummaryType.COUNTD)?s=!0:i||u===0&&u===DateTimeFormat.None||o.TypeName!=="Date"||(s=!0)),{field:o,datasourceId:y,isValid:s}},n.prototype.checkIfKeyPresent=function(n,t){for(var r=null,i=0;i<t.length;i++)if(t[i].DataSourceId===n){r=t[i];break}return r},n.prototype.getColumnType=function(n){return n==="String"||n==="Boolean"?FieldType.Dimensions:n==="Date"?FieldType.DateTime:FieldType.Measures},n.prototype.getLabelParamElements=function(){var u,t,n,i,f,r;for(this.dashboardDesigner.element.find(".e-dbrd-label-parameter-text").length>0&&this.dashboardDesigner.element.find(".e-dbrd-label-parameter-text").addClass("bbi-dbrd-label-parameter-text"),u=this.dashboardDesigner.element.find(".bbi-dbrd-label-parameter-text"),t=this.widgetHelper.getAllWidgets(),n=0;n<t.length;n++)if(t[n].ControlContainer.hasClass("e-rte-item"))for(i=void 0,f=BoldBIDashboard.buildTag("div","",{},{}),f.html(t[n].getValue()),i=f.find(".bbi-dbrd-label-parameter-text"),r=0;r<i.length;r++)u.push(i[r]);return u},n.prototype.labelParameterAction=function(n,t,i,r,u,f,e){if(r===void 0&&(r=!1),f===void 0&&(f=!1),!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0){var o=this.getParamCollection();this.labelParameterFetch=this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.getLabelParameterData,data:JSON.stringify({designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.getLabelParameterData,labelParameterCollection:n,dynamicParamCollection:t,hasDynamicParam:r,selectedValuesList:i,className:BoldBIDashboard.DashboardUtil.DesignerAction.FilterAction,paramCollection:BoldBIDashboard.isNullOrUndefined(o)?"":JSON.stringify(o),isParameterField:BoldBIDashboard.isNullOrUndefined(u)?!1:!0,selectedParameterValue:u,needToImportData:f,datasourceCallerId:e})},{fnction:this.bbdesigner$.proxy(this.bindLableParameterValues,this)})}},n.prototype.getDataForDynamicParam=function(n){for(var t,r,u={},i=0;i<n.length;i++)t=this.bbdesigner$(n[i]).attr("data-param"),r=this.getInnerText(t),!BoldBIDashboard.isNullOrUndefined(r)&&this.hasDynamicParameter(t)&&(u[r]=t);return u},n.prototype.getParamCollection=function(){var n=this.dashboardDesigner.modules.dynamicParameterPanel;return!BoldBIDashboard.isNullOrUndefined(n.currentValueCollection)&&n.currentValueCollection.length>0?n.currentValueCollection:null},n.prototype.getDataForLabelParameter=function(n,t,i,r,u,f,e,o){var p,l,k,d,c,a,g,et,nt,ot,st;if(i===void 0&&(i=!1),r===void 0&&(r=null),f===void 0&&(f=!1),e===void 0&&(e=!1),p=this.getLabelParamElements(t),!i)for(c=0;c<p.length;c++)this.bbdesigner$(p[c]).next().html("...");var v=this.createParameterColumnCollection(t,r),h,y=this.dashboardDesigner.modules.dataSet.datasets,tt=[],it=[],w=[],b=this.getDataForDynamicParam(p);for(l=0;l<v.length;l++){for(k=[],d=[],c=0;c<v[l].ColumnList.length;c++){var s=v[l].ColumnList[c],rt=void 0,ut=void 0,ht=BoldBIDashboard.isNullOrUndefined(s.MatchText.match(/(.*){:/))?s.MatchText:s.MatchText.substring(3,s.MatchText.length-2),ft=this.getChildColumnName(ht);for(BoldBIDashboard.isNullOrUndefined(ft)||(rt=ft[this.parentFieldKey],ut=ft[this.childColumnNameKey]),a=0;a<y.length;a++)if(y[a].Id===v[l].DataSourceId)for(g=0;g<y[a].Fields.length;g++)if(BoldBIDashboard.isNullOrUndefined(rt)){if(h=this.getCurrentFieldInfo(y[a].Fields[g],s.ColumnName,!1,!1),!BoldBIDashboard.isNullOrUndefined(h)&&h.length!==0)break}else if(et=this.getHierarchicalField(y[a].Fields,rt,ut),!BoldBIDashboard.isNullOrUndefined(et)&&(h=this.getCurrentFieldInfo(et,ut,!1,!1),!BoldBIDashboard.isNullOrUndefined(h)&&h.length!==0))break;BoldBIDashboard.isNullOrUndefined(h)||(h.TypeName.toLocaleLowerCase()==="String".toLocaleLowerCase()||h.TypeName.toLocaleLowerCase()==="Date".toLocaleLowerCase()?d.push({Name:s.ColumnName,Id:h.Id,SummaryType:this.getDimensionSummaryType(s),FieldType:FieldType.Dimensions,DateTimeFormat:s.DateFormat,FilterInfo:null,UniqueColumnName:s.Id,IsVisible:!0}):k.push({Name:s.ColumnName,Id:h.Id,SummaryType:s.SummaryType,FieldType:FieldType.Measures,DateTimeFormat:s.DateFormat,FilterInfo:null,UniqueColumnName:s.Id,IsVisible:!0}))}k.length>0&&tt.push({DataSetID:v[l].DataSourceId,FieldInfo:k});d.length>0&&it.push({DataSetID:v[l].DataSourceId,FieldInfo:d})}(tt.length>0||it.length>0)&&w.push({MeasureFieldInfo:tt,DimensionFieldInfo:it});w.length>0?(BoldBIDashboard.isNullOrUndefined(this.labelParameterFetch)||(this.labelParameterFetch.readyState!==4&&this.labelParameterFetch.abort(),this.labelParameterFetch=null),this.jsonRequest={labelParameterCollection:w,selectedValuesList:n},this.labelParameterCacheKey=this.cacheManager.getCacheKeyForRequest(this.jsonRequest),nt=this.dashboardDesigner.modules.dynamicParameterPanel,ot=!BoldBIDashboard.isNullOrUndefined(nt.currentValueCollection)&&nt.currentValueCollection.length>0?nt.currentValueCollection:null,this.dashboardDesigner.model.clientSideCacheSettings.enable&&this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view&&BoldBIDashboard.isNullOrUndefined(ot)&&!f&&this.cacheManager.checkCache(this.jsonRequest)&&!i?(st=this.cacheManager.getFromCache(this.jsonRequest),this.bindLableParameterValues(st.data)):this.labelParameterAction(w,b,n,!BoldBIDashboard.isNullOrUndefined(b),u,e,o)):this.labelParameterAction(null,b,null,!BoldBIDashboard.isNullOrUndefined(b),u,e,o)},n.prototype.getHierarchicalField=function(n,t,i){var r=t.split("."),f,u,e;if(r.push(i),BoldBIDashboard.isNullOrUndefined(r))return null;for(f=function(t){if(n=n.filter(function(n){return n.Name.trim().toLowerCase()===r[t].trim().toLowerCase()})[0],!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(n.ChildFields)&&n.ChildFields.length>0)n=n.ChildFields;else return"break"},u=0;u<r.length;u++)if(e=f(u),e==="break")break;return n},n.prototype.getChildColumnName=function(n){if(n.indexOf("].")!==-1){var t=n.match(/\[.*?\]/)[0],i=t.substring(1,t.length-1),r=n.match(/].(.*)/)[1];return{parentField:i,childColumnName:r}}return null},n.prototype.getDimensionSummaryType=function(n){return n.SummaryType.toString().toLocaleLowerCase()===SummaryType.SUM.toString().toLocaleLowerCase()||n.SummaryType.toString().toLocaleLowerCase()===SummaryType.NONE.toString().toLocaleLowerCase()?SummaryType.NONE:n.SummaryType},n.prototype.bindLableParameterValues=function(n){var t=this,i=this;this.labelParameterVaues.LabelParameterData=n;setTimeout(function(){var f,u,r,s,o,e,h;if(i.labelCounter++,i.masterSlaveConfiguration.isInteractionCompleted){!BoldBIDashboard.isNullOrUndefined(i.dashboardDesigner.model)&&i.dashboardDesigner.model.clientSideCacheSettings.enable&&i.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view&&i.cacheManager.addtoCache(i.jsonRequest,n,!1,i.labelParameterCacheKey);try{if(f=i.dashboardDesigner.modules.Mode.designCanvas,u=f.find(".bbi-dbrd-label-parameter-text"),n.length>0){for(r=0;r<u.length;r++)s=!0,o=!1,t.bbdesigner$(u[r]).parents(".bbi-dbrd-control-container.e-label-item").length===1&&(s=t.isUpdateLabelParaForLabelWidget(t.bbdesigner$(u[r])),o=!0),e=t.bbdesigner$(u[r]).attr("data-labelparameterid"),BoldBIDashboard.isNullOrUndefined(t.dashboardDesigner.model)||BoldBIDashboard.isNullOrUndefined(t.dashboardDesigner.model.dashboardFromData)||!t.dashboardDesigner.model.dashboardFromData.loadFromData||(e=t.generateIdForLabelParameterElement(u[r])),o&&!BoldBIDashboard.isNullOrUndefined(t.dashboardDesigner.model)&&!BoldBIDashboard.isNullOrUndefined(t.dashboardDesigner.model.dashboardFromData)&&t.dashboardDesigner.model.dashboardFromData.loadFromData&&t.updateValueForLabelWidgetInExporting(t.bbdesigner$(u[r]),e),s&&(h=t.getValueForLabelParameter(e),t.bbdesigner$(u[r]).next().html(h),o&&t.updateLabelWidgetCollection(t.bbdesigner$(u[r]),e,h));t.labelParameterVaues.labelWidgetsData=t.labelWidgetsData}t.resetTooltipForLabelParameters(f.find(".bbi-dbrd-control-title"));t.resetTooltipForLabelParameters(f.find(".bbi-dbrd-control-sub-title"));t.updateLabelParameterSize(f)}catch(c){return""}}else!i.masterSlaveConfiguration.isInteractionCompleted&&i.labelCounter<30?t.bindLableParameterValues(t.labelParameterVaues.LabelParameterData):(i.labelCounter=0,i.masterSlaveConfiguration.isInteractionCompleted=!0,t.bindLableParameterValues(t.labelParameterVaues.LabelParameterData))},500)},n.prototype.updateValueForLabelWidgetInExporting=function(n,t){for(var r="",i=0;i<this.labelWidgetsData.length;i++)this.labelWidgetsData[i].id===this.bbdesigner$(n).parents(".bbi-dbrd-control-container.e-label-item").attr("name")+"_"+t&&(r=this.labelWidgetsData[i].value);this.bbdesigner$(n).next().html(r)},n.prototype.updateLabelWidgetCollection=function(n,t,i){var f=this.dashboardDesigner.bbdesigner$,u,r;if(this.labelWidgetsData.length===0)this.labelWidgetsData.push({id:f(n).parents(".bbi-dbrd-control-container.e-label-item").attr("name")+"_"+t,value:i});else{for(u=!0,r=0;r<this.labelWidgetsData.length;r++)if(this.labelWidgetsData[r].id===this.bbdesigner$(n).parents(".bbi-dbrd-control-container.e-label-item").attr("name")+"_"+t){this.labelWidgetsData[r].value=i;u=!1;break}u&&this.labelWidgetsData.push({id:f(n).parents(".bbi-dbrd-control-container.e-label-item").attr("name")+"_"+t,value:i})}},n.prototype.updateLabelParameterValue=function(n){for(var r,u=this.dashboardDesigner.modules.Mode.designCanvas,i=u.find(".bbi-dbrd-label-parameter-value"),t=0;t<i.length;t++)r=!0,this.bbdesigner$(i[t]).parents(".bbi-dbrd-control-container.e-label-item").length===1&&(r=this.isUpdateLabelParaForLabelWidget(this.bbdesigner$(i[t]),n)),r&&this.bbdesigner$(i[t]).html("...")},n.prototype.isUpdateLabelParaForLabelWidget=function(n,t){var i,u,f,e,o,r,s;if(t===void 0&&(t=null),i=[],u=!1,BoldBIDashboard.isNullOrUndefined(t))if(e={selectedInfo:this.masterSlaveConfiguration.getAllWidgetSelectedValues()},e.selectedInfo.length>0)for(o=0;o<e.selectedInfo.length;o++)for(f=this.masterSlaveConfiguration.GetSlaveListOfMasterWidget(e.selectedInfo[o].ReportName),r=0;r<f.length;r++)i.indexOf(f[r])===-1&&i.push(f[r]);else u=!0;else i=this.masterSlaveConfiguration.GetSlaveListOfMasterWidget(t);for(s=0;s<i.length;s++)if(i[s]===this.bbdesigner$(n).parents(".bbi-dbrd-control-container.e-label-item").attr("data-name")){u=!0;break}return u},n.prototype.updateLabelParameterSize=function(n){var r=n.find(".bbi-dbrd-control-title-wrapper"),u=n.find(".bbi-dbrd-control-sub-header"),t,i;if(r.length>0)for(t=0;t<r.length;t++)this.adjustParameterColumn(this.bbdesigner$(r[t]));if(u.length>0)for(i=0;i<u.length;i++)this.adjustParameterColumn(this.bbdesigner$(u[i]))},n.prototype.resetTooltipForLabelParameters=function(n){var t,i;if(n.length>0)for(t=0;t<n.length;t++)if(this.bbdesigner$(n[t]).children().hasClass("bbi-dbrd-label-parameter-text")){i=void 0;try{i=this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.design?this.bbdesigner$(n[t]).clone().children(".bbi-dbrd-label-parameter-value").remove().end().text():this.bbdesigner$(n[t]).clone().children(".bbi-dbrd-label-parameter-text").remove().end().text()}catch(r){i=""}this.bbdesigner$(n[t]).attr("data-tooltip",i)}},n.prototype.getColumnId=function(n){for(var i=Object.keys(n[0]),r=[],t=0;t<i.length;t++)r.push({id:i[t]});return r},n.prototype.getValueForLabelParameter=function(n){var r=this.labelParameterVaues.LabelParameterData,t,f,u,i;if(!BoldBIDashboard.isNullOrUndefined(r)){for(t=0;t<r.length;t++)if(r[t].data!=="[]")for(f=JSON.parse(r[t].data),u=this.getColumnId(f),i=0;i<u.length;i++)if(u[i].id===n)return f[0][u[i].id];return""}},n.prototype.setValueForLabelParameter=function(n){var t=this.getValueForLabelParameter(this.bbdesigner$(n).attr("data-labelparameterid"));this.bbdesigner$(n).next().html(t)},n.prototype.adjustParameterColumn=function(n){var u,t,i,f,r;if(!BoldBIDashboard.isNullOrUndefined(n)&&this.bbdesigner$(n).length>0&&(u=void 0,t=void 0,this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.design?(u=n.find(".bbi-dbrd-label-parameter-text").length,t=n.find(".e-title-text")):(u=n.find(".bbi-dbrd-label-parameter-value").length,t=n.find(".e-title-value")),i=n[0].getBoundingClientRect().width,n.find(".bbi-dbrd-control-title").length===1&&(i=i-6),n.find(".bbi-dbrd-control-sub-title").length===1&&(i=i-10),f=i/(t.length+1),u>0)){for(r=0;r<t.length;r++)(this.bbdesigner$(t[r]).hasClass("bbi-dbrd-label-parameter-text")||this.bbdesigner$(t[r]).hasClass("bbi-dbrd-label-parameter-value"))&&this.bbdesigner$(t[r]).css({"max-width":f});this.getParameterColumnMaxWidth(t,i)}},n.prototype.getParameterColumnMaxWidth=function(n,t){for(var i,u=[],e=t-this.getAvailedParameterColumnWidth(n),f=n.length,r=0;r<f;r++)(this.bbdesigner$(n[r]).hasClass("bbi-dbrd-label-parameter-text")||this.bbdesigner$(n[r]).hasClass("bbi-dbrd-label-parameter-value"))&&u.push(this.bbdesigner$(n[r]));for(i=0;i<f;i++)(this.bbdesigner$(n[i]).hasClass("bbi-dbrd-label-parameter-text")||this.bbdesigner$(n[i]).hasClass("bbi-dbrd-label-parameter-value"))&&this.bbdesigner$(n[i]).css({"max-width":parseInt(this.bbdesigner$(n[i]).css("max-width"),10)+e/u.length+"px"})},n.prototype.getAvailedParameterColumnWidth=function(n){for(var i=0,r=n.length,t=0;t<r;t++)i+=this.bbdesigner$(n[t]).width();return i},n.prototype.getValidSummaryType=function(n){switch(n){case"sum":return"SUM";case"count":return"COUNT";case"distinctcount":case"dcount":return"COUNTD";case"avg":case"average":return"AVG";case"max":case"maximum":return"MAX";case"min":case"minimum":return"MIN";case"var":case"variance":return"VAR";case"stdev":return"STDEV"}return"None"},n.prototype.getValidDateFormat=function(n){switch(n){case"year":return"Year";case"none":return"None";case"monthname":return"Month";case"day":return"Day";case"quarter":return"Quarter";case"month":return"Month";case"monthyear":return"MonthYear";case"quarteryear":return"QuarterYear";case"daymonthyear":return"DayMonthYear";case"minutes":return"Minute";case"datehour":return"DateHour";case"dayofweek":return"DayOfWeek";case"weekofyear":return"WeekOfYear";case"timespan":return"TimeSpan";case"timespanhours":return"TimeSpanHours";case"timespanminutes":return"TimeSpanMinutes";case"timespandays":return"TimeSpanDays";case"timespanweeks":return"TimeSpanWeeks";case"timespanmonths":return"TimeSpanMonths";case"timespanyears":return"TimeSpanYears";case"timespaninminutes":return"TimeSpanInMinutes";case"timespaninhours":return"TimeSpanInHours";case"monthdayyear":return"MonthDayYear";case"datetime":return"DateTime";case"date":return"Date"}return""},n}();BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.LabelParameter",InternalLabelParameter,window);InternalCacheManager=function(){function n(n){this.cacheList=[];this.jsonRequest=[];this.isRefresh=!1;this.widgetDetailList=[];this.initialDataCached=!1;this.jsonResponse=null;this.dashboardDesigner=n;this.dashboardDesigner.model.clientSideCacheSettings&&(this.cacheTimer=this.dashboardDesigner.model.clientSideCacheSettings.timer)}return n.prototype.addtoCache=function(n,t,i,r){var u,o,s;if(this.dashboardDesigner.model.clientSideCacheSettings.enable){var e=void 0,h=!1,f=void 0;if(n.length>0)for(u=0;u<n.length;u++)if(!BoldBIDashboard.isNullOrUndefined(n[u].widgetDetails)&&!BoldBIDashboard.isNullOrUndefined(n[u].widgetDetails[0].widgetInfo)&&(e=n[u].widgetDetails[0].widgetInfo.Id,!BoldBIDashboard.isNullOrUndefined(t.data[e]))){f=u;break}if(!BoldBIDashboard.isNullOrUndefined(t)){if(!BoldBIDashboard.isNullOrUndefined(t.length)&&t.length===0)return;if(BoldBIDashboard.isNullOrUndefined(r)){if(!BoldBIDashboard.isNullOrUndefined(t.length)&&t.length>0)o={Time:new Date,data:t},this.cacheList[this.getCacheKeyForRequest(n,r)]=o;else if(!BoldBIDashboard.isNullOrUndefined(t.data)&&!BoldBIDashboard.isNullOrUndefined(t.data[e])&&(t.data[e].Error&&(h=!0),!h&&(o={Time:new Date,data:t},this.cacheList[this.getCacheKeyForRequest(n[f],r)]=o,this.initialDataCached=!0,i&&n[f].selectedValuesList.length>1&&!BoldBIDashboard.isNullOrUndefined(t.data)&&!BoldBIDashboard.isNullOrUndefined(t.jsonData)&&!BoldBIDashboard.isNullOrUndefined(t["function"])))){var c=this.checkFilteredListRequest(n[f]),l=n[f].selectedValuesList,a=n[f].widgetDetails;for(s=0;s<this.widgetDetailList.length;s++)c.widgetDetails[0].widgetInfo.Id===this.widgetDetailList[s].widgetName?this.widgetDetailList.push(c):this.widgetDetailList.push({selectedValuesList:l,widgetName:a[0].widgetInfo.Id})}}else this.addtoCacheList(t,e,r)}}},n.prototype.addtoCacheList=function(n,t,i){var u=!1,r;!BoldBIDashboard.isNullOrUndefined(n.length)&&n.length>0?(r={Time:new Date,data:n},this.cacheList[i]=r):BoldBIDashboard.isNullOrUndefined(n.data)||BoldBIDashboard.isNullOrUndefined(n.data[t])||(n.data[t].Error&&(u=!0),u||(r={Time:new Date,data:n},this.cacheList[i]=r,this.initialDataCached=!0))},n.prototype.getCacheKeyForRequest=function(n){var i="",t;if(!BoldBIDashboard.isNullOrUndefined(n.selectedValuesList)){if(n.selectedValuesList.length>0)for(t=0;t<n.selectedValuesList.length;t++)i+=this.getSelectedFilterKey(n.selectedValuesList[t]);else i+=JSON.stringify(n.selectedValuesList);if(!BoldBIDashboard.isNullOrUndefined(n.widgetDetails)&&n.widgetDetails.length>0&&!BoldBIDashboard.isNullOrUndefined(n.widgetDetails[0].widgetInfo))i+=n.widgetDetails[0].widgetInfo.Id;else if(!BoldBIDashboard.isNullOrUndefined(n.labelParameterCollection)&&n.labelParameterCollection.length>0)for(t=0;t<n.labelParameterCollection.length;t++)i+=this.getLabelParameterCollectionKey(n.labelParameterCollection[t])}return i},n.prototype.getSelectedFilterKey=function(n){var t="",i,u,f,r;return t=n.FieldId+n.ReportName,BoldBIDashboard.isNullOrUndefined(n.InitialDateFilter)||(i=n.InitialDateFilter,!BoldBIDashboard.isNullOrUndefined(i.DateFilterList)&&i.DateFilterList.length>0&&(t+=JSON.stringify(i.DateFilterList)),!BoldBIDashboard.isNullOrUndefined(i.DisplayDateFilterList)&&i.DisplayDateFilterList.length>0&&(t+=JSON.stringify(i.DisplayDateFilterList))),BoldBIDashboard.isNullOrUndefined(n.InitialDimensionFilter)||(u=n.InitialDimensionFilter,!BoldBIDashboard.isNullOrUndefined(u.Text)&&u.Text.length>0&&(t+=JSON.stringify(u.Text))),BoldBIDashboard.isNullOrUndefined(n.InitialMeasureFilter)||(f=n.InitialMeasureFilter,!BoldBIDashboard.isNullOrUndefined(f.Values)&&f.Values.length>0&&(t+=JSON.stringify(f.Values))),n.IsPoPWidget&&!BoldBIDashboard.isNullOrUndefined(n.PoPFilter)&&(r=n.PoPFilter,t+=JSON.stringify(r.PrimaryType),t+=JSON.stringify(r.PrimaryCustomRange),t+=JSON.stringify(r.SecondaryType),t+=JSON.stringify(r.SecondaryCustomRange)),t},n.prototype.getLabelParameterCollectionKey=function(n){var r="",t={},i;if(!BoldBIDashboard.isNullOrUndefined(n.DimensionFieldInfo)&&n.DimensionFieldInfo.length>0?t=n.DimensionFieldInfo[0]:!BoldBIDashboard.isNullOrUndefined(n.MeasureFieldInfo)&&n.MeasureFieldInfo.length>0&&(t=n.MeasureFieldInfo[0]),r+=t.DataSetID,!BoldBIDashboard.isNullOrUndefined(t.FieldInfo)&&t.FieldInfo.length>0)for(i=0;i<t.FieldInfo.length;i++)r+=t.FieldInfo[i].Id+t.FieldInfo[i].Name+t.FieldInfo[i].UniqueColumnName;return r},n.prototype.clearAllFromCache=function(){this.cacheList=[];this.jsonRequest=[];this.jsonResponse=null;this.widgetDetailList=[];this.initialDataCached=!1},n.prototype.checkCache=function(n){var t;return!BoldBIDashboard.isNullOrUndefined(n.labelParameterCollection)&&n.labelParameterCollection.length>0&&this.dashboardDesigner.model.clientSideCacheSettings.enable?BoldBIDashboard.isNullOrUndefined(this.cacheList[this.getCacheKeyForRequest(n)])?!1:(t=new Date,(t-this.cacheList[this.getCacheKeyForRequest(n)].Time)/6e4<this.cacheTimer?!0:!1):!BoldBIDashboard.isNullOrUndefined(JSON.stringify(n))&&this.dashboardDesigner.model.clientSideCacheSettings.enable&&(n=this.checkFilteredListRequest(n),!BoldBIDashboard.isNullOrUndefined(this.cacheList[this.getCacheKeyForRequest(n)]))?(t=new Date,(t-this.cacheList[this.getCacheKeyForRequest(n)].Time)/6e4<this.cacheTimer?!0:(this.updateRequestList(n),!1)):(this.updateRequestList(n),!1)},n.prototype.checkFilteredListRequest=function(n){var t,i,u,r;if(!BoldBIDashboard.isNullOrUndefined(n.selectedValuesList)&&n.selectedValuesList.length>1){for(t=0;t<this.widgetDetailList.length;t++)if(this.widgetDetailList[t].selectedValuesList.length===n.selectedValuesList.length&&this.widgetDetailList[t].widgetName===n.widgetDetails[0].widgetInfo.Id){for(i=0;i<n.selectedValuesList.length;i++){for(u=!1,r=0;r<this.widgetDetailList[t].selectedValuesList.length;r++)JSON.stringify(n.selectedValuesList[i])===JSON.stringify(this.widgetDetailList[t].selectedValuesList[r])&&(u=!0);if(!u)return n}return n.selectedValuesList=this.widgetDetailList[t].selectedValuesList,n}return n}return n},n.prototype.updateRequestList=function(n){if(this.jsonRequest.length>0){for(var t=0;t<this.jsonRequest.length;t++)if(this.jsonRequest[t].widgetDetails[0].widgetInfo.Id===n.widgetDetails[0].widgetInfo.Id){this.jsonRequest[t].selectedValuesList=n.selectedValuesList;break}else if(t===this.jsonRequest.length-1){this.jsonRequest.push(n);break}}else this.jsonRequest.push(n)},n.prototype.initialisingFilterList=function(n,t){var u,f,r,i,e;if(n.length>0&&(u=this.dashboardDesigner.modules.masterSlaveFilter,f=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(u.GetWidgetElementByReportName(t[0].widgetInfo.Id)),this.dashboardDesigner.designerPanel.isDataConfigured(f))){for(r=[],i=0;i<n.length;i++)e=this.getSlaveListForTheMasterWidget(n[i].ReportName),e.indexOf(t[0].widgetInfo.Id)!==-1&&r.push(n[i]);return r}return n},n.prototype.getSlaveListForTheMasterWidget=function(n){var e=[],o=this.dashboardDesigner.modules.masterSlaveFilter,t=o.filterObject.FilterConfigurationModel.MastersCollection,i,u,f,r;if(!BoldBIDashboard.isNullOrUndefined(t)&&t.length>0)for(i=0;i<t.length;i++)if(t[i].MasterInfo.ID===n){for(u=0;u<t[i].ProfileManager.length;u++)for(f=t[i].ProfileManager[u].WidgetInfo,r=0;r<f.length;r++)e.indexOf(f[r].ID)===-1&&e.push(f[r].ID);break}return e},n.prototype.processResponse=function(n,t,i,r,u,f,e){this.dashboardDesigner.model.clientSideCacheSettings.enable&&u===BoldBIDashboard.Designer.mode.view&&r.action===BoldBIDashboard.DashboardUtil.DesignerAction.fetchWidgetData&&(this.dashboardDesigner.cacheManager.isRefresh||(this.jsonResponse={"function":n.fnction,jsonData:t,data:i},BoldBIDashboard.isNullOrUndefined(this.jsonRequest)||BoldBIDashboard.isNullOrUndefined(this.jsonResponse)||this.addtoCache(this.jsonRequest,this.jsonResponse,!0,e)),this.dashboardDesigner.cacheManager.isRefresh=!1)},n.prototype.getFromCache=function(n){return this.cacheList[this.getCacheKeyForRequest(n)]},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.CacheManager",InternalCacheManager,window),function(n){var t;(function(n){var t=function(){function n(){this.FieldContainers=[];this.DataSourceID="";this.DataSourceName="";this.Filters=[];this.SortExpressions=[];this.IsShowAllRecords=!0}return n}();n.DataGroupInfo=t})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var f=function(){function n(){this.FunctionUI=new t;this.Datasource=[]}return n}(),t,r,i,u,e,o,s;n.ExpressionDialogModel=f;t=function(){function n(){}return n}();n.ExpUIModel=t;r=function(){function n(){}return n}();n.ExpDatasource=r;i=function(){function n(){}return n}();n.ExpressionDataStruct=i;u=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(i);n.ExpColumnDataStruct=u,function(n){n[n.Enable=0]="Enable";n[n.Disable=1]="Disable";n[n.Hidden=2]="Hidden"}(e=n.State||(n.State={})),function(n){n.All="All";n.Numbers="Numbers";n.Aggregation="Aggregation";n.Conditional="Conditional";n.Logical="Logical";n.Date="Date";n.String="String";n.Row="Row"}(o=n.FunctionName||(n.FunctionName={})),function(n){n.All="All";n.Number="Number";n.Text="Text";n.Date="Date";n.Boolean="Boolean";n.Parameter="Parameters";n.Miscellaneous="Miscellaneous"}(s=n.FieldName||(n.FieldName={}))})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={})),function(n){var t;(function(t){var i=function(){function i(){this.key="Designer";this.locale=window[this.key].App.LocalizationContent}return i.prototype.getNumberDataJson=function(){return this.jsonData=[{ID:"ABS",Name:"ABS",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.absDesc,Example:this.locale.expressionDesigner.expressionHelper.absEx,State:2},{ID:"ACOS",Name:"ACOS",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.acosDesc,Example:this.locale.expressionDesigner.expressionHelper.acosEx,State:0},{ID:"ASIN",Name:"ASIN",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.asinDesc,Example:this.locale.expressionDesigner.expressionHelper.asinEx,State:0},{ID:"ATAN",Name:"ATAN",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.atanDesc,Example:this.locale.expressionDesigner.expressionHelper.atanEx,State:0},{ID:"COS",Name:"COS",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.cosDesc,Example:this.locale.expressionDesigner.expressionHelper.cosEx,State:0},{ID:"COT",Name:"COT",CategoryName:"Numbers",Description:"Returns the cotangent of the angle specified in radians of the given expression.",Example:"COT(numeric_expression)",State:0},{ID:"CEIL",Name:"CEIL",CategoryName:"Numbers",Description:"Returns the smallest integer value that is greater than or equal to the given numeric expression",Example:"CEIL(numeric_expression)",State:0},{ID:"DEGREES",Name:"DEGREES",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.degDesc,Example:this.locale.expressionDesigner.expressionHelper.degEx,State:0},{ID:"EXP",Name:"EXP",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.expDesc,Example:this.locale.expressionDesigner.expressionHelper.expEx,State:0},{ID:"FLOOR",Name:"FLOOR",CategoryName:"Numbers",Description:"Returns the largest integer value that is less than or equal to the given numeric expression.",Example:"FLOOR(numeric_expression)",State:0},{ID:"LOG",Name:"LOG",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.logDesc,Example:this.locale.expressionDesigner.expressionHelper.logEx,State:0},{ID:"MOD",Name:"MOD",CategoryName:"Numbers",Description:"Returns the remainder of the first numeric expression divided by second numeric expression.",Example:"MOD(numeric_expression, numeric_expression)",State:0},{ID:"PI",Name:"PI",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.piDesc,Example:this.locale.expressionDesigner.expressionHelper.piEx,State:0},{ID:"POWER",Name:"POWER",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.powerDesc,Example:this.locale.expressionDesigner.expressionHelper.powerEx,State:0},{ID:"RADIANS",Name:"RADIANS",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.radDesc,Example:this.locale.expressionDesigner.expressionHelper.radEx,State:0},{ID:"ROUND",Name:"ROUND",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.roundDesc,Example:this.locale.expressionDesigner.expressionHelper.roundEx,State:0},{ID:"SIGN",Name:"SIGN",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.signDesc,Example:this.locale.expressionDesigner.expressionHelper.signEx,State:0},{ID:"SIN",Name:"SIN",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.sinDesc,Example:this.locale.expressionDesigner.expressionHelper.sinEx,State:0},{ID:"SQRT",Name:"SQRT",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.sqrtDesc,Example:this.locale.expressionDesigner.expressionHelper.sqrtEx,State:0},{ID:"TOTALPERCENTAGE",Name:"TOTALPERCENTAGE",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.percentageDesc,Example:this.locale.expressionDesigner.expressionHelper.percentageEx,State:0},{ID:"TAN",Name:"TAN",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.tanDesc,Example:this.locale.expressionDesigner.expressionHelper.tanEx,State:0}]},i.prototype.getConditonalDataJson=function(){return this.jsonData=[{ID:"COALESCE",Name:"COALESCE",CategoryName:"Conditional",Description:"Returns the first non-NULL expression among its arguments, or NULL if all its arguments are NULL",Example:"COALESCE(exp1,exp2,...exp(n))",State:0},{ID:"IF",Name:"IF",CategoryName:"Conditional",Description:this.locale.expressionDesigner.expressionHelper.ifDesc,Example:this.locale.expressionDesigner.expressionHelper.ifEx,State:0},{ID:"IFNULL",Name:"IFNULL",CategoryName:"Conditional",Description:this.locale.expressionDesigner.expressionHelper.ifNullDesc,Example:this.locale.expressionDesigner.expressionHelper.ifNullEx,State:0},{ID:"ISNOTNULL",Name:"ISNOTNULL",CategoryName:"Conditional",Description:this.locale.expressionDesigner.expressionHelper.isNotNullDesc,Example:this.locale.expressionDesigner.expressionHelper.isNotNullEx,State:0},{ID:"ISNULL",Name:"ISNULL",CategoryName:"Conditional",Description:this.locale.expressionDesigner.expressionHelper.isNullDesc,Example:this.locale.expressionDesigner.expressionHelper.isNullEx,State:0}]},i.prototype.getLogicalDataJson=function(){return this.jsonData=[{ID:"AND",Name:"AND",CategoryName:"Logical",Description:this.locale.expressionDesigner.expressionHelper.andDesc,Example:this.locale.expressionDesigner.expressionHelper.andEx,State:0},{ID:"NOT",Name:"NOT",CategoryName:"Logical",Description:this.locale.expressionDesigner.expressionHelper.notDesc,Example:this.locale.expressionDesigner.expressionHelper.notEx,State:0},{ID:"OR",Name:"OR",CategoryName:"Logical",Description:this.locale.expressionDesigner.expressionHelper.orDesc,Example:this.locale.expressionDesigner.expressionHelper.orEx,State:0}]},i.prototype.getDateDataJson=function(){return this.jsonData=[{ID:"CURRENTYEAR",Name:"CURRENTYEAR",CategoryName:"Date",Description:"Returns the current year.",Example:"CURRENTYEAR()",State:0},{ID:"CURRENTMONTH",Name:"CURRENTMONTH",CategoryName:"Date",Description:"Returns the current month.",Example:"CURRENTMONTH()",State:0},{ID:"DATEADD",Name:"DATEADD",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.dateAddDesc,Example:this.locale.expressionDesigner.expressionHelper.dateAddEx,State:0},{ID:"DATEDIFF",Name:"DATEDIFF",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.dateDiffDesc,Example:this.locale.expressionDesigner.expressionHelper.dateDiffEx,State:0},{ID:"DATENAME",Name:"DATENAME",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.dateNameDesc,Example:this.locale.expressionDesigner.expressionHelper.dateNameEx,State:0},{ID:"DATEPART",Name:"DATEPART",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.datePartDesc,Example:this.locale.expressionDesigner.expressionHelper.datePartEx,State:0},{ID:"DATESUB",Name:"DATESUB",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.dateSubDesc,Example:this.locale.expressionDesigner.expressionHelper.dateSubEx,State:0},{ID:"DAY",Name:"DAY",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.dayDesc,Example:this.locale.expressionDesigner.expressionHelper.dayEx,State:0},{ID:"DAYDIFF",Name:"DAYDIFF",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.dayDiffDesc,Example:this.locale.expressionDesigner.expressionHelper.dayDiffEx,State:0},{ID:"HOUR",Name:"HOUR",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.hourDesc,Example:this.locale.expressionDesigner.expressionHelper.hourEx,State:0},{ID:"MAX",Name:"MAX",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.maxDesc,Example:this.locale.expressionDesigner.expressionHelper.maxEx,State:0},{ID:"MIN",Name:"MIN",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.minDesc,Example:this.locale.expressionDesigner.expressionHelper.minEx,State:0},{ID:"MINUTE",Name:"MINUTE",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.minutesDesc,Example:this.locale.expressionDesigner.expressionHelper.minutesEx,State:0},{ID:"MONTH",Name:"MONTH",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.monthDesc,Example:this.locale.expressionDesigner.expressionHelper.monthEx,State:0},{ID:"NOW",Name:"NOW",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.nowDesc,Example:this.locale.expressionDesigner.expressionHelper.nowEx,State:0},{ID:"PREVIOUSMONTH",Name:"PREVIOUSMONTH",CategoryName:"Date",Description:"Returns the previous month.",Example:"PREVIOUSMONTH()",State:0},{ID:"PREVIOUSYEAR",Name:"PREVIOUSYEAR",CategoryName:"Date",Description:"Returns the previous year.",Example:"PREVIOUSYEAR()",State:0},{ID:"TODAY",Name:"TODAY",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.todayDesc,Example:this.locale.expressionDesigner.expressionHelper.todayEx,State:0},{ID:"YEAR",Name:"YEAR",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.yearDesc,Example:this.locale.expressionDesigner.expressionHelper.yearEx,State:0},{ID:"YESTERDAY",Name:"YESTERDAY",CategoryName:"YESTERDAY",Description:"Returns the yesterday date.",Example:"YESTERDAY()",State:0}]},i.prototype.getStringDataJson=function(){return this.jsonData=[{ID:"CHAR",Name:"CHAR",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.charDesc,Example:this.locale.expressionDesigner.expressionHelper.charEx,State:0},{ID:"CONCAT",Name:"CONCAT",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.concatDesc,Example:this.locale.expressionDesigner.expressionHelper.concatEx,State:0},{ID:"CONTAINS",Name:"CONTAINS",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.containsDesc,Example:this.locale.expressionDesigner.expressionHelper.containsEx,State:0},{ID:"ENDSWITH",Name:"ENDSWITH",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.endsWithDesc,Example:this.locale.expressionDesigner.expressionHelper.endsWithEx,State:0},{ID:"LEFT",Name:"LEFT",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.leftDesc,Example:this.locale.expressionDesigner.expressionHelper.leftEx,State:0},{ID:"LEN",Name:"LEN",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.lenDesc,Example:this.locale.expressionDesigner.expressionHelper.lenEx,State:0},{ID:"LOWER",Name:"LOWER",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.lowerDesc,Example:this.locale.expressionDesigner.expressionHelper.lowerEx,State:0},{ID:"LTRIM",Name:"LTRIM",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.ltrimDesc,Example:this.locale.expressionDesigner.expressionHelper.ltrimEx,State:0},{ID:"MAX",Name:"MAX",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.maxStrDesc,Example:this.locale.expressionDesigner.expressionHelper.maxStrEx,State:0},{ID:"MIN",Name:"MIN",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.minStrDesc,Example:this.locale.expressionDesigner.expressionHelper.minStrEx,State:0},{ID:"REPLACE",Name:"REPLACE",CategoryName:"String",Description:"Replaces all occurrences of the substring within the given string expression, with the new_substring.",Example:" REPLACE(string_expression, substring, new_substring)",State:0},{ID:"RIGHT",Name:"RIGHT",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.rightDesc,Example:this.locale.expressionDesigner.expressionHelper.rightEx,State:0},{ID:"RTRIM",Name:"RTRIM",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.rtrimDesc,Example:this.locale.expressionDesigner.expressionHelper.rtrimEx,State:0},{ID:"STARTSWITH",Name:"STARTSWITH",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.startsWithDesc,Example:this.locale.expressionDesigner.expressionHelper.startsWithEx,State:0},{ID:"SUBSTR",Name:"SUBSTR",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.substrDesc,Example:this.locale.expressionDesigner.expressionHelper.substrEx,State:0},{ID:"TRIM",Name:"TRIM",CategoryName:"String",Description:"Removes the leading and trailing spaces from the given string expression.",Example:"TRIM(string_expression)",State:0},{ID:"UPPER",Name:"UPPER",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.upperDesc,Example:this.locale.expressionDesigner.expressionHelper.upperEx,State:0},{ID:"HTML_PPARSER",Name:"HTML_PARSER",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.htmlParseDesc,Example:this.locale.expressionDesigner.expressionHelper.htmlParseEx,State:0},{ID:"XML_PARSER",Name:"XML_PARSER",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.xmlParseDesc,Example:this.locale.expressionDesigner.expressionHelper.xmlParseEx,State:0}]},i.prototype.getAggDataJson=function(){return this.jsonData=[{ID:"AVG",Name:"AVG",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.avgDesc,Example:this.locale.expressionDesigner.expressionHelper.avgEx,State:0},{ID:"AVGD",Name:"AVGD",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.avgdDesc,Example:this.locale.expressionDesigner.expressionHelper.avgdEx,State:0},{ID:"COUNT",Name:"COUNT",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.countDesc,Example:this.locale.expressionDesigner.expressionHelper.countEx,State:0},{ID:"COUNTD",Name:"COUNTD",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.countdDesc,Example:this.locale.expressionDesigner.expressionHelper.countdEx,State:0},{ID:"MAX",Name:"MAX",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.maxAggDesc,Example:this.locale.expressionDesigner.expressionHelper.maxAggEx,State:0},{ID:"MIN",Name:"MIN",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.minAggDesc,Example:this.locale.expressionDesigner.expressionHelper.minAggEx,State:0},{ID:"STDEV",Name:"STDEV",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.stdDevDesc,Example:this.locale.expressionDesigner.expressionHelper.stdDevEx,State:0},{ID:"SUM",Name:"SUM",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.sumDesc,Example:this.locale.expressionDesigner.expressionHelper.sumEx,State:0},{ID:"SUMD",Name:"SUMD",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.sumdDesc,Example:this.locale.expressionDesigner.expressionHelper.sumdEx,State:0},{ID:"VAR",Name:"VAR",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.varDesc,Example:this.locale.expressionDesigner.expressionHelper.varEx,State:0},{ID:"STRING_AGG",Name:"STRING_AGG",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.string_aggDesc,Example:this.locale.expressionDesigner.expressionHelper.string_aggEx,State:0},{ID:"TOTAL",Name:"TOTAL",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.totalDesc,Example:this.locale.expressionDesigner.expressionHelper.totalEx,State:0}]},i.prototype.getRowDataJson=function(){return this.jsonData=[{ID:"RUNNINGCOUNT",Name:"RUNNINGCOUNT",CategoryName:"Row",Description:this.locale.expressionDesigner.expressionHelper.runningCountDesc,Example:this.locale.expressionDesigner.expressionHelper.runningCountEx,State:0},{ID:"RUNNIGAVG",Name:"RUNNINGAVG",CategoryName:"Row",Description:this.locale.expressionDesigner.expressionHelper.runningAvgDesc,Example:this.locale.expressionDesigner.expressionHelper.runningAvgEx,State:0},{ID:"RUNNINGMAX",Name:"RUNNINGMAX",CategoryName:"Row",Description:this.locale.expressionDesigner.expressionHelper.runningMaxDesc,Example:this.locale.expressionDesigner.expressionHelper.runningMaxEx,State:0},{ID:"RUNNINGMIN",Name:"RUNNINGMIN",CategoryName:"Row",Description:this.locale.expressionDesigner.expressionHelper.runningMinDesc,Example:this.locale.expressionDesigner.expressionHelper.runningMinEx,State:0},{ID:"RUNNINGSUM",Name:"RUNNINGSUM",CategoryName:"Row",Description:this.locale.expressionDesigner.expressionHelper.runningSumDesc,Example:this.locale.expressionDesigner.expressionHelper.runningSumEx,State:0}]},i.prototype.getMultipleData=function(i){var r=[];if(n.isNullOrUndefined(i)){var u=this.getNumberDataJson(),f=this.getAggDataJson(),e=this.getConditonalDataJson(),o=this.getLogicalDataJson(),s=this.getDateDataJson(),h=this.getStringDataJson(),c=this.getRowDataJson();r=[{ID:1,Name:t.FunctionName.Numbers,Value:u},{ID:2,Name:t.FunctionName.Aggregation,Value:f},{ID:3,Name:t.FunctionName.Conditional,Value:e},{ID:4,Name:t.FunctionName.Logical,Value:o},{ID:5,Name:t.FunctionName.Date,Value:s},{ID:6,Name:t.FunctionName.String,Value:h},{ID:7,Name:t.FunctionName.Row,Value:c}]}return r},i.prototype.getMultipleColumnData=function(i,r){var s,u,e,f,o;if(n.isNullOrUndefined(r)){var h=[],c=[],l=[],a=[],y=[],v=[];for(u=0;u<i.length;u++)e=i[u].IsDynamicParam,i[u].DataType||i[u].TypeName!=="UnSupport"?i[u].IsExpression||(f=i[u].DataType||i[u].TypeName,f!=="geography"&&f!=="hierarchyid"&&f!=="xml"&&(o=!n.isNullOrUndefined(i[u].Value)&&i[u].Value!==""?i[u].Value:i[u].Name,f.toLowerCase()==="integer"||f.toLowerCase()==="real"?h.push({ID:u,Name:i[u].Name,Value:o,DataType:f,HasDynamicParams:e}):f.toLowerCase()==="string"?c.push({ID:u,Name:i[u].Name,Value:o,DataType:f,HasDynamicParams:e}):f.toLowerCase()==="date"?l.push({ID:u,Name:i[u].Name,Value:o,DataType:f,HasDynamicParams:e}):f.toLowerCase()==="boolean"&&a.push({ID:u,Name:i[u].Name,Value:o,DataType:f,HasDynamicParams:e}),!n.isNullOrUndefined(e)&&e&&v.push({ID:u,Name:i[u].Name,Value:o,DataType:f,HasDynamicParams:e}))):y.push({ID:u,Name:i[u].Name,Value:i[u].Name,DataType:i[u].DataType||i[u].TypeName,HasDynamicParams:e});s=[{ID:1,Name:t.FieldName.Number,Value:h},{ID:2,Name:t.FieldName.Text,Value:c},{ID:3,Name:t.FieldName.Date,Value:l},{ID:4,Name:t.FieldName.Boolean,Value:a},{ID:5,Name:t.FieldName.Parameter,Value:v},{ID:6,Name:t.FieldName.Miscellaneous,Value:[]}]}return s},i.prototype.getDaMultipleColumnData=function(i,r){var s,u,f,e;if(n.isNullOrUndefined(r)){var h=[],c=[],l=[],a=[],o=!1;for(u=0;u<i.length;u++)f=i[u].Type,e=i[u].Caption,f==="NUMERIC"?h.push({ID:u,Name:i[u].Caption,Value:e,DataType:i[u].Type,HasDynamicParams:o}):f==="STRING"?c.push({ID:u,Name:i[u].Caption,Value:e,DataType:i[u].DataType,HasDynamicParams:o}):f==="DATETIME"?l.push({ID:u,Name:i[u].Caption,Value:e,DataType:i[u].DataType,HasDynamicParams:o}):f==="BOOLEAN"&&a.push({ID:u,Name:i[u].Caption,Value:e,DataType:i[u].DataType,HasDynamicParams:o});s=[{ID:1,Name:t.FieldName.Number,Value:h},{ID:2,Name:t.FieldName.Text,Value:c},{ID:3,Name:t.FieldName.Date,Value:l},{ID:4,Name:t.FieldName.Boolean,Value:a},{ID:5,Name:t.FieldName.Miscellaneous,Value:[]}]}return s},i}();t.ExpressionHelper=i})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={}));InternalQueryExpression=function(){function n(n){this.id=null;this.oldVal="";this.oldExpName="";this.isAddButtonEnabled=!1;this.queryExp=[];this.expressionLength=0;this.tempExp=[];this.provider="";this.isVirtualScrollEnabled=!1;this.listContainer=null;this.expLiTag=null;this.bodyContainer=null;this.textBox=null;this.textArea=null;this.expressionContainer=null;this.addBtnTag=null;this.saveBtnTag=null;this.footerTag=null;this.expWaterMark="";this.successMessageLocale="";this.nameWaterMark="Expression Name";this.isAdd=!1;this.ejFunctionDropdown=null;this.ejColumnDropdown=null;this.ejFunctionList=null;this.ejColumnList=null;this.ejExpDialog=null;this.ejIndicator=null;this.locale=null;this.isFromQueryDesigner=!1;this.aggregationList=["SUM","COUNT","AVG","MAX","MIN","VAR","STDEV","SUMD","AVGD","COUNTD","INDEX","TOTAL","RUNNINGAVG","RUNNINGCOUNT","RUNNINGSUM","RUNNINGMAX","RUNNINGMIN","NULL"];this.rowExpression=["RUNNINGAVG","RUNNINGCOUNT","RUNNINGSUM","RUNNINGMAX","RUNNINGMIN"];this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$;this.locale=n.getLocalizationContent();this.queryDesigner=this.dashboardDesigner.modules.queryDesigner;this.id=this.dashboardDesigner._id;this.widgetHelper=this.dashboardDesigner.modules.widgetHelper;this.provider="SQL";this.expWaterMark=this.locale.queryExpressionDialog.QueryExpression;this.successMessageLocale=this.locale.queryExpressionDialog.successMessageNotification;this.renderQueryExpression()}return n.prototype.renderQueryExpression=function(){var u=this,f=BoldBIDashboard.buildTag("div.bbi-userselect","",{},{id:this.id+"_exp_designer"}),t=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_exp_designer_div"}),n,e;f.append(t);var b=BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-table","",{},{unselectable:"on"}),k=BoldBIDashboard.buildTag("tr","",{}),d=BoldBIDashboard.buildTag("td.bbi-querydesigner-exp-separator bbi-querydesigner-exp-td","",{"font-size":"13px"},{}),g=BoldBIDashboard.buildTag("td","",{"margin-left":"12px"},{});t.append(b);b.append(k);k.append(d).append(g);n=BoldBIDashboard.buildTag("div","",{width:"175px",height:"460px"});e=this.expressionContainer=BoldBIDashboard.buildTag("div","",{"margin-left":"10px"},{id:this.id+"_exp_designer_container_exp"});d.append(n);g.append(e);var o=BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-table","",{width:"623px"},{unselectable:"on"}),nt=BoldBIDashboard.buildTag("tr","",{width:"590px"}),tt=BoldBIDashboard.buildTag("td","",{}),oi=BoldBIDashboard.buildTag("label.bbi-designer-title-label",this.locale.expressionDesigner.nameText,{},{id:this.id+"_exp_designer_exp_name"}),it=BoldBIDashboard.buildTag("tr","",{width:"590px"}),rt=BoldBIDashboard.buildTag("td","",{}),s=this.textBox=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-textbox","",{height:"20px",width:"240px","margin-top":"2px","margin-bottom":"5px"},{type:"text",id:this.id+"_exp_designer_textBox",spellcheck:"false"});tt.append(oi);nt.append(tt);rt.append(s);it.append(rt);var ut=BoldBIDashboard.buildTag("tr","",{height:"100px",width:"590px"}),ft=BoldBIDashboard.buildTag("tr","",{width:"590px"}),et=BoldBIDashboard.buildTag("td","",{}),si=BoldBIDashboard.buildTag("label.bbi-designer-title-label",this.locale.expressionDesigner.expressionText,{},{id:this.id+"_exp_designer_trgt_name"});et.append(si);ft.append(et);var ot=BoldBIDashboard.buildTag("td","",{"font-size":"13px"},{}),h=this.textArea=BoldBIDashboard.buildTag("textarea.e-textarea bbi-designer-textarea","",{height:"90px",width:"593px","margin-top":"6px",overflow:"auto"},{id:this.id+"_exp_designer_textarea",spellcheck:"false"}),st=BoldBIDashboard.buildTag("tr","",{height:"255px",width:"590px"}),ht=BoldBIDashboard.buildTag("td","",{}),ct=BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-innertable","",{height:"250px",width:"590px","margin-top":"6px","margin-bottom":"2px"}),lt=BoldBIDashboard.buildTag("tr","",{height:"35px",width:"590px"}),at=BoldBIDashboard.buildTag("td","",{}),hi=BoldBIDashboard.buildTag("span.bbi-designer-title-label",this.locale.expressionDesigner.functionsText,{},{}),vt=BoldBIDashboard.buildTag("div","",{"margin-top":"6px",width:"210px"},{}),c=BoldBIDashboard.buildTag("input","",{"margin-top":"5px"},{id:this.id+"_exp_designer_options"}),ci=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_exp_designer_option_div"}),yt=BoldBIDashboard.buildTag("td","",{}),li=BoldBIDashboard.buildTag("div","",{height:"25px",margin:"25px 10px 0px -3px","border-left":"1px solid var(--querydesigner-primary-border-color)"},{});yt.append(li);var pt=BoldBIDashboard.buildTag("td","",{}),ai=BoldBIDashboard.buildTag("span.bbi-designer-title-label",this.locale.expressionDesigner.columnSettingsText,{"margin-left":"6px"},{}),wt=BoldBIDashboard.buildTag("div","",{"margin-top":"6px",width:"199px","margin-left":"6px"},{}),l=BoldBIDashboard.buildTag("input","",{height:"35px",width:"190px"},{id:this.id+"_exp_designer_data"}),vi=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_exp_designer_data_div"}),yi=BoldBIDashboard.buildTag("td","",{height:"35px"}),bt=BoldBIDashboard.buildTag("tr","",{width:"590px"}),i=BoldBIDashboard.buildTag("td","",{width:"210px"},{}),kt=BoldBIDashboard.buildTag("td","",{}),pi=BoldBIDashboard.buildTag("div","",{height:"200px",margin:"-10px 10px 0px -3px","border-left":"1px solid var(--querydesigner-primary-border-color)"},{});kt.append(pi);var r=BoldBIDashboard.buildTag("td","",{width:"205px"},{}),dt=BoldBIDashboard.buildTag("td","",{height:"190px"}),wi=this.functionNoDataContainer=BoldBIDashboard.buildTag("div.bbi-querydesigner-function-nodata bbi-designer-empty-msg","",{width:"188px",height:"135px"},{id:this.id+"_function_nodata_container"}).text(this.locale.queryExpressionDialog.NoResultFound),gt=BoldBIDashboard.buildTag("div.bbi-querydesigner-function-search","",{width:"188px"},{id:this.id+"_div_functions_search"}),ni=BoldBIDashboard.buildTag("div.e-option-list","",{width:"205px","margin-top":"1px"},{}),bi=this.columnNoDataContainer=BoldBIDashboard.buildTag("div.bbi-querydesigner-column-nodata bbi-designer-empty-msg","",{width:"188px",height:"135px"},{id:this.id+"_column_nodata_container"}).text(this.locale.queryExpressionDialog.NoResultFound),ti=BoldBIDashboard.buildTag("div.bbi-querydesigner-column-search","",{width:"188px"},{id:this.id+"_div_columnsettings_search"}),a=BoldBIDashboard.buildTag("ul","",{},{id:this.id+"_exp_designer_option_list"}),ii=BoldBIDashboard.buildTag("div.e-data-list","",{width:"199px","margin-left":"6px","margin-top":"1px"},{}),v=BoldBIDashboard.buildTag("ul","",{},{id:this.id+"_exp_designer_data_list"}),ri=BoldBIDashboard.buildTag("div.bbi-designer-cursor","",{height:"200px",width:"180px","margin-right":"10px"},{id:this.id+"_cat_desc"}),ki=BoldBIDashboard.buildTag("div","",{height:"5px"},{}),di=BoldBIDashboard.buildTag("div.bbi-designer-title-label","",{height:"auto"},{id:this.id+"_exp_designer_desc_heading"}),gi=BoldBIDashboard.buildTag("div","",{"text-align":"justify",height:"auto","font-size":"12px","margin-top":"8px"},{id:this.id+"_exp_designer_desc_content"}),nr=BoldBIDashboard.buildTag("div","",{height:"12px"},{}),tr=BoldBIDashboard.buildTag("div.bbi-designer-title-label","",{height:"auto"},{id:this.id+"_exp_designer_example_heading"}),ir=BoldBIDashboard.buildTag("div","",{float:"left","word-wrap":"break-word","margin-top":"8px",height:"auto","font-size":"12px",width:"190px"},{id:this.id+"_exp_designer_example_content"}),y=this.addBtnTag=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.expressionDesigner.addText,{float:"left"},{id:this.id+"_exp_designer_add_btn",type:"button"}),ui=BoldBIDashboard.buildTag("div.bbi-querydesigner-success-msg-wrap","",{display:"none"},{id:this.id+"_exp_success_message_wrap"}),rr=BoldBIDashboard.buildTag("span.bbi-querydesigner-success-message",this.successMessageLocale,{},{id:this.id+"_exp_success_message"}),ur=BoldBIDashboard.buildTag("span.bbi-querydesigner-success-message-icon","",{},{id:this.id+"_exp_success_message_icon"});this.saveBtnTag=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.expressionDesigner.saveBtnText,{float:"right"},{id:this.id+"_exp_designer_save_btn",type:"button"});var p=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.locale.expressionDesigner.closeBtnText,{float:"right"},{id:this.id+"_exp_designer_close_btn",type:"button"}),w=this.bodyContainer=BoldBIDashboard.buildTag("div.e-lv e-js e-parentlv bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{width:"100%",height:n.height(),display:"block",position:"relative"},{id:this.id+"_exp_designer_bodyContainer"}),fi=BoldBIDashboard.buildTag("div","",{},{}),ei=this.listContainer=BoldBIDashboard.buildTag("div.bbi-list-container e-js e-widget bbi-designer-dataset","",{"border-top-width":"1px",padding:"3px"},{id:this.id+"_div_expList"}),fr=this.expLiTag=BoldBIDashboard.buildTag("ul.e-list-hdr e-clearall","",{width:"auto",height:"auto"},{id:this.id+"_query_exp_li_container"});ei.append(fr);fi.append(ei);w.append(fi);n.append(w);ot.append(h);ut.append(ot);o.append(nt).append(it).append(ft).append(ut);lt.append(yi).append(at).append(yt).append(pt);at.append(hi).append(vt);vt.append(c).append(ci);pt.append(ai).append(wt);wt.append(l).append(vi);ct.append(lt).append(bt);ht.append(ct);st.append(ht);o.append(st);i.append(gt);i.append(ni);i.append(wi);ni.append(a);r.append(ti);r.append(ii);r.append(bi);ii.append(v);dt.append(ri);ri.append(ki).append(di).append(gi).append(nr).append(tr).append(ir);bt.append(dt).append(i).append(kt).append(r);e.append(o);f.BoldBIDashboardDialog({width:"auto",height:"auto",minWidth:"310px",minHeight:"215px",title:this.locale.expressionDesigner.expressionTitleText,beforeClose:this.bbdesigner$.proxy(this.closeExpDialog,this),enableResize:!1,showOnInit:!1,showFooter:!0,containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner e-query-expression",enableModal:!0,close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText});this.footerTag=this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_foot");ui.append(ur,rr);this.footerTag.append(y,p,this.saveBtnTag,ui);c.BoldBIDashboardDropDownList({targetID:this.id+"_exp_designer_option_div",dataSource:[],popupHeight:"150px",minPopupWidth:"190px",showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-ejwidgets bbi-designer-drpdown-selection bbi-dbrd-control",width:"190px",height:"28px",change:this.bbdesigner$.proxy(this.renderFunctionList,this)});l.BoldBIDashboardDropDownList({targetID:this.id+"_exp_designer_data_div",popupHeight:"150px",showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-ejwidgets bbi-designer-drpdown-selection bbi-dbrd-control",minPopupWidth:"190px",fields:{id:"id",text:"name"},dataSource:[],width:"190px",height:"28px",change:this.bbdesigner$.proxy(this.renderColumnList,this)});a.BoldBIDashboardListBox({dataSource:[],height:"155px",change:this.bbdesigner$.proxy(this.optionClick,this),showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-list-selection bbi-dbrd-control",width:"190px"});v.BoldBIDashboardListBox({dataSource:[],height:"155px",showRoundedCorner:!0,itemRequest:this.bbdesigner$.proxy(function(n){u.ejColumnList.dummyUl.length===6&&n.model.allowVirtualScrolling&&(u.ejColumnList.dummyUl=u.ejColumnList.element.children())},this),cssClass:"bbi-designer-param-assign bbi-designer-list-selection bbi-dbrd-control",width:"190px"});y.off("click",this.bbdesigner$.proxy(this.addExpression,this));p.off("click",this.bbdesigner$.proxy(this.closeExpression,this));this.saveBtnTag.off("click",this.bbdesigner$.proxy(this.saveExpression,this));y.on("click",this.bbdesigner$.proxy(this.addExpression,this));p.on("click",this.bbdesigner$.proxy(this.closeExpression,this));this.saveBtnTag.on("click",this.bbdesigner$.proxy(this.saveExpression,this));w.BoldBIDashboardScroller({scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,height:n.height(),enableTouchScroll:!0,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize});t.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup bbi-designer-loader",template:this.dashboardDesigner.getWaitingPopupTemplate()});this.ejFunctionDropdown=c.data("BoldBIDashboardDropDownList");this.ejColumnDropdown=l.data("BoldBIDashboardDropDownList");this.ejFunctionList=a.data("BoldBIDashboardListBox");this.ejColumnList=v.data("BoldBIDashboardListBox");this.ejExpDialog=f.data("BoldBIDashboardDialog");this.ejIndicator=t.data("BoldBIDashboardWaitingPopup");h.bind("change keyup paste",this.bbdesigner$.proxy(this.txtExpChanged,this));s.bind("change keyup paste",this.bbdesigner$.proxy(this.txtNameChanged,this));BoldBIDashboard.DashboardUtil.txtWaterMark(h,this.expWaterMark);BoldBIDashboard.DashboardUtil.txtWaterMark(s,this.nameWaterMark);this.unWiredEvents();this.wiredEvents();this.renderAutocomplete(gt,!0);this.renderAutocomplete(ti,!1)},n.prototype.closeDialog=function(){this.resetSearchBox()},n.prototype.renderAutocomplete=function(n,t){var r=BoldBIDashboard.buildTag("table.bbi-querydesigner-toolbar-table","",{width:"100%"}),u=this.bbdesigner$("<tr/>"),f=this.bbdesigner$("<td/>"),e=BoldBIDashboard.buildTag("span.e-atc e-widget","",{width:"100%",height:"28px"},{}),i=BoldBIDashboard.buildTag("span.e-in-wrap e-box e-padding bbi-designer-widget-autocomplete","",{},{}),h=this.expSearch=BoldBIDashboard.buildTag("input.bbi-autocomplete bbi-designer-widget-watermark bbi-designer-atc-boxshadow e-js e-input","",{},{type:"text",placeholder:this.locale.expressionDesigner.placeHolderText,id:t?this.id+"_function_search":this.id+"_column_search"}),o=this.expSearchIcon=BoldBIDashboard.buildTag("span.e-select bbi-designer-widget-autocomplete e-search-area","",{width:"24px",height:"30px"},{id:t?this.id+"_function_search-icon":this.id+"_column_search-icon"}),s;if(o.append(BoldBIDashboard.buildTag("span.bbi-headericon bbi-designer-search","",{display:"table-cell"})),i.append(o),i.append(h),e.append(i),s=BoldBIDashboard.buildTag("span.e-select bbi-designer-widget-select bbi-designer-widget-autocomplete","",{height:"30px"},{id:this.id+"_column_widgetClose"}),s.append("<span class='bbi-headericon e-reportdesigner-widget-left'/>"),f.append(e),u.append(f),r.append(u),n.append(r),this.functionSearchBox=this.expressionContainer.find("#"+this.id+"_function_search"),this.columnSearchBox=this.expressionContainer.find("#"+this.id+"_column_search"),this.functionSearchIcon=this.expressionContainer.find(".bbi-querydesigner-function-search .bbi-headericon"),this.functionListbox=this.expressionContainer.find("#"+this.id+"_exp_designer_option_list"),this.columnSearchIcon=this.expressionContainer.find(".bbi-querydesigner-column-search .bbi-headericon"),this.columnListbox=this.expressionContainer.find("#"+this.id+"_exp_designer_data_list"),this.functionListTd=this.expressionContainer.find(".e-option-list"),this.columnListTd=this.expressionContainer.find(".e-data-list"),t){this.expSearch.on("keyup",this.bbdesigner$.proxy(this.onSearchText,this,this.functionSearchIcon,this.functionListbox,!0));this.expSearch.on("blur",this.bbdesigner$.proxy(this.onSearchBlur,this,this.functionSearchIcon,this.functionListbox));this.expSearchIcon.on("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this,this.functionSearchIcon,this.functionListbox,this.expSearch,!0));this.functionSearchBox.on("focus",this.bbdesigner$.proxy(this.onSearchTextBoxFocusIn,this,this.expressionContainer,!0));this.functionSearchBox.on("blur",this.bbdesigner$.proxy(this.onSearchTextBoxFocusOut,this,this.expressionContainer,!0))}else{this.expSearch.on("keyup",this.bbdesigner$.proxy(this.onSearchText,this,this.columnSearchIcon,this.columnListbox,!1));this.expSearch.on("blur",this.bbdesigner$.proxy(this.onSearchBlur,this,this.columnSearchIcon,this.columnListbox));this.expSearchIcon.on("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this,this.columnSearchIcon,this.columnListbox,this.expSearch,!1));this.columnSearchBox.on("focus",this.bbdesigner$.proxy(this.onSearchTextBoxFocusIn,this,this.expressionContainer,!1));this.columnSearchBox.on("blur",this.bbdesigner$.proxy(this.onSearchTextBoxFocusOut,this,this.expressionContainer,!1))}},n.prototype.onSearchTextBoxFocusIn=function(n,t){var i;t?(i=n.find(".bbi-querydesigner-function-search"),i.addClass("e-focus")):(i=n.find(".bbi-querydesigner-column-search"),i.addClass("e-focus"))},n.prototype.onSearchTextBoxFocusOut=function(n,t){var i;t?(i=n.find(".bbi-querydesigner-function-search"),i.hasClass("e-focus")&&i.removeClass("e-focus")):(i=n.find(".bbi-querydesigner-column-search"),i.hasClass("e-focus")&&i.removeClass("e-focus"))},n.prototype.resetSearchBox=function(){this.resetFunction();this.resetColumn()},n.prototype.resetFunction=function(){this.functionSearchBox.val("");this.functionListbox.BoldBIDashboardListBox("showAllItems");this.functionListTd.css("display","block");this.functionNoDataContainer.css("display","none");this.functionSearchIcon.addClass("bbi-designer-search").removeClass("bbi-designer-close")},n.prototype.resetColumn=function(){this.columnSearchBox.val("");this.showAllItemsForListBox(this.columnListbox);this.columnListTd.css("display","block");this.columnNoDataContainer.css("display","none");this.columnSearchIcon.addClass("bbi-designer-search").removeClass("bbi-designer-close")},n.prototype.onSearchText=function(n,t,i,r){var u,f;r.keyCode!==13&&(u=this.bbdesigner$(r.target).val(),u.length>0?(n.addClass("bbi-designer-close").removeClass("bbi-designer-search"),t.data("BoldBIDashboardListBox").model.allowVirtualScrolling?(t.data("BoldBIDashboardListBox").option("query",(new BoldBIDashboard.Query).where("Name",BoldBIDashboard.FilterOperators.contains,u,!0)),this.refreshColumnList(),f=this.filterItems(t.data("BoldBIDashboardListBox").model.dataSource.dataSource.json,u),this.setDisplayForListElements(i,f.length===0)):(f=this.filterItems(t.data("BoldBIDashboardListBox").model.dataSource,u),t.BoldBIDashboardListBox("hideAllItems"),t.BoldBIDashboardListBox("showItemsByIndices",f),this.setDisplayForListElements(i,f.length===0))):(this.showAllItemsForListBox(t),this.setDisplayForListElements(i)))},n.prototype.showAllItemsForListBox=function(n){n.data("BoldBIDashboardListBox").model.allowVirtualScrolling?n.data("BoldBIDashboardListBox").option("query",new BoldBIDashboard.Query):n.BoldBIDashboardListBox("showAllItems")},n.prototype.setDisplayForListElements=function(n,t){n?(this.functionListTd.css("display",BoldBIDashboard.isNullOrUndefined(t)?"block":t?"none":"block"),this.functionNoDataContainer.css("display",BoldBIDashboard.isNullOrUndefined(t)?"none":t?"block":"none")):(this.columnListTd.css("display",BoldBIDashboard.isNullOrUndefined(t)?"block":t?"none":"block"),this.columnNoDataContainer.css("display",BoldBIDashboard.isNullOrUndefined(t)?"none":t?"block":"none"))},n.prototype.onSearchBlur=function(n,t,i){var r=this.bbdesigner$(i.target).val();r.length===0&&(n.addClass("bbi-designer-search").removeClass("bbi-designer-close"),this.bbdesigner$(i.target).val(""),this.showAllItemsForListBox(t))},n.prototype.onSearchCloseClick=function(n,t,i,r){i.val("");this.showAllItemsForListBox(t);n.addClass("bbi-designer-search").removeClass("bbi-designer-close");this.setDisplayForListElements(r);this.refreshSearchListScroller(t)},n.prototype.refreshSearchListScroller=function(n){var t=n.data("BoldBIDashboardListBox");BoldBIDashboard.isNullOrUndefined(t)||t.scrollerObj.refresh()},n.prototype.filterItems=function(n,t){var r=[],i;if(!BoldBIDashboard.isNullOrUndefined(n))for(i=0;i<n.length;i++)(t===""||n[i].Name.toLowerCase().search(t.toLowerCase())!==-1)&&r.push(i);return r},n.prototype.enableButton=function(n,t){BoldBIDashboard.DashboardUtil.buttonEnable(n,t)},n.prototype.txtNameChanged=function(){var t=this.textBox.val(),n=this.expressionContainer.data("e-exp");t!==this.oldExpName?n&&n.isEdit&&t!==n.name||(n&&!n.isEdit||BoldBIDashboard.isNullOrUndefined(n))&&t.length!==0?this.enableButton(this.saveBtnTag,!0):this.enableButton(this.saveBtnTag,!1):(n&&n.isEdit&&t===n.name||(n&&!n.isEdit||BoldBIDashboard.isNullOrUndefined(n))&&t.length===0)&&this.enableButton(this.saveBtnTag,!1);this.oldExpName=t},n.prototype.txtExpChanged=function(){var t=this.textArea.val(),n=this.expressionContainer.data("e-exp");t!==this.oldVal||BoldBIDashboard.isNullOrUndefined(n)||!n.isEdit?(n&&n.isEdit&&t!==n.expression||n&&!n.isEdit||BoldBIDashboard.isNullOrUndefined(n))&&t.length!==0?(this.enableButton(this.saveBtnTag,!0),this.enableButton(this.addBtnTag,!1)):n.isEdit&&t===n.expression?(this.enableButton(this.addBtnTag,this.isAddButtonEnabled),this.enableButton(this.saveBtnTag,!1)):(this.enableButton(this.saveBtnTag,!1),this.enableButton(this.addBtnTag,!1)):(n&&n.isEdit&&t===n.expression||(n&&!n.isEdit||BoldBIDashboard.isNullOrUndefined(n))&&t.length===0)&&this.enableButton(this.saveBtnTag,!1);this.oldVal=t},n.prototype.updateTextArea=function(){var n=this.textArea.val();n&&n.length>0?n!==this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&this.textArea.removeClass("bbi-designer-txtmark"):this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark")},n.prototype.updateTextBox=function(){var n=this.textBox.val();n&&n.length>0?n!==this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&this.textBox.removeClass("bbi-designer-txtmark"):this.textBox.val(this.nameWaterMark).addClass("bbi-designer-txtmark")},n.prototype.addExpression=function(){this.resetSearchBox();this.requestValidation(!0);var n=this.textBox.val();this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(n))[0]})},n.prototype.requestValidation=function(n,t){var r=this.expressionContainer.data("e-exp"),u=this.textArea.val().trim(),i;r&&r.isEdit?(i=this.textBox.val(),i===this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&(i=""),u===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&(u=""),this.hasExpChanges(r,u)?i&&i.length===0||u&&u.length===0||!this.isValidName(i)||!/^[a-zA-Z0-9- _]*$/.test(i)?n?this.newExpression():this.expListClick(t):this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{method:"updateExpressionInfo",instance:this,dataInfo:{name:n?i:t,isSelectionChange:n?!1:!0}}):n?this.switchEditExp():this.expListClick(t)):r&&!r.isEdit||BoldBIDashboard.isNullOrUndefined(r)?u!=="Query Expression"?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"clearExpression",dataInfo:n?null:{isSelectionChange:!0,name:t},instance:this}):n?this.clearExpression(!1):this.expListClick(t):n?this.newExpression():this.expListClick(t)},n.prototype.clearExpression=function(n,t){if(BoldBIDashboard.isNullOrUndefined(t))if(n)this.isAdd=!0,this.saveExpression();else{var i=this.getAvailableName();this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark");this.textBox.val(i);this.updateTextBox();this.enableButton(this.saveBtnTag,!1);this.enableButton(this.addBtnTag,!1)}else n?this.saveExpression(t):this.expListClick(t.name)},n.prototype.deleteEmtyExp=function(){var n=this,i=this.expLiTag.find("li"),t=null;i.each(function(i,r){for(var e=n.bbdesigner$(r).find(".e-list-text").text(),f=!0,u=0;u<n.queryExp.length;u++)if(e===n.queryExp[u].name){f=!1;break}if(f){t=n.bbdesigner$(r);return}});t&&t.remove()},n.prototype.getEmptyExp=function(){var n=this,i=this.expLiTag.find("li"),t=null,r=this.bbdesigner$;return i.each(function(i,u){for(var e=r(u).find(".e-list-text").text(),o=!0,f=0;f<n.queryExp.length;f++)if(e===n.queryExp[f].name){o=!1;break}if(o){t=e;return}}),t},n.prototype.switchEditExp=function(){var n=this,i=this.expLiTag.find("li"),t=!0,r=this.bbdesigner$;i.each(function(i,u){for(var e=r(u).find(".e-list-text").text(),o=!0,f=0;f<n.queryExp.length;f++)if(e===n.queryExp[f].name){o=!1;break}if(o){t=!1;n.expListClick(e);return}});t&&this.newExpression()},n.prototype.hasExpChanges=function(n,t){for(var i=0;i<this.queryExp.length;i++)if(this.queryExp[i].name===n.name&&t.indexOf("["+this.queryExp[i].name+"]")===-1&&(this.queryExp[i].name!==this.textBox.val()||this.queryExp[i].expression!==t))return!0;return!1},n.prototype.newExpression=function(){var n=this.getAvailableName();this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark");this.textBox.val(n);this.updateTextBox();this.expressionContainer.data("e-exp",{isEdit:!1,name:""});this.appendExpList(n);this.enableButton(this.saveBtnTag,!1);this.enableButton(this.addBtnTag,!1);this.UpdateMiscellaneousList()},n.prototype.updateExpressionInfo=function(n,t){var i=this.textBox.val();if(n)t.isSelectionChange?this.expressionContainer.data("e-exp").isEdit?this.expressionValidation(ExpAction.Edit,t.isSelectionChange,t.name):this.expressionValidation(ExpAction.New,t.isSelectionChange,t.name):this.expressionValidation(ExpAction.Save);else if(t.isSelectionChange)this.expListClick(t.name);else{this.switchEditExp();i=this.textBox.val();this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(i))[0]})}},n.prototype.isValidName=function(n){for(var t=this.expressionContainer.data("e-exp"),i=0;i<this.queryExp.length;i++)if(this.queryExp[i].name===n&&(BoldBIDashboard.isNullOrUndefined(t)||t.isEdit&&t.name!==n))return!1;return!0},n.prototype.getAvailableName=function(){for(var n,u,i="Expression",r=[],t=0;t<this.queryExp.length;t++)r.push(this.queryExp[t].name);n=0;do n++,u=r.indexOf(i+n);while(u!==-1);return i+n},n.prototype.populateExpressions=function(){if(this.expLiTag.children().length>0&&this.expLiTag.empty(),!BoldBIDashboard.isNullOrUndefined(this.queryExp)&&this.queryExp.length>0){for(var n=0;n<this.queryExp.length;n++)this.appendExpList(this.queryExp[n].name);this.enableButton(this.addBtnTag,!0)}this.scrollerRefresh(this.bodyContainer)},n.prototype.updateExpList=function(n,t){var i=BoldBIDashboard.DashboardUtil.escapeSelector(n),r=BoldBIDashboard.DashboardUtil.escapeSelector(t);this.dashboardDesigner.element.find("#"+this.id+"_li_"+r).remove();this.dashboardDesigner.element.find("#"+this.id+"_li_"+i).unbind("click",this.bbdesigner$.proxy(this.expressionSelection,this,n));this.dashboardDesigner.element.find("#"+this.id+"_"+i).unbind("click",this.bbdesigner$.proxy(this.removeExpression,this,n));this.dashboardDesigner.element.find("#"+this.id+"_li_"+i+" .e-list-text").text(t);this.addTooltip(this.dashboardDesigner.element.find("#"+this.id+"_li_"+i+" .e-list-text"),t);this.dashboardDesigner.element.find("#"+this.id+"_li_"+i).attr("id",this.id+"_li_"+r);this.dashboardDesigner.element.find("#"+this.id+"_"+i).attr("id",this.id+"_"+r);this.dashboardDesigner.element.find("#"+this.id+"_li_"+r).bind("click",this.bbdesigner$.proxy(this.expressionSelection,this,t));this.dashboardDesigner.element.find("#"+this.id+"_"+r).bind("click",this.bbdesigner$.proxy(this.removeExpression,this,t))},n.prototype.appendExpList=function(n,t){var f=BoldBIDashboard.DashboardUtil.escapeSelector(n),i=BoldBIDashboard.buildTag("li.e-user-select e-list e-state-default e-list-check bbi-designer-exp-list","",{},{id:this.id+"_li_"+f,name:n}),r=BoldBIDashboard.buildTag("a.e-chevron-right_01 bbi-remove-shadow","",{}),e=BoldBIDashboard.buildTag("span.e-list-text e-rel bbi-designer-content bbi-dbrd-designer-hoverable",n,{},{name:n}),u;r.append(e);u=BoldBIDashboard.buildTag("div.e-chk-image e-icon e-cross-circle bbi-dbrd-designer-hoverable","",{},{id:this.id+"_"+f,"data-tooltip":"Delete"});r.append(u);i.append(r);u.bind("click",this.bbdesigner$.proxy(this.removeExpression,this,n));i.bind("click",this.bbdesigner$.proxy(this.expressionSelection,this,n));i.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseUp,this.bbdesigner$.proxy(this.onListItemMouseUp,this));BoldBIDashboard.isNullOrUndefined(t)?this.expLiTag.append(i):t===0?(this.expLiTag.prepend(i),i.css({"border-bottom":"0.5px solid #c8c8c8"})):this.listContainer.find("ul>li:nth-child("+t+")").after(i);this.addTooltip(e,n);this.updateContainerBorder();this.bodyContainer.height()>this.listContainer.height()?this.bodyContainer.find(".e-content").removeClass("e-content"):this.scrollerRefresh(this.bodyContainer)},n.prototype.addTooltip=function(n,t){BoldBIDashboard.DashboardUtil.textWidth(t,"12px Heebo")>=n.width()&&n.attr("data-tooltip",t)},n.prototype.onListItemMouseUp=function(n){var t=this.bbdesigner$(n.target).closest("li"),i=this.dashboardDesigner.bbdesigner$;t.hasClass("bbi-expression-user-selection-active")||(t.parent().children().each(function(){var n=i(this);n.removeClass("bbi-expression-user-selection-active")}),t.addClass("bbi-expression-user-selection-active"),this.isAddButtonEnabled=this.addBtnTag.attr("disabled")===undefined)},n.prototype.expressionSelection=function(n){this.requestValidation(!1,n)},n.prototype.renderFunctionList=function(n){this.ejFunctionList.setModel({dataSource:n.value,fields:{id:"ID",text:"Name"},selectedIndex:0});var t=this.ejFunctionList.getSelectedItems();this.optionClick(t[0]);this.resetFunction()},n.prototype.renderColumnList=function(n){var t=n.value;this.isVirtualScrollEnabled&&(t=new BoldBIDashboard.DataManager({json:n.value}));this.ejColumnList.setModel({dataSource:t,fields:{text:"Name",tooltipText:"Name"},enableWordWrap:!1,selectedIndex:0});this.resetColumn();this.refreshColumnList()},n.prototype.scrollerRefresh=function(n){n.data("BoldBIDashboardScroller")&&n.data("BoldBIDashboardScroller").refresh()},n.prototype.functionDblClick=function(){var i=this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_option_list").data("BoldBIDashboardListBox"),r=i.model.selectedItems,t=i.model.dataSource[r],n=null;t&&(t.CategoryName==="Logical"?(n=t.Name,this.caretPosition(n)):(n=t.Name+"()",this.caretPosition(n,!0,n.length)))},n.prototype.columnDblClick=function(){var i=this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_data_list").data("BoldBIDashboardListBox"),r=i.model.selectedItems,n=i.listitems[r],t=null;n&&(t=n.HasDynamicParams===!0?"@{{:"+n.Value+"}}":"["+n.Name+"]",this.caretPosition(t,!1,t.length))},n.prototype.caretPosition=function(n,t,i){var u,f,r;n&&n.length>0&&(n=n.search("RUNNING")!==-1?n.replace(")","SUM())"):n,BoldBIDashboard.isNullOrUndefined(i)||(i=n.search("RUNNING")!==-1?i+4:i),u=this.textArea.val(),u!==this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")?this.textArea.removeClass("bbi-designer-txtmark"):u===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&(u="",this.textArea.val(u).removeClass("bbi-designer-txtmark")),this.textArea.focus(),f=this.textArea[0],r=f.selectionStart,!BoldBIDashboard.isNullOrUndefined(i)&&t?(this.textArea.val(u.substring(0,r)+n+u.substring(r)),r=f.selectionEnd=r+i-1):BoldBIDashboard.isNullOrUndefined(i)||t?(this.textArea.val(u.substring(0,r)+n+u.substring(r)),r=f.selectionEnd=r):(this.textArea.val(u.substring(0,r)+n+u.substring(r)),r=f.selectionEnd=r+i),this.textArea.trigger("change"))},n.prototype.optionClick=function(n){n.data&&(this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_desc_heading").text("Description"),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_example_heading").text("Example"),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_desc_content").text(n.data.Description),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_example_content").text(n.data.Example))},n.prototype.removeNestedExpression=function(n){var i=[],r,t,u;for(this.listContainer.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(n)).remove(),t=this.queryExp.length-1;t>=0;t--)(this.queryExp[t].name===n||this.queryExp[t].expression.indexOf("["+n+"]")>-1)&&(i.push(this.queryExp[t]),this.queryExp.splice(t,1));if(i.length>0)for(r=[],t=i.length-1;t>=0;t--)if(r=this.removeNestedExpression(i[t].name),r.length>0)for(u=0;u<r.length;u++)i.push(r[u]);return i},n.prototype.removeExpression=function(n){this.hasExpression(n)?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.removeExpression,this.locale.dataSource.removeExpressionText,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{expressionName:n},instance:this,method:"conformDelete"}):this.conformRemoveExpression(n)},n.prototype.conformRemoveExpression=function(n){var u=[],f=[],i,t,r,e,o;if(this.listContainer.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(n)).remove(),this.updateContainerBorder(),!BoldBIDashboard.isNullOrUndefined(this.queryExp)&&this.queryExp.length>0){for(this.expressionLength=this.queryExp.length,t=this.queryExp.length-1;t>=0;t--)if(this.queryExp[t].name===n){u.push(this.queryExp[t].name);f.push(this.queryExp[t].expression);this.queryExp.splice(t,1);break}if(i=this.removeNestedExpression(n),!BoldBIDashboard.isNullOrUndefined(i)&&i.length>0)for(t=i.length-1;t>=0;t--)u.push(i[t].name),f.push(i[t].expression);this.serverValidationExp({selectedExpression:"",name:u,expression:f},ExpAction.Remove);r=this.queryExp.length;r>0?(this.expListClick(this.queryExp[r-1].name),this.deleteEmtyExp(),this.enableButton(this.addBtnTag,!0)):r===0&&this.expLiTag.children().length>0&&this.expLiTag.empty()}this.expLiTag.children().length===0&&(e=this.getAvailableName(),this.appendExpList(e),this.textBox.val(e),this.updateTextBox(),this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark"),this.expressionContainer.data("e-exp",{isEdit:!1,name:""}),this.enableButton(this.addBtnTag,!1));this.scrollerRefresh(this.bodyContainer);this.UpdateMiscellaneousList();o=this.textBox.val();this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(o))[0]})},n.prototype.conformDelete=function(n,t){n&&this.conformRemoveExpression(t.expressionName)},n.prototype.hasExpression=function(n){for(var r,f,u,i=this.widgetHelper.getAllWidgets(),t=0;t<i.length;t++)if(!BoldBIDashboard.isNullOrUndefined(i[t].DataGroupInfo)&&i[t].DataGroupInfo.DataSourceID===this.dataset.Id)for(r=0;r<i[t].DataGroupInfo.FieldContainers.length;r++)for(f=i[t].DataGroupInfo.FieldContainers[r],u=0;u<f.FieldInfos.length;u++)if(n===f.FieldInfos[u].Name)return!0;return!1},n.prototype.expListClick=function(n){for(var i,r=!1,t=0;t<this.queryExp.length;t++)if(n===this.queryExp[t].name){this.textBox.val(this.queryExp[t].name);this.textArea.val(this.queryExp[t].expression);this.updateTextBox();this.updateTextArea();this.textArea.focus();i=this.textArea[0];i.selectionStart=i.selectionEnd=this.queryExp[t].expression.length;this.expressionContainer.data("e-exp",{isEdit:!0,name:this.queryExp[t].name,expression:this.queryExp[t].expression});r=!0;this.enableButton(this.saveBtnTag,!1);break}r||(this.textBox.val(n),this.updateTextBox(),this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark"),this.enableButton(this.saveBtnTag,!1),this.enableButton(this.addBtnTag,!1),this.expressionContainer.data("e-exp",null));this.UpdateMiscellaneousList()},n.prototype.updateContainerBorder=function(){this.listContainer.css("border-top-width",this.listContainer.find("li").length===0?"0px":"1px")},n.prototype.wiredEvents=function(){this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_option_list").bind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.functionDblClick,this));this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_data_list").bind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.columnDblClick,this));this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_closebutton").on("click",this.bbdesigner$.proxy(this.closeDialog,this))},n.prototype.unWiredEvents=function(){this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_option_list").unbind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.functionDblClick,this));this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_data_list").unbind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.columnDblClick,this));this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_closebutton").unbind("click",this.bbdesigner$.proxy(this.closeDialog,this));BoldBIDashboard.isNullOrUndefined(this.functionSearchBox)||(this.functionSearchBox.off("keyup",this.bbdesigner$.proxy(this.onSearchText,this)),this.functionSearchBox.off("blur",this.bbdesigner$.proxy(this.onSearchBlur,this)));BoldBIDashboard.isNullOrUndefined(this.columnSearchBox)||(this.columnSearchBox.off("keyup",this.bbdesigner$.proxy(this.onSearchText,this)),this.columnSearchBox.off("blur",this.bbdesigner$.proxy(this.onSearchBlur,this)));BoldBIDashboard.isNullOrUndefined(this.expSearchIcon)||this.expSearchIcon.off("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this))},n.prototype.openExpression=function(n,t,i,r){var f,y,o,h,s,b,k,v,l,c,e,u;this.callBackModel=i;this.queryDesigner=this.dashboardDesigner.modules.queryDesigner;this.dataset=i.optionalArgs.dataset;this.ejExpDialog.open();this.resetDesigner(!0);this.queryExp=n;this.isFromQueryDesigner=r;this.tempExp=this.bbdesigner$.extend(!0,[],n);f=new BoldBIDashboard.Dashboard.ExpressionDialogModel;y=new BoldBIDashboard.Dashboard.ExpressionHelper;f.FunctionUI={Selected:BoldBIDashboard.Dashboard.FieldName.All,State:0};f.Datasource=y.getMultipleData();f=t.beforeExpressionDialogOpen(f,"function");var a=f.Datasource,p=[],w=[];if(a.length>1){for(o=[],e=0;e<a.length;e++)o=o.concat(a[e].Value);for(o.sort(function(n,t){return n.ID>t.Name?1:t.Name>n.ID?-1:0}),h=0;h<o.length;h++)w.indexOf(o[h].ID)===-1&&(w.push(o[h].ID),p.push(o[h]));f.Datasource.unshift({ID:0,Name:BoldBIDashboard.Dashboard.FieldName.All,Value:p})}if(this.ejFunctionDropdown.setModel({fields:{id:"ID",text:"Name",value:"Value"},dataSource:f.Datasource,enabled:f.FunctionUI.State===BoldBIDashboard.Dashboard.State.Enable}),this.ejFunctionDropdown.selectItemByText(f.FunctionUI.Selected),s=new BoldBIDashboard.Dashboard.ExpressionDialogModel,b=new BoldBIDashboard.Dashboard.ExpressionHelper,s.FunctionUI={Selected:BoldBIDashboard.Dashboard.FieldName.All,State:0},k=BoldBIDashboard.Dashboard.ConnectionHelper.isHierarchicalConnection(t),v=k?BoldBIDashboard.DashboardUtil.getFieldUsingTableType(this.callBackModel.optionalArgs.tableType||this.fillFieldItems(this.dataset)):this.getFields(),this.updateDashboardParameters(v),s.Datasource=b.getMultipleColumnData(v),s=t.beforeExpressionDialogOpen(s,"column"),l=s.Datasource,c=[],l.length>1){for(e=0;e<l.length;e++)l[e].Name!=="Parameters"&&(c=c.concat(l[e].Value));c.sort(function(n,t){return n.ID>t.ID?1:t.ID>n.ID?-1:0});this.isVirtualScrollEnabled=c.length>100;s.Datasource.unshift({ID:0,Name:BoldBIDashboard.Dashboard.FieldName.All,Value:c})}u=this;setTimeout(function(n){u.isVirtualScrollEnabled?u.ejColumnList.setModel({allowVirtualScrolling:!0,virtualScrollMode:"continuous",itemRequestCount:100}):u.ejColumnList.option("allowVirtualScrolling",!1);u.ejColumnDropdown.setModel({fields:{id:"ID",text:"Name",value:"Value"},dataSource:n.Datasource,enabled:!0});u.ejColumnDropdown.selectItemByText(n.FunctionUI.Selected);u.queryExp.length>0?(u.populateExpressions(),u.expListClick(u.queryExp[0].name)):u.newExpression();var t=u.textBox.val();u.onListItemMouseUp({target:u.dashboardDesigner.element.find("#"+u.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(t))[0]});u.refreshListScroller()},100,s)},n.prototype.fillFieldItems=function(n){var i=this,t=[];return n.Fields.forEach(function(n){n.IsExpression||n.IsParameterField||t.push(i.ConvertDatasetToTabletype(n))}),t},n.prototype.ConvertDatasetToTabletype=function(n){return{DataType:n.TypeName,DefaultDataType:n.TypeName,IsExpression:n.IsExpression,IsAggregatedExpression:n.IsAggregatedExpression,ID:n.Id,Name:n.Name,ChildFields:n.ChildFields}},n.prototype.getFields=function(){return BoldBIDashboard.isNullOrUndefined(this.callBackModel.optionalArgs.tableType)?this.fillFieldItems(this.dataset):this.bbdesigner$.extend(!0,[],this.callBackModel.optionalArgs.tableType)},n.prototype.updateDashboardParameters=function(n){var r=this,e=this.bbdesigner$.extend(!0,{},this.dataset),u;e.Query.DashboardParameters=this.dataset.Query.DashboardParameters;var f=[],t=!1,i=null;return f.push(e),this.dashboardDesigner.rdlParser.rdlJsonObj.DataSets.forEach(function(n){n.Id!==f[0].Id&&f.push(r.bbdesigner$.extend(!0,{},n))}),u=this,f.forEach(function(f){BoldBIDashboard.isNullOrUndefined(f)||BoldBIDashboard.isNullOrUndefined(f.Query)||BoldBIDashboard.isNullOrUndefined(f.Query.DashboardParameters)||(t=f.Id===r.callBackModel.optionalArgs.datasourceInfo.Id,f.Query.DashboardParameters=t&&!BoldBIDashboard.isNullOrUndefined(u.queryDesigner)&&!BoldBIDashboard.isNullOrUndefined(u.queryDesigner.queryParamCollection)&&(u.queryDesigner.queryParamCollection.length!==0||u.isFromQueryDesigner)?u.queryDesigner.queryParamCollection:f.Query.DashboardParameters,i=f.Name,f.Query.DashboardParameters.forEach(function(u){var f=u.ParameterName,e=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DynamicParameterDataType,u.DataType),o,c,s,h;e=u.DataType===DynamicParameterDataType.Number?"integer":e;switch(u.Mode){case ParameterMode.Literal:o=u.LiteralModeInfo;c=!BoldBIDashboard.isNullOrUndefined(o.StartValue)&&!BoldBIDashboard.isNullOrUndefined(o.EndValue)||!BoldBIDashboard.isNullOrUndefined(o.RangeStartDate)&&!BoldBIDashboard.isNullOrUndefined(o.RangeEndDate)||!BoldBIDashboard.isNullOrUndefined(o.RelativeDateItems);c?(s=f+".START",h=f+".END",n.push(r.getParamItems(t?s:s+" ("+i+")",t?s:i+"."+s,e)),n.push(r.getParamItems(t?h:h+" ("+i+")",t?h:i+"."+h,e))):n.push(r.getParamItems(t?f:f+" ("+i+")",t?f:i+"."+f,e));break;case ParameterMode.List:n.push(r.getParamItems(t?f:f+" ("+i+")",t?f:i+"."+f,e))}r.addItemIntoFieldListWithIgnoreQuotesSyntax(u,t,i,n)}))}),n.push(this.getParamItems(this.locale.userParameter.fullName,"CURRENTUSER.FULLNAME","String"),this.getParamItems(this.locale.userParameter.email,"CURRENTUSER.EMAIL","String"),this.getParamItems(this.locale.userParameter.tenantURL,"CURRENT.SITEURL","String")),this.dashboardDesigner.model.environment!==BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(BoldBIDashboard.Environment,BoldBIDashboard.Environment.cloud)&&n.push(this.getParamItems(this.locale.userParameter.siteIdentifier,"CURRENT.SITEIDENTIFIER","String")),n},n.prototype.addItemIntoFieldListWithIgnoreQuotesSyntax=function(n,t,i,r){var o,h,s,u,f,e;BoldBIDashboard.isNullOrUndefined(n)||(o=n.ParameterName,(n.DataType===DynamicParameterDataType.Date||n.DataType===DynamicParameterDataType.String)&&(h=n.Mode===ParameterMode.Literal&&n.LiteralModeInfo.SelectionType===SelectionType.Range,s=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DynamicParameterDataType,n.DataType),h?(u=o+".START.IGNOREQUOTES",f=o+".END.IGNOREQUOTES",r.push(this.getParamItems(t?u:u+" ("+i+")",t?u:i+"."+u,s)),r.push(this.getParamItems(t?f:f+" ("+i+")",t?f:i+"."+f,s))):(e=o+".IGNOREQUOTES",r.push(this.getParamItems(t?e:e+" ("+i+")",t?e:i+"."+e,s)))))},n.prototype.getParamItems=function(n,t,i){return{Name:n,Value:t,DataType:i,IsExpression:!1,IsDynamicParam:!0}},n.prototype.refreshListScroller=function(){var t=this.ejFunctionList,n;t.scrollerObj.model.scrollTop=0;n=this.ejColumnList;n.scrollerObj.model.scrollTop=0;this.ejFunctionList.refresh(!0);this.refreshColumnList()},n.prototype.refreshColumnList=function(){this.ejColumnList.model.allowVirtualScrolling&&(this.ejColumnList._oldStartValue=null,this.ejColumnList.model.totalItemsCount=0,this.ejColumnList.dummyUl=this.bbdesigner$());this.ejColumnList.refresh(!0)},n.prototype.confirmAction=function(n){if(n){var i=this.textBox.val(),t=(new BoldBIDashboard.DashboardDesignerUtility.ExpressionParsor).parseErrors(this.textArea.val(),this.provider);t&&t.length>0?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.failedToParseExp,IconType.errors,AlertType.Alert,!0,t[0]):this.isAvaliableNames(i)?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""):this.serverValidationExp({selectedExpression:this.expressionContainer.data("e-exp").name===""?this.textBox.val():this.expressionContainer.data("e-exp").name,name:this.textBox.val(),expression:this.textArea.val()},ExpAction.Close)}else this.ejExpDialog.close(),this.excuteExpQuery(),this.hideExpIndicator()},n.prototype.closeConfirmation=function(){var i=this.expressionContainer.data("e-exp"),n,t;i&&i.isEdit?(n=this.textBox.val(),t=this.textArea.val().trim(),n===this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&(n=""),t===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&(t=""),!this.hasExpChanges(i,t)||n&&n.length===0||t&&t.length===0||!this.isValidName(n)||!/^[a-zA-Z0-9- _]*$/.test(n)?(this.ejExpDialog.close(),this.excuteExpQuery(),this.hideExpIndicator()):this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this,dataInfo:{name:n}})):this.textArea.val()!=="Query Expression"&&this.textArea.val()!==""?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.SaveExpression,this.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this,dataInfo:{name:this.textBox.val()}}):(this.ejExpDialog.close(),this.excuteExpQuery(),this.hideExpIndicator())},n.prototype.closeExpDialog=function(n){n.isInteraction&&(this.bbdesigner$("#"+this.id+"_exp_designer_div_WaitingPopup").is(":visible")?(this.hideExpIndicator(),n.cancel=!1,this.excuteExpQuery()):(n.cancel=!0,this.closeConfirmation()))},n.prototype.closeExpression=function(){this.resetSearchBox();this.closeConfirmation()},n.prototype.excuteExpQuery=function(){BoldBIDashboard.DashboardUtil.isEqualObj(this.queryExp,this.tempExp)||BoldBIDashboard.DashboardUtil.invokeMethod(this.callBackModel.callBackInstance,this.callBackModel.callBackMethod,[{isWindowClose:!0,queryExp:this.queryExp}]);this.tempExp=[]},n.prototype.resetDesigner=function(n){n&&this.expLiTag.children().length>0&&(this.expLiTag.empty(),this.scrollerRefresh(this.bodyContainer));this.textBox.val("");this.textArea.val("");this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_desc_heading").text("");this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_example_heading").text("");this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_desc_content").text("");this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_example_content").text("")},n.prototype.saveExpression=function(n){this.resetSearchBox();this.expressionContainer.data("e-exp")&&this.expressionContainer.data("e-exp").isEdit?n&&n.isSelectionChange?this.expressionValidation(ExpAction.Edit,n.isSelectionChange,n.name):this.expressionValidation(ExpAction.Edit):n&&n.isSelectionChange?this.expressionValidation(ExpAction.New,n.isSelectionChange,n.name):this.expressionValidation(ExpAction.New)},n.prototype.expressionValidation=function(n,t,i){var o=this.expressionContainer.data("e-exp"),u=this.textBox.val(),r=this.textArea.val().trim(),f,e;if(this.textArea.val(r),f=!1,u===this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&(u=""),r===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&(r=""),BoldBIDashboard.isNullOrUndefined(u)||u.length!==0?BoldBIDashboard.isNullOrUndefined(r)||r.length!==0?this.isValidName(u)?/^[a-zA-Z0-9- _]*$/.test(u)===!1?(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.expHasSpecialChar,IconType.warning,AlertType.Alert,!1,""),f=!0):r.indexOf("["+u+"]")!==-1?(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.expNotInColumn,IconType.errors,AlertType.Alert,!1,""),f=!0):this.isBalanceBrackets(r)?this.isAvaliableNames(u)?(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""),f=!0):(r.replace(new RegExp("s"),"").toUpperCase().indexOf("TOTAL(")>-1||this.rowExpression.some(function(n){return r.replace(new RegExp("s"),"").toUpperCase().indexOf(n+"(")>-1}))&&!this.isValidRunningExpression(r)?f=!0:o&&o.isEdit?(e=(new BoldBIDashboard.DashboardDesignerUtility.ExpressionParsor).parseErrors(r,this.provider),e&&e.length>0?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",e[0],IconType.errors,AlertType.Alert,!1,""):this.serverValidationExp({selectedExpression:o.name,name:u,expression:r,isSelectionChange:t,selectedExp:i},n)):(e=(new BoldBIDashboard.DashboardDesignerUtility.ExpressionParsor).parseErrors(r,this.provider),e&&e.length>0?(this.isAdd=!1,this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",this.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!0,e[0])):this.serverValidationExp({selectedExpression:"",name:u,expression:r,isSelectionChange:t,selectedExp:i},n)):(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.invalidExpSyntax,IconType.errors,AlertType.Alert,!1,""),f=!0):(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""),f=!0):(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.emptyExp,IconType.warning,AlertType.Alert,!1,""),f=!0):(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.emptyExpName,IconType.warning,AlertType.Alert,!1,""),f=!0),t&&f)this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(o.name))[0]})},n.prototype.isAvaliableNames=function(n){for(var r=this.expressionContainer.data("e-exp"),i=this.ejColumnDropdown.model.dataSource[0].Value,t=0;t<i.length;t++)if(i[t].Name.toLowerCase()===n.toLowerCase()&&r.name.toLowerCase()!==n.toLowerCase())return!0;return!1},n.prototype.isValidRunningExpression=function(n){for(var f,r,e,h,c,v,o,l,y,u=this,i=!0,t=n,a=this.ejColumnDropdown.model.dataSource[0].Value,s=0;s<a.length;s++)f=a[s].Name,t.indexOf("["+f+"]")>-1&&/^[a-zA-Z0-9- _]*$/.test(f)===!0&&(t=t.replace("["+f+"]",""));if(r=null,t.replace(new RegExp("s"),"").toUpperCase().indexOf("TOTAL(")>-1&&(r=t.replace("TOTAL","").toUpperCase().split("[+-*/]+"),r.forEach(function(n){u.rowExpression.some(function(t){return n.indexOf(t)>-1})&&(i=!1,u.dashboardDesigner.modules.util.alertDialog(u.locale.alertDialogTitle.queryExpression,u.locale.dataSource.errorMessageForTotalExpressionContainsRowExpression,IconType.warning,AlertType.Alert,!1,""))})),i){for(this.rowExpression.forEach(function(n){t.replace(new RegExp("s"),"").toUpperCase().indexOf(n+"(")>-1&&(r=t.toUpperCase().replace(n,"").split("[+-*/]+"))}),e=0,h=r;e<h.length;e++)for(c=h[e],i=!1,v=!isNaN(parseInt(c.replace("(","").replace(")",""),10)),o=0,l=this.aggregationList.filter(function(n){return n!=="TOTAL"||n!=="RUNNINGSUM"||n!=="RUNNINGAVG"||n!=="RUNNINGCOUNT"||n!=="RUNNINGMAX"||n!=="RUNNINGMIN"});o<l.length;o++)if(y=l[o],c.toString().replace(new RegExp("s"),"").toUpperCase().indexOf(y)>-1||v){i=!0;break}i||this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.parameterMustBeAnAggregated,IconType.warning,AlertType.Alert,!1,"")}return i},n.prototype.isBalanceBrackets=function(n){for(var i=0,r=!1,t=0;t<n.length;t++){if(r||n[t]!=="("?r||n[t]!==")"||i--:i++,i<0)return!1;n[t]==="'"&&(t===0||n[t-1]!=="\\")&&(r=!r)}return i>0?!1:!0},n.prototype.UpdateMiscellaneousList=function(){for(var r,u,t=this.ejColumnDropdown.model.dataSource[0].Value,i=this.ejColumnDropdown.model.dataSource[this.ejColumnDropdown.model.dataSource.length-1].Value,e=i.length,f=!1,o=function(n){var r=t.indexOf(t.filter(function(t){return t.Name===i[n].Name})[0]);r>-1&&t.splice(r,1)},n=0;n<e;n++)o(n);for(n=0;n<e;n++)i.pop();for(n=0;n<this.queryExp.length;n++){for(r={ID:t.length+n,Name:this.queryExp[n].name,Value:this.queryExp[n].expression,DataType:null},f=!1,u=0;u<t.length;u++)if(t[u].Name===r.Name){f=!0;break}f||t.push(r);i.push(r)}this.ejColumnDropdown.model.dataSource[0].Value=t;this.ejColumnDropdown.model.dataSource[this.ejColumnDropdown.model.dataSource.length-1].Value=i;this.refreshColumnList()},n.prototype.encrptDataSourceInfo=function(n){var t=this.bbdesigner$.extend(!0,{},n);return t.ConnectionProperties&&(t.ConnectionProperties.ConnectString=BoldBIDashboard.DashboardUtil.encryptData(t.ConnectionProperties.ConnectString),t.ConnectionProperties.UserName&&(t.ConnectionProperties.UserName=BoldBIDashboard.DashboardUtil.encryptData(t.ConnectionProperties.UserName)),t.ConnectionProperties.PassWord&&(t.ConnectionProperties.PassWord=BoldBIDashboard.DashboardUtil.encryptData(t.ConnectionProperties.PassWord))),t},n.prototype.serverValidationExp=function(n,t){var i=this.dataset.Name,r=this.dataset.Id,u=this.callBackModel.optionalArgs.isEdit,f=this.encrptDataSourceInfo(this.callBackModel.optionalArgs.datasourceInfo);this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.executeQuery,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.DataDesignViewAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.executeQuery,datasource:f,commandType:CommandMode.Text,dataSetName:i,dataSetId:r,ExpAction:t,isExpression:!0,selectedExpression:n.selectedExpression,Expression:n.name,DisplayText:n.expression,isEdit:u,isQueryDesignerMode:this.dashboardDesigner.isQueryDesignerMode})},{fnction:this.bbdesigner$.proxy(this.expActionResult,this,{expression:n,action:t}),indicator:[this.bbdesigner$.proxy(this.showExpIndicator,this),this.bbdesigner$.proxy(this.hideExpIndicator,this)]},!0)},n.prototype.expActionResult=function(n,t){var h,u,r,f,o,c,s,e,i;if(t.Error){if(this.enableButton(this.saveBtnTag,!0),this.enableButton(this.addBtnTag,!1),BoldBIDashboard.isNullOrUndefined(t.StatusMessage)?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",this.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!1,""):this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",this.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!0,t.StatusMessage),n.expression.isSelectionChange)this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(this.textBox.val()))[0]})}else if(this.ejExpDialog.isOpen()&&t&&t.type)if(h=JSON.parse(t.type),u=this.expressionContainer.data("e-exp"),h.length>0){if(r=n.expression.name,f=n.expression.expression,n.action===ExpAction.New){if(o=!0,this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(r)).length===0)c=this.getEmptyExp(),this.updateExpList(c,r);else{for(s=!0,i=0;i<this.queryExp.length;i++)if(this.queryExp[i].name===r){s=!1;break}s||(o=!1,this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""))}if(o){if(this.queryExp.push({name:r,expression:f}),this.expressionContainer.data("e-exp",{isEdit:!0,name:r,expression:f}),this.enableButton(this.saveBtnTag,!1),this.isAdd){this.switchEditExp();e=this.textBox.val();this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e))[0]});this.isAdd=!1}if(n.expression.isSelectionChange){this.expListClick(n.expression.selectedExp);e=this.textBox.val();this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e))[0]})}}}else if(n.action===ExpAction.Edit){for(i=0;i<this.queryExp.length;i++)this.queryExp[i].expression.indexOf("["+u.name+"]")!==-1&&(this.queryExp[i].expression=this.queryExp[i].expression.replace("["+u.name+"]","["+r+"]"));for(i=0;i<this.queryExp.length;i++)if(this.queryExp[i].name===u.name){if(this.queryExp[i].name=r,this.queryExp[i].expression=f,BoldBIDashboard.isNullOrUndefined(this.queryDesigner)||BoldBIDashboard.isNullOrUndefined(this.queryDesigner.Query)||(this.queryDesigner.Query.QueryDesignerState.Expressions[i].Name=r,this.queryDesigner.Query.QueryDesignerState.Expressions[i].QueryExp=f,this.queryDesigner.dataset.Query.QueryDesignerState.Expressions[i].Name=r,this.queryDesigner.dataset.Query.QueryDesignerState.Expressions[i].QueryExp=f,this.queryDesigner.queryExp[i].name=r,this.queryDesigner.queryExp[i].expression=f,this.queryDesigner.dataset.dataset.Query.QueryDesignerState.Expressions[i].Name=r,this.queryDesigner.dataset.dataset.Query.QueryDesignerState.Expressions[i].QueryExp=f,this.queryDesigner.dataset.queryExp[i].name=r,this.queryDesigner.dataset.queryExp[i].expression=f),this.queryExp[i].name!==u.name&&this.updateExpList(u.name,r),this.expressionContainer.data("e-exp",{isEdit:!0,name:this.queryExp[i].name,expression:this.queryExp[i].expression}),this.enableButton(this.saveBtnTag,!1),n.expression.isSelectionChange){this.expListClick(n.expression.selectedExp);e=this.textBox.val();this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e))[0]})}break}}else if(n.action===ExpAction.Save){for(i=0;i<this.queryExp.length;i++)if(this.queryExp[i].name===u.name){this.queryExp[i].name=r;this.queryExp[i].expression=f;this.queryExp[i].name!==u.name&&this.updateExpList(u.name,r);this.enableButton(this.saveBtnTag,!1);this.switchEditExp();e=this.textBox.val();this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e))[0]});break}}else if(n.action===ExpAction.Close){for(u.name===""&&this.queryExp.push({name:this.textBox.val(),expression:this.textArea.val()}),i=0;i<this.queryExp.length;i++)if(this.queryExp[i].name===u.name){this.queryExp[i].name=r;this.queryExp[i].expression=f;this.queryExp[i].name!==u.name&&this.updateExpList(u.name,r);break}this.ejExpDialog.close();this.hideExpIndicator();this.excuteExpQuery()}else n.action===ExpAction.Remove&&(this.queryExp.length===0?this.enableButton(this.addBtnTag,!1):this.enableButton(this.addBtnTag,!0));this.UpdateMiscellaneousList();(n.action===ExpAction.New||n.action===ExpAction.Save||n.action===ExpAction.Edit)&&this.updateSuccessMessage()}else this.enableButton(this.saveBtnTag,!0)},n.prototype.updateSuccessMessage=function(){var n=this;this.dashboardDesigner.element.find("#"+this.id+"_exp_success_message_wrap").css("display","block");setTimeout(function(){n.dashboardDesigner.element.find("#"+n.id+"_exp_success_message_wrap").css("display","none")},3e3)},n.prototype.showExpIndicator=function(){BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_add_btn"),!1);BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_save_btn"),!1);BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_close_btn"),!1);this.ejIndicator.show()},n.prototype.hideExpIndicator=function(){BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_add_btn"),!0);BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_save_btn"),!1);BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_close_btn"),!0);this.ejIndicator.hide()},n.prototype.destroy=function(){this.unWiredEvents();BoldBIDashboard.DashboardUtil.destroyEjObjects(this.dashboardDesigner.element.find("#"+this.id+"_exp_designer"));this.dashboardDesigner.element.find("#"+this.id+"_exp_designer").length>0&&this.dashboardDesigner.element.find("#"+this.id+"_exp_designer").remove()},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.QueryExpression",InternalQueryExpression,window),function(n){n[n.New=0]="New";n[n.Edit=1]="Edit";n[n.Save=2]="Save";n[n.Close=3]="Close";n[n.Remove=4]="Remove"}(ExpAction||(ExpAction={}));InternalExpressionParsor=function(){function n(){this.revfnctions={};this.expErrors=[];this.expErrors=[]}return n.prototype.parseExpression=function(n){var i,t;for(this.expression=n,this.provider="SQL",this.expErrors=[],this.parseDateExp(),this.parseNumExp(),this.parseStrExp(),this.parseCondExp(),i=Object.keys(this.revfnctions),t=i.length-1;t>=0;t--)this.revfnctions[i[t]]&&(this.expression=this.expression.split(i[t]).join(this.revfnctions[i[t]]));return this.expression},n.prototype.parseErrors=function(n,t){return this.parseExpression(n,t),this.expErrors},n.prototype.parseNumExp=function(){BoldBIDashboard.DashboardUtil.contains(this.expression,"abs(",!0)&&(this.expression=this.parseNumberExp(this.expression,"abs("));BoldBIDashboard.DashboardUtil.contains(this.expression,"acos(",!0)&&(this.expression=this.parseNumberExp(this.expression,"acos("));BoldBIDashboard.DashboardUtil.contains(this.expression,"asin(",!0)&&(this.expression=this.parseNumberExp(this.expression,"asin("));BoldBIDashboard.DashboardUtil.contains(this.expression,"atan(",!0)&&(this.expression=this.parseNumberExp(this.expression,"atan("));BoldBIDashboard.DashboardUtil.contains(this.expression,"cos(",!0)&&(this.expression=this.parseNumberExp(this.expression,"cos("));BoldBIDashboard.DashboardUtil.contains(this.expression,"cot(",!0)&&(this.expression=this.parseNumberExp(this.expression,"cot("));BoldBIDashboard.DashboardUtil.contains(this.expression,"ceil(",!0)&&(this.expression=this.parseNumberExp(this.expression,"ceil("));BoldBIDashboard.DashboardUtil.contains(this.expression,"degrees(",!0)&&(this.expression=this.parseNumberExp(this.expression,"degrees("));BoldBIDashboard.DashboardUtil.contains(this.expression,"exp(",!0)&&(this.expression=this.parseNumberExp(this.expression,"exp("));BoldBIDashboard.DashboardUtil.contains(this.expression,"floor(",!0)&&(this.expression=this.parseNumberExp(this.expression,"floor("));BoldBIDashboard.DashboardUtil.contains(this.expression,"log(",!0)&&(this.expression=this.parseNumberExp(this.expression,"log("));BoldBIDashboard.DashboardUtil.contains(this.expression,"mod(",!0)&&(this.expression=this.parseNumberExp(this.expression,"mod("));BoldBIDashboard.DashboardUtil.contains(this.expression,"pi(",!0)&&(this.expression=this.parseNumberExp(this.expression,"pi("));BoldBIDashboard.DashboardUtil.contains(this.expression,"power(",!0)&&(this.expression=this.parseNumberExp(this.expression,"power("));BoldBIDashboard.DashboardUtil.contains(this.expression,"totalpercentage(",!0)&&(this.expression=this.parseNumberExp(this.expression,"totalpercentage("));BoldBIDashboard.DashboardUtil.contains(this.expression,"radians(",!0)&&(this.expression=this.parseNumberExp(this.expression,"radians("));BoldBIDashboard.DashboardUtil.contains(this.expression,"round(",!0)&&(this.expression=this.parseNumberExp(this.expression,"round("));BoldBIDashboard.DashboardUtil.contains(this.expression,"sign(",!0)&&(this.expression=this.parseNumberExp(this.expression,"sign("));BoldBIDashboard.DashboardUtil.contains(this.expression,"sin(",!0)&&(this.expression=this.parseNumberExp(this.expression,"sin("));BoldBIDashboard.DashboardUtil.contains(this.expression,"sqrt(",!0)&&(this.expression=this.parseNumberExp(this.expression,"sqrt("));BoldBIDashboard.DashboardUtil.contains(this.expression,"tan(",!0)&&(this.expression=this.parseNumberExp(this.expression,"tan("))},n.prototype.parseNumberExp=function(n,t){var f=this.getExpCode(),e=this.trimEnd(t,"("),r=0,i=n,h;this.revfnctions[f]=this.updateNumberFunc(e).toUpperCase();do if(r=i.toLowerCase().lastIndexOf(t),r!==-1){var u=r+t.length,o=this.getFunctionEndIndex(u,i),c=this.getParameters(i,u,o-u-1),l=i.substr(0,r)+f+"(",s="";this.provider==="SQL"&&(s=this.getSQLNumberExp(e,c));h=")"+i.substr(o);i=l+s+h}while(r!==-1);return i},n.prototype.updateNumberFunc=function(n){return n},n.prototype.getSQLNumberExp=function(n,t){var i="";switch(n){case"pi":BoldBIDashboard.isNullOrUndefined(t)?i=i:this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"abs":case"acos":case"asin":case"atan":case"cos":case"cot":case"degrees":case"exp":case"floor":case"log":case"totalpercentage":case"radians":case"sign":case"sin":case"sqrt":case"tan":t&&t.length===1?i+=t[0]:this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"power":t&&t.length===2?i+=t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"mod":t&&t.length===2?i+=t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"round":t&&t.length===1?(i+=t[0],this.provider==="SQL"&&(i+=",0")):t&&(t.length===1||t.length===2)?i+=t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in"+n+"Expression")}return i},n.prototype.parseDateExp=function(){this.provider==="SQL"&&(BoldBIDashboard.DashboardUtil.contains(this.expression,"currentyear(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"currentyear(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"currentmonth(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"currentmonth(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"dateadd(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"dateadd(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"datesub(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"datesub(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"datename(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"datename(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"datepart(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"datepart(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"daydiff(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"daydiff(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"today(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"today(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"previousyear(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"previousyear(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"previousmonth(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"previousmonth(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"yesterday(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"yesterday(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"day(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"day(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"hour(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"hour(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"minute(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"minute(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"month(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"month(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"now(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"now(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"year(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"year(")))},n.prototype.parseSQLDateExp=function(n,t){var f=this.getExpCode(),i=this.trimEnd(t,"("),u=0,r=n;this.revfnctions[f]=this.updateDateFunc(i).toUpperCase();do if(u=r.toLowerCase().lastIndexOf(t),u!==-1){var e=u+t.length,o=this.getFunctionEndIndex(e,r),s=this.getParameters(r,e,o-e-1),h=i==="today"||i==="yesterday"||i==="currentyear"||i==="currentmonth"||i==="previousyear"||i==="previousmonth"?r.substr(0,u)+f:r.substr(0,u)+f+"(",c=this.getSQLDateExp(i,s),l=i==="today"||i==="yesterday"||i==="currentyear"||i==="currentmonth"||i==="previousyear"||i==="previousmonth"?r.substr(o):")"+r.substr(o);r=h+c+l}while(u!==-1);return r},n.prototype.updateDateFunc=function(n){var t;switch(n){case"dateadd":case"datesub":t="dateadd";break;case"daydiff":t="datediff";break;case"now":t="getdate";break;case"week":case"hour":case"minute":case"datepart":t="datepart";break;case"day":case"month":case"year":case"datename":case"yesterday":case"currentyear":case"currentmonth":case"previousmonth":case"previousyear":t=n;break;case"today":t="CAST(GETDATE() AS DATE)"}return t},n.prototype.getSQLDateExp=function(n,t){var i="";switch(n){case"dateadd":t&&t.length===3?i+=t[0]+","+t[1]+","+t[2]:this.expErrors.push("Invalid Arguments in"+n+"Expression");break;case"datesub":t&&t.length===1?i+="D, 0,"+t[0]:t&&t.length===2?i+="D, -"+t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in"+n+"Expression");break;case"daydiff":t&&t.length===2?i+="D,"+t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in"+n+"Expression");break;case"week":case"hour":case"minute":t&&t.length===1?i+=n.toUpperCase()+","+t[0]:this.expErrors.push("Invalid Arguments in"+n+"Expression");break;case"datename":case"datepart":t&&t.length===1&&(i+="D,"+t[0]);t&&t.length===2?i+=t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in"+n+"Expression");break;case"day":case"month":case"year":t&&t.length===1?i+=t[0]:this.expErrors.push("Invalid Arguments in"+n+"Expression")}return i},n.prototype.parseCondExp=function(){this.provider==="SQL"&&(BoldBIDashboard.DashboardUtil.contains(this.expression,"coalesce(",!0)&&(this.expression=this.parseSQLCondExp(this.expression,"coalesce(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"ifnull(",!0)&&(this.expression=this.parseSQLCondExp(this.expression,"ifnull(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"if(",!0)&&(this.expression=this.parseSQLCondExp(this.expression,"if(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"isnull(",!0)&&(this.expression=this.parseSQLCondExp(this.expression,"isnull(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"isnotnull(",!0)&&(this.expression=this.parseSQLCondExp(this.expression,"isnotnull(")))},n.prototype.parseSQLCondExp=function(n,t){var f=this.trimEnd(t,"("),r=0,i=n;if(f==="ifnull")i=this.parseSQLIFNullExp(n,t);else do if(r=i.toLowerCase().lastIndexOf(t),r!==-1){var e=this.getExpCode(),u=r+t.length,o=this.getFunctionEndIndex(u,i),s=this.getParameters(i,u,o-u-1),h=i.substr(0,r)+e,c=i.substr(o);this.revfnctions[e]=this.getSQLCondExp(f,s);i=h+c}while(r!==-1);return i},n.prototype.parseSQLIFNullExp=function(n,t){var f=this.getExpCode(),o=this.trimEnd(t,"("),r=0,i=n;this.revfnctions[f]="ISNULL";do if(r=i.toLowerCase().lastIndexOf(t),r!==-1){var u=r+t.length,e=this.getFunctionEndIndex(u,i),s=this.getParameters(i,u,e-u-1),h=i.substr(0,r)+f+"(",c=this.getSQLCondExp(o,s),l=")"+i.substr(e);i=h+c+l}while(r!==-1);return i},n.prototype.getSQLCondExp=function(n,t){var i="",u,r;switch(n){case"if":t&&t.length===3?i+=" CASE WHEN "+t[0]+" THEN "+t[1]+" ELSE "+t[2]+" END ":this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"ifnull":t&&t.length===2?i+=t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"isnull":t&&t.length===1?i+=" CASE WHEN "+t[0]+" IS NULL THEN 'true' ELSE 'false' END ":this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"isnotnull":t&&t.length===1?i+=" CASE WHEN "+t[0]+" IS NULL THEN 'false' ELSE 'true' END ":this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"coalesce":if(u=!0,t&&t.length>1)for(r=0;r<t.length;r++)r===t.length-1&&(u=!1),i+=u?t[r].trim()+",":t[r].trim();else this.expErrors.push("Invalid Arguments in "+n+" Expression")}return i},n.prototype.parseStrExp=function(){BoldBIDashboard.DashboardUtil.contains(this.expression,"char(",!0)&&!BoldBIDashboard.DashboardUtil.contains(this.expression,"to_char(",!0)&&(this.expression=this.parseStringExp(this.expression,"char("));BoldBIDashboard.DashboardUtil.contains(this.expression,"concat(",!0)&&(this.expression=this.parseStringExp(this.expression,"concat("));BoldBIDashboard.DashboardUtil.contains(this.expression,"contains(",!0)&&(this.expression=this.parseStringExp(this.expression,"contains("));BoldBIDashboard.DashboardUtil.contains(this.expression,"endswith(",!0)&&(this.expression=this.parseStringExp(this.expression,"endswith("));BoldBIDashboard.DashboardUtil.contains(this.expression,"left(",!0)&&(this.expression=this.parseStringExp(this.expression,"left("));BoldBIDashboard.DashboardUtil.contains(this.expression,"len(",!0)&&(this.expression=this.parseStringExp(this.expression,"len("));BoldBIDashboard.DashboardUtil.contains(this.expression,"lower(",!0)&&(this.expression=this.parseStringExp(this.expression,"lower("));BoldBIDashboard.DashboardUtil.contains(this.expression,"ltrim(",!0)&&(this.expression=this.parseStringExp(this.expression,"ltrim("));BoldBIDashboard.DashboardUtil.contains(this.expression,"max(",!0)&&(this.expression=this.parseStringExp(this.expression,"max("));BoldBIDashboard.DashboardUtil.contains(this.expression,"min(",!0)&&(this.expression=this.parseStringExp(this.expression,"min("));BoldBIDashboard.DashboardUtil.contains(this.expression,"replace(",!0)&&(this.expression=this.parseStringExp(this.expression,"replace("));BoldBIDashboard.DashboardUtil.contains(this.expression,"right(",!0)&&(this.expression=this.parseStringExp(this.expression,"right("));BoldBIDashboard.DashboardUtil.contains(this.expression,"rtrim(",!0)&&(this.expression=this.parseStringExp(this.expression,"rtrim("));BoldBIDashboard.DashboardUtil.contains(this.expression,"startswith(",!0)&&(this.expression=this.parseStringExp(this.expression,"startswith("));BoldBIDashboard.DashboardUtil.contains(this.expression,"substr(",!0)&&(this.expression=this.parseStringExp(this.expression,"substr("));BoldBIDashboard.DashboardUtil.contains(this.expression,"trim(",!0)&&(this.expression=this.parseStringExp(this.expression,"trim("))},n.prototype.parseStringExp=function(n,t){var c=this.getExpCode(),i=this.trimEnd(t,"("),u=0,r=n,e=!0,s,f,h;this.revfnctions[c]=this.updateStringFunc(i).toUpperCase();do if(u=r.toLowerCase().lastIndexOf(t),u!==-1){var o=u+t.length,l=this.getFunctionEndIndex(o,r),a=this.getParameters(r,o,l-o-1);(i==="max"||i==="min"||i==="startswith"||i==="endswith"||i==="contains")&&(e=!1);s=r.substr(0,u)+(e?c+"(":"");f="";this.provider==="SQL"&&(f=this.getSQLStringExp(i,a));h=(e?")":"")+r.substr(l);r=i==="max"||i==="min"?s+"("+f+")"+h:s+f+h}while(u!==-1);return r},n.prototype.updateStringFunc=function(n){var t;switch(n){case"contains":case"endswith":case"startswith":case"max":case"min":t="";break;case"substr":t="substring";break;default:t=n}return t},n.prototype.getSQLStringExp=function(n,t){var i="",u,r,f;switch(n){case"char":case"len":case"lower":case"ltrim":case"rtrim":case"trim":case"upper":case"max":case"min":t&&t.length===1?i+=t[0].trim():this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"left":case"right":t&&t.length===2?i+=t[0].trim()+","+t[1].trim():this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"replace":t&&t.length===3?i+=t[0].trim()+","+t[1].trim()+","+t[2].trim():this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"concat":if(u=!0,t&&t.length>1)for(r=0;r<t.length;r++)r===t.length-1&&(u=!1),i+=u?t[r].trim()+",":t[r].trim();else this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"contains":case"endswith":case"startswith":t&&t.length===2?(f=this.customizeSingleQuoteValues(n,t[1]),i+="CASE WHEN "+t[0]+" LIKE "+f+" THEN 'true' ELSE 'false' END"):this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"substr":t&&t.length===3?i+=t[0].trim()+","+t[1].trim()+","+t[2].trim():this.expErrors.push("Invalid Arguments in "+n+" Expression")}return i},n.prototype.customizeSingleQuoteValues=function(n,t){var i=t,r="",u=null,f;if(i=i.trim(),BoldBIDashboard.DashboardUtil.contains(i,"'",!0))for(f=0;f<i.length;f++)i[f]!=="'"&&(r+=i[f]);if(r.length>0)switch(n){case"contains":u="'%"+r+"%'";break;case"startswith":u="'"+r+"%'";break;case"endswith":u="'%"+r+"'"}else u=i;return u},n.prototype.getParameters=function(n,t,i){var u=n.substr(t,i);if(u.length===0)return null;for(var o=0,f=!1,r=0,e=0,s=[];r<u.length;r++)f||u[r]!==")"||o--,f||u[r]!=="("||o++,u[r]==="'"&&(r===0||u[r-1]!=="\\")&&(f=!f),f||o!==0||u[r]!==","||(s.push(u.substr(e,r-e)),e=r+1);return s.push(u.substr(e,r-e)),s},n.prototype.getFunctionEndIndex=function(n,t){for(var i=n,u=1,r=!1;u>0;){if(i>=t.length)throw"Invalid Expression";r||t[i]!==")"||u--;r||t[i]!=="("||u++;(t[i]==='"'||t[i]==="'")&&(i===0||t[i-1]!=="\\")&&(r=!r);i++}return i},n.prototype.getExpCode=function(){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return"@"+n+"@"},n.prototype.trimEnd=function(n,t){var i=n.lastIndexOf(t);return i===-1?n:n.trim().slice(0,i)},n}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.ExpressionParsor",InternalExpressionParsor,window);
