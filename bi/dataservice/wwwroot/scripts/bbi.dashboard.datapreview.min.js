/*!
*  filename: bbi.dashboard.datapreview.min.js
*  version : 8.1.41
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
var InternalDataPreviewDialog=function(){function n(n){this.designer=null;this.gridInstance=null;this.dataSourceList={};this.searchItems=[];this.locale=null;this.designer=n;this.bbdesigner$=this.designer.bbdesigner$;this.locale=n.getLocalizationContent();this.id=this.designer._id+"_datapreivew_mode-dialog"}return n.prototype.wireEvents=function(){this.dsPreviewTag.on("keyup","#"+this.id+"_panelSearch",this.bbdesigner$.proxy(this.onSearchDataPreviewAction,this));this.dsPreviewTag.on("click",".bbi-dbrd-close-icon",this.bbdesigner$.proxy(this.closeDataPreviewDialog,this));this.dsPreviewTag.on("click",".bbi-dbrd-designer-close",this.bbdesigner$.proxy(this.onSearchCloseClick,this));this.dsPreviewTag.on("focusin","#"+this.id+"_panelSearch",this.bbdesigner$.proxy(this.onDataPreviewSearchTextFocusIn,this));this.dsPreviewTag.on("focusout","#"+this.id+"_panelSearch",this.bbdesigner$.proxy(this.onDataPreviewSearchTextFocusOut,this));this.bbdesigner$(window).on("resize",this.bbdesigner$.proxy(this.resizeDataPreviewWindow,this))},n.prototype.unWireEvents=function(){this.dsPreviewTag.off("keyup","#"+this.id+"_panelSearch",this.bbdesigner$.proxy(this.onSearchDataPreviewAction,this));this.dsPreviewTag.off("click",".bbi-dbrd-close-icon",this.bbdesigner$.proxy(this.closeDataPreviewDialog,this));this.dsPreviewTag.off("click",".bbi-dbrd-designer-close",this.bbdesigner$.proxy(this.onSearchCloseClick,this));this.dsPreviewTag.off("focusin","#"+this.id+"_panelSearch",this.bbdesigner$.proxy(this.onDataPreviewSearchTextFocusIn,this));this.dsPreviewTag.off("focusout","#"+this.id+"_panelSearch",this.bbdesigner$.proxy(this.onDataPreviewSearchTextFocusOut,this));this.bbdesigner$(window).off("resize",this.bbdesigner$.proxy(this.resizeDataPreviewWindow,this))},n.prototype.renderDataPreviewContainer=function(n){this.selectedDatasourceId=this.designer.model.dataPreviewId;var t=this.dsPreviewTag=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-mode-dlg","",{width:"100%",height:"100%"},{id:this.id});this.contentWrap=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-mode-content-wrap bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{},{id:this.id+"_content_wrap"});this.renderContentWrapper();this.dsPreviewTag.append(this.getHeader(),this.contentWrap);n.append(t);this.renderScrollerContainer();this.populateDatasourceList();this.unWireEvents();this.wireEvents()},n.prototype.getHeader=function(){var n=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-mode-header","",{},{}),i=BoldBIDashboard.buildTag("span.bbi-dbrd-datapreview-icon","",{},{}),r=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-mode-title",this.locale.dataPreview.dataPreview,{},{}),t=BoldBIDashboard.buildTag("div.bbi-dbrd-icon-container","",{},{}),u=BoldBIDashboard.buildTag("div.bbi-dbrd-close-icon bbi-dbrd-designer-hoverable","",{},{"data-tooltip":"Close"});return t.append(u),n.append(i,r,t),n},n.prototype.renderContentWrapper=function(){var t=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-content-panel","",{width:this.designer.element.width()+"px"},{id:this.id+"_contentpanel"}),i=this.dsLeftPanel=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-datasource-list","",{width:"330px"},{id:this.id+"_left_datasource_list"}),n=this.gridRightPanel=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-grid-panel","",{width:this.designer.element.width()-331+"px"},{id:this.id+"_right_grid_container"}),r=this.gridContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-grid-cotainer","",{width:this.designer.element.width()-381+"px",height:"calc(100% - 50px)"},{id:this.id+"_gridcontrol_container"}),u=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-grid-limits","",{},{id:this.id+"_datapreview_grid_record_count"});n.append(u);n.append(r);this.appendSpinningWidget(this.gridContainer);t.append(i,n);this.contentWrap.append(t);this.renderSearchPanel()},n.prototype.appendSpinningWidget=function(n){var t=BoldBIDashboard.buildTag("div.bbi-background-waiting-popup","",{display:"none",top:"0px",position:"absolute",width:"100%",height:"100%","background-color":"rgba(255, 255, 255, 0.4)","z-index":"103"}),i=BoldBIDashboard.buildTag("div.bbi-dashboard-spinning","",{});i.append(this.designer.getLoadingSvgElement("var(--datapreview-loading-indicator-color)"));t.append(i);n.append(t)},n.prototype.renderScrollerContainer=function(){this.expandablePanel=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-panel-content-wrapper bbi-dbrd-designer-scroll-style-3","",{},{id:this.id+"_designerDataPreview"});var n=BoldBIDashboard.buildTag("div","",{},{}),i=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_scrollContentDataPreview"}),t=BoldBIDashboard.buildTag("div","",{display:"none"},{id:this.id+"_datapreview_empty_msg","class":"bbi-dbrd-datapreview-empty-wrapper"}),r=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-font bbi-dbrd-datapreview-empty-msg",this.locale.dataPreview.noDatasourceFound,{},{});t.append(r);n.append(i).append(t);this.expandablePanel.append(n);this.expandablePanel.BoldBIDashboardScroller({scrollerSize:this.designer.scrollerSize.scrollSize,enableTouchScroll:!1,autoHide:!0,buttonSize:this.designer.scrollerSize.buttonSize});this.dsLeftPanel.append(this.expandablePanel);this.updateScrollerSize();this.expandablePanel.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup bbi-designer-loader",template:this.designer.getWaitingPopupTemplate()})},n.prototype.renderSearchPanel=function(){var t=BoldBIDashboard.buildTag("div.bbi-dbrd-searchpanel-container","",{},{id:this.id+"_searchPanel_container"});this.headerPanel=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-search-panel-wrapper","",{},{id:this.id+"_dataSearchPanel"});var n=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-autocomplete bbi-dbrd-datapreview-font","",{},{id:this.id+"_data_autocomplete"}),i=BoldBIDashboard.buildTag("input.bbi-autocomplete bbi-dbrd-datapreview-font bbi-dbrd-datapreview-search-box bbi-dbrd-datapreview-watermark bbi-dbrd-datapreview-boxshadow e-js e-input","",{},{type:"text",placeholder:"Search Datasource",id:this.id+"_panelSearch"}),r=BoldBIDashboard.buildTag("span.bbi-dbrd-designer-icon bbi-dbrd-designer-search","",{},{id:this.id+"_searchIcon"});n.append(i);n.append(r);this.headerPanel.append(n);t.append(this.headerPanel);this.dsLeftPanel.append(t)},n.prototype.onSearchDataPreviewAction=function(n){var t;if(!BoldBIDashboard.isNullOrUndefined(n)&&n.keyCode!==13){var r=Object.keys(this.dataSourceList),u=this.dsPreviewTag.find("#"+this.id+"_panelSearch"),i=this.dsPreviewTag.find("#"+this.id+"_scrollContentDataPreview");BoldBIDashboard.DashboardUtil.destroyEjObjects(i);i.empty();t=u.val();t.length>0?(this.dsPreviewTag.find("#"+this.id+"_searchIcon").addClass("bbi-dbrd-designer-close").removeClass("bbi-dbrd-designer-search"),this.searchItems=this.getAvailablePanelItems(r,t),this.renderDataSourceListItem(!0),this.showEmptyMsgItems(this.searchItems.length>0)):(this.searchItems=[],this.dsPreviewTag.find("#"+this.id+"_searchIcon").addClass("bbi-dbrd-designer-search").removeClass("bbi-dbrd-designer-close"),this.renderDataSourceListItem(!1),this.showEmptyMsgItems(!0))}},n.prototype.onSearchCloseClick=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)){var t=this.dsPreviewTag.find("#"+this.id+"_scrollContentDataPreview");BoldBIDashboard.DashboardUtil.destroyEjObjects(t);t.empty();this.dsPreviewTag.find("#"+this.id+"_panelSearch").val("");this.dsPreviewTag.find("#"+this.id+"_searchIcon").addClass("bbi-dbrd-designer-search").removeClass("bbi-dbrd-designer-close");this.renderDataSourceListItem(!1);this.showEmptyMsgItems(!0)}},n.prototype.getAvailablePanelItems=function(n,t){var r,i;if(!BoldBIDashboard.isNullOrUndefined(n)&&!BoldBIDashboard.isNullOrUndefined(t)){for(r=[],i=0;i<n.length;i++)BoldBIDashboard.DashboardUtil.contains(n[i],t,!0)&&r.push(n[i]);return r}},n.prototype.onDataPreviewSearchTextFocusIn=function(n){var t=this.bbdesigner$(n.currentTarget.parentElement);t.addClass("e-focus")},n.prototype.onDataPreviewSearchTextFocusOut=function(n){var t=this.bbdesigner$(n.currentTarget.parentElement);t.hasClass("e-focus")&&t.removeClass("e-focus")},n.prototype.showEmptyMsgItems=function(n){this.expandablePanel.find("#"+this.id+"_datapreview_empty_msg").css("display",n?"none":"table")},n.prototype.closeDataPreviewDialog=function(n){this.dsPreviewTag.css("display","none");var t={element:null,data:n},i={mode:BoldBIDashboard.Designer.mode.datapreview,event:"DataPreviewModeDialogClose",source:t};this.designer._trigger("actionComplete",{eventType:BoldBIDashboard.DashboardDesignerEvent.DataPreviewModeDialogClose,data:i})},n.prototype.showDataPreviewIndicator=function(){var n=this.expandablePanel.data("BoldBIDashboardWaitingPopup");BoldBIDashboard.isNullOrUndefined(n)||n.show()},n.prototype.hideDataPreviewIndicator=function(){var n=this.expandablePanel.data("BoldBIDashboardWaitingPopup");BoldBIDashboard.isNullOrUndefined(n)||n.hide()},n.prototype.populateDatasourceList=function(){this.designer.modules.util.doAjaxPost("POST",this.designer.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.GetDatasourceList,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.DataPreviewAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.GetDatasourceList})},{fnction:this.bbdesigner$.proxy(this.GetDatasourceList,this),indicator:[this.bbdesigner$.proxy(this.showDataPreviewIndicator,this),this.bbdesigner$.proxy(this.hideDataPreviewIndicator,this)]})},n.prototype.GetDatasourceList=function(n){if(!BoldBIDashboard.isNullOrUndefined(n)&&n.length>0){for(var t=0;t<n.length;t++)this.dataSourceList[n[t].Name]=n[t].Id;this.renderDataSourceListItem()}},n.prototype.updateScrollerSize=function(){var n=this.dsPreviewTag.height()-this.headerPanel.height()-65;this.expandablePanel.height(n+"px");this.expandablePanel.data("BoldBIDashboardScroller")&&(this.expandablePanel.data("BoldBIDashboardScroller").setModel({height:n+"px"}),this.expandablePanel.data("BoldBIDashboardScroller").refresh())},n.prototype.renderDataSourceListItem=function(n){var i=n?this.searchItems:Object.keys(this.dataSourceList),r,s=this.dsPreviewTag.find("#"+this.id+"_scrollContentDataPreview"),u,t,f,e,o;if(i.length>0){for(u=BoldBIDashboard.buildTag("ul.bbi-dbrd-datapreview-ultag","",{},{}),t=0;t<i.length;t++)r=BoldBIDashboard.buildTag("li.bbi-dbrd-datapreview-litag","",{},{"data-tooltip":i[t],id:this.dataSourceList[i[t]]+"_litag"}),f=BoldBIDashboard.buildTag("span.bbi-dbrd-datapreview-datasource-icon","",{},{}),e=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-hoverable bbi-dbrd-datapreview-name",i[t],{},{"data-tooltip":i[t],id:this.dataSourceList[i[t]]}),r.append(f,e),u.append(r),r.bind("click",this.bbdesigner$.proxy(this.loadDataSourceData,this,i[t],this.dataSourceList[i[t]]));s.append(u)}this.updateScrollerSize();o=this.dsLeftPanel.find("#"+this.selectedDatasourceId+"_litag");o.addClass("e-active");this.hideDataPreviewIndicator();BoldBIDashboard.isNullOrUndefined(n)&&this.selectedDataPreivewItem()},n.prototype.selectedDataPreivewItem=function(){this.updatewaitingIndicatorPosition();this.designer.modules.util.doAjaxPost("POST",this.designer.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.GetPreviewData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.DataPreviewAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.GetPreviewData,dataPreviewId:this.selectedDatasourceId})},{fnction:this.bbdesigner$.proxy(this.loadPreviewGrid,this),indicator:[this.bbdesigner$.proxy(this.showLoadingIndicator,this,this.gridContainer)]})},n.prototype.showLoadingIndicator=function(n){n.find(".bbi-background-waiting-popup").show()},n.prototype.hideLoadingIndicator=function(n){n.find(".bbi-background-waiting-popup").hide()},n.prototype.loadPreviewGrid=function(n){var t,i,r,u;BoldBIDashboard.isNullOrUndefined(n)||n.HasError?(this.hideLoadingIndicator(this.gridContainer),this.showControlError(this.gridContainer,n)):BoldBIDashboard.isNullOrUndefined(n.table)||BoldBIDashboard.isNullOrUndefined(n.type)||(this.removeControlError(this.gridContainer),this.gridContainer.css({display:"block"}),this.tableType=JSON.parse(n.type),t=JSON.parse(n.table),i=this.generateColumns(this.tableType),this.gridContainer.hasClass("e-datapreview-grid")?BoldBIDashboard.isNullOrUndefined(this.gridInstance)||(this.gridContainer.find(".e-griditem").show(),this.gridInstance.dataSource=t,this.gridInstance.columns=i):(this.gridContainer.addClass("e-datapreview-grid"),r=BoldBIDashboard.buildTag("div.e-griditem e-dbrd-widget bbi-dbrd-control","",{},{id:"grid_Container"}),u=BoldBIDashboard.buildTag("div.bbi-designer-grid-table","",{},{id:"ViewElement",cellspacing:"0",cellpadding:"0"}),r.append(u),this.gridContainer.append(r),ejdashboard.grids.Grid.Inject(ejdashboard.grids.Group,ejdashboard.grids.Filter,ejdashboard.grids.Page,ejdashboard.grids.Sort,ejdashboard.grids.Reorder,ejdashboard.grids.Scroll,ejdashboard.grids.Resize,ejdashboard.grids.ColumnMenu,ejdashboard.grids.ContextMenu),this.gridInstance=new ejdashboard.grids.Grid({dataSource:t,enablePersistence:!1,allowSorting:!1,allowFiltering:!1,height:"100%",width:"100%",gridLines:"Both",columns:i,dataBound:this.bbdesigner$.proxy(this.gridDataPopulated,this),actionBegin:this.bbdesigner$.proxy(this.actionBegin,this),actionComplete:this.bbdesigner$.proxy(this.actionComplete,this)}),this.gridInstance.appendTo(u[0])),n.TotalRowCount<1e3?this.designer.element.find("#"+this.id+"_datapreview_grid_record_count").html("<strong> ".concat(this.locale.dataPreview.noteText+":","  <\/strong> ").concat(this.locale.dataPreview.maximumRecordLimit,"  ").concat(n.TotalRowCount,"  ").concat(this.locale.dataPreview.totalRecordCount," ").concat(n.TotalRowCount," ").concat(this.locale.dataPreview.recordCountDisply)):this.designer.element.find("#"+this.id+"_datapreview_grid_record_count").html("<strong> ".concat(this.locale.dataPreview.noteText+":"," <\/strong> ").concat(this.locale.dataPreview.maximumRecordLimit," ").concat(this.locale.dataPreview.previewCountDefaultValue," ").concat(this.locale.dataPreview.totalRecordCount," ").concat(n.TotalRowCount," ").concat(this.locale.dataPreview.recordCountDisply)))},n.prototype.gridDataPopulated=function(){this.hideLoadingIndicator(this.gridContainer)},n.prototype.actionBegin=function(n){n.requestType==="sorting"&&this.showLoadingIndicator(this.gridContainer)},n.prototype.actionComplete=function(n){n.requestType==="sorting"&&this.hideLoadingIndicator(this.gridContainer)},n.prototype.generateColumns=function(n){for(var i,r=[],t=0;t<n.length;t++)n[t].IsVisible===!0&&(i={},i.field=n[t].ID,i.headerText=n[t].Name,i.width=150,i.textAlign=n[t].DataType==="Integer"||n[t].DataType==="Real"?"right":"left",r.push(i));return r},n.prototype.loadDataSourceData=function(n,t,i){if(!BoldBIDashboard.isNullOrUndefined(i)){var r=this.dsLeftPanel.find(".e-active");r.removeClass("e-active");this.bbdesigner$(i.currentTarget).addClass("e-active")}this.selectedDatasourceId=t;this.designer.modules.util.doAjaxPost("POST",this.designer.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.GetPreviewData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.DataPreviewAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.GetPreviewData,dataPreviewId:t})},{fnction:this.bbdesigner$.proxy(this.loadPreviewGrid,this),indicator:[this.bbdesigner$.proxy(this.showLoadingIndicator,this,this.gridContainer)]})},n.prototype.showControlError=function(n,t){var i=n,u;i.children(".bbi-dbrd-control").css({display:"none"});this.removeControlError(i);var r=BoldBIDashboard.buildTag("div.bbi-dbrd-control-error bbi-dbrd-align-center","",{},{}),e=BoldBIDashboard.buildTag("div.bbi-widget-error-icon e-dbrd-hoverable","",{"data-tooltip":"Data Retrieval Error"},{}),o=BoldBIDashboard.buildTag("div.e-dbrd-controlError-msg",this.locale.errorMessage.dataRetrievalError,{},{}),s=BoldBIDashboard.buildTag("div.bbi-dbrd-link-btn",this.locale.errorMessage.knowMore,{},{}),f=BoldBIDashboard.buildTag("button.bbi-dbrd-reload-retrievalerror-icon e-dbrd-bbi-reload-button bbi-dbrd-designer-hand-cursor bbi-dbrd-refresh-link-btn","",{},{type:"button"}),h=BoldBIDashboard.buildTag("span",this.locale.tableSelectorWindow.reloadButtonText,{},{});r.append(e,o,s);i.css({display:"table"});f.append(h);r.append(f);i.append(r);this.hideLoadingIndicator(this.gridContainer);this.bbdesigner$(n).on("click",".bbi-dbrd-link-btn",this.bbdesigner$.proxy(this.designer.modules.util.alertDialog,this.designer.modules.util,this.locale.alertDialogTitle.dashboardDesigner,t.OuterMessage,IconType.errors,AlertType.Alert,!0,BoldBIDashboard.isNullOrUndefined(t.Message)?this.locale.errorMessage.widgetDataUpdateFailed:t.Message));u=this;r.find(".bbi-dbrd-reload-retrievalerror-icon").bind("click",function(){u.loadDataSourceData("",u.selectedDatasourceId,null)})},n.prototype.resizeDataPreviewWindow=function(){this.designer.element.height(this.designer.element[0].parentElement.clientHeight);this.designer.element.width(this.designer.element[0].parentElement.clientWidth);this.bbdesigner$(this.dsPreviewTag).length>0&&(this.dsPreviewTag.find(".bbi-dbrd-datapreview-content-panel").css({width:this.designer.element.width()+"px"}),this.gridRightPanel.css({width:this.designer.element.width()-this.dsLeftPanel.outerWidth()-1+"px"}),this.gridContainer.css({width:this.designer.element.width()-this.dsLeftPanel.outerWidth()-51+"px"}),this.updateScrollerSize(),this.updatewaitingIndicatorPosition())},n.prototype.removeControlError=function(n){n.find(".bbi-dbrd-control-error").length>0&&n.find(".bbi-dbrd-control-error").remove()},n.prototype.updatewaitingIndicatorPosition=function(){var n=this.gridContainer.find(".bbi-background-waiting-popup");n.removeAttr("style");n.css({width:this.gridContainer.width(),height:this.gridContainer.height(),position:"relative"})},n}(),BoldBIDashboard;window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.DataPreviewDialog",InternalDataPreviewDialog,window),function(n){var t=function(){function t(n,t,i){this.id=n;this.element=t;this.designer=i}return t.prototype.render=function(){var r=this.element[0].parentElement.clientWidth,u=this.element[0].parentElement.clientHeight,t,i;this.element.css({width:r+"px",height:u+"px"});this.element.find("#"+this.id+"_designerDatasourcePreviewPanel").length>0&&this.element.find("#"+this.id+"_designerDatasourcePreviewPanel").remove();t=n.buildTag("div","",{width:"100%",height:"100%",display:"block","background-color":"white"},{id:this.id+"_designerDatasourcePreviewPanel"});this.element.append(t);i=this.designer.modules.dataPreviewDialog;i.renderDataPreviewContainer(t)},t.prototype.postRender=function(){this.render(0)},t.prototype.setContainerSize=function(){},t.prototype.renderCanvas=function(){},t.prototype.previewDashboard=function(){},t.prototype.renderCells=function(){},t.prototype.renderCellsForExport=function(){},t.prototype.updateSizeForScrollExport=function(){},t.prototype.resizeCombineWidgetForWidgetExport=function(){},t.prototype.wireEvents=function(){},t.prototype.unwireEvents=function(){},t}();n.DataPreviewMode=t}(BoldBIDashboard||(BoldBIDashboard={})),function(n){var t;(function(t){var i=function(){function t(n){this.customWidgetsCollection=[];this.customWidgetItems=[];this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$}return t.prototype.generateToolTipTemplate=function(t,i,r){var f="",o=this.dashboardDesigner.modules.themeHelper.getTooltipTextColor(),e=this.dashboardDesigner.modules.themeHelper.getToolTipFontText(),h="background-color: "+this.dashboardDesigner.modules.themeHelper.getTooltipBackground()+"!important; border-color: "+this.dashboardDesigner.modules.themeHelper.getTooltipBorder()+"!important; z-index: "+r+"!important; color: "+o+"!important;",c="color: "+o+"!important;\nfont-size: "+e.size+"!important;\nfont-family: "+e.family+"!important;",l="color: "+o+" !important;\nfont-size: "+e.size+"!important;\nfont-weight: "+e.weight+"!important;\nfont-family: "+e.family+"!important;",u;if(t.length>0){for(f+='<div class="widget-tooltip-template" style="'+h+'" id='+i+"_toolTip>",f+='<table class="tooltip-fontstyle" id='+i+"_tooltip_table>",u=0;u<t.length;u++){var s=Object.keys(t[u])[0],a=n.DashboardUtil.encodeText(s),v=n.DashboardUtil.encodeText(t[u][s]);f+="<tr id="+i+"_"+u+"_tooltip_table_rows><td id="+i+"_"+u+'_tooltip_table_rows_key style="'+c+'">'+a+" :<\/td><td id="+i+"_"+u+'_tooltip_table_rows_value style="'+l+'" >'+v+"<\/td><\/tr>"}f+="<\/table> <\/div>"}return f},t.enableClearFilter=function(t){if(!n.isNullOrUndefined(t.ControlHeader)||!t.getJson().ContainerSettings.ShowHeader){var i=t.IsPoPWidget?"e-dbrd-pop-reset":"bbi-remove-control-filter-enable",r=t.IsPoPWidget?t.designerInstance.getLocalizationContent().exportPanel.reset:t.designerInstance.getLocalizationContent().enableFilter.clearFilter;t.ControlContainer.find(".bbi-remove-control-filter").removeClass("bbi-remove-control-filter-disable").addClass(i+" bbi-dbrd-icon-theme").attr("data-tooltip",r);t.ControlContainer.find(".bbi-remove-control-filter").closest(".widget-control-icon-wrapper").addClass("bbi-dbrd-icon-background-theme")}},t.disableClearFilter=function(t){if(!n.isNullOrUndefined(t.ControlHeader)||!t.getJson().ContainerSettings.ShowHeader){var i=t.IsPoPWidget?"e-dbrd-pop-reset":"bbi-remove-control-filter-enable",r=t.designerInstance.getLocalizationContent().enableFilter.filterAction;t.ControlContainer.find(".bbi-remove-control-filter").removeClass(i+" bbi-dbrd-icon-theme").addClass("bbi-remove-control-filter-disable").attr("data-tooltip",r);t.ControlContainer.find(".bbi-remove-control-filter").closest(".widget-control-icon-wrapper").removeClass("bbi-dbrd-icon-background-theme");t.ControlContainer.find(".bbi-remove-control-filter-disable").attr("data-tooltip",t.designerInstance.getLocalizationContent().toolBar.filter)}},t.showInfoIcon=function(t,i){if(!n.isNullOrUndefined(t)&&t.trim()!==""&&!n.isNullOrUndefined(i)&&!n.isNullOrUndefined(i.ControlHeader)){i.ControlHeader.find(".bbi-dbrd-control-information-icon").remove();var r=n.buildTag("div.bbi-dbrd-control-information-icon e-dbrd-inform-control bbi-dbrd-designer-hoverable","",{display:"block","font-size":i.getIconFontSizeBasedOnResolution()},{"data-tooltip":t});i.ControlHeader.append(r);i.ControlHeader.parents(".bbi-dbrd-control-container").mouseover(function(){i.ControlHeader.find('.bbi-remove-control-filter[style*="display: none"]').length===0&&i.ControlHeader.parents(".bbi-dbrd-control-container:not(.bbi-show-widget-not-configured)").find(".bbi-dbrd-controlIcon-container").css("margin-right",i.ControlHeader.find('.bbi-dbrd-control-information-icon[style*="display: none"]').length===0?"25px":"0")});n.Dashboard.WidgetContainerHelper.setControlIconAlignment(i.ControlHeader.find(".bbi-dbrd-control-description"),i.ControlHeader.find(".bbi-dbrd-control-title-wrapper"),i.ControlHeader.find(".bbi-dbrd-controlIcon-container"),i.ControlHeader.find(".bbi-dbrd-control-title"))}},t.hideInfoIcon=function(t){n.isNullOrUndefined(t)||n.isNullOrUndefined(t.ControlHeader)||(t.ControlHeader.find(".bbi-dbrd-control-information-icon").css("display","none").removeAttr("data-tooltip"),n.Dashboard.WidgetContainerHelper.setControlIconAlignment(t.ControlHeader.find(".bbi-dbrd-control-description"),t.ControlHeader.find(".bbi-dbrd-control-title-wrapper"),t.ControlHeader.find(".bbi-dbrd-controlIcon-container"),t.ControlHeader.find(".bbi-dbrd-control-title")))},t.getUniqueName=function(t,i,r,u){var l=[],e=[],p=i.designerPanel.isPasteAction?"_Copy":i.designerPanel.isExistingWidget?"_Imported":"",c=n.Dashboard.WidgetHelper.getAllWidgetElements(i._id,t.designerInstance.element.find("#"+t.designerInstance._id+"_designCanvas"),"."+t.RootCss),o,s,a,v,f,h,y;if(c.each(function(n,t){l.push(BoldBIDashboardDesigner.bbdesignerstatic$(t).attr("data-name"))}),u)for(o=0;o<c.length;o++)e.push(this.getWidgetInstance(c.eq(o)).getContainerSettings().Title);s=0;do s++,a=l.indexOf(t.Type+s);while(a!==-1);if(v=t.Type+s,f=r,!n.isNullOrUndefined(r)&&(this.isAvailableWidgetName(e,r)&&(f=r+p),this.isAvailableWidgetName(e,f))){h=1;do h++,y=e.indexOf(f+h);while(y!==-1);f=f+h}return{Id:v,Name:f}},t.isAvailableWidgetName=function(n,t){for(var i=0;i<n.length;i++)if(n[i]===t)return!0;return!1},t.getWidgetElementVisibility=function(t,i,r){r===void 0&&(r=!1);var u=new WidgetElementsVisibility,f=4;return!n.isNullOrUndefined(i)&&i?(u.ShowLegend=!0,u.ShowXAxisLabels=!0,u.ShowXAxisTitle=!0,u.ShowYAxisTitle=!0,u.ShowYAxisLabels=!0):((t.RowSpan>=1*f&&t.ColumnSpan>1*f||t.RowSpan>1*f&&t.ColumnSpan>=1*f)&&(u.ShowLegend=!0),u.ShowXAxisLabels=r,t.RowSpan>=8&&t.ColumnSpan>=6&&(u.ShowXAxisTitle=!0),t.RowSpan>=1*f&&t.ColumnSpan>=2*f&&(u.ShowYAxisTitle=!0,u.ShowYAxisLabels=!0)),u},t.getWidgetInstance=function(t){return n.isNullOrUndefined(t)?null:t.data("widgetInstance")},t.prototype.getAllWidgets=function(){for(var u,i=n.Dashboard.WidgetHelper.getAllWidgetElements(this.dashboardDesigner._id,this.dashboardDesigner.modules.Mode.designCanvas,".bbi-dbrditem").not(".bbi-hide-qa-child-widget"),r=[],t=0;t<i.length;t++)u=n.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(i[t])),r.push(u);return r},t.getAllWidgetElements=function(t,i,r){var u=null;return n.isNullOrUndefined(i)||(u=i.find(r),u=u.add(BoldBIDashboardDesigner.bbdesignerstatic$(document.body).find(".bbi-content-div."+t).find(r))),u},t.prototype.getAllCustomWidgets=function(){for(var t=this.getAllWidgets(),i=[],n=0;n<t.length;n++)t[n].Type==="CustomWidget"&&i.push(t[n]);return i},t.prototype.getBingMapWidget=function(){for(var t=this.getAllWidgets(),i=[],n=0;n<t.length;n++)t[n].Type==="BingMap"&&i.push(t[n]);return i},t.prototype.getAllDatebucketWidgets=function(){return this.getAllWidgets().filter(function(n){return n.isDefaultDataWidget()})},t.prototype.createWidgetInstance=function(t){var f,i,r,u;try{if(n.isNullOrUndefined(t)||t.trim()==="")return null;for(f=t.split("."),i=window,r=0;r<f.length;r++)i=i[f[r]];if(!n.isNullOrUndefined(i))return u=Object.create(i.prototype),u.constructor.apply(u,[this.dashboardDesigner]),u}catch(e){console.error(e.message)}return null},t.prototype.getWidgetObj=function(t,i,r){for(var e,u,o=n.isNullOrUndefined(i)?this.dashboardDesigner.itemPanel.widgetItems:i,f=0;f<o.length;f++)for(e=0;e<o[f].Items.length;e++)if(u=o[f].Items[e],u.widgetNameSpace===t||u.serializationNameSpace===t||u.widgetName===t||u.id===r)return u;return null},t.prototype.getCurrentWidgetInstance=function(){var t=this.dashboardDesigner.designerPanel.selectedReportItems[0];return n.Dashboard.WidgetHelper.getWidgetInstance(t)},t.createWidgetContainer=function(t,i,r,u,f){var o=i.designerPanel.isPasteAction||i.designerPanel.isExistingWidget,e;return n.isNullOrUndefined(t.getJson().UniqueName)||o?(e=this.getUniqueName(t,i,u,o),t.Name=e.Id,t.getContainerSettings().Title=n.isNullOrUndefined(u)||u===""?e.Id:e.Name):(t.Name=t.getJson().UniqueName,t.getContainerSettings().Title=u),n.Dashboard.WidgetContainerHelper.createContainer(t,i,r,f),this.updateWidgetFontSizeOnRendering(t,i),t.ControlContainer},t.designerEventHandler=function(t,i,r,u){return!n.isNullOrUndefined(t.EventHelper)&&t.EventHelper.isEventListenerConfigured(i,r)?t.designerEventListener(i,r,u):!1},t.isDataWidget=function(t){return t instanceof n.Dashboard.DataWidget},t.isContainerWidget=function(t){return t instanceof n.ContainerWidget},t.getLineStyle=function(n){switch(n){case"Solid":return"0";case"Dot":return"2,3";case"Dash":return"4,8";case"DotDash":return"2,6,6,10";case"LongDash":return"15";case"LongDashDotDot":return"20,10,5,5,5,10";default:return"0"}},t.setLabelParameterId=function(t,i){var f,u,r,e;if(t.find(".bbi-dbrd-label-parameter-text").length>=1)for(f=i.modules.labelParameter,u=t.find(".bbi-dbrd-label-parameter-text"),r=0;r<u.length;r++)e=f.generateIdForLabelParameterElement(u[r]),BoldBIDashboardDesigner.bbdesignerstatic$(u[r]).attr("data-labelparameterid",e),i.model.mode!==n.Designer.mode.design&&(f.setValueForLabelParameter(u[r]),BoldBIDashboardDesigner.bbdesignerstatic$(u[r]).css({display:"none"}))},t.isOlderDashboardWidgets=function(n){return n.Type==="Card"||n.Type==="ChoroplethMap"||n.Type==="BubbleMap"},t.isFilterWidgets=function(n){return n.Type==="TextFilter"||n.Type==="ListBox"||n.Type==="DatePicker"||n.Type==="RangeSlider"||n.Type==="ComboBox"||n.Type==="PeriodOverPeriod"||n.Type==="RangeNavigator"},t.isTableWidgets=function(n){return n.Type==="Grid"||n.Type==="PivotGrid"||n.Type==="PivotView"},t.createWidgetActionContextMenu=function(t,i,r,u,f,e){var s,h,c,o,b,l;if(u=this.updateWidgetLinking(i,u),s=this.populateWidgetSelectionMenuItems(r,u,t),t.model.mode!==n.Designer.mode.design)if(h=s.filter(function(n){return n.IsVisible===!0}),h.length>1){c=n.buildTag("ul.bbi-designer-menu e-contextmenu","",{},{id:r+"_widget_action_menu"});c.BoldBIDashboardMenu({menuType:n.MenuType.ContextMenu,openOnClick:!1,contextMenuTarget:"#"+r,width:"auto",animationType:"none",fields:{dataSource:h,id:"Name",text:"DisplayName"},click:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.onWidgetSelectionMenuItemClick,this,i,t,f),close:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.onMenuItemClose,this,i,t,f)});o=t.element;c.parents(".e-menu-wrap")&&c.parents(".e-menu-wrap").appendTo(o);var a=o.find("#"+r+"_widget_action_menu"),k=a.data("BoldBIDashboardMenu"),p=a.height(),w=a.width(),v=o.offset().left,y=o.offset().top;k.show(o.width()+v-e[0]<w?e[0]-w-v:e[0]-v,o.height()+y-e[1]<p?e[1]-p-y:e[1]-y,r,f)}else h.length===1&&(b=h[0],i.performSelectedWidgetAction(b.Name,i,f,t));else for(l=0;l<s.length;l++)if(s[l].IsVisible===!0){i.Name.indexOf("Chart")!==-1&&i.Name.indexOf("Radar")===-1&&i.Name.indexOf("ScatterChart")===-1&&(f.cancel=!1);i.performSelectedWidgetAction(s.filter(function(n){return n.IsVisible===!0})[0].Name,i,f,t);this.updateWidgetFontSizeOnRendering(i,t);break}},t.updateWidgetLinking=function(t,i){return!n.isNullOrUndefined(t.getJson().WidgetLink)&&t.getJson().WidgetLink.Enable&&i.push(WidgetAction.WidgetLinking),i},t.onWidgetSelectionMenuItemClick=function(n,t,i,r){r.ID===WidgetAction.WidgetLinking?t.modules.containerTypeWidgetHelper.doInterWidgetLinking(n,i.selectedIndex):n.performSelectedWidgetAction(r.ID,n,i,t)},t.prototype.applyWidgetFilterValuesFromAPI=function(n,t){return t.processFilterInformation(n)},t.onMenuItemClose=function(t,i,r,u){t.Name.indexOf("Chart")!==-1&&t.Name.indexOf("Radar")===-1&&t.Name.indexOf("ScatterChart")===-1&&(r.cancel=!1,r.model.selectedDataPointIndexes=[]);n.isNullOrUndefined(u.target.text)&&(t.Name.indexOf("Map")>-1&&t.Name.indexOf("Tree")===-1&&t.Name.indexOf("Heat")===-1?t.mapObj.removeShapeSelection():t.Name.indexOf("Grid")>-1&&t.Name.indexOf("Pivot")===-1?t.clearSelection():t.Name.indexOf("Pivot")>-1?t.clearSelectionCell():t.Name.indexOf("RadarPolar")>-1?(t.radarPolarChartObj.selectedDataIndexes=[],t.radarPolarChartObj.refresh()):t.Name.indexOf("ScatterChart")>-1?(t.bubbleScatterChartObj.selectedDataIndexes=[],t.bubbleScatterChartObj.refresh()):t.Name.indexOf("Chart")>-1&&(n.isNullOrUndefined(t.chartObj)?(t.comboChartObj.model.selectedDataPointIndexes=[],t.comboChartObj.redraw()):(t.chartObj.model.selectedDataPointIndexes=[],t.chartObj.redraw()),!n.isNullOrUndefined(t.drilledChartObj)&&t.drillLevelInfo.length>0&&(t.drilledChartObj.model.selectedDataPointIndexes=[],t.drilledChartObj.redraw()),!n.isNullOrUndefined(t.drilledComboChartObj)&&t.drillLevelInfo.length>0&&(t.drilledComboChartObj.model.selectedDataPointIndexes=[],t.drilledComboChartObj.redraw())))},t.populateWidgetSelectionMenuItems=function(n,t,i){for(var f,r=[{Name:WidgetAction.DrillDown.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.drillDownDisplayName,IsVisible:!1},{Name:WidgetAction.Filter.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.filteringDisplayName,IsVisible:!1},{Name:WidgetAction.Linking.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.linkingDisplayName,IsVisible:!1},{Name:WidgetAction.ViewData.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.viewDataDisplayName,IsVisible:!1},{Name:WidgetAction.WidgetLinking.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.widgetLinkingDisplayName,IsVisible:!1}],u=0;u<r.length;u++)for(f=0;f<t.length;f++)if(t[f]===r[u].Name){r[u].IsVisible=!0;break}return r},t.getGlobalColumnId=function(n,t){for(var i,r=0;r<t.length;r++)if(t[r].FieldInfos.length>0&&(i=t[r].FieldInfos.filter(function(t){return t.UniqueColumnName===n}),i.length>0))return i[0].FieldActualType==="bbi-designer-dataset-datetime"?i[0].Id+"_"+i[0].DateTimeFormat:i[0].Id;return""},t.getColorCode=function(t,i,r){var u=t.designerInstance.modules.resource.getColumnColorCode(i);return n.DashboardUtil.IsStringNullorWhiteSpace(u)&&(u=!n.isNullOrUndefined(r)&&!n.DashboardUtil.IsStringNullorWhiteSpace(r.Color)?r.Color:n.DashboardUtil.defaultColorPalette[0]),u},t.updateIndividualColorBasedonTheme=function(t,i,r,u){var f;if(t&&!n.isNullOrUndefined(i)&&i.Type===ColorCustomizationType.Individual&&i.SolidColorInfo.length!==0){var s=void 0,o=void 0,h=void 0,e=void 0,c=r[0].UniqueColumnName;for(e=i.SolidColorInfo.filter(function(n){return n.BasedOn.UniqueColumnName===c})[0].DefaultColorSets,o=i.SolidColorInfo[0].BasedOn.FieldId,s=r[0].FieldActualType==="bbi-designer-dataset-datetime"?o+"_"+r[0].DateTimeFormat:o,f=0;f<e.length;f++)h=e[f].Name.toString(),e[f].Color=e[f].IsEdited?e[f].Color:u.modules.resource.getColumnValueColorCode(s,h)}},t.prototype.updateConditionBasedWidgetTitleFont=function(t,i,r){if(!n.isNullOrUndefined(r)&&!n.isNullOrUndefined(r.ControlHeader)){var u=t?this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.AutoFontSize?this.dashboardDesigner.canApplyDashboardTheme()&&(r.Type==="NumberCard"||r.Type==="KPICard")?"":r.getFontSizeBasedOnResolution(!0):this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.FontSize+"px":i+"px",f=r.ControlHeader.find(".bbi-dbrd-control-title .e-title-text");f.css("font-size",n.isNullOrUndefined(u)?"":u);r.ControlHeader.css("height",window.parseFloat(f.css("font-size"),10)+WidgetHeaderFontSizeFactor.title+"px");this.updateContentContainerHeight(r)}},t.prototype.updateContentContainerHeight=function(t){var i,r;n.isNullOrUndefined(t)||n.isNullOrUndefined(t.ControlHeader)||n.isNullOrUndefined(t.ControlSubHeader)||(i=0,t.ControlHeader.css("display")==="block"&&(i=t.ControlHeader.height()),r=t.ControlSubHeader.css("display")!=="none",i=r?i+t.ControlSubHeader.outerHeight():i,t.ContentContainer.css("height","calc(100% - "+i+"px)"))},t.prototype.updateConditionBasedWidgetSubTitleFont=function(t,i,r){if(!n.isNullOrUndefined(r.ControlSubHeader)){var u=t?this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.AutoFontSize?this.dashboardDesigner.canApplyDashboardTheme()&&(r.Type==="NumberCard"||r.Type==="KPICard")?"":r.getFontSizeBasedOnResolution():this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.FontSize+"px":i+"px",f=r.ControlSubHeader.find(".bbi-dbrd-control-sub-title .e-title-text");f.css("font-size",n.isNullOrUndefined(u)?"":u);r.ControlSubHeader.css("height",window.parseFloat(f.css("font-size"),10)+WidgetHeaderFontSizeFactor.subTitle+"px");this.updateContentContainerHeight(r)}},t.updateWidgetFontSizeOnRendering=function(t,i){var e,o,r,c;if(this.isDataWidget(t)){var u=t.getJson().ContainerSettings.WidgetTitleFontInfo,f=t.getJson().ContainerSettings.WidgetSubTitleFontInfo,l=n.isNullOrUndefined(u)?!0:u.AutoFontSize,a=n.isNullOrUndefined(f)?!0:f.AutoFontSize,s=l?i.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.AutoFontSize?null:i.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.FontSize:u.FontSize,h=a?i.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.AutoFontSize?null:i.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.FontSize:f.FontSize;n.isNullOrUndefined(t.ControlHeader)||(e=t.ControlHeader.find(".bbi-dbrd-control-title .e-title-text"),e.css("font-size",n.isNullOrUndefined(s)?"":s+"px"),t.ControlHeader.css("height",window.parseFloat(e.css("font-size"),10)+WidgetHeaderFontSizeFactor.title+"px"));n.isNullOrUndefined(t.ControlSubHeader)||(o=t.ControlSubHeader.find(".bbi-dbrd-control-sub-title .e-title-text"),o.css("font-size",n.isNullOrUndefined(h)?"":h+"px"),t.ControlSubHeader.css("height",window.parseFloat(o.css("font-size"),10)+WidgetHeaderFontSizeFactor.subTitle+"px"));n.isNullOrUndefined(t.ControlHeader)||n.isNullOrUndefined(t.ControlSubHeader)||(r=t.ControlHeader.height(),c=t.ControlSubHeader.css("display")!=="none",r=c?r+t.ControlSubHeader.outerHeight():r,t.ContentContainer.css("height","calc(100% - "+r+"px)"),n.Dashboard.WidgetContainerHelper.updateNoDataContainerSize(t,t.NoDataDispalyContainer,!1))}},t.updateWidgetContainerPosition=function(n,t){var i="";n.widgetOrder=t;t>0?i=t.toString():n.widgetOrder=100;n.Type==="NumberCard"||n.Type==="KPICard"?n.ControlContainer.find(".bbi-dbrd-content-container").children(".bbi-dbrd-isimage,.bbi-nodata-container,.bbi-widget-not-configured-text").css("z-index",i):n.ControlContainer.find(".bbi-dbrd-content-container").children(".bbi-dbrd-control-header,.bbi-dbrd-isimage,.bbi-nodata-container,.bbi-widget-not-configured-text").css("z-index",i);n.ControlContainer.find(".bbi-dbrd-content-container").children(".bbi-dbrd-control, .e-dbrd-widget").css("z-index",n.widgetOrder);this.isContainerWidget(n)&&n.updateWidgetPositionWithinContainer()},t.prototype.isMobileMode=function(){return!this.dashboardDesigner.model.dashboardFromData.isExportImage&&!this.dashboardDesigner.model.dashboardFromData.isExportPdf&&window.outerWidth<=768},t.prototype.getWidgetUsingId=function(n){var t=this.getAllWidgets().filter(function(t){return t.getJson().UniqueId===n});return t.length>0?t[0]:null},t.prototype.getFirstWidgetHeight=function(){var i=this.dashboardDesigner.modules.Mode.designCanvas,t=i.find(".bbi-dbrditem");return n.isNullOrUndefined(t[0])?0:t[0].clientHeight},t.prototype.getFirstCardWidget=function(n){return n.Type==="NumberCard"||n.Type==="KPICard"},t.updateURLLinkingforDrillDown=function(t,i,r){if(!n.isNullOrUndefined(i)&&!n.isNullOrUndefined(t)&&r&&t.url.indexOf("?")!==-1){var u=t.url.split("?"),f="";u[1].indexOf("&&")!==-1?(f="&&",t.url=this.validateParameterValues(f,u,i)):u[1].indexOf("&")!==-1?(f="&",t.url=this.validateParameterValues(f,u,i)):u.splice(0,1)}},t.clearFilterSelectionOnParamInjectionChange=function(n,t){var i=t.getJson().SelectedFilterValues,f,r,u;if(i.length>0&&n.length>0&&i[0].InitialDimensionFilter.Text.length>0)for(f=function(r){var u=n.filter(function(n){return n.ParameterValue===i[0].InitialDimensionFilter.Text[r]});if(u.length===0)return t.getJson().SelectedFilterValues=[],{value:void 0}},r=0;r<i[0].InitialDimensionFilter.Text.length;r++)if(u=f(r),typeof u=="object")return u.value},t.splitURLlinkingFieldForDrillDown=function(t,i,r){for(var f,e,c,o,l,s,a,h=[],u=0;u<i.DataGroupInfo.FieldContainers.length;u++)if(i.DataGroupInfo.FieldContainers[u].IsDrillSection)if(i.DrillLevelInfo.length>=1)for(f=0;f<=i.DrillLevelInfo.length;f++)n.isNullOrUndefined(i.DataGroupInfo.FieldContainers[u].FieldInfos[f])||h.push(i.DataGroupInfo.FieldContainers[u].FieldInfos[f].Name);else h.push(i.DataGroupInfo.FieldContainers[u].FieldInfos[0].Name);for(e=[],c=0;c<h.length;c++)for(o=0;o<r.length;o++)r[o].indexOf(h[c])===-1||e.push(r[o]);for(l=[],s=0;s<e.length;s++)r.indexOf(e[s])!==-1&&l.push(e[s]);for(a=0;a<l.length;a++)t.push(l[a])},t.validateParameterValues=function(n,t,i){var u=t[1].split(n),e,f,r;t.length=1;t[0].indexOf("showmydashboards")===-1&&(t[0]=t[0]+"?",u[0].indexOf("showmydashboards")!==-1&&(t[0]=t[0]+u[0]+n,u.shift()));var h=/={{:(.*?)}}/,o=u.filter(function(n){return h.test(n)}),s=u.filter(function(n){return o.indexOf(n)===-1});for(e=0;e<s.length;e++)t.push(s[e]);for(o.length>0&&this.splitURLlinkingFieldForDrillDown(t,i,o),f="",r=0;r<t.length;r++)f=r===0||r===t.length-1?f+t[r]:f+t[r]+n;return f},t.getNumberOfParametersInjected=function(t){var i=0;return n.isNullOrUndefined(t)||t.FieldContainers.forEach(function(t){t.FieldInfos.forEach(function(t){!n.isNullOrUndefined(t.ParametersInWidgets)&&t.ParametersInWidgets.length>0&&(i=t.ParametersInWidgets.length)})}),i},t.prototype.updateBackgroundOpacityToChildWidgets=function(t){var i=this.dashboardDesigner.modules.containerTypeWidgetHelper.getContainerWidget(t);t.ControlContainer.css("background-color",!n.isNullOrUndefined(i)&&i.getJson().ContainerSettings.BackgroundSettings.EnableWidgetTransparency?"transparent":this.dashboardDesigner.modules.themeHelper.getWidgetTileBackground(null))},t.setElementTransparency=function(n,t){var i=n.css("background-color"),r;i.indexOf("rgb")!==-1&&(i=i.replace("rgb(","").replace(")",""),r=i.split(","),n.css("background-color","rgba("+r[0]+","+r[1]+","+r[2]+","+t+")"))},t.updateLabelParameterForDescription=function(n,t,i){var u=i.modules.labelParameter,r=n.ContainerSettings.Description;r=u.getResultantParameterString(r,n.Data.Id);t.html(r);t.attr("data-tooltip",t.text())},t.defaultColorPalette=["#77A7FB","#E57368","#FBCB43","#34B67A","#F1AB68","#6CC2D9","#195962","#E18878","#1AA27D","#BFAAC7","#89695e","#a5c77f","#f48fb1","#90caf9","#cc4452"],t}();t.WidgetHelper=i})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={})),function(n){var t;(function(t){var i=function(){function t(n){this.dashboardDesigner=n;this.bbdesigner$=this.dashboardDesigner.bbdesigner$}return t.createNoDataContainer=function(t){var r,i;t.NoDataDispalyContainer=n.buildTag("div.bbi-dbrd-control-nodatainfo bbi-nodata-container","",{padding:t.getContainerSettings().ShowHeader?"0px 3px 3px 3px":"3px",overflow:"hidden","background-color":"transparent"},{});var u=n.buildTag("div.bbi-dbrd-control-nodatainfo e-info-div bbi-align-center","",{display:"block","background-color":"transparent",position:"absolute",width:"100%"},{}),e=n.buildTag("div.bbi-widget-info-icon","",{display:"inline-block"},{}),f=n.buildTag("div.e-nodata","",{},{});f.html(BoldBIDashboardDesigner.getLocale().designPanel.noDataToBeDisplay);u.append(e,f);t.NoDataDispalyContainer.append(u);this.updateNoDataContainerSize(t,t.NoDataDispalyContainer,!0);t.NoDataDispalyContainer.addClass("e-container-dbrd-theme");t.ContentContainer.append(t.NoDataDispalyContainer);n.isNullOrUndefined(t.getContainerSettings().NoDataContainerSettings)||(r=t.getContainerSettings().NoDataContainerSettings,n.isNullOrUndefined(r.ImageInfo)||(i=r.ImageInfo,this.updateNoDataDefaultImg(t,i.ShowImage),i.ShowImage&&this.updateNoDataImageOpacity(t,i.Transparency)),this.updateNoDataIcon(t,t.getContainerSettings().NoDataContainerSettings.HideDefaultIcon,!0),this.updateNoDataFontColor(t,t.getContainerSettings().NoDataContainerSettings.FontColor),this.updateDataNotConfiguredMsg(t,t.getContainerSettings().NoDataContainerSettings.CustomMsg))},t.createContentContainer=function(t,i){var u=t.getContainerSettings().SubTitle,r=10,f;t.getContainerSettings().ShowHeader&&(r=t.ControlHeader.outerHeight(!0),!n.isNullOrUndefined(u)&&u.trim().length>0?(r+=t.ControlSubHeader.outerHeight(!0),t.ControlContainer.find(".bbi-dbrd-control-sub-header").css("display","block")):t.ControlContainer.find(".bbi-dbrd-control-sub-header").css("display","none"));f=t.getContainerSettings().ShowHeader?"calc(100% - "+r+"px)":"100%";t.ContentContainer=n.buildTag("div.bbi-dbrd-content-container e-dashboardviewer","",{width:"100%",height:f,"box-sizing":"border-box"},{});t.ContentContainer.find(".bbi-background-waiting-popup").length===0&&this.appendSpinningWidgetForWidget(t.ContentContainer,i,t.Type);t.updateContainerPadding();t.ControlContainer.find(".bbi-dbrd-control-container-wrapper").append(t.ContentContainer)},t.appendSpinningWidgetForWidget=function(t,i,r){var u=n.buildTag("div.bbi-background-waiting-popup","",{display:"none",top:"0px",position:"absolute",width:"100%",height:"100%","background-color":i.modules.themeHelper.getWaitingPopupBackground(r),"z-index":"150",opacity:1}),f=n.buildTag("div.bbi-dashboard-spinning-widget","",{});f.append(i.getLoadingSvgElement("var(--widget-loading-indicator-color)"));u.append(f);t.append(u)},t.createWidgetImage=function(t,i){var u=t,f,r;n.isNullOrUndefined(u)||(f=u.getWidgetImage(i),r=n.buildTag("div.bbi-dbrd-isimage","",{},{}),r.append(f),t.ContentContainer.append(r))},t.createWidgetNotConfiguredContainer=function(t){var i=n.buildTag("div.bbi-widget-not-configured-text","",{},{}),o=n.buildTag("div.bbi-loader-background","",{background:t.designerInstance.modules.themeHelper.getWidgetTileBackground(null)},{}),r=n.buildTag("div.bbi-widget-not-configured-header","",{},{}),u=n.isNullOrUndefined(t.getContainerSettings().NoDataContainerSettings)||n.DashboardUtil.IsStringNullorWhiteSpace(t.getContainerSettings().NoDataContainerSettings.CustomMsg)?BoldBIDashboardDesigner.getLocale().designPanel.widgetNotConfigured:n.DashboardUtil.encodeText(t.getContainerSettings().NoDataContainerSettings.CustomMsg),f=null,e;(n.isNullOrUndefined(t.getContainerSettings().NoDataContainerSettings)||!t.getContainerSettings().NoDataContainerSettings.HideDefaultIcon)&&(f=n.buildTag("div.bbi-widget-not-configured-icon e-dbrd-designer-hoverable","",{},{"data-tooltip":u}));e=n.buildTag("div.bbi-widget-not-configured-content",u,{},{});r.append(f,e);i.append(r);n.Dashboard.WidgetHelper.isDataWidget(t)?(t.ContentContainer.append(i,o),t.ContentContainer.closest(".bbi-dbrd-control-container").addClass("bbi-show-widget-not-configured")):t.ContentContainer.append(i);t.ContentContainer.find(".bbi-widget-not-configured-text").addClass("e-container-dbrd-theme")},t.widgetHasError=function(n){return n.ContentContainer.find(".bbi-dbrd-control-error").length===1},t.isWidgetHasNotConfiguredClass=function(n){return n.ContentContainer.find(".bbi-widget-not-configured-text").closest(".bbi-dbrd-control-container").hasClass("bbi-show-widget-not-configured")},t.isWidgetNoDataContainerVisible=function(n){return n.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").is(":visible")},t.isWidgetRenderedWithData=function(n){return!this.isWidgetHasNotConfiguredClass(n)&&!this.isWidgetNoDataContainerVisible(n)&&!this.widgetHasError(n)},t.prototype.showControlError=function(n,t){n.ContentContainer.find(".bbi-dbrd-control-error").length===1&&n.ContentContainer.find(".bbi-dbrd-control-error").remove();this.createErrorContainer(n,t);n.IsRendered=!0},t.addWidgetNotConfiguredClass=function(t){n.Dashboard.WidgetContainerHelper.toggleWidgetNotConfiguredClass(t,!0)},t.removeWidgetNotConfiguredClass=function(t){n.Dashboard.WidgetContainerHelper.toggleWidgetNotConfiguredClass(t,!1)},t.applyWidgetTitleColor=function(n,t,i,r){var u=n.designerInstance.modules.themeHelper.getWidgetTileTextColor(n.Type);t.find(".bbi-dbrd-control-title").css({color:i==="#686262"?u:i});this.applyFontStylesForWidgetTitle(n,r)},t.applyWidgetSubTitleColor=function(n,t,i){var r=n.designerInstance.modules.themeHelper.getWidgetSubTitleTextColor(n.Type);t.find(".bbi-dbrd-control-sub-title").css({color:r});this.applyFontStylesForWidgetSubTitle(n,i)},t.applyFontStylesForWidgetTitle=function(t,i){if(!n.isNullOrUndefined(i)&&(t.designerInstance.canApplyTheme()||t.designerInstance.canApplyDashboardTheme()&&t.designerInstance.isViewMode())){var r=" ."+t.RootCss+".bbi-dbrd-control-container .bbi-dbrd-control-header .bbi-dbrd-control-title .e-title-text";t.designerInstance.modules.themeHelper.applyWidgetFontStyles(t.Type+"_Title",r,i)}},t.applyFontStylesForWidgetSubTitle=function(t,i){if(!n.isNullOrUndefined(i)&&(t.designerInstance.canApplyTheme()||t.designerInstance.canApplyDashboardTheme()&&t.designerInstance.isViewMode())){var r=" ."+t.RootCss+".bbi-dbrd-control-container .bbi-dbrd-control-sub-header .bbi-dbrd-control-sub-title .e-title-text";t.designerInstance.modules.themeHelper.applyWidgetFontStyles(t.Type+"_SubTitle",r,i)}},t.applyErrorContainerTheme=function(n){var u=n.designerInstance.modules.themeHelper.getWidgetTileBackground(null),r=n.designerInstance.modules.themeHelper.getWidgetTileTextColor(),f=n.designerInstance.modules.themeHelper.getWidgetContainerBorder(n.designerInstance.isDarkTypeTheme()),t=n.ContentContainer.find(".bbi-widget-not-configured-text").attr("style"),i="background-color:"+u+"!important; color:"+r+"!important; borderColor:"+f+"!important; ";t=n.designerInstance.modules.themeHelper.getStyleString(t,i);n.ContentContainer.find(".bbi-widget-not-configured-text").attr("style",t);t=n.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").attr("style");i="color:"+r+"!important; ";t=n.designerInstance.modules.themeHelper.getStyleString(t,i);n.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").attr("style",t);t=n.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").find(".bbi-align-center").attr("style");i="color:"+r+"!important; ";t=n.designerInstance.modules.themeHelper.getStyleString(t,i);n.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").find(".bbi-align-center").attr("style",t);t=n.ContentContainer.find(".bbi-dbrd-control-error").attr("style");i="background-color:"+u+"!important; color:"+r+"!important; ";t=n.designerInstance.modules.themeHelper.getStyleString(t,i);n.ContentContainer.find(".bbi-dbrd-control-error").attr("style",t);t=n.ContentContainer.find(".bbi-dbrd-control-error").find(".bbi-reload-button").attr("style");i="background-color:"+u+"!important; color:"+r+"!important; ";t=n.designerInstance.modules.themeHelper.getStyleString(t,i);n.ContentContainer.find(".bbi-dbrd-control-error").find(".bbi-reload-button").attr("style",t)},t.toggleWidgetNotConfiguredClass=function(n,t){n.ContentContainer.find(".bbi-widget-not-configured-text").closest(".bbi-dbrd-control-container").toggleClass("bbi-show-widget-not-configured",t);n.ContentContainer.find(".bbi-widget-not-configured-text").addClass("e-container-dbrd-theme")},t.prototype.createErrorContainer=function(t,i){var c=t.getContainerSettings(),v=c.ShowBorder?c.CornerRadius:0,f=t.updateContainerHeightInResize(t),u=t.ContentContainer.width(),o,s;t.ContentContainer.children(".bbi-dbrd-control").css({display:"none"});t.ContentContainer.find(".bbi-dbrd-control-error").length>0&&t.ContentContainer.find(".bbi-dbrd-control-error").remove();var r=n.buildTag("div.bbi-dbrd-control-error bbi-align-center","",{"z-index":t.ContentContainer.children(".bbi-dbrd-control").css("z-index"),position:"relative","border-radius":v+"px",overflow:"hidden","background-color":"transparent"},{}),h=n.isNullOrUndefined(i.ErrorCode)?BoldBIDashboardDesigner.getLocale().errorMessage.dataRetrievalError:this.getDisplayError(i.ErrorCode.toString()),e=n.buildTag("div.bbi-widget-error-icon e-dbrd-hoverable","",{},{"data-tooltip":h}),l=n.buildTag("div.e-dbrd-controlError-msg",h,{},{}),a=n.buildTag("div.bbi-dbrd-link-btn",BoldBIDashboardDesigner.getLocale().errorMessage.knowMore,{},{});f>95?(u<65&&(l.width(u),a.width(u),u<40&&e.width(u)),f<120&&u<65?r.append(e):r.append(e,l,a)):f>=40?(u<40&&e.width(u),r.append(e)):f<=40&&f>=20&&(e.css({height:f,width:f,"background-size":"cover"}),r.append(e));t.ContentContainer.css({display:"table"});o=n.buildTag("button.reload-retrievalerror-icon bbi-reload-button bbi-dbrd-designer-hand-cursor bbi-dbrd-refresh-link-btn",BoldBIDashboardDesigner.getLocale().tableSelectorWindow.reloadButtonText,{"padding-left":"6px","font-size":"13px"},{type:"button"});s=!1;o.addClass("e-container-dbrd-theme");f>=65&&(u<65&&o.width(u),r.append(o),s=!0);r.addClass("e-container-dbrd-theme");t.ContentContainer.append(r);t.ControlContainer.height()<r.height()&&(t.ContentContainer.find(".reload-retrievalerror-icon").remove(),s=!1);r.children().hasClass("bbi-dbrd-link-btn")&&this.errReloadClickHandler(i,t.ContentContainer,h);n.Dashboard.WidgetContainerHelper.bindReloadAction(s?r.find(".reload-retrievalerror-icon"):r.find(".bbi-widget-error-icon"),t);t.CellInfo.RowSpan===1&&t.CellInfo.ColumnSpan===1?this.errorMessageForSingleSizedWidget(r,BoldBIDashboardDesigner.getLocale().errorMessage.dataRetrievalError):t.CellInfo.RowSpan===1&&this.errorMessageForRegularSizedWidget(r);t.ContentContainer.find(".bbi-loader-background").css("display")==="block"&&t.ContentContainer.find(".bbi-loader-background").css("display","none")},t.bindReloadAction=function(n,t){var i=t;n.bind("click",function(){i.dataConfigurationInstance.postDraggedFields(t.ContentContainer.parents(".bbi-dbrditem"),!1,t.masterFilterWindowInstance.getSelectedValuesForWidgetRequest())})},t.prototype.getDisplayError=function(t){var i=this.dashboardDesigner.getErrorCodes();if(!n.isNullOrUndefined(i[t]))return"ERR: "+t+"-"+i[t]},t.prototype.errReloadClickHandler=function(t,i,r){var u=this.dashboardDesigner.modules.util;i.on("click",".bbi-dbrd-link-btn",this.bbdesigner$.proxy(u.alertDialog,u,BoldBIDashboardDesigner.getLocale().errorMessage.dataRetrievalError,n.isNullOrUndefined(t.OuterMessage)||n.DashboardUtil.isEmptyString(t.OuterMessage)?BoldBIDashboardDesigner.getLocale().errorMessage.defaultNullErrorMessage:r,IconType.errors,AlertType.Alert,!0,n.isNullOrUndefined(t.Message)?BoldBIDashboardDesigner.getLocale().errorMessage.widgetDataUpdateFailed:t.Message))},t.prototype.errorMessageForSingleSizedWidget=function(n,t){n.find(".bbi-widget-error-icon").remove();n.prepend(this.bbdesigner$("<div>").addClass("widget-error-icon-single").attr({"data-tooltip":t}).addClass("e-dbrd-hoverable").css({"font-size":"18px"}));n.find(".e-dbrd-controlError-msg").remove();n.find(".bbi-dbrd-link-btn").css({"font-size":"7px"});n.find(".bbi-dbrd-refresh-link-btn").css({border:"none","font-size":"7px",color:"#3b99fc",height:"15px","margin-top":"0px"})},t.prototype.errorMessageForRegularSizedWidget=function(n){n.find(".bbi-widget-error-icon").addClass("e-dbrd-iocn-single");n.find(".e-dbrd-controlError-msg").remove();n.find(".bbi-dbrd-refresh-link-btn").addClass("e-dbrd-refresh-single")},t.updateNoDataContainerSize=function(t,i,r){var h=t.ContentContainer.find(".bbi-widget-info-icon").length==0?14:59,o=35,u=t.updateContainerHeightIndraftLoading(t,r),s=u-h,f=t.ContentContainer.width(),e=!1;u<=35&&u>=20?(i.find(".bbi-widget-info-icon").css({display:"block",height:u,width:u,"background-size":"cover"}),e=!0,i.find(".e-nodata").css("display",t.ContentContainer.find(".bbi-widget-info-icon").length==0?u>=n.parseInt(i.find(".e-nodata").css("font-size").replace("px",""))?"block":"none":"none")):u<40?(i.find(".bbi-widget-info-icon").css("display",t.ContentContainer.find(".bbi-widget-info-icon").length==1?u>=o?"block":"none":"none"),i.find(".e-nodata").css("display",t.ContentContainer.find(".bbi-widget-info-icon").length==0?u>=n.parseInt(i.find(".e-nodata").css("font-size").replace("px",""))?"block":"none":"none")):u>=40&&u<65||u<=65&&f<190||u<95&&f<65||(u<120||u<145)&&f<40||u<200&&f<15?(i.find(".e-nodata").css("display",u>=o+n.parseInt(i.find(".e-nodata").css("font-size").replace("px",""))?"block":"none"),i.find(".bbi-widget-info-icon").css("display","block")):(i.find(".bbi-widget-info-icon").css("display","block"),i.find(".e-nodata").css("display","block"));f<40?(e?i.find(".bbi-widget-info-icon").css({overflow:"hidden"}):i.find(".bbi-widget-info-icon").css({width:f,overflow:"hidden"}),i.find(".e-nodata").css({width:f,overflow:"hidden"})):(e?i.find(".bbi-widget-info-icon").css({overflow:"auto"}):i.find(".bbi-widget-info-icon").css({width:"",overflow:"auto"}),i.find(".e-nodata").css({width:"",overflow:"auto"}));i.find(".bbi-dbrd-control-nodatainfo.e-info-div.bbi-align-center").css({"margin-top":s>0&&t.ContentContainer.height()!==0?s/2:0})},t.createContainer=function(t,i,r,u){var c="bbi-canvas bbi-dbrd-control-container",d=i.modules.Mode.designCanvas,y=d.find(".bbi-dbrditem"),p,w,b,l,v,s,h,k,f;i.designerPanel.isMobileView&&i.model.isPinWidget&&(r.width=i.modules.Mode.designCanvas.width()-10,r.height=i.modules.Mode.designCanvas.height()+i.designerPanel.cellMargin-10,c=c+" bbi-dbrd-control-container-pinwidget");t.ControlContainer=n.buildTag("div.bbi-dbrditem "+c,"",{left:i.model.dashboardFromData.isWidgetSpecific||i.model.dashboardFromData.isControl&&i.model.dashboardFromData.isWidgetPagewiseExport?"":r.left,top:i.model.dashboardFromData.isWidgetSpecific||i.model.dashboardFromData.isControl&&i.model.dashboardFromData.isWidgetPagewiseExport?"":r.top,width:i.model.dashboardFromData.isWidgetSpecific||i.model.dashboardFromData.isControl&&i.model.dashboardFromData.isWidgetPagewiseExport?i.modules.Mode.designCanvas.width()-10:r.width,height:i.designerPanel.isMobileView&&!i.model.isPinWidget?t.getMobileViewHeight():i.model.dashboardFromData.isWidgetSpecific||i.model.dashboardFromData.isControl&&i.model.dashboardFromData.isWidgetPagewiseExport?y.length==0?i.modules.Mode.designPanelTag.height()-i.modules.Mode.designPanelTag.find(".bbi-dashboarddesigner-bannerPanel").height()-10:i.modules.Mode.designPanelTag.height()-10:r.height,background:t.designerInstance.modules.themeHelper.getWidgetTileBackground(null),"border-radius":t.getContainerSettings().CornerRadius,position:i.model.dashboardFromData.isWidgetSpecific||i.model.dashboardFromData.isControl&&i.model.dashboardFromData.isWidgetPagewiseExport?"relative":"absolute",margin:i.model.dashboardFromData.isWidgetSpecific||i.model.dashboardFromData.isControl&&i.model.dashboardFromData.isWidgetPagewiseExport?y.length==0?"5px 5px":"10px 5px":""},{id:i._id+"_"+t.Name,"data-name":t.Name,"data-hasheader":t.getContainerSettings().ShowHeader,"data-widget-id":t.getJson().UniqueId});p=!n.isNullOrUndefined(i.model.widgetContainerSettings)&&!n.DashboardUtil.IsStringNullorWhiteSpace(i.model.widgetContainerSettings.boxShadow)?i.model.widgetContainerSettings.boxShadow:null;this.updateWidgetShadow(t.getContainerSettings().ShowShadow,t.ControlContainer,p);n.Dashboard.WidgetHelper.isContainerWidget(t)&&i.modules.containerTypeWidgetHelper.addContainerClass(t);this.updateMinMobileViewHeight(t,i);w=n.buildTag("div.bbi-dbrd-control-background","",{width:"100%",height:"100%",position:"absolute","background-color":t.designerInstance.modules.themeHelper.getWidgetTileBackground(t.Type),"background-repeat":"no-repeat",opacity:n.isNullOrUndefined(t.getJson())?1:t.backgroundInfo.Opacity},{});b=n.buildTag("div.bbi-dbrd-control-container-wrapper","",{width:"100%",height:"100%","box-sizing":"border-box",padding:"0px"},{});t.ControlContainer.append(w,b);t.updateControlContainerPadding();t.getBackgroundForControlContainer();i.model.isPinWidget&&!i.model.loadMultipleWidget&&i.model.widgetId!==t.getJson().UniqueId&&(n.isNullOrUndefined(t.getContainerSettings().CombineWidgetId)||t.getContainerSettings().CombineWidgetId==="")&&t.ControlContainer.css("display","none");t.ControlContainer.addClass(t.RootCss);i.modules.Mode.designCanvas.append(t.ControlContainer);i.isMobileLayout()&&!n.isNullOrUndefined(i.model.widgetContainerSettings.margin)&&t.ControlContainer.css("margin",i.model.widgetContainerSettings.margin+"px");l={controlTitle:t.getJson().ContainerSettings.Title,controlId:t.Name,isMaximizeEnable:!1,isFilterIconEnable:t.getJson().FilterSettings.ActAsMasterWidget};t.getJson().ContainerSettings.ShowHeader&&(this.getControlHeader(l,t,i),this.getControlSubHeader(t));this.createContentContainer(t,i);t.ControlContainer.hasClass("e-card-item")||t.ControlContainer.hasClass("e-label-item")?this.setIconContainerForCardControl(t,i):t.getJson().ContainerSettings.ShowHeader||this.iconContainerForNoHeader(l,t,i);!n.Dashboard.WidgetHelper.isDataWidget(t)||n.Dashboard.WidgetHelper.isOlderDashboardWidgets(t)||!n.isNullOrUndefined(i.model.dashboardFromData)&&i.model.dashboardFromData.loadFromData||this.createWidgetImage(t,u);this.createNoDataContainer(t);var e=BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-title"),g=BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-description"),a=t.getJson().ContainerSettings.Title,o=i.modules.labelParameter;a=o.getResultantParameterString(a,t.getJson().Data.Id);e.html(a);e.attr("data-tooltip",e.text());o.adjustParameterColumn(BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-title-wrapper"));v=i.modules.containerPropertyItem;BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-sub-title").css({"justify-content":v.getContainerTitleAlignmentValue(n.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,t.getJson().ContainerSettings.TextAlignment))});(i.model.dashboardFromData.isExportImage||i.model.dashboardFromData.isExportPdf)&&(BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-title-wrapper").addClass("export-"+n.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,t.getJson().ContainerSettings.TextAlignment).toLowerCase()),BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-sub-title").addClass("export-"+n.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,t.getJson().ContainerSettings.TextAlignment).toLowerCase()));this.setControlIconAlignment(g,BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-title-wrapper"),BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-controlIcon-container"),e);this.createWidgetNotConfiguredContainer(t);t.updateIconContainerBackground();i.model.localData.loadFromData||i.modules.widgetContainerHelper.showLoadingIndicator(t);t.getJson().ContainerSettings.SubTitle!==" "&&(s=t.getJson().ContainerSettings.SubTitle,h=BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-sub-title"),s=o.getResultantParameterString(s,t.getJson().Data.Id),h.html(s),h.attr("data-tooltip",h.text()),o.adjustParameterColumn(BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-sub-header")),t.updateSubTitleForContainer());t.getJson().ContainerSettings.Description!==" "&&(k=BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-description"),n.Dashboard.WidgetHelper.updateLabelParameterForDescription(t.getJson(),k,i));BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-sub-title").css({color:t.designerInstance.modules.themeHelper.getWidgetSubTitleTextColor(t.Type)});t.getJson().ContainerSettings.ShowBorder&&(BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-sub-title").css({"justify-content":v.getContainerTitleAlignmentValue(n.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,t.getJson().ContainerSettings.TextAlignment))}),BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-title").css({color:t.getJson().ContainerSettings.TextColor}),t.getJson().ContainerSettings.ShowBorder?BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).css({border:"1px solid "+this.getThemeVariablesForWidgets(t.Type,!1,!1)}):BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).css({border:"0px"}));f=t.getJson().ContainerSettings.CornerRadius===4?this.getThemeVariablesForWidgets(t.Type,!0,!1):t.getJson().ContainerSettings.CornerRadius+"px";BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).css("border-radius",f);BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-content-container").css("border-radius",f);BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-nodatainfo").css("border-radius",f);BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-widget-not-configured-text").css("border-radius",f);BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-loader-background").css("border-radius",f);BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-background").css("border-radius",f);i.designerPanel.isMobileView&&i.designerPanel.updateScrollBar();t.isBackgroundInfoNeeded||t.ControlContainer.find(".bbi-dbrd-control-background").css("background-color","transparent");this.updateTitleForHigherResolution(t)},t.getThemeVariablesForWidgets=function(n,t,i){switch(n){case ControlType.Grid.toString():return i?"var(--grid-widget-container-bg-color)":t?"var(--grid-widget-container-border-radius)":"var(--grid-widget-container-border-color)";case ControlType.KPICard.toString():return i?"var(--kpicard-widget-container-bg-color)":t?"var(--kpicard-widget-container-border-radius)":"var(--kpicard-widget-container-border-color)";case ControlType.NumberCard.toString():return i?"var(--numbercard-widget-container-bg-color)":t?"var(--numbercard-widget-container-border-radius)":"var(--numbercard-widget-container-border-color)";case ControlType.Map.toString():return i?"var(--map-widget-container-bg-color)":t?"var(--map-widget-container-border-radius)":"var(--map-widget-container-border-color)";case ControlType.HeatMap.toString():return i?"var(--heatmap-widget-container-bg-color)":t?"var(--heatmap-widget-container-border-radius)":"var(--heatmap-widget-container-border-color)";case ControlType.TreeMap.toString():return i?"var(--treemap-widget-container-bg-color)":t?"var(--treemap-widget-container-border-radius)":"var(--treemap-widget-container-border-color)";case ControlType.Chart.toString():return i?"var(--chart-widget-container-bg-color)":t?"var(--chart-widget-container-border-radius)":"var(--chart-widget-container-border-color)";case ControlType.ComboBox.toString():return i?"var(--combobox-widget-container-bg-color)":t?"var(--combobox-widget-container-border-radius)":"var(--combobox-widget-container-border-color)";case ControlType.ComboChart.toString():return i?"var(--combochart-widget-container-bg-color)":t?"var(--combochart-widget-container-border-radius)":"var(--combochart-widget-container-border-color)";case ControlType.DatePicker.toString():return i?"var(--datepicker-widget-container-bg-color)":t?"var(--datepicker-widget-container-border-radius)":"var(--datepicker-widget-container-border-color)";case ControlType.ListBox.toString():return i?"var(--listbox-widget-container-bg-color)":t?"var(--listbox-widget-container-border-radius)":"var(--listbox-widget-container-border-color)";case ControlType.PivotGrid.toString():return i?"var(--pivotgrid-widget-container-bg-color)":t?"var(--pivotgrid-widget-container-border-radius)":"var(--pivotgrid-widget-container-border-color)";case ControlType.PeriodOverPeriod.toString():return i?"var(--pop-widget-container-bg-color)":t?"var(--pop-widget-container-border-radius)":"var(--pop-widget-container-border-color)";case ControlType.RadarPolarChart.toString():return i?"var(--radarpolar-widget-container-bg-color)":t?"var(--radarpolar-widget-container-border-radius)":"var(--radarpolar-widget-container-border-color)";case ControlType.RangeNavigator.toString():return i?"var(--rangenavigator-widget-container-bg-color)":t?"var(--rangenavigator-widget-container-border-radius)":"var(--rangenavigator-widget-container-border-color)";case ControlType.RangeSlider.toString():return i?"var(--rangeslider-widget-container-bg-color)":t?"var(--rangeslider-widget-container-border-radius)":"var(--rangeslider-widget-container-border-color)";case ControlType.RichTextEditor.toString():return i?"var(--rte-widget-container-bg-color)":t?"var(--rte-widget-container-border-radius)":"var(--rte-widget-container-border-color)";case ControlType.Scatter.toString():return i?"var(--scatter-widget-container-bg-color)":t?"var(--scatter-widget-container-border-radius)":"var(--scatter-widget-container-border-color)";case ControlType.RadialGauge.toString():return i?"var(--circulargauge-widget-container-bg-color)":t?"var(--circulargauge-widget-container-border-radius)":"var(--circulargauge-widget-container-border-color)";case ControlType.TabbedWidget.toString():return i?"var(--tab-widget-container-bg-color)":t?"var(--tab-widget-container-border-radius)":"var(--tab-widget-container-border-color)";case ControlType.TextFilter.toString():return i?"var(--textfilter-widget-container-bg-color)":t?"var(--textfilter-widget-container-border-radius)":"var(--textfilter-widget-container-border-color)";case ControlType.Image.toString():return i?"var(--image-widget-container-bg-color)":t?"var(--image-widget-container-border-radius)":"var(--image-widget-container-border-color)";case ControlType.CombineWidget.toString():return i?"var(--combine-widget-container-bg-color)":t?"var(--combine-widget-container-border-radius)":"var(--combine-widget-container-border-color)";default:return i?"var(--widget-primary-background)":t?"var(--widget-container-border-radius)":"var(--widget-container-border-color)"}},t.updateWidgetShadow=function(t,i,r){t&&!n.DashboardUtil.IsStringNullorWhiteSpace(r)?i.css({"box-shadow":r}):t&&n.DashboardUtil.IsStringNullorWhiteSpace(r)?i.css({"box-shadow":"var(--container-box-shadow)"}):i.css({"box-shadow":"none"})},t.updateMinMobileViewHeight=function(t,i){if(n.DashboardUtil.IsStringNullorWhiteSpace(t.getContainerSettings().CombineWidgetId)&&(t.ControlContainer[0].style.removeProperty("min-height"),i.designerPanel.isMobileView)){var r=t.ControlContainer.attr("style"),u="min-height:"+t.getMinMobileHeight()+" !important; ";r=i.modules.themeHelper.getStyleString(r,u);t.ControlContainer.attr("style",r)}},t.updateTitleForHigherResolution=function(t){if(!n.isNullOrUndefined(t.ControlHeader)&&!n.isNullOrUndefined(t.ControlSubHeader)&&t.isVisualWidget&&window.screen.width>=3840){t.ControlHeader.css({height:n.parseInt(t.ControlHeader.find(".bbi-dbrd-control-title").css("font-size"),10)+4+"px"});t.ContentContainer.css("height","calc(100% - "+t.ControlHeader.height()+"px");var i=t.getJson().ContainerSettings.SubTitle;!n.isNullOrUndefined(i)&&i.trim().length>0&&(t.ControlSubHeader.css({height:n.parseInt(t.ControlSubHeader.find(".bbi-dbrd-control-sub-title").css("font-size"),10)+4+"px"}),t.ContentContainer.css("height","calc(100% - "+(t.ControlHeader.height()+t.ControlSubHeader.height())+"px"));t.ControlHeader.find(".bbi-dbrd-control-title").css("line-height","normal");t.ControlSubHeader.find(".bbi-dbrd-control-sub-title").css("line-height","normal");t.ControlHeader.find(".bbi-dbrd-control-description").css({"align-items":"center","line-height":"normal","margin-left":"1%"});t.ControlHeader.find(".bbi-dbrd-control-description").css("display")==="block"&&t.ControlHeader.find(".bbi-dbrd-control-description").css("display","flex")}},t.setControlIconAlignment=function(n,t,i,r){var u=0;t.css("justify-content")==="flex-end"&&(t.parent().find(".e-dbrd-inform-control").css("display")==="block"&&(t.parent().find(".e-dbrd-inform-control").css("right","auto"),t.parent().find(".e-dbrd-inform-control").css("left","0")),i.css("left","0"),i.css("right","auto"));(t.css("justify-content")==="flex-start"||t.css("justify-content")==="center")&&(t.parent().find(".e-dbrd-inform-control").css("display")==="block"&&(t.parent().find(".e-dbrd-inform-control").css("right","0"),t.parent().find(".e-dbrd-inform-control").css("left","auto")),i.css("left","auto"),i.css("right","0"));n.css("display")==="block"&&(u=t.css("justify-content")==="center"?i.outerWidth(!0)+i.outerWidth(!0)+n.outerWidth(!0)+10:i.outerWidth(!0)+n.outerWidth(!0)+10);r.css({"max-width":"calc(100%)"})},t.getFieldContainer=function(n,t){return n!=null&&n.FieldContainers.length>0?n.FieldContainers.filter(function(n){return n.Name===t})[0]:null},t.setAttributes=function(n,t){for(var i in t)n.setAttributeNS(null,i,t[i])},t.getHeaderTemplate=function(t,i,r){var f=i.isVisualWidget?700:500,e=i.designerInstance.modules.themeHelper.getWidgetTileTextColor(i.Type),o=i.isVisualWidget?"22px":"19px",u=i.getJson().ContainerSettings.Description,s=n.isNullOrUndefined(u)||u.trim().length<=0?"none":"block",h=r.modules.containerPropertyItem.getContainerTitleAlignmentValue(n.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,i.getJson().ContainerSettings.TextAlignment));return'<div class="bbi-dbrd-control-title-wrapper" style="width: 100%; display: flex; align-items: center; justify-content: '.concat(h,';">\n                    <div class="bbi-dbrd-control-title bbi-dbrd-designer-hoverable" style="max-width: 100%; font-size: ').concat(i.getFontSizeBasedOnResolution(t.controlTitle),"; font-weight: ").concat(f,"; color: ").concat(e,';" data-tooltip="').concat(t.controlTitle,'">\n                    <span class="e-title-text e-title-value">').concat(t.controlTitle,'<\/span>\n                    <\/div>\n                    <div class="bbi-dbrd-control-description e-icon-dbrd-theme bbi-dbrd-designer-hoverable" style="display: ').concat(s,"; line-height: ").concat(o,"; font-size: ").concat(i.getIconFontSizeBasedOnResolution(),'; height: 20px;" data-tooltip="').concat(i.getJson().ContainerSettings.Description,'">\n                    <\/div>\n                    <\/div>')},t.getIconTemplate=function(t,i,r,u,f){var e=t==="bbi-remove-control-filter bbi-remove-control-filter-disable"?"":"bbi-dbrd-icon-background-theme";return'<td class="widget-control-icon-wrapper '.concat(e,'" style="display:none; text-align:center; padding:0px;">\n                    <div class="').concat(t,'" id="').concat(n.isNullOrUndefined(i)?f.Name+r:i,'" data-name="').concat(r,'" style="display:none; padding:4px; font-size: ').concat(f.designerInstance.modules.themeHelper.getControlIconFontSize(f),';"\n                    data-tooltip="').concat(u,'"><\/div><\/td>')},t.getControlHeader=function(n,t,i){t.ControlHeader=BoldBIDashboardDesigner.bbdesignerstatic$('<div class="bbi-dbrd-control-header" data-widget-id="'.concat(n.controlId,'"><\/div>'));t.ControlContainer.find(".bbi-dbrd-control-container-wrapper").prepend(t.ControlHeader);i.model.IsEmbed&&i.isWidgetRequest(i.model.filterParameters)&&i.element.find(".bbi-dbrd-control-header").css("display","block");t.ControlHeader.append(BoldBIDashboardDesigner.bbdesignerstatic$(this.getHeaderTemplate(n,t,i)));t.ControlHeader.append(this.getControlHeaderIcons(n,t,i))},t.getControlHeaderIcons=function(t,i,r){var s='<div class="bbi-dbrd-controlIcon-container" id="'.concat(t.controlId,'_controlIcon_container" style="height:22px;"><\/div>'),h=[{"class":"bbi-dbrd-maxim-close e-dbrd-maximClose-toggle bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable",name:"maximize_close",id:t.controlId+"_maxCloseButton",tooltip:BoldBIDashboardDesigner.getLocale().maximize.close},{"class":"bbi-dbrd-control-menu-icon bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable",name:"menu",id:t.controlId,tooltip:BoldBIDashboardDesigner.getLocale().exportPanel.moreOptions},{name:"export","class":"bbi-dashboard-widget-menu bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable",id:t.controlId,tooltip:BoldBIDashboardDesigner.getLocale().banerPanel.exportTooltip},{"class":"bbi-dbrd-legend-icon bbi-dbrd-designer-icon bbi-dbrd-designer-hoverable",name:"legendIcon",id:t.controlId+"_legendIcon",tooltip:"Legend Dropdown Icon"},{"class":"bbi-remove-control-filter bbi-remove-control-filter-disable",name:"filter",id:t.controlId+"_clearFilter_icon",tooltip:BoldBIDashboardDesigner.getLocale().enableFilter.filterAction},{"class":"bbi-dbrd-maxim bbi-dbrd-maxim-toggle bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable",name:"maximize",id:t.controlId+"_maximize",tooltip:BoldBIDashboardDesigner.getLocale().maximize.maximize},{"class":"bbi-dbrd-refresh-icon bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable",name:"refresh_time",id:t.controlId+"_refreshTime",tooltip:"Refresh Timer"}],c={iconList:h,controlObj:i,headerProperties:t,showHeader:!1},u=this.getControlIconContainer(c,BoldBIDashboardDesigner.bbdesignerstatic$(s),r),l=u.find(".bbi-dbrd-control-menu-icon"),a=u.find(".bbi-remove-control-filter"),v=u.find(".bbi-dbrd-maxim"),y=u.find(".su-without-comment.su-icon"),p=u.find(".su-with-comment.su-icon"),w=u.find(".su-pin.su-icon"),b=u.find(".bbi-dbrd-legend-icon"),k=u.find(".bbi-dbrd-refresh-icon"),e,f,o;return b.css("display","none"),k.css("display","none"),f=i.getContainerSettings(),o=(r.model.mode===n.Designer.mode.view||r.model.mode===n.Designer.mode.designpreview)&&(f.EnableImageExport||f.EnablePdfExport||f.EnableExcelExport||f.EnableCsvExport),e=i.getContainerSettings().ShowMaximize,o&&this.applyIconVisibility(l,"block"),t.isFilterIconEnable&&this.applyIconVisibility(a,"block"),e&&r.model.mode!==n.Designer.mode.design&&this.applyIconVisibility(v,"block"),f.EnableComment&&(this.applyIconVisibility(y,"block"),this.applyIconVisibility(p,"block")),f.PinWidget&&this.applyIconVisibility(w,"block"),r.model.isPinWidget&&u.find(".bbi-dbrd-maxim").remove(),this.getRefreshTimeIndicator(t.controlId,u),u},t.applyIconVisibility=function(t,i){n.isNullOrUndefined(t)||t.css("display",i).parent().css("display",i)},t.getRefreshTimeIndicator=function(t,i){var r=n.buildTag("div.bbi-dbrd-refreshtime-notifier bbi-dashboarddesigner-display-none","",{},{id:t+"_refreshTime_notifier"});r.insertAfter(i.find(".bbi-dbrd-refresh-icon"))},t.getControlSubHeader=function(t){var i=t.getJson().ContainerSettings.SubTitle,u=n.DashboardUtil.encodeText(i),r,f;t.ControlSubHeader=n.buildTag("div.bbi-dbrd-control-sub-header","",{display:!n.isNullOrUndefined(i)&&i.trim().length>0?"block":"none"});r=n.buildTag("div.bbi-dbrd-control-sub-title bbi-dbrd-designer-hoverable","",{width:"calc(100% - 10px)"},{});f=n.buildTag("span.e-title-text",u,{"font-size":t.getFontSizeBasedOnResolution(),"font-weight":t.isVisualWidget?400:500},{"data-tooltip":u});r.append(f);t.ControlSubHeader.prepend(r);BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-header").after(t.ControlSubHeader)},t.getControlIconContainer=function(t,i,r){var f=t.iconList,e=t.controlObj,h=t.headerProperties,o=e.getJson(),s,u;if(o.ContainerSettings.EnableComment=e.ControlContainer.hasClass("e-image")||e.ControlContainer.hasClass("e-rte-item")?!1:o.ContainerSettings.EnableComment,r.model.mode===n.Designer.mode.view)try{r._trigger("beforeWidgetIconRendered",{iconsinformation:f,widgetInformation:e,isFilterWidget:!t.showHeader&&!n.isNullOrUndefined(h)&&h.isFilterIconEnable,enableComment:o.ContainerSettings.EnableComment,enablePinWidget:o.ContainerSettings.PinWidget,uniqueId:o.UniqueId,dashboardComment:r.modules.serialization.dashboardPropertyJson.EnableComments})}catch(c){console.error(c)}for(s="<table><tr>",u=0;u<f.length;u++)s+=this.getIconTemplate("bbi-dbrd-designer-hoverable e-icon-dbrd-theme ".concat(f[u].class),f[u].id,f[u].name,f[u].tooltip,e);return s+="<\/tr><\/table>",i.append(BoldBIDashboardDesigner.bbdesignerstatic$(s)),i},t.getControlDescriptionIcon=function(t){var i=n.buildTag("div .bbi-dbrd-control-description e-icon-dbrd-theme bbi-dbrd-designer-hoverable"),r=t.getJson().ContainerSettings.Description;return!n.isNullOrUndefined(r)&&r.length>0?(i.addClass("bbi-dbrd-control-align"),i.attr("data-tooltip",r),t.isVisualWidget||i.css("line-height","12px")):(i.css("display","none"),i.attr("data-tooltip","")),i.css("font-size",t.getIconFontSizeBasedOnResolution()),i},t.setIconContainerForCardControl=function(t,i){if(i.model.mode===n.Designer.mode.view){var r='<div class="bbi-dbrd-controlIcon-container e-dbrd-single-card-controlIcon" id="'.concat(t.Name,'_controlIcon_container" style="height:22px;"><\/div>'),u={iconList:[],controlObj:t,showHeader:!0},f=n.Dashboard.WidgetContainerHelper.getControlIconContainer(u,BoldBIDashboardDesigner.bbdesignerstatic$(r),i);t.ControlContainer.find(".bbi-dbrd-control-container-wrapper").append(f)}},t.iconContainerForNoHeader=function(n,t,i){var u='<div class="bbi-dbrd-control-header" style="position:absolute; right:0px; top:2px;" data-widget-id="'.concat(n.controlId,'"><\/div>'),f=this.getControlHeaderIcons(n,t,i),r;t.ContentContainer.prepend(BoldBIDashboardDesigner.bbdesignerstatic$(u).append(f));i.model.IsEmbed&&i.isWidgetRequest(i.model.filterParameters)&&i.element.find(".bbi-dbrd-control-header").css("display","block");r=t.getControlContainerPaddingValue();t.ContentContainer.find(".bbi-dbrd-controlIcon-container").css({"padding-right":r+"px"})},t.updateWidgetNotConfiguredPanel=function(n){n.ContentContainer.closest(".bbi-dbrd-control-container").height()<57?(this.hideWidgetNotConfiguredIcon(n.ContentContainer),this.hideWidgetNotConfiguredContent(n.ContentContainer)):n.ContentContainer.closest(".bbi-dbrd-control-container").height()>=57&&n.ContentContainer.closest(".bbi-dbrd-control-container").height()<86?(this.showWidgetNotConfiguredIcon(n.ContentContainer),this.hideWidgetNotConfiguredContent(n.ContentContainer)):n.ContentContainer.closest(".bbi-dbrd-control-container").height()>=86&&(this.showWidgetNotConfiguredIcon(n.ContentContainer),this.showWidgetNotConfiguredContent(n.ContentContainer))},t.showWidgetNotConfiguredIcon=function(n){n.find(".bbi-widget-not-configured-icon").is(":visible")||setTimeout(function(){n.find(".bbi-widget-not-configured-icon").css("display","block")},0)},t.hideWidgetNotConfiguredIcon=function(n){n.find(".bbi-widget-not-configured-icon").is(":visible")&&setTimeout(function(){n.find(".bbi-widget-not-configured-icon").css("display","none")},0)},t.showWidgetNotConfiguredContent=function(n){n.find(".bbi-widget-not-configured-content").is(":visible")||setTimeout(function(){n.find(".bbi-widget-not-configured-content").css("display","block")},0)},t.hideWidgetNotConfiguredContent=function(n){n.find(".bbi-widget-not-configured-content").is(":visible")&&setTimeout(function(){n.find(".bbi-widget-not-configured-content").css("display","none")},0)},t.prototype.showLoadingIndicator=function(t){if(n.Dashboard.WidgetHelper.isDataWidget(t)){var i=t.ControlContainer||this.dashboardDesigner.designerPanel.selectedReportItems[0];i.find(".bbi-background-waiting-popup").show()}},t.prototype.hideLoadingIndicator=function(n){var t=n.ControlContainer||this.dashboardDesigner.designerPanel.selectedReportItems[0];t.find(".bbi-background-waiting-popup").hide()},t.hideWidgetContainerImage=function(n){n.find(".bbi-dbrd-isimage").hide()},t.hideWidgetContainer=function(n){n.ContentContainer.find(".bbi-dbrd-control").hide()},t.showWidgetContainerImage=function(n){this.hideNoDataDisplay(n);this.hideControlError(n);this.addWidgetNotConfiguredClass(n);this.hideControlContainer(n);n.ContentContainer.find(".bbi-dbrd-isimage").show()},t.showAlertMessageForData=function(t,i,r,u,f){var h=i.find(".bbi-dbrd-necessary-data-not-configured"),o=150;if(h.length===0){this.removeAlertMessageForData(i);var c=u?"table":"block",e=n.buildTag("div.bbi-dbrd-necessary-data-not-configured","",{display:c},{}),l=u?"bbi-dbrd-widget-not-configured-header-combine":"bbi-dbrd-widget-not-configured-header",s=n.buildTag("div."+l+" bbi-dbrd-designer-hoverable","",{},{"data-tooltip":t}),a=u?"bbi-information-icon-combine":"bbi-dbrd-necessary-data-not-configured-icon",v=n.isNullOrUndefined(f)?"inline-block":f.RowSpan>1&&f.ColumnSpan>1?"inline-block":"none",y=n.buildTag("div."+a+" bbi-dbrd-designer-hoverable","",{display:v},{"data-tooltip":t}),p=n.buildTag("div.bbi-dbrd-widget-not-necessary-data-configured-content",t,{display:i.height()<o||i.width()<o?"none":"block"},{});s.append(y,p);e.append(s);i.append(e);this.updateNoNecessaryDataContainerSize(i);this.updateZIndexInCW(i,e,r)}},t.updateZIndexInCW=function(t,i,r){if(!n.DashboardUtil.IsStringNullorWhiteSpace(r)&&t.find(".bbi-dbrd-isimage").length>0){var u=t.find(".bbi-dbrd-isimage")[0].style.zIndex;i.css("z-index",u)}},t.updateNoNecessaryDataContainerSize=function(t,i,r,u){var v=t.find(".bbi-dbrd-necessary-data-not-configured"),a,h;if(v.length>0){var c=190,l=32,y=i?".bbi-dbrd-widget-not-configured-header-combine":".bbi-dbrd-widget-not-configured-header",f=t.find(y),e=f.find(".bbi-dbrd-widget-not-necessary-data-configured-content"),o=f.find(".bbi-information-icon-combine"),s="";!n.isNullOrUndefined(o)&&o.length>0&&(a=n.isNullOrUndefined(u)?"inline-block":u.RowSpan>1&&u.ColumnSpan>1?"inline-block":"none",o.css({display:a}));t.height()<c||t.width()<c?(e.css({display:"none"}),s="none"):(t.find(".bbi-dbrd-isimage").show(),e.css({display:"block"}),s="block");h=t.height()<190||t.width()<190?t.height()-l:t.height()-(l+e.height());i||setTimeout(function(){f.find(".bbi-dbrd-necessary-data-not-configured-icon.bbi-dbrd-designer-hoverable").css({"margin-top":h/2});n.isNullOrUndefined(r)||r.updateSizeOfWidgetNotConfigured(t,h/2,s)},0)}},t.removeAlertMessageForData=function(n){n.find(".bbi-dbrd-necessary-data-not-configured").remove()},t.hideControlContainer=function(n){n.ContentContainer.find(".bbi-dbrd-control").hasClass("e-customwidgetitem")||n.ContentContainer.find(".bbi-dbrd-control").hasClass("e-datebucket-control")||n.ContentContainer.find(".bbi-dbrd-control").hide()},t.showControlContainer=function(n){n.ContentContainer.find(".bbi-dbrd-control").show()},t.hideControlError=function(n){n.ContentContainer.find(".bbi-dbrd-control-error").remove();n.ContentContainer.css("display","block")},t.hideNoDataDisplay=function(n){t.toggleNoDataDisplay(n,!1)},t.showNoDataDisplay=function(n){t.toggleNoDataDisplay(n,!0)},t.toggleNoDataDisplay=function(n,t){n.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").css("display",t?"block":"none").addClass("e-container-dbrd-theme")},t.onWidgetMouseOver=function(i){if(BoldBIDashboardDesigner.bbdesignerstatic$(i.currentTarget).parents().hasClass("bbi-container-widget"))BoldBIDashboardDesigner.bbdesignerstatic$(i.currentTarget).find(".bbi-dbrd-controlIcon-container").addClass("bbi-show-icon");else if(BoldBIDashboardDesigner.bbdesignerstatic$(i.currentTarget).hasClass("bbi-container-widget"))BoldBIDashboardDesigner.bbdesignerstatic$(i.currentTarget).find(".bbi-dbrd-controlIcon-container").first().addClass("bbi-show-icon");else{BoldBIDashboardDesigner.bbdesignerstatic$(i.currentTarget).find(".bbi-dbrd-controlIcon-container").addClass("bbi-show-icon-normal-widget");var r=n.Dashboard.WidgetHelper.getWidgetInstance(BoldBIDashboardDesigner.bbdesignerstatic$(i.currentTarget));t.controlTitleResponsiveness(r,!0)}},t.onWidgetMouseLeave=function(i){BoldBIDashboardDesigner.bbdesignerstatic$(i.currentTarget).find(".bbi-dbrd-controlIcon-container").removeClass("bbi-show-icon");var r=n.Dashboard.WidgetHelper.getWidgetInstance(BoldBIDashboardDesigner.bbdesignerstatic$(i.currentTarget));t.controlTitleResponsiveness(r,!1)},t.onRefreshIconMouseLeave=function(n){BoldBIDashboardDesigner.bbdesignerstatic$(n.currentTarget).parent().find(".bbi-dbrd-refreshtime-notifier").addClass("bbi-dashboarddesigner-display-none")},t.controlTitleResponsiveness=function(t,i){var l=t.designerInstance.modules.aiWidgetHelper.getChildWidget(t),c;if(n.isNullOrUndefined(l)){var h=t.getJson(),r=BoldBIDashboardDesigner.bbdesignerstatic$(t.ControlContainer).find(".bbi-dbrd-control-header"),f=t.ControlContainer.find(".bbi-dbrd-control-title-wrapper"),u=f.find(".bbi-dbrd-control-title");u.children().css({"text-overflow":"ellipsis"});var a=h.ContainerSettings.WidgetTitleFontInfo.AutoFontSize?h.ContainerSettings.WidgetTitleFontInfo.FontSize:22,o=t.designerInstance.measureText(u.text(),f.width(),{size:a,fontStyle:"Normal",fontFamily:"Roboto"}),s=t.ControlContainer.find(".bbi-dbrd-controlIcon-container").outerWidth(!0),e=f.find(".bbi-dbrd-control-description").is(":visible")?f.find(".bbi-dbrd-control-description").outerWidth(!0):0;h.ContainerSettings.TextAlignment===TextAlignment.Left?i?(u.css({width:o.width+e>=r.width()?r.width()-(s+e)>=u.width()?u.width():r.width()-(s+e):"auto"}),f.css({width:o.width+e+s>=r.width()?r.width()-s:r.width()})):i||(u.css({width:o.width>=r.width()?r.width()-e:"auto"}),f.css({width:o.width+e>r.width()?r.width():"calc(100%)"})):h.ContainerSettings.TextAlignment===TextAlignment.Center?i?u.css({width:o.width+e>f.width()-s*2?"calc(100% - "+(s*2+e)+"px)":"auto"}):i||u.css({width:o.width>f.width()?"calc(100%)":"auto"}):h.ContainerSettings.TextAlignment===TextAlignment.Right&&(i&&(t.Type==="NumberCard"||t.Type.toLowerCase()==="kpicard")?t.ControlContainer.find(".bbi-dbrd-controlIcon-container").css({right:"auto",left:"0px"}):i||u.css({width:o.width>f.width()?"calc(100%)":"auto"}));c=n.DashboardDesignerUtility.ContainerPropertyItem.prototype.getContainerTitleAlignmentValue(TextAlignment[t.getContainerSettings().TextAlignment]);u.css({"justify-content":c})}},t.onCombineWidgetClick=function(n){var t=BoldBIDashboardDesigner.bbdesignerstatic$(n.target).closest(".bbi-dbrditem");t.hasClass("bbi-selected-item")||BoldBIDashboardDesigner.bbdesignerstatic$(n.target).hasClass("bbi-dbrd-designer-hoverable")||(t.hasClass("bbi-combine-item")?t.find(".bbi-combine-selected").removeClass("bbi-combine-selected bbi-widget-selected"):t.find(".bbi-dbrd-controlIcon-container").hasClass("bbi-combine-selected")?t.parent().find(".bbi-combine-item .bbi-combine-selected").removeClass("bbi-combine-selected bbi-widget-selected"):(t.parent().find(".bbi-combine-item .bbi-combine-selected").removeClass("bbi-combine-selected bbi-widget-selected"),t.find(".bbi-dbrd-controlIcon-container").addClass("bbi-combine-selected"),t.find(".bbi-dbrd-control-header").addClass("bbi-combine-selected"),t.parent().find(".bbi-combine-item .bbi-dbrd-controlIcon-container:first").addClass("bbi-combine-selected bbi-widget-selected")))},t.disableHeader=function(t,i){var r={controlTitle:t.getContainerSettings().Title,controlId:t.ControlContainer.attr("data-name"),isMaximizeEnable:!1,isFilterIconEnable:t.getJson().FilterSettings.ActAsMasterWidget};n.isNullOrUndefined(t.ControlHeader)||(t.ControlHeader[0].innerHTML="");n.isNullOrUndefined(t.ControlSubHeader)||(t.ControlSubHeader[0].innerHTML="");t.ControlContainer.find(".bbi-dbrd-control-header").remove();t.ControlContainer.find(".bbi-dbrd-control-sub-header").remove();this.iconContainerForNoHeader(r,t,i);t.ContentContainer.css({height:"100%"})},t.updateDataNotConfiguredMsg=function(t,i){if(i.length>0){var r=n.DashboardUtil.encodeText(i),u=t.NoDataDispalyContainer.find(".e-nodata");u.html(r)}},t.updateNoDataIcon=function(t,i,r){var u=t.NoDataDispalyContainer.find(".bbi-widget-info-icon");i?u.remove():u.length===0&&(u=n.buildTag("div.bbi-widget-info-icon","",{display:"inline-block"},{}),u.insertBefore(t.NoDataDispalyContainer.find(".e-nodata")));this.updateNoDataContainerSize(t,t.NoDataDispalyContainer,!n.isNullOrUndefined(r))},t.updateNoDataDefaultImg=function(t,i){if(i){var u=t.getWidgetImage(),r=n.buildTag("div.bbi-dbrd-nodataimage","",{disply:"block",height:"100%",width:"100%"},{});r.append(u);t.NoDataDispalyContainer.prepend(r)}else t.NoDataDispalyContainer.find(".bbi-dbrd-nodataimage").remove()},t.updateNoDataFontColor=function(n,t){var i=n.NoDataDispalyContainer.find(".e-nodata");i.css("color",t)},t.updateNoDataImageOpacity=function(n,t){var i=n.NoDataDispalyContainer.find(".bbi-dbrd-nodataimage");i.css("opacity",t)},t.getMobileHeightFactor=function(t){var i=1;return n.isNullOrUndefined(t.getJson().ContainerSettings.Bounds.MobileHeightFactor)||t.getJson().ContainerSettings.Bounds.MobileHeightFactor===0||(i=t.getJson().ContainerSettings.Bounds.MobileHeightFactor),i},t}();t.WidgetContainerHelper=i})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={})),function(n){var t;(function(n){var t=function(){function n(){this.events=[]}return n.prototype.addListener=function(n,t){var i=this.find(n,t);i===-1?this.events.push({module:n,eventType:t}):this.events[i]={module:n,eventType:t}},n.prototype.removeListener=function(n,t){var i=this.find(n,t);i!==-1&&this.events.splice(i,1)},n.prototype.clear=function(){this.events=[]},n.prototype.isEventListenerConfigured=function(n,t){return this.find(n,t)!==-1},n.prototype.find=function(n,t){for(var r,i=0;i<this.events.length;i++)if(r=this.events[i],r.module===n&&r.eventType===t)return i;return-1},n}(),i,r;n.DesignerEventHelper=t,function(n){n[n.designPanel=0]="designPanel";n[n.propertyPanel=1]="propertyPanel";n[n.designer=2]="designer"}(i=n.Module||(n.Module={})),function(n){n[n.mouseDown=0]="mouseDown";n[n.mouseUp=1]="mouseUp";n[n.mouseClick=2]="mouseClick";n[n.mouseDbClick=3]="mouseDbClick"}(r=n.EventType||(n.EventType={}))})(t=n.Dashboard||(n.Dashboard={}))}(BoldBIDashboard||(BoldBIDashboard={}));
