!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e()}(function(){var e;window.ej=window.Syncfusion=window.Syncfusion||{},function(v,f,r){"use strict";f.version="14.4.0.15",f.consts={NamespaceJoin:"-"},f.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"},f.Orientation={Horizontal:"horizontal",Vertical:"vertical"},f.serverTimezoneOffset=0,f.persistStateVersion=null,Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e,t){return e[t]!==r}),String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t+1]);return e.replace(/\{[0-9]\}/g,"")},jQuery.uaMatch=function(e){e=e.toLowerCase();e=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:e[1]||"",version:e[2]||"0"}},f.defineClass=function(e,t,i,s){if(!e||!i)return r;for(var a=e.split("."),n=window,o=0;o<a.length-1;o++)f.isNullOrUndefined(n[a[o]])&&(n[a[o]]={}),n=n[a[o]];return(s||f.isNullOrUndefined(n[a[o]]))&&(n[a[o]]=t="function"==typeof t?t:function(){},n[a[o]].prototype=i),n[a[o]]},f.util={getNameSpace:function(e){e=e.toLowerCase().split(".");return"ej"===e[0]&&(e[0]="e"),e.join(f.consts.NamespaceJoin)},getObject:function(e,t){var i,s,a;if(!t)return r;for(i=t,s=e.split("."),a=0;a<s.length&&!f.util.isNullOrUndefined(i);a++)i=i[s[a]];return i},createObject:function(e,t,i){for(var s,a=e.split("."),e=i||window,n=e,o=a.length,l=0;l<o;l++)s=a[l],l+1==o?n[s]=t===r?{}:t:f.isNullOrUndefined(n[s])&&(n[s]={}),n=n[s];return e},isNullOrUndefined:function(e){return e===r||null===e},print:function(e,t){var i,s=f.buildTag("div"),e=e.clone();s.append(e),(t=t||window.open("","print","height=452,width=1024,tabbar=no")).document.write("<!DOCTYPE html>"),e=v("head").find("link").add("style"),"msie"===f.browserInfo().name?(i="",e.each(function(e,t){"LINK"==t.tagName&&v(t).attr("href",t.href),i+=t.outerHTML}),t.document.write("<html><head></head><body>"+i+s[0].innerHTML+"</body></html>")):(i="",t.document.write("<html><head>"),e.each(function(e,t){"LINK"==t.tagName&&v(t).attr("href",t.href),i+=t.outerHTML}),t.document.writeln(i+"</head><body>"),t.document.writeln(s[0].innerHTML+"</body></html>")),t.document.close(),t.focus(),setTimeout(function(){f.isNullOrUndefined(t.window)||(t.print(),setTimeout(function(){t.close()},1e3))},1e3)},ieClearRemover:function(e){var t=v(e).height();e.style.paddingTop=parseFloat(t/2)+"px",e.style.paddingBottom=parseFloat(t/2)+"px",e.style.height="1px",e.style.lineHeight="1px"},sendAjaxRequest:function(e){v.ajax({type:e.type,cache:e.cache,url:e.url,dataType:e.dataType,data:e.data,contentType:e.contentType,async:e.async,success:e.successHandler,error:e.errorHandler,beforeSend:e.beforeSendHandler,complete:e.completeHandler})},buildTag:function(e,t,i,s){var a=/^[a-z]*[0-9a-z]+/gi.exec(e)[0],n=(n=/#([_a-z]+[-_0-9a-z]+)/gi.exec(e))?n[n.length-1]:r,e=/\.([a-z]+[-_0-9a-z ]+)/gi.exec(e);return e=e?e[e.length-1]:r,v(document.createElement(a)).attr(n?{id:n}:{}).addClass(e||"").css(i||{}).attr(s||{}).html(t||"")},_preventDefaultException:function(e,t){if(e)for(var i in t)if(t[i].test(e[i]))return!0;return!1},getMaxZindex:function(){var e=1;return e=(e=Math.max.apply(null,v.map(v("body *"),function(e){if("absolute"==v(e).css("position")||"fixed"==v(e).css("position"))return parseInt(v(e).css("z-index"))||1})))!=r&&null!=e?e:1},blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},getDimension:function(e,t){var i,s,a,n=v(e).parents().andSelf().filter(":hidden");return n&&(s={visibility:"hidden",display:"block"},a=[],n.each(function(){var e,t={};for(e in s)t[e]=this.style[e],this.style[e]=s[e];a.push(t)}),i=/(outer)/g.test(t)?v(e)[t](!0):v(e)[t](),n.each(function(e){var t,i=a[e];for(t in s)this.style[t]=i[t]})),i},transitionEndEvent:function(){return{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[f.userAgent()]},animationEndEvent:function(){return{"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"}[f.userAgent()]},startEvent:function(){return f.isTouchDevice()||v.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return f.isTouchDevice()||v.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return f.isTouchDevice()||v.support.hasPointer?v.support.hasPointer&&!f.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return f.isTouchDevice()||v.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return f.isTouchDevice()||v.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return f.isTouchDevice()||v.support.hasPointer?"taphold":"click"},isDevice:function(){return f.getBooleanVal(v("head"),"data-ej-forceset",!1)?f.getBooleanVal(v("head"),"data-ej-device",this._device()):this._device()},isPortrait:function(){var e=document.documentElement;return e&&e.clientWidth/e.clientHeight<1.1},isLowerResolution:function(){return window.innerWidth<=640&&f.isPortrait()&&f.isDevice()||window.innerWidth<=800&&!f.isDevice()||window.innerWidth<=800&&!f.isPortrait()&&f.isWindows()&&f.isDevice()||f.isMobile()},isIOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)},isAndroidWebView:function(){return!("undefined"==typeof Android)},isWindowsWebView:function(){return-1!=location.href.indexOf("x-wmapp")},_device:function(){return/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|kindle|windows\sce|palm|smartphone|iemobile|mobile|pad|xoom|sch-i800|playbook/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||!0===f.getBooleanVal(v("head"),"data-ej-mobile",!1)},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||!0===f.getBooleanVal(v("head"),"data-ej-tablet",!1)||!f.isMobile()&&f.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&f.isMobile())&&this.isDevice()},getClearString:function(e){return v.trim(e.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n\t ]+<","g"),"><"))},getBooleanVal:function(e,t,i){e=v(e).attr(t);return null!=e?"true"==e.toLowerCase():i},_getSkewClass:function(e,t,i){var s=e.width(),a=e.height(),n=e.offset().left,o=e.offset().left+s,l=e.offset().top,e=e.offset().top+a,s=.3*s,a=.3*a;return t<n+s&&i<l+a?"e-m-skew-topleft":o-s<t&&i<l+a?"e-m-skew-topright":o-s<t&&e-a<i?"e-m-skew-bottomright":t<n+s&&e-a<i?"e-m-skew-bottomleft":n+s<t&&i<l+a&&t<o-s?"e-m-skew-top":t<n+s?"e-m-skew-left":o-s<t?"e-m-skew-right":e-a<i?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(e){v(e).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_getObjectKeys:function(e){var t,i=[];if(e=Object.prototype.toString.call(e)===Object.prototype.toString()?e:{},!Object.keys){for(t in e)e.hasOwnProperty(t)&&i.push(t);return i}if(Object.keys)return Object.keys(e)},_touchStartPoints:function(e,t){e&&(e=e.touches?e.touches[0]:e,t._distX=0,t._distY=0,t._moved=!1,t._pointX=e.pageX,t._pointY=e.pageY)},_isTouchMoved:function(e,t){var i,s;if(e)return s=(e=e.touches?e.touches[0]:e).pageX-t._pointX,i=e.pageY-t._pointY,Date.now(),t._pointX=e.pageX,t._pointY=e.pageY,t._distX+=s,t._distY+=i,e=Math.abs(t._distX),s=Math.abs(t._distY),!(e<5&&s<5)},listenEvents:function(e,t,i,s,a,n){for(var o=0;o<e.length;o++)f.listenTouchEvent(e[o],t[o],i[o],s,a,n)},listenTouchEvent:function(e,t,i,s,a,n){for(var o,l=s?"removeEventListener":"addEventListener",d=s?"off":"on",r=v(e),h=0;h<r.length;h++)switch(o=r[h],t){case"touchstart":f._bindEvent(o,l,t,i,"mousedown","MSPointerDown","pointerdown",n);break;case"touchmove":f._bindEvent(o,l,t,i,"mousemove","MSPointerMove","pointermove",n);break;case"touchend":f._bindEvent(o,l,t,i,"mouseup","MSPointerUp","pointerup",n);break;case"touchcancel":f._bindEvent(o,l,t,i,"mousecancel","MSPointerCancel","pointercancel",n);break;case"tap":case"taphold":case"ejtouchmove":case"click":v(o)[d](t,i);break;default:"msie"==f.browserInfo().name&&f.browserInfo().version<9?a._on(v(o),t,i):o[l](t,i,!0)}},_bindEvent:function(e,t,i,s,a,n,o){v.support.hasPointer?e[t](window.navigator.pointerEnabled?o:n,s,!0):e[t](i,s,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var e="webkitT,t,MozT,msT,OT".split(","),t=0,i=e.length;t<i;t++)if(e[t]+"ransform"in f.styles)return e[t].substr(0,e[t].length-1);return!1},addPrefix:function(e){return""===f.userAgent()?e:(e=e.charAt(0).toUpperCase()+e.substr(1),f.userAgent()+e)},destroyWidgets:function(e){v(e).find("[data-role *= ejm]").each(function(e,t){var t=v(t),i=t.data("ejWidgets");i&&t[i]("destroy")})},getAttrVal:function(e,t,i){e=v(e).attr(t);return null!=e?e:i},getOffset:function(e){var t={},e=e.offset()||{left:0,top:0};return v.extend(!0,t,e),"static"!=v("body").css("position")&&(e=v("body").offset(),t.left-=e.left,t.top-=e.top),t},getZindexPartial:function(e,t){var i,s,a;if(!f.isNullOrUndefined(e)&&0<e.length)return i=e.parents(),s=v("body").children(),!f.isNullOrUndefined(e)&&0<e.length&&s.splice(s.index(t),1),v(s).each(function(e,t){i.push(t)}),!(a=Math.max.apply(a,v.map(i,function(e){if("static"!=v(e).css("position"))return parseInt(v(e).css("z-index"))||1})))||a<1e4?a=1e4:a+=1,a},isValidAttr:function(e,t){var i;return void 0!==(e=v(e)[0])[t]||(i=!1,v.each(e,function(e){if(e.toLowerCase()==t.toLowerCase())return!(i=!0)}),i)}},v.extend(f,f.util),f.widgetBase={droppables:{default:[]},resizables:{default:[]},_renderEjTemplate:function(e,t,i,s){var a=null;return(a="object"==typeof e||e.startsWith("#")||e.startsWith(".")?v(e).attr("type"):a)&&(a=a.toLowerCase(),f.template[a])?f.template[a](this,e,t,i,s):f.template.render(this,e,t,i,s)},destroy:function(){var e,t,i,s;if(!this._trigger("destroy")){this.model.enablePersistence&&(this.persistState(),v(window).off("unload",this._persistHandler));try{this._destroy()}catch(e){}for(e=this.element.data("ejWidgets")||[],s=0;s<e.length;s++)e[s]==this.pluginName&&e.splice(s,1);for(e.length||this.element.removeData("ejWidgets");this._events&&(i=[],t=this._events.pop());){for(s=0;s<t[1].length;s++)v.isPlainObject(t[1][s])||i.push(t[1][s]);v.fn.off.apply(t[0],i)}this._events=null,this.element.removeClass(f.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName),this.element=null,this.model=null}},_on:function(e){this._events||(this._events=[]);for(var t=[].splice.call(arguments,1,arguments.length-1),i={},s=t.length;i&&"function"!=typeof i;)i=t[--s];return t[s]=f.proxy(t[s],this),this._events.push([e,t,i,t[s]]),v.fn.on.apply(e,t),this},_off:function(e,t,i,s){var a,n,o,l,d=this._events;if(d&&d.length)for("function"==typeof i&&(a=s,s=i,i=a),n=t.match(/\S+/g)||[""],o=0;o<d.length;o++)if((l=d[o])[0].length&&(!s||l[2]===s)&&(l[1][0]===t||n[0])&&(!i||l[1][1]===i)&&-1<v.inArray(e[0],l[0])){v.fn.off.apply(e,s?[t,i,l[3]]:[t,i]),d.splice(o,1);break}return this},_trigger:function(e,t){var i,s,a=null,n={};return v.extend(n,t),(a=e in this.model?this.model[e]:a)&&("string"==typeof a&&(a=f.util.getObject(a,window)),v.isFunction(a))&&(i=f.event(e,this.model,t),a=a.call(this,i),(s=this.model._applyScope)&&s.call(),t&&v.extend(t,i),i.cancel||!f.isNullOrUndefined(a))?!1===a||i.cancel:(s=Boolean(t),(t=t||{}).originalEventType=e,t.type=this.pluginName+e,i=v.Event(t.type,f.event(t.type,this.model,t)),this.element.trigger(i),s&&v.extend(t,i),f.isOnWebForms&&0==i.cancel&&this.model.serverEvents&&this.model.serverEvents.length&&f.raiseWebFormsServerEvents(e,t,n),i.cancel)},setModel:function(e,t){var i,s,a;if(!this._trigger("modelChange",{changes:e})){for(i in e){if(!t){if(this.model[i]===e[i]){delete e[i];continue}if(v.isPlainObject(e[i])&&(n(this.model[i],e[i]),v.isEmptyObject(e[i]))){delete e[i];continue}}if(this.dataTypes&&!0!==(s=this._isValidModelValue(i,this.dataTypes,e)))throw"setModel - Invalid input for property :"+i+" - "+s;this.model.notifyOnEachPropertyChanges&&this.model[i]!==e[i]&&(s={oldValue:this.model[i],newValue:e[i]},e[i]=this._trigger(i+"Change",s)?this.model[i]:s.newValue)}v.isEmptyObject(e)||(this._setFirst?((a=e.dataSource)&&delete e.dataSource,v.extend(!0,this.model,e),a&&(this.model.dataSource=a instanceof Array?a.slice():a,e.dataSource=this.model.dataSource),this._setModel&&this._setModel(e)):this._setModel&&!1===this._setModel(e)||v.extend(!0,this.model,e),"enablePersistence"in e&&this._setState(e.enablePersistence))}},option:function(e,t,i){if(!e)return this.model;if(v.isPlainObject(e))return this.setModel(e,i);if("string"==typeof e){e=e.replace(/^model\./,"");var s=f.getObject(e,this.model);if(t===r&&!i)return s;if("enablePersistence"===e)return this._setState(t);if(i&&t===f.extensions.modelGUID)return this._setModel(f.createObject(e,f.getObject(e,this.model),{}));if(i||f.getObject(e,this.model)!==t)return this.setModel(f.createObject(e,t,{}),i)}return r},_isValidModelValue:function(e,t,i){var s,a,n,o=t[e],l=i[e];if(o){if("string"==typeof o){if("enum"==o&&(i[e]=l&&l.toString().toLowerCase(),o="string"),"array"===o){if("[object Array]"===Object.prototype.toString.call(l))return!0}else if("data"===o||"parent"===o||typeof l===o)return!0;return"Expected type - "+o}if(l instanceof Array){for(a=0;a<l.length;a++)if(!0!==(s=this._isValidModelValue(e,t,l[a])))return" ["+a+"] - "+s}else for(n in l)if(s=this._isValidModelValue(n,o,l),!0!==s)return n+" : "+s}return!0},_returnFn:function(e,t){-1!=t.indexOf(".")?this._returnFn(e[t.split(".")[0]],t.split(".").slice(1).join(".")):e[t]=e[t].call(e.propName)},stringify:function(e){for(var t,i=this.observables,s=0;s<i.length;s++)t=f.getObject(i[s],e),f.isNullOrUndefined(t)||"function"!=typeof t||this._returnFn(e,i[s]);return JSON.stringify(e)},_setState:function(e){!0===e?(this._persistHandler=f.proxy(this.persistState,this),v(window).on("unload",this._persistHandler)):(this.deleteState(),v(window).off("unload",this._persistHandler))},_removeProp:function(e,t){f.isNullOrUndefined(e)||(-1!=t.indexOf(".")?this._removeProp(e[t.split(".")[0]],t.split(".").slice(1).join(".")):delete e[t])},persistState:function(){var e,t;if(this._ignoreOnPersist){for(e=_({},this.model),t=0;t<this._ignoreOnPersist.length;t++)this._removeProp(e,this._ignoreOnPersist[t]);e.ignoreOnPersist=this._ignoreOnPersist}else if(this._addToPersist){for(e={},t=0;t<this._addToPersist.length;t++)f.createObject(this._addToPersist[t],f.getObject(this._addToPersist[t],this.model),e);e.addToPersist=this._addToPersist}else e=_({},this.model);this._persistState&&(e.customPersists={},this._persistState(e.customPersists)),window.localStorage?(f.isNullOrUndefined(f.persistStateVersion)||null!=window.localStorage.getItem("persistKey")||window.localStorage.setItem("persistKey",f.persistStateVersion),window.localStorage.setItem("$ej$"+this.pluginName+this._id,JSON.stringify(e))):document.cookie&&(f.isNullOrUndefined(f.persistStateVersion)||null!=f.cookie.get("persistKey")||f.cookie.set("persistKey",f.persistStateVersion),f.cookie.set("$ej$"+this.pluginName+this._id,e))},deleteState:function(){window.localStorage?window.localStorage.removeItem("$ej$"+this.pluginName+this._id):document.cookie&&f.cookie.set("$ej$"+this.pluginName+this._id,model,new Date)},restoreState:function(e){var t,i,s=null;if(window.localStorage?s=window.localStorage.getItem("$ej$"+this.pluginName+this._id):document.cookie&&(s=f.cookie.get("$ej$"+this.pluginName+this._id)),s&&(t=JSON.parse(s),this._restoreState&&(this._restoreState(t.customPersists),delete t.customPersists),!1===f.isNullOrUndefined(t))&&(f.isNullOrUndefined(t.ignoreOnPersist)?f.isNullOrUndefined(t.addToPersist)||(this._addToPersist=t.addToPersist,delete t.addToPersist):(this._ignoreOnPersist=t.ignoreOnPersist,delete t.ignoreOnPersist)),f.isNullOrUndefined(t)||f.isNullOrUndefined(this._ignoreOnPersist))this.model=v.extend(!0,this.model,t);else{for(i in this._ignoreOnPersist)-1!==this._ignoreOnPersist[i].indexOf(".")?f.createObject(this._ignoreOnPersist[i],f.getObject(this._ignoreOnPersist[i],this.model),t):t[this._ignoreOnPersist[i]]=this.model[this._ignoreOnPersist[i]];this.model=t}!e&&s&&this._setModel&&this._setModel(this.model)},ignoreOnPersist:function(e){var t,i,s=[];if("object"==typeof e?s=e:"string"==typeof e&&s.push(e),this._addToPersist===r)for(this._ignoreOnPersist=this._ignoreOnPersist||[],t=0;t<s.length;t++)this._ignoreOnPersist.push(s[t]);else for(t=0;t<s.length;t++)i=this._addToPersist.indexOf(s[t]),this._addToPersist.splice(i,1)},addToPersist:function(e){var t,i,s=[];if("object"==typeof e?s=e:"string"==typeof e&&s.push(e),this._addToPersist===r)for(this._ignoreOnPersist=this._ignoreOnPersist||[],i=0;i<s.length;i++)t=this._ignoreOnPersist.indexOf(s[i]),this._ignoreOnPersist.splice(t,1);else for(i=0;i<s.length;i++)-1===v.inArray(s[i],this._addToPersist)&&this._addToPersist.push(s[i])},formatting:function(e,t,i){var s,a;if(e=e.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),i=f.preferredCulture(i)?i:"en-US",o=(s=e).split("{0:"),a=e.split("}"),o=o[0],a=a[1],"string"==typeof t&&v.isNumeric(t)&&(t=Number(t)),-1!=e.indexOf("{0:"))return null!=(e=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(e))&&null!=t?null!=o&&null!=a?o+f.format(t,e[2],i)+a:f.format(t,e[2],i):null!=t?t:"";if(!s.startsWith("{")||s.startsWith("{0:"))return null!=this.data&&null==this.data.Value?(v.each(this.data,function(e,t){s=s.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),s):this.data.Value;for(var n=s.split(""),o=(t=(t||"")+"").split(""),l=/[0aA\*CN<>\?]/gm,d=0,r=0;d<n.length;d++)n[d]=l.test(n[d])?"{"+r+++"}":n[d];return String.format.apply(String,[n.join("")].concat(o)).replace("{","").replace("}","")}},f.WidgetBase=function(){},n=function(e,t){for(var i in e)e[i]===t[i]&&delete t[i],v.isPlainObject(t[i])&&v.isPlainObject(e[i])&&n(e[i],t[i])},f.widget=function(c,m,p){var e,t,u;if("object"==typeof c)for(e in p=m,c)t=c[e],t instanceof Array&&(p._rootCSS=t[1],t=t[0]),f.widget(e,t,p),c[e]instanceof Array&&(p._rootCSS="");else u=p._rootCSS||f.getNameSpace(m),p=f.defineClass(m,function(e,t){var i,s,a,n,o,l,d,r,h;if(this.sfType=m,this.pluginName=c,this.instance=w,f.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},v.extend(this,f.widgetBase),this.dataTypes)for(i in t)if(s=this._isValidModelValue(i,this.dataTypes,t),!0!==s)throw"setModel - Invalid input for property :"+i+" - "+s;for((r=e.data("ejWidgets")||[]).push(c),e.data("ejWidgets",r),n=0;f.widget.observables&&this.observables&&n<this.observables.length;n++)(a=f.getObject(this.observables[n],t))&&f.createObject(this.observables[n],f.widget.observables.register(a,this.observables[n],this,e),t);if(this.element=e.jquery?e:v(e),this.model=_(!0,{},p.prototype.defaults,t),this.model.keyConfigs=_(this.keyConfigs),this.element.addClass(u+" e-js").data(c,this),this._id=e[0].id,this.element.attr("tabIndex")||this.element.attr("tabIndex",""),this.model.enablePersistence){if(window.localStorage&&!f.isNullOrUndefined(f.persistStateVersion)&&window.localStorage.getItem("persistKey")!=f.persistStateVersion)for(n in window.localStorage)-1!=n.indexOf("$ej$")&&window.localStorage.removeItem(n);else if(document.cookie&&!f.isNullOrUndefined(f.persistStateVersion)&&f.cookie.get("persistKey")!=f.persistStateVersion)for(o in document.cookie.split(/; */))-1!=o.indexOf("$ej$")&&f.cookie.set(o.split("=")[0],model,new Date);this._persistHandler=f.proxy(this.persistState,this),v(window).on("unload",this._persistHandler),this.restoreState(!0)}if(this._init(t),"object"==typeof this.model.keyConfigs&&!(this.model.keyConfigs instanceof Array)){for(d in l=!1,this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus),this.model.keyConfigs)if("focus"!==d){l=!0;break}l&&this._keyPressed&&(r=e,h="keydown",this.keySettings&&(r=this.keySettings.getElement&&this.keySettings.getElement()||r,h=this.keySettings.event||h),this._on(r,h,function(e){var t,i;this.model.keyConfigs&&(t=g.getActionFromCode(this.model.keyConfigs,e.which,e.ctrlKey,e.shiftKey,e.altKey),i={code:e.which,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey},t)&&!1===this._keyPressed(t,e.target,i,e)&&e.preventDefault()}))}this._trigger("create")},p),v.fn[c]=function(e){for(var t=e,i=0;i<this.length;i++){var s=v(this[i]),a=s.data(c),n=a&&s.hasClass(u),o=null;if(0<this.length&&v.isPlainObject(t)&&(e=f.copyObject({},t)),n){if(e)if(n=[].slice.call(arguments,1),0<this.length&&n[0]&&"option"===t&&v.isPlainObject(n[0])&&(n[0]=f.copyObject({},n[0])),v.isPlainObject(e))a.setModel(e);else if(0!==e.indexOf("_")&&!f.isNullOrUndefined(o=f.getObject(e,a))||0===e.indexOf("model."))if(o&&v.isFunction(o)){if((n=o.apply(a,n))!==r)return n}else{if(1==arguments.length)return o;a.option(e,arguments[1])}else l(m+": function/property - "+e+" does not exist")}else!0!==p.prototype._requiresID||v(this[i]).attr("id")||s.attr("id",d("ejControl_")),e&&"object"!=typeof e?l(c+": methods/properties can be accessed only after plugin creation"):(p.prototype.defaults&&!f.isNullOrUndefined(f.setCulture)&&"locale"in p.prototype.defaults&&"ejChart"!=c&&(!e||"locale"in e?f.isNullOrUndefined(e)&&((e={}).locale=f.setCulture().name):e.locale=f.setCulture().name),new p(s,e))}return-1!=c.indexOf("ejm")&&f.widget.registerInstance(s,c,m,p.prototype),this},f.widget.register(c,m,p.prototype)},v.extend(f.widget,{register:function(e,t,i){f.isNullOrUndefined(s[e])||l("ej.widget : The widget named "+e+" is trying to register twice."),s[e]={name:e,className:t,proto:i},f.widget.extensions&&f.widget.extensions.registerWidget(e)},registerInstance:function(e,t,i,s){o.push({element:e,pluginName:t,className:i,proto:s})},registeredWidgets:s={},registeredInstances:o=[]}),f.widget.destroyAll=function(e){var t,i,s,a;if(e&&e.length)for(t=0;t<e.length;t++)if((s=(i=e.eq(t).data()).ejWidgets)&&s.length)for(a=0;a<s.length;a++)i[s[a]]&&i[s[a]].destroy&&i[s[a]].destroy()},f.cookie={get:function(e){e=RegExp(e+"=([^;]+)").exec(document.cookie);return e&&1<e.length?e[1]:r},set:function(e,t,i){"object"==typeof t&&(t=JSON.stringify(t)),t=escape(t)+(null==i?"":"; expires="+i.toUTCString()),document.cookie=e+"="+t}},g={getActionFromCode:function(e,t,i,s,a){var n,o,l;for(n in i=i||!1,s=s||!1,a=a||!1,e)if("focus"!==n)for(o=g.getKeyObject(e[n]),l=0;l<o.length;l++)if(t===o[l].code&&i==o[l].isCtrl&&s==o[l].isShift&&a==o[l].isAlt)return n;return null},getKeyObject:function(e){for(var t,i,s,a={isCtrl:!1,isShift:!1,isAlt:!1},n=v.extend(!0,{},a),o=e.split(","),l=[],d=0;d<o.length;d++){if(t=null,-1!=o[d].indexOf("+"))for(i=o[d].split("+"),s=0;s<i.length;s++)t=g.getResult(v.trim(i[s]),a);else t=g.getResult(v.trim(o[d]),v.extend(!0,{},n));l.push(t)}return l},getResult:function(e,t){return"ctrl"===e?t.isCtrl=!0:"shift"===e?t.isShift=!0:"alt"===e?t.isAlt=!0:t.code=parseInt(e,10),t}},f.getScrollableParents=function(e){return v(e).parentsUntil("html").filter(function(){return"visible"!=v(this).css("overflow")}).add(v(window))},f.browserInfo=function(){var e,t,i,s,a={},n=[],o={opera:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,edge:/(edge)(?:.*version|)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie|trident) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(e in o)if(o.hasOwnProperty(e)&&(n=navigator.userAgent.match(o[e]),n)){if(a.name="opr"==n[1].toLowerCase()?"opera":n[1].toLowerCase(),a.version=n[2],a.culture={},a.culture.name=a.culture.language=navigator.language||navigator.userLanguage,void 0!==f.globalize){for(t=f.preferredCulture().name,i=navigator.language||navigator.userLanguage?f.preferredCulture(navigator.language||navigator.userLanguage):f.preferredCulture("en-US"),s=0;navigator.languages&&s<navigator.languages.length&&(i=f.preferredCulture(navigator.languages[s])).language!=navigator.languages[s];s++);f.preferredCulture(t),v.extend(!0,a.culture,i)}navigator.userAgent.match(/Trident\/7\./)&&(a.name="msie");break}return a.isMSPointerEnabled="msie"==a.name&&9<a.version&&window.navigator.msPointerEnabled,a.pointerEnabled=window.navigator.pointerEnabled,a},f.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"},f.event=function(e,t,i){return v.extend(i||{},{type:e,model:t,cancel:!1})},f.proxy=function(t,i,s){return t&&"function"==typeof t?"on"in t&&i?s?t.on(i,s):t.on(i):function(){var e=s?[s]:[];return e.push.apply(e,arguments),t.apply(i||this,e)}:null},f.hasStyle=function(e){var t,i,s=document.documentElement.style;if(e in s)return!0;for(t=["ms","Moz","Webkit","O","Khtml"],e=e[0].toUpperCase()+e.slice(1),i=0;i<t.length;i++)if(t[i]+e in s)return!0;return!1},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t,i=this.length;if(0!==i)for(t=0;t<i;t++)if(t in this&&this[t]===e)return t;return-1},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e};var n,g,a,l,s,o,_=f.copyObject=function(e,t){var i,s,a,n,o,l="boolean"!=typeof e?1:2,d=[].slice.call(arguments,l);for(1===l&&(t=e,e=r),a=0;a<d.length;a++)for(n in d[a])if(i=t[n],s=d[a][n],s!==r&&i!==s&&d[a]!==s&&t!==s)if(s instanceof Array)if(0===a&&e)for(t[n]=[],o=0;o<s.length;o++)_(!0,t[n],s);else t[n]=s.slice();else f.isPlainObject(s)?(t[n]=i||{},e?_(e,t[n],s):_(t[n],s)):t[n]=s;return t},w=function(){return this},t=0,d=function(e){return e+t++};f.template={},f.template.render=f.template["text/x-jsrender"]=function(e,t,i,s,a){"#"!==t.slice(0,1)&&(t=["<div>",t,"</div>"].join(""));a={prop:a,index:s};return v(t).render(i,a)},f.isPlainObject=function(e){if(!e||f.DataManager!==r&&e instanceof f.DataManager||"object"!=typeof e||e.nodeType||jQuery.isWindow(e))return!1;try{if(e.constructor&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(e){return!1}var t,i=f.support.isOwnLast;for(t in e)if(i)break;return t===r||e.hasOwnProperty(t)},a=!1,f.util.valueFunction=function(s){return function(e,t){var i=f.getObject(s,this.model);if(!1===a&&(a=f.getObject("observables.getValue",f.widget)),e===r)return f.isNullOrUndefined(a)?"function"==typeof i?i.call(this):i:a(i,t);"function"==typeof i?(this["ob.values"][s]=e,i.call(this,e)):f.createObject(s,e,this.model)}},f.util.getVal=function(e){return"function"==typeof e?e():e},f.support={isOwnLast:function(){function e(){this.a=1}for(var t in e.prototype.b=1,new e)return"b"===t}(),outerHTML:document.createElement("div").outerHTML!==r},l=f.throwError=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}},f.getRandomValue=function(e,t){var i;return e===r||t===r?f.throwError("Min and Max values are required for generating a random number"):0|("crypto"in window&&"getRandomValues"in crypto?(i=new Uint16Array(1),window.crypto.getRandomValues(i),i[0]%(t-e)+e):Math.random()*(t-e)+e)},f.extensions={},f.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}"}(window.jQuery,window.Syncfusion),$.fn.addEleAttrs=function(e){var i=$(this);$.each(e,function(e,t){t&&t.specified&&i.attr(t.name,t.value)})},$.fn.removeEleAttrs=function(s){return this.each(function(){var i=$(this),e=$(this.attributes).clone();$.each(e,function(e,t){t&&t.specified&&s.test(t.name)&&i.removeAttr(t.name)})})},$.fn.attrNotStartsWith=function(e){var t,s=[];for(this.each(function(){t=$(this.attributes).clone()}),i=0;i<t.length;i++){if(t[i]&&t[i].specified&&e.test(t[i].name))continue;s.push(t[i])}return s},$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var i=$(this),e=$(this.attributes).clone();$.each(e,function(e,t){t&&t.specified&&""===t.value&&i.removeAttr(t.name)})})},$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:!1!==ej.userAgent(),pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles}),$.extend($.expr[":"],{attrNotStartsWith:function(e,t,i){for(var s=e.attributes,a=0;a<s.length;a++)if(0===s[a].nodeName.indexOf(i[3]))return!1;return!0}}),e=$.fn.andSelf||$.fn.addBack,$.fn.andSelf=$.fn.addBack=function(){return e.apply(this,arguments)}}),function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.touch.min"],e):e()}(function(){var w,b,D;w=jQuery,(b=Syncfusion).widget("ejDatePicker","ej.DatePicker",{element:null,_rootCss:"e-datepicker",model:null,validTags:["input","div","span"],_setFirst:!1,_addToPersist:["value"],_cancelValue:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{dayHeaderFormat:"min",showPopupButton:!0,enableAnimation:!0,showFooter:!0,displayInline:!1,htmlAttributes:{},dateFormat:"",watermarkText:"Select date",value:null,minDate:new Date("01/01/1900"),maxDate:new Date("12/31/2099"),startLevel:"month",depthLevel:"",cssClass:"",startDay:-1,stepMonths:1,locale:"en-US",showOtherMonths:!0,enableStrictMode:!1,enablePersistence:!1,enabled:!0,width:"",height:"",enableRTL:!1,showRoundedCorner:!1,headerFormat:"MMMM yyyy",buttonText:"Today",readOnly:!1,specialDates:null,fields:{date:"date",tooltip:"tooltip",iconClass:"iconClass",cssClass:"cssClass"},showTooltip:!0,showDisabledRange:!0,highlightSection:"none",highlightWeekend:!1,validationRules:null,validationMessage:null,allowEdit:!0,tooltipFormat:"ddd MMM dd yyyy",allowDrillDown:!0,blackoutDates:[],beforeDateCreate:null,open:null,close:null,select:null,change:null,focusIn:null,focusOut:null,beforeOpen:null,beforeClose:null,navigate:null,create:null,destroy:null},dataTypes:{startDay:"number",stepMonths:"number",showOtherMonths:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",displayInline:"boolean",showPopupButton:"boolean",locale:"string",readOnly:"boolean",cssClass:"string",dateFormat:"string",watermarkText:"string",headerFormat:"string",buttonText:"string",specialDates:"data",showTooltip:"boolean",highlightSection:"enum",highlightWeekend:"boolean",enableAnimation:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",tooltipFormat:"string",allowEdit:"boolean",allowDrillDown:"boolean"},_setModel:function(e){var t,i,s=!1,a=!1,n=!1;for(t in e)switch(t){case"dayHeaderFormat":this.model.dayHeaderFormat=e[t],s=a=!0;break;case"showPopupButton":this._renderDateIcon(e[t],!0);break;case"displayInline":this._setDisplayInline(e[t]),this.model.allowEdit||e[t]||!this._isInputBox()||this.element.on("mousedown",w.proxy(this._showDatePopUp,this));break;case"value":b.isPlainObject(e[t])&&(e[t]=null),b.isNullOrUndefined(e.minDate)&&b.isNullOrUndefined(e.maxDate)?(this._setDateValue(e[t]),this._specificFormat()&&(this._stopRefresh=!0),e[t]=this.model.value):this._updateDateValue(e[t]),n=s=a=!0;break;case"specialDates":this.model.specialDates=e[t],this._createSpecialDateObject(),s=a=!0;break;case"fields":this.model.fields=e[t],this._mapField=this._getMapper(),s=a=!0;break;case"showTooltip":this.model.showTooltip=e[t],s=a=!0;break;case"highlightWeekend":this.model.highlightWeekend=e[t],s=a=!0;break;case"highlightSection":this.model.highlightSection=e[t],s=a=!0;break;case"dateFormat":this.model.dateFormat=e[t],this._ensureValue();break;case"minDate":this._setMinDate(e[t]),e[t]=this.model.minDate,this._ensureValue(),n=s=a=!0;break;case"maxDate":this._setMaxDate(e[t]),e[t]=this.model.maxDate,this._ensureValue(),n=s=a=!0;break;case"locale":this.model.locale=e[t],this.model.startDay=b.isNullOrUndefined(this._options.startDay)&&this.model.startDay===this.culture.calendar.firstDay||this._options.startDay===this.defaults.startDay?-1:this.model.startDay,this.model.dateFormat=b.isNullOrUndefined(this._options.dateFormat)&&this.model.dateFormat===this.culture.calendar.patterns.d?"":this.model.dateFormat,this._setCulture(e[t]),this.model.value&&this._setDateValue(this.model.value),e[t]=this.model.locale,s=a=!0;break;case"showOtherMonths":this.model.showOtherMonths=e[t],this._otherMonthsVisibility();break;case"enableStrictMode":this.model.enableStrictMode=e[t],n=s=a=!0;break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[t],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[t],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"readOnly":this.model.readOnly=e[t],this._disbleMaualInput();break;case"width":this._setWidth(e[t]);break;case"height":this._setHeight(e[t]);break;case"cssClass":this._setSkin(e[t]);break;case"enableRTL":this._setRTL(e[t]);break;case"showRoundedCorner":this._setRoundedCorner(e[t]);break;case"enabled":e[t]?this.enable():this.disable();break;case"buttonText":b.isNullOrUndefined(this._options)&&(this._options={}),this._options.buttonText=this.model.buttonText=e[t],this._localizedLabels.buttonText=this.model.buttonText,this._setFooterText(e[t]);break;case"showFooter":this._enableFooter(e[t]);break;case"watermarkText":b.isNullOrUndefined(this._options)&&(this._options={}),this._options.watermarkText=this.model.watermarkText=e[t],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"startDay":i=e[t],(parseInt(e[t])<0||6<parseInt(e[t]))&&(e[t]=this.culture.calendar.firstDay,i=-1),this.model.startDay=e[t],b.isNullOrUndefined(this._options)&&(this._options={}),this._options.startDay=i,s=a=!0;break;case"startLevel":this.model.startLevel=e[t],s=a=!0;break;case"headerFormat":this.model.headerFormat=e[t],s=a=!0;break;case"depthLevel":this.model.depthLevel=e[t],s=a=!0;break;case"htmlAttributes":this._addAttr(e[t]);break;case"allowEdit":this._changeEditable(e[t]);break;case"tooltipFormat":this.model.tooltipFormat=e[t],s=a=!0;break;case"allowDrillDown":this._allowQuickPick(e[t]),s=a=!0;break;case"showDisabledRange":this._setRestrictDateState(e[t]);break;case"blackoutDates":this.model.blackoutDates=e[t],this._initDisableObj(this.model.blackoutDates),s=a=!0}n&&(this._validateMinMaxDate(),e.value=this.model.value,e.maxDate=this.model.maxDate,e.minDate=this.model.minDate),this._setWaterMark(),s&&(this.isValidState||this.model.displayInline)&&this._refreshDatepicker(),a&&this._startLevel(this.model.startLevel),this._triggerChangeEvent(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.model.displayInline&&w(window).off("resize",w.proxy(this._OnWindowResize,this)),this._isOpen&&this.hide(),this.sfCalendar.remove(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this._cloneElement.removeClass("e-js e-input").removeClass(b.util.getNameSpace(this.sfType)),this._cloneElement.insertAfter(this.element),this.element.remove()},_init:function(e){this._options=e,this._cloneElement=this.element.clone(),this._dt_drilldown=!1,this._ISORegex(),this._initDisableObj(this.model.blackoutDates),this.animation={open:{duration:200},close:{duration:100}},this._animating=!1,this._isSupport=document.createElement("input").placeholder!=D,this._checkAttribute(),this._setValues(),this._createDatePicker(),this._setRestrictDateState(this.model.showDisabledRange),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),e&&e.value!=D&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var e,t,i,s;for(t in this.element.rules("add",this.model.validationRules),e=(e=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),e.settings.messages[name]={},this.model.validationRules)if(i=null,!b.isNullOrUndefined(this.model.validationRules[t])){if(b.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[t]))for(s in e.settings.messages[name][t]=w.validator.messages[t],this.model.validationMessage)t==s&&(i=this.model.validationMessage[t]);else i=this.model.validationRules.messages[t];e.settings.messages[name][t]=null!=i?i:w.validator.messages[t]}},_checkAttribute:function(){for(var e,t,i=["min","max","readonly","disabled"],s=["minDate","maxDate","readOnly","enabled"],a=0;a<i.length;a++)e=this.element.attr(i[a]),t=s[a],b.isNullOrUndefined(e)||(b.isNullOrUndefined(this._options)||b.isNullOrUndefined(this._options[t]))&&(this.model[t]="enabled"!=t&&"readOnly"!=t?new Date(e):"readOnly"==t?this.element.is("[readonly]"):!this.element.is("[disabled]"))},_updateDateValue:function(e){var t=this._checkDateObject(e);null!=t?(this.isValidState=!0,""==t?(this.element.val(""),this.model.value=null):(this.model.value=t,this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat)))):("string"==typeof t&&this.model.enableStrictMode?this.element.val(e):this.element.val(""),this.model.value=null,this.isValidState=""==this.element.val()),this._removeWatermark()},_ensureValue:function(){var e=this._parseDate(this.element.val(),this.model.dateFormat);this.model.value?this._setDateValue(this.model.value):e&&this._setDateValue(e)},_changeEditable:function(e){var t=e?"_on":"_off";this.element.is(":input")&&(e?(this.model.readOnly||this.element.attr("readonly",!1),this.element.off("mousedown",w.proxy(this._showDatePopUp,this))):(this.model.readOnly||this.element.attr("readonly","readonly"),this.model.displayInline||this.element.on("mousedown",w.proxy(this._showDatePopUp,this))),this[t](this.element,"blur",this._onFocusOut),this[t](this.element,"focus",this._onFocusIn),this[t](this.element,"keydown",this._onKeyDown))},_allowQuickPick:function(e){w(".e-datepicker-headertext",this.sfCalendar)[e?"on":"off"]("click",w.proxy(this._forwardNavHandler,this))},_setRestrictDateState:function(e){this.sfCalendar[e?"addClass":"removeClass"]("e-dp-restrict-show")},_setValues:function(){this.Date=new Date,this._id=this.element[0].id,this.isValidState=!0,this._setCulture(this.model.locale),this._setMinDate(this.model.minDate),this._setMaxDate(this.model.maxDate),this._calendarDate=this._zeroTime(new Date),(this.model.startDay<0||6<this.model.startDay)&&(this.model.startDay=0),this.Date.firstDayOfWeek=this.model.startDay,this.Date.fullYearStart="20",this._showHeader=!0,b.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._validateMinMaxDate(),this._dateValue=new Date(this._calendarDate.toString()),this._isIE7=this._checkIE7(),this._isIE8="msie"==b.browserInfo().name&&"8.0"==b.browserInfo().version,this._isIE9="msie"==b.browserInfo().name&&"9.0"==b.browserInfo().version,this._getInternalEvents=!1,this._flag=!0,this._ejHLWeekEnd=!1,this._isOpen=!1,this._prevDate=null,this._preValue=null,this._isFocused=!1},_addAttr:function(e){var s=this;w.map(e,function(e,t){var i=t.toLowerCase();"class"==i?s.wrapper.addClass(e):"disabled"==i&&"disabled"==e?s.disable():"readOnly"==i&&"readOnly"==e?s.model.readOnly=!0:("style"!=i&&"id"!=i&&b.isValidAttr(s.element[0],t)?s.element:s.wrapper).attr(t,e)})},_createDatePicker:function(){this._createWrapper(),this._wireEvents(),this.model.displayInline&&this.show(),this.model.enableRTL&&this._setRTL(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0)},_checkNameAttr:function(){!this.element.attr("name")&&this._isInputBox()&&this.element.attr("name",this.element[0].id),this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("name",this.element[0].id)},_createWrapper:function(){var e;this._mapField=this._getMapper(),this.model.specialDates&&this._createSpecialDateObject(),this._isInputBox()&&(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0"}),this.wrapper=b.buildTag("span.e-datewidget e-widget "+this.model.cssClass),b.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.innerWrapper=b.buildTag("span.e-in-wrap e-box"),this.wrapper.append(this.innerWrapper).insertBefore(this.element),this.innerWrapper.append(this.element),this.innerWrapper.addClass("e-padding"),this.dateIcon=b.buildTag("span.e-select#"+this._id+"-img","",{},this._isIE8?{unselectable:"on"}:{}).append(b.buildTag("span.e-icon e-calendar","",{},{"aria-label":"Select"}).attr(this._isIE8?{unselectable:"on"}:{})).insertAfter(this.element)),this._isSupport&&(!this.model.displayInline||this._isInputBox())||(this._hiddenInput=b.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._isInputBox()&&this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block"),w((e=this)._hiddenInput).focus(function(){e.element.focus()})),this._checkNameAttr(),this._setHeight(this.model.height),this._setWidth(this.model.width),this._id&&w("#e-"+this._id).remove(),this.sfCalendar=b.buildTag("div.e-datepicker e-popup e-widget "+this.model.cssClass+" e-calendar "+(this.model.specialDates&&this.model.specialDates[0][this._mapField._icon]?"e-icons ":""),"",{},{id:this._id?"e-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}).insertBefore(this.element),this.model.displayInline&&!this.element.is("input")&&this.sfCalendar.addClass("e-inline"),this.popup=this.sfCalendar,b.isTouchDevice()||this.sfCalendar.addClass("e-ntouch"),this._resizeCalender(),this._setDateValue(this.model.value),this._preValue=this._parseDate(this.element.val(),this.model.dateFormat),this._setWaterMark(),this._dateValue=new Date(this._calendarDate.toString()),this._createCalender(),this._setDisplayInline(this.model.displayInline),this.model.readOnly&&this._disbleMaualInput(),this.model.enabled?this.model.enabled&&w(this.element).hasClass("e-disable")&&this.enable():this.disable(),this._layoutChanged(),this._checkErrorClass(),this._addAttr(this.model.htmlAttributes)},_isInputBox:function(){return this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))},_renderDateIcon:function(e,t){t&&this.model.showPopupButton==e||(!e&&this.dateIcon?(this._bindInputEvent(),this.dateIcon.css("display","none"),this.innerWrapper.removeClass("e-padding")):(this.innerWrapper&&(this.innerWrapper.addClass("e-padding"),this.dateIcon.css("display","block")),this.model.displayInline||this._bindDateButton()),this.model.showPopupButton=e)},_resizeCalender:function(){"short"==this.model.dayHeaderFormat||"min"==this.model.dayHeaderFormat||"none"==this.model.dayHeaderFormat?this.sfCalendar.removeClass("e-headerlong"):"long"==this.model.dayHeaderFormat&&this.sfCalendar.addClass("e-headerlong")},_setWidth:function(e){e?(this.wrapper||this.element).width(e):this.model.width=this.wrapper?this.wrapper.outerWidth():this.element.width()},_setHeight:function(e){e?(this.wrapper||this.element).height(e):this.model.height=this.wrapper?this.wrapper.outerHeight():this.element.height(),this._isIE7&&this.element.height(this.innerWrapper.height())},_setRTL:function(e){e?(this.wrapper&&this.wrapper.addClass("e-rtl"),this.sfCalendar.addClass("e-rtl")):(this.wrapper&&this.wrapper.removeClass("e-rtl"),this.sfCalendar.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.innerWrapper&&this.innerWrapper.addClass("e-corner"),this.sfCalendar.addClass("e-corner")):(this.innerWrapper&&this.innerWrapper.removeClass("e-corner"),this.sfCalendar.removeClass("e-corner"))},_refreshDatepicker:function(){var e,t;this._stopRefresh?this._stopRefresh=!1:(e=this.element.val(),t=this._specificFormat()&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=e?this._parseDate(e,!0):this._parseDate(e),t=this._validateYearValue(t),this._setDateValue(t),this._specificFormat()&&this._compareDate(this.model.value,this._calendarDate)&&this.element.val(e),w(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._calendarDate,this.model.headerFormat)),this._resizeCalender(),this._dateValue=new Date(this._calendarDate.toString()),this._hoverDate=this._calendarDate.getDate()-1,this._renderCalendar(this,this._dateValue),this._setFooterText(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter),this._layoutChanged())},_validateYearValue:function(e){var t;return null!=e&&(t="string"==typeof(t=b.preferredCulture(this.model.locale).calendars.standard.twoDigitYearMax)?(new Date).getFullYear()%100+parseInt(t,10):t,this._calendarDate.getFullYear()-e.getFullYear()==100)&&this._calendarDate.getFullYear()>t&&e.setFullYear(this._calendarDate.getFullYear()),e},_setFooterText:function(e){w(".e-footer-text",this.sfCalendar).html(e)},_setSkin:function(e){(this.wrapper?(this.wrapper.removeClass(this.model.cssClass),this.wrapper):(this.element.removeClass(this.model.cssClass),this.element)).addClass(e),this.sfCalendar.removeClass(this.model.cssClass),this.sfCalendar.addClass(e)},_setDisplayInline:function(e){(this.model.displayInline=e)&&this._isInputBox()?(this.sfCalendar.insertAfter(this.wrapper),this._setDatePickerPosition()):e?(this.element.append(this.sfCalendar),this._isSupport&&this._isInputBox()||this._hiddenInput.css("display","none")):(this.sfCalendar.css("display","none"),w("body").append(this.sfCalendar),this._isOpen=!1),e?(this.show(),this._off(this.dateIcon,"mousedown",this._showDatePopUp),this.element.off("mousedown",w.proxy(this._showDatePopUp,this))):this._isInputBox()&&this._renderDateIcon(this.model.showPopupButton,!1)},_disbleMaualInput:function(){this.model.readOnly?(w(this.element).attr("readonly","readonly"),this.model.displayInline||this.hide()):this.model.allowEdit&&w(this.element).prop("readonly",!1)},_checkDateObject:function(e,t){return e&&("object"!=typeof JSON||"{}"!==JSON.stringify(e))&&(e instanceof Date||(e=(t=(t=this._specificFormat()?this._parseDate(e,!0):this._parseDate(e,t))||this._checkJSONString(e))||null),!isNaN(Date.parse(e)))&&(this._dateValue=this._calendarDate=this._zeroTime(e),this._validateDate(e))?this._dateValue:null},_checkJSONString:function(e){return isNaN(Date.parse(e))?this._extISORegex.exec(e)||this._basicISORegex.exec(e)?this._dateFromISO(e):void 0:new Date(e).toJSON()===e||new Date(e).toDateString()===e||new Date(e).toGMTString()===e||new Date(e).toISOString()===e||new Date(e).toLocaleString()===e||new Date(e).toString()===e||new Date(e).toUTCString()===e?new Date(e):"string"==typeof e?this._dateFromISO(e):void 0},_dateFromISO:function(e){var t,i,s,a,n,o,l,d=this._extISORegex.exec(e)||this._basicISORegex.exec(e),r="",h="",c="";if(d){for(t=0;t<this._dates.length;t++)if(this._dates[t][1].exec(d[1])){r=this._dates[t][0];break}if(d[3])for(i=0;i<this._times.length;i++)if(this._times[i][1].exec(d[3])){h=(d[2]||" ")+this._times[i][0];break}for(s=(r+h+(c=d[4]&&this._zeroRegex.exec(d[4])?"Z":c)).match(this._tokens),a=[],o=0;o<s.length;o++)l=s[o],n=this._checkLiteral(s[o]),l=this._numberRegex[n?s[o].toLowerCase():l.length]||new RegExp("^\\d{1,"+l.length+"}"),(l=e.match(l))&&(0<=e.substr(0,e.indexOf(l))&&!n&&(0<=s[o].indexOf("M")?a.push(parseInt(l[0])-1):a.push(parseInt(l[0]))),e=e.slice(e.indexOf(l[0])+l[0].length));return new Date(a[0],a[1],a[2],a[3],a[4],a[5])}},_checkLiteral:function(e){return"t"==(char=e.toLowerCase())||"z"==char||":"==char||"-"==char},_checkInstanceType:function(e){return!(e=this._stringToObject(e))||(e instanceof Date||(e=this._parseDate(e)),isNaN(Date.parse(e)))?null:this._zeroTime(e)},_stringToObject:function(e){var t;return e="string"==typeof e?null!=(t=b.parseDate(e,this.model.dateFormat,this.model.locale))?t:new Date(e):e},_validateMinMaxDate:function(){var e=!1,t=!1;this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode?this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.minDate,t=!(this.isValidState=!1)):this.model.value>this.model.maxDate?(this._calendarDate=this.model.maxDate,t=!(this.isValidState=!1)):this.isValidState=!0:this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate):(this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.value=this.model.minDate,e=!0):this.model.value>this.model.maxDate&&(this._calendarDate=this.model.value=this.model.maxDate,e=!0):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),e&&this.element.val(this._formatter(this.model.value,this.model.dateFormat)),t&&this._getInternalEvents&&this._trigger("outOfRange")},_setCulture:function(e){this.culture=b.preferredCulture(e),this.culture&&(this.model.locale="en"==this.culture.name?"en-US":this.culture.name,this.Date.dayNames=this.culture.calendar.days.names,this.Date.dayNamesMin=this.culture.calendar.days.namesShort,this.Date.abbrDayNames=this.culture.calendar.days.namesAbbr,this.Date.monthNames=this.culture.calendar.months.names,this.Date.abbrMonthNames=this.culture.calendar.months.namesAbbr,this.Date.format=this.culture.calendar.patterns.d,""==this.model.dateFormat&&(this.model.dateFormat=this.culture.calendar.patterns.d),-1==this.model.startDay)&&(this.model.startDay=this.culture.calendar.firstDay),this._separator=this._getSeparator(),this._localizedLabels=this._getLocalizedLabels(),b.isNullOrUndefined(this._options)||(b.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),b.isNullOrUndefined(this._options.buttonText))||(this._localizedLabels.buttonText=this._options.buttonText),this._localizedLabelToModel()},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?w(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_setDatePickerPosition:function(){var e,t,i,s,a,n,o,l,d;this.model.displayInline&&!this._isInputBox()||(e=this.element.is("input")?this.wrapper:this.element,t=this._getOffset(e),o=w(document).scrollTop()+w(window).height()-(t.top+w(e).outerHeight()),l=t.top-w(document).scrollTop(),i=this.sfCalendar.outerHeight(),s=this.sfCalendar.outerWidth(),a=t.left,d=e.outerHeight(),e.height(),n=this._getZindexPartial(),o=i<o||l<i?t.top+d+3:t.top-i-3,l=w(document).scrollLeft()+w(window).width()-a,d=w(document).scrollLeft()+a+e.width(),(this.model.enableRTL||l<s&&s<a+e.outerWidth()&&!b.isNullOrUndefined(this.wrapper))&&(a+=this.wrapper.width()-this.sfCalendar.width()),d<s&&(a=t.left),this.sfCalendar.css({left:a+"px",top:o+"px","z-index":n}))},_getOffset:function(e){return b.util.getOffset(e)},_getZindexPartial:function(){return b.util.getZindexPartial(this.element,this.sfCalendar)},_setMinDate:function(e){this.model.minDate=this._checkInstanceType(e),this.model.minDate||(this.model.minDate=new Date("11/31/1899"))},_setMaxDate:function(e){this.model.maxDate=this._checkInstanceType(e),this.model.maxDate||(this.model.maxDate=new Date("12/31/2099"))},_setDateValue:function(e,t){t=this._checkDateObject(e,t);null!=t?(this.isValidState=!0,this.model.value=new Date(t.toString()),this._validateMinMaxDate(),this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat))):(e instanceof Date&&(this._validateMinMaxDate(),e=this._formatter(e,this.model.dateFormat)),this.model.enableStrictMode?this.element.val(e):this.element.val(null),this.model.value=null,this._triggerChangeEvent(),this.isValidState=!(""!=this.element.val()&&!b.isNullOrUndefined(this.element.val()))),this._removeWatermark()},_updateInputVal:function(){null==this._validateValue()&&this.model.enableStrictMode||!this.sfCalendar.find(".e-datepicker-days").is(":visible")||this._refreshDatepicker()},_validateInputVal:function(){var e=this._validateValue();null==e||this.model.enableStrictMode||(e<=this.model.maxDate&&e>=this.model.minDate||(this.model.value=null),this.isValidState=!0)},_validateValue:function(){var e=this._specificFormat()&&this.element.val()!=this._formatter(this._preValue,this.model.dateFormat,this.model.locale)?this._parseDate(this.element.val(),!0):this._parseDate(this.element.val());return this._validateYearValue(e)},_getSeparator:function(){var e,t;for(formats=this.culture?this.culture.calendar.patterns.d:this.model.dateFormat,e=new RegExp("^[a-zA-Z0-9]+$"),t=0;t<formats.length;t++)if(!e.test(formats[t]))return formats[t]},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=-1;if(7<=(e=null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)?parseFloat(RegExp.$1):e)&&e<8)return!0}return!1},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_formatter:function(e,t){t=this._checkFormat(t);return b.format(e,t,this.model.locale)},_parseDate:function(e,t){var i=this._checkFormat(this.model.dateFormat);return DateValue=e,this._specificFormat()&&DateValue!=D&&""!=e&&1!=t&&b.format(b.parseDate(DateValue,i,this.model.locale),this.model.dateFormat,this.model.locale)!=DateValue?this._dateValue:b.parseDate(e,i,this.model.locale)},_checkFormat:function(e){var t=this,i=this._regExp();return e.replace(i,function(e){return"/"===e&&"/"!==b.preferredCulture(t.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},_zeroTime:function(e){e="string"==typeof e?this._parseDate(e):new Date(e);return e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),e},_getDaysInMonth:function(e){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][e.getMonth()]},_addDays:function(e,t){return e.setDate(e.getDate()+t),e},_addYears:function(e,t){return e.setFullYear(e.getFullYear()+t),e},_addMonths:function(e,t){var i=e.getDate();return e.setMonth(e.getMonth()+t),i>e.getDate()&&this._addDays(e,-e.getDate()),e},_isWeekend:function(e){return 0==e.getDay()||6==e.getDay()},_isSpecialDates:function(e){if(this.model.specialDates)for(var t=0;t<this.model.specialDates.length;t++)if(this.model.specialDates[t]&&this.model.specialDates[t][this._mapField._date]&&e.getDate()==this.model.specialDates[t][this._mapField._date].getDate()&&e.getMonth()==this.model.specialDates[t][this._mapField._date].getMonth()&&e.getFullYear()==this.model.specialDates[t][this._mapField._date].getFullYear())return this._getIndex=t,!0;return!1},_getMapper:function(){var e=this.model.fields,t={_date:null,_tooltip:null,_icon:null,_custom:null};return t._date=e&&e.date?e.date:"date",t._tooltip=e&&e.tooltip?e.tooltip:"tooltip",t._icon=e&&e.iconClass?e.iconClass:"iconClass",t._custom=e&&e.cssClass?e.cssClass:"cssClass",t},_createSpecialDateObject:function(){for(var e=0;e<this.model.specialDates.length;e++)this.model.specialDates[e][this._mapField._date]=this._checkInstanceType(this.model.specialDates[e][this._mapField._date])},_getMonthName:function(e,t){return(e?this.Date.abbrMonthNames:this.Date.monthNames)[t.getMonth()]},_displayNewMonth:function(e,t){return this._setDisplayedMonth(this.displayedMonth+e,this.displayedYear+t,!0),!1},_setDisplayedMonth:function(e,t,i){var s,a,n;this.model.minDate==D||this.model.maxDate==D||((n=new Date(this.model.minDate.getTime())).setDate(1),(s=new Date(this.model.maxDate.getTime())).setDate(1),!e&&!t||isNaN(e)&&isNaN(t)?(a=this._zeroTime(new Date)).setDate(1):a=isNaN(e)?new Date(t,this.displayedMonth,1):isNaN(t)?new Date(this.displayedYear,e,1):new Date(t,e,1),a.getTime()<n.getTime()?a=n:a.getTime()>s.getTime()&&(a=s),t=this.displayedMonth,e=this.displayedYear,this.displayedMonth=a.getMonth(),this.displayedYear=a.getFullYear(),n=a,!i)||this.displayedMonth==t&&this.displayedYear==e||(this._renderCalendar(this,n),this._dateValue=n,this._trigger("monthChanged",[this.displayedMonth,this.displayedYear]))},_clearSelected:function(){this.numSelected=0,"week"==this.model.highlightSection?w("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-selected-week"):"month"==this.model.highlightSection?w("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().parent().removeClass("e-selected-month"):"workdays"==this.model.highlightSection?w("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-work-week"):w("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1)},_addSelected:function(){"week"==this.model.highlightSection?w("td.e-active",this.sfCalendar).parent().addClass("e-selected-week"):"month"==this.model.highlightSection?w("td.e-active, this.sfCalendar").parent().parent().addClass("e-selected-month"):"workdays"==this.model.highlightSection&&w("td.e-active",this.sfCalendar).parent().addClass("e-work-week")},_hideOtherMonths:function(e){w("td.other-month",e).css("visibility","hidden")},_showOtherMonths:function(e){w("td.other-month",e).css({visibility:"visible"})},_otherMonthsVisibility:function(){this.model.showOtherMonths?this._showOtherMonths(this.sfCalendar):this._hideOtherMonths(this.sfCalendar)},_createCalender:function(){b.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(b.buildTag("span.e-prev").append(b.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(b.buildTag("span.e-text").append(b.buildTag("span.e-datepicker-headertext").text(this._formatter(this._calendarDate,this.model.headerFormat)).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(b.buildTag("span.e-next").append(b.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this.sfCalendar),this._enableHeader(this._showHeader);var e=b.buildTag("table.e-dp-viewdays","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{});this.sfCalendar.append(e),this._renderCalendar(this),this._startLevel(this.model.startLevel),b.buildTag("div.e-footer").append(b.buildTag("span.e-footer-icon")).append(b.buildTag("span.e-footer-text")).appendTo(this.sfCalendar),w(".e-footer-text",this.sfCalendar).html(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter)},_enableHeader:function(e){e?w(".e-header",this.sfCalendar).show():w(".e-header",this.sfCalendar).hide()},_enableFooter:function(e){e?w(".e-footer",this.sfCalendar).show():w(".e-footer",this.sfCalendar).hide()},_checkArrows:function(e,t){this._preArrowCondition(e,this.model.minDate.getFullYear()),this._nextArrowCondition(t,this.model.maxDate.getFullYear())},_checkDateArrows:function(){this._preArrowCondition(this._tempMinDate,this.model.minDate),this._nextArrowCondition(this._tempMaxDate,this.model.maxDate)},_preArrowCondition:function(e,t){e<=t?this.sfCalendar.find(".e-arrow-sans-left").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-left").removeClass("e-disable").attr({"aria-disabled":!1})},_nextArrowCondition:function(e,t){t<=e?this.sfCalendar.find(".e-arrow-sans-right").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-right").removeClass("e-disable").attr({"aria-disabled":!1})},_previousNextHandler:function(e){var t,i;if(this.model.readOnly||!this.model.enabled||w(e.target).hasClass("e-disable"))return!1;switch(e.preventDefault(),t=w("table",this.sfCalendar),t=this._navigateFrom(t),e=!!(w(e.target).is("a")?w(e.target.parentNode):w(e.target)).hasClass("e-prev"),this._processNextPrevDate(e),w("table",this.sfCalendar).get(0).className){case"e-dp-viewdays":i="month";break;case"e-dp-viewmonths":i="year";break;case"e-dp-viewyears":i="decade";break;case"e-dp-viewallyears":i="century"}this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:i,navigateFrom:t})},_processNextPrevDate:function(e){var t,i,a,n;if(this._DRPdisableFade&&(s=new Date(this.sfCalendar.find("td.current-month").attr("date")),this._dateValue=s),e&&this.sfCalendar.find(".e-arrow-sans-left").hasClass("e-disable")||!e&&this.sfCalendar.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;switch((t=w("table",this.sfCalendar)).get(0).className){case"e-dp-viewdays":if(a=this.model.stepMonths,e){if(this._dateValue<=this.model.minDate)return this._flag=!1}else if(this._dateValue>=this.model.maxDate)return this._flag=!1;this._flag=!0,this._addMonths(this._dateValue,e?-a:a),this._clickedDate&&(this._calendarDate=this._clickedDate),this._dateValue=this._dateValue<this.model.minDate?new Date(this.model.minDate.toString()):this._dateValue,this._dateValue=this._dateValue>this.model.maxDate?new Date(this.model.maxDate.toString()):this._dateValue,this._renderCalendar(this,this._dateValue),w(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),this._addFocus("day",this._hoverDate),a=this._findFirstLastDay(new Date(this._dateValue.toString())),this._preArrowCondition(a.firstDay,this.model.minDate),this._nextArrowCondition(a.lastDay,this.model.maxDate);break;case"e-dp-viewmonths":if((a=this._dateValue).setFullYear(w(".e-datepicker-headertext",this.sfCalendar).text()),e){if(a.getFullYear()<=this.model.minDate.getFullYear())return this._flag=!1}else if(a.getFullYear()>=this.model.maxDate.getFullYear())return this._flag=!1;this._flag=!0,this._addYears(a,e?-1:1),this._renderCalendar(this,a),i=a.getFullYear(),w(".e-datepicker-headertext",this.sfCalendar).text(i),w("tbody,tr.e-week-header",t).not(".e-datepicker-months").hide(),w(w(t).find(".e-datepicker-months")).show(),this._addFocus("month",this._hoverMonth),this._checkArrows(i,i);break;case"e-dp-viewyears":if((a=this._dateValue).setFullYear(w(t).find(".e-state-hover").text()),e){if(parseInt(w("td.e-year-first:first").text())<=this.model.minDate.getFullYear())return this._flag=!1}else if(parseInt(w("td.e-year-last:first").prev().text())>=this.model.maxDate.getFullYear())return this._flag=!1;this._flag=!0,w(t).find(".e-state-hover").hasClass("e-year-first")&&e||w(t).find(".e-state-hover").hasClass("e-year-last")&&!e?this._dateValue.setFullYear(a.getFullYear()):w(t).find(".e-state-hover").hasClass("e-year-first")&&!e?this._dateValue.setFullYear(a.getFullYear()+11):w(t).find(".e-state-hover").hasClass("e-year-last")&&e?this._dateValue.setFullYear(a.getFullYear()-11):this._dateValue.setFullYear(a.getFullYear()+(e?-10:10)),this._renderCalendar(this,this._dateValue),n=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1),w(".e-datepicker-headertext",this.sfCalendar).text(n+1+" - "+(n+10)),w("tbody,tr.e-week-header",t).not(".e-datepicker-years").hide(),w(w(t).find(".e-datepicker-years")).show(),this._addFocus("year",this._hoverYear+(w(".e-year-first.e-hidedate").length?-1:0)),this._checkArrows(n+1,n+10);break;case"e-dp-viewallyears":if(e){if(parseFloat(w("td.e-allyear-first",t.get(0)).text().split("-")[1])<=this.model.minDate.getFullYear())return this._flag=!1}else if(parseFloat(w("td.e-allyear-last",t.get(0)).prev().text().split("-")[1])>=this.model.maxDate.getFullYear())return this._flag=!1;this._flag=!0,this._dateValue.setFullYear((this._lastHoveredYear||this._dateValue.getFullYear())+(e?-100:100)),this._lastHoveredYear=this._dateValue.getFullYear(),this._renderCalendar(this,this._dateValue),n=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%100+1),i=parseFloat(w("td.e-allyear-last",t.get(0)).prev().text().split("-")[1]),w(".e-datepicker-headertext",this.sfCalendar).text(n+1+" - "+i),w("tbody,tr.e-week-header",t).not(".e-datepicker-allyears").hide(),w(w(t).find(".e-datepicker-allyears")).show(),this._addFocus("allyear",this._hoverAllYear+(w(".e-allyear-first.e-hidedate").length?-1:0)),this._checkArrows(n+1,i)}this._layoutChanged()},_addFocus:function(e,i){var t,s="day"==e?"current-month":"e-current-"+e,s=this.sfCalendar.find("tbody tr td."+s);return"month"==e&&w(s).each(function(e,t){parseInt(w(t).attr("index"))==parseInt(i)&&(i=e)}),t=(t=s[i])||s.last(),this.sfCalendar.find("table td").removeClass("e-state-hover"),w(t).addClass("e-state-hover"),this._setActiveState(e),i},_setActiveState:function(e){var i,t,s;if(this.model.value instanceof Date){var a=this.sfCalendar.find("tbody tr td.e-current-"+e),n=this,o=-1;switch(e){case"month":this.model.value.getFullYear()===parseInt(w(".e-text",this.sfCalendar).text())&&w(a).each(function(e,t){parseInt(w(t).attr("index"))==parseInt(n.model.value.getMonth())&&(o=e)});break;case"year":i=this.model.value.getFullYear(),w(a).each(function(e,t){parseInt(t.innerHTML)==parseInt(i)&&(o=e)});break;case"allyear":t=parseInt(this.model.value.getFullYear())-(parseInt(this.model.value.getFullYear())%10+1),s=1+t+" - "+(10+t),w(a).each(function(e,t){parseInt(t.innerHTML)==parseInt(s)&&(o=e)})}(e=a[o])&&(this.sfCalendar.find("table td").removeClass("e-active"),w(e).hasClass("e-hidedate")||w(e).addClass("e-active"))}},_setFocusByName:function(e,i){var s,t,a=this.sfCalendar.find("tbody tr td.e-current-"+e);return w(a).each(function(e,t){parseInt(t.innerHTML)==parseInt(i)&&(s=e)}),t=(t=a[s])||a.last(),this.sfCalendar.find("table td").removeClass("e-state-hover"),w(t).addClass("e-state-hover"),this._setActiveState(e),s},_getHeaderTxt:function(){return this.sfCalendar.find(".e-datepicker-headertext").text()},_findFirstLastDay:function(e){return y=e.getFullYear(),m=e.getMonth(),{firstDay:new Date(y,m,1),lastDay:new Date(y,m+1,0)}},_forwardNavHandler:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e&&e.preventDefault();var t,i,s=w("table",this.sfCalendar),e=w("table",this.sfCalendar).get(0).className;switch(navFrom=this._navigateFrom(s),e){case"e-dp-viewdays":this._hoverMonth=this._getDateObj(s.find(".e-state-hover")).getMonth()||this._getDateObj(s.find(".e-active")).getMonth()||0,this._DRPdisableFade&&(this._renderCalendar(this,this._calendarDate),w(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat))),this._startLevel("year"),i="year",this._addFocus("month",this._hoverMonth);break;case"e-dp-viewmonths":t=this._getHeaderTxt(),this._startLevel("decade"),i="decade",this._hoverYear=this._setFocusByName("year",t);break;case"e-dp-viewyears":t=this._getHeaderTxt(),this._startLevel("century"),i="century",this._hoverAllYear=this._setFocusByName("allyear",t)}"century"!=navFrom&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:i,navigateFrom:navFrom}),this._layoutChanged()},_cellSelection:function(){var e;w("table",this.sfCalendar);switch(w("table",this.sfCalendar).get(0).className){case"e-dp-viewmonths":this._hoverMonth=this._addFocus("month",this._dateValue.getMonth());break;case"e-dp-viewyears":e=new Date(this._dateValue.toString()),this._navigationToPrevNext("year"),this._dateValue=e,this._hoverYear=this._setFocusByName("year",this._dateValue.getFullYear());break;case"e-dp-viewallyears":e=new Date(this._dateValue.toString()),this._navigationToPrevNext("allyear"),this._dateValue=e,e=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1),this._hoverAllYear=this._setFocusByName("allyear",1+e+" - "+e+10)}this._layoutChanged()},_navigationToPrevNext:function(e){var i,t=this.sfCalendar.find("tbody tr td.e-current-"+e),s=this._dateValue.getFullYear();w(t).each(function(e,t){parseInt(t.innerHTML)==parseInt(s)&&(i=e)}),(t=t[i])&&(w(t).hasClass("e-"+e+"-last")?this._processNextPrevDate(!1):w(t).hasClass("e-"+e+"-first")&&this._processNextPrevDate(!0))},_navigateFrom:function(e){var t;switch(e.get(0).className){case"e-dp-viewdays":t="month";break;case"e-dp-viewmonths":t="year";break;case"e-dp-viewyears":t="decade";break;case"e-dp-viewallyears":t="century"}return t},_backwardNavHandler:function(e){if(this._animating=!0,this.model.readOnly||!this.model.enabled)return!1;var t,i,s=e.type?(e.preventDefault(),w(e.currentTarget)):e,a=w("table",this.sfCalendar),n=w("table",this.sfCalendar).get(0).className,o=this;switch(navFrom=this._navigateFrom(a),n){case"e-dp-viewmonths":a.removeClass("e-dp-viewmonths").addClass("e-dp-viewdays"),this._lastHoveredMonth=parseInt(w(s).attr("index")),this._dateValue=new Date(this._dateValue.getFullYear(),this._lastHoveredMonth,this._dateValue.getDate()),this._DRPdisableFade&&this._trigger("_month_Loaded",{currentTarget:e.currentTarget}),this._renderCalendar(this,this._dateValue),w("tbody",a).not(".e-datepicker-days,.e-week-header").hide(),w(w(a).find(".e-datepicker-days,.e-week-header")).fadeIn("fast",function(){o._addFocus("day",o._hoverDate||0),o._animating=!1}),w(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),i="month";break;case"e-dp-viewyears":a.removeClass("e-dp-viewyears").addClass("e-dp-viewmonths"),this._lastHoveredYear=parseInt(s.text()),this._dateValue.setFullYear(this._lastHoveredYear),this._renderCalendar(this,this._dateValue),w("tbody,tr.e-week-header",a).not(".e-datepicker-months").hide(),b.isNullOrUndefined(this._hoverMonth)&&!b.isNullOrUndefined(this._dateValue)&&(this._hoverMonth=this._dateValue.getMonth()),w(w(a).find(".e-datepicker-months")).fadeIn("fast",function(){o._addFocus("month",o._hoverMonth||0),o._animating=!1}),t=s.text(),w(".e-datepicker-headertext",this.sfCalendar).text(t),this._checkArrows(t,t),i="year";break;case"e-dp-viewallyears":t=s.text().split("-"),a.removeClass("e-dp-viewallyears").addClass("e-dp-viewyears"),t[0]<this.model.minDate.getFullYear()?t[0]=this.model.minDate.getFullYear().toString():t[0]>this.model.maxDate.getFullYear()&&(t[0]=this.model.maxDate.getFullYear().toString()),this._renderCalendar(this,new Date(t[0],0,1)),w("tbody,tr.e-week-header",a).not(".e-datepicker-years").hide(),w(w(a).find(".e-datepicker-years")).fadeIn("fast",function(){o._addFocus("year",o._hoverYear||0),o._animating=!1}),w(".e-datepicker-headertext",this.sfCalendar).text(t[0]+" - "+t[1]),this._checkArrows(t[0],t[1]),i="decade",this._dateValue=new Date(this._dateValue.setFullYear(parseInt(w.trim(t[0]))+(this._lastHoveredYear?this._lastHoveredYear%10:this._dateValue.getFullYear()%10)));break;default:this._clearSelected(),this.sfCalendar.find("table td").removeClass("e-state-hover"),s.not("td.other-month.e-hidedate").addClass("e-active").attr("aria-selected",!0),this._addSelected(),this._hoverDate=this._getDateObj(s).getDate()-1,this._dateValue=new Date(s.attr("date")),this._clickedDate=new Date(s.attr("date")),this._animating=!1}"month"!=navFrom&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:i,navigateFrom:navFrom}),this._layoutChanged()},_startLevel:function(e){var t,i,s,a=w("table",this.sfCalendar),n=w(".e-datepicker-headertext",this.sfCalendar),o=this._dateValue;switch(e){case"decade":a.removeClass("e-dp-viewallyears e-dp-viewmonths e-dp-viewdays").addClass("e-dp-viewyears"),w("tbody,tr.e-week-header",a).not(".e-datepicker-years").hide(),w(w(a).find(".e-datepicker-years")).show(),o=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate:o,s=parseInt(o.getFullYear())-(parseInt(o.getFullYear())%10+1),n.text((t=s+1)+" - "+(i=s+10)),this._checkArrows(t,i),this._hoverYear=this._setFocusByName("year",o.getFullYear());break;case"century":this._calendarDate<this._dateValue||this._renderCalendar(this,o),a.removeClass("e-dp-viewyears e-dp-viewdays e-dp-viewmonths").addClass("e-dp-viewallyears"),w("tbody,tr.e-week-header",a).not(".e-datepicker-allyears").hide(),w(w(a).find(".e-datepicker-allyears")).show(),t=parseFloat(w("td.e-allyear-first",a.get(0)).text().split("-")[1])+1,i=parseFloat(w("td.e-allyear-last",a.get(0)).prev().text().split("-")[1]),n.text(t+" - "+i),this._checkArrows(t,i),s=parseInt(o.getFullYear())-(parseInt(o.getFullYear())%10+1),this._hoverAllYear=this._setFocusByName("allyear",s+1+" - "+(s+10));break;case"year":a.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewdays").addClass("e-dp-viewmonths"),w("tbody,tr.e-week-header",a).hide(),w(w(a).find(".e-datepicker-months")).show(),t=(this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate:o).getFullYear(),n.text(t),this._checkArrows(t,t),this._hoverMonth=o.getMonth(),this._addFocus("month",this._hoverMonth);break;case"month":a.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewmonths").addClass("e-dp-viewdays ")}},_depthLevel:function(e){var t=this.sfCalendar;switch(e){case"year":w(t.find(".e-current-year,.e-current-allyear")).on("click",w.proxy(this._backwardNavHandler,this)),this._on(w(".e-current-month",this.sfCalendar),"click",w.proxy(this._onDepthSelectHandler,this));break;case"decade":w(t.find(".e-current-allyear")).on("click",w.proxy(this._backwardNavHandler,this)),w(".e-current-year",this.sfCalendar).on("click",w.proxy(this._onDepthSelectHandler,this));break;case"century":w(t.find(".e-current-allyear")).on("click",w.proxy(this._onDepthSelectHandler,this));break;case"month":this._on(t.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",w.proxy(this._backwardNavHandler,this)),this._on(t.find(".current-month , .other-month"),"click",w.proxy(this._onSetCancelDateHandler,this))}},_onDepthSelectHandler:function(e){if(this.model.readOnly||!this.model.enabled)return!1;w(e.target).hasClass("e-current-month")?this._dateValue=new Date(this._dateValue.setMonth(parseInt(e.target.attributes.index.value))):(w(e.target).hasClass("e-current-year")||w(e.target).hasClass("e-current-allyear"))&&(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(e.target.innerHTML)))),this._onSetCancelDateHandler(e)},_datepickerMonths:function(e,t,i){function s(e){return document.createElement(e)}for(var a,n,o,l=0,d=0;d<3;d++){for(a=w(s("tr")),n=0;n<4;n++)o=w(s("td")).addClass("e-current-month e-state-default").attr({index:l}).attr(this._isIE8?{unselectable:"on"}:{}).html(this.Date.abbrMonthNames[l++]),(i.getFullYear()<this.model.minDate.getFullYear()||i.getFullYear()>this.model.maxDate.getFullYear()||i.getFullYear()<=this.model.minDate.getFullYear()&&l<this.model.minDate.getMonth()+1||i.getFullYear()>=this.model.maxDate.getFullYear()&&l>this.model.maxDate.getMonth()+1)&&(o.addClass("e-hidedate"),o.removeClass("e-current-month")),a.append(o);e.append(a)}t.append(e),t=i.getFullYear(),this._checkArrows(t,t)},_datepickerYears:function(e,t,i){function s(e){return document.createElement(e)}for(var a,n,o,l,d=parseInt(i)-(parseInt(i)%10+1),r=[],h=0;h<12;h++)r.push(d+h);for(n=a=0;n<3;n++){for(o=w(s("tr")),h=0;h<4;h++)(l=w(s("td"))).attr(this._isIE8?{unselectable:"on"}:{}),0==a?l.addClass("e-year-first e-current-year "):11==a?l.addClass("e-year-last e-current-year "):l.addClass("e-current-year e-state-default"),(r[a]<this.model.minDate.getFullYear()||r[a]>this.model.maxDate.getFullYear())&&(l.addClass("e-hidedate"),l.removeClass("e-current-year")),l.html(r[a++]),o.append(l);e.append(o)}t.append(e),this._checkArrows(r[0],r[r.length])},_datepickerAllYears:function(e,t,i){for(var s,a,n,o,l=parseInt(i)-(parseInt(i)%100+10),d=[],r=this._isIE8||this._isIE9?"":"\n",h=0;h<12;h++)d.push(parseInt(l)+" -"+r+parseInt(l+9)),l+=10;for(a=s=0;a<3;a++){for(n=w(document.createElement("tr")),h=0;h<4;h++)(o=w(document.createElement("td"))).attr(this._isIE8?{unselectable:"on"}:{}),0==s?o.addClass("e-allyear-first e-current-allyear "):11==s?o.addClass("e-allyear-last e-current-allyear "):o.addClass("e-current-allyear e-state-default"),(parseInt(d[s].split("-\n")[1])<this.model.minDate.getFullYear()||parseInt(d[s].split("-\n")[0])>this.model.maxDate.getFullYear())&&(o.addClass("e-hidedate"),o.removeClass("e-current-allyear")),o.html(d[s++]),n.append(o);e.append(n)}t.append(e)},_renderHeader:function(e){var t,i,s,a,n,o=w(document.createElement("thead")),l=b.preferredCulture(this.model.locale).calendars.standard.days;if("none"!=e.model.dayHeaderFormat)for(t=b.buildTag("tr.e-week-header").attr({role:"columnheader"}).attr(this._isIE8?{unselectable:"on"}:{}),i=this.Date.firstDayOfWeek;i<this.Date.firstDayOfWeek+7;i++)n=l.names[s=i%7],a="short"==e.model.dayHeaderFormat?l.namesAbbr[s]:"long"==e.model.dayHeaderFormat?n:l.namesShort[s],n=b.buildTag("th","",{},{scope:"col",abbr:n,date:n,title:this._formatter(n,"dddd"),class:0==s||6==s?"e-week-end":"e-week-day"}).attr(this._isIE8?{unselectable:"on"}:{}).html(a),t.append(n);return o.append(t)},_renderCalendar:function(e,t){e=w.extend({},b.DatePicker.prototype.defaults,e),this.Date.firstDayOfWeek=this.model.startDay,t=t||this._calendarDate||this._zeroTime(new Date),(i=w("table",this.sfCalendar)).empty(),i.append(this._renderHeader(e)),h=b.buildTag("tbody.e-datepicker-allyears","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerAllYears(h,i,t.getFullYear()),h=b.buildTag("tbody.e-datepicker-years","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerYears(h,i,t.getFullYear());var i,s,a,n,o,l,d=e.model.month==D?t.getMonth():e.model.month,e=e.model.year||t.getFullYear(),r=new Date(e,d,1,0,0,0),e=this.Date.firstDayOfWeek-r.getDay()+1;1<e&&(e-=7),s=Math.ceil((-1*e+1+this._getDaysInMonth(r))/7),this._addDays(r,e-1),a=this._zeroTime(new Date),n=this._calendarDate,h=b.buildTag("tbody.e-datepicker-months","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerMonths(h,i,t);for(var h=b.buildTag("tbody.e-datepicker-days","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),c=0,m=!0,p=!0;c++<s;){for(o=jQuery(document.createElement("tr")),l=0;l<7;l++){var u=r.getMonth()==d,v=this._isSpecialDates(r),f=this._checkDisableRange(r),g=this._getIndex,_=w(document.createElement("td")).html(v?"<span></span>"+r.getDate():r.getDate()+"").attr({date:r.toDateString(),title:this.model.showTooltip?v&&this.model.specialDates[g][this._mapField._tooltip]?this.model.specialDates[g][this._mapField._tooltip]:this._formatter(r,this.model.tooltipFormat):"","aria-selected":!1,role:"gridcell"}).attr(this._isIE8?{unselectable:"on"}:{}).addClass((u?"current-month e-state-default ":"other-month e-state-default ")+(this._isWeekend(r)?this._ejHLWeekEnd?"e-dp-weekend e-week-end ":this.model.highlightWeekend?"e-week-end ":"":"e-week-day ")+(u&&r.getTime()==a.getTime()?"today ":""));_.find("span:first-of-type").addClass(v?this.model.specialDates[g][this._mapField._icon]?"e-special-date-icon "+this.model.specialDates[g][this._mapField._icon]+" ":"e-special-day":""),_.addClass(v&&this.model.specialDates[g][this._mapField._custom]||""),f&&this._disableDates({date:r,element:_}),n.getTime()==r.getTime()&&u&&(_.hasClass("e-hidedate")||(this.model.value?(_.addClass("e-active").attr({"aria-selected":!0}),"week"==this.model.highlightSection&&o.addClass("e-selected-week"),"month"==this.model.highlightSection&&h.addClass("e-selected-month"),"workdays"==this.model.highlightSection&&o.addClass("e-work-week")):_.addClass("e-state-hover").attr({"aria-selected":!1})),this._hoverDate||(_.hasClass("e-hidedate")||_.addClass("e-state-hover"),this._hoverDate=r.getDate()-1)),v=!0,(r<this.model.minDate||r>this.model.maxDate)&&(_.addClass("e-hidedate"),_.removeClass("current-month"),this.model.showOtherMonths&&_.removeClass("other-month"),v=p=!1),u&&(v&&m&&(this._tempMinDate=r,p=!(m=!1)),p)&&(this._tempMaxDate=r),this._trigger("beforeDateCreate",{date:r,value:this._formatter(r,this.model.dateFormat),element:_}),o.append(_),r=new Date(r.getFullYear(),r.getMonth(),r.getDate()+1,0,0,0)}h.append(o)}i.append(h),this._DRPdisableFade?(w(h).css("display","block"),w(h).css({display:"table-row-group","vertical-align":"middle","border-color":"inherit"})):this._isIE8||this._isIE7?w(h).css("display","block"):w(h).fadeIn("fast"),this.model.startLevel===this.model.depthLevel||"month"!=this.model.depthLevel&&""!=this.model.depthLevel&&("century"==this.model.startLevel||"decade"==this.model.startLevel&&"century"!=this.model.depthLevel||"year"==this.model.startLevel&&"decade"!=this.model.depthLevel&&"century"!=this.model.depthLevel)?this._depthLevel(this.model.depthLevel):(this._on(i.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",w.proxy(this._backwardNavHandler,this)),this._on(i.find(".current-month , .other-month"),"click",w.proxy(this._onSetCancelDateHandler,this))),this._otherMonthsVisibility(),this._checkDateArrows()},_checkDisableRange:function(e){return!b.isNullOrUndefined(this._disableCollection[e.getFullYear()])&&-1!==jQuery.inArray(e.getMonth(),this._disableCollection[e.getFullYear()])},_initDisableObj:function(){var e,t;for(this._disableCollection={},i=0;i<this.model.blackoutDates.length;i++)(t=this._checkInstanceType(this.model.blackoutDates[i]))&&(e=t.getFullYear(),t=t.getMonth(),b.isNullOrUndefined(this._disableCollection[e])&&(this._disableCollection[e]=[]),-1==jQuery.inArray(t,this._disableCollection[e]))&&this._disableCollection[e].push(t)},_disableDates:function(e){for(i=0;i<this.model.blackoutDates.length;i++){var t=this._checkInstanceType(this.model.blackoutDates[i]);t&&+e.date==+t&&e.element.removeClass("current-month").addClass("e-hidedate")}},_keyboardNavigation:function(e){var t;if(this._animating)return!1;if(!this._isOpen||37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode&&36!=e.keyCode&&35!=e.keyCode)if(this.model.displayInline||27!=e.keyCode&&9!=e.keyCode){if(e.altKey&&40==e.keyCode)return this.show(),!1}else this.hide();else{if(e.preventDefault&&e.preventDefault(),e.altKey)return 13==e.keyCode?(this._setCurrDate(e),!1):void 0;(t={row:null,col:null}).col=this.sfCalendar.find("tbody tr td.e-state-hover").index(),t.row=this.sfCalendar.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this.sfCalendar.find("tbody tr td.e-active").index()+1,t.row=-1!=t.row?t.row+1:this.sfCalendar.find("tbody tr td.e-active").parent().index()+1;var i,s;switch(this.sfCalendar.find("table")[0].className){case"e-dp-viewallyears":i=this._changeRowCol(t,e.keyCode,3,4,"yearall",e.ctrlKey),e.ctrlKey||(this._hoverAllYear=this.sfCalendar.find("tbody.e-datepicker-allyears tr td").index(i));break;case"e-dp-viewyears":i=this._changeRowCol(t,e.keyCode,3,4,"year",e.ctrlKey),e.ctrlKey||(this._hoverYear=this.sfCalendar.find("tbody.e-datepicker-years tr td").index(i));break;case"e-dp-viewmonths":i=this._changeRowCol(t,e.keyCode,3,4,"month",e.ctrlKey),e.ctrlKey||(this._hoverMonth=this.sfCalendar.find("tbody.e-datepicker-months tr td").index(i));break;case"e-dp-viewdays":s=this.sfCalendar.find("tbody.e-datepicker-days tr").length,i=this._changeRowCol(t,e.keyCode,s,7,"day",e.ctrlKey),e.ctrlKey||(this._hoverDate=this._getDateObj(i).getDate()-1)}e.ctrlKey||(this.sfCalendar.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover"))}},_changeRowCol:function(e,t,i,s,a,n){var o,l,d,r,h={parent:null,child:null};switch(a){case"day":o="tbody.e-datepicker-days tr td.current-month",h.parent=".e-datepicker-days",h.child=".current-month";break;case"month":o="tbody.e-datepicker-months tr td.e-current-month",h.parent=".e-datepicker-months",h.child=".e-current-month";break;case"year":o="tbody.e-datepicker-years tr td.e-current-year",h.parent=".e-datepicker-years",h.child=".e-current-year";break;case"yearall":o="tbody.e-datepicker-allyears tr td.e-current-allyear",h.parent=".e-datepicker-allyears",h.child=".e-current-allyear"}if(e.row<=0&&e.col<=0)return this.sfCalendar.find(o+":first");switch(t){case 36:return this.sfCalendar.find(o+":first");case 35:return this.sfCalendar.find(o+":last");case 38:if(n&&this.model.allowDrillDown)this._forwardNavHandler();else{if(!(1<e.row))return this._processNextPrevDate(!0),this.sfCalendar.find(o+":nth-child("+e.col+"):last");--e.row}if((l=this._getCell(e,h)).length<=0){if(null!==(l=this._findVisible(e,h,"up")))return l;this._processNextPrevDate(!0),l=this.sfCalendar.find(o+":nth-child("+e.col+"):last")}return l;case 37:if(n)return this._processNextPrevDate(!0),this.sfCalendar.find("tbody tr td.e-state-hover");if(1<e.col)--e.col;else{if(!(1<e.row))return this._processNextPrevDate(!0),this.sfCalendar.find(o+":last");e={row:e.row-1,col:s}}if((l=this._getCell(e,h)).length<=0){if(null!==(l=this._findVisible(e,h,"left")))return l;this._processNextPrevDate(!0),l=this.sfCalendar.find(o+":last")}return l;case 39:if(n)return this._processNextPrevDate(!1),this.sfCalendar.find("tbody tr td.e-state-hover");if(e.col<s)e.col+=1;else{if(!(e.row<i))return this._processNextPrevDate(!1),this.sfCalendar.find(o+":first");e={row:e.row+1,col:1}}if((l=this._getCell(e,h)).length<=0){if(null!==(l=this._findVisible(e,h,"right")))return l;this._processNextPrevDate(!1),l=this.sfCalendar.find(o+":first")}return l;case 40:if(!n){if(!(e.row<i))return this._processNextPrevDate(!1),this.sfCalendar.find(o+":nth-child("+e.col+"):first");if(e.row+=1,(l=this._getCell(e,h)).length<=0){if(null!==(l=this._findVisible(e,h,"down")))return l;this._processNextPrevDate(!1),l=this.sfCalendar.find(o+":nth-child("+e.col+"):first")}return l}case 13:l=w("table",this.sfCalendar).get(0).className,d=this._getCell(e,h),r=w(d)[0],"e-dp-viewmonths"==l&&"year"==this.model.startLevel&&"year"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setMonth(parseInt(r.attributes.index.value))),this._onSetCancelDateHandler({type:null,target:d})):"e-dp-viewyears"==l&&"decade"==this.model.startLevel&&"decade"==this.model.depthLevel||"e-dp-viewallyears"==l&&"century"==this.model.startLevel&&"century"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(r.innerHTML))),this._onSetCancelDateHandler({type:null,target:d})):"e-dp-viewdays"==l?(this._backwardNavHandler(d),this._onSetCancelDateHandler({type:null,target:d})):this._backwardNavHandler(d)}return this._getCell(e,h)},_findVisible:function(e,t,s){var a=e.col,n=e.row,o=t.child.slice(1,t.child.length);for(i=0;0<=i;i++){if((nextElement=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td:nth-child("+a+")")).length<=0)return null;if(nextElement.hasClass("e-hidedate")||!nextElement.is(":visible")){if("right"==s||"left"==s?"right"==s?a++:a--:"down"==s?n++:n--,n<=0||n>this.sfCalendar.find("tbody"+t.parent+" tr").length||(a>this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td").length&&(n++,a=1),a<=0&&(n--,a=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td").length),n<=0)||n>this.sfCalendar.find("tbody"+t.parent+" tr").length)return null}else{if(nextElement.hasClass("other-month"))return null;if(nextElement.hasClass(o))return e.col=a,e.row=n,nextElement}}},_getCell:function(e,t){return this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+e.row+") td"+t.child+":nth-child("+e.col+")")},_getDateObj:function(e){return new Date(e.attr("date"))},_touchCalendar:function(e){var t=this.sfCalendar.find("table")[0].className;switch(e.type){case"pinchin":"e-dp-viewdays"!=t&&this._keyboardNavigation({keyCode:13});break;case"pinchout":"e-dp-viewallyears"!=t&&this.model.allowDrillDown&&this._forwardNavHandler();break;case"swipeleft":this._processNextPrevDate(!1);break;case"swiperight":this._processNextPrevDate(!0)}},show:function(e){var t,i;if(this._isOpen)return!1;if((t=this)._popupOpen=!0,i=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this.model.enabled){if(this.model.displayInline||this._setDatePickerPosition(),this._trigger("beforeOpen",{element:this.sfCalendar,events:e}))return!1;this.sfCalendar.attr({"aria-hidden":"false"}),t._isOpen=!0,this.sfCalendar.slideDown(this.model.enableAnimation?this.animation.open.duration:0,function(){t.model&&!t.model.displayInline&&w(document).on("mousedown",w.proxy(t._onDocumentClick,t))}),this._updateInputVal(),this._refreshLevel(i),this._trigger("open",{prevDate:i,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),w(window).on("resize",w.proxy(this._OnWindowResize,this)),this.model.displayInline||this._on(b.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox()&&this.wrapper.addClass("e-active")}},hide:function(e){if(!this._isOpen||this._getInternalEvents||this._trigger("beforeClose",{element:this.sfCalendar,events:e}))return!1;var t=this;this._popupOpen=!1,this.sfCalendar.attr({"aria-hidden":"true"}),this._popClose&&e!=D&&"click"!=e.type||(this.sfCalendar.slideUp(this.model.enableAnimation?this.animation.close.duration:0,function(){t._isOpen=!1,w(document).off("mousedown",w.proxy(t._onDocumentClick,t)),t._setWaterMark()}),""!=this.element.val()&&this._validateInputVal(),this._trigger("close",{prevDate:this._prevDate,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),w(window).off("resize",w.proxy(this._OnWindowResize,this)),this._off(b.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox()&&this.wrapper.removeClass("e-active"))},enable:function(){this.model.enabled=!0,this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.prop("disabled",!1),this.dateIcon&&this.dateIcon.removeClass("e-disable").attr({"aria-disabled":!1}),this._isIE8&&this.dateIcon&&this.dateIcon.children().removeClass("e-disable"),this.element.prop("disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.sfCalendar.removeClass("e-disable").attr({"aria-disabled":!1})},disable:function(){this.model.enabled=!1,this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.element.attr("disabled","disabled"),this.dateIcon&&this.dateIcon.addClass("e-disable").attr({"aria-disabled":!0}),this._isIE8&&this.dateIcon&&this.dateIcon.children().addClass("e-disable"),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.sfCalendar.addClass("e-disable").attr({"aria-disabled":!0}),this._isOpen&&(this.element.is(":input")&&this.element.blur(),this.model.displayInline||this.hide())},getValue:function(){return this._formatter(this.model.value,this.model.dateFormat)},_wireEvents:function(){this._allowQuickPick(this.model.allowDrillDown),this._on(w(".e-next",this.sfCalendar),"click",w.proxy(this._previousNextHandler,this)),this._on(w(".e-prev",this.sfCalendar),"click",w.proxy(this._previousNextHandler,this)),this.model.displayInline||(this.sfCalendar.on("mouseenter touchstart",w.proxy(function(){this._popClose=!0},this)),this.sfCalendar.on("mouseleave touchend",w.proxy(function(){this._popClose=!1},this))),this.element.is(":input")&&this.model.allowEdit&&(this._on(this.element,"blur",this._onFocusOut),this._on(this.element,"focus",this._onFocusIn),this._on(this.element,"keydown",this._onKeyDown)),this.model.allowEdit||(this.element.attr("readonly","readonly"),this.element.on("mousedown",w.proxy(this._showDatePopUp,this))),this.model.showFooter&&this._on(w(".e-footer",this.sfCalendar),"click",this._setCurrDate),this._on(this.sfCalendar,"pinchin pinchout swipeleft swiperight",w.proxy(this._touchCalendar,this))},_bindDateButton:function(){this._on(this.dateIcon,"mousedown",this._showDatePopUp),this.model.allowEdit&&this.element.off("mousedown",w.proxy(this._showDatePopUp,this))},_bindInputEvent:function(){this._off(this.dateIcon,"mousedown",this._showDatePopUp)},_specificFormat:function(){var e=b.globalize._getDateParseRegExp(b.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return-1<w.inArray("dddd",e.groups)||-1<w.inArray("ddd",e.groups)},_onFocusOut:function(e){var t;this._isFocused=!1,t=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this._validateOnFocusOut(this._validateValue(),e),this.wrapper.removeClass("e-focus"),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),this._isOpen&&!this.model.displayInline||this._refreshLevel(t),""==this.element.val()||this._isOpen&&!this.model.displayInline||this._validateInputVal(),this.element.off("keydown",w.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),e=this.element.val(),t={prevDate:this._prevDate,value:e},this._specificFormat()?this._prevDate!=e&&this._setDateValue(e,!0):this._setDateValue(e),this.model.value||this._clearSelected(),this._trigger("focusOut",t),this._checkErrorClass()},_onFocusIn:function(e){this._isSupport&&(e.preventDefault(),this._isFocused=!0),this.wrapper.removeClass("e-error").attr("aria-invalid","false"),this.isValidState=!0,this.wrapper.addClass("e-focus"),this.model.readOnly||(this._isSupport||this._hiddenInput.css("display","none"),this.element.on("keydown",w.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this.model.readOnly||this.show(e),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}))},_elementClick:function(e){this._popupOpen||this.show(e)},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_refreshPopup:function(){this._refreshDatepicker(),this._startLevel(this.model.startLevel)},_refreshLevel:function(e){var t;this.model.startLevel==this.model.depthLevel&&"month"!=this.model.startLevel&&(t=this._stringToObject(this.element.val()),t=this._validateYearValue(t))&&!this._compareDate(e,t)&&this._refreshPopup()},_validateOnFocusOut:function(e,t){var i,s=null!=this._preValue?this._calendarDate:this._preValue,a=this._formatter(s,this.model.dateFormat);this._specificFormat()&&e>this.model.minDate&&e<this.model.maxDate?null==e?this.model.value=s:(this.model.value=e,this._formatter(e,this.model.dateFormat,this.model.locale)):this._formatter(this._parseDate(this._formatter(new Date,"MM/dd/yyyy")),this.model.dateFormat),i=s=!1,null==e||this.model.enableStrictMode?null!=e||this.model.enableStrictMode?e?(e<this.model.minDate||e>this.model.maxDate?(i=!(this.isValidState=!1),this._calendarDate=e<this.model.minDate?this.model.minDate:this.model.maxDate):this.isValidState=!0,this._triggerChangeEvent(t),i&&this._getInternalEvents&&this._trigger("outOfRange")):(this.isValidState=!1,this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)):(null==this._preTxtValue||""==this.element.val()?(this.element.val(""),this._isSupport||this._hiddenInput.css("display","block")):this.element.val(a),this._triggerChangeEvent(t)):(b.isNullOrUndefined(this.model.value)&&(this.model.value=this._parseDate(this.element.val())),this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode||(e?(e<this.model.minDate||e>this.model.maxDate)&&(s=!0,this._calendarDate=e=e<this.model.minDate?this.model.minDate:this.model.maxDate):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),s&&this.element.val(this._formatter(e,this.model.dateFormat)),this._compareDate(this._preValue,this._parseDate(this.element.val(),!0))||this._triggerChangeEvent(t))},_onKeyDown:function(e){var t;13===e.keyCode&&(t=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this._validateOnFocusOut(this._validateValue(),e),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),this._isOpen&&!this.model.displayInline||this._refreshLevel(t),""==this.element.val()||this._isOpen&&!this.model.displayInline||this._validateInputVal(),this._checkErrorClass())},_showhidePopup:function(e){if(!this.model.enabled)return!1;this._isOpen?(this._isFocused||!this.element.is(":input")||b.isTouchDevice()||this.element.focus(),this._cancelValue||this.hide(e)):(this._isFocused||!this.element.is(":input")||b.isTouchDevice()||this.element.focus(),this.show(e))},_compareDate:function(e,t){return+e==+t},_validateDate:function(e){var t,s=!0;if(null!=e){for(i=0;i<this.model.blackoutDates.length;i++)(t=this._checkInstanceType(this.model.blackoutDates[i]))&&+e==+t&&(s=!1);(e<this.model.minDate||e>this.model.maxDate)&&this.model.enableStrictMode&&(this.isValidState=s=!1)}return s},_triggerChangeEvent:function(e){var t,i=""==this.element.val()?null:this.element.val();this._prevDate=this._formatter(this._preValue,this.model.dateFormat),t={prevDate:this._prevDate,value:i,isInteraction:!!e},e=this._specificFormat()&&e!=D&&"keydown"==e.type&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=this.element.val()?this._parseDate(this.element.val(),!0):this._specificFormat()&&e!=D&&"blur"==e.type?this.model.value:this._parseDate(i),e=this._validateYearValue(e),this._validateDate(e)||(e=null),this._compareDate(this._preValue,e)?""==this.element.val()&&null==this._prevDate||this.element.val()==this._prevDate||(t.value=this.element.val(),this._trigger("_change",t)):(this._preValue=this.model.value=e,t.value=this._formatter(this.model.value,this.model.dateFormat),this.model.value&&(this._clickedDate=this._calendarDate=this.model.value),this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("value",i),this.model.value||this.model.enableStrictMode||this._setDateValue(this.model.value),t.value=i,this._trigger("_change",t),t.value=this._formatter(this.model.value,this.model.dateFormat),this._trigger("change",t),this._checkErrorClass())},_triggerSelectEvent:function(){var e,t=this.element.val();this._parseDate(t)&&(e={prevDate:this._prevDate,date:this.model.value,value:t,isSpecialDay:this._isSpecialDates(this.model.value)},this._prevDate!=t&&this._parseDate(e.value)&&this.model.value>=this.model.minDate&&this.model.value<=this.model.maxDate&&(this._cancelValue=this._trigger("select",e)),this._dt_drilldown)&&this._trigger("dt_drilldown",e)},_onDocumentClick:function(e){this.model&&(w(e.target).is(this.popup)||w(e.target).parents(".e-popup").is(this.popup)||w(e.target).is(this.wrapper)||w(e.target).parents(".e-datewidget").is(this.wrapper)?(w(e.target).is(this.popup)||w(e.target).parents(".e-popup").is(this.popup))&&e.preventDefault():this.hide(e))},_OnWindowResize:function(){this._setDatePickerPosition()},_showDatePopUp:function(e){var t=!1;if(e.button?t=2==e.button:e.which&&(t=3==e.which),!t&&(this._isSupport||this.model.showPopupButton||(e.preventDefault(),this._onFocusIn()),!this.model.readOnly)){if(e.preventDefault(),!this.model.enabled&&this.model.displayInline)return!1;this._showhidePopup(e)}},_layoutChanged:function(){this._getInternalEvents&&this._trigger("layoutChange")},_setCurrDate:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e&&e.preventDefault();this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._dateValue=this._zeroTime(new Date),this.model.value=this._calendarDate=new Date(this._dateValue.toString()),this._setDateValue(this.model.value),this._triggerSelectEvent(e),this._triggerChangeEvent(e),this._refreshDatepicker(),this._changeDayClass(),this._startLevel(this.model.startLevel),this._onSetCancelDateHandler(e),this._layoutChanged()},_changeDayClass:function(){var e=this.popup.children("table")[0].className;"e-dp-viewdays"!=e&&this.popup.children("table").removeClass(e).addClass("e-dp-viewdays")},_onSetCancelDateHandler:function(e){if(this.model.readOnly||!this.model.enabled||e&&(w(e.target).hasClass("e-disable")||w(e.target).hasClass("e-hidedate")))return!1;e&&e.type&&e.preventDefault(),this._specificFormat()?this._prevDate=this.element.val():this.model.value=this._parseDate(this.element.val()),this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._setDateValue(this._dateValue),this._triggerSelectEvent(e),this._triggerChangeEvent(e),this._dateValue=new Date(this.model.value.toString()),this.element.is(":input")&&!this.model.displayInline&&this._showhidePopup(e),e&&w(e.currentTarget).hasClass("other-month")&&this._refreshDatepicker(),this._cellSelection()},_closeCalendar:function(e){e&&e!=this.element||this.sfCalendar.empty().remove()},_checkErrorClass:function(){this.wrapper&&(this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true"))},_getLocalizedLabels:function(){return b.getLocalizedConstants(this.sfType,this.model.locale)}}),b.DatePicker.Locale=b.DatePicker.Locale||{},b.DatePicker.Locale.default=b.DatePicker.Locale["en-US"]={watermarkText:"Select date",buttonText:"Today"},b.DatePicker.Header={None:"none",Short:"short",Min:"min",Long:"long"},b.DatePicker.HighlightSection={Month:"month",Week:"week",WorkDays:"workdays",None:"none"},b.DatePicker.Level={Month:"month",Year:"year",Decade:"decade",Century:"century"}}),function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.scroller.min"],e):e()}(function(){var h,r,s;h=jQuery,(r=Syncfusion).widget("ejTimePicker","ej.TimePicker",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_rootCSS:"e-timepicker",_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{cssClass:"",timeFormat:"",value:null,enableAnimation:!0,locale:"en-US",htmlAttributes:{},readOnly:!1,showPopupButton:!0,enableStrictMode:!1,interval:30,hourInterval:1,minutesInterval:1,secondsInterval:1,height:"",width:"",minTime:"12:00 AM",maxTime:"11:59 PM",showRoundedCorner:!1,enableRTL:!1,popupHeight:"191px",popupWidth:"auto",enabled:!0,enablePersistence:!1,disableTimeRanges:null,validationRules:null,validationMessages:null,focusIn:null,focusOut:null,beforeChange:null,change:null,select:null,create:null,destroy:null,beforeOpen:null,open:null,close:null},dataTypes:{timeFormat:"string",minTime:"string",maxTime:"string",readOnly:"boolean",interval:"number",showPopupButton:"boolean",locale:"string",hourInterval:"number",minutesInterval:"number",secondsInterval:"number",enabled:"boolean",enablePersistence:"boolean",enableAnimation:"boolean",enableStrictMode:"boolean",disableTimeRanges:"data",htmlAttributes:"data",validationRules:"data",validationMessages:"data"},observables:["value"],enable:function(){this.model.enabled||(this.element[0].disabled=!1,this.element.prop("disabled",!1),this.model.enabled=!0,this.element.removeClass("e-disable").attr("aria-disabled",!1),this.model.showPopupButton&&(this.timeIcon.removeClass("e-disable").attr("aria-disabled",!1),this.popupList.removeClass("e-disable").attr("aria-disabled",!1)),this._isIE8&&this.timeIcon.children().removeClass("e-disable"))},disable:function(){this.model.enabled&&(this.element[0].disabled=!0,this.model.enabled=!1,this.element.attr("disabled","disabled"),this.element.addClass("e-disable").attr("aria-disabled",!0),this.model.showPopupButton&&(this.timeIcon.addClass("e-disable").attr("aria-disabled",!0),this.popupList.addClass("e-disable").attr("aria-disabled",!0)),this._isIE8&&this.timeIcon.children().addClass("e-disable"),this._hideResult())},getValue:function(){return this.element.val()},setCurrentTime:function(){this.model.readOnly||this._setMask()},show:function(){this.showDropdown||this._getInternalEvents||this._showResult()},hide:function(){this.showDropdown&&this._hideResult()},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_timeFormat:function(e){var t;return e=e||r.preferredCulture(this.model.locale).calendars.standard.patterns.t,(e=this._validateTimeFormat(e))&&(this.model.timeFormat=e,this.model.minTime=r.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=r.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),this.model.value?(this._setModelOption=!0,this.model.value=this._localizeTime(this.model.value),this.element.val(this.model.value)):(this._setModelOption=!1,(t=this._localizeTime(this.element.val()))&&this._checkMinMax(t)&&(this.model.value=t,this.element.val(t)))),e},_getTimeFormat:function(){this.model.timeFormat=r.preferredCulture(this.model.locale).calendar.patterns.t||"h:mm tt",this.seperator=this._getSeperator()},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popupList&&this.popupList.removeClass(this.model.cssClass).addClass(e)},_localize:function(e){var t=this._createObject(this.model.value,!0);this.model.locale=e,this._getTimeFormat(),this.model.minTime=r.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=r.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),t?(this.model.value=this._localizeTime(t),this.element.val(this.model.value)):(t=this._localizeTime(this.element.val()))&&this._checkMinMax(t)&&(this.model.value=t,this.element.val(t)),this._getAmPm()},_setLocalize:function(e){(e=r.preferredCulture(e))&&(this.model.locale="en"==e.name?"en-US":e.name,r.isNullOrUndefined(this._options)||!r.isNullOrUndefined(this._options.timeFormat)&&this._options.timeFormat||(this.model.timeFormat=r.preferredCulture(this.model.locale).calendars.standard.patterns.t))},_updateInput:function(){var e;r.isNullOrUndefined(this._options)||(e=this._localizeTime(this._options.value),r.isNullOrUndefined(e))||"string"==typeof e&&this.model.enableStrictMode&&!this.model.value&&(this.element.val(this._options.value),this.isValidState=""==this.element.val(),this._checkErrorClass())},_createMinMaxObj:function(){this._minTimeObj=this._createObject(this.model.minTime),this._minTimeObj||(this.model.minTime=r.format(this._createObject((new Date).setHours(0,0,0,0)),this.model.timeFormat,this.model.locale)),this._maxTimeObj=this._createObject(this.model.maxTime),this._maxTimeObj||(this.model.maxTime=r.format(this._createObject((new Date).setHours(23,59,59,59)),this.model.timeFormat,this.model.locale))},_setMinMax:function(){var e=(new Date).setHours(0,0,0,0),t=(new Date).setHours(23,59,59,59);!r.isNullOrUndefined(this._options)&&r.isNullOrUndefined(this._options.minTime)&&(this.model.minTime=r.format(this._createObject(e),this.model.timeFormat,this.model.locale)),!r.isNullOrUndefined(this._options)&&r.isNullOrUndefined(this._options.maxTime)&&(this.model.maxTime=r.format(this._createObject(t),this.model.timeFormat,this.model.locale)),this._createMinMaxObj()},_init:function(e){if(this._options=e,this._cloneElement=this.element.clone(),this._ISORegex(),!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this._initialize(),this._render(),this._wireEvents(),e&&e.value!=s&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()}),this._updateInput(),this._updateTextbox(),null!=this.model.validationRules&&(this._initTimeValidator(),this._setTimeValidation())},_updateTextbox:function(){this._options!==s&&(this._options.value!==s||this.model.value)||this._setTime(this._localizeTime(this.model.minTime))},_setMinMaxTime:function(e,t){!r.isNullOrUndefined(t.minTime)&&h.trim(t.minTime)&&this._isValid(t.minTime)&&(this.model.minTime=t.minTime,this._minTimeObj=this._createObject(this.model.minTime),this._validateTimes()),!r.isNullOrUndefined(t.maxTime)&&h.trim(t.maxTime)&&this._isValid(t.maxTime)&&(this.model.maxTime=t.maxTime,this._maxTimeObj=this._createObject(this.model.maxTime),this._validateTimes()),this._validateMinMax(),this._createMinMaxObj(),r.isNullOrUndefined(t.minTime)||(t.minTime=this.model.minTime),r.isNullOrUndefined(t.maxTime)||(t.maxTime=this.model.maxTime),this._checkMinMax(this.model.value)||(this.model.enableStrictMode?(this.isValidState=!1,this.model.value=null):(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime))),e!==this.model.value&&this._isValid(this.model.value,!0)&&this.element.val(this.model.value)},_setModel:function(e){var t,i,s,a,n=!1,o=this.model.value;for(t in e)switch(t){case"timeFormat":s=this._createObject(this.model.value),this._preTimeformat=this.model.timeFormat,i=this._timeFormat(e[t]),e[t]=this.model.timeFormat,i&&(this.seperator=this._getSeperator()),n=+s!=+this._createObject(this.model.value);break;case"locale":s=this._createObject(this.model.value),this._localize(e[t]),this.model.minTime=r.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=r.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),n=+s!=+this._createObject(this.model.value);break;case"interval":this.model.interval=e[t];break;case"cssClass":this._changeSkin(e[t]);break;case"showRoundedCorner":this._setRoundedCorner(e[t]);break;case"enableRTL":this._setRtl(e[t]);break;case"height":this._setHeight(e[t]);break;case"width":this.wrapper.width(e[t]),this._setListWidth();break;case"value":r.isPlainObject(e[t])&&(e[t]=null),this.model.value=r.format(this._createObject(e[t],!0),this.model.timeFormat,this.model.locale),this._ensureValue(),this._enableMask(),this.model.enableStrictMode&&!this._isValid(e[t],!0)&&(a=this._isValid(e[t])?this._localizeTime(e[t]):e[t],this.element.val(a)),e[t]=this.model.value,n=!0;break;case"enableStrictMode":this.model.enableStrictMode=e[t];break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessages=null),this.model.validationRules=jsondata[key],null!=this.model.validationRules&&(this._initTimeValidator(),this._setTimeValidation());break;case"validationMessages":this.model.validationMessages=jsondata[key],null!=this.model.validationRules&&null!=this.model.validationMessages&&(this._initValidator(),this._setValidation());break;case"popupHeight":this.model.popupHeight=e[t],this._setListHeight();break;case"popupWidth":this.model.popupWidth=e[t],this._setListWidth();break;case"enabled":e[t]?this.enable():this.disable();break;case"htmlAttributes":this._addAttr(e[t]);break;case"disableTimeRanges":this.model.disableTimeRanges=e[t],this._initStartEnd(),this.model.value=r.format(this._createObject(this.element.val(),!0),this.model.timeFormat,this.model.locale),this._ensureValue(),this._enableMask(),this.model.enableStrictMode&&!this._isValid(this.element.val(),!0)&&this.element.val(this.element.val()),n=!0}r.isNullOrUndefined(e.minTime)&&r.isNullOrUndefined(e.maxTime)||(this._setMinMaxTime(o,e),n=!0),r.isNullOrUndefined(e.showPopupButton)?!this.model.showPopupButton||!i&&r.isNullOrUndefined(e.minTime)&&r.isNullOrUndefined(e.maxTime)&&r.isNullOrUndefined(e.locale)&&r.isNullOrUndefined(e.interval)&&r.isNullOrUndefined(e.disableTimeRanges)||this._reRenderDropdown():this._showButton(e[t]),n&&(this._raiseChangeEvent(o,!0),e.value=this.model.value),this._checkErrorClass()},_destroy:function(){this.element.insertAfter(this.wrapper),this.wrapper.remove(),this.element.removeClass("e-input").removeAttr("ondragstart draggable aria-atomic aria-live aria-readonly").val(this.element.attr("value")),this._cloneElement.attr("name")||this.element.removeAttr("name"),this.popupList&&this.popupList.remove()},_initialize:function(){this.target=this.element[0],this.timeIcon=null,this._disabledItems=[],this.popupList=null,this.focused=!1,this.start=0,this.end=0,this.min=null,this.max=null,this.incomplete=!1,this.downPosition=0,this._setLocalize(this.model.locale),this._setMinMax(),this._getAmPm(),this.showDropdown=!1,this._activeItem=0,this.isValidState=!0,this._manualFocus=!1,this._isIE7=this._checkIE7(),this._initStartEnd(),r.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._isIE8="msie"==r.browserInfo().name&&"8.0"==r.browserInfo().version,this._getInternalEvents=!1,this._dateTimeInternal=!1,this.model.timeFormat?this.seperator=this._getSeperator():this._getTimeFormat()},_render:function(){this._renderWrapper(),this._setDimentions(),this._renderTimeIcon(),this._validateTimes(),this._createMinMaxObj(),this._renderDropdown(),this._addAttr(this.model.htmlAttributes),this._checkProperties(),this._enableMask(),this._checkErrorClass(),this.element.attr({"aria-atomic":"true","aria-live":"assertive","aria-readonly":this.model.readOnly,value:this.model.value}),!this.model.showPopupButton&&r.isNullOrUndefined(this.popupList)||this.ul.find("li").attr({tabindex:-1,"aria-selected":!1})},_renderWrapper:function(){this.element.addClass("e-input").attr("tabindex","0"),this.wrapper=r.buildTag("span.e-timewidget e-widget "+this.model.cssClass+"#"+this.target.id+"_timewidget").insertAfter(this.element),r.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.container=r.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container)},_addAttr:function(e){var s=this;h.map(e,function(e,t){var i=t.toLowerCase();"class"==i?s.wrapper.addClass(e):"disabled"==i&&"disabled"==e?s.disable():"readOnly"==i&&"readOnly"==e?s.model.readOnly=!0:("style"!=i&&"id"!=i&&r.isValidAttr(s.element[0],t)?s.element:s.wrapper).attr(t,e)})},_initTimeValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setTimeValidation:function(){var e,t,i,s;for(t in this.element.rules("add",this.model.validationRules),e=(e=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),e.settings.messages[name]={},this.model.validationRules)if(i=null,!r.isNullOrUndefined(this.model.validationRules[t])){if(r.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[t]))for(s in e.settings.messages[name][t]=h.validator.messages[t],this.model.validationMessages)t==s&&(i=this.model.validationMessages[t]);else i=this.model.validationRules.messages[t];e.settings.messages[name][t]=null!=i?i:h.validator.messages[t]}},_renderTimeIcon:function(){var e;this.model.showPopupButton&&(this.timeIcon=r.buildTag("span.e-select").attr({role:"button","aria-label":"select"}),e=r.buildTag("span.e-icon e-arrow-sans-down").attr("role","presentation"),this._isIE8&&(this.timeIcon.attr("unselectable","on"),e.attr("unselectable","on")),this.timeIcon.append(e),this.container.append(this.timeIcon).addClass("e-padding"),this._on(this.timeIcon,"mousedown",this._timeIconClick))},_elementClick:function(){this.showDropdown||this._showResult()},_renderDropdown:function(){var e=h("#"+this.element[0].id+"_popup").get(0);if(e&&h(e).remove(),!this.model.showPopupButton||this.popupList)return!1;this.popupList=r.buildTag("div.e-time-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.target.id+"_popup","",{},{tabindex:0,"aria-activedescendant":""}),r.isTouchDevice()||this.popupList.addClass("e-ntouch"),this.popup=this.popupList,this.ul=r.buildTag("ul.e-ul"),this._isIE8&&this.ul.attr("unselectable","on"),e=r.buildTag("div").append(this.ul),h("body").append(this.popupList.append(e)),this._renderLiTags(),this._setListHeight(),this._setListWidth(),this.popupList.ejScroller({height:this.popupList.height(),width:0,scrollerSize:20}),this.scrollerObj=this.popupList.ejScroller("instance"),this.popupList.css("display","none"),this._listSize=this.ul.find("li").length},_renderLiTags:function(){var e,t,i,s,a,n,o,l;for(this._disabledItems=[],s=6e4*this.model.interval,a=!r.isNullOrUndefined(this.model.disableTimeRanges)&&0<this.model.disableTimeRanges.length,e=this._minTimeObj,t=this._maxTimeObj,n=0;this._compareTime(t,e,!0);)i=this._localizeTime(e),(o=h(document.createElement("li")))[0].appendChild(document.createTextNode(i)),this._isIE8&&o.attr("unselectable","on"),a&&(this._ensureTimeRange(i)?(o.addClass("e-disable"),this._disabledItems.push(n)):o.removeClass("e-disable")),this.ul[0].appendChild(o[0]),e=new Date(e).getTime()+s,n++;l=this.ul.find("li"),r.isTouchDevice()||(this._on(l,"mouseenter",h.proxy(this._OnMouseEnter,this)),this._on(l,"mouseleave",h.proxy(this._OnMouseLeave,this))),this._on(l,"click",h.proxy(this._OnMouseClick,this))},_ensureTimeRange:function(e){if(!r.isNullOrUndefined(this.model.disableTimeRanges)){var t=this._makeDateTimeObj(e);for(i=0;i<this.model.disableTimeRanges.length;i++)if(+t>=+this._makeDateTimeObj(this.model.disableTimeRanges[i].startTime)&&+t<=+this._makeDateTimeObj(this.model.disableTimeRanges[i].endTime))return!0}return!1},_initStartEnd:function(){if(this._startTime=[],this._endTime=[],!r.isNullOrUndefined(this.model.disableTimeRanges))for(i=0;i<this.model.disableTimeRanges.length;i++)this._startTime[i]=this._makeDateTimeObj(this.model.disableTimeRanges[i].startTime),this._endTime[i]=this._makeDateTimeObj(this.model.disableTimeRanges[i].endTime)},_makeDateTimeObj:function(e){if("string"!=typeof e)return e instanceof Date?this._setEmptyDate(e):null;var t=r.preferredCulture(this.model.locale).calendar.patterns.d,i=r.format(new Date("1/1/2000"),t,this.model.locale),i=r.parseDate(i+" "+e,t+" "+this.model.timeFormat);if(!i){if(t=new Date(e),!isNaN(Date.parse(t))&&!r.isNullOrUndefined(e))return this._setEmptyDate(e);i=new Date("1/1/2000 "+e)}return i},_reRenderDropdown:function(){this.ul.empty(),this._renderLiTags(),this._refreshScroller(),this._changeActiveEle()},_refreshScroller:function(){var e="none"==this.popupList.css("display");this.popupList.css("height","auto"),this.popupList.find(".e-content, .e-vscroll").removeAttr("style"),this.popupList.find(".e-vscroll div").removeAttr("style"),e&&this.popupList.css("display","block"),this.scrollerObj.model.height=this.popupList.height(),this.scrollerObj.model.scrollTop=0,this.scrollerObj.refresh(),this._isIE8&&(h("#"+this.scrollerObj._id).children(".e-vscroll").children().attr("unselectable","on"),h("#"+this.scrollerObj._id).find(".e-vhandle").attr("unselectable","on")),e&&this.popupList.css("display","none")},_setListWidth:function(){var e;this.popupList&&((e=this.model.popupWidth)&&"auto"!=e?this.popupList.css({width:e}):this.popupList.css({width:this.wrapper.width()})),this.scrollerObj&&(this._refreshScroller(),this._updateScrollTop())},_setListHeight:function(){this.popupList&&this.popupList.css({"max-height":this.model.popupHeight||"191px"}),this.scrollerObj&&(this._refreshScroller(),this._updateScrollTop())},_updateScrollTop:function(){this.scrollerObj.setModel({scrollTop:this._calcScrollTop()})},_refreshPopup:function(){"auto"==this.model.popupWidth&&this.popupList.css({width:this.wrapper.width()}),this._setListPosition(),this._refreshScroller()},_setListPosition:function(){var e=this.wrapper,t=this._getOffset(e),i=h(document).scrollTop()+h(window).height()-(t.top+h(e).outerHeight()),s=t.top-h(document).scrollTop(),a=this.popupList.outerHeight(),n=this.popupList.outerWidth(),o=t.left,l=e.outerHeight(),d=(l-e.height())/2,r=this._getZindexPartial(),i=(a<i||s<a?t.top+l+3:t.top-a-3)-d,s=h(document).scrollLeft()+h(window).width()-o;(this.model.enableRTL||s<n&&n<o+e.outerWidth())&&(o-=this.popupList.outerWidth()-e.outerWidth()),this.popupList.css({left:o+"px",top:i+"px","z-index":r})},_getOffset:function(e){return r.util.getOffset(e)},_getZindexPartial:function(){return r.util.getZindexPartial(this.element,this.popupList)},_enableMask:function(){this.isValidState=!(this.model.minTime&&this._compareTime(this.model.minTime,this.model.value)||this.model.maxTime&&this._compareTime(this.model.value,this.model.maxTime)),this._setTime(this.model.value),this._getInternalEvents&&!this.isValidState&&this._trigger("outOfRange"),this._changeActiveEle(),this._preVal=this.element.val()},_setTime:function(e){e=this._localizeTime(e);this.element.val(e),this.model.value=e},_timeFromISO:function(e){var t,i,s,a,n,o,l,d=this._extISORegex.exec(e)||this._basicISORegex.exec(e),r="",h="",c="";if(d){for(t=0;t<this._dates.length;t++)if(this._dates[t][1].exec(d[1])){r=this._dates[t][0];break}if(d[3])for(i=0;i<this._times.length;i++)if(this._times[i][1].exec(d[3])){h=(d[2]||" ")+this._times[i][0];break}for(s=(r+h+(c=d[4]&&this._zeroRegex.exec(d[4])?"Z":c)).match(this._tokens),a=[],o=0;o<s.length;o++)l=s[o],n=this._checkLiteral(s[o]),l=this._numberRegex[n?s[o].toLowerCase():l.length]||new RegExp("^\\d{1,"+l.length+"}"),(l=e.match(l))&&(0<=e.substr(0,e.indexOf(l))&&!n&&(0<=s[o].indexOf("M")?a.push(parseInt(l[0])-1):a.push(parseInt(l[0]))),e=e.slice(e.indexOf(l[0])+l[0].length));return new Date(a[0],a[1],a[2],a[3],a[4],a[5])}},_checkLiteral:function(e){return"t"==(char=e.toLowerCase())||"z"==char||":"==char||"-"==char},_setMask:function(){this.model.value=new Date,this._enableMask()},_validateTimes:function(){var e=this._validateTimeFormat(this.model.timeFormat);this.model.timeFormat=e||"h:mm tt",this._isValid(this.model.minTime)||(this.model.minTime="12:00 AM"),this._isValid(this.model.maxTime)||(this.model.maxTime="11:59 PM"),this._isValid(this.model.value,!0)||(this.model.value=null),this._checkMinMax(this.model.value)||this.model.enableStrictMode||(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime)),this._validateMinMax()},_ensureValue:function(){!this._checkMinMax(this.model.value)&&this._isValid(this.model.value,!0)&&(this.model.enableStrictMode?this.isValidState=!1:(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime)))},_validateMinMax:function(){this.model.minTime&&this.model.maxTime&&this._compareTime(this.model.minTime,this.model.maxTime)&&(this.model.minTime=this.model.maxTime)},_checkProperties:function(){this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&(this.model.enabled=!1,this.enable()):(this.model.enabled=!0,this.disable()),this._addProperty(),this._checkAttributes()},_addProperty:function(){this._setRtl(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner)},_setRtl:function(e){e?(this.wrapper.addClass("e-rtl"),this.popupList&&this.popupList.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.popupList&&this.popupList.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popupList&&this.popupList.addClass("e-corner")):(this.container.removeClass("e-corner"),this.popupList&&this.popupList.removeClass("e-corner"))},_showButton:function(e){(this.model.showPopupButton=e)?(this.container.addClass("e-padding"),this._renderTimeIcon(),this._renderDropdown(),this._addProperty()):(this.container.removeClass("e-padding"),this.timeIcon.remove(),this.popupList.remove(),this.timeIcon=this.popupList=null,h(document).off("mousedown",h.proxy(this._OnDocumentClick,this)))},_checkAttributes:function(){this.element.attr("name")||this.element.attr({name:this.element[0].id}),"ondragstart"in document.createElement("input")&&this.element.attr({ondragstart:"return false"}),"draggable"in document.createElement("input")&&this.element.attr({draggable:"false"})},_getAmPm:function(){var e=new Date;e.setHours(0),this.ttAM=h.trim(this._localizeMeridian(e)),e.setHours(23),this.ttPM=h.trim(this._localizeMeridian(e))},_setDimentions:function(){this._setHeight(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_setHeight:function(e){e&&this.wrapper.height(e),this._isIE7&&this.element.height(this.container.height())},_validateTimeFormat:function(e){var e=e.split(" "),i="";return 1==e.length||2==e.length?(h(e).each(function(e,t){i+=h.trim(t)+" "}),h.trim(i)):null},_getSeperator:function(){for(var e=this._getElePlace(),t=this.model.timeFormat.split(" ")[e.time],i=new RegExp("^[a-zA-Z0-9]+$"),s=0;s<t.length;s++)if(!i.test(t.charAt(s)))return t.charAt(s)},_checkInComplete:function(){var e=this._getCaretSelection(),t=this._getStartEnd(e),i="00",s=this._getSelectedValue(t),t=this._getCategory(t);e.end-e.start==this.element.val().length&&this._checkAll(),t&&"tt"!=t&&(this._findCategoryPosition(t),"__"==s?this._changeToDefault(i="h"!=t&&"hh"!=t?i:"12"):1!=t.length&&1==s.length&&(s=this._changeWhole(s),this.element.val(this._replaceAt(this.target.value,this.start,this.end,s))))},_checkAll:function(){for(var e,t=this._getElePlace(),i=this.model.timeFormat.split(" ")[t.time].split(this.seperator),s=0;s<i.length;s++)this._findCategoryPosition(i[s]),e=this._getSelectedValue({start:this.start,end:this.end}),1!=i[s].length&&1==e.length&&(e=this._changeWhole(e),this.element.val(this._replaceAt(this.element.val(),this.start,this.end,e)))},_changeToDefault:function(e){var t;this.incomplete=!0,t=this.element[0].value,this.element[0].value=this._replaceAt(this.target.value,this.start,this.end,e),(e=this._checkExceedRange(this.target.value))&&this._setTime(this.model[e]),this._setSelection(this.start,this.end),this._raiseChangeEvent(t)},_setSelection:function(e,t){var i=this.element[0];i.setSelectionRange?i.setSelectionRange(e,t):i.createTextRange&&((i=i.createTextRange()).collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())},_getSelectedValue:function(e){return this.target.value.substring(e.start,e.end)},_getMinMax:function(e,t){"hh"==e||"h"==e?(this.min=1,this.max=11,t&&(this.max=12)):"HH"==e||"H"==e?(this.min=0,this.max=23):"mm"!=e&&"m"!=e&&"ss"!=e&&"s"!=e||(this.min=0,this.max=59)},_focusElement:function(){this._manualFocus=!0,this.element.focus()},_targetFocus:function(e){this._clearRange(),e.preventDefault(),this.focused=!0,this.element.on("mousewheel DOMMouseScroll",h.proxy(this._mouseWheel,this)),this.wrapper.addClass("e-focus").removeClass("e-error").attr("aria-invalid","false"),this._manualFocus||(this._findCategoryPosition(this._getLeast(!1)),this._setSelection(this.start,this.end)),this._manualFocus=!1,this._prevTimeVal=this.element.val(),this._raiseEvent("focusIn")},_targetBlur:function(){this.focused=!1,this.element.off("mousewheel DOMMouseScroll",h.proxy(this._mouseWheel,this)),this.wrapper.removeClass("e-focus"),this.model.enableStrictMode||-1<this.target.value.indexOf("_")&&this.element.val(""),!this._checkMinMax(this.target.value)&&this._isValid(this.target.value,!0)?this.model.enableStrictMode?this.isValidState=!1:(this.model.minTime&&!this._compareTime(this._createObject(this.target.value),this.model.minTime,!0)&&this.element.val(this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this._createObject(this.target.value),!0)&&this.element.val(this.model.maxTime),this._isValid(this.model.value,!0)||this.element.val(null),this.isValidState=!0):this.isValidState=!0,this._ensureValue(),this._raiseChangeEvent(),this._checkErrorClass(),this._raiseEvent("focusOut"),this.model.enableStrictMode||this._checkInComplete()},_clearRange:function(){var e=this.element[0];isNaN(e.selectionStart)||(e.selectionStart=0,e.selectionEnd=0)},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true")},_getCaretSelection:function(){var e,t,i=this.element[0];return isNaN(i.selectionStart)?(t=document.selection.createRange().getBookmark(),(e=i.createTextRange()).moveToBookmark(t),(t=i.createTextRange()).collapse(!0),t.setEndPoint("EndToStart",e),{start:t=t.text.length,end:t+e.text.length}):(t=i.selectionStart,e=i.selectionEnd,{start:Math.abs(t),end:Math.abs(e)})},_mouseDownOnInput:function(){this.focused||r.isTouchDevice()||this._focusElement(),this.downPosition=this._getCaretSelection(),h(document).on("mouseup",h.proxy(this._mouseUpOnInput,this))},_mouseUpOnInput:function(e){e.preventDefault(),h(document).off("mouseup",h.proxy(this._mouseUpOnInput,this));e=this._getCaretSelection();this.incomplete&&(this.incomplete=!1,e=this.downPosition),this.target.value!=this._getSelectedText()&&(e=this._getStartEnd(e),this._setSelection(e.start,e.end))},_getCategoryPosition:function(e){var t,i,s=0,a=0,n=this.target.value.split(" "),o=this._getElePlace(),l=this.seperator,d=!1,r=this.model.timeFormat.split(" ")[o.time].split(l),h=n[o.time].split(l);if(!(r.length>h.length))if("tt"==e)n[o.tt]!=this.ttAM&&n[o.tt]!=this.ttPM||(a=(s=0==o.tt?0:n[o.time].length+1)+n[o.tt].length,d=!0);else if(s=0==o.time?0:n[o.tt].length+1,-1!=(t=r.indexOf(e))){for(i=0;i<r.length&&(a=h[i].length+1,i!=t);i++)s+=a;a+=s-1,d=!0}return{start:s,end:a,isValid:d}},_getCategory:function(e){var t=this.model.timeFormat.split(" "),i=this.seperator,s=this._getElePlace();return e.isTT?t[s.tt]:t[s.time].split(i)[e.index]},_getStartEnd:function(e){for(var t=this.seperator,i=this.element.val().split(" "),s=0,a=0,n=tt=null,o=0;o<i.length;o++)if(i[o]!=this.ttAM&&i[o]!=this.ttPM)for(var l=i[o].split(t),d=s,r=s+l[0].length,h=0;h<l.length;h++){if(a=l[h].length+s,e.start<=a){n=h,tt=!1,o=i.length;break}s+=l[h].length+1}else{if(e.start<=s+i[o].length){a=i[o].length+s,tt=!(n=0),o=i.length;break}s+=i[o].length+1}return null==n&&(s=d,a=r,n=0,tt=!1),{start:s,end:a,index:n,isTT:tt}},_modifyValue:function(e){var t,i;this._isValid(this.target.value)&&(this.model.enableStrictMode||this._checkInComplete(),i=(t=this._getCaretSelection()).start==t.end?(i=this._getLeast(!0),i=this._getCategoryPosition(i),this._getStartEnd(i)):this._getStartEnd(t),this.start=i.start,this.end=i.end,this._changeValue(i,e))},_keyUpOnInput:function(e){e.preventDefault(),this._preVal!=this.element.val()&&(this._preVal=this.element.val())},_getNextCategory:function(e,t){var i=[],s=this.seperator,a=this.model.timeFormat.split(" ");return h(a).each(function(e,t){"tt"==t?i.push(t):(t=t.split(s),i=t.concat(i))}),-1!=(a=i.indexOf(e))?(t=t?0==a?i.length-1:a-1:a==i.length-1?0:a+1,i[t]):e},_getElePlace:function(){var e,t="tt"==this.model.timeFormat.split(" ")[0]?(e=1,0):(e=0,1);return{time:e,tt:t}},_movePosition:function(e,t){var e=this._getStartEnd(e),i=(i=this._getCategory(e))||this._getLeast(t),i=this._getNextCategory(i,t);(e=this._getCategoryPosition(i)).isValid&&this._setSelection(e.start,e.end)},_findActiveIndex:function(){var e=this.ul.find("li"),t=this.element.val(),i=e.first().html(),t=(this._parse(t)-this._parse(i))/(6e4*this.model.interval);t=Math.round(t),this._activeItem=t==e.length?t:t+1,(this._activeItem<0||this._activeItem>e.length||isNaN(this._activeItem))&&(this._activeItem=0)},_keyDownOnInput:function(e){var t,i,s,a,n,o,l,d,r,h,c;if(this.model.readOnly&&!this._readOnlyKeys(e)||(s=e.keyCode,this._getInternalEvents&&38!=s&&40!=s&&36!=s&&35!=s&&9!=s))return!1;if(!this.model.enableStrictMode){if(this.showDropdown&&38!=s&&40!=s&&27!=s&&!this._readOnlyKeys(e))return!1;!this.showDropdown||37!=s&&39!=s||(e.keyCode=37==s?38:40)}switch(t=this._getCaretSelection(),c=this._getStartEnd(t),i=this._getCategory(c),e.keyCode){case 38:e.preventDefault(),this.showDropdown?this.showDropdown&&(e.preventDefault(),this._findActiveIndex(),prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectUp(this._activeItem-1),0==this._activeItem&&(this._activeItem=prevActiveItem),this._addListHover(),(activeItem=this._getActiveItem()).length)&&this._selectTimeItem(activeItem):this._isValid(this.target.value)&&this._modifyValue(!0);break;case 40:e.preventDefault(),e.altKey&&this.model.showPopupButton?this._showhidePopup():this.showDropdown?this.showDropdown&&(e.preventDefault(),this._findActiveIndex(),prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectDown(this._activeItem),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=prevActiveItem,this._addListHover(),this._selectTimeItem(this._getActiveItem())):this._isValid(this.target.value)&&this._modifyValue(!1);break;case 37:e.preventDefault(),t.start==t.end?this._setSelection(t.start-1,t.start-1):this._movePosition(t,!0);break;case 39:e.preventDefault(),t.start==t.end?this._setSelection(t.start+1,t.start+1):this._movePosition(t,!1);break;case 36:e.preventDefault(),this.showDropdown?(this._activeItem=0,prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectDown(this._activeItem),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=prevActiveItem,this._addListHover(),this._selectTimeItem(this._getActiveItem())):(o=this._firstlastVal(!0),(o=this._getCategoryPosition(o)).isValid&&this._setSelection(o.start,o.end));break;case 35:e.preventDefault(),this.showDropdown?(this._activeItem=this._listSize+1,prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectUp(this._activeItem-1),0==this._activeItem&&(this._activeItem=prevActiveItem),this._addListHover(),this._selectTimeItem(this._getActiveItem())):(o=this._firstlastVal(!1),(o=this._getCategoryPosition(o)).isValid&&this._setSelection(o.start,o.end));break;case 9:this._getInternalEvents||(this._hideResult(),o=null,e.shiftKey&&0<t.start?o=!0:!e.shiftKey&&t.end<this.element.val().length&&(o=!1),null!=o&&(e.preventDefault(),this._checkInComplete(),this._movePosition(t,o)));break;case 13:if(!this.showDropdown){this._raiseChangeEvent();break}case 27:e.preventDefault(),this._hideResult();break;case 8:case 46:if(this.model.enableStrictMode)return;this.target.value!=this._getSelectedText()&&(e.preventDefault(),i)&&"tt"!=i&&(this._findCategoryPosition(i),o=8==s&&t.start!=this.start,a=46==s&&t.end!=this.end,n=this.end-this.start,t.start==t.end&&1!=n||!o&&!a&&t.start==t.end?o?(this.element[0].value=this._replaceAt(this.target.value,t.start-1,t.start,""),this._setSelection(t.start-1,t.start-1)):a&&(this.element[0].value=this._replaceAt(this.target.value,t.end,t.end+1,""),this._setSelection(t.end,t.end)):(n=this.start,o=this.end,this.element[0].value=this._replaceAt(this.target.value,n,o,"__"),this._setSelection(n,o-n!=2?o+1:o)))}l=this._getSelectedValue(c),r=e.keyCode||e.charCode,47<e.keyCode&&e.keyCode<58?d=String.fromCharCode(r):95<e.keyCode&&e.keyCode<106&&(d=String.fromCharCode(r-48)),"tt"==i&&(!e.shiftKey&&!e.ctrlKey&&!e.altKey&&64<e.keyCode&&e.keyCode<91||47<e.keyCode&&e.keyCode<58||95<e.keyCode&&e.keyCode<106)&&(e.preventDefault(),r=this._getCategoryPosition(i),this.start=r.start,this.end=r.end,this._changeAmPm(l),this._raiseChangeEvent()),this.target.value!=this._getSelectedText()||e.shiftKey||e.ctrlKey||e.altKey||(64<e.keyCode&&e.keyCode<91&&!this.model.enableStrictMode&&e.preventDefault(),(47<e.keyCode&&e.keyCode<58||95<e.keyCode&&e.keyCode<106)&&(c=this._getStartEnd(t),this._setSelection(c.start,c.end))),!e.shiftKey&&!e.ctrlKey&&!e.altKey&&47<e.keyCode&&e.keyCode<58||95<e.keyCode&&e.keyCode<106?"tt"!=i&&(this._getMinMax(i,!0),t.start==t.end?(this._findCategoryPosition(i),t.start==this.start?(h=d+l,this.element.val(this.model.minTime),c=this._getStartEnd(t),this._setSelection(c.start,c.end)):h=l+d,!(2<h.length)&&Number(h)>=this.min&&this.max>=Number(h)||this.model.enableStrictMode||e.preventDefault()):Number(d)>=this.min&&this.max>=Number(d)||this.model.enableStrictMode||e.preventDefault()):this._allowKeyCodes(e)||(this.model.enableStrictMode||8==e.keyCode||46==e.keyCode?e.stopPropagation():e.preventDefault())},_getSelectedText:function(){var e;return window.getSelection?(e=h("#"+this.element[0].id).get(0)).value.substring(e.selectionStart,e.selectionEnd):document.selection.createRange().text},_allowKeyCodes:function(e){return!((!e.ctrlKey||65!=e.keyCode&&67!=e.keyCode&&90!=e.keyCode&&89!=e.keyCode)&&9!=e.keyCode&&116!=e.keyCode&&13!=e.keyCode)},_readOnlyKeys:function(e){return!(35!=e.keyCode&&36!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode&&!this._allowKeyCodes(e))},_firstlastVal:function(e){var t=this.model.timeFormat.split(" "),i=this.seperator;return e?"tt"!=t[0]?t[0].split(i)[0]:"tt":"tt"==t[0]&&t[1]&&(e=t[1].split(i)).length?e[e.length-1]:"tt"},_mouseWheel:function(e){if(e.preventDefault(),this.model.readOnly)return!1;var t,e=e.originalEvent;e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),0<t?this._modifyValue(!0):t<0&&this._modifyValue(!1)},_addListHover:function(){this._addSelected(),this._updateScrollTop()},_addSelected:function(){this.ul.find("li").removeClass("e-active e-hover");var e=this._getActiveItem();e.length&&!e.hasClass("e-disable")&&e.addClass("e-active")},_disableItemSelectDown:function(e){return(e=null==e||e<0?0:e)<this._listSize?h.inArray(e,this._disabledItems)<0?e:this._disableItemSelectDown(e+1):this._listSize},_disableItemSelectUp:function(e){if((e=null==(e-=1)||e<0?0:e)<this._listSize){if(h.inArray(e,this._disabledItems)<0)return e+1;if(0<e)return this._disableItemSelectUp(e)}return 0},_getActiveItem:function(){return h(this.ul.find("li")[this._activeItem-1])},_timeIconClick:function(e){var t=!1;if(e.button?t=2==e.button:e.which&&(t=3==e.which),!t){if(e.preventDefault(),!this.model.enabled||this.model.readOnly||this.ul.find("li").length<1)return!1;this._showhidePopup(),t=this.element.val().length,r.isTouchDevice()||this._setSelection(t,t)}},_showhidePopup:function(){if(this._getInternalEvents)return!1;this.showDropdown?this._hideResult():this._showResult()},_showResult:function(){this._raiseEvent("beforeOpen"),this._refreshPopup(),this.focused||r.isTouchDevice()||this._focusElement(),this.model.value?this._changeActiveEle():this.ul.find("li").removeClass("e-active");var e=this,t=this._vissibleAndCalculateTop();this.popupList.slideDown(this.model.enableAnimation?200:0,function(){h(document).on("mousedown",h.proxy(e._OnDocumentClick,e))}),this.scrollerObj.setModel({scrollTop:t}),this.showDropdown=!0,this._listSize=this.ul.find("li").length,h(window).on("resize",h.proxy(this._OnWindowResize,this)),this._on(r.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("open"),this.wrapper.addClass("e-active")},_hideResult:function(){this.showDropdown&&!this._getInternalEvents&&(this.showDropdown=!1,this.popupList.slideUp(this.model.enableAnimation?100:0),h(document).off("mousedown",h.proxy(this._OnDocumentClick,this)),h(window).off("resize",h.proxy(this._OnWindowResize,this)),this._off(r.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("close"),this.wrapper.removeClass("e-active"))},_vissibleAndCalculateTop:function(){this.popupList.css({display:"block"});var e=this._calcScrollTop();return this.popupList.css({display:"none"}),e},_calcScrollTop:function(){this.ul.outerHeight();var e=this.ul.find("li").outerHeight();return e*this.ul.find("li.e-active").index()-(this.popupList.outerHeight()-e)/2},_changeActiveEle:function(){if(!this.model.showPopupButton||!this.popupList)return!1;var e=this.ul.find("li"),t=this.element.val(),i=e.first().html(),i=(this._parse(t)-this._parse(i))/(6e4*this.model.interval);i=Math.round(i),this._activeItem=i==e.length?i:i+1,(this._activeItem<0||this._activeItem>e.length||isNaN(this._activeItem)||this._ensureTimeRange(t))&&(this._activeItem=0),this._addListHover()},_OnDocumentClick:function(e){h(e.target).is(this.popupList)||h(e.target).parents(".e-time-popup").is(this.popupList)||h(e.target).is(this.wrapper)||h(e.target).parents(".e-timewidget").is(this.wrapper)?(h(e.target).is(this.popupList)||h(e.target).parents(".e-time-popup").is(this.popupList))&&e.preventDefault():this._hideResult()},_OnWindowResize:function(){this._refreshPopup()},_OnMouseEnter:function(e){e=e.target;this.ul.find("li").removeClass("e-hover"),h(e).hasClass("e-disable")||h(e).addClass("e-hover")},_OnMouseLeave:function(){this._dateTimeInternal&&!this.model.value||this.ul.find("li").removeClass("e-hover")},_OnMouseClick:function(e){e.preventDefault(),h(e.target).hasClass("e-disable")||(this.model.enabled&&!this.model.readOnly&&(this._activeItem=h(e.target).index()+1,this.ul.find("li").attr({tabindex:-1,"aria-selected":!1}),h(e.target).attr({"aria-selected":!0,tabindex:0}),this._addSelected(),this._selectTimeItem(h(e.target))),this._showhidePopup())},_selectTimeItem:function(e){this._beforeChange(e),this._raiseChangeEvent()&&this._trigger("select",{value:this.model.value,prevTime:this._previousValue})},_findCategoryPosition:function(e){"least"==e&&(e=this._getLeast(!0));e=this._getCategoryPosition(e);this.start=e.start,this.end=e.end},_getLeast:function(i){var e=this.model.timeFormat.split(" "),s=this.seperator,a=null;return h(e).each(function(e,t){"tt"!=t&&(t=t.split(s),a=i?t[t.length-1]:t[0])}),a},_changeValue:function(e,t){this.target.value;var s,a=this._getCategory(e);if(!a)return!1;if(this._setSelection(this.start,this.end),s=this.target.value.substring(this.start,this.end),this._checkMinMax(this.target.value))if(s!=this.ttAM&&s!=this.ttPM){if(s=this._changeCurrentValue(s,a,t),1!=a.length&&(s=this._changeWhole(s)),this._findCategoryPosition(a),this.element.val(this._replaceAt(this.target.value,this.start,this.end,s)),this.end=this.start+s.toString().length,this._setSelection(this.start,this.end),this._ensureTimeRange(this.target.value)&&this._checkMinMax(this.target.value)){var n=this._createObject(this.target.value),o=n.getHours(),l=t?this._startTime:this._endTime,d=t?this._endTime:this._startTime;if(!r.isNullOrUndefined(this.model.disableTimeRanges))for(i=0;i<this.model.disableTimeRanges.length;i++)(l[i].getHours()===o||+n>=+this._startTime[i]&&+n<=+this._endTime[i])&&(this.target.value=this._localizeTime(d[i]),this._setSelection(this.start,this.end),this._changeValue(e,t))}}else this._changeAmPm(s);else s=this._checkExceedRange(this.target.value),this._setTime(this.model[s]),this._findCategoryPosition(a),this._setSelection(this.start,this.end);this._checkMinMax(this.target.value)?this._raiseChangeEvent():(this.element.val(this.model.value),this._findCategoryPosition(a),this._setSelection(this.start,this.end))},_checkMinMax:function(e){e=this._checkExceedRange(e);return!(e=null==e?!1:e)},_checkExceedRange:function(e){if(e){if(this.model.minTime&&!this._compareTime(e,this.model.minTime,!0))return"minTime";if(this.model.maxTime&&!this._compareTime(this.model.maxTime,e,!0))return"maxTime"}return null},_changeWhole:function(e){return 9<e?""+e:"0"+e},_changeAmPm:function(e){e=e==this.ttAM?this.ttPM:this.ttAM,this.element.val(this._replaceAt(this.target.value,this.start,this.end,e)),this._setSelection(this.start,this.end)},_changeMinute:function(e){var t,i=this._getExactFormat(["mm","m"]);i&&(this._findCategoryPosition(i),t=Number(this.target.value.substring(this.start,this.end)),this._getMinMax(i),e?t==this.max?(t=this.min,this._changeHour(e)):t+=1:t==this.min?(t=this.max,this._changeHour(e)):--t,this._findCategoryPosition(i),1!=i.length&&(t=this._changeWhole(t)),this.element.val(this._replaceAt(this.target.value,this.start,this.end,t)))},_changeHour:function(e){var t,i=this._getExactFormat(["hh","h","HH","H"]);i&&(this._findCategoryPosition(i),t=Number(this.target.value.substring(this.start,this.end)),this._getMinMax(i),e?t==this.max?(t+=1,this._changeMeridian()):t>this.max?t=this.min:t+=1:t==this.min?t=this.max+1:t>this.max?(t=this.max,this._changeMeridian()):--t,this._findCategoryPosition(i),1!=i.length&&(t=this._changeWhole(t)),this.element.val(this._replaceAt(this.target.value,this.start,this.end,t)))},_getExactFormat:function(e){for(var t=this.model.timeFormat,i=0;i<e.length;i++)if(-1!=t.indexOf(e[i]))return e[i];return null},_changeMeridian:function(){var e;-1!=this.model.timeFormat.indexOf("tt")&&(this._findCategoryPosition("tt"),e=this.target.value.substring(this.start,this.end)==this.ttAM?this.ttPM:this.ttAM,this.element.val(this._replaceAt(this.target.value,this.start,this.end,e)))},_changeCurrentValue:function(e,t,i){e=Number(e);var s=1,a=!0;return this._getMinMax(t),"hh"==t||"h"==t||"HH"==t||"H"==t?s=this.model.hourInterval:"mm"==t||"m"==t?s=this.model.minutesInterval:"ss"!=t&&"s"!=t||(s=this.model.secondsInterval),s<=0||(i?(("hh"==t||"h"==t)&&e>this.max?e=this.min-1+s:e<this.max?e+=s:(a=!1,"hh"!=t&&"h"!=t?e=this.min-1+s:e+=s,this._changeAdjacent(t,i)),"hh"!=t&&"h"!=t||e!=this.max+1?e>this.max+1&&(e-=this.max+1,a)&&this._changeAdjacent(t,i):a&&this._changeAdjacent(t,i),"hh"!=t&&"h"!=t&&e==this.max+1&&(e=this.min,a)&&this._changeAdjacent(t,i)):("hh"!=t&&"h"!=t&&e>this.min||("hh"==t||"h"==t)&&e>this.min&&e<=this.max?e-=s:"hh"!=t&&"h"!=t||e!=this.min?(a=!1,e=this.max+1-s,this._changeAdjacent(t,i)):e=this.max+2-s,e<this.min&&(e+=this.max+1,a)&&this._changeAdjacent(t,i))),e},_changeAdjacent:function(e,t){"ss"==e||"s"==e?this._changeMinute(t):"mm"==e||"m"==e?this._changeHour(t):"hh"!=e&&"h"!=e&&"HH"!=e&&"H"!=e||this._changeMeridian()},_valueChange:function(){this._raiseChangeEvent()},_beforeChange:function(e){return this._raiseEvent("beforeChange")||this.element.val(e.text()),!0},_raiseChangeEvent:function(e,t){return e=e===s?this.model.value:e,(this._previousValue=e)!=(current=this.target.value||null)&&(this.isValidState=!!(this._checkMinMax(this.target.value)&&this._isValid(this.target.value,this.model.enableStrictMode)||!this.target.value),this.model.value=this._isValid(this.target.value,!0)&&this._checkMinMax(this.target.value)?this.target.value:null,this.model.value||this.model.enableStrictMode||this._setTime(this.model.value),this.model.value!=this._previousValue)&&(this._raiseEvent("change",t),this._raiseEvent("_change",t),!0)},_raiseEvent:function(e,t){var i={value:this.model.value,prevTime:this._previousValue};return"change"==e&&(i.isInteraction=!t),this._trigger(e,i)},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=-1;if(7<=(e=null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)?parseFloat(RegExp.$1):e)&&e<8)return!0}return!1},_replaceAt:function(e,t,i,s){return e.substring(0,t)+s+e.substring(i)},_localizeTime:function(e){return e?h.trim(r.format(this._createObject(e),this.model.timeFormat,this.model.locale)):null},_localizeMeridian:function(e){return h.trim(r.format(e,"tt",this.model.locale))},_compareTime:function(e,t,i){return(i=!!i)?this._parse(e)>=this._parse(t):this._parse(e)>this._parse(t)},_isValid:function(e,t){return(e=this._createObject(e,t))&&"function"==typeof e.getTime&&isFinite(e.getTime())},_parse:function(e){return Date.parse(this._createObject(e))},_setEmptyDate:function(e){e=new Date(e);return e.setDate(1),e.setMonth(0),e.setFullYear(2e3),e},_createObject:function(e,t){var i,s,a,n=null;return"string"==typeof e?(i=this._setModelOption?this._preTimeformat:this.model.timeFormat,s=r.preferredCulture(this.model.locale).calendar.patterns.d,a=r.format(new Date("1/1/2000"),s,this.model.locale),n=r.parseDate(a+" "+e,s+" "+i,this.model.locale),(this._extISORegex.exec(e)||this._basicISORegex.exec(e))&&(this.model.value=n=this._timeFromISO(e)),this._setModelOption=!1,n||(a=new Date(e),n=isNaN(Date.parse(a))||r.isNullOrUndefined(e)?this._dateTimeInternal&&""!=e?new Date("1/1/2000 "+e):null:this._setEmptyDate(e))):"number"==typeof e?n=new Date(e):e instanceof Date&&(n=this._setEmptyDate(e)),n=n&&!this._dateTimeInternal&&t&&(s=this._localizeTime(n),this._ensureTimeRange(s))?null:n},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur),this._on(this.element,"mousedown",this._mouseDownOnInput),this._on(this.element,"keydown",this._keyDownOnInput),this._on(this.element,"keyup",this._keyUpOnInput)}})}),function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.scroller.min","./ej.datepicker.min","./ej.timepicker.min"],e):e()}(function(){"use strict";var t,e=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);i.prototype=t.prototype,e.prototype=new i},e=(t=ej.WidgetBase,e(i,t),i.prototype.setModel=function(e,t){this.setModel(e,t)},i.prototype.option=function(e,t){this.option(e,t)},i.prototype._setModel=function(e){for(var t in e)switch(t){case"allowEdit":e[t]||(this.element.attr("readonly","readonly"),this.element.on("mousedown",$.proxy(this._showDatePopUp,this)),this.element.off("blur",$.proxy(this._onMainFocusOut,this)));break;case"startDate":0==this._validateValues(e[t],"left")?e[t]=null:(this._startEndValidation()||null==this.model.endDate||(this._resetValues(),this.model.endDate=null),this._updateValues(),this._selectedStartDate=this.model.startDate,e[t]=this.model.startDate);break;case"endDate":0==this._validateValues(e[t],"right")?e[t]=null:(this._startEndValidation()||(this._rightDP.element.parents(".e-datewidget").addClass("e-val-error"),this.model.endDate=null),this._updateValues(),e[t]=this.model.endDate);break;case"enableTimePicker":this.model.enableTimePicker=e[t],e[t]?this._renderTimePicker():this._removeTimePicker(),this._scrollerObj&&(this._scrollerObj.model.height=this.datePopup.height(),this._scrollerObj.refresh());break;case"locale":this._setCulture(e[t]),e[t]=this.model.locale;break;case"separator":this.model.separator=e[t],this._mainValue();break;case"dateFormat":this._leftDP&&this._leftDP.option(t,e[t]),this._rightDP&&this._rightDP.option(t,e[t]),this.model.dateFormat=e[t],this._getDateTimeFormat(),this._updateInput();break;case"timeFormat":this._leftTP&&this._leftTP.option(t,e[t]),this._rightTP&&this._rightTP.option(t,e[t]),this.model.timeFormat=e[t],this._getDateTimeFormat(),this._updateInput();break;case"watermarkText":ej.isNullOrUndefined(this._options)&&(this._options={}),this._options.watermarkText=this.model.watermarkText=e[t],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"cssClass":this._changeSkin(e[t]);break;case"showRoundedCorner":this._setRoundedCorner(e[t]);break;case"showPopupButton":this._renderDateIcon(e[t]);break;case"value":this.element.val(e[t]),this._onMainFocusOut(),e[t]=this.model.value;break;case"height":this.wrapper.height(e[t]);break;case"width":this.wrapper.width(e[t]);break;case"enabled":e[t]?this.enable():this.disable()}},i.prototype._init=function(e){this._options=e,this._flagevents=!1,this._id=this.element.attr("id"),this._isSupport=null!=document.createElement("input").placeholder,""==this.element.val()&&this.model.value&&this.element.val(this.model.value),this.element.val()&&this._setInitValue(),this._createDateRangePicker(),0==this._validState&&this.element.val()&&this.wrapper.addClass("e-error"),this._popupOpen=!1,this._isPopScroll=!1,this.model.enabled||this.disable(),this._wireEvents()},i.prototype._setInitValue=function(){var e=this.element.val().split(this.model.separator),t=ej.parseDate(e[0],this._dateTimeFormat,this.model.locale),e=ej.parseDate(e[1],this._dateTimeFormat,this.model.locale);t&&e&&(this.model.startDate=t,this.model.endDate=e)},i.prototype._getNextMonth=function(e){var t,i;return e instanceof Date?(11==(t=e.getMonth())?(i=e.getFullYear()+1,t=-1):i=e.getFullYear(),e=new Date,e=new Date(e.setFullYear(i)),e=new Date(e.setMonth(t+1)),new Date(e.setDate(1))):new Date},i.prototype._getDateTimeFormat=function(){var e=ej.preferredCulture(this.model.locale).calendars.standard.patterns;this.model.dateFormat||(this.model.dateFormat=e.d),this.model.enableTimePicker?(this.model.timeFormat||(this.model.timeFormat=e.t),this._dateTimeFormat=this.model.dateFormat+" "+this.model.timeFormat):this._dateTimeFormat=this.model.dateFormat},i.prototype._setValues=function(){this._leftDP.option("value",this.model.startDate),this._rightDP.option("value",this.model.endDate||null),this.model.startDate&&this._setStartDate(this.model.startDate,$('.current-month[date="'+this.model.startDate.toDateString()+'"]'),!0),this.model.endDate&&this._setEndDate(this.model.endDate,$('.current-month[date="'+this.model.endDate.toDateString()+'"]'),!0),this._rangeRefresh(this._setArgs(this._leftDP.popup)),this._rangeRefresh(this._setArgs(this._rightDP.popup)),this._rightDP.element.parents(".e-datewidget").removeClass("e-error"),this.model.enableTimePicker&&(this._leftTP.option("value",this.model.startDate),this._rightTP.option("value",this.model.endDate)),this._updateRanges("left"),this._updateRanges("right")},i.prototype._customSet=function(){this._selectedStartDate=this.model.startDate,this._selectedEndDate=this.model.endDate,this._resetValues(),this._setValues(),this._popupOpen||this._mainValue(),this._refreshMinMax(),this._setWaterMark()},i.prototype._setCulture=function(e){e=ej.preferredCulture(e).name,this.model.locale=e,this._setOption("locale",e),this._localizedLabels=this._getLocalizedLabels(),this._setLocalizedText(),this._updateInput()},i.prototype._setRoundedCorner=function(e){e?(this._input_innerWrapper.addClass("e-corner"),this.popup.addClass("e-corner")):(this._input_innerWrapper.removeClass("e-corner"),this.popup.removeClass("e-corner")),this._setOption("showRoundedCorner",e)},i.prototype._renderDateIcon=function(e){e?(this.dateRangeIcon=ej.buildTag("span.e-select#"+this.id+"-img","",{},this._isIE8?{unselectable:"on"}:{}).append(ej.buildTag("span.e-icon e-calendar","",{},{"aria-label":"Select"}).attr(this._isIE8?{unselectable:"on"}:{})).insertAfter(this.element),this._input_innerWrapper.addClass("e-padding"),this._on(this.dateRangeIcon,"mousedown",this._showDatePopUp)):(this.dateRangeIcon&&this.dateRangeIcon.remove(),this._input_innerWrapper.removeClass("e-padding"),this._bindDateButton()),this._off(this.dateRangeIcon,"click",this._showDatePopUp)},i.prototype._validateValues=function(e,t){"right"==t?this._rightDP:this._leftDP;var i=e;if(null!=i&&"string"==typeof i)"left"==t?(this.model.startDate=ej.parseDate(e,this.model.dateFormat,this.model.locale)||null,this.model.startDate=null!=this.model.startDate?this.model.startDate:new Date(i)):(this.model.endDate=ej.parseDate(e,this.model.dateFormat,this.model.locale)||null,this.model.endDate=null!=this.model.endDate?this.model.endDate:new Date(i));else{if(!(e instanceof Date))return!1;if("left"==t){if(this.model.startDate=e,isNaN(e.getDate()))return!1;"string"!=typeof this._formatter(this.model.startDate,this.model.locale)&&(this.model.startDate=ej.parseDate(this._formatter(this.model.startDate,this.model.locale),this.model.dateFormat))}else if("right"==t){if(this.model.endDate=e,isNaN(e.getDate()))return!1;"string"!=typeof this._formatter(this.model.endDate,this.model.locale)&&(this.model.endDate=ej.parseDate(this._formatter(this.model.endDate,this.model.locale),this.model.dateFormat))}}return!0},i.prototype._formatter=function(e,t){t=this._checkFormat(t);return ej.format(e,t,this.model.locale)},i.prototype._checkFormat=function(e){var t=this,i=this._regExp();return e.replace(i,function(e){return"/"===e&&"/"!==ej.preferredCulture(t.model.locale).calendars.standard["/"]?"'/'":e})},i.prototype._regExp=function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},i.prototype._setArgs=function(e){var t=new Date($(e.find(".current-month")[0]).attr("date"));return this.args={},this.args.element=e,this.args.month=t.getMonth(),this.args.year=t.getFullYear(),this.args},i.prototype._changeSkin=function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popup.removeClass(this.model.cssClass).addClass(e),this._setOption("cssClass",e)},i.prototype._createDateRangePicker=function(){var t;this._localizedLabels=this._getLocalizedLabels(),this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0"}),this.wrapper=ej.buildTag("span.e-daterangewidget e-widget "+this.model.cssClass),ej.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this._input_innerWrapper=ej.buildTag("span.e-in-wrap e-box"),this.wrapper.append(this._input_innerWrapper).insertBefore(this.element),this._input_innerWrapper.append(this.element),this._input_innerWrapper.addClass("e-padding"),this.popup=ej.buildTag("div.e-daterangepicker-popup e-popup e-widget e-box"+this.model.cssClass+"#"+this.element[0].id+"_popup").css("display","none"),this._isSupport||(this._hiddenInput=ej.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block"),t=this,$(this._hiddenInput).focus(function(){t.element.focus()})),$("body").append(this.popup),this.datePopup=ej.buildTag("div.e-datepickers-popup"),this.popup.append(this.datePopup),this._leftDiv=ej.buildTag("div.e-left-datepicker"),this._rightDiv=ej.buildTag("div.e-right-datepicker"),this.datePopup.append(this._leftDiv),this.datePopup.append(this._rightDiv),this.calendar_left=ej.buildTag("input.leftDate_wrapper#"+this.element[0].id+"leftDate_wrapper","",{},{type:"text"}),this._leftDiv.append(this.calendar_left),this.calendar_right=ej.buildTag("input.rightDate_wrapper#"+this.element[0].id+"rightDate_wrapper","",{},{type:"text"}),this._rightDiv.append(this.calendar_right),(t=this).culture=ej.preferredCulture(this.model.locale),this._getDateTimeFormat(),this._setRoundedCorner(this.model.showRoundedCorner),this._renderDateIcon(this.model.showPopupButton),this.calendar_left.ejDatePicker({displayInline:!0,showFooter:!1,watermarkText:"",width:"100%",enableStrictMode:!0,layoutChange:function(){t._refreshEvents("left"),t._updateRanges("left"),t._scrollerObj&&(t._scrollerObj.model.height=t.datePopup.height(),t._scrollerObj.refresh())},showTooltip:!1,locale:this.model.locale,dateFormat:this.model.dateFormat,_month_Loaded:function(e){t._previousNextHandler(e)},enablePersistence:this.model.enablePersistence}),this._leftDP=this.calendar_left.data("ejDatePicker"),this._leftDP._getInternalEvents=!0,this._leftDP._DRPdisableFade=!0,this._leftDP.option("showPopupButton",!1),this._leftDP.popup.css({position:"static",visibility:"inherit"}),this.calendar_right.ejDatePicker({displayInline:!0,width:"100%",showFooter:!1,watermarkText:"",enableStrictMode:!0,locale:this.model.locale,create:$.proxy(this._updateOnRender,this),layoutChange:function(){t._refreshEvents("right"),t._updateRanges("right"),t._scrollerObj&&(t._scrollerObj.model.height=t.datePopup.height(),t._scrollerObj.refresh())},dateFormat:this.model.dateFormat,_month_Loaded:function(e){t._previousNextHandler(e)},enablePersistence:this.model.enablePersistence}),this._rightDP=this.calendar_right.data("ejDatePicker"),this._rightDP._getInternalEvents=!0,this._rightDP._DRPdisableFade=!0,this._rightDP.option("showPopupButton",!1),this._rightDP.popup.css({position:"static",visibility:"inherit"}),this.model.ranges&&this._renderRanges(),this.model.enableTimePicker&&this._renderTimePicker(),this._renderButton(),this._bindDateButton(),this._refreshEvents("left"),this._refreshEvents("right"),this._updateRanges("left"),this._updateRanges("right"),this.wrapper&&(this.model.width&&this.wrapper.width(this.model.width),this.model.height)&&this.wrapper.height(this.model.height)},i.prototype._updateOnRender=function(){this.model.enableTimePicker?this._rightTime&&(this._rightTP=this._rightTime.ejTimePicker("instance"),this._updateValues()):this.calendar_right&&(this._rightDP=this.calendar_right.ejDatePicker("instance"),this._updateValues())},i.prototype._updateRangesList=function(){$(".e-dateranges-ul").find(".rangeItem.e-active").removeClass("e-active"),$(".e-dateranges-ul").find(".rangeItem.e-custompic").addClass("e-active")},i.prototype._updateValues=function(){this._updateRangesList(),this._getDateTimeFormat(),this._startEndValidation()||null!=this.model.startDate&&null==this.model.endDate?(this._validateValues(this.model.startDate,"left"),this._validateValues(this.model.endDate,"right"),this._setValues(),this._mainValue()):(this._clearRanges(),this.element.val("")),this._refreshMinMax(),this._setWaterMark()},i.prototype._startEndValidation=function(){var e,t;return!(!this.model.startDate||!this.model.endDate||(e=this.model.startDate,(t=this.model.endDate)&&t<e))},i.prototype._renderButton=function(){this._buttonDiv=ej.buildTag("div.e-drpbuttons");var e=ej.buildTag("div.e-drp-button e-drp-reset e-btn e-select e-flat").attr({tabindex:"0"}),t=ej.buildTag("div.e-drp-button e-drp-apply e-disable e-btn e-select e-flat").attr({tabindex:"0"}),i=ej.buildTag("div.e-drp-button e-drp-cancel e-btn e-select e-flat").attr({tabindex:"0"});this._buttonDiv.append(e),this._buttonDiv.append(t),this._buttonDiv.append(i),this.popup.append(this._buttonDiv),this._setLocalizedText()},i.prototype._setLocalizedText=function(){ej.isNullOrUndefined(this._options)||(ej.isNullOrUndefined(this._options.buttonText)||$.extend(this._localizedLabels.ButtonText,this._options.buttonText),ej.isNullOrUndefined(this._options.watermarkText))||(this._localizedLabels.watermarkText=this._options.watermarkText),this.model.buttonText=this._localizedLabels.ButtonText,$(this._buttonDiv.find("div.e-drp-reset")).text(this.model.buttonText.reset),$(this._buttonDiv.find("div.e-drp-apply")).text(this.model.buttonText.apply),$(this._buttonDiv.find("div.e-drp-cancel")).text(this.model.buttonText.cancel),this._customRangePicker&&0<this._customRangePicker.find("ul li.e-custompic").length&&this._customRangePicker.find("ul li.e-custompic").text(this._localizedLabels.customPicker),this._setWaterMark()},i.prototype._renderRanges=function(){var e,t,i,s,a;if(this._renderRangesWrapper(),this.popup.append(this._customRangePicker),this._ranges_li="",this.model.ranges)for(e=0;e<this.model.ranges.length;e++)2===(i=(t=this.model.ranges[e]).range).length&&(s=new Date(i[0]),a=new Date(i[1]),(s=ej.isNullOrUndefined(s)?new Date(i[0]):s)<=(a=ej.isNullOrUndefined(a)?new Date(i[1]):a))&&(this._ranges_li+="<li aria-selected='false' title='"+t.label+"' class='rangeItem' e-date-range='"+JSON.stringify(i)+"' e-data-value='"+t.range+"'>"+t.label+"</li>");this._ranges_li+="<li aria-selected='false' class='rangeItem e-active e-custompic' e-date-range='customPicker'>"+this._localizedLabels.customPicker+"</li>",this.popup.find("div.e-custom-dateranges ul").append(this._ranges_li),this._on(this._customRangePicker.find("ul li.rangeItem"),"click",this._customSelection),this._customRangePicker.ejScroller({height:this.datePopup.height(),width:0,scrollerSize:15}),this._scrollerObj=this._customRangePicker.ejScroller("instance")},i.prototype._removeTimePicker=function(){this._leftDiv.removeClass("e-left-timepicker"),this._rightDiv.removeClass("e-right-timepicker"),this._leftTP.destroy(),this._rightTP.destroy(),this._rightTP=null,this._leftTP=null,this._leftTime.remove(),this._rightTime.remove(),this._setOption("width",""),this._setOption("width","100%"),this._updateValues()},i.prototype._setOption=function(e,t){this._leftDP&&this._leftDP.option(e,t),this._rightDP&&this._rightDP.option(e,t),this.model.enableTimePicker&&(this._leftTP&&this._leftTP.option(e,t),this._rightTP)&&this._rightTP.option(e,t)},i.prototype._renderTimePicker=function(){""==this.model.timeFormat&&(this.model.timeFormat=this.culture.calendar.patterns.t),this._leftTime=ej.buildTag("input.leftTime#"+this._id+"_lTime"),this._leftDiv.append(this._leftTime),this._leftDiv.addClass("e-left-timepicker");var t=this;this._leftTime.ejTimePicker({width:"100px",popupWidth:"100px",locale:this.model.locale,timeFormat:this.model.timeFormat,select:function(e){t.model.startDate&&t.model.endDate&&(t._rightTP&&t.model.startDate.toLocaleDateString()==t.model.endDate.toLocaleDateString()&&t._rightTP.option("minTime",e.value),t._buttonDiv.find(".e-drp-apply").removeClass("e-disable"))}}),this._leftTP=this._leftTime.ejTimePicker("instance"),this._leftTP.popup.addClass("e-daterange-timepopup"),this._rightTime=ej.buildTag("input.rightTime#"+this._id+"_rTime"),this._rightDiv.append(this._rightTime),this._rightDiv.addClass("e-right-timepicker"),this._rightTime.ejTimePicker({width:"100px",popupWidth:"100px",locale:this.model.locale,create:$.proxy(this._updateOnRender,this),timeFormat:this.model.timeFormat,select:function(){t.model.startDate&&t.model.endDate&&t._buttonDiv.find(".e-drp-apply").removeClass("e-disable")}}),this._rightTP=this._rightTime.ejTimePicker("instance"),this._rightTP.popup.addClass("e-daterange-timepopup"),this._on(this._leftTP.element,"keydown",this._onKeyDown),this._on(this._rightTP.element,"keydown",this._onKeyDown),this._setTimePickerPos()},i.prototype._setTimePickerPos=function(){$("#"+this._id+"_lTime_timewidget").css({position:"absolute",top:0,left:this._leftDP.popup.width()+this._leftDP.popup.position().left-this.popup.find($("#"+this._id+"_lTime_timewidget")).outerWidth()}),$("#"+this._id+"_rTime_timewidget").css({position:"absolute",top:this.popup.hasClass("e-daterange-responsive")?this._rightDP.wrapper.position().top:0,left:this._rightDP.popup.width()+this._rightDP.popup.position().left-this.popup.find($("#"+this._id+"_rTime_timewidget")).outerWidth()}),this.popup.find($(".e-left-datepicker .e-datewidget")).css({width:this._leftDP.popup.width()-this.popup.find($("#"+this._id+"_lTime_timewidget")).width()-1}),this.popup.find($(".e-right-datepicker .e-datewidget")).css({width:this._rightDP.popup.width()-this.popup.find($("#"+this._id+"_rTime_timewidget")).width()-1})},i.prototype._updateInput=function(){this.model.startDate&&this.model.endDate?(this._resetValues(),this.wrapper.removeClass("e-error"),this._mainValue(),this._refreshMinMax()):(this.model.value&&this.element.val(this.model.value),this._popupOpen&&this.popupHide())},i.prototype._removeWatermark=function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},i.prototype._mainValue=function(){var e,t,i=this.model.startDate,s=this.model.endDate,i=ej.format(i,this.model.dateFormat,this.model.locale),s=ej.format(s,this.model.dateFormat,this.model.locale);this.model.enableTimePicker&&this._leftTP&&this._rightTP&&this._leftTP.model.value&&this._rightTP.model.value?(e=this._leftTP.model.value,t=this._rightTP.model.value,i=ej.format(i+" "+e,this._dateTimeFormat,this.model.locale),s=ej.format(s+" "+t,this._dateTimeFormat,this.model.locale),this.model.startDate=ej.parseDate(i,this._dateTimeFormat,this.model.locale),this.model.endDate=ej.parseDate(s,this._dateTimeFormat,this.model.locale)):(this.model.startDate=ej.parseDate(i,this._leftDP.model.dateFormat,this.model.locale),this.model.endDate=ej.parseDate(s,this._rightDP.model.dateFormat,this.model.locale)),null!=i&&null!=s?(this.model.value=i+" "+this.model.separator+" "+s,this.element.val(this.model.value),this._hiddenInput&&this._hiddenInput.attr("value",this.model.value),this._removeWatermark(),this._validState=!0):(this.model.value=null,this._setWaterMark(),this._validState=!1),this._prevValue=this.model.value,this._buttonDiv&&this._buttonDiv.find(".e-drp-apply").addClass("e-disable"),this._trigger("_change",{value:this.model.value})},i.prototype._bindDateButton=function(){this.dateRangeicon&&this._on(this.dateRangeIcon,"click",this._showDatePopUp),this.model.allowEdit||(this.element.attr("readonly","readonly"),this.element.on("mousedown",$.proxy(this._showDatePopUp,this)),this.element.off("blur",$.proxy(this._onMainFocusOut,this))),this.model.allowEdit&&this.element.off("mousedown",$.proxy(this._showDatePopUp,this))},i.prototype._showDatePopUp=function(e){if(!this.model.enabled)return!1;var t=!1;e.button?t=2==e.button:e.which&&(t=3==e.which),t||this._showhidePopup(e)},i.prototype._showhidePopup=function(e){this._popupOpen?(this._isFocused||!this.element.is(":input")||ej.isTouchDevice()||this.wrapper.addClass("e-focus"),this.popupHide(e)):(this._isFocused||!this.element.is(":input")||ej.isTouchDevice()||this.wrapper.addClass("e-focus"),this.popupShow(e))},i.prototype.popupHide=function(e){if(!this._popupOpen||this._isPopScroll)return!1;var t=this;this._trigger("beforeClose",{element:this.popup,events:e}),this.popup.attr({"aria-hidden":"true"}),this._leftTP&&!this._leftTP._popupOpen&&this._leftTP.hide(),this._rightTP&&!this._rightTP._popupOpen&&this._rightTP.hide(),this.popup.css("visibility","visible").slideUp(100,function(){t._popupOpen=!1}),this._off(ej.getScrollableParents(this.wrapper),"scroll",$.proxy(this.popupHide,this)),this._trigger("close",{element:this.popup,events:e}),this.wrapper.removeClass("e-active")},i.prototype.popupShow=function(e){if(!this.model.enabled||this._popupOpen)return!1;this._trigger("beforeOpen",{element:this.popup,events:e}),this.wrapper.addClass("e-focus"),this.popup.attr({"aria-hidden":"false"}),this._popupOpen=!0,this.popup.css({visibility:"hidden",display:"block"}),this._resizePopup(),this.popup.css({display:"none",visibility:"visible"}).slideDown(100,function(){}),this._on(ej.getScrollableParents(this.wrapper),"scroll",$.proxy(this.popupHide,this)),this._trigger("open",{element:this.popup,events:e}),this.wrapper.addClass("e-active")},i.prototype._resizePopup=function(){var e=this,t=0,i=0,s=e.datePopup.find(".e-popup.e-calendar").outerWidth(),a=e.datePopup.find(".e-popup.e-calendar").height();if(this._customRangePicker&&this._customRangePicker.height()<=0&&this._customRangePicker.height(this.datePopup.height()),this.model.ranges&&0<this.model.ranges.length&&(i=this._customRangePicker.find("ul").height(),t=e._customRangePicker.outerWidth()),$(window).width()-this.wrapper.position().left<2*s+t+25){if(e.popup.addClass("e-daterange-responsive"),e._setOption("width","95%"),this.model.enableTimePicker)return this._setOption("width","47%"),this._setDatePickerPosition(),$("#"+this._id+"_lTime_timewidget").css({left:this._leftDP.wrapper.outerWidth()+5}),$("#"+this._id+"_rTime_timewidget").css({left:this._rightDP.wrapper.outerWidth()+5}),void(e._scrollerObj&&(e._scrollerObj.model.height=i<a?i+10:a,e._scrollerObj.refresh()))}else e.popup.removeClass("e-daterange-responsive"),this.model.enableTimePicker&&(this._leftTP.option("width","100px"),this._rightTP.option("width","100px"),this._setTimePickerPos()),e._scrollerObj&&(e._scrollerObj.model.height=this.datePopup.height(),e._scrollerObj.refresh());this._setDatePickerPosition()},i.prototype._onDocumentClick=function(e){!this.model||$(e.target).is(this.popup)||$(e.target).parents(".e-popup").is(this.popup)||$(e.target).is(this.wrapper)||$(e.target).parents(".e-daterangewidget").is(this.wrapper)||(!this.model.enableTimePicker||$(e.target).is(this._leftTP.popup)||$(e.target).parents(".e-popup").is(this._leftTP.popup)||$(e.target).is(this._rightTP.popup)||$(e.target).parents(".e-popup").is(this._rightTP.popup)||(this._popupOpen&&this.popupHide(e),this.wrapper.removeClass("e-focus")),this.model.enableTimePicker)||(this._popupOpen&&this.popupHide(e),this.wrapper.removeClass("e-focus"))},i.prototype._getOffset=function(e){var t,e=e.offset()||{left:0,top:0};return"static"!=$("body").css("position")&&(t=$("body").offset(),e.left-=t.left,e.top-=t.top),e},i.prototype._getZindexPartial=function(e,t){var i,s,a;if(!ej.isNullOrUndefined(e)&&0<e.length)return i=e.parents(),s=$("body").children(),!ej.isNullOrUndefined(e)&&0<e.length&&s.splice(s.index(t),1),$(s).each(function(e,t){i.push(t)}),!(a=Math.max.apply(a,$.map(i,function(e){if("static"!=$(e).css("position"))return parseInt($(e).css("z-index"))||1})))||a<1e4?a=1e4:a+=1,a},i.prototype._setDatePickerPosition=function(){var e=this.element.is("input")?this.wrapper:this.element,t=this._getOffset(e),i=$(document).scrollTop()+$(window).height()-(t.top+$(e).outerHeight()),s=t.top-$(document).scrollTop(),a=this.popup.outerHeight(),n=this.popup.outerWidth(),o=t.left,l=e.outerHeight(),d=(e.height(),this._getZindexPartial(this.element,this.popup)),i=a<i||s<a?t.top+l+3:t.top-a-3;$(document).scrollLeft()+$(window).width()-o<n&&n<o+e.outerWidth()&&(o-=this.popup.outerWidth()-e.outerWidth()),this.popup.css({left:o+"px",top:i+"px","z-index":d}),this.model.enableTimePicker&&($("#"+this._id+"_lTime_timewidget").css({position:"absolute",top:0,left:this._leftDP.popup.width()+this._leftDP.popup.position().left-$("#"+this._id+"_lTime_timewidget").width()}),$("#"+this._id+"_rTime_timewidget").css({position:"absolute",top:this.popup.hasClass("e-daterange-responsive")?this._rightDP.wrapper.position().top:0,left:this._rightDP.popup.width()+this._rightDP.popup.position().left-$("#"+this._id+"_rTime_timewidget").width()}))},i.prototype._dateEleClicked=function(e){var t,i,s,a;this._updateRangesList(),this._activeItem=$(e.currentTarget),this._activeItem.hasClass("e-hidedate")?e.stopPropagation():(this._activeItem.hasClass("other-month")&&this._refreshMinMax(),s=this._activeItem.attr("date"),t=0<$(e.currentTarget).parents(".e-left-datepicker").length?"left":"right",ej.isNullOrUndefined(s)||""===s||(i=new Date(s),null!=this._selectedStartDate&&null!=this._selectedEndDate&&(this._selectedStartDate=null),null==this._selectedStartDate?(this._selectedStartDate=i,this._selectedEndDate=null,this._startDate&&(this._startDate.date=null),this._rightDP.element.val(null),"right"==t&&(this._leftDP._stopRefresh=!0,this._leftDP.option("value",this._selectedStartDate),this._leftDP.element.val(this._selectedStartDate.toLocaleDateString())),this._rightTP&&this._rightTP.option("value",""),this.popup.find(".in-range").removeClass("in-range"),this.datePopup.find("td.e-state-default.e-active").removeClass("e-active"),this._rightDP.element.parents(".e-datewidget").removeClass("e-error"),a=$(this.datePopup.find('.current-month[date="'+s+'"]')),this._selectedStartDate=new Date(a.attr("date")),this._setStartDate(this._selectedStartDate,a,!0)):null===this._selectedStartDate||null!=this._selectedEndDate||i<this._selectedStartDate?(this._selectedStartDate=i,this._selectedEndDate=null,this._endDate&&(this._endDate.date=null),this.popup.find(".in-range").removeClass("in-range"),this._rightDP.option("value",null),this._rightTP&&this._rightTP.option("value",""),"right"==t&&(this._leftDP._stopRefresh=!0,this._leftDP.option("value",this._selectedStartDate),this._leftDP.element.val(this._selectedStartDate.toLocaleDateString())),this._setStartDate(this._selectedStartDate,this._activeItem,!0),this._updateRanges("left"),this._updateRanges("right")):(s=$(e.currentTarget).attr("date"),this._rightDP._stopRefresh=!0,this._rightDP.option("value",new Date(s)),this._rightDP._stopRefresh=!1,this._rightTP&&this._rightTP.option("value",new Date(s)),this._rightDP.element.parents(".e-datewidget").removeClass("e-error"),a=$(this.datePopup.find('.current-month[date="'+s+'"]')),this._selectedStartDate=this.model.startDate,this._selectedEndDate=new Date(s),this._setEndDate(this._selectedEndDate,a,!0),this._startDate={},this._startDate.date=this._selectedStartDate,this._updateRanges("left"),this._updateRanges("right"),"left"==t&&(this._leftDP._stopRefresh=!0,this._leftDP.option("value",this.model.startDate),this._leftDP.element.val(this.model.startDate.toLocaleDateString()))),this._trigger("click",{element:$(e.currentTarget),startDate:this.model.startDate,endDate:this.model.endDate,value:new Date($(e.currentTarget).attr("date"))})))},i.prototype._setStartDate=function(e,t,i){this._startDate={},this._startDate.date=e,i&&(this._endDate={},this._endDate.date=null),this._leftDP._checkDateArrows(),this.datePopup.find("td.e-state-default").removeClass("e-select e-start-date e-active showrange e-end-date e-state-hover"),this.popup.find(".in-range").removeClass("in-range"),t.addClass("e-start-date"),this.model.startDate=e,this._buttonDiv&&this._buttonDiv.find(".e-drp-apply").addClass("e-disable"),this.model.enableTimePicker&&(i=this._leftTP,(t=ej.format(this._leftTP.model.value||this._leftDP.model.value,i.model.timeFormat,this.model.locale))&&this._rightTP.option("minTime",t),t)&&this._leftTP.option("value",t)},i.prototype._setEndDate=function(e,t){this._rightDP.element.parents(".e-datewidget").removeClass("e-val-error"),this._endDate={},this._endDate.date=e,this.popup.find("td.e-end-date").removeClass("e-select e-end-date"),t.addClass("e-end-date"),this._buttonDiv&&this._buttonDiv.find(".e-disable").removeClass("e-disable"),this.model.endDate=e,this._startDate.date.getFullYear()==this._endDate.date.getFullYear()&&this._startDate.date.getMonth()==this._endDate.date.getMonth()||!this.model.enableTimePicker||(this.model.startDate.getDate()==this.model.endDate.getDate()?(this._rightTP.option("minTime",this._leftTP.option("value")||""),this._rightTP.option("value",this._leftTP.option("value")||"")):(t=this._rightTP,(e=ej.format(this._rightTP.model.value,t.model.timeFormat,this.model.locale))&&this._rightTP.option("minTime",e),e&&this._rightTP.option("value",e)))},i.prototype._rangeRefresh=function(e){var t,i,s;this._rightDP&&(i=(e.element.parent().hasClass("e-left-datepicker")?this._leftDP:this._rightDP).popup),this._startDate&&this._startDate.date&&this._startDate.date.getMonth()==e.month&&this._startDate.date.getFullYear()==e.year&&(t=$(i.find('.current-month[date="'+this._startDate.date.toDateString()+'"]')),this._setStartDate(this._startDate.date,t,!1),this._startDate.date.getDate()+1==t.next("td").text())&&$(t).addClass("showrange"),this._endDate&&this._endDate.date&&this._endDate.date.getMonth()==e.month&&this._endDate.date.getFullYear()==e.year&&(s=$(i.find('.current-month[date="'+this._endDate.date.toDateString()+'"]')),this._setEndDate(this._endDate.date,s,!1)),t==s&&$(t).removeClass("showrange"),this._rightDP&&this._startDate&&this._startDate.date&&this._endDate&&this._endDate.date&&this._startDate.date.getFullYear()<=e.year&&this._endDate.date.getFullYear()>=e.year&&(e.element.parent().hasClass("e-left-datepicker"),$(i.find("td.current-month")[0]),s=e.element.parent().hasClass("e-left-datepicker")?"left":"right",this._updateRanges(s))},i.prototype._renderRangesWrapper=function(){ej.isNullOrUndefined(this._customRangePicker)&&(this._customRangePicker=ej.buildTag("div.e-custom-dateranges").css("height",this.datePopup.height()),this.popup.append(this._customRangePicker),this._customRangePicker.insertBefore(this._buttonDiv),this._ranges_li="<ul class='e-dateranges-ul'></ul>",this._customRangePicker.append(this._ranges_li))},i.prototype.setRange=function(e){var t,i;if(this._clearRanges(),"string"==typeof e){for(i=0;i<this.model.ranges.length;i++)if((t=this.model.ranges[i]).label==e)return this.model.startDate=t.range[0],this.model.endDate=t.range[1],void this._updatePreRanges()}else"object"==typeof e&&2==e.length&&(this.model.startDate=e[0],this.model.endDate=e[1],this._updatePreRanges())},i.prototype._updatePreRanges=function(){this._selectedStartDate=this.model.startDate,this._selectedEndDate=this.model.endDate,this._resetValues(),this._setValues(),this._refreshMinMax(),this._popupOpen||this._mainValue(),this._setWaterMark()},i.prototype.destroy=function(){this.destroy()},i.prototype._destroy=function(){this._popupOpen&&this._showhidePopup(),this.wrapper&&(this.element.removeClass("e-input"),this.element.insertAfter(this.wrapper),this.wrapper.remove()),ej.isNullOrUndefined(this._leftDP)||this._leftDP.destroy(),ej.isNullOrUndefined(this._rightDP)||this._rightDP.destroy(),ej.isNullOrUndefined(this._rightTP)||this._rightTP.destroy(),ej.isNullOrUndefined(this._leftTP)||this._leftTP.destroy(),ej.isNullOrUndefined(this._scrollerObj)||this._scrollerObj.destroy(),this.popup.remove()},i.prototype.addRanges=function(e){var t,i,s,a,n,o="";if(e)for(t=0;t<e.length;t++)2===(s=(i=e[t]).range).length&&(a=new Date(s[0]),n=new Date(s[1]),(a=ej.isNullOrUndefined(a)?new Date(s[0]):a)<=(n=ej.isNullOrUndefined(n)?new Date(s[1]):n))&&(i.label||(i.label="PreDefined Ranges"),o+="<li aria-selected='false' title='"+i.label+"'class='rangeItem' e-date-range='"+JSON.stringify(s)+"' e-data-value='"+i.range+"'>"+i.label+"</li>");this._renderRangesWrapper(),this._customRangePicker.find(".e-dateranges-ul").append(o),this._off(this._customRangePicker.find("ul li.rangeItem"),"click",this._customSelection),this._on(this._customRangePicker.find("ul li.rangeItem"),"click",this._customSelection),this._scrollerObj&&this._scrollerObj.refresh()},i.prototype._righthoverRange=function(e){var t,s,a;this._activeItem=$(e.currentTarget),this._activeItem.hasClass("e-hidedate")?e.stopPropagation():(this.popup.find(".range-hover").removeClass("range-hover"),this._activeItem.hasClass("in-range")&&this._activeItem.addClass("range-hover"),t=this._activeItem.attr("date"),s=new Date(t),this._trigger("hover",{element:e.currentTarget,events:e,value:new Date(this._activeItem.attr("date"))}),a=this,!ej.isNullOrUndefined(a._selectedStartDate)&&ej.isNullOrUndefined(a._selectedEndDate)&&this.popup.find(".current-month").each(function(e,t){var t=$(t),i=t.attr("date");ej.isNullOrUndefined(i)||""===i||((i=new Date(i))>a._startDate.date&&i<s?t.addClass("in-range"):t.removeClass("in-range"),i.getTime()===a._selectedStartDate.getTime()&&0!==t.next().length&&0!==t.next("td.current-month").length&&s>a._selectedStartDate&&new Date(new Date(a._selectedStartDate.getTime()).setDate(a._selectedStartDate.getDate()+1)).getTime()!==s.getTime()?t.addClass("showrange"):t.removeClass("showrange"))}))},i.prototype._customSelection=function(e){var t;this._customRangePicker.find(".e-active").removeClass("e-active"),"customPicker"!=$(e.currentTarget).attr("e-date-range")?(t=$(e.currentTarget).attr("e-data-value").split(","),this.model.startDate=new Date(t[0]),this.model.endDate=new Date(t[1]),this._rightDP.element.parents(".e-datewidget").removeClass("e-error"),this._customSet()):(this.model.startDate=null,this.model.endDate=null,this._clearRanges()),$(e.currentTarget).addClass("e-active")},i.prototype._setWaterMark=function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._isSupport||""!=this.element.val()?$(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},i.prototype._clearRanges=function(){this._updateRangesList(),this._setOption("value",""),this._rightDP.element.parents(".e-datewidget").removeClass("e-val-error"),this._selectedStartDate=null,this._selectedEndDate=null,this._startDate&&(this._startDate.date=null),this._endDate&&(this._endDate.date=null),this.popup.find("td").removeClass("e-start-date e-end-date in-range e-active e-state-hover today"),this.model.value=null,this.model.startDate=null,this.model.endDate=null,this._buttonDiv&&this._buttonDiv.find(".e-drp-apply").addClass("e-disable")},i.prototype.clearRanges=function(){this._clearRanges(),this._refreshMinMax(),this.element.val(""),this._trigger("_change",{value:this.model.value}),this._trigger("change",{value:this.model.value,startDate:this.model.startDate,endDate:this.model.endDate}),this._trigger("clear",{})},i.prototype._getLocalizedLabels=function(){return ej.getLocalizedConstants("ej.DateRangePicker",this.model.locale)},i.prototype._unWireEvents=function(){this._off($(".e-next",this.popup),"click",$.proxy(this._previousNextHandler,this)),this._off($(".e-prev",this.popup),"click",$.proxy(this._previousNextHandler,this)),this._off($(this._buttonDiv.find("div.e-drp-cancel")),"click",this._cancelButton),this._off($(this._buttonDiv.find("div.e-drp-reset")),"click",this.clearRanges),this._off(this.popup.find(".leftDate_wrapper.e-datepicker.e-js.e-input"),"blur",this._onPopupFocusOut),this._off(this.popup.find(".rightDate_wrapper.e-datepicker.e-js.e-input"),"blur",this._onPopupFocusOut),this.model.allowEdit&&(this._off(this.element,"blur",this._onMainFocusOut),this._off(this.element,"focus",this._onFocusIn),this._off(this.element,"keydown",this._onKeyDown))},i.prototype._onDocumentKeyDown=function(e){"13"==e.keyCode&&!this._buttonDiv.find(".e-drp-apply").hasClass("e-disable")&&this.wrapper.hasClass("e-focus")&&this._buttonDiv.find(".e-drp-apply").click()},i.prototype._wireEvents=function(){this._on($(".e-next",this.popup),"click",$.proxy(this._previousNextHandler,this)),this._on($(".e-prev",this.popup),"click",$.proxy(this._previousNextHandler,this)),this._on($(this._leftDP.sfCalendar.find("table .e-datepicker-months td")),"click",$.proxy(this._previousNextHandler,this));var e=this;this._on($(this._buttonDiv.find("div.e-drp-reset")),"click",this.clearRanges),this._on($(this._buttonDiv.find("div.e-drp-apply")),"click",function(){e._buttonDiv.find(".e-drp-apply").hasClass("e-disable")||(e._isPopScroll=!1,e._updateInput(),e._showhidePopup(),e._buttonDiv.find(".e-drp-apply").addClass("e-disable"),this._trigger("change",{value:this.model.value,startDate:this.model.startDate,endDate:this.model.endDate}),this._trigger("select",{startDate:this.model.startDate,endDate:this.model.endDate,value:this.model.value}))}),this._on($(window),"resize",this._resizePopup),$(document).on("mousedown",$.proxy(this._onDocumentClick,this)),$(document).on("keydown",$.proxy(this._onDocumentKeyDown,this)),this._on($(this._buttonDiv.find("div.e-drp-cancel")),"click",this._cancelButton),this._on(this.popup.find(".leftDate_wrapper.e-datepicker.e-js.e-input"),"blur",this._onPopupFocusOut),this._on(this.popup.find(".rightDate_wrapper.e-datepicker.e-js.e-input"),"blur",this._onPopupFocusOut),this._on(this.popup.find(".leftDate_wrapper.e-timepicker.e-js.e-input"),"blur",this._onPopupFocusOut),this._on(this.popup.find(".rightDate_wrapper.e-timepicker.e-js.e-input"),"blur",this._onPopupFocusOut),this.model.allowEdit&&(this._on(this.element,"blur",this._onMainFocusOut),this._on(this.element,"focus",this._onFocusIn),this._on(this.element,"keydown",this._onKeyDown)),this._on(this._leftDP.element,"keydown",this._onKeyDown),this._on(this._rightDP.element,"keydown",this._onKeyDown),this.popup.on("mouseenter touchstart",$.proxy(function(){this._isPopScroll=!0},this)),this.popup.on("mouseleave touchend",$.proxy(function(){this._isPopScroll=!1},this))},i.prototype._onFocusIn=function(e){this._isSupport&&(e.preventDefault(),this._isFocused=!0),this.wrapper.hasClass("e-error")&&(this._validState=!1,this.wrapper.removeClass("e-error")),this.model.showPopupButton||this.model.readOnly||this.popupShow(e),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this.wrapper.addClass("e-focus")},i.prototype._onKeyDown=function(e){13==e.keyCode&&($(e.currentTarget).hasClass("e-datepicker")?(this._validateValues($(e.currentTarget).val(),0<$(e.currentTarget).parents(".e-left-datepicker").length?"left":"right"),0<$(e.currentTarget).parents(".e-left-datepicker").length?this._leftDP.model.value=this.model.startDate:this._rightDP.model.value=this.model.endDate,this._onPopupFocusOut(e)):($(e.currentTarget).hasClass("leftTime")?this._leftTP:this._rightTP)._trigger("select")),e.stopImmediatePropagation()},i.prototype._cancelButton=function(){this._prevValue=null,this._isPopScroll=!1,this._clearRanges(),this._onMainFocusOut(),this._showhidePopup()},i.prototype._updateRanges=function(e){var e="left"==e?this._leftDP:this._rightDP,s=this;e.popup.find("td.current-month").each(function(e,t){var t=$(t),i=t.attr("date");ej.isNullOrUndefined(i)||""===i||(i=new Date(i),ej.isNullOrUndefined(s._startDate)||ej.isNullOrUndefined(s._startDate.date)||ej.isNullOrUndefined(s._endDate.date)||(i>s._startDate.date&&i<s._endDate.date?t.addClass("in-range"):t.removeClass("in-range")),ej.isNullOrUndefined(s._startDate)||ej.isNullOrUndefined(s._startDate.date)||i.toDateString()!=s._startDate.date.toDateString()||(t.addClass("e-start-date"),ej.isNullOrUndefined(s._endDate)||ej.isNullOrUndefined(s._endDate.date)||s._startDate.date.toDateString()==s._endDate.date.toDateString()||t.addClass("showrange"),t.removeClass("in-range")),ej.isNullOrUndefined(s._endDate))||ej.isNullOrUndefined(s._endDate.date)||ej.isNullOrUndefined(s._endDate)||i.toDateString()!=s._endDate.date.toDateString()||(t.addClass("e-end-date"),t.removeClass("in-range"))}),0<e.popup.find(".e-start-date").length&&(0<$(e.popup.find(".e-start-date")).next("td.in-range").length||$(e.popup.find(".e-start-date")).removeClass("showrange"))},i.prototype.getSelectedRange=function(){return{startDate:this.model.startDate,endDate:this.model.endDate}},i.prototype.enable=function(){this.element[0].disabled=!1,this.model.enabled=!0,this.wrapper.removeClass("e-disable"),this.element.removeClass("e-disable"),this.element.attr("aria-enabled","false"),this.element.attr("enabled","enabled"),this._isSupport||this._hiddenInput.attr("enabled","enabled"),this.dateRangeIcon&&this.dateRangeIcon.removeClass("e-disable").attr("aria-disabled","false"),this.popup.children("div").removeClass("e-disable").attr("aria-disabled","false"),this._setOption("enabled",!0)},i.prototype.disable=function(){this.element[0].disabled=!0,this.model.enabled=!1,this.wrapper.addClass("e-disable"),this.element.addClass("e-disable"),this.element.attr("aria-disabled","true"),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.dateRangeIcon&&this.dateRangeIcon.addClass("e-disable").attr("aria-disabled","true"),this.popup.children("div").addClass("e-disable").attr("aria-disabled","true"),this.popupHide(),this._setOption("enabled",!1)},i.prototype._onMainFocusOut=function(){var e,t,i,s=this.element.val();this.wrapper.removeClass("e-focus"),""==this.element.val()&&null==this._prevValue||(this._prevValue&&this._prevValue==this.element.val()?(this._validState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")).removeClass("e-focus"):(this._updateRangesList(),""==this.element.val()?(this.wrapper.removeClass("e-error"),this._clearRanges(),this._setWaterMark(),this._refreshMinMax(),this._trigger("change",{value:this.model.value,startDate:null,endDate:null}),this._trigger("_change",{value:this.model.value})):(this.wrapper.removeClass("e-error"),i=this.element.val().split(this.model.separator),t=ej.parseDate(i[0],this._dateTimeFormat,this.model.locale),i=ej.parseDate(i[1],this._dateTimeFormat,this.model.locale),this._resetValues(),this._validState=!0,this._validateValues(t,"left")&&this._validateValues(i,"right")||(this._clearRanges(),this._refreshMinMax(),e=!0),this._startEndValidation()||(this._clearRanges(),this._refreshMinMax(),e=!0),""!=s&&e?(this.element.val(s),this.wrapper.addClass("e-error"),this.model.value=null,this._validState=!1,this._trigger("_change",{value:this.element.val()}),this._trigger("change",{value:this.model.value,startDate:null,endDate:null})):(this._resetValues(),this._setValues(),this._refreshMinMax(),this.model.value=this._validState&&""!=s?s:null,this._popupOpen||this._mainValue(),this._prevValue=this.model.value,(this._validState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")).removeClass("e-focus"),this._trigger("change",{value:this.model.value,startDate:this.model.startDate,endDate:this.model.endDate})))))},i.prototype._onPopupFocusOut=function(e){ej.format(this._selectedStartDate,"M/d/yyyy")==$("#daterangeleftDate_wrapper").val()&&ej.format(this._selectedEndDate,"M/d/yyyy")==$("#daterangerightDate_wrapper").val()||this._updateRangesList(),0<$(e.currentTarget).parents(".e-left-datepicker").length?this._leftDP:this._rightDP,this._validateValues($(e.currentTarget).val(),0<$(e.currentTarget).parents(".e-left-datepicker").length?"left":"right"),0<$(e.currentTarget).parents(".e-left-datepicker").length?this._leftDP.model.value=this.model.startDate:this._rightDP.model.value=this.model.endDate;var t=this.model.startDate,i=this.model.endDate,s=!1;this._rightDP.element.parents(".e-datewidget").removeClass("e-val-error"),this._startEndValidation()||(0<$(e.currentTarget).parents(".e-left-datepicker").length?(this._clearRanges(),this.model.startDate=t,this._selectedStartDate=this.model.startDate):(this._rightDP.element.parents(".e-datewidget").addClass("e-val-error"),s=!(this.model.endDate=null))),null==t?this._clearRanges():(this._selectedStartDate=this.model.startDate,this._selectedEndDate=this.model.endDate,this._resetValues(),this._setValues(),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),this._refreshMinMax(),this._popupOpen||this._mainValue(),s&&this._rightDP.element.val(i.toLocaleDateString()),this._setWaterMark())},i.prototype._resetValues=function(){this._leftDP.option("maxDate",null),this._rightDP.option("minDate",null),this._leftDP.option("value",this._leftDP.model.value),this._rightDP.option("value",this._rightDP.model.value)},i.prototype._refreshMinMax=function(){var e=this._getNextMonth(this._leftDP._calendarDate),t=(e.toDateString()>this._rightDP._calendarDate.toDateString()&&(t=this._rightDP.model.value,this._rightDP._calendarDate=e,this._rightDP._dateValue=e,this._rightDP.option("value",e)),this._rightDP.option("minDate",e),this._rightDP.option("value",t),this._rightDP._calendarDate),e=t.getFullYear(),t=t.getMonth();this._leftDP.option("maxDate",new Date(e,t,0))},i.prototype._refreshEvents=function(){this._off(this._rightDP.sfCalendar.find("table .e-datepicker-days td.e-state-default"),"click",this._dateEleClicked),this._off(this._leftDP.sfCalendar.find("table .e-datepicker-days td.e-state-default"),"click",this._dateEleClicked),this._off(this._rightDP.sfCalendar.find("table .e-datepicker-days td.e-state-default"),"mouseover",this._righthoverRange),this._off(this._leftDP.sfCalendar.find("table .e-datepicker-days td.e-state-default"),"mouseover",this._righthoverRange),this._on(this._leftDP.sfCalendar.find("table .e-datepicker-days td.e-state-default"),"mouseover",this._righthoverRange),this._on(this._leftDP.sfCalendar.find("table .e-datepicker-days td.e-state-default"),"click",this._dateEleClicked),this._on(this._rightDP.sfCalendar.find("table .e-datepicker-days td.e-state-default"),"mouseover",this._righthoverRange),this._on(this._rightDP.sfCalendar.find("table .e-datepicker-days td.e-state-default"),"click",this._dateEleClicked),this._on($(this._leftDP.sfCalendar.find("table .e-datepicker-months td")),"click",$.proxy(this._previousNextHandler,this))},i.prototype._previousNextHandler=function(e){var t,i,s,a=$(e.currentTarget).closest(".e-calendar").parent().hasClass("e-left-datepicker")?"left":"right";"_month_Loaded"==e.type?"left"==a?(i=$(this._rightDP.popup.find("td.current-month")[0]).attr("date"),s=this._leftDP._dateValue.toDateString()):"right"==a&&(s=$(this._leftDP.popup.find("td.current-month")[0]).attr("date"),i=this._rightDP._dateValue.toDateString()):(i=$(this._rightDP.popup.find("td.current-month")[0]).attr("date"),s=$(this._leftDP.popup.find("td.current-month")[0]).attr("date")),e=new Date(s),s=new Date(i),e.setHours(0,0,0,0),s.setHours(0,0,0,0),("right"==a?("e-dp-viewdays"==(t=$("table",this._leftDP.sfCalendar).get(0).className)&&(this._leftDP._stopRefresh=!0),this._rightDP._stopRefresh=!1,a=(i=s).getFullYear(),s=i.getMonth(),this._leftDP.option("maxDate",new Date(a,s,0)),"e-dp-viewmonths"==t&&this._leftDP._startLevel("year"),this._leftDP):(t=$("table",this._rightDP.sfCalendar).get(0).className,"e-dp-viewdays"==$("table",this._rightDP.sfCalendar).get(0).className&&(this._rightDP._stopRefresh=!0),this._leftDP._stopRefresh=!1,this._rightDP.option("minDate",this._getNextMonth(e)),"e-dp-viewmonths"==t&&this._rightDP._startLevel("year"),this._rightDP))._checkDateArrows(),this._rightDP.element.parents(".e-datewidget").removeClass("e-error")},i);function i(e){return t.call(this),this._rootCSS="e-daterangepicker",this._setFirst=!1,this.PluginName="ejDateRangePicker",this.id="myDateRange",this._addToPersist=["value"],this.type="editor",this.angular={require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},this.model=null,this.validTags=["input"],this.defaults={height:"",width:"",value:"",cssClass:"",enabled:!0,startDate:null,endDate:null,enableTimePicker:!1,ranges:null,locale:"en-US",separator:"-",watermarkText:"Select Range",dateFormat:"",timeFormat:"",showPopupButton:!0,showRoundedCorner:!1,allowEdit:!0,enablePersistence:!1},this._isIE8="msie"==ej.browserInfo().name&&"8.0"==ej.browserInfo().version,this._prevValue=null,this._validState=null,i.prototype.observables=["value"],e&&(e=e.jquery?e:$("#"+e)).length?$(e).ejDateRangePicker().data(this.PluginName):void 0}window.ej.widget("ejDateRangePicker","ej.DateRangePicker",new e),window.ejDateRangePicker=null,ej.DateRangePicker.Locale={},ej.DateRangePicker.Locale=ej.DateRangePicker.Locale||{},ej.DateRangePicker.Locale.default=ej.DateRangePicker.Locale["en-US"]={ButtonText:{apply:"Apply",cancel:"Cancel",reset:"Reset"},watermarkText:"Select Range",customPicker:"Custom Picker"}});var targetColumn,actualColumn,valueAdded,conditionMeasure,listItems,listDimensionItems,listDimensionValues,selectedRangeValues,dimensionColumns,measureColumns,buttonValue,selectJoinOption=window.Server.App.LocalizationContent.SelectJoin.replace("/ '/g","\\'"),validation=0,conditionAdded=0,display=1,dropdown=1,addButtonClicked=0,addConditionClicked=0,summaryType={0:"None",1:"Summation",2:"Average",3:"Maximum",4:"Minumum",5:"Standard Deviation",6:"Variance",7:"Count",8:"Distinct Count",9:"Weighted Average",10:"AGG"},title="",customExpressionWaitingPopupTemplateId=($("#custom-expression-editor-container").ejDialog({allowDraggable:!1,enableResize:!1,enableModal:!0,showHeader:!1,showOnInit:!1,close:"onExpressionEditorDialogClose",open:"onExpressionEditorDialogOpen",width:"876px"}),createLoader("custom-expression-editor-container_wrapper"));function incrementVal(e){var t=e.attr("value");e.attr("value",parseInt(t)+1)}function refreshConditionCategory(){$(".condition-category-changes").find("select").html(""),$(".condition-category-changes").find("select").append('<option value="5" data-title="'+window.Server.App.LocalizationContent.ValueChange+'" name="ValueChanges" selected="selected">'+window.Server.App.LocalizationContent.ValueChangeOption+'</option><option value="1" data-title="'+window.Server.App.LocalizationContent.Increases+'" name="Increases">'+window.Server.App.LocalizationContent.IncreasesOption+'</option><option value="2" data-title="'+window.Server.App.LocalizationContent.ContinousIncreases+'" name="ContinousIncreases">'+window.Server.App.LocalizationContent.ContinousIncreasesOption+'</option><option value="3" data-title="'+window.Server.App.LocalizationContent.Decreases+'" name="Decreases">'+window.Server.App.LocalizationContent.DecreasesOption+'</option><option value="4" data-title="'+window.Server.App.LocalizationContent.ContinousDecreases+'" name="ContinousDecreases">'+window.Server.App.LocalizationContent.ContinousDecreasesOption+"</option>").selectpicker("refresh"),$("#selected-option").selectpicker("refresh");for(var e=0;e<$(".condition-category-changes select option").length;e++){var t=$(".condition-category-changes select option").eq(e).attr("data-title");$(".condition-category-changes .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr({title:t,"data-bs-toggle":"tooltip","data-container":"body","data-placement":"right"})}$(".condition-category-changes .btn-group .dropdown-menu .selectpicker li a").tooltip()}function refreshTarget(e){$(e).find("select").html(""),$(e).find("select").append('<option value="" name="" class="hide-option" disabled="disabled" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'</option><option value="0">Actual</option><option value="1">Custom</option>').selectpicker("refresh"),$(e).find("select").selectpicker("refresh")}function renderDataCondition(f,g,_){for(var w=!1,e=g.length,b=$("#selected_dashboard").find("option:selected").val(),_=(""!=$("#selected_childdashboard").val()&&(b=$("#selected_childdashboard").find("option:selected").val()),$(".items-dropdown").find("option:selected").val()),t=($("#add-condition").css("display","inline"),$("#add-dimension-condition").css("display","inline"),0),i=0;t<e-1;)0==t?addMeasure(g[0]):addMeasureAgain(g[t]),t++;for(var s=$(".condition-div-statement"),a=0;a<s.length;a++)s.eq(a).find(".filterareatext").html("Filter : "+(a+1)),s.eq(a).find(".filterareainput").val(a+1);if(""!=g[e-1][1]){for(;i<g[e-1][1].length;)(0==i?addDimension:addDimensionAgain)(),i++;$("#add-dimension-condition").remove()}1==f||2==f||3==f||4==f?($("#measure-div").find(".condition-type,.target-column,.column-condition").css("visibility","hidden"),$("#measure-div").find(".add-comparison").hide(),$("#measure-div").find(".add-comparison-target").css("display","none")):$("#measure-div").find(".condition-type,.target-column,.column-condition,#value").css("display","inline"),$("#measure-div").find(".dimension-statement .dimension-each").find(".condition-type").css("visibility","visible"),$("#measure-div .condition-div-statement .measure-statement .column-condition select").selectpicker("refresh"),$("#measure-div .condition-div-statement .measure-statement .condition-type select").selectpicker("refresh"),$.ajax({type:"POST",data:{itemId:b,name:_},url:getItemNamesUrl,async:!1,success:function(e){for(var t=e,i=0;i<t.data.length;i++){var s=getSummaryType(t.data[i].SummaryType);1==t.data[i].IsWidgetBounded&&(window.listItems+='<option value="'+t.data[i].ColumnName+'">'+s+" ("+t.data[i].DisplayName+")</option>"),2==t.data[i].CustomColumnType?(window.listDimensionItems+='<option value="'+t.data[i].ColumnName+'">'+t.data[i].DisplayName+"</option>",addTitleForColumns(),w=!0):($(".schedule-dialog #data-changes-container #add-dimension-condition").css("display","none"),$(".schedule-dialog #data-changes-container #add-dimensions").css("display","none"))}$.ajax({type:"POST",data:{itemId:b,itemName:_,userId:$("#userid").val()},url:getCustomExpressionListUrl,success:function(e){if(parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide"),null!=e)for(var i=0;i<e.Result.length;i++)window.listItems+='<option value="'+e.Result[i].Name+'">'+e.Result[i].Name+"</option>",window.listDimensionItems+='<option value="'+e.Result[i].Name+'">'+e.Result[i].Name+"</option>";$("#widget-items option").remove(),$("#widget-items").append(window.listItems).selectpicker("refresh"),$(".measure-column select,.measure-column-col select").each(function(){""==$(this).html()&&($(this).html(""),$(this).append('<option value="" disabled class="hide-option"selected="selected">Select Column</option>'+window.listItems).selectpicker("refresh"),refreshColumns($(this).closest(".condition-div-statement .measure-statement").find("#selected-col-option")),addTitleForColumns())}),""==window.listDimensionItems?($("#dimension-div .join-div").html(""),$("#dimension-div .dimension-statement").html(""),$(".schedule-dialog #data-changes-container #add-dimension-condition").css("display","none"),$(".schedule-dialog #data-changes-container #add-dimensions").css("display","none")):""==$(".dimension-column select,.dimension-column-col select").html()&&($(".dimension-column select,.dimension-column-col select").html(""),$(".dimension-column select,.dimension-column-col select").append('<option value="" disabled class="hide-option"selected="selected">Select Column</option>'+window.listDimensionItems).selectpicker("refresh"),$("#add-dimension-condition").css("display","inline"),refreshColumns(r=$(this).closest(".condition-div-statement .dimension-statement").find("#selected-col-option")),addTitleForColumns());for(var t,a,s,m,n,p=0;p<g.length-1;p++)$("#measure-div .condition-div-statement:eq("+p+") .measure-statement").find(".column select").find("option").each(function(){var t=g[p][0][0][0][1];g[p][0][0][0][3]&&(t=g[p][0][0][0][4]),""==$(this).val()?$(this).removeAttr("selected"):$(this).val()==t&&($(this).attr("selected","selected"),$(this).parents(".column").find(".bootstrap-select li").each(function(){var e;$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).find(".text").text().trim()==t.trim()&&($(this).addClass("selected active"),e=$(this).find(".text").text(),$(this).parents(".bootstrap-select").find(".filter-option").html(e))})),$("#measure-div .condition-div-statement .column select").selectpicker("refresh")}),$("#measure-div .condition-div-statement:eq("+p+") #selected-joins").find("select").find("option").each(function(){var t="5"!=f||2==g[p][0].length?g[p][0][1]:g[p][0][3];""==$(this).val()?$(this).removeAttr("selected"):$(this).val()==t.toString()&&($(this).attr("selected","selected"),$(this).parents("#selected-joins").find(".bootstrap-select li").each(function(){var e;$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).attr("data-original-index")==t.toString()&&($(this).addClass("selected active"),e=$(this).find(".text").text(),$(this).parents(".bootstrap-select").find(".filter-option").html(e))})),$("#measure-div .condition-div-statement #selected-joins select").selectpicker("refresh")}),"5"==f&&(2==g[p][0].length?($("#measure-div .condition-div-statement:eq("+p+") .measure-statement").find(".add-comparison").show(),$("#measure-div .condition-div-statement:eq("+p+") .measure-statement").find(".add-comparison-target").css("display","none")):10==g[p][0][2][0].length?($("#measure-div .condition-div-statement:eq("+p+") .measure-statement").find(".condition-type select").find("option").each(function(){""==$(this).val()&&$(this).removeAttr("selected"),"0"==$(this).val()&&($(this).attr("selected","selected"),$(this).parents(".add-comparison-target").prev(".add-comparison").hide(),$(this).parents(".add-comparison-target").css("display","block"),$(this).parents(".target-column").find(".bootstrap-select li").each(function(){var e;$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).find(".text").text().trim()==h.trim()&&($(this).addClass("selected active"),e=$(this).find(".text").text(),$(this).parents(".bootstrap-select").find(".filter-option").html(e),$(this).parents(".condition-type").siblings(".target-column").css("visibility","visible"))})),$("#measure-div .condition-div-statement .condition-type select").selectpicker("refresh")}),$("#measure-div .condition-div-statement:eq("+p+") .measure-statement").find(".target-column select").find("option").each(function(){var t=g[p][0][2][0][6];g[p][0][2][0][8]&&(t=g[p][0][2][0][9]),""==$(this).val()?$(this).removeAttr("selected"):$(this).val()==t.trim()&&($(this).attr("selected","selected"),$(this).parents(".add-comparison-target").css("display","block"),$(this).parents(".target-column").find(".bootstrap-select li").each(function(){var e;$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).find(".text").text()==t.trim()&&($(this).addClass("selected active"),e=$(this).find(".text").text(),$(this).parents(".bootstrap-select").find(".filter-option").html(e))})),$("#measure-div .condition-div-statement .target-column select").selectpicker("refresh")}),$("#measure-div .condition-div-statement:eq("+p+") .measure-statement").find(".target-column").css("visibility","visible"),$("#measure-div .condition-div-statement:eq("+p+")  .measure-statement").find(".add-value").css("display","none")):($("#measure-div .condition-div-statement:eq("+p+") .measure-statement").find(".condition-type select").find("option").each(function(){""==$(this).val()?$(this).removeAttr("selected"):"1"==$(this).val()&&($(this).attr("selected","selected"),$(this).parents(".add-comparison-target").prev(".add-comparison").hide(),$(this).parents(".add-comparison-target").css("display","block"),$(this).parents(".target-column").find(".bootstrap-select li").each(function(){var e;$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).find(".text").text().trim()==h.trim()&&($(this).addClass("selected active"),e=$(this).find(".text").text(),$(this).parents(".bootstrap-select").find(".filter-option").html(e))}))}),$("#measure-div").find(".condition-div-statement:eq("+p+") .measure-statement").find(".add-value input").val(g[p][0][2][0][5]),$("#measure-div .condition-div-statement:eq("+p+") .measure-statement").find(".add-value").css("display","inline"),$("#measure-div .condition-div-statement:eq("+p+") .measure-statement").find(".target-column").css("display","none"),$("#measure-div .condition-div-statement .condition-type select").selectpicker("refresh")),$("#measure-div .condition-div-statement:eq("+p+") .measure-statement .column-condition").find("select").find("option").each(function(){var e=g[p][0][1];""==$(this).val()||$(this).val()!=e.toString()?$(this).removeAttr("selected"):$(this).val()==e.toString()&&($(this).attr("selected","selected"),t=$(this).attr("class"),$(this).parents(".column-condition").find(".bootstrap-select .btn-default .filter-option").attr("id","option-selected"),$(this).parents(".column-condition").find(".bootstrap-select .btn-default #option-selected").removeAttr("class"),$(this).parents(".column-condition").find(".bootstrap-select .btn-default #option-selected").html(""),$(this).parents(".column-condition").find(".bootstrap-select .btn-default #option-selected").addClass(t).addClass("filter-option pull-left"),$(this).parents(".column-condition").find(".bootstrap-select .btn-default .filter-option").removeAttr("id"),$(this).parents(".column-condition").find(".bootstrap-select li").each(function(){$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).attr("data-original-index")==e.toString()&&$(this).addClass("selected active")})),$("#measure-div .condition-div-statement .measure-statement .column-condition select").selectpicker("refresh")})),1!=w||null!=g[p][1]&&""!=g[p][1]?(i=0,$("#measure-div .condition-div-statement:eq("+p+") .dimension-statement").find(".dimension-each").each(function(){var e=g[p][1],t=e[i][2];"true"==e[i][8].toLowerCase()&&(t=e[i][9]);e[i][5].split(",");$(this).find(".actual-column select").find("option").each(function(){""==$(this).val()?$(this).removeAttr("selected"):$(this).val()==t.trim()&&($(this).attr("selected","selected"),$(this).parents(".actual-column").find(".bootstrap-select li").each(function(){var e;$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).find(".text").text().trim()==t.trim()&&($(this).addClass("selected active"),e=$(this).find(".text").text(),$(this).parents(".bootstrap-select").find(".filter-option").html(e))}))}),i++,$("#measure-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh")}),a=0,$("#measure-div .condition-div-statement:eq("+p+") .dimension-statement").find(".dimension-each").each(function(){var e=g[p][1],t=e[a][1],i=e[a][4],s=e[a][5].split(","),e=e[a][7];"date"==t.toLowerCase()?($(this).find(".column-dimension select").html(""),$(this).find(".column-dimension select").append('<option value="" disabled class="hide-option" selected="selected">Select Condition</option><option value="0">Include</option><option value="1">Exclude</option><option value="3">Between</option>').selectpicker("refresh"),$(this).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.DateFormatvalidator+dateFormat+window.Server.App.LocalizationContent.Format),"3"==i&&($(this).find(".add-value-dimension").css("display","none"),$(this).find(".condition-type,.add-value-dimension").css("display","none"),$(this).find(".target-column-value").css("display","none"),$(this).find(".condition-type").before('<div class="col-sm-3 col-xs-3 no-padding pull-left from-date-div"><input type="text" class="form-control from-date validation-input"/><span class="date-error">'+window.Server.App.LocalizationContent.DateRangeValidator+"</span></div>"),t="datepicker"+$(this).parents(".condition-div-statement").index()+"id"+$(this).index(),$(this).find(".from-date").attr("id",t),$("#"+t).ejDateRangePicker({dateFormat:dateFormat,startDate:new Date(s[0]),endDate:new Date(s[1])}))):"True"==e?($(this).find(".column-dimension select").html(""),$(this).find(".column-dimension select").append('<option value="" disabled class="hide-option" selected="selected">Select Condition</option><option value="4">Include</option><option value="5">Exclude</option>').selectpicker("refresh"),$(this).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.CustomValueValidator)):$(this).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.CustomValueStringValidator),$(this).find(".column-dimension select").find("option").each(function(){""==$(this).val()?$(this).removeAttr("selected"):$(this).val()==i&&($(this).attr("selected","selected"),$(this).parents(".actual-column").find(".bootstrap-select li").each(function(){var e;$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).attr("data-original-index")==i&&($(this).addClass("selected active"),e=$(this).find(".text").text(),$(this).parents(".bootstrap-select").find(".filter-option").html(e))}))}),a++,$("#measure-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh")}),s=0,$("#measure-div .condition-div-statement:eq("+p+") .dimension-statement").find(".dimension-each").each(function(){var e=g[p][1],t=(e[s][1],e[s][6]);$(this).find(".join-div select").find("option").each(function(){""==$(this).val()?$(this).removeAttr("selected"):$(this).val()==t.toString()&&($(this).attr("selected","selected"),$(this).parents(".join-div").find(".bootstrap-select li").each(function(){var e;$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).attr("data-original-index")==t.toString()&&($(this).addClass("selected active"),e=$(this).find(".text").text(),$(this).parents(".bootstrap-select").find(".filter-option").html(e))}))}),s++,$("#measure-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh")}),m=0,$("#measure-div .condition-div-statement:eq("+p+") .dimension-statement").find(".dimension-each").each(function(){var e=g[p][1],t=e[m][2].trim(),a=e[m][1],n=e[m][4],e=e[m][5],o=[],o=e.split(","),l=0,d="",r=$(this).find(".condition-type select"),h=$(this).find(".dimension-column-value-col select,.target-column-value select"),c=$(this).find(".add-value-dimension");$.ajax({type:"POST",async:!1,data:{itemId:b,columnName:t,widgetName:_},url:getColumnValuesUrl,success:function(e){for(var t=e,i=0;i<t.data.length;i++){for(var s=0;s<o.length;s++)t.data[i].trim().toLowerCase()==o[s].trim().toLowerCase()&&l++;d+='<option value="'+t.data[i]+'">'+t.data[i]+"</option>"}$(h).append(d),"date"==a.toLowerCase()&&"3"==n?($(r).parent("div").css("display","none"),$(c).css("display","none"),$(h).parent("div").css("display","none")):0<l?($(r).find("option").each(function(){""==$(this).val()?$(this).removeAttr("selected"):"0"==$(this).val()&&($(this).attr("selected","selected"),$(this).parents(".condition-type").find(".bootstrap-select li").each(function(){var e;$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),"0"==$(this).attr("data-original-index")&&($(this).addClass("selected active"),e=$(this).find(".text").text(),$(this).parents(".bootstrap-select").find(".filter-option").html(e)),$(h).selectpicker("refresh")}))}),$(r).parent("div").addClass("display"),$(h).parent("div").css("display","inline"),$(h).parent("div").addClass("margin-right"),$(h).html(""),$(h).append(d).selectpicker("refresh"),refreshColumns($("#dimension-div .dimension-statement")),addTitleForColumnValues()):($(r).find("option").each(function(){""==$(this).val()?$(this).removeAttr("selected"):"1"==$(this).val()&&($(this).attr("selected","selected"),$(this).parents(".condition-type").find(".bootstrap-select li").each(function(){var e;$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),"1"==$(this).attr("data-original-index")&&($(this).addClass("selected active"),e=$(this).find(".text").text(),$(this).parents(".bootstrap-select").find(".filter-option").html(e))}))}),$(r).parent("div").addClass("display"),$(c).css("display","inline"),$(c).css("margin-right","10px"),$(c).find("input").val(o))}}),m++,$("#popup-container_wrapper").ejWaitingPopup("hide"),$("#editpopup-container_wrapper").ejWaitingPopup("hide"),$("#measure-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh")}),$("#measure-div .condition-div-statement:eq("+p+")").find(".dimension-statement .dimension-each").each(function(){0<$(this).next("div").length&&$(this).children(".add-dimension-after").html("")}),n=0,$("#measure-div .condition-div-statement:eq("+p+") .dimension-statement").find(".dimension-each").each(function(){for(var e=g[p][1][n][5],t=[],t=e.split(","),i=0;i<t.length;i++)$(this).find(".target-column-value select").find("option").each(function(){""==$(this).val()?$(this).removeAttr("selected"):$(this).text().trim().toLowerCase()==t[i].trim().toLowerCase()&&$(this).attr("selected","selected")});n++,$("#measure-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh")})):$("#measure-div .condition-div-statement:eq("+p+") .measure-statement").find("#add-dimensions").css("display","inline");var o=g[g.length-1][1];if(1!=w||""!=o&&null!=o){for(p=0;p<o.length;p++){var h=o[p][2],c=o[p][1],u=o[p][5],v=o[p][4],l=o[p][6],d=o[p][7],r=($("#dimension-div .dimension-statement .dimension-each:eq("+p+")").find(".actual-column select").find("option").each(function(){""==$(this).val()?$(this).removeAttr("selected"):$(this).val()==h.trim()&&($(this).attr("selected","selected"),$(this).parents(".actual-column").find(".bootstrap-select li").each(function(){var e;$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).find(".text").text().trim()==h.trim()&&($(this).addClass("selected active"),e=$(this).find(".text").text(),$(this).parents(".bootstrap-select").find(".filter-option").html(e))})),$("#measure-div .condition-div-statement .dimension-statement .dimension-each .actual-column select").selectpicker("refresh")}),$("#dimension-div .dimension-statement").find(".dimension-each:eq("+p+")").each(function(){var e,t=u.split(",");"date"==c.toLowerCase()?($(this).find(".column-dimension select").html(""),$(this).find(".column-dimension select").append('<option value="" disabled class="hide-option" selected="selected">Select Condition</option><option value="0">Include</option><option value="1">Exclude</option><option value="3">Between</option>').selectpicker("refresh"),$(this).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.DateFormatvalidator+dateFormat+window.Server.App.LocalizationContent.Format),"3"==v&&($(this).find(".add-value-dimension").css("display","none"),$(this).find(".condition-type,.add-value-dimension").css("display","none"),$(this).find(".target-column-value").css("display","none"),$(this).find(".condition-type").before('<div class="col-sm-3 col-xs-3 no-padding pull-left from-date-div"><input type="text" class="form-control from-date validation-input"/><span class="date-error">'+window.Server.App.LocalizationContent.DateRangeValidator+"</span></div>"),e="date"+$(this).parents(".condition-div-statement").index()+"id"+$(this).index(),$(this).find(".from-date").attr("id",e),$("#"+e).ejDateRangePicker({dateFormat:dateFormat,startDate:new Date(t[0]),endDate:new Date(t[1])}))):"True"==d?($(this).find(".column-dimension select").html(""),$(this).find(".column-dimension select").append('<option value="" disabled class="hide-option" selected="selected">Select Condition</option><option value="4">Include</option><option value="5">Exclude</option>').selectpicker("refresh"),$(this).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.CustomValueValidator)):$(this).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.CustomValueStringValidator),$(this).find(".column-dimension select").find("option").each(function(){""==$(this).val()?$(this).removeAttr("selected"):$(this).val()==v&&$(this).attr("selected","selected")}),$(".selectpicker").selectpicker("refresh")}),$("#dimension-div .condition-div-statement").find(".dimension-statement .dimension-each").each(function(){0<$(this).next("div").length&&$(this).children(".add-dimension-after").html("")}),$("#dimension-div .dimension-statement").find(".dimension-each:eq("+p+")").each(function(){$(this).find(".join-div select").find("option").each(function(){""==$(this).val()?$(this).removeAttr("selected"):$(this).val()==l.toString()&&($(this).attr("selected","selected"),$(this).parents(".join-div").find(".bootstrap-select li").each(function(){var e;$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).attr("data-original-index")==l.toString()&&($(this).addClass("selected active"),e=$(this).find(".text").text(),$(this).parents(".bootstrap-select").find(".filter-option").html(e))}))}),s++}),$("#dimension-div .condition-div-statement .dimension-statement").find(".dimension-each:eq("+p+")").each(function(){var a=[],a=u.split(","),n=0,o="",l=$(this).find(".condition-type select"),d=$(this).find(".dimension-column-value-col select,.target-column-value select"),r=$(this).find(".add-value-dimension");$.ajax({type:"POST",async:!1,data:{itemId:b,columnName:h,widgetName:_},url:getColumnValuesUrl,success:function(e){for(var t=e,i=0;i<t.data.length;i++){for(var s=0;s<a.length;s++)t.data[i].trim().toLowerCase()==a[s].trim().toLowerCase()&&n++;o+='<option value="'+t.data[i]+'">'+t.data[i]+"</option>"}$(d).append(o),"date"==c.toLowerCase()&&"3"==v?($(l).parent("div").css("display","none"),$(r).css("display","none"),$(d).parent("div").css("display","none")):0<n?($(l).find("option").each(function(){""==$(this).val()?$(this).removeAttr("selected"):"0"==$(this).val()&&$(this).attr("selected","selected"),$(".selectpicker").selectpicker("refresh")}),$(l).parent("div").addClass("display"),$(d).parent("div").css("display","inline"),$(d).parent("div").addClass("margin-right"),$(d).html(""),$(d).append(o).selectpicker("refresh"),refreshColumns($("#dimension-div .dimension-statement")),addTitleForColumnValues()):($(l).find("option").each(function(){""==$(this).val()?$(this).removeAttr("selected"):"1"==$(this).val()&&$(this).attr("selected","selected"),$(".selectpicker").selectpicker("refresh")}),$(l).parent("div").addClass("display"),$(r).css("display","inline"),$(r).css("margin-right","10px"),$(r).find("input").val(a))}}),$("#popup-container_wrapper").ejWaitingPopup("hide"),$("#editpopup-container_wrapper").ejWaitingPopup("hide"),$("#dimension-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh")}),$("#dimension-div .dimension-statement").find(".dimension-each:eq("+p+")").each(function(){for(var t=[],t=u.split(","),i=0;i<t.length;i++)$(this).find(".target-column-value select").find("option").each(function(){""==$(this).val()?$(this).removeAttr("selected"):$(this).text().trim()==t[i].trim()&&($(this).attr("selected","selected"),$(this).parents(".target-column-value").find(".bootstrap-select li").each(function(){var e;$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).find(".text").text().trim()==t[i]&&($(this).addClass("selected active"),e=$(this).find(".text").text(),$(this).parents(".bootstrap-select").find(".filter-option").html(e))}))})}),$("#dimension-div .dimension-statement select"));refreshColumns(r)}$("#dimension-div .condition-div-statement").find(".dimension-statement .dimension-each:eq(0)").each(function(){0<$(this).siblings(".dimension-each").length&&$(this).children(".add-dimension-after").html("")})}else $("#add-dimension-condition").css("display","inline");parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide")}})}})}function addMeasure(e){$("#measure-div").append('<span id="form-message" class="error-message-widget validate-error no-padding col-sm-8 col-xs-8"></span><label class="custom-expression-columns" style="top: 5px;">'+window.Server.App.LocalizationContent.CutomExpression+'</label><div class="col-sm-12 col-12 condition-div-statement no-padding first-condition"><span class="filterarea"><span class="filterareatext"></span><input type="hidden" class="filterareainput"></span><a href="javascript:void(0);" title="" class="remove-measure-dimension pull-right su su-close"></a><div class="measure-statement col-sm-12 col-12 no-padding"><div class="col-sm-3 col-xs-3 no-padding measure-column-col column" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker select-condition col-sm-2 col-xs-2 no-padding no-margin" data-size="5"></select></div><input class="add-comparison btn"  type="button" value='+window.Server.App.LocalizationContent.AddComparisionTarget+'><div class="add-comparison-target col-sm-6 col-xs-6" ><span class="remove-comparison su su-close" data-bs-toggle="tooltip" data-container="body" data-placement="right" title="'+window.Server.App.LocalizationContent.RemoveComparisionTarget+'"></span><div class="col-sm-2 col-xs-1 no-padding column-condition no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="col-sm-1 col-xs-1 no-padding no-margin" data-size="5"><option value="0" selected="selected" class="su su-equals">Equals</option><option value="1" class="su su-not-equals">Not Equals</option><option value="2" class="su su-lesser-than">Less Than</option><option value="3" class="su su-greater-than">Greater Than</option><option value="4" class="su su-lesser-than-or-equal-to">Less Than Or Equals</option><option value="5" class="su su-greater-than-or-equal-to">Greater Than Or Equals</option></select></div><div class="col-sm-4 col-xs-3 no-padding condition-type no-margin" id="condition-type"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectTarget+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value" data-size="5"><option value="" disabled class="hide-option"selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'</option><option value="0">Condition</option><option value="1">Custom</option></select></div><div class="col-sm-5 col-4 no-padding  measure-column-col  target-column no-margin" id="condition-second-col"><select id="selected-col2-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker select-condition col-sm-2 col-xs-2 no-padding no-margin" data-size="5"></select></div><div class="col-sm-4 col-4 no-padding no-margin add-value"><input type= "text"  id="value" class=" form-control validation-input"><span class="add-custom">'+window.Server.App.LocalizationContent.CustomValueNumericValidator+'</span></div></div><a href="javascript:void(0);" class="col-md-12  col-sm-12 col-lg-12 col-12 add-where-local" id="add-dimensions"><span class="su su-add"></span><span class="margin-alignment">Add Where condition</span></a></div><div class=" col-sm-12 col-12 no-padding dimension-statement no-margin"></div></div>');var t=$("#measure-div").find(".condition-div-statement:last "),i=e[1].length,s=0;if(null!=i){for(;s<i;)(0==s?addDimensionWithMeasure:addDimensionWithMeasureAgain)(t),s++;0<s&&$("#measure-div .condition-div-statement").last().find("#add-dimensions").css("display","none")}}function addMeasureAgain(e){$("#measure-div").append('<div class="col-sm-12 col-12 condition-div-statement no-padding margin-condition-div-statement"><span class="filterarea"><span class="filterareatext"></span><input type="hidden" class="filterareainput"></span><a href="javascript:void(0);" title="" class="remove-measure-dimension pull-right su su-close"></a><div class="col-sm-2 col-xs-2 no-padding selected-joins" id="selected-joins"><select id="selected-join-option" data-live-search="true" title='+selectJoinOption+' class="selectpicker col-sm-2 col-xs-2 join-option no-padding" data-size="5"><option value="0" class="and" selected="selected">AND</option><option value="1" class="or">OR</option><option value="2" class="nand">AND NOT</option><option value="3" class="nor">OR NOT</option></select></div><div class="measure-statement col-sm-12 col-12 no-padding"><div class="col-sm-3 col-xs-3 no-padding measure-column-col column" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker select-condition col-sm-2 col-xs-2 no-padding no-margin" data-size="5"></select></div><input class="add-comparison btn"  type="button" value="'+window.Server.App.LocalizationContent.AddComparisionTarget+'" tabindex="4" class="secondary-button"><div class="add-comparison-target col-sm-6 col-xs-6" ><span class="remove-comparison su su-close" data-bs-toggle="tooltip" data-container="body" data-placement="right" title="'+window.Server.App.LocalizationContent.RemoveComparisionTarget+'"></span><div class="col-sm-2 col-xs-1 no-padding  column-condition no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="col-sm-4 col-4 no-padding no-margin" data-size="5"><option value="0" selected="selected" class="su su-equals">Equals</option><option value="1" class="su su-not-equals">Not Equals</option><option value="2" class="su su-lesser-than">Less Than</option><option value="3" class="su su-greater-than">Greater Than</option><option value="4" class="su su-lesser-than-or-equal-to">Less Than Or Equals</option><option value="5" class="su su-greater-than-or-equal-to">Greater Than Or Equals</option></select></div><div class="col-sm-4 col-xs-3 no-padding condition-type no-margin" id="condition-type"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectTarget+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value" data-size="5"><option value="" disabled class="hide-option"selected="selected" >'+window.Server.App.LocalizationContent.SelectTarget+'</option><option value="0">Condition</option><option value="1">Custom</option></select></div><div class="col-sm-5 col-4 no-padding  measure-column-col  target-column no-margin" id="condition-second-col"><select id="selected-col2-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker select-condition col-sm-2 col-xs-2 no-padding no-margin" data-size="5"></select></div><div class="col-sm-4 col-4 no-padding no-margin add-value"><input type= "text" id="value" class="form-control validation-input"><span class="add-custom">'+window.Server.App.LocalizationContent.CustomValueNumericValidator+'</span></div></div><a href="javascript:void(0);" class="col-md-12  col-sm-12 col-lg-12 col-12 add-where-local" id="add-dimensions"><span class="su su-add"></span><span class="margin-alignment">Add Where condition</span></a></div><div class=" col-sm-12 col-12 no-padding dimension-statement  no-margin"></div></div>');var t=$("#measure-div").find(".condition-div-statement:last"),i=($(t).find(".and").hasClass("and-img")||($(t).find(".and").prepend("<img class='and-img'/>"),$(t).find(".and-img").attr("src",dashboardServerResourceUrl+"/cdn/images/and.png"),$(t).find(".or").prepend("<img class='or-img'/>"),$(t).find(".or-img").attr("src",dashboardServerResourceUrl+"/cdn/images/or.png"),$(t).find(".nand").prepend("<img class='nand-img'/>"),$(t).find(".nand-img").attr("src",dashboardServerResourceUrl+"/cdn/images/nand.png"),$(t).find(".nor").prepend("<img class='nor-img'/>"),$(t).find(".nor-img").attr("src",dashboardServerResourceUrl+"/cdn/images/nor.png"),$(t).find("select").selectpicker("refresh")),e[1].length),s=0;if(null!=i){for(;s<i;)(0==s?addDimensionWithMeasure:addDimensionWithMeasureAgain)(t),s++;0<s&&$("#measure-div .condition-div-statement").last().find("#add-dimensions").css("display","none")}}function addDimension(){$("#dimension-div").append('<div class="col-sm-12 col-12 condition-div-statement margin-dimension-statement no-padding"><div class="col-sm-12 col-12 dimension-statement no-padding"><div class="col-sm-12 col-12 no-padding dimension-each no-margin where"><div class="col-sm-1 col-xs-1 no-padding delete-button-dimension no-margin"><span class="su su-close action"></span></div><div class="col-sm-1 col-xs-1 where-class no-padding no-margin text-center"><span id="where">Where</span></div><div class="col-sm-2 col-xs-2 no-padding dimension-column-col actual-column no-margin" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker col-sm-2 col-xs-2 no-padding select-condition" data-size="5"></select><span class="error-column"></span></div><div class="col-sm-2  col-xs-2 no-padding  column-dimension no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding" data-size="5"><option value = "" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'</option><option value="0">Contains</option><option value="1">Starts With</option><option value="2">Ends With</option><option value="3">Not Contains</option><option value="4">Include</option><option value="5">Exclude</option></select></div><div class="col-sm-2 col-xs-2 no-padding condition-type no-margin" id="condition-type-dimension"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value-dimension" data-size="5"><option value="" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'</option><option value="0">Actual</option><option value="1">Custom</option></select></div><div class="col-sm-3 col-xs-3 no-padding dimension-column-value-col value target-column-value no-margin target-row" id="selected-value-condition"><select id="selected-value-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectValue+'" class="selectpicker col-sm-3 col-xs-3 no-padding" data-size="5" multiple=""></select></div><div class="col-sm-3 col-xs-3 no-padding add-value-dimension"><input type= "text" class="form-control target-value validation-input" id="value-dimension"><span class="add-dimension-custom"></span></div><div class="col-sm-1 col-xs-1 no-padding add-dimension-after"><span class="su su-add add-dimension-condition-again" id=add-dimension-condition-again></span></div></div><a href="javascript:void(0);" title="" class="su su-close remove-dimension"></a></div></div>'),$("#dimension-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh"),$("#dimension-div").find(".dimension-statement .dimension-each:last").find(".actual-column select").html(""),$("#dimension-div").find(".dimension-statement .dimension-each:last").find(".actual-column select").html(dimensionColumns)}function addDimensionAgain(){$("#dimension-div .condition-div-statement .dimension-statement").append('<div class="col-sm-12 col-12 no-padding dimension-each no-margin"><div class="col-sm-1 col-xs-1 no-padding delete-button-dimension no-margin"><span class="su su-close action"></span></div><div class="col-sm-2 col-xs-2 join-div no-padding no-margin"><select id="selected-join-option" data-live-search="true" title='+selectJoinOption+' class="selectpicker col-sm-2 col-xs-2 join-option no-padding" data-size="5"><option value="0" class="and" selected="selected">AND</option><option value="1" class="or">OR</option></select></div><div class="col-sm-2 col-xs-2 no-padding dimension-column-col actual-column no-margin" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker col-sm-2 col-xs-2 no-padding select-condition" data-size="5"></select><span class="error-column"></span></div><div class="col-sm-2 col-xs-2 no-padding column-dimension no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding" data-size="5"><option value = "" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'</option><option value="0">Contains</option><option value="1">Starts With</option><option value="2">Ends With</option><option value="3">Not Contains</option><option value="4">Include</option><option value="5">Exclude</option></select></div><div class="col-sm-2 col-xs-2 no-padding condition-type no-margin" id="condition-type-dimension"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value-dimension" data-size="5"><option value="" name="" class="hide-option" disabled="disabled" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'</option><option value="0">Actual</option><option value="1">Custom</option></select></div><div class="col-sm-3 col-xs-3  no-padding value dimension-column-value-col target-column-value no-margin target-row" id="selected-value-condition"><select id="select-value-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectValue+'" class="selectpicker col-sm-3 col-xs-3 no-padding" data-size="5" multiple=""></select></div><div class="col-sm-3 col-xs-3 no-padding add-value-dimension"><input type= "text" class="form-control target-value validation-input" id="value-dimension"><span class="add-dimension-custom"></span></div><div class="col-sm-1 col-xs-1 no-padding  add-dimension-after"><span class="su su-add add-dimension-condition-again" id="add-dimension-condition-again"></span></div></div>'),$("#dimension-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh");var e=$("#dimension-div").find(".dimension-statement .dimension-each:last");$(e).find(".and").hasClass("and-img")||($(e).find(".and").prepend("<img class='and-img'/>"),$(e).find(".and-img").attr("src",dashboardServerResourceUrl+"/cdn/images/and.png"),$(e).find(".or").prepend("<img class='or-img'/>"),$(e).find(".or-img").attr("src",dashboardServerResourceUrl+"/cdn/images/or.png"),$(e).find(".nand").prepend("<img class='nand-img'/>"),$(e).find(".nand-img").attr("src",dashboardServerResourceUrl+"/cdn/images/nand.png"),$(e).find(".nor").prepend("<img class='nor-img'/>"),$(e).find(".nor-img").attr("src",dashboardServerResourceUrl+"/cdn/images/nor.png"),$(e).find("select").selectpicker("refresh"))}function addDimensionWithMeasure(e){$(e).find(".dimension-statement").append('<div class="col-sm-12 col-12 no-padding dimension-each no-margin where"><div class="col-sm-1 col-xs-1 no-padding delete-button no-margin"><span class="su su-close action"></span></div><div class="col-sm-1 col-xs-1 where-class no-padding no-margin text-center"><span id="where">Where</span></div><div class="col-sm-2 col-xs-2 no-padding dimension-column-col actual-column no-margin" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker col-sm-2 col-xs-2 no-padding select-condition" data-size="5"></select><span class="error-column"></span></div><div class="col-sm-2 col-xs-2 no-padding  column-dimension no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding" data-size="5"><option value = "" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'</option><option value="0">Contains</option><option value="1">Starts With</option><option value="2">Ends With</option><option value="3">Not Contains</option><option value="4">Include</option><option value="5">Exclude</option></select></div><div class="col-sm-2 col-xs-2 no-padding condition-type no-margin" id="condition-type-dimension"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value-dimension" data-size="5"><option value="" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'</option><option value="0">Actual</option><option value="1">Custom</option></select></div><div class="col-sm-3 col-xs-3 no-padding dimension-column-value-col value target-column-value no-margin target-row" id="selected-value-condition"><select id="selected-value-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectValue+'" class="selectpicker col-sm-3 col-xs-3 no-padding" data-size="5" multiple=""></select></div><div class="col-sm-3 col-xs-3 no-padding add-value-dimension"><input type= "text" class="form-control target-value validation-input" id="value-dimension"><span class="add-dimension-custom"></span></div><div class="col-sm-1 col-xs-1 no-padding add-dimension-after"><span class="su su-add add-dimension-again" id=add-dimension-again></span></div></div>'),$("#dimension-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh"),$("#dimension-div").find(".dimension-statement .dimension-each:last").find(".actual-column select").html(""),$("#dimension-div").find(".dimension-statement .dimension-each:last").find(".actual-column select").html(dimensionColumns),$(e).find(".dropdown-class .where-local-add").css("display","none")}function addDimensionWithMeasureAgain(e){$(e).find(".dimension-statement").append('<div class="col-sm-12 col-12 no-padding dimension-each no-margin"><div class="col-sm-1 col-xs-1 no-padding delete-button no-margin"><span class="su su-close action"></span></div><div class="col-sm-2 col-xs-2 join-div no-padding no-margin"><select id="selected-join-option" data-live-search="true" title='+selectJoinOption+' class="selectpicker col-sm-2 col-xs-2 join-option no-padding" data-size="5"><option value="0" class="and" selected="selected">AND</option><option value="1" class="or">OR</option></select></div><div class="col-sm-2 col-xs-2 no-padding dimension-column-col actual-column no-margin" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker col-sm-2 col-xs-2 no-padding select-condition" data-size="5"></select><span class="error-column"></span></div><div class="col-sm-2 col-xs-2 no-padding column-dimension no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding" data-size="5"><option value = "" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'</option><option value="0">Contains</option><option value="1">Starts With</option><option value="2">Ends With</option><option value="3">Not Contains</option><option value="4">Include</option><option value="5">Exclude</option></select></div><div class="col-sm-2 col-xs-2 no-padding condition-type no-margin" id="condition-type-dimension"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value-dimension" data-size="5"><option value="" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'</option><option value="0">Actual</option><option value="1">Custom</option></select></div><div class="col-sm-3 col-xs-3  no-padding value dimension-column-value-col target-column-value no-margin target-row" id="selected-value-condition"><select id="select-value-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectValue+'" class="selectpicker col-sm-3 col-xs-3 no-padding" data-size="5" multiple=""></select></div><div class="col-sm-3 col-xs-3 no-padding add-value-dimension"><input type= "text" class="form-control target-value validation-input" id="value-dimension"><span class="add-dimension-custom"></span></div><div class="col-sm-1 col-xs-1 no-padding  add-dimension-after"><span class="su su-add add-dimension-again" id="add-dimension-again"></span></div></div>');var t=$("#measure-div").find(".dimension-statement .dimension-each:last .join-div");$(t).find(".and").hasClass("and-img")||($(t).find(".and").prepend("<img class='and-img'/>"),$(t).find(".and-img").attr("src",dashboardServerResourceUrl+"/cdn/images/and.png"),$(t).find(".or").prepend("<img class='or-img'/>"),$(t).find(".or-img").attr("src",dashboardServerResourceUrl+"/cdn/images/or.png"),$(t).find(".nand").prepend("<img class='nand-img'/>"),$(t).find(".nand-img").attr("src",dashboardServerResourceUrl+"/cdn/images/nand.png"),$(t).find(".nor").prepend("<img class='nor-img'/>"),$(t).find(".nor-img").attr("src",dashboardServerResourceUrl+"/cdn/images/nor.png"),$(t).find("select").selectpicker("refresh")),$("#dimension-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh"),$(e).find(".dropdown-class .where-local-add").css("display","none")}function saveCondition(){var a=[],n=[],o=[],l=[],d=[],r=[],h=[],c=[],e=$("#selected-items").find("option:selected").attr("data-itemid"),t=(measure=[],dimensionArray=[],dimensionArrayValue=[],joinCondition=[],$("#condition-category").find("option:selected").html());if($("#data-changes-div-container").find("select").each(function(){""!=$(this).find("option:selected").val()&&null!=$(this).find("option:selected").val()||"none"==$(this).parent("div").css("display")?($(this).siblings(".bootstrap-select").removeClass("validation-error"),$(this).parent("div").removeClass("validation")):($(this).siblings(".bootstrap-select").addClass("validation-error"),$(this).parent("div").addClass("validation"))}),$(".condition-div-statement .measure-statement").find(".add-comparison").each(function(){$(this).is(":visible")?($(this).next(".add-comparison-target").removeClass("validation"),$(this).next(".add-comparison-target").find("#condition-type").removeClass("validation"),$(this).next(".add-comparison-target").find("#condition-second-col").removeClass("validation")):""!=$(this).next(".add-comparison-target").find("option:selected").val()&&null!=$(this).next(".add-comparison-target").find("option:selected").val()||$(this).next(".add-comparison-target").addClass("validation")}),!$("#data-changes-div-container").find("div").hasClass("validation")||"Increases"!=t&&"Decreases"!=t&&"Continuously Increases"!=t&&"Continuously Decreases"!=t||$("#condition-div .measure-statement").find(".condition-type,.target-column").hasClass("validation")&&($("#condition-div .measure-statement").find(".condition-type,.target-column").removeClass("validation"),$("#condition-div .measure-statement").find(".condition-type .bootstrap-select,.target-column .bootstrap-select").removeClass("validation-error")),$("#data-changes-div-container").find(".validation-input").each(function(){$(this).hasClass("from-date")?""==$(this).val()?($(this).parent().addClass("validation-error"),$(".date-error").css("display","inline"),$(".date-error").css("visibility","visible"),$(this).parents("div").addClass("validation")):($(this).parent().removeClass("validation-error"),$(".date-error").css("display","none"),$(this).parents("div").removeClass("validation"),$(".date-error").css("visibility","hidden")):""==$(this).val()&&"none"!=$(this).parent("div").css("display")?($(this).addClass("validation-error"),$(this).parent("div").children("span").css("display","inline"),$(this).parent("div").addClass("validation")):($(this).removeClass("validation-error"),$(this).parent("div").children("span").css("display","none"),$(this).parent("div").removeClass("validation"))}),$("#data-changes-div-container").find("div").hasClass("validation")||""==$("#data-changes-div-container #condition-div #measure-div").html().trim()?(validation=1,$(".items-dropdown").hasClass("validation")&&$(".condition-category-changes").hasClass("validation")?($("#widget-message").css("display","inline"),$(".error-message-condition-category").css("display","inline")):$(".items-dropdown").hasClass("validation")?$("#widget-message").css("display","inline"):$(".condition-category-changes").hasClass("validation")?$(".error-message-condition-category").css("display","inline"):""==$("#data-changes-div-container #condition-div #measure-div").html().trim()?($("#add-condition").addClass("add-first-condition-validation"),$(".add-error-msg").html(window.Server.App.LocalizationContent.AddContitionValidator).css("visibility","visible")):($("#add-condition").removeClass("add-first-condition-validation"),$(".add-error-msg").html(window.Server.App.LocalizationContent.AddContitionValidator).css("visibility","hidden"),$(".error-message-widget").css("display","none"),$(".error-message-condition-category").css("display","none"))):$("#data-changes-div-container #condition-div #measure-div .condition-div-statement").length<=1&&0!=$("#data-changes-div-container #condition-div #dimension-div .dimension-each").length?(validation=1,$("#add-condition").addClass("add-first-condition-validation"),$(".add-error-msg").html(window.Server.App.LocalizationContent.ConditionValidator).css("visibility","visible")):validation=0,1!=validation){var i=$("#selected_dashboard").find("option:selected").val(),s=(createdItemId=i,""!=$("#selected_childdashboard").val()&&(i=$("#selected_childdashboard").find("option:selected").val(),createdItemId=i),""==$("#selected_childdashboard").val()&&"disabled"!=$("#selected_childdashboard").attr("disabled")&&($("#schedule-submit").attr("data-report-id",$("#selected_childdashboard [data-designerid='"+$("#selected-items").find("option:selected").attr("data-itemid")+"']").val()),createdItemId=$("#selected_childdashboard [data-designerid='"+$("#selected-items").find("option:selected").attr("data-itemid")+"']").val()),$("#condition-category").find("option:selected").attr("name")),m=($(".condition-div-statement"),0),p=(parseInt($("#count").val()),$(".condition-div-statement").length),u=$("#selected-items").find("option:selected").val();if("Increases"==t||"Decreases"==t||"Continuously Increases"==t||"Continuously Decreases"==t||"Value Changes"==t)for(;m<p;)$(".condition-div-statement").each(function(){var e,i=0,s=[];if(0<$(this).find("#selected-joins").length?joinCondition[m]=$(this).find(".join-option option:selected").val():joinCondition[m]="0","none"==$(this).find(".measure-statement").find(".add-comparison-target").css("display"))if(0<$(this).find(".measure-statement").length?(actualColumn=$(this).find(".column option:selected").val(),measure[m]=[actualColumn,$(this).find(".filterareainput").val()]):measure[m]=null,0<$(this).find(".dimension-statement").length){var t=$(this).find(".dimension-each").length;for($(this).find(".join-div").length;i<t;)$(this).find(".dimension-each").each(function(){""==$(this).find(".join-div .join-option option:selected").val()?r[i]=null:r[i]=$(this).find(".join-div .join-option option:selected").val(),a[i]=$(this).find(".actual-column option:selected").val();var e,t=$(this).find(".select-value-dimension option:selected").val();l[i]=$(this).find(".column-dimension option:selected").text(),n[i]=$(this).find(".column-dimension option:selected").val(),"3"==n[i]&&"Between"==l[i]?(e=$(this).find(".from-date").attr("id"),e=$("#"+e).val().split("-").map(function(e){return e.trim()}),o[i]=[e[0],e[1]],d[i]=null):"0"==t?(o[i]=$(this).find(".target-column-value .bootstrap-select .btn-default .filter-option").html().split(",").map(function(e){return e.trim()}),d[i]=null):(d[i]=$(this).find(".target-value").val(),o[i]=null),dimensionArray[i]=[a[i],d[i],n[i],o[i],r[i]],s.push(dimensionArray[i]),i++,dimensionArrayValue[m]=s})}else dimensionArrayValue[m]=null;else if(0<$(this).find(".measure-statement").length?(actualColumn=$(this).find(".column option:selected").val(),e=$(this).find(".select-value option:selected").val(),targetColumn="1"==e?(h=$(this).find("#value").val(),null):(h=null,$(this).find(".target-column option:selected").val()),conditionMeasure=$(this).find(".column-condition option:selected").val(),measure[m]=[actualColumn,$(this).find(".filterareainput").val(),h,conditionMeasure,targetColumn]):measure[m]=null,0<$(this).find(".dimension-statement").length)for(t=$(this).find(".dimension-each").length,$(this).find(".join-div").length;i<t;)$(this).find(".dimension-each").each(function(){""==$(this).find(".join-div .join-option option:selected").val()?r[i]=null:r[i]=$(this).find(".join-div .join-option option:selected").val(),a[i]=$(this).find(".actual-column option:selected").val();var e,t=$(this).find(".select-value-dimension option:selected").val();l[i]=$(this).find(".column-dimension option:selected").text(),n[i]=$(this).find(".column-dimension option:selected").val(),"3"==n[i]&&"Between"==l[i]?(e=$(this).find(".from-date").attr("id"),e=$("#"+e).val().split("-").map(function(e){return e.trim()}),o[i]=[e[0],e[1]],d[i]=null):"0"==t?(o[i]=$(this).find(".target-column-value .bootstrap-select .btn-default .filter-option").html().split(",").map(function(e){return e.trim()}),d[i]=null):(d[i]=$(this).find(".target-value").val(),o[i]=null),n[i]=$(this).find(".column-dimension option:selected").val(),dimensionArray[i]=[a[i],d[i],n[i],o[i],r[i]],s.push(dimensionArray[i]),i++,dimensionArrayValue[m]=s});else dimensionArrayValue[m]=null;c[m]=[measure[m],dimensionArrayValue[m],joinCondition[m]],m++});parent.$("#popup-container_wrapper").ejWaitingPopup("show"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",data:{widgetdesignerId:e,itemId:i,columnInfo:JSON.stringify(c),itemName:u,conditionInfo:JSON.stringify(joinCondition),category:s},url:addConditionUrl,dataType:"json",success:function(e){parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide"),0==e.hasError?($("#serialize-columninfo").html("").append(e.columnInfo),$("#serialize-conditioninfo").html("").append(e.conditionInfo),$("#previous-data").html("").append(e.validationDetail),1==e.validationResult&&$("#alert-value").html("").append(e.validationResult),$(".after-selection").css("display","inline"),$(".before-selection").css("display","none"),addButtonClicked++,$("#form-message").hide().html(""),url=emailEditor,enableEmailEditor()):$("#form-message").show().html(window.Server.App.LocalizationContent.EvaluatingCondition+(0==e.status?e.validationDescription:""))}})}}function addTitleForWidgets(){$("#selected-items").selectpicker("refresh");for(var e=0;e<$(".items-dropdown  .btn-group .dropdown-menu .selectpicker li").length;e++){var t=$(".items-dropdown .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$(".items-dropdown .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}}function refreshColumns(e){$(e).selectpicker("refresh")}function addTitleForColumns(){for(var e=0;e<$(".measure-column-col  .btn-group .dropdown-menu .selectpicker li,.dimension-column-col  .btn-group .dropdown-menu .selectpicker li").length;e++){var t=$(".measure-column-col .btn-group .dropdown-menu .selectpicker li,.dimension-column-col  .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$(".measure-column-col .btn-group .dropdown-menu .selectpicker li,.dimension-column-col  .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}}function addTitleForColumnValues(){for(var e=0;e<$(".target-column-value  .btn-group .dropdown-menu .selectpicker li").length;e++){var t=$(".target-column-value .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$(".target-column-value .btn-group .dropdown-menu .selectpicker li").eq(e).find("a").attr("title",t)}}function getSummaryType(e){return summaryType[e]}function getWidgets(){$.ajax({type:"POST",url:window.getwidgetUrl,data:{itemId:createdItemId},async:!1,success:function(e){for(var t=e,i="",s=0;s<t.data.length;s++){var a="",n="";1==t.isMultiDashboard&&(a=" ("+t.data[s].ParentName+")",n="data-itemid="+t.data[s].ParentId),i+="<option "+n+'  value="'+t.data[s].Name+'">'+t.data[s].Name+" "+a+"</option>"}$(".items-dropdown select").append('<option disabled class="hide-option" selected="selected" value="">Select Widget</option>'+i).selectpicker("refresh"),addTitleForWidgets(),$("#selected-items").change(),$("#data-changes-container #condition-div #measure-div,#data-changes-container #condition-div #dimension-div").html(""),$("#data-changes-container #condition-div #add-condition,#data-changes-container #add-dimension-condition").css("display","none"),refreshConditionCategory(),$("span.loader-gif").remove(),$(".items-dropdown").find("select").removeAttr("disabled"),$(".items-dropdown").find(".bootstrap-select li,.bootstrap-select .btn-default").removeClass("disabled"),$(".items-dropdown").find(".dropdown-menu").addClass("alignment-dropdown"),$(".items-dropdown").find(".dropdown-menu .inner").addClass("alignment-dropdown-inner"),$(".items-dropdown").find(".dropdown-menu li:first").css("height","0px"),parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide")}})}function widgetNames(){$.ajax({type:"POST",url:window.getwidgetUrl,data:{itemId:createdItemId},async:!1,success:function(e){for(var t=e,i="",s=0;s<t.data.length;s++){var a="",n="";1==t.isMultiDashboard&&(a=" ("+t.data[s].ParentName+")",n="data-itemid="+t.data[s].ParentId),i+="<option "+n+'  value="'+t.data[s].Name+'">'+t.data[s].Name+" "+a+"</option>"}$(".items-dropdown select").append('<option disabled class="hide-option" selected="selected" value="">Select Widget</option>'+i).selectpicker("refresh")}})}function onExpressionEditorDialogOpen(){var e=$("#selected_dashboard").find("option:selected").val(),t=(""!=$("#selected_childdashboard").val()&&(e=$("#selected_childdashboard").find("option:selected").val()),$(".items-dropdown").find("option:selected").val());$("#custom-expression-editor-container iframe").attr("src",customExpressionEditor+"?title="+title+"&&itemname="+t+"&&itemid="+e),$("#custom-expression-editor-container_wrapper").ejWaitingPopup("show")}function onExpressionEditorDialogClose(){parent.$("#custom-expression-editor-container").find("iframe").contents().find("html").html(""),parent.$("#custom-expression-editor-container").ejDialog("close")}$("#custom-expression-editor-container_wrapper").ejWaitingPopup({template:$("#"+customExpressionWaitingPopupTemplateId)}),$(document).on("click","#add-alert-column",function(){cursorPos.codemirrorIgnore;var e=cursorPos.codemirror.getCursor(),t=(initialPosition=e).line,e=e.ch,i=cursorPos.codemirror.getLine(t),i=(initialLine=i).length,i=(cursorPos.codemirror.setSelection({line:t,ch:0},{line:t,ch:i}),cursorPos.codemirror.replaceSelection(initialLine),cursorPos.codemirror.setSelection({line:t,ch:e},{line:t,ch:e}),$(":selected",this),$("#widget-items option:selected").closest("optgroup").attr("data-id"));cursorPos.codemirror.replaceSelection("{:"+i+":"+$("#widget-items").val()+"}")}),$(".condition-category").find("select").each(function(){""==$(this).find("option:selected").val?($(this).siblings(".bootstrap-select").addClass("validation-error"),$("#add-alert-rule").attr("disabled",!0)):($(this).siblings(".bootstrap-select").removeClass("validation-error"),$("#add-alert-rule").attr("disabled",!1))}),$(document).on("focus",".frequency-info",function(){""==$(this).val()?($(this).parent("div").find("span").css("display","inline"),$(this).addClass("validation-error")):($(this).parent("div").find("span").css("display","none"),$(this).removeClass("validation-error"))}),$(document).on("keyup",".frequency-info",function(){""==$(this).val()?($(this).parent("div").find("span").css("display","inline"),$(this).addClass("validation-error")):($(this).parent("div").find("span").css("display","none"),$(this).removeClass("validation-error"))}),$(document).on("focusout",".frequency-info",function(){""!=$(this).val()?($(this).parent("div").find("span").css("display","none"),$(this).removeClass("validation-error")):($(this).parent("div").find("span").css("display","inline"),$(this).addClass("validation-error"))}),$(document).on("keyup",".frequency-info",function(){""!=$(this).val()?($(this).parent("div").find("span").css("display","none"),$(this).removeClass("validation-error")):($(this).parent("div").find("span").css("display","inline"),$(this).addClass("validation-error"))}),$(document).on("focus",".add-value input",function(){""==$(this).val()?($(this).parent(".add-value").find(".add-custom").css("display","inline"),$(this).parent(".add-value").find(".add-custom").css("visibility","visible"),$(this).addClass("validation-error")):($(this).parent(".add-value").find(".add-custom").css("display","none"),$(this).parent(".add-value").find(".add-custom").css("visibility","hidden"),$(this).removeClass("validation-error"))}),$(document).on("focusout",".add-value input",function(){""!=$(this).val()?($(this).parent(".add-value").find(".add-custom").css("display","none"),$(this).parent(".add-value").find(".add-custom").css("visibility","hidden"),$(this).removeClass("validation-error")):($(this).parent(".add-value").find(".add-custom").css("display","inline"),$(this).parent(".add-value").find(".add-custom").css("visibility","visible"),$(this).addClass("validation-error"))}),$(document).on("focus",".add-value-dimension input",function(){""==$(this).val()?($(this).parent(".add-value-dimension").find(".add-dimension-custom").css("display","inline"),$(this).parent(".add-value-dimension").find(".add-dimension-custom").css("visibility","visible"),$(this).addClass("validation-error")):($(this).parent(".add-value-dimension").find(".add-dimension-custom").css("display","none"),$(this).parent(".add-value-dimension").find(".add-dimension-custom").css("visibility","hidden"),$(this).removeClass("validation-error"))}),$(document).on("focusout",".add-value-dimension input",function(){""!=$(this).val()?($(this).parent(".add-value-dimension").find(".add-dimension-custom").css("display","none"),$(this).parent(".add-value-dimension").find(".add-dimension-custom").css("visibility","hidden"),$(this).removeClass("validation-error")):($(this).parent(".add-value-dimension").find(".add-dimension-custom").css("display","inline"),$(this).parent(".add-value-dimension").find(".add-dimension-custom").css("visibility","visible"),$(this).addClass("validation-error"))}),$(document).on("keyup",".add-value input",function(){""==$(this).val()?($(this).parent(".add-value").find(".add-custom").css("display","inline"),$(this).parent(".add-value").find(".add-custom").css("visibility","visible"),$(this).addClass("validation-error")):($(this).parent(".add-value").find(".add-custom").css("display","none"),$(this).parent(".add-value").find(".add-custom").css("visibility","hidden"),$(this).removeClass("validation-error"))}),$(document).on("keyup",".add-value input",function(){""!=$(this).val()?($(this).parent(".add-value").find(".add-custom").css("display","none"),$(this).parent(".add-value").find(".add-custom").css("visibility","hidden"),$(this).removeClass("validation-error")):($(this).parent(".add-value").find(".add-custom").css("display","inline"),$(this).parent(".add-value").find(".add-custom").css("visibility","visible"),$(this).addClass("validation-error"))}),$(document).on("keyup",".add-value-dimension input",function(){""==$(this).val()?($(this).parent(".add-value-dimension").find(".add-dimension-custom").css("display","inline"),$(this).parent(".add-value-dimension").find(".add-dimension-custom").css("visibility","visible"),$(this).addClass("validation-error")):($(this).parent(".add-value-dimension").find(".add-dimension-custom").css("display","none"),$(this).parent(".add-value-dimension").find(".add-dimension-custom").css("visibility","hidden"),$(this).removeClass("validation-error"))}),$(document).on("keyup",".add-value-dimension input",function(){""!=$(this).val()?($(this).parent(".add-value-dimension").find(".add-dimension-custom").css("display","none"),$(this).parent(".add-value-dimension").find(".add-dimension-custom").css("visibility","hidden"),$(this).removeClass("validation-error")):($(this).parent(".add-value-dimension").find(".add-dimension-custom").css("display","inline"),$(this).parent(".add-value-dimension").find(".add-dimension-custom").css("visibility","visible"),$(this).addClass("validation-error"))}),$(document).on("click","#add-condition",function(){window.listItems="",window.listDimensionItems="";for(var a=$("#selected_dashboard").find("option:selected").val(),n=$("#selected-items").find("option:selected").val(),e=(0==$(this).siblings("#measure-div").find(".condition-div-statement").length?$("#measure-div").append('<span id="form-message" class="error-message-widget validate-error no-padding col-sm-8 col-xs-8"></span><label class="custom-expression-columns" style="top: 5px;">'+window.Server.App.LocalizationContent.CutomExpression+'</label><div class="col-sm-12 col-12 condition-div-statement no-padding first-condition"><span class="filterarea"><span class="filterareatext"></span><input type="hidden" class="filterareainput"></span><a href="javascript:void(0);" title="" class="add-where-local remove-measure-dimension pull-right su su-close"></a><div class="measure-statement col-sm-12 col-12 no-padding"><div class="col-sm-3 col-xs-3 no-padding measure-column-col column" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker select-condition col-sm-2 col-xs-2 no-padding no-margin" data-size="5"></select></div><input class="add-comparison btn"  type="button" value='+window.Server.App.LocalizationContent.AddComparisionTarget+'><div class="add-comparison-target col-sm-6 col-xs-6" ><span class="remove-comparison su su-close" data-bs-toggle="tooltip" data-container="body" data-placement="right" title="'+window.Server.App.LocalizationContent.RemoveComparisionTarget+'"></span><div class="col-sm-2 col-xs-1 no-padding column-condition no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="col-sm-1 col-xs-1 no-padding no-margin" data-size="5"><option value="0" selected="selected" class="su su-equals">Equals</option><option value="1" class="su su-not-equals">Not Equals</option><option value="2" class="su su-lesser-than">Less Than</option><option value="3" class="su su-greater-than">Greater Than</option><option value="4" class="su su-lesser-than-or-equal-to">Less Than Or Equals</option><option value="5" class="su su-greater-than-or-equal-to">Greater Than Or Equals</option></select></div><div class="col-sm-4 col-xs-3 no-padding condition-type no-margin" id="condition-type"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectTarget+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value" data-size="5"><option value="" disabled class="hide-option"selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'</option><option value="0">Condition</option><option value="1">Custom</option></select></div><div class="col-sm-5 col-4 no-padding  measure-column-col  target-column no-margin" id="condition-second-col"><select id="selected-col2-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker select-condition col-sm-2 col-xs-2 no-padding no-margin" data-size="5"></select></div><div class="col-sm-4 col-4 no-padding no-margin add-value"><input type= "text"  id="value" class=" form-control validation-input"><span class="add-custom" style="display:none;">'+window.Server.App.LocalizationContent.CustomValueNumericValidator+'</span></div></div><a href="javascript:void(0);" class="col-md-12  col-sm-12 col-lg-12 col-12 add-where-local" id="add-dimensions"><span class="su su-add"></span><span class="margin-alignment">Add Where condition</span></a></div><div class=" col-sm-12 col-12 no-padding dimension-statement no-margin"></div></div>'):$("#measure-div").append('<div class="col-sm-12 col-12 condition-div-statement no-padding margin-condition-div-statement"><span class="filterarea"><span class="filterareatext"></span><input type="hidden" class="filterareainput"></span><a href="javascript:void(0);" title="" class="remove-measure-dimension pull-right su su-close"></a><div class="col-sm-2 col-xs-2 no-padding selected-joins" id="selected-joins"><select id="selected-join-option" data-live-search="true" title='+selectJoinOption+' class="selectpicker col-sm-2 col-xs-2 join-option no-padding" data-size="5"><option value="0" class="and" selected="selected">AND</option><option value="1" class="or">OR</option><option value="2" class="nand">AND NOT</option><option value="3" class="nor">OR NOT</option></select></div><div class="measure-statement col-sm-12 col-12 no-padding"><div class="col-sm-3 col-xs-3 no-padding measure-column-col column" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker select-condition col-sm-2 col-xs-2 no-padding no-margin" data-size="5"></select></div><input class="add-comparison btn"  type="button" value='+window.Server.App.LocalizationContent.AddComparisionTarget+'><div class="add-comparison-target col-sm-6 col-xs-6" ><span class="remove-comparison su su-close" data-bs-toggle="tooltip" data-container="body" data-placement="right" title="'+window.Server.App.LocalizationContent.RemoveComparisionTarget+'"></span><div class="col-sm-2 col-xs-1 no-padding  column-condition no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="col-sm-4 col-4 no-padding no-margin" data-size="5"><option value="0" selected="selected" class="su su-equals">Equals</option><option value="1" class="su su-not-equals">Not Equals</option><option value="2" class="su su-lesser-than">Less Than</option><option value="3" class="su su-greater-than">Greater Than</option><option value="4" class="su su-lesser-than-or-equal-to">Less Than Or Equals</option><option value="5" class="su su-greater-than-or-equal-to">Greater Than Or Equals</option></select></div><div class="col-sm-4 col-xs-3 no-padding condition-type no-margin" id="condition-type"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectTarget+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value" data-size="5"><option value="" disabled class="hide-option"selected="selected" >'+window.Server.App.LocalizationContent.SelectTarget+'</option><option value="0">Condition</option><option value="1">Custom</option></select></div><div class="col-sm-5 col-4 no-padding  measure-column-col  target-column no-margin" id="condition-second-col"><select id="selected-col2-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker select-condition col-sm-2 col-xs-2 no-padding no-margin" data-size="5"></select></div><div class="col-sm-4 col-4 no-padding no-margin add-value"><input type= "text" id="value" class="form-control validation-input"><span class="add-custom">'+window.Server.App.LocalizationContent.CustomValueNumericValidator+'</span></div></div><a href="javascript:void(0);" class="col-md-12  col-sm-12 col-lg-12 col-12 add-where-local" id="add-dimensions"><span class="su su-add"></span><span class="margin-alignment">Add Where condition</span></a></div><div class=" col-sm-12 col-12 no-padding dimension-statement  no-margin"></div></div>'),$(this).siblings("#measure-div").find(".condition-div-statement")),t=0;t<e.length;t++)$(this).siblings("#measure-div").find(".condition-div-statement .filterareatext").eq(t).html("Filter : "+(t+1)),$(this).siblings("#measure-div").find(".condition-div-statement .filterareainput").eq(t).val(t+1);var i=$("#condition-category").find("option:selected").html(),s=($(this).closest(".condition-div-statement .measure-statement").find(".measure-column-col select").html(""),$(this).closest(".condition-div-statement .measure-statement").find(".measure-column-col select").append('<option value="" disabled class="hide-option" selected="selected">Select Column</option>'+window.listItems).selectpicker("refresh"),$(this).parent(".joining-condition").remove(),$(".where-global").css("display","inline"),$(this).closest(".condition-div-statement").find(".add-value,.target-column").css("visibility","hidden"),parent.$("#popup-container_wrapper").ejWaitingPopup("show"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("show"),$("#measure-div").find(".condition-div-statement:last"));$(s).find(".and").hasClass("and-img")||($(s).find(".and").prepend("<img class='and-img'/>"),$(s).find(".and-img").attr("src",dashboardServerResourceUrl+"/cdn/images/and.png"),$(s).find(".or").prepend("<img class='or-img'/>"),$(s).find(".or-img").attr("src",dashboardServerResourceUrl+"/cdn/images/or.png"),$(s).find(".nand").prepend("<img class='nand-img'/>"),$(s).find(".nand-img").attr("src",dashboardServerResourceUrl+"/cdn/images/nand.png"),$(s).find(".nor").prepend("<img class='nor-img'/>"),$(s).find(".nor-img").attr("src",dashboardServerResourceUrl+"/cdn/images/nor.png"),$(s).find("select").selectpicker("refresh")),$(s).find(".column-condition .bootstrap-select .btn-default .filter-option").attr("id","option-selected"),$(s).find(".column-condition .bootstrap-select .btn-default #option-selected").removeAttr("class"),$(s).find(".column-condition .bootstrap-select .btn-default #option-selected").html(""),$(s).find(".column-condition .bootstrap-select .btn-default #option-selected").addClass("su su-equals").addClass("filter-option pull-left"),$(s).find(".column-condition .bootstrap-select .btn-default .filter-option").removeAttr("id"),$.ajax({type:"POST",data:{itemId:a,name:n},url:getItemNamesUrl,async:!1,success:function(e){parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide");for(var t=e,i=0;i<t.data.length;i++){var s=getSummaryType(t.data[i].SummaryType);1==t.data[i].IsWidgetBounded&&(window.listItems+='<option value="'+t.data[i].ColumnName+'">'+s+" ("+t.data[i].DisplayName+")</option>"),2==t.data[i].CustomColumnType&&(window.listDimensionItems+='<option value="'+t.data[i].ColumnName+'">'+t.data[i].DisplayName+"</option>")}$.ajax({type:"POST",data:{itemId:a,itemName:n,userId:$("#userid").val()},url:getCustomExpressionListUrl,success:function(e){if(parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide"),null!=e)for(var t=0;t<e.Result.length;t++)window.listItems+='<option value="'+e.Result[t].Name+'">'+e.Result[t].Name+"</option>",window.listDimensionItems+='<option value="'+e.Result[t].Name+'">'+e.Result[t].Name+"</option>";$(".measure-column select,.measure-column-col select").each(function(){""==$(this).html()&&($(this).html(""),$(this).append('<option value="" disabled class="hide-option"selected="selected">Select Column</option>'+window.listItems),refreshColumns($(this).closest(".condition-div-statement .measure-statement").find("#selected-col-option,#selected-col2-option")),addTitleForColumns())}),$("#widget-items option").remove(),$("#widget-items").append(window.listItems).selectpicker("refresh"),""==window.listDimensionItems?($("#dimension-div .join-div").html(""),$("#dimension-div .dimension-statement").html(""),$(".schedule-dialog #data-changes-container #add-dimension-condition").css("display","none"),$(".measure-statement .add-where-local").css("display","none")):""==$(".dimension-column select,.dimension-column-col select").html()&&($(".dimension-column select,.dimension-column-col select").html(""),$(".dimension-column select,.dimension-column-col select").append('<option value="" disabled class="hide-option"selected="selected">Select Column</option>'+window.listDimensionItems).selectpicker("refresh"),refreshColumns($(this).closest(".condition-div-statement .dimension-statement").find("#selected-col-option")),addTitleForColumns(),$("#add-dimension-condition").css("display","inline"))}})}}),"Increases"!=i&&"Decreases"!=i&&"Continuously Increases"!=i&&"Continuously Decreases"!=i||($(".measure-statement .column-condition,.measure-statement .condition-type").css("visibility","hidden"),$(".measure-statement .add-comparison-target").css("display","none")),$(".add-comparison-target").find(".remove-comparison").tooltip(),$("#add-condition").css("margin-top","24px"),addConditionClicked++,$(".add-error-msg").css("visibility","hidden"),$("#add-condition").removeClass("add-first-condition-validation")}),$(document).on("blur","#add-dimension-condition",function(){$(".add-error-msg").css("visibility","hidden"),$("#add-condition").removeClass("add-first-condition-validation")}),$(document).on("click",".add-comparison",function(){$(this).next(".add-comparison-target").siblings(".add-comparison").hide(),$(this).siblings(".add-comparison-target").find(".remove-comparison").tooltip(),$(this).next(".add-comparison-target").css("display","block")}),$(document).on("click",".remove-comparison",function(){$(this).closest(".add-comparison-target").css("display","none"),$(this).closest(".add-comparison-target").siblings(".add-comparison").show()}),$(document).on("click","#add-dimension-condition",function(){0==$(this).siblings("#dimension-div").find(".condition-div-statement").length&&1<$("#condition-div #measure-div").find(".condition-div-statement").length?($("#dimension-div").append('<div class="col-sm-12 col-12 condition-div-statement margin-dimension-statement no-padding"><div class="col-sm-12 col-12 dimension-statement no-padding"><div class="col-sm-12 col-12 no-padding dimension-each no-margin where"><div class="col-sm-1 col-xs-1 no-padding delete-button-dimension no-margin"><span class="su su-close action"></span></div><div class="col-sm-1 col-xs-1 where-class no-padding no-margin text-center"><span id="where">Where</span></div><div class="col-sm-2 col-xs-2 no-padding dimension-column-col actual-column no-margin" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker col-sm-2 col-xs-2 no-padding select-condition" data-size="5"></select><span class="error-column"></span></div><div class="col-sm-2  col-xs-2 no-padding  column-dimension no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding" data-size="5"><option value = "" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'</option><option value="0">Contains</option><option value="1">Starts With</option><option value="2">Ends With</option><option value="3">Not Contains</option><option value="4">Include</option><option value="5">Exclude</option></select></div><div class="col-sm-2 col-xs-2 no-padding condition-type no-margin" id="condition-type-dimension"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value-dimension" data-size="5"><option value="" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'</option><option value="0">Actual</option><option value="1">Custom</option></select></div><div class="col-sm-3 col-xs-3 no-padding dimension-column-value-col value target-column-value no-margin target-row" id="selected-value-condition"><select id="selected-value-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectValue+'" class="selectpicker col-sm-3 col-xs-3 no-padding" data-size="5" multiple=""></select></div><div class="col-sm-3 col-xs-3 no-padding add-value-dimension"><input type= "text" class="form-control target-value validation-input" id="value-dimension"><span class="add-dimension-custom"></span></div><div class="col-sm-1 col-xs-1 no-padding add-dimension-after"><span class="su su-add add-dimension-condition-again" id=add-dimension-condition-again></span></div><div class="dropdown col-sm-1 col-xs-1 no-padding dropdown-class" ></div></div><a href="javascript:void(0);" title="" class="su su-close remove-dimension"></a></div></div>'),$(this).closest(".add-dimension-after").css("display","inline"),$("#condition-div .dimension-statement select").selectpicker("refresh"),$(".dimension-each").each(function(){""==$(this).find(".dimension-column select,.dimension-column-col select").html()&&($(this).find(".dimension-column select,.dimension-column-col select").append('<option value="" disabled class="hide-option"selected="selected">Select Column</option>'+window.listDimensionItems).selectpicker("refresh"),refreshColumns($(this).closest(".condition-div-statement .dimension-statement").find("#selected-col-option")),addTitleForColumns())}),$(this).remove(),$("#add-condition").removeClass("add-first-condition-validation"),$(".add-error-msg").css("visibility","hidden")):$("#condition-div #measure-div").find(".condition-div-statement").length<1?($("#add-condition").addClass("add-first-condition-validation"),$(".add-error-msg").html(window.Server.App.LocalizationContent.ConditionValidator).css("visibility","visible")):($(".add-error-msg").html(window.Server.App.LocalizationContent.ConditionValidator).css("visibility","visible"),$("#add-condition").addClass("add-first-condition-validation"))}),$(document).on("click",".add-dimension-condition-again",function(){$("#dimension-div .condition-div-statement .dimension-statement").append('<div class="col-sm-12 col-12 no-padding dimension-each no-margin"><div class="col-sm-1 col-xs-1 no-padding delete-button-dimension no-margin"><span class="su su-close action"></span></div><div class="col-sm-2 col-xs-2 join-div no-padding no-margin"><select id="selected-join-option" data-live-search="true" title='+selectJoinOption+' class="selectpicker col-sm-2 col-xs-2 join-option no-padding" data-size="5"><option value="0" class="and" selected="selected">AND</option><option value="1" class="or">OR</option></select></div><div class="col-sm-2 col-xs-2 no-padding dimension-column-col actual-column no-margin" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker col-sm-2 col-xs-2 no-padding select-condition" data-size="5"></select><span class="error-column"></span></div><div class="col-sm-2 col-xs-2 no-padding column-dimension no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding" data-size="5"><option value = "" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'</option><option value="0">Contains</option><option value="1">Starts With</option><option value="2">Ends With</option><option value="3">Not Contains</option><option value="4">Include</option><option value="5">Exclude</option></select></div><div class="col-sm-2 col-xs-2 no-padding condition-type no-margin" id="condition-type-dimension"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value-dimension" data-size="5"><option value="" name="" class="hide-option" disabled="disabled" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'</option><option value="0">Actual</option><option value="1">Custom</option></select></div><div class="col-sm-3 col-xs-3  no-padding value dimension-column-value-col target-column-value no-margin target-row" id="selected-value-condition"><select id="select-value-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectValue+'" class="selectpicker col-sm-3 col-xs-3 no-padding" data-size="5" multiple=""></select></div><div class="col-sm-3 col-xs-3 no-padding add-value-dimension"><input type= "text" class="form-control target-value validation-input" id="value-dimension"><span class="add-dimension-custom"></span></div><div class="col-sm-1 col-xs-1 no-padding  add-dimension-after"><span class="su su-add add-dimension-condition-again" id="add-dimension-condition-again"></span></div></div>');var e=$("#dimension-div").find(".condition-div-statement .dimension-each:last");$(e).find(".and").hasClass("and-img")||($(e).find(".and").prepend("<img class='and-img'/>"),$(e).find(".and-img").attr("src",dashboardServerResourceUrl+"/cdn/images/and.png"),$(e).find(".or").prepend("<img class='or-img'/>"),$(e).find(".or-img").attr("src",dashboardServerResourceUrl+"/cdn/images/or.png"),$(e).find(".nand").prepend("<img class='nand-img'/>"),$(e).find(".nand-img").attr("src",dashboardServerResourceUrl+"/cdn/images/nand.png"),$(e).find(".nor").prepend("<img class='nor-img'/>"),$(e).find(".nor-img").attr("src",dashboardServerResourceUrl+"/cdn/images/nor.png"),$(e).find("select").selectpicker("refresh")),$(this).closest(".add-dimension-after").css("display","inline"),$("#condition-div .dimension-statement select").selectpicker("refresh"),$(".dimension-each").each(function(){""==$(this).find(".dimension-column select,.dimension-column-col select").html()&&($(this).find(".dimension-column select,.dimension-column-col select").append('<option value="" disabled class="hide-option"selected="selected">Select Column</option>'+window.listDimensionItems).selectpicker("refresh"),refreshColumns($(this).closest(".condition-div-statement .dimension-statement").find("#selected-col-option")),addTitleForColumns())}),$(this).remove()}),$(document).on("click","#add-dimensions",function(){$(this).parents(".measure-statement").siblings(".dimension-statement").append('<div class="col-sm-12 col-12 no-padding dimension-each no-margin where"><div class="col-sm-1 col-xs-1 no-padding delete-button no-margin"><span class="su su-close action"></span></div><div class="col-sm-1 col-xs-1 where-class no-padding no-margin text-center"><span id="where">Where</span></div><div class="col-sm-2 col-xs-2 no-padding dimension-column-col actual-column no-margin" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker col-sm-2 col-xs-2 no-padding select-condition" data-size="5"></select><span class="error-column"></span></div><div class="col-sm-2 col-xs-2 no-padding  column-dimension no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding" data-size="5"><option value = "" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'</option><option value="0">Contains</option><option value="1">Starts With</option><option value="2">Ends With</option><option value="3">Not Contains</option><option value="4">Include</option><option value="5">Exclude</option></select></div><div class="col-sm-2 col-xs-2 no-padding condition-type no-margin" id="condition-type-dimension"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value-dimension" data-size="5"><option value="" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'</option><option value="0">Actual</option><option value="1">Custom</option></select></div><div class="col-sm-3 col-xs-3 no-padding dimension-column-value-col value target-column-value no-margin target-row" id="selected-value-condition"><select id="selected-value-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectValue+'" class="selectpicker col-sm-3 col-xs-3 no-padding" data-size="5" multiple=""></select></div><div class="col-sm-3 col-xs-3 no-padding add-value-dimension"><input type= "text" class="form-control target-value validation-input" id="value-dimension"><span class="add-dimension-custom"></span></div><div class="col-sm-1 col-xs-1 no-padding add-dimension-after"><span class="su su-add add-dimension-again" id=add-dimension-again></span></div></div>'),$(this).closest(".add-dimension-after").css("display","inline"),$("#condition-div .dimension-statement select").selectpicker("refresh"),$(".dimension-each").each(function(){""==$(this).find(".dimension-column select,.dimension-column-col select").html()&&($(this).find(".dimension-column select,.dimension-column-col select").append('<option value="" disabled class="hide-option"selected="selected">Select Column</option>'+window.listDimensionItems).selectpicker("refresh"),refreshColumns($(this).closest(".condition-div-statement .dimension-statement").find("#selected-col-option")),addTitleForColumns())}),$(".dimension-statement .condition-div-statement").css("border","none"),$(this).attr("disabled","disabled"),$(this).css("display","none")}),$(document).on("click",".add-dimension-again",function(){$(this).parents(".dimension-statement").append('<div class="col-sm-12 col-12 no-padding dimension-each no-margin"><div class="col-sm-1 col-xs-1 no-padding delete-button no-margin"><span class="su su-close action"></span></div><div class="col-sm-2 col-xs-2 join-div no-padding no-margin"><select id="selected-join-option" data-live-search="true" title='+selectJoinOption+' class="selectpicker col-sm-2 col-xs-2 join-option no-padding" data-size="5"><option value="0" class="and" selected="selected">AND</option><option value="1" class="or">OR</option></select></div><div class="col-sm-2 col-xs-2 no-padding dimension-column-col actual-column no-margin" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker col-sm-2 col-xs-2 no-padding select-condition" data-size="5"></select><span class="error-column"></span></div><div class="col-sm-2 col-xs-2 no-padding column-dimension no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding" data-size="5"><option value = "" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'</option><option value="0">Contains</option><option value="1">Starts With</option><option value="2">Ends With</option><option value="3">Not Contains</option><option value="4">Include</option><option value="5">Exclude</option></select></div><div class="col-sm-2 col-xs-2 no-padding condition-type no-margin" id="condition-type-dimension"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value-dimension" data-size="5"><option value="" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'</option><option value="0">Actual</option><option value="1">Custom</option></select></div><div class="col-sm-3 col-xs-3  no-padding value dimension-column-value-col target-column-value no-margin target-row" id="selected-value-condition"><select id="select-value-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectValue+'" class="selectpicker col-sm-3 col-xs-3 no-padding" data-size="5" multiple=""></select></div><div class="col-sm-3 col-xs-3 no-padding add-value-dimension"><input type= "text" class="form-control target-value validation-input" id="value-dimension"><span class="add-dimension-custom"></span></div><div class="col-sm-1 col-xs-1 no-padding  add-dimension-after"><span class="su su-add add-dimension-again" id="add-dimension-again"></span></div></div>'),$(this).parents(".dimension-each").next(".dimension-each").find("div.join-div select#selected-join-option .and").prepend("<img class='and-img'/>"),$(this).parents(".dimension-each").next(".dimension-each").find("div.join-div select#selected-join-option .and-img").attr("src",dashboardServerResourceUrl+"/cdn/images/and.png"),$(this).parents(".dimension-each").next(".dimension-each").find("div.join-div select#selected-join-option .or").prepend("<img class='or-img'/>"),$(this).parents(".dimension-each").next(".dimension-each").find("div.join-div select#selected-join-option .or-img").attr("src",dashboardServerResourceUrl+"/cdn/images/or.png"),$(this).parents(".dimension-each").next(".dimension-each").find("div.join-div select#selected-join-option .nand").prepend("<img class='nand-img'/>"),$(this).parents(".dimension-each").next(".dimension-each").find("div.join-div select#selected-join-option .nand-img").attr("src",dashboardServerResourceUrl+"/cdn/images/nand.png"),$(this).parents(".dimension-each").next(".dimension-each").find("div.join-div select#selected-join-option .nor").prepend("<img class='nor-img'/>"),$(this).parents(".dimension-each").next(".dimension-each").find("div.join-div select#selected-join-option .nor-img").attr("src",dashboardServerResourceUrl+"/cdn/images/nor.png"),$(this).closest(".add-dimension-after").css("display","inline"),$("#condition-div .dimension-statement select").selectpicker("refresh"),$(".dimension-each").each(function(){""==$(this).find(".dimension-column select,.dimension-column-col select").html()&&($(this).find(".dimension-column select,.dimension-column-col select").append('<option value="" disabled class="hide-option"selected="selected">Select Column</option>'+window.listDimensionItems).selectpicker("refresh"),refreshColumns($(this).closest(".condition-div-statement .dimension-statement").find("#selected-col-option")),addTitleForColumns())}),$(this).remove()}),$(document).on("click",".remove-dimension",function(){$(this).parents("#dimension-div").html(""),$("#condition-div").append('<button class="col-md-12  col-sm-12 col-lg-12 col-12 where-global no-padding" id="add-dimension-condition"><span class="su su-add"></span><span class="margin-alignment">Add global Where condition</span></button>'),$(".schedule-dialog #data-changes-container #add-dimension-condition").css("display","inline")}),$(document).on("click",".remove-measure-dimension",function(){$(this).parents(".condition-div-statement").hasClass("first-condition")&&($(this).parents(".condition-div-statement").prev(".custom-expression-columns").remove(),$(this).parents(".condition-div-statement").prev(".error-message-widget").remove(),$(this).parents(".condition-div-statement").next(".condition-div-statement").find("#selected-joins").remove(),$(this).parents(".condition-div-statement").next(".condition-div-statement").addClass("first-condition"),$(this).parents(".condition-div-statement").next(".condition-div-statement").css("margin-top","0px")),$(this).parents(".condition-div-statement").remove();for(var e=$("#measure-div").find(".condition-div-statement"),t=0;t<e.length;t++)$("#measure-div").find(".condition-div-statement").eq(t).find(".filterareatext").html("Filter : "+(t+1)),$("#measure-div").find(".condition-div-statement").eq(t).find(".filterareainput").val(t+1)}),$(document).on("click",".delete-button",function(){1==$(this).closest(".dimension-statement").find(".dimension-each").length&&$(this).parents(".condition-div-statement").find(".measure-statement a#add-dimensions").css("display","inline"),$(this).closest(".dimension-each").hasClass("where")&&($(this).closest(".dimension-each").next(".dimension-each").find(".join-div").html(""),$(this).closest(".dimension-each").next(".dimension-each").find(".join-div").append('<span id="where">Where</span>'),$(this).closest(".dimension-each").next(".dimension-each").find(".join-div").addClass("col-sm-1 col-xs-1 where-class text-center"),$(this).closest(".dimension-each").next(".dimension-each").find(".where-class").removeClass("join-div col-sm-2 col-xs-2"),$(this).closest(".dimension-each").next(".dimension-each").addClass("where")),$(this).closest(".dimension-each").remove(),$("#measure-div .condition-div-statement").each(function(){""==$(this).find(".dimension-statement .dimension-each:last").find(".add-dimension-after").html()&&$(this).find(".dimension-statement .dimension-each:last").find(".add-dimension-after").append('<span class="su su-add add-dimension-again" id="add-dimension-again"></span>')})}),$(document).on("click",".delete-button-dimension",function(){1==$("#dimension-div .condition-div-statement .dimension-statement").find(".dimension-each").length?($(this).parents("#dimension-div").html(""),$("#condition-div").append('<button class="col-md-12  col-sm-12 col-lg-12 col-12 where-global no-padding" id="add-dimension-condition"><span class="su su-add"></span><span class="margin-alignment">Add global Where condition</span></button>'),$(this).closest(".dimension-each").parent().remove(),$("#condition-div #add-dimension-condition").css("display","inline")):($(this).closest(".dimension-each").hasClass("where")&&($(this).closest(".dimension-each").next(".dimension-each").find(".join-div").html(""),$(this).closest(".dimension-each").next(".dimension-each").find(".join-div").append('<span id="where">Where</span>'),$(this).closest(".dimension-each").next(".dimension-each").find(".join-div").addClass("col-sm-1 col-xs-1 where-class text-center"),$(this).closest(".dimension-each").next(".dimension-each").find(".where-class").removeClass("join-div col-sm-2 col-xs-2"),$(this).closest(".dimension-each").next(".dimension-each").addClass("where")),$(this).closest(".dimension-each").remove(),""==$("#dimension-div .condition-div-statement .dimension-statement").find(".dimension-each:last").find(".add-dimension-after").html()&&$("#dimension-div .condition-div-statement .dimension-statement").find(".dimension-each:last").find(".add-dimension-after").append('<span class="su su-add add-dimension-again" id="add-dimension-again"></span>'))}),$(document).on("click",".condition-type .bootstrap-select li",function(){var e;$(this).hasClass("selected active")&&(e=$(this).attr("data-original-index"),$(this).parents(".condition-type").find(".select-value option").each(function(){$(this).val()==(e-1).toString()?($(this).attr("selected","selected"),$(this).parents(".condition-type").hasClass("validation")&&($(this).parents(".condition-type").removeClass("validation"),$(this).parents(".condition-type").find(".bootstrap-select").removeClass("validation-error")),"1"==$(this).val()?($(this).parents(".condition-type").find(".selectpicker").selectpicker("refresh"),$(this).closest(".add-comparison-target").find(".target-column").css("visibility","hidden"),$(this).closest(".add-comparison-target").find(".target-column").css("display","none"),$(this).closest(".add-comparison-target").find(".add-value").css("visibility","visible"),$(this).closest(".add-comparison-target").find(".add-value").css("display","inline")):"0"==$(this).val()&&($(this).parents(".condition-type").find(".selectpicker").selectpicker("refresh"),$(this).closest(".add-comparison-target").find(".target-column").css("display","inline"),$(this).closest(".add-comparison-target").find(".target-column").css("visibility","visible"),$(this).closest(".add-comparison-target").find(".add-value").css("display","none"),$(this).closest(".add-comparison-target").find(".add-value").css("visibility","hidden"))):"selected"==$(this).attr("selected")&&$(this).removeAttr("selected")}))}),$(document).on("change",".column-dimension",function(){var e;$(this).hasClass("validation")&&($(this).removeClass("validation"),$(this).children(".bootstrap-select").removeClass("validation-error")),"Between"==$(this).find("option:selected").text()?($(this).parent().children(".condition-type,.add-value-dimension,.target-column-value").css("display","none"),$(this).parent().find(".condition-type").before('<div class="col-sm-3 col-xs-3 no-padding pull-left from-date-div"><input type="text" class="form-control from-date validation-input"/><span class="date-error">'+window.Server.App.LocalizationContent.DateRangeValidator+"</span></div>"),e=0<$(this).parents("#measure-div").length?"datepicker"+$(this).parents(".condition-div-statement").index()+"id"+$(this).parent(".dimension-each").index():"date"+$(this).parents(".condition-div-statement").index()+"id"+$(this).parent(".dimension-each").index(),$(this).parent().find(".from-date").attr("id",e),$("#"+e).ejDateRangePicker({dateFormat:dateFormat}),$(this).parent().children(".add-dimension-after").removeClass("padding-left").css("margin-left","10px")):($(this).parent().children(".from-date-div").remove(),$(this).parent().children(".condition-type").css("display","inline"),$(this).parent().children(".add-dimension-after").css("margin-left","0px"))}),$(document).on("change",".select-value-dimension",function(){""==$(this).parent().siblings(".actual-column").find("option:selected").val()?($(this).parent().siblings(".actual-column").addClass("validation"),$(this).parent().siblings(".actual-column").find(".bootstrap-select").addClass("validation-error"),$(this).parent().siblings(".actual-column").find(".error-column").html(window.Server.App.LocalizationContent.ColumnValidator).css("display","inline"),$(this).parent().siblings(".actual-column").find(".error-column").css("visibility","visible")):($(this).parent("div").hasClass("validation")&&($(this).parent("div").removeClass("validation"),$(this).siblings(".bootstrap-select").removeClass("validation-error")),"1"==$(this).find("option:selected").val()?($(this).parent().siblings(".dimension-column-value-col,.dimension-column-value").css("display","none"),$(this).parent().siblings(".add-value-dimension").find("input").val(""),$(this).parent().siblings(".add-value-dimension").css("display","inline")):($(this).parent().siblings(".dimension-column-value-col,.dimension-column-value").css("display","inline"),$(this).parent().siblings(".add-value-dimension").css("display","none")),$(this).parent().siblings(".add-dimension-after").addClass("padding-left"))}),$(document).on("change","#selected-option",function(){$(".error-message-widget").css("display","none"),$(".items-dropdown").removeClass("validation"),$(".items-dropdown .bootstrap-select").removeClass("validation-error"),$(".schedule-dialog #data-changes-container #add-condition").css("display","inline"),$(".schedule-dialog #data-changes-container  #add-dimension-condition").css("display","inline");var e=$("#condition-category").find("option:selected").html();0==$(".condition-div-statement").length&&$("#add-condition").trigger("click"),"Increases"==e||"Decreases"==e||"Continuously Increases"==e||"Continuously Decreases"==e?($(".measure-statement .column-condition,.measure-statement .condition-type,.measure-statement .target-column").css("visibility","hidden"),$(".measure-statement .add-value").css("visibility","hidden"),$(".measure-statement .add-custom").css("display","none"),$(".measure-statement .add-comparison").hide(),$(".measure-statement .add-comparison-target").css("display","none")):($(".measure-statement .add-comparison-target").css("display","block"),$(".add-comparison-target").find(".remove-comparison").tooltip(),$(".measure-statement .column-condition,.measure-statement .condition-type").css("visibility","visible"),$(".measure-statement .condition-type").find(".bootstrap-select li").removeClass("selected"),$(".measure-statement .condition-type").find(".bootstrap-select li:first").addClass("selected active"),$(".measure-statement .condition-type").find(".bootstrap-select .btn-default").attr("title","Select Target"),$(".measure-statement .condition-type").find(".bootstrap-select .btn-default .filter-option").html("Select Target"),$(".column-condition").change()),$("#condition-category .bootstrap-select button.selectpicker").removeAttr("title"),$("#condition-category .bootstrap-select button.selectpicker span.filter-option").attr({title:$(this).find("option:selected").attr("data-title"),"data-bs-toggle":"tooltip","data-container":"body","data-placement":"right"}),$("#condition-category .bootstrap-select button.selectpicker span.filter-option").tooltip(),$("#condition-category .bootstrap-select button.selectpicker span.filter-option").removeAttr("title")}),$(document).on("change","#selected-items",function(){$(this).parent("div").hasClass("validation")&&($(this).parent("div").removeClass("validation"),$(this).siblings(".bootstrap-select").removeClass("validation-error")),window.listItems="",window.listDimensionItems="",1==display?display=2:($(".schedule-dialog #data-changes-container  #add-condition").css("display","none"),$(".schedule-dialog #data-changes-container  #add-dimension-condition").css("display","none")),(0<$("#measure-div .condition-div-statement").length||0<$("#dimension-div .condition-div-statement").length)&&$("#condition-div #measure-div,#condition-div #dimension-div").html(""),$(".error-message-widget").css("display","none"),$("#selected-option").trigger("change"),$(".select-picker").selectpicker("refresh")}),$(document).on("change",".measure-column-col select,.dimension-column-col select",function(){$(this).parent("div").hasClass("validation")&&($(this).parent("div").removeClass("validation"),$(this).siblings(".bootstrap-select").removeClass("validation-error"),$(this).parent("div").find(".error-column").css("display","none"),$(this).parent("div").find(".error-column").css("visibility","hidden")),listDimensionValues="";var e=$("#selected_dashboard").find("option:selected").val(),t=(""!=$("#selected_childdashboard").val()&&(e=$("#selected_childdashboard").find("option:selected").val()),$("#selected-items").find("option:selected").val()),i=$(this).find("option:selected").val(),n=$(this).parents(".dimension-each"),o=$(n).find(".column-dimension"),l=$(n).find(".condition-type"),d=$(n).find(".from-date-div"),r=$(n).find(".add-value-dimension"),h=$(n).find(".add-dimension-after"),c=$(n).find(".dimension-column-value-col,.target-column-value");$(o).find("select").attr("disabled",!0),$(c).find("select").attr("disabled",!0),parent.$("#popup-container_wrapper").ejWaitingPopup("show"),refreshTarget(l),$.ajax({type:"POST",data:{itemId:e,columnName:i,widgetName:t},url:getColumnValuesUrl,success:function(e){var t=e,i=(e.summaryType,e.type),s=e.dataType,e=e.isBoolean;2==i&&"date"==s.toLowerCase()?($(n).find(".column-dimension select").html(""),$(n).find(".column-dimension select").append('<option value="" disabled class="hide-option" selected="selected">Select Condition</option><option value="0">Include</option><option value="1">Exclude</option><option value="3">Between</option>').selectpicker("refresh"),$(n).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.DateFormatvalidator+dateFormat+window.Server.App.LocalizationContent.Format)):e?($(n).find(".column-dimension select").html(""),$(n).find(".column-dimension select").append('<option value="" disabled class="hide-option" selected="selected">Select Condition</option><option value="4">Include</option><option value="5">Exclude</option>').selectpicker("refresh"),$(n).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.CustomValueValidator)):($(n).find(".column-dimension select").html(""),$(n).find(".column-dimension select").append('<option value="" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'</option><option value="0">Contains</option><option value="1">Starts With</option><option value="2">Ends With</option><option value="3">Not Contains</option><option value="4">Include</option><option value="5">Exclude</option>').selectpicker("refresh"),$(n).find(".from-date-div").remove(),$(n).find(".condition-type").css("display","inline"),$(n).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.CustomValueStringValidator));for(var a=0;a<t.data.length;a++)listDimensionValues+='<option value="'+t.data[a]+'">'+t.data[a]+"</option>";$(n).find(".dimension-column-value-col select,.target-column-value select").html(""),$(n).find(".dimension-column-value-col select,.target-column-value select").append(listDimensionValues).selectpicker("refresh");i=$(n).find(".target-column-value select"),s=$(n).find(".column-dimension select");refreshColumns(i),addTitleForColumnValues(),$(o).find("select").removeAttr("disabled"),$(c).find("select").removeAttr("disabled"),$(o).find(".bootstrap-select li,.bootstrap-select .btn-default").removeClass("disabled"),$(c).find(".bootstrap-select li,.bootstrap-select .btn-default").removeClass("disabled"),$(o).find(".dropdown-menu").addClass("alignment-dropdown"),$(c).find(".dropdown-menu").addClass("alignment-dropdown"),$(o).find(".dropdown-menu .inner").addClass("alignment-dropdown-inner"),$(c).find(".dropdown-menu .inner").addClass("alignment-dropdown-inner"),$(o).find(".dropdown-menu li:first").css("height","0px"),$(c).find(".dropdown-menu li:first").removeClass("selected"),$(c).css("display","none"),$(r).css("display","none"),$(l).css("display","inline"),$(d).remove(),refreshColumns(s),addTitleForColumns(),$(h).hasClass("padding-left")&&$(h).removeClass("padding-left"),parent.$("#popup-container_wrapper").ejWaitingPopup("hide")}})}),$(document).on("change",".column-condition",function(){$(this).parent("div").hasClass("validation")&&($(this).parent("div").removeClass("validation"),$(this).siblings(".bootstrap-select").removeClass("validation-error"));var e=$(this).find("option:selected").attr("class");$(this).find(".bootstrap-select .btn-default .filter-option").attr("id","option-selected"),$(this).find(".bootstrap-select .btn-default #option-selected").removeAttr("class"),$(this).find(".bootstrap-select .btn-default #option-selected").html(""),$(this).find(".bootstrap-select .btn-default #option-selected").addClass(e).addClass("filter-option pull-left"),$(this).find(".bootstrap-select .btn-default .filter-option").removeAttr("id")}),$(document).on("click",".delete-action",function(){$(this).closest("#dimension-div .condition-div-statement").prev("div").remove(),$(this).closest("#dimension-div .condition-div-statement").remove()}),$(document).on("click",".delete-measure-dimension",function(){$(this).closest("#measure-div .condition-div-statement .dimension-statement .dimension-each").remove()}),$(document).on("click",".delete-measure",function(){$(this).closest("#measure-div .condition-div-statement").prev("div").remove(),$(this).closest("#measure-div .condition-div-statement").remove()}),$(document).on("click",".delete-dimension",function(){$(this).parent().closest(".dimension-each").remove()}),$(document).on("click",".delete-dimension-all",function(){$(this).parents().find(".dimension-statement").html()}),$(document).on("click",".add-first-condition",function(){$("#measure-div").css("display","inline")}),$(document).on("change",".change-event, input[type=radio][name=daily-recurrence-type], input[type=radio][name=end-type], input[type=radio][name=monthly], input[type=radio][name=yearly]",function(){var e=createScheduleMessage(!1);$("#schedule-message").text(e)}),$(document).on("change",".join-option",function(){$(this).parent("div").hasClass("validation")&&($(this).parent("div").removeClass("validation"),$(this).siblings(".bootstrap-select").removeClass("validation-error"))}),$(document).on("click",".target-row .bootstrap-select li a",function(e){e.stopPropagation()}),$(document).on("click",".custom-expression-columns",function(){title=$(".popup-title").html(),""==$("#selected-items").find("option:selected").val()?($("#selected-items").siblings(".bootstrap-select").addClass("validation-error"),$("#widget-message").css("display","inline")):$("#custom-expression-editor-container").ejDialog("open")}),$(document).ready(function(){$("#data-changes-div-container").css("display","inline"),("undefined"!=typeof actionType&&"Edit"===actionType&&null!=item.ItemName?(widgetNames(),$("#data-changes-container .items-dropdown").find(".bootstrap-select li").each(function(){var e;$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).find("span .text").text().trim()==item.ItemName.trim()&&($(this).addClass("selected active"),e=$(this).find(".text").text(),$(this).parents(".bootstrap-select").find(".filter-option").html(e))}),$("#data-changes-container .items-dropdown").find("select option").each(function(){""==$(this).val()&&$(this).removeAttr("selected"),$(this).text().trim()==item.ItemName.trim()&&$(this).attr("selected","selected"),$("#selected-items").selectpicker("refresh")}),$("#data-changes-container .condition-category-changes").find(".bootstrap-select li").each(function(){var e;$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).attr("data-original-index")==item.ConditionCategory&&($(this).addClass("selected active"),e=$(this).find(".text").text(),$(this).parents(".bootstrap-select").find(".filter-option").html(e))}),$("#data-changes-container .condition-category-changes").find("select option").attr("selected",!1),$("#data-changes-container .condition-category-changes").find("select option").each(function(){""==$(this).val()&&$(this).removeAttr("selected"),$(this).val()==item.ConditionCategory&&$(this).attr("selected","selected")}),$("#data-changes-container .condition-category-changes select").selectpicker("refresh"),renderDataCondition(itemConditionCategory,itemConditionArray,itemWidgetName.trim()),addTitleForWidgets):getWidgets)()});