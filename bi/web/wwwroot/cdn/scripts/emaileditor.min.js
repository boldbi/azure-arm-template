!function(e){"use strict";var c={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:g,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:g,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:g,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n?(?!hr|heading|lheading| {0,3}>|tag)[^\n]+)+)/,text:/^[^\n]+/};function o(e){this.tokens=[],this.tokens.links={},this.options=e||f.defaults,this.rules=c.normal,this.options.gfm&&(this.options.tables?this.rules=c.tables:this.rules=c.gfm)}c._label=/(?:\\[\[\]]|[^\[\]])+/,c._title=/(?:"(?:\\"|[^"]|"[^"\n]*")*"|'\n?(?:[^'\n]+\n?)*'|\([^()]*\))/,c.def=t(c.def).replace("label",c._label).replace("title",c._title).getRegex(),c.bullet=/(?:[*+-]|\d+\.)/,c.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,c.item=t(c.item,"gm").replace(/bull/g,c.bullet).getRegex(),c.list=t(c.list).replace(/bull/g,c.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+c.def.source+")").getRegex(),c._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b",c.html=t(c.html).replace("comment",/<!--[\s\S]*?-->/).replace("closed",/<(tag)[\s\S]+?<\/\1>/).replace("closing",/<tag(?:"[^"]*"|'[^']*'|\s[^'"\/>\s]*)*?\/?>/).replace(/tag/g,c._tag).getRegex(),c.paragraph=t(c.paragraph).replace("hr",c.hr).replace("heading",c.heading).replace("lheading",c.lheading).replace("tag","<"+c._tag).getRegex(),c.blockquote=t(c.blockquote).replace("paragraph",c.paragraph).getRegex(),c.normal=m({},c),c.gfm=m({},c.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),c.gfm.paragraph=t(c.paragraph).replace("(?!","(?!"+c.gfm.fences.source.replace("\\1","\\2")+"|"+c.list.source.replace("\\1","\\3")+"|").getRegex(),c.tables=m({},c.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),o.rules=c,o.lex=function(e,t){return new o(t).lex(e)},o.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},o.prototype.token=function(e,t){var n,i,r,s,a,l,o,h;for(e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),1<i[0].length)&&this.tokens.push({type:"space"}),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]||""});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(t&&(i=this.rules.nptable.exec(e))){for(e=e.substring(i[0].length),s={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/\n$/,"").split("\n")},l=0;l<s.align.length;l++)/^ *-+: *$/.test(s.align[l])?s.align[l]="right":/^ *:-+: *$/.test(s.align[l])?s.align[l]="center":/^ *:-+ *$/.test(s.align[l])?s.align[l]="left":s.align[l]=null;for(l=0;l<s.cells.length;l++)s.cells[l]=s.cells[l].split(/ *\| */);this.tokens.push(s)}else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),h=1<(r=i[2]).length,this.tokens.push({type:"list_start",ordered:h,start:h?+r:""}),n=!1,o=(i=i[0].match(this.rules.item)).length,l=0;l<o;l++)a=(s=i[l]).length,~(s=s.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(a-=s.length,s=this.options.pedantic?s.replace(/^ {1,4}/gm,""):s.replace(new RegExp("^ {1,"+a+"}","gm"),"")),!this.options.smartLists||l===o-1||r===(a=c.bullet.exec(i[l+1])[0])||1<r.length&&1<a.length||(e=i.slice(l+1).join("\n")+e,l=o-1),a=n||/\n\n(?!\s*$)/.test(s),l!==o-1&&(n="\n"===s.charAt(s.length-1),a=a||n),this.tokens.push({type:a?"loose_item_start":"list_item_start"}),this.token(s,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===i[1]||"script"===i[1]||"style"===i[1]),text:i[0]});else if(t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),i[3]&&(i[3]=i[3].substring(1,i[3].length-1)),h=i[1].toLowerCase(),this.tokens.links[h]||(this.tokens.links[h]={href:i[2],title:i[3]});else if(t&&(i=this.rules.table.exec(e))){for(e=e.substring(i[0].length),s={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/(?: *\| *)?\n$/,"").split("\n")},l=0;l<s.align.length;l++)/^ *-+: *$/.test(s.align[l])?s.align[l]="right":/^ *:-+: *$/.test(s.align[l])?s.align[l]="center":/^ *:-+ *$/.test(s.align[l])?s.align[l]="left":s.align[l]=null;for(l=0;l<s.cells.length;l++)s.cells[l]=s.cells[l].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(s)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:g,tag:/^<!--[\s\S]*?-->|^<\/?[a-zA-Z0-9\-]+(?:"[^"]*"|'[^']*'|\s[^<'">\/\s]*)*?\/?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^_([^\s_](?:[^_]|__)+?[^\s_])_\b|^\*((?:\*\*|[^*])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`]?)\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:g,text:/^[\s\S]+?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};function i(e,t){if(this.options=t||f.defaults,this.links=e,this.rules=n.normal,this.renderer=this.options.renderer||new r,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=n.breaks:this.rules=n.gfm:this.options.pedantic&&(this.rules=n.pedantic)}function r(e){this.options=e||{}}function s(){}function h(e){this.tokens=[],this.token=null,this.options=e||f.defaults,this.options.renderer=this.options.renderer||new r,this.renderer=this.options.renderer,this.renderer.options=this.options}function u(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function l(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function t(n,e){return n=n.source,e=e||"",{replace:function(e,t){return t=(t=t.source||t).replace(/(^|[^\[])\^/g,"$1"),n=n.replace(e,t),this},getRegex:function(){return new RegExp(n,e)}}}function a(e,t){return p[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?p[" "+e]=e+"/":p[" "+e]=e.replace(/[^/]*$/,"")),e=p[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}n._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,n._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,n.autolink=t(n.autolink).replace("scheme",n._scheme).replace("email",n._email).getRegex(),n._inside=/(?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]]|\](?=[^\[]*\]))*/,n._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,n.link=t(n.link).replace("inside",n._inside).replace("href",n._href).getRegex(),n.reflink=t(n.reflink).replace("inside",n._inside).getRegex(),n.normal=m({},n),n.pedantic=m({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),n.gfm=m({},n.normal,{escape:t(n.escape).replace("])","~|])").getRegex(),url:t(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("email",n._email).getRegex(),_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:t(n.text).replace("]|","~]|").replace("|","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|").getRegex()}),n.breaks=m({},n.gfm,{br:t(n.br).replace("{2,}","*").getRegex(),text:t(n.gfm.text).replace("{2,}","*").getRegex()}),i.rules=n,i.output=function(e,t,n){return new i(t,n).output(e)},i.prototype.output=function(e){for(var t,n,i,r,s="";e;)if(r=this.rules.escape.exec(e))e=e.substring(r[0].length),s+=r[1];else if(r=this.rules.autolink.exec(e))e=e.substring(r[0].length),i="@"===r[2]?"mailto:"+(n=u(this.mangle(r[1]))):n=u(r[1]),s+=this.renderer.link(i,null,n);else if(!this.inLink&&(r=this.rules.url.exec(e)))r[0]=this.rules._backpedal.exec(r[0])[0],e=e.substring(r[0].length),i="@"===r[2]?"mailto:"+(n=u(r[0])):(n=u(r[0]),"www."===r[1]?"http://"+n:n),s+=this.renderer.link(i,null,n);else if(r=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(r[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(r[0])&&(this.inLink=!1),e=e.substring(r[0].length),s+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):u(r[0]):r[0];else if(r=this.rules.link.exec(e))e=e.substring(r[0].length),this.inLink=!0,s+=this.outputLink(r,{href:r[2],title:r[3]}),this.inLink=!1;else if(r=(r=this.rules.reflink.exec(e))||this.rules.nolink.exec(e))e=e.substring(r[0].length),t=(r[2]||r[1]).replace(/\s+/g," "),(t=this.links[t.toLowerCase()])&&t.href?(this.inLink=!0,s+=this.outputLink(r,t),this.inLink=!1):(s+=r[0].charAt(0),e=r[0].substring(1)+e);else if(r=this.rules.strong.exec(e))e=e.substring(r[0].length),s+=this.renderer.strong(this.output(r[2]||r[1]));else if(r=this.rules.em.exec(e))e=e.substring(r[0].length),s+=this.renderer.em(this.output(r[2]||r[1]));else if(r=this.rules.code.exec(e))e=e.substring(r[0].length),s+=this.renderer.codespan(u(r[2].trim(),!0));else if(r=this.rules.br.exec(e))e=e.substring(r[0].length),s+=this.renderer.br();else if(r=this.rules.del.exec(e))e=e.substring(r[0].length),s+=this.renderer.del(this.output(r[1]));else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),s+=this.renderer.text(u(this.smartypants(r[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return s},i.prototype.outputLink=function(e,t){var n=u(t.href),t=t.title?u(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,t,this.output(e[1])):this.renderer.image(n,t,u(e[1]))},i.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},i.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",i=e.length,r=0;r<i;r++)t=e.charCodeAt(r),n+="&#"+(t=.5<Math.random()?"x"+t.toString(16):t)+";";return n},r.prototype.code=function(e,t,n){var i;return this.options.highlight&&null!=(i=this.options.highlight(e,t))&&i!==e&&(n=!0,e=i),t?'<pre><code class="'+this.options.langPrefix+u(t,!0)+'">'+(n?e:u(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:u(e,!0))+"\n</code></pre>"},r.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},r.prototype.html=function(e){return e},r.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},r.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},r.prototype.list=function(e,t,n){var i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+i+">\n"},r.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},r.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},r.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},r.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},r.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},r.prototype.strong=function(e){return"<strong>"+e+"</strong>"},r.prototype.em=function(e){return"<em>"+e+"</em>"},r.prototype.codespan=function(e){return"<code>"+e+"</code>"},r.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},r.prototype.del=function(e){return"<del>"+e+"</del>"},r.prototype.link=function(e,t,n){if(this.options.sanitize){try{var i=decodeURIComponent(l(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return n}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return n}i='<a href="'+(e=this.options.baseUrl&&!d.test(e)?a(this.options.baseUrl,e):e)+'"';return t&&(i+=' title="'+t+'"'),i+=">"+n+"</a>"},r.prototype.image=function(e,t,n){e='<img src="'+(e=this.options.baseUrl&&!d.test(e)?a(this.options.baseUrl,e):e)+'" alt="'+n+'"';return t&&(e+=' title="'+t+'"'),e+=this.options.xhtml?"/>":">"},r.prototype.text=function(e){return e},s.prototype.strong=s.prototype.em=s.prototype.codespan=s.prototype.del=s.prototype.text=function(e){return e},s.prototype.link=s.prototype.image=function(e,t,n){return""+n},s.prototype.br=function(){return""},h.parse=function(e,t){return new h(t).parse(e)},h.prototype.parse=function(e){this.inline=new i(e.links,this.options),this.inlineText=new i(e.links,m({},this.options,{renderer:new s})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},h.prototype.next=function(){return this.token=this.tokens.pop()},h.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},h.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},h.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,l(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":for(var e,t,n="",i="",r="",s=0;s<this.token.header.length;s++)r+=this.renderer.tablecell(this.inline.output(this.token.header[s]),{header:!0,align:this.token.align[s]});for(n+=this.renderer.tablerow(r),s=0;s<this.token.cells.length;s++){for(e=this.token.cells[s],r="",t=0;t<e.length;t++)r+=this.renderer.tablecell(this.inline.output(e[t]),{header:!1,align:this.token.align[t]});i+=this.renderer.tablerow(r)}return this.renderer.table(n,i);case"blockquote_start":for(i="";"blockquote_end"!==this.next().type;)i+=this.tok();return this.renderer.blockquote(i);case"list_start":for(var i="",n=this.token.ordered,a=this.token.start;"list_end"!==this.next().type;)i+=this.tok();return this.renderer.list(i,n,a);case"list_item_start":for(i="";"list_item_end"!==this.next().type;)i+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(i);case"loose_item_start":for(i="";"list_item_end"!==this.next().type;)i+=this.tok();return this.renderer.listitem(i);case"html":n=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(n);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};var p={},d=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function g(){}function m(e){for(var t,n,i=1;i<arguments.length;i++)for(n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function f(e,n,i){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(i||"function"==typeof n){i||(i=n,n=null);var r,s=(n=m({},f.defaults,n||{})).highlight,t=0;try{r=o.lex(e,n)}catch(e){return i(e)}var a=r.length,l=function(t){if(t)return n.highlight=s,i(t);var e;try{e=h.parse(r,n)}catch(e){t=e}return n.highlight=s,t?i(t):i(null,e)};if(!s||s.length<3)return l();if(delete n.highlight,!a)return l();for(;t<r.length;t++)!function(n){"code"!==n.type?--a||l():s(n.text,n.lang,function(e,t){return e?l(e):null==t||t===n.text?--a||l():(n.text=t,n.escaped=!0,void(--a||l()))})}(r[t])}else try{return n=n&&m({},f.defaults,n),h.parse(o.lex(e,n),n)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(n||f.defaults).silent)return"<p>An error occurred:</p><pre>"+u(e.message+"",!0)+"</pre>";throw e}}g.exec=g,f.options=f.setOptions=function(e){return m(f.defaults,e),f},f.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new r,xhtml:!1,baseUrl:null},f.Parser=h,f.parser=h.parse,f.Renderer=r,f.TextRenderer=s,f.Lexer=o,f.lexer=o.lex,f.InlineLexer=i,f.inlineLexer=i.output,f.parse=f,"undefined"!=typeof module&&"object"==typeof exports?module.exports=f:"function"==typeof define&&define.amd?define(function(){return f}):e.marked=f}(this||("undefined"!=typeof window?window:global));var scheduleEmailEditRTE="",activeFilterCondition="";function selectSubjectVariables(e){var t=[],n=e.match(/{:(.*?)}/g);if(null!=n)for(i=0;i<n.length;i++)"{:organizationname}"===n[i].toLowerCase()?t.push("Organization Name"):"{:schedulename}"===n[i].toLowerCase()?t.push("Schedule Name"):"{:dashboardname}"===n[i].toLowerCase()?t.push("Dashboard Name"):"{:date}"===n[i].toLowerCase()?t.push("Date"):"{:time}"===n[i].toLowerCase()&&t.push("Time"),$("#email-subject-variables").selectpicker("val",t)}function setDefaultEmailSubject(){2==alertChange?$("#subject-area").val("{:OrganizationName}: Data Alert - {:ScheduleName}"):$("#subject-area").val("{:OrganizationName}: Your scheduled dashboard")}function getRelativePath(e){$("#itemType").attr("data-item-type").toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()});var t=e.match(/(?:\!\[\]\((.*?)\))/g),n=[];if(null!=t)for(var i=0;i<t.length;i++)n[i]=t[i].split(/[\(\\!\[\ \]\\)\s]+/),n[i]=$.grep(n[i],function(e){return e});return e}function setValue(e){var t=scheduleEmailEditRTE.inputElement.selectionStart,n=(scheduleEmailEditRTE.inputElement.selectionEnd,scheduleEmailEditRTE.formatter.editorManager.markdownSelection.getSelectedInlinePoints(scheduleEmailEditRTE.inputElement));scheduleEmailEditRTE.inputElement.value=scheduleEmailEditRTE.inputElement.value.substr(0,t)+e+scheduleEmailEditRTE.inputElement.value.substr(n.end,scheduleEmailEditRTE.inputElement.value.length)}$(document).ready(function(){$(".schedule-dialog #email-editor-panel").css("display","inline"),$(".selectpicker").selectpicker("show");var e="";if(2==alertChange){for(var t=0;t<filterContent.Filters.length;t++)e+="<option data-id='"+filterContent.Filters[t].FilterName+"'>"+filterContent.Filters[t].DisplayText+"</option>";$("#widget-items").html(e).selectpicker("refresh")}else $("#data-alert-header").hide();"Create"==actionType||""==subject?(setDefaultEmailSubject(),selectSubjectVariables($("#subject-area").val())):"Edit"==actionType&&($("#subject-area").val(subject),selectSubjectVariables(subject));var n=(ejdashboard||ejs).richtexteditor;scheduleEmailEditRTE=new n.RichTextEditor({height:"410px",cssClass:"bbi-designer",formatter:new n.MarkdownFormatter({listTags:{OL:"1., 2., 3."}}),toolbarSettings:{items:["Bold","Italic","|","Formats","OrderedList","UnorderedList","|","CreateLink","Image","|",{tooltipText:"Preview",template:'<button id="preview-code" class="e-tbar-btn e-control e-btn e-icon-btn"><span class="e-btn-icon su su-preview e-icons"></span></button>'},{tooltipText:"Reset",template:'<button id="reset-code" class="e-tbar-btn e-control e-btn e-icon-btn"><span class="e-btn-icon su su-reset e-icons"></span></button>'}]},editorMode:"Markdown",created:function(){textArea=scheduleEmailEditRTE.contentModule.getEditPanel(),mdsource=document.getElementById("preview-code"),mdResetSource=document.getElementById("reset-code"),mdsource.addEventListener("click",function(e){var t,n,i;t=ejdashboard||ejs,n=scheduleEmailEditRTE.getID()+"html-preview",i=scheduleEmailEditRTE.element.querySelector("#"+n),mdsource.classList.contains("e-active")?(mdsource.classList.remove("e-active"),mdsource.parentElement.title="Preview",scheduleEmailEditRTE.enableToolbarItem(scheduleEmailEditRTE.toolbarSettings.items),textArea.style.display="block",i.style.display="none"):(mdsource.classList.add("e-active"),scheduleEmailEditRTE.disableToolbarItem(scheduleEmailEditRTE.toolbarSettings.items),i||((i=t.base.createElement("div",{className:"e-content e-pre-source"})).id=n,textArea.parentNode.appendChild(i)),textArea.style.display="none",i.style.display="block",i.innerHTML=marked(scheduleEmailEditRTE.contentModule.getEditPanel().value),mdsource.parentElement.title="Code View"),e.currentTarget.classList.contains("e-active")?scheduleEmailEditRTE.disableToolbarItem(["Bold","Italic","OrderedList","UnorderedList","CreateLink","Image","Formats","Undo","Redo"]):scheduleEmailEditRTE.enableToolbarItem(["Bold","Italic","OrderedList","UnorderedList","CreateLink","Image","Formats","Undo","Redo"])}),mdResetSource.addEventListener("click",function(){scheduleEmailEditRTE.value=null,1==alertChange?scheduleEmailEditRTE.value="Hello {:Username},\n\nPlease find attached, the dashboard that you had requested. \n \nSchedule- {:ScheduleName} has exported the dashboard [{:DashboardName}]({:DashboardLink}).\n\nRegards,\n\n{:OrganizationName}":scheduleEmailEditRTE.value="Hi {:Username},\n\nThe configured data notification condition has been met. \n \nPlease find a snapshot of the current state of the dashboard attached.\n\nRegards,\n\n{:OrganizationName}",""==scheduleEmailEditRTE.value||null==scheduleEmailEditRTE.value?$("#email-content-validation").html(window.Server.App.Localization.ScheduleMessageValidator):$("#email-content-validation").html("")})}}),"Create"==actionType||null==emailContent?1==alertChange?scheduleEmailEditRTE.value="Hello {:Username},\n\nPlease find attached, the dashboard that you had requested. \n \nSchedule- {:ScheduleName} has exported the dashboard [{:DashboardName}]({:DashboardLink}).\n\nRegards,\n\n{:OrganizationName}":scheduleEmailEditRTE.value="Hi {:Username},\n\nThe configured data notification condition has been met. \n \nPlease find a snapshot of the current state of the dashboard attached.\n\nRegards,\n\n{:OrganizationName}":emailContent.includes("data notification")&&1==alertChange?scheduleEmailEditRTE.value="Hello {:Username},\n\nPlease find attached, the dashboard that you had requested. \n \nSchedule- {:ScheduleName} has exported the dashboard [{:DashboardName}]({:DashboardLink}).\n\nRegards,\n\n{:OrganizationName}":scheduleEmailEditRTE.value=emailContent,scheduleEmailEditRTE.appendTo("#email-editor-panel #selected-users-container"),parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide"),2==alertChange&&(activeFilterCondition=$("#widget-items option").val().trim())}),$(document).on("change","#email-subject-variables",function(e){var t="";if($(this).find("option").is(":selected")){var n=$(this).find("option:selected").length,r=[],s="";for(i=0;i<n;i++)"Organization Name"===$(this).val()[i]?s="OrganizationName":"Schedule Name"===$(this).val()[i]?s="ScheduleName":"Dashboard Name"===$(this).val()[i]?s="DashboardName":"Date"===$(this).val()[i]?s="Date":"Time"===$(this).val()[i]&&(s="Time"),r.push("{:"+s+"}"),t=r.join("-");$("#subject-area").val(t)}else setDefaultEmailSubject();""!=$(this).val()&&($(".email-subject-text").removeClass("has-error"),$("#email-subject-validation").css("display","none"))}),$(document).on("focusout","#subject-area",function(){var e=$(this).val();$("#email-subject-variables").selectpicker("val",[]),selectSubjectVariables(e),""!=$(this).val()&&($(".email-subject-text").removeClass("has-error"),$("#email-subject-validation").css("display","none"))}),document.getElementById("add-alert-column").addEventListener("click",function(){scheduleEmailEditRTE.focusIn(),setValue("{:"+activeFilterCondition+"}")}),$(document).on("click","#selected-users-containerhtml-preview p a",function(e){e.preventDefault()}),$(document).on("click","#email-alert-widget-container .bootstrap-select .dropdown-menu .selectpicker li a",function(e){activeFilterCondition=$("#widget-items option")[$(e.target.parentElement).index()].value.trim()}),$(document).on("keyup","#selected-users-container_editable-content",function(){var e=$("#selected-users-container_editable-content").val().trim();""==(e=null==e?null:e.replace(/(<([^>]+)>)/gi,""))||null==e?$("#email-content-validation").html(window.Server.App.Localization.ScheduleMessageValidator):$("#email-content-validation").html("")}),$(document).on("click","#selected-users-container_toolbar_CreateLink",function(e){$("#selected-users-container_rtelink").find(".e-footer-content").children().last().addClass("e-cancel")});