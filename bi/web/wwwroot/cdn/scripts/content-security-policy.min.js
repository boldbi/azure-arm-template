var attributeGrid,styleSrcChipData=[],scriptSrcChipData=[],fontSrcChipData=[],imgSrcChipData=[],connectSrcChipData=[],frameSrcChipData=[],frameAncestorsChipData=[],isStyleSrcChipBinded=!1,isScriptSrcsChipBinded=!1,isFontSrcChipBinded=!1,isImgSrcChipBinded=!1,isConnectSrcChipBinded=!1,isFrameSrcChipBinded=!1,isFrameAncestorsChipBinded=!1,isChrome=-1!=navigator.userAgent.indexOf("Chrome"),isEdge=-1!=navigator.userAgent.indexOf("Edge"),isEditing=!1,exisitingRuleName=null,existsIpAddress=null;function diableOrEnableCSPSettingsForm(){$("#enable-csp").is(":checked")?($(".src-input-class").removeClass("src-disabled"),$(".src-input-class .src-input-ship .e-chip").removeClass("disable-bg-color"),$(".txt-input-src").prop("disabled",!1)):($(".txt-input-src").val(""),$(".style-src-validation, .script-src-validation, .font-src-validation, .img-src-validation, .connect-src-validation, .frame-src-validation, .frame-ancestors-validation").html(""),$(".src-input-class").addClass("src-disabled"),$(".src-input-class .src-input-ship .e-chip").addClass("disable-bg-color"),$(".txt-input-src").prop("disabled",!0),getSrcInstance("style-src-chip-content"),getSrcInstance("script-src-chip-content"),getSrcInstance("font-src-chip-content"),getSrcInstance("img-src-chip-content"),getSrcInstance("connect-src-chip-content"),getSrcInstance("frame-src-chip-content"),getSrcInstance("frame-ancestors-chip-content"),styleSrcChipData=[],scriptSrcChipData=[],fontSrcChipData=[],imgSrcChipData=[],connectSrcChipData=[],frameSrcChipData=[],frameAncestorsChipData=[])}function objectConvertAsSrcDirectiveChip(t,e){0!=(t=t.endsWith(",")||t.endsWith(";")||t.endsWith("\n")?t.slice(0,-1).trim():t).length?isValidOrigin(t)?"txt-stylesrc"==e?(isSrcChipAlreadyExists(t,"style-src-chip-content")&&(styleSrcChipData.push(t),srcChipConversion(styleSrcChipData,"style-src-chip-content","#txt-stylesrc")),$("#"+e).parent().next().html("")):"txt-scriptsrc"==e?(isSrcChipAlreadyExists(t,"script-src-chip-content")&&(scriptSrcChipData.push(t),srcChipConversion(scriptSrcChipData,"script-src-chip-content","#txt-scriptsrc")),$("#"+e).parent().next().html("")):"txt-fontsrc"==e?(isSrcChipAlreadyExists(t,"font-src-chip-content")&&(fontSrcChipData.push(t),srcChipConversion(fontSrcChipData,"font-src-chip-content","#txt-fontsrc")),$("#"+e).parent().next().html("")):"txt-imgsrc"==e?(isSrcChipAlreadyExists(t,"img-src-chip-content")&&(imgSrcChipData.push(t),srcChipConversion(imgSrcChipData,"img-src-chip-content","#txt-imgsrc")),$("#"+e).parent().next().html("")):"txt-connectsrc"==e?(isSrcChipAlreadyExists(t,"connect-src-chip-content")&&(connectSrcChipData.push(t),srcChipConversion(connectSrcChipData,"connect-src-chip-content","#txt-connectsrc")),$("#"+e).parent().next().html("")):"txt-framesrc"==e?(isSrcChipAlreadyExists(t,"frame-src-chip-content")&&(frameSrcChipData.push(t),srcChipConversion(frameSrcChipData,"frame-src-chip-content","#txt-framesrc")),$("#"+e).parent().next().html("")):"txt-frameancestors"==e&&(isSrcChipAlreadyExists(t,"frame-ancestors-chip-content")&&(frameAncestorsChipData.push(t),srcChipConversion(frameAncestorsChipData,"frame-ancestors-chip-content","#txt-frameancestors")),$("#"+e).parent().next().html("")):($("#"+e).val(t),$("#"+e).parent().next().html(window.Server.App.Localization.CSPDirectiveValidation)):ClearSettingsFields()}function srcChipConversion(t,e,n){var c;"#txt-stylesrc"==n?isStyleSrcChipBinded?((c=document.getElementById(e).ej2_instances)[0].chips=[],c[0].chips=t,c[0].createChip(),c[0].refresh()):(new ejs.buttons.ChipList({chips:t,enableDelete:!0,delete:onStyleSrcChipDelete},"#"+e),isStyleSrcChipBinded=!0):"#txt-scriptsrc"==n?isScriptSrcsChipBinded?((c=document.getElementById("script-src-chip-content").ej2_instances)[0].chips=[],c[0].chips=scriptSrcChipData,c[0].createChip(),c[0].refresh()):(new ejs.buttons.ChipList({chips:scriptSrcChipData,enableDelete:!0,delete:onScriptSrcChipDelete},"#script-src-chip-content"),isScriptSrcsChipBinded=!0):"#txt-fontsrc"==n?isFontSrcChipBinded?((t=document.getElementById("font-src-chip-content").ej2_instances)[0].chips=[],t[0].chips=fontSrcChipData,t[0].createChip(),t[0].refresh()):(new ejs.buttons.ChipList({chips:fontSrcChipData,enableDelete:!0,delete:onFontSrcChipDelete},"#font-src-chip-content"),isFontSrcChipBinded=!0):"#txt-imgsrc"==n?isImgSrcChipBinded?((c=document.getElementById("img-src-chip-content").ej2_instances)[0].chips=[],c[0].chips=imgSrcChipData,c[0].createChip(),c[0].refresh()):(new ejs.buttons.ChipList({chips:imgSrcChipData,enableDelete:!0,delete:onImgSrcChipDelete},"#img-src-chip-content"),isImgSrcChipBinded=!0):"#txt-connectsrc"==n?isConnectSrcChipBinded?((t=document.getElementById("connect-src-chip-content").ej2_instances)[0].chips=[],t[0].chips=connectSrcChipData,t[0].createChip(),t[0].refresh()):(new ejs.buttons.ChipList({chips:connectSrcChipData,enableDelete:!0,delete:onConnectSrcChipDelete},"#connect-src-chip-content"),isConnectSrcChipBinded=!0):"#txt-framesrc"==n?isFrameSrcChipBinded?((c=document.getElementById("frame-src-chip-content").ej2_instances)[0].chips=[],c[0].chips=frameSrcChipData,c[0].createChip(),c[0].refresh()):(new ejs.buttons.ChipList({chips:frameSrcChipData,enableDelete:!0,delete:onFrameSrcChipDelete},"#frame-src-chip-content"),isFrameSrcChipBinded=!0):"#txt-frameancestors"==n&&(isFrameAncestorsChipBinded?((t=document.getElementById("frame-ancestors-chip-content").ej2_instances)[0].chips=[],t[0].chips=frameAncestorsChipData,t[0].createChip(),t[0].refresh()):(new ejs.buttons.ChipList({chips:frameAncestorsChipData,enableDelete:!0,delete:onFrameAncestorsChipDelete},"#frame-ancestors-chip-content"),isFrameAncestorsChipBinded=!0)),140<$("#"+e).height()&&((c=document.getElementById(e)).scrollTop=c.scrollHeight),removeSrcContainer(e,n),applySrcTooltip(e)}function applySrcTooltip(t){for(var e=0;e<$("#"+t+" .e-chip").length;e++){$("#"+t+" .e-chip")[e].setAttribute("data-bs-toggle","tooltip"),$("#"+t+" .e-chip")[e].setAttribute("data-placement","top");var n=$("#"+t+" .e-chip > .e-chip-text")[e].innerText;$("#"+t+" .e-chip")[e].setAttribute("data-original-title",n)}$('[data-bs-toggle="tooltip"]').tooltip()}function removeSrcContainer(t,e){$(e).css("width","10%").removeAttr("placeholder").val(""),$("#"+t).css("display","inline")}function getSrcInstance(t){var e=document.getElementById(t).ej2_instances;"style-src-chip-content"==t?null!=e&&(e[0].chips=[],applySrcContainer("#txt-stylesrc")):"script-src-chip-content"==t?null!=e&&(e[0].chips=[],applySrcContainer("#txt-scriptsrc")):"font-src-chip-content"==t?null!=e&&(e[0].chips=[],applySrcContainer("#txt-fontsrc")):"img-src-chip-content"==t?null!=e&&(e[0].chips=[],applySrcContainer("#txt-imgsrc")):"connect-src-chip-content"==t?null!=e&&(e[0].chips=[],applySrcContainer("#txt-connectsrc")):"frame-src-chip-content"==t?null!=e&&(e[0].chips=[],applySrcContainer("#txt-framesrc")):"frame-ancestors-chip-content"==t&&null!=e&&(e[0].chips=[],applySrcContainer("#txt-frameancestors")),$("#"+t).html("")}function checkSrcValidation(e){var n=$("#"+e+".e-chip").toArray(),c=0;$("#"+e+".e-chip").each(function(){var t;c<n.length&&(t=$(n[c]).find(".e-chip-text").text(),isValidOrigin(t)||($(this).addClass("chip-validation"),$("#"+e).parent().next().html.html(window.Server.App.Localization.CSPDirectiveValidation)),c++)})}function ClearSettingsFields(){$("#txt-stylesrc").val(""),null==document.getElementById("style-src-chip-content").ej2_instances&&0==$("#txt-stylesrc").val().length&&applySrcContainer("#txt-stylesrc"),$("#txt-scriptsrc").val(""),null==document.getElementById("script-src-chip-content").ej2_instances&&0==$("#txt-scriptsrc").val().length&&applySrcContainer("#txt-scriptsrc"),$("#txt-fontsrc").val(""),null==document.getElementById("font-src-chip-content").ej2_instances&&0==$("#txt-fontsrc").val().length&&applySrcContainer("#txt-fontsrc"),$("#txt-imgsrc").val(""),null==document.getElementById("img-src-chip-content").ej2_instances&&0==$("#txt-imgsrc").val().length&&applySrcContainer("#txt-imgsrc"),$("#txt-connectsrc").val(""),null==document.getElementById("connect-src-chip-content").ej2_instances&&0==$("#txt-connectsrc").val().length&&applySrcContainer("#txt-connectsrc"),$("#txt-framesrc").val(""),null==document.getElementById("frame-src-chip-content").ej2_instances&&0==$("#txt-framesrc").val().length&&applySrcContainer("#txt-framesrc"),$("#txt-frameancestors").val(""),null==document.getElementById("frame-ancestors-chip-content").ej2_instances&&0==$("#txt-frameancestors").val().length&&applySrcContainer("#txt-frameancestors")}function applySrcContainer(t){"#txt-stylesrc"==t?($("#txt-stylesrc").css("width","100%").attr("placeholder",window.Server.App.Localization.CSPSourcePlaceholderContent),$("#style-src-chip-content").hide(),$(".style-src-validation").html("")):"#txt-scriptsrc"==t?($("#txt-scriptsrc").css("width","100%").attr("placeholder",window.Server.App.Localization.CSPSourcePlaceholderContent),$("#script-src-chip-content").hide(),$(".script-src-validation").html("")):"#txt-fontsrc"==t?($("#txt-fontsrc").css("width","100%").attr("placeholder",window.Server.App.Localization.CSPSourcePlaceholderContent),$("#font-src-chip-content").hide(),$(".font-src-validation").html("")):"#txt-imgsrc"==t?($("#txt-imgsrc").css("width","100%").attr("placeholder",window.Server.App.Localization.CSPSourcePlaceholderContent),$("#img-src-chip-content").hide(),$(".img-src-validation").html("")):"#txt-connectsrc"==t?($("#txt-connectsrc").css("width","100%").attr("placeholder",window.Server.App.Localization.CSPSourcePlaceholderContent),$("#connect-src-chip-content").hide(),$(".connect-src-validation").html("")):"#txt-framesrc"==t?($("#txt-framesrc").css("width","100%").attr("placeholder",window.Server.App.Localization.CSPSourcePlaceholderContent),$("#frame-src-chip-content").hide(),$(".frame-src-validation").html("")):"#txt-frameancestors"==t&&($("#txt-frameancestors").css("width","100%").attr("placeholder",window.Server.App.Localization.CSPSourcePlaceholderContent),$("#frame-ancestors-chip-content").hide(),$(".frame-ancestors-validation").html(""))}function onStyleSrcChipDelete(){$("#txt-stylesrc").focus(),setTimeout(function(){$(".style-src-validation").html("")},100),1==document.getElementById("style-src-chip-content").ej2_instances[0].chips.length&&applySrcContainer("#txt-stylesrc")}function onScriptSrcChipDelete(){$("#txt-scriptsrc").focus(),setTimeout(function(){$(".script-src-validation").html("")},100),1==document.getElementById("script-src-chip-content").ej2_instances[0].chips.length&&applySrcContainer("#txt-scriptsrc")}function onFontSrcChipDelete(){$("#txt-fontsrc").focus(),setTimeout(function(){$(".font-src-validation").html("")},100),1==document.getElementById("font-src-chip-content").ej2_instances[0].chips.length&&applySrcContainer("#txt-fontsrc")}function onImgSrcChipDelete(){$("#txt-imgsrc").focus(),setTimeout(function(){$(".img-src-validation").html("")},100),1==document.getElementById("img-src-chip-content").ej2_instances[0].chips.length&&applySrcContainer("#txt-imgsrc")}function onConnectSrcChipDelete(){$("#txt-connectsrc").focus(),setTimeout(function(){$(".connect-src-validation").html("")},100),1==document.getElementById("connect-src-chip-content").ej2_instances[0].chips.length&&applySrcContainer("#txt-connectsrc")}function onFrameSrcChipDelete(){$("#txt-framesrc").focus(),setTimeout(function(){$(".frame-src-validation").html("")},100),1==document.getElementById("frame-src-chip-content").ej2_instances[0].chips.length&&applySrcContainer("#txt-framesrc")}function onFrameAncestorsChipDelete(){$("#txt-frameancestors").focus(),setTimeout(function(){$(".frame-ancestors-validation").html("")},100),1==document.getElementById("frame-ancestors-chip-content").ej2_instances[0].chips.length&&applySrcContainer("#txt-frameancestors")}function isSrcChipAlreadyExists(t,e){if("style-src-chip-content"==e){var n=document.getElementById("style-src-chip-content").ej2_instances;if(null!=n&&0!=n[0].chips&&null!=n[0].chips)for(i=0;i<n[0].chips.length;i++)if(n[0].chips[i].toLowerCase()==t.toLowerCase())return $("#txt-stylesrc").val(""),!1;return!0}if("script-src-chip-content"==e){var c=document.getElementById("script-src-chip-content").ej2_instances;if(null!=c&&0!=c[0].chips&&null!=c[0].chips)for(i=0;i<c[0].chips.length;i++)if(c[0].chips[i].toLowerCase()==t.toLowerCase())return $("#txt-scriptsrc").val(""),!1;return!0}if("font-src-chip-content"==e){var s=document.getElementById("font-src-chip-content").ej2_instances;if(null!=s&&0!=s[0].chips&&null!=s[0].chips)for(i=0;i<s[0].chips.length;i++)if(s[0].chips[i].toLowerCase()==t.toLowerCase())return $("#txt-fontsrc").val(""),!1;return!0}if("img-src-chip-content"==e){var r=document.getElementById("img-src-chip-content").ej2_instances;if(null!=r&&0!=r[0].chips&&null!=r[0].chips)for(i=0;i<r[0].chips.length;i++)if(r[0].chips[i].toLowerCase()==t.toLowerCase())return $("#txt-imgsrc").val(""),!1;return!0}if("connect-src-chip-content"==e){var a=document.getElementById("connect-src-chip-content").ej2_instances;if(null!=a&&0!=a[0].chips&&null!=a[0].chips)for(i=0;i<a[0].chips.length;i++)if(a[0].chips[i].toLowerCase()==t.toLowerCase())return $("#txt-connectsrc").val(""),!1;return!0}if("frame-src-chip-content"==e){var o=document.getElementById("frame-src-chip-content").ej2_instances;if(null!=o&&0!=o[0].chips&&null!=o[0].chips)for(i=0;i<o[0].chips.length;i++)if(o[0].chips[i].toLowerCase()==t.toLowerCase())return $("#txt-framesrc").val(""),!1;return!0}if("frame-ancestors-chip-content"==e){var l=document.getElementById("frame-ancestors-chip-content").ej2_instances;if(null!=l&&0!=l[0].chips&&null!=l[0].chips)for(i=0;i<l[0].chips.length;i++)if(l[0].chips[i].toLowerCase()==t.toLowerCase())return $("#txt-frameancestors").val(""),!1;return!0}}$(document).ready(function(){if(getSrcInstance("style-src-chip-content"),getSrcInstance("script-src-chip-content"),getSrcInstance("font-src-chip-content"),getSrcInstance("img-src-chip-content"),getSrcInstance("connect-src-chip-content"),getSrcInstance("frame-src-chip-content"),getSrcInstance("frame-ancestors-chip-content"),null!=styleSourcesList&&""!=styleSourcesList)for(i=0;i<styleSourcesList.length;i++)styleSrcChipData[i]=styleSourcesList[i],0!=styleSrcChipData[i].length&&srcChipConversion(styleSrcChipData,"style-src-chip-content","#txt-stylesrc");if(null!=scriptSourcesList&&""!=scriptSourcesList)for(i=0;i<scriptSourcesList.length;i++)scriptSrcChipData[i]=scriptSourcesList[i],0!=scriptSrcChipData[i].length&&srcChipConversion(scriptSrcChipData,"script-src-chip-content","#txt-scriptsrc");if(null!=fontSourcesList&&""!=fontSourcesList)for(i=0;i<fontSourcesList.length;i++)fontSrcChipData[i]=fontSourcesList[i],0!=fontSrcChipData[i].length&&srcChipConversion(fontSrcChipData,"font-src-chip-content","#txt-fontsrc");if(null!=imgSourcesList&&""!=imgSourcesList)for(i=0;i<imgSourcesList.length;i++)imgSrcChipData[i]=imgSourcesList[i],0!=imgSrcChipData[i].length&&srcChipConversion(imgSrcChipData,"img-src-chip-content","#txt-imgsrc");if(null!=connectSourcesList&&""!=connectSourcesList)for(i=0;i<connectSourcesList.length;i++)connectSrcChipData[i]=connectSourcesList[i],0!=connectSrcChipData[i].length&&srcChipConversion(connectSrcChipData,"connect-src-chip-content","#txt-connectsrc");if(null!=frameSourcesList&&""!=frameSourcesList)for(i=0;i<frameSourcesList.length;i++)frameSrcChipData[i]=frameSourcesList[i],0!=frameSrcChipData[i].length&&srcChipConversion(frameSrcChipData,"frame-src-chip-content","#txt-framesrc");if(null!=frameAncestorsList&&""!=frameAncestorsList)for(i=0;i<frameAncestorsList.length;i++)frameAncestorsChipData[i]=frameAncestorsList[i],0!=frameAncestorsChipData[i].length&&srcChipConversion(frameAncestorsChipData,"frame-ancestors-chip-content","#txt-frameancestors");$("#restrict-ipwhitelist-enabled").is(":checked")?($("#rulesgrid").show(),$(".whitelisting-info").show()):($("#rulesgrid").hide(),$(".whitelisting-info").hide()),diableOrEnableCSPSettingsForm();var t=window.location.search.toLowerCase();"?tab=x-frame-options"===t?($(".online-help-link").attr("href",xFrameOptionUrl),$("#update-csp-settings").hide(),$("#update-network-settings").hide(),$("#update-x-frame-options-settings").show()):"?tab=network-settings"===t?($(".online-help-link").attr("href",networkSettingsUrl),$("#update-csp-settings").hide(),$("#update-network-settings").show(),$("#update-x-frame-options-settings").hide()):($(".online-help-link").attr("href",contentSecurityPolicyUrl),$("#update-csp-settings").show(),$("#update-x-frame-options-settings").hide(),$("#update-network-settings").hide(),window.history.replaceState(null,null,location.href.split("?tab=")[0]))}),$("a[data-bs-toggle='tab']").on("click",function(t){"#csp-settings"==$(this).attr("href")?($(".online-help-link").attr("href",contentSecurityPolicyUrl),$("#update-csp-settings").show(),$("#update-x-frame-options-settings").hide(),$("#update-network-settings").hide()):"#x-frame-options"==$(this).attr("href")?($(".online-help-link").attr("href",xFrameOptionUrl),$("#update-csp-settings").hide(),$("#update-x-frame-options-settings").show(),$("#update-network-settings").hide()):"#network-settings"==$(this).attr("href")&&($(".online-help-link").attr("href",networkSettingsUrl),$("#update-csp-settings").hide(),$("#update-x-frame-options-settings").hide(),$("#update-network-settings").show())}),window.onpopstate=function(t){$("a[href='#"+t.state+"']").tab("show");t=window.location.search.toLowerCase();"?tab=x-frame-options"===t?($(".online-help-link").attr("href",xFrameOptionUrl),$("#update-csp-settings").hide(),$("#update-x-frame-options-settings").show(),$("#update-network-settings").hide()):"?tab=csp-settings"===t?($(".online-help-link").attr("href",contentSecurityPolicyUrl),$("#update-csp-settings").show(),$("#update-x-frame-options-settings").hide(),$("#update-network-settings").hide()):"?tab=network-settings"===t&&($(".online-help-link").attr("href",networkSettingsUrl),$("#update-csp-settings").hide(),$("#update-x-frame-options-settings").hide(),$("#update-network-settings").show())},$(document).on("click","#update-network-settings",function(){var t=$("#restrict-ipwhitelist-enabled").is(":checked"),e=dataSourceRule.some(function(t){return t.IPAddress===currentUserIP}),n={IsEnabled:t,IPWhitelistingRules:dataSourceRule};if(t){if(!dataSourceRule||0===dataSourceRule.length)return void warningToast(window.Server.App.Localization.IpAddressSettingsFailed);if(!e)return void warningToast(window.Server.App.Localization.CurrentUserIpAddress)}$.ajax({type:"POST",url:updateNetworkSettingsUrl,data:{networksetting:JSON.stringify(n)},beforeSend:showWaitingPopup($("#server-app-container")),success:function(t){hideWaitingPopup($("#server-app-container")),t.status?successToast(window.Server.App.Localization.UpdateSettingsSuccess):warningToast(window.Server.App.Localization.SettingsWarningAlert)}})}),$(document).on("click","#restrict-ipwhitelist-enabled",function(){$(this).is(":checked")?($("#rulesgrid").show(),$(".whitelisting-info").show()):($("#rulesgrid").hide(),$(".whitelisting-info").hide())}),$(document).on("click","input#add-rule",function(){var t,e,n,c;isEditing?(t=$.trim($("#rulename").val()),e=$.trim($("#ipaddress").val()),n=$('input[name="ipaddress-type"]:checked').val(),$("#dialog-container").valid()?($(".ruleadd-validation-messages").css("display","none"),n={RuleName:t,IPAddress:e,IPAddressType:n},(c=dataSourceRule.filter(function(t){return t.RuleName!==exisitingRuleName})).unshift(n),dataSourceRule=c,existsIpAddress=exisitingRuleName=null,(c=$("#rulesgrid").data("ejGrid")).dataSource(dataSourceRule),c.refreshContent(),onRuleAddDialogClose()):$(".ruleadd-validation-messages").css("display","block")):(t=$.trim($("#rulename").val()),e=$.trim($("#ipaddress").val()),n=$('input[name="ipaddress-type"]:checked').val(),$("#dialog-container").valid()?($(".ruleadd-validation-messages").css("display","none"),dataSourceRule.unshift({RuleName:t,IPAddress:e,IPAddressType:n}),(c=$("#rulesgrid").data("ejGrid")).dataSource(dataSourceRule),c.refreshContent(),onRuleAddDialogClose()):$(".ruleadd-validation-messages").css("display","block"))}),$(document).on("change",'input[name="ipaddress-type"]',function(){$("#dialog-container").validate().element("#ipaddress")}),$(document).on("click",'.tenant-action[data-action="delete"]',function(){var e=$(this).data("rule-name").toString(),t=($(this).data("ipaddress"),$(this).data("ip-type"),dataSourceRule=dataSourceRule.filter(function(t){return t.RuleName!==e}),$("#rulesgrid").data("ejGrid"));t.dataSource(dataSourceRule),t.refreshContent()}),$(document).on("click",'.tenant-action[data-action="edit"]',function(){isEditing=!0,exisitingRuleName=$(this).data("rule-name").toString(),existsIpAddress=$(this).data("ipaddress");var t=$(this).data("ip-type");$("#rules-add-dialog_title").text("Edit Rules"),$("#rulename").val(exisitingRuleName),$("#ipaddress").val(existsIpAddress),$('input[name="ipaddress-type"][value="'+t+'"]').prop("checked",!0),$("#add-rule").val("Edit Rule"),onRuleAddDialogOpen()}),$(document).on("click","#enable-csp",function(){diableOrEnableCSPSettingsForm()}),$(document).on("click","#x-frame",function(){$("#x-frame").is(":checked")?($("#x-frame-checkbox-label").css("padding-bottom","20px"),$(".x-frame-notification").show()):($(".x-frame-notification").hide(),$("#x-frame-checkbox-label").css("padding-bottom","32px"))}),$(document).on("keyup",".txt-input-src",function(t){var e=t.target.id;1==$("#"+e).length&&$("#"+e).focus(),t.keyCode!=keyCode.Comma&&t.keyCode!=keyCode.Enter||objectConvertAsSrcDirectiveChip($("#"+e).val(),e)}),$(document).on("keyup","#style-src-content",function(t){var e=document.getElementById("style-src-chip-content").ej2_instances;null==e||null!=e[0].chips&&0!=e[0].chips?null==e&&0==$("#txt-stylesrc").val().length&&applySrcContainer("#txt-stylesrc"):(""==$("#txt-stylesrc").val()&&applySrcContainer("#txt-stylesrc"),e[0].chips=[],setTimeout(function(){$("#style-src-chip-content").html("")},100)),setTimeout(function(){$("#style-src-chip-content .e-chip").hasClass("chip-validation")||""!=$("#txt-stylesrc").val()||$(".style-src-validation").html("")},100)}),$(document).on("keyup","#script-src-content",function(t){var e=document.getElementById("script-src-chip-content").ej2_instances;null==e||null!=e[0].chips&&0!=e[0].chips?null==e&&0==$("#txt-scriptsrc").val().length&&applySrcContainer("#txt-scriptsrc"):(""==$("#txt-scriptsrc").val()&&applySrcContainer("#txt-scriptsrc"),e[0].chips=[],setTimeout(function(){$("#script-src-chip-content").html("")},100)),setTimeout(function(){$("#script-src-chip-content .e-chip").hasClass("chip-validation")||""!=$("#txt-scriptsrc").val()||$(".script-src-validation").html("")},100)}),$(document).on("keyup","#font-src-content",function(t){var e=document.getElementById("font-src-chip-content").ej2_instances;null==e||null!=e[0].chips&&0!=e[0].chips?null==e&&0==$("#txt-fontsrc").val().length&&applySrcContainer("#txt-fontsrc"):(""==$("#txt-fontsrc").val()&&applySrcContainer("#txt-fontsrc"),e[0].chips=[],setTimeout(function(){$("#font-src-chip-content").html("")},100)),setTimeout(function(){$("#font-src-chip-content .e-chip").hasClass("chip-validation")||""!=$("#txt-fontsrc").val()||$(".font-src-validation").html("")},100)}),$(document).on("keyup","#img-src-content",function(t){var e=document.getElementById("img-src-chip-content").ej2_instances;null==e||null!=e[0].chips&&0!=e[0].chips?null==e&&0==$("#txt-imgsrc").val().length&&applySrcContainer("#txt-imgsrc"):(""==$("#txt-imgsrc").val()&&applySrcContainer("#txt-imgsrc"),e[0].chips=[],setTimeout(function(){$("#img-src-chip-content").html("")},100)),setTimeout(function(){$("#img-src-chip-content .e-chip").hasClass("chip-validation")||""!=$("#txt-imgsrc").val()||$(".img-src-validation").html("")},100)}),$(document).on("keyup","#connect-src-content",function(t){var e=document.getElementById("connect-src-chip-content").ej2_instances;null==e||null!=e[0].chips&&0!=e[0].chips?null==e&&0==$("#txt-connectsrc").val().length&&applySrcContainer("#txt-connectsrc"):(""==$("#txt-connectsrc").val()&&applySrcContainer("#txt-connectsrc"),e[0].chips=[],setTimeout(function(){$("#connect-src-chip-content").html("")},100)),setTimeout(function(){$("#connect-src-chip-content .e-chip").hasClass("chip-validation")||""!=$("#txt-connectsrc").val()||$(".connect-src-validation").html("")},100)}),$(document).on("keyup","#frame-src-content",function(t){var e=document.getElementById("frame-src-chip-content").ej2_instances;null==e||null!=e[0].chips&&0!=e[0].chips?null==e&&0==$("#txt-framesrc").val().length&&applySrcContainer("#txt-framesrc"):(""==$("#txt-framesrc").val()&&applySrcContainer("#txt-framesrc"),e[0].chips=[],setTimeout(function(){$("#frame-src-chip-content").html("")},100)),setTimeout(function(){$("#frame-src-chip-content .e-chip").hasClass("chip-validation")||""!=$("#txt-framesrc").val()||$(".frame-src-validation").html("")},100)}),$(document).on("keyup","#frame-ancestors-content",function(t){var e=document.getElementById("frame-ancestors-chip-content").ej2_instances;null==e||null!=e[0].chips&&0!=e[0].chips?null==e&&0==$("#txt-frameancestors").val().length&&applySrcContainer("#txt-frameancestors"):(""==$("#txt-frameancestors").val()&&applySrcContainer("#txt-frameancestors"),e[0].chips=[],setTimeout(function(){$("#frame-ancestors-chip-content").html("")},100)),setTimeout(function(){$("#frame-ancestors-chip-content .e-chip").hasClass("chip-validation")||""!=$("#txt-frameancestors").val()||$(".frame-ancestors-validation").html("")},100)}),$(document).on("focusin",".txt-input-src",function(t){"txt-stylesrc"==t.target.id?$("#style-src-content").addClass("focused"):"txt-scriptsrc"==t.target.id?$("#script-src-content").addClass("focused"):"txt-fontsrc"==t.target.id?$("#font-src-content").addClass("focused"):"txt-imgsrc"==t.target.id?$("#img-src-content").addClass("focused"):"txt-connectsrc"==t.target.id?$("#connect-src-content").addClass("focused"):"txt-framesrc"==t.target.id?$("#frame-src-content").addClass("focused"):"txt-frameancestors"==t.target.id&&$("#frame-ancestors-content").addClass("focused")}),$(".txt-input-src").focusout(function(t){var e,t=t.target.id;"txt-stylesrc"==t?(1<(e=$("#txt-stylesrc").val()+",").length&&objectConvertAsSrcDirectiveChip(e,t),$("#style-src-content").removeClass("focused")):"txt-scriptsrc"==t?(1<(e=$("#txt-scriptsrc").val()+",").length&&objectConvertAsSrcDirectiveChip(e,t),$("#script-src-content").removeClass("focused")):"txt-fontsrc"==t?(1<(e=$("#txt-fontsrc").val()+",").length&&objectConvertAsSrcDirectiveChip(e,t),$("#font-src-content").removeClass("focused")):"txt-imgsrc"==t?(1<(e=$("#txt-imgsrc").val()+",").length&&objectConvertAsSrcDirectiveChip(e,t),$("#img-src-content").removeClass("focused")):"txt-connectsrc"==t?(1<(e=$("#txt-connectsrc").val()+",").length&&objectConvertAsSrcDirectiveChip(e,t),$("#connect-src-content").removeClass("focused")):"txt-framesrc"==t?(1<(e=$("#txt-framesrc").val()+",").length&&objectConvertAsSrcDirectiveChip(e,t),$("#frame-src-content").removeClass("focused")):"txt-frameancestors"==t&&(1<(e=$("#txt-frameancestors").val()+",").length&&objectConvertAsSrcDirectiveChip(e,t),$("#frame-ancestors-content").removeClass("focused"))}),$(document).on("click",".src-input-class",function(t){"style-src-content"!=t.target.id||$(t.target).hasClass("e-chip")||$(t.target).hasClass("e-chip-text")?"script-src-content"!=t.target.id||$(t.target).hasClass("e-chip")||$(t.target).hasClass("e-chip-text")?"font-src-content"!=t.target.id||$(t.target).hasClass("e-chip")||$(t.target).hasClass("e-chip-text")?"img-src-content"!=t.target.id||$(t.target).hasClass("e-chip")||$(t.target).hasClass("e-chip-text")?"connect-src-content"!=t.target.id||$(t.target).hasClass("e-chip")||$(t.target).hasClass("e-chip-text")?"frame-src-content"!=t.target.id||$(t.target).hasClass("e-chip")||$(t.target).hasClass("e-chip-text")?"frame-ancestors-content"!=t.target.id||$(t.target).hasClass("e-chip")||$(t.target).hasClass("e-chip-text")||$("#txt-frameancestors").focus():$("#txt-framesrc").focus():$("#txt-connectsrc").focus():$("#txt-imgsrc").focus():$("#txt-fontsrc").focus():$("#txt-scriptsrc").focus():$("#txt-stylesrc").focus()}),$(document).on("keypress",".txt-input-src",function(t){var e=8*($("#"+t.target.id).val().length+1);$("#"+t.target.id).css("width",e+"px")}),$(document).on("keydown","#style-src-content",function(t){t.keyCode==keyCode.BackSpace&&0==$("#txt-stylesrc").val().length&&(isChrome&&isEdge||t.preventDefault(),null!=(t=document.getElementById("style-src-chip-content").ej2_instances))&&0!=t[0].chips&&null!=t[0].chips&&(($("#style-src-chip-content > .e-chip:last").hasClass("e-focused")?(t[0].chips.pop(),0<t[0].chips.length&&t[0].refresh(),applySrcTooltip("style-src-chip-content"),checkSrcValidation("style-src-chip-content"),$(".style-src-validation").html(""),$("#txt-stylesrc")):($("#style-src-chip-content > .e-chip:last").addClass("e-focused"),$("#style-src-chip-content > .e-chip:last"))).focus(),null!=t[0].chips&&0!=t[0].chips.length||getSrcInstance("style-src-chip-content"))}),$(document).on("keydown","#script-src-content",function(t){t.keyCode==keyCode.BackSpace&&0==$("#txt-scriptsrc").val().length&&(isChrome&&isEdge||t.preventDefault(),null!=(t=document.getElementById("script-src-chip-content").ej2_instances))&&0!=t[0].chips&&null!=t[0].chips&&(($("#script-src-chip-content > .e-chip:last").hasClass("e-focused")?(t[0].chips.pop(),0<t[0].chips.length&&t[0].refresh(),applySrcTooltip("script-src-chip-content"),checkSrcValidation("script-src-chip-content"),$(".script-src-validation").html(""),$("#txt-scriptsrc")):($("#script-src-chip-content > .e-chip:last").addClass("e-focused"),$("#script-src-chip-content > .e-chip:last"))).focus(),null!=t[0].chips&&0!=t[0].chips.length||getSrcInstance("script-src-chip-content"))}),$(document).on("keydown","#font-src-content",function(t){t.keyCode==keyCode.BackSpace&&0==$("#txt-fontsrc").val().length&&(isChrome&&isEdge||t.preventDefault(),null!=(t=document.getElementById("font-src-chip-content").ej2_instances))&&0!=t[0].chips&&null!=t[0].chips&&(($("#font-src-chip-content > .e-chip:last").hasClass("e-focused")?(t[0].chips.pop(),0<t[0].chips.length&&t[0].refresh(),applySrcTooltip("font-src-chip-content"),checkSrcValidation("font-src-chip-content"),$(".font-src-validation").html(""),$("#txt-fontsrc")):($("#font-src-chip-content > .e-chip:last").addClass("e-focused"),$("#font-src-chip-content > .e-chip:last"))).focus(),null!=t[0].chips&&0!=t[0].chips.length||getSrcInstance("font-src-chip-content"))}),$(document).on("keydown","#img-src-content",function(t){t.keyCode==keyCode.BackSpace&&0==$("#txt-imgsrc").val().length&&(isChrome&&isEdge||t.preventDefault(),null!=(t=document.getElementById("img-src-chip-content").ej2_instances))&&0!=t[0].chips&&null!=t[0].chips&&(($("#img-src-chip-content > .e-chip:last").hasClass("e-focused")?(t[0].chips.pop(),0<t[0].chips.length&&t[0].refresh(),applySrcTooltip("img-src-chip-content"),checkSrcValidation("img-src-chip-content"),$(".img-src-validation").html(""),$("#txt-imgsrc")):($("#img-src-chip-content > .e-chip:last").addClass("e-focused"),$("#img-src-chip-content > .e-chip:last"))).focus(),null!=t[0].chips&&0!=t[0].chips.length||getSrcInstance("img-src-chip-content"))}),$(document).on("keydown","#connect-src-content",function(t){t.keyCode==keyCode.BackSpace&&0==$("#txt-connectsrc").val().length&&(isChrome&&isEdge||t.preventDefault(),null!=(t=document.getElementById("connect-src-chip-content").ej2_instances))&&0!=t[0].chips&&null!=t[0].chips&&(($("#connect-src-chip-content > .e-chip:last").hasClass("e-focused")?(t[0].chips.pop(),0<t[0].chips.length&&t[0].refresh(),applySrcTooltip("connect-src-chip-content"),checkSrcValidation("connect-src-chip-content"),$(".connect-src-validation").html(""),$("#txt-connectsrc")):($("#connect-src-chip-content > .e-chip:last").addClass("e-focused"),$("#connect-src-chip-content > .e-chip:last"))).focus(),null!=t[0].chips&&0!=t[0].chips.length||getSrcInstance("connect-src-chip-content"))}),$(document).on("keydown","#frame-src-content",function(t){t.keyCode==keyCode.BackSpace&&0==$("#txt-framesrc").val().length&&(isChrome&&isEdge||t.preventDefault(),null!=(t=document.getElementById("frame-src-chip-content").ej2_instances))&&0!=t[0].chips&&null!=t[0].chips&&(($("#frame-src-chip-content > .e-chip:last").hasClass("e-focused")?(t[0].chips.pop(),0<t[0].chips.length&&t[0].refresh(),applySrcTooltip("frame-src-chip-content"),checkSrcValidation("frame-src-chip-content"),$(".frame-src-validation").html(""),$("#txt-framesrc")):($("#frame-src-chip-content > .e-chip:last").addClass("e-focused"),$("#frame-src-chip-content > .e-chip:last"))).focus(),null!=t[0].chips&&0!=t[0].chips.length||getSrcInstance("frame-src-chip-content"))}),$(document).on("keydown","#frame-ancestors-content",function(t){t.keyCode==keyCode.BackSpace&&0==$("#txt-frameancestors").val().length&&(isChrome&&isEdge||t.preventDefault(),null!=(t=document.getElementById("frame-ancestors-chip-content").ej2_instances))&&0!=t[0].chips&&null!=t[0].chips&&(($("#frame-ancestors-chip-content > .e-chip:last").hasClass("e-focused")?(t[0].chips.pop(),0<t[0].chips.length&&t[0].refresh(),applySrcTooltip("frame-ancestors-chip-content"),checkSrcValidation("frame-ancestors-chip-content"),$(".frame-ancestors-validation").html(""),$("#txt-frameancestors")):($("#frame-ancestors-chip-content > .e-chip:last").addClass("e-focused"),$("#frame-ancestors-chip-content > .e-chip:last"))).focus(),null!=t[0].chips&&0!=t[0].chips.length||getSrcInstance("frame-ancestors-chip-content"))}),$(document).on("paste","#txt-stylesrc",function(t){if($(this).closest("#style-src-content").hasClass("src-disabled"))t.preventDefault();else{var e="",n=t.originalEvent.clipboardData.getData("Text").trim().split(/[\s,;\r?\n]+/);if(1<n.length){for(var c=0;c<n.length;c++){var s=n[c];isValidOrigin(s)?isSrcChipAlreadyExists(s,"style-src-chip-content")&&""!=s&&(styleSrcChipData.push(s),srcChipConversion(styleSrcChipData,"style-src-chip-content","#txt-stylesrc")):(e=e+s+" ",$("#txt-stylesrc").parent().next().html(window.Server.App.Localization.CSPDirectiveValidation))}setTimeout(function(){$("#txt-stylesrc").val(e.trim())},100)}}}),$(document).on("paste","#txt-scriptsrc",function(t){if($(this).closest("#script-src-content").hasClass("src-disabled"))t.preventDefault();else{var e="",n=t.originalEvent.clipboardData.getData("Text").trim().split(/[\s,;\r?\n]+/);if(1<n.length){for(var c=0;c<n.length;c++){var s=n[c];isValidOrigin(s)?isSrcChipAlreadyExists(s,"script-src-chip-content")&&""!=s&&(scriptSrcChipData.push(s),srcChipConversion(scriptSrcChipData,"script-src-chip-content","#txt-scriptsrc")):(e=e+s+" ",$("#txt-scriptsrc").parent().next().html(window.Server.App.Localization.CSPDirectiveValidation))}setTimeout(function(){$("#txt-scriptsrc").val(e.trim())},100)}}}),$(document).on("paste","#txt-fontsrc",function(t){if($(this).closest("#font-src-content").hasClass("src-disabled"))t.preventDefault();else{var e="",n=t.originalEvent.clipboardData.getData("Text").trim().split(/[\s,;\r?\n]+/);if(1<n.length){for(var c=0;c<n.length;c++){var s=n[c];isValidOrigin(s)?isSrcChipAlreadyExists(s,"font-src-chip-content")&&""!=s&&(fontSrcChipData.push(s),srcChipConversion(fontSrcChipData,"font-src-chip-content","#txt-fontsrc")):(e=e+s+" ",$("#txt-fontsrc").parent().next().html(window.Server.App.Localization.CSPDirectiveValidation))}setTimeout(function(){$("#txt-fontsrc").val(e.trim())},100)}}}),$(document).on("paste","#txt-imgsrc",function(t){if($(this).closest("#img-src-content").hasClass("src-disabled"))t.preventDefault();else{var e="",n=t.originalEvent.clipboardData.getData("Text").trim().split(/[\s,;\r?\n]+/);if(1<n.length){for(var c=0;c<n.length;c++){var s=n[c];isValidOrigin(s)?isSrcChipAlreadyExists(s,"img-src-chip-content")&&""!=s&&(imgSrcChipData.push(s),srcChipConversion(imgSrcChipData,"img-src-chip-content","#txt-imgsrc")):(e=e+s+" ",$("#txt-imgsrc").parent().next().html(window.Server.App.Localization.CSPDirectiveValidation))}setTimeout(function(){$("#txt-imgsrc").val(e.trim())},100)}}}),$(document).on("paste","#txt-connectsrc",function(t){if($(this).closest("#connect-src-content").hasClass("src-disabled"))t.preventDefault();else{var e="",n=t.originalEvent.clipboardData.getData("Text").trim().split(/[\s,;\r?\n]+/);if(1<n.length){for(var c=0;c<n.length;c++){var s=n[c];isValidOrigin(s)?isSrcChipAlreadyExists(s,"connect-src-chip-content")&&""!=s&&(connectSrcChipData.push(s),srcChipConversion(connectSrcChipData,"connect-src-chip-content","#txt-connectsrc")):(e=e+s+" ",$("#txt-connectsrc").parent().next().html(window.Server.App.Localization.CSPDirectiveValidation))}setTimeout(function(){$("#txt-connectsrc").val(e.trim())},100)}}}),$(document).on("paste","#txt-framesrc",function(t){if($(this).closest("#frame-src-content").hasClass("src-disabled"))t.preventDefault();else{var e="",n=t.originalEvent.clipboardData.getData("Text").trim().split(/[\s,;\r?\n]+/);if(1<n.length){for(var c=0;c<n.length;c++){var s=n[c];isValidOrigin(s)?isSrcChipAlreadyExists(s,"frame-src-chip-content")&&""!=s&&(frameSrcChipData.push(s),srcChipConversion(frameSrcChipData,"frame-src-chip-content","#txt-framesrc")):(e=e+s+" ",$("#txt-framesrc").parent().next().html(window.Server.App.Localization.CSPDirectiveValidation))}setTimeout(function(){$("#txt-framesrc").val(e.trim())},100)}}}),$(document).on("paste","#txt-frameancestors",function(t){if($(this).closest("#frame-ancestors-content").hasClass("src-disabled"))t.preventDefault();else{var e="",n=t.originalEvent.clipboardData.getData("Text").trim().split(/[\s,;\r?\n]+/);if(1<n.length){for(var c=0;c<n.length;c++){var s=n[c];isValidOrigin(s)?isSrcChipAlreadyExists(s,"frame-ancestors-chip-content")&&""!=s&&(frameAncestorsChipData.push(s),srcChipConversion(frameAncestorsChipData,"frame-ancestors-chip-content","#txt-frameancestors")):(e=e+s+" ",$("#txt-frameancestors").parent().next().html(window.Server.App.Localization.CSPDirectiveValidation))}setTimeout(function(){$("#txt-frameancestors").val(e.trim())},100)}}}),$(document).on("click","#update-csp-settings",function(){var t,e="",n=[],c=[],s=[],i=[],r=[],a=[],o=[];""==$(".style-src-validation").text()&&""==$(".script-src-validation").text()&&""==$(".font-src-validation").text()&&""==$(".img-src-validation").text()&&""==$(".connect-src-validation").text()&&""==$(".frame-src-validation").text()&&""==$(".frame-ancestors-validation").text()&&(null!=(t=document.getElementById("style-src-chip-content").ej2_instances)&&null==(n=t[0].chips)&&(n=[]),null!=(t=document.getElementById("script-src-chip-content").ej2_instances)&&null==(c=t[0].chips)&&(c=[]),null!=(t=document.getElementById("font-src-chip-content").ej2_instances)&&null==(s=t[0].chips)&&(s=[]),null!=(t=document.getElementById("img-src-chip-content").ej2_instances)&&null==(i=t[0].chips)&&(i=[]),null!=(t=document.getElementById("connect-src-chip-content").ej2_instances)&&null==(r=t[0].chips)&&(r=[]),null!=(t=document.getElementById("frame-src-chip-content").ej2_instances)&&null==(a=t[0].chips)&&(a=[]),null!=(t=document.getElementById("frame-ancestors-chip-content").ej2_instances)&&null==(o=t[0].chips)&&(o=[]),e=$("#enable-csp").is(":checked")?{EnableCSP:$("#enable-csp").is(":checked"),StyleSource:n.toString(),ScriptSource:c.toString(),FontSource:s.toString(),ImageSource:i.toString(),ConnectSource:r.toString(),FrameSource:a.toString(),frameAncestor:o.toString()}:{EnableCors:$("#enable-cors").is(":checked")},t={SettingsKey:SettingsScopes.Security,ContentSecurityPolicy:e},$.ajax({type:"POST",url:updateCSPSettingsUrl,data:{systemSettingsData:JSON.stringify(t)},beforeSend:showWaitingPopup($("#server-app-container")),success:function(t){t.status?successToast(window.Server.App.Localization.UpdateSettingsSuccess,7e3):(warningToast(null!=t.permissionDenied&&t.permissionDenied?window.Server.App.Localization.PermissionWarningAlert:window.Server.App.Localization.SettingsWarningAlert,null!=t.permissionDenied&&t.permissionDenied?null:t.message,null,window.Server.App.Localization.CorsSettings),$(".error-message, .success-message").css("display","none")),hideWaitingPopup($("#server-app-container"))}}))}),$(document).on("click","#update-x-frame-options-settings",function(){var t=$("#x-frame").is(":checked");$.ajax({type:"POST",url:updateXFrameHeaderSettingsUrl,data:{systemSettingValue:t,key:"IsXFrameOptionsEnabled"},beforeSend:showWaitingPopup($("#server-app-container")),success:function(t){t.status?successToast(window.Server.App.Localization.UpdateSettingsSuccess,7e3):(warningToast(null!=t.permissionDenied&&t.permissionDenied?window.Server.App.Localization.PermissionWarningAlert:window.Server.App.Localization.SettingsWarningAlert,null!=t.permissionDenied&&t.permissionDenied?null:t.message,null,window.Server.App.Localization.SecuritySettings),$(".error-message, .success-message").css("display","none")),hideWaitingPopup($("#server-app-container"))}})});