!function(e){var d={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:h,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:h,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:h,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n?(?!hr|heading|lheading| {0,3}>|tag)[^\n]+)+)/,text:/^[^\n]+/};function o(e){this.tokens=[],this.tokens.links={},this.options=e||f.defaults,this.rules=d.normal,this.options.gfm&&(this.options.tables?this.rules=d.tables:this.rules=d.gfm)}d._label=/(?:\\[\[\]]|[^\[\]])+/,d._title=/(?:"(?:\\"|[^"]|"[^"\n]*")*"|'\n?(?:[^'\n]+\n?)*'|\([^()]*\))/,d.def=t(d.def).replace("label",d._label).replace("title",d._title).getRegex(),d.bullet=/(?:[*+-]|\d+\.)/,d.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,d.item=t(d.item,"gm").replace(/bull/g,d.bullet).getRegex(),d.list=t(d.list).replace(/bull/g,d.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+d.def.source+")").getRegex(),d._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b",d.html=t(d.html).replace("comment",/<!--[\s\S]*?-->/).replace("closed",/<(tag)[\s\S]+?<\/\1>/).replace("closing",/<tag(?:"[^"]*"|'[^']*'|\s[^'"\/>\s]*)*?\/?>/).replace(/tag/g,d._tag).getRegex(),d.paragraph=t(d.paragraph).replace("hr",d.hr).replace("heading",d.heading).replace("lheading",d.lheading).replace("tag","<"+d._tag).getRegex(),d.blockquote=t(d.blockquote).replace("paragraph",d.paragraph).getRegex(),d.normal=g({},d),d.gfm=g({},d.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),d.gfm.paragraph=t(d.paragraph).replace("(?!","(?!"+d.gfm.fences.source.replace("\\1","\\2")+"|"+d.list.source.replace("\\1","\\3")+"|").getRegex(),d.tables=g({},d.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),o.rules=d,o.lex=function(e,t){return new o(t).lex(e)},o.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},o.prototype.token=function(e,t){var a,n,i,s,l,r,o,p;for(e=e.replace(/^ +$/gm,"");e;)if((n=this.rules.newline.exec(e))&&(e=e.substring(n[0].length),1<n[0].length)&&this.tokens.push({type:"space"}),n=this.rules.code.exec(e))e=e.substring(n[0].length),n=n[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?n:n.replace(/\n+$/,"")});else if(n=this.rules.fences.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"code",lang:n[2],text:n[3]||""});else if(n=this.rules.heading.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"heading",depth:n[1].length,text:n[2]});else if(t&&(n=this.rules.nptable.exec(e))){for(e=e.substring(n[0].length),s={type:"table",header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3].replace(/\n$/,"").split("\n")},r=0;r<s.align.length;r++)/^ *-+: *$/.test(s.align[r])?s.align[r]="right":/^ *:-+: *$/.test(s.align[r])?s.align[r]="center":/^ *:-+ *$/.test(s.align[r])?s.align[r]="left":s.align[r]=null;for(r=0;r<s.cells.length;r++)s.cells[r]=s.cells[r].split(/ *\| */);this.tokens.push(s)}else if(n=this.rules.hr.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"hr"});else if(n=this.rules.blockquote.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"blockquote_start"}),n=n[0].replace(/^ *> ?/gm,""),this.token(n,t),this.tokens.push({type:"blockquote_end"});else if(n=this.rules.list.exec(e)){for(e=e.substring(n[0].length),p=1<(i=n[2]).length,this.tokens.push({type:"list_start",ordered:p,start:p?+i:""}),a=!1,o=(n=n[0].match(this.rules.item)).length,r=0;r<o;r++)l=(s=n[r]).length,~(s=s.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(l-=s.length,s=this.options.pedantic?s.replace(/^ {1,4}/gm,""):s.replace(new RegExp("^ {1,"+l+"}","gm"),"")),!this.options.smartLists||r===o-1||i===(l=d.bullet.exec(n[r+1])[0])||1<i.length&&1<l.length||(e=n.slice(r+1).join("\n")+e,r=o-1),l=a||/\n\n(?!\s*$)/.test(s),r!==o-1&&(a="\n"===s.charAt(s.length-1),l=l||a),this.tokens.push({type:l?"loose_item_start":"list_item_start"}),this.token(s,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(n=this.rules.html.exec(e))e=e.substring(n[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===n[1]||"script"===n[1]||"style"===n[1]),text:n[0]});else if(t&&(n=this.rules.def.exec(e)))e=e.substring(n[0].length),n[3]&&(n[3]=n[3].substring(1,n[3].length-1)),p=n[1].toLowerCase(),this.tokens.links[p]||(this.tokens.links[p]={href:n[2],title:n[3]});else if(t&&(n=this.rules.table.exec(e))){for(e=e.substring(n[0].length),s={type:"table",header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3].replace(/(?: *\| *)?\n$/,"").split("\n")},r=0;r<s.align.length;r++)/^ *-+: *$/.test(s.align[r])?s.align[r]="right":/^ *:-+: *$/.test(s.align[r])?s.align[r]="center":/^ *:-+ *$/.test(s.align[r])?s.align[r]="left":s.align[r]=null;for(r=0;r<s.cells.length;r++)s.cells[r]=s.cells[r].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(s)}else if(n=this.rules.lheading.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"heading",depth:"="===n[2]?1:2,text:n[1]});else if(t&&(n=this.rules.paragraph.exec(e)))e=e.substring(n[0].length),this.tokens.push({type:"paragraph",text:"\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1]});else if(n=this.rules.text.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"text",text:n[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var a={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:h,tag:/^<!--[\s\S]*?-->|^<\/?[a-zA-Z0-9\-]+(?:"[^"]*"|'[^']*'|\s[^<'">\/\s]*)*?\/?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^_([^\s_](?:[^_]|__)+?[^\s_])_\b|^\*((?:\*\*|[^*])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`]?)\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:h,text:/^[\s\S]+?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};function n(e,t){if(this.options=t||f.defaults,this.links=e,this.rules=a.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=a.breaks:this.rules=a.gfm:this.options.pedantic&&(this.rules=a.pedantic)}function i(e){this.options=e||{}}function s(){}function p(e){this.tokens=[],this.token=null,this.options=e||f.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function c(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function r(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function t(a,e){return a=a.source,e=e||"",{replace:function(e,t){return t=(t=t.source||t).replace(/(^|[^\[])\^/g,"$1"),a=a.replace(e,t),this},getRegex:function(){return new RegExp(a,e)}}}function l(e,t){return u[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?u[" "+e]=e+"/":u[" "+e]=e.replace(/[^/]*$/,"")),e=u[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}a._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,a._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,a.autolink=t(a.autolink).replace("scheme",a._scheme).replace("email",a._email).getRegex(),a._inside=/(?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]]|\](?=[^\[]*\]))*/,a._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,a.link=t(a.link).replace("inside",a._inside).replace("href",a._href).getRegex(),a.reflink=t(a.reflink).replace("inside",a._inside).getRegex(),a.normal=g({},a),a.pedantic=g({},a.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),a.gfm=g({},a.normal,{escape:t(a.escape).replace("])","~|])").getRegex(),url:t(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("email",a._email).getRegex(),_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:t(a.text).replace("]|","~]|").replace("|","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|").getRegex()}),a.breaks=g({},a.gfm,{br:t(a.br).replace("{2,}","*").getRegex(),text:t(a.gfm.text).replace("{2,}","*").getRegex()}),n.rules=a,n.output=function(e,t,a){return new n(t,a).output(e)},n.prototype.output=function(e){for(var t,a,n,i,s="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),s+=i[1];else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),n="@"===i[2]?"mailto:"+(a=c(this.mangle(i[1]))):a=c(i[1]),s+=this.renderer.link(n,null,a);else if(!this.inLink&&(i=this.rules.url.exec(e)))i[0]=this.rules._backpedal.exec(i[0])[0],e=e.substring(i[0].length),n="@"===i[2]?"mailto:"+(a=c(i[0])):(a=c(i[0]),"www."===i[1]?"http://"+a:a),s+=this.renderer.link(n,null,a);else if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),e=e.substring(i[0].length),s+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):c(i[0]):i[0];else if(i=this.rules.link.exec(e))e=e.substring(i[0].length),this.inLink=!0,s+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if(i=(i=this.rules.reflink.exec(e))||this.rules.nolink.exec(e))e=e.substring(i[0].length),t=(i[2]||i[1]).replace(/\s+/g," "),(t=this.links[t.toLowerCase()])&&t.href?(this.inLink=!0,s+=this.outputLink(i,t),this.inLink=!1):(s+=i[0].charAt(0),e=i[0].substring(1)+e);else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),s+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),s+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),s+=this.renderer.codespan(c(i[2].trim(),!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),s+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),s+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),s+=this.renderer.text(c(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return s},n.prototype.outputLink=function(e,t){var a=c(t.href),t=t.title?c(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(a,t,this.output(e[1])):this.renderer.image(a,t,c(e[1]))},n.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},n.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,a="",n=e.length,i=0;i<n;i++)t=e.charCodeAt(i),a+="&#"+(t=.5<Math.random()?"x"+t.toString(16):t)+";";return a},i.prototype.code=function(e,t,a){var n;return this.options.highlight&&null!=(n=this.options.highlight(e,t))&&n!==e&&(a=!0,e=n),t?'<pre><code class="'+this.options.langPrefix+c(t,!0)+'">'+(a?e:c(e,!0))+"\n</code></pre>\n":"<pre><code>"+(a?e:c(e,!0))+"\n</code></pre>"},i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.prototype.html=function(e){return e},i.prototype.heading=function(e,t,a){return"<h"+t+' id="'+this.options.headerPrefix+a.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(e,t,a){var n=t?"ol":"ul";return"<"+n+(t&&1!==a?' start="'+a+'"':"")+">\n"+e+"</"+n+">\n"},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},i.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,t){var a=t.header?"th":"td";return(t.align?"<"+a+' style="text-align:'+t.align+'">':"<"+a+">")+e+"</"+a+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(e,t,a){if(this.options.sanitize){try{var n=decodeURIComponent(r(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return a}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return a}n='<a href="'+(e=this.options.baseUrl&&!m.test(e)?l(this.options.baseUrl,e):e)+'"';return t&&(n+=' title="'+t+'"'),n+=">"+a+"</a>"},i.prototype.image=function(e,t,a){e='<img src="'+(e=this.options.baseUrl&&!m.test(e)?l(this.options.baseUrl,e):e)+'" alt="'+a+'"';return t&&(e+=' title="'+t+'"'),e+=this.options.xhtml?"/>":">"},i.prototype.text=function(e){return e},s.prototype.strong=s.prototype.em=s.prototype.codespan=s.prototype.del=s.prototype.text=function(e){return e},s.prototype.link=s.prototype.image=function(e,t,a){return""+a},s.prototype.br=function(){return""},p.parse=function(e,t){return new p(t).parse(e)},p.prototype.parse=function(e){this.inline=new n(e.links,this.options),this.inlineText=new n(e.links,g({},this.options,{renderer:new s})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},p.prototype.next=function(){return this.token=this.tokens.pop()},p.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},p.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},p.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,r(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":for(var e,t,a="",n="",i="",s=0;s<this.token.header.length;s++)i+=this.renderer.tablecell(this.inline.output(this.token.header[s]),{header:!0,align:this.token.align[s]});for(a+=this.renderer.tablerow(i),s=0;s<this.token.cells.length;s++){for(e=this.token.cells[s],i="",t=0;t<e.length;t++)i+=this.renderer.tablecell(this.inline.output(e[t]),{header:!1,align:this.token.align[t]});n+=this.renderer.tablerow(i)}return this.renderer.table(a,n);case"blockquote_start":for(n="";"blockquote_end"!==this.next().type;)n+=this.tok();return this.renderer.blockquote(n);case"list_start":for(var n="",a=this.token.ordered,l=this.token.start;"list_end"!==this.next().type;)n+=this.tok();return this.renderer.list(n,a,l);case"list_item_start":for(n="";"list_item_end"!==this.next().type;)n+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(n);case"loose_item_start":for(n="";"list_item_end"!==this.next().type;)n+=this.tok();return this.renderer.listitem(n);case"html":a=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(a);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};var u={},m=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function h(){}function g(e){for(var t,a,n=1;n<arguments.length;n++)for(a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}function f(e,a,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(n||"function"==typeof a){n||(n=a,a=null);var i,s=(a=g({},f.defaults,a||{})).highlight,t=0;try{i=o.lex(e,a)}catch(e){return n(e)}var l=i.length,r=function(t){if(t)return a.highlight=s,n(t);var e;try{e=p.parse(i,a)}catch(e){t=e}return a.highlight=s,t?n(t):n(null,e)};if(!s||s.length<3)return r();if(delete a.highlight,!l)return r();for(;t<i.length;t++)!function(a){"code"!==a.type?--l||r():s(a.text,a.lang,function(e,t){return e?r(e):null==t||t===a.text?--l||r():(a.text=t,a.escaped=!0,void(--l||r()))})}(i[t])}else try{return a=a&&g({},f.defaults,a),p.parse(o.lex(e,a),a)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(a||f.defaults).silent)return"<p>An error occurred:</p><pre>"+c(e.message+"",!0)+"</pre>";throw e}}h.exec=h,f.options=f.setOptions=function(e){return g(f.defaults,e),f},f.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1,baseUrl:null},f.Parser=p,f.parser=p.parse,f.Renderer=i,f.TextRenderer=s,f.Lexer=o,f.lexer=o.lex,f.InlineLexer=n,f.inlineLexer=n.output,f.parse=f,"undefined"!=typeof module&&"object"==typeof exports?module.exports=f:"function"==typeof define&&define.amd?define(function(){return f}):e.marked=f}(this||("undefined"!=typeof window?window:global));var emailContent,TemplateInputName,alertChange=1,actionType="Edit",subject="Hello",isCreateNewTemplateDialogAdded=!1,isDeleteDialogBinded=!1;function selectSubjectVariables(e){var t=[],a=e.match(/{:(.*?)}/g);if(null!=a)for(i=0;i<a.length;i++)"{:organizationname}"===a[i].toLowerCase()?t.push("Organization Name"):"{:schedulename}"===a[i].toLowerCase()?t.push("Schedule Name"):"{:dashboardname}"===a[i].toLowerCase()?t.push("Dashboard Name"):"{:date}"===a[i].toLowerCase()?t.push("Date"):"{:time}"===a[i].toLowerCase()&&t.push("Time"),$("#email-subject-variables").selectpicker("val",t)}function deleteTemplateConfirmation(t,a){var e,n,i='<span class="dialog-header-with-icon"><span class ="dialog-header-title"><i class="su su-delete dialog-header-icon"></i>&nbsp;&nbsp;'+window.Server.App.Localization.Delete+"</span></span>",s=[{click:function(e){deleteTemplate(t,a)},buttonModel:{cssClass:"app-btn-danger",content:window.Server.App.Localization.YesButton}},{click:function(e){n.hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.NoButton}}],l=window.Server.App.Localization.DeleteDialogContent;isDeleteDialogBinded?((n=document.getElementById("delete-template-dialog").ej2_instances[0]).header=i,n.content=l,n.buttons=s,n.show()):((e=document.createElement("div")).setAttribute("id","delete-template-dialog"),document.getElementById("server-app-container").appendChild(e),(n=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"450px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:i,showCloseIcon:!0,content:l,buttons:s})).appendTo(e),isDeleteDialogBinded=!0)}function deleteTemplate(e,t){$.ajax({type:"POST",url:deleteTemplateUrl,data:{id:e,templateId:t},success:function(e){e.result?(successToast(window.Server.App.Localization.DeleteEmailTemplate,7e3),$("#specificEmailTemplateListGrid").data("ejGrid").refreshContent()):warningToast(window.Server.App.Localization.DeleteEmailTemplatefailed),document.getElementById("delete-template-dialog").ej2_instances[0].hide()}})}function createNewTemplate(t,e){var a,n,i='<span class ="dialog-header-title">'+(t?window.Server.App.Localization.Addtemplate:window.Server.App.Localization.CopyTemplate)+"</span>",s=[{click:function(e){copyTemplate(t)},buttonModel:{isPrimary:!0,cssClass:"app-btn-primary add-template",content:window.Server.App.Localization.SaveButton}},{click:function(e){n.hide(),$("#copy-template-list").html("").selectpicker("refresh"),$("#templateName").val(""),$(".input-container").removeClass("has-error"),$(".templateAdd-validation-messages").css("display","none"),$(".add-template").attr("disabled",!0)},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CancelButton}}];isCreateNewTemplateDialogAdded?((n=document.getElementById("create-template-dialog").ej2_instances[0]).header=i,n.buttons=s,n.show()):((a=document.createElement("div")).setAttribute("id","create-template-dialog"),document.getElementById("server-app-container").appendChild(a),isCreateNewTemplateDialogAdded=!0,(n=new ejs.popups.Dialog({header:i,content:document.getElementById("template-add-dialog-wrapper"),showCloseIcon:!0,width:"350px",height:"auto",isModal:!0,visible:!1,closeOnEscape:!0,animationSettings:{effect:"Zoom"},beforeClose:beforeDialogClose,open:onAddTemplateDailogOpen,buttons:s})).appendTo("#create-template-dialog"),n.show(),isCreateNewTemplateDialogAdded=!0),e?$("[data-id='copy-template-list']").attr("disabled",!0):$("[data-id='copy-template-list']").attr("disabled",!1),document.getElementById("dialog-container").style.display="block",document.getElementById("mark-default-division").style.display="block",document.getElementById("template-add-dialog-wrapper").style.display="block"}function beforeDialogClose(){$("#copy-template-list").html("").selectpicker("refresh"),$("#templateName").val(""),$(".input-container").removeClass("has-error"),$(".templateAdd-validation-messages").css("display","none"),$(".add-template").attr("disabled",!0),$("#copy-template-list").attr("disabled",!1)}function onAddTemplateDailogOpen(){$(".add-template").attr("disabled",!0)}function copyTemplate(t){$(".add-template").attr("disabled",!0);var e=$("#copy-template-list option:selected").val(),a=$("#copy-email-template").attr("data-template-id"),n=$("#templateName").val();$.ajax({type:"POST",url:createNewTemplateURL,data:{id:e,templateId:a,name:n},success:function(e){e.result?(successToast(t?window.Server.App.Localization.AddTemplateSuccess:window.Server.App.Localization.CopyTemplateSuccess,7e3),$("#specificEmailTemplateListGrid").data("ejGrid").refreshContent()):warningToast(t?window.Server.App.Localization.FailedToAddTemplate:window.Server.App.Localization.FailedToCopyTemplate),document.getElementById("create-template-dialog").ej2_instances[0].hide(),$("#copy-template-list").empty(),$(".add-template").attr("disabled",!1)}})}function isTemplateNameAlreadyExist(i){var s=$("#copy-email-template").attr("data-template-id"),e=$("#Template-name-input").attr("data-template-id"),l=void 0!==TemplateInputName?TemplateInputName.toLowerCase():TemplateInputName;return $.ajax({type:"GET",url:specificEventListURL,data:{templateId:void 0!==s?s:e},success:function(e){if(null!=e.result)for(var t=e.result,a=0;a<t.length;a++)if(void 0!==s){if(t[a].EmailTemplateName.toLowerCase()!==l&&t[a].EmailTemplateName.toLowerCase()===i.toLowerCase())return $(".input-container").addClass("has-error"),$(".templateAdd-validation-messages").css("display","block"),$(".templateAdd-validation-messages").html(window.Server.App.Localization.TemplateNameAlreadyExist),$(".add-template").attr("disabled",!0),!0;var n=$("#copy-template-list option:selected").val();$("#templateName").val(),$(".input-container").removeClass("has-error"),$(".templateAdd-validation-messages").css("display","none"),""!==n&&void 0!==n&&$(".add-template").attr("disabled",!1)}else{if(t[a].EmailTemplateName.toLowerCase()!==l&&t[a].EmailTemplateName.toLowerCase()===i.toLowerCase())return $(".name-text").addClass("has-error"),$("#name-content-validation").css("display","block"),$("#name-content-validation").html(window.Server.App.Localization.TemplateNameAlreadyExist),!0;$(".name-text").removeClass("has-error"),$("#name-content-validation").css("display","none")}return!1}}),!1}function isValidTemplateName(e){return(pattern=/^[a-zA-Z0-9\s'-]+$/).test(e)}function fnOnUserGridActionBegin(e){isFirstRequest=!0;var t=$("#search-template").val().trim(),t=(this.model.query._params.push({key:"searchKey",value:t}),createLoader("specificEmailTemplateListGrid"));this.element.ejWaitingPopup({template:$("#"+t)})}function fnOnUserGridLoad(e){e.model.dataSource.adaptor=new ej.UrlAdaptor,e.model.enableTouch=!1}function rowBound(){isFirstRequest=isFirstRequest&&!1}$(document).ready(function(){emailBody;var e=(ejdashboard||ejs).richtexteditor;customEmailEditRTE=new e.RichTextEditor({height:"410px",cssClass:"bbi-designer",formatter:new e.MarkdownFormatter({listTags:{OL:"1., 2., 3."}}),toolbarSettings:{items:["Bold","Italic","|","Formats","OrderedList","UnorderedList","|","CreateLink","Image","|",{tooltipText:"Preview",template:'<button id="preview-code" class="e-tbar-btn e-control e-btn e-icon-btn"><span class="e-btn-icon su su-preview e-icons"></span></button>'},{tooltipText:"Reset",template:'<button id="reset-code" class="e-tbar-btn e-control e-btn e-icon-btn"><span class="e-btn-icon su su-reset e-icons"></span></button>'}]},editorMode:"Markdown",created:function(){textArea=customEmailEditRTE.contentModule.getEditPanel(),mdsource=document.getElementById("preview-code"),mdResetSource=document.getElementById("reset-code"),mdsource.addEventListener("click",function(e){var t,a,n;t=ejdashboard||ejs,a=customEmailEditRTE.getID()+"html-preview",n=customEmailEditRTE.element.querySelector("#"+a),mdsource.classList.contains("e-active")?(mdsource.classList.remove("e-active"),mdsource.parentElement.title="Preview",customEmailEditRTE.enableToolbarItem(customEmailEditRTE.toolbarSettings.items),textArea.style.display="block",n.style.display="none"):(mdsource.classList.add("e-active"),customEmailEditRTE.disableToolbarItem(customEmailEditRTE.toolbarSettings.items),n||((n=t.base.createElement("div",{className:"e-content e-pre-source"})).id=a,textArea.parentNode.appendChild(n)),textArea.style.display="none",n.style.display="block",n.innerHTML=marked(customEmailEditRTE.contentModule.getEditPanel().value),mdsource.parentElement.title="Code View"),e.currentTarget.classList.contains("e-active")?customEmailEditRTE.disableToolbarItem(["Bold","Italic","OrderedList","UnorderedList","CreateLink","Image","Formats","Undo","Redo"]):customEmailEditRTE.enableToolbarItem(["Bold","Italic","OrderedList","UnorderedList","CreateLink","Image","Formats","Undo","Redo"])}),mdResetSource.addEventListener("click",function(){customEmailEditRTE.value=null,customEmailEditRTE.value=emailBody})}}),$(document).on("keyup","#email-body-container_editable-content",function(){$("#UpdateEmail-Configuration");var e=$("#email-body-container_editable-content").val().trim();""==(e=null==e?null:e.replace(/(<([^>]+)>)/gi,""))||null==e?(customEmailEditRTE.disableToolbarItem(customEmailEditRTE.toolbarSettings.items),$("#email-content-validation").html(window.Server.App.Localization.ScheduleMessageValidator),$("#email-content-validation").addClass("email-error")):(customEmailEditRTE.enableToolbarItem(customEmailEditRTE.toolbarSettings.items),$("#email-content-validation").html(""),$("#disclaimer-content-validation").css("display","none"),$("#email-content-validation").removeClass("email-error"))}),$(document).on("click","#reset-code",function(){customEmailEditRTE.enableToolbarItem(customEmailEditRTE.toolbarSettings.items),$("#email-content-validation").html(""),$("#disclaimer-content-validation").css("display","none"),$("#email-content-validation").removeClass("email-error")}),$(document).on("click","#copy-template, #copy-email-template",function(){var n=$(this).attr("data-unique-id"),e=$(this).attr("data-template-id"),i="copy-email-template"==$(this).attr("id"),t="copy-template"==$(this).attr("id"),s=(createNewTemplate(i,t),$("#template-add-dialog").attr("data-unique-id",n),$("#template-add-dialog").attr("data-template-id",e),"");$.ajax({type:"GET",url:specificEventListURL,data:{templateId:e},success:function(e){if(null!=e.result){for(var t=e.result,a=0;a<t.length;a++)i?s+='<option value="'+t[a].Id+'">'+t[a].EmailTemplateName+"</option>":t[a].Id==n&&(s+='<option selected="selected" disabled value="'+t[a].Id+'">'+t[a].EmailTemplateName+"</option>");$("#copy-template-list").html(""),i?($("#copy-template-list").html(s).selectpicker("refresh"),$("#copy-template-list").selectpicker("val",""),$(".filter-option").text("Select a template")):($("#copy-template-list").html(s).selectpicker("refresh"),$("#copy-template-list").attr("disabled",!0))}}})}),customEmailEditRTE.value=emailBody,customEmailEditRTE.appendTo("#email-editor-panel #email-body-container"),$("#email-body-container_view").css("height","220px"),TemplateInputName=$("#Template-name-input").val()}),$(document).on("click","#preview-code",function(){$(".su-reset").hasClass("disable-reset")?($("#reset-code").attr("disabled",!1),$(".su-reset").removeClass("disable-reset")):($(".su-reset").addClass("disable-reset"),$("#reset-code").attr("disabled",!0))}),$(document).on("click",".delete-template",function(){var e=$(this).attr("data-template-id");deleteTemplateConfirmation($(this).attr("data-unique-id"),e)}),$(document).on("click",".markasdefault",function(){var e=$(this).attr("data-unique-id"),t=$(this).attr("data-template-id");$.ajax({type:"POST",url:markAsDefaultUrl,data:{id:e,templateId:t},success:function(e){e.result?(successToast(window.Server.App.Localization.MarkTemplateAsDefault,7e3),$("#specificEmailTemplateListGrid").data("ejGrid").refreshContent()):warningToast(window.Server.App.Localization.MarkTemplateAsDefaultFailed)}})}),$(document).on("keyup focusout","#disclaimer-content-input",function(e){(""!=$(this).val().trim()||""!=$("#disclaimer-content-input").val()&&$("#disclaimer-content-input").val().length<$("#disclaimer-content-input").attr("data-maxlength"))&&($(".disclaimer-content-text").removeClass("has-error"),$("#disclaimer-content-validation").css("display","none"))}),$(document).on("focusout","#subject-input",function(e){(""!=$(this).val().trim()||""!=$("#subject-input").val()&&$("#subject-input").val().length<$("#subject-input").attr("data-maxlength"))&&($(".subject-text").removeClass("has-error"),$("#subject-content-validation").css("display","none"))}),$(document).on("focusout","#header-content-input",function(e){(""!=$(this).val().trim()||""!=$("#header-content-input").val()&&$("#header-content-input").val().length<$("#header-content-input").attr("data-maxlength"))&&($(".header-content-text").removeClass("has-error"),$("#header-content-validation").css("display","none"))}),$(document).ready(function(){$(document).on("click","#cancel-email-template",function(){window.location.href=window.location.href})}),$(document).on("keyup focusout","#Template-name-input",function(e){""===$(this).val().trim()?($(".name-text").addClass("has-error"),$("#name-content-validation").css("display","block"),$("#name-content-validation").html("Template name should not be empty")):isValidTemplateName($("#Template-name-input").val().trim())?isTemplateNameAlreadyExist($("#Template-name-input").val().trim()):($(".name-text").addClass("has-error"),$("#name-content-validation").css("display","block"),$("#name-content-validation").html("Template name is invalid"))}),$(document).on("change","#copy-template-list",function(){""!==document.getElementById("copy-template-list").value&&(""===$("#templateName").val().trim()?($(".input-container").addClass("has-error"),$(".templateAdd-validation-messages").css("display","block"),$(".templateAdd-validation-messages").html(window.Server.App.Localization.TemplateNameEmpty),$(".add-template").attr("disabled",!0)):isTemplateNameAlreadyExist($("#templateName").val().trim()))}),$(document).on("keyup focusout","#templateName",function(){$(".add-template").attr("disabled",!0),""===$("#templateName").val().trim()?($(".input-container").addClass("has-error"),$(".templateAdd-validation-messages").css("display","block"),$(".templateAdd-validation-messages").html(window.Server.App.Localization.TemplateNameEmpty)):isValidTemplateName($("#templateName").val().trim())?isTemplateNameAlreadyExist($("#templateName").val().trim()):($(".input-container").addClass("has-error"),$(".templateAdd-validation-messages").css("display","block"),$(".templateAdd-validation-messages").html(window.Server.App.Localization.TemplateNameInvalid))}),$(document).on("click","#UpdateEmail-Configuration",function(){var e=$("#email-body-container_editable-content").val().trim();""==(e=null==e?null:e.replace(/(<([^>]+)>)/gi,""))||null==e?($("#email-content-validation").html(window.Server.App.Localization.EmailBodyEmptyValidation),$("#email-content-validation").addClass("email-error")):""==$("#disclaimer-content-input").val()||null==$("#disclaimer-content-input").val()?($(".disclaimer-content-text").addClass("has-error"),$("#disclaimer-content-validation").css("display","block"),$("#disclaimer-content-validation").html(window.Server.App.Localization.DisclaimerEmpty)):""===$("#subject-input").val().trim()?($(".subject-text").addClass("has-error"),$("#subject-content-validation").css("display","block")):null!=$("#subject-input").val()&&$("#subject-input").val().length>$("#subject-input").attr("data-maxlength")?($(".subject-text").addClass("has-error"),$("#subject-content-validation").css("display","block"),$("#subject-content-validation").html(window.Server.App.Localization.CharacterExceedMessage.format($("#subject-input").attr("data-maxlength")))):null!=$("#header-content-input").val()&&$("#header-content-input").val().length>$("#header-content-input").attr("data-maxlength")?($(".header-content-text").addClass("has-error"),$("#header-content-validation").css("display","block"),$("#header-content-validation").html(window.Server.App.Localization.CharacterExceedMessage.format($("#header-content-input").attr("data-maxlength")))):null!=$("#disclaimer-content-input").val()&&$("#disclaimer-content-input").val().length>$("#disclaimer-content-input").attr("data-maxlength")?($(".disclaimer-content-text").addClass("has-error"),$("#disclaimer-content-validation").css("display","block"),$("#disclaimer-content-validation").html(window.Server.App.Localization.CharacterExceedMessage.format($("#disclaimer-content-input").attr("data-maxlength")))):""===$("#Template-name-input").val().trim()?($(".name-text").addClass("has-error"),$("#name-content-validation").css("display","block"),$("#name-content-validation").html(window.Server.App.Localization.TemplateNameEmpty)):isValidTemplateName($("#Template-name-input").val().trim())?$(".name-text").hasClass("has-error")||(e={EmailTemplateName:$("#Template-name-input").val().trim(),MailBody:$("#email-body-container_editable-content").val(),IsEnabled:$("#enable-custom-template").is(":checked"),DisclaimerContent:$("#disclaimer-content-input").val(),HeaderContent:$("#header-content-input").val(),Subject:$("#subject-input").val(),SendEmailAsHTML:$("#sendemailashtml").is(":checked"),TemplateId:$("#Template-name-input").attr("data-template-id"),Id:$("#Template-name-input").attr("data-unique-id")},$.ajax({type:"POST",url:updateEmailConfigureDataUrl,data:{emailConfigureData:e},success:function(e){e?(successToast(window.Server.App.Localization.UpdateEmailConfigurationSuccess,7e3),TemplateInputName=$("#Template-name-input").val().trim()):warningToast(window.Server.App.Localization.EmailConfigurationWarningAlert)}})):($(".name-text").addClass("has-error"),$("#name-content-validation").css("display","block"),$("#name-content-validation").html(window.Server.App.Localization.TemplateNameInvalid))}),$(document).on(".e-row",function(){var e,t;0<$(this).find(".context-menu").length&&(e=$(this).offset().top+$(this).outerHeight(!0)/2-$("#email-configure-header-section").outerHeight(!0)-$("#specifc-templates").outerHeight(!0),$(window).height()-$(this).offset().top-$(this).outerHeight(!0)/2<=(t=$(this).find(".su-options").outerHeight(!0)))&&t<=e&&$(this).find(".context-menu").removeClass("dropdown").addClass("dropup")});