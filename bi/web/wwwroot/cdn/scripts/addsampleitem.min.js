var isSampleDashboardAdded,currentCategory="";function addSampleDashboard(t){var o=t.attr("data-category-name"),e=t.attr("data-sample-name"),a=t.attr("data-sample-description"),s=t.attr("data-sample-filename");t.hide(),t.parent().append($("<div class='loader-blue loader-icon loader-gif' id='add-sample'><svg class='circular'><circle class='path' cx='27' cy='27' r='10' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg></div>")),$.ajax({type:"POST",url:addSampleDashboardUrl,data:{itemName:e,description:a,fileName:s,categoryName:o},success:function(e){var a;t.show(),t.siblings(".loader-gif").remove(),$("#progress-alert-container").css("z-index",$("#sample_item_dialog").css("z-index")+1),e.Status?(isSampleDashboardAdded=!0,a=window.Server.App.Localization.AddSampleDashboardSuccess.format('<a target="_blank" href="'+dashboardBaseUrl+"/"+e.ItemDatails.DashboardId+"/"+o+"/"+e.ItemDatails.Name+'?showmydashboards=1"> '+e.ItemDatails.Name+"</a>"),successToast(a,7e3,e.ItemDatails.DashboardId),0<parseInt(dashboardItemCount)&&"function"==typeof RefreshCategorySection&&(userDashboardsCount=e.UserDashboardsCount,sharableDashboardsCount=e.SharedDashboardCount,draftDashboardCount=e.DraftDashboardCount,RefreshCategorySection(e.ItemDatails.CategoryId),$("#dashboard-search-items").val(""))):parent.warningToast(window.Server.App.Localization.SampleDashboardWarningToast,e.Message,e.eTag,window.Server.App.Localization.SampleDashboardWarningToastHeader)}})}serverApp.controller("SampleListCtrl",["$scope",function(a){a.samples=[],a.orderList="",a.selectedCategory="",a.dummies=[],a.clone={},a.count=0,a.setFilterCategory=function(e){a.selectedCategory=e},a.filterByCategory=function(e){return a.selectedCategory?a.selectedCategory===e.Name:e},a.countFilterObjects=function(e,a){var t=0,o=!1,s=angular.element($("#samples")).scope(),r=s.selectedCategory,a=(0==Object.keys(e).length&&""!==a&&(angular.element(document.querySelector(".all-dashboard-count")).text("0"),angular.element(document.querySelector("li")).addClass("highlight-list-item"),s.selectedCategory=void 0),Object.keys(e).forEach(function(e){e==s.selectedCategory&&(o=!0)}),o||(angular.element(document.querySelector("li")).addClass("highlight-list-item"),s.selectedCategory=void 0),null==a||""==a?t=-1:angular.forEach(e,function(e,a){(null==r||r.toLowerCase()!=a.toLowerCase())&&null!=r&&""!=r||(t+=e.length)}),$(".sample-dashboard"));return null!=$(".list-group")&&null!=a&&(0==t?($(".sample-dashboard").addClass("remove-scroll"),$(".list-group").addClass("remove-scroll")):($(".sample-dashboard").hasClass("remove-scroll")&&$(".sample-dashboard").removeClass("remove-scroll"),$(".list-group").hasClass("remove-scroll")&&$(".list-group").removeClass("remove-scroll"))),$('[data-toggle="sample-dashboard-list-tooltip"]').tooltip({animation:!0,delay:{show:500},template:'<div class="tooltip sample-dashbrd-tooltip" role="tooltip" style="z-index: '+(getMaxZIndex()+1)+'"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}),t},a.getCategoryItemsCount=function(e,t){var o=0,s=0,r=angular.element(document.querySelector(".all-dashboard-count"));return angular.forEach(e,function(e,a){a==t&&(o=e.length),s+=e.length,r.text(s)}),r.text(s),o},a.createDummyArray=function(e){var t=[];a.clone!=e&&(a.count<=2&&a.count++,a.clone=e,angular.forEach(e,function(e,a){t.push({category:a,items:e,itemscount:e.length})}),t.sort(function(e,a){return e.itemscount<a.itemscount?1:-1}),1==a.count)&&(a.dummies=t)}}]),$(document).ready(function(){var e=angular.element("[ng-controller=SampleListCtrl]").scope(),a=(isSampleDashboardAdded=!1,1400<$(parent.window).width()&&$("#sample-item-container").addClass("sampleitems"),$(parent.window).width()<1400&&$("#sample-item-container").removeClass("sampleitems"),0);for(i=0;i<e.samples.length;i++)a+=e.samples[i].Dashboards.length;$(".all-dashboard-count").text(a),parent.hideWaitingPopup("sample-item-popup_wrapper")}),$(document).on("click",".sample-item-popup-close",function(e){(eDialog=parent.$("#sample-item-popup").data("ejDialog")).close(),$("#sample-item-popup iframe").attr("src",""),0<window.parent.location.href.indexOf("/dashboards")&&0===parseInt(parent.dashboardItemCount)&&isSampleDashboardAdded&&(parent.$("body").ejWaitingPopup("show"),parent.location.reload())}),$(document).on("click",".list-group-item",function(e){$(".list-group-item").removeClass("highlight-list-item"),$(this).addClass("highlight-list-item")}),$(document).on("click",".sample-add-button",function(e){addSampleDashboard($(this))});