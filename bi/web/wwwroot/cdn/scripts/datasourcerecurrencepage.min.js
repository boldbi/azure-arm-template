!function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min"],e):e()}(function(){var u,p,_;u=jQuery,(p=Syncfusion).widget({ejNumericTextbox:["ej.NumericTextbox","e-numerictextbox"],ejPercentageTextbox:["ej.PercentageTextbox","e-percentagetextbox"],ejCurrencyTextbox:["ej.CurrencyTextbox","e-currencytextbox"]},{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0,requireParser:!0},defaults:{width:"",height:"",value:null,name:null,htmlAttributes:{},minValue:-Number.MAX_VALUE,maxValue:Number.MAX_VALUE,incrementStep:1,decimalPlaces:0,validateOnType:!1,cssClass:"",enablePersistence:!1,showSpinButton:!0,locale:"en-US",enableStrictMode:!1,showRoundedCorner:!1,readOnly:!1,enabled:!0,enableRTL:!1,watermarkText:"",validationRules:null,validationMessage:null,groupSeparator:null,groupSize:null,positivePattern:null,negativePattern:null,change:null,focusIn:null,focusOut:null,create:null,destroy:null},dataTypes:{minValue:"number",maxValue:"number",incrementStep:"number",decimalPlaces:"number",showSpinButton:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",locale:"string",watermarkText:"string",cssClass:"string",readOnly:"boolean",enabled:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",validateOnType:"boolean",groupSeparator:"string"},observables:["value"],_setModel:function(e){var t,i=!1;for(t in e)switch(t){case"value":p.isNullOrUndefined(e.minValue)&&p.isNullOrUndefined(e.maxValue)?(this._setValue(e[t],!0),e[t]=this.model.value):(this.model.value=this._checkNumValue(e[t]),this._localizedFormat(),this._raiseChangeEvent(!0),i=!0);break;case"enableRTL":this._enableRTL(e[t]);break;case"width":this._setWidth(e[t]);break;case"height":this._setHeight(e[t]);break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[t],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[t],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"minValue":if(isNaN(e[t]))return;this.model.minValue=parseFloat(e[t].toFixed(this.model.decimalPlaces)),i=!0;break;case"maxValue":if(isNaN(e[t]))return;this.model.maxValue=parseFloat(e[t].toFixed(this.model.decimalPlaces)),i=!0;break;case"incrementStep":if(isNaN(e[t]))return;this.model.incrementStep=parseFloat(e[t].toFixed(this.model.decimalPlaces));break;case"enableStrictMode":this.model.enableStrictMode=e[t];break;case"showSpinButton":this._showSpin(e[t]);break;case"showRoundedCorner":this._roundedCorner(e[t]);break;case"locale":this.model.decimalPlaces=p.isNullOrUndefined(this._options.decimalPlaces)&&this.model.decimalPlaces===this.culture.numberFormat.decimals||-1===this._options.decimalPlaces?-1:this.model.decimalPlaces,this._setLocalize(e[t]),this._options.decimalPlaces=this.model.decimalPlaces,e[t]=this.model.locale;break;case"decimalPlaces":this._setDecimal(e[t]),p.isNullOrUndefined(this._options)&&(this._options={}),this._options.decimalPlaces=e[t];break;case"cssClass":this._setSkin(e[t]);break;case"readOnly":this._setReadOnly(e[t]);break;case"enabled":e[t]?this.enable():this.disable();break;case"watermarkText":p.isNullOrUndefined(this._options)||(this._options=[]),this._options.watermarkText=this.model.watermarkText=e[t],this._localizedLabels.watermarkText=this.model.watermarkText,this._changeWatermark(e[t]);break;case"htmlAttributes":this._addAttr(e[t]);break;case"groupSeparator":this._checkSeparator(e[t]),e[t]=this.model.groupSeparator;break;case"positivePattern":case"negativePattern":case"groupSize":this.model[t]=e[t],this._options[t]=e[t],this._initCustomValue(),e[t]=this.model[t],this._setValue(this.model.value,!0)}i&&(this._validateMinMaxValue(!0,!0),e.value=this.model.value,e.maxValue=this.model.maxValue,e.minValue=this.model.minValue,this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue),this.element.attr({"aria-valuemin":this.model.minValue,"aria-valuemax":this.model.maxValue,"aria-valuenow":this.model.value})),this._checkSeparator(this.model.groupSeparator),this.element.val(this._removeSeparator(this.model.value)),this._updateSeparator(),this._checkErrorClass()},_destroy:function(){this.wrapper&&(this.element.insertBefore(this.wrapper),this.wrapper.remove()),this._isWatermark&&this.element.removeAttr("placeholder"),this.element.val("").removeClass("e-input e-disable").empty(),this.element.removeAttr("disabled aria-disabled aria-valuemin aria-valuemax aria-valuenow aria-live"),this._cloneElement.attr("role")||this.element.removeAttr("role"),this.element.css("display","block")},_init:function(e){if(this._cloneElement=this.element.clone(),this._options=p.isNullOrUndefined(e)?{}:e,!this.element.is("input")||!this.element.is("input[type=text]")&&this.element.attr("type"))return this._destroy(),!1;this._isWatermark="placeholder"in document.createElement("input"),this.model.locale="en"==p.preferredCulture(this.model.locale).name?"en-US":p.preferredCulture(this.model.locale).name,this._localizedLabels=this._getLocalizedLabels(),this.culture=p.preferredCulture(this.model.locale),this._initCustomValue(),this._prevSeparator=null,this._checkSeparator(this.model.groupSeparator),this._checkAttribute(),this._renderControl(),this._setValues(),this._wireEvents(),this._initObjects(),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._updateSeparator(),e&&e.value!=_&&this._trigger("_change",{value:this.model.value})},_checkAttribute:function(){for(var e,t,i=["min","max","step","readonly","disabled","placeholder"],s=["minValue","maxValue","incrementStep","readOnly","enabled","watermarkText"],a=0;a<i.length;a++)e=this.element.attr(i[a]),t=s[a],p.isNullOrUndefined(e)||p.isNullOrUndefined(this._options)||!p.isNullOrUndefined(this._options[t])||("watermarkText"==t?this._options[t]=e:this.model[t]="disabled"!=t&&"readOnly"!=t?p.parseFloat(e,this.model.locale):"readOnly"==t?this.element.is("[readonly]"):!this.element.is("[disabled]"))},_addAttr:function(e){var s=this;u.map(e,function(e,t){var i=t.toLowerCase();"class"==i?s.wrapper.addClass(e):"accesskey"==i?s._hiddenInput.attr(t,e):"disabled"==i&&"disabled"==e?s.disable():"readonly"==i&&"readOnly"==e?s._setReadOnly(!0):("tabindex"==i?(s._hiddenInput.attr(t,e),s.element):"style"!=i&&"id"!=i&&p.isValidAttr(s.element[0],t)?s.element:s.wrapper).attr(t,e)})},_setValues:function(){this._id=this.element[0].id,this._textBox=this._hiddenInput[0],this._error=!1,this._timeout=null,this.isValidState=!0,this._allowkeyboard=!0,this._validateOnType=!1,this._focused=!1,this._startValue=0,"ej.CurrencyTextbox"===this.sfType&&this.model.minValue==-Number.MAX_VALUE&&(this.model.minValue=0),(p.isNullOrUndefined(this.model.decimalPlaces)||this.model.decimalPlaces<0)&&(this.model.decimalPlaces=("ej.CurrencyTextbox"===this.sfType?p.preferredCulture(this.model.locale).numberFormat.currency:p.preferredCulture(this.model.locale).numberFormat).decimals),this.model.minValue=parseFloat(this.model.minValue.toFixed(this.model.decimalPlaces)),this.model.maxValue=parseFloat(this.model.maxValue.toFixed(this.model.decimalPlaces)),this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue),p.isNullOrUndefined(this._options)||p.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),this._localizedLabelToModel(),this._localizedFormat(),this._validateMinMaxValue(!0),this._updateSymbol(this.model.locale),value=p.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(value)},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var e,t,i,s,a=this.model.validationRules;for(t in this.element.rules("add",a),e=(e=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),e.settings.messages[name]={},a)if(i=null,!p.isNullOrUndefined(a[t])){if(p.isNullOrUndefined(a.messages&&a.messages[t]))for(s in e.settings.messages[name][t]=u.validator.messages[t],this.model.validationMessage)t==s&&(i=this.model.validationMessage[t]);else i=a.messages[t];e.settings.messages[name][t]=null!=i?i:u.validator.messages[t]}},_renderControl:function(){this.wrapper=p.buildTag("span.e-widget e-pinch"),this.innerWrap=p.buildTag("span.e-in-wrap e-box "),this.wrapper.attr("style",this.element.attr("style")),"ej.NumericTextbox"===this.sfType?this.wrapper.addClass("e-numeric"):"ej.PercentageTextbox"===this.sfType?this.wrapper.addClass("e-percent"):"ej.CurrencyTextbox"===this.sfType&&this.wrapper.addClass("e-currency"),this.wrapper.append(this.innerWrap).insertAfter(this.element),this.innerWrap.append(this.element),this._hiddenInput=p.buildTag("input","",{},{type:"text"}).insertBefore(this.element),this._hiddenInput.attr("data-role","none"),this._hiddenInput[0].tabIndex=this.element[0].tabIndex,this._hiddenInput.attr("accesskey",this.element[0].accessKey),this.element[0].accessKey="",this._hiddenInput.css("display","block"),this.element.css("display","none"),this._isWatermark||(this._hiddenSpan=p.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this._localizedLabels.watermarkText),this._hiddenSpan.css("display","none"),this._on(this._hiddenSpan,"mousedown",this._focusIn),this._on(this._hiddenSpan,"mousewheel",this._mouseWheel),this._on(this._hiddenSpan,"DOMMouseScroll",this._mouseWheel)),this.model.name=null!=this.element.attr("name")?this.element.attr("name"):null!=this.model.name?this.model.name:this.element[0].id,null==this.element.attr("name")&&this.element.attr("name",this.model.name),this.element.addClass("e-input"),this.model.value=p.isNullOrUndefined(this.model.value)&&""!=this.element[0].value?this._checkNumValue(this.element[0].value):this._checkNumValue(this.model.value),this._hiddenInput.attr({value:this.model.value}).addClass("e-input"),this.element.attr({role:"spinbutton","aria-valuemin":this.model.minValue,"aria-valuemax":this.model.maxValue,"aria-valuenow":this.model.value,"aria-live":"assertive",value:this.model.value});var e=u('<span class="e-select"><span class="e-spin e-spin-up " role="button" "aria-label"="Increase Value" unselectable="on" /><span class="e-spin e-spin-down" role="button" "aria-label"="Decrease Value" unselectable="on" /></span>');e.find(".e-spin-up").append(p.buildTag("span.e-icon e-arrow e-arrow-sans-up").attr({role:"presentation",unselectable:"on"})),e.find(".e-spin-down").append(p.buildTag("span.e-icon e-arrow e-arrow-sans-down").attr({role:"presentation",unselectable:"on"})),this.innerWrap.append(e),this.spin=this.wrapper.find(".e-select"),this.spinUp=this.wrapper.find(".e-spin-up"),this.spinDown=this.wrapper.find(".e-spin-down"),this._setWidth(this.model.width),this._setHeight(this.model.height),""!=this.model.cssClass&&this._setSkin(this.model.cssClass),this._showSpin(this.model.showSpinButton),this.model.showRoundedCorner&&this._roundedCorner(this.model.showRoundedCorner),this.model.enableRTL&&this._enableRTL(this.model.enableRTL),this.model.readOnly&&this._setReadOnly(this.model.readOnly),this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&this.enable():this.disable()},_initObjects:function(){this._preVal=this.model.value,null===this.model.value?(this.isValidState=!0,this._hiddenInput.val(null)):(this.model.value<this.model.minValue||this.model.value>this.model.maxValue)&&(this.isValidState=!1),this._checkErrorClass(),this._setWaterMark()},_showSpin:function(e){e?(this.spin&&(this.spin.show(),this.innerWrap.addClass("e-padding")),this._spinEvents("_on")):(this.spin&&(this.spin.hide(),this.innerWrap.removeClass("e-padding")),this._spinEvents("_off"))},_roundedCorner:function(e){e&&!this.innerWrap.hasClass("e-corner")?this.innerWrap.addClass("e-corner"):this.innerWrap.hasClass("e-corner")&&this.innerWrap.removeClass("e-corner")},_enableRTL:function(e){e?(this.spin?this.wrapper:this.element).addClass("e-rtl"):(this.spin?this.wrapper:this.element).removeClass("e-rtl")},_setWidth:function(e){""!=e?this.wrapper.width(e):this.model.width=this.wrapper.outerWidth()},_setHeight:function(e){""!=e?this.wrapper.height(e):this.model.height=this.wrapper.outerHeight()},_setSkin:function(e){this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)},_setValue:function(e,t){this._isWatermark||this._hiddenSpan.css("display","none"),this.model.value=this._checkNumValue(e),this._validateMinMaxValue(!1),this._checkErrorClass(),this._localizedFormat(),this._raiseChangeEvent(t),this._setWaterMark()},_setLocalize:function(e){var t=p.preferredCulture(this.model.locale).numberFormat[","];this.model.locale="en"==p.preferredCulture(e).name?"en-US":p.preferredCulture(e).name,this.model.groupSeparator=p.isNullOrUndefined(this._options.groupSeparator)&&t===this.model.groupSeparator?p.preferredCulture(this.model.locale).numberFormat[","]:this.model.groupSeparator,this._localizedLabels=this._getLocalizedLabels(),p.isNullOrUndefined(this._options)||p.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),this._localizedLabelToModel(),this.culture=p.preferredCulture(this.model.locale),this._initCustomValue(),this._updateSymbol(this.model.locale),this._localizedFormat(),this._changeWatermark(this.model.watermarkText),value=p.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._formatValue(this.model.value,"n",!0):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(value)},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText},_updateSymbol:function(e){this._percentSymbol=p.preferredCulture(e).numberFormat.percent.symbol,this._currencySymbol=p.preferredCulture(e).numberFormat.currency.symbol},_setDecimal:function(e){this.model.decimalPlaces=e,this._localizedFormat()},_validateMinMaxValue:function(e,t){var i=!1;this.model.minValue>this.model.maxValue&&(this.model.minValue=this.model.maxValue),!p.isNullOrUndefined(this.model.value)&&this.model.minValue>this.model.value?(1!=this.model.enableStrictMode?(this.isValidState=!0,this._startValue=this.model.value=this.model.minValue):this.isValidState=!1,i=!0):!p.isNullOrUndefined(this.model.value)&&this.model.maxValue<this.model.value?(1!=this.model.enableStrictMode?(this.isValidState=!0,this.model.value=this.model.maxValue):this.isValidState=!1,i=!0):this.isValidState=!0,this.model.minValue==this.model.maxValue&&(this._startValue=this.model.minValue),i&&e&&(i=this._formatValue(this.model.value,"n",!0),this._hiddenInput.val(i),i=p.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._formatValue(this.model.value,"n",!0):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(i),this._localizedFormat(),this._raiseChangeEvent(t))},_convertToExponetial:function(e){var t,i,s,a="",n=e<0;for(e=e.toString(),i=p.preferredCulture(this.model.locale).numberFormat,e=e.replace(".",i["."]),unformattedValue=e,"ej.NumericTextbox"===this.sfType?(t=n?i.pattern[0]:"n",e=n?e.replace("-",""):e,symbol=""):"ej.PercentageTextbox"===this.sfType?(t=n?i.percent.pattern[0]:i.percent.pattern[1],e=n?e.replace("-",""):e,symbol=i.percent.symbol):"ej.CurrencyTextbox"===this.sfType&&(t=n?i.currency.pattern[0]:i.currency.pattern[1],e=n?e.replace("-",""):e,symbol=i.currency.symbol),idx=0,s=t.length;idx<s;idx++)a+="n"===(ch=t.charAt(idx))?e:"$"===ch||"%"===ch?symbol:ch;return{formattedValue:a,unformattedValue:unformattedValue}},_localizedFormat:function(){var e;this.culture=p.preferredCulture(this.model.locale),p.isNullOrUndefined(this.model.value)?this._textBox.value="":-1==this.model.value.toString().indexOf("e")?(this._textBox.value=this._removeSeparator(this.model.value),this._focused||""==this._textBox.value||(this._textBox.value=this._formatValue(this.model.value,"n",!0),"ej.PercentageTextbox"===this.sfType?this._appendPercentSymbol(this._textBox.value):"ej.CurrencyTextbox"===this.sfType&&this._appendCurrencySymbol(this._textBox.value))):(e=this._convertToExponetial(this.model.value),this._textBox.value=e.unformattedValue,this._focused||""==this._textBox.value||(this._textBox.value=e.formattedValue))},_checkNumValue:function(e){return"string"!=typeof(e="string"==typeof e?this._changeSeparator?this._replaceSeparator(e,this.model.groupSeparator,p.preferredCulture(this.model.locale).numberFormat[","]):e:e)||isNaN(this._parseValue(e))?"number"!=typeof e||isNaN(e)?null:e:(e=this._parseValue(e),parseFloat(e))},_setReadOnly:function(e){(this.model.readOnly=e)?(this.element.attr("readonly",!0),this._hiddenInput.attr("readonly",!0)):(this.element.prop("readonly",!1),this._hiddenInput.prop("readonly",!1))},_setWaterMark:function(){null!=this._localizedLabels.watermarkText&&""===this._textBox.value&&""===u.trim(this._hiddenInput.val())&&(this._isWatermark?(this._hiddenInput.attr("placeholder",this._localizedLabels.watermarkText),this.element.attr("placeholder",this._localizedLabels.watermarkText)):this._hiddenSpan.css("display","block").text(this._localizedLabels.watermarkText))},_changeWatermark:function(e){if(!this.model.enabled)return!1;this._isWatermark?(this._hiddenInput.attr("placeholder",e),this.element.attr("placeholder",e)):this._hiddenSpan.text(e)},_setSelectionRange:function(t,i){function s(e){e.collapse(!0),e.moveEnd("character",i),e.moveStart("character",t),e.select()}var a,e=this._textBox;try{e.setSelectionRange?e.setSelectionRange(t,i):e.createTextRange&&s(e.createTextRange())}catch(e){a=this,window.setTimeout(function(){document.body.focus(),a._textBox.select(),s(document.selection.createRange())},1)}},_getSelection:function(e){var t;return document.selection?""===(t=document.selection.createRange()).text?t.text:this._removeFormats(t.text):null==e?this.model.value:this._removeFormats(e.substring(this._textBox.selectionStart,this._textBox.selectionEnd))},_caretPosition:function(){var e,t=this._textBox,i=0;return document.selection?(t.focus(),(e=document.selection.createRange()).moveStart("character",-t.value.length),i=e.text.length):!t.selectionStart&&"0"!=t.selectionStart||(i=t.selectionEnd),i},_appendPercentSymbol:function(e){(e=this._percentSymbol?e.replace(this._percentSymbol,""):e).indexOf(p.preferredCulture(this.model.locale).numberFormat.percent.symbol)<0&&(this._textBox.value=this._formatValue(this._parseValue(e)/100,"p",!0)),this._percentSymbol=p.preferredCulture(this.model.locale).numberFormat.percent.symbol},_appendCurrencySymbol:function(e){(e=this._currencySymbol?e.replace(this._currencySymbol,""):e).indexOf(p.preferredCulture(this.model.locale).numberFormat.currency.symbol)<0&&(this._textBox.value=this._formatValue(this._parseValue(e),"c",!0)),this._currencySymbol=p.preferredCulture(this.model.locale).numberFormat.currency.symbol},_removeFormats:function(e){var t=p.preferredCulture(this.model.locale).numberFormat[","];return null!=e?"."==t?e.toString().replace(/["."]/g,""):e.toString().match(new RegExp(t,"g"))?e.toString().replace(new RegExp(t,"g"),""):e:null},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")},enable:function(){this.model.enabled=!0,this.element[0].disabled=!1,this.element.prop("disabled",!1),this._hiddenInput.prop("disabled",!1),this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this._hiddenInput.removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.find(".e-select").removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.find(".e-select span.e-icon.e-arrow").removeClass("e-disable"),this.wrapper.removeClass("e-disable-wrap")},disable:function(){this.model.enabled=!1,this.element[0].disabled=!0,this.element.attr("disabled","disabled"),this._hiddenInput.attr("disabled","disabled"),this.element.addClass("e-disable").attr({"aria-disabled":!0}),this._hiddenInput.addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.find(".e-select").addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.find(".e-select span.e-icon.e-arrow").addClass("e-disable"),this.wrapper.addClass("e-disable-wrap")},getValue:function(){return this.model.value},_wireEvents:function(){this._on(this._hiddenInput,"focus",this._focusIn),this._on(this.element,"blur",this._focusOut),this._on(this.element,"keydown",this._keyDown),this._on(this.element,"keypress",this._keyPress),this._on(this.element,"mousewheel",this._mouseWheel),this._on(this.element,"DOMMouseScroll",this._mouseWheel)},_spinEvents:function(e){this[e](this.spinUp,"mousedown mouseup touchstart touchend",this._spinUpClick),this[e](this.spinDown,"mousedown mouseup touchstart touchend",this._spinDownClick)},_isIE8:function(){var e=!1,t=p.browserInfo();return e="msie"==t.name&&"8.0"==t.version?!0:e},_spinUpClick:function(e){var t,i=!1;e.button?i=this._isIE8()?1!=e.button:0!=e.button:e.which&&(i=3==e.which),i||(e.preventDefault(),clearTimeout(this._timeout),this.model.enabled&&!this.model.readOnly&&(this._on(this.spinUp,"mouseleave",this._mouseUpClick),this.spinUp.addClass("e-active"),t=this,"mouseup"==e.type||"touchend"==e.type?(this._updateInputField("increment"),this.spinUp.removeClass("e-active"),this._off(u(document),"mouseup",this._mouseUpClick)):"mousedown"!=e.type&&"touchstart"!=e.type||(this._focused||this._hiddenInput[0].focus(),this._timeout=setInterval(function(){t._updateInputField("increment")},150),this._on(u(document),"mouseup",this._mouseUpClick))))},_spinDownClick:function(e){var t,i=!1;e.button?i=this._isIE8()?1!=e.button:0!=e.button:e.which&&(i=3==e.which),i||(t=this,e.preventDefault(),clearTimeout(this._timeout),this.model.enabled&&!this.model.readOnly&&(this._on(this.spinDown,"mouseleave",this._mouseUpClick),this.spinDown.addClass("e-active"),"mouseup"==e.type||"touchend"==e.type?(this._updateInputField("decrement"),this.spinDown.removeClass("e-active"),this._off(u(document),"mouseup",this._mouseUpClick)):"mousedown"!=e.type&&"touchstart"!=e.type||(this._focused||this._hiddenInput[0].focus(),this._timeout=setInterval(function(){t._updateInputField("decrement")},150),this._on(u(document),"mouseup",this._mouseUpClick))))},_mouseUpClick:function(e){e.stopPropagation(),clearTimeout(this._timeout),this._off(this.spinUp,"mouseleave",this._mouseUpClick),this._off(this.spinDown,"mouseleave",this._mouseUpClick),this.spinDown.removeClass("e-active"),this.spinUp.removeClass("e-active")},_mouseWheel:function(e){var t,i;e.preventDefault(),this._focused||this.element[0].focus(),this.model.enabled&&!this.model.readOnly&&((i=e.originalEvent).wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),0<t?this._updateInputField("increment"):t<0&&this._updateInputField("decrement"),this._cancelEvent(e))},_numberValue:function(){var e=this._textBox.value;return"ej.NumericTextbox"===this.sfType&&(e=this._formatValue(this.model.value,"n",!0)),"string"!=typeof(e="ej.PercentageTextbox"!==this.sfType&&"ej.CurrencyTextbox"!==this.sfType?e:this._formatValue(this.model.value,"n",!0))||isNaN(this._parseValue(e))?"":e},_formatValue:function(e,t,i){i&&this._updateCultureInfo();e=p.format(e,t+this.model.decimalPlaces,this.model.locale);return i&&this._restCultureInfo(),e},_parseValue:function(e){this._updateCultureInfo();e=p.parseFloat(e,this.model.locale);return this._restCultureInfo(),e},_initCustomValue:function(){var e,t="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";switch(t){case"percent":case"currency":e=this.culture.numberFormat[t],p.isNullOrUndefined(this._options.negativePattern)&&(this.model.negativePattern=e.pattern[0]),p.isNullOrUndefined(this._options.positivePattern)&&(this.model.positivePattern=e.pattern[1]),p.isNullOrUndefined(this._options.groupSize)&&(this.model.groupSize=e.groupSizes[0]);break;case"numeric":e=this.culture.numberFormat,p.isNullOrUndefined(this._options.negativePattern)&&(this.model.negativePattern=e.pattern[0]),p.isNullOrUndefined(this._options.groupSize)&&(this.model.groupSize=e.groupSizes[0])}},_updateCultureInfo:function(){var e="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric",t="numeric"==e?this.culture.numberFormat:this.culture.numberFormat[e];this._oldNegativePattern=t.pattern[0],this._oldGroupSize=t.groupSizes[0],t.pattern[0]=this.model.negativePattern,t.groupSizes[0]=this.model.groupSize,"numeric"!=e&&(this._oldPositivePattern=t.pattern[1],t.pattern[1]=this.model.positivePattern)},_restCultureInfo:function(){var e="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric",t="numeric"==e?this.culture.numberFormat:this.culture.numberFormat[e];t.pattern[0]=this._oldNegativePattern,t.groupSizes[0]=this._oldGroupSize,"numeric"!=e&&(t.pattern[1]=this._oldPositivePattern)},_toggleTextbox:function(e){this._hiddenInput.toggle(e),this.element.toggle(!e)},_focusIn:function(){var e;this.model.readOnly||(this._focused=!0,p.isNullOrUndefined(this.model.value)||this.element.val(this._removeSeparator(this.model.value)),this._toggleTextbox(!1),this._textBox=this.element[0],this.element[0].focus(),this._preVal=this.model.value,this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this.wrapper.removeClass("e-error"),this._error||(""!=this._textBox.value&&(e=this._formatValue(this._textBox.value,"n",!0),this._textBox.value=e,this._hiddenInput.val(e)),this._setSelectionRange(0,this._textBox.value.length)),this._trigger("focusIn",{value:this.model.value}))},_focusOut:function(){var e;this._focused=!1,this.wrapper.removeClass("e-focus"),this._error||(""!=this._textBox.value?((e=p.parseFloat(this._textBox.value,this.model.locale))<this.model.minValue?this.model.enableStrictMode?this.isValidState=!1:this._textBox.value=this._formatValue(this.model.minValue,"n",!0):e>this.model.maxValue&&(this.model.enableStrictMode?this.isValidState=!1:this._textBox.value=this._formatValue(this.model.maxValue,"n",!0)),this.model.value=p.parseFloat(this._textBox.value,this.model.locale),isNaN(this.model.value)&&!this.model.value&&(this.model.value=null,this.isValidState=!1),this._toggleTextbox(!0),this._textBox=this._hiddenInput[0],this._localizedFormat(),this._checkErrorClass()):(e=""==this._textBox.value?null:this._textBox.value,this.model.value=e,this._hiddenInput.val(e),this._toggleTextbox(!0),this._textBox=this._hiddenInput[0]),null===this.model.value||this.model.value>=this.model.minValue&&this.model.value<=this.model.maxValue?this.isValidState=!0:this.model.enableStrictMode&&(this.isValidState=!1),this._raiseChangeEvent(),this._setWaterMark(),e=p.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(e),this._updateSeparator(),this._trigger("focusOut",{value:this.model.value})),this._checkErrorClass()},_cancelEvent:function(e){return e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation(),e.preventDefault(),!1},_updateInputField:function(e){var t,i,s;this.isValidState=!0,this._focused||u(this._hiddenInput[0]).focus(),t=this.model.incrementStep,this.model.value,""===this._textBox.value?(this._textBox.value=this._formatValue(this._startValue,"n",!0),t=0):0<=this._textBox.value.indexOf(" ")&&(this._textBox.value=this._textBox.value.replace(" ","")),"ej.PercentageTextbox"===this.sfType||"ej.CurrencyTextbox"===this.sfType?(-1<(s=i=this._textBox.value).indexOf(p.preferredCulture(this.model.locale).numberFormat.percent.symbol)&&(s=i.substring(0,i.length-1)),this.model.value=this._parseValue(s)):"ej.NumericTextbox"==this.sfType&&(this.model.value=p.parseFloat(this._textBox.value,this.model.locale)),isNaN(this.model.value)&&!this.model.value&&(this.model.value=this._startValue),this.model.value>=this.model.minValue&&this.model.value>this.model.maxValue?(this.model.value=this.model.maxValue,this._setValue(this.model.value)):this.model.value<this.model.minValue&&this.model.value<=this.model.maxValue?(this.model.value=this.model.minValue,this._setValue(this.model.value)):this.model.value>=this.model.minValue&&this.model.value<=this.model.maxValue&&(s="increment"==e?this.model.value+t:this.model.value-t)>=this.model.minValue&&s<=this.model.maxValue&&this._setValue(s),this._checkErrorClass()},_validateDecimal:function(e){var t=String.fromCharCode(e.keyCode),t=188==e.keyCode?",":190==e.keyCode?".":110==e.keyCode?p.preferredCulture(this.model.locale).numberFormat["."]:t;return p.preferredCulture(this.model.locale).numberFormat["."].charCodeAt(0)==t.charCodeAt(0)},_allowKeyCodes:function(e){for(var t=[38,40,35,36,109,189,46,8,127,37,39,190,9,13,16,17,18,20,110,173,86,88,67],i=0;i<t.length;i++)if(e.keyCode==t[i]||this._validateDecimal(e)&&0!=this.model.decimalPlaces)return!0;return!1},_raiseChangeEvent:function(e){var t=this.model.value;this._checkNumValue(this._preVal)!==this._checkNumValue(t)&&(this._preVal=t,this.model.value=this._checkNumValue(this._formatValue(this._preVal,"n",!1)),this._updateHiddenField(),t=p.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(t),this.element.attr("aria-valuenow",t),this._updateSeparator(),this.element.trigger("change"),this._trigger("_change",{value:this.model.value,isInteraction:!e}),this._trigger("change",{value:this.model.value,isInteraction:!e}))},_updateHiddenField:function(){var e=this._textBox;this._textBox=this._hiddenInput[0],this._localizedFormat(),this._textBox=e},_removeSeparator:function(e){var t;if(!p.isNullOrUndefined(e))return e=(e=this._checkNumValue(this._formatValue(e,"n",!1))).toString(),t=p.preferredCulture(this.model.locale).numberFormat,e.replace(".",t["."])},_updateSeparator:function(){var e;this._changeSeparator&&this.model.value&&("ej.NumericTextbox"===this.sfType?e=this._formatValue(this.model.value,"n",!0):"ej.PercentageTextbox"===this.sfType?e=this._formatValue(this.model.value/100,"p",!0):"ej.CurrencyTextbox"===this.sfType&&(e=this._formatValue(this.model.value,"c",!0)),this._hiddenInput.val(this._replaceSeparator(e,p.preferredCulture(this.model.locale).numberFormat[","],this.model.groupSeparator)))},_replaceSeparator:function(e,t,i){var s,t=""===t?new RegExp("\\s","g"):new RegExp("\\"+t,"g");return this.model.groupSeparator==p.preferredCulture(this.model.locale).numberFormat["."]?(s=this.model.decimalPlaces,s=e.length-s-1,e.substring(0,s).replace(t,i)+e.substring(s,e.length)):e.replace(t,i)},_checkSeparator:function(e){this.model.groupSeparator=null!=e?this._validateSeparator(e):p.preferredCulture(this.model.locale).numberFormat[","],this._changeSeparator=p.preferredCulture(this.model.locale).numberFormat[","]!=this.model.groupSeparator,this._prevSeparator=this.model.groupSeparator},_validateSeparator:function(e){var e=e.toString(),t=new RegExp("[a-zA-Z0-9]"),e=1<e.length?e[0]:e;return t.test(e)?null!=this._prevSeparator?this._prevSeparator:p.preferredCulture(this.model.locale).numberFormat[","]:e},_keyPress:function(e){if(0!==e.which&&!e.metaKey&&!e.ctrlKey&&8!==e.keyCode&&13!==e.keyCode)return cursor=this._caretPosition(),beforeCursor=this._textBox.value.toString().substring(0,cursor),afterCursor=this._textBox.value.toString().substring(cursor),numberFormat=p.preferredCulture(this.model.locale).numberFormat,e=String.fromCharCode(e.which),value=beforeCursor+e+afterCursor,e="."===(e=numberFormat["."])?"\\"+e:e,!!(0===this.model.decimalPlaces?/^(-)?(\d*)$/:new RegExp("^(-)?(((\\d+("+e+"\\d*)?)|("+e+"\\d*)))?$")).test(value)&&void 0},_validateDecimalOnType:function(e){var t,i=this._caretPosition(),s=(this._textBox.value.toString().substring(0,i),this._textBox.value.toString().substring(i),this._getSelection(this._textBox.value)),a=p.preferredCulture(this.model.locale).numberFormat["."],n=p.isNullOrUndefined(this.model.value)?"":this.model.value.toString(),n=0!=this.model.decimalPlaces&&(t=this._textBox.value.split(a)[1],0<n.indexOf(a)&&n.substring(n.indexOf(a)+1,n.length).length>this.model.decimalPlaces||!!(0==s.length&&i>this._textBox.value.indexOf(a)&&t&&t.length>=this.model.decimalPlaces));return n?(this._keypressFlag=!1,this._cancelEvent(e),!1):void 0},_keyDown:function(e){var t,i;if(!this.model.readOnly)if(this._CurrentCultureInfo=JSON.parse(JSON.stringify(p.preferredCulture())),48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||this._allowKeyCodes(e)){if(e.shiftKey&&(35==e.keyCode||36==e.keyCode||37==e.keyCode||39==e.keyCode||46==e.keyCode||127==e.keyCode)||e.ctrlKey&&(86==e.keyCode||118==e.keyCode||67==e.keyCode||88==e.keyCode))return!0;if(1==e.ctrlKey&&9!=e.keyCode&&17!=e.keyCode&&86!=e.keyCode&&67!=e.keyCode||67==e.keyCode||86==e.keyCode||88==e.keyCode)return this._keypressFlag=!1,this._cancelEvent(e),!1;if((48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||110==e.keyCode)&&(t=this._caretPosition(),this._textBox.value.toString().substring(0,t),this._textBox.value.toString().substring(t),i=this._getSelection(this._textBox.value),96<=e.keyCode&&e.keyCode<=105&&(e.keyCode-=48),this.model.validateOnType&&this._validateDecimalOnType(e),this._validateOnType)){var s,a,n=p.preferredCulture(this.model.locale).numberFormat["."],r=this.model.value.toString(),l=r.indexOf(n),o=this.model.value,d=this.model.minValue.toFixed(this.model.decimalPlaces),h=this.model.maxValue.toFixed(this.model.decimalPlaces),c=!1;if((c=0<d.toString().indexOf("e")||0<h.toString().indexOf("e")||c)?0!=this.model.decimalPlaces&&(m=this._textBox.value.split(".")[1],(0<r.indexOf(n)||Number(r)<Number(d)||Number(r)>Number(h))&&r.substring(r.indexOf(n)+1,r.length).length>this.model.decimalPlaces||!!(0==i.length&&t>this._textBox.value.indexOf(n)&&m&&m.length>=this.model.decimalPlaces)):("."!=n&&(r=this._textBox.value.toString(),this.model.minValue.toString().match(new RegExp(".","g"))&&(d=this.model.minValue.toString().replace(/["."]/g,n)),this.model.maxValue.toString().match(new RegExp(".","g")))&&(h=this.model.maxValue.toString().replace(/["."]/g,n)),s=0<d.toString().indexOf(n)?Number(d.toString().substring(0,d.toString().indexOf(n))):this.model.minValue,a=0<h.toString().indexOf(n)?Number(h.toString().toString().substring(0,h.toString().indexOf(n))):this.model.maxValue,0<l?(o=Number(r.substring(r.indexOf(n)+1,r.toString().length)),s=0<d.toString().indexOf(n)?Number(d.toString().substring(d.toString().indexOf(n)+1,d.toString().length)):0,a=0<h.toString().indexOf(n)?Number(h.toString().substring(h.toString().indexOf(n)+1,h.toString().length)):0,m=Number(r.substring(0,r.indexOf(n))),l=Number(d.toString().substring(0,d.toString().indexOf(n))),r=Number(h.toString().substring(0,h.toString().indexOf(n))),!this._validateValue(o,s,a,!0,m,l,r)):!this._validateValue(o,s,a,!1)))return this._keypressFlag=!1,this._cancelEvent(e),!1}if(38==e.keyCode&&this._allowkeyboard&&(this._updateInputField("increment"),this._cancelEvent(e)),40==e.keyCode&&this._allowkeyboard&&(this._updateInputField("decrement"),this._cancelEvent(e)),8==e.keyCode&&(t=this._caretPosition(),this._textBox.value.substring(0,t),this._textBox.value.substring(t),i=this._getSelection(this._textBox.value)),46!=e.keyCode&&127!=e.keyCode||(t=this._caretPosition(),this._textBox.value.substring(0,t),this._textBox.value.substring(t),i=this._getSelection(this._textBox.value)),this._validateDecimal(e)&&0!=this.model.decimalPlaces&&46!=e.keyCode){if(d=p.preferredCulture(this.model.locale).numberFormat["."],(h=this._textBox.value.split(d))[1]==_){var n=this._caretPosition(),m=h[0].substring(0,n),l=h[0].substring(n);if((0<this.model.minValue.toString().indexOf("e")||0<this.model.maxValue.toString().indexOf("e"))&&(c=!0),l.length>this.model.decimalPlaces&&1==this.model.validateOnType)return this._keypressFlag=!1,this._cancelEvent(e),!1;if(this._validateOnType&&!c&&(this.model.minValue.toString().match(new RegExp(".","g"))&&(s=this.model.minValue.toString().replace(/["."]/g,d)),this.model.maxValue.toString().match(new RegExp(".","g"))&&(a=this.model.maxValue.toString().replace(/["."]/g,d)),s=0<s.indexOf(d)?Number(s.substring(0,s.indexOf(d))):Number(s),a=0<a.indexOf(d)?Number(a.substring(0,a.indexOf(d))):Number(a),!this._validateValue(this.model.value,s,a,"DecimalKeyPressed")))return this._keypressFlag=!1,this._cancelEvent(e),!1;this._textBox.value=m+d+l,this._setSelectionRange(n+1,n+1)}this._cancelEvent(e)}else 190!=e.keyCode&&110!=e.keyCode||this._cancelEvent(e);109!=e.keyCode&&189!=e.keyCode&&173!=e.keyCode||(0!=this._caretPosition()&&this._getSelection(this._removeFormats(this._textBox.value))!=this.model.value||0<=this.model.minValue&&!this.model.enableStrictMode||this._textBox.value.toString().match(new RegExp("-","g"))&&""===this._getSelection(this._textBox.value)?this._cancelEvent(e):this._getSelection()==this.model.value&&(this.model.value=null)),13==e.keyCode&&this._checkNumValue(this._preVal)!==this._checkNumValue(this._textBox.value)&&this._setValue(this._textBox.value)}else(27!=e.keyCode&&!e.ctrlKey||e.ctrlKey&&90==e.keyCode&&""===u.trim(this._textBox.value))&&(this._keypressFlag=!1,this._cancelEvent(e))},_getLocalizedLabels:function(){return p.getLocalizedConstants(this.sfType,this.model.locale)}}),p.NumericTextbox.Locale=p.NumericTextbox.Locale||{},p.NumericTextbox.Locale.default=p.NumericTextbox.Locale["en-US"]={watermarkText:"Enter value"},p.PercentageTextbox.Locale=p.PercentageTextbox.Locale||{},p.PercentageTextbox.Locale.default=p.PercentageTextbox.Locale["en-US"]={watermarkText:"Enter value"},p.CurrencyTextbox.Locale=p.CurrencyTextbox.Locale||{},p.CurrencyTextbox.Locale.default=p.CurrencyTextbox.Locale["en-US"]={watermarkText:"Enter value"}}),function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.scroller.min","./ej.datepicker.min","./ej.timepicker.min"],e):e()}(function(){var c,m,s;c=jQuery,(m=Syncfusion).widget("ejDateTimePicker","ej.DateTimePicker",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,_rootCSS:"e-datetimepicker",type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{cssClass:"",locale:"en-US",readOnly:!1,showRoundedCorner:!1,enableRTL:!1,htmlAttributes:{},enabled:!0,value:"",minDateTime:new Date("1/1/1900 12:00:00 AM"),maxDateTime:new Date("12/31/2099 11:59:59 PM"),height:"",width:"",dateTimeFormat:"",showPopupButton:!0,enableStrictMode:!1,buttonText:{today:"Today",timeNow:"Time Now",done:"Done",timeTitle:"Time"},watermarkText:"Select datetime",enablePersistence:!1,interval:30,timeDisplayFormat:"",timePopupWidth:105,popupPosition:"bottom",dayHeaderFormat:"short",startLevel:"month",depthLevel:"",startDay:-1,stepMonths:1,showOtherMonths:!0,enableAnimation:!0,headerFormat:"MMMM yyyy",validationRules:null,validationMessage:null,timeDrillDown:{enabled:!1,interval:5,showMeridian:!1,autoClose:!0,showFooter:!0},beforeOpen:null,beforeClose:null,open:null,close:null,change:null,create:null,destroy:null,focusIn:null,focusOut:null},dataTypes:{cssClass:"string",locale:"string",readOnly:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",enabled:"boolean",enableAnimation:"boolean",dateTimeFormat:"string",showPopupButton:"boolean",buttonText:"data",watermarkText:"string",enablePersistence:"boolean",enableStrictMode:"boolean",interval:"number",timeDrillDown:"data",timeDisplayFormat:"string",dayHeaderFormat:"string",startLevel:"string",depthLevel:"string",startDay:"number",stepMonths:"number",showOtherMonths:"boolean",headerFormat:"string",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},_setModel:function(e){var t,i,s,a=!1;for(t in e)switch(t){case"cssClass":this._changeSkin(e[t]);break;case"locale":this._localize(e[t]);break;case"readOnly":this._readOnly(e[t]);break;case"showRoundedCorner":this._setRoundedCorner(e[t]);break;case"enableRTL":this._setRtl(e[t]);break;case"enabled":this._enabled(e[t]);break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[t],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[t],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"value":e[t]=this._setValue(e[t]),this._specificFormat()&&(this._stopRefresh=!0),a=!0;break;case"enableStrictMode":this.model.enableStrictMode=e[t],a=!0;break;case"minDateTime":i=this._stringToObject(e[t]),s=this._getFormat(i,this.timePicker.model.timeFormat),this._isValidDate(i)?(this.datePicker.option("minDate",i),this.timePicker.option("minTime",s),e[t]=i,this.model.minDateTime=i):e[t]=this.model[t],a=!0;break;case"maxDateTime":i=this._stringToObject(e[t]),s=this._getFormat(e[t],this.timePicker.model.timeFormat),this._isValidDate(i)?(this.datePicker.option("maxDate",i),this.timePicker.option("maxTime",s),e[t]=i,this.model.maxDateTime=i):e[t]=this.model[t],a=!0;break;case"height":this.wrapper.height(e[t]);break;case"width":this.wrapper.width(e[t]);break;case"dateTimeFormat":this.model.dateTimeFormat=e[t],this.isValidState&&this._setValue(this.model.value);break;case"showPopupButton":this._showButton(e[t]);break;case"watermarkText":m.isNullOrUndefined(this._options)&&(this._options={}),this._options[t]=this.model.watermarkText=e[t],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"buttonText":m.isNullOrUndefined(this._options)||(this._options=[]),this._options.buttonText=this.model.buttonText=e[t],this._localizedLabels.buttonText=this.model.buttonText,this._buttonText(e[t]);break;case"interval":this._updateTimeHeight(),this.timePicker.option("interval",e[t]);break;case"timeDisplayFormat":this._updateTimeHeight(),this.timePicker.option("timeFormat",e[t]);break;case"timePopupWidth":this._updateTimeHeight(),this.timePicker.option("popupWidth",e[t]);break;case"dayHeaderFormat":this.datePicker.option("dayHeaderFormat",e[t]);break;case"startLevel":this.datePicker.option("startLevel",e[t]);break;case"depthLevel":this.datePicker.option("depthLevel",e[t]);break;case"startDay":this.datePicker.option("startDay",e[t]),this.model.startDay=this.datePicker.model.startDay,e[t]=this.model.startDay;break;case"stepMonths":this.datePicker.option("stepMonths",e[t]);break;case"showOtherMonths":this.datePicker.option("showOtherMonths",e[t]);break;case"headerFormat":this.datePicker.option("headerFormat",e[t]);break;case"htmlAttributes":this._addAttr(e[t]);break;case"popupPosition":this.model.popupPosition=e[t],this._setListPosition();break;case"timeDrillDown":m.isNullOrUndefined(e[t].enabled)||(this.model.timeDrillDown.enabled=e[t].enabled,this._changeDesign()),m.isNullOrUndefined(e[t].interval)||(this.model.timeDrillDown.interval=e[t].interval,this._generateMins(c.trim(m.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)))),m.isNullOrUndefined(e[t].showMeridian)||(this.model.timeDrillDown.showMeridian=e[t].showMeridian,this._sfTimeHour.empty(),this._renderHourTable()),m.isNullOrUndefined(e[t].showFooter)||(this.model.timeDrillDown.showFooter=e[t].showFooter,this._changeDesign())}a&&this._validateMinMax(),this._valueChange(!0),"value"==t&&(e[t]=this.model.value),this._updateTimeHeight(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.isPopupOpen&&this._hideResult(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this._cloneElement.removeClass("e-js e-input").removeClass(m.util.getNameSpace(this.sfType)),this._cloneElement.insertAfter(this.element),this.element.remove(),m.isNullOrUndefined(this.datePicker)||this.datePicker.destroy(),m.isNullOrUndefined(this.timePicker)||this.timePicker.destroy(),this.popup.remove()},_init:function(e){if(!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this._options=e,this._cloneElement=this.element.clone(),this._ISORegex(),this._isSupport=document.createElement("input").placeholder!=s,this._validateMeridian(),this._initialize(),this._initial=!0,this._interval=60,this._render(),this._wireEvents(),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._changeDesign(),e&&e.value!=s&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_changeDesign:function(){var e;this.model.timeDrillDown.enabled?(e=this.model.timeDrillDown.showFooter?"block":"none",this.popup.addClass("e-drill-down"),this._timeContainer.css("display","none"),this._buttonContainer.css("display","none"),this.datePicker.option("showFooter",this.model.timeDrillDown.showFooter),c(".e-footer",this._sfTimeHour).css("display",e),c(".e-footer",this._sfTimeMins).css("display",e)):(this.popup.removeClass("e-drill-down"),this._sfTimeHour.hide(),this._sfTimeMins.hide(),this._updateTimeHeight(),this._dateContainer.show(),this._timeContainer.show(),this._buttonContainer.show(),this.datePicker.option("showFooter",!1),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle())},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var e,t,i,s;for(t in this.element.rules("add",this.model.validationRules),e=(e=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),e.settings.messages[name]={},this.model.validationRules)if(i=null,!m.isNullOrUndefined(this.model.validationRules[t])){if(m.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[t]))for(s in e.settings.messages[name][t]=c.validator.messages[t],this.model.validationMessage)t==s&&(i=this.model.validationMessage[t]);else i=this.model.validationRules.messages[t];e.settings.messages[name][t]=null!=i?i:c.validator.messages[t]}},_addAttr:function(e){var s=this;c.map(e,function(e,t){var i=t.toLowerCase();"class"==i?s.wrapper.addClass(e):"disabled"==i&&"disabled"==e?s._enabled(!1):"readOnly"==i&&"readOnly"==e?s._readOnly(!0):"style"==i||"id"==i?s.wrapper.attr(t,e):(m.isValidAttr(s.element[0],i)?s.element:s.wrapper).attr(i,e)})},_validateMeridian:function(){var e=m.preferredCulture(this.model.locale);e&&(this.model.locale="en"==e.name?"en-US":e.name),(m.isNullOrUndefined(this._options)||m.isNullOrUndefined(this._options.timeDrillDown)||m.isNullOrUndefined(this._options.timeDrillDown.showMeridian))&&(this.model.timeDrillDown.showMeridian=!m.isNullOrUndefined(m.preferredCulture(this.model.locale).calendars.standard.AM))},_initialize:function(){var e;this.popup=null,this.isPopupOpen=!1,this.isValidState=!0,this.model.value=(""===this.model.value?this.element[0]:this.model).value,this._localizedLabels=this._getLocalizedLabels(),m.isNullOrUndefined(this._options)||(m.isNullOrUndefined(this._options.buttonText)||c.extend(this._localizedLabels.buttonText,this._options.buttonText),m.isNullOrUndefined(this._options.watermarkText))||(this._localizedLabels.watermarkText=this._options.watermarkText),this._localizedLabelToModel(),this._isIE8="msie"==m.browserInfo().name&&"8.0"==m.browserInfo().version,this._isIE9="msie"==m.browserInfo().name&&"9.0"==m.browserInfo().version,this.model.dateTimeFormat&&this.model.timeDisplayFormat||this._getDateTimeFormat(),(e=!this.model.value||"object"==typeof JSON&&"{}"===JSON.stringify(this.model.value)?null:this.model.value instanceof Date?this.model.value:m.parseDate(this.model.value,this.model.dateTimeFormat,this.model.locale)||this._checkJSONString(this.model.value)||null)&&(this.model.value=e),(e=this.model.minDateTime=this._stringToObject(this.model.minDateTime))&&this._isValidDate(e)||(this.model.minDateTime=this.defaults.minDateTime),(e=this.model.maxDateTime=this._stringToObject(this.model.maxDateTime))&&this._isValidDate(e)||(this.model.maxDateTime=this.defaults.maxDateTime)},_checkJSONString:function(e){var t=new Date(e);return isNaN(Date.parse(t))?this._extISORegex.exec(e)||this._basicISORegex.exec(e)?this._dateFromISO(e):void 0:t.toJSON()===this.model.value||t.toGMTString()===this.model.value||t.toISOString()===this.model.value||t.toLocaleString()===this.model.value||t.toString()===this.model.value||t.toUTCString()===this.model.value?t:"string"==typeof e?this._dateFromISO(e):void 0},_render:function(){this._renderWrapper(),this._renderIcon(),this._setDimentions(),this._renderDropdown(),this._checkProperties()},_renderWrapper:function(){var e;this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0",value:this.model.value}),this.wrapper=m.buildTag("span.e-datetime-wrap e-widget "+this.model.cssClass+"#"+this.element[0].id+"_wrapper").insertAfter(this.element),m.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.container=m.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container),this._isSupport||(this._hiddenInput=m.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block"),c((e=this)._hiddenInput).focus(function(){e.element.focus()}))},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_renderIcon:function(){if(!this.model.showPopupButton)return!1;this.datetimeIcon=m.buildTag("span.e-select","",{}).attr(this._isIE8?{unselectable:"on"}:{});var e=m.buildTag("span.e-icon e-datetime","",{},{"aria-label":"select"}).attr(this._isIE8?{unselectable:"on"}:{});this.datetimeIcon.append(e),this.container.append(this.datetimeIcon).addClass("e-padding"),this._on(this.datetimeIcon,"click",this._iconClick),this._on(this.datetimeIcon,"mousedown",function(e){e.preventDefault()})},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_renderDropdown:function(){var e,t,i,s=c("#"+this.element[0].id+"_popup").get(0);s&&c(s).remove(),this.popup=m.buildTag("div.e-datetime-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.element[0].id+"_popup").css("visibility","hidden"),m.isTouchDevice()||this.popup.addClass("e-ntouch"),c("body").append(this.popup),this._renderControls(),s=m.buildTag("div.e-header",this._localizedLabels.buttonText.timeTitle).attr(this._isIE8?{unselectable:"on"}:{}),this._dateContainer=m.buildTag("div.e-datecontainer").append(this.datePicker.popup).attr(this._isIE8?{unselectable:"on"}:{}),this._timeContainer=m.buildTag("div.e-timecontainer").append(s,this.timePicker.popup).attr(this._isIE8?{unselectable:"on"}:{}),this._drillDownContainer=m.buildTag("div.e-drillDowncontainer").append().attr(this._isIE8?{unselectable:"on"}:{}),s=m.buildTag("div.e-popup-container").append(this._dateContainer,this._timeContainer,this._drillDownContainer).attr(this._isIE8?{unselectable:"on"}:{}),e=m.buildTag("div.e-dt-button e-dt-today",this._localizedLabels.buttonText.today).attr(this._isIE8?{unselectable:"on"}:{}),t=m.buildTag("div.e-dt-button e-dt-now",this._localizedLabels.buttonText.timeNow).attr(this._isIE8?{unselectable:"on"}:{}),i=m.buildTag("div.e-dt-button e-dt-done",this._localizedLabels.buttonText.done).attr(this._isIE8?{unselectable:"on"}:{}),this._buttonContainer=m.buildTag("div.e-button-container").append(e,t,i).attr(this._isIE8?{unselectable:"on"}:{}),this._renderDrillDown(),this.popup.append(s,this._buttonContainer),this._checkForResponsive(),this._updateTimeHeight(),this._bindOperations(),this._updateValues(),this.popup.css({visibility:"visible",display:"none"}),this._on(e,"click",this._todayClick),this._on(t,"click",this._nowClick),this._on(i,"click",this._doneClick)},_renderControls:function(){this._renderDateControl(),this._renderTimeControl();var e=m.buildTag("span").append(this.datePicker.wrapper,this.timePicker.wrapper);e.find("span").css("display","none"),this.popup.append(e)},_renderDrillDown:function(){this._renderHourPopup(),this._renderMinsPopup()},_renderHourPopup:function(){this._sfTimeHour=m.buildTag("div.e-timepicker e-popup e-widget "+this.model.cssClass+" e-time-hours ","",{},{id:this._id?"e-hours-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}),m.isTouchDevice()||this._sfTimeHour.addClass("e-ntouch"),this._drillDownContainer.append(this._sfTimeHour),this._renderHourTable()},_renderHourTable:function(){var e,t,s,a;if(m.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(m.buildTag("span.e-prev").append(m.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(m.buildTag("span.e-text").append(m.buildTag("span.e-hours-headertext").text("October 2015").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(m.buildTag("span.e-next").append(m.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeHour),this._interval<1)return!1;e=6e4*this._interval,t=this.model.timeDrillDown.showMeridian?2:1,rowCount=this.model.timeDrillDown.showMeridian?6:4;var n=this.model.timeDrillDown.showMeridian?"hh":"HH:00",r=["AM","PM"],l=0,o="",d=this.timePicker._createObject("12:00:00 AM"),h=this.model.timeDrillDown.showMeridian?this.timePicker._createObject("11:59:59 AM"):this.timePicker._createObject("11:59:59 PM");for(i=0;i<t;i++){for(this.model.timeDrillDown.showMeridian&&(o=r[i].toLowerCase(),s=m.isNullOrUndefined(m.preferredCulture(this.model.locale).calendars.standard[r[i]])?"":m.preferredCulture(this.model.locale).calendars.standard[r[i]][0],m.buildTag("div.e-header-"+o).attr(this._isIE8?{unselectable:"on"}:{}).append(m.buildTag("span.e-text").append(m.buildTag("span.e-hours-meridiantxt-"+o).text(s).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeHour)),table=m.buildTag("table.e-dp-viewhours","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{}),this._sfTimeHour.append(table),tbody=m.buildTag("tbody.e-timepicker-hours").attr(this._isIE8?{unselectable:"on"}:{}),tr=m.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{});this.timePicker._compareTime(h,d,!0);)a=this._localizeTime(d,n),a=m.buildTag("td.e-hour e-state-default",a),this.model.timeDrillDown.showMeridian&&a.addClass("e-hour-"+o),this._isIE8&&a.attr("unselectable","on"),tr.append(a),++l>=rowCount&&(l=0,tbody.append(tr),tr=m.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{})),d=this.timePicker._createObject(d).getTime()+e;table.append(tbody),this.model.timeDrillDown.showMeridian&&(d=this.timePicker._createObject("12:00:00 PM"),h=this.timePicker._createObject("11:59:59 PM"))}m.buildTag("div.e-footer").append(m.buildTag("span.e-footer-icon")).append(m.buildTag("span.e-footer-text")).appendTo(this._sfTimeHour),c(".e-footer-text",this._sfTimeHour).html(this._localizedLabels.buttonText.timeNow),c(".e-hours-headertext",this._sfTimeHour).text(m.format(this.datePicker.model.value,"dd MMM yyyy")),this._on(this._sfTimeHour.find(".e-hour"),"click",c.proxy(this._hourNavHandler,this)),this._on(c(".e-next",this._sfTimeHour),"click",c.proxy(this._prevNextHourHandler,this)),this._on(c(".e-prev",this._sfTimeHour),"click",c.proxy(this._prevNextHourHandler,this)),this._on(c(".e-footer",this._sfTimeHour),"click",this._todayBtn),c(".e-hours-headertext",this._sfTimeHour).on("click",c.proxy(this._forwardNavHandler,this)),this._sfTimeHour.hide()},_localizeTime:function(e,t){return c.trim(m.format(this.timePicker._createObject(e),t,this.model.locale))},_renderMinsPopup:function(){var e,t,i,s,a,n;if(this._sfTimeMins=m.buildTag("div.e-timepicker e-popup e-widget "+this.model.cssClass+" e-time-minitues ","",{},{id:this._id?"e-time-minitues-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}),m.isTouchDevice()||this._sfTimeMins.addClass("e-ntouch"),this._drillDownContainer.append(this._sfTimeMins),m.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(m.buildTag("span.e-prev").append(m.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(m.buildTag("span.e-text").append(m.buildTag("span.e-minitues-headertext").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(m.buildTag("span.e-next").append(m.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeMins),m.buildTag("div.e-mins-header").attr(this._isIE8?{unselectable:"on"}:{}).append(m.buildTag("span.e-text").append(m.buildTag("span.e-minitues-meridiantxt").text("AM").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeMins),e=m.buildTag("table.e-dp-viewmins","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{}),this._sfTimeMins.append(e),tbody=m.buildTag("tbody.e-timepicker-mins").attr(this._isIE8?{unselectable:"on"}:{}),this._intervall<1)return!1;for(s=6e4*this._interval,t=this.timePicker._createObject("12:00:00 AM"),i=this.timePicker._createObject("11:59:59 PM"),tr=m.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),a=0;this.timePicker._compareTime(i,t,!0);)n=this._localizeTime(t,"HH:00"),n=m.buildTag("td.e-mins e-state-default",n),this._isIE8&&n.attr("unselectable","on"),tr.append(n),4<=++a&&(a=0,tbody.append(tr),tr=m.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{})),t=this.timePicker._createObject(t).getTime()+s;e.append(tbody),c(".e-minitues-headertext",this._sfTimeMins).text(c(".e-hours-headertext",this._sfTimeHour).text()),m.buildTag("div.e-footer").append(m.buildTag("span.e-footer-icon")).append(m.buildTag("span.e-footer-text")).appendTo(this._sfTimeMins),c(".e-footer-text",this._sfTimeMins).html(this._localizedLabels.buttonText.timeNow),c(".e-minitues-headertext",this._sfTimeMins).text(m.format(this.datePicker.model.value,"dd MMM yyyy")),this.model.timeDrillDown.showMeridian||c(".e-mins-header",this._sfTimeMins).css("display","none"),this._on(e.find(".e-mins"),"click",c.proxy(this._minsNavHandler,this)),this._on(c(".e-next",this._sfTimeMins),"click",c.proxy(this._prevNextMinsHandler,this)),this._on(c(".e-prev",this._sfTimeMins),"click",c.proxy(this._prevNextMinsHandler,this)),this._on(c(".e-footer",this._sfTimeMins),"click",this._todayBtn),c(".e-minitues-headertext",this._sfTimeMins).on("click",c.proxy(this._forwardNavHandler,this)),this._sfTimeMins.hide()},_todayBtn:function(){this._nowClick(),this._hideResult()},_hourNavHandler:function(e){if(this.model.readOnly||!this.model.enabled||e&&c(e.target).hasClass("e-disable"))return!1;e&&e.type&&e.preventDefault(),c("table",this._sfTimeHour).find("td").removeClass("e-active"),c(e.target).addClass("e-active"),this._sfTimeHour.hide(),this._sfTimeMins.show(),this._addFocus(this._sfTimeMins),t=this.model.timeDrillDown.showMeridian?(t=c(e.target).hasClass("e-hour-am")?"AM":"PM",c(e.target).text()+":00 "+t):c(e.target).text(),this._generateMins(t);var e=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),t=c.trim(m.format(this.timePicker._createObject(e),"HH:mm",this.model.locale)),e=c.trim(m.format(this.timePicker._createObject(e),"HH:00",this.model.locale));index=(this.timePicker._parse(t)-this.timePicker._parse(e))/(6e4*this.model.timeDrillDown.interval),index=Math.ceil(index),this._hoverMins=this._setFocusByIndex("mins",index,this._sfTimeMins)},_minsNavHandler:function(e){if(this.model.readOnly||!this.model.enabled||e&&c(e.target).hasClass("e-disable"))return!1;e&&e.type&&e.preventDefault(),c("table",this._sfTimeMins).find("td").removeClass("e-active").removeClass("e-state-hover"),c(e.target).addClass("e-active"),value=this.model.timeDrillDown.showMeridian?(value=c(e.target).text()+" "+m.format(this._datetimeValue,"tt","en-US"),this.timePicker._localizeTime(value)):c(e.target).text(),this.timePicker.option("value",value),this.datePicker.option("value",this._datetimeValue),this._datetimeValue=new Date(this.model.value.toString()),this.model.timeDrillDown.autoClose&&this._hideResult(e),this._updateInput()},_generateMins:function(e){var t,i,s,a,n,r,l=c("table",this._sfTimeMins);for(l.empty(),this.model.timeDrillDown.showMeridian?c(".e-mins-header",this._sfTimeMins).show():c(".e-mins-header",this._sfTimeMins).hide(),t=this.model.timeDrillDown.showMeridian?"hh:mm":"HH:mm",c(".e-minitues-headertext",this._sfTimeMins).text(c(".e-hours-headertext",this._sfTimeHour).text()),tbody=m.buildTag("tbody.e-timepicker-mins").attr(this._isIE8?{unselectable:"on"}:{}),a=0,n=6e4*this.model.timeDrillDown.interval,i=this.timePicker._createObject(e),this._datetimeValue.setHours(i.getHours()),s=this.timePicker._createObject(i).getTime()+354e4,tr=m.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),tbody.append(tr);this.timePicker._compareTime(s,i,!0);)4<=a&&(a=0,tr=m.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),tbody.append(tr)),r=this._localizeTime(i,t),r=m.buildTag("td.e-mins e-state-default",r),this._isIE8&&r.attr("unselectable","on"),tr.append(r),a++,i=this.timePicker._createObject(i).getTime()+n;l.append(tbody),c(".e-mins-header",this._sfTimeMins).find(".e-minitues-meridiantxt").text(m.format(this._datetimeValue,"tt",this.model.locale)),this._disableRange("mins"),this._on(l.find(".e-mins"),"click",c.proxy(this._minsNavHandler,this))},_prevNextHourHandler:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e.preventDefault();e=!!(c(e.target).is("a")?c(e.target.parentNode):c(e.target)).hasClass("e-prev");this._processNextPrev(e,this._sfTimeHour)},_prevNextMinsHandler:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e.preventDefault();e=!!(c(e.target).is("a")?c(e.target.parentNode):c(e.target)).hasClass("e-prev");this._processNextPrev(e,this._sfTimeMins)},_processNextPrev:function(e,t){if(e&&t.find(".e-arrow-sans-left").hasClass("e-disable")||!e&&t.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;switch(c("table",t).get(0).className){case"e-dp-viewhours":incVal=e?-1:1,this._datetimeValue.setDate(this._datetimeValue.getDate()+incVal),this._disableRange("hour"),this._hoverHour=this._setFocusByIndex("hour",this._hoverHour,this._sfTimeHour),c(".e-hours-headertext",this._sfTimeHour).text(m.format(this._datetimeValue,"dd MMM yyyy")),c(".e-minitues-headertext",this._sfTimeMins).text(m.format(this._datetimeValue,"dd MMM yyyy"));break;case"e-dp-viewmins":incVal=e?-1:1,this._datetimeValue.setHours(this._datetimeValue.getHours()+incVal),this._generateMins(c.trim(m.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)));var i=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),s=c.trim(m.format(this.timePicker._createObject(i),"HH:mm",this.model.locale)),i=c.trim(m.format(this.timePicker._createObject(i),"HH:00",this.model.locale));index=(this.timePicker._parse(s)-this.timePicker._parse(i))/(6e4*this.model.timeDrillDown.interval),index=Math.ceil(index),this._disableRange("mins"),this._hoverMins=this._setFocusByIndex("mins",index,this._sfTimeMins),c(".e-hours-headertext",this._sfTimeHour).text(m.format(this._datetimeValue,"dd MMM yyyy")),c(".e-minitues-headertext",this._sfTimeMins).text(m.format(this._datetimeValue,"dd MMM yyyy"))}},_forwardNavHandler:function(e,t){var i;if(this.model.readOnly||!this.model.enabled)return!1;switch(e&&e.preventDefault(),(e?c(e.currentTarget):t.find(".e-text>span")).get(0).className){case"e-hours-headertext":this._sfTimeHour.css("display","none"),this._dateContainer.css("display","block"),this._addFocus(this._dateContainer.find(".e-datepicker"));break;case"e-minitues-headertext":this._sfTimeMins.css("display","none"),this._disableRange("hour"),start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),i=c.trim(m.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),indx=(this.timePicker._parse(i)-this.timePicker._parse(start))/(6e4*this._interval),indx=Math.floor(indx),this._hoverHour=this._setFocusByIndex("hour",indx,this._sfTimeHour),c(".e-hours-headertext",this._sfTimeHour).text(m.format(this._datetimeValue,"dd MMM yyyy")),c(".e-minitues-headertext",this._sfTimeMins).text(m.format(this._datetimeValue,"dd MMM yyyy")),this._sfTimeHour.css("display","block"),this._addFocus(this._sfTimeHour)}},_renderDateControl:function(){var e=m.buildTag("input#"+this.element[0].id+"_date","",{},{type:"text"});this.popup.append(e),e.ejDatePicker({height:"0px",width:"0px",displayInline:!0,showDateIcon:!1,showFooter:!!this.model.timeDrillDown.enabled&&this.model.timeDrillDown.showFooter,enableStrictMode:!0,buttonText:this._localizedLabels.buttonText.today,minDate:this._stringToObject(this.model.minDateTime),maxDate:this._stringToObject(this.model.maxDateTime),dayHeaderFormat:this.model.dayHeaderFormat,startLevel:this.model.startLevel,depthLevel:this.model.depthLevel,startDay:this.model.startDay,stepMonths:this.model.stepMonths,showOtherMonths:this.model.showOtherMonths,headerFormat:this.model.headerFormat,enabled:this.model.enabled,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,readOnly:this.model.readOnly,cssClass:this.model.cssClass,locale:this.model.locale}),this.datePicker=e.data("ejDatePicker"),this.model.startDay=this.datePicker.model.startDay,this.datePicker._getInternalEvents=!0,this.datePicker._dt_drilldown=!0,this.datePicker.popup.css({position:"static",display:"block"})},_renderTimeControl:function(){var e,t=m.buildTag("input#"+this.element[0].id+"_time","",{},{type:"text"});this.popup.append(t),t.ejTimePicker({height:"0px",width:"0px",interval:this.model.interval,timeFormat:this.model.timeDisplayFormat,popupWidth:this.model.timePopupWidth,enabled:this.model.enabled,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,readOnly:this.model.readOnly,cssClass:this.model.cssClass,locale:this.model.locale}),this.timePicker=t.data("ejTimePicker"),this.timePicker._getInternalEvents=!0,this.timePicker.showDropdown=!0,this.timePicker._dateTimeInternal=!0,this.timePicker.popup.css({position:"static",display:"block"}),t=this.model.minDateTime?this._stringToObject(this.model.minDateTime):this.defaults.minDateTime,e=this.model.maxDateTime?this._stringToObject(this.model.maxDateTime):this.defaults.maxDateTime,""==this.model.value&&(this.timePicker.option("minTime",this._getFormat(t,this.timePicker.model.timeFormat)),this.timePicker.option("maxTime",this._getFormat(e,this.timePicker.model.timeFormat)))},_updateTimeHeight:function(){var e=this.datePicker.popup.height()-this.popup.find(".e-header").height(),e=this.popup.hasClass("e-dt-responsive")?"98px":e;this.timePicker.option("popupHeight",e)},_bindOperations:function(){var t=this;this.datePicker.option("layoutChange",function(){t._updateTimeHeight()}),this.datePicker.option("outOfRange",function(){t.isValidState=!1}),this.timePicker.option("outOfRange",function(){t.isValidState=!1}),this.datePicker.option("change",function(e){t._refreshTimes(e)}),this.datePicker.option("select",function(e){t._updateInput(e)}),this.datePicker.option("dt_drilldown",function(e){t.model.timeDrillDown.enabled&&(t._updateInput(e),t._switchToDrilDown(e))}),this.timePicker.option("select",function(){t._updateInput()})},_switchToDrilDown:function(){var e;this._dateContainer.hide(),this._sfTimeHour.show(),this._addFocus(this._sfTimeHour),e=new Date(this.model.value.toString()),this._datetimeValue=new Date(e.setHours(this._datetimeValue.getHours(),this._datetimeValue.getMinutes(),this._datetimeValue.getSeconds(),this._datetimeValue.getMilliseconds())),this._disableRange("hour"),start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),e=c.trim(m.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),indx=(this.timePicker._parse(e)-this.timePicker._parse(start))/(6e4*this._interval),indx=Math.floor(indx),this._hoverHour=this._setFocusByIndex("hour",indx,this._sfTimeHour),c(".e-hours-headertext",this._sfTimeHour).text(m.format(this._datetimeValue,"dd MMM yyyy")),c(".e-minitues-headertext",this._sfTimeMins).text(m.format(this._datetimeValue,"dd MMM yyyy"))},_disableRange:function(e){var t,s,a,n="hour"==e?this._interval:this.model.timeDrillDown.interval,r="hour"==e?this._sfTimeHour:this._sfTimeMins,l="hour"==e?"e-hide-hour e-disable":"e-hide-mins e-disable";if(r.find("tbody tr td.e-"+e).removeClass(l),r.find(".e-arrow-sans-left").removeClass("e-disable"),r.find(".e-arrow-sans-right").removeClass("e-disable"),start="hour"==e?this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"):this._localizeTime(c.trim(m.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),"HH:00"),this._compareDate(this.model.minDateTime,this._datetimeValue)){if("mins"==e&&this.model.minDateTime.getHours()!==this._datetimeValue.getHours())return!1;for(t=c.trim(m.format(this.timePicker._createObject(this.model.minDateTime),"HH:mm",this.model.locale)),indx=(this.timePicker._parse(t)-this.timePicker._parse(start))/(6e4*n),indx="hour"==e?Math.floor(indx):Math.ceil(indx),i=0;i<indx;i++)a=r.find("tbody tr td.e-"+e)[i],c(a).addClass(l);r.find(".e-arrow-sans-left").addClass("e-disable")}if(this._compareDate(this.model.maxDateTime,this._datetimeValue)){if("mins"==e&&this.model.maxDateTime.getHours()!==this._datetimeValue.getHours())return!1;for(t=c.trim(m.format(this.timePicker._createObject(this.model.maxDateTime),"HH:mm",this.model.locale)),indx=(this.timePicker._parse(t)-this.timePicker._parse(start))/(6e4*n),indx=Math.floor(indx)+1,s=r.find("tbody tr td.e-"+e).length,i=indx;i<s;i++)a=r.find("tbody tr td.e-"+e)[i],c(a).addClass(l);r.find(".e-arrow-sans-right").addClass("e-disable")}},_setFocusByName:function(e,i,t){var s,a,n=t.find("tbody tr td.e-"+e);return c(n).each(function(e,t){t.innerHTML==i&&(s=e)}),a=(a=n[s])||n.last(),t.find("table td").removeClass("e-state-hover").removeClass("e-active"),c(a).hasClass("e-hide-"+e)||c(a).addClass("e-state-hover"),this._setActiveState(e,t),s},_setFocusByIndex:function(e,t,i){var s=i.find("tbody tr td.e-"+e),a=s[t];return a=a||s.last(),i.find("table td").removeClass("e-state-hover").removeClass("e-active"),c(a).hasClass("e-hide-"+e)||c(a).addClass("e-state-hover"),this._setActiveState(e,i),t},_setActiveState:function(e,t){var i,s,a=t.find("tbody tr td.e-"+e),n=-1;switch(e){case"hour":this._compareDate(this.model.value,this._datetimeValue)&&(start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),i=c.trim(m.format(this.timePicker._createObject(this.model.value),"HH:00",this.model.locale)),n=(this.timePicker._parse(i)-this.timePicker._parse(start))/(6e4*this._interval),n=Math.floor(n));break;case"mins":this._compareDate(this.model.value,this._datetimeValue)&&this.model.value.getHours()===this._datetimeValue.getHours()&&(s=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),i=c.trim(m.format(this.timePicker._createObject(s),"HH:mm",this.model.locale)),s=c.trim(m.format(this.timePicker._createObject(s),"HH:00",this.model.locale)),n=(this.timePicker._parse(i)-this.timePicker._parse(s))/(6e4*this.model.timeDrillDown.interval),n=Math.ceil(n))}(e=a[n])&&(t.find("table td").removeClass("e-active"),c(e).removeClass("e-state-hover").addClass("e-active"))},_compareDate:function(e,t){return+new Date(e.toString()).setHours(0,0,0,0)==+new Date(t.toString()).setHours(0,0,0,0)},_updateInput:function(e){var t=(new Date).setHours(0,0,0,0),i=this._getDate()||new Date,t=this._getTime()||this.timePicker._createObject(t);this.model.value=new Date(i.getFullYear(),i.getMonth(),i.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()),this._preVal=this._objectToString(this.model.value),this._updateDateTime(),this._raiseChangeEvent(),this._updateModel(e),e&&(e.cancel=!0)},_updateDateTime:function(){this.isValidState=!0;var e=this._objectToString(this.model.value);this.element.val(e),this._removeWatermark()},_refreshTimes:function(e){var t,e=this._getDateObj(e.value,this.datePicker.model.dateFormat);if(!e)return!1;this.isValidState=!0,this._compare(e,this._setEmptyTime(this.model.minDateTime))?(t=this._getFormat(this.model.minDateTime,this.timePicker.model.timeFormat),this._getTime(),this.timePicker.option("minTime",t),this.model.enableStrictMode||this._updateInput()):this.timePicker.option("minTime",this._defaultMinVal()),this._compare(e,this._setEmptyTime(this.model.maxDateTime))?(t=this._getFormat(this.model.maxDateTime,this.timePicker.model.timeFormat),this._getTime(),this.timePicker.option("maxTime",t),this.model.enableStrictMode||this._updateInput()):this.timePicker.option("maxTime",this._defaultMaxVal()),this.timePicker._changeActiveEle()},_defaultMinVal:function(){var e=(new Date).setHours(0,0,0,0);return m.format(this.timePicker._createObject(e),this.timePicker.model.timeFormat,this.timePicker.model.locale)},_defaultMaxVal:function(){var e=(new Date).setHours(23,59,59,59);return m.format(this.timePicker._createObject(e),this.timePicker.model.timeFormat,this.timePicker.model.locale)},_updateValues:function(){var e=this.model.value;null!=this.model.value&&(this.datePicker.option("value",this.model.value),this.timePicker.option("value",this.model.value)),this._setValue(e),this._validateMinMax(),this._preVal=this.element.val(),this._checkErrorClass()},_specificFormat:function(){var e=m.globalize._getDateParseRegExp(m.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return-1<c.inArray("dddd",e.groups)||-1<c.inArray("ddd",e.groups)},_setValue:function(e){return!e||"object"==typeof JSON&&"{}"===JSON.stringify(e)?(this.element.val(""),this.model.value=null,this.isValidState=!0):"string"==typeof e?this._extISORegex.exec(e)||this._basicISORegex.exec(e)?this._checkObject(this._dateFromISO(e)):(this.element.val(e),this._updateModel(),this._validateMinMax(),this._checkStrictMode()):e instanceof Date&&this._isValidDate(e)&&this._checkObject(e),this._checkErrorClass(),this.model.value},_checkObject:function(e){e instanceof Date&&this._isValidDate(e)&&(this.model.value=e,this._updateDateTime(),this._validateMinMax(),this._checkStrictMode())},_dateFromISO:function(e){var t,i,s,a,n,r,l,o=this._extISORegex.exec(e)||this._basicISORegex.exec(e),d="",h="",c="";if(o){for(t=0;t<this._dates.length;t++)if(this._dates[t][1].exec(o[1])){d=this._dates[t][0];break}if(o[3])for(i=0;i<this._times.length;i++)if(this._times[i][1].exec(o[3])){h=(o[2]||" ")+this._times[i][0];break}for(s=(d+h+(c=o[4]&&this._zeroRegex.exec(o[4])?"Z":c)).match(this._tokens),a=[],r=0;r<s.length;r++)l=s[r],n=this._checkLiteral(s[r]),l=this._numberRegex[n?s[r].toLowerCase():l.length]||new RegExp("^\\d{1,"+l.length+"}"),(l=e.match(l))&&(0<=e.substr(0,e.indexOf(l))&&!n&&(0<=s[r].indexOf("M")?a.push(parseInt(l[0])-1):a.push(parseInt(l[0]))),e=e.slice(e.indexOf(l[0])+l[0].length));return new Date(a[0],a[1],a[2],a[3],a[4],a[5])}},_checkLiteral:function(e){return"t"==(char=e.toLowerCase())||"z"==char||":"==char||"-"==char},_validateValue:function(e){e=m.parseDate(e,this.model.dateTimeFormat);!e||e<this.model.minDateTime||e>this.model.maxDateTime?(this.model.value=null,this._change("value",this.model.value),this.isValidState=!1):(this._change("value",this.model.value),this.isValidState=!0)},_validateMinMax:function(){var e=this.model.value?this._stringToObject(this.model.value):null,t=this.model.minDateTime?this._stringToObject(this.model.minDateTime):this.defaults.minDateTime,i=this.model.maxDateTime?this._stringToObject(this.model.maxDateTime):this.defaults.maxDateTime;if(!e||!t||!i)return!1;i<t&&(this.model.minDateTime=this.model.maxDateTime),e<t&&(this.model.enableStrictMode?this.model.enableStrictMode&&(this.datePicker.option("minDate",this._getFormat(t,this.datePicker.model.dateFormat)),this.timePicker.option("minTime",this._getFormat(t,this.timePicker.model.timeFormat)),this.isValidState=!1):(this._setValue(t),this.isValidState=!0)),i<e&&(this.model.enableStrictMode?this.model.enableStrictMode&&(this.datePicker.option("maxDate",this._getFormat(i,this.datePicker.model.dateFormat)),this.timePicker.option("maxTime",this._getFormat(i,this.timePicker.model.timeFormat)),this.isValidState=!1):(this._setValue(i),this.isValidState=!0)),e<t||i<e||(this.isValidState=!0)},_checkProperties:function(){this.model.readOnly&&this._readOnly(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0),this.model.enableRTL&&this._setRtl(!0),this.model.enabled&&this._enabled(!0),this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&this._enabled(!0):this._enabled(!1),this.element.attr("name")||this.element.attr({name:this.element[0].id}),this._checkStrictMode(),this._checkErrorClass(),this._datetimeValue=new Date(this.datePicker._dateValue.toString()),m.isNullOrUndefined(this.model.value)||(this._datetimeValue=new Date(this.model.value.toString())),this._setWaterMark()},_checkStrictMode:function(){this.model.enableStrictMode||this.isValidState||(this.model.value<this.model.minDateTime?(this.element.val(this._objectToString(this.model.minDateTime)),this.model.value=this.model.minDateTime):this.model.value>this.model.maxDateTime?(this.element.val(this._objectToString(this.model.maxDateTime)),this.model.value=this.model.maxDateTime):(this.model.value="",this.element.val("")),this.isValidState=!0)},_targetFocus:function(e){e.preventDefault(),this.isFocused=!0,this.wrapper.addClass("e-focus"),this.wrapper.removeClass("e-error"),this._isSupport||this._hiddenInput.css("display","none"),this._prevDateTimeVal=this.element.val(),this.model.showPopupButton||this.model.readOnly||this._showResult(),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{value:this.model.value})},_targetBlur:function(){var e;this.isFocused=!1,this.wrapper.removeClass("e-focus"),this.model.showPopupButton||this._hideResult(),(e=m.parseDate(this.element.val(),this.model.dateTimeFormat))&&!this.model.enableStrictMode&&(e<this.model.minDateTime||e>this.model.maxDateTime)&&(e=e<this.model.minDateTime?this.model.minDateTime:this.model.maxDateTime,this.element.val(this._objectToString(e))),null!=m.parseDate(this.element.val(),this.model.dateTimeFormat)||this.model.enableStrictMode||(null==this._prevDateTimeVal||""==this.element.val()?this.element.val(""):this.element.val(this._preVal)),this._valueChange(),this.model.enableStrictMode?""!=this.element.val()&&this._validateValue(this.element.val()):this.isValidState?this._prevDateTimeVal=this.element.val():(this.element.val(this._prevDateTimeVal),this._preVal=this._prevDateTimeVal,this.model.value=this._stringToObject(this._prevDateTimeVal),this.isValidState=!0),this._isSupport||""!=this.element.val()||this._hiddenInput.css("display","block"),this._checkErrorClass(),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),this._trigger("focusOut",{value:this.model.value})},_elementClick:function(){this.isPopupOpen||this._showResult()},_keyDownOnInput:function(e){switch(e.keyCode){case 40:e.altKey&&this._showhidePopup();break;case 37:case 39:this.model.timeDrillDown.enabled||e.altKey&&this.isPopupOpen&&(e.preventDefault(),this._addPrevNextFocus(37==e.keyCode));break;case 27:e.preventDefault();case 9:this._hideResult();break;case 13:this.model.timeDrillDown.enabled||this._valueChange()}},_addFocus:function(e){e.hasClass("e-focus")||(this._removeFocus(),e.addClass("e-focus"),e.hasClass("e-datepicker e-popup")?c(document).on("keydown",c.proxy(this.datePicker._keyboardNavigation,this.datePicker)):e.hasClass("e-timecontainer")?c(document).on("keydown",c.proxy(this.timePicker._keyDownOnInput,this.timePicker)):e.hasClass("e-time-hours")?c(document).on("keydown",c.proxy(this._keyDownOnHours,this)):e.hasClass("e-time-minitues")?c(document).on("keydown",c.proxy(this._keyDownOnMinutes,this)):e.hasClass("e-dt-button")&&c(document).on("keydown",c.proxy(this._buttonClick,this)))},_removeFocus:function(){var e=this._getFocusedElement();0<e.length&&(e.removeClass("e-focus"),e.hasClass("e-datepicker e-popup")?c(document).off("keydown",c.proxy(this.datePicker._keyboardNavigation,this.datePicker)):e.hasClass("e-timecontainer")?c(document).off("keydown",c.proxy(this.timePicker._keyDownOnInput,this.timePicker)):e.hasClass("e-time-hours")?c(document).off("keydown",c.proxy(this._keyDownOnHours,this)):e.hasClass("e-time-minitues")?c(document).off("keydown",c.proxy(this._keyDownOnMinutes,this)):e.hasClass("e-dt-button")&&c(document).off("keydown",c.proxy(this._buttonClick,this)))},_addPrevNextFocus:function(e){var t,i=this._getFocusedElement();0<i.length?i.hasClass("e-datepicker e-popup")?t=e?this.popup.find(".e-dt-done"):this.popup.find(".e-timecontainer"):i.hasClass("e-timecontainer")?t=e?this.popup.find(".e-datecontainer >.e-datepicker.e-popup"):this.popup.find(".e-dt-today"):i.hasClass("e-dt-today")?t=e?this.popup.find(".e-timecontainer"):this.popup.find(".e-dt-now"):i.hasClass("e-dt-now")?t=e?this.popup.find(".e-dt-today"):this.popup.find(".e-dt-done"):i.hasClass("e-dt-done")&&(t=e?this.popup.find(".e-dt-now"):this.popup.find(".e-datecontainer >.e-datepicker.e-popup")):t=e?this.popup.find(".e-dt-done"):this.popup.find(".e-datecontainer >.e-datepicker.e-popup"),this._addFocus(t)},_getFocusedElement:function(){return this.popup.children("div").find("div.e-focus")},_keyDownOnHours:function(e){var t;37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode&&36!=e.keyCode&&35!=e.keyCode||(e.preventDefault&&e.preventDefault(),(t={row:null,col:null}).col=this._sfTimeHour.find("tbody tr td.e-state-hover").index(),t.row=this._sfTimeHour.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this._sfTimeHour.find("tbody tr td.e-active").index()+1,-1!=t.row?(t.row=t.row+1,this.model.timeDrillDown.showMeridian&&this._sfTimeHour.find("tbody tr td.e-state-hover").hasClass("e-hour-pm")&&(t.row=t.row+2)):(t.row=this._sfTimeHour.find("tbody tr td.e-active").parent().index()+1,this.model.timeDrillDown.showMeridian&&this._sfTimeHour.find("tbody tr td.e-active").hasClass("e-hour-pm")&&(t.row=t.row+2)),this._sfTimeHour.find("table")[0].className,rowLength=this._sfTimeHour.find("tbody.e-timepicker-hours tr").length,colLength=this.model.timeDrillDown.showMeridian?6:4,t=this._changeRowCol(t,e.keyCode,rowLength,colLength,"hours",e.ctrlKey),e.ctrlKey||(this._hoverHour=this._sfTimeHour.find("tbody.e-timepicker-hours tr td").index(t)),e.ctrlKey)||(this._sfTimeHour.find("table td").removeClass("e-state-hover"),t.addClass("e-state-hover"))},_changeRowCol:function(e,t,i,s,a,n){var r,l,o,d={parent:null,child:null};switch(a){case"hours":r="tbody.e-timepicker-hours tr td.e-hour",d.parent=".e-timepicker-hours",d.child=".e-hour",hiddenClass=".e-hide-hour",l=this._sfTimeHour;break;case"mins":r="tbody.e-timepicker-mins tr td.e-mins",d.parent=".e-timepicker-mins",d.child=".e-mins",hiddenClass=".e-hide-mins",s=(l=this._sfTimeMins).find("tbody"+d.parent+" tr:nth-child("+e.row+") td"+d.child).length}if(e.row<=0&&e.col<=0)return l.find(r+":not(.e-disable):first");switch(t){case 36:return l.find(r+":not(.e-disable):first");case 35:return l.find(r+":not(.e-disable):last");case 38:if(n)this._forwardNavHandler(null,l);else{if(!(1<e.row))return this._processNextPrev(!0,l),l.find(r+":nth-child("+e.col+"):last");--e.row}if((o=this._getCell(e,d,l).not(hiddenClass)).length<=0){if(null!==(o=this._findVisible(e,d,"up",l)))return o;this._processNextPrev(!0,l),o=l.find(r+":nth-child("+e.col+"):last")}return o;case 37:if(n)return this._processNextPrev(!0,l),l.find("tbody tr td.e-state-hover");if(1<e.col)--e.col;else{if(!(1<e.row))return this._processNextPrev(!0,l),l.find(r+":not(.e-disable):last");e={row:e.row-1,col:s},"mins"==a&&(e.col=s=l.find("tbody"+d.parent+" tr:nth-child("+e.row+") td"+d.child).length)}if((o=this._getCell(e,d,l).not(hiddenClass)).length<=0){if(null!==(o=this._findVisible(e,d,"left",l)))return o;this._processNextPrev(!0,l),o=l.find(r+":not(.e-disable):last")}return o;case 39:if(n)return this._processNextPrev(!1,l),l.find("tbody tr td.e-state-hover");if(e.col<s)e.col+=1;else{if(!(e.row<i))return this._processNextPrev(!1,l),l.find(r+":not(.e-disable):first");e={row:e.row+1,col:1}}if((o=this._getCell(e,d,l).not(hiddenClass)).length<=0){if(null!==(o=this._findVisible(e,d,"right",l)))return o;this._processNextPrev(!1,l),o=l.find(r+":not(.e-disable):first")}return o;case 40:if(!n){if(!(e.row<i))return this._processNextPrev(!1,l),l.find(r+":nth-child("+e.col+"):first");if(e.row+=1,(o=this._getCell(e,d,l).not(hiddenClass)).length<=0){if(null!==(o=this._findVisible(e,d,"down",l)))return o;this._processNextPrev(!1,l),o=l.find(r+":nth-child("+e.col+"):first")}return o}case 13:o=this._getCell(e,d,l),c(o)[0],args={type:null,target:o},"hours"==a&&this._hourNavHandler(args),"mins"==a&&this._minsNavHandler(args)}return this._getCell(e,d,l).not(hiddenClass)},_getCell:function(e,t,i){var s=e.row;return this.model.timeDrillDown.showMeridian&&2<e.row&&i.hasClass("e-time-hours")&&(s-=2),s=i.find("tbody"+t.parent+" tr:nth-child("+s+") td"+t.child+":nth-child("+e.col+")"),s=this.model.timeDrillDown.showMeridian&&0<s.length&&i.hasClass("e-time-hours")?e.row<=2?c(s[0]):c(s[1]):s},_findVisible:function(e,t,s,a){var n=e.col,r=e.row,l=t.child.slice(1,t.child.length);for(i=0;0<=i;i++){if((nextElement=this._getCell({row:r,col:n},t,a)).length<=0)return null;if(nextElement.hasClass("e-disable")||!nextElement.is(":visible")){if("right"==s||"left"==s?"right"==s?n++:n--:"down"==s?r++:r--,r<=0||r>a.find("tbody"+t.parent+" tr").length||(n>a.find("tbody"+t.parent+" tr:nth-child("+r+") td").length&&(r++,n=1),n<=0&&(r--,n=a.find("tbody"+t.parent+" tr:nth-child("+r+") td").length),r<=0)||r>a.find("tbody"+t.parent+" tr").length)return null}else if(nextElement.hasClass(l))return e.col=n,e.row=r,nextElement=this._getCell(e,t,a)}},_keyDownOnMinutes:function(e){var t;37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode&&36!=e.keyCode&&35!=e.keyCode||(e.preventDefault&&e.preventDefault(),(t={row:null,col:null}).col=this._sfTimeMins.find("tbody tr td.e-state-hover").index(),t.row=this._sfTimeMins.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this._sfTimeMins.find("tbody tr td.e-active").index()+1,t.row=-1!=t.row?t.row+1:this._sfTimeMins.find("tbody tr td.e-active").parent().index()+1,this._sfTimeMins.find("table")[0].className,rowLength=this._sfTimeMins.find("tbody.e-timepicker-mins tr").length,colLength=4,t=this._changeRowCol(t,e.keyCode,rowLength,colLength,"mins",e.ctrlKey),e.ctrlKey||(this._hoverHour=this._sfTimeMins.find("tbody.e-timepicker-mins tr td").index(t)),e.ctrlKey)||(this._sfTimeMins.find("table td").removeClass("e-state-hover"),t.addClass("e-state-hover"))},_valueChange:function(e){this.model.enableStrictMode?this.model.enableStrictMode&&(this._preVal!=this.element.val()||this.model.value<this.model.minDateTime||this.model.value>this.model.maxDateTime)&&(this._updateModel(),this._raiseChangeEvent(e)):(this._preVal!=this.element.val()&&(this._preVal=this.element.val(),this._updateModel(),this._validateMinMax(),this._raiseChangeEvent(e)),this._setWaterMark())},_updateModel:function(e){var t;this._stopRefresh?this._stopRefresh=!1:""==(t=this.element.val())?(this.model.value=null,this._change("value",this.model.value),this.isValidState=!0):(e=e!=s&&"select"==e.type||this._prevDateTimeVal==this.element.val()?this.model.value:m.parseDate(t,this.model.dateTimeFormat,this.model.locale))?(this.model.value=e,this.isValidState=!0,this._refreshPopup(),this._specificFormat()&&this._prevDateTimeVal!=this.element.val()&&this.element.val(this._objectToString(this.model.value))):(this.model.value=null,this._change("value",this.model.value),this.isValidState=!1)},_refreshPopup:function(){var e,t,i,s;this.isValidState&&this.isPopupOpen&&(e=this._setEmptyTime(this.model.value),t=this._setEmptyDate(this.model.value),i=this._getDate(),s=this._getTime(),i&&this._compare(i,e)||this.datePicker.option("value",e),s&&this._compare(s,t)||this.timePicker.option("value",t))},_buttonClick:function(e){13==e.keyCode&&(e.preventDefault(),(e=this._getFocusedElement()).hasClass("e-dt-today")?this._todayClick():e.hasClass("e-dt-now")?this._nowClick():e.hasClass("e-dt-done")&&this._doneClick())},_todayClick:function(){if(!this.model.enabled||this.model.readOnly)return!1;this.datePicker.popup.find(".today").hasClass("e-active")&&this.datePicker.popup.children("table").hasClass("e-dp-viewdays")&&""!=this.element.val()&&this.isValidState||(this.datePicker._setCurrDate(),this._updateInput())},_nowClick:function(){if(!this.model.enabled||this.model.readOnly)return!1;this.timePicker.setCurrentTime();var e=this.model.minDateTime,t=this.model.maxDateTime,i=this.datePicker.model.value,s=new Date,i=m.isNullOrUndefined(i)?new Date:i;(i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()))<e?this.timePicker.option("value",this.timePicker._localizeTime(e)):t<i&&this.timePicker.option("value",this.timePicker._localizeTime(t)),this._updateInput()},_doneClick:function(){this._hideResult()},_iconClick:function(e){e.preventDefault(),this.isFocused||m.isTouchDevice()||this.element.focus(),this._showhidePopup(),this._isIE9&&this.popup.find(".e-popup-container").css("display","inline-block")},_setInitialSelection:function(){var e,t,i=this.timePicker.ul.find("li");i.hasClass("e-hover")||(t=e=this.timePicker._setEmptyDate(new Date),this.timePicker.minTime&&!this._compareTime(this._createObject(e),this.timePicker.minTime,!0)&&(t=this.timePicker.minTime),this.timePicker.maxTime&&!this._compareTime(this.timePicker.maxTime,this._createObject(e),!0)&&(t=this.timePicker.maxTime),e=i.first().html(),t=(this.timePicker._parse(t)-this.timePicker._parse(e))/(6e4*this.timePicker.model.interval),t=Math.round(t),((activeItem=t==i.length?t:t+1)<0||activeItem>i.length||isNaN(activeItem))&&(activeItem=1),c(this.timePicker.ul.find("li")[activeItem-1]).addClass("e-hover"),this._calcScrollTop())},_calcScrollTop:function(){this.timePicker.ul.outerHeight();var e=this.timePicker.ul.find("li").outerHeight(),e=e*this.timePicker.ul.find("li.e-hover").index()-(this.timePicker.popupList.outerHeight()-e)/2;this.timePicker.scrollerObj.setModel({scrollTop:e})},_showhidePopup:function(){if(this.model.readOnly)return!1;this.isPopupOpen?this._hideResult():this._showResult()},_showResult:function(){if(this.isPopupOpen||!this.model.enabled||this._trigger("beforeOpen",{element:this.popup}))return!1;this.isPopupOpen=!0,this._setListPosition(),this._checkForResponsive();var e=this;this.popup.slideDown(this.model.enableAnimation?200:0,function(){e._on(c(document),"mousedown",e._OnDocumentClick),e.model.timeDrillDown.enabled&&e._addFocus(e._dateContainer.find(".e-datepicker")),e.timePicker.model.value||e._setInitialSelection()}),this._updateModel(),this._updateTimeHeight(),this._validateMinMax(),this._on(c(window),"resize",this._OnWindowResize),this._on(m.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("open"),this._initial&&(this.timePicker._refreshScroller(),this.timePicker._changeActiveEle(),this._initial=!1),this.wrapper.addClass("e-active")},_hideResult:function(e){var t=this;if(!this.isPopupOpen||this._trigger("beforeClose",{element:this.popup}))return!1;this.isPopupOpen=!1,this._removeFocus(),this._popClose&&e&&"click"!=e.type?this.isPopupOpen=!0:(this.popup.slideUp(this.model.enableAnimation?100:0,function(){t.model&&(t.model.timeDrillDown.enabled&&(t._sfTimeHour.hide(),t._sfTimeMins.hide(),t._dateContainer.show()),m.isNullOrUndefined(t.model.value)||(t._datetimeValue=new Date(t.model.value.toString())))}),this._raiseEvent("close"),this._off(c(document),"mousedown",this._OnDocumentClick),this._off(c(window),"resize",this._OnWindowResize),this._off(m.getScrollableParents(this.wrapper),"scroll",this._hideResult),this.wrapper.removeClass("e-active"))},_setListPosition:function(){var e=this.wrapper,t=this._getOffset(e),i=c(document).scrollTop()+c(window).height()-(t.top+c(e).outerHeight()),s=t.top-c(document).scrollTop(),a=this.popup.outerHeight(),n=this.popup.outerWidth(),r=t.left,l=e.outerHeight(),o=(l-e.height())/2,d=this._getZindexPartial(),i=(this.model.popupPosition,this.model.popupPosition==m.PopupPosition.Bottom?(a<i||s<a?t.top+l+3:t.top-a-3)-o:(s<a?t.top+l+3:t.top-a-3)-o),s=c(document).scrollLeft()+c(window).width()-r;(this.model.enableRTL||s<n&&n<r+e.outerWidth())&&(r-=this.popup.outerWidth()-e.outerWidth()),this.popup.css({left:r+"px",top:i+"px","z-index":d})},_getOffset:function(e){return m.util.getOffset(e)},_OnDocumentClick:function(e){this.model&&(c(e.target).is(this.popup)||c(e.target).parents(".e-datetime-popup").is(this.popup)||c(e.target).is(this.wrapper)||c(e.target).parents(".e-datetime-wrap").is(this.wrapper)?(c(e.target).is(this.popup)||c(e.target).parents(".e-datetime-popup").is(this.popup))&&(e.preventDefault(),0<c(e.target).parents(".e-datepicker").length?this._addFocus(c(e.target).parents(".e-datepicker")):0<c(e.target).parents(".e-timecontainer").length?this._addFocus(c(e.target).parents(".e-timecontainer")):c(e.target).hasClass("e-dt-button")?this._addFocus(c(e.target)):0<c(e.target).parents(".e-time-hours").length?this._addFocus(c(e.target).parents(".e-time-hours")):0<c(e.target).parents(".e-time-minitues").length?this._addFocus(c(e.target).parents(".e-time-minitues")):this._removeFocus()):this._hideResult())},_OnWindowResize:function(){this._setListPosition(),this._checkForResponsive(),this._updateTimeHeight()},_raiseChangeEvent:function(e){var t;+m.parseDate(this._prevDateTimeVal,this.model.dateTimeFormat)==+m.parseDate(this.element.val(),this.model.dateTimeFormat)?this._prevDateTimeVal!=this.element.val()&&(t={prevDateTime:this._prevDateTimeVal,value:this.element.val(),isValidState:this.isValidState},this._prevDateTimeVal=this.element.val(),this._trigger("_change",t)):(t={prevDateTime:this._prevDateTimeVal,value:this.element.val(),isInteraction:!e,isValidState:this.isValidState},this._trigger("_change",t),t.value=""==c.trim(this.element.val())?null:this.element.val(),this._trigger("change",t),this._prevDateTimeVal=this.element.val())},_raiseEvent:function(e){return!(null==this.element||!this.model[e])&&this._trigger(e,{prevDateTime:this._preVal,value:this.element.val()})},_getDateTimeFormat:function(){var e=m.preferredCulture(this.model.locale).calendar.patterns;this.model.dateTimeFormat||(this.model.dateTimeFormat=e.d+" "+e.t),this.model.timeDisplayFormat||(this.model.timeDisplayFormat=e.t)},_getZindexPartial:function(){return m.util.getZindexPartial(this.element,this.popup)},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")},_getDate:function(){return this.datePicker.model.value},_getTime:function(){return this._getDateObj(this.timePicker.model.value,this.timePicker.model.timeFormat)},_setEmptyTime:function(e){e=new Date(e);return e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),e},_setEmptyDate:function(e){e=new Date(e);return e.setDate(1),e.setMonth(0),e.setFullYear(2e3),e},_objectToString:function(e){return this._getFormat(e,this.model.dateTimeFormat)},_stringToObject:function(e){return this._getDateObj(e,this.model.dateTimeFormat)},_getFormat:function(e,t){return e instanceof Date?(t=this._checkFormat(t),m.format(e,t,this.model.locale)):e},_checkFormat:function(e){var t=this,i=this._regExp();return e.replace(i,function(e){return"/"===e&&"/"!==m.preferredCulture(t.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},_getDateObj:function(e,t){var i,s;return"string"==typeof e?(t=this._checkFormat(t),null!=(t=m.parseDate(e,t,this.model.locale))?t:""==e||null==e?null:(t=/^\s*(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d).*Z\s*$/.exec(e),s=new Date,t&&(s=new Date,i=+t[2],s.setUTCFullYear(t[1],i-1,t[3]),s.setUTCHours(t[4],t[5],t[6]),i!=s.getUTCMonth()+1)&&s.setTime(),this._isValidDate(s)?s:void 0)):e},_compare:function(e,t){return e&&t&&e.getTime()==t.getTime()},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_change:function(e,t){this.datePicker.option(e,t),this.timePicker.option(e,t)},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popup.removeClass(this.model.cssClass).addClass(e),this._change("cssClass",e)},_localize:function(e){var t,s;if(this.model.locale=e,this.model.dateTimeFormat=this.model.timeDisplayFormat="",t=["AM","PM"],this._getDateTimeFormat(),this._localizedLabels=this._getLocalizedLabels(),m.isNullOrUndefined(this._options)||(m.isNullOrUndefined(this._options.buttonText)||c.extend(this._localizedLabels.buttonText,this._options.buttonText),m.isNullOrUndefined(this._options.watermarkText))||(this._localizedLabels.watermarkText=this._options.watermarkText),this._localizedLabelToModel(),this._buttonText(this._localizedLabels.buttonText),(this.isValidState||this.model.value instanceof Date&&this._isValidDate(this.model.value))&&this.element.val(this._objectToString(this.model.value)),this._preVal=this.element.val(),this._change("locale",e),this.model.startDay=this.datePicker.model.startDay,this._validateMeridian(),this._sfTimeHour.empty(),this._renderHourTable(),this.model.timeDrillDown.showMeridian)for(i=0;i<2;i++)s=m.isNullOrUndefined(m.preferredCulture(this.model.locale).calendars.standard[t[i]])?"":m.preferredCulture(this.model.locale).calendars.standard[t[i]][0],c("span.e-hours-meridiantxt-"+t[i].toLowerCase(),this._sfTimeHour).text(s)},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?c(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_readOnly:function(e){(this.model.readOnly=e)?this.element.attr("readonly","readonly"):this.element.prop("readonly",!1),this._change("readOnly",e)},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popup.addClass("e-corner")):(this.container.removeClass("e-corner"),this.popup.removeClass("e-corner")),this.datePicker.option("showRoundedCorner",e)},_setRtl:function(e){e?(this.wrapper.addClass("e-rtl"),this.popup.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.popup.removeClass("e-rtl")),this._change("enableRTL",e)},_enabled:function(e){e?(this.model.enabled=!1,this.enable()):(this.model.enabled=!0,this.disable())},_showButton:function(e){(this.model.showPopupButton=e)?(this.container.addClass("e-padding"),this._renderIcon()):(this.container.removeClass("e-padding"),this.datetimeIcon.remove(),this.datetimeIcon=null)},_buttonText:function(e){c.extend(this.model.buttonText,e),this.popup.find(".e-dt-today").html(this.model.buttonText.today),this.popup.find(".e-dt-now").html(this.model.buttonText.timeNow),this.popup.find(".e-dt-done").html(this.model.buttonText.done),this.popup.find(".e-timecontainer").find(".e-header").html(this.model.buttonText.timeTitle)},_checkForResponsive:function(){var e;200<c(window).outerWidth()&&c(window).outerWidth()<=500?this.popup.hasClass("e-dt-responsive")||(this.popup.addClass("e-dt-responsive"),this.timePicker.option("popupWidth",this.datePicker.popup.outerWidth()),this.timePicker.option("popupHeight",98),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle()):this.popup.hasClass("e-dt-responsive")&&(this.popup.removeClass("e-dt-responsive"),this.timePicker.option("popupWidth",this.model.timePopupWidth),e=this.datePicker.popup.height()-this.popup.find(".e-header").height(),this.timePicker.option("popupHeight",e),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle())},enable:function(){this.model.enabled||(this.element[0].disabled=!1,this.model.enabled=!0,this.element.prop("disabled",!1),this.element.removeClass("e-disable").attr("aria-disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.datetimeIcon&&this.datetimeIcon.removeClass("e-disable").attr("aria-disabled",!1),this._isIE8&&this.datetimeIcon&&this.datetimeIcon.children().removeClass("e-disable"),this.popup.children("div").removeClass("e-disable").attr("aria-disabled",!1),this._change("enabled",!0))},disable:function(){this.model.enabled&&(this.element[0].disabled=!0,this.model.enabled=!1,this.element.addClass("e-disable").attr("aria-disabled",!0),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.datetimeIcon&&this.datetimeIcon.addClass("e-disable").attr("aria-disabled",!0),this._isIE8&&this.datetimeIcon&&this.datetimeIcon.children().addClass("e-disable"),this.popup.children("div").addClass("e-disable").attr("aria-disabled",!0),this._hideResult(),this._change("enabled",!1),this.datePicker.popup.removeClass("e-disable").attr("aria-disabled",!1),this.timePicker.popup.removeClass("e-disable").attr("aria-disabled",!1))},getValue:function(){return this._objectToString(this.model.value)},setCurrentDateTime:function(){this.model.readOnly||this._setValue(new Date)},show:function(){this._showResult()},hide:function(){this._hideResult()},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur),this._on(this.element,"keydown",this._keyDownOnInput),this.popup.on("mouseenter touchstart",c.proxy(function(){this._popClose=!0},this)),this.popup.on("mouseleave touchend",c.proxy(function(){this._popClose=!1},this))},_getLocalizedLabels:function(){return m.getLocalizedConstants(this.sfType,this.model.locale)}}),m.DateTimePicker.Locale=m.DateTimePicker.Locale||{},m.DateTimePicker.Locale.default=m.DateTimePicker.Locale["en-US"]={watermarkText:"Select datetime",buttonText:{today:"Today",timeNow:"Time Now",done:"Done",timeTitle:"Time"}},m.PopupPosition={Bottom:"bottom",Top:"top"}}),function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.touch.min"],e):e()}(function(){var b,w,k;b=jQuery,(w=Syncfusion).widget("ejDatePicker","ej.DatePicker",{element:null,_rootCss:"e-datepicker",model:null,validTags:["input","div","span"],_setFirst:!1,_addToPersist:["value"],_cancelValue:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{dayHeaderFormat:"min",showPopupButton:!0,enableAnimation:!0,showFooter:!0,displayInline:!1,htmlAttributes:{},dateFormat:"",watermarkText:"Select date",value:null,minDate:new Date("01/01/1900"),maxDate:new Date("12/31/2099"),startLevel:"month",depthLevel:"",cssClass:"",startDay:-1,stepMonths:1,locale:"en-US",showOtherMonths:!0,enableStrictMode:!1,enablePersistence:!1,enabled:!0,width:"",height:"",enableRTL:!1,showRoundedCorner:!1,headerFormat:"MMMM yyyy",buttonText:"Today",readOnly:!1,specialDates:null,fields:{date:"date",tooltip:"tooltip",iconClass:"iconClass",cssClass:"cssClass"},showTooltip:!0,showDisabledRange:!0,highlightSection:"none",highlightWeekend:!1,validationRules:null,validationMessage:null,allowEdit:!0,tooltipFormat:"ddd MMM dd yyyy",allowDrillDown:!0,blackoutDates:[],beforeDateCreate:null,open:null,close:null,select:null,change:null,focusIn:null,focusOut:null,beforeOpen:null,beforeClose:null,navigate:null,create:null,destroy:null},dataTypes:{startDay:"number",stepMonths:"number",showOtherMonths:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",displayInline:"boolean",showPopupButton:"boolean",locale:"string",readOnly:"boolean",cssClass:"string",dateFormat:"string",watermarkText:"string",headerFormat:"string",buttonText:"string",specialDates:"data",showTooltip:"boolean",highlightSection:"enum",highlightWeekend:"boolean",enableAnimation:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",tooltipFormat:"string",allowEdit:"boolean",allowDrillDown:"boolean"},_setModel:function(e){var t,i,s=!1,a=!1,n=!1;for(t in e)switch(t){case"dayHeaderFormat":this.model.dayHeaderFormat=e[t],s=a=!0;break;case"showPopupButton":this._renderDateIcon(e[t],!0);break;case"displayInline":this._setDisplayInline(e[t]),this.model.allowEdit||e[t]||!this._isInputBox()||this.element.on("mousedown",b.proxy(this._showDatePopUp,this));break;case"value":w.isPlainObject(e[t])&&(e[t]=null),w.isNullOrUndefined(e.minDate)&&w.isNullOrUndefined(e.maxDate)?(this._setDateValue(e[t]),this._specificFormat()&&(this._stopRefresh=!0),e[t]=this.model.value):this._updateDateValue(e[t]),n=s=a=!0;break;case"specialDates":this.model.specialDates=e[t],this._createSpecialDateObject(),s=a=!0;break;case"fields":this.model.fields=e[t],this._mapField=this._getMapper(),s=a=!0;break;case"showTooltip":this.model.showTooltip=e[t],s=a=!0;break;case"highlightWeekend":this.model.highlightWeekend=e[t],s=a=!0;break;case"highlightSection":this.model.highlightSection=e[t],s=a=!0;break;case"dateFormat":this.model.dateFormat=e[t],this._ensureValue();break;case"minDate":this._setMinDate(e[t]),e[t]=this.model.minDate,this._ensureValue(),n=s=a=!0;break;case"maxDate":this._setMaxDate(e[t]),e[t]=this.model.maxDate,this._ensureValue(),n=s=a=!0;break;case"locale":this.model.locale=e[t],this.model.startDay=w.isNullOrUndefined(this._options.startDay)&&this.model.startDay===this.culture.calendar.firstDay||this._options.startDay===this.defaults.startDay?-1:this.model.startDay,this.model.dateFormat=w.isNullOrUndefined(this._options.dateFormat)&&this.model.dateFormat===this.culture.calendar.patterns.d?"":this.model.dateFormat,this._setCulture(e[t]),this.model.value&&this._setDateValue(this.model.value),e[t]=this.model.locale,s=a=!0;break;case"showOtherMonths":this.model.showOtherMonths=e[t],this._otherMonthsVisibility();break;case"enableStrictMode":this.model.enableStrictMode=e[t],n=s=a=!0;break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[t],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[t],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"readOnly":this.model.readOnly=e[t],this._disbleMaualInput();break;case"width":this._setWidth(e[t]);break;case"height":this._setHeight(e[t]);break;case"cssClass":this._setSkin(e[t]);break;case"enableRTL":this._setRTL(e[t]);break;case"showRoundedCorner":this._setRoundedCorner(e[t]);break;case"enabled":e[t]?this.enable():this.disable();break;case"buttonText":w.isNullOrUndefined(this._options)&&(this._options={}),this._options.buttonText=this.model.buttonText=e[t],this._localizedLabels.buttonText=this.model.buttonText,this._setFooterText(e[t]);break;case"showFooter":this._enableFooter(e[t]);break;case"watermarkText":w.isNullOrUndefined(this._options)&&(this._options={}),this._options.watermarkText=this.model.watermarkText=e[t],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"startDay":i=e[t],(parseInt(e[t])<0||6<parseInt(e[t]))&&(e[t]=this.culture.calendar.firstDay,i=-1),this.model.startDay=e[t],w.isNullOrUndefined(this._options)&&(this._options={}),this._options.startDay=i,s=a=!0;break;case"startLevel":this.model.startLevel=e[t],s=a=!0;break;case"headerFormat":this.model.headerFormat=e[t],s=a=!0;break;case"depthLevel":this.model.depthLevel=e[t],s=a=!0;break;case"htmlAttributes":this._addAttr(e[t]);break;case"allowEdit":this._changeEditable(e[t]);break;case"tooltipFormat":this.model.tooltipFormat=e[t],s=a=!0;break;case"allowDrillDown":this._allowQuickPick(e[t]),s=a=!0;break;case"showDisabledRange":this._setRestrictDateState(e[t]);break;case"blackoutDates":this.model.blackoutDates=e[t],this._initDisableObj(this.model.blackoutDates),s=a=!0}n&&(this._validateMinMaxDate(),e.value=this.model.value,e.maxDate=this.model.maxDate,e.minDate=this.model.minDate),this._setWaterMark(),s&&(this.isValidState||this.model.displayInline)&&this._refreshDatepicker(),a&&this._startLevel(this.model.startLevel),this._triggerChangeEvent(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.model.displayInline&&b(window).off("resize",b.proxy(this._OnWindowResize,this)),this._isOpen&&this.hide(),this.sfCalendar.remove(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this._cloneElement.removeClass("e-js e-input").removeClass(w.util.getNameSpace(this.sfType)),this._cloneElement.insertAfter(this.element),this.element.remove()},_init:function(e){this._options=e,this._cloneElement=this.element.clone(),this._dt_drilldown=!1,this._ISORegex(),this._initDisableObj(this.model.blackoutDates),this.animation={open:{duration:200},close:{duration:100}},this._animating=!1,this._isSupport=document.createElement("input").placeholder!=k,this._checkAttribute(),this._setValues(),this._createDatePicker(),this._setRestrictDateState(this.model.showDisabledRange),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),e&&e.value!=k&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var e,t,i,s;for(t in this.element.rules("add",this.model.validationRules),e=(e=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),e.settings.messages[name]={},this.model.validationRules)if(i=null,!w.isNullOrUndefined(this.model.validationRules[t])){if(w.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[t]))for(s in e.settings.messages[name][t]=b.validator.messages[t],this.model.validationMessage)t==s&&(i=this.model.validationMessage[t]);else i=this.model.validationRules.messages[t];e.settings.messages[name][t]=null!=i?i:b.validator.messages[t]}},_checkAttribute:function(){for(var e,t,i=["min","max","readonly","disabled"],s=["minDate","maxDate","readOnly","enabled"],a=0;a<i.length;a++)e=this.element.attr(i[a]),t=s[a],w.isNullOrUndefined(e)||(w.isNullOrUndefined(this._options)||w.isNullOrUndefined(this._options[t]))&&(this.model[t]="enabled"!=t&&"readOnly"!=t?new Date(e):"readOnly"==t?this.element.is("[readonly]"):!this.element.is("[disabled]"))},_updateDateValue:function(e){var t=this._checkDateObject(e);null!=t?(this.isValidState=!0,""==t?(this.element.val(""),this.model.value=null):(this.model.value=t,this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat)))):("string"==typeof t&&this.model.enableStrictMode?this.element.val(e):this.element.val(""),this.model.value=null,this.isValidState=""==this.element.val()),this._removeWatermark()},_ensureValue:function(){var e=this._parseDate(this.element.val(),this.model.dateFormat);this.model.value?this._setDateValue(this.model.value):e&&this._setDateValue(e)},_changeEditable:function(e){var t=e?"_on":"_off";this.element.is(":input")&&(e?(this.model.readOnly||this.element.attr("readonly",!1),this.element.off("mousedown",b.proxy(this._showDatePopUp,this))):(this.model.readOnly||this.element.attr("readonly","readonly"),this.model.displayInline||this.element.on("mousedown",b.proxy(this._showDatePopUp,this))),this[t](this.element,"blur",this._onFocusOut),this[t](this.element,"focus",this._onFocusIn),this[t](this.element,"keydown",this._onKeyDown))},_allowQuickPick:function(e){b(".e-datepicker-headertext",this.sfCalendar)[e?"on":"off"]("click",b.proxy(this._forwardNavHandler,this))},_setRestrictDateState:function(e){this.sfCalendar[e?"addClass":"removeClass"]("e-dp-restrict-show")},_setValues:function(){this.Date=new Date,this._id=this.element[0].id,this.isValidState=!0,this._setCulture(this.model.locale),this._setMinDate(this.model.minDate),this._setMaxDate(this.model.maxDate),this._calendarDate=this._zeroTime(new Date),(this.model.startDay<0||6<this.model.startDay)&&(this.model.startDay=0),this.Date.firstDayOfWeek=this.model.startDay,this.Date.fullYearStart="20",this._showHeader=!0,w.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._validateMinMaxDate(),this._dateValue=new Date(this._calendarDate.toString()),this._isIE7=this._checkIE7(),this._isIE8="msie"==w.browserInfo().name&&"8.0"==w.browserInfo().version,this._isIE9="msie"==w.browserInfo().name&&"9.0"==w.browserInfo().version,this._getInternalEvents=!1,this._flag=!0,this._ejHLWeekEnd=!1,this._isOpen=!1,this._prevDate=null,this._preValue=null,this._isFocused=!1},_addAttr:function(e){var s=this;b.map(e,function(e,t){var i=t.toLowerCase();"class"==i?s.wrapper.addClass(e):"disabled"==i&&"disabled"==e?s.disable():"readOnly"==i&&"readOnly"==e?s.model.readOnly=!0:("style"!=i&&"id"!=i&&w.isValidAttr(s.element[0],t)?s.element:s.wrapper).attr(t,e)})},_createDatePicker:function(){this._createWrapper(),this._wireEvents(),this.model.displayInline&&this.show(),this.model.enableRTL&&this._setRTL(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0)},_checkNameAttr:function(){!this.element.attr("name")&&this._isInputBox()&&this.element.attr("name",this.element[0].id),this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("name",this.element[0].id)},_createWrapper:function(){var e;this._mapField=this._getMapper(),this.model.specialDates&&this._createSpecialDateObject(),this._isInputBox()&&(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0"}),this.wrapper=w.buildTag("span.e-datewidget e-widget "+this.model.cssClass),w.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.innerWrapper=w.buildTag("span.e-in-wrap e-box"),this.wrapper.append(this.innerWrapper).insertBefore(this.element),this.innerWrapper.append(this.element),this.innerWrapper.addClass("e-padding"),this.dateIcon=w.buildTag("span.e-select#"+this._id+"-img","",{},this._isIE8?{unselectable:"on"}:{}).append(w.buildTag("span.e-icon e-calendar","",{},{"aria-label":"Select"}).attr(this._isIE8?{unselectable:"on"}:{})).insertAfter(this.element)),this._isSupport&&(!this.model.displayInline||this._isInputBox())||(this._hiddenInput=w.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._isInputBox()&&this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block"),b((e=this)._hiddenInput).focus(function(){e.element.focus()})),this._checkNameAttr(),this._setHeight(this.model.height),this._setWidth(this.model.width),this._id&&b("#e-"+this._id).remove(),this.sfCalendar=w.buildTag("div.e-datepicker e-popup e-widget "+this.model.cssClass+" e-calendar "+(this.model.specialDates&&this.model.specialDates[0][this._mapField._icon]?"e-icons ":""),"",{},{id:this._id?"e-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}).insertBefore(this.element),this.model.displayInline&&!this.element.is("input")&&this.sfCalendar.addClass("e-inline"),this.popup=this.sfCalendar,w.isTouchDevice()||this.sfCalendar.addClass("e-ntouch"),this._resizeCalender(),this._setDateValue(this.model.value),this._preValue=this._parseDate(this.element.val(),this.model.dateFormat),this._setWaterMark(),this._dateValue=new Date(this._calendarDate.toString()),this._createCalender(),this._setDisplayInline(this.model.displayInline),this.model.readOnly&&this._disbleMaualInput(),this.model.enabled?this.model.enabled&&b(this.element).hasClass("e-disable")&&this.enable():this.disable(),this._layoutChanged(),this._checkErrorClass(),this._addAttr(this.model.htmlAttributes)},_isInputBox:function(){return this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))},_renderDateIcon:function(e,t){t&&this.model.showPopupButton==e||(!e&&this.dateIcon?(this._bindInputEvent(),this.dateIcon.css("display","none"),this.innerWrapper.removeClass("e-padding")):(this.innerWrapper&&(this.innerWrapper.addClass("e-padding"),this.dateIcon.css("display","block")),this.model.displayInline||this._bindDateButton()),this.model.showPopupButton=e)},_resizeCalender:function(){"short"==this.model.dayHeaderFormat||"min"==this.model.dayHeaderFormat||"none"==this.model.dayHeaderFormat?this.sfCalendar.removeClass("e-headerlong"):"long"==this.model.dayHeaderFormat&&this.sfCalendar.addClass("e-headerlong")},_setWidth:function(e){e?(this.wrapper||this.element).width(e):this.model.width=this.wrapper?this.wrapper.outerWidth():this.element.width()},_setHeight:function(e){e?(this.wrapper||this.element).height(e):this.model.height=this.wrapper?this.wrapper.outerHeight():this.element.height(),this._isIE7&&this.element.height(this.innerWrapper.height())},_setRTL:function(e){e?(this.wrapper&&this.wrapper.addClass("e-rtl"),this.sfCalendar.addClass("e-rtl")):(this.wrapper&&this.wrapper.removeClass("e-rtl"),this.sfCalendar.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.innerWrapper&&this.innerWrapper.addClass("e-corner"),this.sfCalendar.addClass("e-corner")):(this.innerWrapper&&this.innerWrapper.removeClass("e-corner"),this.sfCalendar.removeClass("e-corner"))},_refreshDatepicker:function(){var e,t;this._stopRefresh?this._stopRefresh=!1:(e=this.element.val(),t=this._specificFormat()&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=e?this._parseDate(e,!0):this._parseDate(e),t=this._validateYearValue(t),this._setDateValue(t),this._specificFormat()&&this._compareDate(this.model.value,this._calendarDate)&&this.element.val(e),b(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._calendarDate,this.model.headerFormat)),this._resizeCalender(),this._dateValue=new Date(this._calendarDate.toString()),this._hoverDate=this._calendarDate.getDate()-1,this._renderCalendar(this,this._dateValue),this._setFooterText(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter),this._layoutChanged())},_validateYearValue:function(e){var t;return null!=e&&(t="string"==typeof(t=w.preferredCulture(this.model.locale).calendars.standard.twoDigitYearMax)?(new Date).getFullYear()%100+parseInt(t,10):t,this._calendarDate.getFullYear()-e.getFullYear()==100)&&this._calendarDate.getFullYear()>t&&e.setFullYear(this._calendarDate.getFullYear()),e},_setFooterText:function(e){b(".e-footer-text",this.sfCalendar).html(e)},_setSkin:function(e){(this.wrapper?(this.wrapper.removeClass(this.model.cssClass),this.wrapper):(this.element.removeClass(this.model.cssClass),this.element)).addClass(e),this.sfCalendar.removeClass(this.model.cssClass),this.sfCalendar.addClass(e)},_setDisplayInline:function(e){(this.model.displayInline=e)&&this._isInputBox()?(this.sfCalendar.insertAfter(this.wrapper),this._setDatePickerPosition()):e?(this.element.append(this.sfCalendar),this._isSupport&&this._isInputBox()||this._hiddenInput.css("display","none")):(this.sfCalendar.css("display","none"),b("body").append(this.sfCalendar),this._isOpen=!1),e?(this.show(),this._off(this.dateIcon,"mousedown",this._showDatePopUp),this.element.off("mousedown",b.proxy(this._showDatePopUp,this))):this._isInputBox()&&this._renderDateIcon(this.model.showPopupButton,!1)},_disbleMaualInput:function(){this.model.readOnly?(b(this.element).attr("readonly","readonly"),this.model.displayInline||this.hide()):this.model.allowEdit&&b(this.element).prop("readonly",!1)},_checkDateObject:function(e,t){return e&&("object"!=typeof JSON||"{}"!==JSON.stringify(e))&&(e instanceof Date||(e=(t=(t=this._specificFormat()?this._parseDate(e,!0):this._parseDate(e,t))||this._checkJSONString(e))||null),!isNaN(Date.parse(e)))&&(this._dateValue=this._calendarDate=this._zeroTime(e),this._validateDate(e))?this._dateValue:null},_checkJSONString:function(e){return isNaN(Date.parse(e))?this._extISORegex.exec(e)||this._basicISORegex.exec(e)?this._dateFromISO(e):void 0:new Date(e).toJSON()===e||new Date(e).toDateString()===e||new Date(e).toGMTString()===e||new Date(e).toISOString()===e||new Date(e).toLocaleString()===e||new Date(e).toString()===e||new Date(e).toUTCString()===e?new Date(e):"string"==typeof e?this._dateFromISO(e):void 0},_dateFromISO:function(e){var t,i,s,a,n,r,l,o=this._extISORegex.exec(e)||this._basicISORegex.exec(e),d="",h="",c="";if(o){for(t=0;t<this._dates.length;t++)if(this._dates[t][1].exec(o[1])){d=this._dates[t][0];break}if(o[3])for(i=0;i<this._times.length;i++)if(this._times[i][1].exec(o[3])){h=(o[2]||" ")+this._times[i][0];break}for(s=(d+h+(c=o[4]&&this._zeroRegex.exec(o[4])?"Z":c)).match(this._tokens),a=[],r=0;r<s.length;r++)l=s[r],n=this._checkLiteral(s[r]),l=this._numberRegex[n?s[r].toLowerCase():l.length]||new RegExp("^\\d{1,"+l.length+"}"),(l=e.match(l))&&(0<=e.substr(0,e.indexOf(l))&&!n&&(0<=s[r].indexOf("M")?a.push(parseInt(l[0])-1):a.push(parseInt(l[0]))),e=e.slice(e.indexOf(l[0])+l[0].length));return new Date(a[0],a[1],a[2],a[3],a[4],a[5])}},_checkLiteral:function(e){return"t"==(char=e.toLowerCase())||"z"==char||":"==char||"-"==char},_checkInstanceType:function(e){return!(e=this._stringToObject(e))||(e instanceof Date||(e=this._parseDate(e)),isNaN(Date.parse(e)))?null:this._zeroTime(e)},_stringToObject:function(e){var t;return e="string"==typeof e?null!=(t=w.parseDate(e,this.model.dateFormat,this.model.locale))?t:new Date(e):e},_validateMinMaxDate:function(){var e=!1,t=!1;this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode?this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.minDate,t=!(this.isValidState=!1)):this.model.value>this.model.maxDate?(this._calendarDate=this.model.maxDate,t=!(this.isValidState=!1)):this.isValidState=!0:this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate):(this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.value=this.model.minDate,e=!0):this.model.value>this.model.maxDate&&(this._calendarDate=this.model.value=this.model.maxDate,e=!0):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),e&&this.element.val(this._formatter(this.model.value,this.model.dateFormat)),t&&this._getInternalEvents&&this._trigger("outOfRange")},_setCulture:function(e){this.culture=w.preferredCulture(e),this.culture&&(this.model.locale="en"==this.culture.name?"en-US":this.culture.name,this.Date.dayNames=this.culture.calendar.days.names,this.Date.dayNamesMin=this.culture.calendar.days.namesShort,this.Date.abbrDayNames=this.culture.calendar.days.namesAbbr,this.Date.monthNames=this.culture.calendar.months.names,this.Date.abbrMonthNames=this.culture.calendar.months.namesAbbr,this.Date.format=this.culture.calendar.patterns.d,""==this.model.dateFormat&&(this.model.dateFormat=this.culture.calendar.patterns.d),-1==this.model.startDay)&&(this.model.startDay=this.culture.calendar.firstDay),this._separator=this._getSeparator(),this._localizedLabels=this._getLocalizedLabels(),w.isNullOrUndefined(this._options)||(w.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),w.isNullOrUndefined(this._options.buttonText))||(this._localizedLabels.buttonText=this._options.buttonText),this._localizedLabelToModel()},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?b(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_setDatePickerPosition:function(){var e,t,i,s,a,n,r,l,o;this.model.displayInline&&!this._isInputBox()||(e=this.element.is("input")?this.wrapper:this.element,t=this._getOffset(e),r=b(document).scrollTop()+b(window).height()-(t.top+b(e).outerHeight()),l=t.top-b(document).scrollTop(),i=this.sfCalendar.outerHeight(),s=this.sfCalendar.outerWidth(),a=t.left,o=e.outerHeight(),e.height(),n=this._getZindexPartial(),r=i<r||l<i?t.top+o+3:t.top-i-3,l=b(document).scrollLeft()+b(window).width()-a,o=b(document).scrollLeft()+a+e.width(),(this.model.enableRTL||l<s&&s<a+e.outerWidth()&&!w.isNullOrUndefined(this.wrapper))&&(a+=this.wrapper.width()-this.sfCalendar.width()),o<s&&(a=t.left),this.sfCalendar.css({left:a+"px",top:r+"px","z-index":n}))},_getOffset:function(e){return w.util.getOffset(e)},_getZindexPartial:function(){return w.util.getZindexPartial(this.element,this.sfCalendar)},_setMinDate:function(e){this.model.minDate=this._checkInstanceType(e),this.model.minDate||(this.model.minDate=new Date("11/31/1899"))},_setMaxDate:function(e){this.model.maxDate=this._checkInstanceType(e),this.model.maxDate||(this.model.maxDate=new Date("12/31/2099"))},_setDateValue:function(e,t){t=this._checkDateObject(e,t);null!=t?(this.isValidState=!0,this.model.value=new Date(t.toString()),this._validateMinMaxDate(),this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat))):(e instanceof Date&&(this._validateMinMaxDate(),e=this._formatter(e,this.model.dateFormat)),this.model.enableStrictMode?this.element.val(e):this.element.val(null),this.model.value=null,this._triggerChangeEvent(),this.isValidState=!(""!=this.element.val()&&!w.isNullOrUndefined(this.element.val()))),this._removeWatermark()},_updateInputVal:function(){null==this._validateValue()&&this.model.enableStrictMode||!this.sfCalendar.find(".e-datepicker-days").is(":visible")||this._refreshDatepicker()},_validateInputVal:function(){var e=this._validateValue();null==e||this.model.enableStrictMode||(e<=this.model.maxDate&&e>=this.model.minDate||(this.model.value=null),this.isValidState=!0)},_validateValue:function(){var e=this._specificFormat()&&this.element.val()!=this._formatter(this._preValue,this.model.dateFormat,this.model.locale)?this._parseDate(this.element.val(),!0):this._parseDate(this.element.val());return this._validateYearValue(e)},_getSeparator:function(){var e,t;for(formats=this.culture?this.culture.calendar.patterns.d:this.model.dateFormat,e=new RegExp("^[a-zA-Z0-9]+$"),t=0;t<formats.length;t++)if(!e.test(formats[t]))return formats[t]},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=-1;if(7<=(e=null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)?parseFloat(RegExp.$1):e)&&e<8)return!0}return!1},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_formatter:function(e,t){t=this._checkFormat(t);return w.format(e,t,this.model.locale)},_parseDate:function(e,t){var i=this._checkFormat(this.model.dateFormat);return DateValue=e,this._specificFormat()&&DateValue!=k&&""!=e&&1!=t&&w.format(w.parseDate(DateValue,i,this.model.locale),this.model.dateFormat,this.model.locale)!=DateValue?this._dateValue:w.parseDate(e,i,this.model.locale)},_checkFormat:function(e){var t=this,i=this._regExp();return e.replace(i,function(e){return"/"===e&&"/"!==w.preferredCulture(t.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},_zeroTime:function(e){e="string"==typeof e?this._parseDate(e):new Date(e);return e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),e},_getDaysInMonth:function(e){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][e.getMonth()]},_addDays:function(e,t){return e.setDate(e.getDate()+t),e},_addYears:function(e,t){return e.setFullYear(e.getFullYear()+t),e},_addMonths:function(e,t){var i=e.getDate();return e.setMonth(e.getMonth()+t),i>e.getDate()&&this._addDays(e,-e.getDate()),e},_isWeekend:function(e){return 0==e.getDay()||6==e.getDay()},_isSpecialDates:function(e){if(this.model.specialDates)for(var t=0;t<this.model.specialDates.length;t++)if(this.model.specialDates[t]&&this.model.specialDates[t][this._mapField._date]&&e.getDate()==this.model.specialDates[t][this._mapField._date].getDate()&&e.getMonth()==this.model.specialDates[t][this._mapField._date].getMonth()&&e.getFullYear()==this.model.specialDates[t][this._mapField._date].getFullYear())return this._getIndex=t,!0;return!1},_getMapper:function(){var e=this.model.fields,t={_date:null,_tooltip:null,_icon:null,_custom:null};return t._date=e&&e.date?e.date:"date",t._tooltip=e&&e.tooltip?e.tooltip:"tooltip",t._icon=e&&e.iconClass?e.iconClass:"iconClass",t._custom=e&&e.cssClass?e.cssClass:"cssClass",t},_createSpecialDateObject:function(){for(var e=0;e<this.model.specialDates.length;e++)this.model.specialDates[e][this._mapField._date]=this._checkInstanceType(this.model.specialDates[e][this._mapField._date])},_getMonthName:function(e,t){return(e?this.Date.abbrMonthNames:this.Date.monthNames)[t.getMonth()]},_displayNewMonth:function(e,t){return this._setDisplayedMonth(this.displayedMonth+e,this.displayedYear+t,!0),!1},_setDisplayedMonth:function(e,t,i){var s,a,n;this.model.minDate==k||this.model.maxDate==k||((n=new Date(this.model.minDate.getTime())).setDate(1),(s=new Date(this.model.maxDate.getTime())).setDate(1),!e&&!t||isNaN(e)&&isNaN(t)?(a=this._zeroTime(new Date)).setDate(1):a=isNaN(e)?new Date(t,this.displayedMonth,1):isNaN(t)?new Date(this.displayedYear,e,1):new Date(t,e,1),a.getTime()<n.getTime()?a=n:a.getTime()>s.getTime()&&(a=s),t=this.displayedMonth,e=this.displayedYear,this.displayedMonth=a.getMonth(),this.displayedYear=a.getFullYear(),n=a,!i)||this.displayedMonth==t&&this.displayedYear==e||(this._renderCalendar(this,n),this._dateValue=n,this._trigger("monthChanged",[this.displayedMonth,this.displayedYear]))},_clearSelected:function(){this.numSelected=0,"week"==this.model.highlightSection?b("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-selected-week"):"month"==this.model.highlightSection?b("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().parent().removeClass("e-selected-month"):"workdays"==this.model.highlightSection?b("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-work-week"):b("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1)},_addSelected:function(){"week"==this.model.highlightSection?b("td.e-active",this.sfCalendar).parent().addClass("e-selected-week"):"month"==this.model.highlightSection?b("td.e-active, this.sfCalendar").parent().parent().addClass("e-selected-month"):"workdays"==this.model.highlightSection&&b("td.e-active",this.sfCalendar).parent().addClass("e-work-week")},_hideOtherMonths:function(e){b("td.other-month",e).css("visibility","hidden")},_showOtherMonths:function(e){b("td.other-month",e).css({visibility:"visible"})},_otherMonthsVisibility:function(){this.model.showOtherMonths?this._showOtherMonths(this.sfCalendar):this._hideOtherMonths(this.sfCalendar)},_createCalender:function(){w.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(w.buildTag("span.e-prev").append(w.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(w.buildTag("span.e-text").append(w.buildTag("span.e-datepicker-headertext").text(this._formatter(this._calendarDate,this.model.headerFormat)).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(w.buildTag("span.e-next").append(w.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this.sfCalendar),this._enableHeader(this._showHeader);var e=w.buildTag("table.e-dp-viewdays","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{});this.sfCalendar.append(e),this._renderCalendar(this),this._startLevel(this.model.startLevel),w.buildTag("div.e-footer").append(w.buildTag("span.e-footer-icon")).append(w.buildTag("span.e-footer-text")).appendTo(this.sfCalendar),b(".e-footer-text",this.sfCalendar).html(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter)},_enableHeader:function(e){e?b(".e-header",this.sfCalendar).show():b(".e-header",this.sfCalendar).hide()},_enableFooter:function(e){e?b(".e-footer",this.sfCalendar).show():b(".e-footer",this.sfCalendar).hide()},_checkArrows:function(e,t){this._preArrowCondition(e,this.model.minDate.getFullYear()),this._nextArrowCondition(t,this.model.maxDate.getFullYear())},_checkDateArrows:function(){this._preArrowCondition(this._tempMinDate,this.model.minDate),this._nextArrowCondition(this._tempMaxDate,this.model.maxDate)},_preArrowCondition:function(e,t){e<=t?this.sfCalendar.find(".e-arrow-sans-left").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-left").removeClass("e-disable").attr({"aria-disabled":!1})},_nextArrowCondition:function(e,t){t<=e?this.sfCalendar.find(".e-arrow-sans-right").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-right").removeClass("e-disable").attr({"aria-disabled":!1})},_previousNextHandler:function(e){var t,i;if(this.model.readOnly||!this.model.enabled||b(e.target).hasClass("e-disable"))return!1;switch(e.preventDefault(),t=b("table",this.sfCalendar),t=this._navigateFrom(t),e=!!(b(e.target).is("a")?b(e.target.parentNode):b(e.target)).hasClass("e-prev"),this._processNextPrevDate(e),b("table",this.sfCalendar).get(0).className){case"e-dp-viewdays":i="month";break;case"e-dp-viewmonths":i="year";break;case"e-dp-viewyears":i="decade";break;case"e-dp-viewallyears":i="century"}this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:i,navigateFrom:t})},_processNextPrevDate:function(e){var t,i,a,n;if(this._DRPdisableFade&&(s=new Date(this.sfCalendar.find("td.current-month").attr("date")),this._dateValue=s),e&&this.sfCalendar.find(".e-arrow-sans-left").hasClass("e-disable")||!e&&this.sfCalendar.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;switch((t=b("table",this.sfCalendar)).get(0).className){case"e-dp-viewdays":if(a=this.model.stepMonths,e){if(this._dateValue<=this.model.minDate)return this._flag=!1}else if(this._dateValue>=this.model.maxDate)return this._flag=!1;this._flag=!0,this._addMonths(this._dateValue,e?-a:a),this._clickedDate&&(this._calendarDate=this._clickedDate),this._dateValue=this._dateValue<this.model.minDate?new Date(this.model.minDate.toString()):this._dateValue,this._dateValue=this._dateValue>this.model.maxDate?new Date(this.model.maxDate.toString()):this._dateValue,this._renderCalendar(this,this._dateValue),b(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),this._addFocus("day",this._hoverDate),a=this._findFirstLastDay(new Date(this._dateValue.toString())),this._preArrowCondition(a.firstDay,this.model.minDate),this._nextArrowCondition(a.lastDay,this.model.maxDate);break;case"e-dp-viewmonths":if((a=this._dateValue).setFullYear(b(".e-datepicker-headertext",this.sfCalendar).text()),e){if(a.getFullYear()<=this.model.minDate.getFullYear())return this._flag=!1}else if(a.getFullYear()>=this.model.maxDate.getFullYear())return this._flag=!1;this._flag=!0,this._addYears(a,e?-1:1),this._renderCalendar(this,a),i=a.getFullYear(),b(".e-datepicker-headertext",this.sfCalendar).text(i),b("tbody,tr.e-week-header",t).not(".e-datepicker-months").hide(),b(b(t).find(".e-datepicker-months")).show(),this._addFocus("month",this._hoverMonth),this._checkArrows(i,i);break;case"e-dp-viewyears":if((a=this._dateValue).setFullYear(b(t).find(".e-state-hover").text()),e){if(parseInt(b("td.e-year-first:first").text())<=this.model.minDate.getFullYear())return this._flag=!1}else if(parseInt(b("td.e-year-last:first").prev().text())>=this.model.maxDate.getFullYear())return this._flag=!1;this._flag=!0,b(t).find(".e-state-hover").hasClass("e-year-first")&&e||b(t).find(".e-state-hover").hasClass("e-year-last")&&!e?this._dateValue.setFullYear(a.getFullYear()):b(t).find(".e-state-hover").hasClass("e-year-first")&&!e?this._dateValue.setFullYear(a.getFullYear()+11):b(t).find(".e-state-hover").hasClass("e-year-last")&&e?this._dateValue.setFullYear(a.getFullYear()-11):this._dateValue.setFullYear(a.getFullYear()+(e?-10:10)),this._renderCalendar(this,this._dateValue),n=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1),b(".e-datepicker-headertext",this.sfCalendar).text(n+1+" - "+(n+10)),b("tbody,tr.e-week-header",t).not(".e-datepicker-years").hide(),b(b(t).find(".e-datepicker-years")).show(),this._addFocus("year",this._hoverYear+(b(".e-year-first.e-hidedate").length?-1:0)),this._checkArrows(n+1,n+10);break;case"e-dp-viewallyears":if(e){if(parseFloat(b("td.e-allyear-first",t.get(0)).text().split("-")[1])<=this.model.minDate.getFullYear())return this._flag=!1}else if(parseFloat(b("td.e-allyear-last",t.get(0)).prev().text().split("-")[1])>=this.model.maxDate.getFullYear())return this._flag=!1;this._flag=!0,this._dateValue.setFullYear((this._lastHoveredYear||this._dateValue.getFullYear())+(e?-100:100)),this._lastHoveredYear=this._dateValue.getFullYear(),this._renderCalendar(this,this._dateValue),n=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%100+1),i=parseFloat(b("td.e-allyear-last",t.get(0)).prev().text().split("-")[1]),b(".e-datepicker-headertext",this.sfCalendar).text(n+1+" - "+i),b("tbody,tr.e-week-header",t).not(".e-datepicker-allyears").hide(),b(b(t).find(".e-datepicker-allyears")).show(),this._addFocus("allyear",this._hoverAllYear+(b(".e-allyear-first.e-hidedate").length?-1:0)),this._checkArrows(n+1,i)}this._layoutChanged()},_addFocus:function(e,i){var t,s="day"==e?"current-month":"e-current-"+e,s=this.sfCalendar.find("tbody tr td."+s);return"month"==e&&b(s).each(function(e,t){parseInt(b(t).attr("index"))==parseInt(i)&&(i=e)}),t=(t=s[i])||s.last(),this.sfCalendar.find("table td").removeClass("e-state-hover"),b(t).addClass("e-state-hover"),this._setActiveState(e),i},_setActiveState:function(e){var i,t,s;if(this.model.value instanceof Date){var a=this.sfCalendar.find("tbody tr td.e-current-"+e),n=this,r=-1;switch(e){case"month":this.model.value.getFullYear()===parseInt(b(".e-text",this.sfCalendar).text())&&b(a).each(function(e,t){parseInt(b(t).attr("index"))==parseInt(n.model.value.getMonth())&&(r=e)});break;case"year":i=this.model.value.getFullYear(),b(a).each(function(e,t){parseInt(t.innerHTML)==parseInt(i)&&(r=e)});break;case"allyear":t=parseInt(this.model.value.getFullYear())-(parseInt(this.model.value.getFullYear())%10+1),s=1+t+" - "+(10+t),b(a).each(function(e,t){parseInt(t.innerHTML)==parseInt(s)&&(r=e)})}(e=a[r])&&(this.sfCalendar.find("table td").removeClass("e-active"),b(e).hasClass("e-hidedate")||b(e).addClass("e-active"))}},_setFocusByName:function(e,i){var s,t,a=this.sfCalendar.find("tbody tr td.e-current-"+e);return b(a).each(function(e,t){parseInt(t.innerHTML)==parseInt(i)&&(s=e)}),t=(t=a[s])||a.last(),this.sfCalendar.find("table td").removeClass("e-state-hover"),b(t).addClass("e-state-hover"),this._setActiveState(e),s},_getHeaderTxt:function(){return this.sfCalendar.find(".e-datepicker-headertext").text()},_findFirstLastDay:function(e){return y=e.getFullYear(),m=e.getMonth(),{firstDay:new Date(y,m,1),lastDay:new Date(y,m+1,0)}},_forwardNavHandler:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e&&e.preventDefault();var t,i,s=b("table",this.sfCalendar),e=b("table",this.sfCalendar).get(0).className;switch(navFrom=this._navigateFrom(s),e){case"e-dp-viewdays":this._hoverMonth=this._getDateObj(s.find(".e-state-hover")).getMonth()||this._getDateObj(s.find(".e-active")).getMonth()||0,this._DRPdisableFade&&(this._renderCalendar(this,this._calendarDate),b(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat))),this._startLevel("year"),i="year",this._addFocus("month",this._hoverMonth);break;case"e-dp-viewmonths":t=this._getHeaderTxt(),this._startLevel("decade"),i="decade",this._hoverYear=this._setFocusByName("year",t);break;case"e-dp-viewyears":t=this._getHeaderTxt(),this._startLevel("century"),i="century",this._hoverAllYear=this._setFocusByName("allyear",t)}"century"!=navFrom&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:i,navigateFrom:navFrom}),this._layoutChanged()},_cellSelection:function(){var e;b("table",this.sfCalendar);switch(b("table",this.sfCalendar).get(0).className){case"e-dp-viewmonths":this._hoverMonth=this._addFocus("month",this._dateValue.getMonth());break;case"e-dp-viewyears":e=new Date(this._dateValue.toString()),this._navigationToPrevNext("year"),this._dateValue=e,this._hoverYear=this._setFocusByName("year",this._dateValue.getFullYear());break;case"e-dp-viewallyears":e=new Date(this._dateValue.toString()),this._navigationToPrevNext("allyear"),this._dateValue=e,e=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1),this._hoverAllYear=this._setFocusByName("allyear",1+e+" - "+e+10)}this._layoutChanged()},_navigationToPrevNext:function(e){var i,t=this.sfCalendar.find("tbody tr td.e-current-"+e),s=this._dateValue.getFullYear();b(t).each(function(e,t){parseInt(t.innerHTML)==parseInt(s)&&(i=e)}),(t=t[i])&&(b(t).hasClass("e-"+e+"-last")?this._processNextPrevDate(!1):b(t).hasClass("e-"+e+"-first")&&this._processNextPrevDate(!0))},_navigateFrom:function(e){var t;switch(e.get(0).className){case"e-dp-viewdays":t="month";break;case"e-dp-viewmonths":t="year";break;case"e-dp-viewyears":t="decade";break;case"e-dp-viewallyears":t="century"}return t},_backwardNavHandler:function(e){if(this._animating=!0,this.model.readOnly||!this.model.enabled)return!1;var t,i,s=e.type?(e.preventDefault(),b(e.currentTarget)):e,a=b("table",this.sfCalendar),n=b("table",this.sfCalendar).get(0).className,r=this;switch(navFrom=this._navigateFrom(a),n){case"e-dp-viewmonths":a.removeClass("e-dp-viewmonths").addClass("e-dp-viewdays"),this._lastHoveredMonth=parseInt(b(s).attr("index")),this._dateValue=new Date(this._dateValue.getFullYear(),this._lastHoveredMonth,this._dateValue.getDate()),this._DRPdisableFade&&this._trigger("_month_Loaded",{currentTarget:e.currentTarget}),this._renderCalendar(this,this._dateValue),b("tbody",a).not(".e-datepicker-days,.e-week-header").hide(),b(b(a).find(".e-datepicker-days,.e-week-header")).fadeIn("fast",function(){r._addFocus("day",r._hoverDate||0),r._animating=!1}),b(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),i="month";break;case"e-dp-viewyears":a.removeClass("e-dp-viewyears").addClass("e-dp-viewmonths"),this._lastHoveredYear=parseInt(s.text()),this._dateValue.setFullYear(this._lastHoveredYear),this._renderCalendar(this,this._dateValue),b("tbody,tr.e-week-header",a).not(".e-datepicker-months").hide(),w.isNullOrUndefined(this._hoverMonth)&&!w.isNullOrUndefined(this._dateValue)&&(this._hoverMonth=this._dateValue.getMonth()),b(b(a).find(".e-datepicker-months")).fadeIn("fast",function(){r._addFocus("month",r._hoverMonth||0),r._animating=!1}),t=s.text(),b(".e-datepicker-headertext",this.sfCalendar).text(t),this._checkArrows(t,t),i="year";break;case"e-dp-viewallyears":t=s.text().split("-"),a.removeClass("e-dp-viewallyears").addClass("e-dp-viewyears"),t[0]<this.model.minDate.getFullYear()?t[0]=this.model.minDate.getFullYear().toString():t[0]>this.model.maxDate.getFullYear()&&(t[0]=this.model.maxDate.getFullYear().toString()),this._renderCalendar(this,new Date(t[0],0,1)),b("tbody,tr.e-week-header",a).not(".e-datepicker-years").hide(),b(b(a).find(".e-datepicker-years")).fadeIn("fast",function(){r._addFocus("year",r._hoverYear||0),r._animating=!1}),b(".e-datepicker-headertext",this.sfCalendar).text(t[0]+" - "+t[1]),this._checkArrows(t[0],t[1]),i="decade",this._dateValue=new Date(this._dateValue.setFullYear(parseInt(b.trim(t[0]))+(this._lastHoveredYear?this._lastHoveredYear%10:this._dateValue.getFullYear()%10)));break;default:this._clearSelected(),this.sfCalendar.find("table td").removeClass("e-state-hover"),s.not("td.other-month.e-hidedate").addClass("e-active").attr("aria-selected",!0),this._addSelected(),this._hoverDate=this._getDateObj(s).getDate()-1,this._dateValue=new Date(s.attr("date")),this._clickedDate=new Date(s.attr("date")),this._animating=!1}"month"!=navFrom&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:i,navigateFrom:navFrom}),this._layoutChanged()},_startLevel:function(e){var t,i,s,a=b("table",this.sfCalendar),n=b(".e-datepicker-headertext",this.sfCalendar),r=this._dateValue;switch(e){case"decade":a.removeClass("e-dp-viewallyears e-dp-viewmonths e-dp-viewdays").addClass("e-dp-viewyears"),b("tbody,tr.e-week-header",a).not(".e-datepicker-years").hide(),b(b(a).find(".e-datepicker-years")).show(),r=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate:r,s=parseInt(r.getFullYear())-(parseInt(r.getFullYear())%10+1),n.text((t=s+1)+" - "+(i=s+10)),this._checkArrows(t,i),this._hoverYear=this._setFocusByName("year",r.getFullYear());break;case"century":this._calendarDate<this._dateValue||this._renderCalendar(this,r),a.removeClass("e-dp-viewyears e-dp-viewdays e-dp-viewmonths").addClass("e-dp-viewallyears"),b("tbody,tr.e-week-header",a).not(".e-datepicker-allyears").hide(),b(b(a).find(".e-datepicker-allyears")).show(),t=parseFloat(b("td.e-allyear-first",a.get(0)).text().split("-")[1])+1,i=parseFloat(b("td.e-allyear-last",a.get(0)).prev().text().split("-")[1]),n.text(t+" - "+i),this._checkArrows(t,i),s=parseInt(r.getFullYear())-(parseInt(r.getFullYear())%10+1),this._hoverAllYear=this._setFocusByName("allyear",s+1+" - "+(s+10));break;case"year":a.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewdays").addClass("e-dp-viewmonths"),b("tbody,tr.e-week-header",a).hide(),b(b(a).find(".e-datepicker-months")).show(),t=(this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate:r).getFullYear(),n.text(t),this._checkArrows(t,t),this._hoverMonth=r.getMonth(),this._addFocus("month",this._hoverMonth);break;case"month":a.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewmonths").addClass("e-dp-viewdays ")}},_depthLevel:function(e){var t=this.sfCalendar;switch(e){case"year":b(t.find(".e-current-year,.e-current-allyear")).on("click",b.proxy(this._backwardNavHandler,this)),this._on(b(".e-current-month",this.sfCalendar),"click",b.proxy(this._onDepthSelectHandler,this));break;case"decade":b(t.find(".e-current-allyear")).on("click",b.proxy(this._backwardNavHandler,this)),b(".e-current-year",this.sfCalendar).on("click",b.proxy(this._onDepthSelectHandler,this));break;case"century":b(t.find(".e-current-allyear")).on("click",b.proxy(this._onDepthSelectHandler,this));break;case"month":this._on(t.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",b.proxy(this._backwardNavHandler,this)),this._on(t.find(".current-month , .other-month"),"click",b.proxy(this._onSetCancelDateHandler,this))}},_onDepthSelectHandler:function(e){if(this.model.readOnly||!this.model.enabled)return!1;b(e.target).hasClass("e-current-month")?this._dateValue=new Date(this._dateValue.setMonth(parseInt(e.target.attributes.index.value))):(b(e.target).hasClass("e-current-year")||b(e.target).hasClass("e-current-allyear"))&&(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(e.target.innerHTML)))),this._onSetCancelDateHandler(e)},_datepickerMonths:function(e,t,i){for(var s,a,n,r=function(e){return document.createElement(e)},l=0,o=0;o<3;o++){for(s=b(r("tr")),a=0;a<4;a++)n=b(r("td")).addClass("e-current-month e-state-default").attr({index:l}).attr(this._isIE8?{unselectable:"on"}:{}).html(this.Date.abbrMonthNames[l++]),(i.getFullYear()<this.model.minDate.getFullYear()||i.getFullYear()>this.model.maxDate.getFullYear()||i.getFullYear()<=this.model.minDate.getFullYear()&&l<this.model.minDate.getMonth()+1||i.getFullYear()>=this.model.maxDate.getFullYear()&&l>this.model.maxDate.getMonth()+1)&&(n.addClass("e-hidedate"),n.removeClass("e-current-month")),s.append(n);e.append(s)}t.append(e),t=i.getFullYear(),this._checkArrows(t,t)},_datepickerYears:function(e,t,i){for(var s,a,n,r,l=function(e){return document.createElement(e)},o=parseInt(i)-(parseInt(i)%10+1),d=[],h=0;h<12;h++)d.push(o+h);for(a=s=0;a<3;a++){for(n=b(l("tr")),h=0;h<4;h++)(r=b(l("td"))).attr(this._isIE8?{unselectable:"on"}:{}),0==s?r.addClass("e-year-first e-current-year "):11==s?r.addClass("e-year-last e-current-year "):r.addClass("e-current-year e-state-default"),(d[s]<this.model.minDate.getFullYear()||d[s]>this.model.maxDate.getFullYear())&&(r.addClass("e-hidedate"),r.removeClass("e-current-year")),r.html(d[s++]),n.append(r);e.append(n)}t.append(e),this._checkArrows(d[0],d[d.length])},_datepickerAllYears:function(e,t,i){for(var s,a,n,r,l=parseInt(i)-(parseInt(i)%100+10),o=[],d=this._isIE8||this._isIE9?"":"\n",h=0;h<12;h++)o.push(parseInt(l)+" -"+d+parseInt(l+9)),l+=10;for(a=s=0;a<3;a++){for(n=b(document.createElement("tr")),h=0;h<4;h++)(r=b(document.createElement("td"))).attr(this._isIE8?{unselectable:"on"}:{}),0==s?r.addClass("e-allyear-first e-current-allyear "):11==s?r.addClass("e-allyear-last e-current-allyear "):r.addClass("e-current-allyear e-state-default"),(parseInt(o[s].split("-\n")[1])<this.model.minDate.getFullYear()||parseInt(o[s].split("-\n")[0])>this.model.maxDate.getFullYear())&&(r.addClass("e-hidedate"),r.removeClass("e-current-allyear")),r.html(o[s++]),n.append(r);e.append(n)}t.append(e)},_renderHeader:function(e){var t,i,s,a,n,r=b(document.createElement("thead")),l=w.preferredCulture(this.model.locale).calendars.standard.days;if("none"!=e.model.dayHeaderFormat)for(t=w.buildTag("tr.e-week-header").attr({role:"columnheader"}).attr(this._isIE8?{unselectable:"on"}:{}),i=this.Date.firstDayOfWeek;i<this.Date.firstDayOfWeek+7;i++)n=l.names[s=i%7],a="short"==e.model.dayHeaderFormat?l.namesAbbr[s]:"long"==e.model.dayHeaderFormat?n:l.namesShort[s],n=w.buildTag("th","",{},{scope:"col",abbr:n,date:n,title:this._formatter(n,"dddd"),class:0==s||6==s?"e-week-end":"e-week-day"}).attr(this._isIE8?{unselectable:"on"}:{}).html(a),t.append(n);return r.append(t)},_renderCalendar:function(e,t){e=b.extend({},w.DatePicker.prototype.defaults,e),this.Date.firstDayOfWeek=this.model.startDay,t=t||this._calendarDate||this._zeroTime(new Date),(i=b("table",this.sfCalendar)).empty(),i.append(this._renderHeader(e)),h=w.buildTag("tbody.e-datepicker-allyears","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerAllYears(h,i,t.getFullYear()),h=w.buildTag("tbody.e-datepicker-years","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerYears(h,i,t.getFullYear());var i,s,a,n,r,l,o=e.model.month==k?t.getMonth():e.model.month,e=e.model.year||t.getFullYear(),d=new Date(e,o,1,0,0,0),e=this.Date.firstDayOfWeek-d.getDay()+1;1<e&&(e-=7),s=Math.ceil((-1*e+1+this._getDaysInMonth(d))/7),this._addDays(d,e-1),a=this._zeroTime(new Date),n=this._calendarDate,h=w.buildTag("tbody.e-datepicker-months","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerMonths(h,i,t);for(var h=w.buildTag("tbody.e-datepicker-days","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),c=0,m=!0,u=!0;c++<s;){for(r=jQuery(document.createElement("tr")),l=0;l<7;l++){var p=d.getMonth()==o,_=this._isSpecialDates(d),f=this._checkDisableRange(d),v=this._getIndex,g=b(document.createElement("td")).html(_?"<span></span>"+d.getDate():d.getDate()+"").attr({date:d.toDateString(),title:this.model.showTooltip?_&&this.model.specialDates[v][this._mapField._tooltip]?this.model.specialDates[v][this._mapField._tooltip]:this._formatter(d,this.model.tooltipFormat):"","aria-selected":!1,role:"gridcell"}).attr(this._isIE8?{unselectable:"on"}:{}).addClass((p?"current-month e-state-default ":"other-month e-state-default ")+(this._isWeekend(d)?this._ejHLWeekEnd?"e-dp-weekend e-week-end ":this.model.highlightWeekend?"e-week-end ":"":"e-week-day ")+(p&&d.getTime()==a.getTime()?"today ":""));g.find("span:first-of-type").addClass(_?this.model.specialDates[v][this._mapField._icon]?"e-special-date-icon "+this.model.specialDates[v][this._mapField._icon]+" ":"e-special-day":""),g.addClass(_&&this.model.specialDates[v][this._mapField._custom]||""),f&&this._disableDates({date:d,element:g}),n.getTime()==d.getTime()&&p&&(g.hasClass("e-hidedate")||(this.model.value?(g.addClass("e-active").attr({"aria-selected":!0}),"week"==this.model.highlightSection&&r.addClass("e-selected-week"),"month"==this.model.highlightSection&&h.addClass("e-selected-month"),"workdays"==this.model.highlightSection&&r.addClass("e-work-week")):g.addClass("e-state-hover").attr({"aria-selected":!1})),this._hoverDate||(g.hasClass("e-hidedate")||g.addClass("e-state-hover"),this._hoverDate=d.getDate()-1)),_=!0,(d<this.model.minDate||d>this.model.maxDate)&&(g.addClass("e-hidedate"),g.removeClass("current-month"),this.model.showOtherMonths&&g.removeClass("other-month"),_=u=!1),p&&(_&&m&&(this._tempMinDate=d,u=!(m=!1)),u)&&(this._tempMaxDate=d),this._trigger("beforeDateCreate",{date:d,value:this._formatter(d,this.model.dateFormat),element:g}),r.append(g),d=new Date(d.getFullYear(),d.getMonth(),d.getDate()+1,0,0,0)}h.append(r)}i.append(h),this._DRPdisableFade?(b(h).css("display","block"),b(h).css({display:"table-row-group","vertical-align":"middle","border-color":"inherit"})):this._isIE8||this._isIE7?b(h).css("display","block"):b(h).fadeIn("fast"),this.model.startLevel===this.model.depthLevel||"month"!=this.model.depthLevel&&""!=this.model.depthLevel&&("century"==this.model.startLevel||"decade"==this.model.startLevel&&"century"!=this.model.depthLevel||"year"==this.model.startLevel&&"decade"!=this.model.depthLevel&&"century"!=this.model.depthLevel)?this._depthLevel(this.model.depthLevel):(this._on(i.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",b.proxy(this._backwardNavHandler,this)),this._on(i.find(".current-month , .other-month"),"click",b.proxy(this._onSetCancelDateHandler,this))),this._otherMonthsVisibility(),this._checkDateArrows()},_checkDisableRange:function(e){return!w.isNullOrUndefined(this._disableCollection[e.getFullYear()])&&-1!==jQuery.inArray(e.getMonth(),this._disableCollection[e.getFullYear()])},_initDisableObj:function(){var e,t;for(this._disableCollection={},i=0;i<this.model.blackoutDates.length;i++)(t=this._checkInstanceType(this.model.blackoutDates[i]))&&(e=t.getFullYear(),t=t.getMonth(),w.isNullOrUndefined(this._disableCollection[e])&&(this._disableCollection[e]=[]),-1==jQuery.inArray(t,this._disableCollection[e]))&&this._disableCollection[e].push(t)},_disableDates:function(e){for(i=0;i<this.model.blackoutDates.length;i++){var t=this._checkInstanceType(this.model.blackoutDates[i]);t&&+e.date==+t&&e.element.removeClass("current-month").addClass("e-hidedate")}},_keyboardNavigation:function(e){var t;if(this._animating)return!1;if(!this._isOpen||37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode&&36!=e.keyCode&&35!=e.keyCode)if(this.model.displayInline||27!=e.keyCode&&9!=e.keyCode){if(e.altKey&&40==e.keyCode)return this.show(),!1}else this.hide();else{if(e.preventDefault&&e.preventDefault(),e.altKey)return 13==e.keyCode?(this._setCurrDate(e),!1):void 0;(t={row:null,col:null}).col=this.sfCalendar.find("tbody tr td.e-state-hover").index(),t.row=this.sfCalendar.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this.sfCalendar.find("tbody tr td.e-active").index()+1,t.row=-1!=t.row?t.row+1:this.sfCalendar.find("tbody tr td.e-active").parent().index()+1;var i,s;switch(this.sfCalendar.find("table")[0].className){case"e-dp-viewallyears":i=this._changeRowCol(t,e.keyCode,3,4,"yearall",e.ctrlKey),e.ctrlKey||(this._hoverAllYear=this.sfCalendar.find("tbody.e-datepicker-allyears tr td").index(i));break;case"e-dp-viewyears":i=this._changeRowCol(t,e.keyCode,3,4,"year",e.ctrlKey),e.ctrlKey||(this._hoverYear=this.sfCalendar.find("tbody.e-datepicker-years tr td").index(i));break;case"e-dp-viewmonths":i=this._changeRowCol(t,e.keyCode,3,4,"month",e.ctrlKey),e.ctrlKey||(this._hoverMonth=this.sfCalendar.find("tbody.e-datepicker-months tr td").index(i));break;case"e-dp-viewdays":s=this.sfCalendar.find("tbody.e-datepicker-days tr").length,i=this._changeRowCol(t,e.keyCode,s,7,"day",e.ctrlKey),e.ctrlKey||(this._hoverDate=this._getDateObj(i).getDate()-1)}e.ctrlKey||(this.sfCalendar.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover"))}},_changeRowCol:function(e,t,i,s,a,n){var r,l,o,d,h={parent:null,child:null};switch(a){case"day":r="tbody.e-datepicker-days tr td.current-month",h.parent=".e-datepicker-days",h.child=".current-month";break;case"month":r="tbody.e-datepicker-months tr td.e-current-month",h.parent=".e-datepicker-months",h.child=".e-current-month";break;case"year":r="tbody.e-datepicker-years tr td.e-current-year",h.parent=".e-datepicker-years",h.child=".e-current-year";break;case"yearall":r="tbody.e-datepicker-allyears tr td.e-current-allyear",h.parent=".e-datepicker-allyears",h.child=".e-current-allyear"}if(e.row<=0&&e.col<=0)return this.sfCalendar.find(r+":first");switch(t){case 36:return this.sfCalendar.find(r+":first");case 35:return this.sfCalendar.find(r+":last");case 38:if(n&&this.model.allowDrillDown)this._forwardNavHandler();else{if(!(1<e.row))return this._processNextPrevDate(!0),this.sfCalendar.find(r+":nth-child("+e.col+"):last");--e.row}if((l=this._getCell(e,h)).length<=0){if(null!==(l=this._findVisible(e,h,"up")))return l;this._processNextPrevDate(!0),l=this.sfCalendar.find(r+":nth-child("+e.col+"):last")}return l;case 37:if(n)return this._processNextPrevDate(!0),this.sfCalendar.find("tbody tr td.e-state-hover");if(1<e.col)--e.col;else{if(!(1<e.row))return this._processNextPrevDate(!0),this.sfCalendar.find(r+":last");e={row:e.row-1,col:s}}if((l=this._getCell(e,h)).length<=0){if(null!==(l=this._findVisible(e,h,"left")))return l;this._processNextPrevDate(!0),l=this.sfCalendar.find(r+":last")}return l;case 39:if(n)return this._processNextPrevDate(!1),this.sfCalendar.find("tbody tr td.e-state-hover");if(e.col<s)e.col+=1;else{if(!(e.row<i))return this._processNextPrevDate(!1),this.sfCalendar.find(r+":first");e={row:e.row+1,col:1}}if((l=this._getCell(e,h)).length<=0){if(null!==(l=this._findVisible(e,h,"right")))return l;this._processNextPrevDate(!1),l=this.sfCalendar.find(r+":first")}return l;case 40:if(!n){if(!(e.row<i))return this._processNextPrevDate(!1),this.sfCalendar.find(r+":nth-child("+e.col+"):first");if(e.row+=1,(l=this._getCell(e,h)).length<=0){if(null!==(l=this._findVisible(e,h,"down")))return l;this._processNextPrevDate(!1),l=this.sfCalendar.find(r+":nth-child("+e.col+"):first")}return l}case 13:l=b("table",this.sfCalendar).get(0).className,o=this._getCell(e,h),d=b(o)[0],"e-dp-viewmonths"==l&&"year"==this.model.startLevel&&"year"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setMonth(parseInt(d.attributes.index.value))),this._onSetCancelDateHandler({type:null,target:o})):"e-dp-viewyears"==l&&"decade"==this.model.startLevel&&"decade"==this.model.depthLevel||"e-dp-viewallyears"==l&&"century"==this.model.startLevel&&"century"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(d.innerHTML))),this._onSetCancelDateHandler({type:null,target:o})):"e-dp-viewdays"==l?(this._backwardNavHandler(o),this._onSetCancelDateHandler({type:null,target:o})):this._backwardNavHandler(o)}return this._getCell(e,h)},_findVisible:function(e,t,s){var a=e.col,n=e.row,r=t.child.slice(1,t.child.length);for(i=0;0<=i;i++){if((nextElement=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td:nth-child("+a+")")).length<=0)return null;if(nextElement.hasClass("e-hidedate")||!nextElement.is(":visible")){if("right"==s||"left"==s?"right"==s?a++:a--:"down"==s?n++:n--,n<=0||n>this.sfCalendar.find("tbody"+t.parent+" tr").length||(a>this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td").length&&(n++,a=1),a<=0&&(n--,a=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td").length),n<=0)||n>this.sfCalendar.find("tbody"+t.parent+" tr").length)return null}else{if(nextElement.hasClass("other-month"))return null;if(nextElement.hasClass(r))return e.col=a,e.row=n,nextElement}}},_getCell:function(e,t){return this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+e.row+") td"+t.child+":nth-child("+e.col+")")},_getDateObj:function(e){return new Date(e.attr("date"))},_touchCalendar:function(e){var t=this.sfCalendar.find("table")[0].className;switch(e.type){case"pinchin":"e-dp-viewdays"!=t&&this._keyboardNavigation({keyCode:13});break;case"pinchout":"e-dp-viewallyears"!=t&&this.model.allowDrillDown&&this._forwardNavHandler();break;case"swipeleft":this._processNextPrevDate(!1);break;case"swiperight":this._processNextPrevDate(!0)}},show:function(e){var t,i;if(this._isOpen)return!1;if((t=this)._popupOpen=!0,i=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this.model.enabled){if(this.model.displayInline||this._setDatePickerPosition(),this._trigger("beforeOpen",{element:this.sfCalendar,events:e}))return!1;this.sfCalendar.attr({"aria-hidden":"false"}),t._isOpen=!0,this.sfCalendar.slideDown(this.model.enableAnimation?this.animation.open.duration:0,function(){t.model&&!t.model.displayInline&&b(document).on("mousedown",b.proxy(t._onDocumentClick,t))}),this._updateInputVal(),this._refreshLevel(i),this._trigger("open",{prevDate:i,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),b(window).on("resize",b.proxy(this._OnWindowResize,this)),this.model.displayInline||this._on(w.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox()&&this.wrapper.addClass("e-active")}},hide:function(e){if(!this._isOpen||this._getInternalEvents||this._trigger("beforeClose",{element:this.sfCalendar,events:e}))return!1;var t=this;this._popupOpen=!1,this.sfCalendar.attr({"aria-hidden":"true"}),this._popClose&&e!=k&&"click"!=e.type||(this.sfCalendar.slideUp(this.model.enableAnimation?this.animation.close.duration:0,function(){t._isOpen=!1,b(document).off("mousedown",b.proxy(t._onDocumentClick,t)),t._setWaterMark()}),""!=this.element.val()&&this._validateInputVal(),this._trigger("close",{prevDate:this._prevDate,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),b(window).off("resize",b.proxy(this._OnWindowResize,this)),this._off(w.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox()&&this.wrapper.removeClass("e-active"))},enable:function(){this.model.enabled=!0,this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.prop("disabled",!1),this.dateIcon&&this.dateIcon.removeClass("e-disable").attr({"aria-disabled":!1}),this._isIE8&&this.dateIcon&&this.dateIcon.children().removeClass("e-disable"),this.element.prop("disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.sfCalendar.removeClass("e-disable").attr({"aria-disabled":!1})},disable:function(){this.model.enabled=!1,this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.element.attr("disabled","disabled"),this.dateIcon&&this.dateIcon.addClass("e-disable").attr({"aria-disabled":!0}),this._isIE8&&this.dateIcon&&this.dateIcon.children().addClass("e-disable"),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.sfCalendar.addClass("e-disable").attr({"aria-disabled":!0}),this._isOpen&&(this.element.is(":input")&&this.element.blur(),this.model.displayInline||this.hide())},getValue:function(){return this._formatter(this.model.value,this.model.dateFormat)},_wireEvents:function(){this._allowQuickPick(this.model.allowDrillDown),this._on(b(".e-next",this.sfCalendar),"click",b.proxy(this._previousNextHandler,this)),this._on(b(".e-prev",this.sfCalendar),"click",b.proxy(this._previousNextHandler,this)),this.model.displayInline||(this.sfCalendar.on("mouseenter touchstart",b.proxy(function(){this._popClose=!0},this)),this.sfCalendar.on("mouseleave touchend",b.proxy(function(){this._popClose=!1},this))),this.element.is(":input")&&this.model.allowEdit&&(this._on(this.element,"blur",this._onFocusOut),this._on(this.element,"focus",this._onFocusIn),this._on(this.element,"keydown",this._onKeyDown)),this.model.allowEdit||(this.element.attr("readonly","readonly"),this.element.on("mousedown",b.proxy(this._showDatePopUp,this))),this.model.showFooter&&this._on(b(".e-footer",this.sfCalendar),"click",this._setCurrDate),this._on(this.sfCalendar,"pinchin pinchout swipeleft swiperight",b.proxy(this._touchCalendar,this))},_bindDateButton:function(){this._on(this.dateIcon,"mousedown",this._showDatePopUp),this.model.allowEdit&&this.element.off("mousedown",b.proxy(this._showDatePopUp,this))},_bindInputEvent:function(){this._off(this.dateIcon,"mousedown",this._showDatePopUp)},_specificFormat:function(){var e=w.globalize._getDateParseRegExp(w.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return-1<b.inArray("dddd",e.groups)||-1<b.inArray("ddd",e.groups)},_onFocusOut:function(e){var t;this._isFocused=!1,t=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this._validateOnFocusOut(this._validateValue(),e),this.wrapper.removeClass("e-focus"),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),this._isOpen&&!this.model.displayInline||this._refreshLevel(t),""==this.element.val()||this._isOpen&&!this.model.displayInline||this._validateInputVal(),this.element.off("keydown",b.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),e=this.element.val(),t={prevDate:this._prevDate,value:e},this._specificFormat()?this._prevDate!=e&&this._setDateValue(e,!0):this._setDateValue(e),this.model.value||this._clearSelected(),this._trigger("focusOut",t),this._checkErrorClass()},_onFocusIn:function(e){this._isSupport&&(e.preventDefault(),this._isFocused=!0),this.wrapper.removeClass("e-error").attr("aria-invalid","false"),this.isValidState=!0,this.wrapper.addClass("e-focus"),this.model.readOnly||(this._isSupport||this._hiddenInput.css("display","none"),this.element.on("keydown",b.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this.model.readOnly||this.show(e),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}))},_elementClick:function(e){this._popupOpen||this.show(e)},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_refreshPopup:function(){this._refreshDatepicker(),this._startLevel(this.model.startLevel)},_refreshLevel:function(e){var t;this.model.startLevel==this.model.depthLevel&&"month"!=this.model.startLevel&&(t=this._stringToObject(this.element.val()),t=this._validateYearValue(t))&&!this._compareDate(e,t)&&this._refreshPopup()},_validateOnFocusOut:function(e,t){var i,s=null!=this._preValue?this._calendarDate:this._preValue,a=this._formatter(s,this.model.dateFormat);this._specificFormat()&&e>this.model.minDate&&e<this.model.maxDate?null==e?this.model.value=s:(this.model.value=e,this._formatter(e,this.model.dateFormat,this.model.locale)):this._formatter(this._parseDate(this._formatter(new Date,"MM/dd/yyyy")),this.model.dateFormat),i=s=!1,null==e||this.model.enableStrictMode?null!=e||this.model.enableStrictMode?e?(e<this.model.minDate||e>this.model.maxDate?(i=!(this.isValidState=!1),this._calendarDate=e<this.model.minDate?this.model.minDate:this.model.maxDate):this.isValidState=!0,this._triggerChangeEvent(t),i&&this._getInternalEvents&&this._trigger("outOfRange")):(this.isValidState=!1,this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)):(null==this._preTxtValue||""==this.element.val()?(this.element.val(""),this._isSupport||this._hiddenInput.css("display","block")):this.element.val(a),this._triggerChangeEvent(t)):(w.isNullOrUndefined(this.model.value)&&(this.model.value=this._parseDate(this.element.val())),this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode||(e?(e<this.model.minDate||e>this.model.maxDate)&&(s=!0,this._calendarDate=e=e<this.model.minDate?this.model.minDate:this.model.maxDate):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),s&&this.element.val(this._formatter(e,this.model.dateFormat)),this._compareDate(this._preValue,this._parseDate(this.element.val(),!0))||this._triggerChangeEvent(t))},_onKeyDown:function(e){var t;13===e.keyCode&&(t=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this._validateOnFocusOut(this._validateValue(),e),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),this._isOpen&&!this.model.displayInline||this._refreshLevel(t),""==this.element.val()||this._isOpen&&!this.model.displayInline||this._validateInputVal(),this._checkErrorClass())},_showhidePopup:function(e){if(!this.model.enabled)return!1;this._isOpen?(this._isFocused||!this.element.is(":input")||w.isTouchDevice()||this.element.focus(),this._cancelValue||this.hide(e)):(this._isFocused||!this.element.is(":input")||w.isTouchDevice()||this.element.focus(),this.show(e))},_compareDate:function(e,t){return+e==+t},_validateDate:function(e){var t,s=!0;if(null!=e){for(i=0;i<this.model.blackoutDates.length;i++)(t=this._checkInstanceType(this.model.blackoutDates[i]))&&+e==+t&&(s=!1);(e<this.model.minDate||e>this.model.maxDate)&&this.model.enableStrictMode&&(this.isValidState=s=!1)}return s},_triggerChangeEvent:function(e){var t,i=""==this.element.val()?null:this.element.val();this._prevDate=this._formatter(this._preValue,this.model.dateFormat),t={prevDate:this._prevDate,value:i,isInteraction:!!e},e=this._specificFormat()&&e!=k&&"keydown"==e.type&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=this.element.val()?this._parseDate(this.element.val(),!0):this._specificFormat()&&e!=k&&"blur"==e.type?this.model.value:this._parseDate(i),e=this._validateYearValue(e),this._validateDate(e)||(e=null),this._compareDate(this._preValue,e)?""==this.element.val()&&null==this._prevDate||this.element.val()==this._prevDate||(t.value=this.element.val(),this._trigger("_change",t)):(this._preValue=this.model.value=e,t.value=this._formatter(this.model.value,this.model.dateFormat),this.model.value&&(this._clickedDate=this._calendarDate=this.model.value),this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("value",i),this.model.value||this.model.enableStrictMode||this._setDateValue(this.model.value),t.value=i,this._trigger("_change",t),t.value=this._formatter(this.model.value,this.model.dateFormat),this._trigger("change",t),this._checkErrorClass())},_triggerSelectEvent:function(){var e,t=this.element.val();this._parseDate(t)&&(e={prevDate:this._prevDate,date:this.model.value,value:t,isSpecialDay:this._isSpecialDates(this.model.value)},this._prevDate!=t&&this._parseDate(e.value)&&this.model.value>=this.model.minDate&&this.model.value<=this.model.maxDate&&(this._cancelValue=this._trigger("select",e)),this._dt_drilldown)&&this._trigger("dt_drilldown",e)},_onDocumentClick:function(e){this.model&&(b(e.target).is(this.popup)||b(e.target).parents(".e-popup").is(this.popup)||b(e.target).is(this.wrapper)||b(e.target).parents(".e-datewidget").is(this.wrapper)?(b(e.target).is(this.popup)||b(e.target).parents(".e-popup").is(this.popup))&&e.preventDefault():this.hide(e))},_OnWindowResize:function(){this._setDatePickerPosition()},_showDatePopUp:function(e){var t=!1;if(e.button?t=2==e.button:e.which&&(t=3==e.which),!t&&(this._isSupport||this.model.showPopupButton||(e.preventDefault(),this._onFocusIn()),!this.model.readOnly)){if(e.preventDefault(),!this.model.enabled&&this.model.displayInline)return!1;this._showhidePopup(e)}},_layoutChanged:function(){this._getInternalEvents&&this._trigger("layoutChange")},_setCurrDate:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e&&e.preventDefault();this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._dateValue=this._zeroTime(new Date),this.model.value=this._calendarDate=new Date(this._dateValue.toString()),this._setDateValue(this.model.value),this._triggerSelectEvent(e),this._triggerChangeEvent(e),this._refreshDatepicker(),this._changeDayClass(),this._startLevel(this.model.startLevel),this._onSetCancelDateHandler(e),this._layoutChanged()},_changeDayClass:function(){var e=this.popup.children("table")[0].className;"e-dp-viewdays"!=e&&this.popup.children("table").removeClass(e).addClass("e-dp-viewdays")},_onSetCancelDateHandler:function(e){if(this.model.readOnly||!this.model.enabled||e&&(b(e.target).hasClass("e-disable")||b(e.target).hasClass("e-hidedate")))return!1;e&&e.type&&e.preventDefault(),this._specificFormat()?this._prevDate=this.element.val():this.model.value=this._parseDate(this.element.val()),this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._setDateValue(this._dateValue),this._triggerSelectEvent(e),this._triggerChangeEvent(e),this._dateValue=new Date(this.model.value.toString()),this.element.is(":input")&&!this.model.displayInline&&this._showhidePopup(e),e&&b(e.currentTarget).hasClass("other-month")&&this._refreshDatepicker(),this._cellSelection()},_closeCalendar:function(e){e&&e!=this.element||this.sfCalendar.empty().remove()},_checkErrorClass:function(){this.wrapper&&(this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true"))},_getLocalizedLabels:function(){return w.getLocalizedConstants(this.sfType,this.model.locale)}}),w.DatePicker.Locale=w.DatePicker.Locale||{},w.DatePicker.Locale.default=w.DatePicker.Locale["en-US"]={watermarkText:"Select date",buttonText:"Today"},w.DatePicker.Header={None:"none",Short:"short",Min:"min",Long:"long"},w.DatePicker.HighlightSection={Month:"month",Week:"week",WorkDays:"workdays",None:"none"},w.DatePicker.Level={Month:"month",Year:"year",Decade:"decade",Century:"century"}}),function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.scroller.min"],e):e()}(function(){var h,d,s;h=jQuery,(d=Syncfusion).widget("ejTimePicker","ej.TimePicker",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_rootCSS:"e-timepicker",_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{cssClass:"",timeFormat:"",value:null,enableAnimation:!0,locale:"en-US",htmlAttributes:{},readOnly:!1,showPopupButton:!0,enableStrictMode:!1,interval:30,hourInterval:1,minutesInterval:1,secondsInterval:1,height:"",width:"",minTime:"12:00 AM",maxTime:"11:59 PM",showRoundedCorner:!1,enableRTL:!1,popupHeight:"191px",popupWidth:"auto",enabled:!0,enablePersistence:!1,disableTimeRanges:null,validationRules:null,validationMessages:null,focusIn:null,focusOut:null,beforeChange:null,change:null,select:null,create:null,destroy:null,beforeOpen:null,open:null,close:null},dataTypes:{timeFormat:"string",minTime:"string",maxTime:"string",readOnly:"boolean",interval:"number",showPopupButton:"boolean",locale:"string",hourInterval:"number",minutesInterval:"number",secondsInterval:"number",enabled:"boolean",enablePersistence:"boolean",enableAnimation:"boolean",enableStrictMode:"boolean",disableTimeRanges:"data",htmlAttributes:"data",validationRules:"data",validationMessages:"data"},observables:["value"],enable:function(){this.model.enabled||(this.element[0].disabled=!1,this.element.prop("disabled",!1),this.model.enabled=!0,this.element.removeClass("e-disable").attr("aria-disabled",!1),this.model.showPopupButton&&(this.timeIcon.removeClass("e-disable").attr("aria-disabled",!1),this.popupList.removeClass("e-disable").attr("aria-disabled",!1)),this._isIE8&&this.timeIcon.children().removeClass("e-disable"))},disable:function(){this.model.enabled&&(this.element[0].disabled=!0,this.model.enabled=!1,this.element.attr("disabled","disabled"),this.element.addClass("e-disable").attr("aria-disabled",!0),this.model.showPopupButton&&(this.timeIcon.addClass("e-disable").attr("aria-disabled",!0),this.popupList.addClass("e-disable").attr("aria-disabled",!0)),this._isIE8&&this.timeIcon.children().addClass("e-disable"),this._hideResult())},getValue:function(){return this.element.val()},setCurrentTime:function(){this.model.readOnly||this._setMask()},show:function(){this.showDropdown||this._getInternalEvents||this._showResult()},hide:function(){this.showDropdown&&this._hideResult()},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_timeFormat:function(e){var t;return e=e||d.preferredCulture(this.model.locale).calendars.standard.patterns.t,(e=this._validateTimeFormat(e))&&(this.model.timeFormat=e,this.model.minTime=d.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=d.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),this.model.value?(this._setModelOption=!0,this.model.value=this._localizeTime(this.model.value),this.element.val(this.model.value)):(this._setModelOption=!1,(t=this._localizeTime(this.element.val()))&&this._checkMinMax(t)&&(this.model.value=t,this.element.val(t)))),e},_getTimeFormat:function(){this.model.timeFormat=d.preferredCulture(this.model.locale).calendar.patterns.t||"h:mm tt",this.seperator=this._getSeperator()},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popupList&&this.popupList.removeClass(this.model.cssClass).addClass(e)},_localize:function(e){var t=this._createObject(this.model.value,!0);this.model.locale=e,this._getTimeFormat(),this.model.minTime=d.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=d.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),t?(this.model.value=this._localizeTime(t),this.element.val(this.model.value)):(t=this._localizeTime(this.element.val()))&&this._checkMinMax(t)&&(this.model.value=t,this.element.val(t)),this._getAmPm()},_setLocalize:function(e){(e=d.preferredCulture(e))&&(this.model.locale="en"==e.name?"en-US":e.name,d.isNullOrUndefined(this._options)||!d.isNullOrUndefined(this._options.timeFormat)&&this._options.timeFormat||(this.model.timeFormat=d.preferredCulture(this.model.locale).calendars.standard.patterns.t))},_updateInput:function(){var e;d.isNullOrUndefined(this._options)||(e=this._localizeTime(this._options.value),d.isNullOrUndefined(e))||"string"==typeof e&&this.model.enableStrictMode&&!this.model.value&&(this.element.val(this._options.value),this.isValidState=""==this.element.val(),this._checkErrorClass())},_createMinMaxObj:function(){this._minTimeObj=this._createObject(this.model.minTime),this._minTimeObj||(this.model.minTime=d.format(this._createObject((new Date).setHours(0,0,0,0)),this.model.timeFormat,this.model.locale)),this._maxTimeObj=this._createObject(this.model.maxTime),this._maxTimeObj||(this.model.maxTime=d.format(this._createObject((new Date).setHours(23,59,59,59)),this.model.timeFormat,this.model.locale))},_setMinMax:function(){var e=(new Date).setHours(0,0,0,0),t=(new Date).setHours(23,59,59,59);!d.isNullOrUndefined(this._options)&&d.isNullOrUndefined(this._options.minTime)&&(this.model.minTime=d.format(this._createObject(e),this.model.timeFormat,this.model.locale)),!d.isNullOrUndefined(this._options)&&d.isNullOrUndefined(this._options.maxTime)&&(this.model.maxTime=d.format(this._createObject(t),this.model.timeFormat,this.model.locale)),this._createMinMaxObj()},_init:function(e){if(this._options=e,this._cloneElement=this.element.clone(),this._ISORegex(),!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this._initialize(),this._render(),this._wireEvents(),e&&e.value!=s&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()}),this._updateInput(),this._updateTextbox(),null!=this.model.validationRules&&(this._initTimeValidator(),this._setTimeValidation())},_updateTextbox:function(){this._options!==s&&(this._options.value!==s||this.model.value)||this._setTime(this._localizeTime(this.model.minTime))},_setMinMaxTime:function(e,t){!d.isNullOrUndefined(t.minTime)&&h.trim(t.minTime)&&this._isValid(t.minTime)&&(this.model.minTime=t.minTime,this._minTimeObj=this._createObject(this.model.minTime),this._validateTimes()),!d.isNullOrUndefined(t.maxTime)&&h.trim(t.maxTime)&&this._isValid(t.maxTime)&&(this.model.maxTime=t.maxTime,this._maxTimeObj=this._createObject(this.model.maxTime),this._validateTimes()),this._validateMinMax(),this._createMinMaxObj(),d.isNullOrUndefined(t.minTime)||(t.minTime=this.model.minTime),d.isNullOrUndefined(t.maxTime)||(t.maxTime=this.model.maxTime),this._checkMinMax(this.model.value)||(this.model.enableStrictMode?(this.isValidState=!1,this.model.value=null):(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime))),e!==this.model.value&&this._isValid(this.model.value,!0)&&this.element.val(this.model.value)},_setModel:function(e){var t,i,s,a,n=!1,r=this.model.value;for(t in e)switch(t){case"timeFormat":s=this._createObject(this.model.value),this._preTimeformat=this.model.timeFormat,i=this._timeFormat(e[t]),e[t]=this.model.timeFormat,i&&(this.seperator=this._getSeperator()),n=+s!=+this._createObject(this.model.value);break;case"locale":s=this._createObject(this.model.value),this._localize(e[t]),this.model.minTime=d.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=d.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),n=+s!=+this._createObject(this.model.value);break;case"interval":this.model.interval=e[t];break;case"cssClass":this._changeSkin(e[t]);break;case"showRoundedCorner":this._setRoundedCorner(e[t]);break;case"enableRTL":this._setRtl(e[t]);break;case"height":this._setHeight(e[t]);break;case"width":this.wrapper.width(e[t]),this._setListWidth();break;case"value":d.isPlainObject(e[t])&&(e[t]=null),this.model.value=d.format(this._createObject(e[t],!0),this.model.timeFormat,this.model.locale),this._ensureValue(),this._enableMask(),this.model.enableStrictMode&&!this._isValid(e[t],!0)&&(a=this._isValid(e[t])?this._localizeTime(e[t]):e[t],this.element.val(a)),e[t]=this.model.value,n=!0;break;case"enableStrictMode":this.model.enableStrictMode=e[t];break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessages=null),this.model.validationRules=jsondata[key],null!=this.model.validationRules&&(this._initTimeValidator(),this._setTimeValidation());break;case"validationMessages":this.model.validationMessages=jsondata[key],null!=this.model.validationRules&&null!=this.model.validationMessages&&(this._initValidator(),this._setValidation());break;case"popupHeight":this.model.popupHeight=e[t],this._setListHeight();break;case"popupWidth":this.model.popupWidth=e[t],this._setListWidth();break;case"enabled":e[t]?this.enable():this.disable();break;case"htmlAttributes":this._addAttr(e[t]);break;case"disableTimeRanges":this.model.disableTimeRanges=e[t],this._initStartEnd(),this.model.value=d.format(this._createObject(this.element.val(),!0),this.model.timeFormat,this.model.locale),this._ensureValue(),this._enableMask(),this.model.enableStrictMode&&!this._isValid(this.element.val(),!0)&&this.element.val(this.element.val()),n=!0}d.isNullOrUndefined(e.minTime)&&d.isNullOrUndefined(e.maxTime)||(this._setMinMaxTime(r,e),n=!0),d.isNullOrUndefined(e.showPopupButton)?!this.model.showPopupButton||!i&&d.isNullOrUndefined(e.minTime)&&d.isNullOrUndefined(e.maxTime)&&d.isNullOrUndefined(e.locale)&&d.isNullOrUndefined(e.interval)&&d.isNullOrUndefined(e.disableTimeRanges)||this._reRenderDropdown():this._showButton(e[t]),n&&(this._raiseChangeEvent(r,!0),e.value=this.model.value),this._checkErrorClass()},_destroy:function(){this.element.insertAfter(this.wrapper),this.wrapper.remove(),this.element.removeClass("e-input").removeAttr("ondragstart draggable aria-atomic aria-live aria-readonly").val(this.element.attr("value")),this._cloneElement.attr("name")||this.element.removeAttr("name"),this.popupList&&this.popupList.remove()},_initialize:function(){this.target=this.element[0],this.timeIcon=null,this._disabledItems=[],this.popupList=null,this.focused=!1,this.start=0,this.end=0,this.min=null,this.max=null,this.incomplete=!1,this.downPosition=0,this._setLocalize(this.model.locale),this._setMinMax(),this._getAmPm(),this.showDropdown=!1,this._activeItem=0,this.isValidState=!0,this._manualFocus=!1,this._isIE7=this._checkIE7(),this._initStartEnd(),d.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._isIE8="msie"==d.browserInfo().name&&"8.0"==d.browserInfo().version,this._getInternalEvents=!1,this._dateTimeInternal=!1,this.model.timeFormat?this.seperator=this._getSeperator():this._getTimeFormat()},_render:function(){this._renderWrapper(),this._setDimentions(),this._renderTimeIcon(),this._validateTimes(),this._createMinMaxObj(),this._renderDropdown(),this._addAttr(this.model.htmlAttributes),this._checkProperties(),this._enableMask(),this._checkErrorClass(),this.element.attr({"aria-atomic":"true","aria-live":"assertive","aria-readonly":this.model.readOnly,value:this.model.value}),!this.model.showPopupButton&&d.isNullOrUndefined(this.popupList)||this.ul.find("li").attr({tabindex:-1,"aria-selected":!1})},_renderWrapper:function(){this.element.addClass("e-input").attr("tabindex","0"),this.wrapper=d.buildTag("span.e-timewidget e-widget "+this.model.cssClass+"#"+this.target.id+"_timewidget").insertAfter(this.element),d.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.container=d.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container)},_addAttr:function(e){var s=this;h.map(e,function(e,t){var i=t.toLowerCase();"class"==i?s.wrapper.addClass(e):"disabled"==i&&"disabled"==e?s.disable():"readOnly"==i&&"readOnly"==e?s.model.readOnly=!0:("style"!=i&&"id"!=i&&d.isValidAttr(s.element[0],t)?s.element:s.wrapper).attr(t,e)})},_initTimeValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setTimeValidation:function(){var e,t,i,s;for(t in this.element.rules("add",this.model.validationRules),e=(e=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),e.settings.messages[name]={},this.model.validationRules)if(i=null,!d.isNullOrUndefined(this.model.validationRules[t])){if(d.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[t]))for(s in e.settings.messages[name][t]=h.validator.messages[t],this.model.validationMessages)t==s&&(i=this.model.validationMessages[t]);else i=this.model.validationRules.messages[t];e.settings.messages[name][t]=null!=i?i:h.validator.messages[t]}},_renderTimeIcon:function(){var e;this.model.showPopupButton&&(this.timeIcon=d.buildTag("span.e-select").attr({role:"button","aria-label":"select"}),e=d.buildTag("span.e-icon e-arrow-sans-down").attr("role","presentation"),this._isIE8&&(this.timeIcon.attr("unselectable","on"),e.attr("unselectable","on")),this.timeIcon.append(e),this.container.append(this.timeIcon).addClass("e-padding"),this._on(this.timeIcon,"mousedown",this._timeIconClick))},_elementClick:function(){this.showDropdown||this._showResult()},_renderDropdown:function(){var e=h("#"+this.element[0].id+"_popup").get(0);if(e&&h(e).remove(),!this.model.showPopupButton||this.popupList)return!1;this.popupList=d.buildTag("div.e-time-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.target.id+"_popup","",{},{tabindex:0,"aria-activedescendant":""}),d.isTouchDevice()||this.popupList.addClass("e-ntouch"),this.popup=this.popupList,this.ul=d.buildTag("ul.e-ul"),this._isIE8&&this.ul.attr("unselectable","on"),e=d.buildTag("div").append(this.ul),h("body").append(this.popupList.append(e)),this._renderLiTags(),this._setListHeight(),this._setListWidth(),this.popupList.ejScroller({height:this.popupList.height(),width:0,scrollerSize:20}),this.scrollerObj=this.popupList.ejScroller("instance"),this.popupList.css("display","none"),this._listSize=this.ul.find("li").length},_renderLiTags:function(){var e,t,i,s,a,n,r,l;for(this._disabledItems=[],s=6e4*this.model.interval,a=!d.isNullOrUndefined(this.model.disableTimeRanges)&&0<this.model.disableTimeRanges.length,e=this._minTimeObj,t=this._maxTimeObj,n=0;this._compareTime(t,e,!0);)i=this._localizeTime(e),(r=h(document.createElement("li")))[0].appendChild(document.createTextNode(i)),this._isIE8&&r.attr("unselectable","on"),a&&(this._ensureTimeRange(i)?(r.addClass("e-disable"),this._disabledItems.push(n)):r.removeClass("e-disable")),this.ul[0].appendChild(r[0]),e=new Date(e).getTime()+s,n++;l=this.ul.find("li"),d.isTouchDevice()||(this._on(l,"mouseenter",h.proxy(this._OnMouseEnter,this)),this._on(l,"mouseleave",h.proxy(this._OnMouseLeave,this))),this._on(l,"click",h.proxy(this._OnMouseClick,this))},_ensureTimeRange:function(e){if(!d.isNullOrUndefined(this.model.disableTimeRanges)){var t=this._makeDateTimeObj(e);for(i=0;i<this.model.disableTimeRanges.length;i++)if(+t>=+this._makeDateTimeObj(this.model.disableTimeRanges[i].startTime)&&+t<=+this._makeDateTimeObj(this.model.disableTimeRanges[i].endTime))return!0}return!1},_initStartEnd:function(){if(this._startTime=[],this._endTime=[],!d.isNullOrUndefined(this.model.disableTimeRanges))for(i=0;i<this.model.disableTimeRanges.length;i++)this._startTime[i]=this._makeDateTimeObj(this.model.disableTimeRanges[i].startTime),this._endTime[i]=this._makeDateTimeObj(this.model.disableTimeRanges[i].endTime)},_makeDateTimeObj:function(e){if("string"!=typeof e)return e instanceof Date?this._setEmptyDate(e):null;var t=d.preferredCulture(this.model.locale).calendar.patterns.d,i=d.format(new Date("1/1/2000"),t,this.model.locale),i=d.parseDate(i+" "+e,t+" "+this.model.timeFormat);if(!i){if(t=new Date(e),!isNaN(Date.parse(t))&&!d.isNullOrUndefined(e))return this._setEmptyDate(e);i=new Date("1/1/2000 "+e)}return i},_reRenderDropdown:function(){this.ul.empty(),this._renderLiTags(),this._refreshScroller(),this._changeActiveEle()},_refreshScroller:function(){var e="none"==this.popupList.css("display");this.popupList.css("height","auto"),this.popupList.find(".e-content, .e-vscroll").removeAttr("style"),this.popupList.find(".e-vscroll div").removeAttr("style"),e&&this.popupList.css("display","block"),this.scrollerObj.model.height=this.popupList.height(),this.scrollerObj.model.scrollTop=0,this.scrollerObj.refresh(),this._isIE8&&(h("#"+this.scrollerObj._id).children(".e-vscroll").children().attr("unselectable","on"),h("#"+this.scrollerObj._id).find(".e-vhandle").attr("unselectable","on")),e&&this.popupList.css("display","none")},_setListWidth:function(){var e;this.popupList&&((e=this.model.popupWidth)&&"auto"!=e?this.popupList.css({width:e}):this.popupList.css({width:this.wrapper.width()})),this.scrollerObj&&(this._refreshScroller(),this._updateScrollTop())},_setListHeight:function(){this.popupList&&this.popupList.css({"max-height":this.model.popupHeight||"191px"}),this.scrollerObj&&(this._refreshScroller(),this._updateScrollTop())},_updateScrollTop:function(){this.scrollerObj.setModel({scrollTop:this._calcScrollTop()})},_refreshPopup:function(){"auto"==this.model.popupWidth&&this.popupList.css({width:this.wrapper.width()}),this._setListPosition(),this._refreshScroller()},_setListPosition:function(){var e=this.wrapper,t=this._getOffset(e),i=h(document).scrollTop()+h(window).height()-(t.top+h(e).outerHeight()),s=t.top-h(document).scrollTop(),a=this.popupList.outerHeight(),n=this.popupList.outerWidth(),r=t.left,l=e.outerHeight(),o=(l-e.height())/2,d=this._getZindexPartial(),i=(a<i||s<a?t.top+l+3:t.top-a-3)-o,s=h(document).scrollLeft()+h(window).width()-r;(this.model.enableRTL||s<n&&n<r+e.outerWidth())&&(r-=this.popupList.outerWidth()-e.outerWidth()),this.popupList.css({left:r+"px",top:i+"px","z-index":d})},_getOffset:function(e){return d.util.getOffset(e)},_getZindexPartial:function(){return d.util.getZindexPartial(this.element,this.popupList)},_enableMask:function(){this.isValidState=!(this.model.minTime&&this._compareTime(this.model.minTime,this.model.value)||this.model.maxTime&&this._compareTime(this.model.value,this.model.maxTime)),this._setTime(this.model.value),this._getInternalEvents&&!this.isValidState&&this._trigger("outOfRange"),this._changeActiveEle(),this._preVal=this.element.val()},_setTime:function(e){e=this._localizeTime(e);this.element.val(e),this.model.value=e},_timeFromISO:function(e){var t,i,s,a,n,r,l,o=this._extISORegex.exec(e)||this._basicISORegex.exec(e),d="",h="",c="";if(o){for(t=0;t<this._dates.length;t++)if(this._dates[t][1].exec(o[1])){d=this._dates[t][0];break}if(o[3])for(i=0;i<this._times.length;i++)if(this._times[i][1].exec(o[3])){h=(o[2]||" ")+this._times[i][0];break}for(s=(d+h+(c=o[4]&&this._zeroRegex.exec(o[4])?"Z":c)).match(this._tokens),a=[],r=0;r<s.length;r++)l=s[r],n=this._checkLiteral(s[r]),l=this._numberRegex[n?s[r].toLowerCase():l.length]||new RegExp("^\\d{1,"+l.length+"}"),(l=e.match(l))&&(0<=e.substr(0,e.indexOf(l))&&!n&&(0<=s[r].indexOf("M")?a.push(parseInt(l[0])-1):a.push(parseInt(l[0]))),e=e.slice(e.indexOf(l[0])+l[0].length));return new Date(a[0],a[1],a[2],a[3],a[4],a[5])}},_checkLiteral:function(e){return"t"==(char=e.toLowerCase())||"z"==char||":"==char||"-"==char},_setMask:function(){this.model.value=new Date,this._enableMask()},_validateTimes:function(){var e=this._validateTimeFormat(this.model.timeFormat);this.model.timeFormat=e||"h:mm tt",this._isValid(this.model.minTime)||(this.model.minTime="12:00 AM"),this._isValid(this.model.maxTime)||(this.model.maxTime="11:59 PM"),this._isValid(this.model.value,!0)||(this.model.value=null),this._checkMinMax(this.model.value)||this.model.enableStrictMode||(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime)),this._validateMinMax()},_ensureValue:function(){!this._checkMinMax(this.model.value)&&this._isValid(this.model.value,!0)&&(this.model.enableStrictMode?this.isValidState=!1:(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime)))},_validateMinMax:function(){this.model.minTime&&this.model.maxTime&&this._compareTime(this.model.minTime,this.model.maxTime)&&(this.model.minTime=this.model.maxTime)},_checkProperties:function(){this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&(this.model.enabled=!1,this.enable()):(this.model.enabled=!0,this.disable()),this._addProperty(),this._checkAttributes()},_addProperty:function(){this._setRtl(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner)},_setRtl:function(e){e?(this.wrapper.addClass("e-rtl"),this.popupList&&this.popupList.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.popupList&&this.popupList.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popupList&&this.popupList.addClass("e-corner")):(this.container.removeClass("e-corner"),this.popupList&&this.popupList.removeClass("e-corner"))},_showButton:function(e){(this.model.showPopupButton=e)?(this.container.addClass("e-padding"),this._renderTimeIcon(),this._renderDropdown(),this._addProperty()):(this.container.removeClass("e-padding"),this.timeIcon.remove(),this.popupList.remove(),this.timeIcon=this.popupList=null,h(document).off("mousedown",h.proxy(this._OnDocumentClick,this)))},_checkAttributes:function(){this.element.attr("name")||this.element.attr({name:this.element[0].id}),"ondragstart"in document.createElement("input")&&this.element.attr({ondragstart:"return false"}),"draggable"in document.createElement("input")&&this.element.attr({draggable:"false"})},_getAmPm:function(){var e=new Date;e.setHours(0),this.ttAM=h.trim(this._localizeMeridian(e)),e.setHours(23),this.ttPM=h.trim(this._localizeMeridian(e))},_setDimentions:function(){this._setHeight(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_setHeight:function(e){e&&this.wrapper.height(e),this._isIE7&&this.element.height(this.container.height())},_validateTimeFormat:function(e){var e=e.split(" "),i="";return 1==e.length||2==e.length?(h(e).each(function(e,t){i+=h.trim(t)+" "}),h.trim(i)):null},_getSeperator:function(){for(var e=this._getElePlace(),t=this.model.timeFormat.split(" ")[e.time],i=new RegExp("^[a-zA-Z0-9]+$"),s=0;s<t.length;s++)if(!i.test(t.charAt(s)))return t.charAt(s)},_checkInComplete:function(){var e=this._getCaretSelection(),t=this._getStartEnd(e),i="00",s=this._getSelectedValue(t),t=this._getCategory(t);e.end-e.start==this.element.val().length&&this._checkAll(),t&&"tt"!=t&&(this._findCategoryPosition(t),"__"==s?this._changeToDefault(i="h"!=t&&"hh"!=t?i:"12"):1!=t.length&&1==s.length&&(s=this._changeWhole(s),this.element.val(this._replaceAt(this.target.value,this.start,this.end,s))))},_checkAll:function(){for(var e,t=this._getElePlace(),i=this.model.timeFormat.split(" ")[t.time].split(this.seperator),s=0;s<i.length;s++)this._findCategoryPosition(i[s]),e=this._getSelectedValue({start:this.start,end:this.end}),1!=i[s].length&&1==e.length&&(e=this._changeWhole(e),this.element.val(this._replaceAt(this.element.val(),this.start,this.end,e)))},_changeToDefault:function(e){var t;this.incomplete=!0,t=this.element[0].value,this.element[0].value=this._replaceAt(this.target.value,this.start,this.end,e),(e=this._checkExceedRange(this.target.value))&&this._setTime(this.model[e]),this._setSelection(this.start,this.end),this._raiseChangeEvent(t)},_setSelection:function(e,t){var i=this.element[0];i.setSelectionRange?i.setSelectionRange(e,t):i.createTextRange&&((i=i.createTextRange()).collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())},_getSelectedValue:function(e){return this.target.value.substring(e.start,e.end)},_getMinMax:function(e,t){"hh"==e||"h"==e?(this.min=1,this.max=11,t&&(this.max=12)):"HH"==e||"H"==e?(this.min=0,this.max=23):"mm"!=e&&"m"!=e&&"ss"!=e&&"s"!=e||(this.min=0,this.max=59)},_focusElement:function(){this._manualFocus=!0,this.element.focus()},_targetFocus:function(e){this._clearRange(),e.preventDefault(),this.focused=!0,this.element.on("mousewheel DOMMouseScroll",h.proxy(this._mouseWheel,this)),this.wrapper.addClass("e-focus").removeClass("e-error").attr("aria-invalid","false"),this._manualFocus||(this._findCategoryPosition(this._getLeast(!1)),this._setSelection(this.start,this.end)),this._manualFocus=!1,this._prevTimeVal=this.element.val(),this._raiseEvent("focusIn")},_targetBlur:function(){this.focused=!1,this.element.off("mousewheel DOMMouseScroll",h.proxy(this._mouseWheel,this)),this.wrapper.removeClass("e-focus"),this.model.enableStrictMode||-1<this.target.value.indexOf("_")&&this.element.val(""),!this._checkMinMax(this.target.value)&&this._isValid(this.target.value,!0)?this.model.enableStrictMode?this.isValidState=!1:(this.model.minTime&&!this._compareTime(this._createObject(this.target.value),this.model.minTime,!0)&&this.element.val(this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this._createObject(this.target.value),!0)&&this.element.val(this.model.maxTime),this._isValid(this.model.value,!0)||this.element.val(null),this.isValidState=!0):this.isValidState=!0,this._ensureValue(),this._raiseChangeEvent(),this._checkErrorClass(),this._raiseEvent("focusOut"),this.model.enableStrictMode||this._checkInComplete()},_clearRange:function(){var e=this.element[0];isNaN(e.selectionStart)||(e.selectionStart=0,e.selectionEnd=0)},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true")},_getCaretSelection:function(){var e,t,i=this.element[0];return isNaN(i.selectionStart)?(t=document.selection.createRange().getBookmark(),(e=i.createTextRange()).moveToBookmark(t),(t=i.createTextRange()).collapse(!0),t.setEndPoint("EndToStart",e),{start:t=t.text.length,end:t+e.text.length}):(t=i.selectionStart,e=i.selectionEnd,{start:Math.abs(t),end:Math.abs(e)})},_mouseDownOnInput:function(){this.focused||d.isTouchDevice()||this._focusElement(),this.downPosition=this._getCaretSelection(),h(document).on("mouseup",h.proxy(this._mouseUpOnInput,this))},_mouseUpOnInput:function(e){e.preventDefault(),h(document).off("mouseup",h.proxy(this._mouseUpOnInput,this));e=this._getCaretSelection();this.incomplete&&(this.incomplete=!1,e=this.downPosition),this.target.value!=this._getSelectedText()&&(e=this._getStartEnd(e),this._setSelection(e.start,e.end))},_getCategoryPosition:function(e){var t,i,s=0,a=0,n=this.target.value.split(" "),r=this._getElePlace(),l=this.seperator,o=!1,d=this.model.timeFormat.split(" ")[r.time].split(l),h=n[r.time].split(l);if(!(d.length>h.length))if("tt"==e)n[r.tt]!=this.ttAM&&n[r.tt]!=this.ttPM||(a=(s=0==r.tt?0:n[r.time].length+1)+n[r.tt].length,o=!0);else if(s=0==r.time?0:n[r.tt].length+1,-1!=(t=d.indexOf(e))){for(i=0;i<d.length&&(a=h[i].length+1,i!=t);i++)s+=a;a+=s-1,o=!0}return{start:s,end:a,isValid:o}},_getCategory:function(e){var t=this.model.timeFormat.split(" "),i=this.seperator,s=this._getElePlace();return e.isTT?t[s.tt]:t[s.time].split(i)[e.index]},_getStartEnd:function(e){for(var t=this.seperator,i=this.element.val().split(" "),s=0,a=0,n=tt=null,r=0;r<i.length;r++)if(i[r]!=this.ttAM&&i[r]!=this.ttPM)for(var l=i[r].split(t),o=s,d=s+l[0].length,h=0;h<l.length;h++){if(a=l[h].length+s,e.start<=a){n=h,tt=!1,r=i.length;break}s+=l[h].length+1}else{if(e.start<=s+i[r].length){a=i[r].length+s,tt=!(n=0),r=i.length;break}s+=i[r].length+1}return null==n&&(s=o,a=d,n=0,tt=!1),{start:s,end:a,index:n,isTT:tt}},_modifyValue:function(e){var t,i;this._isValid(this.target.value)&&(this.model.enableStrictMode||this._checkInComplete(),i=(t=this._getCaretSelection()).start==t.end?(i=this._getLeast(!0),i=this._getCategoryPosition(i),this._getStartEnd(i)):this._getStartEnd(t),this.start=i.start,this.end=i.end,this._changeValue(i,e))},_keyUpOnInput:function(e){e.preventDefault(),this._preVal!=this.element.val()&&(this._preVal=this.element.val())},_getNextCategory:function(e,t){var i=[],s=this.seperator,a=this.model.timeFormat.split(" ");return h(a).each(function(e,t){"tt"==t?i.push(t):(t=t.split(s),i=t.concat(i))}),-1!=(a=i.indexOf(e))?(t=t?0==a?i.length-1:a-1:a==i.length-1?0:a+1,i[t]):e},_getElePlace:function(){var e,t="tt"==this.model.timeFormat.split(" ")[0]?(e=1,0):(e=0,1);return{time:e,tt:t}},_movePosition:function(e,t){var e=this._getStartEnd(e),i=(i=this._getCategory(e))||this._getLeast(t),i=this._getNextCategory(i,t);(e=this._getCategoryPosition(i)).isValid&&this._setSelection(e.start,e.end)},_findActiveIndex:function(){var e=this.ul.find("li"),t=this.element.val(),i=e.first().html(),t=(this._parse(t)-this._parse(i))/(6e4*this.model.interval);t=Math.round(t),this._activeItem=t==e.length?t:t+1,(this._activeItem<0||this._activeItem>e.length||isNaN(this._activeItem))&&(this._activeItem=0)},_keyDownOnInput:function(e){var t,i,s,a,n,r,l,o,d,h,c;if(this.model.readOnly&&!this._readOnlyKeys(e)||(s=e.keyCode,this._getInternalEvents&&38!=s&&40!=s&&36!=s&&35!=s&&9!=s))return!1;if(!this.model.enableStrictMode){if(this.showDropdown&&38!=s&&40!=s&&27!=s&&!this._readOnlyKeys(e))return!1;!this.showDropdown||37!=s&&39!=s||(e.keyCode=37==s?38:40)}switch(t=this._getCaretSelection(),c=this._getStartEnd(t),i=this._getCategory(c),e.keyCode){case 38:e.preventDefault(),this.showDropdown?this.showDropdown&&(e.preventDefault(),this._findActiveIndex(),prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectUp(this._activeItem-1),0==this._activeItem&&(this._activeItem=prevActiveItem),this._addListHover(),(activeItem=this._getActiveItem()).length)&&this._selectTimeItem(activeItem):this._isValid(this.target.value)&&this._modifyValue(!0);break;case 40:e.preventDefault(),e.altKey&&this.model.showPopupButton?this._showhidePopup():this.showDropdown?this.showDropdown&&(e.preventDefault(),this._findActiveIndex(),prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectDown(this._activeItem),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=prevActiveItem,this._addListHover(),this._selectTimeItem(this._getActiveItem())):this._isValid(this.target.value)&&this._modifyValue(!1);break;case 37:e.preventDefault(),t.start==t.end?this._setSelection(t.start-1,t.start-1):this._movePosition(t,!0);break;case 39:e.preventDefault(),t.start==t.end?this._setSelection(t.start+1,t.start+1):this._movePosition(t,!1);break;case 36:e.preventDefault(),this.showDropdown?(this._activeItem=0,prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectDown(this._activeItem),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=prevActiveItem,this._addListHover(),this._selectTimeItem(this._getActiveItem())):(r=this._firstlastVal(!0),(r=this._getCategoryPosition(r)).isValid&&this._setSelection(r.start,r.end));break;case 35:e.preventDefault(),this.showDropdown?(this._activeItem=this._listSize+1,prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectUp(this._activeItem-1),0==this._activeItem&&(this._activeItem=prevActiveItem),this._addListHover(),this._selectTimeItem(this._getActiveItem())):(r=this._firstlastVal(!1),(r=this._getCategoryPosition(r)).isValid&&this._setSelection(r.start,r.end));break;case 9:this._getInternalEvents||(this._hideResult(),r=null,e.shiftKey&&0<t.start?r=!0:!e.shiftKey&&t.end<this.element.val().length&&(r=!1),null!=r&&(e.preventDefault(),this._checkInComplete(),this._movePosition(t,r)));break;case 13:if(!this.showDropdown){this._raiseChangeEvent();break}case 27:e.preventDefault(),this._hideResult();break;case 8:case 46:if(this.model.enableStrictMode)return;this.target.value!=this._getSelectedText()&&(e.preventDefault(),i)&&"tt"!=i&&(this._findCategoryPosition(i),r=8==s&&t.start!=this.start,a=46==s&&t.end!=this.end,n=this.end-this.start,t.start==t.end&&1!=n||!r&&!a&&t.start==t.end?r?(this.element[0].value=this._replaceAt(this.target.value,t.start-1,t.start,""),this._setSelection(t.start-1,t.start-1)):a&&(this.element[0].value=this._replaceAt(this.target.value,t.end,t.end+1,""),this._setSelection(t.end,t.end)):(n=this.start,r=this.end,this.element[0].value=this._replaceAt(this.target.value,n,r,"__"),this._setSelection(n,r-n!=2?r+1:r)))}l=this._getSelectedValue(c),d=e.keyCode||e.charCode,47<e.keyCode&&e.keyCode<58?o=String.fromCharCode(d):95<e.keyCode&&e.keyCode<106&&(o=String.fromCharCode(d-48)),"tt"==i&&(!e.shiftKey&&!e.ctrlKey&&!e.altKey&&64<e.keyCode&&e.keyCode<91||47<e.keyCode&&e.keyCode<58||95<e.keyCode&&e.keyCode<106)&&(e.preventDefault(),d=this._getCategoryPosition(i),this.start=d.start,this.end=d.end,this._changeAmPm(l),this._raiseChangeEvent()),this.target.value!=this._getSelectedText()||e.shiftKey||e.ctrlKey||e.altKey||(64<e.keyCode&&e.keyCode<91&&!this.model.enableStrictMode&&e.preventDefault(),(47<e.keyCode&&e.keyCode<58||95<e.keyCode&&e.keyCode<106)&&(c=this._getStartEnd(t),this._setSelection(c.start,c.end))),!e.shiftKey&&!e.ctrlKey&&!e.altKey&&47<e.keyCode&&e.keyCode<58||95<e.keyCode&&e.keyCode<106?"tt"!=i&&(this._getMinMax(i,!0),t.start==t.end?(this._findCategoryPosition(i),t.start==this.start?(h=o+l,this.element.val(this.model.minTime),c=this._getStartEnd(t),this._setSelection(c.start,c.end)):h=l+o,!(2<h.length)&&Number(h)>=this.min&&this.max>=Number(h)||this.model.enableStrictMode||e.preventDefault()):Number(o)>=this.min&&this.max>=Number(o)||this.model.enableStrictMode||e.preventDefault()):this._allowKeyCodes(e)||(this.model.enableStrictMode||8==e.keyCode||46==e.keyCode?e.stopPropagation():e.preventDefault())},_getSelectedText:function(){var e;return window.getSelection?(e=h("#"+this.element[0].id).get(0)).value.substring(e.selectionStart,e.selectionEnd):document.selection.createRange().text},_allowKeyCodes:function(e){return!((!e.ctrlKey||65!=e.keyCode&&67!=e.keyCode&&90!=e.keyCode&&89!=e.keyCode)&&9!=e.keyCode&&116!=e.keyCode&&13!=e.keyCode)},_readOnlyKeys:function(e){return!(35!=e.keyCode&&36!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode&&!this._allowKeyCodes(e))},_firstlastVal:function(e){var t=this.model.timeFormat.split(" "),i=this.seperator;return e?"tt"!=t[0]?t[0].split(i)[0]:"tt":"tt"==t[0]&&t[1]&&(e=t[1].split(i)).length?e[e.length-1]:"tt"},_mouseWheel:function(e){if(e.preventDefault(),this.model.readOnly)return!1;var t,e=e.originalEvent;e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),0<t?this._modifyValue(!0):t<0&&this._modifyValue(!1)},_addListHover:function(){this._addSelected(),this._updateScrollTop()},_addSelected:function(){this.ul.find("li").removeClass("e-active e-hover");var e=this._getActiveItem();e.length&&!e.hasClass("e-disable")&&e.addClass("e-active")},_disableItemSelectDown:function(e){return(e=null==e||e<0?0:e)<this._listSize?h.inArray(e,this._disabledItems)<0?e:this._disableItemSelectDown(e+1):this._listSize},_disableItemSelectUp:function(e){if((e=null==(e-=1)||e<0?0:e)<this._listSize){if(h.inArray(e,this._disabledItems)<0)return e+1;if(0<e)return this._disableItemSelectUp(e)}return 0},_getActiveItem:function(){return h(this.ul.find("li")[this._activeItem-1])},_timeIconClick:function(e){var t=!1;if(e.button?t=2==e.button:e.which&&(t=3==e.which),!t){if(e.preventDefault(),!this.model.enabled||this.model.readOnly||this.ul.find("li").length<1)return!1;this._showhidePopup(),t=this.element.val().length,d.isTouchDevice()||this._setSelection(t,t)}},_showhidePopup:function(){if(this._getInternalEvents)return!1;this.showDropdown?this._hideResult():this._showResult()},_showResult:function(){this._raiseEvent("beforeOpen"),this._refreshPopup(),this.focused||d.isTouchDevice()||this._focusElement(),this.model.value?this._changeActiveEle():this.ul.find("li").removeClass("e-active");var e=this,t=this._vissibleAndCalculateTop();this.popupList.slideDown(this.model.enableAnimation?200:0,function(){h(document).on("mousedown",h.proxy(e._OnDocumentClick,e))}),this.scrollerObj.setModel({scrollTop:t}),this.showDropdown=!0,this._listSize=this.ul.find("li").length,h(window).on("resize",h.proxy(this._OnWindowResize,this)),this._on(d.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("open"),this.wrapper.addClass("e-active")},_hideResult:function(){this.showDropdown&&!this._getInternalEvents&&(this.showDropdown=!1,this.popupList.slideUp(this.model.enableAnimation?100:0),h(document).off("mousedown",h.proxy(this._OnDocumentClick,this)),h(window).off("resize",h.proxy(this._OnWindowResize,this)),this._off(d.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("close"),this.wrapper.removeClass("e-active"))},_vissibleAndCalculateTop:function(){this.popupList.css({display:"block"});var e=this._calcScrollTop();return this.popupList.css({display:"none"}),e},_calcScrollTop:function(){this.ul.outerHeight();var e=this.ul.find("li").outerHeight();return e*this.ul.find("li.e-active").index()-(this.popupList.outerHeight()-e)/2},_changeActiveEle:function(){if(!this.model.showPopupButton||!this.popupList)return!1;var e=this.ul.find("li"),t=this.element.val(),i=e.first().html(),i=(this._parse(t)-this._parse(i))/(6e4*this.model.interval);i=Math.round(i),this._activeItem=i==e.length?i:i+1,(this._activeItem<0||this._activeItem>e.length||isNaN(this._activeItem)||this._ensureTimeRange(t))&&(this._activeItem=0),this._addListHover()},_OnDocumentClick:function(e){h(e.target).is(this.popupList)||h(e.target).parents(".e-time-popup").is(this.popupList)||h(e.target).is(this.wrapper)||h(e.target).parents(".e-timewidget").is(this.wrapper)?(h(e.target).is(this.popupList)||h(e.target).parents(".e-time-popup").is(this.popupList))&&e.preventDefault():this._hideResult()},_OnWindowResize:function(){this._refreshPopup()},_OnMouseEnter:function(e){e=e.target;this.ul.find("li").removeClass("e-hover"),h(e).hasClass("e-disable")||h(e).addClass("e-hover")},_OnMouseLeave:function(){this._dateTimeInternal&&!this.model.value||this.ul.find("li").removeClass("e-hover")},_OnMouseClick:function(e){e.preventDefault(),h(e.target).hasClass("e-disable")||(this.model.enabled&&!this.model.readOnly&&(this._activeItem=h(e.target).index()+1,this.ul.find("li").attr({tabindex:-1,"aria-selected":!1}),h(e.target).attr({"aria-selected":!0,tabindex:0}),this._addSelected(),this._selectTimeItem(h(e.target))),this._showhidePopup())},_selectTimeItem:function(e){this._beforeChange(e),this._raiseChangeEvent()&&this._trigger("select",{value:this.model.value,prevTime:this._previousValue})},_findCategoryPosition:function(e){"least"==e&&(e=this._getLeast(!0));e=this._getCategoryPosition(e);this.start=e.start,this.end=e.end},_getLeast:function(i){var e=this.model.timeFormat.split(" "),s=this.seperator,a=null;return h(e).each(function(e,t){"tt"!=t&&(t=t.split(s),a=i?t[t.length-1]:t[0])}),a},_changeValue:function(e,t){this.target.value;var s,a=this._getCategory(e);if(!a)return!1;if(this._setSelection(this.start,this.end),s=this.target.value.substring(this.start,this.end),this._checkMinMax(this.target.value))if(s!=this.ttAM&&s!=this.ttPM){if(s=this._changeCurrentValue(s,a,t),1!=a.length&&(s=this._changeWhole(s)),this._findCategoryPosition(a),this.element.val(this._replaceAt(this.target.value,this.start,this.end,s)),this.end=this.start+s.toString().length,this._setSelection(this.start,this.end),this._ensureTimeRange(this.target.value)&&this._checkMinMax(this.target.value)){var n=this._createObject(this.target.value),r=n.getHours(),l=t?this._startTime:this._endTime,o=t?this._endTime:this._startTime;if(!d.isNullOrUndefined(this.model.disableTimeRanges))for(i=0;i<this.model.disableTimeRanges.length;i++)(l[i].getHours()===r||+n>=+this._startTime[i]&&+n<=+this._endTime[i])&&(this.target.value=this._localizeTime(o[i]),this._setSelection(this.start,this.end),this._changeValue(e,t))}}else this._changeAmPm(s);else s=this._checkExceedRange(this.target.value),this._setTime(this.model[s]),this._findCategoryPosition(a),this._setSelection(this.start,this.end);this._checkMinMax(this.target.value)?this._raiseChangeEvent():(this.element.val(this.model.value),this._findCategoryPosition(a),this._setSelection(this.start,this.end))},_checkMinMax:function(e){e=this._checkExceedRange(e);return!(e=null==e?!1:e)},_checkExceedRange:function(e){if(e){if(this.model.minTime&&!this._compareTime(e,this.model.minTime,!0))return"minTime";if(this.model.maxTime&&!this._compareTime(this.model.maxTime,e,!0))return"maxTime"}return null},_changeWhole:function(e){return 9<e?""+e:"0"+e},_changeAmPm:function(e){e=e==this.ttAM?this.ttPM:this.ttAM,this.element.val(this._replaceAt(this.target.value,this.start,this.end,e)),this._setSelection(this.start,this.end)},_changeMinute:function(e){var t,i=this._getExactFormat(["mm","m"]);i&&(this._findCategoryPosition(i),t=Number(this.target.value.substring(this.start,this.end)),this._getMinMax(i),e?t==this.max?(t=this.min,this._changeHour(e)):t+=1:t==this.min?(t=this.max,this._changeHour(e)):--t,this._findCategoryPosition(i),1!=i.length&&(t=this._changeWhole(t)),this.element.val(this._replaceAt(this.target.value,this.start,this.end,t)))},_changeHour:function(e){var t,i=this._getExactFormat(["hh","h","HH","H"]);i&&(this._findCategoryPosition(i),t=Number(this.target.value.substring(this.start,this.end)),this._getMinMax(i),e?t==this.max?(t+=1,this._changeMeridian()):t>this.max?t=this.min:t+=1:t==this.min?t=this.max+1:t>this.max?(t=this.max,this._changeMeridian()):--t,this._findCategoryPosition(i),1!=i.length&&(t=this._changeWhole(t)),this.element.val(this._replaceAt(this.target.value,this.start,this.end,t)))},_getExactFormat:function(e){for(var t=this.model.timeFormat,i=0;i<e.length;i++)if(-1!=t.indexOf(e[i]))return e[i];return null},_changeMeridian:function(){var e;-1!=this.model.timeFormat.indexOf("tt")&&(this._findCategoryPosition("tt"),e=this.target.value.substring(this.start,this.end)==this.ttAM?this.ttPM:this.ttAM,this.element.val(this._replaceAt(this.target.value,this.start,this.end,e)))},_changeCurrentValue:function(e,t,i){e=Number(e);var s=1,a=!0;return this._getMinMax(t),"hh"==t||"h"==t||"HH"==t||"H"==t?s=this.model.hourInterval:"mm"==t||"m"==t?s=this.model.minutesInterval:"ss"!=t&&"s"!=t||(s=this.model.secondsInterval),s<=0||(i?(("hh"==t||"h"==t)&&e>this.max?e=this.min-1+s:e<this.max?e+=s:(a=!1,"hh"!=t&&"h"!=t?e=this.min-1+s:e+=s,this._changeAdjacent(t,i)),"hh"!=t&&"h"!=t||e!=this.max+1?e>this.max+1&&(e-=this.max+1,a)&&this._changeAdjacent(t,i):a&&this._changeAdjacent(t,i),"hh"!=t&&"h"!=t&&e==this.max+1&&(e=this.min,a)&&this._changeAdjacent(t,i)):("hh"!=t&&"h"!=t&&e>this.min||("hh"==t||"h"==t)&&e>this.min&&e<=this.max?e-=s:"hh"!=t&&"h"!=t||e!=this.min?(a=!1,e=this.max+1-s,this._changeAdjacent(t,i)):e=this.max+2-s,e<this.min&&(e+=this.max+1,a)&&this._changeAdjacent(t,i))),e},_changeAdjacent:function(e,t){"ss"==e||"s"==e?this._changeMinute(t):"mm"==e||"m"==e?this._changeHour(t):"hh"!=e&&"h"!=e&&"HH"!=e&&"H"!=e||this._changeMeridian()},_valueChange:function(){this._raiseChangeEvent()},_beforeChange:function(e){return this._raiseEvent("beforeChange")||this.element.val(e.text()),!0},_raiseChangeEvent:function(e,t){return e=e===s?this.model.value:e,(this._previousValue=e)!=(current=this.target.value||null)&&(this.isValidState=!!(this._checkMinMax(this.target.value)&&this._isValid(this.target.value,this.model.enableStrictMode)||!this.target.value),this.model.value=this._isValid(this.target.value,!0)&&this._checkMinMax(this.target.value)?this.target.value:null,this.model.value||this.model.enableStrictMode||this._setTime(this.model.value),this.model.value!=this._previousValue)&&(this._raiseEvent("change",t),this._raiseEvent("_change",t),!0)},_raiseEvent:function(e,t){var i={value:this.model.value,prevTime:this._previousValue};return"change"==e&&(i.isInteraction=!t),this._trigger(e,i)},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=-1;if(7<=(e=null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)?parseFloat(RegExp.$1):e)&&e<8)return!0}return!1},_replaceAt:function(e,t,i,s){return e.substring(0,t)+s+e.substring(i)},_localizeTime:function(e){return e?h.trim(d.format(this._createObject(e),this.model.timeFormat,this.model.locale)):null},_localizeMeridian:function(e){return h.trim(d.format(e,"tt",this.model.locale))},_compareTime:function(e,t,i){return(i=!!i)?this._parse(e)>=this._parse(t):this._parse(e)>this._parse(t)},_isValid:function(e,t){return(e=this._createObject(e,t))&&"function"==typeof e.getTime&&isFinite(e.getTime())},_parse:function(e){return Date.parse(this._createObject(e))},_setEmptyDate:function(e){e=new Date(e);return e.setDate(1),e.setMonth(0),e.setFullYear(2e3),e},_createObject:function(e,t){var i,s,a,n=null;return"string"==typeof e?(i=this._setModelOption?this._preTimeformat:this.model.timeFormat,s=d.preferredCulture(this.model.locale).calendar.patterns.d,a=d.format(new Date("1/1/2000"),s,this.model.locale),n=d.parseDate(a+" "+e,s+" "+i,this.model.locale),(this._extISORegex.exec(e)||this._basicISORegex.exec(e))&&(this.model.value=n=this._timeFromISO(e)),this._setModelOption=!1,n||(a=new Date(e),n=isNaN(Date.parse(a))||d.isNullOrUndefined(e)?this._dateTimeInternal&&""!=e?new Date("1/1/2000 "+e):null:this._setEmptyDate(e))):"number"==typeof e?n=new Date(e):e instanceof Date&&(n=this._setEmptyDate(e)),n=n&&!this._dateTimeInternal&&t&&(s=this._localizeTime(n),this._ensureTimeRange(s))?null:n},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur),this._on(this.element,"mousedown",this._mouseDownOnInput),this._on(this.element,"keydown",this._keyDownOnInput),this._on(this.element,"keyup",this._keyUpOnInput)}})}),function(e){var o,d,h,t,l,r,c,u,m,p,I,O,_,f,T,C,S,s,M,F,V,v,g,P,L,R,H,E,y,b,w,a=function(e){return new a.prototype.init(e)};"undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=a:e.Globalize=a,a.cultures={},(a.prototype={constructor:a,init:function(e){return this.cultures=a.cultures,this.cultureSelector=e,this}}).init.prototype=a.prototype,a.cultures.default={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},a.cultures.default.calendar=a.cultures.default.calendars.standard,a.cultures.en=a.cultures.default,a.cultureSelector="en",o=/^0x[a-f0-9]+$/i,d=/^[+\-]?infinity$/i,h=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,t=/^\s+|\s+$/g,l=function(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},r=function(e,t){return e.substr(e.length-t.length)===t},c=function(){var e,t,i,s,a,n=arguments[0]||{},r=1,l=arguments.length,o=!1;for("boolean"==typeof n&&(o=n,n=arguments[1]||{},r=2),"object"==typeof n||m(n)||(n={});r<l;r++)if(null!=(e=arguments[r]))for(t in e)a=n[t],i=e[t],n!==i&&(o&&i&&(p(i)||(s=u(i)))?(a=s?(s=!1,a&&u(a)?a:[]):a&&p(a)?a:{},n[t]=c(o,a,i)):void 0!==i&&(n[t]=i));return n},u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},m=function(e){return"[object Function]"===Object.prototype.toString.call(e)},p=function(e){return"[object Object]"===Object.prototype.toString.call(e)},I=function(e,t){return 0===e.indexOf(t)},O=function(e){return(e+"").replace(t,"")},_=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)},f=function(e,t,i){for(var s=e.length;s<t;s+=1)e=i?"0"+e:e+"0";return e},T=function(e,t){for(var i,s=0,a=!1,n=0,r=e.length;n<r;n++)switch(i=e.charAt(n)){case"'":a?t.push("'"):s++,a=!1;break;case"\\":a&&t.push("\\"),a=!a;break;default:t.push(i),a=!1}return s},C=function(e,t){var e=e.patterns,i=(t=t||"F").length;if(1===i){if(!(e=e[t]))throw"Invalid date format string '"+t+"'.";t=e}else 2===i&&"%"===t.charAt(0)&&(t=t.charAt(1));return t},S=function(e,t,i){function s(e,t){var i,e=e+"";return 1<t&&e.length<t?(i=y[t-2]+e).substr(i.length-t,t):e}function a(e,t){if(v)return v[t];switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw"Invalid part value "+t}}var n,r,l,o,d,h,c,m=i.calendar,u=m.convert;if(!t||!t.length||"i"===t)return g=i&&i.name.length?u?S(e,m.patterns.F,i):(i=new Date(e.getTime()),n=F(e,m.eras),i.setFullYear(V(e,m,n)),i.toLocaleString()):e.toString();r=m.eras,l="s"===t,t=C(m,t);var p,_,f,v,g=[],y=["0","00","000"],b=/([^d]|^)(d|dd)([^d]|$)/g,w=0,k=M();for(!l&&u&&(v=u.fromGregorian(e));;){var D=k.lastIndex,x=k.exec(t),D=t.slice(D,x?x.index:t.length);if(w+=T(D,g),!x)break;if(w%2)g.push(x[0]);else switch(d=(o=x[0]).length,o){case"ddd":case"dddd":h=3===d?m.days.namesAbbr:m.days.names,g.push(h[e.getDay()]);break;case"d":case"dd":_=!0,g.push(s(a(e,2),d));break;case"MMM":case"MMMM":c=a(e,1),g.push((m.monthsGenitive&&(_||f||(_=b.test(t),f=!0),_)?m.monthsGenitive:m.months)[3===d?"namesAbbr":"names"][c]);break;case"M":case"MM":g.push(s(a(e,1)+1,d));break;case"y":case"yy":case"yyyy":c=v?v[0]:V(e,m,F(e,r),l),d<4&&(c%=100),g.push(s(c,d));break;case"h":case"hh":0===(p=e.getHours()%12)&&(p=12),g.push(s(p,d));break;case"H":case"HH":g.push(s(e.getHours(),d));break;case"m":case"mm":g.push(s(e.getMinutes(),d));break;case"s":case"ss":g.push(s(e.getSeconds(),d));break;case"t":case"tt":c=e.getHours()<12?m.AM?m.AM[0]:" ":m.PM?m.PM[0]:" ",g.push(1===d?c.charAt(0):c);break;case"f":case"ff":case"fff":g.push(s(e.getMilliseconds(),3).substr(0,d));break;case"z":case"zz":p=e.getTimezoneOffset()/60,g.push((p<=0?"+":"-")+s(Math.floor(Math.abs(p)),d));break;case"zzz":p=e.getTimezoneOffset()/60,g.push((p<=0?"+":"-")+s(Math.floor(Math.abs(p)),2)+":"+s(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":m.eras&&g.push(m.eras[F(e,r)].name);break;case"/":g.push(m["/"]);break;default:throw"Invalid date format pattern '"+o+"'."}}return g.join("")},w=function(e,t,i){var s=i.groupSizes,a=s[0],n=1,r=Math.pow(10,t),r=Math.round(e*r)/r,l=(e=r=isFinite(r)?r:e)+"",o="",r=l.split(/e/i),e=1<r.length?parseInt(r[1],10):0;l=(r=(l=r[0]).split("."))[0],o=1<r.length?r[1]:"",0<e?(l+=(o=f(o,e,!1)).slice(0,e),o=o.substr(e)):e<0&&(o=(l=f(l,1+(e=-e),!0)).slice(-e,l.length)+o,l=l.slice(0,-e));for(var o=0<t?i["."]+(o.length>t?o.slice(0,t):f(o,t)):"",d=l.length-1,h=i[","],c="";0<=d;){if(0===a||d<a)return l.slice(0,d+1)+(c.length?h+c+o:o);c=l.slice(d-a+1,d+1)+(c.length?h+c:""),d-=a,n<s.length&&(a=s[n],n++)}return l.slice(0,d+1)+h+c+o},s=function(e,t,i){var s,a,n,r,l,o;if(!isFinite(e))return e===1/0?i.numberFormat.positiveInfinity:e===-1/0?i.numberFormat.negativeInfinity:i.numberFormat.NaN;if(!t||"i"===t)return i.name.length?e.toLocaleString():e.toString();t=t||"D";var d,h=i.numberFormat,c=Math.abs(e),m=-1;switch(1<t.length&&(m=parseInt(t.slice(1),10)),s=t.charAt(0).toUpperCase()){case"D":d="n",c=_(c),-1!==m&&(c=f(""+c,m,!0)),e<0&&(c="-"+c);break;case"N":a=h;case"C":a=a||h.currency;case"P":a=a||h.percent,d=e<0?a.pattern[0]:a.pattern[1]||"n",-1===m&&(m=a.decimals),c=w(c*("P"===s?100:1),m,a);break;default:throw"Bad number format specifier: "+s}for(n=/n|\$|-|%/g,r="";l=n.lastIndex,o=n.exec(d),r+=d.slice(l,o?o.index:d.length),o;)switch(o[0]){case"n":r+=c;break;case"$":r+=h.currency.symbol;break;case"-":/[1-9]/.test(c)&&(r+=h["-"]);break;case"%":r+=h.percent.symbol}return r},M=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},F=function(e,t){var i,s,a,n;if(t)for(s=e.getTime(),a=0,n=t.length;a<n;a++)if(null===(i=t[a].start)||i<=s)return a;return 0},V=function(e,t,i,s){e=e.getFullYear();return!s&&t.eras&&(e-=t.eras[i].offset),e},P=function(e,t){var i,s;return t<100&&(i=new Date,s=F(i),i=V(i,e,s),(s="string"==typeof(s=e.twoDigitYearMax)?(new Date).getFullYear()%100+parseInt(s,10):s)<(t+=i-i%100))&&(t-=100),t},L=function(e,t,i){var s,a=e.days,n=e._upperDays;return n||(e._upperDays=n=[b(a.names),b(a.namesAbbr),b(a.namesShort)]),t=y(t),i?-1===(s=l(n[1],t))&&(s=l(n[2],t)):s=l(n[0],t),s},R=function(e,t,i){var s=e.months,a=e.monthsGenitive||e.months,n=e._upperMonths,r=e._upperMonthsGen;return n||(e._upperMonths=n=[b(s.names),b(s.namesAbbr)],e._upperMonthsGen=r=[b(a.names),b(a.namesAbbr)]),t=y(t),s=(s=l(i?n[1]:n[0],t))<0?l(i?r[1]:r[0],t):s},H=function(e,t){var i,s,a,n,r,l=e._parseRegExp;if(l){if(r=l[t])return r}else e._parseRegExp=l={};for(var o,d=C(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),h=["^"],c=[],m=0,u=0,p=M();null!==(o=p.exec(d));)if(i=d.slice(m,o.index),m=p.lastIndex,(u+=T(i,h))%2)h.push(o[0]);else{switch(a=(s=o[0]).length,s){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":n="(\\D+)";break;case"tt":case"t":n="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":n="(\\d{"+a+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":n="(\\d\\d?)";break;case"zzz":n="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":n="([+-]?\\d\\d?)";break;case"/":n="(\\/)";break;default:throw"Invalid date format pattern '"+s+"'."}n&&h.push(n),c.push(o[0])}return T(d.slice(m),h),h.push("$"),r=h.join("").replace(/\s+/g,"\\s+"),l[t]={regExp:r,groups:c}},E=function(e,t,i){return e<t||i<e},y=function(e){return e.split("").join(" ").toUpperCase()},b=function(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]=y(e[i]);return t},v=function(e,t,i){e=O(e);var s,a,n,r,l,o,d=i.calendar,i=H(d,t),h=new RegExp(i.regExp).exec(e);if(null===h)return null;for(var c,m=i.groups,u=null,p=null,_=null,f=null,v=null,g=0,y=0,b=0,w=0,k=null,D=!1,x=0,T=m.length;x<T;x++)if(s=h[x+1]){var C=m[x],S=C.length,M=parseInt(s,10);switch(C){case"dd":case"d":if(E(f=M,1,31))return null;break;case"MMM":case"MMMM":if(_=R(d,s,3===S),E(_,0,11))return null;break;case"M":case"MM":if(E(_=M-1,0,11))return null;break;case"y":case"yy":case"yyyy":if(p=S<4?P(d,M):M,E(p,0,9999))return null;break;case"h":case"hh":if(E(g=12===(g=M)?0:g,0,11))return null;break;case"H":case"HH":if(E(g=M,0,23))return null;break;case"m":case"mm":if(E(y=M,0,59))return null;break;case"s":case"ss":if(E(b=M,0,59))return null;break;case"tt":case"t":if((D=d.PM&&(s===d.PM[0]||s===d.PM[1]||s===d.PM[2]))||d.AM&&(s===d.AM[0]||s===d.AM[1]||s===d.AM[2]))break;return null;case"f":case"ff":case"fff":if(w=M*Math.pow(10,3-S),E(w,0,999))return null;break;case"ddd":case"dddd":if(v=L(d,s,3===S),E(v,0,6))return null;break;case"zzz":if(2!==(a=s.split(/:/)).length||(c=parseInt(a[0],10),E(c,-12,13))||(n=parseInt(a[1],10),E(n,0,59)))return null;k=60*c+(I(s,"-")?-n:n);break;case"z":case"zz":if(E(c=M,-12,13))return null;k=60*c;break;case"g":case"gg":if(!(r=s)||!d.eras)return null;for(r=O(r.toLowerCase()),l=0,o=d.eras.length;l<o;l++)if(r===d.eras[l].name.toLowerCase()){u=l;break}if(null===u)return null}}if(t=new Date,i=(e=d.convert)?e.fromGregorian(t)[0]:t.getFullYear(),null===p?p=i:d.eras&&(p+=d.eras[u||0].offset),null===_&&(_=0),null===f&&(f=1),e){if(null===(t=e.toGregorian(p,_,f)))return null}else if(t.setFullYear(p,_,f),t.getDate()!==f||null!==v&&t.getDay()!==v)return null;return D&&g<12&&(g+=12),t.setHours(g,y,b,w),null!==k&&(i=t.getMinutes()-(k+t.getTimezoneOffset()),t.setHours(t.getHours()+parseInt(i/60,10),i%60)),t},g=function(e,t,i){var s,a=t["-"],n=t["+"];switch(i){case"n -":a=" "+a,n=" "+n;case"n-":r(e,a)?s=["-",e.substr(0,e.length-a.length)]:r(e,n)&&(s=["+",e.substr(0,e.length-n.length)]);break;case"- n":a+=" ",n+=" ";case"-n":I(e,a)?s=["-",e.substr(a.length)]:I(e,n)&&(s=["+",e.substr(n.length)]);break;case"(n)":I(e,"(")&&r(e,")")&&(s=["-",e.substr(1,e.length-2)])}return s||["",e]},a.prototype.findClosestCulture=function(e){return a.findClosestCulture.call(this,e)},a.prototype.format=function(e,t,i){return a.format.call(this,e,t,i)},a.prototype.localize=function(e,t){return a.localize.call(this,e,t)},a.prototype.parseInt=function(e,t,i){return a.parseInt.call(this,e,t,i)},a.prototype.parseFloat=function(e,t,i){return a.parseFloat.call(this,e,t,i)},a.prototype.culture=function(e){return a.culture.call(this,e)},a.addCultureInfo=function(e,t,i){var s={},a=!1,s="string"!=typeof e?(i=e,e=this.culture().name,this.cultures[e]):"string"!=typeof t?(i=t,a=null==this.cultures[e],this.cultures[e]||this.cultures.default):(a=!0,this.cultures[t]);this.cultures[e]=c(!0,{},s,i),a&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},a.findClosestCulture=function(e){var t,i,s,a,n,r;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures.default;if("string"==typeof e&&(e=e.split(",")),u(e)){for(var l,o=this.cultures,d=e,h=d.length,c=[],m=0;m<h;m++)s=(e=O(d[m])).split(";"),l=O(s[0]),i=1!==s.length&&0===(e=O(s[1])).indexOf("q=")?(e=e.substr(2),i=parseFloat(e),isNaN(i)?0:i):1,c.push({lang:l,pri:i});for(c.sort(function(e,t){return e.pri<t.pri?1:e.pri>t.pri?-1:0}),m=0;m<h;m++)if(t=o[l=c[m].lang])return t;for(m=0;m<h;m++)for(l=c[m].lang;;){if(-1===(a=l.lastIndexOf("-")))break;if(t=o[l=l.substr(0,a)])return t}for(m=0;m<h;m++)for(n in l=c[m].lang,o)if(r=o[n],r.language==l)return r}else if("object"==typeof e)return e;return t||null},a.format=function(e,t,i){i=this.findClosestCulture(i);return e instanceof Date?e=S(e,t,i):"number"==typeof e&&(e=s(e,t,i)),e},a.localize=function(e,t){return this.findClosestCulture(t).messages[e]||this.cultures.default.messages[e]},a.parseDate=function(e,t,i){var s,a,n,r,l,o;if(i=this.findClosestCulture(i),t){if((t="string"==typeof t?[t]:t).length)for(r=0,l=t.length;r<l&&(!(o=t[r])||!(s=v(e,o,i)));r++);}else for(a in n=i.calendar.patterns)if(s=v(e,n[a],i),s)break;return s||null},a.parseInt=function(e,t,i){return _(a.parseFloat(e,t,i))},a.parseFloat=function(e,t,i){"number"!=typeof t&&(i=t,t=10);var s,a,n,i=this.findClosestCulture(i),r=NaN,l=i.numberFormat;return-1<e.indexOf(i.numberFormat.currency.symbol)&&(e=(e=e.replace(i.numberFormat.currency.symbol,"")).replace(i.numberFormat.currency["."],i.numberFormat["."])),e=O(e),d.test(e)?r=parseFloat(e):!t&&o.test(e)?r=parseInt(e,16):(t=(i=g(e,l,l.pattern[0]))[0],n=i[1],""===t&&"(n)"!==l.pattern[0]&&(t=(i=g(e,l,"(n)"))[0],n=i[1]),""===t&&"-n"!==l.pattern[0]&&(t=(i=g(e,l,"-n"))[0],n=i[1]),t=t||"+",i=(e=(e=n.indexOf("e"))<0?n.indexOf("E"):e)<0?(a=n,null):(a=n.substr(0,e),n.substr(e+1)),n=l["."],a=(e=a.indexOf(n))<0?(s=a,null):(s=a.substr(0,e),a.substr(e+n.length)),e=l[","],s=s.split(e).join(""),n=e.replace(/\u00A0/g," "),t=t+(s=e!==n?s.split(n).join(""):s),null!==a&&(t+="."+a),null!==i&&(t+="e"+((e=g(i,l,"-n"))[0]||"+")+e[1]),h.test(t)&&(r=parseFloat(t))),r},a.culture=function(e){return void 0!==e&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures.default}}(this);var addScheduleDetail="",item="",recurrence="",endType="",endDate="",endAfter="",startDate="",itemRecurrence="",frequency="",scheduleItemJson={},designerInstance="",recurrenceTypeList=($("#StartDate_popup").remove(),$("#EndDate_popup").remove(),$("#popup-container_wrapper").remove(),$("#PopupContainer_overLay").remove(),$("#editpopup-container_wrapper").remove(),""),days="",weeks="",months="",zoneDateTime="",sysTime="",minTime="01:00",designerId="#connectionDesigner",time=new Date;function validateDateTimePicker(){var e=$("#start-date").data("ejDateTimePicker"),e=($("#end-date").data("ejDateTimePicker"),$("#start-date").data("ejDateTimePicker").getValue(),e.model.value),t=($("#end-date").ejDateTimePicker({minDateTime:new Date(e.getFullYear(),e.getMonth(),e.getDate()),value:e}),parseInt($("#hour-difference").val())),i=parseInt($("#minute-difference").val());e.setHours(e.getHours()+t),e.setMinutes(e.getMinutes()+i),"True"==timeFormat?DateCustomFormat(dateFormat+" HH:mm",e,timeFormat):(DateCustomFormat(dateFormat+" hh:mm",e,timeFormat),e.getHours())}function setRecurrenceInterval(e){var t=parseInt(e.attr("aria-valuemin")),i=parseInt(e.attr("aria-valuemax")),e=parseInt(e.val());return isNaN(e)?t:i<e?i:e}function createScheduleMessage(e,t){var i,s=$("#system-time #zone").text();if(""==$("#start-date").val()?(i=t?editScheduleItem.StartDate:s,$("#start-date").ejDateTimePicker({value:new Date(i)})):""==$("#end-date").val()&&(i=t&&"enddate"===endType.toString().toLowerCase()?editScheduleItem.EndDate:s,$("#end-date").ejDateTimePicker({value:new Date(i)})),$("#recurrence-module .change-event").each(function(){isNullOrWhitespace($(this).val())&&$(this).val("1")}),!$("#enable-schedule").prop("checked"))return window.Server.App.Localization.DataRefreshDisabled;var a,n={},r=(n.RecurrenceFactor=setRecurrenceInterval($("#occurence-count")),$("#start-date").val()),l=$("#end-date").val();switch($("#recurrence-type").val().toString().toLowerCase()){case"daily":switch($("#daily-every-x-days").prop("checked")?(n.RecurrenceType="Daily",n.RecurrenceInterval=setRecurrenceInterval($("#every-x-days"))):n.RecurrenceType="DailyWeekDay",$("input[name=end-type]:checked","#schedule-end-type").val().toString()){case"never":addScheduleDetail="Daily"==n.RecurrenceType?1==n.RecurrenceInterval?window.Server.App.Localization.DailyInfo.format(r):window.Server.App.Localization.DailyInfoDay.format(n.RecurrenceInterval.toString(),r):window.Server.App.Localization.DailyInfoWeekDay.format(r);break;case"endafter":addScheduleDetail="Daily"==n.RecurrenceType?1==n.RecurrenceInterval?window.Server.App.Localization.DailyInfoEndAfter.format(r,n.RecurrenceFactor):window.Server.App.Localization.DailyInfoDayEndAfter.format(n.RecurrenceInterval.toString(),r,n.RecurrenceFactor):window.Server.App.Localization.DailyInfoWeekDayEndAfter.format(r,n.RecurrenceFactor);break;case"endBy":addScheduleDetail="Daily"==n.RecurrenceType?1==n.RecurrenceInterval?window.Server.App.Localization.DailyInfoTill.format(r,l):window.Server.App.Localization.DailyInfoDayTill.format(n.RecurrenceInterval.toString(),r,l):window.Server.App.Localization.DailyInfoWeekDayTill.format(r,l)}break;case"weekly":n.RecurrenceType="Weekly",n.RecurrenceInterval=setRecurrenceInterval($("#every-x-weeks")),n.Sunday=$("#sun").prop("checked"),n.Monday=$("#mon").prop("checked"),n.Tuesday=$("#tues").prop("checked"),n.Wednesday=$("#wed").prop("checked"),n.Thursday=$("#thu").prop("checked"),n.Friday=$("#fri").prop("checked"),n.Saturday=$("#sat").prop("checked");for(var o="",d="",h=$(".daygroup:checked"),c=0;c<h.length;c++)1==h.length||0==c?o=$(h[c]).parent().text().trim():0<c&&c!=h.length-1?o=o+", "+$(h[c]).parent().text().trim():d=$(h[c]).parent().text().trim();switch($("input[name=end-type]:checked","#schedule-end-type").val().toString()){case"never":addScheduleDetail=0==h.length?window.Server.App.Localization.WeeklyInfoWeeks.format(n.RecurrenceInterval.toString(),r):1==h.length?window.Server.App.Localization.WeeklyInfoWeeksDay.format(n.RecurrenceInterval.toString(),o,r):window.Server.App.Localization.WeeklyInfoWeeksDays.format(n.RecurrenceInterval.toString(),o,d,r);break;case"endafter":addScheduleDetail=0==h.length?window.Server.App.Localization.WeeklyInfoWeeksEndAfter.format(n.RecurrenceInterval.toString(),r,n.RecurrenceFactor):1==h.length?window.Server.App.Localization.WeeklyInfoWeeksDayEndAfter.format(n.RecurrenceInterval.toString(),o,r,n.RecurrenceFactor):window.Server.App.Localization.WeeklyInfoWeeksDaysEndAfter.format(n.RecurrenceInterval.toString(),o,d,r,n.RecurrenceFactor);break;case"endBy":addScheduleDetail=0==h.length?window.Server.App.Localization.WeeklyInfoWeeksTill.format(n.RecurrenceInterval.toString(),r,l):1==h.length?window.Server.App.Localization.WeeklyInfoWeeksDayTill.format(n.RecurrenceInterval.toString(),o,r,l):window.Server.App.Localization.WeeklyInfoWeeksDaysTill.format(n.RecurrenceInterval.toString(),o,d,r,l)}break;case"monthly":switch(a=$("#monthly").prop("checked")?(n.RecurrenceType="Monthly",n.DaysOfMonth=setRecurrenceInterval($("#monthly-date")),$("#monthly-every-x-months")):(n.RecurrenceType="MonthlyDOW",n.WeekOfMonth=$("#monthly-dow-week").find("option:selected").text(),n.DayOfWeek=$("#monthly-dow-day").find("option:selected").text(),$("#monthly-dow-every-x-months")),n.RecurrenceInterval=setRecurrenceInterval(a),$("input[name=end-type]:checked","#schedule-end-type").val().toString()){case"never":addScheduleDetail=$("#monthly").prop("checked")?window.Server.App.Localization.MonthlyInfo.format(n.DaysOfMonth.toString(),n.RecurrenceInterval.toString(),r):window.Server.App.Localization.MonthlyInfoDOW.format(n.WeekOfMonth.toString(),$("#monthly-dow-day").find("option:selected").text(),n.RecurrenceInterval.toString(),r);break;case"endafter":addScheduleDetail=$("#monthly").prop("checked")?window.Server.App.Localization.MonthlyInfoEndAfter.format(n.DaysOfMonth.toString(),n.RecurrenceInterval.toString(),r,n.RecurrenceFactor):window.Server.App.Localization.MonthlyInfoDOWEndAfter.format(n.WeekOfMonth.toString(),$("#monthly-dow-day").find("option:selected").text(),n.RecurrenceInterval.toString(),r,n.RecurrenceFactor);break;case"endBy":addScheduleDetail=$("#monthly").prop("checked")?window.Server.App.Localization.MonthlyInfoTill.format(n.DaysOfMonth.toString(),n.RecurrenceInterval.toString(),r,l):window.Server.App.Localization.MonthlyInfoDOWTill.format(n.WeekOfMonth.toString(),$("#monthly-dow-day").find("option:selected").text(),n.RecurrenceInterval.toString(),r,l)}break;case"yearly":switch(n.RecurrenceInterval=$("#every-x-years").val(),$("#yearly").prop("checked")?(n.RecurrenceType="Yearly",n.DaysOfMonth=$("#yearly-day").val(),n.MonthOfYear=$("#yearly-month").find("option:selected").text()):(n.RecurrenceType="YearlyDOW",n.WeekOfMonth=$("#yearly-dow-week").find("option:selected").text(),n.DayOfWeek=$("#yearly-dow-day").find("option:selected").text(),n.MonthOfYear=$("#yearly-dow-month").find("option:selected").text()),$("input[name=end-type]:checked","#schedule-end-type").val().toString()){case"never":addScheduleDetail=$("#yearly").prop("checked")?1==n.RecurrenceInterval?window.Server.App.Localization.YearlyInfo.format(n.MonthOfYear.toString(),n.DaysOfMonth.toString(),r):window.Server.App.Localization.YearlyInfos.format(n.RecurrenceInterval.toString(),n.MonthOfYear.toString(),n.DaysOfMonth.toString(),r):1==n.RecurrenceInterval?window.Server.App.Localization.YearlyInfoDOW.format(n.WeekOfMonth.toString(),$("#yearly-dow-day option:selected").text(),n.MonthOfYear.toString(),r):window.Server.App.Localization.YearlyInfosDOW.format(n.RecurrenceInterval.toString(),n.WeekOfMonth.toString(),$("#yearly-dow-day option:selected").text(),n.MonthOfYear.toString(),r);break;case"endafter":addScheduleDetail=$("#yearly").prop("checked")?1==n.RecurrenceInterval?window.Server.App.Localization.YearlyInfoEndAfter.format(n.MonthOfYear.toString(),n.DaysOfMonth.toString(),r,n.RecurrenceFactor):window.Server.App.Localization.YearlyInfosEndAfter.format(n.RecurrenceInterval.toString(),n.MonthOfYear.toString(),n.DaysOfMonth.toString(),r,n.RecurrenceFactor):1==n.RecurrenceInterval?window.Server.App.Localization.YearlyInfoDOWEndAfter.format(n.WeekOfMonth.toString(),$("#yearly-dow-day option:selected").text(),n.MonthOfYear.toString(),r,n.RecurrenceFactor):window.Server.App.Localization.YearlyInfosDOWEndAfter.format(n.RecurrenceInterval.toString(),n.WeekOfMonth.toString(),$("#yearly-dow-day option:selected").text(),n.MonthOfYear.toString(),r,n.RecurrenceFactor);break;case"endBy":addScheduleDetail=$("#yearly").prop("checked")?1==n.RecurrenceInterval?window.Server.App.Localization.YearlyInfoTill.format(n.MonthOfYear.toString(),n.DaysOfMonth.toString(),r,l):window.Server.App.Localization.YearlyInfosTill.format(n.RecurrenceInterval.toString(),n.MonthOfYear.toString(),n.DaysOfMonth.toString(),r,l):1==n.RecurrenceInterval?window.Server.App.Localization.YearlyInfoDOWTill.format(n.WeekOfMonth.toString(),$("#yearly-dow-day option:selected").text(),n.MonthOfYear.toString(),r,l):window.Server.App.Localization.YearlyInfosDOWTill.format(n.RecurrenceInterval.toString(),n.WeekOfMonth.toString(),$("#yearly-dow-day option:selected").text(),n.MonthOfYear.toString(),r,l)}break;case"hourly":n.RecurrenceType="Hourly",n.Frequency=$(".time-width").val(),n.RecurrenceInterval=$("#every-x-hours-value").val();var m=n.Frequency.split(":");switch(5<=m[0]+m[1]?($(".frequency-error").css("display","none"),$(".time-width").parent("span").removeClass("validation-error"),$("#end-date-validator").css("display","none")):($(".frequency-error").css("display","inline"),n.Frequency="00:05",n.RecurrenceInterval="00:05",m=n.Frequency.split(":")),$("input[name=end-type]:checked","#schedule-end-type").val().toString()){case"never":addScheduleDetail=0<parseInt(m[0])&&0<parseInt(m[1])?window.Server.App.Localization.HourlyInfoHourMinutes.format(m[0],m[1],r):0<parseInt(m[0])?window.Server.App.Localization.HourlyInfoHours.format(m[0],r):window.Server.App.Localization.HourlyInfoMinutes.format(m[1],r);break;case"endafter":addScheduleDetail=0<parseInt(m[0])&&0<parseInt(m[1])?window.Server.App.Localization.HourlyInfoHourMinutesEndAfter.format(m[0],m[1],r,n.RecurrenceFactor):0<parseInt(m[0])?window.Server.App.Localization.HourlyInfoHoursEndAfter.format(m[0],r,n.RecurrenceFactor):window.Server.App.Localization.HourlyInfoMinutesEndAfter.format(m[1],r,n.RecurrenceFactor);break;case"endBy":addScheduleDetail=0<parseInt(m[0])&&0<parseInt(m[1])?window.Server.App.Localization.HourlyInfoHourMinutesTill.format(m[0],m[1],r,l):0<parseInt(m[0])?window.Server.App.Localization.HourlyInfoHoursTill.format(m[0],r,l):window.Server.App.Localization.HourlyInfoMinutesTill.format(m[1],r,l)}}return $("#recurrence-module").css("display","block"),addScheduleDetail}function validateSchedule(e){var t=$("#start-date").data("ejDateTimePicker");switch($("#recurrence-type").val().toString().toLowerCase()){case"daily":break;case"weekly":if(!$('#days-check-box input[type="checkbox"]').is(":checked"))return $("#weekly-day-error-container").css("display","block"),$("#weekly-days-validator").html(window.Server.App.Localization.WeekDaysValidator),!1;$("#weekly-day-error-container").css("display","none");break;case"monthly":break;case"yearly":var i=$("#yearly-month").val().toString(),s=parseInt($("#yearly-day").val()),a=$("#yearly-day").data("ejNumericTextbox");switch(i.toLowerCase()){case"february":28<s&&a.option("value",28);break;case"april":case"june":case"september":case"november":30<s&&a.option("value",30);break;case"january":case"march":case"may":case"july":case"august":case"october":case"december":31<s&&a.option("value",31)}break;case"hourly":if(""==$(".time-width").val())return $(".frequency-error").css("display","inline"),$(".time-width").parent("span").addClass("validation-error"),!1;i=$(".time-width").val().split(":");if(!(3<60*i[0]+i[1]))return $(".frequency-error").css("display","inline"),$(".time-width").parent("span").addClass("validation-error"),!1;$(".frequency-error").css("display","none"),$(".time-width").parent("span").removeClass("validation-error")}if("M/d/yyyy h:mm:ss tt"==!t.model.dateTimeFormat)return $("#start-date-error-container").css("display","block"),$("#start-date-validator").html(window.Server.App.Localization.ScheduleValidator),!1;if($("#start-date-error-container").css("display","none"),"endby"===$("input[name=end-type]:checked","#schedule-end-type").val().toLowerCase()){if("M/d/yyyy h:mm:ss tt"==!$("#end-date").data("ejDateTimePicker").model.dateTimeFormat)return $("#end-date-error-container").css("display","block"),$("#end-date-validator").html(window.Server.App.Localization.ScheduleValidator),!1;$("#end-date-error-container").css("display","none")}return!0}function DateTimeParser(e){var t;return null==e?"":null!=(t=/Date\(([^)]+)\)/.exec(e))?new Date(parseInt(t[1])):e}function FormJsonString(){switch(scheduleItemJson.StartDate=$("#start-date").val(),scheduleItemJson.ItemId=createdItemId,scheduleItemJson.ItemName=itemName,scheduleItemJson.ScheduleId=editScheduleItem.ScheduleId,scheduleItemJson.TimeZone=timeZone,scheduleItemJson.DateTimeFormat=dateFormat+("True"===timeFormat?" HH:mm:ss":" hh:mm:ss tt"),$("#recurrence-type").val().toString().toLowerCase()){case"daily":$("#daily-every-x-days").prop("checked")?(scheduleItemJson.RecurrenceType="Daily",scheduleItemJson.RecurrenceInterval=$("#every-x-days").val()):scheduleItemJson.RecurrenceType="DailyWeekDay";break;case"weekly":scheduleItemJson.RecurrenceType="Weekly",scheduleItemJson.RecurrenceInterval=$("#every-x-weeks").val(),scheduleItemJson.Sunday=$("#sun").prop("checked"),scheduleItemJson.Monday=$("#mon").prop("checked"),scheduleItemJson.Tuesday=$("#tues").prop("checked"),scheduleItemJson.Wednesday=$("#wed").prop("checked"),scheduleItemJson.Thursday=$("#thu").prop("checked"),scheduleItemJson.Friday=$("#fri").prop("checked"),scheduleItemJson.Saturday=$("#sat").prop("checked");break;case"monthly":$("#monthly").prop("checked")?(scheduleItemJson.RecurrenceType="Monthly",scheduleItemJson.DaysOfMonth=$("#monthly-date").val(),scheduleItemJson.RecurrenceInterval=$("#monthly-every-x-months").val()):(scheduleItemJson.RecurrenceType="MonthlyDOW",scheduleItemJson.WeekOfMonth=$("#monthly-dow-week").find("option:selected").text(),scheduleItemJson.DayOfWeek=$("#monthly-dow-day").find("option:selected").text(),scheduleItemJson.RecurrenceInterval=$("#monthly-dow-every-x-months").val());break;case"yearly":scheduleItemJson.RecurrenceInterval=$("#every-x-years").val(),$("#yearly").prop("checked")?(scheduleItemJson.RecurrenceType="Yearly",scheduleItemJson.DaysOfMonth=$("#yearly-day").val(),scheduleItemJson.MonthOfYear=$("#yearly-month").find("option:selected").text()):(scheduleItemJson.RecurrenceType="YearlyDOW",scheduleItemJson.WeekOfMonth=$("#yearly-dow-week").find("option:selected").text(),scheduleItemJson.DayOfWeek=$("#yearly-dow-day").find("option:selected").text(),scheduleItemJson.MonthOfYear=$("#yearly-dow-month").find("option:selected").text());break;case"hourly":scheduleItemJson.RecurrenceType="Hourly",scheduleItemJson.Frequency=$(".time-width").val(),scheduleItemJson.RecurrenceInterval=$("#every-x-hours-value").val()}switch(scheduleItemJson.IsEnabled=$("#enable-schedule").prop("checked"),scheduleItemJson.FailureNotificationToOwner=$("#enable-notification-to-owner").prop("checked"),scheduleItemJson.FailureOccurrence=itemRecurrence.FailureOccurrence,$("input[name=end-type]:checked","#schedule-end-type").val().toString()){case"never":scheduleItemJson.ScheduleEndType="NoEnd";break;case"endafter":scheduleItemJson.ScheduleEndType="EndAfter",scheduleItemJson.RecurrenceFactor=$("#occurence-count").val();break;case"endBy":scheduleItemJson.ScheduleEndType="EndBy",scheduleItemJson.EndDate=$("#end-date").val()}return scheduleItemJson}function validateNextSchedule(){$.ajax({type:"POST",url:getNextScheduleUrl,async:!1,data:{scheduleList:JSON.stringify({ScheduleItem:scheduleItemJson,IsDataSourceschedule:!0})},beforeSend:function(e){isServer&&parent.showDataSourceLoaderIcon();var t=document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN=")).split("=")[1];e.setRequestHeader("X-XSRF-TOKEN",t)},success:function(e){!$("#enable-schedule").prop("checked")||void 0!==e&&""!==e?($("#end-date-validator").css("display","none"),isServer?$.ajax({type:"POST",url:updateScheduleInfoUrl,async:!1,data:{scheduleList:JSON.stringify({ScheduleItem:scheduleItemJson})},success:function(e){parent.resultRefreshDataSourceDialog(e.Data,e.IsEnabled)}}):(designerInstance=parent.$(designerId).data("BoldBIDashboardDesigner")).onScheduleSubmitClick({Status:!0,Data:scheduleItemJson,ScheduleMessage:$("#schedule-message").text()}),$("#recurrence-module").hide()):(isServer&&parent.hideDataSourceLoaderIcon(),$("#end-date-validator").html(window.Server.App.Localization.InvalidEndDate).css("display","inline"))}})}function addTitleForRecurrenceType(){$("#recurrence-type").selectpicker("refresh"),$("#recurrence-type-container").find(".dropdown-menu").addClass("dropdown-height");for(var e=0;e<$("#recurrence-type-container .btn-group .dropdown-menu .selectpicker li").length;e++){var t=$("#recurrence-type-container .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("#recurrence-type-container .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}$("#monthly-dow-week").selectpicker("refresh");for(e=0;e<$("#monthly-dow-week-container .btn-group .dropdown-menu .selectpicker li").length;e++){t=$("#monthly-dow-week-container .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("#monthly-dow-week-container .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}$("#monthly-dow-day").selectpicker("refresh"),$("#monthly-dow-day-container").find(".dropdown-menu").addClass("day-dropdown-width");for(e=0;e<$("#monthly-dow-day-container .btn-group .dropdown-menu .selectpicker li").length;e++){t=$("#monthly-dow-day-container .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("#monthly-dow-day-container .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}$("#yearly-dow-week").selectpicker("refresh");for(e=0;e<$("#yearly-dow-week-container .btn-group .dropdown-menu .selectpicker li").length;e++){t=$("#yearly-dow-week-container .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("yearly-dow-week-container .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}$("#yearly-dow-day").selectpicker("refresh"),$("#yearly-dow-day-container").find(".dropdown-menu").addClass("day-dropdown-width");for(e=0;e<$("#yearly-dow-day-container .btn-group .dropdown-menu .selectpicker li").length;e++){t=$("#yearly-dow-day-container .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("#yearly-dow-day-container .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}$("#yearly-dow-month").selectpicker("refresh"),$("#yearly-dow-month-ccontainer").find(".dropdown-menu").addClass("day-dropdown-width");for(e=0;e<$("#yearly-dow-month-ccontainer .btn-group .dropdown-menu .selectpicker li").length;e++){t=$("#yearly-dow-month-ccontainer .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("#yearly-dow-month-ccontainer .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}$("#yearly-month").selectpicker("refresh"),$("#yearly-month").next("div").find(".dropdown-menu").addClass("day-dropdown-width");for(e=0;e<$("#yearly-schedule-option .btn-group .dropdown-menu .selectpicker li").length;e++){t=$("#yearly-schedule-option .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("#yearly-schedule-option .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}}"True"==timeFormat?sysTime=DateCustomFormat(dateFormat+" HH:mm",time,timeFormat):(sysTime=DateCustomFormat(dateFormat+" hh:mm",time,timeFormat),sysTime+=12<=time.getHours()?" PM":" AM"),""!=editScheduleItem&&(recurrence=editScheduleItem.RecurrenceType,endType=editScheduleItem.EndType,endDate=editScheduleItem.EndDateString,endAfter=editScheduleItem.EndAfter,startDate=editScheduleItem.StartDateString,createdItemId=editScheduleItem.ItemId,itemName=editScheduleItem.ItemName,itemRecurrence=editScheduleItem.Recurrence,"hourly"==recurrence.toLowerCase()&&(frequency=itemRecurrence.HourlySchedule.MinutesInterval),editScheduleItem.IsEnabled||$("#enable-schedule").prop("checked",""),itemRecurrence.FailureNotificationToOwner)&&$("#enable-notification-to-owner").prop("checked",!0),$.ajax({type:"POST",data:{date:sysTime},url:getRecurrenceTypeUrl,async:!1,success:function(e){ShowWaitingProgress(".share-popup-header","hide"),null!=e.RecurrenceType&&0<e.RecurrenceType.length&&(e.RefreshDataInterval.EnableHourly&&(recurrenceTypeList="<option value= "+e.RecurrenceType[4]+">"+window.Server.App.Localization.Hourly+"</option>"),e.RefreshDataInterval.EnableDaily&&(recurrenceTypeList+="<option value= "+e.RecurrenceType[0]+">"+window.Server.App.Localization.Daily+"</option>"),e.RefreshDataInterval.EnableWeekly&&(recurrenceTypeList+="<option value= "+e.RecurrenceType[1]+">"+window.Server.App.Localization.Weekly+"</option>"),e.RefreshDataInterval.EnableMonthly&&(recurrenceTypeList+="<option value= "+e.RecurrenceType[2]+">"+window.Server.App.Localization.Monthly+"</option>"),e.RefreshDataInterval.EnableYearly)&&(e.RecurrenceType[3],window.Server.App.Localization.Yearly);for(var t=0;t<e.Days.length;t++)"weekendday"!=e.Days[t].toString().toLowerCase()&&"day"!=e.Days[t].toString().toLowerCase()&&"weekday"!=e.Days[t].toString().toLowerCase()||("weekendday"==e.Days[t].toString().toLowerCase()?days+="<option value= "+e.Days[t]+">"+window.Server.App.Localization.WeekEndDay+"</option>":("weekday"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.Localization.WeekDay+"</option>"),"day"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.Localization.Day+"</option>")));for(t=0;t<e.Days.length;t++)"weekendday"!=e.Days[t].toString().toLowerCase()&&"day"!=e.Days[t].toString().toLowerCase()&&"weekday"!=e.Days[t].toString().toLowerCase()&&("sunday"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.Localization.Sunday+"</option>"),"monday"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.Localization.Monday+"</option>"),"tuesday"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.Localization.Tuesday+"</option>"),"wednesday"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.Localization.Wednesday+"</option>"),"thursday"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.Localization.Thursday+"</option>"),"friday"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.Localization.Friday+"</option>"),"saturday"==e.Days[t].toString().toLowerCase())&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.Localization.Saturday+"</option>");weeks="<option value= "+e.Weeks[0]+">"+window.Server.App.Localization.First+"</option><option value= "+e.Weeks[1]+">"+window.Server.App.Localization.Second+"</option><option value= "+e.Weeks[2]+">"+window.Server.App.Localization.Third+"</option><option value= "+e.Weeks[3]+">"+window.Server.App.Localization.Fourth+"</option><option value= "+e.Weeks[4]+">"+window.Server.App.Localization.Last+"</option>",months="<option value= "+e.Months[0]+">"+window.Server.App.Localization.January+"</option><option value= "+e.Months[1]+">"+window.Server.App.Localization.February+"</option><option value= "+e.Months[2]+">"+window.Server.App.Localization.March+"</option><option value= "+e.Months[3]+">"+window.Server.App.Localization.April+"</option><option value= "+e.Months[4]+">"+window.Server.App.Localization.May+"</option><option value= "+e.Months[5]+">"+window.Server.App.Localization.June+"</option><option value= "+e.Months[6]+">"+window.Server.App.Localization.July+"</option><option value= "+e.Months[7]+">"+window.Server.App.Localization.August+"</option><option value= "+e.Months[8]+">"+window.Server.App.Localization.September+"</option><option value= "+e.Months[9]+">"+window.Server.App.Localization.October+"</option><option value= "+e.Months[10]+">"+window.Server.App.Localization.November+"</option><option value= "+e.Months[11]+">"+window.Server.App.Localization.December+"</option>";var i,s=e.TimeZoneDateTime.toString(),s=new Date(s),a="MM/dd/yyyy";"True"==timeFormat?i=DateCustomFormat(a+" HH:mm",s,timeFormat):(i=DateCustomFormat(a+" hh:mm",s,timeFormat),i+=12<=s.getHours()?" PM":" AM"),zoneDateTime=i,minTime=e.RefreshDataInterval.MinimumTime,""!=timezone?$("#zone").html(sysTime):$("#zone").html(clientTimeZone),$("#hour-difference").val(e.HourDifference),$("#minute-difference").val(e.MinuteDifference)}}),$("#recurrence-type").append(recurrenceTypeList),$("#monthly-dow-week").append(weeks),$("#monthly-dow-day").append(days),$("#yearly-month").append(months),$("#yearly-dow-week").append(weeks),$("#yearly-dow-day").append(days),$("#yearly-dow-month").append(months),$("#popup-container_wrapper").ejWaitingPopup("hide"),$("#daily-every-x-days").prop("checked",!0),$("#monthly").prop("checked",!0),$("#yearly").prop("checked",!0),$("#every-x-days, #monthly-date, #yearly-day").ejNumericTextbox({name:"numeric",value:1,minValue:1,maxValue:31,width:"65px",height:"32px",incrementStep:1}),$("#every-x-weeks, #every-x-years").ejNumericTextbox({name:"numeric",value:1,minValue:1,maxValue:99,width:"65px",height:"32px",incrementStep:1}),$("#occurence-count").ejNumericTextbox({name:"numeric",value:1,minValue:1,maxValue:999,width:"65px",height:"32px",incrementStep:1}),$("#monthly-dow-every-x-months, #monthly-every-x-months").ejNumericTextbox({name:"numeric",value:1,minValue:1,maxValue:12,width:"65px",height:"32px",incrementStep:1}),Globalize.addCultureInfo("en-US","default",{name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",language:"en",calendars:{standard:{"/":".",firstDay:1,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]}}}}),dateFormat=isEmptyOrWhitespace(clientDateFormat)?dateFormat:clientDateFormat,"True"==timeFormat?($("#start-date").ejDateTimePicker({dateTimeFormat:dateFormat+" HH:mm:ss",timeDisplayFormat:" HH:mm:ss"}),$("#end-date").ejDateTimePicker({dateTimeFormat:dateFormat+" HH:mm:ss",timeDisplayFormat:" HH:mm:ss"})):($("#start-date").ejDateTimePicker({dateTimeFormat:dateFormat+" hh:mm:ss tt",timeDisplayFormat:" hh:mm:ss tt"}),$("#end-date").ejDateTimePicker({dateTimeFormat:dateFormat+" hh:mm:ss tt",timeDisplayFormat:" hh:mm:ss tt"})),$("#start-date").ejDateTimePicker({interval:10,value:new Date(zoneDateTime),change:validateDateTimePicker,enableStrictMode:!1,locale:"en-US",timePopupWidth:108,buttonText:{today:window.Server.App.Localization.Today,timeNow:window.Server.App.Localization.Now,done:window.Server.App.Localization.Done,timeTitle:window.Server.App.Localization.Time},change:function(e){var t=createScheduleMessage(!1,!1);$("#schedule-message").text(t)}}),$("#end-date").ejDateTimePicker({interval:10,value:new Date(zoneDateTime),enableStrictMode:!1,locale:"en-US",timePopupWidth:108,buttonText:{today:window.Server.App.Localization.Today,timeNow:window.Server.App.Localization.Now,done:window.Server.App.Localization.Done,timeTitle:window.Server.App.Localization.Time},change:function(e){var t=createScheduleMessage(!1,!1);$("#schedule-message").text(t)}}),$("#start-date,#end-date").css({cursor:"default"}),$("#enable-schedule").on("click",function(){var e;$("#enable-schedule").prop("checked")?(e=createScheduleMessage(!1,!1),$("#schedule-message").text(e)):$("#schedule-message").text(window.Server.App.Localization.DataRefreshDisabled)}),$(document).on("focusout","#start-date, #end-date",function(){var e;""!=$("#start-date").val()&&""!=$("#end-date").val()||(e="edit"==actionType.toLowerCase()?createScheduleMessage(!1,!0):createScheduleMessage(!1,!1),$("#schedule-message").text(e))}),$(document).on("change","#schedule-end-type",function(){switch($("input[name=end-type]:checked","#schedule-end-type").val().toString()){case"never":case"endafter":$("#end-date-validator").css("display","none")}}),$(document).on("change","#recurrence-type",function(){var e=$(this).find("option:selected").val();switch($("#daily-schedule-option, #weekly-schedule-option, #monthly-schedule-option, #yearly-schedule-option,#frequency").css("display","none"),e.toString().toLowerCase()){case"daily":$("#daily-schedule-option").css("display","block"),$("#no-view-start,#no-view-end,#time-zone").css("display","inline");break;case"weekly":$("#weekly-schedule-option").css("display","block"),$("#no-view-start,#no-view-end,#time-zone").css("display","inline");break;case"monthly":$("#monthly-schedule-option").css("display","block"),$("#no-view-start,#no-view-end,#time-zone").css("display","inline");break;case"yearly":$("#yearly-schedule-option").css("display","block"),$("#no-view-start,#no-view-end,#time-zone").css("display","inline");break;case"hourly":$("#frequency").css("display","block"),$("#no-view-start,#no-view-end,#time-zone").css("display","inline")}e=createScheduleMessage(!1,!1);$("#schedule-message").text(e)}),$(document).on("click",".css-radio",function(){$(this).siblings("label").removeClass("notransition")}),$(document).on("keyup","#every-x-hours-value",function(e){var t;""!=$(".time-width").val()&&5<=(t=$(".time-width").val().split(":"))[0]+t[1]?($(".frequency-error").css("display","none"),$(".time-width").parent("span").removeClass("validation-error")):($(".frequency-error").css("display","inline"),$(".time-width").parent("span").addClass("validation-error"))}),$(document).on("focusout","#every-x-hours-value",function(e){""==$(".time-width").val()?($(".frequency-error").css("display","inline"),$(".time-width").parent("span").addClass("validation-error")):($(".frequency-error").css("display","none"),$(".time-width").parent("span").removeClass("validation-error"))}),$(document).on("click","#schedule-submit",function(e){FormJsonString(),$("#enable-schedule").prop("checked")&&!validateSchedule(this)||validateNextSchedule()}),$(document).on("click","#schedule-submit-cancel",function(e){isServer?($("#recurrence-module").hide(),parent.closeRefreshDataSourceDialog()):($("#recurrence-module").hide(),(designerInstance=parent.$(designerId).data("BoldBIDashboardDesigner")).onScheduleCancelClick({Status:!0}))}),$(document).on("click","#refresh-schedule-close-icon",function(e){isServer?($("#recurrence-module").hide(),parent.closeRefreshDataSourceDialog()):($("#recurrence-module").hide(),(designerInstance=parent.$(designerId).data("BoldBIDashboardDesigner")).onScheduleCancelClick({Status:!0}))}),$(document).on("change",".change-event, input[type=radio][name=daily-recurrence-type], input[type=radio][name=end-type], input[type=radio][name=monthly], input[type=radio][name=yearly]",function(){var e=createScheduleMessage(!1,!1);$("#schedule-message").text(e)}),$(document).ready(function(){if($(".schedule-dialog #time-intervals-div").css("display","inline"),$("#recurrence-type").trigger("change"),$(".time-width").ejTimePicker({timeFormat:"HH:mm",minutesInterval:5,minTime:minTime,change:function(e){var t=createScheduleMessage(!1,!1);$("#schedule-message").text(t)}}),"create"==actionType.toLowerCase())scheduleMessage=createScheduleMessage(!1,!1),$("#schedule-message").text(scheduleMessage);else{switch($("#frequency").css("display","none"),recurrence.toLowerCase()){case"hourly":recurrenceType="Hourly",$("#frequency").css("display","block"),$("#hourly-schedule-option").css("display","block");var e=frequency%60<10?"0"+frequency%60:frequency%60,t=parseInt(frequency/60)<10?"0"+parseInt(frequency/60):parseInt(frequency/60);conversionToMinutes=t+":"+e,$("#frequency").find("input").val(conversionToMinutes);break;case"daily":recurrence="Daily",$("#daily-schedule-option").css("display","block"),$("#daily-every-x-days").prop("checked",!0),$("#every-x-days").data("ejNumericTextbox").option("value",itemRecurrence.DailySchedule.DaysInterval);break;case"dailyweekday":recurrence="Daily",$("#daily-schedule-option").css("display","block"),$("#daily-weekdays").prop("checked",!0);break;case"weekly":recurrence="Weekly",$("#weekly-schedule-option").css("display","block"),$("#every-x-weeks").data("ejNumericTextbox").option("value",itemRecurrence.WeeklySchedule.WeeksInterval),$("#sun").prop("checked",itemRecurrence.WeeklySchedule.DaysOfWeek.Sunday),$("#mon").prop("checked",itemRecurrence.WeeklySchedule.DaysOfWeek.Monday),$("#tues").prop("checked",itemRecurrence.WeeklySchedule.DaysOfWeek.Tuesday),$("#wed").prop("checked",itemRecurrence.WeeklySchedule.DaysOfWeek.Wednesday),$("#thu").prop("checked",itemRecurrence.WeeklySchedule.DaysOfWeek.Thursday),$("#fri").prop("checked",itemRecurrence.WeeklySchedule.DaysOfWeek.Friday),$("#sat").prop("checked",itemRecurrence.WeeklySchedule.DaysOfWeek.Saturday);break;case"monthly":recurrence="Monthly",$("#monthly-schedule-option").css("display","block"),$("#monthly").prop("checked",!0),$("#monthly-date").data("ejNumericTextbox").option("value",itemRecurrence.MonthlySchedule.DayOfMonth),$("#monthly-every-x-months").data("ejNumericTextbox").option("value",itemRecurrence.MonthlySchedule.Months);break;case"monthlydow":recurrence="Monthly",$("#monthly-schedule-option").css("display","block"),$("#monthly-dow").prop("checked",!0),$("#monthly-dow-week option[value='"+itemRecurrence.MonthlyDowSchedule.WeeksOfTheMonth+"']").attr("selected",!0),$("#monthly-dow-week").selectpicker("refresh"),$("#monthly-dow-day option[value='"+itemRecurrence.MonthlyDowSchedule.DaysOfTheWeek+"']").attr("selected",!0),$("#monthly-dow-day").selectpicker("refresh"),$("#monthly-dow-every-x-months").data("ejNumericTextbox").option("value",itemRecurrence.MonthlyDowSchedule.Months);break;case"yearly":recurrence="Yearly",$("#yearly-schedule-option").css("display","block"),$("#yearly").prop("checked",!0),$("#every-x-years").data("ejNumericTextbox").option("value",itemRecurrence.YearlySchedule.YearsInterval),$("#yearly-month option[value='"+itemRecurrence.YearlySchedule.MonthsOfTheYear+"']").attr("selected",!0),$("#yearly-month").selectpicker("refresh"),$("#yearly-day").data("ejNumericTextbox").option("value",itemRecurrence.YearlySchedule.DayOfMonth);break;case"yearlydow":recurrence="Yearly",$("#yearly-schedule-option").css("display","block"),$("#yearly-dow").prop("checked",!0),$("#every-x-years").data("ejNumericTextbox").option("value",itemRecurrence.YearlyDowSchedule.YearsInterval),$("#yearly-dow-week option[value='"+itemRecurrence.YearlyDowSchedule.WeeksOfTheMonth+"']").attr("selected",!0),$("#yearly-dow-week").selectpicker("refresh"),$("#yearly-dow-day option[value='"+itemRecurrence.YearlyDowSchedule.DaysOfTheWeek+"']").attr("selected",!0),$("#yearly-dow-day").selectpicker("refresh"),$("#yearly-dow-month option[value='"+itemRecurrence.YearlyDowSchedule.MonthsOfTheYear+"']").attr("selected",!0),$("#yearly-dow-month").selectpicker("refresh")}switch($("#enable-sunday,#enable-monday,#enable-tuesday,#enable-wednesday,#enable-thursday,#enable-friday,#enable-saturday").on("click",function(){isSafari&&$(this).find("label").toggleClass("check")}),$("#recurrence-type option[value='"+recurrence+"']").attr("selected",!0),$("#recurrence-type").selectpicker("refresh"),"edit"==actionType.toLowerCase()&&(startDate=editScheduleItem.StartDate),$("#start-date").ejDateTimePicker({value:new Date(startDate)}),endType.toString().toLowerCase()){case"noenddate":$("#no-end-date").prop("checked",!0);$("#start-date").data("ejDateTimePicker").model.value;break;case"enddate":"edit"==actionType.toLowerCase()&&(endDate=editScheduleItem.EndDate),$("#endBy").prop("checked",!0),$("#end-date").ejDateTimePicker({value:new Date(endDate)});break;case"endafter":$("#end-after").prop("checked",!0),$("#occurence-count").data("ejNumericTextbox").option("value",endAfter)}"edit"==actionType.toLowerCase()&&(scheduleMessage=createScheduleMessage(!1,!0),$("#schedule-message").text(scheduleMessage))}addTitleForRecurrenceType(),$("#recurrence-module").show(),designerId="#"+parent.$(parent.$(".e-dashboarddesigner")[0]).attr("id"),isServer?parent.hideDataSourceLoaderIcon():(designerInstance=parent.$(designerId).data("BoldBIDashboardDesigner")).onScheduleDialogRenderingComplete({Status:!0})});