var experience,subject,postmd;function renderMde(e){return new EasyMDE({element:$(e)[0],status:!1,spellChecker:!1,autoDownloadFontAwesome:!1,toolbar:!1,previewRender:function(e){return customMarkdownParser(e)},minHeight:"130px"})}function setSendFeedbackCookie(e){postmd.value("");subject=experience="",$(".sub-button").removeClass("button-bg-change"),$(".smiley-change").removeClass("smiley-select"),$("#general-feedback-popup").addClass("display-none"),$.ajax({type:"POST",url:feedbackCookieUrl,data:{cookieType:e}})}function openFeedbackWindow(){var e="undefined"!=typeof BoldBIDashboard?"BoldBIDashboardDialog":"ejDialog";null!=$("#general-feedback-popup").data(e)?"undefined"!=typeof BoldBIDashboard?$("#general-feedback-popup").BoldBIDashboardDialog("open"):$("#general-feedback-popup").ejDialog("open"):(e={width:"520px",height:"490px",showOnInit:!0,allowDraggable:!1,enableResize:!1,showHeader:!1,enableModal:!0,beforeOpen:"beforeDialogOpen",beforeClose:"beforeDialogClose"},"undefined"!=typeof BoldBIDashboard?$("#general-feedback-popup").BoldBIDashboardDialog(e):$("#general-feedback-popup").ejDialog(e))}function beforeDialogOpen(){$("#general-feedback-popup").removeClass("display-none")}function beforeDialogClose(){$("#general-feedback-popup").addClass("display-none")}!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e()}(function(){var e,m,g,c,r,v,o,l,n,s,b,y,t,a;window.ej=window.Syncfusion=window.Syncfusion||{},m=window.jQuery,(g=window.Syncfusion).version="14.4.0.15",g.consts={NamespaceJoin:"-"},g.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"},g.Orientation={Horizontal:"horizontal",Vertical:"vertical"},g.serverTimezoneOffset=0,g.persistStateVersion=null,Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e,t){return e[t]!==c}),String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t+1]);return e.replace(/\{[0-9]\}/g,"")},jQuery.uaMatch=function(e){e=e.toLowerCase();e=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:e[1]||"",version:e[2]||"0"}},g.defineClass=function(e,t,i,n){if(!e||!i)return c;for(var o=e.split("."),r=window,s=0;s<o.length-1;s++)g.isNullOrUndefined(r[o[s]])&&(r[o[s]]={}),r=r[o[s]];return(n||g.isNullOrUndefined(r[o[s]]))&&(r[o[s]]=t="function"==typeof t?t:function(){},r[o[s]].prototype=i),r[o[s]]},g.util={getNameSpace:function(e){e=e.toLowerCase().split(".");return"ej"===e[0]&&(e[0]="e"),e.join(g.consts.NamespaceJoin)},getObject:function(e,t){var i,n,o;if(!t)return c;for(i=t,n=e.split("."),o=0;o<n.length&&!g.util.isNullOrUndefined(i);o++)i=i[n[o]];return i},createObject:function(e,t,i){for(var n,o=e.split("."),e=i||window,r=e,s=o.length,l=0;l<s;l++)n=o[l],l+1==s?r[n]=t===c?{}:t:g.isNullOrUndefined(r[n])&&(r[n]={}),r=r[n];return e},isNullOrUndefined:function(e){return e===c||null===e},print:function(e,t){var i,n=g.buildTag("div"),e=e.clone();n.append(e),(t=t||window.open("","print","height=452,width=1024,tabbar=no")).document.write("<!DOCTYPE html>"),e=m("head").find("link").add("style"),"msie"===g.browserInfo().name?(i="",e.each(function(e,t){"LINK"==t.tagName&&m(t).attr("href",t.href),i+=t.outerHTML}),t.document.write("<html><head></head><body>"+i+n[0].innerHTML+"</body></html>")):(i="",t.document.write("<html><head>"),e.each(function(e,t){"LINK"==t.tagName&&m(t).attr("href",t.href),i+=t.outerHTML}),t.document.writeln(i+"</head><body>"),t.document.writeln(n[0].innerHTML+"</body></html>")),t.document.close(),t.focus(),setTimeout(function(){g.isNullOrUndefined(t.window)||(t.print(),setTimeout(function(){t.close()},1e3))},1e3)},ieClearRemover:function(e){var t=m(e).height();e.style.paddingTop=parseFloat(t/2)+"px",e.style.paddingBottom=parseFloat(t/2)+"px",e.style.height="1px",e.style.lineHeight="1px"},sendAjaxRequest:function(e){m.ajax({type:e.type,cache:e.cache,url:e.url,dataType:e.dataType,data:e.data,contentType:e.contentType,async:e.async,success:e.successHandler,error:e.errorHandler,beforeSend:e.beforeSendHandler,complete:e.completeHandler})},buildTag:function(e,t,i,n){var o=/^[a-z]*[0-9a-z]+/gi.exec(e)[0],r=(r=/#([_a-z]+[-_0-9a-z]+)/gi.exec(e))?r[r.length-1]:c,e=/\.([a-z]+[-_0-9a-z ]+)/gi.exec(e);return e=e?e[e.length-1]:c,m(document.createElement(o)).attr(r?{id:r}:{}).addClass(e||"").css(i||{}).attr(n||{}).html(t||"")},_preventDefaultException:function(e,t){if(e)for(var i in t)if(t[i].test(e[i]))return!0;return!1},getMaxZindex:function(){var e=1;return e=(e=Math.max.apply(null,m.map(m("body *"),function(e){if("absolute"==m(e).css("position")||"fixed"==m(e).css("position"))return parseInt(m(e).css("z-index"))||1})))!=c&&null!=e?e:1},blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},getDimension:function(e,t){var i,n,o,r=m(e).parents().andSelf().filter(":hidden");return r&&(n={visibility:"hidden",display:"block"},o=[],r.each(function(){var e,t={};for(e in n)t[e]=this.style[e],this.style[e]=n[e];o.push(t)}),i=/(outer)/g.test(t)?m(e)[t](!0):m(e)[t](),r.each(function(e){var t,i=o[e];for(t in n)this.style[t]=i[t]})),i},transitionEndEvent:function(){return{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[g.userAgent()]},animationEndEvent:function(){return{"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"}[g.userAgent()]},startEvent:function(){return g.isTouchDevice()||m.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return g.isTouchDevice()||m.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return g.isTouchDevice()||m.support.hasPointer?m.support.hasPointer&&!g.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return g.isTouchDevice()||m.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return g.isTouchDevice()||m.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return g.isTouchDevice()||m.support.hasPointer?"taphold":"click"},isDevice:function(){return g.getBooleanVal(m("head"),"data-ej-forceset",!1)?g.getBooleanVal(m("head"),"data-ej-device",this._device()):this._device()},isPortrait:function(){var e=document.documentElement;return e&&e.clientWidth/e.clientHeight<1.1},isLowerResolution:function(){return window.innerWidth<=640&&g.isPortrait()&&g.isDevice()||window.innerWidth<=800&&!g.isDevice()||window.innerWidth<=800&&!g.isPortrait()&&g.isWindows()&&g.isDevice()||g.isMobile()},isIOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)},isAndroidWebView:function(){return!("undefined"==typeof Android)},isWindowsWebView:function(){return-1!=location.href.indexOf("x-wmapp")},_device:function(){return/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|kindle|windows\sce|palm|smartphone|iemobile|mobile|pad|xoom|sch-i800|playbook/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||!0===g.getBooleanVal(m("head"),"data-ej-mobile",!1)},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||!0===g.getBooleanVal(m("head"),"data-ej-tablet",!1)||!g.isMobile()&&g.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&g.isMobile())&&this.isDevice()},getClearString:function(e){return m.trim(e.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n\t ]+<","g"),"><"))},getBooleanVal:function(e,t,i){e=m(e).attr(t);return null!=e?"true"==e.toLowerCase():i},_getSkewClass:function(e,t,i){var n=e.width(),o=e.height(),r=e.offset().left,s=e.offset().left+n,l=e.offset().top,e=e.offset().top+o,n=.3*n,o=.3*o;return t<r+n&&i<l+o?"e-m-skew-topleft":s-n<t&&i<l+o?"e-m-skew-topright":s-n<t&&e-o<i?"e-m-skew-bottomright":t<r+n&&e-o<i?"e-m-skew-bottomleft":r+n<t&&i<l+o&&t<s-n?"e-m-skew-top":t<r+n?"e-m-skew-left":s-n<t?"e-m-skew-right":e-o<i?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(e){m(e).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_getObjectKeys:function(e){var t,i=[];if(e=Object.prototype.toString.call(e)===Object.prototype.toString()?e:{},!Object.keys){for(t in e)e.hasOwnProperty(t)&&i.push(t);return i}if(Object.keys)return Object.keys(e)},_touchStartPoints:function(e,t){e&&(e=e.touches?e.touches[0]:e,t._distX=0,t._distY=0,t._moved=!1,t._pointX=e.pageX,t._pointY=e.pageY)},_isTouchMoved:function(e,t){var i,n;if(e)return n=(e=e.touches?e.touches[0]:e).pageX-t._pointX,i=e.pageY-t._pointY,Date.now(),t._pointX=e.pageX,t._pointY=e.pageY,t._distX+=n,t._distY+=i,e=Math.abs(t._distX),n=Math.abs(t._distY),!(e<5&&n<5)},listenEvents:function(e,t,i,n,o,r){for(var s=0;s<e.length;s++)g.listenTouchEvent(e[s],t[s],i[s],n,o,r)},listenTouchEvent:function(e,t,i,n,o,r){for(var s,l=n?"removeEventListener":"addEventListener",a=n?"off":"on",c=m(e),h=0;h<c.length;h++)switch(s=c[h],t){case"touchstart":g._bindEvent(s,l,t,i,"mousedown","MSPointerDown","pointerdown",r);break;case"touchmove":g._bindEvent(s,l,t,i,"mousemove","MSPointerMove","pointermove",r);break;case"touchend":g._bindEvent(s,l,t,i,"mouseup","MSPointerUp","pointerup",r);break;case"touchcancel":g._bindEvent(s,l,t,i,"mousecancel","MSPointerCancel","pointercancel",r);break;case"tap":case"taphold":case"ejtouchmove":case"click":m(s)[a](t,i);break;default:"msie"==g.browserInfo().name&&g.browserInfo().version<9?o._on(m(s),t,i):s[l](t,i,!0)}},_bindEvent:function(e,t,i,n,o,r,s){m.support.hasPointer?e[t](window.navigator.pointerEnabled?s:r,n,!0):e[t](i,n,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var e="webkitT,t,MozT,msT,OT".split(","),t=0,i=e.length;t<i;t++)if(e[t]+"ransform"in g.styles)return e[t].substr(0,e[t].length-1);return!1},addPrefix:function(e){return""===g.userAgent()?e:(e=e.charAt(0).toUpperCase()+e.substr(1),g.userAgent()+e)},destroyWidgets:function(e){m(e).find("[data-role *= ejm]").each(function(e,t){var t=m(t),i=t.data("ejWidgets");i&&t[i]("destroy")})},getAttrVal:function(e,t,i){e=m(e).attr(t);return null!=e?e:i},getOffset:function(e){var t={},e=e.offset()||{left:0,top:0};return m.extend(!0,t,e),"static"!=m("body").css("position")&&(e=m("body").offset(),t.left-=e.left,t.top-=e.top),t},getZindexPartial:function(e,t){var i,n,o;if(!g.isNullOrUndefined(e)&&0<e.length)return i=e.parents(),n=m("body").children(),!g.isNullOrUndefined(e)&&0<e.length&&n.splice(n.index(t),1),m(n).each(function(e,t){i.push(t)}),!(o=Math.max.apply(o,m.map(i,function(e){if("static"!=m(e).css("position"))return parseInt(m(e).css("z-index"))||1})))||o<1e4?o=1e4:o+=1,o},isValidAttr:function(e,t){var i;return void 0!==(e=m(e)[0])[t]||(i=!1,m.each(e,function(e){if(e.toLowerCase()==t.toLowerCase())return!(i=!0)}),i)}},m.extend(g,g.util),g.widgetBase={droppables:{default:[]},resizables:{default:[]},_renderEjTemplate:function(e,t,i,n){var o=null;return(o="object"==typeof e||e.startsWith("#")||e.startsWith(".")?m(e).attr("type"):o)&&(o=o.toLowerCase(),g.template[o])?g.template[o](this,e,t,i,n):g.template.render(this,e,t,i,n)},destroy:function(){var e,t,i,n;if(!this._trigger("destroy")){this.model.enablePersistence&&(this.persistState(),m(window).off("unload",this._persistHandler));try{this._destroy()}catch(e){}for(e=this.element.data("ejWidgets")||[],n=0;n<e.length;n++)e[n]==this.pluginName&&e.splice(n,1);for(e.length||this.element.removeData("ejWidgets");this._events&&(i=[],t=this._events.pop());){for(n=0;n<t[1].length;n++)m.isPlainObject(t[1][n])||i.push(t[1][n]);m.fn.off.apply(t[0],i)}this._events=null,this.element.removeClass(g.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName),this.element=null,this.model=null}},_on:function(e){this._events||(this._events=[]);for(var t=[].splice.call(arguments,1,arguments.length-1),i={},n=t.length;i&&"function"!=typeof i;)i=t[--n];return t[n]=g.proxy(t[n],this),this._events.push([e,t,i,t[n]]),m.fn.on.apply(e,t),this},_off:function(e,t,i,n){var o,r,s,l,a=this._events;if(a&&a.length)for("function"==typeof i&&(o=n,n=i,i=o),r=t.match(/\S+/g)||[""],s=0;s<a.length;s++)if((l=a[s])[0].length&&(!n||l[2]===n)&&(l[1][0]===t||r[0])&&(!i||l[1][1]===i)&&-1<m.inArray(e[0],l[0])){m.fn.off.apply(e,n?[t,i,l[3]]:[t,i]),a.splice(s,1);break}return this},_trigger:function(e,t){var i,n,o=null,r={};return m.extend(r,t),(o=e in this.model?this.model[e]:o)&&("string"==typeof o&&(o=g.util.getObject(o,window)),m.isFunction(o))&&(i=g.event(e,this.model,t),o=o.call(this,i),(n=this.model._applyScope)&&n.call(),t&&m.extend(t,i),i.cancel||!g.isNullOrUndefined(o))?!1===o||i.cancel:(n=Boolean(t),(t=t||{}).originalEventType=e,t.type=this.pluginName+e,i=m.Event(t.type,g.event(t.type,this.model,t)),this.element.trigger(i),n&&m.extend(t,i),g.isOnWebForms&&0==i.cancel&&this.model.serverEvents&&this.model.serverEvents.length&&g.raiseWebFormsServerEvents(e,t,r),i.cancel)},setModel:function(e,t){var i,n,o;if(!this._trigger("modelChange",{changes:e})){for(i in e){if(!t){if(this.model[i]===e[i]){delete e[i];continue}if(m.isPlainObject(e[i])&&(r(this.model[i],e[i]),m.isEmptyObject(e[i]))){delete e[i];continue}}if(this.dataTypes&&!0!==(n=this._isValidModelValue(i,this.dataTypes,e)))throw"setModel - Invalid input for property :"+i+" - "+n;this.model.notifyOnEachPropertyChanges&&this.model[i]!==e[i]&&(n={oldValue:this.model[i],newValue:e[i]},e[i]=this._trigger(i+"Change",n)?this.model[i]:n.newValue)}m.isEmptyObject(e)||(this._setFirst?((o=e.dataSource)&&delete e.dataSource,m.extend(!0,this.model,e),o&&(this.model.dataSource=o instanceof Array?o.slice():o,e.dataSource=this.model.dataSource),this._setModel&&this._setModel(e)):this._setModel&&!1===this._setModel(e)||m.extend(!0,this.model,e),"enablePersistence"in e&&this._setState(e.enablePersistence))}},option:function(e,t,i){if(!e)return this.model;if(m.isPlainObject(e))return this.setModel(e,i);if("string"==typeof e){e=e.replace(/^model\./,"");var n=g.getObject(e,this.model);if(t===c&&!i)return n;if("enablePersistence"===e)return this._setState(t);if(i&&t===g.extensions.modelGUID)return this._setModel(g.createObject(e,g.getObject(e,this.model),{}));if(i||g.getObject(e,this.model)!==t)return this.setModel(g.createObject(e,t,{}),i)}return c},_isValidModelValue:function(e,t,i){var n,o,r,s=t[e],l=i[e];if(s){if("string"==typeof s){if("enum"==s&&(i[e]=l&&l.toString().toLowerCase(),s="string"),"array"===s){if("[object Array]"===Object.prototype.toString.call(l))return!0}else if("data"===s||"parent"===s||typeof l===s)return!0;return"Expected type - "+s}if(l instanceof Array){for(o=0;o<l.length;o++)if(!0!==(n=this._isValidModelValue(e,t,l[o])))return" ["+o+"] - "+n}else for(r in l)if(n=this._isValidModelValue(r,s,l),!0!==n)return r+" : "+n}return!0},_returnFn:function(e,t){-1!=t.indexOf(".")?this._returnFn(e[t.split(".")[0]],t.split(".").slice(1).join(".")):e[t]=e[t].call(e.propName)},stringify:function(e){for(var t,i=this.observables,n=0;n<i.length;n++)t=g.getObject(i[n],e),g.isNullOrUndefined(t)||"function"!=typeof t||this._returnFn(e,i[n]);return JSON.stringify(e)},_setState:function(e){!0===e?(this._persistHandler=g.proxy(this.persistState,this),m(window).on("unload",this._persistHandler)):(this.deleteState(),m(window).off("unload",this._persistHandler))},_removeProp:function(e,t){g.isNullOrUndefined(e)||(-1!=t.indexOf(".")?this._removeProp(e[t.split(".")[0]],t.split(".").slice(1).join(".")):delete e[t])},persistState:function(){var e,t;if(this._ignoreOnPersist){for(e=b({},this.model),t=0;t<this._ignoreOnPersist.length;t++)this._removeProp(e,this._ignoreOnPersist[t]);e.ignoreOnPersist=this._ignoreOnPersist}else if(this._addToPersist){for(e={},t=0;t<this._addToPersist.length;t++)g.createObject(this._addToPersist[t],g.getObject(this._addToPersist[t],this.model),e);e.addToPersist=this._addToPersist}else e=b({},this.model);this._persistState&&(e.customPersists={},this._persistState(e.customPersists)),window.localStorage?(g.isNullOrUndefined(g.persistStateVersion)||null!=window.localStorage.getItem("persistKey")||window.localStorage.setItem("persistKey",g.persistStateVersion),window.localStorage.setItem("$ej$"+this.pluginName+this._id,JSON.stringify(e))):document.cookie&&(g.isNullOrUndefined(g.persistStateVersion)||null!=g.cookie.get("persistKey")||g.cookie.set("persistKey",g.persistStateVersion),g.cookie.set("$ej$"+this.pluginName+this._id,e))},deleteState:function(){window.localStorage?window.localStorage.removeItem("$ej$"+this.pluginName+this._id):document.cookie&&g.cookie.set("$ej$"+this.pluginName+this._id,model,new Date)},restoreState:function(e){var t,i,n=null;if(window.localStorage?n=window.localStorage.getItem("$ej$"+this.pluginName+this._id):document.cookie&&(n=g.cookie.get("$ej$"+this.pluginName+this._id)),n&&(t=JSON.parse(n),this._restoreState&&(this._restoreState(t.customPersists),delete t.customPersists),!1===g.isNullOrUndefined(t))&&(g.isNullOrUndefined(t.ignoreOnPersist)?g.isNullOrUndefined(t.addToPersist)||(this._addToPersist=t.addToPersist,delete t.addToPersist):(this._ignoreOnPersist=t.ignoreOnPersist,delete t.ignoreOnPersist)),g.isNullOrUndefined(t)||g.isNullOrUndefined(this._ignoreOnPersist))this.model=m.extend(!0,this.model,t);else{for(i in this._ignoreOnPersist)-1!==this._ignoreOnPersist[i].indexOf(".")?g.createObject(this._ignoreOnPersist[i],g.getObject(this._ignoreOnPersist[i],this.model),t):t[this._ignoreOnPersist[i]]=this.model[this._ignoreOnPersist[i]];this.model=t}!e&&n&&this._setModel&&this._setModel(this.model)},ignoreOnPersist:function(e){var t,i,n=[];if("object"==typeof e?n=e:"string"==typeof e&&n.push(e),this._addToPersist===c)for(this._ignoreOnPersist=this._ignoreOnPersist||[],t=0;t<n.length;t++)this._ignoreOnPersist.push(n[t]);else for(t=0;t<n.length;t++)i=this._addToPersist.indexOf(n[t]),this._addToPersist.splice(i,1)},addToPersist:function(e){var t,i,n=[];if("object"==typeof e?n=e:"string"==typeof e&&n.push(e),this._addToPersist===c)for(this._ignoreOnPersist=this._ignoreOnPersist||[],i=0;i<n.length;i++)t=this._ignoreOnPersist.indexOf(n[i]),this._ignoreOnPersist.splice(t,1);else for(i=0;i<n.length;i++)-1===m.inArray(n[i],this._addToPersist)&&this._addToPersist.push(n[i])},formatting:function(e,t,i){var n,o;if(e=e.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),i=g.preferredCulture(i)?i:"en-US",s=(n=e).split("{0:"),o=e.split("}"),s=s[0],o=o[1],"string"==typeof t&&m.isNumeric(t)&&(t=Number(t)),-1!=e.indexOf("{0:"))return null!=(e=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(e))&&null!=t?null!=s&&null!=o?s+g.format(t,e[2],i)+o:g.format(t,e[2],i):null!=t?t:"";if(!n.startsWith("{")||n.startsWith("{0:"))return null!=this.data&&null==this.data.Value?(m.each(this.data,function(e,t){n=n.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),n):this.data.Value;for(var r=n.split(""),s=(t=(t||"")+"").split(""),l=/[0aA\*CN<>\?]/gm,a=0,c=0;a<r.length;a++)r[a]=l.test(r[a])?"{"+c+++"}":r[a];return String.format.apply(String,[r.join("")].concat(s)).replace("{","").replace("}","")}},g.WidgetBase=function(){},r=function(e,t){for(var i in e)e[i]===t[i]&&delete t[i],m.isPlainObject(t[i])&&m.isPlainObject(e[i])&&r(e[i],t[i])},g.widget=function(d,u,p){var e,t,f;if("object"==typeof d)for(e in p=u,d)t=d[e],t instanceof Array&&(p._rootCSS=t[1],t=t[0]),g.widget(e,t,p),d[e]instanceof Array&&(p._rootCSS="");else f=p._rootCSS||g.getNameSpace(u),p=g.defineClass(u,function(e,t){var i,n,o,r,s,l,a,c,h;if(this.sfType=u,this.pluginName=d,this.instance=y,g.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},m.extend(this,g.widgetBase),this.dataTypes)for(i in t)if(n=this._isValidModelValue(i,this.dataTypes,t),!0!==n)throw"setModel - Invalid input for property :"+i+" - "+n;for((c=e.data("ejWidgets")||[]).push(d),e.data("ejWidgets",c),r=0;g.widget.observables&&this.observables&&r<this.observables.length;r++)(o=g.getObject(this.observables[r],t))&&g.createObject(this.observables[r],g.widget.observables.register(o,this.observables[r],this,e),t);if(this.element=e.jquery?e:m(e),this.model=b(!0,{},p.prototype.defaults,t),this.model.keyConfigs=b(this.keyConfigs),this.element.addClass(f+" e-js").data(d,this),this._id=e[0].id,this.element.attr("tabIndex")||this.element.attr("tabIndex",""),this.model.enablePersistence){if(window.localStorage&&!g.isNullOrUndefined(g.persistStateVersion)&&window.localStorage.getItem("persistKey")!=g.persistStateVersion)for(r in window.localStorage)-1!=r.indexOf("$ej$")&&window.localStorage.removeItem(r);else if(document.cookie&&!g.isNullOrUndefined(g.persistStateVersion)&&g.cookie.get("persistKey")!=g.persistStateVersion)for(s in document.cookie.split(/; */))-1!=s.indexOf("$ej$")&&g.cookie.set(s.split("=")[0],model,new Date);this._persistHandler=g.proxy(this.persistState,this),m(window).on("unload",this._persistHandler),this.restoreState(!0)}if(this._init(t),"object"==typeof this.model.keyConfigs&&!(this.model.keyConfigs instanceof Array)){for(a in l=!1,this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus),this.model.keyConfigs)if("focus"!==a){l=!0;break}l&&this._keyPressed&&(c=e,h="keydown",this.keySettings&&(c=this.keySettings.getElement&&this.keySettings.getElement()||c,h=this.keySettings.event||h),this._on(c,h,function(e){var t,i;this.model.keyConfigs&&(t=v.getActionFromCode(this.model.keyConfigs,e.which,e.ctrlKey,e.shiftKey,e.altKey),i={code:e.which,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey},t)&&!1===this._keyPressed(t,e.target,i,e)&&e.preventDefault()}))}this._trigger("create")},p),m.fn[d]=function(e){for(var t=e,i=0;i<this.length;i++){var n=m(this[i]),o=n.data(d),r=o&&n.hasClass(f),s=null;if(0<this.length&&m.isPlainObject(t)&&(e=g.copyObject({},t)),r){if(e)if(r=[].slice.call(arguments,1),0<this.length&&r[0]&&"option"===t&&m.isPlainObject(r[0])&&(r[0]=g.copyObject({},r[0])),m.isPlainObject(e))o.setModel(e);else if(0!==e.indexOf("_")&&!g.isNullOrUndefined(s=g.getObject(e,o))||0===e.indexOf("model."))if(s&&m.isFunction(s)){if((r=s.apply(o,r))!==c)return r}else{if(1==arguments.length)return s;o.option(e,arguments[1])}else l(u+": function/property - "+e+" does not exist")}else!0!==p.prototype._requiresID||m(this[i]).attr("id")||n.attr("id",a("ejControl_")),e&&"object"!=typeof e?l(d+": methods/properties can be accessed only after plugin creation"):(p.prototype.defaults&&!g.isNullOrUndefined(g.setCulture)&&"locale"in p.prototype.defaults&&"ejChart"!=d&&(!e||"locale"in e?g.isNullOrUndefined(e)&&((e={}).locale=g.setCulture().name):e.locale=g.setCulture().name),new p(n,e))}return-1!=d.indexOf("ejm")&&g.widget.registerInstance(n,d,u,p.prototype),this},g.widget.register(d,u,p.prototype)},m.extend(g.widget,{register:function(e,t,i){g.isNullOrUndefined(n[e])||l("ej.widget : The widget named "+e+" is trying to register twice."),n[e]={name:e,className:t,proto:i},g.widget.extensions&&g.widget.extensions.registerWidget(e)},registerInstance:function(e,t,i,n){s.push({element:e,pluginName:t,className:i,proto:n})},registeredWidgets:n={},registeredInstances:s=[]}),g.widget.destroyAll=function(e){var t,i,n,o;if(e&&e.length)for(t=0;t<e.length;t++)if((n=(i=e.eq(t).data()).ejWidgets)&&n.length)for(o=0;o<n.length;o++)i[n[o]]&&i[n[o]].destroy&&i[n[o]].destroy()},g.cookie={get:function(e){e=RegExp(e+"=([^;]+)").exec(document.cookie);return e&&1<e.length?e[1]:c},set:function(e,t,i){"object"==typeof t&&(t=JSON.stringify(t)),t=escape(t)+(null==i?"":"; expires="+i.toUTCString()),document.cookie=e+"="+t}},v={getActionFromCode:function(e,t,i,n,o){var r,s,l;for(r in i=i||!1,n=n||!1,o=o||!1,e)if("focus"!==r)for(s=v.getKeyObject(e[r]),l=0;l<s.length;l++)if(t===s[l].code&&i==s[l].isCtrl&&n==s[l].isShift&&o==s[l].isAlt)return r;return null},getKeyObject:function(e){for(var t,i,n,o={isCtrl:!1,isShift:!1,isAlt:!1},r=m.extend(!0,{},o),s=e.split(","),l=[],a=0;a<s.length;a++){if(t=null,-1!=s[a].indexOf("+"))for(i=s[a].split("+"),n=0;n<i.length;n++)t=v.getResult(m.trim(i[n]),o);else t=v.getResult(m.trim(s[a]),m.extend(!0,{},r));l.push(t)}return l},getResult:function(e,t){return"ctrl"===e?t.isCtrl=!0:"shift"===e?t.isShift=!0:"alt"===e?t.isAlt=!0:t.code=parseInt(e,10),t}},g.getScrollableParents=function(e){return m(e).parentsUntil("html").filter(function(){return"visible"!=m(this).css("overflow")}).add(m(window))},g.browserInfo=function(){var e,t,i,n,o={},r=[],s={opera:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,edge:/(edge)(?:.*version|)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie|trident) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(e in s)if(s.hasOwnProperty(e)&&(r=navigator.userAgent.match(s[e]),r)){if(o.name="opr"==r[1].toLowerCase()?"opera":r[1].toLowerCase(),o.version=r[2],o.culture={},o.culture.name=o.culture.language=navigator.language||navigator.userLanguage,void 0!==g.globalize){for(t=g.preferredCulture().name,i=navigator.language||navigator.userLanguage?g.preferredCulture(navigator.language||navigator.userLanguage):g.preferredCulture("en-US"),n=0;navigator.languages&&n<navigator.languages.length&&(i=g.preferredCulture(navigator.languages[n])).language!=navigator.languages[n];n++);g.preferredCulture(t),m.extend(!0,o.culture,i)}navigator.userAgent.match(/Trident\/7\./)&&(o.name="msie");break}return o.isMSPointerEnabled="msie"==o.name&&9<o.version&&window.navigator.msPointerEnabled,o.pointerEnabled=window.navigator.pointerEnabled,o},g.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"},g.event=function(e,t,i){return m.extend(i||{},{type:e,model:t,cancel:!1})},g.proxy=function(t,i,n){return t&&"function"==typeof t?"on"in t&&i?n?t.on(i,n):t.on(i):function(){var e=n?[n]:[];return e.push.apply(e,arguments),t.apply(i||this,e)}:null},g.hasStyle=function(e){var t,i,n=document.documentElement.style;if(e in n)return!0;for(t=["ms","Moz","Webkit","O","Khtml"],e=e[0].toUpperCase()+e.slice(1),i=0;i<t.length;i++)if(t[i]+e in n)return!0;return!1},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t,i=this.length;if(0!==i)for(t=0;t<i;t++)if(t in this&&this[t]===e)return t;return-1},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e},b=g.copyObject=function(e,t){var i,n,o,r,s,l="boolean"!=typeof e?1:2,a=[].slice.call(arguments,l);for(1===l&&(t=e,e=c),o=0;o<a.length;o++)for(r in a[o])if(i=t[r],n=a[o][r],n!==c&&i!==n&&a[o]!==n&&t!==n)if(n instanceof Array)if(0===o&&e)for(t[r]=[],s=0;s<n.length;s++)b(!0,t[r],n);else t[r]=n.slice();else g.isPlainObject(n)?(t[r]=i||{},e?b(e,t[r],n):b(t[r],n)):t[r]=n;return t},y=function(){return this},t=0,a=function(e){return e+t++},g.template={},g.template.render=g.template["text/x-jsrender"]=function(e,t,i,n,o){"#"!==t.slice(0,1)&&(t=["<div>",t,"</div>"].join(""));o={prop:o,index:n};return m(t).render(i,o)},g.isPlainObject=function(e){if(!e||g.DataManager!==c&&e instanceof g.DataManager||"object"!=typeof e||e.nodeType||jQuery.isWindow(e))return!1;try{if(e.constructor&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(e){return!1}var t,i=g.support.isOwnLast;for(t in e)if(i)break;return t===c||e.hasOwnProperty(t)},o=!1,g.util.valueFunction=function(n){return function(e,t){var i=g.getObject(n,this.model);if(!1===o&&(o=g.getObject("observables.getValue",g.widget)),e===c)return g.isNullOrUndefined(o)?"function"==typeof i?i.call(this):i:o(i,t);"function"==typeof i?(this["ob.values"][n]=e,i.call(this,e)):g.createObject(n,e,this.model)}},g.util.getVal=function(e){return"function"==typeof e?e():e},g.support={isOwnLast:function(){function e(){this.a=1}for(var t in e.prototype.b=1,new e)return"b"===t}(),outerHTML:document.createElement("div").outerHTML!==c},l=g.throwError=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}},g.getRandomValue=function(e,t){var i;return e===c||t===c?g.throwError("Min and Max values are required for generating a random number"):0|("crypto"in window&&"getRandomValues"in crypto?(i=new Uint16Array(1),window.crypto.getRandomValues(i),i[0]%(t-e)+e):Math.random()*(t-e)+e)},g.extensions={},g.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}",$.fn.addEleAttrs=function(e){var i=$(this);$.each(e,function(e,t){t&&t.specified&&i.attr(t.name,t.value)})},$.fn.removeEleAttrs=function(n){return this.each(function(){var i=$(this),e=$(this.attributes).clone();$.each(e,function(e,t){t&&t.specified&&n.test(t.name)&&i.removeAttr(t.name)})})},$.fn.attrNotStartsWith=function(e){var t,n=[];for(this.each(function(){t=$(this.attributes).clone()}),i=0;i<t.length;i++){if(t[i]&&t[i].specified&&e.test(t[i].name))continue;n.push(t[i])}return n},$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var i=$(this),e=$(this.attributes).clone();$.each(e,function(e,t){t&&t.specified&&""===t.value&&i.removeAttr(t.name)})})},$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:!1!==ej.userAgent(),pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles}),$.extend($.expr[":"],{attrNotStartsWith:function(e,t,i){for(var n=e.attributes,o=0;o<n.length;o++)if(0===n[o].nodeName.indexOf(i[3]))return!1;return!0}}),e=$.fn.andSelf||$.fn.addBack,$.fn.andSelf=$.fn.addBack=function(){return e.apply(this,arguments)}}),function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min"],e):e()}(function(){var i,e=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},e=(i=ej.WidgetBase,e(t,i),t.prototype.setModel=function(e,t){this.setModel(e,t)},t.prototype.option=function(e,t){this.option(e,t)},t.prototype.triggerEvents=function(e,t){var i;switch(e){case"click":case"hover":case"tracking":case"beforeOpen":case"open":i=this._trigger(e,t);break;case"beforeClose":case"close":i=this._trigger(e,t)}return i},t.prototype.enable=function(){this.tooltip.hasClass("e-disable")&&(this.model.enabled=!0,this.tooltip.removeClass("e-disable"))},t.prototype.disable=function(){this.tooltip.hasClass("e-disable")||(this.model.enabled=!1,this.tooltip.addClass("e-disable"))},t.prototype.show=function(e,t){var i;this.model.enabled&&(ej.isNullOrUndefined(e)?(i=null==this.model.target?this.element:$(this.element).find(this.model.target+":first"),this._positionElement(i)):this._positionElement(e),ej.isNullOrUndefined(t)?this._showTooltip():"string"==typeof t?$(this.tooltip).show(t):"function"==typeof t&&t.call.apply(this.tooltip))},t.prototype.hide=function(e){this.model.enabled&&(ej.isNullOrUndefined(e)?this._hideTooltip():"string"==typeof e?$(this.tooltip).hide(e):"function"==typeof e&&e.call.apply(this.tooltip))},t.prototype._destroy=function(){$(this.tooltip).remove(),this.tooltip=null},t.prototype._setModel=function(e){var t,i;for(t in e)switch(t){case"height":this._setHeight(e[t]);break;case"width":this._setWidth(e[t]);break;case"enabled":this._enabled(e[t]);break;case"content":this._setContent(e[t]);break;case"title":this.model.title=e[t],null==this.model.title?($(this.tooltipHeader).remove(),this.tooltipHeader=null,this.tooltipTitle=null,this.model.closeMode===ej.Tooltip.CloseMode.Sticky&&this._iconRender()):ej.isNullOrUndefined(this.tooltipHeader)?this._createHeader():$(this.tooltipTitle).html(this.model.title),this.tooltipPos.height=$(this.tooltip).outerHeight();break;case"associate":this.model.associate=e[t],this._wireMouseEvents(!1),this._wireMouseEvents(!0);break;case"position":this._setPosition(e[t]);break;case"collision":this.model.collision=e[t];break;case"closeMode":void 0!==e[t]&&(this.model.closeMode=e[t],this.model.closeMode==ej.Tooltip.CloseMode.Sticky?this._iconRender():($(this.tooltipClose).remove(),this.tooltipClose=null),this.tooltipPos.height=$(this.tooltip).outerHeight());break;case"cssClass":this._setSkin(e[t]);break;case"showShadow":this._shadowEffect(e[t],this.model.position);break;case"isBalloon":ej.isNullOrUndefined(e[t])||(this.model.isBalloon=e[t],this.model.isBalloon?this._renderArrow():($(this.tip).remove(),this.tip=null));break;case"animation":i=e[t],this.model.animation=$.extend(!0,this.model.animation,i),this.model.animation.effect!=ej.Tooltip.Effect.None?(this._off($(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this._off($(this.tooltip),"mouseleave",this._onTooltipMouseLeave)):this.model.animation.effect==ej.Tooltip.Effect.None&&(this._on($(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this._on($(this.tooltip),"mouseleave",this._onTooltipMouseLeave));break;case"enableRTL":this._setRTL(e[t]);break;case"target":this._wireTriggerEvents(!1),this.model.target=e[t],this._wireTriggerEvents(!0),this._renderTarget();break;case"trigger":this._setTrigger(e[t]);break;case"showRoundedCorner":this.model.showRoundedCorner=e[t],this._roundedCorner(e[t]);break;case"allowKeyboardNavigation":this.model.allowKeyboardNavigation=e[t],this.model.allowKeyboardNavigation?this._on($(window),"keydown",this._keyDown):this._off($(window),"keydown",this._keyDown)}},t.prototype._enabled=function(e){e?this.enable(e):this.disable(e),this.model.enabled=e},t.prototype._shadowEffect=function(e,t){this.model.showShadow=e;var i=null;if($(this.tooltip).removeClass("e-tooltipShadowLeft e-tooltipShadowRight"),this.model.showShadow){if(this.model.isBalloon)switch(t.stem.horizontal){case"center":i="top"!=t.stem.vertical&&"bottom"==t.stem.vertical?"e-tooltipShadowRight":"e-tooltipShadowLeft";break;case"right":i="center"==t.target.horizontal&&"top"==t.stem.vertical?"e-tooltipShadowLeft":"e-tooltipShadowRight";break;case"left":i="center"==t.target.horizontal&&"bottom"==t.stem.vertical?"e-tooltipShadowRight":"e-tooltipShadowLeft"}else i="e-tooltipShadowLeft";$(this.tooltip).addClass(i)}},t.prototype._setContent=function(e){this.model.content=e,$(this.tooltipContent).html(this.model.content),this.tooltipPos.height=$(this.tooltip).outerHeight(),this.tooltipPos.width=$(this.tooltip).outerWidth()},t.prototype._setPosition=function(e){this.model.position.stem=$.extend(!0,this.model.position.stem,e.stem),this.model.position.target=$.extend(!0,this.model.position.target,e.target)},t.prototype._setTrigger=function(e){this._wireTriggerEvents(!1),this.model.trigger=e,this._wireTriggerEvents(!0)},t.prototype._init=function(){this.id=this.element[0].id,this.positionTarget=$.extend(!0,{},this.model.position.target),this.positionTooltip=$.extend(!0,{},this.model.position.stem),this.tipSize=$.extend(!0,{},this.model.tip.size),this._initialize(),this._render(),this.enable(this.model.enabled),this._wireEvents(!0)},t.prototype._initialize=function(){ej.isNullOrUndefined(this.model.target)?ej.isNullOrUndefined(this.model.content)&&!ej.isNullOrUndefined(this.element.attr("title"))&&(this.model.content=this.element.attr("title"),this.element.attr("data-content",this.model.content),this.element.removeAttr("title")):this._renderTarget()},t.prototype._wireEvents=function(e){var t=e?"_on":"_off";this._wireTriggerEvents(e),this.model.allowKeyboardNavigation&&this[t]($(window),"keydown",this._keyDown),null!=this.model.target?this[t](this.element,"scroll",this.model.target,this._hideTooltip):this[t](this.element,"scroll",this._hideTooltip),this[t]($(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this[t]($(this.tooltip),"mouseleave",this._onTooltipMouseLeave),this[t]($(window),"resize",this._hideTooltip),this[t]($(window),"touchend",this._docTouchEndHandler)},t.prototype._wireTriggerEvents=function(e){var t=e?"_on":"_off";this._wireMouseEvents(e),e=this.model.trigger==ej.Tooltip.Trigger.Click?"click touchstart":this.model.trigger==ej.Tooltip.Trigger.Focus?"focus touchstart":"mouseenter touchstart",null!=this.model.target?this[t](this.element,e,this.model.target,this._targetHover):this[t](this.element,e,this._targetHover),this.model.trigger==ej.Tooltip.Trigger.Focus?null!=this.model.target?this[t](this.element,"blur",this.model.target,this._hideTooltip):this[t](this.element,"blur",this._hideTooltip):null!=this.model.target?this[t](this.element,"mouseleave",this.model.target,this._onMouseOut):this[t](this.element,"mouseleave",this._onMouseOut)},t.prototype._wireMouseEvents=function(e){e=e?"_on":"_off";this.model.associate!=ej.Tooltip.Associate.MouseEnter&&this.model.associate!=ej.Tooltip.Associate.MouseFollow||(null!=this.model.target?this[e](this.element,"mousemove touchstart",this.model.target,this._tooltipMove):this[e](this.element,"mousemove touchstart",this._tooltipMove))},t.prototype._render=function(){this.tooltip=ej.buildTag("div.e-tooltip-wrap e-widget","",{},{role:"tooltip","aria-readonly":"true","aria-hidden":"true","aria-describedby":this.id+"_content",id:this.id+"_Main"}),this.tooltipInter=ej.buildTag("div.e-tipContainer","",{},{}),this.tooltip.append(this.tooltipInter),this.model.isBalloon&&this._renderArrow(),$(this.model.containment).append(this.tooltip),this._setHeight(this.model.height),this._setWidth(this.model.width),this._createHeader(),this._tooltipContent(),this.model.cssClass&&this.tooltip.addClass(this.model.cssClass),this.model.showRoundedCorner&&this._roundedCorner(this.model.showRoundedCorner),this.model.enableRTL&&this._setRTL(this.model.enableRTL),$(this.tooltip).css({top:"auto",left:"auto"}),this.tooltipPos={width:$(this.tooltip).outerWidth(),height:$(this.tooltip).outerHeight(),left:$(this.tooltip).offset().left,top:$(this.tooltip).offset().top,position:"absolute"},ej.isNullOrUndefined(this.model.target)&&(this._containerCalc(this.element),this._positionElement(this.element))},t.prototype._containerCalc=function(e){ej.isNullOrUndefined(e)&&(e=this.element);e=$(e).offset();this.containerSize={height:"body"==this.model.containment?$(window).innerHeight()||document.documentElement.clientHeight||document.body.clientHeight:$(this.model.containment).height(),width:"body"==this.model.containment?$(window).innerWidth()||document.documentElement.clientWidth||document.body.clientWidth:$(this.model.containment).width()},this.containerSize.left="body"!=this.model.containment&&"static"==$(this.model.containment).css("position")?$(this.model.containment).offset().left-$(this.model.containment).offsetParent().offset().left:0,this.containerSize.top="body"!=this.model.containment&&"static"==$(this.model.containment).css("position")?$(this.model.containment).offset().top-$(this.model.containment).offsetParent().offset().top:0,e.left-="body"!=this.model.containment?("static"==$(this.model.containment).css("position")?$(this.model.containment).offsetParent():$(this.model.containment)).offset().left:0,e.top-="body"!=this.model.containment?("static"==$(this.model.containment).css("position")?$(this.model.containment).offsetParent():$(this.model.containment)).offset().top:0,this.targetPos.left=e.left,this.targetPos.top=e.top},t.prototype._setHeight=function(e){this.model.height=e,!isNaN(+e)&&isFinite(e)?$(this.tooltip).css("height",e+"px"):$(this.tooltip).css("height",e),this.tooltipPos.height=$(this.tooltip).outerHeight()},t.prototype._setWidth=function(e){this.model.width=e,"auto"!=this.model.width&&(e=!isNaN(+e)&&isFinite(e)?e+"px":e,$(this.tooltip).css("max-width",e),$(this.tooltip).css("min-width","0px")),$(this.tooltip).css("width",e),this.tooltipPos.height=$(this.tooltip).outerHeight()},t.prototype._setRTL=function(e){(this.model.enableRTL=e)?this.tooltip.addClass("e-rtl"):this.tooltip.removeClass("e-rtl")},t.prototype._setSkin=function(e){this.model.cssClass!=e&&(this.tooltip.removeClass(this.model.cssClass).addClass(e),this.model.cssClass=e)},t.prototype._roundedCorner=function(){this.model.showRoundedCorner?this.tooltip.addClass("e-corner"):this.tooltip.removeClass("e-corner")},t.prototype._renderArrow=function(){ej.isNullOrUndefined(this.tip)&&(this.tip=ej.buildTag("div.e-arrowTip"," ",{id:this.id+"_eTip"},{}),$(this.tip).append("<div class='e-arrowTipOuter'></div>").append("<div class='e-arrowTipInner'></div>"),$(this.tip).insertBefore(this.tooltipInter))},t.prototype._adjustArrow=function(e){var t,i,n=$(this.tooltip).width(),o=$(this.tooltip).height(),r=e.stem,s=e.target,l={tipHeight:0,tipWidth:0},l="right"==s.horizontal||"left"==s.horizontal?(t="left"==r.horizontal?-this.model.tip.size.height:"right"==r.horizontal?n:n/2-this.tipSize.width/2,i="center"!=r.horizontal?"top"==r.vertical?5:"center"==r.vertical?o/2-this.tipSize.width/2:o-5-this.tipSize.width:"top"==r.vertical?-this.tipSize.height:"bottom"==r.vertical?o:this.tooltipPos.height/2-this.tipSize.width/2,this._arrowBinding(e,"horizontal")):(i="top"==r.vertical?-this.tipSize.height:"bottom"==r.vertical?o:o/2-this.tipSize.width/2,t="center"==r.vertical?"left"==r.horizontal?-this.model.tip.size.height:n:"left"==r.horizontal?10:"center"==r.horizontal?this.tooltipPos.width/2-this.tipSize.width/2:n-10-this.tipSize.width,this._arrowBinding(e,"vertical"));this.arrowValue.left=t,this.arrowValue.top=i,$(this.tip).css({height:l.tipHeight+"px",width:l.tipWidth+"px",left:t+"px",top:i+"px",display:"center"==r.horizontal&&"center"==r.vertical?"none":"block"})},t.prototype._arrowBinding=function(e,t){var i,n,o=e.stem,t="horizontal"==t?"center"!=o.horizontal:"center"==o.vertical,o=$(this.tooltip).css("border-top-color"),r=$(this.tooltip).css("background-color"),s=this.model.tip.size.height,l=this.model.tip.size.height-1,a={"border-top":"none","border-bottom":"none","border-right":"none","border-left":"none"};return t?(i=this.model.tip.size.height,n=this.model.tip.size.width,$(this.tip).find(".e-arrowTipOuter").css(this._arrow(e,s,o,a,"horizontal")),$(this.tip).find(".e-arrowTipInner").css(this._arrow(e,l,r,a,"horizontal"))):(i=this.model.tip.size.width,n=this.model.tip.size.height,$(this.tip).find(".e-arrowTipOuter").css(this._arrow(e,s,o,a,"vertical")),$(this.tip).find(".e-arrowTipInner").css(this._arrow(e,l,r,a,"vertical"))),{tipHeight:n,tipWidth:i}},t.prototype._arrow=function(e,t,i,n,o){var e=e.stem,r="horizontal"==o&&"right"==e.horizontal?"0px":"1px",s="horizontal"!=o&&"bottom"==e.vertical?"0px":"1px";return n["border-top"]="horizontal"==o?t+"px solid transparent":"bottom"==e.vertical?t+"px solid "+i:"none",n["border-bottom"]="horizontal"==o?t+"px solid transparent":"top"==e.vertical?t+"px solid "+i:"none",n["border-right"]="horizontal"==o?"left"==e.horizontal?t+"px solid "+i:"none":t+"px solid transparent",n["border-left"]="horizontal"==o?"right"==e.horizontal?t+"px solid "+i:"none":t+"px solid transparent",t==this.model.tip.size.height-1&&(n.left=r,n.top=s),n},t.prototype._iconRender=function(){this.model.closeMode==ej.Tooltip.CloseMode.Sticky&&(ej.isNullOrUndefined(this.tooltipClose)||$(this.tooltipClose).remove(),this.tooltipClose=ej.buildTag("div .e-icon"," ",{},{id:"_closeIcon"}),null!=this.model.title?$(this.tooltipClose).insertAfter(this.tooltipTitle).addClass("e-close"):$(this.tooltipClose).insertBefore(this.tooltipInter).addClass("e-cross-circle"),this._on($(this.tooltipClose),"click",this._hideTooltip))},t.prototype._renderTarget=function(){this.targetElement=$(this.element).find(this.model.target);for(var e=0;e<this.targetElement.length;e++)ej.isNullOrUndefined($(this.targetElement[e]).attr("title"))||(this.targetElement[e].setAttribute("data-content",this.targetElement[e].title),this.targetElement[e].removeAttribute("title"))},t.prototype._tooltipContent=function(){this.tooltipContent=ej.buildTag("div.e-tipcontent e-def","",{},{id:this.id+"_content"}),$(this.tooltipContent).html(this.model.content).addClass("e-def"),null!=this.model.title?$(this.tooltipContent).insertAfter(this.tooltipHeader):$(this.tooltipContent).appendTo(this.tooltipInter)},t.prototype._positionElement=function(e){this.tooltipPos.width=$(this.tooltip).outerWidth(),this.tooltipPos.height=$(this.tooltip).outerHeight(),this.targetPos.width=$(e).outerWidth(),this.targetPos.height=$(e).outerHeight(),this._containerCalc(e),this.model.associate==ej.Tooltip.Associate.Window?this._browserPosition():this.model.associate==ej.Tooltip.Associate.Axis?this._axisPosition():this.model.associate==ej.Tooltip.Associate.Target&&this._tooltipPosition(this.model.position),this.model.collision!=ej.Tooltip.Collision.None&&this.model.associate==ej.Tooltip.Associate.Target&&this._calcCollision(this.model.position,e)},t.prototype._browserPosition=function(){var e,t;"body"==this.model.containment&&(this.containerSize={height:$(window).innerHeight()||document.documentElement.clientHeight||document.body.clientHeight,width:$(window).innerWidth()||document.documentElement.clientWidth||document.body.clientWidth},e=$.extend(!0,{},this.model.position),t={position:"absolute",left:"auto",top:"auto",bottom:"auto",right:"auto"},ej.isNullOrUndefined(this.tip)||$(this.tip).css({display:"none"}),"right"==this.model.position.target.horizontal?t.right=0:t.left="left"==this.model.position.target.horizontal?0:this.containerSize.width/2-this.tooltipPos.width/2,"top"==this.model.position.target.vertical?t.top=0:"center"==this.model.position.target.vertical?t.top=this.containerSize.height/2-this.tooltipPos.height/2:t.bottom=0,this.model.showShadow&&this._shadowEffect(this.model.showShadow,e),$(this.tooltip).css(t))},t.prototype._tooltipMove=function(e){var t;this.model.closeMode==ej.Tooltip.CloseMode.None&&this.model.enabled&&!(t=this)._isCancel&&(this.model.associate==ej.Tooltip.Associate.MouseFollow?this._mousePosition(e):this.model.associate==ej.Tooltip.Associate.MouseEnter&&(clearTimeout(this.mouseTimer),this.mouseTimer=setTimeout(function(){t.isTrack&&t._mousePosition(e)},300)))},t.prototype._mousePosition=function(e){"touchstart"==e.type?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):"mousemove"==e.type&&(t=e.pageX,i=e.pageY),this.isCollision=!0,this._containerCalc(e.currentTarget);var t,i,n,o,r,s,l=$.extend(!0,{},this.model.position.stem),a=$.extend(!0,{},this.model.position),c={left:0,top:0},h={left:t,top:i},d={left:t,top:i},u=this.containerSize.left,p=this.containerSize.top,f="body"!=this.model.containment?t-$(this.model.containment).offset().left:t,m="body"!=this.model.containment?i-$(this.model.containment).offset().top:i;for(a.target.horizontal=a.target.vertical="center","body"!=this.model.containment&&(c=("static"==$(this.model.containment).css("position")?$(this.model.containment).offsetParent():$(this.model.containment)).offset()),d.left-=c.left,d.top-=c.top;this.isCollision;)if(h=$.extend(!0,{},d),this.model.isBalloon&&("top"==l.vertical||"bottom"==l.vertical)&&this.tipSize.height,n=this.model.isBalloon&&("right"==l.horizontal||"left"==l.horizontal)?10+this.tipSize.width/2:0,o=0!=this.model.tip.adjust.xValue?this.model.tip.adjust.xValue:7,r=0!=this.model.tip.adjust.yValue?this.model.tip.adjust.yValue:10,s=this.model.isBalloon?"center"!=l.horizontal||"center"!=l.vertical?this.model.tip.size.height:0:2,h.left+="right"==l.horizontal?-this.tooltipPos.width:"left"==l.horizontal?0:-this.tooltipPos.width/2,h.top+="bottom"==l.vertical?-this.tooltipPos.height:"top"==l.vertical?0:-this.tooltipPos.height/2,h.left+="center"!=l.vertical?"right"==l.horizontal?n:"left"==l.horizontal?-n:0:0,h.left+="center"==l.vertical?"right"==l.horizontal?-s:"left"==l.horizontal?+(s+o):0:0,h.top+="top"==l.vertical?+(s+r):"bottom"==l.vertical?-s:0,this.targetElement!=e.currentTarget&&(this.targetElement=e.currentTarget,(h.left<u||h.left+this.tooltipPos.width>u+this.containerSize.width)&&(this.positionTooltip.horizontal=f>=this.tooltipPos.width?"right":this.containerSize.width-f>=this.tooltipPos.width?"left":"center"),h.top<p||h.top+this.tooltipPos.height>this.containerSize.height+p)&&(this.positionTooltip.vertical=m>=this.tooltipPos.height?"bottom":this.containerSize.height-m>=this.tooltipPos.height?"top":"center"),this.positionTooltip.horizontal!=l.horizontal||this.positionTooltip.vertical!=l.vertical)this.isCollision=!0,l=$.extend(!0,{},this.positionTooltip);else if(this.isCollision=!1,$(this.tooltip).css({top:h.top+"px",left:h.left+"px",position:"absolute",right:"auto",bottom:"auto"}),a.stem=$.extend(!0,{},this.positionTooltip),this.model.showShadow&&this._shadowEffect(this.model.showShadow,a),this.model.isBalloon&&this._adjustArrow(a),this._showTooltip(),this.model.associate==ej.Tooltip.Associate.MouseEnter&&(this.isTrack=!1),this.model.associate==ej.Tooltip.Associate.MouseFollow&&this.triggerEvents("tracking",{position:this.model.position,event:e}))return},t.prototype._axisPosition=function(){var e,t,i=$.extend(!0,{},this.model.position);"number"==typeof this.model.position.target.horizontal&&(e=this.model.position.target.horizontal.toString()),"number"==typeof this.model.position.target.vertical&&(t=this.model.position.target.vertical.toString()),e=parseInt(e),t=parseInt(t),ej.isNullOrUndefined(this.tip)||$(this.tip).css({display:"none"}),this.model.showShadow&&this._shadowEffect(this.model.showShadow,i),this.model.isBalloon&&this._adjustArrow(i),isFinite(e)&&isFinite(t)&&$(this.tooltip).css({top:t,left:e,position:"absolute"})},t.prototype._tooltipPosition=function(e){var t=$.extend(!0,{},e.stem),i=$.extend(!0,{},e.target),n=$.extend(!0,{},this.targetPos),o="top"===t.vertical||"bottom"===t.vertical?5+this.tipSize.width/2:0,r="right"===t.horizontal||"left"===t.horizontal?10+this.tipSize.width/2:0,s="center"!==t.horizontal?this.model.tip.adjust.xValue:"center"!==t.vertical?this.model.tip.adjust.yValue:0,l=this.model.isBalloon?"center"!==t.horizontal||"center"!==t.vertical?this.model.tip.size.height:0:2;this.model.isBalloon;n.left+="right"===i.horizontal?this.targetPos.width:"left"===i.horizontal?0:this.targetPos.width/2,n.top+="bottom"===i.vertical?this.targetPos.height:"top"===i.vertical?0:this.targetPos.height/2,n.left+="right"===t.horizontal?-this.tooltipPos.width:"left"===t.horizontal?0:-this.tooltipPos.width/2,n.top+="bottom"===t.vertical?-this.tooltipPos.height:"top"===t.vertical?0:-this.tooltipPos.height/2,n.left+="center"!==i.horizontal||"center"===t.vertical?"right"===t.horizontal?-l:"left"===t.horizontal?l:0:0,n.top+="center"===i.horizontal||"center"===t.horizontal?"bottom"===t.vertical?-l:"top"===t.vertical?l:0:0,n.left+="center"===i.horizontal&&"center"!==t.vertical?"right"===t.horizontal?r:"left"===t.horizontal?-r:0:0,n.top+="center"!==i.horizontal&&"center"!==t.horizontal?"top"===t.vertical?-o:"bottom"===t.vertical?o:0:0,this.tooltipPos.left=n.left,this.tooltipPos.top=n.top,this.model.collision===ej.Tooltip.Collision.None&&(this.model.isBalloon&&this._adjustArrow(e),this._shadowEffect(this.model.showShadow,e),$(this.tooltip).css({top:n.top+"px",left:n.left+"px",position:"absolute"}))},t.prototype._calcCollision=function(e,t){var e=$.extend(!0,{},e),i=$.extend(!0,{},e),n=this.model.tip.size.height,o=!0,r="body"!=this.model.containment?$(t).offset().left-$(this.model.containment).offset().left:$(t).offset().left,t="body"!=this.model.containment?$(t).offset().top-$(this.model.containment).offset().top:$(t).offset().top,s={topSpace:t,rightSpace:this.containerSize.width-(r+this.targetPos.width),bottomSpace:this.containerSize.height-(t+this.targetPos.height),leftSpace:r,centerRight:this.containerSize.width-(r+this.targetPos.width/2),centerLeft:r+this.targetPos.width/2,centerTop:t+this.targetPos.height/2,centerBottom:this.containerSize.height-(t+this.targetPos.height/2),tooltipWidth:this.tooltipPos.width+n,tooltipHeight:this.tooltipPos.height+n};if(this.model.collision===ej.Tooltip.Collision.Fit)this._collisionFit(e,s);else{for(;o;)(i=this._collisionFlip(i,s)).target.horizontal!=e.target.horizontal||i.target.vertical!=e.target.vertical||i.stem.horizontal!=e.stem.horizontal||i.stem.vertical!=e.stem.vertical?(this._tooltipPosition(i),e=$.extend(!0,{},i)):o=!1;o||(this.model.collision==ej.Tooltip.Collision.FlipFit?this._collisionFit(i,s):(this._adjustArrow(i),this._shadowEffect(this.model.showShadow,i),$(this.tooltip).css({top:this.tooltipPos.top+"px",left:this.tooltipPos.left+"px",position:"absolute"})))}},t.prototype._collisionFlip=function(e,t){var i=$.extend(!0,{},this.tooltipPos),n=$.extend(!0,{},e),o=$(this.model.containment).scrollLeft(),r=$(this.model.containment).scrollTop(),s=this.containerSize.left,l=this.containerSize.top;return(i.left+i.width>s+this.containerSize.width+o||i.left<s)&&("center"!=e.target.horizontal?n.target.horizontal=t.leftSpace>=t.tooltipWidth?"left":t.rightSpace>=t.tooltipWidth?"right":"center":n.stem.horizontal=t.centerLeft>=t.tooltipWidth?"right":t.centerRight>=t.tooltipWidth?"left":"center"),i.top<l&&(n.target.vertical=t.bottomSpace>=t.tooltipHeight?"bottom":"center"),i.top+i.height>this.containerSize.height+r+l&&(n.target.vertical=t.topSpace>=t.tooltipHeight?"top":"center"),n.target.horizontal==e.target.horizontal&&n.target.vertical==e.target.vertical||(n.stem.horizontal="center"==n.target.horizontal?t.centerLeft>=t.tooltipWidth?"right":t.centerRight>=t.tooltipWidth?"left":"center":"right"==n.target.horizontal?"left":"right"),n.target.vertical==e.target.vertical&&n.target.horizontal==e.target.horizontal||(n.stem.vertical="center"==n.target.vertical?t.centerTop>=t.tooltipHeight||!(t.centerBottom>=t.tooltipHeight)&&t.centerTop>t.centerBottom?"bottom":"top":"top"==n.target.vertical?"bottom":"top"),n},t.prototype._collisionFit=function(e,t){var i=$.extend(!0,{},this.tooltipPos),n=!1,o=!1,r=1,s=1,l=$(this.model.containment).scrollLeft(),a=$(this.model.containment).scrollTop(),c=this.containerSize.left,h=this.containerSize.top;(i.left<c||i.left+i.width>this.containerSize.width+l+c)&&(r=i.left<c?c:i.left+i.width>this.containerSize.width+l+c?i.left-(i.left+i.width-(this.containerSize.width+c)):1,n=!0),(i.top<h||i.top+i.height>this.containerSize.height+a+h)&&(s=i.top<h?h:i.top+i.height>this.containerSize.height+a+h?i.top-(i.top+i.height-(this.containerSize.height+h)):1,o=!0),$(this.tooltip).css({top:1!=s?s+"px":i.top+"px",left:1!=r?r+"px":i.left+"px",position:"absolute"}),this._adjustArrow(e),l={left:this.arrowValue.left,top:this.arrowValue.top,height:this.model.tip.size.height,width:this.model.tip.size.width,display:$(this.tip).css("display")},this.tooltipPos.top=s=1!=s?s:i.top,this.tooltipPos.left=r=1!=r?r:i.left,c=$(this.tooltip).width(),a=$(this.tooltip).height(),(n||o&&"none"!=l.display)&&(this.model.isBalloon&&(n&&(this.arrowValue.left=this._horizontalAdjustment(e,t)),o)&&(this.arrowValue.top=this._verticalAdjustment(e,t)),this.arrowValue.left==-this.model.tip.size.height||this.arrowValue.left==c||this.arrowValue.top==-this.model.tip.size.height||this.arrowValue.top==a?$(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",display:"block"}):$(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",display:"none"})),this._shadowEffect(this.model.showShadow,e)},t.prototype._horizontalAdjustment=function(e,t){var i,n={left:this.arrowValue.left,top:this.arrowValue.top};return $(this.tooltip).css({display:"block"}),e.target.horizontal,i=this.model.tip.size.height,e=("center"==e.target.horizontal||"left"!=e.stem.horizontal)&&"center"!=e.target.horizontal&&"right"==e.stem.horizontal?$(this.tip).offset().left+i:$(this.tip).offset().left,$(this.tooltip).css({display:"none"}),e>t.leftSpace&&e+i<t.leftSpace+this.targetPos.width||(e>t.leftSpace+this.targetPos.width||e<t.leftSpace)&&(n.left=t.leftSpace+this.targetPos.width/2-parseInt(this.tooltipPos.left.toString())),n.left},t.prototype._verticalAdjustment=function(e,t){var i,n={left:this.arrowValue.left,top:this.arrowValue.top,height:this.model.tip.size.height,width:this.model.tip.size.width,display:this.arrowValue.display};return $(this.tooltip).css({display:"block"}),e.target.horizontal,i=this.model.tip.size.height,e="center"==e.target.horizontal&&"top"==e.stem.vertical?$(this.tip).offset().top:$(this.tip).offset().top+i,$(this.tooltip).css({display:"none"}),e>t.topSpace&&e<t.topSpace+this.targetPos.height||(e<t.topSpace||e+i>t.topSpace+this.targetPos.height)&&(n.top=t.topSpace+this.targetPos.height/2-parseInt(this.tooltipPos.top.toString())),n.top},t.prototype._createHeader=function(){null!=this.model.title&&(ej.isNullOrUndefined(this.tooltipTitle)&&this._createTitle(),(ej.isNullOrUndefined(this.tooltipContent)?$(this.tooltipHeader).appendTo(this.tooltipInter):$(this.tooltipHeader).insertBefore(this.tooltipContent)).addClass("e-tooltipHeader")),this.model.closeMode==ej.Tooltip.CloseMode.Sticky&&this._iconRender()},t.prototype._hideTooltip=function(){var e;this._isHidden=!0,e=0!=this.model.animation.speed?this.model.animation.speed:this.model.animation.effect==ej.Tooltip.Effect.Slide?200:this.model.animation.effect==ej.Tooltip.Effect.Fade?800:0,1!=this.model.enabled||"block"!=$(this.tooltip).css("display")||this.triggerEvents("beforeClose",{})||(this.model.animation.effect==ej.Tooltip.Effect.Fade?$(this.tooltip).fadeOut(e):this.model.animation.effect==ej.Tooltip.Effect.Slide?$(this.tooltip).slideUp(e):$(this.tooltip).css({display:"none"}),"none"==$(this.tooltip).css("display")&&$(this.tooltip).attr("aria-hidden","true"),this.triggerEvents("close",{}))},t.prototype._showTooltip=function(){var e;this._isHidden&&(e=0!=this.model.animation.speed?this.model.animation.speed:this.model.animation.effect==ej.Tooltip.Effect.Slide?200:this.model.animation.effect==ej.Tooltip.Effect.Fade?800:0,"none"==$(this.tooltip).css("display"))&&1==this.model.enabled&&(this._isHidden=!1,this.model.animation.effect==ej.Tooltip.Effect.Fade?$(this.tooltip).fadeIn(e):this.model.animation.effect==ej.Tooltip.Effect.Slide?$(this.tooltip).slideDown(e):$(this.tooltip).css({display:"block"}),"block"==$(this.tooltip).css("display")&&$(this.tooltip).attr("aria-hidden","false").css({zIndex:ej.getMaxZindex()+1}),this.triggerEvents("open",{}))},t.prototype._tooltipAuto=function(){var e=this;this.timer=setTimeout(function(){e._hideTooltip()},e.model.autoCloseTimeout)},t.prototype._beforeOpenTooltip=function(e){this.positionTooltip=$.extend(!0,{},this.model.position.stem),this.positionTarget=$.extend(!0,{},this.model.position.target),this.targetElement=this.element,ej.isNullOrUndefined(this.model.target)||ej.isNullOrUndefined($(e.currentTarget).attr("data-content"))||(this.model.content=$(e.currentTarget).attr("data-content"),this._setContent(this.model.content))},t.prototype._targetHover=function(e){this.model.enabled&&(this._isHidden?this.triggerEvents("beforeOpen",{event:e})?this._isCancel=!0:(this._isCancel=!1,this._beforeOpenTooltip(e),this.model.associate!=ej.Tooltip.Associate.MouseEnter&&this.model.associate!=ej.Tooltip.Associate.MouseFollow?(ej.isNullOrUndefined(this.model.target)?this._positionElement(this.element):this._positionElement(e.currentTarget),$(this.tooltip).stop(!0,!0),clearTimeout(this.timer),this._showTooltip(),this.model.closeMode==ej.Tooltip.CloseMode.Auto&&this._tooltipAuto(),"click"==e.type?this.triggerEvents("click",{event:e}):this.triggerEvents("hover",{event:e})):this.isTrack=!0):ej.isNullOrUndefined(this.model.target)||this._positionElement(e.currentTarget))},t.prototype._onMouseOut=function(){this.model.enabled&&!this._isHidden&&(this.model.closeMode==ej.Tooltip.CloseMode.None&&this._hideTooltip(),clearTimeout(this.mouseTimer))},t.prototype._onTooltipMouseEnter=function(){this.model.enabled&&this.model.animation.effect==ej.Tooltip.Effect.None&&$(this.tooltip).css({display:"block"})},t.prototype._onTooltipMouseLeave=function(){this.model.enabled&&this.model.animation.effect==ej.Tooltip.Effect.None&&this.model.closeMode==ej.Tooltip.CloseMode.None&&$(this.tooltip).css({display:"none"})},t.prototype._docTouchEndHandler=function(e){$(e.target).closest(".e-tooltip").length||this.model.closeMode!=ej.Tooltip.CloseMode.None||this._hideTooltip()},t.prototype._keyDown=function(e){var t=e.keyCode||e.which||e.charCode;this.model.enabled&&27===t&&(e.preventDefault(),this._hideTooltip())},t);function t(e,t){return i.call(this),this._rootCSS="e-tooltip",this._setFirst=!1,this.PluginName="ejTooltip",this.id="null",this.model=null,this.defaults={height:"auto",width:"auto",enabled:!0,content:null,containment:"body",target:null,title:null,closeMode:"none",autoCloseTimeout:4e3,position:{stem:{horizontal:"center",vertical:"bottom"},target:{horizontal:"center",vertical:"top"}},associate:"target",collision:"flipfit",showShadow:!1,cssClass:null,animation:{effect:"none",speed:0},isBalloon:!0,showRoundedCorner:!1,enableRTL:!1,allowKeyboardNavigation:!0,tip:{size:{width:20,height:10},adjust:{xValue:0,yValue:0}},trigger:"hover"},this.dataTypes={enabled:"boolean",closeMode:"enum",autoCloseTimeout:"number",trigger:"enum",position:{stem:"data",target:"data"},associate:"enum",collision:"enum",showShadow:"boolean",animation:{effect:"enum",speed:"number"},isBalloon:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",allowKeyboardNavigation:"boolean",tip:{size:{width:"number",height:"number"},adjust:{xValue:"number",yValue:"number"}}},this.isTrack=!0,this._isCancel=!1,this._isHidden=!0,this.arrowValue={left:0,top:0,width:0,height:0,display:null},this.tooltipPos={width:0,height:0,left:0,top:0,bottom:0,right:0,position:"absolute"},this.targetPos={width:0,height:0,left:0,top:0,bottom:0,right:0,position:"absolute"},this.mouseTimer=null,this.positionTarget=null,this.positionTooltip=null,this.containerSize=null,this._createTitle=function(){this.tooltipTitle=ej.buildTag("div.e-def e-header"," ",{},{}),this.tooltipHeader=ej.buildTag("div"," ",{},{}),$(this.tooltipTitle).html(this.model.title).appendTo(this.tooltipHeader)},e&&(e=e.jquery?e:$("#"+e)).length?$(e).ejTooltip(t).data(this.PluginName):void 0}window.ej.widget("ejTooltip","ej.Tooltip",new e),window.ejTooltip=null,ej.Tooltip.CloseMode={Auto:"auto",None:"none",Sticky:"sticky"},ej.Tooltip.Effect={Slide:"slide",Fade:"fade",None:"none"},ej.Tooltip.Trigger={Hover:"hover",Click:"click",Focus:"focus"},ej.Tooltip.Collision={Flip:"flip",FlipFit:"flipfit",None:"none",Fit:"fit"},ej.Tooltip.Associate={Window:"window",MouseFollow:"mousefollow",MouseEnter:"mouseenter",Target:"target",Axis:"axis"}}),function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min","./../common/ej.globalize.min","./../common/ej.scroller.min","./ej.tooltip.min","./../common/ej.draggable.min","./ej.dialog.min"],e):e()}(function(){var d,h,s;d=jQuery,(h=Syncfusion).widget("ejUploadbox","ej.Uploadbox",{element:null,_addToPersist:[""],model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-uploadbox",defaults:{buttonText:{browse:"Browse",upload:"Upload",cancel:"Cancel",close:"Close"},width:"100px",height:"35px",htmlAttributes:{},dialogPosition:{X:"",Y:""},dialogText:{title:"Upload Box",name:"Name",size:"Size",status:"Status"},customFileDetails:{title:!0,name:!0,size:!0,status:!0,action:!0},dialogAction:{modal:!1,closeOnComplete:!1,drag:!0,content:null},locale:"en-US",asyncUpload:!0,pushFile:null,enabled:!0,multipleFilesSelection:!0,autoUpload:!1,showFileDetails:!0,fileSize:31457280,extensionsAllow:"",extensionsDeny:"",saveUrl:"",removeUrl:"",uploadName:"",cssClass:"",dropAreaText:"Drop files or click to upload",allowDragAndDrop:!1,showBrowseButton:!0,showRoundedCorner:!0,dropAreaHeight:"100%",dropAreaWidth:"100%",enableRTL:!1,create:null,fileSelect:null,begin:null,beforeSend:null,cancel:null,inProgress:null,success:null,complete:null,remove:null,error:null,destroy:null},dataTypes:{buttonText:"data",dialogText:"data",disbled:"boolean",customFileDetails:"data",pushFile:"data",dialogAction:"data",multipleFilesSelection:"boolean",autoUpload:"boolean",showFileDetails:"boolean",allowDragAndDrop:"boolean",showBrowseButton:"boolean",showRoundedCorner:"boolean",fileSize:"number",extensionsAllow:"string",extensionsDeny:"string",saveUrl:"string",removeUrl:"string",cssClass:"string",enableRTL:"boolean",htmlAttributes:"data"},disable:function(){this._changeState(!1)},enable:function(){this._changeState(!0)},_changeState:function(e){e?d(this.control).removeClass("e-disable"):d(this.control).addClass("e-disable"),this.model.enabled=e,d(this._currentElement).find(".e-uploadinput")[0].disabled=!e,this.diaObj&&(this.diaObj.option("beforeClose",this._onBeforeClose),this.diaObj.setModel({enabled:e,allowDraggable:e}))},refresh:function(){this.diaObj&&(this.diaObj.isOpened()?this.diaObj.close():this._uploadFileListDelete())},_updateLocalConstant:function(){this._localizedLabels=h.getLocalizedConstants("ej.Uploadbox",this.model.locale)},_init:function(){this.s=h.browserInfo(),this._updateLocalConstant(),this._initialize(),this._wireEvents(),this.model.asyncUpload||this._initObjectsSyncUpload(),this._controlStatus(this.model.enabled),"en-US"==this.model.locale?this._buttonText(this.model.buttonText):this._setLocale(),this._roundedCorner(this.model.showRoundedCorner)},_setModel:function(e){for(var t in e){switch(t){case"buttonText":this._buttonText(e[t]);break;case"htmlAttributes":this._addAttr(e[t]);break;case"dialogText":this._dialogText(e[t]);break;case"cssClass":this._setSkin(e[t]);break;case"enableRTL":this._setRTL(e[t]);break;case"enabled":this._controlStatus(e[t]);break;case"locale":this.model.locale=e[t],this._updateLocalConstant(),this._setLocale();break;case"height":this.model.height=e[t],this._setHeight(this.model.height);break;case"width":this.model.width=e[t],this._setWidth(this.model.width);break;case"dialogPosition":this.model.dialogPosition=e[t],this._dialogPosition();break;case"allowDragAndDrop":this.model.allowDragAndDrop=e[t],this._dragAndDrop();break;case"dropAreaText":this.model.dropAreaText=e[t],this._dropAreaText(this.model.dropAreaText);break;case"showBrowseButton":this.model.showBrowseButton=e[t],this._hideBrowseButton(),this._refreshUploadDialogParent();break;case"showRoundedCorner":this._roundedCorner(e[t]);break;case"dropAreaHeight":this.model.dropAreaHeight=e[t],this._setSize();break;case"dropAreaWidth":this.model.dropAreaWidth=e[t],this._setSize();break;case"pushFile":this.model.pushFile=e[t],null!=this.model.pushFile&&"Xhr"==this.UploadType&&this.model.asyncUpload&&(this._files=this.model.pushFile),this._onXhrSelect();break;case"multipleFilesSelection":this.model.multipleFilesSelection=e[t],0==(-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"))&&(this.model.multipleFilesSelection?this._currentElement.find(".e-uploadinput").attr("multiple","multiple"):this._currentElement.find(".e-uploadinput").removeAttr("multiple"));break;case"uploadName":this.model.uploadName=e[t],this.inputupload.attr("name",this.model.uploadName),this.refresh();break;case"autoUpload":this.model.autoUpload=e[t];break;case"showFileDetails":this.model.showFileDetails=e[t],this.refresh();break;case"fileSize":this.model.fileSize=e[t];break;case"extensionsAllow":this.model.extensionsAllow=e[t],this._currentElement.find(".e-uploadinput").attr("accept",e[t]);break;case"extensionsDeny":this.model.extensionsDeny=e[t];break;case"saveUrl":this.model.saveUrl=e[t];break;case"removeUrl":this.model.removeUrl=e[t]}this._currentElement=this.model.allowDragAndDrop&&!this.model.showBrowseButton?this.dragWrapper:this.element}},_controlStatus:function(e){1!=e?this.disable():this.enable()},_setRTL:function(e){e?this._currentElement.addClass("e-rtl"):this._currentElement.removeClass("e-rtl"),this.updialog&&this.updialog.ejDialog({enableRTL:e})},_getLocalizedLabels:function(e){var t="",i="browse"==e||"upload"==e||"cancel"==e||"close"==e?"buttonText":"dialogText";return this._localizedLabels[e]?t=this._localizedLabels[e]:this._localizedLabels[i][e]?t=this._localizedLabels[i][e]:h.Uploadbox.Locale["en-US"][e]?t=h.Uploadbox.Locale["en-US"][e]:h.Uploadbox.Locale["en-US"][i][e]&&(t=h.Uploadbox.Locale["en-US"][i][e]),t},_setLocale:function(){this._buttonText(this._localizedLabels.buttonText),this._dialogText(this._localizedLabels.dialogText),this._dropAreaText(this._localizedLabels.dropAreaText)},_buttonText:function(e){d.extend(this.model.buttonText,e),this.buttondiv.val(this.model.buttonText.browse),this.updialog&&(this.updialog.find(".e-action-container .e-uploadbtn").html(this.model.buttonText.upload),this.updialog.find(".e-action-container .e-uploadclosebtn").html(this.model.buttonText.cancel))},_dialogText:function(e){d.extend(this.model.dialogText,e),this.diaObj!=s&&this.diaObj.option("title",this.model.dialogText.title),this.updialog&&(this.updialog.find(".e-head-name").html(this.model.dialogText.name),this.updialog.find(".e-head-size").html(this.model.dialogText.size),this.updialog.find(".e-head-status").html(this.model.dialogText.status))},_destroy:function(){this._currentElement.hasClass("e-uploadbox")&&(this._currentElement.removeClass("e-uploadbox e-widget"),this._currentElement.empty(),d(this.dragWrapper).after(this._currentElement),this.element.css({width:"",height:""}),this._bindResizeHandler(!1),this.dragWrapper.remove())},_setSkin:function(e){this._currentElement.removeClass(this.model.cssClass),this._currentElement.addClass(e),this.diaObj&&this.diaObj.setModel({cssClass:this.model.cssClass}),this.model.allowDragAndDrop&&this.dragWrapper.addClass(e)},_initialize:function(){this.control=this.element[0],this.element.addClass("e-widget "+this.model.cssClass),this.innerdiv=h.buildTag("div.e-selectpart e-select e-box"),this.element.append(this.innerdiv),this.buttondiv=h.buildTag("input.e-inputbtn e-btn#"+this.control.id+"_SelectButton","",{},{type:"button","data-role":"none",value:this._getLocalizedLabels("browse")}),this.inputupload=h.buildTag("input.e-uploadinput","",{},{type:"file","data-role":"none",name:""!=this.model.uploadName?this.model.uploadName:this.control.id}).attr("accept",this.model.extensionsAllow),this.model.multipleFilesSelection&&0==(-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"))&&this.inputupload.attr("multiple","multiple"),this.innerdiv.append(this.buttondiv),this.innerdiv.append(this.inputupload),this.model.allowDragAndDrop&&this._dragAndDrop(!0),this._Selector=this.buttondiv[0],this._currentElement=this.model.allowDragAndDrop&&!this.model.showBrowseButton?this.dragWrapper:this.element,this._setRTL(this.model.enableRTL),this._addAttr(this.model.htmlAttributes),this.Uploadframes=[],this.UploadForms=[],this._successFiles=[],this.UploadType=this._isXhrSupported()?"Xhr":"IFrame",""!=this.model.width&&this._setWidth(this.model.width),""!=this.model.height&&this._setHeight(this.model.height),this._hideBrowseButton()},_refreshUploadDialogParent:function(){this.diaObj&&this.diaObj.setModel({target:null!=this.model.dialogAction.content&&""!=this.model.dialogAction.content?this.model.dialogAction.content:!this.model.showBrowseButton&&this.model.allowDragAndDrop?"#"+this.control.id+"_dragWrapper":"#"+this.control.id})},_hideBrowseButton:function(){!this.model.showBrowseButton&&this.model.allowDragAndDrop?(this.element.addClass("e-browse-hide"),this._dropAreaSize()):this.element.hasClass("e-browse-hide")&&(this.element.removeClass("e-browse-hide"),this.element.width(this.model.width),this.element.height(this.model.height))},_setSize:function(){this.model.allowDragAndDrop&&(""!=this.model.dropAreaWidth&&this.dragWrapper.outerWidth(this.model.dropAreaWidth),""!=this.model.dropAreaHeight&&this.dragWrapper.outerHeight(this.model.dropAreaHeight),this.model.showBrowseButton||this._dropAreaSize())},_dropAreaSize:function(){""!=this.model.dropAreaWidth&&this.element.width(this.model.dropAreaWidth),""!=this.model.dropAreaHeight&&this.element.height(this.model.dropAreaHeight)},_addAttr:function(e){var i=this;d.map(e,function(e,t){"class"==t?i.element.addClass(e):"disabled"==t&&"disabled"==e?i.disable():i.element.attr(t,e)})},_dragAndDrop:function(){this.model.allowDragAndDrop?(this.dragWrapper=h.buildTag("div.e-drag-wrapper e-widget-wrapper e-upload-box "+this.model.cssClass+"#"+this.control.id+"_dragWrapper"),this.innerWrapper=h.buildTag("div.e-drag-container"),this._spanTag=h.buildTag("span.e-drag-text").html(("en-US"==this.model.locale?this.model:h.Uploadbox.Locale[this.model.locale]).dropAreaText),this.innerWrapper.append(this._spanTag),this.innerWrapper.insertBefore(this.element),this.dragWrapper.insertBefore(this.element),this.innerWrapper.append(this.element),this.dragWrapper.append(this.innerWrapper),this._bindDragEvents(),this._refreshUploadDialogParent(),this._setSize()):(this._refreshUploadDialogParent(),this.element.insertBefore(this.dragWrapper),this.dragWrapper.remove(),this._unBindDragEvents()),this._hideBrowseButton()},_resizeHandler:function(){this.diaObj&&(750<d(window).width()?(d(this.updialog).closest(".e-dialog.e-uploadbox").removeClass("e-mobile-upload"),this.diaObj.setModel({width:this._getDialogContentWidth(),height:"auto"})):(d(this.updialog).closest(".e-dialog.e-uploadbox").addClass("e-mobile-upload"),this.diaObj.setModel({width:250,height:"auto"})),this.diaObj.scroller)&&this.diaObj.scroller.setModel({height:"auto"})},_getDialogContentWidth:function(){var e=0;return this.model.customFileDetails.name&&(e+=200),this.model.customFileDetails.size&&(e+=100),this.model.customFileDetails.status?e+=200:this.model.customFileDetails.action&&(e+=45),e+5},_dropAreaText:function(e){this.model.allowDragAndDrop&&this._spanTag.html(e)},_bindDragEvents:function(){this._on(this.dragWrapper,"dragover",this._onDragOverHandler),this._on(this.dragWrapper,"drop",this._onDropHandler)},_unBindDragEvents:function(){this._off(this.dragWrapper,"dragover",this._onDragOverHandler),this._off(this.dragWrapper,"drop",this._onDropHandler)},_setWidth:function(e){this.element.css("width",e)},_setHeight:function(e){this.element.height(e)},_dialogPosition:function(){var e;this.diaObj&&(this.diaObj.model.content!="#"+this.control.id&&this.diaObj.model.content!="#"+this.control.id+"_dragWrapper"||""!=this.model.dialogPosition.X||""!=this.model.dialogPosition.Y||(e=parseInt(this.diaObj.wrapper.css("left"))-(this.diaObj.wrapper.outerWidth()-d(this.diaObj.model.content).outerWidth())/2,this.model.dialogPosition.X=0<parseInt(e)?e:parseInt(this.diaObj.wrapper.css("left")),this.model.dialogPosition.Y=parseInt(this.diaObj.wrapper.css("top"))+d(this.diaObj.model.content).outerHeight()),""!=this.model.dialogPosition.X)&&""!=this.model.dialogPosition.Y&&this.diaObj.setModel({position:this.model.dialogPosition})},_roundedCorner:function(e){e?this.innerdiv.addClass("e-corner"):this.innerdiv.hasClass("e-corner")&&this.innerdiv.removeClass("e-corner")},_wireEvents:function(){this._on(this.element,"click",this._disableclickselect),this._on(this.element,"keydown",this._keydownselect),this._bindInputChangeEvent(),this._bindResizeHandler(!0)},_bindResizeHandler:function(e){e?d(window).on("resize",d.proxy(this._resizeHandler,this)):d(window).off("resize",d.proxy(this._resizeHandler,this))},_keydownselect:function(e){this.element.hasClass("e-disable")||13!=e.keyCode||this.diaObj&&this.diaObj.isOpened()||this.element.find(".e-uploadinput").click()},_onDropHandler:function(e){if("msie"===h.browserInfo().name&&"8.0"===h.browserInfo().version||"9.0"===h.browserInfo().version||this._currentElement.hasClass("e-disable"))return!1;e.stopPropagation(),e.preventDefault(),this._files=this._getAllFileInfo(e.originalEvent.dataTransfer.files),this._fileSelect(e)},_onDragOverHandler:function(e){if(this._currentElement.hasClass("e-disable"))return!1;e.stopPropagation(),e.preventDefault()},_disableclickselect:function(e){this._currentElement.hasClass("e-disable")&&e.preventDefault()},_bindInputChangeEvent:function(){this._on(this.inputupload,"change",this._inputValueChange)},_inputValueChange:function(e){return this._files=this._getInputFileInfo(d(e.target)),this._fileSelect(e)},_fileSelect:function(e){if(this._trigger("fileSelect",{files:this._files}))return this._resetFileInput(this._currentElement.find(".e-uploadinput")),!1;this._fileUpload(e)},_fileUpload:function(e){var t=this._isAllowed(this._files);this._files=t.files,this.model.asyncUpload?null!=t.files&&0<t.files.length&&("Xhr"==this.UploadType?this._onXhrSelect(e):this._onSelectIFrame(e),this._resetFileInput(this._currentElement.find(".e-uploadinput"))):t.status&&this._onSelectSyncUpload(e),this._renderTooltip()},__uploadButtonClick:function(e){this._currentElement.hasClass("e-disable")||(this._currentElement.find(".e-uploadbtn"),this._currentElement.find(".e-uploadbtn").hasClass("e-disable")?e.preventDefault():"Xhr"==this.UploadType?this._xhrOnUploadButtonClick(e):this._onUploadButtonClickIFrame(e),d(e.target).attr("disabled","disabled").addClass("e-disable"))},_actionClick:function(e){var t,i;this._currentElement.hasClass("e-disable")||(i=(t=d(e.target)).closest(".e-upload-file"),this._file=d(i).data("file"),t.hasClass("e-delete")?"Xhr"==this.UploadType?this._xhrOnRemove(e,i):this._onRemoveIFrame(e,i):t.hasClass("e-file-cancel")?(this._trigger("cancel",{fileStatus:this._file}),this.updialog.find(".e-file-cancel").hasClass("e-disable")?e.preventDefault():this.model.asyncUpload?(this._removeFile(d(i).data("file")),"Xhr"==this.UploadType?this._xhrOnCancel(e,i):this._onCancelIFrame(e,i)):this._onCancelSyncUpload(e,i)):t.hasClass("e-reload")&&("Xhr"==this.UploadType?this._xhrOnRetry(e,i):this._onRetryIFrame(e,i)))},_removeFileEntry:function(e){e.remove()},_removeFile:function(e){for(var t=[],i=0;i<this._files.length;i++)this._files[i]!=e&&t.push(this._files[i]);this._files=t},_isFileUpload:function(e){return!this.model.customFileDetails.action||d(e).find("div.e-icon").is(".e-file-cancel")},_isXhrSupported:function(){return!("msie"==this.s.name&&parseInt(this.s.version)<9||"safari"==this.s.name&&"chrome"==this.s.name&&"536"==this.s.version)&&"undefined"!=typeof FormData&&"undefined"!=typeof File},_getFileName:function(e){return d.map(this._getAllFileInfo(e),function(e){return e.name}).join(", ")},_getFileSize:function(e){var t=this;return d.map(this._getAllFileInfo(e),function(e){return t._formatSize(e.size)}).join(", ")},_pushFile:function(e,t){var i,n,o,r,s=d("<div class='e-head-content'></div>"),l=d("<div class='e-file-head e-head-name'>"+this._getLocalizedLabels("name")+"</div>"),a=d("<div class='e-file-head e-head-size'>"+this._getLocalizedLabels("size")+"</div>"),c=d("<div class='e-file-head e-head-status'>"+this._getLocalizedLabels("status")+"</div>");for(this.model.customFileDetails.name&&d(l).appendTo(s),this.model.customFileDetails.size&&d(a).appendTo(s),this.model.customFileDetails.status&&d(c).appendTo(s),(filedialog=this.updialog)&&0!=filedialog.length?this.model.showFileDetails&&(this.updialog&&this.updialog.find(".e-uploadbtn").removeAttr("disabled").removeClass("e-disable"),this.diaObj.open()):(this.updialog=h.buildTag("div.uploaddialog#"+this.element[0].id+"_dialog","",{},{title:this._getLocalizedLabels("title")}),DialogContentContainer=this.model.allowDragAndDrop&&!this.model.showBrowseButton?(this.dragWrapper.append(this.updialog),"#"+this.control.id+"_dragWrapper"):(this.element.append(this.updialog),"#"+this.control.id)),i=this.updialog.find(".e-ul"),d(this.updialog.find(".e-head-content"))&&d(this.updialog.find(".e-head-content")).replaceWith(s),0==i.length&&(s.appendTo(this.updialog),i=h.buildTag("ul.e-ul").appendTo(this.updialog)),0<d(this.updialog).find(".e-file-upload").length&&d(this.updialog).find(".e-file-upload").remove(),fileListActions=h.buildTag("div.e-file-upload").appendTo(this.updialog).append(this.model.autoUpload||!this.model.asyncUpload?d(h.buildTag("div.e-action-container")).addClass("sync"):h.buildTag("div.e-action-container")),dialogActions=h.buildTag("button.e-uploadclosebtn e-btn e-select",this._getLocalizedLabels("cancel"),{},{type:"button","data-role":"none"}).appendTo(d(this.updialog).find(".e-action-container")),this.model.showRoundedCorner&&dialogActions.addClass("e-corner"),this._on(dialogActions,"click",this._dialogclose),this._on(dialogActions,"keydown",this._keydownDialogClose),l=null!=this.model.dialogAction.content&&""!=this.model.dialogAction.content?this.model.dialogAction.content:DialogContentContainer,this.updialog.ejDialog({showOnInit:!1,closeIconTooltip:this._getLocalizedLabels("closeToolTip"),minWidth:240,width:d(window).width()<750?250:this._getDialogContentWidth(),height:"auto",cssClass:"e-uploadbox "+this.model.cssClass,close:d.proxy(this._uploadFileListDelete,this),enableRTL:this.model.enableRTL,target:l,enableResize:!1,allowDraggable:this.model.dialogAction.drag,enableModal:!!this.model.asyncUpload&&this.model.dialogAction.modal,showHeader:this.model.customFileDetails.title,showRoundedCorner:this.model.showRoundedCorner}),d(window).width()<750?d(this.updialog).closest(".e-dialog.e-uploadbox").addClass("e-mobile-upload"):d(this.updialog).closest(".e-dialog.e-uploadbox").removeClass("e-mobile-upload"),this.diaObj=this.updialog.data("ejDialog"),""!=this.model.cssClass&&this.diaObj.setModel({cssClass:this.model.cssClass}),this._dialogPosition(),this.model.multipleFilesSelection||this.updialog.find(".e-ul>.e-upload-file").remove(),o=0;o<e.length;o++)n=d("<li class='e-upload-file'></li>").appendTo(i).data(t),addedlist=d("<div class='e-file-list'></div>"),addedfilename=d("<div class='e-file-progress e-file-view'><div class='e-file-name e-file-view'><span class='e-file-name-txt'>"+e[o].name+"</span></div>"),r="<div class='e-file-size e-file-view'><span class='e-file-name-txt'>"+this._formatSize(e[o].size)+"</span></div>",addedfilestatus=d("<div class='e-file-percentage e-file-view'><div class='e-file-progress-bar'><div class='e-file-progress-status'></div></div></div>"),addedfileaction=d("<div class='e-action-perform'><div class='e-icon e-file-view'></div></div>"),this.model.customFileDetails.name&&d(addedfilename).appendTo(addedlist),this.model.customFileDetails.size&&(0==this._getFileSize(e[o]).toString().toLowerCase().match("0.0kb").length||null!=e[o].size?d(r).appendTo(addedlist):d(this.updialog).find(".e-head-size").remove()),this.model.customFileDetails.status&&d(addedfilestatus).appendTo(addedlist),this.model.customFileDetails.action&&(d(addedfileaction).appendTo(addedlist),r="cancel",addedlist.find(".e-icon").remove().addClass(r.toString()),r=h.buildTag("div.e-icon e-file-cancel","",{},{"data-content":this._getLocalizedLabels("cancelToolTip")}),addedlist.find(".e-action-perform").append(r),this._on(r,"click",this._actionClick)),d(addedlist).appendTo(n);return this.model.showFileDetails&&this.diaObj.open(),this._buttonText(this.model.buttonText),this._dialogText(this.model.dialogText),n},_keydownDialogClose:function(e){this._currentElement.hasClass("e-disable")||13==e.keyCode&&this._dialogclose()},_pushFileDetails:function(e){var t,i,n=d("<div class='e-head-content'></div>"),o=d("<div class='e-file-head e-head-name'>"+this._getLocalizedLabels("name")+"</div>"),r=d("<div class='e-file-head e-head-size'>"+this._getLocalizedLabels("size")+"</div>"),s=d("</div><div class='e-file-head e-head-status'>"+this._getLocalizedLabels("status")+"</div>");return this.model.customFileDetails.name&&d(o).appendTo(n),this.model.customFileDetails.size&&d(r).appendTo(n),this.model.customFileDetails.status&&d(s).appendTo(n),(filedialog=(o=this).updialog)&&0!=filedialog.length?this.model.showFileDetails&&(DialogContentContainer="#"+this.control.id,this.updialog&&this.updialog.find(".e-uploadbtn").removeAttr("disabled").removeClass("e-disable"),o.diaObj.open()):(this.updialog=h.buildTag("div.uploaddialog#"+this.element[0].id+"_dialog","",{},{title:this._getLocalizedLabels("title")}),DialogContentContainer=this.model.allowDragAndDrop&&!this.model.showBrowseButton?(this.dragWrapper.append(this.updialog),"#"+this.control.id+"_dragWrapper"):(this.element.append(this.updialog),"#"+this.control.id)),r=this.updialog.find(".e-ul"),d(this.updialog.find(".e-head-content"))&&d(this.updialog.find(".e-head-content")).replaceWith(n),0==r.length&&(n.appendTo(this.updialog),r=h.buildTag("ul.e-ul").appendTo(this.updialog)),0<d(this.updialog).find(".e-file-upload").length&&d(this.updialog).find(".e-file-upload").remove(),fileListActions=h.buildTag("div.e-file-upload").appendTo(this.updialog).append(this.model.autoUpload||!this.model.asyncUpload?d(h.buildTag("div.e-action-container")).addClass("sync"):h.buildTag("div.e-action-container")),dialogActions=h.buildTag("button.e-uploadclosebtn e-btn e-select",this._getLocalizedLabels("cancel"),{},{type:"button","data-role":"none"}).appendTo(d(this.updialog).find(".e-action-container")),this.model.showRoundedCorner&&dialogActions.addClass("e-corner"),this._on(dialogActions,"click",this._dialogclose),this.model.multipleFilesSelection||this.updialog.find(".e-ul>.e-upload-file").remove(),s=d("<li class='e-upload-file'></li>").appendTo(r).data("file",e),n=d("<div class='e-file-list'></div>"),r=d("<div class='e-file-progress e-file-view'><div class='e-file-name e-file-view'><span class='e-file-name-txt'>"+e.name+"</span></div>"),e=d("<div class='e-file-size e-file-view'><span class='e-file-name-txt'>"+this._formatSize(0)+"\\"+this._formatSize(e.size)+"</span></div>"),t=d("<div class='e-file-percentage e-file-view'><div class='e-file-progress-bar'><div class='e-file-progress-status'></div></div></div>"),i=d("<div class='e-action-perform'><div class='e-icon e-file-view'></div></div></div>"),this.model.customFileDetails.name&&d(r).appendTo(n),this.model.customFileDetails.size&&d(e).appendTo(n),this.model.customFileDetails.status&&d(t).appendTo(n),this.model.customFileDetails.action&&d(i).appendTo(n),d(n).appendTo(s),r=null!=this.model.dialogAction.content&&""!=this.model.dialogAction.content?this.model.dialogAction.content:DialogContentContainer,this.updialog.ejDialog({showOnInit:!1,closeIconTooltip:this._getLocalizedLabels("closeToolTip"),minWidth:240,width:d(window).width()<750?250:this._getDialogContentWidth(),height:"auto",cssClass:"e-uploadbox "+this.model.cssClass,close:d.proxy(this._uploadFileListDelete,this),enableRTL:this.model.enableRTL,target:r,enableResize:!1,allowDraggable:this.model.dialogAction.drag,enableModal:!!this.model.asyncUpload&&this.model.dialogAction.modal,showHeader:this.model.customFileDetails.title,showRoundedCorner:this.model.showRoundedCorner}),d(window).width()<750?d(this.updialog).closest(".e-dialog.e-uploadbox").addClass("e-mobile-upload"):d(this.updialog).closest(".e-dialog.e-uploadbox").removeClass("e-mobile-upload"),o.diaObj=this.updialog.data("ejDialog"),""!=o.model.cssClass&&o.diaObj.setModel({cssClass:this.model.cssClass}),o._dialogPosition(),this.model.showFileDetails&&o.diaObj.open(),this._buttonText(this.model.buttonText),this._dialogText(this.model.dialogText),s},_setProgress:function(e,t,i){this.model.customFileDetails.status&&d(e).find(".e-file-progress-status").width(t+"%"),this.model.customFileDetails.size&&(t=d(e).find(".e-file-size .e-file-name-txt"),e=this._formatSize(i.loaded),i=this._formatSize(i.total),t.html(e+"\\"+i))},_setAction:function(e,t){var i;this.model.customFileDetails.action&&(e.find(".e-action-perform .e-icon,.e-file-percentage .e-icon").remove().addClass(t.toString()),"cancel"==t?i=h.buildTag("div.e-icon e-file-cancel","",{},{"data-content":this._getLocalizedLabels("cancelToolTip")}):"remove"==t?i=h.buildTag("div.e-icon e-delete","",{},{"data-content":this._getLocalizedLabels("removeToolTip")}):"retry"==t&&(i=h.buildTag("div.e-icon e-reload","",{},{"data-content":this._getLocalizedLabels("retryToolTip")})),e.find(".e-action-perform").append(i),this._on(i,"click",this._actionClick))},_setStatus:function(e,t){var i;this.model.customFileDetails.status&&(i=h.buildTag("div"),"success"==t&&(e.find(".file-status").addClass("e-file-status-success").html("Completed"),e.find(".e-file-percentage").html(""),i.addClass("e-icon e-checkmark").attr("data-content",this._getLocalizedLabels("completedToolTip")),e.find(".e-file-percentage").append(i)),"failed"==t&&(e.find(".file-status").addClass("e-file-status-failed").html("Failed"),e.find(".e-file-percentage").html(""),i.addClass("e-icon e-file-percentage-failed").attr("data-content",this._getLocalizedLabels("failedToolTip")),e.find(".e-file-percentage").append(i)),"progress"==t&&e.find(".file-status").addClass("file-status-inprogress").html("in progress"),"uploading"==t)&&(e.find(".file-status").addClass("file-status-inprogress").html("uploading"),e.find(".e-file-percentage").html(""))},_renderTooltip:function(){h.isNullOrUndefined(this.updialog)||(this.upTooltip=d(this.updialog).ejTooltip({target:".e-file-cancel, .e-delete, .e-reload, .e-checkmark, .e-close, .e-file-percentage-failed",content:" ",isBalloon:!1,showRoundedCorner:this.model.showRoundedCorner,enableRTL:this.model.enableRTL,position:{target:{horizontal:"center",vertical:"bottom"},stem:{horizontal:"left",vertical:"top"}}}).data("ejTooltip"),d(this.upTooltip.tooltip).css({"min-width":"auto"}))},_createInputandBind:function(){var e=h.buildTag("input","",{},{type:"file","data-role":"none"});e.attr("name",""!=this.model.uploadName?this.model.uploadName:this.control.id).attr("autocomplete","off").attr("class","e-uploadinput").attr("accept",this.model.extensionsAllow),this.model.multipleFilesSelection&&0==(-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"))&&e.attr("multiple","multiple"),e.appendTo(this.element.find(".e-selectpart")),this.inputupload=e,this._bindInputChangeEvent()},_showUploadButton:function(){var e=this.updialog.find(".e-uploadbtn");0==e.length&&(e=h.buildTag("button.e-uploadbtn e-btn e-select",this._getLocalizedLabels("upload"),{},{type:"button","data-role":"none"}),this.model.showRoundedCorner&&e.addClass("e-corner"),this.updialog.find(".e-action-container").append(e),this._on(e,"click",this.__uploadButtonClick),this._on(e,"keydown",this._keydownUpload),d(e).focus()),this._buttonText(this.model.buttonText)},_keydownUpload:function(e){13==e.keyCode&&this.__uploadButtonClick(e)},_resetFileInput:function(e){var t=e.clone(!1,!1);this._on(t,"change",this._inputValueChange),e.replaceWith(t)},_isAllowed:function(e){var t,i,n,o,r=this,s=[],l=[],a=!0,c=this.element.find(".e-uploadinput"),h=this;return""!=this.model.extensionsAllow?(i=this.model.extensionsAllow.replace(/\s/g,"").toLowerCase().split(","),d(e).each(function(){-1==d.inArray(this.extension.toLowerCase(),i)?(t={action:"Files Processing",error:r._getLocalizedLabels("allowError").replace("#Extension",i.join(", ")),files:this},h._trigger("error",t),r._resetFileInput(c),a=!1):""!=this.extension&&s.push(this)})):""!=this.model.extensionsDeny?(o=this.model.extensionsDeny.replace(/\s/g,"").toLowerCase().split(","),d(e).each(function(){-1!=d.inArray(this.extension.toLowerCase(),o)?(t={action:"Files Processing",error:r._getLocalizedLabels("denyError").replace("#Extension",o.join(", ")),files:this},h._trigger("error",t),r._resetFileInput(c),a=!1):""!=this.extension&&s.push(this)})):d(e).each(function(){""!=this.extension&&s.push(this)}),""!=this.model.fileSize?(n=this.model.fileSize,d(s).each(function(){this.size>n?(t={action:"Files Processing",error:r._getLocalizedLabels("filedetail").replace("#fileSize",n),files:this},h._trigger("error",t),r._resetFileInput(c),a=!1):l.push(this)})):l=s,{files:l,status:a}},_fileListRemove:function(){0==(fileList=this.updialog.find(".e-upload-file .e-delete")).length&&(this.updialog.find(".e-uploadbtn").attr("disabled","disabled").addClass("e-disable"),this.updialog.ejDialog("close"))},_uploadHide:function(){0==(fileList=this.updialog.find(".e-upload-file .e-file-cancel")).length&&(this.updialog.find(".e-ul").empty(),this.updialog.find(".e-uploadbtn").attr("disabled","disabled").addClass("e-disable"),this.updialog.ejDialog("close"),this.upTooltip.hide())},_onBeforeClose:function(e){h.isNullOrUndefined(e.event)||(e.cancel=!!d(e.event.currentTarget).hasClass("e-disable"))},_dialogclose:function(e){var t,i;this._currentElement.hasClass("e-disable")||(t=this.updialog.find(".e-uploadclosebtn"),i=this.updialog.find(".e-ul").children().first(),i=d(i).data("file"),t.hasClass("e-disable")?e.preventDefault():(this._uploadFileListDelete(),this.updialog.ejDialog("close")),this._trigger("cancel",{fileStatus:i}))},_uploadFileListDelete:function(){this.updialog.find(".e-ul").empty(),this._currentElement.find(".e-uploadinput").val(""),this._resetFileInput(this._currentElement.find(".e-uploadinput")),this.model.asyncUpload||this._formResetSyncUpload()},_onXhrSelect:function(){var i,n;this._xhrBeforeUpload(this._files),d.each((i=this)._files,function(e,t){n=d(t).data("filelist"),i._setAction(n,"cancel"),i.model.autoUpload?i._xhrPerformUpload(t):i._showUploadButton()})},_xhrBeforeUpload:function(e){var i,n=this;return d.each(e,function(e,t){i=n._createFormObjectXhr(t),d(t).data("formobject",i),i=n._pushFileDetails(t),d(t).data("filelist",i)}),e},_xhrPerformUpload:function(t){var e,i,n,o,r;o=new XMLHttpRequest,(i=this)._trigger("begin",r={files:t})||(e=this.model.saveUrl,(n=d(t).data("formobject")).append((this.model.uploadName&&""!=this.model.uploadName?this.model.uploadName:this.control.id)+"_data",JSON.stringify(r.data)),d(t).data("xhr",o),o.addEventListener("load",function(e){i._onRequestSuccess(i,e,t)},!1),o.addEventListener("error",function(e){i._onRequestError(i,e,t)},!1),o.upload.addEventListener("progress",function(e){i._onRequestProgress(i,e,t)},!1),o.open("POST",e),this._trigger("beforeSend",{files:t,xhr:o}))?(d(t).data("xhr",o),i._onRequestError(i,s,t)):o.send(n)},_xhrOnUploadButtonClick:function(){var e=(this.model.showBrowseButton?this.diaObj.wrapper:this.dragWrapper).find(".e-ul li.e-upload-file");for(i=0;i<e.length;i++)d(this),this._isFileUpload(e[i])&&this._xhrPerformUpload(d(e[i]).data("file"))},_xhrOnRemove:function(e,t){var i=d(t).find(".e-file-name").text().toString().split(","),n=this;d.ajax({url:this.model.removeUrl,type:"POST",data:"fileNames="+i,success:function(){d(t).remove(),n._fileListRemove(),n._trigger("remove",{fileStatus:n._file})}}),this.upTooltip.hide()},_xhrOnCancel:function(e,t){var i=d(t).data("file");d(i).data("xhr")&&d(i).data("xhr").abort(),d(i).data("xhr",null),d(t).data("file",null),d(t).remove(),this._uploadHide()},_xhrOnRetry:function(e,t){this._currentElement.hasClass("e-disable")||(t=d(t).data("file"),this._xhrPerformUpload(t))},_onRequestSuccess:function(e,t,i){var n=d(i).data("xhr");200<=n.status&&n.status<=299?e._onXhrUploadSuccess(e,t,i):e._onRequestError(e,t,i)},_onXhrUploadSuccess:function(e,t,i){var n,o=d(i).data("filelist"),r=d(i).data("xhr");e.model.removeUrl?e._setAction(o,"remove"):o.find(".e-action-perform .e-icon,.e-file-percentage .e-icon").remove(),e._setStatus(o,"success"),0<d(i).length&&(d(o).find(".e-file-progress-status").width("100%"),n=d(i)[0].size,n=this._formatSize(n),d(o).find(".e-file-size .e-file-name-txt").html(n+"\\"+n)),o={files:i,responseText:r.responseText,xhr:r,e:t},this.updialog.find(".e-file-upload .e-uploadclosebtn").html(this.model.buttonText.close).focus(),e._trigger("success",o),this._successFiles.push(i),e._files.length==this._successFiles.length&&(o={files:i,responseText:r.responseText,success:this._successFiles,xhr:r,e:t},e._trigger("complete",o),this._successFiles.length=0,this.model.dialogAction.closeOnComplete)&&this._dialogclose()},_onRequestError:function(e,t,i){var n=d(i).data("filelist"),o=d(i).data("xhr");e._setAction(n,"retry"),e._setStatus(n,"failed"),n={action:"File Processing",error:o.status?o.status+" "+o.statusText:"Unable to reach the server.",files:i,xhr:o,e:t},e._trigger("error",n)},_onRequestProgress:function(e,t,i){var n=Math.round(100*t.loaded/t.total),o=d(i).data("filelist");e._setProgress(o,n,t),e._setStatus(o,"progress"),this._trigger("inProgress",{file:i,percentage:n,e:t})},_createFormObjectXhr:function(e){var t=new FormData;return t.append(""!=this.model.uploadName?this.model.uploadName:this.control.id,e.rawFile),t},_getInputFileInfo:function(e){e=e[0];return e.files?this._getAllFileInfo(e.files):[{name:this._GetName(e.value),extension:this._getFileExtensionType(e.value),size:this._getFileSizeinIE(e.value)}]},_getFileSizeinIE:function(e){var t=null,i=null;try{t=new ActiveXObject("Scripting.FileSystemObject")}catch(e){i=null}return i=t?t.getFile(e).size:i},_getFileExtensionType:function(e){return e.match&&e.match(/\.([^\.]+)$/)?e.match(/\.([^\.]+)$/)[0]:""},_getAllFileInfo:function(t){var i=this;return d.map(t,function(e){return i._getFileInfo(e||t)})},_GetName:function(e){var t=e.lastIndexOf("\\");return-1!=t?e.substr(t+1):e},_getFileInfo:function(e){var t=e.name||e.fileName||e;return{name:t,extension:this._getFileExtensionType(t),size:e.size||e.fileSize,rawFile:e}},_formatSize:function(e){var t=-1;if(!e)return"0.0KB";for(;t++,99<(e/=1024););return Math.max(e,0).toFixed(1)+["KB","MB","GB","TB","PB","EB"][t]},_onSelectIFrame:function(e){e=d(e.target),e=this._getInputFileInfo(e),e=this._beforeUploadIFrame(e);e.data("iframe");this.model.autoUpload?this._performUploadIFrame(e):this._showUploadButton(),this._off(this.inputupload,"change"),this._bindInputChangeEvent()},_onRemoveIFrame:function(e,t){var i=t.data("iframe"),n=d(t).data("file")[0].name,o=this;i?(this._removeFileEntry(t),this.model.removeUrl&&d.ajax({url:this.model.removeUrl,type:"POST",data:"fileNames="+n,success:function(){o._fileListRemove(),o._trigger("remove",{fileStatus:o._file})}})):(this._removeFileEntry(t),this._trigger("remove",{fileStatus:this._file}))},_onCancelIFrame:function(e,t){var i;this._trigger("cancel",{Status:t}),(i=t.data("iframe"))&&(this._removeFileEntry(t),void 0!==i.stop?i.stop():i.document&&(i.document.execCommand("Stop"),i.contentWindow.location.href=i.contentWindow.location.href),this._processServerResponse(i,"")),this._uploadHide()},_onRetryIFrame:function(e,t){this._performUploadIFrame(t)},_beforeUploadIFrame:function(e){var t,i=this._createFrame(this.control.id+"_Iframe"+this.Uploadframes.length);return this.Uploadframes.push(i),t=this._createForm(this.model.saveUrl,i[0].id),this._currentElement.find("input.e-uploadinput").removeClass("e-uploadinput").css("display","none").appendTo(t),this._createInputandBind(),t=this._pushFile(e,{iframe:i,form:t,file:e}),i.data({filelist:t}),this._setAction(t,"cancel"),t},_performUploadIFrame:function(e){var t,i;this._trigger("begin",i={files:e})?this._failureIframeUpload(e,"File upload has been denied"):(e.data("file"),this._setStatus(e,"uploading"),t=e.data("iframe"),e=e.data("form"),i=d("<input>").attr("name",(this.model.uploadName&&""!=this.model.uploadName?this.model.uploadName:this.control.id)+"_data").attr("type","hidden").val(JSON.stringify(i.data)),e.append(i),t.appendTo(document.body),e.appendTo(document.body),this._on(t,"load",this._removeFramesIFrame),e.submit())},_onUploadButtonClickIFrame:function(){var e,t=this;d(".e-ul li.e-upload-file",t.updialog).each(function(){e=d(this),t._isFileUpload(e)&&t._performUploadIFrame(e)})},_removeFramesIFrame:function(e){var t,i=d(e.target),n=i.data("filelist");try{t=d.trim(i.context.contentDocument.body.innerText.replace(/\n|\r/g," "))}catch(e){t="Server Error trying to get server response: "+e}"Server Error"!=t.substring(0,12)&&0!=t.indexOf("HTTP Error")?(this._processServerResponse(i,t),this._setIframeProgress(n,100,e),this._setStatus(n,"progress"),this._successIframeUpload(n,t)):this._failureIframeUpload(n,t)},_setIframeProgress:function(e,t){d(e).find(".e-file-progress-status").width(t+"%")},_successIframeUpload:function(e,t){fileEntry=e.data("file"),this.model.removeUrl?this._setAction(e,"remove"):e.find(".file-action").remove(),this._setStatus(e,"success"),args={files:fileEntry,responseText:t},this.updialog.find(".e-file-upload .e-uploadclosebtn").html(this.model.buttonText.close).focus(),this._trigger("success",args),this._successFiles.push(fileEntry),e.length==this._successFiles.length&&(args={files:fileEntry,responseText:t,success:this._successFiles},this._trigger("complete",args),this._successFiles.length=0,this.model.dialogAction.closeOnComplete)&&this._dialogclose()},_failureIframeUpload:function(e,t){fileEntry=e.data("file"),this.model.saveUrl&&"File upload has been denied"!=t?this._setAction(e,"retry"):e.find(".file-action").remove(),this._setStatus(e,"failed"),args=0==t.indexOf("HTTP Error")?{files:fileEntry,responseText:t,status:t.match(/\d+/).toString()}:{files:fileEntry,responseText:t},this._trigger("error",args)},_processServerResponse:function(e){var t=d(document.body).find("form[target='"+d(e).attr("id")+"']");setTimeout(function(){t.remove(),e.remove()},0)},_createDivBlock:function(e){return h.buildTag("div."+e)},_createForm:function(e,t){return h.buildTag("form","",{},{enctype:"multipart/form-data",method:"POST",action:e,target:t})},_createFrame:function(e){return h.buildTag("iframe#"+e,"",{display:"none"},{name:e})},_createInput:function(e){return h.buildTag("input","",{},{type:"file",name:e,"data-role":"none"})},_initObjectsSyncUpload:function(){this._currentElement.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data"),this._wireEventsSyncUpload()},_wireEventsSyncUpload:function(){var e=this._currentElement.closest("form")[0];this._on(d(e),"submit",this._formSubmitSyncUpload),this._on(d(e),"reset",this._formResetSyncUpload)},_onSelectSyncUpload:function(e){var e=d(e.target),t=d(".e-selectpart",this.control);this._currentElement.find("input.e-uploadinput").removeClass("e-uploadinput").css("display","none").appendTo(t),this._createInputandBind(),this._pushFile(this._files,{file:this._files,Input:e})},_onCancelSyncUpload:function(e,t){var i=t.data("Input");t.data("file",null),t.data("Input",null),t.remove(),i.remove(),this._uploadHide()},_formSubmitSyncUpload:function(){var e,t=d(".e-uploadinput",this.control);t.attr("name",""),e=""!=this.model.uploadName?this.model.uploadName:this.control.id,setTimeout(function(){t.attr("name",e)},0)},_formResetSyncUpload:function(){d(".e-selectpart",this.control).children('input[type="file"]').each(function(){d(this).hasClass("e-uploadinput")||d(this).remove()})}}),h.Uploadbox.Locale=h.Uploadbox.Locale||{},h.Uploadbox.Locale.default=h.Uploadbox.Locale["en-US"]={buttonText:{upload:"Upload",browse:"Browse",cancel:"Cancel",close:"Close"},dialogText:{title:"Upload Box",name:"Name",size:"Size",status:"Status"},dropAreaText:"Drop files or click to upload",filedetail:"The selected file size is too large.  Please select a file within #fileSize",denyError:"Files with #Extension extensions are not allowed.",allowError:"Only files with #Extension extensions are allowed.",cancelToolTip:"Cancel",removeToolTip:"Remove",retryToolTip:"Retry",completedToolTip:"Completed",failedToolTip:"Failed",closeToolTip:"Close"}}),$(document).ready(function(e){var t=createLoader("#body");"undefined"!=typeof BoldBIDashboard?$("#body").BoldBIDashboardWaitingPopup({template:$("#"+t)}):$("#body").ejWaitingPopup({template:$("#"+t)}),postmd=renderMde("#general-feedbak-comment")}),$(document).on("click","#feedback-section, .feedback-button",function(){$("#do-not-show-button").addClass("display-none"),$("#show-later-button").addClass("display-none"),$("#cancel-button").removeClass("display-none"),$("#close-general-feedback").attr("data-feedback-close",!0),$("#submit-button").prop("disabled",!0),openFeedbackWindow()}),$(document).on("click",".sub-button",function(){$(".sub-button").removeClass("button-bg-change"),$(this).addClass("button-bg-change"),subject=$(this).val(),"sub1"==$(this).attr("id")?$(".sub-title-change").html("<span class='popup-label-sub'>"+window.Server.App.LocalizationContent.FeedbackSubjectProblem+"</span>"):"sub2"==$(this).attr("id")?$(".sub-title-change").html("<span class='popup-label-sub'>"+window.Server.App.LocalizationContent.FeedbackSubjectSuggestion+"</span>"):"sub3"==$(this).attr("id")?$(".sub-title-change").html("<span class='popup-label-sub'>"+window.Server.App.LocalizationContent.FeedbackSubjectCompliment+"</span>"):"sub4"==$(this).attr("id")&&$(".sub-title-change").html("<span class='popup-label-sub'>"+window.Server.App.LocalizationContent.FeedbackSubjectOther+"</span>")}),$(document).on("click",".smiley-change",function(){$(".smiley-change").addClass("smiley-select"),$(this).removeClass("smiley-select"),experience=$(this).attr("data-smiley-val"),$("#submit-button").prop("disabled",!1),$("#submit-button").removeClass("disable-cursor")}),$(document).on("click",".cookie-button",function(){var e=$(this).attr("data-cookie");"undefined"!=typeof BoldBIDashboard?$("#general-feedback-popup").BoldBIDashboardDialog("close"):$("#general-feedback-popup").ejDialog("close"),postmd.value("");subject=experience="",$(".sub-button").removeClass("button-bg-change"),$(".smiley-change").removeClass("smiley-select"),$("#general-feedback-popup").addClass("display-none"),"false"==$(this).attr("data-feedback-close")&&$.ajax({type:"POST",url:feedbackCookieUrl,data:{cookieType:e}})}),$(document).on("click","#submit-button",function(){var e=postmd.value(),e={FeedbackFormId:$("#feedback-form-id").val(),CanContact:$("#general-feedback").is(":checked"),Comments:e,Experience:experience,FeedbackSubject:subject},t=$(this).attr("data-cookie");"undefined"!=typeof BoldBIDashboard?$("body").BoldBIDashboardWaitingPopup("show"):$("body").ejWaitingPopup("show"),$.ajax({type:"POST",url:feedbackSendUrl,data:{feedback:JSON.stringify(e)},success:function(e){"undefined"!=typeof BoldBIDashboard?$("#body").BoldBIDashboardWaitingPopup("hide"):$("#body").ejWaitingPopup("hide"),e.Status?(SuccessAlert(window.Server.App.LocalizationContent.AddUserFeedback,window.Server.App.LocalizationContent.AddUserFeedbackSuccess,7e3),"undefined"!=typeof BoldBIDashboard?$("#general-feedback-popup").BoldBIDashboardDialog("close"):$("#general-feedback-popup").ejDialog("close"),setSendFeedbackCookie(t)):(WarningAlert(window.Server.App.LocalizationContent.FeedbackFailure,window.Server.App.LocalizationContent.AddUserFeedbackFailure,7e3),"undefined"!=typeof BoldBIDashboard?$("#general-feedback-popup").BoldBIDashboardDialog("close"):$("#general-feedback-popup").ejDialog("close"))},error:function(){WarningAlert(window.Server.App.LocalizationContent.FeedbackFailure,window.Server.App.LocalizationContent.AddUserFeedbackFailure,7e3),"undefined"!=typeof BoldBIDashboard?$("#body").BoldBIDashboardWaitingPopup("hide"):$("#body").ejWaitingPopup("hide")}})}),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EasyMDE=e()}(function(){return function n(o,r,s){function l(t,e){if(!r[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(a)return a(t,!0);e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}i=r[t]={exports:{}};o[t][0].call(i.exports,function(e){return l(o[t][1][e]||e)},i,i.exports,n,o,r,s)}return r[t].exports}for(var a="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({1:[function(e,t,i){i.byteLength=function(e){var e=h(e),t=e[0],e=e[1];return 3*(t+e)/4-e},i.toByteArray=function(e){for(var t,i=h(e),n=i[0],i=i[1],o=new c(3*(n+i)/4-i),r=0,s=0<i?n-4:n,l=0;l<s;l+=4)t=a[e.charCodeAt(l)]<<18|a[e.charCodeAt(l+1)]<<12|a[e.charCodeAt(l+2)]<<6|a[e.charCodeAt(l+3)],o[r++]=t>>16&255,o[r++]=t>>8&255,o[r++]=255&t;return 2===i&&(t=a[e.charCodeAt(l)]<<2|a[e.charCodeAt(l+1)]>>4,o[r++]=255&t),1===i&&(t=a[e.charCodeAt(l)]<<10|a[e.charCodeAt(l+1)]<<4|a[e.charCodeAt(l+2)]>>2,o[r++]=t>>8&255,o[r++]=255&t),o},i.fromByteArray=function(e){for(var t,i=e.length,n=i%3,o=[],r=0,s=i-n;r<s;r+=16383)o.push(function(e,t,i){for(var n,o=[],r=t;r<i;r+=3)n=(e[r]<<16&16711680)+(e[r+1]<<8&65280)+(255&e[r+2]),o.push(l[(n=n)>>18&63]+l[n>>12&63]+l[n>>6&63]+l[63&n]);return o.join("")}(e,r,s<r+16383?s:r+16383));return 1==n?(t=e[i-1],o.push(l[t>>2]+l[t<<4&63]+"==")):2==n&&(t=(e[i-2]<<8)+e[i-1],o.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")),o.join("")};for(var l=[],a=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,r=n.length;o<r;++o)l[o]=n[o],a[n.charCodeAt(o)]=o;function h(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");return[e=-1===e?t:e,e===t?0:4-e%4]}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],2:[function(e,t,i){},{}],3:[function(e,t,i){var S=e("base64-js"),r=e("ieee754"),n=(i.Buffer=d,i.SlowBuffer=function(e){return d.alloc(+(e=+e!=e?0:e))},i.INSPECT_MAX_BYTES=50,2147483647);function h(e){if(n<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=d.prototype,e}function d(e,t,i){if("number"!=typeof e)return o(e,t,i);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}function o(e,t,i){if("string"==typeof e){var n=e,o=t;if(d.isEncoding(o="string"==typeof o&&""!==o?o:"utf8"))return(n=(s=h(r=0|f(n,o))).write(n,o))!==r?s.slice(0,n):s;throw new TypeError("Unknown encoding: "+o)}if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(E(e,ArrayBuffer)||e&&E(e.buffer,ArrayBuffer)){var r=e,n=t,s=i;if(n<0||r.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<n+(s||0))throw new RangeError('"length" is outside of buffer bounds');return(r=void 0===n&&void 0===s?new Uint8Array(r):void 0===s?new Uint8Array(r,n):new Uint8Array(r,n,s)).__proto__=d.prototype,r}if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return d.from(o,t,i);var l,a,c=d.isBuffer(l=e)?(0!==(a=h(c=0|p(l.length))).length&&l.copy(a,0,0,c),a):void 0!==l.length?"number"!=typeof l.length||M(l.length)?h(0):u(l):"Buffer"===l.type&&Array.isArray(l.data)?u(l.data):void 0;if(c)return c;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return s(e),h(e<0?0:0|p(e))}function u(e){for(var t=e.length<0?0:0|p(e.length),i=h(t),n=0;n<t;n+=1)i[n]=255&e[n];return i}function p(e){if(n<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function f(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||E(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===i)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return _(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return L(e).length;default:if(o)return n?-1:_(e).length;t=(""+t).toLowerCase(),o=!0}}function a(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function c(e,t,i,n,o){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),(i=(i=M(i=+i)?o?0:e.length-1:i)<0?e.length+i:i)>=e.length){if(o)return-1;i=e.length-1}else if(i<0){if(!o)return-1;i=0}if("string"==typeof t&&(t=d.from(t,n)),d.isBuffer(t))return 0===t.length?-1:m(e,t,i,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,i):m(e,[t],i,n,o);throw new TypeError("val must be string, number or Buffer")}function m(e,t,i,n,o){var r=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s/=r=2,l/=2,i/=2}function a(e,t){return 1===r?e[t]:e.readUInt16BE(t*r)}if(o)for(var c=-1,h=i;h<s;h++)if(a(e,h)===a(t,-1===c?0:h-c)){if(h-(c=-1===c?h:c)+1===l)return c*r}else-1!==c&&(h-=h-c),c=-1;else for(h=i=s<i+l?s-l:i;0<=h;h--){for(var d=!0,u=0;u<l;u++)if(a(e,h+u)!==a(t,u)){d=!1;break}if(d)return h}return-1}function g(e,t,i,n){return A(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,n)}function T(e,t,i){i=Math.min(e.length,i);for(var n=[],o=t;o<i;){var r,s,l,a,c=e[o],h=null,d=239<c?4:223<c?3:191<c?2:1;if(o+d<=i)switch(d){case 1:c<128&&(h=c);break;case 2:128==(192&(r=e[o+1]))&&127<(a=(31&c)<<6|63&r)&&(h=a);break;case 3:r=e[o+1],s=e[o+2],128==(192&r)&&128==(192&s)&&2047<(a=(15&c)<<12|(63&r)<<6|63&s)&&(a<55296||57343<a)&&(h=a);break;case 4:r=e[o+1],s=e[o+2],l=e[o+3],128==(192&r)&&128==(192&s)&&128==(192&l)&&65535<(a=(15&c)<<18|(63&r)<<12|(63&s)<<6|63&l)&&a<1114112&&(h=a)}null===h?(h=65533,d=1):65535<h&&(n.push((h-=65536)>>>10&1023|55296),h=56320|1023&h),n.push(h),o+=d}var u=n,p=u.length;if(p<=v)return String.fromCharCode.apply(String,u);for(var f="",m=0;m<p;)f+=String.fromCharCode.apply(String,u.slice(m,m+=v));return f}i.kMaxLength=n,(d.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=o,d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,d.alloc=function(e,t,i){return t=t,i=i,s(e=e),!(e<=0)&&void 0!==t?"string"==typeof i?h(e).fill(t,i):h(e).fill(t):h(e)},d.allocUnsafe=l,d.allocUnsafeSlow=l,d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(E(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),E(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,n=t.length,o=0,r=Math.min(i,n);o<r;++o)if(e[o]!==t[o]){i=e[o],n=t[o];break}return i<n?-1:n<i?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;for(var i=d.allocUnsafe(t),n=0,o=0;o<e.length;++o){var r=e[o];if(E(r,Uint8Array)&&(r=d.from(r)),!d.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(i,n),n+=r.length}return i},d.byteLength=f,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)a(this,t,t+1);return this},d.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)a(this,t,t+3),a(this,t+1,t+2);return this},d.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)a(this,t,t+7),a(this,t+1,t+6),a(this,t+2,t+5),a(this,t+3,t+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):function(e,t,i){var n=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((i=void 0===i||i>this.length?this.length:i)<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var o,r=this,s=t,l=i,a=r.length;(!l||l<0||a<l)&&(l=a);for(var c="",h=s=!s||s<0?0:s;h<l;++h)c+=(o=r[h])<16?"0"+o.toString(16):o.toString(16);return c;case"utf8":case"utf-8":return T(this,t,i);case"ascii":var d=this,a=t,u=i,p="";u=Math.min(d.length,u);for(var f=a;f<u;++f)p+=String.fromCharCode(127&d[f]);return p;case"latin1":case"binary":var m=this,s=t,g=i,v="";g=Math.min(m.length,g);for(var b=s;b<g;++b)v+=String.fromCharCode(m[b]);return v;case"base64":return x=i,0===(y=t)&&x===this.length?S.fromByteArray(this):S.fromByteArray(this.slice(y,x));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var y=t,x=i,w=this.slice(y,x),k="",C=0;C<w.length;C+=2)k+=String.fromCharCode(w[C]+256*w[C+1]);return k;default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},d.prototype.equals=function(e){if(d.isBuffer(e))return this===e||0===d.compare(this,e);throw new TypeError("Argument must be a Buffer")},d.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},d.prototype.compare=function(e,t,i,n,o){if(E(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),(t=void 0===t?0:t)<0||i>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(o<=n&&i<=t)return 0;if(o<=n)return-1;if(i<=t)return 1;if(this===e)return 0;for(var r=(o>>>=0)-(n>>>=0),s=(i>>>=0)-(t>>>=0),l=Math.min(r,s),a=this.slice(n,o),c=e.slice(t,i),h=0;h<l;++h)if(a[h]!==c[h]){r=a[h],s=c[h];break}return r<s?-1:s<r?1:0},d.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},d.prototype.indexOf=function(e,t,i){return c(this,e,t,i,!0)},d.prototype.lastIndexOf=function(e,t,i){return c(this,e,t,i,!1)},d.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(i)?(i>>>=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var o=this.length-t;if((void 0===i||o<i)&&(i=o),0<e.length&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var r,s,l,a=!1;;)switch(n){case"hex":var c=this,h=e,d=t,u=i,p=(d=Number(d)||0,c.length-d);(!u||p<(u=Number(u)))&&(u=p),(p=h.length)/2<u&&(u=p/2);for(var f=0;f<u;++f){var m=parseInt(h.substr(2*f,2),16);if(M(m))return f;c[d+f]=m}return f;case"utf8":case"utf-8":return p=t,l=i,A(_(e,this.length-p),this,p,l);case"ascii":return g(this,e,t,i);case"latin1":case"binary":return g(this,e,t,i);case"base64":return l=t,s=i,A(L(e),this,l,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s=t,r=i,A(function(e,t){for(var i,n,o=[],r=0;r<e.length&&!((t-=2)<0);++r)n=(i=e.charCodeAt(r))>>8,o.push(i%256),o.push(n);return o}(e,this.length-s),this,s,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function b(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(i<e+t)throw new RangeError("Trying to access beyond buffer length")}function y(e,t,i,n,o,r){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<r)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function x(e,t,i,n){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function w(e,t,i,n,o){return t=+t,i>>>=0,o||x(e,0,i,4),r.write(e,t,i,n,23,4),i+4}function k(e,t,i,n,o){return t=+t,i>>>=0,o||x(e,0,i,8),r.write(e,t,i,n,52,8),i+8}d.prototype.slice=function(e,t){var i=this.length,i=((e=~~e)<0?(e+=i)<0&&(e=0):i<e&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):i<t&&(t=i),t<e&&(t=e),this.subarray(e,t));return i.__proto__=d.prototype,i},d.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||b(e,t,this.length);for(var n=this[e],o=1,r=0;++r<t&&(o*=256);)n+=this[e+r]*o;return n},d.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||b(e,t,this.length);for(var n=this[e+--t],o=1;0<t&&(o*=256);)n+=this[e+--t]*o;return n},d.prototype.readUInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),this[e]},d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||b(e,t,this.length);for(var n=this[e],o=1,r=0;++r<t&&(o*=256);)n+=this[e+r]*o;return(o*=128)<=n&&(n-=Math.pow(2,8*t)),n},d.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||b(e,t,this.length);for(var n=t,o=1,r=this[e+--n];0<n&&(o*=256);)r+=this[e+--n]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*t)),r},d.prototype.readInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||b(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},d.prototype.readInt16BE=function(e,t){e>>>=0,t||b(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readFloatLE=function(e,t){return e>>>=0,t||b(e,4,this.length),r.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||b(e,4,this.length),r.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||b(e,8,this.length),r.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||b(e,8,this.length),r.read(this,e,!1,52,8)},d.prototype.writeUIntLE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||y(this,e,t,i,Math.pow(2,8*i)-1,0);var o=1,r=0;for(this[t]=255&e;++r<i&&(o*=256);)this[t+r]=e/o&255;return t+i},d.prototype.writeUIntBE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||y(this,e,t,i,Math.pow(2,8*i)-1,0);var o=i-1,r=1;for(this[t+o]=255&e;0<=--o&&(r*=256);)this[t+o]=e/r&255;return t+i},d.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeIntLE=function(e,t,i,n){e=+e,t>>>=0,n||y(this,e,t,i,(n=Math.pow(2,8*i-1))-1,-n);var o=0,r=1,s=0;for(this[t]=255&e;++o<i&&(r*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/r>>0)-s&255;return t+i},d.prototype.writeIntBE=function(e,t,i,n){e=+e,t>>>=0,n||y(this,e,t,i,(n=Math.pow(2,8*i-1))-1,-n);var o=i-1,r=1,s=0;for(this[t+o]=255&e;0<=--o&&(r*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/r>>0)-s&255;return t+i},d.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},d.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeFloatLE=function(e,t,i){return w(this,e,t,!0,i)},d.prototype.writeFloatBE=function(e,t,i){return w(this,e,t,!1,i)},d.prototype.writeDoubleLE=function(e,t,i){return k(this,e,t,!0,i)},d.prototype.writeDoubleBE=function(e,t,i){return k(this,e,t,!1,i)},d.prototype.copy=function(e,t,i,n){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i=i||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<i?i:n)===i)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var o=(n=e.length-t<n-i?e.length-t+i:n)-i;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,i,n);else if(this===e&&i<t&&t<n)for(var r=o-1;0<=r;--r)e[r+t]=this[r+i];else Uint8Array.prototype.set.call(e,this.subarray(i,n),t);return o},d.prototype.fill=function(e,t,i,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!d.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var o;1===e.length&&(o=e.charCodeAt(0),"utf8"===n&&o<128||"latin1"===n)&&(e=o)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");var r;if(!(i<=t))if(t>>>=0,i=void 0===i?this.length:i>>>0,"number"==typeof(e=e||0))for(r=t;r<i;++r)this[r]=e;else{var s=d.isBuffer(e)?e:d.from(e,n),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<i-t;++r)this[r+t]=s[r%l]}return this};var C=/[^+/0-9A-Za-z-_]/g;function _(e,t){var i;t=t||1/0;for(var n=e.length,o=null,r=[],s=0;s<n;++s){if(55295<(i=e.charCodeAt(s))&&i<57344){if(!o){if(56319<i){-1<(t-=3)&&r.push(239,191,189);continue}if(s+1===n){-1<(t-=3)&&r.push(239,191,189);continue}o=i;continue}if(i<56320){-1<(t-=3)&&r.push(239,191,189),o=i;continue}i=65536+(o-55296<<10|i-56320)}else o&&-1<(t-=3)&&r.push(239,191,189);if(o=null,i<128){if(--t<0)break;r.push(i)}else if(i<2048){if((t-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function L(e){return S.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(C,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function A(e,t,i,n){for(var o=0;o<n&&!(o+i>=t.length||o>=e.length);++o)t[o+i]=e[o];return o}function E(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function M(e){return e!=e}},{"base64-js":1,ieee754:16}],4:[function(e,t,i){var s=e("typo-js");function l(r){"function"==typeof(r=r||{}).codeMirrorInstance&&"function"==typeof r.codeMirrorInstance.defineMode?(String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),r.codeMirrorInstance.defineMode("spell-checker",function(e){l.aff_loading||(l.aff_loading=!0,(t=new XMLHttpRequest).open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),t.onload=function(){4===t.readyState&&200===t.status&&(l.aff_data=t.responseText,2==++l.num_loaded)&&(l.typo=new s("en_US",l.aff_data,l.dic_data,{platform:"any"}))},t.send(null)),l.dic_loading||(l.dic_loading=!0,(i=new XMLHttpRequest).open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),i.onload=function(){4===i.readyState&&200===i.status&&(l.dic_data=i.responseText,2==++l.num_loaded)&&(l.typo=new s("en_US",l.aff_data,l.dic_data,{platform:"any"}))},i.send(null));var t,i,n='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',o={token:function(e){var t=e.peek(),i="";if(n.includes(t))return e.next(),null;for(;null!=(t=e.peek())&&!n.includes(t);)i+=t,e.next();return l.typo&&!l.typo.check(i)?"spell-error":null}},e=r.codeMirrorInstance.getMode(e,e.backdrop||"text/plain");return r.codeMirrorInstance.overlayMode(e,o,!0)})):console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`")}l.num_loaded=0,l.aff_loading=!1,l.dic_loading=!1,l.aff_data="",l.dic_data="",t.exports=l},{"typo-js":18}],5:[function(e,t,i){var n;(n="object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror).defineOption("fullScreen",!1,function(e,t,i){!(i=i==n.Init?!1:i)!=!t&&(t?(t=(i=e).getWrapperElement(),i.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",i):((i=(t=e).getWrapperElement()).className=i.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="",e=t.state.fullScreenRestore,i.style.width=e.width,i.style.height=e.height,window.scrollTo(e.scrollLeft,e.scrollTop),t)).refresh()})},{"../../lib/codemirror":11}],6:[function(e,t,i){function n(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function o(e){n(e);var t=e.state.placeholder=document.createElement("pre"),i=(t.style.cssText="height: 0; overflow: visible",t.style.direction=e.getOption("direction"),t.className="CodeMirror-placeholder",e.getOption("placeholder"));"string"==typeof i&&(i=document.createTextNode(i)),t.appendChild(i),e.display.lineSpace.insertBefore(t,e.display.lineSpace.firstChild)}function r(e){l(e)&&o(e)}function s(e){var t=e.getWrapperElement(),i=l(e);t.className=t.className.replace(" CodeMirror-empty","")+(i?" CodeMirror-empty":""),(i?o:n)(e)}function l(e){return 1===e.lineCount()&&""===e.getLine(0)}var a;(a="object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror).defineOption("placeholder","",function(e,t,i){var i=i&&i!=a.Init;t&&!i?(e.on("blur",r),e.on("change",s),e.on("swapDoc",s),s(e)):!t&&i&&(e.off("blur",r),e.off("change",s),e.off("swapDoc",s),n(e),(i=e.getWrapperElement()).className=i.className.replace(" CodeMirror-empty","")),t&&!e.hasFocus()&&r(e)})},{"../../lib/codemirror":11}],7:[function(e,t,i){var h,f,d,u;h="object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror,f=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,d=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,u=/[*+-]\s/,h.commands.newlineAndIndentContinueMarkdownList=function(e){if(e.getOption("disableInput"))return h.Pass;for(var t=e.listSelections(),i=[],n=0;n<t.length;n++){var o=t[n].head,r=e.getStateAfter(o.line),s=!1!==r.list,r=0!==r.quote,l=e.getLine(o.line),a=f.exec(l),c=/^\s*$/.test(l.slice(0,o.ch));if(!t[n].empty()||!s&&!r||!a||c)return void e.execCommand("newlineAndIndent");d.test(l)?(/>\s*$/.test(l)||e.replaceRange("",{line:o.line,ch:0},{line:o.line,ch:o.ch+1}),i[n]="\n"):(s=a[1],r=a[5],l=(c=!(u.test(a[2])||0<=a[2].indexOf(">")))?parseInt(a[3],10)+1+a[4]:a[2].replace("x"," "),i[n]="\n"+s+l+r,c&&function(e,t){var i=t.line,n=0,o=0,r=f.exec(e.getLine(i)),s=r[1];do{var l=i+(n+=1),a=e.getLine(l),c=f.exec(a);if(c){var h=c[1],d=parseInt(r[3],10)+n-o,u=parseInt(c[3],10),p=u;if(s!==h||isNaN(u)){if(s.length>h.length)return;if(s.length<h.length&&1===n)return;o+=1}else d===u&&(p=u+1),e.replaceRange(a.replace(f,h+(p=u<d?1+d:p)+c[4]+c[5]),{line:l,ch:0},{line:l,ch:a.length})}}while(c)}(e,o))}e.replaceSelections(i)}},{"../../lib/codemirror":11}],8:[function(e,t,i){var s;(s="object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror).overlayMode=function(n,o,r){return{startState:function(){return{base:s.startState(n),overlay:s.startState(o),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(e){return{base:s.copyState(n,e.base),overlay:s.copyState(o,e.overlay),basePos:e.basePos,baseCur:null,overlayPos:e.overlayPos,overlayCur:null}},token:function(e,t){return(e!=t.streamSeen||Math.min(t.basePos,t.overlayPos)<e.start)&&(t.streamSeen=e,t.basePos=t.overlayPos=e.start),e.start==t.basePos&&(t.baseCur=n.token(e,t.base),t.basePos=e.pos),e.start==t.overlayPos&&(e.pos=e.start,t.overlayCur=o.token(e,t.overlay),t.overlayPos=e.pos),e.pos=Math.min(t.basePos,t.overlayPos),null==t.overlayCur?t.baseCur:null!=t.baseCur&&t.overlay.combineTokens||r&&null==t.overlay.combineTokens?t.baseCur+" "+t.overlayCur:t.overlayCur},indent:n.indent&&function(e,t){return n.indent(e.base,t)},electricChars:n.electricChars,innerMode:function(e){return{state:e.base,mode:n}},blankLine:function(e){var t,i;return n.blankLine&&(t=n.blankLine(e.base)),null==(i=o.blankLine?o.blankLine(e.overlay):i)?t:r&&null!=t?t+" "+i:i}}}},{"../../lib/codemirror":11}],9:[function(e,t,i){function p(e,t){for(var i=null!=(i=e.flags)?i:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":""),n=i,o=0;o<t.length;o++)-1==n.indexOf(t.charAt(o))&&(n+=t.charAt(o));return i==n?e:new RegExp(e.source,n)}function f(e,t,i){t=p(t,"g");for(var n=i.line,o=i.ch,r=e.lastLine();n<=r;n++,o=0){t.lastIndex=o;var s=e.getLine(n),s=t.exec(s);if(s)return{from:y(n,s.index),to:y(n,s.index+s[0].length),match:s}}}function m(e,t){for(var i,n=0;;){t.lastIndex=n;var o=t.exec(e);if(!o)return i;if((n=(i=o).index+(i[0].length||1))==e.length)return i}}function g(e,t,i,n){if(e.length==t.length)return i;for(var o=0,r=i+Math.max(0,e.length-t.length);;){if(o==r)return o;var s=o+r>>1,l=n(e.slice(0,s)).length;if(l==i)return s;i<l?r=s:o=1+s}}function n(i,n,e,t){var o;this.atOccurrence=!1,this.doc=i,e=e?i.clipPos(e):y(0,0),this.pos={from:e,to:e},"object"==typeof t?o=t.caseFold:(o=t,t=null),"string"==typeof n?(null==o&&(o=!1),this.matches=function(e,t){return(e?function(e,t,i,n){if(!t.length)return null;var o=n?v:b,r=o(t).split(/\r|\n\r?/);e:for(var s=i.line,l=i.ch,a=e.firstLine()-1+r.length;a<=s;s--,l=-1){var c=e.getLine(s),h=o(c=-1<l?c.slice(0,l):c);if(1==r.length){var d=h.lastIndexOf(r[0]);if(-1==d)continue;return{from:y(s,g(c,h,d,o)),to:y(s,g(c,h,d+r[0].length,o))}}d=r[r.length-1];if(h.slice(0,d.length)==d){var u=1;for(i=s-r.length+1;u<r.length-1;u++)if(o(e.getLine(i+u))!=r[u])continue e;var p=e.getLine(s+1-r.length),f=o(p);if(f.slice(f.length-r[0].length)==r[0])return{from:y(s+1-r.length,g(p,f,p.length-r[0].length,o)),to:y(s,g(c,h,d.length,o))}}}}:function(e,t,i,n){if(!t.length)return null;var o=n?v:b,r=o(t).split(/\r|\n\r?/);e:for(var s=i.line,l=i.ch,a=e.lastLine()+1-r.length;s<=a;s++,l=0){var c=e.getLine(s).slice(l),h=o(c);if(1==r.length){var d=h.indexOf(r[0]);if(-1==d)continue;return i=g(c,h,d,o)+l,{from:y(s,g(c,h,d,o)+l),to:y(s,g(c,h,d+r[0].length,o)+l)}}d=h.length-r[0].length;if(h.slice(d)==r[0]){for(var u=1;u<r.length-1;u++)if(o(e.getLine(s+u))!=r[u])continue e;var p=e.getLine(s+r.length-1),f=o(p),m=r[r.length-1];if(f.slice(0,m.length)==m)return{from:y(s,g(c,h,d,o)+l),to:y(s+r.length-1,g(p,f,m.length,o))}}}})(i,n,t,o)}):(n=p(n,"gm"),t&&!1===t.multiline?this.matches=function(e,t){return(e?function(e,t,i){t=p(t,"g");for(var n=i.line,o=i.ch,r=e.firstLine();r<=n;n--,o=-1){var s=e.getLine(n),s=m(s=-1<o?s.slice(0,o):s,t);if(s)return{from:y(n,s.index),to:y(n,s.index+s[0].length),match:s}}}:f)(i,n,t)}:this.matches=function(e,t){return(e?function(e,t,i){t=p(t,"gm");for(var n=1,o=i.line,r=e.firstLine();r<=o;){for(var s=0;s<n;s++)var l=e.getLine(o--),a=null==a?l.slice(0,i.ch):l+"\n"+a;n*=2;var c,h,d,u=m(a,t);if(u)return d=a.slice(0,u.index).split("\n"),c=u[0].split("\n"),h=o+d.length,d=d[d.length-1].length,{from:y(h,d),to:y(h+c.length-1,1==c.length?d+c[0].length:c[c.length-1].length),match:u}}}:function(e,t,i){if(!/\\s|\\n|\n|\\W|\\D|\[\^/.test(t.source))return f(e,t,i);t=p(t,"gm");for(var n=1,o=i.line,r=e.lastLine();o<=r;){for(var s=0;s<n&&!(r<o);s++)var l=e.getLine(o++),a=null==a?l:a+"\n"+l;n*=2,t.lastIndex=i.ch;var c,h,d,u=t.exec(a);if(u)return d=a.slice(0,u.index).split("\n"),c=u[0].split("\n"),h=i.line+d.length-1,d=d[d.length-1].length,{from:y(h,d),to:y(h+c.length-1,1==c.length?d+c[0].length:c[c.length-1].length),match:u}}})(i,n,t)})}var o,v,b,y;o="object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror,y=o.Pos,b=String.prototype.normalize?(v=function(e){return e.normalize("NFD").toLowerCase()},function(e){return e.normalize("NFD")}):(v=function(e){return e.toLowerCase()},function(e){return e}),n.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){for(var t,i=this.matches(e,this.doc.clipPos(e?this.pos.from:this.pos.to));i&&0==o.cmpPos(i.from,i.to);)e?i.from.ch?i.from=y(i.from.line,i.from.ch-1):i=i.from.line==this.doc.firstLine()?null:this.matches(e,this.doc.clipPos(y(i.from.line-1))):i.to.ch<this.doc.getLine(i.to.line).length?i.to=y(i.to.line,i.to.ch+1):i=i.to.line==this.doc.lastLine()?null:this.matches(e,y(i.to.line+1,0));return i?(this.pos=i,this.atOccurrence=!0,this.pos.match||!0):(t=y(e?this.doc.firstLine():this.doc.lastLine()+1,0),this.pos={from:t,to:t},this.atOccurrence=!1)},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(e,t){this.atOccurrence&&(e=o.splitLines(e),this.doc.replaceRange(e,this.pos.from,this.pos.to,t),this.pos.to=y(this.pos.from.line+e.length-1,e[e.length-1].length+(1==e.length?this.pos.from.ch:0)))}},o.defineExtension("getSearchCursor",function(e,t,i){return new n(this.doc,e,t,i)}),o.defineDocExtension("getSearchCursor",function(e,t,i){return new n(this,e,t,i)}),o.defineExtension("selectMatches",function(e,t){for(var i=[],n=this.getSearchCursor(e,this.getCursor("from"),t);n.findNext()&&!(0<o.cmpPos(n.to(),this.getCursor("to")));)i.push({anchor:n.from(),head:n.to()});i.length&&this.setSelections(i,0)})},{"../../lib/codemirror":11}],10:[function(e,t,i){function n(s){s.state.markedSelection&&s.operation(function(){var e=s;if(e.somethingSelected())if(1<e.listSelections().length)c(e);else{var t=e.getCursor("start"),i=e.getCursor("end"),n=e.state.markedSelection;if(n.length){var o=n[0].find(),r=n[n.length-1].find();if(!o||!r||i.line-t.line<=d||0<=p(t,r.to)||p(i,o.from)<=0)c(e);else{for(;0<p(t,o.from);)n.shift().clear(),o=n[0].find();for(p(t,o.from)<0&&(o.to.line-t.line<d?(n.shift().clear(),l(e,t,o.to,0)):l(e,t,o.from,0));p(i,r.to)<0;)n.pop().clear(),r=n[n.length-1].find();0<p(i,r.to)&&(i.line-r.from.line<d?(n.pop().clear(),l(e,r.from,i)):l(e,r.to,i))}}else l(e,t,i)}else a(e)})}function o(e){e.state.markedSelection&&e.state.markedSelection.length&&e.operation(function(){a(e)})}function l(e,t,i,n){if(0!=p(t,i))for(var o=e.state.markedSelection,r=e.state.markedSelectionStyle,s=t.line;;){var l=s==t.line?t:u(s,0),a=s+d,c=a>=i.line,h=c?i:u(a,0),l=e.markText(l,h,{className:r});if(null==n?o.push(l):o.splice(n++,0,l),c)break;s=a}}function a(e){for(var t=e.state.markedSelection,i=0;i<t.length;++i)t[i].clear();t.length=0}function c(e){a(e);for(var t=e.listSelections(),i=0;i<t.length;i++)l(e,t[i].from(),t[i].to())}var r,d,u,p;(r="object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror).defineOption("styleSelectedText",!1,function(e,t,i){i=i&&i!=r.Init;t&&!i?(e.state.markedSelection=[],e.state.markedSelectionStyle="string"==typeof t?t:"CodeMirror-selectedtext",c(e),e.on("cursorActivity",n),e.on("change",o)):!t&&i&&(e.off("cursorActivity",n),e.off("change",o),a(e),e.state.markedSelection=e.state.markedSelectionStyle=null)}),d=8,u=r.Pos,p=r.cmpPos},{"../../lib/codemirror":11}],11:[function(e,t,i){var n=function(){var e=navigator.userAgent,l=navigator.platform,v=/gecko\/\d/i.test(e),t=/MSIE \d/.test(e),a=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),c=/Edge\/(\d+)/.exec(e),j=t||a||c,P=j&&(t?document.documentMode||6:+(c||a)[1]),I=!c&&/WebKit\//.test(e),t=I&&/Qt\/\d+\.\d+/.test(e),h=!c&&/Chrome\//.test(e),k=/Opera\//.test(e),C=/Apple Computer/.test(navigator.vendor),u=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),te=/PhantomJS/.test(e),T=!c&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),_=/Android/.test(e),L=T||_||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),ie=T||/Mac/.test(l),ne=/\bCrOS\b/.test(e),a=/win/i.test(l),c=k&&e.match(/Version\/(\d*\.\d*)/),A=((c=c&&Number(c[1]))&&15<=c&&(I=!(k=!1)),ie&&(t||k&&(null==c||c<12.11))),oe=v||j&&9<=P;function E(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var M=function(e,t){var i,n=e.className,t=E(t).exec(n);t&&(i=n.slice(t.index+t[0].length),e.className=n.slice(0,t.index)+(i?t[1]+i:""))};function O(e){for(var t=e.childNodes.length;0<t;--t)e.removeChild(e.firstChild);return e}function y(e,t){return O(e).appendChild(t)}function B(e,t,i,n){var o=document.createElement(e);if(i&&(o.className=i),n&&(o.style.cssText=n),"string"==typeof t)o.appendChild(document.createTextNode(t));else if(t)for(var r=0;r<t.length;++r)o.appendChild(t[r]);return o}function D(e,t,i,n){e=B(e,t,i,n);return e.setAttribute("role","presentation"),e}function F(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if((t=11==t.nodeType?t.host:t)==e)return!0}while(t=t.parentNode)}function re(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function N(e,t){var i=e.className;E(t).test(i)||(e.className+=(i?" ":"")+t)}function z(e,t){for(var i=e.split(" "),n=0;n<i.length;n++)i[n]&&!E(i[n]).test(t)&&(t+=" "+i[n]);return t}var se=document.createRange?function(e,t,i,n){var o=document.createRange();return o.setEnd(n||e,i),o.setStart(e,t),o}:function(e,t,i){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(e){return n}return n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",t),n},le=function(e){e.select()};function ae(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function ce(e,t,i){for(var n in t=t||{},e)!e.hasOwnProperty(n)||!1===i&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function R(e,t,i,n,o){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var r=n||0,s=o||0;;){var l=e.indexOf("\t",r);if(l<0||t<=l)return s+(t-r);s=(s+=l-r)+(i-s%i),r=l+1}}T?le=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:j&&(le=function(e){try{e.select()}catch(e){}});function he(){this.id=null}function S(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}var de=30,ue={toString:function(){return"CodeMirror.Pass"}},pe={scroll:!(he.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)})},fe={origin:"*mouse"},me={origin:"+move"};function ge(e,t,i){for(var n=0,o=0;;){var r=e.indexOf("\t",n),s=(r=-1==r?e.length:r)-n;if(r==e.length||t<=o+s)return n+Math.min(s,t-o);if(o+=r-n,n=r+1,t<=(o+=i-o%i))return n}}var ve=[""];function be(e){for(;ve.length<=e;)ve.push($(ve)+" ");return ve[e]}function $(e){return e[e.length-1]}function ye(e,t){for(var i=[],n=0;n<e.length;n++)i[n]=t(e[n],n);return i}function xe(){}function we(e,t){e=Object.create?Object.create(e):(xe.prototype=e,new xe);return t&&ce(t,e),e}var ke=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Ce(e){return/\w/.test(e)||""<e&&(e.toUpperCase()!=e.toLowerCase()||ke.test(e))}function Se(e,t){return t?!!(-1<t.source.indexOf("\\w")&&Ce(e))||t.test(e):Ce(e)}function Te(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return;return 1}var _e=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Le(e){return 768<=e.charCodeAt(0)&&_e.test(e)}function Ae(e,t,i){for(;(i<0?0<t:t<e.length)&&Le(e.charAt(t));)t+=i;return t}function Ee(e,t,i){for(var n=i<t?-1:1;;){if(t==i)return t;var o=(t+i)/2,o=n<0?Math.ceil(o):Math.floor(o);if(o==t)return e(o)?t:i;e(o)?i=o:t=o+n}}function H(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var n=0;;++n){var o=i.children[n],r=o.chunkSize();if(t<r){i=o;break}t-=r}return i.lines[t]}function Me(e,t,i){var n=[],o=t.line;return e.iter(t.line,i.line+1,function(e){e=e.text;o==i.line&&(e=e.slice(0,i.ch)),o==t.line&&(e=e.slice(t.ch)),n.push(e),++o}),n}function Oe(e,t,i){var n=[];return e.iter(t,i,function(e){n.push(e.text)}),n}function De(e,t){var i=t-e.height;if(i)for(var n=e;n;n=n.parent)n.height+=i}function x(e){if(null==e.parent)return null;for(var t=e.parent,i=S(t.lines,e),n=t.parent;n;n=(t=n).parent)for(var o=0;n.children[o]!=t;++o)i+=n.children[o].chunkSize();return i+t.first}function Fe(e,t){var i=e.first;e:do{for(var n=0;n<e.children.length;++n){var o=e.children[n],r=o.height;if(t<r){e=o;continue e}t-=r,i+=o.chunkSize()}return i}while(!e.lines);for(var s=0;s<e.lines.length;++s){var l=e.lines[s].height;if(t<l)break;t-=l}return i+s}function Ne(e,t){return t>=e.first&&t<e.first+e.size}function ze(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function W(e,t,i){if(void 0===i&&(i=null),!(this instanceof W))return new W(e,t,i);this.line=e,this.ch=t,this.sticky=i}function U(e,t){return e.line-t.line||e.ch-t.ch}function je(e,t){return e.sticky==t.sticky&&0==U(e,t)}function Pe(e){return W(e.line,e.ch)}function Ie(e,t){return U(e,t)<0?t:e}function Be(e,t){return U(e,t)<0?e:t}function Re(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function q(e,t){var i;return t.line<e.first?W(e.first,0):(i=e.first+e.size-1,t.line>i?W(i,H(e,i).text.length):(e=H(e,(i=t).line).text.length,null==(t=i.ch)||e<t?W(i.line,e):t<0?W(i.line,0):i))}function $e(e,t){for(var i=[],n=0;n<t.length;n++)i[n]=q(e,t[n]);return i}var He=!1,We=!1;function Ue(e,t,i){this.marker=e,this.from=t,this.to=i}function qe(e,t){if(e)for(var i=0;i<e.length;++i){var n=e[i];if(n.marker==t)return n}}function Ve(e,t){if(t.full)return null;var i=Ne(e,t.from.line)&&H(e,t.from.line).markedSpans,e=Ne(e,t.to.line)&&H(e,t.to.line).markedSpans;if(!i&&!e)return null;var n=t.from.ch,o=t.to.ch,r=0==U(t.from,t.to),s=function(e,t,i){var n;if(e)for(var o=0;o<e.length;++o){var r,s=e[o],l=s.marker;null!=s.from&&!(l.inclusiveLeft?s.from<=t:s.from<t)&&(s.from!=t||"bookmark"!=l.type||i&&s.marker.insertLeft)||(r=null==s.to||(l.inclusiveRight?s.to>=t:s.to>t),(n=n||[]).push(new Ue(l,s.from,r?null:s.to)))}return n}(i,n,r),l=function(e,t,i){var n;if(e)for(var o=0;o<e.length;++o){var r,s=e[o],l=s.marker;null!=s.to&&!(l.inclusiveRight?s.to>=t:s.to>t)&&(s.from!=t||"bookmark"!=l.type||i&&!s.marker.insertLeft)||(r=null==s.from||(l.inclusiveLeft?s.from<=t:s.from<t),(n=n||[]).push(new Ue(l,r?null:s.from-t,null==s.to?null:s.to-t)))}return n}(e,o,r),a=1==t.text.length,c=$(t.text).length+(a?n:0);if(s)for(var h=0;h<s.length;++h){var d,u=s[h];null==u.to&&((d=qe(l,u.marker))?a&&(u.to=null==d.to?null:d.to+c):u.to=n)}if(l)for(var p=0;p<l.length;++p){var f=l[p];null!=f.to&&(f.to+=c),null==f.from?qe(s,f.marker)||(f.from=c,a&&(s=s||[]).push(f)):(f.from+=c,a&&(s=s||[]).push(f))}s=s&&Ge(s),l&&l!=s&&(l=Ge(l));var m=[s];if(!a){var g,v=t.text.length-2;if(0<v&&s)for(var b=0;b<s.length;++b)null==s[b].to&&(g=g||[]).push(new Ue(s[b].marker,null,null));for(var y=0;y<v;++y)m.push(g);m.push(l)}return m}function Ge(e){for(var t=0;t<e.length;++t){var i=e[t];null!=i.from&&i.from==i.to&&!1!==i.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Xe(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function Ke(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function Ye(e){return e.inclusiveLeft?-1:0}function Ze(e){return e.inclusiveRight?1:0}function Je(e,t){var i,n,o=e.lines.length-t.lines.length;return 0!=o?o:(o=e.find(),i=t.find(),(n=U(o.from,i.from)||Ye(e)-Ye(t))?-n:U(o.to,i.to)||Ze(e)-Ze(t)||t.id-e.id)}function Qe(e,t){var i,n=We&&e.markedSpans;if(n)for(var o,r=0;r<n.length;++r)(o=n[r]).marker.collapsed&&null==(t?o.from:o.to)&&(!i||Je(i,o.marker)<0)&&(i=o.marker);return i}function et(e){return Qe(e,!0)}function tt(e){return Qe(e,!1)}function it(e,t,i,n,o){var e=H(e,t),r=We&&e.markedSpans;if(r)for(var s=0;s<r.length;++s){var l=r[s];if(l.marker.collapsed){var a=l.marker.find(0),c=U(a.from,i)||Ye(l.marker)-Ye(o),h=U(a.to,n)||Ze(l.marker)-Ze(o);if(!(0<=c&&h<=0||c<=0&&0<=h)&&(c<=0&&(l.marker.inclusiveRight&&o.inclusiveLeft?0<=U(a.to,i):0<U(a.to,i))||0<=c&&(l.marker.inclusiveRight&&o.inclusiveLeft?U(a.from,n)<=0:U(a.from,n)<0)))return 1}}}function nt(e){for(var t;t=et(e);)e=t.find(-1,!0).line;return e}function ot(e,t){var e=H(e,t),i=nt(e);return e==i?t:x(i)}function rt(e,t){if(t>e.lastLine())return t;var i,n=H(e,t);if(!st(e,n))return t;for(;i=tt(n);)n=i.find(1,!0).line;return x(n)+1}function st(e,t){var i=We&&t.markedSpans;if(i)for(var n,o=0;o<i.length;++o)if((n=i[o]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&function e(t,i,n){{var o;if(null==n.to)return o=n.marker.find(1,!0),e(t,o.line,qe(o.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==i.text.length)return!0;for(var r=void 0,s=0;s<i.markedSpans.length;++s)if((r=i.markedSpans[s]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&e(t,i,r))return!0}(e,t,n))return!0}}function lt(e){for(var t=0,i=(e=nt(e)).parent,n=0;n<i.lines.length;++n){var o=i.lines[n];if(o==e)break;t+=o.height}for(var r=i.parent;r;r=(i=r).parent)for(var s=0;s<r.children.length;++s){var l=r.children[s];if(l==i)break;t+=l.height}return t}function at(e){if(0==e.height)return 0;for(var t,i=e.text.length,n=e;t=et(n);){var o=t.find(0,!0),n=o.from.line;i+=o.from.ch-o.to.ch}for(n=e;t=tt(n);)var r=t.find(0,!0),i=(i-=n.text.length-r.from.ch)+((n=r.to.line).text.length-r.to.ch);return i}function ct(e){var i=e.display,e=e.doc;i.maxLine=H(e,e.first),i.maxLineLength=at(i.maxLine),i.maxLineChanged=!0,e.iter(function(e){var t=at(e);t>i.maxLineLength&&(i.maxLineLength=t,i.maxLine=e)})}var ht=null;function dt(e,t,i){var n;ht=null;for(var o=0;o<e.length;++o){var r=e[o];if(r.from<t&&r.to>t)return o;r.to==t&&(r.from!=r.to&&"before"==i?n=o:ht=o),r.from==t&&(r.from!=r.to&&"before"!=i?n=o:ht=o)}return null!=n?n:ht}ut=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,pt=/[stwN]/,ft=/[LRr]/,mt=/[Lb1n]/,gt=/[1n]/;var ut,pt,ft,mt,gt,vt=function(e,t){var i="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!ut.test(e))return!1;for(var n,o=e.length,r=[],s=0;s<o;++s)r.push((n=e.charCodeAt(s))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(n-1536):1774<=n&&n<=2220?"r":8192<=n&&n<=8203?"w":8204==n?"b":"L");for(var l=0,a=i;l<o;++l){var c=r[l];"m"==c?r[l]=a:a=c}for(var h=0,d=i;h<o;++h){var u=r[h];"1"==u&&"r"==d?r[h]="n":ft.test(u)&&"r"==(d=u)&&(r[h]="R")}for(var p=1,f=r[0];p<o-1;++p){var m=r[p];"+"==m&&"1"==f&&"1"==r[p+1]?r[p]="1":","!=m||f!=r[p+1]||"1"!=f&&"n"!=f||(r[p]=f),f=m}for(var g=0;g<o;++g){var v=r[g];if(","==v)r[g]="N";else if("%"==v){for(var b=void 0,b=g+1;b<o&&"%"==r[b];++b);for(var y=g&&"!"==r[g-1]||b<o&&"1"==r[b]?"1":"N",x=g;x<b;++x)r[x]=y;g=b-1}}for(var w=0,k=i;w<o;++w){var C=r[w];"L"==k&&"1"==C?r[w]="L":ft.test(C)&&(k=C)}for(var S=0;S<o;++S)if(pt.test(r[S])){for(var T=void 0,T=S+1;T<o&&pt.test(r[T]);++T);for(var _="L"==(S?r[S-1]:i),L=_==("L"==(T<o?r[T]:i))?_?"L":"R":i,A=S;A<T;++A)r[A]=L;S=T-1}for(var E,M=[],O=0;O<o;)if(mt.test(r[O])){var D=O;for(++O;O<o&&mt.test(r[O]);++O);M.push(new bt(0,D,O))}else{var F=O,N=M.length;for(++O;O<o&&"L"!=r[O];++O);for(var z=F;z<O;)if(gt.test(r[z])){F<z&&M.splice(N,0,new bt(1,F,z));var j=z;for(++z;z<O&&gt.test(r[z]);++z);M.splice(N,0,new bt(2,j,z)),F=z}else++z;F<O&&M.splice(N,0,new bt(1,F,O))}return"ltr"==t&&(1==M[0].level&&(E=e.match(/^\s+/))&&(M[0].from=E[0].length,M.unshift(new bt(0,0,E[0].length))),1==$(M).level)&&(E=e.match(/\s+$/))&&($(M).to-=E[0].length,M.push(new bt(0,o-E[0].length,o))),"rtl"==t?M.reverse():M};function bt(e,t,i){this.level=e,this.from=t,this.to=i}function yt(e,t){var i=e.order;return i=null==i?e.order=vt(e.text,t):i}var xt=[],V=function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):(e=e._handlers||(e._handlers={}))[t]=(e[t]||xt).concat(i)};function wt(e,t){return e._handlers&&e._handlers[t]||xt}function G(e,t,i){var n;e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent?e.detachEvent("on"+t,i):(n=(e=e._handlers)&&e[t])&&-1<(i=S(n,i))&&(e[t]=n.slice(0,i).concat(n.slice(i+1)))}function X(e,t){var i=wt(e,t);if(i.length)for(var n=Array.prototype.slice.call(arguments,2),o=0;o<i.length;++o)i[o].apply(null,n)}function K(e,t,i){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),X(e,i||t.type,e,t),_t(t)||t.codemirrorIgnore}function kt(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==S(i,t[n])&&i.push(t[n])}function Ct(e,t){return 0<wt(e,t).length}function St(e){e.prototype.on=function(e,t){V(this,e,t)},e.prototype.off=function(e,t){G(this,e,t)}}function Y(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Tt(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function _t(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Lt(e){Y(e),Tt(e)}function At(e){return e.target||e.srcElement}function Et(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),t=ie&&e.ctrlKey&&1==t?3:t}var Mt,Ot,Dt=!(j&&P<9)&&("draggable"in(l=B("div"))||"dragDrop"in l);var Ft=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,i=[],n=e.length;t<=n;){var o=e.indexOf("\n",t),r=(-1==o&&(o=e.length),e.slice(t,"\r"==e.charAt(o-1)?o-1:o)),s=r.indexOf("\r");-1!=s?(i.push(r.slice(0,s)),t+=s+1):(i.push(r),t=o+1)}return i}:function(e){return e.split(/\r\n?|\n/)},Nt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},zt="oncopy"in(e=B("div"))||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy),jt=null,Pt={},It={};function Bt(e){if("string"==typeof e&&It.hasOwnProperty(e))e=It[e];else if(e&&"string"==typeof e.name&&It.hasOwnProperty(e.name)){var t=It[e.name];(e=we(t="string"==typeof t?{name:t}:t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Bt("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Bt("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Rt(e,t){t=Bt(t);var i=Pt[t.name];if(!i)return Rt(e,"text/plain");var n=i(e,t);if($t.hasOwnProperty(t.name)){var o,r=$t[t.name];for(o in r)r.hasOwnProperty(o)&&(n.hasOwnProperty(o)&&(n["_"+o]=n[o]),n[o]=r[o])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)n[s]=t.modeProps[s];return n}var $t={};function Ht(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var i,n={};for(i in t){var o=t[i];o instanceof Array&&(o=o.concat([])),n[i]=o}return n}function Wt(e,t){for(var i;e.innerMode&&(i=e.innerMode(t))&&i.mode!=e;)t=i.state,e=i.mode;return i||{mode:e,state:t}}function Ut(e,t,i){return!e.startState||e.startState(t,i)}var m=function(e,t,i){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i},qt=(m.prototype.eol=function(){return this.pos>=this.string.length},m.prototype.sol=function(){return this.pos==this.lineStart},m.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},m.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},m.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},m.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},m.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},m.prototype.skipToEnd=function(){this.pos=this.string.length},m.prototype.skipTo=function(e){e=this.string.indexOf(e,this.pos);if(-1<e)return this.pos=e,!0},m.prototype.backUp=function(e){this.pos-=e},m.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=R(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},m.prototype.indentation=function(){return R(this.string,null,this.tabSize)-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},m.prototype.match=function(e,t,i){var n;return"string"!=typeof e?(n=this.string.slice(this.pos).match(e))&&0<n.index?null:(n&&!1!==t&&(this.pos+=n[0].length),n):(n=function(e){return i?e.toLowerCase():e})(this.string.substr(this.pos,e.length))==n(e)?(!1!==t&&(this.pos+=e.length),!0):void 0},m.prototype.current=function(){return this.string.slice(this.start,this.pos)},m.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},m.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},m.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)},function(e,t){this.state=e,this.lookAhead=t}),Vt=function(e,t,i,n){this.state=t,this.doc=e,this.line=i,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};function Gt(t,i,n,e){var a=[t.state.modeGen],o={};ii(t,i.text,t.doc.mode,n,function(e,t){a.push(e,t)},o,e);for(var c=n.state,r=0;r<t.state.overlays.length;++r)!function(e){n.baseTokens=a;var r=t.state.overlays[e],s=1,l=0;n.state=!0,ii(t,i.text,r.mode,n,function(e,t){for(var i=s;l<e;){var n=a[s];e<n&&a.splice(s,1,e,a[s+1],n),s+=2,l=Math.min(e,n)}if(t)if(r.opaque)a.splice(i,s-i,e,"overlay "+t),s=i+2;else for(;i<s;i+=2){var o=a[i+1];a[i+1]=(o?o+" ":"")+"overlay "+t}},o),n.state=c,n.baseTokens=null,n.baseTokenPos=1}(r);return{styles:a,classes:o.bgClass||o.textClass?o:null}}function Xt(e,t,i){var n,o,r;return t.styles&&t.styles[0]==e.state.modeGen||(n=Kt(e,x(t)),o=t.text.length>e.options.maxHighlightLength&&Ht(e.doc.mode,n.state),r=Gt(e,t,n),o&&(n.state=o),t.stateAfter=n.save(!o),t.styles=r.styles,r.classes?t.styleClasses=r.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))),t.styles}function Kt(i,c,e){var t,n,o,r=i.doc,s=i.display;return r.mode.startState?(n=(t=function(e,t){for(var i,n,o=e.doc,r=t?-1:c-(e.doc.mode.innerMode?1e3:100),s=c;r<s;--s){if(s<=o.first)return o.first;var l=H(o,s-1),a=l.stateAfter;if(a&&(!t||s+(a instanceof qt?a.lookAhead:0)<=o.modeFrontier))return s;a=R(l.text,null,e.options.tabSize);(null==n||a<i)&&(n=s-1,i=a)}return n}(i,e))>r.first&&H(r,t-1).stateAfter,o=n?Vt.fromSaved(r,n,t):new Vt(r,Ut(r.mode),t),r.iter(t,c,function(e){Yt(i,e.text,o);var t=o.line;e.stateAfter=t==c-1||t%5==0||t>=s.viewFrom&&t<s.viewTo?o.save():null,o.nextLine()}),e&&(r.modeFrontier=o.line),o):new Vt(r,!0,c)}function Yt(e,t,i,n){var o=e.doc.mode,r=new m(t,e.options.tabSize,i);for(r.start=r.pos=n||0,""==t&&Zt(o,i.state);!r.eol();)Jt(o,r,i.state),r.start=r.pos}function Zt(e,t){return e.blankLine?e.blankLine(t):e.innerMode&&(e=Wt(e,t)).mode.blankLine?e.mode.blankLine(e.state):void 0}function Jt(e,t,i,n){for(var o=0;o<10;o++){n&&(n[0]=Wt(e,i).mode);var r=e.token(t,i);if(t.pos>t.start)return r}throw new Error("Mode "+e.name+" failed to advance stream.")}Vt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Vt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Vt.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},Vt.fromSaved=function(e,t,i){return t instanceof qt?new Vt(e,Ht(e.mode,t.state),i,t.lookAhead):new Vt(e,Ht(e.mode,t),i)},Vt.prototype.save=function(e){e=!1!==e?Ht(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new qt(e,this.maxLookAhead):e};function Qt(e,t,i){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=i}function ei(e,t,i,n){var o,r,s=e.doc,l=s.mode,a=H(s,(t=q(s,t)).line),c=Kt(e,t.line,i),h=new m(a.text,e.options.tabSize,c);for(n&&(r=[]);(n||h.pos<t.ch)&&!h.eol();)h.start=h.pos,o=Jt(l,h,c.state),n&&r.push(new Qt(h,o,Ht(s.mode,c.state)));return n?r:new Qt(h,o,c.state)}function ti(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var n=i[1]?"bgClass":"textClass";null==t[n]?t[n]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+i[2])}return e}function ii(e,t,i,n,o,r,s){var l=i.flattenSpans;null==l&&(l=e.options.flattenSpans);var a=0,c=null,h=new m(t,e.options.tabSize,n),d=e.options.addModeClass&&[null];for(""==t&&ti(Zt(i,n.state),r);!h.eol();){var u,p=h.pos>e.options.maxHighlightLength?(l=!1,s&&Yt(e,t,n,h.pos),h.pos=t.length,null):ti(Jt(i,h,n.state,d),r);if(d&&(u=d[0].name)&&(p="m-"+(p?u+" "+p:u)),!l||c!=p){for(;a<h.start;)o(a=Math.min(h.start,a+5e3),c);c=p}h.start=h.pos}for(;a<h.pos;){var f=Math.min(h.pos,a+5e3);o(f,c),a=f}}var ni=function(e,t,i){this.text=e,Ke(this,t),this.height=i?i(this):1},oi=(ni.prototype.lineNo=function(){return x(this)},St(ni),{}),ri={};function si(e,t){return!e||/^\s*$/.test(e)?null:(t=t.addModeClass?ri:oi)[e]||(t[e]=e.replace(/\S+/g,"cm-$&"))}function li(e,t){var i=D("span",null,null,I?"padding-right: .1px":null),n={pre:D("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var o,r,s,l=0;l<=(t.rest?t.rest.length:0);l++){var a=l?t.rest[l-1]:t.line,c=void 0;n.pos=0,n.addToken=ci,o=e.display.measure,s=r=void 0,(null!=Ot?Ot:(s=y(o,document.createTextNode("AA")),r=se(s,0,1).getBoundingClientRect(),s=se(s,1,2).getBoundingClientRect(),O(o),r&&r.left!=r.right&&(Ot=s.right-r.right<3)))&&(c=yt(a,e.doc.direction))&&(n.addToken=function(d,u){return function(e,t,i,n,o,r,s){i=i?i+" cm-force-border":"cm-force-border";for(var l=e.pos,a=l+t.length;;){for(var c=void 0,h=0;h<u.length&&!((c=u[h]).to>l&&c.from<=l);h++);if(c.to>=a)return d(e,t,i,n,o,r,s);d(e,t.slice(0,c.to-l),i,n,null,r,s),n=null,t=t.slice(c.to-l),l=c.to}}}(n.addToken,c)),n.map=[],function(e,t,i){var n=e.markedSpans,o=e.text,r=0;if(n)for(var s,l,a,c,h,d,u,p=o.length,f=0,m=1,g="",v=0;;){if(v==f){a=c=h=d=l="",u=null,v=1/0;for(var b=[],y=void 0,x=0;x<n.length;++x){var w=n[x],k=w.marker;"bookmark"==k.type&&w.from==f&&k.widgetNode?b.push(k):w.from<=f&&(null==w.to||w.to>f||k.collapsed&&w.to==f&&w.from==f)?(null!=w.to&&w.to!=f&&v>w.to&&(v=w.to,c=""),k.className&&(a+=" "+k.className),k.css&&(l=(l?l+";":"")+k.css),k.startStyle&&w.from==f&&(h+=" "+k.startStyle),k.endStyle&&w.to==v&&(y=y||[]).push(k.endStyle,w.to),k.title&&!d&&(d=k.title),k.collapsed&&(!u||Je(u.marker,k)<0)&&(u=w)):w.from>f&&v>w.from&&(v=w.from)}if(y)for(var C=0;C<y.length;C+=2)y[C+1]==v&&(c+=" "+y[C]);if(!u||u.from==f)for(var S=0;S<b.length;++S)hi(t,0,b[S]);if(u&&(u.from||0)==f){if(hi(t,(null==u.to?p+1:u.to)-f,u.marker,null==u.from),null==u.to)return;u.to==f&&(u=!1)}}if(p<=f)break;for(var T=Math.min(p,v);;){if(g){var _,L=f+g.length;if(u||(_=T<L?g.slice(0,T-f):g,t.addToken(t,_,s?s+a:a,h,f+_.length==v?c:"",d,l)),T<=L){g=g.slice(T-f),f=T;break}f=L,h=""}g=o.slice(r,r=i[m++]),s=si(i[m++],t.cm.options)}}else for(var A=1;A<i.length;A+=2)t.addToken(t,o.slice(r,r=i[A]),si(i[A+1],t.cm.options))}(a,n,Xt(e,a,t!=e.display.externalMeasured&&x(a))),a.styleClasses&&(a.styleClasses.bgClass&&(n.bgClass=z(a.styleClasses.bgClass,n.bgClass||"")),a.styleClasses.textClass)&&(n.textClass=z(a.styleClasses.textClass,n.textClass||"")),0==n.map.length&&n.map.push(0,0,n.content.appendChild((o=e.display.measure,s=void 0,(o=(Mt=null==Mt&&(s=B("span",""),y(o,B("span",[s,document.createTextNode("x")])),0!=o.firstChild.offsetHeight)?s.offsetWidth<=1&&2<s.offsetHeight&&!(j&&P<8):Mt)?B("span",""):B("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")).setAttribute("cm-text",""),o))),0==l?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return I&&(i=n.content.lastChild,/\bcm-tab\b/.test(i.className)||i.querySelector&&i.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack"),X(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=z(n.pre.className,n.textClass||"")),n}function ai(e){var t=B("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function ci(e,t,i,n,o,r,s){if(t){var l=e.splitSpaces?function(e,t){if(1<e.length&&!/  /.test(e))return e;for(var i=t,n="",o=0;o<e.length;o++){var r=e.charAt(o);n+=r=" "!=r||!i||o!=e.length-1&&32!=e.charCodeAt(o+1)?r:" ",i=" "==r}return n}(t,e.trailingSpace):t,a=e.cm.state.specialChars,c=!1;if(a.test(t))for(var h=document.createDocumentFragment(),d=0;;){a.lastIndex=d;var u=a.exec(t),p=u?u.index-d:t.length-d;if(p&&(f=document.createTextNode(l.slice(d,d+p)),j&&P<9?h.appendChild(B("span",[f])):h.appendChild(f),e.map.push(e.pos,e.pos+p,f),e.col+=p,e.pos+=p),!u)break;d+=1+p;var f=void 0;"\t"==u[0]?(p=(p=e.cm.options.tabSize)-e.col%p,(f=h.appendChild(B("span",be(p),"cm-tab"))).setAttribute("role","presentation"),f.setAttribute("cm-text","\t"),e.col+=p):("\r"==u[0]||"\n"==u[0]?(f=h.appendChild(B("span","\r"==u[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",u[0]):((f=e.cm.options.specialCharPlaceholder(u[0])).setAttribute("cm-text",u[0]),j&&P<9?h.appendChild(B("span",[f])):h.appendChild(f)),e.col+=1),e.map.push(e.pos,e.pos+1,f),e.pos++}else e.col+=t.length,h=document.createTextNode(l),e.map.push(e.pos,e.pos+t.length,h),j&&P<9&&(c=!0),e.pos+=t.length;if(e.trailingSpace=32==l.charCodeAt(t.length-1),i||n||o||c||s)return c=i||"",n&&(c+=n),o&&(c+=o),i=B("span",[h],c,s),r&&(i.title=r),e.content.appendChild(i);e.content.appendChild(h)}}function hi(e,t,i,n){var o=!n&&i.widgetNode;o&&e.map.push(e.pos,e.pos+t,o),!n&&e.cm.display.input.needsContentAttribute&&(o=o||e.content.appendChild(document.createElement("span"))).setAttribute("cm-marker",i.id),o&&(e.cm.display.input.setUneditable(o),e.content.appendChild(o)),e.pos+=t,e.trailingSpace=!1}function di(e,t,i){this.line=t,this.rest=function(e){for(var t,i;t=tt(e);)e=t.find(1,!0).line,(i=i||[]).push(e);return i}(t),this.size=this.rest?x($(this.rest))-i+1:1,this.node=this.text=null,this.hidden=st(e,t)}function ui(e,t,i){for(var n=[],o=t;o<i;o=s){var r=new di(e.doc,H(e.doc,o),o),s=o+r.size;n.push(r)}return n}var pi=null,fi=null;function b(e,t){var i=wt(e,t);if(i.length){var n,o=Array.prototype.slice.call(arguments,2);pi?n=pi.delayedCallbacks:fi?n=fi:(n=fi=[],setTimeout(mi,0));for(var r=0;r<i.length;++r)!function(e){n.push(function(){return i[e].apply(null,o)})}(r)}}function mi(){var e=fi;fi=null;for(var t=0;t<e.length;++t)e[t]()}function gi(e,t,i,n){for(var o,r,s=0;s<t.changes.length;s++){var l=t.changes[s];if("text"==l)r=(o=t).text.className,a=bi(h=e,o),o.text==o.node&&(o.node=a.pre),o.text.parentNode.replaceChild(a.pre,o.text),o.text=a.pre,a.bgClass!=o.bgClass||a.textClass!=o.textClass?(o.bgClass=a.bgClass,o.textClass=a.textClass,yi(h,o)):r&&(o.text.className=r);else if("gutter"==l)xi(e,t,i,n);else if("class"==l)yi(e,t);else if("widget"==l){a=void 0;c=void 0;h=void 0;d=void 0;u=void 0;var a=e;var c=t;var h=n;c.alignable&&(c.alignable=null);for(var d=c.node.firstChild,u=void 0;d;d=u)u=d.nextSibling,"CodeMirror-linewidget"==d.className&&c.node.removeChild(d);wi(a,c,h)}}t.changes=null}function vi(e){return e.node==e.text&&(e.node=B("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),j)&&P<8&&(e.node.style.zIndex=2),e.node}function bi(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):li(e,t)}function yi(e,t){e=e,(o=(i=t).bgClass?i.bgClass+" "+(i.line.bgClass||""):i.line.bgClass)&&(o+=" CodeMirror-linebackground"),i.background?o?i.background.className=o:(i.background.parentNode.removeChild(i.background),i.background=null):o&&(n=vi(i),i.background=n.insertBefore(B("div",null,o),n.firstChild),e.display.input.setUneditable(i.background)),t.line.wrapClass?vi(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var i,n,o=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=o||""}function xi(e,t,i,n){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass&&(r=vi(t),t.gutterBackground=B("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),r.insertBefore(t.gutterBackground,t.text));var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var r=vi(t),s=t.gutter=B("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(e.display.input.setUneditable(s),r.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(B("div",ze(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<e.options.gutters.length;++l){var a=e.options.gutters[l],c=o.hasOwnProperty(a)&&o[a];c&&s.appendChild(B("div",[c],"CodeMirror-gutter-elt","left: "+n.gutterLeft[a]+"px; width: "+n.gutterWidth[a]+"px"))}}}function wi(e,t,i){if(ki(e,t.line,t,i,!0),t.rest)for(var n=0;n<t.rest.length;n++)ki(e,t.rest[n],t,i,!1)}function ki(e,t,i,n,o){if(t.widgets)for(var r=vi(i),s=0,l=t.widgets;s<l.length;++s){var a=l[s],c=B("div",[a.node],"CodeMirror-linewidget"),h=(a.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),p=u=d=h=void 0,a),d=c,u=i,p=n;h.noHScroll&&((u.alignable||(u.alignable=[])).push(d),u=p.wrapperWidth,d.style.left=p.fixedPos+"px",h.coverGutter||(u-=p.gutterTotalWidth,d.style.paddingLeft=p.gutterTotalWidth+"px"),d.style.width=u+"px"),h.coverGutter&&(d.style.zIndex=5,d.style.position="relative",h.noHScroll||(d.style.marginLeft=-p.gutterTotalWidth+"px")),e.display.input.setUneditable(c),o&&a.above?r.insertBefore(c,i.gutter||i.text):r.appendChild(c),b(a,"redraw")}}function Ci(e){var t,i;return null!=e.height?e.height:(t=e.doc.cm)?(F(document.body,e.node)||(i="position: relative;",e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),y(t.display.measure,B("div",[e.node],null,i))),e.height=e.node.parentNode.offsetHeight):0}function Si(e,t){for(var i=At(t);i!=e.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==e.sizer&&i!=e.mover)return!0}function Ti(e){return e.lineSpace.offsetTop}function _i(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Li(e){var t;return e.cachedPaddingH||(t=y(e.measure,B("pre","x")),t=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,t={left:parseInt(t.paddingLeft),right:parseInt(t.paddingRight)},isNaN(t.left)||isNaN(t.right)||(e.cachedPaddingH=t),t)}function Ai(e){return de-e.display.nativeBarWidth}function Ei(e){return e.display.scroller.clientWidth-Ai(e)-e.display.barWidth}function Mi(e){return e.display.scroller.clientHeight-Ai(e)-e.display.barHeight}function Oi(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var o=0;o<e.rest.length;o++)if(x(e.rest[o])>i)return{map:e.measure.maps[o],cache:e.measure.caches[o],before:!0}}function Di(e,t,i,n){return zi(e,Ni(e,t),i,n)}function Fi(e,t){return t>=e.display.viewFrom&&t<e.display.viewTo?e.display.view[cn(e,t)]:(e=e.display.externalMeasured)&&t>=e.lineN&&t<e.lineN+e.size?e:void 0}function Ni(e,t){var i,n,o=x(t),r=Fi(e,o),e=(r&&!r.text?r=null:r&&r.changes&&(gi(e,r,o,on(e)),e.curOp.forceUpdate=!0),r||(e=e,n=x(i=nt(t)),(i=e.display.externalMeasured=new di(e.doc,i,n)).lineN=n,n=i.built=li(e,i),i.text=n.pre,y(e.display.lineMeasure,n.pre),r=i),Oi(r,t,o));return{line:t,view:r,rect:null,map:e.map,cache:e.cache,before:e.before,hasHeights:!1}}function zi(e,t,i,n,o){var r,s=(i=t.before?-1:i)+(n||"");if(t.cache.hasOwnProperty(s))r=t.cache[s];else{if(t.rect||(t.rect=t.view.text.getBoundingClientRect()),!t.hasHeights){var l=t.view,a=t.rect,c=e.options.lineWrapping,h=c&&Ei(e);if(!l.measure.heights||c&&l.measure.width!=h){var d=l.measure.heights=[];if(c){l.measure.width=h;for(var u=l.text.firstChild.getClientRects(),p=0;p<u.length-1;p++){var f=u[p],m=u[p+1];2<Math.abs(f.bottom-m.bottom)&&d.push((f.bottom+m.top)/2-a.top)}}d.push(a.bottom-a.top)}t.hasHeights=!0}(r=function(e,t,i,n){var o,r,s,l=Ii(t.map,i,n),a=l.node,c=l.start,h=l.end,d=l.collapse;if(3==a.nodeType){for(var u=0;u<4;u++){for(;c&&Le(t.line.text.charAt(l.coverStart+c));)--c;for(;l.coverStart+h<l.coverEnd&&Le(t.line.text.charAt(l.coverStart+h));)++h;if((s=j&&P<9&&0==c&&h==l.coverEnd-l.coverStart?a.parentNode.getBoundingClientRect():function(e,t){var i=Pi;if("left"==t)for(var n=0;n<e.length&&(i=e[n]).left==i.right;n++);else for(var o=e.length-1;0<=o&&(i=e[o]).left==i.right;o--);return i}(se(a,c,h).getClientRects(),n)).left||s.right||0==c)break;h=c,--c,d="right"}j&&P<11&&(i=e.display.measure,r=s,s=window.screen&&null!=screen.logicalXDPI&&screen.logicalXDPI!=screen.deviceXDPI&&(null!=jt?jt:(o=(i=y(i,B("span","x"))).getBoundingClientRect(),i=se(i,0,1).getBoundingClientRect(),jt=1<Math.abs(o.left-i.left)))?(o=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI,{left:r.left*o,right:r.right*o,top:r.top*i,bottom:r.bottom*i}):r)}else 0<c&&(d=n="right"),s=e.options.lineWrapping&&1<(i=a.getClientRects()).length?i["right"==n?i.length-1:0]:a.getBoundingClientRect();for(var i=(s=!(j&&P<9)||c||s&&(s.left||s.right)?s:(r=a.parentNode.getClientRects()[0])?{left:r.left,right:r.left+nn(e.display),top:r.top,bottom:r.bottom}:Pi).top-t.rect.top,p=s.bottom-t.rect.top,f=(i+p)/2,m=t.view.measure.heights,g=0;g<m.length-1&&!(f<m[g]);g++);var v=g?m[g-1]:0,b=m[g],v={left:("right"==d?s.right:s.left)-t.rect.left,right:("left"==d?s.left:s.right)-t.rect.left,top:v,bottom:b};return s.left||s.right||(v.bogus=!0),e.options.singleCursorHeightPerLine||(v.rtop=i,v.rbottom=p),v}(e,t,i,n)).bogus||(t.cache[s]=r)}return{left:r.left,right:r.right,top:o?r.rtop:r.top,bottom:o?r.rbottom:r.bottom}}var ji,Pi={left:0,right:0,top:0,bottom:0};function Ii(e,t,i){for(var n,o,r,s,l,a,c=0;c<e.length;c+=3)if(l=e[c],a=e[c+1],t<l?(o=0,r=1,s="left"):t<a?r=1+(o=t-l):(c==e.length-3||t==a&&e[c+3]>t)&&(o=(r=a-l)-1,a<=t)&&(s="right"),null!=o){if(n=e[c+2],l==a&&i==(n.insertLeft?"left":"right")&&(s=i),"left"==i&&0==o)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)n=e[2+(c-=3)],s="left";if("right"==i&&o==a-l)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)n=e[(c+=3)+2],s="right";break}return{node:n,start:o,end:r,collapse:s,coverStart:l,coverEnd:a}}function Bi(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Ri(e){e.display.externalMeasure=null,O(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Bi(e.display.view[t])}function $i(e){Ri(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Hi(){return h&&_?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Wi(){return h&&_?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ui(e){var t=0;if(e.widgets)for(var i=0;i<e.widgets.length;++i)e.widgets[i].above&&(t+=Ci(e.widgets[i]));return t}function qi(e,t,i,n,o){return o||(o=Ui(t),i.top+=o,i.bottom+=o),"line"!=n&&(n=n||"local",o=lt(t),"local"==n?o+=Ti(e.display):o-=e.display.viewOffset,"page"!=n&&"window"!=n||(o+=(t=e.display.lineSpace.getBoundingClientRect()).top+("window"==n?0:Wi()),e=t.left+("window"==n?0:Hi()),i.left+=e,i.right+=e),i.top+=o,i.bottom+=o),i}function Vi(e,t,i){var n;return"div"==i?t:(n=t.left,t=t.top,"page"==i?(n-=Hi(),t-=Wi()):"local"!=i&&i||(n+=(i=e.display.sizer.getBoundingClientRect()).left,t+=i.top),{left:n-(i=e.display.lineSpace.getBoundingClientRect()).left,top:t-i.top})}function Gi(e,t,i,n,o){return qi(e,n=n||H(e.doc,t.line),Di(e,n,t.ch,o),i)}function Xi(i,e,n,o,r,s){function l(e,t){e=zi(i,r,e,t?"right":"left",s);return t?e.left=e.right:e.right=e.left,qi(i,o,e,n)}o=o||H(i.doc,e.line),r=r||Ni(i,o);var t,a,c=yt(o,i.doc.direction),h=e.ch,e=e.sticky;return h>=o.text.length?(h=o.text.length,e="before"):h<=0&&(h=0,e="after"),c?(a=dt(c,h,e),t=ht,a=d(h,a,"before"==e),null!=t&&(a.other=d(h,t,"before"!=e)),a):l("before"==e?h-1:h,"before"==e);function d(e,t,i){return l(i?e-1:e,1==c[t].level!=i)}}function Ki(e,t){var i=0,t=(t=q(e.doc,t),e.options.lineWrapping||(i=nn(e.display)*t.ch),H(e.doc,t.line)),e=lt(t)+Ti(e.display);return{left:i,right:i,top:e,bottom:e+t.height}}function Yi(e,t,i,n,o){e=W(e,t,i);return e.xRel=o,n&&(e.outside=!0),e}function Zi(e,t,i){var n=e.doc;if((i+=e.display.viewOffset)<0)return Yi(n.first,0,null,!0,-1);var o=Fe(n,i),r=n.first+n.size-1;if(r<o)return Yi(n.first+n.size-1,H(n,r).text.length,null,!0,1);t<0&&(t=0);for(var s=H(n,o);;){var l=function(i,e,t,n,o){o-=lt(e);var r=Ni(i,e),s=Ui(e),l=0,a=e.text.length,c=!0,h=yt(e,i.doc.direction);h&&(h=(i.options.lineWrapping?function(e,t,i,n,o,r,s){var s=Ji(e,t,n,s),l=s.begin,a=s.end;/\s/.test(t.text.charAt(a-1))&&a--;for(var c=null,h=null,d=0;d<o.length;d++){var u,p=o[d];p.from>=a||p.to<=l||(u=(u=zi(e,n,1!=p.level?Math.min(a,p.to)-1:Math.max(l,p.from)).right)<r?r-u+1e9:u-r,(!c||u<h)&&(c=p,h=u))}return c=(c=(c=c||o[o.length-1]).from<l?{from:l,to:c.to,level:c.level}:c).to>a?{from:c.from,to:a,level:c.level}:c}:function(i,n,o,r,s,l,a){var e,t=Ee(function(e){var e=s[e],t=1!=e.level;return en(Xi(i,W(o,t?e.to:e.from,t?"before":"after"),"line",n,r),l,a,!0)},0,s.length-1),c=s[t];return c=0<t&&(e=1!=c.level,en(e=Xi(i,W(o,e?c.from:c.to,e?"after":"before"),"line",n,r),l,a,!0))&&e.top>a?s[t-1]:c})(i,e,t,r,h,n,o),l=(c=1!=h.level)?h.from:h.to-1,a=c?h.to:h.from-1);var d=null,u=null,h=Ee(function(e){var t=zi(i,r,e);return t.top+=s,t.bottom+=s,en(t,n,o,!1)&&(t.top<=o&&t.left<=n&&(d=e,u=t),1)},l,a),p=!1;{var f,m;u?(f=n-u.left<u.right-n,h=d+((m=f==c)?0:1),m=m?"after":"before",f=f?u.left:u.right):(c||h!=a&&h!=l||h++,m=0==h||h!=e.text.length&&zi(i,r,h-(c?1:0)).bottom+s<=o==c?"after":"before",a=Xi(i,W(t,h,m),"line",e,r),f=a.left,p=o<a.top||o>=a.bottom)}return Yi(t,h=Ae(e.text,h,1),m,p,n-f)}(e,s,o,t,i),a=function(e,t){var i,n=We&&e.markedSpans;if(n)for(var o=0;o<n.length;++o){var r=n[o];r.marker.collapsed&&(null==r.from||r.from<t)&&(null==r.to||r.to>t)&&(!i||Je(i,r.marker)<0)&&(i=r.marker)}return i}(s,l.ch+(0<l.xRel?1:0));if(!a)return l;l=a.find(1);if(l.line==o)return l;s=H(n,o=l.line)}}function Ji(t,e,i,n){n-=Ui(e);var e=e.text.length,o=Ee(function(e){return zi(t,i,e-1).bottom<=n},e,0);return{begin:o,end:Ee(function(e){return zi(t,i,e).top>n},o,e)}}function Qi(e,t,i,n){return Ji(e,t,i=i||Ni(e,t),qi(e,t,zi(e,i,n),"line").top)}function en(e,t,i,n){return!(e.bottom<=i)&&(e.top>i||(n?e.left:e.right)>t)}function tn(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==ji){ji=B("pre");for(var t=0;t<49;++t)ji.appendChild(document.createTextNode("x")),ji.appendChild(B("br"));ji.appendChild(document.createTextNode("x"))}y(e.measure,ji);var i=ji.offsetHeight/50;return 3<i&&(e.cachedTextHeight=i),O(e.measure),i||1}function nn(e){var t,i;return null!=e.cachedCharWidth?e.cachedCharWidth:(i=B("span","xxxxxxxxxx"),t=B("pre",[i]),y(e.measure,t),2<(i=((t=i.getBoundingClientRect()).right-t.left)/10)&&(e.cachedCharWidth=i),i||10)}function on(e){for(var t=e.display,i={},n={},o=t.gutters.clientLeft,r=t.gutters.firstChild,s=0;r;r=r.nextSibling,++s)i[e.options.gutters[s]]=r.offsetLeft+r.clientLeft+o,n[e.options.gutters[s]]=r.clientWidth;return{fixedPos:rn(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function rn(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function sn(n){var o=tn(n.display),r=n.options.lineWrapping,s=r&&Math.max(5,n.display.scroller.clientWidth/nn(n.display)-3);return function(e){if(st(n.doc,e))return 0;var t=0;if(e.widgets)for(var i=0;i<e.widgets.length;i++)e.widgets[i].height&&(t+=e.widgets[i].height);return r?t+(Math.ceil(e.text.length/s)||1)*o:t+o}}function ln(e){var t=e.doc,i=sn(e);t.iter(function(e){var t=i(e);t!=e.height&&De(e,t)})}function an(e,t,i,n){var o=e.display;if(!i&&"true"==At(t).getAttribute("cm-not-content"))return null;var r,i=o.lineSpace.getBoundingClientRect();try{r=t.clientX-i.left,s=t.clientY-i.top}catch(t){return null}var s,o=Zi(e,r,s);return n&&1==o.xRel&&(i=H(e.doc,o.line).text).length==o.ch&&(s=R(i,i.length,e.options.tabSize)-i.length,o=W(o.line,Math.max(0,Math.round((r-Li(e.display).left)/nn(e.display))-s))),o}function cn(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var i=e.display.view,n=0;n<i.length;n++)if((t-=i[n].size)<0)return n}function hn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function dn(e,t){void 0===t&&(t=!0);for(var i,n,o=e.doc,r={},s=r.cursors=document.createDocumentFragment(),l=r.selection=document.createDocumentFragment(),a=0;a<o.sel.ranges.length;a++)!t&&a==o.sel.primIndex||(i=o.sel.ranges[a]).from().line>=e.display.viewTo||i.to().line<e.display.viewFrom||(((n=i.empty())||e.options.showCursorWhenSelecting)&&un(e,i.head,s),n)||function(o,e,t){var i=o.display,r=o.doc,s=document.createDocumentFragment(),n=Li(o.display),C=n.left,S=Math.max(i.sizerWidth,Ei(o)-i.sizer.offsetLeft)-n.right,T="ltr"==r.direction;function _(e,t,i,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),s.appendChild(B("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==i?S-e:i)+"px;\n                             height: "+(n-t)+"px"))}function l(i,m,g){var v,b,n=H(r,i),y=n.text.length;function x(e,t){return Gi(o,W(i,e),"div",n,t)}function w(e,t,i){e=Qi(o,n,null,e),t="ltr"==t==("after"==i)?"left":"right";return x("after"==i?e.begin:e.end-(/\s/.test(n.text.charAt(e.end-1))?2:1),t)[t]}var k=yt(n,r.direction);return function(e,t,i,n){if(!e)return n(t,i,"ltr",0);for(var o=!1,r=0;r<e.length;++r){var s=e[r];(s.from<i&&s.to>t||t==i&&s.to==t)&&(n(Math.max(s.from,t),Math.min(s.to,i),1==s.level?"rtl":"ltr",r),o=!0)}o||n(t,i,"ltr")}(k,m||0,null==g?y:g,function(e,t,i,n){var o,r,s,l,a,c="ltr"==i,h=x(e,c?"left":"right"),d=x(t-1,c?"right":"left"),u=null==m&&0==e,p=null==g&&t==y,f=0==n,n=!k||n==k.length-1;d.top-h.top<=3?(o=(T?u:p)&&f?C:(c?h:d).left,a=(T?p:u)&&n?S:(c?d:h).right,_(o,h.top,a-o,h.bottom)):(a=c?(r=T&&u&&f?C:h.left,s=T?S:w(e,i,"before"),l=T?C:w(t,i,"after"),T&&p&&n?S:d.right):(r=T?w(e,i,"before"):C,s=!T&&u&&f?S:h.right,l=!T&&p&&n?C:d.left,T?w(t,i,"after"):S),_(r,h.top,s-r,h.bottom),h.bottom<d.top&&_(C,h.bottom,null,d.top),_(l,d.top,a-l,d.bottom)),(!v||pn(h,v)<0)&&(v=h),pn(d,v)<0&&(v=d),(!b||pn(h,b)<0)&&(b=h),pn(d,b)<0&&(b=d)}),{start:v,end:b}}i=e.from(),n=e.to();{var a;i.line==n.line?l(i.line,i.ch,n.ch):(e=H(r,i.line),a=H(r,n.line),a=nt(e)==nt(a),i=l(i.line,i.ch,a?e.text.length+1:null).end,e=l(n.line,a?0:null,n.ch).start,a&&(i.top<e.top-2?(_(i.right,i.top,null,i.bottom),_(C,e.top,e.left,e.bottom)):_(i.right,i.top,e.left-i.right,i.bottom)),i.bottom<e.top&&_(C,i.bottom,null,e.top))}t.appendChild(s)}(e,i,l);return r}function un(e,t,i){var t=Xi(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),n=i.appendChild(B("div"," ","CodeMirror-cursor"));n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.height=Math.max(0,t.bottom-t.top)*e.options.cursorHeight+"px",t.other&&((n=i.appendChild(B("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"))).style.display="",n.style.left=t.other.left+"px",n.style.top=t.other.top+"px",n.style.height=.85*(t.other.bottom-t.other.top)+"px")}function pn(e,t){return e.top-t.top||e.left-t.left}function fn(e){var t,i;e.state.focused&&(t=e.display,clearInterval(t.blinker),i=!0,t.cursorDiv.style.visibility="",0<e.options.cursorBlinkRate?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden"))}function mn(e){e.state.focused||(e.display.input.focus(),vn(e))}function gn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,bn(e))},100)}function vn(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(X(e,"focus",e,t),e.state.focused=!0,N(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),I&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),fn(e))}function bn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(X(e,"blur",e,t),e.state.focused=!1,M(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function yn(e){for(var t=e.display,i=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var o=t.view[n],r=void 0;if(!o.hidden){j&&P<8?(r=(s=o.node.offsetTop+o.node.offsetHeight)-i,i=s):r=(s=o.node.getBoundingClientRect()).bottom-s.top;var s,l=o.line.height-r;if(r<2&&(r=tn(t)),(.005<l||l<-.005)&&(De(o.line,r),xn(o.line),o.rest))for(var a=0;a<o.rest.length;a++)xn(o.rest[a])}}}function xn(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var i=e.widgets[t],n=i.node.parentNode;n&&(i.height=n.offsetHeight)}}function wn(e,t,i){var n,o=i&&null!=i.top?Math.max(0,i.top):e.scroller.scrollTop,o=Math.floor(o-Ti(e)),r=i&&null!=i.bottom?i.bottom:o+e.wrapper.clientHeight,o=Fe(t,o),r=Fe(t,r);return i&&i.ensure&&(n=i.ensure.from.line,i=i.ensure.to.line,n<o?r=Fe(t,lt(H(t,o=n))+e.wrapper.clientHeight):Math.min(i,t.lastLine())>=r&&(o=Fe(t,lt(H(t,i))-e.wrapper.clientHeight),r=i)),{from:o,to:Math.max(r,o+1)}}function kn(e){var t=e.display,i=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=rn(t)-t.scroller.scrollLeft+e.doc.scrollLeft,o=t.gutters.offsetWidth,r=n+"px",s=0;s<i.length;s++)if(!i[s].hidden){e.options.fixedGutter&&(i[s].gutter&&(i[s].gutter.style.left=r),i[s].gutterBackground)&&(i[s].gutterBackground.style.left=r);var l=i[s].alignable;if(l)for(var a=0;a<l.length;a++)l[a].style.left=r}e.options.fixedGutter&&(t.gutters.style.left=n+o+"px")}}function Cn(e){if(e.options.lineNumbers){var t,i,n=e.doc,n=ze(e.options,n.first+n.size-1),o=e.display;if(n.length!=o.lineNumChars)return t=(i=o.measure.appendChild(B("div",[B("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt"))).firstChild.offsetWidth,i=i.offsetWidth-t,o.lineGutter.style.width="",o.lineNumInnerWidth=Math.max(t,o.lineGutter.offsetWidth-i)+1,o.lineNumWidth=o.lineNumInnerWidth+i,o.lineNumChars=o.lineNumInnerWidth?n.length:-1,o.lineGutter.style.width=o.lineNumWidth+"px",Qn(e),1}}function Sn(e,t){var i=e.display,n=tn(e.display),o=(t.top<0&&(t.top=0),(e.curOp&&null!=e.curOp.scrollTop?e.curOp:i.scroller).scrollTop),r=Mi(e),s={},l=(t.bottom-t.top>r&&(t.bottom=t.top+r),e.doc.height+_i(i)),a=t.top<n,n=t.bottom>l-n,n=(t.top<o?s.scrollTop=a?0:t.top:t.bottom>o+r&&(a=Math.min(t.top,(n?l:t.bottom)-r))!=o&&(s.scrollTop=a),(e.curOp&&null!=e.curOp.scrollLeft?e.curOp:i.scroller).scrollLeft),l=Ei(e)-(e.options.fixedGutter?i.gutters.offsetWidth:0),r=t.right-t.left>l;return r&&(t.right=t.left+l),t.left<10?s.scrollLeft=0:t.left<n?s.scrollLeft=Math.max(0,t.left-(r?0:10)):t.right>l+n-3&&(s.scrollLeft=t.right+(r?0:10)-l),s}function Tn(e,t){null!=t&&(An(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc:e.curOp).scrollTop+t)}function _n(e){An(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Ln(e,t,i){null==t&&null==i||An(e),null!=t&&(e.curOp.scrollLeft=t),null!=i&&(e.curOp.scrollTop=i)}function An(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,En(e,Ki(e,t.from),Ki(e,t.to),t.margin))}function En(e,t,i,n){t=Sn(e,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-n,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+n});Ln(e,t.scrollLeft,t.scrollTop)}function Mn(e,t){Math.abs(e.doc.scrollTop-t)<2||(v||Jn(e,{top:t}),On(e,t,!0),v&&Jn(e),Gn(e,100))}function On(e,t,i){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),e.display.scroller.scrollTop==t&&!i||(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop==t)||(e.display.scroller.scrollTop=t)}function Dn(e,t,i,n){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!n||(e.doc.scrollLeft=t,kn(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Fn(e){var t=e.display,i=t.gutters.offsetWidth,n=Math.round(e.doc.height+_i(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:n,scrollHeight:n+Ai(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}function Nn(e,t,i){this.cm=i;var n=this.vert=B("div",[B("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=B("div",[B("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");n.tabIndex=o.tabIndex=-1,e(n),e(o),V(n,"scroll",function(){n.clientHeight&&t(n.scrollTop,"vertical")}),V(o,"scroll",function(){o.clientWidth&&t(o.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,j&&P<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function zn(){}Nn.prototype.update=function(e){var t,i=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,o=e.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=i?o+"px":"0",t=e.viewHeight-(i?o:0),this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+t)+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),i?(this.horiz.style.display="block",this.horiz.style.right=n?o+"px":"0",this.horiz.style.left=e.barLeft+"px",t=e.viewWidth-e.barLeft-(n?o:0),this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+t)+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&0<e.clientHeight&&(0==o&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?o:0,bottom:i?o:0}},Nn.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Nn.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Nn.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=ie&&!u?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new he,this.disableVert=new he},Nn.prototype.enableZeroWidthBar=function(i,n,o){i.style.pointerEvents="auto",n.set(1e3,function e(){var t=i.getBoundingClientRect();("vert"==o?document.elementFromPoint(t.right-1,(t.top+t.bottom)/2):document.elementFromPoint((t.right+t.left)/2,t.bottom-1))!=i?i.style.pointerEvents="none":n.set(1e3,e)})},Nn.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};function jn(e,t){t=t||Fn(e);var i=e.display.barWidth,n=e.display.barHeight;Pn(e,t);for(var o=0;o<4&&i!=e.display.barWidth||n!=e.display.barHeight;o++)i!=e.display.barWidth&&e.options.lineWrapping&&yn(e),Pn(e,Fn(e)),i=e.display.barWidth,n=e.display.barHeight}function Pn(e,t){var i=e.display,n=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=n.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=n.bottom)+"px",i.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=n.bottom+"px",i.scrollbarFiller.style.width=n.right+"px"):i.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=n.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}zn.prototype.update=function(){return{bottom:0,right:0}},zn.prototype.setScrollLeft=function(){},zn.prototype.setScrollTop=function(){},zn.prototype.clear=function(){};var In={native:Nn,null:zn};function Bn(i){i.display.scrollbars&&(i.display.scrollbars.clear(),i.display.scrollbars.addClass)&&M(i.display.wrapper,i.display.scrollbars.addClass),i.display.scrollbars=new In[i.options.scrollbarStyle](function(e){i.display.wrapper.insertBefore(e,i.display.scrollbarFiller),V(e,"mousedown",function(){i.state.focused&&setTimeout(function(){return i.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,t){("horizontal"==t?Dn:Mn)(i,e)},i),i.display.scrollbars.addClass&&N(i.display.wrapper,i.display.scrollbars.addClass)}var Rn=0;function $n(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Rn},e=e.curOp,pi?pi.ops.push(e):e.ownsGroup=pi={ops:[e],delayedCallbacks:[]}}function Hn(e){e=e.curOp;if(e){e=e.ownsGroup;if(e)try{var t=e,i=t.delayedCallbacks,n=0;do{for(;n<i.length;n++)i[n].call(null);for(var o=0;o<t.ops.length;o++){var r=t.ops[o];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<i.length)}finally{pi=null;for(var s=e,l=0;l<s.ops.length;l++)s.ops[l].cm.curOp=null;for(var a=s.ops,c=0;c<a.length;c++)u=void 0,f=(p=(h=a[c]).cm).display,!(u=(d=p).display).scrollbarsClipped&&u.scroller.offsetWidth&&(u.nativeBarWidth=u.scroller.offsetWidth-u.scroller.clientWidth,u.heightForcer.style.height=Ai(d)+"px",u.sizer.style.marginBottom=-u.nativeBarWidth+"px",u.sizer.style.borderRightWidth=Ai(d)+"px",u.scrollbarsClipped=!0),h.updateMaxLine&&ct(p),h.mustUpdate=h.viewChanged||h.forceUpdate||null!=h.scrollTop||h.scrollToPos&&(h.scrollToPos.from.line<f.viewFrom||h.scrollToPos.to.line>=f.viewTo)||f.maxLineChanged&&p.options.lineWrapping,h.update=h.mustUpdate&&new Kn(p,h.mustUpdate&&{top:h.scrollTop,ensure:h.scrollToPos},h.forceUpdate);for(var h,d,u,p,f,m,g,v,b,y=0;y<a.length;y++)(m=a[y]).updatedDisplay=m.mustUpdate&&Yn(m.cm,m.update);for(var j=0;j<a.length;j++)b=v=void 0,b=(v=(g=a[j]).cm).display,g.updatedDisplay&&yn(v),g.barMeasure=Fn(v),b.maxLineChanged&&!v.options.lineWrapping&&(g.adjustWidthTo=Di(v,b.maxLine,b.maxLine.text.length).left+3,v.display.sizerWidth=g.adjustWidthTo,g.barMeasure.scrollWidth=Math.max(b.scroller.clientWidth,b.sizer.offsetLeft+g.adjustWidthTo+Ai(v)+v.display.barWidth),g.maxScrollLeft=Math.max(0,b.sizer.offsetLeft+g.adjustWidthTo-Ei(v))),(g.updatedDisplay||g.selectionChanged)&&(g.preparedSelection=b.input.prepareSelection());for(var x,w,k,P=0;P<a.length;P++)x=a[P],k=w=void 0,w=x.cm,null!=x.adjustWidthTo&&(w.display.sizer.style.minWidth=x.adjustWidthTo+"px",x.maxScrollLeft<w.doc.scrollLeft&&Dn(w,Math.min(w.display.scroller.scrollLeft,x.maxScrollLeft),!0),w.display.maxLineChanged=!1),k=x.focus&&x.focus==re(),x.preparedSelection&&w.display.input.showSelection(x.preparedSelection,k),!x.updatedDisplay&&x.startHeight==w.doc.height||jn(w,x.barMeasure),x.updatedDisplay&&eo(w,x.barMeasure),x.selectionChanged&&fn(w),w.state.focused&&x.updateInput&&w.display.input.reset(x.typing),k&&mn(x.cm);for(var C,S,T,_,L,I=0;I<a.length;I++){A=void 0;E=void 0;M=void 0;O=void 0;D=void 0;F=void 0;N=void 0;z=void 0;C=void 0;S=void 0;T=void 0;L=void 0;_=void 0;var A=a[I];var E=A.cm,M=E.display,O=E.doc;A.updatedDisplay&&Zn(E,A.update),null==M.wheelStartX||null==A.scrollTop&&null==A.scrollLeft&&!A.scrollToPos||(M.wheelStartX=M.wheelStartY=null),null!=A.scrollTop&&On(E,A.scrollTop,A.forceScroll),null!=A.scrollLeft&&Dn(E,A.scrollLeft,!0,!0),A.scrollToPos&&(S=function(e,t,i,n){var o;null==n&&(n=0),e.options.lineWrapping||t!=i||(i="before"==(t=t.ch?W(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?W(t.line,t.ch+1,"before"):t);for(var r=0;r<5;r++){var s=!1,l=Xi(e,t),a=i&&i!=t?Xi(e,i):l,l=Sn(e,o={left:Math.min(l.left,a.left),top:Math.min(l.top,a.top)-n,right:Math.max(l.left,a.left),bottom:Math.max(l.bottom,a.bottom)+n}),a=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=l.scrollTop&&(Mn(e,l.scrollTop),1<Math.abs(e.doc.scrollTop-a))&&(s=!0),!(s=null!=l.scrollLeft&&(Dn(e,l.scrollLeft),1<Math.abs(e.doc.scrollLeft-c))?!0:s))break}return o}(C=E,q(O,A.scrollToPos.from),q(O,A.scrollToPos.to),A.scrollToPos.margin),K(C,"scrollCursorIntoView")||(T=C.display,L=T.sizer.getBoundingClientRect(),_=null,S.top+L.top<0?_=!0:S.bottom+L.top>(window.innerHeight||document.documentElement.clientHeight)&&(_=!1),null==_)||te||(L=B("div","",null,"position: absolute;\n                         top: "+(S.top-T.viewOffset-Ti(C.display))+"px;\n                         height: "+(S.bottom-S.top+Ai(C)+T.barHeight)+"px;\n                         left: "+S.left+"px; width: "+Math.max(2,S.right-S.left)+"px;"),C.display.lineSpace.appendChild(L),L.scrollIntoView(_),C.display.lineSpace.removeChild(L)));var D=A.maybeHiddenMarkers,F=A.maybeUnhiddenMarkers;if(D)for(var N=0;N<D.length;++N)D[N].lines.length||X(D[N],"hide");if(F)for(var z=0;z<F.length;++z)F[z].lines.length&&X(F[z],"unhide");M.wrapper.offsetHeight&&(O.scrollTop=E.display.scroller.scrollTop),A.changeObjs&&X(E,"changes",E,A.changeObjs),A.update&&A.update.finish()}}}}function d(e,t){if(e.curOp)return t();$n(e);try{return t()}finally{Hn(e)}}function Z(e,t){return function(){if(e.curOp)return t.apply(e,arguments);$n(e);try{return t.apply(e,arguments)}finally{Hn(e)}}}function i(e){return function(){if(this.curOp)return e.apply(this,arguments);$n(this);try{return e.apply(this,arguments)}finally{Hn(this)}}}function n(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);$n(e);try{return t.apply(this,arguments)}finally{Hn(e)}}}function w(e,t,i,n){null==t&&(t=e.doc.first),null==i&&(i=e.doc.first+e.doc.size);var o,r=e.display,s=((n=n||0)&&i<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo?We&&ot(e.doc,t)<r.viewTo&&Un(e):i<=r.viewFrom?We&&rt(e.doc,i+n)>r.viewFrom?Un(e):(r.viewFrom+=n,r.viewTo+=n):t<=r.viewFrom&&i>=r.viewTo?Un(e):t<=r.viewFrom?(s=qn(e,i,i+n,1))?(r.view=r.view.slice(s.index),r.viewFrom=s.lineN,r.viewTo+=n):Un(e):i>=r.viewTo?(s=qn(e,t,t,-1))?(r.view=r.view.slice(0,s.index),r.viewTo=s.lineN):Un(e):(s=qn(e,t,t,-1),o=qn(e,i,i+n,1),s&&o?(r.view=r.view.slice(0,s.index).concat(ui(e,s.lineN,o.lineN)).concat(r.view.slice(o.index)),r.viewTo+=n):Un(e)),r.externalMeasured);s&&(i<s.lineN?s.lineN+=n:t<s.lineN+s.size&&(r.externalMeasured=null))}function Wn(e,t,i){e.curOp.viewChanged=!0;var n=e.display,o=e.display.externalMeasured;o&&t>=o.lineN&&t<o.lineN+o.size&&(n.externalMeasured=null),t<n.viewFrom||t>=n.viewTo||null!=(o=n.view[cn(e,t)]).node&&-1==S(n=o.changes||(o.changes=[]),i)&&n.push(i)}function Un(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function qn(e,t,i,n){var o,r=cn(e,t),s=e.display.view;if(We&&i!=e.doc.first+e.doc.size){for(var l=e.display.viewFrom,a=0;a<r;a++)l+=s[a].size;if(l!=t){if(0<n){if(r==s.length-1)return null;o=l+s[r].size-t,r++}else o=l-t;t+=o,i+=o}for(;ot(e.doc,i)!=i;){if(r==(n<0?0:s.length-1))return null;i+=n*s[r-(n<0?1:0)].size,r+=n}}return{index:r,lineN:i}}function Vn(e){for(var t=e.display.view,i=0,n=0;n<t.length;n++){var o=t[n];o.hidden||o.node&&!o.changes||++i}return i}function Gn(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,ae(Xn,e))}function Xn(s){var l,a,c,h=s.doc;h.highlightFrontier>=s.display.viewTo||(l=+new Date+s.options.workTime,a=Kt(s,h.highlightFrontier),c=[],h.iter(a.line,Math.min(h.first+h.size,s.display.viewTo+500),function(e){if(a.line>=s.display.viewFrom){var t=e.styles,i=e.text.length>s.options.maxHighlightLength?Ht(h.mode,a.state):null,n=Gt(s,e,a,!0),i=(i&&(a.state=i),e.styles=n.styles,e.styleClasses),n=n.classes;n?e.styleClasses=n:i&&(e.styleClasses=null);for(var o=!t||t.length!=e.styles.length||i!=n&&(!i||!n||i.bgClass!=n.bgClass||i.textClass!=n.textClass),r=0;!o&&r<t.length;++r)o=t[r]!=e.styles[r];o&&c.push(a.line),e.stateAfter=a.save()}else e.text.length<=s.options.maxHighlightLength&&Yt(s,e.text,a),e.stateAfter=a.line%5==0?a.save():null;if(a.nextLine(),+new Date>l)return Gn(s,s.options.workDelay),!0}),h.highlightFrontier=a.line,h.modeFrontier=Math.max(h.modeFrontier,a.line),c.length&&d(s,function(){for(var e=0;e<c.length;e++)Wn(s,c[e],"text")}))}var Kn=function(e,t,i){var n=e.display;this.viewport=t,this.visible=wn(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=Ei(e),this.force=i,this.dims=on(e),this.events=[]};function Yn(e,t){var i=e.display,n=e.doc;if(t.editorIsHidden)Un(e);else if(!(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==Vn(e))){Cn(e)&&(Un(e),t.dims=on(e));var o=n.first+n.size,r=Math.max(t.visible.from-e.options.viewportMargin,n.first),s=Math.min(o,t.visible.to+e.options.viewportMargin);i.viewFrom<r&&r-i.viewFrom<20&&(r=Math.max(n.first,i.viewFrom)),i.viewTo>s&&i.viewTo-s<20&&(s=Math.min(o,i.viewTo)),We&&(r=ot(e.doc,r),s=rt(e.doc,s));var n=r!=i.viewFrom||s!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth,o=r,r=s,o=(0==(l=(s=e).display).view.length||o>=l.viewTo||r<=l.viewFrom?(l.view=ui(s,o,r),l.viewFrom=o):(l.viewFrom>o?l.view=ui(s,o,l.viewFrom).concat(l.view):l.viewFrom<o&&(l.view=l.view.slice(cn(s,o))),l.viewFrom=o,l.viewTo<r?l.view=l.view.concat(ui(s,l.viewTo,r)):l.viewTo>r&&(l.view=l.view.slice(0,cn(s,r)))),l.viewTo=r,i.viewOffset=lt(H(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px",Vn(e));if(n||0!=o||t.force||i.renderedView!=i.view||!(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)){var l,a,c,h,s=!(s=e).hasFocus()&&(l=re())&&F(s.display.lineDiv,l)?(l={activeElt:l},window.getSelection&&(r=window.getSelection()).anchorNode&&r.extend&&F(s.display.lineDiv,r.anchorNode)&&(l.anchorNode=r.anchorNode,l.anchorOffset=r.anchorOffset,l.focusNode=r.focusNode,l.focusOffset=r.focusOffset),l):null,d=(4<o&&(i.lineDiv.style.display="none"),e),u=i.updateLineNumbers,p=t.dims,r=d.display,f=d.options.lineNumbers,m=r.lineDiv,g=m.firstChild;function v(e){var t=e.nextSibling;return I&&ie&&d.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),t}for(var b=r.view,y=r.viewFrom,x=0;x<b.length;x++){var w=b[x];if(!w.hidden)if(w.node&&w.node.parentNode==m){for(;g!=w.node;)g=v(g);var k=f&&null!=u&&u<=y&&w.lineNumber;w.changes&&(-1<S(w.changes,"gutter")&&(k=!1),gi(d,w,y,p)),k&&(O(w.lineNumber),w.lineNumber.appendChild(document.createTextNode(ze(d.options,y)))),g=w.node.nextSibling}else{k=y,h=p,C=bi(a=d,c=w),c.text=c.node=C.pre,C.bgClass&&(c.bgClass=C.bgClass),C.textClass&&(c.textClass=C.textClass),yi(a,c),xi(a,c,k,h),wi(a,c,h);var C=c.node;m.insertBefore(C,g)}y+=w.size}for(;g;)g=v(g);return 4<o&&(i.lineDiv.style.display=""),i.renderedView=i.view,(l=s)&&l.activeElt&&l.activeElt!=re()&&(l.activeElt.focus(),l.anchorNode)&&F(document.body,l.anchorNode)&&F(document.body,l.focusNode)&&(r=window.getSelection(),(o=document.createRange()).setEnd(l.anchorNode,l.anchorOffset),o.collapse(!1),r.removeAllRanges(),r.addRange(o),r.extend(l.focusNode,l.focusOffset)),O(i.cursorDiv),O(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,n&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,Gn(e,400)),!(i.updateLineNumbers=null)}}return!1}function Zn(e,t){for(var i=t.viewport,n=!0;(n&&e.options.lineWrapping&&t.oldDisplayWidth!=Ei(e)||(i&&null!=i.top&&(i={top:Math.min(e.doc.height+_i(e.display)-Mi(e),i.top)}),t.visible=wn(e.display,e.doc,i),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&Yn(e,t);n=!1){yn(e);var o=Fn(e);hn(e),jn(e,o),eo(e,o),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Jn(e,t){var i,t=new Kn(e,t);Yn(e,t)&&(yn(e),Zn(e,t),i=Fn(e),hn(e),jn(e,i),eo(e,i),t.finish())}function Qn(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function eo(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Ai(e)+"px"}function to(e){var t=e.display.gutters,i=e.options.gutters;O(t);for(var n=0;n<i.length;++n){var o=i[n],r=t.appendChild(B("div",null,"CodeMirror-gutter "+o));"CodeMirror-linenumbers"==o&&((e.display.lineGutter=r).style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",Qn(e)}function io(e){var t=S(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):-1<t&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}Kn.prototype.signal=function(e,t){Ct(e,t)&&this.events.push(arguments)},Kn.prototype.finish=function(){for(var e=0;e<this.events.length;e++)X.apply(null,this.events[e])};var no=0,p=null;function oo(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta),{x:t,y:i}}function ro(e,t){var i,n,o=oo(t),r=o.x,o=o.y,s=e.display,l=s.scroller,a=l.scrollWidth>l.clientWidth,c=l.scrollHeight>l.clientHeight;if(r&&a||o&&c){if(o&&ie&&I)e:for(var h=t.target,d=s.view;h!=l;h=h.parentNode)for(var u=0;u<d.length;u++)if(d[u].node==h){e.display.currentWheelTarget=h;break e}!r||v||k||null==p?(o&&null!=p&&(a=o*p,n=(i=e.doc.scrollTop)+s.wrapper.clientHeight,a<0?i=Math.max(0,i+a-50):n=Math.min(e.doc.height,n+a+50),Jn(e,{top:i,bottom:n})),no<20&&(null==s.wheelStartX?(s.wheelStartX=l.scrollLeft,s.wheelStartY=l.scrollTop,s.wheelDX=r,s.wheelDY=o,setTimeout(function(){var e,t;null!=s.wheelStartX&&(e=l.scrollLeft-s.wheelStartX,t=(t=l.scrollTop-s.wheelStartY)&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX,s.wheelStartX=s.wheelStartY=null,t)&&(p=(p*no+t)/(no+1),++no)},200)):(s.wheelDX+=r,s.wheelDY+=o))):(o&&c&&Mn(e,Math.max(0,l.scrollTop+o*p)),Dn(e,Math.max(0,l.scrollLeft+r*p)),o&&!c||Y(t),s.wheelStartX=null)}}j?p=-.53:v?p=15:h?p=-.7:C&&(p=-1/3);var J=function(e,t){this.ranges=e,this.primIndex=t},Q=(J.prototype.primary=function(){return this.ranges[this.primIndex]},J.prototype.equals=function(e){if(e!=this){if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],n=e.ranges[t];if(!je(i.anchor,n.anchor)||!je(i.head,n.head))return!1}}return!0},J.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Q(Pe(this.ranges[t].anchor),Pe(this.ranges[t].head));return new J(e,this.primIndex)},J.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},J.prototype.contains=function(e,t){t=t||e;for(var i=0;i<this.ranges.length;i++){var n=this.ranges[i];if(0<=U(t,n.from())&&U(e,n.to())<=0)return i}return-1},function(e,t){this.anchor=e,this.head=t});function so(e,t,i){var n=e&&e.options.selectionsMayTouch,e=t[i];t.sort(function(e,t){return U(e.from(),t.from())}),i=S(t,e);for(var o=1;o<t.length;o++){var r,s=t[o],l=t[o-1],a=U(l.to(),s.from());(n&&!s.empty()?0<a:0<=a)&&(a=Be(l.from(),s.from()),r=Ie(l.to(),s.to()),s=l.empty()?s.from()==s.head:l.from()==l.head,o<=i&&--i,t.splice(--o,2,new Q(s?r:a,s?a:r)))}return new J(t,i)}function lo(e,t){return new J([new Q(e,t||e)],0)}function ao(e){return e.text?W(e.from.line+e.text.length-1,$(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function co(e,t){var i,n;return U(e,t.from)<0?e:U(e,t.to)<=0?ao(t):(i=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch,e.line==t.to.line&&(n+=ao(t).ch-t.to.ch),W(i,n))}function ho(e,t){for(var i=[],n=0;n<e.sel.ranges.length;n++){var o=e.sel.ranges[n];i.push(new Q(co(o.anchor,t),co(o.head,t)))}return so(e.cm,i,e.sel.primIndex)}function uo(e,t,i){return e.line==t.line?W(i.line,e.ch-t.ch+i.ch):W(i.line+(e.line-t.line),e.ch)}function po(e){e.doc.mode=Rt(e.options,e.doc.modeOption),fo(e)}function fo(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Gn(e,100),e.state.modeGen++,e.curOp&&w(e)}function mo(e,t){return 0==t.from.ch&&0==t.to.ch&&""==$(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function go(e,r,t,s){function o(e){return t?t[e]:null}function i(e,t,i){var n=e,o=s;n.text=t,n.stateAfter&&(n.stateAfter=null),n.styles&&(n.styles=null),null!=n.order&&(n.order=null),Xe(n),Ke(n,i),(i=o?o(n):1)!=n.height&&De(n,i),b(e,"change",e,r)}function n(e,t){for(var i=[],n=e;n<t;++n)i.push(new ni(h[n],o(n),s));return i}var l,a=r.from,c=r.to,h=r.text,d=H(e,a.line),u=H(e,c.line),p=$(h),f=o(h.length-1),m=c.line-a.line;r.full?(e.insert(0,n(0,h.length)),e.remove(h.length,e.size-h.length)):mo(e,r)?(l=n(0,h.length-1),i(u,u.text,f),m&&e.remove(a.line,m),l.length&&e.insert(a.line,l)):d==u?1==h.length?i(d,d.text.slice(0,a.ch)+p+d.text.slice(c.ch),f):((l=n(1,h.length-1)).push(new ni(p+d.text.slice(c.ch),f,s)),i(d,d.text.slice(0,a.ch)+h[0],o(0)),e.insert(a.line+1,l)):1==h.length?(i(d,d.text.slice(0,a.ch)+h[0]+u.text.slice(c.ch),o(0)),e.remove(a.line+1,m)):(i(d,d.text.slice(0,a.ch)+h[0],o(0)),i(u,p+u.text.slice(c.ch),f),l=n(1,h.length-1),1<m&&e.remove(a.line+1,m-1),e.insert(a.line+1,l)),b(e,"change",e,r)}function vo(e,l,a){!function e(t,i,n){if(t.linked)for(var o=0;o<t.linked.length;++o){var r,s=t.linked[o];s.doc!=i&&(r=n&&s.sharedHist,a&&!r||(l(s.doc,r),e(s.doc,t,r)))}}(e,null,!0)}function bo(e,t){if(t.cm)throw new Error("This document is already in use.");ln((e.doc=t).cm=e),po(e),yo(e),e.options.lineWrapping||ct(e),e.options.mode=t.modeOption,w(e)}function yo(e){("rtl"==e.doc.direction?N:M)(e.display.lineDiv,"CodeMirror-rtl")}function xo(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function wo(e,t){var i={from:Pe(t.from),to:ao(t),text:Me(e,t.from,t.to)};return To(e,i,t.from.line,t.to.line+1),vo(e,function(e){To(e,i,t.from.line,t.to.line+1)},!0),i}function ko(e){for(;e.length&&$(e).ranges;)e.pop()}function Co(e,t,i,n){var o=e.history;o.undone.length=0;var r,s,l=+new Date;if((o.lastOp==n||o.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&o.lastModTime>l-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(s=(s=o).lastOp==n?(ko(s.done),$(s.done)):s.done.length&&!$(s.done).ranges?$(s.done):1<s.done.length&&!s.done[s.done.length-2].ranges?(s.done.pop(),$(s.done)):void 0))r=$(s.changes),0==U(t.from,t.to)&&0==U(t.from,r.to)?r.to=ao(t):s.changes.push(wo(e,t));else{var a=$(o.done);for(a&&a.ranges||So(e.sel,o.done),s={changes:[wo(e,t)],generation:o.generation},o.done.push(s);o.done.length>o.undoDepth;)o.done.shift(),o.done[0].ranges||o.done.shift()}o.done.push(i),o.generation=++o.maxGeneration,o.lastModTime=o.lastSelTime=l,o.lastOp=o.lastSelOp=n,o.lastOrigin=o.lastSelOrigin=t.origin,r||X(e,"historyAdded")}function So(e,t){var i=$(t);i&&i.ranges&&i.equals(e)||t.push(e)}function To(t,i,e,n){var o=i["spans_"+t.id],r=0;t.iter(Math.max(t.first,e),Math.min(t.first+t.size,n),function(e){e.markedSpans&&((o=o||(i["spans_"+t.id]={}))[r]=e.markedSpans),++r})}function _o(o,e){var t=function(e){var t=e["spans_"+o.id];if(!t)return null;for(var i=[],n=0;n<e.text.length;++n)i.push(function(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t=t||e.slice(0,i):t&&t.push(e[i]);return t?t.length?t:null:e}(t[n]));return i}(e),i=Ve(o,e);if(!t)return i;if(i)for(var n=0;n<t.length;++n){var r=t[n],s=i[n];if(r&&s)e:for(var l=0;l<s.length;++l){for(var a=s[l],c=0;c<r.length;++c)if(r[c].marker==a.marker)continue e;r.push(a)}else s&&(t[n]=s)}return t}function Lo(e,t,i){for(var n=[],o=0;o<e.length;++o){var r=e[o];if(r.ranges)n.push(i?J.prototype.deepCopy.call(r):r);else{var s=r.changes,l=[];n.push({changes:l});for(var a=0;a<s.length;++a){var c,h=s[a];if(l.push({from:h.from,to:h.to,text:h.text}),t)for(var d in h)(c=d.match(/^spans_(\d+)$/))&&-1<S(t,Number(c[1]))&&($(l)[d]=h[d],delete h[d])}}}return n}function Ao(e,t,i,n){return n?(n=e.anchor,i&&((e=U(t,n)<0)!=U(i,n)<0?(n=t,t=i):e!=U(t,i)<0&&(t=i)),new Q(n,t)):new Q(i||t,t)}function Eo(e,t,i,n,o){null==o&&(o=e.cm&&(e.cm.display.shift||e.extend)),ee(e,new J([Ao(e.sel.primary(),t,i,o)],0),n)}function Mo(e,t,i){for(var n=[],o=e.cm&&(e.cm.display.shift||e.extend),r=0;r<e.sel.ranges.length;r++)n[r]=Ao(e.sel.ranges[r],t[r],null,o);ee(e,so(e.cm,n,e.sel.primIndex),i)}function Oo(e,t,i,n){var o=e.sel.ranges.slice(0);o[t]=i,ee(e,so(e.cm,o,e.sel.primIndex),n)}function Do(e,t,i,n){ee(e,lo(t,i),n)}function Fo(e,t,i){var n=e.history.done,o=$(n);o&&o.ranges?No(e,n[n.length-1]=t,i):ee(e,t,i)}function ee(e,t,i){var n,o,r,s,l,a;No(e,t,i),t=e.sel,n=e.cm?e.cm.curOp.id:NaN,l=e.history,a=(i=i)&&i.origin,n==l.lastSelOp||a&&l.lastSelOrigin==a&&(l.lastModTime==l.lastSelTime&&l.lastOrigin==a||(e=e,o=$(l.done),r=t,"*"==(s=a.charAt(0)))||"+"==s&&o.ranges.length==r.ranges.length&&o.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500))?l.done[l.done.length-1]=t:So(t,l.done),l.lastSelTime=+new Date,l.lastSelOrigin=a,l.lastSelOp=n,i&&!1!==i.clearRedo&&ko(l.undone)}function No(e,t,i){var n,o,r;(Ct(e,"beforeSelectionChange")||e.cm&&Ct(e.cm,"beforeSelectionChange"))&&(r={ranges:(o=t).ranges,update:function(e){this.ranges=[];for(var t=0;t<e.length;t++)this.ranges[t]=new Q(q(n,e[t].anchor),q(n,e[t].head))},origin:i&&i.origin},X(n=e,"beforeSelectionChange",n,r),n.cm&&X(n.cm,"beforeSelectionChange",n.cm,r),t=r.ranges!=o.ranges?so(n.cm,r.ranges,r.ranges.length-1):o),zo(e,Po(e,t,i&&i.bias||(U(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),i&&!1===i.scroll||!e.cm||_n(e.cm)}function zo(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,kt(e.cm)),b(e,"cursorActivity",e))}function jo(e){zo(e,Po(e,e.sel,null,!1))}function Po(e,t,i,n){for(var o,r=0;r<t.ranges.length;r++){var s=t.ranges[r],l=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[r],a=Bo(e,s.anchor,l&&l.anchor,i,n),l=Bo(e,s.head,l&&l.head,i,n);!o&&a==s.anchor&&l==s.head||((o=o||t.ranges.slice(0,r))[r]=new Q(a,l))}return o?so(e.cm,o,t.primIndex):t}function Io(e,t,i,n,o){var r=H(e,t.line);if(r.markedSpans)for(var s=0;s<r.markedSpans.length;++s){var l=r.markedSpans[s],a=l.marker;if((null==l.from||(a.inclusiveLeft?l.from<=t.ch:l.from<t.ch))&&(null==l.to||(a.inclusiveRight?l.to>=t.ch:l.to>t.ch))){if(o&&(X(a,"beforeCursorEnter"),a.explicitlyCleared)){if(r.markedSpans){--s;continue}break}if(a.atomic){if(i){var l=a.find(n<0?1:-1),c=void 0;if((l=(n<0?a.inclusiveRight:a.inclusiveLeft)?Ro(e,l,-n,l&&l.line==t.line?r:null):l)&&l.line==t.line&&(c=U(l,i))&&(n<0?c<0:0<c))return Io(e,l,t,n,o)}c=a.find(n<0?-1:1);return(c=(n<0?a.inclusiveLeft:a.inclusiveRight)?Ro(e,c,n,c.line==t.line?r:null):c)?Io(e,c,t,n,o):null}}}return t}function Bo(e,t,i,n,o){n=n||1;return Io(e,t,i,n,o)||!o&&Io(e,t,i,n,!0)||Io(e,t,i,-n,o)||!o&&Io(e,t,i,-n,!0)||(e.cantEdit=!0,W(e.first,0))}function Ro(e,t,i,n){return i<0&&0==t.ch?t.line>e.first?q(e,W(t.line-1)):null:0<i&&t.ch==(n||H(e,t.line)).text.length?t.line<e.first+e.size-1?W(t.line+1,0):null:new W(t.line,t.ch+i)}function $o(e){e.setSelection(W(e.firstLine(),0),W(e.lastLine()),pe)}function Ho(o,e,t){var r={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return r.canceled=!0}};return t&&(r.update=function(e,t,i,n){e&&(r.from=q(o,e)),t&&(r.to=q(o,t)),i&&(r.text=i),void 0!==n&&(r.origin=n)}),X(o,"beforeChange",o,r),o.cm&&X(o.cm,"beforeChange",o.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Wo(e,t,i){if(e.cm){if(!e.cm.curOp)return Z(e.cm,Wo)(e,t,i);if(e.cm.state.suppressEdits)return}if(!(Ct(e,"beforeChange")||e.cm&&Ct(e.cm,"beforeChange"))||(t=Ho(e,t,!0))){var n=He&&!i&&function(e,t,i){var n=null;if(e.iter(t.line,i.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var i=e.markedSpans[t].marker;!i.readOnly||n&&-1!=S(n,i)||(n=n||[]).push(i)}}),!n)return null;for(var o=[{from:t,to:i}],r=0;r<n.length;++r)for(var s=n[r],l=s.find(0),a=0;a<o.length;++a){var c,h,d,u=o[a];U(u.to,l.from)<0||0<U(u.from,l.to)||(c=[a,1],h=U(u.from,l.from),d=U(u.to,l.to),(h<0||!s.inclusiveLeft&&!h)&&c.push({from:u.from,to:l.from}),(0<d||!s.inclusiveRight&&!d)&&c.push({from:l.to,to:u.to}),o.splice.apply(o,c),a+=c.length-3)}return o}(e,t.from,t.to);if(n)for(var o=n.length-1;0<=o;--o)Uo(e,{from:n[o].from,to:n[o].to,text:o?[""]:t.text,origin:t.origin});else Uo(e,t)}}function Uo(e,i){var t,n;1==i.text.length&&""==i.text[0]&&0==U(i.from,i.to)||(t=ho(e,i),Co(e,i,t,e.cm?e.cm.curOp.id:NaN),Go(e,i,t,Ve(e,i)),n=[],vo(e,function(e,t){t||-1!=S(n,e.history)||(Zo(e.history,i),n.push(e.history)),Go(e,i,null,Ve(e,i))}))}function qo(o,r,e){var t=o.cm&&o.cm.state.suppressEdits;if(!t||e){for(var s,i=o.history,n=o.sel,l="undo"==r?i.done:i.undone,a="undo"==r?i.undone:i.done,c=0;c<l.length&&(s=l[c],e?!s.ranges||s.equals(o.sel):s.ranges);c++);if(c!=l.length){for(i.lastOrigin=i.lastSelOrigin=null;;){if(!(s=l.pop()).ranges){if(t)return l.push(s);break}if(So(s,a),e&&!s.equals(o.sel))return ee(o,s,{clearRedo:!1});n=s}var h=[];So(n,a),a.push({changes:h,generation:i.generation}),i.generation=s.generation||++i.maxGeneration;for(var d=Ct(o,"beforeChange")||o.cm&&Ct(o.cm,"beforeChange"),u=s.changes.length-1;0<=u;--u){var p=function(e){var i=s.changes[e];if(i.origin=r,d&&!Ho(o,i,!1))return l.length=0,{};h.push(wo(o,i));var t=e?ho(o,i):$(l),n=(Go(o,i,t,_o(o,i)),!e&&o.cm&&o.cm.scrollIntoView({from:i.from,to:ao(i)}),[]);vo(o,function(e,t){t||-1!=S(n,e.history)||(Zo(e.history,i),n.push(e.history)),Go(e,i,null,_o(e,i))})}(u);if(p)return p.v}}}}function Vo(e,t){if(0!=t&&(e.first+=t,e.sel=new J(ye(e.sel.ranges,function(e){return new Q(W(e.anchor.line+t,e.anchor.ch),W(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){w(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,n=i.viewFrom;n<i.viewTo;n++)Wn(e.cm,n,"gutter")}}function Go(e,t,i,n){if(e.cm&&!e.cm.curOp)return Z(e.cm,Go)(e,t,i,n);if(t.to.line<e.first)Vo(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){t.from.line<e.first&&(Vo(e,o=t.text.length-1-(e.first-t.from.line)),t={from:W(e.first,0),to:W(t.to.line+o,t.to.ch),text:[$(t.text)],origin:t.origin});var o=e.lastLine();if((t=t.to.line>o?{from:t.from,to:W(o,H(e,o).text.length),text:[t.text[0]],origin:t.origin}:t).removed=Me(e,t.from,t.to),i=i||ho(e,t),e.cm){o=e.cm;var r=t;var s=n;var l=o.doc,a=o.display,c=r.from,h=r.to,d=!1,u=c.line,p=(o.options.lineWrapping||(u=x(nt(H(l,c.line))),l.iter(u,h.line+1,function(e){if(e==a.maxLine)return d=!0})),-1<l.sel.contains(r.from,r.to)&&kt(o),go(l,r,s,sn(o)),o.options.lineWrapping||(l.iter(u,c.line+r.text.length,function(e){var t=at(e);t>a.maxLineLength&&(a.maxLine=e,a.maxLineLength=t,a.maxLineChanged=!0,d=!1)}),d&&(o.curOp.updateMaxLine=!0)),l),f=c.line;if(p.modeFrontier=Math.min(p.modeFrontier,f),!(p.highlightFrontier<f-10)){for(var m=p.first,g=f-1;m<g;g--){var v=H(p,g).stateAfter;if(v&&(!(v instanceof qt)||g+v.lookAhead<f)){m=g+1;break}}p.highlightFrontier=Math.min(p.highlightFrontier,m)}Gn(o,400);var s=r.text.length-(h.line-c.line)-1,u=(r.full?w(o):c.line!=h.line||1!=r.text.length||mo(o.doc,r)?w(o,c.line,h.line+1,s):Wn(o,c.line,"text"),Ct(o,"changes")),l=Ct(o,"change");(l||u)&&(s={from:c,to:h,text:r.text,removed:r.removed,origin:r.origin},l&&b(o,"change",o,s),u)&&(o.curOp.changeObjs||(o.curOp.changeObjs=[])).push(s),o.display.selForContextMenu=null}else go(e,t,n);No(e,i,pe)}}function Xo(e,t,i,n,o){var r;U(n=n||i,i)<0&&(i=(r=[n,i])[0],n=r[1]),"string"==typeof t&&(t=e.splitLines(t)),Wo(e,{from:i,to:n,text:t,origin:o})}function Ko(e,t,i,n){i<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function Yo(e,t,i,n){for(var o=0;o<e.length;++o){var r=e[o],s=!0;if(r.ranges){r.copied||((r=e[o]=r.deepCopy()).copied=!0);for(var l=0;l<r.ranges.length;l++)Ko(r.ranges[l].anchor,t,i,n),Ko(r.ranges[l].head,t,i,n)}else{for(var a=0;a<r.changes.length;++a){var c=r.changes[a];if(i<c.from.line)c.from=W(c.from.line+n,c.from.ch),c.to=W(c.to.line+n,c.to.ch);else if(t<=c.to.line){s=!1;break}}s||(e.splice(0,o+1),o=0)}}}function Zo(e,t){var i=t.from.line,n=t.to.line,t=t.text.length-(n-i)-1;Yo(e.done,i,n,t),Yo(e.undone,i,n,t)}function Jo(e,t,i,n){var o=t,r=t;return"number"==typeof t?r=H(e,Re(e,t)):o=x(t),null==o?null:(n(r,o)&&e.cm&&Wn(e.cm,o,i),r)}function Qo(e){this.lines=e,this.parent=null;for(var t=0,i=0;i<e.length;++i)e[i].parent=this,t+=e[i].height;this.height=t}function er(e){this.children=e;for(var t=0,i=0,n=0;n<e.length;++n){var o=e[n];t+=o.chunkSize(),i+=o.height,o.parent=this}this.size=t,this.height=i,this.parent=null}Q.prototype.from=function(){return Be(this.anchor,this.head)},Q.prototype.to=function(){return Ie(this.anchor,this.head)},Q.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Qo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,n=e+t;i<n;++i){var o=this.lines[i];this.height-=o.height,o.parent=null,Xe(o),b(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,i){for(var n=e+t;e<n;++e)if(i(this.lines[e]))return!0}},er.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i,n=0;n<this.children.length;++n){var o=this.children[n],r=o.chunkSize();if(e<r){var s=Math.min(t,r-e),l=o.height;if(o.removeInner(e,s),this.height-=l-o.height,r==s&&(this.children.splice(n--,1),o.parent=null),0==(t-=s))break;e=0}else e-=r}this.size-t<25&&(1<this.children.length||!(this.children[0]instanceof Qo))&&(this.collapse(i=[]),this.children=[new Qo(i)],this.children[0].parent=this)},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var n=0;n<this.children.length;++n){var o=this.children[n],r=o.chunkSize();if(e<=r){if(o.insertInner(e,t,i),o.lines&&50<o.lines.length){for(var s=o.lines.length%25+25,l=s;l<o.lines.length;){var a=new Qo(o.lines.slice(l,l+=25));o.height-=a.height,this.children.splice(++n,0,a),a.parent=this}o.lines=o.lines.slice(0,s),this.maybeSpill()}break}e-=r}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t,i=new er(e.children.splice(e.children.length-5,5))}while(e.parent?(e.size-=i.size,e.height-=i.height,t=S(e.parent.children,e),e.parent.children.splice(t+1,0,i)):(((t=new er(e.children)).parent=e).children=[t,i],e=t),i.parent=e.parent,10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var n=0;n<this.children.length;++n){var o=this.children[n],r=o.chunkSize();if(e<r){var s=Math.min(t,r-e);if(o.iterN(e,s,i))return!0;if(0==(t-=s))break;e=0}else e-=r}}};function tr(e,t,i){if(i)for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.doc=e,this.node=t}function ir(e,t,i){lt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Tn(e,i)}tr.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,n=x(i);if(null!=n&&t){for(var o=0;o<t.length;++o)t[o]==this&&t.splice(o--,1);t.length||(i.widgets=null);var r=Ci(this);De(i,Math.max(0,i.height-r)),e&&(d(e,function(){ir(e,i,-r),Wn(e,n,"widget")}),b(e,"lineWidgetCleared",e,this,n))}},tr.prototype.changed=function(){var e=this,t=this.height,i=this.doc.cm,n=this.line,o=(this.height=null,Ci(this)-t);o&&(st(this.doc,n)||De(n,n.height+o),i)&&d(i,function(){i.curOp.forceUpdate=!0,ir(i,n,o),b(i,"lineWidgetChanged",i,e,x(n))})},St(tr);function nr(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++or}var or=0;function rr(t,i,n,e,o){if(e&&e.shared)return p=t,r=i,s=n,a=o,(l=ce(l=e)).shared=!1,c=[rr(p,r,s,l,a)],h=c[0],d=l.widgetNode,vo(p,function(e){d&&(l.widgetNode=d.cloneNode(!0)),c.push(rr(e,q(e,r),q(e,s),l,a));for(var t=0;t<e.linked.length;++t)if(e.linked[t].isParent)return;h=$(c)}),new sr(c,h);var r,s,l,a,c,h,d;if(t.cm&&!t.cm.curOp)return Z(t.cm,rr)(t,i,n,e,o);var u=new nr(t,o),p=U(i,n);if(e&&ce(e,u,!1),!(0<p||0==p&&!1!==u.clearWhenEmpty)){if(u.replacedWith&&(u.collapsed=!0,u.widgetNode=D("span",[u.replacedWith],"CodeMirror-widget"),e.handleMouseEvents||u.widgetNode.setAttribute("cm-ignore-events","true"),e.insertLeft)&&(u.widgetNode.insertLeft=!0),u.collapsed){if(it(t,i.line,i,n,u)||i.line!=n.line&&it(t,n.line,i,n,u))throw new Error("Inserting collapsed marker partially overlapping an existing one");We=!0}u.addToHistory&&Co(t,{from:i,to:n,origin:"markText"},t.sel,NaN);var f,m=i.line,g=t.cm;if(t.iter(m,n.line+1,function(e){var t;g&&u.collapsed&&!g.options.lineWrapping&&nt(e)==g.display.maxLine&&(f=!0),u.collapsed&&m!=i.line&&De(e,0),e=e,t=new Ue(u,m==i.line?i.ch:null,m==n.line?n.ch:null),e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e),++m}),u.collapsed&&t.iter(i.line,n.line+1,function(e){st(t,e)&&De(e,0)}),u.clearOnEnter&&V(u,"beforeCursorEnter",function(){return u.clear()}),u.readOnly&&(He=!0,t.history.done.length||t.history.undone.length)&&t.clearHistory(),u.collapsed&&(u.id=++or,u.atomic=!0),g){if(f&&(g.curOp.updateMaxLine=!0),u.collapsed)w(g,i.line,n.line+1);else if(u.className||u.title||u.startStyle||u.endStyle||u.css)for(var v=i.line;v<=n.line;v++)Wn(g,v,"text");u.atomic&&jo(g.doc),b(g,"markerAdded",g,u)}}return u}nr.prototype.clear=function(){if(!this.explicitlyCleared){var e,t=this.doc.cm,i=t&&!t.curOp;i&&$n(t),Ct(this,"clear")&&(e=this.find())&&b(this,"clear",e.from,e.to);for(var n=null,o=null,r=0;r<this.lines.length;++r){var s=this.lines[r],l=qe(s.markedSpans,this);t&&!this.collapsed?Wn(t,x(s),"text"):t&&(null!=l.to&&(o=x(s)),null!=l.from)&&(n=x(s)),s.markedSpans=function(e,t){for(var i,n=0;n<e.length;++n)e[n]!=t&&(i=i||[]).push(e[n]);return i}(s.markedSpans,l),null==l.from&&this.collapsed&&!st(this.doc,s)&&t&&De(s,tn(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var a=0;a<this.lines.length;++a){var c=nt(this.lines[a]),h=at(c);h>t.display.maxLineLength&&(t.display.maxLine=c,t.display.maxLineLength=h,t.display.maxLineChanged=!0)}null!=n&&t&&this.collapsed&&w(t,n,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t)&&jo(t.doc),t&&b(t,"markerCleared",t,this,n,o),i&&Hn(t),this.parent&&this.parent.clear()}},nr.prototype.find=function(e,t){var i,n;null==e&&"bookmark"==this.type&&(e=1);for(var o=0;o<this.lines.length;++o){var r=this.lines[o],s=qe(r.markedSpans,this);if(null!=s.from&&(i=W(t?r:x(r),s.from),-1==e))return i;if(null!=s.to&&(n=W(t?r:x(r),s.to),1==e))return n}return i&&{from:i,to:n}},nr.prototype.changed=function(){var i=this,n=this.find(-1,!0),o=this,r=this.doc.cm;n&&r&&d(r,function(){var e=n.line,t=x(n.line),t=Fi(r,t);t&&(Bi(t),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!st(o.doc,e)&&null!=o.height&&(t=o.height,o.height=null,t=Ci(o)-t)&&De(e,e.height+t),b(r,"markerChanged",r,i)})},nr.prototype.attachLine=function(e){var t;this.lines.length||!this.doc.cm||(t=this.doc.cm.curOp).maybeHiddenMarkers&&-1!=S(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this),this.lines.push(e)},nr.prototype.detachLine=function(e){this.lines.splice(S(this.lines,e),1),!this.lines.length&&this.doc.cm&&((e=this.doc.cm.curOp).maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)},St(nr);function sr(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this}function lr(e){return e.findMarks(W(e.first,0),e.clipPos(W(e.lastLine())),function(e){return e.parent})}sr.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();b(this,"clear")}},sr.prototype.find=function(e,t){return this.primary.find(e,t)},St(sr);function f(e,t,i,n,o){if(!(this instanceof f))return new f(e,t,i,n,o);null==i&&(i=0),er.call(this,[new Qo([new ni("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,i=W(this.modeFrontier=this.highlightFrontier=i,0),this.sel=lo(i),this.history=new xo(null),this.id=++ar,this.modeOption=t,this.lineSep=n,this.direction="rtl"==o?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),go(this,{from:i,to:i,text:e}),ee(this,lo(i),pe)}var ar=0,cr=((f.prototype=we(er.prototype,{constructor:f,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,n=0;n<t.length;++n)i+=t[n].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Oe(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:n(function(e){var t=W(this.first,0),i=this.first+this.size-1;Wo(this,{from:t,to:W(i,H(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Ln(this.cm,0,0),ee(this,lo(t),pe)}),replaceRange:function(e,t,i,n){Xo(this,e,t=q(this,t),i=i?q(this,i):t,n)},getRange:function(e,t,i){e=Me(this,q(this,e),q(this,t));return!1===i?e:e.join(i||this.lineSeparator())},getLine:function(e){e=this.getLineHandle(e);return e&&e.text},getLineHandle:function(e){if(Ne(this,e))return H(this,e)},getLineNumber:x,getLineHandleVisualStart:function(e){return nt(e="number"==typeof e?H(this,e):e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return q(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:n(function(e,t,i){Do(this,q(this,"number"==typeof e?W(e,t||0):e),null,i)}),setSelection:n(function(e,t,i){Do(this,q(this,e),q(this,t||e),i)}),extendSelection:n(function(e,t,i){Eo(this,q(this,e),t&&q(this,t),i)}),extendSelections:n(function(e,t){Mo(this,$e(this,e),t)}),extendSelectionsBy:n(function(e,t){Mo(this,$e(this,ye(this.sel.ranges,e)),t)}),setSelections:n(function(e,t,i){if(e.length){for(var n=[],o=0;o<e.length;o++)n[o]=new Q(q(this,e[o].anchor),q(this,e[o].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),ee(this,so(this.cm,n,t),i)}}),addSelection:n(function(e,t,i){var n=this.sel.ranges.slice(0);n.push(new Q(q(this,e),q(this,t||e))),ee(this,so(this.cm,n,n.length-1),i)}),getSelection:function(e){for(var t=this.sel.ranges,i=0;i<t.length;i++)var n=Me(this,t[i].from(),t[i].to()),o=o?o.concat(n):n;return!1===e?o:o.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,n=0;n<i.length;n++){var o=Me(this,i[n].from(),i[n].to());!1!==e&&(o=o.join(e||this.lineSeparator())),t[n]=o}return t},replaceSelection:function(e,t,i){for(var n=[],o=0;o<this.sel.ranges.length;o++)n[o]=e;this.replaceSelections(n,t,i||"+input")},replaceSelections:n(function(e,t,i){for(var n=[],o=this.sel,r=0;r<o.ranges.length;r++){var s=o.ranges[r];n[r]={from:s.from(),to:s.to(),text:this.splitLines(e[r]),origin:i}}for(var t=t&&"end"!=t&&function(e,t,i){for(var n=[],o=c=W(e.first,0),r=0;r<t.length;r++){var s=t[r],l=uo(s.from,c,o),a=uo(ao(s),c,o),c=s.to,o=a;"around"==i?(s=U((s=e.sel.ranges[r]).head,s.anchor)<0,n[r]=new Q(s?a:l,s?l:a)):n[r]=new Q(l,l)}return new J(n,e.sel.primIndex)}(this,n,t),l=n.length-1;0<=l;l--)Wo(this,n[l]);t?Fo(this,t):this.cm&&_n(this.cm)}),undo:n(function(){qo(this,"undo")}),redo:n(function(){qo(this,"redo")}),undoSelection:n(function(){qo(this,"undo",!0)}),redoSelection:n(function(){qo(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var o=0;o<e.undone.length;o++)e.undone[o].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){this.history=new xo(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Lo(this.history.done),undone:Lo(this.history.undone)}},setHistory:function(e){var t=this.history=new xo(this.history.maxGeneration);t.done=Lo(e.done.slice(0),null,!0),t.undone=Lo(e.undone.slice(0),null,!0)},setGutterMarker:n(function(e,i,n){return Jo(this,e,"gutter",function(e){var t=e.gutterMarkers||(e.gutterMarkers={});return!(t[i]=n)&&Te(t)&&(e.gutterMarkers=null),1})}),clearGutter:n(function(t){var i=this;this.iter(function(e){e.gutterMarkers&&e.gutterMarkers[t]&&Jo(i,e,"gutter",function(){return e.gutterMarkers[t]=null,Te(e.gutterMarkers)&&(e.gutterMarkers=null),1})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!Ne(this,e))return null;if(!(e=H(this,t=e)))return null}else if(null==(t=x(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:n(function(e,i,n){return Jo(this,e,"gutter"==i?"gutter":"class",function(e){var t="text"==i?"textClass":"background"==i?"bgClass":"gutter"==i?"gutterClass":"wrapClass";if(e[t]){if(E(n).test(e[t]))return;e[t]+=" "+n}else e[t]=n;return 1})}),removeLineClass:n(function(e,r,s){return Jo(this,e,"gutter"==r?"gutter":"class",function(e){var t="text"==r?"textClass":"background"==r?"bgClass":"gutter"==r?"gutterClass":"wrapClass",i=e[t];if(i){if(null==s)e[t]=null;else{var n=i.match(E(s));if(!n)return;var o=n.index+n[0].length;e[t]=i.slice(0,n.index)+(n.index&&o!=i.length?" ":"")+i.slice(o)||null}return 1}})}),addLineWidget:n(function(e,t,i){return e=e,o=new tr(n=this,t,i),(r=n.cm)&&o.noHScroll&&(r.display.alignWidgets=!0),Jo(n,e,"widget",function(e){var t=e.widgets||(e.widgets=[]);return null==o.insertAt?t.push(o):t.splice(Math.min(t.length-1,Math.max(0,o.insertAt)),0,o),o.line=e,r&&!st(n,e)&&(t=lt(e)<n.scrollTop,De(e,e.height+Ci(o)),t&&Tn(r,o.height),r.curOp.forceUpdate=!0),1}),r&&b(r,"lineWidgetAdded",r,o,"number"==typeof e?e:x(e)),o;var n,o,r}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return rr(this,q(this,e),q(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){t={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return rr(this,e=q(this,e),e,t,"bookmark")},findMarksAt:function(e){var t=[],i=H(this,(e=q(this,e)).line).markedSpans;if(i)for(var n=0;n<i.length;++n){var o=i[n];(null==o.from||o.from<=e.ch)&&(null==o.to||o.to>=e.ch)&&t.push(o.marker.parent||o.marker)}return t},findMarks:function(o,r,s){o=q(this,o),r=q(this,r);var l=[],a=o.line;return this.iter(o.line,r.line+1,function(e){var t=e.markedSpans;if(t)for(var i=0;i<t.length;i++){var n=t[i];null!=n.to&&a==o.line&&o.ch>=n.to||null==n.from&&a!=o.line||null!=n.from&&a==r.line&&n.from>=r.ch||s&&!s(n.marker)||l.push(n.marker.parent||n.marker)}++a}),l},getAllMarks:function(){var n=[];return this.iter(function(e){var t=e.markedSpans;if(t)for(var i=0;i<t.length;++i)null!=t[i].from&&n.push(t[i].marker)}),n},posFromIndex:function(t){var i,n=this.first,o=this.lineSeparator().length;return this.iter(function(e){e=e.text.length+o;if(t<e)return i=t,!0;t-=e,++n}),q(this,W(n,i))},indexFromPos:function(e){var t,i=(e=q(this,e)).ch;return e.line<this.first||e.ch<0?0:(t=this.lineSeparator().length,this.iter(this.first,e.line,function(e){i+=e.text.length+t}),i)},copy:function(e){var t=new f(Oe(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){for(var t=this.first,i=this.first+this.size,i=(null!=(e=e||{}).from&&e.from>t&&(t=e.from),null!=e.to&&e.to<i&&(i=e.to),new f(Oe(this,t,i),e.mode||this.modeOption,t,this.lineSep,this.direction)),n=(e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],i),o=lr(this),r=0;r<o.length;r++){var s=o[r],l=s.find(),a=n.clipPos(l.from),l=n.clipPos(l.to);U(a,l)&&(a=rr(n,a,l,s.primary,s.primary.type),s.markers.push(a),a.parent=s)}return i},unlinkDoc:function(e){if(e instanceof g&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),i=r=void 0;for(var r=lr(this),i=0;i<r.length;i++)!function(e){var t=r[e],i=[t.primary.doc];vo(t.primary.doc,function(e){i.push(e)});for(var n=0;n<t.markers.length;n++){var o=t.markers[n];-1==S(i,o.doc)&&(o.parent=null,t.markers.splice(n--,1))}}(i);break}var n;e.history==this.history&&(n=[e.id],vo(e,function(e){n.push(e.id)},!0),e.history=new xo(null),e.history.done=Lo(this.history.done,n),e.history.undone=Lo(this.history.undone,n))},iterLinkedDocs:function(e){vo(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ft(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:n(function(e){var t;(e="rtl"!=e?"ltr":e)!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm)&&d(t=this.cm,function(){yo(t),w(t)})})})).eachLine=f.prototype.iter,0);function hr(e){var n=this;if(dr(n),!K(n,e)&&!Si(n.display,e)){Y(e),j&&(cr=+new Date);var o=an(n,e,!0),t=e.dataTransfer.files;if(o&&!n.isReadOnly())if(t&&t.length&&window.FileReader&&window.File)for(var r=t.length,s=Array(r),l=0,i=0;i<r;++i)!function(e,t){var i;n.options.allowDropFileTypes&&-1==S(n.options.allowDropFileTypes,e.type)||((i=new FileReader).onload=Z(n,function(){var e=i.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),s[t]=e,++l==r&&(e={from:o=q(n.doc,o),to:o,text:n.doc.splitLines(s.join(n.doc.lineSeparator())),origin:"paste"},Wo(n.doc,e),Fo(n.doc,lo(o,ao(e))))}),i.readAsText(e))}(t[i],i);else if(n.state.draggingText&&-1<n.doc.sel.contains(o))n.state.draggingText(e),setTimeout(function(){return n.display.input.focus()},20);else try{var a,c=e.dataTransfer.getData("Text");if(c){if(n.state.draggingText&&!n.state.draggingText.copy&&(a=n.listSelections()),No(n.doc,lo(o,o)),a)for(var h=0;h<a.length;++h)Xo(n.doc,"",a[h].anchor,a[h].head,"drag");n.replaceSelection(c,"around","paste"),n.display.input.focus()}}catch(e){}}}function dr(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function ur(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName("CodeMirror"),i=0;i<t.length;i++){var n=t[i].CodeMirror;n&&e(n)}}var pr=!1;function fr(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var mr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},gr=0;gr<10;gr++)mr[gr+48]=mr[gr+96]=String(gr);for(var vr=65;vr<=90;vr++)mr[vr]=String.fromCharCode(vr);for(var br=1;br<=12;br++)mr[br+111]=mr[br+63235]="F"+br;var yr={};function xr(e){var t,i,n,o,r=e.split(/-(?!$)/);e=r[r.length-1];for(var s=0;s<r.length-1;s++){var l=r[s];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else{if(!/^s(hift)?$/i.test(l))throw new Error("Unrecognized modifier name: "+l);n=!0}}return t&&(e="Alt-"+e),i&&(e="Ctrl-"+e),o&&(e="Cmd-"+e),e=n?"Shift-"+e:e}function wr(e,t,i,n){var o=(t=Tr(t)).call?t.call(e,n):t[e];if(!1===o)return"nothing";if("..."===o)return"multi";if(null!=o&&i(o))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return wr(e,t.fallthrough,i,n);for(var r=0;r<t.fallthrough.length;r++){var s=wr(e,t.fallthrough[r],i,n);if(s)return s}}}function kr(e){e="string"==typeof e?e:mr[e.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Cr(e,t,i){var n=e;return t.altKey&&"Alt"!=n&&(e="Alt-"+e),(A?t.metaKey:t.ctrlKey)&&"Ctrl"!=n&&(e="Ctrl-"+e),(A?t.ctrlKey:t.metaKey)&&"Cmd"!=n&&(e="Cmd-"+e),e=!i&&t.shiftKey&&"Shift"!=n?"Shift-"+e:e}function Sr(e,t){var i;return!(k&&34==e.keyCode&&e.char||null==(i=mr[e.keyCode])||e.altGraphKey)&&Cr(i=3==e.keyCode&&e.code?e.code:i,e,t)}function Tr(e){return"string"==typeof e?yr[e]:e}function _r(t,e){for(var i=t.doc.sel.ranges,n=[],o=0;o<i.length;o++){for(var r=e(i[o]);n.length&&U(r.from,$(n).to)<=0;){var s=n.pop();if(U(s.from,r.from)<0){r.from=s.from;break}}n.push(r)}d(t,function(){for(var e=n.length-1;0<=e;e--)Xo(t.doc,"",n[e].from,n[e].to,"+delete");_n(t)})}function Lr(e,t,i){t=Ae(e.text,t+i,i);return t<0||t>e.text.length?null:t}function Ar(e,t,i){e=Lr(e,t.ch,i);return null==e?null:new W(t.line,e,i<0?"after":"before")}function Er(e,t,i,n,o){if(e){var r,s,l,a,e=yt(i,t.doc.direction);if(e)return r=o<0==(1==(e=o<0?$(e):e[0]).level)?"after":"before",0<e.level||"rtl"==t.doc.direction?(s=Ni(t,i),l=o<0?i.text.length-1:0,a=zi(t,s,l).top,l=Ee(function(e){return zi(t,s,e).top==a},o<0==(1==e.level)?e.from:e.to-1,l),"before"==r&&(l=Lr(i,l,1))):l=o<0?e.to:e.from,new W(n,l,r)}return new W(n,o<0?i.text.length:0,o<0?"before":"after")}yr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},yr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},yr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},yr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},yr.default=ie?yr.macDefault:yr.pcDefault;var Mr={selectAll:$o,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),pe)},killLine:function(i){return _r(i,function(e){var t;return e.empty()?(t=H(i.doc,e.head.line).text.length,e.head.ch==t&&e.head.line<i.lastLine()?{from:e.head,to:W(e.head.line+1,0)}:{from:e.head,to:W(e.head.line,t)}):{from:e.from(),to:e.to()}})},deleteLine:function(t){return _r(t,function(e){return{from:W(e.from().line,0),to:q(t.doc,W(e.to().line+1,0))}})},delLineLeft:function(e){return _r(e,function(e){return{from:W(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(i){return _r(i,function(e){var t=i.charCoords(e.head,"div").top+5;return{from:i.coordsChar({left:0,top:t},"div"),to:e.from()}})},delWrappedLineRight:function(i){return _r(i,function(e){var t=i.charCoords(e.head,"div").top+5,t=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:t},"div");return{from:e.from(),to:t}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(W(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(W(e.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return Or(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return Dr(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(n){return n.extendSelectionsBy(function(e){return e=e.head.line,Er(!0,n,t=H(n.doc,e),e=(i=function(e){for(var t;t=tt(e);)e=t.find(1,!0).line;return e}(t))!=t?x(i):e,-1);var t,i},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(e){e=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:e},"div")},me)},goLineLeft:function(t){return t.extendSelectionsBy(function(e){e=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:e},"div")},me)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(e){var t=i.cursorCoords(e.head,"div").top+5,t=i.coordsChar({left:0,top:t},"div");return t.ch<i.getLine(t.line).search(/\S/)?Dr(i,e.head):t},me)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),n=e.options.tabSize,o=0;o<i.length;o++){var r=i[o].from(),r=R(e.getLine(r.line),r.ch,n);t.push(be(n-r%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(s){return d(s,function(){for(var e,t,i,n=s.listSelections(),o=[],r=0;r<n.length;r++)n[r].empty()&&(e=n[r].head,(t=H(s.doc,e.line).text)&&(0<(e=e.ch==t.length?new W(e.line,e.ch-1):e).ch?(e=new W(e.line,e.ch+1),s.replaceRange(t.charAt(e.ch-1)+t.charAt(e.ch-2),W(e.line,e.ch-2),e,"+transpose")):e.line>s.doc.first&&(i=H(s.doc,e.line-1).text)&&(e=new W(e.line,1),s.replaceRange(t.charAt(0)+s.doc.lineSeparator()+i.charAt(i.length-1),W(e.line-1,i.length-1),e,"+transpose"))),o.push(new Q(e,e)));s.setSelections(o)})},newlineAndIndent:function(n){return d(n,function(){for(var e=(t=n.listSelections()).length-1;0<=e;e--)n.replaceRange(n.doc.lineSeparator(),t[e].anchor,t[e].head,"+input");for(var t=n.listSelections(),i=0;i<t.length;i++)n.indentLine(t[i].from().line,null,!0);_n(n)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Or(e,t){var i=H(e.doc,t),n=nt(i);return Er(!0,e,n,t=n!=i?x(n):t,1)}function Dr(e,t){var i=Or(e,t.line),n=H(e.doc,i.line),e=yt(n,e.doc.direction);return e&&0!=e[0].level?i:(e=Math.max(0,n.text.search(/\S/)),n=t.line==i.line&&t.ch<=e&&t.ch,W(i.line,n?0:e,i.sticky))}function Fr(e,t,i){if("string"==typeof t&&!(t=Mr[t]))return!1;e.display.input.ensurePolled();var n=e.display.shift,o=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),o=t(e)!=ue}finally{e.display.shift=n,e.state.suppressEdits=!1}return o}var Nr=new he;function zr(e,t,i,n){var o=e.state.keySeq;if(o){if(kr(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Nr.set(50,function(){e.state.keySeq==o&&(e.state.keySeq=null,e.display.input.reset())}),jr(e,o+" "+t,i,n))return!0}return jr(e,t,i,n)}function jr(e,t,i,n){n=function(e,t,i){for(var n=0;n<e.state.keyMaps.length;n++){var o=wr(t,e.state.keyMaps[n],i,e);if(o)return o}return e.options.extraKeys&&wr(t,e.options.extraKeys,i,e)||wr(t,e.options.keyMap,i,e)}(e,t,n);return"multi"==n&&(e.state.keySeq=t),"handled"==n&&b(e,"keyHandled",e,t,i),"handled"!=n&&"multi"!=n||(Y(i),fn(e)),!!n}function Pr(t,e){var i=Sr(e,!0);return!!i&&(e.shiftKey&&!t.state.keySeq?zr(t,"Shift-"+i,e,function(e){return Fr(t,e,!0)})||zr(t,i,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return Fr(t,e)}):zr(t,i,e,function(e){return Fr(t,e)}))}var Ir=null;function Br(e){var t,i,n;function o(e){18!=e.keyCode&&e.altKey||(M(n,"CodeMirror-crosshair"),G(document,"keyup",o),G(document,"mouseover",o))}this.curOp.focus=re(),K(this,e)||(j&&P<11&&27==e.keyCode&&(e.returnValue=!1),t=e.keyCode,this.display.shift=16==t||e.shiftKey,i=Pr(this,e),k&&(Ir=i?t:null,!i)&&88==t&&!zt&&(ie?e.metaKey:e.ctrlKey)&&this.replaceSelection("",null,"cut"),18!=t)||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||(N(n=this.display.lineDiv,"CodeMirror-crosshair"),V(document,"keyup",o),V(document,"mouseover",o))}function Rr(e){16==e.keyCode&&(this.doc.sel.shift=!1),K(this,e)}function $r(e){var t,i,n;Si(this.display,e)||K(this,e)||e.ctrlKey&&!e.altKey||ie&&e.metaKey||(n=e.keyCode,t=e.charCode,k&&n==Ir?(Ir=null,Y(e)):k&&(!e.which||e.which<10)&&Pr(this,e)||"\b"==(n=String.fromCharCode(null==t?n:t))||zr(i=this,"'"+n+"'",e,function(e){return Fr(i,e,!0)})||this.display.input.onKeyPress(e))}var Hr,Wr,Ur=function(e,t,i){this.time=e,this.pos=t,this.button=i};function qr(e){var i,n,t,o,r,s,l,a,c,h,d,u,p,f,m,k,g,C,S,T,_,L,A,E,v,M,O,D,b,y,x,w,F=this,N=F.display;function z(e){k.state.selectingText=!1,D=1/0,Y(e),T.input.focus(),G(T.wrapper.ownerDocument,"mousemove",b),G(T.wrapper.ownerDocument,"mouseup",y),_.history.lastSelOrigin=null}K(F,e)||N.activeTouch&&N.input.supportsTouch()||(N.input.ensurePolled(),N.shift=e.shiftKey,Si(N,e)?I||(N.scroller.draggable=!1,setTimeout(function(){return N.scroller.draggable=!0},100)):Xr(F,e)||(w=an(F,e),r=Et(e),g=w?(o=w,t=r,g=+new Date,Wr&&Wr.compare(g,o,t)?(Hr=Wr=null,"triple"):Hr&&Hr.compare(g,o,t)?(Wr=new Ur(g,o,t),Hr=null,"double"):(Hr=new Ur(g,o,t),Wr=null,"single")):"single",window.focus(),1==r&&F.state.selectingText&&F.state.selectingText(e),w&&(n=w,o="Click","double"==g?o="Double"+o:"triple"==g&&(o="Triple"+o),zr(i=F,Cr(o=(1==r?"Left":2==r?"Middle":"Right")+o,e),e,function(e){if(!(e="string"==typeof e?Mr[e]:e))return!1;var t=!1;try{i.isReadOnly()&&(i.state.suppressEdits=!0),t=e(i,n)!=ue}finally{i.state.suppressEdits=!1}return t})))||(1!=r?2==r?(w&&Eo(F.doc,w),setTimeout(function(){return N.input.focus()},20)):3==r&&(oe?F.display.input.onContextMenu(e):gn(F)):w?(t=F,o=w,r=g,F=e,j?setTimeout(ae(mn,t),0):t.curOp.focus=re(),w=r,g=F,null==(v=(v=(m=t).getOption("configureMouse"))?v(m,w,g):{}).unit&&(x=ne?g.shiftKey&&g.metaKey:g.altKey,v.unit=x?"rectangle":"single"==w?"char":"double"==w?"word":"line"),null!=v.extend&&!m.doc.extend||(v.extend=m.doc.extend||g.shiftKey),null==v.addNew&&(v.addNew=ie?g.metaKey:g.ctrlKey),null==v.moveOnDrag&&(v.moveOnDrag=!(ie?g.altKey:g.ctrlKey)),x=v,w=t.doc.sel,t.options.dragDrop&&Dt&&!t.isReadOnly()&&"single"==r&&-1<(m=w.contains(o))&&(U((m=w.ranges[m]).from(),o)<0||0<o.xRel)&&(0<U(m.to(),o)||o.xRel<0)?(l=F,a=o,c=x,h=(s=t).display,d=!1,u=Z(s,function(e){I&&(h.scroller.draggable=!1),s.state.draggingText=!1,G(h.wrapper.ownerDocument,"mouseup",u),G(h.wrapper.ownerDocument,"mousemove",p),G(h.scroller,"dragstart",f),G(h.scroller,"drop",u),d||(Y(e),c.addNew||Eo(s.doc,a,null,null,c.extend),I||j&&9==P?setTimeout(function(){h.wrapper.ownerDocument.body.focus(),h.input.focus()},20):h.input.focus())}),p=function(e){d=d||10<=Math.abs(l.clientX-e.clientX)+Math.abs(l.clientY-e.clientY)},f=function(){return d=!0},I&&(h.scroller.draggable=!0),(s.state.draggingText=u).copy=!c.moveOnDrag,h.scroller.dragDrop&&h.scroller.dragDrop(),V(h.wrapper.ownerDocument,"mouseup",u),V(h.wrapper.ownerDocument,"mousemove",p),V(h.scroller,"dragstart",f),V(h.scroller,"drop",u),gn(s),setTimeout(function(){return h.input.focus()},20)):(g=F,C=o,S=x,T=(k=t).display,_=k.doc,Y(g),E=_.sel,v=E.ranges,S.addNew&&!S.extend?(L=_.sel.contains(C),A=-1<L?v[L]:new Q(C,C)):(A=_.sel.primary(),L=_.sel.primIndex),"rectangle"==S.unit?(S.addNew||(A=new Q(C,C)),C=an(k,g,!0,!0),L=-1):(g=Vr(k,C,S.unit),A=S.extend?Ao(A,g.anchor,g.head,S.extend):g),S.addNew?-1==L?(L=v.length,ee(_,so(k,v.concat([A]),L),{scroll:!1,origin:"*mouse"})):1<v.length&&v[L].empty()&&"char"==S.unit&&!S.extend?(ee(_,so(k,v.slice(0,L).concat(v.slice(L+1)),0),{scroll:!1,origin:"*mouse"}),E=_.sel):Oo(_,L,A,fe):(ee(_,new J([A],L=0),fe),E=_.sel),M=C,O=T.wrapper.getBoundingClientRect(),D=0,b=Z(k,function(e){(0!==e.buttons&&Et(e)?function e(t){var i=++D,n=an(k,t,!0,"rectangle"==S.unit);if(n)if(0!=U(n,M)){k.curOp.focus=re();var o,r,s,l,a,c=n;if(0!=U(M,c))if(M=c,"rectangle"==S.unit){for(var h=[],d=k.options.tabSize,u=R(H(_,C.line).text,C.ch,d),p=R(H(_,c.line).text,c.ch,d),f=Math.min(u,p),m=Math.max(u,p),g=Math.min(C.line,c.line),v=Math.min(k.lastLine(),Math.max(C.line,c.line));g<=v;g++){var b=H(_,g).text,y=ge(b,f,d);f==m?h.push(new Q(W(g,y),W(g,y))):b.length>y&&h.push(new Q(W(g,y),W(g,ge(b,m,d))))}h.length||h.push(new Q(C,C)),ee(_,so(k,E.ranges.slice(0,L).concat(h),L),{origin:"*mouse",scroll:!1}),k.scrollIntoView(c)}else{u=A,p=Vr(k,c,S.unit),c=u.anchor,c=0<U(p.anchor,c)?(s=p.head,Be(u.from(),p.anchor)):(s=p.anchor,Ie(u.to(),p.head)),u=E.ranges.slice(0);u[L]=(p=k,c=new Q(q(_,c),s),s=c.anchor,l=c.head,a=H(p.doc,s.line),0==U(s,l)&&s.sticky==l.sticky||!(a=yt(a))||(o=a[x=dt(a,s.ch,s.sticky)]).from!=s.ch&&o.to!=s.ch||0==(r=x+(o.from==s.ch==(1!=o.level)?0:1))||r==a.length||(o=a[r+((x=l.line!=s.line?0<(l.line-s.line)*("ltr"==p.doc.direction?1:-1):(a=(p=dt(a,l.ch,l.sticky))-x||(l.ch-s.ch)*(1==o.level?-1:1),p==r-1||p==r?a<0:0<a))?-1:0)],r=(p=x==(1==o.level))?o.from:o.to,a=p?"after":"before",s.ch==r&&s.sticky==a)?c:new Q(new W(s.line,r,a),l)),ee(_,so(k,u,L),fe)}var x=wn(T,_);(n.line>=x.to||n.line<x.from)&&setTimeout(Z(k,function(){D==i&&e(t)}),150)}else{var w=t.clientY<O.top?-20:t.clientY>O.bottom?20:0;w&&setTimeout(Z(k,function(){D==i&&(T.scroller.scrollTop+=w,e(t))}),50)}}:z)(e)}),y=Z(k,z),k.state.selectingText=y,V(T.wrapper.ownerDocument,"mousemove",b),V(T.wrapper.ownerDocument,"mouseup",y))):At(e)==N.scroller&&Y(e)))}function Vr(e,t,i){return"char"==i?new Q(t,t):"word"==i?e.findWordAt(t):"line"==i?new Q(W(t.line,0),q(e.doc,W(t.line+1,0))):(i=i(e,t),new Q(i.from,i.to))}function Gr(e,t,i,n){var o,r;if(t.touches)o=t.touches[0].clientX,r=t.touches[0].clientY;else try{o=t.clientX,r=t.clientY}catch(t){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&Y(t);var s=e.display,n=s.lineDiv.getBoundingClientRect();if(r>n.bottom||!Ct(e,i))return _t(t);r-=n.top-s.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var a=s.gutters.childNodes[l];if(a&&a.getBoundingClientRect().right>=o)return X(e,i,e,Fe(e.doc,r),e.options.gutters[l],t),_t(t)}}function Xr(e,t){return Gr(e,t,"gutterClick",!0)}function Kr(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),$i(e)}Ur.prototype.compare=function(e,t,i){return this.time+400>e&&0==U(t,this.pos)&&i==this.button};var Yr={toString:function(){return"CodeMirror.Init"}},Zr={},Jr={};function Qr(e){to(e),w(e),kn(e)}function es(e,t,i){!t!=!(i&&i!=Yr)&&(i=e.display.dragFunctions,(t=t?V:G)(e.display.scroller,"dragstart",i.start),t(e.display.scroller,"dragenter",i.enter),t(e.display.scroller,"dragover",i.over),t(e.display.scroller,"dragleave",i.leave),t(e.display.scroller,"drop",i.drop))}function ts(e){e.options.lineWrapping?(N(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(M(e.display.wrapper,"CodeMirror-wrap"),ct(e)),ln(e),w(e),$i(e),setTimeout(function(){return jn(e)},100)}function g(e,t){var i=this;if(!(this instanceof g))return new g(e,t);this.options=t=t?ce(t):{},ce(Zr,t,!1),io(t);var n,o,r,s,l,a,c=t.value,h=("string"==typeof c?c=new f(c,t.mode,null,t.lineSeparator,t.direction):t.mode&&(c.modeOption=t.mode),this.doc=c,new g.inputStyles[t.inputStyle](this)),e=this.display=new function(e,t,i){var n=this,o=(this.input=i,n.scrollbarFiller=B("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=B("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=D("div",null,"CodeMirror-code"),n.selectionDiv=B("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=B("div",null,"CodeMirror-cursors"),n.measure=B("div",null,"CodeMirror-measure"),n.lineMeasure=B("div",null,"CodeMirror-measure"),n.lineSpace=D("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),D("div",[n.lineSpace],"CodeMirror-lines"));n.mover=B("div",[o],null,"position: relative"),n.sizer=B("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=B("div",null,null,"position: absolute; height: "+de+"px; width: 1px;"),n.gutters=B("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=B("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=B("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),j&&P<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),I||v&&L||(n.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(n.wrapper):e(n.wrapper)),n.viewFrom=n.viewTo=t.first,n.reportedViewFrom=n.reportedViewTo=t.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,i.init(n)}(e,c,h);for(n in to(e.wrapper.CodeMirror=this),Kr(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Bn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new he,keySeq:null,specialChars:null},t.autofocus&&!L&&e.input.focus(),j&&P<11&&setTimeout(function(){return i.display.input.reset(!0)},20),s=(r=this).display,V(s.scroller,"mousedown",Z(r,qr)),V(s.scroller,"dblclick",j&&P<11?Z(r,function(e){var t;K(r,e)||!(t=an(r,e))||Xr(r,e)||Si(r.display,e)||(Y(e),e=r.findWordAt(t),Eo(r.doc,e.anchor,e.head))}):function(e){return K(r,e)||Y(e)}),V(s.scroller,"contextmenu",function(e){var t,i;Si((t=r).display,e)||Ct(i=t,"gutterContextMenu")&&Gr(i,e,"gutterContextMenu",!1)||K(t,e,"contextmenu")||oe||t.display.input.onContextMenu(e)}),a={end:0},V(s.scroller,"touchstart",function(e){var t;K(r,e)||function(e){if(1==e.touches.length)return(e=e.touches[0]).radiusX<=1&&e.radiusY<=1}(e)||Xr(r,e)||(s.input.ensurePolled(),clearTimeout(l),t=+new Date,s.activeTouch={start:t,moved:!1,prev:t-a.end<=300?a:null},1==e.touches.length&&(s.activeTouch.left=e.touches[0].pageX,s.activeTouch.top=e.touches[0].pageY))}),V(s.scroller,"touchmove",function(){s.activeTouch&&(s.activeTouch.moved=!0)}),V(s.scroller,"touchend",function(e){var t,i=s.activeTouch;i&&!Si(s,e)&&null!=i.left&&!i.moved&&new Date-i.start<300&&(t=r.coordsChar(s.activeTouch,"page"),i=!i.prev||u(i,i.prev)?new Q(t,t):!i.prev.prev||u(i,i.prev.prev)?r.findWordAt(t):new Q(W(t.line,0),q(r.doc,W(t.line+1,0))),r.setSelection(i.anchor,i.head),r.focus(),Y(e)),d()}),V(s.scroller,"touchcancel",d),V(s.scroller,"scroll",function(){s.scroller.clientHeight&&(Mn(r,s.scroller.scrollTop),Dn(r,s.scroller.scrollLeft,!0),X(r,"scroll",r))}),V(s.scroller,"mousewheel",function(e){return ro(r,e)}),V(s.scroller,"DOMMouseScroll",function(e){return ro(r,e)}),V(s.wrapper,"scroll",function(){return s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),s.dragFunctions={enter:function(e){K(r,e)||Lt(e)},over:function(e){var t,i;K(r,e)||((i=an(t=r,e))&&(un(t,i,i=document.createDocumentFragment()),t.display.dragCursor||(t.display.dragCursor=B("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),y(t.display.dragCursor,i)),Lt(e))},start:function(e){var t,i;t=r,e=e,j&&(!t.state.draggingText||+new Date-cr<100)?Lt(e):K(t,e)||Si(t.display,e)||(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",!e.dataTransfer.setDragImage)||C||((i=B("img",null,null,"position: fixed; left: 0; top: 0;")).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",k&&(i.width=i.height=1,t.display.wrapper.appendChild(i),i._top=i.offsetTop),e.dataTransfer.setDragImage(i,0,0),k&&i.parentNode.removeChild(i))},drop:Z(r,hr),leave:function(e){K(r,e)||dr(r)}},h=s.input.getField(),V(h,"keyup",function(e){return Rr.call(r,e)}),V(h,"keydown",Z(r,Br)),V(h,"keypress",Z(r,$r)),V(h,"focus",function(e){return vn(r,e)}),V(h,"blur",function(e){return bn(r,e)}),pr||(V(window,"resize",function(){null==o&&(o=setTimeout(function(){o=null,ur(fr)},100))}),V(window,"blur",function(){return ur(bn)}),pr=!0),$n(this),this.curOp.forceUpdate=!0,bo(this,c),t.autofocus&&!L||this.hasFocus()?setTimeout(ae(vn,this),20):bn(this),Jr)Jr.hasOwnProperty(n)&&Jr[n](i,t[n],Yr);function d(){s.activeTouch&&(l=setTimeout(function(){return s.activeTouch=null},1e3),(a=s.activeTouch).end=+new Date)}function u(e,t){var i;return null==t.left||400<(i=t.left-e.left)*i+(i=t.top-e.top)*i}Cn(this),t.finishInit&&t.finishInit(this);for(var p=0;p<is.length;++p)is[p](i);Hn(this),I&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(e.lineDiv).textRendering&&(e.lineDiv.style.textRendering="auto")}g.defaults=Zr,g.optionHandlers=Jr;var is=[];function ns(e,t,i,n){var o,r=e.doc,s=("smart"==(i=null==i?"add":i)&&(r.mode.indent?o=Kt(e,t).state:i="prev"),e.options.tabSize),l=H(r,t),a=R(l.text,null,s);l.stateAfter&&(l.stateAfter=null);var c=l.text.match(/^\s*/)[0];if(n||/\S/.test(l.text)){if("smart"==i&&((h=r.mode.indent(o,l.text.slice(c.length),l.text))==ue||150<h)){if(!n)return;i="prev"}}else h=0,i="not";"prev"==i?h=t>r.first?R(H(r,t-1).text,null,s):0:"add"==i?h=a+e.options.indentUnit:"subtract"==i?h=a-e.options.indentUnit:"number"==typeof i&&(h=a+i);var h=Math.max(0,h),d="",u=0;if(e.options.indentWithTabs)for(var p=Math.floor(h/s);p;--p)u+=s,d+="\t";if(u<h&&(d+=be(h-u)),d!=c)return Xo(r,d,W(t,0),W(t,c.length),"+input"),!(l.stateAfter=null);for(var f=0;f<r.sel.ranges.length;f++){var m=r.sel.ranges[f];if(m.head.line==t&&m.head.ch<c.length){m=W(t,c.length);Oo(r,f,new Q(m,m));break}}}g.defineInitHook=function(e){return is.push(e)};var os=null;function rs(e){os=e}function ss(e,t,i,n,o){var r=e.doc;e.display.shift=!1,n=n||r.sel;var s,l=e.state.pasteIncoming||"paste"==o,a=Ft(t),c=null;if(l&&1<n.ranges.length)if(os&&os.text.join("\n")==t){if(n.ranges.length%os.text.length==0)for(var c=[],h=0;h<os.text.length;h++)c.push(r.splitLines(os.text[h]))}else a.length==n.ranges.length&&e.options.pasteLinesPerSelection&&(c=ye(a,function(e){return[e]}));for(var d=n.ranges.length-1;0<=d;d--){var u=n.ranges[d],p=u.from(),f=u.to(),u=(u.empty()&&(i&&0<i?p=W(p.line,p.ch-i):e.state.overwrite&&!l?f=W(f.line,Math.min(H(r,f.line).text.length,f.ch+$(a).length)):l&&os&&os.lineWise&&os.text.join("\n")==t&&(p=f=W(p.line,0))),s=e.curOp.updateInput,{from:p,to:f,text:c?c[d%c.length]:a,origin:o||(l?"paste":e.state.cutIncoming?"cut":"+input")});Wo(e.doc,u),b(e,"inputRead",e,u)}t&&!l&&as(e,t),_n(e),e.curOp.updateInput=s,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function ls(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");return i&&(e.preventDefault(),t.isReadOnly()||t.options.disableInput||d(t,function(){return ss(t,i,0,null,"paste")}),1)}function as(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var i=e.doc.sel,n=i.ranges.length-1;0<=n;n--){var o=i.ranges[n];if(!(100<o.head.ch||n&&i.ranges[n-1].head.line==o.head.line)){var r=e.getModeAt(o.head),s=!1;if(r.electricChars){for(var l=0;l<r.electricChars.length;l++)if(-1<t.indexOf(r.electricChars.charAt(l))){s=ns(e,o.head.line,"smart");break}}else r.electricInput&&r.electricInput.test(H(e.doc,o.head.line).text.slice(0,o.head.ch))&&(s=ns(e,o.head.line,"smart"));s&&b(e,"electricInput",e,o.head.line)}}}function cs(e){for(var t=[],i=[],n=0;n<e.doc.sel.ranges.length;n++){var o=e.doc.sel.ranges[n].head.line,o={anchor:W(o,0),head:W(o+1,0)};i.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:i}}function hs(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function ds(){var e=B("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=B("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return I?e.style.width="1000px":e.setAttribute("wrap","off"),T&&(e.style.border="1px solid black"),hs(e),t}function us(i,n,o,e,r){var t=n,s=o,l=H(i,n.line);function a(e){var t;if(null==(t=r?function(t,i,l,e){var a=yt(i,t.doc.direction);if(!a)return Ar(i,l,e);l.ch>=i.text.length?(l.ch=i.text.length,l.sticky="before"):l.ch<=0&&(l.ch=0,l.sticky="after");var n=dt(a,l.ch,l.sticky),o=a[n];if("ltr"==t.doc.direction&&o.level%2==0&&(0<e?o.to>l.ch:o.from<l.ch))return Ar(i,l,e);function r(e){return t.options.lineWrapping?(s=s||Ni(t,i),Qi(t,i,s,e)):{begin:0,end:i.text.length}}var s,c=function(e,t){return Lr(i,e instanceof W?e.ch:e,t)},h=r("before"==l.sticky?c(l,-1):l.ch);if("rtl"==t.doc.direction||1==o.level){var d=1==o.level==e<0,u=c(l,d?1:-1);if(null!=u&&(d?u<=o.to&&u<=h.end:u>=o.from&&u>=h.begin))return new W(l.line,u,d?"before":"after")}function p(e,t,i){for(var n=function(e,t){return t?new W(l.line,c(e,1),"before"):new W(l.line,e,"after")};0<=e&&e<a.length;e+=t){var o=a[e],r=0<t==(1!=o.level),s=r?i.begin:c(i.end,-1);if(o.from<=s&&s<o.to)return n(s,r);if(s=r?o.from:c(o.to,-1),i.begin<=s&&s<i.end)return n(s,r)}}o=p(n+e,e,h);return o||(null==(u=0<e?h.end:c(h.begin,-1))||0<e&&u==i.text.length||!(o=p(0<e?0:a.length-1,e,r(u)))?null:o)}(i.cm,l,n,o):Ar(l,n,o))){if(e||(e=n.line+o)<i.first||e>=i.first+i.size||(n=new W(e,n.ch,n.sticky),!(l=H(i,e))))return;n=Er(r,i.cm,l,n.line,o)}else n=t;return 1}if("char"==e)a();else if("column"==e)a(!0);else if("word"==e||"group"==e)for(var c=null,h="group"==e,d=i.cm&&i.cm.getHelper(n,"wordChars"),u=!0;!(o<0)||a(!u);u=!1){var p=l.text.charAt(n.ch)||"\n",p=Se(p,d)?"w":h&&"\n"==p?"n":!h||/\s/.test(p)?null:"p";if(h&&!u&&(p=p||"s"),c&&c!=p){o<0&&(o=1,a(),n.sticky="after");break}if(p&&(c=p),0<o&&!a(!u))break}e=Bo(i,n,t,s,!0);return je(t,e)&&(e.hitSide=!0),e}function ps(e,t,i,n){var o,r,s,l=e.doc,a=t.left;for("page"==n?(r=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),r=Math.max(r-.5*tn(e.display),3),s=(0<i?t.bottom:t.top)+i*r):"line"==n&&(s=0<i?t.bottom+3:t.top-3);(o=Zi(e,a,s)).outside;){if(i<0?s<=0:s>=l.height){o.hitSide=!0;break}s+=5*i}return o}function o(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new he,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null}function fs(e,t){var i,n,o=Fi(e,t.line);return!o||o.hidden?null:(i=Oi(o,o=H(e.doc,t.line),t.line),n="left",(o=yt(o,e.doc.direction))&&(n=dt(o,t.ch)%2?"right":"left"),(e=Ii(i.map,t.ch,n)).offset="right"==e.collapse?e.end:e.start,e)}function ms(e,t){return t&&(e.bad=!0),e}function gs(e,t,i){var n;if(t==e.display.lineDiv){if(!(n=e.display.lineDiv.childNodes[i]))return ms(e.clipPos(W(e.display.viewTo-1)),!0);t=null,i=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var o=0;o<e.display.view.length;o++){var r=e.display.view[o];if(r.node==n){var c=r;r=t;var s=i;var l=c.text.firstChild,a=!1;if(!r||!F(l,r))return ms(W(x(c.line),0),!0);if(r==l&&(a=!0,r=l.childNodes[s],s=0,!r))return ms(W(x(h=c.rest?$(c.rest):c.line),h.text.length),a);var h=3==r.nodeType?r:null,d=r;for(h||1!=r.childNodes.length||3!=r.firstChild.nodeType||(h=r.firstChild,s=s&&h.nodeValue.length);d.parentNode!=l;)d=d.parentNode;var u=c.measure,p=u.maps;function f(e,t,i){for(var n=-1;n<(p?p.length:0);n++)for(var o=n<0?u.map:p[n],r=0;r<o.length;r+=3){var s,l,a=o[r+2];if(a==e||a==t)return s=x(n<0?c.line:c.rest[n]),l=o[r]+i,W(s,l=i<0||a!=e?o[r+(i?1:0)]:l)}}var m=f(h,d,s);if(m)return ms(m,a);for(var g=d.nextSibling,v=h?h.nodeValue.length-s:0;g;g=g.nextSibling){if(m=f(g,g.firstChild,0))return ms(W(m.line,m.ch-v),a);v+=g.textContent.length}for(var b=d.previousSibling,y=s;b;b=b.previousSibling){if(m=f(b,b.firstChild,-1))return ms(W(m.line,m.ch+y),a);y+=b.textContent.length}return}}}o.prototype.init=function(e){var t=this,r=this,s=r.cm,l=r.div=e.lineDiv;function i(e){if(!K(s,e)){if(s.somethingSelected())rs({lineWise:!1,text:s.getSelections()}),"cut"==e.type&&s.replaceSelection("",null,"cut");else{if(!s.options.lineWiseCopyCut)return;var t=cs(s);rs({lineWise:!0,text:t.text}),"cut"==e.type&&s.operation(function(){s.setSelections(t.ranges,0,pe),s.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var i=os.text.join("\n");if(e.clipboardData.setData("Text",i),e.clipboardData.getData("Text")==i)return void e.preventDefault()}var n=ds(),i=n.firstChild,o=(s.display.lineSpace.insertBefore(n,s.display.lineSpace.firstChild),i.value=os.text.join("\n"),document.activeElement);le(i),setTimeout(function(){s.display.lineSpace.removeChild(n),o.focus(),o==l&&r.showPrimarySelection()},50)}}hs(l,s.options.spellcheck),V(l,"paste",function(e){K(s,e)||ls(e,s)||P<=11&&setTimeout(Z(s,function(){return t.updateFromDOM()}),20)}),V(l,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),V(l,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),V(l,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),V(l,"touchstart",function(){return r.forceCompositionEnd()}),V(l,"input",function(){t.composing||t.readFromDOMSoon()}),V(l,"copy",i),V(l,"cut",i)},o.prototype.prepareSelection=function(){var e=dn(this.cm,!1);return e.focus=this.cm.state.focused,e},o.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},o.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},o.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),n=i.from(),i=i.to();if(t.display.viewTo==t.display.viewFrom||n.line>=t.display.viewTo||i.line<t.display.viewFrom)e.removeAllRanges();else{var o=gs(t,e.anchorNode,e.anchorOffset),r=gs(t,e.focusNode,e.focusOffset);if(!o||o.bad||!r||r.bad||0!=U(Be(o,r),n)||0!=U(Ie(o,r),i)){var o=t.display.view,r=n.line>=t.display.viewFrom&&fs(t,n)||{node:o[0].measure.map[2],offset:0},n=i.line<t.display.viewTo&&fs(t,i);if(n||(n={node:(o=(i=o[o.length-1].measure).maps?i.maps[i.maps.length-1]:i.map)[o.length-1],offset:o[o.length-2]-o[o.length-3]}),r&&n){var s,i=e.rangeCount&&e.getRangeAt(0);try{s=se(r.node,r.offset,n.offset,n.node)}catch(e){}s&&(!v&&t.state.focused&&(e.collapse(r.node,r.offset),s.collapsed)||(e.removeAllRanges(),e.addRange(s)),i&&null==e.anchorNode?e.addRange(i):v&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},o.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},o.prototype.showMultipleSelections=function(e){y(this.cm.display.cursorDiv,e.cursors),y(this.cm.display.selectionDiv,e.selection)},o.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},o.prototype.selectionInEditor=function(){var e=this.getSelection();return!!e.rangeCount&&(e=e.getRangeAt(0).commonAncestorContainer,F(this.div,e))},o.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},o.prototype.blur=function(){this.div.blur()},o.prototype.getField=function(){return this.div},o.prototype.supportsTouch=function(){return!0},o.prototype.receivedFocus=function(){var t=this;this.selectionInEditor()?this.pollSelection():d(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))})},o.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},o.prototype.pollSelection=function(){var t,e,i,n;null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()&&(t=this.getSelection(),e=this.cm,_&&h&&this.cm.options.gutters.length&&function(){for(var e=t.anchorNode;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return 1}()?(this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus()):this.composing||(this.rememberSelection(),i=gs(e,t.anchorNode,t.anchorOffset),n=gs(e,t.focusNode,t.focusOffset),i&&n&&d(e,function(){ee(e.doc,lo(i,n),pe),(i.bad||n.bad)&&(e.curOp.selectionChanged=!0)})))},o.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t=this.cm,i=t.display,n=t.doc.sel.primary(),o=n.from(),n=n.to();if(0==o.ch&&o.line>t.firstLine()&&(o=W(o.line-1,H(t.doc,o.line-1).length)),n.ch==H(t.doc,n.line).text.length&&n.line<t.lastLine()&&(n=W(n.line+1,0)),o.line<i.viewFrom||n.line>i.viewTo-1)return!1;var r,s=o.line==i.viewFrom||0==(s=cn(t,o.line))?(e=x(i.view[0].line),i.view[0].node):(e=x(i.view[s].line),i.view[s-1].node.nextSibling),n=cn(t,n.line),i=n==i.view.length-1?(r=i.viewTo-1,i.lineDiv.lastChild):(r=x(i.view[n+1].line)-1,i.view[n+1].node.previousSibling);if(!s)return!1;for(var l=t.doc.splitLines(function(r,e,t,s,l){var i="",a=!1,c=r.doc.lineSeparator(),h=!1;function d(){a&&(i+=c,h&&(i+=c),a=h=!1)}function u(e){e&&(d(),i+=e)}for(;function e(t){if(1==t.nodeType){var i=t.getAttribute("cm-text");if(i)return u(i);if(i=t.getAttribute("cm-marker"))return(i=r.findMarks(W(s,0),W(l+1,0),(o=+i,function(e){return e.id==o}))).length&&(i=i[0].find(0))&&u(Me(r.doc,i.from,i.to).join(c));if("false"!=t.getAttribute("contenteditable")&&(i=/^(pre|div|p|li|table|br)$/i.test(t.nodeName),/^br$/i.test(t.nodeName)||0!=t.textContent.length)){i&&d();for(var n=0;n<t.childNodes.length;n++)e(t.childNodes[n]);/^(pre|p)$/i.test(t.nodeName)&&(h=!0),i&&(a=!0)}}else 3==t.nodeType&&u(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var o}(e),e!=t;)e=e.nextSibling,h=!1;return i}(t,s,i,e,r)),a=Me(t.doc,W(e,0),W(r,H(t.doc,r).text.length));1<l.length&&1<a.length;)if($(l)==$(a))l.pop(),a.pop(),r--;else{if(l[0]!=a[0])break;l.shift(),a.shift(),e++}for(var c=0,h=0,d=l[0],u=a[0],p=Math.min(d.length,u.length);c<p&&d.charCodeAt(c)==u.charCodeAt(c);)++c;for(var f=$(l),m=$(a),g=Math.min(f.length-(1==l.length?c:0),m.length-(1==a.length?c:0));h<g&&f.charCodeAt(f.length-h-1)==m.charCodeAt(m.length-h-1);)++h;if(1==l.length&&1==a.length&&e==o.line)for(;c&&c>o.ch&&f.charCodeAt(f.length-h-1)==m.charCodeAt(m.length-h-1);)c--,h++;l[l.length-1]=f.slice(0,f.length-h).replace(/^\u200b+/,""),l[0]=l[0].slice(c).replace(/\u200b+$/,"");n=W(e,c),s=W(r,a.length?$(a).length-h:0);return 1<l.length||l[0]||U(n,s)?(Xo(t.doc,l,n,s,"+input"),!0):void 0},o.prototype.ensurePolled=function(){this.forceCompositionEnd()},o.prototype.reset=function(){this.forceCompositionEnd()},o.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},o.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},o.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||d(this.cm,function(){return w(e.cm)})},o.prototype.setUneditable=function(e){e.contentEditable="false"},o.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly())||Z(this.cm,ss)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},o.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},o.prototype.onContextMenu=function(){},o.prototype.resetPosition=function(){},o.prototype.needsContentAttribute=!0;function r(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new he,this.hasSelection=!1,this.composing=null}var vs,bs,ys,xs,ws;function s(e,t,n,i){xs.defaults[e]=t,n&&(ws[e]=i?function(e,t,i){i!=Yr&&n(e,t,i)}:n)}r.prototype.init=function(t){var e=this,i=this,n=this.cm,o=(this.createField(t),this.textarea);function r(e){if(!K(n,e)){if(n.somethingSelected())rs({lineWise:!1,text:n.getSelections()});else{if(!n.options.lineWiseCopyCut)return;var t=cs(n);rs({lineWise:!0,text:t.text}),"cut"==e.type?n.setSelections(t.ranges,null,pe):(i.prevInput="",o.value=t.text.join("\n"),le(o))}"cut"==e.type&&(n.state.cutIncoming=!0)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),T&&(o.style.width="0px"),V(o,"input",function(){j&&9<=P&&e.hasSelection&&(e.hasSelection=null),i.poll()}),V(o,"paste",function(e){K(n,e)||ls(e,n)||(n.state.pasteIncoming=!0,i.fastPoll())}),V(o,"cut",r),V(o,"copy",r),V(t.scroller,"paste",function(e){Si(t,e)||K(n,e)||(n.state.pasteIncoming=!0,i.focus())}),V(t.lineSpace,"selectstart",function(e){Si(t,e)||Y(e)}),V(o,"compositionstart",function(){var e=n.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:e,range:n.markText(e,n.getCursor("to"),{className:"CodeMirror-composing"})}}),V(o,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},r.prototype.createField=function(e){this.wrapper=ds(),this.textarea=this.wrapper.firstChild},r.prototype.prepareSelection=function(){var e,t=this.cm,i=t.display,n=t.doc,o=dn(t);return t.options.moveInputWithCursor&&(t=Xi(t,n.sel.primary().head,"div"),n=i.wrapper.getBoundingClientRect(),e=i.lineDiv.getBoundingClientRect(),o.teTop=Math.max(0,Math.min(i.wrapper.clientHeight-10,t.top+e.top-n.top)),o.teLeft=Math.max(0,Math.min(i.wrapper.clientWidth-10,t.left+e.left-n.left))),o},r.prototype.showSelection=function(e){var t=this.cm.display;y(t.cursorDiv,e.cursors),y(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},r.prototype.reset=function(e){var t,i;this.contextMenuPending||this.composing||((t=this.cm).somethingSelected()?(this.prevInput="",i=t.getSelection(),this.textarea.value=i,t.state.focused&&le(this.textarea),j&&9<=P&&(this.hasSelection=i)):e||(this.prevInput=this.textarea.value="",j&&9<=P&&(this.hasSelection=null)))},r.prototype.getField=function(){return this.textarea},r.prototype.supportsTouch=function(){return!1},r.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!L||re()!=this.textarea))try{this.textarea.focus()}catch(e){}},r.prototype.blur=function(){this.textarea.blur()},r.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},r.prototype.receivedFocus=function(){this.slowPoll()},r.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},r.prototype.fastPoll=function(){var t=!1,i=this;i.pollingFast=!0,i.polling.set(20,function e(){i.poll()||t?(i.pollingFast=!1,i.slowPoll()):(t=!0,i.polling.set(60,e))})},r.prototype.poll=function(){var e=this,t=this.cm,i=this.textarea,n=this.prevInput;if(this.contextMenuPending||!t.state.focused||Nt(i)&&!n&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var o=i.value;if(o==n&&!t.somethingSelected())return!1;if(j&&9<=P&&this.hasSelection===o||ie&&/[\uf700-\uf7ff]/.test(o))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var r=o.charCodeAt(0);if(8203==r&&(n=n||""),8666==r)return this.reset(),this.cm.execCommand("undo")}for(var s=0,l=Math.min(n.length,o.length);s<l&&n.charCodeAt(s)==o.charCodeAt(s);)++s;return d(t,function(){ss(t,o.slice(s),n.length-s,null,e.composing?"*compose":null),1e3<o.length||-1<o.indexOf("\n")?i.value=e.prevInput="":e.prevInput=o,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},r.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},r.prototype.onKeyPress=function(){j&&9<=P&&(this.hasSelection=null),this.fastPoll()},r.prototype.onContextMenu=function(e){var i,n,t,o,r=this,s=r.cm,l=s.display,a=r.textarea,c=an(s,e),h=l.scroller.scrollTop;function d(){var e,t;null!=a.selectionStart&&(t=""+((e=s.somethingSelected())?a.value:""),a.value="",a.value=t,r.prevInput=e?"":"",a.selectionStart=1,a.selectionEnd=t.length,l.selForContextMenu=s.doc.sel)}function u(){var e,t;r.contextMenuPending=!1,r.wrapper.style.cssText=n,a.style.cssText=i,j&&P<9&&l.scrollbars.setScrollTop(l.scroller.scrollTop=h),null!=a.selectionStart&&((!j||P<9)&&d(),e=0,t=function(){l.selForContextMenu==s.doc.sel&&0==a.selectionStart&&0<a.selectionEnd&&""==r.prevInput?Z(s,$o)(s):e++<10?l.detectingSelectAll=setTimeout(t,500):(l.selForContextMenu=null,l.input.reset())},l.detectingSelectAll=setTimeout(t,200))}c&&!k&&(s.options.resetSelectionOnContextMenu&&-1==s.doc.sel.contains(c)&&Z(s,ee)(s.doc,lo(c),pe),i=a.style.cssText,n=r.wrapper.style.cssText,r.wrapper.style.cssText="position: absolute",c=r.wrapper.getBoundingClientRect(),a.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-c.top-5)+"px; left: "+(e.clientX-c.left-5)+"px;\n      z-index: 1000; background: "+(j?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",I&&(t=window.scrollY),l.input.focus(),I&&window.scrollTo(null,t),l.input.reset(),s.somethingSelected()||(a.value=r.prevInput=" "),r.contextMenuPending=!0,l.selForContextMenu=s.doc.sel,clearTimeout(l.detectingSelectAll),j&&9<=P&&d(),oe?(Lt(e),o=function(){G(window,"mouseup",o),setTimeout(u,20)},V(window,"mouseup",o)):setTimeout(u,50))},r.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},r.prototype.setUneditable=function(){},r.prototype.needsContentAttribute=!1,ws=(xs=g).optionHandlers,xs.defineOption=s,xs.Init=Yr,s("value","",function(e,t){return e.setValue(t)},!0),s("mode",null,function(e,t){e.doc.modeOption=t,po(e)},!0),s("indentUnit",2,po,!0),s("indentWithTabs",!1),s("smartIndent",!0),s("tabSize",4,function(e){fo(e),$i(e),w(e)},!0),s("lineSeparator",null,function(e,n){if(e.doc.lineSep=n){var o=[],r=e.doc.first;e.doc.iter(function(e){for(var t=0;;){var i=e.text.indexOf(n,t);if(-1==i)break;t=i+n.length,o.push(W(r,i))}r++});for(var t=o.length-1;0<=t;t--)Xo(e.doc,n,o[t],W(o[t].line,o[t].ch+n.length))}}),s("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,i){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),i!=Yr&&e.refresh()}),s("specialCharPlaceholder",ai,function(e){return e.refresh()},!0),s("electricChars",!0),s("inputStyle",L?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),s("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),s("rtlMoveVisually",!a),s("wholeLineUpdateBefore",!0),s("theme","default",function(e){Kr(e),Qr(e)},!0),s("keyMap","default",function(e,t,i){t=Tr(t),i=i!=Yr&&Tr(i);i&&i.detach&&i.detach(e,t),t.attach&&t.attach(e,i||null)}),s("extraKeys",null),s("configureMouse",null),s("lineWrapping",!1,ts,!0),s("gutters",[],function(e){io(e.options),Qr(e)},!0),s("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?rn(e.display)+"px":"0",e.refresh()},!0),s("coverGutterNextToScrollbar",!1,function(e){return jn(e)},!0),s("scrollbarStyle","native",function(e){Bn(e),jn(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),s("lineNumbers",!1,function(e){io(e.options),Qr(e)},!0),s("firstLineNumber",1,Qr,!0),s("lineNumberFormatter",function(e){return e},Qr,!0),s("showCursorWhenSelecting",!1,hn,!0),s("resetSelectionOnContextMenu",!0),s("lineWiseCopyCut",!0),s("pasteLinesPerSelection",!0),s("selectionsMayTouch",!1),s("readOnly",!1,function(e,t){"nocursor"==t&&(bn(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),s("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),s("dragDrop",!0,es),s("allowDropFileTypes",null),s("cursorBlinkRate",530),s("cursorScrollMargin",0),s("cursorHeight",1,hn,!0),s("singleCursorHeightPerLine",!0,hn,!0),s("workTime",100),s("workDelay",100),s("flattenSpans",!0,fo,!0),s("addModeClass",!1,fo,!0),s("pollInterval",100),s("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),s("historyEventDelay",1250),s("viewportMargin",10,function(e){return e.refresh()},!0),s("maxHighlightLength",1e4,fo,!0),s("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),s("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),s("autofocus",null),s("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),s("phrases",null),bs=(vs=g).optionHandlers,ys=vs.helpers={},vs.prototype={constructor:vs,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var i=this.options,n=i[e];i[e]==t&&"mode"!=e||(i[e]=t,bs.hasOwnProperty(e)&&Z(this,bs[e])(this,t,n),X(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Tr(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,i=0;i<t.length;++i)if(t[i]==e||t[i].name==e)return t.splice(i,1),!0},addOverlay:i(function(e,t){var i=e.token?e:vs.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");for(var n=this.state.overlays,i={mode:i,modeSpec:e,opaque:t&&t.opaque,priority:t&&t.priority||0},o=function(e){return e.priority},r=0,s=o(i);r<n.length&&o(n[r])<=s;)r++;n.splice(r,0,i),this.state.modeGen++,w(this)}),removeOverlay:i(function(e){for(var t=this.state.overlays,i=0;i<t.length;++i){var n=t[i].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(i,1),this.state.modeGen++,void w(this)}}),indentLine:i(function(e,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Ne(this.doc,e)&&ns(this,e,t,i)}),indentSelection:i(function(e){for(var t=this.doc.sel.ranges,i=-1,n=0;n<t.length;n++){var o=t[n];if(o.empty())o.head.line>i&&(ns(this,o.head.line,e,!0),i=o.head.line,n==this.doc.sel.primIndex)&&_n(this);else{for(var r=o.from(),o=o.to(),s=Math.max(i,r.line),i=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1,l=s;l<i;++l)ns(this,l,e);o=this.doc.sel.ranges;0==r.ch&&t.length==o.length&&0<o[n].from().ch&&Oo(this.doc,n,new Q(r,o[n].to()),pe)}}}),getTokenAt:function(e,t){return ei(this,e,t)},getLineTokens:function(e,t){return ei(this,W(e),t,!0)},getTokenTypeAt:function(e){e=q(this.doc,e);var t,i=Xt(this,H(this.doc,e.line)),n=0,o=(i.length-1)/2,r=e.ch;if(0==r)t=i[2];else for(;;){var s=n+o>>1;if((s?i[2*s-1]:0)>=r)o=s;else{if(!(i[2*s+1]<r)){t=i[2*s+2];break}n=1+s}}e=t?t.indexOf("overlay "):-1;return e<0?t:0==e?null:t.slice(0,e-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?vs.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(ys.hasOwnProperty(t)){var n=ys[t],o=this.getModeAt(e);if("string"==typeof o[t])n[o[t]]&&i.push(n[o[t]]);else if(o[t])for(var r=0;r<o[t].length;r++){var s=n[o[t][r]];s&&i.push(s)}else o.helperType&&n[o.helperType]?i.push(n[o.helperType]):n[o.name]&&i.push(n[o.name]);for(var l=0;l<n._global.length;l++){var a=n._global[l];a.pred(o,this)&&-1==S(i,a.val)&&i.push(a.val)}}return i},getStateAfter:function(e,t){var i=this.doc;return Kt(this,(e=Re(i,null==e?i.first+i.size-1:e))+1,t).state},cursorCoords:function(e,t){var i=this.doc.sel.primary();return Xi(this,null==e?i.head:"object"==typeof e?q(this.doc,e):e?i.from():i.to(),t||"page")},charCoords:function(e,t){return Gi(this,q(this.doc,e),t||"page")},coordsChar:function(e,t){return Zi(this,(e=Vi(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Vi(this,{top:e,left:0},t||"page").top,Fe(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,i){var n=!1,o="number"==typeof e?(o=this.doc.first+this.doc.size-1,e<this.doc.first?e=this.doc.first:o<e&&(e=o,n=!0),H(this.doc,e)):e;return qi(this,o,{top:0,left:0},t||"page",i||n).top+(n?this.doc.height-lt(o):0)},defaultTextHeight:function(){return tn(this.display)},defaultCharWidth:function(){return nn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,i,n,o){var r,s,l=this.display,a=(e=Xi(this,q(this.doc,e))).bottom,c=e.left;t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),l.sizer.appendChild(t),"over"==n?a=e.top:"above"!=n&&"near"!=n||(r=Math.max(l.wrapper.clientHeight,this.doc.height),s=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth),("above"==n||e.bottom+t.offsetHeight>r)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=r&&(a=e.bottom),c+t.offsetWidth>s&&(c=s-t.offsetWidth)),t.style.top=a+"px",t.style.left=t.style.right="","right"==o?(c=l.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==o?c=0:"middle"==o&&(c=(l.sizer.clientWidth-t.offsetWidth)/2),t.style.left=c+"px"),i&&(null!=(n=Sn(this,{left:c,top:a,right:c+t.offsetWidth,bottom:a+t.offsetHeight})).scrollTop&&Mn(this,n.scrollTop),null!=n.scrollLeft)&&Dn(this,n.scrollLeft)},triggerOnKeyDown:i(Br),triggerOnKeyPress:i($r),triggerOnKeyUp:Rr,triggerOnMouseDown:i(qr),execCommand:function(e){if(Mr.hasOwnProperty(e))return Mr[e].call(null,this)},triggerElectric:i(function(e){as(this,e)}),findPosH:function(e,t,i,n){var o=1;t<0&&(o=-1,t=-t);for(var r=q(this.doc,e),s=0;s<t&&!(r=us(this.doc,r,o,i,n)).hitSide;++s);return r},moveH:i(function(t,i){var n=this;this.extendSelectionsBy(function(e){return n.display.shift||n.doc.extend||e.empty()?us(n.doc,e.head,t,i,n.options.rtlMoveVisually):t<0?e.from():e.to()},me)}),deleteH:i(function(i,n){var e=this.doc.sel,o=this.doc;e.somethingSelected()?o.replaceSelection("",null,"+delete"):_r(this,function(e){var t=us(o,e.head,i,n,!1);return i<0?{from:t,to:e.head}:{from:e.head,to:t}})}),findPosV:function(e,t,i,n){var o=1,r=n;t<0&&(o=-1,t=-t);for(var s=q(this.doc,e),l=0;l<t;++l){var a=Xi(this,s,"div");if(null==r?r=a.left:a.left=r,(s=ps(this,a,o,i)).hitSide)break}return s},moveV:i(function(n,o){var r=this,s=this.doc,l=[],a=!this.display.shift&&!s.extend&&s.sel.somethingSelected();if(s.extendSelectionsBy(function(e){var t,i;return a?n<0?e.from():e.to():(t=Xi(r,e.head,"div"),null!=e.goalColumn&&(t.left=e.goalColumn),l.push(t.left),i=ps(r,t,n,o),"page"==o&&e==s.sel.primary()&&Tn(r,Gi(r,i,"div").top-t.top),i)},me),l.length)for(var e=0;e<s.sel.ranges.length;e++)s.sel.ranges[e].goalColumn=l[e]}),findWordAt:function(e){var t=H(this.doc,e.line).text,i=e.ch,n=e.ch;if(t){var o=this.getHelper(e,"wordChars");"before"!=e.sticky&&n!=t.length||!i?++n:--i;for(var r=t.charAt(i),s=Se(r,o)?function(e){return Se(e,o)}:/\s/.test(r)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Se(e)};0<i&&s(t.charAt(i-1));)--i;for(;n<t.length&&s(t.charAt(n));)++n}return new Q(W(e.line,i),W(e.line,n))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||(((this.state.overwrite=!this.state.overwrite)?N:M)(this.display.cursorDiv,"CodeMirror-overwrite"),X(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==re()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:i(function(e,t){Ln(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Ai(this)-this.display.barHeight,width:e.scrollWidth-Ai(this)-this.display.barWidth,clientHeight:Mi(this),clientWidth:Ei(this)}},scrollIntoView:i(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:W(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?(t=e,An(this),this.curOp.scrollToPos=t):En(this,e.from,e.to,e.margin)}),setSize:i(function(e,t){function i(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var n=this,o=(null!=e&&(this.display.wrapper.style.width=i(e)),null!=t&&(this.display.wrapper.style.height=i(t)),this.options.lineWrapping&&Ri(this),this.display.viewFrom);this.doc.iter(o,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Wn(n,o,"widget");break}++o}),this.curOp.forceUpdate=!0,X(this,"refresh",this)}),operation:function(e){return d(this,e)},startOperation:function(){return $n(this)},endOperation:function(){return Hn(this)},refresh:i(function(){var e=this.display.cachedTextHeight;w(this),this.curOp.forceUpdate=!0,$i(this),Ln(this,this.doc.scrollLeft,this.doc.scrollTop),Qn(this),(null==e||.5<Math.abs(e-tn(this.display)))&&ln(this),X(this,"refresh",this)}),swapDoc:i(function(e){var t=this.doc;return t.cm=null,bo(this,e),$i(this),this.display.input.reset(),Ln(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,b(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},St(vs),vs.registerHelper=function(e,t,i){ys.hasOwnProperty(e)||(ys[e]=vs[e]={_global:[]}),ys[e][t]=i},vs.registerGlobalHelper=function(e,t,i,n){vs.registerHelper(e,t,n),ys[e]._global.push({pred:i,val:n})};var ks,Cs="iter insert remove copy getEditor constructor".split(" ");for(ks in f.prototype)f.prototype.hasOwnProperty(ks)&&S(Cs,ks)<0&&(g.prototype[ks]=function(e){return function(){return e.apply(this.doc,arguments)}}(f.prototype[ks]));return St(f),g.inputStyles={textarea:r,contenteditable:o},g.defineMode=function(e){g.defaults.mode||"null"==e||(g.defaults.mode=e),function(e,t){2<arguments.length&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Pt[e]=t}.apply(this,arguments)},g.defineMIME=function(e,t){It[e]=t},g.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),g.defineMIME("text/plain","null"),g.defineExtension=function(e,t){g.prototype[e]=t},g.defineDocExtension=function(e,t){f.prototype[e]=t},g.fromTextArea=function(t,e){var i;function n(){t.value=l.getValue()}if((e=e?ce(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus&&(i=re(),e.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body),t.form&&(V(t.form,"submit",n),!e.leaveSubmitMethodAlone)){var o=t.form,r=o.submit;try{var s=o.submit=function(){n(),o.submit=r,o.submit(),o.submit=s}}catch(e){}}e.finishInit=function(e){e.save=n,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,n(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(G(t.form,"submit",n),"function"==typeof t.form.submit)&&(t.form.submit=r)}},t.style.display="none";var l=g(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},e);return l},(t=g).off=G,t.on=V,t.wheelEventPixels=function(e){e=oo(e);return e.x*=p,e.y*=p,e},t.Doc=f,t.splitLines=Ft,t.countColumn=R,t.findColumn=ge,t.isWordChar=Ce,t.Pass=ue,t.signal=X,t.Line=ni,t.changeEnd=ao,t.scrollbarModel=In,t.Pos=W,t.cmpPos=U,t.modes=Pt,t.mimeModes=It,t.resolveMode=Bt,t.getMode=Rt,t.modeExtensions=$t,t.extendMode=function(e,t){ce(t,$t.hasOwnProperty(e)?$t[e]:$t[e]={})},t.copyState=Ht,t.startState=Ut,t.innerMode=Wt,t.commands=Mr,t.keyMap=yr,t.keyName=Sr,t.isModifierKey=kr,t.lookupKey=wr,t.normalizeKeyMap=function(e){var t,i,n={};for(t in e)if(e.hasOwnProperty(t)){var o=e[t];if(/^(name|fallthrough|(de|at)tach)$/.test(t))continue;if("..."==o){delete e[t];continue}for(var r=ye(t.split(" "),xr),s=0;s<r.length;s++){var l=void 0,a=s==r.length-1?(l=r.join(" "),o):(l=r.slice(0,s+1).join(" "),"..."),c=n[l];if(c){if(c!=a)throw new Error("Inconsistent bindings for "+l)}else n[l]=a}delete e[t]}for(i in n)e[i]=n[i];return e},t.StringStream=m,t.SharedTextMarker=sr,t.TextMarker=nr,t.LineWidget=tr,t.e_preventDefault=Y,t.e_stopPropagation=Tt,t.e_stop=Lt,t.addClass=N,t.contains=F,t.rmClass=M,t.keyNames=mr,g.version="5.41.0",g};"object"==typeof i&&void 0!==t?t.exports=n():this.CodeMirror=n()},{}],12:[function(e,t,i){var n=function(c){var h=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?]))/i;c.defineMode("gfm",function(e,n){var t,o=/(?:\@\(.*?)\)/,r=/(?:\@\ (.*?)\)/,s=/(^|\s)(@all)(\s|$)/,l=0,i={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,t){if(e.match(o))return"usercontainer";if(e.match(r))return"groupcontainer";if(e.match(s))return"allcontainer";if(t.combineTokens=null,t.codeBlock)return e.match(/^```+/)?t.codeBlock=!1:e.skipToEnd(),null;if(e.sol()&&(t.code=!1),e.sol()&&e.match(/^```+/))return e.skipToEnd(),t.codeBlock=!0,null;var i;if("`"===e.peek())return e.next(),i=e.pos,e.eatWhile("`"),i=1+e.pos-i,t.code?i===l&&(t.code=!1):(l=i,t.code=!0),null;if(t.code)return e.next(),null;if(e.eatSpace())return t.ateSpace=!0,null;if((e.sol()||t.ateSpace)&&(t.ateSpace=!1)!==n.gitHubSpice){if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return t.combineTokens=!0,"link";if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return t.combineTokens=!0,"link"}return e.match(h)&&"]("!=e.string.slice(e.start-2,e.start)&&(0==e.start||/\W/.test(e.string.charAt(e.start-1)))?(t.combineTokens=!0,"link"):(e.next(),null)},blankLine:function(e){return e.code=!1,null}},a={taskLists:!0,strikethrough:!0,emoji:!0};for(t in n)a[t]=n[t];return a.name="markdown",c.overlayMode(c.getMode(e,a),i)},"markdown"),c.defineMIME("text/x-gfm","gfm")};"object"==typeof i&&"object"==typeof t?n(e("../../lib/codemirror"),e("../markdown/markdown"),e("../../addon/mode/overlay")):n(CodeMirror)},{"../../addon/mode/overlay":8,"../../lib/codemirror":11,"../markdown/markdown":13}],13:[function(e,t,i){var n=function(D){D.defineMode("markdown",function(u,p){var e,d=D.getMode(u,"text/html"),o="null"==d.name,f=(void 0===p.highlightFormatting&&(p.highlightFormatting=!1),void 0===p.maxBlockquoteDepth&&(p.maxBlockquoteDepth=0),void 0===p.taskLists&&(p.taskLists=!1),void 0===p.strikethrough&&(p.strikethrough=!1),void 0===p.emoji&&(p.emoji=!1),void 0===p.fencedCodeBlockHighlighting&&(p.fencedCodeBlockHighlighting=!0),void 0===p.xml&&(p.xml=!0),void 0===p.tokenTypeOverrides&&(p.tokenTypeOverrides={}),{header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"});for(e in f)f.hasOwnProperty(e)&&p.tokenTypeOverrides[e]&&(f[e]=p.tokenTypeOverrides[e]);var m=/^([*\-_])(?:\s*\1){2,}\s*$/,g=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,v=/^\[(x| )\](?=\s)/i,b=p.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,y=/^ *(?:\={1,}|-{1,})\s*$/,i=/^[^#!\[\]*_\\<>` "'(~:]+/,x=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,w=/^\s*\[[^\]]+?\]:.*$/,k=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function C(e,t,i){return(t.f=t.inline=i)(e,t)}function S(e,t,i){return(t.f=t.block=i)(e,t)}function n(e){var t;return e.linkTitle=!1,e.linkHref=!1,e.linkText=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,e.f==T&&(o?o:"xml"==(t=D.innerMode(d,e.htmlState)).mode.name&&null===t.state.tagStart&&!t.state.context&&t.state.tokenize.isInText)&&(e.f=A,e.block=r,e.htmlState=null),e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine={stream:null},null}function r(e,t){var i=e.column()===t.indentation,n=!(n=t.prevLine.stream)||!/\S/.test(n.string),o=t.indentedCode,r=t.prevLine.hr,s=!1!==t.list,l=(t.listStack[t.listStack.length-1]||0)+3,a=(t.indentedCode=!1,t.indentation);if(null===t.indentationDiff&&(t.indentationDiff=t.indentation,s)){for(t.em=!1,t.strong=!1,t.code=!1,t.strikethrough=!1,t.list=null;a<t.listStack[t.listStack.length-1];)t.listStack.pop(),t.listStack.length?t.indentation=t.listStack[t.listStack.length-1]:t.list=!1;!1!==t.list&&(t.indentationDiff=a-t.listStack[t.listStack.length-1])}var c,h=!(n||r||t.prevLine.header||s&&o||t.prevLine.fencedCodeEnd),r=(!1===t.list||r||n)&&t.indentation<=l&&e.match(m),d=null;return 4<=t.indentationDiff&&(o||t.prevLine.fencedCodeEnd||t.prevLine.header||n)?(e.skipToEnd(),t.indentedCode=!0,f.code):e.eatSpace()?null:i&&t.indentation<=l&&(d=e.match(b))&&d[1].length<=6?(t.quote=0,t.header=d[1].length,t.thisLine.header=!0,p.highlightFormatting&&(t.formatting="header"),t.f=t.inline,L(t)):t.indentation<=l&&e.eat(">")?(t.quote=i?1:t.quote+1,p.highlightFormatting&&(t.formatting="quote"),e.eatSpace(),L(t)):!r&&!t.setext&&i&&t.indentation<=l&&(d=e.match(g))?(o=d[1]?"ol":"ul",t.indentation=a+e.current().length,t.list=!0,t.quote=0,t.listStack.push(t.indentation),p.taskLists&&e.match(v,!1)&&(t.taskList=!0),t.f=t.inline,p.highlightFormatting&&(t.formatting=["list","list-"+o]),L(t)):i&&t.indentation<=l&&(d=e.match(x,!0))?(t.quote=0,t.fencedEndRE=new RegExp(d[1]+"+ *$"),t.localMode=p.fencedCodeBlockHighlighting&&(n=d[2],D.findModeByName&&(c=D.findModeByName(n))&&(n=c.mime||c.mimes[0]),"null"==(c=D.getMode(u,n)).name?null:c),t.localMode&&(t.localState=D.startState(t.localMode)),t.f=t.block=_,p.highlightFormatting&&(t.formatting="code-block"),t.code=-1,L(t)):t.setext||!(h&&s||t.quote||!1!==t.list||t.code||r||w.test(e.string))&&(d=(d=e.lookAhead(1))&&d.match(y))?(t.setext?(t.header=t.setext,t.setext=0,e.skipToEnd(),p.highlightFormatting&&(t.formatting="header")):(t.header="="==d[0].charAt(0)?1:2,t.setext=t.header),t.thisLine.header=!0,t.f=t.inline,L(t)):r?(e.skipToEnd(),t.hr=!0,t.thisLine.hr=!0,f.hr):"["===e.peek()?C(e,t,O):C(e,t,t.inline)}function T(e,t){var i,n=d.token(e,t.htmlState);return!o&&("xml"==(i=D.innerMode(d,t.htmlState)).mode.name&&null===i.state.tagStart&&!i.state.context&&i.state.tokenize.isInText||t.md_inside&&-1<e.current().indexOf(">"))&&(t.f=A,t.block=r,t.htmlState=null),n}function _(e,t){var i,n=t.listStack[t.listStack.length-1]||0,o=t.indentation<n;return t.fencedEndRE&&t.indentation<=n+3&&(o||e.match(t.fencedEndRE))?(p.highlightFormatting&&(t.formatting="code-block"),o||(i=L(t)),t.localMode=t.localState=null,t.block=r,t.f=A,t.fencedEndRE=null,t.code=0,t.thisLine.fencedCodeEnd=!0,o?S(e,t,t.block):i):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),f.code)}function L(e){var t,i=[];if(e.formatting){i.push(f.formatting),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var n=0;n<e.formatting.length;n++)i.push(f.formatting+"-"+e.formatting[n]),"header"===e.formatting[n]&&i.push(f.formatting+"-"+e.formatting[n]+"-"+e.header),"quote"===e.formatting[n]&&(!p.maxBlockquoteDepth||p.maxBlockquoteDepth>=e.quote?i.push(f.formatting+"-"+e.formatting[n]+"-"+e.quote):i.push("error"))}return e.taskOpen?i.push("meta"):e.taskClosed?i.push("property"):(e.linkHref?i.push(f.linkHref,"url"):(e.strong&&i.push(f.strong),e.em&&i.push(f.em),e.strikethrough&&i.push(f.strikethrough),e.emoji&&i.push(f.emoji),e.linkText&&i.push(f.linkText),e.code&&i.push(f.code),e.image&&i.push(f.image),e.imageAltText&&i.push(f.imageAltText,"link"),e.imageMarker&&i.push(f.imageMarker)),e.header&&i.push(f.header,f.header+"-"+e.header),e.quote&&(i.push(f.quote),!p.maxBlockquoteDepth||p.maxBlockquoteDepth>=e.quote?i.push(f.quote+"-"+e.quote):i.push(f.quote+"-"+p.maxBlockquoteDepth)),!1!==e.list&&(t=(e.listStack.length-1)%3,i.push(t?1==t?f.list2:f.list3:f.list1)),e.trailingSpaceNewLine?i.push("trailing-space-new-line"):e.trailingSpace&&i.push("trailing-space-"+(e.trailingSpace%2?"a":"b"))),i.length?i.join(" "):null}function t(e,t){if(e.match(i,!0))return L(t)}function A(e,t){var i=t.text(e,t);if(void 0!==i)return i;if(t.list)return t.list=null,L(t);if(t.taskList)return" "===e.match(v,!0)[1]?t.taskOpen=!0:t.taskClosed=!0,p.highlightFormatting&&(t.formatting="task"),t.taskList=!1,L(t);if(t.taskOpen=!1,t.taskClosed=!1,t.header&&e.match(/^#+$/,!0))return p.highlightFormatting&&(t.formatting="header"),L(t);var n,o=e.next();if(t.linkTitle){t.linkTitle=!1;var i=o,i="^\\s*(?:[^"+(i=((i="("===o?")":o)+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+i;if(e.match(new RegExp(i),!0))return f.linkHref}if("`"===o)return i=t.formatting,p.highlightFormatting&&(t.formatting="code"),e.eatWhile("`"),l=e.current().length,0!=t.code||t.quote&&1!=l?l!=t.code?(t.formatting=i,L(t)):(n=L(t),t.code=0,n):(t.code=l,L(t));if(t.code)return L(t);if("\\"===o&&(e.next(),p.highlightFormatting))return s=L(t),i=f.formatting+"-escape",s?s+" "+i:i;if("!"===o&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return t.imageMarker=!0,t.image=!0,p.highlightFormatting&&(t.formatting="image"),L(t);if("["===o&&t.imageMarker&&e.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return t.imageMarker=!1,t.imageAltText=!0,p.highlightFormatting&&(t.formatting="image"),L(t);if("]"===o&&t.imageAltText)return p.highlightFormatting&&(t.formatting="image"),s=L(t),t.imageAltText=!1,t.image=!1,t.inline=t.f=M,s;if("["===o&&!t.image)return t.linkText&&e.match(/^.*?\]/)||(t.linkText=!0,p.highlightFormatting&&(t.formatting="link")),L(t);if("]"===o&&t.linkText)return p.highlightFormatting&&(t.formatting="link"),s=L(t),t.linkText=!1,t.inline=t.f=e.match(/\(.*?\)| ?\[.*?\]/,!1)?M:A,s;if("<"===o&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return t.f=t.inline=E,p.highlightFormatting&&(t.formatting="link"),(s=L(t))?s+=" ":s="",s+f.linkInline;if("<"===o&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return t.f=t.inline=E,p.highlightFormatting&&(t.formatting="link"),(s=L(t))?s+=" ":s="",s+f.linkEmail;if(p.xml&&"<"===o&&e.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1))return-1!=(l=e.string.indexOf(">",e.pos))&&(i=e.string.substring(e.start,l),/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(i))&&(t.md_inside=!0),e.backUp(1),t.htmlState=D.startState(d),S(e,t,T);if(p.xml&&"<"===o&&e.match(/^\/\w*?>/))return t.md_inside=!1,"tag";if("*"===o||"_"===o){for(var r=1,s=1==e.pos?" ":e.string.charAt(e.pos-2);r<3&&e.eat(o);)r++;var l=e.peek()||" ",i=!/\s/.test(l)&&(!k.test(l)||/\s/.test(s)||k.test(s)),a=!/\s/.test(s)&&(!k.test(s)||/\s/.test(l)||k.test(l)),c=null,h=null;if(r%2&&(t.em||!i||"*"!==o&&a&&!k.test(s)?t.em!=o||!a||"*"!==o&&i&&!k.test(l)||(c=!1):c=!0),1<r&&(t.strong||!i||"*"!==o&&a&&!k.test(s)?t.strong!=o||!a||"*"!==o&&i&&!k.test(l)||(h=!1):h=!0),null!=h||null!=c)return p.highlightFormatting&&(t.formatting=null==c?"strong":null==h?"em":"strong em"),!0===c&&(t.em=o),!0===h&&(t.strong=o),n=L(t),!1===c&&(t.em=!1),!1===h&&(t.strong=!1),n}else if(" "===o&&(e.eat("*")||e.eat("_"))){if(" "===e.peek())return L(t);e.backUp(1)}if(p.strikethrough)if("~"===o&&e.eatWhile(o)){if(t.strikethrough)return p.highlightFormatting&&(t.formatting="strikethrough"),n=L(t),t.strikethrough=!1,n;if(e.match(/^[^\s]/,!1))return t.strikethrough=!0,p.highlightFormatting&&(t.formatting="strikethrough"),L(t)}else if(" "===o&&e.match(/^~~/,!0)){if(" "===e.peek())return L(t);e.backUp(2)}return p.emoji&&":"===o&&e.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)?(t.emoji=!0,p.highlightFormatting&&(t.formatting="emoji"),s=L(t),t.emoji=!1,s):(" "===o&&(e.match(/^ +$/,!1)?t.trailingSpace++:t.trailingSpace&&(t.trailingSpaceNewLine=!0)),L(t))}function E(e,t){if(">"!==e.next())return e.match(/^[^>]+/,!0),f.linkInline;t.f=t.inline=A,p.highlightFormatting&&(t.formatting="link");e=L(t);return e?e+=" ":e="",e+f.linkInline}function M(e,t){var i;return e.eatSpace()?null:"("===(e=e.next())||"["===e?(t.f=t.inline=(i="("===e?")":"]",function(e,t){if(e.next()!==i)return e.match(s[i]),t.linkHref=!0,L(t);t.f=t.inline=A,p.highlightFormatting&&(t.formatting="link-string");e=L(t);return t.linkHref=!1,e}),p.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,L(t)):"error"}var s={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function O(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=l,e.next(),p.highlightFormatting&&(t.formatting="link"),t.linkText=!0,L(t)):C(e,t,A)}function l(e,t){var i;return e.match(/^\]:/,!0)?(t.f=t.inline=a,p.highlightFormatting&&(t.formatting="link"),i=L(t),t.linkText=!1,i):(e.match(/^([^\]\\]|\\.)+/,!0),f.linkText)}function a(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=A,f.linkHref+" url")}var c={startState:function(){return{f:r,prevLine:{stream:null},thisLine:{stream:null},block:r,htmlState:null,indentation:0,inline:A,text:t,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(e){return{f:e.f,prevLine:e.prevLine,thisLine:e.thisLine,block:e.block,htmlState:e.htmlState&&D.copyState(d,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?D.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,formatting:!1,linkText:e.linkText,linkTitle:e.linkTitle,linkHref:e.linkHref,code:e.code,em:e.em,strong:e.strong,strikethrough:e.strikethrough,emoji:e.emoji,header:e.header,setext:e.setext,hr:e.hr,taskList:e.taskList,list:e.list,listStack:e.listStack.slice(0),quote:e.quote,indentedCode:e.indentedCode,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside,fencedEndRE:e.fencedEndRE}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine.stream){if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0))return n(t),null;if(t.prevLine=t.thisLine,t.thisLine={stream:e},t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,!t.localState&&(t.f=t.block,t.f!=T)){var i=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentation=i,t.indentationDiff=null,0<i)return null}}return t.f(e,t)},innerMode:function(e){return e.block==T?{state:e.htmlState,mode:d}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:c}},indent:function(e,t,i){return e.block==T&&d.indent?d.indent(e.htmlState,t,i):e.localState&&e.localMode.indent?e.localMode.indent(e.localState,t,i):D.Pass},blankLine:n,getType:L,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return c},"xml"),D.defineMIME("text/markdown","markdown"),D.defineMIME("text/x-markdown","markdown")};"object"==typeof i&&"object"==typeof t?n(e("../../lib/codemirror"),e("../xml/xml"),e("../meta")):n(CodeMirror)},{"../../lib/codemirror":11,"../meta":14,"../xml/xml":15}],14:[function(e,t,i){var o="object"==typeof i&&"object"==typeof t?e("../lib/codemirror"):CodeMirror;o.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"null",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var n=0;n<o.modeInfo.length;n++){var r=o.modeInfo[n];r.mimes&&(r.mime=r.mimes[0])}o.findModeByMIME=function(e){e=e.toLowerCase();for(var t=0;t<o.modeInfo.length;t++){var i=o.modeInfo[t];if(i.mime==e)return i;if(i.mimes)for(var n=0;n<i.mimes.length;n++)if(i.mimes[n]==e)return i}return/\+xml$/.test(e)?o.findModeByMIME("application/xml"):/\+json$/.test(e)?o.findModeByMIME("application/json"):void 0},o.findModeByExtension=function(e){for(var t=0;t<o.modeInfo.length;t++){var i=o.modeInfo[t];if(i.ext)for(var n=0;n<i.ext.length;n++)if(i.ext[n]==e)return i}},o.findModeByFileName=function(e){for(var t=0;t<o.modeInfo.length;t++){var i=o.modeInfo[t];if(i.file&&i.file.test(e))return i}var n=e.lastIndexOf("."),n=-1<n&&e.substring(n+1,e.length);if(n)return o.findModeByExtension(n)},o.findModeByName=function(e){e=e.toLowerCase();for(var t=0;t<o.modeInfo.length;t++){var i=o.modeInfo[t];if(i.name.toLowerCase()==e)return i;if(i.alias)for(var n=0;n<i.alias.length;n++)if(i.alias[n].toLowerCase()==e)return i}}},{"../lib/codemirror":11}],15:[function(e,t,i){var k,C,S;k="object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror,S={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!(C={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}),allowMissing:!1,allowMissingTagName:!1,caseFold:!1},k.defineMode("xml",function(e,t){var o,r,i,s=e.indentUnit,l={},n=t.htmlMode?C:S;for(i in n)l[i]=n[i];for(i in t)l[i]=t[i];function a(t,i){function e(e){return(i.tokenize=e)(t,i)}var n=t.next();return"<"==n?t.eat("!")?t.eat("[")?t.match("CDATA[")?e(h("atom","]]>")):null:t.match("--")?e(h("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),e(function n(o){return function(e,t){for(var i;null!=(i=e.next());){if("<"==i)return t.tokenize=n(o+1),t.tokenize(e,t);if(">"==i){if(1!=o)return t.tokenize=n(o-1),t.tokenize(e,t);t.tokenize=a;break}}return"meta"}}(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),i.tokenize=h("meta","?>"),"meta"):(o=t.eat("/")?"closeTag":"openTag",i.tokenize=c,"tag bracket"):"&"!=n?(t.eatWhile(/[^&<]/),null):(t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"))?"atom":"error"}function c(e,t){var i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=a,o=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return o="equals",null;if("<"!=i)return/[\'\"]/.test(i)?(t.tokenize=(n=i,(i=function(e,t){for(;!e.eol();)if(e.next()==n){t.tokenize=c;break}return"string"}).isInAttribute=!0,i),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word");t.tokenize=a,t.state=p,t.tagName=t.tagStart=null;var n,i=t.tokenize(e,t);return i?i+" tag error":"tag error"}function h(i,n){return function(e,t){for(;!e.eol();){if(e.match(n)){t.tokenize=a;break}e.next()}return i}}function d(e){e.context&&(e.context=e.context.prev)}function u(e,t){for(var i;;){if(!e.context)return;if(i=e.context.tagName,!l.contextGrabbers.hasOwnProperty(i)||!l.contextGrabbers[i].hasOwnProperty(t))return;d(e)}}function p(e,t,i){return"openTag"==e?(i.tagStart=t.column(),f):"closeTag"==e?m:p}function f(e,t,i){return"word"==e?(i.tagName=t.current(),r="tag",b):l.allowMissingTagName&&"endTag"==e?(r="tag bracket",b(e,0,i)):(r="error",f)}function m(e,t,i){return"word"!=e?l.allowMissingTagName&&"endTag"==e?(r="tag bracket",g(e,0,i)):(r="error",v):(e=t.current(),i.context&&i.context.tagName!=e&&l.implicitlyClosed.hasOwnProperty(i.context.tagName)&&d(i),i.context&&i.context.tagName==e||!1===l.matchClosing?(r="tag",g):(r="tag error",v))}function g(e,t,i){return"endTag"!=e?(r="error",g):(d(i),p)}function v(e,t,i){return r="error",g(e,0,i)}function b(e,t,i){var n,o;return"word"==e?(r="attribute",y):"endTag"!=e&&"selfcloseTag"!=e?(r="error",b):(n=i.tagName,o=i.tagStart,i.tagName=i.tagStart=null,"selfcloseTag"==e||l.autoSelfClosers.hasOwnProperty(n)?u(i,n):(u(i,n),i.context=new function(e,t,i){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=i,(l.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}(i,n,o==i.indented)),p)}function y(e,t,i){return"equals"==e?x:(l.allowMissing||(r="error"),b(e,0,i))}function x(e,t,i){return"string"==e?w:"word"==e&&l.allowUnquoted?(r="string",b):(r="error",b(e,0,i))}function w(e,t,i){return"string"==e?w:b(e,0,i)}return a.isInText=!0,{startState:function(e){var t={tokenize:a,state:p,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;o=null;var i=t.tokenize(e,t);return i=(i||o)&&"comment"!=i&&(r=null,t.state=t.state(o||i,e,t),r)?"error"==r?i+" error":r:i},indent:function(e,t,i){var n=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+s;if(n&&n.noIndent)return k.Pass;if(e.tokenize!=c&&e.tokenize!=a)return i?i.match(/^(\s*)/)[0].length:0;if(e.tagName)return!1!==l.multilineTagIndentPastTag?e.tagStart+e.tagName.length+2:e.tagStart+s*(l.multilineTagIndentFactor||1);if(l.alignCDATA&&/<!\[CDATA\[/.test(t))return 0;var o=t&&/^<(\/)?([\w_:\.-]*)/.exec(t);if(o&&o[1])for(;n;){if(n.tagName==o[2]){n=n.prev;break}if(!l.implicitlyClosed.hasOwnProperty(n.tagName))break;n=n.prev}else if(o)for(;n;){var r=l.contextGrabbers[n.tagName];if(!r||!r.hasOwnProperty(o[2]))break;n=n.prev}for(;n&&n.prev&&!n.startOfLine;)n=n.prev;return n?n.indent+s:e.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:l.htmlMode?"html":"xml",helperType:l.htmlMode?"html":"xml",skipAttribute:function(e){e.state==x&&(e.state=b)}}}),k.defineMIME("text/xml","xml"),k.defineMIME("application/xml","xml"),k.mimeModes.hasOwnProperty("text/html")||k.defineMIME("text/html",{name:"xml",htmlMode:!0})},{"../../lib/codemirror":11}],16:[function(e,t,i){i.read=function(e,t,i,n,o){var r,s,l=8*o-n-1,a=(1<<l)-1,c=a>>1,h=-7,d=i?o-1:0,u=i?-1:1,o=e[t+d];for(d+=u,r=o&(1<<-h)-1,o>>=-h,h+=l;0<h;r=256*r+e[t+d],d+=u,h-=8);for(s=r&(1<<-h)-1,r>>=-h,h+=n;0<h;s=256*s+e[t+d],d+=u,h-=8);if(0===r)r=1-c;else{if(r===a)return s?NaN:1/0*(o?-1:1);s+=Math.pow(2,n),r-=c}return(o?-1:1)*s*Math.pow(2,r-n)},i.write=function(e,t,i,n,o,r){var s,l,a=8*r-o-1,c=(1<<a)-1,h=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,u=n?0:r-1,p=n?1:-1,r=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(t+=1<=s+h?d/n:d*Math.pow(2,1-h))*n&&(s++,n/=2),c<=s+h?(l=0,s=c):1<=s+h?(l=(t*n-1)*Math.pow(2,o),s+=h):(l=t*Math.pow(2,h-1)*Math.pow(2,o),s=0));8<=o;e[i+u]=255&l,u+=p,l/=256,o-=8);for(s=s<<o|l,a+=o;0<a;e[i+u]=255&s,u+=p,s/=256,a-=8);e[i+u-p]|=128*r}},{}],17:[function(e,y,x){!function(e){function a(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||g.defaults,this.rules=v.normal,this.options.pedantic?this.rules=v.pedantic:this.options.gfm&&(this.options.tables?this.rules=v.tables:this.rules=v.gfm)}function c(e,t){if(this.options=t||g.defaults,this.links=e,this.rules=s.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=s.pedantic:this.options.gfm&&(this.options.breaks?this.rules=s.breaks:this.rules=s.gfm)}function i(e){this.options=e||g.defaults}function n(){}function h(e){this.tokens=[],this.token=null,this.options=e||g.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function d(e,t){if(t){if(d.escapeTest.test(e))return e.replace(d.escapeReplace,function(e){return d.replacements[e]})}else if(d.escapeTestNoEncode.test(e))return e.replace(d.escapeReplaceNoEncode,function(e){return d.replacements[e]});return e}function u(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function t(i,e){return i=i.source||i,e=e||"",{replace:function(e,t){return t=(t=t.source||t).replace(/(^|[^\[])\^/g,"$1"),i=i.replace(e,t),this},getRegex:function(){return new RegExp(i,e)}}}function o(e,t){return l[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?l[" "+e]=e+"/":l[" "+e]=m(e,"/",!0)),e=l[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}function r(){}function p(e){for(var t,i,n=1;n<arguments.length;n++)for(i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}function f(e,t){var i=e.replace(/\|/g,function(e,t,i){for(var n=!1,o=t;0<=--o&&"\\"===i[o];)n=!n;return n?"|":" |"}).split(/ \|/),n=0;if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i}function m(e,t,i){if(0===e.length)return"";for(var n=0;n<e.length;){var o=e.charAt(e.length-n-1);if((o!==t||i)&&(o===t||!i))break;n++}return e.substr(0,e.length-n)}function g(e,i,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(n||"function"==typeof i){n||(n=i,i=null);var o,r=(i=p({},g.defaults,i||{})).highlight,t=0;try{o=a.lex(e,i)}catch(e){return n(e)}var s=o.length,l=function(e){if(e)return i.highlight=r,n(e);var t;try{t=h.parse(o,i)}catch(t){e=t}return i.highlight=r,e?n(e):n(null,t)};if(!r||r.length<3)return l();if(delete i.highlight,!s)return l();for(;t<o.length;t++)!function(i){"code"!==i.type?--s||l():r(i.text,i.lang,function(e,t){return e?l(e):null==t||t===i.text?--s||l():(i.text=t,i.escaped=!0,void(--s||l()))})}(o[t])}else try{return i=i&&p({},g.defaults,i),h.parse(a.lex(e,i),i)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(i||g.defaults).silent)return"<p>An error occurred:</p><pre>"+d(e.message+"",!0)+"</pre>";throw e}}var v,s,l,b;e=this||("undefined"!=typeof window?window:e),(v={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:r,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:r,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:r,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/}).def=t(v.def).replace("label",v._label).replace("title",v._title).getRegex(),v.bullet=/(?:[*+-]|\d+\.)/,v.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,v.item=t(v.item,"gm").replace(/bull/g,v.bullet).getRegex(),v.list=t(v.list).replace(/bull/g,v.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+v.def.source+")").getRegex(),v._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",v._comment=/<!--(?!-?>)[\s\S]*?-->/,v.html=t(v.html,"i").replace("comment",v._comment).replace("tag",v._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),v.paragraph=t(v.paragraph).replace("hr",v.hr).replace("heading",v.heading).replace("lheading",v.lheading).replace("tag",v._tag).getRegex(),v.blockquote=t(v.blockquote).replace("paragraph",v.paragraph).getRegex(),v.normal=p({},v),v.gfm=p({},v.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),v.gfm.paragraph=t(v.paragraph).replace("(?!","(?!"+v.gfm.fences.source.replace("\\1","\\2")+"|"+v.list.source.replace("\\1","\\3")+"|").getRegex(),v.tables=p({},v.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),v.pedantic=p({},v.normal,{html:t("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",v._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/}),a.rules=v,a.lex=function(e,t){return new a(t).lex(e)},a.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},a.prototype.token=function(e,t){var i,n,o,r,s,l,a,c,h,d,u,p;for(e=e.replace(/^ +$/gm,"");e;)if((n=this.rules.newline.exec(e))&&(e=e.substring(n[0].length),1<n[0].length)&&this.tokens.push({type:"space"}),n=this.rules.code.exec(e))e=e.substring(n[0].length),n=n[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?n:m(n,"\n")});else if(n=this.rules.fences.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"code",lang:n[2],text:n[3]||""});else if(n=this.rules.heading.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"heading",depth:n[1].length,text:n[2]});else if(t&&(n=this.rules.nptable.exec(e))&&(r={type:"table",header:f(n[1].replace(/^ *| *\| *$/g,"")),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3]?n[3].replace(/\n$/,"").split("\n"):[]}).header.length===r.align.length){for(e=e.substring(n[0].length),c=0;c<r.align.length;c++)/^ *-+: *$/.test(r.align[c])?r.align[c]="right":/^ *:-+: *$/.test(r.align[c])?r.align[c]="center":/^ *:-+ *$/.test(r.align[c])?r.align[c]="left":r.align[c]=null;for(c=0;c<r.cells.length;c++)r.cells[c]=f(r.cells[c],r.header.length);this.tokens.push(r)}else if(n=this.rules.hr.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"hr"});else if(n=this.rules.blockquote.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"blockquote_start"}),n=n[0].replace(/^ *> ?/gm,""),this.token(n,t),this.tokens.push({type:"blockquote_end"});else if(n=this.rules.list.exec(e)){for(e=e.substring(n[0].length),s={type:"list_start",ordered:d=1<(o=n[2]).length,start:d?+o:"",loose:!1},this.tokens.push(s),i=!(l=[]),h=(n=n[0].match(this.rules.item)).length,c=0;c<h;c++)a=(r=n[c]).length,~(r=r.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(a-=r.length,r=this.options.pedantic?r.replace(/^ {1,4}/gm,""):r.replace(new RegExp("^ {1,"+a+"}","gm"),"")),!this.options.smartLists||c===h-1||o===(a=v.bullet.exec(n[c+1])[0])||1<o.length&&1<a.length||(e=n.slice(c+1).join("\n")+e,c=h-1),a=i||/\n\n(?!\s*$)/.test(r),c!==h-1&&(i="\n"===r.charAt(r.length-1),a=a||i),a&&(s.loose=!0),p=void 0,(u=/^\[[ xX]\] /.test(r))&&(p=" "!==r[1],r=r.replace(/^\[[ xX]\] +/,"")),l.push(u={type:"list_item_start",task:u,checked:p,loose:a}),this.tokens.push(u),this.token(r,!1),this.tokens.push({type:"list_item_end"});if(s.loose)for(h=l.length,c=0;c<h;c++)l[c].loose=!0;this.tokens.push({type:"list_end"})}else if(n=this.rules.html.exec(e))e=e.substring(n[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===n[1]||"script"===n[1]||"style"===n[1]),text:n[0]});else if(t&&(n=this.rules.def.exec(e)))e=e.substring(n[0].length),n[3]&&(n[3]=n[3].substring(1,n[3].length-1)),d=n[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[d]||(this.tokens.links[d]={href:n[2],title:n[3]});else if(t&&(n=this.rules.table.exec(e))&&(r={type:"table",header:f(n[1].replace(/^ *| *\| *$/g,"")),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3]?n[3].replace(/(?: *\| *)?\n$/,"").split("\n"):[]}).header.length===r.align.length){for(e=e.substring(n[0].length),c=0;c<r.align.length;c++)/^ *-+: *$/.test(r.align[c])?r.align[c]="right":/^ *:-+: *$/.test(r.align[c])?r.align[c]="center":/^ *:-+ *$/.test(r.align[c])?r.align[c]="left":r.align[c]=null;for(c=0;c<r.cells.length;c++)r.cells[c]=f(r.cells[c].replace(/^ *\| *| *\| *$/g,""),r.header.length);this.tokens.push(r)}else if(n=this.rules.lheading.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"heading",depth:"="===n[2]?1:2,text:n[1]});else if(t&&(n=this.rules.paragraph.exec(e)))e=e.substring(n[0].length),this.tokens.push({type:"paragraph",text:"\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1]});else if(n=this.rules.text.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"text",text:n[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens},(s={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:r,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s])__(?!_)|^\*\*([^\s])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*"<\[])\*(?!\*)|^_([^\s][\s\S]*?[^\s_])_(?!_)|^_([^\s_][\s\S]*?[^\s])_(?!_)|^\*([^\s"<\[][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:r,text:/^(`+|[^`])[\s\S]*?(?=[\\<!\[`*]|\b_| {2,}\n|$)/,_escapes:/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,_scheme:/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,_email:/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/}).autolink=t(s.autolink).replace("scheme",s._scheme).replace("email",s._email).getRegex(),s._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,s.tag=t(s.tag).replace("comment",v._comment).replace("attribute",s._attribute).getRegex(),s._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|[^\[\]\\])*?/,s._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|(?:\\[()]?|\([^\s\x00-\x1f\\]*\)|[^\s\x00-\x1f()\\])*?)/,s._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,s.link=t(s.link).replace("label",s._label).replace("href",s._href).replace("title",s._title).getRegex(),s.reflink=t(s.reflink).replace("label",s._label).getRegex(),s.normal=p({},s),s.pedantic=p({},s.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:t(/^!?\[(label)\]\((.*?)\)/).replace("label",s._label).getRegex(),reflink:t(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",s._label).getRegex()}),s.gfm=p({},s.normal,{escape:t(s.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:t(s.text).replace("]|","~]|").replace("|$","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|$").getRegex()}),s.gfm.url=t(s.gfm.url).replace("email",s.gfm._extended_email).getRegex(),s.breaks=p({},s.gfm,{br:t(s.br).replace("{2,}","*").getRegex(),text:t(s.gfm.text).replace("{2,}","*").getRegex()}),c.rules=s,c.output=function(e,t,i){return new c(t,i).output(e)},c.prototype.output=function(e){for(var t,i,n,o,r,s,l="";e;)if(r=this.rules.escape.exec(e))e=e.substring(r[0].length),l+=r[1];else if(r=this.rules.autolink.exec(e))e=e.substring(r[0].length),n="@"===r[2]?"mailto:"+(i=d(this.mangle(r[1]))):i=d(r[1]),l+=this.renderer.link(n,null,i);else if(this.inLink||!(r=this.rules.url.exec(e))){if(r=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(r[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(r[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.inRawBlock=!1),e=e.substring(r[0].length),l+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):d(r[0]):r[0];else if(r=this.rules.link.exec(e))e=e.substring(r[0].length),this.inLink=!0,n=r[2],o=this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n))?(n=t[1],t[3]):"":r[3]?r[3].slice(1,-1):"",n=n.trim().replace(/^<([\s\S]*)>$/,"$1"),l+=this.outputLink(r,{href:c.escapes(n),title:c.escapes(o)}),this.inLink=!1;else if(r=(r=this.rules.reflink.exec(e))||this.rules.nolink.exec(e)){if(e=e.substring(r[0].length),t=(r[2]||r[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){l+=r[0].charAt(0),e=r[0].substring(1)+e;continue}this.inLink=!0,l+=this.outputLink(r,t),this.inLink=!1}else if(r=this.rules.strong.exec(e))e=e.substring(r[0].length),l+=this.renderer.strong(this.output(r[4]||r[3]||r[2]||r[1]));else if(r=this.rules.em.exec(e))e=e.substring(r[0].length),l+=this.renderer.em(this.output(r[6]||r[5]||r[4]||r[3]||r[2]||r[1]));else if(r=this.rules.code.exec(e))e=e.substring(r[0].length),l+=this.renderer.codespan(d(r[2].trim(),!0));else if(r=this.rules.br.exec(e))e=e.substring(r[0].length),l+=this.renderer.br();else if(r=this.rules.del.exec(e))e=e.substring(r[0].length),l+=this.renderer.del(this.output(r[1]));else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),this.inRawBlock?l+=this.renderer.text(r[0]):l+=this.renderer.text(d(this.smartypants(r[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===r[2])n="mailto:"+(i=d(r[0]));else{for(;s=r[0],r[0]=this.rules._backpedal.exec(r[0])[0],s!==r[0];);i=d(r[0]),n="www."===r[1]?"http://"+i:i}e=e.substring(r[0].length),l+=this.renderer.link(n,null,i)}return l},c.escapes=function(e){return e&&e.replace(c.rules._escapes,"$1")},c.prototype.outputLink=function(e,t){var i=t.href,t=t.title?d(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(i,t,this.output(e[1])):this.renderer.image(i,t,d(e[1]))},c.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):e},c.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,i="",n=e.length,o=0;o<n;o++)t=e.charCodeAt(o),i+="&#"+(t=.5<Math.random()?"x"+t.toString(16):t)+";";return i},i.prototype.code=function(e,t,i){var n;return this.options.highlight&&null!=(n=this.options.highlight(e,t))&&n!==e&&(i=!0,e=n),t?'<pre><code class="'+this.options.langPrefix+d(t,!0)+'">'+(i?e:d(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:d(e,!0))+"</code></pre>"},i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.prototype.html=function(e){return e},i.prototype.heading=function(e,t,i){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+i.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(e,t,i){var n=t?"ol":"ul";return"<"+n+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+n+">\n"},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},i.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n"+(t=t&&"<tbody>"+t+"</tbody>")+"</table>\n"},i.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,t){var i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(e,t,i){if(this.options.sanitize){try{var n=decodeURIComponent(u(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return i}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return i}this.options.baseUrl&&!b.test(e)&&(e=o(this.options.baseUrl,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch(e){return i}n='<a href="'+d(e)+'"';return t&&(n+=' title="'+t+'"'),n+">"+i+"</a>"},i.prototype.image=function(e,t,i){e='<img src="'+(e=this.options.baseUrl&&!b.test(e)?o(this.options.baseUrl,e):e)+'" alt="'+i+'"';return t&&(e+=' title="'+t+'"'),e+(this.options.xhtml?"/>":">")},i.prototype.text=function(e){return e},n.prototype.strong=n.prototype.em=n.prototype.codespan=n.prototype.del=n.prototype.text=function(e){return e},n.prototype.link=n.prototype.image=function(e,t,i){return""+i},n.prototype.br=function(){return""},h.parse=function(e,t){return new h(t).parse(e)},h.prototype.parse=function(e){this.inline=new c(e.links,this.options),this.inlineText=new c(e.links,p({},this.options,{renderer:new n})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},h.prototype.next=function(){return this.token=this.tokens.pop()},h.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},h.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},h.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,u(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":for(var e,t,i="",n="",o="",r=0;r<this.token.header.length;r++)o+=this.renderer.tablecell(this.inline.output(this.token.header[r]),{header:!0,align:this.token.align[r]});for(i+=this.renderer.tablerow(o),r=0;r<this.token.cells.length;r++){for(e=this.token.cells[r],o="",t=0;t<e.length;t++)o+=this.renderer.tablecell(this.inline.output(e[t]),{header:!1,align:this.token.align[t]});n+=this.renderer.tablerow(o)}return this.renderer.table(i,n);case"blockquote_start":for(n="";"blockquote_end"!==this.next().type;)n+=this.tok();return this.renderer.blockquote(n);case"list_start":for(var n="",i=this.token.ordered,s=this.token.start;"list_end"!==this.next().type;)n+=this.tok();return this.renderer.list(n,i,s);case"list_item_start":n="";var l=this.token.loose;for(this.token.task&&(n+=this.renderer.checkbox(this.token.checked));"list_item_end"!==this.next().type;)n+=l||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(n);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},d.escapeTest=/[&<>"']/,d.escapeReplace=/[&<>"']/g,d.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},d.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,d.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g,l={},b=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,r.exec=r,g.options=g.setOptions=function(e){return p(g.defaults,e),g},g.defaults=(g.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new i,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}})(),g.Parser=h,g.parser=h.parse,g.Renderer=i,g.TextRenderer=n,g.Lexer=a,g.lexer=a.lex,g.InlineLexer=c,g.inlineLexer=c.output,g.parse=g,void 0!==y&&"object"==typeof x?y.exports=g:e.marked=g}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(c,t,e){!function(a,f){var e;(e=function(e,o,r,s){s=s||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=s.flags||{},this.memoized={},this.loaded=!1;var t,l,a,c,h,d=this;function i(e,t){e=d._readFile(e,null,s.asyncLoad);s.asyncLoad?e.then(function(e){t(e)}):t(e)}function n(e){o=e,r&&p()}function u(e){r=e,o&&p()}function p(){for(d.rules=d._parseAFF(o),d.compoundRuleCodes={},l=0,c=d.compoundRules.length;l<c;l++){var e=d.compoundRules[l];for(a=0,h=e.length;a<h;a++)d.compoundRuleCodes[e[a]]=[]}for(l in"ONLYINCOMPOUND"in d.flags&&(d.compoundRuleCodes[d.flags.ONLYINCOMPOUND]=[]),d.dictionaryTable=d._parseDIC(r),d.compoundRuleCodes)0===d.compoundRuleCodes[l].length&&delete d.compoundRuleCodes[l];for(l=0,c=d.compoundRules.length;l<c;l++){var t=d.compoundRules[l],i="";for(a=0,h=t.length;a<h;a++){var n=t[a];n in d.compoundRuleCodes?i+="("+d.compoundRuleCodes[n].join("|")+")":i+=n}d.compoundRules[l]=new RegExp(i,"i")}d.loaded=!0,s.asyncLoad&&s.loadedCallback&&s.loadedCallback(d)}return e&&(d.dictionary=e,o&&r?p():"undefined"!=typeof window&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(t=s.dictionaryPath||"typo/dictionaries",o||i(chrome.extension.getURL(t+"/"+e+"/"+e+".aff"),n),r||i(chrome.extension.getURL(t+"/"+e+"/"+e+".dic"),u)):(t=s.dictionaryPath||(void 0!==f?f+"/dictionaries":"./dictionaries"),o||i(t+"/"+e+"/"+e+".aff",n),r||i(t+"/"+e+"/"+e+".dic",u))),this}).prototype={load:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this},_readFile:function(e,t,i){var n,o;if(t=t||"utf8","undefined"!=typeof XMLHttpRequest)return(o=new XMLHttpRequest).open("GET",e,i),i&&(n=new Promise(function(e,t){o.onload=function(){200===o.status?e(o.responseText):t(o.statusText)},o.onerror=function(){t(o.statusText)}})),o.overrideMimeType&&o.overrideMimeType("text/plain; charset="+t),o.send(null),i?n:o.responseText;if(void 0!==c){var r,s,l,i=c("fs");try{if(i.existsSync(e))return r=i.statSync(e),s=i.openSync(e,"r"),l=new a(r.size),i.readSync(s,l,0,l.length,null),l.toString(t,0,l.length);console.log("Path "+e+" does not exist.")}catch(e){return console.log(e),""}}},_parseAFF:function(e){for(var t,i,n,o,r={},s=(e=this._removeAffixComments(e)).split("\n"),l=0,a=s.length;l<a;l++){var c=(t=s[l]).split(/\s+/),h=c[0];if("PFX"==h||"SFX"==h){for(var d=c[1],u=c[2],p=[],f=(o=l+1)+(i=parseInt(c[3],10));o<f;o++){var m=(n=s[o].split(/\s+/))[2],g=n[3].split("/"),v=g[0],g=("0"===v&&(v=""),this.parseRuleCodes(g[1])),b=n[4],y={};y.add=v,0<g.length&&(y.continuationClasses=g),"."!==b&&(y.match="SFX"===h?new RegExp(b+"$"):new RegExp("^"+b)),"0"!=m&&(y.remove="SFX"===h?new RegExp(m+"$"):m),p.push(y)}r[d]={type:h,combineable:"Y"==u,entries:p},l+=i}else if("COMPOUNDRULE"===h){for(f=(o=l+1)+(i=parseInt(c[1],10));o<f;o++)n=(t=s[o]).split(/\s+/),this.compoundRules.push(n[1]);l+=i}else"REP"===h?3===(n=t.split(/\s+/)).length&&this.replacementTable.push([n[1],n[2]]):this.flags[h]=c[1]}return r},_removeAffixComments:function(e){return(e=(e=(e=e.replace(/^\s*#.*$/gm,"")).replace(/^\s\s*/m,"").replace(/\s\s*$/m,"")).replace(/\n{2,}/g,"\n")).replace(/^\s\s*/,"").replace(/\s\s*$/,"")},_parseDIC:function(e){var t=(e=this._removeDicComments(e)).split("\n"),i={};function n(e,t){i.hasOwnProperty(e)||(i[e]=null),0<t.length&&(null===i[e]&&(i[e]=[]),i[e].push(t))}for(var o=1,r=t.length;o<r;o++){var s=t[o].split("/",2),l=s[0];if(1<s.length){var a=this.parseRuleCodes(s[1]);"NEEDAFFIX"in this.flags&&-1!=a.indexOf(this.flags.NEEDAFFIX)||n(l,a);for(var c=0,h=a.length;c<h;c++){var d=a[c],u=this.rules[d];if(u)for(var p=this._applyRule(l,u),f=0,m=p.length;f<m;f++){var g=p[f];if(n(g,[]),u.combineable)for(var v=c+1;v<h;v++){var b=a[v],b=this.rules[b];if(b&&b.combineable&&u.type!=b.type)for(var y=this._applyRule(g,b),x=0,w=y.length;x<w;x++)n(y[x],[])}}d in this.compoundRuleCodes&&this.compoundRuleCodes[d].push(l)}}else n(l.trim(),[])}return i},_removeDicComments:function(e){return e.replace(/^\t.*$/gm,"")},parseRuleCodes:function(e){if(!e)return[];if(!("FLAG"in this.flags))return e.split("");if("long"!==this.flags.FLAG)return"num"===this.flags.FLAG?e.split(","):void 0;for(var t=[],i=0,n=e.length;i<n;i+=2)t.push(e.substr(i,2));return t},_applyRule:function(e,t){for(var i=t.entries,n=[],o=0,r=i.length;o<r;o++){var s=i[o];if(!s.match||e.match(s.match)){var l=e;if(s.remove&&(l=l.replace(s.remove,"")),"SFX"===t.type?l+=s.add:l=s.add+l,n.push(l),"continuationClasses"in s)for(var a=0,c=s.continuationClasses.length;a<c;a++){var h=this.rules[s.continuationClasses[a]];h&&(n=n.concat(this._applyRule(l,h)))}}}return n},check:function(e){if(!this.loaded)throw"Dictionary not loaded.";e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(e))return!0;if(e.toUpperCase()===e){var t=e[0]+e.substring(1).toLowerCase();if(this.hasFlag(t,"KEEPCASE"))return!1;if(this.checkExact(t))return!0}t=e.toLowerCase();if(t!==e){if(this.hasFlag(t,"KEEPCASE"))return!1;if(this.checkExact(t))return!0}return!1},checkExact:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t,i,n=this.dictionaryTable[e];if(void 0===n){if("COMPOUNDMIN"in this.flags&&e.length>=this.flags.COMPOUNDMIN)for(t=0,i=this.compoundRules.length;t<i;t++)if(e.match(this.compoundRules[t]))return!0}else{if(null===n)return!0;if("object"==typeof n)for(t=0,i=n.length;t<i;t++)if(!this.hasFlag(e,"ONLYINCOMPOUND",n[t]))return!0}return!1},hasFlag:function(e,t,i){if(this.loaded)return!!(t in this.flags&&(i=void 0===i?Array.prototype.concat.apply([],this.dictionaryTable[e]):i)&&-1!==i.indexOf(this.flags[t]));throw"Dictionary not loaded."},alphabet:"",suggest:function(e,h){if(!this.loaded)throw"Dictionary not loaded.";if(h=h||5,this.memoized.hasOwnProperty(e)){var t=this.memoized[e].limit;if(h<=t||this.memoized[e].suggestions.length<t)return this.memoized[e].suggestions.slice(0,h)}if(this.check(e))return[];for(var i=0,n=this.replacementTable.length;i<n;i++){var o=this.replacementTable[i];if(-1!==e.indexOf(o[0])){o=e.replace(o[0],o[1]);if(this.check(o))return[o]}}var d=this;function u(e){for(var t,i,n=[],o=0,r=e.length;o<r;o++)for(var s=e[o],l=0,a=s.length+1;l<a;l++){var c=[s.substring(0,l),s.substring(l)];if(c[1]&&n.push(c[0]+c[1].substring(1)),1<c[1].length&&c[1][1]!==c[1][0]&&n.push(c[0]+c[1][1]+c[1][0]+c[1].substring(2)),c[1])for(t=0,i=d.alphabet.length;t<i;t++)d.alphabet[t]!=c[1].substring(0,1)&&n.push(c[0]+d.alphabet[t]+c[1].substring(1));if(c[1])for(t=0,i=d.alphabet.length;t<i;t++)n.push(c[0]+d.alphabet[t]+c[1])}return n}return d.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[e]={suggestions:function(e){for(var t=u([e]),i=u(t),n=function(e){for(var t=[],i=0,n=e.length;i<n;i++)d.check(e[i])&&t.push(e[i]);return t}(t.concat(i)),o={},r=0,s=n.length;r<s;r++)n[r]in o?o[n[r]]+=1:o[n[r]]=1;var l=[];for(r in o)o.hasOwnProperty(r)&&l.push([r,o[r]]);l.sort(function(e,t){return e[1]<t[1]?-1:1}).reverse();var a=[],c="lowercase";for(e.toUpperCase()===e?c="uppercase":e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()===e&&(c="capitalized"),r=0,s=Math.min(h,l.length);r<s;r++)"uppercase"===c?l[r][0]=l[r][0].toUpperCase():"capitalized"===c&&(l[r][0]=l[r][0].substr(0,1).toUpperCase()+l[r][0].substr(1)),d.hasFlag(l[r][0],"NOSUGGEST")||a.push(l[r][0]);return a}(e),limit:h},this.memoized[e].suggestions}},void 0!==t&&(t.exports=e)}.call(this,c("buffer").Buffer,"/node_modules/typo-js")},{buffer:3,fs:2}],19:[function(e,t,i){e=e("codemirror");e.commands.tabAndIndentMarkdownList=function(e){var t=e.listSelections()[0].head;!1!==e.getStateAfter(t.line).list?e.execCommand("indentMore"):e.options.indentWithTabs?e.execCommand("insertTab"):(t=Array(e.options.tabSize+1).join(" "),e.replaceSelection(t))},e.commands.shiftTabAndUnindentMarkdownList=function(e){var t=e.listSelections()[0].head;!1!==e.getStateAfter(t.line).list?e.execCommand("indentLess"):e.options.indentWithTabs?e.execCommand("insertTab"):(t=Array(e.options.tabSize+1).join(" "),e.replaceSelection(t))}},{codemirror:11}],20:[function(e,j,P){function c(){var e=!1,t=navigator.userAgent||navigator.vendor||window.opera;return e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.substr(0,4))?!0:e}var h=e("codemirror"),I=(e("codemirror/addon/edit/continuelist.js"),e("./codemirror/tablist"),e("codemirror/addon/display/fullscreen.js"),e("codemirror/mode/markdown/markdown.js"),e("codemirror/addon/mode/overlay.js"),e("codemirror/addon/display/placeholder.js"),e("codemirror/addon/selection/mark-selection.js"),e("codemirror/addon/search/searchcursor.js"),e("codemirror/mode/gfm/gfm.js"),e("codemirror/mode/xml/xml.js"),e("codemirror-spell-checker")),s=e("marked"),r=/Mac/.test(navigator.platform),B=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),d={toggleBold:t,toggleItalic:i,drawLink:w,toggleHeadingSmaller:a,toggleHeadingBigger:p,drawImage:k,toggleBlockquote:l,toggleOrderedList:y,toggleUnorderedList:b,toggleCodeBlock:o,togglePreview:A,toggleStrikethrough:n,toggleHeading1:f,toggleHeading2:m,toggleHeading3:v,cleanBlock:x,drawTable:C,drawHorizontalRule:S,undo:T,redo:_,toggleSideBySide:L,toggleFullScreen:u},R={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"};function $(e){return r?e.replace("Ctrl","Cmd"):e.replace("Cmd","Ctrl")}function H(e,t,i){var n,o="uploadImage"===(e=e||{}).name?document.createElement("a"):document.createElement("button"),t=(o.className=e.name,t=null==t||t,e.title&&t&&(o.title=(t=i,i=e.title,(n=e.action)&&t[n=function(e){for(var t in d)if(d[t]===e)return t;return null}(n)]&&(i+=" ("+$(t[n])+")"),i),r)&&(o.title=o.title.replace("Ctrl",""),o.title=o.title.replace("Alt","")),e.noDisable&&o.classList.add("no-disable"),e.noMobile&&o.classList.add("no-mobile"),o.tabIndex=-1,document.createElement("i"));return t.className=e.className,o.appendChild(t),o}function g(e,t){t=t||e.getCursor("start");var i=e.getTokenAt(t);if(!i.type)return{};for(var n,o,r=i.type.split(" "),s={},l=0;l<r.length;l++)"strong"===(n=r[l])?s.bold=!0:"variable-2"===n?(o=e.getLine(t.line),/^\s*\d+\.\s/.test(o)?s["ordered-list"]=!0:s["unordered-list"]=!0):"atom"===n?s.quote=!0:"em"===n?s.italic=!0:"quote"===n?s.quote=!0:"strikethrough"===n?s.strikethrough=!0:"comment"===n?s.code=!0:"link"===n?s.link=!0:"tag"===n?s.image=!0:n.match(/^header(-[1-6])?$/)&&(s[n.replace("header","heading")]=!0);return s}var W="";function u(e){var t=e.codemirror,i=(t.setOption("fullScreen",!t.getOption("fullScreen")),t.getOption("fullScreen")?(W=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=W,t.getWrapperElement()),i=(/fullscreen/.test(i.previousSibling.className)?i.previousSibling.className=i.previousSibling.className.replace(/\s*fullscreen\b/,""):i.previousSibling.className+=" fullscreen",e.toolbarElements&&e.toolbarElements.fullscreen&&(i=e.toolbarElements.fullscreen,/active/.test(i.className)?i.className=i.className.replace(/\s*active\s*/g,""):i.className+=" active"),t.getWrapperElement().nextSibling);/editor-preview-active-side/.test(i.className)&&L(e),e.options.onToggleFullScreen&&e.options.onToggleFullScreen(t.getOption("fullScreen")||!1)}function t(e){D(e,"bold",e.options.blockStyles.bold)}function i(e){D(e,"italic",e.options.blockStyles.italic)}function n(e){D(e,"strikethrough","~~")}function o(e){var t=e.options.blockStyles.code;function r(e){if("object"!=typeof e)throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof e+": "+e;return e.styles&&e.styles[2]&&-1!==e.styles[2].indexOf("formatting-code-block")}function s(e){return e.state.base.base||e.state.base}function i(e,t,i,n,o){i=i||e.getLineHandle(t),n=n||e.getTokenAt({line:t,ch:1}),o=o||!!i.text&&e.getTokenAt({line:t,ch:i.text.length-1});e=n.type?n.type.split(" "):[];return o&&s(o).indentedCode?"indented":-1!==e.indexOf("comment")&&(s(n).fencedChars||s(o).fencedChars||r(i)?"fenced":"single")}var n,o,l,a=e.codemirror,e=a.getCursor("start"),c=a.getCursor("end"),h=a.getTokenAt({line:e.line,ch:e.ch||1}),d=a.getLineHandle(e.line),h=i(a,e.line,d,h);if("single"===h){var u=d.text.slice(0,e.ch).replace("`",""),p=d.text.slice(e.ch).replace("`","");a.replaceRange(u+p,{line:e.line,ch:0},{line:e.line,ch:99999999999999}),e.ch--,e!==c&&c.ch--,a.setSelection(e,c),a.focus()}else if("fenced"===h){if(e.line!==c.line||e.ch!==c.ch){for(n=e.line;0<=n&&!r(d=a.getLineHandle(n));n--);var f,m,g,u=s(a.getTokenAt({line:n,ch:1})).fencedChars,v=r(a.getLineHandle(e.line))?(f="",e.line):r(a.getLineHandle(e.line-1))?(f="",e.line-1):(f=u+"\n",e.line);r(a.getLineHandle(c.line))?(m="",g=c.line,0===c.ch&&(g+=1)):(m=0!==c.ch&&r(a.getLineHandle(c.line+1))?"":u+"\n",g=c.line+1),0===c.ch&&--g,a.operation(function(){a.replaceRange(m,{line:g,ch:0},{line:g+(m?0:1),ch:0}),a.replaceRange(f,{line:v,ch:0},{line:v+(f?0:1),ch:0})}),a.setSelection({line:v+(f?1:0),ch:0},{line:g+(f?1:-1),ch:0})}else{var p=e.line;if(r(a.getLineHandle(e.line))&&(p="fenced"===i(a,e.line+1)?(n=e.line,e.line+1):(o=e.line,e.line-1)),void 0===n)for(n=p;0<=n&&!r(d=a.getLineHandle(n));n--);if(void 0===o)for(l=a.lineCount(),o=p;o<l&&!r(d=a.getLineHandle(o));o++);a.operation(function(){a.replaceRange("",{line:n,ch:0},{line:n+1,ch:0}),a.replaceRange("",{line:o-1,ch:0},{line:o,ch:0})})}a.focus()}else if("indented"===h){if(e.line!==c.line||e.ch!==c.ch)n=e.line,o=c.line,0===c.ch&&o--;else{for(n=e.line;0<=n;n--)if(!(d=a.getLineHandle(n)).text.match(/^\s*$/)&&"indented"!==i(a,n,d)){n+=1;break}for(l=a.lineCount(),o=e.line;o<l;o++)if(!(d=a.getLineHandle(o)).text.match(/^\s*$/)&&"indented"!==i(a,o,d)){--o;break}}u=a.getLineHandle(o+1),p=u&&a.getTokenAt({line:o+1,ch:u.text.length-1});p&&s(p).indentedCode&&a.replaceRange("\n",{line:o+1,ch:0});for(var b=n;b<=o;b++)a.indentLine(b,"subtract");a.focus()}else{h=e.line===c.line&&e.ch===c.ch&&0===e.ch,u=e.line!==c.line;h||u?(p=e.line+1,h=c.line+1,u="\n"+t,(e=e.line!==c.line)&&h++,e&&0===c.ch&&(u=t+"\n",h--),E(e=a,!1,[t+"\n",u]),e.setSelection({line:p,ch:0},{line:h,ch:0})):E(a,!1,["`","`"])}}function l(e){O(e.codemirror,"quote")}function a(e){M(e.codemirror,"smaller")}function p(e){M(e.codemirror,"bigger")}function f(e){M(e.codemirror,void 0,1)}function m(e){M(e.codemirror,void 0,2)}function v(e){M(e.codemirror,void 0,3)}function b(e){O(e.codemirror,"unordered-list")}function y(e){O(e.codemirror,"ordered-list")}function x(e){var t=e.codemirror;if(!/editor-preview-active/.test(t.getWrapperElement().lastChild.className))for(var i,e=t.getCursor("start"),n=t.getCursor("end"),o=e.line;o<=n.line;o++)i=(i=t.getLine(o)).replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),t.replaceRange(i,{line:o,ch:0},{line:o,ch:99999999999999})}function w(e){var t=e.codemirror,i=g(t),e=e.options,n="https://";if(e.promptURLs&&!(n=prompt(e.promptTexts.link)))return!1;E(t,i.link,e.insertTexts.link,n)}function k(e){var t=e.codemirror,i=g(t),e=e.options,n="https://";if(e.promptURLs&&!(n=prompt(e.promptTexts.image)))return!1;E(t,i.image,e.insertTexts.image,n)}function C(e){var t=e.codemirror,i=g(t),e=e.options;E(t,i.table,e.insertTexts.table)}function S(e){var t=e.codemirror,i=g(t),e=e.options;E(t,i.image,e.insertTexts.horizontalRule)}function T(e){e=e.codemirror;e.undo(),e.focus()}function _(e){e=e.codemirror;e.redo(),e.focus()}function L(e){var t=e.codemirror,i=t.getWrapperElement(),n=i.nextSibling,o=e.toolbarElements&&e.toolbarElements["side-by-side"],r=!1,o=(/editor-preview-active-side/.test(n.className)?(n.className=n.className.replace(/\s*editor-preview-active-side\s*/g,""),o&&(o.className=o.className.replace(/\s*active\s*/g,"")),i.className=i.className.replace(/\s*CodeMirror-sided\s*/g," ")):(setTimeout(function(){t.getOption("fullScreen")||u(e),n.className+=" editor-preview-active-side"},1),o&&(o.className+=" active"),i.className+=" CodeMirror-sided",r=!0),i.lastChild);/editor-preview-active/.test(o.className)&&(o.className=o.className.replace(/\s*editor-preview-active\s*/g,""),o=e.toolbarElements.preview,i=i.previousSibling,o.className=o.className.replace(/\s*active\s*/g,""),i.className=i.className.replace(/\s*disabled-for-preview*/g,"")),t.sideBySideRenderingFunction||(t.sideBySideRenderingFunction=function(){n.innerHTML=e.options.previewRender(e.value(),n)}),r?(n.innerHTML=e.options.previewRender(e.value(),n),t.on("update",t.sideBySideRenderingFunction)):t.off("update",t.sideBySideRenderingFunction),t.refresh()}function A(e){var t=e.codemirror,i=t.getWrapperElement(),n=i.previousSibling,o=!!e.options.toolbar&&e.toolbarElements.preview,r=i.lastChild,i=(r&&/editor-preview/.test(r.className)||((r=document.createElement("div")).className="editor-preview",i.appendChild(r)),/editor-preview-active/.test(r.className)?(r.className=r.className.replace(/\s*editor-preview-active\s*/g,""),o&&(o.className=o.className.replace(/\s*active\s*/g,""),n.className=n.className.replace(/\s*disabled-for-preview*/g,""))):(setTimeout(function(){r.className+=" editor-preview-active"},1),o&&(o.className+=" active",n.className+=" disabled-for-preview")),r.innerHTML=e.options.previewRender(e.value(),r),t.getWrapperElement().nextSibling);/editor-preview-active-side/.test(i.className)&&L(e)}function E(e,t,i,n){var o,r,s,l;/editor-preview-active/.test(e.getWrapperElement().lastChild.className)||(r=i[0],i=i[1],s={},l={},"function"!=typeof Object.assign&&"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");var i=Object(e);if(null!==t)for(var n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])}return i},writable:!0,configurable:!0}),Object.assign(s,e.getCursor("start")),Object.assign(l,e.getCursor("end")),n&&(i=i.replace("#url#",n)),t?(r=(o=e.getLine(s.line)).slice(0,s.ch),i=o.slice(s.ch),e.replaceRange(r+i,{line:s.line,ch:0})):(o=e.getSelection(),e.replaceSelection(r+o+i),s.ch+=r.length,s!==l&&(l.ch+=r.length)),e.setSelection(s,l),e.focus())}function M(e,t,i){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var n,o,r,s=e.getCursor("start"),l=e.getCursor("end"),a=s.line;a<=l.line;a++)n=a,o=void 0,r=(o=e.getLine(n)).search(/[^#]/),o=void 0!==t?r<=0?"bigger"==t?"###### "+o:"# "+o:6==r&&"smaller"==t?o.substr(7):1==r&&"bigger"==t?o.substr(2):"bigger"==t?o.substr(1):"#"+o:1==i?r<=0?"# "+o:r==i?o.substr(r+1):"# "+o.substr(r+1):2==i?r<=0?"## "+o:r==i?o.substr(r+1):"## "+o.substr(r+1):r<=0?"### "+o:r==i?o.substr(r+1):"### "+o.substr(r+1),e.replaceRange(o,{line:n,ch:0},{line:n,ch:99999999999999});e.focus()}}function O(e,t){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var i=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,n=/^\s*/,o=g(e),r=e.getCursor("start"),s=e.getCursor("end"),l={quote:/^(\s*)>\s+/,"unordered-list":i,"ordered-list":i},a=1,c=r.line;c<=s.line;c++)h=c,m=f=p=u=d=void 0,m=e.getLine(h),o[t]?m=m.replace(l[t],"$1"):(p=i.exec(m),f=a,f={quote:">","unordered-list":"*","ordered-list":"%%i."}[t].replace("%%i",f),m=null!==p?(d=p[2],u=new RegExp({quote:">","unordered-list":"*","ordered-list":"d+."}[t]),d&&u.test(d)&&(f=""),p[1]+f+p[3]+m.replace(n,"").replace(l[t],"$1")):f+" "+m,a+=1),e.replaceRange(m,{line:h,ch:0},{line:h,ch:99999999999999});e.focus()}var h,d,u,p,f,m}function D(e,t,i,n){var o,r,s,l,a;/editor-preview-active/.test(e.codemirror.getWrapperElement().lastChild.className)||(n=void 0===n?i:n,r=g(e=e.codemirror),s=i,n=n,l=e.getCursor("start"),a=e.getCursor("end"),r[t]?(s=(o=e.getLine(l.line)).slice(0,l.ch),n=o.slice(l.ch),"bold"==t?(s=s.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),n=n.replace(/(\*\*|__)/,"")):"italic"==t?(s=s.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),n=n.replace(/(\*|_)/,"")):"strikethrough"==t&&(s=s.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),n=n.replace(/(\*\*|~~)/,"")),e.replaceRange(s+n,{line:l.line,ch:0},{line:l.line,ch:99999999999999}),"bold"==t||"strikethrough"==t?(l.ch-=2,l!==a&&(a.ch-=2)):"italic"==t&&(--l.ch,l!==a)&&--a.ch):(o=e.getSelection(),"bold"==t?o=(o=o.split("**").join("")).split("__").join(""):"italic"==t?o=(o=o.split("*").join("")).split("_").join(""):"strikethrough"==t&&(o=o.split("~~").join("")),e.replaceSelection(s+o+n),l.ch+=i.length,a.ch=l.ch+o.length),e.setSelection(l,a),e.focus())}function F(e){for(var t=1;t<arguments.length;t++)e=function e(t,i){for(var n in i)i.hasOwnProperty(n)&&(i[n]instanceof Array?t[n]=i[n].concat(t[n]instanceof Array?t[n]:[]):null!==i[n]&&"object"==typeof i[n]&&i[n].constructor===Object?t[n]=e(t[n]||{},i[n]):t[n]=i[n]);return t}(e,arguments[t]);return e}function U(e){var t=e.match(/[a-zA-Z0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),i=0;if(null!==t)for(var n=0;n<t.length;n++)19968<=t[n].charCodeAt(0)?i+=t[n].length:i+=1;return i}var N={bold:{name:"bold",action:t,className:"fa fa-bold",title:"Bold",default:!0},italic:{name:"italic",action:i,className:"fa fa-italic",title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:n,className:"fa fa-strikethrough",title:"Strikethrough"},heading:{name:"heading",action:a,className:"fa fa-header fa-heading",title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:a,className:"fa fa-header fa-heading header-smaller",title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:p,className:"fa fa-header fa-heading header-bigger",title:"Bigger Heading"},"heading-1":{name:"heading-1",action:f,className:"fa fa-header fa-heading header-1",title:"Big Heading"},"heading-2":{name:"heading-2",action:m,className:"fa fa-header fa-heading header-2",title:"Medium Heading"},"heading-3":{name:"heading-3",action:v,className:"fa fa-header fa-heading header-3",title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:o,className:"fa fa-code",title:"Code"},quote:{name:"quote",action:l,className:"fa fa-quote-left",title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:b,className:"fa fa-list-ul",title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:y,className:"fa fa-list-ol",title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:x,className:"fa fa-eraser fa-clean-block",title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:w,className:"fa fa-link",title:"Create Link",default:!0},image:{name:"image",action:k,className:"fa fa-image",title:"Insert Image",default:!0},table:{name:"table",action:C,className:"fa fa-table",title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:S,className:"fa fa-minus",title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:A,className:"fa fa-eye",noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:L,className:"fa fa-columns",noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:u,className:"fa fa-arrows-alt",noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://simplemde.com/markdown-guide",className:"fa fa-question-circle",noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:T,className:"fa fa-undo",noDisable:!0,title:"Undo"},redo:{name:"redo",action:_,className:"fa fa-repeat fa-redo",noDisable:!0,title:"Redo"}},q={link:["[","](#url#)"],image:["![](","#url#)"],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"],horizontalRule:["","\n\n-----\n\n"]},V={link:"URL for the link:",image:"URL of the image:"},G={bold:"**",code:"```",italic:"*"};function z(e){(e=e||{}).parent=this;var t,i=!0;if(!1===e.autoDownloadFontAwesome&&(i=!1),!0!==e.autoDownloadFontAwesome)for(var n=document.styleSheets,o=0;o<n.length;o++)n[o].href&&-1<n[o].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")&&(i=!1);if(i&&((t=document.createElement("link")).rel="stylesheet",t.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(t)),e.element)this.element=e.element;else if(null===e.element)return void console.log("EasyMDE: Error. No element was found.");if(void 0===e.toolbar)for(var r in e.toolbar=[],N)N.hasOwnProperty(r)&&(-1!=r.indexOf("separator-")&&e.toolbar.push("|"),!0===N[r].default||e.showIcons&&e.showIcons.constructor===Array&&-1!=e.showIcons.indexOf(r))&&e.toolbar.push(r);e.hasOwnProperty("status")||(e.status=["autosave","lines","words","cursor"]),e.previewRender||(e.previewRender=function(e){return this.parent.markdown(e)}),e.parsingConfig=F({highlightFormatting:!0},e.parsingConfig||{}),e.insertTexts=F({},q,e.insertTexts||{}),e.promptTexts=F({},V,e.promptTexts||{}),e.blockStyles=F({},G,e.blockStyles||{}),e.shortcuts=F({},R,e.shortcuts||{}),e.minHeight=e.minHeight||"300px",null!=e.autosave&&null!=e.autosave.unique_id&&""!=e.autosave.unique_id&&(e.autosave.uniqueId=e.autosave.unique_id),this.options=e,this.render(),!e.initialValue||this.options.autosave&&!0===this.options.autosave.foundSavedValue||this.value(e.initialValue)}function X(){if("object"==typeof localStorage){try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch(e){return}return 1}}z.prototype.markdown=function(e){if(s){var t,i=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{};this.options&&this.options.renderingConfig&&!1===this.options.renderingConfig.singleLineBreaks?i.breaks=!1:i.breaks=!0,this.options&&this.options.renderingConfig&&!0===this.options.renderingConfig.codeSyntaxHighlighting&&(t=this.options.renderingConfig.hljs||window.hljs)&&(i.highlight=function(e){return t.highlightAuto(e).value}),s.setOptions(i);for(var n=s(e);null!==(r=B.exec(n));){var o,r=r[0];-1===r.indexOf("target=")&&(o=r.replace(/>$/,' target="_blank">'),n=n.replace(r,o))}return n}},z.prototype.render=function(e){if(e=e||this.element||document.getElementsByTagName("textarea")[0],!this._rendered||this._rendered!==e){this.element=e;var t,i,n,o,r=this.options,s=this,l={};for(n in r.shortcuts)null!==r.shortcuts[n]&&null!==d[n]&&function(e){l[$(r.shortcuts[e])]=function(){d[e](s)}}(n);l.Enter="newlineAndIndentContinueMarkdownList",l.Tab="tabAndIndentMarkdownList",l["Shift-Tab"]="shiftTabAndUnindentMarkdownList",l.Esc=function(e){e.getOption("fullScreen")&&u(s)},document.addEventListener("keydown",function(e){27==(e=e||window.event).keyCode&&s.codemirror.getOption("fullScreen")&&u(s)},!1),!1!==r.spellChecker?(t="spell-checker",(i=r.parsingConfig).name="gfm",i.gitHubSpice=!1,I({codeMirrorInstance:h})):((t=r.parsingConfig).name="gfm",t.gitHubSpice=!1),this.codemirror=h.fromTextArea(e,{mode:t,backdrop:i,theme:null!=r.theme?r.theme:"easymde",tabSize:null!=r.tabSize?r.tabSize:2,indentUnit:null!=r.tabSize?r.tabSize:2,indentWithTabs:!1!==r.indentWithTabs,lineNumbers:!1,autofocus:!0===r.autofocus,extraKeys:l,lineWrapping:!1!==r.lineWrapping,allowDropFileTypes:["text/plain"],placeholder:r.placeholder||e.getAttribute("placeholder")||"",styleSelectedText:null!=r.styleSelectedText?r.styleSelectedText:!c(),configureMouse:function(e,t,i){return{addNew:!1}}}),this.codemirror.getScrollerElement().style.minHeight=r.minHeight,!0===r.forceSync&&(o=this.codemirror).on("change",function(){o.save()}),!(this.gui={})!==r.toolbar&&(this.gui.toolbar=this.createToolbar()),!1!==r.status&&(this.gui.statusbar=this.createStatusbar()),null!=r.autosave&&!0===r.autosave.enabled&&this.autosave(),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element;var a=this.codemirror;setTimeout(function(){a.refresh()}.bind(a),0)}},z.prototype.autosave=function(){var e,t,i,n,o,r;X()?null==(e=this).options.autosave.uniqueId||""==this.options.autosave.uniqueId?console.log("EasyMDE: You must set a uniqueId to use the autosave feature"):(!0!==this.options.autosave.binded&&(null!=e.element.form&&null!=e.element.form&&e.element.form.addEventListener("submit",function(){clearTimeout(e.autosaveTimeoutId),e.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+e.options.autosave.uniqueId),setTimeout(function(){e.autosave()},e.options.autosave.delay||1e4)}),this.options.autosave.binded=!0),!0!==this.options.autosave.loaded&&("string"==typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&""!=localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0),localStorage.setItem("smde_"+this.options.autosave.uniqueId,e.value()),null!=(t=document.getElementById("autosaved"))&&""!=t&&(i=(n=new Date).getHours(),n=n.getMinutes(),o="am",12<=(r=i)&&(r=i-12,o="pm"),t.innerHTML="Autosaved: "+(r=0==r?12:r)+":"+(n=n<10?"0"+n:n)+" "+o),this.autosaveTimeoutId=setTimeout(function(){e.autosave()},this.options.autosave.delay||1e4)):console.log("EasyMDE: localStorage not available, cannot autosave")},z.prototype.clearAutosavedValue=function(){X()?null==this.options.autosave||null==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId?console.log("EasyMDE: You must set a uniqueId to clear the autosave value"):localStorage.removeItem("smde_"+this.options.autosave.uniqueId):console.log("EasyMDE: localStorage not available, cannot autosave")},z.prototype.createSideBySide=function(){var i,n,t=this.codemirror,e=t.getWrapperElement(),o=e.nextSibling;return o&&/editor-preview-side/.test(o.className)||((o=document.createElement("div")).className="editor-preview-side",e.parentNode.insertBefore(o,e.nextSibling)),!1!==this.options.syncSideBySidePreviewScroll&&(n=i=!1,t.on("scroll",function(e){var t;i?i=!1:(n=!0,t=e.getScrollInfo().height-e.getScrollInfo().clientHeight,e=parseFloat(e.getScrollInfo().top)/t,t=(o.scrollHeight-o.clientHeight)*e,o.scrollTop=t)}),o.onscroll=function(){var e;n?n=!1:(i=!0,e=o.scrollHeight-o.clientHeight,e=parseFloat(o.scrollTop)/e,e=(t.getScrollInfo().height-t.getScrollInfo().clientHeight)*e,t.scrollTo(0,e))}),o},z.prototype.createToolbar=function(e){if((e=e||this.options.toolbar)&&0!==e.length){for(var t=0;t<e.length;t++)null!=N[e[t]]&&(e[t]=N[e[t]]);var i=document.createElement("div"),n=(i.className="editor-toolbar",this),o={};for(n.toolbar=e,t=0;t<e.length;t++)if(("guide"!=e[t].name||!1!==n.options.toolbarGuideIcon)&&!(n.options.hideIcons&&-1!=n.options.hideIcons.indexOf(e[t].name)||("fullscreen"==e[t].name||"side-by-side"==e[t].name)&&c())){if("|"===e[t]){for(var r=!1,s=t+1;s<e.length;s++)"|"===e[s]||n.options.hideIcons&&-1!=n.options.hideIcons.indexOf(e[s].name)||(r=!0);if(!r)continue}!function(t){var e="|"===t?((e=document.createElement("i")).className="separator",e.innerHTML="|",e):H(t,n.options.toolbarTips,n.options.shortcuts);t.action&&("function"==typeof t.action?e.onclick=function(e){e.preventDefault(),t.action(n)}:"string"==typeof t.action&&(e.onclick=function(e){e.preventDefault(),window.open(t.action,"_blank")})),o[t.name||t]=e,i.appendChild(e)}(e[t])}n.toolbarElements=o;var l=this.codemirror,a=(l.on("cursorActivity",function(){var e,t,i,n=g(l);for(i in o)t=void 0,t=o[e=i],n[e]?t.className+=" active":"fullscreen"!=e&&"side-by-side"!=e&&(t.className=t.className.replace(/\s*active\s*/g,""))}),l.getWrapperElement());return a.parentNode.insertBefore(i,a),i}},z.prototype.createStatusbar=function(e){e=e||this.options.status;var t=this.options,i=this.codemirror;if(e&&0!==e.length){for(var n,o,r,s=[],l=0;l<e.length;l++)o=n=void 0,"object"==typeof e[l]?s.push({className:e[l].className,defaultValue:e[l].defaultValue,onUpdate:e[l].onUpdate}):("words"===(r=e[l])?(o=function(e){e.innerHTML=U(i.getValue())},n=function(e){e.innerHTML=U(i.getValue())}):"lines"===r?(o=function(e){e.innerHTML=i.lineCount()},n=function(e){e.innerHTML=i.lineCount()}):"cursor"===r?(o=function(e){e.innerHTML="0:0"},n=function(e){var t=i.getCursor();e.innerHTML=t.line+":"+t.ch}):"autosave"===r&&(o=function(e){null!=t.autosave&&!0===t.autosave.enabled&&e.setAttribute("id","autosaved")}),s.push({className:r,defaultValue:o,onUpdate:n}));var a=document.createElement("div");for(a.className="editor-statusbar",l=0;l<s.length;l++){var c=s[l],h=document.createElement("span");h.className=c.className,"function"==typeof c.defaultValue&&c.defaultValue(h),"function"==typeof c.onUpdate&&this.codemirror.on("update",function(e,t){return function(){t.onUpdate(e)}}(h,c)),a.appendChild(h)}var d=this.codemirror.getWrapperElement();return d.parentNode.insertBefore(a,d.nextSibling),a}},z.prototype.value=function(e){var t=this.codemirror;return void 0===e?t.getValue():(t.getDoc().setValue(e),this.isPreviewActive()&&((t=t.getWrapperElement().lastChild).innerHTML=this.options.previewRender(e,t)),this)},z.toggleBold=t,z.toggleItalic=i,z.toggleStrikethrough=n,z.toggleBlockquote=l,z.toggleHeadingSmaller=a,z.toggleHeadingBigger=p,z.toggleHeading1=f,z.toggleHeading2=m,z.toggleHeading3=v,z.toggleCodeBlock=o,z.toggleUnorderedList=b,z.toggleOrderedList=y,z.cleanBlock=x,z.drawLink=w,z.drawImage=k,z.drawTable=C,z.drawHorizontalRule=S,z.undo=T,z.redo=_,z.togglePreview=A,z.toggleSideBySide=L,z.toggleFullScreen=u,z.prototype.toggleBold=function(){t(this)},z.prototype.toggleItalic=function(){i(this)},z.prototype.toggleStrikethrough=function(){n(this)},z.prototype.toggleBlockquote=function(){l(this)},z.prototype.toggleHeadingSmaller=function(){a(this)},z.prototype.toggleHeadingBigger=function(){p(this)},z.prototype.toggleHeading1=function(){f(this)},z.prototype.toggleHeading2=function(){m(this)},z.prototype.toggleHeading3=function(){v(this)},z.prototype.toggleCodeBlock=function(){o(this)},z.prototype.toggleUnorderedList=function(){b(this)},z.prototype.toggleOrderedList=function(){y(this)},z.prototype.cleanBlock=function(){x(this)},z.prototype.drawLink=function(){w(this)},z.prototype.drawImage=function(){k(this)},z.prototype.drawTable=function(){C(this)},z.prototype.drawHorizontalRule=function(){S(this)},z.prototype.undo=function(){T(this)},z.prototype.redo=function(){_(this)},z.prototype.togglePreview=function(){A(this)},z.prototype.toggleSideBySide=function(){L(this)},z.prototype.toggleFullScreen=function(){u(this)},z.prototype.isPreviewActive=function(){var e=this.codemirror.getWrapperElement().lastChild;return/editor-preview-active/.test(e.className)},z.prototype.isSideBySideActive=function(){var e=this.codemirror.getWrapperElement().nextSibling;return/editor-preview-active-side/.test(e.className)},z.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},z.prototype.getState=function(){return g(this.codemirror)},z.prototype.toTextArea=function(){var e=this.codemirror,t=e.getWrapperElement();t.parentNode&&(this.gui.toolbar&&t.parentNode.removeChild(this.gui.toolbar),this.gui.statusbar&&t.parentNode.removeChild(this.gui.statusbar),this.gui.sideBySide)&&t.parentNode.removeChild(this.gui.sideBySide),e.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},j.exports=z},{"./codemirror/tablist":19,codemirror:11,"codemirror-spell-checker":4,"codemirror/addon/display/fullscreen.js":5,"codemirror/addon/display/placeholder.js":6,"codemirror/addon/edit/continuelist.js":7,"codemirror/addon/mode/overlay.js":8,"codemirror/addon/search/searchcursor.js":9,"codemirror/addon/selection/mark-selection.js":10,"codemirror/mode/gfm/gfm.js":12,"codemirror/mode/markdown/markdown.js":13,"codemirror/mode/xml/xml.js":15,marked:17}]},{},[20])(20)});