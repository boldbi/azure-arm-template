var listWebhooks="",selectedValue="",alertmessages="",datasourceIds="",schedulesUrl="",isEmbedCode=!1,embedConfig="",origin=!1;function isSameOrigin(){try{parent.embedConfig,origin=!0}catch(e){origin=!1}}function scheduleSubmit(e,t,a,o,s,r,n,i,d,l,c,p){schedulesUrl="Create"==actionType?s.web:s,e.length||$("#export-destination").prop("checked")?("undefined"!=typeof BoldBIDashboard&&"function"==typeof parent.$("#popup-container_wrapper").BoldBIDashboardWaitingPopup?(parent.$("#popup-container_wrapper").BoldBIDashboardWaitingPopup("show"),parent.$("#editpopup-container_wrapper").BoldBIDashboardWaitingPopup("show")):(parent.$("#popup-container_wrapper").ejWaitingPopup("show"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("show")),isEmbedCode&&(e={ScheduleItem:r,UserList:n,GroupList:i,ExternalRecipientList:d,alert:alertChange,DataSourceId:p,FilterData:l,DaJsonString:c},designerToken=parent.designerToken,ajaxPostCall("POST",s,e,null,ScheduleDailog,null,null)),isEmbedCode||$.ajax({type:"POST",url:schedulesUrl,data:{scheduleList:JSON.stringify({ScheduleItem:r,UserList:n,GroupList:i,ExternalRecipientList:d,result:t,alert:alertChange,DataSourceId:p,FilterData:l,DaJsonString:c})},success:function(e){ScheduleDailog(e)}})):$("#selected-users-validation").css("visibility","visible")}function ScheduleDailog(e){var t,a,o,s,r=alertmessages,n=datasourceIds;e.Success?(scheduleDetail=createScheduleMessage(!0),t=$("#schedule-count").html(),0<(t=parseInt(t)+1)?$("#schedule-count").html(t):$("#schedule-count").html("0"),"undefined"!=typeof BoldBIDashboard&&"function"==typeof parent.$("#popup-container_wrapper").BoldBIDashboardWaitingPopup?(parent.$("#popup-container_wrapper").BoldBIDashboardWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").BoldBIDashboardWaitingPopup("hide")):(parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide")),$(".schedule-popup-title").text(),t=$(".schedule-popup-title").attr("title"),closePopupContainer(),n=140<(s=successMessage+(""==n?" ":"")+scheduleDetail+(""==n?".":""==r?".":r)).length?"success-message-large":"success-message-small",r=(parent.ejdashboard||parent.ejs).popups,t='<span class="dialog-header-with-subtitle"><span class="dialog-header-title">'+window.Server.App.Localization.DashboardScheduleDialogHeader+'</span><span class="item-name">'+t+"</span></span>",(a=document.createElement("div")).setAttribute("id","schedule-success-dialog"),parent.document.getElementById("body").appendChild(a),(o=new r.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"450px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:t,showCloseIcon:!0,content:s,buttons:[{click:function(){var e;"function"==typeof parent.refreshScheduleGrid&&(parent.refreshScheduleGrid(),refreshScheduleQueryFilter()),0<parent.$("#on-board-schedule-dashboard").length&&!parent.$("#on-board-share-dashboard").hasClass("journey-done")&&(parent.$("#on-board-schedule-dashboard").addClass("journey-done").removeAttr("id"),e=parseInt(parent.$(".progress-bar-success").attr("data-progress-percentage"))+parseInt(parent.$(".progress-bar-success").attr("data-increment")),parent.$(".progress-bar-success").css("width",e+"%").attr("data-progress-percentage",e),parent.$(".progress-bar-percentage").text(e+"%")),o.hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.OKButton}}]},n)).appendTo(a),parent.$(".e-dlg-container.e-dlg-center-center").wrap('<div class="bi-dashboard"></div>')):null==e.HasPermission||e.HasPermission?null!=e.ScheduleNameAlreadyExist&&e.ScheduleNameAlreadyExist?("undefined"!=typeof BoldBIDashboard&&"function"==typeof parent.$("#popup-container_wrapper").BoldBIDashboardWaitingPopup?(parent.$("#popup-container_wrapper").BoldBIDashboardWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").BoldBIDashboardWaitingPopup("hide")):(parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide")),closePopupContainer(),parent.warningToast(window.Server.App.Localization.IsScheduleExist)):("undefined"!=typeof BoldBIDashboard&&"function"==typeof parent.$("#popup-container_wrapper").BoldBIDashboardWaitingPopup?(parent.$("#popup-container_wrapper").BoldBIDashboardWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").BoldBIDashboardWaitingPopup("hide")):(parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide")),closePopupContainer(),parent.warningToast(e.Message)):("undefined"!=typeof BoldBIDashboard&&"function"==typeof parent.$("#popup-container_wrapper").BoldBIDashboardWaitingPopup?(parent.$("#popup-container_wrapper").BoldBIDashboardWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").BoldBIDashboardWaitingPopup("hide")):(parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide")),$(".schedule-popup-title").text(),closePopupContainer(),s=schedulePermisionWarningMessage,parent.warningToast(schedulePermisionWarningMessage),"function"==typeof parent.refreshScheduleGrid&&parent.refreshScheduleGrid(),0<parent.$("#on-board-schedule-dashboard").length&&!parent.$("#on-board-share-dashboard").hasClass("journey-done")&&(parent.$("#on-board-schedule-dashboard").addClass("journey-done").removeAttr("id"),r=parseInt(parent.$(".progress-bar-success").attr("data-progress-percentage"))+parseInt(parent.$(".progress-bar-success").attr("data-increment")),parent.$(".progress-bar-success").css("width",r+"%").attr("data-progress-percentage",r),parent.$(".progress-bar-percentage").text(r+"%")))}function refreshScheduleQueryFilter(){isNullOrWhitespace(parent.window.location.search)&&isNullOrWhitespace(parent.$("#search-schedules").val())||(parent.window.history.replaceState(null,null,parent.location.href.split("?")[0]),parent.$("#search-schedules").val(""),parent.$("#scheduleGrid").data("ejGrid").refreshContent())}function GetWebhooksDetailsById(e){$("#webhook-info").css("display","block"),$("#webhook-info span").html(window.Server.App.Localization.WebhookInfoMessage.format("<b>"+e.data.Url+"</b>","<b>"+e.data.ContentTypeDescription+"</b>","POST"))}function FTPCredentialsValidation(e){("schedule-submit"==e.target.id&&""==$("#host-name").val()||"host-name"==e.target.id&&""==$("#host-name").val())&&$("#host-name").closest("div").addClass("has-error"),"schedule-submit"==e.target.id?(""==$("#host-name").val()&&($("#host-name").closest("div").addClass("has-error"),$("#host-name").closest("div").find("span").html(window.Server.App.Localization.HostNamevalidator).addClass("ftp-credentials-validation-message")),""==$("#user-name").val()&&($("#user-name").closest("div").addClass("has-error"),$("#user-name").closest("div").find("span").html(window.Server.App.Localization.UserNameValidator).addClass("ftp-credentials-validation-message")),""==$("#password").val()&&($("#password").closest("div").addClass("has-error"),$("#password").closest("div").find("span").html(window.Server.App.Localization.PasswordValidator).addClass("ftp-credentials-validation-message"))):("host-name"==e.target.id&&""==$("#host-name").val()&&($("#host-name").closest("div").addClass("has-error"),$("#invalid-hostname").html(window.Server.App.Localization.HostNamevalidator).addClass("ftp-credentials-validation-message")),"user-name"==e.target.id&&""==$("#user-name").val()&&($("#user-name").closest("div").addClass("has-error"),$("#invalid-username").html(window.Server.App.Localization.UserNameValidator).addClass("ftp-credentials-validation-message")),"password"==e.target.id&&""==$("#password").val()&&($("#password").closest("div").addClass("has-error"),$("#invalid-password").html(window.Server.App.Localization.PasswordValidator).addClass("ftp-credentials-validation-message")))}function ProccessExportType(e,t){$("#show-pdf-checkbox").hide(),$("#show-respose-type").hide(),"image"==e.toLowerCase()&&canExport.Image?($("#show-excel-format").hide(),$("#show-csv-format").hide(),$("#show-image-format").show(),$("#show-pdf-format").hide(),$("#image-export").prop("checked",!0),$("#image-format").val(t.Extension).change(),$("#image-dpi").data("ejNumericTextbox").option("value",t.Resolution),$("#export-options-container .bootstrap-select .dropdown-menu ul li[data-original-index='0']").addClass("selected")):"pdf"==e.toLowerCase()&&canExport.Pdf?($("#show-excel-format").hide(),$("#show-csv-format").hide(),$("#show-image-format").hide(),$("#show-pdf-format").show(),$("#pdf-export").prop("checked",!0),""!=$("#schedule-submit").attr("data-widget-id")&&1==$("#selected_widget option:selected").data("export-pagewise")?($("#show-pdf-checkbox").show(),$("#export-current-view").prop("checked",!t.IsWidgetPagewiseExport)):$("#show-pdf-checkbox").hide(),$("#export-options-container .bootstrap-select .dropdown-menu ul li[data-original-index='1']").addClass("selected"),("A3"==t.Size||"A4"==t.Size||"A5"==t.Size||"Letter"==t.Size?$("#pdf-format").val(t.Size):$("#pdf-format").val("A4")).change(),"Portrait"==t.Orientation?($("#pdf-portrait").addClass("selected-pdf-orientation"),$("#pdf-landscape").removeClass("selected-pdf-orientation")):($("#pdf-portrait").removeClass("selected-pdf-orientation"),$("#pdf-landscape").addClass("selected-pdf-orientation"))):"excel"==e.toLowerCase()&&canExport.Excel?($("#show-excel-format").show(),$("#excel-csv-export").prop("checked",!0),""!=$("#schedule-submit").attr("data-widget-id")?($("#show-respose-type").show(),$("#respose-type").val(t.ResponseType).change()):$("#show-respose-type").hide(),$("#show-csv-format").hide(),$("#show-image-format").hide(),$("#show-pdf-format").hide(),$("#export-options-container .bootstrap-select .dropdown-menu ul li[data-original-index='2']").addClass("selected"),"xlsx"==t.Extension||"xls"==t.Extension?$("#excel-format").val(t.Extension).selectpicker("refresh"):$("#excel-format").val("xlsx").change()):($("#excel-csv-export").prop("checked",!0),$("#excel-format").val(t.Extension).selectpicker("refresh"),$("#export-options-container .bootstrap-select .dropdown-menu ul li[data-original-index='3']").addClass("selected"),$("#show-csv-format").show(),$("#show-excel-format").hide(),$("#show-image-format").hide(),$("#show-pdf-format").hide())}function pdfActiveOrientation(){$("#pdf-orientation").on("click",".pdf-orientation-format",function(){$(this).addClass("selected-pdf-orientation").siblings().removeClass("selected-pdf-orientation")})}function excelFormatsShow(){$("#show-excel-format").show(),$("#show-pdf-checkbox").hide(),$("#show-image-format").hide(),$("#show-pdf-format").hide(),validateImagedpi()}function imageFormatShow(){$("#show-image-format").show(),$("#show-pdf-checkbox").hide(),$("#show-excel-format").hide(),$("#show-pdf-format").hide(),validateImagedpi()}function pdfFormatShow(){$("#show-pdf-checkbox").show(),$("#show-pdf-format").show(),$("#show-excel-format").hide(),$("#show-image-format").hide(),validateImagedpi()}function refreshDropdown(e){$("#webhook-select-validations").css("display","none");var r=!0,t=2==alertChange?webhookevent[1]:webhookevent[0];$.ajax({type:"POST",url:getWebhooksUrl,data:{webhookEventType:t},success:function(e){var t=e;selectedValue=null==$("#webhook-option option:selected").val()?selectedValue:$("#webhook-option option:selected").val(),$("#webhook-option").find("option").remove();for(var a,o,s=0;s<t.data.length;s++)(isNullOrWhitespace(scheduleExportInfo)||scheduleExportInfo.ScheduleExportLocation.WebhookId!=t.data[s].Id)&&selectedValue!=t.data[s].Id||($("#webhook-option").html('<option value="'+t.data[s].Id+'">'+t.data[s].Name+"</option>"),$(".select-webhook-div .filter-option").html(t.data[s].Name),r=!1);$(".select-webhook-div.bootstrap-select ul li").each(function(){$(this).hasClass("selected")&&$(this).addClass("active")}),r?$("#select-webhook-option").is(":selected")||(a=(e=isNullOrWhitespace(scheduleExportInfo)||scheduleExportInfo.ScheduleExportLocation.WebhookName!=$(".select-webhook-div .filter-option").text()?$(".select-webhook-div .filter-option").text():scheduleExportInfo.ScheduleExportLocation.WebhookName).toString().endsWith("("+window.Server.App.Localization.Inactive+")"),o=e.toString().endsWith("("+window.Server.App.Localization.DeletedTag+")"),e.trim()!=window.Server.App.Localization.SelectWebhookContent?$(".select-webhook-div .filter-option").html(e+(a||o?"":" ("+window.Server.App.Localization.Inactive+")")):$(".select-webhook-div .filter-option").html(e),$("#webhook-info").css("display","none")):$.ajax({type:"POST",url:getWebhookDetailsByIdUrl,data:{webhookId:$("#webhook-option option").val()},success:function(e){$("#webhook-info").css("display","block"),$("#webhook-info span").html(window.Server.App.Localization.WebhookInfoMessage.format("<b>"+e.data.Url+"</b>","<b>"+e.data.ContentTypeDescription+"</b>","POST"))}})}}),$(document).on("show.bs.dropdown",".select-webhook-div",function(){LoadWebhookName($("#webhook-option option:selected").val())})}function LoadWebhookName(s){var e=2==alertChange?webhookevent[1]:webhookevent[0];$(".select-webhook-div").find(".open,.bootstrap-select").removeClass("dropdown-alignment"),$(".select-webhook-div .bootstrap-select").append($("<span class='no-padding loader-gif'><div class='loader-blue loader-icon' id='category-dropdown-loader-icon'><svg class='circular'><circle class='path' cx='27' cy='27' r='13' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg></div></span>")),$(".select-webhook-div .bootstrap-select .open").hide(),isEmbedCode&&(designerToken=parent.designerToken,ajaxPostCall("POST",getWebhookApi,{webhookEventType:e},null,getWebhookResult,null,null)),isEmbedCode||(""==listWebhooks?$.ajax({type:"POST",url:getWebhooksUrl,data:{webhookEventType:e},success:function(e){getWebhookResult(e)}}):$.ajax({type:"POST",url:getWebhooksUrl,data:{webhookEventType:e},success:function(e){var t=e;listWebhooks="<option value='' data-hidden='true'></option>";for(var a=0;a<t.data.length;a++)listWebhooks+='<option value="'+t.data[a].Id+'">'+t.data[a].Name+"</option>";$("#webhook-option").html(""),$("#webhook-option").html(listWebhooks),$("#webhook-option").selectpicker("refresh");for(var o=0;o<t.data.length;o++)null!=s&&s==t.data[o].Id&&($("#webhook-option option[value='"+t.data[o].Id+"']").attr("selected","selected"),$(".select-webhook-div .filter-option").html(t.data[o].Name));$(".select-webhook-div.bootstrap-select ul li").each(function(){$(this).hasClass("selected")&&$(this).addClass("active")}),$("#webhook-option").selectpicker(),(0<t.data.length?($(".select-webhook-div .bootstrap-select .open").show(),$("#webhook-select-validations")):($("#webhook-select-validations").html(""),$("#webhook-select-validations").css("display","block").html(window.Server.App.Localization.NoWebhook),$(".select-webhook-div").find(".bootstrap-select .dropdown-menu.open").removeClass("show"),$("#webhook-info"))).css("display","none"),$(".select-webhook-div span.loader-gif").remove()}})),$(".select-webhook-div").find(".open,.bootstrap-select").addClass("dropdown-alignment")}function getWebhookResult(e){var t=e;listWebhooks="<option value='' data-hidden='true'></option>";for(var a=0;a<t.data.length;a++)listWebhooks+='<option value="'+t.data[a].Id+'">'+t.data[a].Name+"</option>";$("#webhook-option").html(""),$("#webhook-option").html(listWebhooks),$("#webhook-option").selectpicker("refresh"),$(".select-webhook-div.bootstrap-select ul li").each(function(){$(this).hasClass("selected")&&$(this).addClass("active")}),(0<t.data.length?($(".select-webhook-div .bootstrap-select .open").show(),$("#webhook-select-validations")):($("#webhook-select-validations").html(""),$("#webhook-select-validations").css("display","block").html(window.Server.App.Localization.NoWebhook),$(".select-webhook-div").find(".bootstrap-select .dropdown-menu.open").removeClass("show"),$("#webhook-info"))).css("display","none"),$(".select-webhook-div span.loader-gif").remove()}isSameOrigin(),origin&&(void 0!==parent.embedConfig?(embedConfig=parent.embedConfig,isEmbedCode=parent.embedConfig.IsEmbedCode):void 0!==embedConfig&&(isEmbedCode=embedConfig.IsEmbedCode)),$(document).on("click","#export-destination",function(){$("#host-name, #user-name, #password").val("").closest("div").removeClass("has-error"),$("#webhook-select-validations").css("display","none"),$("#invalid-hostname, #invalid-username, #invalid-password").html("").hide(),$("#ftp-validation-message").text("").removeClass("ftp-credentials-validation-message"),$("#selected-users-validation").css("visibility","hidden"),$("#export-destination").prop("checked")?$("#host-name, #user-name, #password, #ftp-destination, #webhook-destination").attr("disabled",!1):($("#host-name, #user-name, #password,#ftp-destination, #webhook-destination").attr("disabled",!0),$("#webhook-option").find("option").remove(),$("#webhook-option").selectpicker("refresh"),$("#webhook-option").attr("disabled",!0).val(""),$("#refresh-webhook").attr("disabled",!0),$(".select-webhook-div .btn").addClass("disabled"),$("#create-webhook").addClass("disabled"),$("#webhook-info").css("display","none"))}),$(document).on("change","input[name='destinationType']",function(){$("#host-name, #user-name, #password").val("").closest("div").removeClass("has-error"),$("#invalid-hostname, #invalid-username, #invalid-password").html("").hide(),$("#ftp-validation-message").text("").removeClass("ftp-credentials-validation-message"),$("#webhook-select-validations").css("display","none"),$("#webhook-destination").is(":checked")?($("#host-name, #user-name, #password").attr("disabled",!0),$(".webhook-location-div").removeClass("hide").addClass("show"),$(".select-webhook-div .selectpicker").removeClass("disabled"),isEmbedCode?($("#create-webhook").addClass("hide"),$("#refresh-webhook").addClass("hide"),$(".webhook-location-div .report-name").addClass("hide")):($("#create-webhook").removeClass("disabled"),$("#webhook-option, #refresh-webhook").attr("disabled",!1)),$("#webhook-option").selectpicker("refresh"),$("#host-name, #user-name, #password").val(""),listWebhooks=""):($("#create-webhook").addClass("disabled"),$(".ftp-password-icon").removeClass("ftp-password-right"),$("#webhook-option, #refresh-webhook").attr("disabled",!0),$(".select-webhook-div .selectpicker").addClass("disabled"),$("#webhook-info").css("display","none"),$("#host-name, #user-name, #password").attr("disabled",!1),$("#webhook-option").find("option").remove(),$("#webhook-option").selectpicker("refresh"),$(".select-webhook-div.bootstrap-select ul li").each(function(){$(this).hasClass("selected")&&($(this).removeClass("active"),$(this).removeClass("selected"))}))}),$(document).on("show.bs.dropdown","#export-options-container",function(){LoadWidgetExportOption()}),$(".export-format-checkbox").click(function(){0===$(".export-format-checkbox:checked").length?$("#choose-format-validation").show():$("#choose-format-validation").hide()}),$(document).on("click","#schedule-submit",function(e){if(validateSubscriber(),0===$(".export-format-checkbox:checked").length)return $("#choose-format-validation").show(),!1;$("#choose-format-validation").hide();var a=" ",o="",s="",r=(2==alertChange&&(a=window.Server.App.Localization.ConditionEvaluted,successMessage=window.Server.App.Localization.DataAlertConfigureSuccess,o=window.Server.App.Localization.DataAlertConfigureSuccessMessage,$(".time-width").val()),{}),t=(r.ScheduleName=$("#schedule-name").val(),r.Parameter=$("#parameter").val(),r.ItemId=$(this).attr("data-report-id"),r.TemplateId=$(this).attr("data-unique-id"),isNullOrWhitespace($(this).attr("data-widget-id"))||(r.DashboardWidgetId=$(this).attr("data-widget-id")),isNullOrWhitespace($(this).attr("data-view-id"))||(r.DashboardViewId=$(this).attr("data-view-id")),r.ExportType=$("#export-options-container .export-format-checkbox:checked").map((e,t)=>t.value).get().join(","),"csv"==$("#excel-format").val()&&(r.ExportType=r.ExportType.replace("excel","csv")),schedulePermisionWarningMessage="Create"==actionType?(successMessage=isNullOrWhitespace(r.DashboardWidgetId)?window.Server.App.Localization.DashboardScheduleSuccess:window.Server.App.Localization.DashboardWidgetScheduleSuccess,s=addScheduleUrl,window.Server.App.Localization.AddSchedulePermissionWarningAlert):(successMessage=window.Server.App.Localization.ScheduleUpdateSuccess,r.ScheduleId=$(this).attr("data-schedule-id"),r.FailureOccurrence=scheduleRecurrenceInfo.FailureOccurrence,s=updateScheduleUrl,window.Server.App.Localization.UpdateSchedulePermissionWarningAlert),r.ExportType,r.ExportType.toLowerCase().split(",")),t=($.each(t,function(e,t){var a;"image"==t?(r.ImageFormat=$("#image-format").val(),r.ImageResolution=$("#image-dpi").val()):"pdf"==t?(r.PdfSize=$("#pdf-format").val(),r.IsWidgetPagewiseExport=!$("#export-current-view").prop("checked"),a="",a=$("#pdf-portrait").hasClass("selected-pdf-orientation")?"Portrait":"Landscape",r.PdfOrientation=a):"excel"==t?(r.ExcelFormat=$("#excel-format").val(),r.ResponseType=$("#respose-type").val()):r.CsvFormat=$("#csv-format").val()}),""),n="",i="",d="",t=$("#enable-schedule-template").prop("checked")?(t=$("#selected-users-container_editable-content").val(),getRelativePath(t)):"Edit"!=actionType||isNullOrWhitespace(emailContent)?"":emailContent,l=(2==alertChange&&(n=filterContent.Filters,i=filterContent.DaJsonString,d=filterContent.DataSourceId),r.EmailContent=t,r.EmailSubject=$("#subject-area").val(),$("#alert-value").text());switch($("#recurrence-type").val().toString().toLowerCase()){case"daily":$("#daily-every-x-days").prop("checked")?(r.RecurrenceType="Daily",r.RecurrenceInterval=$("#every-x-days").val()):r.RecurrenceType="DailyWeekDay";break;case"weekly":r.RecurrenceType="Weekly",r.RecurrenceInterval=$("#every-x-weeks").val(),r.Sunday=$("#sun").prop("checked"),r.Monday=$("#mon").prop("checked"),r.Tuesday=$("#tues").prop("checked"),r.Wednesday=$("#wed").prop("checked"),r.Thursday=$("#thu").prop("checked"),r.Friday=$("#fri").prop("checked"),r.Saturday=$("#sat").prop("checked");break;case"monthly":$("#monthly").prop("checked")?(r.RecurrenceType="Monthly",r.DaysOfMonth=$("#monthly-date").val(),r.RecurrenceInterval=$("#monthly-every-x-months").val()):(r.RecurrenceType="MonthlyDOW",r.WeekOfMonth=$("#monthly-dow-week").find("option:selected").text(),r.DayOfWeek=$("#monthly-dow-day").find("option:selected").text(),r.RecurrenceInterval=$("#monthly-dow-every-x-months").val());break;case"yearly":r.RecurrenceInterval=$("#every-x-years").val(),$("#yearly").prop("checked")?(r.RecurrenceType="Yearly",r.DaysOfMonth=$("#yearly-day").val(),r.MonthOfYear=$("#yearly-month").find("option:selected").text()):(r.RecurrenceType="YearlyDOW",r.WeekOfMonth=$("#yearly-dow-week").find("option:selected").text(),r.DayOfWeek=$("#yearly-dow-day").find("option:selected").text(),r.MonthOfYear=$("#yearly-dow-month").find("option:selected").text());break;case"hourly":r.RecurrenceType="Hourly",r.Frequency=$(".time-width").val(),r.RecurrenceInterval=$("#every-x-hours-value").val()}switch(r.IsEnabled=$("#enable-schedule").prop("checked"),r.FailureNotificationToOwner=$("#enable-notification-to-owner").prop("checked"),r.FailureNotificationToRecipient=$("#enable-notification-to-recipient").prop("checked"),r.StartDate=$("#start-date").val(),$("input[name=end-type]:checked","#schedule-end-type").val().toString()){case"never":r.ScheduleEndType="NoEnd";break;case"endafter":r.ScheduleEndType="EndAfter",r.RecurrenceFactor=$("#occurence-count").val();break;case"endBy":r.ScheduleEndType="EndBy",r.EndDate=$("#end-date").val()}for(var c=$(".selected-recipients").children(),{userlist:p,grouplist:h,externalrecipientlist:u}=updateListsFromSelectedItems(c),p=Array(),h=Array(),u=Array(),m=0,b=0,v=0,w=0;w<c.length;w++)"userSearch"==c[w].getAttribute("data-searchtype")&&-1!=m&&(p[m]=c[w].id,m++),"groupSearch"==c[w].getAttribute("data-searchtype")&&-1!=b&&(h[b]=c[w].id,b++),"externalRecipient"==c[w].getAttribute("data-searchtype")&&-1!=v&&(u[v]=c[w].id,v++);function f(e){var t=null!=e.ErrorMessage?e.ErrorMessage:"";"undefined"!=typeof BoldBIDashboard&&"function"==typeof parent.$("#popup-container_wrapper").BoldBIDashboardWaitingPopup?(parent.$("#popup-container_wrapper").BoldBIDashboardWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").BoldBIDashboardWaitingPopup("hide")):(parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide")),e.IsFtpCredentialsAreValid?scheduleSubmit(c,l,a,o,s,r,p,h,u,n,i,d):$("#ftp-validation-message").text(t).addClass("ftp-credentials-validation-message")}$("#export-destination").prop("checked")?$("#ftp-destination").prop("checked")?(r.IsFTPExportOptionEnabled=$("#ftp-destination").prop("checked"),r.FtpURL=$("#host-name").val(),r.FtpUsername=$("#user-name").val(),r.FtpPassword=$("#password").val(),FTPCredentialsValidation(e),""!=$("#host-name").val()&&""!=$("#user-name").val()&&""!=$("#password").val()&&("undefined"!=typeof BoldBIDashboard&&"function"==typeof parent.$("#popup-container_wrapper").BoldBIDashboardWaitingPopup?(parent.$("#popup-container_wrapper").BoldBIDashboardWaitingPopup("show"),parent.$("#editpopup-container_wrapper").BoldBIDashboardWaitingPopup("show")):(parent.$("#popup-container_wrapper").ejWaitingPopup("show"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("show")),isEmbedCode||$.ajax({type:"POST",url:validateFTPCredentials.web,data:{hostName:$("#host-name").val(),username:$("#user-name").val(),password:$("#password").val()},success:function(e){f(e)}}),isEmbedCode)&&(t={hostName:$("#host-name").val(),username:$("#user-name").val(),password:$("#password").val()},designerToken=parent.designerToken,ajaxPostCall("POST",validateFTPCredentials,t,null,f,null,null))):isNullOrWhitespace($("#webhook-option").val())?$("#webhook-select-validations").css("display","block").html(window.Server.App.Localization.SelectWebhook):(r.IsWebhookOptionEnabled=$("#webhook-destination").prop("checked"),r.WebhookName=$(".select-webhook-div .filter-option").html(),r.WebhookId=$("#webhook-option option:selected").val(),scheduleSubmit(c,l,a,o,s,r,p,h,u,n,i,d)):scheduleSubmit(c,l,a,o,s,r,p,h,u,n,i,d)}),$(".show-hide-password").on("mousedown",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(".show-hide-password").on("mouseup",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("focusout","#host-name, #user-name, #password",function(e){FTPCredentialsValidation(e)}),$(document).on("keyup","#host-name",function(){$("#host-name").closest("div").removeClass("has-error"),$("#host-name").closest("div").find("span").html("").hide(),$("#ftp-validation-message").text("").removeClass("ftp-credentials-validation-message")}),$(document).on("keyup","#user-name",function(){$("#user-name").closest("div").removeClass("has-error"),$("#user-name").closest("div").find("span").html("").hide(),$("#ftp-validation-message").text("").removeClass("ftp-credentials-validation-message")}),$(document).on("keyup","#password",function(){$("#password").closest("div").removeClass("has-error"),$("#password").closest("div").find("span").html("").hide(),$("#ftp-validation-message").text("").removeClass("ftp-credentials-validation-message")}),$("#webhook-option").on("change",function(e){$("#webhook-select-validations").css("display","none"),$(".ftp-password-icon").addClass("ftp-password-right"),e.stopPropagation(),isEmbedCode||$.ajax({type:"POST",url:getWebhookDetailsByIdUrl,data:{webhookId:$("#webhook-option option:selected").val()},success:function(e){GetWebhooksDetailsById(e)}}),isEmbedCode&&(e={webhookId:$("#webhook-option option:selected").val()},designerToken=parent.designerToken,ajaxPostCall("POST",getWebhookDetailsByIdUrlApi,e,null,GetWebhooksDetailsById,null,null))}),$(document).ready(function(){if($("#image-dpi").ejNumericTextbox({name:"numeric",value:96,minValue:1,maxValue:999,width:"65px",height:"32px",incrementStep:1}),"Create"==actionType)canExport.Image?($("#image-export").prop("checked",!0),$("#show-excel-format").hide(),$("#show-pdf-checkbox").hide(),$("#show-image-format").show(),$("#show-pdf-format").hide()):canExport.Pdf?($("#pdf-export").prop("checked",!0),$("#show-excel-format").hide(),$("#show-image-format").hide(),$("#show-pdf-checkbox").show(),$("#show-pdf-format").show()):canExport.Excel&&($("#excel-export").prop("checked",!0),$("#show-excel-format").show(),$("#show-pdf-checkbox").hide(),$("#show-image-format").hide(),$("#show-pdf-format").hide());else if($("#schedule-submit").attr("data-schedule-id",scheduleId),isNullOrWhitespace(exportType)&&!isNullOrWhitespace(multiExportType))for(var e=0;e<multiExportType.length;e++){exportType=multiExportType[e].toLowerCase();for(var t="",a=0;a<scheduleExportInfo.ExportFormatInfo.length;a++)if(scheduleExportInfo.ExportFormatInfo[a].ExportType.toLowerCase()===exportType.toLowerCase()){t=scheduleExportInfo.ExportFormatInfo[a];break}ProccessExportType(exportType,t)}else{for(a=0;a<scheduleExportInfo.ExportFormatInfo.length;a++)if(scheduleExportInfo.ExportFormatInfo[a].ExportType.toLowerCase()===exportType.toLowerCase()){t=scheduleExportInfo.ExportFormatInfo[a];break}ProccessExportType(exportType,t)}var s,o;null!=scheduleExportInfo.ScheduleExportLocation&&null!=scheduleExportInfo.ScheduleExportLocation&&scheduleExportInfo.ScheduleExportLocation.IsFTPExportOptionEnabled?($("#ftp-destination, #webhook-destination").attr("disabled",!1),$("#export-destination").prop("checked",!0),$("#ftp-destination").prop("checked",!0),$("#host-name, #user-name, #password").attr("disabled",!1),$("#host-name").val(scheduleExportInfo.ScheduleExportLocation.FtpURL),$("#user-name").val(scheduleExportInfo.ScheduleExportLocation.FtpUsername)):null!=scheduleExportInfo.ScheduleExportLocation&&null!=scheduleExportInfo.ScheduleExportLocation&&scheduleExportInfo.ScheduleExportLocation.IsWebhookOptionEnabled&&($("#export-destination").prop("checked",!0),$("#webhook-destination").prop("checked",!0),$("#ftp-destination, #webhook-destination").attr("disabled",!1),$(".select-webhook-div .selectpicker").removeClass("disabled"),$("#create-webhook").removeClass("disabled"),$("#webhook-option, #refresh-webhook").attr("disabled",!1),$("#webhook-option").find("option").remove(),$("#webhook-option").selectpicker("refresh"),s=!(listWebhooks=""),o=2==alertChange?webhookevent[1]:webhookevent[0],$.ajax({type:"POST",url:getWebhooksUrl,data:{webhookEventType:o},success:function(e){var t=e;listWebhooks="<option value='' data-hidden='true'></option>";for(var a=0;a<t.data.length;a++)listWebhooks+='<option value="'+t.data[a].Id+'">'+t.data[a].Name+"</option>";$("#webhook-option").html(""),$("#webhook-option").html(listWebhooks);for(var o=0;o<t.data.length;o++)scheduleExportInfo.ScheduleExportLocation.WebhookId==t.data[o].Id&&($(".select-webhook-div .filter-option").html(t.data[o].Name),$("#webhook-option option[value='"+t.data[o].Id+"']").attr("selected",!0),s=!1);$(".select-webhook-div.bootstrap-select ul li").each(function(){$(this).hasClass("selected")&&$(this).addClass("active")}),s||$.ajax({type:"POST",url:getWebhookDetailsByIdUrl,data:{webhookId:scheduleExportInfo.ScheduleExportLocation.WebhookId},success:function(e){$("#webhook-info").css("display","block"),$("#webhook-info span").html(window.Server.App.Localization.WebhookInfoMessage.format("<b>"+e.data.Url+"</b>","<b>"+e.data.ContentTypeDescription+"</b>","POST"))}})}})),"undefined"!=typeof BoldBIDashboard&&"function"==typeof parent.$("#popup-container_wrapper").BoldBIDashboardWaitingPopup?(parent.$("#popup-container_wrapper").BoldBIDashboardWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").BoldBIDashboardWaitingPopup("hide")):(parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide"))}),$(document).on("show.bs.dropdown",".select-webhook-div",function(){isNullOrWhitespace($("#webhook-option option:selected").val())?!isNullOrWhitespace(scheduleExportInfo.ScheduleExportLocation)&&scheduleExportInfo.ScheduleExportLocation.IsWebhookOptionEnabled?LoadWebhookName(scheduleExportInfo.ScheduleExportLocation.WebhookId):LoadWebhookName():LoadWebhookName($("#webhook-option option:selected").val())});var listUsers="",listGroups="",userDataFetched=!1,groupDataFetched=!1,fetchedUserData="",fetchedGroupData="";function getAllStaticData(){$(".selectpicker").selectpicker("refresh"),$("#schedule-submit").attr("data-report-id",createdItemId),$(".share-popup .bs-deselect-all").after("<div class='bs-select-all-custom'><span>"+window.Server.App.Localization.Select+"</span><span class='bs-select-custom-tick glyphicon glyphicon-ok' ></span></div>")}function selectedItemsCount(){$("#selected-users-info").html("<span class='pull-left'>"+window.Server.App.Localization.ScheduleMembers.format($(".SelectedShareItems[data-searchtype='userSearch']").length,$(".SelectedShareItems[data-searchtype='groupSearch']").length,$(".SelectedShareItems[data-searchtype='externalRecipient']").length)+"<span>").css({"padding-top":"10px","padding-left":"15px","margin-top":"0"})}function getUserResult(e){var e=JSON.parse(e.users),a="";e.forEach(function(e){var t=e.Key.replace(/'/g,"&apos;");a+=`<option value='${t}' data-show='${e.CanShowEmail}'>${e.Value}</option>`}),$("#user-search").html(a),$("#user-search").selectpicker("refresh"),""!==a&&$(".users-dropdown .bootstrap-select .open").show(),$(".users-dropdown span.loader-gif").remove()}function getGroupResult(e){var e=JSON.parse(e.groups),t="";e.forEach(function(e){t+=`<option value='${e.Key}' data-property='${e.Attribute}' data-show='${e.Attribute}'>${e.Value}</option>`}),$("#group-search").html(t),$("#group-search").selectpicker("refresh"),""!==t&&$(".groups-dropdown .bootstrap-select .open").show(),$(".groups-dropdown span.loader-gif").remove()}function validateExternalRecipient(){$(document).on("keypress","#external-email",function(e){13==e.which&&(e.preventDefault(),$("#external-submit").click())}),$(document).on("click","#external-submit",function(e){var t=$("#external-email").val().toLowerCase().split(/[,;]/),o=$(".selected-recipients").children(),s=[],r=[],n=[],i=!1,d=!1;t.forEach(function(e){var t,a;e=e.trim(),IsEmail(e)?(s.push(e),t=!1,o.each(function(){if("externalRecipient"==$(this).attr("data-searchtype")&&$(this).attr("id")==e)return t=!0,n.push(e),!(d=!0)}),t||((a=$("<div>").attr("id",e).attr("data-searchtype","externalRecipient").addClass("SelectedShareItems")).html("<div class='InstantSearch'><span class='details' title='"+e+"'>"+e+"</span><div style='width:auto' class='instant-cancel'><span class='su su-close i-selected-cancel'/></div></div>"),$("#selected-users-validation").css("visibility","hidden"),$("#selected-users").append(a),selectedItemsCount())):(r.push(e),i=!0)}),i&&d?($("#external-email").val(n.join("; ")+"; "+r.join("; ")),$("#external-email-validation").html("<span class='validate-fail'>Email is Invalid or Already Exists</span>")):i?($("#external-email").val(r.join("; ")),$("#external-email-validation").html("<span class='validate-fail'>"+window.Server.App.Localization.IsValidEmail+"</span>")):d?($("#external-email").val(n.join("; ")),$("#external-email-validation").html("<span class='validate-fail'>"+window.Server.App.Localization.IsMailExist+"</span>")):($("#external-email").val(""),$("#external-email-validation").html(""))}),$(document).on("keyup","#external-email",function(e){13!=e.keyCode&&($("#external-email").removeClass("inactive-box"),$("#external-submit").removeClass("inactive-icon"),$("#external-email-validation").html(""))})}function addTitleForUsersAndGroups(){$("#user-search").selectpicker("refresh");for(var e=0;e<$("#user-search-container .btn-group .dropdown-menu .selectpicker li").length;e++){var t=$("#user-search-container .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("#user-search-container .btn-group .dropdown-menu .selectpicker li").eq(e).find("a").attr("title",t)}$("#group-search").selectpicker("refresh");for(e=0;e<=$("#group-search-container .btn-group .dropdown-menu  li").length;e++){t=$("#group-search-container .btn-group .dropdown-menu  li").eq(e).find("a .text").text();$("#group-search-container .btn-group .dropdown-menu li ").eq(e).find("a").attr("title",t)}}function validateSubscriber(){var e=$("#export-destination").length?$("#export-destination").prop("checked"):void 0;return 0!==$("#selected-users").children().length||e?($("#selected-users-validation").css("visibility","hidden"),!0):($("#selected-users-validation").css("visibility","visible"),!1)}function updateListsFromSelectedItems(t){var a=Array(),o=Array(),s=Array(),r=0,n=0,i=0;for(let e=0;e<t.length;e++){var d=t[e].getAttribute("data-searchtype"),l=t[e].id;"userSearch"===d&&-1!==r?(a[r]=l,r++):"groupSearch"===d&&-1!==n?(o[n]=l,n++):"externalRecipient"===d&&-1!==i&&(s[i]=l,i++)}return{userlist:a,grouplist:o,externalrecipientlist:s}}$(document).on("show.bs.dropdown",".users-dropdown",function(){$("#user-search").append(fetchedUserData),"Create"==actionType&&($(".users-dropdown").find(".open,.bootstrap-select").removeClass("dropdown-alignment"),""!==fetchedUserData||userDataFetched||isEmbedCode||$.ajax({type:"POST",url:getActiveandInactiveUserUrl.web,data:{},success:function(e){fetchedUserData=e.data,getUserResult(e.data),userDataFetched=!0}}),isEmbedCode&&(designerToken=parent.designerToken,ajaxPostCall("POST",getActiveandInactiveUserUrl,{},null,getUserResult,null,null)),$(".users-dropdown").find(".open").addClass("dropdown-alignment"))}),$(document).on("show.bs.dropdown",".groups-dropdown",function(){$("#group-search").append(fetchedGroupData),"Create"==actionType&&($(".groups-dropdown").find(".open,.bootstrap-select").removeClass("dropdown-alignment"),""!==fetchedGroupData||groupDataFetched||isEmbedCode||$.ajax({type:"POST",url:getActiveInactiveGroupUrl.web,data:{},success:function(e){fetchedGroupData=e.data,getGroupResult(e.data),groupDataFetched=!0}}),isEmbedCode&&(designerToken=parent.designerToken,ajaxPostCall("POST",getActiveInactiveGroupUrl,{},null,getGroupResult,null,null)),$(".groups-dropdown").find(".open").addClass("dropdown-alignment"))}),$(document).on("change","#user-search",function(e){var n=[];$("#user-search-container").addClass("value-changed"),$("#user-search-container .bootstrap-select li.selected").length==$("#user-search-container .bootstrap-select li").length&&($($("#user-search-container div.bs-select-all-custom").children("span")[0]).text(window.Server.App.Localization.Clear),$("#user-search-container div.bs-select-all-custom").removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom")),$(this).find("option").each(function(e,t){if($(this).is(":selected")){var a=t,o=$("<div>").attr("id",$(a).val()).attr("data-searchtype","userSearch").addClass("SelectedShareItems"),s=$("<span  class='details' title='"+$(a).text()+"'>").text($(a).text()),s=(o.append("<div class='InstantSearch'></div>"),o.find(".InstantSearch").append(s),o.find(".InstantSearch").append("<div style='width:auto' class='instant-cancel'><span class='su su-close i-selected-cancel'/></div>"),$("#selected-users-validation").css("visibility","hidden"),$("<div>").attr("id",$(a).val()).attr("data-searchtype","userSearch").addClass("SelectedShareItems"));$("#selected-users").children().each(function(){var e=$(this).attr("id");n.push(e)}),0!=n.length&&n.includes(s.attr("id"))||$("#selected-users").append(o)}else{a=t;if(1<$(".SelectedShareItems[id='"+$(a).val()+"']").length)for(var r=0;r<$(".SelectedShareItems[id='"+$(a).val()+"']").length;r++)"userSearch"==$($(".SelectedShareItems[id='"+$(a).val()+"']")[r]).attr("data-searchtype")&&$($(".SelectedShareItems[id='"+$(a).val()+"']")[r]).remove();else $(".SelectedShareItems[id='"+$(a).val()+"']").remove();$($("#user-search-container .bs-deselect-all-custom").children("span")[0]).text(window.Server.App.Localization.Select),$("#user-search-container .bs-deselect-all-custom").removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom")}}),selectedItemsCount(),e.stopPropagation()}),$(document).on("change","#group-search",function(e){var r=[];$("#group-search-container").addClass("value-changed"),$("#group-search-container .bootstrap-select li.selected").length==$("#group-search-container .bootstrap-select li").length&&($($("#group-search-container div.bs-select-all-custom").children("span")[0]).text(window.Server.App.Localization.Clear),$("#group-search-container div.bs-select-all-custom").removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom")),$(this).find("option").each(function(e,t){var a,o,s;$(this).is(":selected")?(o=t,a=$("<div>").attr("id",$(o).val()).attr("data-searchtype","groupSearch").addClass("SelectedShareItems"),s=$("<span class='details' title='"+$(o).text()+"'>").text($(o).text()),a.append("<div class='InstantSearch'></div>"),a.find(".InstantSearch").append(s),a.find(".InstantSearch").append("<div style='width:auto' class='instant-cancel'><span class='su su-close i-selected-cancel'/></div>"),$("#selected-users-validation").css("visibility","hidden"),$("#selected-users-validation").css("visibility","hidden"),s=$("<div>").attr("id",$(o).val()).attr("data-searchtype","groupSearch").addClass("SelectedShareItems"),$("#selected-users").children().each(function(){var e=$(this).attr("id");r.push(e)}),0!=r.length&&r.includes(s.attr("id"))||$("#selected-users").append(a)):(o=t,s=$("<div>").attr("id",$(o).val()).attr("data-searchtype","groupSearch").addClass("SelectedShareItems"),r.pop(s.attr("id")),$(".SelectedShareItems").filter("[data-searchtype='groupSearch']").filter("#"+$(o).val()).remove(),$($("#group-search-container .bs-deselect-all-custom").children("span")[0]).text(window.Server.App.Localization.Select),$("#group-search-container .bs-deselect-all-custom").removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom"))}),selectedItemsCount(),e.stopPropagation()}),$(document).on("click","#subscribers-panel .i-selected-cancel",function(e){$("#user-search-container .bs-searchbox input, #group-search-container .bs-searchbox input").val(""),$("#user-search, #group-search").selectpicker("refresh");var t,a=$(this).parents(".SelectedShareItems").attr("id"),o=$(this).parents(".SelectedShareItems").attr("data-searchtype");"userSearch"==o?(currentElementIndex=$("#user-search").find("[value='"+a+"']").index()+1,0<$("#user-search-container .bootstrap-select li").find("a[aria-posinset='"+currentElementIndex+"']").length?$("#user-search-container .bootstrap-select li").find("a[aria-posinset='"+currentElementIndex+"']").click():(t="bs-select-14-"+(currentElementIndex-1),0<!$("#user-search-container .bootstrap-select li").find("#"+t).length&&(t=$("#user-search").parent().find("button").attr("aria-owns")+"-"+(currentElementIndex-1),0<!$("#user-search-container .bootstrap-select li").find("#"+t).length)&&(t="bs-select-8-"+(currentElementIndex-1)),$("#user-search-container .bootstrap-select li").find("#"+t).trigger("click"))):"groupSearch"==o?(currentElementIndex=$("#group-search").find("[value='"+a+"']").index()+1,0<$("#group-search-container .bootstrap-select li").find("a[aria-posinset='"+currentElementIndex+"']").length?$("#group-search-container .bootstrap-select li").find("a[aria-posinset='"+currentElementIndex+"']").click():(t="bs-select-15-"+(currentElementIndex-1),0<!$("#group-search-container .bootstrap-select li").find("#"+t).length&&(t=$("#group-search").parent().find("button").attr("aria-owns")+"-"+(currentElementIndex-1),0<!$("#group-search-container .bootstrap-select li").find("#"+t).length)&&(t="bs-select-9-"+(currentElementIndex-1)),$("#group-search-container .bootstrap-select li").find("#"+t).trigger("click"))):"externalRecipient"==o&&$(this).parent().parent().parent().remove(),selectedItemsCount(),$("#selected_childdashboard").attr("disabled",!1)}),$(document).on("hide.bs.dropdown","#user-search-container",function(e){$("#user-search-container").hasClass("value-changed")&&($("#user-search-container").removeClass("value-changed"),e.stopPropagation())}),$(document).on("hide.bs.dropdown","#group-search-container",function(e){$("#group-search-container").hasClass("value-changed")&&($("#group-search-container").removeClass("value-changed"),e.stopPropagation())}),$(document).on("show.bs.dropdown","#user-search-container",function(e){$("#user-search").next("div").find(".dropdown-menu").addClass("dropdown-width");for(var t=0;t<$("#user-search option").length;t++)"false"==$("#user-search option").eq(t).attr("data-show").toLowerCase()&&($("#user-search-container .dropdown-menu .inner li").eq(t).addClass("disabled user-disabled"),$("#user-search-container .dropdown-menu .inner li").eq(t).attr("data-bs-toggle","tooltip").attr("data-placement","top").attr("data-original-title",window.Server.App.Localization.AutoGeneratedMail)),$('[data-bs-toggle="tooltip"]').tooltip()}),$(document).on("show.bs.dropdown","#group-search-container",function(e){$("#group-search").next("div").find(".dropdown-menu").addClass("dropdown-width")}),$(document).ready(function(){if($(".schedule-dialog #subscribers-panel").css("display","inline"),getAllStaticData(),$('[data-bs-toggle="tooltip"]').tooltip(),"Create"==actionType)$("select#user-search option").each(function(e){var t,a;""!=$(this).val()&&$(this).val().toLowerCase()==$("#userName").val().toLowerCase()&&(t=$(this).text(),$(this).attr("selected",!0),$("#user-search").selectpicker("refresh"),(a=$("<div>").attr("id",$(this).val()).attr("data-searchtype","userSearch").addClass("SelectedShareItems")).html("<div class='InstantSearch'><span class='details' title='"+t+"'>"+t+"</span><div style='width:auto' class='instant-cancel'><span class='su su-close i-selected-cancel'/></div></div>"),$("#selected-users").append(a))});else{$.ajax({type:"POST",url:getActiveandInactiveUserWebUrl,data:{},async:!1,success:function(e){window.userList=e.data.users,window.groupList=e.data.groups}}),$("#user-search").append(window.userList),$("#group-search").append(window.groupList);for(var e=0;e<subscriberUser.length;e++){$("#user-search option[value='"+subscriberUser[e]+"']").attr("selected",!0),$("#user-search").selectpicker("refresh");var t=$("#user-search option[value='"+subscriberUser[e]+"']").text(),a=$("<div>").attr("id",subscriberUser[e]).attr("data-searchtype","userSearch").addClass("SelectedShareItems");a.html("<div class='InstantSearch'><span class='details' title='"+t.trim()+"'>"+t.trim()+"</span><div style='width:auto' class='instant-cancel'><span class='su su-close i-selected-cancel'/></div></div>"),$("#selected-users").append(a)}oldUserSelected=$("#user-search").val();for(e=0;e<subscriberGroup.length;e++){$("#group-search option[value='"+subscriberGroup[e]+"']").attr("selected",!0),$("#group-search").selectpicker("refresh");var o=$("#group-search option[value='"+subscriberGroup[e]+"']").text(),s=$("<div>").attr("id",subscriberGroup[e]).attr("data-searchtype","groupSearch").addClass("SelectedShareItems");s.html("<div class='InstantSearch'><span class='details' title='"+o.trim()+"'>"+o.trim()+"</span><div style='width:auto' class='instant-cancel'><span class='su su-close i-selected-cancel'/></div></div>"),$("#selected-users").append(s)}oldGroupSelected=$("#group-search").val();for(e=0;e<subscriberExternalRecipient.length;e++){var r=subscriberExternalRecipient[e],n=$("<div>").attr("id",subscriberExternalRecipient[e]).attr("data-searchtype","externalRecipient").addClass("SelectedShareItems");n.html("<div class='InstantSearch'><span class='details'title='"+r+"'>"+r+"</span><div style='width:auto' class='instant-cancel'><span class='su su-close i-selected-cancel'/></div></div>"),$("#selected-users").append(n)}var i=$("#group-search-container .bootstrap-select li.selected").length,d=$("#group-search-container .bootstrap-select li").length,l=$("#user-search-container .bootstrap-select li.selected").length,c=$("#user-search-container .bootstrap-select li").length;i===d&&$("#group-search-container .bs-select-all-custom").removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom"),l===c&&$("#user-search-container .bs-select-all-custom").removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom")}scheduleRecurrenceInfo.FailureNotificationToOwner&&$("#enable-notification-to-owner").prop("checked",!0),scheduleRecurrenceInfo.FailureNotificationToRecipient&&$("#enable-notification-to-recipient").prop("checked",!0),selectedItemsCount(),validateExternalRecipient(),addTitleForUsersAndGroups()}),$(document).on("click","#user-search-container .bs-select-all-custom",function(e){$("#user-search-container").addClass("value-changed"),$("#user-search").data("selectpicker").selectAll(),$("#user-search").trigger("change"),$(this).removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom"),$($(this).children("span")[0]).text(window.Server.App.Localization.Clear),selectedItemsCount(),e.stopPropagation()}),$(document).on("click","#group-search-container .bs-select-all-custom",function(e){$("#group-search-container").addClass("value-changed"),$("#group-search").data("selectpicker").selectAll(),$("#group-search").trigger("change"),$(this).removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom"),$($(this).children("span")[0]).text(window.Server.App.Localization.Clear),selectedItemsCount(),e.stopPropagation()}),$(document).on("click","#user-search-container .bs-deselect-all-custom",function(e){$("#user-search-container").addClass("value-changed"),$("#user-search").data("selectpicker").deselectAll(),$("#user-search").trigger("change"),$(this).removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom"),$($(this).children("span")[0]).text(window.Server.App.Localization.Select),$(".SelectedShareItems[data-searchtype='userSearch']").remove(),selectedItemsCount(),e.stopPropagation()}),$(document).on("click","#group-search-container .bs-deselect-all-custom",function(e){$("#group-search-container").addClass("value-changed"),$("#group-search").data("selectpicker").deselectAll(),$("#group-search").trigger("change"),$(this).removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom"),$($(this).children("span")[0]).text(window.Server.App.Localization.Select),$(".SelectedShareItems[data-searchtype='groupSearch']").remove(),selectedItemsCount(),e.stopPropagation()});