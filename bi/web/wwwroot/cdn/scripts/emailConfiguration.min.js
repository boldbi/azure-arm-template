function getEmailPassword(){var e=$("#mail-password");""===e.val()&&(parseInt($("#port-number").val())!==window.SystemSettingsProperties.MailSettingsPort||$("#smtp-address").val()!==window.SystemSettingsProperties.MailSettingsHost||$("#mail-display-name").val()!==window.SystemSettingsProperties.MailSettingsSenderName||$("#mail-user-name").val()!==window.SystemSettingsProperties.MailSettingsAddress||$("#secure-mail-authentication").is(":checked")!==window.SystemSettingsProperties.MailSettingsIsSecureAuthentication?e.attr("placeholder",window.Server.App.Localization.PasswordPlaceholder).siblings(".placeholder").html(window.Server.App.Localization.PasswordPlaceholder):e.attr("placeholder","●●●●●●●●").siblings(".placeholder").html("●●●●●●●●"))}$(document).ready(function(){$("#mail-password").show(),$.validator.addMethod("noEmptySpaces",function(e,a){return""!==$.trim(e)}),$("#email-setting-form").validate({errorElement:"span",onkeyup:function(e,a){9!=a.keyCode&&(isKeyUp=!0,"mail-password"===e.id&&""===$(e).val()||$(e).valid(),isKeyUp=!1)},onfocusout:function(e){("mail-password"!==e.id||""===$(e).val())&&$(e).valid()},rules:{smtp_address:{required:{depends:function(){return 0===parseInt($("#mail-account").val())}},noEmptySpaces:!0},port_number:{required:{depends:function(){return 0===parseInt($("#mail-account").val())}},noEmptySpaces:!0},mail_display_name:{required:{depends:function(){return 0===parseInt($("#mail-account").val())}},isValidName:{depends:function(){return 0===parseInt($("#mail-account").val())}},noEmptySpaces:!0},mail_user_name:{required:{depends:function(){return 0===parseInt($("#mail-account").val())||1===parseInt($("#mail-account").val())}},isValidEmail:{depends:function(){return 0===parseInt($("#mail-account").val())||1===parseInt($("#mail-account").val())}},noEmptySpaces:!0},mail_password:{required:{depends:function(){return 0===parseInt($("#mail-account").val())}},noEmptySpaces:!0},sender_user_name:{required:{depends:function(){return 0===parseInt($("#mail-account").val())}},noEmptySpaces:!0},tenant_id:{required:{depends:function(){return 1===parseInt($("#mail-account").val())}},noEmptySpaces:!0},client_id:{required:{depends:function(){return 1===parseInt($("#mail-account").val())}},noEmptySpaces:!0},client_secret:{required:{depends:function(){return 1===parseInt($("#mail-account").val())}},noEmptySpaces:!0}},highlight:function(e){$(e).closest(".form-group, .secrets-field-pwsd").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group, .secrets-field-pwsd").removeClass("has-error"),$(e).parent().find("span.validation-errors").html("")},errorPlacement:function(e,a){$(a).parent().find("span.validation-errors").html(e)},messages:{smtp_address:{required:window.Server.App.Localization.MailSMTPServerValidator,noEmptySpaces:window.Server.App.Localization.MailSMTPServerValidator},port_number:{required:window.Server.App.Localization.MailSMTPPortValidator,noEmptySpaces:window.Server.App.Localization.MailSMTPPortValidator},mail_display_name:{required:window.Server.App.Localization.SenderNameValidator,noEmptySpaces:window.Server.App.Localization.SenderNameValidator},mail_user_name:{required:window.Server.App.Localization.SenderEmailValidator,noEmptySpaces:window.Server.App.Localization.SenderEmailValidator},mail_password:{required:window.Server.App.Localization.PasswordValidator,noEmptySpaces:window.Server.App.Localization.PasswordValidator},sender_user_name:{required:window.Server.App.Localization.UserNameValidator,noEmptySpaces:window.Server.App.Localization.UserNameValidator},tenant_id:{required:window.Server.App.Localization.TenantId,noEmptySpaces:window.Server.App.Localization.TenantId},client_id:{required:window.Server.App.Localization.ClientId,noEmptySpaces:window.Server.App.Localization.ClientId},client_secret:{required:window.Server.App.Localization.ClientSecret,noEmptySpaces:window.Server.App.Localization.ClientSecret}}}),$(".mail-settings-fields:not('#mail-password')").keyup(function(e){getEmailPassword()}),$("#mail-authentication-type").selectpicker("refresh"),umsSettingsInherit(isUMSEmailSettingsInherited,!0,".ums-inherit-email-settings, .mail-settings-fields"),"undefined"!=typeof isUMSEmailSettingsInherited&&setTimeout(function(){umsSettingsInherit(isUMSEmailSettingsInherited,!1,".ums-inherit-email-settings-dropdown .btn")},1e3)}),$(document).on("change","#mail-authentication-type",function(){var e=$(".mail-credentials");1===parseInt($(this).val())?e.removeAttr("disabled"):(e.attr("disabled","disabled").val("").parent().parent().removeClass("has-error"),e.siblings(".validation-errors").text(""))}),$(document).on("change","#mail-password , #sender-user-name",function(){""!==$("#mail-password").val()&&$("#mail-password-error").remove(),""!==$("#sender-user-name").val()&&$("#sender-user-name-error").remove()});