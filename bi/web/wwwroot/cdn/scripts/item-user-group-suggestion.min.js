var autoCompleteControlEle="",autoCompleteControlWrapperEle="",autoCompleteHiddenEle="",query="",autoCompleteInstance="",autocompleteInputSearchWrapperObj="",suggestionListWrapperObj="",dataManagerObj=null,userEmailList=[],groupIdList=[];function getSuggestionForItem(e){$.xhrPool.abortAll();var o=autoCompleteHiddenEle.attr("data-item-id");""!=e.trim()&&$.ajax({type:"get",url:shareItemSuggestionListUrl,data:{searchWord:e,itemId:o},contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){autoCompleteInstance.model.dataSource=e,autoCompleteInstance._OnTextEnter()}})}function onChange(e){autoCompleteHiddenEle.attr("data-itemtype")!=ItemType.UserManagement?""!=e.value&&""!=autoCompleteInstance.getValue()?(shareBtnObj.show(),manageAccessCancelBtnObj.show(),manageAccessSaveBtnObj.hide(),shareDoneBtnObj.hide(),manageUserGroupContainer.addClass("disable-element-opacity")):(shareBtnObj.hide(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),shareDoneBtnObj.show(),manageUserGroupContainer.removeClass("disable-element-opacity")):""!=e.value&&""!=autoCompleteInstance.getValue()?(addOwnerBtnObj.show(),manageAccessCancelBtnObj.show(),manageAccessSaveBtnObj.hide(),shareDoneBtnObj.hide(),manageUserGroupContainer.addClass("disable-element-opacity")):(addOwnerBtnObj.hide(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),shareDoneBtnObj.show(),manageUserGroupContainer.removeClass("disable-element-opacity"))}function splitUserGroupList(){userEmailList=[],groupIdList=[];var e=getSelectedItems();$.each(e,function(e,o){(isNaN(o.Value)&&"user"==o.Type?userEmailList:groupIdList).push(o.Value)})}function refreshAutoComplete(){"undefined"!=typeof BoldBIDashboard?autoCompleteControlEle.BoldBIDashboardAutocomplete("clearText"):autoCompleteControlEle.ejAutocomplete("clearText")}function getSelectedItems(){return"undefined"!=typeof BoldBIDashboard?autoCompleteControlEle.BoldBIDashboardAutocomplete("getSelectedItems"):autoCompleteControlEle.ejAutocomplete("getSelectedItems")}function enableAutomCompleteControl(){refreshAutoComplete(),"undefined"!=typeof BoldBIDashboard?autoCompleteControlEle.BoldBIDashboardAutocomplete("enable"):autoCompleteControlEle.ejAutocomplete("enable"),autoCompleteControlWrapperEle.find(".e-in-wrap.e-box.e-corner").removeClass("disable-autocomplete")}function disableAutomCompleteControl(){refreshAutoComplete(),"undefined"!=typeof BoldBIDashboard?autoCompleteControlEle.BoldBIDashboardAutocomplete("disable"):autoCompleteControlEle.ejAutocomplete("disable"),autoCompleteControlWrapperEle.find(".e-in-wrap.e-box.e-corner").addClass("disable-autocomplete")}function getUserGroupProfilePicture(e,o,t,a){return"<div class='col-xs-2 no-padding search-user-group-img-container'><div class='group-logo'><i class='su su-"+t+"'></i></div></div><div class='col-xs-9 no-padding search-user-group-display-name-container'><div class='search-user-group-display-name'><span>"+e+"</span></div></div>"}function insertLoaderIcon(){autoCompleteControlWrapperEle.prepend("<div class='auto-complete-search-loader'></div>")}function removeLoaderIcon(){autoCompleteControlWrapperEle.find(".auto-complete-search-loader").remove()}$(function(){autoCompleteControlEle=$("#user-group-search-input"),autoCompleteHiddenEle=$("#user-group-search-hidden-input"),autoCompleteControlWrapperEle=$("#user-group-search-input_wrapper"),autocompleteInputSearchWrapperObj=$(".e-in-wrap.e-box.e-corner"),suggestionListWrapperObj=$("#user-group-search-input_suggestion");var e;"undefined"!=typeof isMobile&&isMobile||(void 0!==(e="undefined"!=typeof BoldBIDashboard?(dataManagerObj=BoldBIDashboard.DataManager({url:shareItemSuggestionListUrl}),query=BoldBIDashboard.Query().from("userMentionList").select("Name","Value"),autoCompleteControlEle.BoldBIDashboardAutocomplete({dataSource:dataManagerObj,query:query,fields:{text:"Name",key:"Value"},filterType:BoldBIDashboard.filterType.StartsWith,watermarkText:window.Server.App.Localization.UsergroupPlaceholder,width:"100%",multiSelectMode:BoldBIDashboard.MultiSelectMode.VisualMode,showPopupButton:!1,showEmptyResultText:!0,emptyResultText:window.Server.App.Localization.NoUserGroup,showRoundedCorner:!0,popupHeight:"120px",change:"onChange",open:"onSuggestionListOpen",close:"onSuggestionListClose",showLoadingIcon:!1,actionBegin:function(e){insertLoaderIcon(),splitUserGroupList(),e.model.query._params=[],e.model.query._params.push({key:"searchWord",value:autoCompleteInstance._preVal}),e.model.query._params.push({key:"UserEmailList",value:userEmailList}),e.model.query._params.push({key:"GroupIdList",value:groupIdList})},actionComplete:function(e){removeLoaderIcon(),setTimeout(function(){isNullOrWhitespace($("#user-group-search-input").val())&&autoCompleteControlEle.BoldBIDashboardAutocomplete("hide")},300)},template:getUserGroupProfilePicture("${Name}","${Value}","${Type}","${IdPReferenceId}")}),autoCompleteInstance=autoCompleteControlEle.data("BoldBIDashboardAutocomplete"),suggestionListWrapperObj.BoldBIDashboardScroller({height:120,width:"100%",scrollerSize:7,buttonSize:0,enableTouchScroll:!0}),suggestionListWrapperObj.BoldBIDashboardScroller("instance")):(dataManagerObj=ej.DataManager({url:shareItemSuggestionListUrl}),query=ej.Query().from("userMentionList").select("Name","Value"),autoCompleteControlEle.ejAutocomplete({dataSource:dataManagerObj,query:query,fields:{text:"Name",key:"Value"},filterType:ej.filterType.StartsWith,watermarkText:window.Server.App.Localization.UsergroupPlaceholder,width:"100%",multiSelectMode:ej.MultiSelectMode.VisualMode,showPopupButton:!1,showEmptyResultText:!0,emptyResultText:window.Server.App.Localization.NoUserGroup,showRoundedCorner:!0,popupHeight:"120px",change:"onChange",open:"onSuggestionListOpen",close:"onSuggestionListClose",showLoadingIcon:!1,actionBegin:function(e){insertLoaderIcon(),splitUserGroupList(),e.model.query._params=[],e.model.query._params.push({key:"searchWord",value:autoCompleteInstance._preVal}),e.model.query._params.push({key:"UserEmailList",value:userEmailList}),e.model.query._params.push({key:"GroupIdList",value:groupIdList})},actionComplete:function(e){removeLoaderIcon(),setTimeout(function(){$("#user-group-search-input_suggestion.custom-bootstrap-styles").find(".search-user-group-display-name-container").addClass("listing-page-dialog"),isNullOrWhitespace($("#user-group-search-input").val())&&autoCompleteControlEle.ejAutocomplete("hide")},300)},template:getUserGroupProfilePicture("${Name}","${Value}","${Type}","${IdPReferenceId}")}),autoCompleteInstance=autoCompleteControlEle.data("ejAutocomplete"),suggestionListWrapperObj.ejScroller({height:120,width:"100%",scrollerSize:7,buttonSize:0,enableTouchScroll:!0}),suggestionListWrapperObj.ejScroller("instance"))).model&&(e.model.height=120,e.refresh()),$("#user-group-search-input_suggestion .e-scrollbar").show(),isSharePermissionLoaded=!0)});