var InternalDataAlertExpressions,InternalDateRangePopup,DateFormatOption,TileType,LegendAlignment,LabelIntersectAction,FilterType,UrlLink,ColumnUrl,LinkType,UrlLinkType,WidgetLink,LinkedWidgetList,WidgetLinkType,DimensionConditionType,ConditionalFormatType,MeasureFormatType,ColorType,DatePickerDefaultDate,PoPProperties,RangeSliderProperties,RangeSliderType,RangeSliderOrientation,ListBoxProperties,GaugeSettings,GaugeTypes,RangeValueType,GaugeRangeSettings,GaugeFontSettings,GaugeDirection,ValuePointers,TargetPointers,TicksPosition,ValueLabelPosition,ScaleLabelPosition,RangeWidth,LabelType,PrimaryValueType,SparkLineSettings,SparkLineType,RadarPolarType,AxisRange,LineStyleInformation,LineStyles,ForecastSettings,ForecastProperties,ConfidenceBandStyle,ChartColumnSettinng,ValueLabelRotations,MapValueType,ValueLabelPlacement,EmptyPointMode,ValueLabelOverflowMode,LegendPositions,ChartSeriesShape,LegendTextOverFlow,ColorMappingType,LegendShape,SortSetting,ChartTypes,LabelOverFlowMode,DataLabel,CustomLegendType,ImageProperties,PaddingSettings,ImageMode,DataSource,ImgSource,ImageRotations,LinkProperties,LinkSetting,WidgetType,DefaultFormatType,ValueType,ButtonImageMode,ButtonImageRotations,InternalFilterConfiguration,InternalMasterSlaveFilterSerializationHelper,InternalLabelParameter,BoldBIDashboard,InternalQueryExpression,ExpAction,InternalExpressionParsor,ColorGradientMode,MeasureConditionType,DatePickerType,CustomRangeType,DrawType,LegendPosition,AxisType,ColorCustomizationType,BarShapeType,RangeNavigatorType,ImagePosition,FilterActionScheme,InternalDataAlertPanel=function(){function e(e){this.designerInstance=null,this.conditionNumbers=[],this.measureCollection=[],this.columnCollection=[],this.dimensionCollection=[],this.serverExpressions=[],this.scrollerSize={scrollSize:5,buttonSize:0},this.initialUI=new DataAlertArgs,this.localizationContent=null,this.customExpressionInstance=null,this.errorIcon=null,this.designerInstance=e,this.bbdesigner$=this.designerInstance.bbdesigner$,this.localizationContent=this.designerInstance.getLocalizationContent()}return e.prototype.renderDialogElements=function(e,t){BoldBIDashboard.isNullOrUndefined(t)||""===t?this.renderUIElements(e,t):this.getDataAlertAgrsModel(e,t)},e.prototype.renderUIElements=function(e){0<e.find("#"+this.designerInstance._id+"_designerDataAlert").length&&e.find("#"+this.designerInstance._id+"_designerDataAlert").remove();var t=BoldBIDashboard.buildTag("div.bbi-designer-data-alert boldbi-dashboarddesigner","",{},{id:this.designerInstance._id+"_designerDataAlert"});e.append(t),this.element=t,this.id=e.attr("id")+"_data_alert",this.daConditionalResult=this.bbdesigner$.extend(!0,{},new DaConditionalResult),this.dashboardWritePermission=!BoldBIDashboard.isNullOrUndefined(this.designerInstance.model.canEditDashboard)&&this.designerInstance.model.canEditDashboard,this.dateRangePopup=this.designerInstance.modules.dateRangePopup,this.multiSelectionComboBox=new BoldBIDashboard.DashboardDesignerUtility.MultiSelectionComboBox(this.designerInstance),this.renderContentDialog(),this.resizeDataAlertPanel(),this.unWireEvents(),this.wireEvents(),this.designerInstance._trigger("actionComplete",{eventType:"renderDataAlert"})},e.prototype.getDataAlertAgrsModel=function(e,t){this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.updatedataalertmodel,{action:BoldBIDashboard.DashboardUtil.DesignerAction.DataAlertModel,data:t},{fnction:this.bbdesigner$.proxy(this.updateDataAlertAgrsModel,this,e,t)},!0,!0)},e.prototype.updateDataAlertAgrsModel=function(e,t,i){var o=JSON.parse(t),o=this.getDataAlertModel(i.Data,o);this.updateUI(o),this.renderUIElements(e,t)},e.prototype.updateUI=function(e){BoldBIDashboard.isNullOrUndefined(e)||(this.initialUI={widgetId:e.widgetId,category:e.category,daConditionalResult:e.daConditionalResult,datasourceId:e.datasourceId,daExpressionCollection:e.daExpressionCollection},this.serverExpressions=this.initialUI.daExpressionCollection)},e.prototype.resizeDataAlertPanel=function(){var e=(this.bbdesigner$(window).width()-this.element.width())/2;this.element.css("left",e+"px")},e.prototype.wireEvents=function(){this.dialogDiv.on("click",".bbi-color-custom-add-condition-wrapper",this.bbdesigner$.proxy(this.addCondition,this)),this.dialogDiv.on("click",".bbi-color-dimension-where-condition",this.bbdesigner$.proxy(this.addWhereCondition,this)),this.dialogDiv.on("click",".bbi-data-alert-condition-row .bbi-data-dimension-condition-content .bbi-data-alert-dimension-add",this.bbdesigner$.proxy(this.addWhereAgainCondition,this)),this.dialogDiv.on("click",".bbi-data-alert-condition-row .bbi-data-dimension-condition-content .bbi-data-alert-dimension-remove",this.bbdesigner$.proxy(this.removedimensionWhereCondition,this)),this.dialogDiv.on("click",".bbi-color-global-where-condition",this.bbdesigner$.proxy(this.addGlobalWhereCondition,this)),this.dialogDiv.on("click",".bbi-custom-color-conditional-footer .bbi-data-add-global-conditions-parent .bbi-data-global-condition-content .bbi-data-alert-global-add",this.bbdesigner$.proxy(this.addGlobalWhereAgainCondition,this)),this.dialogDiv.on("click",".bbi-custom-color-conditional-footer .bbi-data-add-global-conditions-parent .bbi-data-global-condition-content .bbi-data-alert-global-remove",this.bbdesigner$.proxy(this.removeGlobaldimensionWhereCondition,this)),this.dialogDiv.on("click",".bbi-data-alert-measure-add-button",this.bbdesigner$.proxy(this.addComparisionDiv,this)),this.dialogDiv.on("click",".bbi-data-alert-right-measure-condition .bbi-measure-condition-remove",this.bbdesigner$.proxy(this.removeComparisionDiv,this)),this.dialogDiv.on("click",".bbi-data-alert-condition-row .bbi-data-alert-filter-div .bbi-data-alert-filter-remove",this.bbdesigner$.proxy(this.removeFilter,this)),this.bbdesigner$(window).on("resize",this.bbdesigner$.proxy(this.resizeDataAlertPanel,this))},e.prototype.unWireEvents=function(){this.dialogDiv.off("click",".bbi-color-custom-add-condition-wrapper",this.bbdesigner$.proxy(this.addCondition,this)),this.dialogDiv.off("click",".bbi-color-dimension-where-condition",this.bbdesigner$.proxy(this.addWhereCondition,this)),this.dialogDiv.off("click",".bbi-data-alert-condition-row .bbi-data-dimension-condition-content .bbi-data-alert-dimension-add",this.bbdesigner$.proxy(this.addWhereAgainCondition,this)),this.dialogDiv.off("click",".bbi-data-alert-condition-row .bbi-data-dimension-condition-content .bbi-data-alert-dimension-remove",this.bbdesigner$.proxy(this.removedimensionWhereCondition,this)),this.dialogDiv.off("click",".bbi-color-global-where-condition",this.bbdesigner$.proxy(this.addGlobalWhereCondition,this)),this.dialogDiv.off("click",".bbi-custom-color-conditional-footer .bbi-data-add-global-conditions-parent .bbi-data-global-condition-content .bbi-data-alert-global-add",this.bbdesigner$.proxy(this.addGlobalWhereAgainCondition,this)),this.dialogDiv.off("click",".bbi-custom-color-conditional-footer .bbi-data-add-global-conditions-parent .bbi-data-global-condition-content .bbi-data-alert-global-remove",this.bbdesigner$.proxy(this.removeGlobaldimensionWhereCondition,this)),this.dialogDiv.off("click",".bbi-data-alert-measure-add-button",this.bbdesigner$.proxy(this.addComparisionDiv,this)),this.dialogDiv.off("click",".bbi-data-alert-right-measure-condition .bbi-measure-condition-remove",this.bbdesigner$.proxy(this.removeComparisionDiv,this)),this.dialogDiv.off("click",".bbi-data-alert-condition-row .bbi-data-alert-filter-div .bbi-data-alert-filter-remove",this.bbdesigner$.proxy(this.removeFilter,this)),this.bbdesigner$(window).off("resize",this.bbdesigner$.proxy(this.resizeDataAlertPanel,this))},e.prototype.addWhereCondition=function(e){var t=parseInt(this.bbdesigner$(e.currentTarget).parents(".bbi-data-alert-condition-row").attr("data-condition-num"),10),i=this.bbdesigner$(e.currentTarget).parents(".bbi-data-alert-condition-row").find(".bbi-data-dimension-condition-content").length;this.renderDimensionConditionDiv(t,null,i),this.bbdesigner$(e.currentTarget).parents(".bbi-data-add-dimension-where").css("display","none"),this.refreshScroller()},e.prototype.addWhereAgainCondition=function(e){var t=parseInt(this.bbdesigner$(e.currentTarget).parents(".bbi-data-alert-condition-row").attr("data-condition-num"),10),e=this.bbdesigner$(e.currentTarget).parents(".bbi-data-alert-condition-row").find(".bbi-data-dimension-condition-content").length;this.renderDimensionConditionDiv(t,null,e),this.refreshScroller()},e.prototype.removedimensionWhereCondition=function(e){var t=this.bbdesigner$(e.currentTarget).parents(".bbi-data-alert-condition-row");1===t.find(".bbi-data-dimension-condition-content").length&&t.find(".bbi-data-add-dimension-where").css("display","block"),this.bbdesigner$(e.currentTarget).parent(".bbi-data-dimension-condition-content").remove(),this.refreshScroller()},e.prototype.addGlobalWhereCondition=function(e){var t=this.bbdesigner$(e.currentTarget).parents(".bbi-custom-color-conditional-footer").find(".bbi-data-global-condition-content").length;this.renderGlobalConditionDiv(null,t),this.bbdesigner$(e.currentTarget).css("display","none"),this.refreshScroller()},e.prototype.removeGlobaldimensionWhereCondition=function(e){var t;1===this.bbdesigner$(e.currentTarget).parents(".bbi-custom-color-conditional-footer").find(".bbi-data-global-condition-content").length&&((t=this.bbdesigner$(e.currentTarget).parents(".bbi-custom-color-conditional-footer")).find(".bbi-color-global-where-condition").css("display","block"),t.find(".bbi-data-add-global-conditions-parent").css("display","none")),this.bbdesigner$(e.currentTarget).parent(".bbi-data-global-condition-content").remove(),this.refreshScroller()},e.prototype.addGlobalWhereAgainCondition=function(e){e=this.bbdesigner$(e.currentTarget).parents(".bbi-data-add-global-conditions-parent").find(".bbi-data-global-condition-content").length;this.renderGlobalConditionDiv(null,e),this.refreshScroller()},e.prototype.addComparisionDiv=function(e){e=this.bbdesigner$(e.currentTarget);e.css("display","none"),e.parents(".bbi-data-alert-condition-row").find(".bbi-data-alert-right-measure-condition").css("display","flex")},e.prototype.removeComparisionDiv=function(e){e=this.bbdesigner$(e.currentTarget);e.parents(".bbi-data-measure-condition-content").find(".bbi-data-alert-measure-add-button").css("display","flex"),e.parents(".bbi-data-alert-right-measure-condition").css("display","none")},e.prototype.errorIndicatorVisiblity=function(e){e?(this.errorIcon.show(),this.dialogDiv.find(".bbi-color-custom-add-condition-wrapper").addClass("bbi-data-err")):(this.errorIcon.hide(),this.dialogDiv.find(".bbi-color-custom-add-condition-wrapper").removeClass("bbi-data-err"))},e.prototype.addCondition=function(){this.errorIndicatorVisiblity(!1);for(var e=0;-1<this.conditionNumbers.indexOf(++e););this.renderConditiondiv(this.conditionalRangeBodyElement,e,null),this.updateRangeBodyElements(),this.refreshScroller()},e.prototype.removeFilter=function(e){this.bbdesigner$(e.currentTarget).parents(".bbi-data-alert-condition-row").remove();e=this.bbdesigner$(e.currentTarget).parents(".bbi-data-alert-condition-row").attr("id")[this.bbdesigner$(e.currentTarget).parents(".bbi-data-alert-condition-row").attr("id").length-1],e=this.conditionNumbers.indexOf(parseInt(e));-1<e&&this.conditionNumbers.splice(e,1),this.refreshScroller()},e.prototype.refreshScroller=function(){var e=this.conditionalContent.find("#"+this.id+"_advance_settings_coditional_range_scroller").data("BoldBIDashboardScroller");BoldBIDashboard.isNullOrUndefined(e)||e.refresh()},e.prototype.expBtnClick=function(){var e={dataSourceFields:this.dimensionCollection,customExpressions:this.serverExpressions,targetMethod:"updateCustomExpressions",id:this.id,targetObj:this.element,dataAlert:this};this.designerInstance._trigger("actionBegin",{eventType:"beforeOpenDaExpressionWindow"}),this.customExpressionInstance=new BoldBIDashboard.DataAlert.CustomExpressions(e),this.customExpressionInstance.openExpression()},e.prototype.updateCustomExpressions=function(e){var o=this;this.serverExpressions=e,this.measureCollection=this.bbdesigner$.extend(!0,[],this.columnCollection),this.serverExpressions.forEach(function(t){var e,i;if(!(0<o.measureCollection.length&&0<o.measureCollection.filter(function(e){return e.Id===t.name}).length))for(o.measureCollection.push({Caption:t.name,Id:t.name,IsServerExpression:!0,IsAggregatedExpression:!1,IsExpression:!1,IsKpiColumn:!1,SummaryType:"",ExpressionText:t.expression}),e=o.dialogDiv.find(".bbi-data-columns.e-dropdownlist"),i=0;i<e.length;i++)o.bbdesigner$(e[i]).BoldBIDashboardDropDownList({dataSource:o.measureCollection})}),this.customExpressionInstance=null,this.designerInstance._trigger("actionComplete",{eventType:"afterCloseDaExpressionWindow"})},e.prototype.saveDataAlertFilter=function(){var e,t,i,o,a;if(BoldBIDashboard.isNullOrUndefined(this.widgetId))this.dialogDiv.find(".bbi-data-alert-widget-error-message-container").css("display","block");else{if(this.dialogDiv.find(".bbi-data-err").toggleClass("bbi-data-err",!1),this.daConditionalResult=new DaConditionalResult,0==(e=this.conditionalRangeBodyElement.find(".bbi-data-alert-condition-row")).length)this.errorIndicatorVisiblity(!0);else for(o=0;o<e.length;o++)t=this.bbdesigner$(e[o]),(t=this.getConditionalInfo(t)).FilterName="Filter: "+this.conditionNumbers[o],t.FilterId=BoldBIDashboard.getGuid("").toString(),this.daConditionalResult.ConditionalInformations.ConditionalInfoColleciton.push(t);for(i=this.conditionalRangeFooterElement.find(".bbi-data-add-global-conditions-parent").find(".bbi-data-global-condition-content"),o=0;o<i.length;o++)a=this.getGlobalFilterInfo(this.bbdesigner$(i[o])),this.daConditionalResult.ConditionalInformations.GlobalFilters.push(a);0<this.dialogDiv.find(".bbi-data-err").length||0===this.daConditionalResult.ConditionalInformations.ConditionalInfoColleciton.length||this.evaluateCondition()}},e.prototype.dimensionTargetSelectionChange=function(e,t,i){var o;this.clearErrorMsg(),BoldBIDashboard.isNullOrUndefined(i)||BoldBIDashboard.isNullOrUndefined(i.value)||(e=(t=t?e.parents(".bbi-data-global-condition-content"):e.parents(".bbi-data-dimension-condition-content")).find(".e-data-alert-dimension-field-dropdown").data("BoldBIDashboardDropDownList"),o=t.find(".e-data-alert-actual-dropdown-span"),BoldBIDashboard.isNullOrUndefined(e.model.selectedIndex)||"datetime"!==this.dimensionCollection[e.model.selectedIndex].Type.toLocaleLowerCase()?"CUSTOM"===i.value?(t.find(".bbi-data-alert-dimension-custom-value").css("display","block"),o.css("display","none")):(t.find(".bbi-data-alert-dimension-custom-value").css("display","none"),o.css("display","block")):(e=t.find(".e-data-alert-dimension-condition-dropdown").data("BoldBIDashboardDropDownList"),t.find(".bbi-data-alert-multi-selection-dropdown").css("display","block"),("CUSTOM"!==i.value||e.model.value===DateTimeFormat.Date.toString()||e.model.value===DateTimeFormat.RelativeDate.toString()?t.find(".bbi-data-alert-dimension-custom-value"):(t.find(".bbi-data-alert-dimension-custom-value").css("display","block"),t.find(".bbi-data-alert-multi-selection-dropdown"))).css("display","none"),o.css("display","none")))},e.prototype.targetTypeSelectionChange=function(e,t,i,o){BoldBIDashboard.isNullOrUndefined(o)||BoldBIDashboard.isNullOrUndefined(o.itemId)||(1===o.itemId?(i.parents(".bbi-data-alert-right-measure-condition").find(".bbi-measure-condition-custom").css("display","block"),this.bbdesigner$("#"+this.id+"_rightmeasure_"+e+"_wrapper").css("display","none")):(i.parents(".bbi-data-alert-right-measure-condition").find(".bbi-measure-condition-custom").css("display","none"),this.bbdesigner$("#"+this.id+"_rightmeasure_"+e+"_wrapper").css("display","block"))),this.clearErrorMsg()},e.prototype.renderContentDialog=function(){var e,t=BoldBIDashboard.buildTag("div.bbi-data-alert-dialog-container","",{},{id:this.id+"_data_alert_dialog_container"});this.element.append(t),this.dialogDiv=BoldBIDashboard.buildTag("div.bbi-userselect bbi-designer-data-alert-container","",{},{id:this.id}),t.append(this.dialogDiv),t=BoldBIDashboard.buildTag("div.bbi-userselect bbi-color-custom-advance-container bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{height:"485px"},{id:this.id+"_container"}),this.contentDiv=BoldBIDashboard.buildTag("div.bbi-color-custom-advance-content","",{},{id:this.id+"__content"}),this.headerContent=BoldBIDashboard.buildTag("div.bbi-custom-color-header",this.getHeaderDiv(),{},{id:this.id+"_header"}),e=BoldBIDashboard.buildTag("span.bbi-data-alert-widget-error-message-container","Please select a widget",{},{}),this.renderHeaderWidgetDropDown(this.headerContent.find(".e-data-header-widget-dropdown")),this.headerContent.find(".bbi-header-row-widget").append(e),this.renderHeaderCategoryDropdown(this.headerContent.find(".e-data-header-category-dropdown")),this.bodyContent=BoldBIDashboard.buildTag("div.bbi-advance-condition-container","",{},{id:this.id+"_body"}),this.conditionalContent=BoldBIDashboard.buildTag("div.bbi-color-conditional-UI","",{},{}),this.bodyContent.append(this.conditionalContent),this.contentDiv.append(this.headerContent,this.bodyContent),t.append(this.contentDiv),this.dialogDiv.append(t),this.ejWaitingIndicator=this.dialogDiv.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup bbi-designer-loader",template:this.designerInstance.getWaitingPopupTemplate()}).data("BoldBIDashboardWaitingPopup")},e.prototype.renderHeaderWidgetDropDown=function(e){e.BoldBIDashboardDropDownList({dataSource:this.updateWidgetDataManager(e),watermarkText:this.localizationContent.dataAlert.widgetText,enableFilterSearch:!0,fields:{text:"Title",value:"Id"},change:this.bbdesigner$.proxy(this.widgetSelectionChange,this),actionComplete:this.bbdesigner$.proxy(this.widgetFetchCompelete,this),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-data-alert-left-measure-dropdown-span",width:"200px",height:"28px"})},e.prototype.updateWidgetDataManager=function(e){var i=this,e=new BoldBIDashboard.Adaptor(null).extend({processQuery:this.bbdesigner$.proxy(this.processWidgetQuery,this,e),beforeSend:function(e,t){i.designerInstance.beforeSendRequestForDataManager("OnDemandDataAction",t)},processResponse:this.bbdesigner$.proxy(this.processWidgetResponse,this,e)});return new BoldBIDashboard.DataManager({url:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.dagetallwidgets,adaptor:new e,crossDomain:!0})},e.prototype.processWidgetQuery=function(e,t){e=e.parent().find(".e-select").addClass("e-atc").children();return e.addClass("e-load").addClass("e-input").addClass("e-icon"),e.css("background-position","center"),{url:t.dataSource.url,type:"POST",contentType:"application/json",data:""}},e.prototype.processWidgetResponse=function(e,t){if(e.parent().find(".e-select").children().removeClass("e-load").removeClass("e-input").removeClass("e-icon"),t.Status)return e=t.Data[0].WidgetInfoCollection,this.widgetInfoCollection=e;this.designerInstance.modules.util.alertDialog(this.localizationContent.dataAlert.dataAlertTitle,t.OuterMessage,IconType.errors,AlertType.Alert,!0,t.Message)},e.prototype.widgetFetchCompelete=function(){BoldBIDashboard.isNullOrUndefined(this.initialUI.widgetId)||this.headerContent.find(".e-data-header-widget-dropdown").data("BoldBIDashboardDropDownList").selectItemByValue(this.initialUI.widgetId)},e.prototype.renderHeaderCategoryDropdown=function(e){e.BoldBIDashboardDropDownList({dataSource:this.getCategoryDS(),fields:{id:"Id",text:"text",value:"value"},selectedIndex:0,change:this.bbdesigner$.proxy(this.categorySelectionChange,this),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-data-alert-left-measure-dropdown-span",width:"200px",height:"28px"})},e.prototype.getConditionalInfo=function(e){var t,i,o,a=new DaConditionalInfo,s=e.find(".e-data-alert-left-measure-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex;for(BoldBIDashboard.isNullOrUndefined(s)?e.find(".e-data-alert-left-measure-dropdown-span.e-in-wrap").addClass("bbi-data-err"):a.LeftOperand=this.measureCollection[s],a.ConditionJoinType=e.find(".e-data-alert-filter-join-dropdown").data("BoldBIDashboardDropDownList").model.value,e.find(".bbi-data-measure-condition-content").find(".bbi-data-alert-right-measure-condition").is(":visible")&&(s=e.find(".e-measure-condition-dropdown").data("BoldBIDashboardDropDownList").model.value,BoldBIDashboard.isNullOrUndefined(s)?e.find(".e-measure-condition-dropdown-span.e-in-wrap").addClass("bbi-data-err"):a.RelationalOperators=s,a.IsCustomValue=1===e.find(".e-measure-condition-type-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex,a.IsCustomValue?(a.CustomValue=e.find(".bbi-measure-condition-custom").val(),BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(a.CustomValue)&&e.find(".bbi-measure-condition-custom").addClass("bbi-data-err")):(s=e.find(".e-right-measure-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex,BoldBIDashboard.isNullOrUndefined(s)?e.find(".e-right-measure-dropdown-span.e-in-wrap").addClass("bbi-data-err"):a.RightOperand=this.measureCollection[s])),t=e.find(".bbi-data-add-dimension-conditions-parent").find(".bbi-data-dimension-condition-content"),i=0;i<t.length;i++)o=this.bbdesigner$(t[i]),o=this.getFilterInfo(o),a.Filters.push(o);return a},e.prototype.widgetSelectionChange=function(e){this.widgetId=this.widgetInfoCollection[e.model.selectedIndex].Id,this.datasourceId=this.widgetInfoCollection[e.model.selectedIndex].DatasourceId,this.conditionNumbers=[],this.conditionalContent.empty(),this.populateConditionalFilterContent();e=this.headerContent.find(".e-data-header-category-dropdown").data("BoldBIDashboardDropDownList");""!==e.getSelectedValue()&&(this.conditionCategory=e.getSelectedValue(),this.updateRangeBodyElements()),this.clearErrorMsg(),this.refreshScroller(),BoldBIDashboard.isNullOrUndefined(this.initialUI.category)||this.headerContent.find(".e-data-header-category-dropdown").data("BoldBIDashboardDropDownList").selectItemByValue(this.initialUI.category),this.dashboardWritePermission&&this.getDimensionFields()},e.prototype.categorySelectionChange=function(e){BoldBIDashboard.isNullOrUndefined(this.conditionalRangeBodyElement)||(this.conditionCategory=e.model.value,this.updateRangeBodyElements()),this.clearErrorMsg()},e.prototype.clearErrorMsg=function(){this.dialogDiv.find(".bbi-data-alert-widget-error-message-container").css("display","none"),this.bbdesigner$(".bbi-data-err").removeClass("bbi-data-err")},e.prototype.updateRangeBodyElements=function(){BoldBIDashboard.isNullOrUndefined(this.conditionCategory)||("ValueChanges"===this.conditionCategory?this.conditionalRangeBodyElement.find(".bbi-data-measure-condition-content").find(".bbi-data-alert-right-measure-condition").css("display","flex"):(this.conditionalRangeBodyElement.find(".bbi-data-measure-condition-content").find(".bbi-data-alert-right-measure-condition").css("display","none"),this.conditionalRangeBodyElement.find(".bbi-data-measure-condition-content").find(".bbi-data-alert-measure-add-button").css("display","none")))},e.prototype.getFilterInfo=function(e){var t=new DaFilter,i=e.find(".e-data-alert-dimension-field-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex,i=(BoldBIDashboard.isNullOrUndefined(i)?e.find(".e-data-alert-dimension-field-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.FieldInfo=this.dimensionCollection[i],e.find(".e-data-alert-dimension-condition-dropdown")),o=e.find(".e-data-alert-dimension-target-dropdown"),a=e.find(".e-data-alert-actual-dropdown"),s=e.find(".bbi-data-alert-dimension-custom-value");return t.FiltersJoinType=e.find(".e-data-alert-dimension-join-dropdown").data("BoldBIDashboardDropDownList").model.value,BoldBIDashboard.isNullOrUndefined(i.data("BoldBIDashboardDropDownList").model.selectedIndex)?e.find(".e-data-alert-dimension-condition-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.StringCondition.Conditions=i.data("BoldBIDashboardDropDownList").model.value,BoldBIDashboard.isNullOrUndefined(o.data("BoldBIDashboardDropDownList").model.selectedIndex)?e.find(".e-data-alert-dimension-target-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.StringCondition.ConditionType=o.data("BoldBIDashboardDropDownList").model.value,BoldBIDashboard.isNullOrUndefined(t.FieldInfo)||"datetime"!==t.FieldInfo.Type.toLowerCase()||BoldBIDashboard.isNullOrUndefined(t.StringCondition.ConditionType)?0===o.data("BoldBIDashboardDropDownList").model.selectedIndex?BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(a.data("BoldBIDashboardDropDownList").model.text)?e.find(".e-data-alert-actual-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.StringCondition.Values=a.data("BoldBIDashboardDropDownList").model.text.split(","):(t.StringCondition.Values.push(s.val()),""===s.val()&&s.addClass("bbi-data-err")):t=this.getDateFilterInfo(t,e),t},e.prototype.getDateFilterInfo=function(e,t){var i,o=t.find(".e-data-alert-dimension-target-dropdown"),a=t.find(".bbi-data-alert-dimension-custom-value"),s=t.find(".bbi-data-alert-multi-selection-dropdown"),t=t.find(".bbi-data-alert-customize-relative-button");return 0===o.data("BoldBIDashboardDropDownList").model.selectedIndex?e.StringCondition.Conditions===DateTimeFormat.Date.toString()?(i=this.dateRangePopup.getDateRangeValues(s.attr("id"))).IsFilterApplied?e.StringCondition.DateInfo=this.getDateInfo(e.StringCondition.Conditions,!0,!1,i):s.find(".list.bbi-popup-button").addClass("bbi-data-err"):e.StringCondition.Conditions===DateTimeFormat.RelativeDate.toString()?(i=t.data("relativeDateInfo"),BoldBIDashboard.isNullOrUndefined(i)?t.addClass("bbi-data-err"):e.StringCondition.DateInfo=this.getDateInfo(e.StringCondition.Conditions,!0,!0,i)):(i=this.multiSelectionComboBox.getPopupContainerInformation(s.attr("id")),e.StringCondition.DateInfo=this.getDateInfo(e.StringCondition.Conditions,!1,!1,i)):""===a.val()?a.addClass("bbi-data-err"):(e.StringCondition.DateInfo=this.getDateInfo(e.StringCondition.Conditions,!0,!1,null),e.StringCondition.DateInfo.FilterValues.push(a.val())),e},e.prototype.getDateInfo=function(e,t,i,o){return{DateFormat:e,IsCheckAll:!t&&o.IsCheckAll,IsInclude:!t&&(!!BoldBIDashboard.isNullOrUndefined(o)||o.IsInclude),FilterValues:t?[]:o.FilterValues,CheckAllState:!t&&o.CheckAllState,IsRelativeDate:i,RelativeDateFilter:i?o:null,DateFormatInfo:BoldBIDashboard.isNullOrUndefined(o)?null:{__type:"",DateFormatCondition:i?DateFormatOption.Range:o.DateFormatCondition,StartDate:o.StartDate,EndDate:o.EndDate}}},e.prototype.getGlobalFilterInfo=function(e){var t=new DaFilter,i=e.find(".e-data-alert-dimension-field-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex,i=(BoldBIDashboard.isNullOrUndefined(i)?e.find(".e-data-alert-dimension-field-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.FieldInfo=this.dimensionCollection[i],e.find(".e-data-alert-dimension-condition-dropdown")),o=e.find(".e-data-alert-dimension-target-dropdown"),a=e.find(".e-data-alert-actual-dropdown"),s=e.find(".bbi-data-alert-dimension-custom-value");return t.FiltersJoinType=e.find(".e-data-alert-dimension-join-dropdown").data("BoldBIDashboardDropDownList").model.value,BoldBIDashboard.isNullOrUndefined(i.data("BoldBIDashboardDropDownList").model.selectedIndex)?e.find(".e-data-alert-dimension-condition-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.StringCondition.Conditions=i.data("BoldBIDashboardDropDownList").model.value,BoldBIDashboard.isNullOrUndefined(o.data("BoldBIDashboardDropDownList").model.selectedIndex)?e.find(".e-data-alert-dimension-target-dropdown-span.e-in-wrap").addClass("bbi-data-err"):t.StringCondition.ConditionType=o.data("BoldBIDashboardDropDownList").model.value,BoldBIDashboard.isNullOrUndefined(t.FieldInfo)||"datetime"!==t.FieldInfo.Type.toLowerCase()||BoldBIDashboard.isNullOrUndefined(t.StringCondition.ConditionType)?0===e.find(".e-data-alert-dimension-target-dropdown").data("BoldBIDashboardDropDownList").model.selectedIndex?0<a.data("BoldBIDashboardDropDownList").model.selectedIndices.length?t.StringCondition.Values=a.data("BoldBIDashboardDropDownList").model.selectedIndices:e.find(".e-data-alert-actual-dropdown-span.e-in-wrap").addClass("bbi-data-err"):(t.StringCondition.Values[0]=s.val(),""===s.val()&&s.addClass("bbi-data-err")):t=this.getDateFilterInfo(t,e),t},e.prototype.populateConditionalFilterContent=function(){var e,t,i,o=BoldBIDashboard.buildTag("div.bbi-userselect bbi-dbrd-control bbi-dbrd-designer-scroller bbi-dbrd-designer-scroll-style-3","",{padding:"5px 0px 5px 12px"},{id:this.id+"_advance_settings_coditional_range_scroller"}),a=BoldBIDashboard.buildTag("div.bbi-userselect bbi-dbrd-control","",{},{id:this.id+"_advance_settings_coditional_range_scroller_child"});if(this.conditionalRangeBodyElement=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_conditional_range_body"}),this.errorIcon=BoldBIDashboard.buildTag("span.bbi-designer-error-icon bbi-designer-errorinfo e-error-tip bbi-dbrd-designer-hoverable","",{height:"13px",width:"13px",float:"right",padding:"6px",margin:"10px 18px 0px 0px",display:"none",position:"absolute",top:"99px",right:"172px"},{id:this.id+"_condition_error_info_icon","data-tooltip":this.localizationContent.dataAlert.conditionErrorText}),this.dashboardWritePermission&&((t=BoldBIDashboard.buildTag("div.bbi-dataalert-custom-expression",this.localizationContent.dataAlert.createExpression,{},{id:this.id+"_custom_expression"})).off("click",this.bbdesigner$.proxy(this.expBtnClick,this)),t.on("click",this.bbdesigner$.proxy(this.expBtnClick,this)),this.conditionalContent.append(t)),this.conditionalContent.append(this.errorIcon),this.conditionalRangeFooterElement=BoldBIDashboard.buildTag("div.bbi-custom-color-conditional-footer","",{margin:"10px 0px 10px 0px"},{id:this.id+"_conditional_range_footer"}),a.append(this.conditionalRangeBodyElement,this.conditionalRangeFooterElement),o.append(a),this.conditionalContent.append(o),!BoldBIDashboard.isNullOrUndefined(this.initialUI.daConditionalResult)&&0<this.initialUI.daConditionalResult.ConditionalInformations.ConditionalInfoColleciton.length)for(i=0;i<this.initialUI.daConditionalResult.ConditionalInformations.ConditionalInfoColleciton.length;i++)e=parseInt(this.initialUI.daConditionalResult.ConditionalInformations.ConditionalInfoColleciton[i].FilterName.slice(-1)),this.renderConditiondiv(this.conditionalRangeBodyElement,e,this.initialUI.daConditionalResult.ConditionalInformations.ConditionalInfoColleciton[i]);else this.renderConditiondiv(this.conditionalRangeBodyElement,1,null);if(0===this.conditionalRangeFooterElement.find(".bbi-color-custom-add-condition-wrap").length&&this.conditionalRangeFooterElement.append(this.renderAddConditionDiv()),t=BoldBIDashboard.buildTag("div.bbi-data-add-global-where",this.getGlobalWhereConditionContent(),{},{}),this.conditionalRangeFooterElement.append(t),a=BoldBIDashboard.buildTag("div.bbi-data-add-global-conditions-parent","",{display:"none"},{id:this.id+"_global_condition"}),this.conditionalRangeFooterElement.append(a),!BoldBIDashboard.isNullOrUndefined(this.initialUI.daConditionalResult)&&!BoldBIDashboard.isNullOrUndefined(this.initialUI.daConditionalResult.ConditionalInformations.GlobalFilters)&&0<this.initialUI.daConditionalResult.ConditionalInformations.GlobalFilters.length)for(i=0;i<this.initialUI.daConditionalResult.ConditionalInformations.GlobalFilters.length;i++)this.renderGlobalConditionDiv(this.initialUI.daConditionalResult.ConditionalInformations.GlobalFilters[i],i);this.conditionalContent.css("height","380px"),o.BoldBIDashboardScroller({height:"380px",scrollerSize:this.scrollerSize.scrollSize,enableTouchScroll:!0,autoHide:!0,buttonSize:this.scrollerSize.buttonSize})},e.prototype.renderAddConditionDiv=function(){return"<div class='bbi-color-custom-add-condition-wrapper'><div class='bbi-color-custom-add-condition'>"+this.localizationContent.colorCustomAdvanceLocale.addConditionText+"</div></div>"},e.prototype.renderConditiondiv=function(e,t,i){var o,a=BoldBIDashboard.buildTag("div.bbi-data-alert-condition-row","",{},{id:this.id+"_condition_"+t,"data-conditionId":this.id+"_condition_"+t,"data-condition-num":t}),s=BoldBIDashboard.buildTag("div.bbi-data-alert-join-div",this.getJoinTypeDiv(t),{},{}),n=BoldBIDashboard.buildTag("div.bbi-data-alert-filter-div",this.getFilterAreaContent(t),{},{}),r=BoldBIDashboard.buildTag("div.bbi-data-measure-condition-content",this.getMeasureConditionContent(t,i),{},{});if(a.append(s,n,r),a.off("keypress",".bbi-measure-condition-custom",this.bbdesigner$.proxy(this.validateNumber,this)),a.on("keypress",".bbi-measure-condition-custom",this.bbdesigner$.proxy(this.validateNumber,this)),this.renderFilterjoinTypeDropdown(s.find(".e-data-alert-filter-join-dropdown"),i),this.renderLeftMeasureDropDown(r.find(".e-data-alert-left-measure-dropdown"),t,i),this.renderRightMeasureDropdown(r.find(".e-right-measure-dropdown"),i),this.renderRelationalConditionDropDown(r.find(".e-measure-condition-dropdown"),t,i),this.renderTargetTypeDropDown(r.find(".e-measure-condition-type-dropdown"),t,i),n=BoldBIDashboard.buildTag("div.bbi-data-add-dimension-where",this.getDimensionWhereConditionContent(),{},{}),s=BoldBIDashboard.buildTag("div.bbi-data-add-dimension-conditions-parent","",{id:this.id+"_dimension_condition_"+t},{}),a.append(n,s),(BoldBIDashboard.isNullOrUndefined(i)?(r.find(".bbi-data-alert-measure-add-button").css("display","none"),r.find(".bbi-measure-condition-custom").css("display","none"),r.find(".e-right-measure-dropdown")):((i.IsCustomValue?r.find("#"+this.id+"_rightmeasure_"+t+"_wrapper"):r.find(".bbi-measure-condition-custom")).css("display","none"),r.find(".bbi-data-alert-measure-add-button"))).css("display","none"),e.append(a),!BoldBIDashboard.isNullOrUndefined(i))for(o=0;o<i.Filters.length;o++)this.renderDimensionConditionDiv(t,i.Filters[o],o);this.conditionNumbers.push(t)},e.prototype.renderLeftMeasureDropDown=function(e,t,i){e.BoldBIDashboardDropDownList({dataSource:this.updateMeasureFieldDataManager(),watermarkText:this.localizationContent.dataAlert.columnSelect,enableFilterSearch:!0,fields:{id:"Id",text:"Caption",value:"SummaryType"},actionComplete:this.bbdesigner$.proxy(this.measureFetchComplete,this,i,e,"Left"),change:this.bbdesigner$.proxy(this.clearErrorMsg,this),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-data-alert-left-measure-dropdown-span",width:"25%",height:"28px"})},e.prototype.updateMeasureFieldDataManager=function(){var i=this,e=new BoldBIDashboard.Adaptor(null).extend({processQuery:this.bbdesigner$.proxy(this.processQueryForMeasure,this),beforeSend:function(e,t){i.designerInstance.beforeSendRequestForDataManager("OnDemandDataAction",t)},processResponse:this.bbdesigner$.proxy(this.processResponseForMeasure,this)});return new BoldBIDashboard.DataManager({url:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.dagetmeasurefields,adaptor:new e,crossDomain:!0})},e.prototype.processQueryForMeasure=function(e){return{url:e.dataSource.url,type:"POST",contentType:"application/json",data:JSON.stringify({widgetId:this.widgetId,datasourceId:this.datasourceId})}},e.prototype.processResponseForMeasure=function(e){if(e.Status)return this.columnCollection=e.Data,e=this.updateServerExpressionIntoColumn(e.Data),this.measureCollection=e},e.prototype.updateServerExpressionIntoColumn=function(t){return 0<this.serverExpressions.length&&this.serverExpressions.forEach(function(e){t.push({Caption:e.name,Id:e.name,IsServerExpression:!0,IsAggregatedExpression:!1,IsExpression:!1,IsKpiColumn:!1,SummaryType:"",ExpressionText:e.expression})}),t},e.prototype.measureFetchComplete=function(i,o,a){BoldBIDashboard.isNullOrUndefined(i)||this.measureCollection.forEach(function(e,t){"Right"===a&&i.hasOwnProperty("RightOperand")&&e.Caption===i.RightOperand.Caption&&o.data("BoldBIDashboardDropDownList").selectItemsByIndices(t.toString()),"Left"===a&&e.Caption===i.LeftOperand.Caption&&o.data("BoldBIDashboardDropDownList").selectItemsByIndices(t.toString())})},e.prototype.renderFilterjoinTypeDropdown=function(e,t){e.BoldBIDashboardDropDownList({dataSource:this.getJoinRelationDS(),watermarkText:this.localizationContent.dataAlert.columnSelect,enableFilterSearch:!0,fields:{text:"text",value:"value"},value:BoldBIDashboard.isNullOrUndefined(t)?"AND":t.ConditionJoinType,change:this.bbdesigner$.proxy(this.clearErrorMsg,this),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control",width:"115px",height:"28px"})},e.prototype.renderRightMeasureDropdown=function(e,t){e.BoldBIDashboardDropDownList({dataSource:this.updateMeasureFieldDataManager(),watermarkText:this.localizationContent.dataAlert.columnSelect,enableFilterSearch:!0,fields:{id:"Id",text:"Caption",value:"SummaryType"},actionComplete:this.bbdesigner$.proxy(this.measureFetchComplete,this,t,e,"Right"),change:this.bbdesigner$.proxy(this.clearErrorMsg,this),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-right-measure-dropdown-span",width:"40%",height:"28px"})},e.prototype.renderRelationalConditionDropDown=function(e,t,i){e.BoldBIDashboardDropDownList({dataSource:this.getMeasureFiledTypeDS(),watermarkText:this.localizationContent.dataAlert.columnSelect,enableFilterSearch:!0,fields:{text:"text",value:"value"},value:BoldBIDashboard.isNullOrUndefined(i)?null:i.RelationalOperators,change:this.bbdesigner$.proxy(this.clearErrorMsg,this),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-measure-condition-dropdown-span",width:"25%",height:"28px"})},e.prototype.renderTargetTypeDropDown=function(e,t,i){e.BoldBIDashboardDropDownList({dataSource:["Condition","Custom"],watermarkText:this.localizationContent.dataAlert.selectTargetText,enableFilterSearch:!0,change:this.bbdesigner$.proxy(this.targetTypeSelectionChange,this,t,i,e),selectedIndex:!BoldBIDashboard.isNullOrUndefined(i)&&i.IsCustomValue?1:0,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-measure-condition-type-dropdown-span",width:"25%",height:"28px"})},e.prototype.getMeasureFiledTypeDS=function(){return[{text:"Greater than",value:"GREATERTHAN"},{text:"Greater than or Equal to",value:"GREATERTHANOREQUALS"},{text:"Less than",value:"LESSTHAN"},{text:"Less than or Equal to",value:"LESSTHANOREQUALS"},{text:"Equal to",value:"EQUALS"},{text:"Not equal to",value:"NOTEQUALS"}]},e.prototype.getJoinRelationDS=function(){return[{text:"AND",value:"AND"},{text:"OR",value:"OR"},{text:"AND NOT",value:"ANDNOT"},{text:"OR NOT",value:"ORNOT"}]},e.prototype.getDimensionTargetTypeDS=function(){return[{text:"Actual",value:"ACTUAL"},{text:"Custom",value:"CUSTOM"}]},e.prototype.getCategoryDS=function(){return[{text:"Value Changes",value:"ValueChanges"},{text:"Increases",value:"Increases"},{text:"Continuously Increases",value:"ContinousIncreases"},{text:"Decreases",value:"Decreases"},{text:"Continuously Decreases",value:"ContinousDecreases"}]},e.prototype.getDimensionRelationDS=function(){return[{text:"Contains",value:"CONTAINS"},{text:"Starts with",value:"STARTSWITH"},{text:"Ends with",value:"ENDSWITH"},{text:"Not Contains",value:"NOTCONTAINS"},{text:"Includes",value:"INCLUDE"},{text:"Excludes",value:"EXCLUDE"}]},e.prototype.getDateFormatsList=function(){var e=[];return e.push({value:DateTimeFormat.Year,text:this.localizationContent.dataconfiguration.menuItems.year}),e.push({value:DateTimeFormat.Quarter,text:this.localizationContent.dataconfiguration.menuItems.quarter}),e.push({value:DateTimeFormat.Month,text:this.localizationContent.dataconfiguration.menuItems.month}),e.push({value:DateTimeFormat.MonthYear,text:this.localizationContent.dataconfiguration.menuItems.monthYear}),e.push({value:DateTimeFormat.WeekYear,text:this.localizationContent.dataconfiguration.menuItems.weekYear}),e.push({value:DateTimeFormat.QuarterYear,text:this.localizationContent.dataconfiguration.menuItems.quarterYear}),e.push({value:DateTimeFormat.DayMonthYear,text:this.localizationContent.dataconfiguration.menuItems.dayMonthYear}),e.push({value:DateTimeFormat.MonthDayYear,text:this.localizationContent.dataconfiguration.menuItems.monthDayYear}),e.push({value:DateTimeFormat.DateHour,text:this.localizationContent.dataconfiguration.menuItems.dateHour}),e.push({value:DateTimeFormat.DayOfWeek,text:this.localizationContent.dataconfiguration.menuItems.dayOfWeek}),e.push({value:DateTimeFormat.WeekOfYear,text:this.localizationContent.dataconfiguration.menuItems.weekOfYear}),e.push({value:DateTimeFormat.Day,text:this.localizationContent.dataconfiguration.menuItems.day}),e.push({value:DateTimeFormat.Hour,text:this.localizationContent.dataconfiguration.menuItems.hours}),e.push({value:DateTimeFormat.Minute,text:this.localizationContent.dataconfiguration.menuItems.minutes}),e.push({value:DateTimeFormat.Second,text:this.localizationContent.dataconfiguration.menuItems.seconds}),e.push({value:DateTimeFormat.Time,text:this.localizationContent.dataconfiguration.menuItems.time}),e.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Date],text:this.localizationContent.dataconfiguration.menuItems.date}),e.push({value:DateTimeFormat.RelativeDate,text:this.localizationContent.dataconfiguration.menuItems.relativeDateOptionsDisplayName}),e},e.prototype.renderDimensionJoinTypeDropDown=function(e,t){e.BoldBIDashboardDropDownList({dataSource:["AND","OR"],watermarkText:this.localizationContent.dataAlert.columnSelect,enableFilterSearch:!0,fields:{id:"field",text:"field",value:"field"},change:this.bbdesigner$.proxy(this.clearErrorMsg,this),selectedIndex:BoldBIDashboard.isNullOrUndefined(t)||"AND"===t.FiltersJoinType?0:1,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control bbi-data-alert-dimension-join-dropdown-span",width:"115px",height:"28px"})},e.prototype.renderDimensionActualDataDropDown=function(e,t,i){void 0===i&&(i=!1),e.BoldBIDashboardDropDownList({dataSource:[],watermarkText:this.localizationContent.dataAlert.columnSelect,enableFilterSearch:!0,multiSelectMode:BoldBIDashboard.MultiSelectMode.Delimiter,change:this.bbdesigner$.proxy(this.clearErrorMsg,this),actionComplete:this.bbdesigner$.proxy(i?this.actualDataDropDownFetchForGlobalFilter:this.actualDataDropDownFetch,this,e,t),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-data-alert-actual-dropdown-span",width:"143px",height:"28px"})},e.prototype.actualDataDropDownFetch=function(e,t){BoldBIDashboard.isNullOrUndefined(t)||t.StringCondition.Values&&e.data("BoldBIDashboardDropDownList").selectItemByText(t.StringCondition.Values)},e.prototype.actualDataDropDownFetchForGlobalFilter=function(e,t){!BoldBIDashboard.isNullOrUndefined(t)&&t.StringCondition.Values&&"ACTUAL"===t.StringCondition.ConditionType&&e.data("BoldBIDashboardDropDownList").selectItemsByIndices(t.StringCondition.Values)},e.prototype.updateDataManagerForActualData=function(e,t){var i=this,e=new BoldBIDashboard.Adaptor(null).extend({processQuery:this.bbdesigner$.proxy(this.processQueryForActualData,this,e,t),beforeSend:function(e,t){i.designerInstance.beforeSendRequestForDataManager("OnDemandDataAction",t)},processResponse:this.bbdesigner$.proxy(this.processResponseForActualData,this,t)});return new BoldBIDashboard.DataManager({url:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.dagetvaluesforselectedcolumn,adaptor:new e,crossDomain:!0})},e.prototype.processQueryForActualData=function(e,t,i){t=t.find(".e-select").children();return t.addClass("e-load").addClass("e-input").addClass("e-icon"),t.css("background-position","center"),{url:i.dataSource.url,type:"POST",contentType:"application/json",data:JSON.stringify({datasourceId:this.datasourceId,datasourceFieldInfo:e})}},e.prototype.processResponseForActualData=function(e,t){return e.find(".e-select").children().removeClass("e-load").removeClass("e-input").removeClass("e-icon"),t.Status?JSON.parse(t.Data):void 0},e.prototype.renderDimensionFieldDropDown=function(e,t){e.BoldBIDashboardDropDownList({dataSource:this.updateDataManager(),watermarkText:this.localizationContent.dataAlert.columnSelect,enableFilterSearch:!0,fields:{text:"Caption"},change:this.bbdesigner$.proxy(this.dimensionFieldSelectionChange,this,e,t,!1),actionComplete:this.bbdesigner$.proxy(this.dimensionFieldComplete,this,e,t),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-data-alert-dimension-field-dropdown-span",width:"130px",height:"28px"})},e.prototype.dimensionFieldComplete=function(i,o){BoldBIDashboard.isNullOrUndefined(o)||this.dimensionCollection.forEach(function(e,t){e.Id===o.FieldInfo.Id&&i.data("BoldBIDashboardDropDownList").selectItemsByIndices(t.toString())})},e.prototype.renderGlobalFieldDropDown=function(e,t){e.BoldBIDashboardDropDownList({dataSource:this.updateDataManager(),watermarkText:this.localizationContent.dataAlert.columnSelect,enableFilterSearch:!0,fields:{text:"Caption"},change:this.bbdesigner$.proxy(this.dimensionFieldSelectionChange,this,e,t,!0),actionComplete:this.bbdesigner$.proxy(this.dimensionFieldComplete,this,e,t),cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-data-alert-dimension-field-dropdown-span",width:"130px",height:"28px"})},e.prototype.dimensionFieldSelectionChange=function(e,t,i,o){var i=i?e.parents(".bbi-data-global-condition-content"):e.parents(".bbi-data-dimension-condition-content"),e=i.find(".e-data-alert-dimension-condition-dropdown").data("BoldBIDashboardDropDownList"),a=i.find(".e-data-alert-dimension-target-dropdown").data("BoldBIDashboardDropDownList");"datetime"===this.dimensionCollection[o.model.selectedIndex].Type.toLowerCase()?(e.option("watermarkText",this.localizationContent.dataAlert.selectFormatText),e.option("dataSource",this.getDateFormatsList()),a.selectItemByIndex(0),BoldBIDashboard.isNullOrUndefined(t)?e.selectItemByIndex(0):e.selectItemByValue(t.StringCondition.Conditions),e.enable(),i.find(".e-data-alert-actual-dropdown-span").css("display","none"),i.find(".bbi-data-alert-multi-selection-dropdown").css("display",""),i.find(".bbi-multiselect-dropdown-item").attr("data-fieldText",this.dimensionCollection[o.model.selectedIndex].Caption),i.find(".bbi-multiselect-dropdown-item").attr("data-fieldValue",this.dimensionCollection[o.model.selectedIndex].Id)):("boolean"===this.dimensionCollection[o.model.selectedIndex].Type.toLowerCase()?(e.option("watermarkText",this.localizationContent.dataAlert.selectConditionText),a.enable(),e.disable(),i.find(".bbi-data-alert-multi-selection-dropdown").css("display","none"),i.find(".e-data-alert-actual-dropdown-span").css("display",""),e.selectItemByValue("INCLUDE")):(e.option("watermarkText",this.localizationContent.dataAlert.selectConditionText),e.option("dataSource",this.getDimensionRelationDS()),a.enable(),BoldBIDashboard.isNullOrUndefined(t)?e.selectItemByIndex(0):e.selectItemByValue(t.StringCondition.Conditions),e.enable(),i.find(".e-data-alert-actual-dropdown-span").css("display",this.updateDisplayofActualDropDown(t,a)?"none":""),i.find(".bbi-data-alert-multi-selection-dropdown").css("display","none"),i.find(".bbi-data-alert-customize-relative-button").css("display","none")),this.updateValuesDropDown(i,o.model.selectedIndex)),this.clearErrorMsg()},e.prototype.updateDisplayofActualDropDown=function(e,t){return BoldBIDashboard.isNullOrUndefined(e)?BoldBIDashboard.isNullOrUndefined(t.model.selectedIndex):"CUSTOM"===e.StringCondition.ConditionType},e.prototype.updateValuesDropDown=function(e,t){var e=e.find(".e-data-alert-actual-dropdown"),i=e.data("BoldBIDashboardDropDownList"),e=e.parent().addClass("e-atc");i.option("dataSource",[]),this.bbdesigner$.extend(i.option("dataSource",this.updateDataManagerForActualData(this.dimensionCollection[t],e)))},e.prototype.updateElementsOnDimensionChange=function(e,t,i,o){var t=t?e.parents(".bbi-data-global-condition-content"):e.parents(".bbi-data-dimension-condition-content"),e=t.find(".e-data-alert-dimension-field-dropdown").data("BoldBIDashboardDropDownList"),a=t.find(".e-data-alert-dimension-target-dropdown").data("BoldBIDashboardDropDownList");!BoldBIDashboard.isNullOrUndefined(e.model.selectedIndex)&&"datetime"===this.dimensionCollection[e.model.selectedIndex].Type.toLowerCase()?(this.updateTargetDropDownOnDate(i,a),t.find(".bbi-data-alert-multi-selection-dropdown").css("display",""),o.model.value===DateTimeFormat.Date?(t.find(".bbi-multiselect-dropdown-item").css("display","none"),t.find(".bbi-data-alert-customize-relative-button").css("display","none"),t.find(".list.bbi-popup-button").css("display",""),this.renderDatePopup(t,null,null,i)):o.model.value===DateTimeFormat.RelativeDate?(t.find(".list.bbi-popup-button").css("display","none"),t.find(".bbi-multiselect-dropdown-item").css("display","none"),t.find(".bbi-data-alert-customize-relative-button").css("display",""),this.updateRelativeDateInfo(t.find(".bbi-data-alert-customize-relative-button"),i)):(a.enable(),t.find(".bbi-data-alert-customize-relative-button").css("display","none"),t.find(".list.bbi-popup-button").css("display","none"),t.find(".bbi-multiselect-dropdown-item").attr("data-dateFormat",o.model.value),this.updateMultiSelectionComboBox(i,t))):a.enable(),this.clearErrorMsg()},e.prototype.updateMultiSelectionComboBox=function(e,t){var i,o=t.find(".bbi-data-alert-multi-selection-dropdown");BoldBIDashboard.isNullOrUndefined(e)?(t.find(".bbi-multiselect-dropdown-item").css("display",""),this.multiSelectionComboBox.populateMultiSelectionItem(o.attr("id"),null)):"CUSTOM"===e.StringCondition.ConditionType?(i=t.find(".bbi-data-alert-dimension-custom-value"),this.multiSelectionComboBox.populateMultiSelectionItem(o.attr("id"),null),t.find(".bbi-multiselect-dropdown-item").css("display","none"),i.css("display","block"),i.val(e.StringCondition.DateInfo.FilterValues[0])):(t.find(".bbi-multiselect-dropdown-item").css("display",""),this.multiSelectionComboBox.populateMultiSelectionItem(o.attr("id"),e.StringCondition.DateInfo))},e.prototype.updateTargetDropDownOnDate=function(e,t){BoldBIDashboard.isNullOrUndefined(e)?t.selectItemByIndex(0):t.selectItemByValue(e.StringCondition.ConditionType),t.disable()},e.prototype.updateRelativeDateInfo=function(e,t){BoldBIDashboard.isNullOrUndefined(t)?e.data("relativeDateInfo",null):e.data("relativeDateInfo",t.StringCondition.DateInfo.RelativeDateFilter)},e.prototype.renderRelativeDateDialog=function(e,t){var i,o,e=e.find(".e-data-alert-dimension-field-dropdown").data("BoldBIDashboardDropDownList"),a=this.bbdesigner$(t.currentTarget).data("relativeDateInfo");BoldBIDashboard.isNullOrUndefined(a)?(i=this.dimensionCollection[e.model.selectedIndex].Id,e=this.dimensionCollection[e.model.selectedIndex].Caption,(o=new RelativeDateFilterInfo).ColumnId=i,o.ColumnName=e):o=a,this.designerInstance._trigger("actionBegin",{eventType:"beforeOpenDaRelativeDateDialog"}),this.designerInstance.modules.relativeDateFilter.openRelativeDateFilter(this,"relativeDateFilterAction",o,null,null,t.currentTarget.id),this.updaterelativeDialogScreen()},e.prototype.updaterelativeDialogScreen=function(){var e=this.bbdesigner$("#"+this.designerInstance._id+"_relative_date_filter"),t=this.bbdesigner$("#"+this.designerInstance._id+"_relative_date_filter_overLay");e.BoldBIDashboardDialog({allowDraggable:!1}),e.BoldBIDashboardDialog({beforeClose:this.bbdesigner$.proxy(this.updateFooterButton,this)}),t.css("opacity","0")},e.prototype.updateFooterButton=function(){this.designerInstance._trigger("actionComplete",{eventType:"afterCloseDaRelativeDateDialog"})},e.prototype.relativeDateFilterAction=function(e,t,i,o){this.conditionalContent.find("#"+o).data("relativeDateInfo",e)},e.prototype.renderDatePopup=function(e,t,i,o){void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=null);var a=e.find(".bbi-data-alert-multi-selection-dropdown"),e=e.find(".e-data-alert-dimension-field-dropdown").data("BoldBIDashboardDropDownList"),o=BoldBIDashboard.isNullOrUndefined(o)?null:o.StringCondition.DateInfo.DateFormatInfo;t=BoldBIDashboard.isNullOrUndefined(t)?this.dimensionCollection[e.model.selectedIndex].Id:t,i=BoldBIDashboard.isNullOrUndefined(i)?this.dimensionCollection[e.model.selectedIndex].Caption:i,e=a.attr("id"),this.dateRangePopup.updateDateFormat(),0<a.find("#"+e+"_dimension_filter_date_dateRange_multidDrpDwn").length?this.dateRangePopup.populateDateRangeDrpDwn(e+"_dimension_filter_date",a,this.datasourceId,{Id:t,Name:i},o,"DimensionFilter",a.width()):this.dateRangePopup.renderDateRangeDrpDwn(e+"_dimension_filter_date",a,this.datasourceId,{Id:t,Name:i},o,"DimensionFilter",a.width()),a.find("#"+e+"_dimension_filter_date_dateRange_multidDrpDwn").css("display","block")},e.prototype.updateDataManager=function(){var i=this,e=new BoldBIDashboard.Adaptor(null).extend({processQuery:this.bbdesigner$.proxy(this.processQuery,this),beforeSend:function(e,t){i.designerInstance.beforeSendRequestForDataManager("OnDemandDataAction",t)},processResponse:this.bbdesigner$.proxy(this.processResponse,this)});return new BoldBIDashboard.DataManager({url:this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.dagetdatasourcefields,adaptor:new e,crossDomain:!0})},e.prototype.processQuery=function(e){return{url:e.dataSource.url,type:"POST",contentType:"application/json",data:JSON.stringify({datasourceId:this.datasourceId,widgetId:this.dashboardWritePermission?null:this.widgetId})}},e.prototype.processResponse=function(e){var t;if(e.Status)return t=e.Data.fieldValues,this.datasourcePublishId=e.Data.publishId,this.dimensionCollection=t},e.prototype.renderDimensionConditionDropDown=function(e,t,i){e.BoldBIDashboardDropDownList({dataSource:this.getDimensionRelationDS(),watermarkText:this.localizationContent.dataAlert.selectConditionText,enableFilterSearch:!0,fields:{text:"text",value:"value"},change:this.bbdesigner$.proxy(this.updateElementsOnDimensionChange,this,e,i,t),value:BoldBIDashboard.isNullOrUndefined(t)?null:t.StringCondition.Conditions,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-data-alert-dimension-condition-dropdown-span",width:"165px",height:"28px"})},e.prototype.renderDimensionTargetDropDown=function(e,t,i){e.BoldBIDashboardDropDownList({dataSource:this.getDimensionTargetTypeDS(),watermarkText:this.localizationContent.dataAlert.selectTargetText,enableFilterSearch:!0,change:this.bbdesigner$.proxy(this.dimensionTargetSelectionChange,this,e,i),selectedIndex:BoldBIDashboard.isNullOrUndefined(t)?null:"ACTUAL"===t.StringCondition.ConditionType?0:1,cssClass:"bbi-designer-ejwidgets bbi-designer-content-label bbi-dbrd-control e-data-alert-dimension-target-dropdown-span",width:"16.66667%",height:"28px"})},e.prototype.evaluateCondition=function(){this.ejWaitingIndicator.show(),this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.daevaluatecondition,{action:BoldBIDashboard.DashboardUtil.DesignerAction.DataAlertModel,data:JSON.stringify({widgetId:this.widgetId,datasourceId:this.datasourceId,conditionalResult:this.daConditionalResult,conditionCategory:this.conditionCategory})},{fnction:this.bbdesigner$.proxy(this.updateEvalauationResult,this)},!0,!0)},e.prototype.updateEvalauationResult=function(e){this.ejWaitingIndicator.hide(),e.Status?(this.daConditionalResult.OverallResult=!0,this.designerInstance._trigger("afterEvaluateDataAlert",{IsValidModel:this.daConditionalResult.OverallResult,DaJsonString:JSON.stringify(this.getDataAlertModel(e.Data,null)),Filters:e.Data.Filters,DataSourceId:this.datasourcePublishId})):(this.daConditionalResult.OverallResult=!1,this.designerInstance.modules.util.alertDialog("Data Alert",e.Message,IconType.errors,AlertType.Alert,!1,""))},e.prototype.getDataAlertModel=function(e,t){var o=this,a=e.DaColumnConditionInfo,i=e.DaGlobalConditionInfo;return(t=BoldBIDashboard.isNullOrUndefined(t)?this.generateDataAlertArgsModel():t).daConditionalResult.ConditionalInformations.ConditionalInfoColleciton.forEach(function(e,i){e.Filters.forEach(function(e,t){o.updateValue(e,a[i].Filters[t])})}),0<i.length&&t.daConditionalResult.ConditionalInformations.GlobalFilters.forEach(function(e,t){o.updateValue(e,i[t])}),t},e.prototype.updateValue=function(e,t){return BoldBIDashboard.isNullOrUndefined(e.StringCondition.DateInfo)||BoldBIDashboard.isNullOrUndefined(t.StringCondition.DateInfo.DateFormatInfo)||(e.StringCondition.DateInfo.DateFormatInfo.StartDate=t.StringCondition.DateInfo.DateFormatInfo.StartDate,e.StringCondition.DateInfo.DateFormatInfo.EndDate=t.StringCondition.DateInfo.DateFormatInfo.EndDate,e.StringCondition.DateInfo.IsRelativeDate&&(e.StringCondition.DateInfo.RelativeDateFilter.AnchorDate=t.StringCondition.DateInfo.RelativeDateFilter.AnchorDate)),e},e.prototype.getMeasureFields=function(){this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.dagetmeasurefields,{action:BoldBIDashboard.DashboardUtil.DesignerAction.DataAlertModel,data:JSON.stringify({widgetId:this.widgetId,datasourceId:this.datasourceId})},{fnction:this.bbdesigner$.proxy(this.updateMeasureCollection,this)},!0,!0)},e.prototype.updateMeasureCollection=function(e){e.Status&&(this.measureCollection=e.Data)},e.prototype.getDimensionFields=function(){this.designerInstance.modules.util.doAjaxPost("POST",this.designerInstance.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.dagetdatasourcefields,{action:BoldBIDashboard.DashboardUtil.DesignerAction.DataAlertModel,data:JSON.stringify({datasourceId:this.datasourceId})},{fnction:this.bbdesigner$.proxy(this.updateDimensionCollection,this)},!0,!0)},e.prototype.updateDimensionCollection=function(e){e.Status&&(this.dimensionCollection=e.Data.fieldValues,this.datasourcePublishId=e.Data.publishId)},e.prototype.getMeasureConditionContent=function(e,t){t=!BoldBIDashboard.isNullOrUndefined(t)&&t.IsCustomValue?t.CustomValue:"";return"<input id="+this.id+"_condition_type_drpdwn_"+e+" data-condition-number="+e+" type ='text' class= 'e-data-alert-left-measure-dropdown bbi-data-columns'/></input><input id="+this.id+"_add_target_button_"+e+" type='button' value='Add Comparison Target' class = 'bbi-dbrd-btn-small bbi-dbrd-btn-primary bbi-data-alert-measure-add-button'></input><div class = 'bbi-data-alert-right-measure-condition'><input id="+this.id+"_conditiontype_"+e+" class='e-measure-condition-dropdown'></input><input id="+this.id+"_type_"+e+" class='e-measure-condition-type-dropdown'></input><input id="+this.id+"_customvalue_"+e+" value='"+t+"'  class='bbi-measure-condition-custom e-textbox'></input><input id="+this.id+"_rightmeasure_"+e+" class='e-right-measure-dropdown bbi-data-columns'></input><span class = 'bbi-measure-condition-remove'>&nbsp;</span></div>"},e.prototype.getConditionLabelName=function(e){return"Filter :  "+e},e.prototype.getFilterAreaContent=function(e){return"<span class = 'bbi-data-alert-filter-text'>"+this.getConditionLabelName(e)+"</span><span class = 'bbi-data-alert-filter-remove'>&nbsp;</span>"},e.prototype.getJoinTypeDiv=function(e){return"<input id="+this.id+e+"_filter_jointype_drpdwn_ data-condition-number="+e+" type ='text' class= 'e-data-alert-filter-join-dropdown'></input>"},e.prototype.getDimensionWhereConditionContent=function(){return"<div class='bbi-color-dimension-where-condition'>"+this.localizationContent.dataAlert.addWhereCondition+"</div>"},e.prototype.renderDimensionConditionDiv=function(e,t,i){var o=BoldBIDashboard.buildTag("div.bbi-data-dimension-condition-content",this.getDimensionConditionDiv(e,t,i),{"data-filter-number":i,"data-condition-number":e},{}),a=o.find(".bbi-data-alert-multi-selection-dropdown");this.renderDimensionJoinTypeDropDown(o.find(".e-data-alert-dimension-join-dropdown"),t),this.renderDimensionActualDataDropDown(o.find(".e-data-alert-actual-dropdown"),t),this.renderDimensionFieldDropDown(o.find(".e-data-alert-dimension-field-dropdown"),t),this.renderDimensionConditionDropDown(o.find(".e-data-alert-dimension-condition-dropdown"),t,!1),this.renderDimensionTargetDropDown(o.find(".e-data-alert-dimension-target-dropdown"),t,!1),this.multiSelectionComboBox.renderMultiSelectionComboBox(a,a.attr("id"),this.datasourceId),this.bbdesigner$("#"+this.id+"_condition_"+e).find(".bbi-data-add-dimension-conditions-parent").append(o),o.find(".bbi-data-alert-customize-relative-button").off("click",this.bbdesigner$.proxy(this.renderRelativeDateDialog,this,o)),o.find(".bbi-data-alert-customize-relative-button").on("click",this.bbdesigner$.proxy(this.renderRelativeDateDialog,this,o)),BoldBIDashboard.isNullOrUndefined(t)?(this.bbdesigner$("#"+this.id+e+"_dimension_actual_drpdwn_"+i+"_wrapper").css("display","none"),o.find(".bbi-data-alert-dimension-custom-value").css("display","none"),o.find(".bbi-data-alert-multi-selection-dropdown").css("display","none"),o.find(".bbi-data-alert-customize-relative-button").css("display","none")):(("ACTUAL"===t.StringCondition.ConditionType?o.find(".bbi-data-alert-dimension-custom-value"):this.bbdesigner$("#"+this.id+e+"_dimension_actual_drpdwn_"+i+"_wrapper")).css("display","none"),this.bbdesigner$(".bbi-data-add-dimension-where").css("display","none"),this.refreshScroller())},e.prototype.getDimensionConditionDiv=function(e,t,i){var o="";return BoldBIDashboard.isNullOrUndefined(t)||(o="ACTUAL"===t.StringCondition.ConditionType?"":t.StringCondition.Values.toString()),"<div id="+this.id+e+"_dimension-remove_"+i+" data-condition-number="+e+" class= 'bbi-data-alert-dimension-remove'></div><input id="+this.id+e+"_dimension_jointype_drpdwn_"+i+" data-condition-number="+e+" type ='text' class= 'e-data-alert-dimension-join-dropdown'></input><div id="+this.id+e+"_dimension-where-text_"+i+" data-condition-number="+e+" class= 'bbi-data-alert-dimension-where'>Where</div><input id="+this.id+e+"_dimension_field_drpdwn_"+i+" data-condition-number="+e+" type ='text' class= 'e-data-alert-dimension-field-dropdown'></input><input id="+this.id+e+"_dimension_condition_drpdwn_"+i+" data-condition-number="+e+" type ='text' class= 'e-data-alert-dimension-condition-dropdown'></input><input id="+this.id+e+"_dimension_target_drpdwn_"+i+" data-condition-number="+e+" type ='text' class= 'e-data-alert-dimension-target-dropdown'></input><input id="+this.id+e+"_dimension_custom_value_"+i+" data-condition-number="+e+" type ='text' value ='"+o+"' class= 'bbi-data-alert-dimension-custom-value e-textbox'></input><input id="+this.id+e+"_dimension_actual_drpdwn_"+i+" data-condition-number="+e+" type ='text' class= 'e-data-alert-actual-dropdown'></input><div id="+this.id+e+"_dimension_multi_selection_drpdwn_"+i+" data-condition-number="+e+" type ='text' class= 'bbi-data-alert-multi-selection-dropdown' style='width: 150px'><button id="+this.id+e+"_dimension_customize_relative_button_"+i+" data-condition-number="+e+" type ='button' class= 'bbi-data-alert-customize-relative-button bbi-dbrd-btn-small bbi-dbrd-btn-secondary'>Customize</button></div><div id="+this.id+e+"_dimension-add_"+i+" data-condition-number="+e+" class= 'bbi-data-alert-dimension-add'></div>"},e.prototype.getGlobalWhereConditionContent=function(){return"<div class='bbi-color-global-where-condition'>"+this.localizationContent.dataAlert.addGlobalWhereCondition+"</div>"},e.prototype.renderGlobalConditionDiv=function(e,t){var i,o=BoldBIDashboard.buildTag("div.bbi-data-global-condition-content",this.getGlobalConditionDiv(e,t),{"data-filter-number":t},{});this.bbdesigner$("#"+this.id+"_global_condition").css("display","block").append(o),i=o.find(".bbi-data-alert-multi-selection-dropdown"),this.renderDimensionJoinTypeDropDown(o.find(".e-data-alert-dimension-join-dropdown"),e),this.renderGlobalFieldDropDown(o.find(".e-data-alert-dimension-field-dropdown"),e),this.renderDimensionConditionDropDown(o.find(".e-data-alert-dimension-condition-dropdown"),e,!0),this.renderDimensionTargetDropDown(o.find(".e-data-alert-dimension-target-dropdown"),e,!0),this.renderDimensionActualDataDropDown(o.find(".e-data-alert-actual-dropdown"),e,!0),this.multiSelectionComboBox.renderMultiSelectionComboBox(i,i.attr("id"),this.datasourceId),o.find(".bbi-data-alert-customize-relative-button").off("click",this.bbdesigner$.proxy(this.renderRelativeDateDialog,this,o)),o.find(".bbi-data-alert-customize-relative-button").on("click",this.bbdesigner$.proxy(this.renderRelativeDateDialog,this,o)),BoldBIDashboard.isNullOrUndefined(e)?(this.bbdesigner$("#"+this.id+"_dimension_actual_drpdwn_"+t+"_wrapper").css("display","none"),o.find(".bbi-data-alert-dimension-custom-value").css("display","none"),o.find(".bbi-data-alert-multi-selection-dropdown").css("display","none"),o.find(".bbi-data-alert-customize-relative-button").css("display","none")):(("ACTUAL"===e.StringCondition.ConditionType?o.find(".bbi-data-alert-dimension-custom-value"):this.bbdesigner$("#"+this.id+"_dimension_actual_drpdwn_"+t+"_wrapper")).css("display","none"),this.bbdesigner$(".bbi-data-add-global-where").css("display","none"),this.refreshScroller())},e.prototype.getHeaderDiv=function(){return"<div class = 'e-header-row bbi-header-row-widget'> <div class = 'e-header-row-label'>"+this.localizationContent.dataAlert.widgetTitle+" </div><input id="+this.id+"_header_widget_drpdwn type ='text' class= 'e-data-header-widget-dropdown bbi-data-header-header-dropdown'></input></div><div class = 'e-header-row'> <div class = 'e-header-row-label'>"+this.localizationContent.dataAlert.conditionTitle+" </div><input id="+this.id+"_header_category_drpdwn type ='text' class= 'e-data-header-category-dropdown bbi-data-header-header-dropdown'></input></div>"},e.prototype.getGlobalConditionDiv=function(e,t){var i="";return BoldBIDashboard.isNullOrUndefined(e)||(i="ACTUAL"===e.StringCondition.ConditionType?"":e.StringCondition.Values.toString()),"<div id="+this.id+"_dimension-remove_"+t+" class= 'bbi-data-alert-global-remove'></div><input id="+this.id+"_dimension_jointype_drpdwn_"+t+" type ='text' class= 'e-data-alert-dimension-join-dropdown'></input><div id="+this.id+"_dimension-where-text_"+t+" class= 'bbi-data-alert-global-where'>Where</div><input id="+this.id+"_dimension_field_drpdwn_"+t+" type ='text' class= 'e-data-alert-dimension-field-dropdown'></input><input id="+this.id+"_dimension_condition_drpdwn_"+t+" type ='text' class= 'e-data-alert-dimension-condition-dropdown'></input><input id="+this.id+"_dimension_target_drpdwn_"+t+" type ='text' class= 'e-data-alert-dimension-target-dropdown'></input><input id="+this.id+"_dimension_custom_value_"+t+" type ='text' value ='"+i+"' class= 'bbi-data-alert-dimension-custom-value e-textbox'></input><input id="+this.id+"_dimension_actual_drpdwn_"+t+" type ='text' class= 'e-data-alert-actual-dropdown'></input><div id="+this.id+"_dimension_multi_selection_drpdwn_"+t+" data-condition-number= type ='text' class= 'bbi-data-alert-multi-selection-dropdown' style='width: 150px'><button id="+this.id+"_dimension_customize_relative_button_"+t+" data-condition-number= type ='button' class= 'bbi-data-alert-customize-relative-button bbi-dbrd-btn-small bbi-dbrd-btn-secondary'>Customize</button></div><div id="+this.id+"_dimension-add_"+t+" class= 'bbi-data-alert-global-add'></div>"},e.prototype.validateNumber=function(e){e=e.keyCode;if(8!==e&&31<e&&(e<48||57<e)&&45!==e&&46!==e)return!1},e.prototype.generateDataAlertArgsModel=function(){var e=new DataAlertArgs;return e.category=this.conditionCategory,e.daConditionalResult=this.daConditionalResult,e.datasourceId=this.datasourceId,e.widgetId=this.widgetId,e.daExpressionCollection=this.serverExpressions,e},e}(),__extends=(window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.DataAlert",InternalDataAlertPanel,window),InternalDataAlertExpressions=function(){function e(e){this.id=null,this.oldVal="",this.oldExpName="",this.isAddButtonEnabled=!1,this.customExpressions=[],this.provider="",this.listContainer=null,this.expLiTag=null,this.bodyContainer=null,this.textBox=null,this.textArea=null,this.expressionContainer=null,this.addBtnTag=null,this.saveBtnTag=null,this.footerTag=null,this.expWaterMark="",this.successMessageLocale="",this.nameWaterMark="Expression Name",this.isAdd=!1,this.ejFunctionDropdown=null,this.ejColumnDropdown=null,this.ejFunctionList=null,this.ejColumnList=null,this.ejIndicator=null,this.scrollerSize={scrollSize:5,buttonSize:0},this.dataSourceFields=[],this.locale=null,this.aggregationList=["SUM","COUNT","AVG","MAX","MIN","VAR","STDEV","COUNTD","INDEX","TOTAL","TOTALPERCENTAGE","SUMD","AVGD","RUNNINGAVG","RUNNINGCOUNT","RUNNINGSUM","RUNNINGMAX","RUNNINGMIN","NULL"],this.rowExpression=["RUNNINGAVG","RUNNINGCOUNT","RUNNINGSUM","RUNNINGMAX","RUNNINGMIN"],this.dashboardDesigner=e.dataAlert.designerInstance,this.bbdesigner$=BoldBIDashboardDesigner.bbdesignerstatic$,this.targetInstance=e.targetObj,this.targetMethod=e.targetMethod,this.serviceUrl=e.dataAlert.designerInstance.model.serviceUrl,this.customExpressions=e.customExpressions,this.dataSourceFields=e.dataSourceFields,this.dataAlert=e.dataAlert,this.id=e.id+"_expression",this.provider="SQL",this.locale=e.dataAlert.designerInstance.getLocalizationContent(),this.expWaterMark=this.locale.queryExpressionDialog.QueryExpression,this.successMessageLocale=this.locale.queryExpressionDialog.successMessageNotification,this.renderQueryExpression()}return e.prototype.renderQueryExpression=function(){var e=BoldBIDashboard.buildTag("div.bbi-userselect bbi-data-alert-expression-header-container","",{},{id:this.id+"_exp_designer"}),t=BoldBIDashboard.buildTag("div","",{float:"left"},{id:this.id+"_exp_designer_div"}),i=(e.append(t),BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-table","",{},{unselectable:"on"})),o=BoldBIDashboard.buildTag("tr","",{}),a=BoldBIDashboard.buildTag("td.bbi-querydesigner-exp-separator bbi-querydesigner-exp-td","",{"font-size":"13px"},{}),s=BoldBIDashboard.buildTag("td","",{"margin-left":"12px"},{}),i=(t.append(i),i.append(o),o.append(a).append(s),BoldBIDashboard.buildTag("div","",{width:"175px",height:"490px"})),o=this.expressionContainer=BoldBIDashboard.buildTag("div","",{"margin-left":"10px"},{id:this.id+"_exp_designer_container_exp"}),n=BoldBIDashboard.buildTag("div","",{width:"175px",height:"40px"}),s=(a.append(i),s.append(o),a.append(n),BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-table","",{width:"820px","padding-left":"8px"},{unselectable:"on"})),a=BoldBIDashboard.buildTag("tr","",{width:"590px"}),n=BoldBIDashboard.buildTag("td","",{}),r=BoldBIDashboard.buildTag("label.bbi-designer-title-label",this.locale.expressionDesigner.nameText,{},{id:this.id+"_exp_designer_exp_name"}),l=BoldBIDashboard.buildTag("tr","",{width:"590px"}),d=BoldBIDashboard.buildTag("table","",{}),h=BoldBIDashboard.buildTag("tr","",{}),p=BoldBIDashboard.buildTag("td","",{}),c=this.textBox=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-textbox","",{height:"30px",width:"240px","margin-top":"2px","margin-bottom":"5px"},{type:"text",id:this.id+"_exp_designer_textBox",spellcheck:"false"}),r=(n.append(r),a.append(n),p.append(c),h.append(p),d.append(h),l.append(d),BoldBIDashboard.buildTag("tr","",{height:"150px",width:"590px"})),n=BoldBIDashboard.buildTag("tr","",{width:"590px",height:"30px"}),p=BoldBIDashboard.buildTag("table","",{}),d=BoldBIDashboard.buildTag("tr","",{}),u=(p.append(d),g=BoldBIDashboard.buildTag("td","",{}),u=BoldBIDashboard.buildTag("label.bbi-designer-title-label",this.locale.expressionDesigner.expressionText,{display:"block","margin-top":"14px"},{id:this.id+"_exp_designer_trgt_name"}),g.append(u),d.append(g),n.append(p),BoldBIDashboard.buildTag("td","",{"font-size":"13px"},{})),g=this.textArea=BoldBIDashboard.buildTag("textarea.e-textarea bbi-designer-textarea","",{height:"130px",width:"785px",overflow:"auto"},{id:this.id+"_exp_designer_textarea",spellcheck:"false"}),p=BoldBIDashboard.buildTag("tr","",{height:"300px",width:"590px"}),b=BoldBIDashboard.buildTag("td","",{display:"block"}),m=BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-innertable","",{height:"250px",width:"590px","margin-top":"6px","margin-bottom":"2px"}),f=BoldBIDashboard.buildTag("tr","",{height:"35px",width:"590px"}),D=BoldBIDashboard.buildTag("td","",{}),k=BoldBIDashboard.buildTag("span.bbi-designer-title-label",this.locale.expressionDesigner.functionsText,{},{}),x=BoldBIDashboard.buildTag("div","",{"margin-top":"6px",width:"210px"},{}),I=BoldBIDashboard.buildTag("input","",{"margin-top":"5px"},{id:this.id+"_exp_designer_options"}),U=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_exp_designer_option_div"}),B=BoldBIDashboard.buildTag("td","",{}),C=BoldBIDashboard.buildTag("div","",{height:"25px",margin:"25px 10px 0px -3px","border-left":"1px solid var(--querydesigner-primary-border-color)"},{}),C=(B.append(C),BoldBIDashboard.buildTag("td","",{})),O=BoldBIDashboard.buildTag("span.bbi-designer-title-label",this.locale.expressionDesigner.columnSettingsText,{"margin-left":"6px"},{}),y=BoldBIDashboard.buildTag("div","",{"margin-top":"6px",width:"199px","margin-left":"6px"},{}),S=BoldBIDashboard.buildTag("input","",{height:"35px",width:"190px"},{id:this.id+"_exp_designer_data"}),R=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_exp_designer_data_div"}),W=BoldBIDashboard.buildTag("td","",{height:"35px"}),T=BoldBIDashboard.buildTag("tr","",{width:"590px"}),v=BoldBIDashboard.buildTag("td","",{width:"210px"},{}),w=BoldBIDashboard.buildTag("td","",{}),_=BoldBIDashboard.buildTag("div","",{height:"200px",margin:"-10px 10px 0px -3px","border-left":"1px solid var(--querydesigner-primary-border-color)"},{}),_=(w.append(_),BoldBIDashboard.buildTag("td","",{width:"205px"},{})),N=BoldBIDashboard.buildTag("td","",{height:"190px"}),V=this.functionNoDataContainer=BoldBIDashboard.buildTag("div.bbi-querydesigner-function-nodata bbi-designer-empty-msg","",{width:"188px",height:"135px"},{id:this.id+"_function_nodata_container"}).text(this.locale.queryExpressionDialog.NoResultFound),E=BoldBIDashboard.buildTag("div.bbi-querydesigner-function-search","",{width:"188px"},{id:this.id+"_div_functions_search"}),A=BoldBIDashboard.buildTag("div.e-option-list","",{width:"205px","margin-top":"1px"},{}),z=this.columnNoDataContainer=BoldBIDashboard.buildTag("div.bbi-querydesigner-column-nodata bbi-designer-empty-msg","",{width:"188px",height:"135px"},{id:this.id+"_column_nodata_container"}).text(this.locale.queryExpressionDialog.NoResultFound),H=BoldBIDashboard.buildTag("div.bbi-querydesigner-column-search","",{width:"188px"},{id:this.id+"_div_columnsettings_search"}),F=BoldBIDashboard.buildTag("ul","",{},{id:this.id+"_exp_designer_option_list"}),$=BoldBIDashboard.buildTag("div.e-data-list","",{width:"199px","margin-left":"6px","margin-top":"1px"},{}),M=BoldBIDashboard.buildTag("ul","",{},{id:this.id+"_exp_designer_data_list"}),j=BoldBIDashboard.buildTag("div.bbi-designer-cursor","",{height:"200px",width:"355px","margin-right":"10px"},{id:this.id+"_cat_desc"}),q=BoldBIDashboard.buildTag("div","",{height:"5px"},{}),G=BoldBIDashboard.buildTag("div.bbi-designer-title-label","",{height:"auto"},{id:this.id+"_exp_designer_desc_heading"}),Q=BoldBIDashboard.buildTag("div","",{"text-align":"justify",height:"auto","font-size":"12px","margin-top":"8px"},{id:this.id+"_exp_designer_desc_content"}),J=BoldBIDashboard.buildTag("div","",{height:"12px"},{}),Y=BoldBIDashboard.buildTag("div.bbi-designer-title-label","",{height:"auto"},{id:this.id+"_exp_designer_example_heading"}),K=BoldBIDashboard.buildTag("div","",{float:"left","word-wrap":"break-word","margin-top":"8px",height:"auto","font-size":"12px",width:"190px"},{id:this.id+"_exp_designer_example_content"}),P=this.addBtnTag=BoldBIDashboard.buildTag("div.bbi-dbrd-dataalert-expression-add","",{},{id:this.id+"_exp_designer_add_btn"}),L=BoldBIDashboard.buildTag("span.bbi-dbrd-dataalert-expression-add-icon","",{},{}),X=BoldBIDashboard.buildTag("span.bbi-dbrd-dataalert-expression-add-text",this.locale.dataAlertExpression.addExpression,{},{}),L=(P.append(L,X),BoldBIDashboard.buildTag("td.bbi-querydesigner-success-msg-wrap","",{display:"none","margin-left":"465px"},{id:this.id+"_exp_success_message_wrap"})),X=BoldBIDashboard.buildTag("span.bbi-querydesigner-success-message",this.successMessageLocale,{float:"initial"},{id:this.id+"_exp_success_message"}),Z=BoldBIDashboard.buildTag("span.bbi-querydesigner-success-message-icon","",{},{id:this.id+"_exp_success_message_icon"}),d=(this.saveBtnTag=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.expressionDesigner.saveBtnText,{float:"right"},{id:this.id+"_exp_designer_save_btn",type:"button"}),d.append(L),this.bodyContainer=BoldBIDashboard.buildTag("div.e-lv e-js e-parentlv bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{width:"100%",height:i.height()-30,display:"block",position:"relative"},{id:this.id+"_exp_designer_bodyContainer"})),ee=BoldBIDashboard.buildTag("div","",{},{}),te=this.listContainer=BoldBIDashboard.buildTag("div.bbi-list-container e-js e-widget bbi-designer-dataset","",{"border-top-width":"1px",padding:"3px"},{id:this.id+"_div_expList"}),ie=this.expLiTag=BoldBIDashboard.buildTag("ul.e-list-hdr e-clearall","",{width:"auto",height:"auto"},{id:this.id+"_query_exp_li_container"});te.append(ie),ee.append(te),d.append(ee),i.append(d),i.append(P),u.append(g),r.append(u),s.append(a).append(l).append(n).append(r),f.append(W).append(D).append(B).append(C),D.append(k).append(x),x.append(I).append(U),C.append(O).append(y),y.append(S).append(R),m.append(f).append(T),b.append(m),p.append(b),s.append(p),v.append(E),v.append(A),v.append(V),A.append(F),_.append(H),_.append($),_.append(z),$.append(M),N.append(j),j.append(q).append(G).append(Q).append(J).append(Y).append(K),T.append(N).append(v).append(w).append(_),o.append(s),this.footerTag=BoldBIDashboard.buildTag("td.e-foter","",{display:"flex","margin-left":"450px"},{id:this.id+"_exp_designer_foot"}),h.append(this.footerTag),L.append(Z,X),this.footerTag.append(this.saveBtnTag),this.dataAlert.element.find("#"+this.dataAlert.id).append(e),I.BoldBIDashboardDropDownList({targetID:this.id+"_exp_designer_option_div",dataSource:[],popupHeight:"150px",minPopupWidth:"190px",showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-ejwidgets bbi-designer-drpdown-selection bbi-dbrd-control",width:"190px",height:"28px",change:this.bbdesigner$.proxy(this.renderFunctionList,this)}),S.BoldBIDashboardDropDownList({targetID:this.id+"_exp_designer_data_div",popupHeight:"150px",showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-ejwidgets bbi-designer-drpdown-selection bbi-dbrd-control",minPopupWidth:"190px",fields:{id:"id",text:"name"},dataSource:[],width:"190px",height:"28px",change:this.bbdesigner$.proxy(this.renderColumnList,this)}),F.BoldBIDashboardListBox({dataSource:[],height:"155px",change:this.bbdesigner$.proxy(this.optionClick,this),showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-list-selection bbi-dbrd-control",width:"190px"}),M.BoldBIDashboardListBox({dataSource:[],height:"155px",showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-list-selection bbi-dbrd-control",width:"190px"}),P.off("click",this.bbdesigner$.proxy(this.addExpression,this)),this.saveBtnTag.off("click",this.bbdesigner$.proxy(this.saveExpression,this)),P.on("click",this.bbdesigner$.proxy(this.addExpression,this)),this.saveBtnTag.on("click",this.bbdesigner$.proxy(this.saveExpression,this)),d.BoldBIDashboardScroller({scrollerSize:this.scrollerSize.scrollSize,height:i.height(),enableTouchScroll:!0,autoHide:!0,buttonSize:this.scrollerSize.buttonSize}),t.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup bbi-designer-loader",template:this.dashboardDesigner.getWaitingPopupTemplate()}),this.ejFunctionDropdown=I.data("BoldBIDashboardDropDownList"),this.ejColumnDropdown=S.data("BoldBIDashboardDropDownList"),this.ejFunctionList=F.data("BoldBIDashboardListBox"),this.ejColumnList=M.data("BoldBIDashboardListBox"),this.ejIndicator=t.data("BoldBIDashboardWaitingPopup"),g.bind("change keyup paste",this.bbdesigner$.proxy(this.txtExpChanged,this)),c.bind("change keyup paste",this.bbdesigner$.proxy(this.txtNameChanged,this)),BoldBIDashboard.DashboardUtil.txtWaterMark(g,this.expWaterMark),BoldBIDashboard.DashboardUtil.txtWaterMark(c,this.nameWaterMark),this.wiredEvents(),this.renderAutocomplete(E,!0),this.renderAutocomplete(H,!1)},e.prototype.closeDialog=function(){this.resetSearchBox(),BoldBIDashboard.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.customExpressions])},e.prototype.renderAutocomplete=function(e,t){var i=BoldBIDashboard.buildTag("table.bbi-querydesigner-toolbar-table","",{width:"100%"}),o=this.bbdesigner$("<tr/>"),a=this.bbdesigner$("<td/>"),s=BoldBIDashboard.buildTag("span.e-atc e-widget","",{width:"100%",height:"28px"},{}),n=BoldBIDashboard.buildTag("span.e-in-wrap e-box e-padding bbi-designer-widget-autocomplete","",{},{}),r=this.expSearch=BoldBIDashboard.buildTag("input.bbi-autocomplete bbi-designer-widget-watermark bbi-designer-atc-boxshadow e-js e-input","",{},{type:"text",placeholder:this.locale.expressionDesigner.placeHolderText,id:t?this.id+"_function_search":this.id+"_column_search"}),l=this.expSearchIcon=BoldBIDashboard.buildTag("span.e-select bbi-designer-widget-autocomplete e-search-area","",{width:"24px",height:"30px"},{id:t?this.id+"_function_search-icon":this.id+"_column_search-icon"});l.append(BoldBIDashboard.buildTag("span.bbi-headericon bbi-designer-search","",{display:"table-cell"})),n.append(l),n.append(r),s.append(n),BoldBIDashboard.buildTag("span.e-select bbi-designer-widget-select bbi-designer-widget-autocomplete","",{height:"30px"},{id:this.id+"_column_widgetClose"}).append("<span class='bbi-headericon e-reportdesigner-widget-left'/>"),a.append(s),o.append(a),i.append(o),e.append(i),this.functionSearchBox=this.expressionContainer.find("#"+this.id+"_function_search"),this.columnSearchBox=this.expressionContainer.find("#"+this.id+"_column_search"),this.functionSearchIcon=this.expressionContainer.find(".bbi-querydesigner-function-search .bbi-headericon"),this.functionListbox=this.expressionContainer.find("#"+this.id+"_exp_designer_option_list"),this.columnSearchIcon=this.expressionContainer.find(".bbi-querydesigner-column-search .bbi-headericon"),this.columnListbox=this.expressionContainer.find("#"+this.id+"_exp_designer_data_list"),this.functionListTd=this.expressionContainer.find(".e-option-list"),this.columnListTd=this.expressionContainer.find(".e-data-list"),t?(this.expSearch.on("keyup",this.bbdesigner$.proxy(this.onSearchText,this,this.functionSearchIcon,this.functionListbox,!0)),this.expSearch.on("blur",this.bbdesigner$.proxy(this.onSearchBlur,this,this.functionSearchIcon,this.functionListbox)),this.expSearchIcon.on("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this,this.functionSearchIcon,this.functionListbox,this.expSearch,!0)),this.functionSearchBox.on("focus",this.bbdesigner$.proxy(this.onSearchTextBoxFocusIn,this,this.expressionContainer,!0)),this.functionSearchBox.on("blur",this.bbdesigner$.proxy(this.onSearchTextBoxFocusOut,this,this.expressionContainer,!0))):(this.expSearch.on("keyup",this.bbdesigner$.proxy(this.onSearchText,this,this.columnSearchIcon,this.columnListbox,!1)),this.expSearch.on("blur",this.bbdesigner$.proxy(this.onSearchBlur,this,this.columnSearchIcon,this.columnListbox)),this.expSearchIcon.on("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this,this.columnSearchIcon,this.columnListbox,this.expSearch,!1)),this.columnSearchBox.on("focus",this.bbdesigner$.proxy(this.onSearchTextBoxFocusIn,this,this.expressionContainer,!1)),this.columnSearchBox.on("blur",this.bbdesigner$.proxy(this.onSearchTextBoxFocusOut,this,this.expressionContainer,!1)))},e.prototype.onSearchText=function(e,t,i,o){13!==o.keyCode&&(0<(o=this.bbdesigner$(o.target).val()).length?(e.addClass("bbi-designer-close").removeClass("bbi-designer-search"),e=this.filterItems(t.data("BoldBIDashboardListBox").model.dataSource,o),t.BoldBIDashboardListBox("hideAllItems"),t.BoldBIDashboardListBox("showItemsByIndices",e),this.setDisplayForListElements(i,0===e.length)):(t.BoldBIDashboardListBox("showAllItems"),this.setDisplayForListElements(i)))},e.prototype.onSearchBlur=function(e,t,i){0===this.bbdesigner$(i.target).val().length&&(e.addClass("bbi-designer-search").removeClass("bbi-designer-close"),this.bbdesigner$(i.target).val(""),t.BoldBIDashboardListBox("showAllItems"))},e.prototype.onSearchCloseClick=function(e,t,i,o){i.val(""),t.BoldBIDashboardListBox("showAllItems"),e.addClass("bbi-designer-search").removeClass("bbi-designer-close"),this.setDisplayForListElements(o)},e.prototype.onSearchTextBoxFocusIn=function(e,t){t=t?e.find(".bbi-querydesigner-function-search"):e.find(".bbi-querydesigner-column-search");t.addClass("e-focus")},e.prototype.onSearchTextBoxFocusOut=function(e,t){t=t?e.find(".bbi-querydesigner-function-search"):e.find(".bbi-querydesigner-column-search");t.hasClass("e-focus")&&t.removeClass("e-focus")},e.prototype.setDisplayForListElements=function(e,t){(e?(this.functionListTd.css("display",!BoldBIDashboard.isNullOrUndefined(t)&&t?"none":"block"),this.functionNoDataContainer):(this.columnListTd.css("display",!BoldBIDashboard.isNullOrUndefined(t)&&t?"none":"block"),this.columnNoDataContainer)).css("display",!BoldBIDashboard.isNullOrUndefined(t)&&t?"block":"none")},e.prototype.resetSearchBox=function(){this.functionSearchBox.val(""),this.columnSearchBox.val(""),this.functionListbox.BoldBIDashboardListBox("showAllItems"),this.columnListbox.BoldBIDashboardListBox("showAllItems"),this.functionListTd.css("display","block"),this.functionNoDataContainer.css("display","none"),this.columnListTd.css("display","block"),this.columnNoDataContainer.css("display","none"),this.functionSearchIcon.addClass("bbi-designer-search").removeClass("bbi-designer-close"),this.columnSearchIcon.addClass("bbi-designer-search").removeClass("bbi-designer-close")},e.prototype.filterItems=function(e,t){for(var i=[],o=0;o<e.length;o++)""!==t&&!e[o].Name.toLowerCase().startsWith(t.toLowerCase())||i.push(o);return i},e.prototype.enableButton=function(e,t){BoldBIDashboard.DashboardUtil.buttonEnable(e,t)},e.prototype.enableAddButton=function(e,t){t?e.removeClass("bbi-dbrd-dataalert-expression-add-disable"):e.addClass("bbi-dbrd-dataalert-expression-add-disable")},e.prototype.txtNameChanged=function(){var e=this.textBox.val(),t=this.expressionContainer.data("e-exp");e!==this.oldExpName?t&&t.isEdit&&e!==t.name||(t&&!t.isEdit||BoldBIDashboard.isNullOrUndefined(t))&&0!==e.length?this.enableButton(this.saveBtnTag,!0):this.enableButton(this.saveBtnTag,!1):(t&&t.isEdit&&e===t.name||(t&&!t.isEdit||BoldBIDashboard.isNullOrUndefined(t))&&0===e.length)&&this.enableButton(this.saveBtnTag,!1),this.oldExpName=e},e.prototype.txtExpChanged=function(){var e=this.textArea.val(),t=this.expressionContainer.data("e-exp");e!==this.oldVal||BoldBIDashboard.isNullOrUndefined(t)||!t.isEdit?(t&&t.isEdit&&e!==t.expression||t&&!t.isEdit||BoldBIDashboard.isNullOrUndefined(t))&&0!==e.length?(this.enableButton(this.saveBtnTag,!0),this.enableAddButton(this.addBtnTag,!1)):t.isEdit&&e===t.expression?(this.enableAddButton(this.addBtnTag,this.isAddButtonEnabled),this.enableButton(this.saveBtnTag,!1)):(this.enableButton(this.saveBtnTag,!1),this.enableAddButton(this.addBtnTag,!1)):(t&&t.isEdit&&e===t.expression||(t&&!t.isEdit||BoldBIDashboard.isNullOrUndefined(t))&&0===e.length)&&this.enableButton(this.saveBtnTag,!1),this.oldVal=e},e.prototype.updateTextArea=function(){var e=this.textArea.val();e&&0<e.length?e!==this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&this.textArea.removeClass("bbi-designer-txtmark"):this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark")},e.prototype.updateTextBox=function(){var e=this.textBox.val();e&&0<e.length?e!==this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&this.textBox.removeClass("bbi-designer-txtmark"):this.textBox.val(this.nameWaterMark).addClass("bbi-designer-txtmark")},e.prototype.addExpression=function(){this.resetSearchBox(),this.requestValidation(!0);var e=this.textBox.val();this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e))[0]})},e.prototype.requestValidation=function(e,t){var i,o=this.expressionContainer.data("e-exp"),a=this.textArea.val().trim();o&&o.isEdit?((i=this.textBox.val())===this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&(i=""),a===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&(a=""),this.hasExpChanges(o,a)?i&&0===i.length||a&&0===a.length||!this.isValidName(i)||!/^[a-zA-Z0-9- _]*$/.test(i)?e?this.newExpression():this.expListClick(t):this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{method:"updateExpressionInfo",instance:this,dataInfo:{name:e?i:t,isSelectionChange:!e}}):e?this.switchEditExp():this.expListClick(t)):o&&!o.isEdit||BoldBIDashboard.isNullOrUndefined(o)?"Query Expression"!==a?this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"clearExpression",dataInfo:e?null:{isSelectionChange:!0,name:t},instance:this}):e?this.clearExpression(!1):this.expListClick(t):e?this.newExpression():this.expListClick(t)},e.prototype.clearExpression=function(e,t){var i;BoldBIDashboard.isNullOrUndefined(t)?e?(this.isAdd=!0,this.saveExpression()):(i=this.getAvailableName(),this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark"),this.textBox.val(i),this.updateTextBox(),this.enableButton(this.saveBtnTag,!1),this.enableAddButton(this.addBtnTag,!1)):e?this.saveExpression(t):(i=this.getAvailableName(),this.removeExpression(i),this.expListClick(t.name))},e.prototype.deleteEmtyExp=function(){var s=this,e=this.expLiTag.find("li"),n=null,r=this.bbdesigner$;e.each(function(e,t){for(var i=r(t).find(".e-list-text").text(),o=!0,a=0;a<s.customExpressions.length;a++)if(i===s.customExpressions[a].name){o=!1;break}o&&(n=r(t))}),n&&n.remove()},e.prototype.getEmptyExp=function(){var s=this,e=this.expLiTag.find("li"),n=null,r=this.bbdesigner$;return e.each(function(e,t){for(var i=r(t).find(".e-list-text").text(),o=!0,a=0;a<s.customExpressions.length;a++)if(i===s.customExpressions[a].name){o=!1;break}o&&(n=i)}),n},e.prototype.switchEditExp=function(){var s=this,e=this.expLiTag.find("li"),n=!0,r=this.bbdesigner$;e.each(function(e,t){for(var i=r(t).find(".e-list-text").text(),o=!0,a=0;a<s.customExpressions.length;a++)if(i===s.customExpressions[a].name){o=!1;break}o&&(n=!1,s.expListClick(i))}),n&&this.newExpression()},e.prototype.hasExpChanges=function(e,t){for(var i=0;i<this.customExpressions.length;i++)if(this.customExpressions[i].name===e.name&&-1===t.indexOf("["+this.customExpressions[i].name+"]")&&(this.customExpressions[i].name!==this.textBox.val()||this.customExpressions[i].expression!==t))return!0;return!1},e.prototype.newExpression=function(){var e=this.getAvailableName();this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark"),this.textBox.val(e),this.updateTextBox(),this.expressionContainer.data("e-exp",{isEdit:!1,name:""}),this.appendExpList(e),this.enableButton(this.saveBtnTag,!1),this.enableAddButton(this.addBtnTag,!1),this.UpdateMiscellaneousList()},e.prototype.updateExpressionInfo=function(e,t){this.textBox.val();e?t.isSelectionChange?this.expressionContainer.data("e-exp").isEdit?this.expressionValidation(ExpAction.Edit,t.isSelectionChange,t.name):this.expressionValidation(ExpAction.New,t.isSelectionChange,t.name):this.expressionValidation(ExpAction.Save):t.isSelectionChange?this.expListClick(t.name):(this.switchEditExp(),e=this.textBox.val(),this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e))[0]}))},e.prototype.isValidName=function(e){for(var t=this.expressionContainer.data("e-exp"),i=0;i<this.customExpressions.length;i++)if(this.customExpressions[i].name===e&&(BoldBIDashboard.isNullOrUndefined(t)||t.isEdit&&t.name!==e))return!1;return!0},e.prototype.getAvailableName=function(){for(var e,t="Expression",i=[],o=0;o<this.customExpressions.length;o++)i.push(this.customExpressions[o].name);for(e=0;-1!==i.indexOf(t+ ++e););return t+e},e.prototype.populateExpressions=function(){if(0<this.expLiTag.children().length&&this.expLiTag.empty(),!BoldBIDashboard.isNullOrUndefined(this.customExpressions)&&0<this.customExpressions.length){for(var e=0;e<this.customExpressions.length;e++)this.appendExpList(this.customExpressions[e].name);this.enableAddButton(this.addBtnTag,!0)}this.scrollerRefresh(this.bodyContainer)},e.prototype.updateExpList=function(e,t){var i=BoldBIDashboard.DashboardUtil.escapeSelector(e),o=BoldBIDashboard.DashboardUtil.escapeSelector(t);this.bbdesigner$("#"+this.id+"_li_"+o).remove(),this.bbdesigner$("#"+this.id+"_li_"+i).unbind("click",this.bbdesigner$.proxy(this.expressionSelection,this,e)),this.bbdesigner$("#"+this.id+"_"+i).unbind("click",this.bbdesigner$.proxy(this.removeExpression,this,e)),this.bbdesigner$("#"+this.id+"_li_"+i+" .e-list-text").text(t),this.addTooltip(this.bbdesigner$("#"+this.id+"_li_"+i+" .e-list-text"),t),this.bbdesigner$("#"+this.id+"_li_"+i).attr("id",this.id+"_li_"+o),this.bbdesigner$("#"+this.id+"_"+i).attr("id",this.id+"_"+o),this.bbdesigner$("#"+this.id+"_li_"+o).bind("click",this.bbdesigner$.proxy(this.expressionSelection,this,t)),this.bbdesigner$("#"+this.id+"_"+o).bind("click",this.bbdesigner$.proxy(this.removeExpression,this,t))},e.prototype.appendExpList=function(e,t){var i=BoldBIDashboard.DashboardUtil.escapeSelector(e),o=BoldBIDashboard.buildTag("li.e-user-select e-list e-state-default e-list-check bbi-designer-exp-list","",{},{id:this.id+"_li_"+i,name:e}),a=BoldBIDashboard.buildTag("a.e-chevron-right_01 bbi-remove-shadow","",{}),s=BoldBIDashboard.buildTag("span.e-list-text e-rel bbi-designer-content bbi-dbrd-designer-hoverable",e,{},{name:e});a.append(s),i=BoldBIDashboard.buildTag("div.e-chk-image e-icon e-cross-circle bbi-dbrd-designer-hoverable","",{},{id:this.id+"_"+i,"data-tooltip":"Delete"}),a.append(i),o.append(a),i.bind("click",this.bbdesigner$.proxy(this.removeExpression,this,e)),o.bind("click",this.bbdesigner$.proxy(this.expressionSelection,this,e)),o.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseUp,this.bbdesigner$.proxy(this.onListItemMouseUp,this)),BoldBIDashboard.isNullOrUndefined(t)?this.expLiTag.append(o):0===t?(this.expLiTag.prepend(o),o.css({"border-bottom":"0.5px solid #c8c8c8"})):this.listContainer.find("ul>li:nth-child("+t+")").after(o),this.addTooltip(s,e),this.updateContainerBorder(),this.bodyContainer.height()>this.listContainer.height()?this.bodyContainer.find(".e-content").removeClass("e-content"):this.scrollerRefresh(this.bodyContainer)},e.prototype.addTooltip=function(e,t){BoldBIDashboard.DashboardUtil.textWidth(t,"12px Heebo")>=e.width()&&e.attr("data-tooltip",t)},e.prototype.onListItemMouseUp=function(e){var t,e=this.bbdesigner$(e.target).closest("li");e.hasClass("bbi-expression-user-selection-active")||(t=this,e.parent().children().each(function(){var e=t.bbdesigner$(this);e.removeClass("bbi-expression-user-selection-active"),e.find("span").removeClass("bbi-expression-user-selection-active")}),e.addClass("bbi-expression-user-selection-active"),e.find("span").addClass("e-expression-user-selection-active"),this.isAddButtonEnabled=!this.addBtnTag.hasClass("bbi-dbrd-dataalert-expression-add-disable"))},e.prototype.expressionSelection=function(e){this.requestValidation(!1,e)},e.prototype.renderFunctionList=function(e){this.ejFunctionList.setModel({dataSource:e.value,fields:{id:"ID",text:"Name"},selectedIndex:0});e=this.ejFunctionList.getSelectedItems();this.optionClick(e[0]),this.resetSearchBox()},e.prototype.renderColumnList=function(e){this.ejColumnList.setModel({dataSource:e.value,fields:{text:"Name"},selectedIndex:0}),this.resetSearchBox()},e.prototype.scrollerRefresh=function(e){e.data("BoldBIDashboardScroller")&&e.data("BoldBIDashboardScroller").refresh()},e.prototype.functionDblClick=function(){var e=this.bbdesigner$("#"+this.id+"_exp_designer_option_list").data("BoldBIDashboardListBox"),t=e.model.selectedItems,e=e.model.dataSource[t],t=null;e&&("Logical"===e.CategoryName?(t=e.Name,this.caretPosition(t)):(t=e.Name+"()",this.caretPosition(t,!0,t.length),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_desc_content").text(e.Description),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_example_content").text(e.Example)))},e.prototype.columnDblClick=function(){var e=this.bbdesigner$("#"+this.id+"_exp_designer_data_list").data("BoldBIDashboardListBox"),t=e.model.selectedItems,e=e.model.dataSource[t];e&&(t=!0===e.HasDynamicParams?"@{{:"+e.Value+"}}":"["+e.Name+"]",this.caretPosition(t,!1,t.length))},e.prototype.caretPosition=function(e,t,i){var o,a,s;e&&0<e.length&&((o=this.textArea.val())!==this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")?this.textArea.removeClass("bbi-designer-txtmark"):o===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&this.textArea.val(o="").removeClass("bbi-designer-txtmark"),this.textArea.focus(),s=(a=this.textArea[0]).selectionStart,s=!BoldBIDashboard.isNullOrUndefined(i)&&t?(this.textArea.val(o.substring(0,s)+e+o.substring(s)),a.selectionEnd=s+i-1):BoldBIDashboard.isNullOrUndefined(i)||t?(this.textArea.val(o.substring(0,s)+e+o.substring(s)),a.selectionEnd=s):(this.textArea.val(o.substring(0,s)+e+o.substring(s)),a.selectionEnd=s+i),this.textArea.trigger("change"))},e.prototype.optionClick=function(e){e.data&&(this.bbdesigner$("#"+this.id+"_exp_designer_desc_heading").text("Description"),this.bbdesigner$("#"+this.id+"_exp_designer_example_heading").text("Example"),this.bbdesigner$("#"+this.id+"_exp_designer_desc_content").text(e.data.Description),this.bbdesigner$("#"+this.id+"_exp_designer_example_content").text(e.data.Example))},e.prototype.removeNestedExpression=function(e){var t,i,o,a=[];for(this.listContainer.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e)).remove(),i=this.customExpressions.length-1;0<=i;i--)(this.customExpressions[i].name===e||-1<this.customExpressions[i].expression.indexOf("["+e+"]"))&&(a.push(this.customExpressions[i]),this.customExpressions.splice(i,1));if(0<a.length)for(i=a.length-1;0<=i;i--)if(0<(t=this.removeNestedExpression(a[i].name)).length)for(o=0;o<t.length;o++)a.push(t[o]);return a},e.prototype.removeExpression=function(e){this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.removeExpression,this.locale.dataSource.removeExpressionText,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{expressionName:e},instance:this,method:"conformDelete"})},e.prototype.conformRemoveExpression=function(e){var t,i,o,a=[],s=[];if(this.listContainer.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e)).remove(),this.updateContainerBorder(),!BoldBIDashboard.isNullOrUndefined(this.customExpressions)&&0<this.customExpressions.length){for(i=this.customExpressions.length-1;0<=i;i--)if(this.customExpressions[i].name===e){a.push(this.customExpressions[i].name),s.push(this.customExpressions[i].expression),this.customExpressions.splice(i,1);break}if(t=this.removeNestedExpression(e),!BoldBIDashboard.isNullOrUndefined(t)&&0<t.length)for(i=t.length-1;0<=i;i--)a.push(t[i].name),s.push(t[i].expression);this.serverValidationExp({selectedExpression:"",name:a,expression:s},ExpAction.Remove),0<(o=this.customExpressions.length)?(this.expListClick(this.customExpressions[o-1].name),this.deleteEmtyExp(),this.enableAddButton(this.addBtnTag,!0)):0===o&&0<this.expLiTag.children().length&&this.expLiTag.empty()}0===this.expLiTag.children().length&&(o=this.getAvailableName(),this.appendExpList(o),this.textBox.val(o),this.updateTextBox(),this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark"),this.expressionContainer.data("e-exp",{isEdit:!1,name:""}),this.enableAddButton(this.addBtnTag,!1)),this.scrollerRefresh(this.bodyContainer),this.UpdateMiscellaneousList(),o=this.textBox.val(),this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(o))[0]})},e.prototype.conformDelete=function(e,t){e&&this.conformRemoveExpression(t.expressionName)},e.prototype.expListClick=function(e){for(var t,i=!1,o=0;o<this.customExpressions.length;o++)if(e===this.customExpressions[o].name){this.textBox.val(this.customExpressions[o].name),this.textArea.val(this.customExpressions[o].expression),this.updateTextBox(),this.updateTextArea(),this.textArea.focus(),(t=this.textArea[0]).selectionStart=t.selectionEnd=this.customExpressions[o].expression.length,this.expressionContainer.data("e-exp",{isEdit:!0,name:this.customExpressions[o].name,expression:this.customExpressions[o].expression}),this.enableButton(this.saveBtnTag,!(i=!0));break}i||(this.textBox.val(e),this.updateTextBox(),this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark"),this.enableButton(this.saveBtnTag,!1),this.enableAddButton(this.addBtnTag,!1),this.expressionContainer.data("e-exp",null)),this.UpdateMiscellaneousList()},e.prototype.updateContainerBorder=function(){this.listContainer.css("border-top-width",0===this.listContainer.find("li").length?"0px":"1px")},e.prototype.wiredEvents=function(){this.bbdesigner$("#"+this.id+"_exp_designer_option_list").bind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.functionDblClick,this)),this.bbdesigner$("#"+this.id+"_exp_designer_data_list").bind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.columnDblClick,this)),this.bbdesigner$("#"+this.id+"_exp_designer_closebutton").on("click",this.bbdesigner$.proxy(this.closeDialog,this))},e.prototype.unWiredEvents=function(){this.bbdesigner$("#"+this.id+"_exp_designer_option_list").unbind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.functionDblClick,this)),this.bbdesigner$("#"+this.id+"_exp_designer_data_list").unbind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.columnDblClick,this)),this.bbdesigner$("#"+this.id+"_exp_designer_closebutton").unbind("click",this.bbdesigner$.proxy(this.closeDialog,this)),this.functionSearchBox.off("keyup",this.bbdesigner$.proxy(this.onSearchText,this)),this.columnSearchBox.off("keyup",this.bbdesigner$.proxy(this.onSearchText,this)),this.functionSearchBox.off("blur",this.bbdesigner$.proxy(this.onSearchBlur,this)),this.columnSearchBox.off("blur",this.bbdesigner$.proxy(this.onSearchBlur,this)),this.expSearchIcon.off("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this)),this.expSearchIcon.off("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this))},e.prototype.openExpression=function(){this.dataAlert.element.find("#"+this.dataAlert.id+"_container").css("display","none"),this.resetDesigner(!0),n=new BoldBIDashboard.Dashboard.ExpressionDialogModel,i=new BoldBIDashboard.Dashboard.ExpressionHelper,n.FunctionUI={Selected:BoldBIDashboard.Dashboard.FieldName.All,State:0},n.Datasource=i.getMultipleData();var e,t,i,o,a,s,n,r=n.Datasource,l=[],d=[];if(1<r.length){for(e=[],s=0;s<r.length;s++)e=e.concat(r[s].Value);for(e.sort(function(e,t){return e.ID>t.Name?1:t.Name>e.ID?-1:0}),t=0;t<e.length;t++)-1===d.indexOf(e[t].ID)&&(d.push(e[t].ID),l.push(e[t]));n.Datasource.unshift({ID:0,Name:BoldBIDashboard.Dashboard.FieldName.All,Value:l})}if(this.ejFunctionDropdown.setModel({fields:{id:"ID",text:"Name",value:"Value"},dataSource:n.Datasource,enabled:n.FunctionUI.State===BoldBIDashboard.Dashboard.State.Enable}),this.ejFunctionDropdown.selectItemByText(n.FunctionUI.Selected),i=new BoldBIDashboard.Dashboard.ExpressionDialogModel,n=new BoldBIDashboard.Dashboard.ExpressionHelper,i.FunctionUI={Selected:BoldBIDashboard.Dashboard.FieldName.All,State:0},i.Datasource=n.getDaMultipleColumnData(this.dataSourceFields),a=[],1<(o=i.Datasource).length){for(s=0;s<o.length;s++)"Parameters"!==o[s].Name&&(a=a.concat(o[s].Value));a.sort(function(e,t){return e.ID>t.ID?1:t.ID>e.ID?-1:0}),i.Datasource.unshift({ID:0,Name:BoldBIDashboard.Dashboard.FieldName.All,Value:a})}this.ejColumnDropdown.setModel({fields:{id:"ID",text:"Name",value:"Value"},dataSource:i.Datasource,enabled:!0}),this.ejColumnDropdown.selectItemByText(i.FunctionUI.Selected),0<this.customExpressions.length?(this.populateExpressions(),this.expListClick(this.customExpressions[0].name)):this.newExpression(),n=this.textBox.val(),this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(n))[0]}),this.refreshListScroller()},e.prototype.refreshListScroller=function(){this.ejFunctionList.scrollerObj.model.scrollTop=0,this.ejColumnList.scrollerObj.model.scrollTop=0,this.ejFunctionList.refresh(!0),this.ejColumnList.refresh(!0)},e.prototype.confirmAction=function(e){var t;e?(e=this.textBox.val(),(t=(new BoldBIDashboard.DashboardDesignerUtility.ExpressionParsor).parseErrors(this.textArea.val(),this.provider))&&0<t.length?this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.failedToParseExp,IconType.errors,AlertType.Alert,!0,t[0]):this.isAvaliableNames(e)?this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""):this.serverValidationExp({selectedExpression:""===this.expressionContainer.data("e-exp").name?this.textBox.val():this.expressionContainer.data("e-exp").name,name:this.textBox.val(),expression:this.textArea.val()},ExpAction.Close)):(this.closeExpressionDialog(),this.hideExpIndicator())},e.prototype.closeConfirmation=function(){var e,t,i=this.expressionContainer.data("e-exp");i&&i.isEdit?(e=this.textBox.val(),t=this.textArea.val().trim(),e===this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&(e=""),t===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&(t=""),!this.hasExpChanges(i,t)||e&&0===e.length||t&&0===t.length||!this.isValidName(e)||!/^[a-zA-Z0-9- _]*$/.test(e)?(this.hideExpIndicator(),this.closeExpressionDialog()):this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this,dataInfo:{name:e}})):"Query Expression"!==this.textArea.val()&&""!==this.textArea.val()?this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.SaveExpression,this.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this,dataInfo:{name:this.textBox.val()}}):this.closeExpressionDialog()},e.prototype.closeExpression=function(){this.resetSearchBox(),this.closeConfirmation()},e.prototype.resetDesigner=function(e){e&&0<this.expLiTag.children().length&&(this.expLiTag.empty(),this.scrollerRefresh(this.bodyContainer)),this.textBox.val(""),this.textArea.val(""),this.bbdesigner$("#"+this.id+"_exp_designer_desc_heading").text(""),this.bbdesigner$("#"+this.id+"_exp_designer_example_heading").text(""),this.bbdesigner$("#"+this.id+"_exp_designer_desc_content").text(""),this.bbdesigner$("#"+this.id+"_exp_designer_example_content").text("")},e.prototype.saveExpression=function(e){this.resetSearchBox(),this.expressionContainer.data("e-exp")&&this.expressionContainer.data("e-exp").isEdit?e&&e.isSelectionChange?this.expressionValidation(ExpAction.Edit,e.isSelectionChange,e.name):this.expressionValidation(ExpAction.Edit):e&&e.isSelectionChange?this.expressionValidation(ExpAction.New,e.isSelectionChange,e.name):this.expressionValidation(ExpAction.New)},e.prototype.expressionValidation=function(e,t,i){var o,a,s=this.expressionContainer.data("e-exp"),n=this.textBox.val(),r=this.textArea.val().trim();this.textArea.val(r),o=!1,n===this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&(n=""),r===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&(r=""),BoldBIDashboard.isNullOrUndefined(n)||0!==n.length?BoldBIDashboard.isNullOrUndefined(r)||0!==r.length?this.isValidName(n)?!1===/^[a-zA-Z0-9- _]*$/.test(n)?(this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.expHasSpecialChar,IconType.warning,AlertType.Alert,!1,""),o=!0):-1!==r.indexOf("["+n+"]")?(this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.expNotInColumn,IconType.errors,AlertType.Alert,!1,""),o=!0):this.isBalanceBrackets(r)?this.isAvaliableNames(n)?(this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""),o=!0):(-1<r.replace(new RegExp("s"),"").toUpperCase().indexOf("TOTAL(")||this.rowExpression.some(function(e){return-1<r.replace(new RegExp("s"),"").toUpperCase().indexOf(e+"(")}))&&!this.isValidRunningExpression(r)?o=!0:s&&s.isEdit?(a=(new BoldBIDashboard.DashboardDesignerUtility.ExpressionParsor).parseErrors(r,this.provider))&&0<a.length?this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",a[0],IconType.errors,AlertType.Alert,!1,""):this.serverValidationExp({selectedExpression:s.name,name:n,expression:r,isSelectionChange:t,selectedExp:i},e):(a=(new BoldBIDashboard.DashboardDesignerUtility.ExpressionParsor).parseErrors(r,this.provider))&&0<a.length?(this.isAdd=!1,this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",this.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!0,a[0])):this.serverValidationExp({selectedExpression:"",name:n,expression:r,isSelectionChange:t,selectedExp:i},e):(this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.invalidExpSyntax,IconType.errors,AlertType.Alert,!1,""),o=!0):(this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""),o=!0):(this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.emptyExp,IconType.warning,AlertType.Alert,!1,""),o=!0):(this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.emptyExpName,IconType.warning,AlertType.Alert,!1,""),o=!0),t&&o&&this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(s.name))[0]})},e.prototype.isAvaliableNames=function(e){for(var t=this.expressionContainer.data("e-exp"),i=this.ejColumnDropdown.model.dataSource[0].Value,o=0;o<i.length;o++)if(i[o].Name.toLowerCase()===e.toLowerCase()&&t.name.toLowerCase()!==e.toLowerCase())return!0;return!1},e.prototype.isValidRunningExpression=function(e){for(var t,i,o,a,s,n,r,l,d,h=this,p=!0,c=e,u=this.ejColumnDropdown.model.dataSource[0].Value,g=0;g<u.length;g++)t=u[g].Name,-1<c.indexOf("["+t+"]")&&!0===/^[a-zA-Z0-9- _]*$/.test(t)&&(c=c.replace("["+t+"]",""));if(i=null,-1<c.replace(new RegExp("s"),"").toUpperCase().indexOf("TOTAL(")&&(i=c.replace("TOTAL","").toUpperCase().split("[+-*/]+")).forEach(function(t){h.rowExpression.some(function(e){return-1<t.indexOf(e)})&&(p=!1,h.dataAlert.designerInstance.modules.util.alertDialog(h.locale.alertDialogTitle.queryExpression,h.locale.dataSource.errorMessageForTotalExpressionContainsRowExpression,IconType.warning,AlertType.Alert,!1,""))}),p){for(this.rowExpression.forEach(function(e){-1<c.replace(new RegExp("s"),"").toUpperCase().indexOf(e+"(")&&(i=c.toUpperCase().replace(e,"").split("[+-*/]+"))}),o=0,a=i;o<a.length;o++)for(s=a[o],p=!1,n=!isNaN(parseInt(s.replace("(","").replace(")",""),10)),r=0,l=this.aggregationList.filter(function(e){return"TOTAL"!==e||"RUNNINGSUM"!==e||"RUNNINGAVG"!==e||"RUNNINGCOUNT"!==e||"RUNNINGMAX"!==e||"RUNNINGMIN"!==e});r<l.length;r++)if(d=l[r],-1<s.toString().replace(new RegExp("s"),"").toUpperCase().indexOf(d)||n){p=!0;break}p||this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.parameterMustBeAnAggregated,IconType.warning,AlertType.Alert,!1,"")}return p},e.prototype.isBalanceBrackets=function(e){for(var t=0,i=0;i<e.length;i++)if("("===e[i]?t++:")"===e[i]&&t--,t<0)return!1;return!(0<t)},e.prototype.UpdateMiscellaneousList=function(){for(var e,t,i=this.ejColumnDropdown.model.dataSource[0].Value,o=this.ejColumnDropdown.model.dataSource[this.ejColumnDropdown.model.dataSource.length-1].Value,a=o.length,s=!1,n=0;n<a;n++)!function(t){var e=i.indexOf(i.filter(function(e){return e.Name===o[t].Name})[0]);-1<e&&i.splice(e,1)}(n);for(n=0;n<a;n++)o.pop();for(n=0;n<this.customExpressions.length;n++){for(s=!(e={ID:i.length+n,Name:this.customExpressions[n].name,Value:this.customExpressions[n].expression,DataType:null}),t=0;t<i.length;t++)if(i[t].Name===e.Name){s=!0;break}s||i.push(e),o.push(e)}this.ejColumnDropdown.model.dataSource[0].Value=i,this.ejColumnDropdown.model.dataSource[this.ejColumnDropdown.model.dataSource.length-1].Value=o,this.ejColumnList.refresh(!0)},e.prototype.serverValidationExp=function(e,t){var i=this.textBox.val(),o=this.textArea.val();this.dataAlert.designerInstance.modules.util.doAjaxPost("POST",this.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.dagetexpressioncolumninfo,{action:BoldBIDashboard.DashboardUtil.DesignerAction.GetExpressionColumnInfo,data:JSON.stringify({datasourceId:this.dataAlert.datasourceId,expressionName:i,expressionText:o})},{fnction:this.bbdesigner$.proxy(this.updateExpressionResult,this,e,t),indicator:[this.bbdesigner$.proxy(this.showExpIndicator,this),this.bbdesigner$.proxy(this.hideExpIndicator,this)]},!0,!0)},e.prototype.updateExpressionResult=function(e,t,i){var o,a,s,n,r;if(i.Status){if(i&&i.Data.Data){var l=this.expressionContainer.data("e-exp"),d=e.name,h=e.expression;if(t===ExpAction.New){if(o=!0,0===this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(d)).length)a=this.getEmptyExp(),this.updateExpList(a,d);else{for(s=!0,r=0;r<this.customExpressions.length;r++)if(this.customExpressions[r].name===d){s=!1;break}s||(o=!1,this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""))}o&&(this.customExpressions.push({name:d,expression:h}),this.expressionContainer.data("e-exp",{isEdit:!0,name:d,expression:h}),this.enableButton(this.saveBtnTag,!1),this.enableAddButton(this.addBtnTag,!0),this.isAdd&&(this.switchEditExp(),n=this.textBox.val(),this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(n))[0]}),this.isAdd=!1),e.isSelectionChange)&&(this.expListClick(e.selectedExp),n=this.textBox.val(),this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(n))[0]}))}else if(t===ExpAction.Edit){for(r=0;r<this.customExpressions.length;r++)-1!==this.customExpressions[r].expression.indexOf("["+l.name+"]")&&(this.customExpressions[r].expression=this.customExpressions[r].expression.replace("["+l.name+"]","["+d+"]"));for(r=0;r<this.customExpressions.length;r++)if(this.customExpressions[r].name===l.name){this.customExpressions[r].name=d,this.customExpressions[r].expression=h,this.customExpressions[r].name!==l.name&&this.updateExpList(l.name,d),this.expressionContainer.data("e-exp",{isEdit:!0,name:this.customExpressions[r].name,expression:this.customExpressions[r].expression}),this.enableButton(this.saveBtnTag,!1),this.enableAddButton(this.addBtnTag,!0),e.isSelectionChange&&(this.expListClick(e.selectedExp),n=this.textBox.val(),this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(n))[0]}));break}}else if(t===ExpAction.Save){for(r=0;r<this.customExpressions.length;r++)if(this.customExpressions[r].name===l.name){this.customExpressions[r].name=d,this.customExpressions[r].expression=h,this.customExpressions[r].name!==l.name&&this.updateExpList(l.name,d),this.enableButton(this.saveBtnTag,!1),this.switchEditExp(),n=this.textBox.val(),this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(n))[0]});break}}else if(t===ExpAction.Close){for(""===l.name&&this.customExpressions.push({name:this.textBox.val(),expression:this.textArea.val()}),r=0;r<this.customExpressions.length;r++)if(this.customExpressions[r].name===l.name){this.customExpressions[r].name=d,this.customExpressions[r].expression=h,this.customExpressions[r].name!==l.name&&this.updateExpList(l.name,d);break}this.closeExpressionDialog(),this.hideExpIndicator()}else t===ExpAction.Remove&&(0===this.customExpressions.length?this.enableAddButton(this.addBtnTag,!1):this.enableAddButton(this.addBtnTag,!0));this.UpdateMiscellaneousList(),t!==ExpAction.New&&t!==ExpAction.Save&&t!==ExpAction.Edit||this.updateSuccessMessage()}}else this.enableButton(this.saveBtnTag,!0),this.enableAddButton(this.addBtnTag,!1),BoldBIDashboard.isNullOrUndefined(i.StatusMessage)?this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",this.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!1,""):this.dataAlert.designerInstance.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",this.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!0,i.StatusMessage),e.isSelectionChange&&this.onListItemMouseUp({target:this.bbdesigner$("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(this.textBox.val()))[0]})},e.prototype.updateSuccessMessage=function(){var e=this;this.bbdesigner$("#"+this.id+"_exp_success_message_wrap").css("display","block"),setTimeout(function(){e.bbdesigner$("#"+e.id+"_exp_success_message_wrap").css("display","none")},3e3)},e.prototype.showExpIndicator=function(){BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_add_btn"),!1),BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_save_btn"),!1),BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_close_btn"),!1),this.ejIndicator.show()},e.prototype.hideExpIndicator=function(){BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_add_btn"),!0),BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_save_btn"),!1),BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_close_btn"),!0),this.ejIndicator.hide()},e.prototype.closeExpressionDialog=function(){BoldBIDashboard.DashboardUtil.invokeMethod(this.dataAlert,this.targetMethod,[this.customExpressions]),this.destroy(),this.dataAlert.element.find("#"+this.dataAlert.id+"_container").css("display","block")},e.prototype.destroy=function(){this.unWiredEvents(),BoldBIDashboard.DashboardUtil.destroyEjObjects(this.bbdesigner$("#"+this.id+"_exp_designer")),0<this.bbdesigner$("#"+this.id+"_exp_designer").length&&this.bbdesigner$("#"+this.id+"_exp_designer").remove()},e}(),window.BoldBIDashboard.createObject("BoldBIDashboard.DataAlert.CustomExpressions",InternalDataAlertExpressions,window),function(e){function t(e,t,i){this.id=e,this.element=t,this.designer=i}t.prototype.render=function(){var e=this.designer.modules.dataAlertDialog;e.dashboardWritePermission=!0,e.renderDialogElements(this.element,this.designer.model.dataAlert)},t.prototype.postRender=function(){this.designer.GetLocalizationFormat(),this.render(0)},t.prototype.setContainerSize=function(){},t.prototype.renderCanvas=function(){},t.prototype.previewDashboard=function(){},t.prototype.renderCells=function(){},t.prototype.renderCellsForExport=function(){},t.prototype.updateSizeForScrollExport=function(){},t.prototype.resizeCombineWidgetForWidgetExport=function(){},t.prototype.wireEvents=function(){},t.prototype.unwireEvents=function(){},e.DataAlertMode=t}(BoldBIDashboard=BoldBIDashboard||{}),InternalDateRangePopup=function(){function e(e){this.parameterList=[],this.customAttributeList=[],this.filterInfo=new DimensionFilterInfo,this.locale=null,this.dashboardDesigner=e,this.bbdesigner$=this.dashboardDesigner.bbdesigner$,this.locale=e.getLocalizationContent(),this.id=this.dashboardDesigner._id,this.dateFormat=this.dashboardDesigner.model.localeSettings.dateFormat+" "+this.dashboardDesigner.model.localeSettings.timeFormat}return e.prototype.getCustomAttribute=function(e){this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.GetCustomAttribute,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.DataDesignViewAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.GetCustomAttribute,isCodeView:!1,isQueryDesignerMode:!0})},{fnction:this.bbdesigner$.proxy(this.setCustomAttribute,this,e)})},e.prototype.setCustomAttribute=function(e,t){BoldBIDashboard.isNullOrUndefined(t)||(t=t.map(function(e){return{text:e.Name,value:e.Value}}),this.customAttributeList=t)},e.prototype.renderDateRangePopup=function(e,t){var i,o,a,s,n,r,l,d,h,p,c,u;return BoldBIDashboard.isNullOrUndefined(t)||"Custom Attributes"!==t||this.getCustomAttribute(e),i=this.dashboardDesigner.element.find("#"+(t=e+"_dateRange_popup")),!BoldBIDashboard.isNullOrUndefined(this.dateRangePopUp)&&0!==this.dateRangePopUp.length||0!==i.length?this.dateRangePopUp=!BoldBIDashboard.isNullOrUndefined(this.dateRangePopUp)&&0<this.dateRangePopUp.length&&t===this.dateRangePopUp[0].id?this.dateRangePopUp:this.dashboardDesigner.element.find("#"+e+"_dateRange_popup"):(this.dateRangePopUp=BoldBIDashboard.buildTag("div.bbi-daterange-popup","",{},{id:e+"_dateRange_popup"}),i=BoldBIDashboard.buildTag("div.bbi-date-range-checkBbox","",{}),t=BoldBIDashboard.buildTag("table","",{width:"100%"},{}),o=BoldBIDashboard.buildTag("tr","",{},{}),this.renderRadioButton("Ranges",e,e+"_RangeBtn",!0,o,this.onRangeTypeChange,this),this.renderRadioButton("Start Date",e,e+"_startBtn",!1,o,this.onRangeTypeChange,this),this.renderRadioButton("End Date",e,e+"_endBtn",!1,o,this.onRangeTypeChange,this),a=BoldBIDashboard.buildTag("div.bbi-date-range-field","",{},{id:e+"_dateRange_fieldDiv"}),s=BoldBIDashboard.buildTag("div","",{"margin-top":"6px"},{id:e+"_dateRange_start_tr"}),n=BoldBIDashboard.buildTag("div","",{"margin-top":"12px"},{id:e+"_dateRange_end_tr"}),r=BoldBIDashboard.buildTag("table","",{width:"100%"},{}),l=BoldBIDashboard.buildTag("tr","",{},{}),d=BoldBIDashboard.buildTag("table","",{width:"100%"},{}),h=BoldBIDashboard.buildTag("tr","",{},{}),p=BoldBIDashboard.buildTag("div.bbi-date-range-popup-footer","",{},{}),c=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary bbi-date-range-foot-btn",this.locale.dialogOptions.applyButtonText,{},{id:e+"_dateRange_okBtn",type:"button",disabled:"disabled"}),u=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left bbi-date-range-foot-btn",this.locale.dialogOptions.cancelButtonText,{},{id:e+"_dateRange_cancelBtn",type:"button"}),this.dashboardDesigner.element.append(this.dateRangePopUp),t.append(o),i.append(t),this.dateRangePopUp.append(i),s.append(r),r.append(l),this.renderDateRangePicker(e+"_dateRange_Start",e,"Start",l,this.onPickerChange,this),n.append(d),d.append(h),this.renderDateRangePicker(e+"_dateRange_end",e,"End",h,this.onPickerChange,this),a.append(s),a.append(n),this.dateRangePopUp.append(a),p.append(u).append(c),this.dateRangePopUp.append(p),this.dateRangePopUp.css("z-index",this.bbdesigner$("#"+this.id+"_query_filter_dialog_wrapper").css("z-index")+1),c.on("click",this.bbdesigner$.proxy(this.updateDateRangeAttr,this,e)),u.on("click",this.bbdesigner$.proxy(this.closeDateRangePopup,this,e)),a.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup bbi-designer-loader",template:this.dashboardDesigner.getWaitingPopupTemplate()}),this.resetAttributes(this.dateRangePopUp,e)),this.dateRangePopUp},e.prototype.renderDateParameter=function(e,t,i){var o,a=this.parameterList.filter(function(e){return e.dataType===DynamicParameterDataType.Date}),s=BoldBIDashboard.buildTag("td","",{"padding-left":"End"===i?"20px":"10px",display:"none"},{id:t+"_query_date_"+i+"_parameter_dropdown"}),n=BoldBIDashboard.buildTag("input.e-textbox","",{height:"30px",width:"160px"},{type:"text",id:t+"_date_"+i+"_param"});s.append(n),o=!BoldBIDashboard.isNullOrUndefined(a)&&0<a.length?a[0].value:null,n.BoldBIDashboardDropDownList({width:"130px",height:"26px",popupWidth:n.width(),field:{text:"text",value:"value",name:"name",id:"id"},dataSource:a,enabled:!0,value:o,selectedIndex:null,showRoundedCorner:!0,cssClass:"bbi-dbrd-control",change:this.bbdesigner$.proxy(this.parameterBtwChangeEvent,this,t,i,a)}),e.append(s),this.dashboardDesigner.element.find("#"+t+"_date_"+i+"_param").data("ParameterInfos",{Name:o,Id:0<a.length?a[0].parameterID:o})},e.prototype.renderDateAttribute=function(e,t,i){var o,a,s;this.dashboardDesigner.element.find("#"+t+"_query_date_"+i+"_parameter_dropdown").css("display","none"),o=BoldBIDashboard.buildTag("td","",{"padding-left":"End"===i?"20px":"10px",display:"none"},{id:t+"_query_date_"+i+"_attr_dropdown"}),a=BoldBIDashboard.buildTag("input.e-textbox","",{height:"30px",width:"160px"},{type:"text",id:t+"_date_"+i+"_attr"}),o.append(a),s=!BoldBIDashboard.isNullOrUndefined(this.customAttributeList)&&0<this.customAttributeList.length?this.customAttributeList[0].value:null,a.BoldBIDashboardDropDownList({width:"130px",height:"26px",popupWidth:a.width(),field:{text:"text",value:"value",name:"name",id:"id"},dataSource:this.customAttributeList,enabled:!0,value:s,selectedIndex:null,showRoundedCorner:!0,cssClass:"bbi-dbrd-control",change:this.bbdesigner$.proxy(this.setAttributeValueInfo,this,t,i,this.customAttributeList)}),e.append(o),this.dashboardDesigner.element.find("#"+t+"_date_"+i+"_attr").data("AttributeInfos",{Name:0<this.customAttributeList.length?this.customAttributeList[0].text:null,Value:0<this.customAttributeList.length?this.customAttributeList[0].value:null})},e.prototype.setAttributeValueInfo=function(e,t,i,o){var t=this.dashboardDesigner.element.find("#"+e+"_date_"+t+"_attr"),a=this.dashboardDesigner.element.find("#"+e+"_date_Start_param"),e=this.dashboardDesigner.element.find("#"+e+"_date_End_param"),o={Name:o.text,Value:o.value};t.data("AttributeInfos",o),a.data("ParameterInfos",null),e.data("ParameterInfos",null)},e.prototype.parameterBtwChangeEvent=function(e,t,i,o){var a=this.dashboardDesigner.element.find("#"+e+"_date_Start_attr"),s=this.dashboardDesigner.element.find("#"+e+"_date_End_attr"),e=this.dashboardDesigner.element.find("#"+e+"_date_"+t+"_param"),t=o.model.dataSource.filter(function(e){return e.value===o.value}),t={Name:o.value,Id:0<t.length?t[0].parameterID:o.value};a.data("AttributeInfos",null),s.data("AttributeInfos",null),e.data("ParameterInfos",t)},e.prototype.resetAttributes=function(e,t){e.removeAttr("IsLoaded"),e.removeAttr("Range"),e.removeAttr("StartDate"),e.removeAttr("EndDate"),e.removeAttr("IsPopulate"),this.getStartPicker(t).removeAttr("minDateTime"),this.getEndPicker(t).removeAttr("minDateTime")},e.prototype.showLoadingIndicator=function(e){this.getFieldDiv(e).BoldBIDashboardWaitingPopup("show"),this.getRangeRadioBtn(e).prop("disabled",!0),this.getStartRadioBtn(e).prop("disabled",!0),this.getEndRadioBtn(e).prop("disabled",!0)},e.prototype.hideLoadingIndicator=function(e){this.getFieldDiv(e).BoldBIDashboardWaitingPopup("hide"),this.getRangeRadioBtn(e).prop("disabled",!1),this.getStartRadioBtn(e).prop("disabled",!1),this.getEndRadioBtn(e).prop("disabled",!1)},e.prototype.populateDateRangeDrpDwn=function(e,t,i,o,a,s,n){this.targetTag.find("#"+e+"_dateRange_multidDrpDwn").off("click",this.bbdesigner$.proxy(this.showPopupContainer,this,e,t,i,o,n,s)),this.targetTag.find("#"+e+"_dateRange_multidDrpDwn").on("click",this.bbdesigner$.proxy(this.showPopupContainer,this,e,t,i,o,n,s)),this.populateDateRangePopup(e,a)},e.prototype.resetDateRangeDrpDwn=function(e){BoldBIDashboard.isNullOrUndefined(this.dateRangePopUp)||this.dateRangePopUp.remove(),this.dateRangePopUp=null,this.renderDateRangePopup(e)},e.prototype.renderDateRangeDrpDwn=function(e,t,i,o,a,s,n){this.filterInfo=a,this.targetTag=t;var a=BoldBIDashboard.buildTag("div.list bbi-popup-button","",{width:n||"144px"},{id:e+"_dateRange_multidDrpDwn","e-target":"bbi-daterange-popup"}),r=BoldBIDashboard.buildTag("div.bbi-date-range-drp-dwn-text","",{width:n?n-39+"px":"calc(100% - 35px)"},{id:e+"_dateRange_multiDrpDwn_txt",text:"Date Options"}),l=BoldBIDashboard.buildTag("div.bbi-date-range-drp-dwn-btn","",{},{}),d=BoldBIDashboard.buildTag("span.bbi-designer-ejwidgets-updown e-icon e-arrow-sans-down bbi-date-range-drpdwn-icon","",{});l.append(d),a.append(r).append(l),r.text("Date Options"),t.append(a),a.attr("e-targetId",e+"_dateRange_popup"),a.bind("click",this.bbdesigner$.proxy(this.showPopupContainer,this,e,t,i,o,n,s)),BoldBIDashboard.isNullOrUndefined(this.filterInfo)||this.populateDateRangePopup(e,this.filterInfo)},e.prototype.updateIconIndication=function(e,t){var i=this.getDateRangeDrpDwn(t);"block"===e.css("display")?(i.find(".bbi-designer-ejwidgets-updown").removeClass("e-arrow-sans-down").addClass("e-arrow-sans-up"),i.addClass("e-focus"),this.enableApplyButton(t)):(i.find(".bbi-designer-ejwidgets-updown").removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down"),i.removeClass("e-focus"))},e.prototype.renderRadioButton=function(e,t,i,o,a){var s=this.bbdesigner$("<td unselectable='on'/>");a.append(s),a=BoldBIDashboard.buildTag("div","",{},{}),i={callBackInstance:this,callBackMethod:"onRangeTypeChange",optionalArgs:t,groupName:"formatting",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:i,label:e,isChecked:o,value:t}]},this.selectRadioButton=new BoldBIDashboard.Dashboard.RadioButton(i,a),s.append(a)},e.prototype.renderDateRangePicker=function(e,t,i,o,a,s){var n=BoldBIDashboard.buildTag("td","",{}),r=BoldBIDashboard.buildTag("Label.bbi-designer-add-label",i,{},{type:"label"}),l=BoldBIDashboard.buildTag("td","",{"padding-left":"Start"===i?"9px":"15px",display:"block"},{id:e}),e=BoldBIDashboard.buildTag("input.bbi-popup-button","",{},{type:"text",id:e+"_picker"});n.append(r),l.append(e),o.append(n),this.renderDateAttribute(o,t,i),this.renderDateParameter(o,t,i),o.append(l),e.BoldBIDashboardDateTimePicker({width:"201px",height:"26px",change:this.bbdesigner$.proxy(a,s,t),cssClass:"bbi-designer-border bbi-popup-button e-dashboarddesigner-widget"})},e.prototype.showPopupContainer=function(e,t,i,o,a,s){var n,r=this.renderDateRangePopup(e),l=this.dashboardDesigner.element.find("#"+e+"_param"),d=(this.selectedValue=l.data("selectedType"),l="Parameters"!==this.selectedValue,n="Custom Attributes"!==this.selectedValue,this.parameterList=(l?this:this.dashboardDesigner.modules.queryFilter).parameterList,r.height()),h="block"===r.css("display"),p=t.offset();r.css({display:h?"none":"block","z-index":BoldBIDashboard.getMaxZindex()});h=d<window.innerHeight-(p.top+t.height())?p.top+t.height()+2:p.top-d-4;r.offset({left:p.left+parseFloat(t.css("padding-left"))-(a?26:126),top:h}),l?this.updateIconIndication(r,e):r.find("#"+e+"_dateRange_okBtn").removeAttr("disabled"),n?this.updateIconIndication(r,e):r.find("#"+e+"_dateRange_okBtn").removeAttr("disabled"),"block"===r.css("display")&&l&&(BoldBIDashboard.isNullOrUndefined(r.attr("IsLoaded"))||"false"===r.attr("IsLoaded")?(d=[{Id:o.Id,Name:o.Name,SummaryType:"None",Sorting:"Ascending",FieldType:"Dimensions",MeasureFormatting:null,DateTimeFormat:"Date",FilterInfo:null}],this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.getDateRange,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.FilterAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.getDateRange,fieldInfo:d,dataSetId:i,type:"date",dateRangeType:s,isQueryDesignerMode:this.dashboardDesigner.isQueryDesignerMode})},{fnction:this.bbdesigner$.proxy(this.setFieldInformation,this,e),indicator:[this.bbdesigner$.proxy(this.showLoadingIndicator,this,e),this.bbdesigner$.proxy(this.hideLoadingIndicator,this,e)]})):this.setDatePopupValues(e))},e.prototype.setFieldInformation=function(e,t){var i,o=this.renderDateRangePopup(e),a=this.dashboardDesigner.element.find("#"+e+"_dateRange_Start_picker"),s=this.dashboardDesigner.element.find("#"+e+"_dateRange_end_picker"),n=a.data("BoldBIDashboardDateTimePicker"),r=s.data("BoldBIDashboardDateTimePicker");BoldBIDashboard.isNullOrUndefined(n.model)||(n.model.dateTimeFormat=this.dateFormat,r.model.dateTimeFormat=this.dateFormat),i=BoldBIDashboard.format(BoldBIDashboard.parseDate(t.MinValue,this.dateFormat),this.dateFormat),t=BoldBIDashboard.format(BoldBIDashboard.parseDate(t.MaxValue,this.dateFormat),this.dateFormat),o.attr("isLoaded","true"),a.attr("minDateTime",i).attr("maxDateTime",t),s.attr("minDateTime",i).attr("maxDateTime",t),n.setModel({minDateTime:i,maxDateTime:t}),r.setModel({minDateTime:i,maxDateTime:t}),"true"===o.attr("IsPopulate")?this.setDatePopupValues(e):(n.setModel({value:i}),r.setModel({value:t}))},e.prototype.setAttributeValues=function(e){this.renderDateRangePopup(e)},e.prototype.setDatePopupValues=function(e){var t=this.renderDateRangePopup(e),i=BoldBIDashboard.isNullOrUndefined(t.attr("Range"))?DateFormatOption.Range.toString():t.attr("Range"),o=BoldBIDashboard.isNullOrUndefined(t.attr("StartDate"))?"":t.attr("StartDate"),t=BoldBIDashboard.isNullOrUndefined(t.attr("EndDate"))?"":t.attr("EndDate"),a="block",s="block",n=this.getStartTr(e),r=this.getEndTr(e),l=this.getRangeRadioBtn(e),d=this.getStartRadioBtn(e),h=this.getEndRadioBtn(e);i===DateFormatOption.StartDate.toString()?(l.prop("checked",!1),d.prop("checked",!0),h.prop("checked",!1),s="none",a="block"):i===DateFormatOption.EndDate.toString()?(l.prop("checked",!1),d.prop("checked",!1),h.prop("checked",!0),s="block",a="none"):(l.prop("checked",!0),d.prop("checked",!1),h.prop("checked",!1)),n.css("display",a),r.css("display",s),this.getStartPicker(e).data("BoldBIDashboardDateTimePicker").setModel({value:0===o.length?this.getStartPicker(e).attr("minDateTime"):o}),this.getEndPicker(e).data("BoldBIDashboardDateTimePicker").setModel({value:0===t.length?this.getEndPicker(e).attr("maxDateTime"):t}),this.enableApplyButton(e)},e.prototype.closeDateRangePopup=function(e){var t=this.renderDateRangePopup(e);t.css("display","none"),this.updateIconIndication(t,e)},e.prototype.updateDateFormatCondition=function(e,t){var i=this.getRangeRadioBtn(e),o=this.getStartRadioBtn(e),a=this.getEndRadioBtn(e),s="block",n="block",r=this.getStartTr(e),e=this.getEndTr(e);t===DateFormatOption.StartDate.toString()?(i.prop("checked",!1),o.prop("checked",!0),a.prop("checked",!1),n="none",s="block"):t===DateFormatOption.EndDate.toString()?(i.prop("checked",!1),o.prop("checked",!1),a.prop("checked",!0),n="block",s="none"):(i.prop("checked",!0),o.prop("checked",!1),a.prop("checked",!1)),r.css("display",s),e.css("display",n)},e.prototype.populateDateRangePopup=function(e,t){var i;BoldBIDashboard.isNullOrUndefined(this.dateRangePopUp)||this.dateRangePopUp.remove(),this.dateRangePopUp=null,i=this.renderDateRangePopup(e),this.filterInfo=t,this.getDateRangeDrpDwnTxt(e).text("Date Options"),this.updateIconIndication(i,e),i.attr("IsPopulate","true"),BoldBIDashboard.isNullOrUndefined(t)?(this.resetAttributes(i,e),this.updateDateFormatCondition(e,DateFormatOption.Range.toString())):(i.attr({StartDate:t.StartDate,EndDate:t.EndDate,Range:t.DateFormatCondition}),i=t.DateFormatCondition,this.updateDateFormatCondition(e,i))},e.prototype.updateDateRangeAttr=function(e){var t=this.renderDateRangePopup(e),i=this.getStartRadioBtn(e).prop("checked"),o=this.getEndRadioBtn(e).prop("checked"),a=this.getStartPicker(e).data("BoldBIDashboardDateTimePicker").getValue(),s=this.getEndPicker(e).data("BoldBIDashboardDateTimePicker").getValue();t.css("display","none"),this.updateIconIndication(t,e),this.hideErrorIndicator(e),t.attr("StartDate",a),t.attr("EndDate",s),o?t.attr("Range",DateFormatOption.EndDate.toString()):i?t.attr("Range",DateFormatOption.StartDate.toString()):t.attr("Range",DateFormatOption.Range.toString())},e.prototype.hideErrorIndicator=function(e){e=this.dashboardDesigner.element.find("#"+e).find(".e-error-tip");0<e.length&&e.css("display","none")},e.prototype.getDateRangeValues=function(e){var e=this.renderDateRangePopup(e),t=BoldBIDashboard.isNullOrUndefined(e.attr("Range"))?DateFormatOption.Range.toString():e.attr("Range"),t=(t===DateFormatOption.StartDate.toString()?DateFormatOption.StartDate:t===DateFormatOption.EndDate.toString()?DateFormatOption.EndDate:DateFormatOption.Range).toString(),i=BoldBIDashboard.isNullOrUndefined(e.attr("StartDate"))?"":e.attr("StartDate"),e=BoldBIDashboard.isNullOrUndefined(e.attr("EndDate"))?"":e.attr("EndDate");return{StartDate:i,EndDate:e,DateFormatCondition:t,IsFilterApplied:""!==i||""!==e}},e.prototype.onRangeTypeChange=function(e){var t=e.args.value,i=this.getStartRadioBtn(t).prop("checked"),o=this.getEndRadioBtn(t).prop("checked"),a=this.getStartTr(t),s=this.getEndTr(t),n=this.dashboardDesigner.element.find("#"+t+"_param").data("selectedType"),r="Parameters"===n,l=(l=(BoldBIDashboard.isNullOrUndefined(this.parameterList)&&r?this.dashboardDesigner.modules.queryFilter:this).parameterList).filter(function(e){return e.dataType===DynamicParameterDataType.Date}),l=!BoldBIDashboard.isNullOrUndefined(l)&&0<l.length?l[0].value:null;"change"===e.args.event.type&&(i?(s.css("display","none"),a.css("display","block"),r&&this.dashboardDesigner.modules.queryFilter.setDataForDateDropdowns(t,l,null,n)):o?(a.css("display","none"),s.css({display:"block","margin-top":"6px"}),r&&this.dashboardDesigner.modules.queryFilter.setDataForDateDropdowns(t,null,l,n)):(a.css("display","block"),s.css({display:"block","margin-top":"6px"}),r&&this.dashboardDesigner.modules.queryFilter.setDataForDateDropdowns(t,l,l,n)))},e.prototype.onPickerChange=function(e,t){t.isInteraction&&this.enableApplyButton(e)},e.prototype.enableApplyButton=function(e){var t=this.getStartPicker(e).data("BoldBIDashboardDateTimePicker").getValue(),i=this.getEndPicker(e).data("BoldBIDashboardDateTimePicker").getValue(),o=this.getStartPicker(e).attr("minDateTime"),a=this.getStartPicker(e).attr("maxDateTime"),s=this.getApplyBtn(e),n=this.getStartRadioBtn(e).prop("checked"),e=this.getEndRadioBtn(e).prop("checked");BoldBIDashboard.DashboardUtil.buttonEnable(s,n?t!==o:!e&&t!==a||i!==a)},e.prototype.updateDateFormat=function(){this.dateFormat=this.dashboardDesigner.model.localeSettings.dateFormat+" "+this.dashboardDesigner.model.localeSettings.timeFormat},e.prototype.getRangeRadioBtn=function(e){return this.dashboardDesigner.element.find("#"+e+"_RangeBtn_rdo_input")},e.prototype.getStartRadioBtn=function(e){return this.dashboardDesigner.element.find("#"+e+"_startBtn_rdo_input")},e.prototype.getEndRadioBtn=function(e){return this.dashboardDesigner.element.find("#"+e+"_endBtn_rdo_input")},e.prototype.getDateRangeDrpDwn=function(e){return this.targetTag.find("#"+e+"_dateRange_multidDrpDwn")},e.prototype.getStartPicker=function(e){return this.dashboardDesigner.element.find("#"+e+"_dateRange_Start_picker")},e.prototype.getEndPicker=function(e){return this.dashboardDesigner.element.find("#"+e+"_dateRange_end_picker")},e.prototype.getStartTr=function(e){return this.dashboardDesigner.element.find("#"+e+"_dateRange_start_tr")},e.prototype.getEndTr=function(e){return this.dashboardDesigner.element.find("#"+e+"_dateRange_end_tr")},e.prototype.getDateRangeDrpDwnTxt=function(e){return this.targetTag.find("#"+e+"_dateRange_multiDrpDwn_txt")},e.prototype.getApplyBtn=function(e){return this.dashboardDesigner.element.find("#"+e+"_dateRange_okBtn")},e.prototype.getFieldDiv=function(e){return this.dashboardDesigner.element.find("#"+e+"_dateRange_fieldDiv")},e.prototype.updateParameterListInfo=function(e){this.parameterList=e},e}(),window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.DateRangePopup",InternalDateRangePopup,window),function(e){e[e.Range="Range"]="Range",e[e.StartDate="StartDate"]="StartDate",e[e.EndDate="EndDate"]="EndDate"}(DateFormatOption=DateFormatOption||{}),this&&this.__extends||function(){var o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}))(e,t)};return function(e,t){function i(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}()),ComboBoxProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ComboBoxProperties",e.EnableMultiSelection=!1,e.AllowFilter=!1,e.SelectFirstItemByDefault=!1,e.DefaultSelectedIndices="0",e.UrlLink=null,e.IsAllSelected=!1,e.ParameterFieldSelected=[],e.ShowAll=!0,e.PlaceHolder=new PlaceHolder,e.DisplayText="",e}return __extends(e,t),e}(WidgetProperties),PlaceHolder=function(){this.Text="",this.IsEdited=!1},TextFilterProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.TextFilterProperties",e}return __extends(e,t),e}(WidgetProperties),QAProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.QAProperties",e.SearchQuery="",e.IsStandardWidget=!1,e.FilterSettings.IgnoreFilterActions=!0,e}return __extends(e,t),e}(WidgetProperties),GridProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.GridProperties",e.AllowSorting=!0,e.AllowResizing=!0,e.AllowPaging=!1,e.FitContent=!1,e.ShowTooltip=!0,e.AllowFilter=!1,e.FilterType=FilterType.FilterBar,e.ShouldEnableCheckBox=!1,e.HorizontalGridLine=!0,e.VerticalGridLine=!1,e.EnableAlternativeRowColor=!1,e.RawData=!1,e.ShowHeader=!0,e.ShowBorder=!0,e.IsAutoHeaderFontSize=!0,e.HeaderFontSize=16,e.IsAutoRowFontSize=!0,e.RowFontSize=16,e.HeaderPadding=11,e.ContentPadding=11,e.EnableDataGrouping=!0,e.GridTemplate=[],e.HeaderSettings=new HeaderSettings,e.PoPSlaveSettings=new PoPSlaveSettings,e.HeaderHeight=42,e.RowHeight=32,e.EnableHeaderTextWrap=!1,e.EnableContentTextWrap=!1,e.ColumnAlignments=[],e.AlternativeRow=new ColorProperty,e.GridValueSection=new ColorProperty,e.NewHeaderSettings=new ColorProperty,e.AlternativeRow.Foreground.Color="#000000",e.AlternativeRow.Background.Color="#f7f7f7",e.GridValueSection.Foreground.Color="#000000",e.GridValueSection.Background.Color="#ffffff",e.NewHeaderSettings.Foreground.Color="#2D3748FF",e.NewHeaderSettings.Background.Color="#F3F7FAFF",e.PageSize=100,e.DisableVirtualization=!1,e.SummaryRowSettings=new SummaryRowSettings,e}return __extends(e,t),e}(TableWidgetProperties),ColumnAlignments=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.ColumnAlignments",this.HeaderAlign=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,TextAlignment.Left),this.TextAlign=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,TextAlignment.Left),this.ColumnWidth="",this.ResizedColumnWidth=null,this.IsColumnWidthModified=!1},PoPSlaveSettings=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.Grid.PoPSlaveSettings",this.PoPColumnSettings=[],this.PrimaryBackgroundColor=new ColorSet,this.PrimaryBackgroundColor.Color="var(--pop-widgetcontainer-daterangelabel-background)",this.SecondaryBackgroundColor=new ColorSet,this.SecondaryBackgroundColor.Color="var(--pop-widgetcontainer-comparerangelabel-background)"},PoPColumnSettings=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.Grid.PoPColumnSettings",this.IsSlaveForPop=!0,this.PopType="Absolute Difference"},GridColumnSetting=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.GridColumnSetting"},HeaderSettings=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.HeaderSettings",this.Foreground="#2D3748FF",this.Background="#F3F7FAFF"},ColorProperty=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.ColorProperty",this.Foreground=new ColorSet,this.Background=new ColorSet},ColorSet=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.ColorSet",this.Color="",this.IsEdited=!1},SummaryRowSettings=function(){this.EnableSummaryRow=!1,this.SummaryColumn=[],this.BackgroundColor=new ColorSet,this.BackgroundColor.Color="#F3F7FAFF",this.IsAutoHeight=!0,this.IsAutoPadding=!0,this.IsAutoFontSize=!0,this.Height=50,this.Padding=15,this.FontSize=12},SummaryColumn=function(){this.SummaryRow=[]},SummaryRow=function(){this.UniqueColumnName="",this.UniqueRowName="",this.Name="",this.Id="",this.Color="",this.SummaryType=SummaryType.SUM,this.ShowValue=!0,this.CustomExp="",this.MeasureFormat=new MeasureFormatting,this.Title=new ColorSet,this.Value=new ColorSet,this.Alignment=new SummaryRowAlignment,this.IsSummaryRowExpression=!1},SummaryRowAlignment=function(){this.Title="left",this.Value="right"},HeatMapProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMapProperties",e.CellSettings=new CellSettings,e.XAxisSettings=new AxisSettings,e.YAxisSettings=new AxisSettings,e.LegendSettings=new LegendSettings,e.ColorSettings=new ColorSettings,e.DefaultColor=new DefaultColorSet,e.SortSettings=new SortSettings,e.ColorGradientMode=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ColorGradientMode,ColorGradientMode.Table),e.EnableDrilldown=!1,e}return __extends(e,t),e}(VisualTooltipWidgetProperties),PivotViewProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotViewProperties",e.GroupBarSettings=new GroupBarSettings,e.GroupBarSettings.GroupPanelBackgroundColor.Color="#F3F7FA",e.BasicSettings=new BasicSettings,e.GrandTotalSettings=new GrandTotalSettings,e.FieldSettings=new FieldSettings,e.DrilledMembers=[],e.SelectionCellInfo=new SelectionCellInfo,e.HeaderSettings=new PivotHeaderSettings,e.ContentSettings=new ContentSettings,e.IsAutoHeaderFontSize=!0,e.HeaderFontSize=16,e.IsAutoContentFontSize=!0,e.ContentFontSize=16,e.NewHeaderSettings=new ColorProperty,e.NewHeaderSettings.Foreground.Color="#2D3748",e.NewHeaderSettings.Background.Color="#F3F7FA",e.AlignmentSettings=new PivotAlignmentSettings,e}return __extends(e,t),e}(TableTooltipWidgetProperties),DrilledMembers=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.DrilledMembers",this.Name="",this.Items=[]},PivotHeaderSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.PivotHeaderSettings",this.Row=new HeaderColorSettings,this.Column=new HeaderColorSettings},HeaderColorSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.HeaderColorSettings",this.Foreground="#2D3748",this.Background="#F3F7FA"},ContentSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.ContentSettings",this.RowHeight=48,this.ColumWidth=110,this.HeaderColumWidth=250},PivotAlignmentSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.PivotAlignmentSettings",this.RowHeader="Left",this.ColumnHeader="Left",this.Value="Right"},GroupBarSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.GroupBarSettings",this.ShowSortIcon=!0,this.ShowFilterIcon=!0,this.ShowGroupBar=!0,this.GroupPanelBackgroundColor=new ColorSet,this.GroupPanelBackgroundColor.Color="#F3F7FA"},BasicSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.BasicSettings",this.EnableValueSorting=!0,this.ExpandAllNode=!1,this.ShowNoDataItems=!1,this.ShowTooltip=!0,this.AllowTextWrap=!1,this.AllowColumnResize=!1,this.AllowContentToFit=!1,this.ShowValuesInRowAxis=!1,this.EnablePersistence=!1,this.HideEmptyHeaders=!1,this.EmptyCellsContent=""},SelectionCellInfo=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.SelectionCellInfo",this.IsSelected=!1},GrandTotalSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.GrandTotalSettings",this.ShowRowGrandTotals=!0,this.ShowColumnGrandTotals=!0,this.ShowRowSubTotals=!0,this.ShowColumnSubTotals=!0,this.RowGrandTotalText="",this.ColumnGrandTotalText=""},FieldSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.FieldSettings",this.CustomFieldSettings=[]},PivotViewFieldSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PivotView.PivotViewColumnSetting",this.DisplayName="",this.UniqueColumnName="",this.IsEdited=!1,this.CaptionName="",this.ShowNoDataItem=!1},ColorSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.HeatMap",this.MinColor="",this.MaxColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0].substring(1)+"#FF"},AxisSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMap.AxisSettings",this.AxisTitle="",this.ShowAxisLabel=!0,this.ShowAxisTitle=!0,this.InversedAxis=!1,this.OpposedAxis=!1,this.LabelIntersectAction=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LabelIntersectAction,LabelIntersectAction.Trim),this.LabelRotation=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelRotations,ValueLabelRotations.Auto),this.EnableTrim=!1,this.MaximumLabelLength=100},LegendSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMap.LegendSettings",this.ShowLegend=!1,this.Position=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Auto)},SortSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.HeatMap.SortSettings",this.XAxis=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortSetting,SortSetting.Auto),this.YAxis=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(SortSetting,SortSetting.Auto)},CellSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMap.CellSettings",this.CellBorder=1,this.CellRadius=3,this.ShowDataLabel=!1,this.ShowTooltip=!0,this.TileType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(TileType,TileType.Rect),this.LabelColor=new ColorSet,this.LabelColor.Color="#505D6F",this.XAxisLabelColor=new ColorSet,this.XAxisLabelColor.Color="#505D6F",this.YAxisLabelColor=new ColorSet,this.YAxisLabelColor.Color="#505D6F"},GridTemplate=(function(e){e[e.Table="Table"]="Table",e[e.Column="Column"]="Column",e[e.Row="Row"]="Row"}(ColorGradientMode=ColorGradientMode||{}),function(e){e[e.Bubble="Bubble"]="Bubble",e[e.Rect="Rect"]="Rect"}(TileType=TileType||{}),function(e){e[e.Center="Center"]="Center",e[e.Near="Near"]="Near",e[e.Far="Far"]="Far"}(LegendAlignment=LegendAlignment||{}),function(e){e[e.None="None"]="None",e[e.Trim="Trim"]="Trim"}(LabelIntersectAction=LabelIntersectAction||{}),function(e){e[e.FilterBar=0]="FilterBar",e[e.Menu=1]="Menu",e[e.Excel=2]="Excel"}(FilterType=FilterType||{}),UrlLink=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.UrlLink",this.EnableLink=!1,this.EscapeSpecialCharacter=!1,this.EnableParameterEncryption=!1,this.PassingParameters=[],this.ColumnUrlDetails=[],this.UrlPath="",this.LinkType=LinkType.Url,this.GridUrlType=UrlLinkType.Row,this.TargetTypeInfo="_Blank",this.Height=100,this.Width=100,this.Title=""},ColumnUrl=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.ColumnUrl"},function(e){e[e.Dashboard=0]="Dashboard",e[e.Tab=1]="Tab",e[e.Url=2]="Url"}(LinkType=LinkType||{}),function(e){e[e.Row=0]="Row",e[e.Column=1]="Column",e[e.Value=2]="Value"}(UrlLinkType=UrlLinkType||{}),WidgetLink=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.WidgetLink",this.Enable=!1,this.WidgetList=[]},LinkedWidgetList=function(){this.Widget="",this.LinkType=WidgetLinkType.Default,this.CustomIndex=""},function(e){e[e.Default=0]="Default",e[e.Custom=1]="Custom"}(WidgetLinkType=WidgetLinkType||{}),function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.gridTemplate",this.DisplayType=DisplayType.Value}),ConditionalFormatting=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.ConditionalFormatting",this.TargetMeasureColumn=new Column,this.MeasureConditionType=MeasureConditionType.Equals,this.DimensionConditionType=DimensionConditionType.Equals,this.FormatType=ConditionalFormatType.Column,this.ColorStyle=ColorType.SingleColor},Column=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.Column"},Styles=(function(e){e[e.Equals="Equals"]="Equals",e[e.LessThan="Less Than"]="LessThan",e[e.LessThanOrEqual="Less Than Or Equal To"]="LessThanOrEqual",e[e.GreaterThanOrEqual="Greater Than Or Equal To"]="GreaterThanOrEqual",e[e.GreaterThan="Greater Than"]="GreaterThan",e[e.NotEquals="Does Not Equal"]="NotEquals",e[e.Between="Between"]="Between"}(MeasureConditionType=MeasureConditionType||{}),function(e){e[e.Equals="Equals"]="Equals",e[e.NotEquals="Does Not Equal"]="NotEquals",e[e.Contains="Contains"]="Contains",e[e.NotContains="Does Not Contains"]="NotContains",e[e.StartsWith="Starts With"]="StartsWith",e[e.EndsWith="Ends With"]="EndsWith"}(DimensionConditionType=DimensionConditionType||{}),function(e){e[e.Column="Column"]="Column",e[e.Row="Row"]="Row",e[e.Indication="Indication"]="Indication"}(ConditionalFormatType=ConditionalFormatType||{}),function(e){e[e.Number="Number"]="Number",e[e.Currency="Currency"]="Currency",e[e.Percentage="Percentage"]="Percentage"}(MeasureFormatType=MeasureFormatType||{}),function(e){e[e.SingleColor="Single Color"]="SingleColor",e[e.GradientColor="Gradient Color"]="GradientColor"}(ColorType=ColorType||{}),function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.Styles"}),FontFormats=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.FontFormats"},TreeMapProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.TreeMapProperties",e.ShowLegend=!1,e.ShowValueLabel=!1,e.EnableDrilldown=!1,e.ShowTooltip=!0,e.IsCustomRange=null,e.SaturatedColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0].substring(1)+"#FF",e.MaxColor="#FBCB43FF",e.MidColor="#E57368FF",e.MinColor="#77A7FBFF",e.LabelColor="#1E1E1E",e.UrlLink=new UrlLink,e.DefaultColor=new DefaultColorSet,e}return __extends(e,t),e}(VisualTooltipWidgetProperties),CustomWidgetProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.CustomWidgetProperties",e.UrlLink=new UrlLink,e.CustomProperties=[],e}return __extends(e,t),e}(VisualWidgetProperties),CustomProperty=function(){},MapsCommonProp=function(t){function e(e){e=t.call(this,e)||this;return e.ShapeData="WorldMap_Countries",e.ShapePropertyPath="name",e.ShapeType="Country",e}return __extends(e,t),e}(VisualTooltipWidgetProperties),BubbleMapProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleMapProperties",e.BubbleColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0].substring(1)+"#FF",e}return __extends(e,t),e}(MapsCommonProp),ChoroplethMapProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChoroplethMapProperties",e.ShowLegend=!1,e.IsPaletteColor=!0,e.MaxColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0].substring(1)+"#FF",e.MinColor="#fae8eaFF",e}return __extends(e,t),e}(MapsCommonProp),MapProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.MapProperties",e.ShowLegend=!1,e.ShowLegendTitle=!0,e.LegendTitle="",e.IsAutoLegendFontSize=!0,e.LegendFontSize=16,e.IsAutoLegendTitleFontSize=!0,e.LegendTitleFontSize=16,e.IsAutoValueLabelFontSize=!0,e.ValueLabelFontSize=12,e.ShowTooltip=!0,e.IsPaletteColor=!0,e.MaxColor="#F6727FFF",e.MinColor="#FFC2D8FF",e.UrlLink=new UrlLink,e.MapType="Choropleth",e.MarkerShape="Balloon",e.MarkerShapeColor="#494ca2",e.ValueType=MapValueType.LocationName,e.EnableZooming=!0,e.ShowLabel=!1,e.ImageUrl=null,e.EnableColorSettings=!1,e.MarkerWidth=10,e.MarkerHeight=15,e.LegendPosition="Top",e.ImageSource="Local",e.ImageName=null,e.URLPattern="{0}",e.ImageSrc=null,e.ImageLocalUrl=null,e.MarkerCustomization=new MarkerCustomizeSettings,e.EnableMultiSelection=!1,e.DefaultColor=new DefaultColorSet,e.LabelColor=new ColorSet,e.LabelColor.Color="#000000",e.LegendType="Layers",e.DefaultMarkerZoom=!1,e}return __extends(e,t),e}(MapsCommonProp),MarkerCustomizeSettings=function(){this.MarkerShape="",this.MarkerImage=null,this.MarkerColor="",this.MarkerHeight=0,this.MarkerWidth=0,this.DefaultImageUrl=null,this.DefaultMarkerColor="#494ca2",this.DefaultMarkerHeight=15,this.DefaultMarkerWidth=10,this.DefaultMarkerShape="Balloon"},BingMapProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BingMapProperties",e.MapType="r",e.ShowZoomIcon=!1,e.ShowTooltip=!0,e.DisableZoomAndPan=!1,e.ShapeType="CountryRegion",e.MapShape="Choropleth",e.MarkerShape="Round",e.MarkerShapeColor="#494ca2",e.MarkerSize=14,e.MarkerImage="Local",e.MarkerImageUrl=null,e.MarkerUrlPattern="{0}",e.MarkerLocalImageName=null,e.MarkerLocalImageUrl=null,e.DefaultColor=new DefaultColorSet,e.DefaultColor.Color="#F6727F",e.MarkerCustomization=new MarkerCustomizeSettings,e.UrlLink=new UrlLink,e.InitialZoomState="",e.APIType="",e}return __extends(e,t),e}(VisualTooltipWidgetProperties),LabelProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.LabelProperties",e.Name="Label1",e.LineCollection=[],e.LabelBackgroundColor="#ffffff",e}return __extends(e,t),e}(WidgetProperties),LineProperties=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.LineProperties",this.TextCollections=[],this.LineStyleProperties=new LineStyleProperties},TextCollectionProperties=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.TextCollectionProperties",this.Text=[]},TextProperties=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.TextProperties",this.Content="",this.TextStyle=new TextStyleProperties},TextStyleProperties=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.TextStyleProperties",this.FontSize="10px",this.FontFamily="Arial",this.FontColor="Black",this.FontStyle="Normal",this.TextDecoration="Normal",this.FontWeight="Normal",this.TextHighlightColor="#f5ea14"},LineStyleProperties=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.LineStyleProperties",this.LineTextAlignment="Left"},DatePickerProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.DatePickerProperties",e.LimitDates=!1,e.Type=DatePickerType.Single,e.HighlightAvailableDates=!1,e.UrlLink=null,e.ShowLatestDate=!1,e.EnableFixedCalendarSelection=!1,e.DefaultDate=DatePickerDefaultDate.None,e}return __extends(e,t),e}(WidgetProperties),VirtualScrollSettings=(function(e){e[e.Single=0]="Single",e[e.Range=1]="Range"}(DatePickerType=DatePickerType||{}),function(e){e[e.None=0]="None",e[e.Today=1]="Today",e[e.Yesterday=2]="Yesterday",e[e.Tomorrow=3]="Tomorrow"}(DatePickerDefaultDate=DatePickerDefaultDate||{}),PoPProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.PoPProperties",e.FilterSettings.ActAsMasterWidget=!0,e.FilterSettings.IgnoreFilterActions=!0,e.UrlLink=null,e}return __extends(e,t),e}(WidgetProperties),RangeSliderProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RangeSliderProperties",e.Type=RangeSliderType.Range,e.Orientation=RangeSliderOrientation.Auto,e.UrlLink=null,e.LabelColor=new ColorSet,e.SliderColor=new ColorSet,e.LabelColor.Color="#505D6F",e.SliderColor.Color=BoldBIDashboard.DashboardUtil.defaultColorPalette[0],e.SliderInterval=1,e}return __extends(e,t),e}(WidgetProperties),function(e){e[e.MinRange=0]="MinRange",e[e.Range=1]="Range"}(RangeSliderType=RangeSliderType||{}),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical",e[e.Auto=2]="Auto"}(RangeSliderOrientation=RangeSliderOrientation||{}),ListBoxProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ListBoxProperties",e.EnableMultiSelection=!1,e.UrlLink=null,e.ShowAll=!0,e.IsAllSelected=!1,e}return __extends(e,t),e}(WidgetProperties),GaugeSettings=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.GaugeProperties",e.RangeColor=BoldBIDashboard.DashboardUtil.defaultColorPalette[0],e.ScaleColor="#E0E0E0",e.Direction=GaugeDirection.HighIsGood,e.MinValue=0,e.MaxValue=100,e.CustomTarget=70,e.RangeCollection=[new GaugeRangeSettings(0,33,"#FF6C40","Range-1",""),new GaugeRangeSettings(33,66,"#FFE700","Range-2",""),new GaugeRangeSettings(66,100,"#2CD9C5","Range-3","")],e.RangeValueType=RangeValueType.DefaultColor,e.RangeLabelType=RangeValueType.DefaultColor,e.GaugeType=GaugeTypes.HorseShoe,e.RangeWidth=RangeWidth.Medium,e.TicksPosition=TicksPosition.Outside,e.ValuePointer=ValuePointers.RangePointer,e.TargetPointer=TargetPointers.InvertedTriangle,e.ValueLabelPosition=ValueLabelPosition.Inside,e.ScaleLabelPosition=ScaleLabelPosition.Outside,e.ShowValueLabel=!0,e.ShowScaleLabel=!0,e.ShowActualValue=!0,e.ShowDifferenceValue=!0,e.ShowTicks=!1,e.EnableAnimation=!1,e.ShowTooltip=!0,e.TicksHeight=5,e.TicksWidth=1,e.ScaleWidth=40,e.ShowRange=!1,e.NeedlePointerHeight=60,e.LabelType=LabelType.ValueLabel,e.TargetPointerColor="#424242",e.NeedlePointerColor="#505D6F",e.BackgroundColor="transparent",e.ValueColor="#505D6F",e.TitleColor="#000000",e.LabelColor="#505D6F",e.PercentValueColor="#000000",e.PercentValueSize=15,e.HighColor="#2CD9C5",e.LowColor="#FF6C40",e.MediumColor="#FFE700",e.IsCustomRange=!1,e.DefaultColor=new DefaultColorSet,e.GaugeFontSettings=new GaugeFontSettings,e}return __extends(e,t),e}(VisualTooltipWidgetProperties),function(e){e[e.HalfRadialGauge="Half Circle"]="HalfRadialGauge",e[e.HorseShoe="Horse Shoe"]="HorseShoe",e[e.FullRadialGauge="Full Circle"]="FullRadialGauge",e[e.Auto="Auto"]="Auto"}(GaugeTypes=GaugeTypes||{}),function(e){e[e.DefaultColor="Default Color"]="DefaultColor",e[e.RangeColor="Range Color"]="RangeColor"}(RangeValueType=RangeValueType||{}),GaugeRangeSettings=function(e,t,i,o,a){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Gauge.GaugeRangeSettings",this.Start=e,this.End=t,this.Color=i,this.Name=o,this.Label=a},GaugeFontSettings=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Gauge.GaugeFontSettings",this.IsAutoScaleLabelFontSize=!0,this.ScaleLabelFontSize=12,this.IsAutoActualValueFontSize=!0,this.ActualValueFontSize=16,this.IsAutoDifferenceValueFontSize=!0,this.DifferenceValueFontSize=10,this.IsAutoSeriesTitleFontSize=!0,this.SeriesTitleFontSize=10},function(e){e[e.HighIsGood=0]="HighIsGood",e[e.LowIsGood=1]="LowIsGood"}(GaugeDirection=GaugeDirection||{}),function(e){e[e.RangePointer="Range Pointer"]="RangePointer",e[e.NeedlePointer="Needle Pointer"]="NeedlePointer",e[e.RangeWithNeedle="Range with Needle"]="RangeWithNeedle"}(ValuePointers=ValuePointers||{}),function(e){e[e.Triangle="Triangle"]="Triangle",e[e.InvertedTriangle="Inverted Triangle"]="InvertedTriangle",e[e.Line="Line"]="Line"}(TargetPointers=TargetPointers||{}),function(e){e[e.Inside=0]="Inside",e[e.Outside=1]="Outside"}(TicksPosition=TicksPosition||{}),function(e){e[e.Inside=0]="Inside",e[e.Outside=1]="Outside"}(ValueLabelPosition=ValueLabelPosition||{}),function(e){e[e.Inside=0]="Inside",e[e.Outside=1]="Outside"}(ScaleLabelPosition=ScaleLabelPosition||{}),function(e){e[e.Thin=0]="Thin",e[e.Medium=1]="Medium",e[e.Thick=2]="Thick"}(RangeWidth=RangeWidth||{}),function(e){e[e.ValueLabel="Value Label"]="ValueLabel",e[e.RangeLabel="Range Label"]="RangeLabel"}(LabelType=LabelType||{}),function(){this.PageSize=100,this.StartIndex=1,this.FieldLastRecord=[]}),CardProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.CardProperties",e.PrimaryValueType=PrimaryValueType.PercentOfTarget,e.SecondaryValueType="Variation",e.ActualValueForeground="#686262",e.TitleSettings=new TitleSetting,e.SubTitleSettings=new SubTitleSetting,e.CustomRangeSettings=new CardCustomRangeSetting,e.ActualValuePrefix="",e.TargetValuePrefix="",e.Direction=!0,e.HasCustomTitle=!1,e.ValueAlignment=TextAlignment.Right,e.ShowIndicatorOnly=!1,e.EnableCompactView=!1,e.ShowActualValue=!0,e.ShowSecondaryValue=!0,e.ShowPrimaryValue=!0,e.ShowIndicator=!0,e.UniformSizing=!1,e.SparklineSettings=new SparkLineSettings,e.ActualValueTextAlignment=TextAlignment.Right,e.AdditionalValueAlignment=TextAlignment.Right,e.SecondaryValueAlignment=TextAlignment.Right,e.PrimaryValueAlignment=TextAlignment.Right,e}return __extends(e,t),e}(WidgetProperties),TitleSetting=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.TitleSetting",this.Visibility=!0,this.Alignment=TextAlignment.Left,this.Color="#686262"},SubTitleSetting=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.SubTitleSetting",this.Visibility=!1,this.Color="#686262"},CardCustomRangeSetting=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.CardCustomRangeSetting",this.Type=CustomRangeType.Absolute,this.Ranges=[]},CardCustomRange=(function(e){e[e.Absolute=0]="Absolute",e[e.Percent=1]="Percent"}(CustomRangeType=CustomRangeType||{}),function(e){e[e.AbsoluteDifference="Absolute Difference"]="AbsoluteDifference",e[e.PercentOfDifference="Percent of Difference"]="PercentOfDifference",e[e.PercentOfTarget="Percent of Target"]="PercentOfTarget",e[e.ActualValue="Actual Value"]="ActualValue",e[e.PercentOfChange="Percent of Change"]="PercentOfChange"}(PrimaryValueType=PrimaryValueType||{}),SparkLineSettings=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.SparkLineSettings",this.LowValueColor="#1F497D",this.HighValueColor="#FFC000",this.ShowMarker=!0,this.Opacity=1,this.Type=SparkLineType.Line},function(e){e[e.Line=0]="Line",e[e.Area=1]="Area",e[e.Column=2]="Column"}(SparkLineType=SparkLineType||{}),function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.CardCustomRange"}),KPICardProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICardProperties",e.TitleSettings=new KPICardTitleSettings,e.IndicatorSettings=new IndicatorSettings,e.KPIValueSettings=new KPIValueSettings,e.LeftValueSettings=new ValueSettings(!0),e.RightValueSettings=new ValueSettings(!1),e.LeftCaptionSettings=new CaptionSettings,e.RightCaptionSettings=new CaptionSettings,e.ImageSettings=new CardImageSettings,e.BackgroundSettings=new BackgroundSettings,e.SparklineSettings=new SparklineSettings,e.ColorSettings=new KPICardColorSettings,e.Direction="High is Good",e.ShowTooltip=!0,e.SeparatorSettings=new SeparatorSettings,e.FormatSettings=new MeasureFormatting,e.UrlLink=new UrlLink,e.AnimationSettings=new AnimationSettings,e.SeriesSettings=new SeriesSettings,e.IsFixedLayout=!1,e.ResponsiveMargin=!1,e}return __extends(e,t),e}(VisualTooltipWidgetProperties),KPICardTitleSettings=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.KPICardTitleSettings",this.Visibility=!0,this.Color="#505D6FFF",this.AutoFontSize=!0,this.FontSize=16},IndicatorSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.IndicatorSettings",this.LowValueType="PointerDown",this.HighValueType="PointerUp",this.WarningType="Round",this.Visibility=!0,this.Color="Green",this.AutoFontSize=!0,this.FontSize=24,this.ColorType="Direction Color",this.Placement="KPI Value",this.Position="Left"},KPIValueSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.KPIValueSettings",this.ValueType="Absolute Difference",this.Visibility=!0,this.Color="#505D6FFF",this.AutoFontSize=!0,this.FontSize=64,this.ColorType="Custom Color"},ValueSettings=function(e){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.ValueSettings",this.AutoFontSize=!0,this.FontSize=16,this.ValueColor=new ColorSet,this.ValueColor.Color="#505D6FFF",this.Visibility=!0,this.ValueType=e?"Actual Value":"Target Value",this.ColorType="Custom Color"},CaptionSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.CaptionSettings",this.CaptionColor=new ColorSet,this.CaptionColor.Color="#505D6FFF",this.AutoFontSize=!0,this.FontSize=16,this.Visibility=!0,this.ColorType="Custom Color"},CardImageSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.CardImageSettings",this.ImageMode="Uniform",this.ImageUrl="",this.ImageSource="Local",this.URLPattern="{0}",this.Visibility=!1,this.FilePath="",this.ImageName="",this.ImagePosition="Left"},BackgroundSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.BackgroundColorSettings",this.Color="#ffffffff",this.PlotArea="KPI Background",this.Image=new CardImageSettings,this.Transparency=.5},SparklineSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.SparklineSettings",this.Fill="#0d9948FF",this.Visibility=!0,this.ColorType="Direction Color",this.Opacity=1},KPICardColorSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.KPICardColorSettings",this.HighValueColor="#2CD9C5FF",this.LowValueColor="#FF6C40FF",this.NeutralColor="#e5ed00FF",this.Direction="High is Good"},SeparatorSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.KPICard.SeparatorSettings",this.Color="#9AA1A9FF"},ComboChartProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ComboChartProperties",e.ChartType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ChartTypes,ChartTypes.ComboChart),e.EnableAnimation=!1,e.ShowLegend=!0,e.Interactivity=!0,e.ShowTooltip=!0,e.IsAutoLegendFontSize=!0,e.LegendFontSize=16,e.DefaultColors=[],e.ShowValueLabels=!1,e.EnableSmoothScroll=!1,e.ValueLabelRotation=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelRotations,ValueLabelRotations.None),e.LegendPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Auto),e.LegendTitle="",e.IsAutoLegendTitleFontSize=!0,e.LegendTitleFontSize=16,e.ShowValueLabelSuffix=!1,e.ValueLabelSuffix="",e.PrimaryValueGridLines=!0,e.SecondaryValueGridLines=!1,e.CategoryGridLines=!1,e.ShowMarker=!0,e.ShowNoDataItem=!1,e.Axis=new Axis,e.DataLabel=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DataLabel,DataLabel.Percentage),e.IsEnableDrillDown=!1,e.DisplayNames=[],e.IsBasicChartType=!1,e.CustomLegendBtnVisibilty=!1,e.CustomLegendInfo=new CustomLegendSettings,e.CustomValueLabels=[],e.IsCustomLegend=!1,e.IsColorPaletteCategoryVisible=!1,e.IsDefaultColorPalette=!0,e.ColorPaletteModel=[],e.TrendLineSettings=[],e.ChartSeriesTypeInfo=[],e.LineStyleInfo=null,e.PrimaryAxisRange=new AxisRange,e.SecondaryAxisRange=new AxisRange,e.ForecastProperties=new ForecastProperties,e.LegendShape=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendShape,LegendShape.Circle),e.ColumnSpacing=.2,e.ColumnWidth=.7,e.ValueLabel=new ColorSet,e.LegendLabel=new ColorSet,e.AxisTitle=new ColorSet,e.AxisLabel=new ColorSet,e.ValueLabel.Color="#000000",e.LegendLabel.Color="#000000",e.AxisTitle.Color="#000000",e.AxisLabel.Color="#000000",e.EnableMultiSelection=!1,e.IsAutoValueLabelFontSize=!0,e.ValueLabelFontSize=16,e.ValueLabelPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelPlacement,ValueLabelPlacement.Auto),e}return __extends(e,t),e}(VisualTooltipWidgetProperties),ChartSeriesType=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ChartSeriesType",this.UniqueColumnName="",this.ChartType="",this.IsSecondaryAxis=!1,this.FieldName=""},BubbleScatterChartProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleScatterChartProperties",e.EnableAnimation=!1,e.ShowLegend=!0,e.Interactivity=!0,e.ShowTooltip=!0,e.LegendPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Auto),e.ChartSeriesType=[],e.CustomLegendInfo=new CustomLegendSettings,e.IsCustomLegend=!1,e.ShowValueLabel=!1,e.PrimaryValueGridLines=!0,e.CategoryAxisGridLines=!1,e.DefaultColors=[],e.ColorPaletteModel=[],e.UrlLink=new UrlLink,e.CategoryAxisSettings=new BubbleScatterCategoryAxis,e.PrimaryValueAxisSettings=new BubbleScatterPrimaryValueAxis,e.IsDefaultColorPalette=!0,e.PrimaryAxisRange=new AxisRange,e.SecondaryAxisRange=new AxisRange,e}return __extends(e,t),e}(VisualTooltipWidgetProperties),RadarPolarChartProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RadarPolarChartProperties",e.DrawType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DrawType,DrawType.Polar),e.ChartType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(RadarPolarType,RadarPolarType.Area),e.EnableAnimation=!1,e.ShowMarker=!0,e.ShowLegend=!0,e.Interactivity=!0,e.ShowTooltip=!0,e.LegendPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPosition,LegendPosition.Bottom),e.EditLegend=new CustomLegendSettings,e.ShowValueLabel=!1,e.UrlLink=new UrlLink,e.Inversed=!1,e.PrimaryAxisRange=new AxisRange,e.CustomLegendBtnVisibilty=!1,e.IsCustomLegend=!1,e.IsDefaultColorPalette=!0,e.ColorPaletteModel=[],e.DefaultColors=[],e.CategoryAxisSettings=new RadarPolarCategoryAxis,e.PrimaryValueAxisSettings=new RadarPolarPrimaryValueAxis,e.PrimaryValueGridLines=!0,e.CategoryAxisGridLines=!0,e.LegendShape=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendShape,LegendShape.Circle),e.ValueLabel=new ColorSet,e.LegendLabel=new ColorSet,e.AxisLabel=new ColorSet,e.ValueLabel.Color="#000000",e.LegendLabel.Color="#000000",e.AxisLabel.Color="#000000",e}return __extends(e,t),e}(TooltipWidgetProperties),RadarPolarPrimaryValueAxis=(!function(e){e[e.Radar="Radar"]="Radar",e[e.Polar="Polar"]="Polar"}(DrawType=DrawType||{}),function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RadarPolarPrimaryValueAxis",this.IsEnabled=!0,this.InverseAxis=!1}),RadarPolarCategoryAxis=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RadarPolarCategoryAxis",this.IsEnabled=!0,this.InverseAxis=!1},BubbleScatterCategoryAxis=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleScatter.BubbleScatterCategoryAxis",this.IsEnabled=!0,this.IsEnableTitle=!0,this.Title="",this.LabelRotation=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelRotations,ValueLabelRotations.Auto),this.IsCustomTitle=!1,this.Format=new MeasureFormatting},BubbleScatterPrimaryValueAxis=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleScatter.BubbleScatterPrimaryValueAxis",this.IsEnabled=!0,this.IsEnableTitle=!0,this.Title="",this.IsCustomTitle=!1,this.OpposedAxis=!1,this.Format=new MeasureFormatting},NumberCardProperties=(function(e){e[e.Bottom="Bottom"]="Bottom",e[e.Right="Right"]="Right",e[e.Left="Left"]="Left",e[e.Top="Top"]="Top"}(LegendPosition=LegendPosition||{}),function(e){e[e.Line="Line"]="Line",e[e.Column="Column"]="Column",e[e.Area="Area"]="Area",e[e.Spline="Spline"]="Spline",e[e.Scatter="Scatter"]="Scatter",e[e.StackedArea="Stacked Area"]="StackedArea",e[e.Stackedcolumn="Stacked Column"]="Stackedcolumn"}(RadarPolarType=RadarPolarType||{}),function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCardProperties",e.TitleSettings=new NumberCardTitleSettings,e.MeasureSettings=new MeasureSettings,e.ShowTooltip=!0,e.ImageSettings=new NumberCardImageSettings,e.BackgroundSettings=new NumberCardBackgroundSettings,e.SparklineSettings=new NumberCardSparklineSettings,e.FormatSettings=new MeasureFormatting,e.UrlLink=new UrlLink,e.AnimationSettings=new AnimationSettings,e.SeriesSettings=new SeriesSettings,e.AlignmentSettings=new AlignmentSettings,e.ResponsiveMargin=!1,e}return __extends(e,t),e}(VisualTooltipWidgetProperties)),AlignmentSettings=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.AlignmentSettings",this.HorizontalAlignment="Left",this.VerticalAlignment="Center",this.AutoFontSize=!1,this.ScalingFactor=1},SeriesSettings=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.SeriesSettings",this.IsFixedRowsAndColumns=!1,this.RowCount=1,this.ColumnCount=1},AnimationSettings=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.AnimationSettings",this.EnableAnimation=!1,this.AnimationDuration=1500},NumberCardTitleSettings=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCard.NumberCardTitleSettings",this.Visibility=!0,this.AutoFontSize=!0,this.Color="#505D6FFF",this.FontSize=16,this.Text="Card Title",this.Position="Bottom",this.EnableWrap=!1},MeasureSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCard.MeasureSettings",this.AutoFontSize=!0,this.FontSize=64,this.Color="#505D6FFF",this.Visibility=!0,this.EnableAnimation=!1},NumberCardImageSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCard.NumberCardImageSettings",this.ImageMode="Uniform",this.ImageUrl="",this.ImageSource="Local",this.URLPattern="{0}",this.Visibility=!1,this.FilePath="",this.ImageName="",this.ImagePosition="Right"},NumberCardBackgroundSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCard.NumberCardBackgroundSettings",this.Color="#ffffffff",this.PlotArea="Card Background",this.Image=new CardImageSettings,this.Transparency=.5},NumberCardSparklineSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.NumberCard.SparklineSettings",this.Fill="#F29D38FF",this.Visibility=!0,this.Opacity=1},RTEProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RTEProperties",e.Value="",e.VerticalAlign=null,e.AutofitContent=!1,e.ContentPadding=16,e.Scrollbar=!0,e}return __extends(e,t),e}(WidgetProperties),DateBucketProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.DateBucketProperties",e.selectedValue="Date",e.ConfiguredWidgetList=[],e}return __extends(e,t),e}(WidgetProperties),CombineProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.CombineProperties",e.DraggedWidgetList=[],e.FilterSettings.IgnoreFilterActions=!0,e.UrlLink=new UrlLink,e}return __extends(e,t),e}(VisualWidgetProperties),LineWidgetProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.LineWidgetProperties",e.IsHorizontal=!0,e.Thickness=2,e.Padding=10,e.LineType="Solid",e.Color="#dbdbdb",e.FilterSettings.IgnoreFilterActions=!0,e}return __extends(e,t),e}(WidgetProperties),ChartProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties",e.ChartType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ChartTypes,ChartTypes.Column),e.EnableAnimation=!1,e.Radius=.4,e.LineWidth=1,e.ShowLegend=!0,e.ShowLegendAsDropDown=!1,e.IsLegendDropdownAllSelected=!0,e.UnselectedLegendList=[],e.ShowTooltip=!0,e.IsAutoLegendFontSize=!0,e.LegendFontSize=16,e.Chartsize=.8,e.DefaultColors=[],e.ShowValueLabels=!1,e.EnableSmoothScroll=!1,e.ValueLabelRotation=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelRotations,ValueLabelRotations.None),e.LegendPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Auto),e.LegendTitle="",e.LegendTextOverFlow=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendTextOverFlow,LegendTextOverFlow.None),e.ColorMappingType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ColorMappingType,ColorMappingType.Data),e.LegendTextWidth=100,e.IsAutoLegendTitleFontSize=!0,e.LegendTitleFontSize=16,e.ShowValueLabelSuffix=!1,e.ValueLabelSuffix="",e.PrimaryValueGridLines=!0,e.SecondaryValueGridLines=!1,e.CategoryGridLines=!1,e.ShowMarker=!0,e.ShowNoDataItem=!1,e.Axis=new Axis,e.DataLabel=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DataLabel,DataLabel.Category),e.IsEnableDrillDown=!1,e.DisplayNames=[],e.IsBasicChartType=!1,e.CustomLegendBtnVisibilty=!1,e.CustomLegendInfo=new CustomLegendSettings,e.CustomValueLabels=[],e.IsCustomLegend=!1,e.IsColorPaletteCategoryVisible=!1,e.IsDefaultColorPalette=!0,e.ColorPaletteModel=[],e.IndexColorPalette=[],e.TrendLineSettings=[],e.ChartSeriesTypeInfo=[],e.LineStyleInfo=null,e.PrimaryAxisRange=new AxisRange,e.SecondaryAxisRange=new AxisRange,e.ForecastProperties=new ForecastProperties,e.LegendShape=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LegendShape,LegendShape.Circle),e.ColumnSpacing=.2,e.ColumnWidth=.7,e.ValueLabel=new ColorSet,e.LegendLabel=new ColorSet,e.AxisTitle=new ColorSet,e.AxisLabel=new ColorSet,e.ValueLabel.Color="#000000",e.LegendLabel.Color="#000000",e.AxisTitle.Color="#000000",e.AxisLabel.Color="#000000",e.EnableMultiSelection=!1,e.IsAutoValueLabelFontSize=!0,e.ValueLabelFontSize=16,e.IsInversed=!1,e.ValueLabelPosition=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ValueLabelPlacement,ValueLabelPlacement.Auto),e.EmptyPointMode=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(EmptyPointMode,EmptyPointMode.Gap),e.PageSize=200,e.ShowValueInTooltip=!1,e.Interactivity=!0,e.FixedSeriesSettings=new SeriesSettings,e.ValueLabelOverflowMode=ValueLabelOverflowMode.Hide,e}return __extends(e,t),e}(VisualTooltipWidgetProperties),ChartLegendDropdownList=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ChartLegendDropdownList",this.SeriesUniqueID="",this.SeriesLegendName=""},ColorPaletteModelSetting=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ColorPaletteModelSetting",this.Name="",this.Value="",this.IsModified=!1,this.Id="",this.DefaultValue=""},TrendLineSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.TrendLineSettings",this.CustomName="",this.LineColor="#77A7FB",this.LineStyle="",this.LineType="Linear",this.LineVisible=!0,this.LineWidth=1,this.Order=0,this.Name="",this.UniqueName="",this.Id=""},CustomLegendSettings=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.CustomLegendSettings",this.Type=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(CustomLegendType,CustomLegendType.Individual),this.Format="{{:Row}}({{:Value}})",this.SingleValues=[],this.GroupValues=new CustomLegendsForGroup},CustomValueLabels=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ValueLabels",this.Name="",this.IsEnabled=!1,this.UniqueColumnName=""},ScatterChartSeriesType=function(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleScatter.ScatterSeriesType",this.Name="",this.Shape=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ChartSeriesShape,ChartSeriesShape.Circle),this.UniqueColumnName=""},CustomLegendsForIndividual=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.CustomLegendsForIndividual",this.Name="",this.Caption="",this.Value="",this.IsModified=!1,this.Id=""},CustomLegendsForGroup=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.CustomLegendsForGroup",this.Values=[],this.Series=[]},Axis=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.Axis",this.CategoryAxis=new CategoryAxis,this.PrimaryValueAxis=new PrimaryValueAxis,this.SecondaryValueAxis=new SecondaryValueAxis},CategoryAxis=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.CategoryAxis",this.IsEnabled=!0,this.LabelOverflowMode=LabelOverFlowMode.Auto.toString(),this.LabelRotation="Auto",this.ShowTitle=!0,this.Title="",this.IsCustomTitle=!1,this.MaxLabelWidth=100,this.EnableTrim=!1,this.IsAutoCategoryAxisLabelFontSize=!0,this.CategoryAxisLabelFontSize=16,this.IsAutoCategoryAxisTitleFontSize=!0,this.CategoryAxisTitleFontSize=16,this.IsAutoInterval=!0,this.Interval=1},PrimaryValueAxis=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.PrimaryValueAxis",this.IsEnabled=!0,this.ShowTitle=!0,this.Title="",this.IsCustomTitle=!1,this.AxisType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Linear),this.Format=new MeasureFormatting,this.IsAutoPrimaryAxisLabelFontSize=!0,this.PrimaryLabelFontSize=16,this.IsAutoPrimaryAxisTitleFontSize=!0,this.PrimaryTitleFontSize=16,this.InverseAxis=!1},SecondaryValueAxis=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.SecondaryValueAxis",this.IsEnabled=!0,this.ShowTitle=!0,this.Title="",this.IsCustomTitle=!1,this.AxisType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(AxisType,AxisType.Linear),this.Format=new MeasureFormatting,this.IsAutoSecondaryAxisLabelFontSize=!0,this.SecondaryLabelFontSize=16,this.IsAutoSecondaryAxisTitleFontSize=!0,this.SecondaryTitleFontSize=16,this.InverseAxis=!1},ColorCustomization=(!function(e){e[e.Linear="Linear"]="Linear",e[e.Logarithmic="Logarithmic"]="Logarithmic"}(AxisType=AxisType||{}),AxisRange=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.Chart.AxisRange",this.MinValue="",this.MaxValue="",this.Interval="",this.MinimumParameter="",this.MaximumParameter="",this.IntervalParameter=""},LineStyleInformation=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.LineStyleInformation",this.Series="Default",this.LineStyle=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(LineStyles,LineStyles.Solid),this.LineWidth=1},function(e){e[e.Solid="Solid"]="Solid",e[e.Dot="Dot"]="Dot",e[e.Dash="Dash"]="Dash",e[e.DotDash="DotDash"]="DotDash",e[e.LongDash="LongDash"]="LongDash",e[e.LongDashDotDot="LongDashDotDot"]="LongDashDotDot"}(LineStyles=LineStyles||{}),ForecastSettings=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ForecastSettings",this.IsEnable=!1,this.Length=10,this.ConfidenceInterval=95,this.Seasonality=0},ForecastProperties=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ForecastProperties",this.ForecastSettings=new ForecastSettings,this.ShowForecast=!0,this.ForecastColor="#000000",this.ShowConfidence=!0,this.ConfidenceColor="#f5e4e4",this.LegendText="Upper and Lower Bounds",this.ConfidenceBandStyle=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ConfidenceBandStyle,ConfidenceBandStyle.Fill)},function(e){e[e.Line="Line"]="Line",e[e.Fill="Fill"]="Fill",e[e.Dot="Dot"]="Dot"}(ConfidenceBandStyle=ConfidenceBandStyle||{}),ChartColumnSettinng=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ChartColumnSetting"},function(e){e[e.Auto="Auto"]="Auto",e[e.None="None"]="None",e[e.Plus45="+45"]="Plus45",e[e.Minus45="-45"]="Minus45",e[e.Plus90="+90"]="Plus90",e[e.Minus90="-90"]="Minus90"}(ValueLabelRotations=ValueLabelRotations||{}),function(e){e[e.LocationName="Location Name"]="LocationName",e[e.LocationValue="Location Value"]="LocationValue"}(MapValueType=MapValueType||{}),function(e){e[e.Auto="Auto"]="Auto",e[e.Bottom="Bottom"]="Bottom",e[e.Middle="Middle"]="Middle",e[e.Top="Top"]="Top"}(ValueLabelPlacement=ValueLabelPlacement||{}),function(e){e[e.Gap="Gap"]="Gap",e[e.Zero="Zero"]="Zero",e[e.Average="Average"]="Average",e[e.Connect="Connect"]="Connect"}(EmptyPointMode=EmptyPointMode||{}),function(e){e[e.None="None"]="None",e[e.Hide="Hide"]="Hide"}(ValueLabelOverflowMode=ValueLabelOverflowMode||{}),function(e){e[e.Auto="Auto"]="Auto",e[e.Bottom="Bottom"]="Bottom",e[e.Right="Right"]="Right",e[e.Left="Left"]="Left",e[e.Top="Top"]="Top",e[e.Dropdown="Dropdown"]="Dropdown"}(LegendPositions=LegendPositions||{}),function(e){e[e.Circle="Circle"]="Circle",e[e.Triangle="Triangle"]="Triangle",e[e.Rectangle="Rectangle"]="Rectangle",e[e.Diamond="Diamond"]="Diamond"}(ChartSeriesShape=ChartSeriesShape||{}),function(e){e[e.None="None"]="None",e[e.Trim="Trim"]="Trim",e[e.Wrap="Wrap"]="Wrap",e[e.WrapAndTrim="WrapAndTrim"]="WrapAndTrim"}(LegendTextOverFlow=LegendTextOverFlow||{}),function(e){e[e.Data="Data"]="Data",e[e.Index="Index"]="Index"}(ColorMappingType=ColorMappingType||{}),function(e){e[e.SeriesType="Series Type"]="SeriesType",e[e.Circle="Circle"]="Circle"}(LegendShape=LegendShape||{}),function(e){e[e.Auto="Auto"]="Auto",e[e.Ascending="Ascending"]="Ascending",e[e.Descending="Descending"]="Descending"}(SortSetting=SortSetting||{}),function(e){e[e.Column="Column"]="Column",e[e.Bar="Bar"]="Bar",e[e.Line="Line"]="Line",e[e.Area="Area"]="Area",e[e.Spline="Spline"]="Spline",e[e.SplineArea="Spline Area"]="SplineArea",e[e.StackedColumn="Stacked Column"]="StackedColumn",e[e.StackedBar="Stacked Bar"]="StackedBar",e[e.StackedArea="Stacked Area"]="StackedArea",e[e.PercentStackedColumn="100% Stacked Column"]="PercentStackedColumn",e[e.PercentStackedBar="100% Stacked Bar"]="PercentStackedBar",e[e.PercentStackedArea="100% Stacked Area"]="PercentStackedArea",e[e.Pie="Pie"]="Pie",e[e.Doughnut="Doughnut"]="Doughnut",e[e.Pyramid="Pyramid"]="Pyramid",e[e.Funnel="Funnel"]="Funnel",e[e.ComboChart="Combo Chart"]="ComboChart",e[e.Bubble="Bubble"]="Bubble",e[e.Scatter="Scatter"]="Scatter"}(ChartTypes=ChartTypes||{}),function(e){e[e.Trim="Trim"]="Trim",e[e.Hide="Hide"]="Hide",e[e.Auto="Auto"]="Auto"}(LabelOverFlowMode=LabelOverFlowMode||{}),function(e){e[e.Category="Category"]="Category",e[e.Value="Value"]="Value",e[e.Percentage="Percentage"]="Percentage",e[e.CategoryAndValue="Category And Value"]="CategoryAndValue",e[e.CategoryAndPercentage="Category And Percentage"]="CategoryAndPercentage",e[e.ValueAndPercentage="Value And Percentage"]="ValueAndPercentage",e[e.AllDetails="All Details"]="AllDetails"}(DataLabel=DataLabel||{}),function(e){e.Individual="Individual",e.Group="Group"}(CustomLegendType=CustomLegendType||{}),ImageProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ImageProperties",e.EnableImageExport=!0,e.EnablePdfExport=!0,e.IgnoreFilterActions=!0,e.BindFromDatasource=!0,e.Stretch=ImageMode.Default,e.ImageSource=ImgSource.Local,e.TooltipText="",e.ShowTooltip=!0,e.PaddingSettings=new PaddingSettings,e.ImageRotation=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ImageRotations,ImageRotations.ZeroDeg),e.DataSource=DataSource.BinaryData,e.URLPattern="{0}",e.ImageUrl=null,e.ImagePath=null,e.IsURL=!1,e.IsImageExist=!1,e.BindDataIsChecked=!1,e.ImageName=null,e.IsInPackage=!1,e.Name="",e.UniqueName=null,e.imageSrc=null,e}return __extends(e,t),e}(WidgetProperties),PaddingSettings=function(){this._type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.Image.PaddingSettings",this.Bottom=0,this.Left=0,this.Right=0,this.Top=0},function(e){e[e.Default="Default"]="Default",e[e.Fill="Fill"]="Fill",e[e.Uniform="Uniform"]="Uniform",e[e.UniformToFill="Uniform To Fill"]="UniformToFill"}(ImageMode=ImageMode||{}),function(e){e[e.BinaryData="Binary Data"]="BinaryData",e[e.URI="URI"]="URI"}(DataSource=DataSource||{}),function(e){e[e.Local="Local"]="Local",e[e.URL="URL"]="URL",e[e.ParameterizedURL="Parameterized URL"]="ParameterizedURL"}(ImgSource=ImgSource||{}),function(e){e[e.ZeroDeg="0"]="ZeroDeg",e[e.NinetyDeg="90"]="NinetyDeg",e[e.OneEightyDeg="180"]="OneEightyDeg",e[e.TwoSeventyDeg="270"]="TwoSeventyDeg"}(ImageRotations=ImageRotations||{}),LinkProperties=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.LinkProperties",this.Linking=new LinkSetting},LinkSetting=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.LinkSetting"},function(e){e[e.Filter=0]="Filter",e[e.NonFilter=1]="NonFilter"}(WidgetType=WidgetType||{}),function(){this.__type="Syncfusion.Dashboard.Core.CustomColor.ColorCustomization",this.DefaultColor="#A8E1F4",this.Type=ColorCustomizationType.Gradient,this.GradientSettings=new GradientSettings,this.SolidColorInfo=[],this.RuleRangeSettings=new RuleRangeSettings}),GradientColorInfo=function(){this.__type="Syncfusion.Dashboard.Core.CustomColor.GradientColorInfo",this.HasMidColor=!1,this.Low=new GradientColorSettings,this.Mid=new GradientColorSettings,this.High=new GradientColorSettings,this.DefaultFormatColor=new GradientColorSettings,this.Low.Color="#fd2e56",this.Mid.Color="#e5ed00",this.High.Color="#4cd766",this.DefaultFormatColor.Color="#F67280"},GradientSettings=function(){this.BasedOn=new ColorFieldInfo,this.GradientColorInfo=new GradientColorInfo},RuleRangeSettings=function(){this.BasedOn=new ColorFieldInfo,this.RangeColorInfo=[]},SolidColorSet=function(){this.BasedOn=new ColorFieldInfo,this.DefaultColorSets=[],this.ColorMappingType=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(ColorMappingType,ColorMappingType.Data),this.IndexColorPalette=[]},ColorFieldInfo=function(){this.__type="Syncfusion.Dashboard.Core.CustomColor.ColorFieldInfo",this.SummaryType=SummaryType.SUM,this.FieldId="",this.UniqueColumnName="",this.ValueType=ValueType.Value,this.IsDefaultFormat=!1,this.DefaultFormatType=DefaultFormatType.Default},GradientColorSettings=function(){this.__type="Syncfusion.Dashboard.Core.CustomColor.GradientColorSettings",this.IsCustom=!1,this.Value=null,this.Color="#A8E1F4",this.ParamValue=""},RangeColorSettings=(function(e){e[e.Gradient=0]="Gradient",e[e.Rule=1]="Rule",e[e.Individual=2]="Individual"}(ColorCustomizationType=ColorCustomizationType||{}),function(e){e[e.Default=0]="Default",e[e.AsZero=1]="AsZero",e[e.Specific=2]="Specific"}(DefaultFormatType=DefaultFormatType||{}),function(e){e[e.Value=0]="Value",e[e.Percentage=1]="Percentage"}(ValueType=ValueType||{}),function(){this.__type="Syncfusion.Dashboard.Core.CustomColor.RangeColorSettings",this.StartRange=0,this.EndRange=0,this.IsCaseSensitive=!0,this.RangeLabel="",this.DimensionConditionalValue="",this.MeasureCondition=CMeasureConditionType.CEquals,this.DimensionCondition=CDimensionConditionType.Startswith,this.PropertyColorPair=[],this.StartRangeParameter="",this.EndRangeParameter=""}),PropertyColorSettings=function(){},TableWidgetCustomColors=function(){this.SourceColorField=new ColorFieldInfo,this.ColorCustomization=new ColorCustomization,this.EnableAsBar=!1,this.BarCustomization=new BarCustomization},BarCustomization=function(){this.__type="Syncfusion.Dashboard.Core.CustomColor.BarCustomization",this.Minimum=new MinMaxCustomization,this.Maximum=new MinMaxCustomization,this.PositiveColor=new BarColor,this.NegativeColor=new BarColor,this.BarTextColor=new BarColor,this.DisableValue=!1,this.PositiveColor.RgbColor="rgba(44,217,197,1)",this.PositiveColor.HexColor="#2CD9C5",this.NegativeColor.RgbColor="rgba(255,108,64,1)",this.NegativeColor.HexColor="#FF6C40",this.BarTextColor.RgbColor="rgba(255,255,255,1)",this.BarTextColor.HexColor="#FFFFFF",this.EnableRTL=!1,this.FieldName="",this.BarShape=BarShapeType.Cylinder},MinMaxCustomization=(!function(e){e[e.Cylinder=0]="Cylinder",e[e.Rectangle=1]="Rectangle"}(BarShapeType=BarShapeType||{}),function(){this.__type="Syncfusion.Dashboard.Core.CustomColor.MinMaxCustomization",this.Value=0,this.IsEdited=!1}),BarColor=function(){this.__type="Syncfusion.Dashboard.Core.CustomColor.BarColor",this.IsEdited=!1},RangeNavigatorProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RangeNavigatorProperties",e.SeriesType=[],e.DefaultColors=[],e.LabelColor=new ColorSet,e.LabelColor.Color="#505D6F",e}return __extends(e,t),e}(WidgetProperties),RangeNavigatorSeriesType=function(){this.Type=RangeNavigatorType.Area,this.Name=""},ButtonProperties=(!function(e){e[e.Area=0]="Area",e[e.Line=1]="Line",e[e.StepLine=2]="StepLine"}(RangeNavigatorType=RangeNavigatorType||{}),function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ButtonProperties",e.ButtonBackgroundColor="#FFFFFF",e.TextSettings=new ButtonTextSettings,e.IconSettings=new ButtonIconSettings,e.ImageSettings=new ButtonImageSettings,e.BorderSettings=new ButtonBorderSettings,e.ActionSettings=new ButtonActionSettings,e.UrlLink=new UrlLink,e.Tooltip="",e.Transparency=1,e}return __extends(e,t),e}(WidgetProperties)),ButtonIconSettings=function(){this.Enabled=!1,this.IconType="Blank",this.IconPlacement="Custom",this.IconColor="#000000",this.FontSize=20,this.HorizontalAlignment=this.VerticalAlignment="Center",this.Padding=new PaddingSettings},ButtonTextSettings=function(){this.Enabled=!0,this.Text="Button",this.TextColor="#000000",this.FontSize=12,this.HorizontalAlignment=this.VerticalAlignment="Center",this.Padding=new PaddingSettings},ButtonImageSettings=function(){this.EnableBackgroundColor=!1,this.EnableBackgroundImage=!1,this.ImageName="",this.ImagePath="",this.ImageName=null,this.ImageSource="Local",this.IsImageExist=!1,this.IsInPackage=!1,this.ImageRotation="0deg",this.ImageMode="Default",this.ImageUrl="",this.IsImgUrl=!1},ButtonBorderSettings=function(){this.Enable=!1,this.Color="#000000",this.Thickness=1,this.Type="Solid"},ButtonActionSettings=function(){this.Url="",this.Target="_blank",this.Title="",this.Height=0,this.Width=0},ScriptInfo=(function(e){e[e.Left="Left"]="Left",e[e.Right="Right"]="Right"}(ImagePosition=ImagePosition||{}),function(e){e[e.Default="Default"]="Default",e[e.Fill="Fill"]="Fill",e[e.Uniform="Uniform"]="Uniform",e[e.UniformToFill="Uniform To Fill"]="UniformToFill"}(ButtonImageMode=ButtonImageMode||{}),function(e){e[e.ZeroDeg="0"]="ZeroDeg",e[e.NinetyDeg="90"]="NinetyDeg",e[e.OneEightyDeg="180"]="OneEightyDeg",e[e.TwoSeventyDeg="270"]="TwoSeventyDeg"}(ButtonImageRotations=ButtonImageRotations||{}),function(){this.ScriptName=null,this.NameSpace=null}),RequiredScripts=function(){this.MainScript=null,this.DependentScripts=[]},WidgetElementsVisibility=function(){this.ShowLegend=!1,this.ShowXAxisLabels=!1,this.ShowXAxisTitle=!1,this.ShowYAxisTitle=!1,this.ShowYAxisLabels=!1},DaConditionalResult=function(){this.ConditionalInformations=new DaConditionalInformations,this.OverallResult=!1},DaConditionalInformations=function(){this.ConditionalInfoColleciton=[],this.GlobalFilters=[]},DaConditionalInfo=function(){this.Filters=[]},DaFilter=function(){this.StringCondition=new DaStringCondition},DaMeasureFieldInfo=function(){},DaDatasourceFieldInfo=function(){},DaStringCondition=function(){this.Values=[],this.DateInfo=null},DaDateFilterInfo=function(){this.DateFormatInfo=null,this.FilterValues=[],this.RelativeDateFilter=null},DaDashboardArguments=function(){},DaCustomExpression=function(){},DaCustomExpressionDialogArguments=function(){},DataAlertArgs=function(){},ConfiguredWidgetInfo=function(){},FilterModel=function(){},TabbedProperties=function(t){function e(e){e=t.call(this,e)||this;return e.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.TabbedProperties",e.ActiveTabId="",e.HideHeader=!1,e.WidgetsList=[],e.HeaderColor="#0565FF",e.HeaderFontSize=12,e.TabInfo=[],e.FilterSettings.IgnoreFilterActions=!0,e.TabLoader=!1,e}return __extends(e,t),e}(VisualWidgetProperties),WidgetList=function(){this.TabId="",this.WidgetIds=[]},TabInfo=function(){this.DisplayText="",this.UniqueText=""},MultiSelectedRowInfo=function(){this.Text=[],this.UniqueColumnName=""},InternalMultiSelectionComboBox=function(){function s(e){this.waterMarkText="Search",this.listFieldName="text",this.listBoxElement=null,this.allowVirtualScrolling=!1,this.isDataLoaded=!1,this.dataConfiguration=null,this.ajaxRequestCollection=[],this.dataGroupInfo=null,this.currentData=null,this.isInitialLoad=null,this.isFiltered=!1,this.isFilterCleared=!1,this.isTriggered=!1,this.dimensionFilterInfo=null,this.checkAllState=!0,this.filters=[],this.isInitialFilter=!1,this.filterInfo=[],this.unselectedItems={},this.isCheckAll=!1,this.selectedItems={},this.changedItems={},this.listBoxSelectedItems=[],this.listSize=1,this.filteringIndex=1,this.hasFilteredItems=!1,this.locale=null,this.searchTimer=-1,this.filtersCheckAllState=[],this.dashboardDesigner=e,this.bbdesigner$=this.dashboardDesigner.bbdesigner$,this.locale=e.getLocalizationContent(),this.id=this.dashboardDesigner._id,this.widgetHelper=this.dashboardDesigner.modules.widgetHelper,this.virtualScrollSettings=new VirtualScrollSettings,this.dataConfiguration=this.dashboardDesigner.modules.dataConfiguration,(this.dashboardDesigner.isDesignMode()||this.dashboardDesigner.isViewMode()||this.dashboardDesigner.isDesignPreviewMode())&&(this.dataGroupInfo=new BoldBIDashboard.Dashboard.DataGroupInfo)}return s.prototype.resetMultiSelection=function(e){this.dashboardDesigner.element.find("#"+e+"_popup_container").remove(),this.dashboardDesigner.element.find("#"+e+"_multi_select_dropDown_text").empty()},s.prototype.renderMultiSelectionComboBox=function(e,t,i,o){this.resetMultiSelection(t),this.isInitialFilter=!1,this.isFilterCleared=!1,a=BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.designerPanel)?null:this.widgetHelper.getCurrentWidgetInstance(),BoldBIDashboard.isNullOrUndefined(a)||(this.dataGroupInfo=a.DataGroupInfo),this.dataSetId=i,this.rowId=t,a=BoldBIDashboard.buildTag("div.bbi-multiselect-dropdown-item","",{width:e.width()},{id:t+"_multi_select_dropDown"}),n=this.locale.queryDesigner.selectedAllValuesInComboBox,BoldBIDashboard.isNullOrUndefined(o)||BoldBIDashboard.isNullOrUndefined(o.filterInfo)||(s=o.filterInfo.AllowFilterInfo,n=BoldBIDashboard.isNullOrUndefined(s)||BoldBIDashboard.isNullOrUndefined(s.FilterValues)||s.IsCheckAll?this.locale.queryDesigner.selectedAllValuesInComboBox:s.FilterValues.toString());var a,s=BoldBIDashboard.buildTag("div",n,{"border-style":"none",width:e.width()-38,height:"100%","padding-left":"5px","line-height":"28px",float:"left","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"},{id:t+"_multi_select_dropDown_text"}),n=BoldBIDashboard.buildTag("div.bbi-designer-multi-selection-arrow-container","",{display:"inline-block",width:"33px",height:"100%"},{}),r=BoldBIDashboard.buildTag("span.bbi-designer-ejwidgets-updown e-icon e-arrow-sans-down","",{color:"var(--active-icon-normal-color)",padding:"7px 10px"});n.append(r),a.append(s,n),BoldBIDashboard.isNullOrUndefined(this.selectedItems)&&(this.selectedItems={}),this.checkAllState=!0,this.selectedItems={},this.unselectedItems={},this.changedItems={},this.listBoxSelectedItems=[],this.currentData=[],this.dimensionFilterInfo=null,this.isFiltered=!1,this.isFilterCleared=!1,this.hasFilteredItems=!1,a.on("click",this.bbdesigner$.proxy(this.showPopupContainer,this,e,t,i,o)),e.append(a).data("MultiSelectionComboBox",this),this.renderPopupContainer(t)},s.prototype.renderPopupContainer=function(e){var t=BoldBIDashboard.buildTag("div.e-multiselect-popup-container boldbi-dashboarddesigner","",{"min-width":"230px",height:"270px",position:"absolute",border:"1px solid var(--querydesigner-primary-border-color)","background-color":"white","border-radius":"3px",display:"none","z-index":"10100",width:"245px"},{id:e+"_popup_container","data-rowid":e}),i=BoldBIDashboard.buildTag("table","",{width:"100%",padding:"5px 10px"},{}),o=BoldBIDashboard.buildTag("tr","",{},{}),a=BoldBIDashboard.buildTag("td","",{width:"50%"},{}),s=BoldBIDashboard.buildTag("td","",{width:"50%"},{}),n=BoldBIDashboard.buildTag("input","",{},{type:"checkbox",id:e+"_popup_container_Check_Box"}),r=BoldBIDashboard.buildTag("label",this.locale.dialogText.checkAll,{"margin-left":"10px","font-size":"14px"},{for:e+"_popup_container_Check_Box"}),a=(this.renderSearchPanel(s,e),a.append(n,r),o.append(a,s),i.append(o),r=BoldBIDashboard.buildTag("div.e-multiselect-waiting-popup","",{height:"150px","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"1010",padding:"5px 10px"},{id:e+"_popup_container_list_Box_div"}),this.listBoxElement=BoldBIDashboard.buildTag("ul","",{},{id:e+"_popup_container_list_Box"}),r.append(this.listBoxElement),BoldBIDashboard.buildTag("table","",{width:"100%",padding:"5px 10px","border-bottom":"1px solid var(--querydesigner-primary-border-color)"},{})),s=BoldBIDashboard.buildTag("tr","",{},{}),o=BoldBIDashboard.buildTag("td","",{width:"50%"},{}),l=BoldBIDashboard.buildTag("td","",{width:"50%"},{}),d={callBackInstance:this,callBackMethod:"updateListCondition",optionalArgs:e,groupName:"multiSelect",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:e+"_popup_container_list_Box_radio1",label:"Include",isChecked:!0,value:"include"}]},h={callBackInstance:this,callBackMethod:"updateListCondition",optionalArgs:e,groupName:"multiSelect",labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:e+"_popup_container_list_Box_radio2",label:"Exclude",value:"exclude"}]},d=(this.selectRadioButtonInclude=new BoldBIDashboard.Dashboard.RadioButton(d,o),this.selectRadioButtonExclude=new BoldBIDashboard.Dashboard.RadioButton(h,l),a.append(s),s.append(o,l),BoldBIDashboard.buildTag("div.e-footerbar.e-dialog.e-js","",{width:"100%",height:"45px","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box",padding:"10px 5px"},{})),h=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.dialogOptions.applyButtonText,{float:"right"},{id:e+"_popup_container_ok_btn",type:"button"}),s=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.locale.dialogOptions.cancelButtonText,{float:"right"},{id:e+"_popup_container_cancel_btn",type:"button"});d.append(s,h),t.append(i,r,a,d),this.dashboardDesigner.element.append(t),h.on("click",this.bbdesigner$.proxy(this.updatePopupContainerInformation,this,e)),s.on("click",this.bbdesigner$.proxy(this.closePopupContainer,this,e)),n.BoldBIDashboardCheckBox({width:"100%",change:this.bbdesigner$.proxy(this.updateCheckItemCheckChange,this,e)}),o=this.getDefaultData(),this.listBoxElement.BoldBIDashboardListBox({dataSource:o.Datasource,fields:o.Fields,showCheckbox:!0,width:"100%",height:"100%",cssClass:"bbi-dbrd-control",actionBegin:this.bbdesigner$.proxy(this.renderInitialData,this),actionComplete:this.bbdesigner$.proxy(this.updateItemSelection,this)}),this.listBoxElement.BoldBIDashboardListBox("hideAllItems"),r.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup bbi-designer-loader",template:this.dashboardDesigner.getWaitingPopupTemplate()})},s.prototype.renderSearchPanel=function(e,t){var i=BoldBIDashboard.buildTag("div","",{width:"107px",height:"16px",float:"right","margin-top":"3px"},{id:t+"_popup_container_searchPanel"}),o=BoldBIDashboard.buildTag("input.bbi-designer-fieldcontainer-search-dataassign","",{"font-style":"italic"},{id:t+"_popup_container_searchBox",placeholder:this.waterMarkText}),a=BoldBIDashboard.buildTag("div","",{},{id:t+"_popup_container_searchIcon",class:"e-icon e-search bbi-designer-popup-container-search-icon"});i.append(o),i.append(a),e.append(i),o.on("focus",this.bbdesigner$.proxy(this.onSearchFocus,this,t))},s.prototype.showPopupContainer=function(e,t,i,o){var a=this.getMultiSelectionComboBox(t),s=a.attr("data-fieldValue"),n=a.attr("data-fieldText"),r=this.dateFormats(a.attr("data-dateFormat")),l=this.getPopupContainer(t),d=l.height(),h=(this.listBoxElement=this.getPopupListBox(t),this.listBoxElement.data("BoldBIDashboardListBox")),p="block"===l.css("display"),c=e.offset(),u=c.left+parseFloat(e.css("padding-left"));e.width()<245&&(u=c.left+parseFloat(e.css("padding-left"))-(246-e.width()));e=d<window.innerHeight-(c.top+e.height())?c.top+e.height()+2:c.top-d-4;l.css({left:u-this.dashboardDesigner.element.offset().left,top:e-this.dashboardDesigner.element.offset().top,display:p?"none":"block","z-index":BoldBIDashboard.getMaxZindex()}),BoldBIDashboard.isNullOrUndefined(h)||h.hideAllItems(),this.updateDropDownIcon(l,t),c=this.getPopupListBoxDiv(t),"block"===l.css("display")?(BoldBIDashboard.isNullOrUndefined(o)?BoldBIDashboard.isNullOrUndefined(r)?BoldBIDashboard.isNullOrUndefined(c.attr("data-fieldText"))||c.attr("data-fieldText")!==n?(this.filterInfo=[{Id:s,Name:n,SummaryType:"None",FieldType:"Dimensions"}],this.clearListItems(),this.getInitialFilterValues(t,r)):this.setPopupValues(t):BoldBIDashboard.isNullOrUndefined(c.attr("data-fieldText"))||c.attr("data-fieldText")!==n||BoldBIDashboard.isNullOrUndefined(c.attr("data-dateField"))||c.attr("data-dateField")!==r?(this.filterInfo=[{Id:s,Name:n,SummaryType:"None",FieldType:"Dimensions",DateTimeFormat:r}],this.clearListItems(),this.getInitialFilterValues(t,r)):this.setPopupValues(t):(this.dimensionFilterInfo=o,BoldBIDashboard.isNullOrUndefined(c.attr("data-isLoaded"))?this.getFieldValues(t,o):this.setPopupValues(t)),0<this.dashboardDesigner.element.find(".e-multiselect-popup-container-visible").length&&this.updatePopupContainerVisibility(this.dashboardDesigner.element.find(".e-multiselect-popup-container-visible")),a.addClass("bbi-dbrd-filter-dropdown"),l.addClass("e-multiselect-popup-container-visible")):(l.removeClass("e-multiselect-popup-container-visible"),a.removeClass("bbi-dbrd-filter-dropdown"),this.hideLoadingIndicator(t)),h._refreshScroller()},s.prototype.getInitialFilterValues=function(e,t){this.ajaxRequestCollection.push(this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.getData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.FilterAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.getData,fieldInfo:this.filterInfo,dataSetId:this.dataSetId,filterType:"InitialFilter",hasFilter:!0,isQueryDesignerMode:this.dashboardDesigner.isQueryDesignerMode})},{fnction:this.bbdesigner$.proxy(this.setFieldInformation,this,e,this.filterInfo[0].Name,t),indicator:[this.bbdesigner$.proxy(this.showLoadingIndicator,this,e),this.bbdesigner$.proxy(this.hideLoadingIndicator,this,e)]}))},s.prototype.getFieldValues=function(e,t){var i;this.virtualScrollSettings.StartIndex=1,(i=t.fieldInfo).FilterInfo=null,this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.getData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.FilterAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.getData,fieldInfo:[i],dataSetId:i.DatasourceID,startIndex:this.virtualScrollSettings.StartIndex,pageSize:this.virtualScrollSettings.PageSize,isQueryDesignerMode:this.dashboardDesigner.isQueryDesignerMode})},{fnction:this.bbdesigner$.proxy(this.setFilter,this,t,e),indicator:[this.bbdesigner$.proxy(this.showLoadingIndicator,this,e),this.bbdesigner$.proxy(this.hideLoadingIndicator,this,e)]})},s.prototype.setFilter=function(e,t,i){var o=JSON.parse(i.jsonData);this.allowVirtualScrolling=i.hasMoreRecords,this.listFieldName=e.fieldInfo.UniqueColumnName,this.setDataSource(t,o),this.getPopupListBoxDiv(t).attr("data-isLoaded","loaded"),i=BoldBIDashboard.isNullOrUndefined(e.filterInfo)||BoldBIDashboard.isNullOrUndefined(e.filterInfo.AllowFilterInfo)?null:e.filterInfo.AllowFilterInfo,BoldBIDashboard.isNullOrUndefined(i)||BoldBIDashboard.isNullOrUndefined(i.FilterValues)||this.populateMultiSelectionItem(t,i),this.setPopupValues(t),this.updateListCondition(this,t)},s.prototype.setDataSource=function(e,t){this.currentData=this.getDataSource(t),this.isInitialLoad=!0,this.listBoxElement.BoldBIDashboardListBox({dataSource:this.allowVirtualScrolling?this.updateDataManager():this.currentData,allowVirtualScrolling:!0,fields:{id:this.listFieldName,text:this.listFieldName},virtualScrollMode:"continuous",itemRequestCount:this.virtualScrollSettings.PageSize,actionComplete:this.bbdesigner$.proxy(this.updateItemSelection,this),actionSuccess:this.bbdesigner$.proxy(this.addLoader,this)}),this.isInitialLoad=!1,this.listBoxElement.BoldBIDashboardListBox("showAllItems")},s.prototype.getDefaultData=function(){return{Datasource:[{itemId:"i1",itemName:"Item1"},{itemId:"i2",itemName:"Item2"},{itemId:"i3",itemName:"Item3"},{itemId:"i4",itemName:"Item4"},{itemId:"i5",itemName:"Item5"},{itemId:"i6",itemName:"Item6"},{itemId:"i7",itemName:"Item7"}],Fields:{id:"itemId",text:"itemName"}}},s.prototype.updateDataManager=function(){var i=this,e=new BoldBIDashboard.Adaptor(null).extend({processQuery:this.bbdesigner$.proxy(this.processQuery,this),beforeSend:function(e,t){i.dashboardDesigner.beforeSendRequestForDataManager("OnDemandDataAction",t)},processResponse:this.bbdesigner$.proxy(this.processResponse,this)});return new BoldBIDashboard.DataManager({url:this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,adaptor:new e,crossDomain:!0})},s.prototype.renderInitialData=function(e){this.isInitialLoad&&!this.isFiltered&&(e.cancel=!0,(e=this.listBoxElement.data("BoldBIDashboardListBox")).mergeData(this.currentData,!0),e.option("actionComplete",this.bbdesigner$.proxy(this.updateItemSelection,this)),e.model.totalItemsCount=this.currentData.length+1,this.setItemEnable(this.rowId,!0),BoldBIDashboard.DashboardUtil.buttonEnable(this.getPopupCancelButton(this.rowId),!0))},s.prototype.processQuery=function(e){var t,i,o,a,s,n;if(this.isInitialLoad&&!this.isFiltered||this.isTriggered)return!(e.cancel=!0);for(t=this.listBoxElement.data("BoldBIDashboardListBox"),this.setItemEnable(this.rowId,!1),BoldBIDashboard.DashboardUtil.buttonEnable(this.getPopupCancelButton(this.rowId),!1),this.virtualScrollSettings.StartIndex=!this.isFiltered||1<this.filteringIndex?t._listSize+1:1,i=this.isInitialFilter?this.filterInfo:this.dataConfiguration.convertDataGroupInfoToFieldInfo(this.dataGroupInfo),o=0;o<i.length;o++)if(i[o].Id===this.listFieldName||i[o].UniqueColumnName===this.listFieldName){i[o].FilterInfo=null,this.isFiltered&&(n=JSON.parse(JSON.stringify(i[o])),(i=[]).push(n),a=this.getPopupSearchPanel(this.rowId),""!==(a=this.getSearchTextBox(a,this.rowId)).val())&&(s=new FilterInfo,n=JSON.parse(JSON.stringify(n)),s.DimensionFilterInfo=this.getFilterInfo(this,a.val()),n.FilterInfo=s,n.isVisible=!1,i.push(n),this.isTriggered=!0);break}return t.setModel({checkChange:null}),{url:e.dataSource.url,type:"POST",contentType:"application/json",data:JSON.stringify({designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.getData,className:BoldBIDashboard.DashboardUtil.DesignerAction.FilterAction,fieldInfo:i,dataSetId:BoldBIDashboard.isNullOrUndefined(this.dimensionFilterInfo)?this.dataSetId:this.dimensionFilterInfo.fieldInfo.DatasourceID,startIndex:this.virtualScrollSettings.StartIndex,pageSize:this.virtualScrollSettings.PageSize,filterType:this.isInitialFilter?"InitialFilter":"null",hasFilter:this.isFiltered,isQueryDesignerMode:this.dashboardDesigner.isQueryDesignerMode})}},s.prototype.processResponse=function(e){var t,i=this.listBoxElement.data("BoldBIDashboardListBox");return BoldBIDashboard.isNullOrUndefined(i)||BoldBIDashboard.isNullOrUndefined(e)||e.Error||"[]"===e.data?(this.isTriggered=!1,this.isFiltered&&(this.clearListItems(),this.getPopupSearchPanel(this.rowId).children().prop("disabled",!1).focus()),[]):(t=JSON.parse(e.jsonData),this.isDataLoaded=!0,this.updateListCondition(this,this.rowId),BoldBIDashboard.DashboardUtil.buttonEnable(this.getPopupCancelButton(this.rowId),!0),i.option("actionComplete",this.bbdesigner$.proxy(this.updateItemSelection,this)),this.isTriggered=!1,this.isFiltered?(this.listBoxElement.removeAttr("style"),i._refreshScroller(),i._loadInitialRemoteData=!0,1===this.filteringIndex&&(this.clearListItems(),i.mergeData(t,!0),this.filteringIndex=t.length+1,t=[]),i.model.totalItemsCount=e.hasMoreRecords?i._listSize+t.length+1:t.length<=5?1:t.length,this.removeListboxLoader(i)):i.model.totalItemsCount=e.hasMoreRecords?i._listSize+t.length+1:i._listSize+t.length,t)},s.prototype.removeListboxLoader=function(e){BoldBIDashboard.isNullOrUndefined(e)||(e.listContainer.removeClass("e-load"),this.getPopupSearchPanel(this.rowId).children().prop("disabled",!1).focus())},s.prototype.processFilterDataRequest=function(e){var i=this,t=this.listBoxElement.data("BoldBIDashboardListBox"),o=this.getPopupSearchPanel(this.rowId),a=this.getSearchTextBox(o,this.rowId);this.getSearchIcon(o,e).addClass("e-close_01").removeClass("e-search"),this.listBoxSelectedItems=[],t.listContainer.find("li .e-chkbox-wrap").filter("[aria-checked = true]").parent().each(function(e,t){i.listBoxSelectedItems.push(t.textContent)}),this.clearListItems(),-1!==this.searchTimer&&(clearTimeout(this.searchTimer),this.searchTimer=-1),this.searchTimer=setTimeout(function(){0<a.val().length?(i.getPopupSearchPanel(e).children().prop("disabled",!0),a.removeClass("e-focus"),i.getSearchIcon(o,e).off("click",i.bbdesigner$.proxy(i.onSearchCloseClick,i,e)),i.getSearchIcon(o,e).on("click",i.bbdesigner$.proxy(i.onSearchCloseClick,i,e)),t._oldStartValue=void 0,i.isFilterCleared=!1,i.isFiltered=!0,i.filteringIndex=1,i.filterInfo=[i.filterInfo[0]],i.listBoxElement.BoldBIDashboardListBox({dataSource:i.updateDataManager(),allowVirtualScrolling:!0,totalItemsCount:1,fields:{id:i.listFieldName,text:i.listFieldName},virtualScrollMode:"continuous",itemRequestCount:i.virtualScrollSettings.PageSize})):(i.getSearchIcon(o,e).addClass("e-search").removeClass("e-close_01"),i.isFilterCleared=!0,i.isFiltered=!1,i.isInitialFilter?(i.filterInfo=[i.filterInfo[0]],i.getInitialFilterValues(e,i.dateFormats(i.getMultiSelectionComboBox(e).attr("data-dateFormat")))):i.getFieldValues(e,i.dimensionFilterInfo))},800)},s.prototype.getFilterInfo=function(e,t){var i=new DimensionFilterInfo;return i.IsAllowFilteringApplied=!0,i.AllowFilterInfo=new AllowFilteringInfo,i.AllowFilterInfo.Conditions=BoldBIDashboard.isNullOrUndefined(this.getMultiSelectionComboBox(this.rowId).attr("data-dateField")||this.getPopupListBoxDiv(this.rowId).attr("data-dateField"))?TextFilterOption.Contains.toString():null,i.AllowFilterInfo.IsInclude=!0,i.AllowFilterInfo.FilterValues=[t],i},s.prototype.getDataSource=function(i){for(var e=0;e<i.length;e++)!function(t){i[t][Object.keys(i[t])]=Object.keys(i[t].valueOf()).map(function(e){return i[t].valueOf()[e].toString()})}(e);return i},s.prototype.setFieldInformation=function(e,t,i,o){var a,s,n;if(this.isInitialFilter=!0,a=JSON.parse(o.jsonData),0!==this.filters.length&&this.getFilterItems(this.filters,t,e),!BoldBIDashboard.isNullOrUndefined(a)&&0<a.length){for(n in s=this.getPopupListBox(e).data("BoldBIDashboardListBox"),a[0])this.listFieldName=n;a=this.getDataSource(a),this.allowVirtualScrolling=o.hasMoreRecords,this.setDataSource(e,a),o=this.getPopupListBoxDiv(e),BoldBIDashboard.isNullOrUndefined(s)||(s._oldStartValue=void 0),BoldBIDashboard.isNullOrUndefined(i)||o.attr("data-dateField",i),o.attr("data-fieldText",t),this.setPopupValues(e)}},s.prototype.addLoader=function(){var e=this.listBoxElement.data("BoldBIDashboardListBox");this.isFiltered&&this.isTriggered&&e.listContainer.addClass("e-load")},s.prototype.getFilterItems=function(e,t,i){this.selectedItems={};var o,a={},s=e.filter(function(e){return e.rowId===i}),e=e.findIndex(function(e){return e.rowId===i});0!=s.length?(o={},"Dimension"===s[0].Type&&s[0].Name===t?("Inclusion"!=(o=s[0].DimensionFilterSchemaInfo).DimensionFilterCondition&&(this.filters[e].DimensionFilterSchemaInfo.FilterValues={}),a={FilterValues:o.FilterValues,IsInclude:o.IsInclude,IsCheckAll:o.IsCheckAll,CheckAllState:o.CheckAllState},this.populateMultiSelectionItem(i,a)):"Date"===s[0].Type&&s[0].Name===t?(a={FilterValues:(o=s[0].DateFilterSchemaInfo).FilterValues,IsInclude:o.IsInclude,IsCheckAll:o.IsCheckAll,CheckAllState:o.CheckAllState},this.populateMultiSelectionItem(i,a)):(this.checkAllState=!0,this.filters.splice(e,1))):this.checkAllState=!0},s.prototype.updateItemSelection=function(){var e,t=this.listBoxElement.data("BoldBIDashboardListBox"),i=!1,o=this.getPopupCheckBox(this.rowId).data("BoldBIDashboardCheckBox");BoldBIDashboard.isNullOrUndefined(t)||(!BoldBIDashboard.isNullOrUndefined(o)&&(BoldBIDashboard.isNullOrUndefined(o.model.checkState)||0==o.model.checkState.indexOf("check")&&o.model.checked&&0==Object.keys(this.changedItems).length&&0==Object.keys(this.selectedItems).length)&&t.checkAll(),this.hasFilteredItems&&(e=this.checkAllState?this.getItemIndices(this.unselectedItems):this.getItemIndices(this.selectedItems),BoldBIDashboard.isNullOrUndefined(this.checkAllState)||this.checkAllState?t.checkAll():t.uncheckAll(),0<e.length)&&(i=!0,this.checkAllState?t.uncheckItemsByIndices(e):t.checkItemsByIndices(e)),0<Object.keys(this.changedItems).length?0<(e=this.getItemIndices(this.changedItems)).length?this.checkAllState?((100<=t._listSize||100<=this.listSize||!this.allowVirtualScrolling)&&t.checkAll(),t.uncheckItemsByIndices(e)):(i||t.uncheckAll(),t.checkItemsByIndices(e)):i||(this.checkAllState?t.checkAll():t.uncheckAll()):this.checkAllState||0!=Object.keys(this.changedItems).length||this.hasFilteredItems||t.uncheckAll(),t.setModel({checkChange:this.bbdesigner$.proxy(this.updateListItemCheckChange,this,this.rowId)}))},s.prototype.getItemIndices=function(e){var i=this,o=[];return Object.keys(e).forEach(function(e){var t=i.listBoxElement.find("li").filter(function(){return i.bbdesigner$(this).text()===e});BoldBIDashboard.isNullOrUndefined(t)||-1!==(t=t.index())&&-1===o.indexOf(t)&&o.push(t)}),o},s.prototype.getCheckedUncheckedItems=function(e){for(var t=[],i=this.listBoxElement.find("li .e-chkbox-wrap").filter("[aria-checked ="+e+"]"),o=0;o<i.length;o++)this.selectedItems.hasOwnProperty(i[o].parentElement.textContent)||t.push(i[o].parentElement.textContent);return t},s.prototype.getSelectedItems=function(e,t){var i,o;if(!BoldBIDashboard.isNullOrUndefined(e)&&0<e.length){if(this.listBoxElement.find("li .e-chkbox-wrap").length,e.length,this.hasFilteredItems=0<e.length,null!=this.currentData&&(t&&this.checkAllState||!t&&this.checkAllState))for(i=0;i<this.currentData.length;i++)-1==e.indexOf(Object.values(this.currentData[i])[0].toString())&&(this.selectedItems[Object.values(this.currentData[i])[0].toString()]=!0);for(o=0;o<e.length;o++)t&&this.checkAllState||!t&&this.checkAllState&&!this.isCheckAll?""!=this.unselectedItems[o]&&(this.unselectedItems[e[o]]=!1):""!=this.selectedItems[o]&&(this.selectedItems[e[o]]=!0)}},s.prototype.setPopupValues=function(e){var t,i,o=this.getPopupCheckBox(e),a=this.getPopupListBox(e).data("BoldBIDashboardListBox");BoldBIDashboard.isNullOrUndefined(a)||a.showAllItems(),i=this.getCheckedUncheckedItems(!0),0===Object.keys(this.changedItems).length&&(this.changedItems=Object.keys(this.selectedItems).length>Object.keys(this.unselectedItems).length&&0===Object.keys(this.unselectedItems).length?this.selectedItems:this.unselectedItems),!this.checkAllState&&this.isFilterCleared&&"indeterminate"!==o.data("BoldBIDashboardCheckBox").model.checkState?this.changedItems={}:this.checkAllState&&this.isFilterCleared&&(i=[]),t=this.getPopupRadioButton1(e),!BoldBIDashboard.isNullOrUndefined(o)&&0<o.length&&(this.checkAllState&&0==Object.keys(this.changedItems).length&&0==Object.keys(this.selectedItems).length&&0==Object.keys(this.unselectedItems).length&&0===i.length?(o.data("BoldBIDashboardCheckBox").setModel({enableTriState:!1}),o.data("BoldBIDashboardCheckBox").setModel({checkState:"checked",checked:!0}),a.checkAll(),a.setModel({checkChange:this.bbdesigner$.proxy(this.updateListItemCheckChange,this,e)})):this.checkAllState||0!==Object.keys(this.changedItems).length||0!=Object.keys(this.selectedItems).length||0!=Object.keys(this.unselectedItems).length||0!==i.length?BoldBIDashboard.isNullOrUndefined(o.data("Filters"))?BoldBIDashboard.isNullOrUndefined(o.data("Filters"))&&Object.keys(this.changedItems).length>=a._listSize?o.data("BoldBIDashboardCheckBox").setModel({checkState:"check",checked:!0}):o.data("BoldBIDashboardCheckBox").setModel({enableTriState:!0,checkState:"indeterminate"}):a._listSize<=o.data("Filters").length&&Object.keys(this.changedItems).length>=a._listSize&&this.checkAllState||a._listSize===o.data("Filters").length&&"Exclude"===this.getPopupRadioButton1(e).attr("Condition")?o.data("BoldBIDashboardCheckBox").setModel({checkState:"check",checked:!0}):o.data("BoldBIDashboardCheckBox").setModel({enableTriState:!0,checkState:"indeterminate"}):o.data("BoldBIDashboardCheckBox").setModel({checkState:"check",checked:!1}),this.isFilterCleared||((i=BoldBIDashboard.isNullOrUndefined(t.attr("Condition"))||"Include"===t.attr("Condition"))?t.prop("checked",i):this.getPopupRadioButton2(e).prop("checked",!0)))},s.prototype.getPopupContainerInformation=function(e){var t=this.getPopupCheckBox(e),e=(this.getPopupListBox(e),this.getPopupRadioButton1(e)),i=BoldBIDashboard.isNullOrUndefined(t.attr("IsSelectAll"))||"true"===t.attr("IsSelectAll");return{IsCheckAll:i,CheckAllState:this.checkAllState,IsInclude:BoldBIDashboard.isNullOrUndefined(e.attr("Condition"))||"Include"===e.attr("Condition")&&!this.checkAllState||"Exclude"===e.attr("Condition")&&this.checkAllState&&!i,FilterValues:BoldBIDashboard.isNullOrUndefined(t.data("Filters"))?null:t.data("Filters")}},s.prototype.getPopupContainerInformationforQueryfilter=function(e){for(var t=this.getPopupCheckBox(e),i=(this.getPopupListBox(e),0);i<this.filtersCheckAllState.length;i++)if(this.filtersCheckAllState[i].rowId===e){this.checkAllState=this.filtersCheckAllState[i].checkAllState;break}var o=this.getPopupRadioButton1(e),a=BoldBIDashboard.isNullOrUndefined(t.attr("IsSelectAll"))||"true"===t.attr("IsSelectAll");return{IsCheckAll:a,CheckAllState:this.checkAllState,IsInclude:BoldBIDashboard.isNullOrUndefined(o.attr("Condition"))||"Include"===o.attr("Condition")&&!this.checkAllState||"Exclude"===o.attr("Condition")&&this.checkAllState&&!a,FilterValues:BoldBIDashboard.isNullOrUndefined(t.data("Filters"))?null:t.data("Filters")}},s.prototype.showLoadingIndicator=function(e){var t=this.listBoxElement.data("BoldBIDashboardListBox");BoldBIDashboard.isNullOrUndefined(t)||t.listContainer.hasClass("e-load")||this.getPopupListBoxDiv(e).BoldBIDashboardWaitingPopup("show"),this.getPopupCheckBox(e).data("BoldBIDashboardCheckBox").disable(),this.getPopupRadioButton1(e).prop("disabled",!0),this.getPopupRadioButton2(e).prop("disabled",!0),this.setItemEnable(e,!1),BoldBIDashboard.DashboardUtil.buttonEnable(this.getPopupCancelButton(e),!1),this.getPopupSearchPanel(e).children().prop("disabled",!0)},s.prototype.hideLoadingIndicator=function(e){var t=this.getPopupContainer(e);!BoldBIDashboard.isNullOrUndefined(t)&&0<t.length&&(this.getPopupListBoxDiv(e).BoldBIDashboardWaitingPopup("hide"),this.getPopupCheckBox(e).data("BoldBIDashboardCheckBox").enable(),this.getPopupRadioButton1(e).prop("disabled",!1),this.getPopupRadioButton2(e).prop("disabled",!1),this.setItemEnable(e,!0),BoldBIDashboard.DashboardUtil.buttonEnable(this.getPopupCancelButton(e),!0),this.getPopupSearchPanel(e).children().prop("disabled",!1))},s.prototype.populateMultiSelectionItem=function(e,t){var i;BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(t.FilterValues)?(this.getComboBoxTextField(e).text(this.locale.queryDesigner.selectedAllValuesInComboBox),this.checkAllState=!0,this.getPopupCheckBox(e).attr("IsSelectAll","true"),this.isFilterCleared||this.getPopupRadioButton1(e).attr("Condition","Include"),this.getPopupCheckBox(e).data("Filters",null)):BoldBIDashboard.isNullOrUndefined(t)||0!=Object.keys(this.selectedItems).length&&0!=Object.keys(this.unselectedItems).length?(0<Object.keys(this.selectedItems).length||0<Object.keys(this.unselectedItems).length)&&!this.checkAllState&&(i=this.getPopupCheckBox(e).data("Filters"),this.getComboBoxTextField(e).text(i)):this.isFilterCleared||(this.checkAllState=t.CheckAllState,this.isCheckAll=t.IsCheckAll,this.isFiltered=!1,this.getSelectedItems(t.FilterValues,t.IsInclude),i=t.IsCheckAll||BoldBIDashboard.isNullOrUndefined(t.FilterValues)?this.locale.queryDesigner.selectedAllValuesInComboBox:this.checkAllState?this.locale.queryDesigner.selectedMultipleValuesInComboBox:t.FilterValues.toString().replace(/^[,\s]+|[,\s]+$/g,"").replace(/,[,\s]*,/g,","),this.getComboBoxTextField(e).text(i),this.getPopupCheckBox(e).data("Filters",this.getFilterArrayValues(t)),this.getPopupCheckBox(e).attr("IsSelectAll",t.IsCheckAll),this.getPopupRadioButton1(e).attr("Condition",t.IsInclude&&!t.CheckAllState||!t.IsInclude&&t.CheckAllState&&!this.isCheckAll?"Include":"Exclude"))},s.prototype.getFilterArrayValues=function(e){var t=[];return!BoldBIDashboard.isNullOrUndefined(e.FilterValues)&&0<e.FilterValues.length&&!e.IsCheckAll?e.FilterValues.forEach(function(e){-1!==e.indexOf("")?e.split("").forEach(function(){""!==e&&t.push(e)}):""!==e&&t.push(e)}):t=e.FilterValues,t},s.prototype.onSearchFocus=function(e){var t=this.getPopupSearchPanel(e),t=this.getSearchTextBox(t,e);t.addClass("e-focus"),""===t.val()&&t.val(""),t.css("color","grey"),t.off("keyup",this.bbdesigner$.proxy(this.processFilterDataRequest,this)),t.on("keyup",this.bbdesigner$.proxy(this.processFilterDataRequest,this,e))},s.prototype.clearSearchText=function(e,t,i){this.getSearchIcon(e,t).addClass("e-search").removeClass("e-close_01");e=this.getSearchIcon(e,t);this.clearListItems(),this.isFiltered=!1,this.isFilterCleared=!0,i.off("keyup",this.bbdesigner$.proxy(this.processFilterDataRequest,this)),e.off("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this,t)),i.removeClass("e-focus"),i.val(""),i.css("color","lightgrey"),this.isInitialFilter?(this.filterInfo=[this.filterInfo[0]],this.getInitialFilterValues(t,this.dateFormats(this.getMultiSelectionComboBox(t).attr("data-dateFormat")))):this.getFieldValues(t,this.dimensionFilterInfo)},s.prototype.clearListItems=function(){var e=this.listBoxElement.data("BoldBIDashboardListBox");BoldBIDashboard.isNullOrUndefined(e)||(e._loadInitialRemoteData=!0,this.listSize=e._listSize,e._oldStartValue=void 0,e.totalItemsCount=e._listSize,!BoldBIDashboard.isNullOrUndefined(e._listitems)&&0<e._listSize?this.listBoxElement.empty():e.model.totalItemsCount=e._listSize+1)},s.prototype.onSearchCloseClick=function(e){var t=this.getPopupSearchPanel(e),i=this.getSearchTextBox(t,e);this.clearSearchText(t,e,i)},s.prototype.updateCheckItemCheckChange=function(t,i){var e,o,a=this,s=this.getPopupCheckBox(t).data("BoldBIDashboardCheckBox"),n=this.getPopupListBox(t).data("BoldBIDashboardListBox");if(i.isInteraction){if(this.isFiltered&&0<n.mergeValue.length&&!i.isChecked){for(this.changedItems={},n.mergeValue.forEach(function(e){var t=Object.keys(e)[0];delete a.changedItems[e[t]],delete a.selectedItems[e[t]],delete a.unselectedItems[e[t]],a.checkAllState!==i.isChecked&&(a.changedItems[e[t]]=i.isChecked)}),e=0;e<n.mergeValue.length;e++)n.uncheckItemByIndex(e),o=Object.keys(n.mergeValue[e])[0],delete this.changedItems[n.mergeValue[e][o]];this.checkAllState=!1}else n.setModel({checkChange:null}),s.setModel({enableTriState:!1}),this.changedItems={},this.selectedItems={},this.unselectedItems={},-1!=(s=this.filters.findIndex(function(e){return e.rowId==t}))&&("Dimension"==this.filters[s].Type?this.filters[s].DimensionFilterSchemaInfo.FilterValues={}:"Date"==this.filters[s].Type&&(this.filters[s].DateFilterSchemaInfo.FilterValues={})),this.hasFilteredItems=!1,i.isChecked?(this.checkAllState=!0,n.checkAll()):(this.checkAllState=!1,n.uncheckAll()),n.setModel({checkChange:this.bbdesigner$.proxy(this.updateListItemCheckChange,this,t)});n.setModel({checkChange:this.bbdesigner$.proxy(this.updateListItemCheckChange,this,t)}),this.updateListCondition(this,t)}},s.prototype.updateListItemCheckChange=function(e,t){var i,o,a;if(t.isInteraction&&!BoldBIDashboard.isNullOrUndefined(t.event)){var s=this.getPopupCheckBox(e).data("BoldBIDashboardCheckBox"),n=(this.getPopupListBox(e).data("BoldBIDashboardListBox"),t.item[0].firstElementChild),n=JSON.parse(this.bbdesigner$(n).attr("aria-checked"));if(this.checkAllState==n||(!this.checkAllState||this.unselectedItems.hasOwnProperty(t.text))&&(this.checkAllState||this.selectedItems.hasOwnProperty(t.text))){if(delete this.changedItems[t.text],!BoldBIDashboard.isNullOrUndefined(this.filters))for(i=0;i<this.filters.length;i++)if(o=this.filters[i].DimensionFilterSchemaInfo.FilterValues,!BoldBIDashboard.isNullOrUndefined(o))for(a=0;a<o.length;a++)o[a]===t.text&&o.splice(a,1);delete this.selectedItems[t.text],delete this.unselectedItems[t.text]}else 0<Object.keys(this.unselectedItems).length&&!this.isFiltered&&(this.changedItems=this.unselectedItems),this.changedItems[t.text]=n;n=this.getPopupRadioButton1(e).prop("checked"),0==this.listBoxElement.find("li .e-chkbox-wrap").filter("[aria-checked = true]").length&&this.isFiltered&&!this.checkAllState&&0==Object.keys(this.selectedItems).length||0==this.listBoxElement.find("li .e-chkbox-wrap").filter("[aria-checked = true]").length&&!this.isFiltered?(this.setItemEnable(e,!1),s.setModel({checkState:"check",checked:!1}),this.isFiltered||(this.checkAllState=!1)):0==this.listBoxElement.find("li .e-chkbox-wrap").filter("[aria-checked = false]").length&&this.isFiltered&&this.checkAllState&&0==Object.keys(this.changedItems).length||0==this.listBoxElement.find("li .e-chkbox-wrap").filter("[aria-checked = false]").length&&!this.isFiltered?(this.setItemEnable(e,n),s.setModel({enableTriState:!1}),s.setModel({checkState:"check",checked:!0}),this.isFiltered||(this.checkAllState=!0)):(this.setItemEnable(e,!0),s.setModel({enableTriState:!0,checkState:"indeterminate"}))}},s.prototype.updateListCondition=function(e,t){var e=BoldBIDashboard.isNullOrUndefined(t=void 0===t?"":t)||""===t?BoldBIDashboard.isNullOrUndefined(e)||BoldBIDashboard.isNullOrUndefined(e.optinalArgs)?"":e.optinalArgs:t,t=this.getPopupListBox(e).data("BoldBIDashboardListBox"),t=BoldBIDashboard.isNullOrUndefined(t)?this.getCheckedUncheckedItems(!0):t.getCheckedItems(),i=this.getPopupRadioButton1(e).prop("checked");0===t.length&&this.checkAllState&&0==Object.keys(this.unselectedItems).length&&0==Object.keys(this.changedItems).length||0===t.length&&!this.checkAllState&&0==Object.keys(this.selectedItems).length&&0==Object.keys(this.changedItems).length||(this.isFiltered||this.isFilterCleared)&&(i&&!this.checkAllState||!i)&&0==Object.keys(this.changedItems).length||!i&&this.checkAllState&&this.listBoxElement.find("li .e-chkbox-wrap").length===t.length&&0==Object.keys(this.unselectedItems).length?this.setItemEnable(e,!1):this.setItemEnable(e,!0)},s.prototype.setItemEnable=function(e,t){e=this.getPopupOkButton(e);BoldBIDashboard.DashboardUtil.buttonEnable(e,t)},s.prototype.UpdateCheckAllState=function(e){for(var t=!1,i=0;i<this.filtersCheckAllState.length;i++)if(this.filtersCheckAllState[i].rowId===e){this.filtersCheckAllState[i].checkAllState=this.checkAllState,t=!0;break}t||this.filtersCheckAllState.push({rowId:e,checkAllState:this.checkAllState})},s.prototype.updatePopupContainerInformation=function(e){var t,i,o,a,s,n,r,l;if(this.selectedItems={},t=this.getCheckedUncheckedItems(!0),i=this.getCheckedUncheckedItems(!1),this.isFiltered||0<Object.keys(this.changedItems).length)if(this.checkAllState)if(this.checkAllState&&0<Object.keys(this.changedItems).length){for(n=0;n<this.listBoxSelectedItems.length;n++)this.selectedItems.hasOwnProperty(this.listBoxSelectedItems[n])||t.includes(this.listBoxSelectedItems[n])||t.push(this.listBoxSelectedItems[n]);for(a=Object.keys(this.changedItems),n=0;n<a.length;n++)this.unselectedItems.hasOwnProperty(a[n])||i.includes(a[n])||this.changedItems[a[n]]||i.push(a[n]);i=i.concat(Object.keys(this.unselectedItems)),0<this.filterInfo.length&&!BoldBIDashboard.isNullOrUndefined(this.filterInfo[0])&&(this.filterInfo[0].CheckAllState=this.checkAllState)}else 0==Object.keys(this.changedItems).length&&0==Object.keys(this.unselectedItems).length&&this.checkAllState&&(t=[],this.selectedItems=[]);else for(o=Object.keys(this.changedItems),n=0;n<o.length;n++)this.selectedItems.hasOwnProperty(o[n])||t.includes(o[n])||!this.changedItems[o[n]]||t.push(o[n]);if(0<(s=Object.keys(this.unselectedItems)).length)for(n=0;n<s.length;n++)i.includes(s[n])||i.push(s[n]);var d=this.getPopupContainer(e),h=this.getComboBoxTextField(e),p=this.getPopupCheckBox(e),c=(this.getPopupListBox(e).data("BoldBIDashboardListBox"),this.isFiltered,[]),c=(c=0<Object.keys(this.selectedItems).length?Object.keys(this.selectedItems):c).concat(t);this.checkAllState?this.UpdateFilterValues(e,i):this.UpdateFilterValues(e,t),this.clearSearchList(e),d.css("display","none"),this.updateDropDownIcon(d,e),r=this.getPopupRadioButton1(e).prop("checked")?"Include":"Exclude",!p.data("BoldBIDashboardCheckBox").model.checked&&0!=c.length||BoldBIDashboard.isNullOrUndefined(p.data("BoldBIDashboardCheckBox").model.checked)?(l=this.listBoxElement.find("li .e-chkbox-wrap"),this.checkAllState?0!==l.length&&l.length===t.length?h.text(this.locale.queryDesigner.selectedAllValuesInComboBox):2<t.length?h.text(this.locale.queryDesigner.selectedMultipleValuesInComboBox):h.text(t.toString()):l.length-t.length==0?h.text(this.locale.queryDesigner.selectedAllValuesInComboBox):h.text(c.toString()),p.attr("IsSelectAll","false"),p.data("Filters",this.checkAllState?i:c),this.getSelectedItems(this.checkAllState?i:t,"Include"==r&&!this.checkAllState||"Exclude"==r&&this.checkAllState),this.dashboardDesigner.element.find(".e-error-tip").css("display","none")):(h.text(this.locale.queryDesigner.selectedAllValuesInComboBox),p.attr("IsSelectAll","true"),p.data("Filters","Exclude"!=r||this.allowVirtualScrolling?null:c)),this.getPopupRadioButton1(e).attr("Condition",r),d.removeClass("e-multiselect-popup-container-visible")},s.prototype.UpdateFilterValues=function(t,e){this.isInitialFilter&&this.UpdateCheckAllState(t),s.isFilterValueUpdated=!1;var i,o=this.filters.filter(function(e){return e.rowId===t}),a=this.filters.findIndex(function(e){return e.rowId===t});if(this.selectedItems={},0!=o.length){if("Date"==o[0].Type){for(i=0;i<e.length;i++)this.selectedItems[e[i]]=!0;this.filters[a].DateFilterSchemaInfo.CheckAllState=this.checkAllState,this.filters[a].DateFilterSchemaInfo.IsInclude=this.getPopupRadioButton1(t).prop("checked"),delete this.filters[a].DateFilterSchemaInfo.FilterValues,this.filters[a].DateFilterSchemaInfo.FilterValues=e,s.isFilterValueUpdated=!0}else if("Dimension"==o[0].Type){for(i=0;i<e.length;i++)this.selectedItems[e[i]]=!0;this.filters[a].DimensionFilterSchemaInfo.CheckAllState=this.checkAllState,this.filters[a].DimensionFilterSchemaInfo.IsInclude=this.getPopupRadioButton1(t).prop("checked"),delete this.filters[a].DimensionFilterSchemaInfo.FilterValues,this.filters[a].DimensionFilterSchemaInfo.FilterValues=e,s.isFilterValueUpdated=!0}}else o={rowId:t,DimensionFilterSchemaInfo:{CheckAllState:this.checkAllState,IsInclude:!!this.getPopupRadioButton1(t).prop("checked")},DateFilterSchemaInfo:{CheckAllState:this.checkAllState,IsInclude:!!this.getPopupRadioButton1(t).prop("checked")}},this.filters[this.filters.length]=o},s.prototype.clearSearchList=function(e){var t=this.getPopupSearchPanel(e),i=this.getSearchTextBox(t,e);""!==i.val()&&(i.removeClass("e-focus"),this.clearSearchText(t,e,i))},s.prototype.closePopupContainer=function(e){var t;this.clearSearchList(e),(t=this.getPopupContainer(e)).css("display","none"),t.removeClass("e-multiselect-popup-container-visible"),this.updateDropDownIcon(t,e),this.getPopupListBoxDiv(e).data("BoldBIDashboardWaitingPopup").model.showOnInit&&(this.hideLoadingIndicator(e),this.killPendingRequest())},s.prototype.hidePopups=function(){for(var e,t=this.dashboardDesigner.element.find(".e-multiselect-popup-container:visible"),i=0;i<t.length;i++)e=t.eq(i).attr("data-rowid"),this.getMultiSelectionComboBox(e).parent().data("MultiSelectionComboBox").hideMultiSelectionWaitingPopup(!0)},s.prototype.hideMultiSelectionWaitingPopup=function(){var i=this,e=this.dashboardDesigner.element.find(".e-multiselect-popup-container:visible .e-multiselect-waiting-popup"),o=this.bbdesigner$;e.each(function(e,t){0<o(t).length&&o(t).data("BoldBIDashboardWaitingPopup").model.showOnInit&&i.killPendingRequest()})},s.prototype.killPendingRequest=function(){if(0<this.ajaxRequestCollection.length)for(var e=0;e<this.ajaxRequestCollection.length;e++)this.ajaxRequestCollection[e].readyState<4&&this.ajaxRequestCollection[e].abort();this.ajaxRequestCollection=[]},s.prototype.isMultiSelectionPopupLoading=function(){var i=!1,e=this.dashboardDesigner.element.find(".e-multiselect-popup-container:visible").find(".e-multiselect-waiting-popup"),o=this.bbdesigner$;return e.each(function(e,t){0<o(t).length&&o(t).data("BoldBIDashboardWaitingPopup").model.showOnInit&&(i=!0)}),i},s.prototype.updatePopupContainerVisibility=function(e){var t;!BoldBIDashboard.isNullOrUndefined(e)&&0<e.length&&(e.css("display","none"),t=e.attr("id").replace(/_popup_container/g,""),this.updateDropDownIcon(e,t))},s.prototype.updateDropDownIcon=function(e,t){t=this.getMultiSelectionComboBox(t);"block"===e.css("display")?t.find(".bbi-designer-ejwidgets-updown").removeClass("e-arrow-sans-down").addClass("e-arrow-sans-up"):t.find(".bbi-designer-ejwidgets-updown").removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down")},s.prototype.getMultiSelectionComboBox=function(e){return this.dashboardDesigner.element.find("#"+e+"_multi_select_dropDown")},s.prototype.getComboBoxTextField=function(e){return this.dashboardDesigner.element.find("#"+e+"_multi_select_dropDown_text")},s.prototype.getPopupContainer=function(e){return this.dashboardDesigner.element.find("#"+e+"_popup_container")},s.prototype.getPopupListBoxDiv=function(e){return this.dashboardDesigner.element.find("#"+e+"_popup_container_list_Box_div")},s.prototype.getPopupCheckBox=function(e){return this.dashboardDesigner.element.find("#"+e+"_popup_container_Check_Box")},s.prototype.getPopupSearchPanel=function(e){return this.dashboardDesigner.element.find("#"+e+"_popup_container_searchPanel")},s.prototype.getSearchTextBox=function(e,t){return e.find("#"+t+"_popup_container_searchBox")},s.prototype.getSearchIcon=function(e,t){return e.find("#"+t+"_popup_container_searchIcon")},s.prototype.getPopupListBox=function(e){return this.dashboardDesigner.element.find("#"+e+"_popup_container_list_Box")},s.prototype.getPopupRadioButton1=function(e){return this.dashboardDesigner.element.find("#"+e+"_popup_container_list_Box_radio1_rdo_input")},s.prototype.getPopupRadioButton2=function(e){return this.dashboardDesigner.element.find("#"+e+"_popup_container_list_Box_radio2_rdo_input")},s.prototype.getPopupOkButton=function(e){return this.dashboardDesigner.element.find("#"+e+"_popup_container_ok_btn")},s.prototype.getPopupCancelButton=function(e){return this.dashboardDesigner.element.find("#"+e+"_popup_container_cancel_btn")},s.prototype.dateFormats=function(e){var t;switch(e){case"Date Time":t=DateTimeFormat.Default;break;case"Date Hour":t=DateTimeFormat.DateHour;break;case"Month Year":t=DateTimeFormat.MonthYear;break;case"Week Year":t=DateTimeFormat.WeekYear;break;case"Quarter Year":t=DateTimeFormat.QuarterYear;break;case"Day Month Year":t=DateTimeFormat.DayMonthYear;break;case"Month Day Year":t=DateTimeFormat.MonthDayYear;break;case"Day of Week":t=DateTimeFormat.DayOfWeek;break;case"Week of Year":t=DateTimeFormat.WeekOfYear;break;case"Hours":t=DateTimeFormat.Hour;break;case"Minutes":t=DateTimeFormat.Minute;break;case"Seconds":t=DateTimeFormat.Second;break;default:t=e}return t},s.isFilterValueUpdated=!1,s}(),FilterConfigurationModel=(window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.MultiSelectionComboBox",InternalMultiSelectionComboBox,window),function(g){var e;function t(e){this.customWidgetsCollection=[],this.customWidgetItems=[],this.dashboardDesigner=e,this.bbdesigner$=this.dashboardDesigner.bbdesigner$}e=g.Dashboard||(g.Dashboard={}),t.prototype.generateToolTipTemplate=function(e,t,i){var o,a="",s=this.dashboardDesigner.modules.themeHelper.getTooltipTextColor(),n=this.dashboardDesigner.modules.themeHelper.getToolTipFontText(),i="background-color: "+this.dashboardDesigner.modules.themeHelper.getTooltipBackground()+"!important; border-color: "+this.dashboardDesigner.modules.themeHelper.getTooltipBorder()+"!important; z-index: "+i+"!important; color: "+s+"!important;",r="color: "+s+"!important;\nfont-size: "+n.size+"!important;\nfont-family: "+n.family+"!important;",l="color: "+s+" !important;\nfont-size: "+n.size+"!important;\nfont-weight: "+n.weight+"!important;\nfont-family: "+n.family+"!important;";if(0<e.length){for(a=a+('<div class="widget-tooltip-template" style="'+i+'" id='+t+"_toolTip>")+('<table class="tooltip-fontstyle" id='+t+"_tooltip_table>"),o=0;o<e.length;o++){var d=Object.keys(e[o])[0];a+="<tr id="+t+"_"+o+"_tooltip_table_rows><td id="+t+"_"+o+'_tooltip_table_rows_key style="'+r+'">'+g.DashboardUtil.encodeText(d)+" :</td><td id="+t+"_"+o+'_tooltip_table_rows_value style="'+l+'" >'+g.DashboardUtil.encodeText(e[o][d])+"</td></tr>"}a+="</table> </div>"}return a},t.enableClearFilter=function(e){var t,i;g.isNullOrUndefined(e.ControlHeader)&&e.getJson().ContainerSettings.ShowHeader||(t=e.IsPoPWidget?"e-dbrd-pop-reset":"bbi-remove-control-filter-enable",i=e.IsPoPWidget?e.designerInstance.getLocalizationContent().exportPanel.reset:e.designerInstance.getLocalizationContent().enableFilter.clearFilter,e.ControlContainer.find(".bbi-remove-control-filter").removeClass("bbi-remove-control-filter-disable").addClass(t+" bbi-dbrd-icon-theme").attr("data-tooltip",i),e.ControlContainer.find(".bbi-remove-control-filter").closest(".widget-control-icon-wrapper").addClass("bbi-dbrd-icon-background-theme"))},t.disableClearFilter=function(e){var t,i;g.isNullOrUndefined(e.ControlHeader)&&e.getJson().ContainerSettings.ShowHeader||(t=e.IsPoPWidget?"e-dbrd-pop-reset":"bbi-remove-control-filter-enable",i=e.designerInstance.getLocalizationContent().enableFilter.filterAction,e.ControlContainer.find(".bbi-remove-control-filter").removeClass(t+" bbi-dbrd-icon-theme").addClass("bbi-remove-control-filter-disable").attr("data-tooltip",i),e.ControlContainer.find(".bbi-remove-control-filter").closest(".widget-control-icon-wrapper").removeClass("bbi-dbrd-icon-background-theme"),e.ControlContainer.find(".bbi-remove-control-filter-disable").attr("data-tooltip",e.designerInstance.getLocalizationContent().toolBar.filter))},t.showInfoIcon=function(e,t){g.isNullOrUndefined(e)||""===e.trim()||g.isNullOrUndefined(t)||g.isNullOrUndefined(t.ControlHeader)||(t.ControlHeader.find(".bbi-dbrd-control-information-icon").remove(),e=g.buildTag("div.bbi-dbrd-control-information-icon e-dbrd-inform-control bbi-dbrd-designer-hoverable","",{display:"block","font-size":t.getIconFontSizeBasedOnResolution()},{"data-tooltip":e}),t.ControlHeader.append(e),t.ControlHeader.parents(".bbi-dbrd-control-container").mouseover(function(){0===t.ControlHeader.find('.bbi-remove-control-filter[style*="display: none"]').length&&t.ControlHeader.parents(".bbi-dbrd-control-container:not(.bbi-show-widget-not-configured)").find(".bbi-dbrd-controlIcon-container").css("margin-right",0===t.ControlHeader.find('.bbi-dbrd-control-information-icon[style*="display: none"]').length?"25px":"0")}),g.Dashboard.WidgetContainerHelper.setControlIconAlignment(t.ControlHeader.find(".bbi-dbrd-control-description"),t.ControlHeader.find(".bbi-dbrd-control-title-wrapper"),t.ControlHeader.find(".bbi-dbrd-controlIcon-container"),t.ControlHeader.find(".bbi-dbrd-control-title")))},t.hideInfoIcon=function(e){g.isNullOrUndefined(e)||g.isNullOrUndefined(e.ControlHeader)||(e.ControlHeader.find(".bbi-dbrd-control-information-icon").css("display","none").removeAttr("data-tooltip"),g.Dashboard.WidgetContainerHelper.setControlIconAlignment(e.ControlHeader.find(".bbi-dbrd-control-description"),e.ControlHeader.find(".bbi-dbrd-control-title-wrapper"),e.ControlHeader.find(".bbi-dbrd-controlIcon-container"),e.ControlHeader.find(".bbi-dbrd-control-title")))},t.getUniqueName=function(e,t,i,o){var a,s,n,r,l=[],d=[],h=t.designerPanel.isPasteAction?"_Copy":t.designerPanel.isExistingWidget?"_Imported":"",p=g.Dashboard.WidgetHelper.getAllWidgetElements(t._id,e.designerInstance.element.find("#"+e.designerInstance._id+"_designCanvas"),"."+e.RootCss);if(p.each(function(e,t){l.push(BoldBIDashboardDesigner.bbdesignerstatic$(t).attr("data-name"))}),o)for(a=0;a<p.length;a++)d.push(this.getWidgetInstance(p.eq(a)).getContainerSettings().Title);for(s=0;-1!==l.indexOf(e.Type+ ++s););if(t=e.Type+s,!g.isNullOrUndefined(n=i)&&(this.isAvailableWidgetName(d,i)&&(n=i+h),this.isAvailableWidgetName(d,n))){for(r=1;-1!==d.indexOf(n+ ++r););n+=r}return{Id:t,Name:n}},t.isAvailableWidgetName=function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},t.getWidgetElementVisibility=function(e,t,i){void 0===i&&(i=!1);var o=new WidgetElementsVisibility;return!g.isNullOrUndefined(t)&&t?(o.ShowLegend=!0,o.ShowXAxisLabels=!0,o.ShowXAxisTitle=!0,o.ShowYAxisTitle=!0,o.ShowYAxisLabels=!0):((4<=e.RowSpan&&4<e.ColumnSpan||4<e.RowSpan&&4<=e.ColumnSpan)&&(o.ShowLegend=!0),o.ShowXAxisLabels=i,8<=e.RowSpan&&6<=e.ColumnSpan&&(o.ShowXAxisTitle=!0),4<=e.RowSpan&&8<=e.ColumnSpan&&(o.ShowYAxisTitle=!0,o.ShowYAxisLabels=!0)),o},t.getWidgetInstance=function(e){return g.isNullOrUndefined(e)?null:e.data("widgetInstance")},t.prototype.getAllWidgets=function(){for(var e,t=g.Dashboard.WidgetHelper.getAllWidgetElements(this.dashboardDesigner._id,this.dashboardDesigner.modules.Mode.designCanvas,".bbi-dbrditem").not(".bbi-hide-qa-child-widget"),i=[],o=0;o<t.length;o++)e=g.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(t[o])),i.push(e);return i},t.getAllWidgetElements=function(e,t,i){var o=null;return o=g.isNullOrUndefined(t)?o:(o=t.find(i)).add(BoldBIDashboardDesigner.bbdesignerstatic$(document.body).find(".bbi-content-div."+e).find(i))},t.prototype.getAllCustomWidgets=function(){for(var e=this.getAllWidgets(),t=[],i=0;i<e.length;i++)"CustomWidget"===e[i].Type&&t.push(e[i]);return t},t.prototype.getBingMapWidget=function(){for(var e=this.getAllWidgets(),t=[],i=0;i<e.length;i++)"BingMap"===e[i].Type&&t.push(e[i]);return t},t.prototype.getAllDatebucketWidgets=function(){return this.getAllWidgets().filter(function(e){return e.isDefaultDataWidget()})},t.prototype.createWidgetInstance=function(e){var t,i,o,a;try{if(g.isNullOrUndefined(e)||""===e.trim())return null;for(t=e.split("."),i=window,o=0;o<t.length;o++)i=i[t[o]];if(!g.isNullOrUndefined(i))return(a=Object.create(i.prototype)).constructor.apply(a,[this.dashboardDesigner]),a}catch(e){console.error(e.message)}return null},t.prototype.getWidgetObj=function(e,t,i){for(var o,a,s=g.isNullOrUndefined(t)?this.dashboardDesigner.itemPanel.widgetItems:t,n=0;n<s.length;n++)for(o=0;o<s[n].Items.length;o++)if((a=s[n].Items[o]).widgetNameSpace===e||a.serializationNameSpace===e||a.widgetName===e||a.id===i)return a;return null},t.prototype.getCurrentWidgetInstance=function(){var e=this.dashboardDesigner.designerPanel.selectedReportItems[0];return g.Dashboard.WidgetHelper.getWidgetInstance(e)},t.createWidgetContainer=function(e,t,i,o,a){var s=t.designerPanel.isPasteAction||t.designerPanel.isExistingWidget;return g.isNullOrUndefined(e.getJson().UniqueName)||s?(s=this.getUniqueName(e,t,o,s),e.Name=s.Id,e.getContainerSettings().Title=g.isNullOrUndefined(o)||""===o?s.Id:s.Name):(e.Name=e.getJson().UniqueName,e.getContainerSettings().Title=o),g.Dashboard.WidgetContainerHelper.createContainer(e,t,i,a),this.updateWidgetFontSizeOnRendering(e,t),e.ControlContainer},t.designerEventHandler=function(e,t,i,o){return!(g.isNullOrUndefined(e.EventHelper)||!e.EventHelper.isEventListenerConfigured(t,i))&&e.designerEventListener(t,i,o)},t.isDataWidget=function(e){return e instanceof g.Dashboard.DataWidget},t.isContainerWidget=function(e){return e instanceof g.ContainerWidget},t.getLineStyle=function(e){switch(e){case"Solid":return"0";case"Dot":return"2,3";case"Dash":return"4,8";case"DotDash":return"2,6,6,10";case"LongDash":return"15";case"LongDashDotDot":return"20,10,5,5,5,10";default:return"0"}},t.setLabelParameterId=function(e,t){var i,o,a,s;if(1<=e.find(".bbi-dbrd-label-parameter-text").length)for(i=t.modules.labelParameter,o=e.find(".bbi-dbrd-label-parameter-text"),a=0;a<o.length;a++)s=i.generateIdForLabelParameterElement(o[a]),BoldBIDashboardDesigner.bbdesignerstatic$(o[a]).attr("data-labelparameterid",s),t.model.mode!==g.Designer.mode.design&&(i.setValueForLabelParameter(o[a]),BoldBIDashboardDesigner.bbdesignerstatic$(o[a]).css({display:"none"}))},t.isOlderDashboardWidgets=function(e){return"Card"===e.Type||"ChoroplethMap"===e.Type||"BubbleMap"===e.Type},t.isFilterWidgets=function(e){return"TextFilter"===e.Type||"ListBox"===e.Type||"DatePicker"===e.Type||"RangeSlider"===e.Type||"ComboBox"===e.Type||"PeriodOverPeriod"===e.Type||"RangeNavigator"===e.Type},t.isTableWidgets=function(e){return"Grid"===e.Type||"PivotGrid"===e.Type||"PivotView"===e.Type},t.createWidgetActionContextMenu=function(e,t,i,o,a,s){var n,r,l,d,h,p,c,u;if(o=this.updateWidgetLinking(t,o),n=this.populateWidgetSelectionMenuItems(i,o,e),e.model.mode!==g.Designer.mode.design)1<(o=n.filter(function(e){return!0===e.IsVisible})).length?((p=g.buildTag("ul.bbi-designer-menu e-contextmenu","",{},{id:i+"_widget_action_menu"})).BoldBIDashboardMenu({menuType:g.MenuType.ContextMenu,openOnClick:!1,contextMenuTarget:"#"+i,width:"auto",animationType:"none",fields:{dataSource:o,id:"Name",text:"DisplayName"},click:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.onWidgetSelectionMenuItemClick,this,t,e,a),close:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.onMenuItemClose,this,t,e,a)}),r=e.element,p.parents(".e-menu-wrap")&&p.parents(".e-menu-wrap").appendTo(r),d=(p=r.find("#"+i+"_widget_action_menu")).data("BoldBIDashboardMenu"),h=p.height(),p=p.width(),c=r.offset().left,u=r.offset().top,d.show(r.width()+c-s[0]<p?s[0]-p-c:s[0]-c,r.height()+u-s[1]<h?s[1]-h-u:s[1]-u,i,a)):1===o.length&&(d=o[0],t.performSelectedWidgetAction(d.Name,t,a,e));else for(l=0;l<n.length;l++)if(!0===n[l].IsVisible){-1!==t.Name.indexOf("Chart")&&-1===t.Name.indexOf("Radar")&&-1===t.Name.indexOf("ScatterChart")&&(a.cancel=!1),t.performSelectedWidgetAction(n.filter(function(e){return!0===e.IsVisible})[0].Name,t,a,e),this.updateWidgetFontSizeOnRendering(t,e);break}},t.updateWidgetLinking=function(e,t){return!g.isNullOrUndefined(e.getJson().WidgetLink)&&e.getJson().WidgetLink.Enable&&t.push(WidgetAction.WidgetLinking),t},t.onWidgetSelectionMenuItemClick=function(e,t,i,o){o.ID===WidgetAction.WidgetLinking?t.modules.containerTypeWidgetHelper.doInterWidgetLinking(e,i.selectedIndex):e.performSelectedWidgetAction(o.ID,e,i,t)},t.prototype.applyWidgetFilterValuesFromAPI=function(e,t){return t.processFilterInformation(e)},t.onMenuItemClose=function(e,t,i,o){-1!==e.Name.indexOf("Chart")&&-1===e.Name.indexOf("Radar")&&-1===e.Name.indexOf("ScatterChart")&&(i.cancel=!1,i.model.selectedDataPointIndexes=[]),g.isNullOrUndefined(o.target.text)&&(-1<e.Name.indexOf("Map")&&-1===e.Name.indexOf("Tree")&&-1===e.Name.indexOf("Heat")?e.mapObj.removeShapeSelection():-1<e.Name.indexOf("Grid")&&-1===e.Name.indexOf("Pivot")?e.clearSelection():-1<e.Name.indexOf("Pivot")?e.clearSelectionCell():-1<e.Name.indexOf("RadarPolar")?(e.radarPolarChartObj.selectedDataIndexes=[],e.radarPolarChartObj.refresh()):-1<e.Name.indexOf("ScatterChart")?(e.bubbleScatterChartObj.selectedDataIndexes=[],e.bubbleScatterChartObj.refresh()):-1<e.Name.indexOf("Chart")&&((g.isNullOrUndefined(e.chartObj)?(e.comboChartObj.model.selectedDataPointIndexes=[],e.comboChartObj):(e.chartObj.model.selectedDataPointIndexes=[],e.chartObj)).redraw(),!g.isNullOrUndefined(e.drilledChartObj)&&0<e.drillLevelInfo.length&&(e.drilledChartObj.model.selectedDataPointIndexes=[],e.drilledChartObj.redraw()),!g.isNullOrUndefined(e.drilledComboChartObj))&&0<e.drillLevelInfo.length&&(e.drilledComboChartObj.model.selectedDataPointIndexes=[],e.drilledComboChartObj.redraw()))},t.populateWidgetSelectionMenuItems=function(e,t,i){for(var o,a=[{Name:WidgetAction.DrillDown.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.drillDownDisplayName,IsVisible:!1},{Name:WidgetAction.Filter.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.filteringDisplayName,IsVisible:!1},{Name:WidgetAction.Linking.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.linkingDisplayName,IsVisible:!1},{Name:WidgetAction.ViewData.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.viewDataDisplayName,IsVisible:!1},{Name:WidgetAction.WidgetLinking.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.widgetLinkingDisplayName,IsVisible:!1}],s=0;s<a.length;s++)for(o=0;o<t.length;o++)if(t[o]===a[s].Name){a[s].IsVisible=!0;break}return a},t.getGlobalColumnId=function(t,e){for(var i,o=0;o<e.length;o++)if(0<e[o].FieldInfos.length&&0<(i=e[o].FieldInfos.filter(function(e){return e.UniqueColumnName===t})).length)return"bbi-designer-dataset-datetime"===i[0].FieldActualType?i[0].Id+"_"+i[0].DateTimeFormat:i[0].Id;return""},t.getColorCode=function(e,t,i){e=e.designerInstance.modules.resource.getColumnColorCode(t);return e=g.DashboardUtil.IsStringNullorWhiteSpace(e)?g.isNullOrUndefined(i)||g.DashboardUtil.IsStringNullorWhiteSpace(i.Color)?g.DashboardUtil.defaultColorPalette[0]:i.Color:e},t.updateIndividualColorBasedonTheme=function(e,t,i,o){if(e&&!g.isNullOrUndefined(t)&&t.Type===ColorCustomizationType.Individual&&0!==t.SolidColorInfo.length)for(var a,s=void 0,n=i[0].UniqueColumnName,s=t.SolidColorInfo.filter(function(e){return e.BasedOn.UniqueColumnName===n})[0].DefaultColorSets,e=t.SolidColorInfo[0].BasedOn.FieldId,r="bbi-designer-dataset-datetime"===i[0].FieldActualType?e+"_"+i[0].DateTimeFormat:e,l=0;l<s.length;l++)a=s[l].Name.toString(),s[l].Color=s[l].IsEdited?s[l].Color:o.modules.resource.getColumnValueColorCode(r,a)},t.prototype.updateConditionBasedWidgetTitleFont=function(e,t,i){g.isNullOrUndefined(i)||g.isNullOrUndefined(i.ControlHeader)||(e=e?this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.AutoFontSize?!this.dashboardDesigner.canApplyDashboardTheme()||"NumberCard"!==i.Type&&"KPICard"!==i.Type?i.getFontSizeBasedOnResolution(!0):"":this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.FontSize+"px":t+"px",(t=i.ControlHeader.find(".bbi-dbrd-control-title .e-title-text")).css("font-size",g.isNullOrUndefined(e)?"":e),i.ControlHeader.css("height",window.parseFloat(t.css("font-size"),10)+WidgetHeaderFontSizeFactor.title+"px"),this.updateContentContainerHeight(i))},t.prototype.updateContentContainerHeight=function(e){var t;g.isNullOrUndefined(e)||g.isNullOrUndefined(e.ControlHeader)||g.isNullOrUndefined(e.ControlSubHeader)||(t=0,"block"===e.ControlHeader.css("display")&&(t=e.ControlHeader.height()),t="none"!==e.ControlSubHeader.css("display")?t+e.ControlSubHeader.outerHeight():t,e.ContentContainer.css("height","calc(100% - "+t+"px)"))},t.prototype.updateConditionBasedWidgetSubTitleFont=function(e,t,i){g.isNullOrUndefined(i.ControlSubHeader)||(e=e?this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.AutoFontSize?!this.dashboardDesigner.canApplyDashboardTheme()||"NumberCard"!==i.Type&&"KPICard"!==i.Type?i.getFontSizeBasedOnResolution():"":this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.FontSize+"px":t+"px",(t=i.ControlSubHeader.find(".bbi-dbrd-control-sub-title .e-title-text")).css("font-size",g.isNullOrUndefined(e)?"":e),i.ControlSubHeader.css("height",window.parseFloat(t.css("font-size"),10)+WidgetHeaderFontSizeFactor.subTitle+"px"),this.updateContentContainerHeight(i))},t.updateWidgetFontSizeOnRendering=function(e,t){var i,o,a,s;this.isDataWidget(e)&&(s=e.getJson().ContainerSettings.WidgetTitleFontInfo,i=e.getJson().ContainerSettings.WidgetSubTitleFontInfo,a=!!g.isNullOrUndefined(s)||s.AutoFontSize,o=!!g.isNullOrUndefined(i)||i.AutoFontSize,a=a?t.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.AutoFontSize?null:t.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.FontSize:s.FontSize,s=o?t.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.AutoFontSize?null:t.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.FontSize:i.FontSize,g.isNullOrUndefined(e.ControlHeader)||((o=e.ControlHeader.find(".bbi-dbrd-control-title .e-title-text")).css("font-size",g.isNullOrUndefined(a)?"":a+"px"),e.ControlHeader.css("height",window.parseFloat(o.css("font-size"),10)+WidgetHeaderFontSizeFactor.title+"px")),g.isNullOrUndefined(e.ControlSubHeader)||((t=e.ControlSubHeader.find(".bbi-dbrd-control-sub-title .e-title-text")).css("font-size",g.isNullOrUndefined(s)?"":s+"px"),e.ControlSubHeader.css("height",window.parseFloat(t.css("font-size"),10)+WidgetHeaderFontSizeFactor.subTitle+"px")),g.isNullOrUndefined(e.ControlHeader)||g.isNullOrUndefined(e.ControlSubHeader)||(i=e.ControlHeader.height(),i="none"!==e.ControlSubHeader.css("display")?i+e.ControlSubHeader.outerHeight():i,e.ContentContainer.css("height","calc(100% - "+i+"px)"),g.Dashboard.WidgetContainerHelper.updateNoDataContainerSize(e,e.NoDataDispalyContainer,!1)))},t.updateWidgetContainerPosition=function(e,t){var i="";0<(e.widgetOrder=t)?i=t.toString():e.widgetOrder=100,("NumberCard"===e.Type||"KPICard"===e.Type?e.ControlContainer.find(".bbi-dbrd-content-container").children(".bbi-dbrd-isimage,.bbi-nodata-container,.bbi-widget-not-configured-text"):e.ControlContainer.find(".bbi-dbrd-content-container").children(".bbi-dbrd-control-header,.bbi-dbrd-isimage,.bbi-nodata-container,.bbi-widget-not-configured-text")).css("z-index",i),e.ControlContainer.find(".bbi-dbrd-content-container").children(".bbi-dbrd-control, .e-dbrd-widget").css("z-index",e.widgetOrder),this.isContainerWidget(e)&&e.updateWidgetPositionWithinContainer()},t.prototype.isMobileMode=function(){return!this.dashboardDesigner.model.dashboardFromData.isExportImage&&!this.dashboardDesigner.model.dashboardFromData.isExportPdf&&window.outerWidth<=768},t.prototype.getWidgetUsingId=function(t){var e=this.getAllWidgets().filter(function(e){return e.getJson().UniqueId===t});return 0<e.length?e[0]:null},t.prototype.getFirstWidgetHeight=function(){var e=this.dashboardDesigner.modules.Mode.designCanvas.find(".bbi-dbrditem");return g.isNullOrUndefined(e[0])?0:e[0].clientHeight},t.prototype.getFirstCardWidget=function(e){return"NumberCard"===e.Type||"KPICard"===e.Type},t.updateURLLinkingforDrillDown=function(e,t,i){g.isNullOrUndefined(t)||g.isNullOrUndefined(e)||!i||-1===e.url.indexOf("?")||(-1!==(i=e.url.split("?"))[1].indexOf("&&")?e.url=this.validateParameterValues("&&",i,t):-1!==i[1].indexOf("&")?e.url=this.validateParameterValues("&",i,t):i.splice(0,1))},t.clearFilterSelectionOnParamInjectionChange=function(e,i){var t,o,a,s=i.getJson().SelectedFilterValues;if(0<s.length&&0<e.length&&0<s[0].InitialDimensionFilter.Text.length)for(t=function(t){if(0===e.filter(function(e){return e.ParameterValue===s[0].InitialDimensionFilter.Text[t]}).length)return i.getJson().SelectedFilterValues=[],{value:void 0}},o=0;o<s[0].InitialDimensionFilter.Text.length;o++)if("object"==typeof(a=t(o)))return a.value},t.splitURLlinkingFieldForDrillDown=function(e,t,i){for(var o,a,s,n,r,l,d,h=[],p=0;p<t.DataGroupInfo.FieldContainers.length;p++)if(t.DataGroupInfo.FieldContainers[p].IsDrillSection)if(1<=t.DrillLevelInfo.length)for(o=0;o<=t.DrillLevelInfo.length;o++)g.isNullOrUndefined(t.DataGroupInfo.FieldContainers[p].FieldInfos[o])||h.push(t.DataGroupInfo.FieldContainers[p].FieldInfos[o].Name);else h.push(t.DataGroupInfo.FieldContainers[p].FieldInfos[0].Name);for(a=[],s=0;s<h.length;s++)for(n=0;n<i.length;n++)-1!==i[n].indexOf(h[s])&&a.push(i[n]);for(r=[],l=0;l<a.length;l++)-1!==i.indexOf(a[l])&&r.push(a[l]);for(d=0;d<r.length;d++)e.push(r[d])},t.validateParameterValues=function(e,t,i){for(var o,a,s=t[1].split(e),n=(-(t.length=1)===t[0].indexOf("showmydashboards")&&(t[0]=t[0]+"?",-1!==s[0].indexOf("showmydashboards"))&&(t[0]=t[0]+s[0]+e,s.shift()),/={{:(.*?)}}/),r=s.filter(function(e){return n.test(e)}),l=s.filter(function(e){return-1===r.indexOf(e)}),d=0;d<l.length;d++)t.push(l[d]);for(0<r.length&&this.splitURLlinkingFieldForDrillDown(t,i,r),o="",a=0;a<t.length;a++)o=0===a||a===t.length-1?o+t[a]:o+t[a]+e;return o},t.getNumberOfParametersInjected=function(e){var t=0;return g.isNullOrUndefined(e)||e.FieldContainers.forEach(function(e){e.FieldInfos.forEach(function(e){!g.isNullOrUndefined(e.ParametersInWidgets)&&0<e.ParametersInWidgets.length&&(t=e.ParametersInWidgets.length)})}),t},t.prototype.updateBackgroundOpacityToChildWidgets=function(e){var t=this.dashboardDesigner.modules.containerTypeWidgetHelper.getContainerWidget(e);e.ControlContainer.css("background-color",!g.isNullOrUndefined(t)&&t.getJson().ContainerSettings.BackgroundSettings.EnableWidgetTransparency?"transparent":this.dashboardDesigner.modules.themeHelper.getWidgetTileBackground(null))},t.setElementTransparency=function(e,t){var i=e.css("background-color");-1!==i.indexOf("rgb")&&(i=(i=i.replace("rgb(","").replace(")","")).split(","),e.css("background-color","rgba("+i[0]+","+i[1]+","+i[2]+","+t+")"))},t.updateLabelParameterForDescription=function(e,t,i){var i=i.modules.labelParameter,o=e.ContainerSettings.Description,o=i.getResultantParameterString(o,e.Data.Id);t.html(o),t.attr("data-tooltip",t.text())},t.defaultColorPalette=["#77A7FB","#E57368","#FBCB43","#34B67A","#F1AB68","#6CC2D9","#195962","#E18878","#1AA27D","#BFAAC7","#89695e","#a5c77f","#f48fb1","#90caf9","#cc4452"],e.WidgetHelper=t}(BoldBIDashboard=BoldBIDashboard||{}),InternalFilterConfiguration=function(){function e(e){this.id=null,this.reportItems=[],this.filterContainer=null,this.filterFooterTag=null,this.updateBtnTag=null,this.configChooserTag=null,this.masterFooterTag=null,this.masterElementContainer=null,this.masterScrollElement=null,this.masterUlTag=null,this.listContainer=null,this.masterListContainer=null,this.profileField=null,this.defaultContainer=null,this.customContainer=null,this.listenerField=null,this.listenerElementContainer=null,this.profileAddIcon=null,this.filterProfileAddIconDiv=null,this.masterWidgetAddIconDiv=null,this.customAddIconDiv=null,this.columnConfig=null,this.errorMsg="",this.selectedMaster=null,this.columnContainer=null,this.filterActionInfo=null,this.isCustomColumnModified=!1,this.isChangedCheckBoxValue=!1,this.editColVal=null,this.selectedProfile=null,this.isFilterProfileModified=!1,this.masterInfoTimeOut=null,this.targetInstance=null,this.targetMethod=null,this.sourceColumnData=[],this.targetSourceData=[],this.targetColumnData=[],this.filterSerializer=null,this.ejFilterDialog=null,this.ejMasterDialog=null,this.ejColumnGridObj=null,this.locale=null,this.dashboardDesigner=e,this.bbdesigner$=this.dashboardDesigner.bbdesigner$,this.locale=e.getLocalizationContent(),this.id=this.dashboardDesigner._id,this.renderFilterConfigWindow(),this.unWireEvents(),this.wireEvents(),this.filterSerializer=this.dashboardDesigner.modules.masterSlaveFilter,this.errorMsg=this.locale.masterSlaveWindow.errorMessage}return e.prototype.renderFilterConfigWindow=function(){var e=this.filterContainer=BoldBIDashboard.buildTag("div.bbi-userselect bbi-filter-config-dialog","",{},{id:this.id+"_filter_configuration"}),t=BoldBIDashboard.buildTag("table.bbi-designer-filter-config-table","",{},{unselectable:"on"}),i=BoldBIDashboard.buildTag("tr","",{}),o=BoldBIDashboard.buildTag("td.bbi-filterConfig-separator bbi-designer-filterConfig-td bbi-filterConfig-master-datacontainer","",{},{}),a=BoldBIDashboard.buildTag("td.bbi-designer-filterConfig-td bbi-filterConfig-filter-datacontainer","",{},{}),s=("chrome"===BoldBIDashboard.browserInfo().name&&a.addClass("e-browser-chrome"),e.append(t),t.append(i),i.append(o).append(a),t=BoldBIDashboard.buildTag("div","",{width:"175px",height:"470px"}),i=BoldBIDashboard.buildTag("div.e-filterConfig-filterempty","",{}),o.append(t),a.append(i),o=BoldBIDashboard.buildTag("div.bbi-filterConfig-master-header-div","",{}),a=BoldBIDashboard.buildTag("div.bbi-filterConfig-master-leftpane","",{},{}),this.masterWidgetAddIconDiv=BoldBIDashboard.buildTag("div.bbi-masterslave-filter-addIcon bbi-dbrd-background-theme","",{},{}),BoldBIDashboard.buildTag("div.bbi-filterConfig-master-Label-div bbi-dbrd-icon-theme","",{})),n=BoldBIDashboard.buildTag("span",this.locale.masterSlaveWindow.masterWidgetsLabelText,{}),r=BoldBIDashboard.buildTag("span.e-icon bbi-masterslave-filter-add-plusIcon bbi-dbrd-designer-hoverable bbi-filterConfig-master-addIcon bbi-designer-filter-addIcon","",{},{id:this.id+"_filter_config_master_addIcon","data-tooltip":"Add"}),n=(r.off("click",this.bbdesigner$.proxy(this.addMasterItems,this)),r.on("click",this.bbdesigner$.proxy(this.addMasterItems,this)),a.append(n),this.masterWidgetAddIconDiv.append(r),s.append(a).append(this.masterWidgetAddIconDiv),o.append(s),this.masterListContainer=BoldBIDashboard.buildTag("div.e-lv e-js e-parentlv e-designer-hint-newmaster bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{width:"100%",height:t.height()-o.height(),display:"block","background-color":"var(--designer-background)"},{id:this.id+"_filter_config_listContainer"})),r=BoldBIDashboard.buildTag("div","",{},{}),a=this.listContainer=BoldBIDashboard.buildTag("div.bbi-list-container e-js e-widget bbi-designer-dataset bbi-filterConfig-master-list-container","",{},{id:this.id+"_filter_config_masterList"}),l=this.masterUlTag=BoldBIDashboard.buildTag("ul.e-list-hdr e-clearall e-filterConfig-master-ui-container","",{},{id:this.id+"_filter_config_List_ulTag"}),l=(a.append(l),r.append(a),n.append(r),t.append(o).append(n),BoldBIDashboard.buildTag("div","",{margin:"0px 8px"})),a=BoldBIDashboard.buildTag("table","",{}),r=BoldBIDashboard.buildTag("tr","",{}),o=BoldBIDashboard.buildTag("td","",{}),d=BoldBIDashboard.buildTag("td","",{width:"5px"}),h=BoldBIDashboard.buildTag("td","",{}),p=BoldBIDashboard.buildTag("div","",{}),c=BoldBIDashboard.buildTag("div","",{"padding-bottom":"10px"}),u=BoldBIDashboard.buildTag("div","",{display:"inline-block"},{}),g=(this.filterProfileAddIconDiv=BoldBIDashboard.buildTag("div.bbi-masterslave-filter-addIcon bbi-dbrd-background-theme","",{},{}),BoldBIDashboard.buildTag("span",this.locale.masterSlaveWindow.filterProfileslabelText,{"padding-left":"2px"},{})),b=this.profileAddIcon=BoldBIDashboard.buildTag("span.e-icon bbi-masterslave-filter-add-plusIcon bbi-dbrd-designer-hoverable bbi-filterConfig-master-addIcon bbi-designer-filter-addIcon","",{},{id:this.id+"_filter_config_profile_addIcon","data-tooltip":"Add"}),m=this.profileField=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-filterConfig-profile-field bbi-dbrd-designer-scroll-style-3","",{}),f=BoldBIDashboard.buildTag("div","",{}),D=BoldBIDashboard.buildTag("div","",{id:this.id+"_filter_config_profile_list"}),x=BoldBIDashboard.buildTag("ul.e-list-hdr e-clearall e-filter-profileList bbi-filterConfig-ul-Profile-container","",{},{id:this.id+"_filter_config_profile_ulTag"}),g=(b.off("click",this.bbdesigner$.proxy(this.addNewProfile,this)),b.on("click",this.bbdesigner$.proxy(this.addNewProfile,this)),u.append(g),this.filterProfileAddIconDiv.append(b),D.append(x),f.append(D),m.append(f),c.append(u,this.filterProfileAddIconDiv),p.append(c,m),o.append(p,m),BoldBIDashboard.buildTag("div","",{})),b=BoldBIDashboard.buildTag("div.bbi-filterConfig-listene-label-div","",{}),x=BoldBIDashboard.buildTag("div","",{display:"inline-block"},{id:this.id+"_filter_config_checkAllTag"}),D=BoldBIDashboard.buildTag("span",this.locale.masterSlaveWindow.listenerWidgetsLabelText,{"margin-left":"10px"}),f=this.listenerField=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-filterConfig-listene-field-div bbi-dbrd-designer-scroll-style-3","",{}),u=BoldBIDashboard.buildTag("div","",{}),c=this.listenerElementContainer=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_filter_config_listener_list"}),p=BoldBIDashboard.buildTag("table.e-designer-listener-table","",{});b.append(x,D),c.append(p),u.append(c),f.append(u),g.append(b,f),h.append(g),r.append(o,d,h),r.append(h),a.append(r),l.append(a),D=BoldBIDashboard.buildTag("div","",{width:"539px"}),this.renderColumnConfig(D),i.append(l).append(D),p=this.updateBtnTag=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary",this.locale.masterSlaveWindow.updateButtonText,{float:"right","margin-right":"10px",height:"28px"},{id:this.id+"_filter_config_update_btn",type:"button"}),c=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-secondary",this.locale.masterSlaveWindow.cancelButtonText,{float:"right",height:"28px"},{id:this.id+"_filter_config_close_btn",type:"button"}),this.dashboardDesigner.element.append(e),x.BoldBIDashboardCheckBox({cssClass:"bbi-designer-filter-configuration bbi-designer-listener-checkAll",change:this.bbdesigner$.proxy(this.updateListenerSelection,this)}),e.BoldBIDashboardDialog({width:"auto",height:"auto",minWidth:"310px",minHeight:"215px",title:this.locale.masterSlaveWindow.alertTitle,enableResize:!1,showOnInit:!1,showFooter:!0,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner",enableModal:!0,close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,closeIconTooltip:this.locale.dialogOptions.closeButtonText}),u=s.height()+parseInt(s.css("padding-top"),10)+parseInt(s.css("padding-bottom"),10),this.generateScroller(n,t.height()-u+"px","auto"),this.generateScroller(m,"185px","250px"),this.generateScroller(f,"185px","250px"),this.filterFooterTag=this.dashboardDesigner.element.find("#"+this.id+"_filter_configuration_foot"),this.filterFooterTag.append(c).append(p),this.ejFilterDialog=e.data("BoldBIDashboardDialog"),this.renderMasterWindow()},e.prototype.updateListenerSelection=function(i){var e,o=this;i.isInteraction&&(e=this.listenerElementContainer.find(".e-designer-listener-table tr"),this.bbdesigner$(e.find('input[type="checkbox"]')).each(function(e,t){t=o.dashboardDesigner.element.find("#"+t.id).data("BoldBIDashboardCheckBox");BoldBIDashboard.isNullOrUndefined(t)||t.setModel({checked:i.model.checked})}),this.dashboardDesigner.element.find("#"+i.model.id).data("BoldBIDashboardCheckBox").setModel({enableTriState:!1,checkState:i.checkState}),0<e.length)&&this.updateBtnTag.prop("disabled",!i.model.checked)},e.prototype.wireEvents=function(){this.dashboardDesigner.element.on("click","#"+this.id+"_filter_config_update_btn",this.bbdesigner$.proxy(this.updateFilterConfig,this)),this.dashboardDesigner.element.on("click","#"+this.id+"_filter_config_close_btn",this.bbdesigner$.proxy(this.closeFilterWindow,this)),this.dashboardDesigner.element.on("click","#"+this.id+"_master_add_ok_btn",this.bbdesigner$.proxy(this.updateMasterInfoTimeOut,this)),this.dashboardDesigner.element.on("click","#"+this.id+"_master_add_cancel_btn",this.bbdesigner$.proxy(this.closeMasterWindow,this))},e.prototype.unWireEvents=function(){this.dashboardDesigner.element.off("click","#"+this.id+"_filter_config_update_btn",this.bbdesigner$.proxy(this.updateFilterConfig,this)),this.dashboardDesigner.element.off("click","#"+this.id+"_filter_config_close_btn",this.bbdesigner$.proxy(this.closeFilterWindow,this)),this.dashboardDesigner.element.off("click","#"+this.id+"_master_add_ok_btn",this.bbdesigner$.proxy(this.updateMasterInfoTimeOut,this)),this.dashboardDesigner.element.off("click","#"+this.id+"_master_add_cancel_btn",this.bbdesigner$.proxy(this.closeMasterWindow,this))},e.prototype.generateScroller=function(e,t,i){e.BoldBIDashboardScroller({scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,height:t,width:i,enableTouchScroll:!0,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize})},e.prototype.renderColumnConfig=function(e){var t=this.configChooserTag=BoldBIDashboard.buildTag("div.bbi-filterConfig-chooser-div","",{},{}),i=BoldBIDashboard.buildTag("div.bbi-dbrd-filter-dlg-mode-btn-wrapper","",{},{id:this.id+"_filter_btn_wrapper"}),o=(this.customAddIconDiv=BoldBIDashboard.buildTag("div.bbi-masterslave-filter-addIcon bbi-dbrd-background-theme","",{},{}),o=BoldBIDashboard.buildTag("span.e-icon bbi-masterslave-filter-add-plusIcon bbi-dbrd-designer-hoverable bbi-filterConfig-master-addIcon bbi-designer-filter-addIcon","",{},{id:this.id+"_filter_config_custom_addIcon","data-tooltip":"Add"}),this.customAddIconDiv.append(o),t.append(i).append(this.customAddIconDiv),o.off("click",this.bbdesigner$.proxy(this.addCustomColumn,this)),o.on("click",this.bbdesigner$.proxy(this.addCustomColumn,this)),this.columnContainer=BoldBIDashboard.buildTag("div","",{height:"190px",width:"540px",display:"inline-block","margin-bottom":"5px","border-top":"1px solid var(--designer-primary-border-color)"},{id:this.id+"_column_config_container"})),a=this.defaultContainer=BoldBIDashboard.buildTag("div","",{height:"190px",display:"block","border-radius":"4px","border-width":"0px"},{id:this.id+"_default_column_container"}),s=BoldBIDashboard.buildTag("div.bbi-designer-defaultcolumn-grid","",{height:"190px",display:"block","border-width":"0px"},{id:this.id+"_default_column_grid"}),n=this.columnConfig=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control","",{height:"190px",width:"540px",display:"inline-block","border-radius":"4px"},{}),r=this.customContainer=BoldBIDashboard.buildTag("div.bbi-designer-custom-column","",{display:"block","background-color":"#ffffff",height:"190px","border-width":"0px"},{id:this.id+"_custom_column_container"});n.append(r),e.append(t),e.append(o),a.append(s),o.append(n).append(a),this.generateScroller(n,"190px","540px"),this.customTypeSwitcher(!1),this.createGridDefaultColumn(s),this.createRadioBtnSection(i)},e.prototype.createRadioBtnSection=function(e){var t=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_btn_grp"});e.append(t),e={callBackInstance:this,callBackMethod:"dataChooser",groupName:"filter",triggerOnCodeUpdate:!0,labelPosition:BoldBIDashboard.Dashboard.LabelPosition.After,dataSource:[{id:this.id+"_filter_config_default",label:"Default",isChecked:!0,value:"default"},{id:this.id+"_filter_config_custom",label:"Custom",isChecked:!1,value:"custom"}]},this.radioButtonMode=new BoldBIDashboard.Dashboard.RadioButton(e,t)},e.prototype.createGridDefaultColumn=function(e){for(var t=[],i=[{fieldName:"SourceColumn",Name:this.locale.masterSlaveWindow.sourceColumn},{fieldName:"TargetDataSource",Name:this.locale.masterSlaveWindow.targetDataSource},{fieldName:"TargetColumn",Name:this.locale.masterSlaveWindow.targetColumn}],o=540/i.length,a=0;a<i.length;a++)t.push({field:i[a].fieldName,headerText:i[a].Name,width:o,textAlign:BoldBIDashboard.TextAlign.Left});e.BoldBIDashboardGrid({enableRowHover:!1,allowScrolling:!1,columns:t,allowSelection:!1,height:150,scrollSettings:{allowVirtualScrolling:!1,virtualScrollMode:"normal",enableTouchScroll:!1,autoHide:!0,scrollerSize:10}}),this.ejColumnGridObj=e.data("BoldBIDashboardGrid")},e.prototype.appendMasterList=function(e,t){var i=e.ID,o=e.Name,a=BoldBIDashboard.buildTag("li.e-user-select e-list e-state-default e-list-check bbi-filterConfig-master-li-container bbi-designer-masterwidget-list","",{},{id:this.id+"_li_"+i,name:o,guid:i}),s=BoldBIDashboard.buildTag("a.e-chevron-right_01 bbi-remove-shadow","",{padding:"8px 0px","min-height":"16px"}),n=BoldBIDashboard.buildTag("span.e-list-text e-rel bbi-designer-content bbi-dbrd-designer-hoverable bbi-filterConfig-master-text-span",o,{},{name:o,id:this.id+"_li_"+i+"_textSpan"});s.append(n),i=BoldBIDashboard.buildTag("div.e-chk-image e-icon e-cross-circle bbi-dbrd-designer-hoverable bbi-filterConfig-master-closeIcon-span bbi-filter-configuration-close","",{},{id:this.id+"_"+i,"data-tooltip":"Delete"}),BoldBIDashboard.DashboardUtil.textWidth(o,"12px Heebo")>=n.width()&&n.attr("data-tooltip",o),s.append(i),a.append(s),i.off("click",this.bbdesigner$.proxy(this.removeMaster,this,a,e)),a.off("click",this.bbdesigner$.proxy(this.masterSelection,this,e.ID)),i.on("click",this.bbdesigner$.proxy(this.removeMaster,this,a,e)),a.on("click",this.bbdesigner$.proxy(this.masterSelection,this,e.ID)),a.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseUp,this.bbdesigner$.proxy(this.onListItemMouseUp,this)),a.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseOver,this.bbdesigner$.proxy(this.elementMouseOver,this,i)),a.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseLeave,this.bbdesigner$.proxy(this.elementMouseLeave,this,i)),BoldBIDashboard.isNullOrUndefined(t)?this.masterUlTag.append(a):0===t?(this.masterUlTag.prepend(a),a.css({"border-bottom":"0.5px solid #c8c8c8"})):this.listContainer.find("ul>li:nth-child("+t+")").after(a),this.masterListContainer.height()>this.listContainer.height()?this.masterListContainer.find(".e-content").removeClass("e-content"):this.scrollerRefresh(this.masterListContainer)},e.prototype.elementMouseOver=function(e){e.css("display","inline-block")},e.prototype.elementMouseLeave=function(e){e.css("display","none")},e.prototype.getSelectedMasterCollection=function(e){for(var t=null,i=this.filterActionInfo.MastersCollection,o=0;o<i.length;o++)i[o].MasterInfo.ID===e&&(t=i[o]);return t},e.prototype.masterSelection=function(e){e!==this.selectedMaster.MasterInfo.ID&&("disabled"===this.profileAddIcon.attr("disabled")&&this.disableFilterConditionSlaveWidgetArea(!1),this.updateMasterDetails(),e=this.getSelectedMasterCollection(e),BoldBIDashboard.isNullOrUndefined(e)||(this.selectedMaster=e,0<this.selectedMaster.ProfileManager.length?(this.selectedProfile=this.selectedMaster.ProfileManager[0],this.disableFilterConditionSlaveWidgetArea(!1),this.populateProfileArea(!0),this.isChangedCheckBoxValue=!1):(this.selectedProfile=null,this.resetColumnConfiguration(),this.resetProfileFields(),this.resetListenerContainer(),this.disableFilterConditionSlaveWidgetArea(!0,!1))))},e.prototype.getSelectedListener=function(e){for(var t,i=[],o=0;o<e.length;o++)t=this.dashboardDesigner.element.find("#"+this.id+"_listener_"+e[o].ID).data("BoldBIDashboardCheckBox"),!BoldBIDashboard.isNullOrUndefined(t)&&t.model.checked&&i.push(e[o]);return i},e.prototype.updateMasterDetails=function(){0<this.filterActionInfo.MastersCollection.length&&!BoldBIDashboard.isNullOrUndefined(this.selectedProfile)&&this.UpdateProfileDetails(),this.removeEmptyCustomColumn()},e.prototype.removeMaster=function(e,t){var i,o;for(e.remove(),this.scrollerRefresh(this.masterListContainer),this.resetProfileFields(),this.scrollerRefresh(this.profileField),this.resetListenerContainer(),this.scrollerRefresh(this.listenerField),i=this.filterActionInfo.MastersCollection,o=0;o<i.length;o++)i[o].MasterInfo.ID===t.ID&&i.splice(o,1);0<this.masterUlTag.find("li").length?(this.setDefaultSelection(),this.disableFilterConfigArea(!1),this.populateProfileArea(!0),this.masterUlTag.find("li").first().addClass("bbi-masterwidget-user-selection-active")):(this.resetColumnConfiguration(),this.disableFilterConfigArea(!0),this.masterWidgetAddIconDiv.removeAttr("disabled"),this.updateBtnTag.removeAttr("disabled"))},e.prototype.profileSelection=function(e){var t,i;if("disabled"!==this.profileAddIcon.attr("disabled")&&(t=e.find("span.e-list-text").attr("name"),!BoldBIDashboard.isNullOrUndefined(this.selectedMaster))&&0<this.selectedMaster.ProfileManager.length&&""!==t&&this.selectedProfile.Name!==t)for(this.UpdateProfileDetails(),this.isChangedCheckBoxValue=!1,i=0;i<this.selectedMaster.ProfileManager.length;i++)this.selectedMaster.ProfileManager[i].ProfileInfo.Name===t&&(this.selectedProfile=this.selectedMaster.ProfileManager[i],this.populateProfileArea(!1))},e.prototype.setProfileInfoToSelectedProfileProperty=function(){0<this.selectedMaster.ProfileManager.length?(this.selectedProfile=this.selectedMaster.ProfileManager[0],this.populateProfileArea(!1),this.profileField.find(".e-filter-profileList li").first().addClass("bbi-masterwidget-user-selection-active")):(this.selectedProfile=null,this.resetListenerContainer(),this.resetColumnConfiguration(),this.listenerField.attr("disabled","true").css({opacity:"0.5"}),this.configChooserTag.find("#"+this.id+"_filter_config_default_rdo_input").prop("disabled",!0),this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("disabled",!0),this.updateBtnTag.prop("disabled",!0),this.configChooserTag.css("opacity","0.5"))},e.prototype.onListItemMouseUp=function(e){var e=this.bbdesigner$(e.target).closest("li"),t=this.bbdesigner$;e.hasClass("bbi-masterwidget-user-selection-active")||(e.parent().children().each(function(){var e=t(this);e.removeClass("bbi-masterwidget-user-selection-active"),e.find("span").removeClass("bbi-masterwidget-user-selection-active")}),e.addClass("bbi-masterwidget-user-selection-active"),e.find("span").addClass("bbi-masterwidget-user-selection-active"))},e.prototype.addNewProfile=function(){"disabled"!==this.profileAddIcon.attr("disabled")&&(this.disableFilterConditionSlaveWidgetArea(!0),this.appendProfileElement(this.selectedMaster.MasterInfo.Name,this.selectedMaster.MasterInfo.ID,"",!1),this.scrollerRefresh(this.profileField))},e.prototype.appendProfileElement=function(e,t,i,o){var a=BoldBIDashboard.getGuid(""),s=this.profileField.height()<this.profileField.find("#"+this.id+"_filter_config_profile_list").height()?190:200,n=BoldBIDashboard.buildTag("li.e-user-select e-list e-list-check bbi-designer-filterProfile-row bbi-filterConfig-master-filterprofile-li-container","",{},{id:this.id+"_li_"+a,name:i}),r=BoldBIDashboard.buildTag("a.e-chevron-right_01 bbi-remove-shadow","",{padding:"3.5px 0"}),l=BoldBIDashboard.buildTag("span.e-list-text e-rel e-user-select bbi-designer-fontfamily bbi-filterConfig-master-filterprofile-name bbi-dbrd-designer-hoverable"+(BoldBIDashboard.DashboardUtil.textWidth(i,"12px Heebo")>=s?" e-title-tip":""),i,{width:s,display:o?"inline-block":"none"},{name:i,id:this.id+"_txtSpan_"+a}),d=BoldBIDashboard.buildTag("input.e-textbox e-edit-profile bbi-designer-fontfamily bbi-filterConfig-master-filterprofile-textbox","",{width:26+s,display:o?"none":"inline-block"},{liTag:this.id+"_txtSpan_"+a,type:"text",id:this.id+"_txtEdit_"+a}),a=BoldBIDashboard.buildTag("div.e-chk-image e-icon e-cross-circle bbi-dbrd-designer-hoverable bbi-filterConfig-master-filterprofile-closeIcon-span bbi-filter-configuration-close","",{},{id:this.id+"_closeIcon_"+a,"data-tooltip":"Delete"});BoldBIDashboard.DashboardUtil.textWidth(i,"12px Heebo")>=s&&l.attr("data-tooltip",i),o?n.addClass("bbi-designer-filterProfile-list"):(a.addClass("e-list-close-icon"),d.addClass("e-selected-textbox")),r.append(l).append(d).append(a),n.append(r),this.profileField.find(".e-filter-profileList").append(n),o?"1"!==this.profileAddIcon.css("opacity")&&this.disableAddIcon(!1):(this.disableAddIcon(!0),this.onListItemMouseUp({target:n})),n.off("click",this.bbdesigner$.proxy(this.profileSelection,this,n,t)),a.off("click",this.bbdesigner$.proxy(this.removeProfile,this,n)),n.on("click",this.bbdesigner$.proxy(this.profileSelection,this,n,t)),a.on("click",this.bbdesigner$.proxy(this.removeProfile,this,n)),n.bind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.editProfileName,this)),n.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseOver,this.bbdesigner$.proxy(this.profileMouseOver,this,a)),n.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseLeave,this.bbdesigner$.proxy(this.profileMouseLeave,this,a)),n.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseUp,this.bbdesigner$.proxy(this.onListItemMouseUp,this)),n.find(".e-edit-profile").off("blur",this.bbdesigner$.proxy(this.editColumnBlur,this,t)),n.find(".e-edit-profile").off("keypress",this.bbdesigner$.proxy(this.editColumnKeyPress,this,t)),n.find(".e-edit-profile").on("blur",this.bbdesigner$.proxy(this.editColumnBlur,this,t)),n.find(".e-edit-profile").on("keypress",this.bbdesigner$.proxy(this.editColumnKeyPress,this,t)),n.find(".e-edit-profile").focus()},e.prototype.removeProfile=function(e){var t,i=e.find("span.e-list-text").attr("name");if(!BoldBIDashboard.isNullOrUndefined(this.selectedMaster)&&0<this.selectedMaster.ProfileManager.length)if(this.selectedProfile.ProfileInfo.Name===i&&"disabled"!==this.profileAddIcon.attr("disabled"))for(t=0;t<this.selectedMaster.ProfileManager.length;t++)this.selectedMaster.ProfileManager[t].ProfileInfo.Name===this.selectedProfile.ProfileInfo.Name&&(this.selectedMaster.ProfileManager.splice(t,1),e.remove(),this.setProfileInfoToSelectedProfileProperty(this.selectedMaster.MasterInfo.ID));else!BoldBIDashboard.isNullOrUndefined(i)&&""!==i||(e.remove(),this.disableFilterConditionSlaveWidgetArea(!1),this.UpdateProfileDetails(),this.setProfileInfoToSelectedProfileProperty(this.selectedMaster.MasterInfo.ID));else e.remove(),this.resetListenerContainer(),this.resetColumnConfiguration(),this.listenerField.attr("disabled","true").css({opacity:"0.5"}),this.configChooserTag.find("#"+this.id+"_filter_config_default_rdo_input").prop("disabled",!0),this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("disabled",!0),this.updateBtnTag.prop("disabled",!0),this.configChooserTag.css("opacity","0.5"),"1"!==this.profileAddIcon.css("opacity")&&this.disableAddIcon(!1);this.scrollerRefresh(this.profileField)},e.prototype.editProfileName=function(e){var t,i=this.bbdesigner$(e.currentTarget).find(".e-edit-profile"),o=i[0],a=this.profileField.find(".e-filter-profileList").find(".e-edit-profile:visible").not(i),s=this.bbdesigner$(e.currentTarget).find(".e-list-text"),n=this.bbdesigner$(e.currentTarget).find(".e-cross-circle");"none"===i.css("display")&&0===a.length?(t=s.text().trim(),s.css("display","none"),e.currentTarget.classList.remove("bbi-designer-filterProfile-list"),n.css("display","none"),n.addClass("e-list-close-icon"),i.css("display","inline-block").val(t).focus(),i.addClass("e-selected-textbox"),this.editColVal=t,o.selectionStart=o.selectionEnd=t.length):0<a.length&&this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.profileNameEditAdd,IconType.warning,AlertType.Alert,!1,"")},e.prototype.profileMouseOver=function(e){e.hasClass("e-list-close-icon")||e.css("display","inline-block")},e.prototype.profileMouseLeave=function(e){e.css("display","none")},e.prototype.editColumnBlur=function(e,t){var i,t=this.bbdesigner$(t.currentTarget),o=t.closest("li"),a=t.attr("liTag"),s=o.find("#"+a),n=t.val().trim(),r=s.attr("name"),l=o.find(".e-cross-circle");r!==n.trim()?""===n.trim()?this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.filterKeyEmpty,IconType.errors,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):this.isExistProfileName(n,s)?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidFilterProfile,this.locale.masterSlaveWindow.filterKeyExist,IconType.warning,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):(t.css("display","none"),s.css("display","inline-block").text(n.trim()),i=this.bbdesigner$("#"+o[0].id),a=this.bbdesigner$("#"+a),i.attr("name",n.trim()),a.attr("name",n.trim()),BoldBIDashboard.DashboardUtil.textWidth(n.trim(),"12px Heebo")>=a.width()?(a.addClass("bbi-dbrd-designer-hoverable"),a.attr("data-tooltip",n.trim())):a.removeAttr("data-tooltip"),this.UpdateSelectedProfileDetails(r,n.trim(),e),this.editColVal=null,"1"!==this.profileAddIcon.css("opacity")&&this.disableAddIcon(!1),this.addOrRemoveCloseIcon(l,o,t)):BoldBIDashboard.isNullOrUndefined(n)||""===n.trim()?""===n.trim()&&this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.filterKeyEmpty,IconType.warning,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):(t.css("display","none"),s.css("display","inline-block"),this.addOrRemoveCloseIcon(l,o,t))},e.prototype.invalidFilterProfileNameAlert=function(){this.filterContainer.find(".e-selected-textbox").focus().select()},e.prototype.addOrRemoveCloseIcon=function(e,t,i){BoldBIDashboard.isNullOrUndefined(e)||e.removeClass("e-list-close-icon"),BoldBIDashboard.isNullOrUndefined(t)||t.addClass("bbi-designer-filterProfile-list"),BoldBIDashboard.isNullOrUndefined(i)||i.removeClass("e-selected-textbox")},e.prototype.editColumnKeyPress=function(e,t){var i,o,a,s,n,r,l;13===t.keyCode&&(o=(t=this.bbdesigner$(t.currentTarget)).closest("li"),a=t.attr("liTag"),s=o.find("#"+a),n=t.val().trim(),r=s.attr("name"),l=o.find(".e-cross-circle"),r!==n.trim()?""===n.trim()?this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.filterKeyEmpty,IconType.errors,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):this.isExistProfileName(n,s)?this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.filterKeyExist,IconType.warning,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):(t.css("display","none"),s.css("display","inline-block").text(n.trim()),i=this.bbdesigner$("#"+o[0].id),a=this.bbdesigner$("#"+a),i.attr("name",n.trim()),a.attr("name",n.trim()),BoldBIDashboard.DashboardUtil.textWidth(n.trim(),"12px Heebo")>=a.width()?(a.addClass("bbi-dbrd-designer-hoverable"),a.attr("data-tooltip",n.trim())):a.removeAttr("data-tooltip"),this.UpdateSelectedProfileDetails(r,n.trim(),e),this.editColVal=null,"1"!==this.profileAddIcon.css("opacity")&&this.disableAddIcon(!1),this.addOrRemoveCloseIcon(l,o,t)):BoldBIDashboard.isNullOrUndefined(n)||""===n.trim()?""===n.trim()&&this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.filterKeyEmpty,IconType.errors,AlertType.Alert,!1,"",{instance:this,method:"invalidFilterProfileNameAlert"}):(t.css("display","none"),s.css("display","inline-block"),this.addOrRemoveCloseIcon(l,o,t)),this.isFilterProfileModified=!0)},e.prototype.UpdateProfileDetails=function(){0<this.selectedMaster.ProfileManager.length&&!BoldBIDashboard.isNullOrUndefined(this.selectedProfile)&&(this.isCustomColumnModified&&(this.removeEmptyCustomColumn(),this.selectedProfile.ProfileInfo.FilterCondition=this.getCustomColumnValues(),this.selectedProfile.ProfileInfo.Option=this.isCustomColumnModified,this.isCustomColumnModified=!1),this.isChangedCheckBoxValue)&&(this.selectedProfile.WidgetInfo=this.getSelectedListener(this.selectedProfile.WidgetInfo))},e.prototype.SetSelectedProfile=function(e,t){var i,o;if(this.selectedMaster.MasterInfo.ID===e)for((i=this.createProfileInfo()).Name=t,i.FilterCondition=this.bbdesigner$.parseJSON(JSON.stringify(this.getDefaultFilterConditions(e))),this.selectedMaster.ProfileManager.push({ProfileInfo:i,WidgetInfo:this.generateWidgetInfo(e)}),o=0;o<this.selectedMaster.ProfileManager.length;o++)this.selectedMaster.ProfileManager[o].ProfileInfo.Name===t&&(this.selectedProfile=this.selectedMaster.ProfileManager[o])},e.prototype.isExistProfileName=function(e){var t;if(!BoldBIDashboard.isNullOrUndefined(this.selectedMaster.ProfileManager)&&0<this.selectedMaster.ProfileManager.length)for(t=0;t<this.selectedMaster.ProfileManager.length;t++)if(this.selectedMaster.ProfileManager[t].ProfileInfo.Name.toLowerCase()===e.toLowerCase())return!0;return!1},e.prototype.UpdateSelectedProfileDetails=function(e,t,i){var o,a=!1;if(0<this.selectedMaster.ProfileManager.length)for(o=0;o<this.selectedMaster.ProfileManager.length;o++)this.selectedMaster.ProfileManager[o].ProfileInfo.Name===e&&(this.selectedMaster.ProfileManager[o].ProfileInfo.Name=t,a=!0);else a=!1;a||this.setNewProfile(i,t)},e.prototype.setNewProfile=function(e,t){this.UpdateProfileDetails(),this.SetSelectedProfile(e,t),this.disableFilterConditionSlaveWidgetArea(!1),this.populateProfileArea(!1),this.updateBtnTag.removeAttr("disabled")},e.prototype.populateListenerWidgets=function(e,t){var i,o,a,s,n,r;for(this.resetListenerContainer(),i=this.listenerElementContainer.find(".e-designer-listener-table"),o=this.filterSerializer.getWidgetList(),a=0;a<o.length;a++)(s=o[a].ID)===t.ID||t.IsPoP&&!o[a].IsPoPSupported||this.checkBoxWithElementsCreation(o[a].Name,s,this.id+"_listener_"+s,!0,i,"5px 15px 0px 10px");for(n=0;n<e.length;n++)r=e[n],t.IsPoP&&!e[n].IsPoPSupported||(r=this.dashboardDesigner.element.find("#"+this.id+"_listener_"+r.ID).data("BoldBIDashboardCheckBox"),BoldBIDashboard.isNullOrUndefined(r))||r.setModel({checked:!0});this.updateListenerCheckAllSelection(e),this.scrollerRefresh(this.listenerField)},e.prototype.resetListenerContainer=function(){this.listenerElementContainer.find(".e-designer-listener-table tr").remove()},e.prototype.dataChooser=function(e){var t;"change"===e.args.event.type&&((e="custom"===e.args.value)?(this.isCustomColumnModified=!0,this.customTypeSwitcher(e),this.removeEmptyCustomColumn()):(this.removeEmptyCustomColumn(),t=this.getCustomColumnValues(),!(!this.isCustomColumnModified&&!this.selectedProfile.ProfileInfo.Option)?this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.masterSlaveWindow.resetAllCustomizationText,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this,dataInfo:{filterCondition:t}}):this.customTypeSwitcher(e)))},e.prototype.confirmAction=function(e,t){e?(this.customTypeSwitcher(!1),this.customContainer.empty(),this.selectedProfile.ProfileInfo.FilterCondition=this.bbdesigner$.parseJSON(JSON.stringify(this.getDefaultFilterConditions(this.selectedMaster.MasterInfo.ID))),this.updateConfigFields(this.selectedProfile.ProfileInfo.FilterCondition,this.sourceColumnData,this.targetColumnData),this.isCustomColumnModified=!1,this.selectedProfile.ProfileInfo.Option=!1):(this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("checked",!0),this.customTypeSwitcher(!e),this.customContainer.empty(),this.updateConfigFields(t.filterCondition,this.sourceColumnData,this.targetColumnData),this.isCustomColumnModified=!0,this.selectedProfile.ProfileInfo.Option=!0)},e.prototype.getCustomColumnValues=function(){var d=this,h=[],e=this.customContainer.find(".e-reportdesigner-column-config-row"),p=this.bbdesigner$;return e.each(function(e,t){var t=p(t).attr("id"),i=d.customContainer.find("#"+t+"_source_column").data("BoldBIDashboardDropDownList"),o=d.customContainer.find("#"+t+"_datasource_column").data("BoldBIDashboardDropDownList"),a=o.getSelectedValue(),o=o.getItemDataByValue(a)[0].Name,s=p(i.getSelectedItem()).text(),i=i.getSelectedValue(),n=d.customContainer.find("#"+t+"_target_column"),r="",l="",l=!BoldBIDashboard.isNullOrUndefined(n)&&0<n.length?(n=n.data("BoldBIDashboardDropDownList"),r=p(n.getSelectedItem()).text(),n.getSelectedValue()):((n=p("#"+t+"_target_column_div_drop_tree_wrapper_input")).data("BoldBIDashboardDropDownList"),r=n.data("BoldBIDashboardDropDownList").model.text,n.data("BoldBIDashboardDropDownList").model.value);0<i.length&&0<a.length&&0<l.length||(BoldBIDashboard.DashboardUtil.showErrIndictor(d.customContainer.find("#"+t+"_col_error_icon"),!0),0),0<i.length||(d.updateBorder(p("#"+t+"_source_column_wrapper"),!0),0),0<a.length||(d.updateBorder(p("#"+t+"_datasource_column_wrapper"),!0),0),0<l.length||(d.updateBorder(p("#"+t+"_target_column_wrapper"),!0),0),0<i.length&&0<a.length&&0<l.length&&(d.updateBorder(d.bbdesigner$("#"+t+"_source_column_wrapper > span"),!1),d.updateBorder(d.bbdesigner$("#"+t+"_datasource_column_wrapper > span"),!1),d.updateBorder(d.bbdesigner$("#"+t+"_target_column_wrapper > span"),!1),BoldBIDashboard.DashboardUtil.showErrIndictor(d.customContainer.find("#"+t+"_col_error_icon"),!1),(n=d.createcolumnJson()).SourceColumn.Name=s,n.SourceColumn.ID=i,n.DataSource.ID=a,n.DataSource.Name=o,n.TargetColumn.Name=r,n.TargetColumn.ID=l,h.push(n),0)}),h},e.prototype.updateBorder=function(e,t){t?e.addClass("bbi-designer-error"):e.removeClass("bbi-designer-error")},e.prototype.createcolumnJson=function(){return{SourceColumn:{ID:"",Name:""},DataSource:{ID:"",Name:""},TargetColumn:{ID:"",Name:""}}},e.prototype.customTypeSwitcher=function(e){var t=this.configChooserTag.find(".e-icon.bbi-masterslave-filter-add-plusIcon");e?(this.defaultContainer.css("display","none"),t.css("display","table"),this.columnConfig.css({display:"block",width:"515px"}),this.columnContainer.css({opacity:"1"}),this.scrollerRefresh(this.columnConfig)):(t.css("display","none"),this.columnConfig.css("display","none"),this.defaultContainer.css("display","block"),this.columnContainer.css({opacity:"0.5"}))},e.prototype.addCustomColumn=function(){this.renderNewConfigField(),this.scrollerRefresh(this.columnConfig)},e.prototype.isDuplicate=function(e,t){for(var i=0;i<e.length;i++)if(e[i].Name===t)return!0;return!1},e.prototype.updateConfigFields=function(e){for(var t=0;t<e.length;t++){var i=this.renderNewConfigField(),o=this.customContainer.find("#"+i+"_source_column"),a=this.customContainer.find("#"+i+"_datasource_column"),s=this.customContainer.find("#"+i+"_target_column_div");o.data("BoldBIDashboardDropDownList").selectItemByText(e[t].SourceColumn.Name),a.data("BoldBIDashboardDropDownList").selectItemByValue(e[t].DataSource.ID),this.populateTargetColumn(this.targetColumnData,a,s,o,{}),a=this.customContainer.find("#"+i+"_target_column"),!BoldBIDashboard.isNullOrUndefined(a)&&0<a.length?a.data("BoldBIDashboardDropDownList").selectItemByText(e[t].TargetColumn.Name):((s=this.bbdesigner$("#"+i+"_target_column_div_drop_tree_wrapper_input")).data("BoldBIDashboardDropDownList").model.text=s.data("BoldBIDashboardDropDownList").model.value=e[t].TargetColumn.Name,s.data("BoldBIDashboardDropDownList")._addText(e[t].TargetColumn.Name))}},e.prototype.populateCustomColumn=function(e,t){var i,e=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_"+e)),o=[];this.bbdesigner$.each(e.supportedColumnsForFiltering(),function(e,t){o.push({Name:t.Name,Id:t.Id})}),e=this.dashboardDesigner.modules.dataSet.datasets,i=this.getTargetDataSourceList(e),this.targetColumnData=e,this.targetSourceData=i,this.sourceColumnData=o,0<t.length&&(this.updateConfigFields(t,o,i),this.isCustomColumnModified=!1)},e.prototype.getTargetDataSourceList=function(e){for(var t=[],i=0;i<e.length;i++)this.isDuplicateDataSource(t,e[i].Id)||BoldBIDashboard.isNullOrUndefined(e[i].Id)||""===e[i].Id||t.push({Name:e[i].Name,Id:e[i].Id});return t},e.prototype.isDuplicateDataSource=function(e,t){for(var i=0;i<e.length;i++)if(e[i].Id===t)return!0;return!1},e.prototype.renderNewConfigField=function(){var e,t,i,o,a=this.sourceColumnData,s=this.targetSourceData,n=this.targetColumnData,r=BoldBIDashboard.getGuid(this.id+"_row_"),l=BoldBIDashboard.buildTag("div.e-reportdesigner-column-config-row","",{padding:"4px 10px","border-radius":"4px"},{id:r,rowId:r}),d=(this.customContainer.append(l),BoldBIDashboard.buildTag("table.bbi-designer-table-dialog","",{height:"40px",width:"100%",background:"var(--designer-container-background) !important"},{unselectable:"on",id:r+"_column_config_table"})),h=BoldBIDashboard.buildTag("tr","",{},{id:r+"_link_rowTag"}),p=BoldBIDashboard.buildTag("td","",{width:"145px","padding-left":"5px"}),c=BoldBIDashboard.buildTag("input","",{"font-size":"12px"},{id:r+"_source_column"}),u=(p.append(c),e=BoldBIDashboard.buildTag("td","",{width:"145px","padding-left":"5px"},{}),t=BoldBIDashboard.buildTag("input","",{"font-size":"12px"},{id:r+"_datasource_column"}),e.append(t),i=BoldBIDashboard.buildTag("td","",{width:"145px","padding-left":"5px"},{}),o=BoldBIDashboard.buildTag("div","",{"font-size":"12px"},{id:r+"_target_column_div"}),i.append(o),BoldBIDashboard.buildTag("td","",{"padding-left":"5px",width:"10px"},{id:r+"_col_error_icon"})),g=BoldBIDashboard.buildTag("td","",{"padding-right":"5px",width:"20px"}),b=BoldBIDashboard.buildTag("div.e-chk-image e-icon e-cross-circle bbi-dbrd-designer-hoverable bbi-filterConfig-master-custom-closeIcon-span bbi-filter-configuration-close","",{},{id:r+"_delete_icon","data-tooltip":"Delete"});return l.append(d),d.append(h),h.append(p).append(e).append(i).append(u).append(g),this.dashboardDesigner.modules.util.renderErrIndictor(u,this.id,this.errorMsg),g.append(b),b.off("click",this.bbdesigner$.proxy(this.deleteCustomColumn,this,l)),b.on("click",this.bbdesigner$.proxy(this.deleteCustomColumn,this,l)),c.BoldBIDashboardDropDownList({showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-border bbi-designer-ejwidgets bbi-dbrd-control",width:"145px",height:"26px",dataSource:a,fields:{text:"Name",value:"Id"},watermarkText:this.locale.masterSlaveWindow.sourceColumn,change:this.bbdesigner$.proxy(this.populateTargetColumn,this,n,t,o,c)}),t.BoldBIDashboardDropDownList({showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-border bbi-designer-ejwidgets bbi-dbrd-control",width:"145px",height:"26px",dataSource:s,fields:{text:"Name",value:"Id"},watermarkText:this.locale.masterSlaveWindow.targetDataSource,change:this.bbdesigner$.proxy(this.populateTargetColumn,this,n,t,o,c)}),d.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseOver,this.bbdesigner$.proxy(this.elementMouseOver,this,b)),d.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseLeave,this.bbdesigner$.proxy(this.elementMouseLeave,this,b)),r},e.prototype.updateModificationStatus=function(){this.isCustomColumnModified=!0},e.prototype.setEmptyDataSource=function(e){this.isCustomColumnModified=!0;e=e.data("BoldBIDashboardDropDownList");0<e.model.dataSource.length&&(e.model.dataSource=[],e.clearText())},e.prototype.getCheckDataField=function(e,t,i){if(t.DataField===e)return!0;if(!BoldBIDashboard.isNullOrUndefined(t.ChildFields))for(var o=0;o<t.ChildFields.length;o++)i=this.getCheckDataField(e,t.ChildFields[o],i);return i},e.prototype.populateTargetColumn=function(e,t,i,o){this.updateModificationStatus(null);var a,s,n,r=[],l=t.data("BoldBIDashboardDropDownList").getSelectedValue(),d=[],h=null,t=o.data("BoldBIDashboardDropDownList");BoldBIDashboard.isNullOrUndefined(t)||BoldBIDashboard.isNullOrUndefined(t.model.selectedIndex)||(h=t.model.dataSource[t.model.selectedIndex].Name);var p=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_"+this.selectedMaster.MasterInfo.ID)).DataGroupInfo.DataSourceID,c=null,u=null;if(!BoldBIDashboard.isNullOrUndefined(h)&&0<l.length&&0<h.length){for(s=0;s<e.length;s++)l===e[s].Id&&(r=e[s].Fields,u=e[s]),p===e[s].Id&&(c=e[s]);if(a=null,!BoldBIDashboard.isNullOrUndefined(c))for(s=0;s<c.Fields.length;s++)if(this.getCheckDataField(h,c.Fields[s],!1)){a=c.Fields[s].TypeName;break}for(n=0;n<r.length;n++)a===r[n].TypeName&&d.push({Name:r[n].Name,Id:r[n].Id});BoldBIDashboard.isNullOrUndefined(u)||BoldBIDashboard.isNullOrUndefined(u.TreeViewData)?(!BoldBIDashboard.isNullOrUndefined(i)&&0<i.length&&i[0].hasChildNodes()&&i[0].children[0].remove(),o=BoldBIDashboard.buildTag("input","",{"font-size":"12px"},{id:i.closest(".e-reportdesigner-column-config-row").attr("id")+"_target_column"}),i.append(o),o.BoldBIDashboardDropDownList({showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-border bbi-designer-ejwidgets bbi-dbrd-control",width:"145px",height:"26px",dataSource:d,fields:{text:"Name",value:"Id"},watermarkText:this.locale.masterSlaveWindow.targetColumn,change:this.bbdesigner$.proxy(this.updateModificationStatus,this)})):(!BoldBIDashboard.isNullOrUndefined(i)&&0<i.length&&i[0].hasChildNodes()&&i[0].children[0].remove(),t={fields:{id:"ColumnId",parentId:"ParentId",hasChild:"HasChild",dataSource:JSON.parse(u.TreeViewData).Dimension,text:"Name"},callBackInstance:this,callBackMethod:"updateModificationStatus",watermarkText:this.locale.masterSlaveWindow.targetColumn,popupHeight:"100%",width:"145",height:"26px",optionalArgs:null},new BoldBIDashboard.DashboardDesignerUtility.DropdownTreeview(this.dashboardDesigner,t,i))}},e.prototype.removeEmptyCustomColumn=function(){var e,i,o=this;0<this.customContainer.find(".e-reportdesigner-column-config-row").length&&(e=this.customContainer.find(".e-reportdesigner-column-config-row"),i=this.bbdesigner$,e.each(function(e,t){t=i(t).attr("id");o.isEmptyRow(t)&&o.customContainer.find("#"+t).remove()}),this.scrollerRefresh(this.columnConfig))},e.prototype.isEmptyRow=function(e){var t,i=this.customContainer.find("#"+e+"_source_column").data("BoldBIDashboardDropDownList").getSelectedValue(),o=this.customContainer.find("#"+e+"_datasource_column").data("BoldBIDashboardDropDownList").getSelectedValue(),a=this.customContainer.find("#"+e+"_target_column"),e=this.bbdesigner$("#"+e+"_target_column_div_drop_tree_wrapper_input");return!BoldBIDashboard.isNullOrUndefined(a)&&0<a.length?t=a.data("BoldBIDashboardDropDownList").getSelectedValue():!BoldBIDashboard.isNullOrUndefined(e)&&0<e.length&&(t=e.data("BoldBIDashboardDropDownList").getSelectedValue()),!(0<i.length&&0<o.length&&0<t.length)},e.prototype.deleteCustomColumn=function(e){0<this.customContainer.find(".e-reportdesigner-column-config-row").length&&(this.isEmptyRow(e.attr("id"))||(this.isCustomColumnModified=!0),e.remove(),this.scrollerRefresh(this.columnConfig))},e.prototype.getDefaultFilterConditions=function(e){var e=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_"+e)),t=[];return t=e.isDefaultDataWidget()?t:this.filterSerializer.getFilterCondition(e)},e.prototype.updateGridValues=function(e){for(var t=this.getDefaultFilterConditions(e),i=[],o=0;o<t.length;o++)i.push({SourceColumn:t[o].SourceColumn.Name,TargetColumn:t[o].TargetColumn.Name,TargetDataSource:t[o].DataSource.Name});this.ejColumnGridObj.setModel({dataSource:i})},e.prototype.scrollerRefresh=function(e){e.data("BoldBIDashboardScroller")&&e.data("BoldBIDashboardScroller").refresh()},e.prototype.updateFilterConfig=function(){this.updateMasterDetails(),null!==this.targetInstance&&(BoldBIDashboard.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.filterActionInfo]),this.isFilterProfileModified||this.closeFilterWindow()),this.isFilterProfileModified=!1},e.prototype.openFilterConfiguration=function(e,t,i){this.ejFilterDialog.open(),this.resetFilter(),this.targetInstance=e,this.targetMethod=t,this.filterActionInfo=this.bbdesigner$.extend(!0,{},i),0<this.filterActionInfo.MastersCollection.length?(this.setDefaultSelection(),this.populateValues(),this.disableFilterConfigArea(!1)):(this.disableFilterConfigArea(!0),this.masterWidgetAddIconDiv.removeAttr("disabled"))},e.prototype.setDefaultSelection=function(){0<this.filterActionInfo.MastersCollection.length&&(this.selectedMaster=this.filterActionInfo.MastersCollection[0]),0<this.selectedMaster.ProfileManager.length&&(this.selectedProfile=this.selectedMaster.ProfileManager[0])},e.prototype.populateValues=function(){this.populateMasterArea(),this.populateProfileArea(!0)},e.prototype.populateMasterArea=function(){var e,t;if(0<this.masterUlTag.children().length&&(this.masterUlTag.empty(),this.scrollerRefresh(this.masterListContainer)),0<this.filterActionInfo.MastersCollection.length){for(e=0;e<this.filterActionInfo.MastersCollection.length;e++)t=this.filterActionInfo.MastersCollection[e].MasterInfo,this.appendMasterList(t);this.masterUlTag.find("li").first().addClass("bbi-masterwidget-user-selection-active"),this.masterUlTag.find("span").first().addClass("bbi-masterwidget-user-selection-active")}},e.prototype.populateProfileArea=function(e){if(0<this.selectedMaster.ProfileManager.length){if(this.resetColumnConfiguration(),e){this.resetProfileFields();for(var t=0;t<this.selectedMaster.ProfileManager.length;t++)this.appendProfileElement(this.selectedMaster.MasterInfo.Name,this.selectedMaster.MasterInfo.ID,this.selectedMaster.ProfileManager[t].ProfileInfo.Name,!0);this.profileField.find(".e-filter-profileList li").first().addClass("bbi-masterwidget-user-selection-active")}this.populateSlaveArea(),this.populateDefaultArea(),this.populateCustomArea()}else this.resetColumnConfiguration(),this.resetProfileFields(),this.resetListenerContainer(),this.disableFilterConditionSlaveWidgetArea(!0,!1),this.updateBtnTag.prop("disabled",!0);this.scrollerRefresh(this.profileField)},e.prototype.populateSlaveArea=function(){this.populateListenerWidgets(this.selectedProfile.WidgetInfo,this.selectedMaster.MasterInfo)},e.prototype.populateDefaultArea=function(){this.updateGridValues(this.selectedMaster.MasterInfo.ID)},e.prototype.populateCustomArea=function(){BoldBIDashboard.isNullOrUndefined(this.selectedProfile)||(this.populateCustomColumn(this.selectedMaster.MasterInfo.ID,this.selectedProfile.ProfileInfo.FilterCondition),this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("checked",this.selectedProfile.ProfileInfo.Option),this.customTypeSwitcher(this.selectedProfile.ProfileInfo.Option))},e.prototype.disableFilterConfigArea=function(e){e?this.profileField.css({opacity:"0.5"}):this.profileField.css({opacity:"1"}),this.disableFilterConditionSlaveWidgetArea(e)},e.prototype.disableAddIcon=function(e){(e=void 0===e?!0:e)?(this.profileAddIcon.attr("disabled","true").css("opacity","0.5"),this.filterProfileAddIconDiv.attr("disabled","true"),this.masterWidgetAddIconDiv.attr("disabled","true"),this.customAddIconDiv.attr("disabled","true")):(this.profileAddIcon.removeAttr("disabled").css("opacity","1"),this.filterProfileAddIconDiv.removeAttr("disabled"),this.masterWidgetAddIconDiv.removeAttr("disabled"),this.customAddIconDiv.removeAttr("disabled"))},e.prototype.disableFilterConditionSlaveWidgetArea=function(e,t){void 0===t&&(t=!0),e?(this.listenerField.prop("disabled","true").css({opacity:"0.5"}),this.configChooserTag.find("#"+this.id+"_filter_config_default_rdo_input").prop("disabled",!0),this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("disabled",!0),this.disableAddIcon(t),this.configChooserTag.css("opacity","0.5"),this.columnContainer.find("#"+this.id+"_custom_column_container .e-dropdownlist").BoldBIDashboardDropDownList("disable"),this.filterContainer.find("#"+this.id+"_filter_config_listener_list .e-checkbox").BoldBIDashboardCheckBox("disable")):(this.listenerField.removeAttr("disabled").css({opacity:"1"}),this.configChooserTag.find("#"+this.id+"_filter_config_default_rdo_input").prop("disabled",!1),this.configChooserTag.find("#"+this.id+"_filter_config_custom_rdo_input").prop("disabled",!1),this.disableAddIcon(!1),this.configChooserTag.css("opacity","1"),this.columnContainer.find("#"+this.id+"_custom_column_container .e-dropdownlist").BoldBIDashboardDropDownList("enable"),this.filterContainer.find("#"+this.id+"_filter_config_listener_list .e-checkbox").BoldBIDashboardCheckBox("enable"))},e.prototype.resetProfileFields=function(){this.profileField.find(".e-filter-profileList li").remove()},e.prototype.resetColumnConfiguration=function(){this.configChooserTag.find("#"+this.id+"_filter_config_default_rdo_input").prop("checked",!0),this.customTypeSwitcher(!1),this.destroyCustomContainer(),this.customContainer.empty(),this.ejColumnGridObj.setModel({dataSource:[]})},e.prototype.destroyCustomContainer=function(){BoldBIDashboard.DashboardUtil.destroyEjObjects(this.customContainer)},e.prototype.resetFilter=function(){0<this.masterUlTag.children().length&&(this.masterUlTag.empty(),this.scrollerRefresh(this.masterListContainer)),this.resetListenerContainer(),this.resetProfileFields(),this.resetColumnConfiguration(),this.reportItems=[],this.targetInstance=null,this.targetMethod=null,this.isCustomColumnModified=!1,this.filterActionInfo=null},e.prototype.closeFilterWindow=function(){0<this.filterContainer.find(".e-selected-textbox").length||(this.resetFilter(),this.disableFilterConfigArea(!1),this.ejFilterDialog.close())},e.prototype.destroy=function(){this.unWireEvents(),BoldBIDashboard.DashboardUtil.destroyEjObjects(this.dashboardDesigner.element.find("#"+this.id+"_add_master")),0<this.dashboardDesigner.element.find("#"+this.id+"_add_master").length&&this.dashboardDesigner.element.find("#"+this.id+"_add_master").remove(),BoldBIDashboard.DashboardUtil.destroyEjObjects(this.dashboardDesigner.element.find("#"+this.id+"_filter_configuration")),0<this.dashboardDesigner.element.find("#"+this.id+"_filter_configuration").length&&this.dashboardDesigner.element.find("#"+this.id+"_filter_configuration").remove()},e.prototype.renderMasterWindow=function(){var e=BoldBIDashboard.buildTag("div.bbi-userselect","",{},{id:this.id+"_add_master"}),t=BoldBIDashboard.buildTag("div","",{"padding-bottom":"10px"}),i=BoldBIDashboard.buildTag("span",this.locale.masterSlaveWindow.chooseWidgetText,{}),o=this.masterScrollElement=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{width:"100%",height:"300px",border:"1px solid var(--designer-primary-border-color)","border-radius":"4px",padding:"5px 0px"},{id:this.id+"_add_master_container"}),a=BoldBIDashboard.buildTag("div","",{}),s=this.masterElementContainer=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_add_master_fields"}),n=BoldBIDashboard.buildTag("table.e-designer-master-table","",{});s.append(n),a.append(s),o.append(a),t.append(i),e.append(t).append(o),n=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-primary bbi-dbrd-btn-small",this.locale.masterSlaveWindow.okButtonText,{float:"right"},{id:this.id+"_master_add_ok_btn",type:"button"}),s=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-secondary bbi-dbrd-btn-small bbi-dbrd-margin-left",this.locale.masterSlaveWindow.cancelButtonText,{float:"right"},{id:this.id+"_master_add_cancel_btn",type:"button"}),this.dashboardDesigner.element.append(e),e.BoldBIDashboardDialog({width:"auto",height:"auto",minWidth:"280px",minHeight:"215px",title:this.locale.masterSlaveWindow.addWidgetDialogAlertTitle,enableResize:!1,showOnInit:!1,showFooter:!0,cssClass:"bbi-designer-dialog boldbi-dashboarddesigner",enableModal:!0,close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,closeIconTooltip:this.locale.dialogOptions.closeButtonText}),o.BoldBIDashboardScroller({scrollerSize:5,height:"190px",width:"auto",enableTouchScroll:!0,autoHide:!0,buttonSize:0}),this.masterFooterTag=this.dashboardDesigner.element.find("#"+this.id+"_add_master_foot"),this.masterFooterTag.append(s).append(n),this.ejMasterDialog=e.data("BoldBIDashboardDialog")},e.prototype.isAvailableMaster=function(e){for(var t=0;t<this.filterActionInfo.MastersCollection.length;t++)if(e===this.filterActionInfo.MastersCollection[t].MasterInfo.ID)return!0;return!1},e.prototype.getMasterWidgetsJson=function(){for(var e=this.filterSerializer.getMastetFilterWidgets(),t=[],i=0;i<e.length;i++)t.push(e[i].getJson());return t},e.prototype.getRemainingWidgets=function(){for(var e=this.getMasterWidgetsJson(),t=[],i=0;i<e.length;i++)this.isAvailableMaster(e[i].UniqueName)||t.push(this.getWidgetJSON(e[i].UniqueName,e[i].ContainerSettings.Title));return t},e.prototype.profileManager=function(){return{ProfileInfo:null,WidgetInfo:[]}},e.prototype.createProfileInfo=function(){return{ID:"",Name:"",FilterCondition:[],Option:!1}},e.prototype.createMasterInfo=function(){return{ID:"",Name:""}},e.prototype.createWidgetInfo=function(){return{ID:"",Name:""}},e.prototype.createMasterCollectionJSON=function(){return{MasterInfo:null,ProfileManager:[]}},e.prototype.generateWidgetInfo=function(e){for(var t,i=[],o=this.filterSerializer.getWidgetList(),a=0;a<o.length;a++)o[a].ID!==e&&((t=this.createWidgetInfo()).ID=o[a].ID,t.Name=o[a].Name,i.push(t));return i},e.prototype.getWidgetJSON=function(e,t){var i=this.createMasterCollectionJSON(),o=this.createMasterInfo();return o.ID=e,o.Name=t,i.MasterInfo=o,i},e.prototype.openMasterDialog=function(){var e;this.reportItems=this.getRemainingWidgets(),0<this.reportItems.length?(this.resetMasterFields(),this.ejMasterDialog.open(),this.populateMastersInMasterDialog(this.reportItems)):(e=0<this.reportItems.length?"more":" ",this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.alertTitle,this.locale.alertWindow.noBtnText+e+this.locale.masterSlaveWindow.widgetsAvailable,IconType.information,AlertType.Alert,!1,""))},e.prototype.addMasterItems=function(){this.openMasterDialog()},e.prototype.populateMastersInMasterDialog=function(e){for(var t=this.masterElementContainer.find(".e-designer-master-table"),i=0;i<e.length;i++)this.checkBoxWithElementsCreation(e[i].MasterInfo.Name,e[i].MasterInfo.ID,this.id+"_master_"+e[i].MasterInfo.ID.replace(" ",""),!1,t,"0px 20px 5px 10px");this.scrollerRefresh(this.masterScrollElement)},e.prototype.checkBoxWithElementsCreation=function(e,t,i,o,a,s){var n=BoldBIDashboard.buildTag("tr","",{id:i+"_tr"}),s=BoldBIDashboard.buildTag("td","",{align:"left",padding:s},{}),a=(n.append(s),a.append(n),BoldBIDashboard.buildTag("div","",{display:"inline-block"},{})),n=BoldBIDashboard.buildTag("input","",{},{type:"checkbox",id:i}),i=BoldBIDashboard.buildTag("label.bbi-dashbrd-filter-widget-label bbi-dbrd-designer-hoverable",e,{height:"20px"},{for:i,type:"label"});BoldBIDashboard.DashboardUtil.isExistTextWidth(i)&&i.attr("data-tooltip",e),a.append(n,i),s.append(a),o?n.BoldBIDashboardCheckBox({cssClass:"bbi-designer-param-assign bbi-designer-filter-checktext",change:this.bbdesigner$.proxy(this.changedCheckBoxValue,this,e,t)}):n.BoldBIDashboardCheckBox({cssClass:"bbi-designer-param-assign bbi-designer-filter-checktext"})},e.prototype.changedCheckBoxValue=function(e,t,i){for(var o,a,s,n,r,l,d,h,p,c,u=!(this.isChangedCheckBoxValue=!0),g=o=0;g<this.selectedProfile.WidgetInfo.length;g++)if(this.selectedProfile.WidgetInfo[g].ID===t){u=!0,o=g;break}if(a=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_"+t)),i.isChecked){if(s=[],this.selectedMaster.MasterInfo.IsPoP&&!u){for(n=0;n<this.filterActionInfo.MastersCollection.length;n++)if(this.filterActionInfo.MastersCollection[n].MasterInfo.IsPoP&&this.filterActionInfo.MastersCollection[n].MasterInfo.ID!==this.selectedMaster.MasterInfo.ID)for(r=this.filterActionInfo.MastersCollection[n].ProfileManager,l=0;l<r.length;l++)for(d=0;d<r[l].WidgetInfo.length;d++)s.indexOf(r[l].WidgetInfo[d].ID)<0&&s.push(r[l].WidgetInfo[d].ID);if(-1<s.indexOf(t)){for(h=0;h<this.filterActionInfo.MastersCollection.length;h++)if(this.filterActionInfo.MastersCollection[h].MasterInfo.IsPoP&&this.filterActionInfo.MastersCollection[h].MasterInfo.ID!==this.selectedMaster.MasterInfo.ID)for(p=0;p<this.filterActionInfo.MastersCollection[h].ProfileManager[0].WidgetInfo.length;p++)this.filterActionInfo.MastersCollection[h].ProfileManager[0].WidgetInfo[p].ID===t&&this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.SlaveWidgetOverrideTitle,this.locale.alertWindowMesages.slaveOverrideMessage+this.filterActionInfo.MastersCollection[h].MasterInfo.Name+this.locale.alertWindowMesages.slaveOverrideAlert+this.selectedMaster.MasterInfo.Name+" ? ",IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{},instance:this,method:"confirmOverrideSlaveWidget"})}else a.isFieldBoundInUnsupportedSection()&&this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.SlaveWidgetOverrideTitle,this.locale.alertWindowMesages.slaveWidgetDataResetMessage,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{},instance:this,method:"confirmOverrideSlaveWidget"})}u||((c=new WidgetInfo).ID=t,c.Name=e,c.IsPoPSupported=!BoldBIDashboard.isNullOrUndefined(a)&&a.IsPoPSupportedWidget,this.selectedProfile.WidgetInfo.push(c))}else c=this.selectedProfile.WidgetInfo,u&&c.splice(o,1),this.selectedProfile.WidgetInfo=c;i.isInteraction&&this.updateListenerCheckAllSelection(this.selectedProfile.WidgetInfo)},e.prototype.updateListenerCheckAllSelection=function(e){var t=this.dashboardDesigner.element.find("#"+this.id+"_filter_config_checkAllTag").data("BoldBIDashboardCheckBox");0===e.length?this.updateCheckAllSelection(t,!1,"uncheck"):this.listenerElementContainer.find(".e-designer-listener-table tr").length===e.length?this.updateCheckAllSelection(t,!0,"check"):e.length<this.listenerElementContainer.find(".e-designer-listener-table tr").length&&this.updateCheckAllSelection(t,null,"indeterminate")},e.prototype.updateCheckAllSelection=function(e,t,i){BoldBIDashboard.isNullOrUndefined(e)||("indeterminate"===i?(e.setModel({enableTriState:!0,checkState:i}),this.updateBtnTag.prop("disabled",!1)):(e.setModel({enableTriState:!1,checkState:i,checked:t}),this.updateBtnTag.prop("disabled",!t)))},e.prototype.confirmOverrideSlaveWidget=function(e){var t,i,o;if(e){for(t=0;t<this.filterActionInfo.MastersCollection.length;t++)if(this.filterActionInfo.MastersCollection[t].MasterInfo.IsPoP&&this.filterActionInfo.MastersCollection[t].MasterInfo.ID!==this.selectedMaster.MasterInfo.ID)for(i=0;i<this.filterActionInfo.MastersCollection[t].ProfileManager[0].WidgetInfo.length;i++)for(o=0;o<this.selectedProfile.WidgetInfo.length;o++)this.filterActionInfo.MastersCollection[t].ProfileManager[0].WidgetInfo[i].ID===this.selectedProfile.WidgetInfo[o].ID&&this.filterActionInfo.MastersCollection[t].ProfileManager[0].WidgetInfo.splice(i,1)}else this.populateListenerWidgets([],this.selectedMaster.MasterInfo)},e.prototype.updateMasterInfoTimeOut=function(){var e=this;clearTimeout(this.masterInfoTimeOut),this.masterInfoTimeOut=setTimeout(function(){e.updateMasterInfo()},250)},e.prototype.updateMasterInfo=function(){for(var e=[],t=[],i=0;i<this.reportItems.length;i++)this.dashboardDesigner.element.find("#"+this.id+"_master_"+this.reportItems[i].MasterInfo.ID.replace(" ","")).data("BoldBIDashboardCheckBox").isChecked()?(e.push(this.reportItems[i]),this.filterActionInfo.MastersCollection.push(this.bbdesigner$.parseJSON(JSON.stringify(this.getMasterInformation(this.reportItems[i].MasterInfo.ID))))):t.push(this.reportItems[i]);0<e.length?(this.reportItems=t,this.closeMasterWindow(),this.disableFilterConfigArea(!1),0<this.masterUlTag.find("li").length&&this.updateMasterDetails(),this.setDefaultSelection(),this.populateValues()):this.dashboardDesigner.modules.util.alertDialog(this.locale.masterSlaveWindow.masterWidget,this.locale.masterSlaveWindow.selectWidget,IconType.errors,AlertType.Alert,!1,"")},e.prototype.getMasterInformation=function(e){var e=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.dashboardDesigner.element.find("#"+this.dashboardDesigner._id+"_"+e)),t=this.filterSerializer.getWidgetList();return this.filterSerializer.generateMasterInformation(e,t)},e.prototype.resetMasterFields=function(){this.masterElementContainer.find(".e-designer-master-table tr").remove()},e.prototype.closeMasterWindow=function(){this.ejMasterDialog.close()},e}(),window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.FilterConfiguration",InternalFilterConfiguration,window),function(){this.MastersCollection=[]}),Widgetcollection=function(){this.MasterInfo=new MasterInfo,this.ProfileManager=[]},MasterInfo=function(){this.ID=null,this.Name=null,this.IsPoP=!1,this.UniqueId=null,this.IsDatebucket=!1},ProfileManager=function(){this.ProfileInfo=new ProfileInfo,this.WidgetInfo=[]},ProfileInfo=function(){this.ID=null,this.Option=!0,this.Name=null,this.FilterCondition=[]},FilterCondition=function(){this.SourceColumn=new ColumnDetail,this.TargetColumn=new ColumnDetail,this.DataSource=new ColumnDetail},ColumnDetail=function(){this.ID=null,this.Name=null},WidgetInfo=function(){this.ID=null,this.Name=null,this.IsPoPSupported=!1,this.UniqueId=null},InternalFilterConfigurationInfo=function(){function e(){this.filterConfigurationModel=null,this.datebucketConfigurationModel=null}return e.prototype.setFilterConfiguration=function(e){this.filterConfigurationModel=e},Object.defineProperty(e.prototype,"FilterConfigurationModel",{get:function(){return this.filterConfigurationModel},enumerable:!1,configurable:!0}),e.prototype.setDatebucketConfigurationModel=function(e){this.datebucketConfigurationModel=e},Object.defineProperty(e.prototype,"DatebucketConfigurationModel",{get:function(){return this.datebucketConfigurationModel},enumerable:!1,configurable:!0}),e}(),Settings=(window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.FilterConfigurationInfo",InternalFilterConfigurationInfo,window),function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.Settings",this.MasterSlaveFilterActions=[]}),MasterSlaveFilterAction=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.MasterSlaveFilterAction",this.FilterActions=[],this.IsPoPWidget=!1,this.IsDatebucketWidget=!1},FilterAction=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.FilterAction",this.Slaves=[],this.FilterCases=[]},FilterShell=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.FilterShell",this.SourceColumn=new ColumnAliasPair,this.TargetColumn=new ColumnAliasPair},ColumnAliasPair=function(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.ColumnAliasPair"};!function(e){e[e.All=0]="All",e[e.Selected=1]="Selected"}(FilterActionScheme=FilterActionScheme||{}),InternalMasterSlaveFilterSerializationHelper=function(){function e(e){this.filterObject=null,this.nonSlaveFilterWidgets=[],this.allSpecialChar="&ZeroWidthSpace;",this.dashboardDesigner=null,this.isInteractionCompleted=!0,this.isInteraction=!1,this.dashboardDesigner=e,this.bbdesigner$=this.dashboardDesigner.bbdesigner$,this.filterObject=this.dashboardDesigner.modules.filterConfigurationInfo,this.widgetHelper=this.dashboardDesigner.modules.widgetHelper,this.dateFormat=this.dashboardDesigner.model.localeSettings.dateFormat,this.dateTimeFormat=this.dashboardDesigner.model.localeSettings.dateFormat+" "+this.dashboardDesigner.model.localeSettings.timeFormat}return e.prototype.getFilterConfigurationInfoInstance=function(){return this.filterObject},e.prototype.getMastetFilterWidgets=function(e){var t=this;return(e||this.widgetHelper.getAllWidgets()).filter(function(e){return e.canUseWidgetAsMaster()&&t.isChildWidgetRequiredForInitialFilter(e)&&!t.checkParameterFieldBinded(e)})},e.prototype.getSlaveFilterWidgets=function(e){var t=this;return e.filter(function(e){return t.canUseAsSlaveWidget(e.Type)&&t.isChildWidgetRequiredForInitialFilter(e)&&!t.checkParameterFieldBinded(e)})},e.prototype.isChildWidgetRequiredForInitialFilter=function(e){return!!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(e.getContainerSettings().CombineWidgetId)||this.dashboardDesigner.modules.containerTypeWidgetHelper.getContainerWidget(e).shouldallowChildWidgetForFilterInteraction()},e.prototype.checkParameterFieldBinded=function(e){return!BoldBIDashboard.isNullOrUndefined(e)&&!BoldBIDashboard.isNullOrUndefined(e.DataGroupInfo)&&0<e.DataGroupInfo.FieldContainers.length&&!BoldBIDashboard.isNullOrUndefined(e.DataGroupInfo.FieldContainers[0].FieldInfos)&&0<e.DataGroupInfo.FieldContainers[0].FieldInfos.length&&e.DataGroupInfo.FieldContainers[0].FieldInfos[0].IsParameterField},e.prototype.canUseAsSlaveWidget=function(e){return-1===this.nonSlaveFilterWidgets.indexOf(e.toLowerCase())},e.prototype.GetWidgetCollectionsFromContainer=function(){for(var e,t,i,o,a,s,n,r,l,d=this.widgetHelper.getAllWidgets(),h=this.getMastetFilterWidgets(d),p=this.getWidgetList(d),c=this.getWidgetList(d),u=[],g=[],b=0;b<h.length;b++)h[b].getJson().FilterSettings.ActAsMasterWidget&&u.push(h[b]),h[b].IsPoPWidget&&g.push(h[b]);for(e=new FilterConfigurationModel,t=0;t<u.length;t++){if(i=[],u[t].IsPoPWidget){for(r=0;r<e.MastersCollection.length;r++)if(e.MastersCollection[r].MasterInfo.IsPoP)for(o=e.MastersCollection[r].ProfileManager,a=0;a<o.length;a++)for(s=0;s<o[a].WidgetInfo.length;s++)i.indexOf(o[a].WidgetInfo[s].ID)<0&&i.push(o[a].WidgetInfo[s].ID);for(n=function(t){var e;-1<i.indexOf(c[t].ID)&&(e=p.filter(function(e){return e.ID===c[t].ID})[0],p.splice(p.indexOf(e),1))},r=0;r<c.length;r++)n(r)}l=this.generateMasterInformation(u[t],p),e.MastersCollection.push(l)}return e},e.prototype.getWidgetList=function(e){for(var t,e=e||this.widgetHelper.getAllWidgets(),i=this.getSlaveFilterWidgets(e),o=[],a=0;a<i.length;a++)"label"!==i[a].Type.toLowerCase()&&i[a].getJson().FilterSettings.IgnoreFilterActions||((t=new WidgetInfo).ID=i[a].Name,t.Name=i[a].getJson().ContainerSettings.Title,t.IsPoPSupported=i[a].IsPoPSupportedWidget,t.UniqueId=i[a].getJson().UniqueId,i[a].isDefaultDataWidget())||o.push(t);return o},e.prototype.generateMasterInformation=function(e,t){var i=new Widgetcollection,o=new ProfileInfo,a=new ProfileManager;return BoldBIDashboard.isNullOrUndefined(e)||(o.FilterCondition=this.getFilterCondition(e),o.Name=e.getJson().ContainerSettings.Title+"(generated)",o.Option=!1,t=this.getSlaveWidgetList(t,e),a.ProfileInfo=o,a.WidgetInfo=t,i.MasterInfo.ID=e.Name,i.MasterInfo.Name=e.getJson().ContainerSettings.Title,i.MasterInfo.IsPoP=e.IsPoPWidget,i.MasterInfo.UniqueId=e.getJson().UniqueId,i.ProfileManager.push(a)),i},e.prototype.getSlaveWidgetList=function(e,t){for(var i=this.bbdesigner$.extend(!0,[],e),o=[],a=0;a<i.length;a++)i[a].ID===t.Name||t.IsPoPWidget||o.push(i[a]);return this.slavesForMasterInCombineWidget(o,t.getJson().UniqueId)},e.prototype.slavesForMasterInCombineWidget=function(e,t){for(var i,o,a=this.bbdesigner$.extend(!0,[],e),s=this.widgetHelper.getAllWidgets().filter(function(e){return BoldBIDashboard.Dashboard.WidgetHelper.isContainerWidget(e)}),n=[],r=0;r<s.length;r++)if(i=this.dashboardDesigner.modules.containerTypeWidgetHelper.getWidgetAsContainerWidget(s[r]),n=n.concat(i.getChildWidgetList()),i.isMasterPresentInChild(t)){n=[],n=i.getChildWidgetList();break}if(-1!==n.indexOf(t)&&0<n.length)for(a=[],o=0;o<e.length;o++)for(r=0;r<n.length;r++){var l=n[r],d=e[o],h=d.UniqueId;if(!BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(h))if(-1!==n.indexOf(t)){if(l===h){a.push(d);break}}else a.push(d)}return a},e.prototype.getFilterCondition=function(e){var t,i,o,a,s,n,r,l=[];if(!BoldBIDashboard.isNullOrUndefined(e)&&!BoldBIDashboard.isNullOrUndefined(e.supportedColumnsForFiltering())){for(t=e.supportedColumnsForFiltering(),i=this.dashboardDesigner.modules.dataSet.datasets,o=[],a=0;a<i.length;a++)e.DataGroupInfo.DataSourceID!==i[a].Id&&o.push(i[a]);for(s=0;s<t.length;s++)(n=new FilterCondition).SourceColumn.ID=t[s].Id,n.SourceColumn.Name=t[s].Name,n.TargetColumn.ID=t[s].Id,n.TargetColumn.Name=t[s].Name,n.DataSource.ID=e.DataGroupInfo.DataSourceID,n.DataSource.Name=e.DataGroupInfo.DataSourceName,r=this.getFieldType(t[s].Name,t[s].DatasourceID,t[s].Id),l.push(n),this.GetMatchedFieldFromOtherDataSets(o,t[s],r,l)}return l},e.prototype.GetMatchedFieldFromOtherDataSets=function(e,t,i,o){for(var a,s,n,r=0;r<e.length;r++)for(a=e[r].Fields,s=0;s<a.length;s++)t.Name===a[s].DataField&&i.toLowerCase()===a[s].TypeName.toLowerCase()&&((n=new FilterCondition).SourceColumn.ID=t.Id,n.SourceColumn.Name=t.Name,n.TargetColumn.ID=a[s].Id,n.TargetColumn.Name=a[s].DataField,n.DataSource.ID=e[r].Id,n.DataSource.Name=e[r].Name,o.push(n))},e.prototype.getFieldType=function(e,t,i){for(var o,a,s,n,r=this.dashboardDesigner.modules.dataSet.datasets,l=0;l<r.length;l++)if(t===r[l].Id){if(o=r[l].Fields,a=null,!BoldBIDashboard.isNullOrUndefined(o[0].ChildFields)){for(n=0;n<o.length;n++)if(s=this.getCurrentFieldInfo(o[n],i),!BoldBIDashboard.isNullOrUndefined(s)){a=s.TypeName;break}return a}for(n=0;n<o.length;n++)if(e===o[n].DataField)return o[n].TypeName}return null},e.prototype.getCurrentFieldInfo=function(e,t){var i,o=null;if(e.Id===t)o=e;else if(!BoldBIDashboard.isNullOrUndefined(e.ChildFields))for(i=0;i<e.ChildFields.length&&(o=this.getCurrentFieldInfo(e.ChildFields[i],t),BoldBIDashboard.isNullOrUndefined(o));i++);return o},e.prototype.ActAsMasterPropertyChangeInFilterConfigInfo=function(e,t){var i,o=0<this.dashboardDesigner.designerPanel.selectedReportItems.length?this.getCurrentWidgetInstance():t;if(BoldBIDashboard.Dashboard.WidgetHelper.isDataWidget(o))if(t=this.getWidgetList(),null!=this.filterObject.FilterConfigurationModel){if(e)t=this.generateMasterInformation(o,t),this.filterObject.FilterConfigurationModel.MastersCollection.push(t);else{for(i=0;i<this.filterObject.FilterConfigurationModel.MastersCollection.length;i++)o.Name===this.filterObject.FilterConfigurationModel.MastersCollection[i].MasterInfo.ID&&this.filterObject.FilterConfigurationModel.MastersCollection.splice(i,1);e||o.clearFilter()}this.showOrHideClearFilterIcon(o.ControlContainer.find(".bbi-dbrd-control-header"),e),t=this.getFilterConfigurationModelCollectionValue(),this.masterSlaveFilterSerializer(t)}else e||null===o.ControlHeader||o.ControlHeader.parents(".bbi-dbrd-control-container").attr("controlType")!==BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(WidgetType,WidgetType.Filter)||o.clearFilter(),this.showOrHideClearFilterIcon(o.ControlContainer.find(".bbi-dbrd-control-header"),e)},e.prototype.getFilterConfigurationModelCollectionValue=function(){var t=[];return this.filterObject.FilterConfigurationModel.MastersCollection.forEach(function(e){t.push(e)}),this.filterObject.DatebucketConfigurationModel.MastersCollection.forEach(function(e){t.push(e)}),t},e.prototype.RefreshMasterSlaveTitle=function(){var e,t,i,o,a,s,n,r,l;if(null!==this.filterObject.FilterConfigurationModel)for(e=this.GetAllWidgetInstanceFromContainer(),t=this.filterObject.FilterConfigurationModel.MastersCollection,i=0;i<t.length;i++)for(o=t[i].MasterInfo.ID,a=0;a<e.length;a++)for(o===e[a].Name&&(this.filterObject.FilterConfigurationModel.MastersCollection[i].MasterInfo.Name=e[a].getJson().ContainerSettings.Title),s=t[i].ProfileManager,n=0;n<s.length;n++)for(r=s[n].WidgetInfo,l=0;l<r.length;l++)r[l].ID===e[a].Name&&(r[l].Name=e[a].getJson().ContainerSettings.Title)},e.prototype.IgnoreFilterActionPropertyChange=function(e,t){var i,c,o,a,s,n,r,l,d,u=BoldBIDashboard.isNullOrUndefined(t=void 0===t?null:t)?this.getCurrentWidgetInstance():t;if(null!=this.filterObject.FilterConfigurationModel){if(e){for(o=this.filterObject.FilterConfigurationModel.MastersCollection,a=0;a<o.length;a++)if(s=o[a].MasterInfo,u.Name!==s.ID)for(n=o[a].ProfileManager,r=0;r<n.length;r++)for(l=0;l<n[r].WidgetInfo.length;l++)d=n[r].WidgetInfo[l].ID,u.Name===d&&n[r].WidgetInfo.splice(l,1)}else for(i=function(e){var t,i,o,a,s,n,r,l,d,h,p=c.filterObject.FilterConfigurationModel.MastersCollection[e].MasterInfo;if(u.Name!==p.ID&&c.canUseAsSlaveWidget(u.Type))for((t=new WidgetInfo).ID=u.Name,t.Name=u.getJson().ContainerSettings.Title,t.IsPoPSupported=u.IsPoPSupportedWidget,t.UniqueId=u.getJson().UniqueId,i=0;i<c.filterObject.FilterConfigurationModel.MastersCollection[e].ProfileManager.length;i++){if(c.filterObject.FilterConfigurationModel.MastersCollection[e].MasterInfo.IsPoP&&t.IsPoPSupported)for(o=0;o<=i;o++)if((a=c.filterObject.FilterConfigurationModel.MastersCollection[o]).MasterInfo.IsPoP)for(s=0;s<a.ProfileManager.length;s++)for(n=a.ProfileManager[s].WidgetInfo,r=0;r<n.length;r++)n[r].ID,t.ID;c.filterObject.FilterConfigurationModel.MastersCollection[e].MasterInfo.IsPoP||(l=[],h=(d=c.filterObject.FilterConfigurationModel.MastersCollection[e]).ProfileManager[i],BoldBIDashboard.DashboardUtil.IsStringNullorWhiteSpace(d.MasterInfo.UniqueId)||(l.push(t),l=c.slavesForMasterInCombineWidget(l,d.MasterInfo.UniqueId)),0<l.length?0===h.WidgetInfo.filter(function(e){return e.Name===t.Name}).length&&h.WidgetInfo.push(t):0<h.WidgetInfo.filter(function(e){return e.Name===t.Name}).length&&-1!==(d=h.WidgetInfo.indexOf(h.WidgetInfo.filter(function(e){return e.Name===t.Name})[0]))&&h.WidgetInfo.splice(d,1))}},c=this,a=0;a<this.filterObject.FilterConfigurationModel.MastersCollection.length;a++)i(a);t=this.getFilterConfigurationModelCollectionValue(),this.masterSlaveFilterSerializer(t)}},e.prototype.GetAllWidgetInstanceFromContainer=function(){for(var e,t=[],i=BoldBIDashboard.Dashboard.WidgetHelper.getAllWidgetElements(this.dashboardDesigner._id,this.dashboardDesigner.modules.Mode.designCanvas,".bbi-dbrditem"),o=0;o<i.length;o++)e=BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(i[o])),t.push(e);return t},e.prototype.GetWidgetElementByReportName=function(e){for(var t,i=BoldBIDashboard.Dashboard.WidgetHelper.getAllWidgetElements(this.dashboardDesigner._id,this.dashboardDesigner.modules.Mode.designCanvas,".bbi-dbrditem"),o=0;o<i.length;o++)if(BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(i[o])).getJson().UniqueName===e){t=this.bbdesigner$(i[o]);break}return t},e.prototype.RemoveSelectedWidgetFromFilterObject=function(e,t){var i,e=BoldBIDashboard.isNullOrUndefined(e)?this.getCurrentWidgetInstance():e;BoldBIDashboard.isNullOrUndefined(this.filterObject.FilterConfigurationModel)||(i=this.filterObject.FilterConfigurationModel.MastersCollection,this.removeFromMasterList(i,e),this.removeFromSlaveList(i,e),i=this.filterObject.DatebucketConfigurationModel.MastersCollection,this.removeFromMasterList(i,e),this.removeFromSlaveList(i,e),i=this.getFilterConfigurationModelCollectionValue(),this.masterSlaveFilterSerializer(i),this.updatePoPSettings("Grid"===e.Type,t,e))},e.prototype.removeFromMasterList=function(e,t){for(var i,o=0;o<e.length;o++)if(i=e[o].MasterInfo,t.Name===i.ID){this.filterObject.FilterConfigurationModel.MastersCollection.splice(o,1);break}},e.prototype.removeFromSlaveList=function(e,t){for(var i,o,a,s,n,r=0;r<e.length;r++)if(i=e[r].MasterInfo,t.Name!==i.ID)for(o=e[r].ProfileManager,a=0;a<o.length;a++)for(s=0;s<o[a].WidgetInfo.length;s++)if(n=o[a].WidgetInfo[s].ID,t.Name===n){o[a].WidgetInfo.splice(s,1);break}},e.prototype.RefreshFilterSettings=function(){null==this.filterObject.FilterConfigurationModel&&this.filterObject.setFilterConfiguration(this.GetWidgetCollectionsFromContainer()),null==this.filterObject.DatebucketConfigurationModel&&this.filterObject.setDatebucketConfigurationModel(new FilterConfigurationModel);var e=this.getFilterConfigurationModelCollectionValue();this.masterSlaveFilterSerializer(e)},e.prototype.MasterSlaveFilterDeSerializer=function(e){var t,i,o,a,s,n,r,l,d,h,p,c,u;if(!BoldBIDashboard.isNullOrUndefined(e)&&!BoldBIDashboard.isNullOrUndefined(e.MasterFilterInfo)){for(var g=e.MasterFilterInfo.MasterSlaveFilterActions,b=new FilterConfigurationModel,m=new FilterConfigurationModel,f=0;f<g.length;f++){for(t=new Widgetcollection,i=new MasterInfo,u=0;u<e.Widgets.length;u++)e.Widgets[u].UniqueName===g[f].MasterControlName&&(i.Name=e.Widgets[u].ContainerSettings.Title,i.UniqueId=e.Widgets[u].UniqueId);for(i.ID=g[f].MasterControlName,i.IsPoP=g[f].IsPoPWidget,i.IsDatebucket=g[f].IsDatebucketWidget,o=g[f].FilterActions,a=0;a<o.length;a++){for(s=new ProfileInfo,n=new ProfileManager,s.Option=o[a].IsFilterCasesCustomized,s.Name=o[a].FilterActionName,r=o[a].FilterCases,l=0;l<r.length;l++)(d=new FilterCondition).SourceColumn.Name=r[l].SourceColumn.Caption,d.SourceColumn.ID=r[l].SourceColumn.UniqueColumn,d.TargetColumn.Name=r[l].TargetColumn.Caption,d.TargetColumn.ID=r[l].TargetColumn.UniqueColumn,d.DataSource.Name=r[l].TargetDataSourceName,d.DataSource.ID=r[l].TargetDataSource,s.FilterCondition.push(d);for(h=o[a].Slaves,p=0;p<h.length;p++){for(c=new WidgetInfo,u=0;u<e.Widgets.length;u++)e.Widgets[u].UniqueName===h[p]&&(c.Name=e.Widgets[u].ContainerSettings.Title,c.UniqueId=e.Widgets[u].UniqueId);c.ID=h[p],c.IsPoPSupported=g[f].IsPoPWidget,n.WidgetInfo.push(c)}n.ProfileInfo=s,t.ProfileManager.push(n)}t.MasterInfo=i,(g[f].IsDatebucketWidget?m:b).MastersCollection.push(t)}return{filterConfigurationModel:b,datebucketConfigurationModel:m}}},e.prototype.masterSlaveFilterSerializer=function(e,t){var i,o,a,s,n,r,l,d;if(void 0===t&&(t=!0),this.dashboardDesigner.model.mode!==BoldBIDashboard.Designer.mode.view&&this.dashboardDesigner.model.mode!==BoldBIDashboard.Designer.mode.designpreview){if(i=new Settings,!BoldBIDashboard.isNullOrUndefined(e)){for(o=0;o<e.length;o++){for((a=new MasterSlaveFilterAction).MasterControlName=e[o].MasterInfo.ID,a.IsPoPWidget=e[o].MasterInfo.IsPoP,a.IsDatebucketWidget=e[o].MasterInfo.IsDatebucket,s=0;s<e[o].ProfileManager.length;s++){for((n=new FilterAction).FilterActionName=e[o].ProfileManager[s].ProfileInfo.Name,n.IsFilterCasesCustomized=e[o].ProfileManager[s].ProfileInfo.Option,r=0;r<e[o].ProfileManager[s].WidgetInfo.length;r++)e[o].MasterInfo.IsPoP&&!e[o].ProfileManager[s].WidgetInfo[r].IsPoPSupported||n.Slaves.push(e[o].ProfileManager[s].WidgetInfo[r].ID);for(l=0;l<e[o].ProfileManager[s].ProfileInfo.FilterCondition.length;l++)(d=new FilterShell).SourceColumn.Caption=e[o].ProfileManager[s].ProfileInfo.FilterCondition[l].SourceColumn.Name,d.TargetColumn.Caption=e[o].ProfileManager[s].ProfileInfo.FilterCondition[l].TargetColumn.Name,d.SourceColumn.UniqueColumn=e[o].ProfileManager[s].ProfileInfo.FilterCondition[l].SourceColumn.ID,d.TargetColumn.UniqueColumn=e[o].ProfileManager[s].ProfileInfo.FilterCondition[l].TargetColumn.ID,d.TargetDataSource=e[o].ProfileManager[s].ProfileInfo.FilterCondition[l].DataSource.ID,d.TargetDataSourceName=e[o].ProfileManager[s].ProfileInfo.FilterCondition[l].DataSource.Name,n.FilterCases.push(d);a.FilterActions.push(n)}i.MasterSlaveFilterActions.push(a)}null!==i&&t&&this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.notifypropertychange,{action:BoldBIDashboard.DashboardUtil.DesignerAction.NotifyPropertyChange,data:JSON.stringify({FilterConfigurationJson:i})},{fnction:this.bbdesigner$.proxy(function(e){e.Status||console.info(e.Message)},this)})}return i}},e.prototype.updatePoPSettings=function(e,t,i){var o,a,s,n,r,l,d=[],h=this.filterObject.filterConfigurationModel.MastersCollection;if(!BoldBIDashboard.isNullOrUndefined(h)&&0<h.length)for(o=0;o<h.length;o++)if(h[o].MasterInfo.IsPoP){for(a=0;a<h[o].ProfileManager.length;a++)for(s=h[o].ProfileManager[a].WidgetInfo,n=0;n<s.length;n++)d.push(s[n].ID);BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.GetWidgetElementByReportName(h[o].MasterInfo.ID)).updatePoPSettings(!1,e)}if(t&&i.IsPoPWidget||!t)for(r=this.getWidgetList(),l=0;l<r.length;l++)r[l].IsPoPSupported&&BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(this.GetWidgetElementByReportName(r[l].ID)).updatePoPSettings(-1<d.indexOf(r[l].ID),e);else i.IsPoPSupportedWidget&&i.updatePoPSettings(-1<d.indexOf(i.Name),e)},e.prototype.updateInitialFiltersForFilterControls=function(e,t,i,o){var a=new SelectedFilterValue,s=new InitialDimensionFilter,n=new InitialMeasureFilter,r=new InitialDateFilter;switch(a.UniqueColumnName=e.UniqueColumnName,a.FieldId=e.Id,a.ColumnName=e.Name,a.ReportName=t,a.IsStdDateTime=o.IsStdDateTime,a.IsMultiSelection=o.IsMultiSelection,a.IsGroupBarFilter=o.IsGroupBarFilter,a.IsRange=o.IsRange,a.IsDefaultDate=o.IsDefaultDate,a.IsParameterField=e.IsParameterField,i){case"bbi-designer-dataset-string":case"bbi-designer-dataset-boolean":s.DimesnionFilterCondition=o.Action,s.Text=o.FilterInfo;break;case"bbi-designer-dataset-number":n.MeasureFilterCondition=o.Action,n.Values=o.FilterInfo;break;case"bbi-designer-dataset-datetime":case"bbi-designer-dataset-time":r.DateFilterCondition=o.Action,r.DisplayDateFilterList=o.FilterInfo.DisplayFilterList,r.DateFilterList=o.FilterInfo.DateFilterList,r.DateFilterType=(BoldBIDashboard.isNullOrUndefined(o.FilterInfo.DateFilterType)?r:o.FilterInfo).DateFilterType,r.DateFormat=o.FilterInfo.DateFormat,r.SelectedRangeforRelativeFilter=BoldBIDashboard.isNullOrUndefined(o.FilterInfo.SelectedRangeforRelativeFilter)?null:o.FilterInfo.SelectedRangeforRelativeFilter}return a.InitialDimensionFilter=s,a.InitialMeasureFilter=n,a.InitialDateFilter=r,!BoldBIDashboard.isNullOrUndefined(e.ParametersInWidgets)&&0<e.ParametersInWidgets.length&&(a.ParametersInWidget=[],a.ParametersInWidget=e.ParametersInWidgets),a},e.prototype.getAllWidgetSelectedValues=function(e){var t,i,o,a,s;for(void 0===e&&(e=0),t=[],i=this.GetAllWidgetInstanceFromContainer(),o=0;o<i.length;o++)if(a=i[o].getJson().SelectedFilterValues,!BoldBIDashboard.isNullOrUndefined(i[o].getJson().FilterSettings)&&i[o].getJson().FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(a)&&0<a.length)for(s=0;s<a.length;s++)t.push(a[s]);return t=this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view&&!this.isInteraction&&0<e?0<this.dashboardDesigner.getFilterDataUsingQuery().length?this.dashboardDesigner.getFilterDataUsingQuery():BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.rdlParser)||BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.rdlParser.rdlJsonObj)||BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.rdlParser.rdlJsonObj.WidgetData)?t:this.getAllWidgetSelectedValuesFromCollection(this.dashboardDesigner.rdlParser.rdlJsonObj.WidgetData):t},e.prototype.getAllWidgetSelectedValuesFromCollection=function(e){for(var t,i,o,a=[],s=0;s<e.length;s++)if(i=(t=e[s]).SelectedFilterValues,!BoldBIDashboard.isNullOrUndefined(t.FilterSettings)&&t.FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(i)&&0<i.length)for(o=0;o<i.length;o++)a.push(i[o]);return a},e.prototype.getDatebucketSelectedValues=function(e){for(var t,i,o,a=this.GetAllWidgetInstanceFromContainer(),s=0;s<a.length;s++)if(a[s].isDefaultDataWidget()&&(t=a[s].getJson().DatebucketFilterValues,!BoldBIDashboard.isNullOrUndefined(t))&&0<t.length){for(i=0;i<t.length;i++)e.push(t[i]);o=a[s].getJson().selectedValue.replace(/\s/g,""),o=DateTimeFormat[o],BoldBIDashboard.isNullOrUndefined(o)||o===DateTimeFormat.None||BoldBIDashboard.DashboardUtil.invokeMethod(a[s],"modifyColumnValue",[o])}return e},e.prototype.getConfiguredWidgetsOfDatebucket=function(e,t){var i,o,a,s,n=this.filterObject.DatebucketConfigurationModel.MastersCollection;if(!BoldBIDashboard.isNullOrUndefined(n)&&0<n.length)for(i=0;i<n.length;i++)if(n[i].MasterInfo.ID===e){for(o=0;o<n[i].ProfileManager.length;o++)for(a=n[i].ProfileManager[o].WidgetInfo,s=0;s<a.length;s++)-1===t.indexOf(a[s].ID)&&this.isWidgetConfigured(a[s].ID)&&t.push(a[s].ID);break}return t},e.prototype.getSelectedValuesForWidgetRequest=function(e){return void 0===e&&(e=0),this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view||this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.designpreview?this.getAllWidgetSelectedValues(e):[]},e.prototype.GetSlaveListOfMasterWidget=function(e){var t,i,o,a,s=[],n=this.filterObject.FilterConfigurationModel.MastersCollection;if(!BoldBIDashboard.isNullOrUndefined(n)&&0<n.length)for(t=0;t<n.length;t++)if(n[t].MasterInfo.ID===e){for(i=0;i<n[t].ProfileManager.length;i++)for(o=n[t].ProfileManager[i].WidgetInfo,a=0;a<o.length;a++)-1===s.indexOf(o[a].ID)&&this.isWidgetConfigured(o[a].ID)&&s.push(o[a].ID);break}return s},e.prototype.GetAllMasterWidgetList=function(){var e,t=[],i=this.filterObject.FilterConfigurationModel.MastersCollection;if(!BoldBIDashboard.isNullOrUndefined(i)&&0<i.length)for(e=0;e<i.length;e++)t.push(i[e].MasterInfo.ID);return t},e.prototype.GetMasterWidgetlistOfSlaveWidget=function(e){var t,i,o,a,s=[],n=this.filterObject.FilterConfigurationModel.MastersCollection;if(!BoldBIDashboard.isNullOrUndefined(n)&&0<n.length)for(t=0;t<n.length;t++)for(i=0;i<n[t].ProfileManager.length;i++)for(o=n[t].ProfileManager[i].WidgetInfo,a=0;a<o.length;a++)-1===s.indexOf(o[a].ID)&&this.isWidgetConfigured(o[a].ID)&&o[a].ID===e&&s.push(n[t].MasterInfo.ID);return s},e.prototype.isWidgetConfigured=function(e){return"none"===this.dashboardDesigner.designerPanel.designPanel.find("div[data-name="+e+"] .bbi-widget-not-configured-text").css("display")},e.prototype.doInteraction=function(e,t){this.RefreshFilterSettings(),this.isInteraction=!0;var i,o,a=this.dashboardDesigner.modules.dataConfiguration,s=this.dashboardDesigner.designerPanel,n={selectedInfo:this.getAllWidgetSelectedValues()},r=this.GetSlaveListOfMasterWidget(e);if(this.dashboardDesigner.setFilterData([]),0<r.length&&(this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.view||this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.designpreview)&&!this.dashboardDesigner.clearAllFilterClicked&&(this.isInteractionCompleted=!1,i=this.dashboardDesigner.modules.dynamicParameterPanel.getAllFilterWidgetParameterSelectedValues(null,""),!BoldBIDashboard.isNullOrUndefined(i)&&0<i.length?a.fetchDataForWidgets(r,!1,n.selectedInfo,!1,i,null,!1,e,!1,a.datasourceCallerId,t):a.fetchDataForWidgets(r,!1,n.selectedInfo,!1,null,null,!1,e,!1,a.datasourceCallerId,t)),this.dashboardDesigner.model.mode!==BoldBIDashboard.Designer.mode.design&&0===r.length&&this.dashboardDesigner.modules.labelParameter.getDataForLabelParameter(n.selectedInfo,this.dashboardDesigner._id,!0,e,null,!1,!0),0<n.selectedInfo.length&&this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.designpreview)this.dashboardDesigner.addToRevertInteractionList(r),this.dashboardDesigner.addToRevertInteractionList([e]);else if(0===n.selectedInfo.length&&this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.design)for(this.dashboardDesigner.removeFromRevertInteractionList(e),o=0;o<r.length;o++)this.dashboardDesigner.addToWidgetCacheCollection(r[o],null,!1);s.banner.toggleFilterOverview(0<n.selectedInfo.length),s.initialFilterIfModified(0<n.selectedInfo.length),s.isClearFilterInitiated(!1),this.dashboardDesigner.element.find(".bbi-dbrd-clearAllFilters").removeAttr("disabled"),this.dashboardDesigner.model.filterOverviewSettings.showSaveIcon&&(this.dashboardDesigner.filterOverviewObj.isModified=!0),BoldBIDashboard.isNullOrUndefined(this.dashboardDesigner.model.filterOverviewSettings.viewId)||""===this.dashboardDesigner.model.filterOverviewSettings.viewId.trim()||this.updateSavedViewChangeStatus(n),this.dashboardDesigner.savedFilterDetails=this.dashboardDesigner.renderScheduleInViewMode()},e.prototype.updateSavedViewChangeStatus=function(e){if(this.dashboardDesigner.initialFilterData.length===e.selectedInfo.length){this.dashboardDesigner.designerPanel.banner.hideViewFilterChangeIndicator();for(var t=0;t<e.selectedInfo.length;t++){if(this.dashboardDesigner.initialFilterData[t].ReportName!==e.selectedInfo[t].ReportName){this.dashboardDesigner.designerPanel.banner.showViewFilterChangeIndicator();break}if(this.validateCurrentFilterWithInitFilter(this.dashboardDesigner.initialFilterData[t].InitialDimensionFilter.Text,e.selectedInfo[t].InitialDimensionFilter.Text)||this.validateCurrentFilterWithInitFilter(this.dashboardDesigner.initialFilterData[t].InitialMeasureFilter.Values,e.selectedInfo[t].InitialMeasureFilter.Values)||this.validateCurrentFilterWithInitFilter(this.dashboardDesigner.initialFilterData[t].InitialDateFilter.DateFilterList,e.selectedInfo[t].InitialDateFilter.DateFilterList)){this.dashboardDesigner.designerPanel.banner.showViewFilterChangeIndicator();break}}}else this.dashboardDesigner.designerPanel.banner.showViewFilterChangeIndicator()},e.prototype.validateCurrentFilterWithInitFilter=function(e,t){var i,o=e.length,a=t.length;if(0<o&&0<a&&a!==o)return!0;if(o===a)for(i=0;i<o;i++)if(e[i]!==t[i])return!0;return!1},e.prototype.getDateFilterList=function(e,t){for(var i,o=t?this.dashboardDesigner.model.localeSettings.dateFormat+" "+this.dashboardDesigner.model.localeSettings.timeFormat:this.dashboardDesigner.model.localeSettings.dateFormat,a=[],s=0;s<e.length;s++)i=BoldBIDashboard.parseDate(e[s],o),i=BoldBIDashboard.format(i,o),BoldBIDashboard.isNullOrUndefined(i)?a.push(e[s]):a.push(i);return a},e.prototype.showOrHideClearFilterIcon=function(e,t){null!==e&&(t?(BoldBIDashboard.Dashboard.WidgetContainerHelper.applyIconVisibility(e.find(".bbi-remove-control-filter"),"block"),e.find(".bbi-dbrd-controlIcon-container").outerWidth(!0)):BoldBIDashboard.Dashboard.WidgetContainerHelper.applyIconVisibility(e.find(".bbi-remove-control-filter"),"none"),e.find(".bbi-dbrd-control-title-wrapper").css({width:"calc(100%)"}))},e.prototype.isValidDataGroupInfo=function(e,t){return e.FilterSettings.ActAsMasterWidget&&!BoldBIDashboard.isNullOrUndefined(t.Values)&&!BoldBIDashboard.isNullOrUndefined(t.Values[0])&&!BoldBIDashboard.isNullOrUndefined(t.Values[0].Values)&&0<t.Values[0].Values.length},e.prototype.configureSelectedFilterInfo=function(e,t,i){var o,a=this;if(!BoldBIDashboard.isNullOrUndefined(e)&&!BoldBIDashboard.isNullOrUndefined(i))for(o=0;o<t.length;o++){var s=t[o],n=[],r="bbi-designer-dataset-string"===s.FieldActualType||"bbi-designer-dataset-boolean"===s.FieldActualType||"bbi-designer-dataset-number"===s.FieldActualType,l="bbi-designer-dataset-datetime"===s.FieldActualType||"bbi-designer-dataset-time"===s.FieldActualType,d=r?"bbi-designer-dataset-string":s.FieldActualType,h=r?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Include):l?BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include):BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains),h=BoldBIDashboard.isNullOrUndefined(i.action)?h:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,i.action),p=s.UniqueColumnName;null==s.FilterInfo||null==s.FilterInfo.CustomDateSettingsInfo||BoldBIDashboard.isNullOrUndefined(i[p+"_CustomFormat"])||(p+="_CustomFormat"),p=Array.isArray(i[p])?i[p]:[i[p]],r?(h=0<(n=p).length?h:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains),n=n.filter(function(e){return"string"==typeof e?-1===e.indexOf(a.allSpecialChar):e})):l&&(r=p,l=s.DateTimeFormat===BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.Default)?this.getDateFilterList(r,!0):r,n={DateFormat:BoldBIDashboard.isNullOrUndefined(s.DateBucketInfo)||BoldBIDashboard.isNullOrUndefined(s.DateBucketInfo.DateBucketFormat)?s.DateTimeFormat:s.DateBucketInfo.DateBucketFormat,DisplayFilterList:r,DateFilterList:l},h=0<r.length?h:BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include)),(0<n.length||!BoldBIDashboard.isNullOrUndefined(n.DateFilterList))&&(l=!BoldBIDashboard.isNullOrUndefined(i.IsGroupBarFilter)&&i.IsGroupBarFilter,r=!BoldBIDashboard.isNullOrUndefined(i.IsMultiSelection)&&i.IsMultiSelection,n={FilterInfo:n,Action:h,IsStdDateTime:!1,IsMultiSelection:l&&1<p.length||r,IsGroupBarFilter:l},e.SelectedFilterValues.push(this.updateInitialFiltersForFilterControls(s,e.UniqueName,d,n)))}},e.prototype.getCurrentWidgetInstance=function(){var e=this.dashboardDesigner.designerPanel.selectedReportItems[0];return BoldBIDashboard.Dashboard.WidgetHelper.getWidgetInstance(e)},e}(),BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.MasterSlaveFilterConfiguration",InternalMasterSlaveFilterSerializationHelper,window),InternalLabelParameter=function(){function e(e){this.dashboardDesigner=null,this.masterSlaveConfiguration=null,this.labelParameterVaues={},this.labelWidgetsData=[],this.jsonRequest=[],this.parentFieldKey="parentField",this.childColumnNameKey="childColumnName",this.labelCounter=0,this.dashboardDesigner=e,this.bbdesigner$=this.dashboardDesigner.bbdesigner$,this.masterSlaveConfiguration=this.dashboardDesigner.modules.masterSlaveFilter,this.widgetHelper=this.dashboardDesigner.modules.widgetHelper}return e.prototype.getResultantParameterString=function(e,t,i){void 0===i&&(i=!1);t=this.GetValidParameterCollection(e,t);return this.getParameterizedText(t.matchedTexts,e,t.dataId,i)},e.prototype.isLabelParameterPresent=function(e,t){return 0<this.GetValidParameterCollection(e,t).matchedTexts.length},e.prototype.getParameterRegex=function(){return RegExp("^@{{:CURRENTUSER.FULLNAME}}|^@{{:CURRENTUSER.EMAIL}}|^@{{:CURRENTUSER.TOKEN}}|^@{{:CURRENT.SITEURL}}|^@{{:CURRENT.SITEIDENTIFIER}}|^@{{:CURRENTUSER.TENANTURL}}|^@{{:CURRENTUSER.SITEIDENTIFIER}}^@{{:CURRENT.BROWSERCULTURE}}","g")},e.prototype.hasDynamicParameter=function(e){return this.getParameterRegex().test(e)},e.prototype.GetValidParameterCollection=function(e,s){var n,r,l,d,h,p,t,c,i,u=this,g=[],o=RegExp("{{:(.*?)}}","g"),b=RegExp("^DistinctCount([(.*?)])|^DCount([(.*?)])|^Minimum([(.*?)])|^Maximum([(.*?)])|^Average([(.*?)])|^StandardDeviation([(.*?)])|^Variance([(.*?)])|^WeightedAvg([(.*?)])|^WeightedAverage([(.*?)])|^StDev([(.*?)])|^Var([(.*?)])|^Sum([(.*?)])|^Avg([(.*?)])|^Count([(.*?)])|^Year([(.*?)])|^Month([(.*?)])|^MonthYear([(.*?)])|^MonthName([(.*?)])|^DayMonthYear([(.*?)])|^MonthDayYear([(.*?)])|^QuarterYear([(.*?)])|^Quarter([(.*?)])|^DateHour([(.*?)])|^DayOfWeek([(.*?)])|^DayOfYear([(.*?)])|^Hours([(.*?)])|^Minutes([(.*?)])|^Seconds([(.*?)])|^WeekOfMonth([(.*?)])|^WeekOfYear([(.*?)])|^Day([(.*?)])|^Max([(.*?)])|^Min([(.*?)])|^WeekYear([(.*?)])|^Time([(.*?)])|^DateTime([(.*?)])|^Date([(.*?)])|^TimeSpan([(.*?)])|^TimeSpanHours([(.*?)])|^TimeSpanMinutes([(.*?)])|^TimeSpanDays([(.*?)])|^TimeSpanWeeks([(.*?)])|^TimeSpanMonths([(.*?)])|^TimeSpanYears([(.*?)])|^TimeSpanInMinutes([(.*?)])|^TimeSpanInHours([(.*?)])","ig"),m=!1,f=!1;if(this.hasDynamicParameter(e)&&(g=e.match(this.getParameterRegex())),o.test(e))for(p=e.match(o),this.summaryType=SummaryType.SUM,this.dateformat=DateTimeFormat.None,t=function(i){var o,e,t,a;for(d=p[i].substring(3,p[i].length-2),e=c.getChildColumnName(d),BoldBIDashboard.isNullOrUndefined(e)||(r=e[c.parentFieldKey],l=e[c.childColumnNameKey]),o=c.dashboardDesigner.modules.dataSet.datasets,b.test(d)?(e=(e=d.match(b))[0].substring(0,e[0].length-1),!BoldBIDashboard.isNullOrUndefined(e)&&0<e.length&&(c.summaryType=c.getValidSummaryType(e.toLowerCase()),m=null!==c.summaryType&&"None"!==c.summaryType||(c.dateformat=DateTimeFormat[c.getValidDateFormat(e.toLowerCase())],!1),d=d.replace(e,""),n=d.substring(1,d.length-1),f=!0)):(n=d,f=!1),BoldBIDashboard.isNullOrUndefined(s)&&(s=c.getDefaultDatasourceID(n)),t=function(e){var t=n;-1!==t.indexOf(o[e].Name)?(h=s!==o[e].Id?o[e].Id:s,t=t.replace(o[e].Name+".","")):h=s,o[e].Id===h&&(BoldBIDashboard.isNullOrUndefined(r)?o[e].Fields.forEach(function(e){e=u.getCurrentFieldInfo(e,t,f,m);BoldBIDashboard.isNullOrUndefined(e)||g.push(p[i])}):(e=c.getHierarchicalField(o[e].Fields,r,l),BoldBIDashboard.isNullOrUndefined(e)||(e=c.getCurrentFieldInfo(e,l,f,m),BoldBIDashboard.isNullOrUndefined(e))||g.push(p[i])))},a=0;a<o.length;a++)t(a)},c=this,i=0;i<p.length;i++)t(i);return{matchedTexts:g,dataId:BoldBIDashboard.isNullOrUndefined(h)?null:h}},e.prototype.getCurrentFieldInfo=function(e,t,i,o){var a,s=null;if(!BoldBIDashboard.isNullOrUndefined(e))if(e.Name.trim().toLowerCase()===t.trim().toLowerCase()&&(BoldBIDashboard.isNullOrUndefined(e.ChildFields)||!BoldBIDashboard.isNullOrUndefined(e.ChildFields)&&0===e.ChildFields.length))i&&(!o||"Date"===e.TypeName||"String"===e.TypeName||"Datetime"===e.TypeName)&&(o||0!==this.dateformat&&"None"!==this.dateformat)&&(!i||"COUNT"!==this.summaryType&&"COUNTD"!==this.summaryType)&&(o||0===this.dateformat&&"None"===this.dateformat||"Date"!==e.TypeName)||(s=e);else if(!BoldBIDashboard.isNullOrUndefined(e.ChildFields))for(a=0;a<e.ChildFields.length&&(s=this.getCurrentFieldInfo(e.ChildFields[a],t,i,o),BoldBIDashboard.isNullOrUndefined(s));a++);return s},e.prototype.getDefaultDatasourceID=function(e){var t,i,o,a,s,n,r=this.dashboardDesigner.modules.dataSet.datasets,l=this.getChildColumnName(e);for(BoldBIDashboard.isNullOrUndefined(l)||(t=l[this.parentFieldKey],i=l[this.childColumnNameKey]),o=0;o<r.length;o++){if(1<e.split(".").length&&e.split(".")[0]===r[o].Name)return r[o].Id;if(BoldBIDashboard.isNullOrUndefined(t)){for(s=0;s<r[o].Fields.length;s++)if(n=this.getCurrentFieldInfo(r[o].Fields[s],e,!1,!1),!BoldBIDashboard.isNullOrUndefined(n))return r[o].Id}else if(a=this.getHierarchicalField(r[o].Fields,t,i),!BoldBIDashboard.isNullOrUndefined(a)&&(n=this.getCurrentFieldInfo(a,i,!1,!1),!BoldBIDashboard.isNullOrUndefined(n)))return r[o].Id}},e.prototype.getParameterizedText=function(e,t,o,a){var s=this,n=t,r="";return e.forEach(function(e){var t,i=o;1<e.split(".").length&&(i=s.getDataSourceID(e)),0!==(t=n.split(e)).length&&(""!==t[0]&&(r+=a?t[0]:"<span class= 'e-title-text e-title-value' style= 'float: left ' >"+BoldBIDashboard.DashboardUtil.encodeText(t[0])+"</span>"),t.splice(0,1)),r+=a?"<span class= 'bbi-dbrd-label-parameter-text e-title-text' data-param='"+e+"' data-source='"+i+"' >"+e+"</span><span class= 'bbi-dbrd-label-parameter-value e-title-value'></span>":"<span class= 'bbi-dbrd-label-parameter-text e-title-text' data-param='"+e+"' data-source='"+i+"' style= 'font-weight: bold; float: left ' >"+e+"</span><span class= 'bbi-dbrd-label-parameter-value e-title-value' style= 'font-weight: bold; ' ></span>",n=t.join(" "+e+" ")}),""!==n&&"."!==n&&":"!==n&&(r+=a?n:"<span class= 'e-title-text e-title-value' >"+BoldBIDashboard.DashboardUtil.encodeText(n)+"</span>"),r},e.prototype.getDataSourceID=function(e){var t=RegExp("^DistinctCount([(.*?)])|^DCount([(.*?)])|^Minimum([(.*?)])|^Maximum([(.*?)])|^Average([(.*?)])|^StandardDeviation([(.*?)])|^Variance([(.*?)])|^WeightedAvg([(.*?)])|^WeightedAverage([(.*?)])|^StDev([(.*?)])|^Var([(.*?)])|^Sum([(.*?)])|^Avg([(.*?)])|^Count([(.*?)])|^Year([(.*?)])|^MonthYear([(.*?)])|^MonthName([(.*?)])|^DayMonthYear([(.*?)])|^MonthDayYear([(.*?)])|^QuarterYear([(.*?)])|^Quarter([(.*?)])|^DateHour([(.*?)])|^DayOfWeek([(.*?)])|^DayOfYear([(.*?)])|^Hours([(.*?)])|^Minutes([(.*?)])|^Seconds([(.*?)])|^WeekOfMonth([(.*?)])|^WeekOfYear([(.*?)])|^Day([(.*?)])|^Max([(.*?)])|^Min([(.*?)])|^WeekYear([(.*?)])|^Time([(.*?)])|^DateTime([(.*?)])|^Date([(.*?)])|^TimeSpan([(.*?)])|^TimeSpanHours([(.*?)])|^TimeSpanMinutes([(.*?)])|^TimeSpanDays([(.*?)])|^TimeSpanWeeks([(.*?)])|^TimeSpanMonths([(.*?)])|^TimeSpanYears([(.*?)])|^TimeSpanInMinutes([(.*?)])|^TimeSpanInHours([(.*?)])","ig"),i="",e=e.substring(3,e.length-2);return t.test(e)?(t=(t=e.match(t))[0].substring(0,t[0].length-1),!BoldBIDashboard.isNullOrUndefined(t)&&0<t.length&&(i=(e=e.replace(t,"")).substring(1,e.length-1))):i=e,this.getDefaultDatasourceID(i)},e.prototype.getInnerText=function(e){return BoldBIDashboard.isNullOrUndefined(e)?null:this.hasDynamicParameter(e)?e.substring(4,e.length-2):e.substring(3,e.length-2)},e.prototype.createParameterColumnCollection=function(e,t,i){for(var o,a,s,n,r,l,d,h,p,c,u,g,b=RegExp("^DistinctCount([(.*?)])|^DCount([(.*?)])|^Minimum([(.*?)])|^Maximum([(.*?)])|^Average([(.*?)])|^StandardDeviation([(.*?)])|^Variance([(.*?)])|^WeightedAvg([(.*?)])|^WeightedAverage([(.*?)])|^StDev([(.*?)])|^Var([(.*?)])|^Sum([(.*?)])|^Avg([(.*?)])|^Count([(.*?)])|^Year([(.*?)])|^Month([(.*?)])|^MonthYear([(.*?)])|^MonthName([(.*?)])|^DayMonthYear([(.*?)])|^MonthDayYear([(.*?)])|^QuarterYear([(.*?)])|^Quarter([(.*?)])|^DateHour([(.*?)])|^DayOfWeek([(.*?)])|^DayOfYear([(.*?)])|^Hours([(.*?)])|^Minutes([(.*?)])|^Seconds([(.*?)])|^WeekOfMonth([(.*?)])|^WeekOfYear([(.*?)])|^Day([(.*?)])|^Max([(.*?)])|^Min([(.*?)])|^WeekYear([(.*?)])|^Time([(.*?)])|^DateTime([(.*?)])|^Date([(.*?)])|^TimeSpan([(.*?)])|^TimeSpanHours([(.*?)])|^TimeSpanMinutes([(.*?)])|^TimeSpanDays([(.*?)])|^TimeSpanWeeks([(.*?)])|^TimeSpanMonths([(.*?)])|^TimeSpanYears([(.*?)])|^TimeSpanInMinutes([(.*?)])|^TimeSpanInHours([(.*?)])","ig"),m=!1,f=!1,D=[],x=0;x<i.length;x++)if(l=!0,l=1===this.bbdesigner$(i[x]).parents(".bbi-dbrd-control-container.e-label-item").length?this.isUpdateLabelParaForLabelWidget(this.bbdesigner$(i[x]),t):l){for(m=!1,l=SummaryType.SUM,d=BoldBIDashboard.DateAndTimeFormat.None,h=this.bbdesigner$(i[x]).attr("data-param"),c=this.bbdesigner$(i[x]).attr("data-source"),g=this.generateIdForLabelParameterElement(i[x]),this.bbdesigner$(i[x]).attr("data-labelparameterid",g),u=this.getInnerText(h),b.test(u)?(o=(o=u.match(b))[0].substring(0,o[0].length-1),!BoldBIDashboard.isNullOrUndefined(o)&&0<o.length&&(m=null!==(l=this.getValidSummaryType(o.toLowerCase()))&&"None"!==l||(d=DateTimeFormat[this.getValidDateFormat(o.toLowerCase())],!1),p=(u=u.replace(o,"")).substring(1,u.length-1),f=!0)):(p=u,f=!1),o=this.validateColumn(p,m,l,d,f,c),a=!1,s=0;s<D.length;s++)for(n=0;n<D[s].ColumnList.length;n++)g===D[s].ColumnList[n].Id&&(a=!0);BoldBIDashboard.isNullOrUndefined(o)||!o.isValid||a||(u=this.checkIfKeyPresent(o.datasourceId,D),c=o.field,r=new ParameterColumnItem,null!==c&&0!==c.length&&(r.MatchText=h,r.ColumnName=c.Name,r.ColumnType=this.getColumnType(c.TypeName),r.SummaryType=l,r.DateFormat=d,r.Id=g,null==u?((h=[]).push(r),(c=new ParameterColumn).DataSourceId=o.datasourceId,c.ColumnList=h,D.push(c)):u.ColumnList.push(r)))}return D},e.prototype.generateIdForLabelParameterElement=function(e){var t=this.bbdesigner$(e).attr("data-param");return this.hasDynamicParameter(t)?t.substring(4,t.length-2):(t=t.substring(3,t.length-2),this.bbdesigner$(e).attr("data-source")+"_"+t)},e.prototype.validateColumn=function(e,t,i,o,a,s){var n,r,l,d=this.dashboardDesigner.modules.dataSet.datasets,h=null;if(1<e.split(".").length)for(n=0;n<d.length;n++)e.split(".")[0]===d[n].Name&&(s=d[n].Id);for(r=BoldBIDashboard.isNullOrUndefined(s)?d:d.filter(function(e){return e.Id===s}),l=0;l<r.length&&!(h=this.getFieldInfo(r[l],e,t,i,o,a,s)).isValid;l++);return h},e.prototype.getFieldInfo=function(e,t,i,o,a,s,n){var r,l=null,d=!1,h=(1<t.split(".").length&&t.split(".")[0]===e.Name&&(t=t.replace(e.Name+".","")),null),p=null,c=this.getChildColumnName(t);if(BoldBIDashboard.isNullOrUndefined(c)||(h=c[this.parentFieldKey],p=c[this.childColumnNameKey]),BoldBIDashboard.isNullOrUndefined(h))for(r=0;r<e.Fields.length&&(l=this.getCurrentFieldInfo(e.Fields[r],t,!1,!1),BoldBIDashboard.isNullOrUndefined(l)||0===l.length);r++);else c=this.getHierarchicalField(e.Fields,h,p),BoldBIDashboard.isNullOrUndefined(c)||(l=this.getCurrentFieldInfo(c,p,!1,!1));return!BoldBIDashboard.isNullOrUndefined(l)&&0!==l.length&&(n=e.Id,i&&"Date"!==l.TypeName&&"String"!==l.TypeName&&"Datetime"!==l.TypeName||!(i||0!==a&&a!==DateTimeFormat.None)||s&&(o===SummaryType.COUNT||SummaryType.COUNTD)||!(i||0===a&&a===DateTimeFormat.None||"Date"!==l.TypeName))&&(d=!0),{field:l,datasourceId:n,isValid:d}},e.prototype.checkIfKeyPresent=function(e,t){for(var i=null,o=0;o<t.length;o++)if(t[o].DataSourceId===e){i=t[o];break}return i},e.prototype.getColumnType=function(e){return"String"===e||"Boolean"===e?FieldType.Dimensions:"Date"===e?FieldType.DateTime:FieldType.Measures},e.prototype.getLabelParamElements=function(){var e,t,i,o,a,s;for(0<this.dashboardDesigner.element.find(".e-dbrd-label-parameter-text").length&&this.dashboardDesigner.element.find(".e-dbrd-label-parameter-text").addClass("bbi-dbrd-label-parameter-text"),e=this.dashboardDesigner.element.find(".bbi-dbrd-label-parameter-text"),t=this.widgetHelper.getAllWidgets(),i=0;i<t.length;i++)if(t[i].ControlContainer.hasClass("e-rte-item"))for((a=BoldBIDashboard.buildTag("div","",{},{})).html(t[i].getValue()),o=a.find(".bbi-dbrd-label-parameter-text"),s=0;s<o.length;s++)e.push(o[s]);return e},e.prototype.labelParameterAction=function(e,t,i,o,a,s,n){var r;void 0===o&&(o=!1),void 0===s&&(s=!1),!BoldBIDashboard.isNullOrUndefined(e)&&0<e.length&&(r=this.getParamCollection(),this.labelParameterFetch=this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.getLabelParameterData,data:JSON.stringify({designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.getLabelParameterData,labelParameterCollection:e,dynamicParamCollection:t,hasDynamicParam:o,selectedValuesList:i,className:BoldBIDashboard.DashboardUtil.DesignerAction.FilterAction,paramCollection:BoldBIDashboard.isNullOrUndefined(r)?"":JSON.stringify(r),isParameterField:!BoldBIDashboard.isNullOrUndefined(a),selectedParameterValue:a,needToImportData:s,datasourceCallerId:n})},{fnction:this.bbdesigner$.proxy(this.bindLableParameterValues,this)}))},e.prototype.getDataForDynamicParam=function(e){for(var t,i,o={},a=0;a<e.length;a++)t=this.bbdesigner$(e[a]).attr("data-param"),i=this.getInnerText(t),!BoldBIDashboard.isNullOrUndefined(i)&&this.hasDynamicParameter(t)&&(o[i]=t);return o},e.prototype.getParamCollection=function(){var e=this.dashboardDesigner.modules.dynamicParameterPanel;return!BoldBIDashboard.isNullOrUndefined(e.currentValueCollection)&&0<e.currentValueCollection.length?e.currentValueCollection:null},e.prototype.getDataForLabelParameter=function(e,t,i,o,a,s,n,r){var l,d,h,p,c,u,g;if(void 0===i&&(i=!1),void 0===o&&(o=null),void 0===s&&(s=!1),void 0===n&&(n=!1),l=this.getLabelParamElements(t),!i)for(p=0;p<l.length;p++)this.bbdesigner$(l[p]).next().html("...");for(var b,m=this.createParameterColumnCollection(t,o,l),f=this.dashboardDesigner.modules.dataSet.datasets,D=[],x=[],s=[],i=this.getDataForDynamicParam(l),I=0;I<m.length;I++){for(d=[],h=[],p=0;p<m[I].ColumnList.length;p++){var B=m[I].ColumnList[p],C=void 0,y=void 0,S=BoldBIDashboard.isNullOrUndefined(B.MatchText.match(/(.*){:/))?B.MatchText:B.MatchText.substring(3,B.MatchText.length-2),S=this.getChildColumnName(S);for(BoldBIDashboard.isNullOrUndefined(S)||(C=S[this.parentFieldKey],y=S[this.childColumnNameKey]),c=0;c<f.length;c++)if(f[c].Id===m[I].DataSourceId)for(u=0;u<f[c].Fields.length;u++)if(BoldBIDashboard.isNullOrUndefined(C)){if(b=this.getCurrentFieldInfo(f[c].Fields[u],B.ColumnName,!1,!1),!BoldBIDashboard.isNullOrUndefined(b)&&0!==b.length)break}else if(g=this.getHierarchicalField(f[c].Fields,C,y),!BoldBIDashboard.isNullOrUndefined(g)&&(b=this.getCurrentFieldInfo(g,y,!1,!1),!BoldBIDashboard.isNullOrUndefined(b))&&0!==b.length)break;BoldBIDashboard.isNullOrUndefined(b)||(b.TypeName.toLocaleLowerCase()==="String".toLocaleLowerCase()||b.TypeName.toLocaleLowerCase()==="Date".toLocaleLowerCase()?h.push({Name:B.ColumnName,Id:b.Id,SummaryType:this.getDimensionSummaryType(B),FieldType:FieldType.Dimensions,DateTimeFormat:B.DateFormat,FilterInfo:null,UniqueColumnName:B.Id,IsVisible:!0}):d.push({Name:B.ColumnName,Id:b.Id,SummaryType:B.SummaryType,FieldType:FieldType.Measures,DateTimeFormat:B.DateFormat,FilterInfo:null,UniqueColumnName:B.Id,IsVisible:!0}))}0<d.length&&D.push({DataSetID:m[I].DataSourceId,FieldInfo:d}),0<h.length&&x.push({DataSetID:m[I].DataSourceId,FieldInfo:h})}(0<D.length||0<x.length)&&s.push({MeasureFieldInfo:D,DimensionFieldInfo:x}),0<s.length?(BoldBIDashboard.isNullOrUndefined(this.labelParameterFetch)||(4!==this.labelParameterFetch.readyState&&this.labelParameterFetch.abort(),this.labelParameterFetch=null),this.jsonRequest={labelParameterCollection:s,selectedValuesList:e},this.dashboardDesigner.modules.dynamicParameterPanel,this.labelParameterAction(s,i,e,!BoldBIDashboard.isNullOrUndefined(i),a,n,r)):this.labelParameterAction(null,i,null,!BoldBIDashboard.isNullOrUndefined(i),a,n,r)},e.prototype.getHierarchicalField=function(e,t,i){var o,a,s=t.split(".");if(s.push(i),BoldBIDashboard.isNullOrUndefined(s))return null;for(o=function(t){if(e=e.filter(function(e){return e.Name.trim().toLowerCase()===s[t].trim().toLowerCase()})[0],BoldBIDashboard.isNullOrUndefined(e)||BoldBIDashboard.isNullOrUndefined(e.ChildFields)||!(0<e.ChildFields.length))return"break";e=e.ChildFields},a=0;a<s.length&&"break"!==o(a);a++);return e},e.prototype.getChildColumnName=function(e){var t;return-1!==e.indexOf("].")?{parentField:(t=e.match(/\[.*?\]/)[0]).substring(1,t.length-1),childColumnName:e.match(/].(.*)/)[1]}:null},e.prototype.getDimensionSummaryType=function(e){return e.SummaryType.toString().toLocaleLowerCase()===SummaryType.SUM.toString().toLocaleLowerCase()||e.SummaryType.toString().toLocaleLowerCase()===SummaryType.NONE.toString().toLocaleLowerCase()?SummaryType.NONE:e.SummaryType},e.prototype.bindLableParameterValues=function(r){var l=this,d=this;this.labelParameterVaues.LabelParameterData=r,setTimeout(function(){var e,t,i,o,a,s,n;if(d.labelCounter++,d.masterSlaveConfiguration.isInteractionCompleted)try{if(t=(e=d.dashboardDesigner.modules.Mode.designCanvas).find(".bbi-dbrd-label-parameter-text"),0<r.length){for(i=0;i<t.length;i++)a=!(o=!0),1===l.bbdesigner$(t[i]).parents(".bbi-dbrd-control-container.e-label-item").length&&(o=l.isUpdateLabelParaForLabelWidget(l.bbdesigner$(t[i])),a=!0),s=l.bbdesigner$(t[i]).attr("data-labelparameterid"),BoldBIDashboard.isNullOrUndefined(l.dashboardDesigner.model)||BoldBIDashboard.isNullOrUndefined(l.dashboardDesigner.model.dashboardFromData)||!l.dashboardDesigner.model.dashboardFromData.loadFromData||(s=l.generateIdForLabelParameterElement(t[i])),a&&!BoldBIDashboard.isNullOrUndefined(l.dashboardDesigner.model)&&!BoldBIDashboard.isNullOrUndefined(l.dashboardDesigner.model.dashboardFromData)&&l.dashboardDesigner.model.dashboardFromData.loadFromData&&l.updateValueForLabelWidgetInExporting(l.bbdesigner$(t[i]),s),o&&(n=l.getValueForLabelParameter(s),l.bbdesigner$(t[i]).next().html(n),a)&&l.updateLabelWidgetCollection(l.bbdesigner$(t[i]),s,n);l.labelParameterVaues.labelWidgetsData=l.labelWidgetsData}l.resetTooltipForLabelParameters(e.find(".bbi-dbrd-control-title")),l.resetTooltipForLabelParameters(e.find(".bbi-dbrd-control-sub-title")),l.resetTooltipForLabelParameters(e.find(".bbi-dbrd-control-description")),l.updateLabelParameterSize(e)}catch(e){return""}else!d.masterSlaveConfiguration.isInteractionCompleted&&d.labelCounter<30||(d.labelCounter=0,d.masterSlaveConfiguration.isInteractionCompleted=!0),l.bindLableParameterValues(l.labelParameterVaues.LabelParameterData)},500)},e.prototype.updateValueForLabelWidgetInExporting=function(e,t){for(var i="",o=0;o<this.labelWidgetsData.length;o++)this.labelWidgetsData[o].id===this.bbdesigner$(e).parents(".bbi-dbrd-control-container.e-label-item").attr("name")+"_"+t&&(i=this.labelWidgetsData[o].value);this.bbdesigner$(e).next().html(i)},e.prototype.updateLabelWidgetCollection=function(e,t,i){var o,a,s=this.dashboardDesigner.bbdesigner$;if(0===this.labelWidgetsData.length)this.labelWidgetsData.push({id:s(e).parents(".bbi-dbrd-control-container.e-label-item").attr("name")+"_"+t,value:i});else{for(o=!0,a=0;a<this.labelWidgetsData.length;a++)if(this.labelWidgetsData[a].id===this.bbdesigner$(e).parents(".bbi-dbrd-control-container.e-label-item").attr("name")+"_"+t){this.labelWidgetsData[a].value=i,o=!1;break}o&&this.labelWidgetsData.push({id:s(e).parents(".bbi-dbrd-control-container.e-label-item").attr("name")+"_"+t,value:i})}},e.prototype.updateLabelParameterValue=function(e){for(var t,i=this.dashboardDesigner.modules.Mode.designCanvas.find(".bbi-dbrd-label-parameter-value"),o=0;o<i.length;o++)t=!0,(t=1===this.bbdesigner$(i[o]).parents(".bbi-dbrd-control-container.e-label-item").length?this.isUpdateLabelParaForLabelWidget(this.bbdesigner$(i[o]),e):t)&&this.bbdesigner$(i[o]).html("...")},e.prototype.isUpdateLabelParaForLabelWidget=function(e,t){var i,o,a,s,n,r,l=!(i=[]);if(BoldBIDashboard.isNullOrUndefined(t=void 0===t?null:t)||""===t)if(0<(a={selectedInfo:this.masterSlaveConfiguration.getAllWidgetSelectedValues()}).selectedInfo.length)for(s=0;s<a.selectedInfo.length;s++)for(o=this.masterSlaveConfiguration.GetSlaveListOfMasterWidget(a.selectedInfo[s].ReportName),n=0;n<o.length;n++)-1===i.indexOf(o[n])&&i.push(o[n]);else l=!0;else i=this.masterSlaveConfiguration.GetSlaveListOfMasterWidget(t);for(r=0;r<i.length;r++)if(i[r]===this.bbdesigner$(e).parents(".bbi-dbrd-control-container.e-label-item").attr("data-name")){l=!0;break}return l},e.prototype.updateLabelParameterSize=function(e){var t,i,o=e.find(".bbi-dbrd-control-title-wrapper"),a=e.find(".bbi-dbrd-control-sub-header");if(0<o.length)for(t=0;t<o.length;t++)this.adjustParameterColumn(this.bbdesigner$(o[t]));if(0<a.length)for(i=0;i<a.length;i++)this.adjustParameterColumn(this.bbdesigner$(a[i]))},e.prototype.resetTooltipForLabelParameters=function(e){var t,i;if(0<e.length)for(t=0;t<e.length;t++)if(this.bbdesigner$(e[t]).children().hasClass("bbi-dbrd-label-parameter-text")){i=void 0;try{i=(this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.design?this.bbdesigner$(e[t]).clone().children(".bbi-dbrd-label-parameter-value"):this.bbdesigner$(e[t]).clone().children(".bbi-dbrd-label-parameter-text")).remove().end().text()}catch(e){i=""}this.bbdesigner$(e[t]).attr("data-tooltip",i)}},e.prototype.getColumnId=function(e){for(var t=Object.keys(e[0]),i=[],o=0;o<t.length;o++)i.push({id:t[o]});return i},e.prototype.getValueForLabelParameter=function(e){var t,i,o,a,s=this.labelParameterVaues.LabelParameterData;if(!BoldBIDashboard.isNullOrUndefined(s)){for(t=0;t<s.length;t++)if("[]"!==s[t].data)for(i=JSON.parse(s[t].data),o=this.getColumnId(i),a=0;a<o.length;a++)if(o[a].id===e)return i[0][o[a].id];return""}},e.prototype.setValueForLabelParameter=function(e){var t=this.getValueForLabelParameter(this.bbdesigner$(e).attr("data-labelparameterid"));this.bbdesigner$(e).next().html(t)},e.prototype.adjustParameterColumn=function(e){var t,i,o,a,s;if(!BoldBIDashboard.isNullOrUndefined(e)&&0<this.bbdesigner$(e).length&&(i=t=void 0,i=this.dashboardDesigner.model.mode===BoldBIDashboard.Designer.mode.design?(t=e.find(".bbi-dbrd-label-parameter-text").length,e.find(".e-title-text")):(t=e.find(".bbi-dbrd-label-parameter-value").length,e.find(".e-title-value")),o=e[0].getBoundingClientRect().width,1===e.find(".bbi-dbrd-control-title").length&&(o-=6),1===e.find(".bbi-dbrd-control-sub-title").length&&(o-=10),a=o/(i.length+1),0<t)){for(s=0;s<i.length;s++)(this.bbdesigner$(i[s]).hasClass("bbi-dbrd-label-parameter-text")||this.bbdesigner$(i[s]).hasClass("bbi-dbrd-label-parameter-value"))&&this.bbdesigner$(i[s]).css({"max-width":a});this.getParameterColumnMaxWidth(i,o)}},e.prototype.getParameterColumnMaxWidth=function(e,t){for(var i,o=[],a=t-this.getAvailedParameterColumnWidth(e),s=e.length,n=0;n<s;n++)(this.bbdesigner$(e[n]).hasClass("bbi-dbrd-label-parameter-text")||this.bbdesigner$(e[n]).hasClass("bbi-dbrd-label-parameter-value"))&&o.push(this.bbdesigner$(e[n]));for(i=0;i<s;i++)(this.bbdesigner$(e[i]).hasClass("bbi-dbrd-label-parameter-text")||this.bbdesigner$(e[i]).hasClass("bbi-dbrd-label-parameter-value"))&&this.bbdesigner$(e[i]).css({"max-width":parseInt(this.bbdesigner$(e[i]).css("max-width"),10)+a/o.length+"px"})},e.prototype.getAvailedParameterColumnWidth=function(e){for(var t=0,i=e.length,o=0;o<i;o++)t+=this.bbdesigner$(e[o]).width();return t},e.prototype.getValidSummaryType=function(e){switch(e){case"sum":return"SUM";case"count":return"COUNT";case"distinctcount":case"dcount":return"COUNTD";case"avg":case"average":return"AVG";case"max":case"maximum":return"MAX";case"min":case"minimum":return"MIN";case"var":case"variance":return"VAR";case"stdev":return"STDEV"}return"None"},e.prototype.getValidDateFormat=function(e){switch(e){case"year":return"Year";case"none":return"None";case"monthname":return"Month";case"day":return"Day";case"quarter":return"Quarter";case"month":return"Month";case"monthyear":return"MonthYear";case"quarteryear":return"QuarterYear";case"daymonthyear":return"DayMonthYear";case"minutes":return"Minute";case"datehour":return"DateHour";case"dayofweek":return"DayOfWeek";case"weekofyear":return"WeekOfYear";case"timespan":return"TimeSpan";case"timespanhours":return"TimeSpanHours";case"timespanminutes":return"TimeSpanMinutes";case"timespandays":return"TimeSpanDays";case"timespanweeks":return"TimeSpanWeeks";case"timespanmonths":return"TimeSpanMonths";case"timespanyears":return"TimeSpanYears";case"timespaninminutes":return"TimeSpanInMinutes";case"timespaninhours":return"TimeSpanInHours";case"monthdayyear":return"MonthDayYear";case"datetime":return"DateTime";case"date":return"Date"}return""},e}(),BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.LabelParameter",InternalLabelParameter,window),function(e){(e.Dashboard||(e.Dashboard={})).DataGroupInfo=function(){this.FieldContainers=[],this.DataSourceID="",this.DataSourceName="",this.Filters=[],this.SortExpressions=[],this.IsShowAllRecords=!0}}(BoldBIDashboard=BoldBIDashboard||{}),__extends=this&&this.__extends||function(){var o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}))(e,t)};return function(e,t){function i(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),function(e){var t,i,o;function a(){return null!==i&&i.apply(this,arguments)||this}(e=e.Dashboard||(e.Dashboard={})).ExpressionDialogModel=function(){this.FunctionUI=new t,this.Datasource=[]},t=function(){},e.ExpUIModel=t,e.ExpDatasource=function(){},e.ExpressionDataStruct=o=function(){},__extends(a,i=o),e.ExpColumnDataStruct=a,(o=e.State||(e.State={}))[o.Enable=0]="Enable",o[o.Disable=1]="Disable",o[o.Hidden=2]="Hidden",(o=e.FunctionName||(e.FunctionName={})).All="All",o.Numbers="Numbers",o.Aggregation="Aggregation",o.Conditional="Conditional",o.Logical="Logical",o.Date="Date",o.String="String",o.Row="Row",(o=e.FieldName||(e.FieldName={})).All="All",o.Number="Number",o.Text="Text",o.Date="Date",o.Boolean="Boolean",o.Parameter="Parameters",o.Miscellaneous="Miscellaneous"}(BoldBIDashboard=BoldBIDashboard||{}),function(u){var g;function e(){this.key="Designer",this.locale=window[this.key].App.LocalizationContent}g=u.Dashboard||(u.Dashboard={}),e.prototype.getNumberDataJson=function(){return this.jsonData=[{ID:"ABS",Name:"ABS",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.absDesc,Example:this.locale.expressionDesigner.expressionHelper.absEx,State:2},{ID:"ACOS",Name:"ACOS",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.acosDesc,Example:this.locale.expressionDesigner.expressionHelper.acosEx,State:0},{ID:"ASIN",Name:"ASIN",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.asinDesc,Example:this.locale.expressionDesigner.expressionHelper.asinEx,State:0},{ID:"ATAN",Name:"ATAN",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.atanDesc,Example:this.locale.expressionDesigner.expressionHelper.atanEx,State:0},{ID:"COS",Name:"COS",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.cosDesc,Example:this.locale.expressionDesigner.expressionHelper.cosEx,State:0},{ID:"COT",Name:"COT",CategoryName:"Numbers",Description:"Returns the cotangent of the angle specified in radians of the given expression.",Example:"COT(numeric_expression)",State:0},{ID:"CEIL",Name:"CEIL",CategoryName:"Numbers",Description:"Returns the smallest integer value that is greater than or equal to the given numeric expression",Example:"CEIL(numeric_expression)",State:0},{ID:"DEGREES",Name:"DEGREES",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.degDesc,Example:this.locale.expressionDesigner.expressionHelper.degEx,State:0},{ID:"EXP",Name:"EXP",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.expDesc,Example:this.locale.expressionDesigner.expressionHelper.expEx,State:0},{ID:"FLOOR",Name:"FLOOR",CategoryName:"Numbers",Description:"Returns the largest integer value that is less than or equal to the given numeric expression.",Example:"FLOOR(numeric_expression)",State:0},{ID:"LOG",Name:"LOG",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.logDesc,Example:this.locale.expressionDesigner.expressionHelper.logEx,State:0},{ID:"MOD",Name:"MOD",CategoryName:"Numbers",Description:"Returns the remainder of the first numeric expression divided by second numeric expression.",Example:"MOD(numeric_expression, numeric_expression)",State:0},{ID:"PI",Name:"PI",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.piDesc,Example:this.locale.expressionDesigner.expressionHelper.piEx,State:0},{ID:"POWER",Name:"POWER",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.powerDesc,Example:this.locale.expressionDesigner.expressionHelper.powerEx,State:0},{ID:"RADIANS",Name:"RADIANS",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.radDesc,Example:this.locale.expressionDesigner.expressionHelper.radEx,State:0},{ID:"ROUND",Name:"ROUND",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.roundDesc,Example:this.locale.expressionDesigner.expressionHelper.roundEx,State:0},{ID:"SIGN",Name:"SIGN",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.signDesc,Example:this.locale.expressionDesigner.expressionHelper.signEx,State:0},{ID:"SIN",Name:"SIN",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.sinDesc,Example:this.locale.expressionDesigner.expressionHelper.sinEx,State:0},{ID:"SQRT",Name:"SQRT",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.sqrtDesc,Example:this.locale.expressionDesigner.expressionHelper.sqrtEx,State:0},{ID:"TOTALPERCENTAGE",Name:"TOTALPERCENTAGE",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.percentageDesc,Example:this.locale.expressionDesigner.expressionHelper.percentageEx,State:0},{ID:"TAN",Name:"TAN",CategoryName:"Numbers",Description:this.locale.expressionDesigner.expressionHelper.tanDesc,Example:this.locale.expressionDesigner.expressionHelper.tanEx,State:0}]},e.prototype.getConditonalDataJson=function(){return this.jsonData=[{ID:"COALESCE",Name:"COALESCE",CategoryName:"Conditional",Description:"Returns the first non-NULL expression among its arguments, or NULL if all its arguments are NULL",Example:"COALESCE(exp1,exp2,...exp(n))",State:0},{ID:"IF",Name:"IF",CategoryName:"Conditional",Description:this.locale.expressionDesigner.expressionHelper.ifDesc,Example:this.locale.expressionDesigner.expressionHelper.ifEx,State:0},{ID:"IFNULL",Name:"IFNULL",CategoryName:"Conditional",Description:this.locale.expressionDesigner.expressionHelper.ifNullDesc,Example:this.locale.expressionDesigner.expressionHelper.ifNullEx,State:0},{ID:"ISNOTNULL",Name:"ISNOTNULL",CategoryName:"Conditional",Description:this.locale.expressionDesigner.expressionHelper.isNotNullDesc,Example:this.locale.expressionDesigner.expressionHelper.isNotNullEx,State:0},{ID:"ISNULL",Name:"ISNULL",CategoryName:"Conditional",Description:this.locale.expressionDesigner.expressionHelper.isNullDesc,Example:this.locale.expressionDesigner.expressionHelper.isNullEx,State:0}]},e.prototype.getLogicalDataJson=function(){return this.jsonData=[{ID:"AND",Name:"AND",CategoryName:"Logical",Description:this.locale.expressionDesigner.expressionHelper.andDesc,Example:this.locale.expressionDesigner.expressionHelper.andEx,State:0},{ID:"NOT",Name:"NOT",CategoryName:"Logical",Description:this.locale.expressionDesigner.expressionHelper.notDesc,Example:this.locale.expressionDesigner.expressionHelper.notEx,State:0},{ID:"OR",Name:"OR",CategoryName:"Logical",Description:this.locale.expressionDesigner.expressionHelper.orDesc,Example:this.locale.expressionDesigner.expressionHelper.orEx,State:0}]},e.prototype.getDateDataJson=function(){return this.jsonData=[{ID:"CURRENTYEAR",Name:"CURRENTYEAR",CategoryName:"Date",Description:"Returns the current year.",Example:"CURRENTYEAR()",State:0},{ID:"CURRENTMONTH",Name:"CURRENTMONTH",CategoryName:"Date",Description:"Returns the current month.",Example:"CURRENTMONTH()",State:0},{ID:"DATEADD",Name:"DATEADD",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.dateAddDesc,Example:this.locale.expressionDesigner.expressionHelper.dateAddEx,State:0},{ID:"DATEDIFF",Name:"DATEDIFF",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.dateDiffDesc,Example:this.locale.expressionDesigner.expressionHelper.dateDiffEx,State:0},{ID:"DATENAME",Name:"DATENAME",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.dateNameDesc,Example:this.locale.expressionDesigner.expressionHelper.dateNameEx,State:0},{ID:"DATEPART",Name:"DATEPART",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.datePartDesc,Example:this.locale.expressionDesigner.expressionHelper.datePartEx,State:0},{ID:"DATESUB",Name:"DATESUB",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.dateSubDesc,Example:this.locale.expressionDesigner.expressionHelper.dateSubEx,State:0},{ID:"DAY",Name:"DAY",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.dayDesc,Example:this.locale.expressionDesigner.expressionHelper.dayEx,State:0},{ID:"DAYDIFF",Name:"DAYDIFF",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.dayDiffDesc,Example:this.locale.expressionDesigner.expressionHelper.dayDiffEx,State:0},{ID:"HOUR",Name:"HOUR",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.hourDesc,Example:this.locale.expressionDesigner.expressionHelper.hourEx,State:0},{ID:"MAX",Name:"MAX",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.maxDesc,Example:this.locale.expressionDesigner.expressionHelper.maxEx,State:0},{ID:"MIN",Name:"MIN",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.minDesc,Example:this.locale.expressionDesigner.expressionHelper.minEx,State:0},{ID:"MINUTE",Name:"MINUTE",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.minutesDesc,Example:this.locale.expressionDesigner.expressionHelper.minutesEx,State:0},{ID:"MONTH",Name:"MONTH",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.monthDesc,Example:this.locale.expressionDesigner.expressionHelper.monthEx,State:0},{ID:"NOW",Name:"NOW",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.nowDesc,Example:this.locale.expressionDesigner.expressionHelper.nowEx,State:0},{ID:"PREVIOUSMONTH",Name:"PREVIOUSMONTH",CategoryName:"Date",Description:"Returns the previous month.",Example:"PREVIOUSMONTH()",State:0},{ID:"PREVIOUSYEAR",Name:"PREVIOUSYEAR",CategoryName:"Date",Description:"Returns the previous year.",Example:"PREVIOUSYEAR()",State:0},{ID:"TODAY",Name:"TODAY",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.todayDesc,Example:this.locale.expressionDesigner.expressionHelper.todayEx,State:0},{ID:"YEAR",Name:"YEAR",CategoryName:"Date",Description:this.locale.expressionDesigner.expressionHelper.yearDesc,Example:this.locale.expressionDesigner.expressionHelper.yearEx,State:0},{ID:"YESTERDAY",Name:"YESTERDAY",CategoryName:"YESTERDAY",Description:"Returns the yesterday date.",Example:"YESTERDAY()",State:0}]},e.prototype.getStringDataJson=function(){return this.jsonData=[{ID:"CHAR",Name:"CHAR",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.charDesc,Example:this.locale.expressionDesigner.expressionHelper.charEx,State:0},{ID:"CONCAT",Name:"CONCAT",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.concatDesc,Example:this.locale.expressionDesigner.expressionHelper.concatEx,State:0},{ID:"CONTAINS",Name:"CONTAINS",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.containsDesc,Example:this.locale.expressionDesigner.expressionHelper.containsEx,State:0},{ID:"ENDSWITH",Name:"ENDSWITH",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.endsWithDesc,Example:this.locale.expressionDesigner.expressionHelper.endsWithEx,State:0},{ID:"INITCAP",Name:"INITCAP",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.initCapDesc,Example:this.locale.expressionDesigner.expressionHelper.initCapEx,State:0},{ID:"LEFT",Name:"LEFT",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.leftDesc,Example:this.locale.expressionDesigner.expressionHelper.leftEx,State:0},{ID:"LEN",Name:"LEN",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.lenDesc,Example:this.locale.expressionDesigner.expressionHelper.lenEx,State:0},{ID:"LOWER",Name:"LOWER",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.lowerDesc,Example:this.locale.expressionDesigner.expressionHelper.lowerEx,State:0},{ID:"LTRIM",Name:"LTRIM",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.ltrimDesc,Example:this.locale.expressionDesigner.expressionHelper.ltrimEx,State:0},{ID:"MAX",Name:"MAX",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.maxStrDesc,Example:this.locale.expressionDesigner.expressionHelper.maxStrEx,State:0},{ID:"MIN",Name:"MIN",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.minStrDesc,Example:this.locale.expressionDesigner.expressionHelper.minStrEx,State:0},{ID:"REPLACE",Name:"REPLACE",CategoryName:"String",Description:"Replaces all occurrences of the substring within the given string expression, with the new_substring.",Example:" REPLACE(string_expression, substring, new_substring)",State:0},{ID:"RIGHT",Name:"RIGHT",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.rightDesc,Example:this.locale.expressionDesigner.expressionHelper.rightEx,State:0},{ID:"RTRIM",Name:"RTRIM",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.rtrimDesc,Example:this.locale.expressionDesigner.expressionHelper.rtrimEx,State:0},{ID:"STARTSWITH",Name:"STARTSWITH",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.startsWithDesc,Example:this.locale.expressionDesigner.expressionHelper.startsWithEx,State:0},{ID:"SUBSTR",Name:"SUBSTR",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.substrDesc,Example:this.locale.expressionDesigner.expressionHelper.substrEx,State:0},{ID:"TRIM",Name:"TRIM",CategoryName:"String",Description:"Removes the leading and trailing spaces from the given string expression.",Example:"TRIM(string_expression)",State:0},{ID:"UPPER",Name:"UPPER",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.upperDesc,Example:this.locale.expressionDesigner.expressionHelper.upperEx,State:0},{ID:"HTML_PPARSER",Name:"HTML_PARSER",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.htmlParseDesc,Example:this.locale.expressionDesigner.expressionHelper.htmlParseEx,State:0},{ID:"XML_PARSER",Name:"XML_PARSER",CategoryName:"String",Description:this.locale.expressionDesigner.expressionHelper.xmlParseDesc,Example:this.locale.expressionDesigner.expressionHelper.xmlParseEx,State:0}]},e.prototype.getAggDataJson=function(){return this.jsonData=[{ID:"AVG",Name:"AVG",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.avgDesc,Example:this.locale.expressionDesigner.expressionHelper.avgEx,State:0},{ID:"AVGD",Name:"AVGD",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.avgdDesc,Example:this.locale.expressionDesigner.expressionHelper.avgdEx,State:0},{ID:"COUNT",Name:"COUNT",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.countDesc,Example:this.locale.expressionDesigner.expressionHelper.countEx,State:0},{ID:"COUNTD",Name:"COUNTD",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.countdDesc,Example:this.locale.expressionDesigner.expressionHelper.countdEx,State:0},{ID:"MAX",Name:"MAX",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.maxAggDesc,Example:this.locale.expressionDesigner.expressionHelper.maxAggEx,State:0},{ID:"MIN",Name:"MIN",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.minAggDesc,Example:this.locale.expressionDesigner.expressionHelper.minAggEx,State:0},{ID:"STDEV",Name:"STDEV",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.stdDevDesc,Example:this.locale.expressionDesigner.expressionHelper.stdDevEx,State:0},{ID:"SUM",Name:"SUM",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.sumDesc,Example:this.locale.expressionDesigner.expressionHelper.sumEx,State:0},{ID:"SUMD",Name:"SUMD",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.sumdDesc,Example:this.locale.expressionDesigner.expressionHelper.sumdEx,State:0},{ID:"VAR",Name:"VAR",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.varDesc,Example:this.locale.expressionDesigner.expressionHelper.varEx,State:0},{ID:"STRING_AGG",Name:"STRING_AGG",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.string_aggDesc,Example:this.locale.expressionDesigner.expressionHelper.string_aggEx,State:0},{ID:"TOTAL",Name:"TOTAL",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.totalDesc,Example:this.locale.expressionDesigner.expressionHelper.totalEx,State:0},{ID:"QUANTILEEXACT",Name:"QUANTILEEXACT",CategoryName:"Aggregation",Description:this.locale.expressionDesigner.expressionHelper.quantileExactDesc,Example:this.locale.expressionDesigner.expressionHelper.quantileExactEx,State:0}]},e.prototype.getRowDataJson=function(){return this.jsonData=[{ID:"RUNNINGCOUNT",Name:"RUNNINGCOUNT",CategoryName:"Row",Description:this.locale.expressionDesigner.expressionHelper.runningCountDesc,Example:this.locale.expressionDesigner.expressionHelper.runningCountEx,State:0},{ID:"RUNNIGAVG",Name:"RUNNINGAVG",CategoryName:"Row",Description:this.locale.expressionDesigner.expressionHelper.runningAvgDesc,Example:this.locale.expressionDesigner.expressionHelper.runningAvgEx,State:0},{ID:"RUNNINGMAX",Name:"RUNNINGMAX",CategoryName:"Row",Description:this.locale.expressionDesigner.expressionHelper.runningMaxDesc,Example:this.locale.expressionDesigner.expressionHelper.runningMaxEx,State:0},{ID:"RUNNINGMIN",Name:"RUNNINGMIN",CategoryName:"Row",Description:this.locale.expressionDesigner.expressionHelper.runningMinDesc,Example:this.locale.expressionDesigner.expressionHelper.runningMinEx,State:0},{ID:"RUNNINGSUM",Name:"RUNNINGSUM",CategoryName:"Row",Description:this.locale.expressionDesigner.expressionHelper.runningSumDesc,Example:this.locale.expressionDesigner.expressionHelper.runningSumEx,State:0}]},e.prototype.getMultipleData=function(e){var t,i,o,a,s,n,r=[];return u.isNullOrUndefined(e)&&(e=this.getNumberDataJson(),t=this.getAggDataJson(),i=this.getConditonalDataJson(),o=this.getLogicalDataJson(),a=this.getDateDataJson(),s=this.getStringDataJson(),n=this.getRowDataJson(),r=[{ID:1,Name:g.FunctionName.Numbers,Value:e},{ID:2,Name:g.FunctionName.Aggregation,Value:t},{ID:3,Name:g.FunctionName.Conditional,Value:i},{ID:4,Name:g.FunctionName.Logical,Value:o},{ID:5,Name:g.FunctionName.Date,Value:a},{ID:6,Name:g.FunctionName.String,Value:s},{ID:7,Name:g.FunctionName.Row,Value:n}]),r},e.prototype.getMultipleColumnData=function(e,t){var i,o,a,s;if(u.isNullOrUndefined(t)){for(var n=[],r=[],l=[],d=[],h=[],p=[],c=0;c<e.length;c++)o=e[c].IsDynamicParam,e[c].DataType||"UnSupport"!==e[c].TypeName?e[c].IsExpression||"geography"!==(a=e[c].DataType||e[c].TypeName)&&"hierarchyid"!==a&&"xml"!==a&&(s=u.isNullOrUndefined(e[c].Value)||""===e[c].Value?e[c].Name:e[c].Value,"integer"===a.toLowerCase()||"real"===a.toLowerCase()?n.push({ID:c,Name:e[c].Name,Value:s,DataType:a,HasDynamicParams:o}):"string"===a.toLowerCase()?r.push({ID:c,Name:e[c].Name,Value:s,DataType:a,HasDynamicParams:o}):"date"===a.toLowerCase()?l.push({ID:c,Name:e[c].Name,Value:s,DataType:a,HasDynamicParams:o}):"boolean"===a.toLowerCase()&&d.push({ID:c,Name:e[c].Name,Value:s,DataType:a,HasDynamicParams:o}),!u.isNullOrUndefined(o))&&o&&p.push({ID:c,Name:e[c].Name,Value:s,DataType:a,HasDynamicParams:o}):h.push({ID:c,Name:e[c].Name,Value:e[c].Name,DataType:e[c].DataType||e[c].TypeName,HasDynamicParams:o});i=[{ID:1,Name:g.FieldName.Number,Value:n},{ID:2,Name:g.FieldName.Text,Value:r},{ID:3,Name:g.FieldName.Date,Value:l},{ID:4,Name:g.FieldName.Boolean,Value:d},{ID:5,Name:g.FieldName.Parameter,Value:p},{ID:6,Name:g.FieldName.Miscellaneous,Value:[]}]}return i},e.prototype.getDaMultipleColumnData=function(e,t){var i,o,a;if(u.isNullOrUndefined(t)){for(var s=[],n=[],r=[],l=[],d=0;d<e.length;d++)o=e[d].Type,a=e[d].Caption,"NUMERIC"===o?s.push({ID:d,Name:e[d].Caption,Value:a,DataType:e[d].Type,HasDynamicParams:!1}):"STRING"===o?n.push({ID:d,Name:e[d].Caption,Value:a,DataType:e[d].DataType,HasDynamicParams:!1}):"DATETIME"===o?r.push({ID:d,Name:e[d].Caption,Value:a,DataType:e[d].DataType,HasDynamicParams:!1}):"BOOLEAN"===o&&l.push({ID:d,Name:e[d].Caption,Value:a,DataType:e[d].DataType,HasDynamicParams:!1});i=[{ID:1,Name:g.FieldName.Number,Value:s},{ID:2,Name:g.FieldName.Text,Value:n},{ID:3,Name:g.FieldName.Date,Value:r},{ID:4,Name:g.FieldName.Boolean,Value:l},{ID:5,Name:g.FieldName.Miscellaneous,Value:[]}]}return i},g.ExpressionHelper=e}(BoldBIDashboard=BoldBIDashboard||{}),InternalQueryExpression=function(){function e(e){this.id=null,this.oldVal="",this.oldExpName="",this.isAddButtonEnabled=!1,this.queryExp=[],this.expressionLength=0,this.tempExp=[],this.provider="",this.isVirtualScrollEnabled=!1,this.listContainer=null,this.expLiTag=null,this.bodyContainer=null,this.textBox=null,this.textArea=null,this.expressionContainer=null,this.addBtnTag=null,this.saveBtnTag=null,this.footerTag=null,this.expWaterMark="",this.successMessageLocale="",this.nameWaterMark="Expression Name",this.isAdd=!1,this.ejFunctionDropdown=null,this.ejColumnDropdown=null,this.ejFunctionList=null,this.ejColumnList=null,this.ejExpDialog=null,this.ejIndicator=null,this.locale=null,this.isFromQueryDesigner=!1,this.aggregationList=["SUM","COUNT","AVG","MAX","MIN","VAR","STDEV","SUMD","AVGD","COUNTD","INDEX","TOTAL","RUNNINGAVG","RUNNINGCOUNT","RUNNINGSUM","RUNNINGMAX","RUNNINGMIN","NULL"],this.rowExpression=["RUNNINGAVG","RUNNINGCOUNT","RUNNINGSUM","RUNNINGMAX","RUNNINGMIN"],this.dashboardDesigner=e,this.bbdesigner$=this.dashboardDesigner.bbdesigner$,this.locale=e.getLocalizationContent(),this.queryDesigner=this.dashboardDesigner.modules.queryDesigner,this.id=this.dashboardDesigner._id,this.widgetHelper=this.dashboardDesigner.modules.widgetHelper,this.provider="SQL",this.expWaterMark=this.locale.queryExpressionDialog.QueryExpression,this.successMessageLocale=this.locale.queryExpressionDialog.successMessageNotification,this.renderQueryExpression()}return e.prototype.renderQueryExpression=function(){var t=this,e=BoldBIDashboard.buildTag("div.bbi-userselect","",{},{id:this.id+"_exp_designer"}),i=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_exp_designer_div"}),o=(e.append(i),BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-table","",{},{unselectable:"on"})),a=BoldBIDashboard.buildTag("tr","",{}),s=BoldBIDashboard.buildTag("td.bbi-querydesigner-exp-separator bbi-querydesigner-exp-td","",{"font-size":"13px"},{}),n=BoldBIDashboard.buildTag("td","",{"margin-left":"12px"},{}),s=(i.append(o),o.append(a),a.append(s).append(n),o=BoldBIDashboard.buildTag("div","",{width:"175px",height:"460px"}),a=this.expressionContainer=BoldBIDashboard.buildTag("div","",{"margin-left":"10px"},{id:this.id+"_exp_designer_container_exp"}),s.append(o),n.append(a),BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-table","",{width:"623px"},{unselectable:"on"})),n=BoldBIDashboard.buildTag("tr","",{width:"590px"}),r=BoldBIDashboard.buildTag("td","",{}),l=BoldBIDashboard.buildTag("label.bbi-designer-title-label",this.locale.expressionDesigner.nameText,{},{id:this.id+"_exp_designer_exp_name"}),d=BoldBIDashboard.buildTag("tr","",{width:"590px"}),h=BoldBIDashboard.buildTag("td","",{}),p=this.textBox=BoldBIDashboard.buildTag("input.e-textbox bbi-designer-textbox","",{height:"20px",width:"240px","margin-top":"2px","margin-bottom":"5px"},{type:"text",id:this.id+"_exp_designer_textBox",spellcheck:"false"}),l=(r.append(l),n.append(r),h.append(p),d.append(h),BoldBIDashboard.buildTag("tr","",{height:"100px",width:"590px"})),r=BoldBIDashboard.buildTag("tr","",{width:"590px"}),h=BoldBIDashboard.buildTag("td","",{}),c=BoldBIDashboard.buildTag("label.bbi-designer-title-label",this.locale.expressionDesigner.expressionText,{},{id:this.id+"_exp_designer_trgt_name"}),c=(h.append(c),r.append(h),BoldBIDashboard.buildTag("td","",{"font-size":"13px"},{})),h=this.textArea=BoldBIDashboard.buildTag("textarea.e-textarea bbi-designer-textarea","",{height:"90px",width:"593px","margin-top":"6px",overflow:"auto"},{id:this.id+"_exp_designer_textarea",spellcheck:"false"}),u=BoldBIDashboard.buildTag("tr","",{height:"255px",width:"590px"}),g=BoldBIDashboard.buildTag("td","",{}),b=BoldBIDashboard.buildTag("table.bbi-querydesigner-exp-innertable","",{height:"250px",width:"590px","margin-top":"6px","margin-bottom":"2px"}),m=BoldBIDashboard.buildTag("tr","",{height:"35px",width:"590px"}),f=BoldBIDashboard.buildTag("td","",{}),k=BoldBIDashboard.buildTag("span.bbi-designer-title-label",this.locale.expressionDesigner.functionsText,{},{}),D=BoldBIDashboard.buildTag("div","",{"margin-top":"6px",width:"210px"},{}),x=BoldBIDashboard.buildTag("input","",{"margin-top":"5px"},{id:this.id+"_exp_designer_options"}),U=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_exp_designer_option_div"}),I=BoldBIDashboard.buildTag("td","",{}),B=BoldBIDashboard.buildTag("div","",{height:"25px",margin:"25px 10px 0px -3px","border-left":"1px solid var(--querydesigner-primary-border-color)"},{}),B=(I.append(B),BoldBIDashboard.buildTag("td","",{})),O=BoldBIDashboard.buildTag("span.bbi-designer-title-label",this.locale.expressionDesigner.columnSettingsText,{"margin-left":"6px"},{}),C=BoldBIDashboard.buildTag("div","",{"margin-top":"6px",width:"199px","margin-left":"6px"},{}),y=BoldBIDashboard.buildTag("input","",{height:"35px",width:"190px"},{id:this.id+"_exp_designer_data"}),R=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_exp_designer_data_div"}),W=BoldBIDashboard.buildTag("td","",{height:"35px"}),S=BoldBIDashboard.buildTag("tr","",{width:"590px"}),T=BoldBIDashboard.buildTag("td","",{width:"210px"},{}),v=BoldBIDashboard.buildTag("td","",{}),w=BoldBIDashboard.buildTag("div","",{height:"200px",margin:"-10px 10px 0px -3px","border-left":"1px solid var(--querydesigner-primary-border-color)"},{}),w=(v.append(w),BoldBIDashboard.buildTag("td","",{width:"205px"},{})),_=BoldBIDashboard.buildTag("td","",{height:"190px"}),V=this.functionNoDataContainer=BoldBIDashboard.buildTag("div.bbi-querydesigner-function-nodata bbi-designer-empty-msg","",{width:"188px",height:"135px"},{id:this.id+"_function_nodata_container"}).text(this.locale.queryExpressionDialog.NoResultFound),N=BoldBIDashboard.buildTag("div.bbi-querydesigner-function-search","",{width:"188px"},{id:this.id+"_div_functions_search"}),E=BoldBIDashboard.buildTag("div.e-option-list","",{width:"205px","margin-top":"1px"},{}),z=this.columnNoDataContainer=BoldBIDashboard.buildTag("div.bbi-querydesigner-column-nodata bbi-designer-empty-msg","",{width:"188px",height:"135px"},{id:this.id+"_column_nodata_container"}).text(this.locale.queryExpressionDialog.NoResultFound),H=BoldBIDashboard.buildTag("div.bbi-querydesigner-column-search","",{width:"188px"},{id:this.id+"_div_columnsettings_search"}),A=BoldBIDashboard.buildTag("ul","",{},{id:this.id+"_exp_designer_option_list"}),$=BoldBIDashboard.buildTag("div.e-data-list","",{width:"199px","margin-left":"6px","margin-top":"1px"},{}),F=BoldBIDashboard.buildTag("ul","",{},{id:this.id+"_exp_designer_data_list"}),j=BoldBIDashboard.buildTag("div.bbi-designer-cursor","",{height:"200px",width:"180px","margin-right":"10px"},{id:this.id+"_cat_desc"}),q=BoldBIDashboard.buildTag("div","",{height:"5px"},{}),G=BoldBIDashboard.buildTag("div.bbi-designer-title-label","",{height:"auto"},{id:this.id+"_exp_designer_desc_heading"}),Q=BoldBIDashboard.buildTag("div","",{"text-align":"justify",height:"auto","font-size":"12px","margin-top":"8px"},{id:this.id+"_exp_designer_desc_content"}),J=BoldBIDashboard.buildTag("div","",{height:"12px"},{}),Y=BoldBIDashboard.buildTag("div.bbi-designer-title-label","",{height:"auto"},{id:this.id+"_exp_designer_example_heading"}),K=BoldBIDashboard.buildTag("div","",{float:"left","word-wrap":"break-word","margin-top":"8px",height:"auto","font-size":"12px",width:"190px"},{id:this.id+"_exp_designer_example_content"}),M=this.addBtnTag=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.expressionDesigner.addText,{float:"left"},{id:this.id+"_exp_designer_add_btn",type:"button"}),X=BoldBIDashboard.buildTag("div.bbi-querydesigner-success-msg-wrap","",{display:"none"},{id:this.id+"_exp_success_message_wrap"}),Z=BoldBIDashboard.buildTag("span.bbi-querydesigner-success-message",this.successMessageLocale,{},{id:this.id+"_exp_success_message"}),ee=BoldBIDashboard.buildTag("span.bbi-querydesigner-success-message-icon","",{},{id:this.id+"_exp_success_message_icon"}),P=(this.saveBtnTag=BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-primary",this.locale.expressionDesigner.saveBtnText,{float:"right"},{id:this.id+"_exp_designer_save_btn",type:"button"}),BoldBIDashboard.buildTag("button.bbi-dbrd-btn-small bbi-dbrd-btn-secondary bbi-dbrd-margin-left",this.locale.expressionDesigner.closeBtnText,{float:"right"},{id:this.id+"_exp_designer_close_btn",type:"button"})),L=this.bodyContainer=BoldBIDashboard.buildTag("div.e-lv e-js e-parentlv bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{width:"100%",height:o.height(),display:"block",position:"relative"},{id:this.id+"_exp_designer_bodyContainer"}),te=BoldBIDashboard.buildTag("div","",{},{}),ie=this.listContainer=BoldBIDashboard.buildTag("div.bbi-list-container e-js e-widget bbi-designer-dataset","",{"border-top-width":"1px",padding:"3px"},{id:this.id+"_div_expList"}),oe=this.expLiTag=BoldBIDashboard.buildTag("ul.e-list-hdr e-clearall","",{width:"auto",height:"auto"},{id:this.id+"_query_exp_li_container"});ie.append(oe),te.append(ie),L.append(te),o.append(L),c.append(h),l.append(c),s.append(n).append(d).append(r).append(l),m.append(W).append(f).append(I).append(B),f.append(k).append(D),D.append(x).append(U),B.append(O).append(C),C.append(y).append(R),b.append(m).append(S),g.append(b),u.append(g),s.append(u),T.append(N),T.append(E),T.append(V),E.append(A),w.append(H),w.append($),w.append(z),$.append(F),_.append(j),j.append(q).append(G).append(Q).append(J).append(Y).append(K),S.append(_).append(T).append(v).append(w),a.append(s),e.BoldBIDashboardDialog({width:"auto",height:"auto",minWidth:"310px",minHeight:"215px",title:this.locale.expressionDesigner.expressionTitleText,beforeClose:this.bbdesigner$.proxy(this.closeExpDialog,this),enableResize:!1,showOnInit:!1,showFooter:!0,containment:"#"+this.dashboardDesigner._id,target:"#"+this.dashboardDesigner._id,cssClass:"bbi-designer-dialog e-flat-mode boldbi-dashboarddesigner e-query-expression",enableModal:!0,close:this.bbdesigner$.proxy(BoldBIDashboard.DashboardUtil.closeDialog,this),closeIconTooltip:this.locale.dialogOptions.closeButtonText}),this.footerTag=this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_foot"),X.append(ee,Z),this.footerTag.append(M,P,this.saveBtnTag,X),x.BoldBIDashboardDropDownList({targetID:this.id+"_exp_designer_option_div",dataSource:[],popupHeight:"150px",minPopupWidth:"190px",showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-ejwidgets bbi-designer-drpdown-selection bbi-dbrd-control",width:"190px",height:"28px",change:this.bbdesigner$.proxy(this.renderFunctionList,this)}),y.BoldBIDashboardDropDownList({targetID:this.id+"_exp_designer_data_div",popupHeight:"150px",showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-ejwidgets bbi-designer-drpdown-selection bbi-dbrd-control",minPopupWidth:"190px",fields:{id:"id",text:"name"},dataSource:[],width:"190px",height:"28px",change:this.bbdesigner$.proxy(this.renderColumnList,this)}),A.BoldBIDashboardListBox({dataSource:[],height:"155px",change:this.bbdesigner$.proxy(this.optionClick,this),showRoundedCorner:!0,cssClass:"bbi-designer-param-assign bbi-designer-list-selection bbi-dbrd-control",width:"190px"}),F.BoldBIDashboardListBox({dataSource:[],height:"155px",showRoundedCorner:!0,itemRequest:this.bbdesigner$.proxy(function(e){6===t.ejColumnList.dummyUl.length&&e.model.allowVirtualScrolling&&(t.ejColumnList.dummyUl=t.ejColumnList.element.children())},this),cssClass:"bbi-designer-param-assign bbi-designer-list-selection bbi-dbrd-control",width:"190px"}),M.off("click",this.bbdesigner$.proxy(this.addExpression,this)),P.off("click",this.bbdesigner$.proxy(this.closeExpression,this)),this.saveBtnTag.off("click",this.bbdesigner$.proxy(this.saveExpression,this)),M.on("click",this.bbdesigner$.proxy(this.addExpression,this)),P.on("click",this.bbdesigner$.proxy(this.closeExpression,this)),this.saveBtnTag.on("click",this.bbdesigner$.proxy(this.saveExpression,this)),L.BoldBIDashboardScroller({scrollerSize:this.dashboardDesigner.scrollerSize.scrollSize,height:o.height(),enableTouchScroll:!0,autoHide:!0,buttonSize:this.dashboardDesigner.scrollerSize.buttonSize}),i.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup bbi-designer-loader",template:this.dashboardDesigner.getWaitingPopupTemplate()}),this.ejFunctionDropdown=x.data("BoldBIDashboardDropDownList"),this.ejColumnDropdown=y.data("BoldBIDashboardDropDownList"),this.ejFunctionList=A.data("BoldBIDashboardListBox"),this.ejColumnList=F.data("BoldBIDashboardListBox"),this.ejExpDialog=e.data("BoldBIDashboardDialog"),this.ejIndicator=i.data("BoldBIDashboardWaitingPopup"),h.bind("change keyup paste",this.bbdesigner$.proxy(this.txtExpChanged,this)),p.bind("change keyup paste",this.bbdesigner$.proxy(this.txtNameChanged,this)),BoldBIDashboard.DashboardUtil.txtWaterMark(h,this.expWaterMark),BoldBIDashboard.DashboardUtil.txtWaterMark(p,this.nameWaterMark),this.unWiredEvents(),this.wiredEvents(),this.renderAutocomplete(N,!0),this.renderAutocomplete(H,!1)},e.prototype.closeDialog=function(){this.resetSearchBox()},e.prototype.renderAutocomplete=function(e,t){var i=BoldBIDashboard.buildTag("table.bbi-querydesigner-toolbar-table","",{width:"100%"}),o=this.bbdesigner$("<tr/>"),a=this.bbdesigner$("<td/>"),s=BoldBIDashboard.buildTag("span.e-atc e-widget","",{width:"100%",height:"28px"},{}),n=BoldBIDashboard.buildTag("span.e-in-wrap e-box e-padding bbi-designer-widget-autocomplete","",{},{}),r=this.expSearch=BoldBIDashboard.buildTag("input.bbi-autocomplete bbi-designer-widget-watermark bbi-designer-atc-boxshadow e-js e-input","",{},{type:"text",placeholder:this.locale.expressionDesigner.placeHolderText,id:t?this.id+"_function_search":this.id+"_column_search"}),l=this.expSearchIcon=BoldBIDashboard.buildTag("span.e-select bbi-designer-widget-autocomplete e-search-area","",{width:"24px",height:"30px"},{id:t?this.id+"_function_search-icon":this.id+"_column_search-icon"});l.append(BoldBIDashboard.buildTag("span.bbi-headericon bbi-designer-search","",{display:"table-cell"})),n.append(l),n.append(r),s.append(n),BoldBIDashboard.buildTag("span.e-select bbi-designer-widget-select bbi-designer-widget-autocomplete","",{height:"30px"},{id:this.id+"_column_widgetClose"}).append("<span class='bbi-headericon e-reportdesigner-widget-left'/>"),a.append(s),o.append(a),i.append(o),e.append(i),this.functionSearchBox=this.expressionContainer.find("#"+this.id+"_function_search"),this.columnSearchBox=this.expressionContainer.find("#"+this.id+"_column_search"),this.functionSearchIcon=this.expressionContainer.find(".bbi-querydesigner-function-search .bbi-headericon"),this.functionListbox=this.expressionContainer.find("#"+this.id+"_exp_designer_option_list"),this.columnSearchIcon=this.expressionContainer.find(".bbi-querydesigner-column-search .bbi-headericon"),this.columnListbox=this.expressionContainer.find("#"+this.id+"_exp_designer_data_list"),this.functionListTd=this.expressionContainer.find(".e-option-list"),this.columnListTd=this.expressionContainer.find(".e-data-list"),t?(this.expSearch.on("keyup",this.bbdesigner$.proxy(this.onSearchText,this,this.functionSearchIcon,this.functionListbox,!0)),this.expSearch.on("blur",this.bbdesigner$.proxy(this.onSearchBlur,this,this.functionSearchIcon,this.functionListbox)),this.expSearchIcon.on("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this,this.functionSearchIcon,this.functionListbox,this.expSearch,!0)),this.functionSearchBox.on("focus",this.bbdesigner$.proxy(this.onSearchTextBoxFocusIn,this,this.expressionContainer,!0)),this.functionSearchBox.on("blur",this.bbdesigner$.proxy(this.onSearchTextBoxFocusOut,this,this.expressionContainer,!0))):(this.expSearch.on("keyup",this.bbdesigner$.proxy(this.onSearchText,this,this.columnSearchIcon,this.columnListbox,!1)),this.expSearch.on("blur",this.bbdesigner$.proxy(this.onSearchBlur,this,this.columnSearchIcon,this.columnListbox)),this.expSearchIcon.on("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this,this.columnSearchIcon,this.columnListbox,this.expSearch,!1)),this.columnSearchBox.on("focus",this.bbdesigner$.proxy(this.onSearchTextBoxFocusIn,this,this.expressionContainer,!1)),this.columnSearchBox.on("blur",this.bbdesigner$.proxy(this.onSearchTextBoxFocusOut,this,this.expressionContainer,!1)))},e.prototype.onSearchTextBoxFocusIn=function(e,t){t=t?e.find(".bbi-querydesigner-function-search"):e.find(".bbi-querydesigner-column-search");t.addClass("e-focus")},e.prototype.onSearchTextBoxFocusOut=function(e,t){t=t?e.find(".bbi-querydesigner-function-search"):e.find(".bbi-querydesigner-column-search");t.hasClass("e-focus")&&t.removeClass("e-focus")},e.prototype.resetSearchBox=function(){this.resetFunction(),this.resetColumn()},e.prototype.resetFunction=function(){this.functionSearchBox.val(""),this.functionListbox.BoldBIDashboardListBox("showAllItems"),this.functionListTd.css("display","block"),this.functionNoDataContainer.css("display","none"),this.functionSearchIcon.addClass("bbi-designer-search").removeClass("bbi-designer-close")},e.prototype.resetColumn=function(){this.columnSearchBox.val(""),this.showAllItemsForListBox(this.columnListbox),this.columnListTd.css("display","block"),this.columnNoDataContainer.css("display","none"),this.columnSearchIcon.addClass("bbi-designer-search").removeClass("bbi-designer-close")},e.prototype.onSearchText=function(e,t,i,o){var a;13!==o.keyCode&&(0<(o=this.bbdesigner$(o.target).val()).length?(e.addClass("bbi-designer-close").removeClass("bbi-designer-search"),t.data("BoldBIDashboardListBox").model.allowVirtualScrolling?(t.data("BoldBIDashboardListBox").option("query",(new BoldBIDashboard.Query).where("Name",BoldBIDashboard.FilterOperators.contains,o,!0)),this.refreshColumnList(),a=this.filterItems(t.data("BoldBIDashboardListBox").model.dataSource.dataSource.json,o)):(a=this.filterItems(t.data("BoldBIDashboardListBox").model.dataSource,o),t.BoldBIDashboardListBox("hideAllItems"),t.BoldBIDashboardListBox("showItemsByIndices",a)),this.setDisplayForListElements(i,0===a.length)):(this.showAllItemsForListBox(t),this.setDisplayForListElements(i)))},e.prototype.showAllItemsForListBox=function(e){e.data("BoldBIDashboardListBox").model.allowVirtualScrolling?e.data("BoldBIDashboardListBox").option("query",new BoldBIDashboard.Query):e.BoldBIDashboardListBox("showAllItems")},e.prototype.setDisplayForListElements=function(e,t){(e?(this.functionListTd.css("display",!BoldBIDashboard.isNullOrUndefined(t)&&t?"none":"block"),this.functionNoDataContainer):(this.columnListTd.css("display",!BoldBIDashboard.isNullOrUndefined(t)&&t?"none":"block"),this.columnNoDataContainer)).css("display",!BoldBIDashboard.isNullOrUndefined(t)&&t?"block":"none")},e.prototype.onSearchBlur=function(e,t,i){0===this.bbdesigner$(i.target).val().length&&(e.addClass("bbi-designer-search").removeClass("bbi-designer-close"),this.bbdesigner$(i.target).val(""),this.showAllItemsForListBox(t))},e.prototype.onSearchCloseClick=function(e,t,i,o){i.val(""),this.showAllItemsForListBox(t),e.addClass("bbi-designer-search").removeClass("bbi-designer-close"),this.setDisplayForListElements(o),this.refreshSearchListScroller(t)},e.prototype.refreshSearchListScroller=function(e){e=e.data("BoldBIDashboardListBox");BoldBIDashboard.isNullOrUndefined(e)||e.scrollerObj.refresh()},e.prototype.filterItems=function(e,t){var i,o=[];if(!BoldBIDashboard.isNullOrUndefined(e))for(i=0;i<e.length;i++)""!==t&&-1===e[i].Name.toLowerCase().search(t.toLowerCase())||o.push(i);return o},e.prototype.enableButton=function(e,t){BoldBIDashboard.DashboardUtil.buttonEnable(e,t)},e.prototype.txtNameChanged=function(){var e=this.textBox.val(),t=this.expressionContainer.data("e-exp");e!==this.oldExpName?t&&t.isEdit&&e!==t.name||(t&&!t.isEdit||BoldBIDashboard.isNullOrUndefined(t))&&0!==e.length?this.enableButton(this.saveBtnTag,!0):this.enableButton(this.saveBtnTag,!1):(t&&t.isEdit&&e===t.name||(t&&!t.isEdit||BoldBIDashboard.isNullOrUndefined(t))&&0===e.length)&&this.enableButton(this.saveBtnTag,!1),this.oldExpName=e},e.prototype.txtExpChanged=function(){var e=this.textArea.val(),t=this.expressionContainer.data("e-exp");e!==this.oldVal||BoldBIDashboard.isNullOrUndefined(t)||!t.isEdit?(t&&t.isEdit&&e!==t.expression||t&&!t.isEdit||BoldBIDashboard.isNullOrUndefined(t))&&0!==e.length?(this.enableButton(this.saveBtnTag,!0),this.enableButton(this.addBtnTag,!1)):t.isEdit&&e===t.expression?(this.enableButton(this.addBtnTag,this.isAddButtonEnabled),this.enableButton(this.saveBtnTag,!1)):(this.enableButton(this.saveBtnTag,!1),this.enableButton(this.addBtnTag,!1)):(t&&t.isEdit&&e===t.expression||(t&&!t.isEdit||BoldBIDashboard.isNullOrUndefined(t))&&0===e.length)&&this.enableButton(this.saveBtnTag,!1),this.oldVal=e},e.prototype.updateTextArea=function(){var e=this.textArea.val();e&&0<e.length?e!==this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&this.textArea.removeClass("bbi-designer-txtmark"):this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark")},e.prototype.updateTextBox=function(){var e=this.textBox.val();e&&0<e.length?e!==this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&this.textBox.removeClass("bbi-designer-txtmark"):this.textBox.val(this.nameWaterMark).addClass("bbi-designer-txtmark")},e.prototype.addExpression=function(){this.resetSearchBox(),this.requestValidation(!0);var e=this.textBox.val();this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e))[0]})},e.prototype.requestValidation=function(e,t){var i,o=this.expressionContainer.data("e-exp"),a=this.textArea.val().trim();o&&o.isEdit?((i=this.textBox.val())===this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&(i=""),a===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&(a=""),this.hasExpChanges(o,a)?i&&0===i.length||a&&0===a.length||!this.isValidName(i)||!/^[a-zA-Z0-9- _]*$/.test(i)?e?this.newExpression():this.expListClick(t):this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{method:"updateExpressionInfo",instance:this,dataInfo:{name:e?i:t,isSelectionChange:!e}}):e?this.switchEditExp():this.expListClick(t)):o&&!o.isEdit||BoldBIDashboard.isNullOrUndefined(o)?"Query Expression"!==a?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"clearExpression",dataInfo:e?null:{isSelectionChange:!0,name:t},instance:this}):e?this.clearExpression(!1):this.expListClick(t):e?this.newExpression():this.expListClick(t)},e.prototype.clearExpression=function(e,t){var i;BoldBIDashboard.isNullOrUndefined(t)?e?(this.isAdd=!0,this.saveExpression()):(i=this.getAvailableName(),this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark"),this.textBox.val(i),this.updateTextBox(),this.enableButton(this.saveBtnTag,!1),this.enableButton(this.addBtnTag,!1)):e?this.saveExpression(t):(i=this.getAvailableName(),this.removeExpression(i),this.expListClick(t.name))},e.prototype.deleteEmtyExp=function(){var s=this,e=this.expLiTag.find("li"),n=null;e.each(function(e,t){for(var i=s.bbdesigner$(t).find(".e-list-text").text(),o=!0,a=0;a<s.queryExp.length;a++)if(i===s.queryExp[a].name){o=!1;break}o&&(n=s.bbdesigner$(t))}),n&&n.remove()},e.prototype.getEmptyExp=function(){var s=this,e=this.expLiTag.find("li"),n=null,r=this.bbdesigner$;return e.each(function(e,t){for(var i=r(t).find(".e-list-text").text(),o=!0,a=0;a<s.queryExp.length;a++)if(i===s.queryExp[a].name){o=!1;break}o&&(n=i)}),n},e.prototype.switchEditExp=function(){var s=this,e=this.expLiTag.find("li"),n=!0,r=this.bbdesigner$;e.each(function(e,t){for(var i=r(t).find(".e-list-text").text(),o=!0,a=0;a<s.queryExp.length;a++)if(i===s.queryExp[a].name){o=!1;break}o&&(n=!1,s.expListClick(i))}),n&&this.newExpression()},e.prototype.hasExpChanges=function(e,t){for(var i=0;i<this.queryExp.length;i++)if(this.queryExp[i].name===e.name&&-1===t.indexOf("["+this.queryExp[i].name+"]")&&(this.queryExp[i].name!==this.textBox.val()||this.queryExp[i].expression!==t))return!0;return!1},e.prototype.newExpression=function(){var e=this.getAvailableName();this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark"),this.textBox.val(e),this.updateTextBox(),this.expressionContainer.data("e-exp",{isEdit:!1,name:""}),this.appendExpList(e),this.enableButton(this.saveBtnTag,!1),this.enableButton(this.addBtnTag,!1),this.UpdateMiscellaneousList()},e.prototype.updateExpressionInfo=function(e,t){this.textBox.val();e?t.isSelectionChange?this.expressionContainer.data("e-exp").isEdit?this.expressionValidation(ExpAction.Edit,t.isSelectionChange,t.name):this.expressionValidation(ExpAction.New,t.isSelectionChange,t.name):this.expressionValidation(ExpAction.Save):t.isSelectionChange?this.expListClick(t.name):(this.switchEditExp(),e=this.textBox.val(),this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e))[0]}))},e.prototype.isValidName=function(e){for(var t=this.expressionContainer.data("e-exp"),i=0;i<this.queryExp.length;i++)if(this.queryExp[i].name===e&&(BoldBIDashboard.isNullOrUndefined(t)||t.isEdit&&t.name!==e))return!1;return!0},e.prototype.getAvailableName=function(){for(var e,t="Expression",i=[],o=0;o<this.queryExp.length;o++)i.push(this.queryExp[o].name);for(e=0;-1!==i.indexOf(t+ ++e););return t+e},e.prototype.populateExpressions=function(){if(0<this.expLiTag.children().length&&this.expLiTag.empty(),!BoldBIDashboard.isNullOrUndefined(this.queryExp)&&0<this.queryExp.length){for(var e=0;e<this.queryExp.length;e++)this.appendExpList(this.queryExp[e].name);this.enableButton(this.addBtnTag,!0)}this.scrollerRefresh(this.bodyContainer)},e.prototype.updateExpList=function(e,t){var i=BoldBIDashboard.DashboardUtil.escapeSelector(e),o=BoldBIDashboard.DashboardUtil.escapeSelector(t);this.dashboardDesigner.element.find("#"+this.id+"_li_"+o).remove(),this.dashboardDesigner.element.find("#"+this.id+"_li_"+i).unbind("click",this.bbdesigner$.proxy(this.expressionSelection,this,e)),this.dashboardDesigner.element.find("#"+this.id+"_"+i).unbind("click",this.bbdesigner$.proxy(this.removeExpression,this,e)),this.dashboardDesigner.element.find("#"+this.id+"_li_"+i+" .e-list-text").text(t),this.addTooltip(this.dashboardDesigner.element.find("#"+this.id+"_li_"+i+" .e-list-text"),t),this.dashboardDesigner.element.find("#"+this.id+"_li_"+i).attr("id",this.id+"_li_"+o),this.dashboardDesigner.element.find("#"+this.id+"_"+i).attr("id",this.id+"_"+o),this.dashboardDesigner.element.find("#"+this.id+"_li_"+o).bind("click",this.bbdesigner$.proxy(this.expressionSelection,this,t)),this.dashboardDesigner.element.find("#"+this.id+"_"+o).bind("click",this.bbdesigner$.proxy(this.removeExpression,this,t))},e.prototype.appendExpList=function(e,t){var i=BoldBIDashboard.DashboardUtil.escapeSelector(e),o=BoldBIDashboard.buildTag("li.e-user-select e-list e-state-default e-list-check bbi-designer-exp-list","",{},{id:this.id+"_li_"+i,name:e}),a=BoldBIDashboard.buildTag("a.e-chevron-right_01 bbi-remove-shadow","",{}),s=BoldBIDashboard.buildTag("span.e-list-text e-rel bbi-designer-content bbi-dbrd-designer-hoverable",e,{},{name:e});a.append(s),i=BoldBIDashboard.buildTag("div.e-chk-image e-icon e-cross-circle bbi-dbrd-designer-hoverable","",{},{id:this.id+"_"+i,"data-tooltip":"Delete"}),a.append(i),o.append(a),i.bind("click",this.bbdesigner$.proxy(this.removeExpression,this,e)),o.bind("click",this.bbdesigner$.proxy(this.expressionSelection,this,e)),o.bind(BoldBIDashboard.DashboardUtil.MouseEvent.mouseUp,this.bbdesigner$.proxy(this.onListItemMouseUp,this)),BoldBIDashboard.isNullOrUndefined(t)?this.expLiTag.append(o):0===t?(this.expLiTag.prepend(o),o.css({"border-bottom":"0.5px solid #c8c8c8"})):this.listContainer.find("ul>li:nth-child("+t+")").after(o),this.addTooltip(s,e),this.updateContainerBorder(),this.bodyContainer.height()>this.listContainer.height()?this.bodyContainer.find(".e-content").removeClass("e-content"):this.scrollerRefresh(this.bodyContainer)},e.prototype.addTooltip=function(e,t){BoldBIDashboard.DashboardUtil.textWidth(t,"12px Heebo")>=e.width()&&e.attr("data-tooltip",t)},e.prototype.onListItemMouseUp=function(e){var e=this.bbdesigner$(e.target).closest("li"),t=this.dashboardDesigner.bbdesigner$;e.hasClass("bbi-expression-user-selection-active")||(e.parent().children().each(function(){t(this).removeClass("bbi-expression-user-selection-active")}),e.addClass("bbi-expression-user-selection-active"),this.isAddButtonEnabled=void 0===this.addBtnTag.attr("disabled"))},e.prototype.expressionSelection=function(e){this.requestValidation(!1,e)},e.prototype.renderFunctionList=function(e){this.ejFunctionList.setModel({dataSource:e.value,fields:{id:"ID",text:"Name"},selectedIndex:0});e=this.ejFunctionList.getSelectedItems();this.optionClick(e[0]),this.resetFunction()},e.prototype.renderColumnList=function(e){var t=e.value;this.isVirtualScrollEnabled&&(t=new BoldBIDashboard.DataManager({json:e.value})),this.ejColumnList.setModel({dataSource:t,fields:{text:"Name",tooltipText:"Name"},enableWordWrap:!1,selectedIndex:0}),this.resetColumn(),this.refreshColumnList()},e.prototype.scrollerRefresh=function(e){e.data("BoldBIDashboardScroller")&&e.data("BoldBIDashboardScroller").refresh()},e.prototype.functionDblClick=function(){var e=this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_option_list").data("BoldBIDashboardListBox"),t=e.model.selectedItems,e=e.model.dataSource[t],t=null;e&&("Logical"===e.CategoryName?(t=e.Name,this.caretPosition(t)):(t=e.Name+"()",this.caretPosition(t,!0,t.length),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_desc_content").text(e.Description),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_example_content").text(e.Example)))},e.prototype.columnDblClick=function(){var e=this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_data_list").data("BoldBIDashboardListBox"),t=e.model.selectedItems,e=e.listitems[t];e&&(t=!0===e.HasDynamicParams?"@{{:"+e.Value+"}}":"["+e.Name+"]",this.caretPosition(t,!1,t.length))},e.prototype.caretPosition=function(e,t,i){var o,a,s;e&&0<e.length&&(e=-1!==e.search("RUNNING")?e.replace(")","SUM())"):e,BoldBIDashboard.isNullOrUndefined(i)||(i=-1!==e.search("RUNNING")?i+4:i),(o=this.textArea.val())!==this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")?this.textArea.removeClass("bbi-designer-txtmark"):o===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&this.textArea.val(o="").removeClass("bbi-designer-txtmark"),this.textArea.focus(),s=(a=this.textArea[0]).selectionStart,s=!BoldBIDashboard.isNullOrUndefined(i)&&t?(this.textArea.val(o.substring(0,s)+e+o.substring(s)),a.selectionEnd=s+i-1):BoldBIDashboard.isNullOrUndefined(i)||t?(this.textArea.val(o.substring(0,s)+e+o.substring(s)),a.selectionEnd=s):(this.textArea.val(o.substring(0,s)+e+o.substring(s)),a.selectionEnd=s+i),this.textArea.trigger("change"))},e.prototype.optionClick=function(e){e.data&&(this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_desc_heading").text("Description"),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_example_heading").text("Example"),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_desc_content").text(e.data.Description),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_example_content").text(e.data.Example))},e.prototype.removeNestedExpression=function(e){var t,i,o,a=[];for(this.listContainer.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e)).remove(),i=this.queryExp.length-1;0<=i;i--)(this.queryExp[i].name===e||-1<this.queryExp[i].expression.indexOf("["+e+"]"))&&(a.push(this.queryExp[i]),this.queryExp.splice(i,1));if(0<a.length)for(i=a.length-1;0<=i;i--)if(0<(t=this.removeNestedExpression(a[i].name)).length)for(o=0;o<t.length;o++)a.push(t[o]);return a},e.prototype.removeExpression=function(e){this.hasExpression(e)?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.removeExpression,this.locale.dataSource.removeExpressionText,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{expressionName:e},instance:this,method:"conformDelete"}):this.conformRemoveExpression(e)},e.prototype.conformRemoveExpression=function(e){var t,i,o,a=[],s=[];if(this.listContainer.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e)).remove(),this.updateContainerBorder(),BoldBIDashboard.isNullOrUndefined(this.queryDesigner)||(this.queryExp=this.queryDesigner.queryExp),!BoldBIDashboard.isNullOrUndefined(this.queryExp)&&0<this.queryExp.length){for(this.expressionLength=this.queryExp.length,i=this.queryExp.length-1;0<=i;i--)if(this.queryExp[i].name===e){a.push(this.queryExp[i].name),s.push(this.queryExp[i].expression),this.queryExp.splice(i,1);break}if(t=this.removeNestedExpression(e),!BoldBIDashboard.isNullOrUndefined(t)&&0<t.length)for(i=t.length-1;0<=i;i--)a.push(t[i].name),s.push(t[i].expression);this.serverValidationExp({selectedExpression:"",name:a,expression:s},ExpAction.Remove),0<(o=this.queryExp.length)?(this.expListClick(this.queryExp[o-1].name),this.deleteEmtyExp(),this.enableButton(this.addBtnTag,!0)):0===o&&0<this.expLiTag.children().length&&this.expLiTag.empty()}0===this.expLiTag.children().length&&(o=this.getAvailableName(),this.appendExpList(o),this.textBox.val(o),this.updateTextBox(),this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark"),this.expressionContainer.data("e-exp",{isEdit:!1,name:""}),this.enableButton(this.addBtnTag,!1)),this.scrollerRefresh(this.bodyContainer),this.UpdateMiscellaneousList(),o=this.textBox.val(),this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(o))[0]})},e.prototype.conformDelete=function(e,t){e&&this.conformRemoveExpression(t.expressionName)},e.prototype.hasExpression=function(e){for(var t,i,o,a=this.widgetHelper.getAllWidgets(),s=0;s<a.length;s++)if(!BoldBIDashboard.isNullOrUndefined(a[s].DataGroupInfo)&&a[s].DataGroupInfo.DataSourceID===this.dataset.Id)for(t=0;t<a[s].DataGroupInfo.FieldContainers.length;t++)for(i=a[s].DataGroupInfo.FieldContainers[t],o=0;o<i.FieldInfos.length;o++)if(e===i.FieldInfos[o].Name)return!0;return!1},e.prototype.expListClick=function(e){for(var t,i=!1,o=0;o<this.queryExp.length;o++)if(e===this.queryExp[o].name){this.textBox.val(this.queryExp[o].name),this.textArea.val(this.queryExp[o].expression),this.updateTextBox(),this.updateTextArea(),this.textArea.focus(),(t=this.textArea[0]).selectionStart=t.selectionEnd=this.queryExp[o].expression.length,this.expressionContainer.data("e-exp",{isEdit:!0,name:this.queryExp[o].name,expression:this.queryExp[o].expression}),this.enableButton(this.saveBtnTag,!(i=!0));break}i||(this.textBox.val(e),this.updateTextBox(),this.textArea.val(this.expWaterMark).addClass("bbi-designer-txtmark"),this.enableButton(this.saveBtnTag,!1),this.enableButton(this.addBtnTag,!1),this.expressionContainer.data("e-exp",null)),this.UpdateMiscellaneousList()},e.prototype.updateContainerBorder=function(){this.listContainer.css("border-top-width",0===this.listContainer.find("li").length?"0px":"1px")},e.prototype.wiredEvents=function(){this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_option_list").bind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.functionDblClick,this)),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_data_list").bind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.columnDblClick,this)),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_closebutton").on("click",this.bbdesigner$.proxy(this.closeDialog,this))},e.prototype.unWiredEvents=function(){this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_option_list").unbind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.functionDblClick,this)),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_data_list").unbind(BoldBIDashboard.isTouchDevice()?"doubletap":"dblclick",this.bbdesigner$.proxy(this.columnDblClick,this)),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_closebutton").unbind("click",this.bbdesigner$.proxy(this.closeDialog,this)),BoldBIDashboard.isNullOrUndefined(this.functionSearchBox)||(this.functionSearchBox.off("keyup",this.bbdesigner$.proxy(this.onSearchText,this)),this.functionSearchBox.off("blur",this.bbdesigner$.proxy(this.onSearchBlur,this))),BoldBIDashboard.isNullOrUndefined(this.columnSearchBox)||(this.columnSearchBox.off("keyup",this.bbdesigner$.proxy(this.onSearchText,this)),this.columnSearchBox.off("blur",this.bbdesigner$.proxy(this.onSearchBlur,this))),BoldBIDashboard.isNullOrUndefined(this.expSearchIcon)||this.expSearchIcon.off("click",this.bbdesigner$.proxy(this.onSearchCloseClick,this))},e.prototype.openExpression=function(e,t,i,o){this.callBackModel=i,this.queryDesigner=this.dashboardDesigner.modules.queryDesigner,this.dataset=i.optionalArgs.dataset,this.ejExpDialog.open(),this.resetDesigner(!0),this.queryExp=e,this.isFromQueryDesigner=o,this.tempExp=this.bbdesigner$.extend(!0,[],e),i=new BoldBIDashboard.Dashboard.ExpressionDialogModel,o=new BoldBIDashboard.Dashboard.ExpressionHelper,i.FunctionUI={Selected:BoldBIDashboard.Dashboard.FieldName.All,State:0},i.Datasource=o.getMultipleData();var a,s,n,r,l,d,h=(i=t.beforeExpressionDialogOpen(i,"function")).Datasource,p=[],c=[];if(1<h.length){for(a=[],l=0;l<h.length;l++)a=a.concat(h[l].Value);for(a.sort(function(e,t){return e.ID>t.Name?1:t.Name>e.ID?-1:0}),s=0;s<a.length;s++)-1===c.indexOf(a[s].ID)&&(c.push(a[s].ID),p.push(a[s]));i.Datasource.unshift({ID:0,Name:BoldBIDashboard.Dashboard.FieldName.All,Value:p})}if(this.ejFunctionDropdown.setModel({fields:{id:"ID",text:"Name",value:"Value"},dataSource:i.Datasource,enabled:i.FunctionUI.State===BoldBIDashboard.Dashboard.State.Enable}),this.ejFunctionDropdown.selectItemByText(i.FunctionUI.Selected),e=new BoldBIDashboard.Dashboard.ExpressionDialogModel,o=new BoldBIDashboard.Dashboard.ExpressionHelper,e.FunctionUI={Selected:BoldBIDashboard.Dashboard.FieldName.All,State:0},i=BoldBIDashboard.Dashboard.ConnectionHelper.isHierarchicalConnection(t)?BoldBIDashboard.DashboardUtil.getFieldUsingTableType(this.callBackModel.optionalArgs.tableType||this.fillFieldItems(this.dataset)):this.getFields(),this.updateDashboardParameters(i),e.Datasource=o.getMultipleColumnData(i),r=[],1<(n=(e=t.beforeExpressionDialogOpen(e,"column")).Datasource).length){for(l=0;l<n.length;l++)"Parameters"!==n[l].Name&&(r=r.concat(n[l].Value));r.sort(function(e,t){return e.ID>t.ID?1:t.ID>e.ID?-1:0}),this.isVirtualScrollEnabled=100<r.length,e.Datasource.unshift({ID:0,Name:BoldBIDashboard.Dashboard.FieldName.All,Value:r})}d=this,setTimeout(function(e){d.isVirtualScrollEnabled?d.ejColumnList.setModel({allowVirtualScrolling:!0,virtualScrollMode:"continuous",itemRequestCount:100}):d.ejColumnList.option("allowVirtualScrolling",!1),d.ejColumnDropdown.setModel({fields:{id:"ID",text:"Name",value:"Value"},dataSource:e.Datasource,enabled:!0}),d.ejColumnDropdown.selectItemByText(e.FunctionUI.Selected),0<d.queryExp.length?(d.populateExpressions(),d.expListClick(d.queryExp[0].name)):d.newExpression();e=d.textBox.val();d.onListItemMouseUp({target:d.dashboardDesigner.element.find("#"+d.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(e))[0]}),d.refreshListScroller()},100,e)},e.prototype.fillFieldItems=function(e){var t=this,i=[];return e.Fields.forEach(function(e){e.IsExpression||e.IsParameterField||i.push(t.ConvertDatasetToTabletype(e))}),i},e.prototype.ConvertDatasetToTabletype=function(e){return{DataType:e.TypeName,DefaultDataType:e.TypeName,IsExpression:e.IsExpression,IsAggregatedExpression:e.IsAggregatedExpression,ID:e.Id,Name:e.Name,ChildFields:e.ChildFields}},e.prototype.getFields=function(){return BoldBIDashboard.isNullOrUndefined(this.callBackModel.optionalArgs.tableType)?this.fillFieldItems(this.dataset):this.bbdesigner$.extend(!0,[],this.callBackModel.optionalArgs.tableType)},e.prototype.updateDashboardParameters=function(s){var t,n,r,l=this,e=this.bbdesigner$.extend(!0,{},this.dataset),i=(e.Query.DashboardParameters=this.dataset.Query.DashboardParameters,[]);return i.push(e),this.dashboardDesigner.rdlParser.rdlJsonObj.DataSets.forEach(function(e){e.Id!==i[0].Id&&i.push(l.bbdesigner$.extend(!0,{},e))}),t=this,i.forEach(function(e){BoldBIDashboard.isNullOrUndefined(e)||BoldBIDashboard.isNullOrUndefined(e.Query)||BoldBIDashboard.isNullOrUndefined(e.Query.DashboardParameters)||(n=e.Id===l.callBackModel.optionalArgs.datasourceInfo.Id,e.Query.DashboardParameters=!n||BoldBIDashboard.isNullOrUndefined(t.queryDesigner)||BoldBIDashboard.isNullOrUndefined(t.queryDesigner.queryParamCollection)||0===t.queryDesigner.queryParamCollection.length&&!t.isFromQueryDesigner?e.Query.DashboardParameters:t.queryDesigner.queryParamCollection,r=e.Name,e.Query.DashboardParameters.forEach(function(e){var t,i,o=e.ParameterName,a=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DynamicParameterDataType,e.DataType),a=e.DataType===DynamicParameterDataType.Number?"integer":a;switch(e.Mode){case ParameterMode.Literal:t=e.LiteralModeInfo,!BoldBIDashboard.isNullOrUndefined(t.StartValue)&&!BoldBIDashboard.isNullOrUndefined(t.EndValue)||!BoldBIDashboard.isNullOrUndefined(t.RangeStartDate)&&!BoldBIDashboard.isNullOrUndefined(t.RangeEndDate)||!BoldBIDashboard.isNullOrUndefined(t.RelativeDateItems)?(t=o+".START",i=o+".END",s.push(l.getParamItems(n?t:t+" ("+r+")",n?t:r+"."+t,a)),s.push(l.getParamItems(n?i:i+" ("+r+")",n?i:r+"."+i,a))):s.push(l.getParamItems(n?o:o+" ("+r+")",n?o:r+"."+o,a));break;case ParameterMode.List:s.push(l.getParamItems(n?o:o+" ("+r+")",n?o:r+"."+o,a))}l.addItemIntoFieldListWithIgnoreQuotesSyntax(e,n,r,s)}))}),s.push(this.getParamItems(this.locale.userParameter.fullName,"CURRENTUSER.FULLNAME","String"),this.getParamItems(this.locale.userParameter.email,"CURRENTUSER.EMAIL","String"),this.getParamItems(this.locale.userParameter.tenantURL,"CURRENT.SITEURL","String"),this.getParamItems(this.locale.defaultParameter.browserCulture,"CURRENT.BROWSERCULTURE","String")),this.dashboardDesigner.model.environment!==BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(BoldBIDashboard.Environment,BoldBIDashboard.Environment.cloud)&&s.push(this.getParamItems(this.locale.userParameter.siteIdentifier,"CURRENT.SITEIDENTIFIER","String")),s},e.prototype.addItemIntoFieldListWithIgnoreQuotesSyntax=function(e,t,i,o){var a,s,n;BoldBIDashboard.isNullOrUndefined(e)||(a=e.ParameterName,e.DataType!==DynamicParameterDataType.Date&&e.DataType!==DynamicParameterDataType.String)||(n=e.Mode===ParameterMode.Literal&&e.LiteralModeInfo.SelectionType===SelectionType.Range,e=BoldBIDashboard.DashboardDesignerUtility.Serialization.enumToString(DynamicParameterDataType,e.DataType),n?(n=a+".START.IGNOREQUOTES",s=a+".END.IGNOREQUOTES",o.push(this.getParamItems(t?n:n+" ("+i+")",t?n:i+"."+n,e)),o.push(this.getParamItems(t?s:s+" ("+i+")",t?s:i+"."+s,e))):(n=a+".IGNOREQUOTES",o.push(this.getParamItems(t?n:n+" ("+i+")",t?n:i+"."+n,e))))},e.prototype.getParamItems=function(e,t,i){return{Name:e,Value:t,DataType:i,IsExpression:!1,IsDynamicParam:!0}},e.prototype.refreshListScroller=function(){this.ejFunctionList.scrollerObj.model.scrollTop=0,this.ejColumnList.scrollerObj.model.scrollTop=0,this.ejFunctionList.refresh(!0),this.refreshColumnList()},e.prototype.refreshColumnList=function(){this.ejColumnList.model.allowVirtualScrolling&&(this.ejColumnList._oldStartValue=null,this.ejColumnList.model.totalItemsCount=0,this.ejColumnList.dummyUl=this.bbdesigner$()),this.ejColumnList.refresh(!0)},e.prototype.confirmAction=function(e){var t;e?(e=this.textBox.val(),(t=(new BoldBIDashboard.DashboardDesignerUtility.ExpressionParsor).parseErrors(this.textArea.val(),this.provider))&&0<t.length?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.failedToParseExp,IconType.errors,AlertType.Alert,!0,t[0]):this.isAvaliableNames(e)?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""):this.serverValidationExp({selectedExpression:""===this.expressionContainer.data("e-exp").name?this.textBox.val():this.expressionContainer.data("e-exp").name,name:this.textBox.val(),expression:this.textArea.val()},ExpAction.Close)):(this.ejExpDialog.close(),this.excuteExpQuery(),this.hideExpIndicator())},e.prototype.closeConfirmation=function(){var e,t,i;BoldBIDashboard.isNullOrUndefined(this.queryDesigner)||this.queryDesigner.updateCurrentSessionTime(),(e=this.expressionContainer.data("e-exp"))&&e.isEdit?(t=this.textBox.val(),i=this.textArea.val().trim(),t===this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&(t=""),i===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&(i=""),!this.hasExpChanges(e,i)||t&&0===t.length||i&&0===i.length||!this.isValidName(t)||!/^[a-zA-Z0-9- _]*$/.test(t)?(this.ejExpDialog.close(),this.excuteExpQuery(),this.hideExpIndicator()):this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this,dataInfo:{name:t}})):"Query Expression"!==this.textArea.val()&&""!==this.textArea.val()?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.SaveExpression,this.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this,dataInfo:{name:this.textBox.val()}}):(this.ejExpDialog.close(),this.excuteExpQuery(),this.hideExpIndicator())},e.prototype.closeExpDialog=function(e){e.isInteraction&&(this.bbdesigner$("#"+this.id+"_exp_designer_div_WaitingPopup").is(":visible")?(this.hideExpIndicator(),e.cancel=!1,this.excuteExpQuery()):(e.cancel=!0,this.closeConfirmation()))},e.prototype.closeExpression=function(){BoldBIDashboard.isNullOrUndefined(this.queryDesigner)||this.queryDesigner.updateCurrentSessionTime(),this.resetSearchBox(),this.closeConfirmation()},e.prototype.excuteExpQuery=function(){BoldBIDashboard.DashboardUtil.isEqualObj(this.queryExp,this.tempExp)||BoldBIDashboard.DashboardUtil.invokeMethod(this.callBackModel.callBackInstance,this.callBackModel.callBackMethod,[{isWindowClose:!0,queryExp:this.queryExp}]),this.tempExp=[]},e.prototype.resetDesigner=function(e){e&&0<this.expLiTag.children().length&&(this.expLiTag.empty(),this.scrollerRefresh(this.bodyContainer)),this.textBox.val(""),this.textArea.val(""),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_desc_heading").text(""),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_example_heading").text(""),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_desc_content").text(""),this.dashboardDesigner.element.find("#"+this.id+"_exp_designer_example_content").text("")},e.prototype.saveExpression=function(e){BoldBIDashboard.isNullOrUndefined(this.queryDesigner)||this.queryDesigner.updateCurrentSessionTime(),this.resetSearchBox(),this.expressionContainer.data("e-exp")&&this.expressionContainer.data("e-exp").isEdit?e&&e.isSelectionChange?this.expressionValidation(ExpAction.Edit,e.isSelectionChange,e.name):this.expressionValidation(ExpAction.Edit):e&&e.isSelectionChange?this.expressionValidation(ExpAction.New,e.isSelectionChange,e.name):this.expressionValidation(ExpAction.New)},e.prototype.expressionValidation=function(e,t,i){var o,a,s=this.expressionContainer.data("e-exp"),n=this.textBox.val(),r=this.textArea.val().trim();this.textArea.val(r),o=!1,n===this.nameWaterMark&&this.textBox.hasClass("bbi-designer-txtmark")&&(n=""),r===this.expWaterMark&&this.textArea.hasClass("bbi-designer-txtmark")&&(r=""),BoldBIDashboard.isNullOrUndefined(n)||0!==n.length?BoldBIDashboard.isNullOrUndefined(r)||0!==r.length?this.isValidName(n)?!1===/^[a-zA-Z0-9- _]*$/.test(n)?(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.expHasSpecialChar,IconType.warning,AlertType.Alert,!1,""),o=!0):-1!==r.indexOf("["+n+"]")?(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.expNotInColumn,IconType.errors,AlertType.Alert,!1,""),o=!0):this.isBalanceBrackets(r)?this.isAvaliableNames(n)?(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""),o=!0):(-1<r.replace(new RegExp("s"),"").toUpperCase().indexOf("TOTAL(")||this.rowExpression.some(function(e){return-1<r.replace(new RegExp("s"),"").toUpperCase().indexOf(e+"(")}))&&!this.isValidRunningExpression(r)?o=!0:/UNNEST\(STRING_TO_ARRAY\(/i.test(r)?(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpression,this.locale.dataSource.unnestExresssion,IconType.warning,AlertType.Alert,!1,""),this.textArea.val(""),o=!0):/FILTER\s*\(\s*WHERE/gi.test(r)?(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpression,this.locale.dataSource.filterWhereExpression,IconType.warning,AlertType.Alert,!1,""),this.textArea.val(""),o=!0):/ARRAY_AGG/gi.test(r)||/STRING_TO_ARRAY/gi.test(r)?(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpression,this.locale.dataSource.arrayTypeExpression,IconType.warning,AlertType.Alert,!1,""),this.textArea.val(""),o=!0):/COUNT\s*\(\s*DISTINCT\s*\(/i.test(r)?(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpression,this.locale.dataSource.countDistinctExpression,IconType.warning,AlertType.Alert,!1,""),this.textArea.val(""),o=!0):s&&s.isEdit?(a=(new BoldBIDashboard.DashboardDesignerUtility.ExpressionParsor).parseErrors(r,this.provider))&&0<a.length?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",a[0],IconType.errors,AlertType.Alert,!1,""):this.serverValidationExp({selectedExpression:s.name,name:n,expression:r,isSelectionChange:t,selectedExp:i},e):(a=(new BoldBIDashboard.DashboardDesignerUtility.ExpressionParsor).parseErrors(r,this.provider))&&0<a.length?(this.isAdd=!1,this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",this.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!0,a[0])):this.serverValidationExp({selectedExpression:"",name:n,expression:r,isSelectionChange:t,selectedExp:i},e):(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.invalidExpSyntax,IconType.errors,AlertType.Alert,!1,""),o=!0):(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""),o=!0):(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.emptyExp,IconType.warning,AlertType.Alert,!1,""),o=!0):(this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidExpressionName,this.locale.dataSource.emptyExpName,IconType.warning,AlertType.Alert,!1,""),o=!0),t&&o&&this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(s.name))[0]})},e.prototype.isAvaliableNames=function(e){for(var t=this.expressionContainer.data("e-exp"),i=this.ejColumnDropdown.model.dataSource[0].Value,o=0;o<i.length;o++)if(i[o].Name.toLowerCase()===e.toLowerCase()&&t.name.toLowerCase()!==e.toLowerCase())return!0;return!1},e.prototype.isValidRunningExpression=function(e){for(var t,i,o,a,s,n,r,l,d,h=this,p=!0,c=e,u=this.ejColumnDropdown.model.dataSource[0].Value,g=0;g<u.length;g++)t=u[g].Name,-1<c.indexOf("["+t+"]")&&!0===/^[a-zA-Z0-9- _]*$/.test(t)&&(c=c.replace("["+t+"]",""));if(i=null,-1<c.replace(new RegExp("s"),"").toUpperCase().indexOf("TOTAL(")&&(i=c.replace("TOTAL","").toUpperCase().split("[+-*/]+")).forEach(function(t){h.rowExpression.some(function(e){return-1<t.indexOf(e)})&&(p=!1,h.dashboardDesigner.modules.util.alertDialog(h.locale.alertDialogTitle.queryExpression,h.locale.dataSource.errorMessageForTotalExpressionContainsRowExpression,IconType.warning,AlertType.Alert,!1,""))}),p){for(this.rowExpression.forEach(function(e){-1<c.replace(new RegExp("s"),"").toUpperCase().indexOf(e+"(")&&(i=c.toUpperCase().replace(e,"").split("[+-*/]+"))}),o=0,a=i;o<a.length;o++)for(s=a[o],p=!1,n=!isNaN(parseInt(s.replace("(","").replace(")",""),10)),r=0,l=this.aggregationList.filter(function(e){return"TOTAL"!==e||"RUNNINGSUM"!==e||"RUNNINGAVG"!==e||"RUNNINGCOUNT"!==e||"RUNNINGMAX"!==e||"RUNNINGMIN"!==e});r<l.length;r++)if(d=l[r],-1<s.toString().replace(new RegExp("s"),"").toUpperCase().indexOf(d)||n){p=!0;break}p||this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.parameterMustBeAnAggregated,IconType.warning,AlertType.Alert,!1,"")}return p},e.prototype.isBalanceBrackets=function(e){for(var t=0,i=!1,o=0;o<e.length;o++){if(i||"("!==e[o]?i||")"!==e[o]||t--:t++,t<0)return!1;"'"!==e[o]||0!==o&&"\\"===e[o-1]||(i=!i)}return!(0<t)},e.prototype.UpdateMiscellaneousList=function(){for(var e,t,i=this.ejColumnDropdown.model.dataSource[0].Value,o=this.ejColumnDropdown.model.dataSource[this.ejColumnDropdown.model.dataSource.length-1].Value,a=o.length,s=!1,n=0;n<a;n++)!function(t){var e=i.indexOf(i.filter(function(e){return e.Name===o[t].Name})[0]);-1<e&&i.splice(e,1)}(n);for(n=0;n<a;n++)o.pop();for(n=0;n<this.queryExp.length;n++){for(s=!(e={ID:i.length+n,Name:this.queryExp[n].name,Value:this.queryExp[n].expression,DataType:null}),t=0;t<i.length;t++)if(i[t].Name===e.Name){s=!0;break}s||i.push(e),o.push(e)}this.ejColumnDropdown.model.dataSource[0].Value=i,this.ejColumnDropdown.model.dataSource[this.ejColumnDropdown.model.dataSource.length-1].Value=o,this.refreshColumnList()},e.prototype.encrptDataSourceInfo=function(e){e=this.bbdesigner$.extend(!0,{},e);return e.ConnectionProperties&&(e.ConnectionProperties.ConnectString=BoldBIDashboard.DashboardUtil.encryptData(e.ConnectionProperties.ConnectString),e.ConnectionProperties.UserName&&(e.ConnectionProperties.UserName=BoldBIDashboard.DashboardUtil.encryptData(e.ConnectionProperties.UserName)),e.ConnectionProperties.PassWord)&&(e.ConnectionProperties.PassWord=BoldBIDashboard.DashboardUtil.encryptData(e.ConnectionProperties.PassWord)),e},e.prototype.serverValidationExp=function(e,t){var i=this.dataset.Name,o=this.dataset.Id,a=this.callBackModel.optionalArgs.isEdit,s=this.encrptDataSourceInfo(this.callBackModel.optionalArgs.datasourceInfo);this.dashboardDesigner.modules.util.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.executeQuery,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.DataDesignViewAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.executeQuery,datasource:s,commandType:CommandMode.Text,dataSetName:i,dataSetId:o,ExpAction:t,isExpression:!0,selectedExpression:e.selectedExpression,Expression:e.name,DisplayText:e.expression,isEdit:a,isQueryDesignerMode:this.dashboardDesigner.isQueryDesignerMode})},{fnction:this.bbdesigner$.proxy(this.expActionResult,this,{expression:e,action:t}),indicator:[this.bbdesigner$.proxy(this.showExpIndicator,this),this.bbdesigner$.proxy(this.hideExpIndicator,this)]},!0)},e.prototype.expActionResult=function(e,t){var i,o,a,s,n,r,l;if(t.Error)this.enableButton(this.saveBtnTag,!0),this.enableButton(this.addBtnTag,!1),BoldBIDashboard.isNullOrUndefined(t.StatusMessage)?this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",this.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!1,""):this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.InvalidParameter+"(s)",this.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!0,t.StatusMessage),e.expression.isSelectionChange&&this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(this.textBox.val()))[0]});else if(this.ejExpDialog.isOpen()&&t&&t.type)if(t=JSON.parse(t.type),i=this.expressionContainer.data("e-exp"),0<t.length){if(o=e.expression.name,a=e.expression.expression,e.action===ExpAction.New){if(t=!0,0===this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(o)).length)s=this.getEmptyExp(),this.updateExpList(s,o);else{for(n=!0,l=0;l<this.queryExp.length;l++)if(this.queryExp[l].name===o){n=!1;break}n||(t=!1,this.dashboardDesigner.modules.util.alertDialog(this.locale.alertDialogTitle.queryExpression,this.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""))}t&&(this.queryExp.push({name:o,expression:a}),this.expressionContainer.data("e-exp",{isEdit:!0,name:o,expression:a}),this.enableButton(this.saveBtnTag,!1),this.isAdd&&(this.switchEditExp(),r=this.textBox.val(),this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(r))[0]}),this.isAdd=!1),e.expression.isSelectionChange)&&(this.expListClick(e.expression.selectedExp),r=this.textBox.val(),this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(r))[0]}))}else if(e.action===ExpAction.Edit){for(l=0;l<this.queryExp.length;l++)-1!==this.queryExp[l].expression.indexOf("["+i.name+"]")&&(this.queryExp[l].expression=this.queryExp[l].expression.replace("["+i.name+"]","["+o+"]"));for(l=0;l<this.queryExp.length;l++)if(this.queryExp[l].name===i.name){this.queryExp[l].name=o,this.queryExp[l].expression=a,BoldBIDashboard.isNullOrUndefined(this.queryDesigner)||BoldBIDashboard.isNullOrUndefined(this.queryDesigner.Query)||(this.queryDesigner.Query.QueryDesignerState.Expressions[l].Name=o,this.queryDesigner.Query.QueryDesignerState.Expressions[l].QueryExp=a,this.queryDesigner.dataset.Query.QueryDesignerState.Expressions[l].Name=o,this.queryDesigner.dataset.Query.QueryDesignerState.Expressions[l].QueryExp=a,this.queryDesigner.queryExp[l].name=o,this.queryDesigner.queryExp[l].expression=a,this.queryDesigner.dataset.dataset.Query.QueryDesignerState.Expressions[l].Name=o,this.queryDesigner.dataset.dataset.Query.QueryDesignerState.Expressions[l].QueryExp=a,this.queryDesigner.dataset.queryExp[l].name=o,this.queryDesigner.dataset.queryExp[l].expression=a),this.queryExp[l].name!==i.name&&this.updateExpList(i.name,o),this.expressionContainer.data("e-exp",{isEdit:!0,name:this.queryExp[l].name,expression:this.queryExp[l].expression}),this.enableButton(this.saveBtnTag,!1),e.expression.isSelectionChange&&(this.expListClick(e.expression.selectedExp),r=this.textBox.val(),this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(r))[0]}));break}}else if(e.action===ExpAction.Save){for(l=0;l<this.queryExp.length;l++)if(this.queryExp[l].name===i.name){this.queryExp[l].name=o,this.queryExp[l].expression=a,this.queryExp[l].name!==i.name&&this.updateExpList(i.name,o),this.enableButton(this.saveBtnTag,!1),this.switchEditExp(),r=this.textBox.val(),this.onListItemMouseUp({target:this.dashboardDesigner.element.find("#"+this.id+"_li_"+BoldBIDashboard.DashboardUtil.escapeSelector(r))[0]});break}}else if(e.action===ExpAction.Close){for(""===i.name&&this.queryExp.push({name:this.textBox.val(),expression:this.textArea.val()}),l=0;l<this.queryExp.length;l++)if(this.queryExp[l].name===i.name){this.queryExp[l].name=o,this.queryExp[l].expression=a,this.queryExp[l].name!==i.name&&this.updateExpList(i.name,o);break}this.ejExpDialog.close(),this.hideExpIndicator(),this.excuteExpQuery()}else e.action===ExpAction.Remove&&(0===this.queryExp.length?this.enableButton(this.addBtnTag,!1):this.enableButton(this.addBtnTag,!0));this.UpdateMiscellaneousList(),e.action!==ExpAction.New&&e.action!==ExpAction.Save&&e.action!==ExpAction.Edit||this.updateSuccessMessage()}else this.enableButton(this.saveBtnTag,!0)},e.prototype.updateSuccessMessage=function(){var e=this;this.dashboardDesigner.element.find("#"+this.id+"_exp_success_message_wrap").css("display","block"),setTimeout(function(){e.dashboardDesigner.element.find("#"+e.id+"_exp_success_message_wrap").css("display","none")},3e3)},e.prototype.showExpIndicator=function(){BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_add_btn"),!1),BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_save_btn"),!1),BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_close_btn"),!1),this.ejIndicator.show()},e.prototype.hideExpIndicator=function(){BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_add_btn"),!0),BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_save_btn"),!1),BoldBIDashboard.DashboardUtil.buttonEnable(this.footerTag.children("#"+this.id+"_exp_designer_close_btn"),!0),this.ejIndicator.hide()},e.prototype.destroy=function(){this.unWiredEvents(),BoldBIDashboard.DashboardUtil.destroyEjObjects(this.dashboardDesigner.element.find("#"+this.id+"_exp_designer")),0<this.dashboardDesigner.element.find("#"+this.id+"_exp_designer").length&&this.dashboardDesigner.element.find("#"+this.id+"_exp_designer").remove()},e}(),window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.QueryExpression",InternalQueryExpression,window),function(e){e[e.New=0]="New",e[e.Edit=1]="Edit",e[e.Save=2]="Save",e[e.Close=3]="Close",e[e.Remove=4]="Remove"}(ExpAction=ExpAction||{}),InternalExpressionParsor=function(){function e(){this.revfnctions={},this.expErrors=[],this.expErrors=[]}return e.prototype.parseExpression=function(e){var t,i;for(this.expression=e,this.provider="SQL",this.expErrors=[],this.parseDateExp(),this.parseNumExp(),this.parseStrExp(),this.parseCondExp(),i=(t=Object.keys(this.revfnctions)).length-1;0<=i;i--)this.revfnctions[t[i]]&&(this.expression=this.expression.split(t[i]).join(this.revfnctions[t[i]]));return this.expression},e.prototype.parseErrors=function(e,t){return this.parseExpression(e,t),this.expErrors},e.prototype.parseNumExp=function(){BoldBIDashboard.DashboardUtil.contains(this.expression,"abs(",!0)&&(this.expression=this.parseNumberExp(this.expression,"abs(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"acos(",!0)&&(this.expression=this.parseNumberExp(this.expression,"acos(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"asin(",!0)&&(this.expression=this.parseNumberExp(this.expression,"asin(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"atan(",!0)&&(this.expression=this.parseNumberExp(this.expression,"atan(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"cos(",!0)&&(this.expression=this.parseNumberExp(this.expression,"cos(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"cot(",!0)&&(this.expression=this.parseNumberExp(this.expression,"cot(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"ceil(",!0)&&(this.expression=this.parseNumberExp(this.expression,"ceil(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"degrees(",!0)&&(this.expression=this.parseNumberExp(this.expression,"degrees(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"exp(",!0)&&(this.expression=this.parseNumberExp(this.expression,"exp(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"floor(",!0)&&(this.expression=this.parseNumberExp(this.expression,"floor(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"log(",!0)&&(this.expression=this.parseNumberExp(this.expression,"log(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"mod(",!0)&&(this.expression=this.parseNumberExp(this.expression,"mod(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"pi(",!0)&&(this.expression=this.parseNumberExp(this.expression,"pi(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"power(",!0)&&(this.expression=this.parseNumberExp(this.expression,"power(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"totalpercentage(",!0)&&(this.expression=this.parseNumberExp(this.expression,"totalpercentage(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"radians(",!0)&&(this.expression=this.parseNumberExp(this.expression,"radians(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"round(",!0)&&(this.expression=this.parseNumberExp(this.expression,"round(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"sign(",!0)&&(this.expression=this.parseNumberExp(this.expression,"sign(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"sin(",!0)&&(this.expression=this.parseNumberExp(this.expression,"sin(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"sqrt(",!0)&&(this.expression=this.parseNumberExp(this.expression,"sqrt(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"tan(",!0)&&(this.expression=this.parseNumberExp(this.expression,"tan("))},e.prototype.parseNumberExp=function(e,t){var i,o,a,s,n=this.getExpCode(),r=this.trimEnd(t,"("),l=e;this.revfnctions[n]=this.updateNumberFunc(r).toUpperCase();do{}while(-1!==(s=l.toLowerCase().lastIndexOf(t))&&(o=s+t.length,i=this.getFunctionEndIndex(o,l),o=this.getParameters(l,o,i-o-1),a="",l=l.substr(0,s)+n+"("+(a="SQL"===this.provider?this.getSQLNumberExp(r,o):a)+(")"+l.substr(i))),-1!==s);return l},e.prototype.updateNumberFunc=function(e){return e},e.prototype.getSQLNumberExp=function(e,t){var i="";switch(e){case"pi":BoldBIDashboard.isNullOrUndefined(t)||this.expErrors.push("Invalid Arguments in "+e+" Expression");break;case"abs":case"acos":case"asin":case"atan":case"cos":case"cot":case"degrees":case"exp":case"floor":case"log":case"totalpercentage":case"radians":case"sign":case"sin":case"sqrt":case"tan":t&&1===t.length?i+=t[0]:this.expErrors.push("Invalid Arguments in "+e+" Expression");break;case"power":case"mod":t&&2===t.length?i+=t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in "+e+" Expression");break;case"round":t&&1===t.length?(i+=t[0],"SQL"===this.provider&&(i+=",0")):!t||1!==t.length&&2!==t.length?this.expErrors.push("Invalid Arguments in"+e+"Expression"):i+=t[0]+","+t[1]}return i},e.prototype.parseDateExp=function(){"SQL"===this.provider&&(BoldBIDashboard.DashboardUtil.contains(this.expression,"currentyear(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"currentyear(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"currentmonth(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"currentmonth(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"dateadd(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"dateadd(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"datesub(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"datesub(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"datename(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"datename(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"datepart(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"datepart(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"daydiff(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"daydiff(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"today(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"today(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"previousyear(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"previousyear(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"previousmonth(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"previousmonth(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"yesterday(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"yesterday(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"day(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"day(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"hour(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"hour(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"minute(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"minute(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"month(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"month(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"now(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"now(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"year(",!0))&&(this.expression=this.parseSQLDateExp(this.expression,"year("))},e.prototype.parseSQLDateExp=function(e,t){var i,o,a,s=this.getExpCode(),n=this.trimEnd(t,"("),r=e;this.revfnctions[s]=this.updateDateFunc(n).toUpperCase();do{}while(-1!==(a=r.toLowerCase().lastIndexOf(t))&&(o=a+t.length,i=this.getFunctionEndIndex(o,r),o=this.getParameters(r,o,i-o-1),r=("today"===n||"yesterday"===n||"currentyear"===n||"currentmonth"===n||"previousyear"===n||"previousmonth"===n?r.substr(0,a)+s:r.substr(0,a)+s+"(")+this.getSQLDateExp(n,o)+("today"===n||"yesterday"===n||"currentyear"===n||"currentmonth"===n||"previousyear"===n||"previousmonth"===n?r.substr(i):")"+r.substr(i))),-1!==a);return r},e.prototype.updateDateFunc=function(e){var t;switch(e){case"dateadd":case"datesub":t="dateadd";break;case"daydiff":t="datediff";break;case"now":t="getdate";break;case"week":case"hour":case"minute":case"datepart":t="datepart";break;case"day":case"month":case"year":case"datename":case"yesterday":case"currentyear":case"currentmonth":case"previousmonth":case"previousyear":t=e;break;case"today":t="CAST(GETDATE() AS DATE)"}return t},e.prototype.getSQLDateExp=function(e,t){var i="";switch(e){case"dateadd":t&&3===t.length?i+=t[0]+","+t[1]+","+t[2]:this.expErrors.push("Invalid Arguments in"+e+"Expression");break;case"datesub":t&&1===t.length?i+="D, 0,"+t[0]:t&&2===t.length?i+="D, -"+t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in"+e+"Expression");break;case"daydiff":t&&2===t.length?i+="D,"+t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in"+e+"Expression");break;case"week":case"hour":case"minute":t&&1===t.length?i+=e.toUpperCase()+","+t[0]:this.expErrors.push("Invalid Arguments in"+e+"Expression");break;case"datename":case"datepart":t&&1===t.length&&(i+="D,"+t[0]),t&&2===t.length?i+=t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in"+e+"Expression");break;case"day":case"month":case"year":t&&1===t.length?i+=t[0]:this.expErrors.push("Invalid Arguments in"+e+"Expression")}return i},e.prototype.parseCondExp=function(){"SQL"===this.provider&&(BoldBIDashboard.DashboardUtil.contains(this.expression,"coalesce(",!0)&&(this.expression=this.parseSQLCondExp(this.expression,"coalesce(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"ifnull(",!0)&&(this.expression=this.parseSQLCondExp(this.expression,"ifnull(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"if(",!0)&&(this.expression=this.parseSQLCondExp(this.expression,"if(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"isnull(",!0)&&(this.expression=this.parseSQLCondExp(this.expression,"isnull(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"isnotnull(",!0))&&(this.expression=this.parseSQLCondExp(this.expression,"isnotnull("))},e.prototype.parseSQLCondExp=function(e,t){var i,o,a,s,n,r=this.trimEnd(t,"("),l=e;if("ifnull"===r)l=this.parseSQLIFNullExp(e,t);else do{}while(-1!==(n=l.toLowerCase().lastIndexOf(t))&&(i=this.getExpCode(),o=n+t.length,s=this.getFunctionEndIndex(o,l),o=this.getParameters(l,o,s-o-1),a=l.substr(0,n)+i,s=l.substr(s),this.revfnctions[i]=this.getSQLCondExp(r,o),l=a+s),-1!==n);return l},e.prototype.parseSQLIFNullExp=function(e,t){var i,o,a,s=this.getExpCode(),n=this.trimEnd(t,"("),r=e;this.revfnctions[s]="ISNULL";do{}while(-1!==(a=r.toLowerCase().lastIndexOf(t))&&(o=a+t.length,i=this.getFunctionEndIndex(o,r),o=this.getParameters(r,o,i-o-1),r=r.substr(0,a)+s+"("+this.getSQLCondExp(n,o)+(")"+r.substr(i))),-1!==a);return r},e.prototype.getSQLCondExp=function(e,t){var i,o,a="";switch(e){case"if":t&&3===t.length?a+=" CASE WHEN "+t[0]+" THEN "+t[1]+" ELSE "+t[2]+" END ":this.expErrors.push("Invalid Arguments in "+e+" Expression");break;case"ifnull":t&&2===t.length?a+=t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in "+e+" Expression");break;case"isnull":t&&1===t.length?a+=" CASE WHEN "+t[0]+" IS NULL THEN 'true' ELSE 'false' END ":this.expErrors.push("Invalid Arguments in "+e+" Expression");break;case"isnotnull":t&&1===t.length?a+=" CASE WHEN "+t[0]+" IS NULL THEN 'false' ELSE 'true' END ":this.expErrors.push("Invalid Arguments in "+e+" Expression");break;case"coalesce":if(i=!0,t&&1<t.length)for(o=0;o<t.length;o++)a+=(i=o===t.length-1?!1:i)?t[o].trim()+",":t[o].trim();else this.expErrors.push("Invalid Arguments in "+e+" Expression")}return a},e.prototype.parseStrExp=function(){BoldBIDashboard.DashboardUtil.contains(this.expression,"char(",!0)&&!BoldBIDashboard.DashboardUtil.contains(this.expression,"to_char(",!0)&&(this.expression=this.parseStringExp(this.expression,"char(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"concat(",!0)&&(this.expression=this.parseStringExp(this.expression,"concat(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"contains(",!0)&&(this.expression=this.parseStringExp(this.expression,"contains(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"endswith(",!0)&&(this.expression=this.parseStringExp(this.expression,"endswith(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"initCap(",!0)&&(this.expression=this.parseStringExp(this.expression,"initCap(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"left(",!0)&&(this.expression=this.parseStringExp(this.expression,"left(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"len(",!0)&&(this.expression=this.parseStringExp(this.expression,"len(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"lower(",!0)&&(this.expression=this.parseStringExp(this.expression,"lower(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"ltrim(",!0)&&(this.expression=this.parseStringExp(this.expression,"ltrim(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"max(",!0)&&(this.expression=this.parseStringExp(this.expression,"max(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"min(",!0)&&(this.expression=this.parseStringExp(this.expression,"min(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"replace(",!0)&&!BoldBIDashboard.DashboardUtil.contains(this.expression,"_replace(",!0)&&(this.expression=this.parseStringExp(this.expression,"replace(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"right(",!0)&&(this.expression=this.parseStringExp(this.expression,"right(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"rtrim(",!0)&&(this.expression=this.parseStringExp(this.expression,"rtrim(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"startswith(",!0)&&(this.expression=this.parseStringExp(this.expression,"startswith(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"substr(",!0)&&(this.expression=this.parseStringExp(this.expression,"substr(")),BoldBIDashboard.DashboardUtil.contains(this.expression,"trim(",!0)&&(this.expression=this.parseStringExp(this.expression,"trim("))},e.prototype.parseStringExp=function(e,t){var i,o,a,s,n,r=this.getExpCode(),l=this.trimEnd(t,"("),d=e,h=!0;this.revfnctions[r]=this.updateStringFunc(l).toUpperCase();do{}while(-1!==(n=d.toLowerCase().lastIndexOf(t))&&(s=n+t.length,a=this.getFunctionEndIndex(s,d),s=this.getParameters(d,s,a-s-1),"max"!==l&&"min"!==l&&"startswith"!==l&&"endswith"!==l&&"contains"!==l||(h=!1),i=d.substr(0,n)+(h?r+"(":""),o="","SQL"===this.provider&&(o=this.getSQLStringExp(l,s)),s=(h?")":"")+d.substr(a),d="max"===l||"min"===l?i+"("+o+")"+s:i+o+s),-1!==n);return d},e.prototype.updateStringFunc=function(e){var t;switch(e){case"contains":case"endswith":case"startswith":case"max":case"min":t="";break;case"substr":t="substring";break;default:t=e}return t},e.prototype.getSQLStringExp=function(e,t){var i,o,a,s="";switch(e){case"char":case"len":case"lower":case"ltrim":case"rtrim":case"trim":case"initCap":case"upper":case"max":case"min":t&&1===t.length?s+=t[0].trim():this.expErrors.push("Invalid Arguments in "+e+" Expression");break;case"left":case"right":t&&2===t.length?s+=t[0].trim()+","+t[1].trim():this.expErrors.push("Invalid Arguments in "+e+" Expression");break;case"replace":t&&3===t.length?s+=t[0].trim()+","+t[1].trim()+","+t[2].trim():this.expErrors.push("Invalid Arguments in "+e+" Expression");break;case"concat":if(i=!0,t&&1<t.length)for(o=0;o<t.length;o++)s+=(i=o===t.length-1?!1:i)?t[o].trim()+",":t[o].trim();else this.expErrors.push("Invalid Arguments in "+e+" Expression");break;case"contains":case"endswith":case"startswith":t&&2===t.length?(a=this.customizeSingleQuoteValues(e,t[1]),s+="CASE WHEN "+t[0]+" LIKE "+a+" THEN 'true' ELSE 'false' END"):this.expErrors.push("Invalid Arguments in "+e+" Expression");break;case"substr":t&&3===t.length?s+=t[0].trim()+","+t[1].trim()+","+t[2].trim():this.expErrors.push("Invalid Arguments in "+e+" Expression")}return s},e.prototype.customizeSingleQuoteValues=function(e,t){var i,o="",a=null,s=(s=t).trim();if(BoldBIDashboard.DashboardUtil.contains(s,"'",!0))for(i=0;i<s.length;i++)"'"!==s[i]&&(o+=s[i]);if(0<o.length)switch(e){case"contains":a="'%"+o+"%'";break;case"startswith":a="'"+o+"%'";break;case"endswith":a="'%"+o+"'"}else a=s;return a},e.prototype.getParameters=function(e,t,i){var o=e.substr(t,i);if(0===o.length)return null;for(var a=0,s=!1,n=0,r=0,l=[];n<o.length;n++)s||")"!==o[n]||a--,s||"("!==o[n]||a++,(s="'"!==o[n]||0!==n&&"\\"===o[n-1]?s:!s)||0!==a||","!==o[n]||(l.push(o.substr(r,n-r)),r=n+1);return l.push(o.substr(r,n-r)),l},e.prototype.getFunctionEndIndex=function(e,t){for(var i=e,o=1,a=!1;0<o;){if(i>=t.length)throw"Invalid Expression";a||")"!==t[i]||o--,a||"("!==t[i]||o++,'"'!==t[i]&&"'"!==t[i]||0!==i&&"\\"===t[i-1]||(a=!a),i++}return i},e.prototype.getExpCode=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return"@"+e+"@"},e.prototype.trimEnd=function(e,t){t=e.lastIndexOf(t);return-1===t?e:e.trim().slice(0,t)},e}(),window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.ExpressionParsor",InternalExpressionParsor,window);