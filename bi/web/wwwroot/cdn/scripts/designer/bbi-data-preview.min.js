var BoldBIDashboard,InternalDataPreviewDialog=function(){function e(e){this.designer=null,this.gridInstance=null,this.dataSourceList={},this.searchItems=[],this.locale=null,this.designer=e,this.bbdesigner$=this.designer.bbdesigner$,this.locale=e.getLocalizationContent(),this.id=this.designer._id+"_datapreivew_mode-dialog"}return e.prototype.wireEvents=function(){this.dsPreviewTag.on("keyup","#"+this.id+"_panelSearch",this.bbdesigner$.proxy(this.onSearchDataPreviewAction,this)),this.dsPreviewTag.on("click",".bbi-dbrd-close-icon",this.bbdesigner$.proxy(this.closeDataPreviewDialog,this)),this.dsPreviewTag.on("click",".bbi-dbrd-designer-close",this.bbdesigner$.proxy(this.onSearchCloseClick,this)),this.dsPreviewTag.on("focusin","#"+this.id+"_panelSearch",this.bbdesigner$.proxy(this.onDataPreviewSearchTextFocusIn,this)),this.dsPreviewTag.on("focusout","#"+this.id+"_panelSearch",this.bbdesigner$.proxy(this.onDataPreviewSearchTextFocusOut,this)),this.bbdesigner$(window).on("resize",this.bbdesigner$.proxy(this.resizeDataPreviewWindow,this))},e.prototype.unWireEvents=function(){this.dsPreviewTag.off("keyup","#"+this.id+"_panelSearch",this.bbdesigner$.proxy(this.onSearchDataPreviewAction,this)),this.dsPreviewTag.off("click",".bbi-dbrd-close-icon",this.bbdesigner$.proxy(this.closeDataPreviewDialog,this)),this.dsPreviewTag.off("click",".bbi-dbrd-designer-close",this.bbdesigner$.proxy(this.onSearchCloseClick,this)),this.dsPreviewTag.off("focusin","#"+this.id+"_panelSearch",this.bbdesigner$.proxy(this.onDataPreviewSearchTextFocusIn,this)),this.dsPreviewTag.off("focusout","#"+this.id+"_panelSearch",this.bbdesigner$.proxy(this.onDataPreviewSearchTextFocusOut,this)),this.bbdesigner$(window).off("resize",this.bbdesigner$.proxy(this.resizeDataPreviewWindow,this))},e.prototype.renderDataPreviewContainer=function(e){this.selectedDatasourceId=this.designer.model.dataPreviewId;var t=this.dsPreviewTag=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-mode-dlg","",{width:"100%",height:"100%"},{id:this.id});this.contentWrap=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-mode-content-wrap bbi-dbrd-control bbi-dbrd-designer-scroll-style-3","",{},{id:this.id+"_content_wrap"}),this.renderContentWrapper(),this.dsPreviewTag.append(this.getHeader(),this.contentWrap),e.append(t),this.renderScrollerContainer(),this.populateDatasourceList(),this.unWireEvents(),this.wireEvents()},e.prototype.getHeader=function(){var e=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-mode-header","",{},{}),t=BoldBIDashboard.buildTag("span.bbi-dbrd-datapreview-icon","",{},{}),i=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-mode-title",this.locale.dataPreview.dataPreview,{},{}),n=BoldBIDashboard.buildTag("div.bbi-dbrd-icon-container","",{},{}),o=BoldBIDashboard.buildTag("div.bbi-dbrd-close-icon bbi-dbrd-designer-hoverable","",{},{"data-tooltip":"Close"});return n.append(o),e.append(t,i,n),e},e.prototype.renderContentWrapper=function(){var e=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-content-panel","",{width:this.designer.element.width()+"px"},{id:this.id+"_contentpanel"}),t=this.dsLeftPanel=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-datasource-list","",{width:"330px"},{id:this.id+"_left_datasource_list"}),i=this.gridRightPanel=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-grid-panel","",{width:this.designer.element.width()-331+"px"},{id:this.id+"_right_grid_container"}),n=this.gridContainer=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-grid-cotainer","",{width:this.designer.element.width()-381+"px",height:"calc(100% - 50px)"},{id:this.id+"_gridcontrol_container"}),o=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-grid-limits","",{},{id:this.id+"_datapreview_grid_record_count"});i.append(o),i.append(n),this.appendSpinningWidget(this.gridContainer),e.append(t,i),this.contentWrap.append(e),this.renderSearchPanel()},e.prototype.appendSpinningWidget=function(e){var t=BoldBIDashboard.buildTag("div.bbi-background-waiting-popup","",{display:"none",top:"0px",position:"absolute",width:"100%",height:"100%","background-color":"rgba(255, 255, 255, 0.4)","z-index":"103"}),i=BoldBIDashboard.buildTag("div.bbi-dashboard-spinning","",{});i.append(this.designer.getLoadingSvgElement("var(--datapreview-loading-indicator-color)")),t.append(i),e.append(t)},e.prototype.renderScrollerContainer=function(){this.expandablePanel=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-scroller bbi-dbrd-control bbi-dbrd-designer-panel-content-wrapper bbi-dbrd-designer-scroll-style-3","",{},{id:this.id+"_designerDataPreview"});var e=BoldBIDashboard.buildTag("div","",{},{}),t=BoldBIDashboard.buildTag("div","",{},{id:this.id+"_scrollContentDataPreview"}),i=BoldBIDashboard.buildTag("div","",{display:"none"},{id:this.id+"_datapreview_empty_msg",class:"bbi-dbrd-datapreview-empty-wrapper"}),n=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-font bbi-dbrd-datapreview-empty-msg",this.locale.dataPreview.noDatasourceFound,{},{});i.append(n),e.append(t).append(i),this.expandablePanel.append(e),this.expandablePanel.BoldBIDashboardScroller({scrollerSize:this.designer.scrollerSize.scrollSize,enableTouchScroll:!1,autoHide:!0,buttonSize:this.designer.scrollerSize.buttonSize}),this.dsLeftPanel.append(this.expandablePanel),this.updateScrollerSize(),this.expandablePanel.BoldBIDashboardWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup bbi-designer-loader",template:this.designer.getWaitingPopupTemplate()})},e.prototype.renderSearchPanel=function(){var e=BoldBIDashboard.buildTag("div.bbi-dbrd-searchpanel-container","",{},{id:this.id+"_searchPanel_container"}),t=(this.headerPanel=BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-search-panel-wrapper","",{},{id:this.id+"_dataSearchPanel"}),BoldBIDashboard.buildTag("div.bbi-dbrd-datapreview-autocomplete bbi-dbrd-datapreview-font","",{},{id:this.id+"_data_autocomplete"})),i=BoldBIDashboard.buildTag("input.bbi-autocomplete bbi-dbrd-datapreview-font bbi-dbrd-datapreview-search-box bbi-dbrd-datapreview-watermark bbi-dbrd-datapreview-boxshadow e-js e-input","",{},{type:"text",placeholder:"Search Datasource",id:this.id+"_panelSearch"}),n=BoldBIDashboard.buildTag("span.bbi-dbrd-designer-icon bbi-dbrd-designer-search","",{},{id:this.id+"_searchIcon"});t.append(i),t.append(n),this.headerPanel.append(t),e.append(this.headerPanel),this.dsLeftPanel.append(e)},e.prototype.onSearchDataPreviewAction=function(e){var t,i;BoldBIDashboard.isNullOrUndefined(e)||13===e.keyCode||(e=Object.keys(this.dataSourceList),t=this.dsPreviewTag.find("#"+this.id+"_panelSearch"),i=this.dsPreviewTag.find("#"+this.id+"_scrollContentDataPreview"),BoldBIDashboard.DashboardUtil.destroyEjObjects(i),i.empty(),0<(i=t.val()).length?(this.dsPreviewTag.find("#"+this.id+"_searchIcon").addClass("bbi-dbrd-designer-close").removeClass("bbi-dbrd-designer-search"),this.searchItems=this.getAvailablePanelItems(e,i),this.renderDataSourceListItem(!0),this.showEmptyMsgItems(0<this.searchItems.length)):(this.searchItems=[],this.dsPreviewTag.find("#"+this.id+"_searchIcon").addClass("bbi-dbrd-designer-search").removeClass("bbi-dbrd-designer-close"),this.renderDataSourceListItem(!1),this.showEmptyMsgItems(!0)))},e.prototype.onSearchCloseClick=function(e){BoldBIDashboard.isNullOrUndefined(e)||(e=this.dsPreviewTag.find("#"+this.id+"_scrollContentDataPreview"),BoldBIDashboard.DashboardUtil.destroyEjObjects(e),e.empty(),this.dsPreviewTag.find("#"+this.id+"_panelSearch").val(""),this.dsPreviewTag.find("#"+this.id+"_searchIcon").addClass("bbi-dbrd-designer-search").removeClass("bbi-dbrd-designer-close"),this.renderDataSourceListItem(!1),this.showEmptyMsgItems(!0))},e.prototype.getAvailablePanelItems=function(e,t){var i,n;if(!BoldBIDashboard.isNullOrUndefined(e)&&!BoldBIDashboard.isNullOrUndefined(t)){for(i=[],n=0;n<e.length;n++)BoldBIDashboard.DashboardUtil.contains(e[n],t,!0)&&i.push(e[n]);return i}},e.prototype.onDataPreviewSearchTextFocusIn=function(e){this.bbdesigner$(e.currentTarget.parentElement).addClass("e-focus")},e.prototype.onDataPreviewSearchTextFocusOut=function(e){e=this.bbdesigner$(e.currentTarget.parentElement);e.hasClass("e-focus")&&e.removeClass("e-focus")},e.prototype.showEmptyMsgItems=function(e){this.expandablePanel.find("#"+this.id+"_datapreview_empty_msg").css("display",e?"none":"table")},e.prototype.closeDataPreviewDialog=function(e){this.dsPreviewTag.css("display","none");e={mode:BoldBIDashboard.Designer.mode.datapreview,event:"DataPreviewModeDialogClose",source:{element:null,data:e}};this.designer._trigger("actionComplete",{eventType:BoldBIDashboard.DashboardDesignerEvent.DataPreviewModeDialogClose,data:e})},e.prototype.showDataPreviewIndicator=function(){var e=this.expandablePanel.data("BoldBIDashboardWaitingPopup");BoldBIDashboard.isNullOrUndefined(e)||e.show()},e.prototype.hideDataPreviewIndicator=function(){var e=this.expandablePanel.data("BoldBIDashboardWaitingPopup");BoldBIDashboard.isNullOrUndefined(e)||e.hide()},e.prototype.populateDatasourceList=function(){this.designer.modules.util.doAjaxPost("POST",this.designer.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.GetDatasourceList,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.DataPreviewAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.GetDatasourceList})},{fnction:this.bbdesigner$.proxy(this.GetDatasourceList,this),indicator:[this.bbdesigner$.proxy(this.showDataPreviewIndicator,this),this.bbdesigner$.proxy(this.hideDataPreviewIndicator,this)]})},e.prototype.GetDatasourceList=function(e){if(!BoldBIDashboard.isNullOrUndefined(e)&&0<e.length){for(var t=0;t<e.length;t++)this.dataSourceList[e[t].Name]=e[t].Id;this.renderDataSourceListItem()}},e.prototype.updateScrollerSize=function(){var e=this.dsPreviewTag.height()-this.headerPanel.height()-65;this.expandablePanel.height(e+"px"),this.expandablePanel.data("BoldBIDashboardScroller")&&(this.expandablePanel.data("BoldBIDashboardScroller").setModel({height:e+"px"}),this.expandablePanel.data("BoldBIDashboardScroller").refresh())},e.prototype.renderDataSourceListItem=function(e){var t,i,n,o,r,d=e?this.searchItems:Object.keys(this.dataSourceList),a=this.dsPreviewTag.find("#"+this.id+"_scrollContentDataPreview");if(0<d.length){for(i=BoldBIDashboard.buildTag("ul.bbi-dbrd-datapreview-ultag","",{},{}),n=0;n<d.length;n++)t=BoldBIDashboard.buildTag("li.bbi-dbrd-datapreview-litag","",{},{"data-tooltip":d[n],id:this.dataSourceList[d[n]]+"_litag"}),o=BoldBIDashboard.buildTag("span.bbi-dbrd-datapreview-datasource-icon","",{},{}),r=BoldBIDashboard.buildTag("div.bbi-dbrd-designer-hoverable bbi-dbrd-datapreview-name",d[n],{},{"data-tooltip":d[n],id:this.dataSourceList[d[n]]}),t.append(o,r),i.append(t),t.bind("click",this.bbdesigner$.proxy(this.loadDataSourceData,this,d[n],this.dataSourceList[d[n]]));a.append(i)}this.updateScrollerSize(),this.dsLeftPanel.find("#"+this.selectedDatasourceId+"_litag").addClass("e-active"),this.hideDataPreviewIndicator(),BoldBIDashboard.isNullOrUndefined(e)&&this.selectedDataPreivewItem()},e.prototype.selectedDataPreivewItem=function(){this.updatewaitingIndicatorPosition(),this.designer.modules.util.doAjaxPost("POST",this.designer.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.GetPreviewData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.DataPreviewAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.GetPreviewData,dataPreviewId:this.selectedDatasourceId})},{fnction:this.bbdesigner$.proxy(this.loadPreviewGrid,this),indicator:[this.bbdesigner$.proxy(this.showLoadingIndicator,this,this.gridContainer)]})},e.prototype.showLoadingIndicator=function(e){e.find(".bbi-background-waiting-popup").show()},e.prototype.hideLoadingIndicator=function(e){e.find(".bbi-background-waiting-popup").hide()},e.prototype.loadPreviewGrid=function(e){var t,i,n,o;BoldBIDashboard.isNullOrUndefined(e)||e.HasError?(this.hideLoadingIndicator(this.gridContainer),this.showControlError(this.gridContainer,e)):BoldBIDashboard.isNullOrUndefined(e.table)||BoldBIDashboard.isNullOrUndefined(e.type)||(this.removeControlError(this.gridContainer),this.gridContainer.css({display:"block"}),this.tableType=JSON.parse(e.type),t=JSON.parse(e.table),i=this.generateColumns(this.tableType),this.gridContainer.hasClass("e-datapreview-grid")?BoldBIDashboard.isNullOrUndefined(this.gridInstance)||(this.gridContainer.find(".e-griditem").show(),this.gridInstance.dataSource=t,this.gridInstance.columns=i):(this.gridContainer.addClass("e-datapreview-grid"),n=BoldBIDashboard.buildTag("div.e-griditem e-dbrd-widget bbi-dbrd-control","",{},{id:"grid_Container"}),o=BoldBIDashboard.buildTag("div.bbi-designer-grid-table","",{},{id:"ViewElement",cellspacing:"0",cellpadding:"0"}),n.append(o),this.gridContainer.append(n),ejdashboard.grids.Grid.Inject(ejdashboard.grids.Group,ejdashboard.grids.Filter,ejdashboard.grids.Page,ejdashboard.grids.Sort,ejdashboard.grids.Reorder,ejdashboard.grids.Scroll,ejdashboard.grids.Resize,ejdashboard.grids.ColumnMenu,ejdashboard.grids.ContextMenu),this.gridInstance=new ejdashboard.grids.Grid({dataSource:t,enablePersistence:!1,allowSorting:!1,allowFiltering:!1,height:"100%",width:"100%",gridLines:"Both",columns:i,dataBound:this.bbdesigner$.proxy(this.gridDataPopulated,this),actionBegin:this.bbdesigner$.proxy(this.actionBegin,this),actionComplete:this.bbdesigner$.proxy(this.actionComplete,this)}),this.gridInstance.appendTo(o[0])),e.TotalRowCount<1e3?this.designer.element.find("#"+this.id+"_datapreview_grid_record_count").html("<strong> ".concat(this.locale.dataPreview.noteText+":","  </strong> ").concat(this.locale.dataPreview.maximumRecordLimit,"  ").concat(e.TotalRowCount,"  ").concat(this.locale.dataPreview.totalRecordCount," ").concat(e.TotalRowCount," ").concat(this.locale.dataPreview.recordCountDisply)):this.designer.element.find("#"+this.id+"_datapreview_grid_record_count").html("<strong> ".concat(this.locale.dataPreview.noteText+":"," </strong> ").concat(this.locale.dataPreview.maximumRecordLimit," ").concat(this.locale.dataPreview.previewCountDefaultValue," ").concat(this.locale.dataPreview.totalRecordCount," ").concat(e.TotalRowCount," ").concat(this.locale.dataPreview.recordCountDisply)))},e.prototype.gridDataPopulated=function(){this.hideLoadingIndicator(this.gridContainer)},e.prototype.actionBegin=function(e){"sorting"===e.requestType&&this.showLoadingIndicator(this.gridContainer)},e.prototype.actionComplete=function(e){"sorting"===e.requestType&&this.hideLoadingIndicator(this.gridContainer)},e.prototype.generateColumns=function(e){for(var t,i=[],n=0;n<e.length;n++)!0===e[n].IsVisible&&((t={}).field=e[n].ID,t.headerText=e[n].Name,t.width=150,t.textAlign="Integer"===e[n].DataType||"Real"===e[n].DataType?"right":"left",i.push(t));return i},e.prototype.loadDataSourceData=function(e,t,i){BoldBIDashboard.isNullOrUndefined(i)||(this.dsLeftPanel.find(".e-active").removeClass("e-active"),this.bbdesigner$(i.currentTarget).addClass("e-active")),this.selectedDatasourceId=t,this.designer.modules.util.doAjaxPost("POST",this.designer.model.serviceUrl+BoldBIDashboard.Dashboard.ServiceAPI.processdata,{action:BoldBIDashboard.DashboardUtil.DesignerAction.GetPreviewData,data:JSON.stringify({className:BoldBIDashboard.DashboardUtil.DesignerAction.DataPreviewAction,designerAction:BoldBIDashboard.DashboardUtil.DesignerAction.GetPreviewData,dataPreviewId:t})},{fnction:this.bbdesigner$.proxy(this.loadPreviewGrid,this),indicator:[this.bbdesigner$.proxy(this.showLoadingIndicator,this,this.gridContainer)]})},e.prototype.showControlError=function(e,t){var i,n=e,o=(n.children(".bbi-dbrd-control").css({display:"none"}),this.removeControlError(n),BoldBIDashboard.buildTag("div.bbi-dbrd-control-error bbi-dbrd-align-center","",{},{})),r=BoldBIDashboard.buildTag("div.bbi-widget-error-icon e-dbrd-hoverable","",{"data-tooltip":"Data Retrieval Error"},{}),d=BoldBIDashboard.buildTag("div.e-dbrd-controlError-msg",this.locale.errorMessage.dataRetrievalError,{},{}),a=BoldBIDashboard.buildTag("div.bbi-dbrd-link-btn",this.locale.errorMessage.knowMore,{},{}),s=BoldBIDashboard.buildTag("button.bbi-dbrd-reload-retrievalerror-icon e-dbrd-bbi-reload-button bbi-dbrd-designer-hand-cursor bbi-dbrd-refresh-link-btn","",{},{type:"button"}),l=BoldBIDashboard.buildTag("span",this.locale.tableSelectorWindow.reloadButtonText,{},{});o.append(r,d,a),n.css({display:"table"}),s.append(l),o.append(s),n.append(o),this.hideLoadingIndicator(this.gridContainer),this.bbdesigner$(e).on("click",".bbi-dbrd-link-btn",this.bbdesigner$.proxy(this.designer.modules.util.alertDialog,this.designer.modules.util,this.locale.alertDialogTitle.dashboardDesigner,t.OuterMessage,IconType.errors,AlertType.Alert,!0,BoldBIDashboard.isNullOrUndefined(t.Message)?this.locale.errorMessage.widgetDataUpdateFailed:t.Message)),i=this,o.find(".bbi-dbrd-reload-retrievalerror-icon").bind("click",function(){i.loadDataSourceData("",i.selectedDatasourceId,null)})},e.prototype.resizeDataPreviewWindow=function(){this.designer.element.height(this.designer.element[0].parentElement.clientHeight),this.designer.element.width(this.designer.element[0].parentElement.clientWidth),0<this.bbdesigner$(this.dsPreviewTag).length&&(this.dsPreviewTag.find(".bbi-dbrd-datapreview-content-panel").css({width:this.designer.element.width()+"px"}),this.gridRightPanel.css({width:this.designer.element.width()-this.dsLeftPanel.outerWidth()-1+"px"}),this.gridContainer.css({width:this.designer.element.width()-this.dsLeftPanel.outerWidth()-51+"px"}),this.updateScrollerSize(),this.updatewaitingIndicatorPosition())},e.prototype.removeControlError=function(e){0<e.find(".bbi-dbrd-control-error").length&&e.find(".bbi-dbrd-control-error").remove()},e.prototype.updatewaitingIndicatorPosition=function(){var e=this.gridContainer.find(".bbi-background-waiting-popup");e.removeAttr("style"),e.css({width:this.gridContainer.width(),height:this.gridContainer.height(),position:"relative"})},e}();window.BoldBIDashboard.createObject("BoldBIDashboard.DashboardDesignerUtility.DataPreviewDialog",InternalDataPreviewDialog,window),function(i){function e(e,t,i){this.id=e,this.element=t,this.designer=i}e.prototype.render=function(){var e=this.element[0].parentElement.clientWidth,t=this.element[0].parentElement.clientHeight;this.element.css({width:e+"px",height:t+"px"}),0<this.element.find("#"+this.id+"_designerDatasourcePreviewPanel").length&&this.element.find("#"+this.id+"_designerDatasourcePreviewPanel").remove(),e=i.buildTag("div","",{width:"100%",height:"100%",display:"block","background-color":"white"},{id:this.id+"_designerDatasourcePreviewPanel"}),this.element.append(e),this.designer.modules.dataPreviewDialog.renderDataPreviewContainer(e)},e.prototype.postRender=function(){this.render(0)},e.prototype.setContainerSize=function(){},e.prototype.renderCanvas=function(){},e.prototype.previewDashboard=function(){},e.prototype.renderCells=function(){},e.prototype.renderCellsForExport=function(){},e.prototype.updateSizeForScrollExport=function(){},e.prototype.resizeCombineWidgetForWidgetExport=function(){},e.prototype.wireEvents=function(){},e.prototype.unwireEvents=function(){},i.DataPreviewMode=e}(BoldBIDashboard=BoldBIDashboard||{}),function(p){var e;function t(e){this.customWidgetsCollection=[],this.customWidgetItems=[],this.dashboardDesigner=e,this.bbdesigner$=this.dashboardDesigner.bbdesigner$}e=p.Dashboard||(p.Dashboard={}),t.prototype.generateToolTipTemplate=function(e,t,i){var n,o="",r=this.dashboardDesigner.modules.themeHelper.getTooltipTextColor(),d=this.dashboardDesigner.modules.themeHelper.getToolTipFontText(),i="background-color: "+this.dashboardDesigner.modules.themeHelper.getTooltipBackground()+"!important; border-color: "+this.dashboardDesigner.modules.themeHelper.getTooltipBorder()+"!important; z-index: "+i+"!important; color: "+r+"!important;",a="color: "+r+"!important;\nfont-size: "+d.size+"!important;\nfont-family: "+d.family+"!important;",s="color: "+r+" !important;\nfont-size: "+d.size+"!important;\nfont-weight: "+d.weight+"!important;\nfont-family: "+d.family+"!important;";if(0<e.length){for(o=o+('<div class="widget-tooltip-template" style="'+i+'" id='+t+"_toolTip>")+('<table class="tooltip-fontstyle" id='+t+"_tooltip_table>"),n=0;n<e.length;n++){var l=Object.keys(e[n])[0];o+="<tr id="+t+"_"+n+"_tooltip_table_rows><td id="+t+"_"+n+'_tooltip_table_rows_key style="'+a+'">'+p.DashboardUtil.encodeText(l)+" :</td><td id="+t+"_"+n+'_tooltip_table_rows_value style="'+s+'" >'+p.DashboardUtil.encodeText(e[n][l])+"</td></tr>"}o+="</table> </div>"}return o},t.enableClearFilter=function(e){var t,i;p.isNullOrUndefined(e.ControlHeader)&&e.getJson().ContainerSettings.ShowHeader||(t=e.IsPoPWidget?"e-dbrd-pop-reset":"bbi-remove-control-filter-enable",i=e.IsPoPWidget?e.designerInstance.getLocalizationContent().exportPanel.reset:e.designerInstance.getLocalizationContent().enableFilter.clearFilter,e.ControlContainer.find(".bbi-remove-control-filter").removeClass("bbi-remove-control-filter-disable").addClass(t+" bbi-dbrd-icon-theme").attr("data-tooltip",i),e.ControlContainer.find(".bbi-remove-control-filter").closest(".widget-control-icon-wrapper").addClass("bbi-dbrd-icon-background-theme"))},t.disableClearFilter=function(e){var t,i;p.isNullOrUndefined(e.ControlHeader)&&e.getJson().ContainerSettings.ShowHeader||(t=e.IsPoPWidget?"e-dbrd-pop-reset":"bbi-remove-control-filter-enable",i=e.designerInstance.getLocalizationContent().enableFilter.filterAction,e.ControlContainer.find(".bbi-remove-control-filter").removeClass(t+" bbi-dbrd-icon-theme").addClass("bbi-remove-control-filter-disable").attr("data-tooltip",i),e.ControlContainer.find(".bbi-remove-control-filter").closest(".widget-control-icon-wrapper").removeClass("bbi-dbrd-icon-background-theme"),e.ControlContainer.find(".bbi-remove-control-filter-disable").attr("data-tooltip",e.designerInstance.getLocalizationContent().toolBar.filter))},t.showInfoIcon=function(e,t){p.isNullOrUndefined(e)||""===e.trim()||p.isNullOrUndefined(t)||p.isNullOrUndefined(t.ControlHeader)||(t.ControlHeader.find(".bbi-dbrd-control-information-icon").remove(),e=p.buildTag("div.bbi-dbrd-control-information-icon e-dbrd-inform-control bbi-dbrd-designer-hoverable","",{display:"block","font-size":t.getIconFontSizeBasedOnResolution()},{"data-tooltip":e}),t.ControlHeader.append(e),t.ControlHeader.parents(".bbi-dbrd-control-container").mouseover(function(){0===t.ControlHeader.find('.bbi-remove-control-filter[style*="display: none"]').length&&t.ControlHeader.parents(".bbi-dbrd-control-container:not(.bbi-show-widget-not-configured)").find(".bbi-dbrd-controlIcon-container").css("margin-right",0===t.ControlHeader.find('.bbi-dbrd-control-information-icon[style*="display: none"]').length?"25px":"0")}),p.Dashboard.WidgetContainerHelper.setControlIconAlignment(t.ControlHeader.find(".bbi-dbrd-control-description"),t.ControlHeader.find(".bbi-dbrd-control-title-wrapper"),t.ControlHeader.find(".bbi-dbrd-controlIcon-container"),t.ControlHeader.find(".bbi-dbrd-control-title")))},t.hideInfoIcon=function(e){p.isNullOrUndefined(e)||p.isNullOrUndefined(e.ControlHeader)||(e.ControlHeader.find(".bbi-dbrd-control-information-icon").css("display","none").removeAttr("data-tooltip"),p.Dashboard.WidgetContainerHelper.setControlIconAlignment(e.ControlHeader.find(".bbi-dbrd-control-description"),e.ControlHeader.find(".bbi-dbrd-control-title-wrapper"),e.ControlHeader.find(".bbi-dbrd-controlIcon-container"),e.ControlHeader.find(".bbi-dbrd-control-title")))},t.getUniqueName=function(e,t,i,n){var o,r,d,a,s=[],l=[],b=t.designerPanel.isPasteAction?"_Copy":t.designerPanel.isExistingWidget?"_Imported":"",c=p.Dashboard.WidgetHelper.getAllWidgetElements(t._id,e.designerInstance.element.find("#"+e.designerInstance._id+"_designCanvas"),"."+e.RootCss);if(c.each(function(e,t){s.push(BoldBIDashboardDesigner.bbdesignerstatic$(t).attr("data-name"))}),n)for(o=0;o<c.length;o++)l.push(this.getWidgetInstance(c.eq(o)).getContainerSettings().Title);for(r=0;-1!==s.indexOf(e.Type+ ++r););if(t=e.Type+r,!p.isNullOrUndefined(d=i)&&(this.isAvailableWidgetName(l,i)&&(d=i+b),this.isAvailableWidgetName(l,d))){for(a=1;-1!==l.indexOf(d+ ++a););d+=a}return{Id:t,Name:d}},t.isAvailableWidgetName=function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},t.getWidgetElementVisibility=function(e,t,i){void 0===i&&(i=!1);var n=new WidgetElementsVisibility;return!p.isNullOrUndefined(t)&&t?(n.ShowLegend=!0,n.ShowXAxisLabels=!0,n.ShowXAxisTitle=!0,n.ShowYAxisTitle=!0,n.ShowYAxisLabels=!0):((4<=e.RowSpan&&4<e.ColumnSpan||4<e.RowSpan&&4<=e.ColumnSpan)&&(n.ShowLegend=!0),n.ShowXAxisLabels=i,8<=e.RowSpan&&6<=e.ColumnSpan&&(n.ShowXAxisTitle=!0),4<=e.RowSpan&&8<=e.ColumnSpan&&(n.ShowYAxisTitle=!0,n.ShowYAxisLabels=!0)),n},t.getWidgetInstance=function(e){return p.isNullOrUndefined(e)?null:e.data("widgetInstance")},t.prototype.getAllWidgets=function(){for(var e,t=p.Dashboard.WidgetHelper.getAllWidgetElements(this.dashboardDesigner._id,this.dashboardDesigner.modules.Mode.designCanvas,".bbi-dbrditem").not(".bbi-hide-qa-child-widget"),i=[],n=0;n<t.length;n++)e=p.Dashboard.WidgetHelper.getWidgetInstance(this.bbdesigner$(t[n])),i.push(e);return i},t.getAllWidgetElements=function(e,t,i){var n=null;return n=p.isNullOrUndefined(t)?n:(n=t.find(i)).add(BoldBIDashboardDesigner.bbdesignerstatic$(document.body).find(".bbi-content-div."+e).find(i))},t.prototype.getAllCustomWidgets=function(){for(var e=this.getAllWidgets(),t=[],i=0;i<e.length;i++)"CustomWidget"===e[i].Type&&t.push(e[i]);return t},t.prototype.getBingMapWidget=function(){for(var e=this.getAllWidgets(),t=[],i=0;i<e.length;i++)"BingMap"===e[i].Type&&t.push(e[i]);return t},t.prototype.getAllDatebucketWidgets=function(){return this.getAllWidgets().filter(function(e){return e.isDefaultDataWidget()})},t.prototype.createWidgetInstance=function(e){var t,i,n,o;try{if(p.isNullOrUndefined(e)||""===e.trim())return null;for(t=e.split("."),i=window,n=0;n<t.length;n++)i=i[t[n]];if(!p.isNullOrUndefined(i))return(o=Object.create(i.prototype)).constructor.apply(o,[this.dashboardDesigner]),o}catch(e){console.error(e.message)}return null},t.prototype.getWidgetObj=function(e,t,i){for(var n,o,r=p.isNullOrUndefined(t)?this.dashboardDesigner.itemPanel.widgetItems:t,d=0;d<r.length;d++)for(n=0;n<r[d].Items.length;n++)if((o=r[d].Items[n]).widgetNameSpace===e||o.serializationNameSpace===e||o.widgetName===e||o.id===i)return o;return null},t.prototype.getCurrentWidgetInstance=function(){var e=this.dashboardDesigner.designerPanel.selectedReportItems[0];return p.Dashboard.WidgetHelper.getWidgetInstance(e)},t.createWidgetContainer=function(e,t,i,n,o){var r=t.designerPanel.isPasteAction||t.designerPanel.isExistingWidget;return p.isNullOrUndefined(e.getJson().UniqueName)||r?(r=this.getUniqueName(e,t,n,r),e.Name=r.Id,e.getContainerSettings().Title=p.isNullOrUndefined(n)||""===n?r.Id:r.Name):(e.Name=e.getJson().UniqueName,e.getContainerSettings().Title=n),p.Dashboard.WidgetContainerHelper.createContainer(e,t,i,o),this.updateWidgetFontSizeOnRendering(e,t),e.ControlContainer},t.designerEventHandler=function(e,t,i,n){return!(p.isNullOrUndefined(e.EventHelper)||!e.EventHelper.isEventListenerConfigured(t,i))&&e.designerEventListener(t,i,n)},t.isDataWidget=function(e){return e instanceof p.Dashboard.DataWidget},t.isContainerWidget=function(e){return e instanceof p.ContainerWidget},t.getLineStyle=function(e){switch(e){case"Solid":return"0";case"Dot":return"2,3";case"Dash":return"4,8";case"DotDash":return"2,6,6,10";case"LongDash":return"15";case"LongDashDotDot":return"20,10,5,5,5,10";default:return"0"}},t.setLabelParameterId=function(e,t){var i,n,o,r;if(1<=e.find(".bbi-dbrd-label-parameter-text").length)for(i=t.modules.labelParameter,n=e.find(".bbi-dbrd-label-parameter-text"),o=0;o<n.length;o++)r=i.generateIdForLabelParameterElement(n[o]),BoldBIDashboardDesigner.bbdesignerstatic$(n[o]).attr("data-labelparameterid",r),t.model.mode!==p.Designer.mode.design&&(i.setValueForLabelParameter(n[o]),BoldBIDashboardDesigner.bbdesignerstatic$(n[o]).css({display:"none"}))},t.isOlderDashboardWidgets=function(e){return"Card"===e.Type||"ChoroplethMap"===e.Type||"BubbleMap"===e.Type},t.isFilterWidgets=function(e){return"TextFilter"===e.Type||"ListBox"===e.Type||"DatePicker"===e.Type||"RangeSlider"===e.Type||"ComboBox"===e.Type||"PeriodOverPeriod"===e.Type||"RangeNavigator"===e.Type},t.isTableWidgets=function(e){return"Grid"===e.Type||"PivotGrid"===e.Type||"PivotView"===e.Type},t.createWidgetActionContextMenu=function(e,t,i,n,o,r){var d,a,s,l,b,c,g,h;if(n=this.updateWidgetLinking(t,n),d=this.populateWidgetSelectionMenuItems(i,n,e),e.model.mode!==p.Designer.mode.design)1<(n=d.filter(function(e){return!0===e.IsVisible})).length?((c=p.buildTag("ul.bbi-designer-menu e-contextmenu","",{},{id:i+"_widget_action_menu"})).BoldBIDashboardMenu({menuType:p.MenuType.ContextMenu,openOnClick:!1,contextMenuTarget:"#"+i,width:"auto",animationType:"none",fields:{dataSource:n,id:"Name",text:"DisplayName"},click:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.onWidgetSelectionMenuItemClick,this,t,e,o),close:BoldBIDashboardDesigner.bbdesignerstatic$.proxy(this.onMenuItemClose,this,t,e,o)}),a=e.element,c.parents(".e-menu-wrap")&&c.parents(".e-menu-wrap").appendTo(a),l=(c=a.find("#"+i+"_widget_action_menu")).data("BoldBIDashboardMenu"),b=c.height(),c=c.width(),g=a.offset().left,h=a.offset().top,l.show(a.width()+g-r[0]<c?r[0]-c-g:r[0]-g,a.height()+h-r[1]<b?r[1]-b-h:r[1]-h,i,o)):1===n.length&&(l=n[0],t.performSelectedWidgetAction(l.Name,t,o,e));else for(s=0;s<d.length;s++)if(!0===d[s].IsVisible){-1!==t.Name.indexOf("Chart")&&-1===t.Name.indexOf("Radar")&&-1===t.Name.indexOf("ScatterChart")&&(o.cancel=!1),t.performSelectedWidgetAction(d.filter(function(e){return!0===e.IsVisible})[0].Name,t,o,e),this.updateWidgetFontSizeOnRendering(t,e);break}},t.updateWidgetLinking=function(e,t){return!p.isNullOrUndefined(e.getJson().WidgetLink)&&e.getJson().WidgetLink.Enable&&t.push(WidgetAction.WidgetLinking),t},t.onWidgetSelectionMenuItemClick=function(e,t,i,n){n.ID===WidgetAction.WidgetLinking?t.modules.containerTypeWidgetHelper.doInterWidgetLinking(e,i.selectedIndex):e.performSelectedWidgetAction(n.ID,e,i,t)},t.prototype.applyWidgetFilterValuesFromAPI=function(e,t){return t.processFilterInformation(e)},t.onMenuItemClose=function(e,t,i,n){-1!==e.Name.indexOf("Chart")&&-1===e.Name.indexOf("Radar")&&-1===e.Name.indexOf("ScatterChart")&&(i.cancel=!1,i.model.selectedDataPointIndexes=[]),p.isNullOrUndefined(n.target.text)&&(-1<e.Name.indexOf("Map")&&-1===e.Name.indexOf("Tree")&&-1===e.Name.indexOf("Heat")?e.mapObj.removeShapeSelection():-1<e.Name.indexOf("Grid")&&-1===e.Name.indexOf("Pivot")?e.clearSelection():-1<e.Name.indexOf("Pivot")?e.clearSelectionCell():-1<e.Name.indexOf("RadarPolar")?(e.radarPolarChartObj.selectedDataIndexes=[],e.radarPolarChartObj.refresh()):-1<e.Name.indexOf("ScatterChart")?(e.bubbleScatterChartObj.selectedDataIndexes=[],e.bubbleScatterChartObj.refresh()):-1<e.Name.indexOf("Chart")&&((p.isNullOrUndefined(e.chartObj)?(e.comboChartObj.model.selectedDataPointIndexes=[],e.comboChartObj):(e.chartObj.model.selectedDataPointIndexes=[],e.chartObj)).redraw(),!p.isNullOrUndefined(e.drilledChartObj)&&0<e.drillLevelInfo.length&&(e.drilledChartObj.model.selectedDataPointIndexes=[],e.drilledChartObj.redraw()),!p.isNullOrUndefined(e.drilledComboChartObj))&&0<e.drillLevelInfo.length&&(e.drilledComboChartObj.model.selectedDataPointIndexes=[],e.drilledComboChartObj.redraw()))},t.populateWidgetSelectionMenuItems=function(e,t,i){for(var n,o=[{Name:WidgetAction.DrillDown.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.drillDownDisplayName,IsVisible:!1},{Name:WidgetAction.Filter.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.filteringDisplayName,IsVisible:!1},{Name:WidgetAction.Linking.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.linkingDisplayName,IsVisible:!1},{Name:WidgetAction.ViewData.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.viewDataDisplayName,IsVisible:!1},{Name:WidgetAction.WidgetLinking.toString(),DisplayName:i.getLocalizationContent().widgetActionMenu.widgetLinkingDisplayName,IsVisible:!1}],r=0;r<o.length;r++)for(n=0;n<t.length;n++)if(t[n]===o[r].Name){o[r].IsVisible=!0;break}return o},t.getGlobalColumnId=function(t,e){for(var i,n=0;n<e.length;n++)if(0<e[n].FieldInfos.length&&0<(i=e[n].FieldInfos.filter(function(e){return e.UniqueColumnName===t})).length)return"bbi-designer-dataset-datetime"===i[0].FieldActualType?i[0].Id+"_"+i[0].DateTimeFormat:i[0].Id;return""},t.getColorCode=function(e,t,i){e=e.designerInstance.modules.resource.getColumnColorCode(t);return e=p.DashboardUtil.IsStringNullorWhiteSpace(e)?p.isNullOrUndefined(i)||p.DashboardUtil.IsStringNullorWhiteSpace(i.Color)?p.DashboardUtil.defaultColorPalette[0]:i.Color:e},t.updateIndividualColorBasedonTheme=function(e,t,i,n){if(e&&!p.isNullOrUndefined(t)&&t.Type===ColorCustomizationType.Individual&&0!==t.SolidColorInfo.length)for(var o,r=void 0,d=i[0].UniqueColumnName,r=t.SolidColorInfo.filter(function(e){return e.BasedOn.UniqueColumnName===d})[0].DefaultColorSets,e=t.SolidColorInfo[0].BasedOn.FieldId,a="bbi-designer-dataset-datetime"===i[0].FieldActualType?e+"_"+i[0].DateTimeFormat:e,s=0;s<r.length;s++)o=r[s].Name.toString(),r[s].Color=r[s].IsEdited?r[s].Color:n.modules.resource.getColumnValueColorCode(a,o)},t.prototype.updateConditionBasedWidgetTitleFont=function(e,t,i){p.isNullOrUndefined(i)||p.isNullOrUndefined(i.ControlHeader)||(e=e?this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.AutoFontSize?!this.dashboardDesigner.canApplyDashboardTheme()||"NumberCard"!==i.Type&&"KPICard"!==i.Type?i.getFontSizeBasedOnResolution(!0):"":this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.FontSize+"px":t+"px",(t=i.ControlHeader.find(".bbi-dbrd-control-title .e-title-text")).css("font-size",p.isNullOrUndefined(e)?"":e),i.ControlHeader.css("height",window.parseFloat(t.css("font-size"),10)+WidgetHeaderFontSizeFactor.title+"px"),this.updateContentContainerHeight(i))},t.prototype.updateContentContainerHeight=function(e){var t;p.isNullOrUndefined(e)||p.isNullOrUndefined(e.ControlHeader)||p.isNullOrUndefined(e.ControlSubHeader)||(t=0,"block"===e.ControlHeader.css("display")&&(t=e.ControlHeader.height()),t="none"!==e.ControlSubHeader.css("display")?t+e.ControlSubHeader.outerHeight():t,e.ContentContainer.css("height","calc(100% - "+t+"px)"))},t.prototype.updateConditionBasedWidgetSubTitleFont=function(e,t,i){p.isNullOrUndefined(i.ControlSubHeader)||(e=e?this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.AutoFontSize?!this.dashboardDesigner.canApplyDashboardTheme()||"NumberCard"!==i.Type&&"KPICard"!==i.Type?i.getFontSizeBasedOnResolution():"":this.dashboardDesigner.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.FontSize+"px":t+"px",(t=i.ControlSubHeader.find(".bbi-dbrd-control-sub-title .e-title-text")).css("font-size",p.isNullOrUndefined(e)?"":e),i.ControlSubHeader.css("height",window.parseFloat(t.css("font-size"),10)+WidgetHeaderFontSizeFactor.subTitle+"px"),this.updateContentContainerHeight(i))},t.updateWidgetFontSizeOnRendering=function(e,t){var i,n,o,r;this.isDataWidget(e)&&(r=e.getJson().ContainerSettings.WidgetTitleFontInfo,i=e.getJson().ContainerSettings.WidgetSubTitleFontInfo,o=!!p.isNullOrUndefined(r)||r.AutoFontSize,n=!!p.isNullOrUndefined(i)||i.AutoFontSize,o=o?t.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.AutoFontSize?null:t.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Title.FontSize:r.FontSize,r=n?t.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.AutoFontSize?null:t.modules.serialization.dashboardPropertyJson.WidgetFontInfo.Subtitle.FontSize:i.FontSize,p.isNullOrUndefined(e.ControlHeader)||((n=e.ControlHeader.find(".bbi-dbrd-control-title .e-title-text")).css("font-size",p.isNullOrUndefined(o)?"":o+"px"),e.ControlHeader.css("height",window.parseFloat(n.css("font-size"),10)+WidgetHeaderFontSizeFactor.title+"px")),p.isNullOrUndefined(e.ControlSubHeader)||((t=e.ControlSubHeader.find(".bbi-dbrd-control-sub-title .e-title-text")).css("font-size",p.isNullOrUndefined(r)?"":r+"px"),e.ControlSubHeader.css("height",window.parseFloat(t.css("font-size"),10)+WidgetHeaderFontSizeFactor.subTitle+"px")),p.isNullOrUndefined(e.ControlHeader)||p.isNullOrUndefined(e.ControlSubHeader)||(i=e.ControlHeader.height(),i="none"!==e.ControlSubHeader.css("display")?i+e.ControlSubHeader.outerHeight():i,e.ContentContainer.css("height","calc(100% - "+i+"px)"),p.Dashboard.WidgetContainerHelper.updateNoDataContainerSize(e,e.NoDataDispalyContainer,!1)))},t.updateWidgetContainerPosition=function(e,t){var i="";0<(e.widgetOrder=t)?i=t.toString():e.widgetOrder=100,("NumberCard"===e.Type||"KPICard"===e.Type?e.ControlContainer.find(".bbi-dbrd-content-container").children(".bbi-dbrd-isimage,.bbi-nodata-container,.bbi-widget-not-configured-text"):e.ControlContainer.find(".bbi-dbrd-content-container").children(".bbi-dbrd-control-header,.bbi-dbrd-isimage,.bbi-nodata-container,.bbi-widget-not-configured-text")).css("z-index",i),e.ControlContainer.find(".bbi-dbrd-content-container").children(".bbi-dbrd-control, .e-dbrd-widget").css("z-index",e.widgetOrder),this.isContainerWidget(e)&&e.updateWidgetPositionWithinContainer()},t.prototype.isMobileMode=function(){return!this.dashboardDesigner.model.dashboardFromData.isExportImage&&!this.dashboardDesigner.model.dashboardFromData.isExportPdf&&window.outerWidth<=768},t.prototype.getWidgetUsingId=function(t){var e=this.getAllWidgets().filter(function(e){return e.getJson().UniqueId===t});return 0<e.length?e[0]:null},t.prototype.getFirstWidgetHeight=function(){return this.dashboardDesigner.modules.Mode.designCanvas.find(".bbi-dbrditem")[0].clientHeight},t.prototype.getFirstCardWidget=function(e){return"NumberCard"===e.Type||"KPICard"===e.Type},t.updateURLLinkingforDrillDown=function(e,t,i){p.isNullOrUndefined(t)||p.isNullOrUndefined(e)||!i||-1===e.url.indexOf("?")||(-1!==(i=e.url.split("?"))[1].indexOf("&&")?e.url=this.validateParameterValues("&&",i,t):-1!==i[1].indexOf("&")?e.url=this.validateParameterValues("&",i,t):i.splice(0,1))},t.clearFilterSelectionOnParamInjectionChange=function(e,i){var t,n,o,r=i.getJson().SelectedFilterValues;if(0<r.length&&0<e.length&&0<r[0].InitialDimensionFilter.Text.length)for(t=function(t){if(0===e.filter(function(e){return e.ParameterValue===r[0].InitialDimensionFilter.Text[t]}).length)return i.getJson().SelectedFilterValues=[],{value:void 0}},n=0;n<r[0].InitialDimensionFilter.Text.length;n++)if("object"==typeof(o=t(n)))return o.value},t.splitURLlinkingFieldForDrillDown=function(e,t,i){for(var n,o,r,d,a,s,l,b=[],c=0;c<t.DataGroupInfo.FieldContainers.length;c++)if(t.DataGroupInfo.FieldContainers[c].IsDrillSection)if(1<=t.DrillLevelInfo.length)for(n=0;n<=t.DrillLevelInfo.length;n++)p.isNullOrUndefined(t.DataGroupInfo.FieldContainers[c].FieldInfos[n])||b.push(t.DataGroupInfo.FieldContainers[c].FieldInfos[n].Name);else b.push(t.DataGroupInfo.FieldContainers[c].FieldInfos[0].Name);for(o=[],r=0;r<b.length;r++)for(d=0;d<i.length;d++)-1!==i[d].indexOf(b[r])&&o.push(i[d]);for(a=[],s=0;s<o.length;s++)-1!==i.indexOf(o[s])&&a.push(o[s]);for(l=0;l<a.length;l++)e.push(a[l])},t.validateParameterValues=function(e,t,i){for(var n,o,r=t[1].split(e),d=(-(t.length=1)===t[0].indexOf("showmydashboards")&&(t[0]=t[0]+"?",-1!==r[0].indexOf("showmydashboards"))&&(t[0]=t[0]+r[0]+e,r.shift()),/={{:(.*?)}}/),a=r.filter(function(e){return d.test(e)}),s=r.filter(function(e){return-1===a.indexOf(e)}),l=0;l<s.length;l++)t.push(s[l]);for(0<a.length&&this.splitURLlinkingFieldForDrillDown(t,i,a),n="",o=0;o<t.length;o++)n=0===o||o===t.length-1?n+t[o]:n+t[o]+e;return n},t.getNumberOfParametersInjected=function(e){var t=0;return p.isNullOrUndefined(e)||e.FieldContainers.forEach(function(e){e.FieldInfos.forEach(function(e){!p.isNullOrUndefined(e.ParametersInWidgets)&&0<e.ParametersInWidgets.length&&(t=e.ParametersInWidgets.length)})}),t},t.prototype.updateBackgroundOpacityToChildWidgets=function(e){var t=this.dashboardDesigner.modules.containerTypeWidgetHelper.getContainerWidget(e);e.ControlContainer.css("background-color",!p.isNullOrUndefined(t)&&t.getJson().ContainerSettings.BackgroundSettings.EnableWidgetTransparency?"transparent":this.dashboardDesigner.modules.themeHelper.getWidgetTileBackground(null))},t.setElementTransparency=function(e,t){var i=e.css("background-color");-1!==i.indexOf("rgb")&&(i=(i=i.replace("rgb(","").replace(")","")).split(","),e.css("background-color","rgba("+i[0]+","+i[1]+","+i[2]+","+t+")"))},t.updateLabelParameterForDescription=function(e,t,i){var i=i.modules.labelParameter,n=e.ContainerSettings.Description,n=i.getResultantParameterString(n,e.Data.Id);t.html(n),t.attr("data-tooltip",t.text())},t.defaultColorPalette=["#77A7FB","#E57368","#FBCB43","#34B67A","#F1AB68","#6CC2D9","#195962","#E18878","#1AA27D","#BFAAC7","#89695e","#a5c77f","#f48fb1","#90caf9","#cc4452"],e.WidgetHelper=t}(BoldBIDashboard=BoldBIDashboard||{}),function(g){var e;function t(e){this.dashboardDesigner=e,this.bbdesigner$=this.dashboardDesigner.bbdesigner$}e=g.Dashboard||(g.Dashboard={}),t.createNoDataContainer=function(e){e.NoDataDispalyContainer=g.buildTag("div.bbi-dbrd-control-nodatainfo bbi-nodata-container","",{padding:e.getContainerSettings().ShowHeader?"0px 3px 3px 3px":"3px",overflow:"hidden","background-color":"transparent"},{});var t=g.buildTag("div.bbi-dbrd-control-nodatainfo e-info-div bbi-align-center","",{display:"block","background-color":"transparent",position:"absolute",width:"100%"},{}),i=g.buildTag("div.bbi-widget-info-icon","",{display:"inline-block"},{}),n=g.buildTag("div.e-nodata","",{},{});n.html(BoldBIDashboardDesigner.getLocale().designPanel.noDataToBeDisplay),t.append(i,n),e.NoDataDispalyContainer.append(t),this.updateNoDataContainerSize(e,e.NoDataDispalyContainer,!0),e.NoDataDispalyContainer.addClass("e-container-dbrd-theme"),e.ContentContainer.append(e.NoDataDispalyContainer),g.isNullOrUndefined(e.getContainerSettings().NoDataContainerSettings)||(i=e.getContainerSettings().NoDataContainerSettings,g.isNullOrUndefined(i.ImageInfo)||(n=i.ImageInfo,this.updateNoDataDefaultImg(e,n.ShowImage),n.ShowImage&&this.updateNoDataImageOpacity(e,n.Transparency)),this.updateNoDataIcon(e,e.getContainerSettings().NoDataContainerSettings.HideDefaultIcon,!0),this.updateNoDataFontColor(e,e.getContainerSettings().NoDataContainerSettings.FontColor),this.updateDataNotConfiguredMsg(e,e.getContainerSettings().NoDataContainerSettings.CustomMsg))},t.createContentContainer=function(e,t){var i=e.getContainerSettings().SubTitle,n=10;e.getContainerSettings().ShowHeader&&(n=e.ControlHeader.outerHeight(!0),!g.isNullOrUndefined(i)&&0<i.trim().length?(n+=e.ControlSubHeader.outerHeight(!0),e.ControlContainer.find(".bbi-dbrd-control-sub-header").css("display","block")):e.ControlContainer.find(".bbi-dbrd-control-sub-header").css("display","none")),i=e.getContainerSettings().ShowHeader?"calc(100% - "+n+"px)":"100%",e.ContentContainer=g.buildTag("div.bbi-dbrd-content-container e-dashboardviewer","",{width:"100%",height:i,"box-sizing":"border-box"},{}),0===e.ContentContainer.find(".bbi-background-waiting-popup").length&&this.appendSpinningWidgetForWidget(e.ContentContainer,t,e.Type),e.updateContainerPadding(),e.ControlContainer.find(".bbi-dbrd-control-container-wrapper").append(e.ContentContainer)},t.appendSpinningWidgetForWidget=function(e,t,i){var i=g.buildTag("div.bbi-background-waiting-popup","",{display:"none",top:"0px",position:"absolute",width:"100%",height:"100%","background-color":t.modules.themeHelper.getWaitingPopupBackground(i),"z-index":"150",opacity:1}),n=g.buildTag("div.bbi-dashboard-spinning-widget","",{});n.append(t.getLoadingSvgElement("var(--widget-loading-indicator-color)")),i.append(n),e.append(i)},t.createWidgetImage=function(e,t){var i=e;g.isNullOrUndefined(i)||(i=i.getWidgetImage(t),(t=g.buildTag("div.bbi-dbrd-isimage","",{},{})).append(i),e.ContentContainer.append(t))},t.createWidgetNotConfiguredContainer=function(e){var t=g.buildTag("div.bbi-widget-not-configured-text","",{},{}),i=g.buildTag("div.bbi-loader-background","",{background:e.designerInstance.modules.themeHelper.getWidgetTileBackground(null)},{}),n=g.buildTag("div.bbi-widget-not-configured-header","",{},{}),o=g.isNullOrUndefined(e.getContainerSettings().NoDataContainerSettings)||g.DashboardUtil.IsStringNullorWhiteSpace(e.getContainerSettings().NoDataContainerSettings.CustomMsg)?BoldBIDashboardDesigner.getLocale().designPanel.widgetNotConfigured:g.DashboardUtil.encodeText(e.getContainerSettings().NoDataContainerSettings.CustomMsg),r=null;!g.isNullOrUndefined(e.getContainerSettings().NoDataContainerSettings)&&e.getContainerSettings().NoDataContainerSettings.HideDefaultIcon||(r=g.buildTag("div.bbi-widget-not-configured-icon e-dbrd-designer-hoverable","",{},{"data-tooltip":o})),o=g.buildTag("div.bbi-widget-not-configured-content",o,{},{}),n.append(r,o),t.append(n),g.Dashboard.WidgetHelper.isDataWidget(e)?(e.ContentContainer.append(t,i),e.ContentContainer.closest(".bbi-dbrd-control-container").addClass("bbi-show-widget-not-configured")):e.ContentContainer.append(t),e.ContentContainer.find(".bbi-widget-not-configured-text").addClass("e-container-dbrd-theme")},t.widgetHasError=function(e){return 1===e.ContentContainer.find(".bbi-dbrd-control-error").length},t.isWidgetHasNotConfiguredClass=function(e){return e.ContentContainer.find(".bbi-widget-not-configured-text").closest(".bbi-dbrd-control-container").hasClass("bbi-show-widget-not-configured")},t.isWidgetNoDataContainerVisible=function(e){return e.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").is(":visible")},t.isWidgetRenderedWithData=function(e){return!this.isWidgetHasNotConfiguredClass(e)&&!this.isWidgetNoDataContainerVisible(e)&&!this.widgetHasError(e)},t.prototype.showControlError=function(e,t){1===e.ContentContainer.find(".bbi-dbrd-control-error").length&&e.ContentContainer.find(".bbi-dbrd-control-error").remove(),this.createErrorContainer(e,t),e.IsRendered=!0},t.addWidgetNotConfiguredClass=function(e){g.Dashboard.WidgetContainerHelper.toggleWidgetNotConfiguredClass(e,!0)},t.removeWidgetNotConfiguredClass=function(e){g.Dashboard.WidgetContainerHelper.toggleWidgetNotConfiguredClass(e,!1)},t.applyWidgetTitleColor=function(e,t,i,n){var o=e.designerInstance.modules.themeHelper.getWidgetTileTextColor(e.Type);t.find(".bbi-dbrd-control-title").css({color:"#686262"===i?o:i}),this.applyFontStylesForWidgetTitle(e,n)},t.applyWidgetSubTitleColor=function(e,t,i){var n=e.designerInstance.modules.themeHelper.getWidgetSubTitleTextColor(e.Type);t.find(".bbi-dbrd-control-sub-title").css({color:n}),this.applyFontStylesForWidgetSubTitle(e,i)},t.applyFontStylesForWidgetTitle=function(e,t){var i;!g.isNullOrUndefined(t)&&(e.designerInstance.canApplyTheme()||e.designerInstance.canApplyDashboardTheme()&&e.designerInstance.isViewMode())&&(i=" ."+e.RootCss+".bbi-dbrd-control-container .bbi-dbrd-control-header .bbi-dbrd-control-title .e-title-text",e.designerInstance.modules.themeHelper.applyWidgetFontStyles(e.Type+"_Title",i,t))},t.applyFontStylesForWidgetSubTitle=function(e,t){var i;!g.isNullOrUndefined(t)&&(e.designerInstance.canApplyTheme()||e.designerInstance.canApplyDashboardTheme()&&e.designerInstance.isViewMode())&&(i=" ."+e.RootCss+".bbi-dbrd-control-container .bbi-dbrd-control-sub-header .bbi-dbrd-control-sub-title .e-title-text",e.designerInstance.modules.themeHelper.applyWidgetFontStyles(e.Type+"_SubTitle",i,t))},t.applyErrorContainerTheme=function(e){var t=e.designerInstance.modules.themeHelper.getWidgetTileBackground(null),i=e.designerInstance.modules.themeHelper.getWidgetTileTextColor(),n=e.designerInstance.modules.themeHelper.getWidgetContainerBorder(e.designerInstance.isDarkTypeTheme()),o=e.ContentContainer.find(".bbi-widget-not-configured-text").attr("style"),o=e.designerInstance.modules.themeHelper.getStyleString(o,"background-color:"+t+"!important; color:"+i+"!important; borderColor:"+n+"!important; ");e.ContentContainer.find(".bbi-widget-not-configured-text").attr("style",o),o=e.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").attr("style"),o=e.designerInstance.modules.themeHelper.getStyleString(o,"color:"+i+"!important; "),e.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").attr("style",o),o=e.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").find(".bbi-align-center").attr("style"),o=e.designerInstance.modules.themeHelper.getStyleString(o,"color:"+i+"!important; "),e.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").find(".bbi-align-center").attr("style",o),o=e.ContentContainer.find(".bbi-dbrd-control-error").attr("style"),o=e.designerInstance.modules.themeHelper.getStyleString(o,"background-color:"+t+"!important; color:"+i+"!important; "),e.ContentContainer.find(".bbi-dbrd-control-error").attr("style",o),o=e.ContentContainer.find(".bbi-dbrd-control-error").find(".bbi-reload-button").attr("style"),o=e.designerInstance.modules.themeHelper.getStyleString(o,"background-color:"+t+"!important; color:"+i+"!important; "),e.ContentContainer.find(".bbi-dbrd-control-error").find(".bbi-reload-button").attr("style",o)},t.toggleWidgetNotConfiguredClass=function(e,t){e.ContentContainer.find(".bbi-widget-not-configured-text").closest(".bbi-dbrd-control-container").toggleClass("bbi-show-widget-not-configured",t),e.ContentContainer.find(".bbi-widget-not-configured-text").addClass("e-container-dbrd-theme")},t.prototype.createErrorContainer=function(e,t){var i=e.getContainerSettings(),i=i.ShowBorder?i.CornerRadius:0,n=e.updateContainerHeightInResize(e),o=e.ContentContainer.width(),i=(e.ContentContainer.children(".bbi-dbrd-control").css({display:"none"}),0<e.ContentContainer.find(".bbi-dbrd-control-error").length&&e.ContentContainer.find(".bbi-dbrd-control-error").remove(),g.buildTag("div.bbi-dbrd-control-error bbi-align-center","",{"z-index":e.ContentContainer.children(".bbi-dbrd-control").css("z-index"),position:"relative","border-radius":i+"px",overflow:"hidden","background-color":"transparent"},{})),r=this.getDisplayError(t.ErrorCode.toString()),d=g.buildTag("div.bbi-widget-error-icon e-dbrd-hoverable","",{},{"data-tooltip":r}),a=g.buildTag("div.e-dbrd-controlError-msg",r,{},{}),s=g.buildTag("div.bbi-dbrd-link-btn",BoldBIDashboardDesigner.getLocale().errorMessage.knowMore,{},{});95<n?(o<65&&(a.width(o),s.width(o),o<40)&&d.width(o),n<120&&o<65?i.append(d):i.append(d,a,s)):40<=n?(o<40&&d.width(o),i.append(d)):n<=40&&20<=n&&(d.css({height:n,width:n,"background-size":"cover"}),i.append(d)),e.ContentContainer.css({display:"table"}),a=!1,(s=g.buildTag("button.reload-retrievalerror-icon bbi-reload-button bbi-dbrd-designer-hand-cursor bbi-dbrd-refresh-link-btn",BoldBIDashboardDesigner.getLocale().tableSelectorWindow.reloadButtonText,{"padding-left":"6px","font-size":"13px"},{type:"button"})).addClass("e-container-dbrd-theme"),65<=n&&(o<65&&s.width(o),i.append(s),a=!0),i.addClass("e-container-dbrd-theme"),e.ContentContainer.append(i),e.ControlContainer.height()<i.height()&&(e.ContentContainer.find(".reload-retrievalerror-icon").remove(),a=!1),i.children().hasClass("bbi-dbrd-link-btn")&&this.errReloadClickHandler(t,e.ContentContainer,r),g.Dashboard.WidgetContainerHelper.bindReloadAction(a?i.find(".reload-retrievalerror-icon"):i.find(".bbi-widget-error-icon"),e),1===e.CellInfo.RowSpan&&1===e.CellInfo.ColumnSpan?this.errorMessageForSingleSizedWidget(i,BoldBIDashboardDesigner.getLocale().errorMessage.dataRetrievalError):1===e.CellInfo.RowSpan&&this.errorMessageForRegularSizedWidget(i),"block"===e.ContentContainer.find(".bbi-loader-background").css("display")&&e.ContentContainer.find(".bbi-loader-background").css("display","none")},t.bindReloadAction=function(e,t){var i=t;e.bind("click",function(){i.dataConfigurationInstance.postDraggedFields(t.ContentContainer.parents(".bbi-dbrditem"),!1,t.masterFilterWindowInstance.getSelectedValuesForWidgetRequest())})},t.prototype.getDisplayError=function(e){var t=this.dashboardDesigner.getErrorCodes();if(!g.isNullOrUndefined(t[e]))return"ERR: "+e+"-"+t[e]},t.prototype.errReloadClickHandler=function(e,t,i){var n=this.dashboardDesigner.modules.util;t.on("click",".bbi-dbrd-link-btn",this.bbdesigner$.proxy(n.alertDialog,n,BoldBIDashboardDesigner.getLocale().errorMessage.dataRetrievalError,g.isNullOrUndefined(e.OuterMessage)||g.DashboardUtil.isEmptyString(e.OuterMessage)?BoldBIDashboardDesigner.getLocale().errorMessage.defaultNullErrorMessage:i,IconType.errors,AlertType.Alert,!0,g.isNullOrUndefined(e.Message)?BoldBIDashboardDesigner.getLocale().errorMessage.widgetDataUpdateFailed:e.Message))},t.prototype.errorMessageForSingleSizedWidget=function(e,t){e.find(".bbi-widget-error-icon").remove(),e.prepend(this.bbdesigner$("<div>").addClass("widget-error-icon-single").attr({"data-tooltip":t}).addClass("e-dbrd-hoverable").css({"font-size":"18px"})),e.find(".e-dbrd-controlError-msg").remove(),e.find(".bbi-dbrd-link-btn").css({"font-size":"7px"}),e.find(".bbi-dbrd-refresh-link-btn").css({border:"none","font-size":"7px",color:"#3b99fc",height:"15px","margin-top":"0px"})},t.prototype.errorMessageForRegularSizedWidget=function(e){e.find(".bbi-widget-error-icon").addClass("e-dbrd-iocn-single"),e.find(".e-dbrd-controlError-msg").remove(),e.find(".bbi-dbrd-refresh-link-btn").addClass("e-dbrd-refresh-single")},t.updateNoDataContainerSize=function(e,t,i){var n=0==e.ContentContainer.find(".bbi-widget-info-icon").length?14:59,i=e.updateContainerHeightIndraftLoading(e,i),n=i-n,o=e.ContentContainer.width(),r=!1;i<=35&&20<=i?(t.find(".bbi-widget-info-icon").css({display:"block",height:i,width:i,"background-size":"cover"}),r=!0,t.find(".e-nodata").css("display",0==e.ContentContainer.find(".bbi-widget-info-icon").length&&i>=g.parseInt(t.find(".e-nodata").css("font-size").replace("px",""))?"block":"none")):i<40?(t.find(".bbi-widget-info-icon").css("display",1==e.ContentContainer.find(".bbi-widget-info-icon").length&&35<=i?"block":"none"),t.find(".e-nodata").css("display",0==e.ContentContainer.find(".bbi-widget-info-icon").length&&i>=g.parseInt(t.find(".e-nodata").css("font-size").replace("px",""))?"block":"none")):(40<=i&&i<65||i<=65&&o<190||i<95&&o<65||(i<120||i<145)&&o<40||i<200&&o<15?(t.find(".e-nodata").css("display",i>=35+g.parseInt(t.find(".e-nodata").css("font-size").replace("px",""))?"block":"none"),t.find(".bbi-widget-info-icon")):(t.find(".bbi-widget-info-icon").css("display","block"),t.find(".e-nodata"))).css("display","block"),o<40?(r?t.find(".bbi-widget-info-icon").css({overflow:"hidden"}):t.find(".bbi-widget-info-icon").css({width:o,overflow:"hidden"}),t.find(".e-nodata").css({width:o,overflow:"hidden"})):(r?t.find(".bbi-widget-info-icon").css({overflow:"auto"}):t.find(".bbi-widget-info-icon").css({width:"",overflow:"auto"}),t.find(".e-nodata").css({width:"",overflow:"auto"})),t.find(".bbi-dbrd-control-nodatainfo.e-info-div.bbi-align-center").css({"margin-top":0<n&&0!==e.ContentContainer.height()?n/2:0})},t.createContainer=function(e,t,i,n){var o="bbi-canvas bbi-dbrd-control-container",r=t.modules.Mode.designCanvas.find(".bbi-dbrditem"),i=(t.designerPanel.isMobileView&&t.model.isPinWidget&&(i.width=t.modules.Mode.designCanvas.width()-10,i.height=t.modules.Mode.designCanvas.height()+t.designerPanel.cellMargin-10,o+=" bbi-dbrd-control-container-pinwidget"),e.ControlContainer=g.buildTag("div.bbi-dbrditem "+o,"",{left:t.model.dashboardFromData.isWidgetSpecific||t.model.dashboardFromData.isControl&&t.model.dashboardFromData.isWidgetPagewiseExport?"":i.left,top:t.model.dashboardFromData.isWidgetSpecific||t.model.dashboardFromData.isControl&&t.model.dashboardFromData.isWidgetPagewiseExport?"":i.top,width:t.model.dashboardFromData.isWidgetSpecific||t.model.dashboardFromData.isControl&&t.model.dashboardFromData.isWidgetPagewiseExport?t.modules.Mode.designCanvas.width()-10:i.width,height:t.designerPanel.isMobileView&&!t.model.isPinWidget?e.getMobileViewHeight():t.model.dashboardFromData.isWidgetSpecific||t.model.dashboardFromData.isControl&&t.model.dashboardFromData.isWidgetPagewiseExport?0==r.length?t.modules.Mode.designPanelTag.height()-t.modules.Mode.designPanelTag.find(".bbi-dashboarddesigner-bannerPanel").height()-10:t.modules.Mode.designPanelTag.height()-10:i.height,background:e.designerInstance.modules.themeHelper.getWidgetTileBackground(null),"border-radius":e.getContainerSettings().CornerRadius,position:t.model.dashboardFromData.isWidgetSpecific||t.model.dashboardFromData.isControl&&t.model.dashboardFromData.isWidgetPagewiseExport?"relative":"absolute",margin:t.model.dashboardFromData.isWidgetSpecific||t.model.dashboardFromData.isControl&&t.model.dashboardFromData.isWidgetPagewiseExport?0==r.length?"5px 5px":"10px 5px":""},{id:t._id+"_"+e.Name,"data-name":e.Name,"data-hasheader":e.getContainerSettings().ShowHeader,"data-widget-id":e.getJson().UniqueId}),o=g.isNullOrUndefined(t.model.widgetContainerSettings)||g.DashboardUtil.IsStringNullorWhiteSpace(t.model.widgetContainerSettings.boxShadow)?null:t.model.widgetContainerSettings.boxShadow,this.updateWidgetShadow(e.getContainerSettings().ShowShadow,e.ControlContainer,o),g.Dashboard.WidgetHelper.isContainerWidget(e)&&t.modules.containerTypeWidgetHelper.addContainerClass(e),this.updateMinMobileViewHeight(e,t),i=g.buildTag("div.bbi-dbrd-control-background","",{width:"100%",height:"100%",position:"absolute","background-color":e.designerInstance.modules.themeHelper.getWidgetTileBackground(e.Type),"background-repeat":"no-repeat",opacity:g.isNullOrUndefined(e.getJson())?1:e.backgroundInfo.Opacity},{}),r=g.buildTag("div.bbi-dbrd-control-container-wrapper","",{width:"100%",height:"100%","box-sizing":"border-box",padding:"0px"},{}),e.ControlContainer.append(i,r),e.updateControlContainerPadding(),e.getBackgroundForControlContainer(),!t.model.isPinWidget||t.model.loadMultipleWidget||t.model.widgetId===e.getJson().UniqueId||!g.isNullOrUndefined(e.getContainerSettings().CombineWidgetId)&&""!==e.getContainerSettings().CombineWidgetId||e.ControlContainer.css("display","none"),e.ControlContainer.addClass(e.RootCss),t.modules.Mode.designCanvas.append(e.ControlContainer),t.isMobileLayout()&&!g.isNullOrUndefined(t.model.widgetContainerSettings.margin)&&e.ControlContainer.css("margin",t.model.widgetContainerSettings.margin+"px"),o={controlTitle:e.getJson().ContainerSettings.Title,controlId:e.Name,isMaximizeEnable:!1,isFilterIconEnable:e.getJson().FilterSettings.ActAsMasterWidget},e.getJson().ContainerSettings.ShowHeader&&(this.getControlHeader(o,e,t),this.getControlSubHeader(e)),this.createContentContainer(e,t),e.ControlContainer.hasClass("e-card-item")||e.ControlContainer.hasClass("e-label-item")?this.setIconContainerForCardControl(e,t):e.getJson().ContainerSettings.ShowHeader||this.iconContainerForNoHeader(o,e,t),!g.Dashboard.WidgetHelper.isDataWidget(e)||g.Dashboard.WidgetHelper.isOlderDashboardWidgets(e)||!g.isNullOrUndefined(t.model.dashboardFromData)&&t.model.dashboardFromData.loadFromData||this.createWidgetImage(e,n),this.createNoDataContainer(e),BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-title")),r=BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-description"),o=e.getJson().ContainerSettings.Title,n=t.modules.labelParameter,o=n.getResultantParameterString(o,e.getJson().Data.Id);i.html(o),i.attr("data-tooltip",i.text()),n.adjustParameterColumn(BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-title-wrapper")),o=t.modules.containerPropertyItem,BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-sub-title").css({"justify-content":o.getContainerTitleAlignmentValue(g.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,e.getJson().ContainerSettings.TextAlignment))}),(t.model.dashboardFromData.isExportImage||t.model.dashboardFromData.isExportPdf)&&(BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-title-wrapper").addClass("export-"+g.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,e.getJson().ContainerSettings.TextAlignment).toLowerCase()),BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-sub-title").addClass("export-"+g.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,e.getJson().ContainerSettings.TextAlignment).toLowerCase())),this.setControlIconAlignment(r,BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-title-wrapper"),BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-controlIcon-container"),i),this.createWidgetNotConfiguredContainer(e),e.updateIconContainerBackground(),t.model.localData.loadFromData||t.modules.widgetContainerHelper.showLoadingIndicator(e)," "!==e.getJson().ContainerSettings.SubTitle&&(r=e.getJson().ContainerSettings.SubTitle,i=BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-sub-title"),r=n.getResultantParameterString(r,e.getJson().Data.Id),i.html(r),i.attr("data-tooltip",i.text()),n.adjustParameterColumn(BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-sub-header")),e.updateSubTitleForContainer())," "!==e.getJson().ContainerSettings.Description&&(r=BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-description"),g.Dashboard.WidgetHelper.updateLabelParameterForDescription(e.getJson(),r,t)),BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-sub-title").css({color:e.designerInstance.modules.themeHelper.getWidgetSubTitleTextColor(e.Type)}),e.getJson().ContainerSettings.ShowBorder&&(BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-sub-title").css({"justify-content":o.getContainerTitleAlignmentValue(g.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,e.getJson().ContainerSettings.TextAlignment))}),BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-title").css({color:e.getJson().ContainerSettings.TextColor}),e.getJson().ContainerSettings.ShowBorder?BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).css({border:"1px solid "+this.getThemeVariablesForWidgets(e.Type,!1,!1)}):BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).css({border:"0px"})),i=4===e.getJson().ContainerSettings.CornerRadius?this.getThemeVariablesForWidgets(e.Type,!0,!1):e.getJson().ContainerSettings.CornerRadius+"px",BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).css("border-radius",i),BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-content-container").css("border-radius",i),BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-nodatainfo").css("border-radius",i),BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-widget-not-configured-text").css("border-radius",i),BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-loader-background").css("border-radius",i),BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-background").css("border-radius",i),t.designerPanel.isMobileView&&t.designerPanel.updateScrollBar(),e.isBackgroundInfoNeeded||e.ControlContainer.find(".bbi-dbrd-control-background").css("background-color","transparent"),this.updateTitleForHigherResolution(e)},t.getThemeVariablesForWidgets=function(e,t,i){switch(e){case ControlType.Grid.toString():return i?"var(--grid-widget-container-bg-color)":t?"var(--grid-widget-container-border-radius)":"var(--grid-widget-container-border-color)";case ControlType.KPICard.toString():return i?"var(--kpicard-widget-container-bg-color)":t?"var(--kpicard-widget-container-border-radius)":"var(--kpicard-widget-container-border-color)";case ControlType.NumberCard.toString():return i?"var(--numbercard-widget-container-bg-color)":t?"var(--numbercard-widget-container-border-radius)":"var(--numbercard-widget-container-border-color)";case ControlType.Map.toString():return i?"var(--map-widget-container-bg-color)":t?"var(--map-widget-container-border-radius)":"var(--map-widget-container-border-color)";case ControlType.HeatMap.toString():return i?"var(--heatmap-widget-container-bg-color)":t?"var(--heatmap-widget-container-border-radius)":"var(--heatmap-widget-container-border-color)";case ControlType.TreeMap.toString():return i?"var(--treemap-widget-container-bg-color)":t?"var(--treemap-widget-container-border-radius)":"var(--treemap-widget-container-border-color)";case ControlType.Chart.toString():return i?"var(--chart-widget-container-bg-color)":t?"var(--chart-widget-container-border-radius)":"var(--chart-widget-container-border-color)";case ControlType.ComboBox.toString():return i?"var(--combobox-widget-container-bg-color)":t?"var(--combobox-widget-container-border-radius)":"var(--combobox-widget-container-border-color)";case ControlType.ComboChart.toString():return i?"var(--combochart-widget-container-bg-color)":t?"var(--combochart-widget-container-border-radius)":"var(--combochart-widget-container-border-color)";case ControlType.DatePicker.toString():return i?"var(--datepicker-widget-container-bg-color)":t?"var(--datepicker-widget-container-border-radius)":"var(--datepicker-widget-container-border-color)";case ControlType.ListBox.toString():return i?"var(--listbox-widget-container-bg-color)":t?"var(--listbox-widget-container-border-radius)":"var(--listbox-widget-container-border-color)";case ControlType.PivotGrid.toString():return i?"var(--pivotgrid-widget-container-bg-color)":t?"var(--pivotgrid-widget-container-border-radius)":"var(--pivotgrid-widget-container-border-color)";case ControlType.PeriodOverPeriod.toString():return i?"var(--pop-widget-container-bg-color)":t?"var(--pop-widget-container-border-radius)":"var(--pop-widget-container-border-color)";case ControlType.RadarPolarChart.toString():return i?"var(--radarpolar-widget-container-bg-color)":t?"var(--radarpolar-widget-container-border-radius)":"var(--radarpolar-widget-container-border-color)";case ControlType.RangeNavigator.toString():return i?"var(--rangenavigator-widget-container-bg-color)":t?"var(--rangenavigator-widget-container-border-radius)":"var(--rangenavigator-widget-container-border-color)";case ControlType.RangeSlider.toString():return i?"var(--rangeslider-widget-container-bg-color)":t?"var(--rangeslider-widget-container-border-radius)":"var(--rangeslider-widget-container-border-color)";case ControlType.RichTextEditor.toString():return i?"var(--rte-widget-container-bg-color)":t?"var(--rte-widget-container-border-radius)":"var(--rte-widget-container-border-color)";case ControlType.Scatter.toString():return i?"var(--scatter-widget-container-bg-color)":t?"var(--scatter-widget-container-border-radius)":"var(--scatter-widget-container-border-color)";case ControlType.RadialGauge.toString():return i?"var(--circulargauge-widget-container-bg-color)":t?"var(--circulargauge-widget-container-border-radius)":"var(--circulargauge-widget-container-border-color)";case ControlType.TabbedWidget.toString():return i?"var(--tab-widget-container-bg-color)":t?"var(--tab-widget-container-border-radius)":"var(--tab-widget-container-border-color)";case ControlType.TextFilter.toString():return i?"var(--textfilter-widget-container-bg-color)":t?"var(--textfilter-widget-container-border-radius)":"var(--textfilter-widget-container-border-color)";case ControlType.Image.toString():return i?"var(--image-widget-container-bg-color)":t?"var(--image-widget-container-border-radius)":"var(--image-widget-container-border-color)";case ControlType.CombineWidget.toString():return i?"var(--combine-widget-container-bg-color)":t?"var(--combine-widget-container-border-radius)":"var(--combine-widget-container-border-color)";default:return i?"var(--widget-primary-background)":t?"var(--widget-container-border-radius)":"var(--widget-container-border-color)"}},t.updateWidgetShadow=function(e,t,i){e&&!g.DashboardUtil.IsStringNullorWhiteSpace(i)?t.css({"box-shadow":i}):e&&g.DashboardUtil.IsStringNullorWhiteSpace(i)?t.css({"box-shadow":"var(--container-box-shadow)"}):t.css({"box-shadow":"none"})},t.updateMinMobileViewHeight=function(e,t){var i,n;g.DashboardUtil.IsStringNullorWhiteSpace(e.getContainerSettings().CombineWidgetId)&&(e.ControlContainer[0].style.removeProperty("min-height"),t.designerPanel.isMobileView)&&(n=e.ControlContainer.attr("style"),i="min-height:"+e.getMinMobileHeight()+" !important; ",n=t.modules.themeHelper.getStyleString(n,i),e.ControlContainer.attr("style",n))},t.updateTitleForHigherResolution=function(e){var t;!g.isNullOrUndefined(e.ControlHeader)&&!g.isNullOrUndefined(e.ControlSubHeader)&&e.isVisualWidget&&3840<=window.screen.width&&(e.ControlHeader.css({height:g.parseInt(e.ControlHeader.find(".bbi-dbrd-control-title").css("font-size"),10)+4+"px"}),e.ContentContainer.css("height","calc(100% - "+e.ControlHeader.height()+"px"),t=e.getJson().ContainerSettings.SubTitle,!g.isNullOrUndefined(t)&&0<t.trim().length&&(e.ControlSubHeader.css({height:g.parseInt(e.ControlSubHeader.find(".bbi-dbrd-control-sub-title").css("font-size"),10)+4+"px"}),e.ContentContainer.css("height","calc(100% - "+(e.ControlHeader.height()+e.ControlSubHeader.height())+"px")),e.ControlHeader.find(".bbi-dbrd-control-title").css("line-height","normal"),e.ControlSubHeader.find(".bbi-dbrd-control-sub-title").css("line-height","normal"),e.ControlHeader.find(".bbi-dbrd-control-description").css({"align-items":"center","line-height":"normal","margin-left":"1%"}),"block"===e.ControlHeader.find(".bbi-dbrd-control-description").css("display"))&&e.ControlHeader.find(".bbi-dbrd-control-description").css("display","flex")},t.setControlIconAlignment=function(e,t,i,n){"flex-end"===t.css("justify-content")&&("block"===t.parent().find(".e-dbrd-inform-control").css("display")&&(t.parent().find(".e-dbrd-inform-control").css("right","auto"),t.parent().find(".e-dbrd-inform-control").css("left","0")),i.css("left","0"),i.css("right","auto")),"flex-start"!==t.css("justify-content")&&"center"!==t.css("justify-content")||("block"===t.parent().find(".e-dbrd-inform-control").css("display")&&(t.parent().find(".e-dbrd-inform-control").css("right","0"),t.parent().find(".e-dbrd-inform-control").css("left","auto")),i.css("left","auto"),i.css("right","0")),"block"===e.css("display")&&("center"===t.css("justify-content")?(i.outerWidth(!0),i.outerWidth(!0),e.outerWidth(!0)):(i.outerWidth(!0),e.outerWidth(!0))),n.css({"max-width":"calc(100%)"})},t.getFieldContainer=function(e,t){return null!=e&&0<e.FieldContainers.length?e.FieldContainers.filter(function(e){return e.Name===t})[0]:null},t.setAttributes=function(e,t){for(var i in t)e.setAttributeNS(null,i,t[i])},t.getHeaderTemplate=function(e,t,i){var n=t.isVisualWidget?700:500,o=t.designerInstance.modules.themeHelper.getWidgetTileTextColor(t.Type),r=t.isVisualWidget?"22px":"19px",d=t.getJson().ContainerSettings.Description,d=g.isNullOrUndefined(d)||d.trim().length<=0?"none":"block",i=i.modules.containerPropertyItem.getContainerTitleAlignmentValue(g.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,t.getJson().ContainerSettings.TextAlignment));return'<div class="bbi-dbrd-control-title-wrapper" style="width: 100%; display: flex; align-items: center; justify-content: '.concat(i,';">\n                    <div class="bbi-dbrd-control-title bbi-dbrd-designer-hoverable" style="max-width: 100%; font-size: ').concat(t.getFontSizeBasedOnResolution(e.controlTitle),"; font-weight: ").concat(n,"; color: ").concat(o,';" data-tooltip="').concat(e.controlTitle,'">\n                    <span class="e-title-text e-title-value">').concat(e.controlTitle,'</span>\n                    </div>\n                    <div class="bbi-dbrd-control-description e-icon-dbrd-theme bbi-dbrd-designer-hoverable" style="display: ').concat(d,"; line-height: ").concat(r,"; font-size: ").concat(t.getIconFontSizeBasedOnResolution(),'; height: 20px;" data-tooltip="').concat(t.getJson().ContainerSettings.Description,'">\n                    </div>\n                    </div>')},t.getIconTemplate=function(e,t,i,n,o){return'<td class="widget-control-icon-wrapper '.concat("bbi-remove-control-filter bbi-remove-control-filter-disable"===e?"":"bbi-dbrd-icon-background-theme",'" style="display:none; text-align:center; padding:0px;">\n                    <div class="').concat(e,'" id="').concat(t,'" data-name="').concat(i,'" style="display:none; padding:4px; font-size: ').concat(o.designerInstance.modules.themeHelper.getControlIconFontSize(o),';"\n                    data-tooltip="').concat(n,'"></div></td>')},t.getControlHeader=function(e,t,i){t.ControlHeader=BoldBIDashboardDesigner.bbdesignerstatic$('<div class="bbi-dbrd-control-header" data-widget-id="'.concat(e.controlId,'"></div>')),t.ControlContainer.find(".bbi-dbrd-control-container-wrapper").prepend(t.ControlHeader),i.model.IsEmbed&&i.isWidgetRequest(i.model.filterParameters)&&i.element.find(".bbi-dbrd-control-header").css("display","block"),t.ControlHeader.append(BoldBIDashboardDesigner.bbdesignerstatic$(this.getHeaderTemplate(e,t,i))),t.ControlHeader.append(this.getControlHeaderIcons(e,t,i))},t.getControlHeaderIcons=function(e,t,i){var n='<div class="bbi-dbrd-controlIcon-container" id="'.concat(e.controlId,'_controlIcon_container" style="height:22px;"></div>'),o=[{class:"bbi-dbrd-maxim-close e-dbrd-maximClose-toggle bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable",name:"maximize_close",id:e.controlId+"_maxCloseButton",tooltip:BoldBIDashboardDesigner.getLocale().maximize.close},{class:"bbi-dbrd-control-menu-icon bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable",name:"menu",id:e.controlId,tooltip:BoldBIDashboardDesigner.getLocale().exportPanel.moreOptions},{name:"export",class:"bbi-dashboard-widget-menu bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable",id:e.controlId,tooltip:BoldBIDashboardDesigner.getLocale().banerPanel.exportTooltip},{class:"bbi-dbrd-legend-icon bbi-dbrd-designer-icon bbi-dbrd-designer-hoverable",name:"legendIcon",id:e.controlId+"_legendIcon",tooltip:"Legend Dropdown Icon"},{class:"bbi-remove-control-filter bbi-remove-control-filter-disable",name:"filter",id:e.controlId+"_clearFilter_icon",tooltip:BoldBIDashboardDesigner.getLocale().enableFilter.filterAction},{class:"bbi-dbrd-maxim bbi-dbrd-maxim-toggle bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable",name:"maximize",id:e.controlId+"_maximize",tooltip:BoldBIDashboardDesigner.getLocale().maximize.maximize},{class:"bbi-dbrd-refresh-icon bbi-dbrd-icon-theme bbi-dbrd-designer-hoverable",name:"refresh_time",id:e.controlId+"_refreshTime",tooltip:"Refresh Timer"}],o=this.getControlIconContainer({iconList:o,controlObj:t,headerProperties:e,showHeader:!1},BoldBIDashboardDesigner.bbdesignerstatic$(n),i),n=o.find(".bbi-dbrd-control-menu-icon"),r=o.find(".bbi-remove-control-filter"),d=o.find(".bbi-dbrd-maxim"),a=o.find(".su-without-comment.su-icon"),s=o.find(".su-with-comment.su-icon"),l=o.find(".su-pin.su-icon"),b=o.find(".bbi-dbrd-legend-icon"),c=o.find(".bbi-dbrd-refresh-icon");return b.css("display","none"),c.css("display","none"),b=t.getContainerSettings(),c=(i.model.mode===g.Designer.mode.view||i.model.mode===g.Designer.mode.designpreview)&&(b.EnableImageExport||b.EnablePdfExport||b.EnableExcelExport||b.EnableCsvExport),t=t.getContainerSettings().ShowMaximize,c&&this.applyIconVisibility(n,"block"),e.isFilterIconEnable&&this.applyIconVisibility(r,"block"),t&&i.model.mode!==g.Designer.mode.design&&this.applyIconVisibility(d,"block"),b.EnableComment&&(this.applyIconVisibility(a,"block"),this.applyIconVisibility(s,"block")),b.PinWidget&&this.applyIconVisibility(l,"block"),i.model.isPinWidget&&o.find(".bbi-dbrd-maxim").remove(),this.getRefreshTimeIndicator(e.controlId,o),o},t.applyIconVisibility=function(e,t){g.isNullOrUndefined(e)||e.css("display",t).parent().css("display",t)},t.getRefreshTimeIndicator=function(e,t){g.buildTag("div.bbi-dbrd-refreshtime-notifier bbi-dashboarddesigner-display-none","",{},{id:e+"_refreshTime_notifier"}).insertAfter(t.find(".bbi-dbrd-refresh-icon"))},t.getControlSubHeader=function(e){var t=e.getJson().ContainerSettings.SubTitle,i=g.DashboardUtil.encodeText(t);e.ControlSubHeader=g.buildTag("div.bbi-dbrd-control-sub-header","",{display:!g.isNullOrUndefined(t)&&0<t.trim().length?"block":"none"}),t=g.buildTag("div.bbi-dbrd-control-sub-title bbi-dbrd-designer-hoverable","",{width:"calc(100% - 10px)"},{}),i=g.buildTag("span.e-title-text",i,{"font-size":e.getFontSizeBasedOnResolution(),"font-weight":e.isVisualWidget?400:500},{"data-tooltip":i}),t.append(i),e.ControlSubHeader.prepend(t),BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-header").after(e.ControlSubHeader)},t.getControlIconContainer=function(e,t,i){var n,o,r=e.iconList,d=e.controlObj,a=e.headerProperties,s=d.getJson();if(s.ContainerSettings.EnableComment=!d.ControlContainer.hasClass("e-image")&&!d.ControlContainer.hasClass("e-rte-item")&&s.ContainerSettings.EnableComment,i.model.mode===g.Designer.mode.view)try{i._trigger("beforeWidgetIconRendered",{iconsinformation:r,widgetInformation:d,isFilterWidget:!e.showHeader&&!g.isNullOrUndefined(a)&&a.isFilterIconEnable,enableComment:s.ContainerSettings.EnableComment,enablePinWidget:s.ContainerSettings.PinWidget,uniqueId:s.UniqueId,dashboardComment:i.modules.serialization.dashboardPropertyJson.EnableComments})}catch(e){console.error(e)}for(n="<table><tr>",o=0;o<r.length;o++)n+=this.getIconTemplate("bbi-dbrd-designer-hoverable e-icon-dbrd-theme ".concat(r[o].class),r[o].id,r[o].name,r[o].tooltip,d);return n+="</tr></table>",t.append(BoldBIDashboardDesigner.bbdesignerstatic$(n)),t},t.getControlDescriptionIcon=function(e){var t=g.buildTag("div .bbi-dbrd-control-description e-icon-dbrd-theme bbi-dbrd-designer-hoverable"),i=e.getJson().ContainerSettings.Description;return!g.isNullOrUndefined(i)&&0<i.length?(t.addClass("bbi-dbrd-control-align"),t.attr("data-tooltip",i),e.isVisualWidget||t.css("line-height","12px")):(t.css("display","none"),t.attr("data-tooltip","")),t.css("font-size",e.getIconFontSizeBasedOnResolution()),t},t.setIconContainerForCardControl=function(e,t){var i;t.model.mode===g.Designer.mode.view&&(i='<div class="bbi-dbrd-controlIcon-container e-dbrd-single-card-controlIcon" id="'.concat(e.Name,'_controlIcon_container" style="height:22px;"></div>'),i=g.Dashboard.WidgetContainerHelper.getControlIconContainer({iconList:[],controlObj:e,showHeader:!0},BoldBIDashboardDesigner.bbdesignerstatic$(i),t),e.ControlContainer.find(".bbi-dbrd-control-container-wrapper").append(i))},t.iconContainerForNoHeader=function(e,t,i){var n='<div class="bbi-dbrd-control-header" style="position:absolute; right:0px; top:2px;" data-widget-id="'.concat(e.controlId,'"></div>'),e=this.getControlHeaderIcons(e,t,i);t.ContentContainer.prepend(BoldBIDashboardDesigner.bbdesignerstatic$(n).append(e)),i=t.getControlContainerPaddingValue(),t.ContentContainer.find(".bbi-dbrd-controlIcon-container").css({"padding-right":i+"px"})},t.updateWidgetNotConfiguredPanel=function(e){e.ContentContainer.closest(".bbi-dbrd-control-container").height()<57?(this.hideWidgetNotConfiguredIcon(e.ContentContainer),this.hideWidgetNotConfiguredContent(e.ContentContainer)):57<=e.ContentContainer.closest(".bbi-dbrd-control-container").height()&&e.ContentContainer.closest(".bbi-dbrd-control-container").height()<86?(this.showWidgetNotConfiguredIcon(e.ContentContainer),this.hideWidgetNotConfiguredContent(e.ContentContainer)):86<=e.ContentContainer.closest(".bbi-dbrd-control-container").height()&&(this.showWidgetNotConfiguredIcon(e.ContentContainer),this.showWidgetNotConfiguredContent(e.ContentContainer))},t.showWidgetNotConfiguredIcon=function(e){e.find(".bbi-widget-not-configured-icon").is(":visible")||setTimeout(function(){e.find(".bbi-widget-not-configured-icon").css("display","block")},0)},t.hideWidgetNotConfiguredIcon=function(e){e.find(".bbi-widget-not-configured-icon").is(":visible")&&setTimeout(function(){e.find(".bbi-widget-not-configured-icon").css("display","none")},0)},t.showWidgetNotConfiguredContent=function(e){e.find(".bbi-widget-not-configured-content").is(":visible")||setTimeout(function(){e.find(".bbi-widget-not-configured-content").css("display","block")},0)},t.hideWidgetNotConfiguredContent=function(e){e.find(".bbi-widget-not-configured-content").is(":visible")&&setTimeout(function(){e.find(".bbi-widget-not-configured-content").css("display","none")},0)},t.prototype.showLoadingIndicator=function(e){g.Dashboard.WidgetHelper.isDataWidget(e)&&(e.ControlContainer||this.dashboardDesigner.designerPanel.selectedReportItems[0]).find(".bbi-background-waiting-popup").show()},t.prototype.hideLoadingIndicator=function(e){(e.ControlContainer||this.dashboardDesigner.designerPanel.selectedReportItems[0]).find(".bbi-background-waiting-popup").hide()},t.hideWidgetContainerImage=function(e){e.find(".bbi-dbrd-isimage").hide()},t.hideWidgetContainer=function(e){e.ContentContainer.find(".bbi-dbrd-control").hide()},t.showWidgetContainerImage=function(e){this.hideNoDataDisplay(e),this.hideControlError(e),this.addWidgetNotConfiguredClass(e),this.hideControlContainer(e),e.ContentContainer.find(".bbi-dbrd-isimage").show()},t.showAlertMessageForData=function(e,t,i,n,o){var r,d;0===t.find(".bbi-dbrd-necessary-data-not-configured").length&&(this.removeAlertMessageForData(t),r=g.buildTag("div.bbi-dbrd-necessary-data-not-configured","",{display:n?"table":"block"},{}),d=g.buildTag("div."+(n?"bbi-dbrd-widget-not-configured-header-combine":"bbi-dbrd-widget-not-configured-header")+" bbi-dbrd-designer-hoverable","",{},{"data-tooltip":e}),n=n?"bbi-information-icon-combine":"bbi-dbrd-necessary-data-not-configured-icon",o=g.isNullOrUndefined(o)||1<o.RowSpan&&1<o.ColumnSpan?"inline-block":"none",n=g.buildTag("div."+n+" bbi-dbrd-designer-hoverable","",{display:o},{"data-tooltip":e}),o=g.buildTag("div.bbi-dbrd-widget-not-necessary-data-configured-content",e,{display:t.height()<150||t.width()<150?"none":"block"},{}),d.append(n,o),r.append(d),t.append(r),this.updateNoNecessaryDataContainerSize(t),this.updateZIndexInCW(t,r,i))},t.updateZIndexInCW=function(e,t,i){!g.DashboardUtil.IsStringNullorWhiteSpace(i)&&0<e.find(".bbi-dbrd-isimage").length&&(i=e.find(".bbi-dbrd-isimage")[0].style.zIndex,t.css("z-index",i))},t.updateNoNecessaryDataContainerSize=function(e,t,i,n){var o,r,d,a,s;0<e.find(".bbi-dbrd-necessary-data-not-configured").length&&(d=(r=e.find(t?".bbi-dbrd-widget-not-configured-header-combine":".bbi-dbrd-widget-not-configured-header")).find(".bbi-dbrd-widget-not-necessary-data-configured-content"),a=r.find(".bbi-information-icon-combine"),s="",!g.isNullOrUndefined(a)&&0<a.length&&(n=g.isNullOrUndefined(n)||1<n.RowSpan&&1<n.ColumnSpan?"inline-block":"none",a.css({display:n})),s=e.height()<190||e.width()<190?(d.css({display:"none"}),"none"):(e.find(".bbi-dbrd-isimage").show(),d.css({display:"block"}),"block"),o=e.height()<190||e.width()<190?e.height()-32:e.height()-(32+d.height()),t||setTimeout(function(){r.find(".bbi-dbrd-necessary-data-not-configured-icon.bbi-dbrd-designer-hoverable").css({"margin-top":o/2}),g.isNullOrUndefined(i)||i.updateSizeOfWidgetNotConfigured(e,o/2,s)},0))},t.removeAlertMessageForData=function(e){e.find(".bbi-dbrd-necessary-data-not-configured").remove()},t.hideControlContainer=function(e){e.ContentContainer.find(".bbi-dbrd-control").hasClass("e-customwidgetitem")||e.ContentContainer.find(".bbi-dbrd-control").hasClass("e-datebucket-control")||e.ContentContainer.find(".bbi-dbrd-control").hide()},t.showControlContainer=function(e){e.ContentContainer.find(".bbi-dbrd-control").show()},t.hideControlError=function(e){e.ContentContainer.find(".bbi-dbrd-control-error").remove(),e.ContentContainer.css("display","block")},t.hideNoDataDisplay=function(e){t.toggleNoDataDisplay(e,!1)},t.showNoDataDisplay=function(e){t.toggleNoDataDisplay(e,!0)},t.toggleNoDataDisplay=function(e,t){e.ContentContainer.find(".bbi-dbrd-control-nodatainfo.bbi-nodata-container").css("display",t?"block":"none").addClass("e-container-dbrd-theme")},t.onWidgetMouseOver=function(e){BoldBIDashboardDesigner.bbdesignerstatic$(e.currentTarget).parents().hasClass("bbi-container-widget")?BoldBIDashboardDesigner.bbdesignerstatic$(e.currentTarget).find(".bbi-dbrd-controlIcon-container").addClass("bbi-show-icon"):BoldBIDashboardDesigner.bbdesignerstatic$(e.currentTarget).hasClass("bbi-container-widget")?BoldBIDashboardDesigner.bbdesignerstatic$(e.currentTarget).find(".bbi-dbrd-controlIcon-container").first().addClass("bbi-show-icon"):(BoldBIDashboardDesigner.bbdesignerstatic$(e.currentTarget).find(".bbi-dbrd-controlIcon-container").addClass("bbi-show-icon-normal-widget"),e=g.Dashboard.WidgetHelper.getWidgetInstance(BoldBIDashboardDesigner.bbdesignerstatic$(e.currentTarget)),t.controlTitleResponsiveness(e,!0))},t.onWidgetMouseLeave=function(e){BoldBIDashboardDesigner.bbdesignerstatic$(e.currentTarget).find(".bbi-dbrd-controlIcon-container").removeClass("bbi-show-icon");e=g.Dashboard.WidgetHelper.getWidgetInstance(BoldBIDashboardDesigner.bbdesignerstatic$(e.currentTarget));t.controlTitleResponsiveness(e,!1)},t.onRefreshIconMouseLeave=function(e){BoldBIDashboardDesigner.bbdesignerstatic$(e.currentTarget).parent().find(".bbi-dbrd-refreshtime-notifier").addClass("bbi-dashboarddesigner-display-none")},t.controlTitleResponsiveness=function(e,t){var i,n,o,r,d,a,s=e.designerInstance.modules.aiWidgetHelper.getChildWidget(e);g.isNullOrUndefined(s)&&(s=e.getJson(),i=BoldBIDashboardDesigner.bbdesignerstatic$(e.ControlContainer).find(".bbi-dbrd-control-header"),(o=(n=e.ControlContainer.find(".bbi-dbrd-control-title-wrapper")).find(".bbi-dbrd-control-title")).children().css({"text-overflow":"ellipsis"}),r=s.ContainerSettings.WidgetTitleFontInfo.AutoFontSize?s.ContainerSettings.WidgetTitleFontInfo.FontSize:22,r=e.designerInstance.measureText(o.text(),n.width(),{size:r,fontStyle:"Normal",fontFamily:"Roboto"}),d=e.ControlContainer.find(".bbi-dbrd-controlIcon-container").outerWidth(!0),a=n.find(".bbi-dbrd-control-description").is(":visible")?n.find(".bbi-dbrd-control-description").outerWidth(!0):0,s.ContainerSettings.TextAlignment===TextAlignment.Left?t?(o.css({width:r.width+a>=i.width()?i.width()-(d+a)>=o.width()?o.width():i.width()-(d+a):"auto"}),n.css({width:r.width+a+d>=i.width()?i.width()-d:i.width()})):(o.css({width:r.width>=i.width()?i.width()-a:"auto"}),n.css({width:r.width+a>i.width()?i.width():"calc(100%)"})):s.ContainerSettings.TextAlignment===TextAlignment.Center?t?o.css({width:r.width+a>n.width()-2*d?"calc(100% - "+(2*d+a)+"px)":"auto"}):o.css({width:r.width>n.width()?"calc(100%)":"auto"}):s.ContainerSettings.TextAlignment===TextAlignment.Right&&(!t||"NumberCard"!==e.Type&&"kpicard"!==e.Type.toLowerCase()?t||o.css({width:r.width>n.width()?"calc(100%)":"auto"}):e.ControlContainer.find(".bbi-dbrd-controlIcon-container").css({right:"auto",left:"0px"})),i=g.DashboardDesignerUtility.ContainerPropertyItem.prototype.getContainerTitleAlignmentValue(TextAlignment[e.getContainerSettings().TextAlignment]),o.css({"justify-content":i}))},t.onCombineWidgetClick=function(e){var t=BoldBIDashboardDesigner.bbdesignerstatic$(e.target).closest(".bbi-dbrditem");t.hasClass("bbi-selected-item")||BoldBIDashboardDesigner.bbdesignerstatic$(e.target).hasClass("bbi-dbrd-designer-hoverable")||(t.hasClass("bbi-combine-item")?t.find(".bbi-combine-selected").removeClass("bbi-combine-selected bbi-widget-selected"):t.find(".bbi-dbrd-controlIcon-container").hasClass("bbi-combine-selected")?t.parent().find(".bbi-combine-item .bbi-combine-selected").removeClass("bbi-combine-selected bbi-widget-selected"):(t.parent().find(".bbi-combine-item .bbi-combine-selected").removeClass("bbi-combine-selected bbi-widget-selected"),t.find(".bbi-dbrd-controlIcon-container").addClass("bbi-combine-selected"),t.find(".bbi-dbrd-control-header").addClass("bbi-combine-selected"),t.parent().find(".bbi-combine-item .bbi-dbrd-controlIcon-container:first").addClass("bbi-combine-selected bbi-widget-selected")))},t.disableHeader=function(e,t){var i={controlTitle:e.getContainerSettings().Title,controlId:e.ControlContainer.attr("data-name"),isMaximizeEnable:!1,isFilterIconEnable:e.getJson().FilterSettings.ActAsMasterWidget};g.isNullOrUndefined(e.ControlHeader)||(e.ControlHeader[0].innerHTML=""),g.isNullOrUndefined(e.ControlSubHeader)||(e.ControlSubHeader[0].innerHTML=""),e.ControlContainer.find(".bbi-dbrd-control-header").remove(),e.ControlContainer.find(".bbi-dbrd-control-sub-header").remove(),this.iconContainerForNoHeader(i,e,t),e.ContentContainer.css({height:"100%"})},t.updateDataNotConfiguredMsg=function(e,t){0<t.length&&(t=g.DashboardUtil.encodeText(t),e.NoDataDispalyContainer.find(".e-nodata").html(t))},t.updateNoDataIcon=function(e,t,i){var n=e.NoDataDispalyContainer.find(".bbi-widget-info-icon");t?n.remove():0===n.length&&(n=g.buildTag("div.bbi-widget-info-icon","",{display:"inline-block"},{})).insertBefore(e.NoDataDispalyContainer.find(".e-nodata")),this.updateNoDataContainerSize(e,e.NoDataDispalyContainer,!g.isNullOrUndefined(i))},t.updateNoDataDefaultImg=function(e,t){var i;t?(t=e.getWidgetImage(),(i=g.buildTag("div.bbi-dbrd-nodataimage","",{disply:"block",height:"100%",width:"100%"},{})).append(t),e.NoDataDispalyContainer.prepend(i)):e.NoDataDispalyContainer.find(".bbi-dbrd-nodataimage").remove()},t.updateNoDataFontColor=function(e,t){e.NoDataDispalyContainer.find(".e-nodata").css("color",t)},t.updateNoDataImageOpacity=function(e,t){e.NoDataDispalyContainer.find(".bbi-dbrd-nodataimage").css("opacity",t)},t.getMobileHeightFactor=function(e){var t=1;return t=g.isNullOrUndefined(e.getJson().ContainerSettings.Bounds.MobileHeightFactor)||0===e.getJson().ContainerSettings.Bounds.MobileHeightFactor?t:e.getJson().ContainerSettings.Bounds.MobileHeightFactor},e.WidgetContainerHelper=t}(BoldBIDashboard=BoldBIDashboard||{}),function(e){var t;function i(){this.events=[]}e=e.Dashboard||(e.Dashboard={}),i.prototype.addListener=function(e,t){var i=this.find(e,t);-1===i?this.events.push({module:e,eventType:t}):this.events[i]={module:e,eventType:t}},i.prototype.removeListener=function(e,t){e=this.find(e,t);-1!==e&&this.events.splice(e,1)},i.prototype.clear=function(){this.events=[]},i.prototype.isEventListenerConfigured=function(e,t){return-1!==this.find(e,t)},i.prototype.find=function(e,t){for(var i,n=0;n<this.events.length;n++)if((i=this.events[n]).module===e&&i.eventType===t)return n;return-1},e.DesignerEventHelper=i,(t=e.Module||(e.Module={}))[t.designPanel=0]="designPanel",t[t.propertyPanel=1]="propertyPanel",t[t.designer=2]="designer",(t=e.EventType||(e.EventType={}))[t.mouseDown=0]="mouseDown",t[t.mouseUp=1]="mouseUp",t[t.mouseClick=2]="mouseClick",t[t.mouseDbClick=3]="mouseDbClick"}(BoldBIDashboard=BoldBIDashboard||{});